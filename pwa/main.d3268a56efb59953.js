var oS=Object.defineProperty,rS=Object.defineProperties,sS=Object.getOwnPropertyDescriptors,Kb=Object.getOwnPropertySymbols,aS=Object.prototype.hasOwnProperty,lS=Object.prototype.propertyIsEnumerable,Um=(L,W,m)=>W in L?oS(L,W,{enumerable:!0,configurable:!0,writable:!0,value:m}):L[W]=m,Gm=(L,W)=>{for(var m in W||(W={}))aS.call(W,m)&&Um(L,m,W[m]);if(Kb)for(var m of Kb(W))lS.call(W,m)&&Um(L,m,W[m]);return L},Wm=(L,W)=>rS(L,sS(W)),cc=(L,W,m)=>(Um(L,"symbol"!=typeof W?W+"":W,m),m);(self.webpackChunkAutoBlocklyApp=self.webpackChunkAutoBlocklyApp||[]).push([[179],{76186:(L,W,m)=>{"use strict";m.d(W,{d:()=>yt});var y=m(79307),p=m(38421);const{isArray:e}=Array;var n=m(60515),o=m(25403),s=m(63269);var v=m(39646),R=m(4128),O=m(32076),H=m(91005),V=m(18505),G=m(63900),Z=m(70262),vt=m(54004),it=m(21086),ot=m(5e3),wt=m(40520),ct=m(16335);let yt=(()=>{class lt{constructor(bt,tt){this.http=bt,this.loadShowUsageService=tt,this.settings=null,this.linksSwagger=[],this.demoBlocks=[],this.swaggersDict=new Map,this.customCategories="",this.Init()}Init(){return function(...lt){const at=(0,s.jO)(lt),bt=function(lt){return 1===lt.length&&e(lt[0])?lt[0]:lt}(lt);return bt.length?new y.y(tt=>{let Rt=bt.map(()=>[]),mt=bt.map(()=>!1);tt.add(()=>{Rt=mt=null});for(let dt=0;!tt.closed&&dt<bt.length;dt++)(0,p.Xf)(bt[dt]).subscribe(new o.Q(tt,nt=>{if(Rt[dt].push(nt),Rt.every(st=>st.length)){const st=Rt.map(Gt=>Gt.shift());tt.next(at?at(...st):st),Rt.some((Gt,It)=>!Gt.length&&mt[It])&&tt.complete()}},()=>{mt[dt]=!0,!Rt[dt].length&&tt.complete()}));return()=>{Rt=mt=null}}):n.E}(this.getSettings(),this.loadShowUsageService.getSwaggerLinks(),this.loadShowUsageService.getDemoBlocks(),this.loadShowUsageService.getCustomCategories(),this.getLatestVersion()).pipe((0,H.g)(2e3),(0,V.b)(([bt,tt,Rt,mt,dt])=>{this.settings=bt,this.settings.latestVersion=dt,this.linksSwagger=tt,this.demoBlocks=Rt,this.customCategories=mt}),(0,G.w)(()=>this.obtainSwaggers(this.linksSwagger)),(0,G.w)(()=>(0,v.of)("")))}obtainSwaggers(bt){var tt=bt.map(mt=>this.LoadSwaggersFromUrl(mt));return(0,R.D)(tt)}LoadSwaggersFromUrl(bt){var tt=bt.link,Rt=bt.id||bt.link,mt=new it.parseData(tt);return(0,O.D)(mt.ParseSwagger()).pipe((0,V.b)(nt=>{console.log("swagger loaded:"+tt,nt),nt.name=Rt,this.swaggersDict.set(tt,nt)},nt=>{console.error("swagger error:"+tt,nt)}))}getLatestVersion(){return this.http.get("https://ignatandrei.github.io/BlocklyAutomation/version.txt",{responseType:"text"}).pipe((0,Z.K)(bt=>(console.error("error getting latest version",bt),(0,v.of)("vcannot get latest version"))),(0,vt.U)(bt=>bt.toString().trim().substr(1)))}getSettings(){var bt=(new Date).toISOString();return this.http.get(`assets/settings.json?${bt}`,{responseType:"text"}).pipe((0,vt.U)(tt=>JSON.parse(tt)))}}return lt.\u0275fac=function(bt){return new(bt||lt)(ot.LFG(wt.eN),ot.LFG(ct.F))},lt.\u0275prov=ot.Yz7({token:lt,factory:lt.\u0275fac}),lt})()},68260:(L,W,m)=>{"use strict";m.d(W,{v:()=>e});var y=m(77579),p=m(5e3);let e=(()=>{class t{constructor(){this.sendData=new y.x}receiveData(){return this.sendData.asObservable()}sendDataToServer(o,s){this.sendData.next([o,s])}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac}),t})()},37907:(L,W,m)=>{"use strict";m.r(W),m.d(W,{DisplayBlocklyComponent:()=>Zf});var y=m(15861),p=m(76279),e=m(30069);const t=[p.Events.VIEWPORT_CHANGE,p.Events.BLOCK_MOVE,p.Events.BLOCK_DELETE];class s{constructor(l){this.workspace_=l,this.width_=0,this.height_=0,this.top_=0,this.left_=0,this.lastScale_=1,this.cachedContentMetrics_=void 0}init(l){l=Number(l),this.padding_=isNaN(l)?10:l,this.svgGroup_=p.utils.dom.createSvgElement(p.utils.Svg.G,{class:"contentAreaHighlight"},null);const r=String(Math.random()).substring(2),a=p.utils.dom.createSvgElement(new p.utils.Svg("mask"),{id:"contentAreaHighlightMask"+r},this.svgGroup_);p.utils.dom.createSvgElement(p.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",fill:"white"},a),this.rect_=p.utils.dom.createSvgElement(p.utils.Svg.RECT,{x:0,y:0,rx:p.Bubble.BORDER_WIDTH,ry:p.Bubble.BORDER_WIDTH,fill:"black"},a),this.background_=p.utils.dom.createSvgElement(p.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",mask:"url(#contentAreaHighlightMask"+r+")"},this.svgGroup_),this.applyColor_();const u=this.workspace_.getMetricsManager();this.cachedContentMetrics_=u.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_);const g=u.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,g),this.svgGroup_.style.transition="opacity 0.25s";const E=this.workspace_.getParentSvg();E.firstChild?E.insertBefore(this.svgGroup_,E.firstChild):E.appendChild(this.svgGroup_),this.onChangeWrapper_=this.onChange_.bind(this),this.workspace_.addChangeListener(this.onChangeWrapper_)}dispose(){this.svgGroup_&&p.utils.dom.removeNode(this.svgGroup_),this.onChangeWrapper_&&p.unbindEvent_(this.onChangeWrapper_)}onChange_(l){if(l.type===p.Events.THEME_CHANGE)this.applyColor_();else if(-1!==t.indexOf(l.type)){const r=this.workspace_.getMetricsManager();l.type!==p.Events.VIEWPORT_CHANGE&&(this.cachedContentMetrics_=r.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_));const a=r.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,a)}else l.type===p.Events.BLOCK_DRAG&&this.handleBlockDrag_(l)}handleBlockDrag_(l){this.svgGroup_.setAttribute("opacity",l.isStart?"0":"1")}applyColor_(){const r=this.workspace_.getTheme().getComponentStyle("workspaceBackgroundColour")||"#ffffff",a=p.utils.colour.blend("#000",r,.1),u=p.utils.colour.blend("#fff",r,.1);this.background_.setAttribute("fill","#ffffff"===r||"#fff"===r?a:u)}resize_(l){const r=l.width?l.width+2*this.padding_:0,a=l.height?l.height+2*this.padding_:0;r!==this.width_&&(this.width_=r,this.rect_.setAttribute("width",r)),a!==this.height_&&(this.height_=a,this.rect_.setAttribute("height",a))}position_(l,r){const g=this.workspace_.scale,E=r.top+l.top*g- -this.workspace_.scrollY-this.padding_*g,w=r.left+l.left*g- -this.workspace_.scrollX-this.padding_*g;(E!==this.top_||w!==this.left_||this.lastScale_!==g)&&(this.top_=E,this.left_=w,this.lastScale_=g,this.rect_.setAttribute("transform","translate("+w+","+E+") scale("+g+")"))}}var c=m(4283),v=m(34346),R=m(21086),O=m(70697);const V="undefined"==typeof window?function(_){return _()}:window.requestAnimationFrame;function G(_,l,r){const a=r||(E=>Array.prototype.slice.call(E));let u=!1,g=[];return function(...E){g=a(E),u||(u=!0,V.call(window,()=>{u=!1,_.apply(l,g)}))}}const vt=_=>"start"===_?"left":"end"===_?"right":"center",it=(_,l,r)=>"start"===_?l:"end"===_?r:(l+r)/2;function wt(){}const ct=function(){let _=0;return function(){return _++}}();function yt(_){return null==_}function lt(_){if(Array.isArray&&Array.isArray(_))return!0;const l=Object.prototype.toString.call(_);return"[object"===l.substr(0,7)&&"Array]"===l.substr(-6)}function at(_){return null!==_&&"[object Object]"===Object.prototype.toString.call(_)}const bt=_=>("number"==typeof _||_ instanceof Number)&&isFinite(+_);function tt(_,l){return bt(_)?_:l}function Rt(_,l){return void 0===_?l:_}const dt=(_,l)=>"string"==typeof _&&_.endsWith("%")?parseFloat(_)/100*l:+_;function nt(_,l,r){if(_&&"function"==typeof _.call)return _.apply(r,l)}function st(_,l,r,a){let u,g,E;if(lt(_))if(g=_.length,a)for(u=g-1;u>=0;u--)l.call(r,_[u],u);else for(u=0;u<g;u++)l.call(r,_[u],u);else if(at(_))for(E=Object.keys(_),g=E.length,u=0;u<g;u++)l.call(r,_[E[u]],E[u])}function Gt(_,l){let r,a,u,g;if(!_||!l||_.length!==l.length)return!1;for(r=0,a=_.length;r<a;++r)if(u=_[r],g=l[r],u.datasetIndex!==g.datasetIndex||u.index!==g.index)return!1;return!0}function It(_){if(lt(_))return _.map(It);if(at(_)){const l=Object.create(null),r=Object.keys(_),a=r.length;let u=0;for(;u<a;++u)l[r[u]]=It(_[r[u]]);return l}return _}function Vt(_){return-1===["__proto__","prototype","constructor"].indexOf(_)}function Ie(_,l,r,a){if(!Vt(_))return;const u=l[_],g=r[_];at(u)&&at(g)?Ze(u,g,a):l[_]=It(g)}function Ze(_,l,r){const a=lt(l)?l:[l],u=a.length;if(!at(_))return _;const g=(r=r||{}).merger||Ie;for(let E=0;E<u;++E){if(!at(l=a[E]))continue;const w=Object.keys(l);for(let M=0,P=w.length;M<P;++M)g(w[M],_,l,r)}return _}function me(_,l){return Ze(_,l,{merger:Be})}function Be(_,l,r){if(!Vt(_))return;const a=l[_],u=r[_];at(a)&&at(u)?me(a,u):Object.prototype.hasOwnProperty.call(l,_)||(l[_]=It(u))}function Ne(_,l){const r=_.indexOf(".",l);return-1===r?_.length:r}function pe(_,l){if(""===l)return _;let r=0,a=Ne(l,r);for(;_&&a>r;)_=_[l.substr(r,a-r)],r=a+1,a=Ne(l,r);return _}function we(_){return _.charAt(0).toUpperCase()+_.slice(1)}const Ve=_=>void 0!==_,ui=_=>"function"==typeof _,Ke=(_,l)=>{if(_.size!==l.size)return!1;for(const r of _)if(!l.has(r))return!1;return!0},be=Math.PI,Xt=2*be,re=Xt+be,Me=Number.POSITIVE_INFINITY,vi=be/180,ie=be/2,Ut=be/4,Ht=2*be/3,Zt=Math.log10,Yt=Math.sign;function ue(_){const l=Math.round(_);_=Nt(_,l,_/1e3)?l:_;const r=Math.pow(10,Math.floor(Zt(_))),a=_/r;return(a<=1?1:a<=2?2:a<=5?5:10)*r}function Mt(_){return!isNaN(parseFloat(_))&&isFinite(_)}function Nt(_,l,r){return Math.abs(_-l)<r}function je(_,l,r){let a,u,g;for(a=0,u=_.length;a<u;a++)g=_[a][r],isNaN(g)||(l.min=Math.min(l.min,g),l.max=Math.max(l.max,g))}function li(_){return _*(be/180)}function ri(_){return _*(180/be)}function mi(_){if(!bt(_))return;let l=1,r=0;for(;Math.round(_*l)/l!==_;)l*=10,r++;return r}function pi(_,l){return Math.sqrt(Math.pow(l.x-_.x,2)+Math.pow(l.y-_.y,2))}function bi(_,l){return(_-l+re)%Xt-be}function yi(_){return(_%Xt+Xt)%Xt}function $e(_,l,r,a){const u=yi(_),g=yi(l),E=yi(r),w=yi(g-u),M=yi(E-u),P=yi(u-g),J=yi(u-E);return u===g||u===E||a&&g===E||w>M&&P<J}function ei(_,l,r){return Math.max(l,Math.min(r,_))}function Pe(_,l,r,a=1e-6){return _>=Math.min(l,r)-a&&_<=Math.max(l,r)+a}const oi=_=>0===_||1===_,Te=(_,l,r)=>-Math.pow(2,10*(_-=1))*Math.sin((_-l)*Xt/r),Oe=(_,l,r)=>Math.pow(2,-10*_)*Math.sin((_-l)*Xt/r)+1,se={linear:_=>_,easeInQuad:_=>_*_,easeOutQuad:_=>-_*(_-2),easeInOutQuad:_=>(_/=.5)<1?.5*_*_:-.5*(--_*(_-2)-1),easeInCubic:_=>_*_*_,easeOutCubic:_=>(_-=1)*_*_+1,easeInOutCubic:_=>(_/=.5)<1?.5*_*_*_:.5*((_-=2)*_*_+2),easeInQuart:_=>_*_*_*_,easeOutQuart:_=>-((_-=1)*_*_*_-1),easeInOutQuart:_=>(_/=.5)<1?.5*_*_*_*_:-.5*((_-=2)*_*_*_-2),easeInQuint:_=>_*_*_*_*_,easeOutQuint:_=>(_-=1)*_*_*_*_+1,easeInOutQuint:_=>(_/=.5)<1?.5*_*_*_*_*_:.5*((_-=2)*_*_*_*_+2),easeInSine:_=>1-Math.cos(_*ie),easeOutSine:_=>Math.sin(_*ie),easeInOutSine:_=>-.5*(Math.cos(be*_)-1),easeInExpo:_=>0===_?0:Math.pow(2,10*(_-1)),easeOutExpo:_=>1===_?1:1-Math.pow(2,-10*_),easeInOutExpo:_=>oi(_)?_:_<.5?.5*Math.pow(2,10*(2*_-1)):.5*(2-Math.pow(2,-10*(2*_-1))),easeInCirc:_=>_>=1?_:-(Math.sqrt(1-_*_)-1),easeOutCirc:_=>Math.sqrt(1-(_-=1)*_),easeInOutCirc:_=>(_/=.5)<1?-.5*(Math.sqrt(1-_*_)-1):.5*(Math.sqrt(1-(_-=2)*_)+1),easeInElastic:_=>oi(_)?_:Te(_,.075,.3),easeOutElastic:_=>oi(_)?_:Oe(_,.075,.3),easeInOutElastic(_){const l=.1125;return oi(_)?_:_<.5?.5*Te(2*_,l,.45):.5+.5*Oe(2*_-1,l,.45)},easeInBack(_){const l=1.70158;return _*_*((l+1)*_-l)},easeOutBack(_){const l=1.70158;return(_-=1)*_*((l+1)*_+l)+1},easeInOutBack(_){let l=1.70158;return(_/=.5)<1?_*_*((1+(l*=1.525))*_-l)*.5:.5*((_-=2)*_*((1+(l*=1.525))*_+l)+2)},easeInBounce:_=>1-se.easeOutBounce(1-_),easeOutBounce(_){const l=7.5625,r=2.75;return _<1/r?l*_*_:_<2/r?l*(_-=1.5/r)*_+.75:_<2.5/r?l*(_-=2.25/r)*_+.9375:l*(_-=2.625/r)*_+.984375},easeInOutBounce:_=>_<.5?.5*se.easeInBounce(2*_):.5*se.easeOutBounce(2*_-1)+.5},Jt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},te="0123456789ABCDEF",qt=_=>te[15&_],Ee=_=>te[(240&_)>>4]+te[15&_],ti=_=>(240&_)>>4==(15&_);function Ln(_){return _+.5|0}const Xe=(_,l,r)=>Math.max(Math.min(_,r),l);function Re(_){return Xe(Ln(2.55*_),0,255)}function fe(_){return Xe(Ln(255*_),0,255)}function ze(_){return Xe(Ln(_/2.55)/100,0,1)}function _i(_){return Xe(Ln(100*_),0,100)}const Xi=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Nn=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function mr(_,l,r){const a=l*Math.min(r,1-r),u=(g,E=(g+_/30)%12)=>r-a*Math.max(Math.min(E-3,9-E,1),-1);return[u(0),u(8),u(4)]}function ar(_,l,r){const a=(u,g=(u+_/60)%6)=>r-r*l*Math.max(Math.min(g,4-g,1),0);return[a(5),a(3),a(1)]}function Ur(_,l,r){const a=mr(_,1,.5);let u;for(l+r>1&&(u=1/(l+r),l*=u,r*=u),u=0;u<3;u++)a[u]*=1-l-r,a[u]+=l;return a}function tr(_){const r=_.r/255,a=_.g/255,u=_.b/255,g=Math.max(r,a,u),E=Math.min(r,a,u),w=(g+E)/2;let M,P,J;return g!==E&&(J=g-E,P=w>.5?J/(2-g-E):J/(g+E),M=g===r?(a-u)/J+(a<u?6:0):g===a?(u-r)/J+2:(r-a)/J+4,M=60*M+.5),[0|M,P||0,w]}function eo(_,l,r,a){return(Array.isArray(l)?_(l[0],l[1],l[2]):_(l,r,a)).map(fe)}function Ar(_,l,r){return eo(mr,_,l,r)}function Ji(_){return(_%360+360)%360}const so={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Do={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Vo;function ln(_,l,r){if(_){let a=tr(_);a[l]=Math.max(0,Math.min(a[l]+a[l]*r,0===l?360:1)),a=Ar(a),_.r=a[0],_.g=a[1],_.b=a[2]}}function hr(_,l){return _&&Object.assign(l||{},_)}function Oo(_){var l={r:0,g:0,b:0,a:255};return Array.isArray(_)?_.length>=3&&(l={r:_[0],g:_[1],b:_[2],a:255},_.length>3&&(l.a=fe(_[3]))):(l=hr(_,{r:0,g:0,b:0,a:1})).a=fe(l.a),l}function ts(_){return"r"===_.charAt(0)?function(_){const l=Xi.exec(_);let a,u,g,r=255;if(l){if(l[7]!==a){const E=+l[7];r=255&(l[8]?Re(E):255*E)}return a=+l[1],u=+l[3],g=+l[5],a=255&(l[2]?Re(a):a),u=255&(l[4]?Re(u):u),g=255&(l[6]?Re(g):g),{r:a,g:u,b:g,a:r}}}(_):function(_){const l=Nn.exec(_);let a,r=255;if(!l)return;l[5]!==a&&(r=l[6]?Re(+l[5]):fe(+l[5]));const u=Ji(+l[2]),g=+l[3]/100,E=+l[4]/100;return a="hwb"===l[1]?function(_,l,r){return eo(Ur,_,l,r)}(u,g,E):"hsv"===l[1]?function(_,l,r){return eo(ar,_,l,r)}(u,g,E):Ar(u,g,E),{r:a[0],g:a[1],b:a[2],a:r}}(_)}class er{constructor(l){if(l instanceof er)return l;const r=typeof l;let a;"object"===r?a=Oo(l):"string"===r&&(a=function(_){var r,l=_.length;return"#"===_[0]&&(4===l||5===l?r={r:255&17*Jt[_[1]],g:255&17*Jt[_[2]],b:255&17*Jt[_[3]],a:5===l?17*Jt[_[4]]:255}:(7===l||9===l)&&(r={r:Jt[_[1]]<<4|Jt[_[2]],g:Jt[_[3]]<<4|Jt[_[4]],b:Jt[_[5]]<<4|Jt[_[6]],a:9===l?Jt[_[7]]<<4|Jt[_[8]]:255})),r}(l)||function(_){Vo||(Vo=function(){const _={},l=Object.keys(Do),r=Object.keys(so);let a,u,g,E,w;for(a=0;a<l.length;a++){for(E=w=l[a],u=0;u<r.length;u++)g=r[u],w=w.replace(g,so[g]);g=parseInt(Do[E],16),_[w]=[g>>16&255,g>>8&255,255&g]}return _}(),Vo.transparent=[0,0,0,0]);const l=Vo[_.toLowerCase()];return l&&{r:l[0],g:l[1],b:l[2],a:4===l.length?l[3]:255}}(l)||ts(l)),this._rgb=a,this._valid=!!a}get valid(){return this._valid}get rgb(){var l=hr(this._rgb);return l&&(l.a=ze(l.a)),l}set rgb(l){this._rgb=Oo(l)}rgbString(){return this._valid?(_=this._rgb)&&(_.a<255?`rgba(${_.r}, ${_.g}, ${_.b}, ${ze(_.a)})`:`rgb(${_.r}, ${_.g}, ${_.b})`):this._rgb;var _}hexString(){return this._valid?(l=function(_){return ti(_.r)&&ti(_.g)&&ti(_.b)&&ti(_.a)}(_=this._rgb)?qt:Ee,_&&"#"+l(_.r)+l(_.g)+l(_.b)+(_.a<255?l(_.a):"")):this._rgb;var _,l}hslString(){return this._valid?function(_){if(!_)return;const l=tr(_),r=l[0],a=_i(l[1]),u=_i(l[2]);return _.a<255?`hsla(${r}, ${a}%, ${u}%, ${ze(_.a)})`:`hsl(${r}, ${a}%, ${u}%)`}(this._rgb):this._rgb}mix(l,r){const a=this;if(l){const u=a.rgb,g=l.rgb;let E;const w=r===E?.5:r,M=2*w-1,P=u.a-g.a,J=((M*P==-1?M:(M+P)/(1+M*P))+1)/2;E=1-J,u.r=255&J*u.r+E*g.r+.5,u.g=255&J*u.g+E*g.g+.5,u.b=255&J*u.b+E*g.b+.5,u.a=w*u.a+(1-w)*g.a,a.rgb=u}return a}clone(){return new er(this.rgb)}alpha(l){return this._rgb.a=fe(l),this}clearer(l){return this._rgb.a*=1-l,this}greyscale(){const l=this._rgb,r=Ln(.3*l.r+.59*l.g+.11*l.b);return l.r=l.g=l.b=r,this}opaquer(l){return this._rgb.a*=1+l,this}negate(){const l=this._rgb;return l.r=255-l.r,l.g=255-l.g,l.b=255-l.b,this}lighten(l){return ln(this._rgb,2,l),this}darken(l){return ln(this._rgb,2,-l),this}saturate(l){return ln(this._rgb,1,l),this}desaturate(l){return ln(this._rgb,1,-l),this}rotate(l){return function(_,l){var r=tr(_);r[0]=Ji(r[0]+l),r=Ar(r),_.r=r[0],_.g=r[1],_.b=r[2]}(this._rgb,l),this}}function go(_){return new er(_)}const xr=_=>_ instanceof CanvasGradient||_ instanceof CanvasPattern;function Jo(_){return xr(_)?_:go(_)}function qn(_){return xr(_)?_:go(_).saturate(.5).darken(.1).hexString()}const un=Object.create(null),dr=Object.create(null);function bo(_,l){if(!l)return _;const r=l.split(".");for(let a=0,u=r.length;a<u;++a){const g=r[a];_=_[g]||(_[g]=Object.create(null))}return _}function ao(_,l,r){return"string"==typeof l?Ze(bo(_,l),r):Ze(bo(_,""),l)}var En=new class{constructor(l){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,a)=>qn(a.backgroundColor),this.hoverBorderColor=(r,a)=>qn(a.borderColor),this.hoverColor=(r,a)=>qn(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.describe(l)}set(l,r){return ao(this,l,r)}get(l){return bo(this,l)}describe(l,r){return ao(dr,l,r)}override(l,r){return ao(un,l,r)}route(l,r,a,u){const g=bo(this,l),E=bo(this,a),w="_"+r;Object.defineProperties(g,{[w]:{value:g[r],writable:!0},[r]:{enumerable:!0,get(){const M=this[w],P=E[u];return at(M)?Object.assign({},P,M):Rt(M,P)},set(M){this[w]=M}}})}}({_scriptable:_=>!_.startsWith("on"),_indexable:_=>"events"!==_,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Uo(_,l,r,a,u){let g=l[u];return g||(g=l[u]=_.measureText(u).width,r.push(u)),g>a&&(a=g),a}function ho(_,l,r,a){let u=(a=a||{}).data=a.data||{},g=a.garbageCollect=a.garbageCollect||[];a.font!==l&&(u=a.data={},g=a.garbageCollect=[],a.font=l),_.save(),_.font=l;let E=0;const w=r.length;let M,P,J,ut,Dt;for(M=0;M<w;M++)if(ut=r[M],null!=ut&&!0!==lt(ut))E=Uo(_,u,g,E,ut);else if(lt(ut))for(P=0,J=ut.length;P<J;P++)Dt=ut[P],null!=Dt&&!lt(Dt)&&(E=Uo(_,u,g,E,Dt));_.restore();const Lt=g.length/2;if(Lt>r.length){for(M=0;M<Lt;M++)delete u[g[M]];g.splice(0,Lt)}return E}function $o(_,l,r){const a=_.currentDevicePixelRatio,u=0!==r?Math.max(r/2,.5):0;return Math.round((l-u)*a)/a+u}function sa(_,l){(l=l||_.getContext("2d")).save(),l.resetTransform(),l.clearRect(0,0,_.width,_.height),l.restore()}function Lo(_,l,r,a){let u,g,E,w,M;const P=l.pointStyle,J=l.rotation,ut=l.radius;let Dt=(J||0)*vi;if(P&&"object"==typeof P&&(u=P.toString(),"[object HTMLImageElement]"===u||"[object HTMLCanvasElement]"===u))return _.save(),_.translate(r,a),_.rotate(Dt),_.drawImage(P,-P.width/2,-P.height/2,P.width,P.height),void _.restore();if(!(isNaN(ut)||ut<=0)){switch(_.beginPath(),P){default:_.arc(r,a,ut,0,Xt),_.closePath();break;case"triangle":_.moveTo(r+Math.sin(Dt)*ut,a-Math.cos(Dt)*ut),Dt+=Ht,_.lineTo(r+Math.sin(Dt)*ut,a-Math.cos(Dt)*ut),Dt+=Ht,_.lineTo(r+Math.sin(Dt)*ut,a-Math.cos(Dt)*ut),_.closePath();break;case"rectRounded":M=.516*ut,w=ut-M,g=Math.cos(Dt+Ut)*w,E=Math.sin(Dt+Ut)*w,_.arc(r-g,a-E,M,Dt-be,Dt-ie),_.arc(r+E,a-g,M,Dt-ie,Dt),_.arc(r+g,a+E,M,Dt,Dt+ie),_.arc(r-E,a+g,M,Dt+ie,Dt+be),_.closePath();break;case"rect":if(!J){w=Math.SQRT1_2*ut,_.rect(r-w,a-w,2*w,2*w);break}Dt+=Ut;case"rectRot":g=Math.cos(Dt)*ut,E=Math.sin(Dt)*ut,_.moveTo(r-g,a-E),_.lineTo(r+E,a-g),_.lineTo(r+g,a+E),_.lineTo(r-E,a+g),_.closePath();break;case"crossRot":Dt+=Ut;case"cross":g=Math.cos(Dt)*ut,E=Math.sin(Dt)*ut,_.moveTo(r-g,a-E),_.lineTo(r+g,a+E),_.moveTo(r+E,a-g),_.lineTo(r-E,a+g);break;case"star":g=Math.cos(Dt)*ut,E=Math.sin(Dt)*ut,_.moveTo(r-g,a-E),_.lineTo(r+g,a+E),_.moveTo(r+E,a-g),_.lineTo(r-E,a+g),Dt+=Ut,g=Math.cos(Dt)*ut,E=Math.sin(Dt)*ut,_.moveTo(r-g,a-E),_.lineTo(r+g,a+E),_.moveTo(r+E,a-g),_.lineTo(r-E,a+g);break;case"line":g=Math.cos(Dt)*ut,E=Math.sin(Dt)*ut,_.moveTo(r-g,a-E),_.lineTo(r+g,a+E);break;case"dash":_.moveTo(r,a),_.lineTo(r+Math.cos(Dt)*ut,a+Math.sin(Dt)*ut)}_.fill(),l.borderWidth>0&&_.stroke()}}function _r(_,l,r){return r=r||.5,!l||_&&_.x>l.left-r&&_.x<l.right+r&&_.y>l.top-r&&_.y<l.bottom+r}function oo(_,l){_.save(),_.beginPath(),_.rect(l.left,l.top,l.right-l.left,l.bottom-l.top),_.clip()}function xo(_){_.restore()}function us(_,l,r,a,u){if(!l)return _.lineTo(r.x,r.y);if("middle"===u){const g=(l.x+r.x)/2;_.lineTo(g,l.y),_.lineTo(g,r.y)}else"after"===u!=!!a?_.lineTo(l.x,r.y):_.lineTo(r.x,l.y);_.lineTo(r.x,r.y)}function Js(_,l,r,a){if(!l)return _.lineTo(r.x,r.y);_.bezierCurveTo(a?l.cp1x:l.cp2x,a?l.cp1y:l.cp2y,a?r.cp2x:r.cp1x,a?r.cp2y:r.cp1y,r.x,r.y)}function Gr(_,l,r,a,u,g={}){const E=lt(l)?l:[l],w=g.strokeWidth>0&&""!==g.strokeColor;let M,P;for(_.save(),_.font=u.string,function(_,l){l.translation&&_.translate(l.translation[0],l.translation[1]),yt(l.rotation)||_.rotate(l.rotation),l.color&&(_.fillStyle=l.color),l.textAlign&&(_.textAlign=l.textAlign),l.textBaseline&&(_.textBaseline=l.textBaseline)}(_,g),M=0;M<E.length;++M)P=E[M],w&&(g.strokeColor&&(_.strokeStyle=g.strokeColor),yt(g.strokeWidth)||(_.lineWidth=g.strokeWidth),_.strokeText(P,r,a,g.maxWidth)),_.fillText(P,r,a,g.maxWidth),va(_,r,a,P,g),a+=u.lineHeight;_.restore()}function va(_,l,r,a,u){if(u.strikethrough||u.underline){const g=_.measureText(a),E=l-g.actualBoundingBoxLeft,w=l+g.actualBoundingBoxRight,M=r-g.actualBoundingBoxAscent,P=r+g.actualBoundingBoxDescent,J=u.strikethrough?(M+P)/2:P;_.strokeStyle=_.fillStyle,_.beginPath(),_.lineWidth=u.decorationWidth||2,_.moveTo(E,J),_.lineTo(w,J),_.stroke()}}function ds(_,l){const{x:r,y:a,w:u,h:g,radius:E}=l;_.arc(r+E.topLeft,a+E.topLeft,E.topLeft,-ie,be,!0),_.lineTo(r,a+g-E.bottomLeft),_.arc(r+E.bottomLeft,a+g-E.bottomLeft,E.bottomLeft,be,ie,!0),_.lineTo(r+u-E.bottomRight,a+g),_.arc(r+u-E.bottomRight,a+g-E.bottomRight,E.bottomRight,ie,0,!0),_.lineTo(r+u,a+E.topRight),_.arc(r+u-E.topRight,a+E.topRight,E.topRight,0,-ie,!0),_.lineTo(r+E.topLeft,a)}const Ts=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Bs=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function is(_,l){const r=(""+_).match(Ts);if(!r||"normal"===r[1])return 1.2*l;switch(_=+r[2],r[3]){case"px":return _;case"%":_/=100}return l*_}const vr=_=>+_||0;function $s(_,l){const r={},a=at(l),u=a?Object.keys(l):l,g=at(_)?a?E=>Rt(_[E],_[l[E]]):E=>_[E]:()=>_;for(const E of u)r[E]=vr(g(E));return r}function Zs(_){return $s(_,{top:"y",right:"x",bottom:"y",left:"x"})}function Zo(_){return $s(_,["topLeft","topRight","bottomLeft","bottomRight"])}function Un(_){const l=Zs(_);return l.width=l.left+l.right,l.height=l.top+l.bottom,l}function ko(_,l){let r=Rt((_=_||{}).size,(l=l||En.font).size);"string"==typeof r&&(r=parseInt(r,10));let a=Rt(_.style,l.style);a&&!(""+a).match(Bs)&&(console.warn('Invalid font style specified: "'+a+'"'),a="");const u={family:Rt(_.family,l.family),lineHeight:is(Rt(_.lineHeight,l.lineHeight),r),size:r,style:a,weight:Rt(_.weight,l.weight),string:""};return u.string=function(_){return!_||yt(_.size)||yt(_.family)?null:(_.style?_.style+" ":"")+(_.weight?_.weight+" ":"")+_.size+"px "+_.family}(u),u}function lr(_,l,r,a){let g,E,w,u=!0;for(g=0,E=_.length;g<E;++g)if(w=_[g],void 0!==w&&(void 0!==l&&"function"==typeof w&&(w=w(l),u=!1),void 0!==r&&lt(w)&&(w=w[r%w.length],u=!1),void 0!==w))return a&&!u&&(a.cacheable=!1),w}function ir(_,l){return Object.assign(Object.create(_),l)}function ps(_,l,r){r=r||(E=>_[E]<l);let g,a=_.length-1,u=0;for(;a-u>1;)g=u+a>>1,r(g)?u=g:a=g;return{lo:u,hi:a}}const No=(_,l,r)=>ps(_,r,a=>_[a][l]<r),yr=(_,l,r)=>ps(_,r,a=>_[a][l]>=r),nr=["push","pop","shift","splice","unshift"];function mo(_,l){const r=_._chartjs;if(!r)return;const a=r.listeners,u=a.indexOf(l);-1!==u&&a.splice(u,1),!(a.length>0)&&(nr.forEach(g=>{delete _[g]}),delete _._chartjs)}function kr(_){const l=new Set;let r,a;for(r=0,a=_.length;r<a;++r)l.add(_[r]);return l.size===a?_:Array.from(l)}function Jn(_,l=[""],r=_,a,u=(()=>_[0])){Ve(a)||(a=St("_fallback",_));const g={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:_,_rootScopes:r,_fallback:a,_getTarget:u,override:E=>Jn([E,..._],l,r,a)};return new Proxy(g,{deleteProperty:(E,w)=>(delete E[w],delete E._keys,delete _[0][w],!0),get:(E,w)=>Po(E,w,()=>function(_,l,r,a){let u;for(const g of l)if(u=St(Qs(g,_),r),Ve(u))return Cs(_,u)?Et(r,a,_,u):u}(w,l,_,E)),getOwnPropertyDescriptor:(E,w)=>Reflect.getOwnPropertyDescriptor(E._scopes[0],w),getPrototypeOf:()=>Reflect.getPrototypeOf(_[0]),has:(E,w)=>ge(E).includes(w),ownKeys:E=>ge(E),set(E,w,M){const P=E._storage||(E._storage=u());return E[w]=P[w]=M,delete E._keys,!0}})}function fr(_,l,r,a){const u={_cacheable:!1,_proxy:_,_context:l,_subProxy:r,_stack:new Set,_descriptors:cr(_,a),setContext:g=>fr(_,g,r,a),override:g=>fr(_.override(g),l,r,a)};return new Proxy(u,{deleteProperty:(g,E)=>(delete g[E],delete _[E],!0),get:(g,E,w)=>Po(g,E,()=>function(_,l,r){const{_proxy:a,_context:u,_subProxy:g,_descriptors:E}=_;let w=a[l];return ui(w)&&E.isScriptable(l)&&(w=function(_,l,r,a){const{_proxy:u,_context:g,_subProxy:E,_stack:w}=r;if(w.has(_))throw new Error("Recursion detected: "+Array.from(w).join("->")+"->"+_);return w.add(_),l=l(g,E||a),w.delete(_),Cs(_,l)&&(l=Et(u._scopes,u,_,l)),l}(l,w,_,r)),lt(w)&&w.length&&(w=function(_,l,r,a){const{_proxy:u,_context:g,_subProxy:E,_descriptors:w}=r;if(Ve(g.index)&&a(_))l=l[g.index%l.length];else if(at(l[0])){const M=l,P=u._scopes.filter(J=>J!==M);l=[];for(const J of M){const ut=Et(P,u,_,J);l.push(fr(ut,g,E&&E[_],w))}}return l}(l,w,_,E.isIndexable)),Cs(l,w)&&(w=fr(w,u,g&&g[l],E)),w}(g,E,w)),getOwnPropertyDescriptor:(g,E)=>g._descriptors.allKeys?Reflect.has(_,E)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(_,E),getPrototypeOf:()=>Reflect.getPrototypeOf(_),has:(g,E)=>Reflect.has(_,E),ownKeys:()=>Reflect.ownKeys(_),set:(g,E,w)=>(_[E]=w,delete g[E],!0)})}function cr(_,l={scriptable:!0,indexable:!0}){const{_scriptable:r=l.scriptable,_indexable:a=l.indexable,_allKeys:u=l.allKeys}=_;return{allKeys:u,scriptable:r,indexable:a,isScriptable:ui(r)?r:()=>r,isIndexable:ui(a)?a:()=>a}}const Qs=(_,l)=>_?_+we(l):l,Cs=(_,l)=>at(l)&&"adapters"!==_&&(null===Object.getPrototypeOf(l)||l.constructor===Object);function Po(_,l,r){if(Object.prototype.hasOwnProperty.call(_,l))return _[l];const a=r();return _[l]=a,a}function $n(_,l,r){return ui(_)?_(l,r):_}const sn=(_,l)=>!0===_?l:"string"==typeof _?pe(l,_):void 0;function Nr(_,l,r,a){for(const u of l){const g=sn(r,u);if(g){_.add(g);const E=$n(g._fallback,r,g);if(Ve(E)&&E!==r&&E!==a)return E}else if(!1===g&&Ve(a)&&r!==a)return null}return!1}function Et(_,l,r,a){const u=l._rootScopes,g=$n(l._fallback,r,a),E=[..._,...u],w=new Set;w.add(a);let M=K(w,E,r,g||r);return!(null===M||Ve(g)&&g!==r&&(M=K(w,E,g,M),null===M))&&Jn(Array.from(w),[""],u,g,()=>function(_,l,r){const a=_._getTarget();l in a||(a[l]={});const u=a[l];return lt(u)&&at(r)?r:u}(l,r,a))}function K(_,l,r,a){for(;r;)r=Nr(_,l,r,a);return r}function St(_,l){for(const r of l){if(!r)continue;const a=r[_];if(Ve(a))return a}}function ge(_){let l=_._keys;return l||(l=_._keys=function(_){const l=new Set;for(const r of _)for(const a of Object.keys(r).filter(u=>!u.startsWith("_")))l.add(a);return Array.from(l)}(_._scopes)),l}const ki=Number.EPSILON||1e-14,cn=(_,l)=>l<_.length&&!_[l].skip&&_[l],Yn=_=>"x"===_?"y":"x";function to(_,l,r,a){const u=_.skip?l:_,g=l,E=r.skip?l:r,w=pi(g,u),M=pi(E,g);let P=w/(w+M),J=M/(w+M);P=isNaN(P)?0:P,J=isNaN(J)?0:J;const ut=a*P,Dt=a*J;return{previous:{x:g.x-ut*(E.x-u.x),y:g.y-ut*(E.y-u.y)},next:{x:g.x+Dt*(E.x-u.x),y:g.y+Dt*(E.y-u.y)}}}function Io(_,l,r){return Math.max(Math.min(_,r),l)}function fs(_,l,r,a,u){let g,E,w,M;if(l.spanGaps&&(_=_.filter(P=>!P.skip)),"monotone"===l.cubicInterpolationMode)!function(_,l="x"){const r=Yn(l),a=_.length,u=Array(a).fill(0),g=Array(a);let E,w,M,P=cn(_,0);for(E=0;E<a;++E)if(w=M,M=P,P=cn(_,E+1),M){if(P){const J=P[l]-M[l];u[E]=0!==J?(P[r]-M[r])/J:0}g[E]=w?P?Yt(u[E-1])!==Yt(u[E])?0:(u[E-1]+u[E])/2:u[E-1]:u[E]}(function(_,l,r){const a=_.length;let u,g,E,w,M,P=cn(_,0);for(let J=0;J<a-1;++J)if(M=P,P=cn(_,J+1),M&&P){if(Nt(l[J],0,ki)){r[J]=r[J+1]=0;continue}u=r[J]/l[J],g=r[J+1]/l[J],w=Math.pow(u,2)+Math.pow(g,2),!(w<=9)&&(E=3/Math.sqrt(w),r[J]=u*E*l[J],r[J+1]=g*E*l[J])}})(_,u,g),function(_,l,r="x"){const a=Yn(r),u=_.length;let g,E,w,M=cn(_,0);for(let P=0;P<u;++P){if(E=w,w=M,M=cn(_,P+1),!w)continue;const J=w[r],ut=w[a];E&&(g=(J-E[r])/3,w[`cp1${r}`]=J-g,w[`cp1${a}`]=ut-g*l[P]),M&&(g=(M[r]-J)/3,w[`cp2${r}`]=J+g,w[`cp2${a}`]=ut+g*l[P])}}(_,g,l)}(_,u);else{let P=a?_[_.length-1]:_[0];for(g=0,E=_.length;g<E;++g)w=_[g],M=to(P,w,_[Math.min(g+1,E-(a?0:1))%E],l.tension),w.cp1x=M.previous.x,w.cp1y=M.previous.y,w.cp2x=M.next.x,w.cp2y=M.next.y,P=w}l.capBezierPoints&&function(_,l){let r,a,u,g,E,w=_r(_[0],l);for(r=0,a=_.length;r<a;++r)E=g,g=w,w=r<a-1&&_r(_[r+1],l),g&&(u=_[r],E&&(u.cp1x=Io(u.cp1x,l.left,l.right),u.cp1y=Io(u.cp1y,l.top,l.bottom)),w&&(u.cp2x=Io(u.cp2x,l.left,l.right),u.cp2y=Io(u.cp2y,l.top,l.bottom)))}(_,r)}function ws(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Rr(_){let l=_.parentNode;return l&&"[object ShadowRoot]"===l.toString()&&(l=l.host),l}function Vs(_,l,r){let a;return"string"==typeof _?(a=parseInt(_,10),-1!==_.indexOf("%")&&(a=a/100*l.parentNode[r])):a=_,a}const Er=_=>window.getComputedStyle(_,null),ba=["top","right","bottom","left"];function Di(_,l,r){const a={};r=r?"-"+r:"";for(let u=0;u<4;u++){const g=ba[u];a[g]=parseFloat(_[l+"-"+g+r])||0}return a.width=a.left+a.right,a.height=a.top+a.bottom,a}function U(_,l){const{canvas:r,currentDevicePixelRatio:a}=l,u=Er(r),g="border-box"===u.boxSizing,E=Di(u,"padding"),w=Di(u,"border","width"),{x:M,y:P,box:J}=function(_,l){const r=_.native||_,a=r.touches,u=a&&a.length?a[0]:r,{offsetX:g,offsetY:E}=u;let M,P,w=!1;if(((_,l,r)=>(_>0||l>0)&&(!r||!r.shadowRoot))(g,E,r.target))M=g,P=E;else{const J=l.getBoundingClientRect();M=u.clientX-J.left,P=u.clientY-J.top,w=!0}return{x:M,y:P,box:w}}(_,r),ut=E.left+(J&&w.left),Dt=E.top+(J&&w.top);let{width:Lt,height:Qt}=l;return g&&(Lt-=E.width+w.width,Qt-=E.height+w.height),{x:Math.round((M-ut)/Lt*r.width/a),y:Math.round((P-Dt)/Qt*r.height/a)}}const gt=_=>Math.round(10*_)/10;function $t(_,l,r){const a=l||1,u=Math.floor(_.height*a),g=Math.floor(_.width*a);_.height=u/a,_.width=g/a;const E=_.canvas;return E.style&&(r||!E.style.height&&!E.style.width)&&(E.style.height=`${_.height}px`,E.style.width=`${_.width}px`),(_.currentDevicePixelRatio!==a||E.height!==u||E.width!==g)&&(_.currentDevicePixelRatio=a,E.height=u,E.width=g,_.ctx.setTransform(a,0,0,a,0,0),!0)}const Ce=function(){let _=!1;try{const l={get passive(){return _=!0,!1}};window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch(l){}return _}();function Ae(_,l){const r=function(_,l){return Er(_).getPropertyValue(l)}(_,l),a=r&&r.match(/^(\d+)(\.\d+)?px$/);return a?+a[1]:void 0}function qe(_,l,r,a){return{x:_.x+r*(l.x-_.x),y:_.y+r*(l.y-_.y)}}function Ei(_,l,r,a){return{x:_.x+r*(l.x-_.x),y:"middle"===a?r<.5?_.y:l.y:"after"===a?r<1?_.y:l.y:r>0?l.y:_.y}}function Ni(_,l,r,a){const u={x:_.cp2x,y:_.cp2y},g={x:l.cp1x,y:l.cp1y},E=qe(_,u,r),w=qe(u,g,r),M=qe(g,l,r),P=qe(E,w,r),J=qe(w,M,r);return qe(P,J,r)}const Gi=new Map;function Tn(_,l,r){return function(_,l){l=l||{};const r=_+JSON.stringify(l);let a=Gi.get(r);return a||(a=new Intl.NumberFormat(_,l),Gi.set(r,a)),a}(l,r).format(_)}function Cn(_,l,r){return _?function(_,l){return{x:r=>_+_+l-r,setWidth(r){l=r},textAlign:r=>"center"===r?r:"right"===r?"left":"right",xPlus:(r,a)=>r-a,leftForLtr:(r,a)=>r-a}}(l,r):{x:_=>_,setWidth(_){},textAlign:_=>_,xPlus:(_,l)=>_+l,leftForLtr:(_,l)=>_}}function Qn(_,l){let r,a;("ltr"===l||"rtl"===l)&&(r=_.canvas.style,a=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",l,"important"),_.prevTextDirection=a)}function po(_,l){void 0!==l&&(delete _.prevTextDirection,_.canvas.style.setProperty("direction",l[0],l[1]))}function or(_){return"angle"===_?{between:$e,compare:bi,normalize:yi}:{between:Pe,compare:(l,r)=>l-r,normalize:l=>l}}function Wo({start:_,end:l,count:r,loop:a,style:u}){return{start:_%r,end:l%r,loop:a&&(l-_+1)%r==0,style:u}}function zr(_,l,r){if(!r)return[_];const{property:a,start:u,end:g}=r,E=l.length,{compare:w,between:M,normalize:P}=or(a),{start:J,end:ut,loop:Dt,style:Lt}=function(_,l,r){const{property:a,start:u,end:g}=r,{between:E,normalize:w}=or(a),M=l.length;let Dt,Lt,{start:P,end:J,loop:ut}=_;if(ut){for(P+=M,J+=M,Dt=0,Lt=M;Dt<Lt&&E(w(l[P%M][a]),u,g);++Dt)P--,J--;P%=M,J%=M}return J<P&&(J+=M),{start:P,end:J,loop:ut,style:_.style}}(_,l,r),Qt=[];let De,ai,xi,de=!1,ye=null;for(let qi=J,an=J;qi<=ut;++qi)ai=l[qi%E],!ai.skip&&(De=P(ai[a]),De!==xi&&(de=M(De,u,g),null===ye&&(de||M(u,xi,De)&&0!==w(u,xi))&&(ye=0===w(De,u)?qi:an),null!==ye&&(!de||0===w(g,De)||M(g,xi,De))&&(Qt.push(Wo({start:ye,end:qi,loop:Dt,count:E,style:Lt})),ye=null),an=qi,xi=De));return null!==ye&&Qt.push(Wo({start:ye,end:ut,loop:Dt,count:E,style:Lt})),Qt}function jo(_,l){const r=[],a=_.segments;for(let u=0;u<a.length;u++){const g=zr(a[u],_.points,l);g.length&&r.push(...g)}return r}function os(_){return{backgroundColor:_.backgroundColor,borderCapStyle:_.borderCapStyle,borderDash:_.borderDash,borderDashOffset:_.borderDashOffset,borderJoinStyle:_.borderJoinStyle,borderWidth:_.borderWidth,borderColor:_.borderColor}}function ya(_,l){return l&&JSON.stringify(_)!==JSON.stringify(l)}var ji=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(l,r,a,u){const E=r.duration;r.listeners[u].forEach(w=>w({chart:l,initial:r.initial,numSteps:E,currentStep:Math.min(a-r.start,E)}))}_refresh(){this._request||(this._running=!0,this._request=V.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(l=Date.now()){let r=0;this._charts.forEach((a,u)=>{if(!a.running||!a.items.length)return;const g=a.items;let M,E=g.length-1,w=!1;for(;E>=0;--E)M=g[E],M._active?(M._total>a.duration&&(a.duration=M._total),M.tick(l),w=!0):(g[E]=g[g.length-1],g.pop());w&&(u.draw(),this._notify(u,a,l,"progress")),g.length||(a.running=!1,this._notify(u,a,l,"complete"),a.initial=!1),r+=g.length}),this._lastDate=l,0===r&&(this._running=!1)}_getAnims(l){const r=this._charts;let a=r.get(l);return a||(a={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(l,a)),a}listen(l,r,a){this._getAnims(l).listeners[r].push(a)}add(l,r){!r||!r.length||this._getAnims(l).items.push(...r)}has(l){return this._getAnims(l).items.length>0}start(l){const r=this._charts.get(l);!r||(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((a,u)=>Math.max(a,u._duration),0),this._refresh())}running(l){if(!this._running)return!1;const r=this._charts.get(l);return!(!r||!r.running||!r.items.length)}stop(l){const r=this._charts.get(l);if(!r||!r.items.length)return;const a=r.items;let u=a.length-1;for(;u>=0;--u)a[u].cancel();r.items=[],this._notify(l,r,Date.now(),"complete")}remove(l){return this._charts.delete(l)}};const pn="transparent",nn={boolean:(_,l,r)=>r>.5?l:_,color(_,l,r){const a=Jo(_||pn),u=a.valid&&Jo(l||pn);return u&&u.valid?u.mix(a,r).hexString():l},number:(_,l,r)=>_+(l-_)*r};class An{constructor(l,r,a,u){const g=r[a];u=lr([l.to,u,g,l.from]);const E=lr([l.from,g,u]);this._active=!0,this._fn=l.fn||nn[l.type||typeof E],this._easing=se[l.easing]||se.linear,this._start=Math.floor(Date.now()+(l.delay||0)),this._duration=this._total=Math.floor(l.duration),this._loop=!!l.loop,this._target=r,this._prop=a,this._from=E,this._to=u,this._promises=void 0}active(){return this._active}update(l,r,a){if(this._active){this._notify(!1);const u=this._target[this._prop],g=a-this._start,E=this._duration-g;this._start=a,this._duration=Math.floor(Math.max(E,l.duration)),this._total+=g,this._loop=!!l.loop,this._to=lr([l.to,r,u,l.from]),this._from=lr([l.from,u,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(l){const r=l-this._start,a=this._duration,u=this._prop,g=this._from,E=this._loop,w=this._to;let M;if(this._active=g!==w&&(E||r<a),!this._active)return this._target[u]=w,void this._notify(!0);r<0?this._target[u]=g:(M=r/a%2,M=E&&M>1?2-M:M,M=this._easing(Math.min(1,Math.max(0,M))),this._target[u]=this._fn(g,w,M))}wait(){const l=this._promises||(this._promises=[]);return new Promise((r,a)=>{l.push({res:r,rej:a})})}_notify(l){const r=l?"res":"rej",a=this._promises||[];for(let u=0;u<a.length;u++)a[u][r]()}}En.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Xr=Object.keys(En.animation);En.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:_=>"onProgress"!==_&&"onComplete"!==_&&"fn"!==_}),En.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),En.describe("animations",{_fallback:"animation"}),En.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:_=>0|_}}}});class Fr{constructor(l,r){this._chart=l,this._properties=new Map,this.configure(r)}configure(l){if(!at(l))return;const r=this._properties;Object.getOwnPropertyNames(l).forEach(a=>{const u=l[a];if(!at(u))return;const g={};for(const E of Xr)g[E]=u[E];(lt(u.properties)&&u.properties||[a]).forEach(E=>{(E===a||!r.has(E))&&r.set(E,g)})})}_animateOptions(l,r){const a=r.options,u=function(_,l){if(!l)return;let r=_.options;if(r)return r.$shared&&(_.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r;_.options=l}(l,a);if(!u)return[];const g=this._createAnimations(u,a);return a.$shared&&function(_,l){const r=[],a=Object.keys(l);for(let u=0;u<a.length;u++){const g=_[a[u]];g&&g.active()&&r.push(g.wait())}return Promise.all(r)}(l.options.$animations,a).then(()=>{l.options=a},()=>{}),g}_createAnimations(l,r){const a=this._properties,u=[],g=l.$animations||(l.$animations={}),E=Object.keys(r),w=Date.now();let M;for(M=E.length-1;M>=0;--M){const P=E[M];if("$"===P.charAt(0))continue;if("options"===P){u.push(...this._animateOptions(l,r));continue}const J=r[P];let ut=g[P];const Dt=a.get(P);if(ut){if(Dt&&ut.active()){ut.update(Dt,J,w);continue}ut.cancel()}Dt&&Dt.duration?(g[P]=ut=new An(Dt,l,P,J),u.push(ut)):l[P]=J}return u}update(l,r){if(0===this._properties.size)return void Object.assign(l,r);const a=this._createAnimations(l,r);return a.length?(ji.add(this._chart,a),!0):void 0}}function Tr(_,l){const r=_&&_.options||{},a=r.reverse,u=void 0===r.min?l:0,g=void 0===r.max?l:0;return{start:a?g:u,end:a?u:g}}function Qo(_,l){const r=[],a=_._getSortedDatasetMetas(l);let u,g;for(u=0,g=a.length;u<g;++u)r.push(a[u].index);return r}function Ws(_,l,r,a={}){const u=_.keys,g="single"===a.mode;let E,w,M,P;if(null!==l){for(E=0,w=u.length;E<w;++E){if(M=+u[E],M===r){if(a.all)continue;break}P=_.values[M],bt(P)&&(g||0===l||Yt(l)===Yt(P))&&(l+=P)}return l}}function qa(_,l){const r=_&&_.options.stacked;return r||void 0===r&&void 0!==l.stack}function Ra(_,l,r){const a=_[l]||(_[l]={});return a[r]||(a[r]={})}function tl(_,l,r,a){for(const u of l.getMatchingVisibleMetas(a).reverse()){const g=_[u.index];if(r&&g>0||!r&&g<0)return u.index}return null}function el(_,l){const{chart:r,_cachedMeta:a}=_,u=r._stacks||(r._stacks={}),{iScale:g,vScale:E,index:w}=a,M=g.axis,P=E.axis,J=function(_,l,r){return`${_.id}.${l.id}.${r.stack||r.type}`}(g,E,a),ut=l.length;let Dt;for(let Lt=0;Lt<ut;++Lt){const Qt=l[Lt],{[M]:de,[P]:ye}=Qt;Dt=(Qt._stacks||(Qt._stacks={}))[P]=Ra(u,J,de),Dt[w]=ye,Dt._top=tl(Dt,E,!0,a.type),Dt._bottom=tl(Dt,E,!1,a.type)}}function Is(_,l){const r=_.scales;return Object.keys(r).filter(a=>r[a].axis===l).shift()}function js(_,l){const r=_.controller.index,a=_.vScale&&_.vScale.axis;if(a){l=l||_._parsed;for(const u of l){const g=u._stacks;if(!g||void 0===g[a]||void 0===g[a][r])return;delete g[a][r]}}}const la=_=>"reset"===_||"none"===_,Da=(_,l)=>l?_:Object.assign({},_);let rs=(()=>{class _{constructor(r,a){this.chart=r,this._ctx=r.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const r=this._cachedMeta;this.configure(),this.linkScales(),r._stacked=qa(r.vScale,r),this.addElements()}updateIndex(r){this.index!==r&&js(this._cachedMeta),this.index=r}linkScales(){const r=this.chart,a=this._cachedMeta,u=this.getDataset(),g=(Dt,Lt,Qt,de)=>"x"===Dt?Lt:"r"===Dt?de:Qt,E=a.xAxisID=Rt(u.xAxisID,Is(r,"x")),w=a.yAxisID=Rt(u.yAxisID,Is(r,"y")),M=a.rAxisID=Rt(u.rAxisID,Is(r,"r")),P=a.indexAxis,J=a.iAxisID=g(P,E,w,M),ut=a.vAxisID=g(P,w,E,M);a.xScale=this.getScaleForId(E),a.yScale=this.getScaleForId(w),a.rScale=this.getScaleForId(M),a.iScale=this.getScaleForId(J),a.vScale=this.getScaleForId(ut)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(r){return this.chart.scales[r]}_getOtherScale(r){const a=this._cachedMeta;return r===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const r=this._cachedMeta;this._data&&mo(this._data,this),r._stacked&&js(r)}_dataCheck(){const r=this.getDataset(),a=r.data||(r.data=[]),u=this._data;if(at(a))this._data=function(_){const l=Object.keys(_),r=new Array(l.length);let a,u,g;for(a=0,u=l.length;a<u;++a)g=l[a],r[a]={x:g,y:_[g]};return r}(a);else if(u!==a){if(u){mo(u,this);const g=this._cachedMeta;js(g),g._parsed=[]}a&&Object.isExtensible(a)&&function(_,l){_._chartjs?_._chartjs.listeners.push(l):(Object.defineProperty(_,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[l]}}),nr.forEach(r=>{const a="_onData"+we(r),u=_[r];Object.defineProperty(_,r,{configurable:!0,enumerable:!1,value(...g){const E=u.apply(this,g);return _._chartjs.listeners.forEach(w=>{"function"==typeof w[a]&&w[a](...g)}),E}})}))}(a,this),this._syncList=[],this._data=a}}addElements(){const r=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(r.dataset=new this.datasetElementType)}buildOrUpdateElements(r){const a=this._cachedMeta,u=this.getDataset();let g=!1;this._dataCheck();const E=a._stacked;a._stacked=qa(a.vScale,a),a.stack!==u.stack&&(g=!0,js(a),a.stack=u.stack),this._resyncElements(r),(g||E!==a._stacked)&&el(this,a._parsed)}configure(){const r=this.chart.config,a=r.datasetScopeKeys(this._type),u=r.getOptionScopes(this.getDataset(),a,!0);this.options=r.createResolver(u,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(r,a){const{_cachedMeta:u,_data:g}=this,{iScale:E,_stacked:w}=u,M=E.axis;let ut,Dt,Lt,P=0===r&&a===g.length||u._sorted,J=r>0&&u._parsed[r-1];if(!1===this._parsing)u._parsed=g,u._sorted=!0,Lt=g;else{Lt=lt(g[r])?this.parseArrayData(u,g,r,a):at(g[r])?this.parseObjectData(u,g,r,a):this.parsePrimitiveData(u,g,r,a);const Qt=()=>null===Dt[M]||J&&Dt[M]<J[M];for(ut=0;ut<a;++ut)u._parsed[ut+r]=Dt=Lt[ut],P&&(Qt()&&(P=!1),J=Dt);u._sorted=P}w&&el(this,Lt)}parsePrimitiveData(r,a,u,g){const{iScale:E,vScale:w}=r,M=E.axis,P=w.axis,J=E.getLabels(),ut=E===w,Dt=new Array(g);let Lt,Qt,de;for(Lt=0,Qt=g;Lt<Qt;++Lt)de=Lt+u,Dt[Lt]={[M]:ut||E.parse(J[de],de),[P]:w.parse(a[de],de)};return Dt}parseArrayData(r,a,u,g){const{xScale:E,yScale:w}=r,M=new Array(g);let P,J,ut,Dt;for(P=0,J=g;P<J;++P)ut=P+u,Dt=a[ut],M[P]={x:E.parse(Dt[0],ut),y:w.parse(Dt[1],ut)};return M}parseObjectData(r,a,u,g){const{xScale:E,yScale:w}=r,{xAxisKey:M="x",yAxisKey:P="y"}=this._parsing,J=new Array(g);let ut,Dt,Lt,Qt;for(ut=0,Dt=g;ut<Dt;++ut)Lt=ut+u,Qt=a[Lt],J[ut]={x:E.parse(pe(Qt,M),Lt),y:w.parse(pe(Qt,P),Lt)};return J}getParsed(r){return this._cachedMeta._parsed[r]}getDataElement(r){return this._cachedMeta.data[r]}applyStack(r,a,u){const E=this._cachedMeta,w=a[r.axis];return Ws({keys:Qo(this.chart,!0),values:a._stacks[r.axis]},w,E.index,{mode:u})}updateRangeFromParsed(r,a,u,g){const E=u[a.axis];let w=null===E?NaN:E;const M=g&&u._stacks[a.axis];g&&M&&(g.values=M,w=Ws(g,E,this._cachedMeta.index)),r.min=Math.min(r.min,w),r.max=Math.max(r.max,w)}getMinMax(r,a){const u=this._cachedMeta,g=u._parsed,E=u._sorted&&r===u.iScale,w=g.length,M=this._getOtherScale(r),P=((_,l,r)=>_&&!l.hidden&&l._stacked&&{keys:Qo(this.chart,!0),values:null})(a,u),J={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:ut,max:Dt}=function(_){const{min:l,max:r,minDefined:a,maxDefined:u}=_.getUserBounds();return{min:a?l:Number.NEGATIVE_INFINITY,max:u?r:Number.POSITIVE_INFINITY}}(M);let Lt,Qt;function de(){Qt=g[Lt];const ye=Qt[M.axis];return!bt(Qt[r.axis])||ut>ye||Dt<ye}for(Lt=0;Lt<w&&(de()||(this.updateRangeFromParsed(J,r,Qt,P),!E));++Lt);if(E)for(Lt=w-1;Lt>=0;--Lt)if(!de()){this.updateRangeFromParsed(J,r,Qt,P);break}return J}getAllParsedValues(r){const a=this._cachedMeta._parsed,u=[];let g,E,w;for(g=0,E=a.length;g<E;++g)w=a[g][r.axis],bt(w)&&u.push(w);return u}getMaxOverflow(){return!1}getLabelAndValue(r){const a=this._cachedMeta,u=a.iScale,g=a.vScale,E=this.getParsed(r);return{label:u?""+u.getLabelForValue(E[u.axis]):"",value:g?""+g.getLabelForValue(E[g.axis]):""}}_update(r){const a=this._cachedMeta;this.update(r||"default"),a._clip=function(_){let l,r,a,u;return at(_)?(l=_.top,r=_.right,a=_.bottom,u=_.left):l=r=a=u=_,{top:l,right:r,bottom:a,left:u,disabled:!1===_}}(Rt(this.options.clip,function(_,l,r){if(!1===r)return!1;const a=Tr(_,r),u=Tr(l,r);return{top:u.end,right:a.end,bottom:u.start,left:a.start}}(a.xScale,a.yScale,this.getMaxOverflow())))}update(r){}draw(){const r=this._ctx,u=this._cachedMeta,g=u.data||[],E=this.chart.chartArea,w=[],M=this._drawStart||0,P=this._drawCount||g.length-M;let J;for(u.dataset&&u.dataset.draw(r,E,M,P),J=M;J<M+P;++J){const ut=g[J];ut.hidden||(ut.active?w.push(ut):ut.draw(r,E))}for(J=0;J<w.length;++J)w[J].draw(r,E)}getStyle(r,a){const u=a?"active":"default";return void 0===r&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(u):this.resolveDataElementOptions(r||0,u)}getContext(r,a,u){const g=this.getDataset();let E;if(r>=0&&r<this._cachedMeta.data.length){const w=this._cachedMeta.data[r];E=w.$context||(w.$context=function(_,l,r){return ir(_,{active:!1,dataIndex:l,parsed:void 0,raw:void 0,element:r,index:l,mode:"default",type:"data"})}(this.getContext(),r,w)),E.parsed=this.getParsed(r),E.raw=g.data[r],E.index=E.dataIndex=r}else E=this.$context||(this.$context=function(_,l){return ir(_,{active:!1,dataset:void 0,datasetIndex:l,index:l,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),E.dataset=g,E.index=E.datasetIndex=this.index;return E.active=!!a,E.mode=u,E}resolveDatasetElementOptions(r){return this._resolveElementOptions(this.datasetElementType.id,r)}resolveDataElementOptions(r,a){return this._resolveElementOptions(this.dataElementType.id,a,r)}_resolveElementOptions(r,a="default",u){const g="active"===a,E=this._cachedDataOpts,w=r+"-"+a,M=E[w],P=this.enableOptionSharing&&Ve(u);if(M)return Da(M,P);const J=this.chart.config,ut=J.datasetElementScopeKeys(this._type,r),Dt=g?[`${r}Hover`,"hover",r,""]:[r,""],Lt=J.getOptionScopes(this.getDataset(),ut),Qt=Object.keys(En.elements[r]),ye=J.resolveNamedOptions(Lt,Qt,()=>this.getContext(u,g),Dt);return ye.$shared&&(ye.$shared=P,E[w]=Object.freeze(Da(ye,P))),ye}_resolveAnimations(r,a,u){const g=this.chart,E=this._cachedDataOpts,w=`animation-${a}`,M=E[w];if(M)return M;let P;if(!1!==g.options.animation){const ut=this.chart.config,Dt=ut.datasetAnimationScopeKeys(this._type,a),Lt=ut.getOptionScopes(this.getDataset(),Dt);P=ut.createResolver(Lt,this.getContext(r,u,a))}const J=new Fr(g,P&&P.animations);return P&&P._cacheable&&(E[w]=Object.freeze(J)),J}getSharedOptions(r){if(r.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},r))}includeOptions(r,a){return!a||la(r)||this.chart._animationsDisabled}updateElement(r,a,u,g){la(g)?Object.assign(r,u):this._resolveAnimations(a,g).update(r,u)}updateSharedOptions(r,a,u){r&&!la(a)&&this._resolveAnimations(void 0,a).update(r,u)}_setStyle(r,a,u,g){r.active=g;const E=this.getStyle(a,g);this._resolveAnimations(a,u,g).update(r,{options:!g&&this.getSharedOptions(E)||E})}removeHoverStyle(r,a,u){this._setStyle(r,u,"active",!1)}setHoverStyle(r,a,u){this._setStyle(r,u,"active",!0)}_removeDatasetHoverStyle(){const r=this._cachedMeta.dataset;r&&this._setStyle(r,void 0,"active",!1)}_setDatasetHoverStyle(){const r=this._cachedMeta.dataset;r&&this._setStyle(r,void 0,"active",!0)}_resyncElements(r){const a=this._data,u=this._cachedMeta.data;for(const[M,P,J]of this._syncList)this[M](P,J);this._syncList=[];const g=u.length,E=a.length,w=Math.min(E,g);w&&this.parse(0,w),E>g?this._insertElements(g,E-g,r):E<g&&this._removeElements(E,g-E)}_insertElements(r,a,u=!0){const g=this._cachedMeta,E=g.data,w=r+a;let M;const P=J=>{for(J.length+=a,M=J.length-1;M>=w;M--)J[M]=J[M-a]};for(P(E),M=r;M<w;++M)E[M]=new this.dataElementType;this._parsing&&P(g._parsed),this.parse(r,a),u&&this.updateElements(E,r,a,"reset")}updateElements(r,a,u,g){}_removeElements(r,a){const u=this._cachedMeta;if(this._parsing){const g=u._parsed.splice(r,a);u._stacked&&js(u,g)}u.data.splice(r,a)}_sync(r){if(this._parsing)this._syncList.push(r);else{const[a,u,g]=r;this[a](u,g)}this.chart._dataChanges.push([this.index,...r])}_onDataPush(){const r=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-r,r])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(r,a){a&&this._sync(["_removeElements",r,a]);const u=arguments.length-2;u&&this._sync(["_insertElements",r,u])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return _.defaults={},_})();function ca(_){const l=_.iScale,r=function(_,l){if(!_._cache.$bar){const r=_.getMatchingVisibleMetas(l);let a=[];for(let u=0,g=r.length;u<g;u++)a=a.concat(r[u].controller.getAllParsedValues(_));_._cache.$bar=kr(a.sort((u,g)=>u-g))}return _._cache.$bar}(l,_.type);let u,g,E,w,a=l._length;const M=()=>{32767===E||-32768===E||(Ve(w)&&(a=Math.min(a,Math.abs(E-w)||a)),w=E)};for(u=0,g=r.length;u<g;++u)E=l.getPixelForValue(r[u]),M();for(w=void 0,u=0,g=l.ticks.length;u<g;++u)E=l.getPixelForTick(u),M();return a}function ua(_,l,r,a){return lt(_)?function(_,l,r,a){const u=r.parse(_[0],a),g=r.parse(_[1],a),E=Math.min(u,g),w=Math.max(u,g);let M=E,P=w;Math.abs(E)>Math.abs(w)&&(M=w,P=E),l[r.axis]=P,l._custom={barStart:M,barEnd:P,start:u,end:g,min:E,max:w}}(_,l,r,a):l[r.axis]=r.parse(_,a),l}function _l(_,l,r,a){const u=_.iScale,g=_.vScale,E=u.getLabels(),w=u===g,M=[];let P,J,ut,Dt;for(P=r,J=r+a;P<J;++P)Dt=l[P],ut={},ut[u.axis]=w||u.parse(E[P],P),M.push(ua(Dt,ut,g,P));return M}function Ma(_){return _&&void 0!==_.barStart&&void 0!==_.barEnd}function ht(_,l,r,a){let u=l.borderSkipped;const g={};if(!u)return void(_.borderSkipped=g);const{start:E,end:w,reverse:M,top:P,bottom:J}=function(_){let l,r,a,u,g;return _.horizontal?(l=_.base>_.x,r="left",a="right"):(l=_.base<_.y,r="bottom",a="top"),l?(u="end",g="start"):(u="start",g="end"),{start:r,end:a,reverse:l,top:u,bottom:g}}(_);"middle"===u&&r&&(_.enableBorderRadius=!0,(r._top||0)===a?u=P:(r._bottom||0)===a?u=J:(g[q(J,E,w,M)]=!0,u=P)),g[q(u,E,w,M)]=!0,_.borderSkipped=g}function q(_,l,r,a){return a?(_=function(_,l,r){return _===l?r:_===r?l:_}(_,l,r),_=Ct(_,r,l)):_=Ct(_,l,r),_}function Ct(_,l,r){return"start"===_?l:"end"===_?r:_}function At(_,{inflateAmount:l},r){_.inflateAmount="auto"===l?1===r?.33:0:l}rs.prototype.datasetElementType=null,rs.prototype.dataElementType=null;let Kt=(()=>{class _ extends rs{parsePrimitiveData(r,a,u,g){return _l(r,a,u,g)}parseArrayData(r,a,u,g){return _l(r,a,u,g)}parseObjectData(r,a,u,g){const{iScale:E,vScale:w}=r,{xAxisKey:M="x",yAxisKey:P="y"}=this._parsing,J="x"===E.axis?M:P,ut="x"===w.axis?M:P,Dt=[];let Lt,Qt,de,ye;for(Lt=u,Qt=u+g;Lt<Qt;++Lt)ye=a[Lt],de={},de[E.axis]=E.parse(pe(ye,J),Lt),Dt.push(ua(pe(ye,ut),de,w,Lt));return Dt}updateRangeFromParsed(r,a,u,g){super.updateRangeFromParsed(r,a,u,g);const E=u._custom;E&&a===this._cachedMeta.vScale&&(r.min=Math.min(r.min,E.min),r.max=Math.max(r.max,E.max))}getMaxOverflow(){return 0}getLabelAndValue(r){const a=this._cachedMeta,{iScale:u,vScale:g}=a,E=this.getParsed(r),w=E._custom,M=Ma(w)?"["+w.start+", "+w.end+"]":""+g.getLabelForValue(E[g.axis]);return{label:""+u.getLabelForValue(E[u.axis]),value:M}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(r){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,r)}updateElements(r,a,u,g){const E="reset"===g,{index:w,_cachedMeta:{vScale:M}}=this,P=M.getBasePixel(),J=M.isHorizontal(),ut=this._getRuler(),Dt=this.resolveDataElementOptions(a,g),Lt=this.getSharedOptions(Dt),Qt=this.includeOptions(g,Lt);this.updateSharedOptions(Lt,g,Dt);for(let de=a;de<a+u;de++){const ye=this.getParsed(de),De=E||yt(ye[M.axis])?{base:P,head:P}:this._calculateBarValuePixels(de),ai=this._calculateBarIndexPixels(de,ut),xi=(ye._stacks||{})[M.axis],Ri={horizontal:J,base:De.base,enableBorderRadius:!xi||Ma(ye._custom)||w===xi._top||w===xi._bottom,x:J?De.head:ai.center,y:J?ai.center:De.head,height:J?ai.size:Math.abs(De.size),width:J?Math.abs(De.size):ai.size};Qt&&(Ri.options=Lt||this.resolveDataElementOptions(de,r[de].active?"active":g));const Si=Ri.options||r[de].options;ht(Ri,Si,xi,w),At(Ri,Si,ut.ratio),this.updateElement(r[de],de,Ri,g)}}_getStacks(r,a){const g=this._cachedMeta.iScale,E=g.getMatchingVisibleMetas(this._type),w=g.options.stacked,M=E.length,P=[];let J,ut;for(J=0;J<M;++J)if(ut=E[J],ut.controller.options.grouped){if(void 0!==a){const Dt=ut.controller.getParsed(a)[ut.controller._cachedMeta.vScale.axis];if(yt(Dt)||isNaN(Dt))continue}if((!1===w||-1===P.indexOf(ut.stack)||void 0===w&&void 0===ut.stack)&&P.push(ut.stack),ut.index===r)break}return P.length||P.push(void 0),P}_getStackCount(r){return this._getStacks(void 0,r).length}_getStackIndex(r,a,u){const g=this._getStacks(r,u),E=void 0!==a?g.indexOf(a):-1;return-1===E?g.length-1:E}_getRuler(){const r=this.options,a=this._cachedMeta,u=a.iScale,g=[];let E,w;for(E=0,w=a.data.length;E<w;++E)g.push(u.getPixelForValue(this.getParsed(E)[u.axis],E));const M=r.barThickness;return{min:M||ca(a),pixels:g,start:u._startPixel,end:u._endPixel,stackCount:this._getStackCount(),scale:u,grouped:r.grouped,ratio:M?1:r.categoryPercentage*r.barPercentage}}_calculateBarValuePixels(r){const{_cachedMeta:{vScale:a,_stacked:u},options:{base:g,minBarLength:E}}=this,w=g||0,M=this.getParsed(r),P=M._custom,J=Ma(P);let Qt,de,ut=M[a.axis],Dt=0,Lt=u?this.applyStack(a,M,u):ut;Lt!==ut&&(Dt=Lt-ut,Lt=ut),J&&(ut=P.barStart,Lt=P.barEnd-P.barStart,0!==ut&&Yt(ut)!==Yt(P.barEnd)&&(Dt=0),Dt+=ut);const ye=yt(g)||J?Dt:g;let De=a.getPixelForValue(ye);if(Qt=this.chart.getDataVisibility(r)?a.getPixelForValue(Dt+Lt):De,de=Qt-De,Math.abs(de)<E&&(de=function(_,l,r){return 0!==_?Yt(_):(l.isHorizontal()?1:-1)*(l.min>=r?1:-1)}(de,a,w)*E,ut===w&&(De-=de/2),Qt=De+de),De===a.getPixelForValue(w)){const ai=Yt(de)*a.getLineWidthForValue(w)/2;De+=ai,de-=ai}return{size:de,base:De,head:Qt,center:Qt+de/2}}_calculateBarIndexPixels(r,a){const u=a.scale,g=this.options,E=g.skipNull,w=Rt(g.maxBarThickness,1/0);let M,P;if(a.grouped){const J=E?this._getStackCount(r):a.stackCount,ut="flex"===g.barThickness?function(_,l,r,a){const u=l.pixels,g=u[_];let E=_>0?u[_-1]:null,w=_<u.length-1?u[_+1]:null;const M=r.categoryPercentage;null===E&&(E=g-(null===w?l.end-l.start:w-g)),null===w&&(w=g+g-E);const P=g-(g-Math.min(E,w))/2*M;return{chunk:Math.abs(w-E)/2*M/a,ratio:r.barPercentage,start:P}}(r,a,g,J):function(_,l,r,a){const u=r.barThickness;let g,E;return yt(u)?(g=l.min*r.categoryPercentage,E=r.barPercentage):(g=u*a,E=1),{chunk:g/a,ratio:E,start:l.pixels[_]-g/2}}(r,a,g,J),Dt=this._getStackIndex(this.index,this._cachedMeta.stack,E?r:void 0);M=ut.start+ut.chunk*Dt+ut.chunk/2,P=Math.min(w,ut.chunk*ut.ratio)}else M=u.getPixelForValue(this.getParsed(r)[u.axis],r),P=Math.min(w,a.min*a.ratio);return{base:M-P/2,head:M+P/2,center:M,size:P}}draw(){const r=this._cachedMeta,a=r.vScale,u=r.data,g=u.length;let E=0;for(;E<g;++E)null!==this.getParsed(E)[a.axis]&&u[E].draw(this._ctx)}}return _.id="bar",_.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},_.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},_})(),ve=(()=>{class _ extends rs{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(r,a,u,g){const E=super.parsePrimitiveData(r,a,u,g);for(let w=0;w<E.length;w++)E[w]._custom=this.resolveDataElementOptions(w+u).radius;return E}parseArrayData(r,a,u,g){const E=super.parseArrayData(r,a,u,g);for(let w=0;w<E.length;w++)E[w]._custom=Rt(a[u+w][2],this.resolveDataElementOptions(w+u).radius);return E}parseObjectData(r,a,u,g){const E=super.parseObjectData(r,a,u,g);for(let w=0;w<E.length;w++){const M=a[u+w];E[w]._custom=Rt(M&&M.r&&+M.r,this.resolveDataElementOptions(w+u).radius)}return E}getMaxOverflow(){const r=this._cachedMeta.data;let a=0;for(let u=r.length-1;u>=0;--u)a=Math.max(a,r[u].size(this.resolveDataElementOptions(u))/2);return a>0&&a}getLabelAndValue(r){const a=this._cachedMeta,{xScale:u,yScale:g}=a,E=this.getParsed(r),w=u.getLabelForValue(E.x),M=g.getLabelForValue(E.y),P=E._custom;return{label:a.label,value:"("+w+", "+M+(P?", "+P:"")+")"}}update(r){const a=this._cachedMeta.data;this.updateElements(a,0,a.length,r)}updateElements(r,a,u,g){const E="reset"===g,{iScale:w,vScale:M}=this._cachedMeta,P=this.resolveDataElementOptions(a,g),J=this.getSharedOptions(P),ut=this.includeOptions(g,J),Dt=w.axis,Lt=M.axis;for(let Qt=a;Qt<a+u;Qt++){const de=r[Qt],ye=!E&&this.getParsed(Qt),De={},ai=De[Dt]=E?w.getPixelForDecimal(.5):w.getPixelForValue(ye[Dt]),xi=De[Lt]=E?M.getBasePixel():M.getPixelForValue(ye[Lt]);De.skip=isNaN(ai)||isNaN(xi),ut&&(De.options=this.resolveDataElementOptions(Qt,de.active?"active":g),E&&(De.options.radius=0)),this.updateElement(de,Qt,De,g)}this.updateSharedOptions(J,g,P)}resolveDataElementOptions(r,a){const u=this.getParsed(r);let g=super.resolveDataElementOptions(r,a);g.$shared&&(g=Object.assign({},g,{$shared:!1}));const E=g.radius;return"active"!==a&&(g.radius=0),g.radius+=Rt(u&&u._custom,E),g}}return _.id="bubble",_.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},_.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},_})(),fi=(()=>{class _ extends rs{constructor(r,a){super(r,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(r,a){const u=this.getDataset().data,g=this._cachedMeta;if(!1===this._parsing)g._parsed=u;else{let w,M,E=P=>+u[P];if(at(u[r])){const{key:P="value"}=this._parsing;E=J=>+pe(u[J],P)}for(w=r,M=r+a;w<M;++w)g._parsed[w]=E(w)}}_getRotation(){return li(this.options.rotation-90)}_getCircumference(){return li(this.options.circumference)}_getRotationExtents(){let r=Xt,a=-Xt;for(let u=0;u<this.chart.data.datasets.length;++u)if(this.chart.isDatasetVisible(u)){const g=this.chart.getDatasetMeta(u).controller,E=g._getRotation(),w=g._getCircumference();r=Math.min(r,E),a=Math.max(a,E+w)}return{rotation:r,circumference:a-r}}update(r){const a=this.chart,{chartArea:u}=a,g=this._cachedMeta,E=g.data,w=this.getMaxBorderWidth()+this.getMaxOffset(E)+this.options.spacing,M=Math.max((Math.min(u.width,u.height)-w)/2,0),P=Math.min(((_,l)=>"string"==typeof _&&_.endsWith("%")?parseFloat(_)/100:_/l)(this.options.cutout,M),1),J=this._getRingWeight(this.index),{circumference:ut,rotation:Dt}=this._getRotationExtents(),{ratioX:Lt,ratioY:Qt,offsetX:de,offsetY:ye}=function(_,l,r){let a=1,u=1,g=0,E=0;if(l<Xt){const w=_,M=w+l,P=Math.cos(w),J=Math.sin(w),ut=Math.cos(M),Dt=Math.sin(M),Lt=(xi,Ri,Si)=>$e(xi,w,M,!0)?1:Math.max(Ri,Ri*r,Si,Si*r),Qt=(xi,Ri,Si)=>$e(xi,w,M,!0)?-1:Math.min(Ri,Ri*r,Si,Si*r),de=Lt(0,P,ut),ye=Lt(ie,J,Dt),De=Qt(be,P,ut),ai=Qt(be+ie,J,Dt);a=(de-De)/2,u=(ye-ai)/2,g=-(de+De)/2,E=-(ye+ai)/2}return{ratioX:a,ratioY:u,offsetX:g,offsetY:E}}(Dt,ut,P),xi=Math.max(Math.min((u.width-w)/Lt,(u.height-w)/Qt)/2,0),Ri=dt(this.options.radius,xi),Ui=(Ri-Math.max(Ri*P,0))/this._getVisibleDatasetWeightTotal();this.offsetX=de*Ri,this.offsetY=ye*Ri,g.total=this.calculateTotal(),this.outerRadius=Ri-Ui*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Ui*J,0),this.updateElements(E,0,E.length,r)}_circumference(r,a){const u=this.options,g=this._cachedMeta,E=this._getCircumference();return a&&u.animation.animateRotate||!this.chart.getDataVisibility(r)||null===g._parsed[r]||g.data[r].hidden?0:this.calculateCircumference(g._parsed[r]*E/Xt)}updateElements(r,a,u,g){const E="reset"===g,w=this.chart,M=w.chartArea,ut=(M.left+M.right)/2,Dt=(M.top+M.bottom)/2,Lt=E&&w.options.animation.animateScale,Qt=Lt?0:this.innerRadius,de=Lt?0:this.outerRadius,ye=this.resolveDataElementOptions(a,g),De=this.getSharedOptions(ye),ai=this.includeOptions(g,De);let Ri,xi=this._getRotation();for(Ri=0;Ri<a;++Ri)xi+=this._circumference(Ri,E);for(Ri=a;Ri<a+u;++Ri){const Si=this._circumference(Ri,E),Ui=r[Ri],Wi={x:ut+this.offsetX,y:Dt+this.offsetY,startAngle:xi,endAngle:xi+Si,circumference:Si,outerRadius:de,innerRadius:Qt};ai&&(Wi.options=De||this.resolveDataElementOptions(Ri,Ui.active?"active":g)),xi+=Si,this.updateElement(Ui,Ri,Wi,g)}this.updateSharedOptions(De,g,ye)}calculateTotal(){const r=this._cachedMeta,a=r.data;let g,u=0;for(g=0;g<a.length;g++){const E=r._parsed[g];null!==E&&!isNaN(E)&&this.chart.getDataVisibility(g)&&!a[g].hidden&&(u+=Math.abs(E))}return u}calculateCircumference(r){const a=this._cachedMeta.total;return a>0&&!isNaN(r)?Xt*(Math.abs(r)/a):0}getLabelAndValue(r){const u=this.chart,g=u.data.labels||[],E=Tn(this._cachedMeta._parsed[r],u.options.locale);return{label:g[r]||"",value:E}}getMaxBorderWidth(r){let a=0;const u=this.chart;let g,E,w,M,P;if(!r)for(g=0,E=u.data.datasets.length;g<E;++g)if(u.isDatasetVisible(g)){w=u.getDatasetMeta(g),r=w.data,M=w.controller;break}if(!r)return 0;for(g=0,E=r.length;g<E;++g)P=M.resolveDataElementOptions(g),"inner"!==P.borderAlign&&(a=Math.max(a,P.borderWidth||0,P.hoverBorderWidth||0));return a}getMaxOffset(r){let a=0;for(let u=0,g=r.length;u<g;++u){const E=this.resolveDataElementOptions(u);a=Math.max(a,E.offset||0,E.hoverOffset||0)}return a}_getRingWeightOffset(r){let a=0;for(let u=0;u<r;++u)this.chart.isDatasetVisible(u)&&(a+=this._getRingWeight(u));return a}_getRingWeight(r){return Math.max(Rt(this.chart.data.datasets[r].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return _.id="doughnut",_.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},_.descriptors={_scriptable:l=>"spacing"!==l,_indexable:l=>"spacing"!==l},_.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const r=l.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:a}}=l.legend.options;return r.labels.map((u,g)=>{const w=l.getDatasetMeta(0).controller.getStyle(g);return{text:u,fillStyle:w.backgroundColor,strokeStyle:w.borderColor,lineWidth:w.borderWidth,pointStyle:a,hidden:!l.getDataVisibility(g),index:g}})}return[]}},onClick(l,r,a){a.chart.toggleDataVisibility(r.index),a.chart.update()}},tooltip:{callbacks:{title:()=>"",label(l){let r=l.label;const a=": "+l.formattedValue;return lt(r)?(r=r.slice(),r[0]+=a):r+=a,r}}}}},_})(),Zi=(()=>{class _ extends rs{initialize(){this.enableOptionSharing=!0,super.initialize()}update(r){const a=this._cachedMeta,{dataset:u,data:g=[],_dataset:E}=a,w=this.chart._animationsDisabled;let{start:M,count:P}=function(_,l,r){const a=l.length;let u=0,g=a;if(_._sorted){const{iScale:E,_parsed:w}=_,M=E.axis,{min:P,max:J,minDefined:ut,maxDefined:Dt}=E.getUserBounds();ut&&(u=ei(Math.min(No(w,E.axis,P).lo,r?a:No(l,M,E.getPixelForValue(P)).lo),0,a-1)),g=Dt?ei(Math.max(No(w,E.axis,J).hi+1,r?0:No(l,M,E.getPixelForValue(J)).hi+1),u,a)-u:a-u}return{start:u,count:g}}(a,g,w);this._drawStart=M,this._drawCount=P,function(_){const{xScale:l,yScale:r,_scaleRanges:a}=_,u={xmin:l.min,xmax:l.max,ymin:r.min,ymax:r.max};if(!a)return _._scaleRanges=u,!0;const g=a.xmin!==l.min||a.xmax!==l.max||a.ymin!==r.min||a.ymax!==r.max;return Object.assign(a,u),g}(a)&&(M=0,P=g.length),u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!E._decimated,u.points=g;const J=this.resolveDatasetElementOptions(r);this.options.showLine||(J.borderWidth=0),J.segment=this.options.segment,this.updateElement(u,void 0,{animated:!w,options:J},r),this.updateElements(g,M,P,r)}updateElements(r,a,u,g){const E="reset"===g,{iScale:w,vScale:M,_stacked:P,_dataset:J}=this._cachedMeta,ut=this.resolveDataElementOptions(a,g),Dt=this.getSharedOptions(ut),Lt=this.includeOptions(g,Dt),Qt=w.axis,de=M.axis,{spanGaps:ye,segment:De}=this.options,ai=Mt(ye)?ye:Number.POSITIVE_INFINITY,xi=this.chart._animationsDisabled||E||"none"===g;let Ri=a>0&&this.getParsed(a-1);for(let Si=a;Si<a+u;++Si){const Ui=r[Si],Wi=this.getParsed(Si),qi=xi?Ui:{},an=yt(Wi[de]),zn=qi[Qt]=w.getPixelForValue(Wi[Qt],Si),tn=qi[de]=E||an?M.getBasePixel():M.getPixelForValue(P?this.applyStack(M,Wi,P):Wi[de],Si);qi.skip=isNaN(zn)||isNaN(tn)||an,qi.stop=Si>0&&Wi[Qt]-Ri[Qt]>ai,De&&(qi.parsed=Wi,qi.raw=J.data[Si]),Lt&&(qi.options=Dt||this.resolveDataElementOptions(Si,Ui.active?"active":g)),xi||this.updateElement(Ui,Si,qi,g),Ri=Wi}this.updateSharedOptions(Dt,g,ut)}getMaxOverflow(){const r=this._cachedMeta,a=r.dataset,u=a.options&&a.options.borderWidth||0,g=r.data||[];if(!g.length)return u;const E=g[0].size(this.resolveDataElementOptions(0)),w=g[g.length-1].size(this.resolveDataElementOptions(g.length-1));return Math.max(u,E,w)/2}draw(){const r=this._cachedMeta;r.dataset.updateControlPoints(this.chart.chartArea,r.iScale.axis),super.draw()}}return _.id="line",_.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},_.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},_})();var Dr=Object.freeze({__proto__:null,BarController:Kt,BubbleController:ve,DoughnutController:fi,LineController:Zi,PolarAreaController:(()=>{class _ extends rs{constructor(r,a){super(r,a),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(r){const u=this.chart,g=u.data.labels||[],E=Tn(this._cachedMeta._parsed[r].r,u.options.locale);return{label:g[r]||"",value:E}}update(r){const a=this._cachedMeta.data;this._updateRadius(),this.updateElements(a,0,a.length,r)}_updateRadius(){const r=this.chart,a=r.chartArea,u=r.options,g=Math.min(a.right-a.left,a.bottom-a.top),E=Math.max(g/2,0),M=(E-Math.max(u.cutoutPercentage?E/100*u.cutoutPercentage:1,0))/r.getVisibleDatasetCount();this.outerRadius=E-M*this.index,this.innerRadius=this.outerRadius-M}updateElements(r,a,u,g){const E="reset"===g,w=this.chart,M=this.getDataset(),J=w.options.animation,ut=this._cachedMeta.rScale,Dt=ut.xCenter,Lt=ut.yCenter,Qt=ut.getIndexAngle(0)-.5*be;let ye,de=Qt;const De=360/this.countVisibleElements();for(ye=0;ye<a;++ye)de+=this._computeAngle(ye,g,De);for(ye=a;ye<a+u;ye++){const ai=r[ye];let xi=de,Ri=de+this._computeAngle(ye,g,De),Si=w.getDataVisibility(ye)?ut.getDistanceFromCenterForValue(M.data[ye]):0;de=Ri,E&&(J.animateScale&&(Si=0),J.animateRotate&&(xi=Ri=Qt));const Ui={x:Dt,y:Lt,innerRadius:0,outerRadius:Si,startAngle:xi,endAngle:Ri,options:this.resolveDataElementOptions(ye,ai.active?"active":g)};this.updateElement(ai,ye,Ui,g)}}countVisibleElements(){const r=this.getDataset();let u=0;return this._cachedMeta.data.forEach((g,E)=>{!isNaN(r.data[E])&&this.chart.getDataVisibility(E)&&u++}),u}_computeAngle(r,a,u){return this.chart.getDataVisibility(r)?li(this.resolveDataElementOptions(r,a).angle||u):0}}return _.id="polarArea",_.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},_.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const r=l.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:a}}=l.legend.options;return r.labels.map((u,g)=>{const w=l.getDatasetMeta(0).controller.getStyle(g);return{text:u,fillStyle:w.backgroundColor,strokeStyle:w.borderColor,lineWidth:w.borderWidth,pointStyle:a,hidden:!l.getDataVisibility(g),index:g}})}return[]}},onClick(l,r,a){a.chart.toggleDataVisibility(r.index),a.chart.update()}},tooltip:{callbacks:{title:()=>"",label:l=>l.chart.data.labels[l.dataIndex]+": "+l.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},_})(),PieController:(()=>{class _ extends fi{}return _.id="pie",_.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},_})(),RadarController:(()=>{class _ extends rs{getLabelAndValue(r){const a=this._cachedMeta.vScale,u=this.getParsed(r);return{label:a.getLabels()[r],value:""+a.getLabelForValue(u[a.axis])}}update(r){const a=this._cachedMeta,u=a.dataset,g=a.data||[],E=a.iScale.getLabels();if(u.points=g,"resize"!==r){const w=this.resolveDatasetElementOptions(r);this.options.showLine||(w.borderWidth=0),this.updateElement(u,void 0,{_loop:!0,_fullLoop:E.length===g.length,options:w},r)}this.updateElements(g,0,g.length,r)}updateElements(r,a,u,g){const E=this.getDataset(),w=this._cachedMeta.rScale,M="reset"===g;for(let P=a;P<a+u;P++){const J=r[P],ut=this.resolveDataElementOptions(P,J.active?"active":g),Dt=w.getPointPositionForValue(P,E.data[P]),Lt=M?w.xCenter:Dt.x,Qt=M?w.yCenter:Dt.y,de={x:Lt,y:Qt,angle:Dt.angle,skip:isNaN(Lt)||isNaN(Qt),options:ut};this.updateElement(J,P,de,g)}}}return _.id="radar",_.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},_.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},_})(),ScatterController:(()=>{class _ extends Zi{}return _.id="scatter",_.defaults={showLine:!1,fill:!1},_.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:l=>"("+l.label+", "+l.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},_})()});function Cr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var As={_date:(()=>{class _{constructor(r){this.options=r||{}}formats(){return Cr()}parse(r,a){return Cr()}format(r,a){return Cr()}add(r,a,u){return Cr()}diff(r,a,u){return Cr()}startOf(r,a,u){return Cr()}endOf(r,a){return Cr()}}return _.override=function(l){Object.assign(_.prototype,l)},_})()};function Sr(_,l){return"native"in _?{x:_.x,y:_.y}:U(_,l)}function ha(_,l,r,a){const{controller:u,data:g,_sorted:E}=_,w=u._cachedMeta.iScale;if(w&&l===w.axis&&E&&g.length){const M=w._reversePixels?yr:No;if(!a)return M(g,l,r);if(u._sharedOptions){const P=g[0],J="function"==typeof P.getRange&&P.getRange(l);if(J){const ut=M(g,l,r-J),Dt=M(g,l,r+J);return{lo:ut.lo,hi:Dt.hi}}}}return{lo:0,hi:g.length-1}}function Wl(_,l,r,a,u){const g=_.getSortedVisibleDatasetMetas(),E=r[l];for(let w=0,M=g.length;w<M;++w){const{index:P,data:J}=g[w],{lo:ut,hi:Dt}=ha(g[w],l,E,u);for(let Lt=ut;Lt<=Dt;++Lt){const Qt=J[Lt];Qt.skip||a(Qt,P,Lt)}}}function Ea(_,l,r,a){const u=[];return _r(l,_.chartArea,_._minPadding)&&Wl(_,r,l,function(E,w,M){E.inRange(l.x,l.y,a)&&u.push({element:E,datasetIndex:w,index:M})},!0),u}function Aa(_,l,r,a,u){const g=function(_){const l=-1!==_.indexOf("x"),r=-1!==_.indexOf("y");return function(a,u){const g=l?Math.abs(a.x-u.x):0,E=r?Math.abs(a.y-u.y):0;return Math.sqrt(Math.pow(g,2)+Math.pow(E,2))}}(r);let E=Number.POSITIVE_INFINITY,w=[];return _r(l,_.chartArea,_._minPadding)&&Wl(_,r,l,function(P,J,ut){if(a&&!P.inRange(l.x,l.y,u))return;const Dt=P.getCenterPoint(u);if(!_r(Dt,_.chartArea,_._minPadding)&&!P.inRange(l.x,l.y,u))return;const Lt=g(l,Dt);Lt<E?(w=[{element:P,datasetIndex:J,index:ut}],E=Lt):Lt===E&&w.push({element:P,datasetIndex:J,index:ut})}),w}function da(_,l,r,a){const u=Sr(l,_),g=[],E=r.axis,w="x"===E?"inXRange":"inYRange";let M=!1;return function(_,l){const r=_.getSortedVisibleDatasetMetas();let a,u,g;for(let E=0,w=r.length;E<w;++E){({index:a,data:u}=r[E]);for(let M=0,P=u.length;M<P;++M)g=u[M],g.skip||l(g,a,M)}}(_,(P,J,ut)=>{P[w](u[E],a)&&g.push({element:P,datasetIndex:J,index:ut}),P.inRange(u.x,u.y,a)&&(M=!0)}),r.intersect&&!M?[]:g}var Os={modes:{index(_,l,r,a){const u=Sr(l,_),g=r.axis||"x",E=r.intersect?Ea(_,u,g,a):Aa(_,u,g,!1,a),w=[];return E.length?(_.getSortedVisibleDatasetMetas().forEach(M=>{const P=E[0].index,J=M.data[P];J&&!J.skip&&w.push({element:J,datasetIndex:M.index,index:P})}),w):[]},dataset(_,l,r,a){const u=Sr(l,_),g=r.axis||"xy";let E=r.intersect?Ea(_,u,g,a):Aa(_,u,g,!1,a);if(E.length>0){const w=E[0].datasetIndex,M=_.getDatasetMeta(w).data;E=[];for(let P=0;P<M.length;++P)E.push({element:M[P],datasetIndex:w,index:P})}return E},point:(_,l,r,a)=>Ea(_,Sr(l,_),r.axis||"xy",a),nearest:(_,l,r,a)=>Aa(_,Sr(l,_),r.axis||"xy",r.intersect,a),x:(_,l,r,a)=>da(_,l,{axis:"x",intersect:r.intersect},a),y:(_,l,r,a)=>da(_,l,{axis:"y",intersect:r.intersect},a)}};const as=["left","top","right","bottom"];function ol(_,l){return _.filter(r=>r.pos===l)}function hc(_,l){return _.filter(r=>-1===as.indexOf(r.pos)&&r.box.axis===l)}function Mo(_,l){return _.sort((r,a)=>{const u=l?a:r,g=l?r:a;return u.weight===g.weight?u.index-g.index:u.weight-g.weight})}function yu(_,l,r,a){return Math.max(_[r],l[r])+Math.max(_[a],l[a])}function Eu(_,l){_.top=Math.max(_.top,l.top),_.left=Math.max(_.left,l.left),_.bottom=Math.max(_.bottom,l.bottom),_.right=Math.max(_.right,l.right)}function fc(_,l,r,a){const{pos:u,box:g}=r,E=_.maxPadding;if(!at(u)){r.size&&(_[u]-=r.size);const ut=a[r.stack]||{size:0,count:1};ut.size=Math.max(ut.size,r.horizontal?g.height:g.width),r.size=ut.size/ut.count,_[u]+=r.size}g.getPadding&&Eu(E,g.getPadding());const w=Math.max(0,l.outerWidth-yu(E,_,"left","right")),M=Math.max(0,l.outerHeight-yu(E,_,"top","bottom")),P=w!==_.w,J=M!==_.h;return _.w=w,_.h=M,r.horizontal?{same:P,other:J}:{same:J,other:P}}function jc(_,l){const r=l.maxPadding;return function(u){const g={left:0,top:0,right:0,bottom:0};return u.forEach(E=>{g[E]=Math.max(l[E],r[E])}),g}(_?["left","right"]:["top","bottom"])}function Fo(_,l,r,a){const u=[];let g,E,w,M,P,J;for(g=0,E=_.length,P=0;g<E;++g){w=_[g],M=w.box,M.update(w.width||l.w,w.height||l.h,jc(w.horizontal,l));const{same:ut,other:Dt}=fc(l,r,w,a);P|=ut&&u.length,J=J||Dt,M.fullSize||u.push(w)}return P&&Fo(u,l,r,a)||J}function Oa(_,l,r,a,u){_.top=r,_.left=l,_.right=l+a,_.bottom=r+u,_.width=a,_.height=u}function rl(_,l,r,a){const u=r.padding;let{x:g,y:E}=l;for(const w of _){const M=w.box,P=a[w.stack]||{count:1,placed:0,weight:1},J=w.stackWeight/P.weight||1;if(w.horizontal){const ut=l.w*J,Dt=P.size||M.height;Ve(P.start)&&(E=P.start),M.fullSize?Oa(M,u.left,E,r.outerWidth-u.right-u.left,Dt):Oa(M,l.left+P.placed,E,ut,Dt),P.start=E,P.placed+=ut,E=M.bottom}else{const ut=l.h*J,Dt=P.size||M.width;Ve(P.start)&&(g=P.start),M.fullSize?Oa(M,g,u.top,Dt,r.outerHeight-u.bottom-u.top):Oa(M,g,l.top+P.placed,Dt,ut),P.start=g,P.placed+=ut,g=M.right}}l.x=g,l.y=E}En.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var ls={addBox(_,l){_.boxes||(_.boxes=[]),l.fullSize=l.fullSize||!1,l.position=l.position||"top",l.weight=l.weight||0,l._layers=l._layers||function(){return[{z:0,draw(r){l.draw(r)}}]},_.boxes.push(l)},removeBox(_,l){const r=_.boxes?_.boxes.indexOf(l):-1;-1!==r&&_.boxes.splice(r,1)},configure(_,l,r){l.fullSize=r.fullSize,l.position=r.position,l.weight=r.weight},update(_,l,r,a){if(!_)return;const u=Un(_.options.layout.padding),g=Math.max(l-u.width,0),E=Math.max(r-u.height,0),w=function(_){const l=function(_){const l=[];let r,a,u,g,E,w;for(r=0,a=(_||[]).length;r<a;++r)u=_[r],({position:g,options:{stack:E,stackWeight:w=1}}=u),l.push({index:r,box:u,pos:g,horizontal:u.isHorizontal(),weight:u.weight,stack:E&&g+E,stackWeight:w});return l}(_),r=Mo(l.filter(P=>P.box.fullSize),!0),a=Mo(ol(l,"left"),!0),u=Mo(ol(l,"right")),g=Mo(ol(l,"top"),!0),E=Mo(ol(l,"bottom")),w=hc(l,"x"),M=hc(l,"y");return{fullSize:r,leftAndTop:a.concat(g),rightAndBottom:u.concat(M).concat(E).concat(w),chartArea:ol(l,"chartArea"),vertical:a.concat(u).concat(M),horizontal:g.concat(E).concat(w)}}(_.boxes),M=w.vertical,P=w.horizontal;st(_.boxes,de=>{"function"==typeof de.beforeLayout&&de.beforeLayout()});const J=M.reduce((de,ye)=>ye.box.options&&!1===ye.box.options.display?de:de+1,0)||1,ut=Object.freeze({outerWidth:l,outerHeight:r,padding:u,availableWidth:g,availableHeight:E,vBoxMaxWidth:g/2/J,hBoxMaxHeight:E/2}),Dt=Object.assign({},u);Eu(Dt,Un(a));const Lt=Object.assign({maxPadding:Dt,w:g,h:E,x:u.left,y:u.top},u),Qt=function(_,l){const r=function(_){const l={};for(const r of _){const{stack:a,pos:u,stackWeight:g}=r;if(!a||!as.includes(u))continue;const E=l[a]||(l[a]={count:0,placed:0,weight:0,size:0});E.count++,E.weight+=g}return l}(_),{vBoxMaxWidth:a,hBoxMaxHeight:u}=l;let g,E,w;for(g=0,E=_.length;g<E;++g){w=_[g];const{fullSize:M}=w.box,P=r[w.stack],J=P&&w.stackWeight/P.weight;w.horizontal?(w.width=J?J*a:M&&l.availableWidth,w.height=u):(w.width=a,w.height=J?J*u:M&&l.availableHeight)}return r}(M.concat(P),ut);Fo(w.fullSize,Lt,ut,Qt),Fo(M,Lt,ut,Qt),Fo(P,Lt,ut,Qt)&&Fo(M,Lt,ut,Qt),function(_){const l=_.maxPadding;function r(a){const u=Math.max(l[a]-_[a],0);return _[a]+=u,u}_.y+=r("top"),_.x+=r("left"),r("right"),r("bottom")}(Lt),rl(w.leftAndTop,Lt,ut,Qt),Lt.x+=Lt.w,Lt.y+=Lt.h,rl(w.rightAndBottom,Lt,ut,Qt),_.chartArea={left:Lt.left,top:Lt.top,right:Lt.left+Lt.w,bottom:Lt.top+Lt.h,height:Lt.h,width:Lt.w},st(w.chartArea,de=>{const ye=de.box;Object.assign(ye,_.chartArea),ye.update(Lt.w,Lt.h,{left:0,top:0,right:0,bottom:0})})}};class gc{acquireContext(l,r){}releaseContext(l){return!1}addEventListener(l,r,a){}removeEventListener(l,r,a){}getDevicePixelRatio(){return 1}getMaximumSize(l,r,a,u){return r=Math.max(0,r||l.width),a=a||l.height,{width:r,height:Math.max(0,u?Math.floor(r/u):a)}}isAttached(l){return!0}updateConfig(l){}}class ms extends gc{acquireContext(l){return l&&l.getContext&&l.getContext("2d")||null}updateConfig(l){l.options.animation=!1}}const zs="$chartjs",zl={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ys=_=>null===_||""===_,mc=!!Ce&&{passive:!0};function Xl(_,l,r){_.canvas.removeEventListener(l,r,mc)}function Yc(_,l){for(const r of _)if(r===l||r.contains(l))return!0}function Cu(_,l,r){const a=_.canvas,u=new MutationObserver(g=>{let E=!1;for(const w of g)E=E||Yc(w.addedNodes,a),E=E&&!Yc(w.removedNodes,a);E&&r()});return u.observe(document,{childList:!0,subtree:!0}),u}function Ir(_,l,r){const a=_.canvas,u=new MutationObserver(g=>{let E=!1;for(const w of g)E=E||Yc(w.removedNodes,a),E=E&&!Yc(w.addedNodes,a);E&&r()});return u.observe(document,{childList:!0,subtree:!0}),u}const sl=new Map;let al=0;function sh(){const _=window.devicePixelRatio;_!==al&&(al=_,sl.forEach((l,r)=>{r.currentDevicePixelRatio!==_&&l()}))}function vc(_,l,r){const a=_.canvas,u=a&&Rr(a);if(!u)return;const g=G((w,M)=>{const P=u.clientWidth;r(w,M),P<u.clientWidth&&r()},window),E=new ResizeObserver(w=>{const M=w[0],P=M.contentRect.width,J=M.contentRect.height;0===P&&0===J||g(P,J)});return E.observe(u),function(_,l){sl.size||window.addEventListener("resize",sh),sl.set(_,l)}(_,g),E}function Mr(_,l,r){r&&r.disconnect(),"resize"===l&&function(_){sl.delete(_),sl.size||window.removeEventListener("resize",sh)}(_)}function Kl(_,l,r){const a=_.canvas,u=G(g=>{null!==_.ctx&&r(function(_,l){const r=zl[_.type]||_.type,{x:a,y:u}=U(_,l);return{type:r,chart:l,native:_,x:void 0!==a?a:null,y:void 0!==u?u:null}}(g,_))},_,g=>{const E=g[0];return[E,E.offsetX,E.offsetY]});return function(_,l,r){_.addEventListener(l,r,mc)}(a,l,u),u}class Gn extends gc{acquireContext(l,r){const a=l&&l.getContext&&l.getContext("2d");return a&&a.canvas===l?(function(_,l){const r=_.style,a=_.getAttribute("height"),u=_.getAttribute("width");if(_[zs]={initial:{height:a,width:u,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Ys(u)){const g=Ae(_,"width");void 0!==g&&(_.width=g)}if(Ys(a))if(""===_.style.height)_.height=_.width/(l||2);else{const g=Ae(_,"height");void 0!==g&&(_.height=g)}}(l,r),a):null}releaseContext(l){const r=l.canvas;if(!r[zs])return!1;const a=r[zs].initial;["height","width"].forEach(g=>{const E=a[g];yt(E)?r.removeAttribute(g):r.setAttribute(g,E)});const u=a.style||{};return Object.keys(u).forEach(g=>{r.style[g]=u[g]}),r.width=r.width,delete r[zs],!0}addEventListener(l,r,a){this.removeEventListener(l,r),(l.$proxies||(l.$proxies={}))[r]=({attach:Cu,detach:Ir,resize:vc}[r]||Kl)(l,r,a)}removeEventListener(l,r){const a=l.$proxies||(l.$proxies={}),u=a[r];u&&(({attach:Mr,detach:Mr,resize:Mr}[r]||Xl)(l,r,u),a[r]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(l,r,a,u){return function(_,l,r,a){const u=Er(_),g=Di(u,"margin"),E=Vs(u.maxWidth,_,"clientWidth")||Me,w=Vs(u.maxHeight,_,"clientHeight")||Me,M=function(_,l,r){let a,u;if(void 0===l||void 0===r){const g=Rr(_);if(g){const E=g.getBoundingClientRect(),w=Er(g),M=Di(w,"border","width"),P=Di(w,"padding");l=E.width-P.width-M.width,r=E.height-P.height-M.height,a=Vs(w.maxWidth,g,"clientWidth"),u=Vs(w.maxHeight,g,"clientHeight")}else l=_.clientWidth,r=_.clientHeight}return{width:l,height:r,maxWidth:a||Me,maxHeight:u||Me}}(_,l,r);let{width:P,height:J}=M;if("content-box"===u.boxSizing){const ut=Di(u,"border","width"),Dt=Di(u,"padding");P-=Dt.width+ut.width,J-=Dt.height+ut.height}return P=Math.max(0,P-g.width),J=Math.max(0,a?Math.floor(P/a):J-g.height),P=gt(Math.min(P,E,M.maxWidth)),J=gt(Math.min(J,w,M.maxHeight)),P&&!J&&(J=gt(P/2)),{width:P,height:J}}(l,r,a,u)}isAttached(l){const r=Rr(l);return!(!r||!r.isConnected)}}class $r{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(l){const{x:r,y:a}=this.getProps(["x","y"],l);return{x:r,y:a}}hasValue(){return Mt(this.x)&&Mt(this.y)}getProps(l,r){const a=this.$animations;if(!r||!a)return this;const u={};return l.forEach(g=>{u[g]=a[g]&&a[g].active()?a[g]._to:this[g]}),u}}$r.defaults={},$r.defaultRoutes=void 0;const yc={values:_=>lt(_)?_:""+_,numeric(_,l,r){if(0===_)return"0";const a=this.chart.options.locale;let u,g=_;if(r.length>1){const P=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(P<1e-4||P>1e15)&&(u="scientific"),g=function(_,l){let r=l.length>3?l[2].value-l[1].value:l[1].value-l[0].value;return Math.abs(r)>=1&&_!==Math.floor(_)&&(r=_-Math.floor(_)),r}(_,r)}const E=Zt(Math.abs(g)),w=Math.max(Math.min(-1*Math.floor(E),20),0),M={notation:u,minimumFractionDigits:w,maximumFractionDigits:w};return Object.assign(M,this.options.ticks.format),Tn(_,a,M)},logarithmic(_,l,r){if(0===_)return"0";const a=_/Math.pow(10,Math.floor(Zt(_)));return 1===a||2===a||5===a?yc.numeric.call(this,_,l,r):""}};var ka={formatters:yc};function Ta(_,l,r,a,u){const g=Rt(a,0),E=Math.min(Rt(u,_.length),_.length);let M,P,J,w=0;for(r=Math.ceil(r),u&&(M=u-a,r=M/Math.floor(M/r)),J=g;J<0;)w++,J=Math.round(g+w*r);for(P=Math.max(g,0);P<E;P++)P===J&&(l.push(_[P]),w++,J=Math.round(g+w*r))}En.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(_,l)=>l.lineWidth,tickColor:(_,l)=>l.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ka.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),En.route("scale.ticks","color","","color"),En.route("scale.grid","color","","borderColor"),En.route("scale.grid","borderColor","","borderColor"),En.route("scale.title","color","","color"),En.describe("scale",{_fallback:!1,_scriptable:_=>!_.startsWith("before")&&!_.startsWith("after")&&"callback"!==_&&"parser"!==_,_indexable:_=>"borderDash"!==_&&"tickBorderDash"!==_}),En.describe("scales",{_fallback:"scale"}),En.describe("scale.ticks",{_scriptable:_=>"backdropPadding"!==_&&"callback"!==_,_indexable:_=>"backdropPadding"!==_});const Ec=(_,l,r)=>"top"===l||"left"===l?_[l]+r:_[l]-r;function bl(_,l){const r=[],a=_.length/l,u=_.length;let g=0;for(;g<u;g+=a)r.push(_[Math.floor(g)]);return r}function gr(_,l,r){const a=_.ticks.length,u=Math.min(l,a-1),g=_._startPixel,E=_._endPixel,w=1e-6;let P,M=_.getPixelForTick(u);if(!(r&&(P=1===a?Math.max(M-g,E-M):0===l?(_.getPixelForTick(1)-M)/2:(M-_.getPixelForTick(u-1))/2,M+=u<l?P:-P,M<g-w||M>E+w)))return M}function _s(_){return _.drawTicks?_.tickLength:0}function ll(_,l){if(!_.display)return 0;const r=ko(_.font,l),a=Un(_.padding);return(lt(_.text)?_.text.length:1)*r.lineHeight+a.height}function wu(_,l,r){let a=vt(_);return(r&&"right"!==l||!r&&"right"===l)&&(a=(_=>"left"===_?"right":"right"===_?"left":_)(a)),a}class ea extends $r{constructor(l){super(),this.id=l.id,this.type=l.type,this.options=void 0,this.ctx=l.ctx,this.chart=l.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(l){this.options=l.setContext(this.getContext()),this.axis=l.axis,this._userMin=this.parse(l.min),this._userMax=this.parse(l.max),this._suggestedMin=this.parse(l.suggestedMin),this._suggestedMax=this.parse(l.suggestedMax)}parse(l,r){return l}getUserBounds(){let{_userMin:l,_userMax:r,_suggestedMin:a,_suggestedMax:u}=this;return l=tt(l,Number.POSITIVE_INFINITY),r=tt(r,Number.NEGATIVE_INFINITY),a=tt(a,Number.POSITIVE_INFINITY),u=tt(u,Number.NEGATIVE_INFINITY),{min:tt(l,a),max:tt(r,u),minDefined:bt(l),maxDefined:bt(r)}}getMinMax(l){let E,{min:r,max:a,minDefined:u,maxDefined:g}=this.getUserBounds();if(u&&g)return{min:r,max:a};const w=this.getMatchingVisibleMetas();for(let M=0,P=w.length;M<P;++M)E=w[M].controller.getMinMax(this,l),u||(r=Math.min(r,E.min)),g||(a=Math.max(a,E.max));return r=g&&r>a?a:r,a=u&&r>a?r:a,{min:tt(r,tt(a,r)),max:tt(a,tt(r,a))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const l=this.chart.data;return this.options.labels||(this.isHorizontal()?l.xLabels:l.yLabels)||l.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){nt(this.options.beforeUpdate,[this])}update(l,r,a){const{beginAtZero:u,grace:g,ticks:E}=this.options,w=E.sampleSize;this.beforeUpdate(),this.maxWidth=l,this.maxHeight=r,this._margins=a=Object.assign({left:0,right:0,top:0,bottom:0},a),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+a.left+a.right:this.height+a.top+a.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(_,l,r){const{min:a,max:u}=_,g=dt(l,(u-a)/2),E=(w,M)=>r&&0===w?0:w+M;return{min:E(a,-Math.abs(g)),max:E(u,g)}}(this,g,u),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const M=w<this.ticks.length;this._convertTicksToLabels(M?bl(this.ticks,w):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),E.display&&(E.autoSkip||"auto"===E.source)&&(this.ticks=function(_,l){const r=_.options.ticks,a=r.maxTicksLimit||function(_){const l=_.options.offset,r=_._tickSize();return Math.floor(Math.min(_._length/r+(l?0:1),_._maxLength/r))}(_),u=r.major.enabled?function(_){const l=[];let r,a;for(r=0,a=_.length;r<a;r++)_[r].major&&l.push(r);return l}(l):[],g=u.length,E=u[0],w=u[g-1],M=[];if(g>a)return function(_,l,r,a){let E,u=0,g=r[0];for(a=Math.ceil(a),E=0;E<_.length;E++)E===g&&(l.push(_[E]),u++,g=r[u*a])}(l,M,u,g/a),M;const P=function(_,l,r){const a=function(_){const l=_.length;let r,a;if(l<2)return!1;for(a=_[0],r=1;r<l;++r)if(_[r]-_[r-1]!==a)return!1;return a}(_),u=l.length/r;if(!a)return Math.max(u,1);const g=function(_){const l=[],r=Math.sqrt(_);let a;for(a=1;a<r;a++)_%a==0&&(l.push(a),l.push(_/a));return r===(0|r)&&l.push(r),l.sort((u,g)=>u-g).pop(),l}(a);for(let E=0,w=g.length-1;E<w;E++){const M=g[E];if(M>u)return M}return Math.max(u,1)}(u,l,a);if(g>0){let J,ut;const Dt=g>1?Math.round((w-E)/(g-1)):null;for(Ta(l,M,P,yt(Dt)?0:E-Dt,E),J=0,ut=g-1;J<ut;J++)Ta(l,M,P,u[J],u[J+1]);return Ta(l,M,P,w,yt(Dt)?l.length:w+Dt),M}return Ta(l,M,P),M}(this,this.ticks),this._labelSizes=null),M&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let r,a,l=this.options.reverse;this.isHorizontal()?(r=this.left,a=this.right):(r=this.top,a=this.bottom,l=!l),this._startPixel=r,this._endPixel=a,this._reversePixels=l,this._length=a-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){nt(this.options.afterUpdate,[this])}beforeSetDimensions(){nt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){nt(this.options.afterSetDimensions,[this])}_callHooks(l){this.chart.notifyPlugins(l,this.getContext()),nt(this.options[l],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){nt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(l){const r=this.options.ticks;let a,u,g;for(a=0,u=l.length;a<u;a++)g=l[a],g.label=nt(r.callback,[g.value,a,l],this)}afterTickToLabelConversion(){nt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){nt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const l=this.options,r=l.ticks,a=this.ticks.length,u=r.minRotation||0,g=r.maxRotation;let w,M,P,E=u;if(!this._isVisible()||!r.display||u>=g||a<=1||!this.isHorizontal())return void(this.labelRotation=u);const J=this._getLabelSizes(),ut=J.widest.width,Dt=J.highest.height,Lt=ei(this.chart.width-ut,0,this.maxWidth);w=l.offset?this.maxWidth/a:Lt/(a-1),ut+6>w&&(w=Lt/(a-(l.offset?.5:1)),M=this.maxHeight-_s(l.grid)-r.padding-ll(l.title,this.chart.options.font),P=Math.sqrt(ut*ut+Dt*Dt),E=ri(Math.min(Math.asin(ei((J.highest.height+6)/w,-1,1)),Math.asin(ei(M/P,-1,1))-Math.asin(ei(Dt/P,-1,1)))),E=Math.max(u,Math.min(g,E))),this.labelRotation=E}afterCalculateLabelRotation(){nt(this.options.afterCalculateLabelRotation,[this])}beforeFit(){nt(this.options.beforeFit,[this])}fit(){const l={width:0,height:0},{chart:r,options:{ticks:a,title:u,grid:g}}=this,E=this._isVisible(),w=this.isHorizontal();if(E){const M=ll(u,r.options.font);if(w?(l.width=this.maxWidth,l.height=_s(g)+M):(l.height=this.maxHeight,l.width=_s(g)+M),a.display&&this.ticks.length){const{first:P,last:J,widest:ut,highest:Dt}=this._getLabelSizes(),Lt=2*a.padding,Qt=li(this.labelRotation),de=Math.cos(Qt),ye=Math.sin(Qt);w?l.height=Math.min(this.maxHeight,l.height+(a.mirror?0:ye*ut.width+de*Dt.height)+Lt):l.width=Math.min(this.maxWidth,l.width+(a.mirror?0:de*ut.width+ye*Dt.height)+Lt),this._calculatePadding(P,J,ye,de)}}this._handleMargins(),w?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=l.height):(this.width=l.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(l,r,a,u){const{ticks:{align:g,padding:E},position:w}=this.options,M=0!==this.labelRotation,P="top"!==w&&"x"===this.axis;if(this.isHorizontal()){const J=this.getPixelForTick(0)-this.left,ut=this.right-this.getPixelForTick(this.ticks.length-1);let Dt=0,Lt=0;M?P?(Dt=u*l.width,Lt=a*r.height):(Dt=a*l.height,Lt=u*r.width):"start"===g?Lt=r.width:"end"===g?Dt=l.width:(Dt=l.width/2,Lt=r.width/2),this.paddingLeft=Math.max((Dt-J+E)*this.width/(this.width-J),0),this.paddingRight=Math.max((Lt-ut+E)*this.width/(this.width-ut),0)}else{let J=r.height/2,ut=l.height/2;"start"===g?(J=0,ut=l.height):"end"===g&&(J=r.height,ut=0),this.paddingTop=J+E,this.paddingBottom=ut+E}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){nt(this.options.afterFit,[this])}isHorizontal(){const{axis:l,position:r}=this.options;return"top"===r||"bottom"===r||"x"===l}isFullSize(){return this.options.fullSize}_convertTicksToLabels(l){let r,a;for(this.beforeTickToLabelConversion(),this.generateTickLabels(l),r=0,a=l.length;r<a;r++)yt(l[r].label)&&(l.splice(r,1),a--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let l=this._labelSizes;if(!l){const r=this.options.ticks.sampleSize;let a=this.ticks;r<a.length&&(a=bl(a,r)),this._labelSizes=l=this._computeLabelSizes(a,a.length)}return l}_computeLabelSizes(l,r){const{ctx:a,_longestTextCache:u}=this,g=[],E=[];let P,J,ut,Dt,Lt,Qt,de,ye,De,ai,xi,w=0,M=0;for(P=0;P<r;++P){if(Dt=l[P].label,Lt=this._resolveTickFontOptions(P),a.font=Qt=Lt.string,de=u[Qt]=u[Qt]||{data:{},gc:[]},ye=Lt.lineHeight,De=ai=0,yt(Dt)||lt(Dt)){if(lt(Dt))for(J=0,ut=Dt.length;J<ut;++J)xi=Dt[J],!yt(xi)&&!lt(xi)&&(De=Uo(a,de.data,de.gc,De,xi),ai+=ye)}else De=Uo(a,de.data,de.gc,De,Dt),ai=ye;g.push(De),E.push(ai),w=Math.max(De,w),M=Math.max(ai,M)}!function(_,l){st(_,r=>{const a=r.gc,u=a.length/2;let g;if(u>l){for(g=0;g<u;++g)delete r.data[a[g]];a.splice(0,u)}})}(u,r);const Ri=g.indexOf(w),Si=E.indexOf(M),Ui=Wi=>({width:g[Wi]||0,height:E[Wi]||0});return{first:Ui(0),last:Ui(r-1),widest:Ui(Ri),highest:Ui(Si),widths:g,heights:E}}getLabelForValue(l){return l}getPixelForValue(l,r){return NaN}getValueForPixel(l){}getPixelForTick(l){const r=this.ticks;return l<0||l>r.length-1?null:this.getPixelForValue(r[l].value)}getPixelForDecimal(l){this._reversePixels&&(l=1-l);const r=this._startPixel+l*this._length;return ei(this._alignToPixels?$o(this.chart,r,0):r,-32768,32767)}getDecimalForPixel(l){const r=(l-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:l,max:r}=this;return l<0&&r<0?r:l>0&&r>0?l:0}getContext(l){const r=this.ticks||[];if(l>=0&&l<r.length){const a=r[l];return a.$context||(a.$context=function(_,l,r){return ir(_,{tick:r,index:l,type:"tick"})}(this.getContext(),l,a))}return this.$context||(this.$context=function(_,l){return ir(_,{scale:l,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const l=this.options.ticks,r=li(this.labelRotation),a=Math.abs(Math.cos(r)),u=Math.abs(Math.sin(r)),g=this._getLabelSizes(),E=l.autoSkipPadding||0,w=g?g.widest.width+E:0,M=g?g.highest.height+E:0;return this.isHorizontal()?M*a>w*u?w/a:M/u:M*u<w*a?M/a:w/u}_isVisible(){const l=this.options.display;return"auto"!==l?!!l:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(l){const r=this.axis,a=this.chart,u=this.options,{grid:g,position:E}=u,w=g.offset,M=this.isHorizontal(),J=this.ticks.length+(w?1:0),ut=_s(g),Dt=[],Lt=g.setContext(this.getContext()),Qt=Lt.drawBorder?Lt.borderWidth:0,de=Qt/2,ye=function(Yi){return $o(a,Yi,Qt)};let De,ai,xi,Ri,Si,Ui,Wi,qi,an,zn,tn,Vn;if("top"===E)De=ye(this.bottom),Ui=this.bottom-ut,qi=De-de,zn=ye(l.top)+de,Vn=l.bottom;else if("bottom"===E)De=ye(this.top),zn=l.top,Vn=ye(l.bottom)-de,Ui=De+de,qi=this.top+ut;else if("left"===E)De=ye(this.right),Si=this.right-ut,Wi=De-de,an=ye(l.left)+de,tn=l.right;else if("right"===E)De=ye(this.left),an=l.left,tn=ye(l.right)-de,Si=De+de,Wi=this.left+ut;else if("x"===r){if("center"===E)De=ye((l.top+l.bottom)/2+.5);else if(at(E)){const Yi=Object.keys(E)[0];De=ye(this.chart.scales[Yi].getPixelForValue(E[Yi]))}zn=l.top,Vn=l.bottom,Ui=De+de,qi=Ui+ut}else if("y"===r){if("center"===E)De=ye((l.left+l.right)/2);else if(at(E)){const Yi=Object.keys(E)[0];De=ye(this.chart.scales[Yi].getPixelForValue(E[Yi]))}Si=De-de,Wi=Si-ut,an=l.left,tn=l.right}const Bo=Rt(u.ticks.maxTicksLimit,J),zi=Math.max(1,Math.ceil(J/Bo));for(ai=0;ai<J;ai+=zi){const Yi=g.setContext(this.getContext(ai)),In=Yi.lineWidth,no=Yi.color,co=g.borderDash||[],Ho=Yi.borderDashOffset,Hc=Yi.tickWidth,Ai=Yi.tickColor,gn=Yi.tickBorderDash||[],uo=Yi.tickBorderDashOffset;xi=gr(this,ai,w),void 0!==xi&&(Ri=$o(a,xi,In),M?Si=Wi=an=tn=Ri:Ui=qi=zn=Vn=Ri,Dt.push({tx1:Si,ty1:Ui,tx2:Wi,ty2:qi,x1:an,y1:zn,x2:tn,y2:Vn,width:In,color:no,borderDash:co,borderDashOffset:Ho,tickWidth:Hc,tickColor:Ai,tickBorderDash:gn,tickBorderDashOffset:uo}))}return this._ticksLength=J,this._borderValue=De,Dt}_computeLabelItems(l){const r=this.axis,a=this.options,{position:u,ticks:g}=a,E=this.isHorizontal(),w=this.ticks,{align:M,crossAlign:P,padding:J,mirror:ut}=g,Dt=_s(a.grid),Lt=Dt+J,Qt=ut?-J:Lt,de=-li(this.labelRotation),ye=[];let De,ai,xi,Ri,Si,Ui,Wi,qi,an,zn,tn,Vn,Bo="middle";if("top"===u)Ui=this.bottom-Qt,Wi=this._getXAxisLabelAlignment();else if("bottom"===u)Ui=this.top+Qt,Wi=this._getXAxisLabelAlignment();else if("left"===u){const Yi=this._getYAxisLabelAlignment(Dt);Wi=Yi.textAlign,Si=Yi.x}else if("right"===u){const Yi=this._getYAxisLabelAlignment(Dt);Wi=Yi.textAlign,Si=Yi.x}else if("x"===r){if("center"===u)Ui=(l.top+l.bottom)/2+Lt;else if(at(u)){const Yi=Object.keys(u)[0];Ui=this.chart.scales[Yi].getPixelForValue(u[Yi])+Lt}Wi=this._getXAxisLabelAlignment()}else if("y"===r){if("center"===u)Si=(l.left+l.right)/2-Lt;else if(at(u)){const Yi=Object.keys(u)[0];Si=this.chart.scales[Yi].getPixelForValue(u[Yi])}Wi=this._getYAxisLabelAlignment(Dt).textAlign}"y"===r&&("start"===M?Bo="top":"end"===M&&(Bo="bottom"));const zi=this._getLabelSizes();for(De=0,ai=w.length;De<ai;++De){xi=w[De],Ri=xi.label;const Yi=g.setContext(this.getContext(De));qi=this.getPixelForTick(De)+g.labelOffset,an=this._resolveTickFontOptions(De),zn=an.lineHeight,tn=lt(Ri)?Ri.length:1;const In=tn/2,no=Yi.color,co=Yi.textStrokeColor,Ho=Yi.textStrokeWidth;let Hc;if(E?(Si=qi,Vn="top"===u?"near"===P||0!==de?-tn*zn+zn/2:"center"===P?-zi.highest.height/2-In*zn+zn:zn/2-zi.highest.height:"near"===P||0!==de?zn/2:"center"===P?zi.highest.height/2-In*zn:zi.highest.height-tn*zn,ut&&(Vn*=-1)):(Ui=qi,Vn=(1-tn)*zn/2),Yi.showLabelBackdrop){const Ai=Un(Yi.backdropPadding),gn=zi.heights[De],uo=zi.widths[De];let Fs=Ui+Vn-Ai.top,Fl=Si-Ai.left;switch(Bo){case"middle":Fs-=gn/2;break;case"bottom":Fs-=gn}switch(Wi){case"center":Fl-=uo/2;break;case"right":Fl-=uo}Hc={left:Fl,top:Fs,width:uo+Ai.width,height:gn+Ai.height,color:Yi.backdropColor}}ye.push({rotation:de,label:Ri,font:an,color:no,strokeColor:co,strokeWidth:Ho,textOffset:Vn,textAlign:Wi,textBaseline:Bo,translation:[Si,Ui],backdrop:Hc})}return ye}_getXAxisLabelAlignment(){const{position:l,ticks:r}=this.options;if(-li(this.labelRotation))return"top"===l?"left":"right";let u="center";return"start"===r.align?u="left":"end"===r.align&&(u="right"),u}_getYAxisLabelAlignment(l){const{position:r,ticks:{crossAlign:a,mirror:u,padding:g}}=this.options,w=l+g,M=this._getLabelSizes().widest.width;let P,J;return"left"===r?u?(J=this.right+g,"near"===a?P="left":"center"===a?(P="center",J+=M/2):(P="right",J+=M)):(J=this.right-w,"near"===a?P="right":"center"===a?(P="center",J-=M/2):(P="left",J=this.left)):"right"===r?u?(J=this.left+g,"near"===a?P="right":"center"===a?(P="center",J-=M/2):(P="left",J-=M)):(J=this.left+w,"near"===a?P="left":"center"===a?(P="center",J+=M/2):(P="right",J=this.right)):P="right",{textAlign:P,x:J}}_computeLabelArea(){if(this.options.ticks.mirror)return;const l=this.chart,r=this.options.position;return"left"===r||"right"===r?{top:0,left:this.left,bottom:l.height,right:this.right}:"top"===r||"bottom"===r?{top:this.top,left:0,bottom:this.bottom,right:l.width}:void 0}drawBackground(){const{ctx:l,options:{backgroundColor:r},left:a,top:u,width:g,height:E}=this;r&&(l.save(),l.fillStyle=r,l.fillRect(a,u,g,E),l.restore())}getLineWidthForValue(l){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const u=this.ticks.findIndex(g=>g.value===l);return u>=0?r.setContext(this.getContext(u)).lineWidth:0}drawGrid(l){const r=this.options.grid,a=this.ctx,u=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(l));let g,E;const w=(M,P,J)=>{!J.width||!J.color||(a.save(),a.lineWidth=J.width,a.strokeStyle=J.color,a.setLineDash(J.borderDash||[]),a.lineDashOffset=J.borderDashOffset,a.beginPath(),a.moveTo(M.x,M.y),a.lineTo(P.x,P.y),a.stroke(),a.restore())};if(r.display)for(g=0,E=u.length;g<E;++g){const M=u[g];r.drawOnChartArea&&w({x:M.x1,y:M.y1},{x:M.x2,y:M.y2},M),r.drawTicks&&w({x:M.tx1,y:M.ty1},{x:M.tx2,y:M.ty2},{color:M.tickColor,width:M.tickWidth,borderDash:M.tickBorderDash,borderDashOffset:M.tickBorderDashOffset})}}drawBorder(){const{chart:l,ctx:r,options:{grid:a}}=this,u=a.setContext(this.getContext()),g=a.drawBorder?u.borderWidth:0;if(!g)return;const E=a.setContext(this.getContext(0)).lineWidth,w=this._borderValue;let M,P,J,ut;this.isHorizontal()?(M=$o(l,this.left,g)-g/2,P=$o(l,this.right,E)+E/2,J=ut=w):(J=$o(l,this.top,g)-g/2,ut=$o(l,this.bottom,E)+E/2,M=P=w),r.save(),r.lineWidth=u.borderWidth,r.strokeStyle=u.borderColor,r.beginPath(),r.moveTo(M,J),r.lineTo(P,ut),r.stroke(),r.restore()}drawLabels(l){if(!this.options.ticks.display)return;const a=this.ctx,u=this._computeLabelArea();u&&oo(a,u);const g=this._labelItems||(this._labelItems=this._computeLabelItems(l));let E,w;for(E=0,w=g.length;E<w;++E){const M=g[E],P=M.font,J=M.label;M.backdrop&&(a.fillStyle=M.backdrop.color,a.fillRect(M.backdrop.left,M.backdrop.top,M.backdrop.width,M.backdrop.height)),Gr(a,J,0,M.textOffset,P,M)}u&&xo(a)}drawTitle(){const{ctx:l,options:{position:r,title:a,reverse:u}}=this;if(!a.display)return;const g=ko(a.font),E=Un(a.padding),w=a.align;let M=g.lineHeight/2;"bottom"===r||"center"===r||at(r)?(M+=E.bottom,lt(a.text)&&(M+=g.lineHeight*(a.text.length-1))):M+=E.top;const{titleX:P,titleY:J,maxWidth:ut,rotation:Dt}=function(_,l,r,a){const{top:u,left:g,bottom:E,right:w,chart:M}=_,{chartArea:P,scales:J}=M;let Dt,Lt,Qt,ut=0;const de=E-u,ye=w-g;if(_.isHorizontal()){if(Lt=it(a,g,w),at(r)){const De=Object.keys(r)[0];Qt=J[De].getPixelForValue(r[De])+de-l}else Qt="center"===r?(P.bottom+P.top)/2+de-l:Ec(_,r,l);Dt=w-g}else{if(at(r)){const De=Object.keys(r)[0];Lt=J[De].getPixelForValue(r[De])-ye+l}else Lt="center"===r?(P.left+P.right)/2-ye+l:Ec(_,r,l);Qt=it(a,E,u),ut="left"===r?-ie:ie}return{titleX:Lt,titleY:Qt,maxWidth:Dt,rotation:ut}}(this,M,r,w);Gr(l,a.text,0,0,g,{color:a.color,maxWidth:ut,rotation:Dt,textAlign:wu(w,r,u),textBaseline:"middle",translation:[P,J]})}draw(l){!this._isVisible()||(this.drawBackground(),this.drawGrid(l),this.drawBorder(),this.drawTitle(),this.drawLabels(l))}_layers(){const l=this.options,r=l.ticks&&l.ticks.z||0,a=Rt(l.grid&&l.grid.z,-1);return this._isVisible()&&this.draw===ea.prototype.draw?[{z:a,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:a+1,draw:()=>{this.drawBorder()}},{z:r,draw:u=>{this.drawLabels(u)}}]:[{z:r,draw:u=>{this.draw(u)}}]}getMatchingVisibleMetas(l){const r=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",u=[];let g,E;for(g=0,E=r.length;g<E;++g){const w=r[g];w[a]===this.id&&(!l||w.type===l)&&u.push(w)}return u}_resolveTickFontOptions(l){return ko(this.options.ticks.setContext(this.getContext(l)).font)}_maxDigits(){const l=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/l}}class Ca{constructor(l,r,a){this.type=l,this.scope=r,this.override=a,this.items=Object.create(null)}isForType(l){return Object.prototype.isPrototypeOf.call(this.type.prototype,l.prototype)}register(l){const r=Object.getPrototypeOf(l);let a;var _;"id"in(_=r)&&"defaults"in _&&(a=this.register(r));const u=this.items,g=l.id,E=this.scope+"."+g;if(!g)throw new Error("class does not have id: "+l);return g in u||(u[g]=l,function(_,l,r){const a=Ze(Object.create(null),[r?En.get(r):{},En.get(l),_.defaults]);En.set(l,a),_.defaultRoutes&&function(_,l){Object.keys(l).forEach(r=>{const a=r.split("."),u=a.pop(),g=[_].concat(a).join("."),E=l[r].split("."),w=E.pop(),M=E.join(".");En.route(g,u,M,w)})}(l,_.defaultRoutes),_.descriptors&&En.describe(l,_.descriptors)}(l,E,a),this.override&&En.override(l.id,l.overrides)),E}get(l){return this.items[l]}unregister(l){const r=this.items,a=l.id,u=this.scope;a in r&&delete r[a],u&&a in En[u]&&(delete En[u][a],this.override&&delete un[a])}}var Ls=new class{constructor(){this.controllers=new Ca(rs,"datasets",!0),this.elements=new Ca($r,"elements"),this.plugins=new Ca(Object,"plugins"),this.scales=new Ca(ea,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...l){this._each("register",l)}remove(...l){this._each("unregister",l)}addControllers(...l){this._each("register",l,this.controllers)}addElements(...l){this._each("register",l,this.elements)}addPlugins(...l){this._each("register",l,this.plugins)}addScales(...l){this._each("register",l,this.scales)}getController(l){return this._get(l,this.controllers,"controller")}getElement(l){return this._get(l,this.elements,"element")}getPlugin(l){return this._get(l,this.plugins,"plugin")}getScale(l){return this._get(l,this.scales,"scale")}removeControllers(...l){this._each("unregister",l,this.controllers)}removeElements(...l){this._each("unregister",l,this.elements)}removePlugins(...l){this._each("unregister",l,this.plugins)}removeScales(...l){this._each("unregister",l,this.scales)}_each(l,r,a){[...r].forEach(u=>{const g=a||this._getRegistryForType(u);a||g.isForType(u)||g===this.plugins&&u.id?this._exec(l,g,u):st(u,E=>{const w=a||this._getRegistryForType(E);this._exec(l,w,E)})})}_exec(l,r,a){const u=we(l);nt(a["before"+u],[],a),r[l](a),nt(a["after"+u],[],a)}_getRegistryForType(l){for(let r=0;r<this._typedRegistries.length;r++){const a=this._typedRegistries[r];if(a.isForType(l))return a}return this.plugins}_get(l,r,a){const u=r.get(l);if(void 0===u)throw new Error('"'+l+'" is not a registered '+a+".");return u}};class Cc{constructor(){this._init=[]}notify(l,r,a,u){"beforeInit"===r&&(this._init=this._createDescriptors(l,!0),this._notify(this._init,l,"install"));const g=u?this._descriptors(l).filter(u):this._descriptors(l),E=this._notify(g,l,r,a);return"destroy"===r&&(this._notify(g,l,"stop"),this._notify(this._init,l,"uninstall")),E}_notify(l,r,a,u){u=u||{};for(const g of l){const E=g.plugin;if(!1===nt(E[a],[r,u,g.options],E)&&u.cancelable)return!1}return!0}invalidate(){yt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(l){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(l);return this._notifyStateChanges(l),r}_createDescriptors(l,r){const a=l&&l.config,u=Rt(a.options&&a.options.plugins,{}),g=function(_){const l=[],r=Object.keys(Ls.plugins.items);for(let u=0;u<r.length;u++)l.push(Ls.getPlugin(r[u]));const a=_.plugins||[];for(let u=0;u<a.length;u++){const g=a[u];-1===l.indexOf(g)&&l.push(g)}return l}(a);return!1!==u||r?function(_,l,r,a){const u=[],g=_.getContext();for(let E=0;E<l.length;E++){const w=l[E],P=Du(r[w.id],a);null!==P&&u.push({plugin:w,options:Tl(_.config,w,P,g)})}return u}(l,g,u,r):[]}_notifyStateChanges(l){const r=this._oldCache||[],a=this._cache,u=(g,E)=>g.filter(w=>!E.some(M=>w.plugin.id===M.plugin.id));this._notify(u(r,a),l,"stop"),this._notify(u(a,r),l,"start")}}function Du(_,l){return l||!1!==_?!0===_?{}:_:null}function Tl(_,l,r,a){const u=_.pluginScopeKeys(l),g=_.getOptionScopes(r,u);return _.createResolver(g,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Na(_,l){return((l.datasets||{})[_]||{}).indexAxis||l.indexAxis||(En.datasets[_]||{}).indexAxis||"x"}function Zl(_,l){return"x"===_||"y"===_?_:l.axis||function(_){return"top"===_||"bottom"===_?"x":"left"===_||"right"===_?"y":void 0}(l.position)||_.charAt(0).toLowerCase()}function $c(_){const l=_.options||(_.options={});l.plugins=Rt(l.plugins,{}),l.scales=function(_,l){const r=un[_.type]||{scales:{}},a=l.scales||{},u=Na(_.type,l),g=Object.create(null),E=Object.create(null);return Object.keys(a).forEach(w=>{const M=a[w];if(!at(M))return console.error(`Invalid scale configuration for scale: ${w}`);if(M._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${w}`);const P=Zl(w,M),J=function(_,l){return _===l?"_index_":"_value_"}(P,u),ut=r.scales||{};g[P]=g[P]||w,E[w]=me(Object.create(null),[{axis:P},M,ut[P],ut[J]])}),_.data.datasets.forEach(w=>{const M=w.type||_.type,P=w.indexAxis||Na(M,l),ut=(un[M]||{}).scales||{};Object.keys(ut).forEach(Dt=>{const Lt=function(_,l){let r=_;return"_index_"===_?r=l:"_value_"===_&&(r="x"===l?"y":"x"),r}(Dt,P),Qt=w[Lt+"AxisID"]||g[Lt]||Lt;E[Qt]=E[Qt]||Object.create(null),me(E[Qt],[{axis:Lt},a[Qt],ut[Dt]])})}),Object.keys(E).forEach(w=>{const M=E[w];me(M,[En.scales[M.type],En.scale])}),E}(_,l)}function Mu(_){return(_=_||{}).datasets=_.datasets||[],_.labels=_.labels||[],_}const ul=new Map,Cl=new Set;function ia(_,l){let r=ul.get(_);return r||(r=l(),ul.set(_,r),Cl.add(r)),r}const Sl=(_,l,r)=>{const a=pe(l,r);void 0!==a&&_.add(a)};class Au{constructor(l){var _;this._config=((_=(_=l)||{}).data=Mu(_.data),$c(_),_),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(l){this._config.type=l}get data(){return this._config.data}set data(l){this._config.data=Mu(l)}get options(){return this._config.options}set options(l){this._config.options=l}get plugins(){return this._config.plugins}update(){const l=this._config;this.clearCache(),$c(l)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(l){return ia(l,()=>[[`datasets.${l}`,""]])}datasetAnimationScopeKeys(l,r){return ia(`${l}.transition.${r}`,()=>[[`datasets.${l}.transitions.${r}`,`transitions.${r}`],[`datasets.${l}`,""]])}datasetElementScopeKeys(l,r){return ia(`${l}-${r}`,()=>[[`datasets.${l}.elements.${r}`,`datasets.${l}`,`elements.${r}`,""]])}pluginScopeKeys(l){const r=l.id;return ia(`${this.type}-plugin-${r}`,()=>[[`plugins.${r}`,...l.additionalOptionScopes||[]]])}_cachedScopes(l,r){const a=this._scopeCache;let u=a.get(l);return(!u||r)&&(u=new Map,a.set(l,u)),u}getOptionScopes(l,r,a){const{options:u,type:g}=this,E=this._cachedScopes(l,a),w=E.get(r);if(w)return w;const M=new Set;r.forEach(J=>{l&&(M.add(l),J.forEach(ut=>Sl(M,l,ut))),J.forEach(ut=>Sl(M,u,ut)),J.forEach(ut=>Sl(M,un[g]||{},ut)),J.forEach(ut=>Sl(M,En,ut)),J.forEach(ut=>Sl(M,dr,ut))});const P=Array.from(M);return 0===P.length&&P.push(Object.create(null)),Cl.has(r)&&E.set(r,P),P}chartOptionScopes(){const{options:l,type:r}=this;return[l,un[r]||{},En.datasets[r]||{},{type:r},En,dr]}resolveNamedOptions(l,r,a,u=[""]){const g={$shared:!0},{resolver:E,subPrefixes:w}=Ou(this._resolverCache,l,u);let M=E;(function(_,l){const{isScriptable:r,isIndexable:a}=cr(_);for(const u of l){const g=r(u),E=a(u),w=(E||g)&&_[u];if(g&&(ui(w)||wl(w))||E&&lt(w))return!0}return!1})(E,r)&&(g.$shared=!1,M=fr(E,a=ui(a)?a():a,this.createResolver(l,a,w)));for(const P of r)g[P]=M[P];return g}createResolver(l,r,a=[""],u){const{resolver:g}=Ou(this._resolverCache,l,a);return at(r)?fr(g,r,void 0,u):g}}function Ou(_,l,r){let a=_.get(l);a||(a=new Map,_.set(l,a));const u=r.join();let g=a.get(u);return g||(g={resolver:Jn(l,r),subPrefixes:r.filter(w=>!w.toLowerCase().includes("hover"))},a.set(u,g)),g}const wl=_=>at(_)&&Object.getOwnPropertyNames(_).reduce((l,r)=>l||ui(_[r]),!1),vs=["top","bottom","left","right","chartArea"];function Zc(_,l){return"top"===_||"bottom"===_||-1===vs.indexOf(_)&&"x"===l}function Pa(_,l){return function(r,a){return r[_]===a[_]?r[l]-a[l]:r[_]-a[_]}}function xu(_){const l=_.chart,r=l.options.animation;l.notifyPlugins("afterRender"),nt(r&&r.onComplete,[_],l)}function Rl(_){const l=_.chart,r=l.options.animation;nt(r&&r.onProgress,[_],l)}function Ql(_){return ws()&&"string"==typeof _?_=document.getElementById(_):_&&_.length&&(_=_[0]),_&&_.canvas&&(_=_.canvas),_}const pt={},Tt=_=>{const l=Ql(_);return Object.values(pt).filter(r=>r.canvas===l).pop()};function Ft(_,l,r){const a=Object.keys(_);for(const u of a){const g=+u;if(g>=l){const E=_[u];delete _[u],(r>0||g>l)&&(_[g+r]=E)}}}class ne{constructor(l,r){const a=this.config=new Au(r),u=Ql(l),g=Tt(u);if(g)throw new Error("Canvas is already in use. Chart with ID '"+g.id+"' must be destroyed before the canvas can be reused.");const E=a.createResolver(a.chartOptionScopes(),this.getContext());var _;this.platform=new(a.platform||(_=u,!ws()||"undefined"!=typeof OffscreenCanvas&&_ instanceof OffscreenCanvas?ms:Gn)),this.platform.updateConfig(a);const w=this.platform.acquireContext(u,E.aspectRatio),M=w&&w.canvas,P=M&&M.height,J=M&&M.width;this.id=ct(),this.ctx=w,this.canvas=M,this.width=J,this.height=P,this._options=E,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Cc,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(_,l){let r;return function(...a){return l?(clearTimeout(r),r=setTimeout(_,l,a)):_.apply(this,a),l}}(ut=>this.update(ut),E.resizeDelay||0),this._dataChanges=[],pt[this.id]=this,w&&M?(ji.listen(this,"complete",xu),ji.listen(this,"progress",Rl),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:l,maintainAspectRatio:r},width:a,height:u,_aspectRatio:g}=this;return yt(l)?r&&g?g:u?a/u:null:l}get data(){return this.config.data}set data(l){this.config.data=l}get options(){return this._options}set options(l){this.config.options=l}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$t(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sa(this.canvas,this.ctx),this}stop(){return ji.stop(this),this}resize(l,r){ji.running(this)?this._resizeBeforeDraw={width:l,height:r}:this._resize(l,r)}_resize(l,r){const a=this.options,E=this.platform.getMaximumSize(this.canvas,l,r,a.maintainAspectRatio&&this.aspectRatio),w=a.devicePixelRatio||this.platform.getDevicePixelRatio(),M=this.width?"resize":"attach";this.width=E.width,this.height=E.height,this._aspectRatio=this.aspectRatio,$t(this,w,!0)&&(this.notifyPlugins("resize",{size:E}),nt(a.onResize,[this,E],this),this.attached&&this._doResize(M)&&this.render())}ensureScalesHaveIDs(){st(this.options.scales||{},(a,u)=>{a.id=u})}buildOrUpdateScales(){const l=this.options,r=l.scales,a=this.scales,u=Object.keys(a).reduce((E,w)=>(E[w]=!1,E),{});let g=[];r&&(g=g.concat(Object.keys(r).map(E=>{const w=r[E],M=Zl(E,w),P="r"===M,J="x"===M;return{options:w,dposition:P?"chartArea":J?"bottom":"left",dtype:P?"radialLinear":J?"category":"linear"}}))),st(g,E=>{const w=E.options,M=w.id,P=Zl(M,w),J=Rt(w.type,E.dtype);(void 0===w.position||Zc(w.position,P)!==Zc(E.dposition))&&(w.position=E.dposition),u[M]=!0;let ut=null;M in a&&a[M].type===J?ut=a[M]:(ut=new(Ls.getScale(J))({id:M,type:J,ctx:this.ctx,chart:this}),a[ut.id]=ut),ut.init(w,l)}),st(u,(E,w)=>{E||delete a[w]}),st(a,E=>{ls.configure(this,E,E.options),ls.addBox(this,E)})}_updateMetasets(){const l=this._metasets,r=this.data.datasets.length,a=l.length;if(l.sort((u,g)=>u.index-g.index),a>r){for(let u=r;u<a;++u)this._destroyDatasetMeta(u);l.splice(r,a-r)}this._sortedMetasets=l.slice(0).sort(Pa("order","index"))}_removeUnreferencedMetasets(){const{_metasets:l,data:{datasets:r}}=this;l.length>r.length&&delete this._stacks,l.forEach((a,u)=>{0===r.filter(g=>g===a._dataset).length&&this._destroyDatasetMeta(u)})}buildOrUpdateControllers(){const l=[],r=this.data.datasets;let a,u;for(this._removeUnreferencedMetasets(),a=0,u=r.length;a<u;a++){const g=r[a];let E=this.getDatasetMeta(a);const w=g.type||this.config.type;if(E.type&&E.type!==w&&(this._destroyDatasetMeta(a),E=this.getDatasetMeta(a)),E.type=w,E.indexAxis=g.indexAxis||Na(w,this.options),E.order=g.order||0,E.index=a,E.label=""+g.label,E.visible=this.isDatasetVisible(a),E.controller)E.controller.updateIndex(a),E.controller.linkScales();else{const M=Ls.getController(w),{datasetElementType:P,dataElementType:J}=En.datasets[w];Object.assign(M.prototype,{dataElementType:Ls.getElement(J),datasetElementType:P&&Ls.getElement(P)}),E.controller=new M(this,a),l.push(E.controller)}}return this._updateMetasets(),l}_resetElements(){st(this.data.datasets,(l,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(l){const r=this.config;r.update();const a=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),u=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:l,cancelable:!0}))return;const g=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let E=0;for(let w=0,M=this.data.datasets.length;w<M;w++){const{controller:P}=this.getDatasetMeta(w),J=!u&&-1===g.indexOf(P);P.buildOrUpdateElements(J),E=Math.max(+P.getMaxOverflow(),E)}E=this._minPadding=a.layout.autoPadding?E:0,this._updateLayout(E),u||st(g,w=>{w.reset()}),this._updateDatasets(l),this.notifyPlugins("afterUpdate",{mode:l}),this._layers.sort(Pa("z","_idx")),this._lastEvent&&this._eventHandler(this._lastEvent,!0),this.render()}_updateScales(){st(this.scales,l=>{ls.removeBox(this,l)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const l=this.options,r=new Set(Object.keys(this._listeners)),a=new Set(l.events);(!Ke(r,a)||!!this._responsiveListeners!==l.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:l}=this,r=this._getUniformDataChanges()||[];for(const{method:a,start:u,count:g}of r)Ft(l,u,"_removeElements"===a?-g:g)}_getUniformDataChanges(){const l=this._dataChanges;if(!l||!l.length)return;this._dataChanges=[];const r=this.data.datasets.length,a=g=>new Set(l.filter(E=>E[0]===g).map((E,w)=>w+","+E.splice(1).join(","))),u=a(0);for(let g=1;g<r;g++)if(!Ke(u,a(g)))return;return Array.from(u).map(g=>g.split(",")).map(g=>({method:g[1],start:+g[2],count:+g[3]}))}_updateLayout(l){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;ls.update(this,this.width,this.height,l);const r=this.chartArea,a=r.width<=0||r.height<=0;this._layers=[],st(this.boxes,u=>{a&&"chartArea"===u.position||(u.configure&&u.configure(),this._layers.push(...u._layers()))},this),this._layers.forEach((u,g)=>{u._idx=g}),this.notifyPlugins("afterLayout")}_updateDatasets(l){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:l,cancelable:!0})){for(let r=0,a=this.data.datasets.length;r<a;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,a=this.data.datasets.length;r<a;++r)this._updateDataset(r,ui(l)?l({datasetIndex:r}):l);this.notifyPlugins("afterDatasetsUpdate",{mode:l})}}_updateDataset(l,r){const a=this.getDatasetMeta(l),u={meta:a,index:l,mode:r,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",u)&&(a.controller._update(r),u.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",u))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(ji.has(this)?this.attached&&!ji.running(this)&&ji.start(this):(this.draw(),xu({chart:this})))}draw(){let l;if(this._resizeBeforeDraw){const{width:a,height:u}=this._resizeBeforeDraw;this._resize(a,u),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const r=this._layers;for(l=0;l<r.length&&r[l].z<=0;++l)r[l].draw(this.chartArea);for(this._drawDatasets();l<r.length;++l)r[l].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(l){const r=this._sortedMetasets,a=[];let u,g;for(u=0,g=r.length;u<g;++u){const E=r[u];(!l||E.visible)&&a.push(E)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const l=this.getSortedVisibleDatasetMetas();for(let r=l.length-1;r>=0;--r)this._drawDataset(l[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(l){const r=this.ctx,a=l._clip,u=!a.disabled,g=this.chartArea,E={meta:l,index:l.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",E)&&(u&&oo(r,{left:!1===a.left?0:g.left-a.left,right:!1===a.right?this.width:g.right+a.right,top:!1===a.top?0:g.top-a.top,bottom:!1===a.bottom?this.height:g.bottom+a.bottom}),l.controller.draw(),u&&xo(r),E.cancelable=!1,this.notifyPlugins("afterDatasetDraw",E))}getElementsAtEventForMode(l,r,a,u){const g=Os.modes[r];return"function"==typeof g?g(this,l,a,u):[]}getDatasetMeta(l){const r=this.data.datasets[l],a=this._metasets;let u=a.filter(g=>g&&g._dataset===r).pop();return u||(u={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:l,_dataset:r,_parsed:[],_sorted:!1},a.push(u)),u}getContext(){return this.$context||(this.$context=ir(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(l){const r=this.data.datasets[l];if(!r)return!1;const a=this.getDatasetMeta(l);return"boolean"==typeof a.hidden?!a.hidden:!r.hidden}setDatasetVisibility(l,r){this.getDatasetMeta(l).hidden=!r}toggleDataVisibility(l){this._hiddenIndices[l]=!this._hiddenIndices[l]}getDataVisibility(l){return!this._hiddenIndices[l]}_updateVisibility(l,r,a){const u=a?"show":"hide",g=this.getDatasetMeta(l),E=g.controller._resolveAnimations(void 0,u);Ve(r)?(g.data[r].hidden=!a,this.update()):(this.setDatasetVisibility(l,a),E.update(g,{visible:a}),this.update(w=>w.datasetIndex===l?u:void 0))}hide(l,r){this._updateVisibility(l,r,!1)}show(l,r){this._updateVisibility(l,r,!0)}_destroyDatasetMeta(l){const r=this._metasets[l];r&&r.controller&&r.controller._destroy(),delete this._metasets[l]}_stop(){let l,r;for(this.stop(),ji.remove(this),l=0,r=this.data.datasets.length;l<r;++l)this._destroyDatasetMeta(l)}destroy(){const{canvas:l,ctx:r}=this;this._stop(),this.config.clearCache(),l&&(this.unbindEvents(),sa(l,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete pt[this.id]}toBase64Image(...l){return this.canvas.toDataURL(...l)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const l=this._listeners,r=this.platform,a=(g,E)=>{r.addEventListener(this,g,E),l[g]=E},u=(g,E,w)=>{g.offsetX=E,g.offsetY=w,this._eventHandler(g)};st(this.options.events,g=>a(g,u))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const l=this._responsiveListeners,r=this.platform,a=(M,P)=>{r.addEventListener(this,M,P),l[M]=P},u=(M,P)=>{l[M]&&(r.removeEventListener(this,M,P),delete l[M])},g=(M,P)=>{this.canvas&&this.resize(M,P)};let E;const w=()=>{u("attach",w),this.attached=!0,this.resize(),a("resize",g),a("detach",E)};E=()=>{this.attached=!1,u("resize",g),this._stop(),this._resize(0,0),a("attach",w)},r.isAttached(this.canvas)?w():E()}unbindEvents(){st(this._listeners,(l,r)=>{this.platform.removeEventListener(this,r,l)}),this._listeners={},st(this._responsiveListeners,(l,r)=>{this.platform.removeEventListener(this,r,l)}),this._responsiveListeners=void 0}updateHoverStyle(l,r,a){const u=a?"set":"remove";let g,E,w,M;for("dataset"===r&&(g=this.getDatasetMeta(l[0].datasetIndex),g.controller["_"+u+"DatasetHoverStyle"]()),w=0,M=l.length;w<M;++w){E=l[w];const P=E&&this.getDatasetMeta(E.datasetIndex).controller;P&&P[u+"HoverStyle"](E.element,E.datasetIndex,E.index)}}getActiveElements(){return this._active||[]}setActiveElements(l){const r=this._active||[],a=l.map(({datasetIndex:g,index:E})=>{const w=this.getDatasetMeta(g);if(!w)throw new Error("No dataset found at index "+g);return{datasetIndex:g,element:w.data[E],index:E}});!Gt(a,r)&&(this._active=a,this._updateHoverStyles(a,r))}notifyPlugins(l,r,a){return this._plugins.notify(this,l,r,a)}_updateHoverStyles(l,r,a){const u=this.options.hover,g=(M,P)=>M.filter(J=>!P.some(ut=>J.datasetIndex===ut.datasetIndex&&J.index===ut.index)),E=g(r,l),w=a?l:g(l,r);E.length&&this.updateHoverStyle(E,u.mode,!1),w.length&&u.mode&&this.updateHoverStyle(w,u.mode,!0)}_eventHandler(l,r){const a={event:l,replay:r,cancelable:!0},u=E=>(E.options.events||this.options.events).includes(l.native.type);if(!1===this.notifyPlugins("beforeEvent",a,u))return;const g=this._handleEvent(l,r);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,u),(g||a.changed)&&this.render(),this}_handleEvent(l,r){const{_active:a=[],options:u}=this,g=u.hover;let w=[],M=!1,P=null;return"mouseout"!==l.type&&(w=this.getElementsAtEventForMode(l,g.mode,g,r),P="click"===l.type?this._lastEvent:l),this._lastEvent=null,_r(l,this.chartArea,this._minPadding)&&(nt(u.onHover,[l,w,this],this),("mouseup"===l.type||"click"===l.type||"contextmenu"===l.type)&&nt(u.onClick,[l,w,this],this)),M=!Gt(w,a),(M||r)&&(this._active=w,this._updateHoverStyles(w,a,r)),this._lastEvent=P,M}}const _e=()=>st(ne.instances,_=>_._plugins.invalidate()),We=!0;function Se(_,l,r){const{startAngle:a,pixelMargin:u,x:g,y:E,outerRadius:w,innerRadius:M}=l;let P=u/w;_.beginPath(),_.arc(g,E,w,a-P,r+P),M>u?(P=u/M,_.arc(g,E,M,r+P,a-P,!0)):_.arc(g,E,u,r+ie,a-ie),_.closePath(),_.clip()}function gi(_,l,r,a){return{x:r+_*Math.cos(l),y:a+_*Math.sin(l)}}function Ti(_,l,r,a,u){const{x:g,y:E,startAngle:w,pixelMargin:M,innerRadius:P}=l,J=Math.max(l.outerRadius+a+r-M,0),ut=P>0?P+a+r+M:0;let Dt=0;const Lt=u-w;if(a){const co=((P>0?P-a:0)+(J>0?J-a:0))/2;Dt=(Lt-(0!==co?Lt*co/(co+a):Lt))/2}const de=(Lt-Math.max(.001,Lt*J-r/be)/J)/2,ye=w+de+Dt,De=u-de-Dt,{outerStart:ai,outerEnd:xi,innerStart:Ri,innerEnd:Si}=function(_,l,r,a){const u=function(_){return $s(_,["outerStart","outerEnd","innerStart","innerEnd"])}(_.options.borderRadius),g=(r-l)/2,E=Math.min(g,a*l/2),w=M=>{const P=(r-Math.min(g,M))*a/2;return ei(M,0,Math.min(g,P))};return{outerStart:w(u.outerStart),outerEnd:w(u.outerEnd),innerStart:ei(u.innerStart,0,E),innerEnd:ei(u.innerEnd,0,E)}}(l,ut,J,De-ye),Ui=J-ai,Wi=J-xi,qi=ye+ai/Ui,an=De-xi/Wi,zn=ut+Ri,tn=ut+Si,Vn=ye+Ri/zn,Bo=De-Si/tn;if(_.beginPath(),_.arc(g,E,J,qi,an),xi>0){const In=gi(Wi,an,g,E);_.arc(In.x,In.y,xi,an,De+ie)}const zi=gi(tn,De,g,E);if(_.lineTo(zi.x,zi.y),Si>0){const In=gi(tn,Bo,g,E);_.arc(In.x,In.y,Si,De+ie,Bo+Math.PI)}if(_.arc(g,E,ut,De-Si/ut,ye+Ri/ut,!0),Ri>0){const In=gi(zn,Vn,g,E);_.arc(In.x,In.y,Ri,Vn+Math.PI,ye-ie)}const Yi=gi(Ui,ye,g,E);if(_.lineTo(Yi.x,Yi.y),ai>0){const In=gi(Ui,qi,g,E);_.arc(In.x,In.y,ai,ye-ie,qi)}_.closePath()}Object.defineProperties(ne,{defaults:{enumerable:We,value:En},instances:{enumerable:We,value:pt},overrides:{enumerable:We,value:un},registry:{enumerable:We,value:Ls},version:{enumerable:We,value:"3.6.2"},getChart:{enumerable:We,value:Tt},register:{enumerable:We,value:(..._)=>{Ls.add(..._),_e()}},unregister:{enumerable:We,value:(..._)=>{Ls.remove(..._),_e()}}});class Xo extends $r{constructor(l){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,l&&Object.assign(this,l)}inRange(l,r,a){const u=this.getProps(["x","y"],a),{angle:g,distance:E}=function(_,l){const r=l.x-_.x,a=l.y-_.y,u=Math.sqrt(r*r+a*a);let g=Math.atan2(a,r);return g<-.5*be&&(g+=Xt),{angle:g,distance:u}}(u,{x:l,y:r}),{startAngle:w,endAngle:M,innerRadius:P,outerRadius:J,circumference:ut}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),Dt=this.options.spacing/2,Qt=Rt(ut,M-w)>=Xt||$e(g,w,M),de=Pe(E,P+Dt,J+Dt);return Qt&&de}getCenterPoint(l){const{x:r,y:a,startAngle:u,endAngle:g,innerRadius:E,outerRadius:w}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],l),{offset:M,spacing:P}=this.options,J=(u+g)/2,ut=(E+w+P+M)/2;return{x:r+Math.cos(J)*ut,y:a+Math.sin(J)*ut}}tooltipPosition(l){return this.getCenterPoint(l)}draw(l){const{options:r,circumference:a}=this,u=(r.offset||0)/2,g=(r.spacing||0)/2;if(this.pixelMargin="inner"===r.borderAlign?.33:0,this.fullCircles=a>Xt?Math.floor(a/Xt):0,0===a||this.innerRadius<0||this.outerRadius<0)return;l.save();let E=0;if(u){E=u/2;const M=(this.startAngle+this.endAngle)/2;l.translate(Math.cos(M)*E,Math.sin(M)*E),this.circumference>=be&&(E=u)}l.fillStyle=r.backgroundColor,l.strokeStyle=r.borderColor;const w=function(_,l,r,a){const{fullCircles:u,startAngle:g,circumference:E}=l;let w=l.endAngle;if(u){Ti(_,l,r,a,g+Xt);for(let M=0;M<u;++M)_.fill();isNaN(E)||(w=g+E%Xt,E%Xt==0&&(w+=Xt))}return Ti(_,l,r,a,w),_.fill(),w}(l,this,E,g);(function(_,l,r,a,u){const{options:g}=l,E="inner"===g.borderAlign;!g.borderWidth||(E?(_.lineWidth=2*g.borderWidth,_.lineJoin="round"):(_.lineWidth=g.borderWidth,_.lineJoin="bevel"),l.fullCircles&&function(_,l,r){const{x:a,y:u,startAngle:g,pixelMargin:E,fullCircles:w}=l,M=Math.max(l.outerRadius-E,0),P=l.innerRadius+E;let J;for(r&&Se(_,l,g+Xt),_.beginPath(),_.arc(a,u,P,g+Xt,g,!0),J=0;J<w;++J)_.stroke();for(_.beginPath(),_.arc(a,u,M,g,g+Xt),J=0;J<w;++J)_.stroke()}(_,l,E),E&&Se(_,l,u),Ti(_,l,r,a,u),_.stroke())})(l,this,E,g,w),l.restore()}}function To(_,l,r=l){_.lineCap=Rt(r.borderCapStyle,l.borderCapStyle),_.setLineDash(Rt(r.borderDash,l.borderDash)),_.lineDashOffset=Rt(r.borderDashOffset,l.borderDashOffset),_.lineJoin=Rt(r.borderJoinStyle,l.borderJoinStyle),_.lineWidth=Rt(r.borderWidth,l.borderWidth),_.strokeStyle=Rt(r.borderColor,l.borderColor)}function fo(_,l,r){_.lineTo(r.x,r.y)}function qo(_,l,r={}){const a=_.length,{start:u=0,end:g=a-1}=r,{start:E,end:w}=l,M=Math.max(u,E),P=Math.min(g,w);return{count:a,start:M,loop:l.loop,ilen:P<M&&!(u<E&&g<E||u>w&&g>w)?a+P-M:P-M}}function So(_,l,r,a){const{points:u,options:g}=l,{count:E,start:w,loop:M,ilen:P}=qo(u,r,a),J=function(_){return _.stepped?us:_.tension||"monotone"===_.cubicInterpolationMode?Js:fo}(g);let Lt,Qt,de,{move:ut=!0,reverse:Dt}=a||{};for(Lt=0;Lt<=P;++Lt)Qt=u[(w+(Dt?P-Lt:Lt))%E],!Qt.skip&&(ut?(_.moveTo(Qt.x,Qt.y),ut=!1):J(_,de,Qt,Dt,g.stepped),de=Qt);return M&&(Qt=u[(w+(Dt?P:0))%E],J(_,de,Qt,Dt,g.stepped)),!!M}function cs(_,l,r,a){const u=l.points,{count:g,start:E,ilen:w}=qo(u,r,a),{move:M=!0,reverse:P}=a||{};let Dt,Lt,Qt,de,ye,De,J=0,ut=0;const ai=Ri=>(E+(P?w-Ri:Ri))%g,xi=()=>{de!==ye&&(_.lineTo(J,ye),_.lineTo(J,de),_.lineTo(J,De))};for(M&&(Lt=u[ai(0)],_.moveTo(Lt.x,Lt.y)),Dt=0;Dt<=w;++Dt){if(Lt=u[ai(Dt)],Lt.skip)continue;const Ri=Lt.x,Si=Lt.y,Ui=0|Ri;Ui===Qt?(Si<de?de=Si:Si>ye&&(ye=Si),J=(ut*J+Ri)/++ut):(xi(),_.lineTo(Ri,Si),Qt=Ui,ut=0,de=ye=Si),De=Si}xi()}function Br(_){const l=_.options;return _._decimated||_._loop||l.tension||"monotone"===l.cubicInterpolationMode||l.stepped||l.borderDash&&l.borderDash.length?So:cs}Xo.id="arc",Xo.defaults={borderAlign:"center",borderColor:"#fff",borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Xo.defaultRoutes={backgroundColor:"backgroundColor"};const Hp="function"==typeof Path2D;let ql=(()=>{class _ extends $r{constructor(r){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,r&&Object.assign(this,r)}updateControlPoints(r,a){const u=this.options;!u.tension&&"monotone"!==u.cubicInterpolationMode||u.stepped||this._pointsUpdated||(fs(this._points,u,r,u.spanGaps?this._loop:this._fullLoop,a),this._pointsUpdated=!0)}set points(r){this._points=r,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(_,l){const r=_.points,a=_.options.spanGaps,u=r.length;if(!u)return[];const g=!!_._loop,{start:E,end:w}=function(_,l,r,a){let u=0,g=l-1;if(r&&!a)for(;u<l&&!_[u].skip;)u++;for(;u<l&&_[u].skip;)u++;for(u%=l,r&&(g+=u);g>u&&_[g%l].skip;)g--;return g%=l,{start:u,end:g}}(r,u,g,a);return function(_,l,r,a){return a&&a.setContext&&r?function(_,l,r,a){const u=_._chart.getContext(),g=os(_.options),{_datasetIndex:E,options:{spanGaps:w}}=_,M=r.length,P=[];let J=g,ut=l[0].start,Dt=ut;function Lt(Qt,de,ye,De){const ai=w?-1:1;if(Qt!==de){for(Qt+=M;r[Qt%M].skip;)Qt-=ai;for(;r[de%M].skip;)de+=ai;Qt%M!=de%M&&(P.push({start:Qt%M,end:de%M,loop:ye,style:De}),J=De,ut=de%M)}}for(const Qt of l){ut=w?ut:Qt.start;let ye,de=r[ut%M];for(Dt=ut+1;Dt<=Qt.end;Dt++){const De=r[Dt%M];ye=os(a.setContext(ir(u,{type:"segment",p0:de,p1:De,p0DataIndex:(Dt-1)%M,p1DataIndex:Dt%M,datasetIndex:E}))),ya(ye,J)&&Lt(ut,Dt-1,Qt.loop,J),de=De,J=ye}ut<Dt-1&&Lt(ut,Dt-1,Qt.loop,J)}return P}(_,l,r,a):l}(_,!0===a?[{start:E,end:w,loop:g}]:function(_,l,r,a){const u=_.length,g=[];let M,E=l,w=_[l];for(M=l+1;M<=r;++M){const P=_[M%u];P.skip||P.stop?w.skip||(g.push({start:l%u,end:(M-1)%u,loop:a=!1}),l=E=P.stop?M:null):(E=M,w.skip&&(l=M)),w=P}return null!==E&&g.push({start:l%u,end:E%u,loop:a}),g}(r,E,w<E?w+u:w,!!_._fullLoop&&0===E&&w===u-1),r,l)}(this,this.options.segment))}first(){const r=this.segments;return r.length&&this.points[r[0].start]}last(){const r=this.segments,u=r.length;return u&&this.points[r[u-1].end]}interpolate(r,a){const u=this.options,g=r[a],E=this.points,w=jo(this,{property:a,start:g,end:g});if(!w.length)return;const M=[],P=function(_){return _.stepped?Ei:_.tension||"monotone"===_.cubicInterpolationMode?Ni:qe}(u);let J,ut;for(J=0,ut=w.length;J<ut;++J){const{start:Dt,end:Lt}=w[J],Qt=E[Dt],de=E[Lt];if(Qt===de){M.push(Qt);continue}const De=P(Qt,de,Math.abs((g-Qt[a])/(de[a]-Qt[a])),u.stepped);De[a]=r[a],M.push(De)}return 1===M.length?M[0]:M}pathSegment(r,a,u){return Br(this)(r,this,a,u)}path(r,a,u){const g=this.segments,E=Br(this);let w=this._loop;a=a||0,u=u||this.points.length-a;for(const M of g)w&=E(r,this,M,{start:a,end:a+u-1});return!!w}draw(r,a,u,g){(this.points||[]).length&&(this.options||{}).borderWidth&&(r.save(),function(_,l,r,a){Hp&&!l.options.segment?function(_,l,r,a){let u=l._path;u||(u=l._path=new Path2D,l.path(u,r,a)&&u.closePath()),To(_,l.options),_.stroke(u)}(_,l,r,a):function(_,l,r,a){const{segments:u,options:g}=l,E=Br(l);for(const w of u)To(_,g,w.style),_.beginPath(),E(_,l,w,{start:r,end:r+a-1})&&_.closePath(),_.stroke()}(_,l,r,a)}(r,this,u,g),r.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return _.id="line",_.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},_.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},_.descriptors={_scriptable:!0,_indexable:l=>"borderDash"!==l&&"fill"!==l},_})();function Lu(_,l,r,a){const u=_.options,{[r]:g}=_.getProps([r],a);return Math.abs(l-g)<u.radius+u.hitRadius}let Nu=(()=>{class _ extends $r{constructor(r){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,a,u){const g=this.options,{x:E,y:w}=this.getProps(["x","y"],u);return Math.pow(r-E,2)+Math.pow(a-w,2)<Math.pow(g.hitRadius+g.radius,2)}inXRange(r,a){return Lu(this,r,"x",a)}inYRange(r,a){return Lu(this,r,"y",a)}getCenterPoint(r){const{x:a,y:u}=this.getProps(["x","y"],r);return{x:a,y:u}}size(r){let a=(r=r||this.options||{}).radius||0;return a=Math.max(a,a&&r.hoverRadius||0),2*(a+(a&&r.borderWidth||0))}draw(r,a){const u=this.options;this.skip||u.radius<.1||!_r(this,a,this.size(u)/2)||(r.strokeStyle=u.borderColor,r.lineWidth=u.borderWidth,r.fillStyle=u.backgroundColor,Lo(r,u,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}return _.id="point",_.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},_.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},_})();function hh(_,l){const{x:r,y:a,base:u,width:g,height:E}=_.getProps(["x","y","base","width","height"],l);let w,M,P,J,ut;return _.horizontal?(ut=E/2,w=Math.min(r,u),M=Math.max(r,u),P=a-ut,J=a+ut):(ut=g/2,w=r-ut,M=r+ut,P=Math.min(a,u),J=Math.max(a,u)),{left:w,top:P,right:M,bottom:J}}function Ja(_,l,r,a){return _?0:ei(l,r,a)}function ph(_,l,r,a){const u=null===l,g=null===r,w=_&&!(u&&g)&&hh(_,a);return w&&(u||Pe(l,w.left,w.right))&&(g||Pe(r,w.top,w.bottom))}function Fu(_,l){_.rect(l.x,l.y,l.w,l.h)}function tc(_,l,r={}){const a=_.x!==r.x?-l:0,u=_.y!==r.y?-l:0;return{x:_.x+a,y:_.y+u,w:_.w+((_.x+_.w!==r.x+r.w?l:0)-a),h:_.h+((_.y+_.h!==r.y+r.h?l:0)-u),radius:_.radius}}class Rc extends $r{constructor(l){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,l&&Object.assign(this,l)}draw(l){const{inflateAmount:r,options:{borderColor:a,backgroundColor:u}}=this,{inner:g,outer:E}=function(_){const l=hh(_),r=l.right-l.left,a=l.bottom-l.top,u=function(_,l,r){const u=_.borderSkipped,g=Zs(_.options.borderWidth);return{t:Ja(u.top,g.top,0,r),r:Ja(u.right,g.right,0,l),b:Ja(u.bottom,g.bottom,0,r),l:Ja(u.left,g.left,0,l)}}(_,r/2,a/2),g=function(_,l,r){const{enableBorderRadius:a}=_.getProps(["enableBorderRadius"]),u=_.options.borderRadius,g=Zo(u),E=Math.min(l,r),w=_.borderSkipped,M=a||at(u);return{topLeft:Ja(!M||w.top||w.left,g.topLeft,0,E),topRight:Ja(!M||w.top||w.right,g.topRight,0,E),bottomLeft:Ja(!M||w.bottom||w.left,g.bottomLeft,0,E),bottomRight:Ja(!M||w.bottom||w.right,g.bottomRight,0,E)}}(_,r/2,a/2);return{outer:{x:l.left,y:l.top,w:r,h:a,radius:g},inner:{x:l.left+u.l,y:l.top+u.t,w:r-u.l-u.r,h:a-u.t-u.b,radius:{topLeft:Math.max(0,g.topLeft-Math.max(u.t,u.l)),topRight:Math.max(0,g.topRight-Math.max(u.t,u.r)),bottomLeft:Math.max(0,g.bottomLeft-Math.max(u.b,u.l)),bottomRight:Math.max(0,g.bottomRight-Math.max(u.b,u.r))}}}}(this),w=(_=E.radius).topLeft||_.topRight||_.bottomLeft||_.bottomRight?ds:Fu;var _;l.save(),(E.w!==g.w||E.h!==g.h)&&(l.beginPath(),w(l,tc(E,r,g)),l.clip(),w(l,tc(g,-r,E)),l.fillStyle=a,l.fill("evenodd")),l.beginPath(),w(l,tc(g,r)),l.fillStyle=u,l.fill(),l.restore()}inRange(l,r,a){return ph(this,l,r,a)}inXRange(l,r){return ph(this,l,null,r)}inYRange(l,r){return ph(this,null,l,r)}getCenterPoint(l){const{x:r,y:a,base:u,horizontal:g}=this.getProps(["x","y","base","horizontal"],l);return{x:g?(r+u)/2:r,y:g?a:(a+u)/2}}getRange(l){return"x"===l?this.width/2:this.height/2}}Rc.id="bar",Rc.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Rc.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Bu=Object.freeze({__proto__:null,ArcElement:Xo,LineElement:ql,PointElement:Nu,BarElement:Rc});function Wh(_){if(_._decimated){const l=_._data;delete _._decimated,delete _._data,Object.defineProperty(_,"data",{value:l})}}function jh(_){_.data.datasets.forEach(l=>{Wh(l)})}var zh={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(_,l,r)=>{if(!r.enabled)return void jh(_);const a=_.width;_.data.datasets.forEach((u,g)=>{const{_data:E,indexAxis:w}=u,M=_.getDatasetMeta(g),P=E||u.data;if("y"===lr([w,_.options.indexAxis])||"line"!==M.type)return;const J=_.scales[M.xAxisID];if("linear"!==J.type&&"time"!==J.type||_.options.parsing)return;let Qt,{start:ut,count:Dt}=function(_,l){const r=l.length;let u,a=0;const{iScale:g}=_,{min:E,max:w,minDefined:M,maxDefined:P}=g.getUserBounds();return M&&(a=ei(No(l,g.axis,E).lo,0,r-1)),u=P?ei(No(l,g.axis,w).hi+1,a,r)-a:r-a,{start:a,count:u}}(M,P);if(Dt<=(r.threshold||4*a))Wh(u);else{switch(yt(E)&&(u._data=P,delete u.data,Object.defineProperty(u,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(de){this._data=de}})),r.algorithm){case"lttb":Qt=function(_,l,r,a,u){const g=u.samples||a;if(g>=r)return _.slice(l,l+r);const E=[],w=(r-2)/(g-2);let M=0;const P=l+r-1;let ut,Dt,Lt,Qt,de,J=l;for(E[M++]=_[J],ut=0;ut<g-2;ut++){let ai,ye=0,De=0;const xi=Math.floor((ut+1)*w)+1+l,Ri=Math.min(Math.floor((ut+2)*w)+1,r)+l,Si=Ri-xi;for(ai=xi;ai<Ri;ai++)ye+=_[ai].x,De+=_[ai].y;ye/=Si,De/=Si;const Ui=Math.floor(ut*w)+1+l,Wi=Math.min(Math.floor((ut+1)*w)+1,r)+l,{x:qi,y:an}=_[J];for(Lt=Qt=-1,ai=Ui;ai<Wi;ai++)Qt=.5*Math.abs((qi-ye)*(_[ai].y-an)-(qi-_[ai].x)*(De-an)),Qt>Lt&&(Lt=Qt,Dt=_[ai],de=ai);E[M++]=Dt,J=de}return E[M++]=_[P],E}(P,ut,Dt,a,r);break;case"min-max":Qt=function(_,l,r,a){let E,w,M,P,J,ut,Dt,Lt,Qt,de,u=0,g=0;const ye=[],ai=_[l].x,Ri=_[l+r-1].x-ai;for(E=l;E<l+r;++E){w=_[E],M=(w.x-ai)/Ri*a,P=w.y;const Si=0|M;if(Si===J)P<Qt?(Qt=P,ut=E):P>de&&(de=P,Dt=E),u=(g*u+w.x)/++g;else{const Ui=E-1;if(!yt(ut)&&!yt(Dt)){const Wi=Math.min(ut,Dt),qi=Math.max(ut,Dt);Wi!==Lt&&Wi!==Ui&&ye.push(Wm(Gm({},_[Wi]),{x:u})),qi!==Lt&&qi!==Ui&&ye.push(Wm(Gm({},_[qi]),{x:u}))}E>0&&Ui!==Lt&&ye.push(_[Ui]),ye.push(w),J=Si,g=0,Qt=de=P,ut=Dt=Lt=E}}return ye}(P,ut,Dt,a);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`)}u._decimated=Qt}})},destroy(_){jh(_)}};function Xh(_,l,r){const a=function(_){const l=_.options,r=l.fill;let a=Rt(r&&r.target,r);return void 0===a&&(a=!!l.backgroundColor),!1!==a&&null!==a&&(!0===a?"origin":a)}(_);if(at(a))return!isNaN(a.value)&&a;let u=parseFloat(a);return bt(u)&&Math.floor(u)===u?(("-"===a[0]||"+"===a[0])&&(u=l+u),!(u===l||u<0||u>=r)&&u):["origin","start","end","stack","shape"].indexOf(a)>=0&&a}class qc{constructor(l){this.x=l.x,this.y=l.y,this.radius=l.radius}pathSegment(l,r,a){const{x:u,y:g,radius:E}=this;return l.arc(u,g,E,(r=r||{start:0,end:Xt}).end,r.start,!0),!a.bounds}interpolate(l){const{x:r,y:a,radius:u}=this,g=l.angle;return{x:r+Math.cos(g)*u,y:a+Math.sin(g)*u,angle:g}}}function ec(_,l,r){for(;l>_;l--){const a=r[l];if(!isNaN(a.x)&&!isNaN(a.y))break}return l}function Jh(_,l,r){const a=[];for(let u=0;u<r.length;u++){const g=r[u],{first:E,last:w,point:M}=bs(g,l,"x");if(!(!M||E&&w))if(E)a.unshift(M);else if(_.push(M),!w)break}_.push(...a)}function bs(_,l,r){const a=_.interpolate(l,r);if(!a)return{};const u=a[r],g=_.segments,E=_.points;let w=!1,M=!1;for(let P=0;P<g.length;P++){const J=g[P],ut=E[J.start][r],Dt=E[J.end][r];if(Pe(u,ut,Dt)){w=u===ut,M=u===Dt;break}}return{first:w,last:M,point:a}}function Dc(_){const{chart:l,fill:r,line:a}=_;if(bt(r))return function(_,l){const r=_.getDatasetMeta(l);return r&&_.isDatasetVisible(l)?r.dataset:null}(l,r);if("stack"===r)return function(_){const{scale:l,index:r,line:a}=_,u=[],g=a.segments,E=a.points,w=function(_,l){const r=[],a=_.getMatchingVisibleMetas("line");for(let u=0;u<a.length;u++){const g=a[u];if(g.index===l)break;g.hidden||r.unshift(g.dataset)}return r}(l,r);w.push(eu({x:null,y:l.bottom},a));for(let M=0;M<g.length;M++){const P=g[M];for(let J=P.start;J<=P.end;J++)Jh(u,E[J],w)}return new ql({points:u,options:{}})}(_);if("shape"===r)return!0;const u=function(_){return(_.scale||{}).getPointPositionForValue?function(_){const{scale:l,fill:r}=_,a=l.options,u=l.getLabels().length,g=[],E=a.reverse?l.max:l.min;let M,P,J;if(J="start"===r?E:"end"===r?a.reverse?l.min:l.max:at(r)?r.value:l.getBaseValue(),a.grid.circular)return P=l.getPointPositionForValue(0,E),new qc({x:P.x,y:P.y,radius:l.getDistanceFromCenterForValue(J)});for(M=0;M<u;++M)g.push(l.getPointPositionForValue(M,J));return g}(_):function(_){const{scale:l={},fill:r}=_;let u,a=null;return"start"===r?a=l.bottom:"end"===r?a=l.top:at(r)?a=l.getPixelForValue(r.value):l.getBasePixel&&(a=l.getBasePixel()),bt(a)?(u=l.isHorizontal(),{x:u?a:null,y:u?null:a}):null}(_)}(_);return u instanceof qc?u:eu(u,a)}function eu(_,l){let r=[],a=!1;return lt(_)?(a=!0,r=_):r=function(_,l){const{x:r=null,y:a=null}=_||{},u=l.points,g=[];return l.segments.forEach(({start:E,end:w})=>{w=ec(E,w,u);const M=u[E],P=u[w];null!==a?(g.push({x:M.x,y:a}),g.push({x:P.x,y:a})):null!==r&&(g.push({x:r,y:M.y}),g.push({x:r,y:P.y}))}),g}(_,l),r.length?new ql({points:r,options:{tension:0},_loop:a,_fullLoop:a}):null}function $h(_,l,r){let u=_[l].fill;const g=[l];let E;if(!r)return u;for(;!1!==u&&-1===g.indexOf(u);){if(!bt(u))return u;if(E=_[u],!E)return!1;if(E.visible)return u;g.push(u),u=E.fill}return!1}function Hd(_,l,r){_.beginPath(),l.path(_),_.lineTo(l.last().x,r),_.lineTo(l.first().x,r),_.closePath(),_.clip()}function ic(_,l,r,a){if(a)return;let u=l[_],g=r[_];return"angle"===_&&(u=yi(u),g=yi(g)),{property:_,start:u,end:g}}function Zh(_,l,r,a){return _&&l?a(_[r],l[r]):_?_[r]:l?l[r]:0}function Qh(_,l,r){const{top:a,bottom:u}=l.chart.chartArea,{property:g,start:E,end:w}=r||{};"x"===g&&(_.beginPath(),_.rect(E,a,w-E,u-a),_.clip())}function Ic(_,l,r,a){const u=l.interpolate(r,a);u&&_.lineTo(u.x,u.y)}function Vu(_,l){const{line:r,target:a,property:u,color:g,scale:E}=l,w=function(_,l,r){const a=_.segments,u=_.points,g=l.points,E=[];for(const w of a){let{start:M,end:P}=w;P=ec(M,P,u);const J=ic(r,u[M],u[P],w.loop);if(!l.segments){E.push({source:w,target:J,start:u[M],end:u[P]});continue}const ut=jo(l,J);for(const Dt of ut){const Lt=ic(r,g[Dt.start],g[Dt.end],Dt.loop),Qt=zr(w,u,Lt);for(const de of Qt)E.push({source:de,target:Dt,start:{[r]:Zh(J,Lt,"start",Math.max)},end:{[r]:Zh(J,Lt,"end",Math.min)}})}}return E}(r,a,u);for(const{source:M,target:P,start:J,end:ut}of w){const{style:{backgroundColor:Dt=g}={}}=M,Lt=!0!==a;_.save(),_.fillStyle=Dt,Qh(_,E,Lt&&ic(u,J,ut)),_.beginPath();const Qt=!!r.pathSegment(_,M);let de;if(Lt){Qt?_.closePath():Ic(_,a,ut,u);const ye=!!a.pathSegment(_,P,{move:Qt,reverse:!0});de=Qt&&ye,de||Ic(_,a,J,u)}_.closePath(),_.fill(de?"evenodd":"nonzero"),_.restore()}}function iu(_,l,r){const a=Dc(l),{line:u,scale:g,axis:E}=l,w=u.options,M=w.fill,P=w.backgroundColor,{above:J=P,below:ut=P}=M||{};a&&u.points.length&&(oo(_,r),function(_,l){const{line:r,target:a,above:u,below:g,area:E,scale:w}=l,M=r._loop?"angle":l.axis;_.save(),"x"===M&&g!==u&&(Hd(_,a,E.top),Vu(_,{line:r,target:a,color:u,scale:w,property:M}),_.restore(),_.save(),Hd(_,a,E.bottom)),Vu(_,{line:r,target:a,color:g,scale:w,property:M}),_.restore()}(_,{line:u,target:a,above:J,below:ut,area:r,scale:g,axis:E}),xo(_))}var Uu={id:"filler",afterDatasetsUpdate(_,l,r){const a=(_.data.datasets||[]).length,u=[];let g,E,w,M;for(E=0;E<a;++E)g=_.getDatasetMeta(E),w=g.dataset,M=null,w&&w.options&&w instanceof ql&&(M={visible:_.isDatasetVisible(E),index:E,fill:Xh(w,E,a),chart:_,axis:g.controller.options.indexAxis,scale:g.vScale,line:w}),g.$filler=M,u.push(M);for(E=0;E<a;++E)M=u[E],M&&!1!==M.fill&&(M.fill=$h(u,E,r.propagate))},beforeDraw(_,l,r){const a="beforeDraw"===r.drawTime,u=_.getSortedVisibleDatasetMetas(),g=_.chartArea;for(let E=u.length-1;E>=0;--E){const w=u[E].$filler;!w||(w.line.updateControlPoints(g,w.axis),a&&iu(_.ctx,w,g))}},beforeDatasetsDraw(_,l,r){if("beforeDatasetsDraw"!==r.drawTime)return;const a=_.getSortedVisibleDatasetMetas();for(let u=a.length-1;u>=0;--u){const g=a[u].$filler;g&&iu(_.ctx,g,_.chartArea)}},beforeDatasetDraw(_,l,r){const a=l.meta.$filler;!a||!1===a.fill||"beforeDatasetDraw"!==r.drawTime||iu(_.ctx,a,_.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Gu=(_,l)=>{let{boxHeight:r=l,boxWidth:a=l}=_;return _.usePointStyle&&(r=Math.min(r,l),a=Math.min(a,l)),{boxWidth:a,boxHeight:r,itemHeight:Math.max(l,r)}};class nc extends $r{constructor(l){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=l.chart,this.options=l.options,this.ctx=l.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(l,r,a){this.maxWidth=l,this.maxHeight=r,this._margins=a,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const l=this.options.labels||{};let r=nt(l.generateLabels,[this.chart],this)||[];l.filter&&(r=r.filter(a=>l.filter(a,this.chart.data))),l.sort&&(r=r.sort((a,u)=>l.sort(a,u,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:l,ctx:r}=this;if(!l.display)return void(this.width=this.height=0);const a=l.labels,u=ko(a.font),g=u.size,E=this._computeTitleHeight(),{boxWidth:w,itemHeight:M}=Gu(a,g);let P,J;r.font=u.string,this.isHorizontal()?(P=this.maxWidth,J=this._fitRows(E,g,w,M)+10):(J=this.maxHeight,P=this._fitCols(E,g,w,M)+10),this.width=Math.min(P,l.maxWidth||this.maxWidth),this.height=Math.min(J,l.maxHeight||this.maxHeight)}_fitRows(l,r,a,u){const{ctx:g,maxWidth:E,options:{labels:{padding:w}}}=this,M=this.legendHitBoxes=[],P=this.lineWidths=[0],J=u+w;let ut=l;g.textAlign="left",g.textBaseline="middle";let Dt=-1,Lt=-J;return this.legendItems.forEach((Qt,de)=>{const ye=a+r/2+g.measureText(Qt.text).width;(0===de||P[P.length-1]+ye+2*w>E)&&(ut+=J,P[P.length-(de>0?0:1)]=0,Lt+=J,Dt++),M[de]={left:0,top:Lt,row:Dt,width:ye,height:u},P[P.length-1]+=ye+w}),ut}_fitCols(l,r,a,u){const{ctx:g,maxHeight:E,options:{labels:{padding:w}}}=this,M=this.legendHitBoxes=[],P=this.columnSizes=[],J=E-l;let ut=w,Dt=0,Lt=0,Qt=0,de=0;return this.legendItems.forEach((ye,De)=>{const ai=a+r/2+g.measureText(ye.text).width;De>0&&Lt+u+2*w>J&&(ut+=Dt+w,P.push({width:Dt,height:Lt}),Qt+=Dt+w,de++,Dt=Lt=0),M[De]={left:Qt,top:Lt,col:de,width:ai,height:u},Dt=Math.max(Dt,ai),Lt+=u+w}),ut+=Dt,P.push({width:Dt,height:Lt}),ut}adjustHitBoxes(){if(!this.options.display)return;const l=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:a,labels:{padding:u},rtl:g}}=this,E=Cn(g,this.left,this.width);if(this.isHorizontal()){let w=0,M=it(a,this.left+u,this.right-this.lineWidths[w]);for(const P of r)w!==P.row&&(w=P.row,M=it(a,this.left+u,this.right-this.lineWidths[w])),P.top+=this.top+l+u,P.left=E.leftForLtr(E.x(M),P.width),M+=P.width+u}else{let w=0,M=it(a,this.top+l+u,this.bottom-this.columnSizes[w].height);for(const P of r)P.col!==w&&(w=P.col,M=it(a,this.top+l+u,this.bottom-this.columnSizes[w].height)),P.top=M,P.left+=this.left+u,P.left=E.leftForLtr(E.x(P.left),P.width),M+=P.height+u}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const l=this.ctx;oo(l,this),this._draw(),xo(l)}}_draw(){const{options:l,columnSizes:r,lineWidths:a,ctx:u}=this,{align:g,labels:E}=l,w=En.color,M=Cn(l.rtl,this.left,this.width),P=ko(E.font),{color:J,padding:ut}=E,Dt=P.size,Lt=Dt/2;let Qt;this.drawTitle(),u.textAlign=M.textAlign("left"),u.textBaseline="middle",u.lineWidth=.5,u.font=P.string;const{boxWidth:de,boxHeight:ye,itemHeight:De}=Gu(E,Dt),Ri=this.isHorizontal(),Si=this._computeTitleHeight();Qt=Ri?{x:it(g,this.left+ut,this.right-a[0]),y:this.top+ut+Si,line:0}:{x:this.left+ut,y:it(g,this.top+Si+ut,this.bottom-r[0].height),line:0},Qn(this.ctx,l.textDirection);const Ui=De+ut;this.legendItems.forEach((Wi,qi)=>{u.strokeStyle=Wi.fontColor||J,u.fillStyle=Wi.fontColor||J;const an=u.measureText(Wi.text).width,zn=M.textAlign(Wi.textAlign||(Wi.textAlign=E.textAlign)),tn=de+Lt+an;let Vn=Qt.x,Bo=Qt.y;M.setWidth(this.width),Ri?qi>0&&Vn+tn+ut>this.right&&(Bo=Qt.y+=Ui,Qt.line++,Vn=Qt.x=it(g,this.left+ut,this.right-a[Qt.line])):qi>0&&Bo+Ui>this.bottom&&(Vn=Qt.x=Vn+r[Qt.line].width+ut,Qt.line++,Bo=Qt.y=it(g,this.top+Si+ut,this.bottom-r[Qt.line].height)),function(Wi,qi,an){if(isNaN(de)||de<=0||isNaN(ye)||ye<0)return;u.save();const zn=Rt(an.lineWidth,1);if(u.fillStyle=Rt(an.fillStyle,w),u.lineCap=Rt(an.lineCap,"butt"),u.lineDashOffset=Rt(an.lineDashOffset,0),u.lineJoin=Rt(an.lineJoin,"miter"),u.lineWidth=zn,u.strokeStyle=Rt(an.strokeStyle,w),u.setLineDash(Rt(an.lineDash,[])),E.usePointStyle){const tn={radius:de*Math.SQRT2/2,pointStyle:an.pointStyle,rotation:an.rotation,borderWidth:zn},Vn=M.xPlus(Wi,de/2);Lo(u,tn,Vn,qi+Lt)}else{const tn=qi+Math.max((Dt-ye)/2,0),Vn=M.leftForLtr(Wi,de),Bo=Zo(an.borderRadius);u.beginPath(),Object.values(Bo).some(zi=>0!==zi)?ds(u,{x:Vn,y:tn,w:de,h:ye,radius:Bo}):u.rect(Vn,tn,de,ye),u.fill(),0!==zn&&u.stroke()}u.restore()}(M.x(Vn),Bo,Wi),Vn=((_,l,r,a)=>_===(a?"left":"right")?r:"center"===_?(l+r)/2:l)(zn,Vn+de+Lt,Ri?Vn+tn:this.right,l.rtl),function(Wi,qi,an){Gr(u,an.text,Wi,qi+De/2,P,{strikethrough:an.hidden,textAlign:M.textAlign(an.textAlign)})}(M.x(Vn),Bo,Wi),Ri?Qt.x+=tn+ut:Qt.y+=Ui}),po(this.ctx,l.textDirection)}drawTitle(){const l=this.options,r=l.title,a=ko(r.font),u=Un(r.padding);if(!r.display)return;const g=Cn(l.rtl,this.left,this.width),E=this.ctx,w=r.position,P=u.top+a.size/2;let J,ut=this.left,Dt=this.width;if(this.isHorizontal())Dt=Math.max(...this.lineWidths),J=this.top+P,ut=it(l.align,ut,this.right-Dt);else{const Qt=this.columnSizes.reduce((de,ye)=>Math.max(de,ye.height),0);J=P+it(l.align,this.top,this.bottom-Qt-l.labels.padding-this._computeTitleHeight())}const Lt=it(w,ut,ut+Dt);E.textAlign=g.textAlign(vt(w)),E.textBaseline="middle",E.strokeStyle=r.color,E.fillStyle=r.color,E.font=a.string,Gr(E,r.text,Lt,J,a)}_computeTitleHeight(){const l=this.options.title,r=ko(l.font),a=Un(l.padding);return l.display?r.lineHeight+a.height:0}_getLegendItemAt(l,r){let a,u,g;if(Pe(l,this.left,this.right)&&Pe(r,this.top,this.bottom))for(g=this.legendHitBoxes,a=0;a<g.length;++a)if(u=g[a],Pe(l,u.left,u.left+u.width)&&Pe(r,u.top,u.top+u.height))return this.legendItems[a];return null}handleEvent(l){const r=this.options;if(!function(_,l){return!!("mousemove"===_&&(l.onHover||l.onLeave)||l.onClick&&("click"===_||"mouseup"===_))}(l.type,r))return;const a=this._getLegendItemAt(l.x,l.y);if("mousemove"===l.type){const u=this._hoveredItem,g=((_,l)=>null!==_&&null!==l&&_.datasetIndex===l.datasetIndex&&_.index===l.index)(u,a);u&&!g&&nt(r.onLeave,[l,u,this],this),this._hoveredItem=a,a&&!g&&nt(r.onHover,[l,a,this],this)}else a&&nt(r.onClick,[l,a,this],this)}}var ju={id:"legend",_element:nc,start(_,l,r){const a=_.legend=new nc({ctx:_.ctx,options:r,chart:_});ls.configure(_,a,r),ls.addBox(_,a)},stop(_){ls.removeBox(_,_.legend),delete _.legend},beforeUpdate(_,l,r){const a=_.legend;ls.configure(_,a,r),a.options=r},afterUpdate(_){const l=_.legend;l.buildLabels(),l.adjustHitBoxes()},afterEvent(_,l){l.replay||_.legend.handleEvent(l.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(_,l,r){const a=l.datasetIndex,u=r.chart;u.isDatasetVisible(a)?(u.hide(a),l.hidden=!0):(u.show(a),l.hidden=!1)},onHover:null,onLeave:null,labels:{color:_=>_.chart.options.color,boxWidth:40,padding:10,generateLabels(_){const l=_.data.datasets,{labels:{usePointStyle:r,pointStyle:a,textAlign:u,color:g}}=_.legend.options;return _._getSortedDatasetMetas().map(E=>{const w=E.controller.getStyle(r?0:void 0),M=Un(w.borderWidth);return{text:l[E.index].label,fillStyle:w.backgroundColor,fontColor:g,hidden:!E.visible,lineCap:w.borderCapStyle,lineDash:w.borderDash,lineDashOffset:w.borderDashOffset,lineJoin:w.borderJoinStyle,lineWidth:(M.width+M.height)/4,strokeStyle:w.borderColor,pointStyle:a||w.pointStyle,rotation:w.rotation,textAlign:u||w.textAlign,borderRadius:0,datasetIndex:E.index}},this)}},title:{color:_=>_.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:_=>!_.startsWith("on"),labels:{_scriptable:_=>!["generateLabels","filter","sort"].includes(_)}}};class nu extends $r{constructor(l){super(),this.chart=l.chart,this.options=l.options,this.ctx=l.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(l,r){const a=this.options;if(this.left=0,this.top=0,!a.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=l,this.height=this.bottom=r;const u=lt(a.text)?a.text.length:1;this._padding=Un(a.padding);const g=u*ko(a.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=g:this.width=g}isHorizontal(){const l=this.options.position;return"top"===l||"bottom"===l}_drawArgs(l){const{top:r,left:a,bottom:u,right:g,options:E}=this,w=E.align;let P,J,ut,M=0;return this.isHorizontal()?(J=it(w,a,g),ut=r+l,P=g-a):("left"===E.position?(J=a+l,ut=it(w,u,r),M=-.5*be):(J=g-l,ut=it(w,r,u),M=.5*be),P=u-r),{titleX:J,titleY:ut,maxWidth:P,rotation:M}}draw(){const l=this.ctx,r=this.options;if(!r.display)return;const a=ko(r.font),g=a.lineHeight/2+this._padding.top,{titleX:E,titleY:w,maxWidth:M,rotation:P}=this._drawArgs(g);Gr(l,r.text,0,0,a,{color:r.color,maxWidth:M,rotation:P,textAlign:vt(r.align),textBaseline:"middle",translation:[E,w]})}}var ru={id:"title",_element:nu,start(_,l,r){!function(_,l){const r=new nu({ctx:_.ctx,options:l,chart:_});ls.configure(_,r,l),ls.addBox(_,r),_.titleBlock=r}(_,r)},stop(_){ls.removeBox(_,_.titleBlock),delete _.titleBlock},beforeUpdate(_,l,r){const a=_.titleBlock;ls.configure(_,a,r),a.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const su=new WeakMap;var Vd={id:"subtitle",start(_,l,r){const a=new nu({ctx:_.ctx,options:r,chart:_});ls.configure(_,a,r),ls.addBox(_,a),su.set(_,a)},stop(_){ls.removeBox(_,su.get(_)),su.delete(_)},beforeUpdate(_,l,r){const a=su.get(_);ls.configure(_,a,r),a.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Mc={average(_){if(!_.length)return!1;let l,r,a=0,u=0,g=0;for(l=0,r=_.length;l<r;++l){const E=_[l].element;if(E&&E.hasValue()){const w=E.tooltipPosition();a+=w.x,u+=w.y,++g}}return{x:a/g,y:u/g}},nearest(_,l){if(!_.length)return!1;let g,E,w,r=l.x,a=l.y,u=Number.POSITIVE_INFINITY;for(g=0,E=_.length;g<E;++g){const M=_[g].element;if(M&&M.hasValue()){const J=pi(l,M.getCenterPoint());J<u&&(u=J,w=M)}}if(w){const M=w.tooltipPosition();r=M.x,a=M.y}return{x:r,y:a}}};function Fa(_,l){return l&&(lt(l)?Array.prototype.push.apply(_,l):_.push(l)),_}function Ba(_){return("string"==typeof _||_ instanceof String)&&_.indexOf("\n")>-1?_.split("\n"):_}function Ud(_,l){const{element:r,datasetIndex:a,index:u}=l,g=_.getDatasetMeta(a).controller,{label:E,value:w}=g.getLabelAndValue(u);return{chart:_,label:E,parsed:g.getParsed(u),raw:_.data.datasets[a].data[u],formattedValue:w,dataset:g.getDataset(),dataIndex:u,datasetIndex:a,element:r}}function ed(_,l){const r=_._chart.ctx,{body:a,footer:u,title:g}=_,{boxWidth:E,boxHeight:w}=l,M=ko(l.bodyFont),P=ko(l.titleFont),J=ko(l.footerFont),ut=g.length,Dt=u.length,Lt=a.length,Qt=Un(l.padding);let de=Qt.height,ye=0,De=a.reduce((Ri,Si)=>Ri+Si.before.length+Si.lines.length+Si.after.length,0);De+=_.beforeBody.length+_.afterBody.length,ut&&(de+=ut*P.lineHeight+(ut-1)*l.titleSpacing+l.titleMarginBottom),De&&(de+=Lt*(l.displayColors?Math.max(w,M.lineHeight):M.lineHeight)+(De-Lt)*M.lineHeight+(De-1)*l.bodySpacing),Dt&&(de+=l.footerMarginTop+Dt*J.lineHeight+(Dt-1)*l.footerSpacing);let ai=0;const xi=function(Ri){ye=Math.max(ye,r.measureText(Ri).width+ai)};return r.save(),r.font=P.string,st(_.title,xi),r.font=M.string,st(_.beforeBody.concat(_.afterBody),xi),ai=l.displayColors?E+2+l.boxPadding:0,st(a,Ri=>{st(Ri.before,xi),st(Ri.lines,xi),st(Ri.after,xi)}),ai=0,r.font=J.string,st(_.footer,xi),r.restore(),ye+=Qt.width,{width:ye,height:de}}function nd(_,l,r,a){const{x:u,width:g}=r,{width:E,chartArea:{left:w,right:M}}=_;let P="center";return"center"===a?P=u<=(w+M)/2?"left":"right":u<=g/2?P="left":u>=E-g/2&&(P="right"),function(_,l,r,a){const{x:u,width:g}=a,E=r.caretSize+r.caretPadding;if("left"===_&&u+g+E>l.width||"right"===_&&u-g-E<0)return!0}(P,_,l,r)&&(P="center"),P}function _h(_,l,r){const a=l.yAlign||function(_,l){const{y:r,height:a}=l;return r<a/2?"top":r>_.height-a/2?"bottom":"center"}(_,r);return{xAlign:l.xAlign||nd(_,l,r,a),yAlign:a}}function oc(_,l,r,a){const{caretSize:u,caretPadding:g,cornerRadius:E}=_,{xAlign:w,yAlign:M}=r,P=u+g,{topLeft:J,topRight:ut,bottomLeft:Dt,bottomRight:Lt}=Zo(E);let Qt=function(_,l){let{x:r,width:a}=_;return"right"===l?r-=a:"center"===l&&(r-=a/2),r}(l,w);const de=function(_,l,r){let{y:a,height:u}=_;return"top"===l?a+=r:a-="bottom"===l?u+r:u/2,a}(l,M,P);return"center"===M?"left"===w?Qt+=P:"right"===w&&(Qt-=P):"left"===w?Qt-=Math.max(J,Dt)+u:"right"===w&&(Qt+=Math.max(ut,Lt)+u),{x:ei(Qt,0,a.width-l.width),y:ei(de,0,a.height-l.height)}}function pa(_,l,r){const a=Un(r.padding);return"center"===l?_.x+_.width/2:"right"===l?_.x+_.width-a.right:_.x+a.left}function rd(_){return Fa([],Ba(_))}function vh(_,l){const r=l&&l.dataset&&l.dataset.tooltip&&l.dataset.tooltip.callbacks;return r?_.override(r):_}let jd=(()=>{class _ extends $r{constructor(r){super(),this.opacity=0,this._active=[],this._chart=r._chart,this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.options=r.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(r){this.options=r,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const r=this._cachedAnimations;if(r)return r;const a=this._chart,u=this.options.setContext(this.getContext()),g=u.enabled&&a.options.animation&&u.animations,E=new Fr(this._chart,g);return g._cacheable&&(this._cachedAnimations=Object.freeze(E)),E}getContext(){return this.$context||(this.$context=function(_,l,r){return ir(_,{tooltip:l,tooltipItems:r,type:"tooltip"})}(this._chart.getContext(),this,this._tooltipItems))}getTitle(r,a){const{callbacks:u}=a,g=u.beforeTitle.apply(this,[r]),E=u.title.apply(this,[r]),w=u.afterTitle.apply(this,[r]);let M=[];return M=Fa(M,Ba(g)),M=Fa(M,Ba(E)),M=Fa(M,Ba(w)),M}getBeforeBody(r,a){return rd(a.callbacks.beforeBody.apply(this,[r]))}getBody(r,a){const{callbacks:u}=a,g=[];return st(r,E=>{const w={before:[],lines:[],after:[]},M=vh(u,E);Fa(w.before,Ba(M.beforeLabel.call(this,E))),Fa(w.lines,M.label.call(this,E)),Fa(w.after,Ba(M.afterLabel.call(this,E))),g.push(w)}),g}getAfterBody(r,a){return rd(a.callbacks.afterBody.apply(this,[r]))}getFooter(r,a){const{callbacks:u}=a,g=u.beforeFooter.apply(this,[r]),E=u.footer.apply(this,[r]),w=u.afterFooter.apply(this,[r]);let M=[];return M=Fa(M,Ba(g)),M=Fa(M,Ba(E)),M=Fa(M,Ba(w)),M}_createItems(r){const a=this._active,u=this._chart.data,g=[],E=[],w=[];let P,J,M=[];for(P=0,J=a.length;P<J;++P)M.push(Ud(this._chart,a[P]));return r.filter&&(M=M.filter((ut,Dt,Lt)=>r.filter(ut,Dt,Lt,u))),r.itemSort&&(M=M.sort((ut,Dt)=>r.itemSort(ut,Dt,u))),st(M,ut=>{const Dt=vh(r.callbacks,ut);g.push(Dt.labelColor.call(this,ut)),E.push(Dt.labelPointStyle.call(this,ut)),w.push(Dt.labelTextColor.call(this,ut))}),this.labelColors=g,this.labelPointStyles=E,this.labelTextColors=w,this.dataPoints=M,M}update(r,a){const u=this.options.setContext(this.getContext()),g=this._active;let E,w=[];if(g.length){const M=Mc[u.position].call(this,g,this._eventPosition);w=this._createItems(u),this.title=this.getTitle(w,u),this.beforeBody=this.getBeforeBody(w,u),this.body=this.getBody(w,u),this.afterBody=this.getAfterBody(w,u),this.footer=this.getFooter(w,u);const P=this._size=ed(this,u),J=Object.assign({},M,P),ut=_h(this._chart,u,J),Dt=oc(u,J,ut,this._chart);this.xAlign=ut.xAlign,this.yAlign=ut.yAlign,E={opacity:1,x:Dt.x,y:Dt.y,width:P.width,height:P.height,caretX:M.x,caretY:M.y}}else 0!==this.opacity&&(E={opacity:0});this._tooltipItems=w,this.$context=void 0,E&&this._resolveAnimations().update(this,E),r&&u.external&&u.external.call(this,{chart:this._chart,tooltip:this,replay:a})}drawCaret(r,a,u,g){const E=this.getCaretPosition(r,u,g);a.lineTo(E.x1,E.y1),a.lineTo(E.x2,E.y2),a.lineTo(E.x3,E.y3)}getCaretPosition(r,a,u){const{xAlign:g,yAlign:E}=this,{caretSize:w,cornerRadius:M}=u,{topLeft:P,topRight:J,bottomLeft:ut,bottomRight:Dt}=Zo(M),{x:Lt,y:Qt}=r,{width:de,height:ye}=a;let De,ai,xi,Ri,Si,Ui;return"center"===E?(Si=Qt+ye/2,"left"===g?(De=Lt,ai=De-w,Ri=Si+w,Ui=Si-w):(De=Lt+de,ai=De+w,Ri=Si-w,Ui=Si+w),xi=De):(ai="left"===g?Lt+Math.max(P,ut)+w:"right"===g?Lt+de-Math.max(J,Dt)-w:this.caretX,"top"===E?(Ri=Qt,Si=Ri-w,De=ai-w,xi=ai+w):(Ri=Qt+ye,Si=Ri+w,De=ai+w,xi=ai-w),Ui=Ri),{x1:De,x2:ai,x3:xi,y1:Ri,y2:Si,y3:Ui}}drawTitle(r,a,u){const g=this.title,E=g.length;let w,M,P;if(E){const J=Cn(u.rtl,this.x,this.width);for(r.x=pa(this,u.titleAlign,u),a.textAlign=J.textAlign(u.titleAlign),a.textBaseline="middle",w=ko(u.titleFont),M=u.titleSpacing,a.fillStyle=u.titleColor,a.font=w.string,P=0;P<E;++P)a.fillText(g[P],J.x(r.x),r.y+w.lineHeight/2),r.y+=w.lineHeight+M,P+1===E&&(r.y+=u.titleMarginBottom-M)}}_drawColorBox(r,a,u,g,E){const w=this.labelColors[u],M=this.labelPointStyles[u],{boxHeight:P,boxWidth:J,boxPadding:ut}=E,Dt=ko(E.bodyFont),Lt=pa(this,"left",E),Qt=g.x(Lt),ye=a.y+(P<Dt.lineHeight?(Dt.lineHeight-P)/2:0);if(E.usePointStyle){const De={radius:Math.min(J,P)/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:1},ai=g.leftForLtr(Qt,J)+J/2,xi=ye+P/2;r.strokeStyle=E.multiKeyBackground,r.fillStyle=E.multiKeyBackground,Lo(r,De,ai,xi),r.strokeStyle=w.borderColor,r.fillStyle=w.backgroundColor,Lo(r,De,ai,xi)}else{r.lineWidth=w.borderWidth||1,r.strokeStyle=w.borderColor,r.setLineDash(w.borderDash||[]),r.lineDashOffset=w.borderDashOffset||0;const De=g.leftForLtr(Qt,J-ut),ai=g.leftForLtr(g.xPlus(Qt,1),J-ut-2),xi=Zo(w.borderRadius);Object.values(xi).some(Ri=>0!==Ri)?(r.beginPath(),r.fillStyle=E.multiKeyBackground,ds(r,{x:De,y:ye,w:J,h:P,radius:xi}),r.fill(),r.stroke(),r.fillStyle=w.backgroundColor,r.beginPath(),ds(r,{x:ai,y:ye+1,w:J-2,h:P-2,radius:xi}),r.fill()):(r.fillStyle=E.multiKeyBackground,r.fillRect(De,ye,J,P),r.strokeRect(De,ye,J,P),r.fillStyle=w.backgroundColor,r.fillRect(ai,ye+1,J-2,P-2))}r.fillStyle=this.labelTextColors[u]}drawBody(r,a,u){const{body:g}=this,{bodySpacing:E,bodyAlign:w,displayColors:M,boxHeight:P,boxWidth:J,boxPadding:ut}=u,Dt=ko(u.bodyFont);let Lt=Dt.lineHeight,Qt=0;const de=Cn(u.rtl,this.x,this.width),ye=function(an){a.fillText(an,de.x(r.x+Qt),r.y+Lt/2),r.y+=Lt+E},De=de.textAlign(w);let ai,xi,Ri,Si,Ui,Wi,qi;for(a.textAlign=w,a.textBaseline="middle",a.font=Dt.string,r.x=pa(this,De,u),a.fillStyle=u.bodyColor,st(this.beforeBody,ye),Qt=M&&"right"!==De?"center"===w?J/2+ut:J+2+ut:0,Si=0,Wi=g.length;Si<Wi;++Si){for(ai=g[Si],xi=this.labelTextColors[Si],a.fillStyle=xi,st(ai.before,ye),Ri=ai.lines,M&&Ri.length&&(this._drawColorBox(a,r,Si,de,u),Lt=Math.max(Dt.lineHeight,P)),Ui=0,qi=Ri.length;Ui<qi;++Ui)ye(Ri[Ui]),Lt=Dt.lineHeight;st(ai.after,ye)}Qt=0,Lt=Dt.lineHeight,st(this.afterBody,ye),r.y-=E}drawFooter(r,a,u){const g=this.footer,E=g.length;let w,M;if(E){const P=Cn(u.rtl,this.x,this.width);for(r.x=pa(this,u.footerAlign,u),r.y+=u.footerMarginTop,a.textAlign=P.textAlign(u.footerAlign),a.textBaseline="middle",w=ko(u.footerFont),a.fillStyle=u.footerColor,a.font=w.string,M=0;M<E;++M)a.fillText(g[M],P.x(r.x),r.y+w.lineHeight/2),r.y+=w.lineHeight+u.footerSpacing}}drawBackground(r,a,u,g){const{xAlign:E,yAlign:w}=this,{x:M,y:P}=r,{width:J,height:ut}=u,{topLeft:Dt,topRight:Lt,bottomLeft:Qt,bottomRight:de}=Zo(g.cornerRadius);a.fillStyle=g.backgroundColor,a.strokeStyle=g.borderColor,a.lineWidth=g.borderWidth,a.beginPath(),a.moveTo(M+Dt,P),"top"===w&&this.drawCaret(r,a,u,g),a.lineTo(M+J-Lt,P),a.quadraticCurveTo(M+J,P,M+J,P+Lt),"center"===w&&"right"===E&&this.drawCaret(r,a,u,g),a.lineTo(M+J,P+ut-de),a.quadraticCurveTo(M+J,P+ut,M+J-de,P+ut),"bottom"===w&&this.drawCaret(r,a,u,g),a.lineTo(M+Qt,P+ut),a.quadraticCurveTo(M,P+ut,M,P+ut-Qt),"center"===w&&"left"===E&&this.drawCaret(r,a,u,g),a.lineTo(M,P+Dt),a.quadraticCurveTo(M,P,M+Dt,P),a.closePath(),a.fill(),g.borderWidth>0&&a.stroke()}_updateAnimationTarget(r){const a=this._chart,u=this.$animations,g=u&&u.x,E=u&&u.y;if(g||E){const w=Mc[r.position].call(this,this._active,this._eventPosition);if(!w)return;const M=this._size=ed(this,r),P=Object.assign({},w,this._size),J=_h(a,r,P),ut=oc(r,P,J,a);(g._to!==ut.x||E._to!==ut.y)&&(this.xAlign=J.xAlign,this.yAlign=J.yAlign,this.width=M.width,this.height=M.height,this.caretX=w.x,this.caretY=w.y,this._resolveAnimations().update(this,ut))}}draw(r){const a=this.options.setContext(this.getContext());let u=this.opacity;if(!u)return;this._updateAnimationTarget(a);const g={width:this.width,height:this.height},E={x:this.x,y:this.y};u=Math.abs(u)<.001?0:u;const w=Un(a.padding);a.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(r.save(),r.globalAlpha=u,this.drawBackground(E,r,g,a),Qn(r,a.textDirection),E.y+=w.top,this.drawTitle(E,r,a),this.drawBody(E,r,a),this.drawFooter(E,r,a),po(r,a.textDirection),r.restore())}getActiveElements(){return this._active||[]}setActiveElements(r,a){const u=this._active,g=r.map(({datasetIndex:M,index:P})=>{const J=this._chart.getDatasetMeta(M);if(!J)throw new Error("Cannot find a dataset at index "+M);return{datasetIndex:M,element:J.data[P],index:P}}),E=!Gt(u,g),w=this._positionChanged(g,a);(E||w)&&(this._active=g,this._eventPosition=a,this.update(!0))}handleEvent(r,a){const u=this.options,g=this._active||[];let E=!1,w=[];"mouseout"!==r.type&&(w=this._chart.getElementsAtEventForMode(r,u.mode,u,a),u.reverse&&w.reverse());const M=this._positionChanged(w,r);return E=a||!Gt(w,g)||M,E&&(this._active=w,(u.enabled||u.external)&&(this._eventPosition={x:r.x,y:r.y},this.update(!0,a))),E}_positionChanged(r,a){const{caretX:u,caretY:g,options:E}=this,w=Mc[E.position].call(this,r,a);return!1!==w&&(u!==w.x||g!==w.y)}}return _.positioners=Mc,_})();var bh=Object.freeze({__proto__:null,Decimation:zh,Filler:Uu,Legend:ju,SubTitle:Vd,Title:ru,Tooltip:{id:"tooltip",_element:jd,positioners:Mc,afterInit(_,l,r){r&&(_.tooltip=new jd({_chart:_,options:r}))},beforeUpdate(_,l,r){_.tooltip&&_.tooltip.initialize(r)},reset(_,l,r){_.tooltip&&_.tooltip.initialize(r)},afterDraw(_){const l=_.tooltip,r={tooltip:l};!1!==_.notifyPlugins("beforeTooltipDraw",r)&&(l&&l.draw(_.ctx),_.notifyPlugins("afterTooltipDraw",r))},afterEvent(_,l){_.tooltip&&_.tooltip.handleEvent(l.event,l.replay)&&(l.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(_,l)=>l.bodyFont.size,boxWidth:(_,l)=>l.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:wt,title(_){if(_.length>0){const l=_[0],r=l.chart.data.labels,a=r?r.length:0;if(this&&this.options&&"dataset"===this.options.mode)return l.dataset.label||"";if(l.label)return l.label;if(a>0&&l.dataIndex<a)return r[l.dataIndex]}return""},afterTitle:wt,beforeBody:wt,beforeLabel:wt,label(_){if(this&&this.options&&"dataset"===this.options.mode)return _.label+": "+_.formattedValue||_.formattedValue;let l=_.dataset.label||"";l&&(l+=": ");const r=_.formattedValue;return yt(r)||(l+=r),l},labelColor(_){const r=_.chart.getDatasetMeta(_.datasetIndex).controller.getStyle(_.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(_){const r=_.chart.getDatasetMeta(_.datasetIndex).controller.getStyle(_.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:wt,afterBody:wt,beforeFooter:wt,footer:wt,afterFooter:wt}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:_=>"filter"!==_&&"itemSort"!==_&&"external"!==_,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class Il extends ea{constructor(l){super(l),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(l){const r=this._addedLabels;if(r.length){const a=this.getLabels();for(const{index:u,label:g}of r)a[u]===g&&a.splice(u,1);this._addedLabels=[]}super.init(l)}parse(l,r){if(yt(l))return null;const a=this.getLabels();return((_,l)=>null===_?null:ei(Math.round(_),0,l))(r=isFinite(r)&&a[r]===l?r:function(_,l,r,a){const u=_.indexOf(l);return-1===u?((_,l,r,a)=>("string"==typeof l?(r=_.push(l)-1,a.unshift({index:r,label:l})):isNaN(l)&&(r=null),r))(_,l,r,a):u!==_.lastIndexOf(l)?r:u}(a,l,Rt(r,l),this._addedLabels),a.length-1)}determineDataLimits(){const{minDefined:l,maxDefined:r}=this.getUserBounds();let{min:a,max:u}=this.getMinMax(!0);"ticks"===this.options.bounds&&(l||(a=0),r||(u=this.getLabels().length-1)),this.min=a,this.max=u}buildTicks(){const l=this.min,r=this.max,a=this.options.offset,u=[];let g=this.getLabels();g=0===l&&r===g.length-1?g:g.slice(l,r+1),this._valueRange=Math.max(g.length-(a?0:1),1),this._startValue=this.min-(a?.5:0);for(let E=l;E<=r;E++)u.push({value:E});return u}getLabelForValue(l){const r=this.getLabels();return l>=0&&l<r.length?r[l]:l}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(l){return"number"!=typeof l&&(l=this.parse(l)),null===l?NaN:this.getPixelForDecimal((l-this._startValue)/this._valueRange)}getPixelForTick(l){const r=this.ticks;return l<0||l>r.length-1?null:this.getPixelForValue(r[l].value)}getValueForPixel(l){return Math.round(this._startValue+this.getDecimalForPixel(l)*this._valueRange)}getBasePixel(){return this.bottom}}function Th(_,l,{horizontal:r,minRotation:a}){const u=li(a),g=(r?Math.sin(u):Math.cos(u))||.001;return Math.min(l/g,.75*l*(""+_).length)}Il.id="category",Il.defaults={ticks:{callback:Il.prototype.getLabelForValue}};class Ml extends ea{constructor(l){super(l),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(l,r){return yt(l)||("number"==typeof l||l instanceof Number)&&!isFinite(+l)?null:+l}handleTickRangeOptions(){const{beginAtZero:l}=this.options,{minDefined:r,maxDefined:a}=this.getUserBounds();let{min:u,max:g}=this;const E=M=>u=r?u:M,w=M=>g=a?g:M;if(l){const M=Yt(u),P=Yt(g);M<0&&P<0?w(0):M>0&&P>0&&E(0)}if(u===g){let M=1;(g>=Number.MAX_SAFE_INTEGER||u<=Number.MIN_SAFE_INTEGER)&&(M=Math.abs(.05*g)),w(g+M),l||E(u-M)}this.min=u,this.max=g}getTickLimit(){const l=this.options.ticks;let u,{maxTicksLimit:r,stepSize:a}=l;return a?(u=Math.ceil(this.max/a)-Math.floor(this.min/a)+1,u>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${a} would result generating up to ${u} ticks. Limiting to 1000.`),u=1e3)):(u=this.computeTickLimit(),r=r||11),r&&(u=Math.min(r,u)),u}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const l=this.options,r=l.ticks;let a=this.getTickLimit();a=Math.max(2,a);const E=function(_,l){const r=[],{bounds:u,step:g,min:E,max:w,precision:M,count:P,maxTicks:J,maxDigits:ut,includeBounds:Dt}=_,Lt=g||1,Qt=J-1,{min:de,max:ye}=l,De=!yt(E),ai=!yt(w),xi=!yt(P),Ri=(ye-de)/(ut+1);let Ui,Wi,qi,an,Si=ue((ye-de)/Qt/Lt)*Lt;if(Si<1e-14&&!De&&!ai)return[{value:de},{value:ye}];an=Math.ceil(ye/Si)-Math.floor(de/Si),an>Qt&&(Si=ue(an*Si/Qt/Lt)*Lt),yt(M)||(Ui=Math.pow(10,M),Si=Math.ceil(Si*Ui)/Ui),"ticks"===u?(Wi=Math.floor(de/Si)*Si,qi=Math.ceil(ye/Si)*Si):(Wi=de,qi=ye),De&&ai&&g&&function(_,l){const r=Math.round(_);return r-l<=_&&r+l>=_}((w-E)/g,Si/1e3)?(an=Math.round(Math.min((w-E)/Si,J)),Si=(w-E)/an,Wi=E,qi=w):xi?(Wi=De?E:Wi,qi=ai?w:qi,an=P-1,Si=(qi-Wi)/an):(an=(qi-Wi)/Si,an=Nt(an,Math.round(an),Si/1e3)?Math.round(an):Math.ceil(an));const zn=Math.max(mi(Si),mi(Wi));Ui=Math.pow(10,yt(M)?zn:M),Wi=Math.round(Wi*Ui)/Ui,qi=Math.round(qi*Ui)/Ui;let tn=0;for(De&&(Dt&&Wi!==E?(r.push({value:E}),Wi<E&&tn++,Nt(Math.round((Wi+tn*Si)*Ui)/Ui,E,Th(E,Ri,_))&&tn++):Wi<E&&tn++);tn<an;++tn)r.push({value:Math.round((Wi+tn*Si)*Ui)/Ui});return ai&&Dt&&qi!==w?r.length&&Nt(r[r.length-1].value,w,Th(w,Ri,_))?r[r.length-1].value=w:r.push({value:w}):(!ai||qi===w)&&r.push({value:qi}),r}({maxTicks:a,bounds:l.bounds,min:l.min,max:l.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:!1!==r.includeBounds},this._range||this);return"ticks"===l.bounds&&je(E,this,"value"),l.reverse?(E.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),E}configure(){const l=this.ticks;let r=this.min,a=this.max;if(super.configure(),this.options.offset&&l.length){const u=(a-r)/Math.max(l.length-1,1)/2;r-=u,a+=u}this._startValue=r,this._endValue=a,this._valueRange=a-r}getLabelForValue(l){return Tn(l,this.chart.options.locale,this.options.ticks.format)}}class au extends Ml{determineDataLimits(){const{min:l,max:r}=this.getMinMax(!0);this.min=bt(l)?l:0,this.max=bt(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const l=this.isHorizontal(),r=l?this.width:this.height,a=li(this.options.ticks.minRotation),u=(l?Math.sin(a):Math.cos(a))||.001,g=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,g.lineHeight/u))}getPixelForValue(l){return null===l?NaN:this.getPixelForDecimal((l-this._startValue)/this._valueRange)}getValueForPixel(l){return this._startValue+this.getDecimalForPixel(l)*this._valueRange}}function Yu(_){return _/Math.pow(10,Math.floor(Zt(_)))==1}au.id="linear",au.defaults={ticks:{callback:ka.formatters.numeric}};class Al extends ea{constructor(l){super(l),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(l,r){const a=Ml.prototype.parse.apply(this,[l,r]);if(0!==a)return bt(a)&&a>0?a:null;this._zero=!0}determineDataLimits(){const{min:l,max:r}=this.getMinMax(!0);this.min=bt(l)?Math.max(0,l):null,this.max=bt(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:l,maxDefined:r}=this.getUserBounds();let a=this.min,u=this.max;const g=M=>a=l?a:M,E=M=>u=r?u:M,w=(M,P)=>Math.pow(10,Math.floor(Zt(M))+P);a===u&&(a<=0?(g(1),E(10)):(g(w(a,-1)),E(w(u,1)))),a<=0&&g(w(u,-1)),u<=0&&E(w(a,1)),this._zero&&this.min!==this._suggestedMin&&a===w(this.min,0)&&g(w(a,-1)),this.min=a,this.max=u}buildTicks(){const l=this.options,a=function(_,l){const r=Math.floor(Zt(l.max)),a=Math.ceil(l.max/Math.pow(10,r)),u=[];let g=tt(_.min,Math.pow(10,Math.floor(Zt(l.min)))),E=Math.floor(Zt(g)),w=Math.floor(g/Math.pow(10,E)),M=E<0?Math.pow(10,Math.abs(E)):1;do{u.push({value:g,major:Yu(g)}),++w,10===w&&(w=1,++E,M=E>=0?1:M),g=Math.round(w*Math.pow(10,E)*M)/M}while(E<r||E===r&&w<a);const P=tt(_.max,g);return u.push({value:P,major:Yu(g)}),u}({min:this._userMin,max:this._userMax},this);return"ticks"===l.bounds&&je(a,this,"value"),l.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}getLabelForValue(l){return void 0===l?"0":Tn(l,this.chart.options.locale,this.options.ticks.format)}configure(){const l=this.min;super.configure(),this._startValue=Zt(l),this._valueRange=Zt(this.max)-Zt(l)}getPixelForValue(l){return(void 0===l||0===l)&&(l=this.min),null===l||isNaN(l)?NaN:this.getPixelForDecimal(l===this.min?0:(Zt(l)-this._startValue)/this._valueRange)}getValueForPixel(l){const r=this.getDecimalForPixel(l);return Math.pow(10,this._startValue+r*this._valueRange)}}function Ac(_){const l=_.ticks;if(l.display&&_.display){const r=Un(l.backdropPadding);return Rt(l.font&&l.font.size,En.font.size)+r.height}return 0}function Ch(_,l,r){return r=lt(r)?r:[r],{w:ho(_,l.string,r),h:r.length*l.lineHeight}}function ad(_,l,r,a,u){return _===a||_===u?{start:l-r/2,end:l+r/2}:_<a||_>u?{start:l-r,end:l}:{start:l,end:l+r}}function ld(_){return 0===_||180===_?"center":_<180?"left":"right"}function Yd(_,l,r){return"right"===r?_-=l:"center"===r&&(_-=l/2),_}function Xd(_,l,r){return 90===r||270===r?_-=l/2:(r>270||r<90)&&(_-=l),_}function cd(_,l,r,a){const{ctx:u}=_;if(r)u.arc(_.xCenter,_.yCenter,l,0,Xt);else{let g=_.getPointPosition(0,l);u.moveTo(g.x,g.y);for(let E=1;E<a;E++)g=_.getPointPosition(E,l),u.lineTo(g.x,g.y)}}function Oc(_){return Mt(_)?_:0}Al.id="logarithmic",Al.defaults={ticks:{callback:ka.formatters.logarithmic,major:{enabled:!0}}};class T extends Ml{constructor(l){super(l),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){this.width=this.maxWidth,this.height=this.maxHeight,this.paddingTop=Ac(this.options)/2,this.xCenter=Math.floor(this.width/2),this.yCenter=Math.floor((this.height-this.paddingTop)/2),this.drawingArea=Math.min(this.height-this.paddingTop,this.width)/2}determineDataLimits(){const{min:l,max:r}=this.getMinMax(!1);this.min=bt(l)&&!isNaN(l)?l:0,this.max=bt(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ac(this.options))}generateTickLabels(l){Ml.prototype.generateTickLabels.call(this,l),this._pointLabels=this.getLabels().map((r,a)=>{const u=nt(this.options.pointLabels.callback,[r,a],this);return u||0===u?u:""})}fit(){const l=this.options;l.display&&l.pointLabels.display?function(_){const l={l:0,r:_.width,t:0,b:_.height-_.paddingTop},r={},a=[],u=[],g=_.getLabels().length;for(let E=0;E<g;E++){const w=_.options.pointLabels.setContext(_.getPointLabelContext(E));u[E]=w.padding;const M=_.getPointPosition(E,_.drawingArea+u[E]),P=ko(w.font),J=Ch(_.ctx,P,_._pointLabels[E]);a[E]=J;const ut=_.getIndexAngle(E),Dt=ri(ut),Lt=ad(Dt,M.x,J.w,0,180),Qt=ad(Dt,M.y,J.h,90,270);Lt.start<l.l&&(l.l=Lt.start,r.l=ut),Lt.end>l.r&&(l.r=Lt.end,r.r=ut),Qt.start<l.t&&(l.t=Qt.start,r.t=ut),Qt.end>l.b&&(l.b=Qt.end,r.b=ut)}_._setReductions(_.drawingArea,l,r),_._pointLabelItems=function(_,l,r){const a=[],u=_.getLabels().length,g=_.options,E=Ac(g),w=_.getDistanceFromCenterForValue(g.ticks.reverse?_.min:_.max);for(let M=0;M<u;M++){const J=_.getPointPosition(M,w+(0===M?E/2:0)+r[M]),ut=ri(_.getIndexAngle(M)),Dt=l[M],Lt=Xd(J.y,Dt.h,ut),Qt=ld(ut),de=Yd(J.x,Dt.w,Qt);a.push({x:J.x,y:Lt,textAlign:Qt,left:de,top:Lt,right:de+Dt.w,bottom:Lt+Dt.h})}return a}(_,a,u)}(this):this.setCenterPoint(0,0,0,0)}_setReductions(l,r,a){let u=r.l/Math.sin(a.l),g=Math.max(r.r-this.width,0)/Math.sin(a.r),E=-r.t/Math.cos(a.t),w=-Math.max(r.b-(this.height-this.paddingTop),0)/Math.cos(a.b);u=Oc(u),g=Oc(g),E=Oc(E),w=Oc(w),this.drawingArea=Math.max(l/2,Math.min(Math.floor(l-(u+g)/2),Math.floor(l-(E+w)/2))),this.setCenterPoint(u,g,E,w)}setCenterPoint(l,r,a,u){const w=a+this.drawingArea,M=this.height-this.paddingTop-u-this.drawingArea;this.xCenter=Math.floor((l+this.drawingArea+(this.width-r-this.drawingArea))/2+this.left),this.yCenter=Math.floor((w+M)/2+this.top+this.paddingTop)}getIndexAngle(l){return yi(l*(Xt/this.getLabels().length)+li(this.options.startAngle||0))}getDistanceFromCenterForValue(l){if(yt(l))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-l)*r:(l-this.min)*r}getValueForDistanceFromCenter(l){if(yt(l))return NaN;const r=l/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(l){const r=this._pointLabels||[];if(l>=0&&l<r.length){const a=r[l];return function(_,l,r){return ir(_,{label:r,index:l,type:"pointLabel"})}(this.getContext(),l,a)}}getPointPosition(l,r){const a=this.getIndexAngle(l)-ie;return{x:Math.cos(a)*r+this.xCenter,y:Math.sin(a)*r+this.yCenter,angle:a}}getPointPositionForValue(l,r){return this.getPointPosition(l,this.getDistanceFromCenterForValue(r))}getBasePosition(l){return this.getPointPositionForValue(l||0,this.getBaseValue())}getPointLabelPosition(l){const{left:r,top:a,right:u,bottom:g}=this._pointLabelItems[l];return{left:r,top:a,right:u,bottom:g}}drawBackground(){const{backgroundColor:l,grid:{circular:r}}=this.options;if(l){const a=this.ctx;a.save(),a.beginPath(),cd(this,this.getDistanceFromCenterForValue(this._endValue),r,this.getLabels().length),a.closePath(),a.fillStyle=l,a.fill(),a.restore()}}drawGrid(){const l=this.ctx,r=this.options,{angleLines:a,grid:u}=r,g=this.getLabels().length;let E,w,M;if(r.pointLabels.display&&function(_,l){const{ctx:r,options:{pointLabels:a}}=_;for(let u=l-1;u>=0;u--){const g=a.setContext(_.getPointLabelContext(u)),E=ko(g.font),{x:w,y:M,textAlign:P,left:J,top:ut,right:Dt,bottom:Lt}=_._pointLabelItems[u],{backdropColor:Qt}=g;if(!yt(Qt)){const de=Un(g.backdropPadding);r.fillStyle=Qt,r.fillRect(J-de.left,ut-de.top,Dt-J+de.width,Lt-ut+de.height)}Gr(r,_._pointLabels[u],w,M+E.lineHeight/2,E,{color:g.color,textAlign:P,textBaseline:"middle"})}}(this,g),u.display&&this.ticks.forEach((P,J)=>{0!==J&&(w=this.getDistanceFromCenterForValue(P.value),function(_,l,r,a){const u=_.ctx,g=l.circular,{color:E,lineWidth:w}=l;!g&&!a||!E||!w||r<0||(u.save(),u.strokeStyle=E,u.lineWidth=w,u.setLineDash(l.borderDash),u.lineDashOffset=l.borderDashOffset,u.beginPath(),cd(_,r,g,a),u.closePath(),u.stroke(),u.restore())}(this,u.setContext(this.getContext(J-1)),w,g))}),a.display){for(l.save(),E=this.getLabels().length-1;E>=0;E--){const P=a.setContext(this.getPointLabelContext(E)),{color:J,lineWidth:ut}=P;!ut||!J||(l.lineWidth=ut,l.strokeStyle=J,l.setLineDash(P.borderDash),l.lineDashOffset=P.borderDashOffset,w=this.getDistanceFromCenterForValue(r.ticks.reverse?this.min:this.max),M=this.getPointPosition(E,w),l.beginPath(),l.moveTo(this.xCenter,this.yCenter),l.lineTo(M.x,M.y),l.stroke())}l.restore()}}drawBorder(){}drawLabels(){const l=this.ctx,r=this.options,a=r.ticks;if(!a.display)return;const u=this.getIndexAngle(0);let g,E;l.save(),l.translate(this.xCenter,this.yCenter),l.rotate(u),l.textAlign="center",l.textBaseline="middle",this.ticks.forEach((w,M)=>{if(0===M&&!r.reverse)return;const P=a.setContext(this.getContext(M)),J=ko(P.font);if(g=this.getDistanceFromCenterForValue(this.ticks[M].value),P.showLabelBackdrop){l.font=J.string,E=l.measureText(w.label).width,l.fillStyle=P.backdropColor;const ut=Un(P.backdropPadding);l.fillRect(-E/2-ut.left,-g-J.size/2-ut.top,E+ut.width,J.size+ut.height)}Gr(l,w.label,0,-g,J,{color:P.color})}),l.restore()}drawTitle(){}}T.id="radialLinear",T.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ka.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:_=>_,padding:5}},T.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},T.descriptors={angleLines:{_fallback:"grid"}};const N={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},z=Object.keys(N);function Q(_,l){return _-l}function ft(_,l){if(yt(l))return null;const r=_._adapter,{parser:a,round:u,isoWeekday:g}=_._parseOpts;let E=l;return"function"==typeof a&&(E=a(E)),bt(E)||(E="string"==typeof a?r.parse(E,a):r.parse(E)),null===E?null:(u&&(E="week"!==u||!Mt(g)&&!0!==g?r.startOf(E,u):r.startOf(E,"isoWeek",g)),+E)}function xt(_,l,r,a){const u=z.length;for(let g=z.indexOf(_);g<u-1;++g){const E=N[z[g]],w=E.steps?E.steps:Number.MAX_SAFE_INTEGER;if(E.common&&Math.ceil((r-l)/(w*E.size))<=a)return z[g]}return z[u-1]}function oe(_,l,r){if(r){if(r.length){const{lo:a,hi:u}=ps(r,l);_[r[a]>=l?r[a]:r[u]]=!0}}else _[l]=!0}function Fe(_,l,r){const a=[],u={},g=l.length;let E,w;for(E=0;E<g;++E)w=l[E],u[w]=E,a.push({value:w,major:!1});return 0!==g&&r?function(_,l,r,a){const u=_._adapter,g=+u.startOf(l[0].value,a),E=l[l.length-1].value;let w,M;for(w=g;w<=E;w=+u.add(w,1,a))M=r[w],M>=0&&(l[M].major=!0);return l}(_,a,u,r):a}let Ue=(()=>{class _ extends ea{constructor(r){super(r),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(r,a){const u=r.time||(r.time={}),g=this._adapter=new As._date(r.adapters.date);me(u.displayFormats,g.formats()),this._parseOpts={parser:u.parser,round:u.round,isoWeekday:u.isoWeekday},super.init(r),this._normalized=a.normalized}parse(r,a){return void 0===r?null:ft(this,r)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const r=this.options,a=this._adapter,u=r.time.unit||"day";let{min:g,max:E,minDefined:w,maxDefined:M}=this.getUserBounds();function P(J){!w&&!isNaN(J.min)&&(g=Math.min(g,J.min)),!M&&!isNaN(J.max)&&(E=Math.max(E,J.max))}(!w||!M)&&(P(this._getLabelBounds()),("ticks"!==r.bounds||"labels"!==r.ticks.source)&&P(this.getMinMax(!1))),g=bt(g)&&!isNaN(g)?g:+a.startOf(Date.now(),u),E=bt(E)&&!isNaN(E)?E:+a.endOf(Date.now(),u)+1,this.min=Math.min(g,E-1),this.max=Math.max(g+1,E)}_getLabelBounds(){const r=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;return r.length&&(a=r[0],u=r[r.length-1]),{min:a,max:u}}buildTicks(){const r=this.options,a=r.time,u=r.ticks,g="labels"===u.source?this.getLabelTimestamps():this._generate();"ticks"===r.bounds&&g.length&&(this.min=this._userMin||g[0],this.max=this._userMax||g[g.length-1]);const E=this.min,M=function(_,l,r){let a=0,u=_.length;for(;a<u&&_[a]<l;)a++;for(;u>a&&_[u-1]>r;)u--;return a>0||u<_.length?_.slice(a,u):_}(g,E,this.max);return this._unit=a.unit||(u.autoSkip?xt(a.minUnit,this.min,this.max,this._getLabelCapacity(E)):function(_,l,r,a,u){for(let g=z.length-1;g>=z.indexOf(r);g--){const E=z[g];if(N[E].common&&_._adapter.diff(u,a,E)>=l-1)return E}return z[r?z.indexOf(r):0]}(this,M.length,a.minUnit,this.min,this.max)),this._majorUnit=u.major.enabled&&"year"!==this._unit?function(_){for(let l=z.indexOf(_)+1,r=z.length;l<r;++l)if(N[z[l]].common)return z[l]}(this._unit):void 0,this.initOffsets(g),r.reverse&&M.reverse(),Fe(this,M,this._majorUnit)}initOffsets(r){let g,E,a=0,u=0;this.options.offset&&r.length&&(g=this.getDecimalForValue(r[0]),a=1===r.length?1-g:(this.getDecimalForValue(r[1])-g)/2,E=this.getDecimalForValue(r[r.length-1]),u=1===r.length?E:(E-this.getDecimalForValue(r[r.length-2]))/2);const w=r.length<3?.5:.25;a=ei(a,0,w),u=ei(u,0,w),this._offsets={start:a,end:u,factor:1/(a+1+u)}}_generate(){const r=this._adapter,a=this.min,u=this.max,g=this.options,E=g.time,w=E.unit||xt(E.minUnit,a,u,this._getLabelCapacity(a)),M=Rt(E.stepSize,1),P="week"===w&&E.isoWeekday,J=Mt(P)||!0===P,ut={};let Lt,Qt,Dt=a;if(J&&(Dt=+r.startOf(Dt,"isoWeek",P)),Dt=+r.startOf(Dt,J?"day":w),r.diff(u,a,w)>1e5*M)throw new Error(a+" and "+u+" are too far apart with stepSize of "+M+" "+w);const de="data"===g.ticks.source&&this.getDataTimestamps();for(Lt=Dt,Qt=0;Lt<u;Lt=+r.add(Lt,M,w),Qt++)oe(ut,Lt,de);return(Lt===u||"ticks"===g.bounds||1===Qt)&&oe(ut,Lt,de),Object.keys(ut).sort((ye,De)=>ye-De).map(ye=>+ye)}getLabelForValue(r){const u=this.options.time;return this._adapter.format(r,u.tooltipFormat?u.tooltipFormat:u.displayFormats.datetime)}_tickFormatFunction(r,a,u,g){const E=this.options,w=E.time.displayFormats,M=this._unit,P=this._majorUnit,ut=P&&w[P],Dt=u[a],Qt=this._adapter.format(r,g||(P&&ut&&Dt&&Dt.major?ut:M&&w[M])),de=E.ticks.callback;return de?nt(de,[Qt,a,u],this):Qt}generateTickLabels(r){let a,u,g;for(a=0,u=r.length;a<u;++a)g=r[a],g.label=this._tickFormatFunction(g.value,a,r)}getDecimalForValue(r){return null===r?NaN:(r-this.min)/(this.max-this.min)}getPixelForValue(r){const a=this._offsets,u=this.getDecimalForValue(r);return this.getPixelForDecimal((a.start+u)*a.factor)}getValueForPixel(r){const a=this._offsets,u=this.getDecimalForPixel(r)/a.factor-a.end;return this.min+u*(this.max-this.min)}_getLabelSize(r){const a=this.options.ticks,u=this.ctx.measureText(r).width,g=li(this.isHorizontal()?a.maxRotation:a.minRotation),E=Math.cos(g),w=Math.sin(g),M=this._resolveTickFontOptions(0).size;return{w:u*E+M*w,h:u*w+M*E}}_getLabelCapacity(r){const a=this.options.time,u=a.displayFormats,g=u[a.unit]||u.millisecond,E=this._tickFormatFunction(r,0,Fe(this,[r],this._majorUnit),g),w=this._getLabelSize(E),M=Math.floor(this.isHorizontal()?this.width/w.w:this.height/w.h)-1;return M>0?M:1}getDataTimestamps(){let a,u,r=this._cache.data||[];if(r.length)return r;const g=this.getMatchingVisibleMetas();if(this._normalized&&g.length)return this._cache.data=g[0].controller.getAllParsedValues(this);for(a=0,u=g.length;a<u;++a)r=r.concat(g[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(r)}getLabelTimestamps(){const r=this._cache.labels||[];let a,u;if(r.length)return r;const g=this.getLabels();for(a=0,u=g.length;a<u;++a)r.push(ft(this,g[a]));return this._cache.labels=this._normalized?r:this.normalize(r)}normalize(r){return kr(r.sort(Q))}}return _.id="time",_.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},_})();function Je(_,l,r){let g,E,w,M,a=0,u=_.length-1;r?(l>=_[a].pos&&l<=_[u].pos&&({lo:a,hi:u}=No(_,"pos",l)),({pos:g,time:w}=_[a]),({pos:E,time:M}=_[u])):(l>=_[a].time&&l<=_[u].time&&({lo:a,hi:u}=No(_,"time",l)),({time:g,pos:w}=_[a]),({time:E,pos:M}=_[u]));const P=E-g;return P?w+(M-w)*(l-g)/P:w}class ci extends Ue{constructor(l){super(l),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const l=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(l);this._minPos=Je(r,this.min),this._tableRange=Je(r,this.max)-this._minPos,super.initOffsets(l)}buildLookupTable(l){const{min:r,max:a}=this,u=[],g=[];let E,w,M,P,J;for(E=0,w=l.length;E<w;++E)P=l[E],P>=r&&P<=a&&u.push(P);if(u.length<2)return[{time:r,pos:0},{time:a,pos:1}];for(E=0,w=u.length;E<w;++E)J=u[E+1],M=u[E-1],P=u[E],Math.round((J+M)/2)!==P&&g.push({time:P,pos:E/(w-1)});return g}_getTimestampsForTable(){let l=this._cache.all||[];if(l.length)return l;const r=this.getDataTimestamps(),a=this.getLabelTimestamps();return l=r.length&&a.length?this.normalize(r.concat(a)):r.length?r:a,l=this._cache.all=l,l}getDecimalForValue(l){return(Je(this._table,l)-this._minPos)/this._tableRange}getValueForPixel(l){const r=this._offsets,a=this.getDecimalForPixel(l)/r.factor-r.end;return Je(this._table,a*this._tableRange+this._minPos,!0)}}ci.id="timeseries",ci.defaults=Ue.defaults,ne.register(Dr,Bu,bh,Object.freeze({__proto__:null,CategoryScale:Il,LinearScale:au,LogarithmicScale:Al,RadialLinearScale:T,TimeScale:Ue,TimeSeriesScale:ci}));const Oi=ne;var Ki=m(54968),zt=m(5e3);class Dn{constructor(l){this.table=l}reloadData(l,r){return this.table.dataLoader.load(l,void 0,void 0,void 0,r)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(l){return this.table.eventBus.subscribed(l)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(l){return this.table.externalEvents.subscribed(l)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(l,r){return void 0!==r&&(this.table.options[l]=r),this.table.options[l]}setOption(l,r){return void 0!==r&&(this.table.options[l]=r),this.table.options[l]}module(l){return this.table.module(l)}}class Qi extends Dn{constructor(l,r){super(l),this._handler=null}initialize(){}registerTableOption(l,r){this.table.optionsList.register(l,r)}registerColumnOption(l,r){this.table.columnManager.optionsList.register(l,r)}registerTableFunction(l,r){void 0===this.table[l]?this.table[l]=r:console.warn("Unable to bind table function, name already in use",l)}registerComponentFunction(l,r,a){return this.table.componentFunctionBinder.bind(l,r,a)}registerDataHandler(l,r){this.table.rowManager.registerDataPipelineHandler(l,r),this._handler=l}registerDisplayHandler(l,r){this.table.rowManager.registerDisplayPipelineHandler(l,r),this._handler=l}refreshData(l,r){r||(r=this._handler),r&&this.table.rowManager.refreshActiveData(r,!1,l)}}class wn{static elVisible(l){return!(l.offsetWidth<=0&&l.offsetHeight<=0)}static elOffset(l){var r=l.getBoundingClientRect();return{top:r.top+window.pageYOffset-document.documentElement.clientTop,left:r.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(l,r,a=[]){var u={}.__proto__,g=[].__proto__;for(var E in r||(r=Object.assign(Array.isArray(l)?[]:{},l)),l){let M,P,w=l[E];null!=w&&"object"==typeof w&&(w.__proto__===u||w.__proto__===g)&&(M=a.findIndex(J=>J.subject===w),M>-1?r[E]=a[M].copy:(P=Object.assign(Array.isArray(w)?[]:{},w),a.unshift({subject:w,copy:P}),r[E]=this.deepClone(w,P,a)))}return r}}var wo={};let Ao=(()=>{class _ extends Qi{constructor(r){super(r),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(r){var a=!1,u={};this.allowedTypes.forEach(g=>{var w,E="accessor"+(g.charAt(0).toUpperCase()+g.slice(1));r.definition[E]&&(w=this.lookupAccessor(r.definition[E]))&&(a=!0,u[E]={accessor:w,params:r.definition[E+"Params"]||{}})}),a&&(r.modules.accessor=u)}lookupAccessor(r){var a=!1;switch(typeof r){case"string":_.accessors[r]?a=_.accessors[r]:console.warn("Accessor Error - No such accessor found, ignoring: ",r);break;case"function":a=r}return a}transformRow(r,a){var u="accessor"+(a.charAt(0).toUpperCase()+a.slice(1)),g=r.getComponent(),E=wn.deepClone(r.data||{});return this.table.columnManager.traverse(function(w){var M,P,J,ut;w.modules.accessor&&(P=w.modules.accessor[u]||w.modules.accessor.accessor||!1)&&"undefined"!=(M=w.getFieldValue(E))&&(ut=w.getComponent(),J="function"==typeof P.params?P.params(M,E,a,ut,g):P.params,w.setFieldValue(E,P.accessor(M,E,a,J,ut,g)))}),E}}return _.moduleName="accessor",_.accessors=wo,_})();var ys={method:"GET"};function Ns(_,l){var r=[];if(l=l||"",Array.isArray(_))_.forEach((u,g)=>{r=r.concat(Ns(u,l?l+"["+g+"]":g))});else if("object"==typeof _)for(var a in _)r=r.concat(Ns(_[a],l?l+"["+a+"]":a));else r.push({key:l,value:_});return r}function Hr(_){var l=Ns(_),r=[];return l.forEach(function(a){r.push(encodeURIComponent(a.key)+"="+encodeURIComponent(a.value))}),r.join("&")}function Vr(_,l,r){return _&&r&&Object.keys(r).length&&(!l.method||"get"==l.method.toLowerCase())&&(l.method="get",_+=(_.includes("?")?"&":"?")+Hr(r)),_}function io(_,l,r){var a;return new Promise((u,g)=>{if(_=this.urlGenerator.call(this.table,_,l,r),"GET"!=l.method.toUpperCase())if(a="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var E in a.headers)l.headers||(l.headers={}),void 0===l.headers[E]&&(l.headers[E]=a.headers[E]);l.body=a.body.call(this,_,l,r)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);_?(void 0===l.headers&&(l.headers={}),void 0===l.headers.Accept&&(l.headers.Accept="application/json"),void 0===l.headers["X-Requested-With"]&&(l.headers["X-Requested-With"]="XMLHttpRequest"),void 0===l.mode&&(l.mode="cors"),"cors"==l.mode?(void 0===l.headers.Origin&&(l.headers.Origin=window.location.origin),void 0===l.credentials&&(l.credentials="same-origin")):void 0===l.credentials&&(l.credentials="include"),fetch(_,l).then(w=>{w.ok?w.json().then(M=>{u(M)}).catch(M=>{g(M),console.warn("Ajax Load Error - Invalid JSON returned",M)}):(console.error("Ajax Load Error - Connection Error: "+w.status,w.statusText),g(w))}).catch(w=>{console.error("Ajax Load Error - Connection Error: ",w),g(w)})):(console.warn("Ajax Load Error - No URL Set"),u([]))})}function wr(_,l){var r=[];if(l=l||"",Array.isArray(_))_.forEach((u,g)=>{r=r.concat(wr(u,l?l+"["+g+"]":g))});else if("object"==typeof _)for(var a in _)r=r.concat(wr(_[a],l?l+"["+a+"]":a));else r.push({key:l,value:_});return r}var Qr={json:{headers:{"Content-Type":"application/json"},body:function(_,l,r){return JSON.stringify(r)}},form:{headers:{},body:function(_,l,r){var a=wr(r),u=new FormData;return a.forEach(function(g){u.append(g.key,g.value)}),u}}};let dl=(()=>{class _ extends Qi{constructor(r){super(r),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=_.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||_.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||_.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(r,a,u,g){return!((r||!this.url)&&"string"!=typeof r)}requestData(r,a,u,g,E){return this.requestDataCheck(r)?(r&&this.setUrl(r),a&&this.setParams(a,!0),u&&this.setConfig(u),this.sendRequest()):E}setParams(r,a){if(a){this.params=this.params||{};for(let u in r)this.params[u]=r[u]}else this.params=r}getParams(){return this.params||{}}setConfig(r){if(this._loadDefaultConfig(),"string"==typeof r)this.config.method=r;else for(let a in r)this.config[a]=r[a]}_loadDefaultConfig(r){if(!this.config||r){this.config={};for(let a in _.defaultConfig)this.config[a]=_.defaultConfig[a]}}setUrl(r){this.url=r}getUrl(){return this.url}sendRequest(r){var a=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(a,this.config,this.params).then(u=>(this.table.options.ajaxResponse&&(u=this.table.options.ajaxResponse.call(this.table,this.url,this.params,u)),u)):Promise.reject()}}return _.moduleName="ajax",_.defaultConfig=ys,_.defaultURLGenerator=Vr,_.defaultLoaderPromise=io,_.contentTypeFormatters=Qr,_})();var Za={replace:function(_){return this.table.setData(_)},update:function(_){return this.table.updateOrAddData(_)},insert:function(_){return this.table.addData(_)}},xc={table:function(_){var l=[],r=!0,a=this.table.columnManager.columns,u=[],g=[];return(_=_.split("\n")).forEach(function(E){l.push(E.split("\t"))}),!(!l.length||1===l.length&&l[0].length<2)&&(l[0].forEach(function(E){var w=a.find(function(M){return E&&M.definition.title&&E.trim()&&M.definition.title.trim()===E.trim()});w?u.push(w):r=!1}),r||(r=!0,u=[],l[0].forEach(function(E){var w=a.find(function(M){return E&&M.field&&E.trim()&&M.field.trim()===E.trim()});w?u.push(w):r=!1}),r||(u=this.table.columnManager.columnsByIndex)),r&&l.shift(),l.forEach(function(E){var w={};E.forEach(function(M,P){u[P]&&(w[u[P].field]=M)}),g.push(w)}),g)}};let cu=(()=>{class _ extends Qi{constructor(r){super(r),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",r=>{var a,u;if(!this.blocked){if(r.preventDefault(),this.customSelection)a=this.customSelection,this.table.options.clipboardCopyFormatter&&(a=this.table.options.clipboardCopyFormatter("plain",a));else{var g=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");a=(u=this.table.modules.export.genereateHTMLTable(g))?this.generatePlainContent(g):"",this.table.options.clipboardCopyFormatter&&(a=this.table.options.clipboardCopyFormatter("plain",a),u=this.table.options.clipboardCopyFormatter("html",u))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",a):r.clipboardData&&r.clipboardData.setData?(r.clipboardData.setData("text/plain",a),u&&r.clipboardData.setData("text/html",u)):r.originalEvent&&r.originalEvent.clipboardData.setData&&(r.originalEvent.clipboardData.setData("text/plain",a),u&&r.originalEvent.clipboardData.setData("text/html",u)),this.dispatchExternal("clipboardCopied",a,u),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",r=>{this.paste(r)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(r){var a=[];return r.forEach(u=>{var g=[];u.columns.forEach(E=>{var w="";if(E)if("group"===u.type&&(E.value=E.component.getKey()),null===E.value)w="";else switch(typeof E.value){case"object":w=JSON.stringify(E.value);break;case"undefined":w="";break;default:w=E.value}g.push(w)}),a.push(g.join("\t"))}),a.join("\n")}copy(r,a){var u,g;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=r||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((r=document.createRange()).selectNodeContents(this.table.element),(u=window.getSelection()).toString()&&a&&(this.customSelection=u.toString()),u.removeAllRanges(),u.addRange(r)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((g=document.body.createTextRange()).moveToElementText(this.table.element),g.select()),document.execCommand("copy"),u&&u.removeAllRanges())}setPasteAction(r){switch(typeof r){case"string":this.pasteAction=_.pasteActions[r],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",r);break;case"function":this.pasteAction=r}}setPasteParser(r){switch(typeof r){case"string":this.pasteParser=_.pasteParsers[r],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",r);break;case"function":this.pasteParser=r}}paste(r){var a,u,g;this.checkPaseOrigin(r)&&(a=this.getPasteData(r),(u=this.pasteParser.call(this,a))?(r.preventDefault(),this.table.modExists("mutator")&&(u=this.mutateData(u)),g=this.pasteAction.call(this,u),this.dispatchExternal("clipboardPasted",a,u,g)):this.dispatchExternal("clipboardPasteError",a))}mutateData(r){var a=[];return Array.isArray(r)?r.forEach(u=>{a.push(this.table.modules.mutator.transformRow(u,"clipboard"))}):a=r,a}checkPaseOrigin(r){var a=!0;return("DIV"!=r.target.tagName||this.table.modules.edit.currentCell)&&(a=!1),a}getPasteData(r){var a;return window.clipboardData&&window.clipboardData.getData?a=window.clipboardData.getData("Text"):r.clipboardData&&r.clipboardData.getData?a=r.clipboardData.getData("text/plain"):r.originalEvent&&r.originalEvent.clipboardData.getData&&(a=r.originalEvent.clipboardData.getData("text/plain")),a}}return _.moduleName="clipboard",_.pasteActions=Za,_.pasteParsers=xc,_})();class ud{constructor(l){return this._row=l,new Proxy(this,{get:function(r,a,u){return void 0!==r[a]?r[a]:r._row.table.componentFunctionBinder.handle("row",r._row,a)}})}getData(l){return this._row.getData(l)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var l=[];return this._row.getCells().forEach(function(r){l.push(r.getComponent())}),l}getCell(l){var r=this._row.getCell(l);return!!r&&r.getComponent()}_getSelf(){return this._row}}class na{constructor(l){return this._cell=l,new Proxy(this,{get:function(r,a,u){return void 0!==r[a]?r[a]:r._cell.table.componentFunctionBinder.handle("cell",r._cell,a)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(l,r){void 0===r&&(r=!0),this._cell.setValue(l,r)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class uu extends Dn{constructor(l,r){super(l.table),this.table=l.table,this.column=l,this.row=r,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var l=this.element,r=this.column.getField();l.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(l.style.display="inline-flex",l.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(l.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),r&&l.setAttribute("tabulator-field",r),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(E=>{l.classList.add(E)}),"hover"===this.table.options.tooltipGenerationMode&&l.addEventListener("mouseenter",E=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var l;switch(typeof(l=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(l instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(l)}else this.element.innerHTML="",null!=l&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",l);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=l}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var l=this.column.tooltip;l?(!0===l?l=this.value:"function"==typeof l&&!1===(l=l(this.getComponent()))&&(l=""),void 0===l&&(l=""),this.element.setAttribute("title",l)):this.element.setAttribute("title","")}getElement(l){return this.loaded||(this.loaded=!0,l||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(l,r){this.setValueProcessData(l,r)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(l,r){var a=!1;return this.value!=l&&(a=!0,r&&(l=this.chain("cell-value-changing",[this,l],null,l))),this.setValueActual(l),a&&this.dispatch("cell-value-changed",this),a}setValueActual(l){this.oldValue=this.value,this.value=l,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,l),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new na(this)),this.component}}class hd{constructor(l){return this._column=l,this.type="ColumnComponent",new Proxy(this,{get:function(r,a,u){return void 0!==r[a]?r[a]:r._column.table.componentFunctionBinder.handle("column",r._column,a)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var l=[];return this._column.cells.forEach(function(r){l.push(r.getComponent())}),l}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(l){l.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(l){l.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var l=[];return this._column.columns.length&&this._column.columns.forEach(function(r){l.push(r.getComponent())}),l}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(l,r){var a=this._column.table.columnManager.findColumn(l);a?this._column.table.columnManager.moveColumn(this._column,a,r):console.warn("Move Error - No matching column found:",a)}getNextColumn(){var l=this._column.nextColumn();return!!l&&l.getComponent()}getPrevColumn(){var l=this._column.prevColumn();return!!l&&l.getComponent()}updateDefinition(l){return this._column.updateDefinition(l)}getWidth(){return this._column.getWidth()}setWidth(l){var r;return r=!0===l?this._column.reinitializeWidth(!0):this._column.setWidth(l),this._column.table.columnManager.renderer.rerenderColumns(!0),r}}var Ps={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let Xu=(()=>{class _ extends Dn{constructor(r,a){super(a.table),this.definition=r,this.parent=a,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((u,g)=>{var E=new _(u,this);this.attachColumn(E)}),this.checkColumnVisibility()):a.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var r=document.createElement("div");return r.classList.add("tabulator-col"),r.setAttribute("role","columnheader"),r.setAttribute("aria-sort","none"),r}createGroupElement(){var r=document.createElement("div");return r.classList.add("tabulator-col-group-cols"),r}mapDefinitions(){var r=this.table.options.columnDefaults;if(r)for(let a in r)void 0===this.definition[a]&&(this.definition[a]=r[a]);this.definition=this.table.columnManager.optionsList.generate(_.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(r=>{-1===_.defaultOptionList.indexOf(r)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",r)})}setField(r){this.field=r,this.fieldStructure=r?this.table.options.nestedFieldSeparator?r.split(this.table.options.nestedFieldSeparator):[r]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(r){this.parent.registerColumnPosition(r)}registerColumnField(r){this.parent.registerColumnField(r)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(r){r.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var r=this.definition,a=void 0===r.headerTooltip?r.tooltip:r.headerTooltip;a?!0===a?r.field?this.langBind("columns|"+r.field,u=>{this.element.setAttribute("title",u||r.title)}):this.element.setAttribute("title",r.title):("function"==typeof a&&!1===(a=a(this.getComponent()))&&(a=""),this.element.setAttribute("title",a)):this.element.setAttribute("title","")}_initialize(){for(var r=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);r.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===r.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",a=>{this.setTooltip()})}_bindEvents(){var a,u,g,r=this.definition;"function"==typeof r.headerClick&&this.element.addEventListener("click",E=>{r.headerClick(E,this.getComponent())}),"function"==typeof r.headerDblClick&&this.element.addEventListener("dblclick",E=>{r.headerDblClick(E,this.getComponent())}),"function"==typeof r.headerContext&&this.element.addEventListener("contextmenu",E=>{r.headerContext(E,this.getComponent())}),"function"==typeof r.headerTap&&(g=!1,this.element.addEventListener("touchstart",E=>{g=!0},{passive:!0}),this.element.addEventListener("touchend",E=>{g&&r.headerTap(E,this.getComponent()),g=!1})),"function"==typeof r.headerDblTap&&(a=null,this.element.addEventListener("touchend",E=>{a?(clearTimeout(a),a=null,r.headerDblTap(E,this.getComponent())):a=setTimeout(()=>{clearTimeout(a),a=null},300)})),"function"==typeof r.headerTapHold&&(u=null,this.element.addEventListener("touchstart",E=>{clearTimeout(u),u=setTimeout(function(){clearTimeout(u),u=null,g=!1,r.headerTapHold(E,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",E=>{clearTimeout(u),u=null}))}_buildColumnHeader(){var r=this.definition;this.dispatch("column-layout",this),void 0!==r.visible&&(r.visible?this.show(!0):this.hide(!0)),r.cssClass&&r.cssClass.split(" ").forEach(g=>{this.element.classList.add(g)}),r.field&&this.element.setAttribute("tabulator-field",r.field),this.setMinWidth(parseInt(r.minWidth)),r.maxWidth&&this.setMaxWidth(parseInt(r.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var u=document.createElement("div");return u.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),u.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),u}_buildColumnHeaderTitle(){var r=this.definition,a=document.createElement("div");if(a.classList.add("tabulator-col-title"),r.editableTitle){var u=document.createElement("input");u.classList.add("tabulator-title-editor"),u.addEventListener("click",g=>{g.stopPropagation(),u.focus()}),u.addEventListener("change",()=>{r.title=u.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),a.appendChild(u),r.field?this.langBind("columns|"+r.field,g=>{u.value=g||r.title||"&nbsp;"}):u.value=r.title||"&nbsp;"}else r.field?this.langBind("columns|"+r.field,g=>{this._formatColumnHeaderTitle(a,g||r.title||"&nbsp;")}):this._formatColumnHeaderTitle(a,r.title||"&nbsp;");return a}_formatColumnHeaderTitle(r,a){var u=this.chain("column-format",[this,a,r],null,()=>a);switch(typeof u){case"object":u instanceof Node?r.appendChild(u):(r.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",u));break;case"undefined":case"null":r.innerHTML="";break;default:r.innerHTML=u}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(a=>{this.element.classList.add(a)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(r){return r[this.field]}_getNestedData(r){var E,a=r,u=this.fieldStructure,g=u.length;for(let w=0;w<g&&(E=a=a[u[w]],a);w++);return E}_setFlatData(r,a){this.field&&(r[this.field]=a)}_setNestedData(r,a){var u=r,g=this.fieldStructure,E=g.length;for(let w=0;w<E;w++)if(w==E-1)u[g[w]]=a;else{if(!u[g[w]]){if(void 0===a)break;u[g[w]]={}}u=u[g[w]]}}attachColumn(r){this.groupElement?(this.columns.push(r),this.groupElement.appendChild(r.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(r,a){var u=this.parent.isGroup?this.parent.getGroupElement().clientHeight:a||this.parent.getHeadersElement().clientHeight;this.element.style.height=u+"px",this.isGroup&&(this.groupElement.style.minHeight=u-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==r&&(this.element.style.paddingTop="bottom"===r?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(g){g.verticalAlign(r)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(r){r.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(r){var a=[];return this.isGroup&&r&&(this.columns.forEach(function(u){a.push(u.getDefinition(!0))}),this.definition.columns=a),this.definition}checkColumnVisibility(){var r=!1;this.columns.forEach(function(a){a.visible&&(r=!0)}),r?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(r,a){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(u){u.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,a),r||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(r,a){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(u){u.hide()}),this.dispatch("column-hide",this),r||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var r=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(a){a.visible&&(r+=a.getWidth())}),this.contentElement.style.maxWidth=r-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(r){var a=this.columns.indexOf(r);a>-1&&this.columns.splice(a,1),this.columns.length||this.delete()}setWidth(r){this.widthFixed=!0,this.setWidthActual(r)}setWidthActual(r){isNaN(r)&&(r=Math.floor(this.table.element.clientWidth/100*parseInt(r))),r=Math.max(this.minWidth,r),this.maxWidth&&(r=Math.min(this.maxWidth,r)),this.width=r,this.widthStyled=r?r+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(a){a.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var r=[];this.cells.forEach(function(a){a.row.heightInitialized&&(null!==a.row.getElement().offsetParent?(r.push(a.row),a.row.clearCellHeight()):a.row.heightInitialized=!1)}),r.forEach(function(a){a.calcHeight()}),r.forEach(function(a){a.setCellHeight()})}getWidth(){var r=0;return this.isGroup?this.columns.forEach(function(a){a.visible&&(r+=a.getWidth())}):r=this.width,r}getHeight(){return this.element.offsetHeight}setMinWidth(r){this.minWidth=r,this.minWidthStyled=r?r+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(a){a.setMinWidth()})}setMaxWidth(r){this.maxWidth=r,this.maxWidthStyled=r?r+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(a){a.setMaxWidth()})}delete(){return new Promise((r,a)=>{this.isGroup&&this.columns.forEach(function(g){g.delete()}),this.dispatch("column-delete",this);var u=this.cells.length;for(let g=0;g<u;g++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),r()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(r){var a=new uu(this,r);return this.cells.push(a),a}nextColumn(){var r=this.table.columnManager.findColumnIndex(this);return r>-1&&this._nextVisibleColumn(r+1)}_nextVisibleColumn(r){var a=this.table.columnManager.getColumnByIndex(r);return!a||a.visible?a:this._nextVisibleColumn(r+1)}prevColumn(){var r=this.table.columnManager.findColumnIndex(this);return r>-1&&this._prevVisibleColumn(r-1)}_prevVisibleColumn(r){var a=this.table.columnManager.getColumnByIndex(r);return!a||a.visible?a:this._prevVisibleColumn(r-1)}reinitializeWidth(r){this.widthFixed=!1,void 0!==this.definition.width&&!r&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(a=>{a.clearWidth()}));var r=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(a=>{var u=a.getWidth();u>r&&(r=u)}),r&&this.setWidthActual(r+1))}}updateDefinition(r){var a;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(a=Object.assign({},this.getDefinition()),a=Object.assign(a,r),this.table.columnManager.addColumn(a,!1,this).then(u=>(a.field==this.field&&(this.field=!1),this.delete().then(()=>u.getComponent()))))}deleteCell(r){var a=this.cells.indexOf(r);a>-1&&this.cells.splice(a,1)}getComponent(){return this.component||(this.component=new hd(this)),this.component}}return _.defaultOptionList=Ps,_})();class dd{constructor(l){return this._row=l,new Proxy(this,{get:function(r,a,u){return void 0!==r[a]?r[a]:r._row.table.componentFunctionBinder.handle("row",r._row,a)}})}getData(l){return this._row.getData(l)}getElement(){return this._row.getElement()}getCells(){var l=[];return this._row.getCells().forEach(function(r){l.push(r.getComponent())}),l}getCell(l){var r=this._row.getCell(l);return!!r&&r.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(l){return this._row.table.rowManager.getRowPosition(this._row,l)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(l,r){this._row.moveToRow(l,r)}update(l){return this._row.updateData(l)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var l=this._row.nextRow();return l&&l.getComponent()}getPrevRow(){var l=this._row.prevRow();return l&&l.getComponent()}}class fa extends Dn{constructor(l,r,a="row"){super(r.table),this.parent=r,this.data={},this.type=a,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(l)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var l=document.createElement("div");l.classList.add("tabulator-row"),l.setAttribute("role","row"),this.element=l}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(l){if(this.create(),!this.initialized||l){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),l&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(l){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(l){var r=0,a=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(u){var g=u.getHeight();g>r&&(r=g)}),this.height=l?Math.max(r,a):this.manualHeight?this.height:Math.max(r,a),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(l){l.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(l){l.clearHeight()})}normalizeHeight(l){l&&this.clearCellHeight(),this.calcHeight(l),this.setCellHeight()}setHeight(l,r){(this.height!=l||r)&&(this.manualHeight=!0,this.height=l,this.heightStyled=l?l+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(l){var r=this.cells.indexOf(l);r>-1&&this.cells.splice(r,1)}setData(l){this.data=this.chain("row-data-init-before",[this,l],void 0,l),this.dispatch("row-data-init-after",this)}updateData(l){var u,r=this.element&&wn.elVisible(this.element),a={};return new Promise((g,E)=>{for(var w in"string"==typeof l&&(l=JSON.parse(l)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(a=Object.assign(a,this.data),a=Object.assign(a,l)),u=this.chain("row-data-changing",[this,a,l],null,l))this.data[w]=u[w];for(var w in this.dispatch("row-data-save-after",this),l)this.table.columnManager.getColumnsByFieldRoot(w).forEach(J=>{let ut=this.getCell(J.getField());if(ut){let Dt=J.getFieldValue(u);ut.getValue()!=Dt&&(ut.setValueProcessData(Dt),r&&ut.cellRendered())}});r?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,r,l),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),g()})}getData(l){return l?this.chain("row-data-retrieve",[this,l],null,this.data):this.data}getCell(l){return l=this.table.columnManager.findColumn(l),this.initialized||this.generateCells(),this.cells.find(function(a){return a.column===l})}getCellIndex(l){return this.cells.findIndex(function(r){return r===l})}findCell(l){return this.cells.find(r=>r.element===l)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(l,r){var a=this.table.rowManager.findRow(l);a?(this.table.rowManager.moveRowActual(this,a,!r),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",l)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(l){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,l),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var l=this.cells.length;for(let r=0;r<l;r++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new dd(this)),this.component}}var Jd={avg:function(_,l,r){var a=0,u=void 0!==r.precision?r.precision:2;return _.length&&(a=_.reduce(function(g,E){return Number(g)+Number(E)}),a/=_.length,a=!1!==u?a.toFixed(u):a),parseFloat(a).toString()},max:function(_,l,r){var a=null,u=void 0!==r.precision&&r.precision;return _.forEach(function(g){((g=Number(g))>a||null===a)&&(a=g)}),null!==a?!1!==u?a.toFixed(u):a:""},min:function(_,l,r){var a=null,u=void 0!==r.precision&&r.precision;return _.forEach(function(g){((g=Number(g))<a||null===a)&&(a=g)}),null!==a?!1!==u?a.toFixed(u):a:""},sum:function(_,l,r){var a=0,u=void 0!==r.precision&&r.precision;return _.length&&_.forEach(function(g){g=Number(g),a+=isNaN(g)?0:Number(g)}),!1!==u?a.toFixed(u):a},concat:function(_,l,r){var a=0;return _.length&&(a=_.reduce(function(u,g){return String(u)+String(g)})),a},count:function(_,l,r){var a=0;return _.length&&_.forEach(function(u){u&&a++}),a}};let Up=(()=>{class _ extends Qi{constructor(r){super(r),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var r=document.createElement("div");return r.classList.add("tabulator-calcs-holder"),r}initialize(){this.genColumn=new Xu({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(r){this.recalc(this.table.rowManager.activeRows),r&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(r){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(r){(r.column.definition.topCalc||r.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(r.row)):this.recalcActiveRows())}initializeColumnCheck(r){(r.definition.topCalc||r.definition.bottomCalc)&&this.initializeColumn(r)}initializeColumn(r){var a=r.definition,u={topCalcParams:a.topCalcParams||{},botCalcParams:a.bottomCalcParams||{}};if(a.topCalc){switch(typeof a.topCalc){case"string":_.calculations[a.topCalc]?u.topCalc=_.calculations[a.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",a.topCalc);break;case"function":u.topCalc=a.topCalc}u.topCalc&&(r.modules.columnCalcs=u,this.topCalcs.push(r),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(a.bottomCalc){switch(typeof a.bottomCalc){case"string":_.calculations[a.bottomCalc]?u.botCalc=_.calculations[a.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",a.bottomCalc);break;case"function":u.botCalc=a.bottomCalc}u.botCalc&&(r.modules.columnCalcs=u,this.botCalcs.push(r),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var r=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),r=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),r=!0),r&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(r){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-r+"px")}recalc(r){var a;if(this.topInitialized||this.botInitialized){if(this.rowsToData(r),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),a=this.generateRow("top",this.rowsToData(r)),this.topRow=a;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(a.getElement()),a.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),a=this.generateRow("bottom",this.rowsToData(r)),this.botRow=a;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(a.getElement()),a.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(r){this.recalcGroup(this.table.modules.groupRows.getRowGroup(r))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(a=>{this.recalcGroup(a)})}recalcGroup(r){var a,u;r&&r.calcs&&(r.calcs.bottom&&(a=this.rowsToData(r.rows),u=this.generateRowData("bottom",a),r.calcs.bottom.updateData(u),r.calcs.bottom.reinitialize()),r.calcs.top&&(a=this.rowsToData(r.rows),u=this.generateRowData("top",a),r.calcs.top.updateData(u),r.calcs.top.reinitialize()))}generateTopRow(r){return this.generateRow("top",this.rowsToData(r))}generateBottomRow(r){return this.generateRow("bottom",this.rowsToData(r))}rowsToData(r){var a=[];return r.forEach(u=>{if(a.push(u.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&u.modules.dataTree.open){var g=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(u));a=a.concat(g)}}),a}generateRow(r,a){var g,u=this.generateRowData(r,a);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),g=new fa(u,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),g.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+r),g.component=!1,g.getComponent=()=>(g.component||(g.component=new ud(this)),g.component),g.generateCells=()=>{var E=[];this.table.columnManager.columnsByIndex.forEach(w=>{this.genColumn.setField(w.getField()),this.genColumn.hozAlign=w.hozAlign,this.genColumn.modules.format=w.definition[r+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(w.definition[r+"CalcFormatter"]),params:w.definition[r+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=w.definition.cssClass;var M=new uu(this.genColumn,g);M.getElement(),M.column=w,M.setWidth(),w.cells.push(M),E.push(M),w.visible||M.hide()}),g.cells=E},g}generateRowData(r,a){var w,M,u={},E="top"==r?"topCalc":"botCalc";return("top"==r?this.topCalcs:this.botCalcs).forEach(function(P){var J=[];P.modules.columnCalcs&&P.modules.columnCalcs[E]&&(a.forEach(function(ut){J.push(P.getFieldValue(ut))}),w="function"==typeof P.modules.columnCalcs[M=E+"Params"]?P.modules.columnCalcs[M](J,a):P.modules.columnCalcs[M],P.setFieldValue(u,P.modules.columnCalcs[E](J,a,w)))}),u}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var r={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(u=>{r[u.getKey()]=this.getGroupResults(u)}):r={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},r}getGroupResults(r){var a=r._getSelf(),u=r.getSubGroups(),g={};return u.forEach(w=>{g[w.getKey()]=this.getGroupResults(w)}),{top:a.calcs.top?a.calcs.top.getData():{},bottom:a.calcs.bottom?a.calcs.bottom.getData():{},groups:g}}}return _.moduleName="columnCalcs",_.calculations=Jd,_})(),Gp=(()=>{class _ extends Qi{constructor(r){super(r),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var r=null,a=this.table.columnManager.getFirstVisibileColumn(),u=this.table.options;switch(this.field=u.dataTreeChildField,this.indent=u.dataTreeChildIndent,this.elementField=u.dataTreeElementColumn||!!a&&a.field,u.dataTreeBranchElement&&(!0===u.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof u.dataTreeBranchElement?((r=document.createElement("div")).innerHTML=u.dataTreeBranchElement,this.branchEl=r.firstChild):this.branchEl=u.dataTreeBranchElement),u.dataTreeCollapseElement?"string"==typeof u.dataTreeCollapseElement?((r=document.createElement("div")).innerHTML=u.dataTreeCollapseElement,this.collapseEl=r.firstChild):this.collapseEl=u.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),u.dataTreeExpandElement?"string"==typeof u.dataTreeExpandElement?((r=document.createElement("div")).innerHTML=u.dataTreeExpandElement,this.expandEl=r.firstChild):this.expandEl=u.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof u.dataTreeStartExpanded){case"boolean":this.startOpen=function(g,E){return u.dataTreeStartExpanded};break;case"function":this.startOpen=u.dataTreeStartExpanded;break;default:this.startOpen=function(g,E){return u.dataTreeStartExpanded[E]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(r){return this.getTreeChildren(r,!0)}columnMoving(){var r=[];return this.table.rowManager.rows.forEach(a=>{r=r.concat(this.getTreeChildren(a,!1,!0))}),r}rowDataChanged(r,a,u){this.redrawNeeded(u)&&(this.initializeRow(r),a&&(this.layoutRow(r),this.refreshData(!0)))}initializeRow(r){var a=r.getData()[this.field],u=Array.isArray(a),g=u||!u&&"object"==typeof a&&null!==a;!g&&r.modules.dataTree&&r.modules.dataTree.branchEl&&r.modules.dataTree.branchEl.parentNode.removeChild(r.modules.dataTree.branchEl),!g&&r.modules.dataTree&&r.modules.dataTree.controlEl&&r.modules.dataTree.controlEl.parentNode.removeChild(r.modules.dataTree.controlEl),r.modules.dataTree={index:r.modules.dataTree?r.modules.dataTree.index:0,open:!!g&&(r.modules.dataTree?r.modules.dataTree.open:this.startOpen(r.getComponent(),0)),controlEl:!(!r.modules.dataTree||!g)&&r.modules.dataTree.controlEl,branchEl:!(!r.modules.dataTree||!g)&&r.modules.dataTree.branchEl,parent:!!r.modules.dataTree&&r.modules.dataTree.parent,children:g}}reinitializeRowChildren(r){this.getTreeChildren(r,!1,!0).forEach(function(u){u.reinitialize(!0)})}layoutRow(r){var u=(this.elementField?r.getCell(this.elementField):r.getCells()[0]).getElement(),g=r.modules.dataTree;g.branchEl&&(g.branchEl.parentNode&&g.branchEl.parentNode.removeChild(g.branchEl),g.branchEl=!1),g.controlEl&&(g.controlEl.parentNode&&g.controlEl.parentNode.removeChild(g.controlEl),g.controlEl=!1),this.generateControlElement(r,u),r.getElement().classList.add("tabulator-tree-level-"+g.index),g.index&&(this.branchEl?(g.branchEl=this.branchEl.cloneNode(!0),u.insertBefore(g.branchEl,u.firstChild),this.table.rtl?g.branchEl.style.marginRight=(g.branchEl.offsetWidth+g.branchEl.style.marginLeft)*(g.index-1)+g.index*this.indent+"px":g.branchEl.style.marginLeft=(g.branchEl.offsetWidth+g.branchEl.style.marginRight)*(g.index-1)+g.index*this.indent+"px"):this.table.rtl?u.style.paddingRight=parseInt(window.getComputedStyle(u,null).getPropertyValue("padding-right"))+g.index*this.indent+"px":u.style.paddingLeft=parseInt(window.getComputedStyle(u,null).getPropertyValue("padding-left"))+g.index*this.indent+"px")}generateControlElement(r,a){var u=r.modules.dataTree,g=(a=a||r.getCells()[0].getElement(),u.controlEl);!1!==u.children&&(u.open?(u.controlEl=this.collapseEl.cloneNode(!0),u.controlEl.addEventListener("click",E=>{E.stopPropagation(),this.collapseRow(r)})):(u.controlEl=this.expandEl.cloneNode(!0),u.controlEl.addEventListener("click",E=>{E.stopPropagation(),this.expandRow(r)})),u.controlEl.addEventListener("mousedown",E=>{E.stopPropagation()}),g&&g.parentNode===a?g.parentNode.replaceChild(u.controlEl,g):a.insertBefore(u.controlEl,a.firstChild))}setDisplayIndex(r){this.displayIndex=r}getDisplayIndex(){return this.displayIndex}getRows(r){var a=[];return r.forEach((u,g)=>{var E;a.push(u),u instanceof fa&&(u.create(),!(E=u.modules.dataTree.children).index&&!1!==E.children&&this.getChildren(u).forEach(M=>{M.create(),a.push(M)}))}),a}getChildren(r,a){var u=r.modules.dataTree,g=[],E=[];return!1!==u.children&&(u.open||a)&&(Array.isArray(u.children)||(u.children=this.generateChildren(r)),g=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(u.children):u.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(g),g.forEach(w=>{E.push(w),this.getChildren(w).forEach(P=>{E.push(P)})})),E}generateChildren(r){var a=[],u=r.getData()[this.field];return Array.isArray(u)||(u=[u]),u.forEach(g=>{var E=new fa(g||{},this.table.rowManager);E.create(),E.modules.dataTree.index=r.modules.dataTree.index+1,E.modules.dataTree.parent=r,E.modules.dataTree.children&&(E.modules.dataTree.open=this.startOpen(E.getComponent(),E.modules.dataTree.index)),a.push(E)}),a}expandRow(r,a){var u=r.modules.dataTree;!1!==u.children&&(u.open=!0,r.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",r.getComponent(),r.modules.dataTree.index))}collapseRow(r){var a=r.modules.dataTree;!1!==a.children&&(a.open=!1,r.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",r.getComponent(),r.modules.dataTree.index))}toggleRow(r){var a=r.modules.dataTree;!1!==a.children&&(a.open?this.collapseRow(r):this.expandRow(r))}getTreeParent(r){return!!r.modules.dataTree.parent&&r.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(r){var a=r.modules.dataTree,u=[];return a.children&&(Array.isArray(a.children)||(a.children=this.generateChildren(r)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(a.children):a.children).forEach(E=>{E instanceof fa&&u.push(E)})),u}rowDelete(r){var u,a=r.modules.dataTree.parent;a&&(!1!==(u=this.findChildIndex(r,a))&&a.data[this.field].splice(u,1),a.data[this.field].length||delete a.data[this.field],this.initializeRow(a),this.layoutRow(a)),this.refreshData(!0)}addTreeChildRow(r,a,u,g){var E=!1;"string"==typeof a&&(a=JSON.parse(a)),Array.isArray(r.data[this.field])||(r.data[this.field]=[],r.modules.dataTree.open=this.startOpen(r.getComponent(),r.modules.dataTree.index)),void 0!==g&&!1!==(E=this.findChildIndex(g,r))&&r.data[this.field].splice(u?E:E+1,0,a),!1===E&&(u?r.data[this.field].unshift(a):r.data[this.field].push(a)),this.initializeRow(r),this.layoutRow(r),this.refreshData(!0)}findChildIndex(r,a){var u=!1;return"object"==typeof r?r instanceof fa?u=r.data:r instanceof RowComponent?u=r._getSelf().data:"undefined"!=typeof HTMLElement&&r instanceof HTMLElement&&a.modules.dataTree&&(u=a.modules.dataTree.children.find(g=>g instanceof fa&&g.element===r))&&(u=u.data):u=null!=r&&a.data[this.field].find(g=>g.data[this.table.options.index]==r),u&&(Array.isArray(a.data[this.field])&&(u=a.data[this.field].indexOf(u)),-1==u&&(u=!1)),u}getTreeChildren(r,a,u){var g=r.modules.dataTree,E=[];return g.children&&(Array.isArray(g.children)||(g.children=this.generateChildren(r)),g.children.forEach(w=>{w instanceof fa&&(E.push(a?w.getComponent():w),u&&(E=E.concat(this.getTreeChildren(w,a,u))))})),E}checkForRestyle(r){r.row.cells.indexOf(r)||this.layoutRow(r.row)}getChildField(){return this.field}redrawNeeded(r){return!!this.field&&void 0!==r[this.field]||!!this.elementField&&void 0!==r[this.elementField]}}return _.moduleName="dataTree",_})();var Rh={csv:function(_,l,r){var a=l&&l.delimiter?l.delimiter:",",u=[],g=[];_.forEach(E=>{var w=[];switch(E.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":E.columns.forEach((M,P)=>{M&&1===M.depth&&(g[P]=null==M.value?"":'"'+String(M.value).split('"').join('""')+'"')});break;case"row":E.columns.forEach(M=>{if(M){switch(typeof M.value){case"object":M.value=JSON.stringify(M.value);break;case"undefined":case"null":M.value=""}w.push('"'+String(M.value).split('"').join('""')+'"')}}),u.push(w.join(a))}}),g.length&&u.unshift(g.join(a)),u=u.join("\n"),l.bom&&(u="\ufeff"+u),r(u,"text/csv")},json:function(_,l,r){var a=[];_.forEach(u=>{var g={};switch(u.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":u.columns.forEach(E=>{E&&(g[E.component.getField()]=E.value)}),a.push(g)}}),r(a=JSON.stringify(a,null,"\t"),"application/json")},pdf:function(_,l,r){var a=[],u=[],g={},E=l.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},w=l.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},M=l.jsPDF||{},P=l&&l.title?l.title:"";function J(Dt,Lt){var Qt=[];return Dt.columns.forEach(de=>{var ye;if(de){switch(typeof de.value){case"object":de.value=JSON.stringify(de.value);break;case"undefined":case"null":de.value=""}ye={content:de.value,colSpan:de.width,rowSpan:de.height},Lt&&(ye.styles=Lt),Qt.push(ye)}else Qt.push("")}),Qt}M.orientation||(M.orientation=l.orientation||"landscape"),M.unit||(M.unit="pt"),_.forEach(Dt=>{switch(Dt.type){case"header":a.push(J(Dt));break;case"group":u.push(J(Dt,E));break;case"calc":u.push(J(Dt,w));break;case"row":u.push(J(Dt))}});var ut=new jspdf.jsPDF(M);l&&l.autoTable&&(g="function"==typeof l.autoTable?l.autoTable(ut)||{}:l.autoTable),P&&(g.didDrawPage=function(Dt){ut.text(P,40,30)}),g.head=a,g.body=u,ut.autoTable(g),l&&l.documentProcessing&&l.documentProcessing(ut),r(ut.output("arraybuffer"),"application/pdf")},xlsx:function(_,l,r){var u=l.sheetName||"Sheet1",g=XLSX.utils.book_new(),E=new Dn(this);function M(){var ut=[],Dt=[],Lt={},Qt={s:{c:0,r:0},e:{c:_[0]?_[0].columns.reduce((de,ye)=>de+(ye&&ye.width?ye.width:1),0):0,r:_.length}};return _.forEach((de,ye)=>{var De=[];de.columns.forEach(function(ai,xi){ai?(De.push(ai.value instanceof Date||"object"!=typeof ai.value?ai.value:JSON.stringify(ai.value)),(ai.width>1||ai.height>-1)&&Dt.push({s:{r:ye,c:xi},e:{r:ye+ai.height-1,c:xi+ai.width-1}})):De.push("")}),ut.push(De)}),XLSX.utils.sheet_add_aoa(Lt,ut),Lt["!ref"]=XLSX.utils.encode_range(Qt),Dt.length&&(Lt["!merges"]=Dt),Lt}if(g.SheetNames=[],g.Sheets={},l.sheetOnly)r(M());else{if(l.sheets)for(var P in l.sheets)!0===l.sheets[P]?(g.SheetNames.push(P),g.Sheets[P]=M()):(g.SheetNames.push(P),E.commsSend(l.sheets[P],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(ut){g.Sheets[P]=ut}}));else g.SheetNames.push(u),g.Sheets[u]=M();l.documentProcessing&&(g=l.documentProcessing(g)),r(function(ut){for(var Dt=new ArrayBuffer(ut.length),Lt=new Uint8Array(Dt),Qt=0;Qt!=ut.length;++Qt)Lt[Qt]=255&ut.charCodeAt(Qt);return Dt}(XLSX.write(g,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(_,l,r){this.modExists("export",!0)&&r(this.modules.export.genereateHTMLTable(_),"text/html")}};let Ha=(()=>{class _ extends Qi{constructor(r){super(r),this.registerTableOption("downloadReady",function(a,u){return u}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(r,a,u,g){this.download(r,a,u,g,!0)}download(r,a,u,g,E){var w=!1;if("function"==typeof r?w=r:_.downloaders[r]?w=_.downloaders[r]:console.warn("Download Error - No such download type found: ",r),w){var P=this.generateExportList(g);w.call(this.table,P,u||{},function(J,ut){E?!0===E?this.triggerDownload(J,ut,r,a,!0):E(J):this.triggerDownload(J,ut,r,a)}.bind(this))}}generateExportList(r){var a=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,r||this.table.options.downloadRowRange,"download"),u=this.table.options.groupHeaderDownload;return u&&!Array.isArray(u)&&(u=[u]),a.forEach(g=>{var E;"group"===g.type&&(E=g.columns[0],u&&u[g.indent]&&(E.value=u[g.indent](E.value,g.component._group.getRowCount(),g.component._group.getData(),g.component)))}),a}triggerDownload(r,a,u,g,E){var w=document.createElement("a"),M=new Blob([r],{type:a});g=g||"Tabulator."+("function"==typeof u?"txt":u),(M=this.table.options.downloadReady(r,M))&&(E?window.open(window.URL.createObjectURL(M)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(M,g):(w.setAttribute("href",window.URL.createObjectURL(M)),w.setAttribute("download",g),w.style.display="none",document.body.appendChild(w),w.click(),document.body.removeChild(w)),this.dispatchExternal("downloadComplete"))}commsReceived(r,a,u){"intercept"===a&&this.download(u.type,"",u.options,u.active,u.intercept)}}return _.moduleName="download",_.downloaders=Rh,_})();function Ku(_,l){var r=l.mask,a=void 0!==l.maskLetterChar?l.maskLetterChar:"A",u=void 0!==l.maskNumberChar?l.maskNumberChar:"9",g=void 0!==l.maskWildcardChar?l.maskWildcardChar:"*";function E(w){var M=r[w];void 0!==M&&M!==g&&M!==a&&M!==u&&(_.value=_.value+""+M,E(w+1))}_.addEventListener("keydown",w=>{var M=_.value.length,P=w.key;if(w.keyCode>46){if(M>=r.length)return w.preventDefault(),w.stopPropagation(),!1;switch(r[M]){case a:if(P.toUpperCase()==P.toLowerCase())return w.preventDefault(),w.stopPropagation(),!1;break;case u:if(isNaN(P))return w.preventDefault(),w.stopPropagation(),!1;break;case g:break;default:if(P!==r[M])return w.preventDefault(),w.stopPropagation(),!1}}}),_.addEventListener("keyup",w=>{w.keyCode>46&&l.maskAutoFill&&E(_.value.length)}),_.placeholder||(_.placeholder=r),l.maskAutoFill&&E(_.value.length)}var Dh={input:function(_,l,r,a,u){var g=_.getValue(),E=document.createElement("input");if(E.setAttribute("type",u.search?"search":"text"),E.style.padding="4px",E.style.width="100%",E.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let M in u.elementAttributes)"+"==M.charAt(0)?(M=M.slice(1),E.setAttribute(M,E.getAttribute(M)+u.elementAttributes["+"+M])):E.setAttribute(M,u.elementAttributes[M]);function w(M){null==g&&""!==E.value||E.value!==g?r(E.value)&&(g=E.value):a()}return E.value=void 0!==g?g:"",l(function(){E.focus({preventScroll:!0}),E.style.height="100%"}),E.addEventListener("change",w),E.addEventListener("blur",w),E.addEventListener("keydown",function(M){switch(M.keyCode){case 13:w();break;case 27:a();break;case 35:case 36:M.stopPropagation()}}),u.mask&&Ku(E,u),E},textarea:function(_,l,r,a,u){var g=_.getValue(),E=u.verticalNavigation||"hybrid",w=String(null!=g?g:""),P=(w.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),J=0;if(P.style.display="block",P.style.padding="2px",P.style.height="100%",P.style.width="100%",P.style.boxSizing="border-box",P.style.whiteSpace="pre-wrap",P.style.resize="none",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let Dt in u.elementAttributes)"+"==Dt.charAt(0)?(Dt=Dt.slice(1),P.setAttribute(Dt,P.getAttribute(Dt)+u.elementAttributes["+"+Dt])):P.setAttribute(Dt,u.elementAttributes[Dt]);function ut(Dt){null==g&&""!==P.value||P.value!==g?(r(P.value)&&(g=P.value),setTimeout(function(){_.getRow().normalizeHeight()},300)):a()}return P.value=w,l(function(){P.focus({preventScroll:!0}),P.style.height="100%",P.style.height=P.scrollHeight+"px",_.getRow().normalizeHeight()}),P.addEventListener("change",ut),P.addEventListener("blur",ut),P.addEventListener("keyup",function(){P.style.height="";var Dt=P.scrollHeight;P.style.height=Dt+"px",Dt!=J&&(J=Dt,_.getRow().normalizeHeight())}),P.addEventListener("keydown",function(Dt){switch(Dt.keyCode){case 27:a();break;case 38:("editor"==E||"hybrid"==E&&P.selectionStart)&&(Dt.stopImmediatePropagation(),Dt.stopPropagation());break;case 40:("editor"==E||"hybrid"==E&&P.selectionStart!==P.value.length)&&(Dt.stopImmediatePropagation(),Dt.stopPropagation());break;case 35:case 36:Dt.stopPropagation()}}),u.mask&&Ku(P,u),P},number:function(_,l,r,a,u){var g=_.getValue(),E=u.verticalNavigation||"editor",w=document.createElement("input");if(w.setAttribute("type","number"),void 0!==u.max&&w.setAttribute("max",u.max),void 0!==u.min&&w.setAttribute("min",u.min),void 0!==u.step&&w.setAttribute("step",u.step),w.style.padding="4px",w.style.width="100%",w.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let J in u.elementAttributes)"+"==J.charAt(0)?(J=J.slice(1),w.setAttribute(J,w.getAttribute(J)+u.elementAttributes["+"+J])):w.setAttribute(J,u.elementAttributes[J]);w.value=g;var M=function(J){P()};function P(){var J=w.value;!isNaN(J)&&""!==J&&(J=Number(J)),J!==g?r(J)&&(g=J):a()}return l(function(){w.removeEventListener("blur",M),w.focus({preventScroll:!0}),w.style.height="100%",w.addEventListener("blur",M)}),w.addEventListener("keydown",function(J){switch(J.keyCode){case 13:P();break;case 27:a();break;case 38:case 40:"editor"==E&&(J.stopImmediatePropagation(),J.stopPropagation());break;case 35:case 36:J.stopPropagation()}}),u.mask&&Ku(w,u),w},range:function(_,l,r,a,u){var g=_.getValue(),E=document.createElement("input");if(E.setAttribute("type","range"),void 0!==u.max&&E.setAttribute("max",u.max),void 0!==u.min&&E.setAttribute("min",u.min),void 0!==u.step&&E.setAttribute("step",u.step),E.style.padding="4px",E.style.width="100%",E.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let M in u.elementAttributes)"+"==M.charAt(0)?(M=M.slice(1),E.setAttribute(M,E.getAttribute(M)+u.elementAttributes["+"+M])):E.setAttribute(M,u.elementAttributes[M]);function w(){var M=E.value;!isNaN(M)&&""!==M&&(M=Number(M)),M!=g?r(M)&&(g=M):a()}return E.value=g,l(function(){E.focus({preventScroll:!0}),E.style.height="100%"}),E.addEventListener("blur",function(M){w()}),E.addEventListener("keydown",function(M){switch(M.keyCode){case 13:w();break;case 27:a()}}),E},select:function(_,l,r,a,u){var g=this,E=_.getElement(),w=_.getValue(),M=u.verticalNavigation||"editor",P=void 0!==w||null===w?Array.isArray(w)?w:[w]:void 0!==u.defaultValue?u.defaultValue:[],J=document.createElement("input"),ut=document.createElement("div"),Dt=u.multiselect,Lt=[],Qt={},de=[],ye=[],De=!0,ai=!1,xi="",Ri=null;function Si(Ai){var Fs,gn={},uo=g.table.getData();return(Fs=Ai?g.table.columnManager.getColumnByField(Ai):_.getColumn()._getSelf())?uo.forEach(function(Fl){var Bl=Fs.getFieldValue(Fl);null!=Bl&&""!==Bl&&(gn[Bl]=!0)}):console.warn("unable to find matching column to create select lookup list:",Ai),Object.keys(gn)}function qi(Ai,gn){!Dt&&Qt&&Qt.element&&Qt.element.classList.remove("active"),Qt&&Qt.element&&Qt.element.classList.remove("focused"),Qt=Ai,Ai.element&&(Ai.element.classList.add("focused"),gn&&Ai.element.classList.add("active")),Ai&&Ai.element&&Ai.element.scrollIntoView&&Ai.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function an(Ai){-1==ye.indexOf(Ai)&&(ye.push(Ai),qi(Ai,!0)),zi()}function zn(Ai){var gn=ye[Ai];Ai>-1&&(ye.splice(Ai,1),gn.element&&gn.element.classList.remove("active"))}function tn(Ai){Ai||(Ai=Qt);var gn=ye.indexOf(Ai);gn>-1?zn(gn):(!0!==Dt&&ye.length>=Dt&&zn(0),an(Ai)),zi()}function Vn(Ai){co(),Ai||(Ai=Qt),Ai&&(J.value=Ai.label,r(Ai.value)),P=[Ai.value]}function Bo(Ai){Ai||co();var gn=[];ye.forEach(uo=>{gn.push(uo.value)}),P=gn,r(gn)}function zi(){var Ai=[];ye.forEach(gn=>{Ai.push(gn.label)}),J.value=Ai.join(", "),!1===g.currentCell&&Bo(!0)}function In(){co(),a()}function co(){ut.parentNode&&ut.parentNode.removeChild(ut),g.table.rowManager.element.removeEventListener("scroll",In)}if((Array.isArray(u)||!Array.isArray(u)&&"object"==typeof u&&!u.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),u={values:u}),J.setAttribute("type","text"),J.style.padding="4px",J.style.width="100%",J.style.boxSizing="border-box",J.style.cursor="default",J.readOnly=0!=this.currentCell,u.elementAttributes&&"object"==typeof u.elementAttributes)for(let Ai in u.elementAttributes)"+"==Ai.charAt(0)?(Ai=Ai.slice(1),J.setAttribute(Ai,J.getAttribute(Ai)+u.elementAttributes["+"+Ai])):J.setAttribute(Ai,u.elementAttributes[Ai]);return J.value=void 0!==w||null===w?w:"",J.addEventListener("search",function(Ai){J.value||(function(){var Ai=ye.length;for(let gn=0;gn<Ai;gn++)zn(0)}(),Bo())}),J.addEventListener("keydown",function(Ai){var gn;switch(Ai.keyCode){case 38:gn=Lt.indexOf(Qt),("editor"==M||"hybrid"==M&&gn)&&(Ai.stopImmediatePropagation(),Ai.stopPropagation(),Ai.preventDefault(),gn>0&&qi(Lt[gn-1],!Dt));break;case 40:gn=Lt.indexOf(Qt),("editor"==M||"hybrid"==M&&gn<Lt.length-1)&&(Ai.stopImmediatePropagation(),Ai.stopPropagation(),Ai.preventDefault(),gn<Lt.length-1&&qi(-1==gn?Lt[0]:Lt[gn+1],!Dt));break;case 37:case 39:Ai.stopImmediatePropagation(),Ai.stopPropagation(),Ai.preventDefault();break;case 13:Dt?tn():Vn();break;case 27:In();break;case 9:break;default:!1===g.currentCell&&Ai.preventDefault(),Ai.keyCode>=38&&Ai.keyCode<=90&&function(Ai){clearTimeout(Ri);var gn=String.fromCharCode(event.keyCode).toLowerCase();xi+=gn.toLowerCase();var uo=Lt.find(Fs=>void 0!==Fs.label&&Fs.label.toLowerCase().startsWith(xi));uo&&qi(uo,!Dt),Ri=setTimeout(()=>{xi=""},800)}()}}),J.addEventListener("blur",function(Ai){De&&(Dt?Bo():In())}),J.addEventListener("focus",function(Ai){ai||function(){if(ye=[],!ut.parentNode){!function(Ai,gn){var uo=[],Fs=[];function Fl(Ko){return gn.indexOf((Ko={label:Ko.label,value:Ko.value,itemParams:Ko.itemParams,elementAttributes:Ko.elementAttributes,element:!1}).value)>-1&&an(Ko),uo.push(Ko),Fs.push(Ko),Ko}if("function"==typeof Ai&&(Ai=Ai(_)),Array.isArray(Ai))Ai.forEach(function(Ko){var _a;"object"==typeof Ko?Ko.options?(Fs.push(_a={label:Ko.label,group:!0,itemParams:Ko.itemParams,elementAttributes:Ko.elementAttributes,element:!1}),Ko.options.forEach(function(mf){Fl(mf)})):Fl(Ko):(gn.indexOf((_a={label:Ko,value:Ko,element:!1}).value)>-1&&an(_a),uo.push(_a),Fs.push(_a))});else for(var Bl in Ai){var Hh={label:Ai[Bl],value:Bl,element:!1};gn.indexOf(Hh.value)>-1&&an(Hh),uo.push(Hh),Fs.push(Hh)}u.sortValuesList&&(uo.sort((Ko,_a)=>Ko.label<_a.label?-1:Ko.label>_a.label?1:0),Fs.sort((Ko,_a)=>Ko.label<_a.label?-1:Ko.label>_a.label?1:0),"asc"!==u.sortValuesList&&(uo.reverse(),Fs.reverse())),Lt=uo,de=Fs,function(){for(;ut.firstChild;)ut.removeChild(ut.firstChild);de.forEach(function(Ai){var gn=Ai.element;if(!gn){if(gn=document.createElement("div"),Ai.label=u.listItemFormatter?u.listItemFormatter(Ai.value,Ai.label,_,gn,Ai.itemParams):Ai.label,Ai.group?(gn.classList.add("tabulator-edit-select-list-group"),gn.tabIndex=0,gn.innerHTML=""===Ai.label?"&nbsp;":Ai.label):(gn.classList.add("tabulator-edit-select-list-item"),gn.tabIndex=0,gn.innerHTML=""===Ai.label?"&nbsp;":Ai.label,gn.addEventListener("click",function(){ai=!0,setTimeout(()=>{ai=!1},10),Dt?(tn(Ai),J.focus()):Vn(Ai)}),ye.indexOf(Ai)>-1&&gn.classList.add("active")),Ai.elementAttributes&&"object"==typeof Ai.elementAttributes)for(let uo in Ai.elementAttributes)"+"==uo.charAt(0)?(uo=uo.slice(1),gn.setAttribute(uo,J.getAttribute(uo)+Ai.elementAttributes["+"+uo])):gn.setAttribute(uo,Ai.elementAttributes[uo]);gn.addEventListener("mousedown",function(){De=!1,setTimeout(function(){De=!0},10)}),Ai.element=gn}ut.appendChild(gn)})}()}(!0===u.values?Si():"string"==typeof u.values?Si(u.values):u.values||[],P);var Ai=wn.elOffset(E);ut.style.minWidth=E.offsetWidth+"px",ut.style.top=Ai.top+E.offsetHeight+"px",ut.style.left=Ai.left+"px",ut.addEventListener("mousedown",function(gn){De=!1,setTimeout(function(){De=!0},10)}),document.body.appendChild(ut)}}()}),(ut=document.createElement("div")).classList.add("tabulator-edit-select-list"),l(function(){J.style.height="100%",J.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",In)},10),J},autocomplete:function(_,l,r,a,u){var g=this,E=_.getElement(),w=_.getValue(),M=u.verticalNavigation||"editor",P=void 0!==w||null===w?w:void 0!==u.defaultValue?u.defaultValue:"",J=document.createElement("input"),ut=document.createElement("div"),Dt=[],Lt=!1,Qt=!0,de=!1;if(J.setAttribute("type","search"),J.style.padding="4px",J.style.width="100%",J.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let zi in u.elementAttributes)"+"==zi.charAt(0)?(zi=zi.slice(1),J.setAttribute(zi,J.getAttribute(zi)+u.elementAttributes["+"+zi])):J.setAttribute(zi,u.elementAttributes[zi]);function ye(){!0===u.values?de=De():"string"==typeof u.values&&(de=De(u.values))}function De(zi){var no,Yi={},In=g.table.getData();return(no=zi?g.table.columnManager.getColumnByField(zi):_.getColumn()._getSelf())?(In.forEach(function(co){var Ho=no.getFieldValue(co);null!=Ho&&""!==Ho&&(Yi[Ho]=!0)}),Yi=u.sortValuesList?"asc"==u.sortValuesList?Object.keys(Yi).sort():Object.keys(Yi).sort().reverse():Object.keys(Yi)):console.warn("unable to find matching column to create autocomplete lookup list:",zi),Yi}function ai(zi,Yi){var no,co,In=[];no=de||u.values||[],u.searchFunc?(In=u.searchFunc(zi,no))instanceof Promise?(xi(void 0!==u.searchingPlaceholder?u.searchingPlaceholder:"Searching..."),In.then(Ho=>{Ui(Ri(Ho),Yi)}).catch(Ho=>{console.err("error in autocomplete search promise:",Ho)})):Ui(Ri(In),Yi):(co=Ri(no),""===zi?u.showListOnEmpty&&(In=co):co.forEach(function(Ho){(null!==Ho.value||void 0!==Ho.value)&&(String(Ho.value).toLowerCase().indexOf(String(zi).toLowerCase())>-1||String(Ho.title).toLowerCase().indexOf(String(zi).toLowerCase())>-1)&&In.push(Ho)}),Ui(In,Yi))}function xi(zi){var Yi=document.createElement("div");Si(),!1!==zi&&(Yi.classList.add("tabulator-edit-select-list-notice"),Yi.tabIndex=0,zi instanceof Node?Yi.appendChild(zi):Yi.innerHTML=zi,ut.appendChild(Yi))}function Ri(zi){var Yi=[];if(Array.isArray(zi))zi.forEach(function(co){var Ho={};"object"==typeof co?(Ho.title=u.listItemFormatter?u.listItemFormatter(co.value,co.label):co.label,Ho.value=co.value):(Ho.title=u.listItemFormatter?u.listItemFormatter(co,co):co,Ho.value=co),Yi.push(Ho)});else for(var In in zi){var no={title:u.listItemFormatter?u.listItemFormatter(In,zi[In]):zi[In],value:In};Yi.push(no)}return Yi}function Si(){for(;ut.firstChild;)ut.removeChild(ut.firstChild)}function Ui(zi,Yi){zi.length?function(zi,Yi){var In=!1;Si(),(Dt=zi).forEach(function(no){var co=no.element;co||((co=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),co.tabIndex=0,co.innerHTML=no.title,co.addEventListener("click",function(Ho){zn(no),qi()}),co.addEventListener("mousedown",function(Ho){Qt=!1,setTimeout(function(){Qt=!0},10)}),no.element=co,Yi&&no.value==w&&(J.value=no.title,no.element.classList.add("active"),In=!0),no===Lt&&(no.element.classList.add("active"),In=!0)),ut.appendChild(co)}),In||zn(!1)}(zi,Yi):u.emptyPlaceholder&&xi(u.emptyPlaceholder)}function qi(){tn(),Lt?w!==Lt.value?(w=Lt.value,J.value=Lt.title,r(Lt.value)):a():u.freetext||u.allowEmpty&&""===J.value?(w=J.value,r(J.value)):a()}function zn(zi,Yi){Lt&&Lt.element&&Lt.element.classList.remove("active"),Lt=zi,zi&&zi.element&&zi.element.classList.add("active"),zi&&zi.element&&zi.element.scrollIntoView&&zi.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function tn(){ut.parentNode&&ut.parentNode.removeChild(ut),g.table.rowManager.element.removeEventListener("scroll",Vn)}function Vn(){tn(),a()}return ut.classList.add("tabulator-edit-select-list"),ut.addEventListener("mousedown",function(zi){Qt=!1,setTimeout(function(){Qt=!0},10)}),J.addEventListener("keydown",function(zi){var Yi;switch(zi.keyCode){case 38:Yi=Dt.indexOf(Lt),("editor"==M||"hybrid"==M&&Yi)&&(zi.stopImmediatePropagation(),zi.stopPropagation(),zi.preventDefault(),zn(Yi>0&&Dt[Yi-1]));break;case 40:Yi=Dt.indexOf(Lt),("editor"==M||"hybrid"==M&&Yi<Dt.length-1)&&(zi.stopImmediatePropagation(),zi.stopPropagation(),zi.preventDefault(),Yi<Dt.length-1&&zn(-1==Yi?Dt[0]:Dt[Yi+1]));break;case 37:case 39:zi.stopImmediatePropagation(),zi.stopPropagation();break;case 13:qi();break;case 27:Vn();break;case 36:case 35:zi.stopImmediatePropagation()}}),J.addEventListener("keyup",function(zi){switch(zi.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:ai(J.value)}}),J.addEventListener("search",function(zi){ai(J.value)}),J.addEventListener("blur",function(zi){Qt&&qi()}),J.addEventListener("focus",function(zi){var Yi=P;ye(),function(){if(!ut.parentNode){for(;ut.firstChild;)ut.removeChild(ut.firstChild);var zi=wn.elOffset(E);ut.style.minWidth=E.offsetWidth+"px",ut.style.top=zi.top+E.offsetHeight+"px",ut.style.left=zi.left+"px",document.body.appendChild(ut)}}(),J.value=Yi,ai(Yi,!0)}),l(function(){J.style.height="100%",J.focus({preventScroll:!0})}),u.mask&&Ku(J,u),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Vn)},10),ye(),J.value=P,ai(P,!0),J},star:function(_,l,r,a,u){var g=this,E=_.getElement(),w=_.getValue(),M=E.getElementsByTagName("svg").length||5,P=E.getElementsByTagName("svg")[0]?E.getElementsByTagName("svg")[0].getAttribute("width"):14,J=[],ut=document.createElement("div"),Dt=document.createElementNS("http://www.w3.org/2000/svg","svg");function Lt(De){J.forEach(function(ai,xi){xi<De?("ie"==g.table.browser?ai.setAttribute("class","tabulator-star-active"):ai.classList.replace("tabulator-star-inactive","tabulator-star-active"),ai.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==g.table.browser?ai.setAttribute("class","tabulator-star-inactive"):ai.classList.replace("tabulator-star-active","tabulator-star-inactive"),ai.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function Qt(De){var ai=document.createElement("span"),xi=Dt.cloneNode(!0);J.push(xi),ai.addEventListener("mouseenter",function(Ri){Ri.stopPropagation(),Ri.stopImmediatePropagation(),Lt(De)}),ai.addEventListener("mousemove",function(Ri){Ri.stopPropagation(),Ri.stopImmediatePropagation()}),ai.addEventListener("click",function(Ri){Ri.stopPropagation(),Ri.stopImmediatePropagation(),r(De),E.blur()}),ai.appendChild(xi),ut.appendChild(ai)}function de(De){w=De,Lt(De)}if(E.style.whiteSpace="nowrap",E.style.overflow="hidden",E.style.textOverflow="ellipsis",ut.style.verticalAlign="middle",ut.style.display="inline-block",ut.style.padding="4px",Dt.setAttribute("width",P),Dt.setAttribute("height",P),Dt.setAttribute("viewBox","0 0 512 512"),Dt.setAttribute("xml:space","preserve"),Dt.style.padding="0 1px",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let De in u.elementAttributes)"+"==De.charAt(0)?(De=De.slice(1),ut.setAttribute(De,ut.getAttribute(De)+u.elementAttributes["+"+De])):ut.setAttribute(De,u.elementAttributes[De]);for(var ye=1;ye<=M;ye++)Qt(ye);return Lt(w=Math.min(parseInt(w),M)),ut.addEventListener("mousemove",function(De){Lt(0)}),ut.addEventListener("click",function(De){r(0)}),E.addEventListener("blur",function(De){a()}),E.addEventListener("keydown",function(De){switch(De.keyCode){case 39:de(w+1);break;case 37:de(w-1);break;case 13:r(w);break;case 27:a()}}),ut},progress:function(_,l,r,a,u){var de,ye,Dt,Lt,g=_.getElement(),E=void 0===u.max?(null==(de=g.getElementsByTagName("div")[0])?void 0:de.getAttribute("max"))||100:u.max,w=void 0===u.min?(null==(ye=g.getElementsByTagName("div")[0])?void 0:ye.getAttribute("min"))||0:u.min,M=(E-w)/100,P=_.getValue()||0,J=document.createElement("div"),ut=document.createElement("div");function Qt(){var De=window.getComputedStyle(g,null),ai=M*Math.round(ut.offsetWidth/((g.clientWidth-parseInt(De.getPropertyValue("padding-left"))-parseInt(De.getPropertyValue("padding-right")))/100))+w;r(ai),g.setAttribute("aria-valuenow",ai),g.setAttribute("aria-label",P)}if(J.style.position="absolute",J.style.right="0",J.style.top="0",J.style.bottom="0",J.style.width="5px",J.classList.add("tabulator-progress-handle"),ut.style.display="inline-block",ut.style.position="relative",ut.style.height="100%",ut.style.backgroundColor="#488CE9",ut.style.maxWidth="100%",ut.style.minWidth="0%",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let De in u.elementAttributes)"+"==De.charAt(0)?(De=De.slice(1),ut.setAttribute(De,ut.getAttribute(De)+u.elementAttributes["+"+De])):ut.setAttribute(De,u.elementAttributes[De]);return g.style.padding="4px 4px",P=Math.min(parseFloat(P),E),P=Math.max(parseFloat(P),w),P=Math.round((P-w)/M),ut.style.width=P+"%",g.setAttribute("aria-valuemin",w),g.setAttribute("aria-valuemax",E),ut.appendChild(J),J.addEventListener("mousedown",function(De){Dt=De.screenX,Lt=ut.offsetWidth}),J.addEventListener("mouseover",function(){J.style.cursor="ew-resize"}),g.addEventListener("mousemove",function(De){Dt&&(ut.style.width=Lt+De.screenX-Dt+"px")}),g.addEventListener("mouseup",function(De){Dt&&(De.stopPropagation(),De.stopImmediatePropagation(),Dt=!1,Lt=!1,Qt())}),g.addEventListener("keydown",function(De){switch(De.keyCode){case 39:De.preventDefault(),ut.style.width=ut.clientWidth+g.clientWidth/100+"px";break;case 37:De.preventDefault(),ut.style.width=ut.clientWidth-g.clientWidth/100+"px";break;case 9:case 13:Qt();break;case 27:a()}}),g.addEventListener("blur",function(){a()}),ut},tickCross:function(_,l,r,a,u){var g=_.getValue(),E=document.createElement("input"),w=u.tristate,M=void 0===u.indeterminateValue?null:u.indeterminateValue,P=!1;if(E.setAttribute("type","checkbox"),E.style.marginTop="5px",E.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let ut in u.elementAttributes)"+"==ut.charAt(0)?(ut=ut.slice(1),E.setAttribute(ut,E.getAttribute(ut)+u.elementAttributes["+"+ut])):E.setAttribute(ut,u.elementAttributes[ut]);function J(ut){return w?ut?P?M:E.checked:E.checked&&!P?(E.checked=!1,E.indeterminate=!0,P=!0,M):(P=!1,E.checked):E.checked}return E.value=g,w&&(void 0===g||g===M||""===g)&&(P=!0,E.indeterminate=!0),"firefox"!=this.table.browser&&l(function(){E.focus({preventScroll:!0})}),E.checked=!0===g||"true"===g||"True"===g||1===g,l(function(){E.focus()}),E.addEventListener("change",function(ut){r(J())}),E.addEventListener("blur",function(ut){r(J(!0))}),E.addEventListener("keydown",function(ut){13==ut.keyCode&&r(J()),27==ut.keyCode&&a()}),E}};let Ih=(()=>{class _ extends Qi{constructor(r){super(r),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=_.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(r){var a=this.currentCell,u=this.options("tabEndNewRow");a&&(this.navigateNext(r)||u&&(a.getElement().firstChild.blur(),(u=this.table.addRow(!0===u?{}:"function"==typeof u?u(a.row.getComponent()):Object.assign({},u))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(r){return!!r.modules.edit&&r.modules.edit.edited}cellCancelEdit(r){r===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(r){r||(r=this.modules.edit.getEditedCells()),Array.isArray(r)||(r=[r]),r.forEach(a=>{this.modules.edit.clearEdited(a._getSelf())})}navigatePrev(r){var u,g,a=this.currentCell;if(a){if(r&&r.preventDefault(),u=this.navigateLeft())return!0;if((g=this.table.rowManager.prevDisplayRow(a.row,!0))&&(u=this.findNextEditableCell(g,g.cells.length)))return u.getComponent().edit(),!0}return!1}navigateNext(r){var u,g,a=this.currentCell;if(a){if(r&&r.preventDefault(),u=this.navigateRight())return!0;if((g=this.table.rowManager.nextDisplayRow(a.row,!0))&&(u=this.findNextEditableCell(g,-1)))return u.getComponent().edit(),!0}return!1}navigateLeft(r){var u,g,a=this.currentCell;return!(!a||(r&&r.preventDefault(),u=a.getIndex(),g=this.findPrevEditableCell(a.row,u),!g)||(g.getComponent().edit(),0))}navigateRight(r){var u,g,a=this.currentCell;return!(!a||(r&&r.preventDefault(),u=a.getIndex(),g=this.findNextEditableCell(a.row,u),!g)||(g.getComponent().edit(),0))}navigateUp(r){var u,g,a=this.currentCell;return!(!a||(r&&r.preventDefault(),u=a.getIndex(),g=this.table.rowManager.prevDisplayRow(a.row,!0),!g)||(g.cells[u].getComponent().edit(),0))}navigateDown(r){var u,g,a=this.currentCell;return!(!a||(r&&r.preventDefault(),u=a.getIndex(),g=this.table.rowManager.nextDisplayRow(a.row,!0),!g)||(g.cells[u].getComponent().edit(),0))}findNextEditableCell(r,a){var u=!1;if(a<r.cells.length-1)for(var g=a+1;g<r.cells.length;g++){let E=r.cells[g];if(E.column.modules.edit&&wn.elVisible(E.getElement())){let w=!0;if("function"==typeof E.column.modules.edit.check&&(w=E.column.modules.edit.check(E.getComponent())),w){u=E;break}}}return u}findPrevEditableCell(r,a){var u=!1;if(a>0)for(var g=a-1;g>=0;g--){let E=r.cells[g],w=!0;if(E.column.modules.edit&&wn.elVisible(E.getElement())&&("function"==typeof E.column.modules.edit.check&&(w=E.column.modules.edit.check(E.getComponent())),w)){u=E;break}}return u}initializeColumnCheck(r){void 0!==r.definition.editor&&this.initializeColumn(r)}columnDeleteCheck(r){this.currentCell&&this.currentCell.column===r&&this.cancelEdit()}rowDeleteCheck(r){this.currentCell&&this.currentCell.row===r&&this.cancelEdit()}initializeColumn(r){var a={editor:!1,blocked:!1,check:r.definition.editable,params:r.definition.editorParams||{}};switch(typeof r.definition.editor){case"string":this.editors[r.definition.editor]?a.editor=this.editors[r.definition.editor]:console.warn("Editor Error - No such editor found: ",r.definition.editor);break;case"function":a.editor=r.definition.editor;break;case"boolean":!0===r.definition.editor&&("function"!=typeof r.definition.formatter?a.editor=this.editors[r.definition.formatter]?this.editors[r.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",r.definition.formatter))}a.editor&&(r.modules.edit=a)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(r){var u,a=this.currentCell;if(this.invalidEdit=!1,a){for(this.currentCell=!1,u=a.getElement(),r?a.validate&&a.validate():u.classList.remove("tabulator-validation-fail"),u.classList.remove("tabulator-editing");u.firstChild;)u.removeChild(u.firstChild);a.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var r=this.currentCell,a=this.currentCell.getComponent();this.clearEditor(!0),r.setValueActual(r.getValue()),r.cellRendered(),("textarea"==r.column.definition.editor||r.column.definition.variableHeight)&&r.row.normalizeHeight(!0),r.column.definition.cellEditCancelled&&r.column.definition.cellEditCancelled.call(this.table,a),this.dispatchExternal("cellEditCancelled",a)}}bindEditor(r){if(r.column.modules.edit){var a=this,u=r.getElement(!0);u.setAttribute("tabindex",0),u.addEventListener("click",function(g){u.classList.contains("tabulator-editing")||u.focus({preventScroll:!0})}),u.addEventListener("mousedown",function(g){2===g.button?g.preventDefault():a.mouseClick=!0}),u.addEventListener("focus",function(g){a.recursionBlock||a.edit(r,g,!1)})}}focusCellNoEvent(r,a){this.recursionBlock=!0,a&&"ie"===this.table.browser||r.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(r,a){this.focusCellNoEvent(r),this.edit(r,!1,a)}focusScrollAdjust(r){if("virtual"==this.table.rowManager.getRenderMode()){var a=this.table.rowManager.element.scrollTop,u=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,g=r.row.getElement();g.offsetTop<a?this.table.rowManager.element.scrollTop-=a-g.offsetTop:g.offsetTop+g.offsetHeight>u&&(this.table.rowManager.element.scrollTop+=g.offsetTop+g.offsetHeight-u);var w=this.table.rowManager.element.scrollLeft,M=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,P=r.getElement();this.table.modExists("frozenColumns")&&(w+=parseInt(this.table.modules.frozenColumns.leftMargin),M-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(w-=parseInt(this.table.columnManager.renderer.vDomPadLeft),M-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),P.offsetLeft<w?this.table.rowManager.element.scrollLeft-=w-P.offsetLeft:P.offsetLeft+P.offsetWidth>M&&(this.table.rowManager.element.scrollLeft+=P.offsetLeft+P.offsetWidth-M)}}edit(r,a,u){var P,J,ut,g=this,E=!0,w=function(){},M=r.getElement();if(!this.currentCell){if(r.column.modules.edit.blocked)return this.mouseClick=!1,M.blur(),!1;switch(a&&a.stopPropagation(),typeof r.column.modules.edit.check){case"function":E=r.column.modules.edit.check(r.getComponent());break;case"boolean":E=r.column.modules.edit.check}if(E||u){if(g.cancelEdit(),g.currentCell=r,this.focusScrollAdjust(r),J=r.getComponent(),this.mouseClick&&(this.mouseClick=!1,r.column.definition.cellClick&&r.column.definition.cellClick.call(this.table,a,J)),r.column.definition.cellEditing&&r.column.definition.cellEditing.call(this.table,J),this.dispatchExternal("cellEditing",J),ut="function"==typeof r.column.modules.edit.params?r.column.modules.edit.params(J):r.column.modules.edit.params,!1===(P=r.column.modules.edit.editor.call(g,J,function(De){w=De},function(De){if(g.currentCell===r){var ai=!0;return r.column.modules.validate&&g.table.modExists("validate")&&"manual"!=g.table.options.validationMode&&(ai=g.table.modules.validate.validate(r.column.modules.validate,r,De)),!0===ai||"highlight"===g.table.options.validationMode?(g.clearEditor(),r.modules.edit||(r.modules.edit={}),r.modules.edit.edited=!0,-1==g.editedCells.indexOf(r)&&g.editedCells.push(r),r.setValue(De,!0),g.table.options.dataTree&&g.table.modExists("dataTree")&&g.table.modules.dataTree.checkForRestyle(r),!0===ai||(M.classList.add("tabulator-validation-fail"),g.table.externalEvents.dispatch("validationFailed",r.getComponent(),De,ai),!1)):(g.invalidEdit=!0,M.classList.add("tabulator-validation-fail"),g.focusCellNoEvent(r,!0),w(),g.table.externalEvents.dispatch("validationFailed",r.getComponent(),De,ai),!1)}},function(){g.currentCell===r&&(g.cancelEdit(),g.table.options.dataTree&&g.table.modExists("dataTree")&&g.table.modules.dataTree.checkForRestyle(r))},ut)))return M.blur(),!1;if(!(P instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",P),M.blur(),!1;for(M.classList.add("tabulator-editing"),r.row.getElement().classList.add("tabulator-row-editing");M.firstChild;)M.removeChild(M.firstChild);M.appendChild(P),w();for(var de=M.children,ye=0;ye<de.length;ye++)de[ye].addEventListener("click",function(De){De.stopPropagation()});return!0}return this.mouseClick=!1,M.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var r=[];return this.editedCells.forEach(a=>{r.push(a.getComponent())}),r}clearEdited(r){var a;r.modules.edit&&r.modules.edit.edited&&(r.modules.edit.edited=!1,r.modules.validate&&(r.modules.validate.invalid=!1)),(a=this.editedCells.indexOf(r))>-1&&this.editedCells.splice(a,1)}}return _.moduleName="edit",_.editors=Dh,_})();class Mh{constructor(l,r,a,u){this.type=l,this.columns=r,this.component=a||!1,this.indent=u||0}}class Ju{constructor(l,r,a,u,g){this.value=l,this.component=r||!1,this.width=a,this.height=u,this.depth=g}}let kc=(()=>{class _ extends Qi{constructor(r){super(r),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(r,a,u,g){this.cloneTableStyle=a,this.config=r||{},this.colVisProp=g;var E=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],w=this.bodyToExportRows(this.rowLookup(u));return E.concat(w)}genereateTable(r,a,u,g){var E=this.generateExportList(r,a,u,g);return this.genereateTableElement(E)}rowLookup(r){var a=[];if("function"==typeof r)r.call(this.table).forEach(u=>{(u=this.table.rowManager.findRow(u))&&a.push(u)});else switch(r){case!0:case"visible":a=this.table.rowManager.getVisibleRows(!0);break;case"all":a=this.table.rowManager.rows;break;case"selected":a=this.table.modules.selectRow.selectedRows;break;default:a=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],a)}generateColumnGroupHeaders(){var r=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(u=>{var g=this.processColumnGroup(u);g&&r.push(g)}),r}processColumnGroup(r){var a=r.columns,u=0,E={title:r.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||r.definition.title,column:r,depth:1};if(a.length){if(E.subGroups=[],E.width=0,a.forEach(w=>{var M=this.processColumnGroup(w);M&&(E.width+=M.width,E.subGroups.push(M),M.depth>u&&(u=M.depth))}),E.depth+=u,!E.width)return!1}else{if(!this.columnVisCheck(r))return!1;E.width=1}return E}columnVisCheck(r){return!1!==r.definition[this.colVisProp]&&(r.visible||!r.visible&&r.definition[this.colVisProp])}headersToExportRows(r){var a=[],u=0,g=[];function E(w,M){var P=u-M;if(void 0===a[M]&&(a[M]=[]),w.height=w.subGroups?1:P-w.depth+1,a[M].push(w),w.height>1)for(let J=1;J<w.height;J++)void 0===a[M+J]&&(a[M+J]=[]),a[M+J].push(!1);if(w.width>1)for(let J=1;J<w.width;J++)a[M].push(!1);w.subGroups&&w.subGroups.forEach(function(J){E(J,M+1)})}return r.forEach(function(w){w.depth>u&&(u=w.depth)}),r.forEach(function(w){E(w,0)}),a.forEach(w=>{var M=[];w.forEach(P=>{M.push(P?new Ju(P.title,P.column.getComponent(),P.width,P.height,P.depth):null)}),g.push(new Mh("header",M))}),g}bodyToExportRows(r){var a=[],u=[];return this.table.columnManager.columnsByIndex.forEach(g=>{this.columnVisCheck(g)&&a.push(g.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&r.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&r.push(this.table.modules.columnCalcs.botRow)),(r=r.filter(g=>{switch(g.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&g.modules.dataTree.parent)}return!0})).forEach((g,E)=>{var w=g.getData(this.colVisProp),M=[],P=0;switch(g.type){case"group":P=g.level,M.push(new Ju(g.key,g.getComponent(),a.length,1));break;case"calc":case"row":a.forEach(J=>{M.push(new Ju(J._column.getFieldValue(w),J,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(P=g.modules.dataTree.index)}u.push(new Mh(g.type,M,g.getComponent(),P))}),u}genereateTableElement(r){var a=document.createElement("table"),u=document.createElement("thead"),g=document.createElement("tbody"),E=this.lookupTableStyles(),w=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],M={};return M.rowFormatter=null!==w?w:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(M.treeElementField=this.table.modules.dataTree.elementField),M.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],M.groupHeader&&!Array.isArray(M.groupHeader)&&(M.groupHeader=[M.groupHeader]),a.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),u,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),r.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),r.forEach((P,J)=>{switch(P.type){case"header":u.appendChild(this.genereateHeaderElement(P,M,E));break;case"group":g.appendChild(this.genereateGroupElement(P,M,E));break;case"calc":g.appendChild(this.genereateCalcElement(P,M,E));break;case"row":let ut=this.genereateRowElement(P,M,E);this.mapElementStyles(J%2&&E.evenRow?E.evenRow:E.oddRow,ut,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),g.appendChild(ut)}}),u.innerHTML&&a.appendChild(u),a.appendChild(g),this.mapElementStyles(this.table.element,a,["border-top","border-left","border-right","border-bottom"]),a}lookupTableStyles(){var r={};return this.cloneTableStyle&&window.getComputedStyle&&(r.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),r.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),r.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),r.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),r.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],r.firstRow&&(r.styleCells=r.firstRow.getElementsByClassName("tabulator-cell"),r.firstCell=r.styleCells[0],r.lastCell=r.styleCells[r.styleCells.length-1])),r}genereateHeaderElement(r,a,u){var g=document.createElement("tr");return r.columns.forEach(E=>{if(E){var w=document.createElement("th"),M=E.component._column.definition.cssClass?E.component._column.definition.cssClass.split(" "):[];w.colSpan=E.width,w.rowSpan=E.height,w.innerHTML=E.value,this.cloneTableStyle&&(w.style.boxSizing="border-box"),M.forEach(function(P){w.classList.add(P)}),this.mapElementStyles(E.component.getElement(),w,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(E.component._column.contentElement,w,["padding-top","padding-left","padding-right","padding-bottom"]),E.component._column.visible?this.mapElementStyles(E.component.getElement(),w,["width"]):E.component._column.definition.width&&(w.style.width=E.component._column.definition.width+"px"),E.component._column.parent&&this.mapElementStyles(E.component._column.parent.groupElement,w,["border-top"]),g.appendChild(w)}}),g}genereateGroupElement(r,a,u){var g=document.createElement("tr"),E=document.createElement("td"),w=r.columns[0];return g.classList.add("tabulator-print-table-row"),w.value=a.groupHeader&&a.groupHeader[r.indent]?a.groupHeader[r.indent](w.value,r.component._group.getRowCount(),r.component._group.getData(),r.component):!1===a.groupHeader?w.value:r.component._group.generator(w.value,r.component._group.getRowCount(),r.component._group.getData(),r.component),E.colSpan=w.width,E.innerHTML=w.value,g.classList.add("tabulator-print-table-group"),g.classList.add("tabulator-group-level-"+r.indent),w.component.isVisible()&&g.classList.add("tabulator-group-visible"),this.mapElementStyles(u.firstGroup,g,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(u.firstGroup,E,["padding-top","padding-left","padding-right","padding-bottom"]),g.appendChild(E),g}genereateCalcElement(r,a,u){var g=this.genereateRowElement(r,a,u);return g.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(u.calcRow,g,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),g}genereateRowElement(r,a,u){var g=document.createElement("tr");return g.classList.add("tabulator-print-table-row"),r.columns.forEach(E=>{if(E){var w=document.createElement("td"),M=E.component._column,P=E.value,J={modules:{},getValue:function(){return P},getField:function(){return M.definition.field},getElement:function(){return w},getColumn:function(){return M.getComponent()},getData:function(){return r.component.getData()},getRow:function(){return r.component},getComponent:function(){return J},column:M};if((M.definition.cssClass?M.definition.cssClass.split(" "):[]).forEach(function(Dt){w.classList.add(Dt)}),this.table.modExists("format")&&!1!==this.config.formatCells)P=this.table.modules.format.formatExportValue(J,this.colVisProp);else switch(typeof P){case"object":P=JSON.stringify(P);break;case"undefined":case"null":P="";break;default:P=P}P instanceof Node?w.appendChild(P):w.innerHTML=P,u.firstCell&&(this.mapElementStyles(u.firstCell,w,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),M.definition.align&&(w.style.textAlign=M.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(a.treeElementField&&a.treeElementField==M.field||!a.treeElementField&&0==i)&&(r.component._row.modules.dataTree.controlEl&&w.insertBefore(r.component._row.modules.dataTree.controlEl.cloneNode(!0),w.firstChild),r.component._row.modules.dataTree.branchEl&&w.insertBefore(r.component._row.modules.dataTree.branchEl.cloneNode(!0),w.firstChild)),g.appendChild(w),J.modules.format&&J.modules.format.renderedCallback&&J.modules.format.renderedCallback(),a.rowFormatter&&!1!==this.config.formatCells&&a.rowFormatter(r.component)}}),g}genereateHTMLTable(r){var a=document.createElement("div");return a.appendChild(this.genereateTableElement(r)),a.innerHTML}getHtml(r,a,u,g){var E=this.generateExportList(u||this.table.options.htmlOutputConfig,a,r,g||"htmlOutput");return this.genereateHTMLTable(E)}mapElementStyles(r,a,u){if(this.cloneTableStyle&&r&&a){var g={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var E=window.getComputedStyle(r);u.forEach(function(w){a.style[g[w]]=E.getPropertyValue(w)})}}}}return _.moduleName="export",_})();var jp={"=":function(_,l,r,a){return l==_},"<":function(_,l,r,a){return l<_},"<=":function(_,l,r,a){return l<=_},">":function(_,l,r,a){return l>_},">=":function(_,l,r,a){return l>=_},"!=":function(_,l,r,a){return l!=_},regex:function(_,l,r,a){return"string"==typeof _&&(_=new RegExp(_)),_.test(l)},like:function(_,l,r,a){return null==_?l===_:null!=l&&String(l).toLowerCase().indexOf(_.toLowerCase())>-1},keywords:function(_,l,r,a){var u=_.toLowerCase().split(void 0===a.separator?" ":a.separator),g=String(null==l?"":l).toLowerCase(),E=[];return u.forEach(w=>{g.includes(w)&&E.push(!0)}),a.matchAll?E.length===u.length:!!E.length},starts:function(_,l,r,a){return null==_?l===_:null!=l&&String(l).toLowerCase().startsWith(_.toLowerCase())},ends:function(_,l,r,a){return null==_?l===_:null!=l&&String(l).toLowerCase().endsWith(_.toLowerCase())},in:function(_,l,r,a){return Array.isArray(_)?!_.length||_.indexOf(l)>-1:(console.warn("Filter Error - filter value is not an array:",_),!1)}};let vd=(()=>{class _ extends Qi{constructor(r){super(r),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(r=>{var a=this.table.columnManager.findColumn(r.field);if(!a)return console.warn("Column Filter Error - No matching column found:",r.field),!1;this.setHeaderFilterValue(a,r.value)}),this.tableInitialized=!0}remoteFilterParams(r,a,u,g){return g.filter=this.getFilters(!0,!0),g}userSetFilter(r,a,u,g){this.setFilter(r,a,u,g),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(r,a,u,g){this.addFilter(r,a,u,g),this.refreshFilter()}userSetHeaderFilterFocus(r){var a=this.table.columnManager.findColumn(r);if(!a)return console.warn("Column Filter Focus Error - No matching column found:",r),!1;this.setHeaderFilterFocus(a)}userGetHeaderFilterValue(r){var a=this.table.columnManager.findColumn(r);if(a)return this.getHeaderFilterValue(a);console.warn("Column Filter Error - No matching column found:",r)}userSetHeaderFilterValue(r,a){var u=this.table.columnManager.findColumn(r);if(!u)return console.warn("Column Filter Error - No matching column found:",r),!1;this.setHeaderFilterValue(u,a)}userRemoveFilter(r,a,u){this.removeFilter(r,a,u),this.refreshFilter()}userClearFilter(r){this.clearFilter(r),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(r,a,u){return this.search("rows",r,a,u)}searchData(r,a,u){return this.search("data",r,a,u)}initializeColumnHeaderFilter(r){var a=r.definition;a.headerFilter&&(void 0!==a.headerFilterPlaceholder&&a.field&&this.module("localize").setHeaderFilterColumnPlaceholder(a.field,a.headerFilterPlaceholder),this.initializeColumn(r))}initializeColumn(r,a){var u=this,g=r.getField();r.modules.filter={success:function(w){var ut,M="input"==r.modules.filter.tagType&&"text"==r.modules.filter.attrType||"textarea"==r.modules.filter.tagType?"partial":"match",P="",J="";if(void 0===r.modules.filter.prevSuccess||r.modules.filter.prevSuccess!==w){if(r.modules.filter.prevSuccess=w,r.modules.filter.emptyFunc(w))delete u.headerFilters[g];else{switch(r.modules.filter.value=w,typeof r.definition.headerFilterFunc){case"string":_.filters[r.definition.headerFilterFunc]?(P=r.definition.headerFilterFunc,ut=function(Dt){var Lt=r.definition.headerFilterFuncParams||{},Qt=r.getFieldValue(Dt);return Lt="function"==typeof Lt?Lt(w,Qt,Dt):Lt,_.filters[r.definition.headerFilterFunc](w,Qt,Dt,Lt)}):console.warn("Header Filter Error - Matching filter function not found: ",r.definition.headerFilterFunc);break;case"function":P=ut=function(Dt){var Lt=r.definition.headerFilterFuncParams||{},Qt=r.getFieldValue(Dt);return Lt="function"==typeof Lt?Lt(w,Qt,Dt):Lt,r.definition.headerFilterFunc(w,Qt,Dt,Lt)}}ut||("partial"===M?(ut=function(Dt){var Lt=r.getFieldValue(Dt);return null!=Lt&&String(Lt).toLowerCase().indexOf(String(w).toLowerCase())>-1},P="like"):(ut=function(Dt){return r.getFieldValue(Dt)==w},P="=")),u.headerFilters[g]={value:w,func:ut,type:P,params:{}}}J=JSON.stringify(u.headerFilters),u.prevHeaderFilterChangeCheck!==J&&(u.prevHeaderFilterChangeCheck=J,u.trackChanges(),u.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(r)}generateHeaderFilterElement(r,a,u){var M,P,J,ut,Dt,Lt,Qt,g=this,E=r.modules.filter.success,w=r.getField();if(r.modules.filter.headerElement&&r.modules.filter.headerElement.parentNode&&r.contentElement.removeChild(r.modules.filter.headerElement.parentNode),w){switch(r.modules.filter.emptyFunc=r.definition.headerFilterEmptyCheck||function(ye){return!ye&&"0"!==ye&&0!==ye},(M=document.createElement("div")).classList.add("tabulator-header-filter"),typeof r.definition.headerFilter){case"string":g.table.modules.edit.editors[r.definition.headerFilter]?(P=g.table.modules.edit.editors[r.definition.headerFilter],("tick"===r.definition.headerFilter||"tickCross"===r.definition.headerFilter)&&!r.definition.headerFilterEmptyCheck&&(r.modules.filter.emptyFunc=function(ye){return!0!==ye&&!1!==ye})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",r.definition.editor);break;case"function":P=r.definition.headerFilter;break;case"boolean":r.modules.edit&&r.modules.edit.editor?P=r.modules.edit.editor:r.definition.formatter&&g.table.modules.edit.editors[r.definition.formatter]?(P=g.table.modules.edit.editors[r.definition.formatter],("tick"===r.definition.formatter||"tickCross"===r.definition.formatter)&&!r.definition.headerFilterEmptyCheck&&(r.modules.filter.emptyFunc=function(ye){return!0!==ye&&!1!==ye})):P=g.table.modules.edit.editors.input}if(P){if(ut={getValue:function(){return void 0!==a?a:""},getField:function(){return r.definition.field},getElement:function(){return M},getColumn:function(){return r.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},Qt="function"==typeof(Qt=r.definition.headerFilterParams||{})?Qt.call(g.table):Qt,!(J=P.call(this.table.modules.edit,ut,function(){},E,function(){},Qt)))return void console.warn("Filter Error - Cannot add filter to "+w+" column, editor returned a value of false");if(!(J instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+w+" column, editor should return an instance of Node, the editor returned:",J);w?g.langBind("headerFilters|columns|"+r.definition.field,function(ye){J.setAttribute("placeholder",void 0!==ye&&ye?ye:g.langText("headerFilters|default"))}):g.langBind("headerFilters|default",function(ye){J.setAttribute("placeholder",ye)}),J.addEventListener("click",function(ye){ye.stopPropagation(),J.focus()}),J.addEventListener("focus",ye=>{var De=this.table.columnManager.element.scrollLeft;De!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(De),this.table.columnManager.scrollHorizontal(De))}),Dt=!1,Lt=function(ye){Dt&&clearTimeout(Dt),Dt=setTimeout(function(){E(J.value)},g.table.options.headerFilterLiveFilterDelay)},r.modules.filter.headerElement=J,r.modules.filter.attrType=J.hasAttribute("type")?J.getAttribute("type").toLowerCase():"",r.modules.filter.tagType=J.tagName.toLowerCase(),!1!==r.definition.headerFilterLiveFilter&&("autocomplete"===r.definition.headerFilter||"tickCross"===r.definition.headerFilter||("autocomplete"===r.definition.editor||"tickCross"===r.definition.editor)&&!0===r.definition.headerFilter||(J.addEventListener("keyup",Lt),J.addEventListener("search",Lt),"number"==r.modules.filter.attrType&&J.addEventListener("change",function(ye){E(J.value)}),"text"==r.modules.filter.attrType&&"ie"!==this.table.browser&&J.setAttribute("type","search")),("input"==r.modules.filter.tagType||"select"==r.modules.filter.tagType||"textarea"==r.modules.filter.tagType)&&J.addEventListener("mousedown",function(ye){ye.stopPropagation()})),M.appendChild(J),r.contentElement.appendChild(M),u||g.headerFilterColumns.push(r)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",r.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(r){r.modules.filter&&r.modules.filter.headerElement&&(r.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(r){r.modules.filter&&r.modules.filter.headerElement&&(r.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(r){r.modules.filter&&r.modules.filter.headerElement?r.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",r.getField())}getHeaderFilterValue(r){if(r.modules.filter&&r.modules.filter.headerElement)return r.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",r.getField())}setHeaderFilterValue(r,a){r&&(r.modules.filter&&r.modules.filter.headerElement?(this.generateHeaderFilterElement(r,a,!0),r.modules.filter.success(a)):console.warn("Column Filter Error - No header filter set on column:",r.getField()))}reloadHeaderFilter(r){r&&(r.modules.filter&&r.modules.filter.headerElement?this.generateHeaderFilterElement(r,r.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",r.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var r=this.changed;return this.changed=!1,r}setFilter(r,a,u,g){this.filterList=[],Array.isArray(r)||(r=[{field:r,type:a,value:u,params:g}]),this.addFilter(r)}addFilter(r,a,u,g){Array.isArray(r)||(r=[{field:r,type:a,value:u,params:g}]),r.forEach(E=>{(E=this.findFilter(E))&&(this.filterList.push(E),this.changed=!0)})}findFilter(r){var a;if(Array.isArray(r))return this.findSubFilters(r);var u=!1;return"function"==typeof r.field?u=function(g){return r.field(g,r.type||{})}:_.filters[r.type]?u=(a=this.table.columnManager.getColumnByField(r.field))?function(g){return _.filters[r.type](r.value,a.getFieldValue(g),g,r.params||{})}:function(g){return _.filters[r.type](r.value,g[r.field],g,r.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",r.type),r.func=u,!!r.func&&r}findSubFilters(r){var a=[];return r.forEach(u=>{(u=this.findFilter(u))&&a.push(u)}),!!a.length&&a}getFilters(r,a){var u=[];return r&&(u=this.getHeaderFilters()),a&&u.forEach(function(g){"function"==typeof g.type&&(g.type="function")}),u.concat(this.filtersToArray(this.filterList,a))}filtersToArray(r,a){var u=[];return r.forEach(g=>{var E;Array.isArray(g)?u.push(this.filtersToArray(g,a)):(E={field:g.field,type:g.type,value:g.value},a&&"function"==typeof E.type&&(E.type="function"),u.push(E))}),u}getHeaderFilters(){var r=[];for(var a in this.headerFilters)r.push({field:a,type:this.headerFilters[a].type,value:this.headerFilters[a].value});return r}removeFilter(r,a,u){Array.isArray(r)||(r=[{field:r,type:a,value:u}]),r.forEach(g=>{var E;(E=this.filterList.findIndex("object"==typeof g.field?w=>g===w:w=>g.field===w.field&&g.type===w.type&&g.value===w.value))>-1?this.filterList.splice(E,1):console.warn("Filter Error - No matching filter type found, ignoring: ",g.type)}),this.trackChanges()}clearFilter(r){this.filterList=[],r&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(r=>{void 0!==r.modules.filter.value&&delete r.modules.filter.value,r.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(r)}),this.trackChanges()}search(r,a,u,g){var E=[],w=[];return Array.isArray(a)||(a=[{field:a,type:u,value:g}]),a.forEach(M=>{(M=this.findFilter(M))&&w.push(M)}),this.table.rowManager.rows.forEach(M=>{var P=!0;w.forEach(J=>{this.filterRecurse(J,M.getData())||(P=!1)}),P&&E.push("data"===r?M.getData("data"):M.getComponent())}),E}filter(r,a){var u=[],g=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?r.forEach(E=>{this.filterRow(E)&&u.push(E)}):u=r.slice(0),this.subscribedExternal("dataFiltered")&&(u.forEach(E=>{g.push(E.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),g)),u}filterRow(r,a){var u=!0,g=r.getData();for(var E in this.filterList.forEach(w=>{this.filterRecurse(w,g)||(u=!1)}),this.headerFilters)this.headerFilters[E].func(g)||(u=!1);return u}filterRecurse(r,a){var u=!1;return Array.isArray(r)?r.forEach(g=>{this.filterRecurse(g,a)&&(u=!0)}):u=r.func(a),u}}return _.moduleName="filter",_.filters=jp,_})();var yg={plaintext:function(_,l,r){return this.emptyToSpace(this.sanitizeHTML(_.getValue()))},html:function(_,l,r){return _.getValue()},textarea:function(_,l,r){return _.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(_.getValue()))},money:function(_,l,r){var g,E,w,M,a=parseFloat(_.getValue()),u="",P=l.decimal||".",J=l.thousand||",",ut=l.negativeSign||"-",Dt=l.symbol||"",Lt=!!l.symbolAfter,Qt=void 0!==l.precision?l.precision:2;if(isNaN(a))return this.emptyToSpace(this.sanitizeHTML(_.getValue()));for(a<0&&(a=Math.abs(a),u=ut),g=!1!==Qt?a.toFixed(Qt):a,E=(g=String(g).split("."))[0],w=g.length>1?P+g[1]:"",M=/(\d+)(\d{3})/;M.test(E);)E=E.replace(M,"$1"+J+"$2");return Lt?u+E+w+Dt:u+Dt+E+w},link:function(_,l,r){var a=_.getValue(),u=l.urlPrefix||"",g=l.download,E=a,w=document.createElement("a");if(l.labelField&&(E=_.getData()[l.labelField]),l.label)switch(typeof l.label){case"string":E=l.label;break;case"function":E=l.label(_)}if(E){if(l.urlField&&(a=_.getData()[l.urlField]),l.url)switch(typeof l.url){case"string":a=l.url;break;case"function":a=l.url(_)}return w.setAttribute("href",u+a),l.target&&w.setAttribute("target",l.target),l.download&&(g="function"==typeof g?g(_):!0===g?"":g,w.setAttribute("download",g)),w.innerHTML=this.emptyToSpace(this.sanitizeHTML(E)),w}return"&nbsp;"},image:function(_,l,r){var a=document.createElement("img"),u=_.getValue();switch(l.urlPrefix&&(u=l.urlPrefix+_.getValue()),l.urlSuffix&&(u+=l.urlSuffix),a.setAttribute("src",u),typeof l.height){case"number":a.style.height=l.height+"px";break;case"string":a.style.height=l.height}switch(typeof l.width){case"number":a.style.width=l.width+"px";break;case"string":a.style.width=l.width}return a.addEventListener("load",function(){_.getRow().normalizeHeight()}),a},tickCross:function(_,l,r){var a=_.getValue(),u=_.getElement(),g=l.allowEmpty,w=void 0!==l.tickElement?l.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',M=void 0!==l.crossElement?l.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return l.allowTruthy&&a||!0===a||"true"===a||"True"===a||1===a||"1"===a?(u.setAttribute("aria-checked",!0),w||""):!g||"null"!==a&&""!==a&&null!=a?(u.setAttribute("aria-checked",!1),M||""):(u.setAttribute("aria-checked","mixed"),"")},datetime:function(_,l,r){var a=window.DateTime||luxon.DateTime,u=l.inputFormat||"yyyy-MM-dd HH:mm:ss",g=l.outputFormat||"dd/MM/yyyy HH:mm:ss",E=void 0!==l.invalidPlaceholder?l.invalidPlaceholder:"",w=_.getValue();if(void 0!==a){var M=(window.DateTime||luxon.DateTime).fromFormat(w,u);return M.isValid?(l.timezone&&(M=M.shiftTimezone(l.timezone)),M.toFormat(g)):!0===E?w:"function"==typeof E?E(w):E}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(_,l,r){var a=window.DateTime||luxon.DateTime,u=l.inputFormat||"yyyy-MM-dd HH:mm:ss",g=void 0!==l.invalidPlaceholder?l.invalidPlaceholder:"",E=void 0!==l.suffix&&l.suffix,w=void 0!==l.unit?l.unit:"days",M=void 0!==l.humanize&&l.humanize,P=void 0!==l.date?l.date:a.now(),J=_.getValue();if(void 0!==a){var ut=a.fromFormat(J,u);if(!ut.isValid)return!0===g?J:"function"==typeof g?g(J):g;if(!M)return parseInt(ut.diff(P,w)[w])+(E?" "+E:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(_,l,r){var a=_.getValue();return void 0===l[a]?(console.warn("Missing display value for "+a),a):l[a]},star:function(_,l,r){var a=_.getValue(),u=_.getElement(),g=l&&l.stars?l.stars:5,E=document.createElement("span"),w=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.verticalAlign="middle",w.setAttribute("width","14"),w.setAttribute("height","14"),w.setAttribute("viewBox","0 0 512 512"),w.setAttribute("xml:space","preserve"),w.style.padding="0 1px",a=a&&!isNaN(a)?parseInt(a):0,a=Math.max(0,Math.min(a,g));for(var J=1;J<=g;J++){var ut=w.cloneNode(!0);ut.innerHTML=J<=a?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',E.appendChild(ut)}return u.style.whiteSpace="nowrap",u.style.overflow="hidden",u.style.textOverflow="ellipsis",u.setAttribute("aria-label",a),E},traffic:function(_,l,r){var J,a=this.sanitizeHTML(_.getValue())||0,u=document.createElement("span"),g=l&&l.max?l.max:100,E=l&&l.min?l.min:0,w=l&&void 0!==l.color?l.color:["red","orange","green"],M="#666666";if(!isNaN(a)&&void 0!==_.getValue()){switch(u.classList.add("tabulator-traffic-light"),J=parseFloat(a)<=g?parseFloat(a):g,J=parseFloat(J)>=E?parseFloat(J):E,J=Math.round((J-E)/((g-E)/100)),typeof w){case"string":M=w;break;case"function":M=w(a);break;case"object":if(Array.isArray(w)){var Dt=Math.floor(J/(100/w.length));Dt=Math.min(Dt,w.length-1),M=w[Dt=Math.max(Dt,0)];break}}return u.style.backgroundColor=M,u}},progress:function(_,l,r){var P,J,ut,Dt,a=this.sanitizeHTML(_.getValue())||0,u=_.getElement(),g=l&&l.max?l.max:100,E=l&&l.min?l.min:0,w=l&&l.legendAlign?l.legendAlign:"center";switch(P=parseFloat(a)<=g?parseFloat(a):g,P=parseFloat(P)>=E?parseFloat(P):E,P=Math.round((P-E)/((g-E)/100)),typeof l.color){case"string":J=l.color;break;case"function":J=l.color(a);break;case"object":if(Array.isArray(l.color)){var Lt=100/l.color.length,Qt=Math.floor(P/Lt);Qt=Math.min(Qt,l.color.length-1),Qt=Math.max(Qt,0),J=l.color[Qt];break}default:J="#2DC214"}switch(typeof l.legend){case"string":ut=l.legend;break;case"function":ut=l.legend(a);break;case"boolean":ut=a;break;default:ut=!1}switch(typeof l.legendColor){case"string":Dt=l.legendColor;break;case"function":Dt=l.legendColor(a);break;case"object":Array.isArray(l.legendColor)&&(Lt=100/l.legendColor.length,Qt=Math.floor(P/Lt),Qt=Math.min(Qt,l.legendColor.length-1),Qt=Math.max(Qt,0),Dt=l.legendColor[Qt]);break;default:Dt="#000"}u.style.minWidth="30px",u.style.position="relative",u.setAttribute("aria-label",P);var de=document.createElement("div");de.style.display="inline-block",de.style.position="absolute",de.style.width=P+"%",de.style.backgroundColor=J,de.style.height="100%",de.setAttribute("data-max",g),de.setAttribute("data-min",E);var ye=document.createElement("div");if(ye.style.position="relative",ye.style.width="100%",ye.style.height="100%",ut){var De=document.createElement("div");De.style.position="absolute",De.style.top=0,De.style.left=0,De.style.textAlign=w,De.style.width="100%",De.style.color=Dt,De.innerHTML=ut}return r(function(){if(!(_ instanceof na)){var ai=document.createElement("div");ai.style.position="absolute",ai.style.top="4px",ai.style.bottom="4px",ai.style.left="4px",ai.style.right="4px",u.appendChild(ai),u=ai}u.appendChild(ye),ye.appendChild(de),ut&&ye.appendChild(De)}),""},color:function(_,l,r){return _.getElement().style.backgroundColor=this.sanitizeHTML(_.getValue()),""},buttonTick:function(_,l,r){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(_,l,r){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(_,l,r){return this.table.rowManager.activeRows.indexOf(_.getRow()._getSelf())+1},handle:function(_,l,r){return _.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(_,l,r){var a=document.createElement("div"),u=_.getRow()._row.modules.responsiveLayout;function g(E){var w=u.element;u.open=E,w&&(u.open?(a.classList.add("open"),w.style.display=""):(a.classList.remove("open"),w.style.display="none"))}return a.classList.add("tabulator-responsive-collapse-toggle"),a.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",_.getElement().classList.add("tabulator-row-handle"),a.addEventListener("click",function(E){E.stopImmediatePropagation(),g(!u.open)}),g(u.open),a},rowSelection:function(_,l,r){var a=document.createElement("input");if(a.type="checkbox",this.table.modExists("selectRow",!0))if(a.addEventListener("click",g=>{g.stopPropagation()}),"function"==typeof _.getRow){var u=_.getRow();u instanceof dd?(a.addEventListener("change",g=>{u.toggleSelect()}),a.checked=u.isSelected&&u.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(u,a)):a=""}else a.addEventListener("change",g=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(l.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(a);return a}};let Ks=(()=>{class _ extends Qi{constructor(r){super(r),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(r){r.modules.format=this.lookupFormatter(r,""),void 0!==r.definition.formatterPrint&&(r.modules.format.print=this.lookupFormatter(r,"Print")),void 0!==r.definition.formatterClipboard&&(r.modules.format.clipboard=this.lookupFormatter(r,"Clipboard")),void 0!==r.definition.formatterHtmlOutput&&(r.modules.format.htmlOutput=this.lookupFormatter(r,"HtmlOutput"))}lookupFormatter(r,a){var u={params:r.definition["formatter"+a+"Params"]||{}},g=r.definition["formatter"+a];switch(typeof g){case"string":_.formatters[g]?u.formatter=_.formatters[g]:(console.warn("Formatter Error - No such formatter found: ",g),u.formatter=_.formatters.plaintext);break;case"function":u.formatter=g;break;default:u.formatter=_.formatters.plaintext}return u}cellRendered(r){r.modules.format&&r.modules.format.renderedCallback&&!r.modules.format.rendered&&(r.modules.format.renderedCallback(),r.modules.format.rendered=!0)}formatHeader(r,a,u){var g,E,w,M;return r.definition.titleFormatter?(g=this.getFormatter(r.definition.titleFormatter),w=P=>{r.titleFormatterRendered=P},M={getValue:function(){return a},getElement:function(){return u}},E="function"==typeof(E=r.definition.titleFormatterParams||{})?E():E,g.call(this,M,E,w)):a}formatValue(r){var a=r.getComponent(),u="function"==typeof r.column.modules.format.params?r.column.modules.format.params(a):r.column.modules.format.params;return r.column.modules.format.formatter.call(this,a,u,function(E){r.modules.format||(r.modules.format={}),r.modules.format.renderedCallback=E,r.modules.format.rendered=!1})}formatExportValue(r,a){var g,u=r.column.modules.format[a];if(u){let E=function(w){r.modules.format||(r.modules.format={}),r.modules.format.renderedCallback=w,r.modules.format.rendered=!1};return g="function"==typeof u.params?u.params(component):u.params,u.formatter.call(this,r.getComponent(),g,E)}return this.formatValue(r)}sanitizeHTML(r){if(r){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(r).replace(/[&<>"'`=\/]/g,function(u){return a[u]})}return r}emptyToSpace(r){return null==r||""===r?"&nbsp;":r}getFormatter(r){switch(typeof r){case"string":_.formatters[r]?r=_.formatters[r]:(console.warn("Formatter Error - No such formatter found: ",r),r=_.formatters.plaintext);break;case"function":r=r;break;default:r=_.formatters.plaintext}return r}}return _.moduleName="format",_.formatters=yg,_})(),np=(()=>{class _ extends Qi{constructor(r){super(r),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(r){this.layoutElement(r.element,r.column)}initializeColumn(r){var a={margin:0,edge:!1};r.isGroup||(this.frozenCheck(r)?(a.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(r):this.rightColumns.unshift(r),this.active=!0,r.modules.frozen=a):this.initializationMode="right")}frozenCheck(r){return r.parent.isGroup&&r.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),r.parent.isGroup?this.frozenCheck(r.parent):r.definition.frozen}scrollHorizontal(){var r;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),r=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),r.forEach(a=>{"row"===a.type&&this.layoutRow(a)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(r){r.forEach(a=>{a.calcs.top&&this.layoutRow(a.calcs.top),a.calcs.bottom&&this.layoutRow(a.calcs.bottom),a.groupList&&a.groupList.length&&this.layoutGroupCalcs(a.groupList&&a.groupList)})}layoutColumnPosition(r){var a=[];this.leftColumns.forEach((u,g)=>{if(u.modules.frozen.margin=this._calcSpace(this.leftColumns,g)+this.table.columnManager.scrollLeft+"px",u.modules.frozen.edge=g==this.leftColumns.length-1,u.parent.isGroup){var E=this.getColGroupParentElement(u);a.includes(E)||(this.layoutElement(E,u),a.push(E)),u.modules.frozen.edge&&E.classList.add("tabulator-frozen-"+u.modules.frozen.position)}else this.layoutElement(u.getElement(),u);r&&u.cells.forEach(w=>{this.layoutElement(w.getElement(!0),u)})}),this.rightColumns.forEach((u,g)=>{u.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,g+1)+"px",u.modules.frozen.edge=g==this.rightColumns.length-1,this.layoutElement(u.parent.isGroup?this.getColGroupParentElement(u):u.getElement(),u),r&&u.cells.forEach(E=>{this.layoutElement(E.getElement(!0),u)})})}getColGroupParentElement(r){return r.parent.isGroup?this.getColGroupParentElement(r.parent):r.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(r=>{"row"===r.type&&this.layoutRow(r)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(r){r.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(u=>{var g=r.getCell(u);g&&this.layoutElement(g.getElement(!0),u)}),this.rightColumns.forEach(u=>{var g=r.getCell(u);g&&this.layoutElement(g.getElement(!0),u)})}layoutElement(r,a){a.modules.frozen&&(r.style.position="absolute",r.style.left=a.modules.frozen.margin,r.classList.add("tabulator-frozen"),a.modules.frozen.edge&&r.classList.add("tabulator-frozen-"+a.modules.frozen.position))}_calcSpace(r,a){var u=0;for(let g=0;g<a;g++)r[g].visible&&(u+=r[g].getWidth());return u}}return _.moduleName="frozenColumns",_})(),Gf=(()=>{class _ extends Qi{constructor(r){super(r),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(r){return this.rows.indexOf(r)>-1}isFrozen(){return!!this.rows.length}getRows(r){var a=r.slice(0);return this.rows.forEach(function(u){var g=a.indexOf(u);g>-1&&a.splice(g,1)}),a}freezeRow(r){r.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(r.modules.frozen=!0,this.topElement.appendChild(r.getElement()),r.initialize(),r.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(r),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(r){this.rows.indexOf(r),r.modules.frozen?(r.modules.frozen=!1,this.detachRow(r),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(r){var a=this.rows.indexOf(r);if(a>-1){var u=r.getElement();u.parentNode&&u.parentNode.removeChild(u),this.rows.splice(a,1)}}styleRows(r){this.rows.forEach((a,u)=>{this.table.rowManager.styleRow(a,u)})}}return _.moduleName="frozenRows",_})();class $p{constructor(l){return this._group=l,this.type="GroupComponent",new Proxy(this,{get:function(r,a,u){return void 0!==r[a]?r[a]:r._group.table.componentFunctionBinder.handle("row",r._group,a)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class Lc{constructor(l,r,a,u,g,E,w){this.groupManager=l,this.parent=r,this.key=u,this.level=a,this.field=g,this.hasSubGroups=a<l.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=w,this.rows=[],this.groups=[],this.groupList=[],this.generator=E,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=w?w.visible:void 0!==l.startOpen[a]?l.startOpen[a]:l.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(l){l.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var l=document.createElement("div");l.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(l),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var l=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[l]&&this.groupManager.allowedValues[l].forEach(r=>{this._createGroup(r,l)})}addBindings(){var l,r,a;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(a=!1,this.element.addEventListener("touchstart",g=>{a=!0},{passive:!0}),this.element.addEventListener("touchend",g=>{a&&this.groupManager.table.options.groupTap(g,this.getComponent()),a=!1})),this.groupManager.table.options.groupDblTap&&(l=null,this.element.addEventListener("touchend",g=>{l?(clearTimeout(l),l=null,this.groupManager.table.options.groupDblTap(g,this.getComponent())):l=setTimeout(()=>{clearTimeout(l),l=null},300)})),this.groupManager.table.options.groupTapHold&&(r=null,this.element.addEventListener("touchstart",g=>{clearTimeout(r),r=setTimeout(()=>{clearTimeout(r),r=null,a=!1,this.groupManager.table.options.groupTapHold(g,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",g=>{clearTimeout(r),r=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",g=>{g.stopPropagation(),g.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(l,r){var a=r+"_"+l,u=new Lc(this.groupManager,this,r,l,this.groupManager.groupIDLookups[r].field,this.groupManager.headerGenerator[r]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[a]);this.groups[a]=u,this.groupList.push(u)}_addRowToGroup(l){var r=this.level+1;if(this.hasSubGroups){var a=this.groupManager.groupIDLookups[r].func(l.getData()),u=r+"_"+a;this.groupManager.allowedValues&&this.groupManager.allowedValues[r]?this.groups[u]&&this.groups[u].addRow(l):(this.groups[u]||this._createGroup(a,r),this.groups[u].addRow(l))}}_addRow(l){this.rows.push(l),l.modules.group=this}insertRow(l,r,a){var u=this.conformRowData({});l.updateData(u);var g=this.rows.indexOf(r);g>-1?this.rows.splice(a?g+1:g,0,l):a?this.rows.push(l):this.rows.unshift(l),l.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(l){this.arrowElement.style.marginLeft=l,this.groupList.forEach(function(r){r.scrollHeader(l)})}getRowIndex(l){}conformRowData(l){return this.field?l[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(l=this.parent.conformRowData(l)),l}removeRow(l){var r=this.rows.indexOf(l),a=l.getElement();r>-1&&this.rows.splice(r,1),this.groupManager.table.options.groupValues||this.rows.length?(a.parentNode&&a.parentNode.removeChild(a),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(l){var a,r=l.level+"_"+l.key;this.groups[r]&&(delete this.groups[r],(a=this.groupList.indexOf(l))>-1&&this.groupList.splice(a,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(l){var r=[];return r.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(a){r=r.concat(a.getHeadersAndRows(l))}):(!l&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),r.push(this.calcs.top)),r=r.concat(this.rows),!l&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),r.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!l&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),r.push(this.calcs.top))),!l&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),r.push(this.calcs.bottom)))),r}getData(l,r){var a=[];return this._visSet(),(!l||l&&this.visible)&&this.rows.forEach(u=>{a.push(u.getData(r||"data"))}),a}getRowCount(){var l=0;return this.groupList.length?this.groupList.forEach(r=>{l+=r.getRowCount()}):l=this.rows.length,l}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(l=>{l.getHeadersAndRows().forEach(a=>{a.detachElement()})}):this.rows.forEach(l=>{var r=l.getElement();r.parentNode.removeChild(r)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var l=this.getElement();this.groupList.length?this.groupList.forEach(r=>{r.getHeadersAndRows().forEach(u=>{var g=u.getElement();l.parentNode.insertBefore(g,l.nextSibling),u.initialize(),l=g})}):this.rows.forEach(r=>{var a=r.getElement();l.parentNode.insertBefore(a,l.nextSibling),r.initialize(),l=a}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var l=[];"function"==typeof this.visible&&(this.rows.forEach(function(r){l.push(r.getData())}),this.visible=this.visible(this.key,this.getRowCount(),l,this.getComponent()))}getRowGroup(l){var r=!1;return this.groupList.length?this.groupList.forEach(function(a){var u=a.getRowGroup(l);u&&(r=u)}):this.rows.find(function(a){return a===l})&&(r=this),r}getSubGroups(l){var r=[];return this.groupList.forEach(function(a){r.push(l?a.getComponent():a)}),r}getRows(l){var r=[];return this.rows.forEach(function(a){r.push(l?a.getComponent():a)}),r}generateGroupHeaderContents(){var l=[];for(this.rows.forEach(function(r){l.push(r.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),l,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(l=[]){return l.unshift(this.key),this.parent&&this.parent.getPath(l),l}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var l=0;l<this.element.childNodes.length;++l)this.element.childNodes[l].parentNode.removeChild(this.element.childNodes[l]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(l){(!this.initialized||l)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,wn.elVisible(this.element)&&this.initialize(!0)}setHeight(l){this.height!=l&&(this.height=l,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new $p(this)),this.component}}let Zp=(()=>{class _ extends Qi{constructor(r){super(r),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var r=this.table.options.groupBy,a=this.table.options.groupStartOpen,u=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(r)&&Array.isArray(u)&&r.length>u.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(E,w)=>{this.headerGenerator[0]=(M,P,J)=>(void 0===M?"":M)+"<span>("+P+" "+(1===P?E:w.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(r)||r?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(E=>{E.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),E.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(r)||(r=[r]),r.forEach((E,w)=>{var M,P;M="function"==typeof E?E:(P=this.table.columnManager.getColumnByField(E))?function(J){return P.getFieldValue(J)}:function(J){return J[E]},this.groupIDLookups.push({field:"function"!=typeof E&&E,func:M,values:!!this.allowedValues&&this.allowedValues[w]})}),a&&(Array.isArray(a)||(a=[a]),a.forEach(E=>{}),this.startOpen=a),u&&(this.headerGenerator=Array.isArray(u)?u:[u])}}rowSample(r,a){var u=this.getGroups(!1)[0];return a.push(u.getRows(!1)[0]),a}virtualRenderFill(){var r=this.table.rowManager.tableElement,a=this.table.rowManager.getVisibleRows();a=a.filter(u=>"group"!==u.type),r.style.minWidth=a.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(r,a,u){this.assignRowToGroup(r);var g=r.modules.group.rows;return g.length>1&&(!a||a&&-1==g.indexOf(a)?u?g[0]!==r&&this.table.rowManager.moveRowInArray(r.modules.group.rows,r,a=g[0],!u):g[g.length-1]!==r&&this.table.rowManager.moveRowInArray(r.modules.group.rows,r,a=g[g.length-1],!u):this.table.rowManager.moveRowInArray(r.modules.group.rows,r,a,!u)),a}trackChanges(){this.dispatch("group-changed")}setGroupBy(r){this.table.options.groupBy=r,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(r){this.table.options.groupValues=r,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(r){this.table.options.groupStartOpen=r,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(r){this.table.options.groupHeader=r,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(r){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(r){return!!r.modules.group&&r.modules.group.getComponent()}rowMoving(r,a,u){!u&&a instanceof Lc&&(a=this.table.rowManager.prevDisplayRow(r)||a);var g=a instanceof Lc?a:a.modules.group,E=r instanceof Lc?r:r.modules.group;g===E?this.table.rowManager.moveRowInArray(g.rows,r,a,u):(E&&E.removeRow(r),g.insertRow(r,a,u))}rowDeleting(r){r.modules.group&&r.modules.group.removeRow(r)}rowsUpdated(r){this.updateGroupRows(!0)}cellUpdated(r){this.reassignRowToGroup(r.row)}setDisplayIndex(r){this.displayIndex=r}getDisplayIndex(){return this.displayIndex}getRows(r){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(r),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):r.slice(0)}getGroups(r){var a=[];return this.groupList.forEach(function(u){a.push(r?u.getComponent():u)}),a}getChildGroups(r){var a=[];return r||(r=this),r.groupList.forEach(u=>{u.groupList.length?a=a.concat(this.getChildGroups(u)):a.push(u)}),a}wipe(){this.groupList.forEach(function(r){r.wipe()})}pullGroupListData(r){var a=[];return r.forEach(u=>{var g={level:0,rowCount:0,headerContent:""},E=[];u.hasSubGroups?(E=this.pullGroupListData(u.groupList),g.level=u.level,g.rowCount=E.length-u.groupList.length,g.headerContent=u.generator(u.key,g.rowCount,u.rows,u),a.push(g),a=a.concat(E)):(g.level=u.level,g.headerContent=u.generator(u.key,u.rows.length,u.rows,u),g.rowCount=u.getRows().length,a.push(g),u.getRows().forEach(w=>{a.push(w.getData("data"))}))}),a}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(r){var a=!1;return this.groupList.forEach(u=>{var g=u.getRowGroup(r);g&&(a=g)}),a}countGroups(){return this.groupList.length}generateGroups(r){var a=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(u=>{this.createGroup(u,0,a)}),r.forEach(u=>{this.assignRowToExistingGroup(u,a)})):r.forEach(u=>{this.assignRowToGroup(u,a)})}createGroup(r,a,u){var E,g=a+"_"+r;E=new Lc(this,!1,a,r,this.groupIDLookups[0].field,this.headerGenerator[0],(u=u||[])[g]),this.groups[g]=E,this.groupList.push(E)}assignRowToExistingGroup(r,a){var g="0_"+this.groupIDLookups[0].func(r.getData());this.groups[g]&&this.groups[g].addRow(r)}assignRowToGroup(r,a){var u=this.groupIDLookups[0].func(r.getData()),g=!this.groups["0_"+u];return g&&this.createGroup(u,0,a),this.groups["0_"+u].addRow(r),!g}reassignRowToGroup(r){if("row"===r.type){var a=r.modules.group,u=a.getPath(),g=this.getExpectedPath(r);u.length==g.length&&u.every((w,M)=>w===g[M])||(a.removeRow(r),this.assignRowToGroup(r,this.groups),this.refreshData(!0))}}getExpectedPath(r){var a=[],u=r.getData();return this.groupIDLookups.forEach(g=>{a.push(g.func(u))}),a}updateGroupRows(r){var a=[];return this.groupList.forEach(u=>{a=a.concat(u.getHeadersAndRows())}),r&&this.refreshData(!0,this.displayHandler),a}scrollHeaders(r){"virtual"===this.table.options.renderHorizontal&&(r-=this.table.columnManager.renderer.vDomPadLeft),r+="px",this.groupList.forEach(a=>{a.scrollHeader(r)})}removeGroup(r){var u,a=r.level+"_"+r.key;this.groups[a]&&(delete this.groups[a],(u=this.groupList.indexOf(r))>-1&&this.groupList.splice(u,1))}}return _.moduleName="groupRows",_})();var $u={cellEdit:function(_){_.component.setValueProcessData(_.data.oldValue),_.component.cellRendered()},rowAdd:function(_){_.component.deleteActual()},rowDelete:function(_){var l=this.table.rowManager.addRowActual(_.data.data,_.data.pos,_.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(_.component,l)},rowMove:function(_){this.table.rowManager.moveRowActual(_.component,this.table.rowManager.rows[_.data.posFrom],!_.data.after),this.table.rowManager.redraw()}},Qp={cellEdit:function(_){_.component.setValueProcessData(_.data.newValue),_.component.cellRendered()},rowAdd:function(_){var l=this.table.rowManager.addRowActual(_.data.data,_.data.pos,_.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(_.component,l)},rowDelete:function(_){_.component.deleteActual()},rowMove:function(_){this.table.rowManager.moveRowActual(_.component,this.table.rowManager.rows[_.data.posTo],_.data.after),this.table.rowManager.redraw()}};let rc=(()=>{class _ extends Qi{constructor(r){super(r),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(r,a,u){this.action("rowMove",r,{posFrom:this.table.rowManager.getRowPosition(r),posTo:this.table.rowManager.getRowPosition(a),to:a,after:u})}rowAdded(r,a,u,g){this.action("rowAdd",r,{data:a,pos:u,index:g})}rowDeleted(r){var a,u;this.table.options.groupBy?(a=(u=r.getComponent().getGroup().rows).indexOf(r))&&(a=u[a-1]):(a=r.table.rowManager.getRowIndex(r))&&(a=r.table.rowManager.rows[a-1]),this.action("rowDelete",r,{data:r.getData(),pos:!a,index:a})}cellUpdated(r){this.action("cellEdit",r,{oldValue:r.oldValue,newValue:r.value})}clear(){this.history=[],this.index=-1}action(r,a,u){this.history=this.history.slice(0,this.index+1),this.history.push({type:r,component:a,data:u}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(r){var a=this.history.findIndex(function(u){return u.component===r});a>-1&&(this.history.splice(a,1),a<=this.index&&this.index--,this.clearComponentHistory(r))}undo(){if(this.index>-1){let r=this.history[this.index];return _.undoers[r.type].call(this,r),this.index--,this.dispatchExternal("historyUndo",r.type,r.component.getComponent(),r.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let r=this.history[this.index];return _.redoers[r.type].call(this,r),this.dispatchExternal("historyRedo",r.type,r.component.getComponent(),r.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(r,a){this.history.forEach(function(u){if(u.component instanceof fa)u.component===r&&(u.component=a);else if(u.component instanceof uu&&u.component.row===r){var g=u.component.column.getField();g&&(u.component=a.getCell(g))}})}}return _.moduleName="history",_.undoers=$u,_.redoers=Qp,_})(),qp=(()=>{class _ extends Qi{constructor(r){super(r),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var r=this.table.originalElement,a=this.table.options,g=r.getElementsByTagName("th"),E=r.getElementsByTagName("tbody")[0],w=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),E=E?E.getElementsByTagName("tr"):[],this._extractOptions(r,a),g.length?this._extractHeaders(g,E):this._generateBlankHeaders(g,E);for(var M=0;M<E.length;M++){var J=E[M].getElementsByTagName("td"),ut={};this.hasIndex||(ut[a.index]=M);for(var Dt=0;Dt<J.length;Dt++)void 0!==this.fieldIndex[Dt]&&(ut[this.fieldIndex[Dt]]=J[Dt].innerHTML);w.push(ut)}a.data=w,this.dispatchExternal("htmlImported")}_extractOptions(r,a,u){var g=r.attributes,E=u?Object.assign([],u):Object.keys(a),w={};for(var M in E.forEach(ut=>{w[ut.toLowerCase()]=ut}),g){var J,P=g[M];P&&"object"==typeof P&&P.name&&0===P.name.indexOf("tabulator-")&&(J=P.name.replace("tabulator-",""),void 0!==w[J]&&(a[w[J]]=this._attribValue(P.value)))}}_attribValue(r){return"true"===r||"false"!==r&&r}_findCol(r){return this.table.options.columns.find(u=>u.title===r)||!1}_extractHeaders(r,a){for(var u=0;u<r.length;u++){var M,g=r[u],E=!1,w=this._findCol(g.textContent);w?E=!0:w={title:g.textContent.trim()},w.field||(w.field=g.textContent.trim().toLowerCase().replace(" ","_")),(M=g.getAttribute("width"))&&!w.width&&(w.width=M),this._extractOptions(g,w,Xu.prototype.defaultOptionList),this.fieldIndex[u]=w.field,w.field==this.table.options.index&&(this.hasIndex=!0),E||this.table.options.columns.push(w)}}_generateBlankHeaders(r,a){for(var u=0;u<r.length;u++){var g=r[u],E={title:"",field:"col"+u};this.fieldIndex[u]=E.field;var w=g.getAttribute("width");w&&(E.width=w),this.table.options.columns.push(E)}}}return _.moduleName="htmlTableImport",_})(),Wf=(()=>{class _ extends Qi{constructor(r){super(r),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(r,a){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){r.preventDefault();try{if(document.selection)(u=document.body.createTextRange()).moveToElementText(this.element),u.select();else if(window.getSelection){var u;(u=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(u)}}catch(g){}}}initializeExternalEvents(){for(let r in this.eventMap)this.subscriptionChangeExternal(r,this.subscriptionChanged.bind(this,r))}subscriptionChanged(r,a){a?this.subscribers[r]||(this.eventMap[r].includes("-")?(this.subscribers[r]=this.handle.bind(this,r),this.subscribe(this.eventMap[r],this.subscribers[r])):this.subscribeTouchEvents(r)):this.eventMap[r].includes("-")?this.subscribers[r]&&!this.columnSubscribers[r]&&!this.subscribedExternal(r)&&(this.unsubscribe(this.eventMap[r],this.subscribers[r]),delete this.subscribers[r]):this.unsubscribeTouchEvents(r)}subscribeTouchEvents(r){var a=this.eventMap[r];this.touchSubscribers[a+"-touchstart"]||(this.touchSubscribers[a+"-touchstart"]=this.handleTouch.bind(this,a,"start"),this.touchSubscribers[a+"-touchend"]=this.handleTouch.bind(this,a,"end"),this.subscribe(a+"-touchstart",this.touchSubscribers[a+"-touchstart"]),this.subscribe(a+"-touchend",this.touchSubscribers[a+"-touchend"])),this.subscribers[r]=!0}unsubscribeTouchEvents(r){var a=!0,u=this.eventMap[r];if(this.subscribers[r]&&!this.subscribedExternal(r)){delete this.subscribers[r];for(let g in this.eventMap)this.eventMap[g]===u&&this.subscribers[g]&&(a=!1);a&&(this.unsubscribe(u+"-touchstart",this.touchSubscribers[u+"-touchstart"]),this.unsubscribe(u+"-touchend",this.touchSubscribers[u+"-touchend"]),delete this.touchSubscribers[u+"-touchstart"],delete this.touchSubscribers[u+"-touchend"])}}initializeColumn(r){var a=r.definition;for(let u in this.eventMap)a[u]&&(this.subscriptionChanged(u,!0),this.columnSubscribers[u]||(this.columnSubscribers[u]=[]),this.columnSubscribers[u].push(r))}handle(r,a,u){this.dispatchEvent(r,a,u)}handleTouch(r,a,u,g){var E=this.touchWatchers[r];switch("column"===r&&(r="header"),a){case"start":E.tap=!0,clearTimeout(E.tapHold),E.tapHold=setTimeout(()=>{clearTimeout(E.tapHold),E.tapHold=null,E.tap=null,clearTimeout(E.tapDbl),E.tapDbl=null,this.dispatchEvent(r+"TapHold",u,g)},1e3);break;case"end":E.tap&&(E.tap=null,this.dispatchEvent(r+"Tap",u,g)),E.tapDbl?(clearTimeout(E.tapDbl),E.tapDbl=null,this.dispatchEvent(r+"DblTap",u,g)):E.tapDbl=setTimeout(()=>{clearTimeout(E.tapDbl),E.tapDbl=null},300),clearTimeout(E.tapHold),E.tapHold=null}}dispatchEvent(r,a,u){var E,g=u.getComponent();this.columnSubscribers[r]&&(u instanceof uu?E=u.column.definition[r]:u instanceof Xu&&(E=u.definition[r]),E&&E(a,g)),this.dispatchExternal(r,a,g)}}return _.moduleName="interaction",_})();var op={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},jf={keyBlock:function(_){_.stopPropagation(),_.preventDefault()},scrollPageUp:function(_){var l=this.table.rowManager,r=l.scrollTop-l.element.clientHeight;_.preventDefault(),l.displayRowsCount&&(r>=0?l.element.scrollTop=r:l.scrollToRow(l.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(_){var l=this.table.rowManager,r=l.scrollTop+l.element.clientHeight,a=l.element.scrollHeight;_.preventDefault(),l.displayRowsCount&&(r<=a?l.element.scrollTop=r:l.scrollToRow(l.getDisplayRows()[l.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(_){var l=this.table.rowManager;_.preventDefault(),l.displayRowsCount&&l.scrollToRow(l.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(_){var l=this.table.rowManager;_.preventDefault(),l.displayRowsCount&&l.scrollToRow(l.getDisplayRows()[l.displayRowsCount-1]),this.table.element.focus()},navPrev:function(_){this.dispatch("keybinding-nav-prev",_)},navNext:function(_){this.dispatch("keybinding-nav-next",_)},navLeft:function(_){this.dispatch("keybinding-nav-left",_)},navRight:function(_){this.dispatch("keybinding-nav-right",_)},navUp:function(_){this.dispatch("keybinding-nav-up",_)},navDown:function(_){this.dispatch("keybinding-nav-down",_)},undo:function(_){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(_.preventDefault(),this.table.modules.history.undo()))},redo:function(_){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(_.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(_){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let tf=(()=>{class _ extends Qi{constructor(r){super(r),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var r=this.table.options.keybindings,a={};if(this.watchKeys={},this.pressedKeys=[],!1!==r){for(let u in _.bindings)a[u]=_.bindings[u];if(Object.keys(r).length)for(let u in r)a[u]=r[u];this.mapBindings(a),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(r){for(let a in r)_.actions[a]?r[a]&&("object"!=typeof r[a]&&(r[a]=[r[a]]),r[a].forEach(u=>{this.mapBinding(a,u)})):console.warn("Key Binding Error - no such action:",a)}mapBinding(r,a){var u={action:_.actions[r],keys:[],ctrl:!1,shift:!1,meta:!1};a.toString().toLowerCase().split(" ").join("").split("+").forEach(E=>{switch(E){case"ctrl":u.ctrl=!0;break;case"shift":u.shift=!0;break;case"meta":u.meta=!0;break;default:E=parseInt(E),u.keys.push(E),this.watchKeys[E]||(this.watchKeys[E]=[]),this.watchKeys[E].push(u)}})}bindEvents(){var r=this;this.keyupBinding=function(a){var u=a.keyCode,g=r.watchKeys[u];g&&(r.pressedKeys.push(u),g.forEach(function(E){r.checkBinding(a,E)}))},this.keydownBinding=function(a){var u=a.keyCode;if(r.watchKeys[u]){var E=r.pressedKeys.indexOf(u);E>-1&&r.pressedKeys.splice(E,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(r,a){var u=!0;return r.ctrlKey==a.ctrl&&r.shiftKey==a.shift&&r.metaKey==a.meta&&(a.keys.forEach(g=>{-1==this.pressedKeys.indexOf(g)&&(u=!1)}),u&&a.action.call(this,r),!0)}}return _.moduleName="keybindings",_.bindings=op,_.actions=jf,_})(),zf=(()=>{class _ extends Qi{constructor(r){super(r),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(r){(r.column.definition.contextMenu||r.column.definition.clickMenu)&&this.initializeCell(r)}initializeColumn(r){var a=r.definition;(a.headerContextMenu||a.headerClickMenu||a.headerMenu)&&this.initializeColumnHeader(r)}initializeColumnHeader(r){var a;r.definition.headerContextMenu&&(r.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,r.definition.headerContextMenu)),this.tapHold(r,r.definition.headerContextMenu)),r.definition.headerMenu&&((a=document.createElement("span")).classList.add("tabulator-header-menu-button"),a.innerHTML="&vellip;",a.addEventListener("click",u=>{u.stopPropagation(),u.preventDefault(),this.LoadMenuEvent(r,r.definition.headerMenu,u)}),r.titleElement.insertBefore(a,r.titleElement.firstChild))}LoadMenuEvent(r,a,u){a="function"==typeof a?a.call(this.table,r.getComponent(),u):a,this.loadMenu(u,r,a)}tapHold(r,a){var u=r.getElement(),g=null,E=!1;u.addEventListener("touchstart",w=>{clearTimeout(g),E=!1,g=setTimeout(()=>{clearTimeout(g),g=null,E=!0,this.LoadMenuEvent(r,a,w)},1e3)},{passive:!0}),u.addEventListener("touchend",w=>{clearTimeout(g),g=null,E&&w.preventDefault()})}initializeCell(r){r.column.definition.contextMenu&&(r.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,r.column.definition.contextMenu)),this.tapHold(r,r.column.definition.contextMenu)),r.column.definition.clickMenu&&r.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,r,r.column.definition.clickMenu))}initializeRow(r){this.table.options.rowContextMenu&&(r.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,this.table.options.rowContextMenu)),this.tapHold(r,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&r.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,r,this.table.options.rowClickMenu))}initializeGroup(r){this.table.options.groupContextMenu&&(r.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,this.table.options.groupContextMenu)),this.tapHold(r,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&r.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,r,this.table.options.groupClickMenu))}loadMenu(r,a,u,g){var E=!(r instanceof MouseEvent),w=document.createElement("div");if(w.classList.add("tabulator-menu"),E||r.preventDefault(),u&&u.length){if(!g){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}u.forEach(M=>{var P=document.createElement("div"),J=M.label,ut=M.disabled;M.separator?P.classList.add("tabulator-menu-separator"):(P.classList.add("tabulator-menu-item"),"function"==typeof J&&(J=J.call(this.table,a.getComponent())),J instanceof Node?P.appendChild(J):P.innerHTML=J,"function"==typeof ut&&(ut=ut.call(this.table,a.getComponent())),ut?(P.classList.add("tabulator-menu-item-disabled"),P.addEventListener("click",Dt=>{Dt.stopPropagation()})):M.menu&&M.menu.length?P.addEventListener("click",Dt=>{Dt.stopPropagation(),this.hideOldSubMenus(w),this.loadMenu(Dt,a,M.menu,P)}):M.action&&P.addEventListener("click",Dt=>{M.action(Dt,a.getComponent())}),M.menu&&M.menu.length&&P.classList.add("tabulator-menu-item-submenu")),w.appendChild(P)}),w.addEventListener("click",M=>{this.hideMenu()}),this.menuElements.push(w),this.positionMenu(w,g,E,r)}}hideOldSubMenus(r){var a=this.menuElements.indexOf(r);if(a>-1)for(let g=this.menuElements.length-1;g>a;g--){var u=this.menuElements[g];u.parentNode&&u.parentNode.removeChild(u),this.menuElements.pop()}}positionMenu(r,a,u,g){var w,M,P,E=Math.max(document.body.offsetHeight,window.innerHeight);a?(w=(P=wn.elOffset(a)).left+a.offsetWidth,M=P.top-1):(w=u?g.touches[0].pageX:g.pageX,M=u?g.touches[0].pageY:g.pageY,this.positionReversedX=!1),r.style.top=M+"px",r.style.left=w+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(r),M+r.offsetHeight>=E&&(r.style.top="",r.style.bottom=a?E-P.top-a.offsetHeight-1+"px":E-M+"px"),(w+r.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(r.style.left="",r.style.right=a?document.documentElement.offsetWidth-P.left+"px":document.documentElement.offsetWidth-w+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(r){27==r.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(r=>{r.parentNode&&r.parentNode.removeChild(r)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return _.moduleName="menu",_})(),ef=(()=>{class _ extends Qi{constructor(r){super(r),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var r=document.createElement("div");return r.classList.add("tabulator-col"),r.classList.add("tabulator-col-placeholder"),r}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(r){var g,a=this,u={};r.modules.frozen||(g=r.getElement(),u.mousemove=function(E){r.parent===a.moving.parent&&((a.touchMove?E.touches[0].pageX:E.pageX)-wn.elOffset(g).left+a.table.columnManager.element.scrollLeft>r.getWidth()/2?(a.toCol!==r||!a.toColAfter)&&(g.parentNode.insertBefore(a.placeholderElement,g.nextSibling),a.moveColumn(r,!0)):(a.toCol!==r||a.toColAfter)&&(g.parentNode.insertBefore(a.placeholderElement,g),a.moveColumn(r,!1)))}.bind(a),g.addEventListener("mousedown",function(E){a.touchMove=!1,1===E.which&&(a.checkTimeout=setTimeout(function(){a.startMove(E,r)},a.checkPeriod))}),g.addEventListener("mouseup",function(E){1===E.which&&a.checkTimeout&&clearTimeout(a.checkTimeout)}),a.bindTouchEvents(r)),r.modules.moveColumn=u}bindTouchEvents(r){var g,E,w,M,P,J,a=r.getElement(),u=!1;a.addEventListener("touchstart",ut=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,g=r.nextColumn(),w=g?g.getWidth()/2:0,E=r.prevColumn(),M=E?E.getWidth()/2:0,P=0,J=0,u=!1,this.startMove(ut,r)},this.checkPeriod)},{passive:!0}),a.addEventListener("touchmove",ut=>{var Dt,Lt;this.moving&&(this.moveHover(ut),u||(u=ut.touches[0].pageX),(Dt=ut.touches[0].pageX-u)>0?g&&Dt-P>w&&(Lt=g)!==r&&(u=ut.touches[0].pageX,Lt.getElement().parentNode.insertBefore(this.placeholderElement,Lt.getElement().nextSibling),this.moveColumn(Lt,!0)):E&&-Dt-J>M&&(Lt=E)!==r&&(u=ut.touches[0].pageX,Lt.getElement().parentNode.insertBefore(this.placeholderElement,Lt.getElement()),this.moveColumn(Lt,!1)),Lt&&(g=Lt.nextColumn(),P=w,w=g?g.getWidth()/2:0,E=Lt.prevColumn(),J=M,M=E?E.getWidth()/2:0))},{passive:!0}),a.addEventListener("touchend",ut=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(ut)})}startMove(r,a){var u=a.getElement(),g=this.table.columnManager.getElement(),E=this.table.columnManager.getHeadersElement();this.moving=a,this.startX=(this.touchMove?r.touches[0].pageX:r.pageX)-wn.elOffset(u).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=a.getWidth()+"px",this.placeholderElement.style.height=a.getHeight()+"px",u.parentNode.insertBefore(this.placeholderElement,u),u.parentNode.removeChild(u),this.hoverElement=u.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=g.clientHeight-E.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(r)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(r){r.modules.moveColumn.mousemove&&r.getElement().addEventListener("mousemove",r.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(r){r.modules.moveColumn.mousemove&&r.getElement().removeEventListener("mousemove",r.modules.moveColumn.mousemove)})}moveColumn(r,a){var u=this.moving.getCells();this.toCol=r,this.toColAfter=a,a?r.getCells().forEach(function(g,E){var w=g.getElement(!0);w.parentNode&&u[E]&&w.parentNode.insertBefore(u[E].getElement(),w.nextSibling)}):r.getCells().forEach(function(g,E){var w=g.getElement(!0);w.parentNode&&u[E]&&w.parentNode.insertBefore(u[E].getElement(),w)})}endMove(r){(1===r.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(r){var E,a=this.table.columnManager.getElement(),u=a.scrollLeft,g=(this.touchMove?r.touches[0].pageX:r.pageX)-wn.elOffset(a).left+u;this.hoverElement.style.left=g-this.startX+"px",g-u<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{E=Math.max(0,u-5),this.table.rowManager.getElement().scrollLeft=E,this.autoScrollTimeout=!1},1))),u+a.clientWidth-g<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{E=Math.min(a.clientWidth,u+5),this.table.rowManager.getElement().scrollLeft=E,this.autoScrollTimeout=!1},1)))}}return _.moduleName="moveColumn",_})();class xl extends Qi{constructor(l){super(l),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var l=document.createElement("div");return l.classList.add("tabulator-row"),l.classList.add("tabulator-row-placeholder"),l}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(l){var r=this,a={};a.mouseup=function(u){r.tableRowDrop(u,row)}.bind(r),a.mousemove=function(u){if(u.pageY-wn.elOffset(l.element).top+r.table.rowManager.element.scrollTop>l.getHeight()/2)r.toRow===l&&r.toRowAfter||((g=l.getElement()).parentNode.insertBefore(r.placeholderElement,g.nextSibling),r.moveRow(l,!0));else if(r.toRow!==l||r.toRowAfter){var g;(g=l.getElement()).previousSibling&&(g.parentNode.insertBefore(r.placeholderElement,g),r.moveRow(l,!1))}}.bind(r),l.modules.moveRow=a}initializeRow(l){var u,r=this,a={};a.mouseup=function(g){r.tableRowDrop(g,l)}.bind(r),a.mousemove=function(g){var E=l.getElement();g.pageY-wn.elOffset(E).top+r.table.rowManager.element.scrollTop>l.getHeight()/2?(r.toRow!==l||!r.toRowAfter)&&(E.parentNode.insertBefore(r.placeholderElement,E.nextSibling),r.moveRow(l,!0)):(r.toRow!==l||r.toRowAfter)&&(E.parentNode.insertBefore(r.placeholderElement,E),r.moveRow(l,!1))}.bind(r),this.hasHandle||((u=l.getElement()).addEventListener("mousedown",function(g){1===g.which&&(r.checkTimeout=setTimeout(function(){r.startMove(g,l)},r.checkPeriod))}),u.addEventListener("mouseup",function(g){1===g.which&&r.checkTimeout&&clearTimeout(r.checkTimeout)}),this.bindTouchEvents(l,l.getElement())),l.modules.moveRow=a}initializeColumn(l){l.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(l){if(l.column.definition.rowHandle&&!1!==this.table.options.movableRows){var r=this,a=l.getElement(!0);a.addEventListener("mousedown",function(u){1===u.which&&(r.checkTimeout=setTimeout(function(){r.startMove(u,l.row)},r.checkPeriod))}),a.addEventListener("mouseup",function(u){1===u.which&&r.checkTimeout&&clearTimeout(r.checkTimeout)}),this.bindTouchEvents(l.row,a)}}bindTouchEvents(l,r){var u,g,E,w,M,P,a=!1;r.addEventListener("touchstart",J=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,u=l.nextRow(),E=u?u.getHeight()/2:0,g=l.prevRow(),w=g?g.getHeight()/2:0,M=0,P=0,a=!1,this.startMove(J,l)},this.checkPeriod)},{passive:!0}),r.addEventListener("touchmove",J=>{var ut,Dt;this.moving&&(J.preventDefault(),this.moveHover(J),a||(a=J.touches[0].pageY),(ut=J.touches[0].pageY-a)>0?u&&ut-M>E&&(Dt=u)!==l&&(a=J.touches[0].pageY,Dt.getElement().parentNode.insertBefore(this.placeholderElement,Dt.getElement().nextSibling),this.moveRow(Dt,!0)):g&&-ut-P>w&&(Dt=g)!==l&&(a=J.touches[0].pageY,Dt.getElement().parentNode.insertBefore(this.placeholderElement,Dt.getElement()),this.moveRow(Dt,!1)),Dt&&(u=Dt.nextRow(),M=E,E=u?u.getHeight()/2:0,g=Dt.prevRow(),P=w,w=g?g.getHeight()/2:0))}),r.addEventListener("touchend",J=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(J),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(l=>{("row"===l.type||"group"===l.type)&&l.modules.moveRow&&l.modules.moveRow.mousemove&&l.getElement().addEventListener("mousemove",l.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(l=>{("row"===l.type||"group"===l.type)&&l.modules.moveRow&&l.modules.moveRow.mousemove&&l.getElement().removeEventListener("mousemove",l.modules.moveRow.mousemove)})}startMove(l,r){var a=r.getElement();this.setStartPosition(l,r),this.moving=r,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=r.getWidth()+"px",this.placeholderElement.style.height=r.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(r)):(a.parentNode.insertBefore(this.placeholderElement,a),a.parentNode.removeChild(a)),this.hoverElement=a.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(l)}setStartPosition(l,r){var g,E,a=this.touchMove?l.touches[0].pageX:l.pageX,u=this.touchMove?l.touches[0].pageY:l.pageY;g=r.getElement(),this.connection?(E=g.getBoundingClientRect(),this.startX=E.left-a+window.pageXOffset,this.startY=E.top-u+window.pageYOffset):this.startY=u-g.getBoundingClientRect().top}endMove(l){(!l||1===l.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(l,r){this.toRow=l,this.toRowAfter=r}moveHover(l){this.connection?this.moveHoverConnections.call(this,l):this.moveHoverTable.call(this,l)}moveHoverTable(l){var r=this.table.rowManager.getElement(),a=r.scrollTop,u=(this.touchMove?l.touches[0].pageY:l.pageY)-r.getBoundingClientRect().top+a;this.hoverElement.style.top=u-this.startY+"px"}moveHoverConnections(l){this.hoverElement.style.left=this.startX+(this.touchMove?l.touches[0].pageX:l.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?l.touches[0].pageY:l.pageY)+"px"}elementRowDrop(l,r,a){this.dispatchExternal("movableRowsElementDrop",l,r,!!a&&a.getComponent())}connectToTables(l){var r;this.connectionSelectorsTables&&(r=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",r),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:l})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(a=>{"string"==typeof a?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(a))):this.connectionElements.push(a)}),this.connectionElements.forEach(a=>{var u=g=>{this.elementRowDrop(g,a,this.moving)};a.addEventListener("mouseup",u),a.tabulatorElementDropEvent=u,a.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var l;this.connectionSelectorsTables&&(l=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",l),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(r=>{r.classList.remove("tabulator-movingrow-receiving"),r.removeEventListener("mouseup",r.tabulatorElementDropEvent),delete r.tabulatorElementDropEvent})}connect(l,r){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=l,this.connectedRow=r,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(a=>{"row"===a.type&&a.modules.moveRow&&a.modules.moveRow.mouseup&&a.getElement().addEventListener("mouseup",a.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",r,l),!0)}disconnect(l){l===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(r=>{"row"===r.type&&r.modules.moveRow&&r.modules.moveRow.mouseup&&r.getElement().removeEventListener("mouseup",r.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",l)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(l,r,a){var u=!1;if(a){switch(typeof this.table.options.movableRowsSender){case"string":u=this.senders[this.table.options.movableRowsSender];break;case"function":u=this.table.options.movableRowsSender}u?u.call(this,this.moving.getComponent(),r?r.getComponent():void 0,l):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),r?r.getComponent():void 0,l)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),r?r.getComponent():void 0,l);this.endMove()}tableRowDrop(l,r){var a=!1,u=!1;switch(l.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":a=this.receivers[this.table.options.movableRowsReceiver];break;case"function":a=this.table.options.movableRowsReceiver}a?u=a.call(this,this.connectedRow.getComponent(),r?r.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(u?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),r?r.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:r,success:u})}commsReceived(l,r,a){switch(r){case"connect":return this.connect(l,a.row);case"disconnect":return this.disconnect(l);case"dropcomplete":return this.dropComplete(l,a.row,a.success)}}}xl.prototype.receivers={insert:function(_,l,r){return this.table.addRow(_.getData(),void 0,l),!0},add:function(_,l,r){return this.table.addRow(_.getData()),!0},update:function(_,l,r){return!!l&&(l.update(_.getData()),!0)},replace:function(_,l,r){return!!l&&(this.table.addRow(_.getData(),void 0,l),l.delete(),!0)}},xl.prototype.senders={delete:function(_,l,r){_.delete()}},xl.moduleName="moveRow";var Nc={};let Zu=(()=>{class _ extends Qi{constructor(r){super(r),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(r,a,u){return this.transformRow(a,"data",u)}initializeColumn(r){var a=!1,u={};this.allowedTypes.forEach(g=>{var w,E="mutator"+(g.charAt(0).toUpperCase()+g.slice(1));r.definition[E]&&(w=this.lookupMutator(r.definition[E]))&&(a=!0,u[E]={mutator:w,params:r.definition[E+"Params"]||{}})}),a&&(r.modules.mutate=u)}lookupMutator(r){var a=!1;switch(typeof r){case"string":_.mutators[r]?a=_.mutators[r]:console.warn("Mutator Error - No such mutator found, ignoring: ",r);break;case"function":a=r}return a}transformRow(r,a,u){var E,g="mutator"+(a.charAt(0).toUpperCase()+a.slice(1));return this.enabled&&this.table.columnManager.traverse(w=>{var M,P,J;w.modules.mutate&&(M=w.modules.mutate[g]||w.modules.mutate.mutator||!1)&&(E=w.getFieldValue(void 0!==u?u:r),("data"==a||void 0!==E)&&(J=w.getComponent(),P="function"==typeof M.params?M.params(E,r,a,J):M.params,w.setFieldValue(r,M.mutator(E,r,a,P,J))))}),r}transformCell(r,a){if(r.column.modules.mutate){var u=r.column.modules.mutate.mutatorEdit||r.column.modules.mutate.mutator||!1,g={};if(u)return g=Object.assign(g,r.row.getData()),r.column.setFieldValue(g,a),u.mutator(a,g,"edit",u.params,r.getComponent())}return a}enable(){this.enabled=!0}disable(){this.enabled=!1}}return _.moduleName="mutator",_.mutators=Nc,_})(),kl=(()=>{class _ extends Qi{constructor(r){super(r),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(r,a){var E,u=this.table.rowManager,g=u.getDisplayRows();return a?g.length?E=g[0]:u.activeRows.length&&(E=u.activeRows[u.activeRows.length-1],a=!1):g.length&&(E=g[g.length-1],a=!(g.length<this.size)),{index:E,top:a}}calculatePageSizes(){var r,a;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((r=document.createElement("div")).classList.add("tabulator-row"),r.style.visibility="hidden",(a=document.createElement("div")).classList.add("tabulator-cell"),a.innerHTML="Page Row Test",r.appendChild(a),this.table.rowManager.getTableElement().appendChild(r),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/r.offsetHeight),this.table.rowManager.getTableElement().removeChild(r)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(r,a,u,g){return this.initialLoad||(this.progressiveLoad&&!u||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),g.page=this.page,this.size&&(g.size=this.size),g}userSetPageToRow(r){return this.table.options.pagination&&(r=this.rowManager.findRow(r))?this.setPageToRow(r):Promise.reject()}userSetPageSize(r){return!!this.table.options.pagination&&(this.setPageSize(r),this.setPage(1))}scrollVertical(r,a){var u;!a&&!this.table.dataLoader.loading&&(u=this.table.rowManager.getElement()).scrollHeight-u.clientHeight-r<(this.table.options.progressiveLoadScrollMargin||2*u.clientHeight)&&this.nextPage()}restOnRenderBefore(r,a){return a||"local"===this.mode&&this.reset(),r}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var r;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(r=document.createElement("button")).classList.add("tabulator-page"),r.setAttribute("type","button"),r.setAttribute("role","button"),r.setAttribute("aria-label",""),r.setAttribute("title",""),this.firstBut=r.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=r.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=r.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=r.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var r=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=r=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&r.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){r=[];for(let a=1;a<5;a++)r.push(this.size*a);this.pageSizes=r}else r=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);r.forEach(a=>{var u=document.createElement("option");u.value=a,!0===a?this.langBind("pagination|all",function(g){u.innerHTML=g}):u.innerHTML=a,this.pageSizeSelect.appendChild(u)}),this.pageSizeSelect.value=this.size}}initializePaginator(r){var a;r||(this.langBind("pagination|first",u=>{this.firstBut.innerHTML=u}),this.langBind("pagination|first_title",u=>{this.firstBut.setAttribute("aria-label",u),this.firstBut.setAttribute("title",u)}),this.langBind("pagination|prev",u=>{this.prevBut.innerHTML=u}),this.langBind("pagination|prev_title",u=>{this.prevBut.setAttribute("aria-label",u),this.prevBut.setAttribute("title",u)}),this.langBind("pagination|next",u=>{this.nextBut.innerHTML=u}),this.langBind("pagination|next_title",u=>{this.nextBut.setAttribute("aria-label",u),this.nextBut.setAttribute("title",u)}),this.langBind("pagination|last",u=>{this.lastBut.innerHTML=u}),this.langBind("pagination|last_title",u=>{this.lastBut.setAttribute("aria-label",u),this.lastBut.setAttribute("title",u)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(a=document.createElement("label"),this.langBind("pagination|page_size",u=>{this.pageSizeSelect.setAttribute("aria-label",u),this.pageSizeSelect.setAttribute("title",u),a.innerHTML=u}),this.element.appendChild(a),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",u=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!r&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(r){this.initializePaginator(!0),this.mode="progressive_"+r,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(r){this.displayIndex=r}getDisplayIndex(){return this.displayIndex}setMaxRows(r){this.max=r?!0===this.size?1:Math.ceil(r/this.size):1,this.page>this.max&&(this.page=this.max)}reset(r){this.initialLoad||("local"==this.mode||r)&&(this.page=1)}setMaxPage(r){r=parseInt(r),this.max=r||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(r){switch(r){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(r=parseInt(r))>0&&r<=this.max||"local"!==this.mode?(this.page=r,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",r),Promise.reject())}setPageToRow(r){var u=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(r);if(u>-1){var g=!0===this.size?1:Math.ceil((u+1)/this.size);return this.setPage(g)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(r){!0!==r&&(r=parseInt(r)),r>0&&(this.size=r),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let r=Math.floor((this.count-1)/2),a=Math.ceil((this.count-1)/2),u=this.max-this.page+r+1<this.count?this.max-this.count+1:Math.max(this.page-r,1),g=this.page<=a?Math.min(this.count,this.max):Math.min(this.page+a,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let E=u;E<=g;E++)E>0&&E<=this.max&&this.pagesElement.appendChild(this._generatePageButton(E));this.footerRedraw()}_generatePageButton(r){var a=document.createElement("button");return a.classList.add("tabulator-page"),r==this.page&&a.classList.add("active"),a.setAttribute("type","button"),a.setAttribute("role","button"),this.langBind("pagination|page_title",u=>{a.setAttribute("aria-label",u+" "+r),a.setAttribute("title",u+" "+r)}),a.setAttribute("data-page",r),a.textContent=r,a.addEventListener("click",u=>{this.setPage(r)}),a}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(r){return this.size}getMode(){return this.mode}getRows(r){var a,u,g;if("local"==this.mode){a=[],this.setMaxRows(r.length),!0===this.size?(u=0,g=r.length):g=(u=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let E=u;E<g;E++)r[E]&&a.push(r[E]);return a}return this._setPageButtons(),r.slice(0)}trigger(){var r;switch(this.mode){case"local":return r=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(r),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(r){if(void 0===r.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),r.data){if(this.max=parseInt(r.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(r.data,!1,1==this.page):this.table.rowManager.addRows(r.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":r=this.table.rowManager.getData().concat(r.data),this.table.rowManager.setData(r,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return r.data}footerRedraw(){var r=this.table.footerManager.element;Math.ceil(r.clientWidth)-r.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(r.clientWidth)-r.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return _.moduleName="page",_})();var Pc={local:function(_,l){var r=localStorage.getItem(_+"-"+l);return!!r&&JSON.parse(r)},cookie:function(_,l){var g,E,r=document.cookie,a=_+"-"+l,u=r.indexOf(a+"=");return u>-1&&((g=(r=r.substr(u)).indexOf(";"))>-1&&(r=r.substr(0,g)),E=r.replace(a+"=","")),!!E&&JSON.parse(E)}},hu={local:function(_,l,r){localStorage.setItem(_+"-"+l,JSON.stringify(r))},cookie:function(_,l,r){var a=new Date;a.setDate(a.getDate()+1e4),document.cookie=_+"-"+l+"="+JSON.stringify(r)+"; expires="+a.toUTCString()}};let nf=(()=>{class _ extends Qi{constructor(r){super(r),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var r="_tabulator_test";try{return window.localStorage.setItem(r,r),window.localStorage.removeItem(r),!0}catch(a){return!1}}initialize(){if(this.table.options.persistence){var u,r=this.table.options.persistenceMode,a=this.table.options.persistenceID;this.mode=!0!==r?r:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:_.readers[this.table.options.persistenceReaderFunc]?this.readFunc=_.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):_.readers[this.mode]?this.readFunc=_.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:_.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=_.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):_.writers[this.mode]?this.writeFunc=_.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(a||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(u=this.retreiveData("page"))&&(void 0!==u.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=u.paginationSize),void 0!==u.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=u.paginationInitialPage)),this.config.group&&(u=this.retreiveData("group"))&&(void 0!==u.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=u.groupBy),void 0!==u.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=u.groupStartOpen),void 0!==u.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=u.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(r){this.config[r]&&this.save(r)}tableBuilt(){var a,u;this.config.sort&&(a=this.load("sort"))&&(this.table.initialSort=a),this.config.filter&&(u=this.load("filter"))&&(this.table.initialFilter=u)}tableRedraw(r){r&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(r){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,r)),!0}initializeColumn(r){var a;this.config.columns&&(this.defWatcherBlock=!0,a=r.getDefinition(),(!0===this.config.columns?Object.keys(a):this.config.columns).forEach(g=>{var E=Object.getOwnPropertyDescriptor(a,g),w=a[g];E&&Object.defineProperty(a,g,{set:function(M){w=M,this.defWatcherBlock||this.save("columns"),E.set&&E.set(M)},get:function(){return E.get&&E.get(),w}})}),this.defWatcherBlock=!1)}load(r,a){var u=this.retreiveData(r);return a&&(u=u?this.mergeDefinition(a,u):a),u}retreiveData(r){return!!this.readFunc&&this.readFunc(this.id,r)}mergeDefinition(r,a){var u=[];return(a=a||[]).forEach((g,E)=>{var M,w=this._findColumn(r,g);w&&(!0===this.config.columns||null==this.config.columns?(M=Object.keys(w)).push("width"):M=this.config.columns,M.forEach(P=>{"columns"!==P&&void 0!==g[P]&&(w[P]=g[P])}),w.columns&&(w.columns=this.mergeDefinition(w.columns,g.columns)),u.push(w))}),r.forEach((g,E)=>{this._findColumn(a,g)||(u.length>E?u.splice(E,0,g):u.push(g))}),u}_findColumn(r,a){var u=a.columns?"group":a.field?"field":"object";return r.find(function(g){switch(u){case"group":return g.title===a.title&&g.columns.length===a.columns.length;case"field":return g.field===a.field;case"object":return g===a}})}save(r){var a={};switch(r){case"columns":a=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":a=this.table.modules.filter.getFilters();break;case"sort":a=this.validateSorters(this.table.modules.sort.getSort());break;case"group":a=this.getGroupConfig();break;case"page":a=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,r,a)}validateSorters(r){return r.forEach(function(a){a.column=a.field,delete a.field}),r}getGroupConfig(){var r={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(r.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(r.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(r.groupHeader=this.table.options.groupHeader)),r}getPageConfig(){var r={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(r.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(r.paginationInitialPage=this.table.modules.page.getPage())),r}parseColumns(r){var a=[],u=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return r.forEach(g=>{var M,E={},w=g.getDefinition();g.isGroup?(E.title=w.title,E.columns=this.parseColumns(g.getColumns())):(E.field=g.getField(),!0===this.config.columns||null==this.config.columns?(M=Object.keys(w)).push("width"):M=this.config.columns,M.forEach(P=>{switch(P){case"width":E.width=g.getWidth();break;case"visible":E.visible=g.visible;break;default:"function"!=typeof w[P]&&-1===u.indexOf(P)&&(E[P]=w[P])}})),a.push(E)}),a}}return _.moduleName="persistence",_.readers=Pc,_.writers=hu,_})(),rp=(()=>{class _ extends Qi{constructor(r){super(r),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(r,a,u){var J,ut,g=window.scrollX,E=window.scrollY,w=document.createElement("div"),M=document.createElement("div"),P=this.table.modules.export.genereateTable(void 0!==u?u:this.table.options.printConfig,void 0!==a?a:this.table.options.printStyled,r||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(w.classList.add("tabulator-print-header"),"string"==typeof(J="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?w.innerHTML=J:w.appendChild(J),this.element.appendChild(w)),this.element.appendChild(P),this.table.options.printFooter&&(M.classList.add("tabulator-print-footer"),"string"==typeof(ut="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?M.innerHTML=ut:M.appendChild(ut),this.element.appendChild(M)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,P),window.print(),this.cleanup(),window.scrollTo(g,E),this.manualBlock=!1}}return _.moduleName="print",_})(),sp=(()=>{class _ extends Qi{constructor(r){super(r),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(r){var u,a=this;this.currentVersion++,u=this.currentVersion,this.unwatchData(),this.data=r,this.origFuncs.push=r.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var g=Array.from(arguments);return!a.blocked&&u===a.currentVersion&&g.forEach(E=>{a.table.rowManager.addRowActual(E,!1)}),a.origFuncs.push.apply(r,arguments)}}),this.origFuncs.unshift=r.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var g=Array.from(arguments);return!a.blocked&&u===a.currentVersion&&g.forEach(E=>{a.table.rowManager.addRowActual(E,!0)}),a.origFuncs.unshift.apply(r,arguments)}}),this.origFuncs.shift=r.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var g;return!a.blocked&&u===a.currentVersion&&a.data.length&&(g=a.table.rowManager.getRowFromDataObject(a.data[0]))&&g.deleteActual(),a.origFuncs.shift.call(r)}}),this.origFuncs.pop=r.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var g;return!a.blocked&&u===a.currentVersion&&a.data.length&&(g=a.table.rowManager.getRowFromDataObject(a.data[a.data.length-1]))&&g.deleteActual(),a.origFuncs.pop.call(r)}}),this.origFuncs.splice=r.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var P,g=Array.from(arguments),E=g[0]<0?r.length+g[0]:g[0],w=g[1],M=!!g[2]&&g.slice(2);if(!a.blocked&&u===a.currentVersion){if(M&&((P=!!r[E]&&a.table.rowManager.getRowFromDataObject(r[E]))?M.forEach(ut=>{a.table.rowManager.addRowActual(ut,!0,P,!0)}):(M=M.slice().reverse()).forEach(ut=>{a.table.rowManager.addRowActual(ut,!0,!1,!0)})),0!==w){var J=r.slice(E,void 0===g[1]?g[1]:E+w);J.forEach((ut,Dt)=>{var Lt=a.table.rowManager.getRowFromDataObject(ut);Lt&&Lt.deleteActual(Dt!==J.length-1)})}(M||0!==w)&&a.table.rowManager.reRenderInPosition()}return a.origFuncs.splice.apply(r,arguments)}})}unwatchData(){if(!1!==this.data)for(var r in this.origFuncs)Object.defineProperty(this.data,r,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(r){var a=r.getData();for(var u in this.blocked=!0,a)this.watchKey(r,a,u);this.table.options.dataTree&&this.watchTreeChildren(r),this.blocked=!1}watchTreeChildren(r){var a=r.getData()[this.table.options.dataTreeChildField],u={};function g(){this.table.modules.dataTree.initializeRow(r),this.table.modules.dataTree.layoutRow(r),this.table.rowManager.refreshActiveData("tree",!1,!0)}a&&(u.push=a.push,Object.defineProperty(a,"push",{enumerable:!1,configurable:!0,value:()=>{var E=u.push.apply(a,arguments);return g(),E}}),u.unshift=a.unshift,Object.defineProperty(a,"unshift",{enumerable:!1,configurable:!0,value:()=>{var E=u.unshift.apply(a,arguments);return g(),E}}),u.shift=a.shift,Object.defineProperty(a,"shift",{enumerable:!1,configurable:!0,value:()=>{var E=u.shift.call(a);return g(),E}}),u.pop=a.pop,Object.defineProperty(a,"pop",{enumerable:!1,configurable:!0,value:()=>{var E=u.pop.call(a);return g(),E}}),u.splice=a.splice,Object.defineProperty(a,"splice",{enumerable:!1,configurable:!0,value:()=>{var E=u.splice.apply(a,arguments);return g(),E}}))}watchKey(r,a,u){var g=Object.getOwnPropertyDescriptor(a,u),E=a[u],w=this.currentVersion;Object.defineProperty(a,u,{set:M=>{if(E=M,!this.blocked&&w===this.currentVersion){var P={};P[u]=M,r.updateData(P)}g.set&&g.set(M)},get:()=>(g.get&&g.get(),E)})}unwatchRow(r){var a=r.getData();for(var u in a)Object.defineProperty(a,u,{value:a[u]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return _.moduleName="reactiveData",_})(),Qu=(()=>{class _ extends Qi{constructor(r){super(r),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(r){"row"===r.row.type&&this.initializeColumn("cell",r.column,r.element)}layoutColumnHeader(r){this.initializeColumn("header",r,r.element)}initializeColumn(r,a,u){var g=this,w=a.definition.resizable;if("header"===r&&(a.modules.resize={variableHeight:"textarea"==a.definition.formatter||a.definition.variableHeight}),!0===w||w==r){var M=document.createElement("div");M.className="tabulator-col-resize-handle";var P=document.createElement("div");P.className="tabulator-col-resize-handle prev",M.addEventListener("click",function(Dt){Dt.stopPropagation()});var J=function(Dt){var Lt=a.getLastColumn();Lt&&g._checkResizability(Lt)&&(g.startColumn=a,g._mouseDown(Dt,Lt,M))};M.addEventListener("mousedown",J),M.addEventListener("touchstart",J,{passive:!0}),M.addEventListener("dblclick",function(Dt){var Lt=a.getLastColumn();Lt&&g._checkResizability(Lt)&&(Dt.stopPropagation(),Lt.reinitializeWidth(!0))}),P.addEventListener("click",function(Dt){Dt.stopPropagation()});var ut=function(Dt){var Lt,Qt,de;(Lt=a.getFirstColumn())&&(de=(Qt=g.table.columnManager.findColumnIndex(Lt))>0&&g.table.columnManager.getColumnByIndex(Qt-1))&&g._checkResizability(de)&&(g.startColumn=a,g._mouseDown(Dt,de,P))};P.addEventListener("mousedown",ut),P.addEventListener("touchstart",ut,{passive:!0}),P.addEventListener("dblclick",function(Dt){var Lt,Qt,de;(Lt=a.getFirstColumn())&&(de=(Qt=g.table.columnManager.findColumnIndex(Lt))>0&&g.table.columnManager.getColumnByIndex(Qt-1))&&g._checkResizability(de)&&(Dt.stopPropagation(),de.reinitializeWidth(!0))}),u.appendChild(M),u.appendChild(P)}}_checkResizability(r){return r.definition.resizable}_mouseDown(r,a,u){var g=this;function E(M){a.setWidth(g.table.rtl?g.startWidth-((void 0===M.screenX?M.touches[0].screenX:M.screenX)-g.startX):g.startWidth+((void 0===M.screenX?M.touches[0].screenX:M.screenX)-g.startX)),g.table.columnManager.renderer.rerenderColumns(!0),!g.table.browserSlow&&a.modules.resize&&a.modules.resize.variableHeight&&a.checkCellHeights()}function w(M){g.startColumn.modules.edit&&(g.startColumn.modules.edit.blocked=!1),g.table.browserSlow&&a.modules.resize&&a.modules.resize.variableHeight&&a.checkCellHeights(),document.body.removeEventListener("mouseup",w),document.body.removeEventListener("mousemove",E),u.removeEventListener("touchmove",E),u.removeEventListener("touchend",w),g.table.element.classList.remove("tabulator-block-select"),g.dispatch("column-resized",a),g.table.externalEvents.dispatch("columnResized",a.getComponent())}g.table.element.classList.add("tabulator-block-select"),r.stopPropagation(),g.startColumn.modules.edit&&(g.startColumn.modules.edit.blocked=!0),g.startX=void 0===r.screenX?r.touches[0].screenX:r.screenX,g.startWidth=a.getWidth(),document.body.addEventListener("mousemove",E),document.body.addEventListener("mouseup",w),u.addEventListener("touchmove",E,{passive:!0}),u.addEventListener("touchend",w)}}return _.moduleName="resizeColumns",_})(),sc=(()=>{class _ extends Qi{constructor(r){super(r),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(r){var a=this,u=r.getElement(),g=document.createElement("div");g.className="tabulator-row-resize-handle";var E=document.createElement("div");E.className="tabulator-row-resize-handle prev",g.addEventListener("click",function(P){P.stopPropagation()});var w=function(P){a.startRow=r,a._mouseDown(P,r,g)};g.addEventListener("mousedown",w),g.addEventListener("touchstart",w,{passive:!0}),E.addEventListener("click",function(P){P.stopPropagation()});var M=function(P){var J=a.table.rowManager.prevDisplayRow(r);J&&(a.startRow=J,a._mouseDown(P,J,E))};E.addEventListener("mousedown",M),E.addEventListener("touchstart",M,{passive:!0}),u.appendChild(g),u.appendChild(E)}_mouseDown(r,a,u){var g=this;function E(M){a.setHeight(g.startHeight+((void 0===M.screenY?M.touches[0].screenY:M.screenY)-g.startY))}function w(M){document.body.removeEventListener("mouseup",E),document.body.removeEventListener("mousemove",E),u.removeEventListener("touchmove",E),u.removeEventListener("touchend",w),g.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",a.getComponent())}g.table.element.classList.add("tabulator-block-select"),r.stopPropagation(),g.startY=void 0===r.screenY?r.touches[0].screenY:r.screenY,g.startHeight=a.getHeight(),document.body.addEventListener("mousemove",E),document.body.addEventListener("mouseup",w),u.addEventListener("touchmove",E,{passive:!0}),u.addEventListener("touchend",w)}}return _.moduleName="resizeRows",_})(),ap=(()=>{class _ extends Qi{constructor(r){super(r),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var a,r=this.table;this.tableHeight=r.element.clientHeight,this.tableWidth=r.element.clientWidth,r.element.parentNode&&(this.containerHeight=r.element.parentNode.clientHeight,this.containerWidth=r.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===r.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(u=>{if(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell){var g=Math.floor(u[0].contentRect.height),E=Math.floor(u[0].contentRect.width);(this.tableHeight!=g||this.tableWidth!=E)&&(this.tableHeight=g,this.tableWidth=E,r.element.parentNode&&(this.containerHeight=r.element.parentNode.clientHeight,this.containerWidth=r.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),r.redraw())}}),this.observer.observe(r.element),a=window.getComputedStyle(r.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(a.getPropertyValue("max-height")||a.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(u=>{if(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell){var g=Math.floor(u[0].contentRect.height),E=Math.floor(u[0].contentRect.width);(this.containerHeight!=g||this.containerWidth!=E)&&(this.containerHeight=g,this.containerWidth=E,this.tableHeight=r.element.clientHeight,this.tableWidth=r.element.clientWidth),r.columnManager.renderer.rerenderColumns(!0),r.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell)&&(r.columnManager.renderer.rerenderColumns(!0),r.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return _.moduleName="resizeTable",_})(),Ll=(()=>{class _ extends Qi{constructor(r){super(r),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(r){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(r||this.update())}initializeResponsivity(){var r=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(a,u){a.modules.responsive&&a.modules.responsive.order&&a.modules.responsive.visible&&(a.modules.responsive.index=u,r.push(a),!a.visible&&"collapse"===self.mode&&self.hiddenColumns.push(a))}),r=(r=r.reverse()).sort(function(a,u){return u.modules.responsive.order-a.modules.responsive.order||u.modules.responsive.index-a.modules.responsive.index}),this.columns=r,"collapse"===this.mode&&this.generateCollapsedContent();for(let a of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==a.definition.formatter){this.collapseHandleColumn=a;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(r){var a=r.getDefinition();r.modules.responsive={order:void 0===a.responsive?1:a.responsive,visible:!1!==a.visible}}initializeRow(r){var a;"calc"!==r.type&&((a=document.createElement("div")).classList.add("tabulator-responsive-collapse"),r.modules.responsiveLayout={element:a,open:this.collapseStartOpen},this.collapseStartOpen||(a.style.display="none"))}layoutRow(r){var a=r.getElement();r.modules.responsiveLayout&&(a.appendChild(r.modules.responsiveLayout.element),this.generateCollapsedRowContent(r))}updateColumnVisibility(r,a){!a&&r.modules.responsive&&(r.modules.responsive.visible=r.visible,this.initialize())}hideColumn(r){var a=this.hiddenColumns.length;r.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(r),this.generateCollapsedContent(),this.collapseHandleColumn&&!a&&this.collapseHandleColumn.show())}showColumn(r){var a;r.show(!1,!0),r.setWidth(r.getWidth()),"collapse"===this.mode&&((a=this.hiddenColumns.indexOf(r))>-1&&this.hiddenColumns.splice(a,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var r=this,a=!0;a;){let u="fitColumns"==r.table.modules.layout.getMode()?r.table.columnManager.getFlexBaseWidth():r.table.columnManager.getWidth(),g=(r.table.options.headerVisible?r.table.columnManager.element.clientWidth:r.table.element.clientWidth)-u;if(g<0){let E=r.columns[r.index];E?(r.hideColumn(E),r.index++):a=!1}else{let E=r.columns[r.index-1];E&&g>0&&g>=E.getWidth()?(r.showColumn(E),r.index--):a=!1}r.table.rowManager.activeRowsCount||r.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var r=this;this.table.rowManager.getDisplayRows().forEach(function(u){r.generateCollapsedRowContent(u)})}generateCollapsedRowContent(r){var a,u;if(r.modules.responsiveLayout){for(a=r.modules.responsiveLayout.element;a.firstChild;)a.removeChild(a.firstChild);(u=this.collapseFormatter(this.generateCollapsedRowData(r)))&&a.appendChild(u)}}generateCollapsedRowData(r){var E,a=this,u=r.getData(),g=[];return this.hiddenColumns.forEach(function(w){var M=w.getFieldValue(u);w.definition.title&&w.field&&(w.modules.format&&a.table.options.responsiveLayoutCollapseUseFormatters?(E={value:!1,data:{},getValue:function(){return M},getData:function(){return u},getElement:function(){return document.createElement("div")},getRow:function(){return r.getComponent()},getColumn:function(){return w.getComponent()}},g.push({field:w.field,title:w.definition.title,value:w.modules.format.formatter.call(a.table.modules.format,E,w.modules.format.params,function(J){J()})})):g.push({field:w.field,title:w.definition.title,value:M}))}),g}formatCollapsedData(r){var a=document.createElement("table");return r.forEach(function(u){var M,g=document.createElement("tr"),E=document.createElement("td"),w=document.createElement("td"),P=document.createElement("strong");E.appendChild(P),this.langBind("columns|"+u.field,function(J){P.innerText=J||u.title}),u.value instanceof Node?((M=document.createElement("div")).appendChild(u.value),w.appendChild(M)):w.innerHTML=u.value,g.appendChild(E),g.appendChild(w),a.appendChild(g)},this),Object.keys(r).length?a:""}}return _.moduleName="responsiveLayout",_})(),Fc=(()=>{class _ extends Qi{constructor(r){super(r),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(a,u){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(r,a){return"selected"===r?this.selectedRows:a}rowDeleted(r){this._deselectRow(r,!0)}clearSelectionData(r){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==r&&this._rowSelectionChanged()}initializeRow(r){var a=this,u=r.getElement(),g=function(){setTimeout(function(){a.selecting=!1},50),document.body.removeEventListener("mouseup",g)};r.modules.select={selected:!1},a.table.options.selectableCheck.call(this.table,r.getComponent())?(u.classList.add("tabulator-selectable"),u.classList.remove("tabulator-unselectable"),a.table.options.selectable&&"highlight"!=a.table.options.selectable&&("click"===a.table.options.selectableRangeMode?u.addEventListener("click",function(E){if(E.shiftKey){a.table._clearSelection(),a.lastClickedRow=a.lastClickedRow||r;var w=a.table.rowManager.getDisplayRowIndex(a.lastClickedRow),M=a.table.rowManager.getDisplayRowIndex(r),P=w<=M?w:M,J=w>=M?w:M,Dt=a.table.rowManager.getDisplayRows().slice(0).splice(P,J-P+1);E.ctrlKey||E.metaKey?(Dt.forEach(function(Lt){Lt!==a.lastClickedRow&&(!0===a.table.options.selectable||a.isRowSelected(r)||a.selectedRows.length<a.table.options.selectable)&&a.toggleRow(Lt)}),a.lastClickedRow=r):(a.deselectRows(void 0,!0),!0!==a.table.options.selectable&&Dt.length>a.table.options.selectable&&(Dt=Dt.slice(0,a.table.options.selectable)),a.selectRows(Dt)),a.table._clearSelection()}else E.ctrlKey||E.metaKey?(a.toggleRow(r),a.lastClickedRow=r):(a.deselectRows(void 0,!0),a.selectRows(r),a.lastClickedRow=r)}):(u.addEventListener("click",function(E){(!a.table.modExists("edit")||!a.table.modules.edit.getCurrentCell())&&a.table._clearSelection(),a.selecting||a.toggleRow(r)}),u.addEventListener("mousedown",function(E){if(E.shiftKey)return a.table._clearSelection(),a.selecting=!0,a.selectPrev=[],document.body.addEventListener("mouseup",g),document.body.addEventListener("keyup",g),a.toggleRow(r),!1}),u.addEventListener("mouseenter",function(E){a.selecting&&(a.table._clearSelection(),a.toggleRow(r),a.selectPrev[1]==r&&a.toggleRow(a.selectPrev[0]))}),u.addEventListener("mouseout",function(E){a.selecting&&(a.table._clearSelection(),a.selectPrev.unshift(r))})))):(u.classList.add("tabulator-unselectable"),u.classList.remove("tabulator-selectable"))}toggleRow(r){this.table.options.selectableCheck.call(this.table,r.getComponent())&&(r.modules.select&&r.modules.select.selected?this._deselectRow(r):this._selectRow(r))}selectRows(r){var a;switch(typeof r){case"undefined":this.table.rowManager.rows.forEach(u=>{this._selectRow(u,!0,!0)}),this._rowSelectionChanged();break;case"string":(a=this.table.rowManager.findRow(r))?this._selectRow(a,!0,!0):this.table.rowManager.getRows(r).forEach(u=>{this._selectRow(u,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(r)?(r.forEach(u=>{this._selectRow(u,!0,!0)}),this._rowSelectionChanged()):this._selectRow(r,!1,!0)}}_selectRow(r,a,u){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!u&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var g=this.table.rowManager.findRow(r);g?-1==this.selectedRows.indexOf(g)&&(g.getElement().classList.add("tabulator-selected"),g.modules.select||(g.modules.select={}),g.modules.select.selected=!0,g.modules.select.checkboxEl&&(g.modules.select.checkboxEl.checked=!0),this.selectedRows.push(g),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(g,!0),a||this.dispatchExternal("rowSelected",g.getComponent()),this._rowSelectionChanged(a)):a||console.warn("Selection Error - No such row found, ignoring selection:"+r)}isRowSelected(r){return-1!==this.selectedRows.indexOf(r)}deselectRows(r,a){var g,u=this;if(void 0===r){g=u.selectedRows.length;for(let E=0;E<g;E++)u._deselectRow(u.selectedRows[0],!0);u._rowSelectionChanged(a)}else Array.isArray(r)?(r.forEach(function(E){u._deselectRow(E,!0)}),u._rowSelectionChanged(a)):u._deselectRow(r,a)}_deselectRow(r,a){var E,u=this,g=u.table.rowManager.findRow(r);g?(E=u.selectedRows.findIndex(function(w){return w==g}))>-1&&(g.getElement().classList.remove("tabulator-selected"),g.modules.select||(g.modules.select={}),g.modules.select.selected=!1,g.modules.select.checkboxEl&&(g.modules.select.checkboxEl.checked=!1),u.selectedRows.splice(E,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(g,!1),a||this.dispatchExternal("rowDeselected",g.getComponent()),u._rowSelectionChanged(a)):a||console.warn("Deselection Error - No such row found, ignoring selection:"+r)}getSelectedData(){var r=[];return this.selectedRows.forEach(function(a){r.push(a.getData())}),r}getSelectedRows(){var r=[];return this.selectedRows.forEach(function(a){r.push(a.getComponent())}),r}_rowSelectionChanged(r){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),r||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(r,a){r._row.modules.select||(r._row.modules.select={}),r._row.modules.select.checkboxEl=a}registerHeaderSelectCheckbox(r){this.headerCheckboxElement=r}childRowSelection(r,a){var u=this.table.modules.dataTree.getChildren(r,!0);if(a)for(let g of u)this._selectRow(g,!0);else for(let g of u)this._deselectRow(g,!0)}}return _.moduleName="selectRow",_})();function Ah(_,l,r,a,u,g,E){var w=window.DateTime||luxon.DateTime,M=E.format||"dd/MM/yyyy HH:mm:ss",P=E.alignEmptyValues,J=0;if(void 0!==w){if(_=w.fromFormat(_,M),l=w.fromFormat(l,M),_.isValid){if(l.isValid)return _-l;J=1}else J=l.isValid?-1:0;return("top"===P&&"desc"===g||"bottom"===P&&"asc"===g)&&(J*=-1),J}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var Td={number:function(_,l,r,a,u,g,E){var w=E.alignEmptyValues,M=E.decimalSeparator,P=E.thousandSeparator,J=0;if(_=String(_),l=String(l),P&&(_=_.split(P).join(""),l=l.split(P).join("")),M&&(_=_.split(M).join("."),l=l.split(M).join(".")),_=parseFloat(_),l=parseFloat(l),isNaN(_))J=isNaN(l)?0:-1;else{if(!isNaN(l))return _-l;J=1}return("top"===w&&"desc"===g||"bottom"===w&&"asc"===g)&&(J*=-1),J},string:function(_,l,r,a,u,g,E){var P,w=E.alignEmptyValues,M=0;if(_){if(l){switch(typeof E.locale){case"boolean":E.locale&&(P=this.langLocale());break;case"string":P=E.locale}return String(_).toLowerCase().localeCompare(String(l).toLowerCase(),P)}M=1}else M=l?-1:0;return("top"===w&&"desc"===g||"bottom"===w&&"asc"===g)&&(M*=-1),M},date:function(_,l,r,a,u,g,E){return E.format||(E.format="dd/MM/yyyy"),Ah.call(this,_,l,r,a,u,g,E)},time:function(_,l,r,a,u,g,E){return E.format||(E.format="HH:mm"),Ah.call(this,_,l,r,a,u,g,E)},datetime:Ah,boolean:function(_,l,r,a,u,g,E){return(!0===_||"true"===_||"True"===_||1===_?1:0)-(!0===l||"true"===l||"True"===l||1===l?1:0)},array:function(_,l,r,a,u,g,E){var P=E.type||"length",J=E.alignEmptyValues,ut=0;function Dt(Lt){switch(P){case"length":return Lt.length;case"sum":return Lt.reduce(function(Qt,de){return Qt+de});case"max":return Math.max.apply(null,Lt);case"min":return Math.min.apply(null,Lt);case"avg":return Lt.reduce(function(Qt,de){return Qt+de})/Lt.length}}if(Array.isArray(_)){if(Array.isArray(l))return(_?Dt(_):0)-(l?Dt(l):0);J=1}else J=Array.isArray(l)?-1:0;return("top"===J&&"desc"===g||"bottom"===J&&"asc"===g)&&(ut*=-1),ut},exists:function(_,l,r,a,u,g,E){return(void 0===_?0:1)-(void 0===l?0:1)},alphanum:function(_,l,r,a,u,g,E){var w,M,P,J,Dt,ut=0,Lt=/(\d+)|(\D+)/g,Qt=/\d/,de=E.alignEmptyValues,ye=0;if(_||0===_){if(l||0===l){if(isFinite(_)&&isFinite(l))return _-l;if((w=String(_).toLowerCase())===(M=String(l).toLowerCase()))return 0;if(!Qt.test(w)||!Qt.test(M))return w>M?1:-1;for(w=w.match(Lt),M=M.match(Lt),Dt=w.length>M.length?M.length:w.length;ut<Dt;)if((P=w[ut])!==(J=M[ut++]))return isFinite(P)&&isFinite(J)?("0"===P.charAt(0)&&(P="."+P),"0"===J.charAt(0)&&(J="."+J),P-J):P>J?1:-1;return w.length>M.length}ye=1}else ye=l||0===l?-1:0;return("top"===de&&"desc"===g||"bottom"===de&&"asc"===g)&&(ye*=-1),ye}},Eg={integer:function(_,l,r){return""===l||null==l||"number"==typeof(l=Number(l))&&isFinite(l)&&Math.floor(l)===l},float:function(_,l,r){return""===l||null==l||"number"==typeof(l=Number(l))&&isFinite(l)&&l%1!=0},numeric:function(_,l,r){return""===l||null==l||!isNaN(l)},string:function(_,l,r){return""===l||null==l||isNaN(l)},max:function(_,l,r){return""===l||null==l||parseFloat(l)<=r},min:function(_,l,r){return""===l||null==l||parseFloat(l)>=r},starts:function(_,l,r){return""===l||null==l||String(l).toLowerCase().startsWith(String(r).toLowerCase())},ends:function(_,l,r){return""===l||null==l||String(l).toLowerCase().endsWith(String(r).toLowerCase())},minLength:function(_,l,r){return""===l||null==l||String(l).length>=r},maxLength:function(_,l,r){return""===l||null==l||String(l).length<=r},in:function(_,l,r){return""===l||null==l||("string"==typeof r&&(r=r.split("|")),""===l||r.indexOf(l)>-1)},regex:function(_,l,r){return""===l||null==l||new RegExp(r).test(l)},unique:function(_,l,r){if(""===l||null==l)return!0;var a=!0,u=_.getData(),g=_.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(E){var w=E.getData();w!==u&&l==g.getFieldValue(w)&&(a=!1)}),a},required:function(_,l,r){return""!==l&&null!=l}},up=Object.freeze({__proto__:null,AccessorModule:Ao,AjaxModule:dl,ClipboardModule:cu,ColumnCalcsModule:Up,DataTreeModule:Gp,DownloadModule:Ha,EditModule:Ih,ExportModule:kc,FilterModule:vd,FormatModule:Ks,FrozenColumnsModule:np,FrozenRowsModule:Gf,GroupRowsModule:Zp,HistoryModule:rc,HtmlTableImportModule:qp,InteractionModule:Wf,KeybindingsModule:tf,MenuModule:zf,MoveColumnsModule:ef,MoveRowsModule:xl,MutatorModule:Zu,PageModule:kl,PersistenceModule:nf,PrintModule:rp,ReactiveDataModule:sp,ResizeColumnsModule:Qu,ResizeRowsModule:sc,ResizeTableModule:ap,ResponsiveLayoutModule:Ll,SelectRowModule:Fc,SortModule:(()=>{class _ extends Qi{constructor(r){super(r),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(r,a,u,g){var E=this.getSort();return E.forEach(w=>{delete w.column}),g.sort=E,g}userSetSort(r,a){this.setSort(r,a),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(r){var u,g,a=!1;switch(typeof r.definition.sorter){case"string":_.sorters[r.definition.sorter]?a=_.sorters[r.definition.sorter]:console.warn("Sort Error - No such sorter found: ",r.definition.sorter);break;case"function":a=r.definition.sorter}r.modules.sort={sorter:a,dir:"none",params:r.definition.sorterParams||{},startingDir:r.definition.headerSortStartingDir||"asc",tristate:r.definition.headerSortTristate},!1!==r.definition.headerSort&&((u=r.getElement()).classList.add("tabulator-sortable"),(g=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?g.appendChild(this.table.options.headerSortElement):g.innerHTML=this.table.options.headerSortElement,r.titleHolderElement.appendChild(g),r.modules.sort.element=g,u.addEventListener("click",E=>{var w="",M=[],P=!1;if(r.modules.sort){if(r.modules.sort.tristate)w="none"==r.modules.sort.dir?r.modules.sort.startingDir:r.modules.sort.dir==r.modules.sort.startingDir?"asc"==r.modules.sort.dir?"desc":"asc":"none";else switch(r.modules.sort.dir){case"asc":w="desc";break;case"desc":w="asc";break;default:w=r.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(E.shiftKey||E.ctrlKey)?((P=(M=this.getSort()).findIndex(J=>J.field===r.getField()))>-1?(M[P].dir=w,P!=M.length-1&&(P=M.splice(P,1)[0],"none"!=w&&M.push(P))):"none"!=w&&M.push({column:r,dir:w}),this.setSort(M)):"none"==w?this.clear():this.setSort(r,w),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var r=this.changed;return this.changed=!1,r}getSort(){var a=[];return this.sortList.forEach(function(u){u.column&&a.push({column:u.column.getComponent(),field:u.column.getField(),dir:u.dir})}),a}setSort(r,a){var u=this,g=[];Array.isArray(r)||(r=[{column:r,dir:a}]),r.forEach(function(E){var w;(w=u.table.columnManager.findColumn(E.column))?(E.column=w,g.push(E),u.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",E.column)}),u.sortList=g,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(r){var E,a=this.table.rowManager.activeRows[0],u="string";if(a&&(a=a.getData(),r.getField()))switch(E=r.getFieldValue(a),typeof E){case"undefined":u="string";break;case"boolean":u="boolean";break;default:isNaN(E)||""===E?E.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(u="alphanum"):u="number"}return _.sorters[u]}sort(r){var a=this,u=this.table.options.sortOrderReverse?a.sortList.slice().reverse():a.sortList,g=[],E=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",a.getSort()),a.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(u.forEach(function(w,M){var P=w.column.modules.sort;w.column&&P&&(P.sorter||(P.sorter=a.findSorter(w.column)),w.params="function"==typeof P.params?P.params(w.column.getComponent(),w.dir):P.params,g.push(w)),a.setColumnHeader(w.column,w.dir)}),g.length&&a._sortItems(r,g)):u.forEach(function(w,M){a.setColumnHeader(w.column,w.dir)}),this.subscribedExternal("dataSorted")&&(r.forEach(w=>{E.push(w.getComponent())}),this.dispatchExternal("dataSorted",a.getSort(),E)),r}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(r){r.modules.sort&&(r.modules.sort.dir="none",r.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(r,a){r.modules.sort.dir=a,r.getElement().setAttribute("aria-sort",a)}_sortItems(r,a){var u=a.length-1;r.sort((g,E)=>{for(var w,M=u;M>=0;M--){let P=a[M];if(0!==(w=this._sortRow(g,E,P.column,P.dir,P.params)))break}return w})}_sortRow(r,a,u,g,E){var w,M,P="asc"==g?r:a,J="asc"==g?a:r;return r=void 0!==(r=u.getFieldValue(P.getData()))?r:"",a=void 0!==(a=u.getFieldValue(J.getData()))?a:"",w=P.getComponent(),M=J.getComponent(),u.modules.sort.sorter.call(this,r,a,w,M,u.getComponent(),g,E)}}return _.moduleName="sort",_.sorters=Td,_})(),ValidateModule:(()=>{class _ extends Qi{constructor(r){super(r),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(r){return!r.modules.validate||!r.modules.validate.invalid}cellValidate(r){return this.validate(r.column.modules.validate,r,r.getValue())}columnValidate(r){var a=[];return r.cells.forEach(function(u){this.cellValidate(u)||a.push(u.getComponent())}),!a.length||a}rowValidate(r){var a=[];return r.cells.forEach(function(u){this.cellValidate(u)||a.push(u.getComponent())}),!a.length||a}userClearCellValidation(r){r||(r=this.getInvalidCells()),Array.isArray(r)||(r=[r]),r.forEach(a=>{this.clearValidation(a._getSelf())})}userValidate(r){var a=[];return this.table.rowManager.rows.forEach(function(u){var g=u.validate();!0!==g&&(a=a.concat(g))}),!a.length||a}initializeColumnCheck(r){void 0!==r.definition.validator&&this.initializeColumn(r)}initializeColumn(r){var g,a=this,u=[];r.definition.validator&&(Array.isArray(r.definition.validator)?r.definition.validator.forEach(function(E){(g=a._extractValidator(E))&&u.push(g)}):(g=this._extractValidator(r.definition.validator))&&u.push(g),r.modules.validate=!!u.length&&u)}_extractValidator(r){var a,u,g;switch(typeof r){case"string":return(g=r.indexOf(":"))>-1?(a=r.substring(0,g),u=r.substring(g+1)):a=r,this._buildValidator(a,u);case"function":return this._buildValidator(r);case"object":return this._buildValidator(r.type,r.parameters)}}_buildValidator(r,a){var u="function"==typeof r?r:_.validators[r];return u?{type:"function"==typeof r?"function":r,func:u,params:a}:(console.warn("Validator Setup Error - No matching validator found:",r),!1)}validate(r,a,u){var g=this,E=[],w=this.invalidCells.indexOf(a);return r&&r.forEach(function(M){M.func.call(g,a.getComponent(),u,M.params)||E.push({type:M.type,parameters:M.params})}),E=!E.length||E,a.modules.validate||(a.modules.validate={}),!0===E?(a.modules.validate.invalid=!1,a.getElement().classList.remove("tabulator-validation-fail"),w>-1&&this.invalidCells.splice(w,1)):(a.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&a.getElement().classList.add("tabulator-validation-fail"),-1==w&&this.invalidCells.push(a)),E}getInvalidCells(){var r=[];return this.invalidCells.forEach(a=>{r.push(a.getComponent())}),r}clearValidation(r){var a;r.modules.validate&&r.modules.validate.invalid&&(r.getElement().classList.remove("tabulator-validation-fail"),r.modules.validate.invalid=!1,(a=this.invalidCells.indexOf(r))>-1&&this.invalidCells.splice(a,1))}}return _.moduleName="validate",_.validators=Eg,_})()}),Xf={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class du{constructor(l,r){this.table=l,this.msgType=r,this.registeredDefaults={}}register(l,r){this.registeredDefaults[l]=r}generate(l,r={}){var a=Object.assign({},this.registeredDefaults);if(Object.assign(a,l),!1!==r.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var u in r)a.hasOwnProperty(u)||console.warn("Invalid "+this.msgType+" option:",u);for(var u in a)u in r?a[u]=r[u]:Array.isArray(a[u])?a[u]=Object.assign([],a[u]):"object"==typeof a[u]&&null!==a[u]?a[u]=Object.assign({},a[u]):void 0===a[u]&&delete a[u];return a}}class pu extends Dn{constructor(l){super(l),this.elementVertical=l.rowManager.element,this.elementHorizontal=l.columnManager.element,this.tableElement=l.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(l){}renderRows(){}renderColumns(){}rerenderRows(l){l&&l()}rerenderColumns(l,r){}renderRowCells(l){}rerenderRowCells(l,r){}scrollColumns(l,r){}scrollRows(l,r){}resize(){}scrollToRow(l){}scrollToRowNearestTop(l){}visibleRows(l){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(l,r){var a=l.getElement();r%2?(a.classList.add("tabulator-row-even"),a.classList.remove("tabulator-row-odd")):(a.classList.add("tabulator-row-odd"),a.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(l){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(l,r,a){var u=this.rows().indexOf(l),g=l.getElement(),E=0;return new Promise((w,M)=>{if(u>-1){if(void 0===a&&(a=this.table.options.scrollToRowIfVisible),!a&&wn.elVisible(g)&&(E=wn.elOffset(g).top-wn.elOffset(this.elementVertical).top)>0&&E<this.elementVertical.clientHeight-g.offsetHeight)return!1;switch(void 0===r&&(r=this.table.options.scrollToRowPosition),"nearest"===r&&(r=this.scrollToRowNearestTop(l)?"top":"bottom"),this.scrollToRow(l),r){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(g.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-g.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-g.offsetTop)+g.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+g.offsetHeight}w()}else console.warn("Scroll Error - Row not visible"),M("Scroll Error - Row not visible")})}}class hp extends pu{constructor(l){super(l)}renderRowCells(l){l.cells.forEach(r=>{l.element.appendChild(r.getElement()),r.cellRendered()})}reinitializeColumnWidths(l){l.forEach(function(r){r.reinitializeWidth()})}}class th extends pu{constructor(l){super(l),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var l=this.options("columns"),a=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),a=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),a=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),a=!1),l&&l.find(u=>u.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),a=!1),a}renderColumns(l,r){this.dataChange()}scrollColumns(l,r){this.scrollLeft!=l&&(this.scrollLeft=l,this.scroll(l-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(l,r){var a={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!l||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var u=0;this.table.columnManager.columnsByIndex.forEach(g=>{var E={};if(g.visible){var w=g.getWidth();E.leftPos=u,E.rightPos=u+w,E.width=w,"fitData"===this.options("layout")&&(E.fitDataCheck=!0),u+w>this.vDomScrollPosLeft&&u<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=u),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=w),this.columns.push(g),g.modules.vdomHoz=E,u+=w}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,r||(!l||this.reinitChanged(a))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(l){this.initialized?this.initializeRow(l):l.cells.forEach(r=>{l.element.appendChild(r.getElement()),r.cellRendered()})}rerenderRowCells(l,r){this.reinitializeRow(l,r)}reinitializeColumnWidths(l){for(let r=this.leftCol;r<=this.rightCol;r++)this.columns[r].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var g,u,l=!1,r=0,a=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(E=>{!E.definition.width&&E.visible&&(l=!0)}),l&&l&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,u=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(g=u.getElement(),u.generateCells(),this.tableElement.appendChild(g),a=0;a<u.cells.length;a++){let M=u.cells[a];if(g.appendChild(M.getElement()),M.column.reinitializeWidth(),(r+=M.column.getWidth())>this.vDomScrollPosRight)break}for(g.parentNode.removeChild(g),this.fitDataColAvg=Math.floor(r/(a+1));a<this.table.columnManager.columnsByIndex.length;a++)this.table.columnManager.columnsByIndex[a].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(l){var r=!0;return l.cols.length!==this.columns.length||l.leftCol!==this.leftCol||l.rightCol!==this.rightCol||(l.cols.forEach((a,u)=>{a!==this.columns[u]&&(r=!1)}),!r)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(r=>{this.reinitializeRow(r,!0)})}scroll(l){this.vDomScrollPosLeft+=l,this.vDomScrollPosRight+=l,l>.8*this.elementVertical.clientWidth?this.rerenderColumns():l>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(l,r,a){for(let u=l;u<r;u++){let g=this.columns[u];g.modules.vdomHoz.leftPos+=a,g.modules.vdomHoz.rightPos+=a}}addColRight(){var l=this.columns[this.rightCol+1];l&&l.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(a=>{if("group"!==a.type){var u=a.getCell(l);a.getElement().appendChild(u.getElement()),u.cellRendered()}}),this.fitDataColActualWidthCheck(l),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=l.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var l=this.columns[this.leftCol-1];l&&l.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(u=>{if("group"!==u.type){var g=u.getCell(l);u.getElement().prepend(g.getElement()),g.cellRendered()}}),this.fitDataColActualWidthCheck(l),this.leftCol?this.vDomPadLeft-=l.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(l){var r;(l=this.columns[this.rightCol])&&l.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(r=this.table.rowManager.getVisibleRows(),l.modules.vdomHoz.visible=!1,r.forEach(a=>{if("group"!==a.type){var u=a.getCell(l);a.getElement().removeChild(u.getElement())}}),this.vDomPadRight+=l.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var l=this.columns[this.leftCol];l&&l.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(a=>{if("group"!==a.type){var u=a.getCell(l);u.parentNode&&a.getElement().removeChild(u.getElement())}}),this.vDomPadLeft+=l.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(l){var r,a;l.modules.vdomHoz.fitDataCheck&&(l.reinitializeWidth(),(a=(r=l.getWidth())-l.modules.vdomHoz.width)&&(l.modules.vdomHoz.rightPos+=a,l.modules.vdomHoz.width=r,this.colPositionAdjust(this.rightCol+2,this.columns.length,a)),l.modules.vdomHoz.fitDataCheck=!1)}initializeRow(l){if("group"!==l.type){l.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let r=this.leftCol;r<=this.rightCol;r++){let a=this.columns[r];if(a&&a.visible){let u=l.getCell(a);l.getElement().appendChild(u.getElement()),u.cellRendered()}}}}reinitializeRow(l,r){if("group"!==l.type&&(r||!l.modules.vdomHoz||l.modules.vdomHoz.leftCol!==this.leftCol||l.modules.vdomHoz.rightCol!==this.rightCol)){for(var a=l.getElement();a.firstChild;)a.removeChild(a.firstChild);this.initializeRow(l)}}}class xh extends Dn{constructor(l){super(l),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new du(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var l;(l="string"==typeof this.table.options.renderHorizontal?{virtual:th,basic:hp}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new l(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var l=document.createElement("div");return l.classList.add("tabulator-headers"),l.setAttribute("role","row"),l}createHeaderElement(){var l=document.createElement("div");return l.classList.add("tabulator-header"),l.setAttribute("role","rowgroup"),this.table.options.headerVisible||l.classList.add("tabulator-header-hidden"),l}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(l){var a=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=l,this.element.style.marginLeft=l>a?-(l-a)+"px":0,this.scrollLeft=l,this.renderer.scrollColumns(l)}generateColumnsFromRowData(l){var u,g,r=[],a=this.table.options.autoColumnsDefinitions;if(l&&l.length){for(var E in u=l[0]){let w={field:E,title:E},M=u[E];switch(typeof M){case"undefined":g="string";break;case"boolean":g="boolean";break;case"object":g=Array.isArray(M)?"array":"string";break;default:g=isNaN(M)||""===M?M.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}w.sorter=g,r.push(w)}if(a)switch(typeof a){case"function":this.table.options.columns=a.call(this.table,r);break;case"object":Array.isArray(a)?r.forEach(w=>{var M=a.find(P=>P.field===w.field);M&&Object.assign(w,M)}):r.forEach(w=>{a[w.field]&&Object.assign(w,a[w.field])}),this.table.options.columns=r}else this.table.options.columns=r;this.setColumns(this.table.options.columns)}}setColumns(l,r){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),l.forEach((a,u)=>{this._addColumn(a)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(l,r,a){var u=new Xu(l,this),g=u.getElement(),E=a&&this.findColumnIndex(a);if(a&&E>-1){var w=a.getTopColumn(),M=this.columns.indexOf(w),P=w.getElement();r?(this.columns.splice(M,0,u),P.parentNode.insertBefore(g,P)):(this.columns.splice(M+1,0,u),P.parentNode.insertBefore(g,P.nextSibling))}else r?(this.columns.unshift(u),this.headersElement.insertBefore(u.getElement(),this.headersElement.firstChild)):(this.columns.push(u),this.headersElement.appendChild(u.getElement()));return u.columnRendered(),u}registerColumnField(l){l.definition.field&&(this.columnsByField[l.definition.field]=l)}registerColumnPosition(l){this.columnsByIndex.push(l)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(l){l.reRegisterPosition()})}verticalAlignHeaders(){var l=0;this.columns.forEach(r=>{var a;r.clearVerticalAlign(),(a=r.getHeight())>l&&(l=a)}),this.columns.forEach(r=>{r.verticalAlign(this.table.options.columnHeaderVertAlign,l)}),this.table.rowManager.adjustTableSize()}findColumn(l){return"object"!=typeof l?this.columnsByField[l]||!1:l instanceof Xu?l:l instanceof hd?l._getSelf()||!1:"undefined"!=typeof HTMLElement&&l instanceof HTMLElement&&this.columns.find(a=>a.element===l)||!1}getColumnByField(l){return this.columnsByField[l]}getColumnsByFieldRoot(l){var r=[];return Object.keys(this.columnsByField).forEach(a=>{a.split(".")[0]===l&&r.push(this.columnsByField[a])}),r}getColumnByIndex(l){return this.columnsByIndex[l]}getFirstVisibileColumn(l){return(l=this.columnsByIndex.findIndex(r=>r.visible))>-1&&this.columnsByIndex[l]}getColumns(){return this.columns}findColumnIndex(l){return this.columnsByIndex.findIndex(r=>l===r)}getRealColumns(){return this.columnsByIndex}traverse(l){this.columnsByIndex.forEach((r,a)=>{l(r,a)})}getDefinitions(l){var r=[];return this.columnsByIndex.forEach(a=>{(!l||l&&a.visible)&&r.push(a.getDefinition())}),r}getDefinitionTree(){var l=[];return this.columns.forEach(r=>{l.push(r.getDefinition(!0))}),l}getComponents(l){var r=[];return(l?this.columns:this.columnsByIndex).forEach(u=>{r.push(u.getComponent())}),r}getWidth(){var l=0;return this.columnsByIndex.forEach(r=>{r.visible&&(l+=r.getWidth())}),l}moveColumn(l,r,a){this.moveColumnActual(l,r,a),r.element.parentNode.insertBefore(l.element,r.element),a&&r.element.parentNode.insertBefore(r.element,l.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(l,r,a){this._moveColumnInArray(l.parent.isGroup?l.parent.columns:this.columns,l,r,a),this._moveColumnInArray(this.columnsByIndex,l,r,a,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",l,r,a),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",l.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(l,r,a,u,g){var w,E=l.indexOf(r);E>-1&&(l.splice(E,1),(w=l.indexOf(a))>-1?u&&(w+=1):w=E,l.splice(w,0,r),g&&(this.chain("column-moving-rows",[r,a,u],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(P){if(P.cells.length){var J=P.cells.splice(E,1)[0];P.cells.splice(w,0,J)}}))}scrollToColumn(l,r,a){var u=0,g=0,E=0,w=l.getElement();return new Promise((M,P)=>{if(void 0===r&&(r=this.table.options.scrollToColumnPosition),void 0===a&&(a=this.table.options.scrollToColumnIfVisible),l.visible){switch(r){case"middle":case"center":E=-this.element.clientWidth/2;break;case"right":E=w.clientWidth-this.headersElement.clientWidth}if(!a&&(g=w.offsetLeft)>0&&g+w.offsetWidth<this.element.clientWidth)return!1;u=w.offsetLeft+E,u=Math.max(Math.min(u,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(u),this.scrollHorizontal(u),M()}else console.warn("Scroll Error - Column not visible"),P("Scroll Error - Column not visible")})}generateCells(l){var r=[];return this.columnsByIndex.forEach(a=>{r.push(a.generateCell(l))}),r}getFlexBaseWidth(){var l=this.table.element.clientWidth,r=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(l-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(a){var u,g,E;a.visible&&(u=a.definition.width||0,g=parseInt(a.minWidth),E="string"==typeof u?u.indexOf("%")>-1?l/100*parseInt(u):parseInt(u):u,r+=E>g?E:g)}),r}addColumn(l,r,a){return new Promise((u,g)=>{var E=this._addColumn(l,r,a);this._reIndexColumns(),this.dispatch("column-add",l,r,a),"fitColumns"!=this.layoutMode()&&E.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),u(E)})}deregisterColumn(l){var a,r=l.getField();r&&delete this.columnsByField[r],(a=this.columnsByIndex.indexOf(l))>-1&&this.columnsByIndex.splice(a,1),(a=this.columns.indexOf(l))>-1&&this.columns.splice(a,1),this.verticalAlignHeaders(),this.redraw()}redraw(l){wn.elVisible(this.element)&&this.verticalAlignHeaders(),l&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",l)||this.layoutRefresh(),this.dispatch("table-redraw",l),this.table.footerManager.redraw()}}class Nl extends pu{constructor(l){super(l),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var l=this.tableElement;l.firstChild;)l.removeChild(l.firstChild);l.scrollTop=0,l.scrollLeft=0,l.style.minWidth="",l.style.minHeight="",l.style.display="",l.style.visibility=""}renderRows(){var l=this.tableElement,r=!0;this.rows().forEach((a,u)=>{this.styleRow(a,u),l.appendChild(a.getElement()),a.initialize(!0),"group"!==a.type&&(r=!1)}),l.style.minWidth=r?this.table.columnManager.getWidth()+"px":""}rerenderRows(l){this.render(),l&&l()}scrollToRowNearestTop(l){var r=wn.elOffset(l.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-r)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-r))}scrollToRow(l){var r=l.getElement();this.elementVertical.scrollTop=wn.elOffset(r).top-wn.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(l){return this.rows()}}class kh extends pu{constructor(l){super(l),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var l=this.tableElement;l.firstChild;)l.removeChild(l.firstChild);l.style.paddingTop="",l.style.paddingBottom="",l.style.minWidth="",l.style.minHeight="",l.style.display="",l.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(l){for(var r=this.elementVertical.scrollTop,a=!1,u=!1,g=this.table.rowManager.scrollLeft,E=this.rows(),w=this.vDomTop;w<=this.vDomBottom;w++)if(E[w]){var M=r-E[w].getElement().offsetTop;if(!(!1===u||Math.abs(M)<u))break;u=M,a=w}E.forEach(P=>{P.deinitializeHeight()}),l&&l(),this._virtualRenderFill(!1===a?this.rows.length-1:a,!0,u||0),this.scrollColumns(g)}scrollColumns(l){this.table.rowManager.scrollHorizontal(l)}scrollRows(l,r){var a=l-this.vDomScrollPosTop,u=l-this.vDomScrollPosBottom,g=2*this.vDomWindowBuffer,E=this.rows();if(this.scrollTop=l,-a>g||u>g){var w=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*E.length)),this.scrollColumns(w)}else r?(a<0&&this._addTopRow(E,-a),u<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(E,-u):this.vDomScrollPosBottom=this.scrollTop)):(u>=0&&this._addBottomRow(E,u),a>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(E,a):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(l){var r=this.rows().indexOf(l);return!(Math.abs(this.vDomTop-r)>Math.abs(this.vDomBottom-r))}scrollToRow(l){var r=this.rows().indexOf(l);r>-1&&this._virtualRenderFill(r,!0)}visibleRows(l){var r=this.elementVertical.scrollTop,a=this.elementVertical.clientHeight+r,u=!1,g=0,E=0,w=this.rows();if(l)g=this.vDomTop,E=this.vDomBottom;else for(var M=this.vDomTop;M<=this.vDomBottom;M++)if(w[M])if(u){if(!(a-w[M].getElement().offsetTop>=0))break;E=M}else if(r-w[M].getElement().offsetTop>=0)g=M;else{if(u=!0,!(a-w[M].getElement().offsetTop>=0))break;E=M}return w.slice(g,E+1)}_virtualRenderFill(l,r,a){var u=this.tableElement,g=this.elementVertical,E=0,w=0,M=0,P=0,J=0,ut=this.rows(),Dt=ut.length,Lt=this.elementVertical.clientHeight;if(a=a||0,l=l||0){for(;u.firstChild;)u.removeChild(u.firstChild);(M=(Dt-l+1)*this.vDomRowHeight)<Lt&&(l-=Math.ceil((Lt-M)/this.vDomRowHeight))<0&&(l=0),l-=E=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),l)}else this.clear();if(Dt&&wn.elVisible(this.elementVertical)){for(this.vDomTop=l,this.vDomBottom=l-1;(w<=Lt+this.vDomWindowBuffer||J<this.vDomWindowMinTotalRows)&&this.vDomBottom<Dt-1;){var ye,Qt=this.vDomBottom+1,de=ut[Qt];this.styleRow(de,Qt),u.appendChild(de.getElement()),de.initialize(),de.heightInitialized||de.normalizeHeight(!0),ye=de.getHeight(),J<E?P+=ye:w+=ye,ye>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*ye),this.vDomBottom++,J++}l?(this.vDomTopPad=r?this.vDomRowHeight*this.vDomTop+a:this.scrollTop-P,this.vDomBottomPad=this.vDomBottom==Dt-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-w-P,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((w+P)/J),this.vDomBottomPad=this.vDomRowHeight*(Dt-this.vDomBottom-1),this.vDomScrollHeight=P+w+this.vDomBottomPad-Lt),u.style.paddingTop=this.vDomTopPad+"px",u.style.paddingBottom=this.vDomBottomPad+"px",r&&(this.scrollTop=this.vDomTopPad+P+a-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-Lt:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-Lt),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&r&&(this.scrollTop+=this.elementVertical.offsetHeight-Lt),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,g.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(l,r){for(var a=this.tableElement,u=[],g=0,E=this.vDomTop-1,w=0;this.vDomTop;){let P,J,M=l[E];if(!(M&&w<this.vDomMaxRenderChain))break;if(P=M.getHeight()||this.vDomRowHeight,J=M.initialized,!(r>=P))break;this.styleRow(M,E),a.insertBefore(M.getElement(),a.firstChild),(!M.initialized||!M.heightInitialized)&&u.push(M),M.initialize(),J||(P=M.getElement().offsetHeight,P>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*P)),r-=P,g+=P,this.vDomTop--,E--,w++}for(let M of u)M.clearCellHeight();this._quickNormalizeRowHeight(u),g&&(this.vDomTopPad-=g,this.vDomTopPad<0&&(this.vDomTopPad=E*this.vDomRowHeight),E<1&&(this.vDomTopPad=0),a.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=g)}_removeTopRow(l,r){for(var a=[],u=0,g=0;;){let w,E=l[this.vDomTop];if(!(E&&g<this.vDomMaxRenderChain))break;if(w=E.getHeight()||this.vDomRowHeight,!(r>=w))break;this.vDomTop++,r-=w,u+=w,a.push(E),g++}for(let E of a){let w=E.getElement();w.parentNode&&w.parentNode.removeChild(w)}u&&(this.vDomTopPad+=u,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?u:u+this.vDomWindowBuffer)}_addBottomRow(l,r){for(var a=this.tableElement,u=[],g=0,E=this.vDomBottom+1,w=0;;){let P,J,M=l[E];if(!(M&&w<this.vDomMaxRenderChain))break;if(P=M.getHeight()||this.vDomRowHeight,J=M.initialized,!(r>=P))break;this.styleRow(M,E),a.appendChild(M.getElement()),(!M.initialized||!M.heightInitialized)&&u.push(M),M.initialize(),J||(P=M.getElement().offsetHeight,P>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*P)),r-=P,g+=P,this.vDomBottom++,E++,w++}for(let M of u)M.clearCellHeight();this._quickNormalizeRowHeight(u),g&&(this.vDomBottomPad-=g,(this.vDomBottomPad<0||E==l.length-1)&&(this.vDomBottomPad=0),a.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=g)}_removeBottomRow(l,r){for(var a=[],u=0,g=0;;){let w,E=l[this.vDomBottom];if(!(E&&g<this.vDomMaxRenderChain))break;if(w=E.getHeight()||this.vDomRowHeight,!(r>=w))break;this.vDomBottom--,r-=w,u+=w,a.push(E),g++}for(let E of a){let w=E.getElement();w.parentNode&&w.parentNode.removeChild(w)}u&&(this.vDomBottomPad+=u,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=u)}_quickNormalizeRowHeight(l){for(let r of l)r.calcHeight();for(let r of l)r.setCellHeight()}}class Cd extends Dn{constructor(l){super(l),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var l=document.createElement("div");return l.classList.add("tabulator-tableholder"),l.setAttribute("tabindex",0),l.setAttribute("role","rowgroup"),l}createTableElement(){var l=document.createElement("div");return l.classList.add("tabulator-table"),l.setAttribute("role","rowgroup"),l}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(l,r){return r?this.activeRows.indexOf(l):this.rows.indexOf(l)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var l=this.element.scrollLeft,r=this.scrollLeft>l,a=this.element.scrollTop,u=this.scrollTop>a;this.scrollLeft!=l&&(this.scrollLeft=l,this.dispatch("scroll-horizontal",l,r),this.dispatchExternal("scrollHorizontal",l,r)),this.scrollTop!=a&&(this.scrollTop=a,this.renderer.scrollRows(a,u),this.dispatch("scroll-vertical",a,u),this.dispatchExternal("scrollVertical",a,u))})}findRow(l){return"object"!=typeof l?null!=l&&(this.rows.find(a=>a.data[this.table.options.index]==l)||!1):l instanceof fa?l:l instanceof dd?l._getSelf()||!1:"undefined"!=typeof HTMLElement&&l instanceof HTMLElement&&this.rows.find(a=>a.getElement()===l)||!1}getRowFromDataObject(l){return this.rows.find(a=>a.data===l)||!1}getRowFromPosition(l,r){return r?this.activeRows[l]:this.rows[l]}scrollToRow(l,r,a){return this.renderer.scrollToRowPosition(l,r,a)}setData(l,r,a){return new Promise((u,g)=>{r&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(l,!0):this.reRenderInPosition(()=>{this._setDataActual(l)}):(this.table.options.autoColumns&&a&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(l),this.resetScroll(),this._setDataActual(l)),u()})}_setDataActual(l,r){this.dispatchExternal("dataProcessing",l),this._wipeElements(),Array.isArray(l)?(this.dispatch("data-processing",l),l.forEach((a,u)=>{if(a&&"object"==typeof a){var g=new fa(a,this);this.rows.push(g)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",a)}),this.refreshActiveData(!1,!1,r),this.dispatch("data-processed",l),this.dispatchExternal("dataProcessed",l)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof l,"\nData:     ",l)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(l=>{l.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(l,r){var a=this.rows.indexOf(l),u=this.activeRows.indexOf(l);u>-1&&this.activeRows.splice(u,1),a>-1&&this.rows.splice(a,1),this.setActiveRows(this.activeRows),this.displayRowIterator(g=>{var E=g.indexOf(l);E>-1&&g.splice(E,1)}),r||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",l.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(l,r,a,u){var g=this.addRowActual(l,r,a,u);return this.dispatch("row-added",g,l,r,a),g}addRows(l,r,a){var u=[];return new Promise((g,E)=>{r=this.findAddRowPos(r),Array.isArray(l)||(l=[l]),(void 0===a&&r||void 0!==a&&!r)&&l.reverse(),l.forEach((w,M)=>{var P=this.addRow(w,r,a,!0);u.push(P),this.dispatch("row-added",P,l,r,a)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),u.length&&this._clearPlaceholder(),g(u)})}findAddRowPos(l){return void 0===l&&(l=this.table.options.addRowPos),"pos"===l&&(l=!0),"bottom"===l&&(l=!1),l}addRowActual(l,r,a,u){var M,P,g=l instanceof fa?l:new fa(l||{},this),E=this.findAddRowPos(r),w=-1;return a||(P=this.chain("row-adding-position",[g,E],null,{index:a,top:E}),a=P.index,E=P.top),void 0!==a&&(a=this.findRow(a)),(a=this.chain("row-adding-index",[g,a,E],null,a))&&(w=this.rows.indexOf(a)),a&&w>-1?(M=this.activeRows.indexOf(a),this.displayRowIterator(function(J){var ut=J.indexOf(a);ut>-1&&J.splice(E?ut:ut+1,0,g)}),M>-1&&this.activeRows.splice(E?M:M+1,0,g),this.rows.splice(E?w:w+1,0,g)):E?(this.displayRowIterator(function(J){J.unshift(g)}),this.activeRows.unshift(g),this.rows.unshift(g)):(this.displayRowIterator(function(J){J.push(g)}),this.activeRows.push(g),this.rows.push(g)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",g.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),u||this.reRenderInPosition(),g}moveRow(l,r,a){this.dispatch("row-move",l,r,a),this.moveRowActual(l,r,a),this.regenerateRowNumbers(),this.dispatch("row-moved",l,r,a),this.dispatchExternal("rowMoved",l.getComponent())}moveRowActual(l,r,a){this.moveRowInArray(this.rows,l,r,a),this.moveRowInArray(this.activeRows,l,r,a),this.displayRowIterator(u=>{this.moveRowInArray(u,l,r,a)}),this.dispatch("row-moving",l,r,a)}moveRowInArray(l,r,a,u){var g,E,M;if(r!==a&&((g=l.indexOf(r))>-1&&(l.splice(g,1),E=l.indexOf(a),l.splice(E>-1?u?E+1:E:g,0,r)),l===this.getDisplayRows())){M=E>g?E:g+1;for(let P=g<E?g:E;P<=M;P++)l[P]&&this.styleRow(l[P],P)}}clearData(){this.setData([])}getRowIndex(l){return this.findRowIndex(l,this.rows)}getDisplayRowIndex(l){var r=this.getDisplayRows().indexOf(l);return r>-1&&r}nextDisplayRow(l,r){var a=this.getDisplayRowIndex(l),u=!1;return!1!==a&&a<this.displayRowsCount-1&&(u=this.getDisplayRows()[a+1]),!u||u instanceof fa&&"row"==u.type?u:this.nextDisplayRow(u,r)}prevDisplayRow(l,r){var a=this.getDisplayRowIndex(l),u=!1;return a&&(u=this.getDisplayRows()[a-1]),!r||!u||u instanceof fa&&"row"==u.type?u:this.prevDisplayRow(u,r)}findRowIndex(l,r){var a;return!!((l=this.findRow(l))&&(a=r.indexOf(l),a>-1))&&a}getData(l,r){var a=[];return this.getRows(l).forEach(function(g){"row"==g.type&&a.push(g.getData(r||"data"))}),a}getComponents(l){var r=[];return this.getRows(l).forEach(function(u){r.push(u.getComponent())}),r}getDataCount(l){return this.getRows(l).length}scrollHorizontal(l){this.scrollLeft=l,this.element.scrollLeft=l,this.dispatch("scroll-horizontal",l)}registerDataPipelineHandler(l,r){void 0!==r?(this.dataPipeline.push({handler:l,priority:r}),this.dataPipeline.sort((a,u)=>a.priority-u.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(l,r){void 0!==r?(this.displayPipeline.push({handler:l,priority:r}),this.displayPipeline.sort((a,u)=>a.priority-u.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(l,r,a){var u=this.table,g="",E=0,w=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof l)if((E=this.dataPipeline.findIndex(M=>M.handler===l))>-1)g="dataPipeline",r&&(E==this.dataPipeline.length-1?g="display":E++);else{if(!((E=this.displayPipeline.findIndex(M=>M.handler===l))>-1))return void console.error("Unable to refresh data, invalid handler provided",l);g="displayPipeline",r&&(E==this.displayPipeline.length-1?g="end":E++)}else g=l||"all",E=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===g&&E<this.redrawBlockRestoreConfig.index||w.indexOf(g)<w.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:l,skipStage:r,renderInPosition:a,stage:g,index:E});else{switch(this.dispatch("data-refeshing"),l||(this.activeRowsPipeline[0]=this.rows.slice(0)),g){case"all":case"dataPipeline":for(let M=E;M<this.dataPipeline.length;M++){let P=this.dataPipeline[M].handler(this.activeRowsPipeline[M].slice(0));this.activeRowsPipeline[M+1]=P||this.activeRowsPipeline[M].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":E=0,this.resetDisplayRows();case"displayPipeline":for(let M=E;M<this.displayPipeline.length;M++){let P=this.displayPipeline[M].handler((M?this.getDisplayRows(M-1):this.activeRows).slice(0),a);this.setDisplayRows(P||this.getDisplayRows(M-1).slice(0),M)}}wn.elVisible(this.element)&&(a?this.reRenderInPosition():(l||this.table.columnManager.renderer.renderColumns(),this.renderTable(),u.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(l=>{var r=l.getCell(this.rowNumColumn);r&&r._generateContents()})}setActiveRows(l){this.activeRows=l,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(l,r){var a=!0;return r&&void 0!==this.displayRows[r]?(this.displayRows[r]=l,a=!0):(this.displayRows.push(l),a=r=this.displayRows.length-1),r==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),a}getDisplayRows(l){return void 0===l?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[l]||[]}getVisibleRows(l){return this.renderer.visibleRows(!l)}displayRowIterator(l){this.activeRowsPipeline.forEach(l),this.displayRows.forEach(l),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(l){var r;switch(l){case"active":r=this.activeRows;break;case"display":r=this.table.rowManager.getDisplayRows();break;case"visible":r=this.getVisibleRows(!0);break;default:r=this.chain("rows-retrieve",l,null,this.rows)||this.rows}return r}reRenderInPosition(l){this.redrawBlock?l?l():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(l)}initializeRenderer(){var l;(l="string"==typeof this.table.options.renderVertical?{virtual:kh,basic:Nl}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new l(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(l,r){var a=l.getElement();r%2?(a.classList.add("tabulator-row-even"),a.classList.remove("tabulator-row-odd")):(a.classList.add("tabulator-row-odd"),a.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(l){l.normalizeHeight()})}adjustTableSize(){var l=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let r=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+r+"px)",this.element.style.height="calc(100% - "+r+"px)",this.element.style.maxHeight="calc(100% - "+r+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-r+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&l!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(l){l.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(l){var r=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,l?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(r),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var l=document.createEvent("Event");l.initEvent("scroll",!1,!0),this.element.dispatchEvent(l)}else this.element.dispatchEvent(new Event("scroll"))}}class Lh extends Dn{constructor(l){super(l),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var l=document.createElement("div");return l.classList.add("tabulator-footer"),l}initializeElement(){this.table.options.footerElement&&("string"==typeof this.table.options.footerElement?"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement)):this.element=this.table.options.footerElement)}getElement(){return this.element}append(l,r){this.activate(r),this.element.appendChild(l),this.table.rowManager.adjustTableSize()}prepend(l,r){this.activate(r),this.element.insertBefore(l,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(l){l.parentNode.removeChild(l),this.deactivate()}deactivate(l){(!this.element.firstChild||l)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(l){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),l&&this.links.push(l)}redraw(){this.links.forEach(function(l){l.footerRedraw()})}}class Nh extends Dn{constructor(l){super(l),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var l={};this.listeners.forEach(r=>{l[r]={handler:null,components:[]}}),this.listeners=l}bindSubscriptionWatchers(){var l=Object.keys(this.listeners),r=Object.values(this.componentMap);for(let a of r)for(let u of l)this.subscriptionChange(a+"-"+u,this.subscriptionChanged.bind(this,a,u))}subscriptionChanged(l,r,a){var u=this.listeners[r].components,g=u.indexOf(l),E=!1;a?-1===g&&(u.push(l),E=!0):this.subscribed(l+"-"+r)||g>-1&&(u.splice(g,1),E=!0),E&&this.updateEventListeners()}updateEventListeners(){for(let l in this.listeners){let r=this.listeners[l];r.components.length?r.handler||(r.handler=this.track.bind(this,l),this.el.addEventListener(l,r.handler)):r.handler&&(this.el.removeEventListener(l,r.handler),r.handler=null)}}track(l,r){var a=r.composedPath&&r.composedPath()||r.path,u=this.findTargets(a);u=this.bindComponents(l,u),this.triggerEvents(l,r,u)}findTargets(l){var r={};let a=Object.keys(this.componentMap);for(let u of l){let g=u.classList?[...u.classList]:[];if(g.filter(M=>this.abortClasses.includes(M)).length)break;let w=g.filter(M=>a.includes(M));for(let M of w)r[this.componentMap[M]]=u}return r.group&&r.group===r.row&&delete r.row,r}bindComponents(l,r){var a=Object.keys(r).reverse(),u=this.listeners[l],g={};for(let E of a){let w,M=r[E],P=this.previousTargets[E];if(P&&P.target===M)w=P.component;else switch(E){case"row":case"group":(u.components.includes("row")||u.components.includes("cell"))&&(w=this.table.rowManager.getVisibleRows().find(ut=>ut.getElement()===M));break;case"column":u.components.includes("column")&&(w=this.table.columnManager.findColumn(M));break;case"cell":u.components.includes("cell")&&(w=r.row.findCell(M))}w&&(r[E]=w,g[E]={target:M,component:w})}return this.previousTargets=g,r}triggerEvents(l,r,a){var u=this.listeners[l];for(let g in a)a[g]&&u.components.includes(g)&&this.dispatch(g+"-"+l,r,a[g])}}class dp{constructor(l){this.table=l,this.bindings={}}bind(l,r,a){this.bindings[l]||(this.bindings[l]={}),this.bindings[l][r]?console.warn("Unable to bind component handler, a matching function name is already bound",l,r,hanlder):this.bindings[l][r]=a}handle(l,r,a){if(this.bindings[l]&&this.bindings[l][a])return this.bindings[l][a].bind(null,r);"then"!==a&&"string"==typeof a&&!a.startsWith("_")&&console.error("The "+l+" component does not have a "+a+" function, have you checked that you have the correct Tabulator module installed?")}}class pp extends Dn{constructor(l){super(l),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var l;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((l=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=l.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((l=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=l.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var l=document.createElement("div");return l.classList.add("tabulator-loader"),l}createMsgElement(){var l=document.createElement("div");return l.classList.add("tabulator-loader-msg"),l.setAttribute("role","alert"),l}load(l,r,a,u,g){var E=++this.requestOrder;return this.dispatchExternal("dataLoading",l),l&&(0==l.indexOf("{")||0==l.indexOf("["))&&(l=JSON.parse(l)),this.confirm("data-loading",l,r,a,g)?(this.loading=!0,g||this.showLoader(),r=this.chain("data-params",[l,a,g],r||{},{}),r=this.mapParams(r,this.table.options.dataSendParams),this.chain("data-load",[l,r,a,g],Promise.resolve([])).then(P=>{!Array.isArray(P)&&"object"==typeof P&&(P=this.mapParams(P,this.objectInvert(this.table.options.dataReceiveParams)));var J=this.chain("data-loaded",P,null,P);E==this.requestOrder?(this.hideLoader(),!1!==J&&(this.dispatchExternal("dataLoaded",J),this.table.rowManager.setData(J,u,!u))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(P=>{console.error("Data Load Error: ",P),this.dispatchExternal("dataLoadError",P),g||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",l),l||(l=[]),this.table.rowManager.setData(l,u,!u),Promise.resolve())}mapParams(l,r){var a={};for(let u in l)a[r.hasOwnProperty(u)?r[u]:u]=l[u];return a}objectInvert(l){var r={};for(let a in l)r[l[a]]=a;return r}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class sf{constructor(l,r,a){this.table=l,this.events={},this.optionsList=r||{},this.subscriptionNotifiers={},this.dispatch=a?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=a}subscriptionChange(l,r){this.subscriptionNotifiers[l]||(this.subscriptionNotifiers[l]=[]),this.subscriptionNotifiers[l].push(r),this.subscribed(l)&&this._notifiySubscriptionChange(l,!0)}subscribe(l,r){this.events[l]||(this.events[l]=[]),this.events[l].push(r),this._notifiySubscriptionChange(l,!0)}unsubscribe(l,r){var a;if(this.events[l]){if(r){if(!((a=this.events[l].findIndex(u=>u===r))>-1))return void console.warn("Cannot remove event, no matching event found:",l,r);this.events[l].splice(a,1)}else delete this.events[l];this._notifiySubscriptionChange(l,!1)}else console.warn("Cannot remove event, no events set on:",l)}subscribed(l){return this.events[l]&&this.events[l].length}_notifiySubscriptionChange(l,r){var a=this.subscriptionNotifiers[l];a&&a.forEach(u=>{u(r)})}_dispatch(){var a,l=Array.from(arguments),r=l.shift();return this.events[r]&&this.events[r].forEach((u,g)=>{let E=u.apply(this.table,l);g||(a=E)}),a}_debugDispatch(){var l=Array.from(arguments),r=l[0];return l[0]="ExternalEvent:"+l[0],(!0===this.debug||this.debug.includes(r))&&console.log(...l),this._dispatch(...arguments)}}class Kf{constructor(l){this.events={},this.subscriptionNotifiers={},this.dispatch=l?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=l?this._debugChain.bind(this):this._chain.bind(this),this.confirm=l?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=l}subscriptionChange(l,r){this.subscriptionNotifiers[l]||(this.subscriptionNotifiers[l]=[]),this.subscriptionNotifiers[l].push(r),this.subscribed(l)&&this._notifiySubscriptionChange(l,!0)}subscribe(l,r,a=1e4){this.events[l]||(this.events[l]=[]),this.events[l].push({callback:r,priority:a}),this.events[l].sort((u,g)=>u.priority-g.priority),this._notifiySubscriptionChange(l,!0)}unsubscribe(l,r){var a;if(this.events[l]){if(r){if(!((a=this.events[l].findIndex(u=>u.callback===r))>-1))return void console.warn("Cannot remove event, no matching event found:",l,r);this.events[l].splice(a,1)}this._notifiySubscriptionChange(l,!1)}else console.warn("Cannot remove event, no events set on:",l)}subscribed(l){return this.events[l]&&this.events[l].length}_chain(l,r,a,u){var g=a;return Array.isArray(r)||(r=[r]),this.subscribed(l)?(this.events[l].forEach((E,w)=>{g=E.callback.apply(this,r.concat([g]))}),g):"function"==typeof u?u():u}_confirm(l,r){var a=!1;return Array.isArray(r)||(r=[r]),this.subscribed(l)&&this.events[l].forEach((u,g)=>{u.callback.apply(this,r)&&(a=!0)}),a}_notifiySubscriptionChange(l,r){var a=this.subscriptionNotifiers[l];a&&a.forEach(u=>{u(r)})}_dispatch(){var l=Array.from(arguments),r=l.shift();this.events[r]&&this.events[r].forEach(a=>{a.callback.apply(this,l)})}_debugDispatch(){var l=Array.from(arguments),r=l[0];return l[0]="InternalEvent:"+r,(!0===this.debug||this.debug.includes(r))&&console.log(...l),this._dispatch(...arguments)}_debugChain(){var l=Array.from(arguments),r=l[0];return l[0]="InternalEvent:"+r,(!0===this.debug||this.debug.includes(r))&&console.log(...l),this._chain(...arguments)}_debugConfirm(){var l=Array.from(arguments),r=l[0];return l[0]="InternalEvent:"+r,(!0===this.debug||this.debug.includes(r))&&console.log(...l),this._confirm(...arguments)}}let Va=(()=>{class _{static register(r){_.tables.push(r)}static deregister(r){var a=_.tables.indexOf(r);a>-1&&_.tables.splice(a,1)}static lookupTable(r,a){var g,E,u=[];if("string"==typeof r){if((g=document.querySelectorAll(r)).length)for(var w=0;w<g.length;w++)(E=_.matchElement(g[w]))&&u.push(E)}else"undefined"!=typeof HTMLElement&&r instanceof HTMLElement||r instanceof Pl?(E=_.matchElement(r))&&u.push(E):Array.isArray(r)?r.forEach(function(M){u=u.concat(_.lookupTable(M))}):a||console.warn("Table Connection Error - Invalid Selector",r);return u}static matchElement(r){return _.tables.find(function(a){return r instanceof Pl?a===r:a.element===r})}}return _.tables=[],_})();function af(_){_.forEach(function(l){l.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var lf={fitData:function(_){this.table.columnManager.renderer.reinitializeColumnWidths(_),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:af,fitDataTable:af,fitDataStretch:function(_){var l=0,r=this.table.rowManager.element.clientWidth,a=0,u=!1;_.forEach((g,E)=>{g.widthFixed||g.reinitializeWidth(),(this.table.options.responsiveLayout?g.modules.responsive.visible:g.visible)&&(u=g),g.visible&&(l+=g.getWidth())}),u?(a=r-l+u.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(u.setWidth(0),this.table.modules.responsiveLayout.update()),a>0?u.setWidth(a):u.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(_){var g,P,l=this.table.element.clientWidth,r=0,a=0,u=0,E=[],w=[],M=0,J=0;function ut(Lt){return"string"==typeof Lt?Lt.indexOf("%")>-1?l/100*parseInt(Lt):parseInt(Lt):Lt}function Dt(Lt,Qt,de,ye){var De=[],ai=0,xi=0,Ri=0,Si=u,Ui=0,Wi=0,qi=[];function an(tn){return de*(tn.column.definition.widthGrow||1)}function zn(tn){return ut(tn.width)-de*(tn.column.definition.widthShrink||0)}return Lt.forEach(function(tn,Vn){var Bo=ye?zn(tn):an(tn);tn.column.minWidth>=Bo?De.push(tn):tn.column.maxWidth&&tn.column.maxWidth<Bo?(tn.width=tn.column.maxWidth,Qt-=tn.column.maxWidth,(Si-=ye?tn.column.definition.widthShrink||1:tn.column.definition.widthGrow||1)&&(de=Math.floor(Qt/Si))):(qi.push(tn),Wi+=ye?tn.column.definition.widthShrink||1:tn.column.definition.widthGrow||1)}),De.length?(De.forEach(function(tn){ai+=ye?tn.width-tn.column.minWidth:tn.column.minWidth,tn.width=tn.column.minWidth}),Ui=(xi=Qt-ai)-(Ri=Wi?Math.floor(xi/Wi):xi)*Wi,Ui+=Dt(qi,xi,Ri,ye)):(Ui=Wi?Qt-Math.floor(Qt/Wi)*Wi:Qt,qi.forEach(function(tn){tn.width=ye?zn(tn):an(tn)})),Ui}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(l-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),_.forEach(function(Lt){var Qt,de,ye;Lt.visible&&(Qt=Lt.definition.width,de=parseInt(Lt.minWidth),Qt?(ye=ut(Qt),r+=ye>de?ye:de,Lt.definition.widthShrink&&(w.push({column:Lt,width:ye>de?ye:de}),M+=Lt.definition.widthShrink)):(E.push({column:Lt,width:0}),u+=Lt.definition.widthGrow||1))}),a=l-r,g=Math.floor(a/u),J=Dt(E,a,g,!1),E.length&&J>0&&(E[E.length-1].width+=+J),E.forEach(function(Lt){a-=Lt.width}),(P=Math.abs(J)+a)>0&&M&&(J=Dt(w,P,Math.floor(P/M),!0)),w.length&&(w[w.length-1].width-=J),E.forEach(function(Lt){Lt.column.setWidth(Lt.width)}),w.forEach(function(Lt){Lt.column.setWidth(Lt.width)})}},cf={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},Ph=Object.freeze({__proto__:null,LayoutModule:(()=>{class _ extends Qi{constructor(r){super(r,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var r=this.table.options.layout;_.modes[r]?this.mode=r:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+r),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){_.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return _.moduleName="layout",_.modes=lf,_})(),LocalizeModule:(()=>{class _ extends Qi{constructor(r){super(r),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=wn.deepClone(_.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let r in this.table.options.langs)this.installLang(r,this.table.options.langs[r]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(r){this.langList.default.headerFilters.default=r}setHeaderFilterColumnPlaceholder(r,a){this.langList.default.headerFilters.columns[r]=a,this.lang&&!this.lang.headerFilters.columns[r]&&(this.lang.headerFilters.columns[r]=a)}installLang(r,a){this.langList[r]?this._setLangProp(this.langList[r],a):this.langList[r]=a}_setLangProp(r,a){for(let u in a)r[u]&&"object"==typeof r[u]?this._setLangProp(r[u],a[u]):r[u]=a[u]}setLocale(r){if(!0===(r=r||"default")&&navigator.language&&(r=navigator.language.toLowerCase()),r&&!this.langList[r]){let u=r.split("-")[0];this.langList[u]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",r,u),r=u):(console.warn("Localization Error - Matching locale not found, using default: ",r),r="default")}this.locale=r,this.lang=wn.deepClone(this.langList.default||{}),"default"!=r&&function a(u,g){for(var E in u)"object"==typeof u[E]?(g[E]||(g[E]={}),a(u[E],g[E])):g[E]=u[E]}(this.langList[r],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(r){return this.locale}getLang(r){return r?this.langList[r]:this.lang}getText(r,a){var u=(r=a?r+"|"+a:r).split("|");return this._getLangElement(u,this.locale)||""}_getLangElement(r,a){var u=this.lang;return r.forEach(function(g){var E;u&&(u=void 0!==(E=u[g])&&E)}),u}bind(r,a){this.bindings[r]||(this.bindings[r]=[]),this.bindings[r].push(a),a(this.getText(r),this.lang)}_executeBindings(){for(let r in this.bindings)this.bindings[r].forEach(a=>{a(this.getText(r),this.lang)})}}return _.moduleName="localize",_.langs=cf,_})(),CommsModule:(()=>{class _ extends Qi{constructor(r){super(r)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(r){var a=[];return Va.lookupTable(r).forEach(g=>{this.table!==g&&a.push(g)}),a}send(r,a,u,g){var E=this.getConnections(r);E.forEach(w=>{w.tableComms(this.table.element,a,u,g)}),!E.length&&r&&console.warn("Table Connection Error - No tables matching selector found",r)}receive(r,a,u,g){if(this.table.modExists(a))return this.table.modules[a].commsReceived(r,u,g);console.warn("Inter-table Comms Error - no such module:",a)}}return _.moduleName="comms",_})()});class ih{constructor(l,r){this.bindStaticFuctionality(l),this.bindModules(l,Ph,!0),r&&this.bindModules(l,r)}bindStaticFuctionality(l){l.moduleBindings={},l.extendModule=function(r,a,u){if(l.moduleBindings[r]){var g=l.moduleBindings[r][a];if(g)if("object"==typeof u)for(let E in u)g[E]=u[E];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",a)}else console.warn("Module Error - module does not exist:",r)},l.registerModule=function(r){Array.isArray(r)||(r=[r]),r.forEach(a=>{l.registerModuleBinding(a)})},l.registerModuleBinding=function(r){l.moduleBindings[r.moduleName]=r},l.findTable=function(r){var a=Va.lookupTable(r,!0);return!(Array.isArray(a)&&!a.length)&&a},l.prototype.bindModules=function(){for(var r in this.modules={},l.moduleBindings){let a=l.moduleBindings[r];this.modules[r]=new a(this),a.prototype.moduleCore?this.modulesCore[r]=this.modules[r]:this.modulesRegular[r]=this.modules[r]}}}bindModules(l,r,a){var u=Object.values(r);a&&u.forEach(g=>{g.prototype.moduleCore=!0}),l.registerModule(u)}}let Pl=(()=>{class _{constructor(r,a){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new dp(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new du(this,"table constructor"),this.initialized=!1,this.initializeElement(r)&&(this.initialzeCoreSystems(a),setTimeout(()=>{this._create()})),Va.register(this)}initializeElement(r){return"undefined"!=typeof HTMLElement&&r instanceof HTMLElement?(this.element=r,!0):"string"==typeof r?(this.element=document.querySelector(r),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",r),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",r),!1)}initialzeCoreSystems(r){this.columnManager=new xh(this),this.rowManager=new Cd(this),this.footerManager=new Lh(this),this.dataLoader=new pp(this),this.bindModules(),this.options=this.optionsList.generate(_.defaultOptions,r),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new sf(this,this.options,this.options.debugEventsExternal),this.eventBus=new Kf(this.options.debugEventsInternal),this.interactionMonitor=new Nh(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var r=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==r.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var u,r=this.element,a=this.options;if("TABLE"===r.tagName){this.originalElement=this.element,u=document.createElement("div");var g=r.attributes;for(var E in g)"object"==typeof g[E]&&u.setAttribute(g[E].name,g[E].value);r.parentNode.replaceChild(u,r),this.element=r=u}for(r.classList.add("tabulator"),r.setAttribute("role","grid");r.firstChild;)r.removeChild(r.firstChild);a.height&&(a.height=isNaN(a.height)?a.height:a.height+"px",r.style.height=a.height),!1!==a.minHeight&&(a.minHeight=isNaN(a.minHeight)?a.minHeight:a.minHeight+"px",r.style.minHeight=a.minHeight),!1!==a.maxHeight&&(a.maxHeight=isNaN(a.maxHeight)?a.maxHeight:a.maxHeight+"px",r.style.maxHeight=a.maxHeight)}_initializeTable(){var r=this.element,a=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let E in this.modulesCore)this.modulesCore[E].initialize();if("string"==typeof a.placeholder){var u=document.createElement("div");u.classList.add("tabulator-placeholder");var g=document.createElement("span");g.innerHTML=a.placeholder,u.appendChild(g),a.placeholder=u}r.appendChild(this.columnManager.getElement()),r.appendChild(this.rowManager.getElement()),a.footerElement&&this.footerManager.activate(),a.autoColumns&&a.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let E in this.modulesRegular)this.modulesRegular[E].initialize();this.columnManager.setColumns(a.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var r=this.element;for(Va.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(a){a.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];r.firstChild;)r.removeChild(r.firstChild);r.classList.remove("tabulator")}_detectBrowser(){var r=navigator.userAgent||navigator.vendor||window.opera;r.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):r.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):r.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(r){return new Promise((a,u)=>{var g=document.createElement("input");g.type="file",g.accept=r||".json,application/json",g.addEventListener("change",E=>{var P,w=g.files[0],M=new FileReader;M.readAsText(w),M.onload=J=>{try{P=JSON.parse(M.result)}catch(ut){return console.warn("File Load Error - File contents is invalid JSON",ut),void u(ut)}this.setData(P).then(ut=>{a(ut)}).catch(ut=>{a(ut)})},M.onerror=J=>{console.warn("File Load Error - Unable to read file"),u()}}),g.click()})}setData(r,a,u){if(this.initialized)return this.dataLoader.load(r,a,u,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(r){return this.rowManager.getData(r)}getDataCount(r){return this.rowManager.getDataCount(r)}replaceData(r,a,u){if(this.initialized)return this.dataLoader.load(r,a,u,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(r){var a=0;if(this.initialized)return new Promise((u,g)=>{this.dataLoader.blockActiveLoad(),"string"==typeof r&&(r=JSON.parse(r)),r?r.forEach(E=>{var w=this.rowManager.findRow(E[this.options.index]);w&&(a++,w.updateData(E).then(()=>{--a||u()}))}):(console.warn("Update Error - No data provided"),g("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(r,a,u){if(this.initialized)return new Promise((g,E)=>{this.dataLoader.blockActiveLoad(),"string"==typeof r&&(r=JSON.parse(r)),r?this.rowManager.addRows(r,a,u).then(w=>{var M=[];w.forEach(function(P){M.push(P.getComponent())}),g(M)}):(console.warn("Update Error - No data provided"),E("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(r){var a=[],u=0;if(this.initialized)return new Promise((g,E)=>{this.dataLoader.blockActiveLoad(),"string"==typeof r&&(r=JSON.parse(r)),r?r.forEach(w=>{var M=this.rowManager.findRow(w[this.options.index]);u++,M?M.updateData(w).then(()=>{u--,a.push(M.getComponent()),u||g(a)}):this.rowManager.addRows(w).then(P=>{u--,a.push(P[0].getComponent()),u||g(a)})}):(console.warn("Update Error - No data provided"),E("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(r){var a=this.rowManager.findRow(r);return a?a.getComponent():(console.warn("Find Error - No matching row found:",r),!1)}getRowFromPosition(r,a){var u=this.rowManager.getRowFromPosition(r,a);return u?u.getComponent():(console.warn("Find Error - No matching row found:",r),!1)}deleteRow(r){var a=[];Array.isArray(r)||(r=[r]);for(let u of r){let g=this.rowManager.findRow(u,!0);if(!g)return console.error("Delete Error - No matching row found:",u),Promise.reject("Delete Error - No matching row found");a.push(g)}return a.sort((u,g)=>this.rowManager.rows.indexOf(u)>this.rowManager.rows.indexOf(g)?1:-1),a.forEach(u=>{u.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(r,a,u){if(this.initialized)return"string"==typeof r&&(r=JSON.parse(r)),this.rowManager.addRows(r,a,u).then(g=>g[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(r,a){var u=this.rowManager.findRow(r);return"string"==typeof a&&(a=JSON.parse(a)),u?u.updateData(a).then(()=>u.getComponent()):this.rowManager.addRows(a).then(g=>g[0].getComponent())}updateRow(r,a){var u=this.rowManager.findRow(r);return"string"==typeof a&&(a=JSON.parse(a)),u?u.updateData(a).then(()=>{resolve(u.getComponent())}):(console.warn("Update Error - No matching row found:",r),Promise.reject("Update Error - No matching row found"))}scrollToRow(r,a,u){var g=this.rowManager.findRow(r);return g?this.rowManager.scrollToRow(g,a,u):(console.warn("Scroll Error - No matching row found:",r),Promise.reject("Scroll Error - No matching row found"))}moveRow(r,a,u){var g=this.rowManager.findRow(r);g?g.moveToRow(a,u):console.warn("Move Error - No matching row found:",r)}getRows(r){if(this.initialized)return this.rowManager.getComponents(r);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(r,a){var u=this.rowManager.findRow(r);return u?this.rowManager.getRowPosition(u,a):(console.warn("Position Error - No matching row found:",r),!1)}setColumns(r){this.initialized?this.columnManager.setColumns(r):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(r){return this.columnManager.getComponents(r)}getColumn(r){var a=this.columnManager.findColumn(r);return a?a.getComponent():(console.warn("Find Error - No matching column found:",r),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(r){var a=this.columnManager.findColumn(r);if(!a)return console.warn("Column Show Error - No matching column found:",r),!1;a.show()}hideColumn(r){var a=this.columnManager.findColumn(r);if(!a)return console.warn("Column Hide Error - No matching column found:",r),!1;a.hide()}toggleColumn(r){var a=this.columnManager.findColumn(r);if(!a)return console.warn("Column Visibility Toggle Error - No matching column found:",r),!1;a.visible?a.hide():a.show()}addColumn(r,a,u){var g=this.columnManager.findColumn(u);return this.columnManager.addColumn(r,a,g).then(E=>E.getComponent())}deleteColumn(r){var a=this.columnManager.findColumn(r);return a?a.delete():(console.warn("Column Delete Error - No matching column found:",r),Promise.reject())}updateColumnDefinition(r,a){var u=this.columnManager.findColumn(r);return u?u.updateDefinition(a):(console.warn("Column Update Error - No matching column found:",r),Promise.reject())}moveColumn(r,a,u){var g=this.columnManager.findColumn(r),E=this.columnManager.findColumn(a);g?E?this.columnManager.moveColumn(g,E,u):console.warn("Move Error - No matching column found:",E):console.warn("Move Error - No matching column found:",r)}scrollToColumn(r,a,u){return new Promise((g,E)=>{var w=this.columnManager.findColumn(r);return w?this.columnManager.scrollToColumn(w,a,u):(console.warn("Scroll Error - No matching column found:",r),Promise.reject("Scroll Error - No matching column found"))})}redraw(r){this.initialized?(this.columnManager.redraw(r),this.rowManager.redraw(r)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(r){this.options.height=isNaN(r)?r:r+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(r,a){this.externalEvents.subscribe(r,a)}off(r,a){this.externalEvents.unsubscribe(r,a)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(r,a){return!!this.modules[r]||(a&&console.error("Tabulator Module Not Installed: "+r),!1)}module(r){var a=this.modules[r];return a||console.error("Tabulator module not installed: "+r),a}}return _.defaultOptions=Xf,_})();new ih(Pl),new ih(class extends Pl{},up);let fu=(()=>{class _{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null}get hot(){if(null!=this.hotInstance)return this.hotInstance;throw new Error("hot is null")}initGrid(r){Pl.registerModule([Ks,cu,Ha,Fc]),this.hotInstance=new Pl(r,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",clipboard:"copy",footerElement:"<div>\n        \x3c!-- <a href=\"javascript:{var event = new Event('TabCopy'); window.dispatchEvent(event);}\">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href=\"javascript:{var event = new Event('TabDownload'); window.dispatchEvent(event);}\">CSV</a>\n        --\x3e\n        \n    </div>",placeholder:"please press execute button",tooltips:function(a){return a.getColumn().getField()+" - "+a.getValue()}}),this.hot.replaceData([]),this.hot.redraw(!0)}AddStringToGrid(r){if(r.startsWith("{")&&r.endsWith("}"))try{var a=JSON.parse(r);return void this.objectsForGrid.push(a)}catch(E){}if(r.startsWith("[")&&r.endsWith("]"))try{for(var u=JSON.parse(r),g=0;g<u.length;g++)this.objectsForGrid.push(u[g]);return}catch(E){}this.stringsForGrid.push(r)}AddDataToGrid(r){return"string"==typeof r?(this.AddStringToGrid(null==r?void 0:r.toString()),void this.dataObject.push([null==r?void 0:r.toString()])):"object"==typeof r?(console.log("adding object to grid"),this.AddStringToGrid(JSON.stringify(r)),void this.dataObject.push([r])):(this.dataObject.push([r.ToString()]),void this.AddStringToGrid(r.toString()))}ClearDataGrid(){this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(r,a){return null!=r&&r.hasOwnProperty(a)}AddObjectToFinishGrid(){for(var r=[],a=this.objectsForGrid,u=0;u<a.length;u++)"string"==typeof(g=a[u])?r.push("_"):r.push(...Object.keys(g));var E=new Set(r);r=Array.from(E);var w=[...r],M=[];for(u=0;u<a.length;u++){for(var g=a[u],P={Nr:u+1},J=0;J<r.length;J++){var ut=r[J],Dt=this.goodNameForKey(ut);if(g&&this.hasOwnProperty(g,ut)){var Lt=g[ut];P[Dt]="object"==typeof Lt?JSON.stringify(Lt):Lt}else P[Dt]="string"==typeof g&&0===J?g:""}M.push(P)}r.splice(0,0,"Nr"),w.splice(0,0,"Nr");var Qt=this.Headers(w);this.hot.setColumns(Qt),this.hot.replaceData(M)}Headers(r){return r.map(a=>({title:a,field:this.goodNameForKey(a),formatter:function(u,g,E){try{var w=u.getValue().toString();if(w.length<2)return w;if(w.startsWith("[")&&w.endsWith("]"))try{var M=JSON.parse(w),P=u.getRow().getData().Nr,ut=u.getColumn().getField()+"_"+P;return E(function(){new Pl("#"+ut,{data:M,autoColumns:!0,layout:"fitDataFill"})}),"<div id='"+ut+"'>"+w+"</div>"}catch(Dt){return w}}catch(Dt){return w}return u.getValue()}}))}AddStringToFinishGrid(){for(var r=[],a=0;a<this.stringsForGrid.length;a++)r.push({Nr:a+1,Text:this.stringsForGrid[a]});var g=this.Headers(["Nr","Text"]);this.hot.setColumns(g),this.hot.replaceData(r)}FinishGrid(){this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),this.hot.redraw(!0))}goodNameForKey(r){var a=r;return a.replace(".","_")}copyClip(){this.hot.copyToClipboard()}copyCSV(){this.hot.download("csv","data.csv",{bom:!0})}}return _.\u0275fac=function(r){return new(r||_)},_.\u0275prov=zt.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();var Fh=m(76186),uf=m(16335),mp=m(26696),hf=m(68260),Dd=m(57261),_p=m(69808),Bh=m(43954),Id=m(47423),vp=m(25245),nh=m(92181),Bc=m(81125),bp=m(20773),fl=m(8704),gu=m(93075);function df(_,l){1&_&&zt._UZ(0,"mat-spinner")}function yp(_,l){if(1&_){const r=zt.EpF();zt.TgZ(0,"button",19),zt.NdJ("click",function(){const g=zt.CHM(r).$implicit;return zt.oxw(2).ShowDemo(g.id)}),zt._uU(1),zt.qZA()}if(2&_){const r=l.$implicit,a=l.index;zt.xp6(1),zt.AsE(" ",a+1," ",r.description," ")}}function $f(_,l){if(1&_&&(zt.TgZ(0,"button",10),zt._uU(1),zt.qZA(),zt.TgZ(2,"mat-menu",null,18),zt.YNc(4,yp,2,2,"ng-template",12),zt.qZA()),2&_){const r=l.$implicit,a=l.index,u=zt.MAs(3);zt.Q6J("matMenuTriggerFor",u),zt.xp6(1),zt.lnq(" ",a+1," ",r.key," (",r.value.length,") "),zt.xp6(3),zt.Q6J("ngForOf",r.value)}}function Md(_,l){if(1&_){const r=zt.EpF();zt.TgZ(0,"button",19),zt.NdJ("click",function(){const g=zt.CHM(r).$implicit;return zt.oxw(2).ShowDemo(g.id)}),zt._uU(1),zt.qZA()}if(2&_){const r=l.$implicit,a=l.index;zt.xp6(1),zt.AsE(" ",a+1," ",r.description," ")}}function Ep(_,l){if(1&_&&(zt.TgZ(0,"button",10),zt._uU(1),zt.qZA(),zt.TgZ(2,"mat-menu",null,20),zt.YNc(4,Md,2,2,"ng-template",12),zt.qZA()),2&_){const r=l.$implicit,a=l.index,u=zt.MAs(3);zt.Q6J("matMenuTriggerFor",u),zt.xp6(1),zt.lnq(" ",a+1," ",r.key.toLowerCase()," (",r.value.length,") "),zt.xp6(3),zt.Q6J("ngForOf",r.value)}}const Ad=function(_){return["/","automation","loadexample",_]};function oh(_,l){if(1&_&&(zt.TgZ(0,"a",21),zt._uU(1),zt.qZA()),2&_){const r=zt.oxw();zt.Q6J("routerLink",zt.VKq(2,Ad,r.mustLoadDemoBlock)),zt.xp6(1),zt.hij("Direct link ",r.mustLoadDemoBlock,"")}}function pf(_,l){1&_&&(zt.TgZ(0,"span"),zt._uU(1,"Loading"),zt.qZA())}function Od(_,l){if(1&_){const r=zt.EpF();zt.TgZ(0,"ngx-monaco-editor",23),zt.NdJ("ngModelChange",function(u){return zt.CHM(r),zt.oxw(2).showInner=u}),zt.qZA()}if(2&_){const r=zt.oxw(2);zt.Q6J("options",r.editorPlain)("ngModel",r.showInner)}}function Tp(_,l){if(1&_){const r=zt.EpF();zt.TgZ(0,"ngx-monaco-editor",23),zt.NdJ("ngModelChange",function(u){return zt.CHM(r),zt.oxw(2).showJSCode=u}),zt.qZA()}if(2&_){const r=zt.oxw(2);zt.Q6J("options",r.editorXMLOptions)("ngModel",r.showJSCode)}}function ff(_,l){if(1&_){const r=zt.EpF();zt.TgZ(0,"ngx-monaco-editor",23),zt.NdJ("ngModelChange",function(u){return zt.CHM(r),zt.oxw(2).showXMLCode=u}),zt.qZA()}if(2&_){const r=zt.oxw(2);zt.Q6J("options",r.editorJSOptions)("ngModel",r.showXMLCode)}}function Cp(_,l){if(1&_){const r=zt.EpF();zt.TgZ(0,"ngx-monaco-editor",23),zt.NdJ("ngModelChange",function(u){return zt.CHM(r),zt.oxw(2).showBlocksDefinition=u}),zt.qZA()}if(2&_){const r=zt.oxw(2);zt.Q6J("options",r.editorJSOptions)("ngModel",r.showBlocksDefinition)}}function gf(_,l){if(1&_&&(zt.TgZ(0,"mat-grid-tile"),zt.YNc(1,Od,1,2,"ngx-monaco-editor",22),zt.YNc(2,Tp,1,2,"ngx-monaco-editor",22),zt.YNc(3,ff,1,2,"ngx-monaco-editor",22),zt.YNc(4,Cp,1,2,"ngx-monaco-editor",22),zt.qZA()),2&_){const r=zt.oxw();zt.xp6(1),zt.Q6J("ngIf",r.ShowOutput()),zt.xp6(1),zt.Q6J("ngIf",r.ShowCode()),zt.xp6(1),zt.Q6J("ngIf",r.ShowXML()),zt.xp6(1),zt.Q6J("ngIf",r.ShowBlocksDefinition())}}var ma=(()=>{return(_=ma||(ma={}))[_.ShowNone=0]="ShowNone",_[_.ShowBlocksDefinition=1]="ShowBlocksDefinition",_[_.ShowXML=2]="ShowXML",_[_.ShowOutput=3]="ShowOutput",_[_.ShowCode=4]="ShowCode",_[_.Stop=100]="Stop",ma;var _})();let Zf=(()=>{class _{constructor(r,a,u,g,E,w){this.tabulator=r,this.DetailsApp=a,this.loadDemo=u,this.ar=g,this.ta=E,this.snackBar=w,this.editorXMLOptions={theme:"vs-dark",language:"xml"},this.editorJSOptions={theme:"vs-dark",language:"javascript",lineNumbers:"on"},this.editorPlain={theme:"vs-dark",language:"plaintext",lineNumbers:"on"},this.code='function x() {\nconsole.log("Hello world!");\n}',this.showCodeAndXML=ma.ShowNone,this.swaggerLoaded=0,this.demoWorkspace=null,this.demos=[],this.demosCategories=new Map,this.demosBlocks=new Map,this.mustLoadDemoBlock="",this.intro=O(),this.myId=0,this.fullTextData="",this.fullHtmlData="",this.myChart=null,this.step=0,this.swaggerData=[],this.showInner="",this.showXMLCode="",this.showJSCode="",this.showBlocksDefinition="",this.toolboxXML="",this.loadedCompletely=!1,this.myId=++_.id,this.ar.paramMap.subscribe(M=>{this.mustLoadDemoBlock=M.get("demoblock")}),this.InitiateDemos(),this.ta.receiveData().subscribe(M=>{"DisplayBlocklyComponent"==M[0]&&this[M[1]]()})}InitiateDemos(){var r=this.DetailsApp.demoBlocks;this.demos=r.sort((g,E)=>g.description.localeCompare(E.description));var a=r.map(g=>g.categories).filter(g=>(null==g?void 0:g.length)>0).flatMap(g=>g.split(";")).filter(g=>(null==g?void 0:g.length)>0);this.demosCategories.set("All",this.demos),a.forEach(g=>{this.demosCategories.set(g,r.filter(E=>{var w;return(null===(w=E.categories)||void 0===w?void 0:w.length)>0}).filter(E=>(";"+E.categories+";").indexOf(";"+g+";")>-1))}),r.map(g=>g.blocks).filter(g=>(null==g?void 0:g.length)>0).flatMap(g=>g.split(";")).filter(g=>(null==g?void 0:g.length)>0).sort((g,E)=>g.toLowerCase().localeCompare(E.toLowerCase())).forEach(g=>{this.demosBlocks.set(g.toLowerCase(),r.filter(E=>{var w;return(null===(w=E.blocks)||void 0===w?void 0:w.length)>0}).filter(E=>(";"+E.blocks+";").indexOf(";"+g+";")>-1))})}createIntro(){var r,a=null===(r=this.DetailsApp.settings)||void 0===r?void 0:r.tourSteps.map(u=>{var g;return{title:(null===(g=this.DetailsApp.settings)||void 0===g?void 0:g.title)||"Blockly Automation",intro:u.text,element:document.querySelector(u.query)||void 0}});this.intro.setOptions({exitOnEsc:!0,showStepNumbers:!0,showButtons:!0,doneLabel:"Exit",skipLabel:"Skip",showProgress:!0,steps:a}).start()}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid(),null!=this.myChart&&this.myChart.destroy();var r=this.theHtmlOutput();r.innerHTML="",this.fullHtmlData="",(r=this.theTextOutput()).innerText="",this.fullTextData=""}ShowText(r){if(null!=r){var a=r.toString();this.fullTextData+=a,this.theTextOutput().innerText=this.fullTextData}}finishHTMLOutput(){this.theHtmlOutput().innerHTML=this.fullHtmlData}ShowHTML(r){if(null!=r){var a=r.toString();this.fullHtmlData+=a,this.theHtmlOutput().innerHTML+=a}}theHtmlOutput(){return document.getElementById("htmlOutput"+this.myId)}theTextOutput(){return document.getElementById("htmlText"+this.myId)}ShowChart(r){var a,u=null===(a=document.getElementById("barchart"+this.myId))||void 0===a?void 0:a.getContext("2d");if(null!=u)try{var g=null==r?void 0:r.toString(),E=JSON.parse(g);E&&E.type&&(this.myChart=new Oi(u,E),console.log("make chart",r))}catch(w){this.myChart=null}else console.log("not canvas available for chart!")}RunCode(){this.snackBar.open("Program start","Executing...");var r=this,a=this.run.latestCode,u=this.showJSCode;r.CalculateXMLAndCode(),this.run=v.interpreterHelper.createInterpreter(this.demoWorkspace,e),this.clearOutput(),this.showCodeAndXML=ma.ShowOutput,this.showInner='{ "step_start": "start program",',a!=u&&(window.confirm("Do you want to run the code modified by you ?")&&(a=u),this.showJSCode=u),this.run.runCode((E,w)=>{try{return new Interpreter(E,w)}catch(M){r.CalculateXMLAndCode(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(M)),this.showCodeAndXML=ma.ShowCode}},E=>{r.step++,r.showInner+=`\n           \n"step_${r.step}" : "${E}",`,r.tabulator.AddDataToGrid(E),r.ShowChart(E),r.ShowHTML(E),r.ShowText(E)},()=>{this.snackBar.open("Program end","Done!",{duration:3e3}),r.showInner+='\n "step_end" : "program executed; see results below"\n}',this.tabulator.FinishGrid(),this.finishHTMLOutput()},a)}ShowDemo(r){this.mustLoadDemoBlock=r,this.loadDemo.getDemoBlock(r).subscribe(a=>{var u=p.Xml.textToDom(a);null!=this.demoWorkspace&&(p.Xml.clearWorkspaceAndLoadFromXml(u,this.demoWorkspace),window.alert("please press execute button"))})}registerSwaggerBlocksObjects(r,a){return a.fieldXMLObjects.map(g=>p.Xml.textToDom(g))}registerSwaggerBlocksAPIControllers(r,a,u){return a.findfieldXMLFunctions(u).map(E=>p.Xml.textToDom(E.gui))}registerSwaggerBlocksAPIAll(r,a){return a.fieldXMLFunctions.map(g=>p.Xml.textToDom(g.gui))}ngOnInit(){}ngAfterViewInit(){this.StartRegister(),(0,Ki.R)(window,"TabDownload").subscribe(r=>this.tabulator.copyCSV()),(0,Ki.R)(window,"TabCopy").subscribe(r=>this.tabulator.copyClip())}LoadSwagger(){var r=this;new R.parseData("").showWindowToLoad("",u=>{if(u){if(u.endsWith(".html")||u.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");r.loadedCompletely=!1,r.LoadSwaggerFromUrl(u).then(g=>{r.loadedCompletely=!0,this.addToToolboxSwagger(g,this),window.alert("done")})}})}LoadSwaggerFromUrl(r,a){var u=this;return(0,y.Z)(function*(){var g=new R.parseData(r),E=yield g.ParseSwagger();return E.name=a||r,u.LoadSwaggerFromAPI(E)})()}LoadSwaggerFromAPI(r){this.swaggerData.push(r);for(var a=0;a<r.GenerateBlocks.length;a++)(0,r.GenerateBlocks[a])(p.Blocks,e);for(a=0;a<r.GenerateFunctions.length;a++)(0,r.GenerateFunctions[a])(p.Blocks,e);return r.metaBlocks()(p.Blocks,e),r}StartRegister(){var r=this;return(0,y.Z)(function*(){var a=r.DetailsApp.swaggersDict,u=new Map;a.forEach((P,J)=>{u.set(J,r.LoadSwaggerFromAPI(P))});var g=[...Array(50).keys()].map(P=>r.CategorySwaggerHidden(P)).join("");const E=document.getElementById("steps"+r.myId);if(null!=E){r.tabulator.initGrid(E),c.filterBlocks.definitionBlocks(p.Blocks,e),c.waitBlocks.definitionBlocks(p.defineBlocksWithJsonArray,e),c.xhrBlocks.definitionBlocks(p.Blocks,e),c.propBlocks.definitionBlocks(p.Blocks,e),c.guiBlocks.definitionBlocks(p.Blocks,e),c.convertersBlocks.definitionBlocks(p.Blocks,e),c.exportFileBlock.definitionBlocks(p.Blocks,e),c.createObjectBlocks.definitionBlocks(p.Blocks,e,p.Extensions,p.Mutator),c.currentDateBlock.definitionBlocks(p.Blocks,e),c.dateFromTextBlock.definitionBlocks(p.Blocks,e),c.waitBlocks.definitionBlocks(p.Blocks,e),c.commentBlock.definitionBlocks(p.Blocks,e),c.trycatchFinBlock.definitionBlocks(p.Blocks,e),c.auth0Blocks.definitionBlocks(p.Blocks,e),c.windowsCreds.definitionBlocks(p.Blocks,e),c.chartBlock.definitionBlocks(p.Blocks,e),c.emailBlocks.definitionBlocks(p.Blocks,e),c.htmlblocks.definitionBlocks(p.Blocks,e),c.ttsBlock.definitionBlocks(p.Blocks,e),c.pianoBlock.definitionBlocks(p.Blocks,e);var w=r.DetailsApp.customCategories,M=[c.defaultBlocks.generalBlocks(),` \n        <category name='Blockly Advanced'>\n        <category id="Audio" name="Audio">\n        ${c.ttsBlock.fieldXML()}\n        ${c.pianoBlock.fieldXML()}\n        </category>  \n            ${c.filterBlocks.fieldXML()}\n                \n                ${c.auth0Blocks.fieldXML()}\n                <category id="catConverters"  name="Converters">\n                ${c.convertersBlocks.fieldXML()}\n              </category>    \n              <category id="catDates"  name="Dates">\n          ${c.currentDateBlock.fieldXML()}\n          ${c.dateFromTextBlock.fieldXML()}\n          ${c.waitBlocks.fieldXML()}\n        </category>\n        <category id="catEmail"  name="Email">\n        ${c.emailBlocks.fieldXML()}\n      </category>\n\n        <category id="catExporter"  name="Exporter">\n        ${c.exportFileBlock.fieldXML()}\n      </category>\n              <category id="catGUI" name="GUI">\n              ${c.guiBlocks.fieldXML()}\n              ${c.chartBlock.fieldXML()}\n              </category>\n              <category id="catHTML" name="HTML">\n              ${c.htmlblocks.fieldXML()}\n              </category>\n              <category name="Objects" id="objects">\n              ${c.propBlocks.fieldXML()}\n              ${c.createObjectBlocks.fieldXML()}\n              </category>\n              <category id="XHR" name="Request">\n            ${c.xhrBlocks.fieldXML()}\n            ${c.windowsCreds.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${c.waitBlocks.fieldXML()}\n        </category>`,`  <category id="programming" name="Programming">\n        ${c.trycatchFinBlock.fieldXML()}\n        ${c.commentBlock.fieldXML()}\n          </category>\n        \n      `,`</category>\n      ${w}\n      <category name="Swagger" id="catSwagger" expanded='true' >          \n          ${g}\n        </category> \n        \n        `];r.initialize(M)}else window.alert("gridElement is null")})()}SaveBlocks(){v.saveBlocksUrl.saveState(p.Xml,this.demoWorkspace,this.myId)}ShowBlocksDefinition(){return this.showCodeAndXML===ma.ShowBlocksDefinition}ShowSelection(){return ma[this.showCodeAndXML]}ShowSomething(){return this.showCodeAndXML!==ma.ShowNone}ShowOutput(){return this.showCodeAndXML===ma.ShowOutput}ShowCode(){return this.showCodeAndXML===ma.ShowCode}ShowXML(){return this.showCodeAndXML===ma.ShowXML}CalculateXMLAndCode(){var r=p.Xml.workspaceToDom(this.demoWorkspace,!0),a=p.Xml.domToPrettyText(r);this.showJSCode=this.run.latestCode,this.showXMLCode=a;var u=this.parseTextForBlocks(a);this.showBlocksDefinition=u.map(g=>{try{return`Blockly.Blocks['${g}']={ init: \n`+p.Blocks[g].init.toString()+`};\n};\nBlockly.JavaScript['${g}']=`+e[g].toString()+";"}catch(M){return console.error("parse definition : "+g,M),"//Error for "+g}}).join("\n")}parseTextForBlocks(r){var a=[];if(r.indexOf('<block type="')>=0)for(var u=r.split('<block type="'),g=1;g<u.length;g++){var E=u[g].split('"')[0];a.push(E)}return a}ShowInnerWorkings(){null!=this.demoWorkspace?(this.showCodeAndXML++,this.ShowSelection()||(this.showCodeAndXML=ma.ShowNone,setTimeout(a=>{p.svgResize(a)},1e3,this.demoWorkspace)),this.CalculateXMLAndCode()):window.alert("demoWorkspace is null")}Download(){var r=window.prompt("Name?","blocks.txt");null!=r&&v.saveLoad.DownloadBlocks(p.Xml,this.demoWorkspace,r)}changeListener(r){this.readThis(r.target)}readThis(r){var a=r.files[0],u=new FileReader,g=this;u.onloadend=function(E){v.saveLoad.LoadFile(p.Xml,g.demoWorkspace,u.result),g.run.resetInterpreter()},u.readAsText(a)}CategorySwaggerHidden(r){return`<category name='swagger_hidden_${r}' hidden='true' >${r}</category>`}initialize(r){var a,u,g;const E=document.getElementById("blocklyDiv"+this.myId);if(null!=E){var w=r.map(Dt=>`<sep></sep>${Dt}`);this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">\n    ${w}\n    </xml>`,this.demoWorkspace=p.inject(E,{readOnly:!1,media:"media/",trashcan:!0,horizontalLayout:!1,move:{scrollbars:!0,drag:!0,wheel:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},toolbox:this.toolboxXML}),new s(this.demoWorkspace).init();var P=this;if(((null===(u=null===(a=this.DetailsApp.settings)||void 0===a?void 0:a.startBlocks)||void 0===u?void 0:u.length)||0)>0)try{var J=((null===(g=this.DetailsApp.settings)||void 0===g?void 0:g.startBlocks)||[]).join("\n"),ut=p.Xml.textToDom(J);p.Xml.clearWorkspaceAndLoadFromXml(ut,this.demoWorkspace)}catch(Dt){console.error("error when load default blocks",Dt)}window.setTimeout(P.afterTimeout,2e3,this),this.run=v.interpreterHelper.createInterpreter(this.demoWorkspace,e),P=this,this.demoWorkspace.addChangeListener(function(Dt){Dt.isUiEvent||(P.run.resetInterpreter(),P.run.generateCodeAndLoadIntoInterpreter(),P.CalculateXMLAndCode())})}else window.alert("blocklyDiv is null")}restoreBlocks(){v.saveBlocksUrl.restoreState(p.Xml,this.demoWorkspace,this.myId)}addToToolboxSwagger(r,a){var u,g=r.findCategSwaggerFromPaths().sort().map(Lt=>`<category name='${Lt}' custom='func_${r.name}_${Lt}'></category>`).join("\n"),E=(null==a?void 0:a.CategorySwaggerHidden(null==a?void 0:a.swaggerLoaded))||"",w=a.toolboxXML,M=`<category name='${r.name}'>\n<category name='API' id='func_${r.name}'>\n${g}\n</category>\n${r.categSwagger()}\n\n<category name='meta' id='meta_${r.name}'>\n<block type='meta_swagger_controllers_${r.name}'></block>\n<block type='meta_swagger_controllers_actions_${r.name}'></block>\n</category>\n\n</category>\n`;if(w=w.replace(E,M),a.swaggerLoaded++,a.toolboxXML=w,null===(u=null==a?void 0:a.demoWorkspace)||void 0===u||u.updateToolbox(w),null!=(null==a?void 0:a.demoWorkspace)){var J="objects_"+r.nameCategSwagger(),ut="AllApi_"+r.nameCategSwagger(),Dt=r;a.demoWorkspace.registerToolboxCategoryCallback(J,Lt=>a.registerSwaggerBlocksObjects(Lt,Dt)),a.demoWorkspace.registerToolboxCategoryCallback(ut,Lt=>a.registerSwaggerBlocksAPIAll(Lt,Dt)),r.findCategSwaggerFromPaths().forEach(Lt=>{var Qt;null===(Qt=null==a?void 0:a.demoWorkspace)||void 0===Qt||Qt.registerToolboxCategoryCallback(`func_${r.name}_${Lt}`,de=>a.registerSwaggerBlocksAPIControllers(de,r,Lt))})}}afterTimeout(r){var a,u,g;if(r.loadedCompletely=!0,null!=(null==r?void 0:r.swaggerData))if(r.toolboxXML=r.toolboxXML.replace("Swagger",`Swagger(${r.swaggerData.length})`),r.swaggerData.forEach(P=>{r.addToToolboxSwagger(P,r)}),null!=(null==r?void 0:r.mustLoadDemoBlock))r.ShowDemo(null==r?void 0:r.mustLoadDemoBlock);else{if(((null===(u=null===(a=r.DetailsApp.settings)||void 0===a?void 0:a.startBlocks)||void 0===u?void 0:u.length)||0)>0)try{var w=((null===(g=r.DetailsApp.settings)||void 0===g?void 0:g.startBlocks)||[]).join("\n");if((null==w?void 0:w.length)>62){var M=p.Xml.textToDom(w);p.Xml.clearWorkspaceAndLoadFromXml(M,r.demoWorkspace)}}catch(P){console.log("error when load default blocks",P)}r.restoreBlocks()}}}return _.id=0,_.\u0275fac=function(r){return new(r||_)(zt.Y36(fu),zt.Y36(Fh.d),zt.Y36(uf.F),zt.Y36(mp.gz),zt.Y36(hf.v),zt.Y36(Dd.ux))},_.\u0275cmp=zt.Xpm({type:_,selectors:[["app-display-blockly"]],decls:84,vars:21,consts:[[4,"ngIf"],["rowHeight","1:1",3,"cols"],[2,"display","inline-block","height","100%","width","100%"],[2,"display","inline-block","height","5%","width","100%"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn","id","runButton",3,"click"],["id","downloadBlocks","mat-raised-button","","color","primary",3,"click"],["type","file",3,"change"],["mat-raised-button","","id","demos","color","accent",3,"matMenuTriggerFor"],["menuDiff","matMenu"],["mat-menu-item","",3,"matMenuTriggerFor"],["menuByName","matMenu"],["ngFor","",3,"ngForOf"],["menuByBlocks","matMenu"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"id"],[3,"id"],["width","800","height","450",3,"id"],["menu","matMenu"],["mat-menu-item","",3,"click"],["menuBlock","matMenu"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"],["style","display: inline-block; height: 100%; width: 100%",3,"options","ngModel","ngModelChange",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"options","ngModel","ngModelChange"]],template:function(r,a){if(1&r&&(zt.YNc(0,df,1,0,"mat-spinner",0),zt.TgZ(1,"mat-grid-list",1),zt.TgZ(2,"mat-grid-tile-header"),zt.TgZ(3,"div",2),zt.TgZ(4,"div",3),zt.TgZ(5,"button",4),zt.NdJ("click",function(){return a.LoadSwagger()}),zt.TgZ(6,"mat-icon"),zt._uU(7,"file_upload"),zt.qZA(),zt._uU(8," Load Swagger/OpenAPI "),zt.qZA(),zt._uU(9," \xa0 "),zt.TgZ(10,"button",4),zt.NdJ("click",function(){return a.SaveBlocks()}),zt.TgZ(11,"mat-icon"),zt._uU(12,"save"),zt.qZA(),zt._uU(13," Persist in browser "),zt.qZA(),zt._uU(14," \xa0 "),zt.TgZ(15,"button",5),zt.NdJ("click",function(){return a.RunCode()}),zt.TgZ(16,"mat-icon"),zt._uU(17,"play_arrow"),zt.qZA(),zt._uU(18," Execute "),zt.qZA(),zt._uU(19," \xa0 "),zt.TgZ(20,"button",6),zt.NdJ("click",function(){return a.Download()}),zt.TgZ(21,"mat-icon"),zt._uU(22,"download"),zt.qZA(),zt._uU(23," Download blocks "),zt.qZA(),zt._uU(24," \xa0 "),zt.TgZ(25,"input",7),zt.NdJ("change",function(g){return a.changeListener(g)}),zt.qZA(),zt.TgZ(26,"button",4),zt.NdJ("click",function(){return a.ShowInnerWorkings()}),zt.TgZ(27,"mat-icon"),zt._uU(28,"code"),zt.qZA(),zt._uU(29),zt.qZA(),zt.TgZ(30,"button",8),zt.TgZ(31,"mat-icon"),zt._uU(32,"list"),zt.qZA(),zt._uU(33),zt.qZA(),zt.TgZ(34,"mat-menu",null,9),zt.TgZ(36,"button",10),zt._uU(37," By Name "),zt.qZA(),zt.TgZ(38,"mat-menu",null,11),zt.YNc(40,$f,5,5,"ng-template",12),zt.ALo(41,"keyvalue"),zt.qZA(),zt.TgZ(42,"button",10),zt._uU(43," By Blocks "),zt.qZA(),zt.TgZ(44,"mat-menu",null,13),zt.YNc(46,Ep,5,5,"ng-template",12),zt.ALo(47,"keyvalue"),zt.qZA(),zt.qZA(),zt.YNc(48,oh,2,4,"a",14),zt.YNc(49,pf,2,0,"span",0),zt.qZA(),zt.qZA(),zt.qZA(),zt.TgZ(50,"mat-grid-tile"),zt._UZ(51,"div",15),zt.qZA(),zt.YNc(52,gf,5,4,"mat-grid-tile",0),zt.qZA(),zt.TgZ(53,"mat-accordion"),zt.TgZ(54,"mat-expansion-panel"),zt.TgZ(55,"mat-expansion-panel-header"),zt.TgZ(56,"mat-panel-title"),zt._uU(57," Output Grid "),zt.qZA(),zt.TgZ(58,"mat-panel-description"),zt._uU(59," Click to see grid of output values "),zt.qZA(),zt.qZA(),zt._uU(60," My Text "),zt._UZ(61,"div",16),zt.qZA(),zt.TgZ(62,"mat-expansion-panel"),zt.TgZ(63,"mat-expansion-panel-header"),zt.TgZ(64,"mat-panel-title"),zt._uU(65," Chart "),zt.qZA(),zt.TgZ(66,"mat-panel-description"),zt._uU(67," Click to see chart of output values "),zt.qZA(),zt.qZA(),zt.TgZ(68,"p"),zt._UZ(69,"canvas",17),zt.qZA(),zt.qZA(),zt.TgZ(70,"mat-expansion-panel"),zt.TgZ(71,"mat-expansion-panel-header"),zt.TgZ(72,"mat-panel-title"),zt._uU(73," HTML "),zt.qZA(),zt.TgZ(74,"mat-panel-description"),zt._uU(75," Click to see output as HTML "),zt.qZA(),zt.qZA(),zt._UZ(76,"div",16),zt.qZA(),zt.TgZ(77,"mat-expansion-panel"),zt.TgZ(78,"mat-expansion-panel-header"),zt.TgZ(79,"mat-panel-title"),zt._uU(80," Text "),zt.qZA(),zt.TgZ(81,"mat-panel-description"),zt._uU(82," Click to see output as Text "),zt.qZA(),zt.qZA(),zt._UZ(83,"div",16),zt.qZA(),zt.qZA()),2&r){const u=zt.MAs(35),g=zt.MAs(39),E=zt.MAs(45);zt.Q6J("ngIf",!a.loadedCompletely),zt.xp6(1),zt.Q6J("cols",a.ShowSomething()?2:1),zt.xp6(28),zt.hij(" ",a.ShowSelection()," "),zt.xp6(1),zt.Q6J("matMenuTriggerFor",u),zt.xp6(3),zt.hij(" Demos (",a.demos.length,") "),zt.xp6(3),zt.Q6J("matMenuTriggerFor",g),zt.xp6(4),zt.Q6J("ngForOf",zt.lcZ(41,17,a.demosCategories)),zt.xp6(2),zt.Q6J("matMenuTriggerFor",E),zt.xp6(4),zt.Q6J("ngForOf",zt.lcZ(47,19,a.demosBlocks)),zt.xp6(2),zt.Q6J("ngIf",null==a.mustLoadDemoBlock?null:a.mustLoadDemoBlock.length),zt.xp6(1),zt.Q6J("ngIf",null==a.demoWorkspace),zt.xp6(2),zt.Q6J("id","blocklyDiv"+a.myId),zt.xp6(1),zt.Q6J("ngIf",a.ShowSomething()),zt.xp6(9),zt.Q6J("id","steps"+a.myId),zt.xp6(8),zt.Q6J("id","barchart"+a.myId),zt.xp6(7),zt.Q6J("id","htmlOutput"+a.myId),zt.xp6(7),zt.Q6J("id","htmlText"+a.myId)}},directives:[_p.O5,Bh.Il,Bh.$H,Bh.jo,Id.lW,vp.Hw,nh.p6,nh.VK,nh.OP,_p.sg,Bh.DX,Bc.pp,Bc.ib,Bc.yz,Bc.yK,Bc.u4,bp.$g,Id.zs,mp.yS,fl.PG,gu.JJ,gu.On],pipes:[_p.Nd],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:400;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),_})()},16335:(L,W,m)=>{"use strict";m.d(W,{F:()=>o}),m(39646);var p=m(54004),e=m(18505),t=m(5e3),n=m(40520);let o=(()=>{class s{constructor(v){this.http=v}getDemoBlocks(){var v=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/all.txt?${v}`,{responseType:"text"}).pipe((0,p.U)(R=>JSON.parse(R)))}getCustomCategories(){var v=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/customCategories.txt?${v}`,{responseType:"text"}).pipe((0,p.U)(R=>R.toString()))}getSwaggerLinks(){var v=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/swaggers.json?${v}`,{responseType:"text"}).pipe((0,p.U)(R=>JSON.parse(R)))}getDemoBlock(v){var R=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/${v}.txt?${R}`,{responseType:"text"}).pipe((0,e.b)(H=>{}),(0,p.U)(H=>H.toString()))}}return s.\u0275fac=function(v){return new(v||s)(t.LFG(n.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},8431:(L,W,m)=>{"use strict";var y=m(22313),p=m(5e3),e=m(93075),t=m(26696),n=m(15861),o=m(47423),s=m(25245),c=m(15664),v=m(17144),R=m(99129),O=m(69808),H=m(90508),V=m(76360),G=m(77579),Z=m(50727),vt=m(54968),it=m(39646),ot=m(56451),wt=m(5963),ct=m(41777),yt=m(68675),lt=m(71884),at=m(82722),bt=m(50226),tt=m(63191),Rt=m(91159),mt=m(70925),dt=m(30495);function nt(D,k){1&D&&p.Hsn(0)}const st=["*"];function Gt(D,k){}const It=function(D){return{animationDuration:D}},Vt=function(D,k){return{value:D,params:k}},Ie=["tabListContainer"],Ze=["tabList"],me=["tabListInner"],Be=["nextPaginator"],Ge=["previousPaginator"],si=["tabBodyWrapper"],Qe=["tabHeader"];function Ne(D,k){}function pe(D,k){if(1&D&&p.YNc(0,Ne,0,0,"ng-template",9),2&D){const f=p.oxw().$implicit;p.Q6J("cdkPortalOutlet",f.templateLabel)}}function we(D,k){if(1&D&&p._uU(0),2&D){const f=p.oxw().$implicit;p.Oqu(f.textLabel)}}function Ve(D,k){if(1&D){const f=p.EpF();p.TgZ(0,"div",6),p.NdJ("click",function(){const B=p.CHM(f),rt=B.$implicit,ee=B.index,Ye=p.oxw(),di=p.MAs(1);return Ye._handleClick(rt,di,ee)})("cdkFocusChange",function(B){const ee=p.CHM(f).index;return p.oxw()._tabFocusChanged(B,ee)}),p.TgZ(1,"div",7),p.YNc(2,pe,1,1,"ng-template",8),p.YNc(3,we,1,1,"ng-template",8),p.qZA(),p.qZA()}if(2&D){const f=k.$implicit,S=k.index,B=p.oxw();p.ekj("mat-tab-label-active",B.selectedIndex==S),p.Q6J("id",B._getTabLabelId(S))("disabled",f.disabled)("matRippleDisabled",f.disabled||B.disableRipple),p.uIk("tabIndex",B._getTabIndex(f,S))("aria-posinset",S+1)("aria-setsize",B._tabs.length)("aria-controls",B._getTabContentId(S))("aria-selected",B.selectedIndex==S)("aria-label",f.ariaLabel||null)("aria-labelledby",!f.ariaLabel&&f.ariaLabelledby?f.ariaLabelledby:null),p.xp6(2),p.Q6J("ngIf",f.templateLabel),p.xp6(1),p.Q6J("ngIf",!f.templateLabel)}}function ui(D,k){if(1&D){const f=p.EpF();p.TgZ(0,"mat-tab-body",10),p.NdJ("_onCentered",function(){return p.CHM(f),p.oxw()._removeTabBodyWrapperHeight()})("_onCentering",function(B){return p.CHM(f),p.oxw()._setTabBodyWrapperHeight(B)}),p.qZA()}if(2&D){const f=k.$implicit,S=k.index,B=p.oxw();p.ekj("mat-tab-body-active",B.selectedIndex===S),p.Q6J("id",B._getTabContentId(S))("content",f.content)("position",f.position)("origin",f.origin)("animationDuration",B.animationDuration),p.uIk("tabindex",null!=B.contentTabIndex&&B.selectedIndex===S?B.contentTabIndex:null)("aria-labelledby",B._getTabLabelId(S))}}const be=new p.OlP("MatInkBarPositioner",{providedIn:"root",factory:function(){return k=>({left:k?(k.offsetLeft||0)+"px":"0",width:k?(k.offsetWidth||0)+"px":"0"})}});let re=(()=>{class D{constructor(f,S,B,rt){this._elementRef=f,this._ngZone=S,this._inkBarPositioner=B,this._animationMode=rt}alignToElement(f){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(f))}):this._setStyles(f)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(f){const S=this._inkBarPositioner(f),B=this._elementRef.nativeElement;B.style.left=S.left,B.style.width=S.width}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.SBq),p.Y36(p.R0b),p.Y36(be),p.Y36(V.Qb,8))},D.\u0275dir=p.lG2({type:D,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(f,S){2&f&&p.ekj("_mat-animation-noopable","NoopAnimations"===S._animationMode)}}),D})();const Me=new p.OlP("MatTabContent"),ie=new p.OlP("MatTabLabel"),Ut=new p.OlP("MAT_TAB");let Ht=(()=>{class D extends R.ig{constructor(f,S,B){super(f,S),this._closestTab=B}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.Rgc),p.Y36(p.s_b),p.Y36(Ut,8))},D.\u0275dir=p.lG2({type:D,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[p._Bn([{provide:ie,useExisting:D}]),p.qOj]}),D})();const Zt=(0,H.Id)(class{}),Yt=new p.OlP("MAT_TAB_GROUP");let ue=(()=>{class D extends Zt{constructor(f,S){super(),this._viewContainerRef=f,this._closestTabGroup=S,this.textLabel="",this._contentPortal=null,this._stateChanges=new G.x,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(f){this._setTemplateLabelInput(f)}get content(){return this._contentPortal}ngOnChanges(f){(f.hasOwnProperty("textLabel")||f.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new R.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(f){f&&f._closestTab===this&&(this._templateLabel=f)}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.s_b),p.Y36(Yt,8))},D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-tab"]],contentQueries:function(f,S,B){if(1&f&&(p.Suo(B,ie,5),p.Suo(B,Me,7,p.Rgc)),2&f){let rt;p.iGM(rt=p.CRH())&&(S.templateLabel=rt.first),p.iGM(rt=p.CRH())&&(S._explicitContent=rt.first)}},viewQuery:function(f,S){if(1&f&&p.Gf(p.Rgc,7),2&f){let B;p.iGM(B=p.CRH())&&(S._implicitContent=B.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[p._Bn([{provide:Ut,useExisting:D}]),p.qOj,p.TTD],ngContentSelectors:st,decls:1,vars:0,template:function(f,S){1&f&&(p.F$t(),p.YNc(0,nt,1,0,"ng-template"))},encapsulation:2}),D})();const le={translateTab:(0,ct.X$)("translateTab",[(0,ct.SB)("center, void, left-origin-center, right-origin-center",(0,ct.oB)({transform:"none"})),(0,ct.SB)("left",(0,ct.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),(0,ct.SB)("right",(0,ct.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),(0,ct.eR)("* => left, * => right, left => center, right => center",(0,ct.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,ct.eR)("void => left-origin-center",[(0,ct.oB)({transform:"translate3d(-100%, 0, 0)"}),(0,ct.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,ct.eR)("void => right-origin-center",[(0,ct.oB)({transform:"translate3d(100%, 0, 0)"}),(0,ct.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let Mt=(()=>{class D extends R.Pl{constructor(f,S,B,rt){super(f,S,rt),this._host=B,this._centeringSub=Z.w0.EMPTY,this._leavingSub=Z.w0.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,yt.O)(this._host._isCenterPosition(this._host._position))).subscribe(f=>{f&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p._Vd),p.Y36(p.s_b),p.Y36((0,p.Gpc)(()=>ke)),p.Y36(O.K0))},D.\u0275dir=p.lG2({type:D,selectors:[["","matTabBodyHost",""]],features:[p.qOj]}),D})(),Nt=(()=>{class D{constructor(f,S,B){this._elementRef=f,this._dir=S,this._dirChangeSubscription=Z.w0.EMPTY,this._translateTabComplete=new G.x,this._onCentering=new p.vpe,this._beforeCentering=new p.vpe,this._afterLeavingCenter=new p.vpe,this._onCentered=new p.vpe(!0),this.animationDuration="500ms",S&&(this._dirChangeSubscription=S.change.subscribe(rt=>{this._computePositionAnimationState(rt),B.markForCheck()})),this._translateTabComplete.pipe((0,lt.x)((rt,ee)=>rt.fromState===ee.fromState&&rt.toState===ee.toState)).subscribe(rt=>{this._isCenterPosition(rt.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(rt.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(f){this._positionIndex=f,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(f){const S=this._isCenterPosition(f.toState);this._beforeCentering.emit(S),S&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(f){return"center"==f||"left-origin-center"==f||"right-origin-center"==f}_computePositionAnimationState(f=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==f?"left":"right":this._positionIndex>0?"ltr"==f?"right":"left":"center"}_computePositionFromOrigin(f){const S=this._getLayoutDirection();return"ltr"==S&&f<=0||"rtl"==S&&f>0?"left-origin-center":"right-origin-center"}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.SBq),p.Y36(bt.Is,8),p.Y36(p.sBO))},D.\u0275dir=p.lG2({type:D,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),D})(),ke=(()=>{class D extends Nt{constructor(f,S,B){super(f,S,B)}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.SBq),p.Y36(bt.Is,8),p.Y36(p.sBO))},D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-tab-body"]],viewQuery:function(f,S){if(1&f&&p.Gf(R.Pl,5),2&f){let B;p.iGM(B=p.CRH())&&(S._portalHost=B.first)}},hostAttrs:[1,"mat-tab-body"],features:[p.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(f,S){1&f&&(p.TgZ(0,"div",0,1),p.NdJ("@translateTab.start",function(rt){return S._onTranslateTabStarted(rt)})("@translateTab.done",function(rt){return S._translateTabComplete.next(rt)}),p.YNc(2,Gt,0,0,"ng-template",2),p.qZA()),2&f&&p.Q6J("@translateTab",p.WLB(3,Vt,S._position,p.VKq(1,It,S.animationDuration)))},directives:[Mt],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[le.translateTab]}}),D})();const je=new p.OlP("MAT_TABS_CONFIG"),li=(0,H.Id)(class{});let ri=(()=>{class D extends li{constructor(f){super(),this.elementRef=f}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.SBq))},D.\u0275dir=p.lG2({type:D,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(f,S){2&f&&(p.uIk("aria-disabled",!!S.disabled),p.ekj("mat-tab-disabled",S.disabled))},inputs:{disabled:"disabled"},features:[p.qOj]}),D})();const mi=(0,mt.i$)({passive:!0});let yi=(()=>{class D{constructor(f,S,B,rt,ee,Ye,di){this._elementRef=f,this._changeDetectorRef=S,this._viewportRuler=B,this._dir=rt,this._ngZone=ee,this._platform=Ye,this._animationMode=di,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new G.x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new G.x,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new p.vpe,this.indexFocused=new p.vpe,ee.runOutsideAngular(()=>{(0,vt.R)(f.nativeElement,"mouseleave").pipe((0,at.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(f){f=(0,tt.su)(f),this._selectedIndex!=f&&(this._selectedIndexChanged=!0,this._selectedIndex=f,this._keyManager&&this._keyManager.updateActiveItem(f))}ngAfterViewInit(){(0,vt.R)(this._previousPaginator.nativeElement,"touchstart",mi).pipe((0,at.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,vt.R)(this._nextPaginator.nativeElement,"touchstart",mi).pipe((0,at.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const f=this._dir?this._dir.change:(0,it.of)("ltr"),S=this._viewportRuler.change(150),B=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new c.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(B):B(),(0,ot.T)(f,S,this._items.changes).pipe((0,at.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>Promise.resolve().then(B)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe((0,at.R)(this._destroyed)).subscribe(rt=>{this.indexFocused.emit(rt),this._setTabFocus(rt)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(f){if(!(0,Rt.Vb)(f))switch(f.keyCode){case Rt.K5:case Rt.L_:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(f));break;default:this._keyManager.onKeydown(f)}}_onContentChanges(){const f=this._elementRef.nativeElement.textContent;f!==this._currentTextContent&&(this._currentTextContent=f||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(f){!this._isValidIndex(f)||this.focusIndex===f||!this._keyManager||this._keyManager.setActiveItem(f)}_isValidIndex(f){if(!this._items)return!0;const S=this._items?this._items.toArray()[f]:null;return!!S&&!S.disabled}_setTabFocus(f){if(this._showPaginationControls&&this._scrollToLabel(f),this._items&&this._items.length){this._items.toArray()[f].focus();const S=this._tabListContainer.nativeElement;S.scrollLeft="ltr"==this._getLayoutDirection()?0:S.scrollWidth-S.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const f=this.scrollDistance,S="ltr"===this._getLayoutDirection()?-f:f;this._tabList.nativeElement.style.transform=`translateX(${Math.round(S)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(f){this._scrollTo(f)}_scrollHeader(f){return this._scrollTo(this._scrollDistance+("before"==f?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(f){this._stopInterval(),this._scrollHeader(f)}_scrollToLabel(f){if(this.disablePagination)return;const S=this._items?this._items.toArray()[f]:null;if(!S)return;const B=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:rt,offsetWidth:ee}=S.elementRef.nativeElement;let Ye,di;"ltr"==this._getLayoutDirection()?(Ye=rt,di=Ye+ee):(di=this._tabListInner.nativeElement.offsetWidth-rt,Ye=di-ee);const en=this.scrollDistance,Li=this.scrollDistance+B;Ye<en?this.scrollDistance-=en-Ye+60:di>Li&&(this.scrollDistance+=di-Li+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const f=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;f||(this.scrollDistance=0),f!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=f}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const f=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,S=f?f.elementRef.nativeElement:null;S?this._inkBar.alignToElement(S):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(f,S){S&&null!=S.button&&0!==S.button||(this._stopInterval(),(0,wt.H)(650,100).pipe((0,at.R)((0,ot.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:B,distance:rt}=this._scrollHeader(f);(0===rt||rt>=B)&&this._stopInterval()}))}_scrollTo(f){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const S=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(S,f)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:S,distance:this._scrollDistance}}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.SBq),p.Y36(p.sBO),p.Y36(dt.rL),p.Y36(bt.Is,8),p.Y36(p.R0b),p.Y36(mt.t4),p.Y36(V.Qb,8))},D.\u0275dir=p.lG2({type:D,inputs:{disablePagination:"disablePagination"}}),D})(),$e=(()=>{class D extends yi{constructor(f,S,B,rt,ee,Ye,di){super(f,S,B,rt,ee,Ye,di),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(f){this._disableRipple=(0,tt.Ig)(f)}_itemSelected(f){f.preventDefault()}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.SBq),p.Y36(p.sBO),p.Y36(dt.rL),p.Y36(bt.Is,8),p.Y36(p.R0b),p.Y36(mt.t4),p.Y36(V.Qb,8))},D.\u0275dir=p.lG2({type:D,inputs:{disableRipple:"disableRipple"},features:[p.qOj]}),D})(),ei=(()=>{class D extends $e{constructor(f,S,B,rt,ee,Ye,di){super(f,S,B,rt,ee,Ye,di)}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.SBq),p.Y36(p.sBO),p.Y36(dt.rL),p.Y36(bt.Is,8),p.Y36(p.R0b),p.Y36(mt.t4),p.Y36(V.Qb,8))},D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-tab-header"]],contentQueries:function(f,S,B){if(1&f&&p.Suo(B,ri,4),2&f){let rt;p.iGM(rt=p.CRH())&&(S._items=rt)}},viewQuery:function(f,S){if(1&f&&(p.Gf(re,7),p.Gf(Ie,7),p.Gf(Ze,7),p.Gf(me,7),p.Gf(Be,5),p.Gf(Ge,5)),2&f){let B;p.iGM(B=p.CRH())&&(S._inkBar=B.first),p.iGM(B=p.CRH())&&(S._tabListContainer=B.first),p.iGM(B=p.CRH())&&(S._tabList=B.first),p.iGM(B=p.CRH())&&(S._tabListInner=B.first),p.iGM(B=p.CRH())&&(S._nextPaginator=B.first),p.iGM(B=p.CRH())&&(S._previousPaginator=B.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(f,S){2&f&&p.ekj("mat-tab-header-pagination-controls-enabled",S._showPaginationControls)("mat-tab-header-rtl","rtl"==S._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[p.qOj],ngContentSelectors:st,decls:14,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(f,S){1&f&&(p.F$t(),p.TgZ(0,"div",0,1),p.NdJ("click",function(){return S._handlePaginatorClick("before")})("mousedown",function(rt){return S._handlePaginatorPress("before",rt)})("touchend",function(){return S._stopInterval()}),p._UZ(2,"div",2),p.qZA(),p.TgZ(3,"div",3,4),p.NdJ("keydown",function(rt){return S._handleKeydown(rt)}),p.TgZ(5,"div",5,6),p.NdJ("cdkObserveContent",function(){return S._onContentChanges()}),p.TgZ(7,"div",7,8),p.Hsn(9),p.qZA(),p._UZ(10,"mat-ink-bar"),p.qZA(),p.qZA(),p.TgZ(11,"div",9,10),p.NdJ("mousedown",function(rt){return S._handlePaginatorPress("after",rt)})("click",function(){return S._handlePaginatorClick("after")})("touchend",function(){return S._stopInterval()}),p._UZ(13,"div",2),p.qZA()),2&f&&(p.ekj("mat-tab-header-pagination-disabled",S._disableScrollBefore),p.Q6J("matRippleDisabled",S._disableScrollBefore||S.disableRipple),p.xp6(5),p.ekj("_mat-animation-noopable","NoopAnimations"===S._animationMode),p.xp6(6),p.ekj("mat-tab-header-pagination-disabled",S._disableScrollAfter),p.Q6J("matRippleDisabled",S._disableScrollAfter||S.disableRipple))},directives:[H.wG,v.wD,re],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n'],encapsulation:2}),D})(),ae=0;class Pe{}const oi=(0,H.pj)((0,H.Kr)(class{constructor(D){this._elementRef=D}}),"primary");let Te=(()=>{class D extends oi{constructor(f,S,B,rt){var ee;super(f),this._changeDetectorRef=S,this._animationMode=rt,this._tabs=new p.n_E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=Z.w0.EMPTY,this._tabLabelSubscription=Z.w0.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new p.vpe,this.focusChange=new p.vpe,this.animationDone=new p.vpe,this.selectedTabChange=new p.vpe(!0),this._groupId=ae++,this.animationDuration=B&&B.animationDuration?B.animationDuration:"500ms",this.disablePagination=!(!B||null==B.disablePagination)&&B.disablePagination,this.dynamicHeight=!(!B||null==B.dynamicHeight)&&B.dynamicHeight,this.contentTabIndex=null!==(ee=null==B?void 0:B.contentTabIndex)&&void 0!==ee?ee:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(f){this._dynamicHeight=(0,tt.Ig)(f)}get selectedIndex(){return this._selectedIndex}set selectedIndex(f){this._indexToSelect=(0,tt.su)(f,null)}get animationDuration(){return this._animationDuration}set animationDuration(f){this._animationDuration=/^\d+$/.test(f)?f+"ms":f}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(f){this._contentTabIndex=(0,tt.su)(f,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(f){const S=this._elementRef.nativeElement;S.classList.remove(`mat-background-${this.backgroundColor}`),f&&S.classList.add(`mat-background-${f}`),this._backgroundColor=f}ngAfterContentChecked(){const f=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=f){const S=null==this._selectedIndex;if(!S){this.selectedTabChange.emit(this._createChangeEvent(f));const B=this._tabBodyWrapper.nativeElement;B.style.minHeight=B.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((B,rt)=>B.isActive=rt===f),S||(this.selectedIndexChange.emit(f),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((S,B)=>{S.position=B-f,null!=this._selectedIndex&&0==S.position&&!S.origin&&(S.origin=f-this._selectedIndex)}),this._selectedIndex!==f&&(this._selectedIndex=f,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const S=this._tabs.toArray();for(let B=0;B<S.length;B++)if(S[B].isActive){this._indexToSelect=this._selectedIndex=B;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,yt.O)(this._allTabs)).subscribe(f=>{this._tabs.reset(f.filter(S=>S._closestTabGroup===this||!S._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}focusTab(f){const S=this._tabHeader;S&&(S.focusIndex=f)}_focusChanged(f){this.focusChange.emit(this._createChangeEvent(f))}_createChangeEvent(f){const S=new Pe;return S.index=f,this._tabs&&this._tabs.length&&(S.tab=this._tabs.toArray()[f]),S}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,ot.T)(...this._tabs.map(f=>f._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(f){return Math.min(this._tabs.length-1,Math.max(f||0,0))}_getTabLabelId(f){return`mat-tab-label-${this._groupId}-${f}`}_getTabContentId(f){return`mat-tab-content-${this._groupId}-${f}`}_setTabBodyWrapperHeight(f){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const S=this._tabBodyWrapper.nativeElement;S.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(S.style.height=f+"px")}_removeTabBodyWrapperHeight(){const f=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=f.clientHeight,f.style.height="",this.animationDone.emit()}_handleClick(f,S,B){f.disabled||(this.selectedIndex=S.focusIndex=B)}_getTabIndex(f,S){return f.disabled?null:this.selectedIndex===S?0:-1}_tabFocusChanged(f,S){f&&"mouse"!==f&&"touch"!==f&&(this._tabHeader.focusIndex=S)}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.SBq),p.Y36(p.sBO),p.Y36(je,8),p.Y36(V.Qb,8))},D.\u0275dir=p.lG2({type:D,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[p.qOj]}),D})(),Oe=(()=>{class D extends Te{constructor(f,S,B,rt){super(f,S,B,rt)}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.SBq),p.Y36(p.sBO),p.Y36(je,8),p.Y36(V.Qb,8))},D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-tab-group"]],contentQueries:function(f,S,B){if(1&f&&p.Suo(B,ue,5),2&f){let rt;p.iGM(rt=p.CRH())&&(S._allTabs=rt)}},viewQuery:function(f,S){if(1&f&&(p.Gf(si,5),p.Gf(Qe,5)),2&f){let B;p.iGM(B=p.CRH())&&(S._tabBodyWrapper=B.first),p.iGM(B=p.CRH())&&(S._tabHeader=B.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(f,S){2&f&&p.ekj("mat-tab-group-dynamic-height",S.dynamicHeight)("mat-tab-group-inverted-header","below"===S.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[p._Bn([{provide:Yt,useExisting:D}]),p.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(f,S){1&f&&(p.TgZ(0,"mat-tab-header",0,1),p.NdJ("indexFocused",function(rt){return S._focusChanged(rt)})("selectFocusedIndex",function(rt){return S.selectedIndex=rt}),p.YNc(2,Ve,4,14,"div",2),p.qZA(),p.TgZ(3,"div",3,4),p.YNc(5,ui,1,9,"mat-tab-body",5),p.qZA()),2&f&&(p.Q6J("selectedIndex",S.selectedIndex||0)("disableRipple",S.disableRipple)("disablePagination",S.disablePagination),p.xp6(2),p.Q6J("ngForOf",S._tabs),p.xp6(1),p.ekj("_mat-animation-noopable","NoopAnimations"===S._animationMode),p.xp6(2),p.Q6J("ngForOf",S._tabs))},directives:[ei,O.sg,ri,H.wG,c.kH,O.O5,R.Pl,ke],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),D})(),ti=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[O.ez,H.BQ,R.eL,H.si,v.Q8,c.rt],H.BQ]}),D})();const Pi=["vcr"];function Hi(D,k){if(1&D&&(p.TgZ(0,"mat-icon",9),p._uU(1),p.qZA()),2&D){const f=p.oxw(2).$implicit;p.xp6(1),p.hij(" filter_",f+1,"")}}function bn(D,k){1&D&&(p.TgZ(0,"span"),p._uU(1,"W:{{number+1}"),p.qZA())}function Ln(D,k){if(1&D&&(p.YNc(0,Hi,2,1,"mat-icon",7),p.YNc(1,bn,2,0,"span",8)),2&D){const f=p.oxw().$implicit;p.Q6J("ngIf",f<10),p.xp6(1),p.Q6J("ngIf",f>9)}}function Xe(D,k){}function Re(D,k){1&D&&(p.TgZ(0,"mat-tab",4),p.YNc(1,Ln,2,2,"ng-template",5),p.YNc(2,Xe,0,0,"ng-template",null,6,p.W1O),p.qZA()),2&D&&p.Q6J("label","W:"+(k.$implicit+1))}let fe=(()=>{class D{constructor(f,S){this.fooInjector=f,this.resolver=S,this.data=[],this.selectedTabIndex=0,this.numbers=[0]}addTab(){this.numbers.push(this.numbers.length),this.selectedTabIndex=this.numbers.length-1}changeSelected(f){this.data.filter(S=>S==f).length>0||(this.data.push(f),this.loadBar(f).then(S=>{console.log("loaded"+S)}))}ngAfterViewInit(){this.data.push(0),this.loadBar(0).then(f=>{console.log("loaded tab"+f)})}loadBar(f){var S=this;return(0,n.Z)(function*(){var B;try{const ee=yield Promise.resolve().then(m.bind(m,37907)),Ye=S.resolver.resolveComponentFactory(ee.DisplayBlocklyComponent);var rt=null===(B=S.components)||void 0===B?void 0:B.get(f);null!=rt&&rt.createComponent(Ye)}catch(ee){console.error("loading"+f,ee)}return f})()}ngOnInit(){}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.zs3),p.Y36(p._Vd))},D.\u0275cmp=p.Xpm({type:D,selectors:[["app-blockly-studio"]],viewQuery:function(f,S){if(1&f&&p.Gf(Pi,5,p.s_b),2&f){let B;p.iGM(B=p.CRH())&&(S.components=B)}},decls:7,vars:2,consts:[["mat-icon-button","","color","primary",3,"click"],[3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[3,"label"],["mat-tab-label",""],["vcr",""],["aria-hidden","false",4,"ngIf"],[4,"ngIf"],["aria-hidden","false"]],template:function(f,S){1&f&&(p.TgZ(0,"button",0),p.NdJ("click",function(){return S.addTab()}),p.TgZ(1,"mat-icon"),p._uU(2,"add_circle"),p.qZA(),p.qZA(),p.TgZ(3,"mat-tab-group",1),p.NdJ("selectedIndexChange",function(rt){return S.changeSelected(rt)}),p.YNc(4,Re,4,1,"mat-tab",2),p.qZA(),p.TgZ(5,"button",3),p.NdJ("click",function(){return S.addTab()}),p._uU(6,"Add"),p.qZA()),2&f&&(p.xp6(3),p.Q6J("selectedIndex",S.selectedTabIndex),p.xp6(1),p.Q6J("ngForOf",S.numbers))},directives:[o.lW,s.Hw,Oe,O.sg,ue,Ht,O.O5],styles:[""]}),D})();var ze=m(37907);const _i=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:ze.DisplayBlocklyComponent},{path:"automation/studio",component:fe},{path:"automation/loadexample/:demoblock",component:ze.DisplayBlocklyComponent}];let Xi=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[t.Bz.forRoot(_i)],t.Bz]}),D})();var hn=m(76186),Mn=m(95113),Nn=m(54004),mr=m(26063);class ar extends G.x{constructor(k=1/0,f=1/0,S=mr.l){super(),this._bufferSize=k,this._windowTime=f,this._timestampProvider=S,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=f===1/0,this._bufferSize=Math.max(1,k),this._windowTime=Math.max(1,f)}next(k){const{isStopped:f,_buffer:S,_infiniteTimeWindow:B,_timestampProvider:rt,_windowTime:ee}=this;f||(S.push(k),!B&&S.push(rt.now()+ee)),this._trimBuffer(),super.next(k)}_subscribe(k){this._throwIfClosed(),this._trimBuffer();const f=this._innerSubscribe(k),{_infiniteTimeWindow:S,_buffer:B}=this,rt=B.slice();for(let ee=0;ee<rt.length&&!k.closed;ee+=S?1:2)k.next(rt[ee]);return this._checkFinalizedStatuses(k),f}_trimBuffer(){const{_bufferSize:k,_timestampProvider:f,_buffer:S,_infiniteTimeWindow:B}=this,rt=(B?1:2)*k;if(k<1/0&&rt<S.length&&S.splice(0,S.length-rt),!B){const ee=f.now();let Ye=0;for(let di=1;di<S.length&&S[di]<=ee;di+=2)Ye=di;Ye&&S.splice(0,Ye+1)}}}var Ur=m(13099);let eo=(()=>{class D{constructor(){this.title="",this.footer="",this.startBlocks=[],this.tourSteps=[],this.latestVersion=""}}return D.version="2021.12.11.1115",D})();var Ar=m(68260),Pn=m(39300),Fi=m(69718),Ji=m(95698),Wn=m(78372);const Ro=["*"];function Or(D,k){if(1&D){const f=p.EpF();p.TgZ(0,"div",2),p.NdJ("click",function(){return p.CHM(f),p.oxw()._onBackdropClicked()}),p.qZA()}if(2&D){const f=p.oxw();p.ekj("mat-drawer-shown",f._isShowingBackdrop())}}function so(D,k){1&D&&(p.TgZ(0,"mat-drawer-content"),p.Hsn(1,2),p.qZA())}const Do=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Bn=["mat-drawer","mat-drawer-content","*"];function Vo(D,k){if(1&D){const f=p.EpF();p.TgZ(0,"div",2),p.NdJ("click",function(){return p.CHM(f),p.oxw()._onBackdropClicked()}),p.qZA()}if(2&D){const f=p.oxw();p.ekj("mat-drawer-shown",f._isShowingBackdrop())}}function qr(D,k){1&D&&(p.TgZ(0,"mat-sidenav-content",3),p.Hsn(1,2),p.qZA())}const ln=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],hr=["mat-sidenav","mat-sidenav-content","*"],ts={transformDrawer:(0,ct.X$)("transform",[(0,ct.SB)("open, open-instant",(0,ct.oB)({transform:"none",visibility:"visible"})),(0,ct.SB)("void",(0,ct.oB)({"box-shadow":"none",visibility:"hidden"})),(0,ct.eR)("void => open-instant",(0,ct.jt)("0ms")),(0,ct.eR)("void <=> open, open-instant => void",(0,ct.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},go=new p.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),xr=new p.OlP("MAT_DRAWER_CONTAINER");let qn=(()=>{class D extends dt.PQ{constructor(f,S,B,rt,ee){super(B,rt,ee),this._changeDetectorRef=f,this._container=S}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.sBO),p.Y36((0,p.Gpc)(()=>dr)),p.Y36(p.SBq),p.Y36(dt.mF),p.Y36(p.R0b))},D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(f,S){2&f&&p.Udp("margin-left",S._container._contentMargins.left,"px")("margin-right",S._container._contentMargins.right,"px")},features:[p.qOj],ngContentSelectors:Ro,decls:1,vars:0,template:function(f,S){1&f&&(p.F$t(),p.Hsn(0))},encapsulation:2,changeDetection:0}),D})(),un=(()=>{class D{constructor(f,S,B,rt,ee,Ye,di,en){this._elementRef=f,this._focusTrapFactory=S,this._focusMonitor=B,this._platform=rt,this._ngZone=ee,this._interactivityChecker=Ye,this._doc=di,this._container=en,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new G.x,this._animationEnd=new G.x,this._animationState="void",this.openedChange=new p.vpe(!0),this._openedStream=this.openedChange.pipe((0,Pn.h)(Li=>Li),(0,Nn.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,Pn.h)(Li=>Li.fromState!==Li.toState&&0===Li.toState.indexOf("open")),(0,Fi.h)(void 0)),this._closedStream=this.openedChange.pipe((0,Pn.h)(Li=>!Li),(0,Nn.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,Pn.h)(Li=>Li.fromState!==Li.toState&&"void"===Li.toState),(0,Fi.h)(void 0)),this._destroyed=new G.x,this.onPositionChanged=new p.vpe,this._modeChanged=new G.x,this.openedChange.subscribe(Li=>{Li?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,vt.R)(this._elementRef.nativeElement,"keydown").pipe((0,Pn.h)(Li=>Li.keyCode===Rt.hY&&!this.disableClose&&!(0,Rt.Vb)(Li)),(0,at.R)(this._destroyed)).subscribe(Li=>this._ngZone.run(()=>{this.close(),Li.stopPropagation(),Li.preventDefault()}))}),this._animationEnd.pipe((0,lt.x)((Li,Xn)=>Li.fromState===Xn.fromState&&Li.toState===Xn.toState)).subscribe(Li=>{const{fromState:Xn,toState:Kn}=Li;(0===Kn.indexOf("open")&&"void"===Xn||"void"===Kn&&0===Xn.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(f){(f="end"===f?"end":"start")!=this._position&&(this._position=f,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(f){this._mode=f,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(f){this._disableClose=(0,tt.Ig)(f)}get autoFocus(){const f=this._autoFocus;return null==f?"side"===this.mode?"dialog":"first-tabbable":f}set autoFocus(f){("true"===f||"false"===f)&&(f=(0,tt.Ig)(f)),this._autoFocus=f}get opened(){return this._opened}set opened(f){this.toggle((0,tt.Ig)(f))}_forceFocus(f,S){this._interactivityChecker.isFocusable(f)||(f.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{f.addEventListener("blur",()=>f.removeAttribute("tabindex")),f.addEventListener("mousedown",()=>f.removeAttribute("tabindex"))})),f.focus(S)}_focusByCssSelector(f,S){let B=this._elementRef.nativeElement.querySelector(f);B&&this._forceFocus(B,S)}_takeFocus(){if(!this._focusTrap)return;const f=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(S=>{!S&&"function"==typeof this._elementRef.nativeElement.focus&&f.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(f){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,f):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){var f;const S=null===(f=this._doc)||void 0===f?void 0:f.activeElement;return!!S&&this._elementRef.nativeElement.contains(S)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(f){return this.toggle(!0,f)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(f=!this.opened,S){f&&S&&(this._openedVia=S);const B=this._setOpen(f,!f&&this._isFocusWithinDrawer(),this._openedVia||"program");return f||(this._openedVia=null),B}_setOpen(f,S,B){return this._opened=f,f?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",S&&this._restoreFocus(B)),this._updateFocusTrapState(),new Promise(rt=>{this.openedChange.pipe((0,Ji.q)(1)).subscribe(ee=>rt(ee?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.SBq),p.Y36(c.qV),p.Y36(c.tE),p.Y36(mt.t4),p.Y36(p.R0b),p.Y36(c.ic),p.Y36(O.K0,8),p.Y36(xr,8))},D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(f,S){1&f&&p.WFA("@transform.start",function(rt){return S._animationStarted.next(rt)})("@transform.done",function(rt){return S._animationEnd.next(rt)}),2&f&&(p.uIk("align",null),p.d8E("@transform",S._animationState),p.ekj("mat-drawer-end","end"===S.position)("mat-drawer-over","over"===S.mode)("mat-drawer-push","push"===S.mode)("mat-drawer-side","side"===S.mode)("mat-drawer-opened",S.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Ro,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(f,S){1&f&&(p.F$t(),p.TgZ(0,"div",0),p.Hsn(1),p.qZA())},directives:[dt.PQ],encapsulation:2,data:{animation:[ts.transformDrawer]},changeDetection:0}),D})(),dr=(()=>{class D{constructor(f,S,B,rt,ee,Ye=!1,di){this._dir=f,this._element=S,this._ngZone=B,this._changeDetectorRef=rt,this._animationMode=di,this._drawers=new p.n_E,this.backdropClick=new p.vpe,this._destroyed=new G.x,this._doCheckSubject=new G.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new G.x,f&&f.change.pipe((0,at.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),ee.change().pipe((0,at.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=Ye}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(f){this._autosize=(0,tt.Ig)(f)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(f){this._backdropOverride=null==f?null:(0,tt.Ig)(f)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,yt.O)(this._allDrawers),(0,at.R)(this._destroyed)).subscribe(f=>{this._drawers.reset(f.filter(S=>!S._container||S._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,yt.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(f=>{this._watchDrawerToggle(f),this._watchDrawerPosition(f),this._watchDrawerMode(f)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Wn.b)(10),(0,at.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(f=>f.open())}close(){this._drawers.forEach(f=>f.close())}updateContentMargins(){let f=0,S=0;if(this._left&&this._left.opened)if("side"==this._left.mode)f+=this._left._getWidth();else if("push"==this._left.mode){const B=this._left._getWidth();f+=B,S-=B}if(this._right&&this._right.opened)if("side"==this._right.mode)S+=this._right._getWidth();else if("push"==this._right.mode){const B=this._right._getWidth();S+=B,f-=B}f=f||null,S=S||null,(f!==this._contentMargins.left||S!==this._contentMargins.right)&&(this._contentMargins={left:f,right:S},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(f){f._animationStarted.pipe((0,Pn.h)(S=>S.fromState!==S.toState),(0,at.R)(this._drawers.changes)).subscribe(S=>{"open-instant"!==S.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==f.mode&&f.openedChange.pipe((0,at.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(f.opened))}_watchDrawerPosition(f){!f||f.onPositionChanged.pipe((0,at.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Ji.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(f){f&&f._modeChanged.pipe((0,at.R)((0,ot.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(f){const S=this._element.nativeElement.classList,B="mat-drawer-container-has-open";f?S.add(B):S.remove(B)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(f=>{"end"==f.position?this._end=f:this._start=f}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(f=>f&&!f.disableClose&&this._canHaveBackdrop(f)).forEach(f=>f._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(f){return"side"!==f.mode||!!this._backdropOverride}_isDrawerOpen(f){return null!=f&&f.opened}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(bt.Is,8),p.Y36(p.SBq),p.Y36(p.R0b),p.Y36(p.sBO),p.Y36(dt.rL),p.Y36(go),p.Y36(V.Qb,8))},D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-drawer-container"]],contentQueries:function(f,S,B){if(1&f&&(p.Suo(B,qn,5),p.Suo(B,un,5)),2&f){let rt;p.iGM(rt=p.CRH())&&(S._content=rt.first),p.iGM(rt=p.CRH())&&(S._allDrawers=rt)}},viewQuery:function(f,S){if(1&f&&p.Gf(qn,5),2&f){let B;p.iGM(B=p.CRH())&&(S._userContent=B.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(f,S){2&f&&p.ekj("mat-drawer-container-explicit-backdrop",S._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[p._Bn([{provide:xr,useExisting:D}])],ngContentSelectors:Bn,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(f,S){1&f&&(p.F$t(Do),p.YNc(0,Or,1,2,"div",0),p.Hsn(1),p.Hsn(2,1),p.YNc(3,so,2,0,"mat-drawer-content",1)),2&f&&(p.Q6J("ngIf",S.hasBackdrop),p.xp6(3),p.Q6J("ngIf",!S._content))},directives:[O.O5,qn],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),D})(),bo=(()=>{class D extends qn{constructor(f,S,B,rt,ee){super(f,S,B,rt,ee)}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.sBO),p.Y36((0,p.Gpc)(()=>pr)),p.Y36(p.SBq),p.Y36(dt.mF),p.Y36(p.R0b))},D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(f,S){2&f&&p.Udp("margin-left",S._container._contentMargins.left,"px")("margin-right",S._container._contentMargins.right,"px")},features:[p.qOj],ngContentSelectors:Ro,decls:1,vars:0,template:function(f,S){1&f&&(p.F$t(),p.Hsn(0))},encapsulation:2,changeDetection:0}),D})(),ao=(()=>{class D extends un{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(f){this._fixedInViewport=(0,tt.Ig)(f)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(f){this._fixedTopGap=(0,tt.su)(f)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(f){this._fixedBottomGap=(0,tt.su)(f)}}return D.\u0275fac=function(){let k;return function(S){return(k||(k=p.n5z(D)))(S||D)}}(),D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(f,S){2&f&&(p.uIk("align",null),p.Udp("top",S.fixedInViewport?S.fixedTopGap:null,"px")("bottom",S.fixedInViewport?S.fixedBottomGap:null,"px"),p.ekj("mat-drawer-end","end"===S.position)("mat-drawer-over","over"===S.mode)("mat-drawer-push","push"===S.mode)("mat-drawer-side","side"===S.mode)("mat-drawer-opened",S.opened)("mat-sidenav-fixed",S.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[p.qOj],ngContentSelectors:Ro,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(f,S){1&f&&(p.F$t(),p.TgZ(0,"div",0),p.Hsn(1),p.qZA())},directives:[dt.PQ],encapsulation:2,data:{animation:[ts.transformDrawer]},changeDetection:0}),D})(),pr=(()=>{class D extends dr{}return D.\u0275fac=function(){let k;return function(S){return(k||(k=p.n5z(D)))(S||D)}}(),D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-sidenav-container"]],contentQueries:function(f,S,B){if(1&f&&(p.Suo(B,bo,5),p.Suo(B,ao,5)),2&f){let rt;p.iGM(rt=p.CRH())&&(S._content=rt.first),p.iGM(rt=p.CRH())&&(S._allDrawers=rt)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(f,S){2&f&&p.ekj("mat-drawer-container-explicit-backdrop",S._backdropOverride)},exportAs:["matSidenavContainer"],features:[p._Bn([{provide:xr,useExisting:D}]),p.qOj],ngContentSelectors:hr,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(f,S){1&f&&(p.F$t(ln),p.YNc(0,Vo,1,2,"div",0),p.Hsn(1),p.Hsn(2,1),p.YNc(3,qr,2,0,"mat-sidenav-content",1)),2&f&&(p.Q6J("ngIf",S.hasBackdrop),p.xp6(3),p.Q6J("ngIf",!S._content))},directives:[O.O5,bo,dt.PQ],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),D})(),En=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[O.ez,H.BQ,mt.ud,dt.ZD],dt.ZD,H.BQ]}),D})();const es=["*",[["mat-toolbar-row"]]],Uo=["*","mat-toolbar-row"],ho=(0,H.pj)(class{constructor(D){this._elementRef=D}});let $o=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275dir=p.lG2({type:D,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),D})(),sa=(()=>{class D extends ho{constructor(f,S,B){super(f),this._platform=S,this._document=B}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.SBq),p.Y36(mt.t4),p.Y36(O.K0))},D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-toolbar"]],contentQueries:function(f,S,B){if(1&f&&p.Suo(B,$o,5),2&f){let rt;p.iGM(rt=p.CRH())&&(S._toolbarRows=rt)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(f,S){2&f&&p.ekj("mat-toolbar-multiple-rows",S._toolbarRows.length>0)("mat-toolbar-single-row",0===S._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[p.qOj],ngContentSelectors:Uo,decls:2,vars:0,template:function(f,S){1&f&&(p.F$t(es),p.Hsn(0),p.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),D})(),_r=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[H.BQ],H.BQ]}),D})();m(20449);let xo=(()=>{class D{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(f){this._vertical=(0,tt.Ig)(f)}get inset(){return this._inset}set inset(f){this._inset=(0,tt.Ig)(f)}}return D.\u0275fac=function(f){return new(f||D)},D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(f,S){2&f&&(p.uIk("aria-orientation",S.vertical?"vertical":"horizontal"),p.ekj("mat-divider-vertical",S.vertical)("mat-divider-horizontal",!S.vertical)("mat-divider-inset",S.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(f,S){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),D})(),us=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[H.BQ],H.BQ]}),D})();const Js=["*"],hs=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],va=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],vr=(0,H.Id)((0,H.Kr)(class{})),$s=(0,H.Kr)(class{}),Zs=new p.OlP("MatList"),Zo=new p.OlP("MatNavList");let Un=(()=>{class D extends vr{constructor(){super(...arguments),this._stateChanges=new G.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return D.\u0275fac=function(){let k;return function(S){return(k||(k=p.n5z(D)))(S||D)}}(),D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[p._Bn([{provide:Zo,useExisting:D}]),p.qOj,p.TTD],ngContentSelectors:Js,decls:1,vars:0,template:function(f,S){1&f&&(p.F$t(),p.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),D})(),lr=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275dir=p.lG2({type:D,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),D})(),br=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275dir=p.lG2({type:D,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),D})(),ps=(()=>{class D extends $s{constructor(f,S,B,rt){super(),this._element=f,this._isInteractiveList=!1,this._destroyed=new G.x,this._disabled=!1,this._isInteractiveList=!!(B||rt&&"action-list"===rt._getListType()),this._list=B||rt;const ee=this._getHostElement();"button"===ee.nodeName.toLowerCase()&&!ee.hasAttribute("type")&&ee.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,at.R)(this._destroyed)).subscribe(()=>{S.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(f){this._disabled=(0,tt.Ig)(f)}ngAfterContentInit(){(0,H.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.SBq),p.Y36(p.sBO),p.Y36(Zo,8),p.Y36(Zs,8))},D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(f,S,B){if(1&f&&(p.Suo(B,lr,5),p.Suo(B,br,5),p.Suo(B,H.X2,5)),2&f){let rt;p.iGM(rt=p.CRH())&&(S._avatar=rt.first),p.iGM(rt=p.CRH())&&(S._icon=rt.first),p.iGM(rt=p.CRH())&&(S._lines=rt)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(f,S){2&f&&p.ekj("mat-list-item-disabled",S.disabled)("mat-list-item-avatar",S._avatar||S._icon)("mat-list-item-with-avatar",S._avatar||S._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[p.qOj],ngContentSelectors:va,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(f,S){1&f&&(p.F$t(hs),p.TgZ(0,"div",0),p._UZ(1,"div",1),p.Hsn(2),p.TgZ(3,"div",2),p.Hsn(4,1),p.qZA(),p.Hsn(5,2),p.qZA()),2&f&&(p.xp6(1),p.Q6J("matRippleTrigger",S._getHostElement())("matRippleDisabled",S._isRippleDisabled()))},directives:[H.wG],encapsulation:2,changeDetection:0}),D})(),kr=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[H.uc,H.si,H.BQ,H.us,O.ez],H.uc,H.BQ,H.us,us]}),D})();var Jn=m(81125),fr=m(92181);const cr=function(D){return["/","automation","loadexample",D]};function Qs(D,k){if(1&D&&(p.TgZ(0,"a",21),p.TgZ(1,"mat-icon"),p._uU(2," https "),p.qZA(),p._uU(3),p.qZA()),2&D){const f=k.index,S=k.$implicit;p.Q6J("routerLink",p.VKq(3,cr,S.id)),p.xp6(3),p.AsE(" ",f+1," ",S.description,"")}}function Cs(D,k){if(1&D){const f=p.EpF();p.TgZ(0,"button",23),p.NdJ("click",function(){return p.CHM(f),p.oxw(),p.MAs(2).toggle()}),p.TgZ(1,"mat-icon",24),p._uU(2,"menu"),p.qZA(),p.qZA()}}function Po(D,k){if(1&D&&(p.TgZ(0,"span",25),p._uU(1),p.qZA()),2&D){const f=p.oxw();p.xp6(1),p.AsE(" ",f.version," => ",f.latestVersion," ")}}const Ss=function(){return["/","automation","studio"]},Lr=function(){return["/","automation","main"]};let Hs=(()=>{class D{constructor(f,S,B){this.breakpointObserver=f,this.details=S,this.ta=B,this.demoBlocks=[],this.isHandset$=this.breakpointObserver.observe(Mn.u3.Handset).pipe((0,Nn.U)(rt=>rt.matches||!0),function(D,k,f){let rt,ee=!1;return rt=1/0,(0,Ur.B)({connector:()=>new ar(rt,k,f),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ee})}()),this.version=eo.version,this.latestVersion="",this.title="Blockly Automation",this.footer="",this.standalone=!1}ngOnInit(){var f,S,B,rt,ee;this.latestVersion=null===(f=this.details.settings)||void 0===f?void 0:f.latestVersion,this.demoBlocks=this.details.demoBlocks.sort((Ye,di)=>Ye.description.localeCompare(di.description)),this.title=(null===(B=null===(S=this.details)||void 0===S?void 0:S.settings)||void 0===B?void 0:B.title)||"Blockly Automation",this.footer=(null===(ee=null===(rt=this.details)||void 0===rt?void 0:rt.settings)||void 0===ee?void 0:ee.footer)||"",(navigator.standalone||window.matchMedia("(display-mode: standalone)").matches)&&(this.standalone=!0)}executeOnDisplayBlockly(f){this.ta.sendDataToServer("DisplayBlocklyComponent",f)}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(Mn.Yg),p.Y36(hn.d),p.Y36(Ar.v))},D.\u0275cmp=p.Xpm({type:D,selectors:[["app-primary-navig"]],decls:78,vars:27,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation","target","_blank"],["mat-list-item","","href","https://ignatandrei.github.io/BlocklyAutomation","target","_blank"],["mat-list-item","","target","_blank",3,"routerLink",4,"ngFor","ngForOf"],["color","primary",1,"nav-bar"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[3,"title"],[1,"example-spacer"],["mat-mini-fab","","color","primary",3,"click"],["id","download","mat-button","",3,"matMenuTriggerFor"],["download","matMenu"],["mat-list-item","",4,"ngIf"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseIISWin.zip/","target","_blank"],["mat-button","",3,"matMenuTriggerFor"],["examples","matMenu"],["mat-list-item","","target","_blank",3,"routerLink"],[1,"main-content"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-list-item",""]],template:function(f,S){if(1&f&&(p.TgZ(0,"mat-sidenav-container",0),p.TgZ(1,"mat-sidenav",1,2),p.ALo(3,"async"),p.ALo(4,"async"),p.ALo(5,"async"),p.TgZ(6,"mat-toolbar"),p.TgZ(7,"a",3),p._uU(8,"Menu"),p.qZA(),p.qZA(),p.TgZ(9,"mat-nav-list"),p.TgZ(10,"a",4),p.TgZ(11,"mat-icon"),p._uU(12," source "),p.qZA(),p._uU(13," Github"),p.qZA(),p._UZ(14,"mat-divider"),p.TgZ(15,"a",5),p.TgZ(16,"mat-icon"),p._uU(17," https "),p.qZA(),p._uU(18," Demo online"),p.qZA(),p._UZ(19,"mat-divider"),p.TgZ(20,"mat-expansion-panel"),p.TgZ(21,"mat-expansion-panel-header"),p.TgZ(22,"mat-panel-title"),p._uU(23),p.qZA(),p.qZA(),p.YNc(24,Qs,4,5,"a",6),p.qZA(),p.qZA(),p.qZA(),p.TgZ(25,"mat-sidenav-content"),p.TgZ(26,"mat-toolbar",7),p.YNc(27,Cs,3,0,"button",8),p.ALo(28,"async"),p.TgZ(29,"span",9),p._uU(30),p.qZA(),p._UZ(31,"span",10),p.TgZ(32,"button",11),p.NdJ("click",function(){return S.executeOnDisplayBlockly("createIntro")}),p.TgZ(33,"mat-icon"),p._uU(34," help_outline "),p.qZA(),p.qZA(),p.TgZ(35,"button",12),p.TgZ(36,"mat-icon"),p._uU(37," file_download "),p.qZA(),p.qZA(),p.TgZ(38,"mat-menu",null,13),p.YNc(40,Po,2,2,"span",14),p.TgZ(41,"a",15),p._uU(42," Download HTML"),p.qZA(),p.TgZ(43,"a",16),p._uU(44," Download Linux"),p.qZA(),p.TgZ(45,"a",17),p._uU(46," Download Windows"),p.qZA(),p.TgZ(47,"a",18),p._uU(48," Download IIS"),p.qZA(),p.qZA(),p.TgZ(49,"button",19),p.TgZ(50,"mat-icon"),p._uU(51," source "),p.qZA(),p.qZA(),p.TgZ(52,"mat-menu",null,20),p.TgZ(54,"a",21),p.TgZ(55,"mat-icon"),p._uU(56," star "),p.qZA(),p._uU(57,"Studio "),p.qZA(),p.TgZ(58,"a",21),p.TgZ(59,"mat-icon"),p._uU(60," star_half "),p.qZA(),p._uU(61,"Single "),p.qZA(),p.TgZ(62,"a",4),p.TgZ(63,"mat-icon"),p._uU(64," source "),p.qZA(),p._uU(65," Github"),p.qZA(),p._UZ(66,"mat-divider"),p.TgZ(67,"a",5),p.TgZ(68,"mat-icon"),p._uU(69," https "),p.qZA(),p._uU(70," Demo online"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(71,"div",22),p._UZ(72,"router-outlet"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(73,"footer"),p.TgZ(74,"small"),p._uU(75),p.qZA(),p.TgZ(76,"small"),p._uU(77),p.qZA(),p.qZA()),2&f){const B=p.MAs(39),rt=p.MAs(53);p.xp6(1),p.Q6J("mode",p.lcZ(4,19,S.isHandset$)?"over":"side")("opened",!1===p.lcZ(5,21,S.isHandset$)),p.uIk("role",p.lcZ(3,17,S.isHandset$)?"dialog":"navigation"),p.xp6(22),p.hij(" Demos ",S.demoBlocks.length," "),p.xp6(1),p.Q6J("ngForOf",S.demoBlocks),p.xp6(3),p.Q6J("ngIf",p.lcZ(28,23,S.isHandset$)),p.xp6(2),p.s9C("title",S.version),p.xp6(1),p.Oqu(S.title),p.xp6(5),p.Q6J("matMenuTriggerFor",B),p.xp6(5),p.Q6J("ngIf",S.version!=S.latestVersion),p.xp6(9),p.Q6J("matMenuTriggerFor",rt),p.xp6(5),p.Q6J("routerLink",p.DdM(25,Ss)),p.xp6(4),p.Q6J("routerLink",p.DdM(26,Lr)),p.xp6(17),p.Oqu(S.footer),p.xp6(2),p.lnq("",S.standalone?"standalone":"browser"," ",S.version," -> ",S.latestVersion,"")}},directives:[pr,ao,sa,ps,t.yS,Un,s.Hw,xo,Jn.ib,Jn.yz,Jn.yK,O.sg,bo,O.O5,o.lW,fr.p6,fr.VK,t.lC],pipes:[O.Ov],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%}.sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-content[_ngcontent-%COMP%]{height:97%;width:100%}.nav-bar[_ngcontent-%COMP%]{height:3%;width:100%}"]}),D})(),$n=(()=>{class D{constructor(f,S){var B,rt;this.titleService=f,this.title="AutoBlocklyApp",console.log(null===(B=S.settings)||void 0===B?void 0:B.title),this.titleService.setTitle((null===(rt=S.settings)||void 0===rt?void 0:rt.title)||"")}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(y.Dx),p.Y36(hn.d))},D.\u0275cmp=p.Xpm({type:D,selectors:[["app-root"]],decls:1,vars:0,template:function(f,S){1&f&&p._UZ(0,"app-primary-navig")},directives:[Hs],styles:[""]}),D})();var sn=m(40520),Nr=m(49770),Et=m(91314);let Cn=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[O.ez,H.BQ,v.Q8],H.BQ]}),D})();var Qn=m(63900),po=m(18505),or=m(91005);const ji={provide:new p.OlP("mat-autocomplete-scroll-strategy"),deps:[Et.aV],useFactory:function(D){return()=>D.scrollStrategies.reposition()}};let Fr=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({providers:[ji],imports:[[Et.U8,H.Ng,H.BQ,O.ez],dt.ZD,H.Ng,H.BQ]}),D})(),gs=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[c.rt,H.BQ],H.BQ]}),D})(),aa=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[Et.U8,H.BQ,R.eL],H.BQ]}),D})(),Ia=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[H.BQ,H.si],H.BQ]}),D})(),ja=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[H.BQ],H.BQ]}),D})(),Os=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({}),D})(),as=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[H.si,H.BQ,v.Q8,Os],H.BQ,Os]}),D})();const jc=new p.OlP("mat-chips-default-options");let zl=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({providers:[H.rD,{provide:jc,useValue:{separatorKeyCodes:[Rt.K5]}}],imports:[[H.BQ]]}),D})(),xa=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[bt.vT]]}),D})(),_s=(()=>{class D{constructor(){this.changes=new G.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return D.\u0275fac=function(f){return new(f||D)},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const El={provide:_s,deps:[[new p.FiY,new p.tp0,_s]],useFactory:function(D){return D||new _s}};let Du=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({providers:[El,H.rD],imports:[[H.BQ,O.ez,R.eL,o.ot,xa,s.Ps,H.si],H.BQ]}),D})(),wc=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[mt.ud]]}),D})(),ul=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({providers:[H.rD],imports:[[wc,Cn,H.BQ],wc,Cn]}),D})(),dh=(()=>{class D{constructor(){this.changes=new G.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(f,S){return`${f} \u2013 ${S}`}}return D.\u0275fac=function(f){return new(f||D)},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const ur={provide:new p.OlP("mat-datepicker-scroll-strategy"),deps:[Et.aV],useFactory:function(D){return()=>D.scrollStrategies.reposition()}};let Hu=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({providers:[dh,ur],imports:[[O.ez,o.ot,Et.U8,c.rt,R.eL,H.BQ],dt.ZD]}),D})();function Qh(D,k){}class Ic{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const Vu={dialogContainer:(0,ct.X$)("dialogContainer",[(0,ct.SB)("void, exit",(0,ct.oB)({opacity:0,transform:"scale(0.7)"})),(0,ct.SB)("enter",(0,ct.oB)({transform:"none"})),(0,ct.eR)("* => enter",(0,ct.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,ct.oB)({transform:"none",opacity:1}))),(0,ct.eR)("* => void, * => exit",(0,ct.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,ct.oB)({opacity:0})))])};let iu=(()=>{class D extends R.en{constructor(f,S,B,rt,ee,Ye,di,en){super(),this._elementRef=f,this._focusTrapFactory=S,this._changeDetectorRef=B,this._config=ee,this._interactivityChecker=Ye,this._ngZone=di,this._focusMonitor=en,this._animationStateChanged=new p.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=Li=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(Li)),this._ariaLabelledBy=ee.ariaLabelledBy||null,this._document=rt}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(f){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(f)}attachTemplatePortal(f){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(f)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(f,S){this._interactivityChecker.isFocusable(f)||(f.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{f.addEventListener("blur",()=>f.removeAttribute("tabindex")),f.addEventListener("mousedown",()=>f.removeAttribute("tabindex"))})),f.focus(S)}_focusByCssSelector(f,S){let B=this._elementRef.nativeElement.querySelector(f);B&&this._forceFocus(B,S)}_trapFocus(){const f=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||f.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(S=>{S||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const f=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&f&&"function"==typeof f.focus){const S=(0,mt.ht)(),B=this._elementRef.nativeElement;(!S||S===this._document.body||S===B||B.contains(S))&&(this._focusMonitor?(this._focusMonitor.focusVia(f,this._closeInteractionType),this._closeInteractionType=null):f.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,mt.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const f=this._elementRef.nativeElement,S=(0,mt.ht)();return f===S||f.contains(S)}}return D.\u0275fac=function(f){return new(f||D)(p.Y36(p.SBq),p.Y36(c.qV),p.Y36(p.sBO),p.Y36(O.K0,8),p.Y36(Ic),p.Y36(c.ic),p.Y36(p.R0b),p.Y36(c.tE))},D.\u0275dir=p.lG2({type:D,viewQuery:function(f,S){if(1&f&&p.Gf(R.Pl,7),2&f){let B;p.iGM(B=p.CRH())&&(S._portalOutlet=B.first)}},features:[p.qOj]}),D})(),Uu=(()=>{class D extends iu{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:f,totalTime:S}){"enter"===f?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:S})):"exit"===f&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:S}))}_onAnimationStart({toState:f,totalTime:S}){"enter"===f?this._animationStateChanged.next({state:"opening",totalTime:S}):("exit"===f||"void"===f)&&this._animationStateChanged.next({state:"closing",totalTime:S})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return D.\u0275fac=function(){let k;return function(S){return(k||(k=p.n5z(D)))(S||D)}}(),D.\u0275cmp=p.Xpm({type:D,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(f,S){1&f&&p.WFA("@dialogContainer.start",function(rt){return S._onAnimationStart(rt)})("@dialogContainer.done",function(rt){return S._onAnimationDone(rt)}),2&f&&(p.Ikx("id",S._id),p.uIk("role",S._config.role)("aria-labelledby",S._config.ariaLabel?null:S._ariaLabelledBy)("aria-label",S._config.ariaLabel)("aria-describedby",S._config.ariaDescribedBy||null),p.d8E("@dialogContainer",S._state))},features:[p.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(f,S){1&f&&p.YNc(0,Qh,0,0,"ng-template",0)},directives:[R.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Vu.dialogContainer]}}),D})(),Gu=0;class td{constructor(k,f,S="mat-dialog-"+Gu++){this._overlayRef=k,this._containerInstance=f,this.id=S,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new G.x,this._afterClosed=new G.x,this._beforeClosed=new G.x,this._state=0,f._id=S,f._animationStateChanged.pipe((0,Pn.h)(B=>"opened"===B.state),(0,Ji.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),f._animationStateChanged.pipe((0,Pn.h)(B=>"closed"===B.state),(0,Ji.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),k.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),k.keydownEvents().pipe((0,Pn.h)(B=>B.keyCode===Rt.hY&&!this.disableClose&&!(0,Rt.Vb)(B))).subscribe(B=>{B.preventDefault(),nc(this,"keyboard")}),k.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():nc(this,"mouse")})}close(k){this._result=k,this._containerInstance._animationStateChanged.pipe((0,Pn.h)(f=>"closing"===f.state),(0,Ji.q)(1)).subscribe(f=>{this._beforeClosed.next(k),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),f.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(k){let f=this._getPositionStrategy();return k&&(k.left||k.right)?k.left?f.left(k.left):f.right(k.right):f.centerHorizontally(),k&&(k.top||k.bottom)?k.top?f.top(k.top):f.bottom(k.bottom):f.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(k="",f=""){return this._overlayRef.updateSize({width:k,height:f}),this._overlayRef.updatePosition(),this}addPanelClass(k){return this._overlayRef.addPanelClass(k),this}removePanelClass(k){return this._overlayRef.removePanelClass(k),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function nc(D,k,f){return void 0!==D._containerInstance&&(D._containerInstance._closeInteractionType=k),D.close(f)}const Wu=new p.OlP("MatDialogData"),ju=new p.OlP("mat-dialog-default-options"),nu=new p.OlP("mat-dialog-scroll-strategy"),su={provide:nu,deps:[Et.aV],useFactory:function(D){return()=>D.scrollStrategies.block()}};let Vd=(()=>{class D{constructor(f,S,B,rt,ee,Ye,di,en,Li,Xn){this._overlay=f,this._injector=S,this._defaultOptions=B,this._parentDialog=rt,this._overlayContainer=ee,this._dialogRefConstructor=di,this._dialogContainerType=en,this._dialogDataToken=Li,this._animationMode=Xn,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new G.x,this._afterOpenedAtThisLevel=new G.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=(0,Nr.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,yt.O)(void 0))),this._scrollStrategy=Ye}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const f=this._parentDialog;return f?f._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(f,S){if(S=function(D,k){return Object.assign(Object.assign({},k),D)}(S,this._defaultOptions||new Ic),S.id&&this.getDialogById(S.id),this._dialogAnimatingOpen)return this._lastDialogRef;const B=this._createOverlay(S),rt=this._attachDialogContainer(B,S);if("NoopAnimations"!==this._animationMode){const Ye=rt._animationStateChanged.subscribe(di=>{"opening"===di.state&&(this._dialogAnimatingOpen=!0),"opened"===di.state&&(this._dialogAnimatingOpen=!1,Ye.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new Z.w0),this._animationStateSubscriptions.add(Ye)}const ee=this._attachDialogContent(f,rt,B,S);return this._lastDialogRef=ee,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(ee),ee.afterClosed().subscribe(()=>this._removeOpenDialog(ee)),this.afterOpened.next(ee),rt._initializeWithAttachedContent(),ee}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(f){return this.openDialogs.find(S=>S.id===f)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(f){const S=this._getOverlayConfig(f);return this._overlay.create(S)}_getOverlayConfig(f){const S=new Et.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:f.scrollStrategy||this._scrollStrategy(),panelClass:f.panelClass,hasBackdrop:f.hasBackdrop,direction:f.direction,minWidth:f.minWidth,minHeight:f.minHeight,maxWidth:f.maxWidth,maxHeight:f.maxHeight,disposeOnNavigation:f.closeOnNavigation});return f.backdropClass&&(S.backdropClass=f.backdropClass),S}_attachDialogContainer(f,S){const rt=p.zs3.create({parent:S&&S.viewContainerRef&&S.viewContainerRef.injector||this._injector,providers:[{provide:Ic,useValue:S}]}),ee=new R.C5(this._dialogContainerType,S.viewContainerRef,rt,S.componentFactoryResolver);return f.attach(ee).instance}_attachDialogContent(f,S,B,rt){const ee=new this._dialogRefConstructor(B,S,rt.id);if(f instanceof p.Rgc)S.attachTemplatePortal(new R.UE(f,null,{$implicit:rt.data,dialogRef:ee}));else{const Ye=this._createInjector(rt,ee,S),di=S.attachComponentPortal(new R.C5(f,rt.viewContainerRef,Ye));ee.componentInstance=di.instance}return ee.updateSize(rt.width,rt.height).updatePosition(rt.position),ee}_createInjector(f,S,B){const rt=f&&f.viewContainerRef&&f.viewContainerRef.injector,ee=[{provide:this._dialogContainerType,useValue:B},{provide:this._dialogDataToken,useValue:f.data},{provide:this._dialogRefConstructor,useValue:S}];return f.direction&&(!rt||!rt.get(bt.Is,null,p.XFs.Optional))&&ee.push({provide:bt.Is,useValue:{value:f.direction,change:(0,it.of)()}}),p.zs3.create({parent:rt||this._injector,providers:ee})}_removeOpenDialog(f){const S=this.openDialogs.indexOf(f);S>-1&&(this.openDialogs.splice(S,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((B,rt)=>{B?rt.setAttribute("aria-hidden",B):rt.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const f=this._overlayContainer.getContainerElement();if(f.parentElement){const S=f.parentElement.children;for(let B=S.length-1;B>-1;B--){let rt=S[B];rt!==f&&"SCRIPT"!==rt.nodeName&&"STYLE"!==rt.nodeName&&!rt.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(rt,rt.getAttribute("aria-hidden")),rt.setAttribute("aria-hidden","true"))}}}_closeDialogs(f){let S=f.length;for(;S--;)f[S].close()}}return D.\u0275fac=function(f){p.$Z()},D.\u0275dir=p.lG2({type:D}),D})(),Mc=(()=>{class D extends Vd{constructor(f,S,B,rt,ee,Ye,di,en){super(f,S,rt,Ye,di,ee,td,Uu,Wu,en)}}return D.\u0275fac=function(f){return new(f||D)(p.LFG(Et.aV),p.LFG(p.zs3),p.LFG(O.Ye,8),p.LFG(ju,8),p.LFG(nu),p.LFG(D,12),p.LFG(Et.Xj),p.LFG(V.Qb,8))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac}),D})(),_h=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({providers:[Mc,su],imports:[[Et.U8,R.eL,H.BQ],H.BQ]}),D})();var od=m(43954);const lu={provide:new p.OlP("mat-select-scroll-strategy"),deps:[Et.aV],useFactory:function(D){return()=>D.scrollStrategies.reposition()}};let rr=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({providers:[lu],imports:[[O.ez,Et.U8,H.Ng,H.BQ],dt.ZD,Cn,H.Ng,H.BQ]}),D})();const jt={provide:new p.OlP("mat-tooltip-scroll-strategy"),deps:[Et.aV],useFactory:function(D){return()=>D.scrollStrategies.reposition({scrollThrottle:20})}};let Ci=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({providers:[jt],imports:[[c.rt,O.ez,Et.U8,H.BQ],H.BQ,dt.ZD]}),D})(),wn=(()=>{class D{constructor(){this.changes=new G.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(f,S,B)=>{if(0==B||0==S)return`0 of ${B}`;const rt=f*S;return`${rt+1} \u2013 ${rt<(B=Math.max(B,0))?Math.min(rt+S,B):rt+S} of ${B}`}}}return D.\u0275fac=function(f){return new(f||D)},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const Ao={provide:wn,deps:[[new p.FiY,new p.tp0,wn]],useFactory:function(D){return D||new wn}};let Qr=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({providers:[Ao],imports:[[O.ez,o.ot,rr,Ci,H.BQ]]}),D})(),Ps=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[O.ez,H.BQ],H.BQ]}),D})();var Xu=m(20773);let Ol=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[H.si,H.BQ],H.BQ]}),D})(),qd=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[O.ez,H.BQ],H.BQ]}),D})(),Jp=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({}),D})(),Vf=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[Jp,H.si,H.BQ,v.Q8],Jp,H.BQ]}),D})();var Uf=m(57261);let $u=(()=>{class D{constructor(){this.changes=new G.x}}return D.\u0275fac=function(f){return new(f||D)},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const rc={provide:$u,deps:[[new p.FiY,new p.tp0,$u]],useFactory:function(D){return D||new $u}};let ef=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({providers:[rc],imports:[[O.ez,H.BQ]]}),D})();var xl=m(32076),Zu=(m(61135),m(79307)),kl=m(30576);let mp=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[dt.Cl]]}),D})(),Cp=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[mp,H.BQ],H.BQ]}),D})(),Si=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({}),D})(),Yi=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({imports:[[Si,H.BQ],H.BQ]}),D})();var Ho=m(8704),Hc=m(62843),Ai=m(97272),gn=m(25032);const uo=new Zu.y(gn.Z);var Fl=m(94033),Bl=m(54482);const Ko={connector:()=>new G.x};function _a(D,k=Ko){const{connector:f}=k;return(0,Bl.e)((S,B)=>{const rt=f();(0,xl.D)(D(function(D){return new Zu.y(k=>D.subscribe(k))}(rt))).subscribe(B),B.add(S.subscribe(rt))})}const xd="Service workers are disabled or not supported by this browser";class Sp{constructor(k){if(this.serviceWorker=k,k){const S=(0,vt.R)(k,"controllerchange").pipe((0,Nn.U)(()=>k.controller)),B=(0,Nr.P)(()=>(0,it.of)(k.controller)),rt=(0,Ai.z)(B,S);this.worker=rt.pipe((0,Pn.h)(Li=>!!Li)),this.registration=this.worker.pipe((0,Qn.w)(()=>k.getRegistration()));const en=(0,vt.R)(k,"message").pipe((0,Nn.U)(Li=>Li.data)).pipe((0,Pn.h)(Li=>Li&&Li.type)).pipe(function(D){return D?k=>_a(D)(k):k=>function(D,k){const f=(0,kl.m)(D)?D:()=>D;return(0,kl.m)(k)?_a(k,{connector:f}):S=>new Fl.c(S,f)}(new G.x)(k)}());en.connect(),this.events=en}else this.worker=this.events=this.registration=(xd,(0,Nr.P)(()=>(0,Hc._)(new Error("Service workers are disabled or not supported by this browser"))))}postMessage(k,f){return this.worker.pipe((0,Ji.q)(1),(0,po.b)(S=>{S.postMessage(Object.assign({action:k},f))})).toPromise().then(()=>{})}postMessageWithOperation(k,f,S){const B=this.waitForOperationCompleted(S),rt=this.postMessage(k,f);return Promise.all([rt,B]).then(([,ee])=>ee)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(k){let f;return f="string"==typeof k?S=>S.type===k:S=>k.includes(S.type),this.events.pipe((0,Pn.h)(f))}nextEventOfType(k){return this.eventsOfType(k).pipe((0,Ji.q)(1))}waitForOperationCompleted(k){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,Pn.h)(f=>f.nonce===k),(0,Ji.q)(1),(0,Nn.U)(f=>{if(void 0!==f.result)return f.result;throw new Error(f.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let wp=(()=>{class D{constructor(f){if(this.sw=f,this.subscriptionChanges=new G.x,!f.isEnabled)return this.messages=uo,this.notificationClicks=uo,void(this.subscription=uo);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Nn.U)(B=>B.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Nn.U)(B=>B.data)),this.pushManager=this.sw.registration.pipe((0,Nn.U)(B=>B.pushManager));const S=this.pushManager.pipe((0,Qn.w)(B=>B.getSubscription()));this.subscription=(0,ot.T)(S,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(f){if(!this.sw.isEnabled)return Promise.reject(new Error(xd));const S={userVisibleOnly:!0};let B=this.decodeBase64(f.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),rt=new Uint8Array(new ArrayBuffer(B.length));for(let ee=0;ee<B.length;ee++)rt[ee]=B.charCodeAt(ee);return S.applicationServerKey=rt,this.pushManager.pipe((0,Qn.w)(ee=>ee.subscribe(S)),(0,Ji.q)(1)).toPromise().then(ee=>(this.subscriptionChanges.next(ee),ee))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Ji.q)(1),(0,Qn.w)(S=>{if(null===S)throw new Error("Not subscribed to push notifications.");return S.unsubscribe().then(B=>{if(!B)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(xd))}decodeBase64(f){return atob(f)}}return D.\u0275fac=function(f){return new(f||D)(p.LFG(Sp))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac}),D})(),Vh=(()=>{class D{constructor(f){if(this.sw=f,!f.isEnabled)return this.versionUpdates=uo,this.available=uo,this.activated=uo,void(this.unrecoverable=uo);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe((0,Pn.h)(S=>"VERSION_READY"===S.type),(0,Nn.U)(S=>({type:"UPDATE_AVAILABLE",current:S.currentVersion,available:S.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(xd));const f=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:f},f)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(xd));const f=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:f},f)}}return D.\u0275fac=function(f){return new(f||D)(p.LFG(Sp))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac}),D})();class _f{}const Uh=new p.OlP("NGSW_REGISTER_SCRIPT");function wg(D,k,f,S){return()=>{if(!(0,O.NF)(S)||!("serviceWorker"in navigator)||!1===f.enabled)return;let rt;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof f.registrationStrategy)rt=f.registrationStrategy();else{const[Ye,...di]=(f.registrationStrategy||"registerWhenStable:30000").split(":");switch(Ye){case"registerImmediately":rt=(0,it.of)(null);break;case"registerWithDelay":rt=Qf(+di[0]||0);break;case"registerWhenStable":rt=di[0]?(0,ot.T)(Rp(D),Qf(+di[0])):Rp(D);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${f.registrationStrategy}`)}}D.get(p.R0b).runOutsideAngular(()=>rt.pipe((0,Ji.q)(1)).subscribe(()=>navigator.serviceWorker.register(k,{scope:f.scope}).catch(Ye=>console.error("Service worker registration failed with:",Ye))))}}function Qf(D){return(0,it.of)(null).pipe((0,or.g)(D))}function Rp(D){return D.get(p.z2F).isStable.pipe((0,Pn.h)(f=>f))}function ac(D,k){return new Sp((0,O.NF)(k)&&!1!==D.enabled?navigator.serviceWorker:void 0)}let kd=(()=>{class D{static register(f,S={}){return{ngModule:D,providers:[{provide:Uh,useValue:f},{provide:_f,useValue:S},{provide:Sp,useFactory:ac,deps:[_f,p.Lbi]},{provide:p.ip1,useFactory:wg,deps:[p.zs3,Uh,_f,p.Lbi],multi:!0}]}}}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D}),D.\u0275inj=p.cJS({providers:[wp,Vh]}),D})();let rh=(()=>{class D{}return D.\u0275fac=function(f){return new(f||D)},D.\u0275mod=p.oAB({type:D,bootstrap:[$n]}),D.\u0275inj=p.cJS({providers:[hn.d,Ar.v,{provide:p.ip1,useFactory:Dp,deps:[hn.d],multi:!0}],imports:[[y.b2,Xi,e.u5,V.PW,qd,o.ot,sn.JF,Fr,gs,aa,o.ot,Ia,ja,as,zl,Du,Hu,_h,us,Jn.To,od.N6,s.Ps,ul,kr,fr.Tx,H.XK,Qr,Ps,Xu.Cq,Ol,H.si,rr,En,qd,Vf,Uf.ZX,ef,Cp,ti,_r,Ci,Yi,_r,o.ot,En,s.Ps,kr,Ho.nm.forRoot(),kd.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]]}),D})();function Dp(D){return()=>D.Init()}(0,p.G48)(),y.q6().bootstrapModule(rh).catch(D=>console.error(D))},86931:function(L,W,m){var p,e;p=[m(81069)],void 0!==(e=function(t){"use strict";return t}.apply(W,p))&&(L.exports=e)},81069:function(L,W){var p;void 0!==(p=function(){"use strict";var e={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return e.CONNECTING_SNAP_RADIUS=e.SNAP_RADIUS,e.CURRENT_CONNECTION_PREFERENCE=8,e.BUMP_DELAY=250,e.BUMP_RANDOMNESS=10,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.connectionTypes.INPUT_VALUE]=e.connectionTypes.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.OUTPUT_VALUE]=e.connectionTypes.INPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.NEXT_STATEMENT]=e.connectionTypes.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.connectionTypes.PREVIOUS_STATEMENT]=e.connectionTypes.NEXT_STATEMENT,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",e.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",e.utils={},e.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),e.Msg={},e.utils.global.Blockly||(e.utils.global.Blockly={}),e.utils.global.Blockly.Msg||(e.utils.global.Blockly.Msg=e.Msg),e.utils.colour={},e.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var n=e.utils.colour.names[t];if(n||(n="0x"==t.substring(0,2)?"#"+t.substring(2):t,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var o=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(t=Number(o[1]),n=Number(o[2]),o=Number(o[3]),0<=t&&256>t&&0<=n&&256>n&&0<=o&&256>o)?e.utils.colour.rgbToHex(t,n,o):null},e.utils.colour.rgbToHex=function(t,n,o){return n=t<<16|n<<8|o,16>t?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},e.utils.colour.hexToRgb=function(t){return(t=e.utils.colour.parse(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},e.utils.colour.hsvToHex=function(t,n,o){var s=0,c=0,v=0;if(0==n)v=c=s=o;else{var R=Math.floor(t/60),O=t/60-R;t=o*(1-n);var H=o*(1-n*O);switch(n=o*(1-n*(1-O)),R){case 1:s=H,c=o,v=t;break;case 2:s=t,c=o,v=n;break;case 3:s=t,c=H,v=o;break;case 4:s=n,c=t,v=o;break;case 5:s=o,c=t,v=H;break;case 6:case 0:s=o,c=n,v=t}}return e.utils.colour.rgbToHex(Math.floor(s),Math.floor(c),Math.floor(v))},e.utils.colour.blend=function(t,n,o){return(t=e.utils.colour.parse(t))&&(n=e.utils.colour.parse(n))?(t=e.utils.colour.hexToRgb(t),n=e.utils.colour.hexToRgb(n),e.utils.colour.rgbToHex(Math.round(n[0]+o*(t[0]-n[0])),Math.round(n[1]+o*(t[1]-n[1])),Math.round(n[2]+o*(t[2]-n[2])))):null},e.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},e.utils.Coordinate=function(t,n){this.x=t,this.y=n},e.utils.Coordinate.equals=function(t,n){return t==n||!(!t||!n)&&t.x==n.x&&t.y==n.y},e.utils.Coordinate.distance=function(t,n){var o=t.x-n.x;return t=t.y-n.y,Math.sqrt(o*o+t*t)},e.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.utils.Coordinate.difference=function(t,n){return new e.utils.Coordinate(t.x-n.x,t.y-n.y)},e.utils.Coordinate.sum=function(t,n){return new e.utils.Coordinate(t.x+n.x,t.y+n.y)},e.utils.Coordinate.prototype.clone=function(){return new e.utils.Coordinate(this.x,this.y)},e.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},e.utils.Coordinate.prototype.translate=function(t,n){return this.x+=t,this.y+=n,this},e.utils.Rect=function(t,n,o,s){this.top=t,this.bottom=n,this.left=o,this.right=s},e.utils.Rect.prototype.contains=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},e.utils.string={},e.utils.string.startsWith=function(t,n){return 0==t.lastIndexOf(n,0)},e.utils.string.shortestStringLength=function(t){return t.length?t.reduce(function(n,o){return n.length<o.length?n:o}).length:0},e.utils.string.commonWordPrefix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var o=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var c=t[0][s],v=1;v<t.length;v++)if(c!=t[v][s])return o;" "==c&&(o=s+1)}for(v=1;v<t.length;v++)if((c=t[v][s])&&" "!=c)return o;return n},e.utils.string.commonWordSuffix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var o=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var c=t[0].substr(-s-1,1),v=1;v<t.length;v++)if(c!=t[v].substr(-s-1,1))return o;" "==c&&(o=s+1)}for(v=1;v<t.length;v++)if((c=t[v].charAt(t[v].length-s-1))&&" "!=c)return o;return n},e.utils.string.wrap=function(t,n){t=t.split("\n");for(var o=0;o<t.length;o++)t[o]=e.utils.string.wrapLine_(t[o],n);return t.join("\n")},e.utils.string.wrapLine_=function(t,n){if(t.length<=n)return t;for(var o=t.trim().split(/\s+/),s=0;s<o.length;s++)o[s].length>n&&(n=o[s].length);s=-1/0;var c=1;do{var v=s,R=t;t=[];var O=o.length/c,H=1;for(s=0;s<o.length-1;s++)H<(s+1.5)/O?(H++,t[s]=!0):t[s]=!1;t=e.utils.string.wrapMutate_(o,t,n),s=e.utils.string.wrapScore_(o,t,n),t=e.utils.string.wrapToText_(o,t),c++}while(s>v);return R},e.utils.string.wrapScore_=function(t,n,o){for(var s=[0],c=[],v=0;v<t.length;v++)s[s.length-1]+=t[v].length,!0===n[v]?(s.push(0),c.push(t[v].charAt(t[v].length-1))):!1===n[v]&&s[s.length-1]++;for(t=Math.max.apply(Math,s),v=n=0;v<s.length;v++)n-=2*Math.pow(Math.abs(o-s[v]),1.5),n-=Math.pow(t-s[v],1.5),-1!=".?!".indexOf(c[v])?n+=o/3:-1!=",;)]}".indexOf(c[v])&&(n+=o/4);return 1<s.length&&s[s.length-1]<=s[s.length-2]&&(n+=.5),n},e.utils.string.wrapMutate_=function(t,n,o){for(var c,s=e.utils.string.wrapScore_(t,n,o),v=0;v<n.length-1;v++)if(n[v]!=n[v+1]){var R=[].concat(n);R[v]=!R[v],R[v+1]=!R[v+1];var O=e.utils.string.wrapScore_(t,R,o);O>s&&(s=O,c=R)}return c?e.utils.string.wrapMutate_(t,c,o):n},e.utils.string.wrapToText_=function(t,n){for(var o=[],s=0;s<t.length;s++)o.push(t[s]),void 0!==n[s]&&o.push(n[s]?"\n":" ");return o.join("")},e.utils.Size=function(t,n){this.width=t,this.height=n},e.utils.Size.equals=function(t,n){return t==n||!(!t||!n)&&t.width==n.width&&t.height==n.height},e.utils.style={},e.utils.style.getSize=function(t){if("none"!=e.utils.style.getStyle_(t,"display"))return e.utils.style.getSizeWithDisplay_(t);var n=t.style,o=n.display,s=n.visibility,c=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var v=t.offsetWidth;return t=t.offsetHeight,n.display=o,n.position=c,n.visibility=s,new e.utils.Size(v,t)},e.utils.style.getSizeWithDisplay_=function(t){return new e.utils.Size(t.offsetWidth,t.offsetHeight)},e.utils.style.getStyle_=function(t,n){return e.utils.style.getComputedStyle(t,n)||e.utils.style.getCascadedStyle(t,n)||t.style&&t.style[n]},e.utils.style.getComputedStyle=function(t,n){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[n]||t.getPropertyValue(n))||""},e.utils.style.getCascadedStyle=function(t,n){return t.currentStyle?t.currentStyle[n]:null},e.utils.style.getPageOffset=function(t){var n=new e.utils.Coordinate(0,0);t=t.getBoundingClientRect();var o=document.documentElement;return o=new e.utils.Coordinate(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),n.x=t.left+o.x,n.y=t.top+o.y,n},e.utils.style.getViewportPageOffset=function(){var t=document.body,n=document.documentElement;return new e.utils.Coordinate(t.scrollLeft||n.scrollLeft,t.scrollTop||n.scrollTop)},e.utils.style.setElementShown=function(t,n){t.style.display=n?"":"none"},e.utils.style.isRightToLeft=function(t){return"rtl"==e.utils.style.getStyle_(t,"direction")},e.utils.style.getBorderBox=function(t){var n=e.utils.style.getComputedStyle(t,"borderLeftWidth"),o=e.utils.style.getComputedStyle(t,"borderRightWidth"),s=e.utils.style.getComputedStyle(t,"borderTopWidth");return t=e.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(s),right:parseFloat(o),bottom:parseFloat(t),left:parseFloat(n)}},e.utils.style.scrollIntoContainerView=function(t,n,o){t=e.utils.style.getContainerOffsetToScrollInto(t,n,o),n.scrollLeft=t.x,n.scrollTop=t.y},e.utils.style.getContainerOffsetToScrollInto=function(t,n,o){var s=e.utils.style.getPageOffset(t),c=e.utils.style.getPageOffset(n),v=e.utils.style.getBorderBox(n),R=s.x-c.x-v.left;return s=s.y-c.y-v.top,c=e.utils.style.getSizeWithDisplay_(t),t=n.clientWidth-c.width,c=n.clientHeight-c.height,v=n.scrollLeft,n=n.scrollTop,o?(v+=R-t/2,n+=s-c/2):(v+=Math.min(R,Math.max(R-t,0)),n+=Math.min(s,Math.max(s-c,0))),new e.utils.Coordinate(v,n)},e.utils.userAgent={},function(t){function n(s){return-1!=o.indexOf(s.toUpperCase())}e.utils.userAgent.raw=t;var o=e.utils.userAgent.raw.toUpperCase();e.utils.userAgent.IE=n("Trident")||n("MSIE"),e.utils.userAgent.EDGE=n("Edge"),e.utils.userAgent.JAVA_FX=n("JavaFX"),e.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!e.utils.userAgent.EDGE,e.utils.userAgent.WEBKIT=n("WebKit")&&!e.utils.userAgent.EDGE,e.utils.userAgent.GECKO=n("Gecko")&&!e.utils.userAgent.WEBKIT&&!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,e.utils.userAgent.ANDROID=n("Android"),t=e.utils.global.navigator&&e.utils.global.navigator.maxTouchPoints,e.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<t,e.utils.userAgent.IPOD=n("iPod"),e.utils.userAgent.IPHONE=n("iPhone")&&!e.utils.userAgent.IPAD&&!e.utils.userAgent.IPOD,e.utils.userAgent.MAC=n("Macintosh"),e.utils.userAgent.TABLET=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),e.utils.userAgent.MOBILE=!e.utils.userAgent.TABLET&&(e.utils.userAgent.IPOD||e.utils.userAgent.IPHONE||e.utils.userAgent.ANDROID||n("IEMobile"))}(e.utils.global.navigator&&e.utils.global.navigator.userAgent||""),e.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},e.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},e.utils.getRelativeXY=function(t){var n=new e.utils.Coordinate(0,0),o=t.getAttribute("x");return o&&(n.x=parseInt(o,10)),(o=t.getAttribute("y"))&&(n.y=parseInt(o,10)),(o=(o=t.getAttribute("transform"))&&o.match(e.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(o[1]),o[3]&&(n.y+=Number(o[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(e.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(t[1]),t[3]&&(n.y+=Number(t[3]))),n},e.utils.getInjectionDivXY_=function(t){for(var n=0,o=0;t;){var s=e.utils.getRelativeXY(t);if(n+=s.x,o+=s.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new e.utils.Coordinate(n,o)},e.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,e.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,e.utils.isRightButton=function(t){return!(!t.ctrlKey||!e.utils.userAgent.MAC)||2==t.button},e.utils.mouseToSvg=function(t,n,o){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,o||(o=n.getScreenCTM().inverse()),s.matrixTransform(o)},e.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*e.LINE_MODE_MULTIPLIER,y:t.deltaY*e.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*e.PAGE_MODE_MULTIPLIER,y:t.deltaY*e.PAGE_MODE_MULTIPLIER}}},e.utils.tokenizeInterpolation=function(t){return e.utils.tokenizeInterpolation_(t,!0)},e.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=e.utils.tokenizeInterpolation_(t,!1)).length?String(t[0]):""},e.utils.checkMessageReferences=function(t){for(var n=!0,o=e.Msg,s=t.match(/%{BKY_[A-Z]\w*}/gi),c=0;c<s.length;c++)null==o[s[c].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+s[c]+" in "+t),n=!1);return n},e.utils.tokenizeInterpolation_=function(t,n){var o=[],s=t.split("");s.push("");var c=0;t=[];for(var v=null,R=0;R<s.length;R++){var O=s[R];0==c?"%"==O?((O=t.join(""))&&o.push(O),t.length=0,c=1):t.push(O):1==c?"%"==O?(t.push(O),c=0):n&&"0"<=O&&"9">=O?(c=2,v=O,(O=t.join(""))&&o.push(O),t.length=0):"{"==O?c=3:(t.push("%",O),c=0):2==c?"0"<=O&&"9">=O?v+=O:(o.push(parseInt(v,10)),R--,c=0):3==c&&(""==O?(t.splice(0,0,"%{"),R--,c=0):"}"!=O?t.push(O):(c=t.join(""),/[A-Z]\w*/i.test(c)?(O=c.toUpperCase(),(O=e.utils.string.startsWith(O,"BKY_")?O.substring(4):null)&&O in e.Msg?"string"==typeof(c=e.Msg[O])?Array.prototype.push.apply(o,e.utils.tokenizeInterpolation_(c,n)):o.push(n?String(c):c):o.push("%{"+c+"}")):o.push("%{"+c+"}"),c=t.length=0))}for((O=t.join(""))&&o.push(O),n=[],R=t.length=0;R<o.length;++R)"string"==typeof o[R]?t.push(o[R]):((O=t.join(""))&&n.push(O),t.length=0,n.push(o[R]));return(O=t.join(""))&&n.push(O),t.length=0,n},e.utils.genUid=function(){for(var t=e.utils.genUid.soup_.length,n=[],o=0;20>o;o++)n[o]=e.utils.genUid.soup_.charAt(Math.random()*t);return n.join("")},e.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.utils.is3dSupported=function(){if(void 0!==e.utils.is3dSupported.cached_)return e.utils.is3dSupported.cached_;if(!e.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),n="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var s in document.body.insertBefore(t,null),o)if(void 0!==t.style[s]){if(t.style[s]="translate3d(1px,1px,1px)",!(n=e.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(o[s])}return document.body.removeChild(t),e.utils.is3dSupported.cached_="none"!==n,e.utils.is3dSupported.cached_},e.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),t())},10)},e.utils.getViewportBBox=function(){var t=e.utils.style.getViewportPageOffset();return new e.utils.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},e.utils.arrayRemove=function(t,n){return-1!=(n=t.indexOf(n))&&(t.splice(n,1),!0)},e.utils.getDocumentScroll=function(){var t=document.documentElement,n=window;return e.utils.userAgent.IE&&n.pageYOffset!=t.scrollTop?new e.utils.Coordinate(t.scrollLeft,t.scrollTop):new e.utils.Coordinate(n.pageXOffset||t.scrollLeft,n.pageYOffset||t.scrollTop)},e.utils.getBlockTypeCounts=function(t,n){var o=Object.create(null),s=t.getDescendants(!0);for(n&&(t=t.getNextBlock())&&(t=s.indexOf(t),s.splice(t,s.length-t)),t=0;n=s[t];t++)o[n.type]?o[n.type]++:o[n.type]=1;return o},e.utils.screenToWsCoordinates=function(t,n){var o=n.x;n=n.y;var s=t.getInjectionDiv().getBoundingClientRect();return o=new e.utils.Coordinate(o-s.left,n-s.top),n=t.getOriginOffsetInPixels(),e.utils.Coordinate.difference(o,n).scale(1/t.scale)},e.utils.parseBlockColour=function(t){var n="string"==typeof t?e.utils.replaceMessageReferences(t):t,o=Number(n);if(!isNaN(o)&&0<=o&&360>=o)return{hue:o,hex:e.utils.colour.hsvToHex(o,e.HSV_SATURATION,255*e.HSV_VALUE)};if(o=e.utils.colour.parse(n))return{hue:null,hex:o};throw o='Invalid colour: "'+n+'"',t!=n&&(o+=' (from "'+t+'")'),Error(o)},e.Touch={},e.Touch.TOUCH_ENABLED="ontouchstart"in e.utils.global||!!(e.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!e.utils.global.navigator||!e.utils.global.navigator.maxTouchPoints&&!e.utils.global.navigator.msMaxTouchPoints),e.Touch.touchIdentifier_=null,e.Touch.TOUCH_MAP={},e.utils.global.PointerEvent?e.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:e.Touch.TOUCH_ENABLED&&(e.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),e.longPid_=0,e.longStart=function(t,n){e.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(e.longPid_=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n&&n.handleRightClick(t)},e.LONGPRESS))},e.longStop_=function(){e.longPid_&&(clearTimeout(e.longPid_),e.longPid_=0)},e.Touch.clearTouchIdentifier=function(){e.Touch.touchIdentifier_=null},e.Touch.shouldHandleEvent=function(t){return!e.Touch.isMouseOrTouchEvent(t)||e.Touch.checkTouchIdentifier(t)},e.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},e.Touch.checkTouchIdentifier=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);return null!=e.Touch.touchIdentifier_?e.Touch.touchIdentifier_==n:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(e.Touch.touchIdentifier_=n,!0)},e.Touch.setClientFromTouch=function(t){if(e.utils.string.startsWith(t.type,"touch")){var n=t.changedTouches[0];t.clientX=n.clientX,t.clientY=n.clientY}},e.Touch.isMouseOrTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"mouse")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.isTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.splitEventByTouches=function(t){var n=[];if(t.changedTouches)for(var o=0;o<t.changedTouches.length;o++)n[o]={type:t.type,changedTouches:[t.changedTouches[o]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else n.push(t);return n},e.browserEvents={},e.browserEvents.conditionalBind=function(t,n,o,s,c,v){var R=!1,O=function(vt){var it=!c;vt=e.Touch.splitEventByTouches(vt);for(var wt,ot=0;wt=vt[ot];ot++)(!it||e.Touch.shouldHandleEvent(wt))&&(e.Touch.setClientFromTouch(wt),o?s.call(o,wt):s(wt),R=!0)},H=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var G,V=0;G=e.Touch.TOUCH_MAP[n][V];V++)t.addEventListener(G,O,!1),H.push([t,G,O]);else if(t.addEventListener(n,O,!1),H.push([t,n,O]),n in e.Touch.TOUCH_MAP){var Z=function(vt){O(vt),R&&!v&&vt.preventDefault()};for(V=0;G=e.Touch.TOUCH_MAP[n][V];V++)t.addEventListener(G,Z,!1),H.push([t,G,Z])}return H},e.browserEvents.bind=function(t,n,o,s){var c=function(V){o?s.call(o,V):s(V)},v=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var O,R=0;O=e.Touch.TOUCH_MAP[n][R];R++)t.addEventListener(O,c,!1),v.push([t,O,c]);else if(t.addEventListener(n,c,!1),v.push([t,n,c]),n in e.Touch.TOUCH_MAP){var H=function(V){if(V.changedTouches&&1==V.changedTouches.length){var G=V.changedTouches[0];V.clientX=G.clientX,V.clientY=G.clientY}c(V),V.preventDefault()};for(R=0;O=e.Touch.TOUCH_MAP[n][R];R++)t.addEventListener(O,H,!1),v.push([t,O,H])}return v},e.browserEvents.unbind=function(t){for(;t.length;){var n=t.pop(),o=n[2];n[0].removeEventListener(n[1],o,!1)}return o},e.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},e.ComponentManager.prototype.addComponent=function(t,n){var o=t.component.id;if(!n&&this.componentData_[o])throw Error('Plugin "'+o+'" with capabilities "'+this.componentData_[o].capabilities+'" already added.');this.componentData_[o]=t,n=[];for(var s=0;s<t.capabilities.length;s++){var c=String(t.capabilities[s]).toLowerCase();n.push(c),void 0===this.capabilityToComponentIds_[c]?this.capabilityToComponentIds_[c]=[o]:this.capabilityToComponentIds_[c].push(o)}this.componentData_[o].capabilities=n},e.ComponentManager.prototype.removeComponent=function(t){var n=this.componentData_[t];if(n){for(var o=0;o<n.capabilities.length;o++){var s=String(n.capabilities[o]).toLowerCase();this.capabilityToComponentIds_[s].splice(this.capabilityToComponentIds_[s].indexOf(t),1)}delete this.componentData_[t]}},e.ComponentManager.prototype.addCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot add capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?console.warn('Plugin "'+t+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[t].capabilities.push(n),this.capabilityToComponentIds_[n].push(t))},e.ComponentManager.prototype.removeCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?(n=String(n).toLowerCase(),this.componentData_[t].capabilities.splice(this.componentData_[t].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(t),1)):console.warn('Plugin "'+t+"doesn't have capability \""+n+'" to remove')},e.ComponentManager.prototype.hasCapability=function(t,n){return n=String(n).toLowerCase(),-1!==this.componentData_[t].capabilities.indexOf(n)},e.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},e.ComponentManager.prototype.getComponents=function(t,n){if(t=String(t).toLowerCase(),!(t=this.capabilityToComponentIds_[t]))return[];var o=[];if(n){var s=[],c=this.componentData_;t.forEach(function(v){s.push(c[v])}),s.sort(function(v,R){return v.weight-R.weight}),s.forEach(function(v){o.push(v.component)})}else c=this.componentData_,t.forEach(function(v){o.push(c[v].component)});return o},e.ComponentManager.Capability=function(t){this.name_=t},e.ComponentManager.Capability.prototype.toString=function(){return this.name_},e.ComponentManager.Capability.POSITIONABLE=new e.ComponentManager.Capability("positionable"),e.ComponentManager.Capability.DRAG_TARGET=new e.ComponentManager.Capability("drag_target"),e.ComponentManager.Capability.DELETE_AREA=new e.ComponentManager.Capability("delete_area"),e.ComponentManager.Capability.AUTOHIDEABLE=new e.ComponentManager.Capability("autohideable"),e.utils.Svg=function(t){this.tagName_=t},e.utils.Svg.prototype.toString=function(){return this.tagName_},e.utils.Svg.ANIMATE=new e.utils.Svg("animate"),e.utils.Svg.CIRCLE=new e.utils.Svg("circle"),e.utils.Svg.CLIPPATH=new e.utils.Svg("clipPath"),e.utils.Svg.DEFS=new e.utils.Svg("defs"),e.utils.Svg.FECOMPOSITE=new e.utils.Svg("feComposite"),e.utils.Svg.FECOMPONENTTRANSFER=new e.utils.Svg("feComponentTransfer"),e.utils.Svg.FEFLOOD=new e.utils.Svg("feFlood"),e.utils.Svg.FEFUNCA=new e.utils.Svg("feFuncA"),e.utils.Svg.FEGAUSSIANBLUR=new e.utils.Svg("feGaussianBlur"),e.utils.Svg.FEPOINTLIGHT=new e.utils.Svg("fePointLight"),e.utils.Svg.FESPECULARLIGHTING=new e.utils.Svg("feSpecularLighting"),e.utils.Svg.FILTER=new e.utils.Svg("filter"),e.utils.Svg.FOREIGNOBJECT=new e.utils.Svg("foreignObject"),e.utils.Svg.G=new e.utils.Svg("g"),e.utils.Svg.IMAGE=new e.utils.Svg("image"),e.utils.Svg.LINE=new e.utils.Svg("line"),e.utils.Svg.PATH=new e.utils.Svg("path"),e.utils.Svg.PATTERN=new e.utils.Svg("pattern"),e.utils.Svg.POLYGON=new e.utils.Svg("polygon"),e.utils.Svg.RECT=new e.utils.Svg("rect"),e.utils.Svg.SVG=new e.utils.Svg("svg"),e.utils.Svg.TEXT=new e.utils.Svg("text"),e.utils.Svg.TSPAN=new e.utils.Svg("tspan"),e.utils.dom={},e.utils.dom.SVG_NS="http://www.w3.org/2000/svg",e.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",e.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",e.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},e.utils.dom.cacheWidths_=null,e.utils.dom.cacheReference_=0,e.utils.dom.canvasContext_=null,e.utils.dom.createSvgElement=function(t,n,o){for(var s in t=document.createElementNS(e.utils.dom.SVG_NS,String(t)),n)t.setAttribute(s,n[s]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),o&&o.appendChild(t),t},e.utils.dom.addClass=function(t,n){var o=t.getAttribute("class")||"";return-1==(" "+o+" ").indexOf(" "+n+" ")&&(o&&(o+=" "),t.setAttribute("class",o+n),!0)},e.utils.dom.removeClasses=function(t,n){n=n.split(" ");for(var o=0;o<n.length;o++)e.utils.dom.removeClass(t,n[o])},e.utils.dom.removeClass=function(t,n){var o=t.getAttribute("class");if(-1==(" "+o+" ").indexOf(" "+n+" "))return!1;o=o.split(/\s+/);for(var s=0;s<o.length;s++)o[s]&&o[s]!=n||(o.splice(s,1),s--);return o.length?t.setAttribute("class",o.join(" ")):t.removeAttribute("class"),!0},e.utils.dom.hasClass=function(t,n){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+n+" ")},e.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},e.utils.dom.insertAfter=function(t,n){var o=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");o?n.insertBefore(t,o):n.appendChild(t)},e.utils.dom.containsNode=function(t,n){return!!(t.compareDocumentPosition(n)&e.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},e.utils.dom.setCssTransform=function(t,n){t.style.transform=n,t.style["-webkit-transform"]=n},e.utils.dom.startTextWidthCache=function(){e.utils.dom.cacheReference_++,e.utils.dom.cacheWidths_||(e.utils.dom.cacheWidths_=Object.create(null))},e.utils.dom.stopTextWidthCache=function(){e.utils.dom.cacheReference_--,e.utils.dom.cacheReference_||(e.utils.dom.cacheWidths_=null)},e.utils.dom.getTextWidth=function(t){var o,n=t.textContent+"\n"+t.className.baseVal;if(e.utils.dom.cacheWidths_&&(o=e.utils.dom.cacheWidths_[n]))return o;try{o=e.utils.userAgent.IE||e.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(s){return 8*t.textContent.length}return e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[n]=o),o},e.utils.dom.getFastTextWidth=function(t,n,o,s){return e.utils.dom.getFastTextWidthWithSizeString(t,n+"pt",o,s)},e.utils.dom.getFastTextWidthWithSizeString=function(t,n,o,s){var v,c=t.textContent;return t=c+"\n"+t.className.baseVal,e.utils.dom.cacheWidths_&&(v=e.utils.dom.cacheWidths_[t])||(e.utils.dom.canvasContext_||((v=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(v),e.utils.dom.canvasContext_=v.getContext("2d")),e.utils.dom.canvasContext_.font=o+" "+n+" "+s,v=e.utils.dom.canvasContext_.measureText(c).width,e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[t]=v)),v},e.utils.dom.measureFontMetrics=function(t,n,o,s){var c=document.createElement("span");c.style.font=o+" "+n+" "+s,c.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(c),n.appendChild(t),document.body.appendChild(n);try{o={},n.style.alignItems="baseline",o.baseline=t.offsetTop-c.offsetTop,n.style.alignItems="flex-end",o.height=t.offsetTop-c.offsetTop}finally{document.body.removeChild(n)}return o},e.utils.math={},e.utils.math.toRadians=function(t){return t*Math.PI/180},e.utils.math.toDegrees=function(t){return 180*t/Math.PI},e.utils.math.clamp=function(t,n,o){if(o<t){var s=o;o=t,t=s}return Math.max(t,Math.min(n,o))},e.DropDownDiv=function(){},e.DropDownDiv.boundsElement_=null,e.DropDownDiv.owner_=null,e.DropDownDiv.positionToField_=null,e.DropDownDiv.ARROW_SIZE=16,e.DropDownDiv.BORDER_SIZE=1,e.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,e.DropDownDiv.PADDING_Y=16,e.DropDownDiv.ANIMATION_TIME=.25,e.DropDownDiv.animateOutTimer_=null,e.DropDownDiv.onHide_=null,e.DropDownDiv.rendererClassName_="",e.DropDownDiv.themeClassName_="",e.DropDownDiv.createDom=function(){if(!e.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",(e.parentContainer||document.body).appendChild(t),e.DropDownDiv.DIV_=t;var n=document.createElement("div");n.className="blocklyDropDownContent",t.appendChild(n),e.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(n),e.DropDownDiv.arrow_=n,e.DropDownDiv.DIV_.style.opacity=0,e.DropDownDiv.DIV_.style.transition="transform "+e.DropDownDiv.ANIMATION_TIME+"s, opacity "+e.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",function(){e.utils.dom.addClass(t,"blocklyFocused")}),t.addEventListener("focusout",function(){e.utils.dom.removeClass(t,"blocklyFocused")})}},e.DropDownDiv.setBoundsElement=function(t){e.DropDownDiv.boundsElement_=t},e.DropDownDiv.getContentDiv=function(){return e.DropDownDiv.content_},e.DropDownDiv.clearContent=function(){e.DropDownDiv.content_.textContent="",e.DropDownDiv.content_.style.width=""},e.DropDownDiv.setColour=function(t,n){e.DropDownDiv.DIV_.style.backgroundColor=t,e.DropDownDiv.DIV_.style.borderColor=n},e.DropDownDiv.showPositionedByBlock=function(t,n,o,s){return e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfBlock_(n),t,o,s)},e.DropDownDiv.showPositionedByField=function(t,n,o){return e.DropDownDiv.positionToField_=!0,e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfField_(t),t,n,o)},e.DropDownDiv.getScaledBboxOfBlock_=function(t){var n=t.getSvgRoot(),o=n.getBBox(),s=t.workspace.scale;return t=o.height*s,o=o.width*s,n=e.utils.style.getPageOffset(n),new e.utils.Rect(n.y,n.y+t,n.x,n.x+o)},e.DropDownDiv.getScaledBboxOfField_=function(t){return t=t.getScaledBBox(),new e.utils.Rect(t.top,t.bottom,t.left,t.right)},e.DropDownDiv.showPositionedByRect_=function(t,n,o,s){var c=t.left+(t.right-t.left)/2,v=t.bottom;t=t.top,s&&(t+=s);for(var R=(s=n.getSourceBlock()).workspace;R.options.parentWorkspace;)R=R.options.parentWorkspace;return e.DropDownDiv.setBoundsElement(R.getParentSvg().parentNode),e.DropDownDiv.show(n,s.RTL,c,v,c,t,o)},e.DropDownDiv.show=function(t,n,o,s,c,v,R){return e.DropDownDiv.owner_=t,e.DropDownDiv.onHide_=R||null,(t=e.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=e.getMainWorkspace(),e.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),e.DropDownDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.DropDownDiv.rendererClassName_),e.utils.dom.addClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.positionInternal_(o,s,c,v)},e.DropDownDiv.getBoundsInfo_=function(){var t=e.utils.style.getPageOffset(e.DropDownDiv.boundsElement_),n=e.utils.style.getSize(e.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+n.width,top:t.y,bottom:t.y+n.height,width:n.width,height:n.height}},e.DropDownDiv.getPositionMetrics_=function(t,n,o,s){var c=e.DropDownDiv.getBoundsInfo_(),v=e.utils.style.getSize(e.DropDownDiv.DIV_);return n+v.height<c.bottom?e.DropDownDiv.getPositionBelowMetrics_(t,n,c,v):s-v.height>c.top?e.DropDownDiv.getPositionAboveMetrics_(o,s,c,v):n+v.height<document.documentElement.clientHeight?e.DropDownDiv.getPositionBelowMetrics_(t,n,c,v):s-v.height>document.documentElement.clientTop?e.DropDownDiv.getPositionAboveMetrics_(o,s,c,v):e.DropDownDiv.getPositionTopOfPageMetrics_(t,c,v)},e.DropDownDiv.getPositionBelowMetrics_=function(t,n,o,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,o.left,o.right,s.width)).divX,initialY:n,finalX:t.divX,finalY:n+e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(e.DropDownDiv.ARROW_SIZE/2+e.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},e.DropDownDiv.getPositionAboveMetrics_=function(t,n,o,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,o.left,o.right,s.width)).divX,initialY:n-s.height,finalX:t.divX,finalY:n-s.height-e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:s.height-2*e.DropDownDiv.BORDER_SIZE-e.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},e.DropDownDiv.getPositionTopOfPageMetrics_=function(t,n,o){return{initialX:(t=e.DropDownDiv.getPositionX(t,n.left,n.right,o.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},e.DropDownDiv.getPositionX=function(t,n,o,s){var c=t;return t=e.utils.math.clamp(n,t-s/2,o-s),{arrowX:s=e.utils.math.clamp(n=e.DropDownDiv.ARROW_HORIZONTAL_PADDING,(c-=e.DropDownDiv.ARROW_SIZE/2)-t,s-n-e.DropDownDiv.ARROW_SIZE),divX:t}},e.DropDownDiv.isVisible=function(){return!!e.DropDownDiv.owner_},e.DropDownDiv.hideIfOwner=function(t,n){return e.DropDownDiv.owner_===t&&(n?e.DropDownDiv.hideWithoutAnimation():e.DropDownDiv.hide(),!0)},e.DropDownDiv.hide=function(){var t=e.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,e.DropDownDiv.animateOutTimer_=setTimeout(function(){e.DropDownDiv.hideWithoutAnimation()},1e3*e.DropDownDiv.ANIMATION_TIME),e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null)},e.DropDownDiv.hideWithoutAnimation=function(){if(e.DropDownDiv.isVisible()){e.DropDownDiv.animateOutTimer_&&clearTimeout(e.DropDownDiv.animateOutTimer_);var t=e.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null),e.DropDownDiv.clearContent(),e.DropDownDiv.owner_=null,e.DropDownDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.rendererClassName_),e.DropDownDiv.rendererClassName_=""),e.DropDownDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.DropDownDiv.positionInternal_=function(t,n,o,s){(t=e.DropDownDiv.getPositionMetrics_(t,n,o,s)).arrowVisible?(e.DropDownDiv.arrow_.style.display="",e.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",e.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):e.DropDownDiv.arrow_.style.display="none",n=Math.floor(t.initialX),o=Math.floor(t.initialY),s=Math.floor(t.finalX);var c=Math.floor(t.finalY),v=e.DropDownDiv.DIV_;return v.style.left=n+"px",v.style.top=o+"px",v.style.display="block",v.style.opacity=1,v.style.transform="translate("+(s-n)+"px,"+(c-o)+"px)",!!t.arrowAtTop},e.DropDownDiv.repositionForWindowResize=function(){if(e.DropDownDiv.owner_){var t=e.DropDownDiv.owner_,n=t.getSourceBlock();t=e.DropDownDiv.positionToField_?e.DropDownDiv.getScaledBboxOfField_(t):e.DropDownDiv.getScaledBboxOfBlock_(n),e.DropDownDiv.positionInternal_(n=t.left+(t.right-t.left)/2,t.bottom,n,t.top)}else e.DropDownDiv.hide()},e.registry={},e.registry.typeMap_=Object.create(null),e.registry.DEFAULT="default",e.registry.Type=function(t){this.name_=t},e.registry.Type.prototype.toString=function(){return this.name_},e.registry.Type.CONNECTION_CHECKER=new e.registry.Type("connectionChecker"),e.registry.Type.CURSOR=new e.registry.Type("cursor"),e.registry.Type.EVENT=new e.registry.Type("event"),e.registry.Type.FIELD=new e.registry.Type("field"),e.registry.Type.RENDERER=new e.registry.Type("renderer"),e.registry.Type.TOOLBOX=new e.registry.Type("toolbox"),e.registry.Type.THEME=new e.registry.Type("theme"),e.registry.Type.TOOLBOX_ITEM=new e.registry.Type("toolboxItem"),e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new e.registry.Type("flyoutsVerticalToolbox"),e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new e.registry.Type("flyoutsHorizontalToolbox"),e.registry.Type.METRICS_MANAGER=new e.registry.Type("metricsManager"),e.registry.Type.BLOCK_DRAGGER=new e.registry.Type("blockDragger"),e.registry.register=function(t,n,o,s){if(!(t instanceof e.registry.Type)&&"string"!=typeof t||""==String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!o)throw Error("Can not register a null value");var c=e.registry.typeMap_[t];if(c||(c=e.registry.typeMap_[t]=Object.create(null)),e.registry.validate_(t,o),!s&&c[n])throw Error('Name "'+n+'" with type "'+t+'" already registered.');c[n]=o},e.registry.validate_=function(t,n){if(t===String(e.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+t+'" must have a fromJson function')},e.registry.unregister=function(t,n){t=String(t).toLowerCase(),n=n.toLowerCase();var o=e.registry.typeMap_[t];o&&o[n]?delete e.registry.typeMap_[t][n]:console.warn("Unable to unregister ["+n+"]["+t+"] from the registry.")},e.registry.getItem_=function(t,n,o){t=String(t).toLowerCase(),n=n.toLowerCase();var s=e.registry.typeMap_[t];if(!s||!s[n]){if(n="Unable to find ["+n+"]["+t+"] in the registry.",o)throw Error(n+" You must require or register a "+t+" plugin.");return console.warn(n),null}return s[n]},e.registry.hasItem=function(t,n){return t=String(t).toLowerCase(),n=n.toLowerCase(),!!(t=e.registry.typeMap_[t])&&!!t[n]},e.registry.getClass=function(t,n,o){return e.registry.getItem_(t,n,o)},e.registry.getObject=function(t,n,o){return e.registry.getItem_(t,n,o)},e.registry.getClassFromOptions=function(t,n,o){return"function"==typeof(n=n.plugins[t.toString()]||e.registry.DEFAULT)?n:e.registry.getClass(t,n,o)},e.Events={},e.Events.group_="",e.Events.recordUndo=!0,e.Events.disabled_=0,e.Events.CREATE="create",e.Events.BLOCK_CREATE=e.Events.CREATE,e.Events.DELETE="delete",e.Events.BLOCK_DELETE=e.Events.DELETE,e.Events.CHANGE="change",e.Events.BLOCK_CHANGE=e.Events.CHANGE,e.Events.MOVE="move",e.Events.BLOCK_MOVE=e.Events.MOVE,e.Events.VAR_CREATE="var_create",e.Events.VAR_DELETE="var_delete",e.Events.VAR_RENAME="var_rename",e.Events.UI="ui",e.Events.BLOCK_DRAG="drag",e.Events.SELECTED="selected",e.Events.CLICK="click",e.Events.MARKER_MOVE="marker_move",e.Events.BUBBLE_OPEN="bubble_open",e.Events.TRASHCAN_OPEN="trashcan_open",e.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.Events.THEME_CHANGE="theme_change",e.Events.VIEWPORT_CHANGE="viewport_change",e.Events.COMMENT_CREATE="comment_create",e.Events.COMMENT_DELETE="comment_delete",e.Events.COMMENT_CHANGE="comment_change",e.Events.COMMENT_MOVE="comment_move",e.Events.FINISHED_LOADING="finished_loading",e.Events.BUMP_EVENTS=[e.Events.BLOCK_CREATE,e.Events.BLOCK_MOVE,e.Events.COMMENT_CREATE,e.Events.COMMENT_MOVE],e.Events.FIRE_QUEUE_=[],e.Events.fire=function(t){e.Events.isEnabled()&&(e.Events.FIRE_QUEUE_.length||setTimeout(e.Events.fireNow_,0),e.Events.FIRE_QUEUE_.push(t))},e.Events.fireNow_=function(){for(var o,t=e.Events.filter(e.Events.FIRE_QUEUE_,!0),n=e.Events.FIRE_QUEUE_.length=0;o=t[n];n++)if(o.workspaceId){var s=e.Workspace.getById(o.workspaceId);s&&s.fireChangeListener(o)}},e.Events.filter=function(t,n){t=t.slice(),n||t.reverse();for(var v,o=[],s=Object.create(null),c=0;v=t[c];c++)if(!v.isNull()){var R=[v.isUiEvent?e.Events.UI:v.type,v.blockId,v.workspaceId].join(" "),O=s[R],H=O?O.event:null;O?v.type==e.Events.MOVE&&O.index==c-1?(H.newParentId=v.newParentId,H.newInputName=v.newInputName,H.newCoordinate=v.newCoordinate,O.index=c):v.type==e.Events.CHANGE&&v.element==H.element&&v.name==H.name?H.newValue=v.newValue:v.type==e.Events.VIEWPORT_CHANGE?(H.viewTop=v.viewTop,H.viewLeft=v.viewLeft,H.scale=v.scale,H.oldScale=v.oldScale):(v.type!=e.Events.CLICK||H.type!=e.Events.BUBBLE_OPEN)&&(s[R]={event:v,index:c},o.push(v)):(s[R]={event:v,index:c},o.push(v))}for(t=o.filter(function(V){return!V.isNull()}),n||t.reverse(),c=1;v=t[c];c++)v.type==e.Events.CHANGE&&"mutation"==v.element&&t.unshift(t.splice(c,1)[0]);return t},e.Events.clearPendingUndo=function(){for(var n,t=0;n=e.Events.FIRE_QUEUE_[t];t++)n.recordUndo=!1},e.Events.disable=function(){e.Events.disabled_++},e.Events.enable=function(){e.Events.disabled_--},e.Events.isEnabled=function(){return 0==e.Events.disabled_},e.Events.getGroup=function(){return e.Events.group_},e.Events.setGroup=function(t){e.Events.group_="boolean"==typeof t?t?e.utils.genUid():"":t},e.Events.getDescendantIds=function(t){var n=[];t=t.getDescendants(!1);for(var s,o=0;s=t[o];o++)n[o]=s.id;return n},e.Events.fromJson=function(t,n){var o=e.Events.get(t.type);if(!o)throw Error("Unknown event type.");return(o=new o).fromJson(t),o.workspaceId=n.id,o},e.Events.get=function(t){return e.registry.getClass(e.registry.Type.EVENT,t)},e.Events.disableOrphans=function(t){if((t.type==e.Events.MOVE||t.type==e.Events.CREATE)&&t.workspaceId){var n=e.Workspace.getById(t.workspaceId),o=n.getBlockById(t.blockId);if(o){t=e.Events.recordUndo;try{e.Events.recordUndo=!1;var s=o.getParent();if(s&&s.isEnabled()){var v,c=o.getDescendants(!1);for(n=0;v=c[n];n++)v.setEnabled(!0)}else if((o.outputConnection||o.previousConnection)&&!n.isDragging())do{o.setEnabled(!1),o=o.getNextBlock()}while(o)}finally{e.Events.recordUndo=t}}}},e.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.Events.Abstract.prototype.isUiEvent=!1,e.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},e.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},e.Events.Abstract.prototype.isNull=function(){return!1},e.Events.Abstract.prototype.run=function(t){},e.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=e.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},e.utils.object={},e.utils.object.inherits=function(t,n){t.superClass_=n.prototype,t.prototype=Object.create(n.prototype),t.prototype.constructor=t},e.utils.object.mixin=function(t,n){for(var o in n)t[o]=n[o]},e.utils.object.deepMerge=function(t,n){for(var o in n)t[o]=null!=n[o]&&"object"==typeof n[o]?e.utils.object.deepMerge(t[o]||Object.create(null),n[o]):n[o];return t},e.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(n){return t[n]})},e.utils.xml={},e.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",e.utils.xml.document=function(){return document},e.utils.xml.createElement=function(t){return e.utils.xml.document().createElementNS(e.utils.xml.NAME_SPACE,t)},e.utils.xml.createTextNode=function(t){return e.utils.xml.document().createTextNode(t)},e.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},e.inputTypes={VALUE:e.connectionTypes.INPUT_VALUE,STATEMENT:e.connectionTypes.NEXT_STATEMENT,DUMMY:5},e.Xml={},e.Xml.workspaceToDom=function(t,n){var o=e.utils.xml.createElement("xml"),s=e.Xml.variablesToDom(e.Variables.allUsedVarModels(t));s.hasChildNodes()&&o.appendChild(s);var v,c=t.getTopComments(!0);for(s=0;v=c[s];s++)o.appendChild(v.toXmlWithXY(n));for(t=t.getTopBlocks(!0),s=0;c=t[s];s++)o.appendChild(e.Xml.blockToDomWithXY(c,n));return o},e.Xml.variablesToDom=function(t){for(var s,n=e.utils.xml.createElement("variables"),o=0;s=t[o];o++){var c=e.utils.xml.createElement("variable");c.appendChild(e.utils.xml.createTextNode(s.name)),s.type&&c.setAttribute("type",s.type),c.id=s.getId(),n.appendChild(c)}return n},e.Xml.blockToDomWithXY=function(t,n){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var o;t.workspace.RTL&&(o=t.workspace.getWidth()),n=e.Xml.blockToDom(t,n);var s=t.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(t.workspace.RTL?o-s.x:s.x)),n.setAttribute("y",Math.round(s.y)),n},e.Xml.fieldToDom_=function(t){if(t.isSerializable()){var n=e.utils.xml.createElement("field");return n.setAttribute("name",t.name||""),t.toXml(n)}return null},e.Xml.allFieldsToDom_=function(t,n){for(var s,o=0;s=t.inputList[o];o++)for(var v,c=0;v=s.fieldRow[c];c++)(v=e.Xml.fieldToDom_(v))&&n.appendChild(v)},e.Xml.blockToDom=function(t,n){if(t.isInsertionMarker())return(t=t.getChildren(!1)[0])?e.Xml.blockToDom(t):new DocumentFragment;var o=e.utils.xml.createElement(t.isShadow()?"shadow":"block");if(o.setAttribute("type",t.type),n||o.setAttribute("id",t.id),t.mutationToDom){var s=t.mutationToDom();s&&(s.hasChildNodes()||s.hasAttributes())&&o.appendChild(s)}if(e.Xml.allFieldsToDom_(t,o),s=t.getCommentText()){var c=t.commentModel.size,v=t.commentModel.pinned,R=e.utils.xml.createElement("comment");R.appendChild(e.utils.xml.createTextNode(s)),R.setAttribute("pinned",v),R.setAttribute("h",c.height),R.setAttribute("w",c.width),o.appendChild(R)}for(t.data&&((s=e.utils.xml.createElement("data")).appendChild(e.utils.xml.createTextNode(t.data)),o.appendChild(s)),s=0;c=t.inputList[s];s++){var O;if(v=!0,c.type!=e.inputTypes.DUMMY){var H=c.connection.targetBlock();c.type==e.inputTypes.VALUE?O=e.utils.xml.createElement("value"):c.type==e.inputTypes.STATEMENT&&(O=e.utils.xml.createElement("statement")),!(R=c.connection.getShadowDom())||H&&H.isShadow()||O.appendChild(e.Xml.cloneShadow_(R,n)),H&&(R=e.Xml.blockToDom(H,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&(O.appendChild(R),v=!1),O.setAttribute("name",c.name),v||o.appendChild(O)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&o.setAttribute("inline",t.inputsInline),t.isCollapsed()&&o.setAttribute("collapsed",!0),t.isEnabled()||o.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||o.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||o.setAttribute("movable",!1),t.isEditable()||o.setAttribute("editable",!1),(s=t.getNextBlock())&&(R=e.Xml.blockToDom(s,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&((O=e.utils.xml.createElement("next")).appendChild(R),o.appendChild(O)),!(R=t.nextConnection&&t.nextConnection.getShadowDom())||s&&s.isShadow()||O.appendChild(e.Xml.cloneShadow_(R,n)),o},e.Xml.cloneShadow_=function(t,n){for(var s,o=t=t.cloneNode(!0);o;)if(n&&"shadow"==o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)s=o,o=o.parentNode,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&o.firstChild!=s&&e.utils.dom.removeNode(s);o&&(s=o,o=o.nextSibling,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&e.utils.dom.removeNode(s))}return t},e.Xml.domToText=function(t){return e.utils.xml.domToText(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},e.Xml.domToPrettyText=function(t){t=e.Xml.domToText(t).split("<");for(var n="",o=1;o<t.length;o++){var s=t[o];"/"==s[0]&&(n=n.substring(2)),t[o]=n+"<"+s,"/"!=s[0]&&"/>"!=s.slice(-2)&&(n+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},e.Xml.textToDom=function(t){var n=e.utils.xml.textToDomDocument(t);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return n.documentElement},e.Xml.clearWorkspaceAndLoadFromXml=function(t,n){return n.setResizesEnabled(!1),n.clear(),t=e.Xml.domToWorkspace(t,n),n.setResizesEnabled(!0),t},e.Xml.domToWorkspace=function(t,n){if(t instanceof e.Workspace){var o=t;t=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var s;n.RTL&&(s=n.getWidth()),o=[],e.utils.dom.startTextWidthCache();var c=e.Events.getGroup();c||e.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var v=!0;try{for(var O,R=0;O=t.childNodes[R];R++){var H=O.nodeName.toLowerCase(),V=O;if("block"==H||"shadow"==H&&!e.Events.recordUndo){var G=e.Xml.domToBlock(V,n);o.push(G.id);var Z=V.hasAttribute("x")?parseInt(V.getAttribute("x"),10):10,vt=V.hasAttribute("y")?parseInt(V.getAttribute("y"),10):10;isNaN(Z)||isNaN(vt)||G.moveBy(n.RTL?s-Z:Z,vt),v=!1}else{if("shadow"==H)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==H)n.rendered?e.WorkspaceCommentSvg?e.WorkspaceCommentSvg.fromXml(V,n,s):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):e.WorkspaceComment?e.WorkspaceComment.fromXml(V,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==H){if(!v)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");e.Xml.domToVariables(V,n),v=!1}}}}finally{c||e.Events.setGroup(!1),e.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),e.Events.fire(new(e.Events.get(e.Events.FINISHED_LOADING))(n)),o},e.Xml.appendDomToWorkspace=function(t,n){var o;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(o=n.getBlocksBoundingBox()),t=e.Xml.domToWorkspace(t,n),o&&o.top!=o.bottom){var s=o.bottom,c=n.RTL?o.right:o.left,v=1/0,R=-1/0,O=1/0;for(o=0;o<t.length;o++){var H=n.getBlockById(t[o]).getRelativeToSurfaceXY();H.y<O&&(O=H.y),H.x<v&&(v=H.x),H.x>R&&(R=H.x)}for(s=s-O+10,c=n.RTL?c-R:c-v,o=0;o<t.length;o++)n.getBlockById(t[o]).moveBy(c,s)}return t},e.Xml.domToBlock=function(t,n){if(t instanceof e.Workspace){var o=t;t=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}e.Events.disable(),o=n.getAllVariables();try{var s=e.Xml.domToBlockHeadless_(t,n),c=s.getDescendants(!1);if(n.rendered){s.setConnectionTracking(!1);for(var v=c.length-1;0<=v;v--)c[v].initSvg();for(v=c.length-1;0<=v;v--)c[v].render(!1);setTimeout(function(){s.disposed||s.setConnectionTracking(!0)},1),s.updateDisabled(),n.resizeContents()}else for(v=c.length-1;0<=v;v--)c[v].initModel()}finally{e.Events.enable()}if(e.Events.isEnabled()){for(t=e.Variables.getAddedVariables(n,o),v=0;v<t.length;v++)n=t[v],e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(n));e.Events.fire(new(e.Events.get(e.Events.CREATE))(s))}return s},e.Xml.domToVariables=function(t,n){for(var s,o=0;s=t.childNodes[o];o++)if(s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE){var c=s.getAttribute("type"),v=s.getAttribute("id");n.createVariable(s.textContent,c,v)}},e.Xml.mapSupportedXmlTags_=function(t){for(var s,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},o=0;s=t.childNodes[o];o++)if(s.nodeType!=e.utils.dom.NodeType.TEXT_NODE)switch(s.nodeName.toLowerCase()){case"mutation":n.mutation.push(s);break;case"comment":if(!e.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(s);break;case"data":n.data.push(s);break;case"title":case"field":n.field.push(s);break;case"value":case"statement":n.input.push(s);break;case"next":n.next.push(s);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}return n},e.Xml.applyMutationTagNodes_=function(t,n){for(var c,o=!1,s=0;c=t[s];s++)n.domToMutation&&(n.domToMutation(c),n.initSvg&&(o=!0));return o},e.Xml.applyCommentTagNodes_=function(t,n){for(var s,o=0;s=t[o];o++){var c=s.textContent,v="true"==s.getAttribute("pinned"),R=parseInt(s.getAttribute("w"),10);s=parseInt(s.getAttribute("h"),10),n.setCommentText(c),n.commentModel.pinned=v,isNaN(R)||isNaN(s)||(n.commentModel.size=new e.utils.Size(R,s)),v&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},e.Xml.applyDataTagNodes_=function(t,n){for(var s,o=0;s=t[o];o++)n.data=s.textContent},e.Xml.applyFieldTagNodes_=function(t,n){for(var s,o=0;s=t[o];o++){var c=s.getAttribute("name");e.Xml.domToField_(n,c,s)}},e.Xml.findChildBlocks_=function(t){for(var s,n={childBlockElement:null,childShadowElement:null},o=0;s=t.childNodes[o];o++)s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&("block"==s.nodeName.toLowerCase()?n.childBlockElement=s:"shadow"==s.nodeName.toLowerCase()&&(n.childShadowElement=s));return n},e.Xml.applyInputTagNodes_=function(t,n,o,s){for(var v,c=0;v=t[c];c++){var R=v.getAttribute("name"),O=o.getInput(R);if(!O){console.warn("Ignoring non-existent input "+R+" in block "+s);break}if((v=e.Xml.findChildBlocks_(v)).childBlockElement){if(!O.connection)throw TypeError("Input connection does not exist.");e.Xml.domToBlockHeadless_(v.childBlockElement,n,O.connection,!1)}v.childShadowElement&&O.connection.setShadowDom(v.childShadowElement)}},e.Xml.applyNextTagNodes_=function(t,n,o){for(var c,s=0;c=t[s];s++){if((c=e.Xml.findChildBlocks_(c)).childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");e.Xml.domToBlockHeadless_(c.childBlockElement,n,o.nextConnection,!0)}c.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(c.childShadowElement)}},e.Xml.domToBlockHeadless_=function(t,n,o,s){var c=t.getAttribute("type");if(!c)throw TypeError("Block type unspecified: "+t.outerHTML);var v=t.getAttribute("id");v=n.newBlock(c,v);var R=e.Xml.mapSupportedXmlTags_(t),O=e.Xml.applyMutationTagNodes_(R.mutation,v);if(e.Xml.applyCommentTagNodes_(R.comment,v),e.Xml.applyDataTagNodes_(R.data,v),o)if(s){if(!v.previousConnection)throw TypeError("Next block does not have previous statement.");o.connect(v.previousConnection)}else if(v.outputConnection)o.connect(v.outputConnection);else{if(!v.previousConnection)throw TypeError("Child block does not have output or previous statement.");o.connect(v.previousConnection)}if(e.Xml.applyFieldTagNodes_(R.field,v),e.Xml.applyInputTagNodes_(R.input,n,v,c),e.Xml.applyNextTagNodes_(R.next,n,v),O&&v.initSvg(),(n=t.getAttribute("inline"))&&v.setInputsInline("true"==n),(n=t.getAttribute("disabled"))&&v.setEnabled("true"!=n&&"disabled"!=n),(n=t.getAttribute("deletable"))&&v.setDeletable("true"==n),(n=t.getAttribute("movable"))&&v.setMovable("true"==n),(n=t.getAttribute("editable"))&&v.setEditable("true"==n),(n=t.getAttribute("collapsed"))&&v.setCollapsed("true"==n),"shadow"==t.nodeName.toLowerCase()){for(t=v.getChildren(!1),n=0;o=t[n];n++)if(!o.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(v.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");v.setShadow(!0)}return v},e.Xml.domToField_=function(t,n,o){var s=t.getField(n);s?s.fromXml(o):console.warn("Ignoring non-existent field "+n+" in block "+t.type)},e.Xml.deleteNext=function(t){for(var o,n=0;o=t.childNodes[n];n++)if("next"==o.nodeName.toLowerCase()){t.removeChild(o);break}},e.Events.BlockBase=function(t){e.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.BlockBase,e.Events.Abstract),e.Events.BlockBase.prototype.toJson=function(){var t=e.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},e.Events.BlockBase.prototype.fromJson=function(t){e.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},e.Events.BlockChange=function(t,n,o,s,c){e.Events.Change.superClass_.constructor.call(this,t),t&&(this.element=void 0===n?"":n,this.name=void 0===o?"":o,this.oldValue=void 0===s?"":s,this.newValue=void 0===c?"":c)},e.utils.object.inherits(e.Events.BlockChange,e.Events.BlockBase),e.Events.Change=e.Events.BlockChange,e.Events.BlockChange.prototype.type=e.Events.CHANGE,e.Events.BlockChange.prototype.toJson=function(){var t=e.Events.BlockChange.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},e.Events.BlockChange.prototype.fromJson=function(t){e.Events.BlockChange.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},e.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},e.Events.BlockChange.prototype.run=function(t){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(t||null);break;case"collapsed":n.setCollapsed(!!t);break;case"disabled":n.setEnabled(!t);break;case"inline":n.setInputsInline(!!t);break;case"mutation":var o="";if(n.mutationToDom&&(o=(o=n.mutationToDom())&&e.Xml.domToText(o)),n.domToMutation){var s=e.Xml.textToDom(t||"<mutation/>");n.domToMutation(s)}e.Events.fire(new e.Events.BlockChange(n,"mutation",null,o,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},e.Events.Create=function(t){e.Events.Create.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t))},e.utils.object.inherits(e.Events.Create,e.Events.BlockBase),e.Events.BlockCreate=e.Events.Create,e.Events.Create.prototype.type=e.Events.CREATE,e.Events.Create.prototype.toJson=function(){var t=e.Events.Create.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Create.prototype.fromJson=function(t){e.Events.Create.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Create.prototype.run=function(t){var n=this.getEventWorkspace_();if(t)(t=e.utils.xml.createElement("xml")).appendChild(this.xml),e.Xml.domToWorkspace(t,n);else{t=0;for(var o;o=this.ids[t];t++){var s=n.getBlockById(o);s?s.dispose(!1):o==this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}}},e.Events.Delete=function(t){if(e.Events.Delete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t)}},e.utils.object.inherits(e.Events.Delete,e.Events.BlockBase),e.Events.BlockDelete=e.Events.Delete,e.Events.Delete.prototype.type=e.Events.DELETE,e.Events.Delete.prototype.toJson=function(){var t=e.Events.Delete.superClass_.toJson.call(this);return t.oldXml=e.Xml.domToText(this.oldXml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Delete.prototype.fromJson=function(t){e.Events.Delete.superClass_.fromJson.call(this,t),this.oldXml=e.Xml.textToDom(t.oldXml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Delete.prototype.run=function(t){var n=this.getEventWorkspace_();if(t){t=0;for(var o;o=this.ids[t];t++){var s=n.getBlockById(o);s?s.dispose(!1):o==this.blockId&&console.warn("Can't delete non-existent block: "+o)}}else(t=e.utils.xml.createElement("xml")).appendChild(this.oldXml),e.Xml.domToWorkspace(t,n)},e.Events.Move=function(t){e.Events.Move.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},e.utils.object.inherits(e.Events.Move,e.Events.BlockBase),e.Events.BlockMove=e.Events.Move,e.Events.Move.prototype.type=e.Events.MOVE,e.Events.Move.prototype.toJson=function(){var t=e.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Move.prototype.fromJson=function(t){if(e.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var n=t.newCoordinate.split(",");this.newCoordinate=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},e.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),n={},o=t.getParent();return o?(n.parentId=o.id,(t=o.getInputWithBlock(t))&&(n.inputName=t.name)):n.coordinate=t.getRelativeToSurfaceXY(),n},e.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&e.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},e.Events.Move.prototype.run=function(t){var n=this.getEventWorkspace_(),o=n.getBlockById(this.blockId);if(o){var s=t?this.newParentId:this.oldParentId,c=t?this.newInputName:this.oldInputName,v=t?this.newCoordinate:this.oldCoordinate;if(t=null,s&&!(t=n.getBlockById(s)))return void console.warn("Can't connect to non-existent block: "+s);if(o.getParent()&&o.unplug(),v)c=o.getRelativeToSurfaceXY(),o.moveBy(v.x-c.x,v.y-c.y);else{if(n=(o=o.outputConnection||o.previousConnection).type,c){if(t=t.getInput(c))var R=t.connection}else n==e.connectionTypes.PREVIOUS_STATEMENT&&(R=t.nextConnection);R?o.connect(R):console.warn("Can't connect to non-existent input: "+c)}}else console.warn("Can't move non-existent block: "+this.blockId)},e.registry.register(e.registry.Type.EVENT,e.Events.CREATE,e.Events.Create),e.registry.register(e.registry.Type.EVENT,e.Events.DELETE,e.Events.Delete),e.registry.register(e.registry.Type.EVENT,e.Events.CHANGE,e.Events.BlockChange),e.registry.register(e.registry.Type.EVENT,e.Events.MOVE,e.Events.Move),e.Events.FinishedLoading=function(t){this.isBlank=void 0===t,this.workspaceId=t?t.id:"",this.group=e.Events.getGroup(),this.recordUndo=!1},e.utils.object.inherits(e.Events.FinishedLoading,e.Events.Abstract),e.Events.FinishedLoading.prototype.type=e.Events.FINISHED_LOADING,e.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},e.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},e.registry.register(e.registry.Type.EVENT,e.Events.FINISHED_LOADING,e.Events.FinishedLoading),e.Events.UiBase=function(t){e.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===t,this.workspaceId=t||"",this.recordUndo=!1},e.utils.object.inherits(e.Events.UiBase,e.Events.Abstract),e.Events.UiBase.prototype.isUiEvent=!0,e.Events.Ui=function(t,n,o,s){e.Events.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===o?"":o,this.newValue=void 0===s?"":s},e.utils.object.inherits(e.Events.Ui,e.Events.UiBase),e.Events.Ui.prototype.type=e.Events.UI,e.Events.Ui.prototype.toJson=function(){var t=e.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},e.Events.Ui.prototype.fromJson=function(t){e.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.UI,e.Events.Ui),e.Events.VarBase=function(t){e.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===t)?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.VarBase,e.Events.Abstract),e.Events.VarBase.prototype.toJson=function(){var t=e.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},e.Events.VarBase.prototype.fromJson=function(t){e.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},e.Events.VarCreate=function(t){e.Events.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarCreate,e.Events.VarBase),e.Events.VarCreate.prototype.type=e.Events.VAR_CREATE,e.Events.VarCreate.prototype.toJson=function(){var t=e.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarCreate.prototype.fromJson=function(t){e.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarCreate.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},e.Events.VarDelete=function(t){e.Events.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarDelete,e.Events.VarBase),e.Events.VarDelete.prototype.type=e.Events.VAR_DELETE,e.Events.VarDelete.prototype.toJson=function(){var t=e.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarDelete.prototype.fromJson=function(t){e.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarDelete.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},e.Events.VarRename=function(t,n){e.Events.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=void 0===n?"":n)},e.utils.object.inherits(e.Events.VarRename,e.Events.VarBase),e.Events.VarRename.prototype.type=e.Events.VAR_RENAME,e.Events.VarRename.prototype.toJson=function(){var t=e.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},e.Events.VarRename.prototype.fromJson=function(t){e.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},e.Events.VarRename.prototype.run=function(t){this.getEventWorkspace_().renameVariableById(this.varId,t?this.newName:this.oldName)},e.registry.register(e.registry.Type.EVENT,e.Events.VAR_CREATE,e.Events.VarCreate),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_DELETE,e.Events.VarDelete),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_RENAME,e.Events.VarRename),e.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.BlockDragSurfaceSvg.prototype.SVG_=null,e.BlockDragSurfaceSvg.prototype.dragGroup_=null,e.BlockDragSurfaceSvg.prototype.container_=null,e.BlockDragSurfaceSvg.prototype.scale_=1,e.BlockDragSurfaceSvg.prototype.surfaceXY_=null,e.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new e.utils.Coordinate(0,0),e.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.SVG_))},e.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new e.utils.Coordinate(0,0)},e.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,n,o){this.scale_=o,t=t.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+t+","+n+") scale("+o+")")},e.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,n=this.surfaceXY_.y;t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.BlockDragSurfaceSvg.prototype.translateBy=function(t,n){this.surfaceXY_=new e.utils.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.translateSurface=function(t,n){this.surfaceXY_=new e.utils.Coordinate(t*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=e.utils.getRelativeXY(this.SVG_);return new e.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},e.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},e.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},e.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},e.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},e.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},e.Css={},e.Css.injected_=!1,e.Css.register=function(t){if(e.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(e.Css.CONTENT,t),t.length=0},e.Css.inject=function(t,n){if(!e.Css.injected_){e.Css.injected_=!0;var o=e.Css.CONTENT.join("\n");e.Css.CONTENT.length=0,t&&(t=n.replace(/[\\/]$/,""),o=o.replace(/<<<PATH>>>/g,t),(t=document.createElement("style")).id="blockly-common-style",o=document.createTextNode(o),t.appendChild(o),document.head.insertBefore(t,document.head.firstChild))}},e.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],e.Grid=function(t,n){this.gridPattern_=t,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},e.Grid.prototype.scale_=1,e.Grid.prototype.dispose=function(){this.gridPattern_=null},e.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},e.Grid.prototype.getSpacing=function(){return this.spacing_},e.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},e.Grid.prototype.update=function(t){this.scale_=t;var n=this.spacing_*t||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var o=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,s=n+this.length_/2;this.setLineAttributes_(this.line1_,t,o*=t,s*=t,n*=t,n),this.setLineAttributes_(this.line2_,t,n,n,o,s)},e.Grid.prototype.setLineAttributes_=function(t,n,o,s,c,v){t&&(t.setAttribute("stroke-width",n),t.setAttribute("x1",o),t.setAttribute("y1",c),t.setAttribute("x2",s),t.setAttribute("y2",v))},e.Grid.prototype.moveTo=function(t,n){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",n),(e.utils.userAgent.IE||e.utils.userAgent.EDGE)&&this.update(this.scale_)},e.Grid.createDom=function(t,n,o){return t=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},o),0<n.length&&0<n.spacing?(e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t),1<n.length&&e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t)):e.utils.dom.createSvgElement(e.utils.Svg.LINE,{},t),t},e.Theme=function(t,n,o,s){this.name=t,this.blockStyles=n||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=s||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,e.registry.register(e.registry.Type.THEME,t,this)},e.Theme.prototype.getClassName=function(){return this.name+"-theme"},e.Theme.prototype.setBlockStyle=function(t,n){this.blockStyles[t]=n},e.Theme.prototype.setCategoryStyle=function(t,n){this.categoryStyles[t]=n},e.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},e.Theme.prototype.setComponentStyle=function(t,n){this.componentStyles[t]=n},e.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},e.Theme.prototype.setStartHats=function(t){this.startHats=t},e.Theme.defineTheme=function(t,n){var o=new e.Theme(t),s=n.base;return s&&("string"==typeof s&&(s=e.registry.getObject(e.registry.Type.THEME,s)),s instanceof e.Theme&&(e.utils.object.deepMerge(o,s),o.name=t)),e.utils.object.deepMerge(o.blockStyles,n.blockStyles),e.utils.object.deepMerge(o.categoryStyles,n.categoryStyles),e.utils.object.deepMerge(o.componentStyles,n.componentStyles),e.utils.object.deepMerge(o.fontStyle,n.fontStyle),null!=n.startHats&&(o.startHats=n.startHats),o},e.Themes={},e.Themes.Classic={},e.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},e.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},e.Themes.Classic=new e.Theme("classic",e.Themes.Classic.defaultBlockStyles,e.Themes.Classic.categoryStyles),e.utils.IdGenerator={},e.utils.IdGenerator.nextId_=0,e.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(e.utils.IdGenerator.nextId_++).toString(36)},e.utils.Metrics=function(){},e.utils.toolbox={},e.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",e.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",e.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},e.utils.toolbox.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=e.utils.toolbox.parseToolboxTree(t),t=e.utils.toolbox.convertToToolboxJson_(t)),e.utils.toolbox.validateToolbox_(t),t):null},e.utils.toolbox.validateToolbox_=function(t){var n=t.kind;if(t=t.contents,n&&n!=e.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=e.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+e.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+e.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!t)throw Error("Toolbox must have a contents attribute.")},e.utils.toolbox.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:e.utils.toolbox.xmlToJsonArray_(t):[]},e.utils.toolbox.hasCategories=function(t){if(!t)return!1;var n=t.kind;return n?n==e.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!t.contents.filter(function(o){return"CATEGORY"==o.kind.toUpperCase()}).length},e.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},e.utils.toolbox.convertToToolboxJson_=function(t){var n={contents:e.utils.toolbox.xmlToJsonArray_(t)};return t instanceof Node&&e.utils.toolbox.addAttributes_(t,n),n},e.utils.toolbox.xmlToJsonArray_=function(t){var s,n=[],o=t.childNodes;for(o||(o=t),t=0;s=o[t];t++)if(s.tagName){var c={},v=s.tagName.toUpperCase();c.kind=v,"BLOCK"==v?c.blockxml=s:s.childNodes&&0<s.childNodes.length&&(c.contents=e.utils.toolbox.xmlToJsonArray_(s)),e.utils.toolbox.addAttributes_(s,c),n.push(c)}return n},e.utils.toolbox.addAttributes_=function(t,n){for(var o=0;o<t.attributes.length;o++){var s=t.attributes[o];-1<s.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[s.nodeName.replace("css-","")]=s.value):n[s.nodeName]=s.value}},e.utils.toolbox.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(e.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=e.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},e.Options=function(t){var n=!!t.readOnly;if(n)var o=null,s=!1,c=!1,v=!1,R=!1,O=!1,H=!1;else{o=e.utils.toolbox.convertToolboxDefToJson(t.toolbox),s=e.utils.toolbox.hasCategories(o),void 0===(c=t.trashcan)&&(c=s);var V=t.maxTrashcanContents;c?void 0===V&&(V=32):V=0,void 0===(v=t.collapse)&&(v=s),void 0===(R=t.comments)&&(R=s),void 0===(O=t.disable)&&(O=s),void 0===(H=t.sounds)&&(H=!0)}var G=!!t.rtl,Z=t.horizontalLayout;void 0===Z&&(Z=!1);var vt=t.toolboxPosition;vt="end"!==vt,vt=Z?vt?e.utils.toolbox.Position.TOP:e.utils.toolbox.Position.BOTTOM:vt==G?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT;var it=t.css;void 0===it&&(it=!0);var ot="https://blockly-demo.appspot.com/static/media/";t.media?ot=t.media:t.path&&(ot=t.path+"media/");var wt=void 0===t.oneBasedIndex||!!t.oneBasedIndex,ct=t.renderer||"geras",yt=t.plugins||{};this.RTL=G,this.oneBasedIndex=wt,this.collapse=v,this.comments=R,this.disable=O,this.readOnly=n,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=ot,this.hasCategories=s,this.moveOptions=e.Options.parseMoveOptions_(t,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=c,this.maxTrashcanContents=V,this.hasSounds=H,this.hasCss=it,this.horizontalLayout=Z,this.languageTree=o,this.gridOptions=e.Options.parseGridOptions_(t),this.zoomOptions=e.Options.parseZoomOptions_(t),this.toolboxPosition=vt,this.theme=e.Options.parseThemeOptions_(t),this.renderer=ct,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=yt},e.BlocklyOptions=function(){},e.Options.parseMoveOptions_=function(t,n){var o=t.move||{},s={};return void 0===o.scrollbars&&void 0===t.scrollbars?s.scrollbars=n:"object"==typeof o.scrollbars?(s.scrollbars={},s.scrollbars.horizontal=!!o.scrollbars.horizontal,s.scrollbars.vertical=!!o.scrollbars.vertical,s.scrollbars.horizontal&&s.scrollbars.vertical?s.scrollbars=!0:s.scrollbars.horizontal||s.scrollbars.vertical||(s.scrollbars=!1)):s.scrollbars=!!o.scrollbars||!!t.scrollbars,s.wheel=s.scrollbars&&void 0!==o.wheel?!!o.wheel:"object"==typeof s.scrollbars,s.drag=!(!s.scrollbars||void 0!==o.drag&&!o.drag),s},e.Options.parseZoomOptions_=function(t){var n={};return n.controls=void 0!==(t=t.zoom||{}).controls&&!!t.controls,n.wheel=void 0!==t.wheel&&!!t.wheel,n.startScale=void 0===t.startScale?1:Number(t.startScale),n.maxScale=void 0===t.maxScale?3:Number(t.maxScale),n.minScale=void 0===t.minScale?.3:Number(t.minScale),n.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),n.pinch=void 0===t.pinch?n.wheel||n.controls:!!t.pinch,n},e.Options.parseGridOptions_=function(t){t=t.grid||{};var n={};return n.spacing=Number(t.spacing)||0,n.colour=t.colour||"#888",n.length=void 0===t.length?1:Number(t.length),n.snap=0<n.spacing&&!!t.snap,n},e.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||e.Themes.Classic)?e.registry.getObject(e.registry.Type.THEME,t):t instanceof e.Theme?t:e.Theme.defineTheme(t.name||"builtin"+e.utils.IdGenerator.getNextUniqueId(),t)},e.Options.parseToolboxTree=function(t){return e.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),e.utils.toolbox.parseToolboxTree(t)},e.ScrollbarPair=function(t,n,o,s,c){this.workspace_=t,o=void 0===o||o;var v=(n=void 0===n||n)&&o;n&&(this.hScroll=new e.Scrollbar(t,!0,v,s,c)),o&&(this.vScroll=new e.Scrollbar(t,!1,v,s,c)),v&&(this.corner_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:e.Scrollbar.scrollbarThickness,width:e.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),e.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null},e.ScrollbarPair.prototype.dispose=function(){e.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},e.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var n=!1,o=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==t.scrollWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.scrollLeft==t.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==t.scrollHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.scrollTop==t.scrollTop||(o=!0)):o=n=!0,n||o){try{e.Events.disable(),this.hScroll&&n&&this.hScroll.resize(t),this.vScroll&&o&&this.vScroll.resize(t)}finally{e.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},e.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},e.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},e.ScrollbarPair.prototype.setOrigin=function(t,n){this.hScroll&&this.hScroll.setOrigin(t,n),this.vScroll&&this.vScroll.setOrigin(t,n)},e.ScrollbarPair.prototype.set=function(t,n,o){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(n,!1),(o||void 0===o)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},e.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},e.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},e.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},e.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},e.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},e.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},e.Scrollbar=function(t,n,o,s,c){this.workspace_=t,this.pair_=o||!1,this.horizontal_=n,this.margin_=void 0!==c?c:e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(s),this.position=new e.utils.Coordinate(0,0),t=e.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=e.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},e.Scrollbar.prototype.origin_=new e.utils.Coordinate(0,0),e.Scrollbar.prototype.startDragMouse_=0,e.Scrollbar.prototype.scrollbarLength_=0,e.Scrollbar.prototype.handleLength_=0,e.Scrollbar.prototype.handlePosition_=0,e.Scrollbar.prototype.isVisible_=!0,e.Scrollbar.prototype.containerVisible_=!0,e.Scrollbar.scrollbarThickness=15,e.Touch.TOUCH_ENABLED&&(e.Scrollbar.scrollbarThickness=25),e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,e.Scrollbar.metricsAreEquivalent_=function(t,n){return t.viewWidth==n.viewWidth&&t.viewHeight==n.viewHeight&&t.viewLeft==n.viewLeft&&t.viewTop==n.viewTop&&t.absoluteTop==n.absoluteTop&&t.absoluteLeft==n.absoluteLeft&&t.scrollWidth==n.scrollWidth&&t.scrollHeight==n.scrollHeight&&t.scrollLeft==n.scrollLeft&&t.scrollTop==n.scrollTop},e.Scrollbar.prototype.dispose=function(){this.cleanUp_(),e.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,e.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,e.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},e.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},e.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},e.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},e.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},e.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},e.Scrollbar.prototype.setPosition=function(t,n){this.position.x=t,this.position.y=n,e.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},e.Scrollbar.prototype.resize=function(t){!t&&!(t=this.workspace_.getMetrics())||this.oldHostMetrics_&&e.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},e.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},e.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeViewHorizontal=function(t){var n=t.viewWidth-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=e.Scrollbar.scrollbarThickness),this.setPosition(n,t.absoluteTop+t.viewHeight-e.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewWidth/t.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewLeft-t.scrollLeft)/(n=t.scrollWidth-t.viewWidth)*o),this.setHandlePosition(t),this.ratio=o/n}},e.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeViewVertical=function(t){var n=t.viewHeight-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-e.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewHeight/t.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewTop-t.scrollTop)/(n=t.scrollHeight-t.viewHeight)*o),this.setHandlePosition(t),this.ratio=o/n}},e.Scrollbar.prototype.createDom_=function(t){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(n+=" "+t),this.outerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{class:n},null),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((e.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),e.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},e.Scrollbar.prototype.isVisible=function(){return this.isVisible_},e.Scrollbar.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.setVisible=function(t){var n=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},e.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),e.Touch.clearTouchIdentifier(),this.cleanUp_(),e.utils.isRightButton(t))t.stopPropagation();else{var n=e.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var o=e.utils.getInjectionDivXY_(this.svgHandle_),s=this.handlePosition_,c=.95*this.handleLength_;n<=(o=this.horizontal_?o.x:o.y)?s-=c:n>=o+this.handleLength_&&(s+=c),this.setHandlePosition(this.constrainHandlePosition_(s)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},e.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),e.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,e.Scrollbar.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),e.Scrollbar.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},e.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},e.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),e.Touch.clearTouchIdentifier(),this.cleanUp_()},e.Scrollbar.prototype.cleanUp_=function(){e.hideChaff(!0),e.Scrollbar.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseUpWrapper_),e.Scrollbar.onMouseUpWrapper_=null),e.Scrollbar.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseMoveWrapper_),e.Scrollbar.onMouseMoveWrapper_=null)},e.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},e.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),n={};this.horizontal_?n.x=t:n.y=t,this.workspace_.setMetrics(n)},e.Scrollbar.prototype.set=function(t,n){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},e.Scrollbar.prototype.setOrigin=function(t,n){this.origin_=new e.utils.Coordinate(t,n)},e.Tooltip={},e.Tooltip.visible=!1,e.Tooltip.blocked_=!1,e.Tooltip.LIMIT=50,e.Tooltip.mouseOutPid_=0,e.Tooltip.showPid_=0,e.Tooltip.lastX_=0,e.Tooltip.lastY_=0,e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.OFFSET_X=0,e.Tooltip.OFFSET_Y=10,e.Tooltip.RADIUS_OK=10,e.Tooltip.HOVER_MS=750,e.Tooltip.MARGINS=5,e.Tooltip.DIV=null,e.Tooltip.getTooltipOfObject=function(t){if(t=e.Tooltip.getTargetObject_(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},e.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},e.Tooltip.createDom=function(){e.Tooltip.DIV||(e.Tooltip.DIV=document.createElement("div"),e.Tooltip.DIV.className="blocklyTooltipDiv",(e.parentContainer||document.body).appendChild(e.Tooltip.DIV))},e.Tooltip.bindMouseEvents=function(t){t.mouseOverWrapper_=e.browserEvents.bind(t,"mouseover",null,e.Tooltip.onMouseOver_),t.mouseOutWrapper_=e.browserEvents.bind(t,"mouseout",null,e.Tooltip.onMouseOut_),t.addEventListener("mousemove",e.Tooltip.onMouseMove_,!1)},e.Tooltip.unbindMouseEvents=function(t){t&&(e.browserEvents.unbind(t.mouseOverWrapper_),e.browserEvents.unbind(t.mouseOutWrapper_),t.removeEventListener("mousemove",e.Tooltip.onMouseMove_))},e.Tooltip.onMouseOver_=function(t){e.Tooltip.blocked_||(t=e.Tooltip.getTargetObject_(t.currentTarget),e.Tooltip.element_!=t&&(e.Tooltip.hide(),e.Tooltip.poisonedElement_=null,e.Tooltip.element_=t),clearTimeout(e.Tooltip.mouseOutPid_))},e.Tooltip.onMouseOut_=function(t){e.Tooltip.blocked_||(e.Tooltip.mouseOutPid_=setTimeout(function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},1),clearTimeout(e.Tooltip.showPid_))},e.Tooltip.onMouseMove_=function(t){if(e.Tooltip.element_&&e.Tooltip.element_.tooltip&&!e.Tooltip.blocked_)if(e.Tooltip.visible){var n=e.Tooltip.lastX_-t.pageX;t=e.Tooltip.lastY_-t.pageY,Math.sqrt(n*n+t*t)>e.Tooltip.RADIUS_OK&&e.Tooltip.hide()}else e.Tooltip.poisonedElement_!=e.Tooltip.element_&&(clearTimeout(e.Tooltip.showPid_),e.Tooltip.lastX_=t.pageX,e.Tooltip.lastY_=t.pageY,e.Tooltip.showPid_=setTimeout(e.Tooltip.show_,e.Tooltip.HOVER_MS))},e.Tooltip.dispose=function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},e.Tooltip.hide=function(){e.Tooltip.visible&&(e.Tooltip.visible=!1,e.Tooltip.DIV&&(e.Tooltip.DIV.style.display="none")),e.Tooltip.showPid_&&clearTimeout(e.Tooltip.showPid_)},e.Tooltip.block=function(){e.Tooltip.hide(),e.Tooltip.blocked_=!0},e.Tooltip.unblock=function(){e.Tooltip.blocked_=!1},e.Tooltip.show_=function(){if(!e.Tooltip.blocked_&&(e.Tooltip.poisonedElement_=e.Tooltip.element_,e.Tooltip.DIV)){e.Tooltip.DIV.textContent="";var t=e.Tooltip.getTooltipOfObject(e.Tooltip.element_);t=(t=e.utils.string.wrap(t,e.Tooltip.LIMIT)).split("\n");for(var n=0;n<t.length;n++){var o=document.createElement("div");o.appendChild(document.createTextNode(t[n])),e.Tooltip.DIV.appendChild(o)}t=e.Tooltip.element_.RTL,n=document.documentElement.clientWidth,o=document.documentElement.clientHeight,e.Tooltip.DIV.style.direction=t?"rtl":"ltr",e.Tooltip.DIV.style.display="block",e.Tooltip.visible=!0;var s=e.Tooltip.lastX_;s=t?s-(e.Tooltip.OFFSET_X+e.Tooltip.DIV.offsetWidth):s+e.Tooltip.OFFSET_X;var c=e.Tooltip.lastY_+e.Tooltip.OFFSET_Y;c+e.Tooltip.DIV.offsetHeight>o+window.scrollY&&(c-=e.Tooltip.DIV.offsetHeight+2*e.Tooltip.OFFSET_Y),t?s=Math.max(e.Tooltip.MARGINS-window.scrollX,s):s+e.Tooltip.DIV.offsetWidth>n+window.scrollX-2*e.Tooltip.MARGINS&&(s=n-e.Tooltip.DIV.offsetWidth-2*e.Tooltip.MARGINS),e.Tooltip.DIV.style.top=c+"px",e.Tooltip.DIV.style.left=s+"px"}},e.utils.aria={},e.utils.aria.ARIA_PREFIX_="aria-",e.utils.aria.ROLE_ATTRIBUTE_="role",e.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},e.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},e.utils.aria.setRole=function(t,n){t.setAttribute(e.utils.aria.ROLE_ATTRIBUTE_,n)},e.utils.aria.setState=function(t,n,o){Array.isArray(o)&&(o=o.join(" ")),t.setAttribute(e.utils.aria.ARIA_PREFIX_+n,o)},e.IASTNodeLocation=function(){},e.IASTNodeLocationSvg=function(){},e.IASTNodeLocationWithBlock=function(){},e.IKeyboardAccessible=function(){},e.utils.deprecation={},e.utils.deprecation.warn=function(t,n,o,s){t=t+" was deprecated on "+n+" and will be deleted on "+o+".",s&&(t+="\nUse "+s+" instead."),console.warn(t)},e.Connection=function(t,n){this.sourceBlock_=t,this.type=n},e.Connection.CAN_CONNECT=0,e.Connection.REASON_SELF_CONNECTION=1,e.Connection.REASON_WRONG_TYPE=2,e.Connection.REASON_TARGET_NULL=3,e.Connection.REASON_CHECKS_FAILED=4,e.Connection.REASON_DIFFERENT_WORKSPACES=5,e.Connection.REASON_SHADOW_PARENT=6,e.Connection.REASON_DRAG_CHECKS_FAILED=7,e.Connection.prototype.targetConnection=null,e.Connection.prototype.disposed=!1,e.Connection.prototype.check_=null,e.Connection.prototype.shadowDom_=null,e.Connection.prototype.x=0,e.Connection.prototype.y=0,e.Connection.prototype.connect_=function(t){var O,n=e.connectionTypes.INPUT_VALUE,o=this.getSourceBlock(),s=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var c=this.getShadowDom(!0);this.shadowDom_=null;var v=this.targetBlock();if(v.isShadow())v.dispose(!1);else{this.disconnect();var R=v}this.shadowDom_=c}e.Events.isEnabled()&&(O=new(e.Events.get(e.Events.BLOCK_MOVE))(s)),e.Connection.connectReciprocally_(this,t),s.setParent(o),O&&(O.recordNew(),e.Events.fire(O)),R&&((s=e.Connection.getConnectionForOrphanedConnection(s,t=this.type===n?R.outputConnection:R.previousConnection))?t.connect(s):t.onFailedConnect(this))},e.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},e.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Connection.prototype.isSuperior=function(){return this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.NEXT_STATEMENT},e.Connection.prototype.isConnected=function(){return!!this.targetConnection},e.Connection.prototype.canConnectWithReason=function(t){return e.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,t,!1)},e.Connection.prototype.checkConnection=function(t){e.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),o=n.canConnectWithReason(this,t,!1);if(o!=e.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(o,this,t))},e.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},e.Connection.prototype.isConnectionAllowed=function(t){return e.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!0)},e.Connection.prototype.onFailedConnect=function(t){},e.Connection.prototype.connect=function(t){if(this.targetConnection!=t&&this.getConnectionChecker().canConnect(this,t,!1)){var n=e.Events.getGroup();n||e.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n||e.Events.setGroup(!1)}},e.Connection.connectReciprocally_=function(t,n){if(!t||!n)throw Error("Cannot connect null connections.");t.targetConnection=n,n.targetConnection=t},e.Connection.getSingleConnection_=function(t,n){for(var v,o=null,s=(n=n.outputConnection).getConnectionChecker(),c=0;v=t.inputList[c];c++)if((v=v.connection)&&s.canConnect(n,v,!1)){if(o)return null;o=v}return o},e.Connection.getConnectionForOrphanedOutput_=function(t,n){for(var o;o=e.Connection.getSingleConnection_(t,n);)if(!(t=o.targetBlock())||t.isShadow())return o;return null},e.Connection.getConnectionForOrphanedConnection=function(t,n){if(n.type===e.connectionTypes.OUTPUT_VALUE)return e.Connection.getConnectionForOrphanedOutput_(t,n.getSourceBlock());t=t.lastConnectionInStack(!0);var o=n.getConnectionChecker();return t&&o.canConnect(n,t,!1)?t:null},e.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,o=t.getSourceBlock();t=this}else n=t.getSourceBlock(),o=this.sourceBlock_;var s=e.Events.getGroup();s||e.Events.setGroup(!0),this.disconnectInternal_(n,o),o.isShadow()||t.respawnShadow_(),s||e.Events.setGroup(!1)},e.Connection.prototype.disconnectInternal_=function(t,n){var o;e.Events.isEnabled()&&(o=new(e.Events.get(e.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),o&&(o.recordNew(),e.Events.fire(o))},e.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n)if((t=e.Xml.domToBlock(n,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},e.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},e.Connection.prototype.checkType=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!1)},e.Connection.prototype.checkType_=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(t)},e.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},e.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},e.Connection.prototype.getCheck=function(){return this.check_},e.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},e.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?e.Xml.blockToDom(this.targetBlock()):this.shadowDom_},e.Connection.prototype.neighbours=function(t){return[]},e.Connection.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_.inputList,o=0;o<n.length;o++)if(n[o].connection===this){t=n[o];break}return t},e.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var n="Output Connection of ";else if(t.previousConnection==this)n="Previous Connection of ";else if(t.nextConnection==this)n="Next Connection of ";else{n=null;for(var s,o=0;s=t.inputList[o];o++)if(s.connection==this){n=s;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+t.toDevString()},e.IConnectionChecker=function(){},e.ConnectionChecker=function(){},e.ConnectionChecker.prototype.canConnect=function(t,n,o,s){return this.canConnectWithReason(t,n,o,s)==e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.canConnectWithReason=function(t,n,o,s){var c=this.doSafetyChecks(t,n);return c!=e.Connection.CAN_CONNECT?c:this.doTypeChecks(t,n)?o&&!this.doDragChecks(t,n,s||0)?e.Connection.REASON_DRAG_CHECKS_FAILED:e.Connection.CAN_CONNECT:e.Connection.REASON_CHECKS_FAILED},e.ConnectionChecker.prototype.getErrorMessage=function(t,n,o){switch(t){case e.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case e.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case e.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case e.Connection.REASON_TARGET_NULL:return"Target connection is null.";case e.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+o.getCheck();case e.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case e.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},e.ConnectionChecker.prototype.doSafetyChecks=function(t,n){if(!t||!n)return e.Connection.REASON_TARGET_NULL;if(t.isSuperior())var o=t.getSourceBlock(),s=n.getSourceBlock();else s=t.getSourceBlock(),o=n.getSourceBlock();return o==s?e.Connection.REASON_SELF_CONNECTION:n.type!=e.OPPOSITE_TYPE[t.type]?e.Connection.REASON_WRONG_TYPE:o.workspace!==s.workspace?e.Connection.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!s.isShadow()?e.Connection.REASON_SHADOW_PARENT:e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.doTypeChecks=function(t,n){if(t=t.getCheck(),n=n.getCheck(),!t||!n)return!0;for(var o=0;o<t.length;o++)if(-1!=n.indexOf(t[o]))return!0;return!1},e.ConnectionChecker.prototype.doDragChecks=function(t,n,o){if(t.distanceFrom(n)>o||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case e.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,n);case e.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case e.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case e.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!t.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==e.draggingConnections.indexOf(n)},e.ConnectionChecker.prototype.canConnectToPrevious_=function(t,n){return!(t.targetConnection||-1!=e.draggingConnections.indexOf(n)||n.targetConnection&&(!(t=n.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},e.registry.register(e.registry.Type.CONNECTION_CHECKER,e.registry.DEFAULT,e.ConnectionChecker),e.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},e.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},e.VariableMap.prototype.renameVariable=function(t,n){var o=this.getVariable(n,t.type),s=this.workspace.getAllBlocks(!1);e.Events.setGroup(!0);try{o&&o.getId()!=t.getId()?this.renameVariableWithConflict_(t,n,o,s):this.renameVariableAndUses_(t,n,s)}finally{e.Events.setGroup(!1)}},e.VariableMap.prototype.renameVariableById=function(t,n){var o=this.getVariableById(t);if(!o)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(o,n)},e.VariableMap.prototype.renameVariableAndUses_=function(t,n,o){for(e.Events.fire(new(e.Events.get(e.Events.VAR_RENAME))(t,n)),t.name=n,n=0;n<o.length;n++)o[n].updateVarName(t)},e.VariableMap.prototype.renameVariableWithConflict_=function(t,n,o,s){var c=t.type;for(n!=o.name&&this.renameVariableAndUses_(o,n,s),n=0;n<s.length;n++)s[n].renameVarById(t.getId(),o.getId());e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t)),t=this.getVariablesOfType(c).indexOf(t),this.variableMap_[c].splice(t,1)},e.VariableMap.prototype.createVariable=function(t,n,o){var s=this.getVariable(t,n);if(s){if(o&&s.getId()!=o)throw Error('Variable "'+t+'" is already in use and its id is "'+s.getId()+'" which conflicts with the passed in id, "'+o+'".');return s}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return s=o||e.utils.genUid(),s=new e.VariableModel(this.workspace,t,n=n||"",s),(t=this.variableMap_[n]||[]).push(s),delete this.variableMap_[n],this.variableMap_[n]=t,s},e.VariableMap.prototype.deleteVariable=function(t){for(var s,n=this.variableMap_[t.type],o=0;s=n[o];o++)if(s.getId()==t.getId()){n.splice(o,1),e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t));break}},e.VariableMap.prototype.deleteVariableById=function(t){var n=this.getVariableById(t);if(n){var c,o=n.name,s=this.getVariableUsesById(t);for(t=0;c=s[t];t++)if("procedures_defnoreturn"==c.type||"procedures_defreturn"==c.type)return t=c.getFieldValue("NAME"),o=e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",t),void e.alert(o);var v=this;1<s.length?(o=e.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(s.length)).replace("%2",o),e.confirm(o,function(R){R&&n&&v.deleteVariableInternal(n,s)})):v.deleteVariableInternal(n,s)}else console.warn("Can't delete non-existent variable: "+t)},e.VariableMap.prototype.deleteVariableInternal=function(t,n){var o=e.Events.getGroup();o||e.Events.setGroup(!0);try{for(var s=0;s<n.length;s++)n[s].dispose(!0);this.deleteVariable(t)}finally{o||e.Events.setGroup(!1)}},e.VariableMap.prototype.getVariable=function(t,n){if(n=this.variableMap_[n||""])for(var s,o=0;s=n[o];o++)if(e.Names.equals(s.name,t))return s;return null},e.VariableMap.prototype.getVariableById=function(t){for(var n=Object.keys(this.variableMap_),o=0;o<n.length;o++)for(var v,s=n[o],c=0;v=this.variableMap_[s][c];c++)if(v.getId()==t)return v;return null},e.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},e.VariableMap.prototype.getVariableTypes=function(t){var n={};e.utils.object.mixin(n,this.variableMap_),t&&t.getPotentialVariableMap()&&e.utils.object.mixin(n,t.getPotentialVariableMap().variableMap_),t=Object.keys(n),n=!1;for(var o=0;o<t.length;o++)""==t[o]&&(n=!0);return n||t.push(""),t},e.VariableMap.prototype.getAllVariables=function(){var n,t=[];for(n in this.variableMap_)t=t.concat(this.variableMap_[n]);return t},e.VariableMap.prototype.getAllVariableNames=function(){var n,t=[];for(n in this.variableMap_)for(var c,o=this.variableMap_[n],s=0;c=o[s];s++)t.push(c.name);return t},e.VariableMap.prototype.getVariableUsesById=function(t){for(var n=[],o=this.workspace.getAllBlocks(!1),s=0;s<o.length;s++){var c=o[s].getVarModels();if(c)for(var v=0;v<c.length;v++)c[v].getId()==t&&n.push(o[s])}return n},e.Workspace=function(t){this.id=e.utils.genUid(),e.Workspace.WorkspaceDB_[this.id]=this,this.options=t||new e.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(e.registry.getClassFromOptions(e.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new e.VariableMap(this),this.potentialVariableMap_=null},e.Workspace.prototype.rendered=!1,e.Workspace.prototype.isClearing=!1,e.Workspace.prototype.MAX_UNDO=1024,e.Workspace.prototype.connectionDBList=null,e.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete e.Workspace.WorkspaceDB_[this.id]},e.Workspace.SCAN_ANGLE=3,e.Workspace.prototype.sortObjects_=function(t,n){return t=t.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),t.y+e.Workspace.prototype.sortObjects_.offset*t.x-(n.y+e.Workspace.prototype.sortObjects_.offset*n.x)},e.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},e.Workspace.prototype.removeTopBlock=function(t){if(!e.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},e.Workspace.prototype.getTopBlocks=function(t){var n=[].concat(this.topBlocks_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},e.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},e.Workspace.prototype.getBlocksByType=function(t,n){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),n&&1<t.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t):[]},e.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},e.Workspace.prototype.removeTopComment=function(t){if(!e.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},e.Workspace.prototype.getTopComments=function(t){var n=[].concat(this.topComments_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var n=[],o=0;o<t.length;o++)n.push.apply(n,t[o].getDescendants(!0))}else for(n=this.getTopBlocks(!1),o=0;o<n.length;o++)n.push.apply(n,n[o].getChildren(!1));return n.filter(function(s){return!s.isInsertionMarker()})},e.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=e.Events.getGroup();for(t||e.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);t||e.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},e.Workspace.prototype.renameVariableById=function(t,n){this.variableMap_.renameVariableById(t,n)},e.Workspace.prototype.createVariable=function(t,n,o){return this.variableMap_.createVariable(t,n,o)},e.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},e.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},e.Workspace.prototype.getVariable=function(t,n){return this.variableMap_.getVariable(t,n)},e.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},e.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},e.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},e.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},e.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},e.Workspace.prototype.getWidth=function(){return 0},e.Workspace.prototype.newBlock=function(t,n){return new e.Block(this,t,n)},e.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},e.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},e.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var o,n=0;for(o in t){if(t[o]>this.remainingCapacityOfType(o))return!1;n+=t[o]}return!(n>this.remainingCapacity())},e.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},e.Workspace.prototype.getUndoStack=function(){return this.undoStack_},e.Workspace.prototype.getRedoStack=function(){return this.redoStack_},e.Workspace.prototype.undo=function(t){var n=t?this.redoStack_:this.undoStack_,o=t?this.undoStack_:this.redoStack_,s=n.pop();if(s){for(var c=[s];n.length&&s.group&&s.group==n[n.length-1].group;)c.push(n.pop());for(n=0;s=c[n];n++)o.push(s);c=e.Events.filter(c,t),e.Events.recordUndo=!1;try{for(n=0;s=c[n];n++)s.run(t)}finally{e.Events.recordUndo=!0}}},e.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,e.Events.clearPendingUndo()},e.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},e.Workspace.prototype.removeChangeListener=function(t){e.utils.arrayRemove(this.listeners_,t)},e.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var o,n=0;o=this.listeners_[n];n++)o(t)},e.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},e.Workspace.prototype.setBlockById=function(t,n){this.blockDB_[t]=n},e.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},e.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},e.Workspace.prototype.allInputsFilled=function(t){for(var s,n=this.getTopBlocks(!1),o=0;s=n[o];o++)if(!s.allInputsFilled(t))return!1;return!0},e.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},e.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new e.VariableMap(this)},e.Workspace.prototype.getVariableMap=function(){return this.variableMap_},e.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},e.Workspace.WorkspaceDB_=Object.create(null),e.Workspace.getById=function(t){return e.Workspace.WorkspaceDB_[t]||null},e.Workspace.getAll=function(){var n,t=[];for(n in e.Workspace.WorkspaceDB_)t.push(e.Workspace.WorkspaceDB_[n]);return t},e.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.WorkspaceDragSurfaceSvg.prototype.SVG_=null,e.WorkspaceDragSurfaceSvg.prototype.container_=null,e.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},e.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,n){t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return e.utils.getRelativeXY(this.SVG_)},e.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],o=this.SVG_.childNodes[1];if(!(n&&o&&e.utils.dom.hasClass(n,"blocklyBlockCanvas")&&e.utils.dom.hasClass(o,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?e.utils.dom.insertAfter(n,this.previousSibling_):t.insertBefore(n,t.firstChild),e.utils.dom.insertAfter(o,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");e.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},e.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,n,o,s,c,v){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=o,t.setAttribute("transform","translate(0, 0) scale("+v+")"),n.setAttribute("transform","translate(0, 0) scale("+v+")"),this.SVG_.setAttribute("width",s),this.SVG_.setAttribute("height",c),this.SVG_.appendChild(t),this.SVG_.appendChild(n),this.SVG_.style.display="block"},e.blockRendering={},e.blockRendering.useDebugger=!1,e.blockRendering.register=function(t,n){e.registry.register(e.registry.Type.RENDERER,t,n)},e.blockRendering.unregister=function(t){e.registry.unregister(e.registry.Type.RENDERER,t)},e.blockRendering.startDebugger=function(){e.blockRendering.useDebugger=!0},e.blockRendering.stopDebugger=function(){e.blockRendering.useDebugger=!1},e.blockRendering.init=function(t,n,o){return(t=new(e.registry.getClass(e.registry.Type.RENDERER,t))(t)).init(n,o),t},e.ASTNode=function(t,n,o){if(!n)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=e.ASTNode.isConnectionType_(t),this.location_=n,this.wsCoordinate_=null,this.processParams_(o||null)},e.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},e.ASTNode.NAVIGATE_ALL_FIELDS=!1,e.ASTNode.DEFAULT_OFFSET_Y=-20,e.ASTNode.isConnectionType_=function(t){switch(t){case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:case e.ASTNode.types.INPUT:case e.ASTNode.types.OUTPUT:return!0}return!1},e.ASTNode.createFieldNode=function(t){return t?new e.ASTNode(e.ASTNode.types.FIELD,t):null},e.ASTNode.createConnectionNode=function(t){if(!t)return null;var n=t.type;return n==e.connectionTypes.INPUT_VALUE||n==e.connectionTypes.NEXT_STATEMENT&&t.getParentInput()?e.ASTNode.createInputNode(t.getParentInput()):n==e.connectionTypes.NEXT_STATEMENT?new e.ASTNode(e.ASTNode.types.NEXT,t):n==e.connectionTypes.OUTPUT_VALUE?new e.ASTNode(e.ASTNode.types.OUTPUT,t):n==e.connectionTypes.PREVIOUS_STATEMENT?new e.ASTNode(e.ASTNode.types.PREVIOUS,t):null},e.ASTNode.createInputNode=function(t){return t&&t.connection?new e.ASTNode(e.ASTNode.types.INPUT,t.connection):null},e.ASTNode.createBlockNode=function(t){return t?new e.ASTNode(e.ASTNode.types.BLOCK,t):null},e.ASTNode.createStackNode=function(t){return t?new e.ASTNode(e.ASTNode.types.STACK,t):null},e.ASTNode.createWorkspaceNode=function(t,n){return n&&t?new e.ASTNode(e.ASTNode.types.WORKSPACE,t,{wsCoordinate:n}):null},e.ASTNode.createTopNode=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},e.ASTNode.prototype.getLocation=function(){return this.location_},e.ASTNode.prototype.getType=function(){return this.type_},e.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},e.ASTNode.prototype.isConnection=function(){return this.isConnection_},e.ASTNode.prototype.findNextForInput_=function(){var o,t=this.location_.getParentInput(),n=t.getSourceBlock();for(t=n.inputList.indexOf(t)+1;o=n.inputList[t];t++){for(var v,s=o.fieldRow,c=0;v=s[c];c++)if(v.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(v);if(o.connection)return e.ASTNode.createInputNode(o)}return null},e.ASTNode.prototype.findNextForField_=function(){var t=this.location_,n=t.getParentInput(),o=t.getSourceBlock(),s=o.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)+1;n=o.inputList[s];s++){for(var c=n.fieldRow;t<c.length;){if(c[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(c[t]);t++}if(t=0,n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.findPrevForInput_=function(){for(var s,t=this.location_.getParentInput(),n=t.getSourceBlock(),o=n.inputList.indexOf(t);s=n.inputList[o];o--){if(s.connection&&s!==t)return e.ASTNode.createInputNode(s);for(var v,c=(s=s.fieldRow).length-1;v=s[c];c--)if(v.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(v)}return null},e.ASTNode.prototype.findPrevForField_=function(){var c,t=this.location_,n=t.getParentInput(),o=t.getSourceBlock(),s=o.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)-1;c=o.inputList[s];s--){if(c.connection&&c!==n)return e.ASTNode.createInputNode(c);for(c=c.fieldRow;-1<t;){if(c[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(c[t]);t--}0<=s-1&&(t=o.inputList[s-1].fieldRow.length-1)}return null},e.ASTNode.prototype.navigateBetweenStacks_=function(t){var n=this.getLocation();if(n instanceof e.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var o=n.getRootBlock();n=o.workspace.getTopBlocks(!0);for(var c,s=0;c=n[s];s++)if(o.id==c.id)return-1==(t=s+(t?1:-1))||t==n.length?null:e.ASTNode.createStackNode(n[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},e.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var n=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?e.ASTNode.createInputNode(n.targetConnection.getParentInput()):e.ASTNode.createStackNode(t)},e.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var o,n=0;o=t[n];n++){for(var v,s=o.fieldRow,c=0;v=s[c];c++)if(v.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(v);if(o.connection)return e.ASTNode.createInputNode(o)}return null},e.ASTNode.prototype.getSourceBlock=function(){return this.getType()===e.ASTNode.types.BLOCK||this.getType()===e.ASTNode.types.STACK?this.getLocation():this.getType()===e.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},e.ASTNode.prototype.next=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case e.ASTNode.types.OUTPUT:var t=this.location_;return e.ASTNode.createBlockNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return this.findNextForField_();case e.ASTNode.types.INPUT:return this.findNextForInput_();case e.ASTNode.types.BLOCK:return e.ASTNode.createConnectionNode(this.location_.nextConnection);case e.ASTNode.types.PREVIOUS:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.NEXT:return e.ASTNode.createConnectionNode((t=this.location_).targetConnection)}return null},e.ASTNode.prototype.in=function(){switch(this.type_){case e.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return e.ASTNode.createStackNode(t[0]);break;case e.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(t=this.location_);case e.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(t=this.location_);case e.ASTNode.types.INPUT:return e.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},e.ASTNode.prototype.prev=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case e.ASTNode.types.FIELD:return this.findPrevForField_();case e.ASTNode.types.INPUT:return this.findPrevForInput_();case e.ASTNode.types.BLOCK:var t=this.location_;return e.ASTNode.createConnectionNode(t.previousConnection||t.outputConnection);case e.ASTNode.types.PREVIOUS:if((t=(t=this.location_).targetConnection)&&!t.getParentInput())return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.NEXT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock())}return null},e.ASTNode.prototype.out=function(){switch(this.type_){case e.ASTNode.types.STACK:var t=this.location_,n=t.getRelativeToSurfaceXY();return n=new e.utils.Coordinate(n.x,n.y+e.ASTNode.DEFAULT_OFFSET_Y),e.ASTNode.createWorkspaceNode(t.workspace,n);case e.ASTNode.types.OUTPUT:return(n=(t=this.location_).targetConnection)?e.ASTNode.createConnectionNode(n):e.ASTNode.createStackNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.INPUT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(t=this.location_);case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((t=this.location_).getSourceBlock())}return null},e.Blocks=Object.create(null),e.Extensions={},e.Extensions.ALL_=Object.create(null),e.Extensions.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(e.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+t+'" must be a function');e.Extensions.ALL_[t]=n},e.Extensions.registerMixin=function(t,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+t+'" must be a object');e.Extensions.register(t,function(){this.mixin(n)})},e.Extensions.registerMutator=function(t,n,o,s){var c='Error when registering mutator "'+t+'": ';e.Extensions.checkHasFunction_(c,n.domToMutation,"domToMutation"),e.Extensions.checkHasFunction_(c,n.mutationToDom,"mutationToDom");var v=e.Extensions.checkMutatorDialog_(n,c);if(o&&"function"!=typeof o)throw Error('Extension "'+t+'" is not a function');e.Extensions.register(t,function(){if(v){if(!e.Mutator)throw Error(c+"Missing require for Blockly.Mutator");this.setMutator(new e.Mutator(s||[]))}this.mixin(n),o&&o.apply(this)})},e.Extensions.unregister=function(t){e.Extensions.ALL_[t]?delete e.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},e.Extensions.apply=function(t,n,o){var s=e.Extensions.ALL_[t];if("function"!=typeof s)throw Error('Error: Extension "'+t+'" not found.');if(o)e.Extensions.checkNoMutatorProperties_(t,n);else var c=e.Extensions.getMutatorProperties_(n);if(s.apply(n),o)e.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',n);else if(!e.Extensions.mutatorPropertiesMatch_(c,n))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},e.Extensions.checkHasFunction_=function(t,n,o){if(!n)throw Error(t+'missing required property "'+o+'"');if("function"!=typeof n)throw Error(t+'" required property "'+o+'" must be a function')},e.Extensions.checkNoMutatorProperties_=function(t,n){if(e.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+n.id)},e.Extensions.checkMutatorDialog_=function(t,n){var o=void 0!==t.compose,s=void 0!==t.decompose;if(o&&s){if("function"!=typeof t.compose)throw Error(n+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(n+"decompose must be a function.");return!0}if(!o&&!s)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},e.Extensions.checkBlockHasMutatorProperties_=function(t,n){if("function"!=typeof n.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');e.Extensions.checkMutatorDialog_(n,t)},e.Extensions.getMutatorProperties_=function(t){var n=[];return void 0!==t.domToMutation&&n.push(t.domToMutation),void 0!==t.mutationToDom&&n.push(t.mutationToDom),void 0!==t.compose&&n.push(t.compose),void 0!==t.decompose&&n.push(t.decompose),n},e.Extensions.mutatorPropertiesMatch_=function(t,n){if((n=e.Extensions.getMutatorProperties_(n)).length!=t.length)return!1;for(var o=0;o<n.length;o++)if(t[o]!=n[o])return!1;return!0},e.Extensions.buildTooltipForDropdown=function(t,n){var o=[];return"object"==typeof document&&e.utils.runAfterPageLoad(function(){for(var s in n)e.utils.checkMessageReferences(n[s])}),function(){this.type&&-1==o.indexOf(this.type)&&(e.Extensions.checkDropdownOptionsInTable_(this,t,n),o.push(this.type)),this.setTooltip(function(){var s=String(this.getFieldValue(t)),c=n[s];return null==c?-1==o.indexOf(this.type)&&(s="No tooltip mapping for value "+s+" of field "+t,null!=this.type&&(s+=" of block type "+this.type),console.warn(s+".")):c=e.utils.replaceMessageReferences(c),c}.bind(this))}},e.Extensions.checkDropdownOptionsInTable_=function(t,n,o){var s=t.getField(n);if(!s.isOptionListDynamic()){s=s.getOptions();for(var c=0;c<s.length;++c){var v=s[c][1];null==o[v]&&console.warn("No tooltip mapping for value "+v+" of field "+n+" of block type "+t.type)}}},e.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&e.utils.runAfterPageLoad(function(){e.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var o=this.getField(n);return e.utils.replaceMessageReferences(t).replace("%1",o?o.getText():"")}.bind(this))}},e.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},e.Extensions.register("parent_tooltip_when_inline",e.Extensions.extensionParentTooltip_),e.fieldRegistry={},e.fieldRegistry.register=function(t,n){e.registry.register(e.registry.Type.FIELD,t,n)},e.fieldRegistry.unregister=function(t){e.registry.unregister(e.registry.Type.FIELD,t)},e.fieldRegistry.fromJson=function(t){var n=e.registry.getObject(e.registry.Type.FIELD,t.type);return n?n.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},e.IDeletable=function(){},e.blockAnimations={},e.blockAnimations.disconnectPid_=0,e.blockAnimations.disconnectGroup_=null,e.blockAnimations.disposeUiEffect=function(t){var n=t.workspace,o=t.getSvgRoot();n.getAudioManager().play("delete"),t=n.getSvgXY(o),(o=o.cloneNode(!0)).translateX_=t.x,o.translateY_=t.y,o.setAttribute("transform","translate("+t.x+","+t.y+")"),n.getParentSvg().appendChild(o),o.bBox_=o.getBBox(),e.blockAnimations.disposeUiStep_(o,n.RTL,new Date,n.scale)},e.blockAnimations.disposeUiStep_=function(t,n,o,s){var c=(new Date-o)/150;1<c?e.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(n?-1:1)*t.bBox_.width*s/2*c)+","+(t.translateY_+t.bBox_.height*s*c)+") scale("+(1-c)*s+")"),setTimeout(e.blockAnimations.disposeUiStep_,10,t,n,o,s))},e.blockAnimations.connectionUiEffect=function(t){var n=t.workspace,o=n.scale;if(n.getAudioManager().play("click"),!(1>o)){var s=n.getSvgXY(t.getSvgRoot());t.outputConnection?(s.x+=(t.RTL?3:-3)*o,s.y+=13*o):t.previousConnection&&(s.x+=(t.RTL?-23:23)*o,s.y+=3*o),t=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:s.x,cy:s.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),e.blockAnimations.connectionUiStep_(t,new Date,o)}},e.blockAnimations.connectionUiStep_=function(t,n,o){var s=(new Date-n)/150;1<s?e.utils.dom.removeNode(t):(t.setAttribute("r",25*s*o),t.style.opacity=1-s,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.connectionUiStep_,10,t,n,o))},e.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var n=t.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,t.RTL||(n*=-1),e.blockAnimations.disconnectUiStep_(t.getSvgRoot(),n,new Date)}},e.blockAnimations.disconnectUiStep_=function(t,n,o){var s=(new Date-o)/200;1<s?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(s*Math.PI*3)*(1-s)*n)+")",e.blockAnimations.disconnectGroup_=t,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.disconnectUiStep_,10,t,n,o)),t.setAttribute("transform",t.translate_+t.skew_)},e.blockAnimations.disconnectUiStop=function(){if(e.blockAnimations.disconnectGroup_){clearTimeout(e.blockAnimations.disconnectPid_);var t=e.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),e.blockAnimations.disconnectGroup_=null}},e.Events.BlockDrag=function(t,n,o){e.Events.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=n,this.blocks=o},e.utils.object.inherits(e.Events.BlockDrag,e.Events.UiBase),e.Events.BlockDrag.prototype.type=e.Events.BLOCK_DRAG,e.Events.BlockDrag.prototype.toJson=function(){var t=e.Events.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},e.Events.BlockDrag.prototype.fromJson=function(t){e.Events.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},e.registry.register(e.registry.Type.EVENT,e.Events.BLOCK_DRAG,e.Events.BlockDrag),e.IBlockDragger=function(){},e.InsertionMarkerManager=function(t){this.topBlock_=e.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",e.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,e.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{e.Events.enable()}},e.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},e.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},e.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(e.Events.disable(),this.hidePreview_(),e.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;e.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},e.InsertionMarkerManager.prototype.update=function(t,n){var o=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(o,n))||this.shouldUpdatePreviews_(o,t))&&(e.Events.disable(),this.maybeHidePreview_(o),this.maybeShowPreview_(o),e.Events.enable())},e.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var n=t.type;e.Events.disable();try{var o=this.workspace_.newBlock(n);if(o.setInsertionMarker(!0),t.mutationToDom){var s=t.mutationToDom();s&&o.domToMutation(s)}for(n=0;n<t.inputList.length;n++){var c=t.inputList[n];if(c.name!=e.constants.COLLAPSED_INPUT_NAME){var v=o.inputList[n];if(!v)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(s=0;s<c.fieldRow.length;s++){var R=c.fieldRow[s],O=v.fieldRow[s];if(!O)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));O.setValue(R.getValue())}}}o.setCollapsed(t.isCollapsed()),o.setInputsInline(t.getInputsInline()),o.initSvg(),o.getSvgRoot().setAttribute("visibility","hidden")}finally{e.Events.enable()}return o},e.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(t.push(n),this.lastOnStack_=n,this.lastMarker_){e.Events.disable();try{this.lastMarker_.dispose()}finally{e.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return t},e.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,n){var o=t.local,s=t.closest;return t=t.radius,o&&s?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==s&&this.localConnection_==o||(o=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(o*o+n*n),s&&t>n-e.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},e.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var n=this.getStartRadius_(),o=null,s=null,c=0;c<this.availableConnections_.length;c++){var v=this.availableConnections_[c],R=v.closest(n,t);R.connection&&(o=R.connection,s=v,n=R.radius)}return{closest:o,local:s,radius:n}},e.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?e.CONNECTING_SNAP_RADIUS:e.SNAP_RADIUS},e.InsertionMarkerManager.prototype.shouldDelete_=function(t,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,e.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,t&&!!t.closest)},e.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var n=t.closest;t=t.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=t,this.showPreview_()))}},e.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&n.shouldHighlightConnection(t)&&t.highlight()},e.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var n=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(n||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},e.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},e.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,n=this.closestConnection_,o=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=o.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");o.render(),o.rendered=!0,o.getSvgRoot().setAttribute("visibility","visible"),t&&n&&o.positionNearConnection(t,n),n&&t.connect(n),this.markerConnection_=t},e.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,n=t.getSourceBlock(),o=n.nextConnection,s=n.previousConnection,c=n.outputConnection;if(c=t.type==e.connectionTypes.INPUT_VALUE&&!(c&&c.targetConnection),!(t!=o||s&&s.targetConnection)||c?t.targetBlock().unplug(!1):t.type==e.connectionTypes.NEXT_STATEMENT&&t!=o?((o=t.targetConnection).getSourceBlock().unplug(!1),s=s?s.targetConnection:null,n.unplug(!0),s&&s.connect(o)):n.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=n.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},e.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},e.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},e.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},e.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},e.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},e.BlockDragger=function(t,n){this.draggingBlock_=t,this.workspace_=n,this.draggedConnectionManager_=new e.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=e.BlockDragger.initIconData_(t)},e.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},e.BlockDragger.initIconData_=function(t){var n=[];t=t.getDescendants(!1);for(var s,o=0;s=t[o];o++){s=s.getIcons();for(var c=0;c<s.length;c++){var v={location:s[c].getIconLocation(),icon:s[c]};n.push(v)}}return n},e.BlockDragger.prototype.startDrag=function(t,n){e.Events.getGroup()||e.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),e.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),e.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},e.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},e.BlockDragger.prototype.disconnectBlock_=function(t,n){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),e.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},e.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.drag=function(t,n){n=this.pixelsToWorkspaceUnits_(n);var o=e.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(n),o=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(n,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==o&&(o&&o.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},e.BlockDragger.prototype.endDrag=function(t,n){if(this.drag(t,n),this.dragIconData_=[],this.fireDragEndEvent_(),e.utils.dom.stopTextWidthCache(),e.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{var o=(t=this.getNewLocationAfterDrag_(n)).delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),o?this.updateBlockAfterMove_(o):e.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var n={};return n.delta=this.pixelsToWorkspaceUnits_(t),n.newLocation=e.utils.Coordinate.sum(this.startXY_,n.delta),n},e.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),e.draggingConnections=[],!0)},e.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},e.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.updateToolboxStyle_=function(t){var n=this.workspace_.getToolbox();if(n){var o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&"function"==typeof n.removeStyle?n.removeStyle(o):t||"function"!=typeof n.addStyle||n.addStyle(o)}},e.BlockDragger.prototype.fireMoveEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),e.Events.fire(t)},e.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},e.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BlockDragger.prototype.dragIcons_=function(t){for(var n=0;n<this.dragIconData_.length;n++){var o=this.dragIconData_[n];o.icon.setIconLocation(e.utils.Coordinate.sum(o.location,t))}},e.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},e.registry.register(e.registry.Type.BLOCK_DRAGGER,e.registry.DEFAULT,e.BlockDragger),e.IContextMenu=function(){},e.IDraggable=function(){},e.IBubble=function(){},e.Bubble=function(t,n,o,s,c,v){this.workspace_=t,this.content_=n,this.shape_=o,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,o=e.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(o=-o),this.arrow_radians_=e.utils.math.toRadians(o),t.getBubbleCanvas().appendChild(this.createDom_(n,!(!c||!v))),this.setAnchorLocation(s),c&&v||(c=(t=this.content_.getBBox()).width+2*e.Bubble.BORDER_WIDTH,v=t.height+2*e.Bubble.BORDER_WIDTH),this.setBubbleSize(c,v),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},e.Bubble.BORDER_WIDTH=6,e.Bubble.ARROW_THICKNESS=5,e.Bubble.ARROW_ANGLE=20,e.Bubble.ARROW_BEND=4,e.Bubble.ANCHOR_RADIUS=8,e.Bubble.onMouseUpWrapper_=null,e.Bubble.onMouseMoveWrapper_=null,e.Bubble.unbindDragEvents_=function(){e.Bubble.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseUpWrapper_),e.Bubble.onMouseUpWrapper_=null),e.Bubble.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseMoveWrapper_),e.Bubble.onMouseMoveWrapper_=null)},e.Bubble.bubbleMouseUp_=function(t){e.Touch.clearTouchIdentifier(),e.Bubble.unbindDragEvents_()},e.Bubble.prototype.rendered_=!1,e.Bubble.prototype.anchorXY_=null,e.Bubble.prototype.relativeLeft_=0,e.Bubble.prototype.relativeTop_=0,e.Bubble.prototype.width_=0,e.Bubble.prototype.height_=0,e.Bubble.prototype.autoLayout_=!0,e.Bubble.prototype.createDom_=function(t,n){this.bubbleGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var o={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return e.utils.userAgent.JAVA_FX&&(o={}),o=e.utils.dom.createSvgElement(e.utils.Svg.G,o,this.bubbleGroup_),this.bubbleArrow_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{},o),this.bubbleBack_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH},o),n?(this.resizeGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e.utils.dom.createSvgElement(e.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*e.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=e.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=e.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},e.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},e.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},e.Bubble.prototype.bubbleMouseDown_=function(t){var n=this.workspace_.getGesture(t);n&&n.handleBubbleStart(t,this)},e.Bubble.prototype.showContextMenu=function(t){},e.Bubble.prototype.isDeletable=function(){return!1},e.Bubble.prototype.setDeleteStyle=function(t){},e.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),e.Bubble.unbindDragEvents_(),e.utils.isRightButton(t)||(this.workspace_.startDrag(t,new e.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),e.Bubble.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,e.Bubble.bubbleMouseUp_),e.Bubble.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),e.hideChaff()),t.stopPropagation()},e.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},e.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},e.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},e.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},e.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},e.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(t),o=this.getOptimalRelativeTop_(t),s=this.shape_.getBBox(),c={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},v={x:-this.width_-30,y:o};o={x:s.width,y:o};var R={x:n,y:s.height};n=s.width<s.height?o:R,s=s.width<s.height?R:o,o=this.getOverlap_(c,t),R=this.getOverlap_(v,t);var O=this.getOverlap_(n,t);t=this.getOverlap_(s,t),o==(t=Math.max(o,R,O,t))?(this.relativeLeft_=c.x,this.relativeTop_=c.y):R==t?(this.relativeLeft_=v.x,this.relativeTop_=v.y):O==t?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=s.x,this.relativeTop_=s.y)},e.Bubble.prototype.getOverlap_=function(t,n){var o=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(o+this.width_,n.left+n.width)-Math.max(o,n.left))*(Math.min(t+this.height_,n.top+n.height)-Math.max(t,n.top))/(this.width_*this.height_)))},e.Bubble.prototype.getOptimalRelativeLeft_=function(t){var n=-this.width_/4;if(this.width_>t.width)return n;if(this.workspace_.RTL)var o=this.anchorXY_.x-n,s=o-this.width_,c=t.left+t.width,v=t.left+e.Scrollbar.scrollbarThickness/this.workspace_.scale;else o=(s=n+this.anchorXY_.x)+this.width_,v=t.left,c=t.left+t.width-e.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?s<v?n=-(v-this.anchorXY_.x+this.width_):o>c&&(n=-(c-this.anchorXY_.x)):s<v?n=v-this.anchorXY_.x:o>c&&(n=c-this.anchorXY_.x-this.width_),n},e.Bubble.prototype.getOptimalRelativeTop_=function(t){var n=-this.height_/4;if(this.height_>t.height)return n;var o=this.anchorXY_.y+n,c=t.top;t=t.top+t.height-e.Scrollbar.scrollbarThickness/this.workspace_.scale;var v=this.anchorXY_.y;return o<c?n=c-v:o+this.height_>t&&(n=t-v-this.height_),n},e.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;this.moveTo(t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},e.Bubble.prototype.moveTo=function(t,n){this.bubbleGroup_.setAttribute("transform","translate("+t+","+n+")")},e.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},e.Bubble.prototype.getBubbleSize=function(){return new e.utils.Size(this.width_,this.height_)},e.Bubble.prototype.setBubbleSize=function(t,n){var o=2*e.Bubble.BORDER_WIDTH;t=Math.max(t,o+45),n=Math.max(n,o+20),this.width_=t,this.height_=n,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*e.Bubble.BORDER_WIDTH+","+(n-o)+") scale(-1 1)":"translate("+(t-o)+","+(n-o)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},e.Bubble.prototype.renderArrow_=function(){var t=[],n=this.width_/2,o=this.height_/2,s=-this.relativeLeft_,c=-this.relativeTop_;if(n==s&&o==c)t.push("M "+n+","+o);else{c-=o,s-=n,this.workspace_.RTL&&(s*=-1);var v=Math.sqrt(c*c+s*s),R=Math.acos(s/v);0>c&&(R=2*Math.PI-R);var O=R+Math.PI/2;O>2*Math.PI&&(O-=2*Math.PI);var H=Math.sin(O),V=Math.cos(O),G=this.getBubbleSize();O=(G.width+G.height)/e.Bubble.ARROW_THICKNESS,O=Math.min(O,G.width,G.height)/4,s=n+(G=1-e.Bubble.ANCHOR_RADIUS/v)*s,c=o+G*c,G=n+O*V;var Z=o+O*H;n-=O*V,o-=O*H,(H=R+this.arrow_radians_)>2*Math.PI&&(H-=2*Math.PI),R=Math.sin(H)*v/e.Bubble.ARROW_BEND,v=Math.cos(H)*v/e.Bubble.ARROW_BEND,t.push("M"+G+","+Z),t.push("C"+(G+v)+","+(Z+R)+" "+s+","+c+" "+s+","+c),t.push("C"+s+","+c+" "+(n+v)+","+(o+R)+" "+n+","+o)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},e.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},e.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&e.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&e.browserEvents.unbind(this.onMouseDownResizeWrapper_),e.Bubble.unbindDragEvents_(),e.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},e.Bubble.prototype.moveDuringDrag=function(t,n){t?t.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},e.Bubble.prototype.getRelativeToSurfaceXY=function(){return new e.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},e.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},e.Bubble.textToDom=function(t){var n=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:e.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var o=0;o<t.length;o++){var s=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{dy:"1em",x:e.Bubble.BORDER_WIDTH},n),c=document.createTextNode(t[o]);s.appendChild(c)}return n},e.Bubble.createNonEditableBubble=function(t,n,o){if((o=new e.Bubble(n.workspace,t,n.pathObject.svgPath,o,null,null)).setSvgId(n.id),n.RTL){n=t.getBBox().width;for(var c,s=0;c=t.childNodes[s];s++)c.setAttribute("text-anchor","end"),c.setAttribute("x",n+e.Bubble.BORDER_WIDTH)}return o},e.Events.CommentBase=function(t){this.commentId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.utils.object.inherits(e.Events.CommentBase,e.Events.Abstract),e.Events.CommentBase.prototype.toJson=function(){var t=e.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},e.Events.CommentBase.prototype.fromJson=function(t){e.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},e.Events.CommentChange=function(t,n,o){e.Events.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===o?"":o)},e.utils.object.inherits(e.Events.CommentChange,e.Events.CommentBase),e.Events.CommentChange.prototype.type=e.Events.COMMENT_CHANGE,e.Events.CommentChange.prototype.toJson=function(){var t=e.Events.CommentChange.superClass_.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},e.Events.CommentChange.prototype.fromJson=function(t){e.Events.CommentChange.superClass_.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},e.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},e.Events.CommentChange.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},e.Events.CommentCreate=function(t){e.Events.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentCreate,e.Events.CommentBase),e.Events.CommentCreate.prototype.type=e.Events.COMMENT_CREATE,e.Events.CommentCreate.prototype.toJson=function(){var t=e.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t},e.Events.CommentCreate.prototype.fromJson=function(t){e.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml)},e.Events.CommentCreate.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,t)},e.Events.CommentCreateDeleteHelper=function(t,n){var o=t.getEventWorkspace_();n?((n=e.utils.xml.createElement("xml")).appendChild(t.xml),e.Xml.domToWorkspace(n,o)):(o=o.getCommentById(t.commentId))?o.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},e.Events.CommentDelete=function(t){e.Events.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentDelete,e.Events.CommentBase),e.Events.CommentDelete.prototype.type=e.Events.COMMENT_DELETE,e.Events.CommentDelete.prototype.toJson=function(){return e.Events.CommentDelete.superClass_.toJson.call(this)},e.Events.CommentDelete.prototype.fromJson=function(t){e.Events.CommentDelete.superClass_.fromJson.call(this,t)},e.Events.CommentDelete.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,!t)},e.Events.CommentMove=function(t){e.Events.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},e.utils.object.inherits(e.Events.CommentMove,e.Events.CommentBase),e.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},e.Events.CommentMove.prototype.type=e.Events.COMMENT_MOVE,e.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},e.Events.CommentMove.prototype.toJson=function(){var t=e.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},e.Events.CommentMove.prototype.fromJson=function(t){if(e.Events.CommentMove.superClass_.fromJson.call(this,t),t.oldCoordinate){var n=t.oldCoordinate.split(",");this.oldCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}t.newCoordinate&&(n=t.newCoordinate.split(","),this.newCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1])))},e.Events.CommentMove.prototype.isNull=function(){return e.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},e.Events.CommentMove.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){t=t?this.newCoordinate_:this.oldCoordinate_;var o=n.getXY();n.moveBy(t.x-o.x,t.y-o.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CREATE,e.Events.CommentCreate),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CHANGE,e.Events.CommentChange),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_MOVE,e.Events.CommentMove),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_DELETE,e.Events.CommentDelete),e.BubbleDragger=function(t,n){this.draggingBubble_=t,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=e.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},e.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},e.BubbleDragger.prototype.startBubbleDrag=function(){e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},e.BubbleDragger.prototype.dragBubble=function(t,n){n=this.pixelsToWorkspaceUnits_(n),n=e.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},e.BubbleDragger.prototype.shouldDelete_=function(t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,e.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.draggingBubble_,!1)},e.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},e.BubbleDragger.prototype.endBubbleDrag=function(t,n){this.dragBubble(t,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new(e.Events.get(e.Events.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),e.Events.fire(t)}},e.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},e.Events.Click=function(t,n,o){e.Events.Click.superClass_.constructor.call(this,t?t.workspace.id:n),this.blockId=t?t.id:null,this.targetType=o},e.utils.object.inherits(e.Events.Click,e.Events.UiBase),e.Events.Click.prototype.type=e.Events.CLICK,e.Events.Click.prototype.toJson=function(){var t=e.Events.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},e.Events.Click.prototype.fromJson=function(t){e.Events.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.CLICK,e.Events.Click),e.WorkspaceDragger=function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new e.utils.Coordinate(t.scrollX,t.scrollY)},e.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},e.WorkspaceDragger.prototype.startDrag=function(){e.selected&&e.selected.unselect(),this.workspace_.setupDragSurface()},e.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},e.WorkspaceDragger.prototype.drag=function(t){if(t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,t.y)}},e.Gesture=function(t,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new e.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!e.DRAG_STACK},e.Gesture.prototype.dispose=function(){e.Touch.clearTouchIdentifier(),e.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&e.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&e.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},e.Gesture.prototype.updateFromEvent_=function(t){var n=new e.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),e.longStop_()),this.mostRecentEvent_=t},e.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=e.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=e.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.FLYOUT_DRAG_RADIUS:e.DRAG_RADIUS))},e.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),e.Events.getGroup()||e.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},e.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},e.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},e.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new e.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},e.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},e.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(e.registry.getClassFromOptions(e.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new e.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.doStart=function(t){e.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,e.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),e.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,e.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),e.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||e.longStart(t,this),this.mouseDownXY_=new e.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},e.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),e.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},e.Gesture.prototype.cancel=function(){this.isEnding_||(e.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},e.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),e.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(e.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},e.Gesture.prototype.handleWsStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=t,this.doStart(t)},e.Gesture.prototype.fireWorkspaceClick_=function(t){e.Events.fire(new(e.Events.get(e.Events.CLICK))(null,t.id,"workspace"))},e.Gesture.prototype.handleFlyoutStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(t,n.getWorkspace())},e.Gesture.prototype.handleBlockStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=t},e.Gesture.prototype.handleBubbleStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=t},e.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},e.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},e.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(e.Events.getGroup()||e.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new(e.Events.get(e.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");e.Events.fire(t)}this.bringBlockToFront_(),e.Events.setGroup(!1)},e.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,e.selected&&e.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},e.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},e.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},e.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},e.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},e.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},e.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},e.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},e.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},e.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},e.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},e.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},e.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},e.Gesture.prototype.hasStarted=function(){return this.hasStarted_},e.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},e.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},e.Gesture.inProgress=function(){for(var o,t=e.Workspace.getAll(),n=0;o=t[n];n++)if(o.currentGesture_)return!0;return!1},e.IRegistrable=function(){},e.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},e.Marker.prototype.setDrawer=function(t){this.drawer_=t},e.Marker.prototype.getDrawer=function(){return this.drawer_},e.Marker.prototype.getCurNode=function(){return this.curNode_},e.Marker.prototype.setCurNode=function(t){var n=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(n,this.curNode_)},e.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},e.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},e.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},e.Cursor=function(){e.Cursor.superClass_.constructor.call(this),this.type="cursor"},e.utils.object.inherits(e.Cursor,e.Marker),e.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},e.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()==e.ASTNode.types.PREVIOUS||t.getType()==e.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},e.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},e.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==e.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},e.registry.register(e.registry.Type.CURSOR,e.registry.DEFAULT,e.Cursor),e.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t},e.MarkerManager.LOCAL_MARKER="local_marker_1",e.MarkerManager.prototype.registerMarker=function(t,n){this.markers_[t]&&this.unregisterMarker(t),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[t]=n},e.MarkerManager.prototype.unregisterMarker=function(t){var n=this.markers_[t];if(!n)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[t]},e.MarkerManager.prototype.getCursor=function(){return this.cursor_},e.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},e.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},e.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},e.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},e.MarkerManager.prototype.dispose=function(){for(var o,t=Object.keys(this.markers_),n=0;o=t[n];n++)this.unregisterMarker(o);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},e.WidgetDiv={},e.WidgetDiv.owner_=null,e.WidgetDiv.dispose_=null,e.WidgetDiv.rendererClassName_="",e.WidgetDiv.themeClassName_="",e.WidgetDiv.createDom=function(){e.WidgetDiv.DIV||(e.WidgetDiv.DIV=document.createElement("div"),e.WidgetDiv.DIV.className="blocklyWidgetDiv",(e.parentContainer||document.body).appendChild(e.WidgetDiv.DIV))},e.WidgetDiv.show=function(t,n,o){e.WidgetDiv.hide(),e.WidgetDiv.owner_=t,e.WidgetDiv.dispose_=o,(t=e.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",t.style.display="block",n=e.getMainWorkspace(),e.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),e.WidgetDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.WidgetDiv.rendererClassName_),e.utils.dom.addClass(t,e.WidgetDiv.themeClassName_)},e.WidgetDiv.hide=function(){if(e.WidgetDiv.isVisible()){e.WidgetDiv.owner_=null;var t=e.WidgetDiv.DIV;t.style.display="none",t.style.left="",t.style.top="",e.WidgetDiv.dispose_&&e.WidgetDiv.dispose_(),e.WidgetDiv.dispose_=null,t.textContent="",e.WidgetDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.rendererClassName_),e.WidgetDiv.rendererClassName_=""),e.WidgetDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.themeClassName_),e.WidgetDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.WidgetDiv.isVisible=function(){return!!e.WidgetDiv.owner_},e.WidgetDiv.hideIfOwner=function(t){e.WidgetDiv.owner_==t&&e.WidgetDiv.hide()},e.WidgetDiv.positionInternal_=function(t,n,o){e.WidgetDiv.DIV.style.left=t+"px",e.WidgetDiv.DIV.style.top=n+"px",e.WidgetDiv.DIV.style.height=o+"px"},e.WidgetDiv.positionWithAnchor=function(t,n,o,s){var c=e.WidgetDiv.calculateY_(t,n,o);t=e.WidgetDiv.calculateX_(t,n,o,s),0>c?e.WidgetDiv.positionInternal_(t,0,o.height+c):e.WidgetDiv.positionInternal_(t,c,o.height)},e.WidgetDiv.calculateX_=function(t,n,o,s){return s?(n=Math.max(n.right-o.width,t.left),Math.min(n,t.right-o.width)):(n=Math.min(n.left,t.right-o.width),Math.max(n,t.left))},e.WidgetDiv.calculateY_=function(t,n,o){return n.bottom+o.height>=t.bottom?n.top-o.height:n.bottom},e.Field=function(t,n,o){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new e.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,o&&this.configure_(o),this.setValue(t),n&&this.setValidator(n)},e.Field.prototype.DEFAULT_VALUE=null,e.Field.prototype.name=void 0,e.Field.prototype.disposed=!1,e.Field.prototype.maxDisplayLength=50,e.Field.prototype.sourceBlock_=null,e.Field.prototype.isDirty_=!0,e.Field.prototype.visible_=!0,e.Field.prototype.clickTarget_=null,e.Field.NBSP="\xa0",e.Field.prototype.EDITABLE=!0,e.Field.prototype.SERIALIZABLE=!1,e.Field.prototype.configure_=function(t){var n=t.tooltip;"string"==typeof n&&(n=e.utils.replaceMessageReferences(t.tooltip)),n&&this.setTooltip(n)},e.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},e.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},e.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},e.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},e.Field.prototype.initModel=function(){},e.Field.prototype.createBorderRect_=function(){this.borderRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},e.Field.prototype.createTextElement_=function(){this.textElement_=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},e.Field.prototype.bindEvents_=function(){e.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=e.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},e.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},e.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},e.Field.prototype.dispose=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hideIfOwner(this),e.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&e.browserEvents.unbind(this.mouseDownWrapper_),e.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},e.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(e.utils.dom.addClass(t,"blocklyEditableText"),e.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(e.utils.dom.addClass(t,"blocklyNonEditableText"),e.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},e.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},e.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},e.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},e.Field.prototype.isVisible=function(){return this.visible_},e.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var n=this.getSvgRoot();n&&(n.style.display=t?"block":"none")}},e.Field.prototype.setValidator=function(t){this.validator_=t},e.Field.prototype.getValidator=function(){return this.validator_},e.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},e.Field.prototype.applyColour=function(){},e.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},e.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},e.Field.prototype.updateSize_=function(t){var n=this.getConstants(),o=2*(t=null!=t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),s=n.FIELD_TEXT_HEIGHT,c=0;this.textElement_&&(o+=c=e.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(s=Math.max(s,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=s,this.size_.width=o,this.positionTextElement_(t,c),this.positionBorderRect_()},e.Field.prototype.positionTextElement_=function(t,n){if(this.textElement_){var o=this.getConstants(),s=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-t:t),this.textElement_.setAttribute("y",o.FIELD_TEXT_BASELINE_CENTER?s:s-o.FIELD_TEXT_HEIGHT/2+o.FIELD_TEXT_BASELINE)}},e.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},e.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new e.utils.Size(0,0)},e.Field.prototype.getScaledBBox=function(){if(this.borderRect_)t=this.borderRect_.getBoundingClientRect(),o=e.utils.style.getPageOffset(this.borderRect_),s=t.width,t=t.height;else{var t=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,o=this.getAbsoluteXY_(),s=t.width*n;t=t.height*n,e.utils.userAgent.GECKO?(o.x+=1.5*n,o.y+=1.5*n):e.utils.userAgent.EDGE||e.utils.userAgent.IE||(o.x-=.5*n,o.y-=.5*n),s+=1*n,t+=1*n}return new e.utils.Rect(o.y,o.y+t,o.x,o.x+s)},e.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,e.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200f"),t):e.Field.NBSP},e.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},e.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},e.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},e.Field.prototype.setValue=function(t){if(null!==t){var n=this.doClassValidation_(t);if(!((t=this.processValidation_(t,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,t),(t=this.processValidation_(t,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var o=this.getValue();o===t?this.doValueUpdate_(t):(n&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(n,"field",this.name||null,o,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}}},e.Field.prototype.processValidation_=function(t,n){return null===n?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(t=n),t)},e.Field.prototype.getValue=function(){return this.value_},e.Field.prototype.doClassValidation_=function(t){return null==t?null:t},e.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},e.Field.prototype.doValueInvalid_=function(t){},e.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},e.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=t:this.tooltip_=t},e.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return e.Tooltip.getTooltipOfObject(t||{tooltip:this.tooltip_})},e.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},e.Field.prototype.getAbsoluteXY_=function(){return e.utils.style.getPageOffset(this.getClickTarget_())},e.Field.prototype.referencesVariables=function(){return!1},e.Field.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_,o=n.inputList,s=0;s<n.inputList.length;s++)for(var c=o[s],v=c.fieldRow,R=0;R<v.length;R++)if(v[R]===this){t=c;break}return t},e.Field.prototype.getFlipRtl=function(){return!1},e.Field.prototype.isTabNavigable=function(){return!1},e.Field.prototype.onShortcut=function(t){return!1},e.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},e.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.FieldLabel=function(t,n,o){this.class_=null,e.FieldLabel.superClass_.constructor.call(this,t,null,o),o||(this.class_=n||null)},e.utils.object.inherits(e.FieldLabel,e.Field),e.FieldLabel.prototype.DEFAULT_VALUE="",e.FieldLabel.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabel(n,void 0,t)},e.FieldLabel.prototype.EDITABLE=!1,e.FieldLabel.prototype.configure_=function(t){e.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},e.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&e.utils.dom.addClass(this.textElement_,this.class_)},e.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&e.utils.dom.removeClass(this.textElement_,this.class_),t&&e.utils.dom.addClass(this.textElement_,t)),this.class_=t},e.fieldRegistry.register("field_label",e.FieldLabel),e.Input=function(t,n,o,s){if(t!=e.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=n,this.sourceBlock_=o,this.connection=s,this.fieldRow=[]},e.Input.prototype.align=e.constants.ALIGN.LEFT,e.Input.prototype.visible_=!0,e.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Input.prototype.appendField=function(t,n){return this.insertFieldAt(this.fieldRow.length,t,n),this},e.Input.prototype.insertFieldAt=function(t,n,o){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(n||""==n&&o)&&("string"==typeof n&&(n=e.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=o,n.setVisible(this.isVisible()),n.prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,n),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},e.Input.prototype.removeField=function(t,n){for(var s,o=0;s=this.fieldRow[o];o++)if(s.name===t)return s.dispose(),this.fieldRow.splice(o,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+t+'" not found.')},e.Input.prototype.isVisible=function(){return this.visible_},e.Input.prototype.setVisible=function(t){var n=[];if(this.visible_==t)return n;this.visible_=t;for(var s,o=0;s=this.fieldRow[o];o++)s.setVisible(t);return this.connection&&(this.connection=this.connection,t?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),o=this.connection.targetBlock())&&(o.getSvgRoot().style.display=t?"block":"none"),n},e.Input.prototype.markDirty=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.markDirty()},e.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},e.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},e.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},e.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},e.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},e.Input.prototype.dispose=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},e.Block=function(t,n,o){if(e.Generator&&void 0!==e.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=o&&!t.getBlockById(o)?o:e.utils.genUid(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new e.utils.Size(160,80)},this.xy_=new e.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(o=e.Blocks[n])||"object"!=typeof o)throw TypeError("Unknown block type: "+n);e.utils.object.mixin(this,o)}t.addTopBlock(this),t.addTypedBlock(this),(t=e.Events.getGroup())||e.Events.setGroup(!0),n=e.Events.recordUndo;try{"function"==typeof this.init&&(e.Events.recordUndo=!1,this.init(),e.Events.recordUndo=n),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(this))}finally{t||e.Events.setGroup(!1),e.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},e.Block.COLLAPSED_INPUT_NAME=e.constants.COLLAPSED_INPUT_NAME,e.Block.COLLAPSED_FIELD_NAME=e.constants.COLLAPSED_FIELD_NAME,e.Block.prototype.data=null,e.Block.prototype.disposed=!1,e.Block.prototype.hue_=null,e.Block.prototype.colour_="#000000",e.Block.prototype.styleName_="",e.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_DELETE))(this)),e.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),e.selected==this&&(e.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var o;o=this.inputList[n];n++)o.dispose();this.inputList.length=0;var c,s=this.getConnections_(!0);for(n=0;c=s[n];n++)c.dispose()}finally{e.Events.enable(),this.disposed=!0}}},e.Block.prototype.initModel=function(){for(var n,t=0;n=this.inputList[t];t++)for(var s,o=0;s=n.fieldRow[o];o++)s.initModel&&s.initModel()},e.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},e.Block.prototype.unplugFromRow_=function(t){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,n,!1)?n.connect(t):t.onFailedConnect(n))},e.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;if(o&&o.type==e.connectionTypes.INPUT_VALUE&&o.targetConnection){if(t)return null;t=o}}return t},e.Block.prototype.unplugFromStack_=function(t){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var o=this.getNextBlock();t&&o&&!o.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,t,!1)&&n.connect(t))},e.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var o,n=0;o=this.inputList[n];n++)o.connection&&t.push(o.connection);return t},e.Block.prototype.lastConnectionInStack=function(t){for(var n=this.nextConnection;n;){var o=n.targetBlock();if(!o||t&&o.isShadow())return n;n=o.nextConnection}return null},e.Block.prototype.bumpNeighbours=function(){},e.Block.prototype.getParent=function(){return this.parentBlock_},e.Block.prototype.getInputWithBlock=function(t){for(var o,n=0;o=this.inputList[n];n++)if(o.connection&&o.connection.targetBlock()==t)return o;return null},e.Block.prototype.getSurroundParent=function(){var t=this;do{var n=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==n);return t},e.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},e.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},e.Block.prototype.getFirstStatementConnection=function(){for(var n,t=0;n=this.inputList[t];t++)if(n.connection&&n.connection.type==e.connectionTypes.NEXT_STATEMENT)return n.connection;return null},e.Block.prototype.getRootBlock=function(){var t=this;do{var n=t;t=n.parentBlock_}while(t);return n},e.Block.prototype.getTopStackBlock=function(){var t=this;do{var n=t.getPreviousBlock()}while(n&&n.getNextBlock()==t&&(t=n));return t},e.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var o,n=0;o=this.inputList[n];n++)o.connection&&(o=o.connection.targetBlock())&&t.push(o);return(n=this.getNextBlock())&&t.push(n),t},e.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(e.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},e.Block.prototype.getDescendants=function(t){for(var s,n=[this],o=this.getChildren(t),c=0;s=o[c];c++)n.push.apply(n,s.getDescendants(t));return n},e.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setDeletable=function(t){this.deletable_=t},e.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setMovable=function(t){this.movable_=t},e.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(e.utils.getBlockTypeCounts(this,!0))},e.Block.prototype.isShadow=function(){return this.isShadow_},e.Block.prototype.setShadow=function(t){this.isShadow_=t},e.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},e.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},e.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var n;n=this.inputList[t];t++)for(var s,o=0;s=n.fieldRow[o];o++)s.updateEditable()},e.Block.prototype.isDisposed=function(){return this.disposed},e.Block.prototype.getMatchingConnection=function(t,n){var o=this.getConnections_(!0);if(t=t.getConnections_(!0),o.length!=t.length)throw Error("Connection lists did not match in length.");for(var s=0;s<t.length;s++)if(t[s]==n)return o[s];return null},e.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},e.Block.prototype.setTooltip=function(t){this.tooltip=t},e.Block.prototype.getTooltip=function(){return e.Tooltip.getTooltipOfObject(this)},e.Block.prototype.getColour=function(){return this.colour_},e.Block.prototype.getStyleName=function(){return this.styleName_},e.Block.prototype.getHue=function(){return this.hue_},e.Block.prototype.setColour=function(t){t=e.utils.parseBlockColour(t),this.hue_=t.hue,this.colour_=t.hex},e.Block.prototype.setStyle=function(t){this.styleName_=t},e.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},e.Block.prototype.getField=function(t){if("string"!=typeof t)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(var o,n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)if(c.name===t)return c;return null},e.Block.prototype.getVars=function(){for(var o,t=[],n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)c.referencesVariables()&&t.push(c.getValue());return t},e.Block.prototype.getVarModels=function(){for(var o,t=[],n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)c.referencesVariables()&&(c=this.workspace.getVariableById(c.getValue()))&&t.push(c);return t},e.Block.prototype.updateVarName=function(t){for(var o,n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)c.referencesVariables()&&t.getId()==c.getValue()&&c.refreshVariableName()},e.Block.prototype.renameVarById=function(t,n){for(var s,o=0;s=this.inputList[o];o++)for(var v,c=0;v=s.fieldRow[c];c++)v.referencesVariables()&&t==v.getValue()&&v.setValue(n)},e.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},e.Block.prototype.setFieldValue=function(t,n){var o=this.getField(n);if(!o)throw Error('Field "'+n+'" not found.');o.setValue(t)},e.Block.prototype.setPreviousStatement=function(t,n){if(t){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(e.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},e.Block.prototype.setNextStatement=function(t,n){if(t)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(e.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},e.Block.prototype.setOutput=function(t,n){if(t){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(e.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},e.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},e.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.DUMMY&&this.inputList[t].type==e.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.VALUE&&this.inputList[t].type==e.inputTypes.DUMMY)return!0;return!1},e.Block.prototype.setOutputShape=function(t){this.outputShape_=t},e.Block.prototype.getOutputShape=function(){return this.outputShape_},e.Block.prototype.isEnabled=function(){return!this.disabled},e.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},e.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},e.Block.prototype.isCollapsed=function(){return this.collapsed_},e.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},e.Block.prototype.toString=function(t,n){function o(V){var G=V.getCheck();return!G&&V.targetConnection&&(G=V.targetConnection.getCheck()),!!G&&(-1!=G.indexOf("Boolean")||-1!=G.indexOf("Number"))}function s(){R&&R.getType()==O.getType()&&R.getLocation()==O.getLocation()&&(R=null)}var c=[];n=n||"?";var v=e.ASTNode.NAVIGATE_ALL_FIELDS;e.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var R=e.ASTNode.createBlockNode(this),O=R;R;){switch(R.getType()){case e.ASTNode.types.INPUT:var H=R.getLocation();R.in()?o(H)&&c.push("("):c.push(n);break;case e.ASTNode.types.FIELD:(H=R.getLocation()).name!=e.constants.COLLAPSED_FIELD_NAME&&c.push(H.getText())}if(!(R=(H=R).in()||H.next())){for(R=H.out(),s();R&&!R.next();)R=R.out(),s(),R&&R.getType()==e.ASTNode.types.INPUT&&o(R.getLocation())&&c.push(")");R&&(R=R.next())}}for(e.ASTNode.NAVIGATE_ALL_FIELDS=v,n=2;n<c.length;n++)"("==c[n-2]&&")"==c[n]&&(c[n-2]=c[n-1],c.splice(n-1,2));return c=(c=c.reduce(function(V,G){return V+("("==V.substr(-1)||")"==G?"":" ")+G},"")).trim()||"???",t&&c.length>t&&(c=c.substring(0,t-3)+"..."),c},e.Block.prototype.appendValueInput=function(t){return this.appendInput_(e.inputTypes.VALUE,t)},e.Block.prototype.appendStatementInput=function(t){return this.appendInput_(e.inputTypes.STATEMENT,t)},e.Block.prototype.appendDummyInput=function(t){return this.appendInput_(e.inputTypes.DUMMY,t||"")},e.Block.prototype.jsonInit=function(t){var n=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(n+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,n):this.jsonInitColour_(t,n);for(var o=0;void 0!==t["message"+o];)this.interpolate_(t["message"+o],t["args"+o]||[],t["lastDummyAlign"+o],n),o++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(o=e.utils.replaceMessageReferences(o=t.tooltip),this.setTooltip(o)),void 0!==t.enableContextMenu&&(this.contextMenu=!!(o=t.enableContextMenu)),void 0!==t.helpUrl&&(o=e.utils.replaceMessageReferences(o=t.helpUrl),this.setHelpUrl(o)),"string"==typeof t.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&e.Extensions.apply(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(n=0;n<t.length;++n)e.Extensions.apply(t[n],this,!1)},e.Block.prototype.jsonInitColour_=function(t,n){if("colour"in t)if(void 0===t.colour)console.warn(n+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(o){console.warn(n+"Illegal colour value: ",t)}}},e.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(o){console.warn(n+"Style does not exist: ",t)}},e.Block.prototype.mixin=function(t,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var o in n=[],t)void 0!==this[o]&&n.push(o);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}e.utils.object.mixin(this,t)},e.Block.prototype.interpolate_=function(t,n,o,s){t=e.utils.tokenizeInterpolation(t),this.validateTokens_(t,n.length),n=this.interpolateArguments_(t,n,o),o=[],t=0;for(var c;c=n[t];t++)if(this.isInputKeyword_(c.type)){if(c=this.inputFromJson_(c,s)){for(var R,v=0;R=o[v];v++)c.appendField(R[0],R[1]);o.length=0}}else(v=this.fieldFromJson_(c))&&o.push([v,c.name])},e.Block.prototype.validateTokens_=function(t,n){for(var o=[],s=0,c=0;c<t.length;c++){var v=t[c];if("number"==typeof v){if(1>v||v>n)throw Error('Block "'+this.type+'": Message index %'+v+" out of range.");if(o[v])throw Error('Block "'+this.type+'": Message index %'+v+" duplicated.");o[v]=!0,s++}}if(s!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},e.Block.prototype.interpolateArguments_=function(t,n,o){for(var s=[],c=0;c<t.length;c++){var v=t[c];"number"==typeof v&&(v=n[v-1]),("string"!=typeof v||(v=this.stringToFieldJson_(v)))&&s.push(v)}return(t=s.length)&&!this.isInputKeyword_(s[t-1].type)&&(t={type:"input_dummy"},o&&(t.align=o),s.push(t)),s},e.Block.prototype.fieldFromJson_=function(t){var n=e.fieldRegistry.fromJson(t);return!n&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):n},e.Block.prototype.inputFromJson_=function(t,n){var o={LEFT:e.constants.ALIGN.LEFT,RIGHT:e.constants.ALIGN.RIGHT,CENTRE:e.constants.ALIGN.CENTRE,CENTER:e.constants.ALIGN.CENTRE},s=null;switch(t.type){case"input_value":s=this.appendValueInput(t.name);break;case"input_statement":s=this.appendStatementInput(t.name);break;case"input_dummy":s=this.appendDummyInput(t.name)}return s?(t.check&&s.setCheck(t.check),t.align&&(void 0===(o=o[t.align.toUpperCase()])?console.warn(n+"Illegal align value: ",t.align):s.setAlign(o)),s):null},e.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},e.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},e.Block.prototype.appendInput_=function(t,n){var o=null;return(t==e.inputTypes.VALUE||t==e.inputTypes.STATEMENT)&&(o=this.makeConnection_(t)),t==e.inputTypes.STATEMENT&&this.statementInputCount++,t=new e.Input(t,n,this,o),this.inputList.push(t),t},e.Block.prototype.moveInputBefore=function(t,n){if(t!=n){for(var v,o=-1,s=n?-1:this.inputList.length,c=0;v=this.inputList[c];c++)if(v.name==t){if(o=c,-1!=s)break}else if(n&&v.name==n&&(s=c,-1!=o))break;if(-1==o)throw Error('Named input "'+t+'" not found.');if(-1==s)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(o,s)}},e.Block.prototype.moveNumberedInputBefore=function(t,n){if(t==n)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var o=this.inputList[t];this.inputList.splice(t,1),t<n&&n--,this.inputList.splice(n,0,o)},e.Block.prototype.removeInput=function(t,n){for(var s,o=0;s=this.inputList[o];o++)if(s.name==t)return s.type==e.inputTypes.STATEMENT&&this.statementInputCount--,s.dispose(),this.inputList.splice(o,1),!0;if(n)return!1;throw Error("Input not found: "+t)},e.Block.prototype.getInput=function(t){for(var o,n=0;o=this.inputList[n];n++)if(o.name==t)return o;return null},e.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},e.Block.prototype.getCommentText=function(){return this.commentModel.text},e.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},e.Block.prototype.setWarningText=function(t,n){},e.Block.prototype.setMutator=function(t){},e.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},e.Block.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var o=new(e.Events.get(e.Events.BLOCK_MOVE))(this);this.xy_.translate(t,n),o.recordNew(),e.Events.fire(o)},e.Block.prototype.makeConnection_=function(t){return new e.Connection(this,t)},e.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var o,n=0;o=this.inputList[n];n++)if(o.connection&&(!(o=o.connection.targetBlock())||!o.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},e.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},e.blockRendering.IPathObject=function(t,n){},e.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},e.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},e.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},e.Menu.prototype.render=function(t){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&e.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var s,o=0;s=this.menuItems_[o];o++)n.appendChild(s.createDom());this.mouseOverHandler_=e.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=e.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=e.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=e.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=e.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),t.appendChild(n)},e.Menu.prototype.getElement=function(){return this.element_},e.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),e.utils.dom.addClass(t,"blocklyFocused"))},e.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),e.utils.dom.removeClass(t,"blocklyFocused"))},e.Menu.prototype.setRole=function(t){this.roleName_=t},e.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(e.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(e.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(e.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(e.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(e.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,t=0;n=this.menuItems_[t];t++)n.dispose();this.element_=null},e.Menu.prototype.getMenuItem_=function(t){for(var n=this.getElement();t&&t!=n;){if(e.utils.dom.hasClass(t,"blocklyMenuItem"))for(var s,o=0;s=this.menuItems_[o];o++)if(s.getElement()==t)return s;t=t.parentElement}return null},e.Menu.prototype.setHighlighted=function(t){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,n=this.getElement(),e.utils.style.scrollIntoContainerView(t.getElement(),n),e.utils.aria.setState(n,e.utils.aria.State.ACTIVEDESCENDANT,t.getId()))},e.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},e.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},e.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},e.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},e.Menu.prototype.highlightHelper_=function(t,n){t+=n;for(var o;o=this.menuItems_[t];){if(o.isEnabled()){this.setHighlighted(o);break}t+=n}},e.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},e.Menu.prototype.handleClick_=function(t){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof t.clientX){var o=new e.utils.Coordinate(t.clientX,t.clientY);if(1>e.utils.Coordinate.distance(n,o))return}(t=this.getMenuItem_(t.target))&&t.performAction()},e.Menu.prototype.handleMouseEnter_=function(t){this.focus()},e.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},e.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var n=this.highlightedItem_;switch(t.keyCode){case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:n&&n.performAction();break;case e.utils.KeyCodes.UP:this.highlightPrevious();break;case e.utils.KeyCodes.DOWN:this.highlightNext();break;case e.utils.KeyCodes.PAGE_UP:case e.utils.KeyCodes.HOME:this.highlightFirst_();break;case e.utils.KeyCodes.PAGE_DOWN:case e.utils.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},e.Menu.prototype.getSize=function(){var t=this.getElement(),n=e.utils.style.getSize(t);return n.height=t.scrollHeight,n},e.MenuItem=function(t,n){this.content_=t,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=e.utils.IdGenerator.getNextUniqueId(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(o)}return o=this.content_,"string"==typeof this.content_&&(o=document.createTextNode(this.content_)),n.appendChild(o),t.appendChild(n),this.roleName_&&e.utils.aria.setRole(t,this.roleName_),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),e.utils.aria.setState(t,e.utils.aria.State.DISABLED,!this.enabled_),t},e.MenuItem.prototype.dispose=function(){this.element_=null},e.MenuItem.prototype.getElement=function(){return this.element_},e.MenuItem.prototype.getId=function(){return this.element_.id},e.MenuItem.prototype.getValue=function(){return this.value_},e.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},e.MenuItem.prototype.setRole=function(t){this.roleName_=t},e.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},e.MenuItem.prototype.setChecked=function(t){this.checked_=t},e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var n=this.getElement();n&&this.isEnabled()&&(t?(e.utils.dom.addClass(n,"blocklyMenuItemHighlight"),e.utils.dom.addClass(n,"goog-menuitem-highlight")):(e.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),e.utils.dom.removeClass(n,"goog-menuitem-highlight")))},e.MenuItem.prototype.isEnabled=function(){return this.enabled_},e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},e.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},e.MenuItem.prototype.onAction=function(t,n){this.actionHandler_=t.bind(n)},e.ContextMenu={},e.ContextMenu.currentBlock=null,e.ContextMenu.menu_=null,e.ContextMenu.show=function(t,n,o){if(e.WidgetDiv.show(e.ContextMenu,o,e.ContextMenu.dispose),n.length){var s=e.ContextMenu.populate_(n,o);e.ContextMenu.menu_=s,e.ContextMenu.position_(s,t,o),setTimeout(function(){s.focus()},1),e.ContextMenu.currentBlock=null}else e.ContextMenu.hide()},e.ContextMenu.populate_=function(t,n){var o=new e.Menu;o.setRole(e.utils.aria.Role.MENU);for(var c,s=0;c=t[s];s++){var v=new e.MenuItem(c.text);v.setRightToLeft(n),v.setRole(e.utils.aria.Role.MENUITEM),o.addChild(v),v.setEnabled(c.enabled),c.enabled&&v.onAction(function(R){e.ContextMenu.hide(),this.callback(this.scope)},c)}return o},e.ContextMenu.position_=function(t,n,o){var s=e.utils.getViewportBBox();n=new e.utils.Rect(n.clientY+s.top,n.clientY+s.top,n.clientX+s.left,n.clientX+s.left),e.ContextMenu.createWidget_(t);var c=t.getSize();o&&(n.left+=c.width,n.right+=c.width,s.left+=c.width,s.right+=c.width),e.WidgetDiv.positionWithAnchor(s,n,c,o),t.focus()},e.ContextMenu.createWidget_=function(t){t.render(e.WidgetDiv.DIV);var n=t.getElement();e.utils.dom.addClass(n,"blocklyContextMenu"),e.browserEvents.conditionalBind(n,"contextmenu",null,e.utils.noEvent),t.focus()},e.ContextMenu.hide=function(){e.WidgetDiv.hideIfOwner(e.ContextMenu),e.ContextMenu.currentBlock=null},e.ContextMenu.dispose=function(){e.ContextMenu.menu_&&(e.ContextMenu.menu_.dispose(),e.ContextMenu.menu_=null)},e.ContextMenu.callbackFactory=function(t,n){return function(){e.Events.disable();try{var o=e.Xml.domToBlock(n,t.workspace),s=t.getRelativeToSurfaceXY();s.x=t.RTL?s.x-e.SNAP_RADIUS:s.x+e.SNAP_RADIUS,s.y+=2*e.SNAP_RADIUS,o.moveBy(s.x,s.y)}finally{e.Events.enable()}e.Events.isEnabled()&&!o.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(o)),o.select()}},e.ContextMenu.commentDeleteOption=function(t){return{text:e.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.commentDuplicateOption=function(t){return{text:e.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){e.duplicate(t)}}},e.ContextMenu.workspaceCommentOption=function(t,n){if(!e.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var o={enabled:!e.utils.userAgent.IE};return o.text=e.Msg.ADD_COMMENT,o.callback=function(){var s=new e.WorkspaceCommentSvg(t,e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,e.WorkspaceCommentSvg.DEFAULT_SIZE,e.WorkspaceCommentSvg.DEFAULT_SIZE),c=t.getInjectionDiv().getBoundingClientRect();c=new e.utils.Coordinate(n.clientX-c.left,n.clientY-c.top);var v=t.getOriginOffsetInPixels();(c=e.utils.Coordinate.difference(c,v)).scale(1/t.scale),s.moveBy(c.x,c.y),t.rendered&&(s.initSvg(),s.render(),s.select())},o},e.ContextMenuRegistry=function(){e.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},e.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},e.ContextMenuRegistry.registry=null,e.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},e.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},e.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},e.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,n){var o=[],s=this.registry_;return Object.keys(s).forEach(function(c){if(t==(c=s[c]).scopeType){var v=c.preconditionFn(n);"hidden"!=v&&(c={text:"function"==typeof c.displayText?c.displayText(n):c.displayText,enabled:"enabled"==v,callback:c.callback,scope:n,weight:c.weight},o.push(c))}}),o.sort(function(c,v){return c.weight-v.weight}),o},new e.ContextMenuRegistry,e.Events.Selected=function(t,n,o){e.Events.Selected.superClass_.constructor.call(this,o),this.oldElementId=t,this.newElementId=n},e.utils.object.inherits(e.Events.Selected,e.Events.UiBase),e.Events.Selected.prototype.type=e.Events.SELECTED,e.Events.Selected.prototype.toJson=function(){var t=e.Events.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},e.Events.Selected.prototype.fromJson=function(t){e.Events.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},e.registry.register(e.registry.Type.EVENT,e.Events.SELECTED,e.Events.Selected),e.IBoundedElement=function(){},e.ICopyable=function(){},e.RenderedConnection=function(t,n){e.RenderedConnection.superClass_.constructor.call(this,t,n),this.db_=t.workspace.connectionDBList[n],this.dbOpposite_=t.workspace.connectionDBList[e.OPPOSITE_TYPE[n]],this.offsetInBlock_=new e.utils.Coordinate(0,0),this.trackedState_=e.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},e.utils.object.inherits(e.RenderedConnection,e.Connection),e.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},e.RenderedConnection.prototype.dispose=function(){e.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},e.RenderedConnection.prototype.getSourceBlock=function(){return e.RenderedConnection.superClass_.getSourceBlock.call(this)},e.RenderedConnection.prototype.targetBlock=function(){return e.RenderedConnection.superClass_.targetBlock.call(this)},e.RenderedConnection.prototype.distanceFrom=function(t){var n=this.x-t.x;return t=this.y-t.y,Math.sqrt(n*n+t*t)},e.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var o=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,o=!0}var s=e.selected==n;s||n.addSelect();var c=t.x+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x,v=t.y+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.y;o&&(v=-v),n.RTL&&(c=t.x-e.SNAP_RADIUS-Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x),n.moveBy(c,v),s||n.removeSelect()}}},e.RenderedConnection.prototype.moveTo=function(t,n){this.trackedState_==e.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=t,this.y=n},e.RenderedConnection.prototype.moveBy=function(t,n){this.moveTo(this.x+t,this.y+n)},e.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},e.RenderedConnection.prototype.setOffsetInBlock=function(t,n){this.offsetInBlock_.x=t,this.offsetInBlock_.y=n},e.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},e.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=t||0!=n){var o=this.targetBlock(),s=o.getSvgRoot();if(!s)throw Error("block is not rendered.");s=e.utils.getRelativeXY(s),o.getSvgRoot().setAttribute("transform","translate("+(s.x-t)+","+(s.y-n)+")"),o.moveConnections(-t,-n)}},e.RenderedConnection.prototype.closest=function(t,n){return this.dbOpposite_.searchForClosest(this,t,n)},e.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),n=t.shapeFor(this);n=this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.OUTPUT_VALUE?e.utils.svgPaths.moveBy(0,-(t=t.TAB_OFFSET_FROM_TOP))+e.utils.svgPaths.lineOnAxis("v",t)+n.pathDown+e.utils.svgPaths.lineOnAxis("v",t):e.utils.svgPaths.moveBy(-(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS),0)+e.utils.svgPaths.lineOnAxis("h",t)+n.pathLeft+e.utils.svgPaths.lineOnAxis("h",t),t=this.sourceBlock_.getRelativeToSurfaceXY(),e.Connection.highlightedPath_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},e.RenderedConnection.prototype.unhighlight=function(){e.utils.dom.removeNode(e.Connection.highlightedPath_),delete e.Connection.highlightedPath_},e.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_==e.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_==e.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.UNTRACKED))},e.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),n=0;n<t.length;n++){for(var o=t[n],s=o.getConnections_(!0),c=0;c<s.length;c++)s[c].setTracking(!1);for(o=o.getIcons(),c=0;c<o.length;c++)o[c].setVisible(!1)}},e.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!=e.connectionTypes.INPUT_VALUE&&this.type!=e.connectionTypes.NEXT_STATEMENT)return t;var n=this.targetBlock();if(n){if(n.isCollapsed()){var o=[];n.outputConnection&&o.push(n.outputConnection),n.nextConnection&&o.push(n.nextConnection),n.previousConnection&&o.push(n.previousConnection)}else o=n.getConnections_(!0);for(var s=0;s<o.length;s++)t.push.apply(t,o[s].startTrackingAll());t.length||(t[0]=n)}return t},e.RenderedConnection.prototype.isConnectionAllowed=function(t,n){return e.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(t)>n)&&e.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},e.RenderedConnection.prototype.onFailedConnect=function(t){var n=this.getSourceBlock();if(e.Events.recordUndo){var o=e.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(e.Events.setGroup(o),this.bumpAwayFrom(t),e.Events.setGroup(!1))}.bind(this),e.BUMP_DELAY)}},e.RenderedConnection.prototype.disconnectInternal_=function(t,n){e.RenderedConnection.superClass_.disconnectInternal_.call(this,t,n),t.rendered&&t.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},e.RenderedConnection.prototype.respawnShadow_=function(){e.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},e.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},e.RenderedConnection.prototype.connect_=function(t){e.RenderedConnection.superClass_.connect_.call(this,t);var n=this.getSourceBlock();t=t.getSourceBlock();var o=n.rendered,s=t.rendered;o&&n.updateDisabled(),s&&t.updateDisabled(),o&&s&&(this.type==e.connectionTypes.NEXT_STATEMENT||this.type==e.connectionTypes.PREVIOUS_STATEMENT?t.render():n.render()),(n=n.getInputWithBlock(t))&&(n=n.isVisible(),t.getSvgRoot().style.display=n?"block":"none")},e.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},e.BasicCursor=function(){e.BasicCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.BasicCursor,e.Cursor),e.BasicCursor.registrationName="basicCursor",e.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.in=function(){return this.next()},e.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.out=function(){return this.prev()},e.BasicCursor.prototype.getNextNode_=function(t,n){if(!t)return null;var o=t.in()||t.next();return n(o)?o:o?this.getNextNode_(o,n):n(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,n):null},e.BasicCursor.prototype.getPreviousNode_=function(t,n){if(!t)return null;var o=t.prev();return n(o=o?this.getRightMostChild_(o):t.out())?o:o?this.getPreviousNode_(o,n):null},e.BasicCursor.prototype.validNode_=function(t){var n=!1;return((t=t&&t.getType())==e.ASTNode.types.OUTPUT||t==e.ASTNode.types.INPUT||t==e.ASTNode.types.FIELD||t==e.ASTNode.types.NEXT||t==e.ASTNode.types.PREVIOUS||t==e.ASTNode.types.WORKSPACE)&&(n=!0),n},e.BasicCursor.prototype.findSiblingOrParent_=function(t){return t?t.next()||this.findSiblingOrParent_(t.out()):null},e.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},e.registry.register(e.registry.Type.CURSOR,e.BasicCursor.registrationName,e.BasicCursor),e.TabNavigateCursor=function(){e.TabNavigateCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.TabNavigateCursor,e.BasicCursor),e.TabNavigateCursor.prototype.validNode_=function(t){var n=!1,o=t&&t.getType();return t&&(t=t.getLocation(),o==e.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(n=!0)),n},e.BlockSvg=function(t,n,o){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=e.utils.is3dSupported()&&!!t.getBlockDragSurface();var s=this.pathObject.svgPath;s.tooltip=this,e.Tooltip.bindMouseEvents(s),e.BlockSvg.superClass_.constructor.call(this,t,n,o),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:e.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},e.utils.object.inherits(e.BlockSvg,e.Block),e.BlockSvg.prototype.height=0,e.BlockSvg.prototype.width=0,e.BlockSvg.prototype.warningTextDb_=null,e.BlockSvg.INLINE=-1,e.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",e.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,t=0;n=this.inputList[t];t++)n.init();for(n=this.getIcons(),t=0;t<n.length;t++)n[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||e.browserEvents.conditionalBind(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},e.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},e.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},e.BlockSvg.prototype.getColourShadow=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},e.BlockSvg.prototype.getColourBorder=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},e.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(e.selected!=this){var t=null;if(e.selected){t=e.selected.id,e.Events.disable();try{e.selected.unselect()}finally{e.Events.enable()}}t=new(e.Events.get(e.Events.SELECTED))(t,this.id,this.workspace.id),e.Events.fire(t),e.selected=this,this.addSelect()}},e.BlockSvg.prototype.unselect=function(){if(e.selected==this){var t=new(e.Events.get(e.Events.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,e.Events.fire(t),e.selected=null,this.removeSelect()}},e.BlockSvg.prototype.mutator=null,e.BlockSvg.prototype.comment=null,e.BlockSvg.prototype.commentIcon_=null,e.BlockSvg.prototype.warning=null,e.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},e.BlockSvg.prototype.setParent=function(t){var n=this.parentBlock_;if(t!=n){e.utils.dom.startTextWidthCache(),e.BlockSvg.superClass_.setParent.call(this,t),e.utils.dom.stopTextWidthCache();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var s=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(o),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-s.x,t.y-s.y)):n&&(this.workspace.getCanvas().appendChild(o),this.translate(s.x,s.y)),this.applyColour()}}},e.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,n=0,o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,s=this.getSvgRoot();if(s)do{var c=e.utils.getRelativeXY(s);t+=c.x,n+=c.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==s&&(t+=(c=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=c.y),s=s.parentNode}while(s&&s!=this.workspace.getCanvas()&&s!=o);return new e.utils.Coordinate(t,n)},e.BlockSvg.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var o=e.Events.isEnabled();if(o)var s=new(e.Events.get(e.Events.BLOCK_MOVE))(this);var c=this.getRelativeToSurfaceXY();this.translate(c.x+t,c.y+n),this.moveConnections(t,n),o&&(s.recordNew(),e.Events.fire(s)),this.workspace.resizeContents()},e.BlockSvg.prototype.translate=function(t,n){this.getSvgRoot().setAttribute("transform","translate("+t+","+n+")")},e.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},e.BlockSvg.prototype.moveTo=function(t){var n=this.getRelativeToSurfaceXY();this.moveBy(t.x-n.x,t.y-n.y)},e.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},e.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},e.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},e.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var n=t.getSpacing(),o=n/2,s=this.getRelativeToSurfaceXY();t=Math.round((s.x-o)/n)*n+o-s.x,n=Math.round((s.y-o)/n)*n+o-s.y,t=Math.round(t),n=Math.round(n),0==t&&0==n||this.moveBy(t,n)}}},e.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var o=t.x-n.width,s=t.x;else o=t.x,s=t.x+n.width;return new e.utils.Rect(t.y,t.y+n.height,o,s)},e.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,t=0;n=this.inputList[t];t++)n.markDirty()},e.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},e.BlockSvg.prototype.updateCollapsed_=function(){for(var c,t=this.isCollapsed(),n=e.constants.COLLAPSED_INPUT_NAME,o=e.constants.COLLAPSED_FIELD_NAME,s=0;c=this.inputList[s];s++)c.name!=n&&c.setVisible(!t);if(t){for(c=this.getIcons(),s=0;t=c[s];s++)t.setVisible(!1);s=this.toString(e.COLLAPSE_CHARS),(c=this.getField(o))?c.setValue(s):(c=this.getInput(n)||this.appendDummyInput(n)).appendField(new e.FieldLabel(s),o)}else this.updateDisabled(),this.removeInput(n)},e.BlockSvg.prototype.tab=function(t,n){var o=new e.TabNavigateCursor;o.setCurNode(e.ASTNode.createFieldNode(t)),t=o.getCurNode(),n?o.next():o.prev(),(n=o.getCurNode())&&n!==t&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},e.BlockSvg.prototype.onMouseDown_=function(t){var n=this.workspace&&this.workspace.getGesture(t);n&&n.handleBlockStart(t,this)},e.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},e.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},e.BlockSvg.prototype.showContextMenu=function(t){var n=this.generateContextMenu();n&&n.length&&(e.ContextMenu.show(t,n,this.RTL),e.ContextMenu.currentBlock=this)},e.BlockSvg.prototype.moveConnections=function(t,n){if(this.rendered){for(var o=this.getConnections_(!1),s=0;s<o.length;s++)o[s].moveBy(t,n);for(o=this.getIcons(),s=0;s<o.length;s++)o[s].computeIconLocation();for(s=0;s<this.childBlocks_.length;s++)this.childBlocks_[s].moveConnections(t,n)}},e.BlockSvg.prototype.setDragging=function(t){if(t){var n=this.getSvgRoot();n.translate_="",n.skew_="",e.draggingConnections=e.draggingConnections.concat(this.getConnections_(!0)),e.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else e.draggingConnections=[],e.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(t)},e.BlockSvg.prototype.setMovable=function(t){e.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},e.BlockSvg.prototype.setEditable=function(t){e.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var n=0;n<t.length;n++)t[n].updateEditable()},e.BlockSvg.prototype.setShadow=function(t){e.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},e.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},e.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.BlockSvg.prototype.dispose=function(t,n){if(this.workspace){e.Tooltip.dispose(),e.Tooltip.unbindMouseEvents(this.pathObject.svgPath),e.utils.dom.startTextWidthCache();var o=this.workspace;if(e.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),e.ContextMenu.currentBlock==this&&e.ContextMenu.hide(),n&&this.rendered&&(this.unplug(t),e.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]);this.warningTextDb_=null}for(n=this.getIcons(),s=0;s<n.length;s++)n[s].dispose();e.BlockSvg.superClass_.dispose.call(this,!!t),e.utils.dom.removeNode(this.svgGroup_),o.resizeContents(),this.svgGroup_=null,e.utils.dom.stopTextWidthCache()}},e.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var t=e.Xml.blockToDom(this,!0);e.Xml.deleteNext(t);var n=this.getRelativeToSurfaceXY();return t.setAttribute("x",this.RTL?-n.x:n.x),t.setAttribute("y",n.y),{xml:t,source:this.workspace,typeCounts:e.utils.getBlockTypeCounts(this,!0)}},e.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),n=0;n<t.length;n++)t[n].applyColour();for(t=0;n=this.inputList[t];t++)for(var s,o=0;s=n.fieldRow[o];o++)s.applyColour()},e.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var o,n=0;o=t[n];n++)o.rendered&&o.updateDisabled()},e.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},e.BlockSvg.prototype.setCommentText=function(t){if(!e.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(e.BlockSvg.superClass_.setCommentText.call(this,t),!!this.commentIcon_==(t=null!=t)?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},e.BlockSvg.prototype.setWarningText=function(t,n){if(!e.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var o=n||"";if(o)this.warningTextDb_[o]&&(clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o]);else for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]),delete this.warningTextDb_[s];if(this.workspace.isDragging()){var c=this;this.warningTextDb_[o]=setTimeout(function(){c.workspace&&(delete c.warningTextDb_[o],c.setWarningText(t,o))},100)}else{if(this.isInFlyout&&(t=null),n=!1,"string"==typeof t){s=this.getSurroundParent();for(var v=null;s;)s.isCollapsed()&&(v=s),s=s.getSurroundParent();v&&v.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new e.Warning(this),n=!0),this.warning.setText(t,o)}else this.warning&&!o?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",o),(s=this.warning.getText())||this.warning.dispose(),n=n!=s);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},e.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},e.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},e.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},e.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},e.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},e.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},e.BlockSvg.prototype.setColour=function(t){e.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},e.BlockSvg.prototype.setStyle=function(t){var n=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!n)throw Error("Invalid style name: "+t);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},e.BlockSvg.prototype.bringToFront=function(){var t=this;do{var n=t.getSvgRoot(),o=n.parentNode,s=o.childNodes;s[s.length-1]!==n&&o.appendChild(n),t=t.getParent()}while(t)},e.BlockSvg.prototype.setPreviousStatement=function(t,n){e.BlockSvg.superClass_.setPreviousStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setNextStatement=function(t,n){e.BlockSvg.superClass_.setNextStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setOutput=function(t,n){e.BlockSvg.superClass_.setOutput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setInputsInline=function(t){e.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.removeInput=function(t,n){return t=e.BlockSvg.superClass_.removeInput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.moveNumberedInputBefore=function(t,n){e.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.appendInput_=function(t,n){return t=e.BlockSvg.superClass_.appendInput_.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(t)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.setTracking(t),(o=o.targetBlock())&&o.setConnectionTracking(t))}},e.BlockSvg.prototype.getConnections_=function(t){var n=[];if((t||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var o;o=this.inputList[t];t++)o.connection&&n.push(o.connection)}return n},e.BlockSvg.prototype.lastConnectionInStack=function(t){return e.BlockSvg.superClass_.lastConnectionInStack.call(this,t)},e.BlockSvg.prototype.getMatchingConnection=function(t,n){return e.BlockSvg.superClass_.getMatchingConnection.call(this,t,n)},e.BlockSvg.prototype.makeConnection_=function(t){return new e.RenderedConnection(this,t)},e.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var s,n=this.getConnections_(!1),o=0;s=n[o];o++){s.isConnected()&&s.isSuperior()&&s.targetBlock().bumpNeighbours();for(var R,c=s.neighbours(e.SNAP_RADIUS),v=0;R=c[v];v++)s.isConnected()&&R.isConnected()||R.getSourceBlock().getRootBlock()!=t&&(s.isSuperior()?R.bumpAwayFrom(s):s.bumpAwayFrom(R))}}},e.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,n=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(n),t.snapToGrid(),e.Events.setGroup(!1)},e.BUMP_DELAY/2),setTimeout(function(){e.Events.setGroup(n),t.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)},e.BlockSvg.prototype.positionNearConnection=function(t,n){t.type!=e.connectionTypes.NEXT_STATEMENT&&t.type!=e.connectionTypes.INPUT_VALUE||this.moveBy(n.x-t.x,n.y-t.y)},e.BlockSvg.prototype.getParent=function(){return e.BlockSvg.superClass_.getParent.call(this)},e.BlockSvg.prototype.getRootBlock=function(){return e.BlockSvg.superClass_.getRootBlock.call(this)},e.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,e.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}e.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},e.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.moveToOffset(t),o.isConnected()&&o.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},e.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},e.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},e.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,n=this.width,o=this.getNextBlock();if(o){o=o.getHeightWidth();var s=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=o.height-s,n=Math.max(n,o.width)}return{height:t,width:n}},e.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},e.BlockSvg.prototype.highlightShapeForInput=function(t,n){this.pathObject.updateShapeForInputHighlight(t,n)},e.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},e.ConnectionDB.prototype.addConnection=function(t,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,t)},e.ConnectionDB.prototype.findIndexOfConnection_=function(t,n){if(!this.connections_.length)return-1;var o=this.calculateIndexForYPos_(n);if(o>=this.connections_.length)return-1;n=t.y;for(var s=o;0<=s&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s--}for(s=o;s<this.connections_.length&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s++}return-1},e.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var n=0,o=this.connections_.length;n<o;){var s=Math.floor((n+o)/2);if(this.connections_[s].y<t)n=s+1;else{if(!(this.connections_[s].y>t)){n=s;break}o=s}}return n},e.ConnectionDB.prototype.removeConnection=function(t,n){if(-1==(t=this.findIndexOfConnection_(t,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},e.ConnectionDB.prototype.getNeighbours=function(t,n){function o(V){var G=c-s[V].x,Z=v-s[V].y;return Math.sqrt(G*G+Z*Z)<=n&&H.push(s[V]),Z<n}var s=this.connections_,c=t.x,v=t.y;t=0;for(var R=s.length-2,O=R;t<O;)s[O].y<v?t=O:R=O,O=Math.floor((t+R)/2);var H=[];if(R=t=O,s.length){for(;0<=t&&o(t);)t--;do{R++}while(R<s.length&&o(R))}return H},e.ConnectionDB.prototype.isInYRange_=function(t,n,o){return Math.abs(this.connections_[t].y-n)<=o},e.ConnectionDB.prototype.searchForClosest=function(t,n,o){if(!this.connections_.length)return{connection:null,radius:n};var s=t.y,c=t.x;t.x=c+o.x,t.y=s+o.y;var v=this.calculateIndexForYPos_(t.y);o=null;for(var O,R=n,H=v-1;0<=H&&this.isInYRange_(H,t.y,n);)this.connectionChecker_.canConnect(t,O=this.connections_[H],!0,R)&&(o=O,R=O.distanceFrom(t)),H--;for(;v<this.connections_.length&&this.isInYRange_(v,t.y,n);)this.connectionChecker_.canConnect(t,O=this.connections_[v],!0,R)&&(o=O,R=O.distanceFrom(t)),v++;return t.x=c,t.y=s,{connection:o,radius:R}},e.ConnectionDB.init=function(t){var n=[];return n[e.connectionTypes.INPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.OUTPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.NEXT_STATEMENT]=new e.ConnectionDB(t),n[e.connectionTypes.PREVIOUS_STATEMENT]=new e.ConnectionDB(t),n},e.Events.ThemeChange=function(t,n){e.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=t},e.utils.object.inherits(e.Events.ThemeChange,e.Events.UiBase),e.Events.ThemeChange.prototype.type=e.Events.THEME_CHANGE,e.Events.ThemeChange.prototype.toJson=function(){var t=e.Events.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},e.Events.ThemeChange.prototype.fromJson=function(t){e.Events.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},e.registry.register(e.registry.Type.EVENT,e.Events.THEME_CHANGE,e.Events.ThemeChange),e.Events.ViewportChange=function(t,n,o,s,c){e.Events.ViewportChange.superClass_.constructor.call(this,s),this.viewTop=t,this.viewLeft=n,this.scale=o,this.oldScale=c},e.utils.object.inherits(e.Events.ViewportChange,e.Events.UiBase),e.Events.ViewportChange.prototype.type=e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange.prototype.toJson=function(){var t=e.Events.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},e.Events.ViewportChange.prototype.fromJson=function(t){e.Events.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},e.registry.register(e.registry.Type.EVENT,e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange),e.IMetricsManager=function(){},e.MetricsManager=function(t){this.workspace_=t},e.MetricsManager.prototype.getDimensionsPx_=function(t){var n=0,o=0;return t&&(n=t.getWidth(),o=t.getHeight()),new e.utils.Size(n,o)},e.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},e.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),s=!!this.workspace_.getToolbox(),c=!!this.workspace_.getFlyout(!0),v=s?n.position:o.position,R=v==e.utils.toolbox.Position.LEFT;return v=v==e.utils.toolbox.Position.TOP,s&&R?t=n.width:c&&R&&(t=o.width),R=0,s&&v?R=n.height:c&&v&&(R=o.height),{top:R,left:t}},e.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var n=this.getSvgMetrics(),o=this.getToolboxMetrics(),s=this.getFlyoutMetrics(!0),c=this.workspace_.getToolbox()?o.position:s.position;return this.workspace_.getToolbox()?c==e.utils.toolbox.Position.TOP||c==e.utils.toolbox.Position.BOTTOM?n.height-=o.height:(c==e.utils.toolbox.Position.LEFT||c==e.utils.toolbox.Position.RIGHT)&&(n.width-=o.width):this.workspace_.getFlyout(!0)&&(c==e.utils.toolbox.Position.TOP||c==e.utils.toolbox.Position.BOTTOM?n.height-=s.height:(c==e.utils.toolbox.Position.LEFT||c==e.utils.toolbox.Position.RIGHT)&&(n.width-=s.width)),{height:n.height/t,width:n.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},e.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*t,width:(n.right-n.left)*t,top:n.top*t,left:n.left*t}},e.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},e.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),o=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var s={};return o||(s.top=t.top,s.bottom=t.top+t.height),n||(s.left=t.left,s.right=t.left+t.width),s},e.MetricsManager.prototype.getPaddedContent_=function(t,n){var o=n.top+n.height,s=n.left+n.width,c=t.width,v=c/2,R=(t=t.height)/2;return{top:Math.min(n.top-R,o-t),bottom:Math.max(o+R,n.top+t),left:Math.min(n.left-v,s-c),right:Math.max(s+v,n.left+c)}},e.MetricsManager.prototype.getScrollMetrics=function(t,n,o){t=t?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var s=o||this.getContentMetrics();o=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,s);var c=void 0!==o.left?o.left:n.left;return{top:(s=void 0!==o.top?o.top:n.top)/t,left:c/t,width:((void 0!==o.right?o.right:n.right)-c)/t,height:((void 0!==o.bottom?o.bottom:n.bottom)-s)/t}},e.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},e.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),o=this.getSvgMetrics(),s=this.getAbsoluteMetrics(),c=this.getViewMetrics(),v=this.getContentMetrics(),R=this.getScrollMetrics(!1,c,v);return{contentHeight:v.height,contentWidth:v.width,contentTop:v.top,contentLeft:v.left,scrollHeight:R.height,scrollWidth:R.width,scrollTop:R.top,scrollLeft:R.left,viewHeight:c.height,viewWidth:c.width,viewTop:c.top,viewLeft:c.left,absoluteTop:s.top,absoluteLeft:s.left,svgHeight:o.height,svgWidth:o.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:n.width,flyoutHeight:n.height}},e.registry.register(e.registry.Type.METRICS_MANAGER,e.registry.DEFAULT,e.MetricsManager),e.FlyoutMetricsManager=function(t,n){this.flyout_=n,e.FlyoutMetricsManager.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.FlyoutMetricsManager,e.MetricsManager),e.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(n){t={height:0,y:0,width:0,x:0}}return t},e.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var n=this.getBoundingBox_();return{height:n.height*(t=t?1:this.workspace_.scale),width:n.width*t,top:n.y*t,left:n.x*t}},e.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,n,o){return{height:((n=o||this.getContentMetrics()).height+2*(o=this.flyout_.MARGIN*this.workspace_.scale))/(t=t?this.workspace_.scale:1),width:(n.width+n.left+o)/t,top:0,left:0}},e.ThemeManager=function(t,n){this.workspace_=t,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},e.ThemeManager.prototype.getTheme=function(){return this.theme_},e.ThemeManager.prototype.setTheme=function(t){var o,n=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(n&&e.utils.dom.removeClass(t,n.getClassName()),e.utils.dom.addClass(t,this.theme_.getClassName())),n=0;t=this.subscribedWorkspaces_[n];n++)t.refreshTheme();for(n=0,t=Object.keys(this.componentDB_);o=t[n];n++)for(var c,s=0;c=this.componentDB_[o][s];s++){var v=c.element;c=c.propertyName;var R=this.theme_&&this.theme_.getComponentStyle(o);v.style[c]=R||""}e.hideChaff()},e.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},e.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},e.ThemeManager.prototype.subscribe=function(t,n,o){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:t,propertyName:o}),n=this.theme_&&this.theme_.getComponentStyle(n),t.style[o]=n||""},e.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var s,n=Object.keys(this.componentDB_),o=0;s=n[o];o++){for(var c=this.componentDB_[s],v=c.length-1;0<=v;v--)c[v].element===t&&c.splice(v,1);this.componentDB_[s].length||delete this.componentDB_[s]}},e.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},e.TouchGesture=function(t,n){e.TouchGesture.superClass_.constructor.call(this,t,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},e.utils.object.inherits(e.TouchGesture,e.Gesture),e.TouchGesture.ZOOM_IN_MULTIPLIER=5,e.TouchGesture.ZOOM_OUT_MULTIPLIER=6,e.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,e.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&e.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=e.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&e.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&e.longStop_())},e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(e.Touch.isTouchEvent(t)&&this.handleTouchMove(t),e.longStop_()):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handleUp=function(t){e.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},e.TouchGesture.prototype.dispose=function(){e.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&e.browserEvents.unbind(this.onStartWrapper_)},e.TouchGesture.prototype.handleTouchStart=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,t.preventDefault())},e.TouchGesture.prototype.handleTouchMove=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(t):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handlePinch_=function(t){var n=Object.keys(this.cachedPoints_);if(n=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var o=n-this.previousScale_;o=0<o?o*e.TouchGesture.ZOOM_IN_MULTIPLIER:o*e.TouchGesture.ZOOM_OUT_MULTIPLIER;var s=this.startWorkspace_,c=e.utils.mouseToSvg(t,s.getParentSvg(),s.getInverseScreenCTM());s.zoom(c.x,c.y,o)}this.previousScale_=n,t.preventDefault()},e.TouchGesture.prototype.handleTouchEnd=function(t){t=e.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new e.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},e.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},e.WorkspaceAudio.prototype.lastSound_=null,e.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},e.WorkspaceAudio.prototype.load=function(t,n){if(t.length){try{var o=new e.utils.global.Audio}catch(O){return}for(var s,c=0;c<t.length;c++){var v=t[c],R=v.match(/\.(\w+)$/);if(R&&o.canPlayType("audio/"+R[1])){s=new e.utils.global.Audio(v);break}}s&&s.play&&(this.SOUNDS_[n]=s)}},e.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var n=this.SOUNDS_[t];n.volume=.01;var o=n.play();if(void 0!==o?o.then(n.pause).catch(function(){}):n.pause(),e.utils.userAgent.IPAD||e.utils.userAgent.IPHONE)break}},e.WorkspaceAudio.prototype.play=function(t,n){var o=this.SOUNDS_[t];o?(t=new Date,null!=this.lastSound_&&t-this.lastSound_<e.SOUND_LIMIT||(this.lastSound_=t,(o=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID?o:o.cloneNode()).volume=void 0===n?1:n,o.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,n)},e.WorkspaceSvg=function(t,n,o){e.WorkspaceSvg.superClass_.constructor.call(this,t),this.metricsManager_=new(e.registry.getClassFromOptions(e.registry.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||e.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new e.ComponentManager,this.connectionDBList=e.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),o&&(this.workspaceDragSurface_=o),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&e.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new e.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new e.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new e.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),e.Variables&&e.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_CATEGORY_NAME,e.Variables.flyoutCategory),e.VariablesDynamic&&e.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_DYNAMIC_CATEGORY_NAME,e.VariablesDynamic.flyoutCategory),e.Procedures&&e.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(e.PROCEDURE_CATEGORY_NAME,e.Procedures.flyoutCategory),this.addChangeListener(e.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new e.ThemeManager(this,this.options.theme||e.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=e.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new e.utils.Size(0,0)},e.utils.object.inherits(e.WorkspaceSvg,e.Workspace),e.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,e.WorkspaceSvg.prototype.rendered=!0,e.WorkspaceSvg.prototype.isVisible_=!0,e.WorkspaceSvg.prototype.isFlyout=!1,e.WorkspaceSvg.prototype.isMutator=!1,e.WorkspaceSvg.prototype.resizesEnabled_=!0,e.WorkspaceSvg.prototype.scrollX=0,e.WorkspaceSvg.prototype.scrollY=0,e.WorkspaceSvg.prototype.startScrollX=0,e.WorkspaceSvg.prototype.startScrollY=0,e.WorkspaceSvg.prototype.dragDeltaXY_=null,e.WorkspaceSvg.prototype.scale=1,e.WorkspaceSvg.prototype.oldScale_=1,e.WorkspaceSvg.prototype.oldTop_=0,e.WorkspaceSvg.prototype.oldLeft_=0,e.WorkspaceSvg.prototype.trashcan=null,e.WorkspaceSvg.prototype.scrollbar=null,e.WorkspaceSvg.prototype.flyout_=null,e.WorkspaceSvg.prototype.toolbox_=null,e.WorkspaceSvg.prototype.currentGesture_=null,e.WorkspaceSvg.prototype.blockDragSurface_=null,e.WorkspaceSvg.prototype.workspaceDragSurface_=null,e.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,e.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,e.WorkspaceSvg.prototype.injectionDiv_=null,e.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,e.WorkspaceSvg.prototype.targetWorkspace=null,e.WorkspaceSvg.prototype.inverseScreenCTM_=null,e.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,e.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},e.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},e.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},e.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},e.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},e.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},e.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},e.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},e.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},e.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},e.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},e.WorkspaceSvg.prototype.setTheme=function(t){t||(t=e.Themes.Classic),this.themeManager_.setTheme(t)},e.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new(e.Events.get(e.Events.THEME_CHANGE))(this.getTheme().name,this.id);e.Events.fire(t)},e.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var o,n=0;o=t[n];n++){var s=o.getStyleName();s&&(o.setStyle(s),o.mutator&&o.mutator.updateBlockStyle())}},e.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},e.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},e.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},e.WorkspaceSvg.prototype.getSvgXY=function(t){var n=0,o=0,s=1;(e.utils.dom.containsNode(this.getCanvas(),t)||e.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(s=this.scale);do{var c=e.utils.getRelativeXY(t);(t==this.getCanvas()||t==this.getBubbleCanvas())&&(s=1),n+=c.x*s,o+=c.y*s,t=t.parentNode}while(t&&t!=this.getParentSvg());return new e.utils.Coordinate(n,o)},e.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new e.utils.Size(t.width,t.height)},e.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return e.utils.getInjectionDivXY_(this.getCanvas())},e.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},e.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},e.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(e.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(e.registry.getClassFromOptions(e.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=e.registry.getClassFromOptions(e.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},e.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),e.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&e.utils.dom.removeNode(t.parentNode)}this.resizeHandlerWrapper_&&(e.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},e.WorkspaceSvg.prototype.newBlock=function(t,n){return new e.BlockSvg(this,t,n)},e.WorkspaceSvg.prototype.addTrashcan=function(){if(!e.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new e.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.addZoomControls=function(){if(!e.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new e.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},e.WorkspaceSvg.prototype.addFlyout=function(t){var n=new e.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},e.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},e.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},e.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},e.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},e.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var c,t=this.componentManager_.getComponents(e.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),o=[],s=0;c=t[s];s++)c.position(n,o),(c=c.getBoundingRectangle())&&o.push(c);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},e.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=e.utils.getDocumentScroll();e.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},e.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,n){var o=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,o.cachedWidth_=t),n&&(this.cachedParentSvgSize_.height=n,o.cachedHeight_=n)},e.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},e.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},e.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(e.Events.isEnabled()){var t=this.scale,n=-this.scrollY,o=-this.scrollX;if(!(t==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(o-this.oldLeft_))){var s=new(e.Events.get(e.Events.VIEWPORT_CHANGE))(n,o,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=n,this.oldLeft_=o,e.Events.fire(s)}}},e.WorkspaceSvg.prototype.translate=function(t,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,n);else{var o="translate("+t+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",o),this.svgBubbleCanvas_.setAttribute("transform",o)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,n,this.scale),this.grid_&&this.grid_.moveTo(t,n),this.maybeFireViewportChangeEvent()},e.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",t="translate("+t.x+","+t.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",t)}},e.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),o=parseInt(this.getParentSvg().getAttribute("height"),10),s=e.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,n,o,this.scale),this.workspaceDragSurface_.translateSurface(s.x,s.y)}},e.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},e.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},e.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var n=(t=this.getAllBlocks(!1)).length-1;0<=n;n--)t[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else e.hideChaff(!0)},e.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),n=0;n<t.length;n++)t[n].render(!1);this.markerManager_.updateMarkers()},e.WorkspaceSvg.prototype.highlightBlock=function(t,n){if(void 0===n){for(var s,o=0;s=this.highlightedBlocks_[o];o++)s.setHighlighted(!1);this.highlightedBlocks_.length=0}(s=t?this.getBlockById(t):null)&&((t=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(s)&&this.highlightedBlocks_.push(s):e.utils.arrayRemove(this.highlightedBlocks_,s),s.setHighlighted(t))},e.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},e.WorkspaceSvg.prototype.pasteBlock_=function(t){e.Events.disable();try{var n=e.Xml.domToBlock(t,this),o=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);if(!isNaN(o)&&!isNaN(s)){this.RTL&&(o=-o);do{t=!1;for(var R,c=this.getAllBlocks(!1),v=0;R=c[v];v++){var O=R.getRelativeToSurfaceXY();if(1>=Math.abs(o-O.x)&&1>=Math.abs(s-O.y)){t=!0;break}}if(!t){var V,H=n.getConnections_(!1);for(v=0;V=H[v];v++)if(V.closest(e.SNAP_RADIUS,new e.utils.Coordinate(o,s)).connection){t=!0;break}}t&&(o=this.RTL?o-e.SNAP_RADIUS:o+e.SNAP_RADIUS,s+=2*e.SNAP_RADIUS)}while(t);n.moveBy(o,s)}}finally{e.Events.enable()}e.Events.isEnabled()&&!n.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n)),n.select()},e.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){e.Events.disable();try{var n=e.WorkspaceCommentSvg.fromXml(t,this),o=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);isNaN(o)||isNaN(s)||(this.RTL&&(o=-o),n.moveBy(o+50,s+50))}finally{e.Events.enable()}e.Events.isEnabled()&&e.WorkspaceComment.fireCreateEvent(n),n.select()},e.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},e.WorkspaceSvg.prototype.renameVariableById=function(t,n){e.WorkspaceSvg.superClass_.renameVariableById.call(this,t,n),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.deleteVariableById=function(t){e.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.createVariable=function(t,n,o){return t=e.WorkspaceSvg.superClass_.createVariable.call(this,t,n,o),this.refreshToolboxSelection(),t},e.WorkspaceSvg.prototype.recordDeleteAreas=function(){e.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},e.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(e.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var o,n=0;o=t[n];n++){var s=o.getClientRect();s&&this.dragTargetAreas_.push({component:o,clientRect:s})}},e.WorkspaceSvg.prototype.getDragTarget=function(t){for(var o,n=0;o=this.dragTargetAreas_[n];n++)if(o.clientRect.contains(t.clientX,t.clientY))return o.component;return null},e.WorkspaceSvg.prototype.onMouseDown_=function(t){var n=this.getGesture(t);n&&n.handleWsStart(t,this)},e.WorkspaceSvg.prototype.startDrag=function(t,n){(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=e.utils.Coordinate.difference(n,t)},e.WorkspaceSvg.prototype.moveDrag=function(t){return(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,e.utils.Coordinate.sum(this.dragDeltaXY_,t)},e.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},e.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},e.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},e.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},e.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},e.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(e.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||o){var s=e.utils.getScrollDeltaPixels(t);!n||!t.ctrlKey&&o?(n=this.scrollX-s.x,o=this.scrollY-s.y,t.shiftKey&&!s.x&&(n=this.scrollX-s.y,o=this.scrollY),this.scroll(n,o)):(s=-s.y/50,n=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,s)),t.preventDefault()}}},e.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new e.utils.Rect(0,0,0,0);for(var n=t[0].getBoundingRectangle(),o=1;o<t.length;o++){var s=t[o];s.isInsertionMarker&&s.isInsertionMarker()||((s=s.getBoundingRectangle()).top<n.top&&(n.top=s.top),s.bottom>n.bottom&&(n.bottom=s.bottom),s.left<n.left&&(n.left=s.left),s.right>n.right&&(n.right=s.right))}return n},e.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),e.Events.setGroup(!0);for(var s,t=this.getTopBlocks(!0),n=0,o=0;s=t[o];o++)if(s.isMovable()){var c=s.getRelativeToSurfaceXY();s.moveBy(-c.x,n-c.y),s.snapToGrid(),n=s.getRelativeToSurfaceXY().y+s.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}e.Events.setGroup(!1),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var n=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,t),e.ContextMenu.show(t,n,this.RTL)}},e.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=e.utils.toolbox.convertToolboxDefToJson(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.utils.toolbox.hasCategories(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},e.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(e.mainWorkspace=this,this.setBrowserFocus())},e.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},e.WorkspaceSvg.prototype.zoom=function(t,n,o){o=Math.pow(this.options.zoomOptions.scaleSpeed,o);var s=this.scale*o;if(this.scale!=s){s>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale/this.scale:s<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale/this.scale);var c=this.getCanvas().getCTM(),v=this.getParentSvg().createSVGPoint();v.x=t,v.y=n,v=v.matrixTransform(c.inverse()),c=c.translate((t=v.x)*(1-o),(n=v.y)*(1-o)).scale(o),this.scrollX=c.e,this.scrollY=c.f,this.setScale(s)}},e.WorkspaceSvg.prototype.zoomCenter=function(t){var n=this.getMetrics();if(this.flyout_){var o=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else o=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(o,n,t)},e.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),n=t.viewWidth;t=t.viewHeight;var o=this.getBlocksBoundingBox(),s=o.right-o.left;if(o=o.bottom-o.top,s){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),o+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),s+=this.flyout_.getWidth()/this.scale)),n/=s,t/=o,e.Events.disable();try{this.setScale(Math.min(n,t)),this.scrollCenter()}finally{e.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.beginCanvasTransition=function(){e.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.endCanvasTransition=function(){e.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),n=(t.scrollWidth-t.viewWidth)/2,o=(t.scrollHeight-t.viewHeight)/2;this.scroll(n=-n-t.scrollLeft,o=-o-t.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var n=t.getRelativeToSurfaceXY(),o=t.getHeightWidth(),s=this.scale;t=(n.x+(this.RTL?-1:1)*o.width/2)*s,n=(n.y+o.height/2)*s,o=this.getMetrics(),this.scroll(-(t-o.viewWidth/2),-(n-o.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,e.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},e.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},e.WorkspaceSvg.prototype.scroll=function(t,n){e.hideChaff(!0);var o=this.getMetrics();t=Math.min(t,-o.scrollLeft),n=Math.min(n,-o.scrollTop);var s=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);t=Math.max(t,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),n=Math.max(n,-s),this.scrollX=t,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(t+o.scrollLeft),-(n+o.scrollTop),!1),this.translate(t+=o.absoluteLeft,n+=o.absoluteTop)},e.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var n=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*t.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},e.WorkspaceSvg.prototype.getBlockById=function(t){return e.WorkspaceSvg.superClass_.getBlockById.call(this,t)},e.WorkspaceSvg.prototype.getTopBlocks=function(t){return e.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},e.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},e.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},e.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopComment.call(this,t)},e.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},e.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},e.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){e.utils.arrayRemove(this.topBoundedElements_,t)},e.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},e.WorkspaceSvg.prototype.setResizesEnabled=function(t){var n=!this.resizesEnabled_&&t;this.resizesEnabled_=t,n&&this.resizeContents()},e.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),e.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.registerButtonCallback=function(t,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=n},e.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},e.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},e.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=n},e.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},e.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},e.WorkspaceSvg.prototype.getGesture=function(t){var n="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,o=this.currentGesture_;return o?n&&o.hasStarted()?(console.warn("Tried to start the same gesture twice."),o.cancel(),null):o:n?this.currentGesture_=new e.TouchGesture(t,this):null},e.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},e.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},e.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},e.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},e.inject=function(t,n){if(e.checkBlockColourConstants(),"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!e.utils.dom.containsNode(document,t))throw Error("Error: container is not in current document.");n=new e.Options(n||{});var o=document.createElement("div");o.className="injectionDiv",o.tabIndex=0,e.utils.aria.setState(o,e.utils.aria.State.LABEL,e.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(o),t=e.createDom_(o,n);var s=new e.BlockDragSurfaceSvg(o),c=new e.WorkspaceDragSurfaceSvg(o),v=e.createMainWorkspace_(t,n,s,c);return e.init_(v),e.mainWorkspace=v,e.svgResize(v),o.addEventListener("focusin",function(){e.mainWorkspace=v}),v},e.createDom_=function(t,n){t.setAttribute("dir","LTR"),e.Css.inject(n.hasCss,n.pathToMedia),t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var o=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),s=String(Math.random()).substring(2);return n.gridPattern=e.Grid.createDom(s,n.gridOptions,o),t},e.createMainWorkspace_=function(t,n,o,s){return n.parentWorkspace=null,(n=new e.WorkspaceSvg(n,o,s)).scale=(o=n.options).zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground")),e.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),e.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!o.hasCategories&&o.languageTree&&(s=n.addFlyout(e.utils.Svg.SVG),e.utils.dom.insertAfter(s,t)),o.hasTrashcan&&n.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(e.bumpIntoBoundsHandler_(n)),e.svgResize(n),e.WidgetDiv.createDom(),e.DropDownDiv.createDom(),e.Tooltip.createDom(),n},e.extractObjectFromEvent_=function(t,n){var o=null;switch(n.type){case e.Events.BLOCK_CREATE:case e.Events.BLOCK_MOVE:(o=t.getBlockById(n.blockId))&&(o=o.getRootBlock());break;case e.Events.COMMENT_CREATE:case e.Events.COMMENT_MOVE:o=t.getCommentById(n.commentId)}return o},e.bumpTopObjectsIntoBounds_=function(t){var n=t.getMetricsManager();if(n.hasFixedEdges()&&!t.isDragging()){n=n.getScrollMetrics(!0);for(var c,o=t.getTopBoundedElements(),s=0;c=o[s];s++)e.bumpObjectIntoBounds_(t,n,c)}},e.bumpIntoBoundsHandler_=function(t){return function(n){var o=t.getMetricsManager();if(o.hasFixedEdges()&&!t.isDragging())if(-1!==e.Events.BUMP_EVENTS.indexOf(n.type)){o=o.getScrollMetrics(!0);var s=e.extractObjectFromEvent_(t,n);if(s){var c=e.Events.getGroup();e.Events.setGroup(n.group),e.bumpObjectIntoBounds_(t,o,s)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==c&&e.Events.setGroup(c)}}else n.type===e.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&e.bumpTopObjectsIntoBounds_(t)}},e.bumpObjectIntoBounds_=function(t,n,o){var s=o.getBoundingRectangle(),c=s.right-s.left,v=e.utils.math.clamp(n.top,s.top,n.top+n.height-(s.bottom-s.top))-s.top,R=n.left;return n=n.left+n.width-c,t.RTL?R=Math.min(n,R):n=Math.max(R,n),!(!(t=e.utils.math.clamp(R,s.left,n)-s.left)&&!v||(o.moveBy(t,v),0))},e.init_=function(t){var n=t.options,o=t.getParentSvg();if(e.browserEvents.conditionalBind(o.parentNode,"contextmenu",null,function(c){e.utils.isTargetInput(c)||c.preventDefault()}),o=e.browserEvents.conditionalBind(window,"resize",null,function(){e.hideChaff(!0),e.svgResize(t),e.bumpTopObjectsIntoBounds_(t)}),t.setResizeHandlerWrapper(o),e.inject.bindDocumentEvents_(),n.languageTree){o=t.getToolbox();var s=t.getFlyout(!0);o?o.init():s&&(s.init(t),s.show(n.languageTree),"function"==typeof s.scrollToStart&&s.scrollToStart())}n.hasTrashcan&&t.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&t.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(t.scrollbar=new e.ScrollbarPair(t,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),n.hasSounds&&e.inject.loadSounds_(n.pathToMedia,t)},e.inject.bindDocumentEvents_=function(){e.documentEventsBound_||(e.browserEvents.conditionalBind(document,"scroll",null,function(){for(var o,t=e.Workspace.getAll(),n=0;o=t[n];n++)o.updateInverseScreenCTM&&o.updateInverseScreenCTM()}),e.browserEvents.conditionalBind(document,"keydown",null,e.onKeyDown),e.browserEvents.bind(document,"touchend",null,e.longStop_),e.browserEvents.bind(document,"touchcancel",null,e.longStop_),e.utils.userAgent.IPAD&&e.browserEvents.conditionalBind(window,"orientationchange",document,function(){e.svgResize(e.getMainWorkspace())})),e.documentEventsBound_=!0},e.inject.loadSounds_=function(t,n){var o=n.getAudioManager();o.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),o.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),o.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var s=[];t=function(){for(;s.length;)e.browserEvents.unbind(s.pop());o.preload()},s.push(e.browserEvents.conditionalBind(document,"mousemove",null,t,!0)),s.push(e.browserEvents.conditionalBind(document,"touchstart",null,t,!0))},e.Names=function(t,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),n=0;n<t.length;n++)this.reservedDict_[t[n]]=!0;this.reset()},e.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",e.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},e.Names.prototype.setVariableMap=function(t){this.variableMap_=t},e.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},e.Names.prototype.populateVariables=function(t){t=e.Variables.allUsedVarModels(t);for(var n=0;n<t.length;n++)this.getName(t[n].getId(),e.VARIABLE_CATEGORY_NAME)},e.Names.prototype.populateProcedures=function(t){t=(t=e.Procedures.allProcedures(t))[0].concat(t[1]);for(var n=0;n<t.length;n++)this.getName(t[n][0],e.PROCEDURE_CATEGORY_NAME)},e.Names.prototype.getName=function(t,n){var o=t;n==e.VARIABLE_CATEGORY_NAME&&(t=this.getNameForUserVariable_(t))&&(o=t),t=o.toLowerCase();var s=n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var c=this.db_[n];return t in c?s+c[t]:(n=this.getDistinctName(o,n),c[t]=n.substr(s.length),n)},e.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},e.Names.prototype.getDistinctName=function(t,n){t=this.safeName_(t);for(var o="";this.dbReverse_[t+o]||t+o in this.reservedDict_;)o=o?o+1:2;return this.dbReverse_[t+=o]=!0,(n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+t},e.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=e.Msg.UNNAMED_KEY||"unnamed",t},e.Names.equals=function(t,n){return t.toLowerCase()==n.toLowerCase()},e.Procedures={},e.Procedures.NAME_TYPE=e.PROCEDURE_CATEGORY_NAME,e.Procedures.DEFAULT_ARG="x",e.Procedures.allProcedures=function(t){var n=t.getBlocksByType("procedures_defnoreturn",!1).map(function(o){return o.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(o){return o.getProcedureDef()}),n.sort(e.Procedures.procTupleComparator_),t.sort(e.Procedures.procTupleComparator_),[n,t]},e.Procedures.procTupleComparator_=function(t,n){return t[0].localeCompare(n[0],void 0,{sensitivity:"base"})},e.Procedures.findLegalName=function(t,n){if(n.isInFlyout)return t;for(t=t||e.Msg.UNNAMED_KEY||"unnamed";!e.Procedures.isLegalName_(t,n.workspace,n);){var o=t.match(/^(.*?)(\d+)$/);t=o?o[1]+(parseInt(o[2],10)+1):t+"2"}return t},e.Procedures.isLegalName_=function(t,n,o){return!e.Procedures.isNameUsed(t,n,o)},e.Procedures.isNameUsed=function(t,n,o){n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s]!=o&&n[s].getProcedureDef){var c=n[s].getProcedureDef();if(e.Names.equals(c[0],t))return!0}return!1},e.Procedures.rename=function(t){t=t.trim();var n=e.Procedures.findLegalName(t,this.getSourceBlock()),o=this.getValue();if(o!=t&&o!=n){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var s=0;s<t.length;s++)t[s].renameProcedure&&t[s].renameProcedure(o,n)}return n},e.Procedures.flyoutCategory=function(t){function n(v,R){for(var O=0;O<v.length;O++){var H=v[O][0],V=v[O][1],G=e.utils.xml.createElement("block");G.setAttribute("type",R),G.setAttribute("gap",16);var Z=e.utils.xml.createElement("mutation");for(Z.setAttribute("name",H),G.appendChild(Z),H=0;H<V.length;H++){var vt=e.utils.xml.createElement("arg");vt.setAttribute("name",V[H]),Z.appendChild(vt)}o.push(G)}}var o=[];if(e.Blocks.procedures_defnoreturn){var s=e.utils.xml.createElement("block");s.setAttribute("type","procedures_defnoreturn"),s.setAttribute("gap",16);var c=e.utils.xml.createElement("field");c.setAttribute("name","NAME"),c.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),s.appendChild(c),o.push(s)}return e.Blocks.procedures_defreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),s.setAttribute("gap",16),(c=e.utils.xml.createElement("field")).setAttribute("name","NAME"),c.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),s.appendChild(c),o.push(s)),e.Blocks.procedures_ifreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),s.setAttribute("gap",16),o.push(s)),o.length&&o[o.length-1].setAttribute("gap",24),n((t=e.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),n(t[1],"procedures_callreturn"),o},e.Procedures.updateMutatorFlyout_=function(t){for(var c,n=[],o=t.getBlocksByType("procedures_mutatorarg",!1),s=0;c=o[s];s++)n.push(c.getFieldValue("NAME"));o=e.utils.xml.createElement("xml"),(s=e.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(c=e.utils.xml.createElement("field")).setAttribute("name","NAME"),n=e.Variables.generateUniqueNameFromOptions(e.Procedures.DEFAULT_ARG,n),n=e.utils.xml.createTextNode(n),c.appendChild(n),s.appendChild(c),o.appendChild(s),t.updateToolbox(o)},e.Procedures.mutatorOpenListener=function(t){if(t.type==e.Events.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var n=(t=e.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(t=t.mutator.getWorkspace(),e.Procedures.updateMutatorFlyout_(t),t.addChangeListener(e.Procedures.mutatorChangeListener_))}},e.Procedures.mutatorChangeListener_=function(t){(t.type==e.Events.BLOCK_CREATE||t.type==e.Events.BLOCK_DELETE||t.type==e.Events.BLOCK_CHANGE)&&(t=e.Workspace.getById(t.workspaceId),e.Procedures.updateMutatorFlyout_(t))},e.Procedures.getCallers=function(t,n){var o=[];n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s].getProcedureCall){var c=n[s].getProcedureCall();c&&e.Names.equals(c,t)&&o.push(n[s])}return o},e.Procedures.mutateCallers=function(t){var c,n=e.Events.recordUndo,o=t.getProcedureDef()[0],s=t.mutationToDom(!0);for(t=e.Procedures.getCallers(o,t.workspace),o=0;c=t[o];o++){var v=c.mutationToDom();v=v&&e.Xml.domToText(v),c.domToMutation(s);var R=c.mutationToDom();v!=(R=R&&e.Xml.domToText(R))&&(e.Events.recordUndo=!1,e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(c,"mutation",null,v,R)),e.Events.recordUndo=n)}},e.Procedures.getDefinition=function(t,n){n=n.getAllBlocks(!1);for(var o=0;o<n.length;o++)if(n[o].getProcedureDef){var s=n[o].getProcedureDef();if(s&&e.Names.equals(s[0],t))return n[o]}return null},e.ShortcutRegistry=function(){e.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},e.ShortcutRegistry.modifierKeys={Shift:e.utils.KeyCodes.SHIFT,Control:e.utils.KeyCodes.CTRL,Alt:e.utils.KeyCodes.ALT,Meta:e.utils.KeyCodes.META},e.ShortcutRegistry.prototype.register=function(t,n){if(this.registry_[t.name]&&!n)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},e.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},e.ShortcutRegistry.prototype.addKeyMapping=function(t,n,o){t=String(t);var s=this.keyMap_[t];if(s&&!o)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+s.toString());s&&o?s.unshift(n):this.keyMap_[t]=[n]},e.ShortcutRegistry.prototype.removeKeyMapping=function(t,n,o){var s=this.keyMap_[t];if(!s&&!o)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1;var c=s.indexOf(n);return-1<c?(s.splice(c,1),0==s.length&&delete this.keyMap_[t],!0):(o||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1)},e.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var n in this.keyMap_)this.removeKeyMapping(n,t,!0)},e.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},e.ShortcutRegistry.prototype.getKeyMap=function(){return e.utils.object.deepMerge(Object.create(null),this.keyMap_)},e.ShortcutRegistry.prototype.getRegistry=function(){return e.utils.object.deepMerge(Object.create(null),this.registry_)},e.ShortcutRegistry.prototype.onKeyDown=function(t,n){var o=this.serializeKeyEvent_(n);if(!(o=this.getShortcutNamesByKeyCode(o)))return!1;for(var c,s=0;c=o[s];s++)if((!(c=this.registry_[c]).preconditionFn||c.preconditionFn(t))&&c.callback&&c.callback(t,n,c))return!0;return!1},e.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},e.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var o,n=[];for(o in this.keyMap_)-1<this.keyMap_[o].indexOf(t)&&n.push(o);return n},e.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var o,n="";for(o in e.ShortcutRegistry.modifierKeys)t.getModifierState(o)&&(""!=n&&(n+="+"),n+=o);return""!=n&&t.keyCode?n=n+"+"+t.keyCode:t.keyCode&&(n=t.keyCode.toString()),n},e.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var s,n=e.utils.object.values(e.ShortcutRegistry.modifierKeys),o=0;s=t[o];o++)if(0>n.indexOf(s))throw Error(s+" is not a valid modifier key.")},e.ShortcutRegistry.prototype.createSerializedKey=function(t,n){var o="";if(n)for(var s in this.checkModifiers_(n),e.ShortcutRegistry.modifierKeys)-1<n.indexOf(e.ShortcutRegistry.modifierKeys[s])&&(""!=o&&(o+="+"),o+=s);return""!=o&&t?o=o+"+"+t:t&&(o=t.toString()),o},new e.ShortcutRegistry,e.VariableModel=function(t,n,o,s){this.workspace=t,this.name=n,this.type=o||"",this.id_=s||e.utils.genUid(),e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(this))},e.VariableModel.prototype.getId=function(){return this.id_},e.VariableModel.compareByName=function(t,n){return t.name.localeCompare(n.name,void 0,{sensitivity:"base"})},e.Variables={},e.Variables.NAME_TYPE=e.VARIABLE_CATEGORY_NAME,e.Variables.allUsedVarModels=function(t){var n=t.getAllBlocks(!1);t=Object.create(null);for(var o=0;o<n.length;o++){var s=n[o].getVarModels();if(s)for(var c=0;c<s.length;c++){var v=s[c],R=v.getId();R&&(t[R]=v)}}for(R in n=[],t)n.push(t[R]);return n},e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},e.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var s,n=Object.create(null),o=0;s=t[o];o++){var c=s.getDeveloperVariables;if(!c&&s.getDeveloperVars&&(c=s.getDeveloperVars,e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+s.type+"')"),e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]=!0)),c)for(s=c(),c=0;c<s.length;c++)n[s[c]]=!0}return Object.keys(n)},e.Variables.flyoutCategory=function(t){var n=[],o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(s){e.Variables.createVariableButtonHandler(s.getTargetWorkspace())}),n.push(o),t=e.Variables.flyoutCategoryBlocks(t),n.concat(t)},e.Variables.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getVariablesOfType("")).length){var o=t[t.length-1];if(e.Blocks.variables_set){var s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set"),s.setAttribute("gap",e.Blocks.math_change?8:24),s.appendChild(e.Variables.generateVariableFieldDom(o)),n.push(s)}if(e.Blocks.math_change&&((s=e.utils.xml.createElement("block")).setAttribute("type","math_change"),s.setAttribute("gap",e.Blocks.variables_get?20:8),s.appendChild(e.Variables.generateVariableFieldDom(o)),o=e.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),s.appendChild(o),n.push(s)),e.Blocks.variables_get){t.sort(e.VariableModel.compareByName),o=0;for(var c;c=t[o];o++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(c)),n.push(s)}}return n},e.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",e.Variables.generateUniqueName=function(t){return e.Variables.generateUniqueNameFromOptions(e.Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},e.Variables.generateUniqueNameFromOptions=function(t,n){if(!n.length)return t;for(var o=e.Variables.VAR_LETTER_OPTIONS,s="",c=o.indexOf(t);;){for(var v=!1,R=0;R<n.length;R++)if(n[R].toLowerCase()==t){v=!0;break}if(!v)return t;++c==o.length&&(c=0,s=Number(s)+1),t=o.charAt(c)+s}},e.Variables.createVariableButtonHandler=function(t,n,o){var s=o||"",c=function(v){e.Variables.promptName(e.Msg.NEW_VARIABLE_TITLE,v,function(R){if(R){var O=e.Variables.nameUsedWithAnyType(R,t);if(O){if(O.type==s)var H=e.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",O.name);else H=(H=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",O.name).replace("%2",O.type);e.alert(H,function(){c(R)})}else t.createVariable(R,s),n&&n(R)}else n&&n(null)})};c("")},e.Variables.createVariable=e.Variables.createVariableButtonHandler,e.Variables.renameVariable=function(t,n,o){var s=function(c){var v=e.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);e.Variables.promptName(v,c,function(R){if(R){var O=e.Variables.nameUsedWithOtherType_(R,n.type,t);O?(O=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",O.name).replace("%2",O.type),e.alert(O,function(){s(R)})):(t.renameVariableById(n.getId(),R),o&&o(R))}else o&&o(null)})};s("")},e.Variables.promptName=function(t,n,o){e.prompt(t,n,function(s){s&&((s=s.replace(/[\s\xa0]+/g," ").trim())==e.Msg.RENAME_VARIABLE||s==e.Msg.NEW_VARIABLE)&&(s=null),o(s)})},e.Variables.nameUsedWithOtherType_=function(t,n,o){o=o.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var c,s=0;c=o[s];s++)if(c.name.toLowerCase()==t&&c.type!=n)return c;return null},e.Variables.nameUsedWithAnyType=function(t,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var s,o=0;s=n[o];o++)if(s.name.toLowerCase()==t)return s;return null},e.Variables.generateVariableFieldDom=function(t){var n=e.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),t=e.utils.xml.createTextNode(t.name),n.appendChild(t),n},e.Variables.getOrCreateVariablePackage=function(t,n,o,s){var c=e.Variables.getVariable(t,n,o,s);return c||(c=e.Variables.createVariable_(t,n,o,s)),c},e.Variables.getVariable=function(t,n,o,s){var c=t.getPotentialVariableMap(),v=null;if(n&&(!(v=t.getVariableById(n))&&c&&(v=c.getVariableById(n)),v))return v;if(o){if(null==s)throw Error("Tried to look up a variable by name without a type");!(v=t.getVariable(o,s))&&c&&(v=c.getVariable(o,s))}return v},e.Variables.createVariable_=function(t,n,o,s){var c=t.getPotentialVariableMap();return o||(o=e.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),c?c.createVariable(o,s,n):t.createVariable(o,s,n)},e.Variables.getAddedVariables=function(t,n){t=t.getAllVariables();var o=[];if(n.length!=t.length)for(var s=0;s<t.length;s++){var c=t[s];-1==n.indexOf(c)&&o.push(c)}return o},e.VERSION="6.20210701.0",e.mainWorkspace=null,e.selected=null,e.draggingConnections=[],e.clipboardXml_=null,e.clipboardSource_=null,e.clipboardTypeCounts_=null,e.cache3dSupported_=null,e.parentContainer=null,e.svgSize=function(t){return e.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new e.utils.Size(t.cachedWidth_,t.cachedHeight_)},e.resizeSvgContents=function(t){t.resizeContents()},e.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var n=t.getParentSvg(),o=t.getCachedParentSvgSize(),s=n.parentNode;if(s){var c=s.offsetWidth;s=s.offsetHeight,o.width!=c&&(n.setAttribute("width",c+"px"),t.setCachedParentSvgSize(c,null)),o.height!=s&&(n.setAttribute("height",s+"px"),t.setCachedParentSvgSize(null,s)),t.resize()}},e.onKeyDown=function(t){var n=e.mainWorkspace;n&&!(e.utils.isTargetInput(t)||n.rendered&&!n.isVisible())&&e.ShortcutRegistry.registry.onKeyDown(n,t)},e.deleteBlock=function(t){t.workspace.isFlyout||(e.Events.setGroup(!0),e.hideChaff(),t.dispose(!t.outputConnection,!0),e.Events.setGroup(!1))},e.copy=function(t){(t=t.toCopyData())&&(e.clipboardXml_=t.xml,e.clipboardSource_=t.source,e.clipboardTypeCounts_=t.typeCounts)},e.paste=function(){if(!e.clipboardXml_)return!1;var t=e.clipboardSource_;return t.isFlyout&&(t=t.targetWorkspace),!(!e.clipboardTypeCounts_||!t.isCapacityAvailable(e.clipboardTypeCounts_)||(e.Events.setGroup(!0),t.paste(e.clipboardXml_),e.Events.setGroup(!1),0))},e.duplicate=function(t){var n=e.clipboardXml_,o=e.clipboardSource_;e.copy(t),t.workspace.paste(e.clipboardXml_),e.clipboardXml_=n,e.clipboardSource_=o},e.onContextMenu_=function(t){e.utils.isTargetInput(t)||t.preventDefault()},e.hideChaff=function(t){e.Tooltip.hide(),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation();var n=!!t;e.getMainWorkspace().getComponentManager().getComponents(e.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(o){o.autoHide(n)})},e.getMainWorkspace=function(){return e.mainWorkspace},e.alert=function(t,n){alert(t),n&&n()},e.confirm=function(t,n){n(confirm(t))},e.prompt=function(t,n,o){o(prompt(t,n))},e.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},e.defineBlocksWithJsonArray=function(t){for(var n=0;n<t.length;n++){var o=t[n];if(o){var s=o.type;null==s||""===s?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(e.Blocks[s]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+s+'".'),e.Blocks[s]={init:e.jsonInitFactory_(o)})}else console.warn("Block definition #"+n+" in JSON array is "+o+". Skipping.")}},e.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},e.hueToHex=function(t){return e.utils.colour.hsvToHex(t,e.HSV_SATURATION,255*e.HSV_VALUE)},e.checkBlockColourConstants=function(){e.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),e.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),e.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),e.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),e.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),e.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),e.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),e.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),e.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),e.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),e.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),e.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),e.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),e.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),e.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),e.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},e.checkBlockColourConstant_=function(t,n,o){for(var s="Blockly",c=e,v=0;v<n.length;++v)s+="."+n[v],c&&(c=c[n[v]]);c&&c!==o&&(t=(void 0===o?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",s).replace("%2",t),console.warn(t))},e.setParentContainer=function(t){e.parentContainer=t},e.bindEvent_=e.browserEvents.bind,e.unbindEvent_=e.browserEvents.unbind,e.bindEventWithChecks_=e.browserEvents.conditionalBind,e.ALIGN_LEFT=e.constants.ALIGN.LEFT,e.ALIGN_CENTRE=e.constants.ALIGN.CENTRE,e.ALIGN_RIGHT=e.constants.ALIGN.RIGHT,e.INPUT_VALUE=e.connectionTypes.INPUT_VALUE,e.OUTPUT_VALUE=e.connectionTypes.OUTPUT_VALUE,e.NEXT_STATEMENT=e.connectionTypes.NEXT_STATEMENT,e.PREVIOUS_STATEMENT=e.connectionTypes.PREVIOUS_STATEMENT,e.DUMMY_INPUT=e.inputTypes.DUMMY,e.TOOLBOX_AT_TOP=e.utils.toolbox.Position.TOP,e.TOOLBOX_AT_BOTTOM=e.utils.toolbox.Position.BOTTOM,e.TOOLBOX_AT_LEFT=e.utils.toolbox.Position.LEFT,e.TOOLBOX_AT_RIGHT=e.utils.toolbox.Position.RIGHT,e.Events.BubbleOpen=function(t,n,o){e.Events.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=n,this.bubbleType=o},e.utils.object.inherits(e.Events.BubbleOpen,e.Events.UiBase),e.Events.BubbleOpen.prototype.type=e.Events.BUBBLE_OPEN,e.Events.BubbleOpen.prototype.toJson=function(){var t=e.Events.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},e.Events.BubbleOpen.prototype.fromJson=function(t){e.Events.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.BUBBLE_OPEN,e.Events.BubbleOpen),e.Icon=function(t){this.block_=t,this.iconGroup_=null},e.Icon.prototype.collapseHidden=!0,e.Icon.prototype.SIZE=17,e.Icon.prototype.bubble_=null,e.Icon.prototype.iconXY_=null,e.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),e.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},e.Icon.prototype.dispose=function(){e.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},e.Icon.prototype.updateEditable=function(){},e.Icon.prototype.isVisible=function(){return!!this.bubble_},e.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||e.utils.isRightButton(t)||this.setVisible(!this.isVisible())},e.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},e.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},e.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),n=e.utils.getRelativeXY(this.iconGroup_);t=new e.utils.Coordinate(t.x+n.x+this.SIZE/2,t.y+n.y+this.SIZE/2),e.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},e.Icon.prototype.getIconLocation=function(){return this.iconXY_},e.Icon.prototype.getCorrectedSize=function(){return new e.utils.Size(e.Icon.prototype.SIZE,e.Icon.prototype.SIZE-2)},e.Warning=function(t){e.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_=Object.create(null)},e.utils.object.inherits(e.Warning,e.Icon),e.Warning.prototype.collapseHidden=!1,e.Warning.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},e.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},e.Warning.prototype.createBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.getText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},e.Warning.prototype.setText=function(t,n){this.text_[n]!=t&&(t?this.text_[n]=t:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},e.Warning.prototype.getText=function(){var n,t=[];for(n in this.text_)t.push(this.text_[n]);return t.join("\n")},e.Warning.prototype.dispose=function(){this.block_.warning=null,e.Icon.prototype.dispose.call(this)},e.Comment=function(t){e.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},e.utils.object.inherits(e.Comment,e.Icon),e.Comment.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},e.Comment.prototype.createEditor_=function(){this.foreignObject_=e.utils.dom.createSvgElement(e.utils.Svg.FOREIGNOBJECT,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(e.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",e.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(e.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),t.appendChild(n),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=e.browserEvents.conditionalBind(n,"wheel",this,function(o){o.stopPropagation()}),this.onChangeWrapper_=e.browserEvents.conditionalBind(n,"change",this,function(o){this.cachedText_!=this.model_.text&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=e.browserEvents.conditionalBind(n,"input",this,function(o){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},e.Comment.prototype.updateEditable=function(){e.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},e.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},e.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,n=2*e.Bubble.BORDER_WIDTH,o=t.width-n;t=t.height-n,this.foreignObject_.setAttribute("width",o),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=o-4+"px",this.textarea_.style.height=t-4+"px"},e.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},e.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||e.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},e.Comment.prototype.createEditableBubble_=function(){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},e.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(e.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(e.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(e.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(e.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},e.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},e.Comment.prototype.getBubbleSize=function(){return this.model_.size},e.Comment.prototype.setBubbleSize=function(t,n){this.bubble_?this.bubble_.setBubbleSize(t,n):(this.model_.size.width=t,this.model_.size.height=n)},e.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},e.Comment.prototype.dispose=function(){this.block_.comment=null,e.Icon.prototype.dispose.call(this)},e.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),e.IComponent=function(){},e.IDragTarget=function(){},e.DragTarget=function(){},e.DragTarget.prototype.onDragEnter=function(t){},e.DragTarget.prototype.onDragOver=function(t){},e.DragTarget.prototype.onDragExit=function(t){},e.DragTarget.prototype.onDrop=function(t){},e.DragTarget.prototype.shouldPreventMove=function(t){return!1},e.IDeleteArea=function(){},e.DeleteArea=function(){e.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},e.utils.object.inherits(e.DeleteArea,e.DragTarget),e.DeleteArea.prototype.wouldDelete=function(t,n){return t instanceof e.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!n)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},e.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t},e.IFlyout=function(){},e.Flyout=function(t){e.Flyout.superClass_.constructor.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new e.WorkspaceSvg(t),this.workspace_.setMetricsManager(new e.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=e.utils.genUid(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},e.utils.object.inherits(e.Flyout,e.DeleteArea),e.Flyout.prototype.autoClose=!0,e.Flyout.prototype.isVisible_=!1,e.Flyout.prototype.containerVisible_=!0,e.Flyout.prototype.CORNER_RADIUS=8,e.Flyout.prototype.MARGIN=e.Flyout.prototype.CORNER_RADIUS,e.Flyout.prototype.GAP_X=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.GAP_Y=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.SCROLLBAR_MARGIN=2.5,e.Flyout.prototype.width_=0,e.Flyout.prototype.height_=0,e.Flyout.prototype.dragAngleRange_=70,e.Flyout.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},e.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new e.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),e.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},e.Flyout.prototype.getWidth=function(){return this.width_},e.Flyout.prototype.getHeight=function(){return this.height_},e.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},e.Flyout.prototype.getWorkspace=function(){return this.workspace_},e.Flyout.prototype.isVisible=function(){return this.isVisible_},e.Flyout.prototype.setVisible=function(t){var n=t!=this.isVisible();this.isVisible_=t,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},e.Flyout.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},e.Flyout.prototype.positionAt_=function(t,n,o,s){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(t,n),"svg"==this.svgGroup_.tagName?e.utils.dom.setCssTransform(this.svgGroup_,"translate("+o+"px,"+s+"px)"):this.svgGroup_.setAttribute("transform","translate("+o+","+s+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(o,s),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},e.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,t=0;n=this.listeners_[t];t++)e.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},e.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=e.utils.toolbox.convertFlyoutDefToJsonArray(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(e.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var s,n=this.workspace_.getTopBlocks(!1),o=0;s=n[o];o++)s.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.createFlyoutInfo_=function(t){var n=[],o=[];this.permanentlyDisabled_.length=0;for(var v,s=this.horizontalLayout?this.GAP_X:this.GAP_Y,c=0;v=t[c];c++)switch(v.custom&&(v=this.getDynamicCategoryContents_(v.custom),v=e.utils.toolbox.convertFlyoutDefToJsonArray(v),t.splice.apply(t,[c,1].concat(v)),v=t[c]),v.kind.toUpperCase()){case"BLOCK":var R=v,O=this.getBlockXml_(R);v=this.createBlock_(O),R=parseInt(R.gap||O.getAttribute("gap"),10),o.push(isNaN(R)?s:R),n.push({type:"block",block:v});break;case"SEP":this.addSeparatorGap_(v,o,s);break;case"LABEL":v=this.createButton_(v,!0),n.push({type:"button",button:v}),o.push(s);break;case"BUTTON":v=this.createButton_(v,!1),n.push({type:"button",button:v}),o.push(s)}return{contents:n,gaps:o}},e.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},e.Flyout.prototype.createButton_=function(t,n){if(!e.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new e.FlyoutButton(this.workspace_,this.targetWorkspace,t,n)},e.Flyout.prototype.createBlock_=function(t){return(t=e.Xml.domToBlock(t,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(t),t},e.Flyout.prototype.getBlockXml_=function(t){var n=null,o=t.blockxml;if(o&&"string"!=typeof o?n=o:o&&"string"==typeof o?(n=e.Xml.textToDom(o),t.blockxml=n):t.type&&((n=e.utils.xml.createElement("xml")).setAttribute("type",t.type),n.setAttribute("disabled",t.disabled),t.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},e.Flyout.prototype.addSeparatorGap_=function(t,n,o){t=parseInt(t.gap,10),!isNaN(t)&&0<n.length?n[n.length-1]=t:n.push(o)},e.Flyout.prototype.clearOldBlocks_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),n=0;o=t[n];n++)o.workspace==this.workspace_&&o.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&(e.Tooltip.unbindMouseEvents(t),e.utils.dom.removeNode(t));for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},e.Flyout.prototype.addBlockListeners_=function(t,n,o){this.listeners_.push(e.browserEvents.conditionalBind(t,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.conditionalBind(o,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.bind(t,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(t,"mouseleave",n,n.removeSelect)),this.listeners_.push(e.browserEvents.bind(o,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(o,"mouseleave",n,n.removeSelect))},e.Flyout.prototype.blockMouseDown_=function(t){var n=this;return function(o){var s=n.targetWorkspace.getGesture(o);s&&(s.setStartBlock(t),s.handleFlyoutStart(o,n))}},e.Flyout.prototype.onMouseDown_=function(t){var n=this.targetWorkspace.getGesture(t);n&&n.handleFlyoutStart(t,this)},e.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},e.Flyout.prototype.createBlock=function(t){var n=null;e.Events.disable();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(t)}finally{e.Events.enable()}if(e.hideChaff(),t=e.Variables.getAddedVariables(this.targetWorkspace,o),e.Events.isEnabled()){for(e.Events.setGroup(!0),o=0;o<t.length;o++){var s=t[o];e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(s))}e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},e.Flyout.prototype.initFlyoutButton_=function(t,n,o){var s=t.createDom();t.moveTo(n,o),t.show(),this.listeners_.push(e.browserEvents.conditionalBind(s,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},e.Flyout.prototype.createRect_=function(t,n,o,s,c){return(n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{"fill-opacity":0,x:n,y:o,height:s.height,width:s.width},null)).tooltip=t,e.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,t.getSvgRoot()),t.flyoutRect_=n,this.mats_[c]=n},e.Flyout.prototype.moveRectToBlock_=function(t,n){var o=n.getHeightWidth();t.setAttribute("width",o.width),t.setAttribute("height",o.height),n=n.getRelativeToSurfaceXY(),t.setAttribute("y",n.y),t.setAttribute("x",this.RTL?n.x-o.width:n.x)},e.Flyout.prototype.filterForCapacity_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),n=0;o=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(o))for(var s=this.targetWorkspace.isCapacityAvailable(e.utils.getBlockTypeCounts(o));o;)o.setEnabled(s),o=o.getNextBlock()},e.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},e.Flyout.prototype.placeNewBlock_=function(t){var n=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var o=e.Xml.blockToDom(t,!0);if(n.setResizesEnabled(!1),!(o=e.Xml.domToBlock(o,n)).getSvgRoot())throw Error("block is not rendered.");var s=n.getOriginOffsetInPixels(),c=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=e.utils.Coordinate.sum(c,t),(s=e.utils.Coordinate.difference(t,s)).scale(1/n.scale),o.moveBy(s.x,s.y),o},e.HorizontalFlyout=function(t){e.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0},e.utils.object.inherits(e.HorizontalFlyout,e.Flyout),e.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(o.left+(o.width-s.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.HorizontalFlyout.prototype.getX=function(){return 0},e.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),o=t.getViewMetrics();t=t.getToolboxMetrics();var s=this.toolboxPosition_==e.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?s?t.height:o.height-this.height_:s?0:o.height:s?0:o.height+n.top-this.height_},e.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.HorizontalFlyout.prototype.setBackgroundPath_=function(t,n){var o=this.toolboxPosition_==e.utils.toolbox.Position.TOP,s=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(s.push("h",t+2*this.CORNER_RADIUS),s.push("v",n),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",-t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),s.push("h",t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",n),s.push("h",-t-2*this.CORNER_RADIUS)),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},e.HorizontalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n=n.x||n.y){var o=this.workspace_.getMetricsManager(),s=o.getScrollMetrics();n=o.getViewMetrics().left-s.left+n,this.workspace_.scrollbar.setX(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.HorizontalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;var o=this.MARGIN,s=o+this.tabWidth_;this.RTL&&(t=t.reverse());for(var v,c=0;v=t[c];c++)if("block"==v.type){for(var H,R=(v=v.block).getDescendants(!1),O=0;H=R[O];O++)H.isInFlyout=!0;v.render(),R=v.getSvgRoot(),O=v.getHeightWidth(),H=v.outputConnection?this.tabWidth_:0,v.moveBy(H=this.RTL?s+O.width:s-H,o),H=this.createRect_(v,H,o,O,c),s+=O.width+n[c],this.addBlockListeners_(R,v,H)}else"button"==v.type&&(this.initFlyoutButton_(v.button,s,o),s+=v.button.width+n[c])},e.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<90+n&&t>90-n||t>-90-n&&t<-90+n},e.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top;return this.toolboxPosition_==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e9,n+t.height,-1e9,1e9):new e.utils.Rect(n,1e9,-1e9,1e9)},e.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),o=0;s=n[o];o++)t=Math.max(t,s.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,this.height_!=(t+=e.Scrollbar.scrollbarThickness)){for(o=0;s=n[o];o++)s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.registry.DEFAULT,e.HorizontalFlyout),e.VerticalFlyout=function(t){e.VerticalFlyout.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.VerticalFlyout,e.Flyout),e.VerticalFlyout.registryName="verticalFlyout",e.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(o.top+(o.height-s.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),o=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==e.utils.toolbox.Position.LEFT?t.width:o.width-this.width_:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:o.width:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:o.width+n.left-this.width_},e.VerticalFlyout.prototype.getY=function(){return 0},e.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.VerticalFlyout.prototype.setBackgroundPath_=function(t,n){var o=this.toolboxPosition_==e.utils.toolbox.Position.RIGHT,s=t+this.CORNER_RADIUS;(s=["M "+(o?s:0)+",0"]).push("h",o?-t:t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",Math.max(0,n)),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",o?t:-t),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},e.VerticalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n.y){var o=this.workspace_.getMetricsManager(),s=o.getScrollMetrics();n=o.getViewMetrics().top-s.top+n.y,this.workspace_.scrollbar.setY(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.VerticalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;for(var v,o=this.MARGIN,s=this.RTL?o:o+this.tabWidth_,c=0;v=t[c];c++)if("block"==v.type){for(var H,R=(v=v.block).getDescendants(!1),O=0;H=R[O];O++)H.isInFlyout=!0;v.render(),R=v.getSvgRoot(),O=v.getHeightWidth(),v.moveBy(H=v.outputConnection?s-this.tabWidth_:s,o),H=this.createRect_(v,this.RTL?H-O.width:H,o,O,c),this.addBlockListeners_(R,v,H),o+=O.height+n[c]}else"button"==v.type&&(this.initFlyoutButton_(v.button,s,o),o+=v.button.height+n[c])},e.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<n&&t>-n||t<-180+n||t>180-n},e.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.left;return this.toolboxPosition_==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e9,1e9,-1e9,n+t.width):new e.utils.Rect(-1e9,1e9,n,1e9)},e.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),o=0;s=n[o];o++){var c=s.getHeightWidth().width;s.outputConnection&&(c-=this.tabWidth_),t=Math.max(t,c)}for(o=0;s=this.buttons_[o];o++)t=Math.max(t,s.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,this.width_!=(t+=e.Scrollbar.scrollbarThickness)){for(o=0;s=n[o];o++){if(this.RTL){c=s.getRelativeToSurfaceXY().x;var v=t/this.workspace_.scale-this.MARGIN;s.outputConnection||(v-=this.tabWidth_),s.moveBy(v-c,0)}s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s)}if(this.RTL)for(o=0;s=this.buttons_[o];o++)n=s.getPosition().y,s.moveTo(t/this.workspace_.scale-s.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.registry.DEFAULT,e.VerticalFlyout),e.FlyoutButton=function(t,n,o,s){this.workspace_=t,this.targetWorkspace_=n,this.text_=o.text,this.position_=new e.utils.Coordinate(0,0),this.isLabel_=s,this.callbackKey_=o.callbackKey||o.callbackkey,this.cssClass_=o["web-class"]||null,this.onMouseUpWrapper_=null,this.info=o},e.FlyoutButton.MARGIN_X=5,e.FlyoutButton.MARGIN_Y=2,e.FlyoutButton.prototype.width=0,e.FlyoutButton.prototype.height=0,e.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},this.workspace_.getCanvas()),!this.isLabel_)var n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var o=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),s=e.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(s+="\u200f"),o.textContent=s,this.isLabel_&&(this.svgText_=o,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var c=e.utils.style.getComputedStyle(o,"fontSize"),v=e.utils.style.getComputedStyle(o,"fontWeight"),R=e.utils.style.getComputedStyle(o,"fontFamily");return this.width=e.utils.dom.getFastTextWidthWithSizeString(o,c,v,R),s=e.utils.dom.measureFontMetrics(s,c,v,R),this.height=s.height,this.isLabel_||(this.width+=2*e.FlyoutButton.MARGIN_X,this.height+=2*e.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),o.setAttribute("x",this.width/2),o.setAttribute("y",this.height/2-s.height/2+s.baseline),this.updateTransform_(),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},e.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},e.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},e.FlyoutButton.prototype.moveTo=function(t,n){this.position_.x=t,this.position_.y=n,this.updateTransform_()},e.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},e.FlyoutButton.prototype.getPosition=function(){return this.position_},e.FlyoutButton.prototype.getButtonText=function(){return this.text_},e.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},e.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&e.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},e.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},e.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),e.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},e.Generator.prototype.INFINITE_LOOP_TRAP=null,e.Generator.prototype.STATEMENT_PREFIX=null,e.Generator.prototype.STATEMENT_SUFFIX=null,e.Generator.prototype.INDENT="  ",e.Generator.prototype.COMMENT_WRAP=60,e.Generator.prototype.ORDER_OVERRIDES=[],e.Generator.prototype.isInitialized=null,e.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=e.getMainWorkspace());var n=[];this.init(t),t=t.getTopBlocks(!0);for(var s,o=0;s=t[o];o++){var c=this.blockToCode(s);Array.isArray(c)&&(c=c[0]),c&&(s.outputConnection&&(c=this.scrubNakedValue(c),this.STATEMENT_PREFIX&&!s.suppressPrefixSuffix&&(c=this.injectId(this.STATEMENT_PREFIX,s)+c),this.STATEMENT_SUFFIX&&!s.suppressPrefixSuffix&&(c+=this.injectId(this.STATEMENT_SUFFIX,s))),n.push(c))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},e.Generator.prototype.prefixLines=function(t,n){return n+t.replace(/(?!\n$)\n/g,"\n"+n)},e.Generator.prototype.allNestedComments=function(t){var n=[];t=t.getDescendants(!0);for(var o=0;o<t.length;o++){var s=t[o].getCommentText();s&&n.push(s)}return n.length&&n.push(""),n.join("\n")},e.Generator.prototype.blockToCode=function(t,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return n?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return n?"":this.blockToCode(t.getChildren(!1)[0]);var o=this[t.type];if("function"!=typeof o)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(o=o.call(t,t),Array.isArray(o)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,o[0],n),o[1]]}if("string"==typeof o)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(o=this.injectId(this.STATEMENT_PREFIX,t)+o),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(o+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,o,n);if(null===o)return"";throw SyntaxError("Invalid code generated: "+o)},e.Generator.prototype.valueToCode=function(t,n,o){if(isNaN(o))throw TypeError("Expecting valid order from block: "+t.type);var s=t.getInputTargetBlock(n);if(!s||""===(n=this.blockToCode(s)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+s.type);if(t=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+s.type);if(!t)return"";s=!1;var c=Math.floor(o),v=Math.floor(n);if(c<=v&&(c!=v||0!=c&&99!=c))for(s=!0,c=0;c<this.ORDER_OVERRIDES.length;c++)if(this.ORDER_OVERRIDES[c][0]==o&&this.ORDER_OVERRIDES[c][1]==n){s=!1;break}return s&&(t="("+t+")"),t},e.Generator.prototype.statementToCode=function(t,n){if(t=t.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},e.Generator.prototype.addLoopTrap=function(t,n){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+t),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+t),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),t},e.Generator.prototype.injectId=function(t,n){return n=n.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+n+"'")},e.Generator.prototype.RESERVED_WORDS_="",e.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},e.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(e.Generator.prototype,"variableDB_",{get:function(){return e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}),e.Generator.prototype.provideFunction_=function(t,n){if(!this.definitions_[t]){var s,o=this.nameDB_.getDistinctName(t,e.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[t]=o,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);s!=n;)s=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[t]=n}return this.functionNames_[t]},e.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},e.Generator.prototype.scrub_=function(t,n,o){return n},e.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},e.Generator.prototype.scrubNakedValue=function(t){return t},e.IToolboxItem=function(){},e.ISelectableToolboxItem=function(){},e.ICollapsibleToolboxItem=function(){},e.ToolboxItem=function(t,n,o){this.id_=t.toolboxitemid||e.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},e.ToolboxItem.prototype.init=function(){},e.ToolboxItem.prototype.getDiv=function(){return null},e.ToolboxItem.prototype.getId=function(){return this.id_},e.ToolboxItem.prototype.getParent=function(){return null},e.ToolboxItem.prototype.getLevel=function(){return this.level_},e.ToolboxItem.prototype.isSelectable=function(){return!1},e.ToolboxItem.prototype.isCollapsible=function(){return!1},e.ToolboxItem.prototype.dispose=function(){},e.ToolboxCategory=function(t,n,o){e.ToolboxCategory.superClass_.constructor.call(this,t,n,o),this.name_=e.utils.replaceMessageReferences(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)},e.utils.object.inherits(e.ToolboxCategory,e.ToolboxItem),e.ToolboxCategory.registrationName="category",e.ToolboxCategory.nestedPadding=19,e.ToolboxCategory.borderWidth=8,e.ToolboxCategory.defaultBackgroundColour="#57e",e.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},e.ToolboxCategory.prototype.parseContents_=function(t){var n=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var o;o=n[t];t++)this.flyoutItems_.push(o)}},e.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},e.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),e.utils.aria.setRole(this.htmlDiv_,e.utils.aria.Role.TREEITEM),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,!1),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),e.utils.aria.setRole(this.iconDom_,e.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},e.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),t},e.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");e.utils.dom.addClass(t,this.cssConfig_.row);var n=e.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?t.style.paddingRight=n:t.style.paddingLeft=n,t},e.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.rowcontentcontainer),t},e.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.display="inline-block",t},e.ToolboxCategory.prototype.createLabelDom_=function(t){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=t,e.utils.dom.addClass(n,this.cssConfig_.label),n},e.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},e.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=e.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},e.ToolboxCategory.prototype.getColour_=function(t){var n=t.categorystyle||t.categoryStyle;return(t=t.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(t)},e.ToolboxCategory.prototype.getColourfromStyle_=function(t){var n=this.workspace_.getTheme();if(t&&n){if((n=n.categoryStyles[t])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},e.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},e.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=e.utils.replaceMessageReferences(t))||""===t)return"";var n=Number(t);return isNaN(n)?(n=e.utils.colour.parse(t))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):e.hueToHex(n)},e.ToolboxCategory.prototype.openIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.closedicon),e.utils.dom.addClass(t,this.cssConfig_.openicon))},e.ToolboxCategory.prototype.closeIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.openicon),e.utils.dom.addClass(t,this.cssConfig_.closedicon))},e.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},e.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},e.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},e.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},e.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},e.ToolboxCategory.prototype.onClick=function(t){},e.ToolboxCategory.prototype.setSelected=function(t){if(t){var n=this.parseColour_(e.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,e.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",e.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,t)},e.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},e.ToolboxCategory.prototype.getName=function(){return this.name_},e.ToolboxCategory.prototype.getParent=function(){return this.parent_},e.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},e.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=e.utils.toolbox.convertFlyoutDefToJsonArray(t)),this.parseContents_(this.toolboxItemDef_)},e.ToolboxCategory.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxCategory.registrationName,e.ToolboxCategory),e.ToolboxSeparator=function(t,n){e.ToolboxSeparator.superClass_.constructor.call(this,t,n),this.cssConfig_={container:"blocklyTreeSeparator"},e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig)},e.utils.object.inherits(e.ToolboxSeparator,e.ToolboxItem),e.ToolboxSeparator.registrationName="sep",e.ToolboxSeparator.prototype.init=function(){this.createDom_()},e.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),this.htmlDiv_=t},e.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxSeparator.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxSeparator.registrationName,e.ToolboxSeparator),e.CollapsibleToolboxCategory=function(t,n,o){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],e.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.CollapsibleToolboxCategory,e.ToolboxCategory),e.CollapsibleToolboxCategory.registrationName="collapsibleCategory",e.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=e.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},e.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var n=t.contents,o=!0;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var s;s=n[t];t++)!e.registry.hasItem(e.registry.Type.TOOLBOX_ITEM,s.kind)||s.kind.toLowerCase()==e.ToolboxSeparator.registrationName&&o?(this.flyoutItems_.push(s),o=!0):(this.createToolboxItem_(s),o=!1)}},e.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var n=t.kind;"CATEGORY"==n.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(n=e.CollapsibleToolboxCategory.registrationName),t=new(e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,n))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},e.CollapsibleToolboxCategory.prototype.init=function(){e.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},e.CollapsibleToolboxCategory.prototype.createDom_=function(){e.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),e.utils.aria.setRole(this.subcategoriesDiv_,e.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},e.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var n=document.createElement("div");e.utils.dom.addClass(n,this.cssConfig_.contents);for(var o=0;o<t.length;o++){var s=t[o];s.init();var c=s.getDiv();n.appendChild(c),s.getClickTarget&&s.getClickTarget().setAttribute("id",s.getId())}return n},e.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!=t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},e.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var o,n=0;o=this.getChildToolboxItems()[n];n++)o.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},e.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},e.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},e.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},e.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.CollapsibleToolboxCategory.registrationName,e.CollapsibleToolboxCategory),e.Events.ToolboxItemSelect=function(t,n,o){e.Events.ToolboxItemSelect.superClass_.constructor.call(this,o),this.oldItem=t,this.newItem=n},e.utils.object.inherits(e.Events.ToolboxItemSelect,e.Events.UiBase),e.Events.ToolboxItemSelect.prototype.type=e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect.prototype.toJson=function(){var t=e.Events.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},e.Events.ToolboxItemSelect.prototype.fromJson=function(t){e.Events.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},e.registry.register(e.registry.Type.EVENT,e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect),e.IAutoHideable=function(){},e.IStyleable=function(){},e.IToolbox=function(){},e.Toolbox=function(t){e.Toolbox.superClass_.constructor.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},e.utils.object.inherits(e.Toolbox,e.DeleteArea),e.Toolbox.prototype.onShortcut=function(t){return!1},e.Toolbox.prototype.init=function(){var t=this.workspace_,n=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),e.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,e.utils.aria.setRole(this.contentsDiv_,e.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),t.parentNode.insertBefore(n,t),this.attachEvents_(n,this.contentsDiv_),n},e.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),e.utils.dom.addClass(t,"blocklyToolboxDiv"),e.utils.dom.addClass(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},e.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},e.Toolbox.prototype.attachEvents_=function(t,n){t=e.browserEvents.conditionalBind(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),n=e.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},e.Toolbox.prototype.onClick_=function(t){if(e.utils.isRightButton(t)||t.target==this.HtmlDiv)e.hideChaff(!1);else{var n=t.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(t)),e.hideChaff(!0)}e.Touch.clearTouchIdentifier()},e.Toolbox.prototype.onKeyDown_=function(t){var n=!1;switch(t.keyCode){case e.utils.KeyCodes.DOWN:n=this.selectNext_();break;case e.utils.KeyCodes.UP:n=this.selectPrevious_();break;case e.utils.KeyCodes.LEFT:n=this.selectParent_();break;case e.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(t)),n&&t.preventDefault()},e.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,n=new e.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=t.options.toolboxPosition,new(e.registry.getClassFromOptions(t.horizontalLayout?e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(n)},e.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var n=0;n<this.contents_.length;n++){var o=this.contents_[n];o&&o.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},e.Toolbox.prototype.renderContents_=function(t){for(var s,n=document.createDocumentFragment(),o=0;s=t[o];o++)this.createToolboxItem_(s,n);this.contentsDiv_.appendChild(n)},e.Toolbox.prototype.createToolboxItem_=function(t,n){var o=t.kind;"CATEGORY"==o.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(o=e.CollapsibleToolboxCategory.registrationName),(o=e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,o.toLowerCase()))&&(t=new o(t,this),this.addToolboxItem_(t),t.init(),(o=t.getDiv())&&n.appendChild(o),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},e.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var o,n=0;o=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(o)},e.Toolbox.prototype.getToolboxItems=function(){return this.contents_},e.Toolbox.prototype.addStyle=function(t){e.utils.dom.addClass(this.HtmlDiv,t)},e.Toolbox.prototype.removeStyle=function(t){e.utils.dom.removeClass(this.HtmlDiv,t)},e.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),n=t.top,o=n+t.height,s=t.left;return t=s+t.width,this.toolboxPosition==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e7,o,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.BOTTOM?new e.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e7,1e7,-1e7,t):new e.utils.Rect(-1e7,1e7,s,1e7)},e.Toolbox.prototype.wouldDelete=function(t,n){return this.updateWouldDelete_(t instanceof e.BlockSvg?!t.getParent()&&t.isDeletable():t.isDeletable()),this.wouldDelete_},e.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},e.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},e.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(n):this.removeStyle(n)},e.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},e.Toolbox.prototype.getWidth=function(){return this.width_},e.Toolbox.prototype.getHeight=function(){return this.height_},e.Toolbox.prototype.getFlyout=function(){return this.flyout_},e.Toolbox.prototype.getWorkspace=function(){return this.workspace_},e.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},e.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},e.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},e.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition==e.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==e.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},e.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition==e.utils.toolbox.Position.LEFT?t.scrollX+n.width:t.scrollX,this.toolboxPosition==e.utils.toolbox.Position.TOP?t.scrollY+n.height:t.scrollY),e.svgResize(t)},e.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},e.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var n=this.contents_[t];n.refreshTheme&&n.refreshTheme()}},e.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},e.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},e.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},e.Toolbox.prototype.setSelectedItem=function(t){var n=this.selectedItem_;!t&&!n||t&&!t.isSelectable()||(this.shouldDeselectItem_(n,t)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,t)&&null!=t&&this.selectItem_(n,t),this.updateFlyout_(n,t),this.fireSelectEvent_(n,t))},e.Toolbox.prototype.shouldDeselectItem_=function(t,n){return null!=t&&(!t.isCollapsible()||t!=n)},e.Toolbox.prototype.shouldSelectItem_=function(t,n){return null!=n&&n!=t},e.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,"")},e.Toolbox.prototype.selectItem_=function(t,n){this.selectedItem_=n,this.previouslySelectedItem_=t,n.setSelected(!0),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,n.getId())},e.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},e.Toolbox.prototype.updateFlyout_=function(t,n){(t!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},e.Toolbox.prototype.fireSelectEvent_=function(t,n){var o=t&&t.getName(),s=n&&n.getName();t==n&&(s=null),t=new(e.Events.get(e.Events.TOOLBOX_ITEM_SELECT))(o,s,this.workspace_.id),e.Events.fire(t)},e.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},e.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},e.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[++t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[--t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)e.browserEvents.unbind(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),e.utils.dom.removeNode(this.HtmlDiv)},e.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),e.registry.register(e.registry.Type.TOOLBOX,e.registry.DEFAULT,e.Toolbox),e.Events.TrashcanOpen=function(t,n){e.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=t},e.utils.object.inherits(e.Events.TrashcanOpen,e.Events.UiBase),e.Events.TrashcanOpen.prototype.type=e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen.prototype.toJson=function(){var t=e.Events.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},e.Events.TrashcanOpen.prototype.fromJson=function(t){e.Events.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},e.registry.register(e.registry.Type.EVENT,e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen),e.IPositionable=function(){},e.uiPosition={},e.uiPosition.verticalPosition={TOP:0,BOTTOM:1},e.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},e.uiPosition.bumpDirection={UP:0,DOWN:1},e.uiPosition.getStartPositionRect=function(t,n,o,s,c,v){var R=v.scrollbar&&v.scrollbar.canScrollVertically();return t.horizontal===e.uiPosition.horizontalPosition.LEFT?(o=c.absoluteMetrics.left+o,R&&v.RTL&&(o+=e.Scrollbar.scrollbarThickness)):(o=c.absoluteMetrics.left+c.viewMetrics.width-n.width-o,R&&!v.RTL&&(o-=e.Scrollbar.scrollbarThickness)),t.vertical===e.uiPosition.verticalPosition.TOP?t=c.absoluteMetrics.top+s:(t=c.absoluteMetrics.top+c.viewMetrics.height-n.height-s,v.scrollbar&&v.scrollbar.canScrollHorizontally()&&(t-=e.Scrollbar.scrollbarThickness)),new e.utils.Rect(t,t+n.height,o,o+n.width)},e.uiPosition.getCornerOppositeToolbox=function(t,n){return{horizontal:n.toolboxMetrics.position===e.utils.toolbox.Position.LEFT||t.horizontalLayout&&!t.RTL?e.uiPosition.horizontalPosition.RIGHT:e.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===e.utils.toolbox.Position.BOTTOM?e.uiPosition.verticalPosition.TOP:e.uiPosition.verticalPosition.BOTTOM}},e.uiPosition.bumpPositionRect=function(t,n,o,s){for(var H,c=t.left,v=t.right-t.left,R=t.bottom-t.top,O=0;H=s[O];O++)t.intersects(H)&&(t=new e.utils.Rect(t=o===e.uiPosition.bumpDirection.UP?H.top-R-n:H.bottom+n,t+R,c,c+v),O=-1);return t},e.Trashcan=function(t){e.Trashcan.superClass_.constructor.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(t=new e.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.TOP?e.utils.toolbox.Position.BOTTOM:e.utils.toolbox.Position.TOP,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT?e.utils.toolbox.Position.LEFT:e.utils.toolbox.Position.RIGHT,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},e.utils.object.inherits(e.Trashcan,e.DeleteArea),e.Trashcan.prototype.WIDTH_=47,e.Trashcan.prototype.BODY_HEIGHT_=44,e.Trashcan.prototype.LID_HEIGHT_=16,e.Trashcan.prototype.MARGIN_VERTICAL_=20,e.Trashcan.prototype.MARGIN_HORIZONTAL_=20,e.Trashcan.prototype.MARGIN_HOTSPOT_=10,e.Trashcan.prototype.SPRITE_LEFT_=0,e.Trashcan.prototype.SPRITE_TOP_=32,e.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,e.Trashcan.ANIMATION_LENGTH_=80,e.Trashcan.ANIMATION_FRAMES_=4,e.Trashcan.OPACITY_MIN_=.4,e.Trashcan.OPACITY_MAX_=.8,e.Trashcan.MAX_LID_ANGLE_=45,e.Trashcan.prototype.isLidOpen=!1,e.Trashcan.prototype.minOpenness_=0,e.Trashcan.prototype.svgGroup_=null,e.Trashcan.prototype.svgLid_=null,e.Trashcan.prototype.lidTask_=0,e.Trashcan.prototype.lidOpen_=0,e.Trashcan.prototype.left_=0,e.Trashcan.prototype.top_=0,e.Trashcan.prototype.initialized_=!1,e.Trashcan.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var o=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return o.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),e.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),e.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),e.browserEvents.bind(o,"mouseover",this,this.mouseOver_),e.browserEvents.bind(o,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},e.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(e.utils.dom.insertAfter(this.flyout.createDom(e.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET,e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},e.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},e.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},e.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},e.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(e.Xml.textToDom);this.flyout.show(t),this.fireUiEvent_(!0)}},e.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},e.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},e.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},e.Trashcan.prototype.position=function(t,n){if(this.initialized_){var o=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t);t=e.uiPosition.getStartPositionRect(o,new e.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,o.vertical===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.Trashcan.prototype.getBoundingRectangle=function(){return new e.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},e.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new e.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},e.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},e.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},e.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},e.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},e.Trashcan.prototype.animateLid_=function(){var t=e.Trashcan.ANIMATION_FRAMES_,n=1/(t+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*e.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=e.Trashcan.OPACITY_MIN_)+this.lidOpen_*(e.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),e.Trashcan.ANIMATION_LENGTH_/t))},e.Trashcan.prototype.setLidAngle_=function(t){var n=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-t:t)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},e.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*e.Trashcan.MAX_LID_ANGLE_)},e.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},e.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},e.Trashcan.prototype.fireUiEvent_=function(t){t=new(e.Events.get(e.Events.TRASHCAN_OPEN))(t,this.workspace_.id),e.Events.fire(t)},e.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},e.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},e.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},e.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==e.Events.BLOCK_DELETE&&t.oldXml.tagName&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},e.Trashcan.prototype.cleanBlockXML_=function(t){for(var n=t=t.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var o=n.firstChild||n.nextSibling;if(!o)for(o=n.parentNode;o;){if(o.nextSibling){o=o.nextSibling;break}o=o.parentNode}n=o}return e.Xml.domToText(t)},e.VariablesDynamic={},e.VariablesDynamic.onCreateVariableButtonClick_String=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"String")},e.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Number")},e.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Colour")},e.VariablesDynamic.flyoutCategory=function(t){var n=[],o=document.createElement("button");return o.setAttribute("text",e.Msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(o),(o=document.createElement("button")).setAttribute("text",e.Msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(o),(o=document.createElement("button")).setAttribute("text",e.Msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(o),t.registerButtonCallback("CREATE_VARIABLE_STRING",e.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",e.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",e.VariablesDynamic.onCreateVariableButtonClick_Colour),t=e.VariablesDynamic.flyoutCategoryBlocks(t),n.concat(t)},e.VariablesDynamic.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getAllVariables()).length){if(e.Blocks.variables_set_dynamic){var o=t[t.length-1],s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set_dynamic"),s.setAttribute("gap",24),s.appendChild(e.Variables.generateVariableFieldDom(o)),n.push(s)}if(e.Blocks.variables_get_dynamic){t.sort(e.VariableModel.compareByName),o=0;for(var c;c=t[o];o++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(c)),n.push(s)}}return n},e.ZoomControls=function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},e.ZoomControls.prototype.WIDTH_=32,e.ZoomControls.prototype.HEIGHT_=32,e.ZoomControls.prototype.SMALL_SPACING_=2,e.ZoomControls.prototype.LARGE_SPACING_=11,e.ZoomControls.prototype.MARGIN_VERTICAL_=20,e.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,e.ZoomControls.prototype.svgGroup_=null,e.ZoomControls.prototype.left_=0,e.ZoomControls.prototype.top_=0,e.ZoomControls.prototype.initialized_=!1,e.ZoomControls.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},e.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},e.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&e.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&e.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&e.browserEvents.unbind(this.onZoomOutWrapper_)},e.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new e.utils.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},e.ZoomControls.prototype.position=function(t,n){if(this.initialized_){var o=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t),s=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(s+=this.LARGE_SPACING_+this.HEIGHT_),t=e.uiPosition.getStartPositionRect(o,new e.utils.Size(this.WIDTH_,s),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,(o=o.vertical)===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),o===e.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(o+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(o+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomOutWrapper_=e.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},e.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomInWrapper_=e.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},e.ZoomControls.prototype.zoom_=function(t,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},e.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomResetWrapper_=e.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},e.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},e.ZoomControls.prototype.fireZoomEvent_=function(){var t=new(e.Events.get(e.Events.CLICK))(null,this.workspace_.id,"zoom_controls");e.Events.fire(t)},e.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),e.ShortcutItems={},e.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},e.ShortcutItems.registerEscape=function(){var t={name:e.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return e.hideChaff(),!0}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.ESC,t.name)},e.ShortcutItems.registerDelete=function(){var t={name:e.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&e.selected&&e.selected.isDeletable()},callback:function(n,o){return o.preventDefault(),!e.Gesture.inProgress()&&(e.deleteBlock(e.selected),!0)}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.DELETE,t.name),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.BACKSPACE,t.name)},e.ShortcutItems.registerCopy=function(){var t={name:e.ShortcutItems.names.COPY,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()},callback:function(o,s){return s.preventDefault(),e.hideChaff(),e.copy(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerCut=function(){var t={name:e.ShortcutItems.names.CUT,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()&&!e.selected.workspace.isFlyout},callback:function(){return e.copy(e.selected),e.deleteBlock(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerPaste=function(){var t={name:e.ShortcutItems.names.PASTE,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()},callback:function(){return e.paste()}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerUndo=function(){var t={name:e.ShortcutItems.names.UNDO,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()},callback:function(o){return e.hideChaff(),o.undo(!1),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerRedo=function(){var t={name:e.ShortcutItems.names.REDO,preconditionFn:function(o){return!e.Gesture.inProgress()&&!o.options.readOnly},callback:function(o){return e.hideChaff(),o.undo(!0),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Y,[e.utils.KeyCodes.CTRL]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerDefaultShortcuts=function(){e.ShortcutItems.registerEscape(),e.ShortcutItems.registerDelete(),e.ShortcutItems.registerCopy(),e.ShortcutItems.registerCut(),e.ShortcutItems.registerPaste(),e.ShortcutItems.registerUndo(),e.ShortcutItems.registerRedo()},e.ShortcutItems.registerDefaultShortcuts(),e.ContextMenuItems={},e.ContextMenuItems.registerUndo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},e.ContextMenuItems.registerRedo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},e.ContextMenuItems.registerCleanup=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},e.ContextMenuItems.toggleOption_=function(t,n){for(var o=0,s=0;s<n.length;s++)for(var c=n[s];c;)setTimeout(c.setCollapsed.bind(c,t),o),c=c.getNextBlock(),o+=10},e.ContextMenuItems.registerCollapse=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var o=t[n];o;){if(!o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!0,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},e.ContextMenuItems.registerExpand=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var o=t[n];o;){if(o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!1,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},e.ContextMenuItems.addDeletableBlocks_=function(t,n){if(t.isDeletable())Array.prototype.push.apply(n,t.getDescendants(!1));else{t=t.getChildren(!1);for(var o=0;o<t.length;o++)e.ContextMenuItems.addDeletableBlocks_(t[o],n)}},e.ContextMenuItems.getDeletableBlocks_=function(t){var n=[];t=t.getTopBlocks(!0);for(var o=0;o<t.length;o++)e.ContextMenuItems.addDeletableBlocks_(t[o],n);return n},e.ContextMenuItems.deleteNext_=function(t,n){e.Events.setGroup(n);var o=t.shift();o&&(o.workspace?(o.dispose(!1,!0),setTimeout(e.ContextMenuItems.deleteNext_,10,t,n)):e.ContextMenuItems.deleteNext_(t,n)),e.Events.setGroup(!1)},e.ContextMenuItems.registerDeleteAll=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1==(t=e.ContextMenuItems.getDeletableBlocks_(t.workspace).length)?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<e.ContextMenuItems.getDeletableBlocks_(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var n=e.ContextMenuItems.getDeletableBlocks_(t.workspace),o=e.utils.genUid();2>n.length?e.ContextMenuItems.deleteNext_(n,o):e.confirm(e.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(s){s&&e.ContextMenuItems.deleteNext_(n,o)})}},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},e.ContextMenuItems.registerWorkspaceOptions_=function(){e.ContextMenuItems.registerUndo(),e.ContextMenuItems.registerRedo(),e.ContextMenuItems.registerCleanup(),e.ContextMenuItems.registerCollapse(),e.ContextMenuItems.registerExpand(),e.ContextMenuItems.registerDeleteAll()},e.ContextMenuItems.registerDuplicate=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&e.duplicate(t.block)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},e.ContextMenuItems.registerComment=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?e.Msg.REMOVE_COMMENT:e.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,e.utils.userAgent.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},e.ContextMenuItems.registerInline=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?e.Msg.EXTERNAL_INPUTS:e.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var n=1;n<t.inputList.length;n++)if(t.inputList[n-1].type!=e.inputTypes.STATEMENT&&t.inputList[n].type!=e.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},e.ContextMenuItems.registerCollapseExpandBlock=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?e.Msg.EXPAND_BLOCK:e.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},e.ContextMenuItems.registerDisable=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?e.Msg.DISABLE_BLOCK:e.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var n=e.Events.getGroup();n||e.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),n||e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},e.ContextMenuItems.registerDelete=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){var n=t.block;return t=n.getDescendants(!1).length,(n=n.getNextBlock())&&(t-=n.getDescendants(!1).length),1==t?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){e.Events.setGroup(!0),t.block&&e.deleteBlock(t.block),e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},e.ContextMenuItems.registerHelp=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},e.ContextMenuItems.registerBlockOptions_=function(){e.ContextMenuItems.registerDuplicate(),e.ContextMenuItems.registerComment(),e.ContextMenuItems.registerInline(),e.ContextMenuItems.registerCollapseExpandBlock(),e.ContextMenuItems.registerDisable(),e.ContextMenuItems.registerDelete(),e.ContextMenuItems.registerHelp()},e.ContextMenuItems.registerDefaultOptions=function(){e.ContextMenuItems.registerWorkspaceOptions_(),e.ContextMenuItems.registerBlockOptions_()},e.ContextMenuItems.registerDefaultOptions(),e.Mutator=function(t){e.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},e.utils.object.inherits(e.Mutator,e.Icon),e.Mutator.prototype.workspace_=null,e.Mutator.prototype.workspaceWidth_=0,e.Mutator.prototype.workspaceHeight_=0,e.Mutator.prototype.setBlock=function(t){this.block_=t},e.Mutator.prototype.getWorkspace=function(){return this.workspace_},e.Mutator.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},e.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&e.Icon.prototype.iconClick_.call(this,t)},e.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var o,t=e.utils.xml.createElement("xml"),n=0;o=this.quarkNames_[n];n++){var s=e.utils.xml.createElement("block");s.setAttribute("type",o),t.appendChild(s)}else t=null;return(n=new e.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT,(o=!!t)&&(n.languageTree=e.utils.toolbox.convertToolboxDefToJson(t)),this.workspace_=new e.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(e.Events.disableOrphans),t=o?this.workspace_.addFlyout(e.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),t&&n.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},e.Mutator.prototype.updateEditable=function(){e.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&e.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},e.Mutator.prototype.resizeBubble_=function(){var t=2*e.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),o=n.width+n.x,s=n.height+3*t,c=this.workspace_.getFlyout();if(c){var v=c.getWorkspace().getMetricsManager().getScrollMetrics();s=Math.max(s,v.height+20),o+=c.getWidth()}this.block_.RTL&&(o=-n.x),o+=3*t,(Math.abs(this.workspaceWidth_-o)>t||Math.abs(this.workspaceHeight_-s)>t)&&(this.workspaceWidth_=o,this.workspaceHeight_=s,this.bubble_.setBubbleSize(o+t,s+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},e.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},e.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),n&&(t.init(this.workspace_),t.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var s,o=0;s=n[o];o++)s.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(n=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+n:n):t=n=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,n),this.block_.saveConnections){var c=this,v=this.block_;v.saveConnections(this.rootBlock_),this.sourceListener_=function(){v.saveConnections(c.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},e.Mutator.prototype.workspaceChanged_=function(t){if(!(t.isUiEvent||t.type==e.Events.CHANGE&&"disabled"==t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var o,n=0;o=t[n];n++){var s=o.getRelativeToSurfaceXY();if(20>s.y&&o.moveBy(0,20-s.y),o.RTL){var c=-20,v=this.workspace_.getFlyout();v&&(c-=v.getWidth()),s.x>c&&o.moveBy(c-s.x,0)}else 20>s.x&&o.moveBy(20-s.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(e.Events.setGroup(!0),t=(t=(o=this.block_).mutationToDom())&&e.Xml.domToText(t),n=o.rendered,o.rendered=!1,o.compose(this.rootBlock_),o.rendered=n,o.initSvg(),o.rendered&&o.render(),t!=(n=(n=o.mutationToDom())&&e.Xml.domToText(n))){e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(o,"mutation",null,t,n));var R=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(R),o.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),e.Events.setGroup(!1)}}},e.Mutator.prototype.dispose=function(){this.block_.mutator=null,e.Icon.prototype.dispose.call(this)},e.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var s,n=t.getAllBlocks(!1),o=0;s=n[o];o++)s.setStyle(s.getStyleName());if(o=t.getFlyout())for(t=o.workspace_.getAllBlocks(!1),o=0;s=t[o];o++)s.setStyle(s.getStyleName())}},e.Mutator.reconnect=function(t,n,o){if(!t||!t.getSourceBlock().workspace)return!1;o=n.getInput(o).connection;var s=t.targetBlock();return!(s&&s!=n||o.targetConnection==t||(o.isConnected()&&o.disconnect(),o.connect(t),0))},e.Mutator.findParentWs=function(t){var n=null;if(t&&t.options){var o=t.options.parentWorkspace;t.isFlyout?o&&o.options&&(n=o.options.parentWorkspace):o&&(n=o)}return n},e.FieldTextInput=function(t,n,o){this.spellcheck_=!0,e.FieldTextInput.superClass_.constructor.call(this,t,n,o),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},e.utils.object.inherits(e.FieldTextInput,e.Field),e.FieldTextInput.prototype.DEFAULT_VALUE="",e.FieldTextInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldTextInput(n,void 0,t)},e.FieldTextInput.prototype.SERIALIZABLE=!0,e.FieldTextInput.BORDERRADIUS=4,e.FieldTextInput.prototype.CURSOR="text",e.FieldTextInput.prototype.configure_=function(t){e.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},e.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var s,t=0,n=0,o=0;s=this.sourceBlock_.inputList[o];o++){for(var c=0;s.fieldRow[c];c++)t++;s.connection&&n++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},e.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},e.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},e.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},e.FieldTextInput.prototype.render_=function(){if(e.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0))}},e.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},e.FieldTextInput.prototype.showEditor_=function(t,n){this.workspace_=this.sourceBlock_.workspace,!(t=n||!1)&&(e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},e.FieldTextInput.prototype.showPromptEditor_=function(){e.prompt(e.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},e.FieldTextInput.prototype.showInlineEditor_=function(t){e.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},e.FieldTextInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV;e.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var o=this.workspace_.getScale(),s=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";if(t.style.fontSize=s,n.style.fontSize=s,s=e.FieldTextInput.BORDERRADIUS*o+"px",this.fullBlockClickTarget_){s=((s=this.getScaledBBox()).bottom-s.top)/2+"px";var c=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*o+"px solid "+c,t.style.borderRadius=s,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*o+"px")}return n.style.borderRadius=s,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},e.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=e.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,e.utils.dom.removeClass(this.getClickTarget_(),"editing")},e.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=e.browserEvents.conditionalBind(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=e.browserEvents.conditionalBind(t,"input",this,this.onHtmlInputChange_)},e.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(e.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},e.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==e.utils.KeyCodes.ENTER?(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.TAB&&(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},e.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,e.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_(),e.Events.setGroup(!1))},e.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},e.FieldTextInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldTextInput.prototype.isTabNavigable=function(){return!0},e.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},e.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},e.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},e.fieldRegistry.register("field_input",e.FieldTextInput),e.FieldAngle=function(t,n,o){this.clockwise_=e.FieldAngle.CLOCKWISE,this.offset_=e.FieldAngle.OFFSET,this.wrap_=e.FieldAngle.WRAP,this.round_=e.FieldAngle.ROUND,e.FieldAngle.superClass_.constructor.call(this,t,n,o),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},e.utils.object.inherits(e.FieldAngle,e.FieldTextInput),e.FieldAngle.prototype.DEFAULT_VALUE=0,e.FieldAngle.fromJson=function(t){return new e.FieldAngle(t.angle,void 0,t)},e.FieldAngle.prototype.SERIALIZABLE=!0,e.FieldAngle.ROUND=15,e.FieldAngle.HALF=50,e.FieldAngle.CLOCKWISE=!1,e.FieldAngle.OFFSET=0,e.FieldAngle.WRAP=360,e.FieldAngle.RADIUS=e.FieldAngle.HALF-1,e.FieldAngle.prototype.configure_=function(t){switch(e.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=t.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=t.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=t.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},e.FieldAngle.prototype.initView=function(){e.FieldAngle.superClass_.initView.call(this),this.symbol_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},e.FieldAngle.prototype.render_=function(){e.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},e.FieldAngle.prototype.showEditor_=function(t){e.FieldAngle.superClass_.showEditor_.call(this,t,e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD),this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.editor_),e.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},e.FieldAngle.prototype.dropdownCreate_=function(){var t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",height:2*e.FieldAngle.HALF+"px",width:2*e.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:e.FieldAngle.HALF,cy:e.FieldAngle.HALF,r:e.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF,y1:e.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var o=0;360>o;o+=15)e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF+e.FieldAngle.RADIUS,y1:e.FieldAngle.HALF,x2:e.FieldAngle.HALF+e.FieldAngle.RADIUS-(o%45==0?10:5),y2:e.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+o+","+e.FieldAngle.HALF+","+e.FieldAngle.HALF+")"},t);this.clickWrapper_=e.browserEvents.conditionalBind(t,"click",this,this.hide_),this.clickSurfaceWrapper_=e.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=e.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},e.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(e.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(e.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(e.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},e.FieldAngle.prototype.hide_=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hide()},e.FieldAngle.prototype.onMouseMove_=function(t){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),o=t.clientX-n.left-e.FieldAngle.HALF;t=t.clientY-n.top-e.FieldAngle.HALF,n=Math.atan(-t/o),isNaN(n)||(n=e.utils.math.toDegrees(n),0>o?n+=180:0<t&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},e.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},e.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,n=e.utils.math.toRadians(t%360);t=["M ",e.FieldAngle.HALF,",",e.FieldAngle.HALF];var o=e.FieldAngle.HALF,s=e.FieldAngle.HALF;if(!isNaN(n)){var c=Number(this.clockwise_),v=e.utils.math.toRadians(this.offset_),R=Math.cos(v)*e.FieldAngle.RADIUS,O=Math.sin(v)*-e.FieldAngle.RADIUS;c&&(n=2*v-n),o+=Math.cos(n)*e.FieldAngle.RADIUS,s-=Math.sin(n)*e.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-v)/Math.PI)%2),c&&(n=1-n),t.push(" l ",R,",",O," A ",e.FieldAngle.RADIUS,",",e.FieldAngle.RADIUS," 0 ",n," ",c," ",o,",",s," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",s)}},e.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var n;if(e.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===e.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:t.keyCode===e.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:t.keyCode===e.utils.KeyCodes.DOWN?n=-1:t.keyCode===e.utils.KeyCodes.UP&&(n=1),n){var o=this.getValue();this.displayMouseOrKeyboardValue_(o+n*this.round_),t.preventDefault(),t.stopPropagation()}},e.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},e.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},e.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),e.fieldRegistry.register("field_angle",e.FieldAngle),e.FieldCheckbox=function(t,n,o){this.checkChar_=null,e.FieldCheckbox.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.FieldCheckbox,e.Field),e.FieldCheckbox.prototype.DEFAULT_VALUE=!1,e.FieldCheckbox.fromJson=function(t){return new e.FieldCheckbox(t.checked,void 0,t)},e.FieldCheckbox.CHECK_CHAR="\u2713",e.FieldCheckbox.prototype.SERIALIZABLE=!0,e.FieldCheckbox.prototype.CURSOR="default",e.FieldCheckbox.prototype.configure_=function(t){e.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},e.FieldCheckbox.prototype.initView=function(){e.FieldCheckbox.superClass_.initView.call(this),e.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},e.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},e.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||e.FieldCheckbox.CHECK_CHAR},e.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},e.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},e.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},e.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},e.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},e.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},e.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},e.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},e.fieldRegistry.register("field_checkbox",e.FieldCheckbox),e.FieldColour=function(t,n,o){e.FieldColour.superClass_.constructor.call(this,t,n,o),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},e.utils.object.inherits(e.FieldColour,e.Field),e.FieldColour.fromJson=function(t){return new e.FieldColour(t.colour,void 0,t)},e.FieldColour.prototype.SERIALIZABLE=!0,e.FieldColour.prototype.CURSOR="default",e.FieldColour.prototype.isDirty_=!1,e.FieldColour.prototype.colours_=null,e.FieldColour.prototype.titles_=null,e.FieldColour.prototype.columns_=0,e.FieldColour.prototype.configure_=function(t){e.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},e.FieldColour.prototype.initView=function(){this.size_=new e.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},e.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},e.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:e.utils.colour.parse(t)},e.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},e.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},e.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),e.FieldColour.prototype.DEFAULT_VALUE=e.FieldColour.COLOURS[0],e.FieldColour.TITLES=[],e.FieldColour.COLUMNS=7,e.FieldColour.prototype.setColours=function(t,n){return this.colours_=t,n&&(this.titles_=n),this},e.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},e.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.picker_),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),e.DropDownDiv.hideIfOwner(this))},e.FieldColour.prototype.onKeyDown_=function(t){var n=!1;t.keyCode===e.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):t.keyCode===e.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):t.keyCode===e.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):t.keyCode===e.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):t.keyCode===e.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),e.DropDownDiv.hideWithoutAnimation(),n=!0),n&&t.stopPropagation()},e.FieldColour.prototype.moveHighlightBy_=function(t,n){var o=this.colours_||e.FieldColour.COLOURS,s=this.columns_||e.FieldColour.COLUMNS,c=this.highlightedIndex_%s,v=Math.floor(this.highlightedIndex_/s);c+=t,v+=n,0>t?0>c&&0<v?(c=s-1,v--):0>c&&(c=0):0<t?c>s-1&&v<Math.floor(o.length/s)-1?(c=0,v++):c>s-1&&c--:0>n?0>v&&(v=0):0<n&&v>Math.floor(o.length/s)-1&&(v=Math.floor(o.length/s)-1),this.setHighlightedCell_(this.picker_.childNodes[v].childNodes[c],v*s+c)},e.FieldColour.prototype.onMouseMove_=function(t){var n=(t=t.target)&&Number(t.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(t,n)},e.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&e.utils.dom.removeClass(t,"blocklyColourHighlighted")},e.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return n?n.childNodes[this.highlightedIndex_%t]:null},e.FieldColour.prototype.setHighlightedCell_=function(t,n){var o=this.getHighlighted_();o&&e.utils.dom.removeClass(o,"blocklyColourHighlighted"),e.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=n,e.utils.aria.setState(this.picker_,e.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},e.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.colours_||e.FieldColour.COLOURS,o=this.titles_||e.FieldColour.TITLES,s=this.getValue(),c=document.createElement("table");c.className="blocklyColourTable",c.tabIndex=0,c.dir="ltr",e.utils.aria.setRole(c,e.utils.aria.Role.GRID),e.utils.aria.setState(c,e.utils.aria.State.EXPANDED,!0),e.utils.aria.setState(c,e.utils.aria.State.ROWCOUNT,Math.floor(n.length/t)),e.utils.aria.setState(c,e.utils.aria.State.COLCOUNT,t);for(var v,R=0;R<n.length;R++){R%t==0&&(v=document.createElement("tr"),e.utils.aria.setRole(v,e.utils.aria.Role.ROW),c.appendChild(v));var O=document.createElement("td");v.appendChild(O),O.label=n[R],O.title=o[R]||n[R],O.id=e.utils.IdGenerator.getNextUniqueId(),O.setAttribute("data-index",R),e.utils.aria.setRole(O,e.utils.aria.Role.GRIDCELL),e.utils.aria.setState(O,e.utils.aria.State.LABEL,n[R]),e.utils.aria.setState(O,e.utils.aria.State.SELECTED,n[R]==s),O.style.backgroundColor=n[R],n[R]==s&&(O.className="blocklyColourSelected",this.highlightedIndex_=R)}this.onClickWrapper_=e.browserEvents.conditionalBind(c,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=e.browserEvents.conditionalBind(c,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=e.browserEvents.conditionalBind(c,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=e.browserEvents.conditionalBind(c,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=e.browserEvents.conditionalBind(c,"keydown",this,this.onKeyDown_),this.picker_=c},e.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(e.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(e.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(e.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(e.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},e.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),e.fieldRegistry.register("field_colour",e.FieldColour),e.FieldDropdown=function(t,n,o){"function"!=typeof t&&e.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],e.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,o),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},e.utils.object.inherits(e.FieldDropdown,e.Field),e.FieldDropdown.fromJson=function(t){return new e.FieldDropdown(t.options,void 0,t)},e.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},e.FieldDropdown.prototype.SERIALIZABLE=!0,e.FieldDropdown.CHECKMARK_OVERHANG=25,e.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,e.FieldDropdown.IMAGE_Y_OFFSET=5,e.FieldDropdown.IMAGE_Y_PADDING=2*e.FieldDropdown.IMAGE_Y_OFFSET,e.FieldDropdown.ARROW_CHAR=e.utils.userAgent.ANDROID?"\u25bc":"\u25be",e.FieldDropdown.prototype.CURSOR="default",e.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&e.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},e.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},e.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?e.FieldDropdown.ARROW_CHAR+" ":" "+e.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},e.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},e.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new e.utils.Coordinate(t.clientX,t.clientY):null,this.menu_.render(e.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),e.utils.dom.addClass(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.DropDownDiv.setColour(t,n)}e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},e.FieldDropdown.prototype.dropdownCreate_=function(){var t=new e.Menu;t.setRole(e.utils.aria.Role.LISTBOX),this.menu_=t;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var o=0;o<n.length;o++){var s=n[o][0],c=n[o][1];if("object"==typeof s){var v=new Image(s.width,s.height);v.src=s.src,v.alt=s.alt||"",s=v}(s=new e.MenuItem(s,c)).setRole(e.utils.aria.Role.OPTION),s.setRightToLeft(this.sourceBlock_.RTL),s.setCheckable(!0),t.addChild(s),s.setChecked(c==this.value_),c==this.value_&&(this.selectedMenuItem_=s),s.onAction(this.handleMenuActionEvent_,this)}},e.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},e.FieldDropdown.prototype.handleMenuActionEvent_=function(t){e.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},e.FieldDropdown.prototype.onItemSelected_=function(t,n){this.setValue(n.getValue())},e.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var n=!1,o=0;o<t.length;o++){var s=t[o][0];"string"==typeof s?t[o][0]=e.utils.replaceMessageReferences(s):(null!=s.alt&&(t[o][0].alt=e.utils.replaceMessageReferences(s.alt)),n=!0)}if(!(n||2>t.length)){for(n=[],o=0;o<t.length;o++)n.push(t[o][0]);o=e.utils.string.shortestStringLength(n),s=e.utils.string.commonWordPrefix(n,o);var c=e.utils.string.commonWordSuffix(n,o);!s&&!c||o<=s+c||(s&&(this.prefixField=n[0].substring(0,s-1)),c&&(this.suffixField=n[0].substr(1-c)),this.menuGenerator_=e.FieldDropdown.applyTrim_(t,s,c))}}},e.FieldDropdown.applyTrim_=function(t,n,o){for(var s=[],c=0;c<t.length;c++){var v=t[c][0],R=t[c][1];v=v.substring(n,v.length-o),s[c]=[v,R]}return s},e.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},e.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),e.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},e.FieldDropdown.prototype.doClassValidation_=function(t){for(var c,n=!1,o=this.getOptions(!0),s=0;c=o[s];s++)if(c[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},e.FieldDropdown.prototype.doValueUpdate_=function(t){e.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var o,n=0;o=t[n];n++)o[1]==this.value_&&(this.selectedOption_=o)},e.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},e.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},e.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var n=Number(t.height);t=Number(t.width);var o=!!this.borderRect_,s=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+e.FieldDropdown.IMAGE_Y_PADDING);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var c=this.svgArrow_?this.positionSVGArrow_(t+o,s/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):e.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+c+2*o,this.size_.height=s;var v=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",o+c):(v=t+c,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",o)),this.imageElement_.setAttribute("y",s/2-n/2),this.positionTextElement_(v+o,t+c)},e.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),e.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,n=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),o=e.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var s=0;this.svgArrow_&&(s=this.positionSVGArrow_(o+t,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=o+s+2*t,this.size_.height=n,this.positionTextElement_(t,o)},e.FieldDropdown.prototype.positionSVGArrow_=function(t,n){if(!this.svgArrow_)return 0;var o=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,s=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,c=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?o:t+s)+","+n+")"),c+s},e.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},e.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,o=0;o<t.length;++o){var s=t[o];Array.isArray(s)?"string"!=typeof s[1]?(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option id must be a string. Found "+s[1]+" in: ",s)):s[0]&&"string"!=typeof s[0]&&"string"!=typeof s[0].src&&(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must have a string label or image description. Found"+s[0]+" in: ",s)):(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must be an array. Found: ",s))}if(n)throw TypeError("Found invalid FieldDropdown options.")},e.fieldRegistry.register("field_dropdown",e.FieldDropdown),e.FieldLabelSerializable=function(t,n,o){e.FieldLabelSerializable.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.FieldLabelSerializable,e.FieldLabel),e.FieldLabelSerializable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabelSerializable(n,void 0,t)},e.FieldLabelSerializable.prototype.EDITABLE=!1,e.FieldLabelSerializable.prototype.SERIALIZABLE=!0,e.fieldRegistry.register("field_label_serializable",e.FieldLabelSerializable),e.FieldImage=function(t,n,o,s,c,v,R){if(!t)throw Error("Src value of an image field is required");if(t=e.utils.replaceMessageReferences(t),o=Number(e.utils.replaceMessageReferences(o)),n=Number(e.utils.replaceMessageReferences(n)),isNaN(o)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=o||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",e.FieldImage.superClass_.constructor.call(this,t,null,R),R||(this.flipRtl_=!!v,this.altText_=e.utils.replaceMessageReferences(s)||""),this.size_=new e.utils.Size(n,o+e.FieldImage.Y_PADDING),this.imageHeight_=o,this.clickHandler_=null,"function"==typeof c&&(this.clickHandler_=c),this.imageElement_=null},e.utils.object.inherits(e.FieldImage,e.Field),e.FieldImage.prototype.DEFAULT_VALUE="",e.FieldImage.fromJson=function(t){return new e.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},e.FieldImage.Y_PADDING=1,e.FieldImage.prototype.EDITABLE=!1,e.FieldImage.prototype.isDirty_=!1,e.FieldImage.prototype.configure_=function(t){e.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=e.utils.replaceMessageReferences(t.alt)||""},e.FieldImage.prototype.initView=function(){this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},e.FieldImage.prototype.updateSize_=function(){},e.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},e.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},e.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},e.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},e.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},e.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},e.FieldImage.prototype.getText_=function(){return this.altText_},e.fieldRegistry.register("field_image",e.FieldImage),e.FieldMultilineInput=function(t,n,o){e.FieldMultilineInput.superClass_.constructor.call(this,t,n,o),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},e.utils.object.inherits(e.FieldMultilineInput,e.FieldTextInput),e.FieldMultilineInput.prototype.configure_=function(t){e.FieldMultilineInput.superClass_.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},e.FieldMultilineInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldMultilineInput(n,void 0,t)},e.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},e.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},e.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},e.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return e.Field.NBSP;var n=t.split("\n");t="";for(var o=this.isOverflowedY_?this.maxLines_:n.length,s=0;s<o;s++){var c=n[s];c.length>this.maxDisplayLength?c=c.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&s===o-1&&(c=c.substring(0,c.length-3)+"..."),t+=c=c.replace(/\s/g,e.Field.NBSP),s!==o-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="\u200f"),t},e.FieldMultilineInput.prototype.doValueUpdate_=function(t){e.FieldMultilineInput.superClass_.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},e.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var n=0,o=0;o<t.length;o++){var s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[o])),n+=s}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?e.utils.dom.addClass(t,"blocklyHtmlTextAreaInputOverflowedY"):e.utils.dom.removeClass(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0)))},e.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,n=0,o=0,s=0;s<t.length;s++){var c=e.utils.dom.getTextWidth(t[s]);c>n&&(n=c),o+=this.getConstants().FIELD_TEXT_HEIGHT+(0<s?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split("\n"),c=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var v=this.getConstants().FIELD_TEXT_FONTSIZE,R=this.getConstants().FIELD_TEXT_FONTWEIGHT,O=this.getConstants().FIELD_TEXT_FONTFAMILY;for(s=0;s<t.length;s++){t[s].length>this.maxDisplayLength&&(t[s]=t[s].substring(0,this.maxDisplayLength)),c.textContent=t[s];var H=e.utils.dom.getFastTextWidth(c,v,R,O);H>n&&(n=H)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(o+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",o)),this.size_.width=n,this.size_.height=o,this.positionBorderRect_()},e.FieldMultilineInput.prototype.showEditor_=function(t,n){e.FieldMultilineInput.superClass_.showEditor_.call(this,t,n),this.forceRerender()},e.FieldMultilineInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=this.workspace_.getScale(),o=document.createElement("textarea");o.className="blocklyHtmlInput blocklyHtmlTextAreaInput",o.setAttribute("spellcheck",this.spellcheck_);var s=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";t.style.fontSize=s,o.style.fontSize=s,o.style.borderRadius=e.FieldTextInput.BORDERRADIUS*n+"px",s=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var c=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return o.style.padding=c+"px "+s+"px "+c+"px "+s+"px",s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o.style.lineHeight=s*n+"px",t.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.untypedDefaultValue_=this.value_,o.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(o),o},e.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},e.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},e.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==e.utils.KeyCodes.ENTER&&e.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},e.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),e.fieldRegistry.register("field_multilinetext",e.FieldMultilineInput),e.FieldNumber=function(t,n,o,s,c,v){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,e.FieldNumber.superClass_.constructor.call(this,t,c,v),v||this.setConstraints(n,o,s)},e.utils.object.inherits(e.FieldNumber,e.FieldTextInput),e.FieldNumber.prototype.DEFAULT_VALUE=0,e.FieldNumber.fromJson=function(t){return new e.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},e.FieldNumber.prototype.SERIALIZABLE=!0,e.FieldNumber.prototype.configure_=function(t){e.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},e.FieldNumber.prototype.setConstraints=function(t,n,o){this.setMinInternal_(t),this.setMaxInternal_(n),this.setPrecisionInternal_(o),this.setValue(this.getValue())},e.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},e.FieldNumber.prototype.getMin=function(){return this.min_},e.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},e.FieldNumber.prototype.getMax=function(){return this.max_},e.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var o=n.indexOf(".");this.decimalPlaces_=-1==o?t?0:null:n.length-o-1},e.FieldNumber.prototype.getPrecision=function(){return this.precision_},e.FieldNumber.prototype.doClassValidation_=function(t){return null===t||(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},e.FieldNumber.prototype.widgetCreate_=function(){var t=e.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMAX,this.max_),t},e.fieldRegistry.register("field_number",e.FieldNumber),e.FieldVariable=function(t,n,o,s,c){this.menuGenerator_=e.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new e.utils.Size(0,0),c&&this.configure_(c),n&&this.setValidator(n),c||this.setTypes_(o,s)},e.utils.object.inherits(e.FieldVariable,e.FieldDropdown),e.FieldVariable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.variable);return new e.FieldVariable(n,void 0,void 0,void 0,t)},e.FieldVariable.prototype.SERIALIZABLE=!0,e.FieldVariable.prototype.configure_=function(t){e.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},e.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},e.FieldVariable.prototype.shouldAddBorderRect_=function(){return e.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},e.FieldVariable.prototype.fromXml=function(t){var n=t.getAttribute("id"),o=t.textContent,s=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(n=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,o,s),null!=s&&s!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+e.Xml.domToText(t)+".");this.setValue(n.getId())},e.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},e.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");e.FieldVariable.superClass_.setSourceBlock.call(this,t)},e.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},e.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},e.FieldVariable.prototype.getVariable=function(){return this.variable_},e.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},e.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var n=e.Variables.getVariable(this.sourceBlock_.workspace,t);return n?this.typeIsAllowed_(n=n.type)?t:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},e.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=e.Variables.getVariable(this.sourceBlock_.workspace,t),e.FieldVariable.superClass_.doValueUpdate_.call(this,t)},e.FieldVariable.prototype.typeIsAllowed_=function(t){var n=this.getVariableTypes_();if(!n)return!0;for(var o=0;o<n.length;o++)if(t==n[o])return!0;return!1},e.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},e.FieldVariable.prototype.setTypes_=function(t,n){if(n=n||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var o=!1,s=0;s<t.length;s++)t[s]==n&&(o=!0);if(!o)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=t},e.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},e.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var o=this.getVariableTypes_(),s=0;s<o.length;s++){var c=this.sourceBlock_.workspace.getVariablesOfType(o[s]);n=n.concat(c)}for(n.sort(e.VariableModel.compareByName),o=[],s=0;s<n.length;s++)o[s]=[n[s].name,n[s].getId()];return o.push([e.Msg.RENAME_VARIABLE,e.RENAME_VARIABLE_ID]),e.Msg.DELETE_VARIABLE&&o.push([e.Msg.DELETE_VARIABLE.replace("%1",t),e.DELETE_VARIABLE_ID]),o},e.FieldVariable.prototype.onItemSelected_=function(t,n){if(t=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t==e.RENAME_VARIABLE_ID)return void e.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(t==e.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},e.FieldVariable.prototype.referencesVariables=function(){return!0},e.fieldRegistry.register("field_variable",e.FieldVariable),e.utils.svgPaths={},e.utils.svgPaths.point=function(t,n){return" "+t+","+n+" "},e.utils.svgPaths.curve=function(t,n){return" "+t+n.join("")},e.utils.svgPaths.moveTo=function(t,n){return" M "+t+","+n+" "},e.utils.svgPaths.moveBy=function(t,n){return" m "+t+","+n+" "},e.utils.svgPaths.lineTo=function(t,n){return" l "+t+","+n+" "},e.utils.svgPaths.line=function(t){return" l"+t.join("")},e.utils.svgPaths.lineOnAxis=function(t,n){return" "+t+" "+n+" "},e.utils.svgPaths.arc=function(t,n,o,s){return t+" "+o+" "+o+" "+n+s},e.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=e.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},e.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},e.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var o,n=t.blockStyles;for(o in n)this.blockStyles[o]=this.validatedBlockStyle_(n[o]);this.setDynamicProperties_(t)},e.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},e.blockRendering.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&null!=t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&null!=t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&null!=t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=e.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},e.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},e.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var n="auto_"+t;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(t)),{style:this.blockStyles[n],name:n}},e.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},e.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},e.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(t){var n={};return t&&e.utils.object.mixin(n,t),t=e.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=t.hex,n.colourSecondary=n.colourSecondary?e.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?e.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},e.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#fff",t,.6)||t},e.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#fff",t,.3)||t},e.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&e.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&e.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&e.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},e.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.line([e.utils.svgPaths.point(n,t/4),e.utils.svgPaths.point(2*-n,t/2),e.utils.svgPaths.point(n,t/4)])}},e.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(30,-t),e.utils.svgPaths.point(70,-t),e.utils.svgPaths.point(n,0)])}},e.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(v){var R=-(v=v?-1:1),O=o/2,H=O+2.5,V=O+.5,G=e.utils.svgPaths.point(-n,v*O);return O=e.utils.svgPaths.point(n,v*O),e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(0,v*H),e.utils.svgPaths.point(-n,R*V),G])+e.utils.svgPaths.curve("s",[e.utils.svgPaths.point(n,2.5*R),O])}var n=this.TAB_WIDTH,o=this.TAB_HEIGHT,s=t(!0),c=t(!1);return{type:this.SHAPES.PUZZLE,width:n,height:o,pathDown:c,pathUp:s}},e.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(R){return e.utils.svgPaths.line([e.utils.svgPaths.point(R*s,o),e.utils.svgPaths.point(3*R,0),e.utils.svgPaths.point(R*s,-o)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,s=(n-3)/2,c=t(1),v=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:c,pathRight:v}},e.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t))}},e.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.moveBy(0,t)+e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,-t)),o=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t)),s=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,-t));return{topLeft:n,topRight:o,bottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t)),bottomLeft:s,rightHeight:t}},e.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},e.blockRendering.ConstantProvider.prototype.createDom=function(t,n,o){this.injectCSS_(n,o),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),o=e.utils.dom.createSvgElement(e.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},o),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,e.blockRendering.Debug&&(t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t)},e.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,n){n=this.getCSS_(n),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var o=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=o:((n=document.createElement("style")).id=t,t=document.createTextNode(o),n.appendChild(t),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},e.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},e.blockRendering.Types.LEFT_CORNER=e.blockRendering.Types.LEFT_SQUARE_CORNER|e.blockRendering.Types.LEFT_ROUND_CORNER,e.blockRendering.Types.RIGHT_CORNER=e.blockRendering.Types.RIGHT_SQUARE_CORNER|e.blockRendering.Types.RIGHT_ROUND_CORNER,e.blockRendering.Types.nextTypeValue_=16777216,e.blockRendering.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(e.blockRendering.Types,t)||(e.blockRendering.Types[t]=e.blockRendering.Types.nextTypeValue_,e.blockRendering.Types.nextTypeValue_<<=1),e.blockRendering.Types[t]},e.blockRendering.Types.isField=function(t){return t.type&e.blockRendering.Types.FIELD},e.blockRendering.Types.isHat=function(t){return t.type&e.blockRendering.Types.HAT},e.blockRendering.Types.isIcon=function(t){return t.type&e.blockRendering.Types.ICON},e.blockRendering.Types.isSpacer=function(t){return t.type&e.blockRendering.Types.SPACER},e.blockRendering.Types.isInRowSpacer=function(t){return t.type&e.blockRendering.Types.IN_ROW_SPACER},e.blockRendering.Types.isInput=function(t){return t.type&e.blockRendering.Types.INPUT},e.blockRendering.Types.isExternalInput=function(t){return t.type&e.blockRendering.Types.EXTERNAL_VALUE_INPUT},e.blockRendering.Types.isInlineInput=function(t){return t.type&e.blockRendering.Types.INLINE_INPUT},e.blockRendering.Types.isStatementInput=function(t){return t.type&e.blockRendering.Types.STATEMENT_INPUT},e.blockRendering.Types.isPreviousConnection=function(t){return t.type&e.blockRendering.Types.PREVIOUS_CONNECTION},e.blockRendering.Types.isNextConnection=function(t){return t.type&e.blockRendering.Types.NEXT_CONNECTION},e.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(e.blockRendering.Types.PREVIOUS_CONNECTION|e.blockRendering.Types.NEXT_CONNECTION)},e.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&e.blockRendering.Types.LEFT_ROUND_CORNER},e.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_ROUND_CORNER},e.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&e.blockRendering.Types.LEFT_SQUARE_CORNER},e.blockRendering.Types.isRightSquareCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_SQUARE_CORNER},e.blockRendering.Types.isCorner=function(t){return t.type&e.blockRendering.Types.CORNER},e.blockRendering.Types.isJaggedEdge=function(t){return t.type&e.blockRendering.Types.JAGGED_EDGE},e.blockRendering.Types.isRow=function(t){return t.type&e.blockRendering.Types.ROW},e.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&e.blockRendering.Types.BETWEEN_ROW_SPACER},e.blockRendering.Types.isTopRow=function(t){return t.type&e.blockRendering.Types.TOP_ROW},e.blockRendering.Types.isBottomRow=function(t){return t.type&e.blockRendering.Types.BOTTOM_ROW},e.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(e.blockRendering.Types.TOP_ROW|e.blockRendering.Types.BOTTOM_ROW)},e.blockRendering.Types.isInputRow=function(t){return t.type&e.blockRendering.Types.INPUT_ROW},e.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=e.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Connection=function(t,n){e.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=e.blockRendering.Types.CONNECTION},e.utils.object.inherits(e.blockRendering.Connection,e.blockRendering.Measurable),e.blockRendering.OutputConnection=function(t,n){e.blockRendering.OutputConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.OutputConnection,e.blockRendering.Connection),e.blockRendering.PreviousConnection=function(t,n){e.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.PreviousConnection,e.blockRendering.Connection),e.blockRendering.NextConnection=function(t,n){e.blockRendering.NextConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.NextConnection,e.blockRendering.Connection),e.blockRendering.InputConnection=function(t,n){e.blockRendering.InputConnection.superClass_.constructor.call(this,t,n.connection),this.type|=e.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.InputConnection,e.blockRendering.Connection),e.blockRendering.InlineInput=function(t,n){e.blockRendering.InlineInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},e.utils.object.inherits(e.blockRendering.InlineInput,e.blockRendering.InputConnection),e.blockRendering.StatementInput=function(t,n){e.blockRendering.StatementInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},e.utils.object.inherits(e.blockRendering.StatementInput,e.blockRendering.InputConnection),e.blockRendering.ExternalValueInput=function(t,n){e.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.ExternalValueInput,e.blockRendering.InputConnection),e.blockRendering.Icon=function(t,n){e.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=n,this.isVisible=n.isVisible(),this.type|=e.blockRendering.Types.ICON,t=n.getCorrectedSize(),this.height=t.height,this.width=t.width},e.utils.object.inherits(e.blockRendering.Icon,e.blockRendering.Measurable),e.blockRendering.JaggedEdge=function(t){e.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},e.utils.object.inherits(e.blockRendering.JaggedEdge,e.blockRendering.Measurable),e.blockRendering.Field=function(t,n,o){e.blockRendering.Field.superClass_.constructor.call(this,t),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=e.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=o},e.utils.object.inherits(e.blockRendering.Field,e.blockRendering.Measurable),e.blockRendering.Hat=function(t){e.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},e.utils.object.inherits(e.blockRendering.Hat,e.blockRendering.Measurable),e.blockRendering.SquareCorner=function(t,n){e.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_SQUARE_CORNER:e.blockRendering.Types.LEFT_SQUARE_CORNER)|e.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},e.utils.object.inherits(e.blockRendering.SquareCorner,e.blockRendering.Measurable),e.blockRendering.RoundCorner=function(t,n){e.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_ROUND_CORNER:e.blockRendering.Types.LEFT_ROUND_CORNER)|e.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},e.utils.object.inherits(e.blockRendering.RoundCorner,e.blockRendering.Measurable),e.blockRendering.InRowSpacer=function(t,n){e.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},e.utils.object.inherits(e.blockRendering.InRowSpacer,e.blockRendering.Measurable),e.blockRendering.Row=function(t){this.type=e.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},e.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},e.blockRendering.Row.prototype.getLastInput=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isInput(n))return n;return null},e.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,t=0;n=this.elements[t];t++)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.TopRow=function(t){e.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},e.utils.object.inherits(e.blockRendering.TopRow,e.blockRendering.Row),e.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var n=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,o=t.getPreviousBlock();return!!t.outputConnection||n||!!o&&o.getNextBlock()==t},e.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.TopRow.prototype.measure=function(){for(var c,t=0,n=0,o=0,s=0;c=this.elements[s];s++)n+=c.width,e.blockRendering.Types.isSpacer(c)||(e.blockRendering.Types.isHat(c)?o=Math.max(o,c.ascenderHeight):t=Math.max(t,c.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow=function(t){e.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},e.utils.object.inherits(e.blockRendering.BottomRow,e.blockRendering.Row),e.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},e.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.BottomRow.prototype.measure=function(){for(var c,t=0,n=0,o=0,s=0;c=this.elements[s];s++)n+=c.width,e.blockRendering.Types.isSpacer(c)||(e.blockRendering.Types.isNextConnection(c)?o=Math.max(o,c.height):t=Math.max(t,c.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.SpacerRow=function(t,n,o){e.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=o,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new e.blockRendering.InRowSpacer(this.constants_,o)]},e.utils.object.inherits(e.blockRendering.SpacerRow,e.blockRendering.Row),e.blockRendering.SpacerRow.prototype.measure=function(){},e.blockRendering.InputRow=function(t){e.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},e.utils.object.inherits(e.blockRendering.InputRow,e.blockRendering.Row),e.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var o,t=0,n=0;o=this.elements[n];n++)this.width+=o.width,e.blockRendering.Types.isInput(o)&&(e.blockRendering.Types.isStatementInput(o)?t+=o.connectedBlockWidth:e.blockRendering.Types.isExternalInput(o)&&0!=o.connectedBlockWidth&&(t+=o.connectedBlockWidth-o.connectionWidth)),e.blockRendering.Types.isSpacer(o)||(this.height=Math.max(this.height,o.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},e.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},e.blockRendering.RenderInfo=function(t,n){this.block_=n,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new e.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new e.blockRendering.TopRow(this.constants_),this.bottomRow=new e.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},e.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new e.blockRendering.InputRow(this.constants_);this.inputRows.push(t);for(var s,n=this.block_.getIcons(),o=0;s=n[o];o++){var c=new e.blockRendering.Icon(this.constants_,s);this.isCollapsed&&s.collapseHidden?this.hiddenIcons.push(c):t.elements.push(c)}for(s=null,o=0;n=this.block_.inputList[o];o++)if(n.isVisible()){for(this.shouldStartNewRow_(n,s)&&(this.rows.push(t),t=new e.blockRendering.InputRow(this.constants_),this.inputRows.push(t)),s=0;c=n.fieldRow[s];s++)t.elements.push(new e.blockRendering.Field(this.constants_,c,n));this.addInput_(n,t),s=n}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new e.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},e.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,o=this.topRow.hasLeftSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner;this.topRow.elements.push(new o(this.constants_)),n?(t=new e.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new e.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==e.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,o=this.topRow.hasRightSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner,this.topRow.elements.push(new o(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new e.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.blockRendering.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=t.align)},e.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!(!n||t.type!=e.inputTypes.STATEMENT&&n.type!=e.inputTypes.STATEMENT&&(t.type!=e.inputTypes.VALUE&&t.type!=e.inputTypes.DUMMY||this.isInline))},e.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,t=0;n=this.rows[t];t++){var o=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var s=0;s<o.length-1;s++){n.elements.push(o[s]);var c=this.getInRowSpacing_(o[s],o[s+1]);n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,c))}n.elements.push(o[o.length-1]),n.endsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}},e.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t&&n&&e.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var c,t=0,n=0,o=0,s=0;c=this.rows[s];s++){if(c.measure(),n=Math.max(n,c.width),c.hasStatement){var v=c.getLastInput();t=Math.max(t,c.width-v.width)}o=Math.max(o,c.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,s=0;c=this.rows[s];s++)c.hasStatement&&(c.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},e.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,t=0;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var o=n.width;0<(o=this.getDesiredRowWidth_(n)-o)&&this.addAlignmentPadding_(n,o),e.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},e.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(t,n){var o=t.getFirstSpacer(),s=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align==e.constants.ALIGN.LEFT?s.width+=n:t.align==e.constants.ALIGN.CENTRE?(o.width+=n/2,s.width+=n/2):t.align==e.constants.ALIGN.RIGHT?o.width+=n:s.width+=n,t.width+=n},e.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var n=t.getLastInput(),o=t.width-n.width,s=this.statementEdge;0<(o=s-o)&&this.addAlignmentPadding_(t,o),o=t.width,s=this.getDesiredRowWidth_(t),n.width+=s-o,n.height=Math.max(n.height,t.height),t.width+=s-o,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},e.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var n=0;n<t.length;n++)this.rows.push(t[n]),n!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[n],t[n+1]))},e.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,n){var o=this.getSpacerRowHeight_(t,n),s=this.getSpacerRowWidth_(t,n);return o=new e.blockRendering.SpacerRow(this.constants_,o,s),t.hasStatement&&(o.followsStatement=!0),n.hasStatement&&(o.precedesStatement=!0),o},e.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,n){return e.blockRendering.Types.isSpacer(n)?t.yPos+n.height/2:e.blockRendering.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2):e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:t.yPos+t.height/2},e.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var s,n=t.xPos,o=0;s=t.elements[o];o++)e.blockRendering.Types.isSpacer(s)&&(s.height=t.height),s.xPos=n,s.centerline=this.getElemCenterline_(t,s),n+=s.width},e.blockRendering.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,o=0;s=this.rows[o];o++)s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks),this.recordElemPositions_(s);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},e.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},e.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},e.blockRendering.Debug.prototype.clearElems=function(){for(var n,t=0;n=this.debugElements_[t];t++)e.utils.dom.removeNode(n);this.debugElements_=[]},e.blockRendering.Debug.prototype.drawSpacerRow=function(t,n,o){if(e.blockRendering.Debug.config.rowSpacers){var s=Math.abs(t.height),c=0>t.height;c&&(n-=s),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:n,width:t.width,height:s,stroke:c?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawSpacerElem=function(t,n,o){if(e.blockRendering.Debug.config.elemSpacers){n=Math.abs(t.width);var s=0>t.width,c=s?t.xPos-n:t.xPos;o&&(c=-(c+n)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:c,y:t.centerline-t.height/2,width:n,height:t.height,stroke:"pink",fill:s?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedElem=function(t,n){if(e.blockRendering.Debug.config.elems){var o=t.xPos;n&&(o=-(o+t.width)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n=t.centerline-t.height/2,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isField(t)&&t.field instanceof e.FieldLabel&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}e.blockRendering.Types.isInput(t)&&e.blockRendering.Debug.config.connections&&this.drawConnection(t.connectionModel)},e.blockRendering.Debug.prototype.drawConnection=function(t){if(e.blockRendering.Debug.config.connections){if(t.type==e.connectionTypes.INPUT_VALUE)var n=4,o="magenta",s="none";else t.type==e.connectionTypes.OUTPUT_VALUE?(n=2,s=o="magenta"):t.type==e.connectionTypes.NEXT_STATEMENT?(n=4,o="goldenrod",s="none"):t.type==e.connectionTypes.PREVIOUS_STATEMENT&&(n=2,s=o="goldenrod");this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:n,fill:s,stroke:o},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedRow=function(t,n,o){e.blockRendering.Debug.config.rows&&(this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isTopOrBottomRow(t)||e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:o?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},e.blockRendering.Debug.prototype.drawRowWithElements=function(t,n,o){for(var s=0,c=t.elements.length;s<c;s++){var v=t.elements[s];v?e.blockRendering.Types.isSpacer(v)?this.drawSpacerElem(v,t.height,o):this.drawRenderedElem(v,o):console.warn("A row has an undefined or null element.",t,v)}this.drawRenderedRow(t,n,o)},e.blockRendering.Debug.prototype.drawBoundingBox=function(t){if(e.blockRendering.Debug.config.blockBounds){var n=t.RTL?-t.width:0;this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockRenderDebug",x:n=t.RTL?-t.widthWithChildren:0,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawDebug=function(t,n){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var c,o=0,s=0;c=n.rows[s];s++)e.blockRendering.Types.isBetweenRowSpacer(c)?this.drawSpacerRow(c,o,n.RTL):this.drawRowWithElements(c,o,n.RTL),o+=c.height;t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(t.pathObject.svgPath)},e.blockRendering.Debug.prototype.drawRender=function(t){e.blockRendering.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))},e.blockRendering.Drawer=function(t,n){this.block_=t,this.info_=n,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},e.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},e.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,t=0;n=this.info_.hiddenIcons[t];t++)n.icon.iconGroup_.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var n=this.info_.rows[t];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},e.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,n=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var s,o=0;s=n[o];o++)e.blockRendering.Types.isLeftRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:e.blockRendering.Types.isRightRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:e.blockRendering.Types.isPreviousConnection(s)?this.outlinePath_+=s.shape.pathLeft:e.blockRendering.Types.isHat(s)?this.outlinePath_+=this.constants_.START_HAT.path:e.blockRendering.Types.isSpacer(s)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",s.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("v",t.height)},e.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+e.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},e.blockRendering.Drawer.prototype.drawValueInput_=function(t){var n=t.getLastInput();this.positionExternalValueConnection_(t);var o="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+o+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight)},e.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var s=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",o)+n+e.utils.svgPaths.lineOnAxis("v",s)+this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,n=t.elements;this.positionNextConnection_();for(var v,o=0,s="",c=n.length-1;v=n[c];c--)e.blockRendering.Types.isNextConnection(v)?s+=v.shape.pathRight:e.blockRendering.Types.isLeftSquareCorner(v)?s+=e.utils.svgPaths.lineOnAxis("H",t.xPos):e.blockRendering.Types.isLeftRoundedCorner(v)?s+=this.constants_.OUTSIDE_CORNERS.bottomLeft:e.blockRendering.Types.isRightRoundedCorner(v)?(s+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):e.blockRendering.Types.isSpacer(v)&&(s+=e.utils.svgPaths.lineOnAxis("h",-1*v.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-o),this.outlinePath_+=s},e.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var n=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",n)+t}this.outlinePath_+="z"},e.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,t=0;n=this.info_.rows[t];t++)for(var s,o=0;s=n.elements[o];o++)e.blockRendering.Types.isInlineInput(s)?this.drawInlineInput_(s):(e.blockRendering.Types.isIcon(s)||e.blockRendering.Types.isField(s))&&this.layoutField_(s)},e.blockRendering.Drawer.prototype.layoutField_=function(t){if(e.blockRendering.Types.isField(t))var n=t.field.getSvgRoot();else e.blockRendering.Types.isIcon(t)&&(n=t.icon.iconGroup_);var o=t.centerline-t.height/2,s=t.xPos,c="";this.info_.RTL&&(s=-(s+t.width),t.flipRtl&&(s+=t.width,c="scale(-1 1)")),e.blockRendering.Types.isIcon(t)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+s+","+o+")"),t.icon.computeIconLocation()):n.setAttribute("transform","translate("+s+","+o+")"+c),this.info_.isInsertionMarker&&n.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var n=t.width,o=t.height,s=t.connectionOffsetY,c=t.connectionHeight+s;this.inlinePath_+=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-o/2)+e.utils.svgPaths.lineOnAxis("v",s)+t.shape.pathDown+e.utils.svgPaths.lineOnAxis("v",o-c)+e.utils.svgPaths.lineOnAxis("h",n-t.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",-o)+"z",this.positionInlineInputConnection_(t)},e.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY)}},e.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.statementEdge+n.notchOffset;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.width;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var n=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},e.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,o=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-o:o,t.baseline)}},e.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},e.Events.MarkerMove=function(t,n,o,s){var c=t?t.workspace.id:void 0;s&&s.getType()==e.ASTNode.types.WORKSPACE&&(c=s.getLocation().id),e.Events.MarkerMove.superClass_.constructor.call(this,c),this.blockId=t?t.id:null,this.oldNode=o,this.newNode=s,this.isCursor=n},e.utils.object.inherits(e.Events.MarkerMove,e.Events.UiBase),e.Events.MarkerMove.prototype.type=e.Events.MARKER_MOVE,e.Events.MarkerMove.prototype.toJson=function(){var t=e.Events.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},e.Events.MarkerMove.prototype.fromJson=function(t){e.Events.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},e.registry.register(e.registry.Type.EVENT,e.Events.MARKER_MOVE,e.Events.MarkerMove),e.blockRendering.MarkerSvg=function(t,n,o){this.workspace_=t,this.marker_=o,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=o.colour||t},e.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",e.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,e.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},e.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},e.blockRendering.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?e.blockRendering.MarkerSvg.CURSOR_CLASS:e.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},e.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},e.blockRendering.MarkerSvg.prototype.draw=function(t,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var o=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||o,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(t,n),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},e.blockRendering.MarkerSvg.prototype.showAtLocation_=function(t){var n=t.getLocation().type;t.getType()==e.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()==e.ASTNode.types.OUTPUT?this.showWithOutput_(t):n==e.connectionTypes.INPUT_VALUE?this.showWithInput_(t):n==e.connectionTypes.NEXT_STATEMENT?this.showWithNext_(t):t.getType()==e.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()==e.ASTNode.types.FIELD?this.showWithField_(t):t.getType()==e.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()==e.ASTNode.types.STACK&&this.showWithStack_(t)},e.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var n=(t=t.getSourceBlock()).width,o=t.height,s=o*e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,c=this.constants_.CURSOR_BLOCK_PADDING;if(t.previousConnection){var v=this.constants_.shapeFor(t.previousConnection);this.positionPrevious_(n,c,s,v)}else t.outputConnection?(v=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(n,o,v)):this.positionBlock_(n,c,s);this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var n=t.getWsCoordinate();t=n.x,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var n=(t=t.getLocation()).getSize().width,o=t.getSize().height;this.positionRect_(0,0,n,o),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var n=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(n),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var n=t.getLocation();t=n.getSourceBlock();var o=0;n=n.getOffsetInBlock().y;var s=t.getHeightWidth().width;this.workspace_.RTL&&(o=-s),this.positionLine_(o,n,s),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var n=(t=t.getLocation()).getHeightWidth(),o=n.width+this.constants_.CURSOR_STACK_PADDING,s=-this.constants_.CURSOR_STACK_PADDING/2,v=s;this.workspace_.RTL&&(v=-(o+s)),this.positionRect_(v,-this.constants_.CURSOR_STACK_PADDING/2,o,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},e.blockRendering.MarkerSvg.prototype.positionBlock_=function(t,n,o){t=e.utils.svgPaths.moveBy(-n,o)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionInput_=function(t){var n=t.getOffsetInBlock().x,o=t.getOffsetInBlock().y;t=e.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+n+","+o+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},e.blockRendering.MarkerSvg.prototype.positionLine_=function(t,n,o){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",o),this.currentMarkerSvg=this.markerSvgLine_},e.blockRendering.MarkerSvg.prototype.positionOutput_=function(t,n,o){t=e.utils.svgPaths.moveBy(t,0)+e.utils.svgPaths.lineOnAxis("h",-(t-o.width))+e.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+o.pathDown+e.utils.svgPaths.lineOnAxis("V",n)+e.utils.svgPaths.lineOnAxis("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionPrevious_=function(t,n,o,s){t=e.utils.svgPaths.moveBy(-n,o)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+s.pathLeft+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionRect_=function(t,n,o,s){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",o),this.markerSvgRect_.setAttribute("height",s),this.currentMarkerSvg=this.markerSvgRect_},e.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},e.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},e.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(t,n){var o=n.getSourceBlock();t=new(e.Events.get(e.Events.MARKER_MOVE))(o,this.isCursor(),t,n),e.Events.fire(t)},e.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},e.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerSvgLine_),e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},e.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",t=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},e.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.blockRendering.PathObject=function(t,n,o){this.constants=o,this.svgRoot=t,this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},e.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},e.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},e.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},e.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},e.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},e.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},e.blockRendering.PathObject.prototype.setClass_=function(t,n){n?e.utils.dom.addClass(this.svgRoot,t):e.utils.dom.removeClass(this.svgRoot,t)},e.blockRendering.PathObject.prototype.updateHighlighted=function(t){this.svgPath.setAttribute("filter",t?"url(#"+this.constants.embossFilterId+")":"none")},e.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},e.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},e.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},e.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},e.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},e.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},e.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,n){},e.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},e.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},e.blockRendering.Renderer.prototype.init=function(t,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,e.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(t),this.constants_.init()},e.blockRendering.Renderer.prototype.createDom=function(t,n){this.constants_.createDom(t,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},e.blockRendering.Renderer.prototype.refreshDom=function(t,n){var o=this.getConstants();o.dispose(),this.constants_=this.makeConstants_(),this.overrides&&e.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=o.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(t,n)},e.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},e.blockRendering.Renderer.prototype.makeConstants_=function(){return new e.blockRendering.ConstantProvider},e.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new e.blockRendering.RenderInfo(this,t)},e.blockRendering.Renderer.prototype.makeDrawer_=function(t,n){return new e.blockRendering.Drawer(t,n)},e.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!e.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new e.blockRendering.Debug(this.getConstants())},e.blockRendering.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.blockRendering.MarkerSvg(t,this.getConstants(),n)},e.blockRendering.Renderer.prototype.makePathObject=function(t,n){return new e.blockRendering.PathObject(t,n,this.constants_)},e.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},e.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},e.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(t,n,o){return!!e.Connection.getConnectionForOrphanedConnection(t,o===e.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},e.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(t,n,o){return n.type==e.connectionTypes.OUTPUT_VALUE||n.type==e.connectionTypes.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(o,t.targetBlock(),n.type)?e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},e.blockRendering.Renderer.prototype.render=function(t){e.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(t);n.measure(),this.makeDrawer_(t,n).draw()},e.geras={},e.geras.ConstantProvider=function(){e.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},e.utils.object.inherits(e.geras.ConstantProvider,e.blockRendering.ConstantProvider),e.geras.ConstantProvider.prototype.getCSS_=function(t){return e.geras.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},e.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},e.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},e.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var o,n=0;o=t.elements[n];n++)e.blockRendering.Types.isLeftSquareCorner(o)?this.steps_+=this.highlightConstants_.START_POINT:e.blockRendering.Types.isLeftRoundedCorner(o)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):e.blockRendering.Types.isPreviousConnection(o)?this.steps_+=this.notchPaths_.pathLeft:e.blockRendering.Types.isHat(o)?this.steps_+=this.startPaths_.path(this.RTL_):e.blockRendering.Types.isSpacer(o)&&0!=o.width&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",o.xPos+o.width-this.highlightOffset_));this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},e.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+e.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},e.geras.Highlighter.prototype.drawValueInput=function(t){var n=t.getLastInput();if(this.RTL_){var o=t.height-n.connectionHeight;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",o)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.Highlighter.prototype.drawStatementInput=function(t){var n=t.getLastInput();if(this.RTL_){var o=t.height-2*this.insideCornerPaths_.height;this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)},e.geras.Highlighter.prototype.drawRightSideRow=function(t){var n=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n),t.height>this.highlightOffset_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},e.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=e.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):e.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=e.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},e.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=e.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e.blockRendering.Types.isLeftRoundedCorner((t=this.info_.topRow).elements[0])?this.steps_+=e.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},e.geras.Highlighter.prototype.drawInlineInput=function(t){var n=this.highlightOffset_,o=t.xPos+t.connectionWidth,s=t.centerline-t.height/2,c=t.width-t.connectionWidth,v=s+n;this.RTL_?(s=t.connectionOffsetY-n,t=t.height-(t.connectionOffsetY+t.connectionHeight)+n,this.inlineSteps_+=e.utils.svgPaths.moveTo(o-n,v)+e.utils.svgPaths.lineOnAxis("v",s)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",t)+e.utils.svgPaths.lineOnAxis("h",c)):this.inlineSteps_+=e.utils.svgPaths.moveTo(t.xPos+t.width+n,v)+e.utils.svgPaths.lineOnAxis("v",t.height)+e.utils.svgPaths.lineOnAxis("h",-c)+e.utils.svgPaths.moveTo(o,s+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.InlineInput=function(t,n){e.geras.InlineInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.InlineInput,e.blockRendering.InlineInput),e.geras.StatementInput=function(t,n){e.geras.StatementInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.StatementInput,e.blockRendering.StatementInput),e.geras.RenderInfo=function(t,n){e.geras.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.geras.RenderInfo,e.blockRendering.RenderInfo),e.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.geras.RenderInfo.prototype.populateBottomRow_=function(){e.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},e.geras.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.geras.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.geras.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=t.align)},e.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var o,t=!1,n=0;o=this.rows[n];n++)o.hasExternalInput&&(t=!0);for(n=0;o=this.rows[n];n++){var s=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(var c=0;c<s.length-1;c++){o.elements.push(s[c]);var v=this.getInRowSpacing_(s[c],s[c+1]);o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v))}o.elements.push(s[s.length-1]),o.endsWithElemSpacer()&&(v=this.getInRowSpacing_(s[s.length-1],null),t&&o.hasDummyInput&&(v+=this.constants_.TAB_WIDTH),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v)))}}},e.geras.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&(!n||e.blockRendering.Types.isStatementInput(n)))return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(e.blockRendering.Types.isLeftRoundedCorner(t)&&n){if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||!t.hasStatement&&n.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var o=t.yPos;return e.blockRendering.Types.isField(n)||e.blockRendering.Types.isIcon(n)?(o+=n.height/2,(t.hasInlineInput||t.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=e.blockRendering.Types.isInlineInput(n)?o+n.height/2:o+t.height/2,o},e.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var s,t=0,n=null,o=this.rows.length-1;s=this.rows[o];o--)s.nextRightEdge=t,e.blockRendering.Types.isInputRow(s)&&(s.hasStatement&&this.alignStatementRow_(s),n&&n.hasStatement&&s.width<n.width?s.nextRightEdge=n.width:t=s.width,n=s);for(o=t=0;s=this.rows[o];o++)s.hasStatement?t=this.getDesiredRowWidth_(s):e.blockRendering.Types.isSpacer(s)?s.width=Math.max(t,s.nextRightEdge):(0<(t=Math.max(t,s.nextRightEdge)-s.width)&&this.addAlignmentPadding_(s,t),t=s.width)}else e.geras.RenderInfo.superClass_.alignRowElements_.call(this)},e.geras.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:e.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.geras.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,o=0;s=this.rows[o];o++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var c=n-this.topRow.ascenderHeight;s==this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,n+=c),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},e.geras.Drawer=function(t,n){e.geras.Drawer.superClass_.constructor.call(this,t,n),this.highlighter_=new e.geras.Highlighter(n)},e.utils.object.inherits(e.geras.Drawer,e.blockRendering.Drawer),e.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),e.geras.Drawer.superClass_.drawTop_.call(this)},e.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),e.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},e.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),e.geras.Drawer.superClass_.drawValueInput_.call(this,t)},e.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),e.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},e.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),e.geras.Drawer.superClass_.drawBottom_.call(this)},e.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),e.geras.Drawer.superClass_.drawLeft_.call(this)},e.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),e.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},e.geras.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(o=this.info_.RTL?-1*o:o+this.constants_.DARK_PATH_OFFSET,t.yPos+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,o=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-o:o)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},e.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=e.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},e.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},e.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(t+n)-n,s=e.utils.svgPaths.moveBy(o,o)+e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-o-n,t-o)),c=e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t+n,t+n)),v=e.utils.svgPaths.moveBy(o,-o)+e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t-o,o+n));return{width:t+n,height:t,pathTop:function(R){return R?s:""},pathBottom:function(R){return R?c:v}}},e.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(t-n)+n,s=e.utils.svgPaths.moveBy(o,o)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t-o,-o+n)),c=e.utils.svgPaths.moveBy(n,t)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t,-t+n)),v=-o,R=e.utils.svgPaths.moveBy(o,v)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(-o+n,-v-t));return{height:t,topLeft:function(O){return O?s:c},bottomLeft:function(){return R}}},e.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,o=e.utils.svgPaths.moveBy(-2,3.4-n)+e.utils.svgPaths.lineTo(-.45*t,-2.1),s=e.utils.svgPaths.lineOnAxis("v",2.5)+e.utils.svgPaths.moveBy(.97*-t,2.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(.05*-t,10),e.utils.svgPaths.point(.3*t,9.5)])+e.utils.svgPaths.moveBy(.67*t,-1.9)+e.utils.svgPaths.lineOnAxis("v",2.5),c=e.utils.svgPaths.lineOnAxis("v",-1.5)+e.utils.svgPaths.moveBy(-.92*t,-.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(-.19*t,-5.5),e.utils.svgPaths.point(0,-11)])+e.utils.svgPaths.moveBy(.92*t,1),v=e.utils.svgPaths.moveBy(-5,n-.7)+e.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:n,pathUp:function(R){return R?o:c},pathDown:function(R){return R?s:v}}},e.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:e.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},e.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:e.utils.svgPaths.lineTo(5.1,2.6)+e.utils.svgPaths.moveBy(-10.2,6.8)+e.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},e.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,n=e.utils.svgPaths.moveBy(25,-8.7)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(29.7,-6.2),e.utils.svgPaths.point(57.2,-.5),e.utils.svgPaths.point(75,8.7)]),o=e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(17.8,-9.2),e.utils.svgPaths.point(45.3,-14.9),e.utils.svgPaths.point(75,-8.7)])+e.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(s){return s?n:o}}},e.geras.PathObject=function(t,n,o){this.constants=o,this.svgRoot=t,this.svgPathDark=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},e.utils.object.inherits(e.geras.PathObject,e.blockRendering.PathObject),e.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},e.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},e.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},e.geras.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),e.geras.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},e.geras.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=e.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},e.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},e.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.geras.PathObject.prototype.updateDisabled_=function(t){e.geras.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")},e.geras.Renderer=function(t){e.geras.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null},e.utils.object.inherits(e.geras.Renderer,e.blockRendering.Renderer),e.geras.Renderer.prototype.init=function(t,n){e.geras.Renderer.superClass_.init.call(this,t,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},e.geras.Renderer.prototype.refreshDom=function(t,n){e.geras.Renderer.superClass_.refreshDom.call(this,t,n),this.getHighlightConstants().init()},e.geras.Renderer.prototype.makeConstants_=function(){return new e.geras.ConstantProvider},e.geras.Renderer.prototype.makeRenderInfo_=function(t){return new e.geras.RenderInfo(this,t)},e.geras.Renderer.prototype.makeDrawer_=function(t,n){return new e.geras.Drawer(t,n)},e.geras.Renderer.prototype.makePathObject=function(t,n){return new e.geras.PathObject(t,n,this.getConstants())},e.geras.Renderer.prototype.makeHighlightConstants_=function(){return new e.geras.HighlightConstantProvider(this.getConstants())},e.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},e.blockRendering.register("geras",e.geras.Renderer),e.thrasos={},e.thrasos.RenderInfo=function(t,n){e.thrasos.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.thrasos.RenderInfo,e.blockRendering.RenderInfo),e.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var o,t=!1,n=0;o=this.rows[n];n++)o.hasExternalInput&&(t=!0);for(n=0;o=this.rows[n];n++){var s=o.elements;o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0])));for(var c=0;c<s.length-1;c++){o.elements.push(s[c]);var v=this.getInRowSpacing_(s[c],s[c+1]);o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v))}o.elements.push(s[s.length-1]),o.endsWithElemSpacer()&&(v=this.getInRowSpacing_(s[s.length-1],null),t&&o.hasDummyInput&&(v+=this.constants_.TAB_WIDTH),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v)))}},e.thrasos.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&!n)return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))return n.notchOffset}return e.blockRendering.Types.isLeftRoundedCorner(t)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||t.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var o=t.yPos;return e.blockRendering.Types.isField(n)&&t.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):o+t.height/2},e.thrasos.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,o=0;s=this.rows[o];o++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var c=n-this.topRow.ascenderHeight;s==this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,n+=c),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline},e.thrasos.Renderer=function(t){e.thrasos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.thrasos.Renderer,e.blockRendering.Renderer),e.thrasos.Renderer.prototype.makeRenderInfo_=function(t){return new e.thrasos.RenderInfo(this,t)},e.blockRendering.register("thrasos",e.thrasos.Renderer),e.zelos={},e.zelos.ConstantProvider=function(){e.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},e.utils.object.inherits(e.zelos.ConstantProvider,e.blockRendering.ConstantProvider),e.zelos.ConstantProvider.prototype.setFontConstants_=function(t){e.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},e.zelos.ConstantProvider.prototype.init=function(){e.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},e.zelos.ConstantProvider.prototype.setDynamicProperties_=function(t){e.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},e.zelos.ConstantProvider.prototype.dispose=function(){e.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&e.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&e.utils.dom.removeNode(this.replacementGlowFilter_)},e.zelos.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(25,-t),e.utils.svgPaths.point(71,-t),e.utils.svgPaths.point(n,0)])}},e.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(o,s,c){var v=o/2;return e.utils.svgPaths.lineTo(-(c=c?-1:1)*(v=v>n?n:v),o=(s?-1:1)*o/2)+e.utils.svgPaths.lineTo(c*v,o)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(o){return(o/=2)>n?n:o},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeRounded=function(){function t(s,c,v){var R=s>o?s-o:0;return e.utils.svgPaths.arc("a","0 0,1",s=(s>o?o:s)/2,e.utils.svgPaths.point((c?-1:1)*s,(c?-1:1)*s))+e.utils.svgPaths.lineOnAxis("v",(v?1:-1)*R)+e.utils.svgPaths.arc("a","0 0,1",s,e.utils.svgPaths.point((c?1:-1)*s,(c?-1:1)*s))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(s){return(s/=2)>n?n:s},height:function(s){return s},connectionOffsetY:function(s){return s/2},connectionOffsetX:function(s){return-s},pathDown:function(s){return t(s,!1,!1)},pathUp:function(s){return t(s,!0,!1)},pathRightDown:function(s){return t(s,!1,!0)},pathRightUp:function(s){return t(s,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeSquared=function(){function t(o,s,c){return o-=2*n,e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?-1:1)*n,(s?-1:1)*n))+e.utils.svgPaths.lineOnAxis("v",(c?1:-1)*o)+e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?1:-1)*n,(s?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(o){return n},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},e.zelos.ConstantProvider.prototype.shapeFor=function(t){var n=t.getCheck();switch(!n&&t.targetConnection&&(n=t.targetConnection.getCheck()),t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:if(null!=(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},e.zelos.ConstantProvider.prototype.makeNotch=function(){function t(V){return e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/2,0),e.utils.svgPaths.point(V*c*3/4,R/2),e.utils.svgPaths.point(V*c,R)])+e.utils.svgPaths.line([e.utils.svgPaths.point(V*c,v)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/4,R/2),e.utils.svgPaths.point(V*c/2,R),e.utils.svgPaths.point(V*c,R)])+e.utils.svgPaths.lineOnAxis("h",V*s)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/2,0),e.utils.svgPaths.point(V*c*3/4,-R/2),e.utils.svgPaths.point(V*c,-R)])+e.utils.svgPaths.line([e.utils.svgPaths.point(V*c,-v)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/4,-R/2),e.utils.svgPaths.point(V*c/2,-R),e.utils.svgPaths.point(V*c,-R)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,s=n/3,c=s/3,v=o/2,R=v/2,O=t(1),H=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:O,pathRight:H}},e.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),o=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t));return{width:t,height:t,pathTop:n,pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t)),rightWidth:t,rightHeight:t,pathTopRight:o,pathBottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t))}},e.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#000",t,.15)||t},e.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#000",t,.25)||t},e.zelos.ConstantProvider.prototype.createDom=function(t,n,o){e.zelos.ConstantProvider.superClass_.createDom.call(this,t,n,o),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),o=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},e.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.zelos.TopRow=function(t){e.zelos.TopRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.TopRow,e.blockRendering.TopRow),e.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection},e.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.BottomRow=function(t){e.zelos.BottomRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.BottomRow,e.blockRendering.BottomRow),e.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},e.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.RightConnectionShape=function(t){e.zelos.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},e.utils.object.inherits(e.zelos.RightConnectionShape,e.blockRendering.Measurable),e.zelos.RenderInfo=function(t,n){e.zelos.RenderInfo.superClass_.constructor.call(this,t,n),this.topRow=new e.zelos.TopRow(this.constants_),this.bottomRow=new e.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new e.zelos.RightConnectionShape(this.constants_):null},e.utils.object.inherits(e.zelos.RenderInfo,e.blockRendering.RenderInfo),e.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.zelos.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!!n&&(t.type==e.inputTypes.STATEMENT||n.type==e.inputTypes.STATEMENT||(t.type==e.inputTypes.VALUE||t.type==e.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},e.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):e.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.zelos.RenderInfo.prototype.getInRowSpacing_=function(t,n){return t&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&e.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){if(e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var o=e.blockRendering.Types.isInputRow(t)&&t.hasStatement,s=e.blockRendering.Types.isInputRow(n)&&n.hasStatement;return s||o?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),s&&o?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):e.blockRendering.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):e.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){var o=this.width-this.startX;return e.blockRendering.Types.isInputRow(t)&&t.hasStatement||e.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o},e.zelos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(t.hasStatement&&!e.blockRendering.Types.isSpacer(n)&&!e.blockRendering.Types.isStatementInput(n))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(e.blockRendering.Types.isInlineInput(n)){var o=n.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return t.yPos+o.height/2}return e.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,t,n)},e.zelos.RenderInfo.prototype.addInput_=function(t,n){t.type==e.inputTypes.DUMMY&&n.hasDummyInput&&n.align==e.constants.ALIGN.LEFT&&t.align==e.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=t),e.zelos.RenderInfo.superClass_.addInput_.call(this,t,n)},e.zelos.RenderInfo.prototype.addAlignmentPadding_=function(t,n){if(t.rightAlignedDummyInput){for(var o,c,s=0;(c=t.elements[s])&&(e.blockRendering.Types.isSpacer(c)&&(o=c),!e.blockRendering.Types.isField(c)||c.parentInput!=t.rightAlignedDummyInput);s++);if(o)return o.width+=n,void(t.width+=n)}e.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,n)},e.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=t,o=2;o<this.rows.length-1;o+=2){var s=this.rows[o-1],c=this.rows[o],v=this.rows[o+1];if(s=2==o?!!this.topRow.hasPreviousConnection:!!s.followsStatement,v=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!v.precedesStatement,e.blockRendering.Types.isInputRow(c)&&c.hasStatement)c.measure(),n=c.width-c.getLastInput().width+t;else if(s&&(2==o||v)&&e.blockRendering.Types.isInputRow(c)&&!c.hasStatement){v=c.xPos,s=null;for(var O,R=0;O=c.elements[R];R++)e.blockRendering.Types.isSpacer(O)&&(s=O),!(s&&(e.blockRendering.Types.isField(O)||e.blockRendering.Types.isInput(O))&&v<n)||e.blockRendering.Types.isField(O)&&(O.field instanceof e.FieldLabel||O.field instanceof e.FieldImage)||(s.width+=n-v),v+=O.width}}},e.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var o,t=0,n=0;o=this.rows[n];n++)o.yPos=t,t+=o.height;this.height=t,t=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),o=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(o=n,this.rightSide.height=t,this.rightSide.width=o,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+o),this.startX=n,this.width+=n+o,this.widthWithChildren+=n+o}},e.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var o,t=0,n=0;o=this.rows[n];n++)if(e.blockRendering.Types.isInputRow(o)){t=o.elements[o.elements.length-2];var s=this.getNegativeSpacing_(o.elements[1]),c=this.getNegativeSpacing_(t),v=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(t=s+c)<v&&(s=(t=this.width-v)/2,c=t/2),o.elements.unshift(new e.blockRendering.InRowSpacer(this.constants_,-s)),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,-c))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,n=0;o=this.rows[n];n++)e.blockRendering.Types.isTopOrBottomRow(o)&&(o.elements[1].width-=t,o.elements[1].widthWithConnectedBlocks-=t),o.width-=t,o.widthWithConnectedBlocks-=t}},e.zelos.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var n=this.outputConnection.width,o=this.outputConnection.shape.type,s=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return o===s.SHAPES.ROUND?n-(o=this.height/2>(o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?o:this.height/2)*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o))):0;if(e.blockRendering.Types.isInlineInput(t)){var c=t.connectedBlock;return t=c?c.pathObject.outputShapeType:t.shape.type,c&&c.outputConnection&&(c.statementInputCount||c.nextConnection)||o==s.SHAPES.HEXAGONAL&&o!=t?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][t]}return e.blockRendering.Types.isField(t)?o==s.SHAPES.ROUND&&t.field instanceof e.FieldTextInput?n-2.75*s.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:e.blockRendering.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},e.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var n=this.rows[t-1],o=this.rows[t],s=this.rows[t+1],c=2==t,v=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement;if(c?this.topRow.hasPreviousConnection:n.followsStatement){var R=3==o.elements.length&&(o.elements[1].field instanceof e.FieldLabel||o.elements[1].field instanceof e.FieldImage);if(!c&&R)n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.MEDIUM_PADDING;else if(c||v){if(v){for(c=!1,v=0;R=o.elements[v];v++)if(e.blockRendering.Types.isInlineInput(R)&&R.connectedBlock&&!R.connectedBlock.isShadow()&&40<=R.connectedBlock.getHeightWidth().height){c=!0;break}c&&(n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},e.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),e.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},e.zelos.Drawer=function(t,n){e.zelos.Drawer.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.zelos.Drawer,e.blockRendering.Drawer),e.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},e.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):e.zelos.Drawer.superClass_.drawOutline_.call(this)},e.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():e.zelos.Drawer.superClass_.drawLeft_.call(this)},e.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=t.height-(t.precedesStatement?n:0))?e.utils.svgPaths.lineOnAxis("V",t.yPos+n):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},e.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},e.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",t.width)},e.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",-t.width)},e.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var n=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var o=t.width-2*t.connectionWidth;t=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-t.height/2)+e.utils.svgPaths.lineOnAxis("h",o)+t.shape.pathRightDown(t.height)+e.utils.svgPaths.lineOnAxis("h",-o)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(n,t)}},e.zelos.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width,s=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,c=t.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",o)+s+e.utils.svgPaths.lineOnAxis("v",c)+n+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.zelos.MarkerSvg=function(t,n,o){e.zelos.MarkerSvg.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.zelos.MarkerSvg,e.blockRendering.MarkerSvg),e.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var n=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(n),this.showCurrent_()},e.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var n=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(t),this.showCurrent_()},e.zelos.MarkerSvg.prototype.positionCircle_=function(t,n){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},e.zelos.MarkerSvg.prototype.hide=function(){e.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},e.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(e.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},e.zelos.MarkerSvg.prototype.applyColour_=function(t){e.zelos.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},e.zelos.PathObject=function(t,n,o){e.zelos.PathObject.superClass_.constructor.call(this,t,n,o),this.constants=o,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},e.utils.object.inherits(e.zelos.PathObject,e.blockRendering.PathObject),e.zelos.PathObject.prototype.setPath=function(t){e.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},e.zelos.PathObject.prototype.applyColour=function(t){for(var n in e.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.flipRTL=function(){for(var t in e.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},e.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},e.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},e.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,n){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(n?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},e.zelos.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},e.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},e.zelos.PathObject.prototype.setOutlinePath=function(t,n){(t=this.getOutlinePath_(t)).setAttribute("d",n),t.setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},e.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},e.zelos.Renderer=function(t){e.zelos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.Renderer,e.blockRendering.Renderer),e.zelos.Renderer.prototype.makeConstants_=function(){return new e.zelos.ConstantProvider},e.zelos.Renderer.prototype.makeRenderInfo_=function(t){return new e.zelos.RenderInfo(this,t)},e.zelos.Renderer.prototype.makeDrawer_=function(t,n){return new e.zelos.Drawer(t,n)},e.zelos.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.zelos.MarkerSvg(t,this.getConstants(),n)},e.zelos.Renderer.prototype.makePathObject=function(t,n){return new e.zelos.PathObject(t,n,this.getConstants())},e.zelos.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!=e.connectionTypes.INPUT_VALUE&&t.type!==e.connectionTypes.OUTPUT_VALUE},e.zelos.Renderer.prototype.getConnectionPreviewMethod=function(t,n,o){return n.type==e.connectionTypes.OUTPUT_VALUE?t.isConnected()?e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:e.zelos.Renderer.superClass_.getConnectionPreviewMethod(t,n,o)},e.blockRendering.register("zelos",e.zelos.Renderer),e.Themes.Dark=e.Theme.defineTheme("dark",{base:e.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),e.Themes.Deuteranopia={},e.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},e.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},e.Themes.Deuteranopia=new e.Theme("deuteranopia",e.Themes.Deuteranopia.defaultBlockStyles,e.Themes.Deuteranopia.categoryStyles),e.Themes.HighContrast={},e.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},e.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},e.Themes.HighContrast=new e.Theme("highcontrast",e.Themes.HighContrast.defaultBlockStyles,e.Themes.HighContrast.categoryStyles),e.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),e.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),e.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),e.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),e.Themes.Tritanopia={},e.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},e.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},e.Themes.Tritanopia=new e.Theme("tritanopia",e.Themes.Tritanopia.defaultBlockStyles,e.Themes.Tritanopia.categoryStyles),e.requires={},e}.apply(W,[]))&&(L.exports=p)},18783:function(L,W,m){var p,e;p=[m(55484)],void 0!==(e=function(t){"use strict";return t.Blocks={},t.Blocks}.apply(W,p))&&(L.exports=e)},55484:function(L,W,m){var p,e;p=[m(81069)],void 0!==(e=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var o=n.newBlock("lists_create_with_container");o.initSvg();for(var s=o.getInput("STACK").connection,c=0;c<this.itemCount_;c++){var v=n.newBlock("lists_create_with_item");v.initSvg(),s.connect(v.previousConnection),s=v.nextConnection}return o},compose:function(n){var o=n.getInputTargetBlock("STACK");for(n=[];o&&!o.isInsertionMarker();)n.push(o.valueConnection_),o=o.nextConnection&&o.nextConnection.targetBlock();for(o=0;o<this.itemCount_;o++){var s=this.getInput("ADD"+o).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),o=0;o<this.itemCount_;o++)t.Mutator.reconnect(n[o],this,"ADD"+o)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var o=0;n;){var s=this.getInput("ADD"+o);n.valueConnection_=s&&s.connection.targetConnection,o++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var o=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&o.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var n=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(n),"END"),this.setInputsInline(!0);var o=this;this.setTooltip(function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"0":"-1")})}},t.Blocks.lists_getIndex={init:function(){var n=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new t.FieldDropdown(n,function(s){s="REMOVE"==s,this.getSourceBlock().updateStatement_(s)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var o=this;this.setTooltip(function(){var s=o.getFieldValue("MODE"),c=o.getFieldValue("WHERE"),v="";switch(s+" "+c){case"GET FROM_START":case"GET FROM_END":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==c||"FROM_END"==c)&&(v+="  "+("FROM_START"==c?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),v})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var o=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",o),n},domToMutation:function(n){var o="true"==n.getAttribute("statement");this.updateStatement_(o),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var o=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var c="FROM_START"==s||"FROM_END"==s;if(c!=n){var v=this.getSourceBlock();return v.updateAt_(c),v.setFieldValue(s,"WHERE"),null}});this.getInput("AT").appendField(o,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var n=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var o=this;this.setTooltip(function(){var s=o.getFieldValue("MODE"),c=o.getFieldValue("WHERE"),v="";switch(s+" "+c){case"SET FROM_START":case"SET FROM_END":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==c||"FROM_END"==c)&&(v+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),v})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",o),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var o=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var c="FROM_START"==s||"FROM_END"==s;if(c!=n){var v=this.getSourceBlock();return v.updateAt_(c),v.setFieldValue(s,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(o,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",o),o=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",o),n},domToMutation:function(n){var o="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,o),this.updateAt_(2,n)},updateAt_:function(n,o){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),o?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(c){var v="FROM_START"==c||"FROM_END"==c;if(v!=o){var R=this.getSourceBlock();return R.updateAt_(n,v),R.setFieldValue(c,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var n=this,o=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(s){n.updateType_(s)});this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(o,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var s=n.getFieldValue("MODE");if("SPLIT"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+s)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var o=this.getInput("INPUT").connection;o.setShadowDom(null);var s=o.targetBlock();s&&(o.disconnect(),s.isShadow()?s.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=t.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var o=n.newBlock("controls_if_if");o.initSvg();for(var s=o.nextConnection,c=1;c<=this.elseifCount_;c++){var v=n.newBlock("controls_if_elseif");v.initSvg(),s.connect(v.previousConnection),s=v.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),s.connect(n.previousConnection)),o},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var o=[null],s=[null],c=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,o.push(n.valueConnection_),s.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,c=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(o,s,c)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var o=1;n;){switch(n.type){case"controls_if_elseif":var s=this.getInput("IF"+o),c=this.getInput("DO"+o);n.valueConnection_=s&&s.connection.targetConnection,n.statementConnection_=c&&c.connection.targetConnection,o++;break;case"controls_if_else":c=this.getInput("ELSE"),n.statementConnection_=c&&c.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],o=[null],s=null;this.getInput("ELSE")&&(s=this.getInput("ELSE").connection.targetConnection);for(var c=1;this.getInput("IF"+c);){var v=this.getInput("IF"+c),R=this.getInput("DO"+c);n.push(v.connection.targetConnection),o.push(R.connection.targetConnection),c++}this.updateShape_(),this.reconnectChildBlocks_(n,o,s)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,o,s){for(var c=1;c<=this.elseifCount_;c++)t.Mutator.reconnect(n[c],this,"IF"+c),t.Mutator.reconnect(o[c],this,"DO"+c);t.Mutator.reconnect(s,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var o=this.getInputTargetBlock("A"),s=this.getInputTargetBlock("B");o&&s&&!this.workspace.connectionChecker.doTypeChecks(o.outputConnection,s.outputConnection)&&(t.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==o&&(o.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(o=this.prevBlocks_[1])!==s&&(s.unplug(),!o||o.isDisposed()||o.isShadow()||this.getInput("B").connection.connect(o.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var o=this.getInputTargetBlock("THEN"),s=this.getInputTargetBlock("ELSE"),c=this.outputConnection.targetConnection;if((o||s)&&c)for(var v=0;2>v;v++){var R=1==v?o:s;R&&!R.workspace.connectionChecker.doTypeChecks(R.outputConnection,c)&&(t.Events.setGroup(n.group),c===this.prevParentConnection_?(this.unplug(),c.getSourceBlock().bumpNeighbours()):(R.unplug(),R.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=c}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var o=this.getField("VAR").getVariable(),s=o.name;if(!this.isCollapsed()&&null!=s){var c={enabled:!0};c.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",s),o=t.Variables.generateVariableFieldDom(o),(s=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.appendChild(o),c.callback=t.ContextMenu.callbackFactory(this,s),n.push(c)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==t.Events.BLOCK_MOVE){var o=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(o?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var s=t.Events.getGroup();t.Events.setGroup(n.group),this.setEnabled(o),t.Events.setGroup(s)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",o),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var o=this.getInput("DIVISOR");n?o||this.appendValueInput("DIVISOR").setCheck("Number"):o&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(n){var o=t.utils.xml.createElement("mutation");n&&o.setAttribute("name",this.getFieldValue("NAME"));for(var s=0;s<this.argumentVarModels_.length;s++){var c=t.utils.xml.createElement("arg"),v=this.argumentVarModels_[s];c.setAttribute("name",v.name),c.setAttribute("varid",v.getId()),n&&this.paramIds_&&c.setAttribute("paramId",this.paramIds_[s]),o.appendChild(c)}return this.hasStatements_||o.setAttribute("statements","false"),o},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var s,o=0;s=n.childNodes[o];o++)if("arg"==s.nodeName.toLowerCase()){var c=s.getAttribute("name");s=s.getAttribute("varid")||s.getAttribute("varId"),this.arguments_.push(c),null!=(s=t.Variables.getOrCreateVariablePackage(this.workspace,s,c,""))?this.argumentVarModels_.push(s):console.log("Failed to create a variable with name "+c+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var o=t.utils.xml.createElement("block");o.setAttribute("type","procedures_mutatorcontainer");var s=t.utils.xml.createElement("statement");s.setAttribute("name","STACK"),o.appendChild(s);for(var c=0;c<this.arguments_.length;c++){var v=t.utils.xml.createElement("block");v.setAttribute("type","procedures_mutatorarg");var R=t.utils.xml.createElement("field");R.setAttribute("name","NAME");var O=t.utils.xml.createTextNode(this.arguments_[c]);R.appendChild(O),v.appendChild(R),R=t.utils.xml.createElement("next"),v.appendChild(R),s.appendChild(v),s=R}return n=t.Xml.domToBlock(o,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var o=n.getInputTargetBlock("STACK");o&&!o.isInsertionMarker();){var s=o.getFieldValue("NAME");this.arguments_.push(s),s=this.workspace.getVariable(s,""),this.argumentVarModels_.push(s),this.paramIds_.push(o.id),o=o.nextConnection&&o.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,o){var s=this.workspace.getVariableById(n);if(""==s.type){s=s.name,o=this.workspace.getVariableById(o);for(var c=!1,v=0;v<this.argumentVarModels_.length;v++)this.argumentVarModels_[v].getId()==n&&(this.arguments_[v]=o.name,this.argumentVarModels_[v]=o,c=!0);c&&(this.displayRenamedVar_(s,o.name),t.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var o=n.name,s=!1,c=0;c<this.argumentVarModels_.length;c++)if(this.argumentVarModels_[c].getId()==n.getId()){var v=this.arguments_[c];this.arguments_[c]=o,s=!0}s&&(this.displayRenamedVar_(v,o),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,o){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var v,s=this.mutator.workspace_.getAllBlocks(!1),c=0;v=s[c];c++)"procedures_mutatorarg"==v.type&&t.Names.equals(n,v.getFieldValue("NAME"))&&v.setFieldValue(o,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var o={enabled:!0},s=this.getFieldValue("NAME");o.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",s);var c=t.utils.xml.createElement("mutation");for(c.setAttribute("name",s),s=0;s<this.arguments_.length;s++){var v=t.utils.xml.createElement("arg");v.setAttribute("name",this.arguments_[s]),c.appendChild(v)}if((s=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),s.appendChild(c),o.callback=t.ContextMenu.callbackFactory(this,s),n.push(o),!this.isCollapsed())for(s=0;s<this.argumentVarModels_.length;s++)(o={enabled:!0}).text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(c=this.argumentVarModels_[s]).name),c=t.Variables.generateVariableFieldDom(c),(v=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),v.appendChild(c),o.callback=t.ContextMenu.callbackFactory(this,v),n.push(o)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var n=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var o=this.getSourceBlock(),s=t.Mutator.findParentWs(o.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var c=(o.workspace.targetWorkspace||o.workspace).getAllBlocks(!1),v=n.toLowerCase(),R=0;R<c.length;R++)if(c[R].id!=this.getSourceBlock().id){var O=c[R].getFieldValue("NAME");if(O&&O.toLowerCase()==v)return null}return o.isInFlyout||((o=s.getVariable(n,""))&&o.name!=n&&s.renameVariableById(o.getId(),n),o||(o=s.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(o)),n},deleteIntermediateVars_:function(n){var o=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(o)for(var s=0;s<this.createdVariables_.length;s++){var c=this.createdVariables_[s];c.name!=n&&o.deleteVariableById(c.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,o){t.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(o,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",o)))},setProcedureParameters_:function(n,o){var s=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),c=s&&s.mutator&&s.mutator.isVisible();if(c||(this.quarkConnections_={},this.quarkIds_=null),o)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=o;else{if(o.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),s=this.rendered,this.rendered=!1;for(var v=0;v<this.arguments_.length;v++){var R=this.getInput("ARG"+v);R&&(this.quarkConnections_[this.quarkIds_[v]]=R=R.connection.targetConnection,c&&R&&-1==o.indexOf(this.quarkIds_[v])&&(R.disconnect(),R.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],v=0;v<this.arguments_.length;v++)n=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[v],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=o)for(v=0;v<this.arguments_.length;v++)(o=this.quarkIds_[v])in this.quarkConnections_&&(t.Mutator.reconnect(R=this.quarkConnections_[o],this,"ARG"+v)||delete this.quarkConnections_[o]);(this.rendered=s)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var o=this.getField("ARGNAME"+n);if(o){t.Events.disable();try{o.setValue(this.arguments_[n])}finally{t.Events.enable()}}else o=new t.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(t.ALIGN_RIGHT).appendField(o,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var o=0;o<this.arguments_.length;o++){var s=t.utils.xml.createElement("arg");s.setAttribute("name",this.arguments_[o]),n.appendChild(s)}return n},domToMutation:function(n){var o=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),o),o=[];for(var v,s=[],c=0;v=n.childNodes[c];c++)"arg"==v.nodeName.toLowerCase()&&(o.push(v.getAttribute("name")),s.push(v.getAttribute("paramId")));this.setProcedureParameters_(o,s)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==t.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var o=this.getProcedureCall();if(!(o=t.Procedures.getDefinition(o,this.workspace))||o.type==this.defType_&&JSON.stringify(o.getVars())==JSON.stringify(this.arguments_)||(o=null),!o){t.Events.setGroup(n.group),n=t.utils.xml.createElement("xml"),(o=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var s=this.getRelativeToSurfaceXY(),c=s.y+2*t.SNAP_RADIUS;o.setAttribute("x",s.x+t.SNAP_RADIUS*(this.RTL?-1:1)),o.setAttribute("y",c),s=this.mutationToDom(),o.appendChild(s),(s=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(c=this.getProcedureCall())||(c=t.Procedures.findLegalName("",this),this.renameProcedure("",c)),s.appendChild(t.utils.xml.createTextNode(c)),o.appendChild(s),n.appendChild(o),t.Xml.domToWorkspace(n,this.workspace),t.Events.setGroup(!1)}}else n.type==t.Events.BLOCK_DELETE?(o=this.getProcedureCall(),(o=t.Procedures.getDefinition(o,this.workspace))||(t.Events.setGroup(n.group),this.dispose(!0),t.Events.setGroup(!1))):n.type==t.Events.CHANGE&&"disabled"==n.element&&(o=this.getProcedureCall(),(o=t.Procedures.getDefinition(o,this.workspace))&&o.id==n.blockId&&((o=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(o)))},customContextMenu:function(n){if(this.workspace.isMovable()){var o={enabled:!0};o.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var s=this.getProcedureCall(),c=this.workspace;o.callback=function(){var v=t.Procedures.getDefinition(s,c);v&&(c.centerOnBlock(v.id),v.select())},n.push(o)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var o=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(o.type)){n=!0;break}o=o.getSurroundParent()}while(o);n?("procedures_defnoreturn"==o.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=o.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",o),o=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",o),n},domToMutation:function(n){var o="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,o),this.updateAt_(2,n)},updateAt_:function(n,o){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),o?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(c){var v="FROM_START"==c||"FROM_END"==c;if(v!=o){var R=this.getSourceBlock();return R.updateAt_(n,v),R.setFieldValue(c,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var n=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var n=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var o=this;n=new t.FieldDropdown(n,function(s){o.updateType_(s)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==o.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],o=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new t.FieldDropdown(n,function(s){o.updateType_(s)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==o.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var s,o=0;s=this.inputList[o];o++)for(var v,c=0;v=s.fieldRow[c];c++)if(n==v.name)return s.insertFieldAt(c,this.newQuote_(!0)),void s.insertFieldAt(c+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new t.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var o=n.newBlock("text_create_join_container");o.initSvg();for(var s=o.getInput("STACK").connection,c=0;c<this.itemCount_;c++){var v=n.newBlock("text_create_join_item");v.initSvg(),s.connect(v.previousConnection),s=v.nextConnection}return o},compose:function(n){var o=n.getInputTargetBlock("STACK");for(n=[];o&&!o.isInsertionMarker();)n.push(o.valueConnection_),o=o.nextConnection&&o.nextConnection.targetBlock();for(o=0;o<this.itemCount_;o++){var s=this.getInput("ADD"+o).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),o=0;o<this.itemCount_;o++)t.Mutator.reconnect(n[o],this,"ADD"+o)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var o=0;n;){var s=this.getInput("ADD"+o);n.valueConnection_=s&&s.connection.targetConnection,o++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var o=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&o.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(o){(o="FROM_START"==o||"FROM_END"==o)!=this.isAt_&&this.getSourceBlock().updateAt_(o)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var o=n.getFieldValue("WHERE"),s=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==o||"FROM_END"==o)&&(o="FROM_START"==o?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(s+="  "+o.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),s})},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(o={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},v=this.getField("VAR").getText(),c={text:t.Msg.DELETE_VARIABLE.replace("%1",v),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(o),n.unshift(c));else{if("variables_get"==this.type)var o="variables_set",s=t.Msg.VARIABLES_GET_CREATE_SET;else o="variables_get",s=t.Msg.VARIABLES_SET_CREATE_GET;var c={enabled:0<this.workspace.remainingCapacity()},v=this.getField("VAR").getText();c.text=s.replace("%1",v),(s=t.utils.xml.createElement("field")).setAttribute("name","VAR"),s.appendChild(t.utils.xml.createTextNode(v)),(v=t.utils.xml.createElement("block")).setAttribute("type",o),v.appendChild(s),c.callback=t.ContextMenu.callbackFactory(this,v),n.push(c)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(o,s)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();o.deleteVariableById(s.getId()),o.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(o={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},R=this.getField("VAR").getText(),v={text:t.Msg.DELETE_VARIABLE.replace("%1",R),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(o),n.unshift(v));else{var o=this.getFieldValue("VAR"),s=this.workspace.getVariableById(o).type;if("variables_get_dynamic"==this.type){o="variables_set_dynamic";var c=t.Msg.VARIABLES_GET_CREATE_SET}else o="variables_get_dynamic",c=t.Msg.VARIABLES_SET_CREATE_GET;var v={enabled:0<this.workspace.remainingCapacity()},R=this.getField("VAR").getText();v.text=c.replace("%1",R),(c=t.utils.xml.createElement("field")).setAttribute("name","VAR"),c.setAttribute("variabletype",s),c.appendChild(t.utils.xml.createTextNode(R)),(R=t.utils.xml.createElement("block")).setAttribute("type",o),R.appendChild(c),v.callback=t.ContextMenu.callbackFactory(this,R),n.push(v)}},onchange:function(n){n=this.getFieldValue("VAR"),n=t.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(o,s)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();o.deleteVariableById(s.getId()),o.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks}.apply(W,p))&&(L.exports=e)},25552:function(L,W,m){var p,e;p=[m(68210),m(63266),m(18783),m(30069)],void 0!==(e=function(t,n,o,s){"use strict";return t.setLocale(n),t.Blocks=t.Blocks||{},Object.keys(o).forEach(function(c){t.Blocks[c]=o[c]}),t.JavaScript=s,t}.apply(W,p))&&(L.exports=e)},68210:function(L,W,m){var p,e;p=[m(86931)],void 0!==(e=function(t){"use strict";return t.setLocale=function(n){t.Msg=t.Msg||{},Object.keys(n).forEach(function(o){t.Msg[o]=n[o]})},t}.apply(W,p))&&(L.exports=e)},76279:function(L,W,m){var p,e;p=[m(25552)],void 0!==(e=function(t){"use strict";return t}.apply(W,p))&&(L.exports=e)},30069:function(L,W,m){var p,e;p=[m(68210),m(69957)],void 0!==(e=function(t,n){"use strict";return t.JavaScript=n,n}.apply(W,p))&&(L.exports=e)},69957:function(L,W,m){var p,e;p=[m(81069)],void 0!==(e=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.isInitialized=!1,t.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var o=[],s=t.Variables.allDeveloperVariables(n),c=0;c<s.length;c++)o.push(this.nameDB_.getName(s[c],t.Names.DEVELOPER_VARIABLE_TYPE));for(n=t.Variables.allUsedVarModels(n),c=0;c<n.length;c++)o.push(this.nameDB_.getName(n[c].getId(),t.VARIABLE_CATEGORY_NAME));o.length&&(this.definitions_.variables="var "+o.join(", ")+";"),this.isInitialized=!0},t.JavaScript.finish=function(n){var o=t.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),o.join("\n\n")+"\n\n\n"+n},t.JavaScript.scrubNakedValue=function(n){return n+";\n"},t.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(n,o,s){var c="";if(!n.outputConnection||!n.outputConnection.targetConnection){var v=n.getCommentText();v&&(v=t.utils.string.wrap(v,this.COMMENT_WRAP-3),c+=this.prefixLines(v+"\n","// "));for(var R=0;R<n.inputList.length;R++)n.inputList[R].type==t.inputTypes.VALUE&&(v=n.inputList[R].connection.targetBlock())&&(v=this.allNestedComments(v))&&(c+=this.prefixLines(v,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),c+o+(s?"":this.blockToCode(n))},t.JavaScript.getAdjusted=function(n,o,s,c,v){s=s||0,v=v||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&s--;var R=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<s?this.valueToCode(n,o,this.ORDER_ADDITION)||R:0>s?this.valueToCode(n,o,this.ORDER_SUBTRACTION)||R:c?this.valueToCode(n,o,this.ORDER_UNARY_NEGATION)||R:this.valueToCode(n,o,v)||R,t.isNumber(n))n=Number(n)+s,c&&(n=-n);else{if(0<s){n=n+" + "+s;var O=this.ORDER_ADDITION}else 0>s&&(n=n+" - "+-s,O=this.ORDER_SUBTRACTION);c&&(n=s?"-("+n+")":"-"+n,O=this.ORDER_UNARY_NEGATION),O=Math.floor(O),v=Math.floor(v),O&&v>=O&&(n="("+n+")")}return n},t.JavaScript.colour={},t.JavaScript.colour_picker=function(n){return[t.JavaScript.quote_(n.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(n){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(n){var o=t.JavaScript.valueToCode(n,"RED",t.JavaScript.ORDER_NONE)||0,s=t.JavaScript.valueToCode(n,"GREEN",t.JavaScript.ORDER_NONE)||0;return n=t.JavaScript.valueToCode(n,"BLUE",t.JavaScript.ORDER_NONE)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+o+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(n){var o=t.JavaScript.valueToCode(n,"COLOUR1",t.JavaScript.ORDER_NONE)||"'#000000'",s=t.JavaScript.valueToCode(n,"COLOUR2",t.JavaScript.ORDER_NONE)||"'#000000'";return n=t.JavaScript.valueToCode(n,"RATIO",t.JavaScript.ORDER_NONE)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+o+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(n){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(n){for(var o=Array(n.itemCount_),s=0;s<n.itemCount_;s++)o[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"null";return["["+o.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(n){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(n,"ITEM",t.JavaScript.ORDER_NONE)||"null")+", "+(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(n){var o="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return o=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+o+"("+s+")",n.workspace.options.oneBasedIndex?[o+" + 1",t.JavaScript.ORDER_ADDITION]:[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(n){var o=n.getFieldValue("MODE")||"GET",s=n.getFieldValue("WHERE")||"FROM_START",c=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==s?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"[]";switch(s){case"FIRST":if("GET"==o)return[c+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[c+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==o)return c+".shift();\n";break;case"LAST":if("GET"==o)return[c+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[c+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==o)return c+".pop();\n";break;case"FROM_START":if(n=t.JavaScript.getAdjusted(n,"AT"),"GET"==o)return[c+"["+n+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[c+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return c+".splice("+n+", 1);\n";break;case"FROM_END":if(n=t.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==o)return[c+".slice("+n+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==o)return[c+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return c+".splice("+n+", 1);";break;case"RANDOM":if(c=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+c+", "+("GET"!=o)+")","GET"==o||"GET_REMOVE"==o)return[c,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return c+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(n){function o(){if(s.match(/^\w+$/))return"";var O=t.JavaScript.nameDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),H="var "+O+" = "+s+";\n";return s=O,H}var s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",c=n.getFieldValue("MODE")||"GET",v=n.getFieldValue("WHERE")||"FROM_START",R=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(v){case"FIRST":if("SET"==c)return s+"[0] = "+R+";\n";if("INSERT"==c)return s+".unshift("+R+");\n";break;case"LAST":if("SET"==c)return(n=o())+(s+"[")+s+".length - 1] = "+R+";\n";if("INSERT"==c)return s+".push("+R+");\n";break;case"FROM_START":if(v=t.JavaScript.getAdjusted(n,"AT"),"SET"==c)return s+"["+v+"] = "+R+";\n";if("INSERT"==c)return s+".splice("+v+", 0, "+R+");\n";break;case"FROM_END":if(v=t.JavaScript.getAdjusted(n,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),n=o(),"SET"==c)return n+(s+"[")+s+".length - "+v+"] = "+R+";\n";if("INSERT"==c)return n+(s+".splice(")+s+".length - "+v+", 0, "+R+");\n";break;case"RANDOM":if(n=o(),n+="var "+(v=t.JavaScript.nameDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+s+".length);\n","SET"==c)return n+(s+"[")+v+"] = "+R+";\n";if("INSERT"==c)return n+(s+".splice(")+v+", 0, "+R+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(n,o,s){return"FIRST"==o?"0":"FROM_END"==o?n+".length - 1 - "+s:"LAST"==o?n+".length - 1":s},t.JavaScript.lists_getSublist=function(n){var o=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",s=n.getFieldValue("WHERE1"),c=n.getFieldValue("WHERE2");if("FIRST"==s&&"LAST"==c)o+=".slice(0)";else if(o.match(/^\w+$/)||"FROM_END"!=s&&"FROM_START"==c){switch(s){case"FROM_START":var v=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":v=o+".length - "+(v=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":v="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(c){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=o+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=o+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}o=o+".slice("+v+", "+n+")"}else{v=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var R=t.JavaScript.lists.getIndex_,O={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};o=t.JavaScript.provideFunction_("subsequence"+O[s]+O[c],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==s||"FROM_START"==s?", at1":"")+("FROM_END"==c||"FROM_START"==c?", at2":"")+") {","  var start = "+R("sequence",s,"at1")+";","  var end = "+R("sequence",c,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+o+("FROM_END"==s||"FROM_START"==s?", "+v:"")+("FROM_END"==c||"FROM_START"==c?", "+n:"")+")"}return[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(n){var o=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",s="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[o+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+s+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(n){var o=t.JavaScript.valueToCode(n,"INPUT",t.JavaScript.ORDER_MEMBER),s=t.JavaScript.valueToCode(n,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))o||(o="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);o||(o="[]"),n="join"}return[o+"."+n+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(n){return[(t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(n){var o=0,s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n));do{var c=t.JavaScript.valueToCode(n,"IF"+o,t.JavaScript.ORDER_NONE)||"false",v=t.JavaScript.statementToCode(n,"DO"+o);t.JavaScript.STATEMENT_SUFFIX&&(v=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+v),s+=(0<o?" else ":"")+"if ("+c+") {\n"+v+"}",++o}while(n.getInput("IF"+o));return(n.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(v=t.JavaScript.statementToCode(n,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(v=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+v),s+=" else {\n"+v+"}"),s+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(n){var o={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],s="=="==o||"!="==o?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(n,"A",s)||"0")+" "+o+" "+(n=t.JavaScript.valueToCode(n,"B",s)||"0"),s]},t.JavaScript.logic_operation=function(n){var o="AND"==n.getFieldValue("OP")?"&&":"||",s="&&"==o?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,c=t.JavaScript.valueToCode(n,"A",s);if(n=t.JavaScript.valueToCode(n,"B",s),c||n){var v="&&"==o?"true":"false";c||(c=v),n||(n=v)}else n=c="false";return[c+" "+o+" "+n,s]},t.JavaScript.logic_negate=function(n){var o=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(n,"BOOL",o)||"true"),o]},t.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(n){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(n){return[(t.JavaScript.valueToCode(n,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(n,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=t.JavaScript.valueToCode(n,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(n){var o=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):t.JavaScript.valueToCode(n,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",s=t.JavaScript.statementToCode(n,"DO");s=t.JavaScript.addLoopTrap(s,n),n="";var c=t.JavaScript.nameDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),v=o;return o.match(/^\w+$/)||t.isNumber(o)||(n+="var "+(v=t.JavaScript.nameDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+o+";\n"),n+"for (var "+c+" = 0; "+c+" < "+v+"; "+c+"++) {\n"+s+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(n){var o="UNTIL"==n.getFieldValue("MODE"),s=t.JavaScript.valueToCode(n,"BOOL",o?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",c=t.JavaScript.statementToCode(n,"DO");return o&&(s="!"+s),"while ("+s+") {\n"+(c=t.JavaScript.addLoopTrap(c,n))+"}\n"},t.JavaScript.controls_for=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",c=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",v=t.JavaScript.valueToCode(n,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",R=t.JavaScript.statementToCode(n,"DO");if(R=t.JavaScript.addLoopTrap(R,n),t.isNumber(s)&&t.isNumber(c)&&t.isNumber(v)){var O=Number(s)<=Number(c);n="for ("+o+" = "+s+"; "+o+(O?" <= ":" >= ")+c+"; "+o,n=(1==(o=Math.abs(Number(v)))?n+(O?"++":"--"):n+(O?" += ":" -= ")+o)+") {\n"+R+"}\n"}else n="",O=s,s.match(/^\w+$/)||t.isNumber(s)||(n+="var "+(O=t.JavaScript.nameDB_.getDistinctName(o+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),s=c,c.match(/^\w+$/)||t.isNumber(c)||(n+="var "+(s=t.JavaScript.nameDB_.getDistinctName(o+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+c+";\n"),n+="var "+(c=t.JavaScript.nameDB_.getDistinctName(o+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",n=(n=t.isNumber(v)?n+(Math.abs(v)+";\n"):n+"Math.abs("+v+");\n")+"if ("+O+" > "+s+") {\n"+(t.JavaScript.INDENT+c)+" = -"+c+";\n",n+="}\n",n+="for ("+o+" = "+O+"; "+c+" >= 0 ? "+o+" <= "+s+" : "+o+" >= "+s+"; "+o+" += "+c+") {\n"+R+"}\n";return n},t.JavaScript.controls_forEach=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",c=t.JavaScript.statementToCode(n,"DO");c=t.JavaScript.addLoopTrap(c,n),n="";var v=s;return s.match(/^\w+$/)||(n+="var "+(v=t.JavaScript.nameDB_.getDistinctName(o+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),n+"for (var "+(s=t.JavaScript.nameDB_.getDistinctName(o+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+v+") {\n"+(c=t.JavaScript.INDENT+o+" = "+v+"["+s+"];\n"+c)+"}\n"},t.JavaScript.controls_flow_statements=function(n){var o="";if(t.JavaScript.STATEMENT_PREFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),t.JavaScript.STATEMENT_PREFIX){var s=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);s&&!s.suppressPrefixSuffix&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,s))}switch(n.getFieldValue("FLOW")){case"BREAK":return o+"break;\n";case"CONTINUE":return o+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(n){var o={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],s=o[0],c=t.JavaScript.valueToCode(n,"A",o=o[1])||"0";return n=t.JavaScript.valueToCode(n,"B",o)||"0",s?[c+s+n,o]:["Math.pow("+c+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(n){var o=n.getFieldValue("OP");if("NEG"==o)return"-"==(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,t.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==o||"COS"==o||"TAN"==o?t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0",o){case"ABS":var s="Math.abs("+n+")";break;case"ROOT":s="Math.sqrt("+n+")";break;case"LN":s="Math.log("+n+")";break;case"EXP":s="Math.exp("+n+")";break;case"POW10":s="Math.pow(10,"+n+")";break;case"ROUND":s="Math.round("+n+")";break;case"ROUNDUP":s="Math.ceil("+n+")";break;case"ROUNDDOWN":s="Math.floor("+n+")";break;case"SIN":s="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":s="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":s="Math.tan("+n+" / 180 * Math.PI)"}if(s)return[s,t.JavaScript.ORDER_FUNCTION_CALL];switch(o){case"LOG10":s="Math.log("+n+") / Math.log(10)";break;case"ASIN":s="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":s="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":s="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+o)}return[s,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(n){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(n){var o=t.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",s=n.getFieldValue("PROPERTY");if("PRIME"==s)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+o+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(s){case"EVEN":var c=o+" % 2 == 0";break;case"ODD":c=o+" % 2 == 1";break;case"WHOLE":c=o+" % 1 == 0";break;case"POSITIVE":c=o+" > 0";break;case"NEGATIVE":c=o+" < 0";break;case"DIVISIBLE_BY":c=o+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[c,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(n){var o=t.JavaScript.valueToCode(n,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(n=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+o+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(n){var o=n.getFieldValue("OP");switch(o){case"SUM":n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(o=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(o=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(o=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(o=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(o=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+o)}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(n){return[(t.JavaScript.valueToCode(n,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"0")+", "+(t.JavaScript.valueToCode(n,"LOW",t.JavaScript.ORDER_NONE)||"0")+"), "+(n=t.JavaScript.valueToCode(n,"HIGH",t.JavaScript.ORDER_NONE)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(n){var o=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"0";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+o+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(n){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(n){var o=t.JavaScript.valueToCode(n,"X",t.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(n,"Y",t.JavaScript.ORDER_NONE)||"0")+", "+o+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),s&&(s=t.JavaScript.prefixLines(s,t.JavaScript.INDENT));var c="";t.JavaScript.INFINITE_LOOP_TRAP&&(c=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,n),t.JavaScript.INDENT));var v=t.JavaScript.statementToCode(n,"STACK"),R=t.JavaScript.valueToCode(n,"RETURN",t.JavaScript.ORDER_NONE)||"",O="";v&&R&&(O=s),R&&(R=t.JavaScript.INDENT+"return "+R+";\n");for(var H=[],V=n.getVars(),G=0;G<V.length;G++)H[G]=t.JavaScript.nameDB_.getName(V[G],t.VARIABLE_CATEGORY_NAME);return s="function "+o+"("+H.join(", ")+") {\n"+s+c+v+O+R+"}",s=t.JavaScript.scrub_(n,s),t.JavaScript.definitions_["%"+o]=s,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(n){for(var o=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s=[],c=n.getVars(),v=0;v<c.length;v++)s[v]=t.JavaScript.valueToCode(n,"ARG"+v,t.JavaScript.ORDER_NONE)||"null";return[o+"("+s.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(n){return t.JavaScript.procedures_callreturn(n)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(n){var o="if ("+(t.JavaScript.valueToCode(n,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)),n.hasReturnValue_?(n=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"null",o+=t.JavaScript.INDENT+"return "+n+";\n"):o+=t.JavaScript.INDENT+"return;\n",o+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(n){return[t.JavaScript.quote_(n.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(n){var o=-1!=(n=t.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?t.JavaScript.ORDER_ADDITION:t.JavaScript.ORDER_ATOMIC;return[n,o]},t.JavaScript.text.forceString_=function(n){return t.JavaScript.text.forceString_.strRegExp.test(n)?[n,t.JavaScript.ORDER_ATOMIC]:["String("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return n=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''",t.JavaScript.text.forceString_(n);case 2:var o=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"ADD1",t.JavaScript.ORDER_NONE)||"''",[n=t.JavaScript.text.forceString_(o)[0]+" + "+t.JavaScript.text.forceString_(n)[0],t.JavaScript.ORDER_ADDITION];default:o=Array(n.itemCount_);for(var s=0;s<n.itemCount_;s++)o[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"''";return[n="["+o.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return n=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",o+" += "+t.JavaScript.text.forceString_(n)[0]+";\n"},t.JavaScript.text_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(n){var o="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return o=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+o+"("+s+")",n.workspace.options.oneBasedIndex?[o+" + 1",t.JavaScript.ORDER_ADDITION]:[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(n){var o=n.getFieldValue("WHERE")||"FROM_START",s=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==o?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(o){case"FIRST":return[s+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[s+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[s+".charAt("+(n=t.JavaScript.getAdjusted(n,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[s+".slice("+(n=t.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(n,o,s){return"FIRST"==o?"0":"FROM_END"==o?n+".length - 1 - "+s:"LAST"==o?n+".length - 1":s},t.JavaScript.text_getSubstring=function(n){var o=n.getFieldValue("WHERE1"),s=n.getFieldValue("WHERE2"),c="FROM_END"!=o&&"LAST"!=o&&"FROM_END"!=s&&"LAST"!=s,v=t.JavaScript.valueToCode(n,"STRING",c?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''";if("FIRST"==o&&"LAST"==s)return[v,t.JavaScript.ORDER_NONE];if(v.match(/^'?\w+'?$/)||c){switch(o){case"FROM_START":c=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":c=v+".length - "+(c=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":c="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(s){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=v+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=v+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}o=v+".slice("+c+", "+n+")"}else{c=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var R=t.JavaScript.text.getIndex_,O={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};o=t.JavaScript.provideFunction_("subsequence"+O[o]+O[s],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==o||"FROM_START"==o?", at1":"")+("FROM_END"==s||"FROM_START"==s?", at2":"")+") {","  var start = "+R("sequence",o,"at1")+";","  var end = "+R("sequence",s,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+v+("FROM_END"==o||"FROM_START"==o?", "+c:"")+("FROM_END"==s||"FROM_START"==s?", "+n:"")+")"}return[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(n){var o={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=t.JavaScript.valueToCode(n,"TEXT",o?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[o?n+o:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(n){var o={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(n){return"window.alert("+(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(n){var o="window.prompt("+(n.getField("TEXT")?t.JavaScript.quote_(n.getFieldValue("TEXT")):t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(o="Number("+o+")"),[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(n){var o=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+o+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_replace=function(n){var o=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+o+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_reverse=function(n){return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.variables={},t.JavaScript.variables_get=function(n){return[t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(n){var o=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+o+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript}.apply(W,p))&&(L.exports=e)},63266:function(L,W,m){var p,e;p=[m(68210)],void 0!==(e=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg}.apply(W,p))&&(L.exports=e)},70697:function(L){L.exports=function(){"use strict";function W(pt){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Tt){return typeof Tt}:function(Tt){return Tt&&"function"==typeof Symbol&&Tt.constructor===Symbol&&Tt!==Symbol.prototype?"symbol":typeof Tt})(pt)}var pt,y=(pt={},function(Ft){var ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return pt[ne]=pt[ne]||0,void 0===Ft[ne]&&(Ft[ne]=pt[ne]++),Ft[ne]});function p(pt,Tt,Ft){if(pt)for(var ne=0,_e=pt.length;ne<_e;ne++)Tt(pt[ne],ne);"function"==typeof Ft&&Ft()}var e=new function(){var Tt="introjs_event";this._id=function(Ft,ne,_e,We){return ne+y(_e)+(We?"_".concat(y(We)):"")},this.on=function(Ft,ne,_e,We,Se){var He=this._id.apply(this,arguments),hi=function(Ti){return _e.call(We||Ft,Ti||window.event)};"addEventListener"in Ft?Ft.addEventListener(ne,hi,Se):"attachEvent"in Ft&&Ft.attachEvent("on".concat(ne),hi),Ft[Tt]=Ft[Tt]||{},Ft[Tt][He]=hi},this.off=function(Ft,ne,_e,We,Se){var He=this._id.apply(this,arguments),hi=Ft[Tt]&&Ft[Tt][He];!hi||("removeEventListener"in Ft?Ft.removeEventListener(ne,hi,Se):"detachEvent"in Ft&&Ft.detachEvent("on".concat(ne),hi),Ft[Tt][He]=null)}},t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(pt,Tt){return pt(Tt={exports:{}},Tt.exports),Tt.exports}var pe,we,o=function(pt){return pt&&pt.Math==Math&&pt},s=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||function(){return this}()||Function("return this")(),c=function(pt){try{return!!pt()}catch(Tt){return!0}},v=!c(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),R=Function.prototype.call,O=R.bind?R.bind(R):function(){return R.apply(R,arguments)},H={}.propertyIsEnumerable,V=Object.getOwnPropertyDescriptor,vt={f:V&&!H.call({1:2},1)?function(Tt){var Ft=V(this,Tt);return!!Ft&&Ft.enumerable}:H},it=function(pt,Tt){return{enumerable:!(1&pt),configurable:!(2&pt),writable:!(4&pt),value:Tt}},ot=Function.prototype,wt=ot.bind,ct=ot.call,yt=wt&&wt.bind(ct),lt=wt?function(pt){return pt&&yt(ct,pt)}:function(pt){return pt&&function(){return ct.apply(pt,arguments)}},at=lt({}.toString),bt=lt("".slice),tt=function(pt){return bt(at(pt),8,-1)},Rt=s.Object,mt=lt("".split),dt=c(function(){return!Rt("z").propertyIsEnumerable(0)})?function(pt){return"String"==tt(pt)?mt(pt,""):Rt(pt)}:Rt,nt=s.TypeError,st=function(pt){if(null==pt)throw nt("Can't call method on "+pt);return pt},Gt=function(pt){return dt(st(pt))},It=function(pt){return"function"==typeof pt},Vt=function(pt){return"object"==typeof pt?null!==pt:It(pt)},Ie=function(pt){return It(pt)?pt:void 0},Ze=function(pt,Tt){return arguments.length<2?Ie(s[pt]):s[pt]&&s[pt][Tt]},me=lt({}.isPrototypeOf),Be=Ze("navigator","userAgent")||"",Ge=s.process,si=s.Deno,Qe=Ge&&Ge.versions||si&&si.version,Ne=Qe&&Qe.v8;Ne&&(we=(pe=Ne.split("."))[0]>0&&pe[0]<4?1:+(pe[0]+pe[1])),!we&&Be&&(!(pe=Be.match(/Edge\/(\d+)/))||pe[1]>=74)&&(pe=Be.match(/Chrome\/(\d+)/))&&(we=+pe[1]);var Ve=we,ui=!!Object.getOwnPropertySymbols&&!c(function(){var pt=Symbol();return!String(pt)||!(Object(pt)instanceof Symbol)||!Symbol.sham&&Ve&&Ve<41}),Ke=ui&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,be=s.Object,Xt=Ke?function(pt){return"symbol"==typeof pt}:function(pt){var Tt=Ze("Symbol");return It(Tt)&&me(Tt.prototype,be(pt))},re=s.String,Me=function(pt){try{return re(pt)}catch(Tt){return"Object"}},vi=s.TypeError,ie=function(pt){if(It(pt))return pt;throw vi(Me(pt)+" is not a function")},Ut=function(pt,Tt){var Ft=pt[Tt];return null==Ft?void 0:ie(Ft)},Ht=s.TypeError,Yt=Object.defineProperty,ue=function(pt,Tt){try{Yt(s,pt,{value:Tt,configurable:!0,writable:!0})}catch(Ft){s[pt]=Tt}return Tt},le="__core-js_shared__",Nt=s[le]||ue(le,{}),ke=n(function(pt){(pt.exports=function(Tt,Ft){return Nt[Tt]||(Nt[Tt]=void 0!==Ft?Ft:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),je=s.Object,li=function(pt){return je(st(pt))},ri=lt({}.hasOwnProperty),mi=Object.hasOwn||function(Tt,Ft){return ri(li(Tt),Ft)},Bi=0,pi=Math.random(),bi=lt(1..toString),yi=function(pt){return"Symbol("+(void 0===pt?"":pt)+")_"+bi(++Bi+pi,36)},$e=ke("wks"),ei=s.Symbol,ae=ei&&ei.for,Pe=Ke?ei:ei&&ei.withoutSetter||yi,oi=function(pt){if(!mi($e,pt)||!ui&&"string"!=typeof $e[pt]){var Tt="Symbol."+pt;$e[pt]=ui&&mi(ei,pt)?ei[pt]:Ke&&ae?ae(Tt):Pe(Tt)}return $e[pt]},Te=s.TypeError,Oe=oi("toPrimitive"),se=function(pt,Tt){if(!Vt(pt)||Xt(pt))return pt;var ne,Ft=Ut(pt,Oe);if(Ft){if(void 0===Tt&&(Tt="default"),ne=O(Ft,pt,Tt),!Vt(ne)||Xt(ne))return ne;throw Te("Can't convert object to primitive value")}return void 0===Tt&&(Tt="number"),function(pt,Tt){var Ft,ne;if("string"===Tt&&It(Ft=pt.toString)&&!Vt(ne=O(Ft,pt))||It(Ft=pt.valueOf)&&!Vt(ne=O(Ft,pt))||"string"!==Tt&&It(Ft=pt.toString)&&!Vt(ne=O(Ft,pt)))return ne;throw Ht("Can't convert object to primitive value")}(pt,Tt)},Jt=function(pt){var Tt=se(pt,"string");return Xt(Tt)?Tt:Tt+""},te=s.document,qt=Vt(te)&&Vt(te.createElement),Ee=function(pt){return qt?te.createElement(pt):{}},ti=!v&&!c(function(){return 7!=Object.defineProperty(Ee("div"),"a",{get:function(){return 7}}).a}),Pi=Object.getOwnPropertyDescriptor,bn={f:v?Pi:function(Tt,Ft){if(Tt=Gt(Tt),Ft=Jt(Ft),ti)try{return Pi(Tt,Ft)}catch(ne){}if(mi(Tt,Ft))return it(!O(vt.f,Tt,Ft),Tt[Ft])}},Ln=s.String,Xe=s.TypeError,Re=function(pt){if(Vt(pt))return pt;throw Xe(Ln(pt)+" is not an object")},fe=s.TypeError,ze=Object.defineProperty,Xi={f:v?ze:function(Tt,Ft,ne){if(Re(Tt),Ft=Jt(Ft),Re(ne),ti)try{return ze(Tt,Ft,ne)}catch(_e){}if("get"in ne||"set"in ne)throw fe("Accessors not supported");return"value"in ne&&(Tt[Ft]=ne.value),Tt}},hn=v?function(pt,Tt,Ft){return Xi.f(pt,Tt,it(1,Ft))}:function(pt,Tt,Ft){return pt[Tt]=Ft,pt},Mn=lt(Function.toString);It(Nt.inspectSource)||(Nt.inspectSource=function(pt){return Mn(pt)});var Ji,Wn,Ro,Nn=Nt.inspectSource,mr=s.WeakMap,ar=It(mr)&&/native code/.test(Nn(mr)),Ur=ke("keys"),tr=function(pt){return Ur[pt]||(Ur[pt]=yi(pt))},eo={},Ar="Object already initialized",Pn=s.TypeError;if(ar||Nt.state){var Do=Nt.state||(Nt.state=new(0,s.WeakMap)),Bn=lt(Do.get),Vo=lt(Do.has),qr=lt(Do.set);Ji=function(pt,Tt){if(Vo(Do,pt))throw new Pn(Ar);return Tt.facade=pt,qr(Do,pt,Tt),Tt},Wn=function(pt){return Bn(Do,pt)||{}},Ro=function(pt){return Vo(Do,pt)}}else{var ln=tr("state");eo[ln]=!0,Ji=function(pt,Tt){if(mi(pt,ln))throw new Pn(Ar);return Tt.facade=pt,hn(pt,ln,Tt),Tt},Wn=function(pt){return mi(pt,ln)?pt[ln]:{}},Ro=function(pt){return mi(pt,ln)}}var hr={set:Ji,get:Wn,has:Ro,enforce:function(pt){return Ro(pt)?Wn(pt):Ji(pt,{})},getterFor:function(pt){return function(Tt){var Ft;if(!Vt(Tt)||(Ft=Wn(Tt)).type!==pt)throw Pn("Incompatible receiver, "+pt+" required");return Ft}}},Oo=Function.prototype,ts=v&&Object.getOwnPropertyDescriptor,er=mi(Oo,"name"),Jo={EXISTS:er,PROPER:er&&"something"===function(){}.name,CONFIGURABLE:er&&(!v||v&&ts(Oo,"name").configurable)},qn=n(function(pt){var Tt=Jo.CONFIGURABLE,Ft=hr.get,ne=hr.enforce,_e=String(String).split("String");(pt.exports=function(We,Se,He,hi){var Sn,gi=!!hi&&!!hi.unsafe,Ti=!!hi&&!!hi.enumerable,yn=!!hi&&!!hi.noTargetGet,rn=hi&&void 0!==hi.name?hi.name:Se;It(He)&&("Symbol("===String(rn).slice(0,7)&&(rn="["+String(rn).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!mi(He,"name")||Tt&&He.name!==rn)&&hn(He,"name",rn),(Sn=ne(He)).source||(Sn.source=_e.join("string"==typeof rn?rn:""))),We!==s?(gi?!yn&&We[Se]&&(Ti=!0):delete We[Se],Ti?We[Se]=He:hn(We,Se,He)):Ti?We[Se]=He:ue(Se,He)})(Function.prototype,"toString",function(){return It(this)&&Ft(this).source||Nn(this)})}),un=Math.ceil,dr=Math.floor,bo=function(pt){var Tt=+pt;return Tt!=Tt||0===Tt?0:(Tt>0?dr:un)(Tt)},ao=Math.max,pr=Math.min,En=function(pt,Tt){var Ft=bo(pt);return Ft<0?ao(Ft+Tt,0):pr(Ft,Tt)},es=Math.min,Uo=function(pt){return pt>0?es(bo(pt),9007199254740991):0},ho=function(pt){return Uo(pt.length)},$o=function(pt){return function(Tt,Ft,ne){var He,_e=Gt(Tt),We=ho(_e),Se=En(ne,We);if(pt&&Ft!=Ft){for(;We>Se;)if((He=_e[Se++])!=He)return!0}else for(;We>Se;Se++)if((pt||Se in _e)&&_e[Se]===Ft)return pt||Se||0;return!pt&&-1}},sa={includes:$o(!0),indexOf:$o(!1)},Lo=sa.indexOf,_r=lt([].push),oo=function(pt,Tt){var We,Ft=Gt(pt),ne=0,_e=[];for(We in Ft)!mi(eo,We)&&mi(Ft,We)&&_r(_e,We);for(;Tt.length>ne;)mi(Ft,We=Tt[ne++])&&(~Lo(_e,We)||_r(_e,We));return _e},xo=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],us=xo.concat("length","prototype"),Gr={f:Object.getOwnPropertyNames||function(Tt){return oo(Tt,us)}},va={f:Object.getOwnPropertySymbols},ds=lt([].concat),Ts=Ze("Reflect","ownKeys")||function(Tt){var Ft=Gr.f(Re(Tt)),ne=va.f;return ne?ds(Ft,ne(Tt)):Ft},Bs=function(pt,Tt){for(var Ft=Ts(Tt),ne=Xi.f,_e=bn.f,We=0;We<Ft.length;We++){var Se=Ft[We];mi(pt,Se)||ne(pt,Se,_e(Tt,Se))}},is=/#|\.prototype\./,vr=function(pt,Tt){var Ft=Zs[$s(pt)];return Ft==Un||Ft!=Zo&&(It(Tt)?c(Tt):!!Tt)},$s=vr.normalize=function(pt){return String(pt).replace(is,".").toLowerCase()},Zs=vr.data={},Zo=vr.NATIVE="N",Un=vr.POLYFILL="P",ko=vr,lr=bn.f,br=function(pt,Tt){var Se,He,hi,gi,Ti,Ft=pt.target,ne=pt.global,_e=pt.stat;if(Se=ne?s:_e?s[Ft]||ue(Ft,{}):(s[Ft]||{}).prototype)for(He in Tt){if(gi=Tt[He],hi=pt.noTargetGet?(Ti=lr(Se,He))&&Ti.value:Se[He],!ko(ne?He:Ft+(_e?".":"#")+He,pt.forced)&&void 0!==hi){if(typeof gi==typeof hi)continue;Bs(gi,hi)}(pt.sham||hi&&hi.sham)&&hn(gi,"sham",!0),qn(Se,He,gi,pt)}},ps={};ps[oi("toStringTag")]="z";var ni,No="[object z]"===String(ps),yr=oi("toStringTag"),Wr=s.Object,nr="Arguments"==tt(function(){return arguments}()),mo=No?tt:function(pt){var Tt,Ft,ne;return void 0===pt?"Undefined":null===pt?"Null":"string"==typeof(Ft=function(pt,Tt){try{return pt[Tt]}catch(Ft){}}(Tt=Wr(pt),yr))?Ft:nr?tt(Tt):"Object"==(ne=tt(Tt))&&It(Tt.callee)?"Arguments":ne},kr=s.String,Jn=function(pt){if("Symbol"===mo(pt))throw TypeError("Cannot convert a Symbol value to a string");return kr(pt)},fr=function(){var pt=Re(this),Tt="";return pt.global&&(Tt+="g"),pt.ignoreCase&&(Tt+="i"),pt.multiline&&(Tt+="m"),pt.dotAll&&(Tt+="s"),pt.unicode&&(Tt+="u"),pt.sticky&&(Tt+="y"),Tt},cr=s.RegExp,Qs=c(function(){var pt=cr("a","y");return pt.lastIndex=2,null!=pt.exec("abcd")}),Cs=c(function(){var pt=cr("^r","gy");return pt.lastIndex=2,null!=pt.exec("str")}),Po={UNSUPPORTED_Y:Qs,BROKEN_CARET:Cs},Ss=Object.keys||function(Tt){return oo(Tt,xo)},Lr=v?Object.defineProperties:function(Tt,Ft){Re(Tt);for(var He,ne=Gt(Ft),_e=Ss(Ft),We=_e.length,Se=0;We>Se;)Xi.f(Tt,He=_e[Se++],ne[He]);return Tt},Hs=Ze("document","documentElement"),Nr="prototype",Et="script",K=tr("IE_PROTO"),F=function(){},j=function(pt){return"<script>"+pt+"</"+Et+">"},St=function(pt){pt.write(j("")),pt.close();var Tt=pt.parentWindow.Object;return pt=null,Tt},ki=function(){try{ni=new ActiveXObject("htmlfile")}catch(Tt){}ki="undefined"!=typeof document?document.domain&&ni?St(ni):function(){var Ft,pt=Ee("iframe");return pt.style.display="none",Hs.appendChild(pt),pt.src=String("javascript:"),(Ft=pt.contentWindow.document).open(),Ft.write(j("document.F=Object")),Ft.close(),Ft.F}():St(ni);for(var pt=xo.length;pt--;)delete ki[Nr][xo[pt]];return ki()};eo[K]=!0;var cn=Object.create||function(Tt,Ft){var ne;return null!==Tt?(F[Nr]=Re(Tt),ne=new F,F[Nr]=null,ne[K]=Tt):ne=ki(),void 0===Ft?ne:Lr(ne,Ft)},Yn=s.RegExp,to=c(function(){var pt=Yn(".","s");return!(pt.dotAll&&pt.exec("\n")&&"s"===pt.flags)}),jn=s.RegExp,yo=c(function(){var pt=jn("(?<a>b)","g");return"b"!==pt.exec("b").groups.a||"bc"!=="b".replace(pt,"$<a>c")}),lo=hr.get,Io=ke("native-string-replace",String.prototype.replace),fn=RegExp.prototype.exec,fs=fn,ws=lt("".charAt),Rr=lt("".indexOf),Vs=lt("".replace),Er=lt("".slice),qs=function(){var pt=/a/,Tt=/b*/g;return O(fn,pt,"a"),O(fn,Tt,"a"),0!==pt.lastIndex||0!==Tt.lastIndex}(),ba=Po.UNSUPPORTED_Y||Po.BROKEN_CARET,Di=void 0!==/()??/.exec("")[1];(qs||Di||ba||to||yo)&&(fs=function(Tt){var Se,He,hi,gi,Ti,yn,rn,Ft=this,ne=lo(Ft),_e=Jn(Tt),We=ne.raw;if(We)return We.lastIndex=Ft.lastIndex,Se=O(fs,We,_e),Ft.lastIndex=We.lastIndex,Se;var Sn=ne.groups,Xo=ba&&Ft.sticky,To=O(fr,Ft),fo=Ft.source,Co=0,qo=_e;if(Xo&&(To=Vs(To,"y",""),-1===Rr(To,"g")&&(To+="g"),qo=Er(_e,Ft.lastIndex),Ft.lastIndex>0&&(!Ft.multiline||Ft.multiline&&"\n"!==ws(_e,Ft.lastIndex-1))&&(fo="(?: "+fo+")",qo=" "+qo,Co++),He=new RegExp("^(?:"+fo+")",To)),Di&&(He=new RegExp("^"+fo+"$(?!\\s)",To)),qs&&(hi=Ft.lastIndex),gi=O(fn,Xo?He:Ft,qo),Xo?gi?(gi.input=Er(gi.input,Co),gi[0]=Er(gi[0],Co),gi.index=Ft.lastIndex,Ft.lastIndex+=gi[0].length):Ft.lastIndex=0:qs&&gi&&(Ft.lastIndex=Ft.global?gi.index+gi[0].length:hi),Di&&gi&&gi.length>1&&O(Io,gi[0],He,function(){for(Ti=1;Ti<arguments.length-2;Ti++)void 0===arguments[Ti]&&(gi[Ti]=void 0)}),gi&&Sn)for(gi.groups=yn=cn(null),Ti=0;Ti<Sn.length;Ti++)yn[(rn=Sn[Ti])[0]]=gi[rn[1]];return gi});var Bt=fs;br({target:"RegExp",proto:!0,forced:/./.exec!==Bt},{exec:Bt});var U=oi("species"),X=RegExp.prototype,gt=function(pt,Tt,Ft,ne){var _e=oi(pt),We=!c(function(){var gi={};return gi[_e]=function(){return 7},7!=""[pt](gi)}),Se=We&&!c(function(){var gi=!1,Ti=/a/;return"split"===pt&&((Ti={}).constructor={},Ti.constructor[U]=function(){return Ti},Ti.flags="",Ti[_e]=/./[_e]),Ti.exec=function(){return gi=!0,null},Ti[_e](""),!gi});if(!We||!Se||Ft){var He=lt(/./[_e]),hi=Tt(_e,""[pt],function(gi,Ti,yn,rn,Sn){var Xo=lt(gi),To=Ti.exec;return To===Bt||To===X.exec?We&&!Sn?{done:!0,value:He(Ti,yn,rn)}:{done:!0,value:Xo(yn,Ti,rn)}:{done:!1}});qn(String.prototype,pt,hi[0]),qn(X,_e,hi[1])}ne&&hn(X[_e],"sham",!0)},Pt=lt("".charAt),$t=lt("".charCodeAt),Ce=lt("".slice),Ae=function(pt){return function(Tt,Ft){var Se,He,ne=Jn(st(Tt)),_e=bo(Ft),We=ne.length;return _e<0||_e>=We?pt?"":void 0:(Se=$t(ne,_e))<55296||Se>56319||_e+1===We||(He=$t(ne,_e+1))<56320||He>57343?pt?Pt(ne,_e):Se:pt?Ce(ne,_e,_e+2):He-56320+(Se-55296<<10)+65536}},Ei=(Ae(!1),Ae(!0)),Ni=function(pt,Tt,Ft){return Tt+(Ft?Ei(pt,Tt).length:1)},Gi=s.TypeError,dn=function(pt,Tt){var Ft=pt.exec;if(It(Ft)){var ne=O(Ft,pt,Tt);return null!==ne&&Re(ne),ne}if("RegExp"===tt(pt))return O(Bt,pt,Tt);throw Gi("RegExp#exec called on incompatible receiver")};gt("match",function(pt,Tt,Ft){return[function(_e){var We=st(this),Se=null==_e?void 0:Ut(_e,pt);return Se?O(Se,_e,We):new RegExp(_e)[pt](Jn(We))},function(ne){var _e=Re(this),We=Jn(ne),Se=Ft(Tt,_e,We);if(Se.done)return Se.value;if(!_e.global)return dn(_e,We);var He=_e.unicode;_e.lastIndex=0;for(var Ti,hi=[],gi=0;null!==(Ti=dn(_e,We));){var yn=Jn(Ti[0]);hi[gi]=yn,""===yn&&(_e.lastIndex=Ni(We,Uo(_e.lastIndex),He)),gi++}return 0===gi?null:hi}]});var Tn=Array.isArray||function(Tt){return"Array"==tt(Tt)},on=function(pt,Tt,Ft){var ne=Jt(Tt);ne in pt?Xi.f(pt,ne,it(0,Ft)):pt[ne]=Ft},_n=function(){},Cn=[],Qn=Ze("Reflect","construct"),po=/^\s*(?:class|function)\b/,or=lt(po.exec),Wo=!po.exec(_n),jr=function(pt){if(!It(pt))return!1;try{return Qn(_n,Cn,pt),!0}catch(Tt){return!1}},jo=!Qn||c(function(){var pt;return jr(jr.call)||!jr(Object)||!jr(function(){pt=!0})||pt})?function(pt){if(!It(pt))return!1;switch(mo(pt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Wo||!!or(po,Nn(pt))}:jr,Us=oi("species"),ns=s.Array,Rs=function(pt,Tt){return new(function(pt){var Tt;return Tn(pt)&&(jo(Tt=pt.constructor)&&(Tt===ns||Tn(Tt.prototype))||Vt(Tt)&&null===(Tt=Tt[Us]))&&(Tt=void 0),void 0===Tt?ns:Tt}(pt))(0===Tt?0:Tt)},zo=oi("species"),os=function(pt){return Ve>=51||!c(function(){var Tt=[];return(Tt.constructor={})[zo]=function(){return{foo:1}},1!==Tt[pt](Boolean).foo})},ya=oi("isConcatSpreadable"),Gs=9007199254740991,ji="Maximum allowed index exceeded",pn=s.TypeError,nn=Ve>=51||!c(function(){var pt=[];return pt[ya]=!1,pt.concat()[0]!==pt}),An=os("concat"),On=function(pt){if(!Vt(pt))return!1;var Tt=pt[ya];return void 0!==Tt?!!Tt:Tn(pt)};br({target:"Array",proto:!0,forced:!nn||!An},{concat:function(Tt){var We,Se,He,hi,gi,Ft=li(this),ne=Rs(Ft,0),_e=0;for(We=-1,He=arguments.length;We<He;We++)if(On(gi=-1===We?Ft:arguments[We])){if(_e+(hi=ho(gi))>Gs)throw pn(ji);for(Se=0;Se<hi;Se++,_e++)Se in gi&&on(ne,_e,gi[Se])}else{if(_e>=Gs)throw pn(ji);on(ne,_e++,gi)}return ne.length=_e,ne}}),No||qn(Object.prototype,"toString",No?{}.toString:function(){return"[object "+mo(this)+"]"},{unsafe:!0});var Fr=Jo.PROPER,kn="toString",Ga=RegExp.prototype,Tr=Ga[kn],Ds=lt(fr);(c(function(){return"/a/b"!=Tr.call({source:"a",flags:"b"})})||Fr&&Tr.name!=kn)&&qn(RegExp.prototype,kn,function(){var Tt=Re(this),Ft=Jn(Tt.source),ne=Tt.flags;return"/"+Ft+"/"+Jn(void 0===ne&&me(Ga,Tt)&&!("flags"in Ga)?Ds(Tt):ne)},{unsafe:!0});var Ws=Function.prototype,gl=Ws.apply,ta=Ws.call,aa="object"==typeof Reflect&&Reflect.apply||(Ws.bind?ta.bind(gl):function(){return ta.apply(gl,arguments)}),Ra=oi("match"),tl=function(pt){var Tt;return Vt(pt)&&(void 0!==(Tt=pt[Ra])?!!Tt:"RegExp"==tt(pt))},el=s.TypeError,ml=oi("species"),uc=function(pt,Tt){var ne,Ft=Re(pt).constructor;return void 0===Ft||null==(ne=Re(Ft)[ml])?Tt:function(pt){if(jo(pt))return pt;throw el(Me(pt)+" is not a constructor")}(ne)},js=lt([].slice),la=Po.UNSUPPORTED_Y,Da=4294967295,il=Math.min,rs=[].push,Wa=lt(/./.exec),ca=lt(rs),Kr=lt("".slice),Ia=!c(function(){var pt=/(?:)/,Tt=pt.exec;pt.exec=function(){return Tt.apply(this,arguments)};var Ft="ab".split(pt);return 2!==Ft.length||"a"!==Ft[0]||"b"!==Ft[1]});function ss(pt,Tt){if(pt instanceof SVGElement){var Ft=pt.getAttribute("class")||"";Ft.match(Tt)||pt.setAttribute("class","".concat(Ft," ").concat(Tt))}else void 0!==pt.classList?p(Tt.split(" "),function(_e){pt.classList.add(_e)}):pt.className.match(Tt)||(pt.className+=" ".concat(Tt))}function ua(pt,Tt){var Ft="";return pt.currentStyle?Ft=pt.currentStyle[Tt]:document.defaultView&&document.defaultView.getComputedStyle&&(Ft=document.defaultView.getComputedStyle(pt,null).getPropertyValue(Tt)),Ft&&Ft.toLowerCase?Ft.toLowerCase():Ft}function Ul(pt){var Tt=pt.element;if(this._options.scrollToElement){var Ft=function(pt){var Tt=window.getComputedStyle(pt),Ft="absolute"===Tt.position,ne=/(auto|scroll)/;if("fixed"===Tt.position)return document.body;for(var _e=pt;_e=_e.parentElement;)if(Tt=window.getComputedStyle(_e),(!Ft||"static"!==Tt.position)&&ne.test(Tt.overflow+Tt.overflowY+Tt.overflowX))return _e;return document.body}(Tt);Ft!==document.body&&(Ft.scrollTop=Tt.offsetTop-Ft.offsetTop)}}function Gl(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var pt=document.documentElement;return{width:pt.clientWidth,height:pt.clientHeight}}function q(pt,Tt,Ft){var _e,ne=Tt.element;if("off"!==pt&&this._options.scrollToElement&&(_e="tooltip"===pt?Ft.getBoundingClientRect():ne.getBoundingClientRect(),!function(pt){var Tt=pt.getBoundingClientRect();return Tt.top>=0&&Tt.left>=0&&Tt.bottom+80<=window.innerHeight&&Tt.right<=window.innerWidth}(ne))){var We=Gl().height;_e.bottom-(_e.bottom-_e.top)<0||ne.clientHeight>We?window.scrollBy(0,_e.top-(We/2-_e.height/2)-this._options.scrollPadding):window.scrollBy(0,_e.top-(We/2-_e.height/2)+this._options.scrollPadding)}}function $(pt){pt.setAttribute("role","button"),pt.tabIndex=0}gt("split",function(pt,Tt,Ft){var ne;return ne="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(_e,We){var Se=Jn(st(this)),He=void 0===We?Da:We>>>0;if(0===He)return[];if(void 0===_e)return[Se];if(!tl(_e))return O(Tt,Se,_e,He);for(var rn,Sn,Xo,hi=[],Ti=0,yn=new RegExp(_e.source,(_e.ignoreCase?"i":"")+(_e.multiline?"m":"")+(_e.unicode?"u":"")+(_e.sticky?"y":"")+"g");(rn=O(Bt,yn,Se))&&!((Sn=yn.lastIndex)>Ti&&(ca(hi,Kr(Se,Ti,rn.index)),rn.length>1&&rn.index<Se.length&&aa(rs,hi,js(rn,1)),Xo=rn[0].length,Ti=Sn,hi.length>=He));)yn.lastIndex===rn.index&&yn.lastIndex++;return Ti===Se.length?(Xo||!Wa(yn,""))&&ca(hi,""):ca(hi,Kr(Se,Ti)),hi.length>He?js(hi,0,He):hi}:"0".split(void 0,0).length?function(_e,We){return void 0===_e&&0===We?[]:O(Tt,this,_e,We)}:Tt,[function(We,Se){var He=st(this),hi=null==We?void 0:Ut(We,pt);return hi?O(hi,We,He,Se):O(ne,Jn(He),We,Se)},function(_e,We){var Se=Re(this),He=Jn(_e),hi=Ft(ne,Se,He,We,ne!==Tt);if(hi.done)return hi.value;var gi=uc(Se,RegExp),Ti=Se.unicode,rn=new gi(la?"^(?:"+Se.source+")":Se,(Se.ignoreCase?"i":"")+(Se.multiline?"m":"")+(Se.unicode?"u":"")+(la?"g":"y")),Sn=void 0===We?Da:We>>>0;if(0===Sn)return[];if(0===He.length)return null===dn(rn,He)?[He]:[];for(var Xo=0,To=0,fo=[];To<He.length;){rn.lastIndex=la?0:To;var qo,Co=dn(rn,la?Kr(He,To):He);if(null===Co||(qo=il(Uo(rn.lastIndex+(la?To:0)),He.length))===Xo)To=Ni(He,To,Ti);else{if(ca(fo,Kr(He,Xo,To)),fo.length===Sn)return fo;for(var So=1;So<=Co.length-1;So++)if(ca(fo,Co[So]),fo.length===Sn)return fo;To=Xo=qo}}return ca(fo,Kr(He,Xo)),fo}]},!Ia,la);var Ct=Object.assign,At=Object.defineProperty,Kt=lt([].concat),ve=!Ct||c(function(){if(v&&1!==Ct({b:1},Ct(At({},"a",{enumerable:!0,get:function(){At(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var pt={},Tt={},Ft=Symbol(),ne="abcdefghijklmnopqrst";return pt[Ft]=7,ne.split("").forEach(function(_e){Tt[_e]=_e}),7!=Ct({},pt)[Ft]||Ss(Ct({},Tt)).join("")!=ne})?function(Tt,Ft){for(var ne=li(Tt),_e=arguments.length,We=1,Se=va.f,He=vt.f;_e>We;)for(var rn,hi=dt(arguments[We++]),gi=Se?Kt(Ss(hi),Se(hi)):Ss(hi),Ti=gi.length,yn=0;Ti>yn;)rn=gi[yn++],(!v||O(He,hi,rn))&&(ne[rn]=hi[rn]);return ne}:Ct;function xe(pt){var Tt=pt.parentNode;return!(!Tt||"HTML"===Tt.nodeName)&&("fixed"===ua(pt,"position")||xe(Tt))}function fi(pt,Tt){var Ft=document.body,ne=document.documentElement,_e=window.pageYOffset||ne.scrollTop||Ft.scrollTop,We=window.pageXOffset||ne.scrollLeft||Ft.scrollLeft;Tt=Tt||Ft;var Se=pt.getBoundingClientRect(),He=Tt.getBoundingClientRect(),hi=ua(Tt,"position"),gi={width:Se.width,height:Se.height};return"body"!==Tt.tagName.toLowerCase()&&"relative"===hi||"sticky"===hi?Object.assign(gi,{top:Se.top-He.top,left:Se.left-He.left}):xe(pt)?Object.assign(gi,{top:Se.top,left:Se.left}):Object.assign(gi,{top:Se.top+_e,left:Se.left+We})}br({target:"Object",stat:!0,forced:Object.assign!==ve},{assign:ve});var Zi=Math.floor,Fn=lt("".charAt),vn=lt("".replace),ro=lt("".slice),Eo=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,ja=/\$([$&'`]|\d{1,2})/g,Ms=function(pt,Tt,Ft,ne,_e,We){var Se=Ft+pt.length,He=ne.length,hi=ja;return void 0!==_e&&(_e=li(_e),hi=Eo),vn(We,hi,function(gi,Ti){var yn;switch(Fn(Ti,0)){case"$":return"$";case"&":return pt;case"`":return ro(Tt,0,Ft);case"'":return ro(Tt,Se);case"<":yn=_e[ro(Ti,1,-1)];break;default:var rn=+Ti;if(0===rn)return gi;if(rn>He){var Sn=Zi(rn/10);return 0===Sn?gi:Sn<=He?void 0===ne[Sn-1]?Fn(Ti,1):ne[Sn-1]+Fn(Ti,1):gi}yn=ne[rn-1]}return void 0===yn?"":yn})},Dr=oi("replace"),Cr=Math.max,za=Math.min,As=lt([].concat),Sr=lt([].push),nl=lt("".indexOf),ha=lt("".slice),Wl=function(pt){return void 0===pt?pt:String(pt)},Jr="$0"==="a".replace(/./,"$0"),Ea=!!/./[Dr]&&""===/./[Dr]("a","$0"),Aa=!c(function(){var pt=/./;return pt.exec=function(){var Tt=[];return Tt.groups={a:"7"},Tt},"7"!=="".replace(pt,"$<a>")});function da(pt,Tt){if(pt instanceof SVGElement){var Ft=pt.getAttribute("class")||"";pt.setAttribute("class",Ft.replace(Tt,"").replace(/^\s+|\s+$/g,""))}else pt.className=pt.className.replace(Tt,"").replace(/^\s+|\s+$/g,"")}function Os(pt,Tt){var Ft="";if(pt.style.cssText&&(Ft+=pt.style.cssText),"string"==typeof Tt)Ft+=Tt;else for(var ne in Tt)Ft+="".concat(ne,":").concat(Tt[ne],";");pt.style.cssText=Ft}function as(pt){if(pt){if(!this._introItems[this._currentStep])return;var Tt=this._introItems[this._currentStep],Ft=fi(Tt.element,this._targetElement),ne=this._options.helperElementPadding;xe(Tt.element)?ss(pt,"introjs-fixedTooltip"):da(pt,"introjs-fixedTooltip"),"floating"===Tt.position&&(ne=0),Os(pt,{width:"".concat(Ft.width+ne,"px"),height:"".concat(Ft.height+ne,"px"),top:"".concat(Ft.top-ne/2,"px"),left:"".concat(Ft.left-ne/2,"px")})}}gt("replace",function(pt,Tt,Ft){var ne=Ea?"$":"$0";return[function(We,Se){var He=st(this),hi=null==We?void 0:Ut(We,Dr);return hi?O(hi,We,He,Se):O(Tt,Jn(He),We,Se)},function(_e,We){var Se=Re(this),He=Jn(_e);if("string"==typeof We&&-1===nl(We,ne)&&-1===nl(We,"$<")){var hi=Ft(Tt,Se,He,We);if(hi.done)return hi.value}var gi=It(We);gi||(We=Jn(We));var Ti=Se.global;if(Ti){var yn=Se.unicode;Se.lastIndex=0}for(var rn=[];;){var Sn=dn(Se,He);if(null===Sn||(Sr(rn,Sn),!Ti))break;""===Jn(Sn[0])&&(Se.lastIndex=Ni(He,Uo(Se.lastIndex),yn))}for(var To="",fo=0,Co=0;Co<rn.length;Co++){for(var qo=Jn((Sn=rn[Co])[0]),So=Cr(za(bo(Sn.index),He.length),0),cs=[],Br=1;Br<Sn.length;Br++)Sr(cs,Wl(Sn[Br]));var Zr=Sn.groups;if(gi){var Ka=As([qo],cs,So,He);void 0!==Zr&&Sr(Ka,Zr);var uh=Jn(aa(We,void 0,Ka))}else uh=Ms(qo,He,So,cs,Zr,We);So>=fo&&(To+=ha(He,fo,So)+uh,fo=So+qo.length)}return To+ha(He,fo)}]},!Aa||!Jr||Ea);var ol=oi("unscopables"),hc=Array.prototype;null==hc[ol]&&Xi.f(hc,ol,{configurable:!0,value:cn(null)});var Wc=sa.includes;br({target:"Array",proto:!0},{includes:function(Tt){return Wc(this,Tt,arguments.length>1?arguments[1]:void 0)}}),function(pt){hc[ol][pt]=!0}("includes");var dc=os("slice"),pc=oi("species"),jl=s.Array,yu=Math.max;br({target:"Array",proto:!0,forced:!dc},{slice:function(Tt,Ft){var He,hi,gi,ne=Gt(this),_e=ho(ne),We=En(Tt,_e),Se=En(void 0===Ft?_e:Ft,_e);if(Tn(ne)&&((jo(He=ne.constructor)&&(He===jl||Tn(He.prototype))||Vt(He)&&null===(He=He[pc]))&&(He=void 0),He===jl||void 0===He))return js(ne,We,Se);for(hi=new(void 0===He?jl:He)(yu(Se-We,0)),gi=0;We<Se;We++,gi++)We in ne&&on(hi,gi,ne[We]);return hi.length=gi,hi}});var Eu=s.TypeError,fc=function(pt){if(tl(pt))throw Eu("The method doesn't accept regular expressions");return pt},vl=oi("match"),Fo=lt("".indexOf);br({target:"String",proto:!0,forced:!function(pt){var Tt=/./;try{"/./"[pt](Tt)}catch(Ft){try{return Tt[vl]=!1,"/./"[pt](Tt)}catch(ne){}}return!1}("includes")},{includes:function(Tt){return!!~Fo(Jn(st(this)),Jn(fc(Tt)),arguments.length>1?arguments[1]:void 0)}});var Oa=function(pt,Tt){var Ft=[][pt];return!!Ft&&c(function(){Ft.call(null,Tt||function(){throw 1},1)})},rl=lt([].join),ls=dt!=Object,gc=Oa("join",",");br({target:"Array",proto:!0,forced:ls||!gc},{join:function(Tt){return rl(Gt(this),void 0===Tt?",":Tt)}});var ms=lt(lt.bind),zl=lt([].push),Ys=function(pt){var Tt=1==pt,Ft=2==pt,ne=3==pt,_e=4==pt,We=6==pt,Se=7==pt,He=5==pt||We;return function(hi,gi,Ti,yn){for(var So,cs,rn=li(hi),Sn=dt(rn),Xo=function(pt,Tt){return ie(pt),void 0===Tt?pt:ms?ms(pt,Tt):function(){return pt.apply(Tt,arguments)}}(gi,Ti),To=ho(Sn),fo=0,Co=yn||Rs,qo=Tt?Co(hi,To):Ft||Se?Co(hi,0):void 0;To>fo;fo++)if((He||fo in Sn)&&(cs=Xo(So=Sn[fo],fo,rn),pt))if(Tt)qo[fo]=cs;else if(cs)switch(pt){case 3:return!0;case 5:return So;case 6:return fo;case 2:zl(qo,So)}else switch(pt){case 4:return!1;case 7:zl(qo,So)}return We?-1:ne||_e?_e:qo}},mc=[Ys(0),Ys(1),Ys(2),Ys(3),Ys(4),Ys(5),Ys(6),Ys(7)][2];function Xl(pt,Tt,Ft,ne,_e){return pt.left+Tt+Ft.width>ne.width?(_e.style.left="".concat(ne.width-Ft.width-pt.left,"px"),!1):(_e.style.left="".concat(Tt,"px"),!0)}function zc(pt,Tt,Ft,ne){return pt.left+pt.width-Tt-Ft.width<0?(ne.style.left="".concat(-pt.left,"px"),!1):(ne.style.right="".concat(Tt,"px"),!0)}br({target:"Array",proto:!0,forced:!os("filter")},{filter:function(Tt){return mc(this,Tt,arguments.length>1?arguments[1]:void 0)}});var Yc=os("splice"),Cu=s.TypeError,Ir=Math.max,sl=Math.min,al=9007199254740991,sh="Maximum allowed length exceeded";function xa(pt,Tt){pt.includes(Tt)&&pt.splice(pt.indexOf(Tt),1)}function vc(pt,Tt,Ft){var ne=this._options.positionPrecedence.slice(),_e=Gl(),We=fi(Tt).height+10,Se=fi(Tt).width+20,He=pt.getBoundingClientRect(),hi="floating";He.bottom+We>_e.height&&xa(ne,"bottom"),He.top-We<0&&xa(ne,"top"),He.right+Se>_e.width&&xa(ne,"right"),He.left-Se<0&&xa(ne,"left");var Ti,yn,gi=-1!==(yn=(Ti=Ft||"").indexOf("-"))?Ti.substr(yn):"";return Ft&&(Ft=Ft.split("-")[0]),ne.length&&(hi=ne.includes(Ft)?Ft:ne[0]),["top","bottom"].includes(hi)&&(hi+=function(pt,Tt,Ft,ne){var We=Tt/2,Se=Math.min(Ft.width,window.screen.width),He=["-left-aligned","-middle-aligned","-right-aligned"];return Se-pt<Tt&&xa(He,"-left-aligned"),(pt<We||Se-pt<We)&&xa(He,"-middle-aligned"),pt<Tt&&xa(He,"-right-aligned"),He.length?He.includes(ne)?ne:He[0]:"-middle-aligned"}(He.left,Se,_e,gi)),hi}function Mr(pt,Tt,Ft,ne){var We,Se,He,hi,gi;if(ne=ne||!1,Tt.style.top=null,Tt.style.right=null,Tt.style.bottom=null,Tt.style.left=null,Tt.style.marginLeft=null,Tt.style.marginTop=null,Ft.style.display="inherit",this._introItems[this._currentStep])switch(Tt.className=["introjs-tooltip","string"==typeof(We=this._introItems[this._currentStep]).tooltipClass?We.tooltipClass:this._options.tooltipClass].filter(Boolean).join(" "),Tt.setAttribute("role","dialog"),"floating"!==(gi=this._introItems[this._currentStep].position)&&this._options.autoPosition&&(gi=vc.call(this,pt,Tt,gi)),He=fi(pt),Se=fi(Tt),hi=Gl(),ss(Tt,"introjs-".concat(gi)),gi){case"top-right-aligned":Ft.className="introjs-arrow bottom-right";var yn=0;zc(He,yn,Se,Tt),Tt.style.bottom="".concat(He.height+20,"px");break;case"top-middle-aligned":Ft.className="introjs-arrow bottom-middle";var rn=He.width/2-Se.width/2;ne&&(rn+=5),zc(He,rn,Se,Tt)&&(Tt.style.right=null,Xl(He,rn,Se,hi,Tt)),Tt.style.bottom="".concat(He.height+20,"px");break;case"top-left-aligned":case"top":Ft.className="introjs-arrow bottom",Xl(He,ne?0:15,Se,hi,Tt),Tt.style.bottom="".concat(He.height+20,"px");break;case"right":Tt.style.left="".concat(He.width+20,"px"),He.top+Se.height>hi.height?(Ft.className="introjs-arrow left-bottom",Tt.style.top="-".concat(Se.height-He.height-20,"px")):Ft.className="introjs-arrow left";break;case"left":!ne&&!0===this._options.showStepNumbers&&(Tt.style.top="15px"),He.top+Se.height>hi.height?(Tt.style.top="-".concat(Se.height-He.height-20,"px"),Ft.className="introjs-arrow right-bottom"):Ft.className="introjs-arrow right",Tt.style.right="".concat(He.width+20,"px");break;case"floating":Ft.style.display="none",Tt.style.left="50%",Tt.style.top="50%",Tt.style.marginLeft="-".concat(Se.width/2,"px"),Tt.style.marginTop="-".concat(Se.height/2,"px");break;case"bottom-right-aligned":Ft.className="introjs-arrow top-right",zc(He,yn=0,Se,Tt),Tt.style.top="".concat(He.height+20,"px");break;case"bottom-middle-aligned":Ft.className="introjs-arrow top-middle",rn=He.width/2-Se.width/2,ne&&(rn+=5),zc(He,rn,Se,Tt)&&(Tt.style.right=null,Xl(He,rn,Se,hi,Tt)),Tt.style.top="".concat(He.height+20,"px");break;default:Ft.className="introjs-arrow top",Xl(He,0,Se,hi,Tt),Tt.style.top="".concat(He.height+20,"px")}}function Kl(){p(document.querySelectorAll(".introjs-showElement"),function(Tt){da(Tt,/introjs-[a-zA-Z]+/g)})}function Gn(pt,Tt){var Ft=document.createElement(pt);Tt=Tt||{};var ne=/^(?:role|data-|aria-)/;for(var _e in Tt){var We=Tt[_e];"style"===_e?Os(Ft,We):_e.match(ne)?Ft.setAttribute(_e,We):Ft[_e]=We}return Ft}function bc(pt,Tt,Ft){if(Ft){var ne=Tt.style.opacity||"1";Os(Tt,{opacity:"0"}),window.setTimeout(function(){Os(Tt,{opacity:ne})},10)}pt.appendChild(Tt)}function $r(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function yc(){var pt=document.querySelector(".introjs-disableInteraction");null===pt&&(pt=Gn("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(pt)),as.call(this,pt)}function Xc(pt){var Tt=this,Ft=Gn("div",{className:"introjs-bullets"});!1===this._options.showBullets&&(Ft.style.display="none");var ne=Gn("ul");ne.setAttribute("role","tablist");var _e=function(){Tt.goToStep(this.getAttribute("data-stepnumber"))};return p(this._introItems,function(We,Se){var He=We.step,hi=Gn("li"),gi=Gn("a");hi.setAttribute("role","presentation"),gi.setAttribute("role","tab"),gi.onclick=_e,Se===pt.step-1&&(gi.className="active"),$(gi),gi.innerHTML="&nbsp;",gi.setAttribute("data-stepnumber",He),hi.appendChild(gi),ne.appendChild(hi)}),Ft.appendChild(ne),Ft}function ka(pt,Tt){if(this._options.showBullets){var Ft=document.querySelector(".introjs-bullets");Ft.parentNode.replaceChild(Xc.call(this,Tt),Ft)}}function Jl(pt,Tt){this._options.showBullets&&(pt.querySelector(".introjs-bullets li > a.active").className="",pt.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(Tt.step,'"]')).className="active")}function Yo(){var pt=Gn("div");pt.className="introjs-progress",!1===this._options.showProgress&&(pt.style.display="none");var Tt=Gn("div",{className:"introjs-progressbar"});return this._options.progressBarAdditionalClass&&(Tt.className+=" "+this._options.progressBarAdditionalClass),Tt.setAttribute("role","progress"),Tt.setAttribute("aria-valuemin",0),Tt.setAttribute("aria-valuemax",100),Tt.setAttribute("aria-valuenow",$r.call(this)),Tt.style.cssText="width:".concat($r.call(this),"%;"),pt.appendChild(Tt),pt}function Su(pt){pt.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat($r.call(this),"%;"),pt.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",$r.call(this))}function Ya(pt){var Tt=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,pt.element);var Se,He,hi,Ft=this,ne=document.querySelector(".introjs-helperLayer"),_e=document.querySelector(".introjs-tooltipReferenceLayer"),We="introjs-helperLayer";if("string"==typeof pt.highlightClass&&(We+=" ".concat(pt.highlightClass)),"string"==typeof this._options.highlightClass&&(We+=" ".concat(this._options.highlightClass)),null!==ne&&null!==_e){var gi=_e.querySelector(".introjs-helperNumberLayer"),Ti=_e.querySelector(".introjs-tooltiptext"),yn=_e.querySelector(".introjs-tooltip-title"),rn=_e.querySelector(".introjs-arrow"),Sn=_e.querySelector(".introjs-tooltip");hi=_e.querySelector(".introjs-skipbutton"),He=_e.querySelector(".introjs-prevbutton"),Se=_e.querySelector(".introjs-nextbutton"),ne.className=We,Sn.style.opacity=0,Sn.style.display="none",Ul.call(Ft,pt),as.call(Ft,ne),as.call(Ft,_e),Kl(),Ft._lastShowElementTimer&&window.clearTimeout(Ft._lastShowElementTimer),Ft._lastShowElementTimer=window.setTimeout(function(){null!==gi&&(gi.innerHTML="".concat(pt.step," of ").concat(Tt._introItems.length)),Ti.innerHTML=pt.intro,yn.innerHTML=pt.title,Sn.style.display="block",Mr.call(Ft,pt.element,Sn,rn),Jl.call(Ft,_e,pt),Su.call(Ft,_e),Sn.style.opacity=1,(null!=Se&&/introjs-donebutton/gi.test(Se.className)||null!=Se)&&Se.focus(),q.call(Ft,pt.scrollTo,pt,Ti)},350)}else{var Xo=Gn("div",{className:We}),To=Gn("div",{className:"introjs-tooltipReferenceLayer"}),fo=Gn("div",{className:"introjs-arrow"}),Co=Gn("div",{className:"introjs-tooltip"}),qo=Gn("div",{className:"introjs-tooltiptext"}),So=Gn("div",{className:"introjs-tooltip-header"}),cs=Gn("h1",{className:"introjs-tooltip-title"}),Br=Gn("div");Os(Xo,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(Ft._options.overlayOpacity.toString(),") 0 0 0 5000px")}),Ul.call(Ft,pt),as.call(Ft,Xo),as.call(Ft,To),bc(this._targetElement,Xo,!0),bc(this._targetElement,To),qo.innerHTML=pt.intro,cs.innerHTML=pt.title,Br.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(Br.style.display="none"),So.appendChild(cs),Co.appendChild(So),Co.appendChild(qo),Co.appendChild(Xc.call(this,pt)),Co.appendChild(Yo.call(this));var Zr=Gn("div");!0===this._options.showStepNumbers&&(Zr.className="introjs-helperNumberLayer",Zr.innerHTML="".concat(pt.step," of ").concat(this._introItems.length),Co.appendChild(Zr)),Co.appendChild(fo),To.appendChild(Co),(Se=Gn("a")).onclick=function(){Ft._introItems.length-1!==Ft._currentStep?xs.call(Ft):/introjs-donebutton/gi.test(Se.className)&&("function"==typeof Ft._introCompleteCallback&&Ft._introCompleteCallback.call(Ft,Ft._currentStep,"done"),vs.call(Ft,Ft._targetElement))},$(Se),Se.innerHTML=this._options.nextLabel,(He=Gn("a")).onclick=function(){0!==Ft._currentStep&&ks.call(Ft)},$(He),He.innerHTML=this._options.prevLabel,$(hi=Gn("a",{className:"introjs-skipbutton"})),hi.innerHTML=this._options.skipLabel,hi.onclick=function(){Ft._introItems.length-1===Ft._currentStep&&"function"==typeof Ft._introCompleteCallback&&Ft._introCompleteCallback.call(Ft,Ft._currentStep,"skip"),"function"==typeof Ft._introSkipCallback&&Ft._introSkipCallback.call(Ft),vs.call(Ft,Ft._targetElement)},So.appendChild(hi),this._introItems.length>1&&Br.appendChild(He),Br.appendChild(Se),Co.appendChild(Br),Mr.call(Ft,pt.element,Co,fo),q.call(this,pt.scrollTo,pt,Co)}var Ka=Ft._targetElement.querySelector(".introjs-disableInteraction");Ka&&Ka.parentNode.removeChild(Ka),pt.disableInteraction&&yc.call(Ft),0===this._currentStep&&this._introItems.length>1?(null!=Se&&(Se.className="".concat(this._options.buttonClass," introjs-nextbutton"),Se.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=He&&(He.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=Se&&ss(Se,"introjs-fullbutton")):null!=He&&(He.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=He&&(He.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=Se&&(Se.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=He&&ss(He,"introjs-fullbutton")):null!=Se&&(!0===this._options.nextToDone?(Se.innerHTML=this._options.doneLabel,ss(Se,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):Se.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=He&&(He.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=Se&&(Se.className="".concat(this._options.buttonClass," introjs-nextbutton"),Se.innerHTML=this._options.nextLabel)),null!=He&&He.setAttribute("role","button"),null!=Se&&Se.setAttribute("role","button"),null!=hi&&hi.setAttribute("role","button"),null!=Se&&Se.focus(),function(pt){var Tt=pt.element;ss(Tt,"introjs-showElement");var Ft=ua(Tt,"position");"absolute"!==Ft&&"relative"!==Ft&&"sticky"!==Ft&&"fixed"!==Ft&&ss(Tt,"introjs-relativePosition")}(pt),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,pt.element)}function Kc(pt){this._currentStep=pt-2,void 0!==this._introItems&&xs.call(this)}function Ta(pt){this._currentStepNumber=pt,void 0!==this._introItems&&xs.call(this)}function xs(){var pt=this;this._direction="forward",void 0!==this._currentStepNumber&&p(this._introItems,function(ne,_e){ne.step===pt._currentStepNumber&&(pt._currentStep=_e-1,pt._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var Tt=this._introItems[this._currentStep],Ft=!0;return void 0!==this._introBeforeChangeCallback&&(Ft=this._introBeforeChangeCallback.call(this,Tt&&Tt.element)),!1===Ft?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"end"),void vs.call(this,this._targetElement)):void Ya.call(this,Tt)}function ks(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var pt=this._introItems[this._currentStep],Tt=!0;if(void 0!==this._introBeforeChangeCallback&&(Tt=this._introBeforeChangeCallback.call(this,pt&&pt.element)),!1===Tt)return++this._currentStep,!1;Ya.call(this,pt)}function Ec(){return this._currentStep}function bl(pt){var Tt=void 0===pt.code?pt.which:pt.code;if(null===Tt&&(Tt=null===pt.charCode?pt.keyCode:pt.charCode),"Escape"!==Tt&&27!==Tt||!0!==this._options.exitOnEsc){if("ArrowLeft"===Tt||37===Tt)ks.call(this);else if("ArrowRight"===Tt||39===Tt)xs.call(this);else if("Enter"===Tt||"NumpadEnter"===Tt||13===Tt){var Ft=pt.target||pt.srcElement;Ft&&Ft.className.match("introjs-prevbutton")?ks.call(this):Ft&&Ft.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"skip"),vs.call(this,this._targetElement)):Ft&&Ft.getAttribute("data-stepnumber")?Ft.click():xs.call(this),pt.preventDefault?pt.preventDefault():pt.returnValue=!1}}else vs.call(this,this._targetElement)}function gr(pt){if(null===pt||"object"!==W(pt)||void 0!==pt.nodeType)return pt;var Tt={};for(var Ft in pt)Tt[Ft]=void 0!==window.jQuery&&pt[Ft]instanceof window.jQuery?pt[Ft]:gr(pt[Ft]);return Tt}function _s(pt){var Tt=document.querySelector(".introjs-hints");return Tt?Tt.querySelectorAll(pt):[]}function ll(pt){var Tt=_s('.introjs-hint[data-step="'.concat(pt,'"]'))[0];Tc.call(this),Tt&&ss(Tt,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,pt)}function El(){var pt=this;p(_s(".introjs-hint"),function(Ft){ll.call(pt,Ft.getAttribute("data-step"))})}function ah(){var pt=this,Tt=_s(".introjs-hint");Tt&&Tt.length?p(Tt,function(Ft){wu.call(pt,Ft.getAttribute("data-step"))}):Ru.call(this,this._targetElement)}function wu(pt){var Tt=_s('.introjs-hint[data-step="'.concat(pt,'"]'))[0];Tt&&da(Tt,/introjs-hidehint/g)}function lh(){var pt=this;p(_s(".introjs-hint"),function(Ft){ea.call(pt,Ft.getAttribute("data-step"))}),e.off(document,"click",Tc,this,!1),e.off(window,"resize",Ls,this,!0),this._hintsAutoRefreshFunction&&e.off(window,"scroll",this._hintsAutoRefreshFunction,this,!0)}function ea(pt){var Tt=_s('.introjs-hint[data-step="'.concat(pt,'"]'))[0];Tt&&Tt.parentNode.removeChild(Tt)}function Ca(){var pt=this,Tt=this,Ft=document.querySelector(".introjs-hints");null===Ft&&(Ft=Gn("div",{className:"introjs-hints"}));p(this._introItems,function(_e,We){if(!document.querySelector('.introjs-hint[data-step="'.concat(We,'"]'))){var Se=Gn("a",{className:"introjs-hint"});$(Se),Se.onclick=function(We){return function(Se){var He=Se||window.event;He.stopPropagation&&He.stopPropagation(),null!==He.cancelBubble&&(He.cancelBubble=!0),La.call(Tt,We)}}(We),_e.hintAnimation||ss(Se,"introjs-hint-no-anim"),xe(_e.element)&&ss(Se,"introjs-fixedhint");var He=Gn("div",{className:"introjs-hint-dot"}),hi=Gn("div",{className:"introjs-hint-pulse"});Se.appendChild(He),Se.appendChild(hi),Se.setAttribute("data-step",We),_e.targetElement=_e.element,_e.element=Se,$l.call(pt,_e.hintPosition,Se,_e.targetElement),Ft.appendChild(Se)}}),document.body.appendChild(Ft),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this),this._options.hintAutoRefreshInterval>=0&&(this._hintsAutoRefreshFunction=function(pt,Tt){var ne,Ft=this;return function(){for(var _e=arguments.length,We=new Array(_e),Se=0;Se<_e;Se++)We[Se]=arguments[Se];clearTimeout(ne),ne=setTimeout(function(){pt.apply(Ft,We)},Tt)}}(function(){return Ls.call(pt)},this._options.hintAutoRefreshInterval),e.on(window,"scroll",this._hintsAutoRefreshFunction,this,!0))}function $l(pt,Tt,Ft){var ne=Tt.style,_e=fi.call(this,Ft);switch(pt){default:case"top-left":ne.left="".concat(_e.left,"px"),ne.top="".concat(_e.top,"px");break;case"top-right":ne.left="".concat(_e.left+_e.width-20,"px"),ne.top="".concat(_e.top,"px");break;case"bottom-left":ne.left="".concat(_e.left,"px"),ne.top="".concat(_e.top+_e.height-20,"px");break;case"bottom-right":ne.left="".concat(_e.left+_e.width-20,"px"),ne.top="".concat(_e.top+_e.height-20,"px");break;case"middle-left":ne.left="".concat(_e.left,"px"),ne.top="".concat(_e.top+(_e.height-20)/2,"px");break;case"middle-right":ne.left="".concat(_e.left+_e.width-20,"px"),ne.top="".concat(_e.top+(_e.height-20)/2,"px");break;case"middle-middle":ne.left="".concat(_e.left+(_e.width-20)/2,"px"),ne.top="".concat(_e.top+(_e.height-20)/2,"px");break;case"bottom-middle":ne.left="".concat(_e.left+(_e.width-20)/2,"px"),ne.top="".concat(_e.top+_e.height-20,"px");break;case"top-middle":ne.left="".concat(_e.left+(_e.width-20)/2,"px"),ne.top="".concat(_e.top,"px")}}function La(pt){var Tt=document.querySelector('.introjs-hint[data-step="'.concat(pt,'"]')),Ft=this._introItems[pt];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,Tt,Ft,pt);var ne=Tc.call(this);if(parseInt(ne,10)!==pt){var _e=Gn("div",{className:"introjs-tooltip"}),We=Gn("div"),Se=Gn("div"),He=Gn("div");_e.onclick=function(Ti){Ti.stopPropagation?Ti.stopPropagation():Ti.cancelBubble=!0},We.className="introjs-tooltiptext";var hi=Gn("p");if(hi.innerHTML=Ft.hint,We.appendChild(hi),this._options.hintShowButton){var gi=Gn("a");gi.className=this._options.buttonClass,gi.setAttribute("role","button"),gi.innerHTML=this._options.hintButtonLabel,gi.onclick=ll.bind(this,pt),We.appendChild(gi)}Se.className="introjs-arrow",_e.appendChild(Se),_e.appendChild(We),this._currentStep=Tt.getAttribute("data-step"),He.className="introjs-tooltipReferenceLayer introjs-hintReference",He.setAttribute("data-step",Tt.getAttribute("data-step")),as.call(this,He),He.appendChild(_e),document.body.appendChild(He),Mr.call(this,Tt,_e,Se,!0)}}function Tc(){var pt=document.querySelector(".introjs-hintReference");if(pt){var Tt=pt.getAttribute("data-step");return pt.parentNode.removeChild(pt),Tt}}function Ru(pt){var Tt=this;if(this._introItems=[],this._options.hints)p(this._options.hints,function(ne){var _e=gr(ne);"string"==typeof _e.element&&(_e.element=document.querySelector(_e.element)),_e.hintPosition=_e.hintPosition||Tt._options.hintPosition,_e.hintAnimation=_e.hintAnimation||Tt._options.hintAnimation,null!==_e.element&&Tt._introItems.push(_e)});else{var Ft=pt.querySelectorAll("*[data-hint]");if(!Ft||!Ft.length)return!1;p(Ft,function(ne){var _e=ne.getAttribute("data-hintanimation");_e=_e?"true"===_e:Tt._options.hintAnimation,Tt._introItems.push({element:ne,hint:ne.getAttribute("data-hint"),hintPosition:ne.getAttribute("data-hintposition")||Tt._options.hintPosition,hintAnimation:_e,tooltipClass:ne.getAttribute("data-tooltipclass"),position:ne.getAttribute("data-position")||Tt._options.tooltipPosition})})}Ca.call(this),e.on(document,"click",Tc,this,!1),e.on(window,"resize",Ls,this,!0)}function Ls(){var pt=this;p(this._introItems,function(Tt){var Ft=Tt.targetElement;void 0!==Ft&&$l.call(pt,Tt.hintPosition,Tt.element,Ft)})}br({target:"Array",proto:!0,forced:!Yc},{splice:function(Tt,Ft){var He,hi,gi,Ti,yn,rn,ne=li(this),_e=ho(ne),We=En(Tt,_e),Se=arguments.length;if(0===Se?He=hi=0:1===Se?(He=0,hi=_e-We):(He=Se-2,hi=sl(Ir(bo(Ft),0),_e-We)),_e+He-hi>al)throw Cu(sh);for(gi=Rs(ne,hi),Ti=0;Ti<hi;Ti++)(yn=We+Ti)in ne&&on(gi,Ti,ne[yn]);if(gi.length=hi,He<hi){for(Ti=We;Ti<_e-hi;Ti++)rn=Ti+He,(yn=Ti+hi)in ne?ne[rn]=ne[yn]:delete ne[rn];for(Ti=_e;Ti>_e-hi+He;Ti--)delete ne[Ti-1]}else if(He>hi)for(Ti=_e-hi;Ti>We;Ti--)rn=Ti+He-1,(yn=Ti+hi-1)in ne?ne[rn]=ne[yn]:delete ne[rn];for(Ti=0;Ti<He;Ti++)ne[Ti+We]=arguments[Ti+2];return ne.length=_e-hi+He,gi}});var Cc=Math.floor,Sc=function(pt,Tt){var Ft=pt.length,ne=Cc(Ft/2);return Ft<8?Du(pt,Tt):_o(pt,Sc(js(pt,0,ne),Tt),Sc(js(pt,ne),Tt),Tt)},Du=function(pt,Tt){for(var _e,We,Ft=pt.length,ne=1;ne<Ft;){for(We=ne,_e=pt[ne];We&&Tt(pt[We-1],_e)>0;)pt[We]=pt[--We];We!==ne++&&(pt[We]=_e)}return pt},_o=function(pt,Tt,Ft,ne){for(var _e=Tt.length,We=Ft.length,Se=0,He=0;Se<_e||He<We;)pt[Se+He]=Se<_e&&He<We?ne(Tt[Se],Ft[He])<=0?Tt[Se++]:Ft[He++]:Se<_e?Tt[Se++]:Ft[He++];return pt},Tl=Sc,Na=Be.match(/firefox\/(\d+)/i),Iu=!!Na&&+Na[1],wc=/MSIE|Trident/.test(Be),Jc=Be.match(/AppleWebKit\/(\d+)\./),Zl=!!Jc&&+Jc[1],cl=[],$c=lt(cl.sort),Mu=lt(cl.push),ch=c(function(){cl.sort(void 0)}),ul=c(function(){cl.sort(null)}),Cl=Oa("sort"),ia=!c(function(){if(Ve)return Ve<70;if(!(Iu&&Iu>3)){if(wc)return!0;if(Zl)return Zl<603;var Tt,Ft,ne,_e,pt="";for(Tt=65;Tt<76;Tt++){switch(Ft=String.fromCharCode(Tt),Tt){case 66:case 69:case 70:case 72:ne=3;break;case 68:case 71:ne=4;break;default:ne=2}for(_e=0;_e<47;_e++)cl.push({k:Ft+_e,v:ne})}for(cl.sort(function(We,Se){return Se.v-We.v}),_e=0;_e<cl.length;_e++)Ft=cl[_e].k.charAt(0),pt.charAt(pt.length-1)!==Ft&&(pt+=Ft);return"DGBEFHACIJK"!==pt}});function Ou(pt){var Tt=this,Ft=pt.querySelectorAll("*[data-intro]"),ne=[];if(this._options.steps)p(this._options.steps,function(gi){var Ti=gr(gi);if(Ti.step=ne.length+1,Ti.title=Ti.title||"","string"==typeof Ti.element&&(Ti.element=document.querySelector(Ti.element)),null==Ti.element){var yn=document.querySelector(".introjsFloatingElement");null===yn&&(yn=Gn("div",{className:"introjsFloatingElement"}),document.body.appendChild(yn)),Ti.element=yn,Ti.position="floating"}Ti.position=Ti.position||Tt._options.tooltipPosition,Ti.scrollTo=Ti.scrollTo||Tt._options.scrollTo,void 0===Ti.disableInteraction&&(Ti.disableInteraction=Tt._options.disableInteraction),null!==Ti.element&&ne.push(Ti)});else{var We;if(Ft.length<1)return[];p(Ft,function(gi){if((!Tt._options.group||gi.getAttribute("data-intro-group")===Tt._options.group)&&"none"!==gi.style.display){var Ti=parseInt(gi.getAttribute("data-step"),10);We=gi.hasAttribute("data-disable-interaction")?!!gi.getAttribute("data-disable-interaction"):Tt._options.disableInteraction,Ti>0&&(ne[Ti-1]={element:gi,title:gi.getAttribute("data-title")||"",intro:gi.getAttribute("data-intro"),step:parseInt(gi.getAttribute("data-step"),10),tooltipClass:gi.getAttribute("data-tooltipclass"),highlightClass:gi.getAttribute("data-highlightclass"),position:gi.getAttribute("data-position")||Tt._options.tooltipPosition,scrollTo:gi.getAttribute("data-scrollto")||Tt._options.scrollTo,disableInteraction:We})}});var Se=0;p(Ft,function(gi){if((!Tt._options.group||gi.getAttribute("data-intro-group")===Tt._options.group)&&null===gi.getAttribute("data-step")){for(;void 0!==ne[Se];)Se++;We=gi.hasAttribute("data-disable-interaction")?!!gi.getAttribute("data-disable-interaction"):Tt._options.disableInteraction,ne[Se]={element:gi,title:gi.getAttribute("data-title")||"",intro:gi.getAttribute("data-intro"),step:Se+1,tooltipClass:gi.getAttribute("data-tooltipclass"),highlightClass:gi.getAttribute("data-highlightclass"),position:gi.getAttribute("data-position")||Tt._options.tooltipPosition,scrollTo:gi.getAttribute("data-scrollto")||Tt._options.scrollTo,disableInteraction:We}}})}for(var He=[],hi=0;hi<ne.length;hi++)ne[hi]&&He.push(ne[hi]);return(ne=He).sort(function(gi,Ti){return gi.step-Ti.step}),ne}function wl(pt){var Tt=document.querySelector(".introjs-tooltipReferenceLayer"),Ft=document.querySelector(".introjs-helperLayer"),ne=document.querySelector(".introjs-disableInteraction");if(as.call(this,Ft),as.call(this,Tt),as.call(this,ne),pt&&(this._introItems=Ou.call(this,this._targetElement),ka.call(this,Tt,this._introItems[this._currentStep]),Su.call(this,Tt)),null!=this._currentStep){var _e=document.querySelector(".introjs-arrow"),We=document.querySelector(".introjs-tooltip");We&&_e&&Mr.call(this,this._introItems[this._currentStep].element,We,_e)}return Ls.call(this),this}function Xa(){wl.call(this)}function hl(pt,Tt){if(pt&&pt.parentElement){var Ft=pt.parentElement;Tt?(Os(pt,{opacity:"0"}),window.setTimeout(function(){try{Ft.removeChild(pt)}catch(ne){}},500)):Ft.removeChild(pt)}}function vs(pt,Tt){var Ft=!0;if(void 0!==this._introBeforeExitCallback&&(Ft=this._introBeforeExitCallback.call(this)),Tt||!1!==Ft){var ne=pt.querySelectorAll(".introjs-overlay");ne&&ne.length&&p(ne,function(hi){return hl(hi)}),hl(pt.querySelector(".introjs-helperLayer"),!0),hl(pt.querySelector(".introjs-tooltipReferenceLayer")),hl(pt.querySelector(".introjs-disableInteraction")),hl(document.querySelector(".introjsFloatingElement")),Kl(),e.off(window,"keydown",bl,this,!0),e.off(window,"resize",Xa,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function Zc(pt){var Tt=this,Ft=Gn("div",{className:"introjs-overlay"});return Os(Ft,{top:0,bottom:0,left:0,right:0,position:"fixed"}),pt.appendChild(Ft),!0===this._options.exitOnOverlayClick&&(Os(Ft,{cursor:"pointer"}),Ft.onclick=function(){vs.call(Tt,pt)}),!0}function Pa(pt){void 0!==this._introStartCallback&&this._introStartCallback.call(this,pt);var Tt=Ou.call(this,pt);return 0===Tt.length||(this._introItems=Tt,Zc.call(this,pt)&&(xs.call(this),this._options.keyboardNavigation&&e.on(window,"keydown",bl,this,!0),e.on(window,"resize",Xa,this,!0))),!1}function Rl(pt){this._targetElement=pt,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}br({target:"Array",proto:!0,forced:ch||!ul||!Cl||!ia},{sort:function(Tt){void 0!==Tt&&ie(Tt);var Ft=li(this);if(ia)return void 0===Tt?$c(Ft):$c(Ft,Tt);var We,Se,ne=[],_e=ho(Ft);for(Se=0;Se<_e;Se++)Se in Ft&&Mu(ne,Ft[Se]);for(Tl(ne,function(pt){return function(Tt,Ft){return void 0===Ft?-1:void 0===Tt?1:void 0!==pt?+pt(Tt,Ft)||0:Jn(Tt)>Jn(Ft)?1:-1}}(Tt)),We=ne.length,Se=0;Se<We;)Ft[Se]=ne[Se++];for(;Se<_e;)delete Ft[Se++];return Ft}});var Ql=function pt(Tt){var Ft;if("object"===W(Tt))Ft=new Rl(Tt);else if("string"==typeof Tt){var ne=document.querySelector(Tt);if(!ne)throw new Error("There is no element with given selector.");Ft=new Rl(ne)}else Ft=new Rl(document.body);return pt.instances[y(Ft,"introjs-instance")]=Ft,Ft};return Ql.version="4.3.0",Ql.instances={},Ql.fn=Rl.prototype={clone:function(){return new Rl(this)},setOption:function(Tt,Ft){return this._options[Tt]=Ft,this},setOptions:function(Tt){return this._options=function(pt,Tt){var ne,Ft={};for(ne in pt)Ft[ne]=pt[ne];for(ne in Tt)Ft[ne]=Tt[ne];return Ft}(this._options,Tt),this},start:function(){return Pa.call(this,this._targetElement),this},goToStep:function(Tt){return Kc.call(this,Tt),this},addStep:function(Tt){return this._options.steps||(this._options.steps=[]),this._options.steps.push(Tt),this},addSteps:function(Tt){if(Tt.length){for(var Ft=0;Ft<Tt.length;Ft++)this.addStep(Tt[Ft]);return this}},goToStepNumber:function(Tt){return Ta.call(this,Tt),this},nextStep:function(){return xs.call(this),this},previousStep:function(){return ks.call(this),this},currentStep:function(){return Ec.call(this)},exit:function(Tt){return vs.call(this,this._targetElement,Tt),this},refresh:function(Tt){return wl.call(this,Tt),this},onbeforechange:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=Tt,this},onchange:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=Tt,this},onafterchange:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=Tt,this},oncomplete:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=Tt,this},onhintsadded:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=Tt,this},onhintclick:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=Tt,this},onhintclose:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=Tt,this},onstart:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=Tt,this},onexit:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=Tt,this},onskip:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=Tt,this},onbeforeexit:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=Tt,this},addHints:function(){return Ru.call(this,this._targetElement),this},hideHint:function(Tt){return ll.call(this,Tt),this},hideHints:function(){return El.call(this),this},showHint:function(Tt){return wu.call(this,Tt),this},showHints:function(){return ah.call(this),this},removeHints:function(){return lh.call(this),this},removeHint:function(Tt){return ea().call(this,Tt),this},showHintDialog:function(Tt){return La.call(this,Tt),this}},Ql}()},8704:(L,W,m)=>{"use strict";m.d(W,{PG:()=>R,nm:()=>H});var y=m(5e3),p=m(93075),e=m(54968),t=m(69808);const n=["editorContainer"],o=new y.OlP("NGX_MONACO_EDITOR_CONFIG");let c,s=!1,v=(()=>{class V{constructor(Z){this.config=Z,this.onInit=new y.vpe}ngAfterViewInit(){s?c.then(()=>{this.initMonaco(this._options)}):(s=!0,c=new Promise(Z=>{const vt=(this.config.baseUrl||"./assets")+"/monaco-editor/min/vs";if("object"==typeof window.monaco)return void Z();const it=()=>{window.require.config({paths:{vs:`${vt}`}}),window.require(["vs/editor/editor.main"],()=>{"function"==typeof this.config.onMonacoLoad&&this.config.onMonacoLoad(),this.initMonaco(this._options),Z()})};if(window.require)it();else{const ot=document.createElement("script");ot.type="text/javascript",ot.src=`${vt}/loader.js`,ot.addEventListener("load",it),document.body.appendChild(ot)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return V.\u0275fac=function(Z){return new(Z||V)(y.Y36(o))},V.\u0275cmp=y.Xpm({type:V,selectors:[["ng-component"]],viewQuery:function(Z,vt){if(1&Z&&y.Gf(n,7),2&Z){let it;y.iGM(it=y.CRH())&&(vt._editorContainer=it.first)}},outputs:{onInit:"onInit"},decls:0,vars:0,template:function(Z,vt){},encapsulation:2}),V})(),R=(()=>{class V extends v{constructor(Z,vt){super(vt),this.zone=Z,this.editorConfig=vt,this._value="",this.propagateChange=it=>{},this.onTouched=()=>{}}set options(Z){this._options=Object.assign({},this.config.defaultOptions,Z),this._editor&&(this._editor.dispose(),this.initMonaco(Z))}get options(){return this._options}set model(Z){this.options.model=Z,this._editor&&(this._editor.dispose(),this.initMonaco(this.options))}writeValue(Z){this._value=Z||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}registerOnChange(Z){this.propagateChange=Z}registerOnTouched(Z){this.onTouched=Z}initMonaco(Z){const vt=!!Z.model;if(vt){const it=monaco.editor.getModel(Z.model.uri||"");it?(Z.model=it,Z.model.setValue(this._value)):Z.model=monaco.editor.createModel(Z.model.value,Z.model.language,Z.model.uri)}this._editor=monaco.editor.create(this._editorContainer.nativeElement,Z),vt||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(it=>{const ot=this._editor.getValue();this.zone.run(()=>{this.propagateChange(ot),this._value=ot})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,e.R)(window,"resize").subscribe(()=>this._editor.layout()),this.onInit.emit(this._editor)}}return V.\u0275fac=function(Z){return new(Z||V)(y.Y36(y.R0b),y.Y36(o))},V.\u0275cmp=y.Xpm({type:V,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",model:"model"},features:[y._Bn([{provide:p.JU,useExisting:(0,y.Gpc)(()=>V),multi:!0}]),y.qOj],decls:2,vars:0,consts:[[1,"editor-container"],["editorContainer",""]],template:function(Z,vt){1&Z&&y._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%] {\n          display: block;\n          height: 200px;\n      }\n\n      .editor-container[_ngcontent-%COMP%] {\n          width: 100%;\n          height: 98%;\n      }"]}),V})(),H=(()=>{class V{static forRoot(Z={}){return{ngModule:V,providers:[{provide:o,useValue:Z}]}}}return V.\u0275fac=function(Z){return new(Z||V)},V.\u0275mod=y.oAB({type:V}),V.\u0275inj=y.cJS({imports:[[t.ez]]}),V})()},61135:(L,W,m)=>{"use strict";m.d(W,{X:()=>p});var y=m(77579);class p extends y.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:o}=this;if(t)throw n;return this._throwIfClosed(),o}next(t){super.next(this._value=t)}}},79307:(L,W,m)=>{"use strict";m.d(W,{y:()=>R});var y=m(70930),p=m(50727),e=m(48822),t=m(44671);var s=m(42416),c=m(30576),v=m(72806);let R=(()=>{class G{constructor(vt){vt&&(this._subscribe=vt)}lift(vt){const it=new G;return it.source=this,it.operator=vt,it}subscribe(vt,it,ot){const wt=function(G){return G&&G instanceof y.Lv||function(G){return G&&(0,c.m)(G.next)&&(0,c.m)(G.error)&&(0,c.m)(G.complete)}(G)&&(0,p.Nn)(G)}(vt)?vt:new y.Hp(vt,it,ot);return(0,v.x)(()=>{const{operator:ct,source:yt}=this;wt.add(ct?ct.call(wt,yt):yt?this._subscribe(wt):this._trySubscribe(wt))}),wt}_trySubscribe(vt){try{return this._subscribe(vt)}catch(it){vt.error(it)}}forEach(vt,it){return new(it=O(it))((ot,wt)=>{let ct;ct=this.subscribe(yt=>{try{vt(yt)}catch(lt){wt(lt),null==ct||ct.unsubscribe()}},wt,ot)})}_subscribe(vt){var it;return null===(it=this.source)||void 0===it?void 0:it.subscribe(vt)}[e.L](){return this}pipe(...vt){return function(G){return 0===G.length?t.y:1===G.length?G[0]:function(vt){return G.reduce((it,ot)=>ot(it),vt)}}(vt)(this)}toPromise(vt){return new(vt=O(vt))((it,ot)=>{let wt;this.subscribe(ct=>wt=ct,ct=>ot(ct),()=>it(wt))})}}return G.create=Z=>new G(Z),G})();function O(G){var Z;return null!==(Z=null!=G?G:s.v.Promise)&&void 0!==Z?Z:Promise}},77579:(L,W,m)=>{"use strict";m.d(W,{x:()=>s});var y=m(79307),p=m(50727);const t=(0,m(83888).d)(v=>function(){v(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var n=m(38737),o=m(72806);let s=(()=>{class v extends y.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(O){const H=new c(this,this);return H.operator=O,H}_throwIfClosed(){if(this.closed)throw new t}next(O){(0,o.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const H=this.observers.slice();for(const V of H)V.next(O)}})}error(O){(0,o.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=O;const{observers:H}=this;for(;H.length;)H.shift().error(O)}})}complete(){(0,o.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:O}=this;for(;O.length;)O.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var O;return(null===(O=this.observers)||void 0===O?void 0:O.length)>0}_trySubscribe(O){return this._throwIfClosed(),super._trySubscribe(O)}_subscribe(O){return this._throwIfClosed(),this._checkFinalizedStatuses(O),this._innerSubscribe(O)}_innerSubscribe(O){const{hasError:H,isStopped:V,observers:G}=this;return H||V?p.Lc:(G.push(O),new p.w0(()=>(0,n.P)(G,O)))}_checkFinalizedStatuses(O){const{hasError:H,thrownError:V,isStopped:G}=this;H?O.error(V):G&&O.complete()}asObservable(){const O=new y.y;return O.source=this,O}}return v.create=(R,O)=>new c(R,O),v})();class c extends s{constructor(R,O){super(),this.destination=R,this.source=O}next(R){var O,H;null===(H=null===(O=this.destination)||void 0===O?void 0:O.next)||void 0===H||H.call(O,R)}error(R){var O,H;null===(H=null===(O=this.destination)||void 0===O?void 0:O.error)||void 0===H||H.call(O,R)}complete(){var R,O;null===(O=null===(R=this.destination)||void 0===R?void 0:R.complete)||void 0===O||O.call(R)}_subscribe(R){var O,H;return null!==(H=null===(O=this.source)||void 0===O?void 0:O.subscribe(R))&&void 0!==H?H:p.Lc}}},70930:(L,W,m)=>{"use strict";m.d(W,{Hp:()=>V,Lv:()=>H});var y=m(30576),p=m(50727),e=m(42416),t=m(87849),n=m(25032);const o=v("C",void 0,void 0);function v(ot,wt,ct){return{kind:ot,value:wt,error:ct}}var R=m(43410),O=m(72806);class H extends p.w0{constructor(wt){super(),this.isStopped=!1,wt?(this.destination=wt,(0,p.Nn)(wt)&&wt.add(this)):this.destination=it}static create(wt,ct,yt){return new V(wt,ct,yt)}next(wt){this.isStopped?vt(v("N",wt,void 0),this):this._next(wt)}error(wt){this.isStopped?vt(v("E",void 0,wt),this):(this.isStopped=!0,this._error(wt))}complete(){this.isStopped?vt(o,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(wt){this.destination.next(wt)}_error(wt){try{this.destination.error(wt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class V extends H{constructor(wt,ct,yt){let lt;if(super(),(0,y.m)(wt))lt=wt;else if(wt){let at;({next:lt,error:ct,complete:yt}=wt),this&&e.v.useDeprecatedNextContext?(at=Object.create(wt),at.unsubscribe=()=>this.unsubscribe()):at=wt,lt=null==lt?void 0:lt.bind(at),ct=null==ct?void 0:ct.bind(at),yt=null==yt?void 0:yt.bind(at)}this.destination={next:lt?G(lt):n.Z,error:G(null!=ct?ct:Z),complete:yt?G(yt):n.Z}}}function G(ot,wt){return(...ct)=>{try{ot(...ct)}catch(yt){e.v.useDeprecatedSynchronousErrorHandling?(0,O.O)(yt):(0,t.h)(yt)}}}function Z(ot){throw ot}function vt(ot,wt){const{onStoppedNotification:ct}=e.v;ct&&R.z.setTimeout(()=>ct(ot,wt))}const it={closed:!0,next:n.Z,error:Z,complete:n.Z}},50727:(L,W,m)=>{"use strict";m.d(W,{Lc:()=>o,w0:()=>n,Nn:()=>s});var y=m(30576);const e=(0,m(83888).d)(v=>function(O){v(this),this.message=O?`${O.length} errors occurred during unsubscription:\n${O.map((H,V)=>`${V+1}) ${H.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=O});var t=m(38737);class n{constructor(R){this.initialTeardown=R,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let R;if(!this.closed){this.closed=!0;const{_parentage:O}=this;if(O)if(this._parentage=null,Array.isArray(O))for(const G of O)G.remove(this);else O.remove(this);const{initialTeardown:H}=this;if((0,y.m)(H))try{H()}catch(G){R=G instanceof e?G.errors:[G]}const{_teardowns:V}=this;if(V){this._teardowns=null;for(const G of V)try{c(G)}catch(Z){R=null!=R?R:[],Z instanceof e?R=[...R,...Z.errors]:R.push(Z)}}if(R)throw new e(R)}}add(R){var O;if(R&&R!==this)if(this.closed)c(R);else{if(R instanceof n){if(R.closed||R._hasParent(this))return;R._addParent(this)}(this._teardowns=null!==(O=this._teardowns)&&void 0!==O?O:[]).push(R)}}_hasParent(R){const{_parentage:O}=this;return O===R||Array.isArray(O)&&O.includes(R)}_addParent(R){const{_parentage:O}=this;this._parentage=Array.isArray(O)?(O.push(R),O):O?[O,R]:R}_removeParent(R){const{_parentage:O}=this;O===R?this._parentage=null:Array.isArray(O)&&(0,t.P)(O,R)}remove(R){const{_teardowns:O}=this;O&&(0,t.P)(O,R),R instanceof n&&R._removeParent(this)}}n.EMPTY=(()=>{const v=new n;return v.closed=!0,v})();const o=n.EMPTY;function s(v){return v instanceof n||v&&"closed"in v&&(0,y.m)(v.remove)&&(0,y.m)(v.add)&&(0,y.m)(v.unsubscribe)}function c(v){(0,y.m)(v)?v():v.unsubscribe()}},42416:(L,W,m)=>{"use strict";m.d(W,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},94033:(L,W,m)=>{"use strict";m.d(W,{c:()=>o});var y=m(79307),p=m(50727),e=m(38343),t=m(25403),n=m(54482);class o extends y.y{constructor(c,v){super(),this.source=c,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,n.A)(c)&&(this.lift=c.lift)}_subscribe(c){return this.getSubject().subscribe(c)}getSubject(){const c=this._subject;return(!c||c.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:c}=this;this._subject=this._connection=null,null==c||c.unsubscribe()}connect(){let c=this._connection;if(!c){c=this._connection=new p.w0;const v=this.getSubject();c.add(this.source.subscribe(new t.Q(v,void 0,()=>{this._teardown(),v.complete()},R=>{this._teardown(),v.error(R)},()=>this._teardown()))),c.closed&&(this._connection=null,c=p.w0.EMPTY)}return c}refCount(){return(0,e.x)()(this)}}},39841:(L,W,m)=>{"use strict";m.d(W,{a:()=>R});var y=m(79307),p=m(54742),e=m(32076),t=m(44671),n=m(83268),o=m(63269),s=m(31810),c=m(25403),v=m(39672);function R(...V){const G=(0,o.yG)(V),Z=(0,o.jO)(V),{args:vt,keys:it}=(0,p.D)(V);if(0===vt.length)return(0,e.D)([],G);const ot=new y.y(function(V,G,Z=t.y){return vt=>{H(G,()=>{const{length:it}=V,ot=new Array(it);let wt=it,ct=it;for(let yt=0;yt<it;yt++)H(G,()=>{const lt=(0,e.D)(V[yt],G);let at=!1;lt.subscribe(new c.Q(vt,bt=>{ot[yt]=bt,at||(at=!0,ct--),ct||vt.next(Z(ot.slice()))},()=>{--wt||vt.complete()}))},vt)},vt)}}(vt,G,it?wt=>(0,s.n)(it,wt):t.y));return Z?ot.pipe((0,n.Z)(Z)):ot}function H(V,G,Z){V?(0,v.f)(Z,V,G):G()}},97272:(L,W,m)=>{"use strict";m.d(W,{z:()=>n});var y=m(8189),e=m(63269),t=m(32076);function n(...o){return(0,y.J)(1)((0,t.D)(o,(0,e.yG)(o)))}},49770:(L,W,m)=>{"use strict";m.d(W,{P:()=>e});var y=m(79307),p=m(38421);function e(t){return new y.y(n=>{(0,p.Xf)(t()).subscribe(n)})}},60515:(L,W,m)=>{"use strict";m.d(W,{E:()=>p});const p=new(m(79307).y)(n=>n.complete())},4128:(L,W,m)=>{"use strict";m.d(W,{D:()=>c});var y=m(79307),p=m(54742),e=m(38421),t=m(63269),n=m(25403),o=m(83268),s=m(31810);function c(...v){const R=(0,t.jO)(v),{args:O,keys:H}=(0,p.D)(v),V=new y.y(G=>{const{length:Z}=O;if(!Z)return void G.complete();const vt=new Array(Z);let it=Z,ot=Z;for(let wt=0;wt<Z;wt++){let ct=!1;(0,e.Xf)(O[wt]).subscribe(new n.Q(G,yt=>{ct||(ct=!0,ot--),vt[wt]=yt},()=>it--,void 0,()=>{(!it||!ct)&&(ot||G.next(H?(0,s.n)(H,vt):vt),G.complete())}))}});return R?V.pipe((0,o.Z)(R)):V}},32076:(L,W,m)=>{"use strict";m.d(W,{D:()=>bt});var y=m(38421),p=m(39672),e=m(54482),t=m(25403);function n(tt,Rt=0){return(0,e.e)((mt,dt)=>{mt.subscribe(new t.Q(dt,nt=>(0,p.f)(dt,tt,()=>dt.next(nt),Rt),()=>(0,p.f)(dt,tt,()=>dt.complete(),Rt),nt=>(0,p.f)(dt,tt,()=>dt.error(nt),Rt)))})}function o(tt,Rt=0){return(0,e.e)((mt,dt)=>{dt.add(tt.schedule(()=>mt.subscribe(dt),Rt))})}var v=m(79307),O=m(2202),H=m(30576);function G(tt,Rt){if(!tt)throw new Error("Iterable cannot be null");return new v.y(mt=>{(0,p.f)(mt,Rt,()=>{const dt=tt[Symbol.asyncIterator]();(0,p.f)(mt,Rt,()=>{dt.next().then(nt=>{nt.done?mt.complete():mt.next(nt.value)})},0,!0)})})}var Z=m(93670),vt=m(28239),it=m(81144),ot=m(26495),wt=m(12206),ct=m(44532),yt=m(53260);function bt(tt,Rt){return Rt?function(tt,Rt){if(null!=tt){if((0,Z.c)(tt))return function(tt,Rt){return(0,y.Xf)(tt).pipe(o(Rt),n(Rt))}(tt,Rt);if((0,it.z)(tt))return function(tt,Rt){return new v.y(mt=>{let dt=0;return Rt.schedule(function(){dt===tt.length?mt.complete():(mt.next(tt[dt++]),mt.closed||this.schedule())})})}(tt,Rt);if((0,vt.t)(tt))return function(tt,Rt){return(0,y.Xf)(tt).pipe(o(Rt),n(Rt))}(tt,Rt);if((0,wt.D)(tt))return G(tt,Rt);if((0,ot.T)(tt))return function(tt,Rt){return new v.y(mt=>{let dt;return(0,p.f)(mt,Rt,()=>{dt=tt[O.h](),(0,p.f)(mt,Rt,()=>{let nt,st;try{({value:nt,done:st}=dt.next())}catch(Gt){return void mt.error(Gt)}st?mt.complete():mt.next(nt)},0,!0)}),()=>(0,H.m)(null==dt?void 0:dt.return)&&dt.return()})}(tt,Rt);if((0,yt.L)(tt))return function(tt,Rt){return G((0,yt.Q)(tt),Rt)}(tt,Rt)}throw(0,ct.z)(tt)}(tt,Rt):(0,y.Xf)(tt)}},54968:(L,W,m)=>{"use strict";m.d(W,{R:()=>R});var y=m(38421),p=m(79307),e=m(95577),t=m(81144),n=m(30576),o=m(83268);const s=["addListener","removeListener"],c=["addEventListener","removeEventListener"],v=["on","off"];function R(Z,vt,it,ot){if((0,n.m)(it)&&(ot=it,it=void 0),ot)return R(Z,vt,it).pipe((0,o.Z)(ot));const[wt,ct]=function(Z){return(0,n.m)(Z.addEventListener)&&(0,n.m)(Z.removeEventListener)}(Z)?c.map(yt=>lt=>Z[yt](vt,lt,it)):function(Z){return(0,n.m)(Z.addListener)&&(0,n.m)(Z.removeListener)}(Z)?s.map(O(Z,vt)):function(Z){return(0,n.m)(Z.on)&&(0,n.m)(Z.off)}(Z)?v.map(O(Z,vt)):[];if(!wt&&(0,t.z)(Z))return(0,e.z)(yt=>R(yt,vt,it))((0,y.Xf)(Z));if(!wt)throw new TypeError("Invalid event target");return new p.y(yt=>{const lt=(...at)=>yt.next(1<at.length?at:at[0]);return wt(lt),()=>ct(lt)})}function O(Z,vt){return it=>ot=>Z[it](vt,ot)}},38421:(L,W,m)=>{"use strict";m.d(W,{Xf:()=>V});var y=m(35987),p=m(81144),e=m(28239),t=m(79307),n=m(93670),o=m(12206),s=m(44532),c=m(26495),v=m(53260),R=m(30576),O=m(87849),H=m(48822);function V(yt){if(yt instanceof t.y)return yt;if(null!=yt){if((0,n.c)(yt))return function(yt){return new t.y(lt=>{const at=yt[H.L]();if((0,R.m)(at.subscribe))return at.subscribe(lt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(yt);if((0,p.z)(yt))return function(yt){return new t.y(lt=>{for(let at=0;at<yt.length&&!lt.closed;at++)lt.next(yt[at]);lt.complete()})}(yt);if((0,e.t)(yt))return function(yt){return new t.y(lt=>{yt.then(at=>{lt.closed||(lt.next(at),lt.complete())},at=>lt.error(at)).then(null,O.h)})}(yt);if((0,o.D)(yt))return ot(yt);if((0,c.T)(yt))return function(yt){return new t.y(lt=>{for(const at of yt)if(lt.next(at),lt.closed)return;lt.complete()})}(yt);if((0,v.L)(yt))return function(yt){return ot((0,v.Q)(yt))}(yt)}throw(0,s.z)(yt)}function ot(yt){return new t.y(lt=>{(function(yt,lt){var at,bt,tt,Rt;return(0,y.mG)(this,void 0,void 0,function*(){try{for(at=(0,y.KL)(yt);!(bt=yield at.next()).done;)if(lt.next(bt.value),lt.closed)return}catch(mt){tt={error:mt}}finally{try{bt&&!bt.done&&(Rt=at.return)&&(yield Rt.call(at))}finally{if(tt)throw tt.error}}lt.complete()})})(yt,lt).catch(at=>lt.error(at))})}},56451:(L,W,m)=>{"use strict";m.d(W,{T:()=>o});var y=m(8189),p=m(38421),e=m(60515),t=m(63269),n=m(32076);function o(...s){const c=(0,t.yG)(s),v=(0,t._6)(s,1/0),R=s;return R.length?1===R.length?(0,p.Xf)(R[0]):(0,y.J)(v)((0,n.D)(R,c)):e.E}},39646:(L,W,m)=>{"use strict";m.d(W,{of:()=>e});var y=m(63269),p=m(32076);function e(...t){const n=(0,y.yG)(t);return(0,p.D)(t,n)}},62843:(L,W,m)=>{"use strict";m.d(W,{_:()=>e});var y=m(79307),p=m(30576);function e(t,n){const o=(0,p.m)(t)?t:()=>t,s=c=>c.error(o());return new y.y(n?c=>n.schedule(s,0,c):s)}},5963:(L,W,m)=>{"use strict";m.d(W,{H:()=>n});var y=m(79307),p=m(34986),e=m(93532);function n(o=0,s,c=p.P){let v=-1;return null!=s&&((0,e.K)(s)?c=s:v=s),new y.y(R=>{let O=function(o){return o instanceof Date&&!isNaN(o)}(o)?+o-c.now():o;O<0&&(O=0);let H=0;return c.schedule(function(){R.closed||(R.next(H++),0<=v?this.schedule(void 0,v):R.complete())},O)})}},25403:(L,W,m)=>{"use strict";m.d(W,{Q:()=>p});var y=m(70930);class p extends y.Lv{constructor(t,n,o,s,c){super(t),this.onFinalize=c,this._next=n?function(v){try{n(v)}catch(R){t.error(R)}}:super._next,this._error=s?function(v){try{s(v)}catch(R){t.error(R)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(v){t.error(v)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}},70262:(L,W,m)=>{"use strict";m.d(W,{K:()=>t});var y=m(38421),p=m(25403),e=m(54482);function t(n){return(0,e.e)((o,s)=>{let R,c=null,v=!1;c=o.subscribe(new p.Q(s,void 0,void 0,O=>{R=(0,y.Xf)(n(O,t(n)(o))),c?(c.unsubscribe(),c=null,R.subscribe(s)):v=!0})),v&&(c.unsubscribe(),c=null,R.subscribe(s))})}},24351:(L,W,m)=>{"use strict";m.d(W,{b:()=>e});var y=m(95577),p=m(30576);function e(t,n){return(0,p.m)(n)?(0,y.z)(t,n,1):(0,y.z)(t,1)}},78372:(L,W,m)=>{"use strict";m.d(W,{b:()=>t});var y=m(34986),p=m(54482),e=m(25403);function t(n,o=y.z){return(0,p.e)((s,c)=>{let v=null,R=null,O=null;const H=()=>{if(v){v.unsubscribe(),v=null;const G=R;R=null,c.next(G)}};function V(){const G=O+n,Z=o.now();if(Z<G)return v=this.schedule(void 0,G-Z),void c.add(v);H()}s.subscribe(new e.Q(c,G=>{R=G,O=o.now(),v||(v=o.schedule(V,n),c.add(v))},()=>{H(),c.complete()},void 0,()=>{R=v=null}))})}},91005:(L,W,m)=>{"use strict";m.d(W,{g:()=>H});var y=m(34986),p=m(97272),e=m(95698),t=m(54482),n=m(25403),o=m(25032),c=m(69718),v=m(95577);function R(V,G){return G?Z=>(0,p.z)(G.pipe((0,e.q)(1),(0,t.e)((V,G)=>{V.subscribe(new n.Q(G,o.Z))})),Z.pipe(R(V))):(0,v.z)((Z,vt)=>V(Z,vt).pipe((0,e.q)(1),(0,c.h)(Z)))}var O=m(5963);function H(V,G=y.z){const Z=(0,O.H)(V,G);return R(()=>Z)}},71884:(L,W,m)=>{"use strict";m.d(W,{x:()=>t});var y=m(44671),p=m(54482),e=m(25403);function t(o,s=y.y){return o=null!=o?o:n,(0,p.e)((c,v)=>{let R,O=!0;c.subscribe(new e.Q(v,H=>{const V=s(H);(O||!o(R,V))&&(O=!1,R=V,v.next(H))}))})}function n(o,s){return o===s}},39300:(L,W,m)=>{"use strict";m.d(W,{h:()=>e});var y=m(54482),p=m(25403);function e(t,n){return(0,y.e)((o,s)=>{let c=0;o.subscribe(new p.Q(s,v=>t.call(n,v,c++)&&s.next(v)))})}},28746:(L,W,m)=>{"use strict";m.d(W,{x:()=>p});var y=m(54482);function p(e){return(0,y.e)((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}},54004:(L,W,m)=>{"use strict";m.d(W,{U:()=>e});var y=m(54482),p=m(25403);function e(t,n){return(0,y.e)((o,s)=>{let c=0;o.subscribe(new p.Q(s,v=>{s.next(t.call(n,v,c++))}))})}},69718:(L,W,m)=>{"use strict";m.d(W,{h:()=>p});var y=m(54004);function p(e){return(0,y.U)(()=>e)}},8189:(L,W,m)=>{"use strict";m.d(W,{J:()=>e});var y=m(95577),p=m(44671);function e(t=1/0){return(0,y.z)(p.y,t)}},95577:(L,W,m)=>{"use strict";m.d(W,{z:()=>c});var y=m(54004),p=m(38421),e=m(54482),n=(m(39672),m(25403)),s=m(30576);function c(v,R,O=1/0){return(0,s.m)(R)?c((H,V)=>(0,y.U)((G,Z)=>R(H,G,V,Z))((0,p.Xf)(v(H,V))),O):("number"==typeof R&&(O=R),(0,e.e)((H,V)=>function(v,R,O,H,V,G,Z,vt){const it=[];let ot=0,wt=0,ct=!1;const yt=()=>{ct&&!it.length&&!ot&&R.complete()},lt=bt=>ot<H?at(bt):it.push(bt),at=bt=>{ot++;let tt=!1;(0,p.Xf)(O(bt,wt++)).subscribe(new n.Q(R,Rt=>{R.next(Rt)},()=>{tt=!0},void 0,()=>{if(tt)try{for(ot--;it.length&&ot<H;){const Rt=it.shift();at(Rt)}yt()}catch(Rt){R.error(Rt)}}))};return v.subscribe(new n.Q(R,lt,()=>{ct=!0,yt()})),()=>{}}(H,V,v,O)))}},38343:(L,W,m)=>{"use strict";m.d(W,{x:()=>e});var y=m(54482),p=m(25403);function e(){return(0,y.e)((t,n)=>{let o=null;t._refCount++;const s=new p.Q(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(o=null);const c=t._connection,v=o;o=null,c&&(!v||c===v)&&c.unsubscribe(),n.unsubscribe()});t.subscribe(s),s.closed||(o=t.connect())})}},13099:(L,W,m)=>{"use strict";m.d(W,{B:()=>o});var y=m(32076),p=m(95698),e=m(77579),t=m(70930),n=m(54482);function o(c={}){const{connector:v=(()=>new e.x),resetOnError:R=!0,resetOnComplete:O=!0,resetOnRefCountZero:H=!0}=c;return V=>{let G=null,Z=null,vt=null,it=0,ot=!1,wt=!1;const ct=()=>{null==Z||Z.unsubscribe(),Z=null},yt=()=>{ct(),G=vt=null,ot=wt=!1},lt=()=>{const at=G;yt(),null==at||at.unsubscribe()};return(0,n.e)((at,bt)=>{it++,!wt&&!ot&&ct();const tt=vt=null!=vt?vt:v();bt.add(()=>{it--,0===it&&!wt&&!ot&&(Z=s(lt,H))}),tt.subscribe(bt),G||(G=new t.Hp({next:Rt=>tt.next(Rt),error:Rt=>{wt=!0,ct(),Z=s(yt,R,Rt),tt.error(Rt)},complete:()=>{ot=!0,ct(),Z=s(yt,O),tt.complete()}}),(0,y.D)(at).subscribe(G))})(V)}}function s(c,v,...R){return!0===v?(c(),null):!1===v?null:v(...R).pipe((0,p.q)(1)).subscribe(()=>c())}},35684:(L,W,m)=>{"use strict";m.d(W,{T:()=>p});var y=m(39300);function p(e){return(0,y.h)((t,n)=>e<=n)}},68675:(L,W,m)=>{"use strict";m.d(W,{O:()=>t});var y=m(97272),p=m(63269),e=m(54482);function t(...n){const o=(0,p.yG)(n);return(0,e.e)((s,c)=>{(o?(0,y.z)(n,s,o):(0,y.z)(n,s)).subscribe(c)})}},63900:(L,W,m)=>{"use strict";m.d(W,{w:()=>t});var y=m(38421),p=m(54482),e=m(25403);function t(n,o){return(0,p.e)((s,c)=>{let v=null,R=0,O=!1;const H=()=>O&&!v&&c.complete();s.subscribe(new e.Q(c,V=>{null==v||v.unsubscribe();let G=0;const Z=R++;(0,y.Xf)(n(V,Z)).subscribe(v=new e.Q(c,vt=>c.next(o?o(V,vt,Z,G++):vt),()=>{v=null,H()}))},()=>{O=!0,H()}))})}},95698:(L,W,m)=>{"use strict";m.d(W,{q:()=>t});var y=m(60515),p=m(54482),e=m(25403);function t(n){return n<=0?()=>y.E:(0,p.e)((o,s)=>{let c=0;o.subscribe(new e.Q(s,v=>{++c<=n&&(s.next(v),n<=c&&s.complete())}))})}},82722:(L,W,m)=>{"use strict";m.d(W,{R:()=>n});var y=m(54482),p=m(25403),e=m(38421),t=m(25032);function n(o){return(0,y.e)((s,c)=>{(0,e.Xf)(o).subscribe(new p.Q(c,()=>c.complete(),t.Z)),!c.closed&&s.subscribe(c)})}},18505:(L,W,m)=>{"use strict";m.d(W,{b:()=>n});var y=m(30576),p=m(54482),e=m(25403),t=m(44671);function n(o,s,c){const v=(0,y.m)(o)||s||c?{next:o,error:s,complete:c}:o;return v?(0,p.e)((R,O)=>{var H;null===(H=v.subscribe)||void 0===H||H.call(v);let V=!0;R.subscribe(new e.Q(O,G=>{var Z;null===(Z=v.next)||void 0===Z||Z.call(v,G),O.next(G)},()=>{var G;V=!1,null===(G=v.complete)||void 0===G||G.call(v),O.complete()},G=>{var Z;V=!1,null===(Z=v.error)||void 0===Z||Z.call(v,G),O.error(G)},()=>{var G,Z;V&&(null===(G=v.unsubscribe)||void 0===G||G.call(v)),null===(Z=v.finalize)||void 0===Z||Z.call(v)}))}):t.y}},84408:(L,W,m)=>{"use strict";m.d(W,{o:()=>n});var y=m(50727);class p extends y.w0{constructor(s,c){super()}schedule(s,c=0){return this}}const e={setInterval(...o){const{delegate:s}=e;return((null==s?void 0:s.setInterval)||setInterval)(...o)},clearInterval(o){const{delegate:s}=e;return((null==s?void 0:s.clearInterval)||clearInterval)(o)},delegate:void 0};var t=m(38737);class n extends p{constructor(s,c){super(s,c),this.scheduler=s,this.work=c,this.pending=!1}schedule(s,c=0){if(this.closed)return this;this.state=s;const v=this.id,R=this.scheduler;return null!=v&&(this.id=this.recycleAsyncId(R,v,c)),this.pending=!0,this.delay=c,this.id=this.id||this.requestAsyncId(R,this.id,c),this}requestAsyncId(s,c,v=0){return e.setInterval(s.flush.bind(s,this),v)}recycleAsyncId(s,c,v=0){if(null!=v&&this.delay===v&&!1===this.pending)return c;e.clearInterval(c)}execute(s,c){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const v=this._execute(s,c);if(v)return v;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,c){let R,v=!1;try{this.work(s)}catch(O){v=!0,R=O||new Error("Scheduled action threw falsy error")}if(v)return this.unsubscribe(),R}unsubscribe(){if(!this.closed){const{id:s,scheduler:c}=this,{actions:v}=c;this.work=this.state=this.scheduler=null,this.pending=!1,(0,t.P)(v,this),null!=s&&(this.id=this.recycleAsyncId(c,s,null)),this.delay=null,super.unsubscribe()}}}},97565:(L,W,m)=>{"use strict";m.d(W,{v:()=>e});var y=m(26063);class p{constructor(n,o=p.now){this.schedulerActionCtor=n,this.now=o}schedule(n,o=0,s){return new this.schedulerActionCtor(this,n).schedule(s,o)}}p.now=y.l.now;class e extends p{constructor(n,o=p.now){super(n,o),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:o}=this;if(this._active)return void o.push(n);let s;this._active=!0;do{if(s=n.execute(n.state,n.delay))break}while(n=o.shift());if(this._active=!1,s){for(;n=o.shift();)n.unsubscribe();throw s}}}},53101:(L,W,m)=>{"use strict";m.d(W,{E:()=>G});var y=m(84408);let e,p=1;const t={};function n(vt){return vt in t&&(delete t[vt],!0)}const o={setImmediate(vt){const it=p++;return t[it]=!0,e||(e=Promise.resolve()),e.then(()=>n(it)&&vt()),it},clearImmediate(vt){n(vt)}},{setImmediate:c,clearImmediate:v}=o,R={setImmediate(...vt){const{delegate:it}=R;return((null==it?void 0:it.setImmediate)||c)(...vt)},clearImmediate(vt){const{delegate:it}=R;return((null==it?void 0:it.clearImmediate)||v)(vt)},delegate:void 0};var H=m(97565);const G=new class extends H.v{flush(it){this._active=!0,this._scheduled=void 0;const{actions:ot}=this;let wt,ct=-1;it=it||ot.shift();const yt=ot.length;do{if(wt=it.execute(it.state,it.delay))break}while(++ct<yt&&(it=ot.shift()));if(this._active=!1,wt){for(;++ct<yt&&(it=ot.shift());)it.unsubscribe();throw wt}}}(class extends y.o{constructor(it,ot){super(it,ot),this.scheduler=it,this.work=ot}requestAsyncId(it,ot,wt=0){return null!==wt&&wt>0?super.requestAsyncId(it,ot,wt):(it.actions.push(this),it._scheduled||(it._scheduled=R.setImmediate(it.flush.bind(it,void 0))))}recycleAsyncId(it,ot,wt=0){if(null!=wt&&wt>0||null==wt&&this.delay>0)return super.recycleAsyncId(it,ot,wt);0===it.actions.length&&(R.clearImmediate(ot),it._scheduled=void 0)}})},34986:(L,W,m)=>{"use strict";m.d(W,{z:()=>e,P:()=>t});var y=m(84408);const e=new(m(97565).v)(y.o),t=e},26063:(L,W,m)=>{"use strict";m.d(W,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},43410:(L,W,m)=>{"use strict";m.d(W,{z:()=>y});const y={setTimeout(...p){const{delegate:e}=y;return((null==e?void 0:e.setTimeout)||setTimeout)(...p)},clearTimeout(p){const{delegate:e}=y;return((null==e?void 0:e.clearTimeout)||clearTimeout)(p)},delegate:void 0}},2202:(L,W,m)=>{"use strict";m.d(W,{h:()=>p});const p="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},48822:(L,W,m)=>{"use strict";m.d(W,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},63269:(L,W,m)=>{"use strict";m.d(W,{jO:()=>t,yG:()=>n,_6:()=>o});var y=m(30576),p=m(93532);function e(s){return s[s.length-1]}function t(s){return(0,y.m)(e(s))?s.pop():void 0}function n(s){return(0,p.K)(e(s))?s.pop():void 0}function o(s,c){return"number"==typeof e(s)?s.pop():c}},54742:(L,W,m)=>{"use strict";m.d(W,{D:()=>n});const{isArray:y}=Array,{getPrototypeOf:p,prototype:e,keys:t}=Object;function n(s){if(1===s.length){const c=s[0];if(y(c))return{args:c,keys:null};if(function(s){return s&&"object"==typeof s&&p(s)===e}(c)){const v=t(c);return{args:v.map(R=>c[R]),keys:v}}}return{args:s,keys:null}}},38737:(L,W,m)=>{"use strict";function y(p,e){if(p){const t=p.indexOf(e);0<=t&&p.splice(t,1)}}m.d(W,{P:()=>y})},83888:(L,W,m)=>{"use strict";function y(p){const t=p(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}m.d(W,{d:()=>y})},31810:(L,W,m)=>{"use strict";function y(p,e){return p.reduce((t,n,o)=>(t[n]=e[o],t),{})}m.d(W,{n:()=>y})},72806:(L,W,m)=>{"use strict";m.d(W,{x:()=>e,O:()=>t});var y=m(42416);let p=null;function e(n){if(y.v.useDeprecatedSynchronousErrorHandling){const o=!p;if(o&&(p={errorThrown:!1,error:null}),n(),o){const{errorThrown:s,error:c}=p;if(p=null,s)throw c}}else n()}function t(n){y.v.useDeprecatedSynchronousErrorHandling&&p&&(p.errorThrown=!0,p.error=n)}},39672:(L,W,m)=>{"use strict";function y(p,e,t,n=0,o=!1){const s=e.schedule(function(){t(),o?p.add(this.schedule(null,n)):this.unsubscribe()},n);if(p.add(s),!o)return s}m.d(W,{f:()=>y})},44671:(L,W,m)=>{"use strict";function y(p){return p}m.d(W,{y:()=>y})},81144:(L,W,m)=>{"use strict";m.d(W,{z:()=>y});const y=p=>p&&"number"==typeof p.length&&"function"!=typeof p},12206:(L,W,m)=>{"use strict";m.d(W,{D:()=>p});var y=m(30576);function p(e){return Symbol.asyncIterator&&(0,y.m)(null==e?void 0:e[Symbol.asyncIterator])}},30576:(L,W,m)=>{"use strict";function y(p){return"function"==typeof p}m.d(W,{m:()=>y})},93670:(L,W,m)=>{"use strict";m.d(W,{c:()=>e});var y=m(48822),p=m(30576);function e(t){return(0,p.m)(t[y.L])}},26495:(L,W,m)=>{"use strict";m.d(W,{T:()=>e});var y=m(2202),p=m(30576);function e(t){return(0,p.m)(null==t?void 0:t[y.h])}},28239:(L,W,m)=>{"use strict";m.d(W,{t:()=>p});var y=m(30576);function p(e){return(0,y.m)(null==e?void 0:e.then)}},53260:(L,W,m)=>{"use strict";m.d(W,{Q:()=>e,L:()=>t});var y=m(35987),p=m(30576);function e(n){return(0,y.FC)(this,arguments,function*(){const s=n.getReader();try{for(;;){const{value:c,done:v}=yield(0,y.qq)(s.read());if(v)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(c)}}finally{s.releaseLock()}})}function t(n){return(0,p.m)(null==n?void 0:n.getReader)}},93532:(L,W,m)=>{"use strict";m.d(W,{K:()=>p});var y=m(30576);function p(e){return e&&(0,y.m)(e.schedule)}},54482:(L,W,m)=>{"use strict";m.d(W,{A:()=>p,e:()=>e});var y=m(30576);function p(t){return(0,y.m)(null==t?void 0:t.lift)}function e(t){return n=>{if(p(n))return n.lift(function(o){try{return t(o,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}},83268:(L,W,m)=>{"use strict";m.d(W,{Z:()=>t});var y=m(54004);const{isArray:p}=Array;function t(n){return(0,y.U)(o=>function(n,o){return p(o)?n(...o):n(o)}(n,o))}},25032:(L,W,m)=>{"use strict";function y(){}m.d(W,{Z:()=>y})},87849:(L,W,m)=>{"use strict";m.d(W,{h:()=>e});var y=m(42416),p=m(43410);function e(t){p.z.setTimeout(()=>{const{onUnhandledError:n}=y.v;if(!n)throw t;n(t)})}},44532:(L,W,m)=>{"use strict";function y(p){return new TypeError(`You provided ${null!==p&&"object"==typeof p?"an invalid object":`'${p}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}m.d(W,{z:()=>y})},34346:(L,W,m)=>{L.exports={interpreterHelper:m(44489),saveBlocksUrl:m(18449),saveLoad:m(79628)}},44489:(L,W,m)=>{const y=m(55841),p=m(61058);p.registerPlugin(m(17131)),W.createInterpreter=function(e,t){return{latestCode:"",workspace:e,BlocklyJavaScript:t,step:0,highlightPause:!1,myInterpreter:null,runner:null,generateCodeAndLoadIntoInterpreter:function(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(e),this.resetStepUi(!0)},resetStepUi:function(n){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1},resetInterpreter:function(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)},highlightBlock:function(n){this.workspace.highlightBlock(n),highlightPause=!0},nextStep:function(n,o){console.log("next step"),n.myInterpreter.step()?setTimeout((s,c)=>{s.nextStep(s,c)},10,n,o):(o?o():console.log("\n\n<< Program complete >>"),n.resetInterpreter(),n.resetStepUi(!1))},runCode:function(n,o,s,c){""==c&&(c=this.latestCode),this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var v=this;v.myInterpreter=n(c,(R,O)=>v.initApiJS(R,O,v,o,s)),1!=window.runOneByOne?setTimeout(function(){this.highlightPause=!1,v.runner=function(){v.myInterpreter&&(v.myInterpreter.run()?setTimeout(v.runner,10):(s?s():console.log("\n\n<< Program complete >>"),v.resetInterpreter(),v.resetStepUi(!1)))},v.runner&&v.runner()},100):this.nextStep(v,s)},initInterpreterWaitForSeconds:function(n,o){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var s=n.createAsyncFunction(function(c,v){setTimeout(v,1e3*c)});n.setProperty(o,"waitForSeconds",s)},getCreds:function(n,o,s){var c=n.pseudoToNative(o),v="(localSite)";(s.startsWith("http://")||s.startsWith("https://"))&&(v=new URL(s).hostname);var R=!1;return v in c?R=c[v]:"*"in c&&(R=c["*"]),R},getHeaders:function(n,o,s){var c=n.pseudoToNative(o),v="(localSite)";(s.startsWith("http://")||s.startsWith("https://"))&&(v=new URL(s).hostname);var R=[];return v in c?R=c[v]:"*"in c&&(R=c["*"]),R},doGet:function(n,o,s,c){let v=new XMLHttpRequest;v.open("GET",n,!0),this.generateDataAndCreds(v,s,c,!1),v.onreadystatechange=function(){if(4==v.readyState){if(v.status>=200&&v.status<300){var R=JSON.stringify({origHref:n,objectToSend:"",status:v.status,statusOK:!0,text:v.responseText});return o(R)}return R=JSON.stringify({origHref:n,objectToSend:"",status:v.status,statusOK:!1,text:v.responseText,headers:v.getAllResponseHeaders()}),o(R)}},v.send(null)},exportToFile:function(n,o,s){var v,c=m(18642);return v=s?this.b64toBlob(o):new Blob([o],{type:"text/plain;charset=utf-8"}),c.saveAs(v,n),n},b64toBlob:function(n,o="",s=512){const c=atob(n),v=[];for(let O=0;O<c.length;O+=s){const H=c.slice(O,O+s),V=new Array(H.length);for(let Z=0;Z<H.length;Z++)V[Z]=H.charCodeAt(Z);const G=new Uint8Array(V);v.push(G)}return new Blob(v,{type:o})},displayDateCurrentAsHuman:function(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},displayDateCurrentAsIso:function(){return(new Date).toISOString()},displayDateCurrentAsUnix:function(){return Date.now()},displayDateFormatted:function(n){switch(n){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:console.log("Date time format not suported")}},generateDataAndCreds(n,o,s,c){if(s)n.withCredentials=s;else{var v=!1;if(o&&o.length>0)for(var R=0;R<o.length;R++){var O=o[R];"Content-Type"==O.name&&(v=!0),n.setRequestHeader(O.name,O.value)}c&&!v&&n.setRequestHeader("Content-Type","application/json;charset=UTF-8")}},doPut:(n,o,s,c,v)=>{let R=o,O=new XMLHttpRequest;O.open("PUT",n,!0),this.generateDataAndCreds(O,c,v,!!o),O.onreadystatechange=function(){if(4==O.readyState){if(O.status>=200&&O.status<300){var H=JSON.stringify({origHref:n,objectToSend:o,status:O.status,statusOK:!0,text:O.responseText});return s(H)}return H=JSON.stringify({origHref:n,objectToSend:o,status:O.status,statusOK:!1,text:O.responseText,objectToSend:o,headers:O.getAllResponseHeaders()}),s(H)}},O.send(R)},doDelete:function(n,o,s,c,v){let R=o;var O=new XMLHttpRequest;O.open("DELETE",n,!0),this.generateDataAndCreds(O,c,v,!!o),O.onreadystatechange=function(){if(4==O.readyState){if(O.status>=200&&O.status<300){var H=JSON.stringify({origHref:n,objectToSend:"",status:O.status,statusOK:!0,text:O.responseText});return s(H)}return H=JSON.stringify({origHref:n,objectToSend:"",status:O.status,statusOK:!1,text:O.responseText,objectToSend:o,headers:O.getAllResponseHeaders()}),s(H)}},O.send(R)},doPost:function(n,o,s,c,v){let R=o,O=new XMLHttpRequest;O.open("POST",n,!0),this.generateDataAndCreds(O,c,v,!!o),O.onreadystatechange=function(){if(4==O.readyState){if(O.status>=200&&O.status<300){var H=JSON.stringify({origHref:n,objectToSend:o,status:O.status,statusOK:!0,text:O.responseText});return s(H)}return H=JSON.stringify({origHref:n,objectToSend:o,status:O.status,statusOK:!1,text:O.responseText,objectToSend:o,headers:O.getAllResponseHeaders()}),s(H)}},O.send(R)},initApiJS:function(n,o,s,c,v){n.setProperty(o,"errHandler",n.createNativeFunction(R=V=>{c?c("\n error --\n"+V+"\n error --"):console.log(V)}));var O=n.nativeToPseudo({"(localSite)":!1});n.setProperty(o,"withCredsForDomain",O);var H=n.nativeToPseudo({"(localSite)":[]});n.setProperty(o,"headersForDomain",H),n.setProperty(o,"alert1",n.createNativeFunction(R=function(V){V=V?V.toString():"",window.alert(V)})),n.setProperty(o,"playPiano",n.createNativeFunction(R=function(V,G,Z){y.Synth.createInstrument("piano").play(V,G,Z)})),n.setProperty(o,"startDebugger",n.createNativeFunction(R=function(V,G,Z){s.highlightBlock(G),console.log(V,G,Z)})),n.setProperty(o,"alert",n.createNativeFunction(R=function(V){V=V?V.toString():"",c?c(V):console.log(V)})),n.setProperty(o,"waitTime",n.createAsyncFunction(R=(V,G)=>{console.log(`waiting seconds ${V}`),setTimeout(G,1e3*V)})),n.setProperty(o,"displayDateFormatted",n.createNativeFunction(R=V=>s.displayDateFormatted(V))),n.setProperty(o,"exportToFile",n.createNativeFunction(R=(V,G,Z)=>s.exportToFile(V,G,Z))),n.setProperty(o,"convertToCSV",n.createNativeFunction(R=V=>{let G="object"!=typeof V?JSON.parse(V):{};return G=[Object.keys(G[0])].concat(G),G.map(vt=>Object.values(vt).toString()).join("\n")})),n.setProperty(o,"open",n.createNativeFunction(R=function(V){window.open(V,"_blank")})),n.setProperty(o,"changeHost",n.createNativeFunction(R=function(V,G){if(0==(G=(G=G?G.toString():"").trim()).length)return V;if(0==(V=(V=V||"").trim()).length&&!(V=G).startsWith("http"))throw`please put in front of ${G} http:// or https://`;(V=new URL(V)).hostname=G.replace("https://","").replace("http://","");var Z=V.href;return Z.endsWith("/")&&(Z=Z.substring(0,Z.length-1)),Z})),n.setProperty(o,"changePort",n.createNativeFunction(R=function(V,G){V=new URL(V),console.log(`url ${V.href}`),V.port=G,console.log(`url ${V.href}`);var Z=V.href;return Z.endsWith("/")&&(Z=Z.substring(0,Z.length-1)),Z})),n.setProperty(o,"speakDefault",n.createNativeFunction(R=function(V,G,Z,vt,it){var ot=new SpeechSynthesisUtterance(V);window.speechSynthesis.speak(ot)}));var R=n.createAsyncFunction(function(V,G){return p.defaultOptions.className="vex-theme-os",V=V?V.toString():"",p.dialog.prompt({message:V,callback:G})});n.setProperty(o,"prompt",R),s.BlocklyJavaScript.addReservedWords("waitForSeconds"),R=n.createAsyncFunction(function(V,G){setTimeout(G,1e3*V)}),n.setProperty(o,"waitForSeconds",R),n.setProperty(o,"getXhr",n.createAsyncFunction(R=(V,G)=>{var Z=s.getHeaders(n,H,V),vt=s.getCreds(n,O,V);return s.doGet(V,G,Z,vt)})),n.setProperty(o,"postXhr",n.createAsyncFunction(R=(V,G,Z)=>{try{var vt=s.getHeaders(n,H,V),it=s.getCreds(n,O,V);s.doPost(V,G,Z,vt,it)}catch(ot){alert("is an error"+ot)}})),n.setProperty(o,"deleteXhr",n.createAsyncFunction(R=(V,G,Z)=>{try{var vt=s.getHeaders(n,H,V),it=s.getCreds(n,O,V);s.doDelete(V,G,Z,vt,it)}catch(ot){alert("is an error"+ot)}})),R=(V,G,Z)=>{try{var vt=n.pseudoToNative(H),it="(localSite)";(V.startsWith("http://")||V.startsWith("https://"))&&(it=new URL(V).hostname);var ot=[];it in vt&&(ot=vt[it]),s.doPut(V,G,Z,ot,!1)}catch(ct){alert("is an error"+ct)}},n.setProperty(o,"putXhr",n.createAsyncFunction(R)),R=function(V){return V=V?V.toString():"",n.createPrimitive(s.highlightBlock(V))},n.setProperty(o,"highlightBlock",n.createNativeFunction(R))}}}},55841:(L,W,m)=>{"use strict";var y,p,e;m.r(W),m.d(W,{Synth:()=>y}),function(){var t=window.URL||window.webkitURL,n=window.Blob;if(!t||!n)throw new Error("This browser does not support AudioSynth");var o=!1,s=null,c=function(V,G){return[new Uint8Array([G,G>>8]),new Uint8Array([G,G>>8,G>>16,G>>24])][V]},v=function(V,G,Z,vt){Object.defineProperty(this,V,{value:G,writable:!!Z,enumerable:!!vt})},R=function(V,G,Z){v.call(this,V,G,Z,!0)};e=function(){this.__init__.apply(this,arguments)};var O=v.bind(e.prototype),H=R.bind(e.prototype);O("__init__",function(V,G,Z){if(!o)throw new Error("AudioSynthInstrument can only be instantiated from the createInstrument method of the AudioSynth object.");v.call(this,"_parent",V),R.call(this,"name",G),v.call(this,"_soundID",Z)}),H("play",function(V,G,Z){return this._parent.play(this._soundID,V,G,Z)}),H("generate",function(V,G,Z){return this._parent.generate(this._soundID,V,G,Z)}),O=v.bind((p=function V(){return s instanceof V?s:(this.__init__(),this)}).prototype),H=R.bind(p.prototype),O("_debug",!1,!0),O("_bitsPerSample",16),O("_channels",1),O("_sampleRate",44100,!0),H("setSampleRate",function(V){return this._sampleRate=Math.max(Math.min(0|V,44100),4e3),this._clearCache(),this._sampleRate}),H("getSampleRate",function(){return this._sampleRate}),O("_volume",32768,!0),H("setVolume",function(V){return V=parseFloat(V),isNaN(V)&&(V=0),V=Math.round(32768*V),this._volume=Math.max(Math.min(0|V,32768),0),this._clearCache(),this._volume}),H("getVolume",function(){return Math.round(this._volume/32768*1e4)/1e4}),O("_notes",{C:261.63,"C#":277.18,D:293.66,"D#":311.13,E:329.63,F:349.23,"F#":369.99,G:392,"G#":415.3,A:440,"A#":466.16,B:493.88}),O("_fileCache",[],!0),O("_temp",{},!0),O("_sounds",[],!0),O("_mod",[function(V,G,Z,vt){return Math.sin(2*Math.PI*(V/G)*Z+vt)}]),O("_resizeCache",function(){for(var V=this._fileCache,G=this._sounds.length;V.length<G;){for(var Z=[],vt=0;vt<8;vt++){var it={};for(var ot in this._notes)it[ot]={};Z.push(it)}V.push(Z)}}),O("_clearCache",function(){this._fileCache=[],this._resizeCache()}),H("generate",function(V,G,Z,vt){var it=this._sounds[V];if(!it)for(var ot=0;ot<this._sounds.length;ot++)if(this._sounds[ot].name==V){it=this._sounds[ot],V=ot;break}if(!it)throw new Error("Invalid sound or sound ID: "+V);var wt=(new Date).valueOf();this._temp={},Z|=0,Z=Math.min(8,Math.max(1,Z));var ct=vt?parseFloat(vt):2;if(void 0===this._notes[G])throw new Error(G+" is not a valid note.");if(void 0!==this._fileCache[V][Z-1][G][ct])return this._debug&&console.log((new Date).valueOf()-wt,"ms to retrieve (cached)"),this._fileCache[V][Z-1][G][ct];var yt=this._notes[G]*Math.pow(2,Z-4),lt=this._sampleRate,at=this._volume,bt=this._channels,tt=this._bitsPerSample,Rt=it.attack(lt,yt,at),mt=it.dampen(lt,yt,at),dt=it.wave,nt={modulate:this._mod,vars:this._temp},st=0,It=new Uint8Array(new ArrayBuffer(Math.ceil(lt*ct*2))),Vt=lt*Rt|0,Ie=lt*ct|0;for(ot=0;ot!==Vt;ot++)st=at*(ot/(lt*Rt))*dt.call(nt,ot,lt,yt,at),It[ot<<1]=st,It[1+(ot<<1)]=st>>8;for(;ot!==Ie;ot++)st=at*Math.pow(1-(ot-lt*Rt)/(lt*(ct-Rt)),mt)*dt.call(nt,ot,lt,yt,at),It[ot<<1]=st,It[1+(ot<<1)]=st>>8;var Ze=["RIFF",c(1,52),"WAVE","fmt ",c(1,16),c(0,1),c(0,bt),c(1,lt),c(1,lt*bt*tt/8),c(0,bt*tt/8),c(0,tt),"data",c(1,It.length*bt*tt/8),It],me=new n(Ze,{type:"audio/wav"}),Be=t.createObjectURL(me);return this._fileCache[V][Z-1][G][ct]=Be,this._debug&&console.log((new Date).valueOf()-wt,"ms to generate"),Be}),H("play",function(V,G,Z,vt){var it=this.generate(V,G,Z,vt);return new Audio(it).play(),!0}),H("debug",function(){this._debug=!0}),H("createInstrument",function(V){var G=0,Z=!1;if("string"==typeof V){for(var vt=0;vt<this._sounds.length;vt++)if(this._sounds[vt].name==V){Z=!0,G=vt;break}}else this._sounds[V]&&(V=this._sounds[G=V].name,Z=!0);if(!Z)throw new Error("Invalid sound or sound ID: "+V);o=!0;var it=new e(this,V,G);return o=!1,it}),H("listSounds",function(){for(var V=[],G=0;G<this._sounds.length;G++)V.push(this._sounds[G].name);return V}),O("__init__",function(){this._resizeCache()}),H("loadSoundProfile",function(){for(var V=0,G=arguments.length;V<G;V++){var Z=arguments[V];if(!(Z instanceof Object))throw new Error("Invalid sound profile.");this._sounds.push(Z)}return this._resizeCache(),!0}),H("loadModulationFunction",function(){for(var V=0,G=arguments.length;V<G;V++){var Z=arguments[V];if("function"!=typeof Z)throw new Error("Invalid modulation function.");this._mod.push(Z)}return!0}),s=new p,y=s}(),y.loadModulationFunction(function(t,n,o,s){return 1*Math.sin(2*Math.PI*(t/n*o)+s)},function(t,n,o,s){return 1*Math.sin(4*Math.PI*(t/n*o)+s)},function(t,n,o,s){return 1*Math.sin(8*Math.PI*(t/n*o)+s)},function(t,n,o,s){return 1*Math.sin(.5*Math.PI*(t/n*o)+s)},function(t,n,o,s){return 1*Math.sin(.25*Math.PI*(t/n*o)+s)},function(t,n,o,s){return.5*Math.sin(2*Math.PI*(t/n*o)+s)},function(t,n,o,s){return.5*Math.sin(4*Math.PI*(t/n*o)+s)},function(t,n,o,s){return.5*Math.sin(8*Math.PI*(t/n*o)+s)},function(t,n,o,s){return.5*Math.sin(.5*Math.PI*(t/n*o)+s)},function(t,n,o,s){return.5*Math.sin(.25*Math.PI*(t/n*o)+s)}),y.loadSoundProfile({name:"piano",attack:function(){return.002},dampen:function(t,n,o){return Math.pow(.5*Math.log(n*o/t),2)},wave:function(t,n,o,s){var c=this.modulate[0];return this.modulate[1](t,n,o,Math.pow(c(t,n,o,0),2)+.75*c(t,n,o,.25)+.1*c(t,n,o,.5))}},{name:"organ",attack:function(){return.3},dampen:function(t,n){return 1+.01*n},wave:function(t,n,o){var s=this.modulate[0];return this.modulate[1](t,n,o,s(t,n,o,0)+.5*s(t,n,o,.25)+.25*s(t,n,o,.5))}},{name:"acoustic",attack:function(){return.002},dampen:function(){return 1},wave:function(t,n,o){var s=this.vars;s.valueTable=s.valueTable?s.valueTable:[],void 0===s.playVal&&(s.playVal=0),void 0===s.periodCount&&(s.periodCount=0);var c=s.valueTable,v=s.playVal,R=s.periodCount,O=n/o,H=Math.floor(100*(O-Math.floor(O))),V=!1;if(c.length<=Math.ceil(O))return c.push(2*Math.round(Math.random())-1),c[c.length-1];c[v]=.5*(c[v>=c.length-1?0:v+1]+c[v]),v>=Math.floor(O)&&(v<Math.ceil(O)?R%100>=H&&(V=!0,c[v+1]=.5*(c[0]+c[v+1]),s.periodCount++):V=!0);var G=c[v];return V?s.playVal=0:s.playVal++,G}},{name:"edm",attack:function(){return.002},dampen:function(){return 1},wave:function(t,n,o){var s=this.modulate[0],c=this.modulate.slice(1);return c[0](t,n,o,c[9](t,n,o,c[2](t,n,o,Math.pow(s(t,n,o,0),3)+Math.pow(s(t,n,o,.5),5)+Math.pow(s(t,n,o,1),7)))+c[8](t,n,o,s(t,n,o,1.75)))}})},18449:(L,W)=>{W.saveState=function(p,e,t){var n="BlocklyState"+(t||""),o=p.workspaceToDom(e,!0),s=p.domToPrettyText(o);window.localStorage.setItem(n,s)},W.restoreState=function(p,e,t){var o=window.localStorage.getItem("BlocklyState"+(t||""));if((null==o?void 0:o.length)>62){var s=p.textToDom(o);p.clearWorkspaceAndLoadFromXml(s,e)}return""}},79628:(L,W,m)=>{var y=m(18642);W.DownloadBlocks=function(p,e,t){var n=p.workspaceToDom(e,!0),o=p.domToPrettyText(n),s=new Blob([o],{type:"text/plain;charset=utf-16"});y.saveAs(s,t)},W.LoadFile=function(p,e,t){e.clear();var n=p.textToDom(t);p.domToWorkspace(n,e)}},19842:(L,W,m)=>{const y=m(45797);W.definitionBlocks=function(p,e){p.HTMLheaders={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Header").appendField(new y.FieldDropdown([["H1","H1"],["H2","H2"],["H3","H3"]]),"NAME"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to Header "),this.setHelpUrl("")}},e.HTMLheaders=function(t){var n=t.getFieldValue("NAME");return[`'<${n}>'+ ${e.valueToCode(t,"NAME",e.ORDER_ATOMIC)} + '</${n}>'`,e.ORDER_NONE]},p.HTMLlist={init:function(){this.appendDummyInput().appendField("List ").appendField(new y.FieldDropdown([["OL","ol"],["UL","ul"]]),"listType"),this.appendStatementInput("Content").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(240),this.setTooltip("list - please add li block "),this.setHelpUrl("")}},e.HTMLlist=function(t){var n=t.getFieldValue("listType");return e.valueToCode(t,"ListType",e.ORDER_ATOMIC),`window.alert('<${n}>');\n;${e.statementToCode(t,"Content")};\n;window.alert('</${n}>');\n`},p.HTMLli={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("LI"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to LI"),this.setHelpUrl("")}},e.HTMLli=function(t){return[`'<li>'+ ${e.valueToCode(t,"NAME",e.ORDER_ATOMIC)} + '</li>'`,e.ORDER_NONE]}},W.fieldXML=function(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="HTMLheaders">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        \n<block type="HTMLlist"></block>\n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n  \n<block type="HTMLli">\n<value name="NAME">\n<shadow type="text">\n <field name="TEXT"></field>\n</shadow>\n</value>\n</block>    \n</value>\n\n\n</block>\n\n\n'}},87804:(L,W,m)=>{m(45797),W.definitionBlocks=function(p,e){p.ttsBlock={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Voice"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.ttsBlock=function(t){return"speakDefault("+e.valueToCode(t,"NAME",e.ORDER_ATOMIC)+");\n"}},W.fieldXML=function(){return'<block type="ttsBlock">\n        <value name="NAME">\n            <shadow type="text">\n            <field name="TEXT">Hello</field></shadow>\n        </value>       \n        </block>\n'}},40054:(L,W)=>{W.definitionBlocks=function(m,y){m.credsforhttp={init:function(){this.appendDummyInput().appendField("Http with Creds"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("WithCreds").setCheck("Boolean").appendField("With Creds ?"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.credsforhttp=function(t){return"withCredsForDomain["+(y.valueToCode(t,"HttpDomain",0)||"(localSite)")+"]="+y.valueToCode(t,"WithCreds",0)+";\n"}},W.fieldXML=function(){return'<block type="credsforhttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="WithCreds">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},29130:(L,W)=>{W.definitionBlocks=function(m,y){m.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.auth0webapidata=function(t){var v='{"client_id":'+y.valueToCode(t,"client_id",0);return v+=',"client_secret":'+y.valueToCode(t,"client_secret",0),v+=',"audience":'+y.valueToCode(t,"audience",0),v+=',"grant_type":'+y.valueToCode(t,"grant_type",0),[v+="}",99]}},W.fieldXML=function(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}},34122:(L,W,m)=>{const y=m(45797);W.definitionBlocks=function(p,e){p.chart_js={init:function(){this.appendDummyInput().appendField("ChartType").appendField(new y.FieldDropdown([["HBar","HBar"],["VBar","VBar"]]),"ChartTypeValue"),this.appendValueInput("ChartTitleValue").setCheck(null).appendField(new y.FieldLabelSerializable("Title"),"ChartTitle"),this.appendValueInput("LabelsValue").setCheck("Array").appendField(new y.FieldLabelSerializable("Labels"),"ChartLabels"),this.appendValueInput("DataSet1Label").setCheck("String").appendField(new y.FieldLabelSerializable("DataSet1 Label"),"DataSetLabel1"),this.appendValueInput("DataSet1Data").setCheck("Array").appendField(new y.FieldLabelSerializable("DataSet1 Data"),"DataSetData1"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.chart_js=function(t){var n=t.getFieldValue("ChartTypeValue"),s=(e.valueToCode(t,"ChartTitleValue",e.ORDER_ATOMIC),e.valueToCode(t,"LabelsValue",e.ORDER_ATOMIC)),c=e.valueToCode(t,"DataSet1Label",e.ORDER_ATOMIC),v=e.valueToCode(t,"DataSet1Data",e.ORDER_ATOMIC),R="",O="x";switch(n){case"HBar":R="bar",O="y";break;case"VBar":R="bar";break;default:throw"Unknown chart type:"+n}return[`JSON.stringify({ 'type': '${R}', 'options':{ 'indexAxis':'${O}'},  'data': {  'labels': ${s}, 'datasets': [{ 'backgroundColor': ['green','blue'],'label': ${c}, 'data': ${v} }] } })`,e.ORDER_NONE]}},W.fieldXML=function(){return'<block type="chart_js"></block>'}},11124:(L,W)=>{W.definitionBlocks=function(m,y){m.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(new Blockly.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},y.comment=function(e){return"/*\n"+(y.valueToCode(e,"TEXT",0)||"''")+"\n*/;\n"},m.debugger={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("debugger").appendField(new Blockly.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},y.debugger=function(e){return"startDebugger("+(y.valueToCode(e,"TEXT",0)||"''")+",'"+e.id+"',this);\n"}},W.fieldXML=function(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n<block type="debugger">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">my message for debug</field>\n        </shadow>\n    </value>\n</block>\n'}},54256:(L,W)=>{W.definitionBlocks=function(m,y){m.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},y.converttojson=function(n){return["JSON.parse("+y.valueToCode(n,"ValueToConvert",0)+")",99]},m.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},y.converttostring=function(n){return["JSON.stringify("+y.valueToCode(n,"ValueToConvert",0)+")",99]},m.convertcsv={init:function(){this.appendDummyInput().appendField("Convert CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},y.convertcsv=function(n){return["convertToCSV("+y.valueToCode(n,"ArrayToConvert",y.ORDER_ATOMIC)+")",99]}},W.fieldXML=function(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n'}},97404:(L,W,m)=>{const y=m(45797);W.definitionBlocks=function(p,e,t,n){e.object_from_json=function(mt){return[`JSON.parse(${e.valueToCode(mt,"JSON",0)})`,99]},e.object_to_json=function(mt){return[`JSON.stringify(${e.valueToCode(mt,"object",0)})`,99]},e.object_get=function(mt){const dt=mt.getFieldValue("field_name");return[`${e.valueToCode(mt,"object",0)}['${dt}']`,99]},e.object_set=function(mt){const dt=mt.getFieldValue("field_name");return`${e.valueToCode(mt,"object_field",0)}['${dt}'] = ${e.valueToCode(mt,"value_field",0)};\n`},e.object_create=function(mt){if(!mt.numFields)return["{}",99];let dt="";for(let st=1;st<=mt.numFields;st++)dt+=`"${mt.getFieldValue("field"+st)}": ${e.valueToCode(mt,"field_input"+st,0)}, `;return[`{ ${dt} }`,99]};const Z="object_field",vt="object_create_mutator_top",it="#F99EA3",ot=(mt,...dt)=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[mt]),wt={type:"object_from_json",message0:ot("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:it,tooltip:ot("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};p.object_from_json={init:function(){this.jsonInit(wt)}};const ct={type:"object_to_json",message0:ot("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:it,tooltip:ot("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};p.object_to_json={init:function(){this.jsonInit(ct)}};const yt={type:"object_get",message0:ot("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:it,tooltip:ot("object_get_json_tooltip"),helpUrl:""};p.object_get={init:function(){this.jsonInit(yt)}};const lt={type:"object_set",message0:ot("object_set_json"),args0:[{type:"field_input",name:"field_name",text:ot("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:it,tooltip:ot("object_set_json_tooltip"),helpUrl:""};p.object_set={init:function(){this.jsonInit(lt)}};const at={type:"object_create",message0:ot("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:ot("object_create_tooltip"),helpUrl:""};p.object_create={init:function(){this.jsonInit(at)}};const bt={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:ot("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};p[Z]={init:function(){this.jsonInit(bt)}};const tt={type:"object_create_mutator",message0:ot("object_create"),nextStatement:null,colour:15,tooltip:ot("object_create_tooltip"),helpUrl:""};p[vt]={init:function(){this.jsonInit(tt)}};const Rt={numFields:0,fields:[],domToMutation:function(mt){this.fields=[];for(let nt,dt=0;nt=mt.childNodes[dt];dt++)"field"==nt.nodeName.toLowerCase()&&this.fields.push(nt.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const mt=document.createElement("mutation");mt.setAttribute("num_fields",""+this.numFields);for(let dt=0;dt<this.fields.length;dt++){const nt=document.createElement("field");nt.setAttribute("name",this.fields[dt]),mt.appendChild(nt)}return mt},compose:function(mt){let dt=mt.nextConnection&&mt.nextConnection.targetBlock();this.numFields=0,this.fields=[];let nt=[null];for(;dt;)this.fields.push(dt.getFieldValue("field_name")),this.numFields++,nt.push(dt.savedConnection),dt=dt.nextConnection&&dt.nextConnection.targetBlock();this.updateShape();for(let st=1;st<=this.numFields;st++)n.reconnect(nt[st],this,"field_input"+st)},decompose:function(mt){const dt=mt.newBlock(vt);dt.initSvg();let nt=dt.nextConnection;for(let st=0;st<this.fields.length;st++){const Gt=mt.newBlock(Z);Gt.initSvg(),Gt.setFieldValue(this.fields[st],"field_name"),nt.connect(Gt.previousConnection),nt=Gt.nextConnection}return dt},saveConnections:function(mt){let dt=mt.nextConnection&&mt.nextConnection.targetBlock(),nt=1;for(;dt;){const st=this.getInput("field_input"+nt);dt.savedConnection=st&&st.connection.targetConnection,dt.setFieldValue(this.getFieldValue("field"+nt),"field_name"),nt++,dt=dt.nextConnection&&dt.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let mt=1;for(;this.getInput("field_input"+mt);)this.removeInput("field_input"+mt),mt++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let dt=1;dt<=this.numFields;dt++){const nt=this.fields[dt-1];this.appendValueInput("field_input"+dt).setCheck(null).setAlign(1).appendField(new y.FieldTextInput(nt),"field"+dt)}}};try{t.registerMutator("controls_create_mutator",Rt,null,["object_field"])}catch(mt){}},W.fieldXML=function(){return'    \n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n\n'}},50188:(L,W,m)=>{const y=m(45797);W.definitionBlocks=function(p,e){p.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new y.FieldDropdown([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};e.displayCurrentDate=o=>{let c="";switch(o.getFieldValue("dateFormat").toString()){case"human":c="displayDateFormatted('human')";break;case"iso":c="displayDateFormatted('iso')";break;case"unix":c="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[c,99]}},W.fieldXML=function(){return'<block type="displayCurrentDate"></block>'}},71320:(L,W)=>{W.definitionBlocks=function(m,y){m.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},y.DateFromText=e=>["Date.parse("+(y.valueToCode(e,"VALUE",y.ORDER_ATOMIC)||"")+")",99]},W.fieldXML=function(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}},18638:(L,W)=>{W.generalBlocks=function(){return'\n    \n    <category name="Blockly Core">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}},15889:(L,W,m)=>{const y=m(45797);W.definitionBlocks=function(p,e){p.blockemail={init:function(){this.appendValueInput("from").setCheck(null).appendField("From:"),this.appendValueInput("to").setCheck(null).appendField("To:"),this.appendValueInput("cc").setCheck(null).appendField("CC:"),this.appendValueInput("bcc").setCheck(null).appendField("BCC:"),this.appendValueInput("subject").setCheck(null).appendField("Subject:"),this.appendValueInput("body").setCheck(null).appendField("Body:").appendField(new y.FieldDropdown([["HTML","Html"],["TEXT","Text"]]),"NAME"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},p.sendinblue={init:function(){this.appendDummyInput().appendField("SendInBlue"),this.appendValueInput("APIKey").setCheck(null).appendField("ApiKey"),this.appendValueInput("email").setCheck("blockemail").appendField("Email"),this.setColour(230),this.setTooltip("Please see https://account.sendinblue.com/advanced/api"),this.setHelpUrl("https://account.sendinblue.com/advanced/api"),this.setOutput(!0,null)}},e.sendinblue=function(n){var c='window.alert("SendInBlue");\n',v="api.sendinblue.com";return c=`(function(apiKey,email){if(!('${v}' in headersForDomain)){ headersForDomain['${v}']=[]; };\n`,c+=`headersForDomain['${v}'].push({"name":"api-key","value":apiKey});\n`,c+=`headersForDomain['${v}'].push({"name":"Content-Type","value":"application/json"});\n`,c+=`headersForDomain['${v}'].push({"name":"Accept","value":"application/json"});\n`,c+='var sendinblueData={"sender":{"email": email.from }, "to":[{"email":email.to }],"subject":email.subject,"htmlContent": email.body} ;\n',c+="\nwindow.alert(JSON.stringify(sendinblueData));\n",c+=`var res=JSON.parse(postXhr("https://${v}/v3/smtp/email",JSON.stringify(sendinblueData)));if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;\n`,[c+="})("+e.valueToCode(n,"APIKey",e.ORDER_ATOMIC)+","+e.valueToCode(n,"email",e.ORDER_ATOMIC)+")",e.ORDER_NONE]},e.blockemail=function(n){var o=e.valueToCode(n,"from",e.ORDER_ATOMIC),s=e.valueToCode(n,"to",e.ORDER_ATOMIC),c=e.valueToCode(n,"cc",e.ORDER_ATOMIC),v=e.valueToCode(n,"bcc",e.ORDER_ATOMIC),R=e.valueToCode(n,"subject",e.ORDER_ATOMIC),O=n.getFieldValue("NAME"),V="{";return V+='"from":'+o+",",V+='"to":'+s+",",V+='"cc":'+c+",",V+='"bcc":'+v+",",V+='"subject":'+R+",",V+='"body":'+e.valueToCode(n,"body",e.ORDER_ATOMIC)+",",V+='"typeEmail":"'+O+'"',[""+(V+="}"),e.ORDER_NONE]}},W.fieldXML=function(){return'<block type="blockemail">\n        <value name="from">\n            <shadow type="text">\n                <field name="TEXT">test@test.com</field>\n            </shadow>\n        </value>\n        <value name="to">\n            <shadow type="text">\n                <field name="TEXT">ignatandrei@yahoo.com</field>\n            </shadow>\n        </value>\n        <value name="cc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="bcc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="subject">\n            <shadow type="text">\n                <field name="TEXT">My test email</field>\n            </shadow>\n        </value>\n        <value name="body">\n            <shadow type="text">\n                <field name="TEXT">This is the body</field>\n            </shadow>\n        </value>\n            </block>\n        <block type="sendinblue">\n        <value name="APIKey">\n            <shadow type="text">\n                <field name="TEXT">Please put here the API Key from SendInBlue</field>\n            </shadow>\n            \n        </value>\n        <value name="email">\n            <shadow type="blockemail">\n            </shadow>\n            \n        </value>\n        \n        </block>\n'}},19544:(L,W)=>{W.definitionBlocks=function(m,y){m.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.exportfile=function(t){return"exportToFile("+y.valueToCode(t,"fileName",0)+","+y.valueToCode(t,"contentFile",0)+","+y.valueToCode(t,"convertToByte",0)+");\n"}},W.fieldXML=function(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},30721:(L,W)=>{W.definitionBlocks=function(m,y){m.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.filterList=function(p){var e=y.valueToCode(p,"LIST",y.ORDER_MEMBER)||"[]",t=y.valueToCode(p,"Logic",y.ORDER_ATOMIC);"string"==typeof t&&(t=t.substr(1,t.length-2));var n="";return n+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e+")).filter(function (item){ return "+t+";})",[n+="",y.ORDER_FUNCTION_CALL]},m.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.mapList=function(p){var e=y.valueToCode(p,"LIST",y.ORDER_MEMBER)||"[]",t=y.valueToCode(p,"Logic",y.ORDER_ATOMIC);"string"==typeof t&&(t=t.substr(1,t.length-2));var n="";return n+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e+")).map(function (item){ return "+t+";})",[n+="",y.ORDER_FUNCTION_CALL]},m.reduceList={init:function(){this.appendDummyInput().appendField("reduceList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("initValue").setCheck(null).appendField("initialValue"),this.appendValueInput("Logic").setCheck("String").appendField("callback(acc,curVal,index, array)=>"),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.reduceList=function(p){var e=y.valueToCode(p,"LIST",y.ORDER_MEMBER)||"[]",t="";try{t=y.valueToCode(p,"initValue",y.ORDER_ATOMIC)}catch(s){window.alert(s)}var n=y.valueToCode(p,"Logic",y.ORDER_ATOMIC);"string"==typeof n&&(n=n.substr(1,n.length-2));var o="";return o+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e+")).reduce(function (acc,curVal,index,array){ "+n+";}",t&&t.toString().length>0&&(o+=","+t),o+=")",[o+="",y.ORDER_FUNCTION_CALL]}},W.fieldXML=function(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="initValue">\n                    <shadow type="text">\n                        <field name="TEXT"> </field>\n                    </shadow>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="reduceList">\n        <value name="LIST">\n        <block type="variables_get">\n                <field name="VAR">list</field>\n            </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">...</field>\n                </shadow>\n            </value>\n        </block>\n        </category>\n\n'}},79118:(L,W,m)=>{const y=m(45797);W.definitionBlocks=function(p,e){p.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},e.window_open=function(o){var s=e.valueToCode(o,"TEXT",99)||"''";return"if((typeof "+s+' == "object") && ("to" in '+s+')){open("mailto:'+s.to+'")}else{ open('+s+")};\n"},p.text_message={init:function(){this.jsonInit({message0:"alert %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},e.text_message=function(o){return"alert1("+(e.valueToCode(o,"TEXT",99)||"''")+");\n"},p.text_print_return={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("print return").appendField(new y.FieldLabelSerializable(""),"NAME"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},e.text_print_return=function(o){var s=e.valueToCode(o,"TEXT",0)||"''";return["(function(){window.alert("+s+");\n;return ("+s+");}())\n",99]},p.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.valuefromtext=function(o){return["getIDProp("+e.valueToCode(o,"IdOfText",0)+","+(e.valueToCode(o,"ValueToObtain",0)||'"value"')+")",99]}},W.fieldXML=function(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_print_return"></block>  \n    <block type="text_prompt_ext"></block>\n    <block type="text_message"></block>\n    \n    '}},4283:(L,W,m)=>{L.exports={defaultBlocks:m(18638),filterBlocks:m(30721),waitBlocks:m(63889),xhrBlocks:m(23087),propBlocks:m(83033),guiBlocks:m(79118),convertersBlocks:m(54256),exportFileBlock:m(19544),createObjectBlocks:m(97404),currentDateBlock:m(50188),dateFromTextBlock:m(71320),waitBlocks:m(3322),commentBlock:m(11124),auth0Blocks:m(29130),windowsCreds:m(40054),trycatchFinBlock:m(88073),chartBlock:m(34122),emailBlocks:m(15889),htmlblocks:m(19842),ttsBlock:m(87804),pianoBlock:m(62303)}},62303:(L,W,m)=>{m(45797),W.definitionBlocks=function(p,e){p.pianoBlock={init:function(){this.appendValueInput("Note").setCheck("String").appendField("Note(A-G)"),this.appendValueInput("Sharp").setCheck("Boolean").appendField("#"),this.appendValueInput("Octave").setCheck("Number").appendField("Octave"),this.appendValueInput("Duration").setCheck("Number").appendField("Duration"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://github.com/keithwhor/audiosynth")}},e.pianoBlock=function(t){var n=e.valueToCode(t,"Note",e.ORDER_ATOMIC),v="";return"true"==(e.valueToCode(t,"Sharp",e.ORDER_ATOMIC)||!1)&&(v="#"),"playPiano("+n+v+","+e.valueToCode(t,"Octave",e.ORDER_ATOMIC)+","+(e.valueToCode(t,"Duration",e.ORDER_ATOMIC)||2)+");\n"},p.cmajor={init:function(){this.appendDummyInput().appendField("CMajor "),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.cmajor=function(t){return['["C","D","E","F","G","A","B"]',e.ORDER_NONE]}},W.fieldXML=function(){return'<block type="pianoBlock">\n        <value name="Note">\n            <shadow type="text">\n            <field name="TEXT">C</field></shadow>\n        </value>       \n        <value name="Octave">\n            <shadow type="math_number">\n            <field name="NUM">4</field></shadow>\n        </value>       \n        <value name="Sharp">\n            <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field></shadow>\n        </value>       \n        \n        <value name="Duration">\n            <shadow type="math_number">\n            <field name="NUM">2</field></shadow>\n        </value>       \n        </block>\n        <block type="cmajor"></block>\n\n'}},83033:(L,W,m)=>{const y=m(45797);W.definitionBlocks=function(p,e){p.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new y.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new y.FieldLabelSerializable(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(new y.FieldLabelSerializable("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},e.modifyproperty=function(c){return e.valueToCode(c,"ObjectToChange",0)+"["+e.valueToCode(c,"PropertyName",0)+"]="+e.valueToCode(c,"NewValue",0)+";"},p.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new y.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new y.FieldLabelSerializable("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},e.getproperty=function(c){return['(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e.valueToCode(c,"ObjectToChange",0)+"))["+e.valueToCode(c,"PropertyName",0)+"]",99]}},W.fieldXML=function(){return'\n    \n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n'}},88073:(L,W)=>{W.definitionBlocks=function(m,y){m.trycatchfinally={init:function(){this.appendStatementInput("TRY").appendField("try"),this.appendStatementInput("CATCH").appendField("catch"),this.appendStatementInput("FINALLY").appendField("finally"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.trycatchfinally=function(t){var c="try {\n"+y.statementToCode(t,"TRY")+"}\n";return(c+="catch(err){\n errHandler(JSON.stringify(err));\n"+y.statementToCode(t,"CATCH")+"\n}")+"finally{\n "+y.statementToCode(t,"FINALLY")+"\n}\n"}},W.fieldXML=function(){return'\n    \n    <block type="trycatchfinally">\n    \n</block>\n'}},3322:(L,W)=>{W.definitionBlocks=function(m,y){m.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.wait=function(e){return"waitTime("+(y.valueToCode(e,"VALUE",y.ORDER_ATOMIC)||"")+");"},m.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.wait_until=function(e){return"waitTime(("+(y.valueToCode(e,"VALUE",0)||"")+"-new Date())/1000);"}},W.fieldXML=function(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}},63889:(L,W)=>{W.definitionBlocks=function(m,y){m([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),y.wait_seconds=function(p){return"waitForSeconds("+Number(p.getFieldValue("SECONDS"))+");\n"}},W.fieldXML=function(){return'\n  <block type="wait_seconds"></block>\n'}},23087:(L,W,m)=>{const y=m(45797);W.definitionBlocks=function(p,e){p.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("at domain put (localSite) or *")}},e.headersbeforehttp=function(o){var s=e.valueToCode(o,"HttpDomain",0)||"(localSite)",R="\n";return R+="{\n",R+="if(!("+s+" in headersForDomain))\n",R+="{\n",R+="headersForDomain["+s+"]=[];\n",R+="};\n",R+="var arr = headersForDomain["+s+"];\n",R+="arr.push({name:"+e.valueToCode(o,"HeaderName",0)+", value:"+e.valueToCode(o,"HeaderValue",0)+"});\n",R+='//alert("a" + JSON.stringify(arr)+"a");\n',(R+='//alert("a" + JSON.stringify(headersForDomain['+s+'])+"a");\n')+"};\n"},p.httprequest={init:function(){this.appendDummyInput().appendField(new y.FieldDropdown([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(new y.FieldDropdown([["GET","GET"],["POST","POST"],["PUT","PUT"],["DELETE","DELETE"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},e.httprequest=function(o){var s=o.getFieldValue("TypeOutput"),c=o.getFieldValue("TypeRequest"),v=e.valueToCode(o,"TheUrl",0),R=e.valueToCode(o,"Data",0),O="";switch(c.toString()){case"GET":O="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+v+") )";break;case"POST":O="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+v,R&&(O+=","+R),O+=") )";break;case"DELETE":O="(function(url,data){ var res=JSON.parse(deleteXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+v,R&&(O+=","+R),O+=") )";break;case"PUT":O="(function(url,data){ var res=JSON.parse(putXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+v,R&&(O+=","+R),O+=") )";break;default:alert("Do not understand : "+c.toString())}var H=O;return"JSON"===s&&(H="JSON.parse("+H+")"),[H,99]}},W.fieldXML=function(){return'\n    \n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n<block type="text_print">\n<value name="TEXT">\n\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n</block>\n</value>\n</block>    \n\n'}},20070:(L,W,m)=>{var y=m(48926).default;const p=m(45797),e=m(61058);L.exports=class{constructor(o){cc(this,"GenerateBlocks",[]),cc(this,"GenerateFunctions",[]),cc(this,"fieldXMLObjects",[]),cc(this,"fieldXMLFunctions",[]),cc(this,"hasError",!0),cc(this,"paths",[]),cc(this,"name",""),cc(this,"operations",[]),cc(this,"cacheCategSwaggerFromPaths",[]),cc(this,"openApiDocument",null),cc(this,"basePath",""),this.swaggerUrl=o}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}_${this.name}`}metaBlocks(){var o=this;return function(s,c){var v;s[v=`meta_swagger_controllers_${o.name}`]={init:function(){this.appendDummyInput().appendField("categories_"+o.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(o.swaggerUrl)}},c[v]=function(R){var H=o.findCategSwaggerFromPaths().map(G=>({name:G}));return H={name:o.name,categories:H},[JSON.stringify(H),c.ORDER_NONE]},s[v=`meta_swagger_controllers_actions_${o.name}`]={init:function(){this.appendDummyInput().appendField("categories_actions"+o.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(o.swaggerUrl)}},c[v]=function(R){var H=o.findCategSwaggerFromPaths().map(G=>({name:G,ops:o.findfieldXMLFunctions(G).map(Z=>Z.id).filter(Z=>Z.length>0)}));return H={name:o.name,categories:H},[JSON.stringify(H),c.ORDER_NONE]}}}findfieldXMLFunctions(o){var s=this.operations.filter(v=>v.controller==o);return this.fieldXMLFunctions.filter(v=>{if(""==v.id)return!0;var R=v.id+"/",O=!1;return s.forEach(H=>{R.startsWith(H.id)&&(O=!0)}),!!O||(s.forEach(H=>{var V=H.id.substring(0,H.id.lastIndexOf("/"))+"{";R.startsWith(V)&&(O=!0)}),O)})}findCategSwaggerFromPaths(){if(this.cacheCategSwaggerFromPaths.length>0)return this.cacheCategSwaggerFromPaths;var o=this.paths.filter(c=>c&&c.id&&c.id.length>0).map(c=>{for(var v=c.id.length,R=c.id.indexOf("{");R>0;){var O=c.id.indexOf("}",R);if(v-O<2){c.id=c.id.substring(0,R);break}R=c.id.indexOf("{",O)}return c}).map(c=>(c.id.lastIndexOf("/")!=c.id.length-1&&(c.id+="/"),c));this.operations=o.filter(c=>c.nrOps>1).map(c=>({arr:c.id.split("/").filter(R=>R.length>0),id:c.id})).map(c=>({controller:c.arr[c.arr.length-1],id:c.id}));var s=o.filter(c=>1==c.nrOps).map(c=>({arr:c.id.split("/").filter(v=>v.length>0),id:c.id})).map(c=>1==c.arr.length?{controller:c.arr[0],id:c.id}:{controller:c.arr[c.arr.length-2],id:c.id});return this.operations.push(...s),this.cacheCategSwaggerFromPaths=[...new Set(this.operations.map(c=>c.controller))],this.cacheCategSwaggerFromPaths}categSwagger(){var o=this.findHostNameRegular();(o=o.replaceAll(".","")).length>5&&o.substring(0,5);var v=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+v+'"></category><category name="AllApi" custom="AllApi_'+v+'"></category>'}findRootSite(){var o=this.swaggerUrl,s="";if(o.startsWith("http://")||o.startsWith("https://")){var c=new URL(o);s=c.protocol+"//"+c.hostname,c.port.length>0&&(s+=":"+c.port)}return s}findHostNameRegular(){var R,o=this.swaggerUrl,s="(localSite)";if(o.startsWith("http://")||o.startsWith("https://")){var c=new URL(o),v=null!=(R=c.port)?R:80;s=c.hostname+v}return s.replaceAll(".","")}showWindowToLoad(o,s){try{e.registerPlugin(m(17131))}catch(v){}e.defaultOptions.className="vex-theme-os",e.dialog.prompt({message:"Swagger url?",placeholder:o,callback:s})}ParseSwagger(){var o=this;return y(function*(){var H,s=o;s.fieldXMLObjects.push(`<label text="${s.swaggerUrl}"></label>`),s.fieldXMLFunctions.push({id:"",gui:`<label text="${s.swaggerUrl}"></label>`});var c=null;try{c=(yield m(47511).default(o.swaggerUrl)).spec}catch(V){return console.error(`parseSwagger ${o.swaggerUrl}`,V),s.fieldXMLObjects.push("<label text='Error parsing!'></label>"),o}o.hasError=!1,o.basePath=c.basePath||"";var R=null==(H=c.components)?void 0:H.schemas;return(null==R||null==R)&&(R=c.definitions),R?Object.keys(R).sort().forEach(function(V){var G=R[V],Z=s.findProperties(G),vt=`<block type="${V}">`;Z.forEach(function(it){if(it.value&&it.value.type){var ot=s.GenerateShadowField(it.value.type,it.key);ot.length>0&&(vt+=`<value name="val_${it.key}">${ot}</value>`)}}),s.fieldXMLObjects.push(vt+="</block>"),s.GenerateBlocks.push(s.GenerateBlock(G,V))}):console.log("_A",c),c.paths&&Object.keys(c.paths).forEach(function(V){var G=c.paths[V];s.paths.push({id:V,nrOps:Object.keys(G).length}),Object.keys(G).forEach(function(Z){s.GenerateFunctions.push(s.GenerateFunction(G,V,G[Z],Z))})}),s.openApiDocument=c,s})()}findProperties(o){var s=[];return o.properties&&Object.keys(o.properties).forEach(c=>{s.push({key:c,value:o.properties[c]})}),s}GenerateNameFunction(o,s,c,v){return v+"_"+s.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateShadowField(o,s,c){switch(o){case"integer":return`<block type='math_number'><field name='NUM'>${c||0}</field></block>`;case"string":return`<block type='text'><field name='TEXT'>${c||`please enter ${s}`}</field></block>`;case"boolean":return`<block type='logic_boolean'><field name='BOOL'>${c||"FALSE"}</field></block>`;case"array":return'<block type="lists_create_with"> <mutation items="0"></mutation></block>';default:return""}}GenerateFunction(o,s,c,v){var R=this,O=R.GenerateNameFunction(o,s,c,v),V=c,G=`<block type="text_print"> <value name="TEXT"><block type="${O}">`;V.parameters&&V.parameters.forEach(wt=>{if(wt.type)(ct=R.GenerateShadowField(wt.type,wt.name)).length>0&&(G+=`<value name="val_${wt.name}">${ct}</value>`);else if(wt.schema&&wt.schema.type){var ct;(ct=R.GenerateShadowField(wt.schema.type,wt.name)).length>0&&(G+=`<value name="val_${wt.name}">${ct}</value>`)}});var Z="",vt="";try{var it=new URL(R.findRootSite());Z=it.hostname,vt=it.port}catch(wt){}var ot=R.GenerateShadowField("string","override_host",Z=Z||" ");return G+=`<value name="override_Host">${ot}</value>`,ot=R.GenerateShadowField("integer","override_port",vt=vt||"0"),G+=`<value name="override_Port">${ot}</value>`,G+="</block></value>",R.fieldXMLFunctions.push({id:s,gui:G+="</block>"}),function(wt,ct){wt[O]={init:function(){var yt=v;switch(v.toString().toLowerCase()){case"get":yt="",this.setColour(210);break;case"post":yt="",this.setColour(165);break;case"put":yt="",this.setColour(40);break;case"delete":yt="",this.setColour(10);break;default:console.log(`not found ${v}`),this.setColour(10)}for(var lt=s,at=R.findCategSwaggerFromPaths(),bt=0;bt<at.length;bt++){var tt="/"+at[bt]+"/",Rt=s.indexOf(tt);if(Rt>-1){var mt=s.substring(Rt+tt.length);mt.length<lt.length&&(lt=mt)}}lt.length>25&&(lt=lt.substring(0,25)+"..."),this.appendDummyInput().appendField(new p.FieldImage(`assets/httpImages/${v}.png`,90,20,v)).appendField(`${yt} ${lt}`);var dt=R.findRootSite();if(V.parameters&&V.parameters.forEach(It=>{var Vt=It.name;if(It.required&&(Vt+="*"),It.type)Vt+=":"+It.type;else if(It.schema)if(It.schema.enum&&"$$ref"in It.schema){var Ie=It.schema.$$ref.split("/");Vt+="=>"+Ie[Ie.length-1]}else if(It.schema.type)if("object"==It.schema.type){var Ze=It.schema.$$ref||"";Ze.length>0&&(Vt+=":"+(Ze=Ze.substring(Ze.lastIndexOf("/")+1)))}else Vt+=":"+It.schema.type;this.appendValueInput(`val_${It.name}`).appendField(Vt)}),V.requestBody){var nt="";if(V.requestBody.content){var st=V.requestBody.content["application/json"];if(st&&st.schema){var Gt=st.schema.$$ref;Gt&&(nt="=>"+Gt.substring(Gt.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+nt).setCheck()}this.appendValueInput("override_Host").appendField("override Host"),this.appendValueInput("override_Port").appendField("override Port"),this.setTooltip(`${v} ${dt}${s}`),this.setOutput(!0,"")}},ct[O]=function(yt){var tt=R.openApiDocument.paths[s][v],Rt=[];"parameters"in tt&&(Rt=tt.parameters);var mt=!1,dt=Rt.filter(Ne=>"body"==Ne.in).length>0;(dt||"requestBody"in tt)&&(mt=!0);var nt={},st={};mt&&(nt.val_values=ct.valueToCode(yt,"val_values",0),st.val_values=nt.val_values),Rt.forEach(Ne=>{nt[`val_${Ne.name}`]=ct.valueToCode(yt,`val_${Ne.name}`,0)});var Gt=Rt.map(Ne=>Ne.name);mt&!dt&&Gt.push("values"),Gt.push("extraData"),Rt.map(Ne=>`\${obj['val_${Ne.name}']},`);var Vt="function(";Vt+=Gt.join(","),Vt+="){\n",Vt+='var rootSite="'+R.findRootSite()+'";\n',Vt+="if(extraData){\n",Vt+="if(extraData.url && extraData.url.host && extraData.url.host.length>0 ){\n",Vt+="rootSite =  changeHost(rootSite, extraData.url.host);\n",Vt+="};\n",Vt+="if(extraData.url && extraData.url.port && extraData.url.port.toString().length>0 ){\n",Vt+="rootSite  =changePort(rootSite , extraData.url.port);\n",Vt+="};\n",Vt+="};\n",Vt+='var strUrl =rootSite +"'+R.basePath+s+'";\n';var Ie=Rt.filter(Ne=>"query"==Ne.in);if(Ie.length>0){Vt+='strUrl+="?";\n;';var Ze=Ie.map(Ne=>`${Ne.name}={`+Ne.name+"}").join("&");Vt+='strUrl += "'+Ze+'";\n;'}var me=Rt.filter(Ne=>"path"==Ne.in||"query"==Ne.in).map(Ne=>`\n          //this gives error cannot read property 'call' of undefined in acorn\n          //strUrl = strUrl.replace("{${Ne.name}}",${Ne.name});\n          {\n            var replaceFInd = "{${Ne.name}}";\n            var index= strUrl.indexOf(replaceFInd);\n            if(index>=0){\n              var strUrlReplace = strUrl.substring(0,index)+ ${Ne.name} + strUrl.substring(index+replaceFInd.length);\n              strUrl = strUrlReplace;\n            }\n\n          };`);if(Vt+=me.join("\n"),Vt+=`\n{var res= ${v}Xhr(strUrl`,mt){var Be="values";dt&&(Be=Rt.filter(Ne=>"body"==Ne.in)[0].name),Vt+=`,JSON.stringify(${Be})`}Vt+=");\n",Vt+="var resJS=JSON.parse(res);\n",Vt+="if(resJS.statusOK) return resJS.text;\n",Vt+="errHandler(res);\n}\n",Vt+="}",Vt+="(",Rt.forEach(Ne=>{Vt+=nt[`val_${Ne.name}`]+","}),mt&!dt&&(Vt+=st.val_values+",");var Ge="url:{notImportant:1",si=ct.valueToCode(yt,"override_Host",0);(si=si||"").length>0&&(Ge+=`,host:${si}`);var Qe=ct.valueToCode(yt,"override_Port",0);return(Qe=Qe||"").length>0&&(Ge+=`,port:${Qe}`),Vt+=`{${Ge+="}"}}\n`,[Vt+=")",99]}}}GenerateBlock(o,s){var c=this,v=s,O=c.findProperties(o);return function(H,V){H[v]={init:function(){var G=!1,Z=[];o.enum&&(G=!0,Z=Object.keys(o.enum).map(o["x-enumNames"]?ot=>[o["x-enumNames"][ot],ot]:ot=>[o.enum[ot],ot]));var it=this.appendDummyInput().appendField(s);G?(Z=Z.map(ot=>[ot[0].toString(),ot[1].toString()]),it.appendField(new p.FieldDropdown(Z),`val_${s}`)):O.forEach(ot=>{var at,wt=ot.key;if(ot.value.nullable&&0==ot.value.nullable&&(wt+="*"),null==(at=ot.value)?void 0:at.type){var ct=ot.value.type||"";if("object"==ct){var yt=ot.value.$$ref||"";yt.length>0&&(ct=yt.substring(yt.lastIndexOf("/")+1))}wt+=":"+ct}ot.value.$ref&&(wt+="->"+ot.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${ot.key}`).appendField(`${wt}`)}),this.setOutput(!0,v)}},V[v]=function(G){{var Z=!1;o.enum&&(Z=!0);var vt=c.findProperties(o);const ct=99,yt=0;var it="",ot=[];return vt.forEach(lt=>{let at=V.valueToCode(G,`val_${lt.key}`,yt);""===at&&(at="null"),null==at&&(at="null"),ot.push(`"${lt.key}":${at}`)}),it="{ "+ot.join(",")+" }",Z&&(it=G.getFieldValue(`val_${s}`)),[it,ct]}}}}TranslateToBlocklyType(o){return"integer"==o?"Number":"string"==o?"String":"bool"==o?"Boolean":"array"==o?"Array":(console.error("not found TranslateToBlocklyType item"+o),"not found type"+o)}}},21086:(L,W,m)=>{L.exports={parseSwagger:m(18706),parseData:m(20070)}},18706:(L,W,m)=>{var y=m(48926).default;W.parseSwagger=function(){var t=y(function*(n){var H;new(m(20070))(n);var c=[],O=(yield m(53096).default(n)).response;return(null==(H=O.components)?void 0:H.schemas)&&Object.keys(O.components.schemas).forEach(function(V){c.push(function(t,n){var o=n;return t.properties&&Object.keys(t.properties).forEach(s=>{}),function(s,c){s[o]={init:function(){this.appendDummyInput().appendField(n),this.setOutput(!0,o)}}}}(O.components.schemas[V],V))}),c});return function(n){return t.apply(this,arguments)}}(),W.parseSwagger1=function(t){return m(53096).default(t)}},96609:(L,W,m)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.Api=void 0;var y=m(35414);W.Api=function(t,n){void 0===n&&(n={}),this.entrypoint=t,y.assignSealed(this,n)}},66639:(L,W,m)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.Field=void 0;var y=m(35414);W.Field=function(t,n){void 0===n&&(n={}),this.name=t,y.assignSealed(this,n)}},57175:(L,W,m)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.Resource=void 0;var y=m(35414);W.Resource=function(t,n,o){void 0===o&&(o={}),this.name=t,this.url=n,y.assignSealed(this,o)}},2586:(L,W,m)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.removeTrailingSlash=void 0;var p=m(59312).__importDefault(m(37901)),e=m(66639),t=m(57175),n=m(61817);W.removeTrailingSlash=function(c){return c.endsWith("/")&&(c=c.slice(0,-1)),c},W.default=function(c,v){return n.getResources(c.paths).map(function(H){var V=H.replace("/",""),G=W.removeTrailingSlash(v)+H,Z=Object.keys(c.paths[H])[0],vt=c.paths[H][Z];if(!vt.tags)throw new Error;var it=vt.tags[0];if(!c.components)throw new Error;if(!c.components.schemas)throw new Error;var wt=c.components.schemas[it].properties;if(!wt)throw new Error;var ct=Object.keys(wt),yt=p.default(c,["components","schemas",it,"required"],[]),lt=ct.map(function(at){return new e.Field(at,{id:null,range:null,reference:null,required:!!yt.find(function(bt){return bt===at}),description:p.default(wt[at],"description","")})});return new t.Resource(V,G,{id:null,title:it,fields:lt,readableFields:lt,writableFields:lt})})}},53096:(L,W,m)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});var y=m(59312),p=m(96609),e=y.__importStar(m(2586));W.default=function(n){return n=e.removeTrailingSlash(n),fetch(n).then(function(o){return Promise.all([o,o.json()])}).then(function(o){var s=o[0],c=o[1],v=c.info.title,R=e.default(c,n);return Promise.resolve({api:new p.Api(n,{title:v,resources:R}),response:c,status:s.status})},function(o){var s=o[0],c=o[1];return Promise.reject({api:new p.Api(n,{resources:[]}),response:c,status:s.status})})}},35414:(L,W)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.assignSealed=void 0,W.assignSealed=function(y,p){Object.keys(p).forEach(function(e){Object.defineProperty(y,e,{writable:!0,enumerable:!0,configurable:!1,value:p[e]})})}},61817:(L,W)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getResources=void 0,W.getResources=function(y){var p=[];return Object.keys(y).forEach(function(e){e.includes("/{id}")||p.find(function(t){return t.startsWith("/"+e.split("/")[1])})||p.push(e)}),p}},54678:function(L,W,m){var p,e;p=[m(33164)],void 0!==(e=function(t){"use strict";return t}.apply(W,p))&&(L.exports=e)},33164:function(L,W){var p;void 0!==(p=function(){"use strict";var e={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return e.CONNECTING_SNAP_RADIUS=e.SNAP_RADIUS,e.CURRENT_CONNECTION_PREFERENCE=8,e.BUMP_DELAY=250,e.BUMP_RANDOMNESS=10,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.connectionTypes.INPUT_VALUE]=e.connectionTypes.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.OUTPUT_VALUE]=e.connectionTypes.INPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.NEXT_STATEMENT]=e.connectionTypes.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.connectionTypes.PREVIOUS_STATEMENT]=e.connectionTypes.NEXT_STATEMENT,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",e.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",e.utils={},e.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),e.Msg={},e.utils.global.Blockly||(e.utils.global.Blockly={}),e.utils.global.Blockly.Msg||(e.utils.global.Blockly.Msg=e.Msg),e.utils.colour={},e.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var n=e.utils.colour.names[t];if(n||(n="0x"==t.substring(0,2)?"#"+t.substring(2):t,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var o=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(t=Number(o[1]),n=Number(o[2]),o=Number(o[3]),0<=t&&256>t&&0<=n&&256>n&&0<=o&&256>o)?e.utils.colour.rgbToHex(t,n,o):null},e.utils.colour.rgbToHex=function(t,n,o){return n=t<<16|n<<8|o,16>t?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},e.utils.colour.hexToRgb=function(t){return(t=e.utils.colour.parse(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},e.utils.colour.hsvToHex=function(t,n,o){var s=0,c=0,v=0;if(0==n)v=c=s=o;else{var R=Math.floor(t/60),O=t/60-R;t=o*(1-n);var H=o*(1-n*O);switch(n=o*(1-n*(1-O)),R){case 1:s=H,c=o,v=t;break;case 2:s=t,c=o,v=n;break;case 3:s=t,c=H,v=o;break;case 4:s=n,c=t,v=o;break;case 5:s=o,c=t,v=H;break;case 6:case 0:s=o,c=n,v=t}}return e.utils.colour.rgbToHex(Math.floor(s),Math.floor(c),Math.floor(v))},e.utils.colour.blend=function(t,n,o){return(t=e.utils.colour.parse(t))&&(n=e.utils.colour.parse(n))?(t=e.utils.colour.hexToRgb(t),n=e.utils.colour.hexToRgb(n),e.utils.colour.rgbToHex(Math.round(n[0]+o*(t[0]-n[0])),Math.round(n[1]+o*(t[1]-n[1])),Math.round(n[2]+o*(t[2]-n[2])))):null},e.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},e.utils.Coordinate=function(t,n){this.x=t,this.y=n},e.utils.Coordinate.equals=function(t,n){return t==n||!(!t||!n)&&t.x==n.x&&t.y==n.y},e.utils.Coordinate.distance=function(t,n){var o=t.x-n.x;return t=t.y-n.y,Math.sqrt(o*o+t*t)},e.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.utils.Coordinate.difference=function(t,n){return new e.utils.Coordinate(t.x-n.x,t.y-n.y)},e.utils.Coordinate.sum=function(t,n){return new e.utils.Coordinate(t.x+n.x,t.y+n.y)},e.utils.Coordinate.prototype.clone=function(){return new e.utils.Coordinate(this.x,this.y)},e.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},e.utils.Coordinate.prototype.translate=function(t,n){return this.x+=t,this.y+=n,this},e.utils.Rect=function(t,n,o,s){this.top=t,this.bottom=n,this.left=o,this.right=s},e.utils.Rect.prototype.contains=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},e.utils.string={},e.utils.string.startsWith=function(t,n){return 0==t.lastIndexOf(n,0)},e.utils.string.shortestStringLength=function(t){return t.length?t.reduce(function(n,o){return n.length<o.length?n:o}).length:0},e.utils.string.commonWordPrefix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var o=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var c=t[0][s],v=1;v<t.length;v++)if(c!=t[v][s])return o;" "==c&&(o=s+1)}for(v=1;v<t.length;v++)if((c=t[v][s])&&" "!=c)return o;return n},e.utils.string.commonWordSuffix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var o=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var c=t[0].substr(-s-1,1),v=1;v<t.length;v++)if(c!=t[v].substr(-s-1,1))return o;" "==c&&(o=s+1)}for(v=1;v<t.length;v++)if((c=t[v].charAt(t[v].length-s-1))&&" "!=c)return o;return n},e.utils.string.wrap=function(t,n){t=t.split("\n");for(var o=0;o<t.length;o++)t[o]=e.utils.string.wrapLine_(t[o],n);return t.join("\n")},e.utils.string.wrapLine_=function(t,n){if(t.length<=n)return t;for(var o=t.trim().split(/\s+/),s=0;s<o.length;s++)o[s].length>n&&(n=o[s].length);s=-1/0;var c=1;do{var v=s,R=t;t=[];var O=o.length/c,H=1;for(s=0;s<o.length-1;s++)H<(s+1.5)/O?(H++,t[s]=!0):t[s]=!1;t=e.utils.string.wrapMutate_(o,t,n),s=e.utils.string.wrapScore_(o,t,n),t=e.utils.string.wrapToText_(o,t),c++}while(s>v);return R},e.utils.string.wrapScore_=function(t,n,o){for(var s=[0],c=[],v=0;v<t.length;v++)s[s.length-1]+=t[v].length,!0===n[v]?(s.push(0),c.push(t[v].charAt(t[v].length-1))):!1===n[v]&&s[s.length-1]++;for(t=Math.max.apply(Math,s),v=n=0;v<s.length;v++)n-=2*Math.pow(Math.abs(o-s[v]),1.5),n-=Math.pow(t-s[v],1.5),-1!=".?!".indexOf(c[v])?n+=o/3:-1!=",;)]}".indexOf(c[v])&&(n+=o/4);return 1<s.length&&s[s.length-1]<=s[s.length-2]&&(n+=.5),n},e.utils.string.wrapMutate_=function(t,n,o){for(var c,s=e.utils.string.wrapScore_(t,n,o),v=0;v<n.length-1;v++)if(n[v]!=n[v+1]){var R=[].concat(n);R[v]=!R[v],R[v+1]=!R[v+1];var O=e.utils.string.wrapScore_(t,R,o);O>s&&(s=O,c=R)}return c?e.utils.string.wrapMutate_(t,c,o):n},e.utils.string.wrapToText_=function(t,n){for(var o=[],s=0;s<t.length;s++)o.push(t[s]),void 0!==n[s]&&o.push(n[s]?"\n":" ");return o.join("")},e.utils.Size=function(t,n){this.width=t,this.height=n},e.utils.Size.equals=function(t,n){return t==n||!(!t||!n)&&t.width==n.width&&t.height==n.height},e.utils.style={},e.utils.style.getSize=function(t){if("none"!=e.utils.style.getStyle_(t,"display"))return e.utils.style.getSizeWithDisplay_(t);var n=t.style,o=n.display,s=n.visibility,c=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var v=t.offsetWidth;return t=t.offsetHeight,n.display=o,n.position=c,n.visibility=s,new e.utils.Size(v,t)},e.utils.style.getSizeWithDisplay_=function(t){return new e.utils.Size(t.offsetWidth,t.offsetHeight)},e.utils.style.getStyle_=function(t,n){return e.utils.style.getComputedStyle(t,n)||e.utils.style.getCascadedStyle(t,n)||t.style&&t.style[n]},e.utils.style.getComputedStyle=function(t,n){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[n]||t.getPropertyValue(n))||""},e.utils.style.getCascadedStyle=function(t,n){return t.currentStyle?t.currentStyle[n]:null},e.utils.style.getPageOffset=function(t){var n=new e.utils.Coordinate(0,0);t=t.getBoundingClientRect();var o=document.documentElement;return o=new e.utils.Coordinate(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),n.x=t.left+o.x,n.y=t.top+o.y,n},e.utils.style.getViewportPageOffset=function(){var t=document.body,n=document.documentElement;return new e.utils.Coordinate(t.scrollLeft||n.scrollLeft,t.scrollTop||n.scrollTop)},e.utils.style.setElementShown=function(t,n){t.style.display=n?"":"none"},e.utils.style.isRightToLeft=function(t){return"rtl"==e.utils.style.getStyle_(t,"direction")},e.utils.style.getBorderBox=function(t){var n=e.utils.style.getComputedStyle(t,"borderLeftWidth"),o=e.utils.style.getComputedStyle(t,"borderRightWidth"),s=e.utils.style.getComputedStyle(t,"borderTopWidth");return t=e.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(s),right:parseFloat(o),bottom:parseFloat(t),left:parseFloat(n)}},e.utils.style.scrollIntoContainerView=function(t,n,o){t=e.utils.style.getContainerOffsetToScrollInto(t,n,o),n.scrollLeft=t.x,n.scrollTop=t.y},e.utils.style.getContainerOffsetToScrollInto=function(t,n,o){var s=e.utils.style.getPageOffset(t),c=e.utils.style.getPageOffset(n),v=e.utils.style.getBorderBox(n),R=s.x-c.x-v.left;return s=s.y-c.y-v.top,c=e.utils.style.getSizeWithDisplay_(t),t=n.clientWidth-c.width,c=n.clientHeight-c.height,v=n.scrollLeft,n=n.scrollTop,o?(v+=R-t/2,n+=s-c/2):(v+=Math.min(R,Math.max(R-t,0)),n+=Math.min(s,Math.max(s-c,0))),new e.utils.Coordinate(v,n)},e.utils.userAgent={},function(t){function n(s){return-1!=o.indexOf(s.toUpperCase())}e.utils.userAgent.raw=t;var o=e.utils.userAgent.raw.toUpperCase();e.utils.userAgent.IE=n("Trident")||n("MSIE"),e.utils.userAgent.EDGE=n("Edge"),e.utils.userAgent.JAVA_FX=n("JavaFX"),e.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!e.utils.userAgent.EDGE,e.utils.userAgent.WEBKIT=n("WebKit")&&!e.utils.userAgent.EDGE,e.utils.userAgent.GECKO=n("Gecko")&&!e.utils.userAgent.WEBKIT&&!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,e.utils.userAgent.ANDROID=n("Android"),t=e.utils.global.navigator&&e.utils.global.navigator.maxTouchPoints,e.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<t,e.utils.userAgent.IPOD=n("iPod"),e.utils.userAgent.IPHONE=n("iPhone")&&!e.utils.userAgent.IPAD&&!e.utils.userAgent.IPOD,e.utils.userAgent.MAC=n("Macintosh"),e.utils.userAgent.TABLET=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),e.utils.userAgent.MOBILE=!e.utils.userAgent.TABLET&&(e.utils.userAgent.IPOD||e.utils.userAgent.IPHONE||e.utils.userAgent.ANDROID||n("IEMobile"))}(e.utils.global.navigator&&e.utils.global.navigator.userAgent||""),e.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},e.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},e.utils.getRelativeXY=function(t){var n=new e.utils.Coordinate(0,0),o=t.getAttribute("x");return o&&(n.x=parseInt(o,10)),(o=t.getAttribute("y"))&&(n.y=parseInt(o,10)),(o=(o=t.getAttribute("transform"))&&o.match(e.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(o[1]),o[3]&&(n.y+=Number(o[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(e.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(t[1]),t[3]&&(n.y+=Number(t[3]))),n},e.utils.getInjectionDivXY_=function(t){for(var n=0,o=0;t;){var s=e.utils.getRelativeXY(t);if(n+=s.x,o+=s.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new e.utils.Coordinate(n,o)},e.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,e.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,e.utils.isRightButton=function(t){return!(!t.ctrlKey||!e.utils.userAgent.MAC)||2==t.button},e.utils.mouseToSvg=function(t,n,o){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,o||(o=n.getScreenCTM().inverse()),s.matrixTransform(o)},e.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*e.LINE_MODE_MULTIPLIER,y:t.deltaY*e.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*e.PAGE_MODE_MULTIPLIER,y:t.deltaY*e.PAGE_MODE_MULTIPLIER}}},e.utils.tokenizeInterpolation=function(t){return e.utils.tokenizeInterpolation_(t,!0)},e.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=e.utils.tokenizeInterpolation_(t,!1)).length?String(t[0]):""},e.utils.checkMessageReferences=function(t){for(var n=!0,o=e.Msg,s=t.match(/%{BKY_[A-Z]\w*}/gi),c=0;c<s.length;c++)null==o[s[c].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+s[c]+" in "+t),n=!1);return n},e.utils.tokenizeInterpolation_=function(t,n){var o=[],s=t.split("");s.push("");var c=0;t=[];for(var v=null,R=0;R<s.length;R++){var O=s[R];0==c?"%"==O?((O=t.join(""))&&o.push(O),t.length=0,c=1):t.push(O):1==c?"%"==O?(t.push(O),c=0):n&&"0"<=O&&"9">=O?(c=2,v=O,(O=t.join(""))&&o.push(O),t.length=0):"{"==O?c=3:(t.push("%",O),c=0):2==c?"0"<=O&&"9">=O?v+=O:(o.push(parseInt(v,10)),R--,c=0):3==c&&(""==O?(t.splice(0,0,"%{"),R--,c=0):"}"!=O?t.push(O):(c=t.join(""),/[A-Z]\w*/i.test(c)?(O=c.toUpperCase(),(O=e.utils.string.startsWith(O,"BKY_")?O.substring(4):null)&&O in e.Msg?"string"==typeof(c=e.Msg[O])?Array.prototype.push.apply(o,e.utils.tokenizeInterpolation_(c,n)):o.push(n?String(c):c):o.push("%{"+c+"}")):o.push("%{"+c+"}"),c=t.length=0))}for((O=t.join(""))&&o.push(O),n=[],R=t.length=0;R<o.length;++R)"string"==typeof o[R]?t.push(o[R]):((O=t.join(""))&&n.push(O),t.length=0,n.push(o[R]));return(O=t.join(""))&&n.push(O),t.length=0,n},e.utils.genUid=function(){for(var t=e.utils.genUid.soup_.length,n=[],o=0;20>o;o++)n[o]=e.utils.genUid.soup_.charAt(Math.random()*t);return n.join("")},e.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.utils.is3dSupported=function(){if(void 0!==e.utils.is3dSupported.cached_)return e.utils.is3dSupported.cached_;if(!e.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),n="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var s in document.body.insertBefore(t,null),o)if(void 0!==t.style[s]){if(t.style[s]="translate3d(1px,1px,1px)",!(n=e.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(o[s])}return document.body.removeChild(t),e.utils.is3dSupported.cached_="none"!==n,e.utils.is3dSupported.cached_},e.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),t())},10)},e.utils.getViewportBBox=function(){var t=e.utils.style.getViewportPageOffset();return new e.utils.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},e.utils.arrayRemove=function(t,n){return-1!=(n=t.indexOf(n))&&(t.splice(n,1),!0)},e.utils.getDocumentScroll=function(){var t=document.documentElement,n=window;return e.utils.userAgent.IE&&n.pageYOffset!=t.scrollTop?new e.utils.Coordinate(t.scrollLeft,t.scrollTop):new e.utils.Coordinate(n.pageXOffset||t.scrollLeft,n.pageYOffset||t.scrollTop)},e.utils.getBlockTypeCounts=function(t,n){var o=Object.create(null),s=t.getDescendants(!0);for(n&&(t=t.getNextBlock())&&(t=s.indexOf(t),s.splice(t,s.length-t)),t=0;n=s[t];t++)o[n.type]?o[n.type]++:o[n.type]=1;return o},e.utils.screenToWsCoordinates=function(t,n){var o=n.x;n=n.y;var s=t.getInjectionDiv().getBoundingClientRect();return o=new e.utils.Coordinate(o-s.left,n-s.top),n=t.getOriginOffsetInPixels(),e.utils.Coordinate.difference(o,n).scale(1/t.scale)},e.utils.parseBlockColour=function(t){var n="string"==typeof t?e.utils.replaceMessageReferences(t):t,o=Number(n);if(!isNaN(o)&&0<=o&&360>=o)return{hue:o,hex:e.utils.colour.hsvToHex(o,e.HSV_SATURATION,255*e.HSV_VALUE)};if(o=e.utils.colour.parse(n))return{hue:null,hex:o};throw o='Invalid colour: "'+n+'"',t!=n&&(o+=' (from "'+t+'")'),Error(o)},e.Touch={},e.Touch.TOUCH_ENABLED="ontouchstart"in e.utils.global||!!(e.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!e.utils.global.navigator||!e.utils.global.navigator.maxTouchPoints&&!e.utils.global.navigator.msMaxTouchPoints),e.Touch.touchIdentifier_=null,e.Touch.TOUCH_MAP={},e.utils.global.PointerEvent?e.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:e.Touch.TOUCH_ENABLED&&(e.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),e.longPid_=0,e.longStart=function(t,n){e.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(e.longPid_=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n&&n.handleRightClick(t)},e.LONGPRESS))},e.longStop_=function(){e.longPid_&&(clearTimeout(e.longPid_),e.longPid_=0)},e.Touch.clearTouchIdentifier=function(){e.Touch.touchIdentifier_=null},e.Touch.shouldHandleEvent=function(t){return!e.Touch.isMouseOrTouchEvent(t)||e.Touch.checkTouchIdentifier(t)},e.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},e.Touch.checkTouchIdentifier=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);return null!=e.Touch.touchIdentifier_?e.Touch.touchIdentifier_==n:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(e.Touch.touchIdentifier_=n,!0)},e.Touch.setClientFromTouch=function(t){if(e.utils.string.startsWith(t.type,"touch")){var n=t.changedTouches[0];t.clientX=n.clientX,t.clientY=n.clientY}},e.Touch.isMouseOrTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"mouse")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.isTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.splitEventByTouches=function(t){var n=[];if(t.changedTouches)for(var o=0;o<t.changedTouches.length;o++)n[o]={type:t.type,changedTouches:[t.changedTouches[o]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else n.push(t);return n},e.browserEvents={},e.browserEvents.conditionalBind=function(t,n,o,s,c,v){var R=!1,O=function(vt){var it=!c;vt=e.Touch.splitEventByTouches(vt);for(var wt,ot=0;wt=vt[ot];ot++)(!it||e.Touch.shouldHandleEvent(wt))&&(e.Touch.setClientFromTouch(wt),o?s.call(o,wt):s(wt),R=!0)},H=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var G,V=0;G=e.Touch.TOUCH_MAP[n][V];V++)t.addEventListener(G,O,!1),H.push([t,G,O]);else if(t.addEventListener(n,O,!1),H.push([t,n,O]),n in e.Touch.TOUCH_MAP){var Z=function(vt){O(vt),R&&!v&&vt.preventDefault()};for(V=0;G=e.Touch.TOUCH_MAP[n][V];V++)t.addEventListener(G,Z,!1),H.push([t,G,Z])}return H},e.browserEvents.bind=function(t,n,o,s){var c=function(V){o?s.call(o,V):s(V)},v=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var O,R=0;O=e.Touch.TOUCH_MAP[n][R];R++)t.addEventListener(O,c,!1),v.push([t,O,c]);else if(t.addEventListener(n,c,!1),v.push([t,n,c]),n in e.Touch.TOUCH_MAP){var H=function(V){if(V.changedTouches&&1==V.changedTouches.length){var G=V.changedTouches[0];V.clientX=G.clientX,V.clientY=G.clientY}c(V),V.preventDefault()};for(R=0;O=e.Touch.TOUCH_MAP[n][R];R++)t.addEventListener(O,H,!1),v.push([t,O,H])}return v},e.browserEvents.unbind=function(t){for(;t.length;){var n=t.pop(),o=n[2];n[0].removeEventListener(n[1],o,!1)}return o},e.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},e.ComponentManager.prototype.addComponent=function(t,n){var o=t.component.id;if(!n&&this.componentData_[o])throw Error('Plugin "'+o+'" with capabilities "'+this.componentData_[o].capabilities+'" already added.');this.componentData_[o]=t,n=[];for(var s=0;s<t.capabilities.length;s++){var c=String(t.capabilities[s]).toLowerCase();n.push(c),void 0===this.capabilityToComponentIds_[c]?this.capabilityToComponentIds_[c]=[o]:this.capabilityToComponentIds_[c].push(o)}this.componentData_[o].capabilities=n},e.ComponentManager.prototype.removeComponent=function(t){var n=this.componentData_[t];if(n){for(var o=0;o<n.capabilities.length;o++){var s=String(n.capabilities[o]).toLowerCase();this.capabilityToComponentIds_[s].splice(this.capabilityToComponentIds_[s].indexOf(t),1)}delete this.componentData_[t]}},e.ComponentManager.prototype.addCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot add capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?console.warn('Plugin "'+t+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[t].capabilities.push(n),this.capabilityToComponentIds_[n].push(t))},e.ComponentManager.prototype.removeCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?(n=String(n).toLowerCase(),this.componentData_[t].capabilities.splice(this.componentData_[t].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(t),1)):console.warn('Plugin "'+t+"doesn't have capability \""+n+'" to remove')},e.ComponentManager.prototype.hasCapability=function(t,n){return n=String(n).toLowerCase(),-1!==this.componentData_[t].capabilities.indexOf(n)},e.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},e.ComponentManager.prototype.getComponents=function(t,n){if(t=String(t).toLowerCase(),!(t=this.capabilityToComponentIds_[t]))return[];var o=[];if(n){var s=[],c=this.componentData_;t.forEach(function(v){s.push(c[v])}),s.sort(function(v,R){return v.weight-R.weight}),s.forEach(function(v){o.push(v.component)})}else c=this.componentData_,t.forEach(function(v){o.push(c[v].component)});return o},e.ComponentManager.Capability=function(t){this.name_=t},e.ComponentManager.Capability.prototype.toString=function(){return this.name_},e.ComponentManager.Capability.POSITIONABLE=new e.ComponentManager.Capability("positionable"),e.ComponentManager.Capability.DRAG_TARGET=new e.ComponentManager.Capability("drag_target"),e.ComponentManager.Capability.DELETE_AREA=new e.ComponentManager.Capability("delete_area"),e.ComponentManager.Capability.AUTOHIDEABLE=new e.ComponentManager.Capability("autohideable"),e.utils.Svg=function(t){this.tagName_=t},e.utils.Svg.prototype.toString=function(){return this.tagName_},e.utils.Svg.ANIMATE=new e.utils.Svg("animate"),e.utils.Svg.CIRCLE=new e.utils.Svg("circle"),e.utils.Svg.CLIPPATH=new e.utils.Svg("clipPath"),e.utils.Svg.DEFS=new e.utils.Svg("defs"),e.utils.Svg.FECOMPOSITE=new e.utils.Svg("feComposite"),e.utils.Svg.FECOMPONENTTRANSFER=new e.utils.Svg("feComponentTransfer"),e.utils.Svg.FEFLOOD=new e.utils.Svg("feFlood"),e.utils.Svg.FEFUNCA=new e.utils.Svg("feFuncA"),e.utils.Svg.FEGAUSSIANBLUR=new e.utils.Svg("feGaussianBlur"),e.utils.Svg.FEPOINTLIGHT=new e.utils.Svg("fePointLight"),e.utils.Svg.FESPECULARLIGHTING=new e.utils.Svg("feSpecularLighting"),e.utils.Svg.FILTER=new e.utils.Svg("filter"),e.utils.Svg.FOREIGNOBJECT=new e.utils.Svg("foreignObject"),e.utils.Svg.G=new e.utils.Svg("g"),e.utils.Svg.IMAGE=new e.utils.Svg("image"),e.utils.Svg.LINE=new e.utils.Svg("line"),e.utils.Svg.PATH=new e.utils.Svg("path"),e.utils.Svg.PATTERN=new e.utils.Svg("pattern"),e.utils.Svg.POLYGON=new e.utils.Svg("polygon"),e.utils.Svg.RECT=new e.utils.Svg("rect"),e.utils.Svg.SVG=new e.utils.Svg("svg"),e.utils.Svg.TEXT=new e.utils.Svg("text"),e.utils.Svg.TSPAN=new e.utils.Svg("tspan"),e.utils.dom={},e.utils.dom.SVG_NS="http://www.w3.org/2000/svg",e.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",e.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",e.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},e.utils.dom.cacheWidths_=null,e.utils.dom.cacheReference_=0,e.utils.dom.canvasContext_=null,e.utils.dom.createSvgElement=function(t,n,o){for(var s in t=document.createElementNS(e.utils.dom.SVG_NS,String(t)),n)t.setAttribute(s,n[s]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),o&&o.appendChild(t),t},e.utils.dom.addClass=function(t,n){var o=t.getAttribute("class")||"";return-1==(" "+o+" ").indexOf(" "+n+" ")&&(o&&(o+=" "),t.setAttribute("class",o+n),!0)},e.utils.dom.removeClasses=function(t,n){n=n.split(" ");for(var o=0;o<n.length;o++)e.utils.dom.removeClass(t,n[o])},e.utils.dom.removeClass=function(t,n){var o=t.getAttribute("class");if(-1==(" "+o+" ").indexOf(" "+n+" "))return!1;o=o.split(/\s+/);for(var s=0;s<o.length;s++)o[s]&&o[s]!=n||(o.splice(s,1),s--);return o.length?t.setAttribute("class",o.join(" ")):t.removeAttribute("class"),!0},e.utils.dom.hasClass=function(t,n){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+n+" ")},e.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},e.utils.dom.insertAfter=function(t,n){var o=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");o?n.insertBefore(t,o):n.appendChild(t)},e.utils.dom.containsNode=function(t,n){return!!(t.compareDocumentPosition(n)&e.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},e.utils.dom.setCssTransform=function(t,n){t.style.transform=n,t.style["-webkit-transform"]=n},e.utils.dom.startTextWidthCache=function(){e.utils.dom.cacheReference_++,e.utils.dom.cacheWidths_||(e.utils.dom.cacheWidths_=Object.create(null))},e.utils.dom.stopTextWidthCache=function(){e.utils.dom.cacheReference_--,e.utils.dom.cacheReference_||(e.utils.dom.cacheWidths_=null)},e.utils.dom.getTextWidth=function(t){var o,n=t.textContent+"\n"+t.className.baseVal;if(e.utils.dom.cacheWidths_&&(o=e.utils.dom.cacheWidths_[n]))return o;try{o=e.utils.userAgent.IE||e.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(s){return 8*t.textContent.length}return e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[n]=o),o},e.utils.dom.getFastTextWidth=function(t,n,o,s){return e.utils.dom.getFastTextWidthWithSizeString(t,n+"pt",o,s)},e.utils.dom.getFastTextWidthWithSizeString=function(t,n,o,s){var v,c=t.textContent;return t=c+"\n"+t.className.baseVal,e.utils.dom.cacheWidths_&&(v=e.utils.dom.cacheWidths_[t])||(e.utils.dom.canvasContext_||((v=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(v),e.utils.dom.canvasContext_=v.getContext("2d")),e.utils.dom.canvasContext_.font=o+" "+n+" "+s,v=e.utils.dom.canvasContext_.measureText(c).width,e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[t]=v)),v},e.utils.dom.measureFontMetrics=function(t,n,o,s){var c=document.createElement("span");c.style.font=o+" "+n+" "+s,c.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(c),n.appendChild(t),document.body.appendChild(n);try{o={},n.style.alignItems="baseline",o.baseline=t.offsetTop-c.offsetTop,n.style.alignItems="flex-end",o.height=t.offsetTop-c.offsetTop}finally{document.body.removeChild(n)}return o},e.utils.math={},e.utils.math.toRadians=function(t){return t*Math.PI/180},e.utils.math.toDegrees=function(t){return 180*t/Math.PI},e.utils.math.clamp=function(t,n,o){if(o<t){var s=o;o=t,t=s}return Math.max(t,Math.min(n,o))},e.DropDownDiv=function(){},e.DropDownDiv.boundsElement_=null,e.DropDownDiv.owner_=null,e.DropDownDiv.positionToField_=null,e.DropDownDiv.ARROW_SIZE=16,e.DropDownDiv.BORDER_SIZE=1,e.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,e.DropDownDiv.PADDING_Y=16,e.DropDownDiv.ANIMATION_TIME=.25,e.DropDownDiv.animateOutTimer_=null,e.DropDownDiv.onHide_=null,e.DropDownDiv.rendererClassName_="",e.DropDownDiv.themeClassName_="",e.DropDownDiv.createDom=function(){if(!e.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",(e.parentContainer||document.body).appendChild(t),e.DropDownDiv.DIV_=t;var n=document.createElement("div");n.className="blocklyDropDownContent",t.appendChild(n),e.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(n),e.DropDownDiv.arrow_=n,e.DropDownDiv.DIV_.style.opacity=0,e.DropDownDiv.DIV_.style.transition="transform "+e.DropDownDiv.ANIMATION_TIME+"s, opacity "+e.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",function(){e.utils.dom.addClass(t,"blocklyFocused")}),t.addEventListener("focusout",function(){e.utils.dom.removeClass(t,"blocklyFocused")})}},e.DropDownDiv.setBoundsElement=function(t){e.DropDownDiv.boundsElement_=t},e.DropDownDiv.getContentDiv=function(){return e.DropDownDiv.content_},e.DropDownDiv.clearContent=function(){e.DropDownDiv.content_.textContent="",e.DropDownDiv.content_.style.width=""},e.DropDownDiv.setColour=function(t,n){e.DropDownDiv.DIV_.style.backgroundColor=t,e.DropDownDiv.DIV_.style.borderColor=n},e.DropDownDiv.showPositionedByBlock=function(t,n,o,s){return e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfBlock_(n),t,o,s)},e.DropDownDiv.showPositionedByField=function(t,n,o){return e.DropDownDiv.positionToField_=!0,e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfField_(t),t,n,o)},e.DropDownDiv.getScaledBboxOfBlock_=function(t){var n=t.getSvgRoot(),o=n.getBBox(),s=t.workspace.scale;return t=o.height*s,o=o.width*s,n=e.utils.style.getPageOffset(n),new e.utils.Rect(n.y,n.y+t,n.x,n.x+o)},e.DropDownDiv.getScaledBboxOfField_=function(t){return t=t.getScaledBBox(),new e.utils.Rect(t.top,t.bottom,t.left,t.right)},e.DropDownDiv.showPositionedByRect_=function(t,n,o,s){var c=t.left+(t.right-t.left)/2,v=t.bottom;t=t.top,s&&(t+=s);for(var R=(s=n.getSourceBlock()).workspace;R.options.parentWorkspace;)R=R.options.parentWorkspace;return e.DropDownDiv.setBoundsElement(R.getParentSvg().parentNode),e.DropDownDiv.show(n,s.RTL,c,v,c,t,o)},e.DropDownDiv.show=function(t,n,o,s,c,v,R){return e.DropDownDiv.owner_=t,e.DropDownDiv.onHide_=R||null,(t=e.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=e.getMainWorkspace(),e.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),e.DropDownDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.DropDownDiv.rendererClassName_),e.utils.dom.addClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.positionInternal_(o,s,c,v)},e.DropDownDiv.getBoundsInfo_=function(){var t=e.utils.style.getPageOffset(e.DropDownDiv.boundsElement_),n=e.utils.style.getSize(e.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+n.width,top:t.y,bottom:t.y+n.height,width:n.width,height:n.height}},e.DropDownDiv.getPositionMetrics_=function(t,n,o,s){var c=e.DropDownDiv.getBoundsInfo_(),v=e.utils.style.getSize(e.DropDownDiv.DIV_);return n+v.height<c.bottom?e.DropDownDiv.getPositionBelowMetrics_(t,n,c,v):s-v.height>c.top?e.DropDownDiv.getPositionAboveMetrics_(o,s,c,v):n+v.height<document.documentElement.clientHeight?e.DropDownDiv.getPositionBelowMetrics_(t,n,c,v):s-v.height>document.documentElement.clientTop?e.DropDownDiv.getPositionAboveMetrics_(o,s,c,v):e.DropDownDiv.getPositionTopOfPageMetrics_(t,c,v)},e.DropDownDiv.getPositionBelowMetrics_=function(t,n,o,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,o.left,o.right,s.width)).divX,initialY:n,finalX:t.divX,finalY:n+e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(e.DropDownDiv.ARROW_SIZE/2+e.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},e.DropDownDiv.getPositionAboveMetrics_=function(t,n,o,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,o.left,o.right,s.width)).divX,initialY:n-s.height,finalX:t.divX,finalY:n-s.height-e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:s.height-2*e.DropDownDiv.BORDER_SIZE-e.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},e.DropDownDiv.getPositionTopOfPageMetrics_=function(t,n,o){return{initialX:(t=e.DropDownDiv.getPositionX(t,n.left,n.right,o.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},e.DropDownDiv.getPositionX=function(t,n,o,s){var c=t;return t=e.utils.math.clamp(n,t-s/2,o-s),{arrowX:s=e.utils.math.clamp(n=e.DropDownDiv.ARROW_HORIZONTAL_PADDING,(c-=e.DropDownDiv.ARROW_SIZE/2)-t,s-n-e.DropDownDiv.ARROW_SIZE),divX:t}},e.DropDownDiv.isVisible=function(){return!!e.DropDownDiv.owner_},e.DropDownDiv.hideIfOwner=function(t,n){return e.DropDownDiv.owner_===t&&(n?e.DropDownDiv.hideWithoutAnimation():e.DropDownDiv.hide(),!0)},e.DropDownDiv.hide=function(){var t=e.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,e.DropDownDiv.animateOutTimer_=setTimeout(function(){e.DropDownDiv.hideWithoutAnimation()},1e3*e.DropDownDiv.ANIMATION_TIME),e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null)},e.DropDownDiv.hideWithoutAnimation=function(){if(e.DropDownDiv.isVisible()){e.DropDownDiv.animateOutTimer_&&clearTimeout(e.DropDownDiv.animateOutTimer_);var t=e.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null),e.DropDownDiv.clearContent(),e.DropDownDiv.owner_=null,e.DropDownDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.rendererClassName_),e.DropDownDiv.rendererClassName_=""),e.DropDownDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.DropDownDiv.positionInternal_=function(t,n,o,s){(t=e.DropDownDiv.getPositionMetrics_(t,n,o,s)).arrowVisible?(e.DropDownDiv.arrow_.style.display="",e.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",e.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):e.DropDownDiv.arrow_.style.display="none",n=Math.floor(t.initialX),o=Math.floor(t.initialY),s=Math.floor(t.finalX);var c=Math.floor(t.finalY),v=e.DropDownDiv.DIV_;return v.style.left=n+"px",v.style.top=o+"px",v.style.display="block",v.style.opacity=1,v.style.transform="translate("+(s-n)+"px,"+(c-o)+"px)",!!t.arrowAtTop},e.DropDownDiv.repositionForWindowResize=function(){if(e.DropDownDiv.owner_){var t=e.DropDownDiv.owner_,n=t.getSourceBlock();t=e.DropDownDiv.positionToField_?e.DropDownDiv.getScaledBboxOfField_(t):e.DropDownDiv.getScaledBboxOfBlock_(n),e.DropDownDiv.positionInternal_(n=t.left+(t.right-t.left)/2,t.bottom,n,t.top)}else e.DropDownDiv.hide()},e.registry={},e.registry.typeMap_=Object.create(null),e.registry.DEFAULT="default",e.registry.Type=function(t){this.name_=t},e.registry.Type.prototype.toString=function(){return this.name_},e.registry.Type.CONNECTION_CHECKER=new e.registry.Type("connectionChecker"),e.registry.Type.CURSOR=new e.registry.Type("cursor"),e.registry.Type.EVENT=new e.registry.Type("event"),e.registry.Type.FIELD=new e.registry.Type("field"),e.registry.Type.RENDERER=new e.registry.Type("renderer"),e.registry.Type.TOOLBOX=new e.registry.Type("toolbox"),e.registry.Type.THEME=new e.registry.Type("theme"),e.registry.Type.TOOLBOX_ITEM=new e.registry.Type("toolboxItem"),e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new e.registry.Type("flyoutsVerticalToolbox"),e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new e.registry.Type("flyoutsHorizontalToolbox"),e.registry.Type.METRICS_MANAGER=new e.registry.Type("metricsManager"),e.registry.Type.BLOCK_DRAGGER=new e.registry.Type("blockDragger"),e.registry.register=function(t,n,o,s){if(!(t instanceof e.registry.Type)&&"string"!=typeof t||""==String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!o)throw Error("Can not register a null value");var c=e.registry.typeMap_[t];if(c||(c=e.registry.typeMap_[t]=Object.create(null)),e.registry.validate_(t,o),!s&&c[n])throw Error('Name "'+n+'" with type "'+t+'" already registered.');c[n]=o},e.registry.validate_=function(t,n){if(t===String(e.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+t+'" must have a fromJson function')},e.registry.unregister=function(t,n){t=String(t).toLowerCase(),n=n.toLowerCase();var o=e.registry.typeMap_[t];o&&o[n]?delete e.registry.typeMap_[t][n]:console.warn("Unable to unregister ["+n+"]["+t+"] from the registry.")},e.registry.getItem_=function(t,n,o){t=String(t).toLowerCase(),n=n.toLowerCase();var s=e.registry.typeMap_[t];if(!s||!s[n]){if(n="Unable to find ["+n+"]["+t+"] in the registry.",o)throw Error(n+" You must require or register a "+t+" plugin.");return console.warn(n),null}return s[n]},e.registry.hasItem=function(t,n){return t=String(t).toLowerCase(),n=n.toLowerCase(),!!(t=e.registry.typeMap_[t])&&!!t[n]},e.registry.getClass=function(t,n,o){return e.registry.getItem_(t,n,o)},e.registry.getObject=function(t,n,o){return e.registry.getItem_(t,n,o)},e.registry.getClassFromOptions=function(t,n,o){return"function"==typeof(n=n.plugins[t.toString()]||e.registry.DEFAULT)?n:e.registry.getClass(t,n,o)},e.Events={},e.Events.group_="",e.Events.recordUndo=!0,e.Events.disabled_=0,e.Events.CREATE="create",e.Events.BLOCK_CREATE=e.Events.CREATE,e.Events.DELETE="delete",e.Events.BLOCK_DELETE=e.Events.DELETE,e.Events.CHANGE="change",e.Events.BLOCK_CHANGE=e.Events.CHANGE,e.Events.MOVE="move",e.Events.BLOCK_MOVE=e.Events.MOVE,e.Events.VAR_CREATE="var_create",e.Events.VAR_DELETE="var_delete",e.Events.VAR_RENAME="var_rename",e.Events.UI="ui",e.Events.BLOCK_DRAG="drag",e.Events.SELECTED="selected",e.Events.CLICK="click",e.Events.MARKER_MOVE="marker_move",e.Events.BUBBLE_OPEN="bubble_open",e.Events.TRASHCAN_OPEN="trashcan_open",e.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.Events.THEME_CHANGE="theme_change",e.Events.VIEWPORT_CHANGE="viewport_change",e.Events.COMMENT_CREATE="comment_create",e.Events.COMMENT_DELETE="comment_delete",e.Events.COMMENT_CHANGE="comment_change",e.Events.COMMENT_MOVE="comment_move",e.Events.FINISHED_LOADING="finished_loading",e.Events.BUMP_EVENTS=[e.Events.BLOCK_CREATE,e.Events.BLOCK_MOVE,e.Events.COMMENT_CREATE,e.Events.COMMENT_MOVE],e.Events.FIRE_QUEUE_=[],e.Events.fire=function(t){e.Events.isEnabled()&&(e.Events.FIRE_QUEUE_.length||setTimeout(e.Events.fireNow_,0),e.Events.FIRE_QUEUE_.push(t))},e.Events.fireNow_=function(){for(var o,t=e.Events.filter(e.Events.FIRE_QUEUE_,!0),n=e.Events.FIRE_QUEUE_.length=0;o=t[n];n++)if(o.workspaceId){var s=e.Workspace.getById(o.workspaceId);s&&s.fireChangeListener(o)}},e.Events.filter=function(t,n){t=t.slice(),n||t.reverse();for(var v,o=[],s=Object.create(null),c=0;v=t[c];c++)if(!v.isNull()){var R=[v.isUiEvent?e.Events.UI:v.type,v.blockId,v.workspaceId].join(" "),O=s[R],H=O?O.event:null;O?v.type==e.Events.MOVE&&O.index==c-1?(H.newParentId=v.newParentId,H.newInputName=v.newInputName,H.newCoordinate=v.newCoordinate,O.index=c):v.type==e.Events.CHANGE&&v.element==H.element&&v.name==H.name?H.newValue=v.newValue:v.type==e.Events.VIEWPORT_CHANGE?(H.viewTop=v.viewTop,H.viewLeft=v.viewLeft,H.scale=v.scale,H.oldScale=v.oldScale):(v.type!=e.Events.CLICK||H.type!=e.Events.BUBBLE_OPEN)&&(s[R]={event:v,index:c},o.push(v)):(s[R]={event:v,index:c},o.push(v))}for(t=o.filter(function(V){return!V.isNull()}),n||t.reverse(),c=1;v=t[c];c++)v.type==e.Events.CHANGE&&"mutation"==v.element&&t.unshift(t.splice(c,1)[0]);return t},e.Events.clearPendingUndo=function(){for(var n,t=0;n=e.Events.FIRE_QUEUE_[t];t++)n.recordUndo=!1},e.Events.disable=function(){e.Events.disabled_++},e.Events.enable=function(){e.Events.disabled_--},e.Events.isEnabled=function(){return 0==e.Events.disabled_},e.Events.getGroup=function(){return e.Events.group_},e.Events.setGroup=function(t){e.Events.group_="boolean"==typeof t?t?e.utils.genUid():"":t},e.Events.getDescendantIds=function(t){var n=[];t=t.getDescendants(!1);for(var s,o=0;s=t[o];o++)n[o]=s.id;return n},e.Events.fromJson=function(t,n){var o=e.Events.get(t.type);if(!o)throw Error("Unknown event type.");return(o=new o).fromJson(t),o.workspaceId=n.id,o},e.Events.get=function(t){return e.registry.getClass(e.registry.Type.EVENT,t)},e.Events.disableOrphans=function(t){if((t.type==e.Events.MOVE||t.type==e.Events.CREATE)&&t.workspaceId){var n=e.Workspace.getById(t.workspaceId),o=n.getBlockById(t.blockId);if(o){t=e.Events.recordUndo;try{e.Events.recordUndo=!1;var s=o.getParent();if(s&&s.isEnabled()){var v,c=o.getDescendants(!1);for(n=0;v=c[n];n++)v.setEnabled(!0)}else if((o.outputConnection||o.previousConnection)&&!n.isDragging())do{o.setEnabled(!1),o=o.getNextBlock()}while(o)}finally{e.Events.recordUndo=t}}}},e.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.Events.Abstract.prototype.isUiEvent=!1,e.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},e.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},e.Events.Abstract.prototype.isNull=function(){return!1},e.Events.Abstract.prototype.run=function(t){},e.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=e.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},e.utils.object={},e.utils.object.inherits=function(t,n){t.superClass_=n.prototype,t.prototype=Object.create(n.prototype),t.prototype.constructor=t},e.utils.object.mixin=function(t,n){for(var o in n)t[o]=n[o]},e.utils.object.deepMerge=function(t,n){for(var o in n)t[o]=null!=n[o]&&"object"==typeof n[o]?e.utils.object.deepMerge(t[o]||Object.create(null),n[o]):n[o];return t},e.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(n){return t[n]})},e.utils.xml={},e.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",e.utils.xml.document=function(){return document},e.utils.xml.createElement=function(t){return e.utils.xml.document().createElementNS(e.utils.xml.NAME_SPACE,t)},e.utils.xml.createTextNode=function(t){return e.utils.xml.document().createTextNode(t)},e.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},e.inputTypes={VALUE:e.connectionTypes.INPUT_VALUE,STATEMENT:e.connectionTypes.NEXT_STATEMENT,DUMMY:5},e.Xml={},e.Xml.workspaceToDom=function(t,n){var o=e.utils.xml.createElement("xml"),s=e.Xml.variablesToDom(e.Variables.allUsedVarModels(t));s.hasChildNodes()&&o.appendChild(s);var v,c=t.getTopComments(!0);for(s=0;v=c[s];s++)o.appendChild(v.toXmlWithXY(n));for(t=t.getTopBlocks(!0),s=0;c=t[s];s++)o.appendChild(e.Xml.blockToDomWithXY(c,n));return o},e.Xml.variablesToDom=function(t){for(var s,n=e.utils.xml.createElement("variables"),o=0;s=t[o];o++){var c=e.utils.xml.createElement("variable");c.appendChild(e.utils.xml.createTextNode(s.name)),s.type&&c.setAttribute("type",s.type),c.id=s.getId(),n.appendChild(c)}return n},e.Xml.blockToDomWithXY=function(t,n){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var o;t.workspace.RTL&&(o=t.workspace.getWidth()),n=e.Xml.blockToDom(t,n);var s=t.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(t.workspace.RTL?o-s.x:s.x)),n.setAttribute("y",Math.round(s.y)),n},e.Xml.fieldToDom_=function(t){if(t.isSerializable()){var n=e.utils.xml.createElement("field");return n.setAttribute("name",t.name||""),t.toXml(n)}return null},e.Xml.allFieldsToDom_=function(t,n){for(var s,o=0;s=t.inputList[o];o++)for(var v,c=0;v=s.fieldRow[c];c++)(v=e.Xml.fieldToDom_(v))&&n.appendChild(v)},e.Xml.blockToDom=function(t,n){if(t.isInsertionMarker())return(t=t.getChildren(!1)[0])?e.Xml.blockToDom(t):new DocumentFragment;var o=e.utils.xml.createElement(t.isShadow()?"shadow":"block");if(o.setAttribute("type",t.type),n||o.setAttribute("id",t.id),t.mutationToDom){var s=t.mutationToDom();s&&(s.hasChildNodes()||s.hasAttributes())&&o.appendChild(s)}if(e.Xml.allFieldsToDom_(t,o),s=t.getCommentText()){var c=t.commentModel.size,v=t.commentModel.pinned,R=e.utils.xml.createElement("comment");R.appendChild(e.utils.xml.createTextNode(s)),R.setAttribute("pinned",v),R.setAttribute("h",c.height),R.setAttribute("w",c.width),o.appendChild(R)}for(t.data&&((s=e.utils.xml.createElement("data")).appendChild(e.utils.xml.createTextNode(t.data)),o.appendChild(s)),s=0;c=t.inputList[s];s++){var O;if(v=!0,c.type!=e.inputTypes.DUMMY){var H=c.connection.targetBlock();c.type==e.inputTypes.VALUE?O=e.utils.xml.createElement("value"):c.type==e.inputTypes.STATEMENT&&(O=e.utils.xml.createElement("statement")),!(R=c.connection.getShadowDom())||H&&H.isShadow()||O.appendChild(e.Xml.cloneShadow_(R,n)),H&&(R=e.Xml.blockToDom(H,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&(O.appendChild(R),v=!1),O.setAttribute("name",c.name),v||o.appendChild(O)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&o.setAttribute("inline",t.inputsInline),t.isCollapsed()&&o.setAttribute("collapsed",!0),t.isEnabled()||o.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||o.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||o.setAttribute("movable",!1),t.isEditable()||o.setAttribute("editable",!1),(s=t.getNextBlock())&&(R=e.Xml.blockToDom(s,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&((O=e.utils.xml.createElement("next")).appendChild(R),o.appendChild(O)),!(R=t.nextConnection&&t.nextConnection.getShadowDom())||s&&s.isShadow()||O.appendChild(e.Xml.cloneShadow_(R,n)),o},e.Xml.cloneShadow_=function(t,n){for(var s,o=t=t.cloneNode(!0);o;)if(n&&"shadow"==o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)s=o,o=o.parentNode,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&o.firstChild!=s&&e.utils.dom.removeNode(s);o&&(s=o,o=o.nextSibling,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&e.utils.dom.removeNode(s))}return t},e.Xml.domToText=function(t){return e.utils.xml.domToText(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},e.Xml.domToPrettyText=function(t){t=e.Xml.domToText(t).split("<");for(var n="",o=1;o<t.length;o++){var s=t[o];"/"==s[0]&&(n=n.substring(2)),t[o]=n+"<"+s,"/"!=s[0]&&"/>"!=s.slice(-2)&&(n+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},e.Xml.textToDom=function(t){var n=e.utils.xml.textToDomDocument(t);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return n.documentElement},e.Xml.clearWorkspaceAndLoadFromXml=function(t,n){return n.setResizesEnabled(!1),n.clear(),t=e.Xml.domToWorkspace(t,n),n.setResizesEnabled(!0),t},e.Xml.domToWorkspace=function(t,n){if(t instanceof e.Workspace){var o=t;t=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var s;n.RTL&&(s=n.getWidth()),o=[],e.utils.dom.startTextWidthCache();var c=e.Events.getGroup();c||e.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var v=!0;try{for(var O,R=0;O=t.childNodes[R];R++){var H=O.nodeName.toLowerCase(),V=O;if("block"==H||"shadow"==H&&!e.Events.recordUndo){var G=e.Xml.domToBlock(V,n);o.push(G.id);var Z=V.hasAttribute("x")?parseInt(V.getAttribute("x"),10):10,vt=V.hasAttribute("y")?parseInt(V.getAttribute("y"),10):10;isNaN(Z)||isNaN(vt)||G.moveBy(n.RTL?s-Z:Z,vt),v=!1}else{if("shadow"==H)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==H)n.rendered?e.WorkspaceCommentSvg?e.WorkspaceCommentSvg.fromXml(V,n,s):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):e.WorkspaceComment?e.WorkspaceComment.fromXml(V,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==H){if(!v)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");e.Xml.domToVariables(V,n),v=!1}}}}finally{c||e.Events.setGroup(!1),e.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),e.Events.fire(new(e.Events.get(e.Events.FINISHED_LOADING))(n)),o},e.Xml.appendDomToWorkspace=function(t,n){var o;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(o=n.getBlocksBoundingBox()),t=e.Xml.domToWorkspace(t,n),o&&o.top!=o.bottom){var s=o.bottom,c=n.RTL?o.right:o.left,v=1/0,R=-1/0,O=1/0;for(o=0;o<t.length;o++){var H=n.getBlockById(t[o]).getRelativeToSurfaceXY();H.y<O&&(O=H.y),H.x<v&&(v=H.x),H.x>R&&(R=H.x)}for(s=s-O+10,c=n.RTL?c-R:c-v,o=0;o<t.length;o++)n.getBlockById(t[o]).moveBy(c,s)}return t},e.Xml.domToBlock=function(t,n){if(t instanceof e.Workspace){var o=t;t=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}e.Events.disable(),o=n.getAllVariables();try{var s=e.Xml.domToBlockHeadless_(t,n),c=s.getDescendants(!1);if(n.rendered){s.setConnectionTracking(!1);for(var v=c.length-1;0<=v;v--)c[v].initSvg();for(v=c.length-1;0<=v;v--)c[v].render(!1);setTimeout(function(){s.disposed||s.setConnectionTracking(!0)},1),s.updateDisabled(),n.resizeContents()}else for(v=c.length-1;0<=v;v--)c[v].initModel()}finally{e.Events.enable()}if(e.Events.isEnabled()){for(t=e.Variables.getAddedVariables(n,o),v=0;v<t.length;v++)n=t[v],e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(n));e.Events.fire(new(e.Events.get(e.Events.CREATE))(s))}return s},e.Xml.domToVariables=function(t,n){for(var s,o=0;s=t.childNodes[o];o++)if(s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE){var c=s.getAttribute("type"),v=s.getAttribute("id");n.createVariable(s.textContent,c,v)}},e.Xml.mapSupportedXmlTags_=function(t){for(var s,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},o=0;s=t.childNodes[o];o++)if(s.nodeType!=e.utils.dom.NodeType.TEXT_NODE)switch(s.nodeName.toLowerCase()){case"mutation":n.mutation.push(s);break;case"comment":if(!e.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(s);break;case"data":n.data.push(s);break;case"title":case"field":n.field.push(s);break;case"value":case"statement":n.input.push(s);break;case"next":n.next.push(s);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}return n},e.Xml.applyMutationTagNodes_=function(t,n){for(var c,o=!1,s=0;c=t[s];s++)n.domToMutation&&(n.domToMutation(c),n.initSvg&&(o=!0));return o},e.Xml.applyCommentTagNodes_=function(t,n){for(var s,o=0;s=t[o];o++){var c=s.textContent,v="true"==s.getAttribute("pinned"),R=parseInt(s.getAttribute("w"),10);s=parseInt(s.getAttribute("h"),10),n.setCommentText(c),n.commentModel.pinned=v,isNaN(R)||isNaN(s)||(n.commentModel.size=new e.utils.Size(R,s)),v&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},e.Xml.applyDataTagNodes_=function(t,n){for(var s,o=0;s=t[o];o++)n.data=s.textContent},e.Xml.applyFieldTagNodes_=function(t,n){for(var s,o=0;s=t[o];o++){var c=s.getAttribute("name");e.Xml.domToField_(n,c,s)}},e.Xml.findChildBlocks_=function(t){for(var s,n={childBlockElement:null,childShadowElement:null},o=0;s=t.childNodes[o];o++)s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&("block"==s.nodeName.toLowerCase()?n.childBlockElement=s:"shadow"==s.nodeName.toLowerCase()&&(n.childShadowElement=s));return n},e.Xml.applyInputTagNodes_=function(t,n,o,s){for(var v,c=0;v=t[c];c++){var R=v.getAttribute("name"),O=o.getInput(R);if(!O){console.warn("Ignoring non-existent input "+R+" in block "+s);break}if((v=e.Xml.findChildBlocks_(v)).childBlockElement){if(!O.connection)throw TypeError("Input connection does not exist.");e.Xml.domToBlockHeadless_(v.childBlockElement,n,O.connection,!1)}v.childShadowElement&&O.connection.setShadowDom(v.childShadowElement)}},e.Xml.applyNextTagNodes_=function(t,n,o){for(var c,s=0;c=t[s];s++){if((c=e.Xml.findChildBlocks_(c)).childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");e.Xml.domToBlockHeadless_(c.childBlockElement,n,o.nextConnection,!0)}c.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(c.childShadowElement)}},e.Xml.domToBlockHeadless_=function(t,n,o,s){var c=t.getAttribute("type");if(!c)throw TypeError("Block type unspecified: "+t.outerHTML);var v=t.getAttribute("id");v=n.newBlock(c,v);var R=e.Xml.mapSupportedXmlTags_(t),O=e.Xml.applyMutationTagNodes_(R.mutation,v);if(e.Xml.applyCommentTagNodes_(R.comment,v),e.Xml.applyDataTagNodes_(R.data,v),o)if(s){if(!v.previousConnection)throw TypeError("Next block does not have previous statement.");o.connect(v.previousConnection)}else if(v.outputConnection)o.connect(v.outputConnection);else{if(!v.previousConnection)throw TypeError("Child block does not have output or previous statement.");o.connect(v.previousConnection)}if(e.Xml.applyFieldTagNodes_(R.field,v),e.Xml.applyInputTagNodes_(R.input,n,v,c),e.Xml.applyNextTagNodes_(R.next,n,v),O&&v.initSvg(),(n=t.getAttribute("inline"))&&v.setInputsInline("true"==n),(n=t.getAttribute("disabled"))&&v.setEnabled("true"!=n&&"disabled"!=n),(n=t.getAttribute("deletable"))&&v.setDeletable("true"==n),(n=t.getAttribute("movable"))&&v.setMovable("true"==n),(n=t.getAttribute("editable"))&&v.setEditable("true"==n),(n=t.getAttribute("collapsed"))&&v.setCollapsed("true"==n),"shadow"==t.nodeName.toLowerCase()){for(t=v.getChildren(!1),n=0;o=t[n];n++)if(!o.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(v.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");v.setShadow(!0)}return v},e.Xml.domToField_=function(t,n,o){var s=t.getField(n);s?s.fromXml(o):console.warn("Ignoring non-existent field "+n+" in block "+t.type)},e.Xml.deleteNext=function(t){for(var o,n=0;o=t.childNodes[n];n++)if("next"==o.nodeName.toLowerCase()){t.removeChild(o);break}},e.Events.BlockBase=function(t){e.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.BlockBase,e.Events.Abstract),e.Events.BlockBase.prototype.toJson=function(){var t=e.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},e.Events.BlockBase.prototype.fromJson=function(t){e.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},e.Events.BlockChange=function(t,n,o,s,c){e.Events.Change.superClass_.constructor.call(this,t),t&&(this.element=void 0===n?"":n,this.name=void 0===o?"":o,this.oldValue=void 0===s?"":s,this.newValue=void 0===c?"":c)},e.utils.object.inherits(e.Events.BlockChange,e.Events.BlockBase),e.Events.Change=e.Events.BlockChange,e.Events.BlockChange.prototype.type=e.Events.CHANGE,e.Events.BlockChange.prototype.toJson=function(){var t=e.Events.BlockChange.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},e.Events.BlockChange.prototype.fromJson=function(t){e.Events.BlockChange.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},e.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},e.Events.BlockChange.prototype.run=function(t){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(t||null);break;case"collapsed":n.setCollapsed(!!t);break;case"disabled":n.setEnabled(!t);break;case"inline":n.setInputsInline(!!t);break;case"mutation":var o="";if(n.mutationToDom&&(o=(o=n.mutationToDom())&&e.Xml.domToText(o)),n.domToMutation){var s=e.Xml.textToDom(t||"<mutation/>");n.domToMutation(s)}e.Events.fire(new e.Events.BlockChange(n,"mutation",null,o,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},e.Events.Create=function(t){e.Events.Create.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t))},e.utils.object.inherits(e.Events.Create,e.Events.BlockBase),e.Events.BlockCreate=e.Events.Create,e.Events.Create.prototype.type=e.Events.CREATE,e.Events.Create.prototype.toJson=function(){var t=e.Events.Create.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Create.prototype.fromJson=function(t){e.Events.Create.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Create.prototype.run=function(t){var n=this.getEventWorkspace_();if(t)(t=e.utils.xml.createElement("xml")).appendChild(this.xml),e.Xml.domToWorkspace(t,n);else{t=0;for(var o;o=this.ids[t];t++){var s=n.getBlockById(o);s?s.dispose(!1):o==this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}}},e.Events.Delete=function(t){if(e.Events.Delete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t)}},e.utils.object.inherits(e.Events.Delete,e.Events.BlockBase),e.Events.BlockDelete=e.Events.Delete,e.Events.Delete.prototype.type=e.Events.DELETE,e.Events.Delete.prototype.toJson=function(){var t=e.Events.Delete.superClass_.toJson.call(this);return t.oldXml=e.Xml.domToText(this.oldXml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Delete.prototype.fromJson=function(t){e.Events.Delete.superClass_.fromJson.call(this,t),this.oldXml=e.Xml.textToDom(t.oldXml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Delete.prototype.run=function(t){var n=this.getEventWorkspace_();if(t){t=0;for(var o;o=this.ids[t];t++){var s=n.getBlockById(o);s?s.dispose(!1):o==this.blockId&&console.warn("Can't delete non-existent block: "+o)}}else(t=e.utils.xml.createElement("xml")).appendChild(this.oldXml),e.Xml.domToWorkspace(t,n)},e.Events.Move=function(t){e.Events.Move.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},e.utils.object.inherits(e.Events.Move,e.Events.BlockBase),e.Events.BlockMove=e.Events.Move,e.Events.Move.prototype.type=e.Events.MOVE,e.Events.Move.prototype.toJson=function(){var t=e.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Move.prototype.fromJson=function(t){if(e.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var n=t.newCoordinate.split(",");this.newCoordinate=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},e.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),n={},o=t.getParent();return o?(n.parentId=o.id,(t=o.getInputWithBlock(t))&&(n.inputName=t.name)):n.coordinate=t.getRelativeToSurfaceXY(),n},e.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&e.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},e.Events.Move.prototype.run=function(t){var n=this.getEventWorkspace_(),o=n.getBlockById(this.blockId);if(o){var s=t?this.newParentId:this.oldParentId,c=t?this.newInputName:this.oldInputName,v=t?this.newCoordinate:this.oldCoordinate;if(t=null,s&&!(t=n.getBlockById(s)))return void console.warn("Can't connect to non-existent block: "+s);if(o.getParent()&&o.unplug(),v)c=o.getRelativeToSurfaceXY(),o.moveBy(v.x-c.x,v.y-c.y);else{if(n=(o=o.outputConnection||o.previousConnection).type,c){if(t=t.getInput(c))var R=t.connection}else n==e.connectionTypes.PREVIOUS_STATEMENT&&(R=t.nextConnection);R?o.connect(R):console.warn("Can't connect to non-existent input: "+c)}}else console.warn("Can't move non-existent block: "+this.blockId)},e.registry.register(e.registry.Type.EVENT,e.Events.CREATE,e.Events.Create),e.registry.register(e.registry.Type.EVENT,e.Events.DELETE,e.Events.Delete),e.registry.register(e.registry.Type.EVENT,e.Events.CHANGE,e.Events.BlockChange),e.registry.register(e.registry.Type.EVENT,e.Events.MOVE,e.Events.Move),e.Events.FinishedLoading=function(t){this.isBlank=void 0===t,this.workspaceId=t?t.id:"",this.group=e.Events.getGroup(),this.recordUndo=!1},e.utils.object.inherits(e.Events.FinishedLoading,e.Events.Abstract),e.Events.FinishedLoading.prototype.type=e.Events.FINISHED_LOADING,e.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},e.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},e.registry.register(e.registry.Type.EVENT,e.Events.FINISHED_LOADING,e.Events.FinishedLoading),e.Events.UiBase=function(t){e.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===t,this.workspaceId=t||"",this.recordUndo=!1},e.utils.object.inherits(e.Events.UiBase,e.Events.Abstract),e.Events.UiBase.prototype.isUiEvent=!0,e.Events.Ui=function(t,n,o,s){e.Events.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===o?"":o,this.newValue=void 0===s?"":s},e.utils.object.inherits(e.Events.Ui,e.Events.UiBase),e.Events.Ui.prototype.type=e.Events.UI,e.Events.Ui.prototype.toJson=function(){var t=e.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},e.Events.Ui.prototype.fromJson=function(t){e.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.UI,e.Events.Ui),e.Events.VarBase=function(t){e.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===t)?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.VarBase,e.Events.Abstract),e.Events.VarBase.prototype.toJson=function(){var t=e.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},e.Events.VarBase.prototype.fromJson=function(t){e.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},e.Events.VarCreate=function(t){e.Events.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarCreate,e.Events.VarBase),e.Events.VarCreate.prototype.type=e.Events.VAR_CREATE,e.Events.VarCreate.prototype.toJson=function(){var t=e.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarCreate.prototype.fromJson=function(t){e.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarCreate.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},e.Events.VarDelete=function(t){e.Events.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarDelete,e.Events.VarBase),e.Events.VarDelete.prototype.type=e.Events.VAR_DELETE,e.Events.VarDelete.prototype.toJson=function(){var t=e.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarDelete.prototype.fromJson=function(t){e.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarDelete.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},e.Events.VarRename=function(t,n){e.Events.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=void 0===n?"":n)},e.utils.object.inherits(e.Events.VarRename,e.Events.VarBase),e.Events.VarRename.prototype.type=e.Events.VAR_RENAME,e.Events.VarRename.prototype.toJson=function(){var t=e.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},e.Events.VarRename.prototype.fromJson=function(t){e.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},e.Events.VarRename.prototype.run=function(t){this.getEventWorkspace_().renameVariableById(this.varId,t?this.newName:this.oldName)},e.registry.register(e.registry.Type.EVENT,e.Events.VAR_CREATE,e.Events.VarCreate),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_DELETE,e.Events.VarDelete),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_RENAME,e.Events.VarRename),e.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.BlockDragSurfaceSvg.prototype.SVG_=null,e.BlockDragSurfaceSvg.prototype.dragGroup_=null,e.BlockDragSurfaceSvg.prototype.container_=null,e.BlockDragSurfaceSvg.prototype.scale_=1,e.BlockDragSurfaceSvg.prototype.surfaceXY_=null,e.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new e.utils.Coordinate(0,0),e.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.SVG_))},e.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new e.utils.Coordinate(0,0)},e.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,n,o){this.scale_=o,t=t.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+t+","+n+") scale("+o+")")},e.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,n=this.surfaceXY_.y;t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.BlockDragSurfaceSvg.prototype.translateBy=function(t,n){this.surfaceXY_=new e.utils.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.translateSurface=function(t,n){this.surfaceXY_=new e.utils.Coordinate(t*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=e.utils.getRelativeXY(this.SVG_);return new e.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},e.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},e.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},e.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},e.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},e.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},e.Css={},e.Css.injected_=!1,e.Css.register=function(t){if(e.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(e.Css.CONTENT,t),t.length=0},e.Css.inject=function(t,n){if(!e.Css.injected_){e.Css.injected_=!0;var o=e.Css.CONTENT.join("\n");e.Css.CONTENT.length=0,t&&(t=n.replace(/[\\/]$/,""),o=o.replace(/<<<PATH>>>/g,t),(t=document.createElement("style")).id="blockly-common-style",o=document.createTextNode(o),t.appendChild(o),document.head.insertBefore(t,document.head.firstChild))}},e.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],e.Grid=function(t,n){this.gridPattern_=t,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},e.Grid.prototype.scale_=1,e.Grid.prototype.dispose=function(){this.gridPattern_=null},e.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},e.Grid.prototype.getSpacing=function(){return this.spacing_},e.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},e.Grid.prototype.update=function(t){this.scale_=t;var n=this.spacing_*t||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var o=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,s=n+this.length_/2;this.setLineAttributes_(this.line1_,t,o*=t,s*=t,n*=t,n),this.setLineAttributes_(this.line2_,t,n,n,o,s)},e.Grid.prototype.setLineAttributes_=function(t,n,o,s,c,v){t&&(t.setAttribute("stroke-width",n),t.setAttribute("x1",o),t.setAttribute("y1",c),t.setAttribute("x2",s),t.setAttribute("y2",v))},e.Grid.prototype.moveTo=function(t,n){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",n),(e.utils.userAgent.IE||e.utils.userAgent.EDGE)&&this.update(this.scale_)},e.Grid.createDom=function(t,n,o){return t=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},o),0<n.length&&0<n.spacing?(e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t),1<n.length&&e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t)):e.utils.dom.createSvgElement(e.utils.Svg.LINE,{},t),t},e.Theme=function(t,n,o,s){this.name=t,this.blockStyles=n||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=s||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,e.registry.register(e.registry.Type.THEME,t,this)},e.Theme.prototype.getClassName=function(){return this.name+"-theme"},e.Theme.prototype.setBlockStyle=function(t,n){this.blockStyles[t]=n},e.Theme.prototype.setCategoryStyle=function(t,n){this.categoryStyles[t]=n},e.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},e.Theme.prototype.setComponentStyle=function(t,n){this.componentStyles[t]=n},e.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},e.Theme.prototype.setStartHats=function(t){this.startHats=t},e.Theme.defineTheme=function(t,n){var o=new e.Theme(t),s=n.base;return s&&("string"==typeof s&&(s=e.registry.getObject(e.registry.Type.THEME,s)),s instanceof e.Theme&&(e.utils.object.deepMerge(o,s),o.name=t)),e.utils.object.deepMerge(o.blockStyles,n.blockStyles),e.utils.object.deepMerge(o.categoryStyles,n.categoryStyles),e.utils.object.deepMerge(o.componentStyles,n.componentStyles),e.utils.object.deepMerge(o.fontStyle,n.fontStyle),null!=n.startHats&&(o.startHats=n.startHats),o},e.Themes={},e.Themes.Classic={},e.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},e.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},e.Themes.Classic=new e.Theme("classic",e.Themes.Classic.defaultBlockStyles,e.Themes.Classic.categoryStyles),e.utils.IdGenerator={},e.utils.IdGenerator.nextId_=0,e.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(e.utils.IdGenerator.nextId_++).toString(36)},e.utils.Metrics=function(){},e.utils.toolbox={},e.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",e.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",e.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},e.utils.toolbox.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=e.utils.toolbox.parseToolboxTree(t),t=e.utils.toolbox.convertToToolboxJson_(t)),e.utils.toolbox.validateToolbox_(t),t):null},e.utils.toolbox.validateToolbox_=function(t){var n=t.kind;if(t=t.contents,n&&n!=e.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=e.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+e.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+e.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!t)throw Error("Toolbox must have a contents attribute.")},e.utils.toolbox.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:e.utils.toolbox.xmlToJsonArray_(t):[]},e.utils.toolbox.hasCategories=function(t){if(!t)return!1;var n=t.kind;return n?n==e.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!t.contents.filter(function(o){return"CATEGORY"==o.kind.toUpperCase()}).length},e.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},e.utils.toolbox.convertToToolboxJson_=function(t){var n={contents:e.utils.toolbox.xmlToJsonArray_(t)};return t instanceof Node&&e.utils.toolbox.addAttributes_(t,n),n},e.utils.toolbox.xmlToJsonArray_=function(t){var s,n=[],o=t.childNodes;for(o||(o=t),t=0;s=o[t];t++)if(s.tagName){var c={},v=s.tagName.toUpperCase();c.kind=v,"BLOCK"==v?c.blockxml=s:s.childNodes&&0<s.childNodes.length&&(c.contents=e.utils.toolbox.xmlToJsonArray_(s)),e.utils.toolbox.addAttributes_(s,c),n.push(c)}return n},e.utils.toolbox.addAttributes_=function(t,n){for(var o=0;o<t.attributes.length;o++){var s=t.attributes[o];-1<s.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[s.nodeName.replace("css-","")]=s.value):n[s.nodeName]=s.value}},e.utils.toolbox.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(e.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=e.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},e.Options=function(t){var n=!!t.readOnly;if(n)var o=null,s=!1,c=!1,v=!1,R=!1,O=!1,H=!1;else{o=e.utils.toolbox.convertToolboxDefToJson(t.toolbox),s=e.utils.toolbox.hasCategories(o),void 0===(c=t.trashcan)&&(c=s);var V=t.maxTrashcanContents;c?void 0===V&&(V=32):V=0,void 0===(v=t.collapse)&&(v=s),void 0===(R=t.comments)&&(R=s),void 0===(O=t.disable)&&(O=s),void 0===(H=t.sounds)&&(H=!0)}var G=!!t.rtl,Z=t.horizontalLayout;void 0===Z&&(Z=!1);var vt=t.toolboxPosition;vt="end"!==vt,vt=Z?vt?e.utils.toolbox.Position.TOP:e.utils.toolbox.Position.BOTTOM:vt==G?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT;var it=t.css;void 0===it&&(it=!0);var ot="https://blockly-demo.appspot.com/static/media/";t.media?ot=t.media:t.path&&(ot=t.path+"media/");var wt=void 0===t.oneBasedIndex||!!t.oneBasedIndex,ct=t.renderer||"geras",yt=t.plugins||{};this.RTL=G,this.oneBasedIndex=wt,this.collapse=v,this.comments=R,this.disable=O,this.readOnly=n,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=ot,this.hasCategories=s,this.moveOptions=e.Options.parseMoveOptions_(t,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=c,this.maxTrashcanContents=V,this.hasSounds=H,this.hasCss=it,this.horizontalLayout=Z,this.languageTree=o,this.gridOptions=e.Options.parseGridOptions_(t),this.zoomOptions=e.Options.parseZoomOptions_(t),this.toolboxPosition=vt,this.theme=e.Options.parseThemeOptions_(t),this.renderer=ct,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=yt},e.BlocklyOptions=function(){},e.Options.parseMoveOptions_=function(t,n){var o=t.move||{},s={};return void 0===o.scrollbars&&void 0===t.scrollbars?s.scrollbars=n:"object"==typeof o.scrollbars?(s.scrollbars={},s.scrollbars.horizontal=!!o.scrollbars.horizontal,s.scrollbars.vertical=!!o.scrollbars.vertical,s.scrollbars.horizontal&&s.scrollbars.vertical?s.scrollbars=!0:s.scrollbars.horizontal||s.scrollbars.vertical||(s.scrollbars=!1)):s.scrollbars=!!o.scrollbars||!!t.scrollbars,s.wheel=s.scrollbars&&void 0!==o.wheel?!!o.wheel:"object"==typeof s.scrollbars,s.drag=!(!s.scrollbars||void 0!==o.drag&&!o.drag),s},e.Options.parseZoomOptions_=function(t){var n={};return n.controls=void 0!==(t=t.zoom||{}).controls&&!!t.controls,n.wheel=void 0!==t.wheel&&!!t.wheel,n.startScale=void 0===t.startScale?1:Number(t.startScale),n.maxScale=void 0===t.maxScale?3:Number(t.maxScale),n.minScale=void 0===t.minScale?.3:Number(t.minScale),n.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),n.pinch=void 0===t.pinch?n.wheel||n.controls:!!t.pinch,n},e.Options.parseGridOptions_=function(t){t=t.grid||{};var n={};return n.spacing=Number(t.spacing)||0,n.colour=t.colour||"#888",n.length=void 0===t.length?1:Number(t.length),n.snap=0<n.spacing&&!!t.snap,n},e.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||e.Themes.Classic)?e.registry.getObject(e.registry.Type.THEME,t):t instanceof e.Theme?t:e.Theme.defineTheme(t.name||"builtin"+e.utils.IdGenerator.getNextUniqueId(),t)},e.Options.parseToolboxTree=function(t){return e.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),e.utils.toolbox.parseToolboxTree(t)},e.ScrollbarPair=function(t,n,o,s,c){this.workspace_=t,o=void 0===o||o;var v=(n=void 0===n||n)&&o;n&&(this.hScroll=new e.Scrollbar(t,!0,v,s,c)),o&&(this.vScroll=new e.Scrollbar(t,!1,v,s,c)),v&&(this.corner_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:e.Scrollbar.scrollbarThickness,width:e.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),e.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null},e.ScrollbarPair.prototype.dispose=function(){e.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},e.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var n=!1,o=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==t.scrollWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.scrollLeft==t.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==t.scrollHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.scrollTop==t.scrollTop||(o=!0)):o=n=!0,n||o){try{e.Events.disable(),this.hScroll&&n&&this.hScroll.resize(t),this.vScroll&&o&&this.vScroll.resize(t)}finally{e.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},e.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},e.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},e.ScrollbarPair.prototype.setOrigin=function(t,n){this.hScroll&&this.hScroll.setOrigin(t,n),this.vScroll&&this.vScroll.setOrigin(t,n)},e.ScrollbarPair.prototype.set=function(t,n,o){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(n,!1),(o||void 0===o)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},e.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},e.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},e.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},e.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},e.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},e.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},e.Scrollbar=function(t,n,o,s,c){this.workspace_=t,this.pair_=o||!1,this.horizontal_=n,this.margin_=void 0!==c?c:e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(s),this.position=new e.utils.Coordinate(0,0),t=e.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=e.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},e.Scrollbar.prototype.origin_=new e.utils.Coordinate(0,0),e.Scrollbar.prototype.startDragMouse_=0,e.Scrollbar.prototype.scrollbarLength_=0,e.Scrollbar.prototype.handleLength_=0,e.Scrollbar.prototype.handlePosition_=0,e.Scrollbar.prototype.isVisible_=!0,e.Scrollbar.prototype.containerVisible_=!0,e.Scrollbar.scrollbarThickness=15,e.Touch.TOUCH_ENABLED&&(e.Scrollbar.scrollbarThickness=25),e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,e.Scrollbar.metricsAreEquivalent_=function(t,n){return t.viewWidth==n.viewWidth&&t.viewHeight==n.viewHeight&&t.viewLeft==n.viewLeft&&t.viewTop==n.viewTop&&t.absoluteTop==n.absoluteTop&&t.absoluteLeft==n.absoluteLeft&&t.scrollWidth==n.scrollWidth&&t.scrollHeight==n.scrollHeight&&t.scrollLeft==n.scrollLeft&&t.scrollTop==n.scrollTop},e.Scrollbar.prototype.dispose=function(){this.cleanUp_(),e.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,e.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,e.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},e.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},e.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},e.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},e.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},e.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},e.Scrollbar.prototype.setPosition=function(t,n){this.position.x=t,this.position.y=n,e.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},e.Scrollbar.prototype.resize=function(t){!t&&!(t=this.workspace_.getMetrics())||this.oldHostMetrics_&&e.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},e.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},e.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeViewHorizontal=function(t){var n=t.viewWidth-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=e.Scrollbar.scrollbarThickness),this.setPosition(n,t.absoluteTop+t.viewHeight-e.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewWidth/t.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewLeft-t.scrollLeft)/(n=t.scrollWidth-t.viewWidth)*o),this.setHandlePosition(t),this.ratio=o/n}},e.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeViewVertical=function(t){var n=t.viewHeight-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-e.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewHeight/t.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewTop-t.scrollTop)/(n=t.scrollHeight-t.viewHeight)*o),this.setHandlePosition(t),this.ratio=o/n}},e.Scrollbar.prototype.createDom_=function(t){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(n+=" "+t),this.outerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{class:n},null),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((e.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),e.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},e.Scrollbar.prototype.isVisible=function(){return this.isVisible_},e.Scrollbar.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.setVisible=function(t){var n=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},e.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),e.Touch.clearTouchIdentifier(),this.cleanUp_(),e.utils.isRightButton(t))t.stopPropagation();else{var n=e.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var o=e.utils.getInjectionDivXY_(this.svgHandle_),s=this.handlePosition_,c=.95*this.handleLength_;n<=(o=this.horizontal_?o.x:o.y)?s-=c:n>=o+this.handleLength_&&(s+=c),this.setHandlePosition(this.constrainHandlePosition_(s)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},e.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),e.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,e.Scrollbar.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),e.Scrollbar.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},e.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},e.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),e.Touch.clearTouchIdentifier(),this.cleanUp_()},e.Scrollbar.prototype.cleanUp_=function(){e.hideChaff(!0),e.Scrollbar.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseUpWrapper_),e.Scrollbar.onMouseUpWrapper_=null),e.Scrollbar.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseMoveWrapper_),e.Scrollbar.onMouseMoveWrapper_=null)},e.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},e.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),n={};this.horizontal_?n.x=t:n.y=t,this.workspace_.setMetrics(n)},e.Scrollbar.prototype.set=function(t,n){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},e.Scrollbar.prototype.setOrigin=function(t,n){this.origin_=new e.utils.Coordinate(t,n)},e.Tooltip={},e.Tooltip.visible=!1,e.Tooltip.blocked_=!1,e.Tooltip.LIMIT=50,e.Tooltip.mouseOutPid_=0,e.Tooltip.showPid_=0,e.Tooltip.lastX_=0,e.Tooltip.lastY_=0,e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.OFFSET_X=0,e.Tooltip.OFFSET_Y=10,e.Tooltip.RADIUS_OK=10,e.Tooltip.HOVER_MS=750,e.Tooltip.MARGINS=5,e.Tooltip.DIV=null,e.Tooltip.getTooltipOfObject=function(t){if(t=e.Tooltip.getTargetObject_(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},e.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},e.Tooltip.createDom=function(){e.Tooltip.DIV||(e.Tooltip.DIV=document.createElement("div"),e.Tooltip.DIV.className="blocklyTooltipDiv",(e.parentContainer||document.body).appendChild(e.Tooltip.DIV))},e.Tooltip.bindMouseEvents=function(t){t.mouseOverWrapper_=e.browserEvents.bind(t,"mouseover",null,e.Tooltip.onMouseOver_),t.mouseOutWrapper_=e.browserEvents.bind(t,"mouseout",null,e.Tooltip.onMouseOut_),t.addEventListener("mousemove",e.Tooltip.onMouseMove_,!1)},e.Tooltip.unbindMouseEvents=function(t){t&&(e.browserEvents.unbind(t.mouseOverWrapper_),e.browserEvents.unbind(t.mouseOutWrapper_),t.removeEventListener("mousemove",e.Tooltip.onMouseMove_))},e.Tooltip.onMouseOver_=function(t){e.Tooltip.blocked_||(t=e.Tooltip.getTargetObject_(t.currentTarget),e.Tooltip.element_!=t&&(e.Tooltip.hide(),e.Tooltip.poisonedElement_=null,e.Tooltip.element_=t),clearTimeout(e.Tooltip.mouseOutPid_))},e.Tooltip.onMouseOut_=function(t){e.Tooltip.blocked_||(e.Tooltip.mouseOutPid_=setTimeout(function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},1),clearTimeout(e.Tooltip.showPid_))},e.Tooltip.onMouseMove_=function(t){if(e.Tooltip.element_&&e.Tooltip.element_.tooltip&&!e.Tooltip.blocked_)if(e.Tooltip.visible){var n=e.Tooltip.lastX_-t.pageX;t=e.Tooltip.lastY_-t.pageY,Math.sqrt(n*n+t*t)>e.Tooltip.RADIUS_OK&&e.Tooltip.hide()}else e.Tooltip.poisonedElement_!=e.Tooltip.element_&&(clearTimeout(e.Tooltip.showPid_),e.Tooltip.lastX_=t.pageX,e.Tooltip.lastY_=t.pageY,e.Tooltip.showPid_=setTimeout(e.Tooltip.show_,e.Tooltip.HOVER_MS))},e.Tooltip.dispose=function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},e.Tooltip.hide=function(){e.Tooltip.visible&&(e.Tooltip.visible=!1,e.Tooltip.DIV&&(e.Tooltip.DIV.style.display="none")),e.Tooltip.showPid_&&clearTimeout(e.Tooltip.showPid_)},e.Tooltip.block=function(){e.Tooltip.hide(),e.Tooltip.blocked_=!0},e.Tooltip.unblock=function(){e.Tooltip.blocked_=!1},e.Tooltip.show_=function(){if(!e.Tooltip.blocked_&&(e.Tooltip.poisonedElement_=e.Tooltip.element_,e.Tooltip.DIV)){e.Tooltip.DIV.textContent="";var t=e.Tooltip.getTooltipOfObject(e.Tooltip.element_);t=(t=e.utils.string.wrap(t,e.Tooltip.LIMIT)).split("\n");for(var n=0;n<t.length;n++){var o=document.createElement("div");o.appendChild(document.createTextNode(t[n])),e.Tooltip.DIV.appendChild(o)}t=e.Tooltip.element_.RTL,n=document.documentElement.clientWidth,o=document.documentElement.clientHeight,e.Tooltip.DIV.style.direction=t?"rtl":"ltr",e.Tooltip.DIV.style.display="block",e.Tooltip.visible=!0;var s=e.Tooltip.lastX_;s=t?s-(e.Tooltip.OFFSET_X+e.Tooltip.DIV.offsetWidth):s+e.Tooltip.OFFSET_X;var c=e.Tooltip.lastY_+e.Tooltip.OFFSET_Y;c+e.Tooltip.DIV.offsetHeight>o+window.scrollY&&(c-=e.Tooltip.DIV.offsetHeight+2*e.Tooltip.OFFSET_Y),t?s=Math.max(e.Tooltip.MARGINS-window.scrollX,s):s+e.Tooltip.DIV.offsetWidth>n+window.scrollX-2*e.Tooltip.MARGINS&&(s=n-e.Tooltip.DIV.offsetWidth-2*e.Tooltip.MARGINS),e.Tooltip.DIV.style.top=c+"px",e.Tooltip.DIV.style.left=s+"px"}},e.utils.aria={},e.utils.aria.ARIA_PREFIX_="aria-",e.utils.aria.ROLE_ATTRIBUTE_="role",e.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},e.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},e.utils.aria.setRole=function(t,n){t.setAttribute(e.utils.aria.ROLE_ATTRIBUTE_,n)},e.utils.aria.setState=function(t,n,o){Array.isArray(o)&&(o=o.join(" ")),t.setAttribute(e.utils.aria.ARIA_PREFIX_+n,o)},e.IASTNodeLocation=function(){},e.IASTNodeLocationSvg=function(){},e.IASTNodeLocationWithBlock=function(){},e.IKeyboardAccessible=function(){},e.utils.deprecation={},e.utils.deprecation.warn=function(t,n,o,s){t=t+" was deprecated on "+n+" and will be deleted on "+o+".",s&&(t+="\nUse "+s+" instead."),console.warn(t)},e.Connection=function(t,n){this.sourceBlock_=t,this.type=n},e.Connection.CAN_CONNECT=0,e.Connection.REASON_SELF_CONNECTION=1,e.Connection.REASON_WRONG_TYPE=2,e.Connection.REASON_TARGET_NULL=3,e.Connection.REASON_CHECKS_FAILED=4,e.Connection.REASON_DIFFERENT_WORKSPACES=5,e.Connection.REASON_SHADOW_PARENT=6,e.Connection.REASON_DRAG_CHECKS_FAILED=7,e.Connection.prototype.targetConnection=null,e.Connection.prototype.disposed=!1,e.Connection.prototype.check_=null,e.Connection.prototype.shadowDom_=null,e.Connection.prototype.x=0,e.Connection.prototype.y=0,e.Connection.prototype.connect_=function(t){var O,n=e.connectionTypes.INPUT_VALUE,o=this.getSourceBlock(),s=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var c=this.getShadowDom(!0);this.shadowDom_=null;var v=this.targetBlock();if(v.isShadow())v.dispose(!1);else{this.disconnect();var R=v}this.shadowDom_=c}e.Events.isEnabled()&&(O=new(e.Events.get(e.Events.BLOCK_MOVE))(s)),e.Connection.connectReciprocally_(this,t),s.setParent(o),O&&(O.recordNew(),e.Events.fire(O)),R&&((s=e.Connection.getConnectionForOrphanedConnection(s,t=this.type===n?R.outputConnection:R.previousConnection))?t.connect(s):t.onFailedConnect(this))},e.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},e.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Connection.prototype.isSuperior=function(){return this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.NEXT_STATEMENT},e.Connection.prototype.isConnected=function(){return!!this.targetConnection},e.Connection.prototype.canConnectWithReason=function(t){return e.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,t,!1)},e.Connection.prototype.checkConnection=function(t){e.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),o=n.canConnectWithReason(this,t,!1);if(o!=e.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(o,this,t))},e.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},e.Connection.prototype.isConnectionAllowed=function(t){return e.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!0)},e.Connection.prototype.onFailedConnect=function(t){},e.Connection.prototype.connect=function(t){if(this.targetConnection!=t&&this.getConnectionChecker().canConnect(this,t,!1)){var n=e.Events.getGroup();n||e.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n||e.Events.setGroup(!1)}},e.Connection.connectReciprocally_=function(t,n){if(!t||!n)throw Error("Cannot connect null connections.");t.targetConnection=n,n.targetConnection=t},e.Connection.getSingleConnection_=function(t,n){for(var v,o=null,s=(n=n.outputConnection).getConnectionChecker(),c=0;v=t.inputList[c];c++)if((v=v.connection)&&s.canConnect(n,v,!1)){if(o)return null;o=v}return o},e.Connection.getConnectionForOrphanedOutput_=function(t,n){for(var o;o=e.Connection.getSingleConnection_(t,n);)if(!(t=o.targetBlock())||t.isShadow())return o;return null},e.Connection.getConnectionForOrphanedConnection=function(t,n){if(n.type===e.connectionTypes.OUTPUT_VALUE)return e.Connection.getConnectionForOrphanedOutput_(t,n.getSourceBlock());t=t.lastConnectionInStack(!0);var o=n.getConnectionChecker();return t&&o.canConnect(n,t,!1)?t:null},e.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,o=t.getSourceBlock();t=this}else n=t.getSourceBlock(),o=this.sourceBlock_;var s=e.Events.getGroup();s||e.Events.setGroup(!0),this.disconnectInternal_(n,o),o.isShadow()||t.respawnShadow_(),s||e.Events.setGroup(!1)},e.Connection.prototype.disconnectInternal_=function(t,n){var o;e.Events.isEnabled()&&(o=new(e.Events.get(e.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),o&&(o.recordNew(),e.Events.fire(o))},e.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n)if((t=e.Xml.domToBlock(n,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},e.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},e.Connection.prototype.checkType=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!1)},e.Connection.prototype.checkType_=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(t)},e.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},e.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},e.Connection.prototype.getCheck=function(){return this.check_},e.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},e.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?e.Xml.blockToDom(this.targetBlock()):this.shadowDom_},e.Connection.prototype.neighbours=function(t){return[]},e.Connection.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_.inputList,o=0;o<n.length;o++)if(n[o].connection===this){t=n[o];break}return t},e.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var n="Output Connection of ";else if(t.previousConnection==this)n="Previous Connection of ";else if(t.nextConnection==this)n="Next Connection of ";else{n=null;for(var s,o=0;s=t.inputList[o];o++)if(s.connection==this){n=s;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+t.toDevString()},e.IConnectionChecker=function(){},e.ConnectionChecker=function(){},e.ConnectionChecker.prototype.canConnect=function(t,n,o,s){return this.canConnectWithReason(t,n,o,s)==e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.canConnectWithReason=function(t,n,o,s){var c=this.doSafetyChecks(t,n);return c!=e.Connection.CAN_CONNECT?c:this.doTypeChecks(t,n)?o&&!this.doDragChecks(t,n,s||0)?e.Connection.REASON_DRAG_CHECKS_FAILED:e.Connection.CAN_CONNECT:e.Connection.REASON_CHECKS_FAILED},e.ConnectionChecker.prototype.getErrorMessage=function(t,n,o){switch(t){case e.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case e.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case e.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case e.Connection.REASON_TARGET_NULL:return"Target connection is null.";case e.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+o.getCheck();case e.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case e.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},e.ConnectionChecker.prototype.doSafetyChecks=function(t,n){if(!t||!n)return e.Connection.REASON_TARGET_NULL;if(t.isSuperior())var o=t.getSourceBlock(),s=n.getSourceBlock();else s=t.getSourceBlock(),o=n.getSourceBlock();return o==s?e.Connection.REASON_SELF_CONNECTION:n.type!=e.OPPOSITE_TYPE[t.type]?e.Connection.REASON_WRONG_TYPE:o.workspace!==s.workspace?e.Connection.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!s.isShadow()?e.Connection.REASON_SHADOW_PARENT:e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.doTypeChecks=function(t,n){if(t=t.getCheck(),n=n.getCheck(),!t||!n)return!0;for(var o=0;o<t.length;o++)if(-1!=n.indexOf(t[o]))return!0;return!1},e.ConnectionChecker.prototype.doDragChecks=function(t,n,o){if(t.distanceFrom(n)>o||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case e.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,n);case e.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case e.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case e.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!t.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==e.draggingConnections.indexOf(n)},e.ConnectionChecker.prototype.canConnectToPrevious_=function(t,n){return!(t.targetConnection||-1!=e.draggingConnections.indexOf(n)||n.targetConnection&&(!(t=n.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},e.registry.register(e.registry.Type.CONNECTION_CHECKER,e.registry.DEFAULT,e.ConnectionChecker),e.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},e.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},e.VariableMap.prototype.renameVariable=function(t,n){var o=this.getVariable(n,t.type),s=this.workspace.getAllBlocks(!1);e.Events.setGroup(!0);try{o&&o.getId()!=t.getId()?this.renameVariableWithConflict_(t,n,o,s):this.renameVariableAndUses_(t,n,s)}finally{e.Events.setGroup(!1)}},e.VariableMap.prototype.renameVariableById=function(t,n){var o=this.getVariableById(t);if(!o)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(o,n)},e.VariableMap.prototype.renameVariableAndUses_=function(t,n,o){for(e.Events.fire(new(e.Events.get(e.Events.VAR_RENAME))(t,n)),t.name=n,n=0;n<o.length;n++)o[n].updateVarName(t)},e.VariableMap.prototype.renameVariableWithConflict_=function(t,n,o,s){var c=t.type;for(n!=o.name&&this.renameVariableAndUses_(o,n,s),n=0;n<s.length;n++)s[n].renameVarById(t.getId(),o.getId());e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t)),t=this.getVariablesOfType(c).indexOf(t),this.variableMap_[c].splice(t,1)},e.VariableMap.prototype.createVariable=function(t,n,o){var s=this.getVariable(t,n);if(s){if(o&&s.getId()!=o)throw Error('Variable "'+t+'" is already in use and its id is "'+s.getId()+'" which conflicts with the passed in id, "'+o+'".');return s}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return s=o||e.utils.genUid(),s=new e.VariableModel(this.workspace,t,n=n||"",s),(t=this.variableMap_[n]||[]).push(s),delete this.variableMap_[n],this.variableMap_[n]=t,s},e.VariableMap.prototype.deleteVariable=function(t){for(var s,n=this.variableMap_[t.type],o=0;s=n[o];o++)if(s.getId()==t.getId()){n.splice(o,1),e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t));break}},e.VariableMap.prototype.deleteVariableById=function(t){var n=this.getVariableById(t);if(n){var c,o=n.name,s=this.getVariableUsesById(t);for(t=0;c=s[t];t++)if("procedures_defnoreturn"==c.type||"procedures_defreturn"==c.type)return t=c.getFieldValue("NAME"),o=e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",t),void e.alert(o);var v=this;1<s.length?(o=e.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(s.length)).replace("%2",o),e.confirm(o,function(R){R&&n&&v.deleteVariableInternal(n,s)})):v.deleteVariableInternal(n,s)}else console.warn("Can't delete non-existent variable: "+t)},e.VariableMap.prototype.deleteVariableInternal=function(t,n){var o=e.Events.getGroup();o||e.Events.setGroup(!0);try{for(var s=0;s<n.length;s++)n[s].dispose(!0);this.deleteVariable(t)}finally{o||e.Events.setGroup(!1)}},e.VariableMap.prototype.getVariable=function(t,n){if(n=this.variableMap_[n||""])for(var s,o=0;s=n[o];o++)if(e.Names.equals(s.name,t))return s;return null},e.VariableMap.prototype.getVariableById=function(t){for(var n=Object.keys(this.variableMap_),o=0;o<n.length;o++)for(var v,s=n[o],c=0;v=this.variableMap_[s][c];c++)if(v.getId()==t)return v;return null},e.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},e.VariableMap.prototype.getVariableTypes=function(t){var n={};e.utils.object.mixin(n,this.variableMap_),t&&t.getPotentialVariableMap()&&e.utils.object.mixin(n,t.getPotentialVariableMap().variableMap_),t=Object.keys(n),n=!1;for(var o=0;o<t.length;o++)""==t[o]&&(n=!0);return n||t.push(""),t},e.VariableMap.prototype.getAllVariables=function(){var n,t=[];for(n in this.variableMap_)t=t.concat(this.variableMap_[n]);return t},e.VariableMap.prototype.getAllVariableNames=function(){var n,t=[];for(n in this.variableMap_)for(var c,o=this.variableMap_[n],s=0;c=o[s];s++)t.push(c.name);return t},e.VariableMap.prototype.getVariableUsesById=function(t){for(var n=[],o=this.workspace.getAllBlocks(!1),s=0;s<o.length;s++){var c=o[s].getVarModels();if(c)for(var v=0;v<c.length;v++)c[v].getId()==t&&n.push(o[s])}return n},e.Workspace=function(t){this.id=e.utils.genUid(),e.Workspace.WorkspaceDB_[this.id]=this,this.options=t||new e.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(e.registry.getClassFromOptions(e.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new e.VariableMap(this),this.potentialVariableMap_=null},e.Workspace.prototype.rendered=!1,e.Workspace.prototype.isClearing=!1,e.Workspace.prototype.MAX_UNDO=1024,e.Workspace.prototype.connectionDBList=null,e.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete e.Workspace.WorkspaceDB_[this.id]},e.Workspace.SCAN_ANGLE=3,e.Workspace.prototype.sortObjects_=function(t,n){return t=t.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),t.y+e.Workspace.prototype.sortObjects_.offset*t.x-(n.y+e.Workspace.prototype.sortObjects_.offset*n.x)},e.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},e.Workspace.prototype.removeTopBlock=function(t){if(!e.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},e.Workspace.prototype.getTopBlocks=function(t){var n=[].concat(this.topBlocks_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},e.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},e.Workspace.prototype.getBlocksByType=function(t,n){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),n&&1<t.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t):[]},e.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},e.Workspace.prototype.removeTopComment=function(t){if(!e.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},e.Workspace.prototype.getTopComments=function(t){var n=[].concat(this.topComments_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var n=[],o=0;o<t.length;o++)n.push.apply(n,t[o].getDescendants(!0))}else for(n=this.getTopBlocks(!1),o=0;o<n.length;o++)n.push.apply(n,n[o].getChildren(!1));return n.filter(function(s){return!s.isInsertionMarker()})},e.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=e.Events.getGroup();for(t||e.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);t||e.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},e.Workspace.prototype.renameVariableById=function(t,n){this.variableMap_.renameVariableById(t,n)},e.Workspace.prototype.createVariable=function(t,n,o){return this.variableMap_.createVariable(t,n,o)},e.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},e.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},e.Workspace.prototype.getVariable=function(t,n){return this.variableMap_.getVariable(t,n)},e.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},e.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},e.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},e.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},e.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},e.Workspace.prototype.getWidth=function(){return 0},e.Workspace.prototype.newBlock=function(t,n){return new e.Block(this,t,n)},e.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},e.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},e.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var o,n=0;for(o in t){if(t[o]>this.remainingCapacityOfType(o))return!1;n+=t[o]}return!(n>this.remainingCapacity())},e.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},e.Workspace.prototype.getUndoStack=function(){return this.undoStack_},e.Workspace.prototype.getRedoStack=function(){return this.redoStack_},e.Workspace.prototype.undo=function(t){var n=t?this.redoStack_:this.undoStack_,o=t?this.undoStack_:this.redoStack_,s=n.pop();if(s){for(var c=[s];n.length&&s.group&&s.group==n[n.length-1].group;)c.push(n.pop());for(n=0;s=c[n];n++)o.push(s);c=e.Events.filter(c,t),e.Events.recordUndo=!1;try{for(n=0;s=c[n];n++)s.run(t)}finally{e.Events.recordUndo=!0}}},e.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,e.Events.clearPendingUndo()},e.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},e.Workspace.prototype.removeChangeListener=function(t){e.utils.arrayRemove(this.listeners_,t)},e.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var o,n=0;o=this.listeners_[n];n++)o(t)},e.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},e.Workspace.prototype.setBlockById=function(t,n){this.blockDB_[t]=n},e.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},e.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},e.Workspace.prototype.allInputsFilled=function(t){for(var s,n=this.getTopBlocks(!1),o=0;s=n[o];o++)if(!s.allInputsFilled(t))return!1;return!0},e.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},e.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new e.VariableMap(this)},e.Workspace.prototype.getVariableMap=function(){return this.variableMap_},e.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},e.Workspace.WorkspaceDB_=Object.create(null),e.Workspace.getById=function(t){return e.Workspace.WorkspaceDB_[t]||null},e.Workspace.getAll=function(){var n,t=[];for(n in e.Workspace.WorkspaceDB_)t.push(e.Workspace.WorkspaceDB_[n]);return t},e.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.WorkspaceDragSurfaceSvg.prototype.SVG_=null,e.WorkspaceDragSurfaceSvg.prototype.container_=null,e.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},e.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,n){t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return e.utils.getRelativeXY(this.SVG_)},e.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],o=this.SVG_.childNodes[1];if(!(n&&o&&e.utils.dom.hasClass(n,"blocklyBlockCanvas")&&e.utils.dom.hasClass(o,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?e.utils.dom.insertAfter(n,this.previousSibling_):t.insertBefore(n,t.firstChild),e.utils.dom.insertAfter(o,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");e.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},e.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,n,o,s,c,v){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=o,t.setAttribute("transform","translate(0, 0) scale("+v+")"),n.setAttribute("transform","translate(0, 0) scale("+v+")"),this.SVG_.setAttribute("width",s),this.SVG_.setAttribute("height",c),this.SVG_.appendChild(t),this.SVG_.appendChild(n),this.SVG_.style.display="block"},e.blockRendering={},e.blockRendering.useDebugger=!1,e.blockRendering.register=function(t,n){e.registry.register(e.registry.Type.RENDERER,t,n)},e.blockRendering.unregister=function(t){e.registry.unregister(e.registry.Type.RENDERER,t)},e.blockRendering.startDebugger=function(){e.blockRendering.useDebugger=!0},e.blockRendering.stopDebugger=function(){e.blockRendering.useDebugger=!1},e.blockRendering.init=function(t,n,o){return(t=new(e.registry.getClass(e.registry.Type.RENDERER,t))(t)).init(n,o),t},e.ASTNode=function(t,n,o){if(!n)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=e.ASTNode.isConnectionType_(t),this.location_=n,this.wsCoordinate_=null,this.processParams_(o||null)},e.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},e.ASTNode.NAVIGATE_ALL_FIELDS=!1,e.ASTNode.DEFAULT_OFFSET_Y=-20,e.ASTNode.isConnectionType_=function(t){switch(t){case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:case e.ASTNode.types.INPUT:case e.ASTNode.types.OUTPUT:return!0}return!1},e.ASTNode.createFieldNode=function(t){return t?new e.ASTNode(e.ASTNode.types.FIELD,t):null},e.ASTNode.createConnectionNode=function(t){if(!t)return null;var n=t.type;return n==e.connectionTypes.INPUT_VALUE||n==e.connectionTypes.NEXT_STATEMENT&&t.getParentInput()?e.ASTNode.createInputNode(t.getParentInput()):n==e.connectionTypes.NEXT_STATEMENT?new e.ASTNode(e.ASTNode.types.NEXT,t):n==e.connectionTypes.OUTPUT_VALUE?new e.ASTNode(e.ASTNode.types.OUTPUT,t):n==e.connectionTypes.PREVIOUS_STATEMENT?new e.ASTNode(e.ASTNode.types.PREVIOUS,t):null},e.ASTNode.createInputNode=function(t){return t&&t.connection?new e.ASTNode(e.ASTNode.types.INPUT,t.connection):null},e.ASTNode.createBlockNode=function(t){return t?new e.ASTNode(e.ASTNode.types.BLOCK,t):null},e.ASTNode.createStackNode=function(t){return t?new e.ASTNode(e.ASTNode.types.STACK,t):null},e.ASTNode.createWorkspaceNode=function(t,n){return n&&t?new e.ASTNode(e.ASTNode.types.WORKSPACE,t,{wsCoordinate:n}):null},e.ASTNode.createTopNode=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},e.ASTNode.prototype.getLocation=function(){return this.location_},e.ASTNode.prototype.getType=function(){return this.type_},e.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},e.ASTNode.prototype.isConnection=function(){return this.isConnection_},e.ASTNode.prototype.findNextForInput_=function(){var o,t=this.location_.getParentInput(),n=t.getSourceBlock();for(t=n.inputList.indexOf(t)+1;o=n.inputList[t];t++){for(var v,s=o.fieldRow,c=0;v=s[c];c++)if(v.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(v);if(o.connection)return e.ASTNode.createInputNode(o)}return null},e.ASTNode.prototype.findNextForField_=function(){var t=this.location_,n=t.getParentInput(),o=t.getSourceBlock(),s=o.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)+1;n=o.inputList[s];s++){for(var c=n.fieldRow;t<c.length;){if(c[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(c[t]);t++}if(t=0,n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.findPrevForInput_=function(){for(var s,t=this.location_.getParentInput(),n=t.getSourceBlock(),o=n.inputList.indexOf(t);s=n.inputList[o];o--){if(s.connection&&s!==t)return e.ASTNode.createInputNode(s);for(var v,c=(s=s.fieldRow).length-1;v=s[c];c--)if(v.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(v)}return null},e.ASTNode.prototype.findPrevForField_=function(){var c,t=this.location_,n=t.getParentInput(),o=t.getSourceBlock(),s=o.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)-1;c=o.inputList[s];s--){if(c.connection&&c!==n)return e.ASTNode.createInputNode(c);for(c=c.fieldRow;-1<t;){if(c[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(c[t]);t--}0<=s-1&&(t=o.inputList[s-1].fieldRow.length-1)}return null},e.ASTNode.prototype.navigateBetweenStacks_=function(t){var n=this.getLocation();if(n instanceof e.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var o=n.getRootBlock();n=o.workspace.getTopBlocks(!0);for(var c,s=0;c=n[s];s++)if(o.id==c.id)return-1==(t=s+(t?1:-1))||t==n.length?null:e.ASTNode.createStackNode(n[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},e.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var n=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?e.ASTNode.createInputNode(n.targetConnection.getParentInput()):e.ASTNode.createStackNode(t)},e.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var o,n=0;o=t[n];n++){for(var v,s=o.fieldRow,c=0;v=s[c];c++)if(v.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(v);if(o.connection)return e.ASTNode.createInputNode(o)}return null},e.ASTNode.prototype.getSourceBlock=function(){return this.getType()===e.ASTNode.types.BLOCK||this.getType()===e.ASTNode.types.STACK?this.getLocation():this.getType()===e.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},e.ASTNode.prototype.next=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case e.ASTNode.types.OUTPUT:var t=this.location_;return e.ASTNode.createBlockNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return this.findNextForField_();case e.ASTNode.types.INPUT:return this.findNextForInput_();case e.ASTNode.types.BLOCK:return e.ASTNode.createConnectionNode(this.location_.nextConnection);case e.ASTNode.types.PREVIOUS:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.NEXT:return e.ASTNode.createConnectionNode((t=this.location_).targetConnection)}return null},e.ASTNode.prototype.in=function(){switch(this.type_){case e.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return e.ASTNode.createStackNode(t[0]);break;case e.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(t=this.location_);case e.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(t=this.location_);case e.ASTNode.types.INPUT:return e.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},e.ASTNode.prototype.prev=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case e.ASTNode.types.FIELD:return this.findPrevForField_();case e.ASTNode.types.INPUT:return this.findPrevForInput_();case e.ASTNode.types.BLOCK:var t=this.location_;return e.ASTNode.createConnectionNode(t.previousConnection||t.outputConnection);case e.ASTNode.types.PREVIOUS:if((t=(t=this.location_).targetConnection)&&!t.getParentInput())return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.NEXT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock())}return null},e.ASTNode.prototype.out=function(){switch(this.type_){case e.ASTNode.types.STACK:var t=this.location_,n=t.getRelativeToSurfaceXY();return n=new e.utils.Coordinate(n.x,n.y+e.ASTNode.DEFAULT_OFFSET_Y),e.ASTNode.createWorkspaceNode(t.workspace,n);case e.ASTNode.types.OUTPUT:return(n=(t=this.location_).targetConnection)?e.ASTNode.createConnectionNode(n):e.ASTNode.createStackNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.INPUT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(t=this.location_);case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((t=this.location_).getSourceBlock())}return null},e.Blocks=Object.create(null),e.Extensions={},e.Extensions.ALL_=Object.create(null),e.Extensions.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(e.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+t+'" must be a function');e.Extensions.ALL_[t]=n},e.Extensions.registerMixin=function(t,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+t+'" must be a object');e.Extensions.register(t,function(){this.mixin(n)})},e.Extensions.registerMutator=function(t,n,o,s){var c='Error when registering mutator "'+t+'": ';e.Extensions.checkHasFunction_(c,n.domToMutation,"domToMutation"),e.Extensions.checkHasFunction_(c,n.mutationToDom,"mutationToDom");var v=e.Extensions.checkMutatorDialog_(n,c);if(o&&"function"!=typeof o)throw Error('Extension "'+t+'" is not a function');e.Extensions.register(t,function(){if(v){if(!e.Mutator)throw Error(c+"Missing require for Blockly.Mutator");this.setMutator(new e.Mutator(s||[]))}this.mixin(n),o&&o.apply(this)})},e.Extensions.unregister=function(t){e.Extensions.ALL_[t]?delete e.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},e.Extensions.apply=function(t,n,o){var s=e.Extensions.ALL_[t];if("function"!=typeof s)throw Error('Error: Extension "'+t+'" not found.');if(o)e.Extensions.checkNoMutatorProperties_(t,n);else var c=e.Extensions.getMutatorProperties_(n);if(s.apply(n),o)e.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',n);else if(!e.Extensions.mutatorPropertiesMatch_(c,n))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},e.Extensions.checkHasFunction_=function(t,n,o){if(!n)throw Error(t+'missing required property "'+o+'"');if("function"!=typeof n)throw Error(t+'" required property "'+o+'" must be a function')},e.Extensions.checkNoMutatorProperties_=function(t,n){if(e.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+n.id)},e.Extensions.checkMutatorDialog_=function(t,n){var o=void 0!==t.compose,s=void 0!==t.decompose;if(o&&s){if("function"!=typeof t.compose)throw Error(n+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(n+"decompose must be a function.");return!0}if(!o&&!s)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},e.Extensions.checkBlockHasMutatorProperties_=function(t,n){if("function"!=typeof n.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');e.Extensions.checkMutatorDialog_(n,t)},e.Extensions.getMutatorProperties_=function(t){var n=[];return void 0!==t.domToMutation&&n.push(t.domToMutation),void 0!==t.mutationToDom&&n.push(t.mutationToDom),void 0!==t.compose&&n.push(t.compose),void 0!==t.decompose&&n.push(t.decompose),n},e.Extensions.mutatorPropertiesMatch_=function(t,n){if((n=e.Extensions.getMutatorProperties_(n)).length!=t.length)return!1;for(var o=0;o<n.length;o++)if(t[o]!=n[o])return!1;return!0},e.Extensions.buildTooltipForDropdown=function(t,n){var o=[];return"object"==typeof document&&e.utils.runAfterPageLoad(function(){for(var s in n)e.utils.checkMessageReferences(n[s])}),function(){this.type&&-1==o.indexOf(this.type)&&(e.Extensions.checkDropdownOptionsInTable_(this,t,n),o.push(this.type)),this.setTooltip(function(){var s=String(this.getFieldValue(t)),c=n[s];return null==c?-1==o.indexOf(this.type)&&(s="No tooltip mapping for value "+s+" of field "+t,null!=this.type&&(s+=" of block type "+this.type),console.warn(s+".")):c=e.utils.replaceMessageReferences(c),c}.bind(this))}},e.Extensions.checkDropdownOptionsInTable_=function(t,n,o){var s=t.getField(n);if(!s.isOptionListDynamic()){s=s.getOptions();for(var c=0;c<s.length;++c){var v=s[c][1];null==o[v]&&console.warn("No tooltip mapping for value "+v+" of field "+n+" of block type "+t.type)}}},e.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&e.utils.runAfterPageLoad(function(){e.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var o=this.getField(n);return e.utils.replaceMessageReferences(t).replace("%1",o?o.getText():"")}.bind(this))}},e.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},e.Extensions.register("parent_tooltip_when_inline",e.Extensions.extensionParentTooltip_),e.fieldRegistry={},e.fieldRegistry.register=function(t,n){e.registry.register(e.registry.Type.FIELD,t,n)},e.fieldRegistry.unregister=function(t){e.registry.unregister(e.registry.Type.FIELD,t)},e.fieldRegistry.fromJson=function(t){var n=e.registry.getObject(e.registry.Type.FIELD,t.type);return n?n.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},e.IDeletable=function(){},e.blockAnimations={},e.blockAnimations.disconnectPid_=0,e.blockAnimations.disconnectGroup_=null,e.blockAnimations.disposeUiEffect=function(t){var n=t.workspace,o=t.getSvgRoot();n.getAudioManager().play("delete"),t=n.getSvgXY(o),(o=o.cloneNode(!0)).translateX_=t.x,o.translateY_=t.y,o.setAttribute("transform","translate("+t.x+","+t.y+")"),n.getParentSvg().appendChild(o),o.bBox_=o.getBBox(),e.blockAnimations.disposeUiStep_(o,n.RTL,new Date,n.scale)},e.blockAnimations.disposeUiStep_=function(t,n,o,s){var c=(new Date-o)/150;1<c?e.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(n?-1:1)*t.bBox_.width*s/2*c)+","+(t.translateY_+t.bBox_.height*s*c)+") scale("+(1-c)*s+")"),setTimeout(e.blockAnimations.disposeUiStep_,10,t,n,o,s))},e.blockAnimations.connectionUiEffect=function(t){var n=t.workspace,o=n.scale;if(n.getAudioManager().play("click"),!(1>o)){var s=n.getSvgXY(t.getSvgRoot());t.outputConnection?(s.x+=(t.RTL?3:-3)*o,s.y+=13*o):t.previousConnection&&(s.x+=(t.RTL?-23:23)*o,s.y+=3*o),t=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:s.x,cy:s.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),e.blockAnimations.connectionUiStep_(t,new Date,o)}},e.blockAnimations.connectionUiStep_=function(t,n,o){var s=(new Date-n)/150;1<s?e.utils.dom.removeNode(t):(t.setAttribute("r",25*s*o),t.style.opacity=1-s,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.connectionUiStep_,10,t,n,o))},e.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var n=t.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,t.RTL||(n*=-1),e.blockAnimations.disconnectUiStep_(t.getSvgRoot(),n,new Date)}},e.blockAnimations.disconnectUiStep_=function(t,n,o){var s=(new Date-o)/200;1<s?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(s*Math.PI*3)*(1-s)*n)+")",e.blockAnimations.disconnectGroup_=t,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.disconnectUiStep_,10,t,n,o)),t.setAttribute("transform",t.translate_+t.skew_)},e.blockAnimations.disconnectUiStop=function(){if(e.blockAnimations.disconnectGroup_){clearTimeout(e.blockAnimations.disconnectPid_);var t=e.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),e.blockAnimations.disconnectGroup_=null}},e.Events.BlockDrag=function(t,n,o){e.Events.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=n,this.blocks=o},e.utils.object.inherits(e.Events.BlockDrag,e.Events.UiBase),e.Events.BlockDrag.prototype.type=e.Events.BLOCK_DRAG,e.Events.BlockDrag.prototype.toJson=function(){var t=e.Events.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},e.Events.BlockDrag.prototype.fromJson=function(t){e.Events.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},e.registry.register(e.registry.Type.EVENT,e.Events.BLOCK_DRAG,e.Events.BlockDrag),e.IBlockDragger=function(){},e.InsertionMarkerManager=function(t){this.topBlock_=e.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",e.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,e.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{e.Events.enable()}},e.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},e.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},e.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(e.Events.disable(),this.hidePreview_(),e.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;e.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},e.InsertionMarkerManager.prototype.update=function(t,n){var o=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(o,n))||this.shouldUpdatePreviews_(o,t))&&(e.Events.disable(),this.maybeHidePreview_(o),this.maybeShowPreview_(o),e.Events.enable())},e.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var n=t.type;e.Events.disable();try{var o=this.workspace_.newBlock(n);if(o.setInsertionMarker(!0),t.mutationToDom){var s=t.mutationToDom();s&&o.domToMutation(s)}for(n=0;n<t.inputList.length;n++){var c=t.inputList[n];if(c.name!=e.constants.COLLAPSED_INPUT_NAME){var v=o.inputList[n];if(!v)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(s=0;s<c.fieldRow.length;s++){var R=c.fieldRow[s],O=v.fieldRow[s];if(!O)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));O.setValue(R.getValue())}}}o.setCollapsed(t.isCollapsed()),o.setInputsInline(t.getInputsInline()),o.initSvg(),o.getSvgRoot().setAttribute("visibility","hidden")}finally{e.Events.enable()}return o},e.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(t.push(n),this.lastOnStack_=n,this.lastMarker_){e.Events.disable();try{this.lastMarker_.dispose()}finally{e.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return t},e.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,n){var o=t.local,s=t.closest;return t=t.radius,o&&s?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==s&&this.localConnection_==o||(o=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(o*o+n*n),s&&t>n-e.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},e.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var n=this.getStartRadius_(),o=null,s=null,c=0;c<this.availableConnections_.length;c++){var v=this.availableConnections_[c],R=v.closest(n,t);R.connection&&(o=R.connection,s=v,n=R.radius)}return{closest:o,local:s,radius:n}},e.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?e.CONNECTING_SNAP_RADIUS:e.SNAP_RADIUS},e.InsertionMarkerManager.prototype.shouldDelete_=function(t,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,e.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,t&&!!t.closest)},e.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var n=t.closest;t=t.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=t,this.showPreview_()))}},e.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&n.shouldHighlightConnection(t)&&t.highlight()},e.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var n=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(n||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},e.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},e.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,n=this.closestConnection_,o=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=o.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");o.render(),o.rendered=!0,o.getSvgRoot().setAttribute("visibility","visible"),t&&n&&o.positionNearConnection(t,n),n&&t.connect(n),this.markerConnection_=t},e.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,n=t.getSourceBlock(),o=n.nextConnection,s=n.previousConnection,c=n.outputConnection;if(c=t.type==e.connectionTypes.INPUT_VALUE&&!(c&&c.targetConnection),!(t!=o||s&&s.targetConnection)||c?t.targetBlock().unplug(!1):t.type==e.connectionTypes.NEXT_STATEMENT&&t!=o?((o=t.targetConnection).getSourceBlock().unplug(!1),s=s?s.targetConnection:null,n.unplug(!0),s&&s.connect(o)):n.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=n.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},e.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},e.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},e.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},e.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},e.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},e.BlockDragger=function(t,n){this.draggingBlock_=t,this.workspace_=n,this.draggedConnectionManager_=new e.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=e.BlockDragger.initIconData_(t)},e.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},e.BlockDragger.initIconData_=function(t){var n=[];t=t.getDescendants(!1);for(var s,o=0;s=t[o];o++){s=s.getIcons();for(var c=0;c<s.length;c++){var v={location:s[c].getIconLocation(),icon:s[c]};n.push(v)}}return n},e.BlockDragger.prototype.startDrag=function(t,n){e.Events.getGroup()||e.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),e.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),e.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},e.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},e.BlockDragger.prototype.disconnectBlock_=function(t,n){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),e.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},e.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.drag=function(t,n){n=this.pixelsToWorkspaceUnits_(n);var o=e.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(n),o=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(n,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==o&&(o&&o.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},e.BlockDragger.prototype.endDrag=function(t,n){if(this.drag(t,n),this.dragIconData_=[],this.fireDragEndEvent_(),e.utils.dom.stopTextWidthCache(),e.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{var o=(t=this.getNewLocationAfterDrag_(n)).delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),o?this.updateBlockAfterMove_(o):e.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var n={};return n.delta=this.pixelsToWorkspaceUnits_(t),n.newLocation=e.utils.Coordinate.sum(this.startXY_,n.delta),n},e.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),e.draggingConnections=[],!0)},e.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},e.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.updateToolboxStyle_=function(t){var n=this.workspace_.getToolbox();if(n){var o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&"function"==typeof n.removeStyle?n.removeStyle(o):t||"function"!=typeof n.addStyle||n.addStyle(o)}},e.BlockDragger.prototype.fireMoveEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),e.Events.fire(t)},e.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},e.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BlockDragger.prototype.dragIcons_=function(t){for(var n=0;n<this.dragIconData_.length;n++){var o=this.dragIconData_[n];o.icon.setIconLocation(e.utils.Coordinate.sum(o.location,t))}},e.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},e.registry.register(e.registry.Type.BLOCK_DRAGGER,e.registry.DEFAULT,e.BlockDragger),e.IContextMenu=function(){},e.IDraggable=function(){},e.IBubble=function(){},e.Bubble=function(t,n,o,s,c,v){this.workspace_=t,this.content_=n,this.shape_=o,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,o=e.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(o=-o),this.arrow_radians_=e.utils.math.toRadians(o),t.getBubbleCanvas().appendChild(this.createDom_(n,!(!c||!v))),this.setAnchorLocation(s),c&&v||(c=(t=this.content_.getBBox()).width+2*e.Bubble.BORDER_WIDTH,v=t.height+2*e.Bubble.BORDER_WIDTH),this.setBubbleSize(c,v),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},e.Bubble.BORDER_WIDTH=6,e.Bubble.ARROW_THICKNESS=5,e.Bubble.ARROW_ANGLE=20,e.Bubble.ARROW_BEND=4,e.Bubble.ANCHOR_RADIUS=8,e.Bubble.onMouseUpWrapper_=null,e.Bubble.onMouseMoveWrapper_=null,e.Bubble.unbindDragEvents_=function(){e.Bubble.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseUpWrapper_),e.Bubble.onMouseUpWrapper_=null),e.Bubble.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseMoveWrapper_),e.Bubble.onMouseMoveWrapper_=null)},e.Bubble.bubbleMouseUp_=function(t){e.Touch.clearTouchIdentifier(),e.Bubble.unbindDragEvents_()},e.Bubble.prototype.rendered_=!1,e.Bubble.prototype.anchorXY_=null,e.Bubble.prototype.relativeLeft_=0,e.Bubble.prototype.relativeTop_=0,e.Bubble.prototype.width_=0,e.Bubble.prototype.height_=0,e.Bubble.prototype.autoLayout_=!0,e.Bubble.prototype.createDom_=function(t,n){this.bubbleGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var o={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return e.utils.userAgent.JAVA_FX&&(o={}),o=e.utils.dom.createSvgElement(e.utils.Svg.G,o,this.bubbleGroup_),this.bubbleArrow_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{},o),this.bubbleBack_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH},o),n?(this.resizeGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e.utils.dom.createSvgElement(e.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*e.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=e.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=e.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},e.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},e.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},e.Bubble.prototype.bubbleMouseDown_=function(t){var n=this.workspace_.getGesture(t);n&&n.handleBubbleStart(t,this)},e.Bubble.prototype.showContextMenu=function(t){},e.Bubble.prototype.isDeletable=function(){return!1},e.Bubble.prototype.setDeleteStyle=function(t){},e.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),e.Bubble.unbindDragEvents_(),e.utils.isRightButton(t)||(this.workspace_.startDrag(t,new e.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),e.Bubble.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,e.Bubble.bubbleMouseUp_),e.Bubble.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),e.hideChaff()),t.stopPropagation()},e.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},e.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},e.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},e.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},e.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},e.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(t),o=this.getOptimalRelativeTop_(t),s=this.shape_.getBBox(),c={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},v={x:-this.width_-30,y:o};o={x:s.width,y:o};var R={x:n,y:s.height};n=s.width<s.height?o:R,s=s.width<s.height?R:o,o=this.getOverlap_(c,t),R=this.getOverlap_(v,t);var O=this.getOverlap_(n,t);t=this.getOverlap_(s,t),o==(t=Math.max(o,R,O,t))?(this.relativeLeft_=c.x,this.relativeTop_=c.y):R==t?(this.relativeLeft_=v.x,this.relativeTop_=v.y):O==t?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=s.x,this.relativeTop_=s.y)},e.Bubble.prototype.getOverlap_=function(t,n){var o=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(o+this.width_,n.left+n.width)-Math.max(o,n.left))*(Math.min(t+this.height_,n.top+n.height)-Math.max(t,n.top))/(this.width_*this.height_)))},e.Bubble.prototype.getOptimalRelativeLeft_=function(t){var n=-this.width_/4;if(this.width_>t.width)return n;if(this.workspace_.RTL)var o=this.anchorXY_.x-n,s=o-this.width_,c=t.left+t.width,v=t.left+e.Scrollbar.scrollbarThickness/this.workspace_.scale;else o=(s=n+this.anchorXY_.x)+this.width_,v=t.left,c=t.left+t.width-e.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?s<v?n=-(v-this.anchorXY_.x+this.width_):o>c&&(n=-(c-this.anchorXY_.x)):s<v?n=v-this.anchorXY_.x:o>c&&(n=c-this.anchorXY_.x-this.width_),n},e.Bubble.prototype.getOptimalRelativeTop_=function(t){var n=-this.height_/4;if(this.height_>t.height)return n;var o=this.anchorXY_.y+n,c=t.top;t=t.top+t.height-e.Scrollbar.scrollbarThickness/this.workspace_.scale;var v=this.anchorXY_.y;return o<c?n=c-v:o+this.height_>t&&(n=t-v-this.height_),n},e.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;this.moveTo(t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},e.Bubble.prototype.moveTo=function(t,n){this.bubbleGroup_.setAttribute("transform","translate("+t+","+n+")")},e.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},e.Bubble.prototype.getBubbleSize=function(){return new e.utils.Size(this.width_,this.height_)},e.Bubble.prototype.setBubbleSize=function(t,n){var o=2*e.Bubble.BORDER_WIDTH;t=Math.max(t,o+45),n=Math.max(n,o+20),this.width_=t,this.height_=n,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*e.Bubble.BORDER_WIDTH+","+(n-o)+") scale(-1 1)":"translate("+(t-o)+","+(n-o)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},e.Bubble.prototype.renderArrow_=function(){var t=[],n=this.width_/2,o=this.height_/2,s=-this.relativeLeft_,c=-this.relativeTop_;if(n==s&&o==c)t.push("M "+n+","+o);else{c-=o,s-=n,this.workspace_.RTL&&(s*=-1);var v=Math.sqrt(c*c+s*s),R=Math.acos(s/v);0>c&&(R=2*Math.PI-R);var O=R+Math.PI/2;O>2*Math.PI&&(O-=2*Math.PI);var H=Math.sin(O),V=Math.cos(O),G=this.getBubbleSize();O=(G.width+G.height)/e.Bubble.ARROW_THICKNESS,O=Math.min(O,G.width,G.height)/4,s=n+(G=1-e.Bubble.ANCHOR_RADIUS/v)*s,c=o+G*c,G=n+O*V;var Z=o+O*H;n-=O*V,o-=O*H,(H=R+this.arrow_radians_)>2*Math.PI&&(H-=2*Math.PI),R=Math.sin(H)*v/e.Bubble.ARROW_BEND,v=Math.cos(H)*v/e.Bubble.ARROW_BEND,t.push("M"+G+","+Z),t.push("C"+(G+v)+","+(Z+R)+" "+s+","+c+" "+s+","+c),t.push("C"+s+","+c+" "+(n+v)+","+(o+R)+" "+n+","+o)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},e.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},e.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&e.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&e.browserEvents.unbind(this.onMouseDownResizeWrapper_),e.Bubble.unbindDragEvents_(),e.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},e.Bubble.prototype.moveDuringDrag=function(t,n){t?t.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},e.Bubble.prototype.getRelativeToSurfaceXY=function(){return new e.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},e.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},e.Bubble.textToDom=function(t){var n=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:e.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var o=0;o<t.length;o++){var s=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{dy:"1em",x:e.Bubble.BORDER_WIDTH},n),c=document.createTextNode(t[o]);s.appendChild(c)}return n},e.Bubble.createNonEditableBubble=function(t,n,o){if((o=new e.Bubble(n.workspace,t,n.pathObject.svgPath,o,null,null)).setSvgId(n.id),n.RTL){n=t.getBBox().width;for(var c,s=0;c=t.childNodes[s];s++)c.setAttribute("text-anchor","end"),c.setAttribute("x",n+e.Bubble.BORDER_WIDTH)}return o},e.Events.CommentBase=function(t){this.commentId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.utils.object.inherits(e.Events.CommentBase,e.Events.Abstract),e.Events.CommentBase.prototype.toJson=function(){var t=e.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},e.Events.CommentBase.prototype.fromJson=function(t){e.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},e.Events.CommentChange=function(t,n,o){e.Events.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===o?"":o)},e.utils.object.inherits(e.Events.CommentChange,e.Events.CommentBase),e.Events.CommentChange.prototype.type=e.Events.COMMENT_CHANGE,e.Events.CommentChange.prototype.toJson=function(){var t=e.Events.CommentChange.superClass_.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},e.Events.CommentChange.prototype.fromJson=function(t){e.Events.CommentChange.superClass_.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},e.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},e.Events.CommentChange.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},e.Events.CommentCreate=function(t){e.Events.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentCreate,e.Events.CommentBase),e.Events.CommentCreate.prototype.type=e.Events.COMMENT_CREATE,e.Events.CommentCreate.prototype.toJson=function(){var t=e.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t},e.Events.CommentCreate.prototype.fromJson=function(t){e.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml)},e.Events.CommentCreate.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,t)},e.Events.CommentCreateDeleteHelper=function(t,n){var o=t.getEventWorkspace_();n?((n=e.utils.xml.createElement("xml")).appendChild(t.xml),e.Xml.domToWorkspace(n,o)):(o=o.getCommentById(t.commentId))?o.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},e.Events.CommentDelete=function(t){e.Events.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentDelete,e.Events.CommentBase),e.Events.CommentDelete.prototype.type=e.Events.COMMENT_DELETE,e.Events.CommentDelete.prototype.toJson=function(){return e.Events.CommentDelete.superClass_.toJson.call(this)},e.Events.CommentDelete.prototype.fromJson=function(t){e.Events.CommentDelete.superClass_.fromJson.call(this,t)},e.Events.CommentDelete.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,!t)},e.Events.CommentMove=function(t){e.Events.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},e.utils.object.inherits(e.Events.CommentMove,e.Events.CommentBase),e.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},e.Events.CommentMove.prototype.type=e.Events.COMMENT_MOVE,e.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},e.Events.CommentMove.prototype.toJson=function(){var t=e.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},e.Events.CommentMove.prototype.fromJson=function(t){if(e.Events.CommentMove.superClass_.fromJson.call(this,t),t.oldCoordinate){var n=t.oldCoordinate.split(",");this.oldCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}t.newCoordinate&&(n=t.newCoordinate.split(","),this.newCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1])))},e.Events.CommentMove.prototype.isNull=function(){return e.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},e.Events.CommentMove.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){t=t?this.newCoordinate_:this.oldCoordinate_;var o=n.getXY();n.moveBy(t.x-o.x,t.y-o.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CREATE,e.Events.CommentCreate),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CHANGE,e.Events.CommentChange),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_MOVE,e.Events.CommentMove),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_DELETE,e.Events.CommentDelete),e.BubbleDragger=function(t,n){this.draggingBubble_=t,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=e.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},e.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},e.BubbleDragger.prototype.startBubbleDrag=function(){e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},e.BubbleDragger.prototype.dragBubble=function(t,n){n=this.pixelsToWorkspaceUnits_(n),n=e.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},e.BubbleDragger.prototype.shouldDelete_=function(t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,e.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.draggingBubble_,!1)},e.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},e.BubbleDragger.prototype.endBubbleDrag=function(t,n){this.dragBubble(t,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new(e.Events.get(e.Events.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),e.Events.fire(t)}},e.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},e.Events.Click=function(t,n,o){e.Events.Click.superClass_.constructor.call(this,t?t.workspace.id:n),this.blockId=t?t.id:null,this.targetType=o},e.utils.object.inherits(e.Events.Click,e.Events.UiBase),e.Events.Click.prototype.type=e.Events.CLICK,e.Events.Click.prototype.toJson=function(){var t=e.Events.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},e.Events.Click.prototype.fromJson=function(t){e.Events.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.CLICK,e.Events.Click),e.WorkspaceDragger=function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new e.utils.Coordinate(t.scrollX,t.scrollY)},e.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},e.WorkspaceDragger.prototype.startDrag=function(){e.selected&&e.selected.unselect(),this.workspace_.setupDragSurface()},e.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},e.WorkspaceDragger.prototype.drag=function(t){if(t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,t.y)}},e.Gesture=function(t,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new e.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!e.DRAG_STACK},e.Gesture.prototype.dispose=function(){e.Touch.clearTouchIdentifier(),e.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&e.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&e.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},e.Gesture.prototype.updateFromEvent_=function(t){var n=new e.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),e.longStop_()),this.mostRecentEvent_=t},e.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=e.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=e.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.FLYOUT_DRAG_RADIUS:e.DRAG_RADIUS))},e.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),e.Events.getGroup()||e.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},e.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},e.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},e.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new e.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},e.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},e.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(e.registry.getClassFromOptions(e.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new e.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.doStart=function(t){e.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,e.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),e.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,e.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),e.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||e.longStart(t,this),this.mouseDownXY_=new e.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},e.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),e.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},e.Gesture.prototype.cancel=function(){this.isEnding_||(e.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},e.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),e.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(e.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},e.Gesture.prototype.handleWsStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=t,this.doStart(t)},e.Gesture.prototype.fireWorkspaceClick_=function(t){e.Events.fire(new(e.Events.get(e.Events.CLICK))(null,t.id,"workspace"))},e.Gesture.prototype.handleFlyoutStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(t,n.getWorkspace())},e.Gesture.prototype.handleBlockStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=t},e.Gesture.prototype.handleBubbleStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=t},e.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},e.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},e.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(e.Events.getGroup()||e.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new(e.Events.get(e.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");e.Events.fire(t)}this.bringBlockToFront_(),e.Events.setGroup(!1)},e.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,e.selected&&e.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},e.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},e.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},e.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},e.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},e.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},e.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},e.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},e.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},e.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},e.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},e.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},e.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},e.Gesture.prototype.hasStarted=function(){return this.hasStarted_},e.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},e.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},e.Gesture.inProgress=function(){for(var o,t=e.Workspace.getAll(),n=0;o=t[n];n++)if(o.currentGesture_)return!0;return!1},e.IRegistrable=function(){},e.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},e.Marker.prototype.setDrawer=function(t){this.drawer_=t},e.Marker.prototype.getDrawer=function(){return this.drawer_},e.Marker.prototype.getCurNode=function(){return this.curNode_},e.Marker.prototype.setCurNode=function(t){var n=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(n,this.curNode_)},e.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},e.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},e.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},e.Cursor=function(){e.Cursor.superClass_.constructor.call(this),this.type="cursor"},e.utils.object.inherits(e.Cursor,e.Marker),e.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},e.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()==e.ASTNode.types.PREVIOUS||t.getType()==e.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},e.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},e.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==e.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},e.registry.register(e.registry.Type.CURSOR,e.registry.DEFAULT,e.Cursor),e.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t},e.MarkerManager.LOCAL_MARKER="local_marker_1",e.MarkerManager.prototype.registerMarker=function(t,n){this.markers_[t]&&this.unregisterMarker(t),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[t]=n},e.MarkerManager.prototype.unregisterMarker=function(t){var n=this.markers_[t];if(!n)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[t]},e.MarkerManager.prototype.getCursor=function(){return this.cursor_},e.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},e.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},e.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},e.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},e.MarkerManager.prototype.dispose=function(){for(var o,t=Object.keys(this.markers_),n=0;o=t[n];n++)this.unregisterMarker(o);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},e.WidgetDiv={},e.WidgetDiv.owner_=null,e.WidgetDiv.dispose_=null,e.WidgetDiv.rendererClassName_="",e.WidgetDiv.themeClassName_="",e.WidgetDiv.createDom=function(){e.WidgetDiv.DIV||(e.WidgetDiv.DIV=document.createElement("div"),e.WidgetDiv.DIV.className="blocklyWidgetDiv",(e.parentContainer||document.body).appendChild(e.WidgetDiv.DIV))},e.WidgetDiv.show=function(t,n,o){e.WidgetDiv.hide(),e.WidgetDiv.owner_=t,e.WidgetDiv.dispose_=o,(t=e.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",t.style.display="block",n=e.getMainWorkspace(),e.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),e.WidgetDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.WidgetDiv.rendererClassName_),e.utils.dom.addClass(t,e.WidgetDiv.themeClassName_)},e.WidgetDiv.hide=function(){if(e.WidgetDiv.isVisible()){e.WidgetDiv.owner_=null;var t=e.WidgetDiv.DIV;t.style.display="none",t.style.left="",t.style.top="",e.WidgetDiv.dispose_&&e.WidgetDiv.dispose_(),e.WidgetDiv.dispose_=null,t.textContent="",e.WidgetDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.rendererClassName_),e.WidgetDiv.rendererClassName_=""),e.WidgetDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.themeClassName_),e.WidgetDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.WidgetDiv.isVisible=function(){return!!e.WidgetDiv.owner_},e.WidgetDiv.hideIfOwner=function(t){e.WidgetDiv.owner_==t&&e.WidgetDiv.hide()},e.WidgetDiv.positionInternal_=function(t,n,o){e.WidgetDiv.DIV.style.left=t+"px",e.WidgetDiv.DIV.style.top=n+"px",e.WidgetDiv.DIV.style.height=o+"px"},e.WidgetDiv.positionWithAnchor=function(t,n,o,s){var c=e.WidgetDiv.calculateY_(t,n,o);t=e.WidgetDiv.calculateX_(t,n,o,s),0>c?e.WidgetDiv.positionInternal_(t,0,o.height+c):e.WidgetDiv.positionInternal_(t,c,o.height)},e.WidgetDiv.calculateX_=function(t,n,o,s){return s?(n=Math.max(n.right-o.width,t.left),Math.min(n,t.right-o.width)):(n=Math.min(n.left,t.right-o.width),Math.max(n,t.left))},e.WidgetDiv.calculateY_=function(t,n,o){return n.bottom+o.height>=t.bottom?n.top-o.height:n.bottom},e.Field=function(t,n,o){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new e.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,o&&this.configure_(o),this.setValue(t),n&&this.setValidator(n)},e.Field.prototype.DEFAULT_VALUE=null,e.Field.prototype.name=void 0,e.Field.prototype.disposed=!1,e.Field.prototype.maxDisplayLength=50,e.Field.prototype.sourceBlock_=null,e.Field.prototype.isDirty_=!0,e.Field.prototype.visible_=!0,e.Field.prototype.clickTarget_=null,e.Field.NBSP="\xa0",e.Field.prototype.EDITABLE=!0,e.Field.prototype.SERIALIZABLE=!1,e.Field.prototype.configure_=function(t){var n=t.tooltip;"string"==typeof n&&(n=e.utils.replaceMessageReferences(t.tooltip)),n&&this.setTooltip(n)},e.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},e.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},e.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},e.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},e.Field.prototype.initModel=function(){},e.Field.prototype.createBorderRect_=function(){this.borderRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},e.Field.prototype.createTextElement_=function(){this.textElement_=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},e.Field.prototype.bindEvents_=function(){e.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=e.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},e.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},e.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},e.Field.prototype.dispose=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hideIfOwner(this),e.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&e.browserEvents.unbind(this.mouseDownWrapper_),e.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},e.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(e.utils.dom.addClass(t,"blocklyEditableText"),e.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(e.utils.dom.addClass(t,"blocklyNonEditableText"),e.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},e.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},e.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},e.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},e.Field.prototype.isVisible=function(){return this.visible_},e.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var n=this.getSvgRoot();n&&(n.style.display=t?"block":"none")}},e.Field.prototype.setValidator=function(t){this.validator_=t},e.Field.prototype.getValidator=function(){return this.validator_},e.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},e.Field.prototype.applyColour=function(){},e.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},e.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},e.Field.prototype.updateSize_=function(t){var n=this.getConstants(),o=2*(t=null!=t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),s=n.FIELD_TEXT_HEIGHT,c=0;this.textElement_&&(o+=c=e.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(s=Math.max(s,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=s,this.size_.width=o,this.positionTextElement_(t,c),this.positionBorderRect_()},e.Field.prototype.positionTextElement_=function(t,n){if(this.textElement_){var o=this.getConstants(),s=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-t:t),this.textElement_.setAttribute("y",o.FIELD_TEXT_BASELINE_CENTER?s:s-o.FIELD_TEXT_HEIGHT/2+o.FIELD_TEXT_BASELINE)}},e.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},e.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new e.utils.Size(0,0)},e.Field.prototype.getScaledBBox=function(){if(this.borderRect_)t=this.borderRect_.getBoundingClientRect(),o=e.utils.style.getPageOffset(this.borderRect_),s=t.width,t=t.height;else{var t=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,o=this.getAbsoluteXY_(),s=t.width*n;t=t.height*n,e.utils.userAgent.GECKO?(o.x+=1.5*n,o.y+=1.5*n):e.utils.userAgent.EDGE||e.utils.userAgent.IE||(o.x-=.5*n,o.y-=.5*n),s+=1*n,t+=1*n}return new e.utils.Rect(o.y,o.y+t,o.x,o.x+s)},e.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,e.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200f"),t):e.Field.NBSP},e.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},e.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},e.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},e.Field.prototype.setValue=function(t){if(null!==t){var n=this.doClassValidation_(t);if(!((t=this.processValidation_(t,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,t),(t=this.processValidation_(t,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var o=this.getValue();o===t?this.doValueUpdate_(t):(n&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(n,"field",this.name||null,o,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}}},e.Field.prototype.processValidation_=function(t,n){return null===n?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(t=n),t)},e.Field.prototype.getValue=function(){return this.value_},e.Field.prototype.doClassValidation_=function(t){return null==t?null:t},e.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},e.Field.prototype.doValueInvalid_=function(t){},e.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},e.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=t:this.tooltip_=t},e.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return e.Tooltip.getTooltipOfObject(t||{tooltip:this.tooltip_})},e.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},e.Field.prototype.getAbsoluteXY_=function(){return e.utils.style.getPageOffset(this.getClickTarget_())},e.Field.prototype.referencesVariables=function(){return!1},e.Field.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_,o=n.inputList,s=0;s<n.inputList.length;s++)for(var c=o[s],v=c.fieldRow,R=0;R<v.length;R++)if(v[R]===this){t=c;break}return t},e.Field.prototype.getFlipRtl=function(){return!1},e.Field.prototype.isTabNavigable=function(){return!1},e.Field.prototype.onShortcut=function(t){return!1},e.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},e.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.FieldLabel=function(t,n,o){this.class_=null,e.FieldLabel.superClass_.constructor.call(this,t,null,o),o||(this.class_=n||null)},e.utils.object.inherits(e.FieldLabel,e.Field),e.FieldLabel.prototype.DEFAULT_VALUE="",e.FieldLabel.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabel(n,void 0,t)},e.FieldLabel.prototype.EDITABLE=!1,e.FieldLabel.prototype.configure_=function(t){e.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},e.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&e.utils.dom.addClass(this.textElement_,this.class_)},e.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&e.utils.dom.removeClass(this.textElement_,this.class_),t&&e.utils.dom.addClass(this.textElement_,t)),this.class_=t},e.fieldRegistry.register("field_label",e.FieldLabel),e.Input=function(t,n,o,s){if(t!=e.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=n,this.sourceBlock_=o,this.connection=s,this.fieldRow=[]},e.Input.prototype.align=e.constants.ALIGN.LEFT,e.Input.prototype.visible_=!0,e.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Input.prototype.appendField=function(t,n){return this.insertFieldAt(this.fieldRow.length,t,n),this},e.Input.prototype.insertFieldAt=function(t,n,o){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(n||""==n&&o)&&("string"==typeof n&&(n=e.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=o,n.setVisible(this.isVisible()),n.prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,n),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},e.Input.prototype.removeField=function(t,n){for(var s,o=0;s=this.fieldRow[o];o++)if(s.name===t)return s.dispose(),this.fieldRow.splice(o,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+t+'" not found.')},e.Input.prototype.isVisible=function(){return this.visible_},e.Input.prototype.setVisible=function(t){var n=[];if(this.visible_==t)return n;this.visible_=t;for(var s,o=0;s=this.fieldRow[o];o++)s.setVisible(t);return this.connection&&(this.connection=this.connection,t?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),o=this.connection.targetBlock())&&(o.getSvgRoot().style.display=t?"block":"none"),n},e.Input.prototype.markDirty=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.markDirty()},e.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},e.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},e.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},e.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},e.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},e.Input.prototype.dispose=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},e.Block=function(t,n,o){if(e.Generator&&void 0!==e.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=o&&!t.getBlockById(o)?o:e.utils.genUid(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new e.utils.Size(160,80)},this.xy_=new e.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(o=e.Blocks[n])||"object"!=typeof o)throw TypeError("Unknown block type: "+n);e.utils.object.mixin(this,o)}t.addTopBlock(this),t.addTypedBlock(this),(t=e.Events.getGroup())||e.Events.setGroup(!0),n=e.Events.recordUndo;try{"function"==typeof this.init&&(e.Events.recordUndo=!1,this.init(),e.Events.recordUndo=n),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(this))}finally{t||e.Events.setGroup(!1),e.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},e.Block.COLLAPSED_INPUT_NAME=e.constants.COLLAPSED_INPUT_NAME,e.Block.COLLAPSED_FIELD_NAME=e.constants.COLLAPSED_FIELD_NAME,e.Block.prototype.data=null,e.Block.prototype.disposed=!1,e.Block.prototype.hue_=null,e.Block.prototype.colour_="#000000",e.Block.prototype.styleName_="",e.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_DELETE))(this)),e.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),e.selected==this&&(e.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var o;o=this.inputList[n];n++)o.dispose();this.inputList.length=0;var c,s=this.getConnections_(!0);for(n=0;c=s[n];n++)c.dispose()}finally{e.Events.enable(),this.disposed=!0}}},e.Block.prototype.initModel=function(){for(var n,t=0;n=this.inputList[t];t++)for(var s,o=0;s=n.fieldRow[o];o++)s.initModel&&s.initModel()},e.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},e.Block.prototype.unplugFromRow_=function(t){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,n,!1)?n.connect(t):t.onFailedConnect(n))},e.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;if(o&&o.type==e.connectionTypes.INPUT_VALUE&&o.targetConnection){if(t)return null;t=o}}return t},e.Block.prototype.unplugFromStack_=function(t){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var o=this.getNextBlock();t&&o&&!o.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,t,!1)&&n.connect(t))},e.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var o,n=0;o=this.inputList[n];n++)o.connection&&t.push(o.connection);return t},e.Block.prototype.lastConnectionInStack=function(t){for(var n=this.nextConnection;n;){var o=n.targetBlock();if(!o||t&&o.isShadow())return n;n=o.nextConnection}return null},e.Block.prototype.bumpNeighbours=function(){},e.Block.prototype.getParent=function(){return this.parentBlock_},e.Block.prototype.getInputWithBlock=function(t){for(var o,n=0;o=this.inputList[n];n++)if(o.connection&&o.connection.targetBlock()==t)return o;return null},e.Block.prototype.getSurroundParent=function(){var t=this;do{var n=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==n);return t},e.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},e.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},e.Block.prototype.getFirstStatementConnection=function(){for(var n,t=0;n=this.inputList[t];t++)if(n.connection&&n.connection.type==e.connectionTypes.NEXT_STATEMENT)return n.connection;return null},e.Block.prototype.getRootBlock=function(){var t=this;do{var n=t;t=n.parentBlock_}while(t);return n},e.Block.prototype.getTopStackBlock=function(){var t=this;do{var n=t.getPreviousBlock()}while(n&&n.getNextBlock()==t&&(t=n));return t},e.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var o,n=0;o=this.inputList[n];n++)o.connection&&(o=o.connection.targetBlock())&&t.push(o);return(n=this.getNextBlock())&&t.push(n),t},e.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(e.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},e.Block.prototype.getDescendants=function(t){for(var s,n=[this],o=this.getChildren(t),c=0;s=o[c];c++)n.push.apply(n,s.getDescendants(t));return n},e.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setDeletable=function(t){this.deletable_=t},e.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setMovable=function(t){this.movable_=t},e.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(e.utils.getBlockTypeCounts(this,!0))},e.Block.prototype.isShadow=function(){return this.isShadow_},e.Block.prototype.setShadow=function(t){this.isShadow_=t},e.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},e.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},e.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var n;n=this.inputList[t];t++)for(var s,o=0;s=n.fieldRow[o];o++)s.updateEditable()},e.Block.prototype.isDisposed=function(){return this.disposed},e.Block.prototype.getMatchingConnection=function(t,n){var o=this.getConnections_(!0);if(t=t.getConnections_(!0),o.length!=t.length)throw Error("Connection lists did not match in length.");for(var s=0;s<t.length;s++)if(t[s]==n)return o[s];return null},e.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},e.Block.prototype.setTooltip=function(t){this.tooltip=t},e.Block.prototype.getTooltip=function(){return e.Tooltip.getTooltipOfObject(this)},e.Block.prototype.getColour=function(){return this.colour_},e.Block.prototype.getStyleName=function(){return this.styleName_},e.Block.prototype.getHue=function(){return this.hue_},e.Block.prototype.setColour=function(t){t=e.utils.parseBlockColour(t),this.hue_=t.hue,this.colour_=t.hex},e.Block.prototype.setStyle=function(t){this.styleName_=t},e.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},e.Block.prototype.getField=function(t){if("string"!=typeof t)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(var o,n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)if(c.name===t)return c;return null},e.Block.prototype.getVars=function(){for(var o,t=[],n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)c.referencesVariables()&&t.push(c.getValue());return t},e.Block.prototype.getVarModels=function(){for(var o,t=[],n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)c.referencesVariables()&&(c=this.workspace.getVariableById(c.getValue()))&&t.push(c);return t},e.Block.prototype.updateVarName=function(t){for(var o,n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)c.referencesVariables()&&t.getId()==c.getValue()&&c.refreshVariableName()},e.Block.prototype.renameVarById=function(t,n){for(var s,o=0;s=this.inputList[o];o++)for(var v,c=0;v=s.fieldRow[c];c++)v.referencesVariables()&&t==v.getValue()&&v.setValue(n)},e.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},e.Block.prototype.setFieldValue=function(t,n){var o=this.getField(n);if(!o)throw Error('Field "'+n+'" not found.');o.setValue(t)},e.Block.prototype.setPreviousStatement=function(t,n){if(t){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(e.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},e.Block.prototype.setNextStatement=function(t,n){if(t)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(e.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},e.Block.prototype.setOutput=function(t,n){if(t){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(e.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},e.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},e.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.DUMMY&&this.inputList[t].type==e.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.VALUE&&this.inputList[t].type==e.inputTypes.DUMMY)return!0;return!1},e.Block.prototype.setOutputShape=function(t){this.outputShape_=t},e.Block.prototype.getOutputShape=function(){return this.outputShape_},e.Block.prototype.isEnabled=function(){return!this.disabled},e.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},e.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},e.Block.prototype.isCollapsed=function(){return this.collapsed_},e.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},e.Block.prototype.toString=function(t,n){function o(V){var G=V.getCheck();return!G&&V.targetConnection&&(G=V.targetConnection.getCheck()),!!G&&(-1!=G.indexOf("Boolean")||-1!=G.indexOf("Number"))}function s(){R&&R.getType()==O.getType()&&R.getLocation()==O.getLocation()&&(R=null)}var c=[];n=n||"?";var v=e.ASTNode.NAVIGATE_ALL_FIELDS;e.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var R=e.ASTNode.createBlockNode(this),O=R;R;){switch(R.getType()){case e.ASTNode.types.INPUT:var H=R.getLocation();R.in()?o(H)&&c.push("("):c.push(n);break;case e.ASTNode.types.FIELD:(H=R.getLocation()).name!=e.constants.COLLAPSED_FIELD_NAME&&c.push(H.getText())}if(!(R=(H=R).in()||H.next())){for(R=H.out(),s();R&&!R.next();)R=R.out(),s(),R&&R.getType()==e.ASTNode.types.INPUT&&o(R.getLocation())&&c.push(")");R&&(R=R.next())}}for(e.ASTNode.NAVIGATE_ALL_FIELDS=v,n=2;n<c.length;n++)"("==c[n-2]&&")"==c[n]&&(c[n-2]=c[n-1],c.splice(n-1,2));return c=(c=c.reduce(function(V,G){return V+("("==V.substr(-1)||")"==G?"":" ")+G},"")).trim()||"???",t&&c.length>t&&(c=c.substring(0,t-3)+"..."),c},e.Block.prototype.appendValueInput=function(t){return this.appendInput_(e.inputTypes.VALUE,t)},e.Block.prototype.appendStatementInput=function(t){return this.appendInput_(e.inputTypes.STATEMENT,t)},e.Block.prototype.appendDummyInput=function(t){return this.appendInput_(e.inputTypes.DUMMY,t||"")},e.Block.prototype.jsonInit=function(t){var n=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(n+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,n):this.jsonInitColour_(t,n);for(var o=0;void 0!==t["message"+o];)this.interpolate_(t["message"+o],t["args"+o]||[],t["lastDummyAlign"+o],n),o++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(o=e.utils.replaceMessageReferences(o=t.tooltip),this.setTooltip(o)),void 0!==t.enableContextMenu&&(this.contextMenu=!!(o=t.enableContextMenu)),void 0!==t.helpUrl&&(o=e.utils.replaceMessageReferences(o=t.helpUrl),this.setHelpUrl(o)),"string"==typeof t.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&e.Extensions.apply(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(n=0;n<t.length;++n)e.Extensions.apply(t[n],this,!1)},e.Block.prototype.jsonInitColour_=function(t,n){if("colour"in t)if(void 0===t.colour)console.warn(n+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(o){console.warn(n+"Illegal colour value: ",t)}}},e.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(o){console.warn(n+"Style does not exist: ",t)}},e.Block.prototype.mixin=function(t,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var o in n=[],t)void 0!==this[o]&&n.push(o);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}e.utils.object.mixin(this,t)},e.Block.prototype.interpolate_=function(t,n,o,s){t=e.utils.tokenizeInterpolation(t),this.validateTokens_(t,n.length),n=this.interpolateArguments_(t,n,o),o=[],t=0;for(var c;c=n[t];t++)if(this.isInputKeyword_(c.type)){if(c=this.inputFromJson_(c,s)){for(var R,v=0;R=o[v];v++)c.appendField(R[0],R[1]);o.length=0}}else(v=this.fieldFromJson_(c))&&o.push([v,c.name])},e.Block.prototype.validateTokens_=function(t,n){for(var o=[],s=0,c=0;c<t.length;c++){var v=t[c];if("number"==typeof v){if(1>v||v>n)throw Error('Block "'+this.type+'": Message index %'+v+" out of range.");if(o[v])throw Error('Block "'+this.type+'": Message index %'+v+" duplicated.");o[v]=!0,s++}}if(s!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},e.Block.prototype.interpolateArguments_=function(t,n,o){for(var s=[],c=0;c<t.length;c++){var v=t[c];"number"==typeof v&&(v=n[v-1]),("string"!=typeof v||(v=this.stringToFieldJson_(v)))&&s.push(v)}return(t=s.length)&&!this.isInputKeyword_(s[t-1].type)&&(t={type:"input_dummy"},o&&(t.align=o),s.push(t)),s},e.Block.prototype.fieldFromJson_=function(t){var n=e.fieldRegistry.fromJson(t);return!n&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):n},e.Block.prototype.inputFromJson_=function(t,n){var o={LEFT:e.constants.ALIGN.LEFT,RIGHT:e.constants.ALIGN.RIGHT,CENTRE:e.constants.ALIGN.CENTRE,CENTER:e.constants.ALIGN.CENTRE},s=null;switch(t.type){case"input_value":s=this.appendValueInput(t.name);break;case"input_statement":s=this.appendStatementInput(t.name);break;case"input_dummy":s=this.appendDummyInput(t.name)}return s?(t.check&&s.setCheck(t.check),t.align&&(void 0===(o=o[t.align.toUpperCase()])?console.warn(n+"Illegal align value: ",t.align):s.setAlign(o)),s):null},e.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},e.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},e.Block.prototype.appendInput_=function(t,n){var o=null;return(t==e.inputTypes.VALUE||t==e.inputTypes.STATEMENT)&&(o=this.makeConnection_(t)),t==e.inputTypes.STATEMENT&&this.statementInputCount++,t=new e.Input(t,n,this,o),this.inputList.push(t),t},e.Block.prototype.moveInputBefore=function(t,n){if(t!=n){for(var v,o=-1,s=n?-1:this.inputList.length,c=0;v=this.inputList[c];c++)if(v.name==t){if(o=c,-1!=s)break}else if(n&&v.name==n&&(s=c,-1!=o))break;if(-1==o)throw Error('Named input "'+t+'" not found.');if(-1==s)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(o,s)}},e.Block.prototype.moveNumberedInputBefore=function(t,n){if(t==n)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var o=this.inputList[t];this.inputList.splice(t,1),t<n&&n--,this.inputList.splice(n,0,o)},e.Block.prototype.removeInput=function(t,n){for(var s,o=0;s=this.inputList[o];o++)if(s.name==t)return s.type==e.inputTypes.STATEMENT&&this.statementInputCount--,s.dispose(),this.inputList.splice(o,1),!0;if(n)return!1;throw Error("Input not found: "+t)},e.Block.prototype.getInput=function(t){for(var o,n=0;o=this.inputList[n];n++)if(o.name==t)return o;return null},e.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},e.Block.prototype.getCommentText=function(){return this.commentModel.text},e.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},e.Block.prototype.setWarningText=function(t,n){},e.Block.prototype.setMutator=function(t){},e.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},e.Block.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var o=new(e.Events.get(e.Events.BLOCK_MOVE))(this);this.xy_.translate(t,n),o.recordNew(),e.Events.fire(o)},e.Block.prototype.makeConnection_=function(t){return new e.Connection(this,t)},e.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var o,n=0;o=this.inputList[n];n++)if(o.connection&&(!(o=o.connection.targetBlock())||!o.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},e.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},e.blockRendering.IPathObject=function(t,n){},e.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},e.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},e.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},e.Menu.prototype.render=function(t){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&e.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var s,o=0;s=this.menuItems_[o];o++)n.appendChild(s.createDom());this.mouseOverHandler_=e.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=e.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=e.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=e.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=e.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),t.appendChild(n)},e.Menu.prototype.getElement=function(){return this.element_},e.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),e.utils.dom.addClass(t,"blocklyFocused"))},e.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),e.utils.dom.removeClass(t,"blocklyFocused"))},e.Menu.prototype.setRole=function(t){this.roleName_=t},e.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(e.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(e.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(e.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(e.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(e.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,t=0;n=this.menuItems_[t];t++)n.dispose();this.element_=null},e.Menu.prototype.getMenuItem_=function(t){for(var n=this.getElement();t&&t!=n;){if(e.utils.dom.hasClass(t,"blocklyMenuItem"))for(var s,o=0;s=this.menuItems_[o];o++)if(s.getElement()==t)return s;t=t.parentElement}return null},e.Menu.prototype.setHighlighted=function(t){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,n=this.getElement(),e.utils.style.scrollIntoContainerView(t.getElement(),n),e.utils.aria.setState(n,e.utils.aria.State.ACTIVEDESCENDANT,t.getId()))},e.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},e.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},e.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},e.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},e.Menu.prototype.highlightHelper_=function(t,n){t+=n;for(var o;o=this.menuItems_[t];){if(o.isEnabled()){this.setHighlighted(o);break}t+=n}},e.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},e.Menu.prototype.handleClick_=function(t){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof t.clientX){var o=new e.utils.Coordinate(t.clientX,t.clientY);if(1>e.utils.Coordinate.distance(n,o))return}(t=this.getMenuItem_(t.target))&&t.performAction()},e.Menu.prototype.handleMouseEnter_=function(t){this.focus()},e.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},e.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var n=this.highlightedItem_;switch(t.keyCode){case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:n&&n.performAction();break;case e.utils.KeyCodes.UP:this.highlightPrevious();break;case e.utils.KeyCodes.DOWN:this.highlightNext();break;case e.utils.KeyCodes.PAGE_UP:case e.utils.KeyCodes.HOME:this.highlightFirst_();break;case e.utils.KeyCodes.PAGE_DOWN:case e.utils.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},e.Menu.prototype.getSize=function(){var t=this.getElement(),n=e.utils.style.getSize(t);return n.height=t.scrollHeight,n},e.MenuItem=function(t,n){this.content_=t,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=e.utils.IdGenerator.getNextUniqueId(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(o)}return o=this.content_,"string"==typeof this.content_&&(o=document.createTextNode(this.content_)),n.appendChild(o),t.appendChild(n),this.roleName_&&e.utils.aria.setRole(t,this.roleName_),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),e.utils.aria.setState(t,e.utils.aria.State.DISABLED,!this.enabled_),t},e.MenuItem.prototype.dispose=function(){this.element_=null},e.MenuItem.prototype.getElement=function(){return this.element_},e.MenuItem.prototype.getId=function(){return this.element_.id},e.MenuItem.prototype.getValue=function(){return this.value_},e.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},e.MenuItem.prototype.setRole=function(t){this.roleName_=t},e.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},e.MenuItem.prototype.setChecked=function(t){this.checked_=t},e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var n=this.getElement();n&&this.isEnabled()&&(t?(e.utils.dom.addClass(n,"blocklyMenuItemHighlight"),e.utils.dom.addClass(n,"goog-menuitem-highlight")):(e.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),e.utils.dom.removeClass(n,"goog-menuitem-highlight")))},e.MenuItem.prototype.isEnabled=function(){return this.enabled_},e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},e.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},e.MenuItem.prototype.onAction=function(t,n){this.actionHandler_=t.bind(n)},e.ContextMenu={},e.ContextMenu.currentBlock=null,e.ContextMenu.menu_=null,e.ContextMenu.show=function(t,n,o){if(e.WidgetDiv.show(e.ContextMenu,o,e.ContextMenu.dispose),n.length){var s=e.ContextMenu.populate_(n,o);e.ContextMenu.menu_=s,e.ContextMenu.position_(s,t,o),setTimeout(function(){s.focus()},1),e.ContextMenu.currentBlock=null}else e.ContextMenu.hide()},e.ContextMenu.populate_=function(t,n){var o=new e.Menu;o.setRole(e.utils.aria.Role.MENU);for(var c,s=0;c=t[s];s++){var v=new e.MenuItem(c.text);v.setRightToLeft(n),v.setRole(e.utils.aria.Role.MENUITEM),o.addChild(v),v.setEnabled(c.enabled),c.enabled&&v.onAction(function(R){e.ContextMenu.hide(),this.callback(this.scope)},c)}return o},e.ContextMenu.position_=function(t,n,o){var s=e.utils.getViewportBBox();n=new e.utils.Rect(n.clientY+s.top,n.clientY+s.top,n.clientX+s.left,n.clientX+s.left),e.ContextMenu.createWidget_(t);var c=t.getSize();o&&(n.left+=c.width,n.right+=c.width,s.left+=c.width,s.right+=c.width),e.WidgetDiv.positionWithAnchor(s,n,c,o),t.focus()},e.ContextMenu.createWidget_=function(t){t.render(e.WidgetDiv.DIV);var n=t.getElement();e.utils.dom.addClass(n,"blocklyContextMenu"),e.browserEvents.conditionalBind(n,"contextmenu",null,e.utils.noEvent),t.focus()},e.ContextMenu.hide=function(){e.WidgetDiv.hideIfOwner(e.ContextMenu),e.ContextMenu.currentBlock=null},e.ContextMenu.dispose=function(){e.ContextMenu.menu_&&(e.ContextMenu.menu_.dispose(),e.ContextMenu.menu_=null)},e.ContextMenu.callbackFactory=function(t,n){return function(){e.Events.disable();try{var o=e.Xml.domToBlock(n,t.workspace),s=t.getRelativeToSurfaceXY();s.x=t.RTL?s.x-e.SNAP_RADIUS:s.x+e.SNAP_RADIUS,s.y+=2*e.SNAP_RADIUS,o.moveBy(s.x,s.y)}finally{e.Events.enable()}e.Events.isEnabled()&&!o.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(o)),o.select()}},e.ContextMenu.commentDeleteOption=function(t){return{text:e.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.commentDuplicateOption=function(t){return{text:e.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){e.duplicate(t)}}},e.ContextMenu.workspaceCommentOption=function(t,n){if(!e.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var o={enabled:!e.utils.userAgent.IE};return o.text=e.Msg.ADD_COMMENT,o.callback=function(){var s=new e.WorkspaceCommentSvg(t,e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,e.WorkspaceCommentSvg.DEFAULT_SIZE,e.WorkspaceCommentSvg.DEFAULT_SIZE),c=t.getInjectionDiv().getBoundingClientRect();c=new e.utils.Coordinate(n.clientX-c.left,n.clientY-c.top);var v=t.getOriginOffsetInPixels();(c=e.utils.Coordinate.difference(c,v)).scale(1/t.scale),s.moveBy(c.x,c.y),t.rendered&&(s.initSvg(),s.render(),s.select())},o},e.ContextMenuRegistry=function(){e.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},e.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},e.ContextMenuRegistry.registry=null,e.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},e.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},e.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},e.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,n){var o=[],s=this.registry_;return Object.keys(s).forEach(function(c){if(t==(c=s[c]).scopeType){var v=c.preconditionFn(n);"hidden"!=v&&(c={text:"function"==typeof c.displayText?c.displayText(n):c.displayText,enabled:"enabled"==v,callback:c.callback,scope:n,weight:c.weight},o.push(c))}}),o.sort(function(c,v){return c.weight-v.weight}),o},new e.ContextMenuRegistry,e.Events.Selected=function(t,n,o){e.Events.Selected.superClass_.constructor.call(this,o),this.oldElementId=t,this.newElementId=n},e.utils.object.inherits(e.Events.Selected,e.Events.UiBase),e.Events.Selected.prototype.type=e.Events.SELECTED,e.Events.Selected.prototype.toJson=function(){var t=e.Events.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},e.Events.Selected.prototype.fromJson=function(t){e.Events.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},e.registry.register(e.registry.Type.EVENT,e.Events.SELECTED,e.Events.Selected),e.IBoundedElement=function(){},e.ICopyable=function(){},e.RenderedConnection=function(t,n){e.RenderedConnection.superClass_.constructor.call(this,t,n),this.db_=t.workspace.connectionDBList[n],this.dbOpposite_=t.workspace.connectionDBList[e.OPPOSITE_TYPE[n]],this.offsetInBlock_=new e.utils.Coordinate(0,0),this.trackedState_=e.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},e.utils.object.inherits(e.RenderedConnection,e.Connection),e.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},e.RenderedConnection.prototype.dispose=function(){e.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},e.RenderedConnection.prototype.getSourceBlock=function(){return e.RenderedConnection.superClass_.getSourceBlock.call(this)},e.RenderedConnection.prototype.targetBlock=function(){return e.RenderedConnection.superClass_.targetBlock.call(this)},e.RenderedConnection.prototype.distanceFrom=function(t){var n=this.x-t.x;return t=this.y-t.y,Math.sqrt(n*n+t*t)},e.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var o=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,o=!0}var s=e.selected==n;s||n.addSelect();var c=t.x+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x,v=t.y+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.y;o&&(v=-v),n.RTL&&(c=t.x-e.SNAP_RADIUS-Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x),n.moveBy(c,v),s||n.removeSelect()}}},e.RenderedConnection.prototype.moveTo=function(t,n){this.trackedState_==e.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=t,this.y=n},e.RenderedConnection.prototype.moveBy=function(t,n){this.moveTo(this.x+t,this.y+n)},e.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},e.RenderedConnection.prototype.setOffsetInBlock=function(t,n){this.offsetInBlock_.x=t,this.offsetInBlock_.y=n},e.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},e.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=t||0!=n){var o=this.targetBlock(),s=o.getSvgRoot();if(!s)throw Error("block is not rendered.");s=e.utils.getRelativeXY(s),o.getSvgRoot().setAttribute("transform","translate("+(s.x-t)+","+(s.y-n)+")"),o.moveConnections(-t,-n)}},e.RenderedConnection.prototype.closest=function(t,n){return this.dbOpposite_.searchForClosest(this,t,n)},e.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),n=t.shapeFor(this);n=this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.OUTPUT_VALUE?e.utils.svgPaths.moveBy(0,-(t=t.TAB_OFFSET_FROM_TOP))+e.utils.svgPaths.lineOnAxis("v",t)+n.pathDown+e.utils.svgPaths.lineOnAxis("v",t):e.utils.svgPaths.moveBy(-(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS),0)+e.utils.svgPaths.lineOnAxis("h",t)+n.pathLeft+e.utils.svgPaths.lineOnAxis("h",t),t=this.sourceBlock_.getRelativeToSurfaceXY(),e.Connection.highlightedPath_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},e.RenderedConnection.prototype.unhighlight=function(){e.utils.dom.removeNode(e.Connection.highlightedPath_),delete e.Connection.highlightedPath_},e.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_==e.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_==e.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.UNTRACKED))},e.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),n=0;n<t.length;n++){for(var o=t[n],s=o.getConnections_(!0),c=0;c<s.length;c++)s[c].setTracking(!1);for(o=o.getIcons(),c=0;c<o.length;c++)o[c].setVisible(!1)}},e.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!=e.connectionTypes.INPUT_VALUE&&this.type!=e.connectionTypes.NEXT_STATEMENT)return t;var n=this.targetBlock();if(n){if(n.isCollapsed()){var o=[];n.outputConnection&&o.push(n.outputConnection),n.nextConnection&&o.push(n.nextConnection),n.previousConnection&&o.push(n.previousConnection)}else o=n.getConnections_(!0);for(var s=0;s<o.length;s++)t.push.apply(t,o[s].startTrackingAll());t.length||(t[0]=n)}return t},e.RenderedConnection.prototype.isConnectionAllowed=function(t,n){return e.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(t)>n)&&e.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},e.RenderedConnection.prototype.onFailedConnect=function(t){var n=this.getSourceBlock();if(e.Events.recordUndo){var o=e.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(e.Events.setGroup(o),this.bumpAwayFrom(t),e.Events.setGroup(!1))}.bind(this),e.BUMP_DELAY)}},e.RenderedConnection.prototype.disconnectInternal_=function(t,n){e.RenderedConnection.superClass_.disconnectInternal_.call(this,t,n),t.rendered&&t.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},e.RenderedConnection.prototype.respawnShadow_=function(){e.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},e.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},e.RenderedConnection.prototype.connect_=function(t){e.RenderedConnection.superClass_.connect_.call(this,t);var n=this.getSourceBlock();t=t.getSourceBlock();var o=n.rendered,s=t.rendered;o&&n.updateDisabled(),s&&t.updateDisabled(),o&&s&&(this.type==e.connectionTypes.NEXT_STATEMENT||this.type==e.connectionTypes.PREVIOUS_STATEMENT?t.render():n.render()),(n=n.getInputWithBlock(t))&&(n=n.isVisible(),t.getSvgRoot().style.display=n?"block":"none")},e.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},e.BasicCursor=function(){e.BasicCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.BasicCursor,e.Cursor),e.BasicCursor.registrationName="basicCursor",e.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.in=function(){return this.next()},e.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.out=function(){return this.prev()},e.BasicCursor.prototype.getNextNode_=function(t,n){if(!t)return null;var o=t.in()||t.next();return n(o)?o:o?this.getNextNode_(o,n):n(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,n):null},e.BasicCursor.prototype.getPreviousNode_=function(t,n){if(!t)return null;var o=t.prev();return n(o=o?this.getRightMostChild_(o):t.out())?o:o?this.getPreviousNode_(o,n):null},e.BasicCursor.prototype.validNode_=function(t){var n=!1;return((t=t&&t.getType())==e.ASTNode.types.OUTPUT||t==e.ASTNode.types.INPUT||t==e.ASTNode.types.FIELD||t==e.ASTNode.types.NEXT||t==e.ASTNode.types.PREVIOUS||t==e.ASTNode.types.WORKSPACE)&&(n=!0),n},e.BasicCursor.prototype.findSiblingOrParent_=function(t){return t?t.next()||this.findSiblingOrParent_(t.out()):null},e.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},e.registry.register(e.registry.Type.CURSOR,e.BasicCursor.registrationName,e.BasicCursor),e.TabNavigateCursor=function(){e.TabNavigateCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.TabNavigateCursor,e.BasicCursor),e.TabNavigateCursor.prototype.validNode_=function(t){var n=!1,o=t&&t.getType();return t&&(t=t.getLocation(),o==e.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(n=!0)),n},e.BlockSvg=function(t,n,o){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=e.utils.is3dSupported()&&!!t.getBlockDragSurface();var s=this.pathObject.svgPath;s.tooltip=this,e.Tooltip.bindMouseEvents(s),e.BlockSvg.superClass_.constructor.call(this,t,n,o),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:e.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},e.utils.object.inherits(e.BlockSvg,e.Block),e.BlockSvg.prototype.height=0,e.BlockSvg.prototype.width=0,e.BlockSvg.prototype.warningTextDb_=null,e.BlockSvg.INLINE=-1,e.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",e.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,t=0;n=this.inputList[t];t++)n.init();for(n=this.getIcons(),t=0;t<n.length;t++)n[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||e.browserEvents.conditionalBind(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},e.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},e.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},e.BlockSvg.prototype.getColourShadow=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},e.BlockSvg.prototype.getColourBorder=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},e.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(e.selected!=this){var t=null;if(e.selected){t=e.selected.id,e.Events.disable();try{e.selected.unselect()}finally{e.Events.enable()}}t=new(e.Events.get(e.Events.SELECTED))(t,this.id,this.workspace.id),e.Events.fire(t),e.selected=this,this.addSelect()}},e.BlockSvg.prototype.unselect=function(){if(e.selected==this){var t=new(e.Events.get(e.Events.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,e.Events.fire(t),e.selected=null,this.removeSelect()}},e.BlockSvg.prototype.mutator=null,e.BlockSvg.prototype.comment=null,e.BlockSvg.prototype.commentIcon_=null,e.BlockSvg.prototype.warning=null,e.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},e.BlockSvg.prototype.setParent=function(t){var n=this.parentBlock_;if(t!=n){e.utils.dom.startTextWidthCache(),e.BlockSvg.superClass_.setParent.call(this,t),e.utils.dom.stopTextWidthCache();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var s=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(o),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-s.x,t.y-s.y)):n&&(this.workspace.getCanvas().appendChild(o),this.translate(s.x,s.y)),this.applyColour()}}},e.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,n=0,o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,s=this.getSvgRoot();if(s)do{var c=e.utils.getRelativeXY(s);t+=c.x,n+=c.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==s&&(t+=(c=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=c.y),s=s.parentNode}while(s&&s!=this.workspace.getCanvas()&&s!=o);return new e.utils.Coordinate(t,n)},e.BlockSvg.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var o=e.Events.isEnabled();if(o)var s=new(e.Events.get(e.Events.BLOCK_MOVE))(this);var c=this.getRelativeToSurfaceXY();this.translate(c.x+t,c.y+n),this.moveConnections(t,n),o&&(s.recordNew(),e.Events.fire(s)),this.workspace.resizeContents()},e.BlockSvg.prototype.translate=function(t,n){this.getSvgRoot().setAttribute("transform","translate("+t+","+n+")")},e.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},e.BlockSvg.prototype.moveTo=function(t){var n=this.getRelativeToSurfaceXY();this.moveBy(t.x-n.x,t.y-n.y)},e.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},e.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},e.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},e.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var n=t.getSpacing(),o=n/2,s=this.getRelativeToSurfaceXY();t=Math.round((s.x-o)/n)*n+o-s.x,n=Math.round((s.y-o)/n)*n+o-s.y,t=Math.round(t),n=Math.round(n),0==t&&0==n||this.moveBy(t,n)}}},e.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var o=t.x-n.width,s=t.x;else o=t.x,s=t.x+n.width;return new e.utils.Rect(t.y,t.y+n.height,o,s)},e.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,t=0;n=this.inputList[t];t++)n.markDirty()},e.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},e.BlockSvg.prototype.updateCollapsed_=function(){for(var c,t=this.isCollapsed(),n=e.constants.COLLAPSED_INPUT_NAME,o=e.constants.COLLAPSED_FIELD_NAME,s=0;c=this.inputList[s];s++)c.name!=n&&c.setVisible(!t);if(t){for(c=this.getIcons(),s=0;t=c[s];s++)t.setVisible(!1);s=this.toString(e.COLLAPSE_CHARS),(c=this.getField(o))?c.setValue(s):(c=this.getInput(n)||this.appendDummyInput(n)).appendField(new e.FieldLabel(s),o)}else this.updateDisabled(),this.removeInput(n)},e.BlockSvg.prototype.tab=function(t,n){var o=new e.TabNavigateCursor;o.setCurNode(e.ASTNode.createFieldNode(t)),t=o.getCurNode(),n?o.next():o.prev(),(n=o.getCurNode())&&n!==t&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},e.BlockSvg.prototype.onMouseDown_=function(t){var n=this.workspace&&this.workspace.getGesture(t);n&&n.handleBlockStart(t,this)},e.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},e.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},e.BlockSvg.prototype.showContextMenu=function(t){var n=this.generateContextMenu();n&&n.length&&(e.ContextMenu.show(t,n,this.RTL),e.ContextMenu.currentBlock=this)},e.BlockSvg.prototype.moveConnections=function(t,n){if(this.rendered){for(var o=this.getConnections_(!1),s=0;s<o.length;s++)o[s].moveBy(t,n);for(o=this.getIcons(),s=0;s<o.length;s++)o[s].computeIconLocation();for(s=0;s<this.childBlocks_.length;s++)this.childBlocks_[s].moveConnections(t,n)}},e.BlockSvg.prototype.setDragging=function(t){if(t){var n=this.getSvgRoot();n.translate_="",n.skew_="",e.draggingConnections=e.draggingConnections.concat(this.getConnections_(!0)),e.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else e.draggingConnections=[],e.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(t)},e.BlockSvg.prototype.setMovable=function(t){e.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},e.BlockSvg.prototype.setEditable=function(t){e.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var n=0;n<t.length;n++)t[n].updateEditable()},e.BlockSvg.prototype.setShadow=function(t){e.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},e.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},e.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.BlockSvg.prototype.dispose=function(t,n){if(this.workspace){e.Tooltip.dispose(),e.Tooltip.unbindMouseEvents(this.pathObject.svgPath),e.utils.dom.startTextWidthCache();var o=this.workspace;if(e.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),e.ContextMenu.currentBlock==this&&e.ContextMenu.hide(),n&&this.rendered&&(this.unplug(t),e.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]);this.warningTextDb_=null}for(n=this.getIcons(),s=0;s<n.length;s++)n[s].dispose();e.BlockSvg.superClass_.dispose.call(this,!!t),e.utils.dom.removeNode(this.svgGroup_),o.resizeContents(),this.svgGroup_=null,e.utils.dom.stopTextWidthCache()}},e.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var t=e.Xml.blockToDom(this,!0);e.Xml.deleteNext(t);var n=this.getRelativeToSurfaceXY();return t.setAttribute("x",this.RTL?-n.x:n.x),t.setAttribute("y",n.y),{xml:t,source:this.workspace,typeCounts:e.utils.getBlockTypeCounts(this,!0)}},e.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),n=0;n<t.length;n++)t[n].applyColour();for(t=0;n=this.inputList[t];t++)for(var s,o=0;s=n.fieldRow[o];o++)s.applyColour()},e.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var o,n=0;o=t[n];n++)o.rendered&&o.updateDisabled()},e.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},e.BlockSvg.prototype.setCommentText=function(t){if(!e.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(e.BlockSvg.superClass_.setCommentText.call(this,t),!!this.commentIcon_==(t=null!=t)?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},e.BlockSvg.prototype.setWarningText=function(t,n){if(!e.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var o=n||"";if(o)this.warningTextDb_[o]&&(clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o]);else for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]),delete this.warningTextDb_[s];if(this.workspace.isDragging()){var c=this;this.warningTextDb_[o]=setTimeout(function(){c.workspace&&(delete c.warningTextDb_[o],c.setWarningText(t,o))},100)}else{if(this.isInFlyout&&(t=null),n=!1,"string"==typeof t){s=this.getSurroundParent();for(var v=null;s;)s.isCollapsed()&&(v=s),s=s.getSurroundParent();v&&v.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new e.Warning(this),n=!0),this.warning.setText(t,o)}else this.warning&&!o?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",o),(s=this.warning.getText())||this.warning.dispose(),n=n!=s);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},e.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},e.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},e.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},e.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},e.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},e.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},e.BlockSvg.prototype.setColour=function(t){e.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},e.BlockSvg.prototype.setStyle=function(t){var n=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!n)throw Error("Invalid style name: "+t);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},e.BlockSvg.prototype.bringToFront=function(){var t=this;do{var n=t.getSvgRoot(),o=n.parentNode,s=o.childNodes;s[s.length-1]!==n&&o.appendChild(n),t=t.getParent()}while(t)},e.BlockSvg.prototype.setPreviousStatement=function(t,n){e.BlockSvg.superClass_.setPreviousStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setNextStatement=function(t,n){e.BlockSvg.superClass_.setNextStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setOutput=function(t,n){e.BlockSvg.superClass_.setOutput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setInputsInline=function(t){e.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.removeInput=function(t,n){return t=e.BlockSvg.superClass_.removeInput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.moveNumberedInputBefore=function(t,n){e.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.appendInput_=function(t,n){return t=e.BlockSvg.superClass_.appendInput_.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(t)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.setTracking(t),(o=o.targetBlock())&&o.setConnectionTracking(t))}},e.BlockSvg.prototype.getConnections_=function(t){var n=[];if((t||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var o;o=this.inputList[t];t++)o.connection&&n.push(o.connection)}return n},e.BlockSvg.prototype.lastConnectionInStack=function(t){return e.BlockSvg.superClass_.lastConnectionInStack.call(this,t)},e.BlockSvg.prototype.getMatchingConnection=function(t,n){return e.BlockSvg.superClass_.getMatchingConnection.call(this,t,n)},e.BlockSvg.prototype.makeConnection_=function(t){return new e.RenderedConnection(this,t)},e.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var s,n=this.getConnections_(!1),o=0;s=n[o];o++){s.isConnected()&&s.isSuperior()&&s.targetBlock().bumpNeighbours();for(var R,c=s.neighbours(e.SNAP_RADIUS),v=0;R=c[v];v++)s.isConnected()&&R.isConnected()||R.getSourceBlock().getRootBlock()!=t&&(s.isSuperior()?R.bumpAwayFrom(s):s.bumpAwayFrom(R))}}},e.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,n=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(n),t.snapToGrid(),e.Events.setGroup(!1)},e.BUMP_DELAY/2),setTimeout(function(){e.Events.setGroup(n),t.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)},e.BlockSvg.prototype.positionNearConnection=function(t,n){t.type!=e.connectionTypes.NEXT_STATEMENT&&t.type!=e.connectionTypes.INPUT_VALUE||this.moveBy(n.x-t.x,n.y-t.y)},e.BlockSvg.prototype.getParent=function(){return e.BlockSvg.superClass_.getParent.call(this)},e.BlockSvg.prototype.getRootBlock=function(){return e.BlockSvg.superClass_.getRootBlock.call(this)},e.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,e.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}e.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},e.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.moveToOffset(t),o.isConnected()&&o.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},e.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},e.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},e.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,n=this.width,o=this.getNextBlock();if(o){o=o.getHeightWidth();var s=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=o.height-s,n=Math.max(n,o.width)}return{height:t,width:n}},e.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},e.BlockSvg.prototype.highlightShapeForInput=function(t,n){this.pathObject.updateShapeForInputHighlight(t,n)},e.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},e.ConnectionDB.prototype.addConnection=function(t,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,t)},e.ConnectionDB.prototype.findIndexOfConnection_=function(t,n){if(!this.connections_.length)return-1;var o=this.calculateIndexForYPos_(n);if(o>=this.connections_.length)return-1;n=t.y;for(var s=o;0<=s&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s--}for(s=o;s<this.connections_.length&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s++}return-1},e.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var n=0,o=this.connections_.length;n<o;){var s=Math.floor((n+o)/2);if(this.connections_[s].y<t)n=s+1;else{if(!(this.connections_[s].y>t)){n=s;break}o=s}}return n},e.ConnectionDB.prototype.removeConnection=function(t,n){if(-1==(t=this.findIndexOfConnection_(t,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},e.ConnectionDB.prototype.getNeighbours=function(t,n){function o(V){var G=c-s[V].x,Z=v-s[V].y;return Math.sqrt(G*G+Z*Z)<=n&&H.push(s[V]),Z<n}var s=this.connections_,c=t.x,v=t.y;t=0;for(var R=s.length-2,O=R;t<O;)s[O].y<v?t=O:R=O,O=Math.floor((t+R)/2);var H=[];if(R=t=O,s.length){for(;0<=t&&o(t);)t--;do{R++}while(R<s.length&&o(R))}return H},e.ConnectionDB.prototype.isInYRange_=function(t,n,o){return Math.abs(this.connections_[t].y-n)<=o},e.ConnectionDB.prototype.searchForClosest=function(t,n,o){if(!this.connections_.length)return{connection:null,radius:n};var s=t.y,c=t.x;t.x=c+o.x,t.y=s+o.y;var v=this.calculateIndexForYPos_(t.y);o=null;for(var O,R=n,H=v-1;0<=H&&this.isInYRange_(H,t.y,n);)this.connectionChecker_.canConnect(t,O=this.connections_[H],!0,R)&&(o=O,R=O.distanceFrom(t)),H--;for(;v<this.connections_.length&&this.isInYRange_(v,t.y,n);)this.connectionChecker_.canConnect(t,O=this.connections_[v],!0,R)&&(o=O,R=O.distanceFrom(t)),v++;return t.x=c,t.y=s,{connection:o,radius:R}},e.ConnectionDB.init=function(t){var n=[];return n[e.connectionTypes.INPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.OUTPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.NEXT_STATEMENT]=new e.ConnectionDB(t),n[e.connectionTypes.PREVIOUS_STATEMENT]=new e.ConnectionDB(t),n},e.Events.ThemeChange=function(t,n){e.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=t},e.utils.object.inherits(e.Events.ThemeChange,e.Events.UiBase),e.Events.ThemeChange.prototype.type=e.Events.THEME_CHANGE,e.Events.ThemeChange.prototype.toJson=function(){var t=e.Events.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},e.Events.ThemeChange.prototype.fromJson=function(t){e.Events.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},e.registry.register(e.registry.Type.EVENT,e.Events.THEME_CHANGE,e.Events.ThemeChange),e.Events.ViewportChange=function(t,n,o,s,c){e.Events.ViewportChange.superClass_.constructor.call(this,s),this.viewTop=t,this.viewLeft=n,this.scale=o,this.oldScale=c},e.utils.object.inherits(e.Events.ViewportChange,e.Events.UiBase),e.Events.ViewportChange.prototype.type=e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange.prototype.toJson=function(){var t=e.Events.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},e.Events.ViewportChange.prototype.fromJson=function(t){e.Events.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},e.registry.register(e.registry.Type.EVENT,e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange),e.IMetricsManager=function(){},e.MetricsManager=function(t){this.workspace_=t},e.MetricsManager.prototype.getDimensionsPx_=function(t){var n=0,o=0;return t&&(n=t.getWidth(),o=t.getHeight()),new e.utils.Size(n,o)},e.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},e.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),s=!!this.workspace_.getToolbox(),c=!!this.workspace_.getFlyout(!0),v=s?n.position:o.position,R=v==e.utils.toolbox.Position.LEFT;return v=v==e.utils.toolbox.Position.TOP,s&&R?t=n.width:c&&R&&(t=o.width),R=0,s&&v?R=n.height:c&&v&&(R=o.height),{top:R,left:t}},e.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var n=this.getSvgMetrics(),o=this.getToolboxMetrics(),s=this.getFlyoutMetrics(!0),c=this.workspace_.getToolbox()?o.position:s.position;return this.workspace_.getToolbox()?c==e.utils.toolbox.Position.TOP||c==e.utils.toolbox.Position.BOTTOM?n.height-=o.height:(c==e.utils.toolbox.Position.LEFT||c==e.utils.toolbox.Position.RIGHT)&&(n.width-=o.width):this.workspace_.getFlyout(!0)&&(c==e.utils.toolbox.Position.TOP||c==e.utils.toolbox.Position.BOTTOM?n.height-=s.height:(c==e.utils.toolbox.Position.LEFT||c==e.utils.toolbox.Position.RIGHT)&&(n.width-=s.width)),{height:n.height/t,width:n.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},e.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*t,width:(n.right-n.left)*t,top:n.top*t,left:n.left*t}},e.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},e.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),o=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var s={};return o||(s.top=t.top,s.bottom=t.top+t.height),n||(s.left=t.left,s.right=t.left+t.width),s},e.MetricsManager.prototype.getPaddedContent_=function(t,n){var o=n.top+n.height,s=n.left+n.width,c=t.width,v=c/2,R=(t=t.height)/2;return{top:Math.min(n.top-R,o-t),bottom:Math.max(o+R,n.top+t),left:Math.min(n.left-v,s-c),right:Math.max(s+v,n.left+c)}},e.MetricsManager.prototype.getScrollMetrics=function(t,n,o){t=t?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var s=o||this.getContentMetrics();o=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,s);var c=void 0!==o.left?o.left:n.left;return{top:(s=void 0!==o.top?o.top:n.top)/t,left:c/t,width:((void 0!==o.right?o.right:n.right)-c)/t,height:((void 0!==o.bottom?o.bottom:n.bottom)-s)/t}},e.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},e.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),o=this.getSvgMetrics(),s=this.getAbsoluteMetrics(),c=this.getViewMetrics(),v=this.getContentMetrics(),R=this.getScrollMetrics(!1,c,v);return{contentHeight:v.height,contentWidth:v.width,contentTop:v.top,contentLeft:v.left,scrollHeight:R.height,scrollWidth:R.width,scrollTop:R.top,scrollLeft:R.left,viewHeight:c.height,viewWidth:c.width,viewTop:c.top,viewLeft:c.left,absoluteTop:s.top,absoluteLeft:s.left,svgHeight:o.height,svgWidth:o.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:n.width,flyoutHeight:n.height}},e.registry.register(e.registry.Type.METRICS_MANAGER,e.registry.DEFAULT,e.MetricsManager),e.FlyoutMetricsManager=function(t,n){this.flyout_=n,e.FlyoutMetricsManager.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.FlyoutMetricsManager,e.MetricsManager),e.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(n){t={height:0,y:0,width:0,x:0}}return t},e.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var n=this.getBoundingBox_();return{height:n.height*(t=t?1:this.workspace_.scale),width:n.width*t,top:n.y*t,left:n.x*t}},e.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,n,o){return{height:((n=o||this.getContentMetrics()).height+2*(o=this.flyout_.MARGIN*this.workspace_.scale))/(t=t?this.workspace_.scale:1),width:(n.width+n.left+o)/t,top:0,left:0}},e.ThemeManager=function(t,n){this.workspace_=t,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},e.ThemeManager.prototype.getTheme=function(){return this.theme_},e.ThemeManager.prototype.setTheme=function(t){var o,n=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(n&&e.utils.dom.removeClass(t,n.getClassName()),e.utils.dom.addClass(t,this.theme_.getClassName())),n=0;t=this.subscribedWorkspaces_[n];n++)t.refreshTheme();for(n=0,t=Object.keys(this.componentDB_);o=t[n];n++)for(var c,s=0;c=this.componentDB_[o][s];s++){var v=c.element;c=c.propertyName;var R=this.theme_&&this.theme_.getComponentStyle(o);v.style[c]=R||""}e.hideChaff()},e.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},e.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},e.ThemeManager.prototype.subscribe=function(t,n,o){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:t,propertyName:o}),n=this.theme_&&this.theme_.getComponentStyle(n),t.style[o]=n||""},e.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var s,n=Object.keys(this.componentDB_),o=0;s=n[o];o++){for(var c=this.componentDB_[s],v=c.length-1;0<=v;v--)c[v].element===t&&c.splice(v,1);this.componentDB_[s].length||delete this.componentDB_[s]}},e.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},e.TouchGesture=function(t,n){e.TouchGesture.superClass_.constructor.call(this,t,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},e.utils.object.inherits(e.TouchGesture,e.Gesture),e.TouchGesture.ZOOM_IN_MULTIPLIER=5,e.TouchGesture.ZOOM_OUT_MULTIPLIER=6,e.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,e.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&e.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=e.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&e.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&e.longStop_())},e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(e.Touch.isTouchEvent(t)&&this.handleTouchMove(t),e.longStop_()):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handleUp=function(t){e.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},e.TouchGesture.prototype.dispose=function(){e.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&e.browserEvents.unbind(this.onStartWrapper_)},e.TouchGesture.prototype.handleTouchStart=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,t.preventDefault())},e.TouchGesture.prototype.handleTouchMove=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(t):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handlePinch_=function(t){var n=Object.keys(this.cachedPoints_);if(n=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var o=n-this.previousScale_;o=0<o?o*e.TouchGesture.ZOOM_IN_MULTIPLIER:o*e.TouchGesture.ZOOM_OUT_MULTIPLIER;var s=this.startWorkspace_,c=e.utils.mouseToSvg(t,s.getParentSvg(),s.getInverseScreenCTM());s.zoom(c.x,c.y,o)}this.previousScale_=n,t.preventDefault()},e.TouchGesture.prototype.handleTouchEnd=function(t){t=e.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new e.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},e.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},e.WorkspaceAudio.prototype.lastSound_=null,e.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},e.WorkspaceAudio.prototype.load=function(t,n){if(t.length){try{var o=new e.utils.global.Audio}catch(O){return}for(var s,c=0;c<t.length;c++){var v=t[c],R=v.match(/\.(\w+)$/);if(R&&o.canPlayType("audio/"+R[1])){s=new e.utils.global.Audio(v);break}}s&&s.play&&(this.SOUNDS_[n]=s)}},e.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var n=this.SOUNDS_[t];n.volume=.01;var o=n.play();if(void 0!==o?o.then(n.pause).catch(function(){}):n.pause(),e.utils.userAgent.IPAD||e.utils.userAgent.IPHONE)break}},e.WorkspaceAudio.prototype.play=function(t,n){var o=this.SOUNDS_[t];o?(t=new Date,null!=this.lastSound_&&t-this.lastSound_<e.SOUND_LIMIT||(this.lastSound_=t,(o=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID?o:o.cloneNode()).volume=void 0===n?1:n,o.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,n)},e.WorkspaceSvg=function(t,n,o){e.WorkspaceSvg.superClass_.constructor.call(this,t),this.metricsManager_=new(e.registry.getClassFromOptions(e.registry.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||e.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new e.ComponentManager,this.connectionDBList=e.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),o&&(this.workspaceDragSurface_=o),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&e.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new e.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new e.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new e.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),e.Variables&&e.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_CATEGORY_NAME,e.Variables.flyoutCategory),e.VariablesDynamic&&e.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_DYNAMIC_CATEGORY_NAME,e.VariablesDynamic.flyoutCategory),e.Procedures&&e.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(e.PROCEDURE_CATEGORY_NAME,e.Procedures.flyoutCategory),this.addChangeListener(e.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new e.ThemeManager(this,this.options.theme||e.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=e.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new e.utils.Size(0,0)},e.utils.object.inherits(e.WorkspaceSvg,e.Workspace),e.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,e.WorkspaceSvg.prototype.rendered=!0,e.WorkspaceSvg.prototype.isVisible_=!0,e.WorkspaceSvg.prototype.isFlyout=!1,e.WorkspaceSvg.prototype.isMutator=!1,e.WorkspaceSvg.prototype.resizesEnabled_=!0,e.WorkspaceSvg.prototype.scrollX=0,e.WorkspaceSvg.prototype.scrollY=0,e.WorkspaceSvg.prototype.startScrollX=0,e.WorkspaceSvg.prototype.startScrollY=0,e.WorkspaceSvg.prototype.dragDeltaXY_=null,e.WorkspaceSvg.prototype.scale=1,e.WorkspaceSvg.prototype.oldScale_=1,e.WorkspaceSvg.prototype.oldTop_=0,e.WorkspaceSvg.prototype.oldLeft_=0,e.WorkspaceSvg.prototype.trashcan=null,e.WorkspaceSvg.prototype.scrollbar=null,e.WorkspaceSvg.prototype.flyout_=null,e.WorkspaceSvg.prototype.toolbox_=null,e.WorkspaceSvg.prototype.currentGesture_=null,e.WorkspaceSvg.prototype.blockDragSurface_=null,e.WorkspaceSvg.prototype.workspaceDragSurface_=null,e.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,e.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,e.WorkspaceSvg.prototype.injectionDiv_=null,e.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,e.WorkspaceSvg.prototype.targetWorkspace=null,e.WorkspaceSvg.prototype.inverseScreenCTM_=null,e.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,e.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},e.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},e.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},e.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},e.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},e.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},e.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},e.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},e.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},e.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},e.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},e.WorkspaceSvg.prototype.setTheme=function(t){t||(t=e.Themes.Classic),this.themeManager_.setTheme(t)},e.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new(e.Events.get(e.Events.THEME_CHANGE))(this.getTheme().name,this.id);e.Events.fire(t)},e.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var o,n=0;o=t[n];n++){var s=o.getStyleName();s&&(o.setStyle(s),o.mutator&&o.mutator.updateBlockStyle())}},e.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},e.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},e.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},e.WorkspaceSvg.prototype.getSvgXY=function(t){var n=0,o=0,s=1;(e.utils.dom.containsNode(this.getCanvas(),t)||e.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(s=this.scale);do{var c=e.utils.getRelativeXY(t);(t==this.getCanvas()||t==this.getBubbleCanvas())&&(s=1),n+=c.x*s,o+=c.y*s,t=t.parentNode}while(t&&t!=this.getParentSvg());return new e.utils.Coordinate(n,o)},e.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new e.utils.Size(t.width,t.height)},e.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return e.utils.getInjectionDivXY_(this.getCanvas())},e.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},e.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},e.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(e.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(e.registry.getClassFromOptions(e.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=e.registry.getClassFromOptions(e.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},e.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),e.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&e.utils.dom.removeNode(t.parentNode)}this.resizeHandlerWrapper_&&(e.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},e.WorkspaceSvg.prototype.newBlock=function(t,n){return new e.BlockSvg(this,t,n)},e.WorkspaceSvg.prototype.addTrashcan=function(){if(!e.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new e.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.addZoomControls=function(){if(!e.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new e.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},e.WorkspaceSvg.prototype.addFlyout=function(t){var n=new e.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},e.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},e.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},e.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},e.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},e.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var c,t=this.componentManager_.getComponents(e.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),o=[],s=0;c=t[s];s++)c.position(n,o),(c=c.getBoundingRectangle())&&o.push(c);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},e.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=e.utils.getDocumentScroll();e.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},e.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,n){var o=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,o.cachedWidth_=t),n&&(this.cachedParentSvgSize_.height=n,o.cachedHeight_=n)},e.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},e.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},e.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(e.Events.isEnabled()){var t=this.scale,n=-this.scrollY,o=-this.scrollX;if(!(t==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(o-this.oldLeft_))){var s=new(e.Events.get(e.Events.VIEWPORT_CHANGE))(n,o,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=n,this.oldLeft_=o,e.Events.fire(s)}}},e.WorkspaceSvg.prototype.translate=function(t,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,n);else{var o="translate("+t+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",o),this.svgBubbleCanvas_.setAttribute("transform",o)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,n,this.scale),this.grid_&&this.grid_.moveTo(t,n),this.maybeFireViewportChangeEvent()},e.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",t="translate("+t.x+","+t.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",t)}},e.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),o=parseInt(this.getParentSvg().getAttribute("height"),10),s=e.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,n,o,this.scale),this.workspaceDragSurface_.translateSurface(s.x,s.y)}},e.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},e.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},e.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var n=(t=this.getAllBlocks(!1)).length-1;0<=n;n--)t[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else e.hideChaff(!0)},e.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),n=0;n<t.length;n++)t[n].render(!1);this.markerManager_.updateMarkers()},e.WorkspaceSvg.prototype.highlightBlock=function(t,n){if(void 0===n){for(var s,o=0;s=this.highlightedBlocks_[o];o++)s.setHighlighted(!1);this.highlightedBlocks_.length=0}(s=t?this.getBlockById(t):null)&&((t=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(s)&&this.highlightedBlocks_.push(s):e.utils.arrayRemove(this.highlightedBlocks_,s),s.setHighlighted(t))},e.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},e.WorkspaceSvg.prototype.pasteBlock_=function(t){e.Events.disable();try{var n=e.Xml.domToBlock(t,this),o=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);if(!isNaN(o)&&!isNaN(s)){this.RTL&&(o=-o);do{t=!1;for(var R,c=this.getAllBlocks(!1),v=0;R=c[v];v++){var O=R.getRelativeToSurfaceXY();if(1>=Math.abs(o-O.x)&&1>=Math.abs(s-O.y)){t=!0;break}}if(!t){var V,H=n.getConnections_(!1);for(v=0;V=H[v];v++)if(V.closest(e.SNAP_RADIUS,new e.utils.Coordinate(o,s)).connection){t=!0;break}}t&&(o=this.RTL?o-e.SNAP_RADIUS:o+e.SNAP_RADIUS,s+=2*e.SNAP_RADIUS)}while(t);n.moveBy(o,s)}}finally{e.Events.enable()}e.Events.isEnabled()&&!n.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n)),n.select()},e.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){e.Events.disable();try{var n=e.WorkspaceCommentSvg.fromXml(t,this),o=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);isNaN(o)||isNaN(s)||(this.RTL&&(o=-o),n.moveBy(o+50,s+50))}finally{e.Events.enable()}e.Events.isEnabled()&&e.WorkspaceComment.fireCreateEvent(n),n.select()},e.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},e.WorkspaceSvg.prototype.renameVariableById=function(t,n){e.WorkspaceSvg.superClass_.renameVariableById.call(this,t,n),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.deleteVariableById=function(t){e.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.createVariable=function(t,n,o){return t=e.WorkspaceSvg.superClass_.createVariable.call(this,t,n,o),this.refreshToolboxSelection(),t},e.WorkspaceSvg.prototype.recordDeleteAreas=function(){e.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},e.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(e.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var o,n=0;o=t[n];n++){var s=o.getClientRect();s&&this.dragTargetAreas_.push({component:o,clientRect:s})}},e.WorkspaceSvg.prototype.getDragTarget=function(t){for(var o,n=0;o=this.dragTargetAreas_[n];n++)if(o.clientRect.contains(t.clientX,t.clientY))return o.component;return null},e.WorkspaceSvg.prototype.onMouseDown_=function(t){var n=this.getGesture(t);n&&n.handleWsStart(t,this)},e.WorkspaceSvg.prototype.startDrag=function(t,n){(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=e.utils.Coordinate.difference(n,t)},e.WorkspaceSvg.prototype.moveDrag=function(t){return(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,e.utils.Coordinate.sum(this.dragDeltaXY_,t)},e.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},e.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},e.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},e.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},e.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},e.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(e.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||o){var s=e.utils.getScrollDeltaPixels(t);!n||!t.ctrlKey&&o?(n=this.scrollX-s.x,o=this.scrollY-s.y,t.shiftKey&&!s.x&&(n=this.scrollX-s.y,o=this.scrollY),this.scroll(n,o)):(s=-s.y/50,n=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,s)),t.preventDefault()}}},e.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new e.utils.Rect(0,0,0,0);for(var n=t[0].getBoundingRectangle(),o=1;o<t.length;o++){var s=t[o];s.isInsertionMarker&&s.isInsertionMarker()||((s=s.getBoundingRectangle()).top<n.top&&(n.top=s.top),s.bottom>n.bottom&&(n.bottom=s.bottom),s.left<n.left&&(n.left=s.left),s.right>n.right&&(n.right=s.right))}return n},e.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),e.Events.setGroup(!0);for(var s,t=this.getTopBlocks(!0),n=0,o=0;s=t[o];o++)if(s.isMovable()){var c=s.getRelativeToSurfaceXY();s.moveBy(-c.x,n-c.y),s.snapToGrid(),n=s.getRelativeToSurfaceXY().y+s.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}e.Events.setGroup(!1),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var n=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,t),e.ContextMenu.show(t,n,this.RTL)}},e.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=e.utils.toolbox.convertToolboxDefToJson(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.utils.toolbox.hasCategories(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},e.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(e.mainWorkspace=this,this.setBrowserFocus())},e.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},e.WorkspaceSvg.prototype.zoom=function(t,n,o){o=Math.pow(this.options.zoomOptions.scaleSpeed,o);var s=this.scale*o;if(this.scale!=s){s>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale/this.scale:s<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale/this.scale);var c=this.getCanvas().getCTM(),v=this.getParentSvg().createSVGPoint();v.x=t,v.y=n,v=v.matrixTransform(c.inverse()),c=c.translate((t=v.x)*(1-o),(n=v.y)*(1-o)).scale(o),this.scrollX=c.e,this.scrollY=c.f,this.setScale(s)}},e.WorkspaceSvg.prototype.zoomCenter=function(t){var n=this.getMetrics();if(this.flyout_){var o=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else o=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(o,n,t)},e.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),n=t.viewWidth;t=t.viewHeight;var o=this.getBlocksBoundingBox(),s=o.right-o.left;if(o=o.bottom-o.top,s){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),o+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),s+=this.flyout_.getWidth()/this.scale)),n/=s,t/=o,e.Events.disable();try{this.setScale(Math.min(n,t)),this.scrollCenter()}finally{e.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.beginCanvasTransition=function(){e.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.endCanvasTransition=function(){e.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),n=(t.scrollWidth-t.viewWidth)/2,o=(t.scrollHeight-t.viewHeight)/2;this.scroll(n=-n-t.scrollLeft,o=-o-t.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var n=t.getRelativeToSurfaceXY(),o=t.getHeightWidth(),s=this.scale;t=(n.x+(this.RTL?-1:1)*o.width/2)*s,n=(n.y+o.height/2)*s,o=this.getMetrics(),this.scroll(-(t-o.viewWidth/2),-(n-o.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,e.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},e.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},e.WorkspaceSvg.prototype.scroll=function(t,n){e.hideChaff(!0);var o=this.getMetrics();t=Math.min(t,-o.scrollLeft),n=Math.min(n,-o.scrollTop);var s=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);t=Math.max(t,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),n=Math.max(n,-s),this.scrollX=t,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(t+o.scrollLeft),-(n+o.scrollTop),!1),this.translate(t+=o.absoluteLeft,n+=o.absoluteTop)},e.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var n=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*t.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},e.WorkspaceSvg.prototype.getBlockById=function(t){return e.WorkspaceSvg.superClass_.getBlockById.call(this,t)},e.WorkspaceSvg.prototype.getTopBlocks=function(t){return e.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},e.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},e.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},e.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopComment.call(this,t)},e.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},e.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},e.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){e.utils.arrayRemove(this.topBoundedElements_,t)},e.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},e.WorkspaceSvg.prototype.setResizesEnabled=function(t){var n=!this.resizesEnabled_&&t;this.resizesEnabled_=t,n&&this.resizeContents()},e.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),e.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.registerButtonCallback=function(t,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=n},e.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},e.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},e.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=n},e.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},e.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},e.WorkspaceSvg.prototype.getGesture=function(t){var n="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,o=this.currentGesture_;return o?n&&o.hasStarted()?(console.warn("Tried to start the same gesture twice."),o.cancel(),null):o:n?this.currentGesture_=new e.TouchGesture(t,this):null},e.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},e.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},e.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},e.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},e.inject=function(t,n){if(e.checkBlockColourConstants(),"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!e.utils.dom.containsNode(document,t))throw Error("Error: container is not in current document.");n=new e.Options(n||{});var o=document.createElement("div");o.className="injectionDiv",o.tabIndex=0,e.utils.aria.setState(o,e.utils.aria.State.LABEL,e.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(o),t=e.createDom_(o,n);var s=new e.BlockDragSurfaceSvg(o),c=new e.WorkspaceDragSurfaceSvg(o),v=e.createMainWorkspace_(t,n,s,c);return e.init_(v),e.mainWorkspace=v,e.svgResize(v),o.addEventListener("focusin",function(){e.mainWorkspace=v}),v},e.createDom_=function(t,n){t.setAttribute("dir","LTR"),e.Css.inject(n.hasCss,n.pathToMedia),t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var o=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),s=String(Math.random()).substring(2);return n.gridPattern=e.Grid.createDom(s,n.gridOptions,o),t},e.createMainWorkspace_=function(t,n,o,s){return n.parentWorkspace=null,(n=new e.WorkspaceSvg(n,o,s)).scale=(o=n.options).zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground")),e.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),e.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!o.hasCategories&&o.languageTree&&(s=n.addFlyout(e.utils.Svg.SVG),e.utils.dom.insertAfter(s,t)),o.hasTrashcan&&n.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(e.bumpIntoBoundsHandler_(n)),e.svgResize(n),e.WidgetDiv.createDom(),e.DropDownDiv.createDom(),e.Tooltip.createDom(),n},e.extractObjectFromEvent_=function(t,n){var o=null;switch(n.type){case e.Events.BLOCK_CREATE:case e.Events.BLOCK_MOVE:(o=t.getBlockById(n.blockId))&&(o=o.getRootBlock());break;case e.Events.COMMENT_CREATE:case e.Events.COMMENT_MOVE:o=t.getCommentById(n.commentId)}return o},e.bumpTopObjectsIntoBounds_=function(t){var n=t.getMetricsManager();if(n.hasFixedEdges()&&!t.isDragging()){n=n.getScrollMetrics(!0);for(var c,o=t.getTopBoundedElements(),s=0;c=o[s];s++)e.bumpObjectIntoBounds_(t,n,c)}},e.bumpIntoBoundsHandler_=function(t){return function(n){var o=t.getMetricsManager();if(o.hasFixedEdges()&&!t.isDragging())if(-1!==e.Events.BUMP_EVENTS.indexOf(n.type)){o=o.getScrollMetrics(!0);var s=e.extractObjectFromEvent_(t,n);if(s){var c=e.Events.getGroup();e.Events.setGroup(n.group),e.bumpObjectIntoBounds_(t,o,s)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==c&&e.Events.setGroup(c)}}else n.type===e.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&e.bumpTopObjectsIntoBounds_(t)}},e.bumpObjectIntoBounds_=function(t,n,o){var s=o.getBoundingRectangle(),c=s.right-s.left,v=e.utils.math.clamp(n.top,s.top,n.top+n.height-(s.bottom-s.top))-s.top,R=n.left;return n=n.left+n.width-c,t.RTL?R=Math.min(n,R):n=Math.max(R,n),!(!(t=e.utils.math.clamp(R,s.left,n)-s.left)&&!v||(o.moveBy(t,v),0))},e.init_=function(t){var n=t.options,o=t.getParentSvg();if(e.browserEvents.conditionalBind(o.parentNode,"contextmenu",null,function(c){e.utils.isTargetInput(c)||c.preventDefault()}),o=e.browserEvents.conditionalBind(window,"resize",null,function(){e.hideChaff(!0),e.svgResize(t),e.bumpTopObjectsIntoBounds_(t)}),t.setResizeHandlerWrapper(o),e.inject.bindDocumentEvents_(),n.languageTree){o=t.getToolbox();var s=t.getFlyout(!0);o?o.init():s&&(s.init(t),s.show(n.languageTree),"function"==typeof s.scrollToStart&&s.scrollToStart())}n.hasTrashcan&&t.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&t.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(t.scrollbar=new e.ScrollbarPair(t,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),n.hasSounds&&e.inject.loadSounds_(n.pathToMedia,t)},e.inject.bindDocumentEvents_=function(){e.documentEventsBound_||(e.browserEvents.conditionalBind(document,"scroll",null,function(){for(var o,t=e.Workspace.getAll(),n=0;o=t[n];n++)o.updateInverseScreenCTM&&o.updateInverseScreenCTM()}),e.browserEvents.conditionalBind(document,"keydown",null,e.onKeyDown),e.browserEvents.bind(document,"touchend",null,e.longStop_),e.browserEvents.bind(document,"touchcancel",null,e.longStop_),e.utils.userAgent.IPAD&&e.browserEvents.conditionalBind(window,"orientationchange",document,function(){e.svgResize(e.getMainWorkspace())})),e.documentEventsBound_=!0},e.inject.loadSounds_=function(t,n){var o=n.getAudioManager();o.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),o.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),o.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var s=[];t=function(){for(;s.length;)e.browserEvents.unbind(s.pop());o.preload()},s.push(e.browserEvents.conditionalBind(document,"mousemove",null,t,!0)),s.push(e.browserEvents.conditionalBind(document,"touchstart",null,t,!0))},e.Names=function(t,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),n=0;n<t.length;n++)this.reservedDict_[t[n]]=!0;this.reset()},e.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",e.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},e.Names.prototype.setVariableMap=function(t){this.variableMap_=t},e.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},e.Names.prototype.populateVariables=function(t){t=e.Variables.allUsedVarModels(t);for(var n=0;n<t.length;n++)this.getName(t[n].getId(),e.VARIABLE_CATEGORY_NAME)},e.Names.prototype.populateProcedures=function(t){t=(t=e.Procedures.allProcedures(t))[0].concat(t[1]);for(var n=0;n<t.length;n++)this.getName(t[n][0],e.PROCEDURE_CATEGORY_NAME)},e.Names.prototype.getName=function(t,n){var o=t;n==e.VARIABLE_CATEGORY_NAME&&(t=this.getNameForUserVariable_(t))&&(o=t),t=o.toLowerCase();var s=n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var c=this.db_[n];return t in c?s+c[t]:(n=this.getDistinctName(o,n),c[t]=n.substr(s.length),n)},e.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},e.Names.prototype.getDistinctName=function(t,n){t=this.safeName_(t);for(var o="";this.dbReverse_[t+o]||t+o in this.reservedDict_;)o=o?o+1:2;return this.dbReverse_[t+=o]=!0,(n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+t},e.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=e.Msg.UNNAMED_KEY||"unnamed",t},e.Names.equals=function(t,n){return t.toLowerCase()==n.toLowerCase()},e.Procedures={},e.Procedures.NAME_TYPE=e.PROCEDURE_CATEGORY_NAME,e.Procedures.DEFAULT_ARG="x",e.Procedures.allProcedures=function(t){var n=t.getBlocksByType("procedures_defnoreturn",!1).map(function(o){return o.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(o){return o.getProcedureDef()}),n.sort(e.Procedures.procTupleComparator_),t.sort(e.Procedures.procTupleComparator_),[n,t]},e.Procedures.procTupleComparator_=function(t,n){return t[0].localeCompare(n[0],void 0,{sensitivity:"base"})},e.Procedures.findLegalName=function(t,n){if(n.isInFlyout)return t;for(t=t||e.Msg.UNNAMED_KEY||"unnamed";!e.Procedures.isLegalName_(t,n.workspace,n);){var o=t.match(/^(.*?)(\d+)$/);t=o?o[1]+(parseInt(o[2],10)+1):t+"2"}return t},e.Procedures.isLegalName_=function(t,n,o){return!e.Procedures.isNameUsed(t,n,o)},e.Procedures.isNameUsed=function(t,n,o){n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s]!=o&&n[s].getProcedureDef){var c=n[s].getProcedureDef();if(e.Names.equals(c[0],t))return!0}return!1},e.Procedures.rename=function(t){t=t.trim();var n=e.Procedures.findLegalName(t,this.getSourceBlock()),o=this.getValue();if(o!=t&&o!=n){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var s=0;s<t.length;s++)t[s].renameProcedure&&t[s].renameProcedure(o,n)}return n},e.Procedures.flyoutCategory=function(t){function n(v,R){for(var O=0;O<v.length;O++){var H=v[O][0],V=v[O][1],G=e.utils.xml.createElement("block");G.setAttribute("type",R),G.setAttribute("gap",16);var Z=e.utils.xml.createElement("mutation");for(Z.setAttribute("name",H),G.appendChild(Z),H=0;H<V.length;H++){var vt=e.utils.xml.createElement("arg");vt.setAttribute("name",V[H]),Z.appendChild(vt)}o.push(G)}}var o=[];if(e.Blocks.procedures_defnoreturn){var s=e.utils.xml.createElement("block");s.setAttribute("type","procedures_defnoreturn"),s.setAttribute("gap",16);var c=e.utils.xml.createElement("field");c.setAttribute("name","NAME"),c.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),s.appendChild(c),o.push(s)}return e.Blocks.procedures_defreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),s.setAttribute("gap",16),(c=e.utils.xml.createElement("field")).setAttribute("name","NAME"),c.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),s.appendChild(c),o.push(s)),e.Blocks.procedures_ifreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),s.setAttribute("gap",16),o.push(s)),o.length&&o[o.length-1].setAttribute("gap",24),n((t=e.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),n(t[1],"procedures_callreturn"),o},e.Procedures.updateMutatorFlyout_=function(t){for(var c,n=[],o=t.getBlocksByType("procedures_mutatorarg",!1),s=0;c=o[s];s++)n.push(c.getFieldValue("NAME"));o=e.utils.xml.createElement("xml"),(s=e.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(c=e.utils.xml.createElement("field")).setAttribute("name","NAME"),n=e.Variables.generateUniqueNameFromOptions(e.Procedures.DEFAULT_ARG,n),n=e.utils.xml.createTextNode(n),c.appendChild(n),s.appendChild(c),o.appendChild(s),t.updateToolbox(o)},e.Procedures.mutatorOpenListener=function(t){if(t.type==e.Events.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var n=(t=e.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(t=t.mutator.getWorkspace(),e.Procedures.updateMutatorFlyout_(t),t.addChangeListener(e.Procedures.mutatorChangeListener_))}},e.Procedures.mutatorChangeListener_=function(t){(t.type==e.Events.BLOCK_CREATE||t.type==e.Events.BLOCK_DELETE||t.type==e.Events.BLOCK_CHANGE)&&(t=e.Workspace.getById(t.workspaceId),e.Procedures.updateMutatorFlyout_(t))},e.Procedures.getCallers=function(t,n){var o=[];n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s].getProcedureCall){var c=n[s].getProcedureCall();c&&e.Names.equals(c,t)&&o.push(n[s])}return o},e.Procedures.mutateCallers=function(t){var c,n=e.Events.recordUndo,o=t.getProcedureDef()[0],s=t.mutationToDom(!0);for(t=e.Procedures.getCallers(o,t.workspace),o=0;c=t[o];o++){var v=c.mutationToDom();v=v&&e.Xml.domToText(v),c.domToMutation(s);var R=c.mutationToDom();v!=(R=R&&e.Xml.domToText(R))&&(e.Events.recordUndo=!1,e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(c,"mutation",null,v,R)),e.Events.recordUndo=n)}},e.Procedures.getDefinition=function(t,n){n=n.getAllBlocks(!1);for(var o=0;o<n.length;o++)if(n[o].getProcedureDef){var s=n[o].getProcedureDef();if(s&&e.Names.equals(s[0],t))return n[o]}return null},e.ShortcutRegistry=function(){e.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},e.ShortcutRegistry.modifierKeys={Shift:e.utils.KeyCodes.SHIFT,Control:e.utils.KeyCodes.CTRL,Alt:e.utils.KeyCodes.ALT,Meta:e.utils.KeyCodes.META},e.ShortcutRegistry.prototype.register=function(t,n){if(this.registry_[t.name]&&!n)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},e.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},e.ShortcutRegistry.prototype.addKeyMapping=function(t,n,o){t=String(t);var s=this.keyMap_[t];if(s&&!o)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+s.toString());s&&o?s.unshift(n):this.keyMap_[t]=[n]},e.ShortcutRegistry.prototype.removeKeyMapping=function(t,n,o){var s=this.keyMap_[t];if(!s&&!o)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1;var c=s.indexOf(n);return-1<c?(s.splice(c,1),0==s.length&&delete this.keyMap_[t],!0):(o||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1)},e.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var n in this.keyMap_)this.removeKeyMapping(n,t,!0)},e.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},e.ShortcutRegistry.prototype.getKeyMap=function(){return e.utils.object.deepMerge(Object.create(null),this.keyMap_)},e.ShortcutRegistry.prototype.getRegistry=function(){return e.utils.object.deepMerge(Object.create(null),this.registry_)},e.ShortcutRegistry.prototype.onKeyDown=function(t,n){var o=this.serializeKeyEvent_(n);if(!(o=this.getShortcutNamesByKeyCode(o)))return!1;for(var c,s=0;c=o[s];s++)if((!(c=this.registry_[c]).preconditionFn||c.preconditionFn(t))&&c.callback&&c.callback(t,n,c))return!0;return!1},e.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},e.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var o,n=[];for(o in this.keyMap_)-1<this.keyMap_[o].indexOf(t)&&n.push(o);return n},e.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var o,n="";for(o in e.ShortcutRegistry.modifierKeys)t.getModifierState(o)&&(""!=n&&(n+="+"),n+=o);return""!=n&&t.keyCode?n=n+"+"+t.keyCode:t.keyCode&&(n=t.keyCode.toString()),n},e.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var s,n=e.utils.object.values(e.ShortcutRegistry.modifierKeys),o=0;s=t[o];o++)if(0>n.indexOf(s))throw Error(s+" is not a valid modifier key.")},e.ShortcutRegistry.prototype.createSerializedKey=function(t,n){var o="";if(n)for(var s in this.checkModifiers_(n),e.ShortcutRegistry.modifierKeys)-1<n.indexOf(e.ShortcutRegistry.modifierKeys[s])&&(""!=o&&(o+="+"),o+=s);return""!=o&&t?o=o+"+"+t:t&&(o=t.toString()),o},new e.ShortcutRegistry,e.VariableModel=function(t,n,o,s){this.workspace=t,this.name=n,this.type=o||"",this.id_=s||e.utils.genUid(),e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(this))},e.VariableModel.prototype.getId=function(){return this.id_},e.VariableModel.compareByName=function(t,n){return t.name.localeCompare(n.name,void 0,{sensitivity:"base"})},e.Variables={},e.Variables.NAME_TYPE=e.VARIABLE_CATEGORY_NAME,e.Variables.allUsedVarModels=function(t){var n=t.getAllBlocks(!1);t=Object.create(null);for(var o=0;o<n.length;o++){var s=n[o].getVarModels();if(s)for(var c=0;c<s.length;c++){var v=s[c],R=v.getId();R&&(t[R]=v)}}for(R in n=[],t)n.push(t[R]);return n},e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},e.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var s,n=Object.create(null),o=0;s=t[o];o++){var c=s.getDeveloperVariables;if(!c&&s.getDeveloperVars&&(c=s.getDeveloperVars,e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+s.type+"')"),e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]=!0)),c)for(s=c(),c=0;c<s.length;c++)n[s[c]]=!0}return Object.keys(n)},e.Variables.flyoutCategory=function(t){var n=[],o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(s){e.Variables.createVariableButtonHandler(s.getTargetWorkspace())}),n.push(o),t=e.Variables.flyoutCategoryBlocks(t),n.concat(t)},e.Variables.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getVariablesOfType("")).length){var o=t[t.length-1];if(e.Blocks.variables_set){var s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set"),s.setAttribute("gap",e.Blocks.math_change?8:24),s.appendChild(e.Variables.generateVariableFieldDom(o)),n.push(s)}if(e.Blocks.math_change&&((s=e.utils.xml.createElement("block")).setAttribute("type","math_change"),s.setAttribute("gap",e.Blocks.variables_get?20:8),s.appendChild(e.Variables.generateVariableFieldDom(o)),o=e.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),s.appendChild(o),n.push(s)),e.Blocks.variables_get){t.sort(e.VariableModel.compareByName),o=0;for(var c;c=t[o];o++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(c)),n.push(s)}}return n},e.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",e.Variables.generateUniqueName=function(t){return e.Variables.generateUniqueNameFromOptions(e.Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},e.Variables.generateUniqueNameFromOptions=function(t,n){if(!n.length)return t;for(var o=e.Variables.VAR_LETTER_OPTIONS,s="",c=o.indexOf(t);;){for(var v=!1,R=0;R<n.length;R++)if(n[R].toLowerCase()==t){v=!0;break}if(!v)return t;++c==o.length&&(c=0,s=Number(s)+1),t=o.charAt(c)+s}},e.Variables.createVariableButtonHandler=function(t,n,o){var s=o||"",c=function(v){e.Variables.promptName(e.Msg.NEW_VARIABLE_TITLE,v,function(R){if(R){var O=e.Variables.nameUsedWithAnyType(R,t);if(O){if(O.type==s)var H=e.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",O.name);else H=(H=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",O.name).replace("%2",O.type);e.alert(H,function(){c(R)})}else t.createVariable(R,s),n&&n(R)}else n&&n(null)})};c("")},e.Variables.createVariable=e.Variables.createVariableButtonHandler,e.Variables.renameVariable=function(t,n,o){var s=function(c){var v=e.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);e.Variables.promptName(v,c,function(R){if(R){var O=e.Variables.nameUsedWithOtherType_(R,n.type,t);O?(O=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",O.name).replace("%2",O.type),e.alert(O,function(){s(R)})):(t.renameVariableById(n.getId(),R),o&&o(R))}else o&&o(null)})};s("")},e.Variables.promptName=function(t,n,o){e.prompt(t,n,function(s){s&&((s=s.replace(/[\s\xa0]+/g," ").trim())==e.Msg.RENAME_VARIABLE||s==e.Msg.NEW_VARIABLE)&&(s=null),o(s)})},e.Variables.nameUsedWithOtherType_=function(t,n,o){o=o.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var c,s=0;c=o[s];s++)if(c.name.toLowerCase()==t&&c.type!=n)return c;return null},e.Variables.nameUsedWithAnyType=function(t,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var s,o=0;s=n[o];o++)if(s.name.toLowerCase()==t)return s;return null},e.Variables.generateVariableFieldDom=function(t){var n=e.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),t=e.utils.xml.createTextNode(t.name),n.appendChild(t),n},e.Variables.getOrCreateVariablePackage=function(t,n,o,s){var c=e.Variables.getVariable(t,n,o,s);return c||(c=e.Variables.createVariable_(t,n,o,s)),c},e.Variables.getVariable=function(t,n,o,s){var c=t.getPotentialVariableMap(),v=null;if(n&&(!(v=t.getVariableById(n))&&c&&(v=c.getVariableById(n)),v))return v;if(o){if(null==s)throw Error("Tried to look up a variable by name without a type");!(v=t.getVariable(o,s))&&c&&(v=c.getVariable(o,s))}return v},e.Variables.createVariable_=function(t,n,o,s){var c=t.getPotentialVariableMap();return o||(o=e.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),c?c.createVariable(o,s,n):t.createVariable(o,s,n)},e.Variables.getAddedVariables=function(t,n){t=t.getAllVariables();var o=[];if(n.length!=t.length)for(var s=0;s<t.length;s++){var c=t[s];-1==n.indexOf(c)&&o.push(c)}return o},e.VERSION="6.20210701.0",e.mainWorkspace=null,e.selected=null,e.draggingConnections=[],e.clipboardXml_=null,e.clipboardSource_=null,e.clipboardTypeCounts_=null,e.cache3dSupported_=null,e.parentContainer=null,e.svgSize=function(t){return e.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new e.utils.Size(t.cachedWidth_,t.cachedHeight_)},e.resizeSvgContents=function(t){t.resizeContents()},e.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var n=t.getParentSvg(),o=t.getCachedParentSvgSize(),s=n.parentNode;if(s){var c=s.offsetWidth;s=s.offsetHeight,o.width!=c&&(n.setAttribute("width",c+"px"),t.setCachedParentSvgSize(c,null)),o.height!=s&&(n.setAttribute("height",s+"px"),t.setCachedParentSvgSize(null,s)),t.resize()}},e.onKeyDown=function(t){var n=e.mainWorkspace;n&&!(e.utils.isTargetInput(t)||n.rendered&&!n.isVisible())&&e.ShortcutRegistry.registry.onKeyDown(n,t)},e.deleteBlock=function(t){t.workspace.isFlyout||(e.Events.setGroup(!0),e.hideChaff(),t.dispose(!t.outputConnection,!0),e.Events.setGroup(!1))},e.copy=function(t){(t=t.toCopyData())&&(e.clipboardXml_=t.xml,e.clipboardSource_=t.source,e.clipboardTypeCounts_=t.typeCounts)},e.paste=function(){if(!e.clipboardXml_)return!1;var t=e.clipboardSource_;return t.isFlyout&&(t=t.targetWorkspace),!(!e.clipboardTypeCounts_||!t.isCapacityAvailable(e.clipboardTypeCounts_)||(e.Events.setGroup(!0),t.paste(e.clipboardXml_),e.Events.setGroup(!1),0))},e.duplicate=function(t){var n=e.clipboardXml_,o=e.clipboardSource_;e.copy(t),t.workspace.paste(e.clipboardXml_),e.clipboardXml_=n,e.clipboardSource_=o},e.onContextMenu_=function(t){e.utils.isTargetInput(t)||t.preventDefault()},e.hideChaff=function(t){e.Tooltip.hide(),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation();var n=!!t;e.getMainWorkspace().getComponentManager().getComponents(e.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(o){o.autoHide(n)})},e.getMainWorkspace=function(){return e.mainWorkspace},e.alert=function(t,n){alert(t),n&&n()},e.confirm=function(t,n){n(confirm(t))},e.prompt=function(t,n,o){o(prompt(t,n))},e.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},e.defineBlocksWithJsonArray=function(t){for(var n=0;n<t.length;n++){var o=t[n];if(o){var s=o.type;null==s||""===s?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(e.Blocks[s]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+s+'".'),e.Blocks[s]={init:e.jsonInitFactory_(o)})}else console.warn("Block definition #"+n+" in JSON array is "+o+". Skipping.")}},e.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},e.hueToHex=function(t){return e.utils.colour.hsvToHex(t,e.HSV_SATURATION,255*e.HSV_VALUE)},e.checkBlockColourConstants=function(){e.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),e.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),e.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),e.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),e.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),e.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),e.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),e.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),e.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),e.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),e.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),e.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),e.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),e.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),e.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),e.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},e.checkBlockColourConstant_=function(t,n,o){for(var s="Blockly",c=e,v=0;v<n.length;++v)s+="."+n[v],c&&(c=c[n[v]]);c&&c!==o&&(t=(void 0===o?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",s).replace("%2",t),console.warn(t))},e.setParentContainer=function(t){e.parentContainer=t},e.bindEvent_=e.browserEvents.bind,e.unbindEvent_=e.browserEvents.unbind,e.bindEventWithChecks_=e.browserEvents.conditionalBind,e.ALIGN_LEFT=e.constants.ALIGN.LEFT,e.ALIGN_CENTRE=e.constants.ALIGN.CENTRE,e.ALIGN_RIGHT=e.constants.ALIGN.RIGHT,e.INPUT_VALUE=e.connectionTypes.INPUT_VALUE,e.OUTPUT_VALUE=e.connectionTypes.OUTPUT_VALUE,e.NEXT_STATEMENT=e.connectionTypes.NEXT_STATEMENT,e.PREVIOUS_STATEMENT=e.connectionTypes.PREVIOUS_STATEMENT,e.DUMMY_INPUT=e.inputTypes.DUMMY,e.TOOLBOX_AT_TOP=e.utils.toolbox.Position.TOP,e.TOOLBOX_AT_BOTTOM=e.utils.toolbox.Position.BOTTOM,e.TOOLBOX_AT_LEFT=e.utils.toolbox.Position.LEFT,e.TOOLBOX_AT_RIGHT=e.utils.toolbox.Position.RIGHT,e.Events.BubbleOpen=function(t,n,o){e.Events.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=n,this.bubbleType=o},e.utils.object.inherits(e.Events.BubbleOpen,e.Events.UiBase),e.Events.BubbleOpen.prototype.type=e.Events.BUBBLE_OPEN,e.Events.BubbleOpen.prototype.toJson=function(){var t=e.Events.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},e.Events.BubbleOpen.prototype.fromJson=function(t){e.Events.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.BUBBLE_OPEN,e.Events.BubbleOpen),e.Icon=function(t){this.block_=t,this.iconGroup_=null},e.Icon.prototype.collapseHidden=!0,e.Icon.prototype.SIZE=17,e.Icon.prototype.bubble_=null,e.Icon.prototype.iconXY_=null,e.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),e.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},e.Icon.prototype.dispose=function(){e.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},e.Icon.prototype.updateEditable=function(){},e.Icon.prototype.isVisible=function(){return!!this.bubble_},e.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||e.utils.isRightButton(t)||this.setVisible(!this.isVisible())},e.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},e.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},e.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),n=e.utils.getRelativeXY(this.iconGroup_);t=new e.utils.Coordinate(t.x+n.x+this.SIZE/2,t.y+n.y+this.SIZE/2),e.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},e.Icon.prototype.getIconLocation=function(){return this.iconXY_},e.Icon.prototype.getCorrectedSize=function(){return new e.utils.Size(e.Icon.prototype.SIZE,e.Icon.prototype.SIZE-2)},e.Warning=function(t){e.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_=Object.create(null)},e.utils.object.inherits(e.Warning,e.Icon),e.Warning.prototype.collapseHidden=!1,e.Warning.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},e.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},e.Warning.prototype.createBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.getText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},e.Warning.prototype.setText=function(t,n){this.text_[n]!=t&&(t?this.text_[n]=t:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},e.Warning.prototype.getText=function(){var n,t=[];for(n in this.text_)t.push(this.text_[n]);return t.join("\n")},e.Warning.prototype.dispose=function(){this.block_.warning=null,e.Icon.prototype.dispose.call(this)},e.Comment=function(t){e.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},e.utils.object.inherits(e.Comment,e.Icon),e.Comment.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},e.Comment.prototype.createEditor_=function(){this.foreignObject_=e.utils.dom.createSvgElement(e.utils.Svg.FOREIGNOBJECT,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(e.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",e.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(e.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),t.appendChild(n),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=e.browserEvents.conditionalBind(n,"wheel",this,function(o){o.stopPropagation()}),this.onChangeWrapper_=e.browserEvents.conditionalBind(n,"change",this,function(o){this.cachedText_!=this.model_.text&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=e.browserEvents.conditionalBind(n,"input",this,function(o){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},e.Comment.prototype.updateEditable=function(){e.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},e.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},e.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,n=2*e.Bubble.BORDER_WIDTH,o=t.width-n;t=t.height-n,this.foreignObject_.setAttribute("width",o),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=o-4+"px",this.textarea_.style.height=t-4+"px"},e.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},e.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||e.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},e.Comment.prototype.createEditableBubble_=function(){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},e.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(e.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(e.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(e.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(e.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},e.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},e.Comment.prototype.getBubbleSize=function(){return this.model_.size},e.Comment.prototype.setBubbleSize=function(t,n){this.bubble_?this.bubble_.setBubbleSize(t,n):(this.model_.size.width=t,this.model_.size.height=n)},e.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},e.Comment.prototype.dispose=function(){this.block_.comment=null,e.Icon.prototype.dispose.call(this)},e.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),e.IComponent=function(){},e.IDragTarget=function(){},e.DragTarget=function(){},e.DragTarget.prototype.onDragEnter=function(t){},e.DragTarget.prototype.onDragOver=function(t){},e.DragTarget.prototype.onDragExit=function(t){},e.DragTarget.prototype.onDrop=function(t){},e.DragTarget.prototype.shouldPreventMove=function(t){return!1},e.IDeleteArea=function(){},e.DeleteArea=function(){e.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},e.utils.object.inherits(e.DeleteArea,e.DragTarget),e.DeleteArea.prototype.wouldDelete=function(t,n){return t instanceof e.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!n)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},e.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t},e.IFlyout=function(){},e.Flyout=function(t){e.Flyout.superClass_.constructor.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new e.WorkspaceSvg(t),this.workspace_.setMetricsManager(new e.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=e.utils.genUid(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},e.utils.object.inherits(e.Flyout,e.DeleteArea),e.Flyout.prototype.autoClose=!0,e.Flyout.prototype.isVisible_=!1,e.Flyout.prototype.containerVisible_=!0,e.Flyout.prototype.CORNER_RADIUS=8,e.Flyout.prototype.MARGIN=e.Flyout.prototype.CORNER_RADIUS,e.Flyout.prototype.GAP_X=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.GAP_Y=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.SCROLLBAR_MARGIN=2.5,e.Flyout.prototype.width_=0,e.Flyout.prototype.height_=0,e.Flyout.prototype.dragAngleRange_=70,e.Flyout.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},e.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new e.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),e.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},e.Flyout.prototype.getWidth=function(){return this.width_},e.Flyout.prototype.getHeight=function(){return this.height_},e.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},e.Flyout.prototype.getWorkspace=function(){return this.workspace_},e.Flyout.prototype.isVisible=function(){return this.isVisible_},e.Flyout.prototype.setVisible=function(t){var n=t!=this.isVisible();this.isVisible_=t,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},e.Flyout.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},e.Flyout.prototype.positionAt_=function(t,n,o,s){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(t,n),"svg"==this.svgGroup_.tagName?e.utils.dom.setCssTransform(this.svgGroup_,"translate("+o+"px,"+s+"px)"):this.svgGroup_.setAttribute("transform","translate("+o+","+s+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(o,s),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},e.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,t=0;n=this.listeners_[t];t++)e.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},e.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=e.utils.toolbox.convertFlyoutDefToJsonArray(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(e.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var s,n=this.workspace_.getTopBlocks(!1),o=0;s=n[o];o++)s.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.createFlyoutInfo_=function(t){var n=[],o=[];this.permanentlyDisabled_.length=0;for(var v,s=this.horizontalLayout?this.GAP_X:this.GAP_Y,c=0;v=t[c];c++)switch(v.custom&&(v=this.getDynamicCategoryContents_(v.custom),v=e.utils.toolbox.convertFlyoutDefToJsonArray(v),t.splice.apply(t,[c,1].concat(v)),v=t[c]),v.kind.toUpperCase()){case"BLOCK":var R=v,O=this.getBlockXml_(R);v=this.createBlock_(O),R=parseInt(R.gap||O.getAttribute("gap"),10),o.push(isNaN(R)?s:R),n.push({type:"block",block:v});break;case"SEP":this.addSeparatorGap_(v,o,s);break;case"LABEL":v=this.createButton_(v,!0),n.push({type:"button",button:v}),o.push(s);break;case"BUTTON":v=this.createButton_(v,!1),n.push({type:"button",button:v}),o.push(s)}return{contents:n,gaps:o}},e.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},e.Flyout.prototype.createButton_=function(t,n){if(!e.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new e.FlyoutButton(this.workspace_,this.targetWorkspace,t,n)},e.Flyout.prototype.createBlock_=function(t){return(t=e.Xml.domToBlock(t,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(t),t},e.Flyout.prototype.getBlockXml_=function(t){var n=null,o=t.blockxml;if(o&&"string"!=typeof o?n=o:o&&"string"==typeof o?(n=e.Xml.textToDom(o),t.blockxml=n):t.type&&((n=e.utils.xml.createElement("xml")).setAttribute("type",t.type),n.setAttribute("disabled",t.disabled),t.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},e.Flyout.prototype.addSeparatorGap_=function(t,n,o){t=parseInt(t.gap,10),!isNaN(t)&&0<n.length?n[n.length-1]=t:n.push(o)},e.Flyout.prototype.clearOldBlocks_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),n=0;o=t[n];n++)o.workspace==this.workspace_&&o.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&(e.Tooltip.unbindMouseEvents(t),e.utils.dom.removeNode(t));for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},e.Flyout.prototype.addBlockListeners_=function(t,n,o){this.listeners_.push(e.browserEvents.conditionalBind(t,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.conditionalBind(o,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.bind(t,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(t,"mouseleave",n,n.removeSelect)),this.listeners_.push(e.browserEvents.bind(o,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(o,"mouseleave",n,n.removeSelect))},e.Flyout.prototype.blockMouseDown_=function(t){var n=this;return function(o){var s=n.targetWorkspace.getGesture(o);s&&(s.setStartBlock(t),s.handleFlyoutStart(o,n))}},e.Flyout.prototype.onMouseDown_=function(t){var n=this.targetWorkspace.getGesture(t);n&&n.handleFlyoutStart(t,this)},e.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},e.Flyout.prototype.createBlock=function(t){var n=null;e.Events.disable();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(t)}finally{e.Events.enable()}if(e.hideChaff(),t=e.Variables.getAddedVariables(this.targetWorkspace,o),e.Events.isEnabled()){for(e.Events.setGroup(!0),o=0;o<t.length;o++){var s=t[o];e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(s))}e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},e.Flyout.prototype.initFlyoutButton_=function(t,n,o){var s=t.createDom();t.moveTo(n,o),t.show(),this.listeners_.push(e.browserEvents.conditionalBind(s,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},e.Flyout.prototype.createRect_=function(t,n,o,s,c){return(n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{"fill-opacity":0,x:n,y:o,height:s.height,width:s.width},null)).tooltip=t,e.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,t.getSvgRoot()),t.flyoutRect_=n,this.mats_[c]=n},e.Flyout.prototype.moveRectToBlock_=function(t,n){var o=n.getHeightWidth();t.setAttribute("width",o.width),t.setAttribute("height",o.height),n=n.getRelativeToSurfaceXY(),t.setAttribute("y",n.y),t.setAttribute("x",this.RTL?n.x-o.width:n.x)},e.Flyout.prototype.filterForCapacity_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),n=0;o=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(o))for(var s=this.targetWorkspace.isCapacityAvailable(e.utils.getBlockTypeCounts(o));o;)o.setEnabled(s),o=o.getNextBlock()},e.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},e.Flyout.prototype.placeNewBlock_=function(t){var n=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var o=e.Xml.blockToDom(t,!0);if(n.setResizesEnabled(!1),!(o=e.Xml.domToBlock(o,n)).getSvgRoot())throw Error("block is not rendered.");var s=n.getOriginOffsetInPixels(),c=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=e.utils.Coordinate.sum(c,t),(s=e.utils.Coordinate.difference(t,s)).scale(1/n.scale),o.moveBy(s.x,s.y),o},e.HorizontalFlyout=function(t){e.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0},e.utils.object.inherits(e.HorizontalFlyout,e.Flyout),e.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(o.left+(o.width-s.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.HorizontalFlyout.prototype.getX=function(){return 0},e.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),o=t.getViewMetrics();t=t.getToolboxMetrics();var s=this.toolboxPosition_==e.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?s?t.height:o.height-this.height_:s?0:o.height:s?0:o.height+n.top-this.height_},e.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.HorizontalFlyout.prototype.setBackgroundPath_=function(t,n){var o=this.toolboxPosition_==e.utils.toolbox.Position.TOP,s=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(s.push("h",t+2*this.CORNER_RADIUS),s.push("v",n),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",-t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),s.push("h",t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",n),s.push("h",-t-2*this.CORNER_RADIUS)),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},e.HorizontalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n=n.x||n.y){var o=this.workspace_.getMetricsManager(),s=o.getScrollMetrics();n=o.getViewMetrics().left-s.left+n,this.workspace_.scrollbar.setX(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.HorizontalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;var o=this.MARGIN,s=o+this.tabWidth_;this.RTL&&(t=t.reverse());for(var v,c=0;v=t[c];c++)if("block"==v.type){for(var H,R=(v=v.block).getDescendants(!1),O=0;H=R[O];O++)H.isInFlyout=!0;v.render(),R=v.getSvgRoot(),O=v.getHeightWidth(),H=v.outputConnection?this.tabWidth_:0,v.moveBy(H=this.RTL?s+O.width:s-H,o),H=this.createRect_(v,H,o,O,c),s+=O.width+n[c],this.addBlockListeners_(R,v,H)}else"button"==v.type&&(this.initFlyoutButton_(v.button,s,o),s+=v.button.width+n[c])},e.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<90+n&&t>90-n||t>-90-n&&t<-90+n},e.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top;return this.toolboxPosition_==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e9,n+t.height,-1e9,1e9):new e.utils.Rect(n,1e9,-1e9,1e9)},e.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),o=0;s=n[o];o++)t=Math.max(t,s.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,this.height_!=(t+=e.Scrollbar.scrollbarThickness)){for(o=0;s=n[o];o++)s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.registry.DEFAULT,e.HorizontalFlyout),e.VerticalFlyout=function(t){e.VerticalFlyout.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.VerticalFlyout,e.Flyout),e.VerticalFlyout.registryName="verticalFlyout",e.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(o.top+(o.height-s.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),o=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==e.utils.toolbox.Position.LEFT?t.width:o.width-this.width_:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:o.width:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:o.width+n.left-this.width_},e.VerticalFlyout.prototype.getY=function(){return 0},e.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.VerticalFlyout.prototype.setBackgroundPath_=function(t,n){var o=this.toolboxPosition_==e.utils.toolbox.Position.RIGHT,s=t+this.CORNER_RADIUS;(s=["M "+(o?s:0)+",0"]).push("h",o?-t:t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",Math.max(0,n)),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",o?t:-t),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},e.VerticalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n.y){var o=this.workspace_.getMetricsManager(),s=o.getScrollMetrics();n=o.getViewMetrics().top-s.top+n.y,this.workspace_.scrollbar.setY(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.VerticalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;for(var v,o=this.MARGIN,s=this.RTL?o:o+this.tabWidth_,c=0;v=t[c];c++)if("block"==v.type){for(var H,R=(v=v.block).getDescendants(!1),O=0;H=R[O];O++)H.isInFlyout=!0;v.render(),R=v.getSvgRoot(),O=v.getHeightWidth(),v.moveBy(H=v.outputConnection?s-this.tabWidth_:s,o),H=this.createRect_(v,this.RTL?H-O.width:H,o,O,c),this.addBlockListeners_(R,v,H),o+=O.height+n[c]}else"button"==v.type&&(this.initFlyoutButton_(v.button,s,o),o+=v.button.height+n[c])},e.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<n&&t>-n||t<-180+n||t>180-n},e.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.left;return this.toolboxPosition_==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e9,1e9,-1e9,n+t.width):new e.utils.Rect(-1e9,1e9,n,1e9)},e.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),o=0;s=n[o];o++){var c=s.getHeightWidth().width;s.outputConnection&&(c-=this.tabWidth_),t=Math.max(t,c)}for(o=0;s=this.buttons_[o];o++)t=Math.max(t,s.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,this.width_!=(t+=e.Scrollbar.scrollbarThickness)){for(o=0;s=n[o];o++){if(this.RTL){c=s.getRelativeToSurfaceXY().x;var v=t/this.workspace_.scale-this.MARGIN;s.outputConnection||(v-=this.tabWidth_),s.moveBy(v-c,0)}s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s)}if(this.RTL)for(o=0;s=this.buttons_[o];o++)n=s.getPosition().y,s.moveTo(t/this.workspace_.scale-s.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.registry.DEFAULT,e.VerticalFlyout),e.FlyoutButton=function(t,n,o,s){this.workspace_=t,this.targetWorkspace_=n,this.text_=o.text,this.position_=new e.utils.Coordinate(0,0),this.isLabel_=s,this.callbackKey_=o.callbackKey||o.callbackkey,this.cssClass_=o["web-class"]||null,this.onMouseUpWrapper_=null,this.info=o},e.FlyoutButton.MARGIN_X=5,e.FlyoutButton.MARGIN_Y=2,e.FlyoutButton.prototype.width=0,e.FlyoutButton.prototype.height=0,e.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},this.workspace_.getCanvas()),!this.isLabel_)var n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var o=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),s=e.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(s+="\u200f"),o.textContent=s,this.isLabel_&&(this.svgText_=o,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var c=e.utils.style.getComputedStyle(o,"fontSize"),v=e.utils.style.getComputedStyle(o,"fontWeight"),R=e.utils.style.getComputedStyle(o,"fontFamily");return this.width=e.utils.dom.getFastTextWidthWithSizeString(o,c,v,R),s=e.utils.dom.measureFontMetrics(s,c,v,R),this.height=s.height,this.isLabel_||(this.width+=2*e.FlyoutButton.MARGIN_X,this.height+=2*e.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),o.setAttribute("x",this.width/2),o.setAttribute("y",this.height/2-s.height/2+s.baseline),this.updateTransform_(),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},e.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},e.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},e.FlyoutButton.prototype.moveTo=function(t,n){this.position_.x=t,this.position_.y=n,this.updateTransform_()},e.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},e.FlyoutButton.prototype.getPosition=function(){return this.position_},e.FlyoutButton.prototype.getButtonText=function(){return this.text_},e.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},e.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&e.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},e.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},e.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),e.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},e.Generator.prototype.INFINITE_LOOP_TRAP=null,e.Generator.prototype.STATEMENT_PREFIX=null,e.Generator.prototype.STATEMENT_SUFFIX=null,e.Generator.prototype.INDENT="  ",e.Generator.prototype.COMMENT_WRAP=60,e.Generator.prototype.ORDER_OVERRIDES=[],e.Generator.prototype.isInitialized=null,e.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=e.getMainWorkspace());var n=[];this.init(t),t=t.getTopBlocks(!0);for(var s,o=0;s=t[o];o++){var c=this.blockToCode(s);Array.isArray(c)&&(c=c[0]),c&&(s.outputConnection&&(c=this.scrubNakedValue(c),this.STATEMENT_PREFIX&&!s.suppressPrefixSuffix&&(c=this.injectId(this.STATEMENT_PREFIX,s)+c),this.STATEMENT_SUFFIX&&!s.suppressPrefixSuffix&&(c+=this.injectId(this.STATEMENT_SUFFIX,s))),n.push(c))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},e.Generator.prototype.prefixLines=function(t,n){return n+t.replace(/(?!\n$)\n/g,"\n"+n)},e.Generator.prototype.allNestedComments=function(t){var n=[];t=t.getDescendants(!0);for(var o=0;o<t.length;o++){var s=t[o].getCommentText();s&&n.push(s)}return n.length&&n.push(""),n.join("\n")},e.Generator.prototype.blockToCode=function(t,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return n?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return n?"":this.blockToCode(t.getChildren(!1)[0]);var o=this[t.type];if("function"!=typeof o)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(o=o.call(t,t),Array.isArray(o)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,o[0],n),o[1]]}if("string"==typeof o)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(o=this.injectId(this.STATEMENT_PREFIX,t)+o),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(o+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,o,n);if(null===o)return"";throw SyntaxError("Invalid code generated: "+o)},e.Generator.prototype.valueToCode=function(t,n,o){if(isNaN(o))throw TypeError("Expecting valid order from block: "+t.type);var s=t.getInputTargetBlock(n);if(!s||""===(n=this.blockToCode(s)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+s.type);if(t=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+s.type);if(!t)return"";s=!1;var c=Math.floor(o),v=Math.floor(n);if(c<=v&&(c!=v||0!=c&&99!=c))for(s=!0,c=0;c<this.ORDER_OVERRIDES.length;c++)if(this.ORDER_OVERRIDES[c][0]==o&&this.ORDER_OVERRIDES[c][1]==n){s=!1;break}return s&&(t="("+t+")"),t},e.Generator.prototype.statementToCode=function(t,n){if(t=t.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},e.Generator.prototype.addLoopTrap=function(t,n){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+t),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+t),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),t},e.Generator.prototype.injectId=function(t,n){return n=n.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+n+"'")},e.Generator.prototype.RESERVED_WORDS_="",e.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},e.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(e.Generator.prototype,"variableDB_",{get:function(){return e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}),e.Generator.prototype.provideFunction_=function(t,n){if(!this.definitions_[t]){var s,o=this.nameDB_.getDistinctName(t,e.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[t]=o,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);s!=n;)s=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[t]=n}return this.functionNames_[t]},e.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},e.Generator.prototype.scrub_=function(t,n,o){return n},e.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},e.Generator.prototype.scrubNakedValue=function(t){return t},e.IToolboxItem=function(){},e.ISelectableToolboxItem=function(){},e.ICollapsibleToolboxItem=function(){},e.ToolboxItem=function(t,n,o){this.id_=t.toolboxitemid||e.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},e.ToolboxItem.prototype.init=function(){},e.ToolboxItem.prototype.getDiv=function(){return null},e.ToolboxItem.prototype.getId=function(){return this.id_},e.ToolboxItem.prototype.getParent=function(){return null},e.ToolboxItem.prototype.getLevel=function(){return this.level_},e.ToolboxItem.prototype.isSelectable=function(){return!1},e.ToolboxItem.prototype.isCollapsible=function(){return!1},e.ToolboxItem.prototype.dispose=function(){},e.ToolboxCategory=function(t,n,o){e.ToolboxCategory.superClass_.constructor.call(this,t,n,o),this.name_=e.utils.replaceMessageReferences(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)},e.utils.object.inherits(e.ToolboxCategory,e.ToolboxItem),e.ToolboxCategory.registrationName="category",e.ToolboxCategory.nestedPadding=19,e.ToolboxCategory.borderWidth=8,e.ToolboxCategory.defaultBackgroundColour="#57e",e.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},e.ToolboxCategory.prototype.parseContents_=function(t){var n=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var o;o=n[t];t++)this.flyoutItems_.push(o)}},e.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},e.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),e.utils.aria.setRole(this.htmlDiv_,e.utils.aria.Role.TREEITEM),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,!1),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),e.utils.aria.setRole(this.iconDom_,e.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},e.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),t},e.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");e.utils.dom.addClass(t,this.cssConfig_.row);var n=e.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?t.style.paddingRight=n:t.style.paddingLeft=n,t},e.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.rowcontentcontainer),t},e.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.display="inline-block",t},e.ToolboxCategory.prototype.createLabelDom_=function(t){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=t,e.utils.dom.addClass(n,this.cssConfig_.label),n},e.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},e.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=e.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},e.ToolboxCategory.prototype.getColour_=function(t){var n=t.categorystyle||t.categoryStyle;return(t=t.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(t)},e.ToolboxCategory.prototype.getColourfromStyle_=function(t){var n=this.workspace_.getTheme();if(t&&n){if((n=n.categoryStyles[t])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},e.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},e.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=e.utils.replaceMessageReferences(t))||""===t)return"";var n=Number(t);return isNaN(n)?(n=e.utils.colour.parse(t))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):e.hueToHex(n)},e.ToolboxCategory.prototype.openIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.closedicon),e.utils.dom.addClass(t,this.cssConfig_.openicon))},e.ToolboxCategory.prototype.closeIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.openicon),e.utils.dom.addClass(t,this.cssConfig_.closedicon))},e.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},e.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},e.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},e.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},e.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},e.ToolboxCategory.prototype.onClick=function(t){},e.ToolboxCategory.prototype.setSelected=function(t){if(t){var n=this.parseColour_(e.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,e.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",e.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,t)},e.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},e.ToolboxCategory.prototype.getName=function(){return this.name_},e.ToolboxCategory.prototype.getParent=function(){return this.parent_},e.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},e.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=e.utils.toolbox.convertFlyoutDefToJsonArray(t)),this.parseContents_(this.toolboxItemDef_)},e.ToolboxCategory.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxCategory.registrationName,e.ToolboxCategory),e.ToolboxSeparator=function(t,n){e.ToolboxSeparator.superClass_.constructor.call(this,t,n),this.cssConfig_={container:"blocklyTreeSeparator"},e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig)},e.utils.object.inherits(e.ToolboxSeparator,e.ToolboxItem),e.ToolboxSeparator.registrationName="sep",e.ToolboxSeparator.prototype.init=function(){this.createDom_()},e.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),this.htmlDiv_=t},e.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxSeparator.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxSeparator.registrationName,e.ToolboxSeparator),e.CollapsibleToolboxCategory=function(t,n,o){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],e.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.CollapsibleToolboxCategory,e.ToolboxCategory),e.CollapsibleToolboxCategory.registrationName="collapsibleCategory",e.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=e.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},e.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var n=t.contents,o=!0;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var s;s=n[t];t++)!e.registry.hasItem(e.registry.Type.TOOLBOX_ITEM,s.kind)||s.kind.toLowerCase()==e.ToolboxSeparator.registrationName&&o?(this.flyoutItems_.push(s),o=!0):(this.createToolboxItem_(s),o=!1)}},e.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var n=t.kind;"CATEGORY"==n.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(n=e.CollapsibleToolboxCategory.registrationName),t=new(e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,n))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},e.CollapsibleToolboxCategory.prototype.init=function(){e.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},e.CollapsibleToolboxCategory.prototype.createDom_=function(){e.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),e.utils.aria.setRole(this.subcategoriesDiv_,e.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},e.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var n=document.createElement("div");e.utils.dom.addClass(n,this.cssConfig_.contents);for(var o=0;o<t.length;o++){var s=t[o];s.init();var c=s.getDiv();n.appendChild(c),s.getClickTarget&&s.getClickTarget().setAttribute("id",s.getId())}return n},e.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!=t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},e.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var o,n=0;o=this.getChildToolboxItems()[n];n++)o.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},e.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},e.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},e.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},e.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.CollapsibleToolboxCategory.registrationName,e.CollapsibleToolboxCategory),e.Events.ToolboxItemSelect=function(t,n,o){e.Events.ToolboxItemSelect.superClass_.constructor.call(this,o),this.oldItem=t,this.newItem=n},e.utils.object.inherits(e.Events.ToolboxItemSelect,e.Events.UiBase),e.Events.ToolboxItemSelect.prototype.type=e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect.prototype.toJson=function(){var t=e.Events.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},e.Events.ToolboxItemSelect.prototype.fromJson=function(t){e.Events.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},e.registry.register(e.registry.Type.EVENT,e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect),e.IAutoHideable=function(){},e.IStyleable=function(){},e.IToolbox=function(){},e.Toolbox=function(t){e.Toolbox.superClass_.constructor.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},e.utils.object.inherits(e.Toolbox,e.DeleteArea),e.Toolbox.prototype.onShortcut=function(t){return!1},e.Toolbox.prototype.init=function(){var t=this.workspace_,n=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),e.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,e.utils.aria.setRole(this.contentsDiv_,e.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),t.parentNode.insertBefore(n,t),this.attachEvents_(n,this.contentsDiv_),n},e.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),e.utils.dom.addClass(t,"blocklyToolboxDiv"),e.utils.dom.addClass(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},e.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},e.Toolbox.prototype.attachEvents_=function(t,n){t=e.browserEvents.conditionalBind(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),n=e.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},e.Toolbox.prototype.onClick_=function(t){if(e.utils.isRightButton(t)||t.target==this.HtmlDiv)e.hideChaff(!1);else{var n=t.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(t)),e.hideChaff(!0)}e.Touch.clearTouchIdentifier()},e.Toolbox.prototype.onKeyDown_=function(t){var n=!1;switch(t.keyCode){case e.utils.KeyCodes.DOWN:n=this.selectNext_();break;case e.utils.KeyCodes.UP:n=this.selectPrevious_();break;case e.utils.KeyCodes.LEFT:n=this.selectParent_();break;case e.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(t)),n&&t.preventDefault()},e.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,n=new e.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=t.options.toolboxPosition,new(e.registry.getClassFromOptions(t.horizontalLayout?e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(n)},e.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var n=0;n<this.contents_.length;n++){var o=this.contents_[n];o&&o.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},e.Toolbox.prototype.renderContents_=function(t){for(var s,n=document.createDocumentFragment(),o=0;s=t[o];o++)this.createToolboxItem_(s,n);this.contentsDiv_.appendChild(n)},e.Toolbox.prototype.createToolboxItem_=function(t,n){var o=t.kind;"CATEGORY"==o.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(o=e.CollapsibleToolboxCategory.registrationName),(o=e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,o.toLowerCase()))&&(t=new o(t,this),this.addToolboxItem_(t),t.init(),(o=t.getDiv())&&n.appendChild(o),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},e.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var o,n=0;o=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(o)},e.Toolbox.prototype.getToolboxItems=function(){return this.contents_},e.Toolbox.prototype.addStyle=function(t){e.utils.dom.addClass(this.HtmlDiv,t)},e.Toolbox.prototype.removeStyle=function(t){e.utils.dom.removeClass(this.HtmlDiv,t)},e.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),n=t.top,o=n+t.height,s=t.left;return t=s+t.width,this.toolboxPosition==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e7,o,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.BOTTOM?new e.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e7,1e7,-1e7,t):new e.utils.Rect(-1e7,1e7,s,1e7)},e.Toolbox.prototype.wouldDelete=function(t,n){return this.updateWouldDelete_(t instanceof e.BlockSvg?!t.getParent()&&t.isDeletable():t.isDeletable()),this.wouldDelete_},e.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},e.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},e.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(n):this.removeStyle(n)},e.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},e.Toolbox.prototype.getWidth=function(){return this.width_},e.Toolbox.prototype.getHeight=function(){return this.height_},e.Toolbox.prototype.getFlyout=function(){return this.flyout_},e.Toolbox.prototype.getWorkspace=function(){return this.workspace_},e.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},e.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},e.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},e.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition==e.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==e.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},e.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition==e.utils.toolbox.Position.LEFT?t.scrollX+n.width:t.scrollX,this.toolboxPosition==e.utils.toolbox.Position.TOP?t.scrollY+n.height:t.scrollY),e.svgResize(t)},e.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},e.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var n=this.contents_[t];n.refreshTheme&&n.refreshTheme()}},e.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},e.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},e.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},e.Toolbox.prototype.setSelectedItem=function(t){var n=this.selectedItem_;!t&&!n||t&&!t.isSelectable()||(this.shouldDeselectItem_(n,t)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,t)&&null!=t&&this.selectItem_(n,t),this.updateFlyout_(n,t),this.fireSelectEvent_(n,t))},e.Toolbox.prototype.shouldDeselectItem_=function(t,n){return null!=t&&(!t.isCollapsible()||t!=n)},e.Toolbox.prototype.shouldSelectItem_=function(t,n){return null!=n&&n!=t},e.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,"")},e.Toolbox.prototype.selectItem_=function(t,n){this.selectedItem_=n,this.previouslySelectedItem_=t,n.setSelected(!0),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,n.getId())},e.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},e.Toolbox.prototype.updateFlyout_=function(t,n){(t!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},e.Toolbox.prototype.fireSelectEvent_=function(t,n){var o=t&&t.getName(),s=n&&n.getName();t==n&&(s=null),t=new(e.Events.get(e.Events.TOOLBOX_ITEM_SELECT))(o,s,this.workspace_.id),e.Events.fire(t)},e.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},e.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},e.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[++t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[--t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)e.browserEvents.unbind(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),e.utils.dom.removeNode(this.HtmlDiv)},e.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),e.registry.register(e.registry.Type.TOOLBOX,e.registry.DEFAULT,e.Toolbox),e.Events.TrashcanOpen=function(t,n){e.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=t},e.utils.object.inherits(e.Events.TrashcanOpen,e.Events.UiBase),e.Events.TrashcanOpen.prototype.type=e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen.prototype.toJson=function(){var t=e.Events.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},e.Events.TrashcanOpen.prototype.fromJson=function(t){e.Events.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},e.registry.register(e.registry.Type.EVENT,e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen),e.IPositionable=function(){},e.uiPosition={},e.uiPosition.verticalPosition={TOP:0,BOTTOM:1},e.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},e.uiPosition.bumpDirection={UP:0,DOWN:1},e.uiPosition.getStartPositionRect=function(t,n,o,s,c,v){var R=v.scrollbar&&v.scrollbar.canScrollVertically();return t.horizontal===e.uiPosition.horizontalPosition.LEFT?(o=c.absoluteMetrics.left+o,R&&v.RTL&&(o+=e.Scrollbar.scrollbarThickness)):(o=c.absoluteMetrics.left+c.viewMetrics.width-n.width-o,R&&!v.RTL&&(o-=e.Scrollbar.scrollbarThickness)),t.vertical===e.uiPosition.verticalPosition.TOP?t=c.absoluteMetrics.top+s:(t=c.absoluteMetrics.top+c.viewMetrics.height-n.height-s,v.scrollbar&&v.scrollbar.canScrollHorizontally()&&(t-=e.Scrollbar.scrollbarThickness)),new e.utils.Rect(t,t+n.height,o,o+n.width)},e.uiPosition.getCornerOppositeToolbox=function(t,n){return{horizontal:n.toolboxMetrics.position===e.utils.toolbox.Position.LEFT||t.horizontalLayout&&!t.RTL?e.uiPosition.horizontalPosition.RIGHT:e.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===e.utils.toolbox.Position.BOTTOM?e.uiPosition.verticalPosition.TOP:e.uiPosition.verticalPosition.BOTTOM}},e.uiPosition.bumpPositionRect=function(t,n,o,s){for(var H,c=t.left,v=t.right-t.left,R=t.bottom-t.top,O=0;H=s[O];O++)t.intersects(H)&&(t=new e.utils.Rect(t=o===e.uiPosition.bumpDirection.UP?H.top-R-n:H.bottom+n,t+R,c,c+v),O=-1);return t},e.Trashcan=function(t){e.Trashcan.superClass_.constructor.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(t=new e.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.TOP?e.utils.toolbox.Position.BOTTOM:e.utils.toolbox.Position.TOP,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT?e.utils.toolbox.Position.LEFT:e.utils.toolbox.Position.RIGHT,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},e.utils.object.inherits(e.Trashcan,e.DeleteArea),e.Trashcan.prototype.WIDTH_=47,e.Trashcan.prototype.BODY_HEIGHT_=44,e.Trashcan.prototype.LID_HEIGHT_=16,e.Trashcan.prototype.MARGIN_VERTICAL_=20,e.Trashcan.prototype.MARGIN_HORIZONTAL_=20,e.Trashcan.prototype.MARGIN_HOTSPOT_=10,e.Trashcan.prototype.SPRITE_LEFT_=0,e.Trashcan.prototype.SPRITE_TOP_=32,e.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,e.Trashcan.ANIMATION_LENGTH_=80,e.Trashcan.ANIMATION_FRAMES_=4,e.Trashcan.OPACITY_MIN_=.4,e.Trashcan.OPACITY_MAX_=.8,e.Trashcan.MAX_LID_ANGLE_=45,e.Trashcan.prototype.isLidOpen=!1,e.Trashcan.prototype.minOpenness_=0,e.Trashcan.prototype.svgGroup_=null,e.Trashcan.prototype.svgLid_=null,e.Trashcan.prototype.lidTask_=0,e.Trashcan.prototype.lidOpen_=0,e.Trashcan.prototype.left_=0,e.Trashcan.prototype.top_=0,e.Trashcan.prototype.initialized_=!1,e.Trashcan.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var o=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return o.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),e.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),e.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),e.browserEvents.bind(o,"mouseover",this,this.mouseOver_),e.browserEvents.bind(o,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},e.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(e.utils.dom.insertAfter(this.flyout.createDom(e.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET,e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},e.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},e.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},e.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},e.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(e.Xml.textToDom);this.flyout.show(t),this.fireUiEvent_(!0)}},e.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},e.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},e.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},e.Trashcan.prototype.position=function(t,n){if(this.initialized_){var o=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t);t=e.uiPosition.getStartPositionRect(o,new e.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,o.vertical===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.Trashcan.prototype.getBoundingRectangle=function(){return new e.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},e.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new e.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},e.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},e.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},e.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},e.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},e.Trashcan.prototype.animateLid_=function(){var t=e.Trashcan.ANIMATION_FRAMES_,n=1/(t+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*e.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=e.Trashcan.OPACITY_MIN_)+this.lidOpen_*(e.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),e.Trashcan.ANIMATION_LENGTH_/t))},e.Trashcan.prototype.setLidAngle_=function(t){var n=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-t:t)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},e.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*e.Trashcan.MAX_LID_ANGLE_)},e.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},e.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},e.Trashcan.prototype.fireUiEvent_=function(t){t=new(e.Events.get(e.Events.TRASHCAN_OPEN))(t,this.workspace_.id),e.Events.fire(t)},e.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},e.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},e.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},e.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==e.Events.BLOCK_DELETE&&t.oldXml.tagName&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},e.Trashcan.prototype.cleanBlockXML_=function(t){for(var n=t=t.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var o=n.firstChild||n.nextSibling;if(!o)for(o=n.parentNode;o;){if(o.nextSibling){o=o.nextSibling;break}o=o.parentNode}n=o}return e.Xml.domToText(t)},e.VariablesDynamic={},e.VariablesDynamic.onCreateVariableButtonClick_String=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"String")},e.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Number")},e.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Colour")},e.VariablesDynamic.flyoutCategory=function(t){var n=[],o=document.createElement("button");return o.setAttribute("text",e.Msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(o),(o=document.createElement("button")).setAttribute("text",e.Msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(o),(o=document.createElement("button")).setAttribute("text",e.Msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(o),t.registerButtonCallback("CREATE_VARIABLE_STRING",e.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",e.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",e.VariablesDynamic.onCreateVariableButtonClick_Colour),t=e.VariablesDynamic.flyoutCategoryBlocks(t),n.concat(t)},e.VariablesDynamic.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getAllVariables()).length){if(e.Blocks.variables_set_dynamic){var o=t[t.length-1],s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set_dynamic"),s.setAttribute("gap",24),s.appendChild(e.Variables.generateVariableFieldDom(o)),n.push(s)}if(e.Blocks.variables_get_dynamic){t.sort(e.VariableModel.compareByName),o=0;for(var c;c=t[o];o++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(c)),n.push(s)}}return n},e.ZoomControls=function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},e.ZoomControls.prototype.WIDTH_=32,e.ZoomControls.prototype.HEIGHT_=32,e.ZoomControls.prototype.SMALL_SPACING_=2,e.ZoomControls.prototype.LARGE_SPACING_=11,e.ZoomControls.prototype.MARGIN_VERTICAL_=20,e.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,e.ZoomControls.prototype.svgGroup_=null,e.ZoomControls.prototype.left_=0,e.ZoomControls.prototype.top_=0,e.ZoomControls.prototype.initialized_=!1,e.ZoomControls.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},e.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},e.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&e.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&e.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&e.browserEvents.unbind(this.onZoomOutWrapper_)},e.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new e.utils.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},e.ZoomControls.prototype.position=function(t,n){if(this.initialized_){var o=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t),s=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(s+=this.LARGE_SPACING_+this.HEIGHT_),t=e.uiPosition.getStartPositionRect(o,new e.utils.Size(this.WIDTH_,s),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,(o=o.vertical)===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),o===e.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(o+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(o+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomOutWrapper_=e.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},e.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomInWrapper_=e.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},e.ZoomControls.prototype.zoom_=function(t,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},e.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomResetWrapper_=e.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},e.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},e.ZoomControls.prototype.fireZoomEvent_=function(){var t=new(e.Events.get(e.Events.CLICK))(null,this.workspace_.id,"zoom_controls");e.Events.fire(t)},e.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),e.ShortcutItems={},e.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},e.ShortcutItems.registerEscape=function(){var t={name:e.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return e.hideChaff(),!0}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.ESC,t.name)},e.ShortcutItems.registerDelete=function(){var t={name:e.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&e.selected&&e.selected.isDeletable()},callback:function(n,o){return o.preventDefault(),!e.Gesture.inProgress()&&(e.deleteBlock(e.selected),!0)}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.DELETE,t.name),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.BACKSPACE,t.name)},e.ShortcutItems.registerCopy=function(){var t={name:e.ShortcutItems.names.COPY,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()},callback:function(o,s){return s.preventDefault(),e.hideChaff(),e.copy(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerCut=function(){var t={name:e.ShortcutItems.names.CUT,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()&&!e.selected.workspace.isFlyout},callback:function(){return e.copy(e.selected),e.deleteBlock(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerPaste=function(){var t={name:e.ShortcutItems.names.PASTE,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()},callback:function(){return e.paste()}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerUndo=function(){var t={name:e.ShortcutItems.names.UNDO,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()},callback:function(o){return e.hideChaff(),o.undo(!1),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerRedo=function(){var t={name:e.ShortcutItems.names.REDO,preconditionFn:function(o){return!e.Gesture.inProgress()&&!o.options.readOnly},callback:function(o){return e.hideChaff(),o.undo(!0),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Y,[e.utils.KeyCodes.CTRL]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerDefaultShortcuts=function(){e.ShortcutItems.registerEscape(),e.ShortcutItems.registerDelete(),e.ShortcutItems.registerCopy(),e.ShortcutItems.registerCut(),e.ShortcutItems.registerPaste(),e.ShortcutItems.registerUndo(),e.ShortcutItems.registerRedo()},e.ShortcutItems.registerDefaultShortcuts(),e.ContextMenuItems={},e.ContextMenuItems.registerUndo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},e.ContextMenuItems.registerRedo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},e.ContextMenuItems.registerCleanup=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},e.ContextMenuItems.toggleOption_=function(t,n){for(var o=0,s=0;s<n.length;s++)for(var c=n[s];c;)setTimeout(c.setCollapsed.bind(c,t),o),c=c.getNextBlock(),o+=10},e.ContextMenuItems.registerCollapse=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var o=t[n];o;){if(!o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!0,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},e.ContextMenuItems.registerExpand=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var o=t[n];o;){if(o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!1,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},e.ContextMenuItems.addDeletableBlocks_=function(t,n){if(t.isDeletable())Array.prototype.push.apply(n,t.getDescendants(!1));else{t=t.getChildren(!1);for(var o=0;o<t.length;o++)e.ContextMenuItems.addDeletableBlocks_(t[o],n)}},e.ContextMenuItems.getDeletableBlocks_=function(t){var n=[];t=t.getTopBlocks(!0);for(var o=0;o<t.length;o++)e.ContextMenuItems.addDeletableBlocks_(t[o],n);return n},e.ContextMenuItems.deleteNext_=function(t,n){e.Events.setGroup(n);var o=t.shift();o&&(o.workspace?(o.dispose(!1,!0),setTimeout(e.ContextMenuItems.deleteNext_,10,t,n)):e.ContextMenuItems.deleteNext_(t,n)),e.Events.setGroup(!1)},e.ContextMenuItems.registerDeleteAll=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1==(t=e.ContextMenuItems.getDeletableBlocks_(t.workspace).length)?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<e.ContextMenuItems.getDeletableBlocks_(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var n=e.ContextMenuItems.getDeletableBlocks_(t.workspace),o=e.utils.genUid();2>n.length?e.ContextMenuItems.deleteNext_(n,o):e.confirm(e.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(s){s&&e.ContextMenuItems.deleteNext_(n,o)})}},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},e.ContextMenuItems.registerWorkspaceOptions_=function(){e.ContextMenuItems.registerUndo(),e.ContextMenuItems.registerRedo(),e.ContextMenuItems.registerCleanup(),e.ContextMenuItems.registerCollapse(),e.ContextMenuItems.registerExpand(),e.ContextMenuItems.registerDeleteAll()},e.ContextMenuItems.registerDuplicate=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&e.duplicate(t.block)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},e.ContextMenuItems.registerComment=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?e.Msg.REMOVE_COMMENT:e.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,e.utils.userAgent.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},e.ContextMenuItems.registerInline=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?e.Msg.EXTERNAL_INPUTS:e.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var n=1;n<t.inputList.length;n++)if(t.inputList[n-1].type!=e.inputTypes.STATEMENT&&t.inputList[n].type!=e.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},e.ContextMenuItems.registerCollapseExpandBlock=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?e.Msg.EXPAND_BLOCK:e.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},e.ContextMenuItems.registerDisable=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?e.Msg.DISABLE_BLOCK:e.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var n=e.Events.getGroup();n||e.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),n||e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},e.ContextMenuItems.registerDelete=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){var n=t.block;return t=n.getDescendants(!1).length,(n=n.getNextBlock())&&(t-=n.getDescendants(!1).length),1==t?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){e.Events.setGroup(!0),t.block&&e.deleteBlock(t.block),e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},e.ContextMenuItems.registerHelp=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},e.ContextMenuItems.registerBlockOptions_=function(){e.ContextMenuItems.registerDuplicate(),e.ContextMenuItems.registerComment(),e.ContextMenuItems.registerInline(),e.ContextMenuItems.registerCollapseExpandBlock(),e.ContextMenuItems.registerDisable(),e.ContextMenuItems.registerDelete(),e.ContextMenuItems.registerHelp()},e.ContextMenuItems.registerDefaultOptions=function(){e.ContextMenuItems.registerWorkspaceOptions_(),e.ContextMenuItems.registerBlockOptions_()},e.ContextMenuItems.registerDefaultOptions(),e.Mutator=function(t){e.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},e.utils.object.inherits(e.Mutator,e.Icon),e.Mutator.prototype.workspace_=null,e.Mutator.prototype.workspaceWidth_=0,e.Mutator.prototype.workspaceHeight_=0,e.Mutator.prototype.setBlock=function(t){this.block_=t},e.Mutator.prototype.getWorkspace=function(){return this.workspace_},e.Mutator.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},e.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&e.Icon.prototype.iconClick_.call(this,t)},e.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var o,t=e.utils.xml.createElement("xml"),n=0;o=this.quarkNames_[n];n++){var s=e.utils.xml.createElement("block");s.setAttribute("type",o),t.appendChild(s)}else t=null;return(n=new e.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT,(o=!!t)&&(n.languageTree=e.utils.toolbox.convertToolboxDefToJson(t)),this.workspace_=new e.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(e.Events.disableOrphans),t=o?this.workspace_.addFlyout(e.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),t&&n.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},e.Mutator.prototype.updateEditable=function(){e.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&e.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},e.Mutator.prototype.resizeBubble_=function(){var t=2*e.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),o=n.width+n.x,s=n.height+3*t,c=this.workspace_.getFlyout();if(c){var v=c.getWorkspace().getMetricsManager().getScrollMetrics();s=Math.max(s,v.height+20),o+=c.getWidth()}this.block_.RTL&&(o=-n.x),o+=3*t,(Math.abs(this.workspaceWidth_-o)>t||Math.abs(this.workspaceHeight_-s)>t)&&(this.workspaceWidth_=o,this.workspaceHeight_=s,this.bubble_.setBubbleSize(o+t,s+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},e.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},e.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),n&&(t.init(this.workspace_),t.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var s,o=0;s=n[o];o++)s.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(n=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+n:n):t=n=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,n),this.block_.saveConnections){var c=this,v=this.block_;v.saveConnections(this.rootBlock_),this.sourceListener_=function(){v.saveConnections(c.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},e.Mutator.prototype.workspaceChanged_=function(t){if(!(t.isUiEvent||t.type==e.Events.CHANGE&&"disabled"==t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var o,n=0;o=t[n];n++){var s=o.getRelativeToSurfaceXY();if(20>s.y&&o.moveBy(0,20-s.y),o.RTL){var c=-20,v=this.workspace_.getFlyout();v&&(c-=v.getWidth()),s.x>c&&o.moveBy(c-s.x,0)}else 20>s.x&&o.moveBy(20-s.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(e.Events.setGroup(!0),t=(t=(o=this.block_).mutationToDom())&&e.Xml.domToText(t),n=o.rendered,o.rendered=!1,o.compose(this.rootBlock_),o.rendered=n,o.initSvg(),o.rendered&&o.render(),t!=(n=(n=o.mutationToDom())&&e.Xml.domToText(n))){e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(o,"mutation",null,t,n));var R=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(R),o.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),e.Events.setGroup(!1)}}},e.Mutator.prototype.dispose=function(){this.block_.mutator=null,e.Icon.prototype.dispose.call(this)},e.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var s,n=t.getAllBlocks(!1),o=0;s=n[o];o++)s.setStyle(s.getStyleName());if(o=t.getFlyout())for(t=o.workspace_.getAllBlocks(!1),o=0;s=t[o];o++)s.setStyle(s.getStyleName())}},e.Mutator.reconnect=function(t,n,o){if(!t||!t.getSourceBlock().workspace)return!1;o=n.getInput(o).connection;var s=t.targetBlock();return!(s&&s!=n||o.targetConnection==t||(o.isConnected()&&o.disconnect(),o.connect(t),0))},e.Mutator.findParentWs=function(t){var n=null;if(t&&t.options){var o=t.options.parentWorkspace;t.isFlyout?o&&o.options&&(n=o.options.parentWorkspace):o&&(n=o)}return n},e.FieldTextInput=function(t,n,o){this.spellcheck_=!0,e.FieldTextInput.superClass_.constructor.call(this,t,n,o),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},e.utils.object.inherits(e.FieldTextInput,e.Field),e.FieldTextInput.prototype.DEFAULT_VALUE="",e.FieldTextInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldTextInput(n,void 0,t)},e.FieldTextInput.prototype.SERIALIZABLE=!0,e.FieldTextInput.BORDERRADIUS=4,e.FieldTextInput.prototype.CURSOR="text",e.FieldTextInput.prototype.configure_=function(t){e.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},e.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var s,t=0,n=0,o=0;s=this.sourceBlock_.inputList[o];o++){for(var c=0;s.fieldRow[c];c++)t++;s.connection&&n++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},e.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},e.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},e.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},e.FieldTextInput.prototype.render_=function(){if(e.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0))}},e.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},e.FieldTextInput.prototype.showEditor_=function(t,n){this.workspace_=this.sourceBlock_.workspace,!(t=n||!1)&&(e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},e.FieldTextInput.prototype.showPromptEditor_=function(){e.prompt(e.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},e.FieldTextInput.prototype.showInlineEditor_=function(t){e.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},e.FieldTextInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV;e.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var o=this.workspace_.getScale(),s=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";if(t.style.fontSize=s,n.style.fontSize=s,s=e.FieldTextInput.BORDERRADIUS*o+"px",this.fullBlockClickTarget_){s=((s=this.getScaledBBox()).bottom-s.top)/2+"px";var c=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*o+"px solid "+c,t.style.borderRadius=s,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*o+"px")}return n.style.borderRadius=s,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},e.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=e.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,e.utils.dom.removeClass(this.getClickTarget_(),"editing")},e.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=e.browserEvents.conditionalBind(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=e.browserEvents.conditionalBind(t,"input",this,this.onHtmlInputChange_)},e.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(e.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},e.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==e.utils.KeyCodes.ENTER?(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.TAB&&(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},e.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,e.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_(),e.Events.setGroup(!1))},e.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},e.FieldTextInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldTextInput.prototype.isTabNavigable=function(){return!0},e.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},e.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},e.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},e.fieldRegistry.register("field_input",e.FieldTextInput),e.FieldAngle=function(t,n,o){this.clockwise_=e.FieldAngle.CLOCKWISE,this.offset_=e.FieldAngle.OFFSET,this.wrap_=e.FieldAngle.WRAP,this.round_=e.FieldAngle.ROUND,e.FieldAngle.superClass_.constructor.call(this,t,n,o),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},e.utils.object.inherits(e.FieldAngle,e.FieldTextInput),e.FieldAngle.prototype.DEFAULT_VALUE=0,e.FieldAngle.fromJson=function(t){return new e.FieldAngle(t.angle,void 0,t)},e.FieldAngle.prototype.SERIALIZABLE=!0,e.FieldAngle.ROUND=15,e.FieldAngle.HALF=50,e.FieldAngle.CLOCKWISE=!1,e.FieldAngle.OFFSET=0,e.FieldAngle.WRAP=360,e.FieldAngle.RADIUS=e.FieldAngle.HALF-1,e.FieldAngle.prototype.configure_=function(t){switch(e.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=t.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=t.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=t.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},e.FieldAngle.prototype.initView=function(){e.FieldAngle.superClass_.initView.call(this),this.symbol_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},e.FieldAngle.prototype.render_=function(){e.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},e.FieldAngle.prototype.showEditor_=function(t){e.FieldAngle.superClass_.showEditor_.call(this,t,e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD),this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.editor_),e.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},e.FieldAngle.prototype.dropdownCreate_=function(){var t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",height:2*e.FieldAngle.HALF+"px",width:2*e.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:e.FieldAngle.HALF,cy:e.FieldAngle.HALF,r:e.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF,y1:e.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var o=0;360>o;o+=15)e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF+e.FieldAngle.RADIUS,y1:e.FieldAngle.HALF,x2:e.FieldAngle.HALF+e.FieldAngle.RADIUS-(o%45==0?10:5),y2:e.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+o+","+e.FieldAngle.HALF+","+e.FieldAngle.HALF+")"},t);this.clickWrapper_=e.browserEvents.conditionalBind(t,"click",this,this.hide_),this.clickSurfaceWrapper_=e.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=e.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},e.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(e.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(e.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(e.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},e.FieldAngle.prototype.hide_=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hide()},e.FieldAngle.prototype.onMouseMove_=function(t){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),o=t.clientX-n.left-e.FieldAngle.HALF;t=t.clientY-n.top-e.FieldAngle.HALF,n=Math.atan(-t/o),isNaN(n)||(n=e.utils.math.toDegrees(n),0>o?n+=180:0<t&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},e.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},e.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,n=e.utils.math.toRadians(t%360);t=["M ",e.FieldAngle.HALF,",",e.FieldAngle.HALF];var o=e.FieldAngle.HALF,s=e.FieldAngle.HALF;if(!isNaN(n)){var c=Number(this.clockwise_),v=e.utils.math.toRadians(this.offset_),R=Math.cos(v)*e.FieldAngle.RADIUS,O=Math.sin(v)*-e.FieldAngle.RADIUS;c&&(n=2*v-n),o+=Math.cos(n)*e.FieldAngle.RADIUS,s-=Math.sin(n)*e.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-v)/Math.PI)%2),c&&(n=1-n),t.push(" l ",R,",",O," A ",e.FieldAngle.RADIUS,",",e.FieldAngle.RADIUS," 0 ",n," ",c," ",o,",",s," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",s)}},e.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var n;if(e.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===e.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:t.keyCode===e.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:t.keyCode===e.utils.KeyCodes.DOWN?n=-1:t.keyCode===e.utils.KeyCodes.UP&&(n=1),n){var o=this.getValue();this.displayMouseOrKeyboardValue_(o+n*this.round_),t.preventDefault(),t.stopPropagation()}},e.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},e.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},e.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),e.fieldRegistry.register("field_angle",e.FieldAngle),e.FieldCheckbox=function(t,n,o){this.checkChar_=null,e.FieldCheckbox.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.FieldCheckbox,e.Field),e.FieldCheckbox.prototype.DEFAULT_VALUE=!1,e.FieldCheckbox.fromJson=function(t){return new e.FieldCheckbox(t.checked,void 0,t)},e.FieldCheckbox.CHECK_CHAR="\u2713",e.FieldCheckbox.prototype.SERIALIZABLE=!0,e.FieldCheckbox.prototype.CURSOR="default",e.FieldCheckbox.prototype.configure_=function(t){e.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},e.FieldCheckbox.prototype.initView=function(){e.FieldCheckbox.superClass_.initView.call(this),e.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},e.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},e.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||e.FieldCheckbox.CHECK_CHAR},e.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},e.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},e.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},e.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},e.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},e.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},e.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},e.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},e.fieldRegistry.register("field_checkbox",e.FieldCheckbox),e.FieldColour=function(t,n,o){e.FieldColour.superClass_.constructor.call(this,t,n,o),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},e.utils.object.inherits(e.FieldColour,e.Field),e.FieldColour.fromJson=function(t){return new e.FieldColour(t.colour,void 0,t)},e.FieldColour.prototype.SERIALIZABLE=!0,e.FieldColour.prototype.CURSOR="default",e.FieldColour.prototype.isDirty_=!1,e.FieldColour.prototype.colours_=null,e.FieldColour.prototype.titles_=null,e.FieldColour.prototype.columns_=0,e.FieldColour.prototype.configure_=function(t){e.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},e.FieldColour.prototype.initView=function(){this.size_=new e.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},e.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},e.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:e.utils.colour.parse(t)},e.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},e.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},e.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),e.FieldColour.prototype.DEFAULT_VALUE=e.FieldColour.COLOURS[0],e.FieldColour.TITLES=[],e.FieldColour.COLUMNS=7,e.FieldColour.prototype.setColours=function(t,n){return this.colours_=t,n&&(this.titles_=n),this},e.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},e.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.picker_),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),e.DropDownDiv.hideIfOwner(this))},e.FieldColour.prototype.onKeyDown_=function(t){var n=!1;t.keyCode===e.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):t.keyCode===e.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):t.keyCode===e.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):t.keyCode===e.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):t.keyCode===e.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),e.DropDownDiv.hideWithoutAnimation(),n=!0),n&&t.stopPropagation()},e.FieldColour.prototype.moveHighlightBy_=function(t,n){var o=this.colours_||e.FieldColour.COLOURS,s=this.columns_||e.FieldColour.COLUMNS,c=this.highlightedIndex_%s,v=Math.floor(this.highlightedIndex_/s);c+=t,v+=n,0>t?0>c&&0<v?(c=s-1,v--):0>c&&(c=0):0<t?c>s-1&&v<Math.floor(o.length/s)-1?(c=0,v++):c>s-1&&c--:0>n?0>v&&(v=0):0<n&&v>Math.floor(o.length/s)-1&&(v=Math.floor(o.length/s)-1),this.setHighlightedCell_(this.picker_.childNodes[v].childNodes[c],v*s+c)},e.FieldColour.prototype.onMouseMove_=function(t){var n=(t=t.target)&&Number(t.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(t,n)},e.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&e.utils.dom.removeClass(t,"blocklyColourHighlighted")},e.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return n?n.childNodes[this.highlightedIndex_%t]:null},e.FieldColour.prototype.setHighlightedCell_=function(t,n){var o=this.getHighlighted_();o&&e.utils.dom.removeClass(o,"blocklyColourHighlighted"),e.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=n,e.utils.aria.setState(this.picker_,e.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},e.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.colours_||e.FieldColour.COLOURS,o=this.titles_||e.FieldColour.TITLES,s=this.getValue(),c=document.createElement("table");c.className="blocklyColourTable",c.tabIndex=0,c.dir="ltr",e.utils.aria.setRole(c,e.utils.aria.Role.GRID),e.utils.aria.setState(c,e.utils.aria.State.EXPANDED,!0),e.utils.aria.setState(c,e.utils.aria.State.ROWCOUNT,Math.floor(n.length/t)),e.utils.aria.setState(c,e.utils.aria.State.COLCOUNT,t);for(var v,R=0;R<n.length;R++){R%t==0&&(v=document.createElement("tr"),e.utils.aria.setRole(v,e.utils.aria.Role.ROW),c.appendChild(v));var O=document.createElement("td");v.appendChild(O),O.label=n[R],O.title=o[R]||n[R],O.id=e.utils.IdGenerator.getNextUniqueId(),O.setAttribute("data-index",R),e.utils.aria.setRole(O,e.utils.aria.Role.GRIDCELL),e.utils.aria.setState(O,e.utils.aria.State.LABEL,n[R]),e.utils.aria.setState(O,e.utils.aria.State.SELECTED,n[R]==s),O.style.backgroundColor=n[R],n[R]==s&&(O.className="blocklyColourSelected",this.highlightedIndex_=R)}this.onClickWrapper_=e.browserEvents.conditionalBind(c,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=e.browserEvents.conditionalBind(c,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=e.browserEvents.conditionalBind(c,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=e.browserEvents.conditionalBind(c,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=e.browserEvents.conditionalBind(c,"keydown",this,this.onKeyDown_),this.picker_=c},e.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(e.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(e.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(e.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(e.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},e.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),e.fieldRegistry.register("field_colour",e.FieldColour),e.FieldDropdown=function(t,n,o){"function"!=typeof t&&e.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],e.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,o),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},e.utils.object.inherits(e.FieldDropdown,e.Field),e.FieldDropdown.fromJson=function(t){return new e.FieldDropdown(t.options,void 0,t)},e.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},e.FieldDropdown.prototype.SERIALIZABLE=!0,e.FieldDropdown.CHECKMARK_OVERHANG=25,e.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,e.FieldDropdown.IMAGE_Y_OFFSET=5,e.FieldDropdown.IMAGE_Y_PADDING=2*e.FieldDropdown.IMAGE_Y_OFFSET,e.FieldDropdown.ARROW_CHAR=e.utils.userAgent.ANDROID?"\u25bc":"\u25be",e.FieldDropdown.prototype.CURSOR="default",e.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&e.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},e.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},e.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?e.FieldDropdown.ARROW_CHAR+" ":" "+e.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},e.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},e.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new e.utils.Coordinate(t.clientX,t.clientY):null,this.menu_.render(e.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),e.utils.dom.addClass(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.DropDownDiv.setColour(t,n)}e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},e.FieldDropdown.prototype.dropdownCreate_=function(){var t=new e.Menu;t.setRole(e.utils.aria.Role.LISTBOX),this.menu_=t;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var o=0;o<n.length;o++){var s=n[o][0],c=n[o][1];if("object"==typeof s){var v=new Image(s.width,s.height);v.src=s.src,v.alt=s.alt||"",s=v}(s=new e.MenuItem(s,c)).setRole(e.utils.aria.Role.OPTION),s.setRightToLeft(this.sourceBlock_.RTL),s.setCheckable(!0),t.addChild(s),s.setChecked(c==this.value_),c==this.value_&&(this.selectedMenuItem_=s),s.onAction(this.handleMenuActionEvent_,this)}},e.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},e.FieldDropdown.prototype.handleMenuActionEvent_=function(t){e.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},e.FieldDropdown.prototype.onItemSelected_=function(t,n){this.setValue(n.getValue())},e.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var n=!1,o=0;o<t.length;o++){var s=t[o][0];"string"==typeof s?t[o][0]=e.utils.replaceMessageReferences(s):(null!=s.alt&&(t[o][0].alt=e.utils.replaceMessageReferences(s.alt)),n=!0)}if(!(n||2>t.length)){for(n=[],o=0;o<t.length;o++)n.push(t[o][0]);o=e.utils.string.shortestStringLength(n),s=e.utils.string.commonWordPrefix(n,o);var c=e.utils.string.commonWordSuffix(n,o);!s&&!c||o<=s+c||(s&&(this.prefixField=n[0].substring(0,s-1)),c&&(this.suffixField=n[0].substr(1-c)),this.menuGenerator_=e.FieldDropdown.applyTrim_(t,s,c))}}},e.FieldDropdown.applyTrim_=function(t,n,o){for(var s=[],c=0;c<t.length;c++){var v=t[c][0],R=t[c][1];v=v.substring(n,v.length-o),s[c]=[v,R]}return s},e.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},e.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),e.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},e.FieldDropdown.prototype.doClassValidation_=function(t){for(var c,n=!1,o=this.getOptions(!0),s=0;c=o[s];s++)if(c[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},e.FieldDropdown.prototype.doValueUpdate_=function(t){e.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var o,n=0;o=t[n];n++)o[1]==this.value_&&(this.selectedOption_=o)},e.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},e.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},e.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var n=Number(t.height);t=Number(t.width);var o=!!this.borderRect_,s=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+e.FieldDropdown.IMAGE_Y_PADDING);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var c=this.svgArrow_?this.positionSVGArrow_(t+o,s/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):e.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+c+2*o,this.size_.height=s;var v=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",o+c):(v=t+c,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",o)),this.imageElement_.setAttribute("y",s/2-n/2),this.positionTextElement_(v+o,t+c)},e.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),e.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,n=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),o=e.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var s=0;this.svgArrow_&&(s=this.positionSVGArrow_(o+t,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=o+s+2*t,this.size_.height=n,this.positionTextElement_(t,o)},e.FieldDropdown.prototype.positionSVGArrow_=function(t,n){if(!this.svgArrow_)return 0;var o=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,s=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,c=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?o:t+s)+","+n+")"),c+s},e.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},e.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,o=0;o<t.length;++o){var s=t[o];Array.isArray(s)?"string"!=typeof s[1]?(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option id must be a string. Found "+s[1]+" in: ",s)):s[0]&&"string"!=typeof s[0]&&"string"!=typeof s[0].src&&(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must have a string label or image description. Found"+s[0]+" in: ",s)):(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must be an array. Found: ",s))}if(n)throw TypeError("Found invalid FieldDropdown options.")},e.fieldRegistry.register("field_dropdown",e.FieldDropdown),e.FieldLabelSerializable=function(t,n,o){e.FieldLabelSerializable.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.FieldLabelSerializable,e.FieldLabel),e.FieldLabelSerializable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabelSerializable(n,void 0,t)},e.FieldLabelSerializable.prototype.EDITABLE=!1,e.FieldLabelSerializable.prototype.SERIALIZABLE=!0,e.fieldRegistry.register("field_label_serializable",e.FieldLabelSerializable),e.FieldImage=function(t,n,o,s,c,v,R){if(!t)throw Error("Src value of an image field is required");if(t=e.utils.replaceMessageReferences(t),o=Number(e.utils.replaceMessageReferences(o)),n=Number(e.utils.replaceMessageReferences(n)),isNaN(o)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=o||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",e.FieldImage.superClass_.constructor.call(this,t,null,R),R||(this.flipRtl_=!!v,this.altText_=e.utils.replaceMessageReferences(s)||""),this.size_=new e.utils.Size(n,o+e.FieldImage.Y_PADDING),this.imageHeight_=o,this.clickHandler_=null,"function"==typeof c&&(this.clickHandler_=c),this.imageElement_=null},e.utils.object.inherits(e.FieldImage,e.Field),e.FieldImage.prototype.DEFAULT_VALUE="",e.FieldImage.fromJson=function(t){return new e.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},e.FieldImage.Y_PADDING=1,e.FieldImage.prototype.EDITABLE=!1,e.FieldImage.prototype.isDirty_=!1,e.FieldImage.prototype.configure_=function(t){e.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=e.utils.replaceMessageReferences(t.alt)||""},e.FieldImage.prototype.initView=function(){this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},e.FieldImage.prototype.updateSize_=function(){},e.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},e.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},e.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},e.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},e.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},e.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},e.FieldImage.prototype.getText_=function(){return this.altText_},e.fieldRegistry.register("field_image",e.FieldImage),e.FieldMultilineInput=function(t,n,o){e.FieldMultilineInput.superClass_.constructor.call(this,t,n,o),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},e.utils.object.inherits(e.FieldMultilineInput,e.FieldTextInput),e.FieldMultilineInput.prototype.configure_=function(t){e.FieldMultilineInput.superClass_.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},e.FieldMultilineInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldMultilineInput(n,void 0,t)},e.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},e.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},e.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},e.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return e.Field.NBSP;var n=t.split("\n");t="";for(var o=this.isOverflowedY_?this.maxLines_:n.length,s=0;s<o;s++){var c=n[s];c.length>this.maxDisplayLength?c=c.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&s===o-1&&(c=c.substring(0,c.length-3)+"..."),t+=c=c.replace(/\s/g,e.Field.NBSP),s!==o-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="\u200f"),t},e.FieldMultilineInput.prototype.doValueUpdate_=function(t){e.FieldMultilineInput.superClass_.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},e.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var n=0,o=0;o<t.length;o++){var s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[o])),n+=s}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?e.utils.dom.addClass(t,"blocklyHtmlTextAreaInputOverflowedY"):e.utils.dom.removeClass(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0)))},e.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,n=0,o=0,s=0;s<t.length;s++){var c=e.utils.dom.getTextWidth(t[s]);c>n&&(n=c),o+=this.getConstants().FIELD_TEXT_HEIGHT+(0<s?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split("\n"),c=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var v=this.getConstants().FIELD_TEXT_FONTSIZE,R=this.getConstants().FIELD_TEXT_FONTWEIGHT,O=this.getConstants().FIELD_TEXT_FONTFAMILY;for(s=0;s<t.length;s++){t[s].length>this.maxDisplayLength&&(t[s]=t[s].substring(0,this.maxDisplayLength)),c.textContent=t[s];var H=e.utils.dom.getFastTextWidth(c,v,R,O);H>n&&(n=H)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(o+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",o)),this.size_.width=n,this.size_.height=o,this.positionBorderRect_()},e.FieldMultilineInput.prototype.showEditor_=function(t,n){e.FieldMultilineInput.superClass_.showEditor_.call(this,t,n),this.forceRerender()},e.FieldMultilineInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=this.workspace_.getScale(),o=document.createElement("textarea");o.className="blocklyHtmlInput blocklyHtmlTextAreaInput",o.setAttribute("spellcheck",this.spellcheck_);var s=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";t.style.fontSize=s,o.style.fontSize=s,o.style.borderRadius=e.FieldTextInput.BORDERRADIUS*n+"px",s=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var c=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return o.style.padding=c+"px "+s+"px "+c+"px "+s+"px",s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o.style.lineHeight=s*n+"px",t.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.untypedDefaultValue_=this.value_,o.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(o),o},e.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},e.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},e.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==e.utils.KeyCodes.ENTER&&e.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},e.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),e.fieldRegistry.register("field_multilinetext",e.FieldMultilineInput),e.FieldNumber=function(t,n,o,s,c,v){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,e.FieldNumber.superClass_.constructor.call(this,t,c,v),v||this.setConstraints(n,o,s)},e.utils.object.inherits(e.FieldNumber,e.FieldTextInput),e.FieldNumber.prototype.DEFAULT_VALUE=0,e.FieldNumber.fromJson=function(t){return new e.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},e.FieldNumber.prototype.SERIALIZABLE=!0,e.FieldNumber.prototype.configure_=function(t){e.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},e.FieldNumber.prototype.setConstraints=function(t,n,o){this.setMinInternal_(t),this.setMaxInternal_(n),this.setPrecisionInternal_(o),this.setValue(this.getValue())},e.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},e.FieldNumber.prototype.getMin=function(){return this.min_},e.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},e.FieldNumber.prototype.getMax=function(){return this.max_},e.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var o=n.indexOf(".");this.decimalPlaces_=-1==o?t?0:null:n.length-o-1},e.FieldNumber.prototype.getPrecision=function(){return this.precision_},e.FieldNumber.prototype.doClassValidation_=function(t){return null===t||(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},e.FieldNumber.prototype.widgetCreate_=function(){var t=e.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMAX,this.max_),t},e.fieldRegistry.register("field_number",e.FieldNumber),e.FieldVariable=function(t,n,o,s,c){this.menuGenerator_=e.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new e.utils.Size(0,0),c&&this.configure_(c),n&&this.setValidator(n),c||this.setTypes_(o,s)},e.utils.object.inherits(e.FieldVariable,e.FieldDropdown),e.FieldVariable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.variable);return new e.FieldVariable(n,void 0,void 0,void 0,t)},e.FieldVariable.prototype.SERIALIZABLE=!0,e.FieldVariable.prototype.configure_=function(t){e.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},e.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},e.FieldVariable.prototype.shouldAddBorderRect_=function(){return e.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},e.FieldVariable.prototype.fromXml=function(t){var n=t.getAttribute("id"),o=t.textContent,s=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(n=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,o,s),null!=s&&s!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+e.Xml.domToText(t)+".");this.setValue(n.getId())},e.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},e.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");e.FieldVariable.superClass_.setSourceBlock.call(this,t)},e.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},e.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},e.FieldVariable.prototype.getVariable=function(){return this.variable_},e.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},e.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var n=e.Variables.getVariable(this.sourceBlock_.workspace,t);return n?this.typeIsAllowed_(n=n.type)?t:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},e.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=e.Variables.getVariable(this.sourceBlock_.workspace,t),e.FieldVariable.superClass_.doValueUpdate_.call(this,t)},e.FieldVariable.prototype.typeIsAllowed_=function(t){var n=this.getVariableTypes_();if(!n)return!0;for(var o=0;o<n.length;o++)if(t==n[o])return!0;return!1},e.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},e.FieldVariable.prototype.setTypes_=function(t,n){if(n=n||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var o=!1,s=0;s<t.length;s++)t[s]==n&&(o=!0);if(!o)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=t},e.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},e.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var o=this.getVariableTypes_(),s=0;s<o.length;s++){var c=this.sourceBlock_.workspace.getVariablesOfType(o[s]);n=n.concat(c)}for(n.sort(e.VariableModel.compareByName),o=[],s=0;s<n.length;s++)o[s]=[n[s].name,n[s].getId()];return o.push([e.Msg.RENAME_VARIABLE,e.RENAME_VARIABLE_ID]),e.Msg.DELETE_VARIABLE&&o.push([e.Msg.DELETE_VARIABLE.replace("%1",t),e.DELETE_VARIABLE_ID]),o},e.FieldVariable.prototype.onItemSelected_=function(t,n){if(t=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t==e.RENAME_VARIABLE_ID)return void e.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(t==e.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},e.FieldVariable.prototype.referencesVariables=function(){return!0},e.fieldRegistry.register("field_variable",e.FieldVariable),e.utils.svgPaths={},e.utils.svgPaths.point=function(t,n){return" "+t+","+n+" "},e.utils.svgPaths.curve=function(t,n){return" "+t+n.join("")},e.utils.svgPaths.moveTo=function(t,n){return" M "+t+","+n+" "},e.utils.svgPaths.moveBy=function(t,n){return" m "+t+","+n+" "},e.utils.svgPaths.lineTo=function(t,n){return" l "+t+","+n+" "},e.utils.svgPaths.line=function(t){return" l"+t.join("")},e.utils.svgPaths.lineOnAxis=function(t,n){return" "+t+" "+n+" "},e.utils.svgPaths.arc=function(t,n,o,s){return t+" "+o+" "+o+" "+n+s},e.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=e.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},e.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},e.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var o,n=t.blockStyles;for(o in n)this.blockStyles[o]=this.validatedBlockStyle_(n[o]);this.setDynamicProperties_(t)},e.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},e.blockRendering.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&null!=t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&null!=t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&null!=t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=e.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},e.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},e.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var n="auto_"+t;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(t)),{style:this.blockStyles[n],name:n}},e.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},e.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},e.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(t){var n={};return t&&e.utils.object.mixin(n,t),t=e.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=t.hex,n.colourSecondary=n.colourSecondary?e.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?e.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},e.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#fff",t,.6)||t},e.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#fff",t,.3)||t},e.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&e.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&e.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&e.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},e.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.line([e.utils.svgPaths.point(n,t/4),e.utils.svgPaths.point(2*-n,t/2),e.utils.svgPaths.point(n,t/4)])}},e.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(30,-t),e.utils.svgPaths.point(70,-t),e.utils.svgPaths.point(n,0)])}},e.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(v){var R=-(v=v?-1:1),O=o/2,H=O+2.5,V=O+.5,G=e.utils.svgPaths.point(-n,v*O);return O=e.utils.svgPaths.point(n,v*O),e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(0,v*H),e.utils.svgPaths.point(-n,R*V),G])+e.utils.svgPaths.curve("s",[e.utils.svgPaths.point(n,2.5*R),O])}var n=this.TAB_WIDTH,o=this.TAB_HEIGHT,s=t(!0),c=t(!1);return{type:this.SHAPES.PUZZLE,width:n,height:o,pathDown:c,pathUp:s}},e.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(R){return e.utils.svgPaths.line([e.utils.svgPaths.point(R*s,o),e.utils.svgPaths.point(3*R,0),e.utils.svgPaths.point(R*s,-o)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,s=(n-3)/2,c=t(1),v=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:c,pathRight:v}},e.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t))}},e.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.moveBy(0,t)+e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,-t)),o=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t)),s=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,-t));return{topLeft:n,topRight:o,bottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t)),bottomLeft:s,rightHeight:t}},e.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},e.blockRendering.ConstantProvider.prototype.createDom=function(t,n,o){this.injectCSS_(n,o),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),o=e.utils.dom.createSvgElement(e.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},o),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,e.blockRendering.Debug&&(t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t)},e.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,n){n=this.getCSS_(n),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var o=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=o:((n=document.createElement("style")).id=t,t=document.createTextNode(o),n.appendChild(t),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},e.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},e.blockRendering.Types.LEFT_CORNER=e.blockRendering.Types.LEFT_SQUARE_CORNER|e.blockRendering.Types.LEFT_ROUND_CORNER,e.blockRendering.Types.RIGHT_CORNER=e.blockRendering.Types.RIGHT_SQUARE_CORNER|e.blockRendering.Types.RIGHT_ROUND_CORNER,e.blockRendering.Types.nextTypeValue_=16777216,e.blockRendering.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(e.blockRendering.Types,t)||(e.blockRendering.Types[t]=e.blockRendering.Types.nextTypeValue_,e.blockRendering.Types.nextTypeValue_<<=1),e.blockRendering.Types[t]},e.blockRendering.Types.isField=function(t){return t.type&e.blockRendering.Types.FIELD},e.blockRendering.Types.isHat=function(t){return t.type&e.blockRendering.Types.HAT},e.blockRendering.Types.isIcon=function(t){return t.type&e.blockRendering.Types.ICON},e.blockRendering.Types.isSpacer=function(t){return t.type&e.blockRendering.Types.SPACER},e.blockRendering.Types.isInRowSpacer=function(t){return t.type&e.blockRendering.Types.IN_ROW_SPACER},e.blockRendering.Types.isInput=function(t){return t.type&e.blockRendering.Types.INPUT},e.blockRendering.Types.isExternalInput=function(t){return t.type&e.blockRendering.Types.EXTERNAL_VALUE_INPUT},e.blockRendering.Types.isInlineInput=function(t){return t.type&e.blockRendering.Types.INLINE_INPUT},e.blockRendering.Types.isStatementInput=function(t){return t.type&e.blockRendering.Types.STATEMENT_INPUT},e.blockRendering.Types.isPreviousConnection=function(t){return t.type&e.blockRendering.Types.PREVIOUS_CONNECTION},e.blockRendering.Types.isNextConnection=function(t){return t.type&e.blockRendering.Types.NEXT_CONNECTION},e.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(e.blockRendering.Types.PREVIOUS_CONNECTION|e.blockRendering.Types.NEXT_CONNECTION)},e.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&e.blockRendering.Types.LEFT_ROUND_CORNER},e.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_ROUND_CORNER},e.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&e.blockRendering.Types.LEFT_SQUARE_CORNER},e.blockRendering.Types.isRightSquareCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_SQUARE_CORNER},e.blockRendering.Types.isCorner=function(t){return t.type&e.blockRendering.Types.CORNER},e.blockRendering.Types.isJaggedEdge=function(t){return t.type&e.blockRendering.Types.JAGGED_EDGE},e.blockRendering.Types.isRow=function(t){return t.type&e.blockRendering.Types.ROW},e.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&e.blockRendering.Types.BETWEEN_ROW_SPACER},e.blockRendering.Types.isTopRow=function(t){return t.type&e.blockRendering.Types.TOP_ROW},e.blockRendering.Types.isBottomRow=function(t){return t.type&e.blockRendering.Types.BOTTOM_ROW},e.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(e.blockRendering.Types.TOP_ROW|e.blockRendering.Types.BOTTOM_ROW)},e.blockRendering.Types.isInputRow=function(t){return t.type&e.blockRendering.Types.INPUT_ROW},e.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=e.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Connection=function(t,n){e.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=e.blockRendering.Types.CONNECTION},e.utils.object.inherits(e.blockRendering.Connection,e.blockRendering.Measurable),e.blockRendering.OutputConnection=function(t,n){e.blockRendering.OutputConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.OutputConnection,e.blockRendering.Connection),e.blockRendering.PreviousConnection=function(t,n){e.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.PreviousConnection,e.blockRendering.Connection),e.blockRendering.NextConnection=function(t,n){e.blockRendering.NextConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.NextConnection,e.blockRendering.Connection),e.blockRendering.InputConnection=function(t,n){e.blockRendering.InputConnection.superClass_.constructor.call(this,t,n.connection),this.type|=e.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.InputConnection,e.blockRendering.Connection),e.blockRendering.InlineInput=function(t,n){e.blockRendering.InlineInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},e.utils.object.inherits(e.blockRendering.InlineInput,e.blockRendering.InputConnection),e.blockRendering.StatementInput=function(t,n){e.blockRendering.StatementInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},e.utils.object.inherits(e.blockRendering.StatementInput,e.blockRendering.InputConnection),e.blockRendering.ExternalValueInput=function(t,n){e.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.ExternalValueInput,e.blockRendering.InputConnection),e.blockRendering.Icon=function(t,n){e.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=n,this.isVisible=n.isVisible(),this.type|=e.blockRendering.Types.ICON,t=n.getCorrectedSize(),this.height=t.height,this.width=t.width},e.utils.object.inherits(e.blockRendering.Icon,e.blockRendering.Measurable),e.blockRendering.JaggedEdge=function(t){e.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},e.utils.object.inherits(e.blockRendering.JaggedEdge,e.blockRendering.Measurable),e.blockRendering.Field=function(t,n,o){e.blockRendering.Field.superClass_.constructor.call(this,t),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=e.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=o},e.utils.object.inherits(e.blockRendering.Field,e.blockRendering.Measurable),e.blockRendering.Hat=function(t){e.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},e.utils.object.inherits(e.blockRendering.Hat,e.blockRendering.Measurable),e.blockRendering.SquareCorner=function(t,n){e.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_SQUARE_CORNER:e.blockRendering.Types.LEFT_SQUARE_CORNER)|e.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},e.utils.object.inherits(e.blockRendering.SquareCorner,e.blockRendering.Measurable),e.blockRendering.RoundCorner=function(t,n){e.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_ROUND_CORNER:e.blockRendering.Types.LEFT_ROUND_CORNER)|e.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},e.utils.object.inherits(e.blockRendering.RoundCorner,e.blockRendering.Measurable),e.blockRendering.InRowSpacer=function(t,n){e.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},e.utils.object.inherits(e.blockRendering.InRowSpacer,e.blockRendering.Measurable),e.blockRendering.Row=function(t){this.type=e.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},e.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},e.blockRendering.Row.prototype.getLastInput=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isInput(n))return n;return null},e.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,t=0;n=this.elements[t];t++)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.TopRow=function(t){e.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},e.utils.object.inherits(e.blockRendering.TopRow,e.blockRendering.Row),e.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var n=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,o=t.getPreviousBlock();return!!t.outputConnection||n||!!o&&o.getNextBlock()==t},e.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.TopRow.prototype.measure=function(){for(var c,t=0,n=0,o=0,s=0;c=this.elements[s];s++)n+=c.width,e.blockRendering.Types.isSpacer(c)||(e.blockRendering.Types.isHat(c)?o=Math.max(o,c.ascenderHeight):t=Math.max(t,c.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow=function(t){e.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},e.utils.object.inherits(e.blockRendering.BottomRow,e.blockRendering.Row),e.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},e.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.BottomRow.prototype.measure=function(){for(var c,t=0,n=0,o=0,s=0;c=this.elements[s];s++)n+=c.width,e.blockRendering.Types.isSpacer(c)||(e.blockRendering.Types.isNextConnection(c)?o=Math.max(o,c.height):t=Math.max(t,c.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.SpacerRow=function(t,n,o){e.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=o,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new e.blockRendering.InRowSpacer(this.constants_,o)]},e.utils.object.inherits(e.blockRendering.SpacerRow,e.blockRendering.Row),e.blockRendering.SpacerRow.prototype.measure=function(){},e.blockRendering.InputRow=function(t){e.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},e.utils.object.inherits(e.blockRendering.InputRow,e.blockRendering.Row),e.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var o,t=0,n=0;o=this.elements[n];n++)this.width+=o.width,e.blockRendering.Types.isInput(o)&&(e.blockRendering.Types.isStatementInput(o)?t+=o.connectedBlockWidth:e.blockRendering.Types.isExternalInput(o)&&0!=o.connectedBlockWidth&&(t+=o.connectedBlockWidth-o.connectionWidth)),e.blockRendering.Types.isSpacer(o)||(this.height=Math.max(this.height,o.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},e.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},e.blockRendering.RenderInfo=function(t,n){this.block_=n,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new e.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new e.blockRendering.TopRow(this.constants_),this.bottomRow=new e.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},e.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new e.blockRendering.InputRow(this.constants_);this.inputRows.push(t);for(var s,n=this.block_.getIcons(),o=0;s=n[o];o++){var c=new e.blockRendering.Icon(this.constants_,s);this.isCollapsed&&s.collapseHidden?this.hiddenIcons.push(c):t.elements.push(c)}for(s=null,o=0;n=this.block_.inputList[o];o++)if(n.isVisible()){for(this.shouldStartNewRow_(n,s)&&(this.rows.push(t),t=new e.blockRendering.InputRow(this.constants_),this.inputRows.push(t)),s=0;c=n.fieldRow[s];s++)t.elements.push(new e.blockRendering.Field(this.constants_,c,n));this.addInput_(n,t),s=n}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new e.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},e.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,o=this.topRow.hasLeftSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner;this.topRow.elements.push(new o(this.constants_)),n?(t=new e.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new e.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==e.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,o=this.topRow.hasRightSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner,this.topRow.elements.push(new o(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new e.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.blockRendering.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=t.align)},e.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!(!n||t.type!=e.inputTypes.STATEMENT&&n.type!=e.inputTypes.STATEMENT&&(t.type!=e.inputTypes.VALUE&&t.type!=e.inputTypes.DUMMY||this.isInline))},e.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,t=0;n=this.rows[t];t++){var o=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var s=0;s<o.length-1;s++){n.elements.push(o[s]);var c=this.getInRowSpacing_(o[s],o[s+1]);n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,c))}n.elements.push(o[o.length-1]),n.endsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}},e.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t&&n&&e.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var c,t=0,n=0,o=0,s=0;c=this.rows[s];s++){if(c.measure(),n=Math.max(n,c.width),c.hasStatement){var v=c.getLastInput();t=Math.max(t,c.width-v.width)}o=Math.max(o,c.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,s=0;c=this.rows[s];s++)c.hasStatement&&(c.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},e.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,t=0;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var o=n.width;0<(o=this.getDesiredRowWidth_(n)-o)&&this.addAlignmentPadding_(n,o),e.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},e.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(t,n){var o=t.getFirstSpacer(),s=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align==e.constants.ALIGN.LEFT?s.width+=n:t.align==e.constants.ALIGN.CENTRE?(o.width+=n/2,s.width+=n/2):t.align==e.constants.ALIGN.RIGHT?o.width+=n:s.width+=n,t.width+=n},e.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var n=t.getLastInput(),o=t.width-n.width,s=this.statementEdge;0<(o=s-o)&&this.addAlignmentPadding_(t,o),o=t.width,s=this.getDesiredRowWidth_(t),n.width+=s-o,n.height=Math.max(n.height,t.height),t.width+=s-o,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},e.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var n=0;n<t.length;n++)this.rows.push(t[n]),n!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[n],t[n+1]))},e.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,n){var o=this.getSpacerRowHeight_(t,n),s=this.getSpacerRowWidth_(t,n);return o=new e.blockRendering.SpacerRow(this.constants_,o,s),t.hasStatement&&(o.followsStatement=!0),n.hasStatement&&(o.precedesStatement=!0),o},e.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,n){return e.blockRendering.Types.isSpacer(n)?t.yPos+n.height/2:e.blockRendering.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2):e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:t.yPos+t.height/2},e.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var s,n=t.xPos,o=0;s=t.elements[o];o++)e.blockRendering.Types.isSpacer(s)&&(s.height=t.height),s.xPos=n,s.centerline=this.getElemCenterline_(t,s),n+=s.width},e.blockRendering.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,o=0;s=this.rows[o];o++)s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks),this.recordElemPositions_(s);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},e.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},e.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},e.blockRendering.Debug.prototype.clearElems=function(){for(var n,t=0;n=this.debugElements_[t];t++)e.utils.dom.removeNode(n);this.debugElements_=[]},e.blockRendering.Debug.prototype.drawSpacerRow=function(t,n,o){if(e.blockRendering.Debug.config.rowSpacers){var s=Math.abs(t.height),c=0>t.height;c&&(n-=s),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:n,width:t.width,height:s,stroke:c?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawSpacerElem=function(t,n,o){if(e.blockRendering.Debug.config.elemSpacers){n=Math.abs(t.width);var s=0>t.width,c=s?t.xPos-n:t.xPos;o&&(c=-(c+n)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:c,y:t.centerline-t.height/2,width:n,height:t.height,stroke:"pink",fill:s?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedElem=function(t,n){if(e.blockRendering.Debug.config.elems){var o=t.xPos;n&&(o=-(o+t.width)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n=t.centerline-t.height/2,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isField(t)&&t.field instanceof e.FieldLabel&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}e.blockRendering.Types.isInput(t)&&e.blockRendering.Debug.config.connections&&this.drawConnection(t.connectionModel)},e.blockRendering.Debug.prototype.drawConnection=function(t){if(e.blockRendering.Debug.config.connections){if(t.type==e.connectionTypes.INPUT_VALUE)var n=4,o="magenta",s="none";else t.type==e.connectionTypes.OUTPUT_VALUE?(n=2,s=o="magenta"):t.type==e.connectionTypes.NEXT_STATEMENT?(n=4,o="goldenrod",s="none"):t.type==e.connectionTypes.PREVIOUS_STATEMENT&&(n=2,s=o="goldenrod");this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:n,fill:s,stroke:o},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedRow=function(t,n,o){e.blockRendering.Debug.config.rows&&(this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isTopOrBottomRow(t)||e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:o?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},e.blockRendering.Debug.prototype.drawRowWithElements=function(t,n,o){for(var s=0,c=t.elements.length;s<c;s++){var v=t.elements[s];v?e.blockRendering.Types.isSpacer(v)?this.drawSpacerElem(v,t.height,o):this.drawRenderedElem(v,o):console.warn("A row has an undefined or null element.",t,v)}this.drawRenderedRow(t,n,o)},e.blockRendering.Debug.prototype.drawBoundingBox=function(t){if(e.blockRendering.Debug.config.blockBounds){var n=t.RTL?-t.width:0;this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockRenderDebug",x:n=t.RTL?-t.widthWithChildren:0,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawDebug=function(t,n){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var c,o=0,s=0;c=n.rows[s];s++)e.blockRendering.Types.isBetweenRowSpacer(c)?this.drawSpacerRow(c,o,n.RTL):this.drawRowWithElements(c,o,n.RTL),o+=c.height;t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(t.pathObject.svgPath)},e.blockRendering.Debug.prototype.drawRender=function(t){e.blockRendering.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))},e.blockRendering.Drawer=function(t,n){this.block_=t,this.info_=n,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},e.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},e.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,t=0;n=this.info_.hiddenIcons[t];t++)n.icon.iconGroup_.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var n=this.info_.rows[t];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},e.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,n=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var s,o=0;s=n[o];o++)e.blockRendering.Types.isLeftRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:e.blockRendering.Types.isRightRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:e.blockRendering.Types.isPreviousConnection(s)?this.outlinePath_+=s.shape.pathLeft:e.blockRendering.Types.isHat(s)?this.outlinePath_+=this.constants_.START_HAT.path:e.blockRendering.Types.isSpacer(s)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",s.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("v",t.height)},e.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+e.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},e.blockRendering.Drawer.prototype.drawValueInput_=function(t){var n=t.getLastInput();this.positionExternalValueConnection_(t);var o="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+o+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight)},e.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var s=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",o)+n+e.utils.svgPaths.lineOnAxis("v",s)+this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,n=t.elements;this.positionNextConnection_();for(var v,o=0,s="",c=n.length-1;v=n[c];c--)e.blockRendering.Types.isNextConnection(v)?s+=v.shape.pathRight:e.blockRendering.Types.isLeftSquareCorner(v)?s+=e.utils.svgPaths.lineOnAxis("H",t.xPos):e.blockRendering.Types.isLeftRoundedCorner(v)?s+=this.constants_.OUTSIDE_CORNERS.bottomLeft:e.blockRendering.Types.isRightRoundedCorner(v)?(s+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):e.blockRendering.Types.isSpacer(v)&&(s+=e.utils.svgPaths.lineOnAxis("h",-1*v.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-o),this.outlinePath_+=s},e.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var n=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",n)+t}this.outlinePath_+="z"},e.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,t=0;n=this.info_.rows[t];t++)for(var s,o=0;s=n.elements[o];o++)e.blockRendering.Types.isInlineInput(s)?this.drawInlineInput_(s):(e.blockRendering.Types.isIcon(s)||e.blockRendering.Types.isField(s))&&this.layoutField_(s)},e.blockRendering.Drawer.prototype.layoutField_=function(t){if(e.blockRendering.Types.isField(t))var n=t.field.getSvgRoot();else e.blockRendering.Types.isIcon(t)&&(n=t.icon.iconGroup_);var o=t.centerline-t.height/2,s=t.xPos,c="";this.info_.RTL&&(s=-(s+t.width),t.flipRtl&&(s+=t.width,c="scale(-1 1)")),e.blockRendering.Types.isIcon(t)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+s+","+o+")"),t.icon.computeIconLocation()):n.setAttribute("transform","translate("+s+","+o+")"+c),this.info_.isInsertionMarker&&n.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var n=t.width,o=t.height,s=t.connectionOffsetY,c=t.connectionHeight+s;this.inlinePath_+=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-o/2)+e.utils.svgPaths.lineOnAxis("v",s)+t.shape.pathDown+e.utils.svgPaths.lineOnAxis("v",o-c)+e.utils.svgPaths.lineOnAxis("h",n-t.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",-o)+"z",this.positionInlineInputConnection_(t)},e.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY)}},e.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.statementEdge+n.notchOffset;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.width;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var n=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},e.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,o=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-o:o,t.baseline)}},e.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},e.Events.MarkerMove=function(t,n,o,s){var c=t?t.workspace.id:void 0;s&&s.getType()==e.ASTNode.types.WORKSPACE&&(c=s.getLocation().id),e.Events.MarkerMove.superClass_.constructor.call(this,c),this.blockId=t?t.id:null,this.oldNode=o,this.newNode=s,this.isCursor=n},e.utils.object.inherits(e.Events.MarkerMove,e.Events.UiBase),e.Events.MarkerMove.prototype.type=e.Events.MARKER_MOVE,e.Events.MarkerMove.prototype.toJson=function(){var t=e.Events.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},e.Events.MarkerMove.prototype.fromJson=function(t){e.Events.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},e.registry.register(e.registry.Type.EVENT,e.Events.MARKER_MOVE,e.Events.MarkerMove),e.blockRendering.MarkerSvg=function(t,n,o){this.workspace_=t,this.marker_=o,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=o.colour||t},e.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",e.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,e.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},e.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},e.blockRendering.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?e.blockRendering.MarkerSvg.CURSOR_CLASS:e.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},e.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},e.blockRendering.MarkerSvg.prototype.draw=function(t,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var o=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||o,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(t,n),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},e.blockRendering.MarkerSvg.prototype.showAtLocation_=function(t){var n=t.getLocation().type;t.getType()==e.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()==e.ASTNode.types.OUTPUT?this.showWithOutput_(t):n==e.connectionTypes.INPUT_VALUE?this.showWithInput_(t):n==e.connectionTypes.NEXT_STATEMENT?this.showWithNext_(t):t.getType()==e.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()==e.ASTNode.types.FIELD?this.showWithField_(t):t.getType()==e.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()==e.ASTNode.types.STACK&&this.showWithStack_(t)},e.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var n=(t=t.getSourceBlock()).width,o=t.height,s=o*e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,c=this.constants_.CURSOR_BLOCK_PADDING;if(t.previousConnection){var v=this.constants_.shapeFor(t.previousConnection);this.positionPrevious_(n,c,s,v)}else t.outputConnection?(v=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(n,o,v)):this.positionBlock_(n,c,s);this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var n=t.getWsCoordinate();t=n.x,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var n=(t=t.getLocation()).getSize().width,o=t.getSize().height;this.positionRect_(0,0,n,o),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var n=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(n),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var n=t.getLocation();t=n.getSourceBlock();var o=0;n=n.getOffsetInBlock().y;var s=t.getHeightWidth().width;this.workspace_.RTL&&(o=-s),this.positionLine_(o,n,s),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var n=(t=t.getLocation()).getHeightWidth(),o=n.width+this.constants_.CURSOR_STACK_PADDING,s=-this.constants_.CURSOR_STACK_PADDING/2,v=s;this.workspace_.RTL&&(v=-(o+s)),this.positionRect_(v,-this.constants_.CURSOR_STACK_PADDING/2,o,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},e.blockRendering.MarkerSvg.prototype.positionBlock_=function(t,n,o){t=e.utils.svgPaths.moveBy(-n,o)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionInput_=function(t){var n=t.getOffsetInBlock().x,o=t.getOffsetInBlock().y;t=e.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+n+","+o+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},e.blockRendering.MarkerSvg.prototype.positionLine_=function(t,n,o){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",o),this.currentMarkerSvg=this.markerSvgLine_},e.blockRendering.MarkerSvg.prototype.positionOutput_=function(t,n,o){t=e.utils.svgPaths.moveBy(t,0)+e.utils.svgPaths.lineOnAxis("h",-(t-o.width))+e.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+o.pathDown+e.utils.svgPaths.lineOnAxis("V",n)+e.utils.svgPaths.lineOnAxis("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionPrevious_=function(t,n,o,s){t=e.utils.svgPaths.moveBy(-n,o)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+s.pathLeft+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionRect_=function(t,n,o,s){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",o),this.markerSvgRect_.setAttribute("height",s),this.currentMarkerSvg=this.markerSvgRect_},e.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},e.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},e.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(t,n){var o=n.getSourceBlock();t=new(e.Events.get(e.Events.MARKER_MOVE))(o,this.isCursor(),t,n),e.Events.fire(t)},e.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},e.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerSvgLine_),e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},e.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",t=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},e.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.blockRendering.PathObject=function(t,n,o){this.constants=o,this.svgRoot=t,this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},e.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},e.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},e.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},e.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},e.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},e.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},e.blockRendering.PathObject.prototype.setClass_=function(t,n){n?e.utils.dom.addClass(this.svgRoot,t):e.utils.dom.removeClass(this.svgRoot,t)},e.blockRendering.PathObject.prototype.updateHighlighted=function(t){this.svgPath.setAttribute("filter",t?"url(#"+this.constants.embossFilterId+")":"none")},e.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},e.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},e.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},e.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},e.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},e.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},e.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,n){},e.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},e.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},e.blockRendering.Renderer.prototype.init=function(t,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,e.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(t),this.constants_.init()},e.blockRendering.Renderer.prototype.createDom=function(t,n){this.constants_.createDom(t,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},e.blockRendering.Renderer.prototype.refreshDom=function(t,n){var o=this.getConstants();o.dispose(),this.constants_=this.makeConstants_(),this.overrides&&e.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=o.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(t,n)},e.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},e.blockRendering.Renderer.prototype.makeConstants_=function(){return new e.blockRendering.ConstantProvider},e.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new e.blockRendering.RenderInfo(this,t)},e.blockRendering.Renderer.prototype.makeDrawer_=function(t,n){return new e.blockRendering.Drawer(t,n)},e.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!e.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new e.blockRendering.Debug(this.getConstants())},e.blockRendering.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.blockRendering.MarkerSvg(t,this.getConstants(),n)},e.blockRendering.Renderer.prototype.makePathObject=function(t,n){return new e.blockRendering.PathObject(t,n,this.constants_)},e.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},e.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},e.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(t,n,o){return!!e.Connection.getConnectionForOrphanedConnection(t,o===e.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},e.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(t,n,o){return n.type==e.connectionTypes.OUTPUT_VALUE||n.type==e.connectionTypes.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(o,t.targetBlock(),n.type)?e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},e.blockRendering.Renderer.prototype.render=function(t){e.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(t);n.measure(),this.makeDrawer_(t,n).draw()},e.geras={},e.geras.ConstantProvider=function(){e.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},e.utils.object.inherits(e.geras.ConstantProvider,e.blockRendering.ConstantProvider),e.geras.ConstantProvider.prototype.getCSS_=function(t){return e.geras.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},e.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},e.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},e.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var o,n=0;o=t.elements[n];n++)e.blockRendering.Types.isLeftSquareCorner(o)?this.steps_+=this.highlightConstants_.START_POINT:e.blockRendering.Types.isLeftRoundedCorner(o)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):e.blockRendering.Types.isPreviousConnection(o)?this.steps_+=this.notchPaths_.pathLeft:e.blockRendering.Types.isHat(o)?this.steps_+=this.startPaths_.path(this.RTL_):e.blockRendering.Types.isSpacer(o)&&0!=o.width&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",o.xPos+o.width-this.highlightOffset_));this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},e.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+e.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},e.geras.Highlighter.prototype.drawValueInput=function(t){var n=t.getLastInput();if(this.RTL_){var o=t.height-n.connectionHeight;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",o)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.Highlighter.prototype.drawStatementInput=function(t){var n=t.getLastInput();if(this.RTL_){var o=t.height-2*this.insideCornerPaths_.height;this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)},e.geras.Highlighter.prototype.drawRightSideRow=function(t){var n=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n),t.height>this.highlightOffset_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},e.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=e.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):e.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=e.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},e.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=e.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e.blockRendering.Types.isLeftRoundedCorner((t=this.info_.topRow).elements[0])?this.steps_+=e.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},e.geras.Highlighter.prototype.drawInlineInput=function(t){var n=this.highlightOffset_,o=t.xPos+t.connectionWidth,s=t.centerline-t.height/2,c=t.width-t.connectionWidth,v=s+n;this.RTL_?(s=t.connectionOffsetY-n,t=t.height-(t.connectionOffsetY+t.connectionHeight)+n,this.inlineSteps_+=e.utils.svgPaths.moveTo(o-n,v)+e.utils.svgPaths.lineOnAxis("v",s)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",t)+e.utils.svgPaths.lineOnAxis("h",c)):this.inlineSteps_+=e.utils.svgPaths.moveTo(t.xPos+t.width+n,v)+e.utils.svgPaths.lineOnAxis("v",t.height)+e.utils.svgPaths.lineOnAxis("h",-c)+e.utils.svgPaths.moveTo(o,s+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.InlineInput=function(t,n){e.geras.InlineInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.InlineInput,e.blockRendering.InlineInput),e.geras.StatementInput=function(t,n){e.geras.StatementInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.StatementInput,e.blockRendering.StatementInput),e.geras.RenderInfo=function(t,n){e.geras.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.geras.RenderInfo,e.blockRendering.RenderInfo),e.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.geras.RenderInfo.prototype.populateBottomRow_=function(){e.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},e.geras.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.geras.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.geras.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=t.align)},e.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var o,t=!1,n=0;o=this.rows[n];n++)o.hasExternalInput&&(t=!0);for(n=0;o=this.rows[n];n++){var s=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(var c=0;c<s.length-1;c++){o.elements.push(s[c]);var v=this.getInRowSpacing_(s[c],s[c+1]);o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v))}o.elements.push(s[s.length-1]),o.endsWithElemSpacer()&&(v=this.getInRowSpacing_(s[s.length-1],null),t&&o.hasDummyInput&&(v+=this.constants_.TAB_WIDTH),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v)))}}},e.geras.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&(!n||e.blockRendering.Types.isStatementInput(n)))return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(e.blockRendering.Types.isLeftRoundedCorner(t)&&n){if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||!t.hasStatement&&n.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var o=t.yPos;return e.blockRendering.Types.isField(n)||e.blockRendering.Types.isIcon(n)?(o+=n.height/2,(t.hasInlineInput||t.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=e.blockRendering.Types.isInlineInput(n)?o+n.height/2:o+t.height/2,o},e.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var s,t=0,n=null,o=this.rows.length-1;s=this.rows[o];o--)s.nextRightEdge=t,e.blockRendering.Types.isInputRow(s)&&(s.hasStatement&&this.alignStatementRow_(s),n&&n.hasStatement&&s.width<n.width?s.nextRightEdge=n.width:t=s.width,n=s);for(o=t=0;s=this.rows[o];o++)s.hasStatement?t=this.getDesiredRowWidth_(s):e.blockRendering.Types.isSpacer(s)?s.width=Math.max(t,s.nextRightEdge):(0<(t=Math.max(t,s.nextRightEdge)-s.width)&&this.addAlignmentPadding_(s,t),t=s.width)}else e.geras.RenderInfo.superClass_.alignRowElements_.call(this)},e.geras.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:e.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.geras.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,o=0;s=this.rows[o];o++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var c=n-this.topRow.ascenderHeight;s==this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,n+=c),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},e.geras.Drawer=function(t,n){e.geras.Drawer.superClass_.constructor.call(this,t,n),this.highlighter_=new e.geras.Highlighter(n)},e.utils.object.inherits(e.geras.Drawer,e.blockRendering.Drawer),e.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),e.geras.Drawer.superClass_.drawTop_.call(this)},e.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),e.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},e.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),e.geras.Drawer.superClass_.drawValueInput_.call(this,t)},e.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),e.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},e.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),e.geras.Drawer.superClass_.drawBottom_.call(this)},e.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),e.geras.Drawer.superClass_.drawLeft_.call(this)},e.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),e.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},e.geras.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(o=this.info_.RTL?-1*o:o+this.constants_.DARK_PATH_OFFSET,t.yPos+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,o=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-o:o)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},e.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=e.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},e.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},e.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(t+n)-n,s=e.utils.svgPaths.moveBy(o,o)+e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-o-n,t-o)),c=e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t+n,t+n)),v=e.utils.svgPaths.moveBy(o,-o)+e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t-o,o+n));return{width:t+n,height:t,pathTop:function(R){return R?s:""},pathBottom:function(R){return R?c:v}}},e.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(t-n)+n,s=e.utils.svgPaths.moveBy(o,o)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t-o,-o+n)),c=e.utils.svgPaths.moveBy(n,t)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t,-t+n)),v=-o,R=e.utils.svgPaths.moveBy(o,v)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(-o+n,-v-t));return{height:t,topLeft:function(O){return O?s:c},bottomLeft:function(){return R}}},e.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,o=e.utils.svgPaths.moveBy(-2,3.4-n)+e.utils.svgPaths.lineTo(-.45*t,-2.1),s=e.utils.svgPaths.lineOnAxis("v",2.5)+e.utils.svgPaths.moveBy(.97*-t,2.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(.05*-t,10),e.utils.svgPaths.point(.3*t,9.5)])+e.utils.svgPaths.moveBy(.67*t,-1.9)+e.utils.svgPaths.lineOnAxis("v",2.5),c=e.utils.svgPaths.lineOnAxis("v",-1.5)+e.utils.svgPaths.moveBy(-.92*t,-.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(-.19*t,-5.5),e.utils.svgPaths.point(0,-11)])+e.utils.svgPaths.moveBy(.92*t,1),v=e.utils.svgPaths.moveBy(-5,n-.7)+e.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:n,pathUp:function(R){return R?o:c},pathDown:function(R){return R?s:v}}},e.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:e.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},e.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:e.utils.svgPaths.lineTo(5.1,2.6)+e.utils.svgPaths.moveBy(-10.2,6.8)+e.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},e.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,n=e.utils.svgPaths.moveBy(25,-8.7)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(29.7,-6.2),e.utils.svgPaths.point(57.2,-.5),e.utils.svgPaths.point(75,8.7)]),o=e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(17.8,-9.2),e.utils.svgPaths.point(45.3,-14.9),e.utils.svgPaths.point(75,-8.7)])+e.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(s){return s?n:o}}},e.geras.PathObject=function(t,n,o){this.constants=o,this.svgRoot=t,this.svgPathDark=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},e.utils.object.inherits(e.geras.PathObject,e.blockRendering.PathObject),e.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},e.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},e.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},e.geras.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),e.geras.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},e.geras.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=e.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},e.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},e.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.geras.PathObject.prototype.updateDisabled_=function(t){e.geras.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")},e.geras.Renderer=function(t){e.geras.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null},e.utils.object.inherits(e.geras.Renderer,e.blockRendering.Renderer),e.geras.Renderer.prototype.init=function(t,n){e.geras.Renderer.superClass_.init.call(this,t,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},e.geras.Renderer.prototype.refreshDom=function(t,n){e.geras.Renderer.superClass_.refreshDom.call(this,t,n),this.getHighlightConstants().init()},e.geras.Renderer.prototype.makeConstants_=function(){return new e.geras.ConstantProvider},e.geras.Renderer.prototype.makeRenderInfo_=function(t){return new e.geras.RenderInfo(this,t)},e.geras.Renderer.prototype.makeDrawer_=function(t,n){return new e.geras.Drawer(t,n)},e.geras.Renderer.prototype.makePathObject=function(t,n){return new e.geras.PathObject(t,n,this.getConstants())},e.geras.Renderer.prototype.makeHighlightConstants_=function(){return new e.geras.HighlightConstantProvider(this.getConstants())},e.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},e.blockRendering.register("geras",e.geras.Renderer),e.thrasos={},e.thrasos.RenderInfo=function(t,n){e.thrasos.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.thrasos.RenderInfo,e.blockRendering.RenderInfo),e.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var o,t=!1,n=0;o=this.rows[n];n++)o.hasExternalInput&&(t=!0);for(n=0;o=this.rows[n];n++){var s=o.elements;o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0])));for(var c=0;c<s.length-1;c++){o.elements.push(s[c]);var v=this.getInRowSpacing_(s[c],s[c+1]);o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v))}o.elements.push(s[s.length-1]),o.endsWithElemSpacer()&&(v=this.getInRowSpacing_(s[s.length-1],null),t&&o.hasDummyInput&&(v+=this.constants_.TAB_WIDTH),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v)))}},e.thrasos.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&!n)return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))return n.notchOffset}return e.blockRendering.Types.isLeftRoundedCorner(t)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||t.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var o=t.yPos;return e.blockRendering.Types.isField(n)&&t.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):o+t.height/2},e.thrasos.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,o=0;s=this.rows[o];o++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var c=n-this.topRow.ascenderHeight;s==this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,n+=c),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline},e.thrasos.Renderer=function(t){e.thrasos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.thrasos.Renderer,e.blockRendering.Renderer),e.thrasos.Renderer.prototype.makeRenderInfo_=function(t){return new e.thrasos.RenderInfo(this,t)},e.blockRendering.register("thrasos",e.thrasos.Renderer),e.zelos={},e.zelos.ConstantProvider=function(){e.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},e.utils.object.inherits(e.zelos.ConstantProvider,e.blockRendering.ConstantProvider),e.zelos.ConstantProvider.prototype.setFontConstants_=function(t){e.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},e.zelos.ConstantProvider.prototype.init=function(){e.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},e.zelos.ConstantProvider.prototype.setDynamicProperties_=function(t){e.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},e.zelos.ConstantProvider.prototype.dispose=function(){e.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&e.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&e.utils.dom.removeNode(this.replacementGlowFilter_)},e.zelos.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(25,-t),e.utils.svgPaths.point(71,-t),e.utils.svgPaths.point(n,0)])}},e.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(o,s,c){var v=o/2;return e.utils.svgPaths.lineTo(-(c=c?-1:1)*(v=v>n?n:v),o=(s?-1:1)*o/2)+e.utils.svgPaths.lineTo(c*v,o)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(o){return(o/=2)>n?n:o},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeRounded=function(){function t(s,c,v){var R=s>o?s-o:0;return e.utils.svgPaths.arc("a","0 0,1",s=(s>o?o:s)/2,e.utils.svgPaths.point((c?-1:1)*s,(c?-1:1)*s))+e.utils.svgPaths.lineOnAxis("v",(v?1:-1)*R)+e.utils.svgPaths.arc("a","0 0,1",s,e.utils.svgPaths.point((c?1:-1)*s,(c?-1:1)*s))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(s){return(s/=2)>n?n:s},height:function(s){return s},connectionOffsetY:function(s){return s/2},connectionOffsetX:function(s){return-s},pathDown:function(s){return t(s,!1,!1)},pathUp:function(s){return t(s,!0,!1)},pathRightDown:function(s){return t(s,!1,!0)},pathRightUp:function(s){return t(s,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeSquared=function(){function t(o,s,c){return o-=2*n,e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?-1:1)*n,(s?-1:1)*n))+e.utils.svgPaths.lineOnAxis("v",(c?1:-1)*o)+e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?1:-1)*n,(s?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(o){return n},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},e.zelos.ConstantProvider.prototype.shapeFor=function(t){var n=t.getCheck();switch(!n&&t.targetConnection&&(n=t.targetConnection.getCheck()),t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:if(null!=(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},e.zelos.ConstantProvider.prototype.makeNotch=function(){function t(V){return e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/2,0),e.utils.svgPaths.point(V*c*3/4,R/2),e.utils.svgPaths.point(V*c,R)])+e.utils.svgPaths.line([e.utils.svgPaths.point(V*c,v)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/4,R/2),e.utils.svgPaths.point(V*c/2,R),e.utils.svgPaths.point(V*c,R)])+e.utils.svgPaths.lineOnAxis("h",V*s)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/2,0),e.utils.svgPaths.point(V*c*3/4,-R/2),e.utils.svgPaths.point(V*c,-R)])+e.utils.svgPaths.line([e.utils.svgPaths.point(V*c,-v)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/4,-R/2),e.utils.svgPaths.point(V*c/2,-R),e.utils.svgPaths.point(V*c,-R)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,s=n/3,c=s/3,v=o/2,R=v/2,O=t(1),H=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:O,pathRight:H}},e.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),o=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t));return{width:t,height:t,pathTop:n,pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t)),rightWidth:t,rightHeight:t,pathTopRight:o,pathBottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t))}},e.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#000",t,.15)||t},e.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#000",t,.25)||t},e.zelos.ConstantProvider.prototype.createDom=function(t,n,o){e.zelos.ConstantProvider.superClass_.createDom.call(this,t,n,o),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),o=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},e.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.zelos.TopRow=function(t){e.zelos.TopRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.TopRow,e.blockRendering.TopRow),e.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection},e.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.BottomRow=function(t){e.zelos.BottomRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.BottomRow,e.blockRendering.BottomRow),e.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},e.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.RightConnectionShape=function(t){e.zelos.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},e.utils.object.inherits(e.zelos.RightConnectionShape,e.blockRendering.Measurable),e.zelos.RenderInfo=function(t,n){e.zelos.RenderInfo.superClass_.constructor.call(this,t,n),this.topRow=new e.zelos.TopRow(this.constants_),this.bottomRow=new e.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new e.zelos.RightConnectionShape(this.constants_):null},e.utils.object.inherits(e.zelos.RenderInfo,e.blockRendering.RenderInfo),e.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.zelos.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!!n&&(t.type==e.inputTypes.STATEMENT||n.type==e.inputTypes.STATEMENT||(t.type==e.inputTypes.VALUE||t.type==e.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},e.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):e.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.zelos.RenderInfo.prototype.getInRowSpacing_=function(t,n){return t&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&e.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){if(e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var o=e.blockRendering.Types.isInputRow(t)&&t.hasStatement,s=e.blockRendering.Types.isInputRow(n)&&n.hasStatement;return s||o?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),s&&o?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):e.blockRendering.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):e.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){var o=this.width-this.startX;return e.blockRendering.Types.isInputRow(t)&&t.hasStatement||e.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o},e.zelos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(t.hasStatement&&!e.blockRendering.Types.isSpacer(n)&&!e.blockRendering.Types.isStatementInput(n))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(e.blockRendering.Types.isInlineInput(n)){var o=n.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return t.yPos+o.height/2}return e.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,t,n)},e.zelos.RenderInfo.prototype.addInput_=function(t,n){t.type==e.inputTypes.DUMMY&&n.hasDummyInput&&n.align==e.constants.ALIGN.LEFT&&t.align==e.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=t),e.zelos.RenderInfo.superClass_.addInput_.call(this,t,n)},e.zelos.RenderInfo.prototype.addAlignmentPadding_=function(t,n){if(t.rightAlignedDummyInput){for(var o,c,s=0;(c=t.elements[s])&&(e.blockRendering.Types.isSpacer(c)&&(o=c),!e.blockRendering.Types.isField(c)||c.parentInput!=t.rightAlignedDummyInput);s++);if(o)return o.width+=n,void(t.width+=n)}e.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,n)},e.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=t,o=2;o<this.rows.length-1;o+=2){var s=this.rows[o-1],c=this.rows[o],v=this.rows[o+1];if(s=2==o?!!this.topRow.hasPreviousConnection:!!s.followsStatement,v=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!v.precedesStatement,e.blockRendering.Types.isInputRow(c)&&c.hasStatement)c.measure(),n=c.width-c.getLastInput().width+t;else if(s&&(2==o||v)&&e.blockRendering.Types.isInputRow(c)&&!c.hasStatement){v=c.xPos,s=null;for(var O,R=0;O=c.elements[R];R++)e.blockRendering.Types.isSpacer(O)&&(s=O),!(s&&(e.blockRendering.Types.isField(O)||e.blockRendering.Types.isInput(O))&&v<n)||e.blockRendering.Types.isField(O)&&(O.field instanceof e.FieldLabel||O.field instanceof e.FieldImage)||(s.width+=n-v),v+=O.width}}},e.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var o,t=0,n=0;o=this.rows[n];n++)o.yPos=t,t+=o.height;this.height=t,t=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),o=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(o=n,this.rightSide.height=t,this.rightSide.width=o,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+o),this.startX=n,this.width+=n+o,this.widthWithChildren+=n+o}},e.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var o,t=0,n=0;o=this.rows[n];n++)if(e.blockRendering.Types.isInputRow(o)){t=o.elements[o.elements.length-2];var s=this.getNegativeSpacing_(o.elements[1]),c=this.getNegativeSpacing_(t),v=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(t=s+c)<v&&(s=(t=this.width-v)/2,c=t/2),o.elements.unshift(new e.blockRendering.InRowSpacer(this.constants_,-s)),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,-c))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,n=0;o=this.rows[n];n++)e.blockRendering.Types.isTopOrBottomRow(o)&&(o.elements[1].width-=t,o.elements[1].widthWithConnectedBlocks-=t),o.width-=t,o.widthWithConnectedBlocks-=t}},e.zelos.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var n=this.outputConnection.width,o=this.outputConnection.shape.type,s=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return o===s.SHAPES.ROUND?n-(o=this.height/2>(o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?o:this.height/2)*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o))):0;if(e.blockRendering.Types.isInlineInput(t)){var c=t.connectedBlock;return t=c?c.pathObject.outputShapeType:t.shape.type,c&&c.outputConnection&&(c.statementInputCount||c.nextConnection)||o==s.SHAPES.HEXAGONAL&&o!=t?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][t]}return e.blockRendering.Types.isField(t)?o==s.SHAPES.ROUND&&t.field instanceof e.FieldTextInput?n-2.75*s.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:e.blockRendering.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},e.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var n=this.rows[t-1],o=this.rows[t],s=this.rows[t+1],c=2==t,v=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement;if(c?this.topRow.hasPreviousConnection:n.followsStatement){var R=3==o.elements.length&&(o.elements[1].field instanceof e.FieldLabel||o.elements[1].field instanceof e.FieldImage);if(!c&&R)n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.MEDIUM_PADDING;else if(c||v){if(v){for(c=!1,v=0;R=o.elements[v];v++)if(e.blockRendering.Types.isInlineInput(R)&&R.connectedBlock&&!R.connectedBlock.isShadow()&&40<=R.connectedBlock.getHeightWidth().height){c=!0;break}c&&(n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},e.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),e.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},e.zelos.Drawer=function(t,n){e.zelos.Drawer.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.zelos.Drawer,e.blockRendering.Drawer),e.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},e.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):e.zelos.Drawer.superClass_.drawOutline_.call(this)},e.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():e.zelos.Drawer.superClass_.drawLeft_.call(this)},e.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=t.height-(t.precedesStatement?n:0))?e.utils.svgPaths.lineOnAxis("V",t.yPos+n):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},e.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},e.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",t.width)},e.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",-t.width)},e.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var n=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var o=t.width-2*t.connectionWidth;t=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-t.height/2)+e.utils.svgPaths.lineOnAxis("h",o)+t.shape.pathRightDown(t.height)+e.utils.svgPaths.lineOnAxis("h",-o)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(n,t)}},e.zelos.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width,s=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,c=t.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",o)+s+e.utils.svgPaths.lineOnAxis("v",c)+n+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.zelos.MarkerSvg=function(t,n,o){e.zelos.MarkerSvg.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.zelos.MarkerSvg,e.blockRendering.MarkerSvg),e.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var n=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(n),this.showCurrent_()},e.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var n=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(t),this.showCurrent_()},e.zelos.MarkerSvg.prototype.positionCircle_=function(t,n){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},e.zelos.MarkerSvg.prototype.hide=function(){e.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},e.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(e.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},e.zelos.MarkerSvg.prototype.applyColour_=function(t){e.zelos.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},e.zelos.PathObject=function(t,n,o){e.zelos.PathObject.superClass_.constructor.call(this,t,n,o),this.constants=o,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},e.utils.object.inherits(e.zelos.PathObject,e.blockRendering.PathObject),e.zelos.PathObject.prototype.setPath=function(t){e.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},e.zelos.PathObject.prototype.applyColour=function(t){for(var n in e.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.flipRTL=function(){for(var t in e.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},e.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},e.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},e.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,n){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(n?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},e.zelos.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},e.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},e.zelos.PathObject.prototype.setOutlinePath=function(t,n){(t=this.getOutlinePath_(t)).setAttribute("d",n),t.setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},e.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},e.zelos.Renderer=function(t){e.zelos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.Renderer,e.blockRendering.Renderer),e.zelos.Renderer.prototype.makeConstants_=function(){return new e.zelos.ConstantProvider},e.zelos.Renderer.prototype.makeRenderInfo_=function(t){return new e.zelos.RenderInfo(this,t)},e.zelos.Renderer.prototype.makeDrawer_=function(t,n){return new e.zelos.Drawer(t,n)},e.zelos.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.zelos.MarkerSvg(t,this.getConstants(),n)},e.zelos.Renderer.prototype.makePathObject=function(t,n){return new e.zelos.PathObject(t,n,this.getConstants())},e.zelos.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!=e.connectionTypes.INPUT_VALUE&&t.type!==e.connectionTypes.OUTPUT_VALUE},e.zelos.Renderer.prototype.getConnectionPreviewMethod=function(t,n,o){return n.type==e.connectionTypes.OUTPUT_VALUE?t.isConnected()?e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:e.zelos.Renderer.superClass_.getConnectionPreviewMethod(t,n,o)},e.blockRendering.register("zelos",e.zelos.Renderer),e.Themes.Dark=e.Theme.defineTheme("dark",{base:e.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),e.Themes.Deuteranopia={},e.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},e.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},e.Themes.Deuteranopia=new e.Theme("deuteranopia",e.Themes.Deuteranopia.defaultBlockStyles,e.Themes.Deuteranopia.categoryStyles),e.Themes.HighContrast={},e.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},e.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},e.Themes.HighContrast=new e.Theme("highcontrast",e.Themes.HighContrast.defaultBlockStyles,e.Themes.HighContrast.categoryStyles),e.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),e.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),e.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),e.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),e.Themes.Tritanopia={},e.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},e.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},e.Themes.Tritanopia=new e.Theme("tritanopia",e.Themes.Tritanopia.defaultBlockStyles,e.Themes.Tritanopia.categoryStyles),e.requires={},e}.apply(W,[]))&&(L.exports=p)},96116:function(L,W,m){var p,e;p=[m(83801)],void 0!==(e=function(t){"use strict";return t.Blocks={},t.Blocks}.apply(W,p))&&(L.exports=e)},83801:function(L,W,m){var p,e;p=[m(33164)],void 0!==(e=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var o=n.newBlock("lists_create_with_container");o.initSvg();for(var s=o.getInput("STACK").connection,c=0;c<this.itemCount_;c++){var v=n.newBlock("lists_create_with_item");v.initSvg(),s.connect(v.previousConnection),s=v.nextConnection}return o},compose:function(n){var o=n.getInputTargetBlock("STACK");for(n=[];o&&!o.isInsertionMarker();)n.push(o.valueConnection_),o=o.nextConnection&&o.nextConnection.targetBlock();for(o=0;o<this.itemCount_;o++){var s=this.getInput("ADD"+o).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),o=0;o<this.itemCount_;o++)t.Mutator.reconnect(n[o],this,"ADD"+o)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var o=0;n;){var s=this.getInput("ADD"+o);n.valueConnection_=s&&s.connection.targetConnection,o++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var o=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&o.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var n=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(n),"END"),this.setInputsInline(!0);var o=this;this.setTooltip(function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"0":"-1")})}},t.Blocks.lists_getIndex={init:function(){var n=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new t.FieldDropdown(n,function(s){s="REMOVE"==s,this.getSourceBlock().updateStatement_(s)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var o=this;this.setTooltip(function(){var s=o.getFieldValue("MODE"),c=o.getFieldValue("WHERE"),v="";switch(s+" "+c){case"GET FROM_START":case"GET FROM_END":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==c||"FROM_END"==c)&&(v+="  "+("FROM_START"==c?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),v})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var o=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",o),n},domToMutation:function(n){var o="true"==n.getAttribute("statement");this.updateStatement_(o),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var o=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var c="FROM_START"==s||"FROM_END"==s;if(c!=n){var v=this.getSourceBlock();return v.updateAt_(c),v.setFieldValue(s,"WHERE"),null}});this.getInput("AT").appendField(o,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var n=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var o=this;this.setTooltip(function(){var s=o.getFieldValue("MODE"),c=o.getFieldValue("WHERE"),v="";switch(s+" "+c){case"SET FROM_START":case"SET FROM_END":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==c||"FROM_END"==c)&&(v+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),v})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",o),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var o=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var c="FROM_START"==s||"FROM_END"==s;if(c!=n){var v=this.getSourceBlock();return v.updateAt_(c),v.setFieldValue(s,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(o,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",o),o=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",o),n},domToMutation:function(n){var o="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,o),this.updateAt_(2,n)},updateAt_:function(n,o){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),o?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(c){var v="FROM_START"==c||"FROM_END"==c;if(v!=o){var R=this.getSourceBlock();return R.updateAt_(n,v),R.setFieldValue(c,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var n=this,o=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(s){n.updateType_(s)});this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(o,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var s=n.getFieldValue("MODE");if("SPLIT"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+s)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var o=this.getInput("INPUT").connection;o.setShadowDom(null);var s=o.targetBlock();s&&(o.disconnect(),s.isShadow()?s.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=t.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var o=n.newBlock("controls_if_if");o.initSvg();for(var s=o.nextConnection,c=1;c<=this.elseifCount_;c++){var v=n.newBlock("controls_if_elseif");v.initSvg(),s.connect(v.previousConnection),s=v.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),s.connect(n.previousConnection)),o},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var o=[null],s=[null],c=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,o.push(n.valueConnection_),s.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,c=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(o,s,c)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var o=1;n;){switch(n.type){case"controls_if_elseif":var s=this.getInput("IF"+o),c=this.getInput("DO"+o);n.valueConnection_=s&&s.connection.targetConnection,n.statementConnection_=c&&c.connection.targetConnection,o++;break;case"controls_if_else":c=this.getInput("ELSE"),n.statementConnection_=c&&c.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],o=[null],s=null;this.getInput("ELSE")&&(s=this.getInput("ELSE").connection.targetConnection);for(var c=1;this.getInput("IF"+c);){var v=this.getInput("IF"+c),R=this.getInput("DO"+c);n.push(v.connection.targetConnection),o.push(R.connection.targetConnection),c++}this.updateShape_(),this.reconnectChildBlocks_(n,o,s)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,o,s){for(var c=1;c<=this.elseifCount_;c++)t.Mutator.reconnect(n[c],this,"IF"+c),t.Mutator.reconnect(o[c],this,"DO"+c);t.Mutator.reconnect(s,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var o=this.getInputTargetBlock("A"),s=this.getInputTargetBlock("B");o&&s&&!this.workspace.connectionChecker.doTypeChecks(o.outputConnection,s.outputConnection)&&(t.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==o&&(o.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(o=this.prevBlocks_[1])!==s&&(s.unplug(),!o||o.isDisposed()||o.isShadow()||this.getInput("B").connection.connect(o.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var o=this.getInputTargetBlock("THEN"),s=this.getInputTargetBlock("ELSE"),c=this.outputConnection.targetConnection;if((o||s)&&c)for(var v=0;2>v;v++){var R=1==v?o:s;R&&!R.workspace.connectionChecker.doTypeChecks(R.outputConnection,c)&&(t.Events.setGroup(n.group),c===this.prevParentConnection_?(this.unplug(),c.getSourceBlock().bumpNeighbours()):(R.unplug(),R.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=c}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var o=this.getField("VAR").getVariable(),s=o.name;if(!this.isCollapsed()&&null!=s){var c={enabled:!0};c.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",s),o=t.Variables.generateVariableFieldDom(o),(s=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.appendChild(o),c.callback=t.ContextMenu.callbackFactory(this,s),n.push(c)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==t.Events.BLOCK_MOVE){var o=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(o?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var s=t.Events.getGroup();t.Events.setGroup(n.group),this.setEnabled(o),t.Events.setGroup(s)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",o),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var o=this.getInput("DIVISOR");n?o||this.appendValueInput("DIVISOR").setCheck("Number"):o&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(n){var o=t.utils.xml.createElement("mutation");n&&o.setAttribute("name",this.getFieldValue("NAME"));for(var s=0;s<this.argumentVarModels_.length;s++){var c=t.utils.xml.createElement("arg"),v=this.argumentVarModels_[s];c.setAttribute("name",v.name),c.setAttribute("varid",v.getId()),n&&this.paramIds_&&c.setAttribute("paramId",this.paramIds_[s]),o.appendChild(c)}return this.hasStatements_||o.setAttribute("statements","false"),o},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var s,o=0;s=n.childNodes[o];o++)if("arg"==s.nodeName.toLowerCase()){var c=s.getAttribute("name");s=s.getAttribute("varid")||s.getAttribute("varId"),this.arguments_.push(c),null!=(s=t.Variables.getOrCreateVariablePackage(this.workspace,s,c,""))?this.argumentVarModels_.push(s):console.log("Failed to create a variable with name "+c+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var o=t.utils.xml.createElement("block");o.setAttribute("type","procedures_mutatorcontainer");var s=t.utils.xml.createElement("statement");s.setAttribute("name","STACK"),o.appendChild(s);for(var c=0;c<this.arguments_.length;c++){var v=t.utils.xml.createElement("block");v.setAttribute("type","procedures_mutatorarg");var R=t.utils.xml.createElement("field");R.setAttribute("name","NAME");var O=t.utils.xml.createTextNode(this.arguments_[c]);R.appendChild(O),v.appendChild(R),R=t.utils.xml.createElement("next"),v.appendChild(R),s.appendChild(v),s=R}return n=t.Xml.domToBlock(o,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var o=n.getInputTargetBlock("STACK");o&&!o.isInsertionMarker();){var s=o.getFieldValue("NAME");this.arguments_.push(s),s=this.workspace.getVariable(s,""),this.argumentVarModels_.push(s),this.paramIds_.push(o.id),o=o.nextConnection&&o.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,o){var s=this.workspace.getVariableById(n);if(""==s.type){s=s.name,o=this.workspace.getVariableById(o);for(var c=!1,v=0;v<this.argumentVarModels_.length;v++)this.argumentVarModels_[v].getId()==n&&(this.arguments_[v]=o.name,this.argumentVarModels_[v]=o,c=!0);c&&(this.displayRenamedVar_(s,o.name),t.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var o=n.name,s=!1,c=0;c<this.argumentVarModels_.length;c++)if(this.argumentVarModels_[c].getId()==n.getId()){var v=this.arguments_[c];this.arguments_[c]=o,s=!0}s&&(this.displayRenamedVar_(v,o),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,o){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var v,s=this.mutator.workspace_.getAllBlocks(!1),c=0;v=s[c];c++)"procedures_mutatorarg"==v.type&&t.Names.equals(n,v.getFieldValue("NAME"))&&v.setFieldValue(o,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var o={enabled:!0},s=this.getFieldValue("NAME");o.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",s);var c=t.utils.xml.createElement("mutation");for(c.setAttribute("name",s),s=0;s<this.arguments_.length;s++){var v=t.utils.xml.createElement("arg");v.setAttribute("name",this.arguments_[s]),c.appendChild(v)}if((s=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),s.appendChild(c),o.callback=t.ContextMenu.callbackFactory(this,s),n.push(o),!this.isCollapsed())for(s=0;s<this.argumentVarModels_.length;s++)(o={enabled:!0}).text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(c=this.argumentVarModels_[s]).name),c=t.Variables.generateVariableFieldDom(c),(v=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),v.appendChild(c),o.callback=t.ContextMenu.callbackFactory(this,v),n.push(o)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var n=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var o=this.getSourceBlock(),s=t.Mutator.findParentWs(o.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var c=(o.workspace.targetWorkspace||o.workspace).getAllBlocks(!1),v=n.toLowerCase(),R=0;R<c.length;R++)if(c[R].id!=this.getSourceBlock().id){var O=c[R].getFieldValue("NAME");if(O&&O.toLowerCase()==v)return null}return o.isInFlyout||((o=s.getVariable(n,""))&&o.name!=n&&s.renameVariableById(o.getId(),n),o||(o=s.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(o)),n},deleteIntermediateVars_:function(n){var o=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(o)for(var s=0;s<this.createdVariables_.length;s++){var c=this.createdVariables_[s];c.name!=n&&o.deleteVariableById(c.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,o){t.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(o,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",o)))},setProcedureParameters_:function(n,o){var s=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),c=s&&s.mutator&&s.mutator.isVisible();if(c||(this.quarkConnections_={},this.quarkIds_=null),o)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=o;else{if(o.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),s=this.rendered,this.rendered=!1;for(var v=0;v<this.arguments_.length;v++){var R=this.getInput("ARG"+v);R&&(this.quarkConnections_[this.quarkIds_[v]]=R=R.connection.targetConnection,c&&R&&-1==o.indexOf(this.quarkIds_[v])&&(R.disconnect(),R.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],v=0;v<this.arguments_.length;v++)n=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[v],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=o)for(v=0;v<this.arguments_.length;v++)(o=this.quarkIds_[v])in this.quarkConnections_&&(t.Mutator.reconnect(R=this.quarkConnections_[o],this,"ARG"+v)||delete this.quarkConnections_[o]);(this.rendered=s)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var o=this.getField("ARGNAME"+n);if(o){t.Events.disable();try{o.setValue(this.arguments_[n])}finally{t.Events.enable()}}else o=new t.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(t.ALIGN_RIGHT).appendField(o,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var o=0;o<this.arguments_.length;o++){var s=t.utils.xml.createElement("arg");s.setAttribute("name",this.arguments_[o]),n.appendChild(s)}return n},domToMutation:function(n){var o=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),o),o=[];for(var v,s=[],c=0;v=n.childNodes[c];c++)"arg"==v.nodeName.toLowerCase()&&(o.push(v.getAttribute("name")),s.push(v.getAttribute("paramId")));this.setProcedureParameters_(o,s)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==t.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var o=this.getProcedureCall();if(!(o=t.Procedures.getDefinition(o,this.workspace))||o.type==this.defType_&&JSON.stringify(o.getVars())==JSON.stringify(this.arguments_)||(o=null),!o){t.Events.setGroup(n.group),n=t.utils.xml.createElement("xml"),(o=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var s=this.getRelativeToSurfaceXY(),c=s.y+2*t.SNAP_RADIUS;o.setAttribute("x",s.x+t.SNAP_RADIUS*(this.RTL?-1:1)),o.setAttribute("y",c),s=this.mutationToDom(),o.appendChild(s),(s=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(c=this.getProcedureCall())||(c=t.Procedures.findLegalName("",this),this.renameProcedure("",c)),s.appendChild(t.utils.xml.createTextNode(c)),o.appendChild(s),n.appendChild(o),t.Xml.domToWorkspace(n,this.workspace),t.Events.setGroup(!1)}}else n.type==t.Events.BLOCK_DELETE?(o=this.getProcedureCall(),(o=t.Procedures.getDefinition(o,this.workspace))||(t.Events.setGroup(n.group),this.dispose(!0),t.Events.setGroup(!1))):n.type==t.Events.CHANGE&&"disabled"==n.element&&(o=this.getProcedureCall(),(o=t.Procedures.getDefinition(o,this.workspace))&&o.id==n.blockId&&((o=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(o)))},customContextMenu:function(n){if(this.workspace.isMovable()){var o={enabled:!0};o.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var s=this.getProcedureCall(),c=this.workspace;o.callback=function(){var v=t.Procedures.getDefinition(s,c);v&&(c.centerOnBlock(v.id),v.select())},n.push(o)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var o=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(o.type)){n=!0;break}o=o.getSurroundParent()}while(o);n?("procedures_defnoreturn"==o.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=o.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",o),o=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",o),n},domToMutation:function(n){var o="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,o),this.updateAt_(2,n)},updateAt_:function(n,o){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),o?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(c){var v="FROM_START"==c||"FROM_END"==c;if(v!=o){var R=this.getSourceBlock();return R.updateAt_(n,v),R.setFieldValue(c,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var n=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var n=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var o=this;n=new t.FieldDropdown(n,function(s){o.updateType_(s)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==o.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],o=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new t.FieldDropdown(n,function(s){o.updateType_(s)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==o.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var s,o=0;s=this.inputList[o];o++)for(var v,c=0;v=s.fieldRow[c];c++)if(n==v.name)return s.insertFieldAt(c,this.newQuote_(!0)),void s.insertFieldAt(c+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new t.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var o=n.newBlock("text_create_join_container");o.initSvg();for(var s=o.getInput("STACK").connection,c=0;c<this.itemCount_;c++){var v=n.newBlock("text_create_join_item");v.initSvg(),s.connect(v.previousConnection),s=v.nextConnection}return o},compose:function(n){var o=n.getInputTargetBlock("STACK");for(n=[];o&&!o.isInsertionMarker();)n.push(o.valueConnection_),o=o.nextConnection&&o.nextConnection.targetBlock();for(o=0;o<this.itemCount_;o++){var s=this.getInput("ADD"+o).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),o=0;o<this.itemCount_;o++)t.Mutator.reconnect(n[o],this,"ADD"+o)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var o=0;n;){var s=this.getInput("ADD"+o);n.valueConnection_=s&&s.connection.targetConnection,o++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var o=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&o.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(o){(o="FROM_START"==o||"FROM_END"==o)!=this.isAt_&&this.getSourceBlock().updateAt_(o)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var o=n.getFieldValue("WHERE"),s=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==o||"FROM_END"==o)&&(o="FROM_START"==o?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(s+="  "+o.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),s})},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(o={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},v=this.getField("VAR").getText(),c={text:t.Msg.DELETE_VARIABLE.replace("%1",v),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(o),n.unshift(c));else{if("variables_get"==this.type)var o="variables_set",s=t.Msg.VARIABLES_GET_CREATE_SET;else o="variables_get",s=t.Msg.VARIABLES_SET_CREATE_GET;var c={enabled:0<this.workspace.remainingCapacity()},v=this.getField("VAR").getText();c.text=s.replace("%1",v),(s=t.utils.xml.createElement("field")).setAttribute("name","VAR"),s.appendChild(t.utils.xml.createTextNode(v)),(v=t.utils.xml.createElement("block")).setAttribute("type",o),v.appendChild(s),c.callback=t.ContextMenu.callbackFactory(this,v),n.push(c)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(o,s)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();o.deleteVariableById(s.getId()),o.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(o={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},R=this.getField("VAR").getText(),v={text:t.Msg.DELETE_VARIABLE.replace("%1",R),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(o),n.unshift(v));else{var o=this.getFieldValue("VAR"),s=this.workspace.getVariableById(o).type;if("variables_get_dynamic"==this.type){o="variables_set_dynamic";var c=t.Msg.VARIABLES_GET_CREATE_SET}else o="variables_get_dynamic",c=t.Msg.VARIABLES_SET_CREATE_GET;var v={enabled:0<this.workspace.remainingCapacity()},R=this.getField("VAR").getText();v.text=c.replace("%1",R),(c=t.utils.xml.createElement("field")).setAttribute("name","VAR"),c.setAttribute("variabletype",s),c.appendChild(t.utils.xml.createTextNode(R)),(R=t.utils.xml.createElement("block")).setAttribute("type",o),R.appendChild(c),v.callback=t.ContextMenu.callbackFactory(this,R),n.push(v)}},onchange:function(n){n=this.getFieldValue("VAR"),n=t.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(o,s)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();o.deleteVariableById(s.getId()),o.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks}.apply(W,p))&&(L.exports=e)},38136:function(L,W,m){var p,e;p=[m(3731),m(32998),m(96116),m(59506)],void 0!==(e=function(t,n,o,s){"use strict";return t.setLocale(n),t.Blocks=t.Blocks||{},Object.keys(o).forEach(function(c){t.Blocks[c]=o[c]}),t.JavaScript=s,t}.apply(W,p))&&(L.exports=e)},3731:function(L,W,m){var p,e;p=[m(54678)],void 0!==(e=function(t){"use strict";return t.setLocale=function(n){t.Msg=t.Msg||{},Object.keys(n).forEach(function(o){t.Msg[o]=n[o]})},t}.apply(W,p))&&(L.exports=e)},45797:function(L,W,m){var p,e;p=[m(38136)],void 0!==(e=function(t){"use strict";return t}.apply(W,p))&&(L.exports=e)},59506:function(L,W,m){var p,e;p=[m(3731),m(29920)],void 0!==(e=function(t,n){"use strict";return t.JavaScript=n,n}.apply(W,p))&&(L.exports=e)},29920:function(L,W,m){var p,e;p=[m(33164)],void 0!==(e=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.isInitialized=!1,t.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var o=[],s=t.Variables.allDeveloperVariables(n),c=0;c<s.length;c++)o.push(this.nameDB_.getName(s[c],t.Names.DEVELOPER_VARIABLE_TYPE));for(n=t.Variables.allUsedVarModels(n),c=0;c<n.length;c++)o.push(this.nameDB_.getName(n[c].getId(),t.VARIABLE_CATEGORY_NAME));o.length&&(this.definitions_.variables="var "+o.join(", ")+";"),this.isInitialized=!0},t.JavaScript.finish=function(n){var o=t.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),o.join("\n\n")+"\n\n\n"+n},t.JavaScript.scrubNakedValue=function(n){return n+";\n"},t.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(n,o,s){var c="";if(!n.outputConnection||!n.outputConnection.targetConnection){var v=n.getCommentText();v&&(v=t.utils.string.wrap(v,this.COMMENT_WRAP-3),c+=this.prefixLines(v+"\n","// "));for(var R=0;R<n.inputList.length;R++)n.inputList[R].type==t.inputTypes.VALUE&&(v=n.inputList[R].connection.targetBlock())&&(v=this.allNestedComments(v))&&(c+=this.prefixLines(v,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),c+o+(s?"":this.blockToCode(n))},t.JavaScript.getAdjusted=function(n,o,s,c,v){s=s||0,v=v||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&s--;var R=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<s?this.valueToCode(n,o,this.ORDER_ADDITION)||R:0>s?this.valueToCode(n,o,this.ORDER_SUBTRACTION)||R:c?this.valueToCode(n,o,this.ORDER_UNARY_NEGATION)||R:this.valueToCode(n,o,v)||R,t.isNumber(n))n=Number(n)+s,c&&(n=-n);else{if(0<s){n=n+" + "+s;var O=this.ORDER_ADDITION}else 0>s&&(n=n+" - "+-s,O=this.ORDER_SUBTRACTION);c&&(n=s?"-("+n+")":"-"+n,O=this.ORDER_UNARY_NEGATION),O=Math.floor(O),v=Math.floor(v),O&&v>=O&&(n="("+n+")")}return n},t.JavaScript.colour={},t.JavaScript.colour_picker=function(n){return[t.JavaScript.quote_(n.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(n){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(n){var o=t.JavaScript.valueToCode(n,"RED",t.JavaScript.ORDER_NONE)||0,s=t.JavaScript.valueToCode(n,"GREEN",t.JavaScript.ORDER_NONE)||0;return n=t.JavaScript.valueToCode(n,"BLUE",t.JavaScript.ORDER_NONE)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+o+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(n){var o=t.JavaScript.valueToCode(n,"COLOUR1",t.JavaScript.ORDER_NONE)||"'#000000'",s=t.JavaScript.valueToCode(n,"COLOUR2",t.JavaScript.ORDER_NONE)||"'#000000'";return n=t.JavaScript.valueToCode(n,"RATIO",t.JavaScript.ORDER_NONE)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+o+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(n){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(n){for(var o=Array(n.itemCount_),s=0;s<n.itemCount_;s++)o[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"null";return["["+o.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(n){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(n,"ITEM",t.JavaScript.ORDER_NONE)||"null")+", "+(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(n){var o="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return o=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+o+"("+s+")",n.workspace.options.oneBasedIndex?[o+" + 1",t.JavaScript.ORDER_ADDITION]:[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(n){var o=n.getFieldValue("MODE")||"GET",s=n.getFieldValue("WHERE")||"FROM_START",c=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==s?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"[]";switch(s){case"FIRST":if("GET"==o)return[c+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[c+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==o)return c+".shift();\n";break;case"LAST":if("GET"==o)return[c+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[c+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==o)return c+".pop();\n";break;case"FROM_START":if(n=t.JavaScript.getAdjusted(n,"AT"),"GET"==o)return[c+"["+n+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[c+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return c+".splice("+n+", 1);\n";break;case"FROM_END":if(n=t.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==o)return[c+".slice("+n+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==o)return[c+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return c+".splice("+n+", 1);";break;case"RANDOM":if(c=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+c+", "+("GET"!=o)+")","GET"==o||"GET_REMOVE"==o)return[c,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return c+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(n){function o(){if(s.match(/^\w+$/))return"";var O=t.JavaScript.nameDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),H="var "+O+" = "+s+";\n";return s=O,H}var s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",c=n.getFieldValue("MODE")||"GET",v=n.getFieldValue("WHERE")||"FROM_START",R=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(v){case"FIRST":if("SET"==c)return s+"[0] = "+R+";\n";if("INSERT"==c)return s+".unshift("+R+");\n";break;case"LAST":if("SET"==c)return(n=o())+(s+"[")+s+".length - 1] = "+R+";\n";if("INSERT"==c)return s+".push("+R+");\n";break;case"FROM_START":if(v=t.JavaScript.getAdjusted(n,"AT"),"SET"==c)return s+"["+v+"] = "+R+";\n";if("INSERT"==c)return s+".splice("+v+", 0, "+R+");\n";break;case"FROM_END":if(v=t.JavaScript.getAdjusted(n,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),n=o(),"SET"==c)return n+(s+"[")+s+".length - "+v+"] = "+R+";\n";if("INSERT"==c)return n+(s+".splice(")+s+".length - "+v+", 0, "+R+");\n";break;case"RANDOM":if(n=o(),n+="var "+(v=t.JavaScript.nameDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+s+".length);\n","SET"==c)return n+(s+"[")+v+"] = "+R+";\n";if("INSERT"==c)return n+(s+".splice(")+v+", 0, "+R+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(n,o,s){return"FIRST"==o?"0":"FROM_END"==o?n+".length - 1 - "+s:"LAST"==o?n+".length - 1":s},t.JavaScript.lists_getSublist=function(n){var o=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",s=n.getFieldValue("WHERE1"),c=n.getFieldValue("WHERE2");if("FIRST"==s&&"LAST"==c)o+=".slice(0)";else if(o.match(/^\w+$/)||"FROM_END"!=s&&"FROM_START"==c){switch(s){case"FROM_START":var v=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":v=o+".length - "+(v=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":v="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(c){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=o+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=o+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}o=o+".slice("+v+", "+n+")"}else{v=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var R=t.JavaScript.lists.getIndex_,O={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};o=t.JavaScript.provideFunction_("subsequence"+O[s]+O[c],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==s||"FROM_START"==s?", at1":"")+("FROM_END"==c||"FROM_START"==c?", at2":"")+") {","  var start = "+R("sequence",s,"at1")+";","  var end = "+R("sequence",c,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+o+("FROM_END"==s||"FROM_START"==s?", "+v:"")+("FROM_END"==c||"FROM_START"==c?", "+n:"")+")"}return[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(n){var o=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",s="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[o+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+s+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(n){var o=t.JavaScript.valueToCode(n,"INPUT",t.JavaScript.ORDER_MEMBER),s=t.JavaScript.valueToCode(n,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))o||(o="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);o||(o="[]"),n="join"}return[o+"."+n+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(n){return[(t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(n){var o=0,s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n));do{var c=t.JavaScript.valueToCode(n,"IF"+o,t.JavaScript.ORDER_NONE)||"false",v=t.JavaScript.statementToCode(n,"DO"+o);t.JavaScript.STATEMENT_SUFFIX&&(v=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+v),s+=(0<o?" else ":"")+"if ("+c+") {\n"+v+"}",++o}while(n.getInput("IF"+o));return(n.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(v=t.JavaScript.statementToCode(n,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(v=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+v),s+=" else {\n"+v+"}"),s+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(n){var o={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],s="=="==o||"!="==o?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(n,"A",s)||"0")+" "+o+" "+(n=t.JavaScript.valueToCode(n,"B",s)||"0"),s]},t.JavaScript.logic_operation=function(n){var o="AND"==n.getFieldValue("OP")?"&&":"||",s="&&"==o?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,c=t.JavaScript.valueToCode(n,"A",s);if(n=t.JavaScript.valueToCode(n,"B",s),c||n){var v="&&"==o?"true":"false";c||(c=v),n||(n=v)}else n=c="false";return[c+" "+o+" "+n,s]},t.JavaScript.logic_negate=function(n){var o=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(n,"BOOL",o)||"true"),o]},t.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(n){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(n){return[(t.JavaScript.valueToCode(n,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(n,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=t.JavaScript.valueToCode(n,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(n){var o=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):t.JavaScript.valueToCode(n,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",s=t.JavaScript.statementToCode(n,"DO");s=t.JavaScript.addLoopTrap(s,n),n="";var c=t.JavaScript.nameDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),v=o;return o.match(/^\w+$/)||t.isNumber(o)||(n+="var "+(v=t.JavaScript.nameDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+o+";\n"),n+"for (var "+c+" = 0; "+c+" < "+v+"; "+c+"++) {\n"+s+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(n){var o="UNTIL"==n.getFieldValue("MODE"),s=t.JavaScript.valueToCode(n,"BOOL",o?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",c=t.JavaScript.statementToCode(n,"DO");return o&&(s="!"+s),"while ("+s+") {\n"+(c=t.JavaScript.addLoopTrap(c,n))+"}\n"},t.JavaScript.controls_for=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",c=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",v=t.JavaScript.valueToCode(n,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",R=t.JavaScript.statementToCode(n,"DO");if(R=t.JavaScript.addLoopTrap(R,n),t.isNumber(s)&&t.isNumber(c)&&t.isNumber(v)){var O=Number(s)<=Number(c);n="for ("+o+" = "+s+"; "+o+(O?" <= ":" >= ")+c+"; "+o,n=(1==(o=Math.abs(Number(v)))?n+(O?"++":"--"):n+(O?" += ":" -= ")+o)+") {\n"+R+"}\n"}else n="",O=s,s.match(/^\w+$/)||t.isNumber(s)||(n+="var "+(O=t.JavaScript.nameDB_.getDistinctName(o+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),s=c,c.match(/^\w+$/)||t.isNumber(c)||(n+="var "+(s=t.JavaScript.nameDB_.getDistinctName(o+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+c+";\n"),n+="var "+(c=t.JavaScript.nameDB_.getDistinctName(o+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",n=(n=t.isNumber(v)?n+(Math.abs(v)+";\n"):n+"Math.abs("+v+");\n")+"if ("+O+" > "+s+") {\n"+(t.JavaScript.INDENT+c)+" = -"+c+";\n",n+="}\n",n+="for ("+o+" = "+O+"; "+c+" >= 0 ? "+o+" <= "+s+" : "+o+" >= "+s+"; "+o+" += "+c+") {\n"+R+"}\n";return n},t.JavaScript.controls_forEach=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",c=t.JavaScript.statementToCode(n,"DO");c=t.JavaScript.addLoopTrap(c,n),n="";var v=s;return s.match(/^\w+$/)||(n+="var "+(v=t.JavaScript.nameDB_.getDistinctName(o+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),n+"for (var "+(s=t.JavaScript.nameDB_.getDistinctName(o+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+v+") {\n"+(c=t.JavaScript.INDENT+o+" = "+v+"["+s+"];\n"+c)+"}\n"},t.JavaScript.controls_flow_statements=function(n){var o="";if(t.JavaScript.STATEMENT_PREFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),t.JavaScript.STATEMENT_PREFIX){var s=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);s&&!s.suppressPrefixSuffix&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,s))}switch(n.getFieldValue("FLOW")){case"BREAK":return o+"break;\n";case"CONTINUE":return o+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(n){var o={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],s=o[0],c=t.JavaScript.valueToCode(n,"A",o=o[1])||"0";return n=t.JavaScript.valueToCode(n,"B",o)||"0",s?[c+s+n,o]:["Math.pow("+c+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(n){var o=n.getFieldValue("OP");if("NEG"==o)return"-"==(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,t.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==o||"COS"==o||"TAN"==o?t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0",o){case"ABS":var s="Math.abs("+n+")";break;case"ROOT":s="Math.sqrt("+n+")";break;case"LN":s="Math.log("+n+")";break;case"EXP":s="Math.exp("+n+")";break;case"POW10":s="Math.pow(10,"+n+")";break;case"ROUND":s="Math.round("+n+")";break;case"ROUNDUP":s="Math.ceil("+n+")";break;case"ROUNDDOWN":s="Math.floor("+n+")";break;case"SIN":s="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":s="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":s="Math.tan("+n+" / 180 * Math.PI)"}if(s)return[s,t.JavaScript.ORDER_FUNCTION_CALL];switch(o){case"LOG10":s="Math.log("+n+") / Math.log(10)";break;case"ASIN":s="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":s="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":s="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+o)}return[s,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(n){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(n){var o=t.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",s=n.getFieldValue("PROPERTY");if("PRIME"==s)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+o+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(s){case"EVEN":var c=o+" % 2 == 0";break;case"ODD":c=o+" % 2 == 1";break;case"WHOLE":c=o+" % 1 == 0";break;case"POSITIVE":c=o+" > 0";break;case"NEGATIVE":c=o+" < 0";break;case"DIVISIBLE_BY":c=o+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[c,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(n){var o=t.JavaScript.valueToCode(n,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(n=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+o+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(n){var o=n.getFieldValue("OP");switch(o){case"SUM":n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(o=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(o=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(o=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(o=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(o=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+o)}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(n){return[(t.JavaScript.valueToCode(n,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"0")+", "+(t.JavaScript.valueToCode(n,"LOW",t.JavaScript.ORDER_NONE)||"0")+"), "+(n=t.JavaScript.valueToCode(n,"HIGH",t.JavaScript.ORDER_NONE)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(n){var o=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"0";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+o+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(n){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(n){var o=t.JavaScript.valueToCode(n,"X",t.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(n,"Y",t.JavaScript.ORDER_NONE)||"0")+", "+o+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),s&&(s=t.JavaScript.prefixLines(s,t.JavaScript.INDENT));var c="";t.JavaScript.INFINITE_LOOP_TRAP&&(c=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,n),t.JavaScript.INDENT));var v=t.JavaScript.statementToCode(n,"STACK"),R=t.JavaScript.valueToCode(n,"RETURN",t.JavaScript.ORDER_NONE)||"",O="";v&&R&&(O=s),R&&(R=t.JavaScript.INDENT+"return "+R+";\n");for(var H=[],V=n.getVars(),G=0;G<V.length;G++)H[G]=t.JavaScript.nameDB_.getName(V[G],t.VARIABLE_CATEGORY_NAME);return s="function "+o+"("+H.join(", ")+") {\n"+s+c+v+O+R+"}",s=t.JavaScript.scrub_(n,s),t.JavaScript.definitions_["%"+o]=s,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(n){for(var o=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s=[],c=n.getVars(),v=0;v<c.length;v++)s[v]=t.JavaScript.valueToCode(n,"ARG"+v,t.JavaScript.ORDER_NONE)||"null";return[o+"("+s.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(n){return t.JavaScript.procedures_callreturn(n)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(n){var o="if ("+(t.JavaScript.valueToCode(n,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)),n.hasReturnValue_?(n=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"null",o+=t.JavaScript.INDENT+"return "+n+";\n"):o+=t.JavaScript.INDENT+"return;\n",o+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(n){return[t.JavaScript.quote_(n.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(n){var o=-1!=(n=t.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?t.JavaScript.ORDER_ADDITION:t.JavaScript.ORDER_ATOMIC;return[n,o]},t.JavaScript.text.forceString_=function(n){return t.JavaScript.text.forceString_.strRegExp.test(n)?[n,t.JavaScript.ORDER_ATOMIC]:["String("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return n=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''",t.JavaScript.text.forceString_(n);case 2:var o=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"ADD1",t.JavaScript.ORDER_NONE)||"''",[n=t.JavaScript.text.forceString_(o)[0]+" + "+t.JavaScript.text.forceString_(n)[0],t.JavaScript.ORDER_ADDITION];default:o=Array(n.itemCount_);for(var s=0;s<n.itemCount_;s++)o[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"''";return[n="["+o.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return n=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",o+" += "+t.JavaScript.text.forceString_(n)[0]+";\n"},t.JavaScript.text_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(n){var o="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return o=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+o+"("+s+")",n.workspace.options.oneBasedIndex?[o+" + 1",t.JavaScript.ORDER_ADDITION]:[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(n){var o=n.getFieldValue("WHERE")||"FROM_START",s=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==o?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(o){case"FIRST":return[s+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[s+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[s+".charAt("+(n=t.JavaScript.getAdjusted(n,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[s+".slice("+(n=t.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(n,o,s){return"FIRST"==o?"0":"FROM_END"==o?n+".length - 1 - "+s:"LAST"==o?n+".length - 1":s},t.JavaScript.text_getSubstring=function(n){var o=n.getFieldValue("WHERE1"),s=n.getFieldValue("WHERE2"),c="FROM_END"!=o&&"LAST"!=o&&"FROM_END"!=s&&"LAST"!=s,v=t.JavaScript.valueToCode(n,"STRING",c?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''";if("FIRST"==o&&"LAST"==s)return[v,t.JavaScript.ORDER_NONE];if(v.match(/^'?\w+'?$/)||c){switch(o){case"FROM_START":c=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":c=v+".length - "+(c=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":c="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(s){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=v+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=v+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}o=v+".slice("+c+", "+n+")"}else{c=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var R=t.JavaScript.text.getIndex_,O={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};o=t.JavaScript.provideFunction_("subsequence"+O[o]+O[s],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==o||"FROM_START"==o?", at1":"")+("FROM_END"==s||"FROM_START"==s?", at2":"")+") {","  var start = "+R("sequence",o,"at1")+";","  var end = "+R("sequence",s,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+v+("FROM_END"==o||"FROM_START"==o?", "+c:"")+("FROM_END"==s||"FROM_START"==s?", "+n:"")+")"}return[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(n){var o={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=t.JavaScript.valueToCode(n,"TEXT",o?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[o?n+o:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(n){var o={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(n){return"window.alert("+(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(n){var o="window.prompt("+(n.getField("TEXT")?t.JavaScript.quote_(n.getFieldValue("TEXT")):t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(o="Number("+o+")"),[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(n){var o=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+o+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_replace=function(n){var o=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+o+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_reverse=function(n){return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.variables={},t.JavaScript.variables_get=function(n){return[t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(n){var o=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+o+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript}.apply(W,p))&&(L.exports=e)},32998:function(L,W,m){var p,e;p=[m(3731)],void 0!==(e=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg}.apply(W,p))&&(L.exports=e)},26692:L=>{!function(){"use strict";L.exports=function(m){return(m instanceof Buffer?m:Buffer.from(m.toString(),"binary")).toString("base64")}}()},4640:(L,W,m)=>{"use strict";var y=m(4320),p=m(23330),e=p(y("String.prototype.indexOf"));L.exports=function(n,o){var s=y(n,!!o);return"function"==typeof s&&e(n,".prototype.")>-1?p(s):s}},23330:(L,W,m)=>{"use strict";var y=m(21113),p=m(4320),e=p("%Function.prototype.apply%"),t=p("%Function.prototype.call%"),n=p("%Reflect.apply%",!0)||y.call(t,e),o=p("%Object.getOwnPropertyDescriptor%",!0),s=p("%Object.defineProperty%",!0),c=p("%Math.max%");if(s)try{s({},"a",{value:1})}catch(R){s=null}L.exports=function(O){var H=n(y,t,arguments);if(o&&s){var V=o(H,"length");V.configurable&&s(H,"length",{value:1+c(0,O.length-(arguments.length-1))})}return H};var v=function(){return n(y,e,arguments)};s?s(L.exports,"apply",{value:v}):L.exports.apply=v},76216:(L,W)=>{"use strict";W.parse=function(s,c){if("string"!=typeof s)throw new TypeError("argument str must be a string");for(var v={},R=c||{},O=s.split(p),H=R.decode||m,V=0;V<O.length;V++){var G=O[V],Z=G.indexOf("=");if(!(Z<0)){var vt=G.substr(0,Z).trim(),it=G.substr(++Z,G.length).trim();'"'==it[0]&&(it=it.slice(1,-1)),null==v[vt]&&(v[vt]=o(it,H))}}return v},W.serialize=function(s,c,v){var R=v||{},O=R.encode||y;if("function"!=typeof O)throw new TypeError("option encode is invalid");if(!e.test(s))throw new TypeError("argument name is invalid");var H=O(c);if(H&&!e.test(H))throw new TypeError("argument val is invalid");var V=s+"="+H;if(null!=R.maxAge){var G=R.maxAge-0;if(isNaN(G)||!isFinite(G))throw new TypeError("option maxAge is invalid");V+="; Max-Age="+Math.floor(G)}if(R.domain){if(!e.test(R.domain))throw new TypeError("option domain is invalid");V+="; Domain="+R.domain}if(R.path){if(!e.test(R.path))throw new TypeError("option path is invalid");V+="; Path="+R.path}if(R.expires){if("function"!=typeof R.expires.toUTCString)throw new TypeError("option expires is invalid");V+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(V+="; HttpOnly"),R.secure&&(V+="; Secure"),R.sameSite)switch("string"==typeof R.sameSite?R.sameSite.toLowerCase():R.sameSite){case!0:V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"strict":V+="; SameSite=Strict";break;case"none":V+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return V};var m=decodeURIComponent,y=encodeURIComponent,p=/; */,e=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(s,c){try{return c(s)}catch(v){return s}}},82344:(L,W,m)=>{m(21514),m(72190);var y=m(52457);L.exports=y.Array.from},12557:(L,W,m)=>{m(99025);var y=m(52457);L.exports=y.Array.isArray},87119:(L,W,m)=>{m(30933);var y=m(6747);L.exports=y("Array").concat},87183:(L,W,m)=>{m(23483),m(79445);var y=m(6747);L.exports=y("Array").entries},94154:(L,W,m)=>{m(24572);var y=m(6747);L.exports=y("Array").filter},5599:(L,W,m)=>{m(40655);var y=m(6747);L.exports=y("Array").find},65009:(L,W,m)=>{m(91762);var y=m(6747);L.exports=y("Array").forEach},40844:(L,W,m)=>{m(38582);var y=m(6747);L.exports=y("Array").includes},86470:(L,W,m)=>{m(13950);var y=m(6747);L.exports=y("Array").indexOf},57818:(L,W,m)=>{m(78713);var y=m(6747);L.exports=y("Array").map},96918:(L,W,m)=>{m(94775);var y=m(6747);L.exports=y("Array").slice},74727:(L,W,m)=>{m(8195);var y=m(6747);L.exports=y("Array").splice},98088:(L,W,m)=>{m(23483),m(21514);var y=m(50806);L.exports=y},48023:(L,W,m)=>{var y=m(61517),p=m(87119),e=Array.prototype;L.exports=function(t){var n=t.concat;return t===e||y(e,t)&&n===e.concat?p:n}},8425:(L,W,m)=>{var y=m(61517),p=m(94154),e=Array.prototype;L.exports=function(t){var n=t.filter;return t===e||y(e,t)&&n===e.filter?p:n}},61008:(L,W,m)=>{var y=m(61517),p=m(5599),e=Array.prototype;L.exports=function(t){var n=t.find;return t===e||y(e,t)&&n===e.find?p:n}},18583:(L,W,m)=>{var y=m(61517),p=m(40844),e=m(96040),t=Array.prototype,n=String.prototype;L.exports=function(o){var s=o.includes;return o===t||y(t,o)&&s===t.includes?p:"string"==typeof o||o===n||y(n,o)&&s===n.includes?e:s}},84676:(L,W,m)=>{var y=m(61517),p=m(86470),e=Array.prototype;L.exports=function(t){var n=t.indexOf;return t===e||y(e,t)&&n===e.indexOf?p:n}},59032:(L,W,m)=>{var y=m(61517),p=m(57818),e=Array.prototype;L.exports=function(t){var n=t.map;return t===e||y(e,t)&&n===e.map?p:n}},70660:(L,W,m)=>{var y=m(61517),p=m(96918),e=Array.prototype;L.exports=function(t){var n=t.slice;return t===e||y(e,t)&&n===e.slice?p:n}},12256:(L,W,m)=>{var y=m(61517),p=m(74727),e=Array.prototype;L.exports=function(t){var n=t.splice;return t===e||y(e,t)&&n===e.splice?p:n}},14475:(L,W,m)=>{var y=m(61517),p=m(91293),e=String.prototype;L.exports=function(t){var n=t.startsWith;return"string"==typeof t||t===e||y(e,t)&&n===e.startsWith?p:n}},98711:(L,W,m)=>{m(35249);var y=m(52457),p=m(66864);y.JSON||(y.JSON={stringify:JSON.stringify}),L.exports=function(t,n,o){return p(y.JSON.stringify,null,arguments)}},98169:(L,W,m)=>{m(41423);var y=m(52457);L.exports=y.Object.assign},31916:(L,W,m)=>{m(81892);var p=m(52457).Object,e=L.exports=function(n,o){return p.defineProperties(n,o)};p.defineProperties.sham&&(e.sham=!0)},47429:(L,W,m)=>{m(80247);var p=m(52457).Object,e=L.exports=function(n,o,s){return p.defineProperty(n,o,s)};p.defineProperty.sham&&(e.sham=!0)},2487:(L,W,m)=>{m(22700);var y=m(52457);L.exports=y.Object.entries},77626:(L,W,m)=>{m(36342);var p=m(52457).Object,e=L.exports=function(n,o){return p.getOwnPropertyDescriptor(n,o)};p.getOwnPropertyDescriptor.sham&&(e.sham=!0)},81043:(L,W,m)=>{m(4878);var y=m(52457);L.exports=y.Object.getOwnPropertyDescriptors},98838:(L,W,m)=>{m(57479);var y=m(52457);L.exports=y.Object.getOwnPropertySymbols},63977:(L,W,m)=>{m(21165);var y=m(52457);L.exports=y.Object.keys},14099:(L,W,m)=>{m(10153),m(23483),m(79445),m(56143),m(35503),m(54677),m(13013),m(21514);var y=m(52457);L.exports=y.Promise},96040:(L,W,m)=>{m(53030);var y=m(6747);L.exports=y("String").includes},91293:(L,W,m)=>{m(35828);var y=m(6747);L.exports=y("String").startsWith},1816:(L,W,m)=>{m(30933),m(79445),m(57479),m(39334),m(27014),m(57071),m(58666),m(15816),m(14740),m(20950),m(76499),m(94696),m(72105),m(5247),m(53825),m(22529),m(90591),m(2757),m(58956),m(32257);var y=m(52457);L.exports=y.Symbol},64776:(L,W,m)=>{m(23483),m(79445),m(21514),m(15816);var y=m(79182);L.exports=y.f("iterator")},65988:(L,W,m)=>{m(23483),m(79445),m(26054);var y=m(52457);L.exports=y.WeakMap},13770:(L,W,m)=>{var y=m(82422);L.exports=y},66715:(L,W,m)=>{var y=m(30260);L.exports=y},46481:(L,W,m)=>{var y=m(31216);L.exports=y},81788:(L,W,m)=>{var y=m(30376);L.exports=y},38637:(L,W,m)=>{var y=m(88334);L.exports=y},48414:(L,W,m)=>{var y=m(68379);L.exports=y},30595:(L,W,m)=>{var y=m(42905);L.exports=y},83930:(L,W,m)=>{var y=m(31545);L.exports=y},41076:(L,W,m)=>{var y=m(39565);L.exports=y},27109:(L,W,m)=>{var y=m(63122);L.exports=y},35841:(L,W,m)=>{var y=m(76650);L.exports=y},5643:(L,W,m)=>{var y=m(51266);L.exports=y},50606:(L,W,m)=>{var y=m(69265);L.exports=y},98222:(L,W,m)=>{var y=m(64781);m(22977),m(17724),m(79178),m(50162),L.exports=y},16487:(L,W,m)=>{var y=m(56219);m(83066),m(40338),m(23560),m(61546),m(70214),m(96506),m(82356),L.exports=y},9735:(L,W,m)=>{var y=m(78921);L.exports=y},6567:(L,W,m)=>{var y=m(74258),p=m(14563),e=m(98217),t=y.TypeError;L.exports=function(n){if(p(n))return n;throw t(e(n)+" is not a function")}},6767:(L,W,m)=>{var y=m(74258),p=m(2817),e=m(98217),t=y.TypeError;L.exports=function(n){if(p(n))return n;throw t(e(n)+" is not a constructor")}},67553:(L,W,m)=>{var y=m(74258),p=m(14563),e=y.String,t=y.TypeError;L.exports=function(n){if("object"==typeof n||p(n))return n;throw t("Can't set "+e(n)+" as a prototype")}},74159:L=>{L.exports=function(){}},7561:(L,W,m)=>{var y=m(74258),p=m(61517),e=y.TypeError;L.exports=function(t,n){if(p(n,t))return t;throw e("Incorrect invocation")}},49403:(L,W,m)=>{var y=m(74258),p=m(9616),e=y.String,t=y.TypeError;L.exports=function(n){if(p(n))return n;throw t(e(n)+" is not an object")}},39749:(L,W,m)=>{var y=m(77054);L.exports=y(function(){if("function"==typeof ArrayBuffer){var p=new ArrayBuffer(8);Object.isExtensible(p)&&Object.defineProperty(p,"a",{value:8})}})},45900:(L,W,m)=>{"use strict";var y=m(93949).forEach,e=m(95750)("forEach");L.exports=e?[].forEach:function(n){return y(this,n,arguments.length>1?arguments[1]:void 0)}},75058:(L,W,m)=>{"use strict";var y=m(74258),p=m(94640),e=m(45439),t=m(34972),n=m(99985),o=m(44821),s=m(2817),c=m(25979),v=m(13493),R=m(72442),O=m(50806),H=y.Array;L.exports=function(G){var Z=t(G),vt=s(this),it=arguments.length,ot=it>1?arguments[1]:void 0,wt=void 0!==ot;wt&&(ot=p(ot,it>2?arguments[2]:void 0));var lt,at,bt,tt,Rt,mt,ct=O(Z),yt=0;if(!ct||this==H&&o(ct))for(lt=c(Z),at=vt?new this(lt):H(lt);lt>yt;yt++)mt=wt?ot(Z[yt],yt):Z[yt],v(at,yt,mt);else for(Rt=(tt=R(Z,ct)).next,at=vt?new this:[];!(bt=e(Rt,tt)).done;yt++)mt=wt?n(tt,ot,[bt.value,yt],!0):bt.value,v(at,yt,mt);return at.length=yt,at}},8440:(L,W,m)=>{var y=m(73684),p=m(69723),e=m(25979),t=function(n){return function(o,s,c){var H,v=y(o),R=e(v),O=p(c,R);if(n&&s!=s){for(;R>O;)if((H=v[O++])!=H)return!0}else for(;R>O;O++)if((n||O in v)&&v[O]===s)return n||O||0;return!n&&-1}};L.exports={includes:t(!0),indexOf:t(!1)}},93949:(L,W,m)=>{var y=m(94640),p=m(94800),e=m(8317),t=m(34972),n=m(25979),o=m(47137),s=p([].push),c=function(v){var R=1==v,O=2==v,H=3==v,V=4==v,G=6==v,Z=7==v,vt=5==v||G;return function(it,ot,wt,ct){for(var dt,nt,yt=t(it),lt=e(yt),at=y(ot,wt),bt=n(lt),tt=0,Rt=ct||o,mt=R?Rt(it,bt):O||Z?Rt(it,0):void 0;bt>tt;tt++)if((vt||tt in lt)&&(nt=at(dt=lt[tt],tt,yt),v))if(R)mt[tt]=nt;else if(nt)switch(v){case 3:return!0;case 5:return dt;case 6:return tt;case 2:s(mt,dt)}else switch(v){case 4:return!1;case 7:s(mt,dt)}return G?-1:H||V?V:mt}};L.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},54647:(L,W,m)=>{var y=m(77054),p=m(35009),e=m(97502),t=p("species");L.exports=function(n){return e>=51||!y(function(){var o=[];return(o.constructor={})[t]=function(){return{foo:1}},1!==o[n](Boolean).foo})}},95750:(L,W,m)=>{"use strict";var y=m(77054);L.exports=function(p,e){var t=[][p];return!!t&&y(function(){t.call(null,e||function(){throw 1},1)})}},58467:(L,W,m)=>{var y=m(74258),p=m(69723),e=m(25979),t=m(13493),n=y.Array,o=Math.max;L.exports=function(s,c,v){for(var R=e(s),O=p(c,R),H=p(void 0===v?R:v,R),V=n(o(H-O,0)),G=0;O<H;O++,G++)t(V,G,s[O]);return V.length=G,V}},64716:(L,W,m)=>{var y=m(94800);L.exports=y([].slice)},53904:(L,W,m)=>{var y=m(58467),p=Math.floor,e=function(o,s){var c=o.length,v=p(c/2);return c<8?t(o,s):n(o,e(y(o,0,v),s),e(y(o,v),s),s)},t=function(o,s){for(var R,O,c=o.length,v=1;v<c;){for(O=v,R=o[v];O&&s(o[O-1],R)>0;)o[O]=o[--O];O!==v++&&(o[O]=R)}return o},n=function(o,s,c,v){for(var R=s.length,O=c.length,H=0,V=0;H<R||V<O;)o[H+V]=H<R&&V<O?v(s[H],c[V])<=0?s[H++]:c[V++]:H<R?s[H++]:c[V++];return o};L.exports=e},83758:(L,W,m)=>{var y=m(74258),p=m(62845),e=m(2817),t=m(9616),o=m(35009)("species"),s=y.Array;L.exports=function(c){var v;return p(c)&&(e(v=c.constructor)&&(v===s||p(v.prototype))||t(v)&&null===(v=v[o]))&&(v=void 0),void 0===v?s:v}},47137:(L,W,m)=>{var y=m(83758);L.exports=function(p,e){return new(y(p))(0===e?0:e)}},99985:(L,W,m)=>{var y=m(49403),p=m(26151);L.exports=function(e,t,n,o){try{return o?t(y(n)[0],n[1]):t(n)}catch(s){p(e,"throw",s)}}},85306:(L,W,m)=>{var p=m(35009)("iterator"),e=!1;try{var t=0,n={next:function(){return{done:!!t++}},return:function(){e=!0}};n[p]=function(){return this},Array.from(n,function(){throw 2})}catch(o){}L.exports=function(o,s){if(!s&&!e)return!1;var c=!1;try{var v={};v[p]=function(){return{next:function(){return{done:c=!0}}}},o(v)}catch(R){}return c}},14592:(L,W,m)=>{var y=m(94800),p=y({}.toString),e=y("".slice);L.exports=function(t){return e(p(t),8,-1)}},27870:(L,W,m)=>{var y=m(74258),p=m(68118),e=m(14563),t=m(14592),o=m(35009)("toStringTag"),s=y.Object,c="Arguments"==t(function(){return arguments}());L.exports=p?t:function(R){var O,H,V;return void 0===R?"Undefined":null===R?"Null":"string"==typeof(H=function(R,O){try{return R[O]}catch(H){}}(O=s(R),o))?H:c?t(O):"Object"==(V=t(O))&&e(O.callee)?"Arguments":V}},56510:(L,W,m)=>{var y=m(94800),p=m(58467),e=y("".replace),t=y("".split),n=y([].join),o=String(Error("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(o),v=/@[^\n]*\n/.test(o)&&!/zxcasd/.test(o);L.exports=function(R,O){if("string"!=typeof R)return R;if(c)for(;O--;)R=e(R,s,"");else if(v)return n(p(t(R,"\n"),O),"\n");return R}},82639:(L,W,m)=>{"use strict";var y=m(94800),p=m(32914),e=m(10344).getWeakData,t=m(49403),n=m(9616),o=m(7561),s=m(74266),c=m(93949),v=m(68739),R=m(46053),O=R.set,H=R.getterFor,V=c.find,G=c.findIndex,Z=y([].splice),vt=0,it=function(ct){return ct.frozen||(ct.frozen=new ot)},ot=function(){this.entries=[]},wt=function(ct,yt){return V(ct.entries,function(lt){return lt[0]===yt})};ot.prototype={get:function(ct){var yt=wt(this,ct);if(yt)return yt[1]},has:function(ct){return!!wt(this,ct)},set:function(ct,yt){var lt=wt(this,ct);lt?lt[1]=yt:this.entries.push([ct,yt])},delete:function(ct){var yt=G(this.entries,function(lt){return lt[0]===ct});return~yt&&Z(this.entries,yt,1),!!~yt}},L.exports={getConstructor:function(ct,yt,lt,at){var bt=ct(function(dt,nt){o(dt,tt),O(dt,{type:yt,id:vt++,frozen:void 0}),null!=nt&&s(nt,dt[at],{that:dt,AS_ENTRIES:lt})}),tt=bt.prototype,Rt=H(yt),mt=function(dt,nt,st){var Gt=Rt(dt),It=e(t(nt),!0);return!0===It?it(Gt).set(nt,st):It[Gt.id]=st,dt};return p(tt,{delete:function(dt){var nt=Rt(this);if(!n(dt))return!1;var st=e(dt);return!0===st?it(nt).delete(dt):st&&v(st,nt.id)&&delete st[nt.id]},has:function(nt){var st=Rt(this);if(!n(nt))return!1;var Gt=e(nt);return!0===Gt?it(st).has(nt):Gt&&v(Gt,st.id)}}),p(tt,lt?{get:function(nt){var st=Rt(this);if(n(nt)){var Gt=e(nt);return!0===Gt?it(st).get(nt):Gt?Gt[st.id]:void 0}},set:function(nt,st){return mt(this,nt,st)}}:{add:function(nt){return mt(this,nt,!0)}}),bt}}},53303:(L,W,m)=>{"use strict";var y=m(5327),p=m(74258),e=m(10344),t=m(77054),n=m(94119),o=m(74266),s=m(7561),c=m(14563),v=m(9616),R=m(8144),O=m(35270).f,H=m(93949).forEach,V=m(46876),G=m(46053),Z=G.set,vt=G.getterFor;L.exports=function(it,ot,wt){var Rt,ct=-1!==it.indexOf("Map"),yt=-1!==it.indexOf("Weak"),lt=ct?"set":"add",at=p[it],bt=at&&at.prototype,tt={};if(V&&c(at)&&(yt||bt.forEach&&!t(function(){(new at).entries().next()}))){var mt=(Rt=ot(function(nt,st){Z(s(nt,mt),{type:it,collection:new at}),null!=st&&o(st,nt[lt],{that:nt,AS_ENTRIES:ct})})).prototype,dt=vt(it);H(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(nt){var st="add"==nt||"set"==nt;nt in bt&&(!yt||"clear"!=nt)&&n(mt,nt,function(Gt,It){var Vt=dt(this).collection;if(!st&&yt&&!v(Gt))return"get"==nt&&void 0;var Ie=Vt[nt](0===Gt?0:Gt,It);return st?this:Ie})}),yt||O(mt,"size",{configurable:!0,get:function(){return dt(this).collection.size}})}else Rt=wt.getConstructor(ot,it,ct,lt),e.enable();return R(Rt,it,!1,!0),tt[it]=Rt,y({global:!0,forced:!0},tt),yt||wt.setStrong(Rt,it,ct),Rt}},53663:(L,W,m)=>{var y=m(68739),p=m(51566),e=m(11841),t=m(35270);L.exports=function(n,o){for(var s=p(o),c=t.f,v=e.f,R=0;R<s.length;R++){var O=s[R];y(n,O)||c(n,O,v(o,O))}}},56850:(L,W,m)=>{var p=m(35009)("match");L.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[p]=!1,"/./"[e](t)}catch(o){}}return!1}},63413:(L,W,m)=>{var y=m(77054);L.exports=!y(function(){function p(){}return p.prototype.constructor=null,Object.getPrototypeOf(new p)!==p.prototype})},94577:(L,W,m)=>{"use strict";var y=m(93489).IteratorPrototype,p=m(66112),e=m(25677),t=m(8144),n=m(76539),o=function(){return this};L.exports=function(s,c,v,R){var O=c+" Iterator";return s.prototype=p(y,{next:e(+!R,v)}),t(s,O,!1,!0),n[O]=o,s}},94119:(L,W,m)=>{var y=m(46876),p=m(35270),e=m(25677);L.exports=y?function(t,n,o){return p.f(t,n,e(1,o))}:function(t,n,o){return t[n]=o,t}},25677:L=>{L.exports=function(W,m){return{enumerable:!(1&W),configurable:!(2&W),writable:!(4&W),value:m}}},13493:(L,W,m)=>{"use strict";var y=m(84061),p=m(35270),e=m(25677);L.exports=function(t,n,o){var s=y(n);s in t?p.f(t,s,e(0,o)):t[s]=o}},63957:(L,W,m)=>{"use strict";var y=m(5327),p=m(45439),e=m(31818),t=m(42515),n=m(14563),o=m(94577),s=m(58826),c=m(3358),v=m(8144),R=m(94119),O=m(73294),H=m(35009),V=m(76539),G=m(93489),Z=t.PROPER,vt=t.CONFIGURABLE,it=G.IteratorPrototype,ot=G.BUGGY_SAFARI_ITERATORS,wt=H("iterator"),yt="values",lt="entries",at=function(){return this};L.exports=function(bt,tt,Rt,mt,dt,nt,st){o(Rt,tt,mt);var Ge,si,Qe,Gt=function(Ne){if(Ne===dt&&me)return me;if(!ot&&Ne in Ie)return Ie[Ne];switch(Ne){case"keys":case yt:case lt:return function(){return new Rt(this,Ne)}}return function(){return new Rt(this)}},It=tt+" Iterator",Vt=!1,Ie=bt.prototype,Ze=Ie[wt]||Ie["@@iterator"]||dt&&Ie[dt],me=!ot&&Ze||Gt(dt),Be="Array"==tt&&Ie.entries||Ze;if(Be&&(Ge=s(Be.call(new bt)))!==Object.prototype&&Ge.next&&(!e&&s(Ge)!==it&&(c?c(Ge,it):n(Ge[wt])||O(Ge,wt,at)),v(Ge,It,!0,!0),e&&(V[It]=at)),Z&&dt==yt&&Ze&&Ze.name!==yt&&(!e&&vt?R(Ie,"name",yt):(Vt=!0,me=function(){return p(Ze,this)})),dt)if(si={values:Gt(yt),keys:nt?me:Gt("keys"),entries:Gt(lt)},st)for(Qe in si)(ot||Vt||!(Qe in Ie))&&O(Ie,Qe,si[Qe]);else y({target:tt,proto:!0,forced:ot||Vt},si);return(!e||st)&&Ie[wt]!==me&&O(Ie,wt,me,{name:dt}),V[tt]=me,si}},90898:(L,W,m)=>{var y=m(52457),p=m(68739),e=m(79182),t=m(35270).f;L.exports=function(n){var o=y.Symbol||(y.Symbol={});p(o,n)||t(o,n,{value:e.f(n)})}},46876:(L,W,m)=>{var y=m(77054);L.exports=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},2152:(L,W,m)=>{var y=m(74258),p=m(9616),e=y.document,t=p(e)&&p(e.createElement);L.exports=function(n){return t?e.createElement(n):{}}},6379:L=>{L.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},15418:L=>{L.exports="object"==typeof window},4489:(L,W,m)=>{var y=m(80537),p=m(74258);L.exports=/ipad|iphone|ipod/i.test(y)&&void 0!==p.Pebble},78561:(L,W,m)=>{var y=m(80537);L.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(y)},1593:(L,W,m)=>{var y=m(14592),p=m(74258);L.exports="process"==y(p.process)},43522:(L,W,m)=>{var y=m(80537);L.exports=/web0s(?!.*chrome)/i.test(y)},80537:(L,W,m)=>{var y=m(26444);L.exports=y("navigator","userAgent")||""},97502:(L,W,m)=>{var s,c,y=m(74258),p=m(80537),e=y.process,t=y.Deno,n=e&&e.versions||t&&t.version,o=n&&n.v8;o&&(c=(s=o.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&p&&(!(s=p.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=p.match(/Chrome\/(\d+)/))&&(c=+s[1]),L.exports=c},6747:(L,W,m)=>{var y=m(52457);L.exports=function(p){return y[p+"Prototype"]}},59595:L=>{L.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},39581:(L,W,m)=>{var y=m(77054),p=m(25677);L.exports=!y(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",p(1,7)),7!==e.stack)})},5327:(L,W,m)=>{"use strict";var y=m(74258),p=m(66864),e=m(94800),t=m(14563),n=m(11841).f,o=m(74088),s=m(52457),c=m(94640),v=m(94119),R=m(68739),O=function(H){var V=function(G,Z,vt){if(this instanceof V){switch(arguments.length){case 0:return new H;case 1:return new H(G);case 2:return new H(G,Z)}return new H(G,Z,vt)}return p(H,this,arguments)};return V.prototype=H.prototype,V};L.exports=function(H,V){var lt,at,bt,tt,Rt,mt,dt,nt,G=H.target,Z=H.global,vt=H.stat,it=H.proto,ot=Z?y:vt?y[G]:(y[G]||{}).prototype,wt=Z?s:s[G]||v(s,G,{})[G],ct=wt.prototype;for(bt in V)lt=!o(Z?bt:G+(vt?".":"#")+bt,H.forced)&&ot&&R(ot,bt),Rt=wt[bt],lt&&(mt=H.noTargetGet?(nt=n(ot,bt))&&nt.value:ot[bt]),tt=lt&&mt?mt:V[bt],(!lt||typeof Rt!=typeof tt)&&(dt=H.bind&&lt?c(tt,y):H.wrap&&lt?O(tt):it&&t(tt)?e(tt):tt,(H.sham||tt&&tt.sham||Rt&&Rt.sham)&&v(dt,"sham",!0),v(wt,bt,dt),it&&(R(s,at=G+"Prototype")||v(s,at,{}),v(s[at],bt,tt),H.real&&ct&&!ct[bt]&&v(ct,bt,tt)))}},77054:L=>{L.exports=function(W){try{return!!W()}catch(m){return!0}}},7545:(L,W,m)=>{var y=m(77054);L.exports=!y(function(){return Object.isExtensible(Object.preventExtensions({}))})},66864:L=>{var W=Function.prototype,m=W.apply,p=W.call;L.exports="object"==typeof Reflect&&Reflect.apply||(W.bind?p.bind(m):function(){return p.apply(m,arguments)})},94640:(L,W,m)=>{var y=m(94800),p=m(6567),e=y(y.bind);L.exports=function(t,n){return p(t),void 0===n?t:e?e(t,n):function(){return t.apply(n,arguments)}}},45439:L=>{var W=Function.prototype.call;L.exports=W.bind?W.bind(W):function(){return W.apply(W,arguments)}},42515:(L,W,m)=>{var y=m(46876),p=m(68739),e=Function.prototype,t=y&&Object.getOwnPropertyDescriptor,n=p(e,"name"),o=n&&"something"===function(){}.name,s=n&&(!y||y&&t(e,"name").configurable);L.exports={EXISTS:n,PROPER:o,CONFIGURABLE:s}},94800:L=>{var W=Function.prototype,m=W.bind,y=W.call,p=m&&m.bind(y);L.exports=m?function(e){return e&&p(y,e)}:function(e){return e&&function(){return y.apply(e,arguments)}}},26444:(L,W,m)=>{var y=m(52457),p=m(74258),e=m(14563),t=function(n){return e(n)?n:void 0};L.exports=function(n,o){return arguments.length<2?t(y[n])||t(p[n]):y[n]&&y[n][o]||p[n]&&p[n][o]}},50806:(L,W,m)=>{var y=m(27870),p=m(78504),e=m(76539),n=m(35009)("iterator");L.exports=function(o){if(null!=o)return p(o,n)||p(o,"@@iterator")||e[y(o)]}},72442:(L,W,m)=>{var y=m(74258),p=m(45439),e=m(6567),t=m(49403),n=m(98217),o=m(50806),s=y.TypeError;L.exports=function(c,v){var R=arguments.length<2?o(c):v;if(e(R))return t(p(R,c));throw s(n(c)+" is not iterable")}},78504:(L,W,m)=>{var y=m(6567);L.exports=function(p,e){var t=p[e];return null==t?void 0:y(t)}},74258:L=>{var W=function(m){return m&&m.Math==Math&&m};L.exports=W("object"==typeof globalThis&&globalThis)||W("object"==typeof window&&window)||W("object"==typeof self&&self)||W("object"==typeof global&&global)||function(){return this}()||Function("return this")()},68739:(L,W,m)=>{var y=m(94800),p=m(34972),e=y({}.hasOwnProperty);L.exports=Object.hasOwn||function(n,o){return e(p(n),o)}},41933:L=>{L.exports={}},47157:(L,W,m)=>{var y=m(74258);L.exports=function(p,e){var t=y.console;t&&t.error&&(1==arguments.length?t.error(p):t.error(p,e))}},70364:(L,W,m)=>{var y=m(26444);L.exports=y("document","documentElement")},58310:(L,W,m)=>{var y=m(46876),p=m(77054),e=m(2152);L.exports=!y&&!p(function(){return 7!=Object.defineProperty(e("div"),"a",{get:function(){return 7}}).a})},8317:(L,W,m)=>{var y=m(74258),p=m(94800),e=m(77054),t=m(14592),n=y.Object,o=p("".split);L.exports=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return"String"==t(s)?o(s,""):n(s)}:n},19656:(L,W,m)=>{var y=m(94800),p=m(14563),e=m(6671),t=y(Function.toString);p(e.inspectSource)||(e.inspectSource=function(n){return t(n)}),L.exports=e.inspectSource},44187:(L,W,m)=>{var y=m(9616),p=m(94119);L.exports=function(e,t){y(t)&&"cause"in t&&p(e,"cause",t.cause)}},10344:(L,W,m)=>{var y=m(5327),p=m(94800),e=m(41933),t=m(9616),n=m(68739),o=m(35270).f,s=m(36336),c=m(25278),v=m(15774),R=m(48110),O=m(7545),H=!1,V=R("meta"),G=0,Z=function(yt){o(yt,V,{value:{objectID:"O"+G++,weakData:{}}})},ct=L.exports={enable:function(){ct.enable=function(){},H=!0;var yt=s.f,lt=p([].splice),at={};at[V]=1,yt(at).length&&(s.f=function(bt){for(var tt=yt(bt),Rt=0,mt=tt.length;Rt<mt;Rt++)if(tt[Rt]===V){lt(tt,Rt,1);break}return tt},y({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:c.f}))},fastKey:function(yt,lt){if(!t(yt))return"symbol"==typeof yt?yt:("string"==typeof yt?"S":"P")+yt;if(!n(yt,V)){if(!v(yt))return"F";if(!lt)return"E";Z(yt)}return yt[V].objectID},getWeakData:function(yt,lt){if(!n(yt,V)){if(!v(yt))return!0;if(!lt)return!1;Z(yt)}return yt[V].weakData},onFreeze:function(yt){return O&&H&&v(yt)&&!n(yt,V)&&Z(yt),yt}};e[V]=!0},46053:(L,W,m)=>{var V,G,Z,y=m(66654),p=m(74258),e=m(94800),t=m(9616),n=m(94119),o=m(68739),s=m(6671),c=m(82062),v=m(41933),R="Object already initialized",O=p.TypeError;if(y||s.state){var ot=s.state||(s.state=new(0,p.WeakMap)),wt=e(ot.get),ct=e(ot.has),yt=e(ot.set);V=function(at,bt){if(ct(ot,at))throw new O(R);return bt.facade=at,yt(ot,at,bt),bt},G=function(at){return wt(ot,at)||{}},Z=function(at){return ct(ot,at)}}else{var lt=c("state");v[lt]=!0,V=function(at,bt){if(o(at,lt))throw new O(R);return bt.facade=at,n(at,lt,bt),bt},G=function(at){return o(at,lt)?at[lt]:{}},Z=function(at){return o(at,lt)}}L.exports={set:V,get:G,has:Z,enforce:function(at){return Z(at)?G(at):V(at,{})},getterFor:function(at){return function(bt){var tt;if(!t(bt)||(tt=G(bt)).type!==at)throw O("Incompatible receiver, "+at+" required");return tt}}}},44821:(L,W,m)=>{var y=m(35009),p=m(76539),e=y("iterator"),t=Array.prototype;L.exports=function(n){return void 0!==n&&(p.Array===n||t[e]===n)}},62845:(L,W,m)=>{var y=m(14592);L.exports=Array.isArray||function(e){return"Array"==y(e)}},14563:L=>{L.exports=function(W){return"function"==typeof W}},2817:(L,W,m)=>{var y=m(94800),p=m(77054),e=m(14563),t=m(27870),n=m(26444),o=m(19656),s=function(){},c=[],v=n("Reflect","construct"),R=/^\s*(?:class|function)\b/,O=y(R.exec),H=!R.exec(s),V=function(Z){if(!e(Z))return!1;try{return v(s,c,Z),!0}catch(vt){return!1}};L.exports=!v||p(function(){var Z;return V(V.call)||!V(Object)||!V(function(){Z=!0})||Z})?function(Z){if(!e(Z))return!1;switch(t(Z)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return H||!!O(R,o(Z))}:V},74088:(L,W,m)=>{var y=m(77054),p=m(14563),e=/#|\.prototype\./,t=function(v,R){var O=o[n(v)];return O==c||O!=s&&(p(R)?y(R):!!R)},n=t.normalize=function(v){return String(v).replace(e,".").toLowerCase()},o=t.data={},s=t.NATIVE="N",c=t.POLYFILL="P";L.exports=t},9616:(L,W,m)=>{var y=m(14563);L.exports=function(p){return"object"==typeof p?null!==p:y(p)}},31818:L=>{L.exports=!0},7191:(L,W,m)=>{var y=m(9616),p=m(14592),t=m(35009)("match");L.exports=function(n){var o;return y(n)&&(void 0!==(o=n[t])?!!o:"RegExp"==p(n))}},7683:(L,W,m)=>{var y=m(74258),p=m(26444),e=m(14563),t=m(61517),n=m(8696),o=y.Object;L.exports=n?function(s){return"symbol"==typeof s}:function(s){var c=p("Symbol");return e(c)&&t(c.prototype,o(s))}},74266:(L,W,m)=>{var y=m(74258),p=m(94640),e=m(45439),t=m(49403),n=m(98217),o=m(44821),s=m(25979),c=m(61517),v=m(72442),R=m(50806),O=m(26151),H=y.TypeError,V=function(Z,vt){this.stopped=Z,this.result=vt},G=V.prototype;L.exports=function(Z,vt,it){var at,bt,tt,Rt,mt,dt,nt,wt=!(!it||!it.AS_ENTRIES),ct=!(!it||!it.IS_ITERATOR),yt=!(!it||!it.INTERRUPTED),lt=p(vt,it&&it.that),st=function(It){return at&&O(at,"normal",It),new V(!0,It)},Gt=function(It){return wt?(t(It),yt?lt(It[0],It[1],st):lt(It[0],It[1])):yt?lt(It,st):lt(It)};if(ct)at=Z;else{if(!(bt=R(Z)))throw H(n(Z)+" is not iterable");if(o(bt)){for(tt=0,Rt=s(Z);Rt>tt;tt++)if((mt=Gt(Z[tt]))&&c(G,mt))return mt;return new V(!1)}at=v(Z,bt)}for(dt=at.next;!(nt=e(dt,at)).done;){try{mt=Gt(nt.value)}catch(It){O(at,"throw",It)}if("object"==typeof mt&&mt&&c(G,mt))return mt}return new V(!1)}},26151:(L,W,m)=>{var y=m(45439),p=m(49403),e=m(78504);L.exports=function(t,n,o){var s,c;p(t);try{if(!(s=e(t,"return"))){if("throw"===n)throw o;return o}s=y(s,t)}catch(v){c=!0,s=v}if("throw"===n)throw o;if(c)throw s;return p(s),o}},93489:(L,W,m)=>{"use strict";var R,O,H,y=m(77054),p=m(14563),e=m(66112),t=m(58826),n=m(73294),o=m(35009),s=m(31818),c=o("iterator"),v=!1;[].keys&&("next"in(H=[].keys())?(O=t(t(H)))!==Object.prototype&&(R=O):v=!0),null==R||y(function(){var G={};return R[c].call(G)!==G})?R={}:s&&(R=e(R)),p(R[c])||n(R,c,function(){return this}),L.exports={IteratorPrototype:R,BUGGY_SAFARI_ITERATORS:v}},76539:L=>{L.exports={}},25979:(L,W,m)=>{var y=m(26965);L.exports=function(p){return y(p.length)}},17547:(L,W,m)=>{var Z,vt,it,ot,wt,ct,yt,lt,y=m(74258),p=m(94640),e=m(11841).f,t=m(88530).set,n=m(78561),o=m(4489),s=m(43522),c=m(1593),v=y.MutationObserver||y.WebKitMutationObserver,R=y.document,O=y.process,H=y.Promise,V=e(y,"queueMicrotask"),G=V&&V.value;G||(Z=function(){var at,bt;for(c&&(at=O.domain)&&at.exit();vt;){bt=vt.fn,vt=vt.next;try{bt()}catch(tt){throw vt?ot():it=void 0,tt}}it=void 0,at&&at.enter()},n||c||s||!v||!R?!o&&H&&H.resolve?((yt=H.resolve(void 0)).constructor=H,lt=p(yt.then,yt),ot=function(){lt(Z)}):c?ot=function(){O.nextTick(Z)}:(t=p(t,y),ot=function(){t(Z)}):(wt=!0,ct=R.createTextNode(""),new v(Z).observe(ct,{characterData:!0}),ot=function(){ct.data=wt=!wt})),L.exports=G||function(at){var bt={fn:at,next:void 0};it&&(it.next=bt),vt||(vt=bt,ot()),it=bt}},64505:(L,W,m)=>{var y=m(74258);L.exports=y.Promise},98615:(L,W,m)=>{var y=m(97502),p=m(77054);L.exports=!!Object.getOwnPropertySymbols&&!p(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&y&&y<41})},30251:(L,W,m)=>{var y=m(77054),p=m(35009),e=m(31818),t=p("iterator");L.exports=!y(function(){var n=new URL("b?a=1&b=2&c=3","http://a"),o=n.searchParams,s="";return n.pathname="c%20d",o.forEach(function(c,v){o.delete("b"),s+=v+c}),e&&!n.toJSON||!o.sort||"http://a/c%20d?a=1&c=3"!==n.href||"3"!==o.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!o[t]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==s||"x"!==new URL("http://x",void 0).host})},66654:(L,W,m)=>{var y=m(74258),p=m(14563),e=m(19656),t=y.WeakMap;L.exports=p(t)&&/native code/.test(e(t))},51189:(L,W,m)=>{"use strict";var y=m(6567),p=function(e){var t,n;this.promise=new e(function(o,s){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=o,n=s}),this.resolve=y(t),this.reject=y(n)};L.exports.f=function(e){return new p(e)}},83330:(L,W,m)=>{var y=m(16096);L.exports=function(p,e){return void 0===p?arguments.length<2?"":e:y(p)}},38743:(L,W,m)=>{var y=m(74258),p=m(7191),e=y.TypeError;L.exports=function(t){if(p(t))throw e("The method doesn't accept regular expressions");return t}},67271:(L,W,m)=>{"use strict";var y=m(46876),p=m(94800),e=m(45439),t=m(77054),n=m(39698),o=m(72584),s=m(32018),c=m(34972),v=m(8317),R=Object.assign,O=Object.defineProperty,H=p([].concat);L.exports=!R||t(function(){if(y&&1!==R({b:1},R(O({},"a",{enumerable:!0,get:function(){O(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var V={},G={},Z=Symbol(),vt="abcdefghijklmnopqrst";return V[Z]=7,vt.split("").forEach(function(it){G[it]=it}),7!=R({},V)[Z]||n(R({},G)).join("")!=vt})?function(G,Z){for(var vt=c(G),it=arguments.length,ot=1,wt=o.f,ct=s.f;it>ot;)for(var tt,yt=v(arguments[ot++]),lt=wt?H(n(yt),wt(yt)):n(yt),at=lt.length,bt=0;at>bt;)tt=lt[bt++],(!y||e(ct,yt,tt))&&(vt[tt]=yt[tt]);return vt}:R},66112:(L,W,m)=>{var it,y=m(49403),p=m(47398),e=m(59595),t=m(41933),n=m(70364),o=m(2152),s=m(82062),R="prototype",O="script",H=s("IE_PROTO"),V=function(){},G=function(wt){return"<"+O+">"+wt+"</"+O+">"},Z=function(wt){wt.write(G("")),wt.close();var ct=wt.parentWindow.Object;return wt=null,ct},ot=function(){try{it=new ActiveXObject("htmlfile")}catch(ct){}ot="undefined"!=typeof document?document.domain&&it?Z(it):function(){var yt,wt=o("iframe");return wt.style.display="none",n.appendChild(wt),wt.src=String("javascript:"),(yt=wt.contentWindow.document).open(),yt.write(G("document.F=Object")),yt.close(),yt.F}():Z(it);for(var wt=e.length;wt--;)delete ot[R][e[wt]];return ot()};t[H]=!0,L.exports=Object.create||function(ct,yt){var lt;return null!==ct?(V[R]=y(ct),lt=new V,V[R]=null,lt[H]=ct):lt=ot(),void 0===yt?lt:p(lt,yt)}},47398:(L,W,m)=>{var y=m(46876),p=m(35270),e=m(49403),t=m(73684),n=m(39698);L.exports=y?Object.defineProperties:function(s,c){e(s);for(var V,v=t(c),R=n(c),O=R.length,H=0;O>H;)p.f(s,V=R[H++],v[V]);return s}},35270:(L,W,m)=>{var y=m(74258),p=m(46876),e=m(58310),t=m(49403),n=m(84061),o=y.TypeError,s=Object.defineProperty;W.f=p?s:function(v,R,O){if(t(v),R=n(R),t(O),e)try{return s(v,R,O)}catch(H){}if("get"in O||"set"in O)throw o("Accessors not supported");return"value"in O&&(v[R]=O.value),v}},11841:(L,W,m)=>{var y=m(46876),p=m(45439),e=m(32018),t=m(25677),n=m(73684),o=m(84061),s=m(68739),c=m(58310),v=Object.getOwnPropertyDescriptor;W.f=y?v:function(O,H){if(O=n(O),H=o(H),c)try{return v(O,H)}catch(V){}if(s(O,H))return t(!p(e.f,O,H),O[H])}},25278:(L,W,m)=>{var y=m(14592),p=m(73684),e=m(36336).f,t=m(58467),n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];L.exports.f=function(c){return n&&"Window"==y(c)?function(s){try{return e(s)}catch(c){return t(n)}}(c):e(p(c))}},36336:(L,W,m)=>{var y=m(27603),e=m(59595).concat("length","prototype");W.f=Object.getOwnPropertyNames||function(n){return y(n,e)}},72584:(L,W)=>{W.f=Object.getOwnPropertySymbols},58826:(L,W,m)=>{var y=m(74258),p=m(68739),e=m(14563),t=m(34972),n=m(82062),o=m(63413),s=n("IE_PROTO"),c=y.Object,v=c.prototype;L.exports=o?c.getPrototypeOf:function(R){var O=t(R);if(p(O,s))return O[s];var H=O.constructor;return e(H)&&O instanceof H?H.prototype:O instanceof c?v:null}},15774:(L,W,m)=>{var y=m(77054),p=m(9616),e=m(14592),t=m(39749),n=Object.isExtensible,o=y(function(){n(1)});L.exports=o||t?function(c){return!(!p(c)||t&&"ArrayBuffer"==e(c))&&(!n||n(c))}:n},61517:(L,W,m)=>{var y=m(94800);L.exports=y({}.isPrototypeOf)},27603:(L,W,m)=>{var y=m(94800),p=m(68739),e=m(73684),t=m(8440).indexOf,n=m(41933),o=y([].push);L.exports=function(s,c){var H,v=e(s),R=0,O=[];for(H in v)!p(n,H)&&p(v,H)&&o(O,H);for(;c.length>R;)p(v,H=c[R++])&&(~t(O,H)||o(O,H));return O}},39698:(L,W,m)=>{var y=m(27603),p=m(59595);L.exports=Object.keys||function(t){return y(t,p)}},32018:(L,W)=>{"use strict";var m={}.propertyIsEnumerable,y=Object.getOwnPropertyDescriptor,p=y&&!m.call({1:2},1);W.f=p?function(t){var n=y(this,t);return!!n&&n.enumerable}:m},3358:(L,W,m)=>{var y=m(94800),p=m(49403),e=m(67553);L.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o,t=!1,n={};try{(o=y(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(s){}return function(c,v){return p(c),e(v),t?o(c,v):c.__proto__=v,c}}():void 0)},22014:(L,W,m)=>{var y=m(46876),p=m(94800),e=m(39698),t=m(73684),o=p(m(32018).f),s=p([].push),c=function(v){return function(R){for(var vt,O=t(R),H=e(O),V=H.length,G=0,Z=[];V>G;)vt=H[G++],(!y||o(O,vt))&&s(Z,v?[vt,O[vt]]:O[vt]);return Z}};L.exports={entries:c(!0),values:c(!1)}},42691:(L,W,m)=>{"use strict";var y=m(68118),p=m(27870);L.exports=y?{}.toString:function(){return"[object "+p(this)+"]"}},27704:(L,W,m)=>{var y=m(74258),p=m(45439),e=m(14563),t=m(9616),n=y.TypeError;L.exports=function(o,s){var c,v;if("string"===s&&e(c=o.toString)&&!t(v=p(c,o))||e(c=o.valueOf)&&!t(v=p(c,o))||"string"!==s&&e(c=o.toString)&&!t(v=p(c,o)))return v;throw n("Can't convert object to primitive value")}},51566:(L,W,m)=>{var y=m(26444),p=m(94800),e=m(36336),t=m(72584),n=m(49403),o=p([].concat);L.exports=y("Reflect","ownKeys")||function(c){var v=e.f(n(c)),R=t.f;return R?o(v,R(c)):v}},52457:L=>{L.exports={}},7286:L=>{L.exports=function(W){try{return{error:!1,value:W()}}catch(m){return{error:!0,value:m}}}},47249:(L,W,m)=>{var y=m(49403),p=m(9616),e=m(51189);L.exports=function(t,n){if(y(t),p(n)&&n.constructor===t)return n;var o=e.f(t);return(0,o.resolve)(n),o.promise}},32914:(L,W,m)=>{var y=m(73294);L.exports=function(p,e,t){for(var n in e)t&&t.unsafe&&p[n]?p[n]=e[n]:y(p,n,e[n],t);return p}},73294:(L,W,m)=>{var y=m(94119);L.exports=function(p,e,t,n){n&&n.enumerable?p[e]=t:y(p,e,t)}},45696:(L,W,m)=>{var p=m(74258).TypeError;L.exports=function(e){if(null==e)throw p("Can't call method on "+e);return e}},84360:(L,W,m)=>{var y=m(74258),p=Object.defineProperty;L.exports=function(e,t){try{p(y,e,{value:t,configurable:!0,writable:!0})}catch(n){y[e]=t}return t}},73012:(L,W,m)=>{"use strict";var y=m(26444),p=m(35270),e=m(35009),t=m(46876),n=e("species");L.exports=function(o){var s=y(o);t&&s&&!s[n]&&(0,p.f)(s,n,{configurable:!0,get:function(){return this}})}},8144:(L,W,m)=>{var y=m(68118),p=m(35270).f,e=m(94119),t=m(68739),n=m(42691),s=m(35009)("toStringTag");L.exports=function(c,v,R,O){if(c){var H=R?c:c.prototype;t(H,s)||p(H,s,{configurable:!0,value:v}),O&&!y&&e(H,"toString",n)}}},82062:(L,W,m)=>{var y=m(39302),p=m(48110),e=y("keys");L.exports=function(t){return e[t]||(e[t]=p(t))}},6671:(L,W,m)=>{var y=m(74258),p=m(84360),e="__core-js_shared__",t=y[e]||p(e,{});L.exports=t},39302:(L,W,m)=>{var y=m(31818),p=m(6671);(L.exports=function(e,t){return p[e]||(p[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.3",mode:y?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},7806:(L,W,m)=>{var y=m(49403),p=m(6767),t=m(35009)("species");L.exports=function(n,o){var c,s=y(n).constructor;return void 0===s||null==(c=y(s)[t])?o:p(c)}},4343:(L,W,m)=>{var y=m(94800),p=m(32938),e=m(16096),t=m(45696),n=y("".charAt),o=y("".charCodeAt),s=y("".slice),c=function(v){return function(R,O){var Z,vt,H=e(t(R)),V=p(O),G=H.length;return V<0||V>=G?v?"":void 0:(Z=o(H,V))<55296||Z>56319||V+1===G||(vt=o(H,V+1))<56320||vt>57343?v?n(H,V):Z:v?s(H,V,V+2):vt-56320+(Z-55296<<10)+65536}};L.exports={codeAt:c(!1),charAt:c(!0)}},88530:(L,W,m)=>{var lt,at,bt,tt,y=m(74258),p=m(66864),e=m(94640),t=m(14563),n=m(68739),o=m(77054),s=m(70364),c=m(64716),v=m(2152),R=m(78561),O=m(1593),H=y.setImmediate,V=y.clearImmediate,G=y.process,Z=y.Dispatch,vt=y.Function,it=y.MessageChannel,ot=y.String,wt=0,ct={},yt="onreadystatechange";try{lt=y.location}catch(st){}var Rt=function(st){if(n(ct,st)){var Gt=ct[st];delete ct[st],Gt()}},mt=function(st){return function(){Rt(st)}},dt=function(st){Rt(st.data)},nt=function(st){y.postMessage(ot(st),lt.protocol+"//"+lt.host)};(!H||!V)&&(H=function(Gt){var It=c(arguments,1);return ct[++wt]=function(){p(t(Gt)?Gt:vt(Gt),void 0,It)},at(wt),wt},V=function(Gt){delete ct[Gt]},O?at=function(st){G.nextTick(mt(st))}:Z&&Z.now?at=function(st){Z.now(mt(st))}:it&&!R?(tt=(bt=new it).port2,bt.port1.onmessage=dt,at=e(tt.postMessage,tt)):y.addEventListener&&t(y.postMessage)&&!y.importScripts&&lt&&"file:"!==lt.protocol&&!o(nt)?(at=nt,y.addEventListener("message",dt,!1)):at=yt in v("script")?function(st){s.appendChild(v("script"))[yt]=function(){s.removeChild(this),Rt(st)}}:function(st){setTimeout(mt(st),0)}),L.exports={set:H,clear:V}},69723:(L,W,m)=>{var y=m(32938),p=Math.max,e=Math.min;L.exports=function(t,n){var o=y(t);return o<0?p(o+n,0):e(o,n)}},73684:(L,W,m)=>{var y=m(8317),p=m(45696);L.exports=function(e){return y(p(e))}},32938:L=>{var W=Math.ceil,m=Math.floor;L.exports=function(y){var p=+y;return p!=p||0===p?0:(p>0?m:W)(p)}},26965:(L,W,m)=>{var y=m(32938),p=Math.min;L.exports=function(e){return e>0?p(y(e),9007199254740991):0}},34972:(L,W,m)=>{var y=m(74258),p=m(45696),e=y.Object;L.exports=function(t){return e(p(t))}},57350:(L,W,m)=>{var y=m(74258),p=m(45439),e=m(9616),t=m(7683),n=m(78504),o=m(27704),s=m(35009),c=y.TypeError,v=s("toPrimitive");L.exports=function(R,O){if(!e(R)||t(R))return R;var V,H=n(R,v);if(H){if(void 0===O&&(O="default"),V=p(H,R,O),!e(V)||t(V))return V;throw c("Can't convert object to primitive value")}return void 0===O&&(O="number"),o(R,O)}},84061:(L,W,m)=>{var y=m(57350),p=m(7683);L.exports=function(e){var t=y(e,"string");return p(t)?t:t+""}},68118:(L,W,m)=>{var e={};e[m(35009)("toStringTag")]="z",L.exports="[object z]"===String(e)},16096:(L,W,m)=>{var y=m(74258),p=m(27870),e=y.String;L.exports=function(t){if("Symbol"===p(t))throw TypeError("Cannot convert a Symbol value to a string");return e(t)}},98217:(L,W,m)=>{var p=m(74258).String;L.exports=function(e){try{return p(e)}catch(t){return"Object"}}},48110:(L,W,m)=>{var y=m(94800),p=0,e=Math.random(),t=y(1..toString);L.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+t(++p+e,36)}},8696:(L,W,m)=>{var y=m(98615);L.exports=y&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},79182:(L,W,m)=>{var y=m(35009);W.f=y},35009:(L,W,m)=>{var y=m(74258),p=m(39302),e=m(68739),t=m(48110),n=m(98615),o=m(8696),s=p("wks"),c=y.Symbol,v=c&&c.for,R=o?c:c&&c.withoutSetter||t;L.exports=function(O){if(!e(s,O)||!n&&"string"!=typeof s[O]){var H="Symbol."+O;s[O]=n&&e(c,O)?c[O]:o&&v?v(H):R(H)}return s[O]}},10153:(L,W,m)=>{"use strict";var y=m(5327),p=m(74258),e=m(61517),t=m(58826),n=m(3358),o=m(53663),s=m(66112),c=m(94119),v=m(25677),R=m(56510),O=m(44187),H=m(74266),V=m(83330),G=m(35009),Z=m(39581),vt=G("toStringTag"),it=p.Error,ot=[].push,wt=function(lt,at){var Rt,bt=arguments.length>2?arguments[2]:void 0,tt=e(ct,this);n?Rt=n(new it(void 0),tt?t(this):ct):(Rt=tt?this:s(ct),c(Rt,vt,"Error")),c(Rt,"message",V(at,"")),Z&&c(Rt,"stack",R(Rt.stack,1)),O(Rt,bt);var mt=[];return H(lt,ot,{that:mt}),c(Rt,"errors",mt),Rt};n?n(wt,it):o(wt,it);var ct=wt.prototype=s(it.prototype,{constructor:v(1,wt),message:v(1,""),name:v(1,"AggregateError")});y({global:!0},{AggregateError:wt})},30933:(L,W,m)=>{"use strict";var y=m(5327),p=m(74258),e=m(77054),t=m(62845),n=m(9616),o=m(34972),s=m(25979),c=m(13493),v=m(47137),R=m(54647),O=m(35009),H=m(97502),V=O("isConcatSpreadable"),G=9007199254740991,Z="Maximum allowed index exceeded",vt=p.TypeError,it=H>=51||!e(function(){var yt=[];return yt[V]=!1,yt.concat()[0]!==yt}),ot=R("concat"),wt=function(yt){if(!n(yt))return!1;var lt=yt[V];return void 0!==lt?!!lt:t(yt)};y({target:"Array",proto:!0,forced:!it||!ot},{concat:function(lt){var Rt,mt,dt,nt,st,at=o(this),bt=v(at,0),tt=0;for(Rt=-1,dt=arguments.length;Rt<dt;Rt++)if(wt(st=-1===Rt?at:arguments[Rt])){if(tt+(nt=s(st))>G)throw vt(Z);for(mt=0;mt<nt;mt++,tt++)mt in st&&c(bt,tt,st[mt])}else{if(tt>=G)throw vt(Z);c(bt,tt++,st)}return bt.length=tt,bt}})},24572:(L,W,m)=>{"use strict";var y=m(5327),p=m(93949).filter;y({target:"Array",proto:!0,forced:!m(54647)("filter")},{filter:function(o){return p(this,o,arguments.length>1?arguments[1]:void 0)}})},40655:(L,W,m)=>{"use strict";var y=m(5327),p=m(93949).find,e=m(74159),t="find",n=!0;t in[]&&Array(1)[t](function(){n=!1}),y({target:"Array",proto:!0,forced:n},{find:function(s){return p(this,s,arguments.length>1?arguments[1]:void 0)}}),e(t)},91762:(L,W,m)=>{"use strict";var y=m(5327),p=m(45900);y({target:"Array",proto:!0,forced:[].forEach!=p},{forEach:p})},72190:(L,W,m)=>{var y=m(5327),p=m(75058);y({target:"Array",stat:!0,forced:!m(85306)(function(n){Array.from(n)})},{from:p})},38582:(L,W,m)=>{"use strict";var y=m(5327),p=m(8440).includes,e=m(74159);y({target:"Array",proto:!0},{includes:function(n){return p(this,n,arguments.length>1?arguments[1]:void 0)}}),e("includes")},13950:(L,W,m)=>{"use strict";var y=m(5327),p=m(94800),e=m(8440).indexOf,t=m(95750),n=p([].indexOf),o=!!n&&1/n([1],1,-0)<0,s=t("indexOf");y({target:"Array",proto:!0,forced:o||!s},{indexOf:function(v){var R=arguments.length>1?arguments[1]:void 0;return o?n(this,v,R)||0:e(this,v,R)}})},99025:(L,W,m)=>{m(5327)({target:"Array",stat:!0},{isArray:m(62845)})},23483:(L,W,m)=>{"use strict";var y=m(73684),p=m(74159),e=m(76539),t=m(46053),n=m(63957),o="Array Iterator",s=t.set,c=t.getterFor(o);L.exports=n(Array,"Array",function(v,R){s(this,{type:o,target:y(v),index:0,kind:R})},function(){var v=c(this),R=v.target,O=v.kind,H=v.index++;return!R||H>=R.length?(v.target=void 0,{value:void 0,done:!0}):"keys"==O?{value:H,done:!1}:"values"==O?{value:R[H],done:!1}:{value:[H,R[H]],done:!1}},"values"),e.Arguments=e.Array,p("keys"),p("values"),p("entries")},78713:(L,W,m)=>{"use strict";var y=m(5327),p=m(93949).map;y({target:"Array",proto:!0,forced:!m(54647)("map")},{map:function(o){return p(this,o,arguments.length>1?arguments[1]:void 0)}})},94775:(L,W,m)=>{"use strict";var y=m(5327),p=m(74258),e=m(62845),t=m(2817),n=m(9616),o=m(69723),s=m(25979),c=m(73684),v=m(13493),R=m(35009),O=m(54647),H=m(64716),V=O("slice"),G=R("species"),Z=p.Array,vt=Math.max;y({target:"Array",proto:!0,forced:!V},{slice:function(ot,wt){var bt,tt,Rt,ct=c(this),yt=s(ct),lt=o(ot,yt),at=o(void 0===wt?yt:wt,yt);if(e(ct)&&((t(bt=ct.constructor)&&(bt===Z||e(bt.prototype))||n(bt)&&null===(bt=bt[G]))&&(bt=void 0),bt===Z||void 0===bt))return H(ct,lt,at);for(tt=new(void 0===bt?Z:bt)(vt(at-lt,0)),Rt=0;lt<at;lt++,Rt++)lt in ct&&v(tt,Rt,ct[lt]);return tt.length=Rt,tt}})},8195:(L,W,m)=>{"use strict";var y=m(5327),p=m(74258),e=m(69723),t=m(32938),n=m(25979),o=m(34972),s=m(47137),c=m(13493),R=m(54647)("splice"),O=p.TypeError,H=Math.max,V=Math.min,G=9007199254740991,Z="Maximum allowed length exceeded";y({target:"Array",proto:!0,forced:!R},{splice:function(it,ot){var at,bt,tt,Rt,mt,dt,wt=o(this),ct=n(wt),yt=e(it,ct),lt=arguments.length;if(0===lt?at=bt=0:1===lt?(at=0,bt=ct-yt):(at=lt-2,bt=V(H(t(ot),0),ct-yt)),ct+at-bt>G)throw O(Z);for(tt=s(wt,bt),Rt=0;Rt<bt;Rt++)(mt=yt+Rt)in wt&&c(tt,Rt,wt[mt]);if(tt.length=bt,at<bt){for(Rt=yt;Rt<ct-bt;Rt++)dt=Rt+at,(mt=Rt+bt)in wt?wt[dt]=wt[mt]:delete wt[dt];for(Rt=ct;Rt>ct-bt+at;Rt--)delete wt[Rt-1]}else if(at>bt)for(Rt=ct-bt;Rt>yt;Rt--)dt=Rt+at-1,(mt=Rt+bt-1)in wt?wt[dt]=wt[mt]:delete wt[dt];for(Rt=0;Rt<at;Rt++)wt[Rt+yt]=arguments[Rt+2];return wt.length=ct-bt+at,tt}})},35249:(L,W,m)=>{var y=m(5327),p=m(74258),e=m(26444),t=m(66864),n=m(94800),o=m(77054),s=p.Array,c=e("JSON","stringify"),v=n(/./.exec),R=n("".charAt),O=n("".charCodeAt),H=n("".replace),V=n(1..toString),G=/[\uD800-\uDFFF]/g,Z=/^[\uD800-\uDBFF]$/,vt=/^[\uDC00-\uDFFF]$/,it=function(wt,ct,yt){var lt=R(yt,ct-1),at=R(yt,ct+1);return v(Z,wt)&&!v(vt,at)||v(vt,wt)&&!v(Z,lt)?"\\u"+V(O(wt,0),16):wt},ot=o(function(){return'"\\udf06\\ud834"'!==c("\udf06\ud834")||'"\\udead"'!==c("\udead")});c&&y({target:"JSON",stat:!0,forced:ot},{stringify:function(ct,yt,lt){for(var at=0,bt=arguments.length,tt=s(bt);at<bt;at++)tt[at]=arguments[at];var Rt=t(c,null,tt);return"string"==typeof Rt?H(Rt,G,it):Rt}})},2757:(L,W,m)=>{var y=m(74258);m(8144)(y.JSON,"JSON",!0)},58956:()=>{},41423:(L,W,m)=>{var y=m(5327),p=m(67271);y({target:"Object",stat:!0,forced:Object.assign!==p},{assign:p})},81892:(L,W,m)=>{var y=m(5327),p=m(46876);y({target:"Object",stat:!0,forced:!p,sham:!p},{defineProperties:m(47398)})},80247:(L,W,m)=>{var y=m(5327),p=m(46876);y({target:"Object",stat:!0,forced:!p,sham:!p},{defineProperty:m(35270).f})},22700:(L,W,m)=>{var y=m(5327),p=m(22014).entries;y({target:"Object",stat:!0},{entries:function(t){return p(t)}})},36342:(L,W,m)=>{var y=m(5327),p=m(77054),e=m(73684),t=m(11841).f,n=m(46876),o=p(function(){t(1)});y({target:"Object",stat:!0,forced:!n||o,sham:!n},{getOwnPropertyDescriptor:function(v,R){return t(e(v),R)}})},4878:(L,W,m)=>{var y=m(5327),p=m(46876),e=m(51566),t=m(73684),n=m(11841),o=m(13493);y({target:"Object",stat:!0,sham:!p},{getOwnPropertyDescriptors:function(c){for(var G,Z,v=t(c),R=n.f,O=e(v),H={},V=0;O.length>V;)void 0!==(Z=R(v,G=O[V++]))&&o(H,G,Z);return H}})},21165:(L,W,m)=>{var y=m(5327),p=m(34972),e=m(39698);y({target:"Object",stat:!0,forced:m(77054)(function(){e(1)})},{keys:function(s){return e(p(s))}})},79445:()=>{},35503:(L,W,m)=>{"use strict";var y=m(5327),p=m(45439),e=m(6567),t=m(51189),n=m(7286),o=m(74266);y({target:"Promise",stat:!0},{allSettled:function(c){var v=this,R=t.f(v),O=R.resolve,H=R.reject,V=n(function(){var G=e(v.resolve),Z=[],vt=0,it=1;o(c,function(ot){var wt=vt++,ct=!1;it++,p(G,v,ot).then(function(yt){ct||(ct=!0,Z[wt]={status:"fulfilled",value:yt},--it||O(Z))},function(yt){ct||(ct=!0,Z[wt]={status:"rejected",reason:yt},--it||O(Z))})}),--it||O(Z)});return V.error&&H(V.value),R.promise}})},54677:(L,W,m)=>{"use strict";var y=m(5327),p=m(6567),e=m(26444),t=m(45439),n=m(51189),o=m(7286),s=m(74266),c="No one promise resolved";y({target:"Promise",stat:!0},{any:function(R){var O=this,H=e("AggregateError"),V=n.f(O),G=V.resolve,Z=V.reject,vt=o(function(){var it=p(O.resolve),ot=[],wt=0,ct=1,yt=!1;s(R,function(lt){var at=wt++,bt=!1;ct++,t(it,O,lt).then(function(tt){bt||yt||(yt=!0,G(tt))},function(tt){bt||yt||(bt=!0,ot[at]=tt,--ct||Z(new H(ot,c)))})}),--ct||Z(new H(ot,c))});return vt.error&&Z(vt.value),V.promise}})},13013:(L,W,m)=>{"use strict";var y=m(5327),p=m(31818),e=m(64505),t=m(77054),n=m(26444),o=m(14563),s=m(7806),c=m(47249),v=m(73294);if(y({target:"Promise",proto:!0,real:!0,forced:!!e&&t(function(){e.prototype.finally.call({then:function(){}},function(){})})},{finally:function(H){var V=s(this,n("Promise")),G=o(H);return this.then(G?function(Z){return c(V,H()).then(function(){return Z})}:H,G?function(Z){return c(V,H()).then(function(){throw Z})}:H)}}),!p&&o(e)){var O=n("Promise").prototype.finally;e.prototype.finally!==O&&v(e.prototype,"finally",O,{unsafe:!0})}},56143:(L,W,m)=>{"use strict";var Zt,Yt,ue,le,y=m(5327),p=m(31818),e=m(74258),t=m(26444),n=m(45439),o=m(64505),s=m(73294),c=m(32914),v=m(3358),R=m(8144),O=m(73012),H=m(6567),V=m(14563),G=m(9616),Z=m(7561),vt=m(19656),it=m(74266),ot=m(85306),wt=m(7806),ct=m(88530).set,yt=m(17547),lt=m(47249),at=m(47157),bt=m(51189),tt=m(7286),Rt=m(46053),mt=m(74088),dt=m(35009),nt=m(15418),st=m(1593),Gt=m(97502),It=dt("species"),Vt="Promise",Ie=Rt.getterFor(Vt),Ze=Rt.set,me=Rt.getterFor(Vt),Be=o&&o.prototype,Ge=o,si=Be,Qe=e.TypeError,Ne=e.document,pe=e.process,we=bt.f,Ve=we,ui=!!(Ne&&Ne.createEvent&&e.dispatchEvent),Ke=V(e.PromiseRejectionEvent),be="unhandledrejection",Ht=!1,Mt=mt(Vt,function(){var $e=vt(Ge),ei=$e!==String(Ge);if(!ei&&66===Gt||p&&!si.finally)return!0;if(Gt>=51&&/native code/.test($e))return!1;var ae=new Ge(function(Te){Te(1)}),Pe=function(Te){Te(function(){},function(){})};return(ae.constructor={})[It]=Pe,!(Ht=ae.then(function(){})instanceof Pe)||!ei&&nt&&!Ke}),Nt=Mt||!ot(function($e){Ge.all($e).catch(function(){})}),ke=function($e){var ei;return!(!G($e)||!V(ei=$e.then))&&ei},je=function($e,ei){if(!$e.notified){$e.notified=!0;var ae=$e.reactions;yt(function(){for(var Pe=$e.value,oi=1==$e.state,Te=0;ae.length>Te;){var Ee,ti,Pi,Oe=ae[Te++],se=oi?Oe.ok:Oe.fail,Jt=Oe.resolve,te=Oe.reject,qt=Oe.domain;try{se?(oi||(2===$e.rejection&&Bi($e),$e.rejection=1),!0===se?Ee=Pe:(qt&&qt.enter(),Ee=se(Pe),qt&&(qt.exit(),Pi=!0)),Ee===Oe.promise?te(Qe("Promise-chain cycle")):(ti=ke(Ee))?n(ti,Ee,Jt,te):Jt(Ee)):te(Pe)}catch(Hi){qt&&!Pi&&qt.exit(),te(Hi)}}$e.reactions=[],$e.notified=!1,ei&&!$e.rejection&&ri($e)})}},li=function($e,ei,ae){var Pe,oi;ui?((Pe=Ne.createEvent("Event")).promise=ei,Pe.reason=ae,Pe.initEvent($e,!1,!0),e.dispatchEvent(Pe)):Pe={promise:ei,reason:ae},!Ke&&(oi=e["on"+$e])?oi(Pe):$e===be&&at("Unhandled promise rejection",ae)},ri=function($e){n(ct,e,function(){var oi,ei=$e.facade,ae=$e.value;if(mi($e)&&(oi=tt(function(){st?pe.emit("unhandledRejection",ae,ei):li(be,ei,ae)}),$e.rejection=st||mi($e)?2:1,oi.error))throw oi.value})},mi=function($e){return 1!==$e.rejection&&!$e.parent},Bi=function($e){n(ct,e,function(){var ei=$e.facade;st?pe.emit("rejectionHandled",ei):li("rejectionhandled",ei,$e.value)})},pi=function($e,ei,ae){return function(Pe){$e(ei,Pe,ae)}},bi=function($e,ei,ae){$e.done||($e.done=!0,ae&&($e=ae),$e.value=ei,$e.state=2,je($e,!0))},yi=function($e,ei,ae){if(!$e.done){$e.done=!0,ae&&($e=ae);try{if($e.facade===ei)throw Qe("Promise can't be resolved itself");var Pe=ke(ei);Pe?yt(function(){var oi={done:!1};try{n(Pe,ei,pi(yi,oi,$e),pi(bi,oi,$e))}catch(Te){bi(oi,Te,$e)}}):($e.value=ei,$e.state=1,je($e,!1))}catch(oi){bi({done:!1},oi,$e)}}};if(Mt&&(Ge=function(ei){Z(this,si),H(ei),n(Zt,this);var ae=Ie(this);try{ei(pi(yi,ae),pi(bi,ae))}catch(Pe){bi(ae,Pe)}},(Zt=function(ei){Ze(this,{type:Vt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=c(si=Ge.prototype,{then:function(ei,ae){var Pe=me(this),oi=Pe.reactions,Te=we(wt(this,Ge));return Te.ok=!V(ei)||ei,Te.fail=V(ae)&&ae,Te.domain=st?pe.domain:void 0,Pe.parent=!0,oi[oi.length]=Te,0!=Pe.state&&je(Pe,!1),Te.promise},catch:function($e){return this.then(void 0,$e)}}),Yt=function(){var $e=new Zt,ei=Ie($e);this.promise=$e,this.resolve=pi(yi,ei),this.reject=pi(bi,ei)},bt.f=we=function($e){return $e===Ge||$e===ue?new Yt($e):Ve($e)},!p&&V(o)&&Be!==Object.prototype)){le=Be.then,Ht||(s(Be,"then",function(ei,ae){var Pe=this;return new Ge(function(oi,Te){n(le,Pe,oi,Te)}).then(ei,ae)},{unsafe:!0}),s(Be,"catch",si.catch,{unsafe:!0}));try{delete Be.constructor}catch($e){}v&&v(Be,si)}y({global:!0,wrap:!0,forced:Mt},{Promise:Ge}),R(Ge,Vt,!1,!0),O(Vt),ue=t(Vt),y({target:Vt,stat:!0,forced:Mt},{reject:function(ei){var ae=we(this);return n(ae.reject,void 0,ei),ae.promise}}),y({target:Vt,stat:!0,forced:p||Mt},{resolve:function(ei){return lt(p&&this===ue?Ge:this,ei)}}),y({target:Vt,stat:!0,forced:Nt},{all:function(ei){var ae=this,Pe=we(ae),oi=Pe.resolve,Te=Pe.reject,Oe=tt(function(){var se=H(ae.resolve),Jt=[],te=0,qt=1;it(ei,function(Ee){var ti=te++,Pi=!1;qt++,n(se,ae,Ee).then(function(Hi){Pi||(Pi=!0,Jt[ti]=Hi,--qt||oi(Jt))},Te)}),--qt||oi(Jt)});return Oe.error&&Te(Oe.value),Pe.promise},race:function(ei){var ae=this,Pe=we(ae),oi=Pe.reject,Te=tt(function(){var Oe=H(ae.resolve);it(ei,function(se){n(Oe,ae,se).then(Pe.resolve,oi)})});return Te.error&&oi(Te.value),Pe.promise}})},32257:()=>{},53030:(L,W,m)=>{"use strict";var y=m(5327),p=m(94800),e=m(38743),t=m(45696),n=m(16096),o=m(56850),s=p("".indexOf);y({target:"String",proto:!0,forced:!o("includes")},{includes:function(v){return!!~s(n(t(this)),n(e(v)),arguments.length>1?arguments[1]:void 0)}})},21514:(L,W,m)=>{"use strict";var y=m(4343).charAt,p=m(16096),e=m(46053),t=m(63957),n="String Iterator",o=e.set,s=e.getterFor(n);t(String,"String",function(c){o(this,{type:n,string:p(c),index:0})},function(){var H,v=s(this),R=v.string,O=v.index;return O>=R.length?{value:void 0,done:!0}:(H=y(R,O),v.index+=H.length,{value:H,done:!1})})},35828:(L,W,m)=>{"use strict";var Z,y=m(5327),p=m(94800),e=m(11841).f,t=m(26965),n=m(16096),o=m(38743),s=m(45696),c=m(56850),v=m(31818),R=p("".startsWith),O=p("".slice),H=Math.min,V=c("startsWith");y({target:"String",proto:!0,forced:!(!v&&!V&&(Z=e(String.prototype,"startsWith"),Z&&!Z.writable)||V)},{startsWith:function(vt){var it=n(s(this));o(vt);var ot=t(H(arguments.length>1?arguments[1]:void 0,it.length)),wt=n(vt);return R?R(it,wt,ot):O(it,ot,ot+wt.length)===wt}})},39334:(L,W,m)=>{m(90898)("asyncIterator")},27014:()=>{},57071:(L,W,m)=>{m(90898)("hasInstance")},58666:(L,W,m)=>{m(90898)("isConcatSpreadable")},15816:(L,W,m)=>{m(90898)("iterator")},57479:(L,W,m)=>{"use strict";var y=m(5327),p=m(74258),e=m(26444),t=m(66864),n=m(45439),o=m(94800),s=m(31818),c=m(46876),v=m(98615),R=m(77054),O=m(68739),H=m(62845),V=m(14563),G=m(9616),Z=m(61517),vt=m(7683),it=m(49403),ot=m(34972),wt=m(73684),ct=m(84061),yt=m(16096),lt=m(25677),at=m(66112),bt=m(39698),tt=m(36336),Rt=m(25278),mt=m(72584),dt=m(11841),nt=m(35270),st=m(32018),Gt=m(64716),It=m(73294),Vt=m(39302),Ie=m(82062),Ze=m(41933),me=m(48110),Be=m(35009),Ge=m(79182),si=m(90898),Qe=m(8144),Ne=m(46053),pe=m(93949).forEach,we=Ie("hidden"),Ve="Symbol",ui="prototype",Ke=Be("toPrimitive"),be=Ne.set,Xt=Ne.getterFor(Ve),re=Object[ui],Me=p.Symbol,vi=Me&&Me[ui],ie=p.TypeError,Ut=p.QObject,Ht=e("JSON","stringify"),Zt=dt.f,Yt=nt.f,ue=Rt.f,le=st.f,Mt=o([].push),Nt=Vt("symbols"),ke=Vt("op-symbols"),je=Vt("string-to-symbol-registry"),li=Vt("symbol-to-string-registry"),ri=Vt("wks"),mi=!Ut||!Ut[ui]||!Ut[ui].findChild,Bi=c&&R(function(){return 7!=at(Yt({},"a",{get:function(){return Yt(this,"a",{value:7}).a}})).a})?function(se,Jt,te){var qt=Zt(re,Jt);qt&&delete re[Jt],Yt(se,Jt,te),qt&&se!==re&&Yt(re,Jt,qt)}:Yt,pi=function(se,Jt){var te=Nt[se]=at(vi);return be(te,{type:Ve,tag:se,description:Jt}),c||(te.description=Jt),te},bi=function(Jt,te,qt){Jt===re&&bi(ke,te,qt),it(Jt);var Ee=ct(te);return it(qt),O(Nt,Ee)?(qt.enumerable?(O(Jt,we)&&Jt[we][Ee]&&(Jt[we][Ee]=!1),qt=at(qt,{enumerable:lt(0,!1)})):(O(Jt,we)||Yt(Jt,we,lt(1,{})),Jt[we][Ee]=!0),Bi(Jt,Ee,qt)):Yt(Jt,Ee,qt)},yi=function(Jt,te){it(Jt);var qt=wt(te),Ee=bt(qt).concat(oi(qt));return pe(Ee,function(ti){(!c||n(ei,qt,ti))&&bi(Jt,ti,qt[ti])}),Jt},ei=function(Jt){var te=ct(Jt),qt=n(le,this,te);return!(this===re&&O(Nt,te)&&!O(ke,te))&&(!(qt||!O(this,te)||!O(Nt,te)||O(this,we)&&this[we][te])||qt)},ae=function(Jt,te){var qt=wt(Jt),Ee=ct(te);if(qt!==re||!O(Nt,Ee)||O(ke,Ee)){var ti=Zt(qt,Ee);return ti&&O(Nt,Ee)&&!(O(qt,we)&&qt[we][Ee])&&(ti.enumerable=!0),ti}},Pe=function(Jt){var te=ue(wt(Jt)),qt=[];return pe(te,function(Ee){!O(Nt,Ee)&&!O(Ze,Ee)&&Mt(qt,Ee)}),qt},oi=function(Jt){var te=Jt===re,qt=ue(te?ke:wt(Jt)),Ee=[];return pe(qt,function(ti){O(Nt,ti)&&(!te||O(re,ti))&&Mt(Ee,Nt[ti])}),Ee};if(v||(It(vi=(Me=function(){if(Z(vi,this))throw ie("Symbol is not a constructor");var Jt=arguments.length&&void 0!==arguments[0]?yt(arguments[0]):void 0,te=me(Jt),qt=function(Ee){this===re&&n(qt,ke,Ee),O(this,we)&&O(this[we],te)&&(this[we][te]=!1),Bi(this,te,lt(1,Ee))};return c&&mi&&Bi(re,te,{configurable:!0,set:qt}),pi(te,Jt)})[ui],"toString",function(){return Xt(this).tag}),It(Me,"withoutSetter",function(se){return pi(me(se),se)}),st.f=ei,nt.f=bi,dt.f=ae,tt.f=Rt.f=Pe,mt.f=oi,Ge.f=function(se){return pi(Be(se),se)},c&&(Yt(vi,"description",{configurable:!0,get:function(){return Xt(this).description}}),s||It(re,"propertyIsEnumerable",ei,{unsafe:!0}))),y({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:Me}),pe(bt(ri),function(se){si(se)}),y({target:Ve,stat:!0,forced:!v},{for:function(se){var Jt=yt(se);if(O(je,Jt))return je[Jt];var te=Me(Jt);return je[Jt]=te,li[te]=Jt,te},keyFor:function(Jt){if(!vt(Jt))throw ie(Jt+" is not a symbol");if(O(li,Jt))return li[Jt]},useSetter:function(){mi=!0},useSimple:function(){mi=!1}}),y({target:"Object",stat:!0,forced:!v,sham:!c},{create:function(Jt,te){return void 0===te?at(Jt):yi(at(Jt),te)},defineProperty:bi,defineProperties:yi,getOwnPropertyDescriptor:ae}),y({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:Pe,getOwnPropertySymbols:oi}),y({target:"Object",stat:!0,forced:R(function(){mt.f(1)})},{getOwnPropertySymbols:function(Jt){return mt.f(ot(Jt))}}),Ht&&y({target:"JSON",stat:!0,forced:!v||R(function(){var se=Me();return"[null]"!=Ht([se])||"{}"!=Ht({a:se})||"{}"!=Ht(Object(se))})},{stringify:function(Jt,te,qt){var Ee=Gt(arguments),ti=te;if((G(te)||void 0!==Jt)&&!vt(Jt))return H(te)||(te=function(Pi,Hi){if(V(ti)&&(Hi=n(ti,this,Pi,Hi)),!vt(Hi))return Hi}),Ee[1]=te,t(Ht,null,Ee)}}),!vi[Ke]){var Oe=vi.valueOf;It(vi,Ke,function(se){return n(Oe,this)})}Qe(Me,Ve),Ze[we]=!0},20950:(L,W,m)=>{m(90898)("matchAll")},14740:(L,W,m)=>{m(90898)("match")},76499:(L,W,m)=>{m(90898)("replace")},94696:(L,W,m)=>{m(90898)("search")},72105:(L,W,m)=>{m(90898)("species")},5247:(L,W,m)=>{m(90898)("split")},53825:(L,W,m)=>{m(90898)("toPrimitive")},22529:(L,W,m)=>{m(90898)("toStringTag")},90591:(L,W,m)=>{m(90898)("unscopables")},26054:(L,W,m)=>{"use strict";var H,y=m(74258),p=m(94800),e=m(32914),t=m(10344),n=m(53303),o=m(82639),s=m(9616),c=m(15774),v=m(46053).enforce,R=m(66654),O=!y.ActiveXObject&&"ActiveXObject"in y,V=function(ct){return function(){return ct(this,arguments.length?arguments[0]:void 0)}},G=n("WeakMap",V,o);if(R&&O){H=o.getConstructor(V,"WeakMap",!0),t.enable();var Z=G.prototype,vt=p(Z.delete),it=p(Z.has),ot=p(Z.get),wt=p(Z.set);e(Z,{delete:function(ct){if(s(ct)&&!c(ct)){var yt=v(this);return yt.frozen||(yt.frozen=new H),vt(this,ct)||yt.frozen.delete(ct)}return vt(this,ct)},has:function(yt){if(s(yt)&&!c(yt)){var lt=v(this);return lt.frozen||(lt.frozen=new H),it(this,yt)||lt.frozen.has(yt)}return it(this,yt)},get:function(yt){if(s(yt)&&!c(yt)){var lt=v(this);return lt.frozen||(lt.frozen=new H),it(this,yt)?ot(this,yt):lt.frozen.get(yt)}return ot(this,yt)},set:function(yt,lt){if(s(yt)&&!c(yt)){var at=v(this);at.frozen||(at.frozen=new H),it(this,yt)?wt(this,yt,lt):at.frozen.set(yt,lt)}else wt(this,yt,lt);return this}})}},22977:(L,W,m)=>{m(10153)},17724:(L,W,m)=>{m(35503)},50162:(L,W,m)=>{m(54677)},79178:(L,W,m)=>{"use strict";var y=m(5327),p=m(51189),e=m(7286);y({target:"Promise",stat:!0},{try:function(t){var n=p.f(this),o=e(t);return(o.error?n.reject:n.resolve)(o.value),n.promise}})},83066:(L,W,m)=>{m(90898)("asyncDispose")},40338:(L,W,m)=>{m(90898)("dispose")},23560:(L,W,m)=>{m(90898)("matcher")},61546:(L,W,m)=>{m(90898)("metadata")},70214:(L,W,m)=>{m(90898)("observable")},96506:(L,W,m)=>{m(90898)("patternMatch")},82356:(L,W,m)=>{m(90898)("replaceAll")},81006:(L,W,m)=>{m(23483);var y=m(6379),p=m(74258),e=m(27870),t=m(94119),n=m(76539),s=m(35009)("toStringTag");for(var c in y){var v=p[c],R=v&&v.prototype;R&&e(R)!==s&&t(R,s,c),n[c]=n.Array}},28478:(L,W,m)=>{"use strict";m(23483);var y=m(5327),p=m(74258),e=m(26444),t=m(45439),n=m(94800),o=m(30251),s=m(73294),c=m(32914),v=m(8144),R=m(94577),O=m(46053),H=m(7561),V=m(14563),G=m(68739),Z=m(94640),vt=m(27870),it=m(49403),ot=m(9616),wt=m(16096),ct=m(66112),yt=m(25677),lt=m(72442),at=m(50806),bt=m(35009),tt=m(53904),Rt=bt("iterator"),mt="URLSearchParams",dt=mt+"Iterator",nt=O.set,st=O.getterFor(mt),Gt=O.getterFor(dt),It=e("fetch"),Vt=e("Request"),Ie=e("Headers"),Ze=Vt&&Vt.prototype,me=Ie&&Ie.prototype,Be=p.RegExp,Ge=p.TypeError,si=p.decodeURIComponent,Qe=p.encodeURIComponent,Ne=n("".charAt),pe=n([].join),we=n([].push),Ve=n("".replace),ui=n([].shift),Ke=n([].splice),be=n("".split),Xt=n("".slice),re=/\+/g,Me=Array(4),vi=function(pi){return Me[pi-1]||(Me[pi-1]=Be("((?:%[\\da-f]{2}){"+pi+"})","gi"))},ie=function(pi){try{return si(pi)}catch(bi){return pi}},Ut=function(pi){var bi=Ve(pi,re," "),yi=4;try{return si(bi)}catch($e){for(;yi;)bi=Ve(bi,vi(yi--),ie);return bi}},Ht=/[!'()~]|%20/g,Zt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Yt=function(pi){return Zt[pi]},ue=function(pi){return Ve(Qe(pi),Ht,Yt)},le=function(pi,bi){if(pi<bi)throw Ge("Not enough arguments")},Mt=R(function(bi,yi){nt(this,{type:dt,iterator:lt(st(bi).entries),kind:yi})},"Iterator",function(){var bi=Gt(this),yi=bi.kind,$e=bi.iterator.next(),ei=$e.value;return $e.done||($e.value="keys"===yi?ei.key:"values"===yi?ei.value:[ei.key,ei.value]),$e},!0),Nt=function(pi){this.entries=[],this.url=null,void 0!==pi&&(ot(pi)?this.parseObject(pi):this.parseQuery("string"==typeof pi?"?"===Ne(pi,0)?Xt(pi,1):pi:wt(pi)))};Nt.prototype={type:mt,bindURL:function(pi){this.url=pi,this.update()},parseObject:function(pi){var yi,$e,ei,ae,Pe,oi,Te,bi=at(pi);if(bi)for($e=(yi=lt(pi,bi)).next;!(ei=t($e,yi)).done;){if(ae=lt(it(ei.value)),(oi=t(Pe=ae.next,ae)).done||(Te=t(Pe,ae)).done||!t(Pe,ae).done)throw Ge("Expected sequence with length 2");we(this.entries,{key:wt(oi.value),value:wt(Te.value)})}else for(var Oe in pi)G(pi,Oe)&&we(this.entries,{key:Oe,value:wt(pi[Oe])})},parseQuery:function(pi){if(pi)for(var $e,ei,bi=be(pi,"&"),yi=0;yi<bi.length;)($e=bi[yi++]).length&&(ei=be($e,"="),we(this.entries,{key:Ut(ui(ei)),value:Ut(pe(ei,"="))}))},serialize:function(){for(var $e,pi=this.entries,bi=[],yi=0;yi<pi.length;)$e=pi[yi++],we(bi,ue($e.key)+"="+ue($e.value));return pe(bi,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ke=function(){H(this,je);var bi=arguments.length>0?arguments[0]:void 0;nt(this,new Nt(bi))},je=ke.prototype;if(c(je,{append:function(bi,yi){le(arguments.length,2);var $e=st(this);we($e.entries,{key:wt(bi),value:wt(yi)}),$e.updateURL()},delete:function(pi){le(arguments.length,1);for(var bi=st(this),yi=bi.entries,$e=wt(pi),ei=0;ei<yi.length;)yi[ei].key===$e?Ke(yi,ei,1):ei++;bi.updateURL()},get:function(bi){le(arguments.length,1);for(var yi=st(this).entries,$e=wt(bi),ei=0;ei<yi.length;ei++)if(yi[ei].key===$e)return yi[ei].value;return null},getAll:function(bi){le(arguments.length,1);for(var yi=st(this).entries,$e=wt(bi),ei=[],ae=0;ae<yi.length;ae++)yi[ae].key===$e&&we(ei,yi[ae].value);return ei},has:function(bi){le(arguments.length,1);for(var yi=st(this).entries,$e=wt(bi),ei=0;ei<yi.length;)if(yi[ei++].key===$e)return!0;return!1},set:function(bi,yi){le(arguments.length,1);for(var Oe,$e=st(this),ei=$e.entries,ae=!1,Pe=wt(bi),oi=wt(yi),Te=0;Te<ei.length;Te++)(Oe=ei[Te]).key===Pe&&(ae?Ke(ei,Te--,1):(ae=!0,Oe.value=oi));ae||we(ei,{key:Pe,value:oi}),$e.updateURL()},sort:function(){var bi=st(this);tt(bi.entries,function(yi,$e){return yi.key>$e.key?1:-1}),bi.updateURL()},forEach:function(bi){for(var ae,yi=st(this).entries,$e=Z(bi,arguments.length>1?arguments[1]:void 0),ei=0;ei<yi.length;)$e((ae=yi[ei++]).value,ae.key,this)},keys:function(){return new Mt(this,"keys")},values:function(){return new Mt(this,"values")},entries:function(){return new Mt(this,"entries")}},{enumerable:!0}),s(je,Rt,je.entries,{name:"entries"}),s(je,"toString",function(){return st(this).serialize()},{enumerable:!0}),v(ke,mt),y({global:!0,forced:!o},{URLSearchParams:ke}),!o&&V(Ie)){var li=n(me.has),ri=n(me.set),mi=function(pi){if(ot(pi)){var yi,bi=pi.body;if(vt(bi)===mt)return yi=pi.headers?new Ie(pi.headers):new Ie,li(yi,"content-type")||ri(yi,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),ct(pi,{body:yt(0,wt(bi)),headers:yt(0,yi)})}return pi};if(V(It)&&y({global:!0,enumerable:!0,forced:!0},{fetch:function(bi){return It(bi,arguments.length>1?mi(arguments[1]):{})}}),V(Vt)){var Bi=function(bi){return H(this,Ze),new Vt(bi,arguments.length>1?mi(arguments[1]):{})};Ze.constructor=Bi,Bi.prototype=Ze,y({global:!0,forced:!0},{Request:Bi})}}L.exports={URLSearchParams:ke,getState:st}},82422:(L,W,m)=>{var y=m(82344);L.exports=y},30260:(L,W,m)=>{var y=m(12557);L.exports=y},36575:(L,W,m)=>{var y=m(87183);L.exports=y},41215:(L,W,m)=>{var y=m(65009);L.exports=y},31216:(L,W,m)=>{var y=m(98088);m(81006),L.exports=y},8535:(L,W,m)=>{var y=m(48023);L.exports=y},29114:(L,W,m)=>{m(81006);var y=m(27870),p=m(68739),e=m(61517),t=m(36575),n=Array.prototype,o={DOMTokenList:!0,NodeList:!0};L.exports=function(s){var c=s.entries;return s===n||e(n,s)&&c===n.entries||p(o,y(s))?t:c}},30376:(L,W,m)=>{var y=m(8425);L.exports=y},9102:(L,W,m)=>{var y=m(61008);L.exports=y},88334:(L,W,m)=>{m(81006);var y=m(27870),p=m(68739),e=m(61517),t=m(41215),n=Array.prototype,o={DOMTokenList:!0,NodeList:!0};L.exports=function(s){var c=s.forEach;return s===n||e(n,s)&&c===n.forEach||p(o,y(s))?t:c}},40809:(L,W,m)=>{var y=m(18583);L.exports=y},68379:(L,W,m)=>{var y=m(84676);L.exports=y},40051:(L,W,m)=>{var y=m(59032);L.exports=y},42905:(L,W,m)=>{var y=m(70660);L.exports=y},77120:(L,W,m)=>{var y=m(12256);L.exports=y},47940:(L,W,m)=>{var y=m(14475);L.exports=y},15783:(L,W,m)=>{var y=m(98711);L.exports=y},68397:(L,W,m)=>{var y=m(98169);L.exports=y},31545:(L,W,m)=>{var y=m(31916);L.exports=y},39565:(L,W,m)=>{var y=m(47429);L.exports=y},64043:(L,W,m)=>{var y=m(2487);L.exports=y},63122:(L,W,m)=>{var y=m(77626);L.exports=y},76650:(L,W,m)=>{var y=m(81043);L.exports=y},51266:(L,W,m)=>{var y=m(98838);L.exports=y},69265:(L,W,m)=>{var y=m(63977);L.exports=y},64781:(L,W,m)=>{var y=m(14099);m(81006),L.exports=y},56219:(L,W,m)=>{var y=m(1816);m(81006),L.exports=y},78921:(L,W,m)=>{var y=m(64776);m(81006),L.exports=y},99671:(L,W,m)=>{var y=m(64667);m(81006),L.exports=y},80297:(L,W,m)=>{var y=m(65988);m(81006),L.exports=y},64667:(L,W,m)=>{m(28478);var y=m(52457);L.exports=y.URLSearchParams},11966:function(){var L;L="undefined"!=typeof self?self:this,function(m){var y_searchParams="URLSearchParams"in L,y_iterable="Symbol"in L&&"iterator"in Symbol,y_blob="FileReader"in L&&"Blob"in L&&function(){try{return new Blob,!0}catch(bt){return!1}}(),y_formData="FormData"in L,y_arrayBuffer="ArrayBuffer"in L;if(y_arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],t=ArrayBuffer.isView||function(bt){return bt&&e.indexOf(Object.prototype.toString.call(bt))>-1};function n(bt){if("string"!=typeof bt&&(bt=String(bt)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(bt))throw new TypeError("Invalid character in header field name");return bt.toLowerCase()}function o(bt){return"string"!=typeof bt&&(bt=String(bt)),bt}function s(bt){var tt={next:function(){var Rt=bt.shift();return{done:void 0===Rt,value:Rt}}};return y_iterable&&(tt[Symbol.iterator]=function(){return tt}),tt}function c(bt){this.map={},bt instanceof c?bt.forEach(function(tt,Rt){this.append(Rt,tt)},this):Array.isArray(bt)?bt.forEach(function(tt){this.append(tt[0],tt[1])},this):bt&&Object.getOwnPropertyNames(bt).forEach(function(tt){this.append(tt,bt[tt])},this)}function v(bt){if(bt.bodyUsed)return Promise.reject(new TypeError("Already read"));bt.bodyUsed=!0}function R(bt){return new Promise(function(tt,Rt){bt.onload=function(){tt(bt.result)},bt.onerror=function(){Rt(bt.error)}})}function O(bt){var tt=new FileReader,Rt=R(tt);return tt.readAsArrayBuffer(bt),Rt}function G(bt){if(bt.slice)return bt.slice(0);var tt=new Uint8Array(bt.byteLength);return tt.set(new Uint8Array(bt)),tt.buffer}function Z(){return this.bodyUsed=!1,this._initBody=function(bt){this._bodyInit=bt,bt?"string"==typeof bt?this._bodyText=bt:y_blob&&Blob.prototype.isPrototypeOf(bt)?this._bodyBlob=bt:y_formData&&FormData.prototype.isPrototypeOf(bt)?this._bodyFormData=bt:y_searchParams&&URLSearchParams.prototype.isPrototypeOf(bt)?this._bodyText=bt.toString():y_arrayBuffer&&y_blob&&function(bt){return bt&&DataView.prototype.isPrototypeOf(bt)}(bt)?(this._bodyArrayBuffer=G(bt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):y_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(bt)||t(bt))?this._bodyArrayBuffer=G(bt):this._bodyText=bt=Object.prototype.toString.call(bt):this._bodyText="",this.headers.get("content-type")||("string"==typeof bt?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y_searchParams&&URLSearchParams.prototype.isPrototypeOf(bt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y_blob&&(this.blob=function(){var bt=v(this);if(bt)return bt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(O)}),this.text=function(){var bt=v(this);if(bt)return bt;if(this._bodyBlob)return function(bt){var tt=new FileReader,Rt=R(tt);return tt.readAsText(bt),Rt}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(bt){for(var tt=new Uint8Array(bt),Rt=new Array(tt.length),mt=0;mt<tt.length;mt++)Rt[mt]=String.fromCharCode(tt[mt]);return Rt.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y_formData&&(this.formData=function(){return this.text().then(wt)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(bt,tt){bt=n(bt),tt=o(tt);var Rt=this.map[bt];this.map[bt]=Rt?Rt+", "+tt:tt},c.prototype.delete=function(bt){delete this.map[n(bt)]},c.prototype.get=function(bt){return bt=n(bt),this.has(bt)?this.map[bt]:null},c.prototype.has=function(bt){return this.map.hasOwnProperty(n(bt))},c.prototype.set=function(bt,tt){this.map[n(bt)]=o(tt)},c.prototype.forEach=function(bt,tt){for(var Rt in this.map)this.map.hasOwnProperty(Rt)&&bt.call(tt,this.map[Rt],Rt,this)},c.prototype.keys=function(){var bt=[];return this.forEach(function(tt,Rt){bt.push(Rt)}),s(bt)},c.prototype.values=function(){var bt=[];return this.forEach(function(tt){bt.push(tt)}),s(bt)},c.prototype.entries=function(){var bt=[];return this.forEach(function(tt,Rt){bt.push([Rt,tt])}),s(bt)},y_iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var vt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ot(bt,tt){var Rt=(tt=tt||{}).body;if(bt instanceof ot){if(bt.bodyUsed)throw new TypeError("Already read");this.url=bt.url,this.credentials=bt.credentials,tt.headers||(this.headers=new c(bt.headers)),this.method=bt.method,this.mode=bt.mode,this.signal=bt.signal,!Rt&&null!=bt._bodyInit&&(Rt=bt._bodyInit,bt.bodyUsed=!0)}else this.url=String(bt);if(this.credentials=tt.credentials||this.credentials||"same-origin",(tt.headers||!this.headers)&&(this.headers=new c(tt.headers)),this.method=function(bt){var tt=bt.toUpperCase();return vt.indexOf(tt)>-1?tt:bt}(tt.method||this.method||"GET"),this.mode=tt.mode||this.mode||null,this.signal=tt.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&Rt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Rt)}function wt(bt){var tt=new FormData;return bt.trim().split("&").forEach(function(Rt){if(Rt){var mt=Rt.split("="),dt=mt.shift().replace(/\+/g," "),nt=mt.join("=").replace(/\+/g," ");tt.append(decodeURIComponent(dt),decodeURIComponent(nt))}}),tt}function ct(bt){var tt=new c;return bt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(mt){var dt=mt.split(":"),nt=dt.shift().trim();if(nt){var st=dt.join(":").trim();tt.append(nt,st)}}),tt}function yt(bt,tt){tt||(tt={}),this.type="default",this.status=void 0===tt.status?200:tt.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in tt?tt.statusText:"OK",this.headers=new c(tt.headers),this.url=tt.url||"",this._initBody(bt)}ot.prototype.clone=function(){return new ot(this,{body:this._bodyInit})},Z.call(ot.prototype),Z.call(yt.prototype),yt.prototype.clone=function(){return new yt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},yt.error=function(){var bt=new yt(null,{status:0,statusText:""});return bt.type="error",bt};var lt=[301,302,303,307,308];yt.redirect=function(bt,tt){if(-1===lt.indexOf(tt))throw new RangeError("Invalid status code");return new yt(null,{status:tt,headers:{location:bt}})},m.DOMException=L.DOMException;try{new m.DOMException}catch(bt){m.DOMException=function(tt,Rt){this.message=tt,this.name=Rt;var mt=Error(tt);this.stack=mt.stack},m.DOMException.prototype=Object.create(Error.prototype),m.DOMException.prototype.constructor=m.DOMException}function at(bt,tt){return new Promise(function(Rt,mt){var dt=new ot(bt,tt);if(dt.signal&&dt.signal.aborted)return mt(new m.DOMException("Aborted","AbortError"));var nt=new XMLHttpRequest;function st(){nt.abort()}nt.onload=function(){var Gt={status:nt.status,statusText:nt.statusText,headers:ct(nt.getAllResponseHeaders()||"")};Gt.url="responseURL"in nt?nt.responseURL:Gt.headers.get("X-Request-URL"),Rt(new yt("response"in nt?nt.response:nt.responseText,Gt))},nt.onerror=function(){mt(new TypeError("Network request failed"))},nt.ontimeout=function(){mt(new TypeError("Network request failed"))},nt.onabort=function(){mt(new m.DOMException("Aborted","AbortError"))},nt.open(dt.method,dt.url,!0),"include"===dt.credentials?nt.withCredentials=!0:"omit"===dt.credentials&&(nt.withCredentials=!1),"responseType"in nt&&y_blob&&(nt.responseType="blob"),dt.headers.forEach(function(Gt,It){nt.setRequestHeader(It,Gt)}),dt.signal&&(dt.signal.addEventListener("abort",st),nt.onreadystatechange=function(){4===nt.readyState&&dt.signal.removeEventListener("abort",st)}),nt.send(void 0===dt._bodyInit?null:dt._bodyInit)})}at.polyfill=!0,L.fetch||(L.fetch=at,L.Headers=c,L.Request=ot,L.Response=yt),m.Headers=c,m.Request=ot,m.Response=yt,m.fetch=at,Object.defineProperty(m,"__esModule",{value:!0})}({})},25320:L=>{"use strict";function W(t){return t instanceof Buffer||t instanceof Date||t instanceof RegExp}function m(t){if(t instanceof Buffer){var n=Buffer.alloc?Buffer.alloc(t.length):new Buffer(t.length);return t.copy(n),n}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);throw new Error("Unexpected situation")}function y(t){var n=[];return t.forEach(function(o,s){n[s]="object"==typeof o&&null!==o?Array.isArray(o)?y(o):W(o)?m(o):e({},o):o}),n}function p(t,n){return"__proto__"===n?void 0:t[n]}var e=L.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var o,s,t=arguments[0],n=Array.prototype.slice.call(arguments,1);return n.forEach(function(v){"object"!=typeof v||null===v||Array.isArray(v)||Object.keys(v).forEach(function(R){if(s=p(t,R),(o=p(v,R))!==t)return"object"!=typeof o||null===o?void(t[R]=o):Array.isArray(o)?void(t[R]=y(o)):W(o)?void(t[R]=m(o)):"object"!=typeof s||null===s||Array.isArray(s)?void(t[R]=e({},o)):void(t[R]=e(s,o))})}),t}},18642:function(L,W){var p;void 0!==(p=function(){"use strict";function t(R,O,H){var V=new XMLHttpRequest;V.open("GET",R),V.responseType="blob",V.onload=function(){v(V.response,O,H)},V.onerror=function(){console.error("could not download file")},V.send()}function n(R){var O=new XMLHttpRequest;O.open("HEAD",R,!1);try{O.send()}catch(H){}return 200<=O.status&&299>=O.status}function o(R){try{R.dispatchEvent(new MouseEvent("click"))}catch(H){var O=document.createEvent("MouseEvents");O.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),R.dispatchEvent(O)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,c=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(R,O,H){var V=s.URL||s.webkitURL,G=document.createElement("a");G.download=O=O||R.name||"download",G.rel="noopener","string"==typeof R?(G.href=R,G.origin===location.origin?o(G):n(G.href)?t(R,O,H):o(G,G.target="_blank")):(G.href=V.createObjectURL(R),setTimeout(function(){V.revokeObjectURL(G.href)},4e4),setTimeout(function(){o(G)},0))}:"msSaveOrOpenBlob"in navigator?function(R,O,H){if(O=O||R.name||"download","string"!=typeof R)navigator.msSaveOrOpenBlob(function(R,O){return void 0===O?O={autoBom:!1}:"object"!=typeof O&&(console.warn("Deprecated: Expected third argument to be a object"),O={autoBom:!O}),O.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(R.type)?new Blob(["\ufeff",R],{type:R.type}):R}(R,H),O);else if(n(R))t(R,O,H);else{var V=document.createElement("a");V.href=R,V.target="_blank",setTimeout(function(){o(V)})}}:function(R,O,H,V){if((V=V||open("","_blank"))&&(V.document.title=V.document.body.innerText="downloading..."),"string"==typeof R)return t(R,O,H);var G="application/octet-stream"===R.type,Z=/constructor/i.test(s.HTMLElement)||s.safari,vt=/CriOS\/[\d]+/.test(navigator.userAgent);if((vt||G&&Z||c)&&"undefined"!=typeof FileReader){var it=new FileReader;it.onloadend=function(){var ct=it.result;ct=vt?ct:ct.replace(/^data:[^;]*;/,"data:attachment/file;"),V?V.location.href=ct:location=ct,V=null},it.readAsDataURL(R)}else{var ot=s.URL||s.webkitURL,wt=ot.createObjectURL(R);V?V.location=wt:location.href=wt,V=null,setTimeout(function(){ot.revokeObjectURL(wt)},4e4)}});s.saveAs=v.saveAs=v,L.exports=v}.apply(W,[]))&&(L.exports=p)},5051:L=>{"use strict";var W="Function.prototype.bind called on incompatible ",m=Array.prototype.slice,y=Object.prototype.toString,p="[object Function]";L.exports=function(t){var n=this;if("function"!=typeof n||y.call(n)!==p)throw new TypeError(W+n);for(var s,o=m.call(arguments,1),c=function(){if(this instanceof s){var V=n.apply(this,o.concat(m.call(arguments)));return Object(V)===V?V:this}return n.apply(t,o.concat(m.call(arguments)))},v=Math.max(0,n.length-o.length),R=[],O=0;O<v;O++)R.push("$"+O);if(s=Function("binder","return function ("+R.join(",")+"){ return binder.apply(this,arguments); }")(c),n.prototype){var H=function(){};H.prototype=n.prototype,s.prototype=new H,H.prototype=null}return s}},21113:(L,W,m)=>{"use strict";var y=m(5051);L.exports=Function.prototype.bind||y},4320:(L,W,m)=>{"use strict";var y,p=SyntaxError,e=Function,t=TypeError,n=function(Rt){try{return e('"use strict"; return ('+Rt+").constructor;")()}catch(mt){}},o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch(Rt){o=null}var s=function(){throw new t},c=o?function(){try{return s}catch(Rt){try{return o(arguments,"callee").get}catch(mt){return s}}}():s,v=m(62832)(),R=Object.getPrototypeOf||function(Rt){return Rt.__proto__},O={},H="undefined"==typeof Uint8Array?y:R(Uint8Array),V={"%AggregateError%":"undefined"==typeof AggregateError?y:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?y:ArrayBuffer,"%ArrayIteratorPrototype%":v?R([][Symbol.iterator]()):y,"%AsyncFromSyncIteratorPrototype%":y,"%AsyncFunction%":O,"%AsyncGenerator%":O,"%AsyncGeneratorFunction%":O,"%AsyncIteratorPrototype%":O,"%Atomics%":"undefined"==typeof Atomics?y:Atomics,"%BigInt%":"undefined"==typeof BigInt?y:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?y:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?y:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?y:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?y:FinalizationRegistry,"%Function%":e,"%GeneratorFunction%":O,"%Int8Array%":"undefined"==typeof Int8Array?y:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?y:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?y:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":v?R(R([][Symbol.iterator]())):y,"%JSON%":"object"==typeof JSON?JSON:y,"%Map%":"undefined"==typeof Map?y:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&v?R((new Map)[Symbol.iterator]()):y,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?y:Promise,"%Proxy%":"undefined"==typeof Proxy?y:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?y:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?y:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&v?R((new Set)[Symbol.iterator]()):y,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?y:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":v?R(""[Symbol.iterator]()):y,"%Symbol%":v?Symbol:y,"%SyntaxError%":p,"%ThrowTypeError%":c,"%TypedArray%":H,"%TypeError%":t,"%Uint8Array%":"undefined"==typeof Uint8Array?y:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?y:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?y:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?y:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?y:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?y:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?y:WeakSet},G=function Rt(mt){var dt;if("%AsyncFunction%"===mt)dt=n("async function () {}");else if("%GeneratorFunction%"===mt)dt=n("function* () {}");else if("%AsyncGeneratorFunction%"===mt)dt=n("async function* () {}");else if("%AsyncGenerator%"===mt){var nt=Rt("%AsyncGeneratorFunction%");nt&&(dt=nt.prototype)}else if("%AsyncIteratorPrototype%"===mt){var st=Rt("%AsyncGenerator%");st&&(dt=R(st.prototype))}return V[mt]=dt,dt},Z={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},vt=m(21113),it=m(60508),ot=vt.call(Function.call,Array.prototype.concat),wt=vt.call(Function.apply,Array.prototype.splice),ct=vt.call(Function.call,String.prototype.replace),yt=vt.call(Function.call,String.prototype.slice),lt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,at=/\\(\\)?/g,bt=function(mt){var dt=yt(mt,0,1),nt=yt(mt,-1);if("%"===dt&&"%"!==nt)throw new p("invalid intrinsic syntax, expected closing `%`");if("%"===nt&&"%"!==dt)throw new p("invalid intrinsic syntax, expected opening `%`");var st=[];return ct(mt,lt,function(Gt,It,Vt,Ie){st[st.length]=Vt?ct(Ie,at,"$1"):It||Gt}),st},tt=function(mt,dt){var st,nt=mt;if(it(Z,nt)&&(nt="%"+(st=Z[nt])[0]+"%"),it(V,nt)){var Gt=V[nt];if(Gt===O&&(Gt=G(nt)),void 0===Gt&&!dt)throw new t("intrinsic "+mt+" exists, but is not available. Please file an issue!");return{alias:st,name:nt,value:Gt}}throw new p("intrinsic "+mt+" does not exist!")};L.exports=function(mt,dt){if("string"!=typeof mt||0===mt.length)throw new t("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof dt)throw new t('"allowMissing" argument must be a boolean');var nt=bt(mt),st=nt.length>0?nt[0]:"",Gt=tt("%"+st+"%",dt),It=Gt.name,Vt=Gt.value,Ie=!1,Ze=Gt.alias;Ze&&(st=Ze[0],wt(nt,ot([0,1],Ze)));for(var me=1,Be=!0;me<nt.length;me+=1){var Ge=nt[me],si=yt(Ge,0,1),Qe=yt(Ge,-1);if(('"'===si||"'"===si||"`"===si||'"'===Qe||"'"===Qe||"`"===Qe)&&si!==Qe)throw new p("property names with quotes must have matching quotes");if(("constructor"===Ge||!Be)&&(Ie=!0),it(V,It="%"+(st+="."+Ge)+"%"))Vt=V[It];else if(null!=Vt){if(!(Ge in Vt)){if(!dt)throw new t("base intrinsic for "+mt+" exists, but the property is not available.");return}if(o&&me+1>=nt.length){var Ne=o(Vt,Ge);Vt=(Be=!!Ne)&&"get"in Ne&&!("originalValue"in Ne.get)?Ne.get:Vt[Ge]}else Be=it(Vt,Ge),Vt=Vt[Ge];Be&&!Ie&&(V[It]=Vt)}}return Vt}},62832:(L,W,m)=>{"use strict";var y="undefined"!=typeof Symbol&&Symbol,p=m(22718);L.exports=function(){return"function"==typeof y&&"function"==typeof Symbol&&"symbol"==typeof y("foo")&&"symbol"==typeof Symbol("bar")&&p()}},22718:L=>{"use strict";L.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var m={},y=Symbol("test"),p=Object(y);if("string"==typeof y||"[object Symbol]"!==Object.prototype.toString.call(y)||"[object Symbol]"!==Object.prototype.toString.call(p))return!1;for(y in m[y]=42,m)return!1;if("function"==typeof Object.keys&&0!==Object.keys(m).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(m).length)return!1;var t=Object.getOwnPropertySymbols(m);if(1!==t.length||t[0]!==y||!Object.prototype.propertyIsEnumerable.call(m,y))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(m,y);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},60508:(L,W,m)=>{"use strict";var y=m(21113);L.exports=y.call(Function.call,Object.prototype.hasOwnProperty)},37901:L=>{var ae,m="__lodash_hash_undefined__",y=1/0,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,s=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R=/\\(\\)?/g,O=/^\[object .+?Constructor\]$/,H="object"==typeof global&&global&&global.Object===Object&&global,V="object"==typeof self&&self&&self.Object===Object&&self,G=H||V||Function("return this")(),it=Array.prototype,ot=Function.prototype,wt=Object.prototype,ct=G["__core-js_shared__"],yt=(ae=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||""))?"Symbol(src)_1."+ae:"",lt=ot.toString,at=wt.hasOwnProperty,bt=wt.toString,tt=RegExp("^"+lt.call(at).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rt=G.Symbol,mt=it.splice,dt=Yt(G,"Map"),nt=Yt(Object,"create"),st=Rt?Rt.prototype:void 0,Gt=st?st.toString:void 0;function It(ae){var Pe=-1,oi=ae?ae.length:0;for(this.clear();++Pe<oi;){var Te=ae[Pe];this.set(Te[0],Te[1])}}function Ge(ae){var Pe=-1,oi=ae?ae.length:0;for(this.clear();++Pe<oi;){var Te=ae[Pe];this.set(Te[0],Te[1])}}function Ve(ae){var Pe=-1,oi=ae?ae.length:0;for(this.clear();++Pe<oi;){var Te=ae[Pe];this.set(Te[0],Te[1])}}function Me(ae,Pe){for(var oi=ae.length;oi--;)if(ri(ae[oi][0],Pe))return oi;return-1}function Zt(ae,Pe){var oi=ae.__data__;return function(ae){var Pe=typeof ae;return"string"==Pe||"number"==Pe||"symbol"==Pe||"boolean"==Pe?"__proto__"!==ae:null===ae}(Pe)?oi["string"==typeof Pe?"string":"hash"]:oi.map}function Yt(ae,Pe){var oi=function(ae,Pe){return null==ae?void 0:ae[Pe]}(ae,Pe);return function(ae){if(!pi(ae)||function(ae){return!!yt&&yt in ae}(ae))return!1;var Pe=function(ae){var Pe=pi(ae)?bt.call(ae):"";return"[object Function]"==Pe||"[object GeneratorFunction]"==Pe}(ae)||function(ae){var Pe=!1;if(null!=ae&&"function"!=typeof ae.toString)try{Pe=!!(ae+"")}catch(oi){}return Pe}(ae)?tt:O;return Pe.test(function(ae){if(null!=ae){try{return lt.call(ae)}catch(Pe){}try{return ae+""}catch(Pe){}}return""}(ae))}(oi)?oi:void 0}It.prototype.clear=function(){this.__data__=nt?nt(null):{}},It.prototype.delete=function(ae){return this.has(ae)&&delete this.__data__[ae]},It.prototype.get=function(ae){var Pe=this.__data__;if(nt){var oi=Pe[ae];return oi===m?void 0:oi}return at.call(Pe,ae)?Pe[ae]:void 0},It.prototype.has=function(ae){var Pe=this.__data__;return nt?void 0!==Pe[ae]:at.call(Pe,ae)},It.prototype.set=function(ae,Pe){return this.__data__[ae]=nt&&void 0===Pe?m:Pe,this},Ge.prototype.clear=function(){this.__data__=[]},Ge.prototype.delete=function(ae){var Pe=this.__data__,oi=Me(Pe,ae);return!(oi<0||(oi==Pe.length-1?Pe.pop():mt.call(Pe,oi,1),0))},Ge.prototype.get=function(ae){var Pe=this.__data__,oi=Me(Pe,ae);return oi<0?void 0:Pe[oi][1]},Ge.prototype.has=function(ae){return Me(this.__data__,ae)>-1},Ge.prototype.set=function(ae,Pe){var oi=this.__data__,Te=Me(oi,ae);return Te<0?oi.push([ae,Pe]):oi[Te][1]=Pe,this},Ve.prototype.clear=function(){this.__data__={hash:new It,map:new(dt||Ge),string:new It}},Ve.prototype.delete=function(ae){return Zt(this,ae).delete(ae)},Ve.prototype.get=function(ae){return Zt(this,ae).get(ae)},Ve.prototype.has=function(ae){return Zt(this,ae).has(ae)},Ve.prototype.set=function(ae,Pe){return Zt(this,ae).set(ae,Pe),this};var Nt=li(function(ae){ae=function(ae){return null==ae?"":function(ae){if("string"==typeof ae)return ae;if(yi(ae))return Gt?Gt.call(ae):"";var Pe=ae+"";return"0"==Pe&&1/ae==-y?"-0":Pe}(ae)}(ae);var Pe=[];return s.test(ae)&&Pe.push(""),ae.replace(c,function(oi,Te,Oe,se){Pe.push(Oe?se.replace(R,"$1"):Te||oi)}),Pe});function ke(ae){if("string"==typeof ae||yi(ae))return ae;var Pe=ae+"";return"0"==Pe&&1/ae==-y?"-0":Pe}function li(ae,Pe){if("function"!=typeof ae||Pe&&"function"!=typeof Pe)throw new TypeError("Expected a function");var oi=function(){var Te=arguments,Oe=Pe?Pe.apply(this,Te):Te[0],se=oi.cache;if(se.has(Oe))return se.get(Oe);var Jt=ae.apply(this,Te);return oi.cache=se.set(Oe,Jt),Jt};return oi.cache=new(li.Cache||Ve),oi}function ri(ae,Pe){return ae===Pe||ae!=ae&&Pe!=Pe}li.Cache=Ve;var mi=Array.isArray;function pi(ae){var Pe=typeof ae;return!!ae&&("object"==Pe||"function"==Pe)}function yi(ae){return"symbol"==typeof ae||function(ae){return!!ae&&"object"==typeof ae}(ae)&&"[object Symbol]"==bt.call(ae)}L.exports=function(ae,Pe,oi){var Te=null==ae?void 0:function(ae,Pe){Pe=function(ae,Pe){if(mi(ae))return!1;var oi=typeof ae;return!("number"!=oi&&"symbol"!=oi&&"boolean"!=oi&&null!=ae&&!yi(ae))||o.test(ae)||!n.test(ae)||null!=Pe&&ae in Object(Pe)}(Pe,ae)?[Pe]:function(ae){return mi(ae)?ae:Nt(ae)}(Pe);for(var oi=0,Te=Pe.length;null!=ae&&oi<Te;)ae=ae[ke(Pe[oi++])];return oi&&oi==Te?ae:void 0}(ae,Pe);return void 0===Te?oi:Te}},20696:(L,W,m)=>{var e=m(18324)(m(56807),"DataView");L.exports=e},54141:(L,W,m)=>{var y=m(39338),p=m(81439),e=m(15136),t=m(48899),n=m(49077);function o(s){var c=-1,v=null==s?0:s.length;for(this.clear();++c<v;){var R=s[c];this.set(R[0],R[1])}}o.prototype.clear=y,o.prototype.delete=p,o.prototype.get=e,o.prototype.has=t,o.prototype.set=n,L.exports=o},943:(L,W,m)=>{var y=m(20900),p=m(84044),e=m(66981),t=m(84629),n=m(62720);function o(s){var c=-1,v=null==s?0:s.length;for(this.clear();++c<v;){var R=s[c];this.set(R[0],R[1])}}o.prototype.clear=y,o.prototype.delete=p,o.prototype.get=e,o.prototype.has=t,o.prototype.set=n,L.exports=o},43664:(L,W,m)=>{var e=m(18324)(m(56807),"Map");L.exports=e},17324:(L,W,m)=>{var y=m(99166),p=m(61222),e=m(22470),t=m(1048),n=m(34186);function o(s){var c=-1,v=null==s?0:s.length;for(this.clear();++c<v;){var R=s[c];this.set(R[0],R[1])}}o.prototype.clear=y,o.prototype.delete=p,o.prototype.get=e,o.prototype.has=t,o.prototype.set=n,L.exports=o},87209:(L,W,m)=>{var e=m(18324)(m(56807),"Promise");L.exports=e},39434:(L,W,m)=>{var e=m(18324)(m(56807),"Set");L.exports=e},71096:(L,W,m)=>{var y=m(943),p=m(47432),e=m(46639),t=m(11372),n=m(38313),o=m(23137);function s(c){var v=this.__data__=new y(c);this.size=v.size}s.prototype.clear=p,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=o,L.exports=s},5144:(L,W,m)=>{var y=m(56807);L.exports=y.Symbol},68047:(L,W,m)=>{var y=m(56807);L.exports=y.Uint8Array},69847:(L,W,m)=>{var e=m(18324)(m(56807),"WeakMap");L.exports=e},29030:L=>{L.exports=function(m,y){for(var p=-1,e=null==m?0:m.length;++p<e&&!1!==y(m[p],p,m););return m}},94382:L=>{L.exports=function(m,y){for(var p=-1,e=null==m?0:m.length,t=0,n=[];++p<e;){var o=m[p];y(o,p,m)&&(n[t++]=o)}return n}},264:(L,W,m)=>{var y=m(74265),p=m(92526),e=m(87572),t=m(77790),n=m(5021),o=m(18353),c=Object.prototype.hasOwnProperty;L.exports=function(R,O){var H=e(R),V=!H&&p(R),G=!H&&!V&&t(R),Z=!H&&!V&&!G&&o(R),vt=H||V||G||Z,it=vt?y(R.length,String):[],ot=it.length;for(var wt in R)(O||c.call(R,wt))&&(!vt||!("length"==wt||G&&("offset"==wt||"parent"==wt)||Z&&("buffer"==wt||"byteLength"==wt||"byteOffset"==wt)||n(wt,ot)))&&it.push(wt);return it}},9829:L=>{L.exports=function(m,y){for(var p=-1,e=null==m?0:m.length,t=Array(e);++p<e;)t[p]=y(m[p],p,m);return t}},57437:L=>{L.exports=function(m,y){for(var p=-1,e=y.length,t=m.length;++p<e;)m[t+p]=y[p];return m}},49782:(L,W,m)=>{var y=m(75372),p=m(47660),t=Object.prototype.hasOwnProperty;L.exports=function(o,s,c){var v=o[s];(!t.call(o,s)||!p(v,c)||void 0===c&&!(s in o))&&y(o,s,c)}},42128:(L,W,m)=>{var y=m(47660);L.exports=function(e,t){for(var n=e.length;n--;)if(y(e[n][0],t))return n;return-1}},56470:(L,W,m)=>{var y=m(56394),p=m(254);L.exports=function(t,n){return t&&y(n,p(n),t)}},88253:(L,W,m)=>{var y=m(56394),p=m(22174);L.exports=function(t,n){return t&&y(n,p(n),t)}},75372:(L,W,m)=>{var y=m(59891);L.exports=function(e,t,n){"__proto__"==t&&y?y(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},55594:(L,W,m)=>{var y=m(71096),p=m(29030),e=m(49782),t=m(56470),n=m(88253),o=m(61709),s=m(93895),c=m(56306),v=m(81294),R=m(72972),O=m(77449),H=m(24524),V=m(72181),G=m(70334),Z=m(80323),vt=m(87572),it=m(77790),ot=m(68586),wt=m(75388),ct=m(5981),yt=m(254),lt=m(22174),Rt="[object Arguments]",Gt="[object Function]",Ze="[object Object]",ie={};ie[Rt]=ie["[object Array]"]=ie["[object ArrayBuffer]"]=ie["[object DataView]"]=ie["[object Boolean]"]=ie["[object Date]"]=ie["[object Float32Array]"]=ie["[object Float64Array]"]=ie["[object Int8Array]"]=ie["[object Int16Array]"]=ie["[object Int32Array]"]=ie["[object Map]"]=ie["[object Number]"]=ie[Ze]=ie["[object RegExp]"]=ie["[object Set]"]=ie["[object String]"]=ie["[object Symbol]"]=ie["[object Uint8Array]"]=ie["[object Uint8ClampedArray]"]=ie["[object Uint16Array]"]=ie["[object Uint32Array]"]=!0,ie["[object Error]"]=ie[Gt]=ie["[object WeakMap]"]=!1,L.exports=function Ut(Ht,Zt,Yt,ue,le,Mt){var Nt,ke=1&Zt,je=2&Zt,li=4&Zt;if(Yt&&(Nt=le?Yt(Ht,ue,le,Mt):Yt(Ht)),void 0!==Nt)return Nt;if(!wt(Ht))return Ht;var ri=vt(Ht);if(ri){if(Nt=V(Ht),!ke)return s(Ht,Nt)}else{var mi=H(Ht),Bi=mi==Gt||"[object GeneratorFunction]"==mi;if(it(Ht))return o(Ht,ke);if(mi==Ze||mi==Rt||Bi&&!le){if(Nt=je||Bi?{}:Z(Ht),!ke)return je?v(Ht,n(Nt,Ht)):c(Ht,t(Nt,Ht))}else{if(!ie[mi])return le?Ht:{};Nt=G(Ht,mi,ke)}}Mt||(Mt=new y);var pi=Mt.get(Ht);if(pi)return pi;Mt.set(Ht,Nt),ct(Ht)?Ht.forEach(function($e){Nt.add(Ut($e,Zt,Yt,$e,Ht,Mt))}):ot(Ht)&&Ht.forEach(function($e,ei){Nt.set(ei,Ut($e,Zt,Yt,ei,Ht,Mt))});var yi=ri?void 0:(li?je?O:R:je?lt:yt)(Ht);return p(yi||Ht,function($e,ei){yi&&($e=Ht[ei=$e]),e(Nt,ei,Ut($e,Zt,Yt,ei,Ht,Mt))}),Nt}},51328:(L,W,m)=>{var y=m(75388),p=Object.create,e=function(){function t(){}return function(n){if(!y(n))return{};if(p)return p(n);t.prototype=n;var o=new t;return t.prototype=void 0,o}}();L.exports=e},885:(L,W,m)=>{var y=m(12294),p=m(55844);L.exports=function(t,n){for(var o=0,s=(n=y(n,t)).length;null!=t&&o<s;)t=t[p(n[o++])];return o&&o==s?t:void 0}},99262:(L,W,m)=>{var y=m(57437),p=m(87572);L.exports=function(t,n,o){var s=n(t);return p(t)?s:y(s,o(t))}},92663:(L,W,m)=>{var y=m(5144),p=m(36476),e=m(65899),o=y?y.toStringTag:void 0;L.exports=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":o&&o in Object(c)?p(c):e(c)}},45446:(L,W,m)=>{var y=m(92663),p=m(3937);L.exports=function(n){return p(n)&&"[object Arguments]"==y(n)}},68306:(L,W,m)=>{var y=m(24524),p=m(3937);L.exports=function(n){return p(n)&&"[object Map]"==y(n)}},42523:(L,W,m)=>{var y=m(83032),p=m(24425),e=m(75388),t=m(18085),o=/^\[object .+?Constructor\]$/,O=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");L.exports=function(V){return!(!e(V)||p(V))&&(y(V)?O:o).test(t(V))}},73256:(L,W,m)=>{var y=m(24524),p=m(3937);L.exports=function(n){return p(n)&&"[object Set]"==y(n)}},66165:(L,W,m)=>{var y=m(92663),p=m(10862),e=m(3937),dt={};dt["[object Float32Array]"]=dt["[object Float64Array]"]=dt["[object Int8Array]"]=dt["[object Int16Array]"]=dt["[object Int32Array]"]=dt["[object Uint8Array]"]=dt["[object Uint8ClampedArray]"]=dt["[object Uint16Array]"]=dt["[object Uint32Array]"]=!0,dt["[object Arguments]"]=dt["[object Array]"]=dt["[object ArrayBuffer]"]=dt["[object Boolean]"]=dt["[object DataView]"]=dt["[object Date]"]=dt["[object Error]"]=dt["[object Function]"]=dt["[object Map]"]=dt["[object Number]"]=dt["[object Object]"]=dt["[object RegExp]"]=dt["[object Set]"]=dt["[object String]"]=dt["[object WeakMap]"]=!1,L.exports=function(st){return e(st)&&p(st.length)&&!!dt[y(st)]}},69894:(L,W,m)=>{var y=m(21907),p=m(37504),t=Object.prototype.hasOwnProperty;L.exports=function(o){if(!y(o))return p(o);var s=[];for(var c in Object(o))t.call(o,c)&&"constructor"!=c&&s.push(c);return s}},76119:(L,W,m)=>{var y=m(75388),p=m(21907),e=m(20495),n=Object.prototype.hasOwnProperty;L.exports=function(s){if(!y(s))return e(s);var c=p(s),v=[];for(var R in s)"constructor"==R&&(c||!n.call(s,R))||v.push(R);return v}},74265:L=>{L.exports=function(m,y){for(var p=-1,e=Array(m);++p<m;)e[p]=y(p);return e}},78873:(L,W,m)=>{var y=m(5144),p=m(9829),e=m(87572),t=m(2957),o=y?y.prototype:void 0,s=o?o.toString:void 0;L.exports=function c(v){if("string"==typeof v)return v;if(e(v))return p(v,c)+"";if(t(v))return s?s.call(v):"";var R=v+"";return"0"==R&&1/v==-1/0?"-0":R}},76041:L=>{L.exports=function(m){return function(y){return m(y)}}},12294:(L,W,m)=>{var y=m(87572),p=m(36474),e=m(52908),t=m(63881);L.exports=function(o,s){return y(o)?o:p(o,s)?[o]:e(t(o))}},49569:(L,W,m)=>{var y=m(68047);L.exports=function(e){var t=new e.constructor(e.byteLength);return new y(t).set(new y(e)),t}},61709:(L,W,m)=>{L=m.nmd(L);var y=m(56807),p=W&&!W.nodeType&&W,e=p&&L&&!L.nodeType&&L,n=e&&e.exports===p?y.Buffer:void 0,o=n?n.allocUnsafe:void 0;L.exports=function(c,v){if(v)return c.slice();var R=c.length,O=o?o(R):new c.constructor(R);return c.copy(O),O}},96961:(L,W,m)=>{var y=m(49569);L.exports=function(e,t){var n=t?y(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},66766:L=>{var W=/\w*$/;L.exports=function(y){var p=new y.constructor(y.source,W.exec(y));return p.lastIndex=y.lastIndex,p}},74610:(L,W,m)=>{var y=m(5144),p=y?y.prototype:void 0,e=p?p.valueOf:void 0;L.exports=function(n){return e?Object(e.call(n)):{}}},40625:(L,W,m)=>{var y=m(49569);L.exports=function(e,t){var n=t?y(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},93895:L=>{L.exports=function(m,y){var p=-1,e=m.length;for(y||(y=Array(e));++p<e;)y[p]=m[p];return y}},56394:(L,W,m)=>{var y=m(49782),p=m(75372);L.exports=function(t,n,o,s){var c=!o;o||(o={});for(var v=-1,R=n.length;++v<R;){var O=n[v],H=s?s(o[O],t[O],O,o,t):void 0;void 0===H&&(H=t[O]),c?p(o,O,H):y(o,O,H)}return o}},56306:(L,W,m)=>{var y=m(56394),p=m(77664);L.exports=function(t,n){return y(t,p(t),n)}},81294:(L,W,m)=>{var y=m(56394),p=m(19722);L.exports=function(t,n){return y(t,p(t),n)}},17592:(L,W,m)=>{var y=m(56807);L.exports=y["__core-js_shared__"]},59891:(L,W,m)=>{var y=m(18324),p=function(){try{var e=y(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();L.exports=p},89948:L=>{var W="object"==typeof global&&global&&global.Object===Object&&global;L.exports=W},72972:(L,W,m)=>{var y=m(99262),p=m(77664),e=m(254);L.exports=function(n){return y(n,e,p)}},77449:(L,W,m)=>{var y=m(99262),p=m(19722),e=m(22174);L.exports=function(n){return y(n,e,p)}},1520:(L,W,m)=>{var y=m(90149);L.exports=function(e,t){var n=e.__data__;return y(t)?n["string"==typeof t?"string":"hash"]:n.map}},18324:(L,W,m)=>{var y=m(42523),p=m(45278);L.exports=function(t,n){var o=p(t,n);return y(o)?o:void 0}},32341:(L,W,m)=>{var p=m(49219)(Object.getPrototypeOf,Object);L.exports=p},36476:(L,W,m)=>{var y=m(5144),p=Object.prototype,e=p.hasOwnProperty,t=p.toString,n=y?y.toStringTag:void 0;L.exports=function(s){var c=e.call(s,n),v=s[n];try{s[n]=void 0;var R=!0}catch(H){}var O=t.call(s);return R&&(c?s[n]=v:delete s[n]),O}},77664:(L,W,m)=>{var y=m(94382),p=m(75289),t=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;L.exports=n?function(s){return null==s?[]:(s=Object(s),y(n(s),function(c){return t.call(s,c)}))}:p},19722:(L,W,m)=>{var y=m(57437),p=m(32341),e=m(77664),t=m(75289);L.exports=Object.getOwnPropertySymbols?function(s){for(var c=[];s;)y(c,e(s)),s=p(s);return c}:t},24524:(L,W,m)=>{var y=m(20696),p=m(43664),e=m(87209),t=m(39434),n=m(69847),o=m(92663),s=m(18085),c="[object Map]",R="[object Promise]",O="[object Set]",H="[object WeakMap]",V="[object DataView]",G=s(y),Z=s(p),vt=s(e),it=s(t),ot=s(n),wt=o;(y&&wt(new y(new ArrayBuffer(1)))!=V||p&&wt(new p)!=c||e&&wt(e.resolve())!=R||t&&wt(new t)!=O||n&&wt(new n)!=H)&&(wt=function(ct){var yt=o(ct),lt="[object Object]"==yt?ct.constructor:void 0,at=lt?s(lt):"";if(at)switch(at){case G:return V;case Z:return c;case vt:return R;case it:return O;case ot:return H}return yt}),L.exports=wt},45278:L=>{L.exports=function(m,y){return null==m?void 0:m[y]}},39338:(L,W,m)=>{var y=m(24039);L.exports=function(){this.__data__=y?y(null):{},this.size=0}},81439:L=>{L.exports=function(m){var y=this.has(m)&&delete this.__data__[m];return this.size-=y?1:0,y}},15136:(L,W,m)=>{var y=m(24039),t=Object.prototype.hasOwnProperty;L.exports=function(o){var s=this.__data__;if(y){var c=s[o];return"__lodash_hash_undefined__"===c?void 0:c}return t.call(s,o)?s[o]:void 0}},48899:(L,W,m)=>{var y=m(24039),e=Object.prototype.hasOwnProperty;L.exports=function(n){var o=this.__data__;return y?void 0!==o[n]:e.call(o,n)}},49077:(L,W,m)=>{var y=m(24039);L.exports=function(t,n){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=y&&void 0===n?"__lodash_hash_undefined__":n,this}},72181:L=>{var m=Object.prototype.hasOwnProperty;L.exports=function(p){var e=p.length,t=new p.constructor(e);return e&&"string"==typeof p[0]&&m.call(p,"index")&&(t.index=p.index,t.input=p.input),t}},70334:(L,W,m)=>{var y=m(49569),p=m(96961),e=m(66766),t=m(74610),n=m(40625);L.exports=function(Rt,mt,dt){var nt=Rt.constructor;switch(mt){case"[object ArrayBuffer]":return y(Rt);case"[object Boolean]":case"[object Date]":return new nt(+Rt);case"[object DataView]":return p(Rt,dt);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return n(Rt,dt);case"[object Map]":case"[object Set]":return new nt;case"[object Number]":case"[object String]":return new nt(Rt);case"[object RegExp]":return e(Rt);case"[object Symbol]":return t(Rt)}}},80323:(L,W,m)=>{var y=m(51328),p=m(32341),e=m(21907);L.exports=function(n){return"function"!=typeof n.constructor||e(n)?{}:y(p(n))}},5021:L=>{var m=/^(?:0|[1-9]\d*)$/;L.exports=function(p,e){var t=typeof p;return!!(e=null==e?9007199254740991:e)&&("number"==t||"symbol"!=t&&m.test(p))&&p>-1&&p%1==0&&p<e}},36474:(L,W,m)=>{var y=m(87572),p=m(2957),e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,t=/^\w*$/;L.exports=function(o,s){if(y(o))return!1;var c=typeof o;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=o&&!p(o))||t.test(o)||!e.test(o)||null!=s&&o in Object(s)}},90149:L=>{L.exports=function(m){var y=typeof m;return"string"==y||"number"==y||"symbol"==y||"boolean"==y?"__proto__"!==m:null===m}},24425:(L,W,m)=>{var t,y=m(17592),p=(t=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";L.exports=function(t){return!!p&&p in t}},21907:L=>{var W=Object.prototype;L.exports=function(y){var p=y&&y.constructor;return y===("function"==typeof p&&p.prototype||W)}},20900:L=>{L.exports=function(){this.__data__=[],this.size=0}},84044:(L,W,m)=>{var y=m(42128),e=Array.prototype.splice;L.exports=function(n){var o=this.__data__,s=y(o,n);return!(s<0||(s==o.length-1?o.pop():e.call(o,s,1),--this.size,0))}},66981:(L,W,m)=>{var y=m(42128);L.exports=function(e){var t=this.__data__,n=y(t,e);return n<0?void 0:t[n][1]}},84629:(L,W,m)=>{var y=m(42128);L.exports=function(e){return y(this.__data__,e)>-1}},62720:(L,W,m)=>{var y=m(42128);L.exports=function(e,t){var n=this.__data__,o=y(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},99166:(L,W,m)=>{var y=m(54141),p=m(943),e=m(43664);L.exports=function(){this.size=0,this.__data__={hash:new y,map:new(e||p),string:new y}}},61222:(L,W,m)=>{var y=m(1520);L.exports=function(e){var t=y(this,e).delete(e);return this.size-=t?1:0,t}},22470:(L,W,m)=>{var y=m(1520);L.exports=function(e){return y(this,e).get(e)}},1048:(L,W,m)=>{var y=m(1520);L.exports=function(e){return y(this,e).has(e)}},34186:(L,W,m)=>{var y=m(1520);L.exports=function(e,t){var n=y(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},23213:(L,W,m)=>{var y=m(26504);L.exports=function(t){var n=y(t,function(s){return 500===o.size&&o.clear(),s}),o=n.cache;return n}},24039:(L,W,m)=>{var p=m(18324)(Object,"create");L.exports=p},37504:(L,W,m)=>{var p=m(49219)(Object.keys,Object);L.exports=p},20495:L=>{L.exports=function(m){var y=[];if(null!=m)for(var p in Object(m))y.push(p);return y}},57662:(L,W,m)=>{L=m.nmd(L);var y=m(89948),p=W&&!W.nodeType&&W,e=p&&L&&!L.nodeType&&L,n=e&&e.exports===p&&y.process,o=function(){try{return e&&e.require&&e.require("util").types||n&&n.binding&&n.binding("util")}catch(c){}}();L.exports=o},65899:L=>{var m=Object.prototype.toString;L.exports=function(p){return m.call(p)}},49219:L=>{L.exports=function(m,y){return function(p){return m(y(p))}}},56807:(L,W,m)=>{var y=m(89948),p="object"==typeof self&&self&&self.Object===Object&&self,e=y||p||Function("return this")();L.exports=e},47432:(L,W,m)=>{var y=m(943);L.exports=function(){this.__data__=new y,this.size=0}},46639:L=>{L.exports=function(m){var y=this.__data__,p=y.delete(m);return this.size=y.size,p}},11372:L=>{L.exports=function(m){return this.__data__.get(m)}},38313:L=>{L.exports=function(m){return this.__data__.has(m)}},23137:(L,W,m)=>{var y=m(943),p=m(43664),e=m(17324);L.exports=function(o,s){var c=this.__data__;if(c instanceof y){var v=c.__data__;if(!p||v.length<199)return v.push([o,s]),this.size=++c.size,this;c=this.__data__=new e(v)}return c.set(o,s),this.size=c.size,this}},52908:(L,W,m)=>{var y=m(23213),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e=/\\(\\)?/g,t=y(function(n){var o=[];return 46===n.charCodeAt(0)&&o.push(""),n.replace(p,function(s,c,v,R){o.push(v?R.replace(e,"$1"):c||s)}),o});L.exports=t},55844:(L,W,m)=>{var y=m(2957);L.exports=function(t){if("string"==typeof t||y(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},18085:L=>{var m=Function.prototype.toString;L.exports=function(p){if(null!=p){try{return m.call(p)}catch(e){}try{return p+""}catch(e){}}return""}},77282:(L,W,m)=>{var y=m(55594);L.exports=function(n){return y(n,5)}},47660:L=>{L.exports=function(m,y){return m===y||m!=m&&y!=y}},60778:(L,W,m)=>{var y=m(885);L.exports=function(e,t,n){var o=null==e?void 0:y(e,t);return void 0===o?n:o}},92526:(L,W,m)=>{var y=m(45446),p=m(3937),e=Object.prototype,t=e.hasOwnProperty,n=e.propertyIsEnumerable,o=y(function(){return arguments}())?y:function(s){return p(s)&&t.call(s,"callee")&&!n.call(s,"callee")};L.exports=o},87572:L=>{L.exports=Array.isArray},32292:(L,W,m)=>{var y=m(83032),p=m(10862);L.exports=function(t){return null!=t&&p(t.length)&&!y(t)}},77790:(L,W,m)=>{L=m.nmd(L);var y=m(56807),p=m(88603),e=W&&!W.nodeType&&W,t=e&&L&&!L.nodeType&&L,o=t&&t.exports===e?y.Buffer:void 0;L.exports=(o?o.isBuffer:void 0)||p},18421:(L,W,m)=>{var y=m(69894),p=m(24524),e=m(92526),t=m(87572),n=m(32292),o=m(77790),s=m(21907),c=m(18353),H=Object.prototype.hasOwnProperty;L.exports=function(G){if(null==G)return!0;if(n(G)&&(t(G)||"string"==typeof G||"function"==typeof G.splice||o(G)||c(G)||e(G)))return!G.length;var Z=p(G);if("[object Map]"==Z||"[object Set]"==Z)return!G.size;if(s(G))return!y(G).length;for(var vt in G)if(H.call(G,vt))return!1;return!0}},83032:(L,W,m)=>{var y=m(92663),p=m(75388);L.exports=function(c){if(!p(c))return!1;var v=y(c);return"[object Function]"==v||"[object GeneratorFunction]"==v||"[object AsyncFunction]"==v||"[object Proxy]"==v}},10862:L=>{L.exports=function(y){return"number"==typeof y&&y>-1&&y%1==0&&y<=9007199254740991}},68586:(L,W,m)=>{var y=m(68306),p=m(76041),e=m(57662),t=e&&e.isMap,n=t?p(t):y;L.exports=n},75388:L=>{L.exports=function(m){var y=typeof m;return null!=m&&("object"==y||"function"==y)}},3937:L=>{L.exports=function(m){return null!=m&&"object"==typeof m}},12507:(L,W,m)=>{var y=m(92663),p=m(32341),e=m(3937),s=Function.prototype.toString,c=Object.prototype.hasOwnProperty,v=s.call(Object);L.exports=function(O){if(!e(O)||"[object Object]"!=y(O))return!1;var H=p(O);if(null===H)return!0;var V=c.call(H,"constructor")&&H.constructor;return"function"==typeof V&&V instanceof V&&s.call(V)==v}},5981:(L,W,m)=>{var y=m(73256),p=m(76041),e=m(57662),t=e&&e.isSet,n=t?p(t):y;L.exports=n},2957:(L,W,m)=>{var y=m(92663),p=m(3937);L.exports=function(n){return"symbol"==typeof n||p(n)&&"[object Symbol]"==y(n)}},18353:(L,W,m)=>{var y=m(66165),p=m(76041),e=m(57662),t=e&&e.isTypedArray,n=t?p(t):y;L.exports=n},254:(L,W,m)=>{var y=m(264),p=m(69894),e=m(32292);L.exports=function(n){return e(n)?y(n):p(n)}},22174:(L,W,m)=>{var y=m(264),p=m(76119),e=m(32292);L.exports=function(n){return e(n)?y(n,!0):p(n)}},26504:(L,W,m)=>{var y=m(17324);function e(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var o=function(){var s=arguments,c=n?n.apply(this,s):s[0],v=o.cache;if(v.has(c))return v.get(c);var R=t.apply(this,s);return o.cache=v.set(c,R)||v,R};return o.cache=new(e.Cache||y),o}e.Cache=y,L.exports=e},75289:L=>{L.exports=function(){return[]}},88603:L=>{L.exports=function(){return!1}},63881:(L,W,m)=>{var y=m(78873);L.exports=function(e){return null==e?"":y(e)}},59009:(L,W,m)=>{var y="function"==typeof Map&&Map.prototype,p=Object.getOwnPropertyDescriptor&&y?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,e=y&&p&&"function"==typeof p.get?p.get:null,t=y&&Map.prototype.forEach,n="function"==typeof Set&&Set.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=n&&o&&"function"==typeof o.get?o.get:null,c=n&&Set.prototype.forEach,R="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,H="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,G="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Z=Boolean.prototype.valueOf,vt=Object.prototype.toString,it=Function.prototype.toString,ot=String.prototype.match,wt="function"==typeof BigInt?BigInt.prototype.valueOf:null,ct=Object.getOwnPropertySymbols,yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,lt="function"==typeof Symbol&&"object"==typeof Symbol.iterator,at="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,bt=Object.prototype.propertyIsEnumerable,tt=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Mt){return Mt.__proto__}:null),Rt=m(96553).custom,mt=Rt&&Be(Rt)?Rt:null;function dt(Mt,Nt,ke){var je="double"===(ke.quoteStyle||Nt)?'"':"'";return je+Mt+je}function nt(Mt){return String(Mt).replace(/"/g,"&quot;")}function st(Mt){return!("[object Array]"!==Ne(Mt)||at&&"object"==typeof Mt&&at in Mt)}function Be(Mt){if(lt)return Mt&&"object"==typeof Mt&&Mt instanceof Symbol;if("symbol"==typeof Mt)return!0;if(!Mt||"object"!=typeof Mt||!yt)return!1;try{return yt.call(Mt),!0}catch(Nt){}return!1}L.exports=function Mt(Nt,ke,je,li){var ri=ke||{};if(Qe(ri,"quoteStyle")&&"single"!==ri.quoteStyle&&"double"!==ri.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Qe(ri,"maxStringLength")&&("number"==typeof ri.maxStringLength?ri.maxStringLength<0&&ri.maxStringLength!==1/0:null!==ri.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var mi=!Qe(ri,"customInspect")||ri.customInspect;if("boolean"!=typeof mi&&"symbol"!==mi)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Qe(ri,"indent")&&null!==ri.indent&&"\t"!==ri.indent&&!(parseInt(ri.indent,10)===ri.indent&&ri.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===Nt)return"undefined";if(null===Nt)return"null";if("boolean"==typeof Nt)return Nt?"true":"false";if("string"==typeof Nt)return Me(Nt,ri);if("number"==typeof Nt)return 0===Nt?1/0/Nt>0?"0":"-0":String(Nt);if("bigint"==typeof Nt)return String(Nt)+"n";var Bi=void 0===ri.depth?5:ri.depth;if(void 0===je&&(je=0),je>=Bi&&Bi>0&&"object"==typeof Nt)return st(Nt)?"[Array]":"[Object]";var pi=function(Mt,Nt){var ke;if("\t"===Mt.indent)ke="\t";else{if(!("number"==typeof Mt.indent&&Mt.indent>0))return null;ke=Array(Mt.indent+1).join(" ")}return{base:ke,prev:Array(Nt+1).join(ke)}}(ri,je);if(void 0===li)li=[];else if(we(li,Nt)>=0)return"[Circular]";function bi(bn,Ln,Xe){if(Ln&&(li=li.slice()).push(Ln),Xe){var Re={depth:ri.depth};return Qe(ri,"quoteStyle")&&(Re.quoteStyle=ri.quoteStyle),Mt(bn,Re,je+1,li)}return Mt(bn,ri,je+1,li)}if("function"==typeof Nt){var yi=function(Mt){if(Mt.name)return Mt.name;var Nt=ot.call(it.call(Mt),/^function\s*([\w$]+)/);return Nt?Nt[1]:null}(Nt),$e=le(Nt,bi);return"[Function"+(yi?": "+yi:" (anonymous)")+"]"+($e.length>0?" { "+$e.join(", ")+" }":"")}if(Be(Nt)){var ei=lt?String(Nt).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):yt.call(Nt);return"object"!=typeof Nt||lt?ei:ie(ei)}if(function(Mt){return!(!Mt||"object"!=typeof Mt)&&("undefined"!=typeof HTMLElement&&Mt instanceof HTMLElement||"string"==typeof Mt.nodeName&&"function"==typeof Mt.getAttribute)}(Nt)){for(var ae="<"+String(Nt.nodeName).toLowerCase(),Pe=Nt.attributes||[],oi=0;oi<Pe.length;oi++)ae+=" "+Pe[oi].name+"="+dt(nt(Pe[oi].value),"double",ri);return ae+=">",Nt.childNodes&&Nt.childNodes.length&&(ae+="..."),ae+"</"+String(Nt.nodeName).toLowerCase()+">"}if(st(Nt)){if(0===Nt.length)return"[]";var Te=le(Nt,bi);return pi&&!function(Mt){for(var Nt=0;Nt<Mt.length;Nt++)if(we(Mt[Nt],"\n")>=0)return!1;return!0}(Te)?"["+ue(Te,pi)+"]":"[ "+Te.join(", ")+" ]"}if(function(Mt){return!("[object Error]"!==Ne(Mt)||at&&"object"==typeof Mt&&at in Mt)}(Nt)){var Oe=le(Nt,bi);return 0===Oe.length?"["+String(Nt)+"]":"{ ["+String(Nt)+"] "+Oe.join(", ")+" }"}if("object"==typeof Nt&&mi){if(mt&&"function"==typeof Nt[mt])return Nt[mt]();if("symbol"!==mi&&"function"==typeof Nt.inspect)return Nt.inspect()}if(function(Mt){if(!e||!Mt||"object"!=typeof Mt)return!1;try{e.call(Mt);try{s.call(Mt)}catch(Nt){return!0}return Mt instanceof Map}catch(Nt){}return!1}(Nt)){var se=[];return t.call(Nt,function(bn,Ln){se.push(bi(Ln,Nt,!0)+" => "+bi(bn,Nt))}),Ht("Map",e.call(Nt),se,pi)}if(function(Mt){if(!s||!Mt||"object"!=typeof Mt)return!1;try{s.call(Mt);try{e.call(Mt)}catch(Nt){return!0}return Mt instanceof Set}catch(Nt){}return!1}(Nt)){var Jt=[];return c.call(Nt,function(bn){Jt.push(bi(bn,Nt))}),Ht("Set",s.call(Nt),Jt,pi)}if(function(Mt){if(!R||!Mt||"object"!=typeof Mt)return!1;try{R.call(Mt,R);try{H.call(Mt,H)}catch(Nt){return!0}return Mt instanceof WeakMap}catch(Nt){}return!1}(Nt))return Ut("WeakMap");if(function(Mt){if(!H||!Mt||"object"!=typeof Mt)return!1;try{H.call(Mt,H);try{R.call(Mt,R)}catch(Nt){return!0}return Mt instanceof WeakSet}catch(Nt){}return!1}(Nt))return Ut("WeakSet");if(function(Mt){if(!G||!Mt||"object"!=typeof Mt)return!1;try{return G.call(Mt),!0}catch(Nt){}return!1}(Nt))return Ut("WeakRef");if(function(Mt){return!("[object Number]"!==Ne(Mt)||at&&"object"==typeof Mt&&at in Mt)}(Nt))return ie(bi(Number(Nt)));if(function(Mt){if(!Mt||"object"!=typeof Mt||!wt)return!1;try{return wt.call(Mt),!0}catch(Nt){}return!1}(Nt))return ie(bi(wt.call(Nt)));if(function(Mt){return!("[object Boolean]"!==Ne(Mt)||at&&"object"==typeof Mt&&at in Mt)}(Nt))return ie(Z.call(Nt));if(function(Mt){return!("[object String]"!==Ne(Mt)||at&&"object"==typeof Mt&&at in Mt)}(Nt))return ie(bi(String(Nt)));if(!function(Mt){return!("[object Date]"!==Ne(Mt)||at&&"object"==typeof Mt&&at in Mt)}(Nt)&&!function(Mt){return!("[object RegExp]"!==Ne(Mt)||at&&"object"==typeof Mt&&at in Mt)}(Nt)){var te=le(Nt,bi),qt=tt?tt(Nt)===Object.prototype:Nt instanceof Object||Nt.constructor===Object,Ee=Nt instanceof Object?"":"null prototype",ti=!qt&&at&&Object(Nt)===Nt&&at in Nt?Ne(Nt).slice(8,-1):Ee?"Object":"",Hi=(qt||"function"!=typeof Nt.constructor?"":Nt.constructor.name?Nt.constructor.name+" ":"")+(ti||Ee?"["+[].concat(ti||[],Ee||[]).join(": ")+"] ":"");return 0===te.length?Hi+"{}":pi?Hi+"{"+ue(te,pi)+"}":Hi+"{ "+te.join(", ")+" }"}return String(Nt)};var si=Object.prototype.hasOwnProperty||function(Mt){return Mt in this};function Qe(Mt,Nt){return si.call(Mt,Nt)}function Ne(Mt){return vt.call(Mt)}function we(Mt,Nt){if(Mt.indexOf)return Mt.indexOf(Nt);for(var ke=0,je=Mt.length;ke<je;ke++)if(Mt[ke]===Nt)return ke;return-1}function Me(Mt,Nt){if(Mt.length>Nt.maxStringLength){var ke=Mt.length-Nt.maxStringLength,je="... "+ke+" more character"+(ke>1?"s":"");return Me(Mt.slice(0,Nt.maxStringLength),Nt)+je}return dt(Mt.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,vi),"single",Nt)}function vi(Mt){var Nt=Mt.charCodeAt(0),ke={8:"b",9:"t",10:"n",12:"f",13:"r"}[Nt];return ke?"\\"+ke:"\\x"+(Nt<16?"0":"")+Nt.toString(16).toUpperCase()}function ie(Mt){return"Object("+Mt+")"}function Ut(Mt){return Mt+" { ? }"}function Ht(Mt,Nt,ke,je){return Mt+" ("+Nt+") {"+(je?ue(ke,je):ke.join(", "))+"}"}function ue(Mt,Nt){if(0===Mt.length)return"";var ke="\n"+Nt.prev+Nt.base;return ke+Mt.join(","+ke)+"\n"+Nt.prev}function le(Mt,Nt){var ke=st(Mt),je=[];if(ke){je.length=Mt.length;for(var li=0;li<Mt.length;li++)je[li]=Qe(Mt,li)?Nt(Mt[li],Mt):""}var mi,ri="function"==typeof ct?ct(Mt):[];if(lt){mi={};for(var Bi=0;Bi<ri.length;Bi++)mi["$"+ri[Bi]]=ri[Bi]}for(var pi in Mt)!Qe(Mt,pi)||ke&&String(Number(pi))===pi&&pi<Mt.length||lt&&mi["$"+pi]instanceof Symbol||(/[^\w$]/.test(pi)?je.push(Nt(pi,Mt)+": "+Nt(Mt[pi],Mt)):je.push(pi+": "+Nt(Mt[pi],Mt)));if("function"==typeof ct)for(var bi=0;bi<ri.length;bi++)bt.call(Mt,ri[bi])&&je.push("["+Nt(ri[bi])+"]: "+Nt(Mt[ri[bi]],Mt));return je}},70721:L=>{"use strict";function W(m,y){return Object.prototype.hasOwnProperty.call(m,y)}L.exports=function(m,y,p,e){p=p||"=";var t={};if("string"!=typeof m||0===m.length)return t;var n=/\+/g;m=m.split(y=y||"&");var o=1e3;e&&"number"==typeof e.maxKeys&&(o=e.maxKeys);var s=m.length;o>0&&s>o&&(s=o);for(var c=0;c<s;++c){var O,H,V,G,v=m[c].replace(n,"%20"),R=v.indexOf(p);R>=0?(O=v.substr(0,R),H=v.substr(R+1)):(O=v,H=""),V=decodeURIComponent(O),G=decodeURIComponent(H),W(t,V)?Array.isArray(t[V])?t[V].push(G):t[V]=[t[V],G]:t[V]=G}return t}},75892:L=>{"use strict";var W=function(m){switch(typeof m){case"string":return m;case"boolean":return m?"true":"false";case"number":return isFinite(m)?m:"";default:return""}};L.exports=function(m,y,p,e){return y=y||"&",p=p||"=",null===m&&(m=void 0),"object"==typeof m?Object.keys(m).map(function(t){var n=encodeURIComponent(W(t))+p;return Array.isArray(m[t])?m[t].map(function(o){return n+encodeURIComponent(W(o))}).join(y):n+encodeURIComponent(W(m[t]))}).join(y):e?encodeURIComponent(W(e))+p+encodeURIComponent(W(m)):""}},36e3:(L,W,m)=>{"use strict";W.decode=W.parse=m(70721),W.encode=W.stringify=m(75892)},26029:L=>{var W=function(m){"use strict";var e,y=Object.prototype,p=y.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",o=t.asyncIterator||"@@asyncIterator",s=t.toStringTag||"@@toStringTag";function c(It,Vt,Ie){return Object.defineProperty(It,Vt,{value:Ie,enumerable:!0,configurable:!0,writable:!0}),It[Vt]}try{c({},"")}catch(It){c=function(Vt,Ie,Ze){return Vt[Ie]=Ze}}function v(It,Vt,Ie,Ze){var Be=Object.create((Vt&&Vt.prototype instanceof vt?Vt:vt).prototype),Ge=new nt(Ze||[]);return Be._invoke=function(It,Vt,Ie){var Ze=O;return function(Be,Ge){if(Ze===V)throw new Error("Generator is already running");if(Ze===G){if("throw"===Be)throw Ge;return Gt()}for(Ie.method=Be,Ie.arg=Ge;;){var si=Ie.delegate;if(si){var Qe=Rt(si,Ie);if(Qe){if(Qe===Z)continue;return Qe}}if("next"===Ie.method)Ie.sent=Ie._sent=Ie.arg;else if("throw"===Ie.method){if(Ze===O)throw Ze=G,Ie.arg;Ie.dispatchException(Ie.arg)}else"return"===Ie.method&&Ie.abrupt("return",Ie.arg);Ze=V;var Ne=R(It,Vt,Ie);if("normal"===Ne.type){if(Ze=Ie.done?G:H,Ne.arg===Z)continue;return{value:Ne.arg,done:Ie.done}}"throw"===Ne.type&&(Ze=G,Ie.method="throw",Ie.arg=Ne.arg)}}}(It,Ie,Ge),Be}function R(It,Vt,Ie){try{return{type:"normal",arg:It.call(Vt,Ie)}}catch(Ze){return{type:"throw",arg:Ze}}}m.wrap=v;var O="suspendedStart",H="suspendedYield",V="executing",G="completed",Z={};function vt(){}function it(){}function ot(){}var wt={};c(wt,n,function(){return this});var ct=Object.getPrototypeOf,yt=ct&&ct(ct(st([])));yt&&yt!==y&&p.call(yt,n)&&(wt=yt);var lt=ot.prototype=vt.prototype=Object.create(wt);function at(It){["next","throw","return"].forEach(function(Vt){c(It,Vt,function(Ie){return this._invoke(Vt,Ie)})})}function bt(It,Vt){function Ie(Be,Ge,si,Qe){var Ne=R(It[Be],It,Ge);if("throw"!==Ne.type){var pe=Ne.arg,we=pe.value;return we&&"object"==typeof we&&p.call(we,"__await")?Vt.resolve(we.__await).then(function(Ve){Ie("next",Ve,si,Qe)},function(Ve){Ie("throw",Ve,si,Qe)}):Vt.resolve(we).then(function(Ve){pe.value=Ve,si(pe)},function(Ve){return Ie("throw",Ve,si,Qe)})}Qe(Ne.arg)}var Ze;this._invoke=function(Be,Ge){function si(){return new Vt(function(Qe,Ne){Ie(Be,Ge,Qe,Ne)})}return Ze=Ze?Ze.then(si,si):si()}}function Rt(It,Vt){var Ie=It.iterator[Vt.method];if(Ie===e){if(Vt.delegate=null,"throw"===Vt.method){if(It.iterator.return&&(Vt.method="return",Vt.arg=e,Rt(It,Vt),"throw"===Vt.method))return Z;Vt.method="throw",Vt.arg=new TypeError("The iterator does not provide a 'throw' method")}return Z}var Ze=R(Ie,It.iterator,Vt.arg);if("throw"===Ze.type)return Vt.method="throw",Vt.arg=Ze.arg,Vt.delegate=null,Z;var me=Ze.arg;return me?me.done?(Vt[It.resultName]=me.value,Vt.next=It.nextLoc,"return"!==Vt.method&&(Vt.method="next",Vt.arg=e),Vt.delegate=null,Z):me:(Vt.method="throw",Vt.arg=new TypeError("iterator result is not an object"),Vt.delegate=null,Z)}function mt(It){var Vt={tryLoc:It[0]};1 in It&&(Vt.catchLoc=It[1]),2 in It&&(Vt.finallyLoc=It[2],Vt.afterLoc=It[3]),this.tryEntries.push(Vt)}function dt(It){var Vt=It.completion||{};Vt.type="normal",delete Vt.arg,It.completion=Vt}function nt(It){this.tryEntries=[{tryLoc:"root"}],It.forEach(mt,this),this.reset(!0)}function st(It){if(It){var Vt=It[n];if(Vt)return Vt.call(It);if("function"==typeof It.next)return It;if(!isNaN(It.length)){var Ie=-1,Ze=function me(){for(;++Ie<It.length;)if(p.call(It,Ie))return me.value=It[Ie],me.done=!1,me;return me.value=e,me.done=!0,me};return Ze.next=Ze}}return{next:Gt}}function Gt(){return{value:e,done:!0}}return it.prototype=ot,c(lt,"constructor",ot),c(ot,"constructor",it),it.displayName=c(ot,s,"GeneratorFunction"),m.isGeneratorFunction=function(It){var Vt="function"==typeof It&&It.constructor;return!!Vt&&(Vt===it||"GeneratorFunction"===(Vt.displayName||Vt.name))},m.mark=function(It){return Object.setPrototypeOf?Object.setPrototypeOf(It,ot):(It.__proto__=ot,c(It,s,"GeneratorFunction")),It.prototype=Object.create(lt),It},m.awrap=function(It){return{__await:It}},at(bt.prototype),c(bt.prototype,o,function(){return this}),m.AsyncIterator=bt,m.async=function(It,Vt,Ie,Ze,me){void 0===me&&(me=Promise);var Be=new bt(v(It,Vt,Ie,Ze),me);return m.isGeneratorFunction(Vt)?Be:Be.next().then(function(Ge){return Ge.done?Ge.value:Be.next()})},at(lt),c(lt,s,"Generator"),c(lt,n,function(){return this}),c(lt,"toString",function(){return"[object Generator]"}),m.keys=function(It){var Vt=[];for(var Ie in It)Vt.push(Ie);return Vt.reverse(),function Ze(){for(;Vt.length;){var me=Vt.pop();if(me in It)return Ze.value=me,Ze.done=!1,Ze}return Ze.done=!0,Ze}},m.values=st,nt.prototype={constructor:nt,reset:function(It){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(dt),!It)for(var Vt in this)"t"===Vt.charAt(0)&&p.call(this,Vt)&&!isNaN(+Vt.slice(1))&&(this[Vt]=e)},stop:function(){this.done=!0;var Vt=this.tryEntries[0].completion;if("throw"===Vt.type)throw Vt.arg;return this.rval},dispatchException:function(It){if(this.done)throw It;var Vt=this;function Ie(Qe,Ne){return Be.type="throw",Be.arg=It,Vt.next=Qe,Ne&&(Vt.method="next",Vt.arg=e),!!Ne}for(var Ze=this.tryEntries.length-1;Ze>=0;--Ze){var me=this.tryEntries[Ze],Be=me.completion;if("root"===me.tryLoc)return Ie("end");if(me.tryLoc<=this.prev){var Ge=p.call(me,"catchLoc"),si=p.call(me,"finallyLoc");if(Ge&&si){if(this.prev<me.catchLoc)return Ie(me.catchLoc,!0);if(this.prev<me.finallyLoc)return Ie(me.finallyLoc)}else if(Ge){if(this.prev<me.catchLoc)return Ie(me.catchLoc,!0)}else{if(!si)throw new Error("try statement without catch or finally");if(this.prev<me.finallyLoc)return Ie(me.finallyLoc)}}}},abrupt:function(It,Vt){for(var Ie=this.tryEntries.length-1;Ie>=0;--Ie){var Ze=this.tryEntries[Ie];if(Ze.tryLoc<=this.prev&&p.call(Ze,"finallyLoc")&&this.prev<Ze.finallyLoc){var me=Ze;break}}me&&("break"===It||"continue"===It)&&me.tryLoc<=Vt&&Vt<=me.finallyLoc&&(me=null);var Be=me?me.completion:{};return Be.type=It,Be.arg=Vt,me?(this.method="next",this.next=me.finallyLoc,Z):this.complete(Be)},complete:function(It,Vt){if("throw"===It.type)throw It.arg;return"break"===It.type||"continue"===It.type?this.next=It.arg:"return"===It.type?(this.rval=this.arg=It.arg,this.method="return",this.next="end"):"normal"===It.type&&Vt&&(this.next=Vt),Z},finish:function(It){for(var Vt=this.tryEntries.length-1;Vt>=0;--Vt){var Ie=this.tryEntries[Vt];if(Ie.finallyLoc===It)return this.complete(Ie.completion,Ie.afterLoc),dt(Ie),Z}},catch:function(It){for(var Vt=this.tryEntries.length-1;Vt>=0;--Vt){var Ie=this.tryEntries[Vt];if(Ie.tryLoc===It){var Ze=Ie.completion;if("throw"===Ze.type){var me=Ze.arg;dt(Ie)}return me}}throw new Error("illegal catch attempt")},delegateYield:function(It,Vt,Ie){return this.delegate={iterator:st(It),resultName:Vt,nextLoc:Ie},"next"===this.method&&(this.arg=e),Z}},m}(L.exports);try{regeneratorRuntime=W}catch(m){"object"==typeof globalThis?globalThis.regeneratorRuntime=W:Function("r","regeneratorRuntime = r")(W)}},93544:(L,W,m)=>{"use strict";var y=m(4320),p=m(4640),e=m(59009),t=y("%TypeError%"),n=y("%WeakMap%",!0),o=y("%Map%",!0),s=p("WeakMap.prototype.get",!0),c=p("WeakMap.prototype.set",!0),v=p("WeakMap.prototype.has",!0),R=p("Map.prototype.get",!0),O=p("Map.prototype.set",!0),H=p("Map.prototype.has",!0),V=function(it,ot){for(var ct,wt=it;null!==(ct=wt.next);wt=ct)if(ct.key===ot)return wt.next=ct.next,ct.next=it.next,it.next=ct,ct};L.exports=function(){var ot,wt,ct,yt={assert:function(lt){if(!yt.has(lt))throw new t("Side channel does not contain "+e(lt))},get:function(lt){if(n&&lt&&("object"==typeof lt||"function"==typeof lt)){if(ot)return s(ot,lt)}else if(o){if(wt)return R(wt,lt)}else if(ct)return function(it,ot){var wt=V(it,ot);return wt&&wt.value}(ct,lt)},has:function(lt){if(n&&lt&&("object"==typeof lt||"function"==typeof lt)){if(ot)return v(ot,lt)}else if(o){if(wt)return H(wt,lt)}else if(ct)return function(it,ot){return!!V(it,ot)}(ct,lt);return!1},set:function(lt,at){n&&lt&&("object"==typeof lt||"function"==typeof lt)?(ot||(ot=new n),c(ot,lt,at)):o?(wt||(wt=new o),O(wt,lt,at)):(ct||(ct={key:{},next:null}),function(it,ot,wt){var ct=V(it,ot);ct?ct.value=wt:it.next={key:ot,next:it.next,value:wt}}(ct,lt,at))}};return yt}},47511:(L,W,m)=>{"use strict";m.r(W),m.d(W,{default:()=>wh,helpers:()=>Oc});var y={};m.r(y),m.d(y,{JsonPatchError:()=>Yo,_areEquals:()=>yl,applyOperation:()=>xs,applyPatch:()=>ks,applyReducer:()=>Ec,deepClone:()=>Su,getValueByPointer:()=>Ta,validate:()=>gr,validator:()=>bl});var p={};m.r(p),m.d(p,{compare:()=>Tc,generate:()=>$l,observe:()=>Ca,unobserve:()=>ea});var e={};m.r(e),m.d(e,{cookie:()=>yh,header:()=>bh,path:()=>vh,query:()=>jd});var t=m(49719),n=m(42475),o=m(25551),s=m(73507),c=m(41586),v=m(86657),R=m(40107),O=m(31082);function H(T,N,z){return N in T?O(T,N,{value:z,enumerable:!0,configurable:!0,writable:!0}):T[N]=z,T}function V(T,N){var z=t(T);if(n){var Q=n(T);N&&(Q=o(Q).call(Q,function(ft){return s(T,ft).enumerable})),z.push.apply(z,Q)}return z}function G(T){for(var N=1;N<arguments.length;N++){var Q,z=null!=arguments[N]?arguments[N]:{};if(N%2)c(Q=V(Object(z),!0)).call(Q,function(xt){H(T,xt,z[xt])});else if(v)R(T,v(z));else{var ft;c(ft=V(Object(z))).call(ft,function(xt){O(T,xt,s(z,xt))})}}return T}var Z=m(41246),vt=m.n(Z),it=m(15157),ot=m.n(it),wt=m(5128),ct=m(84215),yt=m(17830),lt=m(6275),at=m(28355),bt=m(16051);function tt(T,N){(null==N||N>T.length)&&(N=T.length);for(var z=0,Q=new Array(N);z<N;z++)Q[z]=T[z];return Q}function Rt(T,N){var z;if(T){if("string"==typeof T)return tt(T,N);var Q=at(z=Object.prototype.toString.call(T)).call(z,8,-1);if("Object"===Q&&T.constructor&&(Q=T.constructor.name),"Map"===Q||"Set"===Q)return bt(T);if("Arguments"===Q||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return tt(T,N)}}function mt(T,N){var z=void 0!==ct&&yt(T)||T["@@iterator"];if(!z){if(lt(T)||(z=Rt(T))||N&&T&&"number"==typeof T.length){z&&(T=z);var Q=0,ft=function(){};return{s:ft,n:function(){return Q>=T.length?{done:!0}:{done:!1,value:T[Q++]}},e:function(ce){throw ce},f:ft}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var jt,xt=!0,kt=!1;return{s:function(){z=z.call(T)},n:function(){var ce=z.next();return xt=ce.done,ce},e:function(ce){kt=!0,jt=ce},f:function(){try{!xt&&null!=z.return&&z.return()}finally{if(kt)throw jt}}}}var dt=m(36496);function nt(T){return(nt="function"==typeof ct&&"symbol"==typeof dt?function(z){return typeof z}:function(z){return z&&"function"==typeof ct&&z.constructor===ct&&z!==ct.prototype?"symbol":typeof z})(T)}function Vt(T,N){return function(T){if(lt(T))return T}(T)||function(T,N){var z=null==T?null:void 0!==ct&&yt(T)||T["@@iterator"];if(null!=z){var kt,jt,Q=[],ft=!0,xt=!1;try{for(z=z.call(T);!(ft=(kt=z.next()).done)&&(Q.push(kt.value),!N||Q.length!==N);ft=!0);}catch(oe){xt=!0,jt=oe}finally{try{!ft&&null!=z.return&&z.return()}finally{if(xt)throw jt}}return Q}}(T,N)||Rt(T,N)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ie=m(75534);function Ze(T,N,z,Q,ft,xt,kt){try{var jt=T[xt](kt),oe=jt.value}catch(ce){return void z(ce)}jt.done?N(oe):Ie.resolve(oe).then(Q,ft)}function me(T){return function(){var N=this,z=arguments;return new Ie(function(Q,ft){var xt=T.apply(N,z);function kt(oe){Ze(xt,Q,ft,kt,jt,"next",oe)}function jt(oe){Ze(xt,Q,ft,kt,jt,"throw",oe)}kt(void 0)})}}var Be=m(22043),Ge=m.n(Be),si=m(17423),Qe=m.n(si),Ne=m(58201),pe=m.n(Ne),we=m(6089),Ve=m.n(we),ui=m(99182),Ke=m.n(ui),be=m(32633),Xt=m.n(be),re=m(17878),Me=m.n(re),vi=m(44559),ie=m.n(vi),Ut=m(2165),Ht=m.n(Ut),Zt=m(37647),Yt=m.n(Zt),le=(m(11966),m(84268)),Mt=m.n(le);function Nt(T){return null==T}var ae={isNothing:Nt,isObject:function(T){return"object"==typeof T&&null!==T},toArray:function(T){return Array.isArray(T)?T:Nt(T)?[]:[T]},repeat:function(T,N){var Q,z="";for(Q=0;Q<N;Q+=1)z+=T;return z},isNegativeZero:function(T){return 0===T&&Number.NEGATIVE_INFINITY===1/T},extend:function(T,N){var z,Q,ft,xt;if(N)for(z=0,Q=(xt=Object.keys(N)).length;z<Q;z+=1)T[ft=xt[z]]=N[ft];return T}};function Pe(T,N){var z="",Q=T.reason||"(unknown reason)";return T.mark?(T.mark.name&&(z+='in "'+T.mark.name+'" '),z+="("+(T.mark.line+1)+":"+(T.mark.column+1)+")",!N&&T.mark.snippet&&(z+="\n\n"+T.mark.snippet),Q+" "+z):Q}function oi(T,N){Error.call(this),this.name="YAMLException",this.reason=T,this.mark=N,this.message=Pe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(oi.prototype=Object.create(Error.prototype)).constructor=oi,oi.prototype.toString=function(N){return this.name+": "+Pe(this,N)};var Te=oi;function Oe(T,N,z,Q,ft){var xt="",kt="",jt=Math.floor(ft/2)-1;return Q-N>jt&&(N=Q-jt+(xt=" ... ").length),z-Q>jt&&(z=Q+jt-(kt=" ...").length),{str:xt+T.slice(N,z).replace(/\t/g,"\u2192")+kt,pos:Q-N+xt.length}}function se(T,N){return ae.repeat(" ",N-T.length)+T}var qt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Ee=["scalar","sequence","mapping"],Hi=function(T,N){if(N=N||{},Object.keys(N).forEach(function(z){if(-1===qt.indexOf(z))throw new Te('Unknown option "'+z+'" is met in definition of "'+T+'" YAML type.')}),this.options=N,this.tag=T,this.kind=N.kind||null,this.resolve=N.resolve||function(){return!0},this.construct=N.construct||function(z){return z},this.instanceOf=N.instanceOf||null,this.predicate=N.predicate||null,this.represent=N.represent||null,this.representName=N.representName||null,this.defaultStyle=N.defaultStyle||null,this.multi=N.multi||!1,this.styleAliases=function(T){var N={};return null!==T&&Object.keys(T).forEach(function(z){T[z].forEach(function(Q){N[String(Q)]=z})}),N}(N.styleAliases||null),-1===Ee.indexOf(this.kind))throw new Te('Unknown kind "'+this.kind+'" is specified for "'+T+'" YAML type.')};function bn(T,N){var z=[];return T[N].forEach(function(Q){var ft=z.length;z.forEach(function(xt,kt){xt.tag===Q.tag&&xt.kind===Q.kind&&xt.multi===Q.multi&&(ft=kt)}),z[ft]=Q}),z}function Xe(T){return this.extend(T)}Xe.prototype.extend=function(N){var z=[],Q=[];if(N instanceof Hi)Q.push(N);else if(Array.isArray(N))Q=Q.concat(N);else{if(!N||!Array.isArray(N.implicit)&&!Array.isArray(N.explicit))throw new Te("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");N.implicit&&(z=z.concat(N.implicit)),N.explicit&&(Q=Q.concat(N.explicit))}z.forEach(function(xt){if(!(xt instanceof Hi))throw new Te("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(xt.loadKind&&"scalar"!==xt.loadKind)throw new Te("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(xt.multi)throw new Te("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),Q.forEach(function(xt){if(!(xt instanceof Hi))throw new Te("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var ft=Object.create(Xe.prototype);return ft.implicit=(this.implicit||[]).concat(z),ft.explicit=(this.explicit||[]).concat(Q),ft.compiledImplicit=bn(ft,"implicit"),ft.compiledExplicit=bn(ft,"explicit"),ft.compiledTypeMap=function(){var N,z,T={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function Q(ft){ft.multi?(T.multi[ft.kind].push(ft),T.multi.fallback.push(ft)):T[ft.kind][ft.tag]=T.fallback[ft.tag]=ft}for(N=0,z=arguments.length;N<z;N+=1)arguments[N].forEach(Q);return T}(ft.compiledImplicit,ft.compiledExplicit),ft};var Re=Xe,fe=new Hi("tag:yaml.org,2002:str",{kind:"scalar",construct:function(T){return null!==T?T:""}}),ze=new Hi("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(T){return null!==T?T:[]}}),_i=new Hi("tag:yaml.org,2002:map",{kind:"mapping",construct:function(T){return null!==T?T:{}}}),Xi=new Re({explicit:[fe,ze,_i]}),mr=new Hi("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(T){if(null===T)return!0;var N=T.length;return 1===N&&"~"===T||4===N&&("null"===T||"Null"===T||"NULL"===T)},construct:function(){return null},predicate:function(T){return null===T},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),eo=new Hi("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(T){if(null===T)return!1;var N=T.length;return 4===N&&("true"===T||"True"===T||"TRUE"===T)||5===N&&("false"===T||"False"===T||"FALSE"===T)},construct:function(T){return"true"===T||"True"===T||"TRUE"===T},predicate:function(T){return"[object Boolean]"===Object.prototype.toString.call(T)},represent:{lowercase:function(T){return T?"true":"false"},uppercase:function(T){return T?"TRUE":"FALSE"},camelcase:function(T){return T?"True":"False"}},defaultStyle:"lowercase"});function Ar(T){return 48<=T&&T<=57||65<=T&&T<=70||97<=T&&T<=102}function Pn(T){return 48<=T&&T<=55}function Fi(T){return 48<=T&&T<=57}var Or=new Hi("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(T){if(null===T)return!1;var ft,N=T.length,z=0,Q=!1;if(!N)return!1;if(("-"===(ft=T[z])||"+"===ft)&&(ft=T[++z]),"0"===ft){if(z+1===N)return!0;if("b"===(ft=T[++z])){for(z++;z<N;z++)if("_"!==(ft=T[z])){if("0"!==ft&&"1"!==ft)return!1;Q=!0}return Q&&"_"!==ft}if("x"===ft){for(z++;z<N;z++)if("_"!==(ft=T[z])){if(!Ar(T.charCodeAt(z)))return!1;Q=!0}return Q&&"_"!==ft}if("o"===ft){for(z++;z<N;z++)if("_"!==(ft=T[z])){if(!Pn(T.charCodeAt(z)))return!1;Q=!0}return Q&&"_"!==ft}}if("_"===ft)return!1;for(;z<N;z++)if("_"!==(ft=T[z])){if(!Fi(T.charCodeAt(z)))return!1;Q=!0}return!(!Q||"_"===ft)},construct:function(T){var Q,N=T,z=1;if(-1!==N.indexOf("_")&&(N=N.replace(/_/g,"")),("-"===(Q=N[0])||"+"===Q)&&("-"===Q&&(z=-1),Q=(N=N.slice(1))[0]),"0"===N)return 0;if("0"===Q){if("b"===N[1])return z*parseInt(N.slice(2),2);if("x"===N[1])return z*parseInt(N.slice(2),16);if("o"===N[1])return z*parseInt(N.slice(2),8)}return z*parseInt(N,10)},predicate:function(T){return"[object Number]"===Object.prototype.toString.call(T)&&T%1==0&&!ae.isNegativeZero(T)},represent:{binary:function(T){return T>=0?"0b"+T.toString(2):"-0b"+T.toString(2).slice(1)},octal:function(T){return T>=0?"0o"+T.toString(8):"-0o"+T.toString(8).slice(1)},decimal:function(T){return T.toString(10)},hexadecimal:function(T){return T>=0?"0x"+T.toString(16).toUpperCase():"-0x"+T.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),so=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),Vo=/^[-+]?[0-9]+e/,hr=new Hi("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(T){return!(null===T||!so.test(T)||"_"===T[T.length-1])},construct:function(T){var N,z;return z="-"===(N=T.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(N[0])>=0&&(N=N.slice(1)),".inf"===N?1===z?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===N?NaN:z*parseFloat(N,10)},predicate:function(T){return"[object Number]"===Object.prototype.toString.call(T)&&(T%1!=0||ae.isNegativeZero(T))},represent:function(T,N){var z;if(isNaN(T))switch(N){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===T)switch(N){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===T)switch(N){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ae.isNegativeZero(T))return"-0.0";return z=T.toString(10),Vo.test(z)?z.replace("e",".e"):z},defaultStyle:"lowercase"}),Oo=Xi.extend({implicit:[mr,eo,Or,hr]}),ts=Oo,er=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),go=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),un=new Hi("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(T){return null!==T&&(null!==er.exec(T)||null!==go.exec(T))},construct:function(T){var N,z,Q,ft,xt,kt,jt,Je,oe=0,ce=null;if(null===(N=er.exec(T))&&(N=go.exec(T)),null===N)throw new Error("Date resolve error");if(z=+N[1],Q=+N[2]-1,ft=+N[3],!N[4])return new Date(Date.UTC(z,Q,ft));if(xt=+N[4],kt=+N[5],jt=+N[6],N[7]){for(oe=N[7].slice(0,3);oe.length<3;)oe+="0";oe=+oe}return N[9]&&(ce=6e4*(60*+N[10]+ +(N[11]||0)),"-"===N[9]&&(ce=-ce)),Je=new Date(Date.UTC(z,Q,ft,xt,kt,jt,oe)),ce&&Je.setTime(Je.getTime()-ce),Je},instanceOf:Date,represent:function(T){return T.toISOString()}}),bo=new Hi("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(T){return"<<"===T||null===T}}),ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",ho=new Hi("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(T){if(null===T)return!1;var N,z,Q=0,ft=T.length,xt=ao;for(z=0;z<ft;z++)if(!((N=xt.indexOf(T.charAt(z)))>64)){if(N<0)return!1;Q+=6}return Q%8==0},construct:function(T){var N,z,Q=T.replace(/[\r\n=]/g,""),ft=Q.length,xt=ao,kt=0,jt=[];for(N=0;N<ft;N++)N%4==0&&N&&(jt.push(kt>>16&255),jt.push(kt>>8&255),jt.push(255&kt)),kt=kt<<6|xt.indexOf(Q.charAt(N));return 0==(z=ft%4*6)?(jt.push(kt>>16&255),jt.push(kt>>8&255),jt.push(255&kt)):18===z?(jt.push(kt>>10&255),jt.push(kt>>2&255)):12===z&&jt.push(kt>>4&255),new Uint8Array(jt)},predicate:function(T){return"[object Uint8Array]"===Object.prototype.toString.call(T)},represent:function(T){var Q,ft,N="",z=0,xt=T.length,kt=ao;for(Q=0;Q<xt;Q++)Q%3==0&&Q&&(N+=kt[z>>18&63],N+=kt[z>>12&63],N+=kt[z>>6&63],N+=kt[63&z]),z=(z<<8)+T[Q];return 0==(ft=xt%3)?(N+=kt[z>>18&63],N+=kt[z>>12&63],N+=kt[z>>6&63],N+=kt[63&z]):2===ft?(N+=kt[z>>10&63],N+=kt[z>>4&63],N+=kt[z<<2&63],N+=kt[64]):1===ft&&(N+=kt[z>>2&63],N+=kt[z<<4&63],N+=kt[64],N+=kt[64]),N}}),$o=Object.prototype.hasOwnProperty,sa=Object.prototype.toString,oo=new Hi("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(T){if(null===T)return!0;var z,Q,ft,xt,kt,N=[],jt=T;for(z=0,Q=jt.length;z<Q;z+=1){if(kt=!1,"[object Object]"!==sa.call(ft=jt[z]))return!1;for(xt in ft)if($o.call(ft,xt)){if(kt)return!1;kt=!0}if(!kt)return!1;if(-1!==N.indexOf(xt))return!1;N.push(xt)}return!0},construct:function(T){return null!==T?T:[]}}),xo=Object.prototype.toString,Gr=new Hi("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(T){if(null===T)return!0;var N,z,Q,ft,xt,kt=T;for(xt=new Array(kt.length),N=0,z=kt.length;N<z;N+=1){if("[object Object]"!==xo.call(Q=kt[N])||1!==(ft=Object.keys(Q)).length)return!1;xt[N]=[ft[0],Q[ft[0]]]}return!0},construct:function(T){if(null===T)return[];var N,z,Q,ft,xt,kt=T;for(xt=new Array(kt.length),N=0,z=kt.length;N<z;N+=1)Q=kt[N],ft=Object.keys(Q),xt[N]=[ft[0],Q[ft[0]]];return xt}}),hs=Object.prototype.hasOwnProperty,Ts=new Hi("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(T){if(null===T)return!0;var N,z=T;for(N in z)if(hs.call(z,N)&&null!==z[N])return!1;return!0},construct:function(T){return null!==T?T:{}}}),Bs=ts.extend({implicit:[un,bo],explicit:[ho,oo,Gr,Ts]}),is=Object.prototype.hasOwnProperty,br=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ir=/[\x85\u2028\u2029]/,ps=/[,\[\]\{\}]/,No=/^(?:!|!!|![a-z\-]+!)$/i,yr=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Wr(T){return Object.prototype.toString.call(T)}function nr(T){return 10===T||13===T}function Go(T){return 9===T||32===T}function mo(T){return 9===T||32===T||10===T||13===T}function kr(T){return 44===T||91===T||93===T||123===T||125===T}function Jn(T){var N;return 48<=T&&T<=57?T-48:97<=(N=32|T)&&N<=102?N-97+10:-1}function fr(T){return 120===T?2:117===T?4:85===T?8:0}function cr(T){return 48<=T&&T<=57?T-48:-1}function Qs(T){return 48===T?"\0":97===T?"\x07":98===T?"\b":116===T||9===T?"\t":110===T?"\n":118===T?"\v":102===T?"\f":114===T?"\r":101===T?"\x1b":32===T?" ":34===T?'"':47===T?"/":92===T?"\\":78===T?"\x85":95===T?"\xa0":76===T?"\u2028":80===T?"\u2029":""}function Cs(T){return T<=65535?String.fromCharCode(T):String.fromCharCode(55296+(T-65536>>10),56320+(T-65536&1023))}for(var Po=new Array(256),Ss=new Array(256),Lr=0;Lr<256;Lr++)Po[Lr]=Qs(Lr)?1:0,Ss[Lr]=Qs(Lr);function Hs(T,N){this.input=T,this.filename=N.filename||null,this.schema=N.schema||Bs,this.onWarning=N.onWarning||null,this.legacy=N.legacy||!1,this.json=N.json||!1,this.listener=N.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=T.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function $n(T,N){var z={name:T.filename,buffer:T.input.slice(0,-1),position:T.position,line:T.line,column:T.position-T.lineStart};return z.snippet=function(T,N){if(N=Object.create(N||null),!T.buffer)return null;N.maxLength||(N.maxLength=79),"number"!=typeof N.indent&&(N.indent=1),"number"!=typeof N.linesBefore&&(N.linesBefore=3),"number"!=typeof N.linesAfter&&(N.linesAfter=2);for(var xt,z=/\r?\n|\r|\0/g,Q=[0],ft=[],kt=-1;xt=z.exec(T.buffer);)ft.push(xt.index),Q.push(xt.index+xt[0].length),T.position<=xt.index&&kt<0&&(kt=Q.length-2);kt<0&&(kt=Q.length-1);var oe,ce,jt="",Fe=Math.min(T.line+N.linesAfter,ft.length).toString().length,Ue=N.maxLength-(N.indent+Fe+3);for(oe=1;oe<=N.linesBefore&&!(kt-oe<0);oe++)ce=Oe(T.buffer,Q[kt-oe],ft[kt-oe],T.position-(Q[kt]-Q[kt-oe]),Ue),jt=ae.repeat(" ",N.indent)+se((T.line-oe+1).toString(),Fe)+" | "+ce.str+"\n"+jt;for(ce=Oe(T.buffer,Q[kt],ft[kt],T.position,Ue),jt+=ae.repeat(" ",N.indent)+se((T.line+1).toString(),Fe)+" | "+ce.str+"\n",jt+=ae.repeat("-",N.indent+Fe+3+ce.pos)+"^\n",oe=1;oe<=N.linesAfter&&!(kt+oe>=ft.length);oe++)ce=Oe(T.buffer,Q[kt+oe],ft[kt+oe],T.position-(Q[kt]-Q[kt+oe]),Ue),jt+=ae.repeat(" ",N.indent)+se((T.line+oe+1).toString(),Fe)+" | "+ce.str+"\n";return jt.replace(/\n$/,"")}(z),new Te(N,z)}function sn(T,N){throw $n(T,N)}function Nr(T,N){T.onWarning&&T.onWarning.call(null,$n(T,N))}var Et={YAML:function(N,z,Q){var ft,xt,kt;null!==N.version&&sn(N,"duplication of %YAML directive"),1!==Q.length&&sn(N,"YAML directive accepts exactly one argument"),null===(ft=/^([0-9]+)\.([0-9]+)$/.exec(Q[0]))&&sn(N,"ill-formed argument of the YAML directive"),xt=parseInt(ft[1],10),kt=parseInt(ft[2],10),1!==xt&&sn(N,"unacceptable YAML version of the document"),N.version=Q[0],N.checkLineBreaks=kt<2,1!==kt&&2!==kt&&Nr(N,"unsupported YAML version of the document")},TAG:function(N,z,Q){var ft,xt;2!==Q.length&&sn(N,"TAG directive accepts exactly two arguments"),xt=Q[1],No.test(ft=Q[0])||sn(N,"ill-formed tag handle (first argument) of the TAG directive"),is.call(N.tagMap,ft)&&sn(N,'there is a previously declared suffix for "'+ft+'" tag handle'),yr.test(xt)||sn(N,"ill-formed tag prefix (second argument) of the TAG directive");try{xt=decodeURIComponent(xt)}catch(kt){sn(N,"tag prefix is malformed: "+xt)}N.tagMap[ft]=xt}};function K(T,N,z,Q){var ft,xt,kt,jt;if(N<z){if(jt=T.input.slice(N,z),Q)for(ft=0,xt=jt.length;ft<xt;ft+=1)9===(kt=jt.charCodeAt(ft))||32<=kt&&kt<=1114111||sn(T,"expected valid JSON character");else br.test(jt)&&sn(T,"the stream contains non-printable characters");T.result+=jt}}function F(T,N,z,Q){var ft,xt,kt,jt;for(ae.isObject(z)||sn(T,"cannot merge mappings; the provided source object is unacceptable"),kt=0,jt=(ft=Object.keys(z)).length;kt<jt;kt+=1)is.call(N,xt=ft[kt])||(N[xt]=z[xt],Q[xt]=!0)}function j(T,N,z,Q,ft,xt,kt,jt,oe){var ce,Fe;if(Array.isArray(ft))for(ce=0,Fe=(ft=Array.prototype.slice.call(ft)).length;ce<Fe;ce+=1)Array.isArray(ft[ce])&&sn(T,"nested arrays are not supported inside keys"),"object"==typeof ft&&"[object Object]"===Wr(ft[ce])&&(ft[ce]="[object Object]");if("object"==typeof ft&&"[object Object]"===Wr(ft)&&(ft="[object Object]"),ft=String(ft),null===N&&(N={}),"tag:yaml.org,2002:merge"===Q)if(Array.isArray(xt))for(ce=0,Fe=xt.length;ce<Fe;ce+=1)F(T,N,xt[ce],z);else F(T,N,xt,z);else!T.json&&!is.call(z,ft)&&is.call(N,ft)&&(T.line=kt||T.line,T.lineStart=jt||T.lineStart,T.position=oe||T.position,sn(T,"duplicated mapping key")),"__proto__"===ft?Object.defineProperty(N,ft,{configurable:!0,enumerable:!0,writable:!0,value:xt}):N[ft]=xt,delete z[ft];return N}function St(T){var N;10===(N=T.input.charCodeAt(T.position))?T.position++:13===N?(T.position++,10===T.input.charCodeAt(T.position)&&T.position++):sn(T,"a line break is expected"),T.line+=1,T.lineStart=T.position,T.firstTabInLine=-1}function ge(T,N,z){for(var Q=0,ft=T.input.charCodeAt(T.position);0!==ft;){for(;Go(ft);)9===ft&&-1===T.firstTabInLine&&(T.firstTabInLine=T.position),ft=T.input.charCodeAt(++T.position);if(N&&35===ft)do{ft=T.input.charCodeAt(++T.position)}while(10!==ft&&13!==ft&&0!==ft);if(!nr(ft))break;for(St(T),ft=T.input.charCodeAt(T.position),Q++,T.lineIndent=0;32===ft;)T.lineIndent++,ft=T.input.charCodeAt(++T.position)}return-1!==z&&0!==Q&&T.lineIndent<z&&Nr(T,"deficient indentation"),Q}function ni(T){var z,N=T.position;return!(45!==(z=T.input.charCodeAt(N))&&46!==z||z!==T.input.charCodeAt(N+1)||z!==T.input.charCodeAt(N+2)||(N+=3,z=T.input.charCodeAt(N),0!==z&&!mo(z)))}function ki(T,N){1===N?T.result+=" ":N>1&&(T.result+=ae.repeat("\n",N-1))}function lo(T,N){var z,oe,Q=T.tag,ft=T.anchor,xt=[],jt=!1;if(-1!==T.firstTabInLine)return!1;for(null!==T.anchor&&(T.anchorMap[T.anchor]=xt),oe=T.input.charCodeAt(T.position);0!==oe&&(-1!==T.firstTabInLine&&(T.position=T.firstTabInLine,sn(T,"tab characters must not be used in indentation")),45===oe&&mo(T.input.charCodeAt(T.position+1)));)if(jt=!0,T.position++,ge(T,!0,-1)&&T.lineIndent<=N)xt.push(null),oe=T.input.charCodeAt(T.position);else if(z=T.line,Rr(T,N,3,!1,!0),xt.push(T.result),ge(T,!0,-1),oe=T.input.charCodeAt(T.position),(T.line===z||T.lineIndent>N)&&0!==oe)sn(T,"bad indentation of a sequence entry");else if(T.lineIndent<N)break;return!!jt&&(T.tag=Q,T.anchor=ft,T.kind="sequence",T.result=xt,!0)}function fn(T){var N,ft,xt,kt,z=!1,Q=!1;if(33!==(kt=T.input.charCodeAt(T.position)))return!1;if(null!==T.tag&&sn(T,"duplication of a tag property"),60===(kt=T.input.charCodeAt(++T.position))?(z=!0,kt=T.input.charCodeAt(++T.position)):33===kt?(Q=!0,ft="!!",kt=T.input.charCodeAt(++T.position)):ft="!",N=T.position,z){do{kt=T.input.charCodeAt(++T.position)}while(0!==kt&&62!==kt);T.position<T.length?(xt=T.input.slice(N,T.position),kt=T.input.charCodeAt(++T.position)):sn(T,"unexpected end of the stream within a verbatim tag")}else{for(;0!==kt&&!mo(kt);)33===kt&&(Q?sn(T,"tag suffix cannot contain exclamation marks"):(ft=T.input.slice(N-1,T.position+1),No.test(ft)||sn(T,"named tag handle cannot contain such characters"),Q=!0,N=T.position+1)),kt=T.input.charCodeAt(++T.position);xt=T.input.slice(N,T.position),ps.test(xt)&&sn(T,"tag suffix cannot contain flow indicator characters")}xt&&!yr.test(xt)&&sn(T,"tag name cannot contain such characters: "+xt);try{xt=decodeURIComponent(xt)}catch(jt){sn(T,"tag name is malformed: "+xt)}return z?T.tag=xt:is.call(T.tagMap,ft)?T.tag=T.tagMap[ft]+xt:"!"===ft?T.tag="!"+xt:"!!"===ft?T.tag="tag:yaml.org,2002:"+xt:sn(T,'undeclared tag handle "'+ft+'"'),!0}function fs(T){var N,z;if(38!==(z=T.input.charCodeAt(T.position)))return!1;for(null!==T.anchor&&sn(T,"duplication of an anchor property"),z=T.input.charCodeAt(++T.position),N=T.position;0!==z&&!mo(z)&&!kr(z);)z=T.input.charCodeAt(++T.position);return T.position===N&&sn(T,"name of an anchor node must contain at least one character"),T.anchor=T.input.slice(N,T.position),!0}function Rr(T,N,z,Q,ft){var xt,kt,jt,Ue,Je,ci,Ci,Mi,Oi,oe=1,ce=!1,Fe=!1;if(null!==T.listener&&T.listener("open",T),T.tag=null,T.anchor=null,T.kind=null,T.result=null,xt=kt=jt=4===z||3===z,Q&&ge(T,!0,-1)&&(ce=!0,T.lineIndent>N?oe=1:T.lineIndent===N?oe=0:T.lineIndent<N&&(oe=-1)),1===oe)for(;fn(T)||fs(T);)ge(T,!0,-1)?(ce=!0,jt=xt,T.lineIndent>N?oe=1:T.lineIndent===N?oe=0:T.lineIndent<N&&(oe=-1)):jt=!1;if(jt&&(jt=ce||ft),(1===oe||4===z)&&(Mi=1===z||2===z?N:N+1,Oi=T.position-T.lineStart,1===oe?jt&&(lo(T,Oi)||function(T,N,z){var Q,ft,xt,kt,jt,oe,zt,ce=T.tag,Fe=T.anchor,Ue={},Je=Object.create(null),ci=null,Ci=null,Mi=null,Oi=!1,Ki=!1;if(-1!==T.firstTabInLine)return!1;for(null!==T.anchor&&(T.anchorMap[T.anchor]=Ue),zt=T.input.charCodeAt(T.position);0!==zt;){if(!Oi&&-1!==T.firstTabInLine&&(T.position=T.firstTabInLine,sn(T,"tab characters must not be used in indentation")),Q=T.input.charCodeAt(T.position+1),xt=T.line,63!==zt&&58!==zt||!mo(Q)){if(kt=T.line,jt=T.lineStart,oe=T.position,!Rr(T,z,2,!1,!0))break;if(T.line===xt){for(zt=T.input.charCodeAt(T.position);Go(zt);)zt=T.input.charCodeAt(++T.position);if(58===zt)mo(zt=T.input.charCodeAt(++T.position))||sn(T,"a whitespace character is expected after the key-value separator within a block mapping"),Oi&&(j(T,Ue,Je,ci,Ci,null,kt,jt,oe),ci=Ci=Mi=null),Ki=!0,Oi=!1,ft=!1,ci=T.tag,Ci=T.result;else{if(!Ki)return T.tag=ce,T.anchor=Fe,!0;sn(T,"can not read an implicit mapping pair; a colon is missed")}}else{if(!Ki)return T.tag=ce,T.anchor=Fe,!0;sn(T,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===zt?(Oi&&(j(T,Ue,Je,ci,Ci,null,kt,jt,oe),ci=Ci=Mi=null),Ki=!0,Oi=!0,ft=!0):Oi?(Oi=!1,ft=!0):sn(T,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),T.position+=1,zt=Q;if((T.line===xt||T.lineIndent>N)&&(Oi&&(kt=T.line,jt=T.lineStart,oe=T.position),Rr(T,N,4,!0,ft)&&(Oi?Ci=T.result:Mi=T.result),Oi||(j(T,Ue,Je,ci,Ci,Mi,kt,jt,oe),ci=Ci=Mi=null),ge(T,!0,-1),zt=T.input.charCodeAt(T.position)),(T.line===xt||T.lineIndent>N)&&0!==zt)sn(T,"bad indentation of a mapping entry");else if(T.lineIndent<N)break}return Oi&&j(T,Ue,Je,ci,Ci,null,kt,jt,oe),Ki&&(T.tag=ce,T.anchor=Fe,T.kind="mapping",T.result=Ue),Ki}(T,Oi,Mi))||function(T,N){var Q,ft,xt,jt,Fe,Ue,Je,ci,Mi,Oi,Ki,zt,z=!0,kt=T.tag,oe=T.anchor,Ci=Object.create(null);if(91===(zt=T.input.charCodeAt(T.position)))Fe=93,ci=!1,jt=[];else{if(123!==zt)return!1;Fe=125,ci=!0,jt={}}for(null!==T.anchor&&(T.anchorMap[T.anchor]=jt),zt=T.input.charCodeAt(++T.position);0!==zt;){if(ge(T,!0,N),(zt=T.input.charCodeAt(T.position))===Fe)return T.position++,T.tag=kt,T.anchor=oe,T.kind=ci?"mapping":"sequence",T.result=jt,!0;z?44===zt&&sn(T,"expected the node content, but found ','"):sn(T,"missed comma between flow collection entries"),Ki=null,Ue=Je=!1,63===zt&&mo(T.input.charCodeAt(T.position+1))&&(Ue=Je=!0,T.position++,ge(T,!0,N)),Q=T.line,ft=T.lineStart,xt=T.position,Rr(T,N,1,!1,!0),Oi=T.tag,Mi=T.result,ge(T,!0,N),zt=T.input.charCodeAt(T.position),(Je||T.line===Q)&&58===zt&&(Ue=!0,zt=T.input.charCodeAt(++T.position),ge(T,!0,N),Rr(T,N,1,!1,!0),Ki=T.result),ci?j(T,jt,Ci,Oi,Mi,Ki,Q,ft,xt):jt.push(Ue?j(T,null,Ci,Oi,Mi,Ki,Q,ft,xt):Mi),ge(T,!0,N),44===(zt=T.input.charCodeAt(T.position))?(z=!0,zt=T.input.charCodeAt(++T.position)):z=!1}sn(T,"unexpected end of the stream within a flow collection")}(T,Mi)?Fe=!0:(kt&&function(T,N){var z,Q,Fe,Ue,ft=1,xt=!1,kt=!1,jt=N,oe=0,ce=!1;if(124===(Ue=T.input.charCodeAt(T.position)))Q=!1;else{if(62!==Ue)return!1;Q=!0}for(T.kind="scalar",T.result="";0!==Ue;)if(43===(Ue=T.input.charCodeAt(++T.position))||45===Ue)1===ft?ft=43===Ue?3:2:sn(T,"repeat of a chomping mode identifier");else{if(!((Fe=cr(Ue))>=0))break;0===Fe?sn(T,"bad explicit indentation width of a block scalar; it cannot be less than one"):kt?sn(T,"repeat of an indentation width identifier"):(jt=N+Fe-1,kt=!0)}if(Go(Ue)){do{Ue=T.input.charCodeAt(++T.position)}while(Go(Ue));if(35===Ue)do{Ue=T.input.charCodeAt(++T.position)}while(!nr(Ue)&&0!==Ue)}for(;0!==Ue;){for(St(T),T.lineIndent=0,Ue=T.input.charCodeAt(T.position);(!kt||T.lineIndent<jt)&&32===Ue;)T.lineIndent++,Ue=T.input.charCodeAt(++T.position);if(!kt&&T.lineIndent>jt&&(jt=T.lineIndent),nr(Ue))oe++;else{if(T.lineIndent<jt){3===ft?T.result+=ae.repeat("\n",xt?1+oe:oe):1===ft&&xt&&(T.result+="\n");break}for(Q?Go(Ue)?(ce=!0,T.result+=ae.repeat("\n",xt?1+oe:oe)):ce?(ce=!1,T.result+=ae.repeat("\n",oe+1)):0===oe?xt&&(T.result+=" "):T.result+=ae.repeat("\n",oe):T.result+=ae.repeat("\n",xt?1+oe:oe),xt=!0,kt=!0,oe=0,z=T.position;!nr(Ue)&&0!==Ue;)Ue=T.input.charCodeAt(++T.position);K(T,z,T.position,!1)}}return!0}(T,Mi)||function(T,N){var z,Q,ft;if(39!==(z=T.input.charCodeAt(T.position)))return!1;for(T.kind="scalar",T.result="",T.position++,Q=ft=T.position;0!==(z=T.input.charCodeAt(T.position));)if(39===z){if(K(T,Q,T.position,!0),39!==(z=T.input.charCodeAt(++T.position)))return!0;Q=T.position,T.position++,ft=T.position}else nr(z)?(K(T,Q,ft,!0),ki(T,ge(T,!1,N)),Q=ft=T.position):T.position===T.lineStart&&ni(T)?sn(T,"unexpected end of the document within a single quoted scalar"):(T.position++,ft=T.position);sn(T,"unexpected end of the stream within a single quoted scalar")}(T,Mi)||function(T,N){var z,Q,ft,xt,kt,jt;if(34!==(jt=T.input.charCodeAt(T.position)))return!1;for(T.kind="scalar",T.result="",T.position++,z=Q=T.position;0!==(jt=T.input.charCodeAt(T.position));){if(34===jt)return K(T,z,T.position,!0),T.position++,!0;if(92===jt){if(K(T,z,T.position,!0),nr(jt=T.input.charCodeAt(++T.position)))ge(T,!1,N);else if(jt<256&&Po[jt])T.result+=Ss[jt],T.position++;else if((kt=fr(jt))>0){for(ft=kt,xt=0;ft>0;ft--)(kt=Jn(jt=T.input.charCodeAt(++T.position)))>=0?xt=(xt<<4)+kt:sn(T,"expected hexadecimal character");T.result+=Cs(xt),T.position++}else sn(T,"unknown escape sequence");z=Q=T.position}else nr(jt)?(K(T,z,Q,!0),ki(T,ge(T,!1,N)),z=Q=T.position):T.position===T.lineStart&&ni(T)?sn(T,"unexpected end of the document within a double quoted scalar"):(T.position++,Q=T.position)}sn(T,"unexpected end of the stream within a double quoted scalar")}(T,Mi)?Fe=!0:function(T){var N,z,Q;if(42!==(Q=T.input.charCodeAt(T.position)))return!1;for(Q=T.input.charCodeAt(++T.position),N=T.position;0!==Q&&!mo(Q)&&!kr(Q);)Q=T.input.charCodeAt(++T.position);return T.position===N&&sn(T,"name of an alias node must contain at least one character"),z=T.input.slice(N,T.position),is.call(T.anchorMap,z)||sn(T,'unidentified alias "'+z+'"'),T.result=T.anchorMap[z],ge(T,!0,-1),!0}(T)?(Fe=!0,(null!==T.tag||null!==T.anchor)&&sn(T,"alias node should not have any properties")):function(T,N,z){var ft,xt,kt,jt,oe,ce,Fe,ci,Ue=T.kind,Je=T.result;if(mo(ci=T.input.charCodeAt(T.position))||kr(ci)||35===ci||38===ci||42===ci||33===ci||124===ci||62===ci||39===ci||34===ci||37===ci||64===ci||96===ci||(63===ci||45===ci)&&(mo(ft=T.input.charCodeAt(T.position+1))||z&&kr(ft)))return!1;for(T.kind="scalar",T.result="",xt=kt=T.position,jt=!1;0!==ci;){if(58===ci){if(mo(ft=T.input.charCodeAt(T.position+1))||z&&kr(ft))break}else if(35===ci){if(mo(T.input.charCodeAt(T.position-1)))break}else{if(T.position===T.lineStart&&ni(T)||z&&kr(ci))break;if(nr(ci)){if(oe=T.line,ce=T.lineStart,Fe=T.lineIndent,ge(T,!1,-1),T.lineIndent>=N){jt=!0,ci=T.input.charCodeAt(T.position);continue}T.position=kt,T.line=oe,T.lineStart=ce,T.lineIndent=Fe;break}}jt&&(K(T,xt,kt,!1),ki(T,T.line-oe),xt=kt=T.position,jt=!1),Go(ci)||(kt=T.position+1),ci=T.input.charCodeAt(++T.position)}return K(T,xt,kt,!1),!!T.result||(T.kind=Ue,T.result=Je,!1)}(T,Mi,1===z)&&(Fe=!0,null===T.tag&&(T.tag="?")),null!==T.anchor&&(T.anchorMap[T.anchor]=T.result)):0===oe&&(Fe=jt&&lo(T,Oi))),null===T.tag)null!==T.anchor&&(T.anchorMap[T.anchor]=T.result);else if("?"===T.tag){for(null!==T.result&&"scalar"!==T.kind&&sn(T,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+T.kind+'"'),Ue=0,Je=T.implicitTypes.length;Ue<Je;Ue+=1)if((Ci=T.implicitTypes[Ue]).resolve(T.result)){T.result=Ci.construct(T.result),T.tag=Ci.tag,null!==T.anchor&&(T.anchorMap[T.anchor]=T.result);break}}else if("!"!==T.tag){if(is.call(T.typeMap[T.kind||"fallback"],T.tag))Ci=T.typeMap[T.kind||"fallback"][T.tag];else for(Ci=null,Ue=0,Je=(ci=T.typeMap.multi[T.kind||"fallback"]).length;Ue<Je;Ue+=1)if(T.tag.slice(0,ci[Ue].tag.length)===ci[Ue].tag){Ci=ci[Ue];break}Ci||sn(T,"unknown tag !<"+T.tag+">"),null!==T.result&&Ci.kind!==T.kind&&sn(T,"unacceptable node kind for !<"+T.tag+'> tag; it should be "'+Ci.kind+'", not "'+T.kind+'"'),Ci.resolve(T.result,T.tag)?(T.result=Ci.construct(T.result,T.tag),null!==T.anchor&&(T.anchorMap[T.anchor]=T.result)):sn(T,"cannot resolve a node with !<"+T.tag+"> explicit tag")}return null!==T.listener&&T.listener("close",T),null!==T.tag||null!==T.anchor||Fe}function Vs(T){var z,Q,ft,kt,N=T.position,xt=!1;for(T.version=null,T.checkLineBreaks=T.legacy,T.tagMap=Object.create(null),T.anchorMap=Object.create(null);0!==(kt=T.input.charCodeAt(T.position))&&(ge(T,!0,-1),kt=T.input.charCodeAt(T.position),!(T.lineIndent>0||37!==kt));){for(xt=!0,kt=T.input.charCodeAt(++T.position),z=T.position;0!==kt&&!mo(kt);)kt=T.input.charCodeAt(++T.position);for(ft=[],(Q=T.input.slice(z,T.position)).length<1&&sn(T,"directive name must not be less than one character in length");0!==kt;){for(;Go(kt);)kt=T.input.charCodeAt(++T.position);if(35===kt){do{kt=T.input.charCodeAt(++T.position)}while(0!==kt&&!nr(kt));break}if(nr(kt))break;for(z=T.position;0!==kt&&!mo(kt);)kt=T.input.charCodeAt(++T.position);ft.push(T.input.slice(z,T.position))}0!==kt&&St(T),is.call(Et,Q)?Et[Q](T,Q,ft):Nr(T,'unknown document directive "'+Q+'"')}ge(T,!0,-1),0===T.lineIndent&&45===T.input.charCodeAt(T.position)&&45===T.input.charCodeAt(T.position+1)&&45===T.input.charCodeAt(T.position+2)?(T.position+=3,ge(T,!0,-1)):xt&&sn(T,"directives end mark is expected"),Rr(T,T.lineIndent-1,4,!1,!0),ge(T,!0,-1),T.checkLineBreaks&&ir.test(T.input.slice(N,T.position))&&Nr(T,"non-ASCII line breaks are interpreted as content"),T.documents.push(T.result),T.position===T.lineStart&&ni(T)?46===T.input.charCodeAt(T.position)&&(T.position+=3,ge(T,!0,-1)):T.position<T.length-1&&sn(T,"end of the stream or a document separator is expected")}function Er(T,N){N=N||{},0!==(T=String(T)).length&&(10!==T.charCodeAt(T.length-1)&&13!==T.charCodeAt(T.length-1)&&(T+="\n"),65279===T.charCodeAt(0)&&(T=T.slice(1)));var z=new Hs(T,N),Q=T.indexOf("\0");for(-1!==Q&&(z.position=Q,sn(z,"null byte is not allowed in input")),z.input+="\0";32===z.input.charCodeAt(z.position);)z.lineIndent+=1,z.position+=1;for(;z.position<z.length-1;)Vs(z);return z.documents}var Bt={loadAll:function(T,N,z){null!==N&&"object"==typeof N&&void 0===z&&(z=N,N=null);var Q=Er(T,z);if("function"!=typeof N)return Q;for(var ft=0,xt=Q.length;ft<xt;ft+=1)N(Q[ft])},load:function(T,N){var z=Er(T,N);if(0!==z.length){if(1===z.length)return z[0];throw new Te("expected a single document in the stream, but found more")}}},U=Object.prototype.toString,X=Object.prototype.hasOwnProperty,zo={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},os=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],ya=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ji(T){var N,z,Q;if(N=T.toString(16).toUpperCase(),T<=255)z="x",Q=2;else if(T<=65535)z="u",Q=4;else{if(!(T<=4294967295))throw new Te("code point within a string may not be greater than 0xFFFFFFFF");z="U",Q=8}return"\\"+z+ae.repeat("0",Q-N.length)+N}function An(T){this.schema=T.schema||Bs,this.indent=Math.max(1,T.indent||2),this.noArrayIndent=T.noArrayIndent||!1,this.skipInvalid=T.skipInvalid||!1,this.flowLevel=ae.isNothing(T.flowLevel)?-1:T.flowLevel,this.styleMap=function(T,N){var z,Q,ft,xt,kt,jt,oe;if(null===N)return{};for(z={},ft=0,xt=(Q=Object.keys(N)).length;ft<xt;ft+=1)kt=Q[ft],jt=String(N[kt]),"!!"===kt.slice(0,2)&&(kt="tag:yaml.org,2002:"+kt.slice(2)),(oe=T.compiledTypeMap.fallback[kt])&&X.call(oe.styleAliases,jt)&&(jt=oe.styleAliases[jt]),z[kt]=jt;return z}(this.schema,T.styles||null),this.sortKeys=T.sortKeys||!1,this.lineWidth=T.lineWidth||80,this.noRefs=T.noRefs||!1,this.noCompatMode=T.noCompatMode||!1,this.condenseFlow=T.condenseFlow||!1,this.quotingType='"'===T.quotingType?2:1,this.forceQuotes=T.forceQuotes||!1,this.replacer="function"==typeof T.replacer?T.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function On(T,N){for(var kt,z=ae.repeat(" ",N),Q=0,ft=-1,xt="",jt=T.length;Q<jt;)-1===(ft=T.indexOf("\n",Q))?(kt=T.slice(Q),Q=jt):(kt=T.slice(Q,ft+1),Q=ft+1),kt.length&&"\n"!==kt&&(xt+=z),xt+=kt;return xt}function Pr(T,N){return"\n"+ae.repeat(" ",T.indent*N)}function Fr(T){return 32===T||9===T}function kn(T){return 32<=T&&T<=126||161<=T&&T<=55295&&8232!==T&&8233!==T||57344<=T&&T<=65533&&65279!==T||65536<=T&&T<=1114111}function Ga(T){return kn(T)&&65279!==T&&13!==T&&10!==T}function Tr(T,N,z){var Q=Ga(T),ft=Q&&!Fr(T);return(z?Q:Q&&44!==T&&91!==T&&93!==T&&123!==T&&125!==T)&&35!==T&&!(58===N&&!ft)||Ga(N)&&!Fr(N)&&35===T||58===N&&ft}function Qo(T,N){var Q,z=T.charCodeAt(N);return z>=55296&&z<=56319&&N+1<T.length&&(Q=T.charCodeAt(N+1))>=56320&&Q<=57343?1024*(z-55296)+Q-56320+65536:z}function Ws(T){return/^\n* /.test(T)}function el(T,N,z,Q,ft){T.dump=function(){if(0===N.length)return 2===T.quotingType?'""':"''";if(!T.noCompatMode&&(-1!==os.indexOf(N)||ya.test(N)))return 2===T.quotingType?'"'+N+'"':"'"+N+"'";var xt=T.indent*Math.max(1,z),kt=-1===T.lineWidth?-1:Math.max(Math.min(T.lineWidth,40),T.lineWidth-xt);switch(function(T,N,z,Q,ft,xt,kt,jt){var oe,ce=0,Fe=null,Ue=!1,Je=!1,ci=-1!==Q,Ci=-1,Mi=function(T){return kn(T)&&65279!==T&&!Fr(T)&&45!==T&&63!==T&&58!==T&&44!==T&&91!==T&&93!==T&&123!==T&&125!==T&&35!==T&&38!==T&&42!==T&&33!==T&&124!==T&&61!==T&&62!==T&&39!==T&&34!==T&&37!==T&&64!==T&&96!==T}(Qo(T,0))&&function(T){return!Fr(T)&&58!==T}(Qo(T,T.length-1));if(N||kt)for(oe=0;oe<T.length;ce>=65536?oe+=2:oe++){if(!kn(ce=Qo(T,oe)))return 5;Mi=Mi&&Tr(ce,Fe,jt),Fe=ce}else{for(oe=0;oe<T.length;ce>=65536?oe+=2:oe++){if(10===(ce=Qo(T,oe)))Ue=!0,ci&&(Je=Je||oe-Ci-1>Q&&" "!==T[Ci+1],Ci=oe);else if(!kn(ce))return 5;Mi=Mi&&Tr(ce,Fe,jt),Fe=ce}Je=Je||ci&&oe-Ci-1>Q&&" "!==T[Ci+1]}return Ue||Je?z>9&&Ws(T)?5:kt?2===xt?5:2:Je?4:3:!Mi||kt||ft(T)?2===xt?5:2:1}(N,Q||T.flowLevel>-1&&z>=T.flowLevel,T.indent,kt,function(ce){return function(T,N){var z,Q;for(z=0,Q=T.implicitTypes.length;z<Q;z+=1)if(T.implicitTypes[z].resolve(N))return!0;return!1}(T,ce)},T.quotingType,T.forceQuotes&&!Q,ft)){case 1:return N;case 2:return"'"+N.replace(/'/g,"''")+"'";case 3:return"|"+Is(N,T.indent)+ml(On(N,xt));case 4:return">"+Is(N,T.indent)+ml(On(function(T,N){for(var xt,kt,z=/(\n+)([^\n]*)/g,Q=(ce=void 0,ce=T.indexOf("\n"),z.lastIndex=ce=-1!==ce?ce:T.length,js(T.slice(0,ce),N)),ft="\n"===T[0]||" "===T[0];kt=z.exec(T);){var oe=kt[2];xt=" "===oe[0],Q+=kt[1]+(ft||xt||""===oe?"":"\n")+js(oe,N),ft=xt}var ce;return Q}(N,kt),xt));case 5:return'"'+function(T){for(var Q,N="",z=0,ft=0;ft<T.length;z>=65536?ft+=2:ft++)z=Qo(T,ft),!(Q=zo[z])&&kn(z)?(N+=T[ft],z>=65536&&(N+=T[ft+1])):N+=Q||ji(z);return N}(N)+'"';default:throw new Te("impossible error: invalid scalar style")}}()}function Is(T,N){var z=Ws(T)?String(N):"",Q="\n"===T[T.length-1];return z+(!Q||"\n"!==T[T.length-2]&&"\n"!==T?Q?"":"-":"+")+"\n"}function ml(T){return"\n"===T[T.length-1]?T.slice(0,-1):T}function js(T,N){if(""===T||" "===T[0])return T;for(var Q,xt,z=/ [^ ]/g,ft=0,kt=0,jt=0,oe="";Q=z.exec(T);)(jt=Q.index)-ft>N&&(oe+="\n"+T.slice(ft,xt=kt>ft?kt:jt),ft=xt+1),kt=jt;return oe+="\n",(oe+=T.length-ft>N&&kt>ft?T.slice(ft,kt)+"\n"+T.slice(kt+1):T.slice(ft)).slice(1)}function ca(T,N,z){var Q,ft,xt,kt,jt,oe;for(xt=0,kt=(ft=z?T.explicitTypes:T.implicitTypes).length;xt<kt;xt+=1)if(((jt=ft[xt]).instanceOf||jt.predicate)&&(!jt.instanceOf||"object"==typeof N&&N instanceof jt.instanceOf)&&(!jt.predicate||jt.predicate(N))){if(T.tag=z?jt.multi&&jt.representName?jt.representName(N):jt.tag:"?",jt.represent){if(oe=T.styleMap[jt.tag]||jt.defaultStyle,"[object Function]"===U.call(jt.represent))Q=jt.represent(N,oe);else{if(!X.call(jt.represent,oe))throw new Te("!<"+jt.tag+'> tag resolver accepts not "'+oe+'" style');Q=jt.represent[oe](N,oe)}T.dump=Q}return!0}return!1}function Kr(T,N,z,Q,ft,xt,kt){T.tag=null,T.dump=z,ca(T,z,!1)||ca(T,z,!0);var ce,jt=U.call(T.dump),oe=Q;Q&&(Q=T.flowLevel<0||T.flowLevel>N);var Ue,Je,Fe="[object Object]"===jt||"[object Array]"===jt;if(Fe&&(Je=-1!==(Ue=T.duplicates.indexOf(z))),(null!==T.tag&&"?"!==T.tag||Je||2!==T.indent&&N>0)&&(ft=!1),Je&&T.usedDuplicates[Ue])T.dump="*ref_"+Ue;else{if(Fe&&Je&&!T.usedDuplicates[Ue]&&(T.usedDuplicates[Ue]=!0),"[object Object]"===jt)Q&&0!==Object.keys(T.dump).length?(function(T,N,z,Q){var jt,oe,ce,Fe,Ue,Je,ft="",xt=T.tag,kt=Object.keys(z);if(!0===T.sortKeys)kt.sort();else if("function"==typeof T.sortKeys)kt.sort(T.sortKeys);else if(T.sortKeys)throw new Te("sortKeys must be a boolean or a function");for(jt=0,oe=kt.length;jt<oe;jt+=1)Je="",(!Q||""!==ft)&&(Je+=Pr(T,N)),Fe=z[ce=kt[jt]],T.replacer&&(Fe=T.replacer.call(z,ce,Fe)),Kr(T,N+1,ce,!0,!0,!0)&&((Ue=null!==T.tag&&"?"!==T.tag||T.dump&&T.dump.length>1024)&&(T.dump&&10===T.dump.charCodeAt(0)?Je+="?":Je+="? "),Je+=T.dump,Ue&&(Je+=Pr(T,N)),Kr(T,N+1,Fe,!0,Ue)&&(T.dump&&10===T.dump.charCodeAt(0)?Je+=":":Je+=": ",ft+=Je+=T.dump));T.tag=xt,T.dump=ft||"{}"}(T,N,T.dump,ft),Je&&(T.dump="&ref_"+Ue+T.dump)):(function(T,N,z){var kt,jt,oe,ce,Fe,Q="",ft=T.tag,xt=Object.keys(z);for(kt=0,jt=xt.length;kt<jt;kt+=1)Fe="",""!==Q&&(Fe+=", "),T.condenseFlow&&(Fe+='"'),ce=z[oe=xt[kt]],T.replacer&&(ce=T.replacer.call(z,oe,ce)),Kr(T,N,oe,!1,!1)&&(T.dump.length>1024&&(Fe+="? "),Fe+=T.dump+(T.condenseFlow?'"':"")+":"+(T.condenseFlow?"":" "),Kr(T,N,ce,!1,!1)&&(Q+=Fe+=T.dump));T.tag=ft,T.dump="{"+Q+"}"}(T,N,T.dump),Je&&(T.dump="&ref_"+Ue+" "+T.dump));else if("[object Array]"===jt)Q&&0!==T.dump.length?(function(T,N,z,Q){var kt,jt,oe,ft="",xt=T.tag;for(kt=0,jt=z.length;kt<jt;kt+=1)oe=z[kt],T.replacer&&(oe=T.replacer.call(z,String(kt),oe)),(Kr(T,N+1,oe,!0,!0,!1,!0)||void 0===oe&&Kr(T,N+1,null,!0,!0,!1,!0))&&((!Q||""!==ft)&&(ft+=Pr(T,N)),T.dump&&10===T.dump.charCodeAt(0)?ft+="-":ft+="- ",ft+=T.dump);T.tag=xt,T.dump=ft||"[]"}(T,T.noArrayIndent&&!kt&&N>0?N-1:N,T.dump,ft),Je&&(T.dump="&ref_"+Ue+T.dump)):(function(T,N,z){var xt,kt,jt,Q="",ft=T.tag;for(xt=0,kt=z.length;xt<kt;xt+=1)jt=z[xt],T.replacer&&(jt=T.replacer.call(z,String(xt),jt)),(Kr(T,N,jt,!1,!1)||void 0===jt&&Kr(T,N,null,!1,!1))&&(""!==Q&&(Q+=","+(T.condenseFlow?"":" ")),Q+=T.dump);T.tag=ft,T.dump="["+Q+"]"}(T,N,T.dump),Je&&(T.dump="&ref_"+Ue+" "+T.dump));else{if("[object String]"!==jt){if("[object Undefined]"===jt)return!1;if(T.skipInvalid)return!1;throw new Te("unacceptable kind of an object to dump "+jt)}"?"!==T.tag&&el(T,T.dump,N,xt,oe)}null!==T.tag&&"?"!==T.tag&&(ce=encodeURI("!"===T.tag[0]?T.tag.slice(1):T.tag).replace(/!/g,"%21"),ce="!"===T.tag[0]?"!"+ce:"tag:yaml.org,2002:"===ce.slice(0,18)?"!!"+ce.slice(18):"!<"+ce+">",T.dump=ce+" "+T.dump)}return!0}function Ia(T,N){var ft,xt,z=[],Q=[];for(ss(T,z,Q),ft=0,xt=Q.length;ft<xt;ft+=1)N.duplicates.push(z[Q[ft]]);N.usedDuplicates=new Array(xt)}function ss(T,N,z){var Q,ft,xt;if(null!==T&&"object"==typeof T)if(-1!==(ft=N.indexOf(T)))-1===z.indexOf(ft)&&z.push(ft);else if(N.push(T),Array.isArray(T))for(ft=0,xt=T.length;ft<xt;ft+=1)ss(T[ft],N,z);else for(ft=0,xt=(Q=Object.keys(T)).length;ft<xt;ft+=1)ss(T[Q[ft]],N,z)}function Ul(T,N){return function(){throw new Error("Function yaml."+T+" is removed in js-yaml 4. Use yaml."+N+" instead, which is now safe by default.")}}const ja={Type:Hi,Schema:Re,FAILSAFE_SCHEMA:Xi,JSON_SCHEMA:Oo,CORE_SCHEMA:ts,DEFAULT_SCHEMA:Bs,load:Bt.load,loadAll:Bt.loadAll,dump:function(T,N){var z=new An(N=N||{});z.noRefs||Ia(T,z);var Q=T;return z.replacer&&(Q=z.replacer.call({"":Q},"",Q)),Kr(z,0,Q,!0,!0)?z.dump+"\n":""},YAMLException:Te,types:{binary:ho,float:hr,map:_i,null:mr,pairs:Gr,set:Ts,timestamp:un,bool:eo,int:Or,merge:bo,omap:oo,seq:ze,str:fe},safeLoad:Ul("safeLoad","load"),safeLoadAll:Ul("safeLoadAll","loadAll"),safeDump:Ul("safeDump","dump")},Ms="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,{FormData:Dr,Blob:Cr,File:za}=Ms;function ha(T){return function(T){if(lt(T))return tt(T)}(T)||function(T){if(void 0!==ct&&null!=yt(T)||null!=T["@@iterator"])return bt(T)}(T)||Rt(T)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Wl=m(36028),Jr=m.n(Wl),Ea=function(N){return":/?#[]@!$&'()*+,;=".indexOf(N)>-1},Aa=function(N){return/^[a-z0-9\-._~]+$/i.test(N)};function da(T){var N,z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Q=z.escape,ft=arguments.length>2?arguments[2]:void 0;return"number"==typeof T&&(T=T.toString()),"string"==typeof T&&T.length&&Q?ft?JSON.parse(T):Xt()(N=ha(T)).call(N,function(xt){var kt,jt;if(Aa(xt)||Ea(xt)&&"unsafe"===Q)return xt;var oe=new TextEncoder;return Xt()(kt=Xt()(jt=Ve()(oe.encode(xt))).call(jt,function(Fe){var Ue;return Jr()(Ue="0".concat(Fe.toString(16).toUpperCase())).call(Ue,-2)})).call(kt,function(Fe){return"%".concat(Fe)}).join("")}).join(""):T}function Os(T){var N=T.value;return Array.isArray(N)?function(T){var N=T.key,z=T.value,Q=T.style,ft=T.explode,xt=T.escape,kt=function(Ue){return da(Ue,{escape:xt})};if("simple"===Q)return Xt()(z).call(z,function(Fe){return kt(Fe)}).join(",");if("label"===Q)return".".concat(Xt()(z).call(z,function(Fe){return kt(Fe)}).join("."));if("matrix"===Q)return Xt()(z).call(z,function(Fe){return kt(Fe)}).reduce(function(Fe,Ue){var Je,ci,Ci;return!Fe||ft?ie()(ci=ie()(Ci="".concat(Fe||"",";")).call(Ci,N,"=")).call(ci,Ue):ie()(Je="".concat(Fe,",")).call(Je,Ue)},"");if("form"===Q){var jt=ft?"&".concat(N,"="):",";return Xt()(z).call(z,function(Fe){return kt(Fe)}).join(jt)}if("spaceDelimited"===Q){var oe=ft?"".concat(N,"="):"";return Xt()(z).call(z,function(Fe){return kt(Fe)}).join(" ".concat(oe))}if("pipeDelimited"===Q){var ce=ft?"".concat(N,"="):"";return Xt()(z).call(z,function(Fe){return kt(Fe)}).join("|".concat(ce))}}(T):"object"===nt(N)?function(T){var N=T.key,z=T.value,Q=T.style,ft=T.explode,xt=T.escape,kt=function(ce){return da(ce,{escape:xt})},jt=Me()(z);return"simple"===Q?jt.reduce(function(oe,ce){var Fe,Ue,Je,ci=kt(z[ce]),Ci=ft?"=":",",Mi=oe?"".concat(oe,","):"";return ie()(Fe=ie()(Ue=ie()(Je="".concat(Mi)).call(Je,ce)).call(Ue,Ci)).call(Fe,ci)},""):"label"===Q?jt.reduce(function(oe,ce){var Fe,Ue,Je,ci=kt(z[ce]),Ci=ft?"=":".",Mi=oe?"".concat(oe,"."):".";return ie()(Fe=ie()(Ue=ie()(Je="".concat(Mi)).call(Je,ce)).call(Ue,Ci)).call(Fe,ci)},""):"matrix"===Q&&ft?jt.reduce(function(oe,ce){var Fe,Ue,Je=kt(z[ce]),ci=oe?"".concat(oe,";"):";";return ie()(Fe=ie()(Ue="".concat(ci)).call(Ue,ce,"=")).call(Fe,Je)},""):"matrix"===Q?jt.reduce(function(oe,ce){var Fe,Ue,Je=kt(z[ce]),ci=oe?"".concat(oe,","):";".concat(N,"=");return ie()(Fe=ie()(Ue="".concat(ci)).call(Ue,ce,",")).call(Fe,Je)},""):"form"===Q?jt.reduce(function(oe,ce){var Fe,Ue,Je,ci,Ci=kt(z[ce]),Mi=oe?ie()(Fe="".concat(oe)).call(Fe,ft?"&":","):"",Oi=ft?"=":",";return ie()(Ue=ie()(Je=ie()(ci="".concat(Mi)).call(ci,ce)).call(Je,Oi)).call(Ue,Ci)},""):void 0}(T):function(T){var kt,N=T.key,z=T.value,Q=T.style,ft=T.escape,xt=function(oe){return da(oe,{escape:ft})};return"simple"===Q?xt(z):"label"===Q?".".concat(xt(z)):"matrix"===Q?ie()(kt=";".concat(N,"=")).call(kt,xt(z)):"form"===Q||"deepObject"===Q?xt(z):void 0}(T)}const Wc=function(N,z){z.body=N};var dc={serializeRes:fc,mergeInQueryOrForm:Ys};function pc(T){return jl.apply(this,arguments)}function jl(){return jl=me(Ge().mark(function T(N){var z,ft,xt,kt,jt=arguments;return Ge().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(z=jt.length>1&&void 0!==jt[1]?jt[1]:{},"object"===nt(N)&&(N=(z=N).url),z.headers=z.headers||{},dc.mergeInQueryOrForm(z),z.headers&&Me()(z.headers).forEach(function(Fe){var Ue=z.headers[Fe];"string"==typeof Ue&&(z.headers[Fe]=Ue.replace(/\n+/g," "))}),!z.requestInterceptor){ce.next=12;break}return ce.next=8,z.requestInterceptor(z);case 8:if(ce.t0=ce.sent,ce.t0){ce.next=11;break}ce.t0=z;case 11:z=ce.t0;case 12:return/multipart\/form-data/i.test(z.headers["content-type"]||z.headers["Content-Type"])&&z.body instanceof Dr&&(delete z.headers["content-type"],delete z.headers["Content-Type"]),ce.prev=14,ce.next=17,(z.userFetch||fetch)(z.url,z);case 17:return ft=ce.sent,ce.next=20,dc.serializeRes(ft,N,z);case 20:if(ft=ce.sent,!z.responseInterceptor){ce.next=28;break}return ce.next=24,z.responseInterceptor(ft);case 24:if(ce.t1=ce.sent,ce.t1){ce.next=27;break}ce.t1=ft;case 27:ft=ce.t1;case 28:ce.next=39;break;case 30:if(ce.prev=30,ce.t2=ce.catch(14),ft){ce.next=34;break}throw ce.t2;case 34:throw(xt=new Error(ft.statusText||"response status is ".concat(ft.status))).status=ft.status,xt.statusCode=ft.status,xt.responseError=ce.t2,xt;case 39:if(ft.ok){ce.next=45;break}throw(kt=new Error(ft.statusText||"response status is ".concat(ft.status))).status=ft.status,kt.statusCode=ft.status,kt.response=ft,kt;case 45:return ce.abrupt("return",ft);case 46:case"end":return ce.stop()}},T,null,[[14,30]])})),jl.apply(this,arguments)}var yu=function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(json|xml|yaml|text)\b/.test(N)};function Eu(T,N){return N&&(0===N.indexOf("application/json")||N.indexOf("+json")>0)?JSON.parse(T):ja.load(T)}function fc(T,N){var z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Q=z.loadSpec,ft=void 0!==Q&&Q,xt={ok:T.ok,url:T.url||N,status:T.status,statusText:T.statusText,headers:jc(T.headers)},kt=xt.headers["content-type"],jt=ft||yu(kt),oe=jt?T.text:T.blob||T.buffer;return oe.call(T).then(function(ce){if(xt.text=ce,xt.data=ce,jt)try{var Fe=Eu(ce,kt);xt.body=Fe,xt.obj=Fe}catch(Ue){xt.parseError=Ue}return xt})}function vl(T){return Qe()(T).call(T,", ")?T.split(", "):T}function jc(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"!=typeof pe()(T)?{}:Ve()(pe()(T).call(T)).reduce(function(N,z){var Q=Vt(z,2);return N[Q[0]]=vl(Q[1]),N},{})}function Fo(T,N){return!N&&"undefined"!=typeof navigator&&(N=navigator),N&&"ReactNative"===N.product?!(!T||"object"!==nt(T)||"string"!=typeof T.uri):!!(void 0!==za&&T instanceof za||void 0!==Cr&&T instanceof Cr||ArrayBuffer.isView(T))||null!==T&&"object"===nt(T)&&"function"==typeof T.pipe}function Oa(T,N){return Array.isArray(T)&&T.some(function(z){return Fo(z,N)})}var rl={form:",",spaceDelimited:"%20",pipeDelimited:"|"},ls={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function gc(T,N){var z=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Q=N.collectionFormat,ft=N.allowEmptyValue,xt=N.serializationOption,kt=N.encoding,jt="object"!==nt(N)||Array.isArray(N)?N:N.value,oe=z?function(Ci){return Ci.toString()}:function(Ci){return encodeURIComponent(Ci)},ce=oe(T);if(void 0===jt&&ft)return[[ce,""]];if(Fo(jt)||Oa(jt))return[[ce,jt]];if(xt)return ms(T,jt,z,xt);if(kt){if([nt(kt.style),nt(kt.explode),nt(kt.allowReserved)].some(function(Ci){return"undefined"!==Ci})){var Fe=kt.style,Ue=kt.explode,Je=kt.allowReserved;return ms(T,jt,z,{style:Fe,explode:Ue,allowReserved:Je})}if(kt.contentType){if("application/json"===kt.contentType){var ci="string"==typeof jt?jt:Ke()(jt);return[[ce,oe(ci)]]}return[[ce,oe(jt.toString())]]}return"object"!==nt(jt)?[[ce,oe(jt)]]:Array.isArray(jt)&&jt.every(function(Ci){return"object"!==nt(Ci)})?[[ce,Xt()(jt).call(jt,oe).join(",")]]:[[ce,oe(Ke()(jt))]]}return"object"!==nt(jt)?[[ce,oe(jt)]]:Array.isArray(jt)?"multi"===Q?[[ce,Xt()(jt).call(jt,oe)]]:[[ce,Xt()(jt).call(jt,oe).join(ls[Q||"csv"])]]:[[ce,""]]}function ms(T,N,z,Q){var ft,Fe,Ue,xt=Q.style||"form",kt=void 0===Q.explode?"form"===xt:Q.explode,jt=!z&&(Q&&Q.allowReserved?"unsafe":"reserved"),oe=function(ci){return da(ci,{escape:jt})},ce=z?function(Je){return Je}:function(Je){return da(Je,{escape:jt})};return"object"!==nt(N)?[[ce(T),oe(N)]]:Array.isArray(N)?kt?[[ce(T),Xt()(N).call(N,oe)]]:[[ce(T),Xt()(N).call(N,oe).join(rl[xt])]]:"deepObject"===xt?Xt()(Fe=Me()(N)).call(Fe,function(Je){var ci;return[ce(ie()(ci="".concat(T,"[")).call(ci,Je,"]")),oe(N[Je])]}):kt?Xt()(Ue=Me()(N)).call(Ue,function(Je){return[ce(Je),oe(N[Je])]}):[[ce(T),Xt()(ft=Me()(N)).call(ft,function(Je){var ci;return[ie()(ci="".concat(ce(Je),",")).call(ci,oe(N[Je]))]}).join(",")]]}function zs(T){return Ht()(T).reduce(function(N,z){var jt,Q=Vt(z,2),kt=mt(gc(Q[0],Q[1],!0));try{for(kt.s();!(jt=kt.n()).done;){var oe=Vt(jt.value,2),ce=oe[0],Fe=oe[1];if(Array.isArray(Fe)){var Je,Ue=mt(Fe);try{for(Ue.s();!(Je=Ue.n()).done;){var ci=Je.value;if(ArrayBuffer.isView(ci)){var Ci=new Cr([ci]);N.append(ce,Ci)}else N.append(ce,ci)}}catch(Oi){Ue.e(Oi)}finally{Ue.f()}}else if(ArrayBuffer.isView(Fe)){var Mi=new Cr([Fe]);N.append(ce,Mi)}else N.append(ce,Fe)}}catch(Oi){kt.e(Oi)}finally{kt.f()}return N},new Dr)}function zl(T){var N=Me()(T).reduce(function(z,Q){var xt,ft=mt(gc(Q,T[Q]));try{for(ft.s();!(xt=ft.n()).done;){var kt=Vt(xt.value,2);z[kt[0]]=kt[1]}}catch(ce){ft.e(ce)}finally{ft.f()}return z},{});return Mt().stringify(N,{encode:!1,indices:!1})||""}function Ys(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},N=T.url,z=void 0===N?"":N,Q=T.query,ft=T.form,xt=function(){for(var zt=arguments.length,Dn=new Array(zt),Qi=0;Qi<zt;Qi++)Dn[Qi]=arguments[Qi];var wn=Yt()(Dn).call(Dn,function(wo){return wo}).join("&");return wn?"?".concat(wn):""};if(ft){var kt=Me()(ft).some(function(Ki){var zt=ft[Ki].value;return Fo(zt)||Oa(zt)}),jt=T.headers["content-type"]||T.headers["Content-Type"];if(kt||/multipart\/form-data/i.test(jt)){var oe=zs(T.form);Wc(oe,T)}else T.body=zl(ft);delete T.form}if(Q){var ce=z.split("?"),Fe=Vt(ce,2),Ue=Fe[0],Je=Fe[1],ci="";if(Je){var Ci=Mt().parse(Je),Mi=Me()(Q);Mi.forEach(function(Ki){return delete Ci[Ki]}),ci=Mt().stringify(Ci,{encode:!0})}var Oi=xt(ci,zl(Q));T.url=Ue+Oi,delete T.query}return T}function mc(T,N){if(!(T instanceof N))throw new TypeError("Cannot call a class as a function")}function Tu(T,N){for(var z=0;z<N.length;z++){var Q=N[z];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),O(T,Q.key,Q)}}function Xl(T,N,z){return N&&Tu(T.prototype,N),z&&Tu(T,z),T}var T,zc=m(20265),Yc=m.n(zc),Cu=m(2204),Ir=m.n(Cu),sl=m(35644),al=m.n(sl),sh=(T=function(N,z){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,ft){Q.__proto__=ft}||function(Q,ft){for(var xt in ft)ft.hasOwnProperty(xt)&&(Q[xt]=ft[xt])})(N,z)},function(N,z){function Q(){this.constructor=N}T(N,z),N.prototype=null===z?Object.create(z):(Q.prototype=z.prototype,new Q)}),xa=Object.prototype.hasOwnProperty;function _c(T,N){return xa.call(T,N)}function vc(T){if(Array.isArray(T)){for(var z=new Array(T.length),N=0;N<z.length;N++)z[N]=""+N;return z}if(Object.keys)return Object.keys(T);for(var Q in z=[],T)_c(T,Q)&&z.push(Q);return z}function Mr(T){switch(typeof T){case"object":return JSON.parse(JSON.stringify(T));case"undefined":return null;default:return T}}function Kl(T){for(var Q,N=0,z=T.length;N<z;){if(!((Q=T.charCodeAt(N))>=48&&Q<=57))return!1;N++}return!0}function Gn(T){return-1===T.indexOf("/")&&-1===T.indexOf("~")?T:T.replace(/~/g,"~0").replace(/\//g,"~1")}function bc(T){return T.replace(/~1/g,"/").replace(/~0/g,"~")}function Xc(T){if(void 0===T)return!0;if(T)if(Array.isArray(T)){for(var N=0,z=T.length;N<z;N++)if(Xc(T[N]))return!0}else if("object"==typeof T){var Q=vc(T),ft=Q.length;for(N=0;N<ft;N++)if(Xc(T[Q[N]]))return!0}return!1}function ka(T,N){var z=[T];for(var Q in N){var ft="object"==typeof N[Q]?JSON.stringify(N[Q],null,2):N[Q];void 0!==ft&&z.push(Q+": "+ft)}return z.join("\n")}var Jl=function(T){function N(z,Q,ft,xt,kt){var jt=this.constructor,oe=T.call(this,ka(z,{name:Q,index:ft,operation:xt,tree:kt}))||this;return oe.name=Q,oe.index=ft,oe.operation=xt,oe.tree=kt,Object.setPrototypeOf(oe,jt.prototype),oe.message=ka(z,{name:Q,index:ft,operation:xt,tree:kt}),oe}return sh(N,T),N}(Error),Yo=Jl,Su=Mr,Ya={add:function(T,N,z){return T[N]=this.value,{newDocument:z}},remove:function(T,N,z){var Q=T[N];return delete T[N],{newDocument:z,removed:Q}},replace:function(T,N,z){var Q=T[N];return T[N]=this.value,{newDocument:z,removed:Q}},move:function(T,N,z){var Q=Ta(z,this.path);Q&&(Q=Mr(Q));var ft=xs(z,{op:"remove",path:this.from}).removed;return xs(z,{op:"add",path:this.path,value:ft}),{newDocument:z,removed:Q}},copy:function(T,N,z){var Q=Ta(z,this.from);return xs(z,{op:"add",path:this.path,value:Mr(Q)}),{newDocument:z}},test:function(T,N,z){return{newDocument:z,test:yl(T[N],this.value)}},_get:function(T,N,z){return this.value=T[N],{newDocument:z}}},Kc={add:function(T,N,z){return Kl(N)?T.splice(N,0,this.value):T[N]=this.value,{newDocument:z,index:N}},remove:function(T,N,z){return{newDocument:z,removed:T.splice(N,1)[0]}},replace:function(T,N,z){var Q=T[N];return T[N]=this.value,{newDocument:z,removed:Q}},move:Ya.move,copy:Ya.copy,test:Ya.test,_get:Ya._get};function Ta(T,N){if(""==N)return T;var z={op:"_get",path:N};return xs(T,z),z.value}function xs(T,N,z,Q,ft,xt){if(void 0===z&&(z=!1),void 0===Q&&(Q=!0),void 0===ft&&(ft=!0),void 0===xt&&(xt=0),z&&("function"==typeof z?z(N,0,T,N.path):bl(N,0)),""===N.path){var kt={newDocument:T};if("add"===N.op)return kt.newDocument=N.value,kt;if("replace"===N.op)return kt.newDocument=N.value,kt.removed=T,kt;if("move"===N.op||"copy"===N.op)return kt.newDocument=Ta(T,N.from),"move"===N.op&&(kt.removed=T),kt;if("test"===N.op){if(kt.test=yl(T,N.value),!1===kt.test)throw new Yo("Test operation failed","TEST_OPERATION_FAILED",xt,N,T);return kt.newDocument=T,kt}if("remove"===N.op)return kt.removed=T,kt.newDocument=null,kt;if("_get"===N.op)return N.value=T,kt;if(z)throw new Yo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",xt,N,T);return kt}Q||(T=Mr(T));var oe=(N.path||"").split("/"),ce=T,Fe=1,Ue=oe.length,Je=void 0,ci=void 0,Ci=void 0;for(Ci="function"==typeof z?z:bl;;){if((ci=oe[Fe])&&-1!=ci.indexOf("~")&&(ci=bc(ci)),ft&&"__proto__"==ci)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(z&&void 0===Je&&(void 0===ce[ci]?Je=oe.slice(0,Fe).join("/"):Fe==Ue-1&&(Je=N.path),void 0!==Je&&Ci(N,0,T,Je)),Fe++,Array.isArray(ce)){if("-"===ci)ci=ce.length;else{if(z&&!Kl(ci))throw new Yo("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",xt,N,T);Kl(ci)&&(ci=~~ci)}if(Fe>=Ue){if(z&&"add"===N.op&&ci>ce.length)throw new Yo("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",xt,N,T);if(!1===(kt=Kc[N.op].call(N,ce,ci,T)).test)throw new Yo("Test operation failed","TEST_OPERATION_FAILED",xt,N,T);return kt}}else if(Fe>=Ue){if(!1===(kt=Ya[N.op].call(N,ce,ci,T)).test)throw new Yo("Test operation failed","TEST_OPERATION_FAILED",xt,N,T);return kt}if(ce=ce[ci],z&&Fe<Ue&&(!ce||"object"!=typeof ce))throw new Yo("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",xt,N,T)}}function ks(T,N,z,Q,ft){if(void 0===Q&&(Q=!0),void 0===ft&&(ft=!0),z&&!Array.isArray(N))throw new Yo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");Q||(T=Mr(T));for(var xt=new Array(N.length),kt=0,jt=N.length;kt<jt;kt++)xt[kt]=xs(T,N[kt],z,!0,ft,kt),T=xt[kt].newDocument;return xt.newDocument=T,xt}function Ec(T,N,z){var Q=xs(T,N);if(!1===Q.test)throw new Yo("Test operation failed","TEST_OPERATION_FAILED",z,N,T);return Q.newDocument}function bl(T,N,z,Q){if("object"!=typeof T||null===T||Array.isArray(T))throw new Yo("Operation is not an object","OPERATION_NOT_AN_OBJECT",N,T,z);if(!Ya[T.op])throw new Yo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",N,T,z);if("string"!=typeof T.path)throw new Yo("Operation `path` property is not a string","OPERATION_PATH_INVALID",N,T,z);if(0!==T.path.indexOf("/")&&T.path.length>0)throw new Yo('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",N,T,z);if(("move"===T.op||"copy"===T.op)&&"string"!=typeof T.from)throw new Yo("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",N,T,z);if(("add"===T.op||"replace"===T.op||"test"===T.op)&&void 0===T.value)throw new Yo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",N,T,z);if(("add"===T.op||"replace"===T.op||"test"===T.op)&&Xc(T.value))throw new Yo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",N,T,z);if(z)if("add"==T.op){var ft=T.path.split("/").length,xt=Q.split("/").length;if(ft!==xt+1&&ft!==xt)throw new Yo("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",N,T,z)}else if("replace"===T.op||"remove"===T.op||"_get"===T.op){if(T.path!==Q)throw new Yo("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",N,T,z)}else if("move"===T.op||"copy"===T.op){var jt=gr([{op:"_get",path:T.from,value:void 0}],z);if(jt&&"OPERATION_PATH_UNRESOLVABLE"===jt.name)throw new Yo("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",N,T,z)}}function gr(T,N,z){try{if(!Array.isArray(T))throw new Yo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(N)ks(Mr(N),Mr(T),z||!0);else{z=z||bl;for(var Q=0;Q<T.length;Q++)z(T[Q],Q,N,void 0)}}catch(ft){if(ft instanceof Yo)return ft;throw ft}}function yl(T,N){if(T===N)return!0;if(T&&N&&"object"==typeof T&&"object"==typeof N){var ft,xt,kt,z=Array.isArray(T),Q=Array.isArray(N);if(z&&Q){if((xt=T.length)!=N.length)return!1;for(ft=xt;0!=ft--;)if(!yl(T[ft],N[ft]))return!1;return!0}if(z!=Q)return!1;var jt=Object.keys(T);if((xt=jt.length)!==Object.keys(N).length)return!1;for(ft=xt;0!=ft--;)if(!N.hasOwnProperty(jt[ft]))return!1;for(ft=xt;0!=ft--;)if(!yl(T[kt=jt[ft]],N[kt]))return!1;return!0}return T!=T&&N!=N}var _s=new WeakMap,ll=function(N){this.observers=new Map,this.obj=N},El=function(N,z){this.callback=N,this.observer=z};function ea(T,N){N.unobserve()}function Ca(T,N){var Q,ft=function(T){return _s.get(T)}(T);if(ft){var xt=function(T,N){return T.observers.get(N)}(ft,N);Q=xt&&xt.observer}else ft=new ll(T),_s.set(T,ft);if(Q)return Q;if(Q={},ft.value=Mr(T),N){Q.callback=N,Q.next=null;var kt=function(){$l(Q)},jt=function(){clearTimeout(Q.next),Q.next=setTimeout(kt)};"undefined"!=typeof window&&(window.addEventListener("mouseup",jt),window.addEventListener("keyup",jt),window.addEventListener("mousedown",jt),window.addEventListener("keydown",jt),window.addEventListener("change",jt))}return Q.patches=[],Q.object=T,Q.unobserve=function(){$l(Q),clearTimeout(Q.next),function(T,N){T.observers.delete(N.callback)}(ft,Q),"undefined"!=typeof window&&(window.removeEventListener("mouseup",jt),window.removeEventListener("keyup",jt),window.removeEventListener("mousedown",jt),window.removeEventListener("keydown",jt),window.removeEventListener("change",jt))},ft.observers.set(N,new El(N,Q)),Q}function $l(T,N){void 0===N&&(N=!1);var z=_s.get(T.object);La(z.value,T.object,T.patches,"",N),T.patches.length&&ks(z.value,T.patches);var Q=T.patches;return Q.length>0&&(T.patches=[],T.callback&&T.callback(Q)),Q}function La(T,N,z,Q,ft){if(N!==T){"function"==typeof N.toJSON&&(N=N.toJSON());for(var xt=vc(N),kt=vc(T),oe=!1,ce=kt.length-1;ce>=0;ce--){var Ue=T[Fe=kt[ce]];if(!_c(N,Fe)||void 0===N[Fe]&&void 0!==Ue&&!1===Array.isArray(N))Array.isArray(T)===Array.isArray(N)?(ft&&z.push({op:"test",path:Q+"/"+Gn(Fe),value:Mr(Ue)}),z.push({op:"remove",path:Q+"/"+Gn(Fe)}),oe=!0):(ft&&z.push({op:"test",path:Q,value:T}),z.push({op:"replace",path:Q,value:N}));else{var Je=N[Fe];"object"==typeof Ue&&null!=Ue&&"object"==typeof Je&&null!=Je&&Array.isArray(Ue)===Array.isArray(Je)?La(Ue,Je,z,Q+"/"+Gn(Fe),ft):Ue!==Je&&(ft&&z.push({op:"test",path:Q+"/"+Gn(Fe),value:Mr(Ue)}),z.push({op:"replace",path:Q+"/"+Gn(Fe),value:Mr(Je)}))}}if(oe||xt.length!=kt.length)for(ce=0;ce<xt.length;ce++){var Fe;!_c(T,Fe=xt[ce])&&void 0!==N[Fe]&&z.push({op:"add",path:Q+"/"+Gn(Fe),value:Mr(N[Fe])})}}}function Tc(T,N,z){void 0===z&&(z=!1);var Q=[];return La(T,N,Q,"",z),Q}Object.assign({},y,p,{JsonPatchError:Jl,deepClone:Mr,escapePathComponent:Gn,unescapePathComponent:bc});var Ls=m(25320),Cc=m.n(Ls),Sc=m(77282),Du=m.n(Sc);const _o={add:function(T,N){return{op:"add",path:T,value:N}},replace:wc,remove:function(T){return{op:"remove",path:T}},merge:function(T,N){return{type:"mutation",op:"merge",path:T,value:N}},mergeDeep:function(T,N){return{type:"mutation",op:"mergeDeep",path:T,value:N}},context:function(T,N){return{type:"context",path:T,value:N}},getIn:function(T,N){return N.reduce(function(z,Q){return void 0!==Q&&z?z[Q]:z},T)},applyPatch:function(T,N,z){if(z=z||{},"merge"===(N=G(G({},N),{},{path:N.path&&Na(N.path)})).op){var Q=_e(T,N.path);vt()(Q,N.value),ks(T,[wc(N.path,Q)])}else if("mergeDeep"===N.op){var ft=_e(T,N.path);for(var xt in N.value){var kt=N.value[xt],jt=Array.isArray(kt);if(jt){var oe=ft[xt]||[];ft[xt]=ie()(oe).call(oe,kt)}else if(vs(kt)&&!jt){var ce=G({},ft[xt]);for(var Fe in kt){if(Object.prototype.hasOwnProperty.call(ce,Fe)){ce=Cc()(Du()(ce),kt);break}vt()(ce,H({},Fe,kt[Fe]))}ft[xt]=ce}else ft[xt]=kt}}else if("add"===N.op&&""===N.path&&vs(N.value)){ks(T,Me()(N.value).reduce(function(Oi,Ki){return Oi.push({op:"add",path:"/".concat(Na(Ki)),value:N.value[Ki]}),Oi},[]))}else if("replace"===N.op&&""===N.path){var ci=N.value;z.allowMetaPatches&&N.meta&&Tt(N)&&(Array.isArray(N.value)||vs(N.value))&&(ci=G(G({},ci),N.meta)),T=ci}else if(ks(T,[N]),z.allowMetaPatches&&N.meta&&Tt(N)&&(Array.isArray(N.value)||vs(N.value))){var Mi=G(G({},_e(T,N.path)),N.meta);ks(T,[wc(N.path,Mi)])}return T},parentPathMatch:function(T,N){if(!Array.isArray(N))return!1;for(var z=0,Q=N.length;z<Q;z+=1)if(N[z]!==T[z])return!1;return!0},flatten:Xa,fullyNormalizeArray:function(T){return hl(Xa(wl(T)))},normalizeArray:wl,isPromise:function(T){return vs(T)&&Pa(T.then)},forEachNew:function(T,N){try{return ul(T,ia,N)}catch(z){return z}},forEachNewPrimitive:function(T,N){try{return ul(T,Cl,N)}catch(z){return z}},isJsonPatch:Rl,isContextPatch:function(T){return ne(T)&&"context"===T.type},isPatch:ne,isMutation:pt,isAdditiveMutation:Tt,isGenerator:function(T){return"[object GeneratorFunction]"===Object.prototype.toString.call(T)},isFunction:Pa,isObject:vs,isError:function(T){return T instanceof Error}};function Na(T){return Array.isArray(T)?T.length<1?"":"/".concat(Xt()(T).call(T,function(N){return(N+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")):T}function wc(T,N,z){return{op:"replace",path:T,value:N,meta:z}}function ul(T,N,z){var Q;return hl(Xa(Xt()(Q=Yt()(T).call(T,Tt)).call(Q,function(jt){return N(jt.value,z,jt.path)})||[]))}function Cl(T,N,z){return z=z||[],Array.isArray(T)?Xt()(T).call(T,function(ft,xt){return Cl(ft,N,ie()(z).call(z,xt))}):vs(T)?Xt()(Q=Me()(T)).call(Q,function(ft){return Cl(T[ft],N,ie()(z).call(z,ft))}):N(T,z[z.length-1],z);var Q}function ia(T,N,z){var Q=[];if((z=z||[]).length>0){var ft=N(T,z[z.length-1],z);ft&&(Q=ie()(Q).call(Q,ft))}if(Array.isArray(T)){var xt=Xt()(T).call(T,function(oe,ce){return ia(oe,N,ie()(z).call(z,ce))});xt&&(Q=ie()(Q).call(Q,xt))}else if(vs(T)){var kt,jt=Xt()(kt=Me()(T)).call(kt,function(oe){return ia(T[oe],N,ie()(z).call(z,oe))});jt&&(Q=ie()(Q).call(Q,jt))}return Xa(Q)}function wl(T){return Array.isArray(T)?T:[T]}function Xa(T){var N;return ie()(N=[]).apply(N,ha(Xt()(T).call(T,function(z){return Array.isArray(z)?Xa(z):z})))}function hl(T){return Yt()(T).call(T,function(N){return void 0!==N})}function vs(T){return T&&"object"===nt(T)}function Pa(T){return T&&"function"==typeof T}function Rl(T){if(ne(T)){var N=T.op;return"add"===N||"remove"===N||"replace"===N}return!1}function pt(T){return Rl(T)||ne(T)&&"mutation"===T.type}function Tt(T){return pt(T)&&("add"===T.op||"replace"===T.op||"merge"===T.op||"mergeDeep"===T.op)}function ne(T){return T&&"object"===nt(T)}function _e(T,N){try{return Ta(T,N)}catch(z){return console.error(z),{}}}var We=m(3933),Se=m.n(We),He=m(26360),hi=m.n(He);function gi(T,N){function z(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var Q=arguments.length,ft=new Array(Q),xt=0;xt<Q;xt++)ft[xt]=arguments[xt];this.message=ft[0],N&&N.apply(this,ft)}return(z.prototype=new Error).name=T,z.prototype.constructor=z,z}var Ti=m(57051),yn=m.n(Ti),rn=["properties"],Sn=["properties"],Xo=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],To=["schema/example","items/example"];function fo(T){var N=T[T.length-1],z=T[T.length-2],Q=T.join("/");return rn.indexOf(N)>-1&&-1===Sn.indexOf(z)||Xo.indexOf(Q)>-1||To.some(function(ft){return Q.indexOf(ft)>-1})}function qo(T,N){var z,ft=Vt(T.split("#"),2),kt=ft[1],jt=wt.resolve(ft[0]||"",N||"");return kt?ie()(z="".concat(jt,"#")).call(z,kt):jt}var So="application/json, application/yaml",cs=new RegExp("^([a-z]+://|//)","i"),Br=gi("JSONRefError",function(N,z,Q){this.originalError=Q,vt()(this,z||{})}),Zr={},Ka=new(Se()),uh=[function(T){return"paths"===T[0]&&"responses"===T[3]&&"examples"===T[5]},function(T){return"paths"===T[0]&&"responses"===T[3]&&"content"===T[5]&&"example"===T[7]},function(T){return"paths"===T[0]&&"responses"===T[3]&&"content"===T[5]&&"examples"===T[7]&&"value"===T[9]},function(T){return"paths"===T[0]&&"requestBody"===T[3]&&"content"===T[4]&&"example"===T[6]},function(T){return"paths"===T[0]&&"requestBody"===T[3]&&"content"===T[4]&&"examples"===T[6]&&"value"===T[8]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"example"===T[4]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"example"===T[5]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"examples"===T[4]&&"value"===T[6]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"examples"===T[5]&&"value"===T[7]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"content"===T[4]&&"example"===T[6]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"content"===T[4]&&"examples"===T[6]&&"value"===T[8]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"content"===T[4]&&"example"===T[7]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"content"===T[5]&&"examples"===T[7]&&"value"===T[9]}],ku={key:"$ref",plugin:function(N,z,Q,ft){var xt=ft.getInstance(),kt=Jr()(Q).call(Q,0,-1);if(!fo(kt)&&!function(N){return uh.some(function(z){return z(N)})}(kt)){var oe=ft.getContext(Q).baseDoc;if("string"!=typeof N)return new Br("$ref: must be a string (JSON-Ref)",{$ref:N,baseDoc:oe,fullPath:Q});var Je,ci,Ci,ce=Ja(N),Fe=ce[0],Ue=ce[1]||"";try{Je=oe||Fe?Nu(Fe,oe):null}catch(zt){return hh(zt,{pointer:Ue,$ref:N,basePath:Je,fullPath:Q})}if(function(T,N,z,Q){var ft,xt,kt=Ka.get(Q);kt||Ka.set(Q,kt={});var jt=function(T){return 0===T.length?"":"/".concat(Xt()(T).call(T,Rc).join("/"))}(z),oe=ie()(ft="".concat(N||"<specmap-base>","#")).call(ft,T),ce=jt.replace(/allOf\/\d+\/?/g,"");if(N===Q.contextTree.get([]).baseDoc&&ur(ce,T))return!0;var Ue="",Je=z.some(function(ci){var Ci;return Ue=ie()(Ci="".concat(Ue,"/")).call(Ci,Rc(ci)),kt[Ue]&&kt[Ue].some(function(Mi){return ur(Mi,oe)||ur(oe,Mi)})});if(Je)return!0;kt[ce]=ie()(xt=kt[ce]||[]).call(xt,oe)}(Ue,Je,kt,ft)&&!xt.useCircularStructures){var Mi=qo(N,Je);return N===Mi?null:_o.replace(Q,Mi)}if(null==Je?(Ci=Fu(Ue),void 0===(ci=ft.get(Ci))&&(ci=new Br("Could not resolve reference: ".concat(N),{pointer:Ue,$ref:N,baseDoc:oe,fullPath:Q}))):ci=null!=(ci=Pu(Je,Ue)).__value?ci.__value:ci.catch(function(zt){throw hh(zt,{pointer:Ue,$ref:N,baseDoc:oe,fullPath:Q})}),ci instanceof Error)return[_o.remove(Q),ci];var Oi=qo(N,Je),Ki=_o.replace(kt,ci,{$$ref:Oi});if(Je&&Je!==oe)return[Ki,_o.context(kt,{baseDoc:Je})];try{if(!function(T,N){var z=[T];return N.path.reduce(function(ft,xt){return z.push(ft[xt]),ft[xt]},T),function Q(ft){return _o.isObject(ft)&&(z.indexOf(ft)>=0||Me()(ft).some(function(xt){return Q(ft[xt])}))}(N.value)}(ft.state,Ki)||xt.useCircularStructures)return Ki}catch(zt){return null}}}},ql=vt()(ku,{docCache:Zr,absoluteify:Nu,clearCache:function(T){void 0!==T?delete Zr[T]:Me()(Zr).forEach(function(N){delete Zr[N]})},JSONRefError:Br,wrapError:hh,getDoc:dh,split:Ja,extractFromDoc:Pu,fetchJSON:function(T){return fetch(T,{headers:{Accept:So},loadSpec:!0}).then(function(N){return N.text()}).then(function(N){return ja.load(N)})},extract:fh,jsonPointerToArray:Fu,unescapeJsonPointerToken:tc});const Lu=ql;function Nu(T,N){if(!cs.test(T)){var z;if(!N)throw new Br(ie()(z="Tried to resolve a relative URL, without having a basePath. path: '".concat(T,"' basePath: '")).call(z,N,"'"));return wt.resolve(N,T)}return T}function hh(T,N){var z,Q;return z=T&&T.response&&T.response.body?ie()(Q="".concat(T.response.body.code," ")).call(Q,T.response.body.message):T.message,new Br("Could not resolve reference: ".concat(z),N,T)}function Ja(T){return(T+"").split("#")}function Pu(T,N){var z=Zr[T];if(z&&!_o.isPromise(z))try{var Q=fh(N,z);return vt()(Ir().resolve(Q),{__value:Q})}catch(ft){return Ir().reject(ft)}return dh(T).then(function(ft){return fh(N,ft)})}function dh(T){var N=Zr[T];return N?_o.isPromise(N)?N:Ir().resolve(N):(Zr[T]=ql.fetchJSON(T).then(function(z){return Zr[T]=z,z}),Zr[T])}function fh(T,N){var z=Fu(T);if(z.length<1)return N;var Q=_o.getIn(N,z);if(void 0===Q)throw new Br("Could not resolve pointer: ".concat(T," does not exist in document"),{pointer:T});return Q}function Fu(T){var N;if("string"!=typeof T)throw new TypeError("Expected a string, got a ".concat(nt(T)));return"/"===T[0]&&(T=T.substr(1)),""===T?[]:Xt()(N=T.split("/")).call(N,tc)}function tc(T){return"string"!=typeof T?T:new(hi())("=".concat(T.replace(/~1/g,"/").replace(/~0/g,"~"))).get("")}function Rc(T){var N,z=new(hi())([["",T.replace(/~/g,"~0").replace(/\//g,"~1")]]);return Jr()(N=z.toString()).call(N,1)}function ur(T,N){if(function(N){return!N||"/"===N||"#"===N}(N))return!0;var z=T.charAt(N.length),Q=Jr()(N).call(N,-1);return 0===T.indexOf(N)&&(!z||"/"===z||"#"===z)&&"#"!==Q}var gh=m(18421),zh=m.n(gh);const Qc={key:"allOf",plugin:function(N,z,Q,ft,xt){if(!xt.meta||!xt.meta.$$ref){var kt=Jr()(Q).call(Q,0,-1);if(!fo(kt)){if(!Array.isArray(N)){var jt=new TypeError("allOf must be an array");return jt.fullPath=Q,jt}var oe=!1,ce=xt.value;if(kt.forEach(function(Je){!ce||(ce=ce[Je])}),ce=G({},ce),!zh()(ce)){delete ce.allOf;var Ue,Fe=[];return Fe.push(ft.replace(kt,{})),N.forEach(function(Je,ci){if(!ft.isObject(Je)){if(oe)return null;oe=!0;var Ci=new TypeError("Elements in allOf must be objects");return Ci.fullPath=Q,Fe.push(Ci)}Fe.push(ft.mergeDeep(kt,Je));var Oi=function(T,N){var z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Q=z.specmap,ft=z.getBaseUrlForNodePath,xt=void 0===ft?function(ce){var Fe;return Q.getContext(ie()(Fe=[]).call(Fe,ha(N),ha(ce))).baseDoc}:ft,kt=z.targetKeys,jt=void 0===kt?["$ref","$$ref"]:kt,oe=[];return yn()(T).forEach(function(){if(Qe()(jt).call(jt,this.key)&&"string"==typeof this.node){var Fe=this.path,Ue=ie()(N).call(N,this.path),Je=qo(this.node,xt(Fe));oe.push(Q.replace(Ue,Je))}}),oe}(Je,Jr()(Q).call(Q,0,-1),{getBaseUrlForNodePath:function(zt){var Dn;return ft.getContext(ie()(Dn=[]).call(Dn,ha(Q),[ci],ha(zt))).baseDoc},specmap:ft});Fe.push.apply(Fe,ha(Oi))}),Fe.push(ft.mergeDeep(kt,ce)),ce.$$ref||Fe.push(ft.remove(ie()(Ue=[]).call(Ue,kt,"$$ref"))),Fe}}}}},Yh={key:"parameters",plugin:function(N,z,Q,ft){if(Array.isArray(N)&&N.length){var xt=vt()([],N),kt=Jr()(Q).call(Q,0,-1),jt=G({},_o.getIn(ft.spec,kt));return N.forEach(function(oe,ce){try{xt[ce].default=ft.parameterMacro(jt,oe)}catch(Ue){var Fe=new Error(Ue);return Fe.fullPath=Q,Fe}}),_o.replace(Q,xt)}return _o.replace(Q,N)}},Xh={key:"properties",plugin:function(N,z,Q,ft){var xt=G({},N);for(var kt in N)try{xt[kt].default=ft.modelPropertyMacro(xt[kt])}catch(ce){var jt=new Error(ce);return jt.fullPath=Q,jt}return _o.replace(Q,xt)}};var Kh=function(){function T(N){mc(this,T),this.root=qc(N||{})}return Xl(T,[{key:"set",value:function(z,Q){var ft=this.getParent(z,!0);if(ft){var xt=z[z.length-1],kt=ft.children;kt[xt]?tu(kt[xt],Q,ft):kt[xt]=qc(Q,ft)}else tu(this.root,Q,null)}},{key:"get",value:function(z){if((z=z||[]).length<1)return this.root.value;for(var ft,xt,Q=this.root,kt=0;kt<z.length&&(ft=Q.children)[xt=z[kt]];kt+=1)Q=ft[xt];return Q&&Q.protoValue}},{key:"getParent",value:function(z,Q){return!z||z.length<1?null:z.length<2?this.root:Jr()(z).call(z,0,-1).reduce(function(ft,xt){if(!ft)return ft;var kt=ft.children;return!kt[xt]&&Q&&(kt[xt]=qc(null,ft)),kt[xt]},this.root)}}]),T}();function qc(T,N){return tu({children:{}},T,N)}function tu(T,N,z){return T.value=N||{},T.protoValue=z?G(G({},z.protoValue),T.value):T.value,Me()(T.children).forEach(function(Q){var ft=T.children[Q];T.children[Q]=tu(ft,ft.value,T)}),T}var ec=function(){},Xs=function(){function T(N){var Q,ft,z=this;mc(this,T),vt()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new Kh,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:vt()(Object.create(this),_o,{getInstance:function(){return z}}),allowMetaPatches:!1},N),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=Yt()(Q=Xt()(ft=this.plugins).call(ft,this.wrapPlugin.bind(this))).call(Q,_o.isFunction),this.patches.push(_o.add([],this.spec)),this.patches.push(_o.context([],this.context)),this.updatePatches(this.patches)}return Xl(T,[{key:"debug",value:function(z){if(this.debugLevel===z){for(var Q,ft=arguments.length,xt=new Array(ft>1?ft-1:0),kt=1;kt<ft;kt++)xt[kt-1]=arguments[kt];(Q=console).log.apply(Q,xt)}}},{key:"verbose",value:function(z){if("verbose"===this.debugLevel){for(var Q,ft,xt=arguments.length,kt=new Array(xt>1?xt-1:0),jt=1;jt<xt;jt++)kt[jt-1]=arguments[jt];(Q=console).log.apply(Q,ie()(ft=["[".concat(z,"]   ")]).call(ft,kt))}}},{key:"wrapPlugin",value:function(z,Q){var kt,oe,ce,ft=this.pathDiscriminator,xt=null;return z[this.pluginProp]?(xt=z,kt=z[this.pluginProp]):_o.isFunction(z)?kt=z:_o.isObject(z)&&(oe=z,ce=function(Ue,Je){return!Array.isArray(Ue)||Ue.every(function(ci,Ci){return ci===Je[Ci]})},kt=Ge().mark(function Fe(Ue,Je){var ci,Ci,Mi,Oi,Ki,zt;return Ge().wrap(function(Qi){for(;;)switch(Qi.prev=Qi.next){case 0:zt=function(wo,Ao,ys){var Ns,Hr,Vr,io,wr,Qr,dl,Za,xc,cu,ud,na,uu;return Ge().wrap(function(Ps){for(;;)switch(Ps.prev=Ps.next){case 0:if(_o.isObject(wo)){Ps.next=6;break}if(oe.key!==Ao[Ao.length-1]){Ps.next=4;break}return Ps.next=4,oe.plugin(wo,oe.key,Ao,Je);case 4:Ps.next=30;break;case 6:Hr=Ao[Ns=Ao.length-1],Vr=Ao.indexOf("properties"),io="properties"===Hr&&Ns===Vr,wr=Je.allowMetaPatches&&Ci[wo.$$ref],Qr=0,dl=Me()(wo);case 12:if(!(Qr<dl.length)){Ps.next=30;break}if(xc=wo[Za=dl[Qr]],cu=ie()(Ao).call(Ao,Za),ud=_o.isObject(xc),na=wo.$$ref,wr){Ps.next=22;break}if(!ud){Ps.next=22;break}return Je.allowMetaPatches&&na&&(Ci[na]=!0),Ps.delegateYield(zt(xc,cu,ys),"t0",22);case 22:if(io||Za!==oe.key){Ps.next=27;break}if(uu=ce(ft,Ao),ft&&!uu){Ps.next=27;break}return Ps.next=27,oe.plugin(xc,Za,cu,Je,ys);case 27:Qr++,Ps.next=12;break;case 30:case"end":return Ps.stop()}},ci)},ci=Ge().mark(zt),Ci={},Mi=mt(Yt()(Ue).call(Ue,_o.isAdditiveMutation)),Qi.prev=4,Mi.s();case 6:if((Oi=Mi.n()).done){Qi.next=11;break}return Qi.delegateYield(zt((Ki=Oi.value).value,Ki.path,Ki),"t0",9);case 9:Qi.next=6;break;case 11:Qi.next=16;break;case 13:Qi.prev=13,Qi.t1=Qi.catch(4),Mi.e(Qi.t1);case 16:return Qi.prev=16,Mi.f(),Qi.finish(16);case 19:case"end":return Qi.stop()}},Fe,null,[[4,13,16,19]])})),vt()(kt.bind(xt),{pluginName:z.name||Q,isGenerator:_o.isGenerator(kt)})}},{key:"nextPlugin",value:function(){var z,Q=this;return Yc()(z=this.wrappedPlugins).call(z,function(ft){return Q.getMutationsForPlugin(ft).length>0})}},{key:"nextPromisedPatch",value:function(){var z;if(this.promisedPatches.length>0)return Ir().race(Xt()(z=this.promisedPatches).call(z,function(Q){return Q.value}))}},{key:"getPluginHistory",value:function(z){var Q=this.constructor.getPluginName(z);return this.pluginHistory[Q]||[]}},{key:"getPluginRunCount",value:function(z){return this.getPluginHistory(z).length}},{key:"getPluginHistoryTip",value:function(z){var Q=this.getPluginHistory(z);return Q&&Q[Q.length-1]||{}}},{key:"getPluginMutationIndex",value:function(z){var Q=this.getPluginHistoryTip(z).mutationIndex;return"number"!=typeof Q?-1:Q}},{key:"updatePluginHistory",value:function(z,Q){var ft=this.constructor.getPluginName(z);this.pluginHistory[ft]=this.pluginHistory[ft]||[],this.pluginHistory[ft].push(Q)}},{key:"updatePatches",value:function(z){var Q=this;_o.normalizeArray(z).forEach(function(ft){if(ft instanceof Error)Q.errors.push(ft);else try{if(!_o.isObject(ft))return void Q.debug("updatePatches","Got a non-object patch",ft);if(Q.showDebug&&Q.allPatches.push(ft),_o.isPromise(ft.value))return Q.promisedPatches.push(ft),void Q.promisedPatchThen(ft);if(_o.isContextPatch(ft))return void Q.setContext(ft.path,ft.value);if(_o.isMutation(ft))return void Q.updateMutations(ft)}catch(xt){console.error(xt),Q.errors.push(xt)}})}},{key:"updateMutations",value:function(z){"object"===nt(z.value)&&!Array.isArray(z.value)&&this.allowMetaPatches&&(z.value=G({},z.value));var Q=_o.applyPatch(this.state,z,{allowMetaPatches:this.allowMetaPatches});Q&&(this.mutations.push(z),this.state=Q)}},{key:"removePromisedPatch",value:function(z){var Q,ft=this.promisedPatches.indexOf(z);ft<0?this.debug("Tried to remove a promisedPatch that isn't there!"):al()(Q=this.promisedPatches).call(Q,ft,1)}},{key:"promisedPatchThen",value:function(z){var Q=this;return z.value=z.value.then(function(ft){var xt=G(G({},z),{},{value:ft});Q.removePromisedPatch(z),Q.updatePatches(xt)}).catch(function(ft){Q.removePromisedPatch(z),Q.updatePatches(ft)}),z.value}},{key:"getMutations",value:function(z,Q){var ft;return z=z||0,"number"!=typeof Q&&(Q=this.mutations.length),Jr()(ft=this.mutations).call(ft,z,Q)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(z){var Q=this.getPluginMutationIndex(z);return this.getMutations(Q+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(z){return _o.getIn(this.state,z)}},{key:"_getContext",value:function(z){return this.contextTree.get(z)}},{key:"setContext",value:function(z,Q){return this.contextTree.set(z,Q)}},{key:"_hasRun",value:function(z){return this.getPluginRunCount(this.getCurrentPlugin())>(z||0)}},{key:"dispatch",value:function(){var jt,z=this,Q=this,ft=this.nextPlugin();if(!ft){var xt=this.nextPromisedPatch();if(xt)return xt.then(function(){return z.dispatch()}).catch(function(){return z.dispatch()});var kt={spec:this.state,errors:this.errors};return this.showDebug&&(kt.patches=this.allPatches),Ir().resolve(kt)}if(Q.pluginCount=Q.pluginCount||{},Q.pluginCount[ft]=(Q.pluginCount[ft]||0)+1,Q.pluginCount[ft]>100)return Ir().resolve({spec:Q.state,errors:ie()(jt=Q.errors).call(jt,new Error("We've reached a hard limit of ".concat(100," plugin runs")))});if(ft!==this.currentPlugin&&this.promisedPatches.length){var oe,ce=Xt()(oe=this.promisedPatches).call(oe,function(Je){return Je.value});return Ir().all(Xt()(ce).call(ce,function(Je){return Je.then(ec,ec)})).then(function(){return z.dispatch()})}return function(){Q.currentPlugin=ft;var Je=Q.getCurrentMutations(),ci=Q.mutations.length-1;try{if(ft.isGenerator){var Mi,Ci=mt(ft(Je,Q.getLib()));try{for(Ci.s();!(Mi=Ci.n()).done;)Ue(Mi.value)}catch(zt){Ci.e(zt)}finally{Ci.f()}}else Ue(ft(Je,Q.getLib()))}catch(zt){console.error(zt),Ue([vt()(Object.create(zt),{plugin:ft})])}finally{Q.updatePluginHistory(ft,{mutationIndex:ci})}return Q.dispatch()}();function Ue(Je){Je&&(Je=_o.fullyNormalizeArray(Je),Q.updatePatches(Je,ft))}}}],[{key:"getPluginName",value:function(z){return z.pluginName}},{key:"getPatchesOfType",value:function(z,Q){return Yt()(z).call(z,Q)}}]),T}(),Dl={refs:Lu,allOf:Qc,parameters:Yh,properties:Xh},Jh=m(75388),bs=m.n(Jh),Dc=function(N){return String.prototype.toLowerCase.call(N)},eu=function(N){return N.replace(/[^\w]/gi,"_")};function $h(T){var N=T.openapi;return!!N&&ot()(N).call(N,"3")}function ic(T,N){var z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},ft=Q.v2OperationIdCompatibilityMode;if(!T||"object"!==nt(T))return null;var xt=(T.operationId||"").replace(/\s/g,"");return xt.length?eu(T.operationId):Zh(N,z,{v2OperationIdCompatibilityMode:ft})}function Zh(T,N){var z,Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},ft=Q.v2OperationIdCompatibilityMode;if(ft){var xt,kt,jt=ie()(xt="".concat(N.toLowerCase(),"_")).call(xt,T).replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return(jt=jt||ie()(kt="".concat(T.substring(1),"_")).call(kt,N)).replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return ie()(z="".concat(Dc(N))).call(z,eu(T))}function Hu(T,N){var z;return ie()(z="".concat(Dc(N),"-")).call(z,T)}function Vu(T,N,z){if(!T||"object"!==nt(T)||!T.paths||"object"!==nt(T.paths))return null;var Q=T.paths;for(var ft in Q)for(var xt in Q[ft])if("PARAMETERS"!==xt.toUpperCase()){var kt=Q[ft][xt];if(kt&&"object"===nt(kt)){var jt={spec:T,pathName:ft,method:xt.toUpperCase(),operation:kt},oe=N(jt);if(z&&oe)return jt}}}function qh(T){var N=T.spec,z=N.paths,Q={};if(!z||N.$$normalized)return T;for(var ft in z){var xt=z[ft];if(bs()(xt)){var kt=xt.parameters,jt=function(Ue){var Je=xt[Ue];if(!bs()(Je))return"continue";var ci=ic(Je,ft,Ue);if(ci){Q[ci]?Q[ci].push(Je):Q[ci]=[Je];var Ci=Q[ci];if(Ci.length>1)Ci.forEach(function(Hr,Vr){var io;Hr.__originalOperationId=Hr.__originalOperationId||Hr.operationId,Hr.operationId=ie()(io="".concat(ci)).call(io,Vr+1)});else if(void 0!==Je.operationId){var Mi=Ci[0];Mi.__originalOperationId=Mi.__originalOperationId||Je.operationId,Mi.operationId=ci}}if("parameters"!==Ue){var Oi=[],Ki={};for(var zt in N)("produces"===zt||"consumes"===zt||"security"===zt)&&(Ki[zt]=N[zt],Oi.push(Ki));if(kt&&(Ki.parameters=kt,Oi.push(Ki)),Oi.length){var Qi,Dn=mt(Oi);try{for(Dn.s();!(Qi=Dn.n()).done;){var wn=Qi.value;for(var wo in wn)if(Je[wo]){if("parameters"===wo){var ys,Ao=mt(wn[wo]);try{var Ns=function(){var Vr=ys.value;Je[wo].some(function(wr){return wr.name&&wr.name===Vr.name||wr.$ref&&wr.$ref===Vr.$ref||wr.$$ref&&wr.$$ref===Vr.$$ref||wr===Vr})||Je[wo].push(Vr)};for(Ao.s();!(ys=Ao.n()).done;)Ns()}catch(Hr){Ao.e(Hr)}finally{Ao.f()}}}else Je[wo]=wn[wo]}}catch(Hr){Dn.e(Hr)}finally{Dn.f()}}}};for(var oe in xt)jt(oe)}}return N.$$normalized=!0,T}function iu(T){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},z=N.requestInterceptor,Q=N.responseInterceptor,ft=T.withCredentials?"include":"same-origin";return function(xt){return T({url:xt,loadSpec:!0,requestInterceptor:z,responseInterceptor:Q,headers:{Accept:So},credentials:ft}).then(function(kt){return kt.body})}}function Gu(T){var z=T.spec,ft=T.mode,xt=T.allowMetaPatches,kt=void 0===xt||xt,jt=T.pathDiscriminator,oe=T.modelPropertyMacro,ce=T.parameterMacro,Fe=T.requestInterceptor,Ue=T.responseInterceptor,Je=T.skipNormalization,ci=T.useCircularStructures,Ci=T.http,Mi=T.baseDoc;return Mi=Mi||T.url,Ci=T.fetch||Ci||pc,z?Oi(z):iu(Ci,{requestInterceptor:Fe,responseInterceptor:Ue})(Mi).then(Oi);function Oi(Ki){Mi&&(Dl.refs.docCache[Mi]=Ki),Dl.refs.fetchJSON=iu(Ci,{requestInterceptor:Fe,responseInterceptor:Ue});var zt=[Dl.refs];return"function"==typeof ce&&zt.push(Dl.parameters),"function"==typeof oe&&zt.push(Dl.properties),"strict"!==ft&&zt.push(Dl.allOf),function(T){return new Xs(T).dispatch()}({spec:Ki,context:{baseDoc:Mi},plugins:zt,allowMetaPatches:kt,pathDiscriminator:jt,parameterMacro:ce,modelPropertyMacro:oe,useCircularStructures:ci}).then(Je?function(){var Dn=me(Ge().mark(function Qi(wn){return Ge().wrap(function(Ao){for(;;)switch(Ao.prev=Ao.next){case 0:return Ao.abrupt("return",wn);case 1:case"end":return Ao.stop()}},Qi)}));return function(Qi){return Dn.apply(this,arguments)}}():qh)}}var td=m(60778),nc=m.n(td);function ju(){return ju=me(Ge().mark(function T(N,z){var Q,ft,Ue,Je,ci,Ci,Mi=arguments;return Ge().wrap(function(Ki){for(;;)switch(Ki.prev=Ki.next){case 0:return ft=(Q=Mi.length>2&&void 0!==Mi[2]?Mi[2]:{}).returnEntireTree,Ue={pathDiscriminator:z,baseDoc:Q.baseDoc,requestInterceptor:Q.requestInterceptor,responseInterceptor:Q.responseInterceptor,parameterMacro:Q.parameterMacro,modelPropertyMacro:Q.modelPropertyMacro,useCircularStructures:Q.useCircularStructures},Je=qh({spec:N}),ci=Je.spec,Ki.next=6,Gu(G(G({},Ue),{},{spec:ci,allowMetaPatches:!0,skipNormalization:!0}));case 6:return Ci=Ki.sent,!ft&&Array.isArray(z)&&z.length&&(Ci.spec=nc()(Ci.spec,z)||null),Ki.abrupt("return",Ci);case 9:case"end":return Ki.stop()}},T)})),ju.apply(this,arguments)}var nu=function(){return null},ru_mapTagOperations=function(T){var N=T.spec,z=T.cb,Q=void 0===z?nu:z,ft=T.defaultTag,xt=void 0===ft?"default":ft,kt=T.v2OperationIdCompatibilityMode,jt={},oe={};return Vu(N,function(ce){var Fe=ce.pathName,Ue=ce.method,Je=ce.operation,ci=Je.tags?function(N){return Array.isArray(N)?N:[N]}(Je.tags):[xt];ci.forEach(function(Ci){if("string"==typeof Ci){oe[Ci]=oe[Ci]||{};var zt,Mi=oe[Ci],Oi=ic(Je,Fe,Ue,{v2OperationIdCompatibilityMode:kt}),Ki=Q({spec:N,pathName:Fe,method:Ue,operation:Je,operationId:Oi});if(jt[Oi])jt[Oi]+=1,Mi[ie()(zt="".concat(Oi)).call(zt,jt[Oi])]=Ki;else if(void 0!==Mi[Oi]){var Dn,Qi,wn=jt[Oi]||1;jt[Oi]=wn+1,Mi[ie()(Dn="".concat(Oi)).call(Dn,jt[Oi])]=Ki;var wo=Mi[Oi];delete Mi[Oi],Mi[ie()(Qi="".concat(Oi)).call(Qi,wn)]=wo}else Mi[Oi]=Ki}})}),oe},ru_makeExecute=function(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(N){var z=N.pathName,Q=N.method,ft=N.operationId;return function(xt){var kt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},jt=T.requestInterceptor,oe=T.responseInterceptor,ce=T.userFetch;return T.execute(G({spec:T.spec,requestInterceptor:jt,responseInterceptor:oe,userFetch:ce,pathName:z,method:Q,parameters:xt,operationId:ft},kt))}}},Ba=m(83091);var Gd=m(12507),id=m.n(Gd),nd=m(76216);const _h={body:function(T){T.req.body=T.value},header:function(T){var N=T.req,z=T.parameter,Q=T.value;N.headers=N.headers||{},void 0!==Q&&(N.headers[z.name]=Q)},query:function(T){var N=T.req,z=T.value,Q=T.parameter;if(N.query=N.query||{},!1===z&&"boolean"===Q.type&&(z="false"),0===z&&["number","integer"].indexOf(Q.type)>-1&&(z="0"),z)N.query[Q.name]={collectionFormat:Q.collectionFormat,value:z};else if(Q.allowEmptyValue&&void 0!==z){var ft=Q.name;N.query[ft]=N.query[ft]||{},N.query[ft].allowEmptyValue=!0}},path:function(T){var N=T.req,z=T.value;N.url=N.url.split("{".concat(T.parameter.name,"}")).join(encodeURIComponent(z))},formData:function(T){var N=T.req,z=T.value,Q=T.parameter;(z||Q.allowEmptyValue)&&(N.form=N.form||{},N.form[Q.name]={value:z,allowEmptyValue:Q.allowEmptyValue,collectionFormat:Q.collectionFormat})}};function zu(T,N){return Qe()(N).call(N,"application/json")?"string"==typeof T?T:Ke()(T):T.toString()}function vh(T){var N=T.req,z=T.value,Q=T.parameter,ft=Q.name,xt=Q.style,kt=Q.explode,jt=Q.content;if(jt){var oe=Me()(jt)[0];N.url=N.url.split("{".concat(ft,"}")).join(da(zu(z,oe),{escape:!0}))}else{var ce=Os({key:Q.name,value:z,style:xt||"simple",explode:kt||!1,escape:!0});N.url=N.url.split("{".concat(ft,"}")).join(ce)}}function jd(T){var N=T.req,z=T.value,Q=T.parameter;if(N.query=N.query||{},Q.content){var ft=Me()(Q.content)[0];N.query[Q.name]=zu(z,ft)}else if(!1===z&&(z="false"),0===z&&(z="0"),z)N.query[Q.name]={value:z,serializationOption:{style:Q.style,explode:Q.explode,allowReserved:Q.allowReserved}};else if(Q.allowEmptyValue&&void 0!==z){var oe=Q.name;N.query[oe]=N.query[oe]||{},N.query[oe].allowEmptyValue=!0}}var $a=["accept","authorization","content-type"];function bh(T){var N=T.req,z=T.parameter,Q=T.value;if(N.headers=N.headers||{},!($a.indexOf(z.name.toLowerCase())>-1)){if(z.content){var ft=Me()(z.content)[0];return void(N.headers[z.name]=zu(Q,ft))}void 0!==Q&&(N.headers[z.name]=Os({key:z.name,value:Q,style:z.style||"simple",explode:void 0!==z.explode&&z.explode,escape:!1}))}}function yh(T){var N=T.req,z=T.parameter,Q=T.value;N.headers=N.headers||{};var ft=nt(Q);if(z.content){var xt,kt=Me()(z.content)[0];N.headers.Cookie=ie()(xt="".concat(z.name,"=")).call(xt,zu(Q,kt))}else if("undefined"!==ft){var jt="object"===ft&&!Array.isArray(Q)&&z.explode?"":"".concat(z.name,"=");N.headers.Cookie=jt+Os({key:z.name,value:Q,escape:!1,style:z.style||"form",explode:void 0!==z.explode&&z.explode})}}var zd=m(26692),Eh=m.n(zd);var au=["http","fetch","spec","operationId","pathName","method","parameters","securities"],Yu=function(N){return Array.isArray(N)?N:[]},Vp=gi("OperationNotFoundError",function(N,z,Q){this.originalError=Q,vt()(this,z||{})}),Ch={buildRequest:lu};function lu(T){var N,z,Q=T.spec,ft=T.operationId,xt=T.responseContentType,kt=T.scheme,jt=T.requestInterceptor,oe=T.responseInterceptor,ce=T.contextUrl,Fe=T.userFetch,Ue=T.server,Je=T.serverVariables,ci=T.http,Ci=T.parameters,Mi=T.parameterBuilders,Oi=$h(Q);Mi||(Mi=Oi?e:_h);var zt={url:"",credentials:ci&&ci.withCredentials?"include":"same-origin",headers:{},cookies:{}};jt&&(zt.requestInterceptor=jt),oe&&(zt.responseInterceptor=oe),Fe&&(zt.userFetch=Fe);var Dn=function(T,N){return T&&T.paths?function(T,N){return Vu(T,N,!0)||null}(T,function(z){var Q=z.pathName,ft=z.method,xt=z.operation;if(!xt||"object"!==nt(xt))return!1;var kt=xt.operationId;return[ic(xt,Q,ft),Hu(Q,ft),kt].some(function(ce){return ce&&ce===N})}):null}(Q,ft);if(!Dn)throw new Vp("Operation ".concat(ft," not found"));var Qi=Dn.operation,wn=void 0===Qi?{}:Qi,wo=Dn.method,Ao=Dn.pathName;if(zt.url+=ld({spec:Q,scheme:kt,contextUrl:ce,server:Ue,serverVariables:Je,pathName:Ao,method:wo}),!ft)return delete zt.cookies,zt;zt.url+=Ao,zt.method="".concat(wo).toUpperCase(),Ci=Ci||{};var ys=Q.paths[Ao]||{};xt&&(zt.headers.accept=xt);var Ns=function(N){var z={};N.forEach(function(ft){z[ft.in]||(z[ft.in]={}),z[ft.in][ft.name]=ft});var Q=[];return Me()(z).forEach(function(ft){Me()(z[ft]).forEach(function(xt){Q.push(z[ft][xt])})}),Q}(ie()(N=ie()(z=[]).call(z,Yu(wn.parameters))).call(N,Yu(ys.parameters)));Ns.forEach(function(io){var Qr,dl,wr=Mi[io.in];if("body"===io.in&&io.schema&&io.schema.properties&&(Qr=Ci),void 0===(Qr=io&&io.name&&Ci[io.name]))Qr=io&&io.name&&Ci[ie()(dl="".concat(io.in,".")).call(dl,io.name)];else if(function(N,z){return Yt()(z).call(z,function(Q){return Q.name===N})}(io.name,Ns).length>1){var Za;console.warn(ie()(Za="Parameter '".concat(io.name,"' is ambiguous because the defined spec has more than one parameter with the name: '")).call(Za,io.name,"' and the passed-in parameter values did not define an 'in' value."))}if(null!==Qr){if(void 0!==io.default&&void 0===Qr&&(Qr=io.default),void 0===Qr&&io.required&&!io.allowEmptyValue)throw new Error("Required parameter ".concat(io.name," is not provided"));if(Oi&&io.schema&&"object"===io.schema.type&&"string"==typeof Qr)try{Qr=JSON.parse(Qr)}catch(xc){throw new Error("Could not parse object parameter value string as JSON")}wr&&wr({req:zt,parameter:io,value:Qr,operation:wn,spec:Q})}});var Hr=G(G({},T),{},{operation:wn});if((zt=Oi?function(T,N){var z=T.operation,Q=T.requestBody,kt=T.attachContentTypeForEmptyPayload,jt=T.requestContentType;N=function(T){var N=T.request,z=T.securities,Q=void 0===z?{}:z,ft=T.operation,xt=void 0===ft?{}:ft,kt=T.spec,jt=G({},N),oe=Q.authorized,ce=void 0===oe?{}:oe,Fe=xt.security||kt.security||[],Ue=ce&&!!Me()(ce).length,Je=nc()(kt,["components","securitySchemes"])||{};return jt.headers=jt.headers||{},jt.query=jt.query||{},Me()(Q).length&&Ue&&Fe&&(!Array.isArray(xt.security)||xt.security.length)?(Fe.forEach(function(ci){Me()(ci).forEach(function(Ci){var Mi=ce[Ci],Oi=Je[Ci];if(Mi){var Ki=Mi.value||Mi,zt=Oi.type;if(Mi)if("apiKey"===zt)"query"===Oi.in&&(jt.query[Oi.name]=Ki),"header"===Oi.in&&(jt.headers[Oi.name]=Ki),"cookie"===Oi.in&&(jt.cookies[Oi.name]=Ki);else if("http"===zt){if(/^basic$/i.test(Oi.scheme)){var Dn,Qi=Ki.username||"",wn=Ki.password||"",wo=Eh()(ie()(Dn="".concat(Qi,":")).call(Dn,wn));jt.headers.Authorization="Basic ".concat(wo)}/^bearer$/i.test(Oi.scheme)&&(jt.headers.Authorization="Bearer ".concat(Ki))}else if("oauth2"===zt||"openIdConnect"===zt){var Ao,ys=Mi.token||{},Hr=ys[Oi["x-tokenName"]||"access_token"],Vr=ys.token_type;(!Vr||"bearer"===Vr.toLowerCase())&&(Vr="Bearer"),jt.headers.Authorization=ie()(Ao="".concat(Vr," ")).call(Ao,Hr)}}})}),jt):N}({request:N,securities:T.securities,operation:z,spec:T.spec});var oe=z.requestBody||{},ce=Me()(oe.content||{}),Fe=jt&&ce.indexOf(jt)>-1;if(Q||kt){if(jt&&Fe)N.headers["Content-Type"]=jt;else if(!jt){var Ue=ce[0];Ue&&(N.headers["Content-Type"]=Ue,jt=Ue)}}else jt&&Fe&&(N.headers["Content-Type"]=jt);if(!T.responseContentType&&z.responses){var Je,ci=Yt()(Je=Ht()(z.responses)).call(Je,function(Mi){var Oi=Vt(Mi,2),zt=Oi[1],Dn=parseInt(Oi[0],10);return Dn>=200&&Dn<300&&id()(zt.content)}).reduce(function(Mi,Oi){var zt=Vt(Oi,2)[1];return ie()(Mi).call(Mi,Me()(zt.content))},[]);ci.length>0&&(N.headers.accept=ci.join(", "))}if(Q)if(jt){if(ce.indexOf(jt)>-1)if("application/x-www-form-urlencoded"===jt||"multipart/form-data"===jt)if("object"===nt(Q)){var Ci=(oe.content[jt]||{}).encoding||{};N.form={},Me()(Q).forEach(function(Mi){N.form[Mi]={value:Q[Mi],encoding:Ci[Mi]||{}}})}else N.form=Q;else N.body=Q}else N.body=Q;return N}(Hr,zt):function(T,N){var oe,ce,z=T.spec,Q=T.operation,xt=T.requestContentType,kt=T.responseContentType,jt=T.attachContentTypeForEmptyPayload;if(N=function(T){var N=T.request,z=T.securities,Q=void 0===z?{}:z,ft=T.operation,xt=void 0===ft?{}:ft,kt=T.spec,jt=G({},N),oe=Q.authorized,ce=void 0===oe?{}:oe,Fe=Q.specSecurity,Je=xt.security||(void 0===Fe?[]:Fe),ci=ce&&!!Me()(ce).length,Ci=kt.securityDefinitions;return jt.headers=jt.headers||{},jt.query=jt.query||{},Me()(Q).length&&ci&&Je&&(!Array.isArray(xt.security)||xt.security.length)?(Je.forEach(function(Mi){Me()(Mi).forEach(function(Oi){var Ki=ce[Oi];if(Ki){var zt=Ki.token,Dn=Ki.value||Ki,Qi=Ci[Oi],wn=Qi.type,Ao=zt&&zt[Qi["x-tokenName"]||"access_token"],ys=zt&&zt.token_type;if(Ki)if("apiKey"===wn){var Ns="query"===Qi.in?"query":"headers";jt[Ns]=jt[Ns]||{},jt[Ns][Qi.name]=Dn}else if("basic"===wn)if(Dn.header)jt.headers.authorization=Dn.header;else{var Hr,Vr=Dn.username||"",io=Dn.password||"";Dn.base64=Eh()(ie()(Hr="".concat(Vr,":")).call(Hr,io)),jt.headers.authorization="Basic ".concat(Dn.base64)}else if("oauth2"===wn&&Ao){var wr;ys=ys&&"bearer"!==ys.toLowerCase()?ys:"Bearer",jt.headers.authorization=ie()(wr="".concat(ys," ")).call(wr,Ao)}}})}),jt):N}({request:N,securities:T.securities,operation:Q,spec:z}),N.body||N.form||jt)if(xt)N.headers["Content-Type"]=xt;else if(Array.isArray(Q.consumes)){var Fe=Vt(Q.consumes,1);N.headers["Content-Type"]=Fe[0]}else if(Array.isArray(z.consumes)){var Ue=Vt(z.consumes,1);N.headers["Content-Type"]=Ue[0]}else Q.parameters&&Yt()(oe=Q.parameters).call(oe,function(Oi){return"file"===Oi.type}).length?N.headers["Content-Type"]="multipart/form-data":Q.parameters&&Yt()(ce=Q.parameters).call(ce,function(Oi){return"formData"===Oi.in}).length&&(N.headers["Content-Type"]="application/x-www-form-urlencoded");else if(xt){var Je,ci,Ci=Q.parameters&&Yt()(Je=Q.parameters).call(Je,function(Oi){return"body"===Oi.in}).length>0,Mi=Q.parameters&&Yt()(ci=Q.parameters).call(ci,function(Oi){return"formData"===Oi.in}).length>0;(Ci||Mi)&&(N.headers["Content-Type"]=xt)}return!kt&&Array.isArray(Q.produces)&&Q.produces.length>0&&(N.headers.accept=Q.produces.join(", ")),N}(Hr,zt)).cookies&&Me()(zt.cookies).length){var Vr=Me()(zt.cookies).reduce(function(io,wr){return io+(io?"&":"")+nd.serialize(wr,zt.cookies[wr])},"");zt.headers.Cookie=Vr}return zt.cookies&&delete zt.cookies,Ys(zt),zt}var Sh=function(N){return N?N.replace(/\W/g,""):null};function ld(T){return $h(T.spec)?function(T){var N=T.spec,z=T.pathName,Q=T.method,ft=T.server,xt=T.contextUrl,kt=T.serverVariables,jt=void 0===kt?{}:kt,oe=nc()(N,["paths",z,(Q||"").toLowerCase(),"servers"])||nc()(N,["paths",z,"servers"])||nc()(N,["servers"]),ce="",Fe=null;if(ft&&oe&&oe.length){var Ue=Xt()(oe).call(oe,function(Ci){return Ci.url});Ue.indexOf(ft)>-1&&(ce=ft,Fe=oe[Ue.indexOf(ft)])}if(!ce&&oe&&oe.length){ce=oe[0].url;var Je=Vt(oe,1);Fe=Je[0]}if(ce.indexOf("{")>-1){var ci=function(T){for(var Q,N=[],z=/{([^}]+)}/g;Q=z.exec(T);)N.push(Q[1]);return N}(ce);ci.forEach(function(Ci){if(Fe.variables&&Fe.variables[Ci]){var Oi=jt[Ci]||Fe.variables[Ci].default,Ki=new RegExp("{".concat(Ci,"}"),"g");ce=ce.replace(Ki,Oi)}})}return function(){var jt,oe,T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",z=wt.parse(T&&N?wt.resolve(N,T):T),Q=wt.parse(N),ft=Sh(z.protocol)||Sh(Q.protocol)||"",xt=z.host||Q.host,kt=z.pathname||"";return"/"===(jt=ft&&xt?ie()(oe="".concat(ft,"://")).call(oe,xt+kt):kt)[jt.length-1]?Jr()(jt).call(jt,0,-1):jt}(ce,xt)}(T):function(T){var Fe,Ue,N=T.spec,z=T.scheme,Q=T.contextUrl,xt=wt.parse(void 0===Q?"":Q),kt=Array.isArray(N.schemes)?N.schemes[0]:null,jt=z||kt||Sh(xt.protocol)||"http",oe=N.host||xt.host||"",ce=N.basePath||"";return"/"===(Fe=jt&&oe?ie()(Ue="".concat(jt,"://")).call(Ue,oe+ce):ce)[Fe.length-1]?Jr()(Fe).call(Fe,0,-1):Fe}(T)}function rr(T){var N=this,z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof T?z.url=T:z=T,!(this instanceof rr))return new rr(z);vt()(this,z);var Q=this.resolve().then(function(){return N.disableInterfaces||vt()(N,rr.makeApisTagOperation(N)),N});return Q.client=this,Q}rr.makeHttp=function(T,N,z){return z=z||function(Q){return Q},N=N||function(Q){return Q},function(Q){return"string"==typeof Q&&(Q={url:Q}),dc.mergeInQueryOrForm(Q),Q=N(Q),z(T(Q))}}.bind(null,rr.http=pc),rr.resolve=Gu,rr.resolveSubtree=function(T,N){return ju.apply(this,arguments)},rr.execute=function(T){var N=T.http,z=T.fetch,Q=T.spec,ft=T.operationId,xt=T.pathName,kt=T.method,jt=T.parameters,oe=T.securities,ce=function(T,N){if(null==T)return{};var Q,ft,z=function(T,N){if(null==T)return{};var ft,xt,z={},Q=t(T);for(xt=0;xt<Q.length;xt++)ft=Q[xt],!(Ba(N).call(N,ft)>=0)&&(z[ft]=T[ft]);return z}(T,N);if(n){var xt=n(T);for(ft=0;ft<xt.length;ft++)Q=xt[ft],!(Ba(N).call(N,Q)>=0)&&(!Object.prototype.propertyIsEnumerable.call(T,Q)||(z[Q]=T[Q]))}return z}(T,au),Fe=N||z||pc;xt&&kt&&!ft&&(ft=Hu(xt,kt));var Ue=Ch.buildRequest(G({spec:Q,operationId:ft,parameters:jt,securities:oe,http:Fe},ce));return Ue.body&&(id()(Ue.body)||Array.isArray(Ue.body))&&(Ue.body=Ke()(Ue.body)),Fe(Ue)},rr.serializeRes=fc,rr.serializeHeaders=jc,rr.clearCache=function(){Dl.refs.clearCache()},rr.makeApisTagOperation=function(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},N=ru_makeExecute(T);return{apis:ru_mapTagOperations({v2OperationIdCompatibilityMode:T.v2OperationIdCompatibilityMode,spec:T.spec,cb:N})}},rr.buildRequest=lu,rr.helpers={opId:ic},rr.getBaseUrl=ld,(rr.prototype={http:pc,execute:function(N){return this.applyDefaults(),rr.execute(G({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null},N))},resolve:function(){var N=this,z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return rr.resolve(G({spec:this.spec,url:this.url,http:this.http||this.fetch,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null,skipNormalization:this.skipNormalization||!1},z)).then(function(Q){return N.originalSpec=N.spec,N.spec=Q.spec,N.errors=Q.errors,N})}}).applyDefaults=function(){var N=this.spec,z=this.url;if(z&&ot()(z).call(z,"http")){var Q=wt.parse(z);N.host||(N.host=Q.host),N.schemes||(N.schemes=[Q.protocol.replace(":","")]),N.basePath||(N.basePath="/")}};var Oc=rr.helpers;const wh=rr},84329:L=>{"use strict";var W=String.prototype.replace,m=/%20/g;L.exports={default:"RFC3986",formatters:{RFC1738:function(p){return W.call(p,m,"+")},RFC3986:function(p){return String(p)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},84268:(L,W,m)=>{"use strict";var y=m(3736),p=m(12259),e=m(84329);L.exports={formats:e,parse:p,stringify:y}},12259:(L,W,m)=>{"use strict";var y=m(5924),p=Object.prototype.hasOwnProperty,e=Array.isArray,t={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:y.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function(V,G){return V&&"string"==typeof V&&G.comma&&V.indexOf(",")>-1?V.split(","):V},O=function(G,Z,vt,it){if(G){var ot=vt.allowDots?G.replace(/\.([^.[]+)/g,"[$1]"):G,ct=/(\[[^[\]]*])/g,yt=vt.depth>0&&/(\[[^[\]]*])/.exec(ot),lt=yt?ot.slice(0,yt.index):ot,at=[];if(lt){if(!vt.plainObjects&&p.call(Object.prototype,lt)&&!vt.allowPrototypes)return;at.push(lt)}for(var bt=0;vt.depth>0&&null!==(yt=ct.exec(ot))&&bt<vt.depth;){if(bt+=1,!vt.plainObjects&&p.call(Object.prototype,yt[1].slice(1,-1))&&!vt.allowPrototypes)return;at.push(yt[1])}return yt&&at.push("["+ot.slice(yt.index)+"]"),function(V,G,Z,vt){for(var it=vt?G:o(G,Z),ot=V.length-1;ot>=0;--ot){var wt,ct=V[ot];if("[]"===ct&&Z.parseArrays)wt=[].concat(it);else{wt=Z.plainObjects?Object.create(null):{};var yt="["===ct.charAt(0)&&"]"===ct.charAt(ct.length-1)?ct.slice(1,-1):ct,lt=parseInt(yt,10);Z.parseArrays||""!==yt?!isNaN(lt)&&ct!==yt&&String(lt)===yt&&lt>=0&&Z.parseArrays&&lt<=Z.arrayLimit?(wt=[])[lt]=it:wt[yt]=it:wt={0:it}}it=wt}return it}(at,Z,vt,it)}};L.exports=function(V,G){var Z=function(G){if(!G)return t;if(null!=G.decoder&&"function"!=typeof G.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==G.charset&&"utf-8"!==G.charset&&"iso-8859-1"!==G.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===G.allowDots?t.allowDots:!!G.allowDots,allowPrototypes:"boolean"==typeof G.allowPrototypes?G.allowPrototypes:t.allowPrototypes,allowSparse:"boolean"==typeof G.allowSparse?G.allowSparse:t.allowSparse,arrayLimit:"number"==typeof G.arrayLimit?G.arrayLimit:t.arrayLimit,charset:void 0===G.charset?t.charset:G.charset,charsetSentinel:"boolean"==typeof G.charsetSentinel?G.charsetSentinel:t.charsetSentinel,comma:"boolean"==typeof G.comma?G.comma:t.comma,decoder:"function"==typeof G.decoder?G.decoder:t.decoder,delimiter:"string"==typeof G.delimiter||y.isRegExp(G.delimiter)?G.delimiter:t.delimiter,depth:"number"==typeof G.depth||!1===G.depth?+G.depth:t.depth,ignoreQueryPrefix:!0===G.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof G.interpretNumericEntities?G.interpretNumericEntities:t.interpretNumericEntities,parameterLimit:"number"==typeof G.parameterLimit?G.parameterLimit:t.parameterLimit,parseArrays:!1!==G.parseArrays,plainObjects:"boolean"==typeof G.plainObjects?G.plainObjects:t.plainObjects,strictNullHandling:"boolean"==typeof G.strictNullHandling?G.strictNullHandling:t.strictNullHandling}}(G);if(""===V||null==V)return Z.plainObjects?Object.create(null):{};for(var vt="string"==typeof V?function(G,Z){var yt,vt={},wt=(Z.ignoreQueryPrefix?G.replace(/^\?/,""):G).split(Z.delimiter,Z.parameterLimit===1/0?void 0:Z.parameterLimit),ct=-1,lt=Z.charset;if(Z.charsetSentinel)for(yt=0;yt<wt.length;++yt)0===wt[yt].indexOf("utf8=")&&("utf8=%E2%9C%93"===wt[yt]?lt="utf-8":"utf8=%26%2310003%3B"===wt[yt]&&(lt="iso-8859-1"),ct=yt,yt=wt.length);for(yt=0;yt<wt.length;++yt)if(yt!==ct){var Rt,mt,at=wt[yt],bt=at.indexOf("]="),tt=-1===bt?at.indexOf("="):bt+1;-1===tt?(Rt=Z.decoder(at,t.decoder,lt,"key"),mt=Z.strictNullHandling?null:""):(Rt=Z.decoder(at.slice(0,tt),t.decoder,lt,"key"),mt=y.maybeMap(o(at.slice(tt+1),Z),function(dt){return Z.decoder(dt,t.decoder,lt,"value")})),mt&&Z.interpretNumericEntities&&"iso-8859-1"===lt&&(mt=mt.replace(/&#(\d+);/g,function(G,Z){return String.fromCharCode(parseInt(Z,10))})),at.indexOf("[]=")>-1&&(mt=e(mt)?[mt]:mt),vt[Rt]=p.call(vt,Rt)?y.combine(vt[Rt],mt):mt}return vt}(V,Z):V,it=Z.plainObjects?Object.create(null):{},ot=Object.keys(vt),wt=0;wt<ot.length;++wt){var ct=ot[wt],yt=O(ct,vt[ct],Z,"string"==typeof V);it=y.merge(it,yt,Z)}return!0===Z.allowSparse?it:y.compact(it)}},3736:(L,W,m)=>{"use strict";var y=m(93544),p=m(5924),e=m(84329),t=Object.prototype.hasOwnProperty,n={brackets:function(ot){return ot+"[]"},comma:"comma",indices:function(ot,wt){return ot+"["+wt+"]"},repeat:function(ot){return ot}},o=Array.isArray,s=String.prototype.split,c=Array.prototype.push,v=function(it,ot){c.apply(it,o(ot)?ot:[ot])},R=Date.prototype.toISOString,O=e.default,H={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:p.encode,encodeValuesOnly:!1,format:O,formatter:e.formatters[O],indices:!1,serializeDate:function(ot){return R.call(ot)},skipNulls:!1,strictNullHandling:!1},G={},Z=function it(ot,wt,ct,yt,lt,at,bt,tt,Rt,mt,dt,nt,st,Gt,It){for(var Vt=ot,Ie=It,Ze=0,me=!1;void 0!==(Ie=Ie.get(G))&&!me;){var Be=Ie.get(ot);if(Ze+=1,void 0!==Be){if(Be===Ze)throw new RangeError("Cyclic object value");me=!0}void 0===Ie.get(G)&&(Ze=0)}if("function"==typeof bt?Vt=bt(wt,Vt):Vt instanceof Date?Vt=mt(Vt):"comma"===ct&&o(Vt)&&(Vt=p.maybeMap(Vt,function(Me){return Me instanceof Date?mt(Me):Me})),null===Vt){if(yt)return at&&!st?at(wt,H.encoder,Gt,"key",dt):wt;Vt=""}if(function(ot){return"string"==typeof ot||"number"==typeof ot||"boolean"==typeof ot||"symbol"==typeof ot||"bigint"==typeof ot}(Vt)||p.isBuffer(Vt)){if(at){var Ge=st?wt:at(wt,H.encoder,Gt,"key",dt);if("comma"===ct&&st){for(var si=s.call(String(Vt),","),Qe="",Ne=0;Ne<si.length;++Ne)Qe+=(0===Ne?"":",")+nt(at(si[Ne],H.encoder,Gt,"value",dt));return[nt(Ge)+"="+Qe]}return[nt(Ge)+"="+nt(at(Vt,H.encoder,Gt,"value",dt))]}return[nt(wt)+"="+nt(String(Vt))]}var we,pe=[];if(void 0===Vt)return pe;if("comma"===ct&&o(Vt))we=[{value:Vt.length>0?Vt.join(",")||null:void 0}];else if(o(bt))we=bt;else{var Ve=Object.keys(Vt);we=tt?Ve.sort(tt):Ve}for(var ui=0;ui<we.length;++ui){var Ke=we[ui],be="object"==typeof Ke&&void 0!==Ke.value?Ke.value:Vt[Ke];if(!lt||null!==be){var Xt=o(Vt)?"function"==typeof ct?ct(wt,Ke):wt:wt+(Rt?"."+Ke:"["+Ke+"]");It.set(ot,Ze);var re=y();re.set(G,It),v(pe,it(be,Xt,ct,yt,lt,at,bt,tt,Rt,mt,dt,nt,st,Gt,re))}}return pe};L.exports=function(it,ot){var yt,wt=it,ct=function(ot){if(!ot)return H;if(null!=ot.encoder&&"function"!=typeof ot.encoder)throw new TypeError("Encoder has to be a function.");var wt=ot.charset||H.charset;if(void 0!==ot.charset&&"utf-8"!==ot.charset&&"iso-8859-1"!==ot.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var ct=e.default;if(void 0!==ot.format){if(!t.call(e.formatters,ot.format))throw new TypeError("Unknown format option provided.");ct=ot.format}var yt=e.formatters[ct],lt=H.filter;return("function"==typeof ot.filter||o(ot.filter))&&(lt=ot.filter),{addQueryPrefix:"boolean"==typeof ot.addQueryPrefix?ot.addQueryPrefix:H.addQueryPrefix,allowDots:void 0===ot.allowDots?H.allowDots:!!ot.allowDots,charset:wt,charsetSentinel:"boolean"==typeof ot.charsetSentinel?ot.charsetSentinel:H.charsetSentinel,delimiter:void 0===ot.delimiter?H.delimiter:ot.delimiter,encode:"boolean"==typeof ot.encode?ot.encode:H.encode,encoder:"function"==typeof ot.encoder?ot.encoder:H.encoder,encodeValuesOnly:"boolean"==typeof ot.encodeValuesOnly?ot.encodeValuesOnly:H.encodeValuesOnly,filter:lt,format:ct,formatter:yt,serializeDate:"function"==typeof ot.serializeDate?ot.serializeDate:H.serializeDate,skipNulls:"boolean"==typeof ot.skipNulls?ot.skipNulls:H.skipNulls,sort:"function"==typeof ot.sort?ot.sort:null,strictNullHandling:"boolean"==typeof ot.strictNullHandling?ot.strictNullHandling:H.strictNullHandling}}(ot);"function"==typeof ct.filter?wt=(0,ct.filter)("",wt):o(ct.filter)&&(yt=ct.filter);var at=[];if("object"!=typeof wt||null===wt)return"";var tt=n[ot&&ot.arrayFormat in n?ot.arrayFormat:ot&&"indices"in ot?ot.indices?"indices":"repeat":"indices"];yt||(yt=Object.keys(wt)),ct.sort&&yt.sort(ct.sort);for(var Rt=y(),mt=0;mt<yt.length;++mt){var dt=yt[mt];ct.skipNulls&&null===wt[dt]||v(at,Z(wt[dt],dt,tt,ct.strictNullHandling,ct.skipNulls,ct.encode?ct.encoder:null,ct.filter,ct.sort,ct.allowDots,ct.serializeDate,ct.format,ct.formatter,ct.encodeValuesOnly,ct.charset,Rt))}var nt=at.join(ct.delimiter),st=!0===ct.addQueryPrefix?"?":"";return ct.charsetSentinel&&(st+="iso-8859-1"===ct.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),nt.length>0?st+nt:""}},5924:(L,W,m)=>{"use strict";var y=m(84329),p=Object.prototype.hasOwnProperty,e=Array.isArray,t=function(){for(var vt=[],it=0;it<256;++it)vt.push("%"+((it<16?"0":"")+it.toString(16)).toUpperCase());return vt}(),o=function(it,ot){for(var wt=ot&&ot.plainObjects?Object.create(null):{},ct=0;ct<it.length;++ct)void 0!==it[ct]&&(wt[ct]=it[ct]);return wt};L.exports={arrayToObject:o,assign:function(it,ot){return Object.keys(ot).reduce(function(wt,ct){return wt[ct]=ot[ct],wt},it)},combine:function(it,ot){return[].concat(it,ot)},compact:function(it){for(var ot=[{obj:{o:it},prop:"o"}],wt=[],ct=0;ct<ot.length;++ct)for(var yt=ot[ct],lt=yt.obj[yt.prop],at=Object.keys(lt),bt=0;bt<at.length;++bt){var tt=at[bt],Rt=lt[tt];"object"==typeof Rt&&null!==Rt&&-1===wt.indexOf(Rt)&&(ot.push({obj:lt,prop:tt}),wt.push(Rt))}return function(it){for(;it.length>1;){var ot=it.pop(),wt=ot.obj[ot.prop];if(e(wt)){for(var ct=[],yt=0;yt<wt.length;++yt)void 0!==wt[yt]&&ct.push(wt[yt]);ot.obj[ot.prop]=ct}}}(ot),it},decode:function(vt,it,ot){var wt=vt.replace(/\+/g," ");if("iso-8859-1"===ot)return wt.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(wt)}catch(ct){return wt}},encode:function(it,ot,wt,ct,yt){if(0===it.length)return it;var lt=it;if("symbol"==typeof it?lt=Symbol.prototype.toString.call(it):"string"!=typeof it&&(lt=String(it)),"iso-8859-1"===wt)return escape(lt).replace(/%u[0-9a-f]{4}/gi,function(Rt){return"%26%23"+parseInt(Rt.slice(2),16)+"%3B"});for(var at="",bt=0;bt<lt.length;++bt){var tt=lt.charCodeAt(bt);45===tt||46===tt||95===tt||126===tt||tt>=48&&tt<=57||tt>=65&&tt<=90||tt>=97&&tt<=122||yt===y.RFC1738&&(40===tt||41===tt)?at+=lt.charAt(bt):tt<128?at+=t[tt]:tt<2048?at+=t[192|tt>>6]+t[128|63&tt]:tt<55296||tt>=57344?at+=t[224|tt>>12]+t[128|tt>>6&63]+t[128|63&tt]:(tt=65536+((1023&tt)<<10|1023&lt.charCodeAt(bt+=1)),at+=t[240|tt>>18]+t[128|tt>>12&63]+t[128|tt>>6&63]+t[128|63&tt])}return at},isBuffer:function(it){return!(!it||"object"!=typeof it||!(it.constructor&&it.constructor.isBuffer&&it.constructor.isBuffer(it)))},isRegExp:function(it){return"[object RegExp]"===Object.prototype.toString.call(it)},maybeMap:function(it,ot){if(e(it)){for(var wt=[],ct=0;ct<it.length;ct+=1)wt.push(ot(it[ct]));return wt}return ot(it)},merge:function vt(it,ot,wt){if(!ot)return it;if("object"!=typeof ot){if(e(it))it.push(ot);else{if(!it||"object"!=typeof it)return[it,ot];(wt&&(wt.plainObjects||wt.allowPrototypes)||!p.call(Object.prototype,ot))&&(it[ot]=!0)}return it}if(!it||"object"!=typeof it)return[it].concat(ot);var ct=it;return e(it)&&!e(ot)&&(ct=o(it,wt)),e(it)&&e(ot)?(ot.forEach(function(yt,lt){if(p.call(it,lt)){var at=it[lt];at&&"object"==typeof at&&yt&&"object"==typeof yt?it[lt]=vt(at,yt,wt):it.push(yt)}else it[lt]=yt}),it):Object.keys(ot).reduce(function(yt,lt){var at=ot[lt];return yt[lt]=p.call(yt,lt)?vt(yt[lt],at,wt):at,yt},ct)}}},57051:L=>{var W=L.exports=function(G){return new m(G)};function m(G){this.value=G}function y(G,Z,vt){var it=[],ot=[],wt=!0;return function ct(yt){var lt=vt?p(yt):yt,at={},bt=!0,tt={node:lt,node_:yt,path:[].concat(it),parent:ot[ot.length-1],parents:ot,key:it.slice(-1)[0],isRoot:0===it.length,level:it.length,circular:null,update:function(dt,nt){tt.isRoot||(tt.parent.node[tt.key]=dt),tt.node=dt,nt&&(bt=!1)},delete:function(dt){delete tt.parent.node[tt.key],dt&&(bt=!1)},remove:function(dt){O(tt.parent.node)?tt.parent.node.splice(tt.key,1):delete tt.parent.node[tt.key],dt&&(bt=!1)},keys:null,before:function(dt){at.before=dt},after:function(dt){at.after=dt},pre:function(dt){at.pre=dt},post:function(dt){at.post=dt},stop:function(){wt=!1},block:function(){bt=!1}};if(!wt)return tt;function Rt(){if("object"==typeof tt.node&&null!==tt.node){(!tt.keys||tt.node_!==tt.node)&&(tt.keys=e(tt.node)),tt.isLeaf=0==tt.keys.length;for(var dt=0;dt<ot.length;dt++)if(ot[dt].node_===yt){tt.circular=ot[dt];break}}else tt.isLeaf=!0,tt.keys=null;tt.notLeaf=!tt.isLeaf,tt.notRoot=!tt.isRoot}Rt();var mt=Z.call(tt,tt.node);return void 0!==mt&&tt.update&&tt.update(mt),at.before&&at.before.call(tt,tt.node),bt&&("object"==typeof tt.node&&null!==tt.node&&!tt.circular&&(ot.push(tt),Rt(),H(tt.keys,function(dt,nt){it.push(dt),at.pre&&at.pre.call(tt,tt.node[dt],dt);var st=ct(tt.node[dt]);vt&&V.call(tt.node,dt)&&(tt.node[dt]=st.node),st.isLast=nt==tt.keys.length-1,st.isFirst=0==nt,at.post&&at.post.call(tt,st),it.pop()}),ot.pop()),at.after&&at.after.call(tt,tt.node)),tt}(G).node}function p(G){if("object"==typeof G&&null!==G){var Z;if(O(G))Z=[];else if(function(G){return"[object Date]"===t(G)}(G))Z=new Date(G.getTime?G.getTime():G);else if(function(G){return"[object RegExp]"===t(G)}(G))Z=new RegExp(G);else if(function(G){return"[object Error]"===t(G)}(G))Z={message:G.message};else if(function(G){return"[object Boolean]"===t(G)}(G))Z=new Boolean(G);else if(function(G){return"[object Number]"===t(G)}(G))Z=new Number(G);else if(function(G){return"[object String]"===t(G)}(G))Z=new String(G);else if(Object.create&&Object.getPrototypeOf)Z=Object.create(Object.getPrototypeOf(G));else if(G.constructor===Object)Z={};else{var it=function(){};it.prototype=G.constructor&&G.constructor.prototype||G.__proto__||{},Z=new it}return H(e(G),function(ot){Z[ot]=G[ot]}),Z}return G}m.prototype.get=function(G){for(var Z=this.value,vt=0;vt<G.length;vt++){var it=G[vt];if(!Z||!V.call(Z,it)){Z=void 0;break}Z=Z[it]}return Z},m.prototype.has=function(G){for(var Z=this.value,vt=0;vt<G.length;vt++){var it=G[vt];if(!Z||!V.call(Z,it))return!1;Z=Z[it]}return!0},m.prototype.set=function(G,Z){for(var vt=this.value,it=0;it<G.length-1;it++){var ot=G[it];V.call(vt,ot)||(vt[ot]={}),vt=vt[ot]}return vt[G[it]]=Z,Z},m.prototype.map=function(G){return y(this.value,G,!0)},m.prototype.forEach=function(G){return this.value=y(this.value,G,!1),this.value},m.prototype.reduce=function(G,Z){var vt=1===arguments.length,it=vt?this.value:Z;return this.forEach(function(ot){(!this.isRoot||!vt)&&(it=G.call(this,it,ot))}),it},m.prototype.paths=function(){var G=[];return this.forEach(function(Z){G.push(this.path)}),G},m.prototype.nodes=function(){var G=[];return this.forEach(function(Z){G.push(this.node)}),G},m.prototype.clone=function(){var G=[],Z=[];return function vt(it){for(var ot=0;ot<G.length;ot++)if(G[ot]===it)return Z[ot];if("object"==typeof it&&null!==it){var wt=p(it);return G.push(it),Z.push(wt),H(e(it),function(ct){wt[ct]=vt(it[ct])}),G.pop(),Z.pop(),wt}return it}(this.value)};var e=Object.keys||function(Z){var vt=[];for(var it in Z)vt.push(it);return vt};function t(G){return Object.prototype.toString.call(G)}var O=Array.isArray||function(Z){return"[object Array]"===Object.prototype.toString.call(Z)},H=function(G,Z){if(G.forEach)return G.forEach(Z);for(var vt=0;vt<G.length;vt++)Z(G[vt],vt,G)};H(e(m.prototype),function(G){W[G]=function(Z){var vt=[].slice.call(arguments,1),it=new m(Z);return it[G].apply(it,vt)}});var V=Object.hasOwnProperty||function(G,Z){return Z in G}},46486:function(L,W,m){var y;L=m.nmd(L),function(p){"object"==typeof global&&global;var o,s=2147483647,c=36,vt=/^xn--/,it=/[^\x20-\x7E]/,ot=/[\x2E\u3002\uFF0E\uFF61]/g,wt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},yt=Math.floor,lt=String.fromCharCode;function bt(me){throw RangeError(wt[me])}function tt(me,Be){for(var Ge=me.length,si=[];Ge--;)si[Ge]=Be(me[Ge]);return si}function Rt(me,Be){var Ge=me.split("@"),si="";return Ge.length>1&&(si=Ge[0]+"@",me=Ge[1]),si+tt((me=me.replace(ot,".")).split("."),Be).join(".")}function mt(me){for(var Qe,Ne,Be=[],Ge=0,si=me.length;Ge<si;)(Qe=me.charCodeAt(Ge++))>=55296&&Qe<=56319&&Ge<si?56320==(64512&(Ne=me.charCodeAt(Ge++)))?Be.push(((1023&Qe)<<10)+(1023&Ne)+65536):(Be.push(Qe),Ge--):Be.push(Qe);return Be}function dt(me){return tt(me,function(Be){var Ge="";return Be>65535&&(Ge+=lt((Be-=65536)>>>10&1023|55296),Be=56320|1023&Be),Ge+lt(Be)}).join("")}function nt(me){return me-48<10?me-22:me-65<26?me-65:me-97<26?me-97:c}function st(me,Be){return me+22+75*(me<26)-((0!=Be)<<5)}function Gt(me,Be,Ge){var si=0;for(me=Ge?yt(me/700):me>>1,me+=yt(me/Be);me>455;si+=c)me=yt(me/35);return yt(si+36*me/(me+38))}function It(me){var si,we,Ve,ui,Ke,be,Xt,re,Me,vi,Be=[],Ge=me.length,Qe=0,Ne=128,pe=72;for((we=me.lastIndexOf("-"))<0&&(we=0),Ve=0;Ve<we;++Ve)me.charCodeAt(Ve)>=128&&bt("not-basic"),Be.push(me.charCodeAt(Ve));for(ui=we>0?we+1:0;ui<Ge;){for(Ke=Qe,be=1,Xt=c;ui>=Ge&&bt("invalid-input"),((re=nt(me.charCodeAt(ui++)))>=c||re>yt((s-Qe)/be))&&bt("overflow"),Qe+=re*be,!(re<(Me=Xt<=pe?1:Xt>=pe+26?26:Xt-pe));Xt+=c)be>yt(s/(vi=c-Me))&&bt("overflow"),be*=vi;pe=Gt(Qe-Ke,si=Be.length+1,0==Ke),yt(Qe/si)>s-Ne&&bt("overflow"),Ne+=yt(Qe/si),Qe%=si,Be.splice(Qe++,0,Ne)}return dt(Be)}function Vt(me){var Be,Ge,si,Qe,Ne,pe,we,Ve,ui,Ke,be,re,Me,vi,ie,Xt=[];for(re=(me=mt(me)).length,Be=128,Ge=0,Ne=72,pe=0;pe<re;++pe)(be=me[pe])<128&&Xt.push(lt(be));for(si=Qe=Xt.length,Qe&&Xt.push("-");si<re;){for(we=s,pe=0;pe<re;++pe)(be=me[pe])>=Be&&be<we&&(we=be);for(we-Be>yt((s-Ge)/(Me=si+1))&&bt("overflow"),Ge+=(we-Be)*Me,Be=we,pe=0;pe<re;++pe)if((be=me[pe])<Be&&++Ge>s&&bt("overflow"),be==Be){for(Ve=Ge,ui=c;!(Ve<(Ke=ui<=Ne?1:ui>=Ne+26?26:ui-Ne));ui+=c)Xt.push(lt(st(Ke+(ie=Ve-Ke)%(vi=c-Ke),0))),Ve=yt(ie/vi);Xt.push(lt(st(Ve,0))),Ne=Gt(Ge,Me,si==Qe),Ge=0,++si}++Ge,++Be}return Xt.join("")}o={version:"1.3.2",ucs2:{decode:mt,encode:dt},decode:It,encode:Vt,toASCII:function(me){return Rt(me,function(Be){return it.test(Be)?"xn--"+Vt(Be):Be})},toUnicode:function(me){return Rt(me,function(Be){return vt.test(Be)?It(Be.slice(4).toLowerCase()):Be})}},void 0!==(y=function(){return o}.call(W,m,W,L))&&(L.exports=y)}()},5128:(L,W,m)=>{"use strict";var y=m(46486),p=m(77107);function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}W.parse=wt,W.resolve=function(at,bt){return wt(at,!1,!0).resolve(bt)},W.resolveObject=function(at,bt){return at?wt(at,!1,!0).resolveObject(bt):bt},W.format=function(at){return p.isString(at)&&(at=wt(at)),at instanceof e?at.format():e.prototype.format.call(at)},W.Url=e;var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),v=["'"].concat(c),R=["%","/","?",";","#"].concat(v),O=["/","?","#"],V=/^[+a-z0-9A-Z_-]{0,63}$/,G=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Z={javascript:!0,"javascript:":!0},vt={javascript:!0,"javascript:":!0},it={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ot=m(36e3);function wt(at,bt,tt){if(at&&p.isObject(at)&&at instanceof e)return at;var Rt=new e;return Rt.parse(at,bt,tt),Rt}e.prototype.parse=function(at,bt,tt){if(!p.isString(at))throw new TypeError("Parameter 'url' must be a string, not "+typeof at);var Rt=at.indexOf("?"),mt=-1!==Rt&&Rt<at.indexOf("#")?"?":"#",dt=at.split(mt);dt[0]=dt[0].replace(/\\/g,"/");var st=at=dt.join(mt);if(st=st.trim(),!tt&&1===at.split("#").length){var Gt=o.exec(st);if(Gt)return this.path=st,this.href=st,this.pathname=Gt[1],Gt[2]?(this.search=Gt[2],this.query=bt?ot.parse(this.search.substr(1)):this.search.substr(1)):bt&&(this.search="",this.query={}),this}var It=t.exec(st);if(It){var Vt=(It=It[0]).toLowerCase();this.protocol=Vt,st=st.substr(It.length)}if(tt||It||st.match(/^\/\/[^@\/]+@[^@\/]+/)){var Ie="//"===st.substr(0,2);Ie&&(!It||!vt[It])&&(st=st.substr(2),this.slashes=!0)}if(!vt[It]&&(Ie||It&&!it[It])){for(var Ze=-1,me=0;me<O.length;me++)-1!==(Be=st.indexOf(O[me]))&&(-1===Ze||Be<Ze)&&(Ze=Be);var Ge,si;for(-1!==(si=-1===Ze?st.lastIndexOf("@"):st.lastIndexOf("@",Ze))&&(Ge=st.slice(0,si),st=st.slice(si+1),this.auth=decodeURIComponent(Ge)),Ze=-1,me=0;me<R.length;me++){var Be;-1!==(Be=st.indexOf(R[me]))&&(-1===Ze||Be<Ze)&&(Ze=Be)}-1===Ze&&(Ze=st.length),this.host=st.slice(0,Ze),st=st.slice(Ze),this.parseHost(),this.hostname=this.hostname||"";var Qe="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Qe)for(var Ne=this.hostname.split(/\./),pe=(me=0,Ne.length);me<pe;me++){var we=Ne[me];if(we&&!we.match(V)){for(var Ve="",ui=0,Ke=we.length;ui<Ke;ui++)we.charCodeAt(ui)>127?Ve+="x":Ve+=we[ui];if(!Ve.match(V)){var be=Ne.slice(0,me),Xt=Ne.slice(me+1),re=we.match(G);re&&(be.push(re[1]),Xt.unshift(re[2])),Xt.length&&(st="/"+Xt.join(".")+st),this.hostname=be.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Qe||(this.hostname=y.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Qe&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==st[0]&&(st="/"+st))}if(!Z[Vt])for(me=0,pe=v.length;me<pe;me++){var ie=v[me];if(-1!==st.indexOf(ie)){var Ut=encodeURIComponent(ie);Ut===ie&&(Ut=escape(ie)),st=st.split(ie).join(Ut)}}var Ht=st.indexOf("#");-1!==Ht&&(this.hash=st.substr(Ht),st=st.slice(0,Ht));var Zt=st.indexOf("?");return-1!==Zt?(this.search=st.substr(Zt),this.query=st.substr(Zt+1),bt&&(this.query=ot.parse(this.query)),st=st.slice(0,Zt)):bt&&(this.search="",this.query={}),st&&(this.pathname=st),it[Vt]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},e.prototype.format=function(){var at=this.auth||"";at&&(at=(at=encodeURIComponent(at)).replace(/%3A/i,":"),at+="@");var bt=this.protocol||"",tt=this.pathname||"",Rt=this.hash||"",mt=!1,dt="";this.host?mt=at+this.host:this.hostname&&(mt=at+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(mt+=":"+this.port)),this.query&&p.isObject(this.query)&&Object.keys(this.query).length&&(dt=ot.stringify(this.query));var nt=this.search||dt&&"?"+dt||"";return bt&&":"!==bt.substr(-1)&&(bt+=":"),this.slashes||(!bt||it[bt])&&!1!==mt?(mt="//"+(mt||""),tt&&"/"!==tt.charAt(0)&&(tt="/"+tt)):mt||(mt=""),Rt&&"#"!==Rt.charAt(0)&&(Rt="#"+Rt),nt&&"?"!==nt.charAt(0)&&(nt="?"+nt),bt+mt+(tt=tt.replace(/[?#]/g,function(st){return encodeURIComponent(st)}))+(nt=nt.replace("#","%23"))+Rt},e.prototype.resolve=function(at){return this.resolveObject(wt(at,!1,!0)).format()},e.prototype.resolveObject=function(at){if(p.isString(at)){var bt=new e;bt.parse(at,!1,!0),at=bt}for(var tt=new e,Rt=Object.keys(this),mt=0;mt<Rt.length;mt++){var dt=Rt[mt];tt[dt]=this[dt]}if(tt.hash=at.hash,""===at.href)return tt.href=tt.format(),tt;if(at.slashes&&!at.protocol){for(var nt=Object.keys(at),st=0;st<nt.length;st++){var Gt=nt[st];"protocol"!==Gt&&(tt[Gt]=at[Gt])}return it[tt.protocol]&&tt.hostname&&!tt.pathname&&(tt.path=tt.pathname="/"),tt.href=tt.format(),tt}if(at.protocol&&at.protocol!==tt.protocol){if(!it[at.protocol]){for(var It=Object.keys(at),Vt=0;Vt<It.length;Vt++){var Ie=It[Vt];tt[Ie]=at[Ie]}return tt.href=tt.format(),tt}if(tt.protocol=at.protocol,at.host||vt[at.protocol])tt.pathname=at.pathname;else{for(var pe=(at.pathname||"").split("/");pe.length&&!(at.host=pe.shift()););at.host||(at.host=""),at.hostname||(at.hostname=""),""!==pe[0]&&pe.unshift(""),pe.length<2&&pe.unshift(""),tt.pathname=pe.join("/")}return tt.search=at.search,tt.query=at.query,tt.host=at.host||"",tt.auth=at.auth,tt.hostname=at.hostname||at.host,tt.port=at.port,(tt.pathname||tt.search)&&(tt.path=(tt.pathname||"")+(tt.search||"")),tt.slashes=tt.slashes||at.slashes,tt.href=tt.format(),tt}var Be=tt.pathname&&"/"===tt.pathname.charAt(0),Ge=at.host||at.pathname&&"/"===at.pathname.charAt(0),si=Ge||Be||tt.host&&at.pathname,Qe=si,Ne=tt.pathname&&tt.pathname.split("/")||[],we=(pe=at.pathname&&at.pathname.split("/")||[],tt.protocol&&!it[tt.protocol]);if(we&&(tt.hostname="",tt.port=null,tt.host&&(""===Ne[0]?Ne[0]=tt.host:Ne.unshift(tt.host)),tt.host="",at.protocol&&(at.hostname=null,at.port=null,at.host&&(""===pe[0]?pe[0]=at.host:pe.unshift(at.host)),at.host=null),si=si&&(""===pe[0]||""===Ne[0])),Ge)tt.host=at.host||""===at.host?at.host:tt.host,tt.hostname=at.hostname||""===at.hostname?at.hostname:tt.hostname,tt.search=at.search,tt.query=at.query,Ne=pe;else if(pe.length)Ne||(Ne=[]),Ne.pop(),Ne=Ne.concat(pe),tt.search=at.search,tt.query=at.query;else if(!p.isNullOrUndefined(at.search))return we&&(tt.hostname=tt.host=Ne.shift(),(Ve=!!(tt.host&&tt.host.indexOf("@")>0)&&tt.host.split("@"))&&(tt.auth=Ve.shift(),tt.host=tt.hostname=Ve.shift())),tt.search=at.search,tt.query=at.query,(!p.isNull(tt.pathname)||!p.isNull(tt.search))&&(tt.path=(tt.pathname?tt.pathname:"")+(tt.search?tt.search:"")),tt.href=tt.format(),tt;if(!Ne.length)return tt.pathname=null,tt.path=tt.search?"/"+tt.search:null,tt.href=tt.format(),tt;for(var ui=Ne.slice(-1)[0],Ke=(tt.host||at.host||Ne.length>1)&&("."===ui||".."===ui)||""===ui,be=0,Xt=Ne.length;Xt>=0;Xt--)"."===(ui=Ne[Xt])?Ne.splice(Xt,1):".."===ui?(Ne.splice(Xt,1),be++):be&&(Ne.splice(Xt,1),be--);if(!si&&!Qe)for(;be--;be)Ne.unshift("..");si&&""!==Ne[0]&&(!Ne[0]||"/"!==Ne[0].charAt(0))&&Ne.unshift(""),Ke&&"/"!==Ne.join("/").substr(-1)&&Ne.push("");var Ve,re=""===Ne[0]||Ne[0]&&"/"===Ne[0].charAt(0);return we&&(tt.hostname=tt.host=re?"":Ne.length?Ne.shift():"",(Ve=!!(tt.host&&tt.host.indexOf("@")>0)&&tt.host.split("@"))&&(tt.auth=Ve.shift(),tt.host=tt.hostname=Ve.shift())),(si=si||tt.host&&Ne.length)&&!re&&Ne.unshift(""),Ne.length?tt.pathname=Ne.join("/"):(tt.pathname=null,tt.path=null),(!p.isNull(tt.pathname)||!p.isNull(tt.search))&&(tt.path=(tt.pathname?tt.pathname:"")+(tt.search?tt.search:"")),tt.auth=at.auth||tt.auth,tt.slashes=tt.slashes||at.slashes,tt.href=tt.format(),tt},e.prototype.parseHost=function(){var at=this.host,bt=n.exec(at);bt&&(":"!==(bt=bt[0])&&(this.port=bt.substr(1)),at=at.substr(0,at.length-bt.length)),at&&(this.hostname=at)}},77107:L=>{"use strict";L.exports={isString:function(W){return"string"==typeof W},isObject:function(W){return"object"==typeof W&&null!==W},isNull:function(W){return null===W},isNullOrUndefined:function(W){return null==W}}},17131:L=>{L.exports=function p(e,t,n){function o(v,R){if(!t[v]){if(!e[v]){if(s)return s(v,!0);var H=new Error("Cannot find module '"+v+"'");throw H.code="MODULE_NOT_FOUND",H}var V=t[v]={exports:{}};e[v][0].call(V.exports,function(G){return o(e[v][1][G]||G)},V,V.exports,p,e,t,n)}return t[v].exports}for(var s=void 0,c=0;c<n.length;c++)o(n[c]);return o}({1:[function(p,e,t){"use strict";e.exports=function n(o){if(!o||"object"!=typeof o)return o;if("[object Date]"==Object.prototype.toString.call(o))return new Date(o.getTime());if(Array.isArray(o))return o.map(n);var s={};return Object.keys(o).forEach(function(c){s[c]=n(o[c])}),s}},{}],2:[function(p,e,t){e.exports=function(v,R){if("string"!=typeof v)throw new TypeError("String expected");R||(R=document);var O=/<([\w:]+)/.exec(v);if(!O)return R.createTextNode(v);v=v.replace(/^\s+|\s+$/g,"");var H=O[1];if("body"==H)return(it=R.createElement("html")).innerHTML=v,it.removeChild(it.lastChild);var it,V=s[H]||s._default,G=V[0],Z=V[1],vt=V[2];for((it=R.createElement("div")).innerHTML=Z+v+vt;G--;)it=it.lastChild;if(it.firstChild==it.lastChild)return it.removeChild(it.firstChild);for(var ot=R.createDocumentFragment();it.firstChild;)ot.appendChild(it.removeChild(it.firstChild));return ot};var o,n=!1;"undefined"!=typeof document&&((o=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',n=!o.getElementsByTagName("link").length,o=void 0);var s={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:n?[1,"X<div>","</div>"]:[0,"",""]};s.td=s.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],s.option=s.optgroup=[1,'<select multiple="multiple">',"</select>"],s.thead=s.tbody=s.colgroup=s.caption=s.tfoot=[1,"<table>","</table>"],s.polyline=s.ellipse=s.polygon=s.circle=s.text=s.line=s.path=s.rect=s.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],3:[function(p,e,t){var n=/^(?:submit|button|image|reset|file)$/i,o=/^(?:input|select|textarea|keygen)/i,s=/(\[[^\[\]]*\])/g;function R(V,G,Z){if(0===G.length)return Z;var vt=G.shift(),it=vt.match(/^\[(.+?)\]$/);if("[]"===vt)return V=V||[],Array.isArray(V)?V.push(R(null,G,Z)):(V._values=V._values||[],V._values.push(R(null,G,Z))),V;if(it){var ot=it[1],wt=+ot;isNaN(wt)?(V=V||{})[ot]=R(V[ot],G,Z):(V=V||[])[wt]=R(V[wt],G,Z)}else V[vt]=R(V[vt],G,Z);return V}function O(V,G,Z){if(G.match(s))R(V,function(V){var G=[],vt=new RegExp(s),it=/^([^\[\]]*)/.exec(V);for(it[1]&&G.push(it[1]);null!==(it=vt.exec(V));)G.push(it[1]);return G}(G),Z);else{var ot=V[G];ot?(Array.isArray(ot)||(V[G]=[ot]),V[G].push(Z)):V[G]=Z}return V}function H(V,G,Z){return Z=Z.replace(/(\r)?\n/g,"\r\n"),Z=(Z=encodeURIComponent(Z)).replace(/%20/g,"+"),V+(V?"&":"")+encodeURIComponent(G)+"="+Z}e.exports=function(V,G){"object"!=typeof G?G={hash:!!G}:void 0===G.hash&&(G.hash=!0);for(var Z=G.hash?{}:"",vt=G.serializer||(G.hash?O:H),it=V&&V.elements?V.elements:[],ot=Object.create(null),wt=0;wt<it.length;++wt){var ct=it[wt];if((G.disabled||!ct.disabled)&&ct.name&&o.test(ct.nodeName)&&!n.test(ct.type)){var yt=ct.name,lt=ct.value;if(("checkbox"===ct.type||"radio"===ct.type)&&!ct.checked&&(lt=void 0),G.empty){if("checkbox"===ct.type&&!ct.checked&&(lt=""),"radio"===ct.type&&(ot[ct.name]||ct.checked?ct.checked&&(ot[ct.name]=!0):ot[ct.name]=!1),!lt&&"radio"==ct.type)continue}else if(!lt)continue;if("select-multiple"===ct.type){lt=[];for(var at=ct.options,bt=!1,tt=0;tt<at.length;++tt){var Rt=at[tt];Rt.selected&&(Rt.value||G.empty&&!Rt.value)&&(bt=!0,Z=G.hash&&"[]"!==yt.slice(yt.length-2)?vt(Z,yt+"[]",Rt.value):vt(Z,yt,Rt.value))}!bt&&G.empty&&(Z=vt(Z,yt,""));continue}Z=vt(Z,yt,lt)}}if(G.empty)for(var yt in ot)ot[yt]||(Z=vt(Z,yt,""));return Z}},{}],4:[function(p,e,t){var n=p("domify"),o=p("form-serialize"),s=p("deep-clone-simple"),v=function(H){var V=document.createElement("div");V.classList.add("vex-dialog-buttons");for(var G=0;G<H.length;G++){var Z=H[G],vt=document.createElement("button");vt.type=Z.type,vt.textContent=Z.text,vt.className=Z.className,vt.classList.add("vex-dialog-button"),0===G?vt.classList.add("vex-first"):G===H.length-1&&vt.classList.add("vex-last"),function(it){vt.addEventListener("click",function(ot){it.click&&it.click.call(this,ot)}.bind(this))}.bind(this)(Z),V.appendChild(vt)}return V};e.exports=function(H){var V={name:"dialog",open:function(Z){var vt=Object.assign({},s(this.defaultOptions),Z);vt.unsafeMessage&&!vt.message?vt.message=vt.unsafeMessage:vt.message&&(vt.message=H._escapeHtml(vt.message));var it=vt.unsafeContent=function(H){var V=document.createElement("form");V.classList.add("vex-dialog-form");var G=document.createElement("div");G.classList.add("vex-dialog-message"),G.appendChild(H.message instanceof window.Node?H.message:n(H.message));var Z=document.createElement("div");return Z.classList.add("vex-dialog-input"),Z.appendChild(H.input instanceof window.Node?H.input:n(H.input)),V.appendChild(G),V.appendChild(Z),V}(vt),ot=H.open(vt);""!==vt.yesText&&(vt.buttons[0].text=vt.yesText),""!==vt.noText&&(vt.buttons[1].text=vt.noText);var wt=vt.beforeClose&&vt.beforeClose.bind(ot);if(ot.options.beforeClose=function(){var lt=!wt||wt();return lt&&vt.callback(this.value||!1),lt}.bind(ot),it.appendChild(v.call(ot,vt.buttons)),ot.form=it,it.addEventListener("submit",vt.onSubmit.bind(ot)),vt.focusFirstInput){var ct=ot.contentEl.querySelector("button, input, select, textarea");ct&&ct.focus()}return ot},alert:function(G){return"string"==typeof G&&(G={message:G}),G=Object.assign({},s(this.defaultOptions),s(this.defaultAlertOptions),G),this.open(G)},confirm:function(G){if("object"!=typeof G||"function"!=typeof G.callback)throw new Error("dialog.confirm(options) requires options.callback.");return G=Object.assign({},s(this.defaultOptions),s(this.defaultConfirmOptions),G),this.open(G)},prompt:function(G){if("object"!=typeof G||"function"!=typeof G.callback)throw new Error("dialog.prompt(options) requires options.callback.");var Z=Object.assign({},s(this.defaultOptions),s(this.defaultPromptOptions)),vt={unsafeMessage:'<label for="vex">'+H._escapeHtml(G.label||Z.label)+"</label>",input:'<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="'+H._escapeHtml(G.placeholder||Z.placeholder)+'" value="'+H._escapeHtml(G.value||Z.value)+'" />'},it=(G=Object.assign(Z,vt,G)).callback;return G.callback=function(wt){if("object"==typeof wt){var ct=Object.keys(wt);wt=ct.length?wt[ct[0]]:""}it(wt)},this.open(G)},buttons:{YES:{text:"OK",type:"submit",className:"vex-dialog-button-primary",click:function(){this.value=!0}},NO:{text:"Cancel",type:"button",className:"vex-dialog-button-secondary",click:function(){this.value=!1,this.close()}}}};return V.defaultOptions={callback:function(){},afterOpen:function(){},message:"",input:"",yesText:"",noText:"",buttons:[V.buttons.YES,V.buttons.NO],showCloseButton:!1,onSubmit:function(Z){return Z.preventDefault(),this.options.input&&(this.value=o(this.form,{hash:!0})),this.close()},focusFirstInput:!0},V.defaultAlertOptions={buttons:[V.buttons.YES]},V.defaultPromptOptions={label:"Prompt:",placeholder:"",value:""},V.defaultConfirmOptions={},V}},{"deep-clone-simple":1,domify:2,"form-serialize":3}]},{},[4])(4)},61058:L=>{L.exports=function p(e,t,n){function o(v,R){if(!t[v]){if(!e[v]){if(s)return s(v,!0);var H=new Error("Cannot find module '"+v+"'");throw H.code="MODULE_NOT_FOUND",H}var V=t[v]={exports:{}};e[v][0].call(V.exports,function(G){return o(e[v][1][G]||G)},V,V.exports,p,e,t,n)}return t[v].exports}for(var s=void 0,c=0;c<n.length;c++)o(n[c]);return o}({1:[function(p,e,t){"document"in window.self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(n){"use strict";if("Element"in n){var o="classList",s="prototype",c=n.Element[s],v=Object,R=String[s].trim||function(){return this.replace(/^\s+|\s+$/g,"")},O=Array[s].indexOf||function(ot){for(var wt=0,ct=this.length;wt<ct;wt++)if(wt in this&&this[wt]===ot)return wt;return-1},H=function(ot,wt){this.name=ot,this.code=DOMException[ot],this.message=wt},V=function(ot,wt){if(""===wt)throw new H("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(wt))throw new H("INVALID_CHARACTER_ERR","String contains an invalid character");return O.call(ot,wt)},G=function(ot){for(var wt=R.call(ot.getAttribute("class")||""),ct=wt?wt.split(/\s+/):[],yt=0,lt=ct.length;yt<lt;yt++)this.push(ct[yt]);this._updateClassName=function(){ot.setAttribute("class",this.toString())}},Z=G[s]=[],vt=function(){return new G(this)};if(H[s]=Error[s],Z.item=function(ot){return this[ot]||null},Z.contains=function(ot){return-1!==V(this,ot+="")},Z.add=function(){var yt,ot=arguments,wt=0,ct=ot.length,lt=!1;do{-1===V(this,yt=ot[wt]+"")&&(this.push(yt),lt=!0)}while(++wt<ct);lt&&this._updateClassName()},Z.remove=function(){var yt,at,ot=arguments,wt=0,ct=ot.length,lt=!1;do{for(at=V(this,yt=ot[wt]+"");-1!==at;)this.splice(at,1),lt=!0,at=V(this,yt)}while(++wt<ct);lt&&this._updateClassName()},Z.toggle=function(ot,wt){var ct=this.contains(ot+=""),yt=ct?!0!==wt&&"remove":!1!==wt&&"add";return yt&&this[yt](ot),!0===wt||!1===wt?wt:!ct},Z.toString=function(){return this.join(" ")},v.defineProperty){var it={get:vt,enumerable:!0,configurable:!0};try{v.defineProperty(c,o,it)}catch(ot){(void 0===ot.number||-2146823252===ot.number)&&(it.enumerable=!1,v.defineProperty(c,o,it))}}else v[s].__defineGetter__&&c.__defineGetter__(o,vt)}}(window.self),function(){"use strict";var n=document.createElement("_");if(n.classList.add("c1","c2"),!n.classList.contains("c2")){var o=function(c){var v=DOMTokenList.prototype[c];DOMTokenList.prototype[c]=function(R){var O,H=arguments.length;for(O=0;O<H;O++)v.call(this,R=arguments[O])}};o("add"),o("remove")}if(n.classList.toggle("c3",!1),n.classList.contains("c3")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,v){return 1 in arguments&&!this.contains(c)==!v?v:s.call(this,c)}}n=null}())},{}],2:[function(p,e,t){e.exports=function(v,R){if("string"!=typeof v)throw new TypeError("String expected");R||(R=document);var O=/<([\w:]+)/.exec(v);if(!O)return R.createTextNode(v);v=v.replace(/^\s+|\s+$/g,"");var H=O[1];if("body"==H)return(it=R.createElement("html")).innerHTML=v,it.removeChild(it.lastChild);var it,V=s[H]||s._default,G=V[0],Z=V[1],vt=V[2];for((it=R.createElement("div")).innerHTML=Z+v+vt;G--;)it=it.lastChild;if(it.firstChild==it.lastChild)return it.removeChild(it.firstChild);for(var ot=R.createDocumentFragment();it.firstChild;)ot.appendChild(it.removeChild(it.firstChild));return ot};var o,n=!1;"undefined"!=typeof document&&((o=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',n=!o.getElementsByTagName("link").length,o=void 0);var s={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:n?[1,"X<div>","</div>"]:[0,"",""]};s.td=s.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],s.option=s.optgroup=[1,'<select multiple="multiple">',"</select>"],s.thead=s.tbody=s.colgroup=s.caption=s.tfoot=[1,"<table>","</table>"],s.polyline=s.ellipse=s.polygon=s.circle=s.text=s.line=s.path=s.rect=s.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],3:[function(p,e,t){"use strict";function n(s,c){if(null==s)throw new TypeError("Cannot convert first argument to object");for(var v=Object(s),R=1;R<arguments.length;R++){var O=arguments[R];if(null!=O)for(var H=Object.keys(Object(O)),V=0,G=H.length;V<G;V++){var Z=H[V],vt=Object.getOwnPropertyDescriptor(O,Z);void 0!==vt&&vt.enumerable&&(v[Z]=O[Z])}}return v}e.exports={assign:n,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n})}}},{}],4:[function(p,e,t){p("classlist-polyfill"),p("es6-object-assign").polyfill();var n=p("domify"),o=function(Z){if(void 0!==Z){var vt=document.createElement("div");return vt.appendChild(document.createTextNode(Z)),vt.innerHTML}return""},s=function(Z,vt){if("string"==typeof vt&&0!==vt.length)for(var it=vt.split(" "),ot=0;ot<it.length;ot++){var wt=it[ot];wt.length&&Z.classList.add(wt)}},c=function(){var Z=document.createElement("div"),vt={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oanimationend",msAnimation:"MSAnimationEnd"};for(var it in vt)if(void 0!==Z.style[it])return vt[it];return!1}(),v_vex="vex",v_content="vex-content",v_overlay="vex-overlay",v_close="vex-close",v_closing="vex-closing",v_open="vex-open",R={},O=1,H=!1,V={open:function(Z){var vt=function(tt){console.warn('The "'+tt+'" property is deprecated in vex 3. Use CSS classes and the appropriate "ClassName" options, instead.'),console.warn("See http://github.hubspot.com/vex/api/advanced/#options")};Z.css&&vt("css"),Z.overlayCSS&&vt("overlayCSS"),Z.contentCSS&&vt("contentCSS"),Z.closeCSS&&vt("closeCSS");var it={};it.id=O++,R[it.id]=it,it.isOpen=!0,it.close=function(){if(!this.isOpen)return!0;var tt=this.options;if(H&&!tt.escapeButtonCloses)return!1;if(!1===function(){return!tt.beforeClose||tt.beforeClose.call(this)}.bind(this)())return!1;this.isOpen=!1;var mt=window.getComputedStyle(this.contentEl);function dt(Gt){return"none"!==mt.getPropertyValue(Gt+"animation-name")&&"0s"!==mt.getPropertyValue(Gt+"animation-duration")}var nt=dt("")||dt("-webkit-")||dt("-moz-")||dt("-o-"),st=function Gt(){!this.rootEl.parentNode||(this.rootEl.removeEventListener(c,Gt),this.overlayEl.removeEventListener(c,Gt),delete R[this.id],this.rootEl.parentNode.removeChild(this.rootEl),this.bodyEl.removeChild(this.overlayEl),tt.afterClose&&tt.afterClose.call(this),0===Object.keys(R).length&&document.body.classList.remove(v_open))}.bind(this);return c&&nt?(this.rootEl.addEventListener(c,st),this.overlayEl.addEventListener(c,st),this.rootEl.classList.add(v_closing),this.overlayEl.classList.add(v_closing)):st(),!0},"string"==typeof Z&&(Z={content:Z}),Z.unsafeContent&&!Z.content?Z.content=Z.unsafeContent:Z.content&&(Z.content=o(Z.content));var ot=it.options=Object.assign({},V.defaultOptions,Z),wt=it.bodyEl=document.getElementsByTagName("body")[0],ct=it.rootEl=document.createElement("div");ct.classList.add(v_vex),s(ct,ot.className);var yt=it.overlayEl=document.createElement("div");yt.classList.add(v_overlay),s(yt,ot.overlayClassName),ot.overlayClosesOnClick&&ct.addEventListener("click",function(tt){tt.target===ct&&it.close()}),wt.appendChild(yt);var lt=it.contentEl=document.createElement("div");if(lt.classList.add(v_content),s(lt,ot.contentClassName),lt.appendChild(ot.content instanceof window.Node?ot.content:n(ot.content)),ct.appendChild(lt),ot.showCloseButton){var at=it.closeEl=document.createElement("div");at.classList.add(v_close),s(at,ot.closeClassName),at.addEventListener("click",it.close.bind(it)),lt.appendChild(at)}return document.querySelector(ot.appendLocation).appendChild(ct),ot.afterOpen&&ot.afterOpen.call(it),document.body.classList.add(v_open),it},close:function(Z){var vt;if(Z.id)vt=Z.id;else{if("string"!=typeof Z)throw new TypeError("close requires a vex object or id string");vt=Z}return!!R[vt]&&R[vt].close()},closeTop:function(){var Z=Object.keys(R);return!!Z.length&&R[Z[Z.length-1]].close()},closeAll:function(){for(var Z in R)this.close(Z);return!0},getAll:function(){return R},getById:function(Z){return R[Z]}};window.addEventListener("keyup",function(Z){27===Z.keyCode&&(H=!0,V.closeTop(),H=!1)}),window.addEventListener("popstate",function(){V.defaultOptions.closeAllOnPopState&&V.closeAll()}),V.defaultOptions={content:"",showCloseButton:!0,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",overlayClassName:"",contentClassName:"",closeClassName:"",closeAllOnPopState:!0},Object.defineProperty(V,"_escapeHtml",{configurable:!1,enumerable:!1,writable:!1,value:o}),V.registerPlugin=function(Z,vt){var it=Z(V),ot=vt||it.name;if(V[ot])throw new Error("Plugin "+vt+" is already registered.");V[ot]=it},e.exports=V},{"classlist-polyfill":1,domify:2,"es6-object-assign":3}]},{},[4])(4)},48926:L=>{function W(y,p,e,t,n,o,s){try{var c=y[o](s),v=c.value}catch(R){return void e(R)}c.done?p(v):Promise.resolve(v).then(t,n)}L.exports=function(y){return function(){var p=this,e=arguments;return new Promise(function(t,n){var o=y.apply(p,e);function s(v){W(o,t,n,s,c,"next",v)}function c(v){W(o,t,n,s,c,"throw",v)}s(void 0)})}},L.exports.default=L.exports,L.exports.__esModule=!0},35987:(L,W,m)=>{"use strict";function c(mt,dt,nt,st){return new(nt||(nt=Promise))(function(It,Vt){function Ie(Be){try{me(st.next(Be))}catch(Ge){Vt(Ge)}}function Ze(Be){try{me(st.throw(Be))}catch(Ge){Vt(Ge)}}function me(Be){Be.done?It(Be.value):function(It){return It instanceof nt?It:new nt(function(Vt){Vt(It)})}(Be.value).then(Ie,Ze)}me((st=st.apply(mt,dt||[])).next())})}function it(mt){return this instanceof it?(this.v=mt,this):new it(mt)}function ot(mt,dt,nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Gt,st=nt.apply(mt,dt||[]),It=[];return Gt={},Vt("next"),Vt("throw"),Vt("return"),Gt[Symbol.asyncIterator]=function(){return this},Gt;function Vt(si){st[si]&&(Gt[si]=function(Qe){return new Promise(function(Ne,pe){It.push([si,Qe,Ne,pe])>1||Ie(si,Qe)})})}function Ie(si,Qe){try{!function(si){si.value instanceof it?Promise.resolve(si.value.v).then(me,Be):Ge(It[0][2],si)}(st[si](Qe))}catch(Ne){Ge(It[0][3],Ne)}}function me(si){Ie("next",si)}function Be(si){Ie("throw",si)}function Ge(si,Qe){si(Qe),It.shift(),It.length&&Ie(It[0][0],It[0][1])}}function ct(mt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nt,dt=mt[Symbol.asyncIterator];return dt?dt.call(mt):(mt=function(mt){var dt="function"==typeof Symbol&&Symbol.iterator,nt=dt&&mt[dt],st=0;if(nt)return nt.call(mt);if(mt&&"number"==typeof mt.length)return{next:function(){return mt&&st>=mt.length&&(mt=void 0),{value:mt&&mt[st++],done:!mt}}};throw new TypeError(dt?"Object is not iterable.":"Symbol.iterator is not defined.")}(mt),nt={},st("next"),st("throw"),st("return"),nt[Symbol.asyncIterator]=function(){return this},nt);function st(It){nt[It]=mt[It]&&function(Vt){return new Promise(function(Ie,Ze){!function(It,Vt,Ie,Ze){Promise.resolve(Ze).then(function(me){It({value:me,done:Ie})},Vt)}(Ie,Ze,(Vt=mt[It](Vt)).done,Vt.value)})}}}m.d(W,{mG:()=>c,qq:()=>it,FC:()=>ot,KL:()=>ct})},6089:(L,W,m)=>{L.exports=m(82422)},44559:(L,W,m)=>{L.exports=m(8535)},58201:(L,W,m)=>{L.exports=m(29114)},37647:(L,W,m)=>{L.exports=m(30376)},20265:(L,W,m)=>{L.exports=m(9102)},17423:(L,W,m)=>{L.exports=m(40809)},32633:(L,W,m)=>{L.exports=m(40051)},36028:(L,W,m)=>{L.exports=m(42905)},35644:(L,W,m)=>{L.exports=m(77120)},15157:(L,W,m)=>{L.exports=m(47940)},99182:(L,W,m)=>{L.exports=m(15783)},41246:(L,W,m)=>{L.exports=m(68397)},2165:(L,W,m)=>{L.exports=m(64043)},17878:(L,W,m)=>{L.exports=m(69265)},2204:(L,W,m)=>{L.exports=m(64781)},26360:(L,W,m)=>{L.exports=m(99671)},3933:(L,W,m)=>{L.exports=m(80297)},16051:(L,W,m)=>{L.exports=m(13770)},6275:(L,W,m)=>{L.exports=m(66715)},17830:(L,W,m)=>{L.exports=m(46481)},25551:(L,W,m)=>{L.exports=m(81788)},41586:(L,W,m)=>{L.exports=m(38637)},83091:(L,W,m)=>{L.exports=m(48414)},28355:(L,W,m)=>{L.exports=m(30595)},40107:(L,W,m)=>{L.exports=m(83930)},31082:(L,W,m)=>{L.exports=m(41076)},73507:(L,W,m)=>{L.exports=m(27109)},86657:(L,W,m)=>{L.exports=m(35841)},42475:(L,W,m)=>{L.exports=m(5643)},49719:(L,W,m)=>{L.exports=m(50606)},75534:(L,W,m)=>{L.exports=m(98222)},84215:(L,W,m)=>{L.exports=m(16487)},36496:(L,W,m)=>{L.exports=m(9735)},22043:(L,W,m)=>{L.exports=m(26029)},59312:(L,W,m)=>{"use strict";m.r(W),m.d(W,{__extends:()=>p,__assign:()=>e,__rest:()=>t,__decorate:()=>n,__param:()=>o,__metadata:()=>s,__awaiter:()=>c,__generator:()=>v,__createBinding:()=>R,__exportStar:()=>O,__values:()=>H,__read:()=>V,__spread:()=>G,__spreadArrays:()=>Z,__spreadArray:()=>vt,__await:()=>it,__asyncGenerator:()=>ot,__asyncDelegator:()=>wt,__asyncValues:()=>ct,__makeTemplateObject:()=>yt,__importStar:()=>at,__importDefault:()=>bt,__classPrivateFieldGet:()=>tt,__classPrivateFieldSet:()=>Rt});var y=function(mt,dt){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,st){nt.__proto__=st}||function(nt,st){for(var Gt in st)Object.prototype.hasOwnProperty.call(st,Gt)&&(nt[Gt]=st[Gt])})(mt,dt)};function p(mt,dt){if("function"!=typeof dt&&null!==dt)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");function nt(){this.constructor=mt}y(mt,dt),mt.prototype=null===dt?Object.create(dt):(nt.prototype=dt.prototype,new nt)}var e=function(){return e=Object.assign||function(dt){for(var nt,st=1,Gt=arguments.length;st<Gt;st++)for(var It in nt=arguments[st])Object.prototype.hasOwnProperty.call(nt,It)&&(dt[It]=nt[It]);return dt},e.apply(this,arguments)};function t(mt,dt){var nt={};for(var st in mt)Object.prototype.hasOwnProperty.call(mt,st)&&dt.indexOf(st)<0&&(nt[st]=mt[st]);if(null!=mt&&"function"==typeof Object.getOwnPropertySymbols){var Gt=0;for(st=Object.getOwnPropertySymbols(mt);Gt<st.length;Gt++)dt.indexOf(st[Gt])<0&&Object.prototype.propertyIsEnumerable.call(mt,st[Gt])&&(nt[st[Gt]]=mt[st[Gt]])}return nt}function n(mt,dt,nt,st){var Vt,Gt=arguments.length,It=Gt<3?dt:null===st?st=Object.getOwnPropertyDescriptor(dt,nt):st;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)It=Reflect.decorate(mt,dt,nt,st);else for(var Ie=mt.length-1;Ie>=0;Ie--)(Vt=mt[Ie])&&(It=(Gt<3?Vt(It):Gt>3?Vt(dt,nt,It):Vt(dt,nt))||It);return Gt>3&&It&&Object.defineProperty(dt,nt,It),It}function o(mt,dt){return function(nt,st){dt(nt,st,mt)}}function s(mt,dt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(mt,dt)}function c(mt,dt,nt,st){return new(nt||(nt=Promise))(function(It,Vt){function Ie(Be){try{me(st.next(Be))}catch(Ge){Vt(Ge)}}function Ze(Be){try{me(st.throw(Be))}catch(Ge){Vt(Ge)}}function me(Be){Be.done?It(Be.value):function(It){return It instanceof nt?It:new nt(function(Vt){Vt(It)})}(Be.value).then(Ie,Ze)}me((st=st.apply(mt,dt||[])).next())})}function v(mt,dt){var st,Gt,It,Vt,nt={label:0,sent:function(){if(1&It[0])throw It[1];return It[1]},trys:[],ops:[]};return Vt={next:Ie(0),throw:Ie(1),return:Ie(2)},"function"==typeof Symbol&&(Vt[Symbol.iterator]=function(){return this}),Vt;function Ie(me){return function(Be){return function(me){if(st)throw new TypeError("Generator is already executing.");for(;nt;)try{if(st=1,Gt&&(It=2&me[0]?Gt.return:me[0]?Gt.throw||((It=Gt.return)&&It.call(Gt),0):Gt.next)&&!(It=It.call(Gt,me[1])).done)return It;switch(Gt=0,It&&(me=[2&me[0],It.value]),me[0]){case 0:case 1:It=me;break;case 4:return nt.label++,{value:me[1],done:!1};case 5:nt.label++,Gt=me[1],me=[0];continue;case 7:me=nt.ops.pop(),nt.trys.pop();continue;default:if(!(It=(It=nt.trys).length>0&&It[It.length-1])&&(6===me[0]||2===me[0])){nt=0;continue}if(3===me[0]&&(!It||me[1]>It[0]&&me[1]<It[3])){nt.label=me[1];break}if(6===me[0]&&nt.label<It[1]){nt.label=It[1],It=me;break}if(It&&nt.label<It[2]){nt.label=It[2],nt.ops.push(me);break}It[2]&&nt.ops.pop(),nt.trys.pop();continue}me=dt.call(mt,nt)}catch(Be){me=[6,Be],Gt=0}finally{st=It=0}if(5&me[0])throw me[1];return{value:me[0]?me[1]:void 0,done:!0}}([me,Be])}}}var R=Object.create?function(mt,dt,nt,st){void 0===st&&(st=nt),Object.defineProperty(mt,st,{enumerable:!0,get:function(){return dt[nt]}})}:function(mt,dt,nt,st){void 0===st&&(st=nt),mt[st]=dt[nt]};function O(mt,dt){for(var nt in mt)"default"!==nt&&!Object.prototype.hasOwnProperty.call(dt,nt)&&R(dt,mt,nt)}function H(mt){var dt="function"==typeof Symbol&&Symbol.iterator,nt=dt&&mt[dt],st=0;if(nt)return nt.call(mt);if(mt&&"number"==typeof mt.length)return{next:function(){return mt&&st>=mt.length&&(mt=void 0),{value:mt&&mt[st++],done:!mt}}};throw new TypeError(dt?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(mt,dt){var nt="function"==typeof Symbol&&mt[Symbol.iterator];if(!nt)return mt;var Gt,Vt,st=nt.call(mt),It=[];try{for(;(void 0===dt||dt-- >0)&&!(Gt=st.next()).done;)It.push(Gt.value)}catch(Ie){Vt={error:Ie}}finally{try{Gt&&!Gt.done&&(nt=st.return)&&nt.call(st)}finally{if(Vt)throw Vt.error}}return It}function G(){for(var mt=[],dt=0;dt<arguments.length;dt++)mt=mt.concat(V(arguments[dt]));return mt}function Z(){for(var mt=0,dt=0,nt=arguments.length;dt<nt;dt++)mt+=arguments[dt].length;var st=Array(mt),Gt=0;for(dt=0;dt<nt;dt++)for(var It=arguments[dt],Vt=0,Ie=It.length;Vt<Ie;Vt++,Gt++)st[Gt]=It[Vt];return st}function vt(mt,dt,nt){if(nt||2===arguments.length)for(var It,st=0,Gt=dt.length;st<Gt;st++)(It||!(st in dt))&&(It||(It=Array.prototype.slice.call(dt,0,st)),It[st]=dt[st]);return mt.concat(It||dt)}function it(mt){return this instanceof it?(this.v=mt,this):new it(mt)}function ot(mt,dt,nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Gt,st=nt.apply(mt,dt||[]),It=[];return Gt={},Vt("next"),Vt("throw"),Vt("return"),Gt[Symbol.asyncIterator]=function(){return this},Gt;function Vt(si){st[si]&&(Gt[si]=function(Qe){return new Promise(function(Ne,pe){It.push([si,Qe,Ne,pe])>1||Ie(si,Qe)})})}function Ie(si,Qe){try{!function(si){si.value instanceof it?Promise.resolve(si.value.v).then(me,Be):Ge(It[0][2],si)}(st[si](Qe))}catch(Ne){Ge(It[0][3],Ne)}}function me(si){Ie("next",si)}function Be(si){Ie("throw",si)}function Ge(si,Qe){si(Qe),It.shift(),It.length&&Ie(It[0][0],It[0][1])}}function wt(mt){var dt,nt;return dt={},st("next"),st("throw",function(Gt){throw Gt}),st("return"),dt[Symbol.iterator]=function(){return this},dt;function st(Gt,It){dt[Gt]=mt[Gt]?function(Vt){return(nt=!nt)?{value:it(mt[Gt](Vt)),done:"return"===Gt}:It?It(Vt):Vt}:It}}function ct(mt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nt,dt=mt[Symbol.asyncIterator];return dt?dt.call(mt):(mt=H(mt),nt={},st("next"),st("throw"),st("return"),nt[Symbol.asyncIterator]=function(){return this},nt);function st(It){nt[It]=mt[It]&&function(Vt){return new Promise(function(Ie,Ze){!function(It,Vt,Ie,Ze){Promise.resolve(Ze).then(function(me){It({value:me,done:Ie})},Vt)}(Ie,Ze,(Vt=mt[It](Vt)).done,Vt.value)})}}}function yt(mt,dt){return Object.defineProperty?Object.defineProperty(mt,"raw",{value:dt}):mt.raw=dt,mt}var lt=Object.create?function(mt,dt){Object.defineProperty(mt,"default",{enumerable:!0,value:dt})}:function(mt,dt){mt.default=dt};function at(mt){if(mt&&mt.__esModule)return mt;var dt={};if(null!=mt)for(var nt in mt)"default"!==nt&&Object.prototype.hasOwnProperty.call(mt,nt)&&R(dt,mt,nt);return lt(dt,mt),dt}function bt(mt){return mt&&mt.__esModule?mt:{default:mt}}function tt(mt,dt,nt,st){if("a"===nt&&!st)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof dt?mt!==dt||!st:!dt.has(mt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===nt?st:"a"===nt?st.call(mt):st?st.value:dt.get(mt)}function Rt(mt,dt,nt,st,Gt){if("m"===st)throw new TypeError("Private method is not writable");if("a"===st&&!Gt)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof dt?mt!==dt||!Gt:!dt.has(mt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===st?Gt.call(mt,nt):Gt?Gt.value=nt:dt.set(mt,nt),nt}},96553:()=>{},41777:(L,W,m)=>{"use strict";m.d(W,{l3:()=>e,_j:()=>y,LC:()=>p,ZN:()=>ot,jt:()=>n,pV:()=>V,F4:()=>R,IO:()=>Z,vP:()=>s,SB:()=>v,oB:()=>c,eR:()=>O,X$:()=>t,ZE:()=>wt,k1:()=>ct});class y{}class p{}const e="*";function t(yt,lt){return{type:7,name:yt,definitions:lt,options:{}}}function n(yt,lt=null){return{type:4,styles:lt,timings:yt}}function s(yt,lt=null){return{type:2,steps:yt,options:lt}}function c(yt){return{type:6,styles:yt,offset:null}}function v(yt,lt,at){return{type:0,name:yt,styles:lt,options:at}}function R(yt){return{type:5,steps:yt}}function O(yt,lt,at=null){return{type:1,expr:yt,animation:lt,options:at}}function V(yt=null){return{type:9,options:yt}}function Z(yt,lt,at=null){return{type:11,selector:yt,animation:lt,options:at}}function it(yt){Promise.resolve(null).then(yt)}class ot{constructor(lt=0,at=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=lt+at}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(lt=>lt()),this._onDoneFns=[])}onStart(lt){this._onStartFns.push(lt)}onDone(lt){this._onDoneFns.push(lt)}onDestroy(lt){this._onDestroyFns.push(lt)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){it(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(lt=>lt()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(lt=>lt()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(lt){this._position=this.totalTime?lt*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(lt){const at="start"==lt?this._onStartFns:this._onDoneFns;at.forEach(bt=>bt()),at.length=0}}class wt{constructor(lt){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=lt;let at=0,bt=0,tt=0;const Rt=this.players.length;0==Rt?it(()=>this._onFinish()):this.players.forEach(mt=>{mt.onDone(()=>{++at==Rt&&this._onFinish()}),mt.onDestroy(()=>{++bt==Rt&&this._onDestroy()}),mt.onStart(()=>{++tt==Rt&&this._onStart()})}),this.totalTime=this.players.reduce((mt,dt)=>Math.max(mt,dt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(lt=>lt()),this._onDoneFns=[])}init(){this.players.forEach(lt=>lt.init())}onStart(lt){this._onStartFns.push(lt)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(lt=>lt()),this._onStartFns=[])}onDone(lt){this._onDoneFns.push(lt)}onDestroy(lt){this._onDestroyFns.push(lt)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(lt=>lt.play())}pause(){this.players.forEach(lt=>lt.pause())}restart(){this.players.forEach(lt=>lt.restart())}finish(){this._onFinish(),this.players.forEach(lt=>lt.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(lt=>lt.destroy()),this._onDestroyFns.forEach(lt=>lt()),this._onDestroyFns=[])}reset(){this.players.forEach(lt=>lt.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(lt){const at=lt*this.totalTime;this.players.forEach(bt=>{const tt=bt.totalTime?Math.min(1,at/bt.totalTime):1;bt.setPosition(tt)})}getPosition(){const lt=this.players.reduce((at,bt)=>null===at||bt.totalTime>at.totalTime?bt:at,null);return null!=lt?lt.getPosition():0}beforeDestroy(){this.players.forEach(lt=>{lt.beforeDestroy&&lt.beforeDestroy()})}triggerCallback(lt){const at="start"==lt?this._onStartFns:this._onDoneFns;at.forEach(bt=>bt()),at.length=0}}const ct="!"},15664:(L,W,m)=>{"use strict";m.d(W,{rt:()=>se,kH:()=>ae,Em:()=>Ie,tE:()=>ei,qV:()=>Me,qm:()=>Oe,ic:()=>me,Kd:()=>pi,X6:()=>ue,yG:()=>le});var y=m(69808),p=m(5e3),e=m(77579),t=m(50727),n=m(61135),o=m(39646),s=m(91159),c=m(18505),v=m(78372),R=m(39300),O=m(54004),H=m(95698),V=m(35684),G=m(71884),Z=m(82722),vt=m(63191),it=m(70925),ot=m(17144);class Ie extends class{constructor(te){this._items=te,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new e.x,this._typeaheadSubscription=t.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=qt=>qt.disabled,this._pressedLetters=[],this.tabOut=new e.x,this.change=new e.x,te instanceof p.n_E&&te.changes.subscribe(qt=>{if(this._activeItem){const ti=qt.toArray().indexOf(this._activeItem);ti>-1&&ti!==this._activeItemIndex&&(this._activeItemIndex=ti)}})}skipPredicate(te){return this._skipPredicateFn=te,this}withWrap(te=!0){return this._wrap=te,this}withVerticalOrientation(te=!0){return this._vertical=te,this}withHorizontalOrientation(te){return this._horizontal=te,this}withAllowedModifierKeys(te){return this._allowedModifierKeys=te,this}withTypeAhead(te=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,c.b)(qt=>this._pressedLetters.push(qt)),(0,v.b)(te),(0,R.h)(()=>this._pressedLetters.length>0),(0,O.U)(()=>this._pressedLetters.join(""))).subscribe(qt=>{const Ee=this._getItemsArray();for(let ti=1;ti<Ee.length+1;ti++){const Pi=(this._activeItemIndex+ti)%Ee.length,Hi=Ee[Pi];if(!this._skipPredicateFn(Hi)&&0===Hi.getLabel().toUpperCase().trim().indexOf(qt)){this.setActiveItem(Pi);break}}this._pressedLetters=[]}),this}withHomeAndEnd(te=!0){return this._homeAndEnd=te,this}setActiveItem(te){const qt=this._activeItem;this.updateActiveItem(te),this._activeItem!==qt&&this.change.next(this._activeItemIndex)}onKeydown(te){const qt=te.keyCode,ti=["altKey","ctrlKey","metaKey","shiftKey"].every(Pi=>!te[Pi]||this._allowedModifierKeys.indexOf(Pi)>-1);switch(qt){case s.Mf:return void this.tabOut.next();case s.JH:if(this._vertical&&ti){this.setNextItemActive();break}return;case s.LH:if(this._vertical&&ti){this.setPreviousItemActive();break}return;case s.SV:if(this._horizontal&&ti){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case s.oh:if(this._horizontal&&ti){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case s.Sd:if(this._homeAndEnd&&ti){this.setFirstItemActive();break}return;case s.uR:if(this._homeAndEnd&&ti){this.setLastItemActive();break}return;default:return void((ti||(0,s.Vb)(te,"shiftKey"))&&(te.key&&1===te.key.length?this._letterKeyStream.next(te.key.toLocaleUpperCase()):(qt>=s.A&&qt<=s.Z||qt>=s.xE&&qt<=s.aO)&&this._letterKeyStream.next(String.fromCharCode(qt))))}this._pressedLetters=[],te.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(te){const qt=this._getItemsArray(),Ee="number"==typeof te?te:qt.indexOf(te),ti=qt[Ee];this._activeItem=null==ti?null:ti,this._activeItemIndex=Ee}_setActiveItemByDelta(te){this._wrap?this._setActiveInWrapMode(te):this._setActiveInDefaultMode(te)}_setActiveInWrapMode(te){const qt=this._getItemsArray();for(let Ee=1;Ee<=qt.length;Ee++){const ti=(this._activeItemIndex+te*Ee+qt.length)%qt.length;if(!this._skipPredicateFn(qt[ti]))return void this.setActiveItem(ti)}}_setActiveInDefaultMode(te){this._setActiveItemByIndex(this._activeItemIndex+te,te)}_setActiveItemByIndex(te,qt){const Ee=this._getItemsArray();if(Ee[te]){for(;this._skipPredicateFn(Ee[te]);)if(!Ee[te+=qt])return;this.setActiveItem(te)}}_getItemsArray(){return this._items instanceof p.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(te){return this._origin=te,this}setActiveItem(te){super.setActiveItem(te),this.activeItem&&this.activeItem.focus(this._origin)}}let me=(()=>{class Jt{constructor(qt){this._platform=qt}isDisabled(qt){return qt.hasAttribute("disabled")}isVisible(qt){return function(Jt){return!!(Jt.offsetWidth||Jt.offsetHeight||"function"==typeof Jt.getClientRects&&Jt.getClientRects().length)}(qt)&&"visible"===getComputedStyle(qt).visibility}isTabbable(qt){if(!this._platform.isBrowser)return!1;const Ee=function(Jt){try{return Jt.frameElement}catch(te){return null}}(function(Jt){return Jt.ownerDocument&&Jt.ownerDocument.defaultView||window}(qt));if(Ee&&(-1===ui(Ee)||!this.isVisible(Ee)))return!1;let ti=qt.nodeName.toLowerCase(),Pi=ui(qt);return qt.hasAttribute("contenteditable")?-1!==Pi:!("iframe"===ti||"object"===ti||this._platform.WEBKIT&&this._platform.IOS&&!function(Jt){let te=Jt.nodeName.toLowerCase(),qt="input"===te&&Jt.type;return"text"===qt||"password"===qt||"select"===te||"textarea"===te}(qt))&&("audio"===ti?!!qt.hasAttribute("controls")&&-1!==Pi:"video"===ti?-1!==Pi&&(null!==Pi||this._platform.FIREFOX||qt.hasAttribute("controls")):qt.tabIndex>=0)}isFocusable(qt,Ee){return function(Jt){return!function(Jt){return function(Jt){return"input"==Jt.nodeName.toLowerCase()}(Jt)&&"hidden"==Jt.type}(Jt)&&(function(Jt){let te=Jt.nodeName.toLowerCase();return"input"===te||"select"===te||"button"===te||"textarea"===te}(Jt)||function(Jt){return function(Jt){return"a"==Jt.nodeName.toLowerCase()}(Jt)&&Jt.hasAttribute("href")}(Jt)||Jt.hasAttribute("contenteditable")||Ve(Jt))}(qt)&&!this.isDisabled(qt)&&((null==Ee?void 0:Ee.ignoreVisibility)||this.isVisible(qt))}}return Jt.\u0275fac=function(qt){return new(qt||Jt)(p.LFG(it.t4))},Jt.\u0275prov=p.Yz7({token:Jt,factory:Jt.\u0275fac,providedIn:"root"}),Jt})();function Ve(Jt){if(!Jt.hasAttribute("tabindex")||void 0===Jt.tabIndex)return!1;let te=Jt.getAttribute("tabindex");return!(!te||isNaN(parseInt(te,10)))}function ui(Jt){if(!Ve(Jt))return null;const te=parseInt(Jt.getAttribute("tabindex")||"",10);return isNaN(te)?-1:te}class re{constructor(te,qt,Ee,ti,Pi=!1){this._element=te,this._checker=qt,this._ngZone=Ee,this._document=ti,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Pi||this.attachAnchors()}get enabled(){return this._enabled}set enabled(te){this._enabled=te,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(te,this._startAnchor),this._toggleAnchorTabIndex(te,this._endAnchor))}destroy(){const te=this._startAnchor,qt=this._endAnchor;te&&(te.removeEventListener("focus",this.startAnchorListener),te.remove()),qt&&(qt.removeEventListener("focus",this.endAnchorListener),qt.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(te){return new Promise(qt=>{this._executeOnStable(()=>qt(this.focusInitialElement(te)))})}focusFirstTabbableElementWhenReady(te){return new Promise(qt=>{this._executeOnStable(()=>qt(this.focusFirstTabbableElement(te)))})}focusLastTabbableElementWhenReady(te){return new Promise(qt=>{this._executeOnStable(()=>qt(this.focusLastTabbableElement(te)))})}_getRegionBoundary(te){const qt=this._element.querySelectorAll(`[cdk-focus-region-${te}], [cdkFocusRegion${te}], [cdk-focus-${te}]`);return"start"==te?qt.length?qt[0]:this._getFirstTabbableElement(this._element):qt.length?qt[qt.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(te){const qt=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(qt){if(!this._checker.isFocusable(qt)){const Ee=this._getFirstTabbableElement(qt);return null==Ee||Ee.focus(te),!!Ee}return qt.focus(te),!0}return this.focusFirstTabbableElement(te)}focusFirstTabbableElement(te){const qt=this._getRegionBoundary("start");return qt&&qt.focus(te),!!qt}focusLastTabbableElement(te){const qt=this._getRegionBoundary("end");return qt&&qt.focus(te),!!qt}hasAttached(){return this._hasAttached}_getFirstTabbableElement(te){if(this._checker.isFocusable(te)&&this._checker.isTabbable(te))return te;const qt=te.children;for(let Ee=0;Ee<qt.length;Ee++){const ti=qt[Ee].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(qt[Ee]):null;if(ti)return ti}return null}_getLastTabbableElement(te){if(this._checker.isFocusable(te)&&this._checker.isTabbable(te))return te;const qt=te.children;for(let Ee=qt.length-1;Ee>=0;Ee--){const ti=qt[Ee].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(qt[Ee]):null;if(ti)return ti}return null}_createAnchor(){const te=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,te),te.classList.add("cdk-visually-hidden"),te.classList.add("cdk-focus-trap-anchor"),te.setAttribute("aria-hidden","true"),te}_toggleAnchorTabIndex(te,qt){te?qt.setAttribute("tabindex","0"):qt.removeAttribute("tabindex")}toggleAnchors(te){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(te,this._startAnchor),this._toggleAnchorTabIndex(te,this._endAnchor))}_executeOnStable(te){this._ngZone.isStable?te():this._ngZone.onStable.pipe((0,H.q)(1)).subscribe(te)}}let Me=(()=>{class Jt{constructor(qt,Ee,ti){this._checker=qt,this._ngZone=Ee,this._document=ti}create(qt,Ee=!1){return new re(qt,this._checker,this._ngZone,this._document,Ee)}}return Jt.\u0275fac=function(qt){return new(qt||Jt)(p.LFG(me),p.LFG(p.R0b),p.LFG(y.K0))},Jt.\u0275prov=p.Yz7({token:Jt,factory:Jt.\u0275fac,providedIn:"root"}),Jt})();function ue(Jt){return 0===Jt.offsetX&&0===Jt.offsetY}function le(Jt){const te=Jt.touches&&Jt.touches[0]||Jt.changedTouches&&Jt.changedTouches[0];return!(!te||-1!==te.identifier||null!=te.radiusX&&1!==te.radiusX||null!=te.radiusY&&1!==te.radiusY)}const Mt=new p.OlP("cdk-input-modality-detector-options"),Nt={ignoreKeys:[s.zL,s.jx,s.b2,s.MW,s.JU]},je=(0,it.i$)({passive:!0,capture:!0});let li=(()=>{class Jt{constructor(qt,Ee,ti,Pi){this._platform=qt,this._mostRecentTarget=null,this._modality=new n.X(null),this._lastTouchMs=0,this._onKeydown=Hi=>{var bn,Ln;(null===(Ln=null===(bn=this._options)||void 0===bn?void 0:bn.ignoreKeys)||void 0===Ln?void 0:Ln.some(Xe=>Xe===Hi.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,it.sA)(Hi))},this._onMousedown=Hi=>{Date.now()-this._lastTouchMs<650||(this._modality.next(ue(Hi)?"keyboard":"mouse"),this._mostRecentTarget=(0,it.sA)(Hi))},this._onTouchstart=Hi=>{le(Hi)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,it.sA)(Hi))},this._options=Object.assign(Object.assign({},Nt),Pi),this.modalityDetected=this._modality.pipe((0,V.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,G.x)()),qt.isBrowser&&Ee.runOutsideAngular(()=>{ti.addEventListener("keydown",this._onKeydown,je),ti.addEventListener("mousedown",this._onMousedown,je),ti.addEventListener("touchstart",this._onTouchstart,je)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,je),document.removeEventListener("mousedown",this._onMousedown,je),document.removeEventListener("touchstart",this._onTouchstart,je))}}return Jt.\u0275fac=function(qt){return new(qt||Jt)(p.LFG(it.t4),p.LFG(p.R0b),p.LFG(y.K0),p.LFG(Mt,8))},Jt.\u0275prov=p.Yz7({token:Jt,factory:Jt.\u0275fac,providedIn:"root"}),Jt})();const ri=new p.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),Bi=new p.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let pi=(()=>{class Jt{constructor(qt,Ee,ti,Pi){this._ngZone=Ee,this._defaultOptions=Pi,this._document=ti,this._liveElement=qt||this._createLiveElement()}announce(qt,...Ee){const ti=this._defaultOptions;let Pi,Hi;return 1===Ee.length&&"number"==typeof Ee[0]?Hi=Ee[0]:[Pi,Hi]=Ee,this.clear(),clearTimeout(this._previousTimeout),Pi||(Pi=ti&&ti.politeness?ti.politeness:"polite"),null==Hi&&ti&&(Hi=ti.duration),this._liveElement.setAttribute("aria-live",Pi),this._ngZone.runOutsideAngular(()=>new Promise(bn=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=qt,bn(),"number"==typeof Hi&&(this._previousTimeout=setTimeout(()=>this.clear(),Hi))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var qt;clearTimeout(this._previousTimeout),null===(qt=this._liveElement)||void 0===qt||qt.remove(),this._liveElement=null}_createLiveElement(){const qt="cdk-live-announcer-element",Ee=this._document.getElementsByClassName(qt),ti=this._document.createElement("div");for(let Pi=0;Pi<Ee.length;Pi++)Ee[Pi].remove();return ti.classList.add(qt),ti.classList.add("cdk-visually-hidden"),ti.setAttribute("aria-atomic","true"),ti.setAttribute("aria-live","polite"),this._document.body.appendChild(ti),ti}}return Jt.\u0275fac=function(qt){return new(qt||Jt)(p.LFG(ri,8),p.LFG(p.R0b),p.LFG(y.K0),p.LFG(Bi,8))},Jt.\u0275prov=p.Yz7({token:Jt,factory:Jt.\u0275fac,providedIn:"root"}),Jt})();const yi=new p.OlP("cdk-focus-monitor-default-options"),$e=(0,it.i$)({passive:!0,capture:!0});let ei=(()=>{class Jt{constructor(qt,Ee,ti,Pi,Hi){this._ngZone=qt,this._platform=Ee,this._inputModalityDetector=ti,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new e.x,this._rootNodeFocusAndBlurListener=bn=>{const Ln=(0,it.sA)(bn),Xe="focus"===bn.type?this._onFocus:this._onBlur;for(let Re=Ln;Re;Re=Re.parentElement)Xe.call(this,bn,Re)},this._document=Pi,this._detectionMode=(null==Hi?void 0:Hi.detectionMode)||0}monitor(qt,Ee=!1){const ti=(0,vt.fI)(qt);if(!this._platform.isBrowser||1!==ti.nodeType)return(0,o.of)(null);const Pi=(0,it.kV)(ti)||this._getDocument(),Hi=this._elementInfo.get(ti);if(Hi)return Ee&&(Hi.checkChildren=!0),Hi.subject;const bn={checkChildren:Ee,subject:new e.x,rootNode:Pi};return this._elementInfo.set(ti,bn),this._registerGlobalListeners(bn),bn.subject}stopMonitoring(qt){const Ee=(0,vt.fI)(qt),ti=this._elementInfo.get(Ee);ti&&(ti.subject.complete(),this._setClasses(Ee),this._elementInfo.delete(Ee),this._removeGlobalListeners(ti))}focusVia(qt,Ee,ti){const Pi=(0,vt.fI)(qt);Pi===this._getDocument().activeElement?this._getClosestElementsInfo(Pi).forEach(([bn,Ln])=>this._originChanged(bn,Ee,Ln)):(this._setOrigin(Ee),"function"==typeof Pi.focus&&Pi.focus(ti))}ngOnDestroy(){this._elementInfo.forEach((qt,Ee)=>this.stopMonitoring(Ee))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(qt){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(qt)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(qt){return 1===this._detectionMode||!!(null==qt?void 0:qt.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(qt,Ee){qt.classList.toggle("cdk-focused",!!Ee),qt.classList.toggle("cdk-touch-focused","touch"===Ee),qt.classList.toggle("cdk-keyboard-focused","keyboard"===Ee),qt.classList.toggle("cdk-mouse-focused","mouse"===Ee),qt.classList.toggle("cdk-program-focused","program"===Ee)}_setOrigin(qt,Ee=!1){this._ngZone.runOutsideAngular(()=>{this._origin=qt,this._originFromTouchInteraction="touch"===qt&&Ee,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(qt,Ee){const ti=this._elementInfo.get(Ee),Pi=(0,it.sA)(qt);!ti||!ti.checkChildren&&Ee!==Pi||this._originChanged(Ee,this._getFocusOrigin(Pi),ti)}_onBlur(qt,Ee){const ti=this._elementInfo.get(Ee);!ti||ti.checkChildren&&qt.relatedTarget instanceof Node&&Ee.contains(qt.relatedTarget)||(this._setClasses(Ee),this._emitOrigin(ti.subject,null))}_emitOrigin(qt,Ee){this._ngZone.run(()=>qt.next(Ee))}_registerGlobalListeners(qt){if(!this._platform.isBrowser)return;const Ee=qt.rootNode,ti=this._rootNodeFocusListenerCount.get(Ee)||0;ti||this._ngZone.runOutsideAngular(()=>{Ee.addEventListener("focus",this._rootNodeFocusAndBlurListener,$e),Ee.addEventListener("blur",this._rootNodeFocusAndBlurListener,$e)}),this._rootNodeFocusListenerCount.set(Ee,ti+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Z.R)(this._stopInputModalityDetector)).subscribe(Pi=>{this._setOrigin(Pi,!0)}))}_removeGlobalListeners(qt){const Ee=qt.rootNode;if(this._rootNodeFocusListenerCount.has(Ee)){const ti=this._rootNodeFocusListenerCount.get(Ee);ti>1?this._rootNodeFocusListenerCount.set(Ee,ti-1):(Ee.removeEventListener("focus",this._rootNodeFocusAndBlurListener,$e),Ee.removeEventListener("blur",this._rootNodeFocusAndBlurListener,$e),this._rootNodeFocusListenerCount.delete(Ee))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(qt,Ee,ti){this._setClasses(qt,Ee),this._emitOrigin(ti.subject,Ee),this._lastFocusOrigin=Ee}_getClosestElementsInfo(qt){const Ee=[];return this._elementInfo.forEach((ti,Pi)=>{(Pi===qt||ti.checkChildren&&Pi.contains(qt))&&Ee.push([Pi,ti])}),Ee}}return Jt.\u0275fac=function(qt){return new(qt||Jt)(p.LFG(p.R0b),p.LFG(it.t4),p.LFG(li),p.LFG(y.K0,8),p.LFG(yi,8))},Jt.\u0275prov=p.Yz7({token:Jt,factory:Jt.\u0275fac,providedIn:"root"}),Jt})(),ae=(()=>{class Jt{constructor(qt,Ee){this._elementRef=qt,this._focusMonitor=Ee,this.cdkFocusChange=new p.vpe}ngAfterViewInit(){const qt=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(qt,1===qt.nodeType&&qt.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(Ee=>this.cdkFocusChange.emit(Ee))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return Jt.\u0275fac=function(qt){return new(qt||Jt)(p.Y36(p.SBq),p.Y36(ei))},Jt.\u0275dir=p.lG2({type:Jt,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),Jt})();const Pe="cdk-high-contrast-black-on-white",oi="cdk-high-contrast-white-on-black",Te="cdk-high-contrast-active";let Oe=(()=>{class Jt{constructor(qt,Ee){this._platform=qt,this._document=Ee}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const qt=this._document.createElement("div");qt.style.backgroundColor="rgb(1,2,3)",qt.style.position="absolute",this._document.body.appendChild(qt);const Ee=this._document.defaultView||window,ti=Ee&&Ee.getComputedStyle?Ee.getComputedStyle(qt):null,Pi=(ti&&ti.backgroundColor||"").replace(/ /g,"");switch(qt.remove(),Pi){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const qt=this._document.body.classList;qt.remove(Te),qt.remove(Pe),qt.remove(oi),this._hasCheckedHighContrastMode=!0;const Ee=this.getHighContrastMode();1===Ee?(qt.add(Te),qt.add(Pe)):2===Ee&&(qt.add(Te),qt.add(oi))}}}return Jt.\u0275fac=function(qt){return new(qt||Jt)(p.LFG(it.t4),p.LFG(y.K0))},Jt.\u0275prov=p.Yz7({token:Jt,factory:Jt.\u0275fac,providedIn:"root"}),Jt})(),se=(()=>{class Jt{constructor(qt){qt._applyBodyHighContrastModeCssClasses()}}return Jt.\u0275fac=function(qt){return new(qt||Jt)(p.LFG(Oe))},Jt.\u0275mod=p.oAB({type:Jt}),Jt.\u0275inj=p.cJS({imports:[[it.ud,ot.Q8]]}),Jt})()},50226:(L,W,m)=>{"use strict";m.d(W,{vT:()=>v,Is:()=>s});var y=m(5e3),p=m(69808);const e=new y.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,y.f3M)(p.K0)}}),n=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let s=(()=>{class R{constructor(H){if(this.value="ltr",this.change=new y.vpe,H){const G=H.documentElement?H.documentElement.dir:null;this.value=function(R){const O=(null==R?void 0:R.toLowerCase())||"";return"auto"===O&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?n.test(navigator.language)?"rtl":"ltr":"rtl"===O?"rtl":"ltr"}((H.body?H.body.dir:null)||G||"ltr")}}ngOnDestroy(){this.change.complete()}}return R.\u0275fac=function(H){return new(H||R)(y.LFG(e,8))},R.\u0275prov=y.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),v=(()=>{class R{}return R.\u0275fac=function(H){return new(H||R)},R.\u0275mod=y.oAB({type:R}),R.\u0275inj=y.cJS({}),R})()},63191:(L,W,m)=>{"use strict";m.d(W,{Eq:()=>n,Ig:()=>p,HM:()=>o,fI:()=>s,su:()=>e});var y=m(5e3);function p(v){return null!=v&&"false"!=`${v}`}function e(v,R=0){return function(v){return!isNaN(parseFloat(v))&&!isNaN(Number(v))}(v)?Number(v):R}function n(v){return Array.isArray(v)?v:[v]}function o(v){return null==v?"":"string"==typeof v?v:`${v}px`}function s(v){return v instanceof y.SBq?v.nativeElement:v}},20449:(L,W,m)=>{"use strict";m.d(W,{Ov:()=>c,A8:()=>R,yy:()=>o,eX:()=>s,k:()=>O,Z9:()=>t});var y=m(77579),p=m(5e3);function t(H){return H&&"function"==typeof H.connect}class o{applyChanges(V,G,Z,vt,it){V.forEachOperation((ot,wt,ct)=>{let yt,lt;if(null==ot.previousIndex){const at=Z(ot,wt,ct);yt=G.createEmbeddedView(at.templateRef,at.context,at.index),lt=1}else null==ct?(G.remove(wt),lt=3):(yt=G.get(wt),G.move(yt,ct),lt=2);it&&it({context:null==yt?void 0:yt.context,operation:lt,record:ot})})}detach(){}}class s{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(V,G,Z,vt,it){V.forEachOperation((ot,wt,ct)=>{let yt,lt;null==ot.previousIndex?(yt=this._insertView(()=>Z(ot,wt,ct),ct,G,vt(ot)),lt=yt?1:0):null==ct?(this._detachAndCacheView(wt,G),lt=3):(yt=this._moveView(wt,ct,G,vt(ot)),lt=2),it&&it({context:null==yt?void 0:yt.context,operation:lt,record:ot})})}detach(){for(const V of this._viewCache)V.destroy();this._viewCache=[]}_insertView(V,G,Z,vt){const it=this._insertViewFromCache(G,Z);if(it)return void(it.context.$implicit=vt);const ot=V();return Z.createEmbeddedView(ot.templateRef,ot.context,ot.index)}_detachAndCacheView(V,G){const Z=G.detach(V);this._maybeCacheView(Z,G)}_moveView(V,G,Z,vt){const it=Z.get(V);return Z.move(it,G),it.context.$implicit=vt,it}_maybeCacheView(V,G){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(V);else{const Z=G.indexOf(V);-1===Z?V.destroy():G.remove(Z)}}_insertViewFromCache(V,G){const Z=this._viewCache.pop();return Z&&G.insert(Z,V),Z||null}}class c{constructor(V=!1,G,Z=!0){this._multiple=V,this._emitChanges=Z,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new y.x,G&&G.length&&(V?G.forEach(vt=>this._markSelected(vt)):this._markSelected(G[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...V){this._verifyValueAssignment(V),V.forEach(G=>this._markSelected(G)),this._emitChangeEvent()}deselect(...V){this._verifyValueAssignment(V),V.forEach(G=>this._unmarkSelected(G)),this._emitChangeEvent()}toggle(V){this.isSelected(V)?this.deselect(V):this.select(V)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(V){return this._selection.has(V)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(V){this._multiple&&this.selected&&this._selected.sort(V)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(V){this.isSelected(V)||(this._multiple||this._unmarkAll(),this._selection.add(V),this._emitChanges&&this._selectedToEmit.push(V))}_unmarkSelected(V){this.isSelected(V)&&(this._selection.delete(V),this._emitChanges&&this._deselectedToEmit.push(V))}_unmarkAll(){this.isEmpty()||this._selection.forEach(V=>this._unmarkSelected(V))}_verifyValueAssignment(V){}}let R=(()=>{class H{constructor(){this._listeners=[]}notify(G,Z){for(let vt of this._listeners)vt(G,Z)}listen(G){return this._listeners.push(G),()=>{this._listeners=this._listeners.filter(Z=>G!==Z)}}ngOnDestroy(){this._listeners=[]}}return H.\u0275fac=function(G){return new(G||H)},H.\u0275prov=p.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})();const O=new p.OlP("_ViewRepeater")},91159:(L,W,m)=>{"use strict";m.d(W,{A:()=>si,zL:()=>c,ZH:()=>p,jx:()=>s,yY:()=>bt,JH:()=>ct,uR:()=>Z,K5:()=>n,hY:()=>O,Sd:()=>vt,oh:()=>it,b2:()=>xr,MW:()=>mi,aO:()=>Ie,VM:()=>G,Ku:()=>V,SV:()=>wt,JU:()=>o,L_:()=>H,Mf:()=>e,LH:()=>ot,Z:()=>ri,xE:()=>tt,Vb:()=>Jo});const p=8,e=9,n=13,o=16,s=17,c=18,O=27,H=32,V=33,G=34,Z=35,vt=36,it=37,ot=38,wt=39,ct=40,bt=46,tt=48,Ie=57,si=65,ri=90,mi=91,xr=224;function Jo(qn,...un){return un.length?un.some(dr=>qn[dr]):qn.altKey||qn.shiftKey||qn.ctrlKey||qn.metaKey}},95113:(L,W,m)=>{"use strict";m.d(W,{Yg:()=>ct,u3:()=>lt});var y=m(5e3),p=m(63191),e=m(77579),t=m(39841),n=m(97272),o=m(79307),s=m(95698),c=m(35684),v=m(78372),R=m(54004),O=m(68675),H=m(82722),V=m(70925);const Z=new Set;let vt,it=(()=>{class at{constructor(tt){this._platform=tt,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):wt}matchMedia(tt){return(this._platform.WEBKIT||this._platform.BLINK)&&function(at){if(!Z.has(at))try{vt||(vt=document.createElement("style"),vt.setAttribute("type","text/css"),document.head.appendChild(vt)),vt.sheet&&(vt.sheet.insertRule(`@media ${at} {body{ }}`,0),Z.add(at))}catch(bt){console.error(bt)}}(tt),this._matchMedia(tt)}}return at.\u0275fac=function(tt){return new(tt||at)(y.LFG(V.t4))},at.\u0275prov=y.Yz7({token:at,factory:at.\u0275fac,providedIn:"root"}),at})();function wt(at){return{matches:"all"===at||""===at,media:at,addListener:()=>{},removeListener:()=>{}}}let ct=(()=>{class at{constructor(tt,Rt){this._mediaMatcher=tt,this._zone=Rt,this._queries=new Map,this._destroySubject=new e.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(tt){return yt((0,p.Eq)(tt)).some(mt=>this._registerQuery(mt).mql.matches)}observe(tt){const mt=yt((0,p.Eq)(tt)).map(nt=>this._registerQuery(nt).observable);let dt=(0,t.a)(mt);return dt=(0,n.z)(dt.pipe((0,s.q)(1)),dt.pipe((0,c.T)(1),(0,v.b)(0))),dt.pipe((0,R.U)(nt=>{const st={matches:!1,breakpoints:{}};return nt.forEach(({matches:Gt,query:It})=>{st.matches=st.matches||Gt,st.breakpoints[It]=Gt}),st}))}_registerQuery(tt){if(this._queries.has(tt))return this._queries.get(tt);const Rt=this._mediaMatcher.matchMedia(tt),dt={observable:new o.y(nt=>{const st=Gt=>this._zone.run(()=>nt.next(Gt));return Rt.addListener(st),()=>{Rt.removeListener(st)}}).pipe((0,O.O)(Rt),(0,R.U)(({matches:nt})=>({query:tt,matches:nt})),(0,H.R)(this._destroySubject)),mql:Rt};return this._queries.set(tt,dt),dt}}return at.\u0275fac=function(tt){return new(tt||at)(y.LFG(it),y.LFG(y.R0b))},at.\u0275prov=y.Yz7({token:at,factory:at.\u0275fac,providedIn:"root"}),at})();function yt(at){return at.map(bt=>bt.split(",")).reduce((bt,tt)=>bt.concat(tt)).map(bt=>bt.trim())}const lt={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},17144:(L,W,m)=>{"use strict";m.d(W,{wD:()=>c,Q8:()=>v});var y=m(63191),p=m(5e3),e=m(79307),t=m(77579),n=m(78372);let o=(()=>{class R{create(H){return"undefined"==typeof MutationObserver?null:new MutationObserver(H)}}return R.\u0275fac=function(H){return new(H||R)},R.\u0275prov=p.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),s=(()=>{class R{constructor(H){this._mutationObserverFactory=H,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((H,V)=>this._cleanupObserver(V))}observe(H){const V=(0,y.fI)(H);return new e.y(G=>{const vt=this._observeElement(V).subscribe(G);return()=>{vt.unsubscribe(),this._unobserveElement(V)}})}_observeElement(H){if(this._observedElements.has(H))this._observedElements.get(H).count++;else{const V=new t.x,G=this._mutationObserverFactory.create(Z=>V.next(Z));G&&G.observe(H,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(H,{observer:G,stream:V,count:1})}return this._observedElements.get(H).stream}_unobserveElement(H){this._observedElements.has(H)&&(this._observedElements.get(H).count--,this._observedElements.get(H).count||this._cleanupObserver(H))}_cleanupObserver(H){if(this._observedElements.has(H)){const{observer:V,stream:G}=this._observedElements.get(H);V&&V.disconnect(),G.complete(),this._observedElements.delete(H)}}}return R.\u0275fac=function(H){return new(H||R)(p.LFG(o))},R.\u0275prov=p.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),c=(()=>{class R{constructor(H,V,G){this._contentObserver=H,this._elementRef=V,this._ngZone=G,this.event=new p.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(H){this._disabled=(0,y.Ig)(H),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(H){this._debounce=(0,y.su)(H),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const H=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?H.pipe((0,n.b)(this.debounce)):H).subscribe(this.event)})}_unsubscribe(){var H;null===(H=this._currentSubscription)||void 0===H||H.unsubscribe()}}return R.\u0275fac=function(H){return new(H||R)(p.Y36(s),p.Y36(p.SBq),p.Y36(p.R0b))},R.\u0275dir=p.lG2({type:R,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),R})(),v=(()=>{class R{}return R.\u0275fac=function(H){return new(H||R)},R.\u0275mod=p.oAB({type:R}),R.\u0275inj=p.cJS({providers:[o]}),R})()},91314:(L,W,m)=>{"use strict";m.d(W,{aV:()=>we,X_:()=>lt,Xj:()=>nt,U8:()=>Me});var y=m(30495),p=m(69808),e=m(5e3),t=m(63191),n=m(70925),o=m(50226),s=m(99129),c=m(77579),v=m(50727),R=m(56451),O=m(95698),H=m(82722);const V=(0,n.Mq)();class G{constructor(Ut,Ht){this._viewportRuler=Ut,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=Ht}attach(){}enable(){if(this._canBeEnabled()){const Ut=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=Ut.style.left||"",this._previousHTMLStyles.top=Ut.style.top||"",Ut.style.left=(0,t.HM)(-this._previousScrollPosition.left),Ut.style.top=(0,t.HM)(-this._previousScrollPosition.top),Ut.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const Ut=this._document.documentElement,Zt=Ut.style,Yt=this._document.body.style,ue=Zt.scrollBehavior||"",le=Yt.scrollBehavior||"";this._isEnabled=!1,Zt.left=this._previousHTMLStyles.left,Zt.top=this._previousHTMLStyles.top,Ut.classList.remove("cdk-global-scrollblock"),V&&(Zt.scrollBehavior=Yt.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),V&&(Zt.scrollBehavior=ue,Yt.scrollBehavior=le)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const Ht=this._document.body,Zt=this._viewportRuler.getViewportSize();return Ht.scrollHeight>Zt.height||Ht.scrollWidth>Zt.width}}class vt{constructor(Ut,Ht,Zt,Yt){this._scrollDispatcher=Ut,this._ngZone=Ht,this._viewportRuler=Zt,this._config=Yt,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(Ut){this._overlayRef=Ut}enable(){if(this._scrollSubscription)return;const Ut=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=Ut.subscribe(()=>{const Ht=this._viewportRuler.getViewportScrollPosition().top;Math.abs(Ht-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=Ut.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class it{enable(){}disable(){}attach(){}}function ot(ie,Ut){return Ut.some(Ht=>ie.bottom<Ht.top||ie.top>Ht.bottom||ie.right<Ht.left||ie.left>Ht.right)}function wt(ie,Ut){return Ut.some(Ht=>ie.top<Ht.top||ie.bottom>Ht.bottom||ie.left<Ht.left||ie.right>Ht.right)}class ct{constructor(Ut,Ht,Zt,Yt){this._scrollDispatcher=Ut,this._viewportRuler=Ht,this._ngZone=Zt,this._config=Yt,this._scrollSubscription=null}attach(Ut){this._overlayRef=Ut}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const Ht=this._overlayRef.overlayElement.getBoundingClientRect(),{width:Zt,height:Yt}=this._viewportRuler.getViewportSize();ot(Ht,[{width:Zt,height:Yt,bottom:Yt,right:Zt,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let yt=(()=>{class ie{constructor(Ht,Zt,Yt,ue){this._scrollDispatcher=Ht,this._viewportRuler=Zt,this._ngZone=Yt,this.noop=()=>new it,this.close=le=>new vt(this._scrollDispatcher,this._ngZone,this._viewportRuler,le),this.block=()=>new G(this._viewportRuler,this._document),this.reposition=le=>new ct(this._scrollDispatcher,this._viewportRuler,this._ngZone,le),this._document=ue}}return ie.\u0275fac=function(Ht){return new(Ht||ie)(e.LFG(y.mF),e.LFG(y.rL),e.LFG(e.R0b),e.LFG(p.K0))},ie.\u0275prov=e.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})();class lt{constructor(Ut){if(this.scrollStrategy=new it,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,Ut){const Ht=Object.keys(Ut);for(const Zt of Ht)void 0!==Ut[Zt]&&(this[Zt]=Ut[Zt])}}}class tt{constructor(Ut,Ht){this.connectionPair=Ut,this.scrollableViewProperties=Ht}}class dt{constructor(Ut,Ht,Zt,Yt,ue,le,Mt,Nt,ke){this._portalOutlet=Ut,this._host=Ht,this._pane=Zt,this._config=Yt,this._ngZone=ue,this._keyboardDispatcher=le,this._document=Mt,this._location=Nt,this._outsideClickDispatcher=ke,this._backdropElement=null,this._backdropClick=new c.x,this._attachments=new c.x,this._detachments=new c.x,this._locationChanges=v.w0.EMPTY,this._backdropClickHandler=je=>this._backdropClick.next(je),this._keydownEvents=new c.x,this._outsidePointerEvents=new c.x,Yt.scrollStrategy&&(this._scrollStrategy=Yt.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=Yt.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(Ut){let Ht=this._portalOutlet.attach(Ut);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,O.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),Ht}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const Ut=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),Ut}dispose(){var Ut;const Ht=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(Ut=this._host)||void 0===Ut||Ut.remove(),this._previousHostParent=this._pane=this._host=null,Ht&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(Ut){Ut!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=Ut,this.hasAttached()&&(Ut.attach(this),this.updatePosition()))}updateSize(Ut){this._config=Object.assign(Object.assign({},this._config),Ut),this._updateElementSize()}setDirection(Ut){this._config=Object.assign(Object.assign({},this._config),{direction:Ut}),this._updateElementDirection()}addPanelClass(Ut){this._pane&&this._toggleClasses(this._pane,Ut,!0)}removePanelClass(Ut){this._pane&&this._toggleClasses(this._pane,Ut,!1)}getDirection(){const Ut=this._config.direction;return Ut?"string"==typeof Ut?Ut:Ut.value:"ltr"}updateScrollStrategy(Ut){Ut!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=Ut,this.hasAttached()&&(Ut.attach(this),Ut.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const Ut=this._pane.style;Ut.width=(0,t.HM)(this._config.width),Ut.height=(0,t.HM)(this._config.height),Ut.minWidth=(0,t.HM)(this._config.minWidth),Ut.minHeight=(0,t.HM)(this._config.minHeight),Ut.maxWidth=(0,t.HM)(this._config.maxWidth),Ut.maxHeight=(0,t.HM)(this._config.maxHeight)}_togglePointerEvents(Ut){this._pane.style.pointerEvents=Ut?"":"none"}_attachBackdrop(){const Ut="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(Ut)})}):this._backdropElement.classList.add(Ut)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const Ut=this._backdropElement;if(!Ut)return;let Ht;const Zt=()=>{Ut&&(Ut.removeEventListener("click",this._backdropClickHandler),Ut.removeEventListener("transitionend",Zt),this._disposeBackdrop(Ut)),this._config.backdropClass&&this._toggleClasses(Ut,this._config.backdropClass,!1),clearTimeout(Ht)};Ut.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{Ut.addEventListener("transitionend",Zt)}),Ut.style.pointerEvents="none",Ht=this._ngZone.runOutsideAngular(()=>setTimeout(Zt,500))}_toggleClasses(Ut,Ht,Zt){const Yt=(0,t.Eq)(Ht||[]).filter(ue=>!!ue);Yt.length&&(Zt?Ut.classList.add(...Yt):Ut.classList.remove(...Yt))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const Ut=this._ngZone.onStable.pipe((0,H.R)((0,R.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),Ut.unsubscribe())})})}_disposeScrollStrategy(){const Ut=this._scrollStrategy;Ut&&(Ut.disable(),Ut.detach&&Ut.detach())}_disposeBackdrop(Ut){Ut&&(Ut.remove(),this._backdropElement===Ut&&(this._backdropElement=null))}}let nt=(()=>{class ie{constructor(Ht,Zt){this._platform=Zt,this._document=Ht}ngOnDestroy(){var Ht;null===(Ht=this._containerElement)||void 0===Ht||Ht.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Ht="cdk-overlay-container";if(this._platform.isBrowser||(0,n.Oy)()){const Yt=this._document.querySelectorAll(`.${Ht}[platform="server"], .${Ht}[platform="test"]`);for(let ue=0;ue<Yt.length;ue++)Yt[ue].remove()}const Zt=this._document.createElement("div");Zt.classList.add(Ht),(0,n.Oy)()?Zt.setAttribute("platform","test"):this._platform.isBrowser||Zt.setAttribute("platform","server"),this._document.body.appendChild(Zt),this._containerElement=Zt}}return ie.\u0275fac=function(Ht){return new(Ht||ie)(e.LFG(p.K0),e.LFG(n.t4))},ie.\u0275prov=e.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})();const st="cdk-overlay-connected-position-bounding-box",Gt=/([A-Za-z%]+)$/;class It{constructor(Ut,Ht,Zt,Yt,ue){this._viewportRuler=Ht,this._document=Zt,this._platform=Yt,this._overlayContainer=ue,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new c.x,this._resizeSubscription=v.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(Ut)}get positions(){return this._preferredPositions}attach(Ut){this._validatePositions(),Ut.hostElement.classList.add(st),this._overlayRef=Ut,this._boundingBox=Ut.hostElement,this._pane=Ut.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const Ut=this._originRect,Ht=this._overlayRect,Zt=this._viewportRect,Yt=[];let ue;for(let le of this._preferredPositions){let Mt=this._getOriginPoint(Ut,le),Nt=this._getOverlayPoint(Mt,Ht,le),ke=this._getOverlayFit(Nt,Ht,Zt,le);if(ke.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(le,Mt);this._canFitWithFlexibleDimensions(ke,Nt,Zt)?Yt.push({position:le,origin:Mt,overlayRect:Ht,boundingBoxRect:this._calculateBoundingBoxRect(Mt,le)}):(!ue||ue.overlayFit.visibleArea<ke.visibleArea)&&(ue={overlayFit:ke,overlayPoint:Nt,originPoint:Mt,position:le,overlayRect:Ht})}if(Yt.length){let le=null,Mt=-1;for(const Nt of Yt){const ke=Nt.boundingBoxRect.width*Nt.boundingBoxRect.height*(Nt.position.weight||1);ke>Mt&&(Mt=ke,le=Nt)}return this._isPushed=!1,void this._applyPosition(le.position,le.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(ue.position,ue.originPoint);this._applyPosition(ue.position,ue.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Vt(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(st),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const Ut=this._lastPosition||this._preferredPositions[0],Ht=this._getOriginPoint(this._originRect,Ut);this._applyPosition(Ut,Ht)}}withScrollableContainers(Ut){return this._scrollables=Ut,this}withPositions(Ut){return this._preferredPositions=Ut,-1===Ut.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(Ut){return this._viewportMargin=Ut,this}withFlexibleDimensions(Ut=!0){return this._hasFlexibleDimensions=Ut,this}withGrowAfterOpen(Ut=!0){return this._growAfterOpen=Ut,this}withPush(Ut=!0){return this._canPush=Ut,this}withLockedPosition(Ut=!0){return this._positionLocked=Ut,this}setOrigin(Ut){return this._origin=Ut,this}withDefaultOffsetX(Ut){return this._offsetX=Ut,this}withDefaultOffsetY(Ut){return this._offsetY=Ut,this}withTransformOriginOn(Ut){return this._transformOriginSelector=Ut,this}_getOriginPoint(Ut,Ht){let Zt,Yt;if("center"==Ht.originX)Zt=Ut.left+Ut.width/2;else{const ue=this._isRtl()?Ut.right:Ut.left,le=this._isRtl()?Ut.left:Ut.right;Zt="start"==Ht.originX?ue:le}return Yt="center"==Ht.originY?Ut.top+Ut.height/2:"top"==Ht.originY?Ut.top:Ut.bottom,{x:Zt,y:Yt}}_getOverlayPoint(Ut,Ht,Zt){let Yt,ue;return Yt="center"==Zt.overlayX?-Ht.width/2:"start"===Zt.overlayX?this._isRtl()?-Ht.width:0:this._isRtl()?0:-Ht.width,ue="center"==Zt.overlayY?-Ht.height/2:"top"==Zt.overlayY?0:-Ht.height,{x:Ut.x+Yt,y:Ut.y+ue}}_getOverlayFit(Ut,Ht,Zt,Yt){const ue=Ze(Ht);let{x:le,y:Mt}=Ut,Nt=this._getOffset(Yt,"x"),ke=this._getOffset(Yt,"y");Nt&&(le+=Nt),ke&&(Mt+=ke);let ri=0-Mt,mi=Mt+ue.height-Zt.height,Bi=this._subtractOverflows(ue.width,0-le,le+ue.width-Zt.width),pi=this._subtractOverflows(ue.height,ri,mi),bi=Bi*pi;return{visibleArea:bi,isCompletelyWithinViewport:ue.width*ue.height===bi,fitsInViewportVertically:pi===ue.height,fitsInViewportHorizontally:Bi==ue.width}}_canFitWithFlexibleDimensions(Ut,Ht,Zt){if(this._hasFlexibleDimensions){const Yt=Zt.bottom-Ht.y,ue=Zt.right-Ht.x,le=Ie(this._overlayRef.getConfig().minHeight),Mt=Ie(this._overlayRef.getConfig().minWidth),ke=Ut.fitsInViewportHorizontally||null!=Mt&&Mt<=ue;return(Ut.fitsInViewportVertically||null!=le&&le<=Yt)&&ke}return!1}_pushOverlayOnScreen(Ut,Ht,Zt){if(this._previousPushAmount&&this._positionLocked)return{x:Ut.x+this._previousPushAmount.x,y:Ut.y+this._previousPushAmount.y};const Yt=Ze(Ht),ue=this._viewportRect,le=Math.max(Ut.x+Yt.width-ue.width,0),Mt=Math.max(Ut.y+Yt.height-ue.height,0),Nt=Math.max(ue.top-Zt.top-Ut.y,0),ke=Math.max(ue.left-Zt.left-Ut.x,0);let je=0,li=0;return je=Yt.width<=ue.width?ke||-le:Ut.x<this._viewportMargin?ue.left-Zt.left-Ut.x:0,li=Yt.height<=ue.height?Nt||-Mt:Ut.y<this._viewportMargin?ue.top-Zt.top-Ut.y:0,this._previousPushAmount={x:je,y:li},{x:Ut.x+je,y:Ut.y+li}}_applyPosition(Ut,Ht){if(this._setTransformOrigin(Ut),this._setOverlayElementStyles(Ht,Ut),this._setBoundingBoxStyles(Ht,Ut),Ut.panelClass&&this._addPanelClasses(Ut.panelClass),this._lastPosition=Ut,this._positionChanges.observers.length){const Zt=this._getScrollVisibility(),Yt=new tt(Ut,Zt);this._positionChanges.next(Yt)}this._isInitialRender=!1}_setTransformOrigin(Ut){if(!this._transformOriginSelector)return;const Ht=this._boundingBox.querySelectorAll(this._transformOriginSelector);let Zt,Yt=Ut.overlayY;Zt="center"===Ut.overlayX?"center":this._isRtl()?"start"===Ut.overlayX?"right":"left":"start"===Ut.overlayX?"left":"right";for(let ue=0;ue<Ht.length;ue++)Ht[ue].style.transformOrigin=`${Zt} ${Yt}`}_calculateBoundingBoxRect(Ut,Ht){const Zt=this._viewportRect,Yt=this._isRtl();let ue,le,Mt,je,li,ri;if("top"===Ht.overlayY)le=Ut.y,ue=Zt.height-le+this._viewportMargin;else if("bottom"===Ht.overlayY)Mt=Zt.height-Ut.y+2*this._viewportMargin,ue=Zt.height-Mt+this._viewportMargin;else{const mi=Math.min(Zt.bottom-Ut.y+Zt.top,Ut.y),Bi=this._lastBoundingBoxSize.height;ue=2*mi,le=Ut.y-mi,ue>Bi&&!this._isInitialRender&&!this._growAfterOpen&&(le=Ut.y-Bi/2)}if("end"===Ht.overlayX&&!Yt||"start"===Ht.overlayX&&Yt)ri=Zt.width-Ut.x+this._viewportMargin,je=Ut.x-this._viewportMargin;else if("start"===Ht.overlayX&&!Yt||"end"===Ht.overlayX&&Yt)li=Ut.x,je=Zt.right-Ut.x;else{const mi=Math.min(Zt.right-Ut.x+Zt.left,Ut.x),Bi=this._lastBoundingBoxSize.width;je=2*mi,li=Ut.x-mi,je>Bi&&!this._isInitialRender&&!this._growAfterOpen&&(li=Ut.x-Bi/2)}return{top:le,left:li,bottom:Mt,right:ri,width:je,height:ue}}_setBoundingBoxStyles(Ut,Ht){const Zt=this._calculateBoundingBoxRect(Ut,Ht);!this._isInitialRender&&!this._growAfterOpen&&(Zt.height=Math.min(Zt.height,this._lastBoundingBoxSize.height),Zt.width=Math.min(Zt.width,this._lastBoundingBoxSize.width));const Yt={};if(this._hasExactPosition())Yt.top=Yt.left="0",Yt.bottom=Yt.right=Yt.maxHeight=Yt.maxWidth="",Yt.width=Yt.height="100%";else{const ue=this._overlayRef.getConfig().maxHeight,le=this._overlayRef.getConfig().maxWidth;Yt.height=(0,t.HM)(Zt.height),Yt.top=(0,t.HM)(Zt.top),Yt.bottom=(0,t.HM)(Zt.bottom),Yt.width=(0,t.HM)(Zt.width),Yt.left=(0,t.HM)(Zt.left),Yt.right=(0,t.HM)(Zt.right),Yt.alignItems="center"===Ht.overlayX?"center":"end"===Ht.overlayX?"flex-end":"flex-start",Yt.justifyContent="center"===Ht.overlayY?"center":"bottom"===Ht.overlayY?"flex-end":"flex-start",ue&&(Yt.maxHeight=(0,t.HM)(ue)),le&&(Yt.maxWidth=(0,t.HM)(le))}this._lastBoundingBoxSize=Zt,Vt(this._boundingBox.style,Yt)}_resetBoundingBoxStyles(){Vt(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Vt(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(Ut,Ht){const Zt={},Yt=this._hasExactPosition(),ue=this._hasFlexibleDimensions,le=this._overlayRef.getConfig();if(Yt){const je=this._viewportRuler.getViewportScrollPosition();Vt(Zt,this._getExactOverlayY(Ht,Ut,je)),Vt(Zt,this._getExactOverlayX(Ht,Ut,je))}else Zt.position="static";let Mt="",Nt=this._getOffset(Ht,"x"),ke=this._getOffset(Ht,"y");Nt&&(Mt+=`translateX(${Nt}px) `),ke&&(Mt+=`translateY(${ke}px)`),Zt.transform=Mt.trim(),le.maxHeight&&(Yt?Zt.maxHeight=(0,t.HM)(le.maxHeight):ue&&(Zt.maxHeight="")),le.maxWidth&&(Yt?Zt.maxWidth=(0,t.HM)(le.maxWidth):ue&&(Zt.maxWidth="")),Vt(this._pane.style,Zt)}_getExactOverlayY(Ut,Ht,Zt){let Yt={top:"",bottom:""},ue=this._getOverlayPoint(Ht,this._overlayRect,Ut);this._isPushed&&(ue=this._pushOverlayOnScreen(ue,this._overlayRect,Zt));let le=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return ue.y-=le,"bottom"===Ut.overlayY?Yt.bottom=this._document.documentElement.clientHeight-(ue.y+this._overlayRect.height)+"px":Yt.top=(0,t.HM)(ue.y),Yt}_getExactOverlayX(Ut,Ht,Zt){let le,Yt={left:"",right:""},ue=this._getOverlayPoint(Ht,this._overlayRect,Ut);return this._isPushed&&(ue=this._pushOverlayOnScreen(ue,this._overlayRect,Zt)),le=this._isRtl()?"end"===Ut.overlayX?"left":"right":"end"===Ut.overlayX?"right":"left","right"===le?Yt.right=this._document.documentElement.clientWidth-(ue.x+this._overlayRect.width)+"px":Yt.left=(0,t.HM)(ue.x),Yt}_getScrollVisibility(){const Ut=this._getOriginRect(),Ht=this._pane.getBoundingClientRect(),Zt=this._scrollables.map(Yt=>Yt.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:wt(Ut,Zt),isOriginOutsideView:ot(Ut,Zt),isOverlayClipped:wt(Ht,Zt),isOverlayOutsideView:ot(Ht,Zt)}}_subtractOverflows(Ut,...Ht){return Ht.reduce((Zt,Yt)=>Zt-Math.max(Yt,0),Ut)}_getNarrowedViewportRect(){const Ut=this._document.documentElement.clientWidth,Ht=this._document.documentElement.clientHeight,Zt=this._viewportRuler.getViewportScrollPosition();return{top:Zt.top+this._viewportMargin,left:Zt.left+this._viewportMargin,right:Zt.left+Ut-this._viewportMargin,bottom:Zt.top+Ht-this._viewportMargin,width:Ut-2*this._viewportMargin,height:Ht-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(Ut,Ht){return"x"===Ht?null==Ut.offsetX?this._offsetX:Ut.offsetX:null==Ut.offsetY?this._offsetY:Ut.offsetY}_validatePositions(){}_addPanelClasses(Ut){this._pane&&(0,t.Eq)(Ut).forEach(Ht=>{""!==Ht&&-1===this._appliedPanelClasses.indexOf(Ht)&&(this._appliedPanelClasses.push(Ht),this._pane.classList.add(Ht))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(Ut=>{this._pane.classList.remove(Ut)}),this._appliedPanelClasses=[])}_getOriginRect(){const Ut=this._origin;if(Ut instanceof e.SBq)return Ut.nativeElement.getBoundingClientRect();if(Ut instanceof Element)return Ut.getBoundingClientRect();const Ht=Ut.width||0,Zt=Ut.height||0;return{top:Ut.y,bottom:Ut.y+Zt,left:Ut.x,right:Ut.x+Ht,height:Zt,width:Ht}}}function Vt(ie,Ut){for(let Ht in Ut)Ut.hasOwnProperty(Ht)&&(ie[Ht]=Ut[Ht]);return ie}function Ie(ie){if("number"!=typeof ie&&null!=ie){const[Ut,Ht]=ie.split(Gt);return Ht&&"px"!==Ht?null:parseFloat(Ut)}return ie||null}function Ze(ie){return{top:Math.floor(ie.top),right:Math.floor(ie.right),bottom:Math.floor(ie.bottom),left:Math.floor(ie.left),width:Math.floor(ie.width),height:Math.floor(ie.height)}}const me="cdk-global-overlay-wrapper";class Be{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(Ut){const Ht=Ut.getConfig();this._overlayRef=Ut,this._width&&!Ht.width&&Ut.updateSize({width:this._width}),this._height&&!Ht.height&&Ut.updateSize({height:this._height}),Ut.hostElement.classList.add(me),this._isDisposed=!1}top(Ut=""){return this._bottomOffset="",this._topOffset=Ut,this._alignItems="flex-start",this}left(Ut=""){return this._rightOffset="",this._leftOffset=Ut,this._justifyContent="flex-start",this}bottom(Ut=""){return this._topOffset="",this._bottomOffset=Ut,this._alignItems="flex-end",this}right(Ut=""){return this._leftOffset="",this._rightOffset=Ut,this._justifyContent="flex-end",this}width(Ut=""){return this._overlayRef?this._overlayRef.updateSize({width:Ut}):this._width=Ut,this}height(Ut=""){return this._overlayRef?this._overlayRef.updateSize({height:Ut}):this._height=Ut,this}centerHorizontally(Ut=""){return this.left(Ut),this._justifyContent="center",this}centerVertically(Ut=""){return this.top(Ut),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const Ut=this._overlayRef.overlayElement.style,Ht=this._overlayRef.hostElement.style,Zt=this._overlayRef.getConfig(),{width:Yt,height:ue,maxWidth:le,maxHeight:Mt}=Zt,Nt=!("100%"!==Yt&&"100vw"!==Yt||le&&"100%"!==le&&"100vw"!==le),ke=!("100%"!==ue&&"100vh"!==ue||Mt&&"100%"!==Mt&&"100vh"!==Mt);Ut.position=this._cssPosition,Ut.marginLeft=Nt?"0":this._leftOffset,Ut.marginTop=ke?"0":this._topOffset,Ut.marginBottom=this._bottomOffset,Ut.marginRight=this._rightOffset,Nt?Ht.justifyContent="flex-start":"center"===this._justifyContent?Ht.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?Ht.justifyContent="flex-end":"flex-end"===this._justifyContent&&(Ht.justifyContent="flex-start"):Ht.justifyContent=this._justifyContent,Ht.alignItems=ke?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const Ut=this._overlayRef.overlayElement.style,Ht=this._overlayRef.hostElement,Zt=Ht.style;Ht.classList.remove(me),Zt.justifyContent=Zt.alignItems=Ut.marginTop=Ut.marginBottom=Ut.marginLeft=Ut.marginRight=Ut.position="",this._overlayRef=null,this._isDisposed=!0}}let Ge=(()=>{class ie{constructor(Ht,Zt,Yt,ue){this._viewportRuler=Ht,this._document=Zt,this._platform=Yt,this._overlayContainer=ue}global(){return new Be}flexibleConnectedTo(Ht){return new It(Ht,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return ie.\u0275fac=function(Ht){return new(Ht||ie)(e.LFG(y.rL),e.LFG(p.K0),e.LFG(n.t4),e.LFG(nt))},ie.\u0275prov=e.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})(),si=(()=>{class ie{constructor(Ht){this._attachedOverlays=[],this._document=Ht}ngOnDestroy(){this.detach()}add(Ht){this.remove(Ht),this._attachedOverlays.push(Ht)}remove(Ht){const Zt=this._attachedOverlays.indexOf(Ht);Zt>-1&&this._attachedOverlays.splice(Zt,1),0===this._attachedOverlays.length&&this.detach()}}return ie.\u0275fac=function(Ht){return new(Ht||ie)(e.LFG(p.K0))},ie.\u0275prov=e.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})(),Qe=(()=>{class ie extends si{constructor(Ht){super(Ht),this._keydownListener=Zt=>{const Yt=this._attachedOverlays;for(let ue=Yt.length-1;ue>-1;ue--)if(Yt[ue]._keydownEvents.observers.length>0){Yt[ue]._keydownEvents.next(Zt);break}}}add(Ht){super.add(Ht),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return ie.\u0275fac=function(Ht){return new(Ht||ie)(e.LFG(p.K0))},ie.\u0275prov=e.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})(),Ne=(()=>{class ie extends si{constructor(Ht,Zt){super(Ht),this._platform=Zt,this._cursorStyleIsSet=!1,this._pointerDownListener=Yt=>{this._pointerDownEventTarget=(0,n.sA)(Yt)},this._clickListener=Yt=>{const ue=(0,n.sA)(Yt),le="click"===Yt.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:ue;this._pointerDownEventTarget=null;const Mt=this._attachedOverlays.slice();for(let Nt=Mt.length-1;Nt>-1;Nt--){const ke=Mt[Nt];if(!(ke._outsidePointerEvents.observers.length<1)&&ke.hasAttached()){if(ke.overlayElement.contains(ue)||ke.overlayElement.contains(le))break;ke._outsidePointerEvents.next(Yt)}}}}add(Ht){if(super.add(Ht),!this._isAttached){const Zt=this._document.body;Zt.addEventListener("pointerdown",this._pointerDownListener,!0),Zt.addEventListener("click",this._clickListener,!0),Zt.addEventListener("auxclick",this._clickListener,!0),Zt.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=Zt.style.cursor,Zt.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const Ht=this._document.body;Ht.removeEventListener("pointerdown",this._pointerDownListener,!0),Ht.removeEventListener("click",this._clickListener,!0),Ht.removeEventListener("auxclick",this._clickListener,!0),Ht.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(Ht.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return ie.\u0275fac=function(Ht){return new(Ht||ie)(e.LFG(p.K0),e.LFG(n.t4))},ie.\u0275prov=e.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})(),pe=0,we=(()=>{class ie{constructor(Ht,Zt,Yt,ue,le,Mt,Nt,ke,je,li,ri){this.scrollStrategies=Ht,this._overlayContainer=Zt,this._componentFactoryResolver=Yt,this._positionBuilder=ue,this._keyboardDispatcher=le,this._injector=Mt,this._ngZone=Nt,this._document=ke,this._directionality=je,this._location=li,this._outsideClickDispatcher=ri}create(Ht){const Zt=this._createHostElement(),Yt=this._createPaneElement(Zt),ue=this._createPortalOutlet(Yt),le=new lt(Ht);return le.direction=le.direction||this._directionality.value,new dt(ue,Zt,Yt,le,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(Ht){const Zt=this._document.createElement("div");return Zt.id="cdk-overlay-"+pe++,Zt.classList.add("cdk-overlay-pane"),Ht.appendChild(Zt),Zt}_createHostElement(){const Ht=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(Ht),Ht}_createPortalOutlet(Ht){return this._appRef||(this._appRef=this._injector.get(e.z2F)),new s.u0(Ht,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return ie.\u0275fac=function(Ht){return new(Ht||ie)(e.LFG(yt),e.LFG(nt),e.LFG(e._Vd),e.LFG(Ge),e.LFG(Qe),e.LFG(e.zs3),e.LFG(e.R0b),e.LFG(p.K0),e.LFG(o.Is),e.LFG(p.Ye),e.LFG(Ne))},ie.\u0275prov=e.Yz7({token:ie,factory:ie.\u0275fac}),ie})();const re={provide:new e.OlP("cdk-connected-overlay-scroll-strategy"),deps:[we],useFactory:function(ie){return()=>ie.scrollStrategies.reposition()}};let Me=(()=>{class ie{}return ie.\u0275fac=function(Ht){return new(Ht||ie)},ie.\u0275mod=e.oAB({type:ie}),ie.\u0275inj=e.cJS({providers:[we,re],imports:[[o.vT,s.eL,y.Cl],y.Cl]}),ie})()},70925:(L,W,m)=>{"use strict";m.d(W,{t4:()=>t,ud:()=>n,sA:()=>ct,ht:()=>wt,kV:()=>ot,Oy:()=>yt,_i:()=>Z,i$:()=>O,Mq:()=>G});var y=m(5e3),p=m(69808);let e;try{e="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(lt){e=!1}let v,H,V,vt,t=(()=>{class lt{constructor(bt){this._platformId=bt,this.isBrowser=this._platformId?(0,p.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!e)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return lt.\u0275fac=function(bt){return new(bt||lt)(y.LFG(y.Lbi))},lt.\u0275prov=y.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})(),n=(()=>{class lt{}return lt.\u0275fac=function(bt){return new(bt||lt)},lt.\u0275mod=y.oAB({type:lt}),lt.\u0275inj=y.cJS({}),lt})();function O(lt){return function(){if(null==v&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>v=!0}))}finally{v=v||!1}return v}()?lt:!!lt.capture}function G(){if(null==V){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return V=!1,V;if("scrollBehavior"in document.documentElement.style)V=!0;else{const lt=Element.prototype.scrollTo;V=!!lt&&!/\{\s*\[native code\]\s*\}/.test(lt.toString())}}return V}function Z(){if("object"!=typeof document||!document)return 0;if(null==H){const lt=document.createElement("div"),at=lt.style;lt.dir="rtl",at.width="1px",at.overflow="auto",at.visibility="hidden",at.pointerEvents="none",at.position="absolute";const bt=document.createElement("div"),tt=bt.style;tt.width="2px",tt.height="1px",lt.appendChild(bt),document.body.appendChild(lt),H=0,0===lt.scrollLeft&&(lt.scrollLeft=1,H=0===lt.scrollLeft?1:2),lt.remove()}return H}function ot(lt){if(function(){if(null==vt){const lt="undefined"!=typeof document?document.head:null;vt=!(!lt||!lt.createShadowRoot&&!lt.attachShadow)}return vt}()){const at=lt.getRootNode?lt.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&at instanceof ShadowRoot)return at}return null}function wt(){let lt="undefined"!=typeof document&&document?document.activeElement:null;for(;lt&&lt.shadowRoot;){const at=lt.shadowRoot.activeElement;if(at===lt)break;lt=at}return lt}function ct(lt){return lt.composedPath?lt.composedPath()[0]:lt.target}function yt(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}},99129:(L,W,m)=>{"use strict";m.d(W,{en:()=>V,ig:()=>it,Pl:()=>wt,C5:()=>R,u0:()=>Z,eL:()=>yt,UE:()=>O});var y=m(5e3),p=m(69808);class v{attach(bt){return this._attachedHost=bt,bt.attach(this)}detach(){let bt=this._attachedHost;null!=bt&&(this._attachedHost=null,bt.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(bt){this._attachedHost=bt}}class R extends v{constructor(bt,tt,Rt,mt){super(),this.component=bt,this.viewContainerRef=tt,this.injector=Rt,this.componentFactoryResolver=mt}}class O extends v{constructor(bt,tt,Rt){super(),this.templateRef=bt,this.viewContainerRef=tt,this.context=Rt}get origin(){return this.templateRef.elementRef}attach(bt,tt=this.context){return this.context=tt,super.attach(bt)}detach(){return this.context=void 0,super.detach()}}class H extends v{constructor(bt){super(),this.element=bt instanceof y.SBq?bt.nativeElement:bt}}class V{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(bt){return bt instanceof R?(this._attachedPortal=bt,this.attachComponentPortal(bt)):bt instanceof O?(this._attachedPortal=bt,this.attachTemplatePortal(bt)):this.attachDomPortal&&bt instanceof H?(this._attachedPortal=bt,this.attachDomPortal(bt)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(bt){this._disposeFn=bt}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Z extends V{constructor(bt,tt,Rt,mt,dt){super(),this.outletElement=bt,this._componentFactoryResolver=tt,this._appRef=Rt,this._defaultInjector=mt,this.attachDomPortal=nt=>{const st=nt.element,Gt=this._document.createComment("dom-portal");st.parentNode.insertBefore(Gt,st),this.outletElement.appendChild(st),this._attachedPortal=nt,super.setDisposeFn(()=>{Gt.parentNode&&Gt.parentNode.replaceChild(st,Gt)})},this._document=dt}attachComponentPortal(bt){const Rt=(bt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(bt.component);let mt;return bt.viewContainerRef?(mt=bt.viewContainerRef.createComponent(Rt,bt.viewContainerRef.length,bt.injector||bt.viewContainerRef.injector),this.setDisposeFn(()=>mt.destroy())):(mt=Rt.create(bt.injector||this._defaultInjector),this._appRef.attachView(mt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(mt.hostView),mt.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(mt)),this._attachedPortal=bt,mt}attachTemplatePortal(bt){let tt=bt.viewContainerRef,Rt=tt.createEmbeddedView(bt.templateRef,bt.context);return Rt.rootNodes.forEach(mt=>this.outletElement.appendChild(mt)),Rt.detectChanges(),this.setDisposeFn(()=>{let mt=tt.indexOf(Rt);-1!==mt&&tt.remove(mt)}),this._attachedPortal=bt,Rt}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(bt){return bt.hostView.rootNodes[0]}}let it=(()=>{class at extends O{constructor(tt,Rt){super(tt,Rt)}}return at.\u0275fac=function(tt){return new(tt||at)(y.Y36(y.Rgc),y.Y36(y.s_b))},at.\u0275dir=y.lG2({type:at,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[y.qOj]}),at})(),wt=(()=>{class at extends V{constructor(tt,Rt,mt){super(),this._componentFactoryResolver=tt,this._viewContainerRef=Rt,this._isInitialized=!1,this.attached=new y.vpe,this.attachDomPortal=dt=>{const nt=dt.element,st=this._document.createComment("dom-portal");dt.setAttachedHost(this),nt.parentNode.insertBefore(st,nt),this._getRootNode().appendChild(nt),this._attachedPortal=dt,super.setDisposeFn(()=>{st.parentNode&&st.parentNode.replaceChild(nt,st)})},this._document=mt}get portal(){return this._attachedPortal}set portal(tt){this.hasAttached()&&!tt&&!this._isInitialized||(this.hasAttached()&&super.detach(),tt&&super.attach(tt),this._attachedPortal=tt)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(tt){tt.setAttachedHost(this);const Rt=null!=tt.viewContainerRef?tt.viewContainerRef:this._viewContainerRef,dt=(tt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(tt.component),nt=Rt.createComponent(dt,Rt.length,tt.injector||Rt.injector);return Rt!==this._viewContainerRef&&this._getRootNode().appendChild(nt.hostView.rootNodes[0]),super.setDisposeFn(()=>nt.destroy()),this._attachedPortal=tt,this._attachedRef=nt,this.attached.emit(nt),nt}attachTemplatePortal(tt){tt.setAttachedHost(this);const Rt=this._viewContainerRef.createEmbeddedView(tt.templateRef,tt.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=tt,this._attachedRef=Rt,this.attached.emit(Rt),Rt}_getRootNode(){const tt=this._viewContainerRef.element.nativeElement;return tt.nodeType===tt.ELEMENT_NODE?tt:tt.parentNode}}return at.\u0275fac=function(tt){return new(tt||at)(y.Y36(y._Vd),y.Y36(y.s_b),y.Y36(p.K0))},at.\u0275dir=y.lG2({type:at,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[y.qOj]}),at})(),yt=(()=>{class at{}return at.\u0275fac=function(tt){return new(tt||at)},at.\u0275mod=y.oAB({type:at}),at.\u0275inj=y.cJS({}),at})()},30495:(L,W,m)=>{"use strict";m.d(W,{PQ:()=>me,ZD:()=>Ve,mF:()=>Ze,Cl:()=>ui,rL:()=>Ge});var y=m(63191),p=m(5e3),e=m(84408),t=m(50727);const n={schedule(Ke){let be=requestAnimationFrame,Xt=cancelAnimationFrame;const{delegate:re}=n;re&&(be=re.requestAnimationFrame,Xt=re.cancelAnimationFrame);const Me=be(vi=>{Xt=void 0,Ke(vi)});return new t.w0(()=>null==Xt?void 0:Xt(Me))},requestAnimationFrame(...Ke){const{delegate:be}=n;return((null==be?void 0:be.requestAnimationFrame)||requestAnimationFrame)(...Ke)},cancelAnimationFrame(...Ke){const{delegate:be}=n;return((null==be?void 0:be.cancelAnimationFrame)||cancelAnimationFrame)(...Ke)},delegate:void 0};var s=m(97565);new class extends s.v{flush(be){this._active=!0,this._scheduled=void 0;const{actions:Xt}=this;let re,Me=-1;be=be||Xt.shift();const vi=Xt.length;do{if(re=be.execute(be.state,be.delay))break}while(++Me<vi&&(be=Xt.shift()));if(this._active=!1,re){for(;++Me<vi&&(be=Xt.shift());)be.unsubscribe();throw re}}}(class extends e.o{constructor(be,Xt){super(be,Xt),this.scheduler=be,this.work=Xt}requestAsyncId(be,Xt,re=0){return null!==re&&re>0?super.requestAsyncId(be,Xt,re):(be.actions.push(this),be._scheduled||(be._scheduled=n.requestAnimationFrame(()=>be.flush(void 0))))}recycleAsyncId(be,Xt,re=0){if(null!=re&&re>0||null==re&&this.delay>0)return super.recycleAsyncId(be,Xt,re);0===be.actions.length&&(n.cancelAnimationFrame(Xt),be._scheduled=void 0)}});var O=m(77579),H=m(39646),V=m(79307),G=m(54968),vt=(m(53101),m(34986)),it=m(54482),ot=m(38421),wt=m(25403),yt=m(5963);function lt(Ke,be=vt.P){return function(Ke){return(0,it.e)((be,Xt)=>{let re=!1,Me=null,vi=null,ie=!1;const Ut=()=>{if(null==vi||vi.unsubscribe(),vi=null,re){re=!1;const Zt=Me;Me=null,Xt.next(Zt)}ie&&Xt.complete()},Ht=()=>{vi=null,ie&&Xt.complete()};be.subscribe(new wt.Q(Xt,Zt=>{re=!0,Me=Zt,vi||(0,ot.Xf)(Ke()).subscribe(vi=new wt.Q(Xt,Ut,Ht))},()=>{ie=!0,(!re||!vi||vi.closed)&&Xt.complete()}))})}(()=>(0,yt.H)(Ke,be))}var at=m(39300),bt=m(82722),tt=m(69808),Rt=m(70925),mt=m(50226);let Ze=(()=>{class Ke{constructor(Xt,re,Me){this._ngZone=Xt,this._platform=re,this._scrolled=new O.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=Me}register(Xt){this.scrollContainers.has(Xt)||this.scrollContainers.set(Xt,Xt.elementScrolled().subscribe(()=>this._scrolled.next(Xt)))}deregister(Xt){const re=this.scrollContainers.get(Xt);re&&(re.unsubscribe(),this.scrollContainers.delete(Xt))}scrolled(Xt=20){return this._platform.isBrowser?new V.y(re=>{this._globalSubscription||this._addGlobalListener();const Me=Xt>0?this._scrolled.pipe(lt(Xt)).subscribe(re):this._scrolled.subscribe(re);return this._scrolledCount++,()=>{Me.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,H.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((Xt,re)=>this.deregister(re)),this._scrolled.complete()}ancestorScrolled(Xt,re){const Me=this.getAncestorScrollContainers(Xt);return this.scrolled(re).pipe((0,at.h)(vi=>!vi||Me.indexOf(vi)>-1))}getAncestorScrollContainers(Xt){const re=[];return this.scrollContainers.forEach((Me,vi)=>{this._scrollableContainsElement(vi,Xt)&&re.push(vi)}),re}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(Xt,re){let Me=(0,y.fI)(re),vi=Xt.getElementRef().nativeElement;do{if(Me==vi)return!0}while(Me=Me.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const Xt=this._getWindow();return(0,G.R)(Xt.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return Ke.\u0275fac=function(Xt){return new(Xt||Ke)(p.LFG(p.R0b),p.LFG(Rt.t4),p.LFG(tt.K0,8))},Ke.\u0275prov=p.Yz7({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),Ke})(),me=(()=>{class Ke{constructor(Xt,re,Me,vi){this.elementRef=Xt,this.scrollDispatcher=re,this.ngZone=Me,this.dir=vi,this._destroyed=new O.x,this._elementScrolled=new V.y(ie=>this.ngZone.runOutsideAngular(()=>(0,G.R)(this.elementRef.nativeElement,"scroll").pipe((0,bt.R)(this._destroyed)).subscribe(ie)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(Xt){const re=this.elementRef.nativeElement,Me=this.dir&&"rtl"==this.dir.value;null==Xt.left&&(Xt.left=Me?Xt.end:Xt.start),null==Xt.right&&(Xt.right=Me?Xt.start:Xt.end),null!=Xt.bottom&&(Xt.top=re.scrollHeight-re.clientHeight-Xt.bottom),Me&&0!=(0,Rt._i)()?(null!=Xt.left&&(Xt.right=re.scrollWidth-re.clientWidth-Xt.left),2==(0,Rt._i)()?Xt.left=Xt.right:1==(0,Rt._i)()&&(Xt.left=Xt.right?-Xt.right:Xt.right)):null!=Xt.right&&(Xt.left=re.scrollWidth-re.clientWidth-Xt.right),this._applyScrollToOptions(Xt)}_applyScrollToOptions(Xt){const re=this.elementRef.nativeElement;(0,Rt.Mq)()?re.scrollTo(Xt):(null!=Xt.top&&(re.scrollTop=Xt.top),null!=Xt.left&&(re.scrollLeft=Xt.left))}measureScrollOffset(Xt){const re="left",vi=this.elementRef.nativeElement;if("top"==Xt)return vi.scrollTop;if("bottom"==Xt)return vi.scrollHeight-vi.clientHeight-vi.scrollTop;const ie=this.dir&&"rtl"==this.dir.value;return"start"==Xt?Xt=ie?"right":re:"end"==Xt&&(Xt=ie?re:"right"),ie&&2==(0,Rt._i)()?Xt==re?vi.scrollWidth-vi.clientWidth-vi.scrollLeft:vi.scrollLeft:ie&&1==(0,Rt._i)()?Xt==re?vi.scrollLeft+vi.scrollWidth-vi.clientWidth:-vi.scrollLeft:Xt==re?vi.scrollLeft:vi.scrollWidth-vi.clientWidth-vi.scrollLeft}}return Ke.\u0275fac=function(Xt){return new(Xt||Ke)(p.Y36(p.SBq),p.Y36(Ze),p.Y36(p.R0b),p.Y36(mt.Is,8))},Ke.\u0275dir=p.lG2({type:Ke,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),Ke})(),Ge=(()=>{class Ke{constructor(Xt,re,Me){this._platform=Xt,this._change=new O.x,this._changeListener=vi=>{this._change.next(vi)},this._document=Me,re.runOutsideAngular(()=>{if(Xt.isBrowser){const vi=this._getWindow();vi.addEventListener("resize",this._changeListener),vi.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const Xt=this._getWindow();Xt.removeEventListener("resize",this._changeListener),Xt.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const Xt={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),Xt}getViewportRect(){const Xt=this.getViewportScrollPosition(),{width:re,height:Me}=this.getViewportSize();return{top:Xt.top,left:Xt.left,bottom:Xt.top+Me,right:Xt.left+re,height:Me,width:re}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const Xt=this._document,re=this._getWindow(),Me=Xt.documentElement,vi=Me.getBoundingClientRect();return{top:-vi.top||Xt.body.scrollTop||re.scrollY||Me.scrollTop||0,left:-vi.left||Xt.body.scrollLeft||re.scrollX||Me.scrollLeft||0}}change(Xt=20){return Xt>0?this._change.pipe(lt(Xt)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const Xt=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:Xt.innerWidth,height:Xt.innerHeight}:{width:0,height:0}}}return Ke.\u0275fac=function(Xt){return new(Xt||Ke)(p.LFG(Rt.t4),p.LFG(p.R0b),p.LFG(tt.K0,8))},Ke.\u0275prov=p.Yz7({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),Ke})(),Ve=(()=>{class Ke{}return Ke.\u0275fac=function(Xt){return new(Xt||Ke)},Ke.\u0275mod=p.oAB({type:Ke}),Ke.\u0275inj=p.cJS({}),Ke})(),ui=(()=>{class Ke{}return Ke.\u0275fac=function(Xt){return new(Xt||Ke)},Ke.\u0275mod=p.oAB({type:Ke}),Ke.\u0275inj=p.cJS({imports:[[mt.vT,Rt.ud,Ve],mt.vT,Ve]}),Ke})()},69808:(L,W,m)=>{"use strict";m.d(W,{mr:()=>wt,Ov:()=>Js,ez:()=>nr,K0:()=>s,Do:()=>yt,Nd:()=>Un,V_:()=>R,Ye:()=>lt,S$:()=>it,mk:()=>hr,sg:()=>er,O5:()=>Jo,PC:()=>ho,RF:()=>bo,n9:()=>ao,b0:()=>ct,lw:()=>c,EM:()=>Ss,JF:()=>Nr,NF:()=>fr,w_:()=>o,bD:()=>Go,q:()=>e,Mx:()=>ln,HT:()=>n});var y=m(5e3);let p=null;function e(){return p}function n(Et){p||(p=Et)}class o{}const s=new y.OlP("DocumentToken");let c=(()=>{class Et{historyGo(F){throw new Error("Not implemented")}}return Et.\u0275fac=function(F){return new(F||Et)},Et.\u0275prov=y.Yz7({token:Et,factory:function(){return(0,y.LFG)(O)},providedIn:"platform"}),Et})();const R=new y.OlP("Location Initialized");let O=(()=>{class Et extends c{constructor(F){super(),this._doc=F,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return e().getBaseHref(this._doc)}onPopState(F){const j=e().getGlobalEventTarget(this._doc,"window");return j.addEventListener("popstate",F,!1),()=>j.removeEventListener("popstate",F)}onHashChange(F){const j=e().getGlobalEventTarget(this._doc,"window");return j.addEventListener("hashchange",F,!1),()=>j.removeEventListener("hashchange",F)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(F){this.location.pathname=F}pushState(F,j,St){H()?this._history.pushState(F,j,St):this.location.hash=St}replaceState(F,j,St){H()?this._history.replaceState(F,j,St):this.location.hash=St}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}}return Et.\u0275fac=function(F){return new(F||Et)(y.LFG(s))},Et.\u0275prov=y.Yz7({token:Et,factory:function(){return new O((0,y.LFG)(s))},providedIn:"platform"}),Et})();function H(){return!!window.history.pushState}function G(Et,K){if(0==Et.length)return K;if(0==K.length)return Et;let F=0;return Et.endsWith("/")&&F++,K.startsWith("/")&&F++,2==F?Et+K.substring(1):1==F?Et+K:Et+"/"+K}function Z(Et){const K=Et.match(/#|\?|$/),F=K&&K.index||Et.length;return Et.slice(0,F-("/"===Et[F-1]?1:0))+Et.slice(F)}function vt(Et){return Et&&"?"!==Et[0]?"?"+Et:Et}let it=(()=>{class Et{historyGo(F){throw new Error("Not implemented")}}return Et.\u0275fac=function(F){return new(F||Et)},Et.\u0275prov=y.Yz7({token:Et,factory:function(){return function(Et){const K=(0,y.LFG)(s).location;return new ct((0,y.LFG)(c),K&&K.origin||"")}()},providedIn:"root"}),Et})();const wt=new y.OlP("appBaseHref");let ct=(()=>{class Et extends it{constructor(F,j){if(super(),this._platformLocation=F,this._removeListenerFns=[],null==j&&(j=this._platformLocation.getBaseHrefFromDOM()),null==j)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=j}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return G(this._baseHref,F)}path(F=!1){const j=this._platformLocation.pathname+vt(this._platformLocation.search),St=this._platformLocation.hash;return St&&F?`${j}${St}`:j}pushState(F,j,St,ge){const ni=this.prepareExternalUrl(St+vt(ge));this._platformLocation.pushState(F,j,ni)}replaceState(F,j,St,ge){const ni=this.prepareExternalUrl(St+vt(ge));this._platformLocation.replaceState(F,j,ni)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(F=0){var j,St;null===(St=(j=this._platformLocation).historyGo)||void 0===St||St.call(j,F)}}return Et.\u0275fac=function(F){return new(F||Et)(y.LFG(c),y.LFG(wt,8))},Et.\u0275prov=y.Yz7({token:Et,factory:Et.\u0275fac}),Et})(),yt=(()=>{class Et extends it{constructor(F,j){super(),this._platformLocation=F,this._baseHref="",this._removeListenerFns=[],null!=j&&(this._baseHref=j)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}path(F=!1){let j=this._platformLocation.hash;return null==j&&(j="#"),j.length>0?j.substring(1):j}prepareExternalUrl(F){const j=G(this._baseHref,F);return j.length>0?"#"+j:j}pushState(F,j,St,ge){let ni=this.prepareExternalUrl(St+vt(ge));0==ni.length&&(ni=this._platformLocation.pathname),this._platformLocation.pushState(F,j,ni)}replaceState(F,j,St,ge){let ni=this.prepareExternalUrl(St+vt(ge));0==ni.length&&(ni=this._platformLocation.pathname),this._platformLocation.replaceState(F,j,ni)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(F=0){var j,St;null===(St=(j=this._platformLocation).historyGo)||void 0===St||St.call(j,F)}}return Et.\u0275fac=function(F){return new(F||Et)(y.LFG(c),y.LFG(wt,8))},Et.\u0275prov=y.Yz7({token:Et,factory:Et.\u0275fac}),Et})(),lt=(()=>{class Et{constructor(F,j){this._subject=new y.vpe,this._urlChangeListeners=[],this._platformStrategy=F;const St=this._platformStrategy.getBaseHref();this._platformLocation=j,this._baseHref=Z(tt(St)),this._platformStrategy.onPopState(ge=>{this._subject.emit({url:this.path(!0),pop:!0,state:ge.state,type:ge.type})})}path(F=!1){return this.normalize(this._platformStrategy.path(F))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(F,j=""){return this.path()==this.normalize(F+vt(j))}normalize(F){return Et.stripTrailingSlash(function(Et,K){return Et&&K.startsWith(Et)?K.substring(Et.length):K}(this._baseHref,tt(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._platformStrategy.prepareExternalUrl(F)}go(F,j="",St=null){this._platformStrategy.pushState(St,"",F,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+vt(j)),St)}replaceState(F,j="",St=null){this._platformStrategy.replaceState(St,"",F,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+vt(j)),St)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(F=0){var j,St;null===(St=(j=this._platformStrategy).historyGo)||void 0===St||St.call(j,F)}onUrlChange(F){this._urlChangeListeners.push(F),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(j=>{this._notifyUrlChangeListeners(j.url,j.state)}))}_notifyUrlChangeListeners(F="",j){this._urlChangeListeners.forEach(St=>St(F,j))}subscribe(F,j,St){return this._subject.subscribe({next:F,error:j,complete:St})}}return Et.normalizeQueryParams=vt,Et.joinWithSlash=G,Et.stripTrailingSlash=Z,Et.\u0275fac=function(F){return new(F||Et)(y.LFG(it),y.LFG(c))},Et.\u0275prov=y.Yz7({token:Et,factory:function(){return new lt((0,y.LFG)(it),(0,y.LFG)(c))},providedIn:"root"}),Et})();function tt(Et){return Et.replace(/\/index.html$/,"")}var dt=(()=>((dt=dt||{})[dt.Zero=0]="Zero",dt[dt.One=1]="One",dt[dt.Two=2]="Two",dt[dt.Few=3]="Few",dt[dt.Many=4]="Many",dt[dt.Other=5]="Other",dt))();const Me=y.kL8;class Do{}let Vo=(()=>{class Et extends Do{constructor(F){super(),this.locale=F}getPluralCategory(F,j){switch(Me(j||this.locale)(F)){case dt.Zero:return"zero";case dt.One:return"one";case dt.Two:return"two";case dt.Few:return"few";case dt.Many:return"many";default:return"other"}}}return Et.\u0275fac=function(F){return new(F||Et)(y.LFG(y.soG))},Et.\u0275prov=y.Yz7({token:Et,factory:Et.\u0275fac}),Et})();function ln(Et,K){K=encodeURIComponent(K);for(const F of Et.split(";")){const j=F.indexOf("="),[St,ge]=-1==j?[F,""]:[F.slice(0,j),F.slice(j+1)];if(St.trim()===K)return decodeURIComponent(ge)}return null}let hr=(()=>{class Et{constructor(F,j,St,ge){this._iterableDiffers=F,this._keyValueDiffers=j,this._ngEl=St,this._renderer=ge,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(F){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof F?F.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(F){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof F?F.split(/\s+/):F,this._rawClass&&((0,y.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const F=this._iterableDiffer.diff(this._rawClass);F&&this._applyIterableChanges(F)}else if(this._keyValueDiffer){const F=this._keyValueDiffer.diff(this._rawClass);F&&this._applyKeyValueChanges(F)}}_applyKeyValueChanges(F){F.forEachAddedItem(j=>this._toggleClass(j.key,j.currentValue)),F.forEachChangedItem(j=>this._toggleClass(j.key,j.currentValue)),F.forEachRemovedItem(j=>{j.previousValue&&this._toggleClass(j.key,!1)})}_applyIterableChanges(F){F.forEachAddedItem(j=>{if("string"!=typeof j.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,y.AaK)(j.item)}`);this._toggleClass(j.item,!0)}),F.forEachRemovedItem(j=>this._toggleClass(j.item,!1))}_applyClasses(F){F&&(Array.isArray(F)||F instanceof Set?F.forEach(j=>this._toggleClass(j,!0)):Object.keys(F).forEach(j=>this._toggleClass(j,!!F[j])))}_removeClasses(F){F&&(Array.isArray(F)||F instanceof Set?F.forEach(j=>this._toggleClass(j,!1)):Object.keys(F).forEach(j=>this._toggleClass(j,!1)))}_toggleClass(F,j){(F=F.trim())&&F.split(/\s+/g).forEach(St=>{j?this._renderer.addClass(this._ngEl.nativeElement,St):this._renderer.removeClass(this._ngEl.nativeElement,St)})}}return Et.\u0275fac=function(F){return new(F||Et)(y.Y36(y.ZZ4),y.Y36(y.aQg),y.Y36(y.SBq),y.Y36(y.Qsj))},Et.\u0275dir=y.lG2({type:Et,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Et})();class ts{constructor(K,F,j,St){this.$implicit=K,this.ngForOf=F,this.index=j,this.count=St}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let er=(()=>{class Et{constructor(F,j,St){this._viewContainer=F,this._template=j,this._differs=St,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(F){this._ngForOf=F,this._ngForOfDirty=!0}set ngForTrackBy(F){this._trackByFn=F}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(F){F&&(this._template=F)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const F=this._ngForOf;!this._differ&&F&&(this._differ=this._differs.find(F).create(this.ngForTrackBy))}if(this._differ){const F=this._differ.diff(this._ngForOf);F&&this._applyChanges(F)}}_applyChanges(F){const j=this._viewContainer;F.forEachOperation((St,ge,ni)=>{if(null==St.previousIndex)j.createEmbeddedView(this._template,new ts(St.item,this._ngForOf,-1,-1),null===ni?void 0:ni);else if(null==ni)j.remove(null===ge?void 0:ge);else if(null!==ge){const ki=j.get(ge);j.move(ki,ni),go(ki,St)}});for(let St=0,ge=j.length;St<ge;St++){const ki=j.get(St).context;ki.index=St,ki.count=ge,ki.ngForOf=this._ngForOf}F.forEachIdentityChange(St=>{go(j.get(St.currentIndex),St)})}static ngTemplateContextGuard(F,j){return!0}}return Et.\u0275fac=function(F){return new(F||Et)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},Et.\u0275dir=y.lG2({type:Et,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Et})();function go(Et,K){Et.context.$implicit=K.item}let Jo=(()=>{class Et{constructor(F,j){this._viewContainer=F,this._context=new qn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=j}set ngIf(F){this._context.$implicit=this._context.ngIf=F,this._updateView()}set ngIfThen(F){un("ngIfThen",F),this._thenTemplateRef=F,this._thenViewRef=null,this._updateView()}set ngIfElse(F){un("ngIfElse",F),this._elseTemplateRef=F,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(F,j){return!0}}return Et.\u0275fac=function(F){return new(F||Et)(y.Y36(y.s_b),y.Y36(y.Rgc))},Et.\u0275dir=y.lG2({type:Et,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Et})();class qn{constructor(){this.$implicit=null,this.ngIf=null}}function un(Et,K){if(K&&!K.createEmbeddedView)throw new Error(`${Et} must be a TemplateRef, but received '${(0,y.AaK)(K)}'.`)}class dr{constructor(K,F){this._viewContainerRef=K,this._templateRef=F,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(K){K&&!this._created?this.create():!K&&this._created&&this.destroy()}}let bo=(()=>{class Et{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(F){this._ngSwitch=F,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(F){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(F)}_matchCase(F){const j=F==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||j,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),j}_updateDefaultCases(F){if(this._defaultViews&&F!==this._defaultUsed){this._defaultUsed=F;for(let j=0;j<this._defaultViews.length;j++)this._defaultViews[j].enforceState(F)}}}return Et.\u0275fac=function(F){return new(F||Et)},Et.\u0275dir=y.lG2({type:Et,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),Et})(),ao=(()=>{class Et{constructor(F,j,St){this.ngSwitch=St,St._addCase(),this._view=new dr(F,j)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return Et.\u0275fac=function(F){return new(F||Et)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(bo,9))},Et.\u0275dir=y.lG2({type:Et,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),Et})(),ho=(()=>{class Et{constructor(F,j,St){this._ngEl=F,this._differs=j,this._renderer=St,this._ngStyle=null,this._differ=null}set ngStyle(F){this._ngStyle=F,!this._differ&&F&&(this._differ=this._differs.find(F).create())}ngDoCheck(){if(this._differ){const F=this._differ.diff(this._ngStyle);F&&this._applyChanges(F)}}_setStyle(F,j){const[St,ge]=F.split(".");null!=(j=null!=j&&ge?`${j}${ge}`:j)?this._renderer.setStyle(this._ngEl.nativeElement,St,j):this._renderer.removeStyle(this._ngEl.nativeElement,St)}_applyChanges(F){F.forEachRemovedItem(j=>this._setStyle(j.key,null)),F.forEachAddedItem(j=>this._setStyle(j.key,j.currentValue)),F.forEachChangedItem(j=>this._setStyle(j.key,j.currentValue))}}return Et.\u0275fac=function(F){return new(F||Et)(y.Y36(y.SBq),y.Y36(y.aQg),y.Y36(y.Qsj))},Et.\u0275dir=y.lG2({type:Et,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),Et})();class _r{createSubscription(K,F){return K.subscribe({next:F,error:j=>{throw j}})}dispose(K){K.unsubscribe()}onDestroy(K){K.unsubscribe()}}class oo{createSubscription(K,F){return K.then(F,j=>{throw j})}dispose(K){}onDestroy(K){}}const xo=new oo,us=new _r;let Js=(()=>{class Et{constructor(F){this._ref=F,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(F){return this._obj?F!==this._obj?(this._dispose(),this.transform(F)):this._latestValue:(F&&this._subscribe(F),this._latestValue)}_subscribe(F){this._obj=F,this._strategy=this._selectStrategy(F),this._subscription=this._strategy.createSubscription(F,j=>this._updateLatestValue(F,j))}_selectStrategy(F){if((0,y.QGY)(F))return xo;if((0,y.F4k)(F))return us;throw function(Et,K){return Error(`InvalidPipeArgument: '${K}' for pipe '${(0,y.AaK)(Et)}'`)}(Et,F)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(F,j){F===this._obj&&(this._latestValue=j,this._ref.markForCheck())}}return Et.\u0275fac=function(F){return new(F||Et)(y.Y36(y.sBO,16))},Et.\u0275pipe=y.Yjl({name:"async",type:Et,pure:!1}),Et})(),Un=(()=>{class Et{constructor(F){this.differs=F,this.keyValues=[],this.compareFn=ko}transform(F,j=ko){if(!F||!(F instanceof Map)&&"object"!=typeof F)return null;this.differ||(this.differ=this.differs.find(F).create());const St=this.differ.diff(F),ge=j!==this.compareFn;return St&&(this.keyValues=[],St.forEachItem(ni=>{this.keyValues.push(function(Et,K){return{key:Et,value:K}}(ni.key,ni.currentValue))})),(St||ge)&&(this.keyValues.sort(j),this.compareFn=j),this.keyValues}}return Et.\u0275fac=function(F){return new(F||Et)(y.Y36(y.aQg,16))},Et.\u0275pipe=y.Yjl({name:"keyvalue",type:Et,pure:!1}),Et})();function ko(Et,K){const F=Et.key,j=K.key;if(F===j)return 0;if(void 0===F)return 1;if(void 0===j)return-1;if(null===F)return 1;if(null===j)return-1;if("string"==typeof F&&"string"==typeof j)return F<j?-1:1;if("number"==typeof F&&"number"==typeof j)return F-j;if("boolean"==typeof F&&"boolean"==typeof j)return F<j?-1:1;const St=String(F),ge=String(j);return St==ge?0:St<ge?-1:1}let nr=(()=>{class Et{}return Et.\u0275fac=function(F){return new(F||Et)},Et.\u0275mod=y.oAB({type:Et}),Et.\u0275inj=y.cJS({providers:[{provide:Do,useClass:Vo}]}),Et})();const Go="browser";function fr(Et){return Et===Go}let Ss=(()=>{class Et{}return Et.\u0275prov=(0,y.Yz7)({token:Et,providedIn:"root",factory:()=>new Lr((0,y.LFG)(s),window)}),Et})();class Lr{constructor(K,F){this.document=K,this.window=F,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const F=function(Et,K){const F=Et.getElementById(K)||Et.getElementsByName(K)[0];if(F)return F;if("function"==typeof Et.createTreeWalker&&Et.body&&(Et.body.createShadowRoot||Et.body.attachShadow)){const j=Et.createTreeWalker(Et.body,NodeFilter.SHOW_ELEMENT);let St=j.currentNode;for(;St;){const ge=St.shadowRoot;if(ge){const ni=ge.getElementById(K)||ge.querySelector(`[name="${K}"]`);if(ni)return ni}St=j.nextNode()}}return null}(this.document,K);F&&(this.scrollToElement(F),this.attemptFocus(F))}setHistoryScrollRestoration(K){if(this.supportScrollRestoration()){const F=this.window.history;F&&F.scrollRestoration&&(F.scrollRestoration=K)}}scrollToElement(K){const F=K.getBoundingClientRect(),j=F.left+this.window.pageXOffset,St=F.top+this.window.pageYOffset,ge=this.offset();this.window.scrollTo(j-ge[0],St-ge[1])}attemptFocus(K){return K.focus(),this.document.activeElement===K}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const K=Hs(this.window.history)||Hs(Object.getPrototypeOf(this.window.history));return!(!K||!K.writable&&!K.set)}catch(K){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(K){return!1}}}function Hs(Et){return Object.getOwnPropertyDescriptor(Et,"scrollRestoration")}class Nr{}},40520:(L,W,m)=>{"use strict";m.d(W,{eN:()=>It,JF:()=>Zt});var y=m(69808),p=m(5e3),e=m(39646),t=m(79307),n=m(24351),o=m(39300),s=m(54004);class c{}class v{}class R{constructor(Mt){this.normalizedNames=new Map,this.lazyUpdate=null,Mt?this.lazyInit="string"==typeof Mt?()=>{this.headers=new Map,Mt.split("\n").forEach(Nt=>{const ke=Nt.indexOf(":");if(ke>0){const je=Nt.slice(0,ke),li=je.toLowerCase(),ri=Nt.slice(ke+1).trim();this.maybeSetNormalizedName(je,li),this.headers.has(li)?this.headers.get(li).push(ri):this.headers.set(li,[ri])}})}:()=>{this.headers=new Map,Object.keys(Mt).forEach(Nt=>{let ke=Mt[Nt];const je=Nt.toLowerCase();"string"==typeof ke&&(ke=[ke]),ke.length>0&&(this.headers.set(je,ke),this.maybeSetNormalizedName(Nt,je))})}:this.headers=new Map}has(Mt){return this.init(),this.headers.has(Mt.toLowerCase())}get(Mt){this.init();const Nt=this.headers.get(Mt.toLowerCase());return Nt&&Nt.length>0?Nt[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Mt){return this.init(),this.headers.get(Mt.toLowerCase())||null}append(Mt,Nt){return this.clone({name:Mt,value:Nt,op:"a"})}set(Mt,Nt){return this.clone({name:Mt,value:Nt,op:"s"})}delete(Mt,Nt){return this.clone({name:Mt,value:Nt,op:"d"})}maybeSetNormalizedName(Mt,Nt){this.normalizedNames.has(Nt)||this.normalizedNames.set(Nt,Mt)}init(){this.lazyInit&&(this.lazyInit instanceof R?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Mt=>this.applyUpdate(Mt)),this.lazyUpdate=null))}copyFrom(Mt){Mt.init(),Array.from(Mt.headers.keys()).forEach(Nt=>{this.headers.set(Nt,Mt.headers.get(Nt)),this.normalizedNames.set(Nt,Mt.normalizedNames.get(Nt))})}clone(Mt){const Nt=new R;return Nt.lazyInit=this.lazyInit&&this.lazyInit instanceof R?this.lazyInit:this,Nt.lazyUpdate=(this.lazyUpdate||[]).concat([Mt]),Nt}applyUpdate(Mt){const Nt=Mt.name.toLowerCase();switch(Mt.op){case"a":case"s":let ke=Mt.value;if("string"==typeof ke&&(ke=[ke]),0===ke.length)return;this.maybeSetNormalizedName(Mt.name,Nt);const je=("a"===Mt.op?this.headers.get(Nt):void 0)||[];je.push(...ke),this.headers.set(Nt,je);break;case"d":const li=Mt.value;if(li){let ri=this.headers.get(Nt);if(!ri)return;ri=ri.filter(mi=>-1===li.indexOf(mi)),0===ri.length?(this.headers.delete(Nt),this.normalizedNames.delete(Nt)):this.headers.set(Nt,ri)}else this.headers.delete(Nt),this.normalizedNames.delete(Nt)}}forEach(Mt){this.init(),Array.from(this.normalizedNames.keys()).forEach(Nt=>Mt(this.normalizedNames.get(Nt),this.headers.get(Nt)))}}class O{encodeKey(Mt){return Z(Mt)}encodeValue(Mt){return Z(Mt)}decodeKey(Mt){return decodeURIComponent(Mt)}decodeValue(Mt){return decodeURIComponent(Mt)}}const V=/%(\d[a-f0-9])/gi,G={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Z(le){return encodeURIComponent(le).replace(V,(Mt,Nt)=>{var ke;return null!==(ke=G[Nt])&&void 0!==ke?ke:Mt})}function vt(le){return`${le}`}class it{constructor(Mt={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Mt.encoder||new O,Mt.fromString){if(Mt.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(le,Mt){const Nt=new Map;return le.length>0&&le.replace(/^\?/,"").split("&").forEach(je=>{const li=je.indexOf("="),[ri,mi]=-1==li?[Mt.decodeKey(je),""]:[Mt.decodeKey(je.slice(0,li)),Mt.decodeValue(je.slice(li+1))],Bi=Nt.get(ri)||[];Bi.push(mi),Nt.set(ri,Bi)}),Nt}(Mt.fromString,this.encoder)}else Mt.fromObject?(this.map=new Map,Object.keys(Mt.fromObject).forEach(Nt=>{const ke=Mt.fromObject[Nt];this.map.set(Nt,Array.isArray(ke)?ke:[ke])})):this.map=null}has(Mt){return this.init(),this.map.has(Mt)}get(Mt){this.init();const Nt=this.map.get(Mt);return Nt?Nt[0]:null}getAll(Mt){return this.init(),this.map.get(Mt)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Mt,Nt){return this.clone({param:Mt,value:Nt,op:"a"})}appendAll(Mt){const Nt=[];return Object.keys(Mt).forEach(ke=>{const je=Mt[ke];Array.isArray(je)?je.forEach(li=>{Nt.push({param:ke,value:li,op:"a"})}):Nt.push({param:ke,value:je,op:"a"})}),this.clone(Nt)}set(Mt,Nt){return this.clone({param:Mt,value:Nt,op:"s"})}delete(Mt,Nt){return this.clone({param:Mt,value:Nt,op:"d"})}toString(){return this.init(),this.keys().map(Mt=>{const Nt=this.encoder.encodeKey(Mt);return this.map.get(Mt).map(ke=>Nt+"="+this.encoder.encodeValue(ke)).join("&")}).filter(Mt=>""!==Mt).join("&")}clone(Mt){const Nt=new it({encoder:this.encoder});return Nt.cloneFrom=this.cloneFrom||this,Nt.updates=(this.updates||[]).concat(Mt),Nt}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Mt=>this.map.set(Mt,this.cloneFrom.map.get(Mt))),this.updates.forEach(Mt=>{switch(Mt.op){case"a":case"s":const Nt=("a"===Mt.op?this.map.get(Mt.param):void 0)||[];Nt.push(vt(Mt.value)),this.map.set(Mt.param,Nt);break;case"d":if(void 0===Mt.value){this.map.delete(Mt.param);break}{let ke=this.map.get(Mt.param)||[];const je=ke.indexOf(vt(Mt.value));-1!==je&&ke.splice(je,1),ke.length>0?this.map.set(Mt.param,ke):this.map.delete(Mt.param)}}}),this.cloneFrom=this.updates=null)}}class wt{constructor(){this.map=new Map}set(Mt,Nt){return this.map.set(Mt,Nt),this}get(Mt){return this.map.has(Mt)||this.map.set(Mt,Mt.defaultValue()),this.map.get(Mt)}delete(Mt){return this.map.delete(Mt),this}has(Mt){return this.map.has(Mt)}keys(){return this.map.keys()}}function yt(le){return"undefined"!=typeof ArrayBuffer&&le instanceof ArrayBuffer}function lt(le){return"undefined"!=typeof Blob&&le instanceof Blob}function at(le){return"undefined"!=typeof FormData&&le instanceof FormData}class tt{constructor(Mt,Nt,ke,je){let li;if(this.url=Nt,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Mt.toUpperCase(),function(le){switch(le){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||je?(this.body=void 0!==ke?ke:null,li=je):li=ke,li&&(this.reportProgress=!!li.reportProgress,this.withCredentials=!!li.withCredentials,li.responseType&&(this.responseType=li.responseType),li.headers&&(this.headers=li.headers),li.context&&(this.context=li.context),li.params&&(this.params=li.params)),this.headers||(this.headers=new R),this.context||(this.context=new wt),this.params){const ri=this.params.toString();if(0===ri.length)this.urlWithParams=Nt;else{const mi=Nt.indexOf("?");this.urlWithParams=Nt+(-1===mi?"?":mi<Nt.length-1?"&":"")+ri}}else this.params=new it,this.urlWithParams=Nt}serializeBody(){return null===this.body?null:yt(this.body)||lt(this.body)||at(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof it?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||at(this.body)?null:lt(this.body)?this.body.type||null:yt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof it?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Mt={}){var Nt;const ke=Mt.method||this.method,je=Mt.url||this.url,li=Mt.responseType||this.responseType,ri=void 0!==Mt.body?Mt.body:this.body,mi=void 0!==Mt.withCredentials?Mt.withCredentials:this.withCredentials,Bi=void 0!==Mt.reportProgress?Mt.reportProgress:this.reportProgress;let pi=Mt.headers||this.headers,bi=Mt.params||this.params;const yi=null!==(Nt=Mt.context)&&void 0!==Nt?Nt:this.context;return void 0!==Mt.setHeaders&&(pi=Object.keys(Mt.setHeaders).reduce(($e,ei)=>$e.set(ei,Mt.setHeaders[ei]),pi)),Mt.setParams&&(bi=Object.keys(Mt.setParams).reduce(($e,ei)=>$e.set(ei,Mt.setParams[ei]),bi)),new tt(ke,je,ri,{params:bi,headers:pi,context:yi,reportProgress:Bi,responseType:li,withCredentials:mi})}}var Rt=(()=>((Rt=Rt||{})[Rt.Sent=0]="Sent",Rt[Rt.UploadProgress=1]="UploadProgress",Rt[Rt.ResponseHeader=2]="ResponseHeader",Rt[Rt.DownloadProgress=3]="DownloadProgress",Rt[Rt.Response=4]="Response",Rt[Rt.User=5]="User",Rt))();class mt{constructor(Mt,Nt=200,ke="OK"){this.headers=Mt.headers||new R,this.status=void 0!==Mt.status?Mt.status:Nt,this.statusText=Mt.statusText||ke,this.url=Mt.url||null,this.ok=this.status>=200&&this.status<300}}class dt extends mt{constructor(Mt={}){super(Mt),this.type=Rt.ResponseHeader}clone(Mt={}){return new dt({headers:Mt.headers||this.headers,status:void 0!==Mt.status?Mt.status:this.status,statusText:Mt.statusText||this.statusText,url:Mt.url||this.url||void 0})}}class nt extends mt{constructor(Mt={}){super(Mt),this.type=Rt.Response,this.body=void 0!==Mt.body?Mt.body:null}clone(Mt={}){return new nt({body:void 0!==Mt.body?Mt.body:this.body,headers:Mt.headers||this.headers,status:void 0!==Mt.status?Mt.status:this.status,statusText:Mt.statusText||this.statusText,url:Mt.url||this.url||void 0})}}class st extends mt{constructor(Mt){super(Mt,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Mt.url||"(unknown url)"}`:`Http failure response for ${Mt.url||"(unknown url)"}: ${Mt.status} ${Mt.statusText}`,this.error=Mt.error||null}}function Gt(le,Mt){return{body:Mt,headers:le.headers,context:le.context,observe:le.observe,params:le.params,reportProgress:le.reportProgress,responseType:le.responseType,withCredentials:le.withCredentials}}let It=(()=>{class le{constructor(Nt){this.handler=Nt}request(Nt,ke,je={}){let li;if(Nt instanceof tt)li=Nt;else{let Bi,pi;Bi=je.headers instanceof R?je.headers:new R(je.headers),je.params&&(pi=je.params instanceof it?je.params:new it({fromObject:je.params})),li=new tt(Nt,ke,void 0!==je.body?je.body:null,{headers:Bi,context:je.context,params:pi,reportProgress:je.reportProgress,responseType:je.responseType||"json",withCredentials:je.withCredentials})}const ri=(0,e.of)(li).pipe((0,n.b)(Bi=>this.handler.handle(Bi)));if(Nt instanceof tt||"events"===je.observe)return ri;const mi=ri.pipe((0,o.h)(Bi=>Bi instanceof nt));switch(je.observe||"body"){case"body":switch(li.responseType){case"arraybuffer":return mi.pipe((0,s.U)(Bi=>{if(null!==Bi.body&&!(Bi.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Bi.body}));case"blob":return mi.pipe((0,s.U)(Bi=>{if(null!==Bi.body&&!(Bi.body instanceof Blob))throw new Error("Response is not a Blob.");return Bi.body}));case"text":return mi.pipe((0,s.U)(Bi=>{if(null!==Bi.body&&"string"!=typeof Bi.body)throw new Error("Response is not a string.");return Bi.body}));default:return mi.pipe((0,s.U)(Bi=>Bi.body))}case"response":return mi;default:throw new Error(`Unreachable: unhandled observe type ${je.observe}}`)}}delete(Nt,ke={}){return this.request("DELETE",Nt,ke)}get(Nt,ke={}){return this.request("GET",Nt,ke)}head(Nt,ke={}){return this.request("HEAD",Nt,ke)}jsonp(Nt,ke){return this.request("JSONP",Nt,{params:(new it).append(ke,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Nt,ke={}){return this.request("OPTIONS",Nt,ke)}patch(Nt,ke,je={}){return this.request("PATCH",Nt,Gt(je,ke))}post(Nt,ke,je={}){return this.request("POST",Nt,Gt(je,ke))}put(Nt,ke,je={}){return this.request("PUT",Nt,Gt(je,ke))}}return le.\u0275fac=function(Nt){return new(Nt||le)(p.LFG(c))},le.\u0275prov=p.Yz7({token:le,factory:le.\u0275fac}),le})();class Vt{constructor(Mt,Nt){this.next=Mt,this.interceptor=Nt}handle(Mt){return this.interceptor.intercept(Mt,this.next)}}const Ie=new p.OlP("HTTP_INTERCEPTORS");let Ze=(()=>{class le{intercept(Nt,ke){return ke.handle(Nt)}}return le.\u0275fac=function(Nt){return new(Nt||le)},le.\u0275prov=p.Yz7({token:le,factory:le.\u0275fac}),le})();const we=/^\)\]\}',?\n/;let ui=(()=>{class le{constructor(Nt){this.xhrFactory=Nt}handle(Nt){if("JSONP"===Nt.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new t.y(ke=>{const je=this.xhrFactory.build();if(je.open(Nt.method,Nt.urlWithParams),Nt.withCredentials&&(je.withCredentials=!0),Nt.headers.forEach((ei,ae)=>je.setRequestHeader(ei,ae.join(","))),Nt.headers.has("Accept")||je.setRequestHeader("Accept","application/json, text/plain, */*"),!Nt.headers.has("Content-Type")){const ei=Nt.detectContentTypeHeader();null!==ei&&je.setRequestHeader("Content-Type",ei)}if(Nt.responseType){const ei=Nt.responseType.toLowerCase();je.responseType="json"!==ei?ei:"text"}const li=Nt.serializeBody();let ri=null;const mi=()=>{if(null!==ri)return ri;const ei=1223===je.status?204:je.status,ae=je.statusText||"OK",Pe=new R(je.getAllResponseHeaders()),oi=function(le){return"responseURL"in le&&le.responseURL?le.responseURL:/^X-Request-URL:/m.test(le.getAllResponseHeaders())?le.getResponseHeader("X-Request-URL"):null}(je)||Nt.url;return ri=new dt({headers:Pe,status:ei,statusText:ae,url:oi}),ri},Bi=()=>{let{headers:ei,status:ae,statusText:Pe,url:oi}=mi(),Te=null;204!==ae&&(Te=void 0===je.response?je.responseText:je.response),0===ae&&(ae=Te?200:0);let Oe=ae>=200&&ae<300;if("json"===Nt.responseType&&"string"==typeof Te){const se=Te;Te=Te.replace(we,"");try{Te=""!==Te?JSON.parse(Te):null}catch(Jt){Te=se,Oe&&(Oe=!1,Te={error:Jt,text:Te})}}Oe?(ke.next(new nt({body:Te,headers:ei,status:ae,statusText:Pe,url:oi||void 0})),ke.complete()):ke.error(new st({error:Te,headers:ei,status:ae,statusText:Pe,url:oi||void 0}))},pi=ei=>{const{url:ae}=mi(),Pe=new st({error:ei,status:je.status||0,statusText:je.statusText||"Unknown Error",url:ae||void 0});ke.error(Pe)};let bi=!1;const yi=ei=>{bi||(ke.next(mi()),bi=!0);let ae={type:Rt.DownloadProgress,loaded:ei.loaded};ei.lengthComputable&&(ae.total=ei.total),"text"===Nt.responseType&&!!je.responseText&&(ae.partialText=je.responseText),ke.next(ae)},$e=ei=>{let ae={type:Rt.UploadProgress,loaded:ei.loaded};ei.lengthComputable&&(ae.total=ei.total),ke.next(ae)};return je.addEventListener("load",Bi),je.addEventListener("error",pi),je.addEventListener("timeout",pi),je.addEventListener("abort",pi),Nt.reportProgress&&(je.addEventListener("progress",yi),null!==li&&je.upload&&je.upload.addEventListener("progress",$e)),je.send(li),ke.next({type:Rt.Sent}),()=>{je.removeEventListener("error",pi),je.removeEventListener("abort",pi),je.removeEventListener("load",Bi),je.removeEventListener("timeout",pi),Nt.reportProgress&&(je.removeEventListener("progress",yi),null!==li&&je.upload&&je.upload.removeEventListener("progress",$e)),je.readyState!==je.DONE&&je.abort()}})}}return le.\u0275fac=function(Nt){return new(Nt||le)(p.LFG(y.JF))},le.\u0275prov=p.Yz7({token:le,factory:le.\u0275fac}),le})();const Ke=new p.OlP("XSRF_COOKIE_NAME"),be=new p.OlP("XSRF_HEADER_NAME");class Xt{}let re=(()=>{class le{constructor(Nt,ke,je){this.doc=Nt,this.platform=ke,this.cookieName=je,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Nt=this.doc.cookie||"";return Nt!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,y.Mx)(Nt,this.cookieName),this.lastCookieString=Nt),this.lastToken}}return le.\u0275fac=function(Nt){return new(Nt||le)(p.LFG(y.K0),p.LFG(p.Lbi),p.LFG(Ke))},le.\u0275prov=p.Yz7({token:le,factory:le.\u0275fac}),le})(),Me=(()=>{class le{constructor(Nt,ke){this.tokenService=Nt,this.headerName=ke}intercept(Nt,ke){const je=Nt.url.toLowerCase();if("GET"===Nt.method||"HEAD"===Nt.method||je.startsWith("http://")||je.startsWith("https://"))return ke.handle(Nt);const li=this.tokenService.getToken();return null!==li&&!Nt.headers.has(this.headerName)&&(Nt=Nt.clone({headers:Nt.headers.set(this.headerName,li)})),ke.handle(Nt)}}return le.\u0275fac=function(Nt){return new(Nt||le)(p.LFG(Xt),p.LFG(be))},le.\u0275prov=p.Yz7({token:le,factory:le.\u0275fac}),le})(),vi=(()=>{class le{constructor(Nt,ke){this.backend=Nt,this.injector=ke,this.chain=null}handle(Nt){if(null===this.chain){const ke=this.injector.get(Ie,[]);this.chain=ke.reduceRight((je,li)=>new Vt(je,li),this.backend)}return this.chain.handle(Nt)}}return le.\u0275fac=function(Nt){return new(Nt||le)(p.LFG(v),p.LFG(p.zs3))},le.\u0275prov=p.Yz7({token:le,factory:le.\u0275fac}),le})(),Ht=(()=>{class le{static disable(){return{ngModule:le,providers:[{provide:Me,useClass:Ze}]}}static withOptions(Nt={}){return{ngModule:le,providers:[Nt.cookieName?{provide:Ke,useValue:Nt.cookieName}:[],Nt.headerName?{provide:be,useValue:Nt.headerName}:[]]}}}return le.\u0275fac=function(Nt){return new(Nt||le)},le.\u0275mod=p.oAB({type:le}),le.\u0275inj=p.cJS({providers:[Me,{provide:Ie,useExisting:Me,multi:!0},{provide:Xt,useClass:re},{provide:Ke,useValue:"XSRF-TOKEN"},{provide:be,useValue:"X-XSRF-TOKEN"}]}),le})(),Zt=(()=>{class le{}return le.\u0275fac=function(Nt){return new(Nt||le)},le.\u0275mod=p.oAB({type:le}),le.\u0275inj=p.cJS({providers:[It,{provide:c,useClass:vi},ui,{provide:v,useExisting:ui}],imports:[[Ht.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),le})()},5e3:(L,W,m)=>{"use strict";m.d(W,{deG:()=>Wc,tb:()=>Tb,AFp:()=>bb,ip1:()=>ym,CZH:()=>Bp,hGG:()=>iS,z2F:()=>Of,sBO:()=>OC,Sil:()=>Tm,_Vd:()=>Sf,EJc:()=>Sb,SBq:()=>wf,qLn:()=>ou,vpe:()=>bu,tBr:()=>ea,XFs:()=>Ht,OlP:()=>Mo,zs3:()=>ut,ZZ4:()=>mg,aQg:()=>_g,soG:()=>fg,YKP:()=>Av,h0i:()=>Np,PXZ:()=>SC,R0b:()=>Hl,FiY:()=>Ca,Lbi:()=>Eb,g9A:()=>yb,n_E:()=>lg,Qsj:()=>aT,FYo:()=>Rv,JOm:()=>$a,q3G:()=>ur,tp0:()=>La,Rgc:()=>Mf,dDg:()=>Db,GfV:()=>Dv,s_b:()=>ug,ifc:()=>ri,eFA:()=>Ab,G48:()=>AC,Gpc:()=>O,f3M:()=>_s,_c5:()=>JC,VLi:()=>yC,c2e:()=>Cb,zSh:()=>Ad,wAp:()=>xn,vHH:()=>Z,EiD:()=>Rc,mCW:()=>Co,qzn:()=>ne,JVY:()=>We,pB0:()=>gi,eBb:()=>He,L6k:()=>Se,LAX:()=>hi,cg1:()=>Qg,kL8:()=>$_,yhl:()=>_e,dqk:()=>yi,sIi:()=>Uh,CqO:()=>a_,QGY:()=>Bg,F4k:()=>s_,RDi:()=>Ss,AaK:()=>c,z3N:()=>Ft,qOj:()=>Bl,TTD:()=>No,_Bn:()=>Cv,xp6:()=>pd,uIk:()=>k,ekj:()=>zg,Suo:()=>Zv,Xpm:()=>Ee,lG2:()=>fe,Yz7:()=>pe,cJS:()=>Ve,oAB:()=>Ln,Yjl:()=>ze,Y36:()=>vf,_UZ:()=>n_,GkF:()=>o_,BQk:()=>Fg,ynx:()=>Pg,qZA:()=>Ng,TgZ:()=>Lg,EpF:()=>r_,n5z:()=>nl,Ikx:()=>$g,LFG:()=>gr,$8M:()=>Wl,$Z:()=>i_,NdJ:()=>Hg,CRH:()=>Qv,kcU:()=>Fr,O4$:()=>Pr,oxw:()=>u_,ALo:()=>Gv,lcZ:()=>Wv,Hsn:()=>d_,F$t:()=>h_,Q6J:()=>xg,s9C:()=>Gg,DdM:()=>Lv,VKq:()=>Nv,WLB:()=>Pv,iGM:()=>Jv,MAs:()=>zm,CHM:()=>Bt,LSH:()=>gh,Udp:()=>jg,WFA:()=>Vg,d8E:()=>Zg,YNc:()=>jm,W1O:()=>ib,_uU:()=>L_,Oqu:()=>Xg,hij:()=>eg,AsE:()=>Kg,lnq:()=>Jg,Gf:()=>$v});var y=m(77579),p=m(50727),e=m(79307),t=m(56451),n=m(13099);function o(h){for(let d in h)if(h[d]===o)return d;throw Error("Could not find renamed property on target object.")}function s(h,d){for(const b in d)d.hasOwnProperty(b)&&!h.hasOwnProperty(b)&&(h[b]=d[b])}function c(h){if("string"==typeof h)return h;if(Array.isArray(h))return"["+h.map(c).join(", ")+"]";if(null==h)return""+h;if(h.overriddenName)return`${h.overriddenName}`;if(h.name)return`${h.name}`;const d=h.toString();if(null==d)return""+d;const b=d.indexOf("\n");return-1===b?d:d.substring(0,b)}function v(h,d){return null==h||""===h?null===d?"":d:null==d||""===d?h:h+" "+d}const R=o({__forward_ref__:o});function O(h){return h.__forward_ref__=O,h.toString=function(){return c(this())},h}function H(h){return V(h)?h():h}function V(h){return"function"==typeof h&&h.hasOwnProperty(R)&&h.__forward_ref__===O}class Z extends Error{constructor(d,b){super(function(h,d){return`${h?`NG0${h}: `:""}${d}`}(d,b)),this.code=d}}function ot(h){return"string"==typeof h?h:null==h?"":String(h)}function wt(h){return"function"==typeof h?h.name||h.toString():"object"==typeof h&&null!=h&&"function"==typeof h.type?h.type.name||h.type.toString():ot(h)}function at(h,d){const b=d?` in ${d}`:"";throw new Z("201",`No provider for ${wt(h)} found${b}`)}function Be(h,d){null==h&&function(h,d,b,C){throw new Error(`ASSERTION ERROR: ${h}`+(null==C?"":` [Expected=> ${b} ${C} ${d} <=Actual]`))}(d,h,null,"!=")}function pe(h){return{token:h.token,providedIn:h.providedIn||null,factory:h.factory,value:void 0}}function Ve(h){return{providers:h.providers||[],imports:h.imports||[]}}function ui(h){return Ke(h,Me)||Ke(h,ie)}function Ke(h,d){return h.hasOwnProperty(d)?h[d]:null}function re(h){return h&&(h.hasOwnProperty(vi)||h.hasOwnProperty(Ut))?h[vi]:null}const Me=o({\u0275prov:o}),vi=o({\u0275inj:o}),ie=o({ngInjectableDef:o}),Ut=o({ngInjectorDef:o});var Ht=(()=>((Ht=Ht||{})[Ht.Default=0]="Default",Ht[Ht.Host=1]="Host",Ht[Ht.Self=2]="Self",Ht[Ht.SkipSelf=4]="SkipSelf",Ht[Ht.Optional=8]="Optional",Ht))();let Zt;function ue(h){const d=Zt;return Zt=h,d}function le(h,d,b){const C=ui(h);return C&&"root"==C.providedIn?void 0===C.value?C.value=C.factory():C.value:b&Ht.Optional?null:void 0!==d?d:void at(c(h),"Injector")}function Nt(h){return{toString:h}.toString()}var ke=(()=>((ke=ke||{})[ke.OnPush=0]="OnPush",ke[ke.Default=1]="Default",ke))(),ri=(()=>{return(h=ri||(ri={}))[h.Emulated=0]="Emulated",h[h.None=2]="None",h[h.ShadowDom=3]="ShadowDom",ri;var h})();const mi="undefined"!=typeof globalThis&&globalThis,Bi="undefined"!=typeof window&&window,pi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,yi=mi||"undefined"!=typeof global&&global||Bi||pi,ae={},Pe=[],oi=o({\u0275cmp:o}),Te=o({\u0275dir:o}),Oe=o({\u0275pipe:o}),se=o({\u0275mod:o}),Jt=o({\u0275fac:o}),te=o({__NG_ELEMENT_ID__:o});let qt=0;function Ee(h){return Nt(()=>{const b={},C={type:h.type,providersResolver:null,decls:h.decls,vars:h.vars,factory:null,template:h.template||null,consts:h.consts||null,ngContentSelectors:h.ngContentSelectors,hostBindings:h.hostBindings||null,hostVars:h.hostVars||0,hostAttrs:h.hostAttrs||null,contentQueries:h.contentQueries||null,declaredInputs:b,inputs:null,outputs:null,exportAs:h.exportAs||null,onPush:h.changeDetection===ke.OnPush,directiveDefs:null,pipeDefs:null,selectors:h.selectors||Pe,viewQuery:h.viewQuery||null,features:h.features||null,data:h.data||{},encapsulation:h.encapsulation||ri.Emulated,id:"c",styles:h.styles||Pe,_:null,setInput:null,schemas:h.schemas||null,tView:null},I=h.directives,x=h.features,Y=h.pipes;return C.id+=qt++,C.inputs=Re(h.inputs,b),C.outputs=Re(h.outputs),x&&x.forEach(et=>et(C)),C.directiveDefs=I?()=>("function"==typeof I?I():I).map(Pi):null,C.pipeDefs=Y?()=>("function"==typeof Y?Y():Y).map(Hi):null,C})}function Pi(h){return _i(h)||function(h){return h[Te]||null}(h)}function Hi(h){return function(h){return h[Oe]||null}(h)}const bn={};function Ln(h){return Nt(()=>{const d={type:h.type,bootstrap:h.bootstrap||Pe,declarations:h.declarations||Pe,imports:h.imports||Pe,exports:h.exports||Pe,transitiveCompileScopes:null,schemas:h.schemas||null,id:h.id||null};return null!=h.id&&(bn[h.id]=h.type),d})}function Re(h,d){if(null==h)return ae;const b={};for(const C in h)if(h.hasOwnProperty(C)){let I=h[C],x=I;Array.isArray(I)&&(x=I[1],I=I[0]),b[I]=C,d&&(d[I]=x)}return b}const fe=Ee;function ze(h){return{type:h.type,name:h.name,factory:null,pure:!1!==h.pure,onDestroy:h.type.prototype.ngOnDestroy||null}}function _i(h){return h[oi]||null}function Mn(h,d){const b=h[se]||null;if(!b&&!0===d)throw new Error(`Type ${c(h)} does not have '\u0275mod' property.`);return b}function ao(h){return Array.isArray(h)&&"object"==typeof h[1]}function pr(h){return Array.isArray(h)&&!0===h[1]}function En(h){return 0!=(8&h.flags)}function es(h){return 2==(2&h.flags)}function Uo(h){return 1==(1&h.flags)}function ho(h){return null!==h.template}function $o(h){return 0!=(512&h[2])}function ir(h,d){return h.hasOwnProperty(Jt)?h[Jt]:null}class ps{constructor(d,b,C){this.previousValue=d,this.currentValue=b,this.firstChange=C}isFirstChange(){return this.firstChange}}function No(){return yr}function yr(h){return h.type.prototype.ngOnChanges&&(h.setInput=nr),Wr}function Wr(){const h=mo(this),d=null==h?void 0:h.current;if(d){const b=h.previous;if(b===ae)h.previous=d;else for(let C in d)b[C]=d[C];h.current=null,this.ngOnChanges(d)}}function nr(h,d,b,C){const I=mo(h)||function(h,d){return h[Go]=d}(h,{previous:ae,current:null}),x=I.current||(I.current={}),Y=I.previous,et=this.declaredInputs[b],_t=Y[et];x[et]=new ps(_t&&_t.currentValue,d,Y===ae),h[C]=d}No.ngInherit=!0;const Go="__ngSimpleChanges__";function mo(h){return h[Go]||null}const Qs="http://www.w3.org/2000/svg";let Po;function Ss(h){Po=h}function $n(h){return!!h.listen}const sn={createRenderer:(h,d)=>void 0!==Po?Po:"undefined"!=typeof document?document:void 0};function Et(h){for(;Array.isArray(h);)h=h[0];return h}function j(h,d){return Et(d[h])}function St(h,d){return Et(d[h.index])}function ni(h,d){return h.data[d]}function ki(h,d){return h[d]}function cn(h,d){const b=d[h];return ao(b)?b:b[0]}function Yn(h){return 4==(4&h[2])}function to(h){return 128==(128&h[2])}function yo(h,d){return null==d?null:h[d]}function lo(h){h[18]=0}function Io(h,d){h[5]+=d;let b=h,C=h[3];for(;null!==C&&(1===d&&1===b[5]||-1===d&&0===b[5]);)C[5]+=d,b=C,C=C[3]}const fn={lFrame:zo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Er(){return fn.bindingsEnabled}function Di(){return fn.lFrame.lView}function Zn(){return fn.lFrame.tView}function Bt(h){return fn.lFrame.contextLView=h,h[8]}function U(){let h=X();for(;null!==h&&64===h.type;)h=h.parent;return h}function X(){return fn.lFrame.currentTNode}function Pt(h,d){const b=fn.lFrame;b.currentTNode=h,b.isParent=d}function $t(){return fn.lFrame.isParent}function Ce(){fn.lFrame.isParent=!1}function Ei(){return fn.isInCheckNoChangesMode}function Ni(h){fn.isInCheckNoChangesMode=h}function Gi(){const h=fn.lFrame;let d=h.bindingRootIndex;return-1===d&&(d=h.bindingRootIndex=h.tView.bindingStartIndex),d}function dn(){return fn.lFrame.bindingIndex}function on(){return fn.lFrame.bindingIndex++}function _n(h){const d=fn.lFrame,b=d.bindingIndex;return d.bindingIndex=d.bindingIndex+h,b}function po(h,d){const b=fn.lFrame;b.bindingIndex=b.bindingRootIndex=h,Wo(d)}function Wo(h){fn.lFrame.currentDirectiveIndex=h}function jr(h){const d=fn.lFrame.currentDirectiveIndex;return-1===d?null:h[d]}function zr(){return fn.lFrame.currentQueryIndex}function jo(h){fn.lFrame.currentQueryIndex=h}function Us(h){const d=h[1];return 2===d.type?d.declTNode:1===d.type?h[6]:null}function ns(h,d,b){if(b&Ht.SkipSelf){let I=d,x=h;for(;!(I=I.parent,null!==I||b&Ht.Host||(I=Us(x),null===I||(x=x[15],10&I.type))););if(null===I)return!1;d=I,h=x}const C=fn.lFrame=Rs();return C.currentTNode=d,C.lView=h,!0}function Yr(h){const d=Rs(),b=h[1];fn.lFrame=d,d.currentTNode=b.firstChild,d.lView=h,d.tView=b,d.contextLView=h,d.bindingIndex=b.bindingStartIndex,d.inI18n=!1}function Rs(){const h=fn.lFrame,d=null===h?null:h.child;return null===d?zo(h):d}function zo(h){const d={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:h,child:null,inI18n:!1};return null!==h&&(h.child=d),d}function os(){const h=fn.lFrame;return fn.lFrame=h.parent,h.currentTNode=null,h.lView=null,h}const ya=os;function Gs(){const h=os();h.isParent=!0,h.tView=null,h.selectedIndex=-1,h.contextLView=null,h.elementDepthCount=0,h.currentDirectiveIndex=-1,h.currentNamespace=null,h.bindingRootIndex=-1,h.bindingIndex=-1,h.currentQueryIndex=0}function nn(){return fn.lFrame.selectedIndex}function An(h){fn.lFrame.selectedIndex=h}function On(){const h=fn.lFrame;return ni(h.tView,h.selectedIndex)}function Pr(){fn.lFrame.currentNamespace=Qs}function Fr(){fn.lFrame.currentNamespace=null}function Ds(h,d){for(let b=d.directiveStart,C=d.directiveEnd;b<C;b++){const x=h.data[b].type.prototype,{ngAfterContentInit:Y,ngAfterContentChecked:et,ngAfterViewInit:_t,ngAfterViewChecked:Ot,ngOnDestroy:Wt}=x;Y&&(h.contentHooks||(h.contentHooks=[])).push(-b,Y),et&&((h.contentHooks||(h.contentHooks=[])).push(b,et),(h.contentCheckHooks||(h.contentCheckHooks=[])).push(b,et)),_t&&(h.viewHooks||(h.viewHooks=[])).push(-b,_t),Ot&&((h.viewHooks||(h.viewHooks=[])).push(b,Ot),(h.viewCheckHooks||(h.viewCheckHooks=[])).push(b,Ot)),null!=Wt&&(h.destroyHooks||(h.destroyHooks=[])).push(b,Wt)}}function gs(h,d,b){gl(h,d,3,b)}function Qo(h,d,b,C){(3&h[2])===b&&gl(h,d,b,C)}function Ws(h,d){let b=h[2];(3&b)===d&&(b&=2047,b+=1,h[2]=b)}function gl(h,d,b,C){const x=null!=C?C:-1,Y=d.length-1;let et=0;for(let _t=void 0!==C?65535&h[18]:0;_t<Y;_t++)if("number"==typeof d[_t+1]){if(et=d[_t],null!=C&&et>=C)break}else d[_t]<0&&(h[18]+=65536),(et<x||-1==x)&&(qa(h,b,d,_t),h[18]=(4294901760&h[18])+_t+2),_t++}function qa(h,d,b,C){const I=b[C]<0,x=b[C+1],et=h[I?-b[C]:b[C]];if(I){if(h[2]>>11<h[18]>>16&&(3&h[2])===d){h[2]+=2048;try{x.call(et)}finally{}}}else try{x.call(et)}finally{}}class aa{constructor(d,b,C){this.factory=d,this.resolving=!1,this.canSeeViewProviders=b,this.injectImpl=C}}function Da(h,d,b){const C=$n(h);let I=0;for(;I<b.length;){const x=b[I];if("number"==typeof x){if(0!==x)break;I++;const Y=b[I++],et=b[I++],_t=b[I++];C?h.setAttribute(d,et,_t,Y):d.setAttributeNS(Y,et,_t)}else{const Y=x,et=b[++I];rs(Y)?C&&h.setProperty(d,Y,et):C?h.setAttribute(d,Y,et):d.setAttribute(Y,et),I++}}return I}function il(h){return 3===h||4===h||6===h}function rs(h){return 64===h.charCodeAt(0)}function Wa(h,d){if(null!==d&&0!==d.length)if(null===h||0===h.length)h=d.slice();else{let b=-1;for(let C=0;C<d.length;C++){const I=d[C];"number"==typeof I?b=I:0===b||ca(h,b,I,null,-1===b||2===b?d[++C]:null)}}return h}function ca(h,d,b,C,I){let x=0,Y=h.length;if(-1===d)Y=-1;else for(;x<h.length;){const et=h[x++];if("number"==typeof et){if(et===d){Y=-1;break}if(et>d){Y=x-1;break}}}for(;x<h.length;){const et=h[x];if("number"==typeof et)break;if(et===b){if(null===C)return void(null!==I&&(h[x+1]=I));if(C===h[x+1])return void(h[x+2]=I)}x++,null!==C&&x++,null!==I&&x++}-1!==Y&&(h.splice(Y,0,d),x=Y+1),h.splice(x++,0,b),null!==C&&h.splice(x++,0,C),null!==I&&h.splice(x++,0,I)}function Kr(h){return-1!==h}function Ia(h){return 32767&h}function ua(h,d){let b=function(h){return h>>16}(h),C=d;for(;b>0;)C=C[15],b--;return C}let _l=!0;function Ma(h){const d=_l;return _l=h,d}let q=0;function Ct(h,d){const b=Kt(h,d);if(-1!==b)return b;const C=d[1];C.firstCreatePass&&(h.injectorIndex=d.length,At(C.data,h),At(d,null),At(C.blueprint,null));const I=ve(h,d),x=h.injectorIndex;if(Kr(I)){const Y=Ia(I),et=ua(I,d),_t=et[1].data;for(let Ot=0;Ot<8;Ot++)d[x+Ot]=et[Y+Ot]|_t[Y+Ot]}return d[x+8]=I,x}function At(h,d){h.push(0,0,0,0,0,0,0,0,d)}function Kt(h,d){return-1===h.injectorIndex||h.parent&&h.parent.injectorIndex===h.injectorIndex||null===d[h.injectorIndex+8]?-1:h.injectorIndex}function ve(h,d){if(h.parent&&-1!==h.parent.injectorIndex)return h.parent.injectorIndex;let b=0,C=null,I=d;for(;null!==I;){const x=I[1],Y=x.type;if(C=2===Y?x.declTNode:1===Y?I[6]:null,null===C)return-1;if(b++,I=I[15],-1!==C.injectorIndex)return C.injectorIndex|b<<16}return-1}function xe(h,d,b){!function(h,d,b){let C;"string"==typeof b?C=b.charCodeAt(0)||0:b.hasOwnProperty(te)&&(C=b[te]),null==C&&(C=b[te]=q++);const I=255&C;d.data[h+(I>>5)]|=1<<I}(h,d,b)}function Zi(h,d,b){if(b&Ht.Optional)return h;at(d,"NodeInjector")}function Fn(h,d,b,C){if(b&Ht.Optional&&void 0===C&&(C=null),0==(b&(Ht.Self|Ht.Host))){const I=h[9],x=ue(void 0);try{return I?I.get(d,C,b&Ht.Optional):le(d,C,b&Ht.Optional)}finally{ue(x)}}return Zi(C,d,b)}function vn(h,d,b,C=Ht.Default,I){if(null!==h){const x=function(h){if("string"==typeof h)return h.charCodeAt(0)||0;const d=h.hasOwnProperty(te)?h[te]:void 0;return"number"==typeof d?d>=0?255&d:Eo:d}(b);if("function"==typeof x){if(!ns(d,h,C))return C&Ht.Host?Zi(I,b,C):Fn(d,b,C,I);try{const Y=x(C);if(null!=Y||C&Ht.Optional)return Y;at(b)}finally{ya()}}else if("number"==typeof x){let Y=null,et=Kt(h,d),_t=-1,Ot=C&Ht.Host?d[16][6]:null;for((-1===et||C&Ht.SkipSelf)&&(_t=-1===et?ve(h,d):d[et+8],-1!==_t&&As(C,!1)?(Y=d[1],et=Ia(_t),d=ua(_t,d)):et=-1);-1!==et;){const Wt=d[1];if(za(x,et,Wt.data)){const he=ja(et,d,b,Y,C,Ot);if(he!==ro)return he}_t=d[et+8],-1!==_t&&As(C,d[1].data[et+8]===Ot)&&za(x,et,d)?(Y=Wt,et=Ia(_t),d=ua(_t,d)):et=-1}}}return Fn(d,b,C,I)}const ro={};function Eo(){return new Sr(U(),Di())}function ja(h,d,b,C,I,x){const Y=d[1],et=Y.data[h+8],Wt=Ms(et,Y,b,null==C?es(et)&&_l:C!=Y&&0!=(3&et.type),I&Ht.Host&&x===et);return null!==Wt?Dr(d,Y,Wt,et):ro}function Ms(h,d,b,C,I){const x=h.providerIndexes,Y=d.data,et=1048575&x,_t=h.directiveStart,Wt=x>>20,Le=I?et+Wt:h.directiveEnd;for(let ii=C?et:et+Wt;ii<Le;ii++){const wi=Y[ii];if(ii<_t&&b===wi||ii>=_t&&wi.type===b)return ii}if(I){const ii=Y[_t];if(ii&&ho(ii)&&ii.type===b)return _t}return null}function Dr(h,d,b,C){let I=h[b];const x=d.data;if(function(h){return h instanceof aa}(I)){const Y=I;Y.resolving&&function(h,d){throw new Z("200",`Circular dependency in DI detected for ${h}`)}(wt(x[b]));const et=Ma(Y.canSeeViewProviders);Y.resolving=!0;const _t=Y.injectImpl?ue(Y.injectImpl):null;ns(h,C,Ht.Default);try{I=h[b]=Y.factory(void 0,x,h,C),d.firstCreatePass&&b>=C.directiveStart&&function(h,d,b){const{ngOnChanges:C,ngOnInit:I,ngDoCheck:x}=d.type.prototype;if(C){const Y=yr(d);(b.preOrderHooks||(b.preOrderHooks=[])).push(h,Y),(b.preOrderCheckHooks||(b.preOrderCheckHooks=[])).push(h,Y)}I&&(b.preOrderHooks||(b.preOrderHooks=[])).push(0-h,I),x&&((b.preOrderHooks||(b.preOrderHooks=[])).push(h,x),(b.preOrderCheckHooks||(b.preOrderCheckHooks=[])).push(h,x))}(b,x[b],d)}finally{null!==_t&&ue(_t),Ma(et),Y.resolving=!1,ya()}}return I}function za(h,d,b){return!!(b[d+(h>>5)]&1<<h)}function As(h,d){return!(h&Ht.Self||h&Ht.Host&&d)}class Sr{constructor(d,b){this._tNode=d,this._lView=b}get(d,b,C){return vn(this._tNode,this._lView,d,C,b)}}function nl(h){return Nt(()=>{const d=h.prototype.constructor,b=d[Jt]||ha(d),C=Object.prototype;let I=Object.getPrototypeOf(h.prototype).constructor;for(;I&&I!==C;){const x=I[Jt]||ha(I);if(x&&x!==b)return x;I=Object.getPrototypeOf(I)}return x=>new x})}function ha(h){return V(h)?()=>{const d=ha(H(h));return d&&d()}:ir(h)}function Wl(h){return function(h,d){if("class"===d)return h.classes;if("style"===d)return h.styles;const b=h.attrs;if(b){const C=b.length;let I=0;for(;I<C;){const x=b[I];if(il(x))break;if(0===x)I+=2;else if("number"==typeof x)for(I++;I<C&&"string"==typeof b[I];)I++;else{if(x===d)return b[I+1];I+=2}}}return null}(U(),h)}const Ea="__parameters__";function as(h,d,b){return Nt(()=>{const C=function(h){return function(...b){if(h){const C=h(...b);for(const I in C)this[I]=C[I]}}}(d);function I(...x){if(this instanceof I)return C.apply(this,x),this;const Y=new I(...x);return et.annotation=Y,et;function et(_t,Ot,Wt){const he=_t.hasOwnProperty(Ea)?_t[Ea]:Object.defineProperty(_t,Ea,{value:[]})[Ea];for(;he.length<=Wt;)he.push(null);return(he[Wt]=he[Wt]||[]).push(Y),_t}}return b&&(I.prototype=Object.create(b.prototype)),I.prototype.ngMetadataName=h,I.annotationCls=I,I})}class Mo{constructor(d,b){this._desc=d,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof b?this.__NG_ELEMENT_ID__=b:void 0!==b&&(this.\u0275prov=pe({token:this,providedIn:b.providedIn||"root",factory:b.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Wc=new Mo("AnalyzeForEntryComponents");function ms(h,d){void 0===d&&(d=h);for(let b=0;b<h.length;b++){let C=h[b];Array.isArray(C)?(d===h&&(d=h.slice(0,b)),ms(C,d)):d!==h&&d.push(C)}return d}function zs(h,d){h.forEach(b=>Array.isArray(b)?zs(b,d):d(b))}function zl(h,d,b){d>=h.length?h.push(b):h.splice(d,0,b)}function Ys(h,d){return d>=h.length-1?h.pop():h.splice(d,1)[0]}function Yl(h,d){const b=[];for(let C=0;C<h;C++)b.push(d);return b}function Ir(h,d,b){let C=al(h,d);return C>=0?h[1|C]=b:(C=~C,function(h,d,b,C){let I=h.length;if(I==d)h.push(b,C);else if(1===I)h.push(C,h[0]),h[0]=b;else{for(I--,h.push(h[I-1],h[I]);I>d;)h[I]=h[I-2],I--;h[d]=b,h[d+1]=C}}(h,C,d,b)),C}function sl(h,d){const b=al(h,d);if(b>=0)return h[1|b]}function al(h,d){return function(h,d,b){let C=0,I=h.length>>b;for(;I!==C;){const x=C+(I-C>>1),Y=h[x<<b];if(d===Y)return x<<b;Y>d?I=x:C=x+1}return~(I<<b)}(h,d,1)}const ka={},Jl="__NG_DI_FLAG__",Yo="ngTempTokenPath",Ya=/\n/gm,Ta="__source",xs=o({provide:String,useValue:o});let ks;function Ec(h){const d=ks;return ks=h,d}function bl(h,d=Ht.Default){if(void 0===ks)throw new Error("inject() must be called from an injection context");return null===ks?le(h,void 0,d):ks.get(h,d&Ht.Optional?null:void 0,d)}function gr(h,d=Ht.Default){return(Zt||bl)(H(h),d)}const _s=gr;function ll(h){const d=[];for(let b=0;b<h.length;b++){const C=H(h[b]);if(Array.isArray(C)){if(0===C.length)throw new Error("Arguments array must have arguments.");let I,x=Ht.Default;for(let Y=0;Y<C.length;Y++){const et=C[Y],_t=ah(et);"number"==typeof _t?-1===_t?I=et.token:x|=_t:I=et}d.push(gr(I,x))}else d.push(gr(C))}return d}function El(h,d){return h[Jl]=d,h.prototype[Jl]=d,h}function ah(h){return h[Jl]}const ea=El(as("Inject",h=>({token:h})),-1),Ca=El(as("Optional"),8),La=El(as("SkipSelf"),4);let ul;function ia(h){var d;return(null===(d=function(){if(void 0===ul&&(ul=null,yi.trustedTypes))try{ul=yi.trustedTypes.createPolicy("angular",{createHTML:h=>h,createScript:h=>h,createScriptURL:h=>h})}catch(h){}return ul}())||void 0===d?void 0:d.createHTML(h))||h}class Pa{constructor(d){this.changingThisBreaksApplicationSecurity=d}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class xu extends Pa{getTypeName(){return"HTML"}}class Rl extends Pa{getTypeName(){return"Style"}}class Ql extends Pa{getTypeName(){return"Script"}}class pt extends Pa{getTypeName(){return"URL"}}class Tt extends Pa{getTypeName(){return"ResourceURL"}}function Ft(h){return h instanceof Pa?h.changingThisBreaksApplicationSecurity:h}function ne(h,d){const b=_e(h);if(null!=b&&b!==d){if("ResourceURL"===b&&"URL"===d)return!0;throw new Error(`Required a safe ${d}, got a ${b} (see https://g.co/ng/security#xss)`)}return b===d}function _e(h){return h instanceof Pa&&h.getTypeName()||null}function We(h){return new xu(h)}function Se(h){return new Rl(h)}function He(h){return new Ql(h)}function hi(h){return new pt(h)}function gi(h){return new Tt(h)}class yn{constructor(d){this.inertDocumentHelper=d}getInertBodyElement(d){d="<body><remove></remove>"+d;try{const b=(new window.DOMParser).parseFromString(ia(d),"text/html").body;return null===b?this.inertDocumentHelper.getInertBodyElement(d):(b.removeChild(b.firstChild),b)}catch(b){return null}}}class rn{constructor(d){if(this.defaultDoc=d,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const b=this.inertDocument.createElement("html");this.inertDocument.appendChild(b);const C=this.inertDocument.createElement("body");b.appendChild(C)}}getInertBodyElement(d){const b=this.inertDocument.createElement("template");if("content"in b)return b.innerHTML=ia(d),b;const C=this.inertDocument.createElement("body");return C.innerHTML=ia(d),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(C),C}stripCustomNsAttrs(d){const b=d.attributes;for(let I=b.length-1;0<I;I--){const Y=b.item(I).name;("xmlns:ns1"===Y||0===Y.indexOf("ns1:"))&&d.removeAttribute(Y)}let C=d.firstChild;for(;C;)C.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(C),C=C.nextSibling}}const Xo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,fo=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Co(h){return(h=String(h)).match(Xo)||h.match(fo)?h:"unsafe:"+h}function So(h){const d={};for(const b of h.split(","))d[b]=!0;return d}function cs(...h){const d={};for(const b of h)for(const C in b)b.hasOwnProperty(C)&&(d[C]=!0);return d}const Br=So("area,br,col,hr,img,wbr"),Zr=So("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ka=So("rp,rt"),ql=cs(Br,cs(Zr,So("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),cs(Ka,So("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),cs(Ka,Zr)),Lu=So("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Nu=So("srcset"),Pu=cs(Lu,Nu,So("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),So("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Fd=So("script,style,template");class dh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(d){let b=d.firstChild,C=!0;for(;b;)if(b.nodeType===Node.ELEMENT_NODE?C=this.startElement(b):b.nodeType===Node.TEXT_NODE?this.chars(b.nodeValue):this.sanitizedSomething=!0,C&&b.firstChild)b=b.firstChild;else for(;b;){b.nodeType===Node.ELEMENT_NODE&&this.endElement(b);let I=this.checkClobberedElement(b,b.nextSibling);if(I){b=I;break}b=this.checkClobberedElement(b,b.parentNode)}return this.buf.join("")}startElement(d){const b=d.nodeName.toLowerCase();if(!ql.hasOwnProperty(b))return this.sanitizedSomething=!0,!Fd.hasOwnProperty(b);this.buf.push("<"),this.buf.push(b);const C=d.attributes;for(let I=0;I<C.length;I++){const x=C.item(I),Y=x.name,et=Y.toLowerCase();if(!Pu.hasOwnProperty(et)){this.sanitizedSomething=!0;continue}let _t=x.value;Lu[et]&&(_t=Co(_t)),Nu[et]&&(h=_t,_t=(h=String(h)).split(",").map(d=>Co(d.trim())).join(", ")),this.buf.push(" ",Y,'="',Fu(_t),'"')}var h;return this.buf.push(">"),!0}endElement(d){const b=d.nodeName.toLowerCase();ql.hasOwnProperty(b)&&!Br.hasOwnProperty(b)&&(this.buf.push("</"),this.buf.push(b),this.buf.push(">"))}chars(d){this.buf.push(Fu(d))}checkClobberedElement(d,b){if(b&&(d.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${d.outerHTML}`);return b}}const ph=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fh=/([^\#-~ |!])/g;function Fu(h){return h.replace(/&/g,"&amp;").replace(ph,function(d){return"&#"+(1024*(d.charCodeAt(0)-55296)+(d.charCodeAt(1)-56320)+65536)+";"}).replace(fh,function(d){return"&#"+d.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let tc;function Rc(h,d){let b=null;try{tc=tc||function(h){const d=new rn(h);return function(){try{return!!(new window.DOMParser).parseFromString(ia(""),"text/html")}catch(h){return!1}}()?new yn(d):d}(h);let C=d?String(d):"";b=tc.getInertBodyElement(C);let I=5,x=C;do{if(0===I)throw new Error("Failed to sanitize html because the input is unstable");I--,C=x,x=b.innerHTML,b=tc.getInertBodyElement(C)}while(C!==x);return ia((new dh).sanitizeChildren(Bu(b)||b))}finally{if(b){const C=Bu(b)||b;for(;C.firstChild;)C.removeChild(C.firstChild)}}}function Bu(h){return"content"in h&&function(h){return h.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===h.nodeName}(h)?h.content:null}var ur=(()=>((ur=ur||{})[ur.NONE=0]="NONE",ur[ur.HTML=1]="HTML",ur[ur.STYLE=2]="STYLE",ur[ur.SCRIPT=3]="SCRIPT",ur[ur.URL=4]="URL",ur[ur.RESOURCE_URL=5]="RESOURCE_URL",ur))();function gh(h){const d=function(){const h=Di();return h&&h[12]}();return d?d.sanitize(ur.URL,h)||"":ne(h,"URL")?Ft(h):Co(ot(h))}const Jh="__ngContext__";function bs(h,d){h[Jh]=d}function eu(h){const d=function(h){return h[Jh]||null}(h);return d?Array.isArray(d)?d:d.lView:null}function Wu(h){return h.ngOriginalError}function nu(h,...d){h.error(...d)}class ou{constructor(){this._console=console}handleError(d){const b=this._findOriginalError(d),C=(h=d)&&h.ngErrorLogger||nu;var h;C(this._console,"ERROR",d),b&&C(this._console,"ORIGINAL ERROR",b)}_findOriginalError(d){let b=d&&Wu(d);for(;b&&Wu(b);)b=Wu(b);return b||null}}const nd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(yi))();function pa(h){return h instanceof Function?h():h}var $a=(()=>(($a=$a||{})[$a.Important=1]="Important",$a[$a.DashCase=2]="DashCase",$a))();function yh(h,d){return undefined(h,d)}function Il(h){const d=h[3];return pr(d)?d[3]:d}function Ml(h){return Yu(h[13])}function au(h){return Yu(h[4])}function Yu(h){for(;null!==h&&!pr(h);)h=h[4];return h}function Al(h,d,b,C,I){if(null!=C){let x,Y=!1;pr(C)?x=C:ao(C)&&(Y=!0,C=C[0]);const et=Et(C);0===h&&null!==b?null==I?kt(d,b,et):xt(d,b,et,I||null,!0):1===h&&null!==b?xt(d,b,et,I||null,!0):2===h?function(h,d,b){const C=ce(h,d);C&&function(h,d,b,C){$n(h)?h.removeChild(d,b,C):d.removeChild(b)}(h,C,d,b)}(d,et,Y):3===h&&d.destroyNode(et),null!=x&&function(h,d,b,C,I){const x=b[7];x!==Et(b)&&Al(d,h,C,x,I);for(let et=10;et<b.length;et++){const _t=b[et];wo(_t[1],_t,h,d,C,x)}}(d,h,x,b,I)}}function lu(h,d,b){return $n(h)?h.createElement(d,b):null===b?h.createElement(d):h.createElementNS(b,d)}function rr(h,d){const b=h[9],C=b.indexOf(d),I=d[3];1024&d[2]&&(d[2]&=-1025,Io(I,-1)),b.splice(C,1)}function Oc(h,d){if(h.length<=10)return;const b=10+d,C=h[b];if(C){const I=C[17];null!==I&&I!==h&&rr(I,C),d>0&&(h[b-1][4]=C[4]);const x=Ys(h,10+d);!function(h,d){wo(h,d,d[11],2,null,null),d[0]=null,d[6]=null}(C[1],C);const Y=x[19];null!==Y&&Y.detachView(x[1]),C[3]=null,C[4]=null,C[2]&=-129}return C}function wh(h,d){if(!(256&d[2])){const b=d[11];$n(b)&&b.destroyNode&&wo(h,d,b,3,null,null),function(h){let d=h[13];if(!d)return T(h[1],h);for(;d;){let b=null;if(ao(d))b=d[13];else{const C=d[10];C&&(b=C)}if(!b){for(;d&&!d[4]&&d!==h;)ao(d)&&T(d[1],d),d=d[3];null===d&&(d=h),ao(d)&&T(d[1],d),b=d&&d[4]}d=b}}(d)}}function T(h,d){if(!(256&d[2])){d[2]&=-129,d[2]|=256,function(h,d){let b;if(null!=h&&null!=(b=h.destroyHooks))for(let C=0;C<b.length;C+=2){const I=d[b[C]];if(!(I instanceof aa)){const x=b[C+1];if(Array.isArray(x))for(let Y=0;Y<x.length;Y+=2){const et=I[x[Y]],_t=x[Y+1];try{_t.call(et)}finally{}}else try{x.call(I)}finally{}}}}(h,d),function(h,d){const b=h.cleanup,C=d[7];let I=-1;if(null!==b)for(let x=0;x<b.length-1;x+=2)if("string"==typeof b[x]){const Y=b[x+1],et="function"==typeof Y?Y(d):Et(d[Y]),_t=C[I=b[x+2]],Ot=b[x+3];"boolean"==typeof Ot?et.removeEventListener(b[x],_t,Ot):Ot>=0?C[I=Ot]():C[I=-Ot].unsubscribe(),x+=2}else{const Y=C[I=b[x+1]];b[x].call(Y)}if(null!==C){for(let x=I+1;x<C.length;x++)C[x]();d[7]=null}}(h,d),1===d[1].type&&$n(d[11])&&d[11].destroy();const b=d[17];if(null!==b&&pr(d[3])){b!==d[3]&&rr(b,d);const C=d[19];null!==C&&C.detachView(h)}}}function Q(h,d,b){return function(h,d,b){let C=d;for(;null!==C&&40&C.type;)C=(d=C).parent;if(null===C)return b[0];if(2&C.flags){const I=h.data[C.directiveStart].encapsulation;if(I===ri.None||I===ri.Emulated)return null}return St(C,b)}(h,d.parent,b)}function xt(h,d,b,C,I){$n(h)?h.insertBefore(d,b,C,I):d.insertBefore(b,C,I)}function kt(h,d,b){$n(h)?h.appendChild(d,b):d.appendChild(b)}function jt(h,d,b,C,I){null!==C?xt(h,d,b,C,I):kt(h,d,b)}function ce(h,d){return $n(h)?h.parentNode(d):d.parentNode}function Ue(h,d,b){return ci(h,d,b)}let ci=function(h,d,b){return 40&h.type?St(h,b):null};function Oi(h,d,b,C){const I=Q(h,C,d),x=d[11],et=Ue(C.parent||d[6],C,d);if(null!=I)if(Array.isArray(b))for(let _t=0;_t<b.length;_t++)jt(x,I,b[_t],et,!1);else jt(x,I,b,et,!1)}function Ki(h,d){if(null!==d){const b=d.type;if(3&b)return St(d,h);if(4&b)return Dn(-1,h[d.index]);if(8&b){const C=d.child;if(null!==C)return Ki(h,C);{const I=h[d.index];return pr(I)?Dn(-1,I):Et(I)}}if(32&b)return yh(d,h)()||Et(h[d.index]);{const C=zt(h,d);return null!==C?Array.isArray(C)?C[0]:Ki(Il(h[16]),C):Ki(h,d.next)}}return null}function zt(h,d){return null!==d?h[16][6].projection[d.projection]:null}function Dn(h,d){const b=10+h+1;if(b<d.length){const C=d[b],I=C[1].firstChild;if(null!==I)return Ki(C,I)}return d[7]}function wn(h,d,b,C,I,x,Y){for(;null!=b;){const et=C[b.index],_t=b.type;if(Y&&0===d&&(et&&bs(Et(et),C),b.flags|=4),64!=(64&b.flags))if(8&_t)wn(h,d,b.child,C,I,x,!1),Al(d,h,I,et,x);else if(32&_t){const Ot=yh(b,C);let Wt;for(;Wt=Ot();)Al(d,h,I,Wt,x);Al(d,h,I,et,x)}else 16&_t?ys(h,d,C,b,I,x):Al(d,h,I,et,x);b=Y?b.projectionNext:b.next}}function wo(h,d,b,C,I,x){wn(b,C,h.firstChild,d,I,x,!1)}function ys(h,d,b,C,I,x){const Y=b[16],_t=Y[6].projection[C.projection];if(Array.isArray(_t))for(let Ot=0;Ot<_t.length;Ot++)Al(d,h,I,_t[Ot],x);else wn(h,d,_t,Y[3],I,x,!0)}function Vr(h,d,b){$n(h)?h.setAttribute(d,"style",b):d.style.cssText=b}function io(h,d,b){$n(h)?""===b?h.removeAttribute(d,"class"):h.setAttribute(d,"class",b):d.className=b}function wr(h,d,b){let C=h.length;for(;;){const I=h.indexOf(d,b);if(-1===I)return I;if(0===I||h.charCodeAt(I-1)<=32){const x=d.length;if(I+x===C||h.charCodeAt(I+x)<=32)return I}b=I+1}}const dl="ng-template";function Za(h,d,b){let C=0;for(;C<h.length;){let I=h[C++];if(b&&"class"===I){if(I=h[C],-1!==wr(I.toLowerCase(),d,0))return!0}else if(1===I){for(;C<h.length&&"string"==typeof(I=h[C++]);)if(I.toLowerCase()===d)return!0;return!1}}return!1}function xc(h){return 4===h.type&&h.value!==dl}function cu(h,d,b){return d===(4!==h.type||b?h.value:dl)}function ud(h,d,b){let C=4;const I=h.attrs||[],x=function(h){for(let d=0;d<h.length;d++)if(il(h[d]))return d;return h.length}(I);let Y=!1;for(let et=0;et<d.length;et++){const _t=d[et];if("number"!=typeof _t){if(!Y)if(4&C){if(C=2|1&C,""!==_t&&!cu(h,_t,b)||""===_t&&1===d.length){if(na(C))return!1;Y=!0}}else{const Ot=8&C?_t:d[++et];if(8&C&&null!==h.attrs){if(!Za(h.attrs,Ot,b)){if(na(C))return!1;Y=!0}continue}const he=uu(8&C?"class":_t,I,xc(h),b);if(-1===he){if(na(C))return!1;Y=!0;continue}if(""!==Ot){let Le;Le=he>x?"":I[he+1].toLowerCase();const ii=8&C?Le:null;if(ii&&-1!==wr(ii,Ot,0)||2&C&&Ot!==Le){if(na(C))return!1;Y=!0}}}}else{if(!Y&&!na(C)&&!na(_t))return!1;if(Y&&na(_t))continue;Y=!1,C=_t|1&C}}return na(C)||Y}function na(h){return 0==(1&h)}function uu(h,d,b,C){if(null===d)return-1;let I=0;if(C||!b){let x=!1;for(;I<d.length;){const Y=d[I];if(Y===h)return I;if(3===Y||6===Y)x=!0;else{if(1===Y||2===Y){let et=d[++I];for(;"string"==typeof et;)et=d[++I];continue}if(4===Y)break;if(0===Y){I+=4;continue}}I+=x?1:2}return-1}return function(h,d){let b=h.indexOf(4);if(b>-1)for(b++;b<h.length;){const C=h[b];if("number"==typeof C)return-1;if(C===d)return b;b++}return-1}(d,h)}function hd(h,d,b=!1){for(let C=0;C<d.length;C++)if(ud(h,d[C],b))return!0;return!1}function fa(h,d){t:for(let b=0;b<d.length;b++){const C=d[b];if(h.length===C.length){for(let I=0;I<h.length;I++)if(h[I]!==C[I])continue t;return!0}}return!1}function Jd(h,d){return h?":not("+d.trim()+")":d}function Up(h){let d=h[0],b=1,C=2,I="",x=!1;for(;b<h.length;){let Y=h[b];if("string"==typeof Y)if(2&C){const et=h[++b];I+="["+Y+(et.length>0?'="'+et+'"':"")+"]"}else 8&C?I+="."+Y:4&C&&(I+=" "+Y);else""!==I&&!na(Y)&&(d+=Jd(x,I),I=""),C=Y,x=x||!na(C);b++}return""!==I&&(d+=Jd(x,I)),d}const Hn={};function pd(h){fd(Zn(),Di(),nn()+h,Ei())}function fd(h,d,b,C){if(!C)if(3==(3&d[2])){const x=h.preOrderCheckHooks;null!==x&&gs(d,x,b)}else{const x=h.preOrderHooks;null!==x&&Qo(d,x,0,b)}An(b)}function Rh(h,d){return h<<17|d<<2}function Ha(h){return h>>17&32767}function gd(h){return 2|h}function Ol(h){return(131068&h)>>2}function md(h,d){return-131069&h|d<<2}function _d(h){return 1|h}function tf(h,d){const b=h.contentQueries;if(null!==b)for(let C=0;C<b.length;C+=2){const I=b[C],x=b[C+1];if(-1!==x){const Y=h.data[x];jo(I),Y.contentQueries(2,d[x],x)}}}function xl(h,d,b,C,I,x,Y,et,_t,Ot){const Wt=d.blueprint.slice();return Wt[0]=I,Wt[2]=140|C,lo(Wt),Wt[3]=Wt[15]=h,Wt[8]=b,Wt[10]=Y||h&&h[10],Wt[11]=et||h&&h[11],Wt[12]=_t||h&&h[12]||null,Wt[9]=Ot||h&&h[9]||null,Wt[6]=x,Wt[16]=2==d.type?h[16]:Wt,Wt}function Nc(h,d,b,C,I){let x=h.data[d];if(null===x)x=function(h,d,b,C,I){const x=X(),Y=$t(),_t=h.data[d]=function(h,d,b,C,I,x){return{type:b,index:C,insertBeforeIndex:null,injectorIndex:d?d.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:I,attrs:x,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:d,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,Y?x:x&&x.parent,b,d,C,I);return null===h.firstChild&&(h.firstChild=_t),null!==x&&(Y?null==x.child&&null!==_t.parent&&(x.child=_t):null===x.next&&(x.next=_t)),_t}(h,d,b,C,I),fn.lFrame.inI18n&&(x.flags|=64);else if(64&x.type){x.type=b,x.value=C,x.attrs=I;const Y=function(){const h=fn.lFrame,d=h.currentTNode;return h.isParent?d:d.parent}();x.injectorIndex=null===Y?-1:Y.injectorIndex}return Pt(x,!0),x}function kl(h,d,b,C){if(0===b)return-1;const I=d.length;for(let x=0;x<b;x++)d.push(C),h.blueprint.push(C),h.data.push(null);return I}function Pc(h,d,b){Yr(d);try{const C=h.viewQuery;null!==C&&Dd(1,C,b);const I=h.template;null!==I&&rp(h,d,I,1,b),h.firstCreatePass&&(h.firstCreatePass=!1),h.staticContentQueries&&tf(h,d),h.staticViewQueries&&Dd(2,h.viewQuery,b);const x=h.components;null!==x&&function(h,d){for(let b=0;b<d.length;b++)Ph(h,d[b])}(d,x)}catch(C){throw h.firstCreatePass&&(h.incompleteFirstPass=!0,h.firstCreatePass=!1),C}finally{d[2]&=-5,Gs()}}function hu(h,d,b,C){const I=d[2];if(256==(256&I))return;Yr(d);const x=Ei();try{lo(d),function(h){fn.lFrame.bindingIndex=h}(h.bindingStartIndex),null!==b&&rp(h,d,b,2,C);const Y=3==(3&I);if(!x)if(Y){const Ot=h.preOrderCheckHooks;null!==Ot&&gs(d,Ot,null)}else{const Ot=h.preOrderHooks;null!==Ot&&Qo(d,Ot,0,null),Ws(d,0)}if(function(h){for(let d=Ml(h);null!==d;d=au(d)){if(!d[2])continue;const b=d[9];for(let C=0;C<b.length;C++){const I=b[C],x=I[3];0==(1024&I[2])&&Io(x,1),I[2]|=1024}}}(d),function(h){for(let d=Ml(h);null!==d;d=au(d))for(let b=10;b<d.length;b++){const C=d[b],I=C[1];to(C)&&hu(I,C,I.template,C[8])}}(d),null!==h.contentQueries&&tf(h,d),!x)if(Y){const Ot=h.contentCheckHooks;null!==Ot&&gs(d,Ot)}else{const Ot=h.contentHooks;null!==Ot&&Qo(d,Ot,1),Ws(d,1)}!function(h,d){const b=h.hostBindingOpCodes;if(null!==b)try{for(let C=0;C<b.length;C++){const I=b[C];if(I<0)An(~I);else{const x=I,Y=b[++C],et=b[++C];po(Y,x),et(2,d[x])}}}finally{An(-1)}}(h,d);const et=h.components;null!==et&&function(h,d){for(let b=0;b<d.length;b++)wd(h,d[b])}(d,et);const _t=h.viewQuery;if(null!==_t&&Dd(2,_t,C),!x)if(Y){const Ot=h.viewCheckHooks;null!==Ot&&gs(d,Ot)}else{const Ot=h.viewHooks;null!==Ot&&Qo(d,Ot,2),Ws(d,2)}!0===h.firstUpdatePass&&(h.firstUpdatePass=!1),x||(d[2]&=-73),1024&d[2]&&(d[2]&=-1025,Io(d[3],-1))}finally{Gs()}}function nf(h,d,b,C){const I=d[10],x=!Ei(),Y=Yn(d);try{x&&!Y&&I.begin&&I.begin(),Y&&Pc(h,d,C),hu(h,d,b,C)}finally{x&&!Y&&I.end&&I.end()}}function rp(h,d,b,C,I){const x=nn(),Y=2&C;try{An(-1),Y&&d.length>20&&fd(h,d,20,Ei()),b(C,I)}finally{An(x)}}function sp(h,d,b){if(En(d)){const I=d.directiveEnd;for(let x=d.directiveStart;x<I;x++){const Y=h.data[x];Y.contentQueries&&Y.contentQueries(1,b[x],x)}}}function Qu(h,d,b){!Er()||(function(h,d,b,C){const I=b.directiveStart,x=b.directiveEnd;h.firstCreatePass||Ct(b,d),bs(C,d);const Y=b.initialInputs;for(let et=I;et<x;et++){const _t=h.data[et],Ot=ho(_t);Ot&&Kf(d,b,_t);const Wt=Dr(d,h,et,b);bs(Wt,d),null!==Y&&af(0,et-I,Wt,_t,0,Y),Ot&&(cn(b.index,d)[8]=Wt)}}(h,d,b,St(b,d)),128==(128&b.flags)&&function(h,d,b){const C=b.directiveStart,I=b.directiveEnd,Y=b.index,et=fn.lFrame.currentDirectiveIndex;try{An(Y);for(let _t=C;_t<I;_t++){const Ot=h.data[_t],Wt=d[_t];Wo(_t),(null!==Ot.hostBindings||0!==Ot.hostVars||null!==Ot.hostAttrs)&&kh(Ot,Wt)}}finally{An(-1),Wo(et)}}(h,d,b))}function sc(h,d,b=St){const C=d.localNames;if(null!==C){let I=d.index+1;for(let x=0;x<C.length;x+=2){const Y=C[x+1],et=-1===Y?b(d,h):h[Y];h[I++]=et}}}function ap(h){const d=h.tView;return null===d||d.incompleteFirstPass?h.tView=Ll(1,null,h.template,h.decls,h.vars,h.directiveDefs,h.pipeDefs,h.viewQuery,h.schemas,h.consts):d}function Ll(h,d,b,C,I,x,Y,et,_t,Ot){const Wt=20+C,he=Wt+I,Le=function(h,d){const b=[];for(let C=0;C<d;C++)b.push(C<h?null:Hn);return b}(Wt,he),ii="function"==typeof Ot?Ot():Ot;return Le[1]={type:h,blueprint:Le,template:b,queries:null,viewQuery:et,declTNode:d,data:Le.slice().fill(null,Wt),bindingStartIndex:Wt,expandoStartIndex:he,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof x?x():x,pipeRegistry:"function"==typeof Y?Y():Y,firstChild:null,schemas:_t,consts:ii,incompleteFirstPass:!1}}function pl(h,d,b,C){const I=Id(d);null===b?I.push(C):(I.push(b),h.firstCreatePass&&vp(h).push(C,I.length-1))}function Oh(h,d,b){for(let C in h)if(h.hasOwnProperty(C)){const I=h[C];(b=null===b?{}:b).hasOwnProperty(C)?b[C].push(d,I):b[C]=[d,I]}return b}function ga(h,d,b,C,I,x,Y,et){const _t=St(d,b);let Wt,Ot=d.inputs;!et&&null!=Ot&&(Wt=Ot[C])?(bp(h,b,Wt,C,I),es(d)&&function(h,d){const b=cn(d,h);16&b[2]||(b[2]|=64)}(b,d.index)):3&d.type&&(C=function(h){return"class"===h?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h}(C),I=null!=Y?Y(I,d.value||"",C):I,$n(x)?x.setProperty(_t,C,I):rs(C)||(_t.setProperty?_t.setProperty(C,I):_t[C]=I))}function pu(h,d,b,C){let I=!1;if(Er()){const x=function(h,d,b){const C=h.directiveRegistry;let I=null;if(C)for(let x=0;x<C.length;x++){const Y=C[x];hd(b,Y.selectors,!1)&&(I||(I=[]),xe(Ct(b,d),h,Y.type),ho(Y)?(Lh(h,b),I.unshift(Y)):I.push(Y))}return I}(h,d,b),Y=null===C?null:{"":-1};if(null!==x){I=!0,pp(b,h.data.length,x.length);for(let Wt=0;Wt<x.length;Wt++){const he=x[Wt];he.providersResolver&&he.providersResolver(he)}let et=!1,_t=!1,Ot=kl(h,d,x.length,null);for(let Wt=0;Wt<x.length;Wt++){const he=x[Wt];b.mergedAttrs=Wa(b.mergedAttrs,he.hostAttrs),sf(h,b,d,Ot,he),dp(Ot,he,Y),null!==he.contentQueries&&(b.flags|=8),(null!==he.hostBindings||null!==he.hostAttrs||0!==he.hostVars)&&(b.flags|=128);const Le=he.type.prototype;!et&&(Le.ngOnChanges||Le.ngOnInit||Le.ngDoCheck)&&((h.preOrderHooks||(h.preOrderHooks=[])).push(b.index),et=!0),!_t&&(Le.ngOnChanges||Le.ngDoCheck)&&((h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(b.index),_t=!0),Ot++}!function(h,d){const C=d.directiveEnd,I=h.data,x=d.attrs,Y=[];let et=null,_t=null;for(let Ot=d.directiveStart;Ot<C;Ot++){const Wt=I[Ot],he=Wt.inputs,Le=null===x||xc(d)?null:Jf(he,x);Y.push(Le),et=Oh(he,Ot,et),_t=Oh(Wt.outputs,Ot,_t)}null!==et&&(et.hasOwnProperty("class")&&(d.flags|=16),et.hasOwnProperty("style")&&(d.flags|=32)),d.initialInputs=Y,d.inputs=et,d.outputs=_t}(h,b)}Y&&function(h,d,b){if(d){const C=h.localNames=[];for(let I=0;I<d.length;I+=2){const x=b[d[I+1]];if(null==x)throw new Z("301",`Export of name '${d[I+1]}' not found!`);C.push(d[I],x)}}}(b,C,Y)}return b.mergedAttrs=Wa(b.mergedAttrs,b.attrs),I}function hp(h,d,b,C,I,x){const Y=x.hostBindings;if(Y){let et=h.hostBindingOpCodes;null===et&&(et=h.hostBindingOpCodes=[]);const _t=~d.index;(function(h){let d=h.length;for(;d>0;){const b=h[--d];if("number"==typeof b&&b<0)return b}return 0})(et)!=_t&&et.push(_t),et.push(C,I,Y)}}function kh(h,d){null!==h.hostBindings&&h.hostBindings(1,d)}function Lh(h,d){d.flags|=2,(h.components||(h.components=[])).push(d.index)}function dp(h,d,b){if(b){if(d.exportAs)for(let C=0;C<d.exportAs.length;C++)b[d.exportAs[C]]=h;ho(d)&&(b[""]=h)}}function pp(h,d,b){h.flags|=1,h.directiveStart=d,h.directiveEnd=d+b,h.providerIndexes=d}function sf(h,d,b,C,I){h.data[C]=I;const x=I.factory||(I.factory=ir(I.type)),Y=new aa(x,ho(I),null);h.blueprint[C]=Y,b[C]=Y,hp(h,d,0,C,kl(h,b,I.hostVars,Hn),I)}function Kf(h,d,b){const C=St(d,h),I=ap(b),x=h[10],Y=Pl(h,xl(h,I,null,b.onPush?64:16,C,d,x,x.createRenderer(C,b),null,null));h[d.index]=Y}function Va(h,d,b,C,I,x){const Y=St(h,d);!function(h,d,b,C,I,x,Y){if(null==x)$n(h)?h.removeAttribute(d,I,b):d.removeAttribute(I);else{const et=null==Y?ot(x):Y(x,C||"",I);$n(h)?h.setAttribute(d,I,et,b):b?d.setAttributeNS(b,I,et):d.setAttribute(I,et)}}(d[11],Y,x,h.value,b,C,I)}function af(h,d,b,C,I,x){const Y=x[d];if(null!==Y){const et=C.setInput;for(let _t=0;_t<Y.length;){const Ot=Y[_t++],Wt=Y[_t++],he=Y[_t++];null!==et?C.setInput(b,he,Ot,Wt):b[Wt]=he}}}function Jf(h,d){let b=null,C=0;for(;C<d.length;){const I=d[C];if(0!==I)if(5!==I){if("number"==typeof I)break;h.hasOwnProperty(I)&&(null===b&&(b=[]),b.push(I,h[I],d[C+1])),C+=2}else C+=2;else C+=4}return b}function lf(h,d,b,C){return new Array(h,!0,!1,d,null,0,C,b,null,null)}function wd(h,d){const b=cn(d,h);if(to(b)){const C=b[1];80&b[2]?hu(C,b,C.template,b[8]):b[5]>0&&eh(b)}}function eh(h){for(let C=Ml(h);null!==C;C=au(C))for(let I=10;I<C.length;I++){const x=C[I];if(1024&x[2]){const Y=x[1];hu(Y,x,Y.template,x[8])}else x[5]>0&&eh(x)}const b=h[1].components;if(null!==b)for(let C=0;C<b.length;C++){const I=cn(b[C],h);to(I)&&I[5]>0&&eh(I)}}function Ph(h,d){const b=cn(d,h),C=b[1];(function(h,d){for(let b=d.length;b<h.blueprint.length;b++)d.push(h.blueprint[b])})(C,b),Pc(C,b,b[8])}function Pl(h,d){return h[13]?h[14][4]=d:h[13]=d,h[14]=d,d}function gp(h){for(;h;){h[2]|=64;const d=Il(h);if($o(h)&&!d)return h;h=d}return null}function Fh(h,d,b){const C=d[10];C.begin&&C.begin();try{hu(h,d,h.template,b)}catch(I){throw Bc(d,I),I}finally{C.end&&C.end()}}function uf(h){!function(h){for(let d=0;d<h.components.length;d++){const b=h.components[d],C=eu(b),I=C[1];nf(I,C,I.template,b)}}(h[8])}function Dd(h,d,b){jo(0),d(h,b)}const Bh=(()=>Promise.resolve(null))();function Id(h){return h[7]||(h[7]=[])}function vp(h){return h.cleanup||(h.cleanup=[])}function nh(h,d,b){return(null===h||ho(h))&&(b=function(h){for(;Array.isArray(h);){if("object"==typeof h[1])return h;h=h[0]}return null}(b[d.index])),b[11]}function Bc(h,d){const b=h[9],C=b?b.get(ou,null):null;C&&C.handleError(d)}function bp(h,d,b,C,I){for(let x=0;x<b.length;){const Y=b[x++],et=b[x++],_t=d[Y],Ot=h.data[Y];null!==Ot.setInput?Ot.setInput(_t,I,C,et):_t[et]=I}}function fl(h,d,b){const C=j(d,h);!function(h,d,b){$n(h)?h.setValue(d,b):d.textContent=b}(h[11],C,b)}function gu(h,d,b){let C=b?h.styles:null,I=b?h.classes:null,x=0;if(null!==d)for(let Y=0;Y<d.length;Y++){const et=d[Y];"number"==typeof et?x=et:1==x?I=v(I,et):2==x&&(C=v(C,et+": "+d[++Y]+";"))}b?h.styles=C:h.stylesWithoutHost=C,b?h.classes=I:h.classesWithoutHost=I}const Md=new Mo("INJECTOR",-1);class Ep{get(d,b=ka){if(b===ka){const C=new Error(`NullInjectorError: No provider for ${c(d)}!`);throw C.name="NullInjectorError",C}return b}}const Ad=new Mo("Set Injector scope."),oh={},pf={};let Od;function Tp(){return void 0===Od&&(Od=new Ep),Od}function ff(h,d=null,b=null,C){const I=Cp(h,d,b,C);return I._resolveInjectorDefTypes(),I}function Cp(h,d=null,b=null,C){return new gf(h,b,d||Tp(),C)}class gf{constructor(d,b,C,I=null){this.parent=C,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const x=[];b&&zs(b,et=>this.processProvider(et,d,b)),zs([d],et=>this.processInjectorType(et,[],x)),this.records.set(Md,r(void 0,this));const Y=this.records.get(Ad);this.scope=null!=Y?Y.value:null,this.source=I||("object"==typeof d?null:c(d))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(d=>d.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(d,b=ka,C=Ht.Default){this.assertNotDestroyed();const I=Ec(this),x=ue(void 0);try{if(!(C&Ht.SkipSelf)){let et=this.records.get(d);if(void 0===et){const _t=("function"==typeof(h=d)||"object"==typeof h&&h instanceof Mo)&&ui(d);et=_t&&this.injectableDefInScope(_t)?r(ma(d),oh):null,this.records.set(d,et)}if(null!=et)return this.hydrate(d,et)}return(C&Ht.Self?Tp():this.parent).get(d,b=C&Ht.Optional&&b===ka?null:b)}catch(Y){if("NullInjectorError"===Y.name){if((Y[Yo]=Y[Yo]||[]).unshift(c(d)),I)throw Y;return function(h,d,b,C){const I=h[Yo];throw d[Ta]&&I.unshift(d[Ta]),h.message=function(h,d,b,C=null){h=h&&"\n"===h.charAt(0)&&"\u0275"==h.charAt(1)?h.substr(2):h;let I=c(d);if(Array.isArray(d))I=d.map(c).join(" -> ");else if("object"==typeof d){let x=[];for(let Y in d)if(d.hasOwnProperty(Y)){let et=d[Y];x.push(Y+":"+("string"==typeof et?JSON.stringify(et):c(et)))}I=`{${x.join(", ")}}`}return`${b}${C?"("+C+")":""}[${I}]: ${h.replace(Ya,"\n  ")}`}("\n"+h.message,I,b,C),h.ngTokenPath=I,h[Yo]=null,h}(Y,d,"R3InjectorError",this.source)}throw Y}finally{ue(x),Ec(I)}var h}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(d=>this.get(d))}toString(){const d=[];return this.records.forEach((C,I)=>d.push(c(I))),`R3Injector[${d.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(d,b,C){if(!(d=H(d)))return!1;let I=re(d);const x=null==I&&d.ngModule||void 0,Y=void 0===x?d:x,et=-1!==C.indexOf(Y);if(void 0!==x&&(I=re(x)),null==I)return!1;if(null!=I.imports&&!et){let Wt;C.push(Y);try{zs(I.imports,he=>{this.processInjectorType(he,b,C)&&(void 0===Wt&&(Wt=[]),Wt.push(he))})}finally{}if(void 0!==Wt)for(let he=0;he<Wt.length;he++){const{ngModule:Le,providers:ii}=Wt[he];zs(ii,wi=>this.processProvider(wi,Le,ii||Pe))}}this.injectorDefTypes.add(Y);const _t=ir(Y)||(()=>new Y);this.records.set(Y,r(_t,oh));const Ot=I.providers;if(null!=Ot&&!et){const Wt=d;zs(Ot,he=>this.processProvider(he,Wt,Ot))}return void 0!==x&&void 0!==d.providers}processProvider(d,b,C){let I=E(d=H(d))?d:H(d&&d.provide);const x=(h=d,a(h)?r(void 0,h.useValue):r(l(h),oh));var h;if(E(d)||!0!==d.multi)this.records.get(I);else{let Y=this.records.get(I);Y||(Y=r(void 0,oh,!0),Y.factory=()=>ll(Y.multi),this.records.set(I,Y)),I=d,Y.multi.push(d)}this.records.set(I,x)}hydrate(d,b){return b.value===oh&&(b.value=pf,b.value=b.factory()),"object"==typeof b.value&&b.value&&null!==(h=b.value)&&"object"==typeof h&&"function"==typeof h.ngOnDestroy&&this.onDestroy.add(b.value),b.value;var h}injectableDefInScope(d){if(!d.providedIn)return!1;const b=H(d.providedIn);return"string"==typeof b?"any"===b||b===this.scope:this.injectorDefTypes.has(b)}}function ma(h){const d=ui(h),b=null!==d?d.factory:ir(h);if(null!==b)return b;if(h instanceof Mo)throw new Error(`Token ${c(h)} is missing a \u0275prov definition.`);if(h instanceof Function)return function(h){const d=h.length;if(d>0){const C=Yl(d,"?");throw new Error(`Can't resolve all parameters for ${c(h)}: (${C.join(", ")}).`)}const b=function(h){const d=h&&(h[Me]||h[ie]);if(d){const b=function(h){if(h.hasOwnProperty("name"))return h.name;const d=(""+h).match(/^function\s*([^\s(]+)/);return null===d?"":d[1]}(h);return console.warn(`DEPRECATED: DI is instantiating a token "${b}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${b}" class.`),d}return null}(h);return null!==b?()=>b.factory(h):()=>new h}(h);throw new Error("unreachable")}function l(h,d,b){let C;if(E(h)){const I=H(h);return ir(I)||ma(I)}if(a(h))C=()=>H(h.useValue);else if(function(h){return!(!h||!h.useFactory)}(h))C=()=>h.useFactory(...ll(h.deps||[]));else if(function(h){return!(!h||!h.useExisting)}(h))C=()=>gr(H(h.useExisting));else{const I=H(h&&(h.useClass||h.provide));if(!function(h){return!!h.deps}(h))return ir(I)||ma(I);C=()=>new I(...ll(h.deps))}return C}function r(h,d,b=!1){return{factory:h,value:d,multi:b?[]:void 0}}function a(h){return null!==h&&"object"==typeof h&&xs in h}function E(h){return"function"==typeof h}let ut=(()=>{class h{static create(b,C){var I;if(Array.isArray(b))return ff({name:""},C,b,"");{const x=null!==(I=b.name)&&void 0!==I?I:"";return ff({name:x},b.parent,b.providers,x)}}}return h.THROW_IF_NOT_FOUND=ka,h.NULL=new Ep,h.\u0275prov=pe({token:h,providedIn:"any",factory:()=>gr(Md)}),h.__NG_ELEMENT_ID__=-1,h})();function uo(h,d){Ds(eu(h)[1],U())}function Bl(h){let d=function(h){return Object.getPrototypeOf(h.prototype).constructor}(h.type),b=!0;const C=[h];for(;d;){let I;if(ho(h))I=d.\u0275cmp||d.\u0275dir;else{if(d.\u0275cmp)throw new Error("Directives cannot inherit Components");I=d.\u0275dir}if(I){if(b){C.push(I);const Y=h;Y.inputs=Ko(h.inputs),Y.declaredInputs=Ko(h.declaredInputs),Y.outputs=Ko(h.outputs);const et=I.hostBindings;et&&Cg(h,et);const _t=I.viewQuery,Ot=I.contentQueries;if(_t&&_a(h,_t),Ot&&mf(h,Ot),s(h.inputs,I.inputs),s(h.declaredInputs,I.declaredInputs),s(h.outputs,I.outputs),ho(I)&&I.data.animation){const Wt=h.data;Wt.animation=(Wt.animation||[]).concat(I.data.animation)}}const x=I.features;if(x)for(let Y=0;Y<x.length;Y++){const et=x[Y];et&&et.ngInherit&&et(h),et===Bl&&(b=!1)}}d=Object.getPrototypeOf(d)}!function(h){let d=0,b=null;for(let C=h.length-1;C>=0;C--){const I=h[C];I.hostVars=d+=I.hostVars,I.hostAttrs=Wa(I.hostAttrs,b=Wa(b,I.hostAttrs))}}(C)}function Ko(h){return h===ae?{}:h===Pe?[]:h}function _a(h,d){const b=h.viewQuery;h.viewQuery=b?(C,I)=>{d(C,I),b(C,I)}:d}function mf(h,d){const b=h.contentQueries;h.contentQueries=b?(C,I,x)=>{d(C,I,x),b(C,I,x)}:d}function Cg(h,d){const b=h.hostBindings;h.hostBindings=b?(C,I)=>{d(C,I),b(C,I)}:d}let wp=null;function Vh(){if(!wp){const h=yi.Symbol;if(h&&h.iterator)wp=h.iterator;else{const d=Object.getOwnPropertyNames(Map.prototype);for(let b=0;b<d.length;++b){const C=d[b];"entries"!==C&&"size"!==C&&Map.prototype[C]===Map.prototype.entries&&(wp=C)}}}return wp}function Uh(h){return!!Rp(h)&&(Array.isArray(h)||!(h instanceof Map)&&Vh()in h)}function Rp(h){return null!==h&&("function"==typeof h||"object"==typeof h)}function ac(h,d,b){return h[d]=b}function oa(h,d,b){return!Object.is(h[d],b)&&(h[d]=b,!0)}function rh(h,d,b,C){const I=oa(h,d,b);return oa(h,d+1,C)||I}function k(h,d,b,C){const I=Di();return oa(I,on(),d)&&(Zn(),Va(On(),I,h,d,b,C)),k}function S(h,d,b,C){return oa(h,on(),b)?d+ot(b)+C:Hn}function rt(h,d,b,C,I,x,Y,et){const Ot=function(h,d,b,C,I){const x=rh(h,d,b,C);return oa(h,d+2,I)||x}(h,dn(),b,I,Y);return _n(3),Ot?d+ot(b)+C+ot(I)+x+ot(Y)+et:Hn}function jm(h,d,b,C,I,x,Y,et){const _t=Di(),Ot=Zn(),Wt=h+20,he=Ot.firstCreatePass?function(h,d,b,C,I,x,Y,et,_t){const Ot=d.consts,Wt=Nc(d,h,4,Y||null,yo(Ot,et));pu(d,b,Wt,yo(Ot,_t)),Ds(d,Wt);const he=Wt.tViews=Ll(2,Wt,C,I,x,d.directiveRegistry,d.pipeRegistry,null,d.schemas,Ot);return null!==d.queries&&(d.queries.template(d,Wt),he.queries=d.queries.embeddedTView(Wt)),Wt}(Wt,Ot,_t,d,b,C,I,x,Y):Ot.data[Wt];Pt(he,!1);const Le=_t[11].createComment("");Oi(Ot,_t,Le,he),bs(Le,_t),Pl(_t,_t[Wt]=lf(Le,_t,Le,he)),Uo(he)&&Qu(Ot,_t,he),null!=Y&&sc(_t,he,et)}function zm(h){return ki(fn.lFrame.contextLView,20+h)}function vf(h,d=Ht.Default){const b=Di();return null===b?gr(h,d):vn(U(),b,H(h),d)}function i_(){throw new Error("invalid")}function xg(h,d,b){const C=Di();return oa(C,on(),d)&&ga(Zn(),On(),C,h,d,C[11],b,!1),xg}function kg(h,d,b,C,I){const Y=I?"class":"style";bp(h,b,d.inputs[Y],Y,C)}function Lg(h,d,b,C){const I=Di(),x=Zn(),Y=20+h,et=I[11],_t=I[Y]=lu(et,d,fn.lFrame.currentNamespace),Ot=x.firstCreatePass?function(h,d,b,C,I,x,Y){const et=d.consts,Ot=Nc(d,h,2,I,yo(et,x));return pu(d,b,Ot,yo(et,Y)),null!==Ot.attrs&&gu(Ot,Ot.attrs,!1),null!==Ot.mergedAttrs&&gu(Ot,Ot.mergedAttrs,!0),null!==d.queries&&d.queries.elementStart(d,Ot),Ot}(Y,x,I,0,d,b,C):x.data[Y];Pt(Ot,!0);const Wt=Ot.mergedAttrs;null!==Wt&&Da(et,_t,Wt);const he=Ot.classes;null!==he&&io(et,_t,he);const Le=Ot.styles;null!==Le&&Vr(et,_t,Le),64!=(64&Ot.flags)&&Oi(x,I,_t,Ot),0===fn.lFrame.elementDepthCount&&bs(_t,I),fn.lFrame.elementDepthCount++,Uo(Ot)&&(Qu(x,I,Ot),sp(x,Ot,I)),null!==C&&sc(I,Ot)}function Ng(){let h=U();$t()?Ce():(h=h.parent,Pt(h,!1));const d=h;fn.lFrame.elementDepthCount--;const b=Zn();b.firstCreatePass&&(Ds(b,h),En(h)&&b.queries.elementEnd(h)),null!=d.classesWithoutHost&&function(h){return 0!=(16&h.flags)}(d)&&kg(b,d,Di(),d.classesWithoutHost,!0),null!=d.stylesWithoutHost&&function(h){return 0!=(32&h.flags)}(d)&&kg(b,d,Di(),d.stylesWithoutHost,!1)}function n_(h,d,b,C){Lg(h,d,b,C),Ng()}function Pg(h,d,b){const C=Di(),I=Zn(),x=h+20,Y=I.firstCreatePass?function(h,d,b,C,I){const x=d.consts,Y=yo(x,C),et=Nc(d,h,8,"ng-container",Y);return null!==Y&&gu(et,Y,!0),pu(d,b,et,yo(x,I)),null!==d.queries&&d.queries.elementStart(d,et),et}(x,I,C,d,b):I.data[x];Pt(Y,!0);const et=C[x]=C[11].createComment("");Oi(I,C,et,Y),bs(et,C),Uo(Y)&&(Qu(I,C,Y),sp(I,Y,C)),null!=b&&sc(C,Y)}function Fg(){let h=U();const d=Zn();$t()?Ce():(h=h.parent,Pt(h,!1)),d.firstCreatePass&&(Ds(d,h),En(h)&&d.queries.elementEnd(h))}function o_(h,d,b){Pg(h,d,b),Fg()}function r_(){return Di()}function Bg(h){return!!h&&"function"==typeof h.then}function s_(h){return!!h&&"function"==typeof h.subscribe}const a_=s_;function Hg(h,d,b,C){const I=Di(),x=Zn(),Y=U();return l_(x,I,I[11],Y,h,d,!!b,C),Hg}function Vg(h,d){const b=U(),C=Di(),I=Zn();return l_(I,C,nh(jr(I.data),b,C),b,h,d,!1),Vg}function l_(h,d,b,C,I,x,Y,et){const _t=Uo(C),Wt=h.firstCreatePass&&vp(h),he=d[8],Le=Id(d);let ii=!0;if(3&C.type||et){const $i=St(C,d),mn=et?et($i):$i,Ii=Le.length,Rn=et?vo=>et(Et(vo[C.index])):C.index;if($n(b)){let vo=null;if(!et&&_t&&(vo=function(h,d,b,C){const I=h.cleanup;if(null!=I)for(let x=0;x<I.length-1;x+=2){const Y=I[x];if(Y===b&&I[x+1]===C){const et=d[7],_t=I[x+2];return et.length>_t?et[_t]:null}"string"==typeof Y&&(x+=2)}return null}(h,d,I,C.index)),null!==vo)(vo.__ngLastListenerFn__||vo).__ngNextListenerFn__=x,vo.__ngLastListenerFn__=x,ii=!1;else{x=Ug(C,d,he,x,!1);const sr=b.listen(mn,I,x);Le.push(x,sr),Wt&&Wt.push(I,Rn,Ii,Ii+1)}}else x=Ug(C,d,he,x,!0),mn.addEventListener(I,x,Y),Le.push(x),Wt&&Wt.push(I,Rn,Ii,Y)}else x=Ug(C,d,he,x,!1);const wi=C.outputs;let Vi;if(ii&&null!==wi&&(Vi=wi[I])){const $i=Vi.length;if($i)for(let mn=0;mn<$i;mn+=2){const Vl=d[Vi[mn]][Vi[mn+1]].subscribe(x),Pd=Le.length;Le.push(x,Vl),Wt&&Wt.push(I,C.index,Pd,-(Pd+1))}}}function c_(h,d,b,C){try{return!1!==b(C)}catch(I){return Bc(h,I),!1}}function Ug(h,d,b,C,I){return function x(Y){if(Y===Function)return C;const et=2&h.flags?cn(h.index,d):d;0==(32&d[2])&&gp(et);let _t=c_(d,0,C,Y),Ot=x.__ngNextListenerFn__;for(;Ot;)_t=c_(d,0,Ot,Y)&&_t,Ot=Ot.__ngNextListenerFn__;return I&&!1===_t&&(Y.preventDefault(),Y.returnValue=!1),_t}}function u_(h=1){return function(h){return(fn.lFrame.contextLView=function(h,d){for(;h>0;)d=d[15],h--;return d}(h,fn.lFrame.contextLView))[8]}(h)}function vy(h,d){let b=null;const C=function(h){const d=h.attrs;if(null!=d){const b=d.indexOf(5);if(0==(1&b))return d[b+1]}return null}(h);for(let I=0;I<d.length;I++){const x=d[I];if("*"!==x){if(null===C?hd(h,x,!0):fa(C,x))return I}else b=I}return b}function h_(h){const d=Di()[16][6];if(!d.projection){const C=d.projection=Yl(h?h.length:1,null),I=C.slice();let x=d.child;for(;null!==x;){const Y=h?vy(x,h):0;null!==Y&&(I[Y]?I[Y].projectionNext=x:C[Y]=x,I[Y]=x),x=x.next}}}function d_(h,d=0,b){const C=Di(),I=Zn(),x=Nc(I,20+h,16,null,b||null);null===x.projection&&(x.projection=d),Ce(),64!=(64&x.flags)&&function(h,d,b){ys(d[11],0,d,b,Q(h,b,d),Ue(b.parent||d[6],b,d))}(I,C,x)}function Gg(h,d,b){return Wg(h,"",d,"",b),Gg}function Wg(h,d,b,C,I){const x=Di(),Y=S(x,d,b,C);return Y!==Hn&&ga(Zn(),On(),x,h,Y,x[11],I,!1),Wg}function E_(h,d,b,C,I){const x=h[b+1],Y=null===d;let et=C?Ha(x):Ol(x),_t=!1;for(;0!==et&&(!1===_t||Y);){const Wt=h[et+1];Ey(h[et],d)&&(_t=!0,h[et+1]=C?_d(Wt):gd(Wt)),et=C?Ha(Wt):Ol(Wt)}_t&&(h[b+1]=C?gd(x):_d(x))}function Ey(h,d){return null===h||null==d||(Array.isArray(h)?h[1]:h)===d||!(!Array.isArray(h)||"string"!=typeof d)&&al(h,d)>=0}function jg(h,d,b){return Vc(h,d,b,!1),jg}function zg(h,d){return Vc(h,d,null,!0),zg}function Vc(h,d,b,C){const I=Di(),x=Zn(),Y=_n(2);x.firstUpdatePass&&function(h,d,b,C){const I=h.data;if(null===I[b+1]){const x=I[nn()],Y=function(h,d){return d>=h.expandoStartIndex}(h,b);(function(h,d){return 0!=(h.flags&(d?16:32))})(x,C)&&null===d&&!Y&&(d=!1),d=function(h,d,b,C){const I=jr(h);let x=C?d.residualClasses:d.residualStyles;if(null===I)0===(C?d.classBindings:d.styleBindings)&&(b=bf(b=Yg(null,h,d,b,C),d.attrs,C),x=null);else{const Y=d.directiveStylingLast;if(-1===Y||h[Y]!==I)if(b=Yg(I,h,d,b,C),null===x){let _t=function(h,d,b){const C=b?d.classBindings:d.styleBindings;if(0!==Ol(C))return h[Ha(C)]}(h,d,C);void 0!==_t&&Array.isArray(_t)&&(_t=Yg(null,h,d,_t[1],C),_t=bf(_t,d.attrs,C),function(h,d,b,C){h[Ha(b?d.classBindings:d.styleBindings)]=C}(h,d,C,_t))}else x=function(h,d,b){let C;const I=d.directiveEnd;for(let x=1+d.directiveStylingLast;x<I;x++)C=bf(C,h[x].hostAttrs,b);return bf(C,d.attrs,b)}(h,d,C)}return void 0!==x&&(C?d.residualClasses=x:d.residualStyles=x),b}(I,x,d,C),function(h,d,b,C,I,x){let Y=x?d.classBindings:d.styleBindings,et=Ha(Y),_t=Ol(Y);h[C]=b;let Wt,Ot=!1;if(Array.isArray(b)){const he=b;Wt=he[1],(null===Wt||al(he,Wt)>0)&&(Ot=!0)}else Wt=b;if(I)if(0!==_t){const Le=Ha(h[et+1]);h[C+1]=Rh(Le,et),0!==Le&&(h[Le+1]=md(h[Le+1],C)),h[et+1]=function(h,d){return 131071&h|d<<17}(h[et+1],C)}else h[C+1]=Rh(et,0),0!==et&&(h[et+1]=md(h[et+1],C)),et=C;else h[C+1]=Rh(_t,0),0===et?et=C:h[_t+1]=md(h[_t+1],C),_t=C;Ot&&(h[C+1]=gd(h[C+1])),E_(h,Wt,C,!0),E_(h,Wt,C,!1),function(h,d,b,C,I){const x=I?h.residualClasses:h.residualStyles;null!=x&&"string"==typeof d&&al(x,d)>=0&&(b[C+1]=_d(b[C+1]))}(d,Wt,h,C,x),Y=Rh(et,_t),x?d.classBindings=Y:d.styleBindings=Y}(I,x,d,b,Y,C)}}(x,h,Y,C),d!==Hn&&oa(I,Y,d)&&function(h,d,b,C,I,x,Y,et){if(!(3&d.type))return;const _t=h.data,Ot=_t[et+1];tg(function(h){return 1==(1&h)}(Ot)?x_(_t,d,b,I,Ol(Ot),Y):void 0)||(tg(x)||function(h){return 2==(2&h)}(Ot)&&(x=x_(_t,null,b,I,et,Y)),function(h,d,b,C,I){const x=$n(h);if(d)I?x?h.addClass(b,C):b.classList.add(C):x?h.removeClass(b,C):b.classList.remove(C);else{let Y=-1===C.indexOf("-")?void 0:$a.DashCase;if(null==I)x?h.removeStyle(b,C,Y):b.style.removeProperty(C);else{const et="string"==typeof I&&I.endsWith("!important");et&&(I=I.slice(0,-10),Y|=$a.Important),x?h.setStyle(b,C,I,Y):b.style.setProperty(C,I,et?"important":"")}}}(C,Y,j(nn(),b),I,x))}(x,x.data[nn()],I,I[11],h,I[Y+1]=function(h,d){return null==h||("string"==typeof d?h+=d:"object"==typeof h&&(h=c(Ft(h)))),h}(d,b),C,Y)}function Yg(h,d,b,C,I){let x=null;const Y=b.directiveEnd;let et=b.directiveStylingLast;for(-1===et?et=b.directiveStart:et++;et<Y&&(x=d[et],C=bf(C,x.hostAttrs,I),x!==h);)et++;return null!==h&&(b.directiveStylingLast=et),C}function bf(h,d,b){const C=b?1:2;let I=-1;if(null!==d)for(let x=0;x<d.length;x++){const Y=d[x];"number"==typeof Y?I=Y:I===C&&(Array.isArray(h)||(h=void 0===h?[]:["",h]),Ir(h,Y,!!b||d[++x]))}return void 0===h?null:h}function x_(h,d,b,C,I,x){const Y=null===d;let et;for(;I>0;){const _t=h[I],Ot=Array.isArray(_t),Wt=Ot?_t[1]:_t,he=null===Wt;let Le=b[I+1];Le===Hn&&(Le=he?Pe:void 0);let ii=he?sl(Le,C):Wt===C?Le:void 0;if(Ot&&!tg(ii)&&(ii=sl(_t,C)),tg(ii)&&(et=ii,Y))return et;const wi=h[I+1];I=Y?Ha(wi):Ol(wi)}if(null!==d){let _t=x?d.residualClasses:d.residualStyles;null!=_t&&(et=sl(_t,C))}return et}function tg(h){return void 0!==h}function L_(h,d=""){const b=Di(),C=Zn(),I=h+20,x=C.firstCreatePass?Nc(C,I,1,d,null):C.data[I],Y=b[I]=function(h,d){return $n(h)?h.createText(d):h.createTextNode(d)}(b[11],d);Oi(C,b,Y,x),Pt(x,!1)}function Xg(h){return eg("",h,""),Xg}function eg(h,d,b){const C=Di(),I=S(C,h,d,b);return I!==Hn&&fl(C,nn(),I),eg}function Kg(h,d,b,C,I){const x=Di(),Y=function(h,d,b,C,I,x){const et=rh(h,dn(),b,I);return _n(2),et?d+ot(b)+C+ot(I)+x:Hn}(x,h,d,b,C,I);return Y!==Hn&&fl(x,nn(),Y),Kg}function Jg(h,d,b,C,I,x,Y){const et=Di(),_t=rt(et,h,d,b,C,I,x,Y);return _t!==Hn&&fl(et,nn(),_t),Jg}function $g(h,d,b){const C=Di();return oa(C,on(),d)&&ga(Zn(),On(),C,h,d,C[11],b,!0),$g}function Zg(h,d,b){const C=Di();if(oa(C,on(),d)){const x=Zn(),Y=On();ga(x,Y,C,h,d,nh(jr(x.data),Y,C),b,!0)}return Zg}const Ld=void 0;var iE=["en",[["a","p"],["AM","PM"],Ld],[["AM","PM"],Ld,Ld],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ld,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ld,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ld,"{1} 'at' {0}",Ld],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(h){const b=Math.floor(Math.abs(h)),C=h.toString().replace(/^[^.]*\.?/,"").length;return 1===b&&0===C?1:5}];let xp={};function Qg(h){const d=function(h){return h.toLowerCase().replace(/_/g,"-")}(h);let b=Z_(d);if(b)return b;const C=d.split("-")[0];if(b=Z_(C),b)return b;if("en"===C)return iE;throw new Error(`Missing locale data for the locale "${h}".`)}function $_(h){return Qg(h)[xn.PluralCase]}function Z_(h){return h in xp||(xp[h]=yi.ng&&yi.ng.common&&yi.ng.common.locales&&yi.ng.common.locales[h]),xp[h]}var xn=(()=>((xn=xn||{})[xn.LocaleId=0]="LocaleId",xn[xn.DayPeriodsFormat=1]="DayPeriodsFormat",xn[xn.DayPeriodsStandalone=2]="DayPeriodsStandalone",xn[xn.DaysFormat=3]="DaysFormat",xn[xn.DaysStandalone=4]="DaysStandalone",xn[xn.MonthsFormat=5]="MonthsFormat",xn[xn.MonthsStandalone=6]="MonthsStandalone",xn[xn.Eras=7]="Eras",xn[xn.FirstDayOfWeek=8]="FirstDayOfWeek",xn[xn.WeekendRange=9]="WeekendRange",xn[xn.DateFormat=10]="DateFormat",xn[xn.TimeFormat=11]="TimeFormat",xn[xn.DateTimeFormat=12]="DateTimeFormat",xn[xn.NumberSymbols=13]="NumberSymbols",xn[xn.NumberFormats=14]="NumberFormats",xn[xn.CurrencyCode=15]="CurrencyCode",xn[xn.CurrencySymbol=16]="CurrencySymbol",xn[xn.CurrencyName=17]="CurrencyName",xn[xn.Currencies=18]="Currencies",xn[xn.Directionality=19]="Directionality",xn[xn.PluralCase=20]="PluralCase",xn[xn.ExtraData=21]="ExtraData",xn))();const ig="en-US";let Q_=ig;function em(h,d,b,C,I){if(h=H(h),Array.isArray(h))for(let x=0;x<h.length;x++)em(h[x],d,b,C,I);else{const x=Zn(),Y=Di();let et=E(h)?h:H(h.provide),_t=l(h);const Ot=U(),Wt=1048575&Ot.providerIndexes,he=Ot.directiveStart,Le=Ot.providerIndexes>>20;if(E(h)||!h.multi){const ii=new aa(_t,I,vf),wi=nm(et,d,I?Wt:Wt+Le,he);-1===wi?(xe(Ct(Ot,Y),x,et),im(x,h,d.length),d.push(et),Ot.directiveStart++,Ot.directiveEnd++,I&&(Ot.providerIndexes+=1048576),b.push(ii),Y.push(ii)):(b[wi]=ii,Y[wi]=ii)}else{const ii=nm(et,d,Wt+Le,he),wi=nm(et,d,Wt,Wt+Le),Vi=ii>=0&&b[ii],$i=wi>=0&&b[wi];if(I&&!$i||!I&&!Vi){xe(Ct(Ot,Y),x,et);const mn=function(h,d,b,C,I){const x=new aa(h,b,vf);return x.multi=[],x.index=d,x.componentProviders=0,Tv(x,I,C&&!b),x}(I?tT:qE,b.length,I,C,_t);!I&&$i&&(b[wi].providerFactory=mn),im(x,h,d.length,0),d.push(et),Ot.directiveStart++,Ot.directiveEnd++,I&&(Ot.providerIndexes+=1048576),b.push(mn),Y.push(mn)}else im(x,h,ii>-1?ii:wi,Tv(b[I?wi:ii],_t,!I&&C));!I&&C&&$i&&b[wi].componentProviders++}}}function im(h,d,b,C){const I=E(d),x=function(h){return!!h.useClass}(d);if(I||x){const _t=(x?H(d.useClass):d).prototype.ngOnDestroy;if(_t){const Ot=h.destroyHooks||(h.destroyHooks=[]);if(!I&&d.multi){const Wt=Ot.indexOf(b);-1===Wt?Ot.push(b,[C,_t]):Ot[Wt+1].push(C,_t)}else Ot.push(b,_t)}}}function Tv(h,d,b){return b&&h.componentProviders++,h.multi.push(d)-1}function nm(h,d,b,C){for(let I=b;I<C;I++)if(d[I]===h)return I;return-1}function qE(h,d,b,C){return om(this.multi,[])}function tT(h,d,b,C){const I=this.multi;let x;if(this.providerFactory){const Y=this.providerFactory.componentProviders,et=Dr(b,b[1],this.providerFactory.index,C);x=et.slice(0,Y),om(I,x);for(let _t=Y;_t<et.length;_t++)x.push(et[_t])}else x=[],om(I,x);return x}function om(h,d){for(let b=0;b<h.length;b++)d.push((0,h[b])());return d}function Cv(h,d=[]){return b=>{b.providersResolver=(C,I)=>function(h,d,b){const C=Zn();if(C.firstCreatePass){const I=ho(h);em(b,C.data,C.blueprint,I,!0),em(d,C.data,C.blueprint,I,!1)}}(C,I?I(h):h,d)}}class Sv{}class oT{resolveComponentFactory(d){throw function(h){const d=Error(`No component factory found for ${c(h)}. Did you add it to @NgModule.entryComponents?`);return d.ngComponent=h,d}(d)}}let Sf=(()=>{class h{}return h.NULL=new oT,h})();function rT(){return Lp(U(),Di())}function Lp(h,d){return new wf(St(h,d))}let wf=(()=>{class h{constructor(b){this.nativeElement=b}}return h.__NG_ELEMENT_ID__=rT,h})();function sT(h){return h instanceof wf?h.nativeElement:h}class Rv{}let aT=(()=>{class h{}return h.__NG_ELEMENT_ID__=()=>function(){const h=Di(),b=cn(U().index,h);return function(h){return h[11]}(ao(b)?b:h)}(),h})(),uT=(()=>{class h{}return h.\u0275prov=pe({token:h,providedIn:"root",factory:()=>null}),h})();class Dv{constructor(d){this.full=d,this.major=d.split(".")[0],this.minor=d.split(".")[1],this.patch=d.split(".").slice(2).join(".")}}const hT=new Dv("13.1.0"),rm={};function ag(h,d,b,C,I=!1){for(;null!==b;){const x=d[b.index];if(null!==x&&C.push(Et(x)),pr(x))for(let et=10;et<x.length;et++){const _t=x[et],Ot=_t[1].firstChild;null!==Ot&&ag(_t[1],_t,Ot,C)}const Y=b.type;if(8&Y)ag(h,d,b.child,C);else if(32&Y){const et=yh(b,d);let _t;for(;_t=et();)C.push(_t)}else if(16&Y){const et=zt(d,b);if(Array.isArray(et))C.push(...et);else{const _t=Il(d[16]);ag(_t[1],_t,et,C,!0)}}b=I?b.projectionNext:b.next}return C}class Rf{constructor(d,b){this._lView=d,this._cdRefInjectingView=b,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const d=this._lView,b=d[1];return ag(b,d,b.firstChild,[])}get context(){return this._lView[8]}set context(d){this._lView[8]=d}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const d=this._lView[3];if(pr(d)){const b=d[8],C=b?b.indexOf(this):-1;C>-1&&(Oc(d,C),Ys(b,C))}this._attachedToViewContainer=!1}wh(this._lView[1],this._lView)}onDestroy(d){pl(this._lView[1],this._lView,null,d)}markForCheck(){gp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Fh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(h,d,b){Ni(!0);try{Fh(h,d,b)}finally{Ni(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var d;this._appRef=null,wo(this._lView[1],d=this._lView,d[11],2,null,null)}attachToAppRef(d){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=d}}class dT extends Rf{constructor(d){super(d),this._view=d}detectChanges(){uf(this._view)}checkNoChanges(){!function(h){Ni(!0);try{uf(h)}finally{Ni(!1)}}(this._view)}get context(){return null}}class Iv extends Sf{constructor(d){super(),this.ngModule=d}resolveComponentFactory(d){const b=_i(d);return new sm(b,this.ngModule)}}function Mv(h){const d=[];for(let b in h)h.hasOwnProperty(b)&&d.push({propName:h[b],templateName:b});return d}const fT=new Mo("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>nd});class sm extends Sv{constructor(d,b){super(),this.componentDef=d,this.ngModule=b,this.componentType=d.type,this.selector=d.selectors.map(Up).join(","),this.ngContentSelectors=d.ngContentSelectors?d.ngContentSelectors:[],this.isBoundToModule=!!b}get inputs(){return Mv(this.componentDef.inputs)}get outputs(){return Mv(this.componentDef.outputs)}create(d,b,C,I){const x=(I=I||this.ngModule)?function(h,d){return{get:(b,C,I)=>{const x=h.get(b,rm,I);return x!==rm||C===rm?x:d.get(b,C,I)}}}(d,I.injector):d,Y=x.get(Rv,sn),et=x.get(uT,null),_t=Y.createRenderer(null,this.componentDef),Ot=this.componentDef.selectors[0][0]||"div",Wt=C?function(h,d,b){if($n(h))return h.selectRootElement(d,b===ri.ShadowDom);let C="string"==typeof d?h.querySelector(d):d;return C.textContent="",C}(_t,C,this.componentDef.encapsulation):lu(Y.createRenderer(null,this.componentDef),Ot,function(h){const d=h.toLowerCase();return"svg"===d?Qs:"math"===d?"http://www.w3.org/1998/MathML/":null}(Ot)),he=this.componentDef.onPush?576:528,Le=function(h,d){return{components:[],scheduler:h||nd,clean:Bh,playerHandler:d||null,flags:0}}(),ii=Ll(0,null,null,1,0,null,null,null,null,null),wi=xl(null,ii,Le,he,null,null,Y,_t,et,x);let Vi,$i;Yr(wi);try{const mn=function(h,d,b,C,I,x){const Y=b[1];b[20]=h;const _t=Nc(Y,20,2,"#host",null),Ot=_t.mergedAttrs=d.hostAttrs;null!==Ot&&(gu(_t,Ot,!0),null!==h&&(Da(I,h,Ot),null!==_t.classes&&io(I,h,_t.classes),null!==_t.styles&&Vr(I,h,_t.styles)));const Wt=C.createRenderer(h,d),he=xl(b,ap(d),null,d.onPush?64:16,b[20],_t,C,Wt,x||null,null);return Y.firstCreatePass&&(xe(Ct(_t,b),Y,d.type),Lh(Y,_t),pp(_t,b.length,1)),Pl(b,he),b[20]=he}(Wt,this.componentDef,wi,Y,_t);if(Wt)if(C)Da(_t,Wt,["ng-version",hT.full]);else{const{attrs:Ii,classes:Rn}=function(h){const d=[],b=[];let C=1,I=2;for(;C<h.length;){let x=h[C];if("string"==typeof x)2===I?""!==x&&d.push(x,h[++C]):8===I&&b.push(x);else{if(!na(I))break;I=x}C++}return{attrs:d,classes:b}}(this.componentDef.selectors[0]);Ii&&Da(_t,Wt,Ii),Rn&&Rn.length>0&&io(_t,Wt,Rn.join(" "))}if($i=ni(ii,20),void 0!==b){const Ii=$i.projection=[];for(let Rn=0;Rn<this.ngContentSelectors.length;Rn++){const vo=b[Rn];Ii.push(null!=vo?Array.from(vo):null)}}Vi=function(h,d,b,C,I){const x=b[1],Y=function(h,d,b){const C=U();h.firstCreatePass&&(b.providersResolver&&b.providersResolver(b),sf(h,C,d,kl(h,d,1,null),b));const I=Dr(d,h,C.directiveStart,C);bs(I,d);const x=St(C,d);return x&&bs(x,d),I}(x,b,d);if(C.components.push(Y),h[8]=Y,I&&I.forEach(_t=>_t(Y,d)),d.contentQueries){const _t=U();d.contentQueries(1,Y,_t.directiveStart)}const et=U();return!x.firstCreatePass||null===d.hostBindings&&null===d.hostAttrs||(An(et.index),hp(b[1],et,0,et.directiveStart,et.directiveEnd,d),kh(d,Y)),Y}(mn,this.componentDef,wi,Le,[uo]),Pc(ii,wi,null)}finally{Gs()}return new _T(this.componentType,Vi,Lp($i,wi),wi,$i)}}class _T extends class{}{constructor(d,b,C,I,x){super(),this.location=C,this._rootLView=I,this._tNode=x,this.instance=b,this.hostView=this.changeDetectorRef=new dT(I),this.componentType=d}get injector(){return new Sr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(d){this.hostView.onDestroy(d)}}class Np{}class Av{}const Pp=new Map;class kv extends Np{constructor(d,b){super(),this._parent=b,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Iv(this);const C=Mn(d);this._bootstrapComponents=pa(C.bootstrap),this._r3Injector=Cp(d,b,[{provide:Np,useValue:this},{provide:Sf,useValue:this.componentFactoryResolver}],c(d)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(d)}get(d,b=ut.THROW_IF_NOT_FOUND,C=Ht.Default){return d===ut||d===Np||d===Md?this:this._r3Injector.get(d,b,C)}destroy(){const d=this._r3Injector;!d.destroyed&&d.destroy(),this.destroyCbs.forEach(b=>b()),this.destroyCbs=null}onDestroy(d){this.destroyCbs.push(d)}}class am extends Av{constructor(d){super(),this.moduleType=d,null!==Mn(d)&&function(h){const d=new Set;!function b(C){const I=Mn(C,!0),x=I.id;null!==x&&(function(h,d,b){if(d&&d!==b)throw new Error(`Duplicate module registered for ${h} - ${c(d)} vs ${c(d.name)}`)}(x,Pp.get(x),C),Pp.set(x,C));const Y=pa(I.imports);for(const et of Y)d.has(et)||(d.add(et),b(et))}(h)}(d)}create(d){return new kv(this.moduleType,d)}}function Lv(h,d,b){const C=Gi()+h,I=Di();return I[C]===Hn?ac(I,C,b?d.call(b):d()):function(h,d){return h[d]}(I,C)}function Nv(h,d,b,C){return Fv(Di(),Gi(),h,d,b,C)}function Pv(h,d,b,C,I){return function(h,d,b,C,I,x,Y){const et=d+b;return rh(h,et,I,x)?ac(h,et+2,Y?C.call(Y,I,x):C(I,x)):Df(h,et+2)}(Di(),Gi(),h,d,b,C,I)}function Df(h,d){const b=h[d];return b===Hn?void 0:b}function Fv(h,d,b,C,I,x){const Y=d+b;return oa(h,Y,I)?ac(h,Y+1,x?C.call(x,I):C(I)):Df(h,Y+1)}function Gv(h,d){const b=Zn();let C;const I=h+20;b.firstCreatePass?(C=function(h,d){if(d)for(let b=d.length-1;b>=0;b--){const C=d[b];if(h===C.name)return C}}(d,b.pipeRegistry),b.data[I]=C,C.onDestroy&&(b.destroyHooks||(b.destroyHooks=[])).push(I,C.onDestroy)):C=b.data[I];const x=C.factory||(C.factory=ir(C.type)),Y=ue(vf);try{const et=Ma(!1),_t=x();return Ma(et),function(h,d,b,C){b>=h.data.length&&(h.data[b]=null,h.blueprint[b]=null),d[b]=C}(b,Di(),I,_t),_t}finally{ue(Y)}}function Wv(h,d,b){const C=h+20,I=Di(),x=ki(I,C);return function(h,d){return h[1].data[d].pure}(I,C)?Fv(I,Gi(),d,x.transform,b,x):x.transform(b)}function lm(h){return d=>{setTimeout(h,void 0,d)}}const bu=class extends y.x{constructor(d=!1){super(),this.__isAsync=d}emit(d){super.next(d)}subscribe(d,b,C){var I,x,Y;let et=d,_t=b||(()=>null),Ot=C;if(d&&"object"==typeof d){const he=d;et=null===(I=he.next)||void 0===I?void 0:I.bind(he),_t=null===(x=he.error)||void 0===x?void 0:x.bind(he),Ot=null===(Y=he.complete)||void 0===Y?void 0:Y.bind(he)}this.__isAsync&&(_t=lm(_t),et&&(et=lm(et)),Ot&&(Ot=lm(Ot)));const Wt=super.subscribe({next:et,error:_t,complete:Ot});return d instanceof p.w0&&d.add(Wt),Wt}};function kT(){return this._results[Vh()]()}class lg{constructor(d=!1){this._emitDistinctChangesOnly=d,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const b=Vh(),C=lg.prototype;C[b]||(C[b]=kT)}get changes(){return this._changes||(this._changes=new bu)}get(d){return this._results[d]}map(d){return this._results.map(d)}filter(d){return this._results.filter(d)}find(d){return this._results.find(d)}reduce(d,b){return this._results.reduce(d,b)}forEach(d){this._results.forEach(d)}some(d){return this._results.some(d)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(d,b){const C=this;C.dirty=!1;const I=ms(d);(this._changesDetected=!function(h,d,b){if(h.length!==d.length)return!1;for(let C=0;C<h.length;C++){let I=h[C],x=d[C];if(b&&(I=b(I),x=b(x)),x!==I)return!1}return!0}(C._results,I,b))&&(C._results=I,C.length=I.length,C.last=I[this.length-1],C.first=I[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Mf=(()=>{class h{}return h.__NG_ELEMENT_ID__=PT,h})();const LT=Mf,NT=class extends LT{constructor(d,b,C){super(),this._declarationLView=d,this._declarationTContainer=b,this.elementRef=C}createEmbeddedView(d){const b=this._declarationTContainer.tViews,C=xl(this._declarationLView,b,d,16,null,b.declTNode,null,null,null,null);C[17]=this._declarationLView[this._declarationTContainer.index];const x=this._declarationLView[19];return null!==x&&(C[19]=x.createEmbeddedView(b)),Pc(b,C,d),new Rf(C)}};function PT(){return cg(U(),Di())}function cg(h,d){return 4&h.type?new NT(d,h,Lp(h,d)):null}let ug=(()=>{class h{}return h.__NG_ELEMENT_ID__=FT,h})();function FT(){return Yv(U(),Di())}const BT=ug,jv=class extends BT{constructor(d,b,C){super(),this._lContainer=d,this._hostTNode=b,this._hostLView=C}get element(){return Lp(this._hostTNode,this._hostLView)}get injector(){return new Sr(this._hostTNode,this._hostLView)}get parentInjector(){const d=ve(this._hostTNode,this._hostLView);if(Kr(d)){const b=ua(d,this._hostLView),C=Ia(d);return new Sr(b[1].data[C+8],b)}return new Sr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(d){const b=zv(this._lContainer);return null!==b&&b[d]||null}get length(){return this._lContainer.length-10}createEmbeddedView(d,b,C){const I=d.createEmbeddedView(b||{});return this.insert(I,C),I}createComponent(d,b,C,I,x){const Y=d&&!("function"==typeof d);let et;if(Y)et=b;else{const he=b||{};et=he.index,C=he.injector,I=he.projectableNodes,x=he.ngModuleRef}const _t=Y?d:new sm(_i(d)),Ot=C||this.parentInjector;if(!x&&null==_t.ngModule&&Ot){const he=Ot.get(Np,null);he&&(x=he)}const Wt=_t.create(Ot,I,void 0,x);return this.insert(Wt.hostView,et),Wt}insert(d,b){const C=d._lView,I=C[1];if(pr(C[3])){const Wt=this.indexOf(d);if(-1!==Wt)this.detach(Wt);else{const he=C[3],Le=new jv(he,he[6],he[3]);Le.detach(Le.indexOf(d))}}const x=this._adjustIndex(b),Y=this._lContainer;!function(h,d,b,C){const I=10+C,x=b.length;C>0&&(b[I-1][4]=d),C<x-10?(d[4]=b[I],zl(b,10+C,d)):(b.push(d),d[4]=null),d[3]=b;const Y=d[17];null!==Y&&b!==Y&&function(h,d){const b=h[9];d[16]!==d[3][3][16]&&(h[2]=!0),null===b?h[9]=[d]:b.push(d)}(Y,d);const et=d[19];null!==et&&et.insertView(h),d[2]|=128}(I,C,Y,x);const et=Dn(x,Y),_t=C[11],Ot=ce(_t,Y[7]);return null!==Ot&&function(h,d,b,C,I,x){C[0]=I,C[6]=d,wo(h,C,b,1,I,x)}(I,Y[6],_t,C,Ot,et),d.attachToViewContainerRef(),zl(cm(Y),x,d),d}move(d,b){return this.insert(d,b)}indexOf(d){const b=zv(this._lContainer);return null!==b?b.indexOf(d):-1}remove(d){const b=this._adjustIndex(d,-1),C=Oc(this._lContainer,b);C&&(Ys(cm(this._lContainer),b),wh(C[1],C))}detach(d){const b=this._adjustIndex(d,-1),C=Oc(this._lContainer,b);return C&&null!=Ys(cm(this._lContainer),b)?new Rf(C):null}_adjustIndex(d,b=0){return null==d?this.length+b:d}};function zv(h){return h[8]}function cm(h){return h[8]||(h[8]=[])}function Yv(h,d){let b;const C=d[h.index];if(pr(C))b=C;else{let I;if(8&h.type)I=Et(C);else{const x=d[11];I=x.createComment("");const Y=St(h,d);xt(x,ce(x,Y),I,function(h,d){return $n(h)?h.nextSibling(d):d.nextSibling}(x,Y),!1)}d[h.index]=b=lf(C,d,I,h),Pl(d,b)}return new jv(b,h,d)}class um{constructor(d){this.queryList=d,this.matches=null}clone(){return new um(this.queryList)}setDirty(){this.queryList.setDirty()}}class hm{constructor(d=[]){this.queries=d}createEmbeddedView(d){const b=d.queries;if(null!==b){const C=null!==d.contentQueries?d.contentQueries[0]:b.length,I=[];for(let x=0;x<C;x++){const Y=b.getByIndex(x);I.push(this.queries[Y.indexInDeclarationView].clone())}return new hm(I)}return null}insertView(d){this.dirtyQueriesWithMatches(d)}detachView(d){this.dirtyQueriesWithMatches(d)}dirtyQueriesWithMatches(d){for(let b=0;b<this.queries.length;b++)null!==eb(d,b).matches&&this.queries[b].setDirty()}}class Xv{constructor(d,b,C=null){this.predicate=d,this.flags=b,this.read=C}}class dm{constructor(d=[]){this.queries=d}elementStart(d,b){for(let C=0;C<this.queries.length;C++)this.queries[C].elementStart(d,b)}elementEnd(d){for(let b=0;b<this.queries.length;b++)this.queries[b].elementEnd(d)}embeddedTView(d){let b=null;for(let C=0;C<this.length;C++){const I=null!==b?b.length:0,x=this.getByIndex(C).embeddedTView(d,I);x&&(x.indexInDeclarationView=C,null!==b?b.push(x):b=[x])}return null!==b?new dm(b):null}template(d,b){for(let C=0;C<this.queries.length;C++)this.queries[C].template(d,b)}getByIndex(d){return this.queries[d]}get length(){return this.queries.length}track(d){this.queries.push(d)}}class pm{constructor(d,b=-1){this.metadata=d,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=b}elementStart(d,b){this.isApplyingToNode(b)&&this.matchTNode(d,b)}elementEnd(d){this._declarationNodeIndex===d.index&&(this._appliesToNextNode=!1)}template(d,b){this.elementStart(d,b)}embeddedTView(d,b){return this.isApplyingToNode(d)?(this.crossesNgTemplate=!0,this.addMatch(-d.index,b),new pm(this.metadata)):null}isApplyingToNode(d){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const b=this._declarationNodeIndex;let C=d.parent;for(;null!==C&&8&C.type&&C.index!==b;)C=C.parent;return b===(null!==C?C.index:-1)}return this._appliesToNextNode}matchTNode(d,b){const C=this.metadata.predicate;if(Array.isArray(C))for(let I=0;I<C.length;I++){const x=C[I];this.matchTNodeWithReadOption(d,b,UT(b,x)),this.matchTNodeWithReadOption(d,b,Ms(b,d,x,!1,!1))}else C===Mf?4&b.type&&this.matchTNodeWithReadOption(d,b,-1):this.matchTNodeWithReadOption(d,b,Ms(b,d,C,!1,!1))}matchTNodeWithReadOption(d,b,C){if(null!==C){const I=this.metadata.read;if(null!==I)if(I===wf||I===ug||I===Mf&&4&b.type)this.addMatch(b.index,-2);else{const x=Ms(b,d,I,!1,!1);null!==x&&this.addMatch(b.index,x)}else this.addMatch(b.index,C)}}addMatch(d,b){null===this.matches?this.matches=[d,b]:this.matches.push(d,b)}}function UT(h,d){const b=h.localNames;if(null!==b)for(let C=0;C<b.length;C+=2)if(b[C]===d)return b[C+1];return null}function WT(h,d,b,C){return-1===b?function(h,d){return 11&h.type?Lp(h,d):4&h.type?cg(h,d):null}(d,h):-2===b?function(h,d,b){return b===wf?Lp(d,h):b===Mf?cg(d,h):b===ug?Yv(d,h):void 0}(h,d,C):Dr(h,h[1],b,d)}function Kv(h,d,b,C){const I=d[19].queries[C];if(null===I.matches){const x=h.data,Y=b.matches,et=[];for(let _t=0;_t<Y.length;_t+=2){const Ot=Y[_t];et.push(Ot<0?null:WT(d,x[Ot],Y[_t+1],b.metadata.read))}I.matches=et}return I.matches}function fm(h,d,b,C){const I=h.queries.getByIndex(b),x=I.matches;if(null!==x){const Y=Kv(h,d,I,b);for(let et=0;et<x.length;et+=2){const _t=x[et];if(_t>0)C.push(Y[et/2]);else{const Ot=x[et+1],Wt=d[-_t];for(let he=10;he<Wt.length;he++){const Le=Wt[he];Le[17]===Le[3]&&fm(Le[1],Le,Ot,C)}if(null!==Wt[9]){const he=Wt[9];for(let Le=0;Le<he.length;Le++){const ii=he[Le];fm(ii[1],ii,Ot,C)}}}}}return C}function Jv(h){const d=Di(),b=Zn(),C=zr();jo(C+1);const I=eb(b,C);if(h.dirty&&Yn(d)===(2==(2&I.metadata.flags))){if(null===I.matches)h.reset([]);else{const x=I.crossesNgTemplate?fm(b,d,C,[]):Kv(b,d,I,C);h.reset(x,sT),h.notifyOnChanges()}return!0}return!1}function $v(h,d,b){const C=Zn();C.firstCreatePass&&(tb(C,new Xv(h,d,b),-1),2==(2&d)&&(C.staticViewQueries=!0)),qv(C,Di(),d)}function Zv(h,d,b,C){const I=Zn();if(I.firstCreatePass){const x=U();tb(I,new Xv(d,b,C),x.index),function(h,d){const b=h.contentQueries||(h.contentQueries=[]);d!==(b.length?b[b.length-1]:-1)&&b.push(h.queries.length-1,d)}(I,h),2==(2&b)&&(I.staticContentQueries=!0)}qv(I,Di(),b)}function Qv(){return h=Di(),d=zr(),h[19].queries[d].queryList;var h,d}function qv(h,d,b){const C=new lg(4==(4&b));pl(h,d,C,C.destroy),null===d[19]&&(d[19]=new hm),d[19].queries.push(new um(C))}function tb(h,d,b){null===h.queries&&(h.queries=new dm),h.queries.track(new pm(d,b))}function eb(h,d){return h.queries.getByIndex(d)}function ib(h,d){return cg(h,d)}function pg(...h){}const ym=new Mo("Application Initializer");let Bp=(()=>{class h{constructor(b){this.appInits=b,this.resolve=pg,this.reject=pg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((C,I)=>{this.resolve=C,this.reject=I})}runInitializers(){if(this.initialized)return;const b=[],C=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let I=0;I<this.appInits.length;I++){const x=this.appInits[I]();if(Bg(x))b.push(x);else if(a_(x)){const Y=new Promise((et,_t)=>{x.subscribe({complete:et,error:_t})});b.push(Y)}}Promise.all(b).then(()=>{C()}).catch(I=>{this.reject(I)}),0===b.length&&C(),this.initialized=!0}}return h.\u0275fac=function(b){return new(b||h)(gr(ym,8))},h.\u0275prov=pe({token:h,factory:h.\u0275fac}),h})();const bb=new Mo("AppId"),uC={provide:bb,useFactory:function(){return`${Em()}${Em()}${Em()}`},deps:[]};function Em(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yb=new Mo("Platform Initializer"),Eb=new Mo("Platform ID"),Tb=new Mo("appBootstrapListener");let Cb=(()=>{class h{log(b){console.log(b)}warn(b){console.warn(b)}}return h.\u0275fac=function(b){return new(b||h)},h.\u0275prov=pe({token:h,factory:h.\u0275fac}),h})();const fg=new Mo("LocaleId"),Sb=new Mo("DefaultCurrencyCode");class hC{constructor(d,b){this.ngModuleFactory=d,this.componentFactories=b}}let Tm=(()=>{class h{compileModuleSync(b){return new am(b)}compileModuleAsync(b){return Promise.resolve(this.compileModuleSync(b))}compileModuleAndAllComponentsSync(b){const C=this.compileModuleSync(b),x=pa(Mn(b).declarations).reduce((Y,et)=>{const _t=_i(et);return _t&&Y.push(new sm(_t)),Y},[]);return new hC(C,x)}compileModuleAndAllComponentsAsync(b){return Promise.resolve(this.compileModuleAndAllComponentsSync(b))}clearCache(){}clearCacheFor(b){}getModuleId(b){}}return h.\u0275fac=function(b){return new(b||h)},h.\u0275prov=pe({token:h,factory:h.\u0275fac}),h})();const pC=(()=>Promise.resolve(0))();function Cm(h){"undefined"==typeof Zone?pC.then(()=>{h&&h.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",h)}class Hl{constructor({enableLongStackTrace:d=!1,shouldCoalesceEventChangeDetection:b=!1,shouldCoalesceRunChangeDetection:C=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bu(!1),this.onMicrotaskEmpty=new bu(!1),this.onStable=new bu(!1),this.onError=new bu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const I=this;I._nesting=0,I._outer=I._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(I._inner=I._inner.fork(new Zone.TaskTrackingZoneSpec)),d&&Zone.longStackTraceZoneSpec&&(I._inner=I._inner.fork(Zone.longStackTraceZoneSpec)),I.shouldCoalesceEventChangeDetection=!C&&b,I.shouldCoalesceRunChangeDetection=C,I.lastRequestAnimationFrameId=-1,I.nativeRequestAnimationFrame=function(){let h=yi.requestAnimationFrame,d=yi.cancelAnimationFrame;if("undefined"!=typeof Zone&&h&&d){const b=h[Zone.__symbol__("OriginalDelegate")];b&&(h=b);const C=d[Zone.__symbol__("OriginalDelegate")];C&&(d=C)}return{nativeRequestAnimationFrame:h,nativeCancelAnimationFrame:d}}().nativeRequestAnimationFrame,function(h){const d=()=>{!function(h){h.isCheckStableRunning||-1!==h.lastRequestAnimationFrameId||(h.lastRequestAnimationFrameId=h.nativeRequestAnimationFrame.call(yi,()=>{h.fakeTopEventTask||(h.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{h.lastRequestAnimationFrameId=-1,wm(h),h.isCheckStableRunning=!0,Sm(h),h.isCheckStableRunning=!1},void 0,()=>{},()=>{})),h.fakeTopEventTask.invoke()}),wm(h))}(h)};h._inner=h._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(b,C,I,x,Y,et)=>{try{return wb(h),b.invokeTask(I,x,Y,et)}finally{(h.shouldCoalesceEventChangeDetection&&"eventTask"===x.type||h.shouldCoalesceRunChangeDetection)&&d(),Rb(h)}},onInvoke:(b,C,I,x,Y,et,_t)=>{try{return wb(h),b.invoke(I,x,Y,et,_t)}finally{h.shouldCoalesceRunChangeDetection&&d(),Rb(h)}},onHasTask:(b,C,I,x)=>{b.hasTask(I,x),C===I&&("microTask"==x.change?(h._hasPendingMicrotasks=x.microTask,wm(h),Sm(h)):"macroTask"==x.change&&(h.hasPendingMacrotasks=x.macroTask))},onHandleError:(b,C,I,x)=>(b.handleError(I,x),h.runOutsideAngular(()=>h.onError.emit(x)),!1)})}(I)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Hl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(d,b,C){return this._inner.run(d,b,C)}runTask(d,b,C,I){const x=this._inner,Y=x.scheduleEventTask("NgZoneEvent: "+I,d,gC,pg,pg);try{return x.runTask(Y,b,C)}finally{x.cancelTask(Y)}}runGuarded(d,b,C){return this._inner.runGuarded(d,b,C)}runOutsideAngular(d){return this._outer.run(d)}}const gC={};function Sm(h){if(0==h._nesting&&!h.hasPendingMicrotasks&&!h.isStable)try{h._nesting++,h.onMicrotaskEmpty.emit(null)}finally{if(h._nesting--,!h.hasPendingMicrotasks)try{h.runOutsideAngular(()=>h.onStable.emit(null))}finally{h.isStable=!0}}}function wm(h){h.hasPendingMicrotasks=!!(h._hasPendingMicrotasks||(h.shouldCoalesceEventChangeDetection||h.shouldCoalesceRunChangeDetection)&&-1!==h.lastRequestAnimationFrameId)}function wb(h){h._nesting++,h.isStable&&(h.isStable=!1,h.onUnstable.emit(null))}function Rb(h){h._nesting--,Sm(h)}class vC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bu,this.onMicrotaskEmpty=new bu,this.onStable=new bu,this.onError=new bu}run(d,b,C){return d.apply(b,C)}runGuarded(d,b,C){return d.apply(b,C)}runOutsideAngular(d){return d()}runTask(d,b,C,I){return d.apply(b,C)}}let Db=(()=>{class h{constructor(b){this._ngZone=b,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),b.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hl.assertNotInAngularZone(),Cm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cm(()=>{for(;0!==this._callbacks.length;){let b=this._callbacks.pop();clearTimeout(b.timeoutId),b.doneCb(this._didWork)}this._didWork=!1});else{let b=this.getPendingTasks();this._callbacks=this._callbacks.filter(C=>!C.updateCb||!C.updateCb(b)||(clearTimeout(C.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(b=>({source:b.source,creationLocation:b.creationLocation,data:b.data})):[]}addCallback(b,C,I){let x=-1;C&&C>0&&(x=setTimeout(()=>{this._callbacks=this._callbacks.filter(Y=>Y.timeoutId!==x),b(this._didWork,this.getPendingTasks())},C)),this._callbacks.push({doneCb:b,timeoutId:x,updateCb:I})}whenStable(b,C,I){if(I&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(b,C,I),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(b,C,I){return[]}}return h.\u0275fac=function(b){return new(b||h)(gr(Hl))},h.\u0275prov=pe({token:h,factory:h.\u0275fac}),h})(),Ib=(()=>{class h{constructor(){this._applications=new Map,Rm.addToWindow(this)}registerApplication(b,C){this._applications.set(b,C)}unregisterApplication(b){this._applications.delete(b)}unregisterAllApplications(){this._applications.clear()}getTestability(b){return this._applications.get(b)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(b,C=!0){return Rm.findTestabilityInTree(this,b,C)}}return h.\u0275fac=function(b){return new(b||h)},h.\u0275prov=pe({token:h,factory:h.\u0275fac}),h})();class bC{addToWindow(d){}findTestabilityInTree(d,b,C){return null}}function yC(h){Rm=h}let Gc,Rm=new bC;const Mb=new Mo("AllowMultipleToken");class SC{constructor(d,b){this.name=d,this.token=b}}function Ab(h,d,b=[]){const C=`Platform: ${d}`,I=new Mo(C);return(x=[])=>{let Y=Ob();if(!Y||Y.injector.get(Mb,!1))if(h)h(b.concat(x).concat({provide:I,useValue:!0}));else{const et=b.concat(x).concat({provide:I,useValue:!0},{provide:Ad,useValue:"platform"});!function(h){if(Gc&&!Gc.destroyed&&!Gc.injector.get(Mb,!1))throw new Z("400","");Gc=h.get(xb);const d=h.get(yb,null);d&&d.forEach(b=>b())}(ut.create({providers:et,name:C}))}return function(h){const d=Ob();if(!d)throw new Z("401","");return d}()}}function Ob(){return Gc&&!Gc.destroyed?Gc:null}let xb=(()=>{class h{constructor(b){this._injector=b,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(b,C){const et=function(h,d){let b;return b="noop"===h?new vC:("zone.js"===h?void 0:h)||new Hl({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==d?void 0:d.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==d?void 0:d.ngZoneRunCoalescing)}),b}(C?C.ngZone:void 0,{ngZoneEventCoalescing:C&&C.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:C&&C.ngZoneRunCoalescing||!1}),_t=[{provide:Hl,useValue:et}];return et.run(()=>{const Ot=ut.create({providers:_t,parent:this.injector,name:b.moduleType.name}),Wt=b.create(Ot),he=Wt.injector.get(ou,null);if(!he)throw new Z("402","");return et.runOutsideAngular(()=>{const Le=et.onError.subscribe({next:ii=>{he.handleError(ii)}});Wt.onDestroy(()=>{Dm(this._modules,Wt),Le.unsubscribe()})}),function(h,d,b){try{const C=b();return Bg(C)?C.catch(I=>{throw d.runOutsideAngular(()=>h.handleError(I)),I}):C}catch(C){throw d.runOutsideAngular(()=>h.handleError(C)),C}}(he,et,()=>{const Le=Wt.injector.get(Bp);return Le.runInitializers(),Le.donePromise.then(()=>(function(h){Be(h,"Expected localeId to be defined"),"string"==typeof h&&(Q_=h.toLowerCase().replace(/_/g,"-"))}(Wt.injector.get(fg,ig)||ig),this._moduleDoBootstrap(Wt),Wt))})})}bootstrapModule(b,C=[]){const I=kb({},C);return function(h,d,b){const C=new am(b);return Promise.resolve(C)}(0,0,b).then(x=>this.bootstrapModuleFactory(x,I))}_moduleDoBootstrap(b){const C=b.injector.get(Of);if(b._bootstrapComponents.length>0)b._bootstrapComponents.forEach(I=>C.bootstrap(I));else{if(!b.instance.ngDoBootstrap)throw new Z("403","");b.instance.ngDoBootstrap(C)}this._modules.push(b)}onDestroy(b){this._destroyListeners.push(b)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Z("404","");this._modules.slice().forEach(b=>b.destroy()),this._destroyListeners.forEach(b=>b()),this._destroyed=!0}get destroyed(){return this._destroyed}}return h.\u0275fac=function(b){return new(b||h)(gr(ut))},h.\u0275prov=pe({token:h,factory:h.\u0275fac}),h})();function kb(h,d){return Array.isArray(d)?d.reduce(kb,h):Object.assign(Object.assign({},h),d)}let Of=(()=>{class h{constructor(b,C,I,x,Y){this._zone=b,this._injector=C,this._exceptionHandler=I,this._componentFactoryResolver=x,this._initStatus=Y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const et=new e.y(Ot=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Ot.next(this._stable),Ot.complete()})}),_t=new e.y(Ot=>{let Wt;this._zone.runOutsideAngular(()=>{Wt=this._zone.onStable.subscribe(()=>{Hl.assertNotInAngularZone(),Cm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Ot.next(!0))})})});const he=this._zone.onUnstable.subscribe(()=>{Hl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Ot.next(!1)}))});return()=>{Wt.unsubscribe(),he.unsubscribe()}});this.isStable=(0,t.T)(et,_t.pipe((0,n.B)()))}bootstrap(b,C){if(!this._initStatus.done)throw new Z("405","");let I;I=b instanceof Sv?b:this._componentFactoryResolver.resolveComponentFactory(b),this.componentTypes.push(I.componentType);const x=function(h){return h.isBoundToModule}(I)?void 0:this._injector.get(Np),et=I.create(ut.NULL,[],C||I.selector,x),_t=et.location.nativeElement,Ot=et.injector.get(Db,null),Wt=Ot&&et.injector.get(Ib);return Ot&&Wt&&Wt.registerApplication(_t,Ot),et.onDestroy(()=>{this.detachView(et.hostView),Dm(this.components,et),Wt&&Wt.unregisterApplication(_t)}),this._loadComponent(et),et}tick(){if(this._runningTick)throw new Z("101","");try{this._runningTick=!0;for(let b of this._views)b.detectChanges()}catch(b){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(b))}finally{this._runningTick=!1}}attachView(b){const C=b;this._views.push(C),C.attachToAppRef(this)}detachView(b){const C=b;Dm(this._views,C),C.detachFromAppRef()}_loadComponent(b){this.attachView(b.hostView),this.tick(),this.components.push(b),this._injector.get(Tb,[]).concat(this._bootstrapListeners).forEach(I=>I(b))}ngOnDestroy(){this._views.slice().forEach(b=>b.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return h.\u0275fac=function(b){return new(b||h)(gr(Hl),gr(ut),gr(ou),gr(Sf),gr(Bp))},h.\u0275prov=pe({token:h,factory:h.\u0275fac}),h})();function Dm(h,d){const b=h.indexOf(d);b>-1&&h.splice(b,1)}let Nb=!0;function AC(){Nb=!1}let OC=(()=>{class h{}return h.__NG_ELEMENT_ID__=xC,h})();function xC(h){return function(h,d,b){if(es(h)&&!b){const C=cn(h.index,d);return new Rf(C,C)}return 47&h.type?new Rf(d[16],d):null}(U(),Di(),16==(16&h))}class Gb{constructor(){}supports(d){return Uh(d)}create(d){return new HC(d)}}const BC=(h,d)=>d;class HC{constructor(d){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=d||BC}forEachItem(d){let b;for(b=this._itHead;null!==b;b=b._next)d(b)}forEachOperation(d){let b=this._itHead,C=this._removalsHead,I=0,x=null;for(;b||C;){const Y=!C||b&&b.currentIndex<jb(C,I,x)?b:C,et=jb(Y,I,x),_t=Y.currentIndex;if(Y===C)I--,C=C._nextRemoved;else if(b=b._next,null==Y.previousIndex)I++;else{x||(x=[]);const Ot=et-I,Wt=_t-I;if(Ot!=Wt){for(let Le=0;Le<Ot;Le++){const ii=Le<x.length?x[Le]:x[Le]=0,wi=ii+Le;Wt<=wi&&wi<Ot&&(x[Le]=ii+1)}x[Y.previousIndex]=Wt-Ot}}et!==_t&&d(Y,et,_t)}}forEachPreviousItem(d){let b;for(b=this._previousItHead;null!==b;b=b._nextPrevious)d(b)}forEachAddedItem(d){let b;for(b=this._additionsHead;null!==b;b=b._nextAdded)d(b)}forEachMovedItem(d){let b;for(b=this._movesHead;null!==b;b=b._nextMoved)d(b)}forEachRemovedItem(d){let b;for(b=this._removalsHead;null!==b;b=b._nextRemoved)d(b)}forEachIdentityChange(d){let b;for(b=this._identityChangesHead;null!==b;b=b._nextIdentityChange)d(b)}diff(d){if(null==d&&(d=[]),!Uh(d))throw new Error(`Error trying to diff '${c(d)}'. Only arrays and iterables are allowed`);return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let I,x,Y,b=this._itHead,C=!1;if(Array.isArray(d)){this.length=d.length;for(let et=0;et<this.length;et++)x=d[et],Y=this._trackByFn(et,x),null!==b&&Object.is(b.trackById,Y)?(C&&(b=this._verifyReinsertion(b,x,Y,et)),Object.is(b.item,x)||this._addIdentityChange(b,x)):(b=this._mismatch(b,x,Y,et),C=!0),b=b._next}else I=0,function(h,d){if(Array.isArray(h))for(let b=0;b<h.length;b++)d(h[b]);else{const b=h[Vh()]();let C;for(;!(C=b.next()).done;)d(C.value)}}(d,et=>{Y=this._trackByFn(I,et),null!==b&&Object.is(b.trackById,Y)?(C&&(b=this._verifyReinsertion(b,et,Y,I)),Object.is(b.item,et)||this._addIdentityChange(b,et)):(b=this._mismatch(b,et,Y,I),C=!0),b=b._next,I++}),this.length=I;return this._truncate(b),this.collection=d,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let d;for(d=this._previousItHead=this._itHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._additionsHead;null!==d;d=d._nextAdded)d.previousIndex=d.currentIndex;for(this._additionsHead=this._additionsTail=null,d=this._movesHead;null!==d;d=d._nextMoved)d.previousIndex=d.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(d,b,C,I){let x;return null===d?x=this._itTail:(x=d._prev,this._remove(d)),null!==(d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(C,null))?(Object.is(d.item,b)||this._addIdentityChange(d,b),this._reinsertAfter(d,x,I)):null!==(d=null===this._linkedRecords?null:this._linkedRecords.get(C,I))?(Object.is(d.item,b)||this._addIdentityChange(d,b),this._moveAfter(d,x,I)):d=this._addAfter(new VC(b,C),x,I),d}_verifyReinsertion(d,b,C,I){let x=null===this._unlinkedRecords?null:this._unlinkedRecords.get(C,null);return null!==x?d=this._reinsertAfter(x,d._prev,I):d.currentIndex!=I&&(d.currentIndex=I,this._addToMoves(d,I)),d}_truncate(d){for(;null!==d;){const b=d._next;this._addToRemovals(this._unlink(d)),d=b}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(d,b,C){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(d);const I=d._prevRemoved,x=d._nextRemoved;return null===I?this._removalsHead=x:I._nextRemoved=x,null===x?this._removalsTail=I:x._prevRemoved=I,this._insertAfter(d,b,C),this._addToMoves(d,C),d}_moveAfter(d,b,C){return this._unlink(d),this._insertAfter(d,b,C),this._addToMoves(d,C),d}_addAfter(d,b,C){return this._insertAfter(d,b,C),this._additionsTail=null===this._additionsTail?this._additionsHead=d:this._additionsTail._nextAdded=d,d}_insertAfter(d,b,C){const I=null===b?this._itHead:b._next;return d._next=I,d._prev=b,null===I?this._itTail=d:I._prev=d,null===b?this._itHead=d:b._next=d,null===this._linkedRecords&&(this._linkedRecords=new Wb),this._linkedRecords.put(d),d.currentIndex=C,d}_remove(d){return this._addToRemovals(this._unlink(d))}_unlink(d){null!==this._linkedRecords&&this._linkedRecords.remove(d);const b=d._prev,C=d._next;return null===b?this._itHead=C:b._next=C,null===C?this._itTail=b:C._prev=b,d}_addToMoves(d,b){return d.previousIndex===b||(this._movesTail=null===this._movesTail?this._movesHead=d:this._movesTail._nextMoved=d),d}_addToRemovals(d){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Wb),this._unlinkedRecords.put(d),d.currentIndex=null,d._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=d,d._prevRemoved=null):(d._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=d),d}_addIdentityChange(d,b){return d.item=b,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=d:this._identityChangesTail._nextIdentityChange=d,d}}class VC{constructor(d,b){this.item=d,this.trackById=b,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class UC{constructor(){this._head=null,this._tail=null}add(d){null===this._head?(this._head=this._tail=d,d._nextDup=null,d._prevDup=null):(this._tail._nextDup=d,d._prevDup=this._tail,d._nextDup=null,this._tail=d)}get(d,b){let C;for(C=this._head;null!==C;C=C._nextDup)if((null===b||b<=C.currentIndex)&&Object.is(C.trackById,d))return C;return null}remove(d){const b=d._prevDup,C=d._nextDup;return null===b?this._head=C:b._nextDup=C,null===C?this._tail=b:C._prevDup=b,null===this._head}}class Wb{constructor(){this.map=new Map}put(d){const b=d.trackById;let C=this.map.get(b);C||(C=new UC,this.map.set(b,C)),C.add(d)}get(d,b){const I=this.map.get(d);return I?I.get(d,b):null}remove(d){const b=d.trackById;return this.map.get(b).remove(d)&&this.map.delete(b),d}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jb(h,d,b){const C=h.previousIndex;if(null===C)return C;let I=0;return b&&C<b.length&&(I=b[C]),C+d+I}class zb{constructor(){}supports(d){return d instanceof Map||Rp(d)}create(){return new GC}}class GC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(d){let b;for(b=this._mapHead;null!==b;b=b._next)d(b)}forEachPreviousItem(d){let b;for(b=this._previousMapHead;null!==b;b=b._nextPrevious)d(b)}forEachChangedItem(d){let b;for(b=this._changesHead;null!==b;b=b._nextChanged)d(b)}forEachAddedItem(d){let b;for(b=this._additionsHead;null!==b;b=b._nextAdded)d(b)}forEachRemovedItem(d){let b;for(b=this._removalsHead;null!==b;b=b._nextRemoved)d(b)}diff(d){if(d){if(!(d instanceof Map||Rp(d)))throw new Error(`Error trying to diff '${c(d)}'. Only maps and objects are allowed`)}else d=new Map;return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let b=this._mapHead;if(this._appendAfter=null,this._forEach(d,(C,I)=>{if(b&&b.key===I)this._maybeAddToChanges(b,C),this._appendAfter=b,b=b._next;else{const x=this._getOrCreateRecordForKey(I,C);b=this._insertBeforeOrAppend(b,x)}}),b){b._prev&&(b._prev._next=null),this._removalsHead=b;for(let C=b;null!==C;C=C._nextRemoved)C===this._mapHead&&(this._mapHead=null),this._records.delete(C.key),C._nextRemoved=C._next,C.previousValue=C.currentValue,C.currentValue=null,C._prev=null,C._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(d,b){if(d){const C=d._prev;return b._next=d,b._prev=C,d._prev=b,C&&(C._next=b),d===this._mapHead&&(this._mapHead=b),this._appendAfter=d,d}return this._appendAfter?(this._appendAfter._next=b,b._prev=this._appendAfter):this._mapHead=b,this._appendAfter=b,null}_getOrCreateRecordForKey(d,b){if(this._records.has(d)){const I=this._records.get(d);this._maybeAddToChanges(I,b);const x=I._prev,Y=I._next;return x&&(x._next=Y),Y&&(Y._prev=x),I._next=null,I._prev=null,I}const C=new WC(d);return this._records.set(d,C),C.currentValue=b,this._addToAdditions(C),C}_reset(){if(this.isDirty){let d;for(this._previousMapHead=this._mapHead,d=this._previousMapHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._changesHead;null!==d;d=d._nextChanged)d.previousValue=d.currentValue;for(d=this._additionsHead;null!=d;d=d._nextAdded)d.previousValue=d.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(d,b){Object.is(b,d.currentValue)||(d.previousValue=d.currentValue,d.currentValue=b,this._addToChanges(d))}_addToAdditions(d){null===this._additionsHead?this._additionsHead=this._additionsTail=d:(this._additionsTail._nextAdded=d,this._additionsTail=d)}_addToChanges(d){null===this._changesHead?this._changesHead=this._changesTail=d:(this._changesTail._nextChanged=d,this._changesTail=d)}_forEach(d,b){d instanceof Map?d.forEach(b):Object.keys(d).forEach(C=>b(d[C],C))}}class WC{constructor(d){this.key=d,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Yb(){return new mg([new Gb])}let mg=(()=>{class h{constructor(b){this.factories=b}static create(b,C){if(null!=C){const I=C.factories.slice();b=b.concat(I)}return new h(b)}static extend(b){return{provide:h,useFactory:C=>h.create(b,C||Yb()),deps:[[h,new La,new Ca]]}}find(b){const C=this.factories.find(I=>I.supports(b));if(null!=C)return C;throw new Error(`Cannot find a differ supporting object '${b}' of type '${function(h){return h.name||typeof h}(b)}'`)}}return h.\u0275prov=pe({token:h,providedIn:"root",factory:Yb}),h})();function Xb(){return new _g([new zb])}let _g=(()=>{class h{constructor(b){this.factories=b}static create(b,C){if(C){const I=C.factories.slice();b=b.concat(I)}return new h(b)}static extend(b){return{provide:h,useFactory:C=>h.create(b,C||Xb()),deps:[[h,new La,new Ca]]}}find(b){const C=this.factories.find(I=>I.supports(b));if(C)return C;throw new Error(`Cannot find a differ supporting object '${b}'`)}}return h.\u0275prov=pe({token:h,providedIn:"root",factory:Xb}),h})();const zC=[new zb],XC=new mg([new Gb]),KC=new _g(zC),JC=Ab(null,"core",[{provide:Eb,useValue:"unknown"},{provide:xb,deps:[ut]},{provide:Ib,deps:[]},{provide:Cb,deps:[]}]),tS=[{provide:Of,useClass:Of,deps:[Hl,ut,ou,Sf,Bp]},{provide:fT,deps:[Hl],useFactory:function(h){let d=[];return h.onStable.subscribe(()=>{for(;d.length;)d.pop()()}),function(b){d.push(b)}}},{provide:Bp,useClass:Bp,deps:[[new Ca,ym]]},{provide:Tm,useClass:Tm,deps:[]},uC,{provide:mg,useFactory:function(){return XC},deps:[]},{provide:_g,useFactory:function(){return KC},deps:[]},{provide:fg,useFactory:function(h){return h||"undefined"!=typeof $localize&&$localize.locale||ig},deps:[[new ea(fg),new Ca,new La]]},{provide:Sb,useValue:"USD"}];let iS=(()=>{class h{constructor(b){}}return h.\u0275fac=function(b){return new(b||h)(gr(Of))},h.\u0275mod=Ln({type:h}),h.\u0275inj=Ve({providers:tS}),h})()},93075:(L,W,m)=>{"use strict";m.d(W,{Zs:()=>Wr,sg:()=>Uo,u5:()=>Hs,Cf:()=>it,JU:()=>c,a5:()=>Xt,JJ:()=>Ut,F:()=>Ji,On:()=>hr,kI:()=>ct});var y=m(5e3),p=m(69808),e=m(32076),t=m(4128),n=m(54004);let o=(()=>{class K{constructor(j,St){this._renderer=j,this._elementRef=St,this.onChange=ge=>{},this.onTouched=()=>{}}setProperty(j,St){this._renderer.setProperty(this._elementRef.nativeElement,j,St)}registerOnTouched(j){this.onTouched=j}registerOnChange(j){this.onChange=j}setDisabledState(j){this.setProperty("disabled",j)}}return K.\u0275fac=function(j){return new(j||K)(y.Y36(y.Qsj),y.Y36(y.SBq))},K.\u0275dir=y.lG2({type:K}),K})(),s=(()=>{class K extends o{}return K.\u0275fac=function(){let F;return function(St){return(F||(F=y.n5z(K)))(St||K)}}(),K.\u0275dir=y.lG2({type:K,features:[y.qOj]}),K})();const c=new y.OlP("NgValueAccessor"),O={provide:c,useExisting:(0,y.Gpc)(()=>G),multi:!0},V=new y.OlP("CompositionEventMode");let G=(()=>{class K extends o{constructor(j,St,ge){super(j,St),this._compositionMode=ge,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const K=(0,p.q)()?(0,p.q)().getUserAgent():"";return/android (\d+)/.test(K.toLowerCase())}())}writeValue(j){this.setProperty("value",null==j?"":j)}_handleInput(j){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(j)}_compositionStart(){this._composing=!0}_compositionEnd(j){this._composing=!1,this._compositionMode&&this.onChange(j)}}return K.\u0275fac=function(j){return new(j||K)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(V,8))},K.\u0275dir=y.lG2({type:K,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(j,St){1&j&&y.NdJ("input",function(ni){return St._handleInput(ni.target.value)})("blur",function(){return St.onTouched()})("compositionstart",function(){return St._compositionStart()})("compositionend",function(ni){return St._compositionEnd(ni.target.value)})},features:[y._Bn([O]),y.qOj]}),K})();function Z(K){return null==K||0===K.length}function vt(K){return null!=K&&"number"==typeof K.length}const it=new y.OlP("NgValidators"),ot=new y.OlP("NgAsyncValidators"),wt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ct{static min(F){return K=F,F=>{if(Z(F.value)||Z(K))return null;const j=parseFloat(F.value);return!isNaN(j)&&j<K?{min:{min:K,actual:F.value}}:null};var K}static max(F){return K=F,F=>{if(Z(F.value)||Z(K))return null;const j=parseFloat(F.value);return!isNaN(j)&&j>K?{max:{max:K,actual:F.value}}:null};var K}static required(F){return at(F)}static requiredTrue(F){return bt(F)}static email(F){return Z((K=F).value)||wt.test(K.value)?null:{email:!0};var K}static minLength(F){return K=F,F=>Z(F.value)||!vt(F.value)?null:F.value.length<K?{minlength:{requiredLength:K,actualLength:F.value.length}}:null;var K}static maxLength(F){return K=F,F=>vt(F.value)&&F.value.length>K?{maxlength:{requiredLength:K,actualLength:F.value.length}}:null;var K}static pattern(F){return function(K){if(!K)return nt;let F,j;return"string"==typeof K?(j="","^"!==K.charAt(0)&&(j+="^"),j+=K,"$"!==K.charAt(K.length-1)&&(j+="$"),F=new RegExp(j)):(j=K.toString(),F=K),St=>{if(Z(St.value))return null;const ge=St.value;return F.test(ge)?null:{pattern:{requiredPattern:j,actualValue:ge}}}}(F)}static nullValidator(F){return null}static compose(F){return me(F)}static composeAsync(F){return Ge(F)}}function at(K){return Z(K.value)?{required:!0}:null}function bt(K){return!0===K.value?null:{required:!0}}function nt(K){return null}function st(K){return null!=K}function Gt(K){const F=(0,y.QGY)(K)?(0,e.D)(K):K;return(0,y.CqO)(F),F}function It(K){let F={};return K.forEach(j=>{F=null!=j?Object.assign(Object.assign({},F),j):F}),0===Object.keys(F).length?null:F}function Vt(K,F){return F.map(j=>j(K))}function Ze(K){return K.map(F=>function(K){return!K.validate}(F)?F:j=>F.validate(j))}function me(K){if(!K)return null;const F=K.filter(st);return 0==F.length?null:function(j){return It(Vt(j,F))}}function Be(K){return null!=K?me(Ze(K)):null}function Ge(K){if(!K)return null;const F=K.filter(st);return 0==F.length?null:function(j){const St=Vt(j,F).map(Gt);return(0,t.D)(St).pipe((0,n.U)(It))}}function si(K){return null!=K?Ge(Ze(K)):null}function Qe(K,F){return null===K?[F]:Array.isArray(K)?[...K,F]:[K,F]}function Ne(K){return K._rawValidators}function pe(K){return K._rawAsyncValidators}function we(K){return K?Array.isArray(K)?K:[K]:[]}function Ve(K,F){return Array.isArray(K)?K.includes(F):K===F}function ui(K,F){const j=we(F);return we(K).forEach(ge=>{Ve(j,ge)||j.push(ge)}),j}function Ke(K,F){return we(F).filter(j=>!Ve(K,j))}class be{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(F){this._rawValidators=F||[],this._composedValidatorFn=Be(this._rawValidators)}_setAsyncValidators(F){this._rawAsyncValidators=F||[],this._composedAsyncValidatorFn=si(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(F){this._onDestroyCallbacks.push(F)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(F=>F()),this._onDestroyCallbacks=[]}reset(F){this.control&&this.control.reset(F)}hasError(F,j){return!!this.control&&this.control.hasError(F,j)}getError(F,j){return this.control?this.control.getError(F,j):null}}class Xt extends be{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class re extends be{get formDirective(){return null}get path(){return null}}let Ut=(()=>{class K extends class{constructor(F){this._cd=F}is(F){var j,St,ge;return"submitted"===F?!!(null===(j=this._cd)||void 0===j?void 0:j.submitted):!!(null===(ge=null===(St=this._cd)||void 0===St?void 0:St.control)||void 0===ge?void 0:ge[F])}}{constructor(j){super(j)}}return K.\u0275fac=function(j){return new(j||K)(y.Y36(Xt,2))},K.\u0275dir=y.lG2({type:K,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(j,St){2&j&&y.ekj("ng-untouched",St.is("untouched"))("ng-touched",St.is("touched"))("ng-pristine",St.is("pristine"))("ng-dirty",St.is("dirty"))("ng-valid",St.is("valid"))("ng-invalid",St.is("invalid"))("ng-pending",St.is("pending"))},features:[y.qOj]}),K})();function bi(K,F){ae(K,F),F.valueAccessor.writeValue(K.value),function(K,F){F.valueAccessor.registerOnChange(j=>{K._pendingValue=j,K._pendingChange=!0,K._pendingDirty=!0,"change"===K.updateOn&&Oe(K,F)})}(K,F),function(K,F){const j=(St,ge)=>{F.valueAccessor.writeValue(St),ge&&F.viewToModelUpdate(St)};K.registerOnChange(j),F._registerOnDestroy(()=>{K._unregisterOnChange(j)})}(K,F),function(K,F){F.valueAccessor.registerOnTouched(()=>{K._pendingTouched=!0,"blur"===K.updateOn&&K._pendingChange&&Oe(K,F),"submit"!==K.updateOn&&K.markAsTouched()})}(K,F),function(K,F){if(F.valueAccessor.setDisabledState){const j=St=>{F.valueAccessor.setDisabledState(St)};K.registerOnDisabledChange(j),F._registerOnDestroy(()=>{K._unregisterOnDisabledChange(j)})}}(K,F)}function yi(K,F,j=!0){const St=()=>{};F.valueAccessor&&(F.valueAccessor.registerOnChange(St),F.valueAccessor.registerOnTouched(St)),Pe(K,F),K&&(F._invokeOnDestroyCallbacks(),K._registerOnCollectionChange(()=>{}))}function $e(K,F){K.forEach(j=>{j.registerOnValidatorChange&&j.registerOnValidatorChange(F)})}function ae(K,F){const j=Ne(K);null!==F.validator?K.setValidators(Qe(j,F.validator)):"function"==typeof j&&K.setValidators([j]);const St=pe(K);null!==F.asyncValidator?K.setAsyncValidators(Qe(St,F.asyncValidator)):"function"==typeof St&&K.setAsyncValidators([St]);const ge=()=>K.updateValueAndValidity();$e(F._rawValidators,ge),$e(F._rawAsyncValidators,ge)}function Pe(K,F){let j=!1;if(null!==K){if(null!==F.validator){const ge=Ne(K);if(Array.isArray(ge)&&ge.length>0){const ni=ge.filter(ki=>ki!==F.validator);ni.length!==ge.length&&(j=!0,K.setValidators(ni))}}if(null!==F.asyncValidator){const ge=pe(K);if(Array.isArray(ge)&&ge.length>0){const ni=ge.filter(ki=>ki!==F.asyncValidator);ni.length!==ge.length&&(j=!0,K.setAsyncValidators(ni))}}}const St=()=>{};return $e(F._rawValidators,St),$e(F._rawAsyncValidators,St),j}function Oe(K,F){K._pendingDirty&&K.markAsDirty(),K.setValue(K._pendingValue,{emitModelToViewChange:!1}),F.viewToModelUpdate(K._pendingValue),K._pendingChange=!1}function Jt(K,F){ae(K,F)}function Hi(K,F){K._syncPendingControls(),F.forEach(j=>{const St=j.control;"submit"===St.updateOn&&St._pendingChange&&(j.viewToModelUpdate(St._pendingValue),St._pendingChange=!1)})}function Ln(K,F){const j=K.indexOf(F);j>-1&&K.splice(j,1)}const Re="VALID",fe="INVALID",ze="PENDING",_i="DISABLED";function hn(K){return(ar(K)?K.validators:K)||null}function Mn(K){return Array.isArray(K)?Be(K):K||null}function Nn(K,F){return(ar(F)?F.asyncValidators:K)||null}function mr(K){return Array.isArray(K)?si(K):K||null}function ar(K){return null!=K&&!Array.isArray(K)&&"object"==typeof K}class Ur{constructor(F,j){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=F,this._rawAsyncValidators=j,this._composedValidatorFn=Mn(this._rawValidators),this._composedAsyncValidatorFn=mr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(F){this._rawValidators=this._composedValidatorFn=F}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(F){this._rawAsyncValidators=this._composedAsyncValidatorFn=F}get parent(){return this._parent}get valid(){return this.status===Re}get invalid(){return this.status===fe}get pending(){return this.status==ze}get disabled(){return this.status===_i}get enabled(){return this.status!==_i}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(F){this._rawValidators=F,this._composedValidatorFn=Mn(F)}setAsyncValidators(F){this._rawAsyncValidators=F,this._composedAsyncValidatorFn=mr(F)}addValidators(F){this.setValidators(ui(F,this._rawValidators))}addAsyncValidators(F){this.setAsyncValidators(ui(F,this._rawAsyncValidators))}removeValidators(F){this.setValidators(Ke(F,this._rawValidators))}removeAsyncValidators(F){this.setAsyncValidators(Ke(F,this._rawAsyncValidators))}hasValidator(F){return Ve(this._rawValidators,F)}hasAsyncValidator(F){return Ve(this._rawAsyncValidators,F)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(F={}){this.touched=!0,this._parent&&!F.onlySelf&&this._parent.markAsTouched(F)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(F=>F.markAllAsTouched())}markAsUntouched(F={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(j=>{j.markAsUntouched({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}markAsDirty(F={}){this.pristine=!1,this._parent&&!F.onlySelf&&this._parent.markAsDirty(F)}markAsPristine(F={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(j=>{j.markAsPristine({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}markAsPending(F={}){this.status=ze,!1!==F.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!F.onlySelf&&this._parent.markAsPending(F)}disable(F={}){const j=this._parentMarkedDirty(F.onlySelf);this.status=_i,this.errors=null,this._forEachChild(St=>{St.disable(Object.assign(Object.assign({},F),{onlySelf:!0}))}),this._updateValue(),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},F),{skipPristineCheck:j})),this._onDisabledChange.forEach(St=>St(!0))}enable(F={}){const j=this._parentMarkedDirty(F.onlySelf);this.status=Re,this._forEachChild(St=>{St.enable(Object.assign(Object.assign({},F),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},F),{skipPristineCheck:j})),this._onDisabledChange.forEach(St=>St(!1))}_updateAncestors(F){this._parent&&!F.onlySelf&&(this._parent.updateValueAndValidity(F),F.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(F){this._parent=F}updateValueAndValidity(F={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Re||this.status===ze)&&this._runAsyncValidator(F.emitEvent)),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!F.onlySelf&&this._parent.updateValueAndValidity(F)}_updateTreeValidity(F={emitEvent:!0}){this._forEachChild(j=>j._updateTreeValidity(F)),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_i:Re}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(F){if(this.asyncValidator){this.status=ze,this._hasOwnPendingAsyncValidator=!0;const j=Gt(this.asyncValidator(this));this._asyncValidationSubscription=j.subscribe(St=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(St,{emitEvent:F})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(F,j={}){this.errors=F,this._updateControlsErrors(!1!==j.emitEvent)}get(F){return function(K,F,j){if(null==F||(Array.isArray(F)||(F=F.split(".")),Array.isArray(F)&&0===F.length))return null;let St=K;return F.forEach(ge=>{St=St instanceof eo?St.controls.hasOwnProperty(ge)?St.controls[ge]:null:St instanceof Ar&&St.at(ge)||null}),St}(this,F)}getError(F,j){const St=j?this.get(j):this;return St&&St.errors?St.errors[F]:null}hasError(F,j){return!!this.getError(F,j)}get root(){let F=this;for(;F._parent;)F=F._parent;return F}_updateControlsErrors(F){this.status=this._calculateStatus(),F&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(F)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?_i:this.errors?fe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ze)?ze:this._anyControlsHaveStatus(fe)?fe:Re}_anyControlsHaveStatus(F){return this._anyControls(j=>j.status===F)}_anyControlsDirty(){return this._anyControls(F=>F.dirty)}_anyControlsTouched(){return this._anyControls(F=>F.touched)}_updatePristine(F={}){this.pristine=!this._anyControlsDirty(),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}_updateTouched(F={}){this.touched=this._anyControlsTouched(),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}_isBoxedValue(F){return"object"==typeof F&&null!==F&&2===Object.keys(F).length&&"value"in F&&"disabled"in F}_registerOnCollectionChange(F){this._onCollectionChange=F}_setUpdateStrategy(F){ar(F)&&null!=F.updateOn&&(this._updateOn=F.updateOn)}_parentMarkedDirty(F){return!F&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class tr extends Ur{constructor(F=null,j,St){super(hn(j),Nn(St,j)),this._onChange=[],this._applyFormState(F),this._setUpdateStrategy(j),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(F,j={}){this.value=this._pendingValue=F,this._onChange.length&&!1!==j.emitModelToViewChange&&this._onChange.forEach(St=>St(this.value,!1!==j.emitViewToModelChange)),this.updateValueAndValidity(j)}patchValue(F,j={}){this.setValue(F,j)}reset(F=null,j={}){this._applyFormState(F),this.markAsPristine(j),this.markAsUntouched(j),this.setValue(this.value,j),this._pendingChange=!1}_updateValue(){}_anyControls(F){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(F){this._onChange.push(F)}_unregisterOnChange(F){Ln(this._onChange,F)}registerOnDisabledChange(F){this._onDisabledChange.push(F)}_unregisterOnDisabledChange(F){Ln(this._onDisabledChange,F)}_forEachChild(F){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(F){this._isBoxedValue(F)?(this.value=this._pendingValue=F.value,F.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=F}}class eo extends Ur{constructor(F,j,St){super(hn(j),Nn(St,j)),this.controls=F,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(F,j){return this.controls[F]?this.controls[F]:(this.controls[F]=j,j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange),j)}addControl(F,j,St={}){this.registerControl(F,j),this.updateValueAndValidity({emitEvent:St.emitEvent}),this._onCollectionChange()}removeControl(F,j={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),delete this.controls[F],this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}setControl(F,j,St={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),delete this.controls[F],j&&this.registerControl(F,j),this.updateValueAndValidity({emitEvent:St.emitEvent}),this._onCollectionChange()}contains(F){return this.controls.hasOwnProperty(F)&&this.controls[F].enabled}setValue(F,j={}){this._checkAllValuesPresent(F),Object.keys(F).forEach(St=>{this._throwIfControlMissing(St),this.controls[St].setValue(F[St],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(F,j={}){null!=F&&(Object.keys(F).forEach(St=>{this.controls[St]&&this.controls[St].patchValue(F[St],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(F={},j={}){this._forEachChild((St,ge)=>{St.reset(F[ge],{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this._reduceChildren({},(F,j,St)=>(F[St]=j instanceof tr?j.value:j.getRawValue(),F))}_syncPendingControls(){let F=this._reduceChildren(!1,(j,St)=>!!St._syncPendingControls()||j);return F&&this.updateValueAndValidity({onlySelf:!0}),F}_throwIfControlMissing(F){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[F])throw new Error(`Cannot find form control with name: ${F}.`)}_forEachChild(F){Object.keys(this.controls).forEach(j=>{const St=this.controls[j];St&&F(St,j)})}_setUpControls(){this._forEachChild(F=>{F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(F){for(const j of Object.keys(this.controls)){const St=this.controls[j];if(this.contains(j)&&F(St))return!0}return!1}_reduceValue(){return this._reduceChildren({},(F,j,St)=>((j.enabled||this.disabled)&&(F[St]=j.value),F))}_reduceChildren(F,j){let St=F;return this._forEachChild((ge,ni)=>{St=j(St,ge,ni)}),St}_allControlsDisabled(){for(const F of Object.keys(this.controls))if(this.controls[F].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(F){this._forEachChild((j,St)=>{if(void 0===F[St])throw new Error(`Must supply a value for form control with name: '${St}'.`)})}}class Ar extends Ur{constructor(F,j,St){super(hn(j),Nn(St,j)),this.controls=F,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(F){return this.controls[F]}push(F,j={}){this.controls.push(F),this._registerControl(F),this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}insert(F,j,St={}){this.controls.splice(F,0,j),this._registerControl(j),this.updateValueAndValidity({emitEvent:St.emitEvent})}removeAt(F,j={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),this.controls.splice(F,1),this.updateValueAndValidity({emitEvent:j.emitEvent})}setControl(F,j,St={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),this.controls.splice(F,1),j&&(this.controls.splice(F,0,j),this._registerControl(j)),this.updateValueAndValidity({emitEvent:St.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(F,j={}){this._checkAllValuesPresent(F),F.forEach((St,ge)=>{this._throwIfControlMissing(ge),this.at(ge).setValue(St,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(F,j={}){null!=F&&(F.forEach((St,ge)=>{this.at(ge)&&this.at(ge).patchValue(St,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(F=[],j={}){this._forEachChild((St,ge)=>{St.reset(F[ge],{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this.controls.map(F=>F instanceof tr?F.value:F.getRawValue())}clear(F={}){this.controls.length<1||(this._forEachChild(j=>j._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:F.emitEvent}))}_syncPendingControls(){let F=this.controls.reduce((j,St)=>!!St._syncPendingControls()||j,!1);return F&&this.updateValueAndValidity({onlySelf:!0}),F}_throwIfControlMissing(F){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(F))throw new Error(`Cannot find form control at index ${F}`)}_forEachChild(F){this.controls.forEach((j,St)=>{F(j,St)})}_updateValue(){this.value=this.controls.filter(F=>F.enabled||this.disabled).map(F=>F.value)}_anyControls(F){return this.controls.some(j=>j.enabled&&F(j))}_setUpControls(){this._forEachChild(F=>this._registerControl(F))}_checkAllValuesPresent(F){this._forEachChild((j,St)=>{if(void 0===F[St])throw new Error(`Must supply a value for form control at index: ${St}.`)})}_allControlsDisabled(){for(const F of this.controls)if(F.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(F){F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange)}}const Pn={provide:re,useExisting:(0,y.Gpc)(()=>Ji)},Fi=(()=>Promise.resolve(null))();let Ji=(()=>{class K extends re{constructor(j,St){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new y.vpe,this.form=new eo({},Be(j),si(St))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(j){Fi.then(()=>{const St=this._findContainer(j.path);j.control=St.registerControl(j.name,j.control),bi(j.control,j),j.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(j)})}getControl(j){return this.form.get(j.path)}removeControl(j){Fi.then(()=>{const St=this._findContainer(j.path);St&&St.removeControl(j.name),Ln(this._directives,j)})}addFormGroup(j){Fi.then(()=>{const St=this._findContainer(j.path),ge=new eo({});Jt(ge,j),St.registerControl(j.name,ge),ge.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(j){Fi.then(()=>{const St=this._findContainer(j.path);St&&St.removeControl(j.name)})}getFormGroup(j){return this.form.get(j.path)}updateModel(j,St){Fi.then(()=>{this.form.get(j.path).setValue(St)})}setValue(j){this.control.setValue(j)}onSubmit(j){return this.submitted=!0,Hi(this.form,this._directives),this.ngSubmit.emit(j),!1}onReset(){this.resetForm()}resetForm(j){this.form.reset(j),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(j){return j.pop(),j.length?this.form.get(j):this.form}}return K.\u0275fac=function(j){return new(j||K)(y.Y36(it,10),y.Y36(ot,10))},K.\u0275dir=y.lG2({type:K,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(j,St){1&j&&y.NdJ("submit",function(ni){return St.onSubmit(ni)})("reset",function(){return St.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([Pn]),y.qOj]}),K})();const qr={provide:Xt,useExisting:(0,y.Gpc)(()=>hr)},ln=(()=>Promise.resolve(null))();let hr=(()=>{class K extends Xt{constructor(j,St,ge,ni){super(),this.control=new tr,this._registered=!1,this.update=new y.vpe,this._parent=j,this._setValidators(St),this._setAsyncValidators(ge),this.valueAccessor=function(K,F){if(!F)return null;let j,St,ge;return Array.isArray(F),F.forEach(ni=>{ni.constructor===G?j=ni:function(K){return Object.getPrototypeOf(K.constructor)===s}(ni)?St=ni:ge=ni}),ge||St||j||null}(0,ni)}ngOnChanges(j){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in j&&this._updateDisabled(j),function(K,F){if(!K.hasOwnProperty("model"))return!1;const j=K.model;return!!j.isFirstChange()||!Object.is(F,j.currentValue)}(j,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(K,F){return[...F.path,K]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){bi(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(j){ln.then(()=>{this.control.setValue(j,{emitViewToModelChange:!1})})}_updateDisabled(j){const St=j.isDisabled.currentValue,ge=""===St||St&&"false"!==St;ln.then(()=>{ge&&!this.control.disabled?this.control.disable():!ge&&this.control.disabled&&this.control.enable()})}}return K.\u0275fac=function(j){return new(j||K)(y.Y36(re,9),y.Y36(it,10),y.Y36(ot,10),y.Y36(c,10))},K.\u0275dir=y.lG2({type:K,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[y._Bn([qr]),y.qOj,y.TTD]}),K})(),Jo=(()=>{class K{}return K.\u0275fac=function(j){return new(j||K)},K.\u0275mod=y.oAB({type:K}),K.\u0275inj=y.cJS({}),K})();const es={provide:re,useExisting:(0,y.Gpc)(()=>Uo)};let Uo=(()=>{class K extends re{constructor(j,St){super(),this.validators=j,this.asyncValidators=St,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(j),this._setAsyncValidators(St)}ngOnChanges(j){this._checkFormPresent(),j.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Pe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(j){const St=this.form.get(j.path);return bi(St,j),St.updateValueAndValidity({emitEvent:!1}),this.directives.push(j),St}getControl(j){return this.form.get(j.path)}removeControl(j){yi(j.control||null,j,!1),Ln(this.directives,j)}addFormGroup(j){this._setUpFormContainer(j)}removeFormGroup(j){this._cleanUpFormContainer(j)}getFormGroup(j){return this.form.get(j.path)}addFormArray(j){this._setUpFormContainer(j)}removeFormArray(j){this._cleanUpFormContainer(j)}getFormArray(j){return this.form.get(j.path)}updateModel(j,St){this.form.get(j.path).setValue(St)}onSubmit(j){return this.submitted=!0,Hi(this.form,this.directives),this.ngSubmit.emit(j),!1}onReset(){this.resetForm()}resetForm(j){this.form.reset(j),this.submitted=!1}_updateDomValue(){this.directives.forEach(j=>{const St=j.control,ge=this.form.get(j.path);St!==ge&&(yi(St||null,j),ge instanceof tr&&(bi(ge,j),j.control=ge))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(j){const St=this.form.get(j.path);Jt(St,j),St.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(j){if(this.form){const St=this.form.get(j.path);St&&function(K,F){return Pe(K,F)}(St,j)&&St.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ae(this.form,this),this._oldForm&&Pe(this._oldForm,this)}_checkFormPresent(){}}return K.\u0275fac=function(j){return new(j||K)(y.Y36(it,10),y.Y36(ot,10))},K.\u0275dir=y.lG2({type:K,selectors:[["","formGroup",""]],hostBindings:function(j,St){1&j&&y.NdJ("submit",function(ni){return St.onSubmit(ni)})("reset",function(){return St.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([es]),y.qOj,y.TTD]}),K})();const ps={provide:it,useExisting:(0,y.Gpc)(()=>yr),multi:!0},No={provide:it,useExisting:(0,y.Gpc)(()=>Wr),multi:!0};let yr=(()=>{class K{constructor(){this._required=!1}get required(){return this._required}set required(j){this._required=null!=j&&!1!==j&&"false"!=`${j}`,this._onChange&&this._onChange()}validate(j){return this.required?at(j):null}registerOnValidatorChange(j){this._onChange=j}}return K.\u0275fac=function(j){return new(j||K)},K.\u0275dir=y.lG2({type:K,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(j,St){2&j&&y.uIk("required",St.required?"":null)},inputs:{required:"required"},features:[y._Bn([ps])]}),K})(),Wr=(()=>{class K extends yr{validate(j){return this.required?bt(j):null}}return K.\u0275fac=function(){let F;return function(St){return(F||(F=y.n5z(K)))(St||K)}}(),K.\u0275dir=y.lG2({type:K,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(j,St){2&j&&y.uIk("required",St.required?"":null)},features:[y._Bn([No]),y.qOj]}),K})(),Lr=(()=>{class K{}return K.\u0275fac=function(j){return new(j||K)},K.\u0275mod=y.oAB({type:K}),K.\u0275inj=y.cJS({imports:[[Jo]]}),K})(),Hs=(()=>{class K{}return K.\u0275fac=function(j){return new(j||K)},K.\u0275mod=y.oAB({type:K}),K.\u0275inj=y.cJS({imports:[Lr]}),K})()},47423:(L,W,m)=>{"use strict";m.d(W,{zs:()=>H,lW:()=>O,ot:()=>V});var y=m(5e3),p=m(90508),e=m(76360),t=m(15664);const n=["mat-button",""],o=["*"],v=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],R=(0,p.pj)((0,p.Id)((0,p.Kr)(class{constructor(G){this._elementRef=G}})));let O=(()=>{class G extends R{constructor(vt,it,ot){super(vt),this._focusMonitor=it,this._animationMode=ot,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const wt of v)this._hasHostAttributes(wt)&&this._getHostElement().classList.add(wt);vt.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(vt,it){vt?this._focusMonitor.focusVia(this._getHostElement(),vt,it):this._getHostElement().focus(it)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...vt){return vt.some(it=>this._getHostElement().hasAttribute(it))}}return G.\u0275fac=function(vt){return new(vt||G)(y.Y36(y.SBq),y.Y36(t.tE),y.Y36(e.Qb,8))},G.\u0275cmp=y.Xpm({type:G,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(vt,it){if(1&vt&&y.Gf(p.wG,5),2&vt){let ot;y.iGM(ot=y.CRH())&&(it.ripple=ot.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(vt,it){2&vt&&(y.uIk("disabled",it.disabled||null),y.ekj("_mat-animation-noopable","NoopAnimations"===it._animationMode)("mat-button-disabled",it.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[y.qOj],attrs:n,ngContentSelectors:o,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(vt,it){1&vt&&(y.F$t(),y.TgZ(0,"span",0),y.Hsn(1),y.qZA(),y._UZ(2,"span",1),y._UZ(3,"span",2)),2&vt&&(y.xp6(2),y.ekj("mat-button-ripple-round",it.isRoundButton||it.isIconButton),y.Q6J("matRippleDisabled",it._isRippleDisabled())("matRippleCentered",it.isIconButton)("matRippleTrigger",it._getHostElement()))},directives:[p.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),G})(),H=(()=>{class G extends O{constructor(vt,it,ot){super(it,vt,ot)}_haltDisabledEvents(vt){this.disabled&&(vt.preventDefault(),vt.stopImmediatePropagation())}}return G.\u0275fac=function(vt){return new(vt||G)(y.Y36(t.tE),y.Y36(y.SBq),y.Y36(e.Qb,8))},G.\u0275cmp=y.Xpm({type:G,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(vt,it){1&vt&&y.NdJ("click",function(wt){return it._haltDisabledEvents(wt)}),2&vt&&(y.uIk("tabindex",it.disabled?-1:it.tabIndex||0)("disabled",it.disabled||null)("aria-disabled",it.disabled.toString()),y.ekj("_mat-animation-noopable","NoopAnimations"===it._animationMode)("mat-button-disabled",it.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[y.qOj],attrs:n,ngContentSelectors:o,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(vt,it){1&vt&&(y.F$t(),y.TgZ(0,"span",0),y.Hsn(1),y.qZA(),y._UZ(2,"span",1),y._UZ(3,"span",2)),2&vt&&(y.xp6(2),y.ekj("mat-button-ripple-round",it.isRoundButton||it.isIconButton),y.Q6J("matRippleDisabled",it._isRippleDisabled())("matRippleCentered",it.isIconButton)("matRippleTrigger",it._getHostElement()))},directives:[p.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),G})(),V=(()=>{class G{}return G.\u0275fac=function(vt){return new(vt||G)},G.\u0275mod=y.oAB({type:G}),G.\u0275inj=y.cJS({imports:[[p.si,p.BQ],p.BQ]}),G})()},90508:(L,W,m)=>{"use strict";m.d(W,{yN:()=>it,mZ:()=>ot,_A:()=>Ie,rD:()=>we,sG:()=>Ze,Y2:()=>ue,BQ:()=>lt,X2:()=>Ve,uc:()=>be,XK:()=>Ne,Ng:()=>oi,rN:()=>yi,nP:()=>Nt,us:()=>ke,wG:()=>le,si:()=>Mt,IR:()=>Ht,CB:()=>ae,jH:()=>Pe,pj:()=>mt,Kr:()=>dt,Id:()=>Rt,FD:()=>st,sb:()=>nt,E0:()=>ui});var y=m(5e3),p=m(50226),t=m(69808),n=m(70925),o=m(15664),s=m(63191),c=m(77579),v=m(68675),R=m(76360);let it=(()=>{class Te{}return Te.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",Te.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",Te.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",Te.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",Te})(),ot=(()=>{class Te{}return Te.COMPLEX="375ms",Te.ENTERING="225ms",Te.EXITING="195ms",Te})();const yt=new y.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let lt=(()=>{class Te{constructor(se,Jt,te){this._sanityChecks=Jt,this._document=te,this._hasDoneGlobalChecks=!1,se._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(se){return!(0,n.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[se])}}return Te.\u0275fac=function(se){return new(se||Te)(y.LFG(o.qm),y.LFG(yt,8),y.LFG(t.K0))},Te.\u0275mod=y.oAB({type:Te}),Te.\u0275inj=y.cJS({imports:[[p.vT],p.vT]}),Te})();function Rt(Te){return class extends Te{constructor(...Oe){super(...Oe),this._disabled=!1}get disabled(){return this._disabled}set disabled(Oe){this._disabled=(0,s.Ig)(Oe)}}}function mt(Te,Oe){return class extends Te{constructor(...se){super(...se),this.defaultColor=Oe,this.color=Oe}get color(){return this._color}set color(se){const Jt=se||this.defaultColor;Jt!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),Jt&&this._elementRef.nativeElement.classList.add(`mat-${Jt}`),this._color=Jt)}}}function dt(Te){return class extends Te{constructor(...Oe){super(...Oe),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(Oe){this._disableRipple=(0,s.Ig)(Oe)}}}function nt(Te,Oe=0){return class extends Te{constructor(...se){super(...se),this._tabIndex=Oe,this.defaultTabIndex=Oe}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(se){this._tabIndex=null!=se?(0,s.su)(se):this.defaultTabIndex}}}function st(Te){return class extends Te{constructor(...Oe){super(...Oe),this.stateChanges=new c.x,this.errorState=!1}updateErrorState(){const Oe=this.errorState,qt=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);qt!==Oe&&(this.errorState=qt,this.stateChanges.next())}}}const It=new y.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return(0,y.f3M)(y.soG)}});class Ie{constructor(){this._localeChanges=new c.x,this.localeChanges=this._localeChanges}getValidDateOrNull(Oe){return this.isDateInstance(Oe)&&this.isValid(Oe)?Oe:null}deserialize(Oe){return null==Oe||this.isDateInstance(Oe)&&this.isValid(Oe)?Oe:this.invalid()}setLocale(Oe){this.locale=Oe,this._localeChanges.next()}compareDate(Oe,se){return this.getYear(Oe)-this.getYear(se)||this.getMonth(Oe)-this.getMonth(se)||this.getDate(Oe)-this.getDate(se)}sameDate(Oe,se){if(Oe&&se){let Jt=this.isValid(Oe),te=this.isValid(se);return Jt&&te?!this.compareDate(Oe,se):Jt==te}return Oe==se}clampDate(Oe,se,Jt){return se&&this.compareDate(Oe,se)<0?se:Jt&&this.compareDate(Oe,Jt)>0?Jt:Oe}}const Ze=new y.OlP("mat-date-formats"),me=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Be(Te,Oe){const se=Array(Te);for(let Jt=0;Jt<Te;Jt++)se[Jt]=Oe(Jt);return se}let Ge=(()=>{class Te extends Ie{constructor(se,Jt){super(),this.useUtcForDisplay=!1,super.setLocale(se)}getYear(se){return se.getFullYear()}getMonth(se){return se.getMonth()}getDate(se){return se.getDate()}getDayOfWeek(se){return se.getDay()}getMonthNames(se){const Jt=new Intl.DateTimeFormat(this.locale,{month:se,timeZone:"utc"});return Be(12,te=>this._format(Jt,new Date(2017,te,1)))}getDateNames(){const se=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Be(31,Jt=>this._format(se,new Date(2017,0,Jt+1)))}getDayOfWeekNames(se){const Jt=new Intl.DateTimeFormat(this.locale,{weekday:se,timeZone:"utc"});return Be(7,te=>this._format(Jt,new Date(2017,0,te+1)))}getYearName(se){const Jt=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(Jt,se)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(se){return this.getDate(this._createDateWithOverflow(this.getYear(se),this.getMonth(se)+1,0))}clone(se){return new Date(se.getTime())}createDate(se,Jt,te){let qt=this._createDateWithOverflow(se,Jt,te);return qt.getMonth(),qt}today(){return new Date}parse(se){return"number"==typeof se?new Date(se):se?new Date(Date.parse(se)):null}format(se,Jt){if(!this.isValid(se))throw Error("NativeDateAdapter: Cannot format invalid date.");const te=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},Jt),{timeZone:"utc"}));return this._format(te,se)}addCalendarYears(se,Jt){return this.addCalendarMonths(se,12*Jt)}addCalendarMonths(se,Jt){let te=this._createDateWithOverflow(this.getYear(se),this.getMonth(se)+Jt,this.getDate(se));return this.getMonth(te)!=((this.getMonth(se)+Jt)%12+12)%12&&(te=this._createDateWithOverflow(this.getYear(te),this.getMonth(te),0)),te}addCalendarDays(se,Jt){return this._createDateWithOverflow(this.getYear(se),this.getMonth(se),this.getDate(se)+Jt)}toIso8601(se){return[se.getUTCFullYear(),this._2digit(se.getUTCMonth()+1),this._2digit(se.getUTCDate())].join("-")}deserialize(se){if("string"==typeof se){if(!se)return null;if(me.test(se)){let Jt=new Date(se);if(this.isValid(Jt))return Jt}}return super.deserialize(se)}isDateInstance(se){return se instanceof Date}isValid(se){return!isNaN(se.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(se,Jt,te){const qt=new Date;return qt.setFullYear(se,Jt,te),qt.setHours(0,0,0,0),qt}_2digit(se){return("00"+se).slice(-2)}_format(se,Jt){const te=new Date;return te.setUTCFullYear(Jt.getFullYear(),Jt.getMonth(),Jt.getDate()),te.setUTCHours(Jt.getHours(),Jt.getMinutes(),Jt.getSeconds(),Jt.getMilliseconds()),se.format(te)}}return Te.\u0275fac=function(se){return new(se||Te)(y.LFG(It,8),y.LFG(n.t4))},Te.\u0275prov=y.Yz7({token:Te,factory:Te.\u0275fac}),Te})();const si={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let Qe=(()=>{class Te{}return Te.\u0275fac=function(se){return new(se||Te)},Te.\u0275mod=y.oAB({type:Te}),Te.\u0275inj=y.cJS({providers:[{provide:Ie,useClass:Ge}],imports:[[n.ud]]}),Te})(),Ne=(()=>{class Te{}return Te.\u0275fac=function(se){return new(se||Te)},Te.\u0275mod=y.oAB({type:Te}),Te.\u0275inj=y.cJS({providers:[{provide:Ze,useValue:si}],imports:[[Qe]]}),Te})(),we=(()=>{class Te{isErrorState(se,Jt){return!!(se&&se.invalid&&(se.touched||Jt&&Jt.submitted))}}return Te.\u0275fac=function(se){return new(se||Te)},Te.\u0275prov=y.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),Ve=(()=>{class Te{}return Te.\u0275fac=function(se){return new(se||Te)},Te.\u0275dir=y.lG2({type:Te,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),Te})();function ui(Te,Oe,se="mat"){Te.changes.pipe((0,v.O)(Te)).subscribe(({length:Jt})=>{Ke(Oe,`${se}-2-line`,!1),Ke(Oe,`${se}-3-line`,!1),Ke(Oe,`${se}-multi-line`,!1),2===Jt||3===Jt?Ke(Oe,`${se}-${Jt}-line`,!0):Jt>3&&Ke(Oe,`${se}-multi-line`,!0)})}function Ke(Te,Oe,se){Te.nativeElement.classList.toggle(Oe,se)}let be=(()=>{class Te{}return Te.\u0275fac=function(se){return new(se||Te)},Te.\u0275mod=y.oAB({type:Te}),Te.\u0275inj=y.cJS({imports:[[lt],lt]}),Te})();class Xt{constructor(Oe,se,Jt){this._renderer=Oe,this.element=se,this.config=Jt,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const re={enterDuration:225,exitDuration:150},vi=(0,n.i$)({passive:!0}),ie=["mousedown","touchstart"],Ut=["mouseup","mouseleave","touchend","touchcancel"];class Ht{constructor(Oe,se,Jt,te){this._target=Oe,this._ngZone=se,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,te.isBrowser&&(this._containerElement=(0,s.fI)(Jt))}fadeInRipple(Oe,se,Jt={}){const te=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),qt=Object.assign(Object.assign({},re),Jt.animation);Jt.centered&&(Oe=te.left+te.width/2,se=te.top+te.height/2);const Ee=Jt.radius||function(Te,Oe,se){const Jt=Math.max(Math.abs(Te-se.left),Math.abs(Te-se.right)),te=Math.max(Math.abs(Oe-se.top),Math.abs(Oe-se.bottom));return Math.sqrt(Jt*Jt+te*te)}(Oe,se,te),ti=Oe-te.left,Pi=se-te.top,Hi=qt.enterDuration,bn=document.createElement("div");bn.classList.add("mat-ripple-element"),bn.style.left=ti-Ee+"px",bn.style.top=Pi-Ee+"px",bn.style.height=2*Ee+"px",bn.style.width=2*Ee+"px",null!=Jt.color&&(bn.style.backgroundColor=Jt.color),bn.style.transitionDuration=`${Hi}ms`,this._containerElement.appendChild(bn),window.getComputedStyle(bn).getPropertyValue("opacity"),bn.style.transform="scale(1)";const Ln=new Xt(this,bn,Jt);return Ln.state=0,this._activeRipples.add(Ln),Jt.persistent||(this._mostRecentTransientRipple=Ln),this._runTimeoutOutsideZone(()=>{const Xe=Ln===this._mostRecentTransientRipple;Ln.state=1,!Jt.persistent&&(!Xe||!this._isPointerDown)&&Ln.fadeOut()},Hi),Ln}fadeOutRipple(Oe){const se=this._activeRipples.delete(Oe);if(Oe===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!se)return;const Jt=Oe.element,te=Object.assign(Object.assign({},re),Oe.config.animation);Jt.style.transitionDuration=`${te.exitDuration}ms`,Jt.style.opacity="0",Oe.state=2,this._runTimeoutOutsideZone(()=>{Oe.state=3,Jt.remove()},te.exitDuration)}fadeOutAll(){this._activeRipples.forEach(Oe=>Oe.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(Oe=>{Oe.config.persistent||Oe.fadeOut()})}setupTriggerEvents(Oe){const se=(0,s.fI)(Oe);!se||se===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=se,this._registerEvents(ie))}handleEvent(Oe){"mousedown"===Oe.type?this._onMousedown(Oe):"touchstart"===Oe.type?this._onTouchStart(Oe):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Ut),this._pointerUpEventsRegistered=!0)}_onMousedown(Oe){const se=(0,o.X6)(Oe),Jt=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!se&&!Jt&&(this._isPointerDown=!0,this.fadeInRipple(Oe.clientX,Oe.clientY,this._target.rippleConfig))}_onTouchStart(Oe){if(!this._target.rippleDisabled&&!(0,o.yG)(Oe)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const se=Oe.changedTouches;for(let Jt=0;Jt<se.length;Jt++)this.fadeInRipple(se[Jt].clientX,se[Jt].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(Oe=>{!Oe.config.persistent&&(1===Oe.state||Oe.config.terminateOnPointerUp&&0===Oe.state)&&Oe.fadeOut()}))}_runTimeoutOutsideZone(Oe,se=0){this._ngZone.runOutsideAngular(()=>setTimeout(Oe,se))}_registerEvents(Oe){this._ngZone.runOutsideAngular(()=>{Oe.forEach(se=>{this._triggerElement.addEventListener(se,this,vi)})})}_removeTriggerEvents(){this._triggerElement&&(ie.forEach(Oe=>{this._triggerElement.removeEventListener(Oe,this,vi)}),this._pointerUpEventsRegistered&&Ut.forEach(Oe=>{this._triggerElement.removeEventListener(Oe,this,vi)}))}}const ue=new y.OlP("mat-ripple-global-options");let le=(()=>{class Te{constructor(se,Jt,te,qt,Ee){this._elementRef=se,this._animationMode=Ee,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=qt||{},this._rippleRenderer=new Ht(this,Jt,se,te)}get disabled(){return this._disabled}set disabled(se){se&&this.fadeOutAllNonPersistent(),this._disabled=se,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(se){this._trigger=se,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(se,Jt=0,te){return"number"==typeof se?this._rippleRenderer.fadeInRipple(se,Jt,Object.assign(Object.assign({},this.rippleConfig),te)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),se))}}return Te.\u0275fac=function(se){return new(se||Te)(y.Y36(y.SBq),y.Y36(y.R0b),y.Y36(n.t4),y.Y36(ue,8),y.Y36(R.Qb,8))},Te.\u0275dir=y.lG2({type:Te,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(se,Jt){2&se&&y.ekj("mat-ripple-unbounded",Jt.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),Te})(),Mt=(()=>{class Te{}return Te.\u0275fac=function(se){return new(se||Te)},Te.\u0275mod=y.oAB({type:Te}),Te.\u0275inj=y.cJS({imports:[[lt,n.ud],lt]}),Te})(),Nt=(()=>{class Te{constructor(se){this._animationMode=se,this.state="unchecked",this.disabled=!1}}return Te.\u0275fac=function(se){return new(se||Te)(y.Y36(R.Qb,8))},Te.\u0275cmp=y.Xpm({type:Te,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(se,Jt){2&se&&y.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===Jt.state)("mat-pseudo-checkbox-checked","checked"===Jt.state)("mat-pseudo-checkbox-disabled",Jt.disabled)("_mat-animation-noopable","NoopAnimations"===Jt._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(se,Jt){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),Te})(),ke=(()=>{class Te{}return Te.\u0275fac=function(se){return new(se||Te)},Te.\u0275mod=y.oAB({type:Te}),Te.\u0275inj=y.cJS({imports:[[lt]]}),Te})();class yi{constructor(Oe,se=!1){this.source=Oe,this.isUserInput=se}}function ae(Te,Oe,se){if(se.length){let Jt=Oe.toArray(),te=se.toArray(),qt=0;for(let Ee=0;Ee<Te+1;Ee++)Jt[Ee].group&&Jt[Ee].group===te[qt]&&qt++;return qt}return 0}function Pe(Te,Oe,se,Jt){return Te<se?Te:Te+Oe>se+Jt?Math.max(0,Te-Jt+Oe):se}let oi=(()=>{class Te{}return Te.\u0275fac=function(se){return new(se||Te)},Te.\u0275mod=y.oAB({type:Te}),Te.\u0275inj=y.cJS({imports:[[Mt,t.ez,lt,ke]]}),Te})()},81125:(L,W,m)=>{"use strict";m.d(W,{pp:()=>ui,To:()=>Ke,ib:()=>Ge,u4:()=>we,yz:()=>pe,yK:()=>Ve});var y=m(5e3),p=m(63191),e=m(77579),t=m(50727),n=m(20449);let o=0;const s=new y.OlP("CdkAccordion");let c=(()=>{class be{constructor(){this._stateChanges=new e.x,this._openCloseAllActions=new e.x,this.id="cdk-accordion-"+o++,this._multi=!1}get multi(){return this._multi}set multi(re){this._multi=(0,p.Ig)(re)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(re){this._stateChanges.next(re)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return be.\u0275fac=function(re){return new(re||be)},be.\u0275dir=y.lG2({type:be,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[y._Bn([{provide:s,useExisting:be}]),y.TTD]}),be})(),v=0,R=(()=>{class be{constructor(re,Me,vi){this.accordion=re,this._changeDetectorRef=Me,this._expansionDispatcher=vi,this._openCloseAllSubscription=t.w0.EMPTY,this.closed=new y.vpe,this.opened=new y.vpe,this.destroyed=new y.vpe,this.expandedChange=new y.vpe,this.id="cdk-accordion-child-"+v++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=vi.listen((ie,Ut)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===Ut&&this.id!==ie&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(re){re=(0,p.Ig)(re),this._expanded!==re&&(this._expanded=re,this.expandedChange.emit(re),re?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(re){this._disabled=(0,p.Ig)(re)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(re=>{this.disabled||(this.expanded=re)})}}return be.\u0275fac=function(re){return new(re||be)(y.Y36(s,12),y.Y36(y.sBO),y.Y36(n.A8))},be.\u0275dir=y.lG2({type:be,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[y._Bn([{provide:s,useValue:void 0}])]}),be})(),O=(()=>{class be{}return be.\u0275fac=function(re){return new(re||be)},be.\u0275mod=y.oAB({type:be}),be.\u0275inj=y.cJS({}),be})();var H=m(99129),V=m(69808),G=m(90508),Z=m(15664),vt=m(71884),it=m(68675),ot=m(39300),wt=m(95698),ct=m(91159),yt=m(76360),lt=m(60515),at=m(56451),bt=m(41777);const tt=["body"];function Rt(be,Xt){}const mt=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],dt=["mat-expansion-panel-header","*","mat-action-row"];function nt(be,Xt){if(1&be&&y._UZ(0,"span",2),2&be){const re=y.oxw();y.Q6J("@indicatorRotate",re._getExpandedState())}}const st=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Gt=["mat-panel-title","mat-panel-description","*"],It=new y.OlP("MAT_ACCORDION"),Vt="225ms cubic-bezier(0.4,0.0,0.2,1)",Ie={indicatorRotate:(0,bt.X$)("indicatorRotate",[(0,bt.SB)("collapsed, void",(0,bt.oB)({transform:"rotate(0deg)"})),(0,bt.SB)("expanded",(0,bt.oB)({transform:"rotate(180deg)"})),(0,bt.eR)("expanded <=> collapsed, void => collapsed",(0,bt.jt)(Vt))]),bodyExpansion:(0,bt.X$)("bodyExpansion",[(0,bt.SB)("collapsed, void",(0,bt.oB)({height:"0px",visibility:"hidden"})),(0,bt.SB)("expanded",(0,bt.oB)({height:"*",visibility:"visible"})),(0,bt.eR)("expanded <=> collapsed, void => collapsed",(0,bt.jt)(Vt))])};let Ze=(()=>{class be{constructor(re){this._template=re}}return be.\u0275fac=function(re){return new(re||be)(y.Y36(y.Rgc))},be.\u0275dir=y.lG2({type:be,selectors:[["ng-template","matExpansionPanelContent",""]]}),be})(),me=0;const Be=new y.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let Ge=(()=>{class be extends R{constructor(re,Me,vi,ie,Ut,Ht,Zt){super(re,Me,vi),this._viewContainerRef=ie,this._animationMode=Ht,this._hideToggle=!1,this.afterExpand=new y.vpe,this.afterCollapse=new y.vpe,this._inputChanges=new e.x,this._headerId="mat-expansion-panel-header-"+me++,this._bodyAnimationDone=new e.x,this.accordion=re,this._document=Ut,this._bodyAnimationDone.pipe((0,vt.x)((Yt,ue)=>Yt.fromState===ue.fromState&&Yt.toState===ue.toState)).subscribe(Yt=>{"void"!==Yt.fromState&&("expanded"===Yt.toState?this.afterExpand.emit():"collapsed"===Yt.toState&&this.afterCollapse.emit())}),Zt&&(this.hideToggle=Zt.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(re){this._hideToggle=(0,p.Ig)(re)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(re){this._togglePosition=re}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe((0,it.O)(null),(0,ot.h)(()=>this.expanded&&!this._portal),(0,wt.q)(1)).subscribe(()=>{this._portal=new H.UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(re){this._inputChanges.next(re)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const re=this._document.activeElement,Me=this._body.nativeElement;return re===Me||Me.contains(re)}return!1}}return be.\u0275fac=function(re){return new(re||be)(y.Y36(It,12),y.Y36(y.sBO),y.Y36(n.A8),y.Y36(y.s_b),y.Y36(V.K0),y.Y36(yt.Qb,8),y.Y36(Be,8))},be.\u0275cmp=y.Xpm({type:be,selectors:[["mat-expansion-panel"]],contentQueries:function(re,Me,vi){if(1&re&&y.Suo(vi,Ze,5),2&re){let ie;y.iGM(ie=y.CRH())&&(Me._lazyContent=ie.first)}},viewQuery:function(re,Me){if(1&re&&y.Gf(tt,5),2&re){let vi;y.iGM(vi=y.CRH())&&(Me._body=vi.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(re,Me){2&re&&y.ekj("mat-expanded",Me.expanded)("_mat-animation-noopable","NoopAnimations"===Me._animationMode)("mat-expansion-panel-spacing",Me._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[y._Bn([{provide:It,useValue:void 0}]),y.qOj,y.TTD],ngContentSelectors:dt,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(re,Me){1&re&&(y.F$t(mt),y.Hsn(0),y.TgZ(1,"div",0,1),y.NdJ("@bodyExpansion.done",function(ie){return Me._bodyAnimationDone.next(ie)}),y.TgZ(3,"div",2),y.Hsn(4,1),y.YNc(5,Rt,0,0,"ng-template",3),y.qZA(),y.Hsn(6,2),y.qZA()),2&re&&(y.xp6(1),y.Q6J("@bodyExpansion",Me._getExpandedState())("id",Me.id),y.uIk("aria-labelledby",Me._headerId),y.xp6(4),y.Q6J("cdkPortalOutlet",Me._portal))},directives:[H.Pl],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Ie.bodyExpansion]},changeDetection:0}),be})();class Qe{}const Ne=(0,G.sb)(Qe);let pe=(()=>{class be extends Ne{constructor(re,Me,vi,ie,Ut,Ht,Zt){super(),this.panel=re,this._element=Me,this._focusMonitor=vi,this._changeDetectorRef=ie,this._animationMode=Ht,this._parentChangeSubscription=t.w0.EMPTY;const Yt=re.accordion?re.accordion._stateChanges.pipe((0,ot.h)(ue=>!(!ue.hideToggle&&!ue.togglePosition))):lt.E;this.tabIndex=parseInt(Zt||"")||0,this._parentChangeSubscription=(0,at.T)(re.opened,re.closed,Yt,re._inputChanges.pipe((0,ot.h)(ue=>!!(ue.hideToggle||ue.disabled||ue.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),re.closed.pipe((0,ot.h)(()=>re._containsFocus())).subscribe(()=>vi.focusVia(Me,"program")),Ut&&(this.expandedHeight=Ut.expandedHeight,this.collapsedHeight=Ut.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const re=this._isExpanded();return re&&this.expandedHeight?this.expandedHeight:!re&&this.collapsedHeight?this.collapsedHeight:null}_keydown(re){switch(re.keyCode){case ct.L_:case ct.K5:(0,ct.Vb)(re)||(re.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(re))}}focus(re,Me){re?this._focusMonitor.focusVia(this._element,re,Me):this._element.nativeElement.focus(Me)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(re=>{re&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return be.\u0275fac=function(re){return new(re||be)(y.Y36(Ge,1),y.Y36(y.SBq),y.Y36(Z.tE),y.Y36(y.sBO),y.Y36(Be,8),y.Y36(yt.Qb,8),y.$8M("tabindex"))},be.\u0275cmp=y.Xpm({type:be,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(re,Me){1&re&&y.NdJ("click",function(){return Me._toggle()})("keydown",function(ie){return Me._keydown(ie)}),2&re&&(y.uIk("id",Me.panel._headerId)("tabindex",Me.tabIndex)("aria-controls",Me._getPanelId())("aria-expanded",Me._isExpanded())("aria-disabled",Me.panel.disabled),y.Udp("height",Me._getHeaderHeight()),y.ekj("mat-expanded",Me._isExpanded())("mat-expansion-toggle-indicator-after","after"===Me._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===Me._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===Me._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[y.qOj],ngContentSelectors:Gt,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(re,Me){1&re&&(y.F$t(st),y.TgZ(0,"span",0),y.Hsn(1),y.Hsn(2,1),y.Hsn(3,2),y.qZA(),y.YNc(4,nt,1,1,"span",1)),2&re&&(y.xp6(4),y.Q6J("ngIf",Me._showToggle()))},directives:[V.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[Ie.indicatorRotate]},changeDetection:0}),be})(),we=(()=>{class be{}return be.\u0275fac=function(re){return new(re||be)},be.\u0275dir=y.lG2({type:be,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),be})(),Ve=(()=>{class be{}return be.\u0275fac=function(re){return new(re||be)},be.\u0275dir=y.lG2({type:be,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),be})(),ui=(()=>{class be extends c{constructor(){super(...arguments),this._ownHeaders=new y.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(re){this._hideToggle=(0,p.Ig)(re)}ngAfterContentInit(){this._headers.changes.pipe((0,it.O)(this._headers)).subscribe(re=>{this._ownHeaders.reset(re.filter(Me=>Me.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new Z.Em(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(re){this._keyManager.onKeydown(re)}_handleHeaderFocus(re){this._keyManager.updateActiveItem(re)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return be.\u0275fac=function(){let Xt;return function(Me){return(Xt||(Xt=y.n5z(be)))(Me||be)}}(),be.\u0275dir=y.lG2({type:be,selectors:[["mat-accordion"]],contentQueries:function(re,Me,vi){if(1&re&&y.Suo(vi,pe,5),2&re){let ie;y.iGM(ie=y.CRH())&&(Me._headers=ie)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(re,Me){2&re&&y.ekj("mat-accordion-multi",Me.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[y._Bn([{provide:It,useExisting:be}]),y.qOj]}),be})(),Ke=(()=>{class be{}return be.\u0275fac=function(re){return new(re||be)},be.\u0275mod=y.oAB({type:be}),be.\u0275inj=y.cJS({imports:[[V.ez,G.BQ,O,H.eL]]}),be})()},43954:(L,W,m)=>{"use strict";m.d(W,{Il:()=>tt,N6:()=>Rt,DX:()=>H,jo:()=>Z,$H:()=>V});var y=m(5e3),p=m(90508),e=m(63191),t=m(50226);const n=["*"],o=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],s=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"];class v{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const nt=Math.max(...this.tracker);return nt>1?this.rowCount+nt-1:this.rowCount}update(nt,st){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(nt),this.tracker.fill(0,0,this.tracker.length),this.positions=st.map(Gt=>this._trackTile(Gt))}_trackTile(nt){const st=this._findMatchingGap(nt.colspan);return this._markTilePosition(st,nt),this.columnIndex=st+nt.colspan,new R(this.rowIndex,st)}_findMatchingGap(nt){let st=-1,Gt=-1;do{this.columnIndex+nt>this.tracker.length?(this._nextRow(),st=this.tracker.indexOf(0,this.columnIndex),Gt=this._findGapEndIndex(st)):(st=this.tracker.indexOf(0,this.columnIndex),-1!=st?(Gt=this._findGapEndIndex(st),this.columnIndex=st+1):(this._nextRow(),st=this.tracker.indexOf(0,this.columnIndex),Gt=this._findGapEndIndex(st)))}while(Gt-st<nt||0==Gt);return Math.max(st,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let nt=0;nt<this.tracker.length;nt++)this.tracker[nt]=Math.max(0,this.tracker[nt]-1)}_findGapEndIndex(nt){for(let st=nt+1;st<this.tracker.length;st++)if(0!=this.tracker[st])return st;return this.tracker.length}_markTilePosition(nt,st){for(let Gt=0;Gt<st.colspan;Gt++)this.tracker[nt+Gt]=st.rowspan}}class R{constructor(nt,st){this.row=nt,this.col=st}}const O=new y.OlP("MAT_GRID_LIST");let H=(()=>{class dt{constructor(st,Gt){this._element=st,this._gridList=Gt,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(st){this._rowspan=Math.round((0,e.su)(st))}get colspan(){return this._colspan}set colspan(st){this._colspan=Math.round((0,e.su)(st))}_setStyle(st,Gt){this._element.nativeElement.style[st]=Gt}}return dt.\u0275fac=function(st){return new(st||dt)(y.Y36(y.SBq),y.Y36(O,8))},dt.\u0275cmp=y.Xpm({type:dt,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(st,Gt){2&st&&y.uIk("rowspan",Gt.rowspan)("colspan",Gt.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(st,Gt){1&st&&(y.F$t(),y.TgZ(0,"div",0),y.Hsn(1),y.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),dt})(),V=(()=>{class dt{constructor(st){this._element=st}ngAfterContentInit(){(0,p.E0)(this._lines,this._element)}}return dt.\u0275fac=function(st){return new(st||dt)(y.Y36(y.SBq))},dt.\u0275cmp=y.Xpm({type:dt,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(st,Gt,It){if(1&st&&y.Suo(It,p.X2,5),2&st){let Vt;y.iGM(Vt=y.CRH())&&(Gt._lines=Vt)}},ngContentSelectors:s,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(st,Gt){1&st&&(y.F$t(o),y.Hsn(0),y.TgZ(1,"div",0),y.Hsn(2,1),y.qZA(),y.Hsn(3,2))},encapsulation:2,changeDetection:0}),dt})(),Z=(()=>{class dt{}return dt.\u0275fac=function(st){return new(st||dt)},dt.\u0275dir=y.lG2({type:dt,selectors:[["mat-grid-tile-header"]],hostAttrs:[1,"mat-grid-tile-header"]}),dt})();const it=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class ot{constructor(){this._rows=0,this._rowspan=0}init(nt,st,Gt,It){this._gutterSize=at(nt),this._rows=st.rowCount,this._rowspan=st.rowspan,this._cols=Gt,this._direction=It}getBaseTileSize(nt,st){return`(${nt}% - (${this._gutterSize} * ${st}))`}getTilePosition(nt,st){return 0===st?"0":lt(`(${nt} + ${this._gutterSize}) * ${st}`)}getTileSize(nt,st){return`(${nt} * ${st}) + (${st-1} * ${this._gutterSize})`}setStyle(nt,st,Gt){let It=100/this._cols,Vt=(this._cols-1)/this._cols;this.setColStyles(nt,Gt,It,Vt),this.setRowStyles(nt,st,It,Vt)}setColStyles(nt,st,Gt,It){let Vt=this.getBaseTileSize(Gt,It);nt._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(Vt,st)),nt._setStyle("width",lt(this.getTileSize(Vt,nt.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(nt){return`${this._rowspan} * ${this.getTileSize(nt,1)}`}getComputedHeight(){return null}}class wt extends ot{constructor(nt){super(),this.fixedRowHeight=nt}init(nt,st,Gt,It){super.init(nt,st,Gt,It),this.fixedRowHeight=at(this.fixedRowHeight),it.test(this.fixedRowHeight)}setRowStyles(nt,st){nt._setStyle("top",this.getTilePosition(this.fixedRowHeight,st)),nt._setStyle("height",lt(this.getTileSize(this.fixedRowHeight,nt.rowspan)))}getComputedHeight(){return["height",lt(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(nt){nt._setListStyle(["height",null]),nt._tiles&&nt._tiles.forEach(st=>{st._setStyle("top",null),st._setStyle("height",null)})}}class ct extends ot{constructor(nt){super(),this._parseRatio(nt)}setRowStyles(nt,st,Gt,It){this.baseTileHeight=this.getBaseTileSize(Gt/this.rowHeightRatio,It),nt._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,st)),nt._setStyle("paddingTop",lt(this.getTileSize(this.baseTileHeight,nt.rowspan)))}getComputedHeight(){return["paddingBottom",lt(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(nt){nt._setListStyle(["paddingBottom",null]),nt._tiles.forEach(st=>{st._setStyle("marginTop",null),st._setStyle("paddingTop",null)})}_parseRatio(nt){const st=nt.split(":");this.rowHeightRatio=parseFloat(st[0])/parseFloat(st[1])}}class yt extends ot{setRowStyles(nt,st){let Vt=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);nt._setStyle("top",this.getTilePosition(Vt,st)),nt._setStyle("height",lt(this.getTileSize(Vt,nt.rowspan)))}reset(nt){nt._tiles&&nt._tiles.forEach(st=>{st._setStyle("top",null),st._setStyle("height",null)})}}function lt(dt){return`calc(${dt})`}function at(dt){return dt.match(/([A-Za-z%]+)$/)?dt:`${dt}px`}let tt=(()=>{class dt{constructor(st,Gt){this._element=st,this._dir=Gt,this._gutter="1px"}get cols(){return this._cols}set cols(st){this._cols=Math.max(1,Math.round((0,e.su)(st)))}get gutterSize(){return this._gutter}set gutterSize(st){this._gutter=`${null==st?"":st}`}get rowHeight(){return this._rowHeight}set rowHeight(st){const Gt=`${null==st?"":st}`;Gt!==this._rowHeight&&(this._rowHeight=Gt,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(st){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===st?new yt:st&&st.indexOf(":")>-1?new ct(st):new wt(st)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new v);const st=this._tileCoordinator,Gt=this._tiles.filter(Vt=>!Vt._gridList||Vt._gridList===this),It=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,Gt),this._tileStyler.init(this.gutterSize,st,this.cols,It),Gt.forEach((Vt,Ie)=>{const Ze=st.positions[Ie];this._tileStyler.setStyle(Vt,Ze.row,Ze.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(st){st&&(this._element.nativeElement.style[st[0]]=st[1])}}return dt.\u0275fac=function(st){return new(st||dt)(y.Y36(y.SBq),y.Y36(t.Is,8))},dt.\u0275cmp=y.Xpm({type:dt,selectors:[["mat-grid-list"]],contentQueries:function(st,Gt,It){if(1&st&&y.Suo(It,H,5),2&st){let Vt;y.iGM(Vt=y.CRH())&&(Gt._tiles=Vt)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(st,Gt){2&st&&y.uIk("cols",Gt.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[y._Bn([{provide:O,useExisting:dt}])],ngContentSelectors:n,decls:2,vars:0,template:function(st,Gt){1&st&&(y.F$t(),y.TgZ(0,"div"),y.Hsn(1),y.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),dt})(),Rt=(()=>{class dt{}return dt.\u0275fac=function(st){return new(st||dt)},dt.\u0275mod=y.oAB({type:dt}),dt.\u0275inj=y.cJS({imports:[[p.uc,p.BQ],p.uc,p.BQ]}),dt})()},25245:(L,W,m)=>{"use strict";m.d(W,{Hw:()=>Ge,Ps:()=>si});var y=m(5e3),p=m(90508),e=m(63191),t=m(69808),n=m(39646),o=m(62843),s=m(4128),c=m(50727),v=m(18505),R=m(54004),O=m(70262),H=m(28746),V=m(13099),G=m(95698),Z=m(40520),vt=m(22313);const it=["*"];let ot;function ct(Qe){var Ne;return(null===(Ne=function(){if(void 0===ot&&(ot=null,"undefined"!=typeof window)){const Qe=window;void 0!==Qe.trustedTypes&&(ot=Qe.trustedTypes.createPolicy("angular#components",{createHTML:Ne=>Ne}))}return ot}())||void 0===Ne?void 0:Ne.createHTML(Qe))||Qe}function yt(Qe){return Error(`Unable to find icon with the name "${Qe}"`)}function at(Qe){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${Qe}".`)}function bt(Qe){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${Qe}".`)}class tt{constructor(Ne,pe,we){this.url=Ne,this.svgText=pe,this.options=we}}let Rt=(()=>{class Qe{constructor(pe,we,Ve,ui){this._httpClient=pe,this._sanitizer=we,this._errorHandler=ui,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=Ve}addSvgIcon(pe,we,Ve){return this.addSvgIconInNamespace("",pe,we,Ve)}addSvgIconLiteral(pe,we,Ve){return this.addSvgIconLiteralInNamespace("",pe,we,Ve)}addSvgIconInNamespace(pe,we,Ve,ui){return this._addSvgIconConfig(pe,we,new tt(Ve,null,ui))}addSvgIconResolver(pe){return this._resolvers.push(pe),this}addSvgIconLiteralInNamespace(pe,we,Ve,ui){const Ke=this._sanitizer.sanitize(y.q3G.HTML,Ve);if(!Ke)throw bt(Ve);const be=ct(Ke);return this._addSvgIconConfig(pe,we,new tt("",be,ui))}addSvgIconSet(pe,we){return this.addSvgIconSetInNamespace("",pe,we)}addSvgIconSetLiteral(pe,we){return this.addSvgIconSetLiteralInNamespace("",pe,we)}addSvgIconSetInNamespace(pe,we,Ve){return this._addSvgIconSetConfig(pe,new tt(we,null,Ve))}addSvgIconSetLiteralInNamespace(pe,we,Ve){const ui=this._sanitizer.sanitize(y.q3G.HTML,we);if(!ui)throw bt(we);const Ke=ct(ui);return this._addSvgIconSetConfig(pe,new tt("",Ke,Ve))}registerFontClassAlias(pe,we=pe){return this._fontCssClassesByAlias.set(pe,we),this}classNameForFontAlias(pe){return this._fontCssClassesByAlias.get(pe)||pe}setDefaultFontSetClass(pe){return this._defaultFontSetClass=pe,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(pe){const we=this._sanitizer.sanitize(y.q3G.RESOURCE_URL,pe);if(!we)throw at(pe);const Ve=this._cachedIconsByUrl.get(we);return Ve?(0,n.of)(nt(Ve)):this._loadSvgIconFromConfig(new tt(pe,null)).pipe((0,v.b)(ui=>this._cachedIconsByUrl.set(we,ui)),(0,R.U)(ui=>nt(ui)))}getNamedSvgIcon(pe,we=""){const Ve=st(we,pe);let ui=this._svgIconConfigs.get(Ve);if(ui)return this._getSvgFromConfig(ui);if(ui=this._getIconConfigFromResolvers(we,pe),ui)return this._svgIconConfigs.set(Ve,ui),this._getSvgFromConfig(ui);const Ke=this._iconSetConfigs.get(we);return Ke?this._getSvgFromIconSetConfigs(pe,Ke):(0,o._)(yt(Ve))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(pe){return pe.svgText?(0,n.of)(nt(this._svgElementFromConfig(pe))):this._loadSvgIconFromConfig(pe).pipe((0,R.U)(we=>nt(we)))}_getSvgFromIconSetConfigs(pe,we){const Ve=this._extractIconWithNameFromAnySet(pe,we);if(Ve)return(0,n.of)(Ve);const ui=we.filter(Ke=>!Ke.svgText).map(Ke=>this._loadSvgIconSetFromConfig(Ke).pipe((0,O.K)(be=>{const re=`Loading icon set URL: ${this._sanitizer.sanitize(y.q3G.RESOURCE_URL,Ke.url)} failed: ${be.message}`;return this._errorHandler.handleError(new Error(re)),(0,n.of)(null)})));return(0,s.D)(ui).pipe((0,R.U)(()=>{const Ke=this._extractIconWithNameFromAnySet(pe,we);if(!Ke)throw yt(pe);return Ke}))}_extractIconWithNameFromAnySet(pe,we){for(let Ve=we.length-1;Ve>=0;Ve--){const ui=we[Ve];if(ui.svgText&&ui.svgText.toString().indexOf(pe)>-1){const Ke=this._svgElementFromConfig(ui),be=this._extractSvgIconFromSet(Ke,pe,ui.options);if(be)return be}}return null}_loadSvgIconFromConfig(pe){return this._fetchIcon(pe).pipe((0,v.b)(we=>pe.svgText=we),(0,R.U)(()=>this._svgElementFromConfig(pe)))}_loadSvgIconSetFromConfig(pe){return pe.svgText?(0,n.of)(null):this._fetchIcon(pe).pipe((0,v.b)(we=>pe.svgText=we))}_extractSvgIconFromSet(pe,we,Ve){const ui=pe.querySelector(`[id="${we}"]`);if(!ui)return null;const Ke=ui.cloneNode(!0);if(Ke.removeAttribute("id"),"svg"===Ke.nodeName.toLowerCase())return this._setSvgAttributes(Ke,Ve);if("symbol"===Ke.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(Ke),Ve);const be=this._svgElementFromString(ct("<svg></svg>"));return be.appendChild(Ke),this._setSvgAttributes(be,Ve)}_svgElementFromString(pe){const we=this._document.createElement("DIV");we.innerHTML=pe;const Ve=we.querySelector("svg");if(!Ve)throw Error("<svg> tag not found");return Ve}_toSvgElement(pe){const we=this._svgElementFromString(ct("<svg></svg>")),Ve=pe.attributes;for(let ui=0;ui<Ve.length;ui++){const{name:Ke,value:be}=Ve[ui];"id"!==Ke&&we.setAttribute(Ke,be)}for(let ui=0;ui<pe.childNodes.length;ui++)pe.childNodes[ui].nodeType===this._document.ELEMENT_NODE&&we.appendChild(pe.childNodes[ui].cloneNode(!0));return we}_setSvgAttributes(pe,we){return pe.setAttribute("fit",""),pe.setAttribute("height","100%"),pe.setAttribute("width","100%"),pe.setAttribute("preserveAspectRatio","xMidYMid meet"),pe.setAttribute("focusable","false"),we&&we.viewBox&&pe.setAttribute("viewBox",we.viewBox),pe}_fetchIcon(pe){var we;const{url:Ve,options:ui}=pe,Ke=null!==(we=null==ui?void 0:ui.withCredentials)&&void 0!==we&&we;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==Ve)throw Error(`Cannot fetch icon from URL "${Ve}".`);const be=this._sanitizer.sanitize(y.q3G.RESOURCE_URL,Ve);if(!be)throw at(Ve);const Xt=this._inProgressUrlFetches.get(be);if(Xt)return Xt;const re=this._httpClient.get(be,{responseType:"text",withCredentials:Ke}).pipe((0,R.U)(Me=>ct(Me)),(0,H.x)(()=>this._inProgressUrlFetches.delete(be)),(0,V.B)());return this._inProgressUrlFetches.set(be,re),re}_addSvgIconConfig(pe,we,Ve){return this._svgIconConfigs.set(st(pe,we),Ve),this}_addSvgIconSetConfig(pe,we){const Ve=this._iconSetConfigs.get(pe);return Ve?Ve.push(we):this._iconSetConfigs.set(pe,[we]),this}_svgElementFromConfig(pe){if(!pe.svgElement){const we=this._svgElementFromString(pe.svgText);this._setSvgAttributes(we,pe.options),pe.svgElement=we}return pe.svgElement}_getIconConfigFromResolvers(pe,we){for(let Ve=0;Ve<this._resolvers.length;Ve++){const ui=this._resolvers[Ve](we,pe);if(ui)return Gt(ui)?new tt(ui.url,null,ui.options):new tt(ui,null)}}}return Qe.\u0275fac=function(pe){return new(pe||Qe)(y.LFG(Z.eN,8),y.LFG(vt.H7),y.LFG(t.K0,8),y.LFG(y.qLn))},Qe.\u0275prov=y.Yz7({token:Qe,factory:Qe.\u0275fac,providedIn:"root"}),Qe})();function nt(Qe){return Qe.cloneNode(!0)}function st(Qe,Ne){return Qe+":"+Ne}function Gt(Qe){return!(!Qe.url||!Qe.options)}const It=(0,p.pj)(class{constructor(Qe){this._elementRef=Qe}}),Vt=new y.OlP("mat-icon-location",{providedIn:"root",factory:function(){const Qe=(0,y.f3M)(t.K0),Ne=Qe?Qe.location:null;return{getPathname:()=>Ne?Ne.pathname+Ne.search:""}}}),Ze=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],me=Ze.map(Qe=>`[${Qe}]`).join(", "),Be=/^url\(['"]?#(.*?)['"]?\)$/;let Ge=(()=>{class Qe extends It{constructor(pe,we,Ve,ui,Ke){super(pe),this._iconRegistry=we,this._location=ui,this._errorHandler=Ke,this._inline=!1,this._currentIconFetch=c.w0.EMPTY,Ve||pe.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(pe){this._inline=(0,e.Ig)(pe)}get svgIcon(){return this._svgIcon}set svgIcon(pe){pe!==this._svgIcon&&(pe?this._updateSvgIcon(pe):this._svgIcon&&this._clearSvgElement(),this._svgIcon=pe)}get fontSet(){return this._fontSet}set fontSet(pe){const we=this._cleanupFontValue(pe);we!==this._fontSet&&(this._fontSet=we,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(pe){const we=this._cleanupFontValue(pe);we!==this._fontIcon&&(this._fontIcon=we,this._updateFontIconClasses())}_splitIconName(pe){if(!pe)return["",""];const we=pe.split(":");switch(we.length){case 1:return["",we[0]];case 2:return we;default:throw Error(`Invalid icon name: "${pe}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const pe=this._elementsWithExternalReferences;if(pe&&pe.size){const we=this._location.getPathname();we!==this._previousPath&&(this._previousPath=we,this._prependPathToReferences(we))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(pe){this._clearSvgElement();const we=pe.querySelectorAll("style");for(let ui=0;ui<we.length;ui++)we[ui].textContent+=" ";const Ve=this._location.getPathname();this._previousPath=Ve,this._cacheChildrenWithExternalReferences(pe),this._prependPathToReferences(Ve),this._elementRef.nativeElement.appendChild(pe)}_clearSvgElement(){const pe=this._elementRef.nativeElement;let we=pe.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();we--;){const Ve=pe.childNodes[we];(1!==Ve.nodeType||"svg"===Ve.nodeName.toLowerCase())&&Ve.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const pe=this._elementRef.nativeElement,we=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();we!=this._previousFontSetClass&&(this._previousFontSetClass&&pe.classList.remove(this._previousFontSetClass),we&&pe.classList.add(we),this._previousFontSetClass=we),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&pe.classList.remove(this._previousFontIconClass),this.fontIcon&&pe.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(pe){return"string"==typeof pe?pe.trim().split(" ")[0]:pe}_prependPathToReferences(pe){const we=this._elementsWithExternalReferences;we&&we.forEach((Ve,ui)=>{Ve.forEach(Ke=>{ui.setAttribute(Ke.name,`url('${pe}#${Ke.value}')`)})})}_cacheChildrenWithExternalReferences(pe){const we=pe.querySelectorAll(me),Ve=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let ui=0;ui<we.length;ui++)Ze.forEach(Ke=>{const be=we[ui],Xt=be.getAttribute(Ke),re=Xt?Xt.match(Be):null;if(re){let Me=Ve.get(be);Me||(Me=[],Ve.set(be,Me)),Me.push({name:Ke,value:re[1]})}})}_updateSvgIcon(pe){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),pe){const[we,Ve]=this._splitIconName(pe);we&&(this._svgNamespace=we),Ve&&(this._svgName=Ve),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(Ve,we).pipe((0,G.q)(1)).subscribe(ui=>this._setSvgElement(ui),ui=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${we}:${Ve}! ${ui.message}`))})}}}return Qe.\u0275fac=function(pe){return new(pe||Qe)(y.Y36(y.SBq),y.Y36(Rt),y.$8M("aria-hidden"),y.Y36(Vt),y.Y36(y.qLn))},Qe.\u0275cmp=y.Xpm({type:Qe,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(pe,we){2&pe&&(y.uIk("data-mat-icon-type",we._usingFontIcon()?"font":"svg")("data-mat-icon-name",we._svgName||we.fontIcon)("data-mat-icon-namespace",we._svgNamespace||we.fontSet),y.ekj("mat-icon-inline",we.inline)("mat-icon-no-color","primary"!==we.color&&"accent"!==we.color&&"warn"!==we.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[y.qOj],ngContentSelectors:it,decls:1,vars:0,template:function(pe,we){1&pe&&(y.F$t(),y.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),Qe})(),si=(()=>{class Qe{}return Qe.\u0275fac=function(pe){return new(pe||Qe)},Qe.\u0275mod=y.oAB({type:Qe}),Qe.\u0275inj=y.cJS({imports:[[p.BQ],p.BQ]}),Qe})()},92181:(L,W,m)=>{"use strict";m.d(W,{VK:()=>ui,OP:()=>Qe,Tx:()=>Ut,p6:()=>ie});var y=m(15664),p=m(63191),e=m(91159),t=m(5e3),n=m(77579),o=m(50727),s=m(56451),c=m(39646),v=m(53101),R=m(68675),O=m(63900),H=m(95698),V=m(39300),G=m(82722),Z=m(91005),vt=m(41777),it=m(99129),ot=m(69808),wt=m(90508),ct=m(91314),yt=m(70925),lt=m(50226),at=m(30495);const bt=["mat-menu-item",""];function tt(Ht,Zt){1&Ht&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"polygon",3),t.qZA())}const Rt=["*"];function mt(Ht,Zt){if(1&Ht){const Yt=t.EpF();t.TgZ(0,"div",0),t.NdJ("keydown",function(le){return t.CHM(Yt),t.oxw()._handleKeydown(le)})("click",function(){return t.CHM(Yt),t.oxw().closed.emit("click")})("@transformMenu.start",function(le){return t.CHM(Yt),t.oxw()._onAnimationStart(le)})("@transformMenu.done",function(le){return t.CHM(Yt),t.oxw()._onAnimationDone(le)}),t.TgZ(1,"div",1),t.Hsn(2),t.qZA(),t.qZA()}if(2&Ht){const Yt=t.oxw();t.Q6J("id",Yt.panelId)("ngClass",Yt._classList)("@transformMenu",Yt._panelAnimationState),t.uIk("aria-label",Yt.ariaLabel||null)("aria-labelledby",Yt.ariaLabelledby||null)("aria-describedby",Yt.ariaDescribedby||null)}}const dt={transformMenu:(0,vt.X$)("transformMenu",[(0,vt.SB)("void",(0,vt.oB)({opacity:0,transform:"scale(0.8)"})),(0,vt.eR)("void => enter",(0,vt.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,vt.oB)({opacity:1,transform:"scale(1)"}))),(0,vt.eR)("* => void",(0,vt.jt)("100ms 25ms linear",(0,vt.oB)({opacity:0})))]),fadeInItems:(0,vt.X$)("fadeInItems",[(0,vt.SB)("showing",(0,vt.oB)({opacity:1})),(0,vt.eR)("void => *",[(0,vt.oB)({opacity:0}),(0,vt.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Gt=new t.OlP("MatMenuContent"),Ge=new t.OlP("MAT_MENU_PANEL"),si=(0,wt.Kr)((0,wt.Id)(class{}));let Qe=(()=>{class Ht extends si{constructor(Yt,ue,le,Mt,Nt){super(),this._elementRef=Yt,this._focusMonitor=le,this._parentMenu=Mt,this._changeDetectorRef=Nt,this.role="menuitem",this._hovered=new n.x,this._focused=new n.x,this._highlighted=!1,this._triggersSubmenu=!1,Mt&&Mt.addItem&&Mt.addItem(this)}focus(Yt,ue){this._focusMonitor&&Yt?this._focusMonitor.focusVia(this._getHostElement(),Yt,ue):this._getHostElement().focus(ue),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(Yt){this.disabled&&(Yt.preventDefault(),Yt.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var Yt;const ue=this._elementRef.nativeElement.cloneNode(!0),le=ue.querySelectorAll("mat-icon, .material-icons");for(let Mt=0;Mt<le.length;Mt++)le[Mt].remove();return(null===(Yt=ue.textContent)||void 0===Yt?void 0:Yt.trim())||""}_setHighlighted(Yt){var ue;this._highlighted=Yt,null===(ue=this._changeDetectorRef)||void 0===ue||ue.markForCheck()}}return Ht.\u0275fac=function(Yt){return new(Yt||Ht)(t.Y36(t.SBq),t.Y36(ot.K0),t.Y36(y.tE),t.Y36(Ge,8),t.Y36(t.sBO))},Ht.\u0275cmp=t.Xpm({type:Ht,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(Yt,ue){1&Yt&&t.NdJ("click",function(Mt){return ue._checkDisabled(Mt)})("mouseenter",function(){return ue._handleMouseEnter()}),2&Yt&&(t.uIk("role",ue.role)("tabindex",ue._getTabIndex())("aria-disabled",ue.disabled.toString())("disabled",ue.disabled||null),t.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",ue._highlighted)("mat-menu-item-submenu-trigger",ue._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[t.qOj],attrs:bt,ngContentSelectors:Rt,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(Yt,ue){1&Yt&&(t.F$t(),t.Hsn(0),t._UZ(1,"div",0),t.YNc(2,tt,2,0,"svg",1)),2&Yt&&(t.xp6(1),t.Q6J("matRippleDisabled",ue.disableRipple||ue.disabled)("matRippleTrigger",ue._getHostElement()),t.xp6(1),t.Q6J("ngIf",ue._triggersSubmenu))},directives:[wt.wG,ot.O5],encapsulation:2,changeDetection:0}),Ht})();const Ne=new t.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let we=0,Ve=(()=>{class Ht{constructor(Yt,ue,le){this._elementRef=Yt,this._ngZone=ue,this._defaultOptions=le,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new t.n_E,this._tabSubscription=o.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new n.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new t.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+we++}get xPosition(){return this._xPosition}set xPosition(Yt){this._xPosition=Yt,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(Yt){this._yPosition=Yt,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(Yt){this._overlapTrigger=(0,p.Ig)(Yt)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(Yt){this._hasBackdrop=(0,p.Ig)(Yt)}set panelClass(Yt){const ue=this._previousPanelClass;ue&&ue.length&&ue.split(" ").forEach(le=>{this._classList[le]=!1}),this._previousPanelClass=Yt,Yt&&Yt.length&&(Yt.split(" ").forEach(le=>{this._classList[le]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(Yt){this.panelClass=Yt}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new y.Em(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,R.O)(this._directDescendantItems),(0,O.w)(Yt=>(0,s.T)(...Yt.map(ue=>ue._focused)))).subscribe(Yt=>this._keyManager.updateActiveItem(Yt))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe((0,R.O)(this._directDescendantItems),(0,O.w)(ue=>(0,s.T)(...ue.map(le=>le._hovered))))}addItem(Yt){}removeItem(Yt){}_handleKeydown(Yt){const ue=Yt.keyCode,le=this._keyManager;switch(ue){case e.hY:(0,e.Vb)(Yt)||(Yt.preventDefault(),this.closed.emit("keydown"));break;case e.oh:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case e.SV:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(ue===e.LH||ue===e.JH)&&le.setFocusOrigin("keyboard"),le.onKeydown(Yt)}}focusFirstItem(Yt="program"){this.lazyContent?this._ngZone.onStable.pipe((0,H.q)(1)).subscribe(()=>this._focusFirstItem(Yt)):this._focusFirstItem(Yt)}_focusFirstItem(Yt){const ue=this._keyManager;if(ue.setFocusOrigin(Yt).setFirstItemActive(),!ue.activeItem&&this._directDescendantItems.length){let le=this._directDescendantItems.first._getHostElement().parentElement;for(;le;){if("menu"===le.getAttribute("role")){le.focus();break}le=le.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(Yt){const ue=Math.min(this._baseElevation+Yt,24),le=`${this._elevationPrefix}${ue}`,Mt=Object.keys(this._classList).find(Nt=>Nt.startsWith(this._elevationPrefix));(!Mt||Mt===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[le]=!0,this._previousElevation=le)}setPositionClasses(Yt=this.xPosition,ue=this.yPosition){const le=this._classList;le["mat-menu-before"]="before"===Yt,le["mat-menu-after"]="after"===Yt,le["mat-menu-above"]="above"===ue,le["mat-menu-below"]="below"===ue}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(Yt){this._animationDone.next(Yt),this._isAnimating=!1}_onAnimationStart(Yt){this._isAnimating=!0,"enter"===Yt.toState&&0===this._keyManager.activeItemIndex&&(Yt.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,R.O)(this._allItems)).subscribe(Yt=>{this._directDescendantItems.reset(Yt.filter(ue=>ue._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return Ht.\u0275fac=function(Yt){return new(Yt||Ht)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(Ne))},Ht.\u0275dir=t.lG2({type:Ht,contentQueries:function(Yt,ue,le){if(1&Yt&&(t.Suo(le,Gt,5),t.Suo(le,Qe,5),t.Suo(le,Qe,4)),2&Yt){let Mt;t.iGM(Mt=t.CRH())&&(ue.lazyContent=Mt.first),t.iGM(Mt=t.CRH())&&(ue._allItems=Mt),t.iGM(Mt=t.CRH())&&(ue.items=Mt)}},viewQuery:function(Yt,ue){if(1&Yt&&t.Gf(t.Rgc,5),2&Yt){let le;t.iGM(le=t.CRH())&&(ue.templateRef=le.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),Ht})(),ui=(()=>{class Ht extends Ve{constructor(Yt,ue,le){super(Yt,ue,le),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return Ht.\u0275fac=function(Yt){return new(Yt||Ht)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(Ne))},Ht.\u0275cmp=t.Xpm({type:Ht,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(Yt,ue){2&Yt&&t.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[t._Bn([{provide:Ge,useExisting:Ht}]),t.qOj],ngContentSelectors:Rt,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(Yt,ue){1&Yt&&(t.F$t(),t.YNc(0,mt,3,6,"ng-template"))},directives:[ot.mk],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[dt.transformMenu,dt.fadeInItems]},changeDetection:0}),Ht})();const Ke=new t.OlP("mat-menu-scroll-strategy"),Xt={provide:Ke,deps:[ct.aV],useFactory:function(Ht){return()=>Ht.scrollStrategies.reposition()}},Me=(0,yt.i$)({passive:!0});let vi=(()=>{class Ht{constructor(Yt,ue,le,Mt,Nt,ke,je,li){this._overlay=Yt,this._element=ue,this._viewContainerRef=le,this._menuItemInstance=ke,this._dir=je,this._focusMonitor=li,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=o.w0.EMPTY,this._hoverSubscription=o.w0.EMPTY,this._menuCloseSubscription=o.w0.EMPTY,this._handleTouchStart=ri=>{(0,y.yG)(ri)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new t.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new t.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=Mt,this._parentMaterialMenu=Nt instanceof Ve?Nt:void 0,ue.nativeElement.addEventListener("touchstart",this._handleTouchStart,Me),ke&&(ke._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(Yt){this.menu=Yt}get menu(){return this._menu}set menu(Yt){Yt!==this._menu&&(this._menu=Yt,this._menuCloseSubscription.unsubscribe(),Yt&&(this._menuCloseSubscription=Yt.close.subscribe(ue=>{this._destroyMenu(ue),("click"===ue||"tab"===ue)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(ue)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,Me),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const Yt=this._createOverlay(),ue=Yt.getConfig();this._setPosition(ue.positionStrategy),ue.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,Yt.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Ve&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(Yt,ue){this._focusMonitor&&Yt?this._focusMonitor.focusVia(this._element,Yt,ue):this._element.nativeElement.focus(ue)}updatePosition(){var Yt;null===(Yt=this._overlayRef)||void 0===Yt||Yt.updatePosition()}_destroyMenu(Yt){if(!this._overlayRef||!this.menuOpen)return;const ue=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===Yt||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,ue instanceof Ve?(ue._resetAnimation(),ue.lazyContent?ue._animationDone.pipe((0,V.h)(le=>"void"===le.toState),(0,H.q)(1),(0,G.R)(ue.lazyContent._attached)).subscribe({next:()=>ue.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),ue.lazyContent&&ue.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let Yt=0,ue=this.menu.parentMenu;for(;ue;)Yt++,ue=ue.parentMenu;this.menu.setElevation(Yt)}}_setIsMenuOpen(Yt){this._menuOpen=Yt,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(Yt)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const Yt=this._getOverlayConfig();this._subscribeToPositions(Yt.positionStrategy),this._overlayRef=this._overlay.create(Yt),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new ct.X_({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(Yt){this.menu.setPositionClasses&&Yt.positionChanges.subscribe(ue=>{this.menu.setPositionClasses("start"===ue.connectionPair.overlayX?"after":"before","top"===ue.connectionPair.overlayY?"below":"above")})}_setPosition(Yt){let[ue,le]="before"===this.menu.xPosition?["end","start"]:["start","end"],[Mt,Nt]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[ke,je]=[Mt,Nt],[li,ri]=[ue,le],mi=0;this.triggersSubmenu()?(ri=ue="before"===this.menu.xPosition?"start":"end",le=li="end"===ue?"start":"end",mi="bottom"===Mt?8:-8):this.menu.overlapTrigger||(ke="top"===Mt?"bottom":"top",je="top"===Nt?"bottom":"top"),Yt.withPositions([{originX:ue,originY:ke,overlayX:li,overlayY:Mt,offsetY:mi},{originX:le,originY:ke,overlayX:ri,overlayY:Mt,offsetY:mi},{originX:ue,originY:je,overlayX:li,overlayY:Nt,offsetY:-mi},{originX:le,originY:je,overlayX:ri,overlayY:Nt,offsetY:-mi}])}_menuClosingActions(){const Yt=this._overlayRef.backdropClick(),ue=this._overlayRef.detachments(),le=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,c.of)(),Mt=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,V.h)(Nt=>Nt!==this._menuItemInstance),(0,V.h)(()=>this._menuOpen)):(0,c.of)();return(0,s.T)(Yt,le,Mt,ue)}_handleMousedown(Yt){(0,y.X6)(Yt)||(this._openedBy=0===Yt.button?"mouse":void 0,this.triggersSubmenu()&&Yt.preventDefault())}_handleKeydown(Yt){const ue=Yt.keyCode;(ue===e.K5||ue===e.L_)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(ue===e.SV&&"ltr"===this.dir||ue===e.oh&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(Yt){this.triggersSubmenu()?(Yt.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,V.h)(Yt=>Yt===this._menuItemInstance&&!Yt.disabled),(0,Z.g)(0,v.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Ve&&this.menu._isAnimating?this.menu._animationDone.pipe((0,H.q)(1),(0,Z.g)(0,v.E),(0,G.R)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new it.UE(this.menu.templateRef,this._viewContainerRef)),this._portal}}return Ht.\u0275fac=function(Yt){return new(Yt||Ht)(t.Y36(ct.aV),t.Y36(t.SBq),t.Y36(t.s_b),t.Y36(Ke),t.Y36(Ge,8),t.Y36(Qe,10),t.Y36(lt.Is,8),t.Y36(y.tE))},Ht.\u0275dir=t.lG2({type:Ht,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(Yt,ue){1&Yt&&t.NdJ("click",function(Mt){return ue._handleClick(Mt)})("mousedown",function(Mt){return ue._handleMousedown(Mt)})("keydown",function(Mt){return ue._handleKeydown(Mt)}),2&Yt&&t.uIk("aria-expanded",ue.menuOpen||null)("aria-controls",ue.menuOpen?ue.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),Ht})(),ie=(()=>{class Ht extends vi{}return Ht.\u0275fac=function(){let Zt;return function(ue){return(Zt||(Zt=t.n5z(Ht)))(ue||Ht)}}(),Ht.\u0275dir=t.lG2({type:Ht,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[t.qOj]}),Ht})(),Ut=(()=>{class Ht{}return Ht.\u0275fac=function(Yt){return new(Yt||Ht)},Ht.\u0275mod=t.oAB({type:Ht}),Ht.\u0275inj=t.cJS({providers:[Xt],imports:[[ot.ez,wt.BQ,wt.si,ct.U8],at.ZD,wt.BQ]}),Ht})()},20773:(L,W,m)=>{"use strict";m.d(W,{Cq:()=>ct,$g:()=>wt});var y=m(5e3),p=m(69808),e=m(90508),t=m(63191),n=m(70925),o=m(76360);function s(yt,lt){if(1&yt&&(y.O4$(),y._UZ(0,"circle",3)),2&yt){const at=y.oxw();y.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+at._spinnerAnimationLabel)("stroke-dashoffset",at._getStrokeDashOffset(),"px")("stroke-dasharray",at._getStrokeCircumference(),"px")("stroke-width",at._getCircleStrokeWidth(),"%"),y.uIk("r",at._getCircleRadius())}}function c(yt,lt){if(1&yt&&(y.O4$(),y._UZ(0,"circle",3)),2&yt){const at=y.oxw();y.Udp("stroke-dashoffset",at._getStrokeDashOffset(),"px")("stroke-dasharray",at._getStrokeCircumference(),"px")("stroke-width",at._getCircleStrokeWidth(),"%"),y.uIk("r",at._getCircleRadius())}}function v(yt,lt){if(1&yt&&(y.O4$(),y._UZ(0,"circle",3)),2&yt){const at=y.oxw();y.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+at._spinnerAnimationLabel)("stroke-dashoffset",at._getStrokeDashOffset(),"px")("stroke-dasharray",at._getStrokeCircumference(),"px")("stroke-width",at._getCircleStrokeWidth(),"%"),y.uIk("r",at._getCircleRadius())}}function R(yt,lt){if(1&yt&&(y.O4$(),y._UZ(0,"circle",3)),2&yt){const at=y.oxw();y.Udp("stroke-dashoffset",at._getStrokeDashOffset(),"px")("stroke-dasharray",at._getStrokeCircumference(),"px")("stroke-width",at._getCircleStrokeWidth(),"%"),y.uIk("r",at._getCircleRadius())}}const G=(0,e.pj)(class{constructor(yt){this._elementRef=yt}},"primary"),Z=new y.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class ot extends G{constructor(lt,at,bt,tt,Rt){super(lt),this._document=bt,this._diameter=100,this._value=0,this.mode="determinate";const mt=ot._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),mt.has(bt.head)||mt.set(bt.head,new Set([100])),this._noopAnimations="NoopAnimations"===tt&&!!Rt&&!Rt._forceAnimations,Rt&&(Rt.diameter&&(this.diameter=Rt.diameter),Rt.strokeWidth&&(this.strokeWidth=Rt.strokeWidth))}get diameter(){return this._diameter}set diameter(lt){this._diameter=(0,t.su)(lt),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(lt){this._strokeWidth=(0,t.su)(lt)}get value(){return"determinate"===this.mode?this._value:0}set value(lt){this._value=Math.max(0,Math.min(100,(0,t.su)(lt)))}ngOnInit(){const lt=this._elementRef.nativeElement;this._styleRoot=(0,n.kV)(lt)||this._document.head,this._attachStyleNode(),lt.classList.add("mat-progress-spinner-indeterminate-animation")}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const lt=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${lt} ${lt}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const lt=this._styleRoot,at=this._diameter,bt=ot._diameters;let tt=bt.get(lt);if(!tt||!tt.has(at)){const Rt=this._document.createElement("style");Rt.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),Rt.textContent=this._getAnimationText(),lt.appendChild(Rt),tt||(tt=new Set,bt.set(lt,tt)),tt.add(at)}}_getAnimationText(){const lt=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*lt).replace(/END_VALUE/g,""+.2*lt).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}ot._diameters=new WeakMap,ot.\u0275fac=function(lt){return new(lt||ot)(y.Y36(y.SBq),y.Y36(n.t4),y.Y36(p.K0,8),y.Y36(o.Qb,8),y.Y36(Z))},ot.\u0275cmp=y.Xpm({type:ot,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(lt,at){2&lt&&(y.uIk("aria-valuemin","determinate"===at.mode?0:null)("aria-valuemax","determinate"===at.mode?100:null)("aria-valuenow","determinate"===at.mode?at.value:null)("mode",at.mode),y.Udp("width",at.diameter,"px")("height",at.diameter,"px"),y.ekj("_mat-animation-noopable",at._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[y.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(lt,at){1&lt&&(y.O4$(),y.TgZ(0,"svg",0),y.YNc(1,s,1,9,"circle",1),y.YNc(2,c,1,7,"circle",2),y.qZA()),2&lt&&(y.Udp("width",at.diameter,"px")("height",at.diameter,"px"),y.Q6J("ngSwitch","indeterminate"===at.mode),y.uIk("viewBox",at._getViewBox()),y.xp6(1),y.Q6J("ngSwitchCase",!0),y.xp6(1),y.Q6J("ngSwitchCase",!1))},directives:[p.RF,p.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let wt=(()=>{class yt extends ot{constructor(at,bt,tt,Rt,mt){super(at,bt,tt,Rt,mt),this.mode="indeterminate"}}return yt.\u0275fac=function(at){return new(at||yt)(y.Y36(y.SBq),y.Y36(n.t4),y.Y36(p.K0,8),y.Y36(o.Qb,8),y.Y36(Z))},yt.\u0275cmp=y.Xpm({type:yt,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(at,bt){2&at&&(y.Udp("width",bt.diameter,"px")("height",bt.diameter,"px"),y.ekj("_mat-animation-noopable",bt._noopAnimations))},inputs:{color:"color"},features:[y.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(at,bt){1&at&&(y.O4$(),y.TgZ(0,"svg",0),y.YNc(1,v,1,9,"circle",1),y.YNc(2,R,1,7,"circle",2),y.qZA()),2&at&&(y.Udp("width",bt.diameter,"px")("height",bt.diameter,"px"),y.Q6J("ngSwitch","indeterminate"===bt.mode),y.uIk("viewBox",bt._getViewBox()),y.xp6(1),y.Q6J("ngSwitchCase",!0),y.xp6(1),y.Q6J("ngSwitchCase",!1))},directives:[p.RF,p.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0}),yt})(),ct=(()=>{class yt{}return yt.\u0275fac=function(at){return new(at||yt)},yt.\u0275mod=y.oAB({type:yt}),yt.\u0275inj=y.cJS({imports:[[e.BQ,p.ez],e.BQ]}),yt})()},57261:(L,W,m)=>{"use strict";m.d(W,{ux:()=>Rt,ZX:()=>at});var y=m(91314),p=m(99129),e=m(69808),t=m(5e3),n=m(90508),o=m(47423),s=m(77579),c=m(95698),v=m(82722),R=m(41777),O=m(70925),H=m(95113),V=m(15664);function G(mt,dt){if(1&mt){const nt=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"button",2),t.NdJ("click",function(){return t.CHM(nt),t.oxw().action()}),t._uU(2),t.qZA(),t.qZA()}if(2&mt){const nt=t.oxw();t.xp6(2),t.Oqu(nt.data.action)}}function Z(mt,dt){}const vt=new t.OlP("MatSnackBarData");class it{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const ot=Math.pow(2,31)-1;class wt{constructor(dt,nt){this._overlayRef=nt,this._afterDismissed=new s.x,this._afterOpened=new s.x,this._onAction=new s.x,this._dismissedByAction=!1,this.containerInstance=dt,this.onAction().subscribe(()=>this.dismiss()),dt._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(dt){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(dt,ot))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let ct=(()=>{class mt{constructor(nt,st){this.snackBarRef=nt,this.data=st}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return mt.\u0275fac=function(nt){return new(nt||mt)(t.Y36(wt),t.Y36(vt))},mt.\u0275cmp=t.Xpm({type:mt,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(nt,st){1&nt&&(t.TgZ(0,"span"),t._uU(1),t.qZA(),t.YNc(2,G,3,1,"div",0)),2&nt&&(t.xp6(1),t.Oqu(st.data.message),t.xp6(1),t.Q6J("ngIf",st.hasAction))},directives:[e.O5,o.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),mt})();const yt={snackBarState:(0,R.X$)("state",[(0,R.SB)("void, hidden",(0,R.oB)({transform:"scale(0.8)",opacity:0})),(0,R.SB)("visible",(0,R.oB)({transform:"scale(1)",opacity:1})),(0,R.eR)("* => visible",(0,R.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,R.eR)("* => void, * => hidden",(0,R.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,R.oB)({opacity:0})))])};let lt=(()=>{class mt extends p.en{constructor(nt,st,Gt,It,Vt){super(),this._ngZone=nt,this._elementRef=st,this._changeDetectorRef=Gt,this._platform=It,this.snackBarConfig=Vt,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new s.x,this._onExit=new s.x,this._onEnter=new s.x,this._animationState="void",this.attachDomPortal=Ie=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(Ie)),this._live="assertive"!==Vt.politeness||Vt.announcementMessage?"off"===Vt.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(nt){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(nt)}attachTemplatePortal(nt){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(nt)}onAnimationEnd(nt){const{fromState:st,toState:Gt}=nt;if(("void"===Gt&&"void"!==st||"hidden"===Gt)&&this._completeExit(),"visible"===Gt){const It=this._onEnter;this._ngZone.run(()=>{It.next(),It.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,c.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const nt=this._elementRef.nativeElement,st=this.snackBarConfig.panelClass;st&&(Array.isArray(st)?st.forEach(Gt=>nt.classList.add(Gt)):nt.classList.add(st)),"center"===this.snackBarConfig.horizontalPosition&&nt.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&nt.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const nt=this._elementRef.nativeElement.querySelector("[aria-hidden]"),st=this._elementRef.nativeElement.querySelector("[aria-live]");if(nt&&st){let Gt=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&nt.contains(document.activeElement)&&(Gt=document.activeElement),nt.removeAttribute("aria-hidden"),st.appendChild(nt),null==Gt||Gt.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return mt.\u0275fac=function(nt){return new(nt||mt)(t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(O.t4),t.Y36(it))},mt.\u0275cmp=t.Xpm({type:mt,selectors:[["snack-bar-container"]],viewQuery:function(nt,st){if(1&nt&&t.Gf(p.Pl,7),2&nt){let Gt;t.iGM(Gt=t.CRH())&&(st._portalOutlet=Gt.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(nt,st){1&nt&&t.WFA("@state.done",function(It){return st.onAnimationEnd(It)}),2&nt&&t.d8E("@state",st._animationState)},features:[t.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(nt,st){1&nt&&(t.TgZ(0,"div",0),t.YNc(1,Z,0,0,"ng-template",1),t.qZA(),t._UZ(2,"div")),2&nt&&(t.xp6(2),t.uIk("aria-live",st._live)("role",st._role))},directives:[p.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[yt.snackBarState]}}),mt})(),at=(()=>{class mt{}return mt.\u0275fac=function(nt){return new(nt||mt)},mt.\u0275mod=t.oAB({type:mt}),mt.\u0275inj=t.cJS({imports:[[y.U8,p.eL,e.ez,o.ot,n.BQ],n.BQ]}),mt})();const bt=new t.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new it}});let Rt=(()=>{class mt{constructor(nt,st,Gt,It,Vt,Ie){this._overlay=nt,this._live=st,this._injector=Gt,this._breakpointObserver=It,this._parentSnackBar=Vt,this._defaultConfig=Ie,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=ct,this.snackBarContainerComponent=lt,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const nt=this._parentSnackBar;return nt?nt._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(nt){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=nt:this._snackBarRefAtThisLevel=nt}openFromComponent(nt,st){return this._attach(nt,st)}openFromTemplate(nt,st){return this._attach(nt,st)}open(nt,st="",Gt){const It=Object.assign(Object.assign({},this._defaultConfig),Gt);return It.data={message:nt,action:st},It.announcementMessage===nt&&(It.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,It)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(nt,st){const It=t.zs3.create({parent:st&&st.viewContainerRef&&st.viewContainerRef.injector||this._injector,providers:[{provide:it,useValue:st}]}),Vt=new p.C5(this.snackBarContainerComponent,st.viewContainerRef,It),Ie=nt.attach(Vt);return Ie.instance.snackBarConfig=st,Ie.instance}_attach(nt,st){const Gt=Object.assign(Object.assign(Object.assign({},new it),this._defaultConfig),st),It=this._createOverlay(Gt),Vt=this._attachSnackBarContainer(It,Gt),Ie=new wt(Vt,It);if(nt instanceof t.Rgc){const Ze=new p.UE(nt,null,{$implicit:Gt.data,snackBarRef:Ie});Ie.instance=Vt.attachTemplatePortal(Ze)}else{const Ze=this._createInjector(Gt,Ie),me=new p.C5(nt,void 0,Ze),Be=Vt.attachComponentPortal(me);Ie.instance=Be.instance}return this._breakpointObserver.observe(H.u3.HandsetPortrait).pipe((0,v.R)(It.detachments())).subscribe(Ze=>{It.overlayElement.classList.toggle(this.handsetCssClass,Ze.matches)}),Gt.announcementMessage&&Vt._onAnnounce.subscribe(()=>{this._live.announce(Gt.announcementMessage,Gt.politeness)}),this._animateSnackBar(Ie,Gt),this._openedSnackBarRef=Ie,this._openedSnackBarRef}_animateSnackBar(nt,st){nt.afterDismissed().subscribe(()=>{this._openedSnackBarRef==nt&&(this._openedSnackBarRef=null),st.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{nt.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):nt.containerInstance.enter(),st.duration&&st.duration>0&&nt.afterOpened().subscribe(()=>nt._dismissAfter(st.duration))}_createOverlay(nt){const st=new y.X_;st.direction=nt.direction;let Gt=this._overlay.position().global();const It="rtl"===nt.direction,Vt="left"===nt.horizontalPosition||"start"===nt.horizontalPosition&&!It||"end"===nt.horizontalPosition&&It,Ie=!Vt&&"center"!==nt.horizontalPosition;return Vt?Gt.left("0"):Ie?Gt.right("0"):Gt.centerHorizontally(),"top"===nt.verticalPosition?Gt.top("0"):Gt.bottom("0"),st.positionStrategy=Gt,this._overlay.create(st)}_createInjector(nt,st){return t.zs3.create({parent:nt&&nt.viewContainerRef&&nt.viewContainerRef.injector||this._injector,providers:[{provide:wt,useValue:st},{provide:vt,useValue:nt.data}]})}}return mt.\u0275fac=function(nt){return new(nt||mt)(t.LFG(y.aV),t.LFG(V.Kd),t.LFG(t.zs3),t.LFG(H.Yg),t.LFG(mt,12),t.LFG(bt))},mt.\u0275prov=t.Yz7({token:mt,factory:mt.\u0275fac,providedIn:at}),mt})()},76360:(L,W,m)=>{"use strict";m.d(W,{Qb:()=>Vs,PW:()=>Di});var y=m(5e3),p=m(22313),e=m(41777);function t(){return"undefined"!=typeof window&&void 0!==window.document}function n(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function o(Bt){switch(Bt.length){case 0:return new e.ZN;case 1:return Bt[0];default:return new e.ZE(Bt)}}function s(Bt,U,X,gt,Pt={},$t={}){const Ce=[],Ae=[];let qe=-1,Ei=null;if(gt.forEach(Ni=>{const Gi=Ni.offset,dn=Gi==qe,Tn=dn&&Ei||{};Object.keys(Ni).forEach(on=>{let _n=on,Cn=Ni[on];if("offset"!==on)switch(_n=U.normalizePropertyName(_n,Ce),Cn){case e.k1:Cn=Pt[on];break;case e.l3:Cn=$t[on];break;default:Cn=U.normalizeStyleValue(on,_n,Cn,Ce)}Tn[_n]=Cn}),dn||Ae.push(Tn),Ei=Tn,qe=Gi}),Ce.length){const Ni="\n - ";throw new Error(`Unable to animate due to the following errors:${Ni}${Ce.join(Ni)}`)}return Ae}function c(Bt,U,X,gt){switch(U){case"start":Bt.onStart(()=>gt(X&&v(X,"start",Bt)));break;case"done":Bt.onDone(()=>gt(X&&v(X,"done",Bt)));break;case"destroy":Bt.onDestroy(()=>gt(X&&v(X,"destroy",Bt)))}}function v(Bt,U,X){const gt=X.totalTime,$t=R(Bt.element,Bt.triggerName,Bt.fromState,Bt.toState,U||Bt.phaseName,null==gt?Bt.totalTime:gt,!!X.disabled),Ce=Bt._data;return null!=Ce&&($t._data=Ce),$t}function R(Bt,U,X,gt,Pt="",$t=0,Ce){return{element:Bt,triggerName:U,fromState:X,toState:gt,phaseName:Pt,totalTime:$t,disabled:!!Ce}}function O(Bt,U,X){let gt;return Bt instanceof Map?(gt=Bt.get(U),gt||Bt.set(U,gt=X)):(gt=Bt[U],gt||(gt=Bt[U]=X)),gt}function H(Bt){const U=Bt.indexOf(":");return[Bt.substring(1,U),Bt.substr(U+1)]}let V=(Bt,U)=>!1,G=(Bt,U,X)=>[];(n()||"undefined"!=typeof Element)&&(V=t()?(Bt,U)=>{for(;U&&U!==document.documentElement;){if(U===Bt)return!0;U=U.parentNode||U.host}return!1}:(Bt,U)=>Bt.contains(U),G=(Bt,U,X)=>{let gt=[];if(X){const Pt=Bt.querySelectorAll(U);for(let $t=0;$t<Pt.length;$t++)gt.push(Pt[$t])}else{const Pt=Bt.querySelector(U);Pt&&gt.push(Pt)}return gt});let it=null,ot=!1;function wt(Bt){it||(it=("undefined"!=typeof document?document.body:null)||{},ot=!!it.style&&"WebkitAppearance"in it.style);let U=!0;return it.style&&!function(Bt){return"ebkit"==Bt.substring(1,6)}(Bt)&&(U=Bt in it.style,!U&&ot&&(U="Webkit"+Bt.charAt(0).toUpperCase()+Bt.substr(1)in it.style)),U}const yt=V,lt=G;function at(Bt){const U={};return Object.keys(Bt).forEach(X=>{const gt=X.replace(/([a-z])([A-Z])/g,"$1-$2");U[gt]=Bt[X]}),U}let bt=(()=>{class Bt{validateStyleProperty(X){return wt(X)}matchesElement(X,gt){return!1}containsElement(X,gt){return yt(X,gt)}query(X,gt,Pt){return lt(X,gt,Pt)}computeStyle(X,gt,Pt){return Pt||""}animate(X,gt,Pt,$t,Ce,Ae=[],qe){return new e.ZN(Pt,$t)}}return Bt.\u0275fac=function(X){return new(X||Bt)},Bt.\u0275prov=y.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})(),tt=(()=>{class Bt{}return Bt.NOOP=new bt,Bt})();const nt="ng-enter",st="ng-leave",Vt="ng-trigger",Ie=".ng-trigger",Ze="ng-animating",me=".ng-animating";function Be(Bt){if("number"==typeof Bt)return Bt;const U=Bt.match(/^(-?[\.\d]+)(m?s)/);return!U||U.length<2?0:Ge(parseFloat(U[1]),U[2])}function Ge(Bt,U){return"s"===U?1e3*Bt:Bt}function si(Bt,U,X){return Bt.hasOwnProperty("duration")?Bt:function(Bt,U,X){let Pt,$t=0,Ce="";if("string"==typeof Bt){const Ae=Bt.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Ae)return U.push(`The provided timing value "${Bt}" is invalid.`),{duration:0,delay:0,easing:""};Pt=Ge(parseFloat(Ae[1]),Ae[2]);const qe=Ae[3];null!=qe&&($t=Ge(parseFloat(qe),Ae[4]));const Ei=Ae[5];Ei&&(Ce=Ei)}else Pt=Bt;if(!X){let Ae=!1,qe=U.length;Pt<0&&(U.push("Duration values below 0 are not allowed for this animation step."),Ae=!0),$t<0&&(U.push("Delay values below 0 are not allowed for this animation step."),Ae=!0),Ae&&U.splice(qe,0,`The provided timing value "${Bt}" is invalid.`)}return{duration:Pt,delay:$t,easing:Ce}}(Bt,U,X)}function Ne(Bt,U={}){return Object.keys(Bt).forEach(X=>{U[X]=Bt[X]}),U}function we(Bt,U,X={}){if(U)for(let gt in Bt)X[gt]=Bt[gt];else Ne(Bt,X);return X}function Ve(Bt,U,X){return X?U+":"+X+";":""}function ui(Bt){let U="";for(let X=0;X<Bt.style.length;X++){const gt=Bt.style.item(X);U+=Ve(0,gt,Bt.style.getPropertyValue(gt))}for(const X in Bt.style)Bt.style.hasOwnProperty(X)&&!X.startsWith("_")&&(U+=Ve(0,Yt(X),Bt.style[X]));Bt.setAttribute("style",U)}function Ke(Bt,U,X){Bt.style&&(Object.keys(U).forEach(gt=>{const Pt=Zt(gt);X&&!X.hasOwnProperty(gt)&&(X[gt]=Bt.style[Pt]),Bt.style[Pt]=U[gt]}),n()&&ui(Bt))}function be(Bt,U){Bt.style&&(Object.keys(U).forEach(X=>{const gt=Zt(X);Bt.style[gt]=""}),n()&&ui(Bt))}function Xt(Bt){return Array.isArray(Bt)?1==Bt.length?Bt[0]:(0,e.vP)(Bt):Bt}const Me=new RegExp("{{\\s*(.+?)\\s*}}","g");function vi(Bt){let U=[];if("string"==typeof Bt){let X;for(;X=Me.exec(Bt);)U.push(X[1]);Me.lastIndex=0}return U}function ie(Bt,U,X){const gt=Bt.toString(),Pt=gt.replace(Me,($t,Ce)=>{let Ae=U[Ce];return U.hasOwnProperty(Ce)||(X.push(`Please provide a value for the animation param ${Ce}`),Ae=""),Ae.toString()});return Pt==gt?Bt:Pt}function Ut(Bt){const U=[];let X=Bt.next();for(;!X.done;)U.push(X.value),X=Bt.next();return U}const Ht=/-+([a-z0-9])/g;function Zt(Bt){return Bt.replace(Ht,(...U)=>U[1].toUpperCase())}function Yt(Bt){return Bt.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ue(Bt,U){return 0===Bt||0===U}function le(Bt,U,X){const gt=Object.keys(X);if(gt.length&&U.length){let $t=U[0],Ce=[];if(gt.forEach(Ae=>{$t.hasOwnProperty(Ae)||Ce.push(Ae),$t[Ae]=X[Ae]}),Ce.length)for(var Pt=1;Pt<U.length;Pt++){let Ae=U[Pt];Ce.forEach(function(qe){Ae[qe]=Nt(Bt,qe)})}}return U}function Mt(Bt,U,X){switch(U.type){case 7:return Bt.visitTrigger(U,X);case 0:return Bt.visitState(U,X);case 1:return Bt.visitTransition(U,X);case 2:return Bt.visitSequence(U,X);case 3:return Bt.visitGroup(U,X);case 4:return Bt.visitAnimate(U,X);case 5:return Bt.visitKeyframes(U,X);case 6:return Bt.visitStyle(U,X);case 8:return Bt.visitReference(U,X);case 9:return Bt.visitAnimateChild(U,X);case 10:return Bt.visitAnimateRef(U,X);case 11:return Bt.visitQuery(U,X);case 12:return Bt.visitStagger(U,X);default:throw new Error(`Unable to resolve animation metadata node #${U.type}`)}}function Nt(Bt,U){return window.getComputedStyle(Bt)[U]}function je(Bt,U){const X=[];return"string"==typeof Bt?Bt.split(/\s*,\s*/).forEach(gt=>function(Bt,U,X){if(":"==Bt[0]){const qe=function(Bt,U){switch(Bt){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(X,gt)=>parseFloat(gt)>parseFloat(X);case":decrement":return(X,gt)=>parseFloat(gt)<parseFloat(X);default:return U.push(`The transition alias value "${Bt}" is not supported`),"* => *"}}(Bt,X);if("function"==typeof qe)return void U.push(qe);Bt=qe}const gt=Bt.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==gt||gt.length<4)return X.push(`The provided transition expression "${Bt}" is not supported`),U;const Pt=gt[1],$t=gt[2],Ce=gt[3];U.push(pi(Pt,Ce));"<"==$t[0]&&!("*"==Pt&&"*"==Ce)&&U.push(pi(Ce,Pt))}(gt,X,U)):X.push(Bt),X}const mi=new Set(["true","1"]),Bi=new Set(["false","0"]);function pi(Bt,U){const X=mi.has(Bt)||Bi.has(Bt),gt=mi.has(U)||Bi.has(U);return(Pt,$t)=>{let Ce="*"==Bt||Bt==Pt,Ae="*"==U||U==$t;return!Ce&&X&&"boolean"==typeof Pt&&(Ce=Pt?mi.has(Bt):Bi.has(Bt)),!Ae&&gt&&"boolean"==typeof $t&&(Ae=$t?mi.has(U):Bi.has(U)),Ce&&Ae}}const yi=new RegExp("s*:selfs*,?","g");function $e(Bt,U,X){return new ae(Bt).build(U,X)}class ae{constructor(U){this._driver=U}build(U,X){const gt=new Te(X);return this._resetContextStyleTimingState(gt),Mt(this,Xt(U),gt)}_resetContextStyleTimingState(U){U.currentQuerySelector="",U.collectedStyles={},U.collectedStyles[""]={},U.currentTime=0}visitTrigger(U,X){let gt=X.queryCount=0,Pt=X.depCount=0;const $t=[],Ce=[];return"@"==U.name.charAt(0)&&X.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),U.definitions.forEach(Ae=>{if(this._resetContextStyleTimingState(X),0==Ae.type){const qe=Ae,Ei=qe.name;Ei.toString().split(/\s*,\s*/).forEach(Ni=>{qe.name=Ni,$t.push(this.visitState(qe,X))}),qe.name=Ei}else if(1==Ae.type){const qe=this.visitTransition(Ae,X);gt+=qe.queryCount,Pt+=qe.depCount,Ce.push(qe)}else X.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:U.name,states:$t,transitions:Ce,queryCount:gt,depCount:Pt,options:null}}visitState(U,X){const gt=this.visitStyle(U.styles,X),Pt=U.options&&U.options.params||null;if(gt.containsDynamicStyles){const $t=new Set,Ce=Pt||{};if(gt.styles.forEach(Ae=>{if(se(Ae)){const qe=Ae;Object.keys(qe).forEach(Ei=>{vi(qe[Ei]).forEach(Ni=>{Ce.hasOwnProperty(Ni)||$t.add(Ni)})})}}),$t.size){const Ae=Ut($t.values());X.errors.push(`state("${U.name}", ...) must define default values for all the following style substitutions: ${Ae.join(", ")}`)}}return{type:0,name:U.name,style:gt,options:Pt?{params:Pt}:null}}visitTransition(U,X){X.queryCount=0,X.depCount=0;const gt=Mt(this,Xt(U.animation),X);return{type:1,matchers:je(U.expr,X.errors),animation:gt,queryCount:X.queryCount,depCount:X.depCount,options:te(U.options)}}visitSequence(U,X){return{type:2,steps:U.steps.map(gt=>Mt(this,gt,X)),options:te(U.options)}}visitGroup(U,X){const gt=X.currentTime;let Pt=0;const $t=U.steps.map(Ce=>{X.currentTime=gt;const Ae=Mt(this,Ce,X);return Pt=Math.max(Pt,X.currentTime),Ae});return X.currentTime=Pt,{type:3,steps:$t,options:te(U.options)}}visitAnimate(U,X){const gt=function(Bt,U){let X=null;if(Bt.hasOwnProperty("duration"))X=Bt;else if("number"==typeof Bt)return qt(si(Bt,U).duration,0,"");const gt=Bt;if(gt.split(/\s+/).some($t=>"{"==$t.charAt(0)&&"{"==$t.charAt(1))){const $t=qt(0,0,"");return $t.dynamic=!0,$t.strValue=gt,$t}return X=X||si(gt,U),qt(X.duration,X.delay,X.easing)}(U.timings,X.errors);X.currentAnimateTimings=gt;let Pt,$t=U.styles?U.styles:(0,e.oB)({});if(5==$t.type)Pt=this.visitKeyframes($t,X);else{let Ce=U.styles,Ae=!1;if(!Ce){Ae=!0;const Ei={};gt.easing&&(Ei.easing=gt.easing),Ce=(0,e.oB)(Ei)}X.currentTime+=gt.duration+gt.delay;const qe=this.visitStyle(Ce,X);qe.isEmptyStep=Ae,Pt=qe}return X.currentAnimateTimings=null,{type:4,timings:gt,style:Pt,options:null}}visitStyle(U,X){const gt=this._makeStyleAst(U,X);return this._validateStyleAst(gt,X),gt}_makeStyleAst(U,X){const gt=[];Array.isArray(U.styles)?U.styles.forEach(Ce=>{"string"==typeof Ce?Ce==e.l3?gt.push(Ce):X.errors.push(`The provided style string value ${Ce} is not allowed.`):gt.push(Ce)}):gt.push(U.styles);let Pt=!1,$t=null;return gt.forEach(Ce=>{if(se(Ce)){const Ae=Ce,qe=Ae.easing;if(qe&&($t=qe,delete Ae.easing),!Pt)for(let Ei in Ae)if(Ae[Ei].toString().indexOf("{{")>=0){Pt=!0;break}}}),{type:6,styles:gt,easing:$t,offset:U.offset,containsDynamicStyles:Pt,options:null}}_validateStyleAst(U,X){const gt=X.currentAnimateTimings;let Pt=X.currentTime,$t=X.currentTime;gt&&$t>0&&($t-=gt.duration+gt.delay),U.styles.forEach(Ce=>{"string"!=typeof Ce&&Object.keys(Ce).forEach(Ae=>{if(!this._driver.validateStyleProperty(Ae))return void X.errors.push(`The provided animation property "${Ae}" is not a supported CSS property for animations`);const qe=X.collectedStyles[X.currentQuerySelector],Ei=qe[Ae];let Ni=!0;Ei&&($t!=Pt&&$t>=Ei.startTime&&Pt<=Ei.endTime&&(X.errors.push(`The CSS property "${Ae}" that exists between the times of "${Ei.startTime}ms" and "${Ei.endTime}ms" is also being animated in a parallel animation between the times of "${$t}ms" and "${Pt}ms"`),Ni=!1),$t=Ei.startTime),Ni&&(qe[Ae]={startTime:$t,endTime:Pt}),X.options&&function(Bt,U,X){const gt=U.params||{},Pt=vi(Bt);Pt.length&&Pt.forEach($t=>{gt.hasOwnProperty($t)||X.push(`Unable to resolve the local animation param ${$t} in the given list of values`)})}(Ce[Ae],X.options,X.errors)})})}visitKeyframes(U,X){const gt={type:5,styles:[],options:null};if(!X.currentAnimateTimings)return X.errors.push("keyframes() must be placed inside of a call to animate()"),gt;let $t=0;const Ce=[];let Ae=!1,qe=!1,Ei=0;const Ni=U.steps.map(Qn=>{const po=this._makeStyleAst(Qn,X);let or=null!=po.offset?po.offset:function(Bt){if("string"==typeof Bt)return null;let U=null;if(Array.isArray(Bt))Bt.forEach(X=>{if(se(X)&&X.hasOwnProperty("offset")){const gt=X;U=parseFloat(gt.offset),delete gt.offset}});else if(se(Bt)&&Bt.hasOwnProperty("offset")){const X=Bt;U=parseFloat(X.offset),delete X.offset}return U}(po.styles),Wo=0;return null!=or&&($t++,Wo=po.offset=or),qe=qe||Wo<0||Wo>1,Ae=Ae||Wo<Ei,Ei=Wo,Ce.push(Wo),po});qe&&X.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),Ae&&X.errors.push("Please ensure that all keyframe offsets are in order");const Gi=U.steps.length;let dn=0;$t>0&&$t<Gi?X.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==$t&&(dn=1/(Gi-1));const Tn=Gi-1,on=X.currentTime,_n=X.currentAnimateTimings,Cn=_n.duration;return Ni.forEach((Qn,po)=>{const or=dn>0?po==Tn?1:dn*po:Ce[po],Wo=or*Cn;X.currentTime=on+_n.delay+Wo,_n.duration=Wo,this._validateStyleAst(Qn,X),Qn.offset=or,gt.styles.push(Qn)}),gt}visitReference(U,X){return{type:8,animation:Mt(this,Xt(U.animation),X),options:te(U.options)}}visitAnimateChild(U,X){return X.depCount++,{type:9,options:te(U.options)}}visitAnimateRef(U,X){return{type:10,animation:this.visitReference(U.animation,X),options:te(U.options)}}visitQuery(U,X){const gt=X.currentQuerySelector,Pt=U.options||{};X.queryCount++,X.currentQuery=U;const[$t,Ce]=function(Bt){const U=!!Bt.split(/\s*,\s*/).find(X=>":self"==X);return U&&(Bt=Bt.replace(yi,"")),Bt=Bt.replace(/@\*/g,Ie).replace(/@\w+/g,X=>Ie+"-"+X.substr(1)).replace(/:animating/g,me),[Bt,U]}(U.selector);X.currentQuerySelector=gt.length?gt+" "+$t:$t,O(X.collectedStyles,X.currentQuerySelector,{});const Ae=Mt(this,Xt(U.animation),X);return X.currentQuery=null,X.currentQuerySelector=gt,{type:11,selector:$t,limit:Pt.limit||0,optional:!!Pt.optional,includeSelf:Ce,animation:Ae,originalSelector:U.selector,options:te(U.options)}}visitStagger(U,X){X.currentQuery||X.errors.push("stagger() can only be used inside of query()");const gt="full"===U.timings?{duration:0,delay:0,easing:"full"}:si(U.timings,X.errors,!0);return{type:12,animation:Mt(this,Xt(U.animation),X),timings:gt,options:null}}}class Te{constructor(U){this.errors=U,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function se(Bt){return!Array.isArray(Bt)&&"object"==typeof Bt}function te(Bt){return Bt?(Bt=Ne(Bt)).params&&(Bt.params=function(Bt){return Bt?Ne(Bt):null}(Bt.params)):Bt={},Bt}function qt(Bt,U,X){return{duration:Bt,delay:U,easing:X}}function Ee(Bt,U,X,gt,Pt,$t,Ce=null,Ae=!1){return{type:1,element:Bt,keyframes:U,preStyleProps:X,postStyleProps:gt,duration:Pt,delay:$t,totalTime:Pt+$t,easing:Ce,subTimeline:Ae}}class ti{constructor(){this._map=new Map}consume(U){let X=this._map.get(U);return X?this._map.delete(U):X=[],X}append(U,X){let gt=this._map.get(U);gt||this._map.set(U,gt=[]),gt.push(...X)}has(U){return this._map.has(U)}clear(){this._map.clear()}}const bn=new RegExp(":enter","g"),Xe=new RegExp(":leave","g");function Re(Bt,U,X,gt,Pt,$t={},Ce={},Ae,qe,Ei=[]){return(new fe).buildKeyframes(Bt,U,X,gt,Pt,$t,Ce,Ae,qe,Ei)}class fe{buildKeyframes(U,X,gt,Pt,$t,Ce,Ae,qe,Ei,Ni=[]){Ei=Ei||new ti;const Gi=new _i(U,X,Ei,Pt,$t,Ni,[]);Gi.options=qe,Gi.currentTimeline.setStyles([Ce],null,Gi.errors,qe),Mt(this,gt,Gi);const dn=Gi.timelines.filter(Tn=>Tn.containsAnimation());if(dn.length&&Object.keys(Ae).length){const Tn=dn[dn.length-1];Tn.allowOnlyTimelineStyles()||Tn.setStyles([Ae],null,Gi.errors,qe)}return dn.length?dn.map(Tn=>Tn.buildKeyframes()):[Ee(X,[],[],[],0,0,"",!1)]}visitTrigger(U,X){}visitState(U,X){}visitTransition(U,X){}visitAnimateChild(U,X){const gt=X.subInstructions.consume(X.element);if(gt){const Pt=X.createSubContext(U.options),$t=X.currentTimeline.currentTime,Ce=this._visitSubInstructions(gt,Pt,Pt.options);$t!=Ce&&X.transformIntoNewTimeline(Ce)}X.previousNode=U}visitAnimateRef(U,X){const gt=X.createSubContext(U.options);gt.transformIntoNewTimeline(),this.visitReference(U.animation,gt),X.transformIntoNewTimeline(gt.currentTimeline.currentTime),X.previousNode=U}_visitSubInstructions(U,X,gt){let $t=X.currentTimeline.currentTime;const Ce=null!=gt.duration?Be(gt.duration):null,Ae=null!=gt.delay?Be(gt.delay):null;return 0!==Ce&&U.forEach(qe=>{const Ei=X.appendInstructionToTimeline(qe,Ce,Ae);$t=Math.max($t,Ei.duration+Ei.delay)}),$t}visitReference(U,X){X.updateOptions(U.options,!0),Mt(this,U.animation,X),X.previousNode=U}visitSequence(U,X){const gt=X.subContextCount;let Pt=X;const $t=U.options;if($t&&($t.params||$t.delay)&&(Pt=X.createSubContext($t),Pt.transformIntoNewTimeline(),null!=$t.delay)){6==Pt.previousNode.type&&(Pt.currentTimeline.snapshotCurrentStyles(),Pt.previousNode=ze);const Ce=Be($t.delay);Pt.delayNextStep(Ce)}U.steps.length&&(U.steps.forEach(Ce=>Mt(this,Ce,Pt)),Pt.currentTimeline.applyStylesToKeyframe(),Pt.subContextCount>gt&&Pt.transformIntoNewTimeline()),X.previousNode=U}visitGroup(U,X){const gt=[];let Pt=X.currentTimeline.currentTime;const $t=U.options&&U.options.delay?Be(U.options.delay):0;U.steps.forEach(Ce=>{const Ae=X.createSubContext(U.options);$t&&Ae.delayNextStep($t),Mt(this,Ce,Ae),Pt=Math.max(Pt,Ae.currentTimeline.currentTime),gt.push(Ae.currentTimeline)}),gt.forEach(Ce=>X.currentTimeline.mergeTimelineCollectedStyles(Ce)),X.transformIntoNewTimeline(Pt),X.previousNode=U}_visitTiming(U,X){if(U.dynamic){const gt=U.strValue;return si(X.params?ie(gt,X.params,X.errors):gt,X.errors)}return{duration:U.duration,delay:U.delay,easing:U.easing}}visitAnimate(U,X){const gt=X.currentAnimateTimings=this._visitTiming(U.timings,X),Pt=X.currentTimeline;gt.delay&&(X.incrementTime(gt.delay),Pt.snapshotCurrentStyles());const $t=U.style;5==$t.type?this.visitKeyframes($t,X):(X.incrementTime(gt.duration),this.visitStyle($t,X),Pt.applyStylesToKeyframe()),X.currentAnimateTimings=null,X.previousNode=U}visitStyle(U,X){const gt=X.currentTimeline,Pt=X.currentAnimateTimings;!Pt&&gt.getCurrentStyleProperties().length&&gt.forwardFrame();const $t=Pt&&Pt.easing||U.easing;U.isEmptyStep?gt.applyEmptyStep($t):gt.setStyles(U.styles,$t,X.errors,X.options),X.previousNode=U}visitKeyframes(U,X){const gt=X.currentAnimateTimings,Pt=X.currentTimeline.duration,$t=gt.duration,Ae=X.createSubContext().currentTimeline;Ae.easing=gt.easing,U.styles.forEach(qe=>{Ae.forwardTime((qe.offset||0)*$t),Ae.setStyles(qe.styles,qe.easing,X.errors,X.options),Ae.applyStylesToKeyframe()}),X.currentTimeline.mergeTimelineCollectedStyles(Ae),X.transformIntoNewTimeline(Pt+$t),X.previousNode=U}visitQuery(U,X){const gt=X.currentTimeline.currentTime,Pt=U.options||{},$t=Pt.delay?Be(Pt.delay):0;$t&&(6===X.previousNode.type||0==gt&&X.currentTimeline.getCurrentStyleProperties().length)&&(X.currentTimeline.snapshotCurrentStyles(),X.previousNode=ze);let Ce=gt;const Ae=X.invokeQuery(U.selector,U.originalSelector,U.limit,U.includeSelf,!!Pt.optional,X.errors);X.currentQueryTotal=Ae.length;let qe=null;Ae.forEach((Ei,Ni)=>{X.currentQueryIndex=Ni;const Gi=X.createSubContext(U.options,Ei);$t&&Gi.delayNextStep($t),Ei===X.element&&(qe=Gi.currentTimeline),Mt(this,U.animation,Gi),Gi.currentTimeline.applyStylesToKeyframe(),Ce=Math.max(Ce,Gi.currentTimeline.currentTime)}),X.currentQueryIndex=0,X.currentQueryTotal=0,X.transformIntoNewTimeline(Ce),qe&&(X.currentTimeline.mergeTimelineCollectedStyles(qe),X.currentTimeline.snapshotCurrentStyles()),X.previousNode=U}visitStagger(U,X){const gt=X.parentContext,Pt=X.currentTimeline,$t=U.timings,Ce=Math.abs($t.duration),Ae=Ce*(X.currentQueryTotal-1);let qe=Ce*X.currentQueryIndex;switch($t.duration<0?"reverse":$t.easing){case"reverse":qe=Ae-qe;break;case"full":qe=gt.currentStaggerTime}const Ni=X.currentTimeline;qe&&Ni.delayNextStep(qe);const Gi=Ni.currentTime;Mt(this,U.animation,X),X.previousNode=U,gt.currentStaggerTime=Pt.currentTime-Gi+(Pt.startTime-gt.currentTimeline.startTime)}}const ze={};class _i{constructor(U,X,gt,Pt,$t,Ce,Ae,qe){this._driver=U,this.element=X,this.subInstructions=gt,this._enterClassName=Pt,this._leaveClassName=$t,this.errors=Ce,this.timelines=Ae,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ze,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=qe||new Xi(this._driver,X,0),Ae.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(U,X){if(!U)return;const gt=U;let Pt=this.options;null!=gt.duration&&(Pt.duration=Be(gt.duration)),null!=gt.delay&&(Pt.delay=Be(gt.delay));const $t=gt.params;if($t){let Ce=Pt.params;Ce||(Ce=this.options.params={}),Object.keys($t).forEach(Ae=>{(!X||!Ce.hasOwnProperty(Ae))&&(Ce[Ae]=ie($t[Ae],Ce,this.errors))})}}_copyOptions(){const U={};if(this.options){const X=this.options.params;if(X){const gt=U.params={};Object.keys(X).forEach(Pt=>{gt[Pt]=X[Pt]})}}return U}createSubContext(U=null,X,gt){const Pt=X||this.element,$t=new _i(this._driver,Pt,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Pt,gt||0));return $t.previousNode=this.previousNode,$t.currentAnimateTimings=this.currentAnimateTimings,$t.options=this._copyOptions(),$t.updateOptions(U),$t.currentQueryIndex=this.currentQueryIndex,$t.currentQueryTotal=this.currentQueryTotal,$t.parentContext=this,this.subContextCount++,$t}transformIntoNewTimeline(U){return this.previousNode=ze,this.currentTimeline=this.currentTimeline.fork(this.element,U),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(U,X,gt){const Pt={duration:null!=X?X:U.duration,delay:this.currentTimeline.currentTime+(null!=gt?gt:0)+U.delay,easing:""},$t=new hn(this._driver,U.element,U.keyframes,U.preStyleProps,U.postStyleProps,Pt,U.stretchStartingKeyframe);return this.timelines.push($t),Pt}incrementTime(U){this.currentTimeline.forwardTime(this.currentTimeline.duration+U)}delayNextStep(U){U>0&&this.currentTimeline.delayNextStep(U)}invokeQuery(U,X,gt,Pt,$t,Ce){let Ae=[];if(Pt&&Ae.push(this.element),U.length>0){U=(U=U.replace(bn,"."+this._enterClassName)).replace(Xe,"."+this._leaveClassName);let Ei=this._driver.query(this.element,U,1!=gt);0!==gt&&(Ei=gt<0?Ei.slice(Ei.length+gt,Ei.length):Ei.slice(0,gt)),Ae.push(...Ei)}return!$t&&0==Ae.length&&Ce.push(`\`query("${X}")\` returned zero elements. (Use \`query("${X}", { optional: true })\` if you wish to allow this.)`),Ae}}class Xi{constructor(U,X,gt,Pt){this._driver=U,this.element=X,this.startTime=gt,this._elementTimelineStylesLookup=Pt,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(X),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(X,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(U){const X=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||X?(this.forwardTime(this.currentTime+U),X&&this.snapshotCurrentStyles()):this.startTime+=U}fork(U,X){return this.applyStylesToKeyframe(),new Xi(this._driver,U,X||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(U){this.applyStylesToKeyframe(),this.duration=U,this._loadKeyframe()}_updateStyle(U,X){this._localTimelineStyles[U]=X,this._globalTimelineStyles[U]=X,this._styleSummary[U]={time:this.currentTime,value:X}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(U){U&&(this._previousKeyframe.easing=U),Object.keys(this._globalTimelineStyles).forEach(X=>{this._backFill[X]=this._globalTimelineStyles[X]||e.l3,this._currentKeyframe[X]=e.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(U,X,gt,Pt){X&&(this._previousKeyframe.easing=X);const $t=Pt&&Pt.params||{},Ce=function(Bt,U){const X={};let gt;return Bt.forEach(Pt=>{"*"===Pt?(gt=gt||Object.keys(U),gt.forEach($t=>{X[$t]=e.l3})):we(Pt,!1,X)}),X}(U,this._globalTimelineStyles);Object.keys(Ce).forEach(Ae=>{const qe=ie(Ce[Ae],$t,gt);this._pendingStyles[Ae]=qe,this._localTimelineStyles.hasOwnProperty(Ae)||(this._backFill[Ae]=this._globalTimelineStyles.hasOwnProperty(Ae)?this._globalTimelineStyles[Ae]:e.l3),this._updateStyle(Ae,qe)})}applyStylesToKeyframe(){const U=this._pendingStyles,X=Object.keys(U);0!=X.length&&(this._pendingStyles={},X.forEach(gt=>{this._currentKeyframe[gt]=U[gt]}),Object.keys(this._localTimelineStyles).forEach(gt=>{this._currentKeyframe.hasOwnProperty(gt)||(this._currentKeyframe[gt]=this._localTimelineStyles[gt])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(U=>{const X=this._localTimelineStyles[U];this._pendingStyles[U]=X,this._updateStyle(U,X)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const U=[];for(let X in this._currentKeyframe)U.push(X);return U}mergeTimelineCollectedStyles(U){Object.keys(U._styleSummary).forEach(X=>{const gt=this._styleSummary[X],Pt=U._styleSummary[X];(!gt||Pt.time>gt.time)&&this._updateStyle(X,Pt.value)})}buildKeyframes(){this.applyStylesToKeyframe();const U=new Set,X=new Set,gt=1===this._keyframes.size&&0===this.duration;let Pt=[];this._keyframes.forEach((Ae,qe)=>{const Ei=we(Ae,!0);Object.keys(Ei).forEach(Ni=>{const Gi=Ei[Ni];Gi==e.k1?U.add(Ni):Gi==e.l3&&X.add(Ni)}),gt||(Ei.offset=qe/this.duration),Pt.push(Ei)});const $t=U.size?Ut(U.values()):[],Ce=X.size?Ut(X.values()):[];if(gt){const Ae=Pt[0],qe=Ne(Ae);Ae.offset=0,qe.offset=1,Pt=[Ae,qe]}return Ee(this.element,Pt,$t,Ce,this.duration,this.startTime,this.easing,!1)}}class hn extends Xi{constructor(U,X,gt,Pt,$t,Ce,Ae=!1){super(U,X,Ce.delay),this.keyframes=gt,this.preStyleProps=Pt,this.postStyleProps=$t,this._stretchStartingKeyframe=Ae,this.timings={duration:Ce.duration,delay:Ce.delay,easing:Ce.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let U=this.keyframes,{delay:X,duration:gt,easing:Pt}=this.timings;if(this._stretchStartingKeyframe&&X){const $t=[],Ce=gt+X,Ae=X/Ce,qe=we(U[0],!1);qe.offset=0,$t.push(qe);const Ei=we(U[0],!1);Ei.offset=Mn(Ae),$t.push(Ei);const Ni=U.length-1;for(let Gi=1;Gi<=Ni;Gi++){let dn=we(U[Gi],!1);dn.offset=Mn((X+dn.offset*gt)/Ce),$t.push(dn)}gt=Ce,X=0,Pt="",U=$t}return Ee(this.element,U,this.preStyleProps,this.postStyleProps,gt,X,Pt,!0)}}function Mn(Bt,U=3){const X=Math.pow(10,U-1);return Math.round(Bt*X)/X}class ar{}class tr extends ar{normalizePropertyName(U,X){return Zt(U)}normalizeStyleValue(U,X,gt,Pt){let $t="";const Ce=gt.toString().trim();if(eo[X]&&0!==gt&&"0"!==gt)if("number"==typeof gt)$t="px";else{const Ae=gt.match(/^[+-]?[\d\.]+([a-z]*)$/);Ae&&0==Ae[1].length&&Pt.push(`Please provide a CSS unit value for ${U}:${gt}`)}return Ce+$t}}const eo=(()=>function(Bt){const U={};return Bt.forEach(X=>U[X]=!0),U}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Pn(Bt,U,X,gt,Pt,$t,Ce,Ae,qe,Ei,Ni,Gi,dn){return{type:0,element:Bt,triggerName:U,isRemovalTransition:Pt,fromState:X,fromStyles:$t,toState:gt,toStyles:Ce,timelines:Ae,queriedElements:qe,preStyleProps:Ei,postStyleProps:Ni,totalTime:Gi,errors:dn}}const Fi={};class Ji{constructor(U,X,gt){this._triggerName=U,this.ast=X,this._stateStyles=gt}match(U,X,gt,Pt){return function(Bt,U,X,gt,Pt){return Bt.some($t=>$t(U,X,gt,Pt))}(this.ast.matchers,U,X,gt,Pt)}buildStyles(U,X,gt){const Pt=this._stateStyles["*"],$t=this._stateStyles[U],Ce=Pt?Pt.buildStyles(X,gt):{};return $t?$t.buildStyles(X,gt):Ce}build(U,X,gt,Pt,$t,Ce,Ae,qe,Ei,Ni){const Gi=[],dn=this.ast.options&&this.ast.options.params||Fi,on=this.buildStyles(gt,Ae&&Ae.params||Fi,Gi),_n=qe&&qe.params||Fi,Cn=this.buildStyles(Pt,_n,Gi),Qn=new Set,po=new Map,or=new Map,Wo="void"===Pt,jr={params:Object.assign(Object.assign({},dn),_n)},zr=Ni?[]:Re(U,X,this.ast.animation,$t,Ce,on,Cn,jr,Ei,Gi);let jo=0;if(zr.forEach(ns=>{jo=Math.max(ns.duration+ns.delay,jo)}),Gi.length)return Pn(X,this._triggerName,gt,Pt,Wo,on,Cn,[],[],po,or,jo,Gi);zr.forEach(ns=>{const Yr=ns.element,Rs=O(po,Yr,{});ns.preStyleProps.forEach(os=>Rs[os]=!0);const zo=O(or,Yr,{});ns.postStyleProps.forEach(os=>zo[os]=!0),Yr!==X&&Qn.add(Yr)});const Us=Ut(Qn.values());return Pn(X,this._triggerName,gt,Pt,Wo,on,Cn,zr,Us,po,or,jo)}}class Ro{constructor(U,X,gt){this.styles=U,this.defaultParams=X,this.normalizer=gt}buildStyles(U,X){const gt={},Pt=Ne(this.defaultParams);return Object.keys(U).forEach($t=>{const Ce=U[$t];null!=Ce&&(Pt[$t]=Ce)}),this.styles.styles.forEach($t=>{if("string"!=typeof $t){const Ce=$t;Object.keys(Ce).forEach(Ae=>{let qe=Ce[Ae];qe.length>1&&(qe=ie(qe,Pt,X));const Ei=this.normalizer.normalizePropertyName(Ae,X);qe=this.normalizer.normalizeStyleValue(Ae,Ei,qe,X),gt[Ei]=qe})}}),gt}}class so{constructor(U,X,gt){this.name=U,this.ast=X,this._normalizer=gt,this.transitionFactories=[],this.states={},X.states.forEach(Pt=>{this.states[Pt.name]=new Ro(Pt.style,Pt.options&&Pt.options.params||{},gt)}),Bn(this.states,"true","1"),Bn(this.states,"false","0"),X.transitions.forEach(Pt=>{this.transitionFactories.push(new Ji(U,Pt,this.states))}),this.fallbackTransition=function(Bt,U,X){return new Ji(Bt,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ce,Ae)=>!0],options:null,queryCount:0,depCount:0},U)}(U,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(U,X,gt,Pt){return this.transitionFactories.find(Ce=>Ce.match(U,X,gt,Pt))||null}matchStyles(U,X,gt){return this.fallbackTransition.buildStyles(U,X,gt)}}function Bn(Bt,U,X){Bt.hasOwnProperty(U)?Bt.hasOwnProperty(X)||(Bt[X]=Bt[U]):Bt.hasOwnProperty(X)&&(Bt[U]=Bt[X])}const Vo=new ti;class qr{constructor(U,X,gt){this.bodyNode=U,this._driver=X,this._normalizer=gt,this._animations={},this._playersById={},this.players=[]}register(U,X){const gt=[],Pt=$e(this._driver,X,gt);if(gt.length)throw new Error(`Unable to build the animation due to the following errors: ${gt.join("\n")}`);this._animations[U]=Pt}_buildPlayer(U,X,gt){const Pt=U.element,$t=s(0,this._normalizer,0,U.keyframes,X,gt);return this._driver.animate(Pt,$t,U.duration,U.delay,U.easing,[],!0)}create(U,X,gt={}){const Pt=[],$t=this._animations[U];let Ce;const Ae=new Map;if($t?(Ce=Re(this._driver,X,$t,nt,st,{},{},gt,Vo,Pt),Ce.forEach(Ni=>{const Gi=O(Ae,Ni.element,{});Ni.postStyleProps.forEach(dn=>Gi[dn]=null)})):(Pt.push("The requested animation doesn't exist or has already been destroyed"),Ce=[]),Pt.length)throw new Error(`Unable to create the animation due to the following errors: ${Pt.join("\n")}`);Ae.forEach((Ni,Gi)=>{Object.keys(Ni).forEach(dn=>{Ni[dn]=this._driver.computeStyle(Gi,dn,e.l3)})});const Ei=o(Ce.map(Ni=>{const Gi=Ae.get(Ni.element);return this._buildPlayer(Ni,{},Gi)}));return this._playersById[U]=Ei,Ei.onDestroy(()=>this.destroy(U)),this.players.push(Ei),Ei}destroy(U){const X=this._getPlayer(U);X.destroy(),delete this._playersById[U];const gt=this.players.indexOf(X);gt>=0&&this.players.splice(gt,1)}_getPlayer(U){const X=this._playersById[U];if(!X)throw new Error(`Unable to find the timeline player referenced by ${U}`);return X}listen(U,X,gt,Pt){const $t=R(X,"","","");return c(this._getPlayer(U),gt,$t,Pt),()=>{}}command(U,X,gt,Pt){if("register"==gt)return void this.register(U,Pt[0]);if("create"==gt)return void this.create(U,X,Pt[0]||{});const $t=this._getPlayer(U);switch(gt){case"play":$t.play();break;case"pause":$t.pause();break;case"reset":$t.reset();break;case"restart":$t.restart();break;case"finish":$t.finish();break;case"init":$t.init();break;case"setPosition":$t.setPosition(parseFloat(Pt[0]));break;case"destroy":this.destroy(U)}}}const ln="ng-animate-queued",Oo="ng-animate-disabled",xr=[],Jo={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},un="__ng_removed";class dr{constructor(U,X=""){this.namespaceId=X;const gt=U&&U.hasOwnProperty("value");if(this.value=null!=(Bt=gt?U.value:U)?Bt:null,gt){const $t=Ne(U);delete $t.value,this.options=$t}else this.options={};var Bt;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(U){const X=U.params;if(X){const gt=this.options.params;Object.keys(X).forEach(Pt=>{null==gt[Pt]&&(gt[Pt]=X[Pt])})}}}const bo="void",ao=new dr(bo);class pr{constructor(U,X,gt){this.id=U,this.hostElement=X,this._engine=gt,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+U,xo(X,this._hostClassName)}listen(U,X,gt,Pt){if(!this._triggers.hasOwnProperty(X))throw new Error(`Unable to listen on the animation trigger event "${gt}" because the animation trigger "${X}" doesn't exist!`);if(null==gt||0==gt.length)throw new Error(`Unable to listen on the animation trigger "${X}" because the provided event is undefined!`);if("start"!=(Bt=gt)&&"done"!=Bt)throw new Error(`The provided animation trigger event "${gt}" for the animation trigger "${X}" is not supported!`);var Bt;const $t=O(this._elementListeners,U,[]),Ce={name:X,phase:gt,callback:Pt};$t.push(Ce);const Ae=O(this._engine.statesByElement,U,{});return Ae.hasOwnProperty(X)||(xo(U,Vt),xo(U,Vt+"-"+X),Ae[X]=ao),()=>{this._engine.afterFlush(()=>{const qe=$t.indexOf(Ce);qe>=0&&$t.splice(qe,1),this._triggers[X]||delete Ae[X]})}}register(U,X){return!this._triggers[U]&&(this._triggers[U]=X,!0)}_getTrigger(U){const X=this._triggers[U];if(!X)throw new Error(`The provided animation trigger "${U}" has not been registered!`);return X}trigger(U,X,gt,Pt=!0){const $t=this._getTrigger(X),Ce=new es(this.id,X,U);let Ae=this._engine.statesByElement.get(U);Ae||(xo(U,Vt),xo(U,Vt+"-"+X),this._engine.statesByElement.set(U,Ae={}));let qe=Ae[X];const Ei=new dr(gt,this.id);if(!(gt&&gt.hasOwnProperty("value"))&&qe&&Ei.absorbOptions(qe.options),Ae[X]=Ei,qe||(qe=ao),Ei.value!==bo&&qe.value===Ei.value){if(!function(Bt,U){const X=Object.keys(Bt),gt=Object.keys(U);if(X.length!=gt.length)return!1;for(let Pt=0;Pt<X.length;Pt++){const $t=X[Pt];if(!U.hasOwnProperty($t)||Bt[$t]!==U[$t])return!1}return!0}(qe.params,Ei.params)){const _n=[],Cn=$t.matchStyles(qe.value,qe.params,_n),Qn=$t.matchStyles(Ei.value,Ei.params,_n);_n.length?this._engine.reportError(_n):this._engine.afterFlush(()=>{be(U,Cn),Ke(U,Qn)})}return}const dn=O(this._engine.playersByElement,U,[]);dn.forEach(_n=>{_n.namespaceId==this.id&&_n.triggerName==X&&_n.queued&&_n.destroy()});let Tn=$t.matchTransition(qe.value,Ei.value,U,Ei.params),on=!1;if(!Tn){if(!Pt)return;Tn=$t.fallbackTransition,on=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:U,triggerName:X,transition:Tn,fromState:qe,toState:Ei,player:Ce,isFallbackTransition:on}),on||(xo(U,ln),Ce.onStart(()=>{us(U,ln)})),Ce.onDone(()=>{let _n=this.players.indexOf(Ce);_n>=0&&this.players.splice(_n,1);const Cn=this._engine.playersByElement.get(U);if(Cn){let Qn=Cn.indexOf(Ce);Qn>=0&&Cn.splice(Qn,1)}}),this.players.push(Ce),dn.push(Ce),Ce}deregister(U){delete this._triggers[U],this._engine.statesByElement.forEach((X,gt)=>{delete X[U]}),this._elementListeners.forEach((X,gt)=>{this._elementListeners.set(gt,X.filter(Pt=>Pt.name!=U))})}clearElementCache(U){this._engine.statesByElement.delete(U),this._elementListeners.delete(U);const X=this._engine.playersByElement.get(U);X&&(X.forEach(gt=>gt.destroy()),this._engine.playersByElement.delete(U))}_signalRemovalForInnerTriggers(U,X){const gt=this._engine.driver.query(U,Ie,!0);gt.forEach(Pt=>{if(Pt[un])return;const $t=this._engine.fetchNamespacesByElement(Pt);$t.size?$t.forEach(Ce=>Ce.triggerLeaveAnimation(Pt,X,!1,!0)):this.clearElementCache(Pt)}),this._engine.afterFlushAnimationsDone(()=>gt.forEach(Pt=>this.clearElementCache(Pt)))}triggerLeaveAnimation(U,X,gt,Pt){const $t=this._engine.statesByElement.get(U);if($t){const Ce=[];if(Object.keys($t).forEach(Ae=>{if(this._triggers[Ae]){const qe=this.trigger(U,Ae,bo,Pt);qe&&Ce.push(qe)}}),Ce.length)return this._engine.markElementAsRemoved(this.id,U,!0,X),gt&&o(Ce).onDone(()=>this._engine.processLeaveNode(U)),!0}return!1}prepareLeaveAnimationListeners(U){const X=this._elementListeners.get(U),gt=this._engine.statesByElement.get(U);if(X&&gt){const Pt=new Set;X.forEach($t=>{const Ce=$t.name;if(Pt.has(Ce))return;Pt.add(Ce);const qe=this._triggers[Ce].fallbackTransition,Ei=gt[Ce]||ao,Ni=new dr(bo),Gi=new es(this.id,Ce,U);this._engine.totalQueuedPlayers++,this._queue.push({element:U,triggerName:Ce,transition:qe,fromState:Ei,toState:Ni,player:Gi,isFallbackTransition:!0})})}}removeNode(U,X){const gt=this._engine;if(U.childElementCount&&this._signalRemovalForInnerTriggers(U,X),this.triggerLeaveAnimation(U,X,!0))return;let Pt=!1;if(gt.totalAnimations){const $t=gt.players.length?gt.playersByQueriedElement.get(U):[];if($t&&$t.length)Pt=!0;else{let Ce=U;for(;Ce=Ce.parentNode;)if(gt.statesByElement.get(Ce)){Pt=!0;break}}}if(this.prepareLeaveAnimationListeners(U),Pt)gt.markElementAsRemoved(this.id,U,!1,X);else{const $t=U[un];(!$t||$t===Jo)&&(gt.afterFlush(()=>this.clearElementCache(U)),gt.destroyInnerAnimations(U),gt._onRemovalComplete(U,X))}}insertNode(U,X){xo(U,this._hostClassName)}drainQueuedTransitions(U){const X=[];return this._queue.forEach(gt=>{const Pt=gt.player;if(Pt.destroyed)return;const $t=gt.element,Ce=this._elementListeners.get($t);Ce&&Ce.forEach(Ae=>{if(Ae.name==gt.triggerName){const qe=R($t,gt.triggerName,gt.fromState.value,gt.toState.value);qe._data=U,c(gt.player,Ae.phase,qe,Ae.callback)}}),Pt.markedForDestroy?this._engine.afterFlush(()=>{Pt.destroy()}):X.push(gt)}),this._queue=[],X.sort((gt,Pt)=>{const $t=gt.transition.ast.depCount,Ce=Pt.transition.ast.depCount;return 0==$t||0==Ce?$t-Ce:this._engine.driver.containsElement(gt.element,Pt.element)?1:-1})}destroy(U){this.players.forEach(X=>X.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,U)}elementContainsData(U){let X=!1;return this._elementListeners.has(U)&&(X=!0),X=!!this._queue.find(gt=>gt.element===U)||X,X}}class En{constructor(U,X,gt){this.bodyNode=U,this.driver=X,this._normalizer=gt,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(Pt,$t)=>{}}_onRemovalComplete(U,X){this.onRemovalComplete(U,X)}get queuedPlayers(){const U=[];return this._namespaceList.forEach(X=>{X.players.forEach(gt=>{gt.queued&&U.push(gt)})}),U}createNamespace(U,X){const gt=new pr(U,X,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,X)?this._balanceNamespaceList(gt,X):(this.newHostElements.set(X,gt),this.collectEnterElement(X)),this._namespaceLookup[U]=gt}_balanceNamespaceList(U,X){const gt=this._namespaceList.length-1;if(gt>=0){let Pt=!1;for(let $t=gt;$t>=0;$t--)if(this.driver.containsElement(this._namespaceList[$t].hostElement,X)){this._namespaceList.splice($t+1,0,U),Pt=!0;break}Pt||this._namespaceList.splice(0,0,U)}else this._namespaceList.push(U);return this.namespacesByHostElement.set(X,U),U}register(U,X){let gt=this._namespaceLookup[U];return gt||(gt=this.createNamespace(U,X)),gt}registerTrigger(U,X,gt){let Pt=this._namespaceLookup[U];Pt&&Pt.register(X,gt)&&this.totalAnimations++}destroy(U,X){if(!U)return;const gt=this._fetchNamespace(U);this.afterFlush(()=>{this.namespacesByHostElement.delete(gt.hostElement),delete this._namespaceLookup[U];const Pt=this._namespaceList.indexOf(gt);Pt>=0&&this._namespaceList.splice(Pt,1)}),this.afterFlushAnimationsDone(()=>gt.destroy(X))}_fetchNamespace(U){return this._namespaceLookup[U]}fetchNamespacesByElement(U){const X=new Set,gt=this.statesByElement.get(U);if(gt){const Pt=Object.keys(gt);for(let $t=0;$t<Pt.length;$t++){const Ce=gt[Pt[$t]].namespaceId;if(Ce){const Ae=this._fetchNamespace(Ce);Ae&&X.add(Ae)}}}return X}trigger(U,X,gt,Pt){if($o(X)){const $t=this._fetchNamespace(U);if($t)return $t.trigger(X,gt,Pt),!0}return!1}insertNode(U,X,gt,Pt){if(!$o(X))return;const $t=X[un];if($t&&$t.setForRemoval){$t.setForRemoval=!1,$t.setForMove=!0;const Ce=this.collectedLeaveElements.indexOf(X);Ce>=0&&this.collectedLeaveElements.splice(Ce,1)}if(U){const Ce=this._fetchNamespace(U);Ce&&Ce.insertNode(X,gt)}Pt&&this.collectEnterElement(X)}collectEnterElement(U){this.collectedEnterElements.push(U)}markElementAsDisabled(U,X){X?this.disabledNodes.has(U)||(this.disabledNodes.add(U),xo(U,Oo)):this.disabledNodes.has(U)&&(this.disabledNodes.delete(U),us(U,Oo))}removeNode(U,X,gt,Pt){if($o(X)){const $t=U?this._fetchNamespace(U):null;if($t?$t.removeNode(X,Pt):this.markElementAsRemoved(U,X,!1,Pt),gt){const Ce=this.namespacesByHostElement.get(X);Ce&&Ce.id!==U&&Ce.removeNode(X,Pt)}}else this._onRemovalComplete(X,Pt)}markElementAsRemoved(U,X,gt,Pt){this.collectedLeaveElements.push(X),X[un]={namespaceId:U,setForRemoval:Pt,hasAnimation:gt,removedBeforeQueried:!1}}listen(U,X,gt,Pt,$t){return $o(X)?this._fetchNamespace(U).listen(X,gt,Pt,$t):()=>{}}_buildInstruction(U,X,gt,Pt,$t){return U.transition.build(this.driver,U.element,U.fromState.value,U.toState.value,gt,Pt,U.fromState.options,U.toState.options,X,$t)}destroyInnerAnimations(U){let X=this.driver.query(U,Ie,!0);X.forEach(gt=>this.destroyActiveAnimationsForElement(gt)),0!=this.playersByQueriedElement.size&&(X=this.driver.query(U,me,!0),X.forEach(gt=>this.finishActiveQueriedAnimationOnElement(gt)))}destroyActiveAnimationsForElement(U){const X=this.playersByElement.get(U);X&&X.forEach(gt=>{gt.queued?gt.markedForDestroy=!0:gt.destroy()})}finishActiveQueriedAnimationOnElement(U){const X=this.playersByQueriedElement.get(U);X&&X.forEach(gt=>gt.finish())}whenRenderingDone(){return new Promise(U=>{if(this.players.length)return o(this.players).onDone(()=>U());U()})}processLeaveNode(U){var X;const gt=U[un];if(gt&&gt.setForRemoval){if(U[un]=Jo,gt.namespaceId){this.destroyInnerAnimations(U);const Pt=this._fetchNamespace(gt.namespaceId);Pt&&Pt.clearElementCache(U)}this._onRemovalComplete(U,gt.setForRemoval)}(null===(X=U.classList)||void 0===X?void 0:X.contains(Oo))&&this.markElementAsDisabled(U,!1),this.driver.query(U,".ng-animate-disabled",!0).forEach(Pt=>{this.markElementAsDisabled(Pt,!1)})}flush(U=-1){let X=[];if(this.newHostElements.size&&(this.newHostElements.forEach((gt,Pt)=>this._balanceNamespaceList(gt,Pt)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let gt=0;gt<this.collectedEnterElements.length;gt++)xo(this.collectedEnterElements[gt],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const gt=[];try{X=this._flushAnimations(gt,U)}finally{for(let Pt=0;Pt<gt.length;Pt++)gt[Pt]()}}else for(let gt=0;gt<this.collectedLeaveElements.length;gt++)this.processLeaveNode(this.collectedLeaveElements[gt]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(gt=>gt()),this._flushFns=[],this._whenQuietFns.length){const gt=this._whenQuietFns;this._whenQuietFns=[],X.length?o(X).onDone(()=>{gt.forEach(Pt=>Pt())}):gt.forEach(Pt=>Pt())}}reportError(U){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${U.join("\n")}`)}_flushAnimations(U,X){const gt=new ti,Pt=[],$t=new Map,Ce=[],Ae=new Map,qe=new Map,Ei=new Map,Ni=new Set;this.disabledNodes.forEach(ji=>{Ni.add(ji);const pn=this.driver.query(ji,".ng-animate-queued",!0);for(let nn=0;nn<pn.length;nn++)Ni.add(pn[nn])});const Gi=this.bodyNode,dn=Array.from(this.statesByElement.keys()),Tn=oo(dn,this.collectedEnterElements),on=new Map;let _n=0;Tn.forEach((ji,pn)=>{const nn=nt+_n++;on.set(pn,nn),ji.forEach(An=>xo(An,nn))});const Cn=[],Qn=new Set,po=new Set;for(let ji=0;ji<this.collectedLeaveElements.length;ji++){const pn=this.collectedLeaveElements[ji],nn=pn[un];nn&&nn.setForRemoval&&(Cn.push(pn),Qn.add(pn),nn.hasAnimation?this.driver.query(pn,".ng-star-inserted",!0).forEach(An=>Qn.add(An)):po.add(pn))}const or=new Map,Wo=oo(dn,Array.from(Qn));Wo.forEach((ji,pn)=>{const nn=st+_n++;or.set(pn,nn),ji.forEach(An=>xo(An,nn))}),U.push(()=>{Tn.forEach((ji,pn)=>{const nn=on.get(pn);ji.forEach(An=>us(An,nn))}),Wo.forEach((ji,pn)=>{const nn=or.get(pn);ji.forEach(An=>us(An,nn))}),Cn.forEach(ji=>{this.processLeaveNode(ji)})});const jr=[],zr=[];for(let ji=this._namespaceList.length-1;ji>=0;ji--)this._namespaceList[ji].drainQueuedTransitions(X).forEach(nn=>{const An=nn.player,On=nn.element;if(jr.push(An),this.collectedEnterElements.length){const Tr=On[un];if(Tr&&Tr.setForMove)return void An.destroy()}const Pr=!Gi||!this.driver.containsElement(Gi,On),Xr=or.get(On),Fr=on.get(On),kn=this._buildInstruction(nn,gt,Fr,Xr,Pr);if(kn.errors&&kn.errors.length)zr.push(kn);else{if(Pr)return An.onStart(()=>be(On,kn.fromStyles)),An.onDestroy(()=>Ke(On,kn.toStyles)),void Pt.push(An);if(nn.isFallbackTransition)return An.onStart(()=>be(On,kn.fromStyles)),An.onDestroy(()=>Ke(On,kn.toStyles)),void Pt.push(An);kn.timelines.forEach(Tr=>Tr.stretchStartingKeyframe=!0),gt.append(On,kn.timelines),Ce.push({instruction:kn,player:An,element:On}),kn.queriedElements.forEach(Tr=>O(Ae,Tr,[]).push(An)),kn.preStyleProps.forEach((Tr,Ds)=>{const gs=Object.keys(Tr);if(gs.length){let Qo=qe.get(Ds);Qo||qe.set(Ds,Qo=new Set),gs.forEach(Ws=>Qo.add(Ws))}}),kn.postStyleProps.forEach((Tr,Ds)=>{const gs=Object.keys(Tr);let Qo=Ei.get(Ds);Qo||Ei.set(Ds,Qo=new Set),gs.forEach(Ws=>Qo.add(Ws))})}});if(zr.length){const ji=[];zr.forEach(pn=>{ji.push(`@${pn.triggerName} has failed due to:\n`),pn.errors.forEach(nn=>ji.push(`- ${nn}\n`))}),jr.forEach(pn=>pn.destroy()),this.reportError(ji)}const jo=new Map,Us=new Map;Ce.forEach(ji=>{const pn=ji.element;gt.has(pn)&&(Us.set(pn,pn),this._beforeAnimationBuild(ji.player.namespaceId,ji.instruction,jo))}),Pt.forEach(ji=>{const pn=ji.element;this._getPreviousPlayers(pn,!1,ji.namespaceId,ji.triggerName,null).forEach(An=>{O(jo,pn,[]).push(An),An.destroy()})});const ns=Cn.filter(ji=>ds(ji,qe,Ei)),Yr=new Map;_r(Yr,this.driver,po,Ei,e.l3).forEach(ji=>{ds(ji,qe,Ei)&&ns.push(ji)});const zo=new Map;Tn.forEach((ji,pn)=>{_r(zo,this.driver,new Set(ji),qe,e.k1)}),ns.forEach(ji=>{const pn=Yr.get(ji),nn=zo.get(ji);Yr.set(ji,Object.assign(Object.assign({},pn),nn))});const os=[],ya=[],Gs={};Ce.forEach(ji=>{const{element:pn,player:nn,instruction:An}=ji;if(gt.has(pn)){if(Ni.has(pn))return nn.onDestroy(()=>Ke(pn,An.toStyles)),nn.disabled=!0,nn.overrideTotalTime(An.totalTime),void Pt.push(nn);let On=Gs;if(Us.size>1){let Xr=pn;const Fr=[];for(;Xr=Xr.parentNode;){const kn=Us.get(Xr);if(kn){On=kn;break}Fr.push(Xr)}Fr.forEach(kn=>Us.set(kn,On))}const Pr=this._buildAnimation(nn.namespaceId,An,jo,$t,zo,Yr);if(nn.setRealPlayer(Pr),On===Gs)os.push(nn);else{const Xr=this.playersByElement.get(On);Xr&&Xr.length&&(nn.parentPlayer=o(Xr)),Pt.push(nn)}}else be(pn,An.fromStyles),nn.onDestroy(()=>Ke(pn,An.toStyles)),ya.push(nn),Ni.has(pn)&&Pt.push(nn)}),ya.forEach(ji=>{const pn=$t.get(ji.element);if(pn&&pn.length){const nn=o(pn);ji.setRealPlayer(nn)}}),Pt.forEach(ji=>{ji.parentPlayer?ji.syncPlayerEvents(ji.parentPlayer):ji.destroy()});for(let ji=0;ji<Cn.length;ji++){const pn=Cn[ji],nn=pn[un];if(us(pn,st),nn&&nn.hasAnimation)continue;let An=[];if(Ae.size){let Pr=Ae.get(pn);Pr&&Pr.length&&An.push(...Pr);let Xr=this.driver.query(pn,me,!0);for(let Fr=0;Fr<Xr.length;Fr++){let kn=Ae.get(Xr[Fr]);kn&&kn.length&&An.push(...kn)}}const On=An.filter(Pr=>!Pr.destroyed);On.length?Js(this,pn,On):this.processLeaveNode(pn)}return Cn.length=0,os.forEach(ji=>{this.players.push(ji),ji.onDone(()=>{ji.destroy();const pn=this.players.indexOf(ji);this.players.splice(pn,1)}),ji.play()}),os}elementContainsData(U,X){let gt=!1;const Pt=X[un];return Pt&&Pt.setForRemoval&&(gt=!0),this.playersByElement.has(X)&&(gt=!0),this.playersByQueriedElement.has(X)&&(gt=!0),this.statesByElement.has(X)&&(gt=!0),this._fetchNamespace(U).elementContainsData(X)||gt}afterFlush(U){this._flushFns.push(U)}afterFlushAnimationsDone(U){this._whenQuietFns.push(U)}_getPreviousPlayers(U,X,gt,Pt,$t){let Ce=[];if(X){const Ae=this.playersByQueriedElement.get(U);Ae&&(Ce=Ae)}else{const Ae=this.playersByElement.get(U);if(Ae){const qe=!$t||$t==bo;Ae.forEach(Ei=>{Ei.queued||!qe&&Ei.triggerName!=Pt||Ce.push(Ei)})}}return(gt||Pt)&&(Ce=Ce.filter(Ae=>!(gt&&gt!=Ae.namespaceId||Pt&&Pt!=Ae.triggerName))),Ce}_beforeAnimationBuild(U,X,gt){const $t=X.element,Ce=X.isRemovalTransition?void 0:U,Ae=X.isRemovalTransition?void 0:X.triggerName;for(const qe of X.timelines){const Ei=qe.element,Ni=Ei!==$t,Gi=O(gt,Ei,[]);this._getPreviousPlayers(Ei,Ni,Ce,Ae,X.toState).forEach(Tn=>{const on=Tn.getRealPlayer();on.beforeDestroy&&on.beforeDestroy(),Tn.destroy(),Gi.push(Tn)})}be($t,X.fromStyles)}_buildAnimation(U,X,gt,Pt,$t,Ce){const Ae=X.triggerName,qe=X.element,Ei=[],Ni=new Set,Gi=new Set,dn=X.timelines.map(on=>{const _n=on.element;Ni.add(_n);const Cn=_n[un];if(Cn&&Cn.removedBeforeQueried)return new e.ZN(on.duration,on.delay);const Qn=_n!==qe,po=function(Bt){const U=[];return hs(Bt,U),U}((gt.get(_n)||xr).map(jo=>jo.getRealPlayer())).filter(jo=>!!jo.element&&jo.element===_n),or=$t.get(_n),Wo=Ce.get(_n),jr=s(0,this._normalizer,0,on.keyframes,or,Wo),zr=this._buildPlayer(on,jr,po);if(on.subTimeline&&Pt&&Gi.add(_n),Qn){const jo=new es(U,Ae,_n);jo.setRealPlayer(zr),Ei.push(jo)}return zr});Ei.forEach(on=>{O(this.playersByQueriedElement,on.element,[]).push(on),on.onDone(()=>function(Bt,U,X){let gt;if(Bt instanceof Map){if(gt=Bt.get(U),gt){if(gt.length){const Pt=gt.indexOf(X);gt.splice(Pt,1)}0==gt.length&&Bt.delete(U)}}else if(gt=Bt[U],gt){if(gt.length){const Pt=gt.indexOf(X);gt.splice(Pt,1)}0==gt.length&&delete Bt[U]}return gt}(this.playersByQueriedElement,on.element,on))}),Ni.forEach(on=>xo(on,Ze));const Tn=o(dn);return Tn.onDestroy(()=>{Ni.forEach(on=>us(on,Ze)),Ke(qe,X.toStyles)}),Gi.forEach(on=>{O(Pt,on,[]).push(Tn)}),Tn}_buildPlayer(U,X,gt){return X.length>0?this.driver.animate(U.element,X,U.duration,U.delay,U.easing,gt):new e.ZN(U.duration,U.delay)}}class es{constructor(U,X,gt){this.namespaceId=U,this.triggerName=X,this.element=gt,this._player=new e.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(U){this._containsRealPlayer||(this._player=U,Object.keys(this._queuedCallbacks).forEach(X=>{this._queuedCallbacks[X].forEach(gt=>c(U,X,void 0,gt))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(U.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(U){this.totalTime=U}syncPlayerEvents(U){const X=this._player;X.triggerCallback&&U.onStart(()=>X.triggerCallback("start")),U.onDone(()=>this.finish()),U.onDestroy(()=>this.destroy())}_queueEvent(U,X){O(this._queuedCallbacks,U,[]).push(X)}onDone(U){this.queued&&this._queueEvent("done",U),this._player.onDone(U)}onStart(U){this.queued&&this._queueEvent("start",U),this._player.onStart(U)}onDestroy(U){this.queued&&this._queueEvent("destroy",U),this._player.onDestroy(U)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(U){this.queued||this._player.setPosition(U)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(U){const X=this._player;X.triggerCallback&&X.triggerCallback(U)}}function $o(Bt){return Bt&&1===Bt.nodeType}function Lo(Bt,U){const X=Bt.style.display;return Bt.style.display=null!=U?U:"none",X}function _r(Bt,U,X,gt,Pt){const $t=[];X.forEach(qe=>$t.push(Lo(qe)));const Ce=[];gt.forEach((qe,Ei)=>{const Ni={};qe.forEach(Gi=>{const dn=Ni[Gi]=U.computeStyle(Ei,Gi,Pt);(!dn||0==dn.length)&&(Ei[un]=qn,Ce.push(Ei))}),Bt.set(Ei,Ni)});let Ae=0;return X.forEach(qe=>Lo(qe,$t[Ae++])),Ce}function oo(Bt,U){const X=new Map;if(Bt.forEach(Ae=>X.set(Ae,[])),0==U.length)return X;const Pt=new Set(U),$t=new Map;function Ce(Ae){if(!Ae)return 1;let qe=$t.get(Ae);if(qe)return qe;const Ei=Ae.parentNode;return qe=X.has(Ei)?Ei:Pt.has(Ei)?1:Ce(Ei),$t.set(Ae,qe),qe}return U.forEach(Ae=>{const qe=Ce(Ae);1!==qe&&X.get(qe).push(Ae)}),X}function xo(Bt,U){var X;null===(X=Bt.classList)||void 0===X||X.add(U)}function us(Bt,U){var X;null===(X=Bt.classList)||void 0===X||X.remove(U)}function Js(Bt,U,X){o(X).onDone(()=>Bt.processLeaveNode(U))}function hs(Bt,U){for(let X=0;X<Bt.length;X++){const gt=Bt[X];gt instanceof e.ZE?hs(gt.players,U):U.push(gt)}}function ds(Bt,U,X){const gt=X.get(Bt);if(!gt)return!1;let Pt=U.get(Bt);return Pt?gt.forEach($t=>Pt.add($t)):U.set(Bt,gt),X.delete(Bt),!0}class Ts{constructor(U,X,gt){this.bodyNode=U,this._driver=X,this._normalizer=gt,this._triggerCache={},this.onRemovalComplete=(Pt,$t)=>{},this._transitionEngine=new En(U,X,gt),this._timelineEngine=new qr(U,X,gt),this._transitionEngine.onRemovalComplete=(Pt,$t)=>this.onRemovalComplete(Pt,$t)}registerTrigger(U,X,gt,Pt,$t){const Ce=U+"-"+Pt;let Ae=this._triggerCache[Ce];if(!Ae){const qe=[],Ei=$e(this._driver,$t,qe);if(qe.length)throw new Error(`The animation trigger "${Pt}" has failed to build due to the following errors:\n - ${qe.join("\n - ")}`);Ae=function(Bt,U,X){return new so(Bt,U,X)}(Pt,Ei,this._normalizer),this._triggerCache[Ce]=Ae}this._transitionEngine.registerTrigger(X,Pt,Ae)}register(U,X){this._transitionEngine.register(U,X)}destroy(U,X){this._transitionEngine.destroy(U,X)}onInsert(U,X,gt,Pt){this._transitionEngine.insertNode(U,X,gt,Pt)}onRemove(U,X,gt,Pt){this._transitionEngine.removeNode(U,X,Pt||!1,gt)}disableAnimations(U,X){this._transitionEngine.markElementAsDisabled(U,X)}process(U,X,gt,Pt){if("@"==gt.charAt(0)){const[$t,Ce]=H(gt);this._timelineEngine.command($t,X,Ce,Pt)}else this._transitionEngine.trigger(U,X,gt,Pt)}listen(U,X,gt,Pt,$t){if("@"==gt.charAt(0)){const[Ce,Ae]=H(gt);return this._timelineEngine.listen(Ce,X,Ae,$t)}return this._transitionEngine.listen(U,X,gt,Pt,$t)}flush(U=-1){this._transitionEngine.flush(U)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Bs(Bt,U){let X=null,gt=null;return Array.isArray(U)&&U.length?(X=vr(U[0]),U.length>1&&(gt=vr(U[U.length-1]))):U&&(X=vr(U)),X||gt?new is(Bt,X,gt):null}let is=(()=>{class Bt{constructor(X,gt,Pt){this._element=X,this._startStyles=gt,this._endStyles=Pt,this._state=0;let $t=Bt.initialStylesByElement.get(X);$t||Bt.initialStylesByElement.set(X,$t={}),this._initialStyles=$t}start(){this._state<1&&(this._startStyles&&Ke(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ke(this._element,this._initialStyles),this._endStyles&&(Ke(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Bt.initialStylesByElement.delete(this._element),this._startStyles&&(be(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(be(this._element,this._endStyles),this._endStyles=null),Ke(this._element,this._initialStyles),this._state=3)}}return Bt.initialStylesByElement=new WeakMap,Bt})();function vr(Bt){let U=null;const X=Object.keys(Bt);for(let gt=0;gt<X.length;gt++){const Pt=X[gt];$s(Pt)&&(U=U||{},U[Pt]=Bt[Pt])}return U}function $s(Bt){return"display"===Bt||"position"===Bt}const Zo="animation",Un="animationend";class lr{constructor(U,X,gt,Pt,$t,Ce,Ae){this._element=U,this._name=X,this._duration=gt,this._delay=Pt,this._easing=$t,this._fillMode=Ce,this._onDoneFn=Ae,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=qe=>this._handleCallback(qe)}apply(){(function(Bt,U){const X=Go(Bt,"").trim();let gt=0;X.length&&(function(Bt,U){let X=0;for(let gt=0;gt<Bt.length;gt++)","===Bt.charAt(gt)&&X++;return X}(X)+1,U=`${X}, ${U}`),nr(Bt,"",U)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Wr(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){br(this._element,this._name,"paused")}resume(){br(this._element,this._name,"running")}setPosition(U){const X=No(this._element,this._name);this._position=U*this._duration,nr(this._element,"Delay",`-${this._position}ms`,X)}getPosition(){return this._position}_handleCallback(U){const X=U._ngTestManualTimestamp||Date.now(),gt=1e3*parseFloat(U.elapsedTime.toFixed(3));U.animationName==this._name&&Math.max(X-this._startTime,0)>=this._delay&&gt>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Wr(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(Bt,U){const gt=Go(Bt,"").split(","),Pt=yr(gt,U);Pt>=0&&(gt.splice(Pt,1),nr(Bt,"",gt.join(",")))}(this._element,this._name))}}function br(Bt,U,X){nr(Bt,"PlayState",X,No(Bt,U))}function No(Bt,U){const X=Go(Bt,"");return X.indexOf(",")>0?yr(X.split(","),U):yr([X],U)}function yr(Bt,U){for(let X=0;X<Bt.length;X++)if(Bt[X].indexOf(U)>=0)return X;return-1}function Wr(Bt,U,X){X?Bt.removeEventListener(Un,U):Bt.addEventListener(Un,U)}function nr(Bt,U,X,gt){const Pt=Zo+U;if(null!=gt){const $t=Bt.style[Pt];if($t.length){const Ce=$t.split(",");Ce[gt]=X,X=Ce.join(",")}}Bt.style[Pt]=X}function Go(Bt,U){return Bt.style[Zo+U]||""}class fr{constructor(U,X,gt,Pt,$t,Ce,Ae,qe){this.element=U,this.keyframes=X,this.animationName=gt,this._duration=Pt,this._delay=$t,this._finalStyles=Ae,this._specialStyles=qe,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Ce||"linear",this.totalTime=Pt+$t,this._buildStyler()}onStart(U){this._onStartFns.push(U)}onDone(U){this._onDoneFns.push(U)}onDestroy(U){this._onDestroyFns.push(U)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(U=>U()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(U=>U()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(U=>U()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(U){this._styler.setPosition(U)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new lr(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(U){const X="start"==U?this._onStartFns:this._onDoneFns;X.forEach(gt=>gt()),X.length=0}beforeDestroy(){this.init();const U={};if(this.hasStarted()){const X=this._state>=3;Object.keys(this._finalStyles).forEach(gt=>{"offset"!=gt&&(U[gt]=X?this._finalStyles[gt]:Nt(this.element,gt))})}this.currentSnapshot=U}}class cr extends e.ZN{constructor(U,X){super(),this.element=U,this._startingStyles={},this.__initialized=!1,this._styles=at(X)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(U=>{this._startingStyles[U]=this.element.style[U]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(U=>this.element.style.setProperty(U,this._styles[U])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(U=>{const X=this._startingStyles[U];X?this.element.style.setProperty(U,X):this.element.style.removeProperty(U)}),this._startingStyles=null,super.destroy())}}class Po{constructor(){this._count=0}validateStyleProperty(U){return wt(U)}matchesElement(U,X){return!1}containsElement(U,X){return yt(U,X)}query(U,X,gt){return lt(U,X,gt)}computeStyle(U,X,gt){return window.getComputedStyle(U)[X]}buildKeyframeElement(U,X,gt){gt=gt.map(Ae=>at(Ae));let Pt=`@keyframes ${X} {\n`,$t="";gt.forEach(Ae=>{$t=" ";const qe=parseFloat(Ae.offset);Pt+=`${$t}${100*qe}% {\n`,$t+=" ",Object.keys(Ae).forEach(Ei=>{const Ni=Ae[Ei];switch(Ei){case"offset":return;case"easing":return void(Ni&&(Pt+=`${$t}animation-timing-function: ${Ni};\n`));default:return void(Pt+=`${$t}${Ei}: ${Ni};\n`)}}),Pt+=`${$t}}\n`}),Pt+="}\n";const Ce=document.createElement("style");return Ce.textContent=Pt,Ce}animate(U,X,gt,Pt,$t,Ce=[],Ae){const qe=Ce.filter(Cn=>Cn instanceof fr),Ei={};ue(gt,Pt)&&qe.forEach(Cn=>{let Qn=Cn.currentSnapshot;Object.keys(Qn).forEach(po=>Ei[po]=Qn[po])});const Ni=function(Bt){let U={};return Bt&&(Array.isArray(Bt)?Bt:[Bt]).forEach(gt=>{Object.keys(gt).forEach(Pt=>{"offset"==Pt||"easing"==Pt||(U[Pt]=gt[Pt])})}),U}(X=le(U,X,Ei));if(0==gt)return new cr(U,Ni);const Gi="gen_css_kf_"+this._count++,dn=this.buildKeyframeElement(U,Gi,X);(function(Bt){var U;const X=null===(U=Bt.getRootNode)||void 0===U?void 0:U.call(Bt);return"undefined"!=typeof ShadowRoot&&X instanceof ShadowRoot?X:document.head})(U).appendChild(dn);const on=Bs(U,X),_n=new fr(U,X,Gi,gt,Pt,$t,Ni,on);return _n.onDestroy(()=>{var Bt;(Bt=dn).parentNode.removeChild(Bt)}),_n}}class Nr{constructor(U,X,gt,Pt){this.element=U,this.keyframes=X,this.options=gt,this._specialStyles=Pt,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=gt.duration,this._delay=gt.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(U=>U()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const U=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,U,this.options),this._finalKeyframe=U.length?U[U.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(U,X,gt){return U.animate(X,gt)}onStart(U){this._onStartFns.push(U)}onDone(U){this._onDoneFns.push(U)}onDestroy(U){this._onDestroyFns.push(U)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(U=>U()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(U=>U()),this._onDestroyFns=[])}setPosition(U){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=U*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const U={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(X=>{"offset"!=X&&(U[X]=this._finished?this._finalKeyframe[X]:Nt(this.element,X))}),this.currentSnapshot=U}triggerCallback(U){const X="start"==U?this._onStartFns:this._onDoneFns;X.forEach(gt=>gt()),X.length=0}}class Et{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(F().toString()),this._cssKeyframesDriver=new Po}validateStyleProperty(U){return wt(U)}matchesElement(U,X){return!1}containsElement(U,X){return yt(U,X)}query(U,X,gt){return lt(U,X,gt)}computeStyle(U,X,gt){return window.getComputedStyle(U)[X]}overrideWebAnimationsSupport(U){this._isNativeImpl=U}animate(U,X,gt,Pt,$t,Ce=[],Ae){if(!Ae&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(U,X,gt,Pt,$t,Ce);const Ni={duration:gt,delay:Pt,fill:0==Pt?"both":"forwards"};$t&&(Ni.easing=$t);const Gi={},dn=Ce.filter(on=>on instanceof Nr);ue(gt,Pt)&&dn.forEach(on=>{let _n=on.currentSnapshot;Object.keys(_n).forEach(Cn=>Gi[Cn]=_n[Cn])});const Tn=Bs(U,X=le(U,X=X.map(on=>we(on,!1)),Gi));return new Nr(U,X,Ni,Tn)}}function F(){return t()&&Element.prototype.animate||{}}var j=m(69808);let St=(()=>{class Bt extends e._j{constructor(X,gt){super(),this._nextAnimationId=0,this._renderer=X.createRenderer(gt.body,{id:"0",encapsulation:y.ifc.None,styles:[],data:{animation:[]}})}build(X){const gt=this._nextAnimationId.toString();this._nextAnimationId++;const Pt=Array.isArray(X)?(0,e.vP)(X):X;return ki(this._renderer,null,gt,"register",[Pt]),new ge(gt,this._renderer)}}return Bt.\u0275fac=function(X){return new(X||Bt)(y.LFG(y.FYo),y.LFG(j.K0))},Bt.\u0275prov=y.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})();class ge extends e.LC{constructor(U,X){super(),this._id=U,this._renderer=X}create(U,X){return new ni(this._id,U,X||{},this._renderer)}}class ni{constructor(U,X,gt,Pt){this.id=U,this.element=X,this._renderer=Pt,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",gt)}_listen(U,X){return this._renderer.listen(this.element,`@@${this.id}:${U}`,X)}_command(U,...X){return ki(this._renderer,this.element,this.id,U,X)}onDone(U){this._listen("done",U)}onStart(U){this._listen("start",U)}onDestroy(U){this._listen("destroy",U)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(U){this._command("setPosition",U)}getPosition(){var U,X;return null!==(X=null===(U=this._renderer.engine.players[+this.id])||void 0===U?void 0:U.getPosition())&&void 0!==X?X:0}}function ki(Bt,U,X,gt,Pt){return Bt.setProperty(U,`@@${X}:${gt}`,Pt)}const Yn="@.disabled";let to=(()=>{class Bt{constructor(X,gt,Pt){this.delegate=X,this.engine=gt,this._zone=Pt,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),gt.onRemovalComplete=($t,Ce)=>{const Ae=null==Ce?void 0:Ce.parentNode($t);Ae&&Ce.removeChild(Ae,$t)}}createRenderer(X,gt){const $t=this.delegate.createRenderer(X,gt);if(!(X&&gt&&gt.data&&gt.data.animation)){let Ni=this._rendererCache.get($t);return Ni||(Ni=new jn("",$t,this.engine),this._rendererCache.set($t,Ni)),Ni}const Ce=gt.id,Ae=gt.id+"-"+this._currentId;this._currentId++,this.engine.register(Ae,X);const qe=Ni=>{Array.isArray(Ni)?Ni.forEach(qe):this.engine.registerTrigger(Ce,Ae,X,Ni.name,Ni)};return gt.data.animation.forEach(qe),new yo(this,Ae,$t,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(X,gt,Pt){X>=0&&X<this._microtaskId?this._zone.run(()=>gt(Pt)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach($t=>{const[Ce,Ae]=$t;Ce(Ae)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([gt,Pt]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return Bt.\u0275fac=function(X){return new(X||Bt)(y.LFG(y.FYo),y.LFG(Ts),y.LFG(y.R0b))},Bt.\u0275prov=y.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})();class jn{constructor(U,X,gt){this.namespaceId=U,this.delegate=X,this.engine=gt,this.destroyNode=this.delegate.destroyNode?Pt=>X.destroyNode(Pt):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(U,X){return this.delegate.createElement(U,X)}createComment(U){return this.delegate.createComment(U)}createText(U){return this.delegate.createText(U)}appendChild(U,X){this.delegate.appendChild(U,X),this.engine.onInsert(this.namespaceId,X,U,!1)}insertBefore(U,X,gt,Pt=!0){this.delegate.insertBefore(U,X,gt),this.engine.onInsert(this.namespaceId,X,U,Pt)}removeChild(U,X,gt){this.engine.onRemove(this.namespaceId,X,this.delegate,gt)}selectRootElement(U,X){return this.delegate.selectRootElement(U,X)}parentNode(U){return this.delegate.parentNode(U)}nextSibling(U){return this.delegate.nextSibling(U)}setAttribute(U,X,gt,Pt){this.delegate.setAttribute(U,X,gt,Pt)}removeAttribute(U,X,gt){this.delegate.removeAttribute(U,X,gt)}addClass(U,X){this.delegate.addClass(U,X)}removeClass(U,X){this.delegate.removeClass(U,X)}setStyle(U,X,gt,Pt){this.delegate.setStyle(U,X,gt,Pt)}removeStyle(U,X,gt){this.delegate.removeStyle(U,X,gt)}setProperty(U,X,gt){"@"==X.charAt(0)&&X==Yn?this.disableAnimations(U,!!gt):this.delegate.setProperty(U,X,gt)}setValue(U,X){this.delegate.setValue(U,X)}listen(U,X,gt){return this.delegate.listen(U,X,gt)}disableAnimations(U,X){this.engine.disableAnimations(U,X)}}class yo extends jn{constructor(U,X,gt,Pt){super(X,gt,Pt),this.factory=U,this.namespaceId=X}setProperty(U,X,gt){"@"==X.charAt(0)?"."==X.charAt(1)&&X==Yn?this.disableAnimations(U,gt=void 0===gt||!!gt):this.engine.process(this.namespaceId,U,X.substr(1),gt):this.delegate.setProperty(U,X,gt)}listen(U,X,gt){if("@"==X.charAt(0)){const Pt=function(Bt){switch(Bt){case"body":return document.body;case"document":return document;case"window":return window;default:return Bt}}(U);let $t=X.substr(1),Ce="";return"@"!=$t.charAt(0)&&([$t,Ce]=function(Bt){const U=Bt.indexOf(".");return[Bt.substring(0,U),Bt.substr(U+1)]}($t)),this.engine.listen(this.namespaceId,Pt,$t,Ce,Ae=>{this.factory.scheduleListenerCallback(Ae._data||-1,gt,Ae)})}return this.delegate.listen(U,X,gt)}}let fn=(()=>{class Bt extends Ts{constructor(X,gt,Pt){super(X.body,gt,Pt)}ngOnDestroy(){this.flush()}}return Bt.\u0275fac=function(X){return new(X||Bt)(y.LFG(j.K0),y.LFG(tt),y.LFG(ar))},Bt.\u0275prov=y.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})();const Vs=new y.OlP("AnimationModuleType"),Er=[{provide:e._j,useClass:St},{provide:ar,useFactory:function(){return new tr}},{provide:Ts,useClass:fn},{provide:y.FYo,useFactory:function(Bt,U,X){return new to(Bt,U,X)},deps:[p.se,Ts,y.R0b]}],qs=[{provide:tt,useFactory:function(){return"function"==typeof F()?new Et:new Po}},{provide:Vs,useValue:"BrowserAnimations"},...Er],ba=[{provide:tt,useClass:bt},{provide:Vs,useValue:"NoopAnimations"},...Er];let Di=(()=>{class Bt{static withConfig(X){return{ngModule:Bt,providers:X.disableAnimations?ba:qs}}}return Bt.\u0275fac=function(X){return new(X||Bt)},Bt.\u0275mod=y.oAB({type:Bt}),Bt.\u0275inj=y.cJS({providers:qs,imports:[p.b2]}),Bt})()},22313:(L,W,m)=>{"use strict";m.d(W,{b2:()=>vi,H7:()=>Pi,Dx:()=>Yt,q6:()=>re,se:()=>Gt});var y=m(69808),p=m(5e3);class e extends y.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class t extends e{static makeCurrent(){(0,y.HT)(new t)}onAndCancel(Re,fe,ze){return Re.addEventListener(fe,ze,!1),()=>{Re.removeEventListener(fe,ze,!1)}}dispatchEvent(Re,fe){Re.dispatchEvent(fe)}remove(Re){Re.parentNode&&Re.parentNode.removeChild(Re)}createElement(Re,fe){return(fe=fe||this.getDefaultDocument()).createElement(Re)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Re){return Re.nodeType===Node.ELEMENT_NODE}isShadowRoot(Re){return Re instanceof DocumentFragment}getGlobalEventTarget(Re,fe){return"window"===fe?window:"document"===fe?Re:"body"===fe?Re.body:null}getBaseHref(Re){const fe=(n=n||document.querySelector("base"),n?n.getAttribute("href"):null);return null==fe?null:function(Xe){s=s||document.createElement("a"),s.setAttribute("href",Xe);const Re=s.pathname;return"/"===Re.charAt(0)?Re:`/${Re}`}(fe)}resetBaseElement(){n=null}getUserAgent(){return window.navigator.userAgent}getCookie(Re){return(0,y.Mx)(document.cookie,Re)}}let s,n=null;const v=new p.OlP("TRANSITION_ID"),O=[{provide:p.ip1,useFactory:function(Xe,Re,fe){return()=>{fe.get(p.CZH).donePromise.then(()=>{const ze=(0,y.q)(),_i=Re.querySelectorAll(`style[ng-transition="${Xe}"]`);for(let Xi=0;Xi<_i.length;Xi++)ze.remove(_i[Xi])})}},deps:[v,y.K0,p.zs3],multi:!0}];class H{static init(){(0,p.VLi)(new H)}addToWindow(Re){p.dqk.getAngularTestability=(ze,_i=!0)=>{const Xi=Re.findTestabilityInTree(ze,_i);if(null==Xi)throw new Error("Could not find testability for element.");return Xi},p.dqk.getAllAngularTestabilities=()=>Re.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>Re.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(ze=>{const _i=p.dqk.getAllAngularTestabilities();let Xi=_i.length,hn=!1;const Mn=function(Nn){hn=hn||Nn,Xi--,0==Xi&&ze(hn)};_i.forEach(function(Nn){Nn.whenStable(Mn)})})}findTestabilityInTree(Re,fe,ze){if(null==fe)return null;const _i=Re.getTestability(fe);return null!=_i?_i:ze?(0,y.q)().isShadowRoot(fe)?this.findTestabilityInTree(Re,fe.host,!0):this.findTestabilityInTree(Re,fe.parentElement,!0):null}}let V=(()=>{class Xe{build(){return new XMLHttpRequest}}return Xe.\u0275fac=function(fe){return new(fe||Xe)},Xe.\u0275prov=p.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();const G=new p.OlP("EventManagerPlugins");let Z=(()=>{class Xe{constructor(fe,ze){this._zone=ze,this._eventNameToPlugin=new Map,fe.forEach(_i=>_i.manager=this),this._plugins=fe.slice().reverse()}addEventListener(fe,ze,_i){return this._findPluginFor(ze).addEventListener(fe,ze,_i)}addGlobalEventListener(fe,ze,_i){return this._findPluginFor(ze).addGlobalEventListener(fe,ze,_i)}getZone(){return this._zone}_findPluginFor(fe){const ze=this._eventNameToPlugin.get(fe);if(ze)return ze;const _i=this._plugins;for(let Xi=0;Xi<_i.length;Xi++){const hn=_i[Xi];if(hn.supports(fe))return this._eventNameToPlugin.set(fe,hn),hn}throw new Error(`No event manager plugin found for event ${fe}`)}}return Xe.\u0275fac=function(fe){return new(fe||Xe)(p.LFG(G),p.LFG(p.R0b))},Xe.\u0275prov=p.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();class vt{constructor(Re){this._doc=Re}addGlobalEventListener(Re,fe,ze){const _i=(0,y.q)().getGlobalEventTarget(this._doc,Re);if(!_i)throw new Error(`Unsupported event target ${_i} for event ${fe}`);return this.addEventListener(_i,fe,ze)}}let it=(()=>{class Xe{constructor(){this._stylesSet=new Set}addStyles(fe){const ze=new Set;fe.forEach(_i=>{this._stylesSet.has(_i)||(this._stylesSet.add(_i),ze.add(_i))}),this.onStylesAdded(ze)}onStylesAdded(fe){}getAllStyles(){return Array.from(this._stylesSet)}}return Xe.\u0275fac=function(fe){return new(fe||Xe)},Xe.\u0275prov=p.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})(),ot=(()=>{class Xe extends it{constructor(fe){super(),this._doc=fe,this._hostNodes=new Map,this._hostNodes.set(fe.head,[])}_addStylesToHost(fe,ze,_i){fe.forEach(Xi=>{const hn=this._doc.createElement("style");hn.textContent=Xi,_i.push(ze.appendChild(hn))})}addHost(fe){const ze=[];this._addStylesToHost(this._stylesSet,fe,ze),this._hostNodes.set(fe,ze)}removeHost(fe){const ze=this._hostNodes.get(fe);ze&&ze.forEach(wt),this._hostNodes.delete(fe)}onStylesAdded(fe){this._hostNodes.forEach((ze,_i)=>{this._addStylesToHost(fe,_i,ze)})}ngOnDestroy(){this._hostNodes.forEach(fe=>fe.forEach(wt))}}return Xe.\u0275fac=function(fe){return new(fe||Xe)(p.LFG(y.K0))},Xe.\u0275prov=p.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();function wt(Xe){(0,y.q)().remove(Xe)}const ct={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},yt=/%COMP%/g;function dt(Xe,Re,fe){for(let ze=0;ze<Re.length;ze++){let _i=Re[ze];Array.isArray(_i)?dt(Xe,_i,fe):(_i=_i.replace(yt,Xe),fe.push(_i))}return fe}function nt(Xe){return Re=>{if("__ngUnwrap__"===Re)return Xe;!1===Xe(Re)&&(Re.preventDefault(),Re.returnValue=!1)}}let Gt=(()=>{class Xe{constructor(fe,ze,_i){this.eventManager=fe,this.sharedStylesHost=ze,this.appId=_i,this.rendererByCompId=new Map,this.defaultRenderer=new It(fe)}createRenderer(fe,ze){if(!fe||!ze)return this.defaultRenderer;switch(ze.encapsulation){case p.ifc.Emulated:{let _i=this.rendererByCompId.get(ze.id);return _i||(_i=new Ze(this.eventManager,this.sharedStylesHost,ze,this.appId),this.rendererByCompId.set(ze.id,_i)),_i.applyToHost(fe),_i}case 1:case p.ifc.ShadowDom:return new me(this.eventManager,this.sharedStylesHost,fe,ze);default:if(!this.rendererByCompId.has(ze.id)){const _i=dt(ze.id,ze.styles,[]);this.sharedStylesHost.addStyles(_i),this.rendererByCompId.set(ze.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Xe.\u0275fac=function(fe){return new(fe||Xe)(p.LFG(Z),p.LFG(ot),p.LFG(p.AFp))},Xe.\u0275prov=p.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();class It{constructor(Re){this.eventManager=Re,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Re,fe){return fe?document.createElementNS(ct[fe]||fe,Re):document.createElement(Re)}createComment(Re){return document.createComment(Re)}createText(Re){return document.createTextNode(Re)}appendChild(Re,fe){Re.appendChild(fe)}insertBefore(Re,fe,ze){Re&&Re.insertBefore(fe,ze)}removeChild(Re,fe){Re&&Re.removeChild(fe)}selectRootElement(Re,fe){let ze="string"==typeof Re?document.querySelector(Re):Re;if(!ze)throw new Error(`The selector "${Re}" did not match any elements`);return fe||(ze.textContent=""),ze}parentNode(Re){return Re.parentNode}nextSibling(Re){return Re.nextSibling}setAttribute(Re,fe,ze,_i){if(_i){fe=_i+":"+fe;const Xi=ct[_i];Xi?Re.setAttributeNS(Xi,fe,ze):Re.setAttribute(fe,ze)}else Re.setAttribute(fe,ze)}removeAttribute(Re,fe,ze){if(ze){const _i=ct[ze];_i?Re.removeAttributeNS(_i,fe):Re.removeAttribute(`${ze}:${fe}`)}else Re.removeAttribute(fe)}addClass(Re,fe){Re.classList.add(fe)}removeClass(Re,fe){Re.classList.remove(fe)}setStyle(Re,fe,ze,_i){_i&(p.JOm.DashCase|p.JOm.Important)?Re.style.setProperty(fe,ze,_i&p.JOm.Important?"important":""):Re.style[fe]=ze}removeStyle(Re,fe,ze){ze&p.JOm.DashCase?Re.style.removeProperty(fe):Re.style[fe]=""}setProperty(Re,fe,ze){Re[fe]=ze}setValue(Re,fe){Re.nodeValue=fe}listen(Re,fe,ze){return"string"==typeof Re?this.eventManager.addGlobalEventListener(Re,fe,nt(ze)):this.eventManager.addEventListener(Re,fe,nt(ze))}}class Ze extends It{constructor(Re,fe,ze,_i){super(Re),this.component=ze;const Xi=dt(_i+"-"+ze.id,ze.styles,[]);fe.addStyles(Xi),this.contentAttr="_ngcontent-%COMP%".replace(yt,_i+"-"+ze.id),this.hostAttr="_nghost-%COMP%".replace(yt,_i+"-"+ze.id)}applyToHost(Re){super.setAttribute(Re,this.hostAttr,"")}createElement(Re,fe){const ze=super.createElement(Re,fe);return super.setAttribute(ze,this.contentAttr,""),ze}}class me extends It{constructor(Re,fe,ze,_i){super(Re),this.sharedStylesHost=fe,this.hostEl=ze,this.shadowRoot=ze.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Xi=dt(_i.id,_i.styles,[]);for(let hn=0;hn<Xi.length;hn++){const Mn=document.createElement("style");Mn.textContent=Xi[hn],this.shadowRoot.appendChild(Mn)}}nodeOrShadowRoot(Re){return Re===this.hostEl?this.shadowRoot:Re}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Re,fe){return super.appendChild(this.nodeOrShadowRoot(Re),fe)}insertBefore(Re,fe,ze){return super.insertBefore(this.nodeOrShadowRoot(Re),fe,ze)}removeChild(Re,fe){return super.removeChild(this.nodeOrShadowRoot(Re),fe)}parentNode(Re){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Re)))}}let Be=(()=>{class Xe extends vt{constructor(fe){super(fe)}supports(fe){return!0}addEventListener(fe,ze,_i){return fe.addEventListener(ze,_i,!1),()=>this.removeEventListener(fe,ze,_i)}removeEventListener(fe,ze,_i){return fe.removeEventListener(ze,_i)}}return Xe.\u0275fac=function(fe){return new(fe||Xe)(p.LFG(y.K0))},Xe.\u0275prov=p.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();const Ge=["alt","control","meta","shift"],Qe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ne={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pe={alt:Xe=>Xe.altKey,control:Xe=>Xe.ctrlKey,meta:Xe=>Xe.metaKey,shift:Xe=>Xe.shiftKey};let we=(()=>{class Xe extends vt{constructor(fe){super(fe)}supports(fe){return null!=Xe.parseEventName(fe)}addEventListener(fe,ze,_i){const Xi=Xe.parseEventName(ze),hn=Xe.eventCallback(Xi.fullKey,_i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,y.q)().onAndCancel(fe,Xi.domEventName,hn))}static parseEventName(fe){const ze=fe.toLowerCase().split("."),_i=ze.shift();if(0===ze.length||"keydown"!==_i&&"keyup"!==_i)return null;const Xi=Xe._normalizeKey(ze.pop());let hn="";if(Ge.forEach(Nn=>{const mr=ze.indexOf(Nn);mr>-1&&(ze.splice(mr,1),hn+=Nn+".")}),hn+=Xi,0!=ze.length||0===Xi.length)return null;const Mn={};return Mn.domEventName=_i,Mn.fullKey=hn,Mn}static getEventFullKey(fe){let ze="",_i=function(Xe){let Re=Xe.key;if(null==Re){if(Re=Xe.keyIdentifier,null==Re)return"Unidentified";Re.startsWith("U+")&&(Re=String.fromCharCode(parseInt(Re.substring(2),16)),3===Xe.location&&Ne.hasOwnProperty(Re)&&(Re=Ne[Re]))}return Qe[Re]||Re}(fe);return _i=_i.toLowerCase()," "===_i?_i="space":"."===_i&&(_i="dot"),Ge.forEach(Xi=>{Xi!=_i&&pe[Xi](fe)&&(ze+=Xi+".")}),ze+=_i,ze}static eventCallback(fe,ze,_i){return Xi=>{Xe.getEventFullKey(Xi)===fe&&_i.runGuarded(()=>ze(Xi))}}static _normalizeKey(fe){return"esc"===fe?"escape":fe}}return Xe.\u0275fac=function(fe){return new(fe||Xe)(p.LFG(y.K0))},Xe.\u0275prov=p.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();const re=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:y.bD},{provide:p.g9A,useValue:function(){t.makeCurrent(),H.init()},multi:!0},{provide:y.K0,useFactory:function(){return(0,p.RDi)(document),document},deps:[]}]),Me=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function(){return new p.qLn},deps:[]},{provide:G,useClass:Be,multi:!0,deps:[y.K0,p.R0b,p.Lbi]},{provide:G,useClass:we,multi:!0,deps:[y.K0]},{provide:Gt,useClass:Gt,deps:[Z,ot,p.AFp]},{provide:p.FYo,useExisting:Gt},{provide:it,useExisting:ot},{provide:ot,useClass:ot,deps:[y.K0]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:Z,useClass:Z,deps:[G,p.R0b]},{provide:y.JF,useClass:V,deps:[]}];let vi=(()=>{class Xe{constructor(fe){if(fe)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(fe){return{ngModule:Xe,providers:[{provide:p.AFp,useValue:fe.appId},{provide:v,useExisting:p.AFp},O]}}}return Xe.\u0275fac=function(fe){return new(fe||Xe)(p.LFG(Xe,12))},Xe.\u0275mod=p.oAB({type:Xe}),Xe.\u0275inj=p.cJS({providers:Me,imports:[y.ez,p.hGG]}),Xe})(),Yt=(()=>{class Xe{constructor(fe){this._doc=fe}getTitle(){return this._doc.title}setTitle(fe){this._doc.title=fe||""}}return Xe.\u0275fac=function(fe){return new(fe||Xe)(p.LFG(y.K0))},Xe.\u0275prov=p.Yz7({token:Xe,factory:function(fe){let ze=null;return ze=fe?new fe:new Yt((0,p.LFG)(y.K0)),ze},providedIn:"root"}),Xe})();"undefined"!=typeof window&&window;let Pi=(()=>{class Xe{}return Xe.\u0275fac=function(fe){return new(fe||Xe)},Xe.\u0275prov=p.Yz7({token:Xe,factory:function(fe){let ze=null;return ze=fe?new(fe||Xe):p.LFG(bn),ze},providedIn:"root"}),Xe})(),bn=(()=>{class Xe extends Pi{constructor(fe){super(),this._doc=fe}sanitize(fe,ze){if(null==ze)return null;switch(fe){case p.q3G.NONE:return ze;case p.q3G.HTML:return(0,p.qzn)(ze,"HTML")?(0,p.z3N)(ze):(0,p.EiD)(this._doc,String(ze)).toString();case p.q3G.STYLE:return(0,p.qzn)(ze,"Style")?(0,p.z3N)(ze):ze;case p.q3G.SCRIPT:if((0,p.qzn)(ze,"Script"))return(0,p.z3N)(ze);throw new Error("unsafe value used in a script context");case p.q3G.URL:return(0,p.yhl)(ze),(0,p.qzn)(ze,"URL")?(0,p.z3N)(ze):(0,p.mCW)(String(ze));case p.q3G.RESOURCE_URL:if((0,p.qzn)(ze,"ResourceURL"))return(0,p.z3N)(ze);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${fe} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(fe){return(0,p.JVY)(fe)}bypassSecurityTrustStyle(fe){return(0,p.L6k)(fe)}bypassSecurityTrustScript(fe){return(0,p.eBb)(fe)}bypassSecurityTrustUrl(fe){return(0,p.LAX)(fe)}bypassSecurityTrustResourceUrl(fe){return(0,p.pB0)(fe)}}return Xe.\u0275fac=function(fe){return new(fe||Xe)(p.LFG(y.K0))},Xe.\u0275prov=p.Yz7({token:Xe,factory:function(fe){let ze=null;return ze=fe?new fe:function(Xe){return new bn(Xe.get(y.K0))}(p.LFG(p.zs3)),ze},providedIn:"root"}),Xe})()},26696:(L,W,m)=>{"use strict";m.d(W,{gz:()=>Oo,yS:()=>gs,Bz:()=>la,lC:()=>mo});var y=m(5e3);const e=(0,m(83888).d)(ht=>function(){ht(this),this.name="EmptyError",this.message="no elements in sequence"});var t=m(32076),n=m(39646),o=m(61135),s=m(39841),c=m(79307),v=m(97272),R=m(49770),O=m(60515),H=m(94033),V=m(77579),G=m(54482),Z=m(25403);function vt(ht,q,$,Ct,At){return(Kt,ve)=>{let xe=$,fi=q,Zi=0;Kt.subscribe(new Z.Q(ve,Fn=>{const vn=Zi++;fi=xe?ht(fi,Fn,vn):(xe=!0,Fn),Ct&&ve.next(fi)},At&&(()=>{xe&&ve.next(fi),ve.complete()})))}}function it(ht,q){return(0,G.e)(vt(ht,q,arguments.length>=2,!0))}var ot=m(39300);function wt(ht){return ht<=0?()=>O.E:(0,G.e)((q,$)=>{let Ct=[];q.subscribe(new Z.Q($,At=>{Ct.push(At),ht<Ct.length&&Ct.shift()},()=>{for(const At of Ct)$.next(At);$.complete()},void 0,()=>{Ct=null}))})}function ct(ht=yt){return(0,G.e)((q,$)=>{let Ct=!1;q.subscribe(new Z.Q($,At=>{Ct=!0,$.next(At)},()=>Ct?$.complete():$.error(ht())))})}function yt(){return new e}function lt(ht){return(0,G.e)((q,$)=>{let Ct=!1;q.subscribe(new Z.Q($,At=>{Ct=!0,$.next(At)},()=>{Ct||$.next(ht),$.complete()}))})}var at=m(44671),tt=m(95698);function Rt(ht,q){const $=arguments.length>=2;return Ct=>Ct.pipe(ht?(0,ot.h)((At,Kt)=>ht(At,Kt,Ct)):at.y,(0,tt.q)(1),$?lt(q):ct(()=>new e))}var mt=m(54004),dt=m(63900),nt=m(68675),st=m(70262),Gt=m(24351),It=m(95577),Vt=m(18505),Ie=m(38343),Ze=m(28746),me=m(8189),Be=m(69808);class Ge{constructor(q,$){this.id=q,this.url=$}}class si extends Ge{constructor(q,$,Ct="imperative",At=null){super(q,$),this.navigationTrigger=Ct,this.restoredState=At}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qe extends Ge{constructor(q,$,Ct){super(q,$),this.urlAfterRedirects=Ct}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ne extends Ge{constructor(q,$,Ct){super(q,$),this.reason=Ct}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pe extends Ge{constructor(q,$,Ct){super(q,$),this.error=Ct}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class we extends Ge{constructor(q,$,Ct,At){super(q,$),this.urlAfterRedirects=Ct,this.state=At}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ve extends Ge{constructor(q,$,Ct,At){super(q,$),this.urlAfterRedirects=Ct,this.state=At}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ui extends Ge{constructor(q,$,Ct,At,Kt){super(q,$),this.urlAfterRedirects=Ct,this.state=At,this.shouldActivate=Kt}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ke extends Ge{constructor(q,$,Ct,At){super(q,$),this.urlAfterRedirects=Ct,this.state=At}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class be extends Ge{constructor(q,$,Ct,At){super(q,$),this.urlAfterRedirects=Ct,this.state=At}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xt{constructor(q){this.route=q}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class re{constructor(q){this.route=q}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Me{constructor(q){this.snapshot=q}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vi{constructor(q){this.snapshot=q}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ie{constructor(q){this.snapshot=q}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ut{constructor(q){this.snapshot=q}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ht{constructor(q,$,Ct){this.routerEvent=q,this.position=$,this.anchor=Ct}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Zt="primary";class Yt{constructor(q){this.params=q||{}}has(q){return Object.prototype.hasOwnProperty.call(this.params,q)}get(q){if(this.has(q)){const $=this.params[q];return Array.isArray($)?$[0]:$}return null}getAll(q){if(this.has(q)){const $=this.params[q];return Array.isArray($)?$:[$]}return[]}get keys(){return Object.keys(this.params)}}function ue(ht){return new Yt(ht)}const le="ngNavigationCancelingError";function Mt(ht){const q=Error("NavigationCancelingError: "+ht);return q[le]=!0,q}function ke(ht,q,$){const Ct=$.path.split("/");if(Ct.length>ht.length||"full"===$.pathMatch&&(q.hasChildren()||Ct.length<ht.length))return null;const At={};for(let Kt=0;Kt<Ct.length;Kt++){const ve=Ct[Kt],xe=ht[Kt];if(ve.startsWith(":"))At[ve.substring(1)]=xe;else if(ve!==xe.path)return null}return{consumed:ht.slice(0,Ct.length),posParams:At}}function li(ht,q){const $=ht?Object.keys(ht):void 0,Ct=q?Object.keys(q):void 0;if(!$||!Ct||$.length!=Ct.length)return!1;let At;for(let Kt=0;Kt<$.length;Kt++)if(At=$[Kt],!ri(ht[At],q[At]))return!1;return!0}function ri(ht,q){if(Array.isArray(ht)&&Array.isArray(q)){if(ht.length!==q.length)return!1;const $=[...ht].sort(),Ct=[...q].sort();return $.every((At,Kt)=>Ct[Kt]===At)}return ht===q}function mi(ht){return Array.prototype.concat.apply([],ht)}function Bi(ht){return ht.length>0?ht[ht.length-1]:null}function bi(ht,q){for(const $ in ht)ht.hasOwnProperty($)&&q(ht[$],$)}function yi(ht){return(0,y.CqO)(ht)?ht:(0,y.QGY)(ht)?(0,t.D)(Promise.resolve(ht)):(0,n.of)(ht)}const ei={exact:function Te(ht,q,$){if(!Hi(ht.segments,q.segments)||!te(ht.segments,q.segments,$)||ht.numberOfChildren!==q.numberOfChildren)return!1;for(const Ct in q.children)if(!ht.children[Ct]||!Te(ht.children[Ct],q.children[Ct],$))return!1;return!0},subset:se},ae={exact:function(ht,q){return li(ht,q)},subset:function(ht,q){return Object.keys(q).length<=Object.keys(ht).length&&Object.keys(q).every($=>ri(ht[$],q[$]))},ignored:()=>!0};function Pe(ht,q,$){return ei[$.paths](ht.root,q.root,$.matrixParams)&&ae[$.queryParams](ht.queryParams,q.queryParams)&&!("exact"===$.fragment&&ht.fragment!==q.fragment)}function se(ht,q,$){return Jt(ht,q,q.segments,$)}function Jt(ht,q,$,Ct){if(ht.segments.length>$.length){const At=ht.segments.slice(0,$.length);return!(!Hi(At,$)||q.hasChildren()||!te(At,$,Ct))}if(ht.segments.length===$.length){if(!Hi(ht.segments,$)||!te(ht.segments,$,Ct))return!1;for(const At in q.children)if(!ht.children[At]||!se(ht.children[At],q.children[At],Ct))return!1;return!0}{const At=$.slice(0,ht.segments.length),Kt=$.slice(ht.segments.length);return!!(Hi(ht.segments,At)&&te(ht.segments,At,Ct)&&ht.children[Zt])&&Jt(ht.children[Zt],q,Kt,Ct)}}function te(ht,q,$){return q.every((Ct,At)=>ae[$](ht[At].parameters,Ct.parameters))}class qt{constructor(q,$,Ct){this.root=q,this.queryParams=$,this.fragment=Ct}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ue(this.queryParams)),this._queryParamMap}toString(){return Re.serialize(this)}}class Ee{constructor(q,$){this.segments=q,this.children=$,this.parent=null,bi($,(Ct,At)=>Ct.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fe(this)}}class ti{constructor(q,$){this.path=q,this.parameters=$}get parameterMap(){return this._parameterMap||(this._parameterMap=ue(this.parameters)),this._parameterMap}toString(){return ar(this)}}function Hi(ht,q){return ht.length===q.length&&ht.every(($,Ct)=>$.path===q[Ct].path)}class Ln{}class Xe{parse(q){const $=new Ro(q);return new qt($.parseRootSegment(),$.parseQueryParams(),$.parseFragment())}serialize(q){const $=`/${ze(q.root,!0)}`,Ct=function(ht){const q=Object.keys(ht).map($=>{const Ct=ht[$];return Array.isArray(Ct)?Ct.map(At=>`${Xi($)}=${Xi(At)}`).join("&"):`${Xi($)}=${Xi(Ct)}`}).filter($=>!!$);return q.length?`?${q.join("&")}`:""}(q.queryParams);var ht;return`${$}${Ct}${"string"==typeof q.fragment?`#${ht=q.fragment,encodeURI(ht)}`:""}`}}const Re=new Xe;function fe(ht){return ht.segments.map(q=>ar(q)).join("/")}function ze(ht,q){if(!ht.hasChildren())return fe(ht);if(q){const $=ht.children[Zt]?ze(ht.children[Zt],!1):"",Ct=[];return bi(ht.children,(At,Kt)=>{Kt!==Zt&&Ct.push(`${Kt}:${ze(At,!1)}`)}),Ct.length>0?`${$}(${Ct.join("//")})`:$}{const $=function(ht,q){let $=[];return bi(ht.children,(Ct,At)=>{At===Zt&&($=$.concat(q(Ct,At)))}),bi(ht.children,(Ct,At)=>{At!==Zt&&($=$.concat(q(Ct,At)))}),$}(ht,(Ct,At)=>At===Zt?[ze(ht.children[Zt],!1)]:[`${At}:${ze(Ct,!1)}`]);return 1===Object.keys(ht.children).length&&null!=ht.children[Zt]?`${fe(ht)}/${$[0]}`:`${fe(ht)}/(${$.join("//")})`}}function _i(ht){return encodeURIComponent(ht).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xi(ht){return _i(ht).replace(/%3B/gi,";")}function Mn(ht){return _i(ht).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nn(ht){return decodeURIComponent(ht)}function mr(ht){return Nn(ht.replace(/\+/g,"%20"))}function ar(ht){return`${Mn(ht.path)}${function(ht){return Object.keys(ht).map(q=>`;${Mn(q)}=${Mn(ht[q])}`).join("")}(ht.parameters)}`}const eo=/^[^\/()?;=#]+/;function Ar(ht){const q=ht.match(eo);return q?q[0]:""}const Pn=/^[^=?&#]+/,Ji=/^[^&#]+/;class Ro{constructor(q){this.url=q,this.remaining=q}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){const q={};if(this.consumeOptional("?"))do{this.parseQueryParam(q)}while(this.consumeOptional("&"));return q}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const q=[];for(this.peekStartsWith("(")||q.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),q.push(this.parseSegment());let $={};this.peekStartsWith("/(")&&(this.capture("/"),$=this.parseParens(!0));let Ct={};return this.peekStartsWith("(")&&(Ct=this.parseParens(!1)),(q.length>0||Object.keys($).length>0)&&(Ct[Zt]=new Ee(q,$)),Ct}parseSegment(){const q=Ar(this.remaining);if(""===q&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(q),new ti(Nn(q),this.parseMatrixParams())}parseMatrixParams(){const q={};for(;this.consumeOptional(";");)this.parseParam(q);return q}parseParam(q){const $=Ar(this.remaining);if(!$)return;this.capture($);let Ct="";if(this.consumeOptional("=")){const At=Ar(this.remaining);At&&(Ct=At,this.capture(Ct))}q[Nn($)]=Nn(Ct)}parseQueryParam(q){const $=function(ht){const q=ht.match(Pn);return q?q[0]:""}(this.remaining);if(!$)return;this.capture($);let Ct="";if(this.consumeOptional("=")){const ve=function(ht){const q=ht.match(Ji);return q?q[0]:""}(this.remaining);ve&&(Ct=ve,this.capture(Ct))}const At=mr($),Kt=mr(Ct);if(q.hasOwnProperty(At)){let ve=q[At];Array.isArray(ve)||(ve=[ve],q[At]=ve),ve.push(Kt)}else q[At]=Kt}parseParens(q){const $={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Ct=Ar(this.remaining),At=this.remaining[Ct.length];if("/"!==At&&")"!==At&&";"!==At)throw new Error(`Cannot parse url '${this.url}'`);let Kt;Ct.indexOf(":")>-1?(Kt=Ct.substr(0,Ct.indexOf(":")),this.capture(Kt),this.capture(":")):q&&(Kt=Zt);const ve=this.parseChildren();$[Kt]=1===Object.keys(ve).length?ve[Zt]:new Ee([],ve),this.consumeOptional("//")}return $}peekStartsWith(q){return this.remaining.startsWith(q)}consumeOptional(q){return!!this.peekStartsWith(q)&&(this.remaining=this.remaining.substring(q.length),!0)}capture(q){if(!this.consumeOptional(q))throw new Error(`Expected "${q}".`)}}class Or{constructor(q){this._root=q}get root(){return this._root.value}parent(q){const $=this.pathFromRoot(q);return $.length>1?$[$.length-2]:null}children(q){const $=so(q,this._root);return $?$.children.map(Ct=>Ct.value):[]}firstChild(q){const $=so(q,this._root);return $&&$.children.length>0?$.children[0].value:null}siblings(q){const $=Do(q,this._root);return $.length<2?[]:$[$.length-2].children.map(At=>At.value).filter(At=>At!==q)}pathFromRoot(q){return Do(q,this._root).map($=>$.value)}}function so(ht,q){if(ht===q.value)return q;for(const $ of q.children){const Ct=so(ht,$);if(Ct)return Ct}return null}function Do(ht,q){if(ht===q.value)return[q];for(const $ of q.children){const Ct=Do(ht,$);if(Ct.length)return Ct.unshift(q),Ct}return[]}class Bn{constructor(q,$){this.value=q,this.children=$}toString(){return`TreeNode(${this.value})`}}function Vo(ht){const q={};return ht&&ht.children.forEach($=>q[$.value.outlet]=$),q}class qr extends Or{constructor(q,$){super(q),this.snapshot=$,Jo(this,q)}toString(){return this.snapshot.toString()}}function ln(ht,q){const $=function(ht,q){const ve=new go([],{},{},"",{},Zt,q,null,ht.root,-1,{});return new xr("",new Bn(ve,[]))}(ht,q),Ct=new o.X([new ti("",{})]),At=new o.X({}),Kt=new o.X({}),ve=new o.X({}),xe=new o.X(""),fi=new Oo(Ct,At,ve,xe,Kt,Zt,q,$.root);return fi.snapshot=$.root,new qr(new Bn(fi,[]),$)}class Oo{constructor(q,$,Ct,At,Kt,ve,xe,fi){this.url=q,this.params=$,this.queryParams=Ct,this.fragment=At,this.data=Kt,this.outlet=ve,this.component=xe,this._futureSnapshot=fi}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(q=>ue(q)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(q=>ue(q)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ts(ht,q="emptyOnly"){const $=ht.pathFromRoot;let Ct=0;if("always"!==q)for(Ct=$.length-1;Ct>=1;){const At=$[Ct],Kt=$[Ct-1];if(At.routeConfig&&""===At.routeConfig.path)Ct--;else{if(Kt.component)break;Ct--}}return function(ht){return ht.reduce((q,$)=>({params:Object.assign(Object.assign({},q.params),$.params),data:Object.assign(Object.assign({},q.data),$.data),resolve:Object.assign(Object.assign({},q.resolve),$._resolvedData)}),{params:{},data:{},resolve:{}})}($.slice(Ct))}class go{constructor(q,$,Ct,At,Kt,ve,xe,fi,Zi,Fn,vn){this.url=q,this.params=$,this.queryParams=Ct,this.fragment=At,this.data=Kt,this.outlet=ve,this.component=xe,this.routeConfig=fi,this._urlSegment=Zi,this._lastPathIndex=Fn,this._resolve=vn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ue(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ue(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Ct=>Ct.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xr extends Or{constructor(q,$){super($),this.url=q,Jo(this,$)}toString(){return qn(this._root)}}function Jo(ht,q){q.value._routerState=ht,q.children.forEach($=>Jo(ht,$))}function qn(ht){const q=ht.children.length>0?` { ${ht.children.map(qn).join(", ")} } `:"";return`${ht.value}${q}`}function un(ht){if(ht.snapshot){const q=ht.snapshot,$=ht._futureSnapshot;ht.snapshot=$,li(q.queryParams,$.queryParams)||ht.queryParams.next($.queryParams),q.fragment!==$.fragment&&ht.fragment.next($.fragment),li(q.params,$.params)||ht.params.next($.params),function(ht,q){if(ht.length!==q.length)return!1;for(let $=0;$<ht.length;++$)if(!li(ht[$],q[$]))return!1;return!0}(q.url,$.url)||ht.url.next($.url),li(q.data,$.data)||ht.data.next($.data)}else ht.snapshot=ht._futureSnapshot,ht.data.next(ht._futureSnapshot.data)}function dr(ht,q){const $=li(ht.params,q.params)&&function(ht,q){return Hi(ht,q)&&ht.every(($,Ct)=>li($.parameters,q[Ct].parameters))}(ht.url,q.url);return $&&!(!ht.parent!=!q.parent)&&(!ht.parent||dr(ht.parent,q.parent))}function ao(ht,q,$){if($&&ht.shouldReuseRoute(q.value,$.value.snapshot)){const Ct=$.value;Ct._futureSnapshot=q.value;const At=function(ht,q,$){return q.children.map(Ct=>{for(const At of $.children)if(ht.shouldReuseRoute(Ct.value,At.value.snapshot))return ao(ht,Ct,At);return ao(ht,Ct)})}(ht,q,$);return new Bn(Ct,At)}{if(ht.shouldAttach(q.value)){const Kt=ht.retrieve(q.value);if(null!==Kt){const ve=Kt.route;return ve.value._futureSnapshot=q.value,ve.children=q.children.map(xe=>ao(ht,xe)),ve}}const Ct=function(ht){return new Oo(new o.X(ht.url),new o.X(ht.params),new o.X(ht.queryParams),new o.X(ht.fragment),new o.X(ht.data),ht.outlet,ht.component,ht)}(q.value),At=q.children.map(Kt=>ao(ht,Kt));return new Bn(Ct,At)}}function Uo(ht){return"object"==typeof ht&&null!=ht&&!ht.outlets&&!ht.segmentPath}function ho(ht){return"object"==typeof ht&&null!=ht&&ht.outlets}function $o(ht,q,$,Ct,At){let Kt={};return Ct&&bi(Ct,(ve,xe)=>{Kt[xe]=Array.isArray(ve)?ve.map(fi=>`${fi}`):`${ve}`}),new qt($.root===ht?q:sa($.root,ht,q),Kt,At)}function sa(ht,q,$){const Ct={};return bi(ht.children,(At,Kt)=>{Ct[Kt]=At===q?$:sa(At,q,$)}),new Ee(ht.segments,Ct)}class Lo{constructor(q,$,Ct){if(this.isAbsolute=q,this.numberOfDoubleDots=$,this.commands=Ct,q&&Ct.length>0&&Uo(Ct[0]))throw new Error("Root segment cannot have matrix parameters");const At=Ct.find(ho);if(At&&At!==Bi(Ct))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class oo{constructor(q,$,Ct){this.segmentGroup=q,this.processChildren=$,this.index=Ct}}function Gr(ht,q,$){if(ht||(ht=new Ee([],{})),0===ht.segments.length&&ht.hasChildren())return hs(ht,q,$);const Ct=function(ht,q,$){let Ct=0,At=q;const Kt={match:!1,pathIndex:0,commandIndex:0};for(;At<ht.segments.length;){if(Ct>=$.length)return Kt;const ve=ht.segments[At],xe=$[Ct];if(ho(xe))break;const fi=`${xe}`,Zi=Ct<$.length-1?$[Ct+1]:null;if(At>0&&void 0===fi)break;if(fi&&Zi&&"object"==typeof Zi&&void 0===Zi.outlets){if(!is(fi,Zi,ve))return Kt;Ct+=2}else{if(!is(fi,{},ve))return Kt;Ct++}At++}return{match:!0,pathIndex:At,commandIndex:Ct}}(ht,q,$),At=$.slice(Ct.commandIndex);if(Ct.match&&Ct.pathIndex<ht.segments.length){const Kt=new Ee(ht.segments.slice(0,Ct.pathIndex),{});return Kt.children[Zt]=new Ee(ht.segments.slice(Ct.pathIndex),ht.children),hs(Kt,0,At)}return Ct.match&&0===At.length?new Ee(ht.segments,{}):Ct.match&&!ht.hasChildren()?ds(ht,q,$):Ct.match?hs(ht,0,At):ds(ht,q,$)}function hs(ht,q,$){if(0===$.length)return new Ee(ht.segments,{});{const Ct=function(ht){return ho(ht[0])?ht[0].outlets:{[Zt]:ht}}($),At={};return bi(Ct,(Kt,ve)=>{"string"==typeof Kt&&(Kt=[Kt]),null!==Kt&&(At[ve]=Gr(ht.children[ve],q,Kt))}),bi(ht.children,(Kt,ve)=>{void 0===Ct[ve]&&(At[ve]=Kt)}),new Ee(ht.segments,At)}}function ds(ht,q,$){const Ct=ht.segments.slice(0,q);let At=0;for(;At<$.length;){const Kt=$[At];if(ho(Kt)){const fi=Ts(Kt.outlets);return new Ee(Ct,fi)}if(0===At&&Uo($[0])){Ct.push(new ti(ht.segments[q].path,Bs($[0]))),At++;continue}const ve=ho(Kt)?Kt.outlets[Zt]:`${Kt}`,xe=At<$.length-1?$[At+1]:null;ve&&xe&&Uo(xe)?(Ct.push(new ti(ve,Bs(xe))),At+=2):(Ct.push(new ti(ve,{})),At++)}return new Ee(Ct,{})}function Ts(ht){const q={};return bi(ht,($,Ct)=>{"string"==typeof $&&($=[$]),null!==$&&(q[Ct]=ds(new Ee([],{}),0,$))}),q}function Bs(ht){const q={};return bi(ht,($,Ct)=>q[Ct]=`${$}`),q}function is(ht,q,$){return ht==$.path&&li(q,$.parameters)}class $s{constructor(q,$,Ct,At){this.routeReuseStrategy=q,this.futureState=$,this.currState=Ct,this.forwardEvent=At}activate(q){const $=this.futureState._root,Ct=this.currState?this.currState._root:null;this.deactivateChildRoutes($,Ct,q),un(this.futureState.root),this.activateChildRoutes($,Ct,q)}deactivateChildRoutes(q,$,Ct){const At=Vo($);q.children.forEach(Kt=>{const ve=Kt.value.outlet;this.deactivateRoutes(Kt,At[ve],Ct),delete At[ve]}),bi(At,(Kt,ve)=>{this.deactivateRouteAndItsChildren(Kt,Ct)})}deactivateRoutes(q,$,Ct){const At=q.value,Kt=$?$.value:null;if(At===Kt)if(At.component){const ve=Ct.getContext(At.outlet);ve&&this.deactivateChildRoutes(q,$,ve.children)}else this.deactivateChildRoutes(q,$,Ct);else Kt&&this.deactivateRouteAndItsChildren($,Ct)}deactivateRouteAndItsChildren(q,$){q.value.component&&this.routeReuseStrategy.shouldDetach(q.value.snapshot)?this.detachAndStoreRouteSubtree(q,$):this.deactivateRouteAndOutlet(q,$)}detachAndStoreRouteSubtree(q,$){const Ct=$.getContext(q.value.outlet),At=Ct&&q.value.component?Ct.children:$,Kt=Vo(q);for(const ve of Object.keys(Kt))this.deactivateRouteAndItsChildren(Kt[ve],At);if(Ct&&Ct.outlet){const ve=Ct.outlet.detach(),xe=Ct.children.onOutletDeactivated();this.routeReuseStrategy.store(q.value.snapshot,{componentRef:ve,route:q,contexts:xe})}}deactivateRouteAndOutlet(q,$){const Ct=$.getContext(q.value.outlet),At=Ct&&q.value.component?Ct.children:$,Kt=Vo(q);for(const ve of Object.keys(Kt))this.deactivateRouteAndItsChildren(Kt[ve],At);Ct&&Ct.outlet&&(Ct.outlet.deactivate(),Ct.children.onOutletDeactivated(),Ct.attachRef=null,Ct.resolver=null,Ct.route=null)}activateChildRoutes(q,$,Ct){const At=Vo($);q.children.forEach(Kt=>{this.activateRoutes(Kt,At[Kt.value.outlet],Ct),this.forwardEvent(new Ut(Kt.value.snapshot))}),q.children.length&&this.forwardEvent(new vi(q.value.snapshot))}activateRoutes(q,$,Ct){const At=q.value,Kt=$?$.value:null;if(un(At),At===Kt)if(At.component){const ve=Ct.getOrCreateContext(At.outlet);this.activateChildRoutes(q,$,ve.children)}else this.activateChildRoutes(q,$,Ct);else if(At.component){const ve=Ct.getOrCreateContext(At.outlet);if(this.routeReuseStrategy.shouldAttach(At.snapshot)){const xe=this.routeReuseStrategy.retrieve(At.snapshot);this.routeReuseStrategy.store(At.snapshot,null),ve.children.onOutletReAttached(xe.contexts),ve.attachRef=xe.componentRef,ve.route=xe.route.value,ve.outlet&&ve.outlet.attach(xe.componentRef,xe.route.value),un(xe.route.value),this.activateChildRoutes(q,null,ve.children)}else{const xe=function(ht){for(let q=ht.parent;q;q=q.parent){const $=q.routeConfig;if($&&$._loadedConfig)return $._loadedConfig;if($&&$.component)return null}return null}(At.snapshot),fi=xe?xe.module.componentFactoryResolver:null;ve.attachRef=null,ve.route=At,ve.resolver=fi,ve.outlet&&ve.outlet.activateWith(At,fi),this.activateChildRoutes(q,null,ve.children)}}else this.activateChildRoutes(q,null,Ct)}}class Zo{constructor(q,$){this.routes=q,this.module=$}}function Un(ht){return"function"==typeof ht}function lr(ht){return ht instanceof qt}const yr=Symbol("INITIAL_VALUE");function Wr(){return(0,dt.w)(ht=>(0,s.a)(ht.map(q=>q.pipe((0,tt.q)(1),(0,nt.O)(yr)))).pipe(it((q,$)=>{let Ct=!1;return $.reduce((At,Kt,ve)=>At!==yr?At:(Kt===yr&&(Ct=!0),Ct||!1!==Kt&&ve!==$.length-1&&!lr(Kt)?At:Kt),q)},yr),(0,ot.h)(q=>q!==yr),(0,mt.U)(q=>lr(q)?q:!0===q),(0,tt.q)(1)))}class nr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Go,this.attachRef=null}}class Go{constructor(){this.contexts=new Map}onChildOutletCreated(q,$){const Ct=this.getOrCreateContext(q);Ct.outlet=$,this.contexts.set(q,Ct)}onChildOutletDestroyed(q){const $=this.getContext(q);$&&($.outlet=null,$.attachRef=null)}onOutletDeactivated(){const q=this.contexts;return this.contexts=new Map,q}onOutletReAttached(q){this.contexts=q}getOrCreateContext(q){let $=this.getContext(q);return $||($=new nr,this.contexts.set(q,$)),$}getContext(q){return this.contexts.get(q)||null}}let mo=(()=>{class ht{constructor($,Ct,At,Kt,ve){this.parentContexts=$,this.location=Ct,this.resolver=At,this.changeDetector=ve,this.activated=null,this._activatedRoute=null,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.name=Kt||Zt,$.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const $=this.parentContexts.getContext(this.name);$&&$.route&&($.attachRef?this.attach($.attachRef,$.route):this.activateWith($.route,$.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const $=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit($.instance),$}attach($,Ct){this.activated=$,this._activatedRoute=Ct,this.location.insert($.hostView),this.attachEvents.emit($.instance)}deactivate(){if(this.activated){const $=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit($)}}activateWith($,Ct){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=$;const ve=(Ct=Ct||this.resolver).resolveComponentFactory($._futureSnapshot.routeConfig.component),xe=this.parentContexts.getOrCreateContext(this.name).children,fi=new kr($,xe,this.location.injector);this.activated=this.location.createComponent(ve,this.location.length,fi),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return ht.\u0275fac=function($){return new($||ht)(y.Y36(Go),y.Y36(y.s_b),y.Y36(y._Vd),y.$8M("name"),y.Y36(y.sBO))},ht.\u0275dir=y.lG2({type:ht,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),ht})();class kr{constructor(q,$,Ct){this.route=q,this.childContexts=$,this.parent=Ct}get(q,$){return q===Oo?this.route:q===Go?this.childContexts:this.parent.get(q,$)}}let Jn=(()=>{class ht{}return ht.\u0275fac=function($){return new($||ht)},ht.\u0275cmp=y.Xpm({type:ht,selectors:[["ng-component"]],decls:1,vars:0,template:function($,Ct){1&$&&y._UZ(0,"router-outlet")},directives:[mo],encapsulation:2}),ht})();function fr(ht,q=""){for(let $=0;$<ht.length;$++){const Ct=ht[$];cr(Ct,Qs(q,Ct))}}function cr(ht,q){ht.children&&fr(ht.children,q)}function Qs(ht,q){return q?ht||q.path?ht&&!q.path?`${ht}/`:!ht&&q.path?q.path:`${ht}/${q.path}`:"":ht}function Cs(ht){const q=ht.children&&ht.children.map(Cs),$=q?Object.assign(Object.assign({},ht),{children:q}):Object.assign({},ht);return!$.component&&(q||$.loadChildren)&&$.outlet&&$.outlet!==Zt&&($.component=Jn),$}function Po(ht){return ht.outlet||Zt}function Ss(ht,q){const $=ht.filter(Ct=>Po(Ct)===q);return $.push(...ht.filter(Ct=>Po(Ct)!==q)),$}const Lr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Hs(ht,q,$){var Ct;if(""===q.path)return"full"===q.pathMatch&&(ht.hasChildren()||$.length>0)?Object.assign({},Lr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const Kt=(q.matcher||ke)($,ht,q);if(!Kt)return Object.assign({},Lr);const ve={};bi(Kt.posParams,(fi,Zi)=>{ve[Zi]=fi.path});const xe=Kt.consumed.length>0?Object.assign(Object.assign({},ve),Kt.consumed[Kt.consumed.length-1].parameters):ve;return{matched:!0,consumedSegments:Kt.consumed,lastChild:Kt.consumed.length,parameters:xe,positionalParamSegments:null!==(Ct=Kt.posParams)&&void 0!==Ct?Ct:{}}}function $n(ht,q,$,Ct,At="corrected"){if($.length>0&&function(ht,q,$){return $.some(Ct=>F(ht,q,Ct)&&Po(Ct)!==Zt)}(ht,$,Ct)){const ve=new Ee(q,function(ht,q,$,Ct){const At={};At[Zt]=Ct,Ct._sourceSegment=ht,Ct._segmentIndexShift=q.length;for(const Kt of $)if(""===Kt.path&&Po(Kt)!==Zt){const ve=new Ee([],{});ve._sourceSegment=ht,ve._segmentIndexShift=q.length,At[Po(Kt)]=ve}return At}(ht,q,Ct,new Ee($,ht.children)));return ve._sourceSegment=ht,ve._segmentIndexShift=q.length,{segmentGroup:ve,slicedSegments:[]}}if(0===$.length&&function(ht,q,$){return $.some(Ct=>F(ht,q,Ct))}(ht,$,Ct)){const ve=new Ee(ht.segments,function(ht,q,$,Ct,At,Kt){const ve={};for(const xe of Ct)if(F(ht,$,xe)&&!At[Po(xe)]){const fi=new Ee([],{});fi._sourceSegment=ht,fi._segmentIndexShift="legacy"===Kt?ht.segments.length:q.length,ve[Po(xe)]=fi}return Object.assign(Object.assign({},At),ve)}(ht,q,$,Ct,ht.children,At));return ve._sourceSegment=ht,ve._segmentIndexShift=q.length,{segmentGroup:ve,slicedSegments:$}}const Kt=new Ee(ht.segments,ht.children);return Kt._sourceSegment=ht,Kt._segmentIndexShift=q.length,{segmentGroup:Kt,slicedSegments:$}}function F(ht,q,$){return(!(ht.hasChildren()||q.length>0)||"full"!==$.pathMatch)&&""===$.path}function j(ht,q,$,Ct){return!!(Po(ht)===Ct||Ct!==Zt&&F(q,$,ht))&&("**"===ht.path||Hs(q,ht,$).matched)}function St(ht,q,$){return 0===q.length&&!ht.children[$]}class ge{constructor(q){this.segmentGroup=q||null}}class ni{constructor(q){this.urlTree=q}}function ki(ht){return new c.y(q=>q.error(new ge(ht)))}function cn(ht){return new c.y(q=>q.error(new ni(ht)))}function Yn(ht){return new c.y(q=>q.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${ht}'`)))}class yo{constructor(q,$,Ct,At,Kt){this.configLoader=$,this.urlSerializer=Ct,this.urlTree=At,this.config=Kt,this.allowRedirects=!0,this.ngModule=q.get(y.h0i)}apply(){const q=$n(this.urlTree.root,[],[],this.config).segmentGroup,$=new Ee(q.segments,q.children);return this.expandSegmentGroup(this.ngModule,this.config,$,Zt).pipe((0,mt.U)(Kt=>this.createUrlTree(Io(Kt),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,st.K)(Kt=>{if(Kt instanceof ni)return this.allowRedirects=!1,this.match(Kt.urlTree);throw Kt instanceof ge?this.noMatchError(Kt):Kt}))}match(q){return this.expandSegmentGroup(this.ngModule,this.config,q.root,Zt).pipe((0,mt.U)(At=>this.createUrlTree(Io(At),q.queryParams,q.fragment))).pipe((0,st.K)(At=>{throw At instanceof ge?this.noMatchError(At):At}))}noMatchError(q){return new Error(`Cannot match any routes. URL Segment: '${q.segmentGroup}'`)}createUrlTree(q,$,Ct){const At=q.segments.length>0?new Ee([],{[Zt]:q}):q;return new qt(At,$,Ct)}expandSegmentGroup(q,$,Ct,At){return 0===Ct.segments.length&&Ct.hasChildren()?this.expandChildren(q,$,Ct).pipe((0,mt.U)(Kt=>new Ee([],Kt))):this.expandSegment(q,Ct,$,Ct.segments,At,!0)}expandChildren(q,$,Ct){const At=[];for(const Kt of Object.keys(Ct.children))"primary"===Kt?At.unshift(Kt):At.push(Kt);return(0,t.D)(At).pipe((0,Gt.b)(Kt=>{const ve=Ct.children[Kt],xe=Ss($,Kt);return this.expandSegmentGroup(q,xe,ve,Kt).pipe((0,mt.U)(fi=>({segment:fi,outlet:Kt})))}),it((Kt,ve)=>(Kt[ve.outlet]=ve.segment,Kt),{}),function(ht,q){const $=arguments.length>=2;return Ct=>Ct.pipe(ht?(0,ot.h)((At,Kt)=>ht(At,Kt,Ct)):at.y,wt(1),$?lt(q):ct(()=>new e))}())}expandSegment(q,$,Ct,At,Kt,ve){return(0,t.D)(Ct).pipe((0,Gt.b)(xe=>this.expandSegmentAgainstRoute(q,$,Ct,xe,At,Kt,ve).pipe((0,st.K)(Zi=>{if(Zi instanceof ge)return(0,n.of)(null);throw Zi}))),Rt(xe=>!!xe),(0,st.K)((xe,fi)=>{if(xe instanceof e||"EmptyError"===xe.name){if(St($,At,Kt))return(0,n.of)(new Ee([],{}));throw new ge($)}throw xe}))}expandSegmentAgainstRoute(q,$,Ct,At,Kt,ve,xe){return j(At,$,Kt,ve)?void 0===At.redirectTo?this.matchSegmentAgainstRoute(q,$,At,Kt,ve):xe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(q,$,Ct,At,Kt,ve):ki($):ki($)}expandSegmentAgainstRouteUsingRedirect(q,$,Ct,At,Kt,ve){return"**"===At.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(q,Ct,At,ve):this.expandRegularSegmentAgainstRouteUsingRedirect(q,$,Ct,At,Kt,ve)}expandWildCardWithParamsAgainstRouteUsingRedirect(q,$,Ct,At){const Kt=this.applyRedirectCommands([],Ct.redirectTo,{});return Ct.redirectTo.startsWith("/")?cn(Kt):this.lineralizeSegments(Ct,Kt).pipe((0,It.z)(ve=>{const xe=new Ee(ve,{});return this.expandSegment(q,xe,$,ve,At,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(q,$,Ct,At,Kt,ve){const{matched:xe,consumedSegments:fi,lastChild:Zi,positionalParamSegments:Fn}=Hs($,At,Kt);if(!xe)return ki($);const vn=this.applyRedirectCommands(fi,At.redirectTo,Fn);return At.redirectTo.startsWith("/")?cn(vn):this.lineralizeSegments(At,vn).pipe((0,It.z)(ro=>this.expandSegment(q,$,Ct,ro.concat(Kt.slice(Zi)),ve,!1)))}matchSegmentAgainstRoute(q,$,Ct,At,Kt){if("**"===Ct.path)return Ct.loadChildren?(Ct._loadedConfig?(0,n.of)(Ct._loadedConfig):this.configLoader.load(q.injector,Ct)).pipe((0,mt.U)(ro=>(Ct._loadedConfig=ro,new Ee(At,{})))):(0,n.of)(new Ee(At,{}));const{matched:ve,consumedSegments:xe,lastChild:fi}=Hs($,Ct,At);if(!ve)return ki($);const Zi=At.slice(fi);return this.getChildConfig(q,Ct,At).pipe((0,It.z)(vn=>{const ro=vn.module,Eo=vn.routes,{segmentGroup:ja,slicedSegments:Ms}=$n($,xe,Zi,Eo),Dr=new Ee(ja.segments,ja.children);if(0===Ms.length&&Dr.hasChildren())return this.expandChildren(ro,Eo,Dr).pipe((0,mt.U)(Sr=>new Ee(xe,Sr)));if(0===Eo.length&&0===Ms.length)return(0,n.of)(new Ee(xe,{}));const Cr=Po(Ct)===Kt;return this.expandSegment(ro,Dr,Eo,Ms,Cr?Zt:Kt,!0).pipe((0,mt.U)(As=>new Ee(xe.concat(As.segments),As.children)))}))}getChildConfig(q,$,Ct){return $.children?(0,n.of)(new Zo($.children,q)):$.loadChildren?void 0!==$._loadedConfig?(0,n.of)($._loadedConfig):this.runCanLoadGuards(q.injector,$,Ct).pipe((0,It.z)(At=>{return At?this.configLoader.load(q.injector,$).pipe((0,mt.U)(Kt=>($._loadedConfig=Kt,Kt))):(ht=$,new c.y(q=>q.error(Mt(`Cannot load children because the guard of the route "path: '${ht.path}'" returned false`))));var ht})):(0,n.of)(new Zo([],q))}runCanLoadGuards(q,$,Ct){const At=$.canLoad;if(!At||0===At.length)return(0,n.of)(!0);const Kt=At.map(ve=>{const xe=q.get(ve);let fi;if((ht=xe)&&Un(ht.canLoad))fi=xe.canLoad($,Ct);else{if(!Un(xe))throw new Error("Invalid CanLoad guard");fi=xe($,Ct)}var ht;return yi(fi)});return(0,n.of)(Kt).pipe(Wr(),(0,Vt.b)(ve=>{if(!lr(ve))return;const xe=Mt(`Redirecting to "${this.urlSerializer.serialize(ve)}"`);throw xe.url=ve,xe}),(0,mt.U)(ve=>!0===ve))}lineralizeSegments(q,$){let Ct=[],At=$.root;for(;;){if(Ct=Ct.concat(At.segments),0===At.numberOfChildren)return(0,n.of)(Ct);if(At.numberOfChildren>1||!At.children[Zt])return Yn(q.redirectTo);At=At.children[Zt]}}applyRedirectCommands(q,$,Ct){return this.applyRedirectCreatreUrlTree($,this.urlSerializer.parse($),q,Ct)}applyRedirectCreatreUrlTree(q,$,Ct,At){const Kt=this.createSegmentGroup(q,$.root,Ct,At);return new qt(Kt,this.createQueryParams($.queryParams,this.urlTree.queryParams),$.fragment)}createQueryParams(q,$){const Ct={};return bi(q,(At,Kt)=>{if("string"==typeof At&&At.startsWith(":")){const xe=At.substring(1);Ct[Kt]=$[xe]}else Ct[Kt]=At}),Ct}createSegmentGroup(q,$,Ct,At){const Kt=this.createSegments(q,$.segments,Ct,At);let ve={};return bi($.children,(xe,fi)=>{ve[fi]=this.createSegmentGroup(q,xe,Ct,At)}),new Ee(Kt,ve)}createSegments(q,$,Ct,At){return $.map(Kt=>Kt.path.startsWith(":")?this.findPosParam(q,Kt,At):this.findOrReturn(Kt,Ct))}findPosParam(q,$,Ct){const At=Ct[$.path.substring(1)];if(!At)throw new Error(`Cannot redirect to '${q}'. Cannot find '${$.path}'.`);return At}findOrReturn(q,$){let Ct=0;for(const At of $){if(At.path===q.path)return $.splice(Ct),At;Ct++}return q}}function Io(ht){const q={};for(const Ct of Object.keys(ht.children)){const Kt=Io(ht.children[Ct]);(Kt.segments.length>0||Kt.hasChildren())&&(q[Ct]=Kt)}return function(ht){if(1===ht.numberOfChildren&&ht.children[Zt]){const q=ht.children[Zt];return new Ee(ht.segments.concat(q.segments),q.children)}return ht}(new Ee(ht.segments,q))}class fs{constructor(q){this.path=q,this.route=this.path[this.path.length-1]}}class ws{constructor(q,$){this.component=q,this.route=$}}function Rr(ht,q,$){const Ct=ht._root;return ba(Ct,q?q._root:null,$,[Ct.value])}function Er(ht,q,$){const Ct=function(ht){if(!ht)return null;for(let q=ht.parent;q;q=q.parent){const $=q.routeConfig;if($&&$._loadedConfig)return $._loadedConfig}return null}(q);return(Ct?Ct.module.injector:$).get(ht)}function ba(ht,q,$,Ct,At={canDeactivateChecks:[],canActivateChecks:[]}){const Kt=Vo(q);return ht.children.forEach(ve=>{(function(ht,q,$,Ct,At={canDeactivateChecks:[],canActivateChecks:[]}){const Kt=ht.value,ve=q?q.value:null,xe=$?$.getContext(ht.value.outlet):null;if(ve&&Kt.routeConfig===ve.routeConfig){const fi=function(ht,q,$){if("function"==typeof $)return $(ht,q);switch($){case"pathParamsChange":return!Hi(ht.url,q.url);case"pathParamsOrQueryParamsChange":return!Hi(ht.url,q.url)||!li(ht.queryParams,q.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dr(ht,q)||!li(ht.queryParams,q.queryParams);default:return!dr(ht,q)}}(ve,Kt,Kt.routeConfig.runGuardsAndResolvers);fi?At.canActivateChecks.push(new fs(Ct)):(Kt.data=ve.data,Kt._resolvedData=ve._resolvedData),ba(ht,q,Kt.component?xe?xe.children:null:$,Ct,At),fi&&xe&&xe.outlet&&xe.outlet.isActivated&&At.canDeactivateChecks.push(new ws(xe.outlet.component,ve))}else ve&&Bt(q,xe,At),At.canActivateChecks.push(new fs(Ct)),ba(ht,null,Kt.component?xe?xe.children:null:$,Ct,At)})(ve,Kt[ve.value.outlet],$,Ct.concat([ve.value]),At),delete Kt[ve.value.outlet]}),bi(Kt,(ve,xe)=>Bt(ve,$.getContext(xe),At)),At}function Bt(ht,q,$){const Ct=Vo(ht),At=ht.value;bi(Ct,(Kt,ve)=>{Bt(Kt,At.component?q?q.children.getContext(ve):null:q,$)}),$.canDeactivateChecks.push(new ws(At.component&&q&&q.outlet&&q.outlet.isActivated?q.outlet.component:null,At))}class Ei{}function Ni(ht){return new c.y(q=>q.error(ht))}class dn{constructor(q,$,Ct,At,Kt,ve){this.rootComponentType=q,this.config=$,this.urlTree=Ct,this.url=At,this.paramsInheritanceStrategy=Kt,this.relativeLinkResolution=ve}recognize(){const q=$n(this.urlTree.root,[],[],this.config.filter(ve=>void 0===ve.redirectTo),this.relativeLinkResolution).segmentGroup,$=this.processSegmentGroup(this.config,q,Zt);if(null===$)return null;const Ct=new go([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),At=new Bn(Ct,$),Kt=new xr(this.url,At);return this.inheritParamsAndData(Kt._root),Kt}inheritParamsAndData(q){const $=q.value,Ct=ts($,this.paramsInheritanceStrategy);$.params=Object.freeze(Ct.params),$.data=Object.freeze(Ct.data),q.children.forEach(At=>this.inheritParamsAndData(At))}processSegmentGroup(q,$,Ct){return 0===$.segments.length&&$.hasChildren()?this.processChildren(q,$):this.processSegment(q,$,$.segments,Ct)}processChildren(q,$){const Ct=[];for(const Kt of Object.keys($.children)){const ve=$.children[Kt],xe=Ss(q,Kt),fi=this.processSegmentGroup(xe,ve,Kt);if(null===fi)return null;Ct.push(...fi)}const At=Cn(Ct);return At.sort((q,$)=>q.value.outlet===Zt?-1:$.value.outlet===Zt?1:q.value.outlet.localeCompare($.value.outlet)),At}processSegment(q,$,Ct,At){for(const Kt of q){const ve=this.processSegmentAgainstRoute(Kt,$,Ct,At);if(null!==ve)return ve}return St($,Ct,At)?[]:null}processSegmentAgainstRoute(q,$,Ct,At){if(q.redirectTo||!j(q,$,Ct,At))return null;let Kt,ve=[],xe=[];if("**"===q.path){const Eo=Ct.length>0?Bi(Ct).parameters:{};Kt=new go(Ct,Eo,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Wo(q),Po(q),q.component,q,po($),or($)+Ct.length,jr(q))}else{const Eo=Hs($,q,Ct);if(!Eo.matched)return null;ve=Eo.consumedSegments,xe=Ct.slice(Eo.lastChild),Kt=new go(ve,Eo.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Wo(q),Po(q),q.component,q,po($),or($)+ve.length,jr(q))}const fi=(ht=q).children?ht.children:ht.loadChildren?ht._loadedConfig.routes:[],{segmentGroup:Zi,slicedSegments:Fn}=$n($,ve,xe,fi.filter(Eo=>void 0===Eo.redirectTo),this.relativeLinkResolution);var ht;if(0===Fn.length&&Zi.hasChildren()){const Eo=this.processChildren(fi,Zi);return null===Eo?null:[new Bn(Kt,Eo)]}if(0===fi.length&&0===Fn.length)return[new Bn(Kt,[])];const vn=Po(q)===At,ro=this.processSegment(fi,Zi,Fn,vn?Zt:At);return null===ro?null:[new Bn(Kt,ro)]}}function _n(ht){const q=ht.value.routeConfig;return q&&""===q.path&&void 0===q.redirectTo}function Cn(ht){const q=[],$=new Set;for(const Ct of ht){if(!_n(Ct)){q.push(Ct);continue}const At=q.find(Kt=>Ct.value.routeConfig===Kt.value.routeConfig);void 0!==At?(At.children.push(...Ct.children),$.add(At)):q.push(Ct)}for(const Ct of $){const At=Cn(Ct.children);q.push(new Bn(Ct.value,At))}return q.filter(Ct=>!$.has(Ct))}function po(ht){let q=ht;for(;q._sourceSegment;)q=q._sourceSegment;return q}function or(ht){let q=ht,$=q._segmentIndexShift?q._segmentIndexShift:0;for(;q._sourceSegment;)q=q._sourceSegment,$+=q._segmentIndexShift?q._segmentIndexShift:0;return $-1}function Wo(ht){return ht.data||{}}function jr(ht){return ht.resolve||{}}function Rs(ht){return(0,dt.w)(q=>{const $=ht(q);return $?(0,t.D)($).pipe((0,mt.U)(()=>q)):(0,n.of)(q)})}class ya extends class{shouldDetach(q){return!1}store(q,$){}shouldAttach(q){return!1}retrieve(q){return null}shouldReuseRoute(q,$){return q.routeConfig===$.routeConfig}}{}const Gs=new y.OlP("ROUTES");class ji{constructor(q,$,Ct,At){this.injector=q,this.compiler=$,this.onLoadStartListener=Ct,this.onLoadEndListener=At}load(q,$){if($._loader$)return $._loader$;this.onLoadStartListener&&this.onLoadStartListener($);const At=this.loadModuleFactory($.loadChildren).pipe((0,mt.U)(Kt=>{this.onLoadEndListener&&this.onLoadEndListener($);const ve=Kt.create(q);return new Zo(mi(ve.injector.get(Gs,void 0,y.XFs.Self|y.XFs.Optional)).map(Cs),ve)}),(0,st.K)(Kt=>{throw $._loader$=void 0,Kt}));return $._loader$=new H.c(At,()=>new V.x).pipe((0,Ie.x)()),$._loader$}loadModuleFactory(q){return yi(q()).pipe((0,It.z)($=>$ instanceof y.YKP?(0,n.of)($):(0,t.D)(this.compiler.compileModuleAsync($))))}}class nn{shouldProcessUrl(q){return!0}extract(q){return q}merge(q,$){return q}}function An(ht){throw ht}function On(ht,q,$){return q.parse("/")}function Pr(ht,q){return(0,n.of)(null)}const Xr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let kn=(()=>{class ht{constructor($,Ct,At,Kt,ve,xe,fi){this.rootComponentType=$,this.urlSerializer=Ct,this.rootContexts=At,this.location=Kt,this.config=fi,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new V.x,this.errorHandler=An,this.malformedUriErrorHandler=On,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Pr,afterPreactivation:Pr},this.urlHandlingStrategy=new nn,this.routeReuseStrategy=new ya,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ve.get(y.h0i),this.console=ve.get(y.c2e);const vn=ve.get(y.R0b);this.isNgZoneEnabled=vn instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(fi),this.currentUrlTree=new qt(new Ee([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ji(ve,xe,ro=>this.triggerEvent(new Xt(ro)),ro=>this.triggerEvent(new re(ro))),this.routerState=ln(this.currentUrlTree,this.rootComponentType),this.transitions=new o.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var $;return null===($=this.location.getState())||void 0===$?void 0:$.\u0275routerPageId}setupNavigations($){const Ct=this.events;return $.pipe((0,ot.h)(At=>0!==At.id),(0,mt.U)(At=>Object.assign(Object.assign({},At),{extractedUrl:this.urlHandlingStrategy.extract(At.rawUrl)})),(0,dt.w)(At=>{let Kt=!1,ve=!1;return(0,n.of)(At).pipe((0,Vt.b)(xe=>{this.currentNavigation={id:xe.id,initialUrl:xe.currentRawUrl,extractedUrl:xe.extractedUrl,trigger:xe.source,extras:xe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,dt.w)(xe=>{const fi=this.browserUrlTree.toString(),Zi=!this.navigated||xe.extractedUrl.toString()!==fi||fi!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Zi)&&this.urlHandlingStrategy.shouldProcessUrl(xe.rawUrl))return Tr(xe.source)&&(this.browserUrlTree=xe.extractedUrl),(0,n.of)(xe).pipe((0,dt.w)(vn=>{const ro=this.transitions.getValue();return Ct.next(new si(vn.id,this.serializeUrl(vn.extractedUrl),vn.source,vn.restoredState)),ro!==this.transitions.getValue()?O.E:Promise.resolve(vn)}),function(ht,q,$,Ct){return(0,dt.w)(At=>function(ht,q,$,Ct,At){return new yo(ht,q,$,Ct,At).apply()}(ht,q,$,At.extractedUrl,Ct).pipe((0,mt.U)(Kt=>Object.assign(Object.assign({},At),{urlAfterRedirects:Kt}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Vt.b)(vn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:vn.urlAfterRedirects})}),function(ht,q,$,Ct,At){return(0,It.z)(Kt=>function(ht,q,$,Ct,At="emptyOnly",Kt="legacy"){try{const ve=new dn(ht,q,$,Ct,At,Kt).recognize();return null===ve?Ni(new Ei):(0,n.of)(ve)}catch(ve){return Ni(ve)}}(ht,q,Kt.urlAfterRedirects,$(Kt.urlAfterRedirects),Ct,At).pipe((0,mt.U)(ve=>Object.assign(Object.assign({},Kt),{targetSnapshot:ve}))))}(this.rootComponentType,this.config,vn=>this.serializeUrl(vn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Vt.b)(vn=>{if("eager"===this.urlUpdateStrategy){if(!vn.extras.skipLocationChange){const Eo=this.urlHandlingStrategy.merge(vn.urlAfterRedirects,vn.rawUrl);this.setBrowserUrl(Eo,vn)}this.browserUrlTree=vn.urlAfterRedirects}const ro=new we(vn.id,this.serializeUrl(vn.extractedUrl),this.serializeUrl(vn.urlAfterRedirects),vn.targetSnapshot);Ct.next(ro)}));if(Zi&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ro,extractedUrl:Eo,source:ja,restoredState:Ms,extras:Dr}=xe,Cr=new si(ro,this.serializeUrl(Eo),ja,Ms);Ct.next(Cr);const za=ln(Eo,this.rootComponentType).snapshot;return(0,n.of)(Object.assign(Object.assign({},xe),{targetSnapshot:za,urlAfterRedirects:Eo,extras:Object.assign(Object.assign({},Dr),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=xe.rawUrl,xe.resolve(null),O.E}),Rs(xe=>{const{targetSnapshot:fi,id:Zi,extractedUrl:Fn,rawUrl:vn,extras:{skipLocationChange:ro,replaceUrl:Eo}}=xe;return this.hooks.beforePreactivation(fi,{navigationId:Zi,appliedUrlTree:Fn,rawUrlTree:vn,skipLocationChange:!!ro,replaceUrl:!!Eo})}),(0,Vt.b)(xe=>{const fi=new Ve(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot);this.triggerEvent(fi)}),(0,mt.U)(xe=>Object.assign(Object.assign({},xe),{guards:Rr(xe.targetSnapshot,xe.currentSnapshot,this.rootContexts)})),function(ht,q){return(0,It.z)($=>{const{targetSnapshot:Ct,currentSnapshot:At,guards:{canActivateChecks:Kt,canDeactivateChecks:ve}}=$;return 0===ve.length&&0===Kt.length?(0,n.of)(Object.assign(Object.assign({},$),{guardsResult:!0})):function(ht,q,$,Ct){return(0,t.D)(ht).pipe((0,It.z)(At=>function(ht,q,$,Ct,At){const Kt=q&&q.routeConfig?q.routeConfig.canDeactivate:null;if(!Kt||0===Kt.length)return(0,n.of)(!0);const ve=Kt.map(xe=>{const fi=Er(xe,q,At);let Zi;if(function(ht){return ht&&Un(ht.canDeactivate)}(fi))Zi=yi(fi.canDeactivate(ht,q,$,Ct));else{if(!Un(fi))throw new Error("Invalid CanDeactivate guard");Zi=yi(fi(ht,q,$,Ct))}return Zi.pipe(Rt())});return(0,n.of)(ve).pipe(Wr())}(At.component,At.route,$,q,Ct)),Rt(At=>!0!==At,!0))}(ve,Ct,At,ht).pipe((0,It.z)(xe=>xe&&function(ht){return"boolean"==typeof ht}(xe)?function(ht,q,$,Ct){return(0,t.D)(q).pipe((0,Gt.b)(At=>(0,v.z)(function(ht,q){return null!==ht&&q&&q(new Me(ht)),(0,n.of)(!0)}(At.route.parent,Ct),function(ht,q){return null!==ht&&q&&q(new ie(ht)),(0,n.of)(!0)}(At.route,Ct),function(ht,q,$){const Ct=q[q.length-1],Kt=q.slice(0,q.length-1).reverse().map(ve=>function(ht){const q=ht.routeConfig?ht.routeConfig.canActivateChild:null;return q&&0!==q.length?{node:ht,guards:q}:null}(ve)).filter(ve=>null!==ve).map(ve=>(0,R.P)(()=>{const xe=ve.guards.map(fi=>{const Zi=Er(fi,ve.node,$);let Fn;if(function(ht){return ht&&Un(ht.canActivateChild)}(Zi))Fn=yi(Zi.canActivateChild(Ct,ht));else{if(!Un(Zi))throw new Error("Invalid CanActivateChild guard");Fn=yi(Zi(Ct,ht))}return Fn.pipe(Rt())});return(0,n.of)(xe).pipe(Wr())}));return(0,n.of)(Kt).pipe(Wr())}(ht,At.path,$),function(ht,q,$){const Ct=q.routeConfig?q.routeConfig.canActivate:null;if(!Ct||0===Ct.length)return(0,n.of)(!0);const At=Ct.map(Kt=>(0,R.P)(()=>{const ve=Er(Kt,q,$);let xe;if(function(ht){return ht&&Un(ht.canActivate)}(ve))xe=yi(ve.canActivate(q,ht));else{if(!Un(ve))throw new Error("Invalid CanActivate guard");xe=yi(ve(q,ht))}return xe.pipe(Rt())}));return(0,n.of)(At).pipe(Wr())}(ht,At.route,$))),Rt(At=>!0!==At,!0))}(Ct,Kt,ht,q):(0,n.of)(xe)),(0,mt.U)(xe=>Object.assign(Object.assign({},$),{guardsResult:xe})))})}(this.ngModule.injector,xe=>this.triggerEvent(xe)),(0,Vt.b)(xe=>{if(lr(xe.guardsResult)){const Zi=Mt(`Redirecting to "${this.serializeUrl(xe.guardsResult)}"`);throw Zi.url=xe.guardsResult,Zi}const fi=new ui(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot,!!xe.guardsResult);this.triggerEvent(fi)}),(0,ot.h)(xe=>!!xe.guardsResult||(this.restoreHistory(xe),this.cancelNavigationTransition(xe,""),!1)),Rs(xe=>{if(xe.guards.canActivateChecks.length)return(0,n.of)(xe).pipe((0,Vt.b)(fi=>{const Zi=new Ke(fi.id,this.serializeUrl(fi.extractedUrl),this.serializeUrl(fi.urlAfterRedirects),fi.targetSnapshot);this.triggerEvent(Zi)}),(0,dt.w)(fi=>{let Zi=!1;return(0,n.of)(fi).pipe(function(ht,q){return(0,It.z)($=>{const{targetSnapshot:Ct,guards:{canActivateChecks:At}}=$;if(!At.length)return(0,n.of)($);let Kt=0;return(0,t.D)(At).pipe((0,Gt.b)(ve=>function(ht,q,$,Ct){return function(ht,q,$,Ct){const At=Object.keys(ht);if(0===At.length)return(0,n.of)({});const Kt={};return(0,t.D)(At).pipe((0,It.z)(ve=>function(ht,q,$,Ct){const At=Er(ht,q,Ct);return yi(At.resolve?At.resolve(q,$):At(q,$))}(ht[ve],q,$,Ct).pipe((0,Vt.b)(xe=>{Kt[ve]=xe}))),wt(1),(0,It.z)(()=>Object.keys(Kt).length===At.length?(0,n.of)(Kt):O.E))}(ht._resolve,ht,q,Ct).pipe((0,mt.U)(Kt=>(ht._resolvedData=Kt,ht.data=Object.assign(Object.assign({},ht.data),ts(ht,$).resolve),null)))}(ve.route,Ct,ht,q)),(0,Vt.b)(()=>Kt++),wt(1),(0,It.z)(ve=>Kt===At.length?(0,n.of)($):O.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Vt.b)({next:()=>Zi=!0,complete:()=>{Zi||(this.restoreHistory(fi),this.cancelNavigationTransition(fi,"At least one route resolver didn't emit any value."))}}))}),(0,Vt.b)(fi=>{const Zi=new be(fi.id,this.serializeUrl(fi.extractedUrl),this.serializeUrl(fi.urlAfterRedirects),fi.targetSnapshot);this.triggerEvent(Zi)}))}),Rs(xe=>{const{targetSnapshot:fi,id:Zi,extractedUrl:Fn,rawUrl:vn,extras:{skipLocationChange:ro,replaceUrl:Eo}}=xe;return this.hooks.afterPreactivation(fi,{navigationId:Zi,appliedUrlTree:Fn,rawUrlTree:vn,skipLocationChange:!!ro,replaceUrl:!!Eo})}),(0,mt.U)(xe=>{const fi=function(ht,q,$){const Ct=ao(ht,q._root,$?$._root:void 0);return new qr(Ct,q)}(this.routeReuseStrategy,xe.targetSnapshot,xe.currentRouterState);return Object.assign(Object.assign({},xe),{targetRouterState:fi})}),(0,Vt.b)(xe=>{this.currentUrlTree=xe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(xe.urlAfterRedirects,xe.rawUrl),this.routerState=xe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(xe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,xe),this.browserUrlTree=xe.urlAfterRedirects)}),((ht,q,$)=>(0,mt.U)(Ct=>(new $s(q,Ct.targetRouterState,Ct.currentRouterState,$).activate(ht),Ct)))(this.rootContexts,this.routeReuseStrategy,xe=>this.triggerEvent(xe)),(0,Vt.b)({next(){Kt=!0},complete(){Kt=!0}}),(0,Ze.x)(()=>{var xe;Kt||ve||this.cancelNavigationTransition(At,`Navigation ID ${At.id} is not equal to the current navigation id ${this.navigationId}`),(null===(xe=this.currentNavigation)||void 0===xe?void 0:xe.id)===At.id&&(this.currentNavigation=null)}),(0,st.K)(xe=>{if(ve=!0,function(ht){return ht&&ht[le]}(xe)){const fi=lr(xe.url);fi||(this.navigated=!0,this.restoreHistory(At,!0));const Zi=new Ne(At.id,this.serializeUrl(At.extractedUrl),xe.message);Ct.next(Zi),fi?setTimeout(()=>{const Fn=this.urlHandlingStrategy.merge(xe.url,this.rawUrlTree),vn={skipLocationChange:At.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Tr(At.source)};this.scheduleNavigation(Fn,"imperative",null,vn,{resolve:At.resolve,reject:At.reject,promise:At.promise})},0):At.resolve(!1)}else{this.restoreHistory(At,!0);const fi=new pe(At.id,this.serializeUrl(At.extractedUrl),xe);Ct.next(fi);try{At.resolve(this.errorHandler(xe))}catch(Zi){At.reject(Zi)}}return O.E}))}))}resetRootComponentType($){this.rootComponentType=$,this.routerState.root.component=this.rootComponentType}setTransition($){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),$))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe($=>{const Ct="popstate"===$.type?"popstate":"hashchange";"popstate"===Ct&&setTimeout(()=>{var At;const Kt={replaceUrl:!0},ve=(null===(At=$.state)||void 0===At?void 0:At.navigationId)?$.state:null;if(ve){const fi=Object.assign({},ve);delete fi.navigationId,delete fi.\u0275routerPageId,0!==Object.keys(fi).length&&(Kt.state=fi)}const xe=this.parseUrl($.url);this.scheduleNavigation(xe,Ct,ve,Kt)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent($){this.events.next($)}resetConfig($){fr($),this.config=$.map(Cs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree($,Ct={}){const{relativeTo:At,queryParams:Kt,fragment:ve,queryParamsHandling:xe,preserveFragment:fi}=Ct,Zi=At||this.routerState.root,Fn=fi?this.currentUrlTree.fragment:ve;let vn=null;switch(xe){case"merge":vn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),Kt);break;case"preserve":vn=this.currentUrlTree.queryParams;break;default:vn=Kt||null}return null!==vn&&(vn=this.removeEmptyProps(vn)),function(ht,q,$,Ct,At){if(0===$.length)return $o(q.root,q.root,q,Ct,At);const Kt=function(ht){if("string"==typeof ht[0]&&1===ht.length&&"/"===ht[0])return new Lo(!0,0,ht);let q=0,$=!1;const Ct=ht.reduce((At,Kt,ve)=>{if("object"==typeof Kt&&null!=Kt){if(Kt.outlets){const xe={};return bi(Kt.outlets,(fi,Zi)=>{xe[Zi]="string"==typeof fi?fi.split("/"):fi}),[...At,{outlets:xe}]}if(Kt.segmentPath)return[...At,Kt.segmentPath]}return"string"!=typeof Kt?[...At,Kt]:0===ve?(Kt.split("/").forEach((xe,fi)=>{0==fi&&"."===xe||(0==fi&&""===xe?$=!0:".."===xe?q++:""!=xe&&At.push(xe))}),At):[...At,Kt]},[]);return new Lo($,q,Ct)}($);if(Kt.toRoot())return $o(q.root,new Ee([],{}),q,Ct,At);const ve=function(ht,q,$){if(ht.isAbsolute)return new oo(q.root,!0,0);if(-1===$.snapshot._lastPathIndex){const Kt=$.snapshot._urlSegment;return new oo(Kt,Kt===q.root,0)}const Ct=Uo(ht.commands[0])?0:1;return function(ht,q,$){let Ct=ht,At=q,Kt=$;for(;Kt>At;){if(Kt-=At,Ct=Ct.parent,!Ct)throw new Error("Invalid number of '../'");At=Ct.segments.length}return new oo(Ct,!1,At-Kt)}($.snapshot._urlSegment,$.snapshot._lastPathIndex+Ct,ht.numberOfDoubleDots)}(Kt,q,ht),xe=ve.processChildren?hs(ve.segmentGroup,ve.index,Kt.commands):Gr(ve.segmentGroup,ve.index,Kt.commands);return $o(ve.segmentGroup,xe,q,Ct,At)}(Zi,this.currentUrlTree,$,vn,null!=Fn?Fn:null)}navigateByUrl($,Ct={skipLocationChange:!1}){const At=lr($)?$:this.parseUrl($),Kt=this.urlHandlingStrategy.merge(At,this.rawUrlTree);return this.scheduleNavigation(Kt,"imperative",null,Ct)}navigate($,Ct={skipLocationChange:!1}){return function(ht){for(let q=0;q<ht.length;q++){const $=ht[q];if(null==$)throw new Error(`The requested path contains ${$} segment at index ${q}`)}}($),this.navigateByUrl(this.createUrlTree($,Ct),Ct)}serializeUrl($){return this.urlSerializer.serialize($)}parseUrl($){let Ct;try{Ct=this.urlSerializer.parse($)}catch(At){Ct=this.malformedUriErrorHandler(At,this.urlSerializer,$)}return Ct}isActive($,Ct){let At;if(At=!0===Ct?Object.assign({},Xr):!1===Ct?Object.assign({},Fr):Ct,lr($))return Pe(this.currentUrlTree,$,At);const Kt=this.parseUrl($);return Pe(this.currentUrlTree,Kt,At)}removeEmptyProps($){return Object.keys($).reduce((Ct,At)=>{const Kt=$[At];return null!=Kt&&(Ct[At]=Kt),Ct},{})}processNavigations(){this.navigations.subscribe($=>{this.navigated=!0,this.lastSuccessfulId=$.id,this.currentPageId=$.targetPageId,this.events.next(new Qe($.id,this.serializeUrl($.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,$.resolve(!0)},$=>{this.console.warn(`Unhandled Navigation Error: ${$}`)})}scheduleNavigation($,Ct,At,Kt,ve){var xe,fi,Zi;if(this.disposed)return Promise.resolve(!1);const Fn=this.transitions.value,vn=Tr(Ct)&&Fn&&!Tr(Fn.source),ro=Fn.rawUrl.toString()===$.toString(),Eo=Fn.id===(null===(xe=this.currentNavigation)||void 0===xe?void 0:xe.id);if(vn&&ro&&Eo)return Promise.resolve(!0);let Ms,Dr,Cr;ve?(Ms=ve.resolve,Dr=ve.reject,Cr=ve.promise):Cr=new Promise((Sr,nl)=>{Ms=Sr,Dr=nl});const za=++this.navigationId;let As;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(At=this.location.getState()),As=At&&At.\u0275routerPageId?At.\u0275routerPageId:Kt.replaceUrl||Kt.skipLocationChange?null!==(fi=this.browserPageId)&&void 0!==fi?fi:0:(null!==(Zi=this.browserPageId)&&void 0!==Zi?Zi:0)+1):As=0,this.setTransition({id:za,targetPageId:As,source:Ct,restoredState:At,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:$,extras:Kt,resolve:Ms,reject:Dr,promise:Cr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Cr.catch(Sr=>Promise.reject(Sr))}setBrowserUrl($,Ct){const At=this.urlSerializer.serialize($),Kt=Object.assign(Object.assign({},Ct.extras.state),this.generateNgRouterState(Ct.id,Ct.targetPageId));this.location.isCurrentPathEqualTo(At)||Ct.extras.replaceUrl?this.location.replaceState(At,"",Kt):this.location.go(At,"",Kt)}restoreHistory($,Ct=!1){var At,Kt;if("computed"===this.canceledNavigationResolution){const ve=this.currentPageId-$.targetPageId;"popstate"!==$.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(At=this.currentNavigation)||void 0===At?void 0:At.finalUrl)||0===ve?this.currentUrlTree===(null===(Kt=this.currentNavigation)||void 0===Kt?void 0:Kt.finalUrl)&&0===ve&&(this.resetState($),this.browserUrlTree=$.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ve)}else"replace"===this.canceledNavigationResolution&&(Ct&&this.resetState($),this.resetUrlToCurrentUrlTree())}resetState($){this.routerState=$.currentRouterState,this.currentUrlTree=$.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,$.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition($,Ct){const At=new Ne($.id,this.serializeUrl($.extractedUrl),Ct);this.triggerEvent(At),$.resolve(!1)}generateNgRouterState($,Ct){return"computed"===this.canceledNavigationResolution?{navigationId:$,\u0275routerPageId:Ct}:{navigationId:$}}}return ht.\u0275fac=function($){y.$Z()},ht.\u0275prov=y.Yz7({token:ht,factory:ht.\u0275fac}),ht})();function Tr(ht){return"imperative"!==ht}let gs=(()=>{class ht{constructor($,Ct,At){this.router=$,this.route=Ct,this.locationStrategy=At,this.commands=null,this.href=null,this.onChanges=new V.x,this.subscription=$.events.subscribe(Kt=>{Kt instanceof Qe&&this.updateTargetUrlAndHref()})}set routerLink($){this.commands=null!=$?Array.isArray($)?$:[$]:null}ngOnChanges($){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick($,Ct,At,Kt,ve){if(0!==$||Ct||At||Kt||ve||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const xe={skipLocationChange:Qo(this.skipLocationChange),replaceUrl:Qo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,xe),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Qo(this.preserveFragment)})}}return ht.\u0275fac=function($){return new($||ht)(y.Y36(kn),y.Y36(Oo),y.Y36(Be.S$))},ht.\u0275dir=y.lG2({type:ht,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function($,Ct){1&$&&y.NdJ("click",function(Kt){return Ct.onClick(Kt.button,Kt.ctrlKey,Kt.shiftKey,Kt.altKey,Kt.metaKey)}),2&$&&y.uIk("target",Ct.target)("href",Ct.href,y.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[y.TTD]}),ht})();function Qo(ht){return""===ht||!!ht}class qa{}class aa{preload(q,$){return(0,n.of)(null)}}let Ra=(()=>{class ht{constructor($,Ct,At,Kt){this.router=$,this.injector=At,this.preloadingStrategy=Kt,this.loader=new ji(At,Ct,fi=>$.triggerEvent(new Xt(fi)),fi=>$.triggerEvent(new re(fi)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,ot.h)($=>$ instanceof Qe),(0,Gt.b)(()=>this.preload())).subscribe(()=>{})}preload(){const $=this.injector.get(y.h0i);return this.processRoutes($,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes($,Ct){const At=[];for(const Kt of Ct)if(Kt.loadChildren&&!Kt.canLoad&&Kt._loadedConfig){const ve=Kt._loadedConfig;At.push(this.processRoutes(ve.module,ve.routes))}else Kt.loadChildren&&!Kt.canLoad?At.push(this.preloadConfig($,Kt)):Kt.children&&At.push(this.processRoutes($,Kt.children));return(0,t.D)(At).pipe((0,me.J)(),(0,mt.U)(Kt=>{}))}preloadConfig($,Ct){return this.preloadingStrategy.preload(Ct,()=>(Ct._loadedConfig?(0,n.of)(Ct._loadedConfig):this.loader.load($.injector,Ct)).pipe((0,It.z)(Kt=>(Ct._loadedConfig=Kt,this.processRoutes(Kt.module,Kt.routes)))))}}return ht.\u0275fac=function($){return new($||ht)(y.LFG(kn),y.LFG(y.Sil),y.LFG(y.zs3),y.LFG(qa))},ht.\u0275prov=y.Yz7({token:ht,factory:ht.\u0275fac}),ht})(),tl=(()=>{class ht{constructor($,Ct,At={}){this.router=$,this.viewportScroller=Ct,this.options=At,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},At.scrollPositionRestoration=At.scrollPositionRestoration||"disabled",At.anchorScrolling=At.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe($=>{$ instanceof si?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=$.navigationTrigger,this.restoredId=$.restoredState?$.restoredState.navigationId:0):$ instanceof Qe&&(this.lastId=$.id,this.scheduleScrollEvent($,this.router.parseUrl($.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe($=>{$ instanceof Ht&&($.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition($.position):$.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor($.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent($,Ct){this.router.triggerEvent(new Ht($,"popstate"===this.lastSource?this.store[this.restoredId]:null,Ct))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return ht.\u0275fac=function($){y.$Z()},ht.\u0275prov=y.Yz7({token:ht,factory:ht.\u0275fac}),ht})();const Is=new y.OlP("ROUTER_CONFIGURATION"),ml=new y.OlP("ROUTER_FORROOT_GUARD"),uc=[Be.Ye,{provide:Ln,useClass:Xe},{provide:kn,useFactory:function(ht,q,$,Ct,At,Kt,ve={},xe,fi){const Zi=new kn(null,ht,q,$,Ct,At,mi(Kt));return xe&&(Zi.urlHandlingStrategy=xe),fi&&(Zi.routeReuseStrategy=fi),function(ht,q){ht.errorHandler&&(q.errorHandler=ht.errorHandler),ht.malformedUriErrorHandler&&(q.malformedUriErrorHandler=ht.malformedUriErrorHandler),ht.onSameUrlNavigation&&(q.onSameUrlNavigation=ht.onSameUrlNavigation),ht.paramsInheritanceStrategy&&(q.paramsInheritanceStrategy=ht.paramsInheritanceStrategy),ht.relativeLinkResolution&&(q.relativeLinkResolution=ht.relativeLinkResolution),ht.urlUpdateStrategy&&(q.urlUpdateStrategy=ht.urlUpdateStrategy),ht.canceledNavigationResolution&&(q.canceledNavigationResolution=ht.canceledNavigationResolution)}(ve,Zi),ve.enableTracing&&Zi.events.subscribe(Fn=>{var vn,ro;null===(vn=console.group)||void 0===vn||vn.call(console,`Router Event: ${Fn.constructor.name}`),console.log(Fn.toString()),console.log(Fn),null===(ro=console.groupEnd)||void 0===ro||ro.call(console)}),Zi},deps:[Ln,Go,Be.Ye,y.zs3,y.Sil,Gs,Is,[class{},new y.FiY],[class{},new y.FiY]]},Go,{provide:Oo,useFactory:function(ht){return ht.routerState.root},deps:[kn]},Ra,aa,class{preload(q,$){return $().pipe((0,st.K)(()=>(0,n.of)(null)))}},{provide:Is,useValue:{enableTracing:!1}}];function js(){return new y.PXZ("Router",kn)}let la=(()=>{class ht{constructor($,Ct){}static forRoot($,Ct){return{ngModule:ht,providers:[uc,Wa($),{provide:ml,useFactory:rs,deps:[[kn,new y.FiY,new y.tp0]]},{provide:Is,useValue:Ct||{}},{provide:Be.S$,useFactory:il,deps:[Be.lw,[new y.tBr(Be.mr),new y.FiY],Is]},{provide:tl,useFactory:Da,deps:[kn,Be.EM,Is]},{provide:qa,useExisting:Ct&&Ct.preloadingStrategy?Ct.preloadingStrategy:aa},{provide:y.PXZ,multi:!0,useFactory:js},[ss,{provide:y.ip1,multi:!0,useFactory:ua,deps:[ss]},{provide:Ma,useFactory:_l,deps:[ss]},{provide:y.tb,multi:!0,useExisting:Ma}]]}}static forChild($){return{ngModule:ht,providers:[Wa($)]}}}return ht.\u0275fac=function($){return new($||ht)(y.LFG(ml,8),y.LFG(kn,8))},ht.\u0275mod=y.oAB({type:ht}),ht.\u0275inj=y.cJS({}),ht})();function Da(ht,q,$){return $.scrollOffset&&q.setOffset($.scrollOffset),new tl(ht,q,$)}function il(ht,q,$={}){return $.useHash?new Be.Do(ht,q):new Be.b0(ht,q)}function rs(ht){return"guarded"}function Wa(ht){return[{provide:y.deG,multi:!0,useValue:ht},{provide:Gs,multi:!0,useValue:ht}]}let ss=(()=>{class ht{constructor($){this.injector=$,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new V.x}appInitializer(){return this.injector.get(Be.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let Ct=null;const At=new Promise(xe=>Ct=xe),Kt=this.injector.get(kn),ve=this.injector.get(Is);return"disabled"===ve.initialNavigation?(Kt.setUpLocationChangeListener(),Ct(!0)):"enabled"===ve.initialNavigation||"enabledBlocking"===ve.initialNavigation?(Kt.hooks.afterPreactivation=()=>this.initNavigation?(0,n.of)(null):(this.initNavigation=!0,Ct(!0),this.resultOfPreactivationDone),Kt.initialNavigation()):Ct(!0),At})}bootstrapListener($){const Ct=this.injector.get(Is),At=this.injector.get(Ra),Kt=this.injector.get(tl),ve=this.injector.get(kn),xe=this.injector.get(y.z2F);$===xe.components[0]&&(("enabledNonBlocking"===Ct.initialNavigation||void 0===Ct.initialNavigation)&&ve.initialNavigation(),At.setUpPreloading(),Kt.init(),ve.resetRootComponentType(xe.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return ht.\u0275fac=function($){return new($||ht)(y.LFG(y.zs3))},ht.\u0275prov=y.Yz7({token:ht,factory:ht.\u0275fac}),ht})();function ua(ht){return ht.appInitializer.bind(ht)}function _l(ht){return ht.bootstrapListener.bind(ht)}const Ma=new y.OlP("Router Initializer")},15861:(L,W,m)=>{"use strict";function y(e,t,n,o,s,c,v){try{var R=e[c](v),O=R.value}catch(H){return void n(H)}R.done?t(O):Promise.resolve(O).then(o,s)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(o,s){var c=e.apply(t,n);function v(O){y(c,o,s,v,R,"next",O)}function R(O){y(c,o,s,v,R,"throw",O)}v(void 0)})}}m.d(W,{Z:()=>p})}},L=>{L(L.s=8431)}]);