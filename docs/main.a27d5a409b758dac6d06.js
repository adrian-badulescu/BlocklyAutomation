var Cge=Object.defineProperty,Ege=Object.defineProperties,Tge=Object.getOwnPropertyDescriptors,VU=Object.getOwnPropertySymbols,wge=Object.prototype.hasOwnProperty,Sge=Object.prototype.propertyIsEnumerable,fR=(S,A,_)=>A in S?Cge(S,A,{enumerable:!0,configurable:!0,writable:!0,value:_}):S[A]=_,gR=(S,A)=>{for(var _ in A||(A={}))wge.call(A,_)&&fR(S,_,A[_]);if(VU)for(var _ of VU(A))Sge.call(A,_)&&fR(S,_,A[_]);return S},mR=(S,A)=>Ege(S,Tge(A)),Aa=(S,A,_)=>(fR(S,"symbol"!=typeof A?A+"":A,_),_);(self.webpackChunkauto_blockly_app=self.webpackChunkauto_blockly_app||[]).push([[179],{98255:S=>{function A(_){return Promise.resolve().then(()=>{var E=new Error("Cannot find module '"+_+"'");throw E.code="MODULE_NOT_FOUND",E})}A.keys=()=>[],A.resolve=A,A.id=98255,S.exports=A},38506:S=>{function A(E,R,a,o,c,d,f){try{var v=E[d](f),y=v.value}catch(D){return void a(D)}v.done?R(y):Promise.resolve(y).then(o,c)}S.exports=function(E){return function(){var R=this,a=arguments;return new Promise(function(o,c){var d=E.apply(R,a);function f(y){A(d,o,c,f,v,"next",y)}function v(y){A(d,o,c,f,v,"throw",y)}f(void 0)})}},S.exports.default=S.exports,S.exports.__esModule=!0},89926:(S,A,_)=>{S.exports=_(96353)},87048:(S,A,_)=>{S.exports=_(85671)},20272:(S,A,_)=>{S.exports=_(60580)},26775:(S,A,_)=>{S.exports=_(26271)},78804:(S,A,_)=>{S.exports=_(82237)},11761:(S,A,_)=>{S.exports=_(26944)},64770:(S,A,_)=>{S.exports=_(3245)},71049:(S,A,_)=>{S.exports=_(34123)},3498:(S,A,_)=>{S.exports=_(43264)},38330:(S,A,_)=>{S.exports=_(75991)},23289:(S,A,_)=>{S.exports=_(65155)},53130:(S,A,_)=>{S.exports=_(80301)},45107:(S,A,_)=>{S.exports=_(81145)},45635:(S,A,_)=>{S.exports=_(158)},96916:(S,A,_)=>{S.exports=_(27620)},58258:(S,A,_)=>{S.exports=_(37254)},14569:(S,A,_)=>{S.exports=_(30770)},97326:(S,A,_)=>{S.exports=_(96883)},57124:(S,A,_)=>{S.exports=_(21244)},57272:(S,A,_)=>{S.exports=_(81548)},66360:(S,A,_)=>{S.exports=_(30206)},71094:(S,A,_)=>{S.exports=_(73915)},93165:(S,A,_)=>{S.exports=_(91391)},19898:(S,A,_)=>{S.exports=_(16557)},84916:(S,A,_)=>{S.exports=_(11944)},31946:(S,A,_)=>{S.exports=_(63780)},18753:(S,A,_)=>{S.exports=_(65332)},90343:(S,A,_)=>{S.exports=_(66203)},12988:(S,A,_)=>{S.exports=_(98836)},23005:(S,A,_)=>{S.exports=_(89857)},26394:(S,A,_)=>{S.exports=_(42658)},93449:(S,A,_)=>{S.exports=_(93585)},3599:(S,A,_)=>{S.exports=_(9207)},39126:(S,A,_)=>{S.exports=_(32518)},2805:(S,A,_)=>{"use strict";_.r(A),_.d(A,{__extends:()=>R,__assign:()=>a,__rest:()=>o,__decorate:()=>c,__param:()=>d,__metadata:()=>f,__awaiter:()=>v,__generator:()=>y,__createBinding:()=>D,__exportStar:()=>O,__values:()=>U,__read:()=>X,__spread:()=>H,__spreadArrays:()=>ne,__spreadArray:()=>ee,__await:()=>J,__asyncGenerator:()=>ue,__asyncDelegator:()=>se,__asyncValues:()=>_e,__makeTemplateObject:()=>re,__importStar:()=>ie,__importDefault:()=>Z,__classPrivateFieldGet:()=>G,__classPrivateFieldSet:()=>fe});var E=function(Q,j){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,de){oe.__proto__=de}||function(oe,de){for(var ye in de)Object.prototype.hasOwnProperty.call(de,ye)&&(oe[ye]=de[ye])})(Q,j)};function R(Q,j){if("function"!=typeof j&&null!==j)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function oe(){this.constructor=Q}E(Q,j),Q.prototype=null===j?Object.create(j):(oe.prototype=j.prototype,new oe)}var a=function(){return(a=Object.assign||function(j){for(var oe,de=1,ye=arguments.length;de<ye;de++)for(var ce in oe=arguments[de])Object.prototype.hasOwnProperty.call(oe,ce)&&(j[ce]=oe[ce]);return j}).apply(this,arguments)};function o(Q,j){var oe={};for(var de in Q)Object.prototype.hasOwnProperty.call(Q,de)&&j.indexOf(de)<0&&(oe[de]=Q[de]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var ye=0;for(de=Object.getOwnPropertySymbols(Q);ye<de.length;ye++)j.indexOf(de[ye])<0&&Object.prototype.propertyIsEnumerable.call(Q,de[ye])&&(oe[de[ye]]=Q[de[ye]])}return oe}function c(Q,j,oe,de){var Ce,ye=arguments.length,ce=ye<3?j:null===de?de=Object.getOwnPropertyDescriptor(j,oe):de;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ce=Reflect.decorate(Q,j,oe,de);else for(var Be=Q.length-1;Be>=0;Be--)(Ce=Q[Be])&&(ce=(ye<3?Ce(ce):ye>3?Ce(j,oe,ce):Ce(j,oe))||ce);return ye>3&&ce&&Object.defineProperty(j,oe,ce),ce}function d(Q,j){return function(oe,de){j(oe,de,Q)}}function f(Q,j){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(Q,j)}function v(Q,j,oe,de){return new(oe||(oe=Promise))(function(ce,Ce){function Be(Ue){try{De(de.next(Ue))}catch(Xe){Ce(Xe)}}function ot(Ue){try{De(de.throw(Ue))}catch(Xe){Ce(Xe)}}function De(Ue){Ue.done?ce(Ue.value):function(ce){return ce instanceof oe?ce:new oe(function(Ce){Ce(ce)})}(Ue.value).then(Be,ot)}De((de=de.apply(Q,j||[])).next())})}function y(Q,j){var de,ye,ce,Ce,oe={label:0,sent:function(){if(1&ce[0])throw ce[1];return ce[1]},trys:[],ops:[]};return Ce={next:Be(0),throw:Be(1),return:Be(2)},"function"==typeof Symbol&&(Ce[Symbol.iterator]=function(){return this}),Ce;function Be(De){return function(Ue){return function(De){if(de)throw new TypeError("Generator is already executing.");for(;oe;)try{if(de=1,ye&&(ce=2&De[0]?ye.return:De[0]?ye.throw||((ce=ye.return)&&ce.call(ye),0):ye.next)&&!(ce=ce.call(ye,De[1])).done)return ce;switch(ye=0,ce&&(De=[2&De[0],ce.value]),De[0]){case 0:case 1:ce=De;break;case 4:return oe.label++,{value:De[1],done:!1};case 5:oe.label++,ye=De[1],De=[0];continue;case 7:De=oe.ops.pop(),oe.trys.pop();continue;default:if(!(ce=(ce=oe.trys).length>0&&ce[ce.length-1])&&(6===De[0]||2===De[0])){oe=0;continue}if(3===De[0]&&(!ce||De[1]>ce[0]&&De[1]<ce[3])){oe.label=De[1];break}if(6===De[0]&&oe.label<ce[1]){oe.label=ce[1],ce=De;break}if(ce&&oe.label<ce[2]){oe.label=ce[2],oe.ops.push(De);break}ce[2]&&oe.ops.pop(),oe.trys.pop();continue}De=j.call(Q,oe)}catch(Ue){De=[6,Ue],ye=0}finally{de=ce=0}if(5&De[0])throw De[1];return{value:De[0]?De[1]:void 0,done:!0}}([De,Ue])}}}var D=Object.create?function(Q,j,oe,de){void 0===de&&(de=oe),Object.defineProperty(Q,de,{enumerable:!0,get:function(){return j[oe]}})}:function(Q,j,oe,de){void 0===de&&(de=oe),Q[de]=j[oe]};function O(Q,j){for(var oe in Q)"default"!==oe&&!Object.prototype.hasOwnProperty.call(j,oe)&&D(j,Q,oe)}function U(Q){var j="function"==typeof Symbol&&Symbol.iterator,oe=j&&Q[j],de=0;if(oe)return oe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&de>=Q.length&&(Q=void 0),{value:Q&&Q[de++],done:!Q}}};throw new TypeError(j?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(Q,j){var oe="function"==typeof Symbol&&Q[Symbol.iterator];if(!oe)return Q;var ye,Ce,de=oe.call(Q),ce=[];try{for(;(void 0===j||j-- >0)&&!(ye=de.next()).done;)ce.push(ye.value)}catch(Be){Ce={error:Be}}finally{try{ye&&!ye.done&&(oe=de.return)&&oe.call(de)}finally{if(Ce)throw Ce.error}}return ce}function H(){for(var Q=[],j=0;j<arguments.length;j++)Q=Q.concat(X(arguments[j]));return Q}function ne(){for(var Q=0,j=0,oe=arguments.length;j<oe;j++)Q+=arguments[j].length;var de=Array(Q),ye=0;for(j=0;j<oe;j++)for(var ce=arguments[j],Ce=0,Be=ce.length;Ce<Be;Ce++,ye++)de[ye]=ce[Ce];return de}function ee(Q,j,oe){if(oe||2===arguments.length)for(var ce,de=0,ye=j.length;de<ye;de++)(ce||!(de in j))&&(ce||(ce=Array.prototype.slice.call(j,0,de)),ce[de]=j[de]);return Q.concat(ce||j)}function J(Q){return this instanceof J?(this.v=Q,this):new J(Q)}function ue(Q,j,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,de=oe.apply(Q,j||[]),ce=[];return ye={},Ce("next"),Ce("throw"),Ce("return"),ye[Symbol.asyncIterator]=function(){return this},ye;function Ce(at){de[at]&&(ye[at]=function(ut){return new Promise(function(Qe,Ft){ce.push([at,ut,Qe,Ft])>1||Be(at,ut)})})}function Be(at,ut){try{!function(at){at.value instanceof J?Promise.resolve(at.value.v).then(De,Ue):Xe(ce[0][2],at)}(de[at](ut))}catch(Qe){Xe(ce[0][3],Qe)}}function De(at){Be("next",at)}function Ue(at){Be("throw",at)}function Xe(at,ut){at(ut),ce.shift(),ce.length&&Be(ce[0][0],ce[0][1])}}function se(Q){var j,oe;return j={},de("next"),de("throw",function(ye){throw ye}),de("return"),j[Symbol.iterator]=function(){return this},j;function de(ye,ce){j[ye]=Q[ye]?function(Ce){return(oe=!oe)?{value:J(Q[ye](Ce)),done:"return"===ye}:ce?ce(Ce):Ce}:ce}}function _e(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,j=Q[Symbol.asyncIterator];return j?j.call(Q):(Q=U(Q),oe={},de("next"),de("throw"),de("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function de(ce){oe[ce]=Q[ce]&&function(Ce){return new Promise(function(Be,ot){!function(ce,Ce,Be,ot){Promise.resolve(ot).then(function(De){ce({value:De,done:Be})},Ce)}(Be,ot,(Ce=Q[ce](Ce)).done,Ce.value)})}}}function re(Q,j){return Object.defineProperty?Object.defineProperty(Q,"raw",{value:j}):Q.raw=j,Q}var q=Object.create?function(Q,j){Object.defineProperty(Q,"default",{enumerable:!0,value:j})}:function(Q,j){Q.default=j};function ie(Q){if(Q&&Q.__esModule)return Q;var j={};if(null!=Q)for(var oe in Q)"default"!==oe&&Object.prototype.hasOwnProperty.call(Q,oe)&&D(j,Q,oe);return q(j,Q),j}function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}function G(Q,j,oe,de){if("a"===oe&&!de)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof j?Q!==j||!de:!j.has(Q))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===oe?de:"a"===oe?de.call(Q):de?de.value:j.get(Q)}function fe(Q,j,oe,de,ye){if("m"===de)throw new TypeError("Private method is not writable");if("a"===de&&!ye)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof j?Q!==j||!ye:!j.has(Q))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===de?ye.call(Q,oe):ye?ye.value=oe:j.set(Q,oe),oe}},72749:function(S,A,_){var E,R,a;R=[_(99240)],void 0!==(a="function"==typeof(E=function(o){"use strict";return o})?E.apply(A,R):E)&&(S.exports=a)},99240:function(S,A){var _,R;void 0!==(R="function"==typeof(_=function(){"use strict";var a={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return a.CONNECTING_SNAP_RADIUS=a.SNAP_RADIUS,a.CURRENT_CONNECTION_PREFERENCE=8,a.BUMP_DELAY=250,a.BUMP_RANDOMNESS=10,a.COLLAPSE_CHARS=30,a.LONGPRESS=750,a.SOUND_LIMIT=100,a.DRAG_STACK=!0,a.HSV_SATURATION=.45,a.HSV_VALUE=.65,a.SPRITE={width:96,height:124,url:"sprites.png"},a.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},a.DRAG_NONE=0,a.DRAG_STICKY=1,a.DRAG_BEGIN=1,a.DRAG_FREE=2,a.OPPOSITE_TYPE=[],a.OPPOSITE_TYPE[a.connectionTypes.INPUT_VALUE]=a.connectionTypes.OUTPUT_VALUE,a.OPPOSITE_TYPE[a.connectionTypes.OUTPUT_VALUE]=a.connectionTypes.INPUT_VALUE,a.OPPOSITE_TYPE[a.connectionTypes.NEXT_STATEMENT]=a.connectionTypes.PREVIOUS_STATEMENT,a.OPPOSITE_TYPE[a.connectionTypes.PREVIOUS_STATEMENT]=a.connectionTypes.NEXT_STATEMENT,a.VARIABLE_CATEGORY_NAME="VARIABLE",a.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",a.PROCEDURE_CATEGORY_NAME="PROCEDURE",a.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",a.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",a.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",a.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",a.utils={},a.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),a.Msg={},a.utils.global.Blockly||(a.utils.global.Blockly={}),a.utils.global.Blockly.Msg||(a.utils.global.Blockly.Msg=a.Msg),a.utils.colour={},a.utils.colour.parse=function(o){o=String(o).toLowerCase().trim();var c=a.utils.colour.names[o];if(c||(c="0x"==o.substring(0,2)?"#"+o.substring(2):o,/^#[0-9a-f]{6}$/.test(c="#"==c[0]?c:"#"+c)))return c;if(/^#[0-9a-f]{3}$/.test(c))return["#",c[1],c[1],c[2],c[2],c[3],c[3]].join("");var d=o.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return d&&(o=Number(d[1]),c=Number(d[2]),d=Number(d[3]),0<=o&&256>o&&0<=c&&256>c&&0<=d&&256>d)?a.utils.colour.rgbToHex(o,c,d):null},a.utils.colour.rgbToHex=function(o,c,d){return c=o<<16|c<<8|d,16>o?"#"+(16777216|c).toString(16).substr(1):"#"+c.toString(16)},a.utils.colour.hexToRgb=function(o){return(o=a.utils.colour.parse(o))?[(o=parseInt(o.substr(1),16))>>16,o>>8&255,255&o]:[0,0,0]},a.utils.colour.hsvToHex=function(o,c,d){var f=0,v=0,y=0;if(0==c)y=v=f=d;else{var D=Math.floor(o/60),O=o/60-D;o=d*(1-c);var U=d*(1-c*O);switch(c=d*(1-c*(1-O)),D){case 1:f=U,v=d,y=o;break;case 2:f=o,v=d,y=c;break;case 3:f=o,v=U,y=d;break;case 4:f=c,v=o,y=d;break;case 5:f=d,v=o,y=U;break;case 6:case 0:f=d,v=c,y=o}}return a.utils.colour.rgbToHex(Math.floor(f),Math.floor(v),Math.floor(y))},a.utils.colour.blend=function(o,c,d){return(o=a.utils.colour.parse(o))&&(c=a.utils.colour.parse(c))?(o=a.utils.colour.hexToRgb(o),c=a.utils.colour.hexToRgb(c),a.utils.colour.rgbToHex(Math.round(c[0]+d*(o[0]-c[0])),Math.round(c[1]+d*(o[1]-c[1])),Math.round(c[2]+d*(o[2]-c[2])))):null},a.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},a.utils.Coordinate=function(o,c){this.x=o,this.y=c},a.utils.Coordinate.equals=function(o,c){return o==c||!(!o||!c)&&o.x==c.x&&o.y==c.y},a.utils.Coordinate.distance=function(o,c){var d=o.x-c.x;return o=o.y-c.y,Math.sqrt(d*d+o*o)},a.utils.Coordinate.magnitude=function(o){return Math.sqrt(o.x*o.x+o.y*o.y)},a.utils.Coordinate.difference=function(o,c){return new a.utils.Coordinate(o.x-c.x,o.y-c.y)},a.utils.Coordinate.sum=function(o,c){return new a.utils.Coordinate(o.x+c.x,o.y+c.y)},a.utils.Coordinate.prototype.clone=function(){return new a.utils.Coordinate(this.x,this.y)},a.utils.Coordinate.prototype.scale=function(o){return this.x*=o,this.y*=o,this},a.utils.Coordinate.prototype.translate=function(o,c){return this.x+=o,this.y+=c,this},a.utils.Rect=function(o,c,d,f){this.top=o,this.bottom=c,this.left=d,this.right=f},a.utils.Rect.prototype.contains=function(o,c){return o>=this.left&&o<=this.right&&c>=this.top&&c<=this.bottom},a.utils.Rect.prototype.intersects=function(o){return!(this.left>o.right||this.right<o.left||this.top>o.bottom||this.bottom<o.top)},a.utils.string={},a.utils.string.startsWith=function(o,c){return 0==o.lastIndexOf(c,0)},a.utils.string.shortestStringLength=function(o){return o.length?o.reduce(function(c,d){return c.length<d.length?c:d}).length:0},a.utils.string.commonWordPrefix=function(o,c){if(!o.length)return 0;if(1==o.length)return o[0].length;var d=0;c=c||a.utils.string.shortestStringLength(o);for(var f=0;f<c;f++){for(var v=o[0][f],y=1;y<o.length;y++)if(v!=o[y][f])return d;" "==v&&(d=f+1)}for(y=1;y<o.length;y++)if((v=o[y][f])&&" "!=v)return d;return c},a.utils.string.commonWordSuffix=function(o,c){if(!o.length)return 0;if(1==o.length)return o[0].length;var d=0;c=c||a.utils.string.shortestStringLength(o);for(var f=0;f<c;f++){for(var v=o[0].substr(-f-1,1),y=1;y<o.length;y++)if(v!=o[y].substr(-f-1,1))return d;" "==v&&(d=f+1)}for(y=1;y<o.length;y++)if((v=o[y].charAt(o[y].length-f-1))&&" "!=v)return d;return c},a.utils.string.wrap=function(o,c){o=o.split("\n");for(var d=0;d<o.length;d++)o[d]=a.utils.string.wrapLine_(o[d],c);return o.join("\n")},a.utils.string.wrapLine_=function(o,c){if(o.length<=c)return o;for(var d=o.trim().split(/\s+/),f=0;f<d.length;f++)d[f].length>c&&(c=d[f].length);f=-1/0;var v=1;do{var y=f,D=o;o=[];var O=d.length/v,U=1;for(f=0;f<d.length-1;f++)U<(f+1.5)/O?(U++,o[f]=!0):o[f]=!1;o=a.utils.string.wrapMutate_(d,o,c),f=a.utils.string.wrapScore_(d,o,c),o=a.utils.string.wrapToText_(d,o),v++}while(f>y);return D},a.utils.string.wrapScore_=function(o,c,d){for(var f=[0],v=[],y=0;y<o.length;y++)f[f.length-1]+=o[y].length,!0===c[y]?(f.push(0),v.push(o[y].charAt(o[y].length-1))):!1===c[y]&&f[f.length-1]++;for(o=Math.max.apply(Math,f),y=c=0;y<f.length;y++)c-=2*Math.pow(Math.abs(d-f[y]),1.5),c-=Math.pow(o-f[y],1.5),-1!=".?!".indexOf(v[y])?c+=d/3:-1!=",;)]}".indexOf(v[y])&&(c+=d/4);return 1<f.length&&f[f.length-1]<=f[f.length-2]&&(c+=.5),c},a.utils.string.wrapMutate_=function(o,c,d){for(var v,f=a.utils.string.wrapScore_(o,c,d),y=0;y<c.length-1;y++)if(c[y]!=c[y+1]){var D=[].concat(c);D[y]=!D[y],D[y+1]=!D[y+1];var O=a.utils.string.wrapScore_(o,D,d);O>f&&(f=O,v=D)}return v?a.utils.string.wrapMutate_(o,v,d):c},a.utils.string.wrapToText_=function(o,c){for(var d=[],f=0;f<o.length;f++)d.push(o[f]),void 0!==c[f]&&d.push(c[f]?"\n":" ");return d.join("")},a.utils.Size=function(o,c){this.width=o,this.height=c},a.utils.Size.equals=function(o,c){return o==c||!(!o||!c)&&o.width==c.width&&o.height==c.height},a.utils.style={},a.utils.style.getSize=function(o){if("none"!=a.utils.style.getStyle_(o,"display"))return a.utils.style.getSizeWithDisplay_(o);var c=o.style,d=c.display,f=c.visibility,v=c.position;c.visibility="hidden",c.position="absolute",c.display="inline";var y=o.offsetWidth;return o=o.offsetHeight,c.display=d,c.position=v,c.visibility=f,new a.utils.Size(y,o)},a.utils.style.getSizeWithDisplay_=function(o){return new a.utils.Size(o.offsetWidth,o.offsetHeight)},a.utils.style.getStyle_=function(o,c){return a.utils.style.getComputedStyle(o,c)||a.utils.style.getCascadedStyle(o,c)||o.style&&o.style[c]},a.utils.style.getComputedStyle=function(o,c){return document.defaultView&&document.defaultView.getComputedStyle&&(o=document.defaultView.getComputedStyle(o,null))&&(o[c]||o.getPropertyValue(c))||""},a.utils.style.getCascadedStyle=function(o,c){return o.currentStyle?o.currentStyle[c]:null},a.utils.style.getPageOffset=function(o){var c=new a.utils.Coordinate(0,0);o=o.getBoundingClientRect();var d=document.documentElement;return d=new a.utils.Coordinate(window.pageXOffset||d.scrollLeft,window.pageYOffset||d.scrollTop),c.x=o.left+d.x,c.y=o.top+d.y,c},a.utils.style.getViewportPageOffset=function(){var o=document.body,c=document.documentElement;return new a.utils.Coordinate(o.scrollLeft||c.scrollLeft,o.scrollTop||c.scrollTop)},a.utils.style.setElementShown=function(o,c){o.style.display=c?"":"none"},a.utils.style.isRightToLeft=function(o){return"rtl"==a.utils.style.getStyle_(o,"direction")},a.utils.style.getBorderBox=function(o){var c=a.utils.style.getComputedStyle(o,"borderLeftWidth"),d=a.utils.style.getComputedStyle(o,"borderRightWidth"),f=a.utils.style.getComputedStyle(o,"borderTopWidth");return o=a.utils.style.getComputedStyle(o,"borderBottomWidth"),{top:parseFloat(f),right:parseFloat(d),bottom:parseFloat(o),left:parseFloat(c)}},a.utils.style.scrollIntoContainerView=function(o,c,d){o=a.utils.style.getContainerOffsetToScrollInto(o,c,d),c.scrollLeft=o.x,c.scrollTop=o.y},a.utils.style.getContainerOffsetToScrollInto=function(o,c,d){var f=a.utils.style.getPageOffset(o),v=a.utils.style.getPageOffset(c),y=a.utils.style.getBorderBox(c),D=f.x-v.x-y.left;return f=f.y-v.y-y.top,v=a.utils.style.getSizeWithDisplay_(o),o=c.clientWidth-v.width,v=c.clientHeight-v.height,y=c.scrollLeft,c=c.scrollTop,d?(y+=D-o/2,c+=f-v/2):(y+=Math.min(D,Math.max(D-o,0)),c+=Math.min(f,Math.max(f-v,0))),new a.utils.Coordinate(y,c)},a.utils.userAgent={},function(o){function c(f){return-1!=d.indexOf(f.toUpperCase())}a.utils.userAgent.raw=o;var d=a.utils.userAgent.raw.toUpperCase();a.utils.userAgent.IE=c("Trident")||c("MSIE"),a.utils.userAgent.EDGE=c("Edge"),a.utils.userAgent.JAVA_FX=c("JavaFX"),a.utils.userAgent.CHROME=(c("Chrome")||c("CriOS"))&&!a.utils.userAgent.EDGE,a.utils.userAgent.WEBKIT=c("WebKit")&&!a.utils.userAgent.EDGE,a.utils.userAgent.GECKO=c("Gecko")&&!a.utils.userAgent.WEBKIT&&!a.utils.userAgent.IE&&!a.utils.userAgent.EDGE,a.utils.userAgent.ANDROID=c("Android"),o=a.utils.global.navigator&&a.utils.global.navigator.maxTouchPoints,a.utils.userAgent.IPAD=c("iPad")||c("Macintosh")&&0<o,a.utils.userAgent.IPOD=c("iPod"),a.utils.userAgent.IPHONE=c("iPhone")&&!a.utils.userAgent.IPAD&&!a.utils.userAgent.IPOD,a.utils.userAgent.MAC=c("Macintosh"),a.utils.userAgent.TABLET=a.utils.userAgent.IPAD||a.utils.userAgent.ANDROID&&!c("Mobile")||c("Silk"),a.utils.userAgent.MOBILE=!a.utils.userAgent.TABLET&&(a.utils.userAgent.IPOD||a.utils.userAgent.IPHONE||a.utils.userAgent.ANDROID||c("IEMobile"))}(a.utils.global.navigator&&a.utils.global.navigator.userAgent||""),a.utils.noEvent=function(o){o.preventDefault(),o.stopPropagation()},a.utils.isTargetInput=function(o){return"textarea"==o.target.type||"text"==o.target.type||"number"==o.target.type||"email"==o.target.type||"password"==o.target.type||"search"==o.target.type||"tel"==o.target.type||"url"==o.target.type||o.target.isContentEditable||o.target.dataset&&"true"==o.target.dataset.isTextInput},a.utils.getRelativeXY=function(o){var c=new a.utils.Coordinate(0,0),d=o.getAttribute("x");return d&&(c.x=parseInt(d,10)),(d=o.getAttribute("y"))&&(c.y=parseInt(d,10)),(d=(d=o.getAttribute("transform"))&&d.match(a.utils.getRelativeXY.XY_REGEX_))&&(c.x+=Number(d[1]),d[3]&&(c.y+=Number(d[3]))),(o=o.getAttribute("style"))&&-1<o.indexOf("translate")&&(o=o.match(a.utils.getRelativeXY.XY_STYLE_REGEX_))&&(c.x+=Number(o[1]),o[3]&&(c.y+=Number(o[3]))),c},a.utils.getInjectionDivXY_=function(o){for(var c=0,d=0;o;){var f=a.utils.getRelativeXY(o);if(c+=f.x,d+=f.y,-1!=(" "+(o.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;o=o.parentNode}return new a.utils.Coordinate(c,d)},a.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,a.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,a.utils.isRightButton=function(o){return!(!o.ctrlKey||!a.utils.userAgent.MAC)||2==o.button},a.utils.mouseToSvg=function(o,c,d){var f=c.createSVGPoint();return f.x=o.clientX,f.y=o.clientY,d||(d=c.getScreenCTM().inverse()),f.matrixTransform(d)},a.utils.getScrollDeltaPixels=function(o){switch(o.deltaMode){default:return{x:o.deltaX,y:o.deltaY};case 1:return{x:o.deltaX*a.LINE_MODE_MULTIPLIER,y:o.deltaY*a.LINE_MODE_MULTIPLIER};case 2:return{x:o.deltaX*a.PAGE_MODE_MULTIPLIER,y:o.deltaY*a.PAGE_MODE_MULTIPLIER}}},a.utils.tokenizeInterpolation=function(o){return a.utils.tokenizeInterpolation_(o,!0)},a.utils.replaceMessageReferences=function(o){return"string"!=typeof o?o:(o=a.utils.tokenizeInterpolation_(o,!1)).length?String(o[0]):""},a.utils.checkMessageReferences=function(o){for(var c=!0,d=a.Msg,f=o.match(/%{BKY_[A-Z]\w*}/gi),v=0;v<f.length;v++)null==d[f[v].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+f[v]+" in "+o),c=!1);return c},a.utils.tokenizeInterpolation_=function(o,c){var d=[],f=o.split("");f.push("");var v=0;o=[];for(var y=null,D=0;D<f.length;D++){var O=f[D];0==v?"%"==O?((O=o.join(""))&&d.push(O),o.length=0,v=1):o.push(O):1==v?"%"==O?(o.push(O),v=0):c&&"0"<=O&&"9">=O?(v=2,y=O,(O=o.join(""))&&d.push(O),o.length=0):"{"==O?v=3:(o.push("%",O),v=0):2==v?"0"<=O&&"9">=O?y+=O:(d.push(parseInt(y,10)),D--,v=0):3==v&&(""==O?(o.splice(0,0,"%{"),D--,v=0):"}"!=O?o.push(O):(v=o.join(""),/[A-Z]\w*/i.test(v)?(O=v.toUpperCase(),(O=a.utils.string.startsWith(O,"BKY_")?O.substring(4):null)&&O in a.Msg?"string"==typeof(v=a.Msg[O])?Array.prototype.push.apply(d,a.utils.tokenizeInterpolation_(v,c)):d.push(c?String(v):v):d.push("%{"+v+"}")):d.push("%{"+v+"}"),v=o.length=0))}for((O=o.join(""))&&d.push(O),c=[],D=o.length=0;D<d.length;++D)"string"==typeof d[D]?o.push(d[D]):((O=o.join(""))&&c.push(O),o.length=0,c.push(d[D]));return(O=o.join(""))&&c.push(O),o.length=0,c},a.utils.genUid=function(){for(var o=a.utils.genUid.soup_.length,c=[],d=0;20>d;d++)c[d]=a.utils.genUid.soup_.charAt(Math.random()*o);return c.join("")},a.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a.utils.is3dSupported=function(){if(void 0!==a.utils.is3dSupported.cached_)return a.utils.is3dSupported.cached_;if(!a.utils.global.getComputedStyle)return!1;var o=document.createElement("p"),c="none",d={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var f in document.body.insertBefore(o,null),d)if(void 0!==o.style[f]){if(o.style[f]="translate3d(1px,1px,1px)",!(c=a.utils.global.getComputedStyle(o)))return document.body.removeChild(o),!1;c=c.getPropertyValue(d[f])}return document.body.removeChild(o),a.utils.is3dSupported.cached_="none"!==c,a.utils.is3dSupported.cached_},a.utils.runAfterPageLoad=function(o){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)o();else var c=setInterval(function(){"complete"==document.readyState&&(clearInterval(c),o())},10)},a.utils.getViewportBBox=function(){var o=a.utils.style.getViewportPageOffset();return new a.utils.Rect(o.y,document.documentElement.clientHeight+o.y,o.x,document.documentElement.clientWidth+o.x)},a.utils.arrayRemove=function(o,c){return-1!=(c=o.indexOf(c))&&(o.splice(c,1),!0)},a.utils.getDocumentScroll=function(){var o=document.documentElement,c=window;return a.utils.userAgent.IE&&c.pageYOffset!=o.scrollTop?new a.utils.Coordinate(o.scrollLeft,o.scrollTop):new a.utils.Coordinate(c.pageXOffset||o.scrollLeft,c.pageYOffset||o.scrollTop)},a.utils.getBlockTypeCounts=function(o,c){var d=Object.create(null),f=o.getDescendants(!0);for(c&&(o=o.getNextBlock())&&(o=f.indexOf(o),f.splice(o,f.length-o)),o=0;c=f[o];o++)d[c.type]?d[c.type]++:d[c.type]=1;return d},a.utils.screenToWsCoordinates=function(o,c){var d=c.x;c=c.y;var f=o.getInjectionDiv().getBoundingClientRect();return d=new a.utils.Coordinate(d-f.left,c-f.top),c=o.getOriginOffsetInPixels(),a.utils.Coordinate.difference(d,c).scale(1/o.scale)},a.utils.parseBlockColour=function(o){var c="string"==typeof o?a.utils.replaceMessageReferences(o):o,d=Number(c);if(!isNaN(d)&&0<=d&&360>=d)return{hue:d,hex:a.utils.colour.hsvToHex(d,a.HSV_SATURATION,255*a.HSV_VALUE)};if(d=a.utils.colour.parse(c))return{hue:null,hex:d};throw d='Invalid colour: "'+c+'"',o!=c&&(d+=' (from "'+o+'")'),Error(d)},a.Touch={},a.Touch.TOUCH_ENABLED="ontouchstart"in a.utils.global||!!(a.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!a.utils.global.navigator||!a.utils.global.navigator.maxTouchPoints&&!a.utils.global.navigator.msMaxTouchPoints),a.Touch.touchIdentifier_=null,a.Touch.TOUCH_MAP={},a.utils.global.PointerEvent?a.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:a.Touch.TOUCH_ENABLED&&(a.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),a.longPid_=0,a.longStart=function(o,c){a.longStop_(),o.changedTouches&&1!=o.changedTouches.length||(a.longPid_=setTimeout(function(){o.changedTouches&&(o.button=2,o.clientX=o.changedTouches[0].clientX,o.clientY=o.changedTouches[0].clientY),c&&c.handleRightClick(o)},a.LONGPRESS))},a.longStop_=function(){a.longPid_&&(clearTimeout(a.longPid_),a.longPid_=0)},a.Touch.clearTouchIdentifier=function(){a.Touch.touchIdentifier_=null},a.Touch.shouldHandleEvent=function(o){return!a.Touch.isMouseOrTouchEvent(o)||a.Touch.checkTouchIdentifier(o)},a.Touch.getTouchIdentifierFromEvent=function(o){return null!=o.pointerId?o.pointerId:o.changedTouches&&o.changedTouches[0]&&null!=o.changedTouches[0].identifier?o.changedTouches[0].identifier:"mouse"},a.Touch.checkTouchIdentifier=function(o){var c=a.Touch.getTouchIdentifierFromEvent(o);return null!=a.Touch.touchIdentifier_?a.Touch.touchIdentifier_==c:("mousedown"==o.type||"touchstart"==o.type||"pointerdown"==o.type)&&(a.Touch.touchIdentifier_=c,!0)},a.Touch.setClientFromTouch=function(o){if(a.utils.string.startsWith(o.type,"touch")){var c=o.changedTouches[0];o.clientX=c.clientX,o.clientY=c.clientY}},a.Touch.isMouseOrTouchEvent=function(o){return a.utils.string.startsWith(o.type,"touch")||a.utils.string.startsWith(o.type,"mouse")||a.utils.string.startsWith(o.type,"pointer")},a.Touch.isTouchEvent=function(o){return a.utils.string.startsWith(o.type,"touch")||a.utils.string.startsWith(o.type,"pointer")},a.Touch.splitEventByTouches=function(o){var c=[];if(o.changedTouches)for(var d=0;d<o.changedTouches.length;d++)c[d]={type:o.type,changedTouches:[o.changedTouches[d]],target:o.target,stopPropagation:function(){o.stopPropagation()},preventDefault:function(){o.preventDefault()}};else c.push(o);return c},a.browserEvents={},a.browserEvents.conditionalBind=function(o,c,d,f,v,y){var D=!1,O=function(ee){var J=!v;ee=a.Touch.splitEventByTouches(ee);for(var se,ue=0;se=ee[ue];ue++)(!J||a.Touch.shouldHandleEvent(se))&&(a.Touch.setClientFromTouch(se),d?f.call(d,se):f(se),D=!0)},U=[];if(a.utils.global.PointerEvent&&c in a.Touch.TOUCH_MAP)for(var H,X=0;H=a.Touch.TOUCH_MAP[c][X];X++)o.addEventListener(H,O,!1),U.push([o,H,O]);else if(o.addEventListener(c,O,!1),U.push([o,c,O]),c in a.Touch.TOUCH_MAP){var ne=function(ee){O(ee),D&&!y&&ee.preventDefault()};for(X=0;H=a.Touch.TOUCH_MAP[c][X];X++)o.addEventListener(H,ne,!1),U.push([o,H,ne])}return U},a.browserEvents.bind=function(o,c,d,f){var v=function(X){d?f.call(d,X):f(X)},y=[];if(a.utils.global.PointerEvent&&c in a.Touch.TOUCH_MAP)for(var O,D=0;O=a.Touch.TOUCH_MAP[c][D];D++)o.addEventListener(O,v,!1),y.push([o,O,v]);else if(o.addEventListener(c,v,!1),y.push([o,c,v]),c in a.Touch.TOUCH_MAP){var U=function(X){if(X.changedTouches&&1==X.changedTouches.length){var H=X.changedTouches[0];X.clientX=H.clientX,X.clientY=H.clientY}v(X),X.preventDefault()};for(D=0;O=a.Touch.TOUCH_MAP[c][D];D++)o.addEventListener(O,U,!1),y.push([o,O,U])}return y},a.browserEvents.unbind=function(o){for(;o.length;){var c=o.pop(),d=c[2];c[0].removeEventListener(c[1],d,!1)}return d},a.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},a.ComponentManager.prototype.addComponent=function(o,c){var d=o.component.id;if(!c&&this.componentData_[d])throw Error('Plugin "'+d+'" with capabilities "'+this.componentData_[d].capabilities+'" already added.');this.componentData_[d]=o,c=[];for(var f=0;f<o.capabilities.length;f++){var v=String(o.capabilities[f]).toLowerCase();c.push(v),void 0===this.capabilityToComponentIds_[v]?this.capabilityToComponentIds_[v]=[d]:this.capabilityToComponentIds_[v].push(d)}this.componentData_[d].capabilities=c},a.ComponentManager.prototype.removeComponent=function(o){var c=this.componentData_[o];if(c){for(var d=0;d<c.capabilities.length;d++){var f=String(c.capabilities[d]).toLowerCase();this.capabilityToComponentIds_[f].splice(this.capabilityToComponentIds_[f].indexOf(o),1)}delete this.componentData_[o]}},a.ComponentManager.prototype.addCapability=function(o,c){if(!this.getComponent(o))throw Error('Cannot add capability, "'+c+'". Plugin "'+o+'" has not been added to the ComponentManager');this.hasCapability(o,c)?console.warn('Plugin "'+o+'already has capability "'+c+'"'):(c=String(c).toLowerCase(),this.componentData_[o].capabilities.push(c),this.capabilityToComponentIds_[c].push(o))},a.ComponentManager.prototype.removeCapability=function(o,c){if(!this.getComponent(o))throw Error('Cannot remove capability, "'+c+'". Plugin "'+o+'" has not been added to the ComponentManager');this.hasCapability(o,c)?(c=String(c).toLowerCase(),this.componentData_[o].capabilities.splice(this.componentData_[o].capabilities.indexOf(c),1),this.capabilityToComponentIds_[c].splice(this.capabilityToComponentIds_[c].indexOf(o),1)):console.warn('Plugin "'+o+"doesn't have capability \""+c+'" to remove')},a.ComponentManager.prototype.hasCapability=function(o,c){return c=String(c).toLowerCase(),-1!==this.componentData_[o].capabilities.indexOf(c)},a.ComponentManager.prototype.getComponent=function(o){return this.componentData_[o]&&this.componentData_[o].component},a.ComponentManager.prototype.getComponents=function(o,c){if(o=String(o).toLowerCase(),!(o=this.capabilityToComponentIds_[o]))return[];var d=[];if(c){var f=[],v=this.componentData_;o.forEach(function(y){f.push(v[y])}),f.sort(function(y,D){return y.weight-D.weight}),f.forEach(function(y){d.push(y.component)})}else v=this.componentData_,o.forEach(function(y){d.push(v[y].component)});return d},a.ComponentManager.Capability=function(o){this.name_=o},a.ComponentManager.Capability.prototype.toString=function(){return this.name_},a.ComponentManager.Capability.POSITIONABLE=new a.ComponentManager.Capability("positionable"),a.ComponentManager.Capability.DRAG_TARGET=new a.ComponentManager.Capability("drag_target"),a.ComponentManager.Capability.DELETE_AREA=new a.ComponentManager.Capability("delete_area"),a.ComponentManager.Capability.AUTOHIDEABLE=new a.ComponentManager.Capability("autohideable"),a.utils.Svg=function(o){this.tagName_=o},a.utils.Svg.prototype.toString=function(){return this.tagName_},a.utils.Svg.ANIMATE=new a.utils.Svg("animate"),a.utils.Svg.CIRCLE=new a.utils.Svg("circle"),a.utils.Svg.CLIPPATH=new a.utils.Svg("clipPath"),a.utils.Svg.DEFS=new a.utils.Svg("defs"),a.utils.Svg.FECOMPOSITE=new a.utils.Svg("feComposite"),a.utils.Svg.FECOMPONENTTRANSFER=new a.utils.Svg("feComponentTransfer"),a.utils.Svg.FEFLOOD=new a.utils.Svg("feFlood"),a.utils.Svg.FEFUNCA=new a.utils.Svg("feFuncA"),a.utils.Svg.FEGAUSSIANBLUR=new a.utils.Svg("feGaussianBlur"),a.utils.Svg.FEPOINTLIGHT=new a.utils.Svg("fePointLight"),a.utils.Svg.FESPECULARLIGHTING=new a.utils.Svg("feSpecularLighting"),a.utils.Svg.FILTER=new a.utils.Svg("filter"),a.utils.Svg.FOREIGNOBJECT=new a.utils.Svg("foreignObject"),a.utils.Svg.G=new a.utils.Svg("g"),a.utils.Svg.IMAGE=new a.utils.Svg("image"),a.utils.Svg.LINE=new a.utils.Svg("line"),a.utils.Svg.PATH=new a.utils.Svg("path"),a.utils.Svg.PATTERN=new a.utils.Svg("pattern"),a.utils.Svg.POLYGON=new a.utils.Svg("polygon"),a.utils.Svg.RECT=new a.utils.Svg("rect"),a.utils.Svg.SVG=new a.utils.Svg("svg"),a.utils.Svg.TEXT=new a.utils.Svg("text"),a.utils.Svg.TSPAN=new a.utils.Svg("tspan"),a.utils.dom={},a.utils.dom.SVG_NS="http://www.w3.org/2000/svg",a.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",a.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",a.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},a.utils.dom.cacheWidths_=null,a.utils.dom.cacheReference_=0,a.utils.dom.canvasContext_=null,a.utils.dom.createSvgElement=function(o,c,d){for(var f in o=document.createElementNS(a.utils.dom.SVG_NS,String(o)),c)o.setAttribute(f,c[f]);return document.body.runtimeStyle&&(o.runtimeStyle=o.currentStyle=o.style),d&&d.appendChild(o),o},a.utils.dom.addClass=function(o,c){var d=o.getAttribute("class")||"";return-1==(" "+d+" ").indexOf(" "+c+" ")&&(d&&(d+=" "),o.setAttribute("class",d+c),!0)},a.utils.dom.removeClasses=function(o,c){c=c.split(" ");for(var d=0;d<c.length;d++)a.utils.dom.removeClass(o,c[d])},a.utils.dom.removeClass=function(o,c){var d=o.getAttribute("class");if(-1==(" "+d+" ").indexOf(" "+c+" "))return!1;d=d.split(/\s+/);for(var f=0;f<d.length;f++)d[f]&&d[f]!=c||(d.splice(f,1),f--);return d.length?o.setAttribute("class",d.join(" ")):o.removeAttribute("class"),!0},a.utils.dom.hasClass=function(o,c){return-1!=(" "+o.getAttribute("class")+" ").indexOf(" "+c+" ")},a.utils.dom.removeNode=function(o){return o&&o.parentNode?o.parentNode.removeChild(o):null},a.utils.dom.insertAfter=function(o,c){var d=c.nextSibling;if(!(c=c.parentNode))throw Error("Reference node has no parent.");d?c.insertBefore(o,d):c.appendChild(o)},a.utils.dom.containsNode=function(o,c){return!!(o.compareDocumentPosition(c)&a.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},a.utils.dom.setCssTransform=function(o,c){o.style.transform=c,o.style["-webkit-transform"]=c},a.utils.dom.startTextWidthCache=function(){a.utils.dom.cacheReference_++,a.utils.dom.cacheWidths_||(a.utils.dom.cacheWidths_=Object.create(null))},a.utils.dom.stopTextWidthCache=function(){a.utils.dom.cacheReference_--,a.utils.dom.cacheReference_||(a.utils.dom.cacheWidths_=null)},a.utils.dom.getTextWidth=function(o){var d,c=o.textContent+"\n"+o.className.baseVal;if(a.utils.dom.cacheWidths_&&(d=a.utils.dom.cacheWidths_[c]))return d;try{d=a.utils.userAgent.IE||a.utils.userAgent.EDGE?o.getBBox().width:o.getComputedTextLength()}catch(f){return 8*o.textContent.length}return a.utils.dom.cacheWidths_&&(a.utils.dom.cacheWidths_[c]=d),d},a.utils.dom.getFastTextWidth=function(o,c,d,f){return a.utils.dom.getFastTextWidthWithSizeString(o,c+"pt",d,f)},a.utils.dom.getFastTextWidthWithSizeString=function(o,c,d,f){var y,v=o.textContent;return o=v+"\n"+o.className.baseVal,a.utils.dom.cacheWidths_&&(y=a.utils.dom.cacheWidths_[o])||(a.utils.dom.canvasContext_||((y=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(y),a.utils.dom.canvasContext_=y.getContext("2d")),a.utils.dom.canvasContext_.font=d+" "+c+" "+f,y=a.utils.dom.canvasContext_.measureText(v).width,a.utils.dom.cacheWidths_&&(a.utils.dom.cacheWidths_[o]=y)),y},a.utils.dom.measureFontMetrics=function(o,c,d,f){var v=document.createElement("span");v.style.font=d+" "+c+" "+f,v.textContent=o,(o=document.createElement("div")).style.width="1px",o.style.height="0px",(c=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),c.appendChild(v),c.appendChild(o),document.body.appendChild(c);try{d={},c.style.alignItems="baseline",d.baseline=o.offsetTop-v.offsetTop,c.style.alignItems="flex-end",d.height=o.offsetTop-v.offsetTop}finally{document.body.removeChild(c)}return d},a.utils.math={},a.utils.math.toRadians=function(o){return o*Math.PI/180},a.utils.math.toDegrees=function(o){return 180*o/Math.PI},a.utils.math.clamp=function(o,c,d){if(d<o){var f=d;d=o,o=f}return Math.max(o,Math.min(c,d))},a.DropDownDiv=function(){},a.DropDownDiv.boundsElement_=null,a.DropDownDiv.owner_=null,a.DropDownDiv.positionToField_=null,a.DropDownDiv.ARROW_SIZE=16,a.DropDownDiv.BORDER_SIZE=1,a.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,a.DropDownDiv.PADDING_Y=16,a.DropDownDiv.ANIMATION_TIME=.25,a.DropDownDiv.animateOutTimer_=null,a.DropDownDiv.onHide_=null,a.DropDownDiv.rendererClassName_="",a.DropDownDiv.themeClassName_="",a.DropDownDiv.createDom=function(){if(!a.DropDownDiv.DIV_){var o=document.createElement("div");o.className="blocklyDropDownDiv",(a.parentContainer||document.body).appendChild(o),a.DropDownDiv.DIV_=o;var c=document.createElement("div");c.className="blocklyDropDownContent",o.appendChild(c),a.DropDownDiv.content_=c,(c=document.createElement("div")).className="blocklyDropDownArrow",o.appendChild(c),a.DropDownDiv.arrow_=c,a.DropDownDiv.DIV_.style.opacity=0,a.DropDownDiv.DIV_.style.transition="transform "+a.DropDownDiv.ANIMATION_TIME+"s, opacity "+a.DropDownDiv.ANIMATION_TIME+"s",o.addEventListener("focusin",function(){a.utils.dom.addClass(o,"blocklyFocused")}),o.addEventListener("focusout",function(){a.utils.dom.removeClass(o,"blocklyFocused")})}},a.DropDownDiv.setBoundsElement=function(o){a.DropDownDiv.boundsElement_=o},a.DropDownDiv.getContentDiv=function(){return a.DropDownDiv.content_},a.DropDownDiv.clearContent=function(){a.DropDownDiv.content_.textContent="",a.DropDownDiv.content_.style.width=""},a.DropDownDiv.setColour=function(o,c){a.DropDownDiv.DIV_.style.backgroundColor=o,a.DropDownDiv.DIV_.style.borderColor=c},a.DropDownDiv.showPositionedByBlock=function(o,c,d,f){return a.DropDownDiv.showPositionedByRect_(a.DropDownDiv.getScaledBboxOfBlock_(c),o,d,f)},a.DropDownDiv.showPositionedByField=function(o,c,d){return a.DropDownDiv.positionToField_=!0,a.DropDownDiv.showPositionedByRect_(a.DropDownDiv.getScaledBboxOfField_(o),o,c,d)},a.DropDownDiv.getScaledBboxOfBlock_=function(o){var c=o.getSvgRoot(),d=c.getBBox(),f=o.workspace.scale;return o=d.height*f,d=d.width*f,c=a.utils.style.getPageOffset(c),new a.utils.Rect(c.y,c.y+o,c.x,c.x+d)},a.DropDownDiv.getScaledBboxOfField_=function(o){return o=o.getScaledBBox(),new a.utils.Rect(o.top,o.bottom,o.left,o.right)},a.DropDownDiv.showPositionedByRect_=function(o,c,d,f){var v=o.left+(o.right-o.left)/2,y=o.bottom;o=o.top,f&&(o+=f);for(var D=(f=c.getSourceBlock()).workspace;D.options.parentWorkspace;)D=D.options.parentWorkspace;return a.DropDownDiv.setBoundsElement(D.getParentSvg().parentNode),a.DropDownDiv.show(c,f.RTL,v,y,v,o,d)},a.DropDownDiv.show=function(o,c,d,f,v,y,D){return a.DropDownDiv.owner_=o,a.DropDownDiv.onHide_=D||null,(o=a.DropDownDiv.DIV_).style.direction=c?"rtl":"ltr",c=a.getMainWorkspace(),a.DropDownDiv.rendererClassName_=c.getRenderer().getClassName(),a.DropDownDiv.themeClassName_=c.getTheme().getClassName(),a.utils.dom.addClass(o,a.DropDownDiv.rendererClassName_),a.utils.dom.addClass(o,a.DropDownDiv.themeClassName_),a.DropDownDiv.positionInternal_(d,f,v,y)},a.DropDownDiv.getBoundsInfo_=function(){var o=a.utils.style.getPageOffset(a.DropDownDiv.boundsElement_),c=a.utils.style.getSize(a.DropDownDiv.boundsElement_);return{left:o.x,right:o.x+c.width,top:o.y,bottom:o.y+c.height,width:c.width,height:c.height}},a.DropDownDiv.getPositionMetrics_=function(o,c,d,f){var v=a.DropDownDiv.getBoundsInfo_(),y=a.utils.style.getSize(a.DropDownDiv.DIV_);return c+y.height<v.bottom?a.DropDownDiv.getPositionBelowMetrics_(o,c,v,y):f-y.height>v.top?a.DropDownDiv.getPositionAboveMetrics_(d,f,v,y):c+y.height<document.documentElement.clientHeight?a.DropDownDiv.getPositionBelowMetrics_(o,c,v,y):f-y.height>document.documentElement.clientTop?a.DropDownDiv.getPositionAboveMetrics_(d,f,v,y):a.DropDownDiv.getPositionTopOfPageMetrics_(o,v,y)},a.DropDownDiv.getPositionBelowMetrics_=function(o,c,d,f){return{initialX:(o=a.DropDownDiv.getPositionX(o,d.left,d.right,f.width)).divX,initialY:c,finalX:o.divX,finalY:c+a.DropDownDiv.PADDING_Y,arrowX:o.arrowX,arrowY:-(a.DropDownDiv.ARROW_SIZE/2+a.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},a.DropDownDiv.getPositionAboveMetrics_=function(o,c,d,f){return{initialX:(o=a.DropDownDiv.getPositionX(o,d.left,d.right,f.width)).divX,initialY:c-f.height,finalX:o.divX,finalY:c-f.height-a.DropDownDiv.PADDING_Y,arrowX:o.arrowX,arrowY:f.height-2*a.DropDownDiv.BORDER_SIZE-a.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},a.DropDownDiv.getPositionTopOfPageMetrics_=function(o,c,d){return{initialX:(o=a.DropDownDiv.getPositionX(o,c.left,c.right,d.width)).divX,initialY:0,finalX:o.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},a.DropDownDiv.getPositionX=function(o,c,d,f){var v=o;return o=a.utils.math.clamp(c,o-f/2,d-f),{arrowX:f=a.utils.math.clamp(c=a.DropDownDiv.ARROW_HORIZONTAL_PADDING,(v-=a.DropDownDiv.ARROW_SIZE/2)-o,f-c-a.DropDownDiv.ARROW_SIZE),divX:o}},a.DropDownDiv.isVisible=function(){return!!a.DropDownDiv.owner_},a.DropDownDiv.hideIfOwner=function(o,c){return a.DropDownDiv.owner_===o&&(c?a.DropDownDiv.hideWithoutAnimation():a.DropDownDiv.hide(),!0)},a.DropDownDiv.hide=function(){var o=a.DropDownDiv.DIV_;o.style.transform="translate(0, 0)",o.style.opacity=0,a.DropDownDiv.animateOutTimer_=setTimeout(function(){a.DropDownDiv.hideWithoutAnimation()},1e3*a.DropDownDiv.ANIMATION_TIME),a.DropDownDiv.onHide_&&(a.DropDownDiv.onHide_(),a.DropDownDiv.onHide_=null)},a.DropDownDiv.hideWithoutAnimation=function(){if(a.DropDownDiv.isVisible()){a.DropDownDiv.animateOutTimer_&&clearTimeout(a.DropDownDiv.animateOutTimer_);var o=a.DropDownDiv.DIV_;o.style.transform="",o.style.left="",o.style.top="",o.style.opacity=0,o.style.display="none",o.style.backgroundColor="",o.style.borderColor="",a.DropDownDiv.onHide_&&(a.DropDownDiv.onHide_(),a.DropDownDiv.onHide_=null),a.DropDownDiv.clearContent(),a.DropDownDiv.owner_=null,a.DropDownDiv.rendererClassName_&&(a.utils.dom.removeClass(o,a.DropDownDiv.rendererClassName_),a.DropDownDiv.rendererClassName_=""),a.DropDownDiv.themeClassName_&&(a.utils.dom.removeClass(o,a.DropDownDiv.themeClassName_),a.DropDownDiv.themeClassName_=""),a.getMainWorkspace().markFocused()}},a.DropDownDiv.positionInternal_=function(o,c,d,f){(o=a.DropDownDiv.getPositionMetrics_(o,c,d,f)).arrowVisible?(a.DropDownDiv.arrow_.style.display="",a.DropDownDiv.arrow_.style.transform="translate("+o.arrowX+"px,"+o.arrowY+"px) rotate(45deg)",a.DropDownDiv.arrow_.setAttribute("class",o.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):a.DropDownDiv.arrow_.style.display="none",c=Math.floor(o.initialX),d=Math.floor(o.initialY),f=Math.floor(o.finalX);var v=Math.floor(o.finalY),y=a.DropDownDiv.DIV_;return y.style.left=c+"px",y.style.top=d+"px",y.style.display="block",y.style.opacity=1,y.style.transform="translate("+(f-c)+"px,"+(v-d)+"px)",!!o.arrowAtTop},a.DropDownDiv.repositionForWindowResize=function(){if(a.DropDownDiv.owner_){var o=a.DropDownDiv.owner_,c=o.getSourceBlock();o=a.DropDownDiv.positionToField_?a.DropDownDiv.getScaledBboxOfField_(o):a.DropDownDiv.getScaledBboxOfBlock_(c),a.DropDownDiv.positionInternal_(c=o.left+(o.right-o.left)/2,o.bottom,c,o.top)}else a.DropDownDiv.hide()},a.registry={},a.registry.typeMap_=Object.create(null),a.registry.DEFAULT="default",a.registry.Type=function(o){this.name_=o},a.registry.Type.prototype.toString=function(){return this.name_},a.registry.Type.CONNECTION_CHECKER=new a.registry.Type("connectionChecker"),a.registry.Type.CURSOR=new a.registry.Type("cursor"),a.registry.Type.EVENT=new a.registry.Type("event"),a.registry.Type.FIELD=new a.registry.Type("field"),a.registry.Type.RENDERER=new a.registry.Type("renderer"),a.registry.Type.TOOLBOX=new a.registry.Type("toolbox"),a.registry.Type.THEME=new a.registry.Type("theme"),a.registry.Type.TOOLBOX_ITEM=new a.registry.Type("toolboxItem"),a.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new a.registry.Type("flyoutsVerticalToolbox"),a.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new a.registry.Type("flyoutsHorizontalToolbox"),a.registry.Type.METRICS_MANAGER=new a.registry.Type("metricsManager"),a.registry.Type.BLOCK_DRAGGER=new a.registry.Type("blockDragger"),a.registry.register=function(o,c,d,f){if(!(o instanceof a.registry.Type)&&"string"!=typeof o||""==String(o).trim())throw Error('Invalid type "'+o+'". The type must be a non-empty string or a Blockly.registry.Type.');if(o=String(o).toLowerCase(),"string"!=typeof c||""==c.trim())throw Error('Invalid name "'+c+'". The name must be a non-empty string.');if(c=c.toLowerCase(),!d)throw Error("Can not register a null value");var v=a.registry.typeMap_[o];if(v||(v=a.registry.typeMap_[o]=Object.create(null)),a.registry.validate_(o,d),!f&&v[c])throw Error('Name "'+c+'" with type "'+o+'" already registered.');v[c]=d},a.registry.validate_=function(o,c){switch(o){case String(a.registry.Type.FIELD):if("function"!=typeof c.fromJson)throw Error('Type "'+o+'" must have a fromJson function')}},a.registry.unregister=function(o,c){o=String(o).toLowerCase(),c=c.toLowerCase();var d=a.registry.typeMap_[o];d&&d[c]?delete a.registry.typeMap_[o][c]:console.warn("Unable to unregister ["+c+"]["+o+"] from the registry.")},a.registry.getItem_=function(o,c,d){o=String(o).toLowerCase(),c=c.toLowerCase();var f=a.registry.typeMap_[o];if(!f||!f[c]){if(c="Unable to find ["+c+"]["+o+"] in the registry.",d)throw Error(c+" You must require or register a "+o+" plugin.");return console.warn(c),null}return f[c]},a.registry.hasItem=function(o,c){return o=String(o).toLowerCase(),c=c.toLowerCase(),!!(o=a.registry.typeMap_[o])&&!!o[c]},a.registry.getClass=function(o,c,d){return a.registry.getItem_(o,c,d)},a.registry.getObject=function(o,c,d){return a.registry.getItem_(o,c,d)},a.registry.getClassFromOptions=function(o,c,d){return"function"==typeof(c=c.plugins[o.toString()]||a.registry.DEFAULT)?c:a.registry.getClass(o,c,d)},a.Events={},a.Events.group_="",a.Events.recordUndo=!0,a.Events.disabled_=0,a.Events.CREATE="create",a.Events.BLOCK_CREATE=a.Events.CREATE,a.Events.DELETE="delete",a.Events.BLOCK_DELETE=a.Events.DELETE,a.Events.CHANGE="change",a.Events.BLOCK_CHANGE=a.Events.CHANGE,a.Events.MOVE="move",a.Events.BLOCK_MOVE=a.Events.MOVE,a.Events.VAR_CREATE="var_create",a.Events.VAR_DELETE="var_delete",a.Events.VAR_RENAME="var_rename",a.Events.UI="ui",a.Events.BLOCK_DRAG="drag",a.Events.SELECTED="selected",a.Events.CLICK="click",a.Events.MARKER_MOVE="marker_move",a.Events.BUBBLE_OPEN="bubble_open",a.Events.TRASHCAN_OPEN="trashcan_open",a.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",a.Events.THEME_CHANGE="theme_change",a.Events.VIEWPORT_CHANGE="viewport_change",a.Events.COMMENT_CREATE="comment_create",a.Events.COMMENT_DELETE="comment_delete",a.Events.COMMENT_CHANGE="comment_change",a.Events.COMMENT_MOVE="comment_move",a.Events.FINISHED_LOADING="finished_loading",a.Events.BUMP_EVENTS=[a.Events.BLOCK_CREATE,a.Events.BLOCK_MOVE,a.Events.COMMENT_CREATE,a.Events.COMMENT_MOVE],a.Events.FIRE_QUEUE_=[],a.Events.fire=function(o){a.Events.isEnabled()&&(a.Events.FIRE_QUEUE_.length||setTimeout(a.Events.fireNow_,0),a.Events.FIRE_QUEUE_.push(o))},a.Events.fireNow_=function(){for(var d,o=a.Events.filter(a.Events.FIRE_QUEUE_,!0),c=a.Events.FIRE_QUEUE_.length=0;d=o[c];c++)if(d.workspaceId){var f=a.Workspace.getById(d.workspaceId);f&&f.fireChangeListener(d)}},a.Events.filter=function(o,c){o=o.slice(),c||o.reverse();for(var y,d=[],f=Object.create(null),v=0;y=o[v];v++)if(!y.isNull()){var D=[y.isUiEvent?a.Events.UI:y.type,y.blockId,y.workspaceId].join(" "),O=f[D],U=O?O.event:null;O?y.type==a.Events.MOVE&&O.index==v-1?(U.newParentId=y.newParentId,U.newInputName=y.newInputName,U.newCoordinate=y.newCoordinate,O.index=v):y.type==a.Events.CHANGE&&y.element==U.element&&y.name==U.name?U.newValue=y.newValue:y.type==a.Events.VIEWPORT_CHANGE?(U.viewTop=y.viewTop,U.viewLeft=y.viewLeft,U.scale=y.scale,U.oldScale=y.oldScale):(y.type!=a.Events.CLICK||U.type!=a.Events.BUBBLE_OPEN)&&(f[D]={event:y,index:v},d.push(y)):(f[D]={event:y,index:v},d.push(y))}for(o=d.filter(function(X){return!X.isNull()}),c||o.reverse(),v=1;y=o[v];v++)y.type==a.Events.CHANGE&&"mutation"==y.element&&o.unshift(o.splice(v,1)[0]);return o},a.Events.clearPendingUndo=function(){for(var c,o=0;c=a.Events.FIRE_QUEUE_[o];o++)c.recordUndo=!1},a.Events.disable=function(){a.Events.disabled_++},a.Events.enable=function(){a.Events.disabled_--},a.Events.isEnabled=function(){return 0==a.Events.disabled_},a.Events.getGroup=function(){return a.Events.group_},a.Events.setGroup=function(o){a.Events.group_="boolean"==typeof o?o?a.utils.genUid():"":o},a.Events.getDescendantIds=function(o){var c=[];o=o.getDescendants(!1);for(var f,d=0;f=o[d];d++)c[d]=f.id;return c},a.Events.fromJson=function(o,c){var d=a.Events.get(o.type);if(!d)throw Error("Unknown event type.");return(d=new d).fromJson(o),d.workspaceId=c.id,d},a.Events.get=function(o){return a.registry.getClass(a.registry.Type.EVENT,o)},a.Events.disableOrphans=function(o){if((o.type==a.Events.MOVE||o.type==a.Events.CREATE)&&o.workspaceId){var c=a.Workspace.getById(o.workspaceId),d=c.getBlockById(o.blockId);if(d){o=a.Events.recordUndo;try{a.Events.recordUndo=!1;var f=d.getParent();if(f&&f.isEnabled()){var y,v=d.getDescendants(!1);for(c=0;y=v[c];c++)y.setEnabled(!0)}else if((d.outputConnection||d.previousConnection)&&!c.isDragging())do{d.setEnabled(!1),d=d.getNextBlock()}while(d)}finally{a.Events.recordUndo=o}}}},a.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=a.Events.getGroup(),this.recordUndo=a.Events.recordUndo},a.Events.Abstract.prototype.isUiEvent=!1,a.Events.Abstract.prototype.toJson=function(){var o={type:this.type};return this.group&&(o.group=this.group),o},a.Events.Abstract.prototype.fromJson=function(o){this.isBlank=!1,this.group=o.group},a.Events.Abstract.prototype.isNull=function(){return!1},a.Events.Abstract.prototype.run=function(o){},a.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var o=a.Workspace.getById(this.workspaceId);if(!o)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return o},a.utils.object={},a.utils.object.inherits=function(o,c){o.superClass_=c.prototype,o.prototype=Object.create(c.prototype),o.prototype.constructor=o},a.utils.object.mixin=function(o,c){for(var d in c)o[d]=c[d]},a.utils.object.deepMerge=function(o,c){for(var d in c)o[d]=null!=c[d]&&"object"==typeof c[d]?a.utils.object.deepMerge(o[d]||Object.create(null),c[d]):c[d];return o},a.utils.object.values=function(o){return Object.values?Object.values(o):Object.keys(o).map(function(c){return o[c]})},a.utils.xml={},a.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",a.utils.xml.document=function(){return document},a.utils.xml.createElement=function(o){return a.utils.xml.document().createElementNS(a.utils.xml.NAME_SPACE,o)},a.utils.xml.createTextNode=function(o){return a.utils.xml.document().createTextNode(o)},a.utils.xml.textToDomDocument=function(o){return(new DOMParser).parseFromString(o,"text/xml")},a.utils.xml.domToText=function(o){return(new XMLSerializer).serializeToString(o)},a.inputTypes={VALUE:a.connectionTypes.INPUT_VALUE,STATEMENT:a.connectionTypes.NEXT_STATEMENT,DUMMY:5},a.Xml={},a.Xml.workspaceToDom=function(o,c){var d=a.utils.xml.createElement("xml"),f=a.Xml.variablesToDom(a.Variables.allUsedVarModels(o));f.hasChildNodes()&&d.appendChild(f);var y,v=o.getTopComments(!0);for(f=0;y=v[f];f++)d.appendChild(y.toXmlWithXY(c));for(o=o.getTopBlocks(!0),f=0;v=o[f];f++)d.appendChild(a.Xml.blockToDomWithXY(v,c));return d},a.Xml.variablesToDom=function(o){for(var f,c=a.utils.xml.createElement("variables"),d=0;f=o[d];d++){var v=a.utils.xml.createElement("variable");v.appendChild(a.utils.xml.createTextNode(f.name)),f.type&&v.setAttribute("type",f.type),v.id=f.getId(),c.appendChild(v)}return c},a.Xml.blockToDomWithXY=function(o,c){if(o.isInsertionMarker()&&!(o=o.getChildren(!1)[0]))return new DocumentFragment;var d;o.workspace.RTL&&(d=o.workspace.getWidth()),c=a.Xml.blockToDom(o,c);var f=o.getRelativeToSurfaceXY();return c.setAttribute("x",Math.round(o.workspace.RTL?d-f.x:f.x)),c.setAttribute("y",Math.round(f.y)),c},a.Xml.fieldToDom_=function(o){if(o.isSerializable()){var c=a.utils.xml.createElement("field");return c.setAttribute("name",o.name||""),o.toXml(c)}return null},a.Xml.allFieldsToDom_=function(o,c){for(var f,d=0;f=o.inputList[d];d++)for(var y,v=0;y=f.fieldRow[v];v++)(y=a.Xml.fieldToDom_(y))&&c.appendChild(y)},a.Xml.blockToDom=function(o,c){if(o.isInsertionMarker())return(o=o.getChildren(!1)[0])?a.Xml.blockToDom(o):new DocumentFragment;var d=a.utils.xml.createElement(o.isShadow()?"shadow":"block");if(d.setAttribute("type",o.type),c||d.setAttribute("id",o.id),o.mutationToDom){var f=o.mutationToDom();f&&(f.hasChildNodes()||f.hasAttributes())&&d.appendChild(f)}if(a.Xml.allFieldsToDom_(o,d),f=o.getCommentText()){var v=o.commentModel.size,y=o.commentModel.pinned,D=a.utils.xml.createElement("comment");D.appendChild(a.utils.xml.createTextNode(f)),D.setAttribute("pinned",y),D.setAttribute("h",v.height),D.setAttribute("w",v.width),d.appendChild(D)}for(o.data&&((f=a.utils.xml.createElement("data")).appendChild(a.utils.xml.createTextNode(o.data)),d.appendChild(f)),f=0;v=o.inputList[f];f++){var O;if(y=!0,v.type!=a.inputTypes.DUMMY){var U=v.connection.targetBlock();v.type==a.inputTypes.VALUE?O=a.utils.xml.createElement("value"):v.type==a.inputTypes.STATEMENT&&(O=a.utils.xml.createElement("statement")),!(D=v.connection.getShadowDom())||U&&U.isShadow()||O.appendChild(a.Xml.cloneShadow_(D,c)),U&&(D=a.Xml.blockToDom(U,c)).nodeType==a.utils.dom.NodeType.ELEMENT_NODE&&(O.appendChild(D),y=!1),O.setAttribute("name",v.name),y||d.appendChild(O)}}return null!=o.inputsInline&&o.inputsInline!=o.inputsInlineDefault&&d.setAttribute("inline",o.inputsInline),o.isCollapsed()&&d.setAttribute("collapsed",!0),o.isEnabled()||d.setAttribute("disabled",!0),o.isDeletable()||o.isShadow()||d.setAttribute("deletable",!1),o.isMovable()||o.isShadow()||d.setAttribute("movable",!1),o.isEditable()||d.setAttribute("editable",!1),(f=o.getNextBlock())&&(D=a.Xml.blockToDom(f,c)).nodeType==a.utils.dom.NodeType.ELEMENT_NODE&&((O=a.utils.xml.createElement("next")).appendChild(D),d.appendChild(O)),!(D=o.nextConnection&&o.nextConnection.getShadowDom())||f&&f.isShadow()||O.appendChild(a.Xml.cloneShadow_(D,c)),d},a.Xml.cloneShadow_=function(o,c){for(var f,d=o=o.cloneNode(!0);d;)if(c&&"shadow"==d.nodeName&&d.removeAttribute("id"),d.firstChild)d=d.firstChild;else{for(;d&&!d.nextSibling;)f=d,d=d.parentNode,f.nodeType==a.utils.dom.NodeType.TEXT_NODE&&""==f.data.trim()&&d.firstChild!=f&&a.utils.dom.removeNode(f);d&&(f=d,d=d.nextSibling,f.nodeType==a.utils.dom.NodeType.TEXT_NODE&&""==f.data.trim()&&a.utils.dom.removeNode(f))}return o},a.Xml.domToText=function(o){return a.utils.xml.domToText(o).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},a.Xml.domToPrettyText=function(o){o=a.Xml.domToText(o).split("<");for(var c="",d=1;d<o.length;d++){var f=o[d];"/"==f[0]&&(c=c.substring(2)),o[d]=c+"<"+f,"/"!=f[0]&&"/>"!=f.slice(-2)&&(c+="  ")}return(o=(o=o.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},a.Xml.textToDom=function(o){var c=a.utils.xml.textToDomDocument(o);if(!c||!c.documentElement||c.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+o);return c.documentElement},a.Xml.clearWorkspaceAndLoadFromXml=function(o,c){return c.setResizesEnabled(!1),c.clear(),o=a.Xml.domToWorkspace(o,c),c.setResizesEnabled(!0),o},a.Xml.domToWorkspace=function(o,c){if(o instanceof a.Workspace){var d=o;o=c,c=d,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var f;c.RTL&&(f=c.getWidth()),d=[],a.utils.dom.startTextWidthCache();var v=a.Events.getGroup();v||a.Events.setGroup(!0),c.setResizesEnabled&&c.setResizesEnabled(!1);var y=!0;try{for(var O,D=0;O=o.childNodes[D];D++){var U=O.nodeName.toLowerCase(),X=O;if("block"==U||"shadow"==U&&!a.Events.recordUndo){var H=a.Xml.domToBlock(X,c);d.push(H.id);var ne=X.hasAttribute("x")?parseInt(X.getAttribute("x"),10):10,ee=X.hasAttribute("y")?parseInt(X.getAttribute("y"),10):10;isNaN(ne)||isNaN(ee)||H.moveBy(c.RTL?f-ne:ne,ee),y=!1}else{if("shadow"==U)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==U)c.rendered?a.WorkspaceCommentSvg?a.WorkspaceCommentSvg.fromXml(X,c,f):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):a.WorkspaceComment?a.WorkspaceComment.fromXml(X,c):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==U){if(!y)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");a.Xml.domToVariables(X,c),y=!1}}}}finally{v||a.Events.setGroup(!1),a.utils.dom.stopTextWidthCache()}return c.setResizesEnabled&&c.setResizesEnabled(!0),a.Events.fire(new(a.Events.get(a.Events.FINISHED_LOADING))(c)),d},a.Xml.appendDomToWorkspace=function(o,c){var d;if(Object.prototype.hasOwnProperty.call(c,"scale")&&(d=c.getBlocksBoundingBox()),o=a.Xml.domToWorkspace(o,c),d&&d.top!=d.bottom){var f=d.bottom,v=c.RTL?d.right:d.left,y=1/0,D=-1/0,O=1/0;for(d=0;d<o.length;d++){var U=c.getBlockById(o[d]).getRelativeToSurfaceXY();U.y<O&&(O=U.y),U.x<y&&(y=U.x),U.x>D&&(D=U.x)}for(f=f-O+10,v=c.RTL?v-D:v-y,d=0;d<o.length;d++)c.getBlockById(o[d]).moveBy(v,f)}return o},a.Xml.domToBlock=function(o,c){if(o instanceof a.Workspace){var d=o;o=c,c=d,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}a.Events.disable(),d=c.getAllVariables();try{var f=a.Xml.domToBlockHeadless_(o,c),v=f.getDescendants(!1);if(c.rendered){f.setConnectionTracking(!1);for(var y=v.length-1;0<=y;y--)v[y].initSvg();for(y=v.length-1;0<=y;y--)v[y].render(!1);setTimeout(function(){f.disposed||f.setConnectionTracking(!0)},1),f.updateDisabled(),c.resizeContents()}else for(y=v.length-1;0<=y;y--)v[y].initModel()}finally{a.Events.enable()}if(a.Events.isEnabled()){for(o=a.Variables.getAddedVariables(c,d),y=0;y<o.length;y++)c=o[y],a.Events.fire(new(a.Events.get(a.Events.VAR_CREATE))(c));a.Events.fire(new(a.Events.get(a.Events.CREATE))(f))}return f},a.Xml.domToVariables=function(o,c){for(var f,d=0;f=o.childNodes[d];d++)if(f.nodeType==a.utils.dom.NodeType.ELEMENT_NODE){var v=f.getAttribute("type"),y=f.getAttribute("id");c.createVariable(f.textContent,v,y)}},a.Xml.mapSupportedXmlTags_=function(o){for(var f,c={mutation:[],comment:[],data:[],field:[],input:[],next:[]},d=0;f=o.childNodes[d];d++)if(f.nodeType!=a.utils.dom.NodeType.TEXT_NODE)switch(f.nodeName.toLowerCase()){case"mutation":c.mutation.push(f);break;case"comment":if(!a.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}c.comment.push(f);break;case"data":c.data.push(f);break;case"title":case"field":c.field.push(f);break;case"value":case"statement":c.input.push(f);break;case"next":c.next.push(f);break;default:console.warn("Ignoring unknown tag: "+f.nodeName)}return c},a.Xml.applyMutationTagNodes_=function(o,c){for(var v,d=!1,f=0;v=o[f];f++)c.domToMutation&&(c.domToMutation(v),c.initSvg&&(d=!0));return d},a.Xml.applyCommentTagNodes_=function(o,c){for(var f,d=0;f=o[d];d++){var v=f.textContent,y="true"==f.getAttribute("pinned"),D=parseInt(f.getAttribute("w"),10);f=parseInt(f.getAttribute("h"),10),c.setCommentText(v),c.commentModel.pinned=y,isNaN(D)||isNaN(f)||(c.commentModel.size=new a.utils.Size(D,f)),y&&c.getCommentIcon&&!c.isInFlyout&&setTimeout(function(){c.getCommentIcon().setVisible(!0)},1)}},a.Xml.applyDataTagNodes_=function(o,c){for(var f,d=0;f=o[d];d++)c.data=f.textContent},a.Xml.applyFieldTagNodes_=function(o,c){for(var f,d=0;f=o[d];d++){var v=f.getAttribute("name");a.Xml.domToField_(c,v,f)}},a.Xml.findChildBlocks_=function(o){for(var f,c={childBlockElement:null,childShadowElement:null},d=0;f=o.childNodes[d];d++)f.nodeType==a.utils.dom.NodeType.ELEMENT_NODE&&("block"==f.nodeName.toLowerCase()?c.childBlockElement=f:"shadow"==f.nodeName.toLowerCase()&&(c.childShadowElement=f));return c},a.Xml.applyInputTagNodes_=function(o,c,d,f){for(var y,v=0;y=o[v];v++){var D=y.getAttribute("name"),O=d.getInput(D);if(!O){console.warn("Ignoring non-existent input "+D+" in block "+f);break}if((y=a.Xml.findChildBlocks_(y)).childBlockElement){if(!O.connection)throw TypeError("Input connection does not exist.");a.Xml.domToBlockHeadless_(y.childBlockElement,c,O.connection,!1)}y.childShadowElement&&O.connection.setShadowDom(y.childShadowElement)}},a.Xml.applyNextTagNodes_=function(o,c,d){for(var v,f=0;v=o[f];f++){if((v=a.Xml.findChildBlocks_(v)).childBlockElement){if(!d.nextConnection)throw TypeError("Next statement does not exist.");if(d.nextConnection.isConnected())throw TypeError("Next statement is already connected.");a.Xml.domToBlockHeadless_(v.childBlockElement,c,d.nextConnection,!0)}v.childShadowElement&&d.nextConnection&&d.nextConnection.setShadowDom(v.childShadowElement)}},a.Xml.domToBlockHeadless_=function(o,c,d,f){var v=o.getAttribute("type");if(!v)throw TypeError("Block type unspecified: "+o.outerHTML);var y=o.getAttribute("id");y=c.newBlock(v,y);var D=a.Xml.mapSupportedXmlTags_(o),O=a.Xml.applyMutationTagNodes_(D.mutation,y);if(a.Xml.applyCommentTagNodes_(D.comment,y),a.Xml.applyDataTagNodes_(D.data,y),d)if(f){if(!y.previousConnection)throw TypeError("Next block does not have previous statement.");d.connect(y.previousConnection)}else if(y.outputConnection)d.connect(y.outputConnection);else{if(!y.previousConnection)throw TypeError("Child block does not have output or previous statement.");d.connect(y.previousConnection)}if(a.Xml.applyFieldTagNodes_(D.field,y),a.Xml.applyInputTagNodes_(D.input,c,y,v),a.Xml.applyNextTagNodes_(D.next,c,y),O&&y.initSvg(),(c=o.getAttribute("inline"))&&y.setInputsInline("true"==c),(c=o.getAttribute("disabled"))&&y.setEnabled("true"!=c&&"disabled"!=c),(c=o.getAttribute("deletable"))&&y.setDeletable("true"==c),(c=o.getAttribute("movable"))&&y.setMovable("true"==c),(c=o.getAttribute("editable"))&&y.setEditable("true"==c),(c=o.getAttribute("collapsed"))&&y.setCollapsed("true"==c),"shadow"==o.nodeName.toLowerCase()){for(o=y.getChildren(!1),c=0;d=o[c];c++)if(!d.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(y.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");y.setShadow(!0)}return y},a.Xml.domToField_=function(o,c,d){var f=o.getField(c);f?f.fromXml(d):console.warn("Ignoring non-existent field "+c+" in block "+o.type)},a.Xml.deleteNext=function(o){for(var d,c=0;d=o.childNodes[c];c++)if("next"==d.nodeName.toLowerCase()){o.removeChild(d);break}},a.Events.BlockBase=function(o){a.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===o)?"":o.id,this.workspaceId=this.isBlank?"":o.workspace.id},a.utils.object.inherits(a.Events.BlockBase,a.Events.Abstract),a.Events.BlockBase.prototype.toJson=function(){var o=a.Events.BlockBase.superClass_.toJson.call(this);return o.blockId=this.blockId,o},a.Events.BlockBase.prototype.fromJson=function(o){a.Events.BlockBase.superClass_.fromJson.call(this,o),this.blockId=o.blockId},a.Events.BlockChange=function(o,c,d,f,v){a.Events.Change.superClass_.constructor.call(this,o),o&&(this.element=void 0===c?"":c,this.name=void 0===d?"":d,this.oldValue=void 0===f?"":f,this.newValue=void 0===v?"":v)},a.utils.object.inherits(a.Events.BlockChange,a.Events.BlockBase),a.Events.Change=a.Events.BlockChange,a.Events.BlockChange.prototype.type=a.Events.CHANGE,a.Events.BlockChange.prototype.toJson=function(){var o=a.Events.BlockChange.superClass_.toJson.call(this);return o.element=this.element,this.name&&(o.name=this.name),o.oldValue=this.oldValue,o.newValue=this.newValue,o},a.Events.BlockChange.prototype.fromJson=function(o){a.Events.BlockChange.superClass_.fromJson.call(this,o),this.element=o.element,this.name=o.name,this.oldValue=o.oldValue,this.newValue=o.newValue},a.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},a.Events.BlockChange.prototype.run=function(o){var c=this.getEventWorkspace_().getBlockById(this.blockId);if(c)switch(c.mutator&&c.mutator.setVisible(!1),o=o?this.newValue:this.oldValue,this.element){case"field":(c=c.getField(this.name))?c.setValue(o):console.warn("Can't set non-existent field: "+this.name);break;case"comment":c.setCommentText(o||null);break;case"collapsed":c.setCollapsed(!!o);break;case"disabled":c.setEnabled(!o);break;case"inline":c.setInputsInline(!!o);break;case"mutation":var d="";if(c.mutationToDom&&(d=(d=c.mutationToDom())&&a.Xml.domToText(d)),c.domToMutation){var f=a.Xml.textToDom(o||"<mutation/>");c.domToMutation(f)}a.Events.fire(new a.Events.BlockChange(c,"mutation",null,d,o));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},a.Events.Create=function(o){a.Events.Create.superClass_.constructor.call(this,o),o&&(o.isShadow()&&(this.recordUndo=!1),this.xml=o.workspace.rendered?a.Xml.blockToDomWithXY(o):a.Xml.blockToDom(o),this.ids=a.Events.getDescendantIds(o))},a.utils.object.inherits(a.Events.Create,a.Events.BlockBase),a.Events.BlockCreate=a.Events.Create,a.Events.Create.prototype.type=a.Events.CREATE,a.Events.Create.prototype.toJson=function(){var o=a.Events.Create.superClass_.toJson.call(this);return o.xml=a.Xml.domToText(this.xml),o.ids=this.ids,this.recordUndo||(o.recordUndo=this.recordUndo),o},a.Events.Create.prototype.fromJson=function(o){a.Events.Create.superClass_.fromJson.call(this,o),this.xml=a.Xml.textToDom(o.xml),this.ids=o.ids,void 0!==o.recordUndo&&(this.recordUndo=o.recordUndo)},a.Events.Create.prototype.run=function(o){var c=this.getEventWorkspace_();if(o)(o=a.utils.xml.createElement("xml")).appendChild(this.xml),a.Xml.domToWorkspace(o,c);else{o=0;for(var d;d=this.ids[o];o++){var f=c.getBlockById(d);f?f.dispose(!1):d==this.blockId&&console.warn("Can't uncreate non-existent block: "+d)}}},a.Events.Delete=function(o){if(a.Events.Delete.superClass_.constructor.call(this,o),o){if(o.getParent())throw Error("Connected blocks cannot be deleted.");o.isShadow()&&(this.recordUndo=!1),this.oldXml=o.workspace.rendered?a.Xml.blockToDomWithXY(o):a.Xml.blockToDom(o),this.ids=a.Events.getDescendantIds(o)}},a.utils.object.inherits(a.Events.Delete,a.Events.BlockBase),a.Events.BlockDelete=a.Events.Delete,a.Events.Delete.prototype.type=a.Events.DELETE,a.Events.Delete.prototype.toJson=function(){var o=a.Events.Delete.superClass_.toJson.call(this);return o.oldXml=a.Xml.domToText(this.oldXml),o.ids=this.ids,this.recordUndo||(o.recordUndo=this.recordUndo),o},a.Events.Delete.prototype.fromJson=function(o){a.Events.Delete.superClass_.fromJson.call(this,o),this.oldXml=a.Xml.textToDom(o.oldXml),this.ids=o.ids,void 0!==o.recordUndo&&(this.recordUndo=o.recordUndo)},a.Events.Delete.prototype.run=function(o){var c=this.getEventWorkspace_();if(o){o=0;for(var d;d=this.ids[o];o++){var f=c.getBlockById(d);f?f.dispose(!1):d==this.blockId&&console.warn("Can't delete non-existent block: "+d)}}else(o=a.utils.xml.createElement("xml")).appendChild(this.oldXml),a.Xml.domToWorkspace(o,c)},a.Events.Move=function(o){a.Events.Move.superClass_.constructor.call(this,o),o&&(o.isShadow()&&(this.recordUndo=!1),o=this.currentLocation_(),this.oldParentId=o.parentId,this.oldInputName=o.inputName,this.oldCoordinate=o.coordinate)},a.utils.object.inherits(a.Events.Move,a.Events.BlockBase),a.Events.BlockMove=a.Events.Move,a.Events.Move.prototype.type=a.Events.MOVE,a.Events.Move.prototype.toJson=function(){var o=a.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(o.newParentId=this.newParentId),this.newInputName&&(o.newInputName=this.newInputName),this.newCoordinate&&(o.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(o.recordUndo=this.recordUndo),o},a.Events.Move.prototype.fromJson=function(o){if(a.Events.Move.superClass_.fromJson.call(this,o),this.newParentId=o.newParentId,this.newInputName=o.newInputName,o.newCoordinate){var c=o.newCoordinate.split(",");this.newCoordinate=new a.utils.Coordinate(Number(c[0]),Number(c[1]))}void 0!==o.recordUndo&&(this.recordUndo=o.recordUndo)},a.Events.Move.prototype.recordNew=function(){var o=this.currentLocation_();this.newParentId=o.parentId,this.newInputName=o.inputName,this.newCoordinate=o.coordinate},a.Events.Move.prototype.currentLocation_=function(){var o=this.getEventWorkspace_().getBlockById(this.blockId),c={},d=o.getParent();return d?(c.parentId=d.id,(o=d.getInputWithBlock(o))&&(c.inputName=o.name)):c.coordinate=o.getRelativeToSurfaceXY(),c},a.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&a.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},a.Events.Move.prototype.run=function(o){var c=this.getEventWorkspace_(),d=c.getBlockById(this.blockId);if(d){var f=o?this.newParentId:this.oldParentId,v=o?this.newInputName:this.oldInputName,y=o?this.newCoordinate:this.oldCoordinate;if(o=null,f&&!(o=c.getBlockById(f)))return void console.warn("Can't connect to non-existent block: "+f);if(d.getParent()&&d.unplug(),y)v=d.getRelativeToSurfaceXY(),d.moveBy(y.x-v.x,y.y-v.y);else{if(c=(d=d.outputConnection||d.previousConnection).type,v){if(o=o.getInput(v))var D=o.connection}else c==a.connectionTypes.PREVIOUS_STATEMENT&&(D=o.nextConnection);D?d.connect(D):console.warn("Can't connect to non-existent input: "+v)}}else console.warn("Can't move non-existent block: "+this.blockId)},a.registry.register(a.registry.Type.EVENT,a.Events.CREATE,a.Events.Create),a.registry.register(a.registry.Type.EVENT,a.Events.DELETE,a.Events.Delete),a.registry.register(a.registry.Type.EVENT,a.Events.CHANGE,a.Events.BlockChange),a.registry.register(a.registry.Type.EVENT,a.Events.MOVE,a.Events.Move),a.Events.FinishedLoading=function(o){this.isBlank=void 0===o,this.workspaceId=o?o.id:"",this.group=a.Events.getGroup(),this.recordUndo=!1},a.utils.object.inherits(a.Events.FinishedLoading,a.Events.Abstract),a.Events.FinishedLoading.prototype.type=a.Events.FINISHED_LOADING,a.Events.FinishedLoading.prototype.toJson=function(){var o={type:this.type};return this.group&&(o.group=this.group),this.workspaceId&&(o.workspaceId=this.workspaceId),o},a.Events.FinishedLoading.prototype.fromJson=function(o){this.isBlank=!1,this.workspaceId=o.workspaceId,this.group=o.group},a.registry.register(a.registry.Type.EVENT,a.Events.FINISHED_LOADING,a.Events.FinishedLoading),a.Events.UiBase=function(o){a.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===o,this.workspaceId=o||"",this.recordUndo=!1},a.utils.object.inherits(a.Events.UiBase,a.Events.Abstract),a.Events.UiBase.prototype.isUiEvent=!0,a.Events.Ui=function(o,c,d,f){a.Events.Ui.superClass_.constructor.call(this,o?o.workspace.id:void 0),this.blockId=o?o.id:null,this.element=void 0===c?"":c,this.oldValue=void 0===d?"":d,this.newValue=void 0===f?"":f},a.utils.object.inherits(a.Events.Ui,a.Events.UiBase),a.Events.Ui.prototype.type=a.Events.UI,a.Events.Ui.prototype.toJson=function(){var o=a.Events.Ui.superClass_.toJson.call(this);return o.element=this.element,void 0!==this.newValue&&(o.newValue=this.newValue),this.blockId&&(o.blockId=this.blockId),o},a.Events.Ui.prototype.fromJson=function(o){a.Events.Ui.superClass_.fromJson.call(this,o),this.element=o.element,this.newValue=o.newValue,this.blockId=o.blockId},a.registry.register(a.registry.Type.EVENT,a.Events.UI,a.Events.Ui),a.Events.VarBase=function(o){a.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===o)?"":o.getId(),this.workspaceId=this.isBlank?"":o.workspace.id},a.utils.object.inherits(a.Events.VarBase,a.Events.Abstract),a.Events.VarBase.prototype.toJson=function(){var o=a.Events.VarBase.superClass_.toJson.call(this);return o.varId=this.varId,o},a.Events.VarBase.prototype.fromJson=function(o){a.Events.VarBase.superClass_.toJson.call(this),this.varId=o.varId},a.Events.VarCreate=function(o){a.Events.VarCreate.superClass_.constructor.call(this,o),o&&(this.varType=o.type,this.varName=o.name)},a.utils.object.inherits(a.Events.VarCreate,a.Events.VarBase),a.Events.VarCreate.prototype.type=a.Events.VAR_CREATE,a.Events.VarCreate.prototype.toJson=function(){var o=a.Events.VarCreate.superClass_.toJson.call(this);return o.varType=this.varType,o.varName=this.varName,o},a.Events.VarCreate.prototype.fromJson=function(o){a.Events.VarCreate.superClass_.fromJson.call(this,o),this.varType=o.varType,this.varName=o.varName},a.Events.VarCreate.prototype.run=function(o){var c=this.getEventWorkspace_();o?c.createVariable(this.varName,this.varType,this.varId):c.deleteVariableById(this.varId)},a.Events.VarDelete=function(o){a.Events.VarDelete.superClass_.constructor.call(this,o),o&&(this.varType=o.type,this.varName=o.name)},a.utils.object.inherits(a.Events.VarDelete,a.Events.VarBase),a.Events.VarDelete.prototype.type=a.Events.VAR_DELETE,a.Events.VarDelete.prototype.toJson=function(){var o=a.Events.VarDelete.superClass_.toJson.call(this);return o.varType=this.varType,o.varName=this.varName,o},a.Events.VarDelete.prototype.fromJson=function(o){a.Events.VarDelete.superClass_.fromJson.call(this,o),this.varType=o.varType,this.varName=o.varName},a.Events.VarDelete.prototype.run=function(o){var c=this.getEventWorkspace_();o?c.deleteVariableById(this.varId):c.createVariable(this.varName,this.varType,this.varId)},a.Events.VarRename=function(o,c){a.Events.VarRename.superClass_.constructor.call(this,o),o&&(this.oldName=o.name,this.newName=void 0===c?"":c)},a.utils.object.inherits(a.Events.VarRename,a.Events.VarBase),a.Events.VarRename.prototype.type=a.Events.VAR_RENAME,a.Events.VarRename.prototype.toJson=function(){var o=a.Events.VarRename.superClass_.toJson.call(this);return o.oldName=this.oldName,o.newName=this.newName,o},a.Events.VarRename.prototype.fromJson=function(o){a.Events.VarRename.superClass_.fromJson.call(this,o),this.oldName=o.oldName,this.newName=o.newName},a.Events.VarRename.prototype.run=function(o){this.getEventWorkspace_().renameVariableById(this.varId,o?this.newName:this.oldName)},a.registry.register(a.registry.Type.EVENT,a.Events.VAR_CREATE,a.Events.VarCreate),a.registry.register(a.registry.Type.EVENT,a.Events.VAR_DELETE,a.Events.VarDelete),a.registry.register(a.registry.Type.EVENT,a.Events.VAR_RENAME,a.Events.VarRename),a.BlockDragSurfaceSvg=function(o){this.container_=o,this.createDom()},a.BlockDragSurfaceSvg.prototype.SVG_=null,a.BlockDragSurfaceSvg.prototype.dragGroup_=null,a.BlockDragSurfaceSvg.prototype.container_=null,a.BlockDragSurfaceSvg.prototype.scale_=1,a.BlockDragSurfaceSvg.prototype.surfaceXY_=null,a.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new a.utils.Coordinate(0,0),a.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=a.utils.dom.createSvgElement(a.utils.Svg.SVG,{xmlns:a.utils.dom.SVG_NS,"xmlns:html":a.utils.dom.HTML_NS,"xmlns:xlink":a.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{},this.SVG_))},a.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(o){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(o),this.SVG_.style.display="block",this.surfaceXY_=new a.utils.Coordinate(0,0)},a.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(o,c,d){this.scale_=d,o=o.toFixed(0),c=c.toFixed(0),this.childSurfaceXY_.x=parseInt(o,10),this.childSurfaceXY_.y=parseInt(c,10),this.dragGroup_.setAttribute("transform","translate("+o+","+c+") scale("+d+")")},a.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var o=this.surfaceXY_.x,c=this.surfaceXY_.y;o=o.toFixed(0),c=c.toFixed(0),this.SVG_.style.display="block",a.utils.dom.setCssTransform(this.SVG_,"translate3d("+o+"px, "+c+"px, 0px)")},a.BlockDragSurfaceSvg.prototype.translateBy=function(o,c){this.surfaceXY_=new a.utils.Coordinate(this.surfaceXY_.x+o,this.surfaceXY_.y+c),this.translateSurfaceInternal_()},a.BlockDragSurfaceSvg.prototype.translateSurface=function(o,c){this.surfaceXY_=new a.utils.Coordinate(o*this.scale_,c*this.scale_),this.translateSurfaceInternal_()},a.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var o=a.utils.getRelativeXY(this.SVG_);return new a.utils.Coordinate(o.x/this.scale_,o.y/this.scale_)},a.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},a.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},a.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},a.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},a.BlockDragSurfaceSvg.prototype.clearAndHide=function(o){if(o?o.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},a.Css={},a.Css.injected_=!1,a.Css.register=function(o){if(a.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(a.Css.CONTENT,o),o.length=0},a.Css.inject=function(o,c){if(!a.Css.injected_){a.Css.injected_=!0;var d=a.Css.CONTENT.join("\n");a.Css.CONTENT.length=0,o&&(o=c.replace(/[\\/]$/,""),d=d.replace(/<<<PATH>>>/g,o),(o=document.createElement("style")).id="blockly-common-style",d=document.createTextNode(d),o.appendChild(d),document.head.insertBefore(o,document.head.firstChild))}},a.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],a.Grid=function(o,c){this.gridPattern_=o,this.spacing_=c.spacing,this.length_=c.length,this.line2_=(this.line1_=o.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=c.snap},a.Grid.prototype.scale_=1,a.Grid.prototype.dispose=function(){this.gridPattern_=null},a.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},a.Grid.prototype.getSpacing=function(){return this.spacing_},a.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},a.Grid.prototype.update=function(o){this.scale_=o;var c=this.spacing_*o||100;this.gridPattern_.setAttribute("width",c),this.gridPattern_.setAttribute("height",c);var d=(c=Math.floor(this.spacing_/2)+.5)-this.length_/2,f=c+this.length_/2;this.setLineAttributes_(this.line1_,o,d*=o,f*=o,c*=o,c),this.setLineAttributes_(this.line2_,o,c,c,d,f)},a.Grid.prototype.setLineAttributes_=function(o,c,d,f,v,y){o&&(o.setAttribute("stroke-width",c),o.setAttribute("x1",d),o.setAttribute("y1",v),o.setAttribute("x2",f),o.setAttribute("y2",y))},a.Grid.prototype.moveTo=function(o,c){this.gridPattern_.setAttribute("x",o),this.gridPattern_.setAttribute("y",c),(a.utils.userAgent.IE||a.utils.userAgent.EDGE)&&this.update(this.scale_)},a.Grid.createDom=function(o,c,d){return o=a.utils.dom.createSvgElement(a.utils.Svg.PATTERN,{id:"blocklyGridPattern"+o,patternUnits:"userSpaceOnUse"},d),0<c.length&&0<c.spacing?(a.utils.dom.createSvgElement(a.utils.Svg.LINE,{stroke:c.colour},o),1<c.length&&a.utils.dom.createSvgElement(a.utils.Svg.LINE,{stroke:c.colour},o)):a.utils.dom.createSvgElement(a.utils.Svg.LINE,{},o),o},a.Theme=function(o,c,d,f){this.name=o,this.blockStyles=c||Object.create(null),this.categoryStyles=d||Object.create(null),this.componentStyles=f||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,a.registry.register(a.registry.Type.THEME,o,this)},a.Theme.prototype.getClassName=function(){return this.name+"-theme"},a.Theme.prototype.setBlockStyle=function(o,c){this.blockStyles[o]=c},a.Theme.prototype.setCategoryStyle=function(o,c){this.categoryStyles[o]=c},a.Theme.prototype.getComponentStyle=function(o){return(o=this.componentStyles[o])&&"string"==typeof o&&this.getComponentStyle(o)?this.getComponentStyle(o):o?String(o):null},a.Theme.prototype.setComponentStyle=function(o,c){this.componentStyles[o]=c},a.Theme.prototype.setFontStyle=function(o){this.fontStyle=o},a.Theme.prototype.setStartHats=function(o){this.startHats=o},a.Theme.defineTheme=function(o,c){var d=new a.Theme(o),f=c.base;return f&&("string"==typeof f&&(f=a.registry.getObject(a.registry.Type.THEME,f)),f instanceof a.Theme&&(a.utils.object.deepMerge(d,f),d.name=o)),a.utils.object.deepMerge(d.blockStyles,c.blockStyles),a.utils.object.deepMerge(d.categoryStyles,c.categoryStyles),a.utils.object.deepMerge(d.componentStyles,c.componentStyles),a.utils.object.deepMerge(d.fontStyle,c.fontStyle),null!=c.startHats&&(d.startHats=c.startHats),d},a.Themes={},a.Themes.Classic={},a.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},a.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},a.Themes.Classic=new a.Theme("classic",a.Themes.Classic.defaultBlockStyles,a.Themes.Classic.categoryStyles),a.utils.IdGenerator={},a.utils.IdGenerator.nextId_=0,a.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(a.utils.IdGenerator.nextId_++).toString(36)},a.utils.Metrics=function(){},a.utils.toolbox={},a.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",a.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",a.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},a.utils.toolbox.convertToolboxDefToJson=function(o){return o?((o instanceof Element||"string"==typeof o)&&(o=a.utils.toolbox.parseToolboxTree(o),o=a.utils.toolbox.convertToToolboxJson_(o)),a.utils.toolbox.validateToolbox_(o),o):null},a.utils.toolbox.validateToolbox_=function(o){var c=o.kind;if(o=o.contents,c&&c!=a.utils.toolbox.FLYOUT_TOOLBOX_KIND&&c!=a.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+c+". Please supply either "+a.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+a.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!o)throw Error("Toolbox must have a contents attribute.")},a.utils.toolbox.convertFlyoutDefToJsonArray=function(o){return o?o.contents?o.contents:Array.isArray(o)&&0<o.length&&!o[0].nodeType?o:a.utils.toolbox.xmlToJsonArray_(o):[]},a.utils.toolbox.hasCategories=function(o){if(!o)return!1;var c=o.kind;return c?c==a.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!o.contents.filter(function(d){return"CATEGORY"==d.kind.toUpperCase()}).length},a.utils.toolbox.isCategoryCollapsible=function(o){return!(!o||!o.contents||!o.contents.filter(function(c){return"CATEGORY"==c.kind.toUpperCase()}).length)},a.utils.toolbox.convertToToolboxJson_=function(o){var c={contents:a.utils.toolbox.xmlToJsonArray_(o)};return o instanceof Node&&a.utils.toolbox.addAttributes_(o,c),c},a.utils.toolbox.xmlToJsonArray_=function(o){var f,c=[],d=o.childNodes;for(d||(d=o),o=0;f=d[o];o++)if(f.tagName){var v={},y=f.tagName.toUpperCase();v.kind=y,"BLOCK"==y?v.blockxml=f:f.childNodes&&0<f.childNodes.length&&(v.contents=a.utils.toolbox.xmlToJsonArray_(f)),a.utils.toolbox.addAttributes_(f,v),c.push(v)}return c},a.utils.toolbox.addAttributes_=function(o,c){for(var d=0;d<o.attributes.length;d++){var f=o.attributes[d];-1<f.nodeName.indexOf("css-")?(c.cssconfig=c.cssconfig||{},c.cssconfig[f.nodeName.replace("css-","")]=f.value):c[f.nodeName]=f.value}},a.utils.toolbox.parseToolboxTree=function(o){if(o){if("string"!=typeof o&&(a.utils.userAgent.IE&&o.outerHTML?o=o.outerHTML:o instanceof Element||(o=null)),"string"==typeof o&&"xml"!=(o=a.Xml.textToDom(o)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else o=null;return o},a.Options=function(o){var c=!!o.readOnly;if(c)var d=null,f=!1,v=!1,y=!1,D=!1,O=!1,U=!1;else{d=a.utils.toolbox.convertToolboxDefToJson(o.toolbox),f=a.utils.toolbox.hasCategories(d),void 0===(v=o.trashcan)&&(v=f);var X=o.maxTrashcanContents;v?void 0===X&&(X=32):X=0,void 0===(y=o.collapse)&&(y=f),void 0===(D=o.comments)&&(D=f),void 0===(O=o.disable)&&(O=f),void 0===(U=o.sounds)&&(U=!0)}var H=!!o.rtl,ne=o.horizontalLayout;void 0===ne&&(ne=!1);var ee=o.toolboxPosition;ee="end"!==ee,ee=ne?ee?a.utils.toolbox.Position.TOP:a.utils.toolbox.Position.BOTTOM:ee==H?a.utils.toolbox.Position.RIGHT:a.utils.toolbox.Position.LEFT;var J=o.css;void 0===J&&(J=!0);var ue="https://blockly-demo.appspot.com/static/media/";o.media?ue=o.media:o.path&&(ue=o.path+"media/");var se=void 0===o.oneBasedIndex||!!o.oneBasedIndex,_e=o.renderer||"geras",re=o.plugins||{};this.RTL=H,this.oneBasedIndex=se,this.collapse=y,this.comments=D,this.disable=O,this.readOnly=c,this.maxBlocks=o.maxBlocks||1/0,this.maxInstances=o.maxInstances,this.pathToMedia=ue,this.hasCategories=f,this.moveOptions=a.Options.parseMoveOptions_(o,f),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=v,this.maxTrashcanContents=X,this.hasSounds=U,this.hasCss=J,this.horizontalLayout=ne,this.languageTree=d,this.gridOptions=a.Options.parseGridOptions_(o),this.zoomOptions=a.Options.parseZoomOptions_(o),this.toolboxPosition=ee,this.theme=a.Options.parseThemeOptions_(o),this.renderer=_e,this.rendererOverrides=o.rendererOverrides,this.gridPattern=null,this.parentWorkspace=o.parentWorkspace,this.plugins=re},a.BlocklyOptions=function(){},a.Options.parseMoveOptions_=function(o,c){var d=o.move||{},f={};return void 0===d.scrollbars&&void 0===o.scrollbars?f.scrollbars=c:"object"==typeof d.scrollbars?(f.scrollbars={},f.scrollbars.horizontal=!!d.scrollbars.horizontal,f.scrollbars.vertical=!!d.scrollbars.vertical,f.scrollbars.horizontal&&f.scrollbars.vertical?f.scrollbars=!0:f.scrollbars.horizontal||f.scrollbars.vertical||(f.scrollbars=!1)):f.scrollbars=!!d.scrollbars||!!o.scrollbars,f.wheel=f.scrollbars&&void 0!==d.wheel?!!d.wheel:"object"==typeof f.scrollbars,f.drag=!(!f.scrollbars||void 0!==d.drag&&!d.drag),f},a.Options.parseZoomOptions_=function(o){var c={};return c.controls=void 0!==(o=o.zoom||{}).controls&&!!o.controls,c.wheel=void 0!==o.wheel&&!!o.wheel,c.startScale=void 0===o.startScale?1:Number(o.startScale),c.maxScale=void 0===o.maxScale?3:Number(o.maxScale),c.minScale=void 0===o.minScale?.3:Number(o.minScale),c.scaleSpeed=void 0===o.scaleSpeed?1.2:Number(o.scaleSpeed),c.pinch=void 0===o.pinch?c.wheel||c.controls:!!o.pinch,c},a.Options.parseGridOptions_=function(o){o=o.grid||{};var c={};return c.spacing=Number(o.spacing)||0,c.colour=o.colour||"#888",c.length=void 0===o.length?1:Number(o.length),c.snap=0<c.spacing&&!!o.snap,c},a.Options.parseThemeOptions_=function(o){return"string"==typeof(o=o.theme||a.Themes.Classic)?a.registry.getObject(a.registry.Type.THEME,o):o instanceof a.Theme?o:a.Theme.defineTheme(o.name||"builtin"+a.utils.IdGenerator.getNextUniqueId(),o)},a.Options.parseToolboxTree=function(o){return a.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),a.utils.toolbox.parseToolboxTree(o)},a.ScrollbarPair=function(o,c,d,f,v){this.workspace_=o,d=void 0===d||d;var y=(c=void 0===c||c)&&d;c&&(this.hScroll=new a.Scrollbar(o,!0,y,f,v)),d&&(this.vScroll=new a.Scrollbar(o,!1,y,f,v)),y&&(this.corner_=a.utils.dom.createSvgElement(a.utils.Svg.RECT,{height:a.Scrollbar.scrollbarThickness,width:a.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),a.utils.dom.insertAfter(this.corner_,o.getBubbleCanvas())),this.oldHostMetrics_=null},a.ScrollbarPair.prototype.dispose=function(){a.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},a.ScrollbarPair.prototype.resize=function(){var o=this.workspace_.getMetrics();if(o){var c=!1,d=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==o.viewWidth&&this.oldHostMetrics_.viewHeight==o.viewHeight&&this.oldHostMetrics_.absoluteTop==o.absoluteTop&&this.oldHostMetrics_.absoluteLeft==o.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==o.scrollWidth&&this.oldHostMetrics_.viewLeft==o.viewLeft&&this.oldHostMetrics_.scrollLeft==o.scrollLeft||(c=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==o.scrollHeight&&this.oldHostMetrics_.viewTop==o.viewTop&&this.oldHostMetrics_.scrollTop==o.scrollTop||(d=!0)):d=c=!0,c||d){try{a.Events.disable(),this.hScroll&&c&&this.hScroll.resize(o),this.vScroll&&d&&this.vScroll.resize(o)}finally{a.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==o.viewWidth&&this.oldHostMetrics_.absoluteLeft==o.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==o.viewHeight&&this.oldHostMetrics_.absoluteTop==o.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=o}},a.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},a.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},a.ScrollbarPair.prototype.setOrigin=function(o,c){this.hScroll&&this.hScroll.setOrigin(o,c),this.vScroll&&this.vScroll.setOrigin(o,c)},a.ScrollbarPair.prototype.set=function(o,c,d){this.hScroll&&this.hScroll.set(o,!1),this.vScroll&&this.vScroll.set(c,!1),(d||void 0===d)&&(o={},this.hScroll&&(o.x=this.hScroll.getRatio_()),this.vScroll&&(o.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(o))},a.ScrollbarPair.prototype.setX=function(o){this.hScroll&&this.hScroll.set(o,!0)},a.ScrollbarPair.prototype.setY=function(o){this.vScroll&&this.vScroll.set(o,!0)},a.ScrollbarPair.prototype.setContainerVisible=function(o){this.hScroll&&this.hScroll.setContainerVisible(o),this.vScroll&&this.vScroll.setContainerVisible(o)},a.ScrollbarPair.prototype.isVisible=function(){var o=!1;return this.hScroll&&(o=this.hScroll.isVisible()),this.vScroll&&(o=o||this.vScroll.isVisible()),o},a.ScrollbarPair.prototype.resizeContent=function(o){this.hScroll&&this.hScroll.resizeContentHorizontal(o),this.vScroll&&this.vScroll.resizeContentVertical(o)},a.ScrollbarPair.prototype.resizeView=function(o){this.hScroll&&this.hScroll.resizeViewHorizontal(o),this.vScroll&&this.vScroll.resizeViewVertical(o)},a.Scrollbar=function(o,c,d,f,v){this.workspace_=o,this.pair_=d||!1,this.horizontal_=c,this.margin_=void 0!==v?v:a.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(f),this.position=new a.utils.Coordinate(0,0),o=a.Scrollbar.scrollbarThickness,c?(this.svgBackground_.setAttribute("height",o),this.outerSvg_.setAttribute("height",o),this.svgHandle_.setAttribute("height",o-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",o),this.outerSvg_.setAttribute("width",o),this.svgHandle_.setAttribute("width",o-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=a.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=a.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},a.Scrollbar.prototype.origin_=new a.utils.Coordinate(0,0),a.Scrollbar.prototype.startDragMouse_=0,a.Scrollbar.prototype.scrollbarLength_=0,a.Scrollbar.prototype.handleLength_=0,a.Scrollbar.prototype.handlePosition_=0,a.Scrollbar.prototype.isVisible_=!0,a.Scrollbar.prototype.containerVisible_=!0,a.Scrollbar.scrollbarThickness=15,a.Touch.TOUCH_ENABLED&&(a.Scrollbar.scrollbarThickness=25),a.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,a.Scrollbar.metricsAreEquivalent_=function(o,c){return o.viewWidth==c.viewWidth&&o.viewHeight==c.viewHeight&&o.viewLeft==c.viewLeft&&o.viewTop==c.viewTop&&o.absoluteTop==c.absoluteTop&&o.absoluteLeft==c.absoluteLeft&&o.scrollWidth==c.scrollWidth&&o.scrollHeight==c.scrollHeight&&o.scrollLeft==c.scrollLeft&&o.scrollTop==c.scrollTop},a.Scrollbar.prototype.dispose=function(){this.cleanUp_(),a.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,a.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,a.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},a.Scrollbar.prototype.constrainHandleLength_=function(o){return 0>=o||isNaN(o)?0:Math.min(o,this.scrollbarLength_)},a.Scrollbar.prototype.setHandleLength_=function(o){this.handleLength_=o,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},a.Scrollbar.prototype.constrainHandlePosition_=function(o){return 0>=o||isNaN(o)?0:Math.min(o,this.scrollbarLength_-this.handleLength_)},a.Scrollbar.prototype.setHandlePosition=function(o){this.handlePosition_=o,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},a.Scrollbar.prototype.setScrollbarLength_=function(o){this.scrollbarLength_=o,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},a.Scrollbar.prototype.setPosition=function(o,c){this.position.x=o,this.position.y=c,a.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},a.Scrollbar.prototype.resize=function(o){!o&&!(o=this.workspace_.getMetrics())||this.oldHostMetrics_&&a.Scrollbar.metricsAreEquivalent_(o,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(o):this.resizeVertical_(o),this.oldHostMetrics_=o,this.updateMetrics_())},a.Scrollbar.prototype.requiresViewResize_=function(o){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==o.viewWidth||this.oldHostMetrics_.viewHeight!==o.viewHeight||this.oldHostMetrics_.absoluteLeft!==o.absoluteLeft||this.oldHostMetrics_.absoluteTop!==o.absoluteTop},a.Scrollbar.prototype.resizeHorizontal_=function(o){this.requiresViewResize_(o)?this.resizeViewHorizontal(o):this.resizeContentHorizontal(o)},a.Scrollbar.prototype.resizeViewHorizontal=function(o){var c=o.viewWidth-2*this.margin_;this.pair_&&(c-=a.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,c)),c=o.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(c+=a.Scrollbar.scrollbarThickness),this.setPosition(c,o.absoluteTop+o.viewHeight-a.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(o)},a.Scrollbar.prototype.resizeContentHorizontal=function(o){if(o.viewWidth>=o.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var c=this.scrollbarLength_*o.viewWidth/o.scrollWidth;c=this.constrainHandleLength_(c),this.setHandleLength_(c);var d=this.scrollbarLength_-this.handleLength_;o=this.constrainHandlePosition_(o=(o.viewLeft-o.scrollLeft)/(c=o.scrollWidth-o.viewWidth)*d),this.setHandlePosition(o),this.ratio=d/c}},a.Scrollbar.prototype.resizeVertical_=function(o){this.requiresViewResize_(o)?this.resizeViewVertical(o):this.resizeContentVertical(o)},a.Scrollbar.prototype.resizeViewVertical=function(o){var c=o.viewHeight-2*this.margin_;this.pair_&&(c-=a.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,c)),this.setPosition(this.workspace_.RTL?o.absoluteLeft+this.margin_:o.absoluteLeft+o.viewWidth-a.Scrollbar.scrollbarThickness-this.margin_,o.absoluteTop+this.margin_),this.resizeContentVertical(o)},a.Scrollbar.prototype.resizeContentVertical=function(o){if(o.viewHeight>=o.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var c=this.scrollbarLength_*o.viewHeight/o.scrollHeight;c=this.constrainHandleLength_(c),this.setHandleLength_(c);var d=this.scrollbarLength_-this.handleLength_;o=this.constrainHandlePosition_(o=(o.viewTop-o.scrollTop)/(c=o.scrollHeight-o.viewHeight)*d),this.setHandlePosition(o),this.ratio=d/c}},a.Scrollbar.prototype.createDom_=function(o){var c="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");o&&(c+=" "+o),this.outerSvg_=a.utils.dom.createSvgElement(a.utils.Svg.SVG,{class:c},null),this.svgGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),o=Math.floor((a.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:o,ry:o},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),a.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},a.Scrollbar.prototype.isVisible=function(){return this.isVisible_},a.Scrollbar.prototype.setContainerVisible=function(o){var c=o!=this.containerVisible_;this.containerVisible_=o,c&&this.updateDisplay_()},a.Scrollbar.prototype.setVisible=function(o){var c=o!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=o,c&&this.updateDisplay_()},a.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},a.Scrollbar.prototype.onMouseDownBar_=function(o){if(this.workspace_.markFocused(),a.Touch.clearTouchIdentifier(),this.cleanUp_(),a.utils.isRightButton(o))o.stopPropagation();else{var c=a.utils.mouseToSvg(o,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());c=this.horizontal_?c.x:c.y;var d=a.utils.getInjectionDivXY_(this.svgHandle_),f=this.handlePosition_,v=.95*this.handleLength_;c<=(d=this.horizontal_?d.x:d.y)?f-=v:c>=d+this.handleLength_&&(f+=v),this.setHandlePosition(this.constrainHandlePosition_(f)),this.updateMetrics_(),o.stopPropagation(),o.preventDefault()}},a.Scrollbar.prototype.onMouseDownHandle_=function(o){this.workspace_.markFocused(),this.cleanUp_(),a.utils.isRightButton(o)?o.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?o.clientX:o.clientY,a.Scrollbar.onMouseUpWrapper_=a.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),a.Scrollbar.onMouseMoveWrapper_=a.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),o.stopPropagation(),o.preventDefault())},a.Scrollbar.prototype.onMouseMoveHandle_=function(o){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?o.clientX:o.clientY)-this.startDragMouse_))),this.updateMetrics_()},a.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),a.Touch.clearTouchIdentifier(),this.cleanUp_()},a.Scrollbar.prototype.cleanUp_=function(){a.hideChaff(!0),a.Scrollbar.onMouseUpWrapper_&&(a.browserEvents.unbind(a.Scrollbar.onMouseUpWrapper_),a.Scrollbar.onMouseUpWrapper_=null),a.Scrollbar.onMouseMoveWrapper_&&(a.browserEvents.unbind(a.Scrollbar.onMouseMoveWrapper_),a.Scrollbar.onMouseMoveWrapper_=null)},a.Scrollbar.prototype.getRatio_=function(){var o=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(o)&&(o=0),o},a.Scrollbar.prototype.updateMetrics_=function(){var o=this.getRatio_(),c={};this.horizontal_?c.x=o:c.y=o,this.workspace_.setMetrics(c)},a.Scrollbar.prototype.set=function(o,c){this.setHandlePosition(this.constrainHandlePosition_(o*this.ratio)),(c||void 0===c)&&this.updateMetrics_()},a.Scrollbar.prototype.setOrigin=function(o,c){this.origin_=new a.utils.Coordinate(o,c)},a.Tooltip={},a.Tooltip.visible=!1,a.Tooltip.blocked_=!1,a.Tooltip.LIMIT=50,a.Tooltip.mouseOutPid_=0,a.Tooltip.showPid_=0,a.Tooltip.lastX_=0,a.Tooltip.lastY_=0,a.Tooltip.element_=null,a.Tooltip.poisonedElement_=null,a.Tooltip.OFFSET_X=0,a.Tooltip.OFFSET_Y=10,a.Tooltip.RADIUS_OK=10,a.Tooltip.HOVER_MS=750,a.Tooltip.MARGINS=5,a.Tooltip.DIV=null,a.Tooltip.getTooltipOfObject=function(o){if(o=a.Tooltip.getTargetObject_(o)){for(o=o.tooltip;"function"==typeof o;)o=o();if("string"!=typeof o)throw Error("Tooltip function must return a string.");return o}return""},a.Tooltip.getTargetObject_=function(o){for(;o&&o.tooltip;){if("string"==typeof o.tooltip||"function"==typeof o.tooltip)return o;o=o.tooltip}return null},a.Tooltip.createDom=function(){a.Tooltip.DIV||(a.Tooltip.DIV=document.createElement("div"),a.Tooltip.DIV.className="blocklyTooltipDiv",(a.parentContainer||document.body).appendChild(a.Tooltip.DIV))},a.Tooltip.bindMouseEvents=function(o){o.mouseOverWrapper_=a.browserEvents.bind(o,"mouseover",null,a.Tooltip.onMouseOver_),o.mouseOutWrapper_=a.browserEvents.bind(o,"mouseout",null,a.Tooltip.onMouseOut_),o.addEventListener("mousemove",a.Tooltip.onMouseMove_,!1)},a.Tooltip.unbindMouseEvents=function(o){o&&(a.browserEvents.unbind(o.mouseOverWrapper_),a.browserEvents.unbind(o.mouseOutWrapper_),o.removeEventListener("mousemove",a.Tooltip.onMouseMove_))},a.Tooltip.onMouseOver_=function(o){a.Tooltip.blocked_||(o=a.Tooltip.getTargetObject_(o.currentTarget),a.Tooltip.element_!=o&&(a.Tooltip.hide(),a.Tooltip.poisonedElement_=null,a.Tooltip.element_=o),clearTimeout(a.Tooltip.mouseOutPid_))},a.Tooltip.onMouseOut_=function(o){a.Tooltip.blocked_||(a.Tooltip.mouseOutPid_=setTimeout(function(){a.Tooltip.element_=null,a.Tooltip.poisonedElement_=null,a.Tooltip.hide()},1),clearTimeout(a.Tooltip.showPid_))},a.Tooltip.onMouseMove_=function(o){if(a.Tooltip.element_&&a.Tooltip.element_.tooltip&&!a.Tooltip.blocked_)if(a.Tooltip.visible){var c=a.Tooltip.lastX_-o.pageX;o=a.Tooltip.lastY_-o.pageY,Math.sqrt(c*c+o*o)>a.Tooltip.RADIUS_OK&&a.Tooltip.hide()}else a.Tooltip.poisonedElement_!=a.Tooltip.element_&&(clearTimeout(a.Tooltip.showPid_),a.Tooltip.lastX_=o.pageX,a.Tooltip.lastY_=o.pageY,a.Tooltip.showPid_=setTimeout(a.Tooltip.show_,a.Tooltip.HOVER_MS))},a.Tooltip.dispose=function(){a.Tooltip.element_=null,a.Tooltip.poisonedElement_=null,a.Tooltip.hide()},a.Tooltip.hide=function(){a.Tooltip.visible&&(a.Tooltip.visible=!1,a.Tooltip.DIV&&(a.Tooltip.DIV.style.display="none")),a.Tooltip.showPid_&&clearTimeout(a.Tooltip.showPid_)},a.Tooltip.block=function(){a.Tooltip.hide(),a.Tooltip.blocked_=!0},a.Tooltip.unblock=function(){a.Tooltip.blocked_=!1},a.Tooltip.show_=function(){if(!a.Tooltip.blocked_&&(a.Tooltip.poisonedElement_=a.Tooltip.element_,a.Tooltip.DIV)){a.Tooltip.DIV.textContent="";var o=a.Tooltip.getTooltipOfObject(a.Tooltip.element_);o=(o=a.utils.string.wrap(o,a.Tooltip.LIMIT)).split("\n");for(var c=0;c<o.length;c++){var d=document.createElement("div");d.appendChild(document.createTextNode(o[c])),a.Tooltip.DIV.appendChild(d)}o=a.Tooltip.element_.RTL,c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,a.Tooltip.DIV.style.direction=o?"rtl":"ltr",a.Tooltip.DIV.style.display="block",a.Tooltip.visible=!0;var f=a.Tooltip.lastX_;f=o?f-(a.Tooltip.OFFSET_X+a.Tooltip.DIV.offsetWidth):f+a.Tooltip.OFFSET_X;var v=a.Tooltip.lastY_+a.Tooltip.OFFSET_Y;v+a.Tooltip.DIV.offsetHeight>d+window.scrollY&&(v-=a.Tooltip.DIV.offsetHeight+2*a.Tooltip.OFFSET_Y),o?f=Math.max(a.Tooltip.MARGINS-window.scrollX,f):f+a.Tooltip.DIV.offsetWidth>c+window.scrollX-2*a.Tooltip.MARGINS&&(f=c-a.Tooltip.DIV.offsetWidth-2*a.Tooltip.MARGINS),a.Tooltip.DIV.style.top=v+"px",a.Tooltip.DIV.style.left=f+"px"}},a.utils.aria={},a.utils.aria.ARIA_PREFIX_="aria-",a.utils.aria.ROLE_ATTRIBUTE_="role",a.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},a.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},a.utils.aria.setRole=function(o,c){o.setAttribute(a.utils.aria.ROLE_ATTRIBUTE_,c)},a.utils.aria.setState=function(o,c,d){Array.isArray(d)&&(d=d.join(" ")),o.setAttribute(a.utils.aria.ARIA_PREFIX_+c,d)},a.IASTNodeLocation=function(){},a.IASTNodeLocationSvg=function(){},a.IASTNodeLocationWithBlock=function(){},a.IKeyboardAccessible=function(){},a.utils.deprecation={},a.utils.deprecation.warn=function(o,c,d,f){o=o+" was deprecated on "+c+" and will be deleted on "+d+".",f&&(o+="\nUse "+f+" instead."),console.warn(o)},a.Connection=function(o,c){this.sourceBlock_=o,this.type=c},a.Connection.CAN_CONNECT=0,a.Connection.REASON_SELF_CONNECTION=1,a.Connection.REASON_WRONG_TYPE=2,a.Connection.REASON_TARGET_NULL=3,a.Connection.REASON_CHECKS_FAILED=4,a.Connection.REASON_DIFFERENT_WORKSPACES=5,a.Connection.REASON_SHADOW_PARENT=6,a.Connection.REASON_DRAG_CHECKS_FAILED=7,a.Connection.prototype.targetConnection=null,a.Connection.prototype.disposed=!1,a.Connection.prototype.check_=null,a.Connection.prototype.shadowDom_=null,a.Connection.prototype.x=0,a.Connection.prototype.y=0,a.Connection.prototype.connect_=function(o){var O,c=a.connectionTypes.INPUT_VALUE,d=this.getSourceBlock(),f=o.getSourceBlock();if(o.isConnected()&&o.disconnect(),this.isConnected()){var v=this.getShadowDom(!0);this.shadowDom_=null;var y=this.targetBlock();if(y.isShadow())y.dispose(!1);else{this.disconnect();var D=y}this.shadowDom_=v}a.Events.isEnabled()&&(O=new(a.Events.get(a.Events.BLOCK_MOVE))(f)),a.Connection.connectReciprocally_(this,o),f.setParent(d),O&&(O.recordNew(),a.Events.fire(O)),D&&((f=a.Connection.getConnectionForOrphanedConnection(f,o=this.type===c?D.outputConnection:D.previousConnection))?o.connect(f):o.onFailedConnect(this))},a.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var o=this.targetBlock();o&&o.unplug()}this.disposed=!0},a.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},a.Connection.prototype.isSuperior=function(){return this.type==a.connectionTypes.INPUT_VALUE||this.type==a.connectionTypes.NEXT_STATEMENT},a.Connection.prototype.isConnected=function(){return!!this.targetConnection},a.Connection.prototype.canConnectWithReason=function(o){return a.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,o,!1)},a.Connection.prototype.checkConnection=function(o){a.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var c=this.getConnectionChecker(),d=c.canConnectWithReason(this,o,!1);if(d!=a.Connection.CAN_CONNECT)throw Error(c.getErrorMessage(d,this,o))},a.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},a.Connection.prototype.isConnectionAllowed=function(o){return a.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,o,!0)},a.Connection.prototype.onFailedConnect=function(o){},a.Connection.prototype.connect=function(o){if(this.targetConnection!=o&&this.getConnectionChecker().canConnect(this,o,!1)){var c=a.Events.getGroup();c||a.Events.setGroup(!0),this.isSuperior()?this.connect_(o):o.connect_(this),c||a.Events.setGroup(!1)}},a.Connection.connectReciprocally_=function(o,c){if(!o||!c)throw Error("Cannot connect null connections.");o.targetConnection=c,c.targetConnection=o},a.Connection.getSingleConnection_=function(o,c){for(var y,d=null,f=(c=c.outputConnection).getConnectionChecker(),v=0;y=o.inputList[v];v++)if((y=y.connection)&&f.canConnect(c,y,!1)){if(d)return null;d=y}return d},a.Connection.getConnectionForOrphanedOutput_=function(o,c){for(var d;d=a.Connection.getSingleConnection_(o,c);)if(!(o=d.targetBlock())||o.isShadow())return d;return null},a.Connection.getConnectionForOrphanedConnection=function(o,c){if(c.type===a.connectionTypes.OUTPUT_VALUE)return a.Connection.getConnectionForOrphanedOutput_(o,c.getSourceBlock());o=o.lastConnectionInStack(!0);var d=c.getConnectionChecker();return o&&d.canConnect(c,o,!1)?o:null},a.Connection.prototype.disconnect=function(){var o=this.targetConnection;if(!o)throw Error("Source connection not connected.");if(o.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var c=this.sourceBlock_,d=o.getSourceBlock();o=this}else c=o.getSourceBlock(),d=this.sourceBlock_;var f=a.Events.getGroup();f||a.Events.setGroup(!0),this.disconnectInternal_(c,d),d.isShadow()||o.respawnShadow_(),f||a.Events.setGroup(!1)},a.Connection.prototype.disconnectInternal_=function(o,c){var d;a.Events.isEnabled()&&(d=new(a.Events.get(a.Events.BLOCK_MOVE))(c)),this.targetConnection=this.targetConnection.targetConnection=null,c.setParent(null),d&&(d.recordNew(),a.Events.fire(d))},a.Connection.prototype.respawnShadow_=function(){var o=this.getSourceBlock(),c=this.getShadowDom();if(o.workspace&&c)if((o=a.Xml.domToBlock(c,o.workspace)).outputConnection)this.connect(o.outputConnection);else{if(!o.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(o.previousConnection)}},a.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},a.Connection.prototype.checkType=function(o){return a.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,o,!1)},a.Connection.prototype.checkType_=function(o){return a.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(o)},a.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},a.Connection.prototype.setCheck=function(o){return o?(Array.isArray(o)||(o=[o]),this.check_=o,this.onCheckChanged_()):this.check_=null,this},a.Connection.prototype.getCheck=function(){return this.check_},a.Connection.prototype.setShadowDom=function(o){this.shadowDom_=o,(o=this.targetBlock())?o.isShadow()&&(o.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},a.Connection.prototype.getShadowDom=function(o){return o&&this.targetBlock().isShadow()?a.Xml.blockToDom(this.targetBlock()):this.shadowDom_},a.Connection.prototype.neighbours=function(o){return[]},a.Connection.prototype.getParentInput=function(){for(var o=null,c=this.sourceBlock_.inputList,d=0;d<c.length;d++)if(c[d].connection===this){o=c[d];break}return o},a.Connection.prototype.toString=function(){var o=this.sourceBlock_;if(!o)return"Orphan Connection";if(o.outputConnection==this)var c="Output Connection of ";else if(o.previousConnection==this)c="Previous Connection of ";else if(o.nextConnection==this)c="Next Connection of ";else{c=null;for(var f,d=0;f=o.inputList[d];d++)if(f.connection==this){c=f;break}if(!c)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";c='Input "'+c.name+'" connection on '}return c+o.toDevString()},a.IConnectionChecker=function(){},a.ConnectionChecker=function(){},a.ConnectionChecker.prototype.canConnect=function(o,c,d,f){return this.canConnectWithReason(o,c,d,f)==a.Connection.CAN_CONNECT},a.ConnectionChecker.prototype.canConnectWithReason=function(o,c,d,f){var v=this.doSafetyChecks(o,c);return v!=a.Connection.CAN_CONNECT?v:this.doTypeChecks(o,c)?d&&!this.doDragChecks(o,c,f||0)?a.Connection.REASON_DRAG_CHECKS_FAILED:a.Connection.CAN_CONNECT:a.Connection.REASON_CHECKS_FAILED},a.ConnectionChecker.prototype.getErrorMessage=function(o,c,d){switch(o){case a.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case a.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case a.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case a.Connection.REASON_TARGET_NULL:return"Target connection is null.";case a.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+c+" expected "+c.getCheck()+", found "+d.getCheck();case a.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case a.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},a.ConnectionChecker.prototype.doSafetyChecks=function(o,c){if(!o||!c)return a.Connection.REASON_TARGET_NULL;if(o.isSuperior())var d=o.getSourceBlock(),f=c.getSourceBlock();else f=o.getSourceBlock(),d=c.getSourceBlock();return d==f?a.Connection.REASON_SELF_CONNECTION:c.type!=a.OPPOSITE_TYPE[o.type]?a.Connection.REASON_WRONG_TYPE:d.workspace!==f.workspace?a.Connection.REASON_DIFFERENT_WORKSPACES:d.isShadow()&&!f.isShadow()?a.Connection.REASON_SHADOW_PARENT:a.Connection.CAN_CONNECT},a.ConnectionChecker.prototype.doTypeChecks=function(o,c){if(o=o.getCheck(),c=c.getCheck(),!o||!c)return!0;for(var d=0;d<o.length;d++)if(-1!=c.indexOf(o[d]))return!0;return!1},a.ConnectionChecker.prototype.doDragChecks=function(o,c,d){if(o.distanceFrom(c)>d||c.getSourceBlock().isInsertionMarker())return!1;switch(c.type){case a.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(o,c);case a.connectionTypes.OUTPUT_VALUE:if(c.isConnected()&&!c.targetBlock().isInsertionMarker()||o.isConnected())return!1;break;case a.connectionTypes.INPUT_VALUE:if(c.isConnected()&&!c.targetBlock().isMovable()&&!c.targetBlock().isShadow())return!1;break;case a.connectionTypes.NEXT_STATEMENT:if(c.isConnected()&&!o.getSourceBlock().nextConnection&&!c.targetBlock().isShadow()&&c.targetBlock().nextConnection)return!1;break;default:return!1}return-1==a.draggingConnections.indexOf(c)},a.ConnectionChecker.prototype.canConnectToPrevious_=function(o,c){return!(o.targetConnection||-1!=a.draggingConnections.indexOf(c)||c.targetConnection&&(!(o=c.targetBlock()).isInsertionMarker()||o.getPreviousBlock()))},a.registry.register(a.registry.Type.CONNECTION_CHECKER,a.registry.DEFAULT,a.ConnectionChecker),a.VariableMap=function(o){this.variableMap_=Object.create(null),this.workspace=o},a.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},a.VariableMap.prototype.renameVariable=function(o,c){var d=this.getVariable(c,o.type),f=this.workspace.getAllBlocks(!1);a.Events.setGroup(!0);try{d&&d.getId()!=o.getId()?this.renameVariableWithConflict_(o,c,d,f):this.renameVariableAndUses_(o,c,f)}finally{a.Events.setGroup(!1)}},a.VariableMap.prototype.renameVariableById=function(o,c){var d=this.getVariableById(o);if(!d)throw Error("Tried to rename a variable that didn't exist. ID: "+o);this.renameVariable(d,c)},a.VariableMap.prototype.renameVariableAndUses_=function(o,c,d){for(a.Events.fire(new(a.Events.get(a.Events.VAR_RENAME))(o,c)),o.name=c,c=0;c<d.length;c++)d[c].updateVarName(o)},a.VariableMap.prototype.renameVariableWithConflict_=function(o,c,d,f){var v=o.type;for(c!=d.name&&this.renameVariableAndUses_(d,c,f),c=0;c<f.length;c++)f[c].renameVarById(o.getId(),d.getId());a.Events.fire(new(a.Events.get(a.Events.VAR_DELETE))(o)),o=this.getVariablesOfType(v).indexOf(o),this.variableMap_[v].splice(o,1)},a.VariableMap.prototype.createVariable=function(o,c,d){var f=this.getVariable(o,c);if(f){if(d&&f.getId()!=d)throw Error('Variable "'+o+'" is already in use and its id is "'+f.getId()+'" which conflicts with the passed in id, "'+d+'".');return f}if(d&&this.getVariableById(d))throw Error('Variable id, "'+d+'", is already in use.');return f=d||a.utils.genUid(),f=new a.VariableModel(this.workspace,o,c=c||"",f),(o=this.variableMap_[c]||[]).push(f),delete this.variableMap_[c],this.variableMap_[c]=o,f},a.VariableMap.prototype.deleteVariable=function(o){for(var f,c=this.variableMap_[o.type],d=0;f=c[d];d++)if(f.getId()==o.getId()){c.splice(d,1),a.Events.fire(new(a.Events.get(a.Events.VAR_DELETE))(o));break}},a.VariableMap.prototype.deleteVariableById=function(o){var c=this.getVariableById(o);if(c){var v,d=c.name,f=this.getVariableUsesById(o);for(o=0;v=f[o];o++)if("procedures_defnoreturn"==v.type||"procedures_defreturn"==v.type)return o=v.getFieldValue("NAME"),d=a.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",d).replace("%2",o),void a.alert(d);var y=this;1<f.length?(d=a.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(f.length)).replace("%2",d),a.confirm(d,function(D){D&&c&&y.deleteVariableInternal(c,f)})):y.deleteVariableInternal(c,f)}else console.warn("Can't delete non-existent variable: "+o)},a.VariableMap.prototype.deleteVariableInternal=function(o,c){var d=a.Events.getGroup();d||a.Events.setGroup(!0);try{for(var f=0;f<c.length;f++)c[f].dispose(!0);this.deleteVariable(o)}finally{d||a.Events.setGroup(!1)}},a.VariableMap.prototype.getVariable=function(o,c){if(c=this.variableMap_[c||""])for(var f,d=0;f=c[d];d++)if(a.Names.equals(f.name,o))return f;return null},a.VariableMap.prototype.getVariableById=function(o){for(var c=Object.keys(this.variableMap_),d=0;d<c.length;d++)for(var y,f=c[d],v=0;y=this.variableMap_[f][v];v++)if(y.getId()==o)return y;return null},a.VariableMap.prototype.getVariablesOfType=function(o){return(o=this.variableMap_[o||""])?o.slice():[]},a.VariableMap.prototype.getVariableTypes=function(o){var c={};a.utils.object.mixin(c,this.variableMap_),o&&o.getPotentialVariableMap()&&a.utils.object.mixin(c,o.getPotentialVariableMap().variableMap_),o=Object.keys(c),c=!1;for(var d=0;d<o.length;d++)""==o[d]&&(c=!0);return c||o.push(""),o},a.VariableMap.prototype.getAllVariables=function(){var c,o=[];for(c in this.variableMap_)o=o.concat(this.variableMap_[c]);return o},a.VariableMap.prototype.getAllVariableNames=function(){var c,o=[];for(c in this.variableMap_)for(var v,d=this.variableMap_[c],f=0;v=d[f];f++)o.push(v.name);return o},a.VariableMap.prototype.getVariableUsesById=function(o){for(var c=[],d=this.workspace.getAllBlocks(!1),f=0;f<d.length;f++){var v=d[f].getVarModels();if(v)for(var y=0;y<v.length;y++)v[y].getId()==o&&c.push(d[f])}return c},a.Workspace=function(o){this.id=a.utils.genUid(),a.Workspace.WorkspaceDB_[this.id]=this,this.options=o||new a.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(a.registry.getClassFromOptions(a.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new a.VariableMap(this),this.potentialVariableMap_=null},a.Workspace.prototype.rendered=!1,a.Workspace.prototype.isClearing=!1,a.Workspace.prototype.MAX_UNDO=1024,a.Workspace.prototype.connectionDBList=null,a.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete a.Workspace.WorkspaceDB_[this.id]},a.Workspace.SCAN_ANGLE=3,a.Workspace.prototype.sortObjects_=function(o,c){return o=o.getRelativeToSurfaceXY(),c=c.getRelativeToSurfaceXY(),o.y+a.Workspace.prototype.sortObjects_.offset*o.x-(c.y+a.Workspace.prototype.sortObjects_.offset*c.x)},a.Workspace.prototype.addTopBlock=function(o){this.topBlocks_.push(o)},a.Workspace.prototype.removeTopBlock=function(o){if(!a.utils.arrayRemove(this.topBlocks_,o))throw Error("Block not present in workspace's list of top-most blocks.")},a.Workspace.prototype.getTopBlocks=function(o){var c=[].concat(this.topBlocks_);return o&&1<c.length&&(this.sortObjects_.offset=Math.sin(a.utils.math.toRadians(a.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),c.sort(this.sortObjects_)),c},a.Workspace.prototype.addTypedBlock=function(o){this.typedBlocksDB_[o.type]||(this.typedBlocksDB_[o.type]=[]),this.typedBlocksDB_[o.type].push(o)},a.Workspace.prototype.removeTypedBlock=function(o){this.typedBlocksDB_[o.type].splice(this.typedBlocksDB_[o.type].indexOf(o),1),this.typedBlocksDB_[o.type].length||delete this.typedBlocksDB_[o.type]},a.Workspace.prototype.getBlocksByType=function(o,c){return this.typedBlocksDB_[o]?(o=this.typedBlocksDB_[o].slice(0),c&&1<o.length&&(this.sortObjects_.offset=Math.sin(a.utils.math.toRadians(a.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),o.sort(this.sortObjects_)),o):[]},a.Workspace.prototype.addTopComment=function(o){this.topComments_.push(o),this.commentDB_[o.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+o.id+'"'),this.commentDB_[o.id]=o},a.Workspace.prototype.removeTopComment=function(o){if(!a.utils.arrayRemove(this.topComments_,o))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[o.id]},a.Workspace.prototype.getTopComments=function(o){var c=[].concat(this.topComments_);return o&&1<c.length&&(this.sortObjects_.offset=Math.sin(a.utils.math.toRadians(a.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),c.sort(this.sortObjects_)),c},a.Workspace.prototype.getAllBlocks=function(o){if(o){o=this.getTopBlocks(!0);for(var c=[],d=0;d<o.length;d++)c.push.apply(c,o[d].getDescendants(!0))}else for(c=this.getTopBlocks(!1),d=0;d<c.length;d++)c.push.apply(c,c[d].getChildren(!1));return c.filter(function(f){return!f.isInsertionMarker()})},a.Workspace.prototype.clear=function(){this.isClearing=!0;try{var o=a.Events.getGroup();for(o||a.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);o||a.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},a.Workspace.prototype.renameVariableById=function(o,c){this.variableMap_.renameVariableById(o,c)},a.Workspace.prototype.createVariable=function(o,c,d){return this.variableMap_.createVariable(o,c,d)},a.Workspace.prototype.getVariableUsesById=function(o){return this.variableMap_.getVariableUsesById(o)},a.Workspace.prototype.deleteVariableById=function(o){this.variableMap_.deleteVariableById(o)},a.Workspace.prototype.getVariable=function(o,c){return this.variableMap_.getVariable(o,c)},a.Workspace.prototype.getVariableById=function(o){return this.variableMap_.getVariableById(o)},a.Workspace.prototype.getVariablesOfType=function(o){return this.variableMap_.getVariablesOfType(o)},a.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},a.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},a.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},a.Workspace.prototype.getWidth=function(){return 0},a.Workspace.prototype.newBlock=function(o,c){return new a.Block(this,o,c)},a.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},a.Workspace.prototype.remainingCapacityOfType=function(o){return this.options.maxInstances?(void 0!==this.options.maxInstances[o]?this.options.maxInstances[o]:1/0)-this.getBlocksByType(o,!1).length:1/0},a.Workspace.prototype.isCapacityAvailable=function(o){if(!this.hasBlockLimits())return!0;var d,c=0;for(d in o){if(o[d]>this.remainingCapacityOfType(d))return!1;c+=o[d]}return!(c>this.remainingCapacity())},a.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},a.Workspace.prototype.getUndoStack=function(){return this.undoStack_},a.Workspace.prototype.getRedoStack=function(){return this.redoStack_},a.Workspace.prototype.undo=function(o){var c=o?this.redoStack_:this.undoStack_,d=o?this.undoStack_:this.redoStack_,f=c.pop();if(f){for(var v=[f];c.length&&f.group&&f.group==c[c.length-1].group;)v.push(c.pop());for(c=0;f=v[c];c++)d.push(f);v=a.Events.filter(v,o),a.Events.recordUndo=!1;try{for(c=0;f=v[c];c++)f.run(o)}finally{a.Events.recordUndo=!0}}},a.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,a.Events.clearPendingUndo()},a.Workspace.prototype.addChangeListener=function(o){return this.listeners_.push(o),o},a.Workspace.prototype.removeChangeListener=function(o){a.utils.arrayRemove(this.listeners_,o)},a.Workspace.prototype.fireChangeListener=function(o){if(o.recordUndo)for(this.undoStack_.push(o),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var d,c=0;d=this.listeners_[c];c++)d(o)},a.Workspace.prototype.getBlockById=function(o){return this.blockDB_[o]||null},a.Workspace.prototype.setBlockById=function(o,c){this.blockDB_[o]=c},a.Workspace.prototype.removeBlockById=function(o){delete this.blockDB_[o]},a.Workspace.prototype.getCommentById=function(o){return this.commentDB_[o]||null},a.Workspace.prototype.allInputsFilled=function(o){for(var f,c=this.getTopBlocks(!1),d=0;f=c[d];d++)if(!f.allInputsFilled(o))return!1;return!0},a.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},a.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new a.VariableMap(this)},a.Workspace.prototype.getVariableMap=function(){return this.variableMap_},a.Workspace.prototype.setVariableMap=function(o){this.variableMap_=o},a.Workspace.WorkspaceDB_=Object.create(null),a.Workspace.getById=function(o){return a.Workspace.WorkspaceDB_[o]||null},a.Workspace.getAll=function(){var c,o=[];for(c in a.Workspace.WorkspaceDB_)o.push(a.Workspace.WorkspaceDB_[c]);return o},a.WorkspaceDragSurfaceSvg=function(o){this.container_=o,this.createDom()},a.WorkspaceDragSurfaceSvg.prototype.SVG_=null,a.WorkspaceDragSurfaceSvg.prototype.container_=null,a.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=a.utils.dom.createSvgElement(a.utils.Svg.SVG,{xmlns:a.utils.dom.SVG_NS,"xmlns:html":a.utils.dom.HTML_NS,"xmlns:xlink":a.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},a.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(o,c){o=o.toFixed(0),c=c.toFixed(0),this.SVG_.style.display="block",a.utils.dom.setCssTransform(this.SVG_,"translate3d("+o+"px, "+c+"px, 0px)")},a.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return a.utils.getRelativeXY(this.SVG_)},a.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(o){if(!o)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var c=this.SVG_.childNodes[0],d=this.SVG_.childNodes[1];if(!(c&&d&&a.utils.dom.hasClass(c,"blocklyBlockCanvas")&&a.utils.dom.hasClass(d,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?a.utils.dom.insertAfter(c,this.previousSibling_):o.insertBefore(c,o.firstChild),a.utils.dom.insertAfter(d,c),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");a.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},a.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(o,c,d,f,v,y){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=d,o.setAttribute("transform","translate(0, 0) scale("+y+")"),c.setAttribute("transform","translate(0, 0) scale("+y+")"),this.SVG_.setAttribute("width",f),this.SVG_.setAttribute("height",v),this.SVG_.appendChild(o),this.SVG_.appendChild(c),this.SVG_.style.display="block"},a.blockRendering={},a.blockRendering.useDebugger=!1,a.blockRendering.register=function(o,c){a.registry.register(a.registry.Type.RENDERER,o,c)},a.blockRendering.unregister=function(o){a.registry.unregister(a.registry.Type.RENDERER,o)},a.blockRendering.startDebugger=function(){a.blockRendering.useDebugger=!0},a.blockRendering.stopDebugger=function(){a.blockRendering.useDebugger=!1},a.blockRendering.init=function(o,c,d){return(o=new(a.registry.getClass(a.registry.Type.RENDERER,o))(o)).init(c,d),o},a.ASTNode=function(o,c,d){if(!c)throw Error("Cannot create a node without a location.");this.type_=o,this.isConnection_=a.ASTNode.isConnectionType_(o),this.location_=c,this.wsCoordinate_=null,this.processParams_(d||null)},a.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},a.ASTNode.NAVIGATE_ALL_FIELDS=!1,a.ASTNode.DEFAULT_OFFSET_Y=-20,a.ASTNode.isConnectionType_=function(o){switch(o){case a.ASTNode.types.PREVIOUS:case a.ASTNode.types.NEXT:case a.ASTNode.types.INPUT:case a.ASTNode.types.OUTPUT:return!0}return!1},a.ASTNode.createFieldNode=function(o){return o?new a.ASTNode(a.ASTNode.types.FIELD,o):null},a.ASTNode.createConnectionNode=function(o){if(!o)return null;var c=o.type;return c==a.connectionTypes.INPUT_VALUE||c==a.connectionTypes.NEXT_STATEMENT&&o.getParentInput()?a.ASTNode.createInputNode(o.getParentInput()):c==a.connectionTypes.NEXT_STATEMENT?new a.ASTNode(a.ASTNode.types.NEXT,o):c==a.connectionTypes.OUTPUT_VALUE?new a.ASTNode(a.ASTNode.types.OUTPUT,o):c==a.connectionTypes.PREVIOUS_STATEMENT?new a.ASTNode(a.ASTNode.types.PREVIOUS,o):null},a.ASTNode.createInputNode=function(o){return o&&o.connection?new a.ASTNode(a.ASTNode.types.INPUT,o.connection):null},a.ASTNode.createBlockNode=function(o){return o?new a.ASTNode(a.ASTNode.types.BLOCK,o):null},a.ASTNode.createStackNode=function(o){return o?new a.ASTNode(a.ASTNode.types.STACK,o):null},a.ASTNode.createWorkspaceNode=function(o,c){return c&&o?new a.ASTNode(a.ASTNode.types.WORKSPACE,o,{wsCoordinate:c}):null},a.ASTNode.createTopNode=function(o){var c=o.previousConnection||o.outputConnection;return c?a.ASTNode.createConnectionNode(c):a.ASTNode.createBlockNode(o)},a.ASTNode.prototype.processParams_=function(o){o&&o.wsCoordinate&&(this.wsCoordinate_=o.wsCoordinate)},a.ASTNode.prototype.getLocation=function(){return this.location_},a.ASTNode.prototype.getType=function(){return this.type_},a.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},a.ASTNode.prototype.isConnection=function(){return this.isConnection_},a.ASTNode.prototype.findNextForInput_=function(){var d,o=this.location_.getParentInput(),c=o.getSourceBlock();for(o=c.inputList.indexOf(o)+1;d=c.inputList[o];o++){for(var y,f=d.fieldRow,v=0;y=f[v];v++)if(y.isClickable()||a.ASTNode.NAVIGATE_ALL_FIELDS)return a.ASTNode.createFieldNode(y);if(d.connection)return a.ASTNode.createInputNode(d)}return null},a.ASTNode.prototype.findNextForField_=function(){var o=this.location_,c=o.getParentInput(),d=o.getSourceBlock(),f=d.inputList.indexOf(c);for(o=c.fieldRow.indexOf(o)+1;c=d.inputList[f];f++){for(var v=c.fieldRow;o<v.length;){if(v[o].isClickable()||a.ASTNode.NAVIGATE_ALL_FIELDS)return a.ASTNode.createFieldNode(v[o]);o++}if(o=0,c.connection)return a.ASTNode.createInputNode(c)}return null},a.ASTNode.prototype.findPrevForInput_=function(){for(var f,o=this.location_.getParentInput(),c=o.getSourceBlock(),d=c.inputList.indexOf(o);f=c.inputList[d];d--){if(f.connection&&f!==o)return a.ASTNode.createInputNode(f);for(var y,v=(f=f.fieldRow).length-1;y=f[v];v--)if(y.isClickable()||a.ASTNode.NAVIGATE_ALL_FIELDS)return a.ASTNode.createFieldNode(y)}return null},a.ASTNode.prototype.findPrevForField_=function(){var v,o=this.location_,c=o.getParentInput(),d=o.getSourceBlock(),f=d.inputList.indexOf(c);for(o=c.fieldRow.indexOf(o)-1;v=d.inputList[f];f--){if(v.connection&&v!==c)return a.ASTNode.createInputNode(v);for(v=v.fieldRow;-1<o;){if(v[o].isClickable()||a.ASTNode.NAVIGATE_ALL_FIELDS)return a.ASTNode.createFieldNode(v[o]);o--}0<=f-1&&(o=d.inputList[f-1].fieldRow.length-1)}return null},a.ASTNode.prototype.navigateBetweenStacks_=function(o){var c=this.getLocation();if(c instanceof a.Block||(c=c.getSourceBlock()),!c||!c.workspace)return null;var d=c.getRootBlock();c=d.workspace.getTopBlocks(!0);for(var v,f=0;v=c[f];f++)if(d.id==v.id)return-1==(o=f+(o?1:-1))||o==c.length?null:a.ASTNode.createStackNode(c[o]);throw Error("Couldn't find "+(o?"next":"previous")+" stack?!")},a.ASTNode.prototype.findTopASTNodeForBlock_=function(o){var c=o.previousConnection||o.outputConnection;return c?a.ASTNode.createConnectionNode(c):a.ASTNode.createBlockNode(o)},a.ASTNode.prototype.getOutAstNodeForBlock_=function(o){if(!o)return null;var c=(o=o.getTopStackBlock()).previousConnection||o.outputConnection;return c&&c.targetConnection&&c.targetConnection.getParentInput()?a.ASTNode.createInputNode(c.targetConnection.getParentInput()):a.ASTNode.createStackNode(o)},a.ASTNode.prototype.findFirstFieldOrInput_=function(o){o=o.inputList;for(var d,c=0;d=o[c];c++){for(var y,f=d.fieldRow,v=0;y=f[v];v++)if(y.isClickable()||a.ASTNode.NAVIGATE_ALL_FIELDS)return a.ASTNode.createFieldNode(y);if(d.connection)return a.ASTNode.createInputNode(d)}return null},a.ASTNode.prototype.getSourceBlock=function(){return this.getType()===a.ASTNode.types.BLOCK||this.getType()===a.ASTNode.types.STACK?this.getLocation():this.getType()===a.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},a.ASTNode.prototype.next=function(){switch(this.type_){case a.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case a.ASTNode.types.OUTPUT:var o=this.location_;return a.ASTNode.createBlockNode(o.getSourceBlock());case a.ASTNode.types.FIELD:return this.findNextForField_();case a.ASTNode.types.INPUT:return this.findNextForInput_();case a.ASTNode.types.BLOCK:return a.ASTNode.createConnectionNode(this.location_.nextConnection);case a.ASTNode.types.PREVIOUS:return a.ASTNode.createBlockNode((o=this.location_).getSourceBlock());case a.ASTNode.types.NEXT:return a.ASTNode.createConnectionNode((o=this.location_).targetConnection)}return null},a.ASTNode.prototype.in=function(){switch(this.type_){case a.ASTNode.types.WORKSPACE:var o=this.location_.getTopBlocks(!0);if(0<o.length)return a.ASTNode.createStackNode(o[0]);break;case a.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(o=this.location_);case a.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(o=this.location_);case a.ASTNode.types.INPUT:return a.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},a.ASTNode.prototype.prev=function(){switch(this.type_){case a.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case a.ASTNode.types.FIELD:return this.findPrevForField_();case a.ASTNode.types.INPUT:return this.findPrevForInput_();case a.ASTNode.types.BLOCK:var o=this.location_;return a.ASTNode.createConnectionNode(o.previousConnection||o.outputConnection);case a.ASTNode.types.PREVIOUS:if((o=(o=this.location_).targetConnection)&&!o.getParentInput())return a.ASTNode.createConnectionNode(o);break;case a.ASTNode.types.NEXT:return a.ASTNode.createBlockNode((o=this.location_).getSourceBlock())}return null},a.ASTNode.prototype.out=function(){switch(this.type_){case a.ASTNode.types.STACK:var o=this.location_,c=o.getRelativeToSurfaceXY();return c=new a.utils.Coordinate(c.x,c.y+a.ASTNode.DEFAULT_OFFSET_Y),a.ASTNode.createWorkspaceNode(o.workspace,c);case a.ASTNode.types.OUTPUT:return(c=(o=this.location_).targetConnection)?a.ASTNode.createConnectionNode(c):a.ASTNode.createStackNode(o.getSourceBlock());case a.ASTNode.types.FIELD:return a.ASTNode.createBlockNode(this.location_.getSourceBlock());case a.ASTNode.types.INPUT:return a.ASTNode.createBlockNode((o=this.location_).getSourceBlock());case a.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(o=this.location_);case a.ASTNode.types.PREVIOUS:case a.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((o=this.location_).getSourceBlock())}return null},a.Blocks=Object.create(null),a.Extensions={},a.Extensions.ALL_=Object.create(null),a.Extensions.register=function(o,c){if("string"!=typeof o||""==o.trim())throw Error('Error: Invalid extension name "'+o+'"');if(a.Extensions.ALL_[o])throw Error('Error: Extension "'+o+'" is already registered.');if("function"!=typeof c)throw Error('Error: Extension "'+o+'" must be a function');a.Extensions.ALL_[o]=c},a.Extensions.registerMixin=function(o,c){if(!c||"object"!=typeof c)throw Error('Error: Mixin "'+o+'" must be a object');a.Extensions.register(o,function(){this.mixin(c)})},a.Extensions.registerMutator=function(o,c,d,f){var v='Error when registering mutator "'+o+'": ';a.Extensions.checkHasFunction_(v,c.domToMutation,"domToMutation"),a.Extensions.checkHasFunction_(v,c.mutationToDom,"mutationToDom");var y=a.Extensions.checkMutatorDialog_(c,v);if(d&&"function"!=typeof d)throw Error('Extension "'+o+'" is not a function');a.Extensions.register(o,function(){if(y){if(!a.Mutator)throw Error(v+"Missing require for Blockly.Mutator");this.setMutator(new a.Mutator(f||[]))}this.mixin(c),d&&d.apply(this)})},a.Extensions.unregister=function(o){a.Extensions.ALL_[o]?delete a.Extensions.ALL_[o]:console.warn('No extension mapping for name "'+o+'" found to unregister')},a.Extensions.apply=function(o,c,d){var f=a.Extensions.ALL_[o];if("function"!=typeof f)throw Error('Error: Extension "'+o+'" not found.');if(d)a.Extensions.checkNoMutatorProperties_(o,c);else var v=a.Extensions.getMutatorProperties_(c);if(f.apply(c),d)a.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+o+'": ',c);else if(!a.Extensions.mutatorPropertiesMatch_(v,c))throw Error('Error when applying extension "'+o+'": mutation properties changed when applying a non-mutator extension.')},a.Extensions.checkHasFunction_=function(o,c,d){if(!c)throw Error(o+'missing required property "'+d+'"');if("function"!=typeof c)throw Error(o+'" required property "'+d+'" must be a function')},a.Extensions.checkNoMutatorProperties_=function(o,c){if(a.Extensions.getMutatorProperties_(c).length)throw Error('Error: tried to apply mutation "'+o+'" to a block that already has mutator functions.  Block id: '+c.id)},a.Extensions.checkMutatorDialog_=function(o,c){var d=void 0!==o.compose,f=void 0!==o.decompose;if(d&&f){if("function"!=typeof o.compose)throw Error(c+"compose must be a function.");if("function"!=typeof o.decompose)throw Error(c+"decompose must be a function.");return!0}if(!d&&!f)return!1;throw Error(c+'Must have both or neither of "compose" and "decompose"')},a.Extensions.checkBlockHasMutatorProperties_=function(o,c){if("function"!=typeof c.domToMutation)throw Error(o+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof c.mutationToDom)throw Error(o+'Applying a mutator didn\'t add "mutationToDom"');a.Extensions.checkMutatorDialog_(c,o)},a.Extensions.getMutatorProperties_=function(o){var c=[];return void 0!==o.domToMutation&&c.push(o.domToMutation),void 0!==o.mutationToDom&&c.push(o.mutationToDom),void 0!==o.compose&&c.push(o.compose),void 0!==o.decompose&&c.push(o.decompose),c},a.Extensions.mutatorPropertiesMatch_=function(o,c){if((c=a.Extensions.getMutatorProperties_(c)).length!=o.length)return!1;for(var d=0;d<c.length;d++)if(o[d]!=c[d])return!1;return!0},a.Extensions.buildTooltipForDropdown=function(o,c){var d=[];return"object"==typeof document&&a.utils.runAfterPageLoad(function(){for(var f in c)a.utils.checkMessageReferences(c[f])}),function(){this.type&&-1==d.indexOf(this.type)&&(a.Extensions.checkDropdownOptionsInTable_(this,o,c),d.push(this.type)),this.setTooltip(function(){var f=String(this.getFieldValue(o)),v=c[f];return null==v?-1==d.indexOf(this.type)&&(f="No tooltip mapping for value "+f+" of field "+o,null!=this.type&&(f+=" of block type "+this.type),console.warn(f+".")):v=a.utils.replaceMessageReferences(v),v}.bind(this))}},a.Extensions.checkDropdownOptionsInTable_=function(o,c,d){var f=o.getField(c);if(!f.isOptionListDynamic()){f=f.getOptions();for(var v=0;v<f.length;++v){var y=f[v][1];null==d[y]&&console.warn("No tooltip mapping for value "+y+" of field "+c+" of block type "+o.type)}}},a.Extensions.buildTooltipWithFieldText=function(o,c){return"object"==typeof document&&a.utils.runAfterPageLoad(function(){a.utils.checkMessageReferences(o)}),function(){this.setTooltip(function(){var d=this.getField(c);return a.utils.replaceMessageReferences(o).replace("%1",d?d.getText():"")}.bind(this))}},a.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var o=this.getParent();return o&&o.getInputsInline()&&o.tooltip||this.tooltipWhenNotConnected_}.bind(this))},a.Extensions.register("parent_tooltip_when_inline",a.Extensions.extensionParentTooltip_),a.fieldRegistry={},a.fieldRegistry.register=function(o,c){a.registry.register(a.registry.Type.FIELD,o,c)},a.fieldRegistry.unregister=function(o){a.registry.unregister(a.registry.Type.FIELD,o)},a.fieldRegistry.fromJson=function(o){var c=a.registry.getObject(a.registry.Type.FIELD,o.type);return c?c.fromJson(o):(console.warn("Blockly could not create a field of type "+o.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},a.IDeletable=function(){},a.blockAnimations={},a.blockAnimations.disconnectPid_=0,a.blockAnimations.disconnectGroup_=null,a.blockAnimations.disposeUiEffect=function(o){var c=o.workspace,d=o.getSvgRoot();c.getAudioManager().play("delete"),o=c.getSvgXY(d),(d=d.cloneNode(!0)).translateX_=o.x,d.translateY_=o.y,d.setAttribute("transform","translate("+o.x+","+o.y+")"),c.getParentSvg().appendChild(d),d.bBox_=d.getBBox(),a.blockAnimations.disposeUiStep_(d,c.RTL,new Date,c.scale)},a.blockAnimations.disposeUiStep_=function(o,c,d,f){var v=(new Date-d)/150;1<v?a.utils.dom.removeNode(o):(o.setAttribute("transform","translate("+(o.translateX_+(c?-1:1)*o.bBox_.width*f/2*v)+","+(o.translateY_+o.bBox_.height*f*v)+") scale("+(1-v)*f+")"),setTimeout(a.blockAnimations.disposeUiStep_,10,o,c,d,f))},a.blockAnimations.connectionUiEffect=function(o){var c=o.workspace,d=c.scale;if(c.getAudioManager().play("click"),!(1>d)){var f=c.getSvgXY(o.getSvgRoot());o.outputConnection?(f.x+=(o.RTL?3:-3)*d,f.y+=13*d):o.previousConnection&&(f.x+=(o.RTL?-23:23)*d,f.y+=3*d),o=a.utils.dom.createSvgElement(a.utils.Svg.CIRCLE,{cx:f.x,cy:f.y,r:0,fill:"none",stroke:"#888","stroke-width":10},c.getParentSvg()),a.blockAnimations.connectionUiStep_(o,new Date,d)}},a.blockAnimations.connectionUiStep_=function(o,c,d){var f=(new Date-c)/150;1<f?a.utils.dom.removeNode(o):(o.setAttribute("r",25*f*d),o.style.opacity=1-f,a.blockAnimations.disconnectPid_=setTimeout(a.blockAnimations.connectionUiStep_,10,o,c,d))},a.blockAnimations.disconnectUiEffect=function(o){if(o.workspace.getAudioManager().play("disconnect"),!(1>o.workspace.scale)){var c=o.getHeightWidth().height;c=Math.atan(10/c)/Math.PI*180,o.RTL||(c*=-1),a.blockAnimations.disconnectUiStep_(o.getSvgRoot(),c,new Date)}},a.blockAnimations.disconnectUiStep_=function(o,c,d){var f=(new Date-d)/200;1<f?o.skew_="":(o.skew_="skewX("+Math.round(Math.sin(f*Math.PI*3)*(1-f)*c)+")",a.blockAnimations.disconnectGroup_=o,a.blockAnimations.disconnectPid_=setTimeout(a.blockAnimations.disconnectUiStep_,10,o,c,d)),o.setAttribute("transform",o.translate_+o.skew_)},a.blockAnimations.disconnectUiStop=function(){if(a.blockAnimations.disconnectGroup_){clearTimeout(a.blockAnimations.disconnectPid_);var o=a.blockAnimations.disconnectGroup_;o.skew_="",o.setAttribute("transform",o.translate_),a.blockAnimations.disconnectGroup_=null}},a.Events.BlockDrag=function(o,c,d){a.Events.BlockDrag.superClass_.constructor.call(this,o?o.workspace.id:void 0),this.blockId=o?o.id:null,this.isStart=c,this.blocks=d},a.utils.object.inherits(a.Events.BlockDrag,a.Events.UiBase),a.Events.BlockDrag.prototype.type=a.Events.BLOCK_DRAG,a.Events.BlockDrag.prototype.toJson=function(){var o=a.Events.BlockDrag.superClass_.toJson.call(this);return o.isStart=this.isStart,o.blockId=this.blockId,o.blocks=this.blocks,o},a.Events.BlockDrag.prototype.fromJson=function(o){a.Events.BlockDrag.superClass_.fromJson.call(this,o),this.isStart=o.isStart,this.blockId=o.blockId,this.blocks=o.blocks},a.registry.register(a.registry.Type.EVENT,a.Events.BLOCK_DRAG,a.Events.BlockDrag),a.IBlockDragger=function(){},a.InsertionMarkerManager=function(o){this.topBlock_=a.selected=o,this.workspace_=o.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},a.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},a.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",a.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,a.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{a.Events.enable()}},a.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},a.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},a.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},a.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(a.Events.disable(),this.hidePreview_(),a.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var o=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;a.blockAnimations.connectionUiEffect(o.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},a.InsertionMarkerManager.prototype.update=function(o,c){var d=this.getCandidate_(o);((this.wouldDeleteBlock_=this.shouldDelete_(d,c))||this.shouldUpdatePreviews_(d,o))&&(a.Events.disable(),this.maybeHidePreview_(d),this.maybeShowPreview_(d),a.Events.enable())},a.InsertionMarkerManager.prototype.createMarkerBlock_=function(o){var c=o.type;a.Events.disable();try{var d=this.workspace_.newBlock(c);if(d.setInsertionMarker(!0),o.mutationToDom){var f=o.mutationToDom();f&&d.domToMutation(f)}for(c=0;c<o.inputList.length;c++){var v=o.inputList[c];if(v.name!=a.constants.COLLAPSED_INPUT_NAME){var y=d.inputList[c];if(!y)throw Error(a.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(f=0;f<v.fieldRow.length;f++){var D=v.fieldRow[f],O=y.fieldRow[f];if(!O)throw Error(a.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));O.setValue(D.getValue())}}}d.setCollapsed(o.isCollapsed()),d.setInputsInline(o.getInputsInline()),d.initSvg(),d.getSvgRoot().setAttribute("visibility","hidden")}finally{a.Events.enable()}return d},a.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var o=this.topBlock_.getConnections_(!1),c=this.topBlock_.lastConnectionInStack(!0);if(c&&c!=this.topBlock_.nextConnection){if(o.push(c),this.lastOnStack_=c,this.lastMarker_){a.Events.disable();try{this.lastMarker_.dispose()}finally{a.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(c.getSourceBlock())}return o},a.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(o,c){var d=o.local,f=o.closest;return o=o.radius,d&&f?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==f&&this.localConnection_==d||(d=this.localConnection_.x+c.x-this.closestConnection_.x,c=this.localConnection_.y+c.y-this.closestConnection_.y,c=Math.sqrt(d*d+c*c),f&&o>c-a.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},a.InsertionMarkerManager.prototype.getCandidate_=function(o){for(var c=this.getStartRadius_(),d=null,f=null,v=0;v<this.availableConnections_.length;v++){var y=this.availableConnections_[v],D=y.closest(c,o);D.connection&&(d=D.connection,f=y,c=D.radius)}return{closest:d,local:f,radius:c}},a.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?a.CONNECTING_SNAP_RADIUS:a.SNAP_RADIUS},a.InsertionMarkerManager.prototype.shouldDelete_=function(o,c){return!(!c||!this.workspace_.getComponentManager().hasCapability(c.id,a.ComponentManager.Capability.DELETE_AREA))&&c.wouldDelete(this.topBlock_,o&&!!o.closest)},a.InsertionMarkerManager.prototype.maybeShowPreview_=function(o){if(!this.wouldDeleteBlock_){var c=o.closest;o=o.local,c&&(c==this.closestConnection_||c.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=c,this.localConnection_=o,this.showPreview_()))}},a.InsertionMarkerManager.prototype.showPreview_=function(){var o=this.closestConnection_,c=this.workspace_.getRenderer();switch(c.getConnectionPreviewMethod(o,this.localConnection_,this.topBlock_)){case a.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case a.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case a.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}o&&c.shouldHighlightConnection(o)&&o.highlight()},a.InsertionMarkerManager.prototype.maybeHidePreview_=function(o){if(o.closest){var c=this.closestConnection_!=o.closest;o=this.localConnection_!=o.local,this.closestConnection_&&this.localConnection_&&(c||o||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},a.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},a.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var o=this.localConnection_,c=this.closestConnection_,d=this.lastOnStack_&&o==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((o=d.getMatchingConnection(o.getSourceBlock(),o))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");d.render(),d.rendered=!0,d.getSvgRoot().setAttribute("visibility","visible"),o&&c&&d.positionNearConnection(o,c),c&&o.connect(c),this.markerConnection_=o},a.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var o=this.markerConnection_,c=o.getSourceBlock(),d=c.nextConnection,f=c.previousConnection,v=c.outputConnection;if(v=o.type==a.connectionTypes.INPUT_VALUE&&!(v&&v.targetConnection),!(o!=d||f&&f.targetConnection)||v?o.targetBlock().unplug(!1):o.type==a.connectionTypes.NEXT_STATEMENT&&o!=d?((d=o.targetConnection).getSourceBlock().unplug(!1),f=f?f.targetConnection:null,c.unplug(!0),f&&f.connect(d)):c.unplug(!0),o.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(o=c.getSvgRoot())&&o.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},a.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var o=this.closestConnection_;this.highlightedBlock_=o.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(o,!0)},a.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},a.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},a.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},a.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var o=[];return this.firstMarker_&&o.push(this.firstMarker_),this.lastMarker_&&o.push(this.lastMarker_),o},a.BlockDragger=function(o,c){this.draggingBlock_=o,this.workspace_=c,this.draggedConnectionManager_=new a.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=a.BlockDragger.initIconData_(o)},a.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},a.BlockDragger.initIconData_=function(o){var c=[];o=o.getDescendants(!1);for(var f,d=0;f=o[d];d++){f=f.getIcons();for(var v=0;v<f.length;v++){var y={location:f[v].getIconLocation(),icon:f[v]};c.push(y)}}return c},a.BlockDragger.prototype.startDrag=function(o,c){a.Events.getGroup()||a.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),a.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),a.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(c)&&this.disconnectBlock_(c,o),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},a.BlockDragger.prototype.shouldDisconnect_=function(o){return!!(this.draggingBlock_.getParent()||o&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},a.BlockDragger.prototype.disconnectBlock_=function(o,c){this.draggingBlock_.unplug(o),o=this.pixelsToWorkspaceUnits_(c),o=a.utils.Coordinate.sum(this.startXY_,o),this.draggingBlock_.translate(o.x,o.y),a.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},a.BlockDragger.prototype.fireDragStartEvent_=function(){var o=new(a.Events.get(a.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));a.Events.fire(o)},a.BlockDragger.prototype.drag=function(o,c){c=this.pixelsToWorkspaceUnits_(c);var d=a.utils.Coordinate.sum(this.startXY_,c);this.draggingBlock_.moveDuringDrag(d),this.dragIcons_(c),d=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(o),this.draggedConnectionManager_.update(c,this.dragTarget_),o=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),o!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==d&&(d&&d.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},a.BlockDragger.prototype.endDrag=function(o,c){if(this.drag(o,c),this.dragIconData_=[],this.fireDragEndEvent_(),a.utils.dom.stopTextWidthCache(),a.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))o=this.startXY_;else{var d=(o=this.getNewLocationAfterDrag_(c)).delta;o=o.newLocation}this.draggingBlock_.moveOffDragSurface(o),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),d?this.updateBlockAfterMove_(d):a.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),a.Events.setGroup(!1)},a.BlockDragger.prototype.getNewLocationAfterDrag_=function(o){var c={};return c.delta=this.pixelsToWorkspaceUnits_(o),c.newLocation=a.utils.Coordinate.sum(this.startXY_,c.delta),c},a.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),a.draggingConnections=[],!0)},a.BlockDragger.prototype.updateBlockAfterMove_=function(o){this.draggingBlock_.moveConnections(o.x,o.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},a.BlockDragger.prototype.fireDragEndEvent_=function(){var o=new(a.Events.get(a.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));a.Events.fire(o)},a.BlockDragger.prototype.updateToolboxStyle_=function(o){var c=this.workspace_.getToolbox();if(c){var d=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";o&&"function"==typeof c.removeStyle?c.removeStyle(d):o||"function"!=typeof c.addStyle||c.addStyle(d)}},a.BlockDragger.prototype.fireMoveEvent_=function(){var o=new(a.Events.get(a.Events.BLOCK_MOVE))(this.draggingBlock_);o.oldCoordinate=this.startXY_,o.recordNew(),a.Events.fire(o)},a.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},a.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(o){return o=new a.utils.Coordinate(o.x/this.workspace_.scale,o.y/this.workspace_.scale),this.workspace_.isMutator&&o.scale(1/this.workspace_.options.parentWorkspace.scale),o},a.BlockDragger.prototype.dragIcons_=function(o){for(var c=0;c<this.dragIconData_.length;c++){var d=this.dragIconData_[c];d.icon.setIconLocation(a.utils.Coordinate.sum(d.location,o))}},a.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},a.registry.register(a.registry.Type.BLOCK_DRAGGER,a.registry.DEFAULT,a.BlockDragger),a.IContextMenu=function(){},a.IDraggable=function(){},a.IBubble=function(){},a.Bubble=function(o,c,d,f,v,y){this.workspace_=o,this.content_=c,this.shape_=d,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,d=a.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(d=-d),this.arrow_radians_=a.utils.math.toRadians(d),o.getBubbleCanvas().appendChild(this.createDom_(c,!(!v||!y))),this.setAnchorLocation(f),v&&y||(v=(o=this.content_.getBBox()).width+2*a.Bubble.BORDER_WIDTH,y=o.height+2*a.Bubble.BORDER_WIDTH),this.setBubbleSize(v,y),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},a.Bubble.BORDER_WIDTH=6,a.Bubble.ARROW_THICKNESS=5,a.Bubble.ARROW_ANGLE=20,a.Bubble.ARROW_BEND=4,a.Bubble.ANCHOR_RADIUS=8,a.Bubble.onMouseUpWrapper_=null,a.Bubble.onMouseMoveWrapper_=null,a.Bubble.unbindDragEvents_=function(){a.Bubble.onMouseUpWrapper_&&(a.browserEvents.unbind(a.Bubble.onMouseUpWrapper_),a.Bubble.onMouseUpWrapper_=null),a.Bubble.onMouseMoveWrapper_&&(a.browserEvents.unbind(a.Bubble.onMouseMoveWrapper_),a.Bubble.onMouseMoveWrapper_=null)},a.Bubble.bubbleMouseUp_=function(o){a.Touch.clearTouchIdentifier(),a.Bubble.unbindDragEvents_()},a.Bubble.prototype.rendered_=!1,a.Bubble.prototype.anchorXY_=null,a.Bubble.prototype.relativeLeft_=0,a.Bubble.prototype.relativeTop_=0,a.Bubble.prototype.width_=0,a.Bubble.prototype.height_=0,a.Bubble.prototype.autoLayout_=!0,a.Bubble.prototype.createDom_=function(o,c){this.bubbleGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{},null);var d={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return a.utils.userAgent.JAVA_FX&&(d={}),d=a.utils.dom.createSvgElement(a.utils.Svg.G,d,this.bubbleGroup_),this.bubbleArrow_=a.utils.dom.createSvgElement(a.utils.Svg.PATH,{},d),this.bubbleBack_=a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:a.Bubble.BORDER_WIDTH,ry:a.Bubble.BORDER_WIDTH},d),c?(this.resizeGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),a.utils.dom.createSvgElement(a.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(c=2*a.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),a.utils.dom.createSvgElement(a.utils.Svg.LINE,{class:"blocklyResizeLine",x1:c/3,y1:c-1,x2:c-1,y2:c/3},this.resizeGroup_),a.utils.dom.createSvgElement(a.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*c/3,y1:c-1,x2:c-1,y2:2*c/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=a.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=a.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(o),this.bubbleGroup_},a.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},a.Bubble.prototype.setSvgId=function(o){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=o)},a.Bubble.prototype.bubbleMouseDown_=function(o){var c=this.workspace_.getGesture(o);c&&c.handleBubbleStart(o,this)},a.Bubble.prototype.showContextMenu=function(o){},a.Bubble.prototype.isDeletable=function(){return!1},a.Bubble.prototype.setDeleteStyle=function(o){},a.Bubble.prototype.resizeMouseDown_=function(o){this.promote(),a.Bubble.unbindDragEvents_(),a.utils.isRightButton(o)||(this.workspace_.startDrag(o,new a.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),a.Bubble.onMouseUpWrapper_=a.browserEvents.conditionalBind(document,"mouseup",this,a.Bubble.bubbleMouseUp_),a.Bubble.onMouseMoveWrapper_=a.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),a.hideChaff()),o.stopPropagation()},a.Bubble.prototype.resizeMouseMove_=function(o){this.autoLayout_=!1,o=this.workspace_.moveDrag(o),this.setBubbleSize(this.workspace_.RTL?-o.x:o.x,o.y),this.workspace_.RTL&&this.positionBubble_()},a.Bubble.prototype.registerResizeEvent=function(o){this.resizeCallback_=o},a.Bubble.prototype.registerMoveEvent=function(o){this.moveCallback_=o},a.Bubble.prototype.promote=function(){var o=this.bubbleGroup_.parentNode;return o.lastChild!==this.bubbleGroup_&&(o.appendChild(this.bubbleGroup_),!0)},a.Bubble.prototype.setAnchorLocation=function(o){this.anchorXY_=o,this.rendered_&&this.positionBubble_()},a.Bubble.prototype.layoutBubble_=function(){var o=this.workspace_.getMetricsManager().getViewMetrics(!0),c=this.getOptimalRelativeLeft_(o),d=this.getOptimalRelativeTop_(o),f=this.shape_.getBBox(),v={x:c,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},y={x:-this.width_-30,y:d};d={x:f.width,y:d};var D={x:c,y:f.height};c=f.width<f.height?d:D,f=f.width<f.height?D:d,d=this.getOverlap_(v,o),D=this.getOverlap_(y,o);var O=this.getOverlap_(c,o);o=this.getOverlap_(f,o),d==(o=Math.max(d,D,O,o))?(this.relativeLeft_=v.x,this.relativeTop_=v.y):D==o?(this.relativeLeft_=y.x,this.relativeTop_=y.y):O==o?(this.relativeLeft_=c.x,this.relativeTop_=c.y):(this.relativeLeft_=f.x,this.relativeTop_=f.y)},a.Bubble.prototype.getOverlap_=function(o,c){var d=this.workspace_.RTL?this.anchorXY_.x-o.x-this.width_:o.x+this.anchorXY_.x;return o=o.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(d+this.width_,c.left+c.width)-Math.max(d,c.left))*(Math.min(o+this.height_,c.top+c.height)-Math.max(o,c.top))/(this.width_*this.height_)))},a.Bubble.prototype.getOptimalRelativeLeft_=function(o){var c=-this.width_/4;if(this.width_>o.width)return c;if(this.workspace_.RTL)var d=this.anchorXY_.x-c,f=d-this.width_,v=o.left+o.width,y=o.left+a.Scrollbar.scrollbarThickness/this.workspace_.scale;else d=(f=c+this.anchorXY_.x)+this.width_,y=o.left,v=o.left+o.width-a.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?f<y?c=-(y-this.anchorXY_.x+this.width_):d>v&&(c=-(v-this.anchorXY_.x)):f<y?c=y-this.anchorXY_.x:d>v&&(c=v-this.anchorXY_.x-this.width_),c},a.Bubble.prototype.getOptimalRelativeTop_=function(o){var c=-this.height_/4;if(this.height_>o.height)return c;var d=this.anchorXY_.y+c,v=o.top;o=o.top+o.height-a.Scrollbar.scrollbarThickness/this.workspace_.scale;var y=this.anchorXY_.y;return d<v?c=v-y:d+this.height_>o&&(c=o-y-this.height_),c},a.Bubble.prototype.positionBubble_=function(){var o=this.anchorXY_.x;this.moveTo(o=this.workspace_.RTL?o-(this.relativeLeft_+this.width_):o+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},a.Bubble.prototype.moveTo=function(o,c){this.bubbleGroup_.setAttribute("transform","translate("+o+","+c+")")},a.Bubble.prototype.setDragging=function(o){!o&&this.moveCallback_&&this.moveCallback_()},a.Bubble.prototype.getBubbleSize=function(){return new a.utils.Size(this.width_,this.height_)},a.Bubble.prototype.setBubbleSize=function(o,c){var d=2*a.Bubble.BORDER_WIDTH;o=Math.max(o,d+45),c=Math.max(c,d+20),this.width_=o,this.height_=c,this.bubbleBack_.setAttribute("width",o),this.bubbleBack_.setAttribute("height",c),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*a.Bubble.BORDER_WIDTH+","+(c-d)+") scale(-1 1)":"translate("+(o-d)+","+(c-d)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},a.Bubble.prototype.renderArrow_=function(){var o=[],c=this.width_/2,d=this.height_/2,f=-this.relativeLeft_,v=-this.relativeTop_;if(c==f&&d==v)o.push("M "+c+","+d);else{v-=d,f-=c,this.workspace_.RTL&&(f*=-1);var y=Math.sqrt(v*v+f*f),D=Math.acos(f/y);0>v&&(D=2*Math.PI-D);var O=D+Math.PI/2;O>2*Math.PI&&(O-=2*Math.PI);var U=Math.sin(O),X=Math.cos(O),H=this.getBubbleSize();O=(H.width+H.height)/a.Bubble.ARROW_THICKNESS,O=Math.min(O,H.width,H.height)/4,f=c+(H=1-a.Bubble.ANCHOR_RADIUS/y)*f,v=d+H*v,H=c+O*X;var ne=d+O*U;c-=O*X,d-=O*U,(U=D+this.arrow_radians_)>2*Math.PI&&(U-=2*Math.PI),D=Math.sin(U)*y/a.Bubble.ARROW_BEND,y=Math.cos(U)*y/a.Bubble.ARROW_BEND,o.push("M"+H+","+ne),o.push("C"+(H+y)+","+(ne+D)+" "+f+","+v+" "+f+","+v),o.push("C"+f+","+v+" "+(c+y)+","+(d+D)+" "+c+","+d)}o.push("z"),this.bubbleArrow_.setAttribute("d",o.join(" "))},a.Bubble.prototype.setColour=function(o){this.bubbleBack_.setAttribute("fill",o),this.bubbleArrow_.setAttribute("fill",o)},a.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&a.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&a.browserEvents.unbind(this.onMouseDownResizeWrapper_),a.Bubble.unbindDragEvents_(),a.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},a.Bubble.prototype.moveDuringDrag=function(o,c){o?o.translateSurface(c.x,c.y):this.moveTo(c.x,c.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-c.x-this.width_:c.x-this.anchorXY_.x,this.relativeTop_=c.y-this.anchorXY_.y,this.renderArrow_()},a.Bubble.prototype.getRelativeToSurfaceXY=function(){return new a.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},a.Bubble.prototype.setAutoLayout=function(o){this.autoLayout_=o},a.Bubble.textToDom=function(o){var c=a.utils.dom.createSvgElement(a.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:a.Bubble.BORDER_WIDTH},null);o=o.split("\n");for(var d=0;d<o.length;d++){var f=a.utils.dom.createSvgElement(a.utils.Svg.TSPAN,{dy:"1em",x:a.Bubble.BORDER_WIDTH},c),v=document.createTextNode(o[d]);f.appendChild(v)}return c},a.Bubble.createNonEditableBubble=function(o,c,d){if((d=new a.Bubble(c.workspace,o,c.pathObject.svgPath,d,null,null)).setSvgId(c.id),c.RTL){c=o.getBBox().width;for(var v,f=0;v=o.childNodes[f];f++)v.setAttribute("text-anchor","end"),v.setAttribute("x",c+a.Bubble.BORDER_WIDTH)}return d},a.Events.CommentBase=function(o){this.commentId=(this.isBlank=void 0===o)?"":o.id,this.workspaceId=this.isBlank?"":o.workspace.id,this.group=a.Events.getGroup(),this.recordUndo=a.Events.recordUndo},a.utils.object.inherits(a.Events.CommentBase,a.Events.Abstract),a.Events.CommentBase.prototype.toJson=function(){var o=a.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(o.commentId=this.commentId),o},a.Events.CommentBase.prototype.fromJson=function(o){a.Events.CommentBase.superClass_.fromJson.call(this,o),this.commentId=o.commentId},a.Events.CommentChange=function(o,c,d){a.Events.CommentChange.superClass_.constructor.call(this,o),o&&(this.oldContents_=void 0===c?"":c,this.newContents_=void 0===d?"":d)},a.utils.object.inherits(a.Events.CommentChange,a.Events.CommentBase),a.Events.CommentChange.prototype.type=a.Events.COMMENT_CHANGE,a.Events.CommentChange.prototype.toJson=function(){var o=a.Events.CommentChange.superClass_.toJson.call(this);return o.oldContents=this.oldContents_,o.newContents=this.newContents_,o},a.Events.CommentChange.prototype.fromJson=function(o){a.Events.CommentChange.superClass_.fromJson.call(this,o),this.oldContents_=o.oldContents,this.newContents_=o.newContents},a.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},a.Events.CommentChange.prototype.run=function(o){var c=this.getEventWorkspace_().getCommentById(this.commentId);c?c.setContent(o?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},a.Events.CommentCreate=function(o){a.Events.CommentCreate.superClass_.constructor.call(this,o),o&&(this.xml=o.toXmlWithXY())},a.utils.object.inherits(a.Events.CommentCreate,a.Events.CommentBase),a.Events.CommentCreate.prototype.type=a.Events.COMMENT_CREATE,a.Events.CommentCreate.prototype.toJson=function(){var o=a.Events.CommentCreate.superClass_.toJson.call(this);return o.xml=a.Xml.domToText(this.xml),o},a.Events.CommentCreate.prototype.fromJson=function(o){a.Events.CommentCreate.superClass_.fromJson.call(this,o),this.xml=a.Xml.textToDom(o.xml)},a.Events.CommentCreate.prototype.run=function(o){a.Events.CommentCreateDeleteHelper(this,o)},a.Events.CommentCreateDeleteHelper=function(o,c){var d=o.getEventWorkspace_();c?((c=a.utils.xml.createElement("xml")).appendChild(o.xml),a.Xml.domToWorkspace(c,d)):(d=d.getCommentById(o.commentId))?d.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+o.commentId)},a.Events.CommentDelete=function(o){a.Events.CommentDelete.superClass_.constructor.call(this,o),o&&(this.xml=o.toXmlWithXY())},a.utils.object.inherits(a.Events.CommentDelete,a.Events.CommentBase),a.Events.CommentDelete.prototype.type=a.Events.COMMENT_DELETE,a.Events.CommentDelete.prototype.toJson=function(){return a.Events.CommentDelete.superClass_.toJson.call(this)},a.Events.CommentDelete.prototype.fromJson=function(o){a.Events.CommentDelete.superClass_.fromJson.call(this,o)},a.Events.CommentDelete.prototype.run=function(o){a.Events.CommentCreateDeleteHelper(this,!o)},a.Events.CommentMove=function(o){a.Events.CommentMove.superClass_.constructor.call(this,o),o&&(this.comment_=o,this.oldCoordinate_=o.getXY(),this.newCoordinate_=null)},a.utils.object.inherits(a.Events.CommentMove,a.Events.CommentBase),a.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},a.Events.CommentMove.prototype.type=a.Events.COMMENT_MOVE,a.Events.CommentMove.prototype.setOldCoordinate=function(o){this.oldCoordinate_=o},a.Events.CommentMove.prototype.toJson=function(){var o=a.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(o.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(o.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),o},a.Events.CommentMove.prototype.fromJson=function(o){if(a.Events.CommentMove.superClass_.fromJson.call(this,o),o.oldCoordinate){var c=o.oldCoordinate.split(",");this.oldCoordinate_=new a.utils.Coordinate(Number(c[0]),Number(c[1]))}o.newCoordinate&&(c=o.newCoordinate.split(","),this.newCoordinate_=new a.utils.Coordinate(Number(c[0]),Number(c[1])))},a.Events.CommentMove.prototype.isNull=function(){return a.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},a.Events.CommentMove.prototype.run=function(o){var c=this.getEventWorkspace_().getCommentById(this.commentId);if(c){o=o?this.newCoordinate_:this.oldCoordinate_;var d=c.getXY();c.moveBy(o.x-d.x,o.y-d.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},a.registry.register(a.registry.Type.EVENT,a.Events.COMMENT_CREATE,a.Events.CommentCreate),a.registry.register(a.registry.Type.EVENT,a.Events.COMMENT_CHANGE,a.Events.CommentChange),a.registry.register(a.registry.Type.EVENT,a.Events.COMMENT_MOVE,a.Events.CommentMove),a.registry.register(a.registry.Type.EVENT,a.Events.COMMENT_DELETE,a.Events.CommentDelete),a.BubbleDragger=function(o,c){this.draggingBubble_=o,this.workspace_=c,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=a.utils.is3dSupported()&&c.getBlockDragSurface()?c.getBlockDragSurface():null},a.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},a.BubbleDragger.prototype.startBubbleDrag=function(){a.Events.getGroup()||a.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},a.BubbleDragger.prototype.dragBubble=function(o,c){c=this.pixelsToWorkspaceUnits_(c),c=a.utils.Coordinate.sum(this.startXY_,c),this.draggingBubble_.moveDuringDrag(this.dragSurface_,c),c=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(o),o=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),o!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==c&&(c&&c.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},a.BubbleDragger.prototype.shouldDelete_=function(o){return!(!o||!this.workspace_.getComponentManager().hasCapability(o.id,a.ComponentManager.Capability.DELETE_AREA))&&o.wouldDelete(this.draggingBubble_,!1)},a.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},a.BubbleDragger.prototype.endBubbleDrag=function(o,c){this.dragBubble(o,c),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?o=this.startXY_:(o=this.pixelsToWorkspaceUnits_(c),o=a.utils.Coordinate.sum(this.startXY_,o)),this.draggingBubble_.moveTo(o.x,o.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),a.Events.setGroup(!1)},a.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var o=new(a.Events.get(a.Events.COMMENT_MOVE))(this.draggingBubble_);o.setOldCoordinate(this.startXY_),o.recordNew(),a.Events.fire(o)}},a.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(o){return o=new a.utils.Coordinate(o.x/this.workspace_.scale,o.y/this.workspace_.scale),this.workspace_.isMutator&&o.scale(1/this.workspace_.options.parentWorkspace.scale),o},a.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},a.Events.Click=function(o,c,d){a.Events.Click.superClass_.constructor.call(this,o?o.workspace.id:c),this.blockId=o?o.id:null,this.targetType=d},a.utils.object.inherits(a.Events.Click,a.Events.UiBase),a.Events.Click.prototype.type=a.Events.CLICK,a.Events.Click.prototype.toJson=function(){var o=a.Events.Click.superClass_.toJson.call(this);return o.targetType=this.targetType,this.blockId&&(o.blockId=this.blockId),o},a.Events.Click.prototype.fromJson=function(o){a.Events.Click.superClass_.fromJson.call(this,o),this.targetType=o.targetType,this.blockId=o.blockId},a.registry.register(a.registry.Type.EVENT,a.Events.CLICK,a.Events.Click),a.WorkspaceDragger=function(o){this.workspace_=o,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new a.utils.Coordinate(o.scrollX,o.scrollY)},a.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},a.WorkspaceDragger.prototype.startDrag=function(){a.selected&&a.selected.unselect(),this.workspace_.setupDragSurface()},a.WorkspaceDragger.prototype.endDrag=function(o){this.drag(o),this.workspace_.resetDragSurface()},a.WorkspaceDragger.prototype.drag=function(o){if(o=a.utils.Coordinate.sum(this.startScrollXY_,o),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(o.x,o.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(o.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,o.y)}},a.Gesture=function(o,c){this.mouseDownXY_=null,this.currentDragDeltaXY_=new a.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=c,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=o,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!a.DRAG_STACK},a.Gesture.prototype.dispose=function(){a.Touch.clearTouchIdentifier(),a.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&a.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&a.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},a.Gesture.prototype.updateFromEvent_=function(o){var c=new a.utils.Coordinate(o.clientX,o.clientY);this.updateDragDelta_(c)&&(this.updateIsDragging_(),a.longStop_()),this.mostRecentEvent_=o},a.Gesture.prototype.updateDragDelta_=function(o){return this.currentDragDeltaXY_=a.utils.Coordinate.difference(o,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=a.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?a.FLYOUT_DRAG_RADIUS:a.DRAG_RADIUS))},a.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),a.Events.getGroup()||a.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},a.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},a.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},a.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new a.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},a.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},a.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(a.registry.getClassFromOptions(a.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},a.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new a.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},a.Gesture.prototype.doStart=function(o){a.utils.isTargetInput(o)?this.cancel():(this.hasStarted_=!0,a.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),a.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=o,a.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),a.utils.isRightButton(o)?this.handleRightClick(o):("touchstart"!=o.type.toLowerCase()&&"pointerdown"!=o.type.toLowerCase()||"mouse"==o.pointerType||a.longStart(o,this),this.mouseDownXY_=new a.utils.Coordinate(o.clientX,o.clientY),this.healStack_=o.altKey||o.ctrlKey||o.metaKey,this.bindMouseEvents(o)))},a.Gesture.prototype.bindMouseEvents=function(o){this.onMoveWrapper_=a.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=a.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),o.preventDefault(),o.stopPropagation()},a.Gesture.prototype.handleMove=function(o){this.updateFromEvent_(o),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),o.preventDefault(),o.stopPropagation()},a.Gesture.prototype.handleUp=function(o){this.updateFromEvent_(o),a.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(o,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(o,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(o),o.preventDefault(),o.stopPropagation(),this.dispose())},a.Gesture.prototype.cancel=function(){this.isEnding_||(a.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},a.Gesture.prototype.handleRightClick=function(o){this.targetBlock_?(this.bringBlockToFront_(),a.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(o)):this.startBubble_?this.startBubble_.showContextMenu(o):this.startWorkspace_&&!this.flyout_&&(a.hideChaff(),this.startWorkspace_.showContextMenu(o)),o.preventDefault(),o.stopPropagation(),this.dispose()},a.Gesture.prototype.handleWsStart=function(o,c){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(c),this.mostRecentEvent_=o,this.doStart(o)},a.Gesture.prototype.fireWorkspaceClick_=function(o){a.Events.fire(new(a.Events.get(a.Events.CLICK))(null,o.id,"workspace"))},a.Gesture.prototype.handleFlyoutStart=function(o,c){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(c),this.handleWsStart(o,c.getWorkspace())},a.Gesture.prototype.handleBlockStart=function(o,c){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(c),this.mostRecentEvent_=o},a.Gesture.prototype.handleBubbleStart=function(o,c){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(c),this.mostRecentEvent_=o},a.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},a.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},a.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(a.Events.getGroup()||a.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var o=new(a.Events.get(a.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");a.Events.fire(o)}this.bringBlockToFront_(),a.Events.setGroup(!1)},a.Gesture.prototype.doWorkspaceClick_=function(o){o=this.creatorWorkspace_,a.selected&&a.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||o)},a.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},a.Gesture.prototype.setStartField=function(o){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=o)},a.Gesture.prototype.setStartBubble=function(o){this.startBubble_||(this.startBubble_=o)},a.Gesture.prototype.setStartBlock=function(o){this.startBlock_||this.startBubble_||(this.startBlock_=o,o.isInFlyout&&o!=o.getRootBlock()?this.setTargetBlock_(o.getRootBlock()):this.setTargetBlock_(o))},a.Gesture.prototype.setTargetBlock_=function(o){o.isShadow()?this.setTargetBlock_(o.getParent()):this.targetBlock_=o},a.Gesture.prototype.setStartWorkspace_=function(o){this.startWorkspace_||(this.startWorkspace_=o)},a.Gesture.prototype.setStartFlyout_=function(o){this.flyout_||(this.flyout_=o)},a.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},a.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},a.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},a.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},a.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},a.Gesture.prototype.hasStarted=function(){return this.hasStarted_},a.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},a.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},a.Gesture.inProgress=function(){for(var d,o=a.Workspace.getAll(),c=0;d=o[c];c++)if(d.currentGesture_)return!0;return!1},a.IRegistrable=function(){},a.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},a.Marker.prototype.setDrawer=function(o){this.drawer_=o},a.Marker.prototype.getDrawer=function(){return this.drawer_},a.Marker.prototype.getCurNode=function(){return this.curNode_},a.Marker.prototype.setCurNode=function(o){var c=this.curNode_;this.curNode_=o,this.drawer_&&this.drawer_.draw(c,this.curNode_)},a.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},a.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},a.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},a.Cursor=function(){a.Cursor.superClass_.constructor.call(this),this.type="cursor"},a.utils.object.inherits(a.Cursor,a.Marker),a.Cursor.prototype.next=function(){var o=this.getCurNode();if(!o)return null;for(o=o.next();o&&o.next()&&(o.getType()==a.ASTNode.types.NEXT||o.getType()==a.ASTNode.types.BLOCK);)o=o.next();return o&&this.setCurNode(o),o},a.Cursor.prototype.in=function(){var o=this.getCurNode();return o?((o.getType()==a.ASTNode.types.PREVIOUS||o.getType()==a.ASTNode.types.OUTPUT)&&(o=o.next()),(o=o.in())&&this.setCurNode(o),o):null},a.Cursor.prototype.prev=function(){var o=this.getCurNode();if(!o)return null;for(o=o.prev();o&&o.prev()&&(o.getType()==a.ASTNode.types.NEXT||o.getType()==a.ASTNode.types.BLOCK);)o=o.prev();return o&&this.setCurNode(o),o},a.Cursor.prototype.out=function(){var o=this.getCurNode();return o?((o=o.out())&&o.getType()==a.ASTNode.types.BLOCK&&(o=o.prev()||o),o&&this.setCurNode(o),o):null},a.registry.register(a.registry.Type.CURSOR,a.registry.DEFAULT,a.Cursor),a.MarkerManager=function(o){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=o},a.MarkerManager.LOCAL_MARKER="local_marker_1",a.MarkerManager.prototype.registerMarker=function(o,c){this.markers_[o]&&this.unregisterMarker(o),c.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,c)),this.setMarkerSvg(c.getDrawer().createDom()),this.markers_[o]=c},a.MarkerManager.prototype.unregisterMarker=function(o){var c=this.markers_[o];if(!c)throw Error("Marker with ID "+o+" does not exist. Can only unregister markers that exist.");c.dispose(),delete this.markers_[o]},a.MarkerManager.prototype.getCursor=function(){return this.cursor_},a.MarkerManager.prototype.getMarker=function(o){return this.markers_[o]||null},a.MarkerManager.prototype.setCursor=function(o){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=o)&&(o=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(o),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},a.MarkerManager.prototype.setCursorSvg=function(o){o?(this.workspace_.getBlockCanvas().appendChild(o),this.cursorSvg_=o):this.cursorSvg_=null},a.MarkerManager.prototype.setMarkerSvg=function(o){o?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(o,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(o)):this.markerSvg_=null},a.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},a.MarkerManager.prototype.dispose=function(){for(var d,o=Object.keys(this.markers_),c=0;d=o[c];c++)this.unregisterMarker(d);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},a.WidgetDiv={},a.WidgetDiv.owner_=null,a.WidgetDiv.dispose_=null,a.WidgetDiv.rendererClassName_="",a.WidgetDiv.themeClassName_="",a.WidgetDiv.createDom=function(){a.WidgetDiv.DIV||(a.WidgetDiv.DIV=document.createElement("div"),a.WidgetDiv.DIV.className="blocklyWidgetDiv",(a.parentContainer||document.body).appendChild(a.WidgetDiv.DIV))},a.WidgetDiv.show=function(o,c,d){a.WidgetDiv.hide(),a.WidgetDiv.owner_=o,a.WidgetDiv.dispose_=d,(o=a.WidgetDiv.DIV).style.direction=c?"rtl":"ltr",o.style.display="block",c=a.getMainWorkspace(),a.WidgetDiv.rendererClassName_=c.getRenderer().getClassName(),a.WidgetDiv.themeClassName_=c.getTheme().getClassName(),a.utils.dom.addClass(o,a.WidgetDiv.rendererClassName_),a.utils.dom.addClass(o,a.WidgetDiv.themeClassName_)},a.WidgetDiv.hide=function(){if(a.WidgetDiv.isVisible()){a.WidgetDiv.owner_=null;var o=a.WidgetDiv.DIV;o.style.display="none",o.style.left="",o.style.top="",a.WidgetDiv.dispose_&&a.WidgetDiv.dispose_(),a.WidgetDiv.dispose_=null,o.textContent="",a.WidgetDiv.rendererClassName_&&(a.utils.dom.removeClass(o,a.WidgetDiv.rendererClassName_),a.WidgetDiv.rendererClassName_=""),a.WidgetDiv.themeClassName_&&(a.utils.dom.removeClass(o,a.WidgetDiv.themeClassName_),a.WidgetDiv.themeClassName_=""),a.getMainWorkspace().markFocused()}},a.WidgetDiv.isVisible=function(){return!!a.WidgetDiv.owner_},a.WidgetDiv.hideIfOwner=function(o){a.WidgetDiv.owner_==o&&a.WidgetDiv.hide()},a.WidgetDiv.positionInternal_=function(o,c,d){a.WidgetDiv.DIV.style.left=o+"px",a.WidgetDiv.DIV.style.top=c+"px",a.WidgetDiv.DIV.style.height=d+"px"},a.WidgetDiv.positionWithAnchor=function(o,c,d,f){var v=a.WidgetDiv.calculateY_(o,c,d);o=a.WidgetDiv.calculateX_(o,c,d,f),0>v?a.WidgetDiv.positionInternal_(o,0,d.height+v):a.WidgetDiv.positionInternal_(o,v,d.height)},a.WidgetDiv.calculateX_=function(o,c,d,f){return f?(c=Math.max(c.right-d.width,o.left),Math.min(c,o.right-d.width)):(c=Math.min(c.left,o.right-d.width),Math.max(c,o.left))},a.WidgetDiv.calculateY_=function(o,c,d){return c.bottom+d.height>=o.bottom?c.top-d.height:c.bottom},a.Field=function(o,c,d){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new a.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,d&&this.configure_(d),this.setValue(o),c&&this.setValidator(c)},a.Field.prototype.DEFAULT_VALUE=null,a.Field.prototype.name=void 0,a.Field.prototype.disposed=!1,a.Field.prototype.maxDisplayLength=50,a.Field.prototype.sourceBlock_=null,a.Field.prototype.isDirty_=!0,a.Field.prototype.visible_=!0,a.Field.prototype.clickTarget_=null,a.Field.NBSP="\xa0",a.Field.prototype.EDITABLE=!0,a.Field.prototype.SERIALIZABLE=!1,a.Field.prototype.configure_=function(o){var c=o.tooltip;"string"==typeof c&&(c=a.utils.replaceMessageReferences(o.tooltip)),c&&this.setTooltip(c)},a.Field.prototype.setSourceBlock=function(o){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=o},a.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},a.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},a.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},a.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},a.Field.prototype.initModel=function(){},a.Field.prototype.createBorderRect_=function(){this.borderRect_=a.utils.dom.createSvgElement(a.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},a.Field.prototype.createTextElement_=function(){this.textElement_=a.utils.dom.createSvgElement(a.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},a.Field.prototype.bindEvents_=function(){a.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=a.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},a.Field.prototype.fromXml=function(o){this.setValue(o.textContent)},a.Field.prototype.toXml=function(o){return o.textContent=this.getValue(),o},a.Field.prototype.dispose=function(){a.DropDownDiv.hideIfOwner(this),a.WidgetDiv.hideIfOwner(this),a.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&a.browserEvents.unbind(this.mouseDownWrapper_),a.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},a.Field.prototype.updateEditable=function(){var o=this.fieldGroup_;this.EDITABLE&&o&&(this.sourceBlock_.isEditable()?(a.utils.dom.addClass(o,"blocklyEditableText"),a.utils.dom.removeClass(o,"blocklyNonEditableText"),o.style.cursor=this.CURSOR):(a.utils.dom.addClass(o,"blocklyNonEditableText"),a.utils.dom.removeClass(o,"blocklyEditableText"),o.style.cursor=""))},a.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},a.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},a.Field.prototype.isSerializable=function(){var o=!1;return this.name&&(this.SERIALIZABLE?o=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),o=!0)),o},a.Field.prototype.isVisible=function(){return this.visible_},a.Field.prototype.setVisible=function(o){if(this.visible_!=o){this.visible_=o;var c=this.getSvgRoot();c&&(c.style.display=o?"block":"none")}},a.Field.prototype.setValidator=function(o){this.validator_=o},a.Field.prototype.getValidator=function(){return this.validator_},a.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},a.Field.prototype.applyColour=function(){},a.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},a.Field.prototype.showEditor=function(o){this.isClickable()&&this.showEditor_(o)},a.Field.prototype.updateSize_=function(o){var c=this.getConstants(),d=2*(o=null!=o?o:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),f=c.FIELD_TEXT_HEIGHT,v=0;this.textElement_&&(d+=v=a.utils.dom.getFastTextWidth(this.textElement_,c.FIELD_TEXT_FONTSIZE,c.FIELD_TEXT_FONTWEIGHT,c.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(f=Math.max(f,c.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=f,this.size_.width=d,this.positionTextElement_(o,v),this.positionBorderRect_()},a.Field.prototype.positionTextElement_=function(o,c){if(this.textElement_){var d=this.getConstants(),f=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-c-o:o),this.textElement_.setAttribute("y",d.FIELD_TEXT_BASELINE_CENTER?f:f-d.FIELD_TEXT_HEIGHT/2+d.FIELD_TEXT_BASELINE)}},a.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},a.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new a.utils.Size(0,0)},a.Field.prototype.getScaledBBox=function(){if(this.borderRect_)o=this.borderRect_.getBoundingClientRect(),d=a.utils.style.getPageOffset(this.borderRect_),f=o.width,o=o.height;else{var o=this.sourceBlock_.getHeightWidth(),c=this.sourceBlock_.workspace.scale,d=this.getAbsoluteXY_(),f=o.width*c;o=o.height*c,a.utils.userAgent.GECKO?(d.x+=1.5*c,d.y+=1.5*c):a.utils.userAgent.EDGE||a.utils.userAgent.IE||(d.x-=.5*c,d.y-=.5*c),f+=1*c,o+=1*c}return new a.utils.Rect(d.y,d.y+o,d.x,d.x+f)},a.Field.prototype.getDisplayText_=function(){var o=this.getText();return o?(o.length>this.maxDisplayLength&&(o=o.substring(0,this.maxDisplayLength-2)+"\u2026"),o=o.replace(/\s/g,a.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(o+="\u200f"),o):a.Field.NBSP},a.Field.prototype.getText=function(){if(this.getText_){var o=this.getText_.call(this);if(null!==o)return String(o)}return String(this.getValue())},a.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},a.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},a.Field.prototype.setValue=function(o){if(null!==o){var c=this.doClassValidation_(o);if(!((o=this.processValidation_(o,c))instanceof Error)){if((c=this.getValidator())&&(c=c.call(this,o),(o=this.processValidation_(o,c))instanceof Error))return;if(!(c=this.sourceBlock_)||!c.disposed){var d=this.getValue();d===o?this.doValueUpdate_(o):(c&&a.Events.isEnabled()&&a.Events.fire(new(a.Events.get(a.Events.BLOCK_CHANGE))(c,"field",this.name||null,d,o)),this.doValueUpdate_(o),this.isDirty_&&this.forceRerender())}}}},a.Field.prototype.processValidation_=function(o,c){return null===c?(this.doValueInvalid_(o),this.isDirty_&&this.forceRerender(),Error()):(void 0!==c&&(o=c),o)},a.Field.prototype.getValue=function(){return this.value_},a.Field.prototype.doClassValidation_=function(o){return null==o?null:o},a.Field.prototype.doValueUpdate_=function(o){this.value_=o,this.isDirty_=!0},a.Field.prototype.doValueInvalid_=function(o){},a.Field.prototype.onMouseDown_=function(o){this.sourceBlock_&&this.sourceBlock_.workspace&&(o=this.sourceBlock_.workspace.getGesture(o))&&o.setStartField(this)},a.Field.prototype.setTooltip=function(o){o||""===o||(o=this.sourceBlock_);var c=this.getClickTarget_();c?c.tooltip=o:this.tooltip_=o},a.Field.prototype.getTooltip=function(){var o=this.getClickTarget_();return a.Tooltip.getTooltipOfObject(o||{tooltip:this.tooltip_})},a.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},a.Field.prototype.getAbsoluteXY_=function(){return a.utils.style.getPageOffset(this.getClickTarget_())},a.Field.prototype.referencesVariables=function(){return!1},a.Field.prototype.getParentInput=function(){for(var o=null,c=this.sourceBlock_,d=c.inputList,f=0;f<c.inputList.length;f++)for(var v=d[f],y=v.fieldRow,D=0;D<y.length;D++)if(y[D]===this){o=v;break}return o},a.Field.prototype.getFlipRtl=function(){return!1},a.Field.prototype.isTabNavigable=function(){return!1},a.Field.prototype.onShortcut=function(o){return!1},a.Field.prototype.setCursorSvg=function(o){o?(this.fieldGroup_.appendChild(o),this.cursorSvg_=o):this.cursorSvg_=null},a.Field.prototype.setMarkerSvg=function(o){o?(this.fieldGroup_.appendChild(o),this.markerSvg_=o):this.markerSvg_=null},a.Field.prototype.updateMarkers_=function(){var o=this.sourceBlock_.workspace;o.keyboardAccessibilityMode&&this.cursorSvg_&&o.getCursor().draw(),o.keyboardAccessibilityMode&&this.markerSvg_&&o.getMarker(a.MarkerManager.LOCAL_MARKER).draw()},a.FieldLabel=function(o,c,d){this.class_=null,a.FieldLabel.superClass_.constructor.call(this,o,null,d),d||(this.class_=c||null)},a.utils.object.inherits(a.FieldLabel,a.Field),a.FieldLabel.prototype.DEFAULT_VALUE="",a.FieldLabel.fromJson=function(o){var c=a.utils.replaceMessageReferences(o.text);return new a.FieldLabel(c,void 0,o)},a.FieldLabel.prototype.EDITABLE=!1,a.FieldLabel.prototype.configure_=function(o){a.FieldLabel.superClass_.configure_.call(this,o),this.class_=o.class},a.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&a.utils.dom.addClass(this.textElement_,this.class_)},a.FieldLabel.prototype.doClassValidation_=function(o){return null==o?null:String(o)},a.FieldLabel.prototype.setClass=function(o){this.textElement_&&(this.class_&&a.utils.dom.removeClass(this.textElement_,this.class_),o&&a.utils.dom.addClass(this.textElement_,o)),this.class_=o},a.fieldRegistry.register("field_label",a.FieldLabel),a.Input=function(o,c,d,f){if(o!=a.inputTypes.DUMMY&&!c)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=o,this.name=c,this.sourceBlock_=d,this.connection=f,this.fieldRow=[]},a.Input.prototype.align=a.constants.ALIGN.LEFT,a.Input.prototype.visible_=!0,a.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},a.Input.prototype.appendField=function(o,c){return this.insertFieldAt(this.fieldRow.length,o,c),this},a.Input.prototype.insertFieldAt=function(o,c,d){if(0>o||o>this.fieldRow.length)throw Error("index "+o+" out of bounds.");return(c||""==c&&d)&&("string"==typeof c&&(c=a.fieldRegistry.fromJson({type:"field_label",text:c})),c.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(c.init(),c.applyColour()),c.name=d,c.setVisible(this.isVisible()),c.prefixField&&(o=this.insertFieldAt(o,c.prefixField)),this.fieldRow.splice(o,0,c),++o,c.suffixField&&(o=this.insertFieldAt(o,c.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),o},a.Input.prototype.removeField=function(o,c){for(var f,d=0;f=this.fieldRow[d];d++)if(f.name===o)return f.dispose(),this.fieldRow.splice(d,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(c)return!1;throw Error('Field "'+o+'" not found.')},a.Input.prototype.isVisible=function(){return this.visible_},a.Input.prototype.setVisible=function(o){var c=[];if(this.visible_==o)return c;this.visible_=o;for(var f,d=0;f=this.fieldRow[d];d++)f.setVisible(o);return this.connection&&(this.connection=this.connection,o?c=this.connection.startTrackingAll():this.connection.stopTrackingAll(),d=this.connection.targetBlock())&&(d.getSvgRoot().style.display=o?"block":"none"),c},a.Input.prototype.markDirty=function(){for(var c,o=0;c=this.fieldRow[o];o++)c.markDirty()},a.Input.prototype.setCheck=function(o){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(o),this},a.Input.prototype.setAlign=function(o){return this.align=o,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},a.Input.prototype.setShadowDom=function(o){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(o),this},a.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},a.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var o=0;o<this.fieldRow.length;o++)this.fieldRow[o].init()},a.Input.prototype.dispose=function(){for(var c,o=0;c=this.fieldRow[o];o++)c.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},a.Block=function(o,c,d){if(a.Generator&&void 0!==a.Generator.prototype[c])throw Error('Block prototypeName "'+c+'" conflicts with Blockly.Generator members.');if(this.id=d&&!o.getBlockById(d)?d:a.utils.genUid(),o.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new a.utils.Size(160,80)},this.xy_=new a.utils.Coordinate(0,0),this.workspace=o,this.isInFlyout=o.isFlyout,this.isInMutator=o.isMutator,this.RTL=o.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,c){if(this.type=c,!(d=a.Blocks[c])||"object"!=typeof d)throw TypeError("Unknown block type: "+c);a.utils.object.mixin(this,d)}o.addTopBlock(this),o.addTypedBlock(this),(o=a.Events.getGroup())||a.Events.setGroup(!0),c=a.Events.recordUndo;try{"function"==typeof this.init&&(a.Events.recordUndo=!1,this.init(),a.Events.recordUndo=c),a.Events.isEnabled()&&a.Events.fire(new(a.Events.get(a.Events.BLOCK_CREATE))(this))}finally{o||a.Events.setGroup(!1),a.Events.recordUndo=c}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},a.Block.COLLAPSED_INPUT_NAME=a.constants.COLLAPSED_INPUT_NAME,a.Block.COLLAPSED_FIELD_NAME=a.constants.COLLAPSED_FIELD_NAME,a.Block.prototype.data=null,a.Block.prototype.disposed=!1,a.Block.prototype.hue_=null,a.Block.prototype.colour_="#000000",a.Block.prototype.styleName_="",a.Block.prototype.dispose=function(o){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(o),a.Events.isEnabled()&&a.Events.fire(new(a.Events.get(a.Events.BLOCK_DELETE))(this)),a.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),a.selected==this&&(a.selected=null);for(var c=this.childBlocks_.length-1;0<=c;c--)this.childBlocks_[c].dispose(!1);c=0;for(var d;d=this.inputList[c];c++)d.dispose();this.inputList.length=0;var v,f=this.getConnections_(!0);for(c=0;v=f[c];c++)v.dispose()}finally{a.Events.enable(),this.disposed=!0}}},a.Block.prototype.initModel=function(){for(var c,o=0;c=this.inputList[o];o++)for(var f,d=0;f=c.fieldRow[d];d++)f.initModel&&f.initModel()},a.Block.prototype.unplug=function(o){this.outputConnection?this.unplugFromRow_(o):this.previousConnection&&this.unplugFromStack_(o)},a.Block.prototype.unplugFromRow_=function(o){var c=null;this.outputConnection.isConnected()&&(c=this.outputConnection.targetConnection,this.outputConnection.disconnect()),c&&o&&(o=this.getOnlyValueConnection_())&&o.isConnected()&&!o.targetBlock().isShadow()&&((o=o.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(o,c,!1)?c.connect(o):o.onFailedConnect(c))},a.Block.prototype.getOnlyValueConnection_=function(){for(var o=null,c=0;c<this.inputList.length;c++){var d=this.inputList[c].connection;if(d&&d.type==a.connectionTypes.INPUT_VALUE&&d.targetConnection){if(o)return null;o=d}}return o},a.Block.prototype.unplugFromStack_=function(o){var c=null;this.previousConnection.isConnected()&&(c=this.previousConnection.targetConnection,this.previousConnection.disconnect());var d=this.getNextBlock();o&&d&&!d.isShadow()&&((o=this.nextConnection.targetConnection).disconnect(),c&&this.workspace.connectionChecker.canConnect(c,o,!1)&&c.connect(o))},a.Block.prototype.getConnections_=function(o){o=[],this.outputConnection&&o.push(this.outputConnection),this.previousConnection&&o.push(this.previousConnection),this.nextConnection&&o.push(this.nextConnection);for(var d,c=0;d=this.inputList[c];c++)d.connection&&o.push(d.connection);return o},a.Block.prototype.lastConnectionInStack=function(o){for(var c=this.nextConnection;c;){var d=c.targetBlock();if(!d||o&&d.isShadow())return c;c=d.nextConnection}return null},a.Block.prototype.bumpNeighbours=function(){},a.Block.prototype.getParent=function(){return this.parentBlock_},a.Block.prototype.getInputWithBlock=function(o){for(var d,c=0;d=this.inputList[c];c++)if(d.connection&&d.connection.targetBlock()==o)return d;return null},a.Block.prototype.getSurroundParent=function(){var o=this;do{var c=o;if(!(o=o.getParent()))return null}while(o.getNextBlock()==c);return o},a.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},a.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},a.Block.prototype.getFirstStatementConnection=function(){for(var c,o=0;c=this.inputList[o];o++)if(c.connection&&c.connection.type==a.connectionTypes.NEXT_STATEMENT)return c.connection;return null},a.Block.prototype.getRootBlock=function(){var o=this;do{var c=o;o=c.parentBlock_}while(o);return c},a.Block.prototype.getTopStackBlock=function(){var o=this;do{var c=o.getPreviousBlock()}while(c&&c.getNextBlock()==o&&(o=c));return o},a.Block.prototype.getChildren=function(o){if(!o)return this.childBlocks_;o=[];for(var d,c=0;d=this.inputList[c];c++)d.connection&&(d=d.connection.targetBlock())&&o.push(d);return(c=this.getNextBlock())&&o.push(c),o},a.Block.prototype.setParent=function(o){if(o!=this.parentBlock_){if(this.parentBlock_){if(a.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=o)?o.childBlocks_.push(this):this.workspace.addTopBlock(this)}},a.Block.prototype.getDescendants=function(o){for(var f,c=[this],d=this.getChildren(o),v=0;f=d[v];v++)c.push.apply(c,f.getDescendants(o));return c},a.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},a.Block.prototype.setDeletable=function(o){this.deletable_=o},a.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},a.Block.prototype.setMovable=function(o){this.movable_=o},a.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(a.utils.getBlockTypeCounts(this,!0))},a.Block.prototype.isShadow=function(){return this.isShadow_},a.Block.prototype.setShadow=function(o){this.isShadow_=o},a.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},a.Block.prototype.setInsertionMarker=function(o){this.isInsertionMarker_=o},a.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},a.Block.prototype.setEditable=function(o){this.editable_=o,o=0;for(var c;c=this.inputList[o];o++)for(var f,d=0;f=c.fieldRow[d];d++)f.updateEditable()},a.Block.prototype.isDisposed=function(){return this.disposed},a.Block.prototype.getMatchingConnection=function(o,c){var d=this.getConnections_(!0);if(o=o.getConnections_(!0),d.length!=o.length)throw Error("Connection lists did not match in length.");for(var f=0;f<o.length;f++)if(o[f]==c)return d[f];return null},a.Block.prototype.setHelpUrl=function(o){this.helpUrl=o},a.Block.prototype.setTooltip=function(o){this.tooltip=o},a.Block.prototype.getTooltip=function(){return a.Tooltip.getTooltipOfObject(this)},a.Block.prototype.getColour=function(){return this.colour_},a.Block.prototype.getStyleName=function(){return this.styleName_},a.Block.prototype.getHue=function(){return this.hue_},a.Block.prototype.setColour=function(o){o=a.utils.parseBlockColour(o),this.hue_=o.hue,this.colour_=o.hex},a.Block.prototype.setStyle=function(o){this.styleName_=o},a.Block.prototype.setOnChange=function(o){if(o&&"function"!=typeof o)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=o)&&(this.onchangeWrapper_=o.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},a.Block.prototype.getField=function(o){if("string"!=typeof o)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===o?"nothing":o+" of type "+typeof o)+" instead");for(var d,c=0;d=this.inputList[c];c++)for(var v,f=0;v=d.fieldRow[f];f++)if(v.name===o)return v;return null},a.Block.prototype.getVars=function(){for(var d,o=[],c=0;d=this.inputList[c];c++)for(var v,f=0;v=d.fieldRow[f];f++)v.referencesVariables()&&o.push(v.getValue());return o},a.Block.prototype.getVarModels=function(){for(var d,o=[],c=0;d=this.inputList[c];c++)for(var v,f=0;v=d.fieldRow[f];f++)v.referencesVariables()&&(v=this.workspace.getVariableById(v.getValue()))&&o.push(v);return o},a.Block.prototype.updateVarName=function(o){for(var d,c=0;d=this.inputList[c];c++)for(var v,f=0;v=d.fieldRow[f];f++)v.referencesVariables()&&o.getId()==v.getValue()&&v.refreshVariableName()},a.Block.prototype.renameVarById=function(o,c){for(var f,d=0;f=this.inputList[d];d++)for(var y,v=0;y=f.fieldRow[v];v++)y.referencesVariables()&&o==y.getValue()&&y.setValue(c)},a.Block.prototype.getFieldValue=function(o){return(o=this.getField(o))?o.getValue():null},a.Block.prototype.setFieldValue=function(o,c){var d=this.getField(c);if(!d)throw Error('Field "'+c+'" not found.');d.setValue(o)},a.Block.prototype.setPreviousStatement=function(o,c){if(o){if(void 0===c&&(c=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(a.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(c)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},a.Block.prototype.setNextStatement=function(o,c){if(o)void 0===c&&(c=null),this.nextConnection||(this.nextConnection=this.makeConnection_(a.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(c);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},a.Block.prototype.setOutput=function(o,c){if(o){if(void 0===c&&(c=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(a.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(c)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},a.Block.prototype.setInputsInline=function(o){this.inputsInline!=o&&(a.Events.fire(new(a.Events.get(a.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,o)),this.inputsInline=o)},a.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var o=1;o<this.inputList.length;o++)if(this.inputList[o-1].type==a.inputTypes.DUMMY&&this.inputList[o].type==a.inputTypes.DUMMY)return!1;for(o=1;o<this.inputList.length;o++)if(this.inputList[o-1].type==a.inputTypes.VALUE&&this.inputList[o].type==a.inputTypes.DUMMY)return!0;return!1},a.Block.prototype.setOutputShape=function(o){this.outputShape_=o},a.Block.prototype.getOutputShape=function(){return this.outputShape_},a.Block.prototype.isEnabled=function(){return!this.disabled},a.Block.prototype.setEnabled=function(o){this.isEnabled()!=o&&(a.Events.fire(new(a.Events.get(a.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!o)),this.disabled=!o)},a.Block.prototype.getInheritedDisabled=function(){for(var o=this.getSurroundParent();o;){if(o.disabled)return!0;o=o.getSurroundParent()}return!1},a.Block.prototype.isCollapsed=function(){return this.collapsed_},a.Block.prototype.setCollapsed=function(o){this.collapsed_!=o&&(a.Events.fire(new(a.Events.get(a.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,o)),this.collapsed_=o)},a.Block.prototype.toString=function(o,c){function d(X){var H=X.getCheck();return!H&&X.targetConnection&&(H=X.targetConnection.getCheck()),!!H&&(-1!=H.indexOf("Boolean")||-1!=H.indexOf("Number"))}function f(){D&&D.getType()==O.getType()&&D.getLocation()==O.getLocation()&&(D=null)}var v=[];c=c||"?";var y=a.ASTNode.NAVIGATE_ALL_FIELDS;a.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var D=a.ASTNode.createBlockNode(this),O=D;D;){switch(D.getType()){case a.ASTNode.types.INPUT:var U=D.getLocation();D.in()?d(U)&&v.push("("):v.push(c);break;case a.ASTNode.types.FIELD:(U=D.getLocation()).name!=a.constants.COLLAPSED_FIELD_NAME&&v.push(U.getText())}if(!(D=(U=D).in()||U.next())){for(D=U.out(),f();D&&!D.next();)D=D.out(),f(),D&&D.getType()==a.ASTNode.types.INPUT&&d(D.getLocation())&&v.push(")");D&&(D=D.next())}}for(a.ASTNode.NAVIGATE_ALL_FIELDS=y,c=2;c<v.length;c++)"("==v[c-2]&&")"==v[c]&&(v[c-2]=v[c-1],v.splice(c-1,2));return v=(v=v.reduce(function(X,H){return X+("("==X.substr(-1)||")"==H?"":" ")+H},"")).trim()||"???",o&&v.length>o&&(v=v.substring(0,o-3)+"..."),v},a.Block.prototype.appendValueInput=function(o){return this.appendInput_(a.inputTypes.VALUE,o)},a.Block.prototype.appendStatementInput=function(o){return this.appendInput_(a.inputTypes.STATEMENT,o)},a.Block.prototype.appendDummyInput=function(o){return this.appendInput_(a.inputTypes.DUMMY,o||"")},a.Block.prototype.jsonInit=function(o){var c=o.type?'Block "'+o.type+'": ':"";if(o.output&&o.previousStatement)throw Error(c+"Must not have both an output and a previousStatement.");if(o.style&&o.style.hat&&(this.hat=o.style.hat,o.style=null),o.style&&o.colour)throw Error(c+"Must not have both a colour and a style.");o.style?this.jsonInitStyle_(o,c):this.jsonInitColour_(o,c);for(var d=0;void 0!==o["message"+d];)this.interpolate_(o["message"+d],o["args"+d]||[],o["lastDummyAlign"+d],c),d++;if(void 0!==o.inputsInline&&this.setInputsInline(o.inputsInline),void 0!==o.output&&this.setOutput(!0,o.output),void 0!==o.outputShape&&this.setOutputShape(o.outputShape),void 0!==o.previousStatement&&this.setPreviousStatement(!0,o.previousStatement),void 0!==o.nextStatement&&this.setNextStatement(!0,o.nextStatement),void 0!==o.tooltip&&(d=a.utils.replaceMessageReferences(d=o.tooltip),this.setTooltip(d)),void 0!==o.enableContextMenu&&(this.contextMenu=!!(d=o.enableContextMenu)),void 0!==o.helpUrl&&(d=a.utils.replaceMessageReferences(d=o.helpUrl),this.setHelpUrl(d)),"string"==typeof o.extensions&&(console.warn(c+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+o.type+"' block."),o.extensions=[o.extensions]),void 0!==o.mutator&&a.Extensions.apply(o.mutator,this,!0),o=o.extensions,Array.isArray(o))for(c=0;c<o.length;++c)a.Extensions.apply(o[c],this,!1)},a.Block.prototype.jsonInitColour_=function(o,c){if("colour"in o)if(void 0===o.colour)console.warn(c+"Undefined colour value.");else{o=o.colour;try{this.setColour(o)}catch(d){console.warn(c+"Illegal colour value: ",o)}}},a.Block.prototype.jsonInitStyle_=function(o,c){o=o.style;try{this.setStyle(o)}catch(d){console.warn(c+"Style does not exist: ",o)}},a.Block.prototype.mixin=function(o,c){if(void 0!==c&&"boolean"!=typeof c)throw Error("opt_disableCheck must be a boolean if provided");if(!c){for(var d in c=[],o)void 0!==this[d]&&c.push(d);if(c.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(c))}a.utils.object.mixin(this,o)},a.Block.prototype.interpolate_=function(o,c,d,f){o=a.utils.tokenizeInterpolation(o),this.validateTokens_(o,c.length),c=this.interpolateArguments_(o,c,d),d=[],o=0;for(var v;v=c[o];o++)if(this.isInputKeyword_(v.type)){if(v=this.inputFromJson_(v,f)){for(var D,y=0;D=d[y];y++)v.appendField(D[0],D[1]);d.length=0}}else(y=this.fieldFromJson_(v))&&d.push([y,v.name])},a.Block.prototype.validateTokens_=function(o,c){for(var d=[],f=0,v=0;v<o.length;v++){var y=o[v];if("number"==typeof y){if(1>y||y>c)throw Error('Block "'+this.type+'": Message index %'+y+" out of range.");if(d[y])throw Error('Block "'+this.type+'": Message index %'+y+" duplicated.");d[y]=!0,f++}}if(f!=c)throw Error('Block "'+this.type+'": Message does not reference all '+c+" arg(s).")},a.Block.prototype.interpolateArguments_=function(o,c,d){for(var f=[],v=0;v<o.length;v++){var y=o[v];"number"==typeof y&&(y=c[y-1]),("string"!=typeof y||(y=this.stringToFieldJson_(y)))&&f.push(y)}return(o=f.length)&&!this.isInputKeyword_(f[o-1].type)&&(o={type:"input_dummy"},d&&(o.align=d),f.push(o)),f},a.Block.prototype.fieldFromJson_=function(o){var c=a.fieldRegistry.fromJson(o);return!c&&o.alt?"string"==typeof o.alt?(o=this.stringToFieldJson_(o.alt))?this.fieldFromJson_(o):null:this.fieldFromJson_(o.alt):c},a.Block.prototype.inputFromJson_=function(o,c){var d={LEFT:a.constants.ALIGN.LEFT,RIGHT:a.constants.ALIGN.RIGHT,CENTRE:a.constants.ALIGN.CENTRE,CENTER:a.constants.ALIGN.CENTRE},f=null;switch(o.type){case"input_value":f=this.appendValueInput(o.name);break;case"input_statement":f=this.appendStatementInput(o.name);break;case"input_dummy":f=this.appendDummyInput(o.name)}return f?(o.check&&f.setCheck(o.check),o.align&&(void 0===(d=d[o.align.toUpperCase()])?console.warn(c+"Illegal align value: ",o.align):f.setAlign(d)),f):null},a.Block.prototype.isInputKeyword_=function(o){return"input_value"==o||"input_statement"==o||"input_dummy"==o},a.Block.prototype.stringToFieldJson_=function(o){return(o=o.trim())?{type:"field_label",text:o}:null},a.Block.prototype.appendInput_=function(o,c){var d=null;return(o==a.inputTypes.VALUE||o==a.inputTypes.STATEMENT)&&(d=this.makeConnection_(o)),o==a.inputTypes.STATEMENT&&this.statementInputCount++,o=new a.Input(o,c,this,d),this.inputList.push(o),o},a.Block.prototype.moveInputBefore=function(o,c){if(o!=c){for(var y,d=-1,f=c?-1:this.inputList.length,v=0;y=this.inputList[v];v++)if(y.name==o){if(d=v,-1!=f)break}else if(c&&y.name==c&&(f=v,-1!=d))break;if(-1==d)throw Error('Named input "'+o+'" not found.');if(-1==f)throw Error('Reference input "'+c+'" not found.');this.moveNumberedInputBefore(d,f)}},a.Block.prototype.moveNumberedInputBefore=function(o,c){if(o==c)throw Error("Can't move input to itself.");if(o>=this.inputList.length)throw RangeError("Input index "+o+" out of bounds.");if(c>this.inputList.length)throw RangeError("Reference input "+c+" out of bounds.");var d=this.inputList[o];this.inputList.splice(o,1),o<c&&c--,this.inputList.splice(c,0,d)},a.Block.prototype.removeInput=function(o,c){for(var f,d=0;f=this.inputList[d];d++)if(f.name==o)return f.type==a.inputTypes.STATEMENT&&this.statementInputCount--,f.dispose(),this.inputList.splice(d,1),!0;if(c)return!1;throw Error("Input not found: "+o)},a.Block.prototype.getInput=function(o){for(var d,c=0;d=this.inputList[c];c++)if(d.name==o)return d;return null},a.Block.prototype.getInputTargetBlock=function(o){return(o=this.getInput(o))&&o.connection&&o.connection.targetBlock()},a.Block.prototype.getCommentText=function(){return this.commentModel.text},a.Block.prototype.setCommentText=function(o){this.commentModel.text!=o&&(a.Events.fire(new(a.Events.get(a.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,o)),this.comment=this.commentModel.text=o)},a.Block.prototype.setWarningText=function(o,c){},a.Block.prototype.setMutator=function(o){},a.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},a.Block.prototype.moveBy=function(o,c){if(this.parentBlock_)throw Error("Block has parent.");var d=new(a.Events.get(a.Events.BLOCK_MOVE))(this);this.xy_.translate(o,c),d.recordNew(),a.Events.fire(d)},a.Block.prototype.makeConnection_=function(o){return new a.Connection(this,o)},a.Block.prototype.allInputsFilled=function(o){if(void 0===o&&(o=!0),!o&&this.isShadow())return!1;for(var d,c=0;d=this.inputList[c];c++)if(d.connection&&(!(d=d.connection.targetBlock())||!d.allInputsFilled(o)))return!1;return!(c=this.getNextBlock())||c.allInputsFilled(o)},a.Block.prototype.toDevString=function(){var o=this.type?'"'+this.type+'" block':"Block";return this.id&&(o+=' (id="'+this.id+'")'),o},a.blockRendering.IPathObject=function(o,c){},a.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},a.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},a.Menu.prototype.addChild=function(o){this.menuItems_.push(o)},a.Menu.prototype.render=function(o){var c=document.createElement("div");c.className="blocklyMenu goog-menu blocklyNonSelectable",c.tabIndex=0,this.roleName_&&a.utils.aria.setRole(c,this.roleName_),this.element_=c;for(var f,d=0;f=this.menuItems_[d];d++)c.appendChild(f.createDom());this.mouseOverHandler_=a.browserEvents.conditionalBind(c,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=a.browserEvents.conditionalBind(c,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=a.browserEvents.conditionalBind(c,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=a.browserEvents.conditionalBind(c,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=a.browserEvents.conditionalBind(c,"keydown",this,this.handleKeyEvent_),o.appendChild(c)},a.Menu.prototype.getElement=function(){return this.element_},a.Menu.prototype.focus=function(){var o=this.getElement();o&&(o.focus({preventScroll:!0}),a.utils.dom.addClass(o,"blocklyFocused"))},a.Menu.prototype.blur_=function(){var o=this.getElement();o&&(o.blur(),a.utils.dom.removeClass(o,"blocklyFocused"))},a.Menu.prototype.setRole=function(o){this.roleName_=o},a.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(a.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(a.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(a.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(a.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(a.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var c,o=0;c=this.menuItems_[o];o++)c.dispose();this.element_=null},a.Menu.prototype.getMenuItem_=function(o){for(var c=this.getElement();o&&o!=c;){if(a.utils.dom.hasClass(o,"blocklyMenuItem"))for(var f,d=0;f=this.menuItems_[d];d++)if(f.getElement()==o)return f;o=o.parentElement}return null},a.Menu.prototype.setHighlighted=function(o){var c=this.highlightedItem_;c&&(c.setHighlighted(!1),this.highlightedItem_=null),o&&(o.setHighlighted(!0),this.highlightedItem_=o,c=this.getElement(),a.utils.style.scrollIntoContainerView(o.getElement(),c),a.utils.aria.setState(c,a.utils.aria.State.ACTIVEDESCENDANT,o.getId()))},a.Menu.prototype.highlightNext=function(){var o=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(o,1)},a.Menu.prototype.highlightPrevious=function(){var o=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>o?this.menuItems_.length:o,-1)},a.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},a.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},a.Menu.prototype.highlightHelper_=function(o,c){o+=c;for(var d;d=this.menuItems_[o];){if(d.isEnabled()){this.setHighlighted(d);break}o+=c}},a.Menu.prototype.handleMouseOver_=function(o){(o=this.getMenuItem_(o.target))&&(o.isEnabled()?this.highlightedItem_!=o&&this.setHighlighted(o):this.setHighlighted(null))},a.Menu.prototype.handleClick_=function(o){var c=this.openingCoords;if(this.openingCoords=null,c&&"number"==typeof o.clientX){var d=new a.utils.Coordinate(o.clientX,o.clientY);if(1>a.utils.Coordinate.distance(c,d))return}(o=this.getMenuItem_(o.target))&&o.performAction()},a.Menu.prototype.handleMouseEnter_=function(o){this.focus()},a.Menu.prototype.handleMouseLeave_=function(o){this.getElement()&&(this.blur_(),this.setHighlighted(null))},a.Menu.prototype.handleKeyEvent_=function(o){if(this.menuItems_.length&&!(o.shiftKey||o.ctrlKey||o.metaKey||o.altKey)){var c=this.highlightedItem_;switch(o.keyCode){case a.utils.KeyCodes.ENTER:case a.utils.KeyCodes.SPACE:c&&c.performAction();break;case a.utils.KeyCodes.UP:this.highlightPrevious();break;case a.utils.KeyCodes.DOWN:this.highlightNext();break;case a.utils.KeyCodes.PAGE_UP:case a.utils.KeyCodes.HOME:this.highlightFirst_();break;case a.utils.KeyCodes.PAGE_DOWN:case a.utils.KeyCodes.END:this.highlightLast_();break;default:return}o.preventDefault(),o.stopPropagation()}},a.Menu.prototype.getSize=function(){var o=this.getElement(),c=a.utils.style.getSize(o);return c.height=o.scrollHeight,c},a.MenuItem=function(o,c){this.content_=o,this.value_=c,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},a.MenuItem.prototype.createDom=function(){var o=document.createElement("div");o.id=a.utils.IdGenerator.getNextUniqueId(),this.element_=o,o.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var c=document.createElement("div");if(c.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var d=document.createElement("div");d.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",c.appendChild(d)}return d=this.content_,"string"==typeof this.content_&&(d=document.createTextNode(this.content_)),c.appendChild(d),o.appendChild(c),this.roleName_&&a.utils.aria.setRole(o,this.roleName_),a.utils.aria.setState(o,a.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),a.utils.aria.setState(o,a.utils.aria.State.DISABLED,!this.enabled_),o},a.MenuItem.prototype.dispose=function(){this.element_=null},a.MenuItem.prototype.getElement=function(){return this.element_},a.MenuItem.prototype.getId=function(){return this.element_.id},a.MenuItem.prototype.getValue=function(){return this.value_},a.MenuItem.prototype.setRightToLeft=function(o){this.rightToLeft_=o},a.MenuItem.prototype.setRole=function(o){this.roleName_=o},a.MenuItem.prototype.setCheckable=function(o){this.checkable_=o},a.MenuItem.prototype.setChecked=function(o){this.checked_=o},a.MenuItem.prototype.setHighlighted=function(o){this.highlight_=o;var c=this.getElement();c&&this.isEnabled()&&(o?(a.utils.dom.addClass(c,"blocklyMenuItemHighlight"),a.utils.dom.addClass(c,"goog-menuitem-highlight")):(a.utils.dom.removeClass(c,"blocklyMenuItemHighlight"),a.utils.dom.removeClass(c,"goog-menuitem-highlight")))},a.MenuItem.prototype.isEnabled=function(){return this.enabled_},a.MenuItem.prototype.setEnabled=function(o){this.enabled_=o},a.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},a.MenuItem.prototype.onAction=function(o,c){this.actionHandler_=o.bind(c)},a.ContextMenu={},a.ContextMenu.currentBlock=null,a.ContextMenu.menu_=null,a.ContextMenu.show=function(o,c,d){if(a.WidgetDiv.show(a.ContextMenu,d,a.ContextMenu.dispose),c.length){var f=a.ContextMenu.populate_(c,d);a.ContextMenu.menu_=f,a.ContextMenu.position_(f,o,d),setTimeout(function(){f.focus()},1),a.ContextMenu.currentBlock=null}else a.ContextMenu.hide()},a.ContextMenu.populate_=function(o,c){var d=new a.Menu;d.setRole(a.utils.aria.Role.MENU);for(var v,f=0;v=o[f];f++){var y=new a.MenuItem(v.text);y.setRightToLeft(c),y.setRole(a.utils.aria.Role.MENUITEM),d.addChild(y),y.setEnabled(v.enabled),v.enabled&&y.onAction(function(D){a.ContextMenu.hide(),this.callback(this.scope)},v)}return d},a.ContextMenu.position_=function(o,c,d){var f=a.utils.getViewportBBox();c=new a.utils.Rect(c.clientY+f.top,c.clientY+f.top,c.clientX+f.left,c.clientX+f.left),a.ContextMenu.createWidget_(o);var v=o.getSize();d&&(c.left+=v.width,c.right+=v.width,f.left+=v.width,f.right+=v.width),a.WidgetDiv.positionWithAnchor(f,c,v,d),o.focus()},a.ContextMenu.createWidget_=function(o){o.render(a.WidgetDiv.DIV);var c=o.getElement();a.utils.dom.addClass(c,"blocklyContextMenu"),a.browserEvents.conditionalBind(c,"contextmenu",null,a.utils.noEvent),o.focus()},a.ContextMenu.hide=function(){a.WidgetDiv.hideIfOwner(a.ContextMenu),a.ContextMenu.currentBlock=null},a.ContextMenu.dispose=function(){a.ContextMenu.menu_&&(a.ContextMenu.menu_.dispose(),a.ContextMenu.menu_=null)},a.ContextMenu.callbackFactory=function(o,c){return function(){a.Events.disable();try{var d=a.Xml.domToBlock(c,o.workspace),f=o.getRelativeToSurfaceXY();f.x=o.RTL?f.x-a.SNAP_RADIUS:f.x+a.SNAP_RADIUS,f.y+=2*a.SNAP_RADIUS,d.moveBy(f.x,f.y)}finally{a.Events.enable()}a.Events.isEnabled()&&!d.isShadow()&&a.Events.fire(new(a.Events.get(a.Events.BLOCK_CREATE))(d)),d.select()}},a.ContextMenu.commentDeleteOption=function(o){return{text:a.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){a.Events.setGroup(!0),o.dispose(!0,!0),a.Events.setGroup(!1)}}},a.ContextMenu.commentDuplicateOption=function(o){return{text:a.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){a.duplicate(o)}}},a.ContextMenu.workspaceCommentOption=function(o,c){if(!a.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var d={enabled:!a.utils.userAgent.IE};return d.text=a.Msg.ADD_COMMENT,d.callback=function(){var f=new a.WorkspaceCommentSvg(o,a.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,a.WorkspaceCommentSvg.DEFAULT_SIZE,a.WorkspaceCommentSvg.DEFAULT_SIZE),v=o.getInjectionDiv().getBoundingClientRect();v=new a.utils.Coordinate(c.clientX-v.left,c.clientY-v.top);var y=o.getOriginOffsetInPixels();(v=a.utils.Coordinate.difference(v,y)).scale(1/o.scale),f.moveBy(v.x,v.y),o.rendered&&(f.initSvg(),f.render(),f.select())},d},a.ContextMenuRegistry=function(){a.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},a.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},a.ContextMenuRegistry.registry=null,a.ContextMenuRegistry.prototype.register=function(o){if(this.registry_[o.id])throw Error('Menu item with ID "'+o.id+'" is already registered.');this.registry_[o.id]=o},a.ContextMenuRegistry.prototype.unregister=function(o){if(!this.registry_[o])throw Error('Menu item with ID "'+o+'" not found.');delete this.registry_[o]},a.ContextMenuRegistry.prototype.getItem=function(o){return this.registry_[o]||null},a.ContextMenuRegistry.prototype.getContextMenuOptions=function(o,c){var d=[],f=this.registry_;return Object.keys(f).forEach(function(v){if(o==(v=f[v]).scopeType){var y=v.preconditionFn(c);"hidden"!=y&&(v={text:"function"==typeof v.displayText?v.displayText(c):v.displayText,enabled:"enabled"==y,callback:v.callback,scope:c,weight:v.weight},d.push(v))}}),d.sort(function(v,y){return v.weight-y.weight}),d},new a.ContextMenuRegistry,a.Events.Selected=function(o,c,d){a.Events.Selected.superClass_.constructor.call(this,d),this.oldElementId=o,this.newElementId=c},a.utils.object.inherits(a.Events.Selected,a.Events.UiBase),a.Events.Selected.prototype.type=a.Events.SELECTED,a.Events.Selected.prototype.toJson=function(){var o=a.Events.Selected.superClass_.toJson.call(this);return o.oldElementId=this.oldElementId,o.newElementId=this.newElementId,o},a.Events.Selected.prototype.fromJson=function(o){a.Events.Selected.superClass_.fromJson.call(this,o),this.oldElementId=o.oldElementId,this.newElementId=o.newElementId},a.registry.register(a.registry.Type.EVENT,a.Events.SELECTED,a.Events.Selected),a.IBoundedElement=function(){},a.ICopyable=function(){},a.RenderedConnection=function(o,c){a.RenderedConnection.superClass_.constructor.call(this,o,c),this.db_=o.workspace.connectionDBList[c],this.dbOpposite_=o.workspace.connectionDBList[a.OPPOSITE_TYPE[c]],this.offsetInBlock_=new a.utils.Coordinate(0,0),this.trackedState_=a.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},a.utils.object.inherits(a.RenderedConnection,a.Connection),a.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},a.RenderedConnection.prototype.dispose=function(){a.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==a.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},a.RenderedConnection.prototype.getSourceBlock=function(){return a.RenderedConnection.superClass_.getSourceBlock.call(this)},a.RenderedConnection.prototype.targetBlock=function(){return a.RenderedConnection.superClass_.targetBlock.call(this)},a.RenderedConnection.prototype.distanceFrom=function(o){var c=this.x-o.x;return o=this.y-o.y,Math.sqrt(c*c+o*o)},a.RenderedConnection.prototype.bumpAwayFrom=function(o){if(!this.sourceBlock_.workspace.isDragging()){var c=this.sourceBlock_.getRootBlock();if(!c.isInFlyout){var d=!1;if(!c.isMovable()){if(!(c=o.getSourceBlock().getRootBlock()).isMovable())return;o=this,d=!0}var f=a.selected==c;f||c.addSelect();var v=o.x+a.SNAP_RADIUS+Math.floor(Math.random()*a.BUMP_RANDOMNESS)-this.x,y=o.y+a.SNAP_RADIUS+Math.floor(Math.random()*a.BUMP_RANDOMNESS)-this.y;d&&(y=-y),c.RTL&&(v=o.x-a.SNAP_RADIUS-Math.floor(Math.random()*a.BUMP_RANDOMNESS)-this.x),c.moveBy(v,y),f||c.removeSelect()}}},a.RenderedConnection.prototype.moveTo=function(o,c){this.trackedState_==a.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,c),this.trackedState_=a.RenderedConnection.TrackedState.TRACKED):this.trackedState_==a.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,c)),this.x=o,this.y=c},a.RenderedConnection.prototype.moveBy=function(o,c){this.moveTo(this.x+o,this.y+c)},a.RenderedConnection.prototype.moveToOffset=function(o){this.moveTo(o.x+this.offsetInBlock_.x,o.y+this.offsetInBlock_.y)},a.RenderedConnection.prototype.setOffsetInBlock=function(o,c){this.offsetInBlock_.x=o,this.offsetInBlock_.y=c},a.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},a.RenderedConnection.prototype.tighten=function(){var o=this.targetConnection.x-this.x,c=this.targetConnection.y-this.y;if(0!=o||0!=c){var d=this.targetBlock(),f=d.getSvgRoot();if(!f)throw Error("block is not rendered.");f=a.utils.getRelativeXY(f),d.getSvgRoot().setAttribute("transform","translate("+(f.x-o)+","+(f.y-c)+")"),d.moveConnections(-o,-c)}},a.RenderedConnection.prototype.closest=function(o,c){return this.dbOpposite_.searchForClosest(this,o,c)},a.RenderedConnection.prototype.highlight=function(){var o=this.sourceBlock_.workspace.getRenderer().getConstants(),c=o.shapeFor(this);c=this.type==a.connectionTypes.INPUT_VALUE||this.type==a.connectionTypes.OUTPUT_VALUE?a.utils.svgPaths.moveBy(0,-(o=o.TAB_OFFSET_FROM_TOP))+a.utils.svgPaths.lineOnAxis("v",o)+c.pathDown+a.utils.svgPaths.lineOnAxis("v",o):a.utils.svgPaths.moveBy(-(o=o.NOTCH_OFFSET_LEFT-o.CORNER_RADIUS),0)+a.utils.svgPaths.lineOnAxis("h",o)+c.pathLeft+a.utils.svgPaths.lineOnAxis("h",o),o=this.sourceBlock_.getRelativeToSurfaceXY(),a.Connection.highlightedPath_=a.utils.dom.createSvgElement(a.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:c,transform:"translate("+(this.x-o.x)+","+(this.y-o.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},a.RenderedConnection.prototype.unhighlight=function(){a.utils.dom.removeNode(a.Connection.highlightedPath_),delete a.Connection.highlightedPath_},a.RenderedConnection.prototype.setTracking=function(o){o&&this.trackedState_==a.RenderedConnection.TrackedState.TRACKED||!o&&this.trackedState_==a.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(o?(this.db_.addConnection(this,this.y),this.trackedState_=a.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==a.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=a.RenderedConnection.TrackedState.UNTRACKED))},a.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var o=this.targetBlock().getDescendants(!1),c=0;c<o.length;c++){for(var d=o[c],f=d.getConnections_(!0),v=0;v<f.length;v++)f[v].setTracking(!1);for(d=d.getIcons(),v=0;v<d.length;v++)d[v].setVisible(!1)}},a.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var o=[];if(this.type!=a.connectionTypes.INPUT_VALUE&&this.type!=a.connectionTypes.NEXT_STATEMENT)return o;var c=this.targetBlock();if(c){if(c.isCollapsed()){var d=[];c.outputConnection&&d.push(c.outputConnection),c.nextConnection&&d.push(c.nextConnection),c.previousConnection&&d.push(c.previousConnection)}else d=c.getConnections_(!0);for(var f=0;f<d.length;f++)o.push.apply(o,d[f].startTrackingAll());o.length||(o[0]=c)}return o},a.RenderedConnection.prototype.isConnectionAllowed=function(o,c){return a.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(o)>c)&&a.RenderedConnection.superClass_.isConnectionAllowed.call(this,o)},a.RenderedConnection.prototype.onFailedConnect=function(o){var c=this.getSourceBlock();if(a.Events.recordUndo){var d=a.Events.getGroup();setTimeout(function(){c.isDisposed()||c.getParent()||(a.Events.setGroup(d),this.bumpAwayFrom(o),a.Events.setGroup(!1))}.bind(this),a.BUMP_DELAY)}},a.RenderedConnection.prototype.disconnectInternal_=function(o,c){a.RenderedConnection.superClass_.disconnectInternal_.call(this,o,c),o.rendered&&o.render(),c.rendered&&(c.updateDisabled(),c.render(),c.getSvgRoot().style.display="block")},a.RenderedConnection.prototype.respawnShadow_=function(){a.RenderedConnection.superClass_.respawnShadow_.call(this);var o=this.targetBlock();o&&(o.initSvg(),o.render(!1),(o=this.getSourceBlock()).rendered&&o.render())},a.RenderedConnection.prototype.neighbours=function(o){return this.dbOpposite_.getNeighbours(this,o)},a.RenderedConnection.prototype.connect_=function(o){a.RenderedConnection.superClass_.connect_.call(this,o);var c=this.getSourceBlock();o=o.getSourceBlock();var d=c.rendered,f=o.rendered;d&&c.updateDisabled(),f&&o.updateDisabled(),d&&f&&(this.type==a.connectionTypes.NEXT_STATEMENT||this.type==a.connectionTypes.PREVIOUS_STATEMENT?o.render():c.render()),(c=c.getInputWithBlock(o))&&(c=c.isVisible(),o.getSvgRoot().style.display=c?"block":"none")},a.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},a.BasicCursor=function(){a.BasicCursor.superClass_.constructor.call(this)},a.utils.object.inherits(a.BasicCursor,a.Cursor),a.BasicCursor.registrationName="basicCursor",a.BasicCursor.prototype.next=function(){var o=this.getCurNode();return o?((o=this.getNextNode_(o,this.validNode_))&&this.setCurNode(o),o):null},a.BasicCursor.prototype.in=function(){return this.next()},a.BasicCursor.prototype.prev=function(){var o=this.getCurNode();return o?((o=this.getPreviousNode_(o,this.validNode_))&&this.setCurNode(o),o):null},a.BasicCursor.prototype.out=function(){return this.prev()},a.BasicCursor.prototype.getNextNode_=function(o,c){if(!o)return null;var d=o.in()||o.next();return c(d)?d:d?this.getNextNode_(d,c):c(o=this.findSiblingOrParent_(o.out()))?o:o?this.getNextNode_(o,c):null},a.BasicCursor.prototype.getPreviousNode_=function(o,c){if(!o)return null;var d=o.prev();return c(d=d?this.getRightMostChild_(d):o.out())?d:d?this.getPreviousNode_(d,c):null},a.BasicCursor.prototype.validNode_=function(o){var c=!1;return((o=o&&o.getType())==a.ASTNode.types.OUTPUT||o==a.ASTNode.types.INPUT||o==a.ASTNode.types.FIELD||o==a.ASTNode.types.NEXT||o==a.ASTNode.types.PREVIOUS||o==a.ASTNode.types.WORKSPACE)&&(c=!0),c},a.BasicCursor.prototype.findSiblingOrParent_=function(o){return o?o.next()||this.findSiblingOrParent_(o.out()):null},a.BasicCursor.prototype.getRightMostChild_=function(o){if(!o.in())return o;for(o=o.in();o.next();)o=o.next();return this.getRightMostChild_(o)},a.registry.register(a.registry.Type.CURSOR,a.BasicCursor.registrationName,a.BasicCursor),a.TabNavigateCursor=function(){a.TabNavigateCursor.superClass_.constructor.call(this)},a.utils.object.inherits(a.TabNavigateCursor,a.BasicCursor),a.TabNavigateCursor.prototype.validNode_=function(o){var c=!1,d=o&&o.getType();return o&&(o=o.getLocation(),d==a.ASTNode.types.FIELD&&o&&o.isTabNavigable()&&o.isClickable()&&(c=!0)),c},a.BlockSvg=function(o,c,d){this.svgGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=o.getRenderer().getConstants().getBlockStyle(null),this.pathObject=o.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=o,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=a.utils.is3dSupported()&&!!o.getBlockDragSurface();var f=this.pathObject.svgPath;f.tooltip=this,a.Tooltip.bindMouseEvents(f),a.BlockSvg.superClass_.constructor.call(this,o,c,d),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:a.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},a.utils.object.inherits(a.BlockSvg,a.Block),a.BlockSvg.prototype.height=0,a.BlockSvg.prototype.width=0,a.BlockSvg.prototype.warningTextDb_=null,a.BlockSvg.INLINE=-1,a.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",a.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var c,o=0;c=this.inputList[o];o++)c.init();for(c=this.getIcons(),o=0;o<c.length;o++)c[o].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),o=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!o||a.browserEvents.conditionalBind(o,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,o.parentNode||this.workspace.getCanvas().appendChild(o)},a.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},a.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},a.BlockSvg.prototype.getColourShadow=function(){return a.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},a.BlockSvg.prototype.getColourBorder=function(){return a.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},a.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(a.selected!=this){var o=null;if(a.selected){o=a.selected.id,a.Events.disable();try{a.selected.unselect()}finally{a.Events.enable()}}o=new(a.Events.get(a.Events.SELECTED))(o,this.id,this.workspace.id),a.Events.fire(o),a.selected=this,this.addSelect()}},a.BlockSvg.prototype.unselect=function(){if(a.selected==this){var o=new(a.Events.get(a.Events.SELECTED))(this.id,null,this.workspace.id);o.workspaceId=this.workspace.id,a.Events.fire(o),a.selected=null,this.removeSelect()}},a.BlockSvg.prototype.mutator=null,a.BlockSvg.prototype.comment=null,a.BlockSvg.prototype.commentIcon_=null,a.BlockSvg.prototype.warning=null,a.BlockSvg.prototype.getIcons=function(){var o=[];return this.mutator&&o.push(this.mutator),this.commentIcon_&&o.push(this.commentIcon_),this.warning&&o.push(this.warning),o},a.BlockSvg.prototype.setParent=function(o){var c=this.parentBlock_;if(o!=c){a.utils.dom.startTextWidthCache(),a.BlockSvg.superClass_.setParent.call(this,o),a.utils.dom.stopTextWidthCache();var d=this.getSvgRoot();if(!this.workspace.isClearing&&d){var f=this.getRelativeToSurfaceXY();o?(o.getSvgRoot().appendChild(d),o=this.getRelativeToSurfaceXY(),this.moveConnections(o.x-f.x,o.y-f.y)):c&&(this.workspace.getCanvas().appendChild(d),this.translate(f.x,f.y)),this.applyColour()}}},a.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var o=0,c=0,d=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,f=this.getSvgRoot();if(f)do{var v=a.utils.getRelativeXY(f);o+=v.x,c+=v.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==f&&(o+=(v=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,c+=v.y),f=f.parentNode}while(f&&f!=this.workspace.getCanvas()&&f!=d);return new a.utils.Coordinate(o,c)},a.BlockSvg.prototype.moveBy=function(o,c){if(this.parentBlock_)throw Error("Block has parent.");var d=a.Events.isEnabled();if(d)var f=new(a.Events.get(a.Events.BLOCK_MOVE))(this);var v=this.getRelativeToSurfaceXY();this.translate(v.x+o,v.y+c),this.moveConnections(o,c),d&&(f.recordNew(),a.Events.fire(f)),this.workspace.resizeContents()},a.BlockSvg.prototype.translate=function(o,c){this.getSvgRoot().setAttribute("transform","translate("+o+","+c+")")},a.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var o=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(o.x,o.y),(o=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(o)}},a.BlockSvg.prototype.moveTo=function(o){var c=this.getRelativeToSurfaceXY();this.moveBy(o.x-c.x,o.y-c.y)},a.BlockSvg.prototype.moveOffDragSurface=function(o){this.useDragSurface_&&(this.translate(o.x,o.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},a.BlockSvg.prototype.moveDuringDrag=function(o){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(o.x,o.y):(this.svgGroup_.translate_="translate("+o.x+","+o.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},a.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},a.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var o=this.workspace.getGrid();if(o&&o.shouldSnap()){var c=o.getSpacing(),d=c/2,f=this.getRelativeToSurfaceXY();o=Math.round((f.x-d)/c)*c+d-f.x,c=Math.round((f.y-d)/c)*c+d-f.y,o=Math.round(o),c=Math.round(c),0==o&&0==c||this.moveBy(o,c)}}},a.BlockSvg.prototype.getBoundingRectangle=function(){var o=this.getRelativeToSurfaceXY(),c=this.getHeightWidth();if(this.RTL)var d=o.x-c.width,f=o.x;else d=o.x,f=o.x+c.width;return new a.utils.Rect(o.y,o.y+c.height,d,f)},a.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var c,o=0;c=this.inputList[o];o++)c.markDirty()},a.BlockSvg.prototype.setCollapsed=function(o){this.collapsed_!=o&&(a.BlockSvg.superClass_.setCollapsed.call(this,o),o?this.rendered&&this.render():this.updateCollapsed_())},a.BlockSvg.prototype.updateCollapsed_=function(){for(var v,o=this.isCollapsed(),c=a.constants.COLLAPSED_INPUT_NAME,d=a.constants.COLLAPSED_FIELD_NAME,f=0;v=this.inputList[f];f++)v.name!=c&&v.setVisible(!o);if(o){for(v=this.getIcons(),f=0;o=v[f];f++)o.setVisible(!1);f=this.toString(a.COLLAPSE_CHARS),(v=this.getField(d))?v.setValue(f):(v=this.getInput(c)||this.appendDummyInput(c)).appendField(new a.FieldLabel(f),d)}else this.updateDisabled(),this.removeInput(c)},a.BlockSvg.prototype.tab=function(o,c){var d=new a.TabNavigateCursor;d.setCurNode(a.ASTNode.createFieldNode(o)),o=d.getCurNode(),c?d.next():d.prev(),(c=d.getCurNode())&&c!==o&&(c.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(c))},a.BlockSvg.prototype.onMouseDown_=function(o){var c=this.workspace&&this.workspace.getGesture(o);c&&c.handleBlockStart(o,this)},a.BlockSvg.prototype.showHelp=function(){var o="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;o&&window.open(o)},a.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var o=a.ContextMenuRegistry.registry.getContextMenuOptions(a.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(o),o},a.BlockSvg.prototype.showContextMenu=function(o){var c=this.generateContextMenu();c&&c.length&&(a.ContextMenu.show(o,c,this.RTL),a.ContextMenu.currentBlock=this)},a.BlockSvg.prototype.moveConnections=function(o,c){if(this.rendered){for(var d=this.getConnections_(!1),f=0;f<d.length;f++)d[f].moveBy(o,c);for(d=this.getIcons(),f=0;f<d.length;f++)d[f].computeIconLocation();for(f=0;f<this.childBlocks_.length;f++)this.childBlocks_[f].moveConnections(o,c)}},a.BlockSvg.prototype.setDragging=function(o){if(o){var c=this.getSvgRoot();c.translate_="",c.skew_="",a.draggingConnections=a.draggingConnections.concat(this.getConnections_(!0)),a.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else a.draggingConnections=[],a.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(c=0;c<this.childBlocks_.length;c++)this.childBlocks_[c].setDragging(o)},a.BlockSvg.prototype.setMovable=function(o){a.BlockSvg.superClass_.setMovable.call(this,o),this.pathObject.updateMovable(o)},a.BlockSvg.prototype.setEditable=function(o){a.BlockSvg.superClass_.setEditable.call(this,o),o=this.getIcons();for(var c=0;c<o.length;c++)o[c].updateEditable()},a.BlockSvg.prototype.setShadow=function(o){a.BlockSvg.superClass_.setShadow.call(this,o),this.applyColour()},a.BlockSvg.prototype.setInsertionMarker=function(o){this.isInsertionMarker_!=o&&(this.isInsertionMarker_=o)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},a.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},a.BlockSvg.prototype.dispose=function(o,c){if(this.workspace){a.Tooltip.dispose(),a.Tooltip.unbindMouseEvents(this.pathObject.svgPath),a.utils.dom.startTextWidthCache();var d=this.workspace;if(a.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),a.ContextMenu.currentBlock==this&&a.ContextMenu.hide(),c&&this.rendered&&(this.unplug(o),a.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var f in this.warningTextDb_)clearTimeout(this.warningTextDb_[f]);this.warningTextDb_=null}for(c=this.getIcons(),f=0;f<c.length;f++)c[f].dispose();a.BlockSvg.superClass_.dispose.call(this,!!o),a.utils.dom.removeNode(this.svgGroup_),d.resizeContents(),this.svgGroup_=null,a.utils.dom.stopTextWidthCache()}},a.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var o=a.Xml.blockToDom(this,!0);a.Xml.deleteNext(o);var c=this.getRelativeToSurfaceXY();return o.setAttribute("x",this.RTL?-c.x:c.x),o.setAttribute("y",c.y),{xml:o,source:this.workspace,typeCounts:a.utils.getBlockTypeCounts(this,!0)}},a.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var o=this.getIcons(),c=0;c<o.length;c++)o[c].applyColour();for(o=0;c=this.inputList[o];o++)for(var f,d=0;f=c.fieldRow[d];d++)f.applyColour()},a.BlockSvg.prototype.updateDisabled=function(){var o=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var d,c=0;d=o[c];c++)d.rendered&&d.updateDisabled()},a.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},a.BlockSvg.prototype.setCommentText=function(o){if(!a.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=o&&(a.BlockSvg.superClass_.setCommentText.call(this,o),!!this.commentIcon_==(o=null!=o)?this.commentIcon_.updateText():(o?this.comment=this.commentIcon_=new a.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},a.BlockSvg.prototype.setWarningText=function(o,c){if(!a.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var d=c||"";if(d)this.warningTextDb_[d]&&(clearTimeout(this.warningTextDb_[d]),delete this.warningTextDb_[d]);else for(var f in this.warningTextDb_)clearTimeout(this.warningTextDb_[f]),delete this.warningTextDb_[f];if(this.workspace.isDragging()){var v=this;this.warningTextDb_[d]=setTimeout(function(){v.workspace&&(delete v.warningTextDb_[d],v.setWarningText(o,d))},100)}else{if(this.isInFlyout&&(o=null),c=!1,"string"==typeof o){f=this.getSurroundParent();for(var y=null;f;)f.isCollapsed()&&(y=f),f=f.getSurroundParent();y&&y.setWarningText(a.Msg.COLLAPSED_WARNINGS_WARNING,a.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new a.Warning(this),c=!0),this.warning.setText(o,d)}else this.warning&&!d?(this.warning.dispose(),c=!0):this.warning&&(c=this.warning.getText(),this.warning.setText("",d),(f=this.warning.getText())||this.warning.dispose(),c=c!=f);c&&this.rendered&&(this.render(),this.bumpNeighbours())}},a.BlockSvg.prototype.setMutator=function(o){this.mutator&&this.mutator!==o&&this.mutator.dispose(),o&&(o.setBlock(this),this.mutator=o,o.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},a.BlockSvg.prototype.setEnabled=function(o){this.isEnabled()!=o&&(a.BlockSvg.superClass_.setEnabled.call(this,o),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},a.BlockSvg.prototype.setHighlighted=function(o){this.rendered&&this.pathObject.updateHighlighted(o)},a.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},a.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},a.BlockSvg.prototype.setDeleteStyle=function(o){this.pathObject.updateDraggingDelete(o)},a.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},a.BlockSvg.prototype.setColour=function(o){a.BlockSvg.superClass_.setColour.call(this,o),o=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(o.style),this.style=o.style,this.styleName_=o.name,this.applyColour()},a.BlockSvg.prototype.setStyle=function(o){var c=this.workspace.getRenderer().getConstants().getBlockStyle(o);if(this.styleName_=o,!c)throw Error("Invalid style name: "+o);this.hat=c.hat,this.pathObject.setStyle(c),this.colour_=c.colourPrimary,this.style=c,this.applyColour()},a.BlockSvg.prototype.bringToFront=function(){var o=this;do{var c=o.getSvgRoot(),d=c.parentNode,f=d.childNodes;f[f.length-1]!==c&&d.appendChild(c),o=o.getParent()}while(o)},a.BlockSvg.prototype.setPreviousStatement=function(o,c){a.BlockSvg.superClass_.setPreviousStatement.call(this,o,c),this.rendered&&(this.render(),this.bumpNeighbours())},a.BlockSvg.prototype.setNextStatement=function(o,c){a.BlockSvg.superClass_.setNextStatement.call(this,o,c),this.rendered&&(this.render(),this.bumpNeighbours())},a.BlockSvg.prototype.setOutput=function(o,c){a.BlockSvg.superClass_.setOutput.call(this,o,c),this.rendered&&(this.render(),this.bumpNeighbours())},a.BlockSvg.prototype.setInputsInline=function(o){a.BlockSvg.superClass_.setInputsInline.call(this,o),this.rendered&&(this.render(),this.bumpNeighbours())},a.BlockSvg.prototype.removeInput=function(o,c){return o=a.BlockSvg.superClass_.removeInput.call(this,o,c),this.rendered&&(this.render(),this.bumpNeighbours()),o},a.BlockSvg.prototype.moveNumberedInputBefore=function(o,c){a.BlockSvg.superClass_.moveNumberedInputBefore.call(this,o,c),this.rendered&&(this.render(),this.bumpNeighbours())},a.BlockSvg.prototype.appendInput_=function(o,c){return o=a.BlockSvg.superClass_.appendInput_.call(this,o,c),this.rendered&&(this.render(),this.bumpNeighbours()),o},a.BlockSvg.prototype.setConnectionTracking=function(o){if(this.previousConnection&&this.previousConnection.setTracking(o),this.outputConnection&&this.outputConnection.setTracking(o),this.nextConnection){this.nextConnection.setTracking(o);var c=this.nextConnection.targetBlock();c&&c.setConnectionTracking(o)}if(!this.collapsed_)for(c=0;c<this.inputList.length;c++){var d=this.inputList[c].connection;d&&(d.setTracking(o),(d=d.targetBlock())&&d.setConnectionTracking(o))}},a.BlockSvg.prototype.getConnections_=function(o){var c=[];if((o||this.rendered)&&(this.outputConnection&&c.push(this.outputConnection),this.previousConnection&&c.push(this.previousConnection),this.nextConnection&&c.push(this.nextConnection),o||!this.collapsed_)){o=0;for(var d;d=this.inputList[o];o++)d.connection&&c.push(d.connection)}return c},a.BlockSvg.prototype.lastConnectionInStack=function(o){return a.BlockSvg.superClass_.lastConnectionInStack.call(this,o)},a.BlockSvg.prototype.getMatchingConnection=function(o,c){return a.BlockSvg.superClass_.getMatchingConnection.call(this,o,c)},a.BlockSvg.prototype.makeConnection_=function(o){return new a.RenderedConnection(this,o)},a.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var o=this.getRootBlock();if(!o.isInFlyout)for(var f,c=this.getConnections_(!1),d=0;f=c[d];d++){f.isConnected()&&f.isSuperior()&&f.targetBlock().bumpNeighbours();for(var D,v=f.neighbours(a.SNAP_RADIUS),y=0;D=v[y];y++)f.isConnected()&&D.isConnected()||D.getSourceBlock().getRootBlock()!=o&&(f.isSuperior()?D.bumpAwayFrom(f):f.bumpAwayFrom(D))}}},a.BlockSvg.prototype.scheduleSnapAndBump=function(){var o=this,c=a.Events.getGroup();setTimeout(function(){a.Events.setGroup(c),o.snapToGrid(),a.Events.setGroup(!1)},a.BUMP_DELAY/2),setTimeout(function(){a.Events.setGroup(c),o.bumpNeighbours(),a.Events.setGroup(!1)},a.BUMP_DELAY)},a.BlockSvg.prototype.positionNearConnection=function(o,c){o.type!=a.connectionTypes.NEXT_STATEMENT&&o.type!=a.connectionTypes.INPUT_VALUE||this.moveBy(c.x-o.x,c.y-o.y)},a.BlockSvg.prototype.getParent=function(){return a.BlockSvg.superClass_.getParent.call(this)},a.BlockSvg.prototype.getRootBlock=function(){return a.BlockSvg.superClass_.getRootBlock.call(this)},a.BlockSvg.prototype.render=function(o){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,a.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==o){var c=this.getParent();c?c.render(!0):this.workspace.resizeContents()}a.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},a.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(a.MarkerManager.LOCAL_MARKER).draw()},a.BlockSvg.prototype.updateConnectionLocations_=function(){var o=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(o),this.outputConnection&&this.outputConnection.moveToOffset(o);for(var c=0;c<this.inputList.length;c++){var d=this.inputList[c].connection;d&&(d.moveToOffset(o),d.isConnected()&&d.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(o),this.nextConnection.isConnected()&&this.nextConnection.tighten())},a.BlockSvg.prototype.setCursorSvg=function(o){this.pathObject.setCursorSvg(o)},a.BlockSvg.prototype.setMarkerSvg=function(o){this.pathObject.setMarkerSvg(o)},a.BlockSvg.prototype.getHeightWidth=function(){var o=this.height,c=this.width,d=this.getNextBlock();if(d){d=d.getHeightWidth();var f=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;o+=d.height-f,c=Math.max(c,d.width)}return{height:o,width:c}},a.BlockSvg.prototype.fadeForReplacement=function(o){this.pathObject.updateReplacementFade(o)},a.BlockSvg.prototype.highlightShapeForInput=function(o,c){this.pathObject.updateShapeForInputHighlight(o,c)},a.ConnectionDB=function(o){this.connections_=[],this.connectionChecker_=o},a.ConnectionDB.prototype.addConnection=function(o,c){c=this.calculateIndexForYPos_(c),this.connections_.splice(c,0,o)},a.ConnectionDB.prototype.findIndexOfConnection_=function(o,c){if(!this.connections_.length)return-1;var d=this.calculateIndexForYPos_(c);if(d>=this.connections_.length)return-1;c=o.y;for(var f=d;0<=f&&this.connections_[f].y==c;){if(this.connections_[f]==o)return f;f--}for(f=d;f<this.connections_.length&&this.connections_[f].y==c;){if(this.connections_[f]==o)return f;f++}return-1},a.ConnectionDB.prototype.calculateIndexForYPos_=function(o){if(!this.connections_.length)return 0;for(var c=0,d=this.connections_.length;c<d;){var f=Math.floor((c+d)/2);if(this.connections_[f].y<o)c=f+1;else{if(!(this.connections_[f].y>o)){c=f;break}d=f}}return c},a.ConnectionDB.prototype.removeConnection=function(o,c){if(-1==(o=this.findIndexOfConnection_(o,c)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(o,1)},a.ConnectionDB.prototype.getNeighbours=function(o,c){function d(X){var H=v-f[X].x,ne=y-f[X].y;return Math.sqrt(H*H+ne*ne)<=c&&U.push(f[X]),ne<c}var f=this.connections_,v=o.x,y=o.y;o=0;for(var D=f.length-2,O=D;o<O;)f[O].y<y?o=O:D=O,O=Math.floor((o+D)/2);var U=[];if(D=o=O,f.length){for(;0<=o&&d(o);)o--;do{D++}while(D<f.length&&d(D))}return U},a.ConnectionDB.prototype.isInYRange_=function(o,c,d){return Math.abs(this.connections_[o].y-c)<=d},a.ConnectionDB.prototype.searchForClosest=function(o,c,d){if(!this.connections_.length)return{connection:null,radius:c};var f=o.y,v=o.x;o.x=v+d.x,o.y=f+d.y;var y=this.calculateIndexForYPos_(o.y);d=null;for(var O,D=c,U=y-1;0<=U&&this.isInYRange_(U,o.y,c);)this.connectionChecker_.canConnect(o,O=this.connections_[U],!0,D)&&(d=O,D=O.distanceFrom(o)),U--;for(;y<this.connections_.length&&this.isInYRange_(y,o.y,c);)this.connectionChecker_.canConnect(o,O=this.connections_[y],!0,D)&&(d=O,D=O.distanceFrom(o)),y++;return o.x=v,o.y=f,{connection:d,radius:D}},a.ConnectionDB.init=function(o){var c=[];return c[a.connectionTypes.INPUT_VALUE]=new a.ConnectionDB(o),c[a.connectionTypes.OUTPUT_VALUE]=new a.ConnectionDB(o),c[a.connectionTypes.NEXT_STATEMENT]=new a.ConnectionDB(o),c[a.connectionTypes.PREVIOUS_STATEMENT]=new a.ConnectionDB(o),c},a.Events.ThemeChange=function(o,c){a.Events.ThemeChange.superClass_.constructor.call(this,c),this.themeName=o},a.utils.object.inherits(a.Events.ThemeChange,a.Events.UiBase),a.Events.ThemeChange.prototype.type=a.Events.THEME_CHANGE,a.Events.ThemeChange.prototype.toJson=function(){var o=a.Events.ThemeChange.superClass_.toJson.call(this);return o.themeName=this.themeName,o},a.Events.ThemeChange.prototype.fromJson=function(o){a.Events.ThemeChange.superClass_.fromJson.call(this,o),this.themeName=o.themeName},a.registry.register(a.registry.Type.EVENT,a.Events.THEME_CHANGE,a.Events.ThemeChange),a.Events.ViewportChange=function(o,c,d,f,v){a.Events.ViewportChange.superClass_.constructor.call(this,f),this.viewTop=o,this.viewLeft=c,this.scale=d,this.oldScale=v},a.utils.object.inherits(a.Events.ViewportChange,a.Events.UiBase),a.Events.ViewportChange.prototype.type=a.Events.VIEWPORT_CHANGE,a.Events.ViewportChange.prototype.toJson=function(){var o=a.Events.ViewportChange.superClass_.toJson.call(this);return o.viewTop=this.viewTop,o.viewLeft=this.viewLeft,o.scale=this.scale,o.oldScale=this.oldScale,o},a.Events.ViewportChange.prototype.fromJson=function(o){a.Events.ViewportChange.superClass_.fromJson.call(this,o),this.viewTop=o.viewTop,this.viewLeft=o.viewLeft,this.scale=o.scale,this.oldScale=o.oldScale},a.registry.register(a.registry.Type.EVENT,a.Events.VIEWPORT_CHANGE,a.Events.ViewportChange),a.IMetricsManager=function(){},a.MetricsManager=function(o){this.workspace_=o},a.MetricsManager.prototype.getDimensionsPx_=function(o){var c=0,d=0;return o&&(c=o.getWidth(),d=o.getHeight()),new a.utils.Size(c,d)},a.MetricsManager.prototype.getFlyoutMetrics=function(o){return{width:(o=this.getDimensionsPx_(this.workspace_.getFlyout(o))).width,height:o.height,position:this.workspace_.toolboxPosition}},a.MetricsManager.prototype.getToolboxMetrics=function(){var o=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:o.width,height:o.height,position:this.workspace_.toolboxPosition}},a.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},a.MetricsManager.prototype.getAbsoluteMetrics=function(){var o=0,c=this.getToolboxMetrics(),d=this.getFlyoutMetrics(!0),f=!!this.workspace_.getToolbox(),v=!!this.workspace_.getFlyout(!0),y=f?c.position:d.position,D=y==a.utils.toolbox.Position.LEFT;return y=y==a.utils.toolbox.Position.TOP,f&&D?o=c.width:v&&D&&(o=d.width),D=0,f&&y?D=c.height:v&&y&&(D=d.height),{top:D,left:o}},a.MetricsManager.prototype.getViewMetrics=function(o){o=o?this.workspace_.scale:1;var c=this.getSvgMetrics(),d=this.getToolboxMetrics(),f=this.getFlyoutMetrics(!0),v=this.workspace_.getToolbox()?d.position:f.position;return this.workspace_.getToolbox()?v==a.utils.toolbox.Position.TOP||v==a.utils.toolbox.Position.BOTTOM?c.height-=d.height:(v==a.utils.toolbox.Position.LEFT||v==a.utils.toolbox.Position.RIGHT)&&(c.width-=d.width):this.workspace_.getFlyout(!0)&&(v==a.utils.toolbox.Position.TOP||v==a.utils.toolbox.Position.BOTTOM?c.height-=f.height:(v==a.utils.toolbox.Position.LEFT||v==a.utils.toolbox.Position.RIGHT)&&(c.width-=f.width)),{height:c.height/o,width:c.width/o,top:-this.workspace_.scrollY/o,left:-this.workspace_.scrollX/o}},a.MetricsManager.prototype.getContentMetrics=function(o){o=o?1:this.workspace_.scale;var c=this.workspace_.getBlocksBoundingBox();return{height:(c.bottom-c.top)*o,width:(c.right-c.left)*o,top:c.top*o,left:c.left*o}},a.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},a.MetricsManager.prototype.getComputedFixedEdges_=function(o){if(!this.hasFixedEdges())return{};var c=this.workspace_.isMovableHorizontally(),d=this.workspace_.isMovableVertically();o=o||this.getViewMetrics(!1);var f={};return d||(f.top=o.top,f.bottom=o.top+o.height),c||(f.left=o.left,f.right=o.left+o.width),f},a.MetricsManager.prototype.getPaddedContent_=function(o,c){var d=c.top+c.height,f=c.left+c.width,v=o.width,y=v/2,D=(o=o.height)/2;return{top:Math.min(c.top-D,d-o),bottom:Math.max(d+D,c.top+o),left:Math.min(c.left-y,f-v),right:Math.max(f+y,c.left+v)}},a.MetricsManager.prototype.getScrollMetrics=function(o,c,d){o=o?this.workspace_.scale:1,c=c||this.getViewMetrics(!1);var f=d||this.getContentMetrics();d=this.getComputedFixedEdges_(c),c=this.getPaddedContent_(c,f);var v=void 0!==d.left?d.left:c.left;return{top:(f=void 0!==d.top?d.top:c.top)/o,left:v/o,width:((void 0!==d.right?d.right:c.right)-v)/o,height:((void 0!==d.bottom?d.bottom:c.bottom)-f)/o}},a.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},a.MetricsManager.prototype.getMetrics=function(){var o=this.getToolboxMetrics(),c=this.getFlyoutMetrics(!0),d=this.getSvgMetrics(),f=this.getAbsoluteMetrics(),v=this.getViewMetrics(),y=this.getContentMetrics(),D=this.getScrollMetrics(!1,v,y);return{contentHeight:y.height,contentWidth:y.width,contentTop:y.top,contentLeft:y.left,scrollHeight:D.height,scrollWidth:D.width,scrollTop:D.top,scrollLeft:D.left,viewHeight:v.height,viewWidth:v.width,viewTop:v.top,viewLeft:v.left,absoluteTop:f.top,absoluteLeft:f.left,svgHeight:d.height,svgWidth:d.width,toolboxWidth:o.width,toolboxHeight:o.height,toolboxPosition:o.position,flyoutWidth:c.width,flyoutHeight:c.height}},a.registry.register(a.registry.Type.METRICS_MANAGER,a.registry.DEFAULT,a.MetricsManager),a.FlyoutMetricsManager=function(o,c){this.flyout_=c,a.FlyoutMetricsManager.superClass_.constructor.call(this,o)},a.utils.object.inherits(a.FlyoutMetricsManager,a.MetricsManager),a.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var o=this.workspace_.getCanvas().getBBox()}catch(c){o={height:0,y:0,width:0,x:0}}return o},a.FlyoutMetricsManager.prototype.getContentMetrics=function(o){var c=this.getBoundingBox_();return{height:c.height*(o=o?1:this.workspace_.scale),width:c.width*o,top:c.y*o,left:c.x*o}},a.FlyoutMetricsManager.prototype.getScrollMetrics=function(o,c,d){return{height:((c=d||this.getContentMetrics()).height+2*(d=this.flyout_.MARGIN*this.workspace_.scale))/(o=o?this.workspace_.scale:1),width:(c.width+c.left+d)/o,top:0,left:0}},a.ThemeManager=function(o,c){this.workspace_=o,this.theme_=c,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},a.ThemeManager.prototype.getTheme=function(){return this.theme_},a.ThemeManager.prototype.setTheme=function(o){var d,c=this.theme_;for(this.theme_=o,(o=this.workspace_.getInjectionDiv())&&(c&&a.utils.dom.removeClass(o,c.getClassName()),a.utils.dom.addClass(o,this.theme_.getClassName())),c=0;o=this.subscribedWorkspaces_[c];c++)o.refreshTheme();for(c=0,o=Object.keys(this.componentDB_);d=o[c];c++)for(var v,f=0;v=this.componentDB_[d][f];f++){var y=v.element;v=v.propertyName;var D=this.theme_&&this.theme_.getComponentStyle(d);y.style[v]=D||""}a.hideChaff()},a.ThemeManager.prototype.subscribeWorkspace=function(o){this.subscribedWorkspaces_.push(o)},a.ThemeManager.prototype.unsubscribeWorkspace=function(o){if(0>(o=this.subscribedWorkspaces_.indexOf(o)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(o,1)},a.ThemeManager.prototype.subscribe=function(o,c,d){this.componentDB_[c]||(this.componentDB_[c]=[]),this.componentDB_[c].push({element:o,propertyName:d}),c=this.theme_&&this.theme_.getComponentStyle(c),o.style[d]=c||""},a.ThemeManager.prototype.unsubscribe=function(o){if(o)for(var f,c=Object.keys(this.componentDB_),d=0;f=c[d];d++){for(var v=this.componentDB_[f],y=v.length-1;0<=y;y--)v[y].element===o&&v.splice(y,1);this.componentDB_[f].length||delete this.componentDB_[f]}},a.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},a.TouchGesture=function(o,c){a.TouchGesture.superClass_.constructor.call(this,o,c),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},a.utils.object.inherits(a.TouchGesture,a.Gesture),a.TouchGesture.ZOOM_IN_MULTIPLIER=5,a.TouchGesture.ZOOM_OUT_MULTIPLIER=6,a.TouchGesture.prototype.doStart=function(o){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,a.TouchGesture.superClass_.doStart.call(this,o),!this.isEnding_&&a.Touch.isTouchEvent(o)&&this.handleTouchStart(o)},a.TouchGesture.prototype.bindMouseEvents=function(o){this.onStartWrapper_=a.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=a.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=a.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),o.preventDefault(),o.stopPropagation()},a.TouchGesture.prototype.handleStart=function(o){!this.isDragging()&&a.Touch.isTouchEvent(o)&&(this.handleTouchStart(o),this.isMultiTouch()&&a.longStop_())},a.TouchGesture.prototype.handleMove=function(o){this.isDragging()?a.Touch.shouldHandleEvent(o)&&a.TouchGesture.superClass_.handleMove.call(this,o):this.isMultiTouch()?(a.Touch.isTouchEvent(o)&&this.handleTouchMove(o),a.longStop_()):a.TouchGesture.superClass_.handleMove.call(this,o)},a.TouchGesture.prototype.handleUp=function(o){a.Touch.isTouchEvent(o)&&!this.isDragging()&&this.handleTouchEnd(o),!this.isMultiTouch()||this.isDragging()?a.Touch.shouldHandleEvent(o)&&a.TouchGesture.superClass_.handleUp.call(this,o):(o.preventDefault(),o.stopPropagation(),this.dispose())},a.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},a.TouchGesture.prototype.dispose=function(){a.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&a.browserEvents.unbind(this.onStartWrapper_)},a.TouchGesture.prototype.handleTouchStart=function(o){var c=a.Touch.getTouchIdentifierFromEvent(o);this.cachedPoints_[c]=this.getTouchPoint(o),2==(c=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=a.utils.Coordinate.distance(this.cachedPoints_[c[0]],this.cachedPoints_[c[1]]),this.isMultiTouch_=!0,o.preventDefault())},a.TouchGesture.prototype.handleTouchMove=function(o){var c=a.Touch.getTouchIdentifierFromEvent(o);this.cachedPoints_[c]=this.getTouchPoint(o),c=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===c.length?this.handlePinch_(o):a.TouchGesture.superClass_.handleMove.call(this,o)},a.TouchGesture.prototype.handlePinch_=function(o){var c=Object.keys(this.cachedPoints_);if(c=a.utils.Coordinate.distance(this.cachedPoints_[c[0]],this.cachedPoints_[c[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var d=c-this.previousScale_;d=0<d?d*a.TouchGesture.ZOOM_IN_MULTIPLIER:d*a.TouchGesture.ZOOM_OUT_MULTIPLIER;var f=this.startWorkspace_,v=a.utils.mouseToSvg(o,f.getParentSvg(),f.getInverseScreenCTM());f.zoom(v.x,v.y,d)}this.previousScale_=c,o.preventDefault()},a.TouchGesture.prototype.handleTouchEnd=function(o){o=a.Touch.getTouchIdentifierFromEvent(o),this.cachedPoints_[o]&&delete this.cachedPoints_[o],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},a.TouchGesture.prototype.getTouchPoint=function(o){return this.startWorkspace_?new a.utils.Coordinate(o.pageX?o.pageX:o.changedTouches[0].pageX,o.pageY?o.pageY:o.changedTouches[0].pageY):null},a.WorkspaceAudio=function(o){this.parentWorkspace_=o,this.SOUNDS_=Object.create(null)},a.WorkspaceAudio.prototype.lastSound_=null,a.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},a.WorkspaceAudio.prototype.load=function(o,c){if(o.length){try{var d=new a.utils.global.Audio}catch(O){return}for(var f,v=0;v<o.length;v++){var y=o[v],D=y.match(/\.(\w+)$/);if(D&&d.canPlayType("audio/"+D[1])){f=new a.utils.global.Audio(y);break}}f&&f.play&&(this.SOUNDS_[c]=f)}},a.WorkspaceAudio.prototype.preload=function(){for(var o in this.SOUNDS_){var c=this.SOUNDS_[o];c.volume=.01;var d=c.play();if(void 0!==d?d.then(c.pause).catch(function(){}):c.pause(),a.utils.userAgent.IPAD||a.utils.userAgent.IPHONE)break}},a.WorkspaceAudio.prototype.play=function(o,c){var d=this.SOUNDS_[o];d?(o=new Date,null!=this.lastSound_&&o-this.lastSound_<a.SOUND_LIMIT||(this.lastSound_=o,(d=a.utils.userAgent.IPAD||a.utils.userAgent.ANDROID?d:d.cloneNode()).volume=void 0===c?1:c,d.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(o,c)},a.WorkspaceSvg=function(o,c,d){a.WorkspaceSvg.superClass_.constructor.call(this,o),this.metricsManager_=new(a.registry.getClassFromOptions(a.registry.Type.METRICS_MANAGER,o,!0))(this),this.getMetrics=o.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=o.setMetrics||a.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new a.ComponentManager,this.connectionDBList=a.ConnectionDB.init(this.connectionChecker),c&&(this.blockDragSurface_=c),d&&(this.workspaceDragSurface_=d),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&a.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new a.WorkspaceAudio(o.parentWorkspace),this.grid_=this.options.gridPattern?new a.Grid(this.options.gridPattern,o.gridOptions):null,this.markerManager_=new a.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),a.Variables&&a.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(a.VARIABLE_CATEGORY_NAME,a.Variables.flyoutCategory),a.VariablesDynamic&&a.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(a.VARIABLE_DYNAMIC_CATEGORY_NAME,a.VariablesDynamic.flyoutCategory),a.Procedures&&a.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(a.PROCEDURE_CATEGORY_NAME,a.Procedures.flyoutCategory),this.addChangeListener(a.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new a.ThemeManager(this,this.options.theme||a.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=a.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new a.utils.Size(0,0)},a.utils.object.inherits(a.WorkspaceSvg,a.Workspace),a.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,a.WorkspaceSvg.prototype.rendered=!0,a.WorkspaceSvg.prototype.isVisible_=!0,a.WorkspaceSvg.prototype.isFlyout=!1,a.WorkspaceSvg.prototype.isMutator=!1,a.WorkspaceSvg.prototype.resizesEnabled_=!0,a.WorkspaceSvg.prototype.scrollX=0,a.WorkspaceSvg.prototype.scrollY=0,a.WorkspaceSvg.prototype.startScrollX=0,a.WorkspaceSvg.prototype.startScrollY=0,a.WorkspaceSvg.prototype.dragDeltaXY_=null,a.WorkspaceSvg.prototype.scale=1,a.WorkspaceSvg.prototype.oldScale_=1,a.WorkspaceSvg.prototype.oldTop_=0,a.WorkspaceSvg.prototype.oldLeft_=0,a.WorkspaceSvg.prototype.trashcan=null,a.WorkspaceSvg.prototype.scrollbar=null,a.WorkspaceSvg.prototype.flyout_=null,a.WorkspaceSvg.prototype.toolbox_=null,a.WorkspaceSvg.prototype.currentGesture_=null,a.WorkspaceSvg.prototype.blockDragSurface_=null,a.WorkspaceSvg.prototype.workspaceDragSurface_=null,a.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,a.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,a.WorkspaceSvg.prototype.injectionDiv_=null,a.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,a.WorkspaceSvg.prototype.targetWorkspace=null,a.WorkspaceSvg.prototype.inverseScreenCTM_=null,a.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,a.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},a.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},a.WorkspaceSvg.prototype.setMetricsManager=function(o){this.metricsManager_=o,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},a.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},a.WorkspaceSvg.prototype.setCursorSvg=function(o){this.markerManager_.setCursorSvg(o)},a.WorkspaceSvg.prototype.setMarkerSvg=function(o){this.markerManager_.setMarkerSvg(o)},a.WorkspaceSvg.prototype.getMarker=function(o){return this.markerManager_?this.markerManager_.getMarker(o):null},a.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},a.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},a.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},a.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},a.WorkspaceSvg.prototype.setTheme=function(o){o||(o=a.Themes.Classic),this.themeManager_.setTheme(o)},a.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(c){return!!c.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var o=new(a.Events.get(a.Events.THEME_CHANGE))(this.getTheme().name,this.id);a.Events.fire(o)},a.WorkspaceSvg.prototype.updateBlockStyles_=function(o){for(var d,c=0;d=o[c];c++){var f=d.getStyleName();f&&(d.setStyle(f),d.mutator&&d.mutator.updateBlockStyle())}},a.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var o=this.getParentSvg().getScreenCTM();o&&(this.inverseScreenCTM_=o.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},a.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},a.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},a.WorkspaceSvg.prototype.getSvgXY=function(o){var c=0,d=0,f=1;(a.utils.dom.containsNode(this.getCanvas(),o)||a.utils.dom.containsNode(this.getBubbleCanvas(),o))&&(f=this.scale);do{var v=a.utils.getRelativeXY(o);(o==this.getCanvas()||o==this.getBubbleCanvas())&&(f=1),c+=v.x*f,d+=v.y*f,o=o.parentNode}while(o&&o!=this.getParentSvg());return new a.utils.Coordinate(c,d)},a.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var o=this.cachedParentSvgSize_;return new a.utils.Size(o.width,o.height)},a.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return a.utils.getInjectionDivXY_(this.getCanvas())},a.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var o=this.svgGroup_;o;){if(-1!=(" "+(o.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=o;break}o=o.parentNode}return this.injectionDiv_},a.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},a.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(o){this.resizeHandlerWrapper_=o},a.WorkspaceSvg.prototype.createDom=function(o){return this.svgGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{class:"blocklyWorkspace"},null),o&&(this.svgBackground_=a.utils.dom.createSvgElement(a.utils.Svg.RECT,{height:"100%",width:"100%",class:o},this.svgGroup_),"blocklyMainBackground"==o&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=a.utils.dom.createSvgElement(a.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=a.utils.dom.createSvgElement(a.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(a.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),a.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(a.registry.getClassFromOptions(a.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(o=a.registry.getClassFromOptions(a.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new o),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},a.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(a.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),a.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var o=this.getParentSvg();o&&o.parentNode&&a.utils.dom.removeNode(o.parentNode)}this.resizeHandlerWrapper_&&(a.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},a.WorkspaceSvg.prototype.newBlock=function(o,c){return new a.BlockSvg(this,o,c)},a.WorkspaceSvg.prototype.addTrashcan=function(){if(!a.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new a.Trashcan(this);var o=this.trashcan.createDom();this.svgGroup_.insertBefore(o,this.svgBlockCanvas_)},a.WorkspaceSvg.prototype.addZoomControls=function(){if(!a.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new a.ZoomControls(this);var o=this.zoomControls_.createDom();this.svgGroup_.appendChild(o)},a.WorkspaceSvg.prototype.addFlyout=function(o){var c=new a.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return c.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(a.registry.getClassFromOptions(a.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(c):new(a.registry.getClassFromOptions(a.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(c),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(o)},a.WorkspaceSvg.prototype.getFlyout=function(o){return this.flyout_||o?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},a.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},a.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},a.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},a.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var v,o=this.componentManager_.getComponents(a.ComponentManager.Capability.POSITIONABLE,!0),c=this.getMetricsManager().getUiMetrics(),d=[],f=0;v=o[f];f++)v.position(c,d),(v=v.getBoundingRectangle())&&d.push(v);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},a.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var o=a.utils.getDocumentScroll();a.utils.Coordinate.equals(this.lastRecordedPageScroll_,o)||(this.lastRecordedPageScroll_=o,this.updateScreenCalculations_())},a.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},a.WorkspaceSvg.prototype.setCachedParentSvgSize=function(o,c){var d=this.getParentSvg();o&&(this.cachedParentSvgSize_.width=o,d.cachedWidth_=o),c&&(this.cachedParentSvgSize_.height=c,d.cachedHeight_=c)},a.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},a.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var o=this.svgGroup_;o;){if("svg"==o.tagName){this.cachedParentSvg_=o;break}o=o.parentNode}return this.cachedParentSvg_},a.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(a.Events.isEnabled()){var o=this.scale,c=-this.scrollY,d=-this.scrollX;if(!(o==this.oldScale_&&1>Math.abs(c-this.oldTop_)&&1>Math.abs(d-this.oldLeft_))){var f=new(a.Events.get(a.Events.VIEWPORT_CHANGE))(c,d,o,this.id,this.oldScale_);this.oldScale_=o,this.oldTop_=c,this.oldLeft_=d,a.Events.fire(f)}}},a.WorkspaceSvg.prototype.translate=function(o,c){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(o,c);else{var d="translate("+o+","+c+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",d),this.svgBubbleCanvas_.setAttribute("transform",d)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(o,c,this.scale),this.grid_&&this.grid_.moveTo(o,c),this.maybeFireViewportChangeEvent()},a.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var o=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",o="translate("+o.x+","+o.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",o)}},a.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var o=this.svgBlockCanvas_.previousSibling,c=parseInt(this.getParentSvg().getAttribute("width"),10),d=parseInt(this.getParentSvg().getAttribute("height"),10),f=a.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),o,c,d,this.scale),this.workspaceDragSurface_.translateSurface(f.x,f.y)}},a.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},a.WorkspaceSvg.prototype.getWidth=function(){var o=this.getMetrics();return o?o.viewWidth/this.scale:0},a.WorkspaceSvg.prototype.setVisible=function(o){if(this.isVisible_=o,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(o),this.getFlyout()&&this.getFlyout().setContainerVisible(o),this.getParentSvg().style.display=o?"block":"none",this.toolbox_&&this.toolbox_.setVisible(o),o){for(var c=(o=this.getAllBlocks(!1)).length-1;0<=c;c--)o[c].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else a.hideChaff(!0)},a.WorkspaceSvg.prototype.render=function(){for(var o=this.getAllBlocks(!1),c=o.length-1;0<=c;c--)o[c].render(!1);if(this.currentGesture_)for(o=this.currentGesture_.getInsertionMarkers(),c=0;c<o.length;c++)o[c].render(!1);this.markerManager_.updateMarkers()},a.WorkspaceSvg.prototype.highlightBlock=function(o,c){if(void 0===c){for(var f,d=0;f=this.highlightedBlocks_[d];d++)f.setHighlighted(!1);this.highlightedBlocks_.length=0}(f=o?this.getBlockById(o):null)&&((o=void 0===c||c)?-1==this.highlightedBlocks_.indexOf(f)&&this.highlightedBlocks_.push(f):a.utils.arrayRemove(this.highlightedBlocks_,f),f.setHighlighted(o))},a.WorkspaceSvg.prototype.paste=function(o){!this.rendered||!o.tagName||o.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==o.tagName.toLowerCase()?this.pasteWorkspaceComment_(o):this.pasteBlock_(o))},a.WorkspaceSvg.prototype.pasteBlock_=function(o){a.Events.disable();try{var c=a.Xml.domToBlock(o,this),d=parseInt(o.getAttribute("x"),10),f=parseInt(o.getAttribute("y"),10);if(!isNaN(d)&&!isNaN(f)){this.RTL&&(d=-d);do{o=!1;for(var D,v=this.getAllBlocks(!1),y=0;D=v[y];y++){var O=D.getRelativeToSurfaceXY();if(1>=Math.abs(d-O.x)&&1>=Math.abs(f-O.y)){o=!0;break}}if(!o){var X,U=c.getConnections_(!1);for(y=0;X=U[y];y++)if(X.closest(a.SNAP_RADIUS,new a.utils.Coordinate(d,f)).connection){o=!0;break}}o&&(d=this.RTL?d-a.SNAP_RADIUS:d+a.SNAP_RADIUS,f+=2*a.SNAP_RADIUS)}while(o);c.moveBy(d,f)}}finally{a.Events.enable()}a.Events.isEnabled()&&!c.isShadow()&&a.Events.fire(new(a.Events.get(a.Events.BLOCK_CREATE))(c)),c.select()},a.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(o){a.Events.disable();try{var c=a.WorkspaceCommentSvg.fromXml(o,this),d=parseInt(o.getAttribute("x"),10),f=parseInt(o.getAttribute("y"),10);isNaN(d)||isNaN(f)||(this.RTL&&(d=-d),c.moveBy(d+50,f+50))}finally{a.Events.enable()}a.Events.isEnabled()&&a.WorkspaceComment.fireCreateEvent(c),c.select()},a.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var o=this.isFlyout?this.targetWorkspace:this;o&&!o.currentGesture_&&o.toolbox_&&o.toolbox_.getFlyout()&&o.toolbox_.refreshSelection()},a.WorkspaceSvg.prototype.renameVariableById=function(o,c){a.WorkspaceSvg.superClass_.renameVariableById.call(this,o,c),this.refreshToolboxSelection()},a.WorkspaceSvg.prototype.deleteVariableById=function(o){a.WorkspaceSvg.superClass_.deleteVariableById.call(this,o),this.refreshToolboxSelection()},a.WorkspaceSvg.prototype.createVariable=function(o,c,d){return o=a.WorkspaceSvg.superClass_.createVariable.call(this,o,c,d),this.refreshToolboxSelection(),o},a.WorkspaceSvg.prototype.recordDeleteAreas=function(){a.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},a.WorkspaceSvg.prototype.recordDragTargets=function(){var o=this.componentManager_.getComponents(a.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var d,c=0;d=o[c];c++){var f=d.getClientRect();f&&this.dragTargetAreas_.push({component:d,clientRect:f})}},a.WorkspaceSvg.prototype.getDragTarget=function(o){for(var d,c=0;d=this.dragTargetAreas_[c];c++)if(d.clientRect.contains(o.clientX,o.clientY))return d.component;return null},a.WorkspaceSvg.prototype.onMouseDown_=function(o){var c=this.getGesture(o);c&&c.handleWsStart(o,this)},a.WorkspaceSvg.prototype.startDrag=function(o,c){(o=a.utils.mouseToSvg(o,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,o.y/=this.scale,this.dragDeltaXY_=a.utils.Coordinate.difference(c,o)},a.WorkspaceSvg.prototype.moveDrag=function(o){return(o=a.utils.mouseToSvg(o,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,o.y/=this.scale,a.utils.Coordinate.sum(this.dragDeltaXY_,o)},a.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},a.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},a.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},a.WorkspaceSvg.prototype.isMovableHorizontally=function(){var o=!!this.scrollbar;return this.isMovable()&&(!o||o&&this.scrollbar.canScrollHorizontally())},a.WorkspaceSvg.prototype.isMovableVertically=function(){var o=!!this.scrollbar;return this.isMovable()&&(!o||o&&this.scrollbar.canScrollVertically())},a.WorkspaceSvg.prototype.onMouseWheel_=function(o){if(a.Gesture.inProgress())o.preventDefault(),o.stopPropagation();else{var c=this.options.zoomOptions&&this.options.zoomOptions.wheel,d=this.options.moveOptions&&this.options.moveOptions.wheel;if(c||d){var f=a.utils.getScrollDeltaPixels(o);!c||!o.ctrlKey&&d?(c=this.scrollX-f.x,d=this.scrollY-f.y,o.shiftKey&&!f.x&&(c=this.scrollX-f.y,d=this.scrollY),this.scroll(c,d)):(f=-f.y/50,c=a.utils.mouseToSvg(o,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(c.x,c.y,f)),o.preventDefault()}}},a.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var o=this.getTopBoundedElements();if(!o.length)return new a.utils.Rect(0,0,0,0);for(var c=o[0].getBoundingRectangle(),d=1;d<o.length;d++){var f=o[d];f.isInsertionMarker&&f.isInsertionMarker()||((f=f.getBoundingRectangle()).top<c.top&&(c.top=f.top),f.bottom>c.bottom&&(c.bottom=f.bottom),f.left<c.left&&(c.left=f.left),f.right>c.right&&(c.right=f.right))}return c},a.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),a.Events.setGroup(!0);for(var f,o=this.getTopBlocks(!0),c=0,d=0;f=o[d];d++)if(f.isMovable()){var v=f.getRelativeToSurfaceXY();f.moveBy(-v.x,c-v.y),f.snapToGrid(),c=f.getRelativeToSurfaceXY().y+f.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}a.Events.setGroup(!1),this.setResizesEnabled(!0)},a.WorkspaceSvg.prototype.showContextMenu=function(o){if(!this.options.readOnly&&!this.isFlyout){var c=a.ContextMenuRegistry.registry.getContextMenuOptions(a.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(c,o),a.ContextMenu.show(o,c,this.RTL)}},a.WorkspaceSvg.prototype.updateToolbox=function(o){if(o=a.utils.toolbox.convertToolboxDefToJson(o)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(a.utils.toolbox.hasCategories(o)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=o,this.toolbox_.render(o)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=o,this.flyout_.show(o)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},a.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(a.mainWorkspace=this,this.setBrowserFocus())},a.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(o){try{this.getParentSvg().parentNode.setActive()}catch(c){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},a.WorkspaceSvg.prototype.zoom=function(o,c,d){d=Math.pow(this.options.zoomOptions.scaleSpeed,d);var f=this.scale*d;if(this.scale!=f){f>this.options.zoomOptions.maxScale?d=this.options.zoomOptions.maxScale/this.scale:f<this.options.zoomOptions.minScale&&(d=this.options.zoomOptions.minScale/this.scale);var v=this.getCanvas().getCTM(),y=this.getParentSvg().createSVGPoint();y.x=o,y.y=c,y=y.matrixTransform(v.inverse()),v=v.translate((o=y.x)*(1-d),(c=y.y)*(1-d)).scale(d),this.scrollX=v.e,this.scrollY=v.f,this.setScale(f)}},a.WorkspaceSvg.prototype.zoomCenter=function(o){var c=this.getMetrics();if(this.flyout_){var d=c.svgWidth?c.svgWidth/2:0;c=c.svgHeight?c.svgHeight/2:0}else d=c.viewWidth/2+c.absoluteLeft,c=c.viewHeight/2+c.absoluteTop;this.zoom(d,c,o)},a.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var o=this.getMetrics(),c=o.viewWidth;o=o.viewHeight;var d=this.getBlocksBoundingBox(),f=d.right-d.left;if(d=d.bottom-d.top,f){this.flyout_&&(this.horizontalLayout?(o+=this.flyout_.getHeight(),d+=this.flyout_.getHeight()/this.scale):(c+=this.flyout_.getWidth(),f+=this.flyout_.getWidth()/this.scale)),c/=f,o/=d,a.Events.disable();try{this.setScale(Math.min(c,o)),this.scrollCenter()}finally{a.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},a.WorkspaceSvg.prototype.beginCanvasTransition=function(){a.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),a.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},a.WorkspaceSvg.prototype.endCanvasTransition=function(){a.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),a.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},a.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var o=this.getMetrics(),c=(o.scrollWidth-o.viewWidth)/2,d=(o.scrollHeight-o.viewHeight)/2;this.scroll(c=-c-o.scrollLeft,d=-d-o.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},a.WorkspaceSvg.prototype.centerOnBlock=function(o){if(this.isMovable()){if(o=o?this.getBlockById(o):null){var c=o.getRelativeToSurfaceXY(),d=o.getHeightWidth(),f=this.scale;o=(c.x+(this.RTL?-1:1)*d.width/2)*f,c=(c.y+d.height/2)*f,d=this.getMetrics(),this.scroll(-(o-d.viewWidth/2),-(c-d.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},a.WorkspaceSvg.prototype.setScale=function(o){this.options.zoomOptions.maxScale&&o>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&o<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale),this.scale=o,a.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),o=this.getMetrics(),this.scrollX-=o.absoluteLeft,this.scrollY-=o.absoluteTop,o.viewLeft+=o.absoluteLeft,o.viewTop+=o.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(o):this.scrollbar.resizeContent(o))},a.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},a.WorkspaceSvg.prototype.scroll=function(o,c){a.hideChaff(!0);var d=this.getMetrics();o=Math.min(o,-d.scrollLeft),c=Math.min(c,-d.scrollTop);var f=d.scrollTop+Math.max(0,d.scrollHeight-d.viewHeight);o=Math.max(o,-(d.scrollLeft+Math.max(0,d.scrollWidth-d.viewWidth))),c=Math.max(c,-f),this.scrollX=o,this.scrollY=c,this.scrollbar&&this.scrollbar.set(-(o+d.scrollLeft),-(c+d.scrollTop),!1),this.translate(o+=d.absoluteLeft,c+=d.absoluteTop)},a.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(o){var c=this.getMetrics();"number"==typeof o.x&&(this.scrollX=-(c.scrollLeft+(c.scrollWidth-c.viewWidth)*o.x)),"number"==typeof o.y&&(this.scrollY=-(c.scrollTop+(c.scrollHeight-c.viewHeight)*o.y)),this.translate(this.scrollX+c.absoluteLeft,this.scrollY+c.absoluteTop)},a.WorkspaceSvg.prototype.getBlockById=function(o){return a.WorkspaceSvg.superClass_.getBlockById.call(this,o)},a.WorkspaceSvg.prototype.getTopBlocks=function(o){return a.WorkspaceSvg.superClass_.getTopBlocks.call(this,o)},a.WorkspaceSvg.prototype.addTopBlock=function(o){this.addTopBoundedElement(o),a.WorkspaceSvg.superClass_.addTopBlock.call(this,o)},a.WorkspaceSvg.prototype.removeTopBlock=function(o){this.removeTopBoundedElement(o),a.WorkspaceSvg.superClass_.removeTopBlock.call(this,o)},a.WorkspaceSvg.prototype.addTopComment=function(o){this.addTopBoundedElement(o),a.WorkspaceSvg.superClass_.addTopComment.call(this,o)},a.WorkspaceSvg.prototype.removeTopComment=function(o){this.removeTopBoundedElement(o),a.WorkspaceSvg.superClass_.removeTopComment.call(this,o)},a.WorkspaceSvg.prototype.addTopBoundedElement=function(o){this.topBoundedElements_.push(o)},a.WorkspaceSvg.prototype.removeTopBoundedElement=function(o){a.utils.arrayRemove(this.topBoundedElements_,o)},a.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},a.WorkspaceSvg.prototype.setResizesEnabled=function(o){var c=!this.resizesEnabled_&&o;this.resizesEnabled_=o,c&&this.resizeContents()},a.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),a.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},a.WorkspaceSvg.prototype.registerButtonCallback=function(o,c){if("function"!=typeof c)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[o]=c},a.WorkspaceSvg.prototype.getButtonCallback=function(o){return(o=this.flyoutButtonCallbacks_[o])?o:null},a.WorkspaceSvg.prototype.removeButtonCallback=function(o){this.flyoutButtonCallbacks_[o]=null},a.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(o,c){if("function"!=typeof c)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[o]=c},a.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(o){return this.toolboxCategoryCallbacks_[o]||null},a.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(o){this.toolboxCategoryCallbacks_[o]=null},a.WorkspaceSvg.prototype.getGesture=function(o){var c="mousedown"==o.type||"touchstart"==o.type||"pointerdown"==o.type,d=this.currentGesture_;return d?c&&d.hasStarted()?(console.warn("Tried to start the same gesture twice."),d.cancel(),null):d:c?this.currentGesture_=new a.TouchGesture(o,this):null},a.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},a.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},a.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},a.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},a.inject=function(o,c){if(a.checkBlockColourConstants(),"string"==typeof o&&(o=document.getElementById(o)||document.querySelector(o)),!o||!a.utils.dom.containsNode(document,o))throw Error("Error: container is not in current document.");c=new a.Options(c||{});var d=document.createElement("div");d.className="injectionDiv",d.tabIndex=0,a.utils.aria.setState(d,a.utils.aria.State.LABEL,a.Msg.WORKSPACE_ARIA_LABEL),o.appendChild(d),o=a.createDom_(d,c);var f=new a.BlockDragSurfaceSvg(d),v=new a.WorkspaceDragSurfaceSvg(d),y=a.createMainWorkspace_(o,c,f,v);return a.init_(y),a.mainWorkspace=y,a.svgResize(y),d.addEventListener("focusin",function(){a.mainWorkspace=y}),y},a.createDom_=function(o,c){o.setAttribute("dir","LTR"),a.Css.inject(c.hasCss,c.pathToMedia),o=a.utils.dom.createSvgElement(a.utils.Svg.SVG,{xmlns:a.utils.dom.SVG_NS,"xmlns:html":a.utils.dom.HTML_NS,"xmlns:xlink":a.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},o);var d=a.utils.dom.createSvgElement(a.utils.Svg.DEFS,{},o),f=String(Math.random()).substring(2);return c.gridPattern=a.Grid.createDom(f,c.gridOptions,d),o},a.createMainWorkspace_=function(o,c,d,f){return c.parentWorkspace=null,(c=new a.WorkspaceSvg(c,d,f)).scale=(d=c.options).zoomOptions.startScale,o.appendChild(c.createDom("blocklyMainBackground")),a.utils.dom.addClass(c.getInjectionDiv(),c.getRenderer().getClassName()),a.utils.dom.addClass(c.getInjectionDiv(),c.getTheme().getClassName()),!d.hasCategories&&d.languageTree&&(f=c.addFlyout(a.utils.Svg.SVG),a.utils.dom.insertAfter(f,o)),d.hasTrashcan&&c.addTrashcan(),d.zoomOptions&&d.zoomOptions.controls&&c.addZoomControls(),c.getThemeManager().subscribe(o,"workspaceBackgroundColour","background-color"),c.translate(0,0),c.addChangeListener(a.bumpIntoBoundsHandler_(c)),a.svgResize(c),a.WidgetDiv.createDom(),a.DropDownDiv.createDom(),a.Tooltip.createDom(),c},a.extractObjectFromEvent_=function(o,c){var d=null;switch(c.type){case a.Events.BLOCK_CREATE:case a.Events.BLOCK_MOVE:(d=o.getBlockById(c.blockId))&&(d=d.getRootBlock());break;case a.Events.COMMENT_CREATE:case a.Events.COMMENT_MOVE:d=o.getCommentById(c.commentId)}return d},a.bumpTopObjectsIntoBounds_=function(o){var c=o.getMetricsManager();if(c.hasFixedEdges()&&!o.isDragging()){c=c.getScrollMetrics(!0);for(var v,d=o.getTopBoundedElements(),f=0;v=d[f];f++)a.bumpObjectIntoBounds_(o,c,v)}},a.bumpIntoBoundsHandler_=function(o){return function(c){var d=o.getMetricsManager();if(d.hasFixedEdges()&&!o.isDragging())if(-1!==a.Events.BUMP_EVENTS.indexOf(c.type)){d=d.getScrollMetrics(!0);var f=a.extractObjectFromEvent_(o,c);if(f){var v=a.Events.getGroup();a.Events.setGroup(c.group),a.bumpObjectIntoBounds_(o,d,f)&&!c.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==v&&a.Events.setGroup(v)}}else c.type===a.Events.VIEWPORT_CHANGE&&c.scale>c.oldScale&&a.bumpTopObjectsIntoBounds_(o)}},a.bumpObjectIntoBounds_=function(o,c,d){var f=d.getBoundingRectangle(),v=f.right-f.left,y=a.utils.math.clamp(c.top,f.top,c.top+c.height-(f.bottom-f.top))-f.top,D=c.left;return c=c.left+c.width-v,o.RTL?D=Math.min(c,D):c=Math.max(D,c),!(!(o=a.utils.math.clamp(D,f.left,c)-f.left)&&!y||(d.moveBy(o,y),0))},a.init_=function(o){var c=o.options,d=o.getParentSvg();if(a.browserEvents.conditionalBind(d.parentNode,"contextmenu",null,function(v){a.utils.isTargetInput(v)||v.preventDefault()}),d=a.browserEvents.conditionalBind(window,"resize",null,function(){a.hideChaff(!0),a.svgResize(o),a.bumpTopObjectsIntoBounds_(o)}),o.setResizeHandlerWrapper(d),a.inject.bindDocumentEvents_(),c.languageTree){d=o.getToolbox();var f=o.getFlyout(!0);d?d.init():f&&(f.init(o),f.show(c.languageTree),"function"==typeof f.scrollToStart&&f.scrollToStart())}c.hasTrashcan&&o.trashcan.init(),c.zoomOptions&&c.zoomOptions.controls&&o.zoomControls_.init(),c.moveOptions&&c.moveOptions.scrollbars?(o.scrollbar=new a.ScrollbarPair(o,!0===c.moveOptions.scrollbars||!!c.moveOptions.scrollbars.horizontal,!0===c.moveOptions.scrollbars||!!c.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),o.scrollbar.resize()):o.setMetrics({x:.5,y:.5}),c.hasSounds&&a.inject.loadSounds_(c.pathToMedia,o)},a.inject.bindDocumentEvents_=function(){a.documentEventsBound_||(a.browserEvents.conditionalBind(document,"scroll",null,function(){for(var d,o=a.Workspace.getAll(),c=0;d=o[c];c++)d.updateInverseScreenCTM&&d.updateInverseScreenCTM()}),a.browserEvents.conditionalBind(document,"keydown",null,a.onKeyDown),a.browserEvents.bind(document,"touchend",null,a.longStop_),a.browserEvents.bind(document,"touchcancel",null,a.longStop_),a.utils.userAgent.IPAD&&a.browserEvents.conditionalBind(window,"orientationchange",document,function(){a.svgResize(a.getMainWorkspace())})),a.documentEventsBound_=!0},a.inject.loadSounds_=function(o,c){var d=c.getAudioManager();d.load([o+"click.mp3",o+"click.wav",o+"click.ogg"],"click"),d.load([o+"disconnect.wav",o+"disconnect.mp3",o+"disconnect.ogg"],"disconnect"),d.load([o+"delete.mp3",o+"delete.ogg",o+"delete.wav"],"delete");var f=[];o=function(){for(;f.length;)a.browserEvents.unbind(f.pop());d.preload()},f.push(a.browserEvents.conditionalBind(document,"mousemove",null,o,!0)),f.push(a.browserEvents.conditionalBind(document,"touchstart",null,o,!0))},a.Names=function(o,c){if(this.variablePrefix_=c||"",this.reservedDict_=Object.create(null),o)for(o=o.split(","),c=0;c<o.length;c++)this.reservedDict_[o[c]]=!0;this.reset()},a.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",a.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},a.Names.prototype.setVariableMap=function(o){this.variableMap_=o},a.Names.prototype.getNameForUserVariable_=function(o){return this.variableMap_?(o=this.variableMap_.getVariableById(o))?o.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},a.Names.prototype.populateVariables=function(o){o=a.Variables.allUsedVarModels(o);for(var c=0;c<o.length;c++)this.getName(o[c].getId(),a.VARIABLE_CATEGORY_NAME)},a.Names.prototype.populateProcedures=function(o){o=(o=a.Procedures.allProcedures(o))[0].concat(o[1]);for(var c=0;c<o.length;c++)this.getName(o[c][0],a.PROCEDURE_CATEGORY_NAME)},a.Names.prototype.getName=function(o,c){var d=o;c==a.VARIABLE_CATEGORY_NAME&&(o=this.getNameForUserVariable_(o))&&(d=o),o=d.toLowerCase();var f=c==a.VARIABLE_CATEGORY_NAME||c==a.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";c in this.db_||(this.db_[c]=Object.create(null));var v=this.db_[c];return o in v?f+v[o]:(c=this.getDistinctName(d,c),v[o]=c.substr(f.length),c)},a.Names.prototype.getUserNames=function(o){return Object.keys(this.db_[o]||{})},a.Names.prototype.getDistinctName=function(o,c){o=this.safeName_(o);for(var d="";this.dbReverse_[o+d]||o+d in this.reservedDict_;)d=d?d+1:2;return this.dbReverse_[o+=d]=!0,(c==a.VARIABLE_CATEGORY_NAME||c==a.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+o},a.Names.prototype.safeName_=function(o){return o?(o=encodeURI(o.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(o[0])&&(o="my_"+o)):o=a.Msg.UNNAMED_KEY||"unnamed",o},a.Names.equals=function(o,c){return o.toLowerCase()==c.toLowerCase()},a.Procedures={},a.Procedures.NAME_TYPE=a.PROCEDURE_CATEGORY_NAME,a.Procedures.DEFAULT_ARG="x",a.Procedures.allProcedures=function(o){var c=o.getBlocksByType("procedures_defnoreturn",!1).map(function(d){return d.getProcedureDef()});return o=o.getBlocksByType("procedures_defreturn",!1).map(function(d){return d.getProcedureDef()}),c.sort(a.Procedures.procTupleComparator_),o.sort(a.Procedures.procTupleComparator_),[c,o]},a.Procedures.procTupleComparator_=function(o,c){return o[0].localeCompare(c[0],void 0,{sensitivity:"base"})},a.Procedures.findLegalName=function(o,c){if(c.isInFlyout)return o;for(o=o||a.Msg.UNNAMED_KEY||"unnamed";!a.Procedures.isLegalName_(o,c.workspace,c);){var d=o.match(/^(.*?)(\d+)$/);o=d?d[1]+(parseInt(d[2],10)+1):o+"2"}return o},a.Procedures.isLegalName_=function(o,c,d){return!a.Procedures.isNameUsed(o,c,d)},a.Procedures.isNameUsed=function(o,c,d){c=c.getAllBlocks(!1);for(var f=0;f<c.length;f++)if(c[f]!=d&&c[f].getProcedureDef){var v=c[f].getProcedureDef();if(a.Names.equals(v[0],o))return!0}return!1},a.Procedures.rename=function(o){o=o.trim();var c=a.Procedures.findLegalName(o,this.getSourceBlock()),d=this.getValue();if(d!=o&&d!=c){o=this.getSourceBlock().workspace.getAllBlocks(!1);for(var f=0;f<o.length;f++)o[f].renameProcedure&&o[f].renameProcedure(d,c)}return c},a.Procedures.flyoutCategory=function(o){function c(y,D){for(var O=0;O<y.length;O++){var U=y[O][0],X=y[O][1],H=a.utils.xml.createElement("block");H.setAttribute("type",D),H.setAttribute("gap",16);var ne=a.utils.xml.createElement("mutation");for(ne.setAttribute("name",U),H.appendChild(ne),U=0;U<X.length;U++){var ee=a.utils.xml.createElement("arg");ee.setAttribute("name",X[U]),ne.appendChild(ee)}d.push(H)}}var d=[];if(a.Blocks.procedures_defnoreturn){var f=a.utils.xml.createElement("block");f.setAttribute("type","procedures_defnoreturn"),f.setAttribute("gap",16);var v=a.utils.xml.createElement("field");v.setAttribute("name","NAME"),v.appendChild(a.utils.xml.createTextNode(a.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),f.appendChild(v),d.push(f)}return a.Blocks.procedures_defreturn&&((f=a.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),f.setAttribute("gap",16),(v=a.utils.xml.createElement("field")).setAttribute("name","NAME"),v.appendChild(a.utils.xml.createTextNode(a.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),f.appendChild(v),d.push(f)),a.Blocks.procedures_ifreturn&&((f=a.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),f.setAttribute("gap",16),d.push(f)),d.length&&d[d.length-1].setAttribute("gap",24),c((o=a.Procedures.allProcedures(o))[0],"procedures_callnoreturn"),c(o[1],"procedures_callreturn"),d},a.Procedures.updateMutatorFlyout_=function(o){for(var v,c=[],d=o.getBlocksByType("procedures_mutatorarg",!1),f=0;v=d[f];f++)c.push(v.getFieldValue("NAME"));d=a.utils.xml.createElement("xml"),(f=a.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(v=a.utils.xml.createElement("field")).setAttribute("name","NAME"),c=a.Variables.generateUniqueNameFromOptions(a.Procedures.DEFAULT_ARG,c),c=a.utils.xml.createTextNode(c),v.appendChild(c),f.appendChild(v),d.appendChild(f),o.updateToolbox(d)},a.Procedures.mutatorOpenListener=function(o){if(o.type==a.Events.BUBBLE_OPEN&&"mutator"===o.bubbleType&&o.isOpen){var c=(o=a.Workspace.getById(o.workspaceId).getBlockById(o.blockId)).type;("procedures_defnoreturn"==c||"procedures_defreturn"==c)&&(o=o.mutator.getWorkspace(),a.Procedures.updateMutatorFlyout_(o),o.addChangeListener(a.Procedures.mutatorChangeListener_))}},a.Procedures.mutatorChangeListener_=function(o){(o.type==a.Events.BLOCK_CREATE||o.type==a.Events.BLOCK_DELETE||o.type==a.Events.BLOCK_CHANGE)&&(o=a.Workspace.getById(o.workspaceId),a.Procedures.updateMutatorFlyout_(o))},a.Procedures.getCallers=function(o,c){var d=[];c=c.getAllBlocks(!1);for(var f=0;f<c.length;f++)if(c[f].getProcedureCall){var v=c[f].getProcedureCall();v&&a.Names.equals(v,o)&&d.push(c[f])}return d},a.Procedures.mutateCallers=function(o){var v,c=a.Events.recordUndo,d=o.getProcedureDef()[0],f=o.mutationToDom(!0);for(o=a.Procedures.getCallers(d,o.workspace),d=0;v=o[d];d++){var y=v.mutationToDom();y=y&&a.Xml.domToText(y),v.domToMutation(f);var D=v.mutationToDom();y!=(D=D&&a.Xml.domToText(D))&&(a.Events.recordUndo=!1,a.Events.fire(new(a.Events.get(a.Events.BLOCK_CHANGE))(v,"mutation",null,y,D)),a.Events.recordUndo=c)}},a.Procedures.getDefinition=function(o,c){c=c.getAllBlocks(!1);for(var d=0;d<c.length;d++)if(c[d].getProcedureDef){var f=c[d].getProcedureDef();if(f&&a.Names.equals(f[0],o))return c[d]}return null},a.ShortcutRegistry=function(){a.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},a.ShortcutRegistry.modifierKeys={Shift:a.utils.KeyCodes.SHIFT,Control:a.utils.KeyCodes.CTRL,Alt:a.utils.KeyCodes.ALT,Meta:a.utils.KeyCodes.META},a.ShortcutRegistry.prototype.register=function(o,c){if(this.registry_[o.name]&&!c)throw Error('Shortcut with name "'+o.name+'" already exists.');this.registry_[o.name]=o},a.ShortcutRegistry.prototype.unregister=function(o){return this.registry_[o]?(this.removeAllKeyMappings(o),delete this.registry_[o],!0):(console.warn('Keyboard shortcut with name "'+o+'" not found.'),!1)},a.ShortcutRegistry.prototype.addKeyMapping=function(o,c,d){o=String(o);var f=this.keyMap_[o];if(f&&!d)throw Error('Shortcut with name "'+c+'" collides with shortcuts '+f.toString());f&&d?f.unshift(c):this.keyMap_[o]=[c]},a.ShortcutRegistry.prototype.removeKeyMapping=function(o,c,d){var f=this.keyMap_[o];if(!f&&!d)return console.warn('No keyboard shortcut with name "'+c+'" registered with key code "'+o+'"'),!1;var v=f.indexOf(c);return-1<v?(f.splice(v,1),0==f.length&&delete this.keyMap_[o],!0):(d||console.warn('No keyboard shortcut with name "'+c+'" registered with key code "'+o+'"'),!1)},a.ShortcutRegistry.prototype.removeAllKeyMappings=function(o){for(var c in this.keyMap_)this.removeKeyMapping(c,o,!0)},a.ShortcutRegistry.prototype.setKeyMap=function(o){this.keyMap_=o},a.ShortcutRegistry.prototype.getKeyMap=function(){return a.utils.object.deepMerge(Object.create(null),this.keyMap_)},a.ShortcutRegistry.prototype.getRegistry=function(){return a.utils.object.deepMerge(Object.create(null),this.registry_)},a.ShortcutRegistry.prototype.onKeyDown=function(o,c){var d=this.serializeKeyEvent_(c);if(!(d=this.getShortcutNamesByKeyCode(d)))return!1;for(var v,f=0;v=d[f];f++)if((!(v=this.registry_[v]).preconditionFn||v.preconditionFn(o))&&v.callback&&v.callback(o,c,v))return!0;return!1},a.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(o){return this.keyMap_[o]||[]},a.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(o){var d,c=[];for(d in this.keyMap_)-1<this.keyMap_[d].indexOf(o)&&c.push(d);return c},a.ShortcutRegistry.prototype.serializeKeyEvent_=function(o){var d,c="";for(d in a.ShortcutRegistry.modifierKeys)o.getModifierState(d)&&(""!=c&&(c+="+"),c+=d);return""!=c&&o.keyCode?c=c+"+"+o.keyCode:o.keyCode&&(c=o.keyCode.toString()),c},a.ShortcutRegistry.prototype.checkModifiers_=function(o){for(var f,c=a.utils.object.values(a.ShortcutRegistry.modifierKeys),d=0;f=o[d];d++)if(0>c.indexOf(f))throw Error(f+" is not a valid modifier key.")},a.ShortcutRegistry.prototype.createSerializedKey=function(o,c){var d="";if(c)for(var f in this.checkModifiers_(c),a.ShortcutRegistry.modifierKeys)-1<c.indexOf(a.ShortcutRegistry.modifierKeys[f])&&(""!=d&&(d+="+"),d+=f);return""!=d&&o?d=d+"+"+o:o&&(d=o.toString()),d},new a.ShortcutRegistry,a.VariableModel=function(o,c,d,f){this.workspace=o,this.name=c,this.type=d||"",this.id_=f||a.utils.genUid(),a.Events.fire(new(a.Events.get(a.Events.VAR_CREATE))(this))},a.VariableModel.prototype.getId=function(){return this.id_},a.VariableModel.compareByName=function(o,c){return o.name.localeCompare(c.name,void 0,{sensitivity:"base"})},a.Variables={},a.Variables.NAME_TYPE=a.VARIABLE_CATEGORY_NAME,a.Variables.allUsedVarModels=function(o){var c=o.getAllBlocks(!1);o=Object.create(null);for(var d=0;d<c.length;d++){var f=c[d].getVarModels();if(f)for(var v=0;v<f.length;v++){var y=f[v],D=y.getId();D&&(o[D]=y)}}for(D in c=[],o)c.push(o[D]);return c},a.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},a.Variables.allDeveloperVariables=function(o){o=o.getAllBlocks(!1);for(var f,c=Object.create(null),d=0;f=o[d];d++){var v=f.getDeveloperVariables;if(!v&&f.getDeveloperVars&&(v=f.getDeveloperVars,a.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[f.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+f.type+"')"),a.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[f.type]=!0)),v)for(f=v(),v=0;v<f.length;v++)c[f[v]]=!0}return Object.keys(c)},a.Variables.flyoutCategory=function(o){var c=[],d=document.createElement("button");return d.setAttribute("text","%{BKY_NEW_VARIABLE}"),d.setAttribute("callbackKey","CREATE_VARIABLE"),o.registerButtonCallback("CREATE_VARIABLE",function(f){a.Variables.createVariableButtonHandler(f.getTargetWorkspace())}),c.push(d),o=a.Variables.flyoutCategoryBlocks(o),c.concat(o)},a.Variables.flyoutCategoryBlocks=function(o){var c=[];if(0<(o=o.getVariablesOfType("")).length){var d=o[o.length-1];if(a.Blocks.variables_set){var f=a.utils.xml.createElement("block");f.setAttribute("type","variables_set"),f.setAttribute("gap",a.Blocks.math_change?8:24),f.appendChild(a.Variables.generateVariableFieldDom(d)),c.push(f)}if(a.Blocks.math_change&&((f=a.utils.xml.createElement("block")).setAttribute("type","math_change"),f.setAttribute("gap",a.Blocks.variables_get?20:8),f.appendChild(a.Variables.generateVariableFieldDom(d)),d=a.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),f.appendChild(d),c.push(f)),a.Blocks.variables_get){o.sort(a.VariableModel.compareByName),d=0;for(var v;v=o[d];d++)(f=a.utils.xml.createElement("block")).setAttribute("type","variables_get"),f.setAttribute("gap",8),f.appendChild(a.Variables.generateVariableFieldDom(v)),c.push(f)}}return c},a.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",a.Variables.generateUniqueName=function(o){return a.Variables.generateUniqueNameFromOptions(a.Variables.VAR_LETTER_OPTIONS.charAt(0),o.getAllVariableNames())},a.Variables.generateUniqueNameFromOptions=function(o,c){if(!c.length)return o;for(var d=a.Variables.VAR_LETTER_OPTIONS,f="",v=d.indexOf(o);;){for(var y=!1,D=0;D<c.length;D++)if(c[D].toLowerCase()==o){y=!0;break}if(!y)return o;++v==d.length&&(v=0,f=Number(f)+1),o=d.charAt(v)+f}},a.Variables.createVariableButtonHandler=function(o,c,d){var f=d||"",v=function(y){a.Variables.promptName(a.Msg.NEW_VARIABLE_TITLE,y,function(D){if(D){var O=a.Variables.nameUsedWithAnyType(D,o);if(O){if(O.type==f)var U=a.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",O.name);else U=(U=a.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",O.name).replace("%2",O.type);a.alert(U,function(){v(D)})}else o.createVariable(D,f),c&&c(D)}else c&&c(null)})};v("")},a.Variables.createVariable=a.Variables.createVariableButtonHandler,a.Variables.renameVariable=function(o,c,d){var f=function(v){var y=a.Msg.RENAME_VARIABLE_TITLE.replace("%1",c.name);a.Variables.promptName(y,v,function(D){if(D){var O=a.Variables.nameUsedWithOtherType_(D,c.type,o);O?(O=a.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",O.name).replace("%2",O.type),a.alert(O,function(){f(D)})):(o.renameVariableById(c.getId(),D),d&&d(D))}else d&&d(null)})};f("")},a.Variables.promptName=function(o,c,d){a.prompt(o,c,function(f){f&&((f=f.replace(/[\s\xa0]+/g," ").trim())==a.Msg.RENAME_VARIABLE||f==a.Msg.NEW_VARIABLE)&&(f=null),d(f)})},a.Variables.nameUsedWithOtherType_=function(o,c,d){d=d.getVariableMap().getAllVariables(),o=o.toLowerCase();for(var v,f=0;v=d[f];f++)if(v.name.toLowerCase()==o&&v.type!=c)return v;return null},a.Variables.nameUsedWithAnyType=function(o,c){c=c.getVariableMap().getAllVariables(),o=o.toLowerCase();for(var f,d=0;f=c[d];d++)if(f.name.toLowerCase()==o)return f;return null},a.Variables.generateVariableFieldDom=function(o){var c=a.utils.xml.createElement("field");return c.setAttribute("name","VAR"),c.setAttribute("id",o.getId()),c.setAttribute("variabletype",o.type),o=a.utils.xml.createTextNode(o.name),c.appendChild(o),c},a.Variables.getOrCreateVariablePackage=function(o,c,d,f){var v=a.Variables.getVariable(o,c,d,f);return v||(v=a.Variables.createVariable_(o,c,d,f)),v},a.Variables.getVariable=function(o,c,d,f){var v=o.getPotentialVariableMap(),y=null;if(c&&(!(y=o.getVariableById(c))&&v&&(y=v.getVariableById(c)),y))return y;if(d){if(null==f)throw Error("Tried to look up a variable by name without a type");!(y=o.getVariable(d,f))&&v&&(y=v.getVariable(d,f))}return y},a.Variables.createVariable_=function(o,c,d,f){var v=o.getPotentialVariableMap();return d||(d=a.Variables.generateUniqueName(o.isFlyout?o.targetWorkspace:o)),v?v.createVariable(d,f,c):o.createVariable(d,f,c)},a.Variables.getAddedVariables=function(o,c){o=o.getAllVariables();var d=[];if(c.length!=o.length)for(var f=0;f<o.length;f++){var v=o[f];-1==c.indexOf(v)&&d.push(v)}return d},a.VERSION="6.20210701.0",a.mainWorkspace=null,a.selected=null,a.draggingConnections=[],a.clipboardXml_=null,a.clipboardSource_=null,a.clipboardTypeCounts_=null,a.cache3dSupported_=null,a.parentContainer=null,a.svgSize=function(o){return a.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new a.utils.Size(o.cachedWidth_,o.cachedHeight_)},a.resizeSvgContents=function(o){o.resizeContents()},a.svgResize=function(o){for(;o.options.parentWorkspace;)o=o.options.parentWorkspace;var c=o.getParentSvg(),d=o.getCachedParentSvgSize(),f=c.parentNode;if(f){var v=f.offsetWidth;f=f.offsetHeight,d.width!=v&&(c.setAttribute("width",v+"px"),o.setCachedParentSvgSize(v,null)),d.height!=f&&(c.setAttribute("height",f+"px"),o.setCachedParentSvgSize(null,f)),o.resize()}},a.onKeyDown=function(o){var c=a.mainWorkspace;c&&!(a.utils.isTargetInput(o)||c.rendered&&!c.isVisible())&&a.ShortcutRegistry.registry.onKeyDown(c,o)},a.deleteBlock=function(o){o.workspace.isFlyout||(a.Events.setGroup(!0),a.hideChaff(),o.dispose(!o.outputConnection,!0),a.Events.setGroup(!1))},a.copy=function(o){(o=o.toCopyData())&&(a.clipboardXml_=o.xml,a.clipboardSource_=o.source,a.clipboardTypeCounts_=o.typeCounts)},a.paste=function(){if(!a.clipboardXml_)return!1;var o=a.clipboardSource_;return o.isFlyout&&(o=o.targetWorkspace),!(!a.clipboardTypeCounts_||!o.isCapacityAvailable(a.clipboardTypeCounts_)||(a.Events.setGroup(!0),o.paste(a.clipboardXml_),a.Events.setGroup(!1),0))},a.duplicate=function(o){var c=a.clipboardXml_,d=a.clipboardSource_;a.copy(o),o.workspace.paste(a.clipboardXml_),a.clipboardXml_=c,a.clipboardSource_=d},a.onContextMenu_=function(o){a.utils.isTargetInput(o)||o.preventDefault()},a.hideChaff=function(o){a.Tooltip.hide(),a.WidgetDiv.hide(),a.DropDownDiv.hideWithoutAnimation();var c=!!o;a.getMainWorkspace().getComponentManager().getComponents(a.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(d){d.autoHide(c)})},a.getMainWorkspace=function(){return a.mainWorkspace},a.alert=function(o,c){alert(o),c&&c()},a.confirm=function(o,c){c(confirm(o))},a.prompt=function(o,c,d){d(prompt(o,c))},a.jsonInitFactory_=function(o){return function(){this.jsonInit(o)}},a.defineBlocksWithJsonArray=function(o){for(var c=0;c<o.length;c++){var d=o[c];if(d){var f=d.type;null==f||""===f?console.warn("Block definition #"+c+" in JSON array is missing a type attribute. Skipping."):(a.Blocks[f]&&console.warn("Block definition #"+c+' in JSON array overwrites prior definition of "'+f+'".'),a.Blocks[f]={init:a.jsonInitFactory_(d)})}else console.warn("Block definition #"+c+" in JSON array is "+d+". Skipping.")}},a.isNumber=function(o){return/^\s*-?\d+(\.\d+)?\s*$/.test(o)},a.hueToHex=function(o){return a.utils.colour.hsvToHex(o,a.HSV_SATURATION,255*a.HSV_VALUE)},a.checkBlockColourConstants=function(){a.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),a.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),a.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),a.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),a.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),a.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),a.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),a.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),a.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),a.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),a.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),a.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),a.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),a.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),a.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),a.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},a.checkBlockColourConstant_=function(o,c,d){for(var f="Blockly",v=a,y=0;y<c.length;++y)f+="."+c[y],v&&(v=v[c[y]]);v&&v!==d&&(o=(void 0===d?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",f).replace("%2",o),console.warn(o))},a.setParentContainer=function(o){a.parentContainer=o},a.bindEvent_=a.browserEvents.bind,a.unbindEvent_=a.browserEvents.unbind,a.bindEventWithChecks_=a.browserEvents.conditionalBind,a.ALIGN_LEFT=a.constants.ALIGN.LEFT,a.ALIGN_CENTRE=a.constants.ALIGN.CENTRE,a.ALIGN_RIGHT=a.constants.ALIGN.RIGHT,a.INPUT_VALUE=a.connectionTypes.INPUT_VALUE,a.OUTPUT_VALUE=a.connectionTypes.OUTPUT_VALUE,a.NEXT_STATEMENT=a.connectionTypes.NEXT_STATEMENT,a.PREVIOUS_STATEMENT=a.connectionTypes.PREVIOUS_STATEMENT,a.DUMMY_INPUT=a.inputTypes.DUMMY,a.TOOLBOX_AT_TOP=a.utils.toolbox.Position.TOP,a.TOOLBOX_AT_BOTTOM=a.utils.toolbox.Position.BOTTOM,a.TOOLBOX_AT_LEFT=a.utils.toolbox.Position.LEFT,a.TOOLBOX_AT_RIGHT=a.utils.toolbox.Position.RIGHT,a.Events.BubbleOpen=function(o,c,d){a.Events.BubbleOpen.superClass_.constructor.call(this,o?o.workspace.id:void 0),this.blockId=o?o.id:null,this.isOpen=c,this.bubbleType=d},a.utils.object.inherits(a.Events.BubbleOpen,a.Events.UiBase),a.Events.BubbleOpen.prototype.type=a.Events.BUBBLE_OPEN,a.Events.BubbleOpen.prototype.toJson=function(){var o=a.Events.BubbleOpen.superClass_.toJson.call(this);return o.isOpen=this.isOpen,o.bubbleType=this.bubbleType,o.blockId=this.blockId,o},a.Events.BubbleOpen.prototype.fromJson=function(o){a.Events.BubbleOpen.superClass_.fromJson.call(this,o),this.isOpen=o.isOpen,this.bubbleType=o.bubbleType,this.blockId=o.blockId},a.registry.register(a.registry.Type.EVENT,a.Events.BUBBLE_OPEN,a.Events.BubbleOpen),a.Icon=function(o){this.block_=o,this.iconGroup_=null},a.Icon.prototype.collapseHidden=!0,a.Icon.prototype.SIZE=17,a.Icon.prototype.bubble_=null,a.Icon.prototype.iconXY_=null,a.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&a.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),a.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},a.Icon.prototype.dispose=function(){a.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},a.Icon.prototype.updateEditable=function(){},a.Icon.prototype.isVisible=function(){return!!this.bubble_},a.Icon.prototype.iconClick_=function(o){this.block_.workspace.isDragging()||this.block_.isInFlyout||a.utils.isRightButton(o)||this.setVisible(!this.isVisible())},a.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},a.Icon.prototype.setIconLocation=function(o){this.iconXY_=o,this.isVisible()&&this.bubble_.setAnchorLocation(o)},a.Icon.prototype.computeIconLocation=function(){var o=this.block_.getRelativeToSurfaceXY(),c=a.utils.getRelativeXY(this.iconGroup_);o=new a.utils.Coordinate(o.x+c.x+this.SIZE/2,o.y+c.y+this.SIZE/2),a.utils.Coordinate.equals(this.getIconLocation(),o)||this.setIconLocation(o)},a.Icon.prototype.getIconLocation=function(){return this.iconXY_},a.Icon.prototype.getCorrectedSize=function(){return new a.utils.Size(a.Icon.prototype.SIZE,a.Icon.prototype.SIZE-2)},a.Warning=function(o){a.Warning.superClass_.constructor.call(this,o),this.createIcon(),this.text_=Object.create(null)},a.utils.object.inherits(a.Warning,a.Icon),a.Warning.prototype.collapseHidden=!1,a.Warning.prototype.drawIcon_=function(o){a.utils.dom.createSvgElement(a.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},o),a.utils.dom.createSvgElement(a.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},o),a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},o)},a.Warning.prototype.setVisible=function(o){o!=this.isVisible()&&(a.Events.fire(new(a.Events.get(a.Events.BUBBLE_OPEN))(this.block_,o,"warning")),o?this.createBubble_():this.disposeBubble_())},a.Warning.prototype.createBubble_=function(){this.paragraphElement_=a.Bubble.textToDom(this.getText()),this.bubble_=a.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},a.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},a.Warning.prototype.setText=function(o,c){this.text_[c]!=o&&(o?this.text_[c]=o:delete this.text_[c],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},a.Warning.prototype.getText=function(){var c,o=[];for(c in this.text_)o.push(this.text_[c]);return o.join("\n")},a.Warning.prototype.dispose=function(){this.block_.warning=null,a.Icon.prototype.dispose.call(this)},a.Comment=function(o){a.Comment.superClass_.constructor.call(this,o),this.model_=o.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},a.utils.object.inherits(a.Comment,a.Icon),a.Comment.prototype.drawIcon_=function(o){a.utils.dom.createSvgElement(a.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},o),a.utils.dom.createSvgElement(a.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},o),a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},o)},a.Comment.prototype.createEditor_=function(){this.foreignObject_=a.utils.dom.createSvgElement(a.utils.Svg.FOREIGNOBJECT,{x:a.Bubble.BORDER_WIDTH,y:a.Bubble.BORDER_WIDTH},null);var o=document.createElementNS(a.utils.dom.HTML_NS,"body");o.setAttribute("xmlns",a.utils.dom.HTML_NS),o.className="blocklyMinimalBody";var c=this.textarea_=document.createElementNS(a.utils.dom.HTML_NS,"textarea");return c.className="blocklyCommentTextarea",c.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),c.value=this.model_.text,this.resizeTextarea_(),o.appendChild(c),this.foreignObject_.appendChild(o),this.onMouseUpWrapper_=a.browserEvents.conditionalBind(c,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=a.browserEvents.conditionalBind(c,"wheel",this,function(d){d.stopPropagation()}),this.onChangeWrapper_=a.browserEvents.conditionalBind(c,"change",this,function(d){this.cachedText_!=this.model_.text&&a.Events.fire(new(a.Events.get(a.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=a.browserEvents.conditionalBind(c,"input",this,function(d){this.model_.text=c.value}),setTimeout(c.focus.bind(c),0),this.foreignObject_},a.Comment.prototype.updateEditable=function(){a.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},a.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},a.Comment.prototype.resizeTextarea_=function(){var o=this.model_.size,c=2*a.Bubble.BORDER_WIDTH,d=o.width-c;o=o.height-c,this.foreignObject_.setAttribute("width",d),this.foreignObject_.setAttribute("height",o),this.textarea_.style.width=d-4+"px",this.textarea_.style.height=o-4+"px"},a.Comment.prototype.setVisible=function(o){o!=this.isVisible()&&(a.Events.fire(new(a.Events.get(a.Events.BUBBLE_OPEN))(this.block_,o,"comment")),(this.model_.pinned=o)?this.createBubble_():this.disposeBubble_())},a.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||a.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},a.Comment.prototype.createEditableBubble_=function(){this.bubble_=new a.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},a.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=a.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=a.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},a.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(a.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(a.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(a.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(a.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},a.Comment.prototype.startEdit_=function(o){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},a.Comment.prototype.getBubbleSize=function(){return this.model_.size},a.Comment.prototype.setBubbleSize=function(o,c){this.bubble_?this.bubble_.setBubbleSize(o,c):(this.model_.size.width=o,this.model_.size.height=c)},a.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},a.Comment.prototype.dispose=function(){this.block_.comment=null,a.Icon.prototype.dispose.call(this)},a.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),a.IComponent=function(){},a.IDragTarget=function(){},a.DragTarget=function(){},a.DragTarget.prototype.onDragEnter=function(o){},a.DragTarget.prototype.onDragOver=function(o){},a.DragTarget.prototype.onDragExit=function(o){},a.DragTarget.prototype.onDrop=function(o){},a.DragTarget.prototype.shouldPreventMove=function(o){return!1},a.IDeleteArea=function(){},a.DeleteArea=function(){a.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},a.utils.object.inherits(a.DeleteArea,a.DragTarget),a.DeleteArea.prototype.wouldDelete=function(o,c){return o instanceof a.BlockSvg?(o=!o.getParent()&&o.isDeletable(),this.updateWouldDelete_(o&&!c)):this.updateWouldDelete_(o.isDeletable()),this.wouldDelete_},a.DeleteArea.prototype.updateWouldDelete_=function(o){this.wouldDelete_=o},a.IFlyout=function(){},a.Flyout=function(o){a.Flyout.superClass_.constructor.call(this),o.setMetrics=this.setMetrics_.bind(this),this.workspace_=new a.WorkspaceSvg(o),this.workspace_.setMetricsManager(new a.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=a.utils.genUid(),this.RTL=!!o.RTL,this.horizontalLayout=!1,this.toolboxPosition_=o.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},a.utils.object.inherits(a.Flyout,a.DeleteArea),a.Flyout.prototype.autoClose=!0,a.Flyout.prototype.isVisible_=!1,a.Flyout.prototype.containerVisible_=!0,a.Flyout.prototype.CORNER_RADIUS=8,a.Flyout.prototype.MARGIN=a.Flyout.prototype.CORNER_RADIUS,a.Flyout.prototype.GAP_X=3*a.Flyout.prototype.MARGIN,a.Flyout.prototype.GAP_Y=3*a.Flyout.prototype.MARGIN,a.Flyout.prototype.SCROLLBAR_MARGIN=2.5,a.Flyout.prototype.width_=0,a.Flyout.prototype.height_=0,a.Flyout.prototype.dragAngleRange_=70,a.Flyout.prototype.createDom=function(o){return this.svgGroup_=a.utils.dom.createSvgElement(o,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=a.utils.dom.createSvgElement(a.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},a.Flyout.prototype.init=function(o){this.targetWorkspace=o,this.workspace_.targetWorkspace=o,this.workspace_.scrollbar=new a.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,a.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,a.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),o.getComponentManager().addComponent({component:this,weight:1,capabilities:[a.ComponentManager.Capability.DELETE_AREA,a.ComponentManager.Capability.DRAG_TARGET]})},a.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),a.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(a.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},a.Flyout.prototype.getWidth=function(){return this.width_},a.Flyout.prototype.getHeight=function(){return this.height_},a.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},a.Flyout.prototype.getWorkspace=function(){return this.workspace_},a.Flyout.prototype.isVisible=function(){return this.isVisible_},a.Flyout.prototype.setVisible=function(o){var c=o!=this.isVisible();this.isVisible_=o,c&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},a.Flyout.prototype.setContainerVisible=function(o){var c=o!=this.containerVisible_;this.containerVisible_=o,c&&this.updateDisplay_()},a.Flyout.prototype.updateDisplay_=function(){var o=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=o?"block":"none",this.workspace_.scrollbar.setContainerVisible(o)},a.Flyout.prototype.positionAt_=function(o,c,d,f){this.svgGroup_.setAttribute("width",o),this.svgGroup_.setAttribute("height",c),this.workspace_.setCachedParentSvgSize(o,c),"svg"==this.svgGroup_.tagName?a.utils.dom.setCssTransform(this.svgGroup_,"translate("+d+"px,"+f+"px)"):this.svgGroup_.setAttribute("transform","translate("+d+","+f+")"),(o=this.workspace_.scrollbar)&&(o.setOrigin(d,f),o.resize(),o.hScroll&&o.hScroll.setPosition(o.hScroll.position.x,o.hScroll.position.y),o.vScroll&&o.vScroll.setPosition(o.vScroll.position.x,o.vScroll.position.y))},a.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var c,o=0;c=this.listeners_[o];o++)a.browserEvents.unbind(c);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},a.Flyout.prototype.show=function(o){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof o&&(o=this.getDynamicCategoryContents_(o)),this.setVisible(!0),o=a.utils.toolbox.convertFlyoutDefToJsonArray(o),o=this.createFlyoutInfo_(o),this.layout_(o.contents,o.gaps),this.listeners_.push(a.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var f,c=this.workspace_.getTopBlocks(!1),d=0;f=c[d];d++)f.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},a.Flyout.prototype.createFlyoutInfo_=function(o){var c=[],d=[];this.permanentlyDisabled_.length=0;for(var y,f=this.horizontalLayout?this.GAP_X:this.GAP_Y,v=0;y=o[v];v++)switch(y.custom&&(y=this.getDynamicCategoryContents_(y.custom),y=a.utils.toolbox.convertFlyoutDefToJsonArray(y),o.splice.apply(o,[v,1].concat(y)),y=o[v]),y.kind.toUpperCase()){case"BLOCK":var D=y,O=this.getBlockXml_(D);y=this.createBlock_(O),D=parseInt(D.gap||O.getAttribute("gap"),10),d.push(isNaN(D)?f:D),c.push({type:"block",block:y});break;case"SEP":this.addSeparatorGap_(y,d,f);break;case"LABEL":y=this.createButton_(y,!0),c.push({type:"button",button:y}),d.push(f);break;case"BUTTON":y=this.createButton_(y,!1),c.push({type:"button",button:y}),d.push(f)}return{contents:c,gaps:d}},a.Flyout.prototype.getDynamicCategoryContents_=function(o){if("function"!=typeof(o=this.workspace_.targetWorkspace.getToolboxCategoryCallback(o)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(o=o(this.workspace_.targetWorkspace),!Array.isArray(o))throw new TypeError("Result of toolbox category callback must be an array.");return o},a.Flyout.prototype.createButton_=function(o,c){if(!a.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new a.FlyoutButton(this.workspace_,this.targetWorkspace,o,c)},a.Flyout.prototype.createBlock_=function(o){return(o=a.Xml.domToBlock(o,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(o),o},a.Flyout.prototype.getBlockXml_=function(o){var c=null,d=o.blockxml;if(d&&"string"!=typeof d?c=d:d&&"string"==typeof d?(c=a.Xml.textToDom(d),o.blockxml=c):o.type&&((c=a.utils.xml.createElement("xml")).setAttribute("type",o.type),c.setAttribute("disabled",o.disabled),o.blockxml=c),!c)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return c},a.Flyout.prototype.addSeparatorGap_=function(o,c,d){o=parseInt(o.gap,10),!isNaN(o)&&0<c.length?c[c.length-1]=o:c.push(d)},a.Flyout.prototype.clearOldBlocks_=function(){for(var d,o=this.workspace_.getTopBlocks(!1),c=0;d=o[c];c++)d.workspace==this.workspace_&&d.dispose(!1,!1);for(c=0;c<this.mats_.length;c++)(o=this.mats_[c])&&(a.Tooltip.unbindMouseEvents(o),a.utils.dom.removeNode(o));for(c=this.mats_.length=0;o=this.buttons_[c];c++)o.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},a.Flyout.prototype.addBlockListeners_=function(o,c,d){this.listeners_.push(a.browserEvents.conditionalBind(o,"mousedown",null,this.blockMouseDown_(c))),this.listeners_.push(a.browserEvents.conditionalBind(d,"mousedown",null,this.blockMouseDown_(c))),this.listeners_.push(a.browserEvents.bind(o,"mouseenter",c,c.addSelect)),this.listeners_.push(a.browserEvents.bind(o,"mouseleave",c,c.removeSelect)),this.listeners_.push(a.browserEvents.bind(d,"mouseenter",c,c.addSelect)),this.listeners_.push(a.browserEvents.bind(d,"mouseleave",c,c.removeSelect))},a.Flyout.prototype.blockMouseDown_=function(o){var c=this;return function(d){var f=c.targetWorkspace.getGesture(d);f&&(f.setStartBlock(o),f.handleFlyoutStart(d,c))}},a.Flyout.prototype.onMouseDown_=function(o){var c=this.targetWorkspace.getGesture(o);c&&c.handleFlyoutStart(o,this)},a.Flyout.prototype.isBlockCreatable_=function(o){return o.isEnabled()},a.Flyout.prototype.createBlock=function(o){var c=null;a.Events.disable();var d=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{c=this.placeNewBlock_(o)}finally{a.Events.enable()}if(a.hideChaff(),o=a.Variables.getAddedVariables(this.targetWorkspace,d),a.Events.isEnabled()){for(a.Events.setGroup(!0),d=0;d<o.length;d++){var f=o[d];a.Events.fire(new(a.Events.get(a.Events.VAR_CREATE))(f))}a.Events.fire(new(a.Events.get(a.Events.BLOCK_CREATE))(c))}return this.autoClose?this.hide():this.filterForCapacity_(),c},a.Flyout.prototype.initFlyoutButton_=function(o,c,d){var f=o.createDom();o.moveTo(c,d),o.show(),this.listeners_.push(a.browserEvents.conditionalBind(f,"mousedown",this,this.onMouseDown_)),this.buttons_.push(o)},a.Flyout.prototype.createRect_=function(o,c,d,f,v){return(c=a.utils.dom.createSvgElement(a.utils.Svg.RECT,{"fill-opacity":0,x:c,y:d,height:f.height,width:f.width},null)).tooltip=o,a.Tooltip.bindMouseEvents(c),this.workspace_.getCanvas().insertBefore(c,o.getSvgRoot()),o.flyoutRect_=c,this.mats_[v]=c},a.Flyout.prototype.moveRectToBlock_=function(o,c){var d=c.getHeightWidth();o.setAttribute("width",d.width),o.setAttribute("height",d.height),c=c.getRelativeToSurfaceXY(),o.setAttribute("y",c.y),o.setAttribute("x",this.RTL?c.x-d.width:c.x)},a.Flyout.prototype.filterForCapacity_=function(){for(var d,o=this.workspace_.getTopBlocks(!1),c=0;d=o[c];c++)if(-1==this.permanentlyDisabled_.indexOf(d))for(var f=this.targetWorkspace.isCapacityAvailable(a.utils.getBlockTypeCounts(d));d;)d.setEnabled(f),d=d.getNextBlock()},a.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},a.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},a.Flyout.prototype.placeNewBlock_=function(o){var c=this.targetWorkspace;if(!o.getSvgRoot())throw Error("oldBlock is not rendered.");var d=a.Xml.blockToDom(o,!0);if(c.setResizesEnabled(!1),!(d=a.Xml.domToBlock(d,c)).getSvgRoot())throw Error("block is not rendered.");var f=c.getOriginOffsetInPixels(),v=this.workspace_.getOriginOffsetInPixels();return(o=o.getRelativeToSurfaceXY()).scale(this.workspace_.scale),o=a.utils.Coordinate.sum(v,o),(f=a.utils.Coordinate.difference(o,f)).scale(1/c.scale),d.moveBy(f.x,f.y),d},a.HorizontalFlyout=function(o){a.HorizontalFlyout.superClass_.constructor.call(this,o),this.horizontalLayout=!0},a.utils.object.inherits(a.HorizontalFlyout,a.Flyout),a.HorizontalFlyout.prototype.setMetrics_=function(o){if(this.isVisible()){var c=this.workspace_.getMetricsManager(),d=c.getScrollMetrics(),f=c.getViewMetrics();c=c.getAbsoluteMetrics(),"number"==typeof o.x&&(this.workspace_.scrollX=-(d.left+(d.width-f.width)*o.x)),this.workspace_.translate(this.workspace_.scrollX+c.left,this.workspace_.scrollY+c.top)}},a.HorizontalFlyout.prototype.getX=function(){return 0},a.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var o=this.targetWorkspace.getMetricsManager(),c=o.getAbsoluteMetrics(),d=o.getViewMetrics();o=o.getToolboxMetrics();var f=this.toolboxPosition_==a.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?f?o.height:d.height-this.height_:f?0:d.height:f?0:d.height+c.top-this.height_},a.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var o=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=o.width,this.setBackgroundPath_(o.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),o=this.getX();var c=this.getY();this.positionAt_(this.width_,this.height_,o,c)}},a.HorizontalFlyout.prototype.setBackgroundPath_=function(o,c){var d=this.toolboxPosition_==a.utils.toolbox.Position.TOP,f=["M 0,"+(d?0:this.CORNER_RADIUS)];d?(f.push("h",o+2*this.CORNER_RADIUS),f.push("v",c),f.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),f.push("h",-o),f.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(f.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),f.push("h",o),f.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),f.push("v",c),f.push("h",-o-2*this.CORNER_RADIUS)),f.push("z"),this.svgBackground_.setAttribute("d",f.join(" "))},a.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},a.HorizontalFlyout.prototype.wheel_=function(o){var c=a.utils.getScrollDeltaPixels(o);if(c=c.x||c.y){var d=this.workspace_.getMetricsManager(),f=d.getScrollMetrics();c=d.getViewMetrics().left-f.left+c,this.workspace_.scrollbar.setX(c),a.WidgetDiv.hide(),a.DropDownDiv.hideWithoutAnimation()}o.preventDefault(),o.stopPropagation()},a.HorizontalFlyout.prototype.layout_=function(o,c){this.workspace_.scale=this.targetWorkspace.scale;var d=this.MARGIN,f=d+this.tabWidth_;this.RTL&&(o=o.reverse());for(var y,v=0;y=o[v];v++)if("block"==y.type){for(var U,D=(y=y.block).getDescendants(!1),O=0;U=D[O];O++)U.isInFlyout=!0;y.render(),D=y.getSvgRoot(),O=y.getHeightWidth(),U=y.outputConnection?this.tabWidth_:0,y.moveBy(U=this.RTL?f+O.width:f-U,d),U=this.createRect_(y,U,d,O,v),f+=O.width+c[v],this.addBlockListeners_(D,y,U)}else"button"==y.type&&(this.initFlyoutButton_(y.button,f,d),f+=y.button.width+c[v])},a.HorizontalFlyout.prototype.isDragTowardWorkspace=function(o){o=Math.atan2(o.y,o.x)/Math.PI*180;var c=this.dragAngleRange_;return o<90+c&&o>90-c||o>-90-c&&o<-90+c},a.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var o=this.svgGroup_.getBoundingClientRect(),c=o.top;return this.toolboxPosition_==a.utils.toolbox.Position.TOP?new a.utils.Rect(-1e9,c+o.height,-1e9,1e9):new a.utils.Rect(c,1e9,-1e9,1e9)},a.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var f,o=0,c=this.workspace_.getTopBlocks(!1),d=0;f=c[d];d++)o=Math.max(o,f.getHeightWidth().height);if(o+=1.5*this.MARGIN,o*=this.workspace_.scale,this.height_!=(o+=a.Scrollbar.scrollbarThickness)){for(d=0;f=c[d];d++)f.flyoutRect_&&this.moveRectToBlock_(f.flyoutRect_,f);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=a.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+o),this.height_=o,this.position(),this.targetWorkspace.recordDragTargets()}},a.registry.register(a.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,a.registry.DEFAULT,a.HorizontalFlyout),a.VerticalFlyout=function(o){a.VerticalFlyout.superClass_.constructor.call(this,o)},a.utils.object.inherits(a.VerticalFlyout,a.Flyout),a.VerticalFlyout.registryName="verticalFlyout",a.VerticalFlyout.prototype.setMetrics_=function(o){if(this.isVisible()){var c=this.workspace_.getMetricsManager(),d=c.getScrollMetrics(),f=c.getViewMetrics();c=c.getAbsoluteMetrics(),"number"==typeof o.y&&(this.workspace_.scrollY=-(d.top+(d.height-f.height)*o.y)),this.workspace_.translate(this.workspace_.scrollX+c.left,this.workspace_.scrollY+c.top)}},a.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var o=this.targetWorkspace.getMetricsManager(),c=o.getAbsoluteMetrics(),d=o.getViewMetrics();return o=o.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==a.utils.toolbox.Position.LEFT?o.width:d.width-this.width_:this.toolboxPosition_==a.utils.toolbox.Position.LEFT?0:d.width:this.toolboxPosition_==a.utils.toolbox.Position.LEFT?0:d.width+c.left-this.width_},a.VerticalFlyout.prototype.getY=function(){return 0},a.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var o=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=o.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,o.height-2*this.CORNER_RADIUS),o=this.getX();var c=this.getY();this.positionAt_(this.width_,this.height_,o,c)}},a.VerticalFlyout.prototype.setBackgroundPath_=function(o,c){var d=this.toolboxPosition_==a.utils.toolbox.Position.RIGHT,f=o+this.CORNER_RADIUS;(f=["M "+(d?f:0)+",0"]).push("h",d?-o:o),f.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,d?0:1,d?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),f.push("v",Math.max(0,c)),f.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,d?0:1,d?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),f.push("h",d?o:-o),f.push("z"),this.svgBackground_.setAttribute("d",f.join(" "))},a.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},a.VerticalFlyout.prototype.wheel_=function(o){var c=a.utils.getScrollDeltaPixels(o);if(c.y){var d=this.workspace_.getMetricsManager(),f=d.getScrollMetrics();c=d.getViewMetrics().top-f.top+c.y,this.workspace_.scrollbar.setY(c),a.WidgetDiv.hide(),a.DropDownDiv.hideWithoutAnimation()}o.preventDefault(),o.stopPropagation()},a.VerticalFlyout.prototype.layout_=function(o,c){this.workspace_.scale=this.targetWorkspace.scale;for(var y,d=this.MARGIN,f=this.RTL?d:d+this.tabWidth_,v=0;y=o[v];v++)if("block"==y.type){for(var U,D=(y=y.block).getDescendants(!1),O=0;U=D[O];O++)U.isInFlyout=!0;y.render(),D=y.getSvgRoot(),O=y.getHeightWidth(),y.moveBy(U=y.outputConnection?f-this.tabWidth_:f,d),U=this.createRect_(y,this.RTL?U-O.width:U,d,O,v),this.addBlockListeners_(D,y,U),d+=O.height+c[v]}else"button"==y.type&&(this.initFlyoutButton_(y.button,f,d),d+=y.button.height+c[v])},a.VerticalFlyout.prototype.isDragTowardWorkspace=function(o){o=Math.atan2(o.y,o.x)/Math.PI*180;var c=this.dragAngleRange_;return o<c&&o>-c||o<-180+c||o>180-c},a.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var o=this.svgGroup_.getBoundingClientRect(),c=o.left;return this.toolboxPosition_==a.utils.toolbox.Position.LEFT?new a.utils.Rect(-1e9,1e9,-1e9,c+o.width):new a.utils.Rect(-1e9,1e9,c,1e9)},a.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var f,o=0,c=this.workspace_.getTopBlocks(!1),d=0;f=c[d];d++){var v=f.getHeightWidth().width;f.outputConnection&&(v-=this.tabWidth_),o=Math.max(o,v)}for(d=0;f=this.buttons_[d];d++)o=Math.max(o,f.width);if(o+=1.5*this.MARGIN+this.tabWidth_,o*=this.workspace_.scale,this.width_!=(o+=a.Scrollbar.scrollbarThickness)){for(d=0;f=c[d];d++){if(this.RTL){v=f.getRelativeToSurfaceXY().x;var y=o/this.workspace_.scale-this.MARGIN;f.outputConnection||(y-=this.tabWidth_),f.moveBy(y-v,0)}f.flyoutRect_&&this.moveRectToBlock_(f.flyoutRect_,f)}if(this.RTL)for(d=0;f=this.buttons_[d];d++)c=f.getPosition().y,f.moveTo(o/this.workspace_.scale-f.width-this.MARGIN-this.tabWidth_,c);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=a.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+o,this.targetWorkspace.scrollY),this.width_=o,this.position(),this.targetWorkspace.recordDragTargets()}},a.registry.register(a.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,a.registry.DEFAULT,a.VerticalFlyout),a.FlyoutButton=function(o,c,d,f){this.workspace_=o,this.targetWorkspace_=c,this.text_=d.text,this.position_=new a.utils.Coordinate(0,0),this.isLabel_=f,this.callbackKey_=d.callbackKey||d.callbackkey,this.cssClass_=d["web-class"]||null,this.onMouseUpWrapper_=null,this.info=d},a.FlyoutButton.MARGIN_X=5,a.FlyoutButton.MARGIN_Y=2,a.FlyoutButton.prototype.width=0,a.FlyoutButton.prototype.height=0,a.FlyoutButton.prototype.createDom=function(){var o=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(o+=" "+this.cssClass_),this.svgGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{class:o},this.workspace_.getCanvas()),!this.isLabel_)var c=a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);o=a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var d=a.utils.dom.createSvgElement(a.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),f=a.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(f+="\u200f"),d.textContent=f,this.isLabel_&&(this.svgText_=d,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var v=a.utils.style.getComputedStyle(d,"fontSize"),y=a.utils.style.getComputedStyle(d,"fontWeight"),D=a.utils.style.getComputedStyle(d,"fontFamily");return this.width=a.utils.dom.getFastTextWidthWithSizeString(d,v,y,D),f=a.utils.dom.measureFontMetrics(f,v,y,D),this.height=f.height,this.isLabel_||(this.width+=2*a.FlyoutButton.MARGIN_X,this.height+=2*a.FlyoutButton.MARGIN_Y,c.setAttribute("width",this.width),c.setAttribute("height",this.height)),o.setAttribute("width",this.width),o.setAttribute("height",this.height),d.setAttribute("x",this.width/2),d.setAttribute("y",this.height/2-f.height/2+f.baseline),this.updateTransform_(),this.onMouseUpWrapper_=a.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},a.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},a.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},a.FlyoutButton.prototype.moveTo=function(o,c){this.position_.x=o,this.position_.y=c,this.updateTransform_()},a.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},a.FlyoutButton.prototype.getPosition=function(){return this.position_},a.FlyoutButton.prototype.getButtonText=function(){return this.text_},a.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},a.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&a.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&a.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},a.FlyoutButton.prototype.onMouseUp_=function(o){(o=this.targetWorkspace_.getGesture(o))&&o.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},a.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),a.Generator=function(o){this.name_=o,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},a.Generator.prototype.INFINITE_LOOP_TRAP=null,a.Generator.prototype.STATEMENT_PREFIX=null,a.Generator.prototype.STATEMENT_SUFFIX=null,a.Generator.prototype.INDENT="  ",a.Generator.prototype.COMMENT_WRAP=60,a.Generator.prototype.ORDER_OVERRIDES=[],a.Generator.prototype.isInitialized=null,a.Generator.prototype.workspaceToCode=function(o){o||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),o=a.getMainWorkspace());var c=[];this.init(o),o=o.getTopBlocks(!0);for(var f,d=0;f=o[d];d++){var v=this.blockToCode(f);Array.isArray(v)&&(v=v[0]),v&&(f.outputConnection&&(v=this.scrubNakedValue(v),this.STATEMENT_PREFIX&&!f.suppressPrefixSuffix&&(v=this.injectId(this.STATEMENT_PREFIX,f)+v),this.STATEMENT_SUFFIX&&!f.suppressPrefixSuffix&&(v+=this.injectId(this.STATEMENT_SUFFIX,f))),c.push(v))}return c=c.join("\n"),(c=(c=(c=this.finish(c)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},a.Generator.prototype.prefixLines=function(o,c){return c+o.replace(/(?!\n$)\n/g,"\n"+c)},a.Generator.prototype.allNestedComments=function(o){var c=[];o=o.getDescendants(!0);for(var d=0;d<o.length;d++){var f=o[d].getCommentText();f&&c.push(f)}return c.length&&c.push(""),c.join("\n")},a.Generator.prototype.blockToCode=function(o,c){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!o)return"";if(!o.isEnabled())return c?"":this.blockToCode(o.getNextBlock());if(o.isInsertionMarker())return c?"":this.blockToCode(o.getChildren(!1)[0]);var d=this[o.type];if("function"!=typeof d)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+o.type+'".');if(d=d.call(o,o),Array.isArray(d)){if(!o.outputConnection)throw TypeError("Expecting string from statement block: "+o.type);return[this.scrub_(o,d[0],c),d[1]]}if("string"==typeof d)return this.STATEMENT_PREFIX&&!o.suppressPrefixSuffix&&(d=this.injectId(this.STATEMENT_PREFIX,o)+d),this.STATEMENT_SUFFIX&&!o.suppressPrefixSuffix&&(d+=this.injectId(this.STATEMENT_SUFFIX,o)),this.scrub_(o,d,c);if(null===d)return"";throw SyntaxError("Invalid code generated: "+d)},a.Generator.prototype.valueToCode=function(o,c,d){if(isNaN(d))throw TypeError("Expecting valid order from block: "+o.type);var f=o.getInputTargetBlock(c);if(!f||""===(c=this.blockToCode(f)))return"";if(!Array.isArray(c))throw TypeError("Expecting tuple from value block: "+f.type);if(o=c[0],c=c[1],isNaN(c))throw TypeError("Expecting valid order from value block: "+f.type);if(!o)return"";f=!1;var v=Math.floor(d),y=Math.floor(c);if(v<=y&&(v!=y||0!=v&&99!=v))for(f=!0,v=0;v<this.ORDER_OVERRIDES.length;v++)if(this.ORDER_OVERRIDES[v][0]==d&&this.ORDER_OVERRIDES[v][1]==c){f=!1;break}return f&&(o="("+o+")"),o},a.Generator.prototype.statementToCode=function(o,c){if(o=o.getInputTargetBlock(c),"string"!=typeof(c=this.blockToCode(o)))throw TypeError("Expecting code from statement block: "+(o&&o.type));return c&&(c=this.prefixLines(c,this.INDENT)),c},a.Generator.prototype.addLoopTrap=function(o,c){return this.INFINITE_LOOP_TRAP&&(o=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,c),this.INDENT)+o),this.STATEMENT_SUFFIX&&!c.suppressPrefixSuffix&&(o=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,c),this.INDENT)+o),this.STATEMENT_PREFIX&&!c.suppressPrefixSuffix&&(o+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,c),this.INDENT)),o},a.Generator.prototype.injectId=function(o,c){return c=c.id.replace(/\$/g,"$$$$"),o.replace(/%1/g,"'"+c+"'")},a.Generator.prototype.RESERVED_WORDS_="",a.Generator.prototype.addReservedWords=function(o){this.RESERVED_WORDS_+=o+","},a.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(a.Generator.prototype,"variableDB_",{get:function(){return a.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(o){a.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=o}}),a.Generator.prototype.provideFunction_=function(o,c){if(!this.definitions_[o]){var f,d=this.nameDB_.getDistinctName(o,a.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[o]=d,c=c.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,d);f!=c;)f=c,c=c.replace(/^(( {2})*) {2}/gm,"$1\0");c=c.replace(/\0/g,this.INDENT),this.definitions_[o]=c}return this.functionNames_[o]},a.Generator.prototype.init=function(o){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},a.Generator.prototype.scrub_=function(o,c,d){return c},a.Generator.prototype.finish=function(o){return delete this.definitions_,delete this.functionNames_,o},a.Generator.prototype.scrubNakedValue=function(o){return o},a.IToolboxItem=function(){},a.ISelectableToolboxItem=function(){},a.ICollapsibleToolboxItem=function(){},a.ToolboxItem=function(o,c,d){this.id_=o.toolboxitemid||a.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=d||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=o,this.parentToolbox_=c,this.workspace_=this.parentToolbox_.getWorkspace()},a.ToolboxItem.prototype.init=function(){},a.ToolboxItem.prototype.getDiv=function(){return null},a.ToolboxItem.prototype.getId=function(){return this.id_},a.ToolboxItem.prototype.getParent=function(){return null},a.ToolboxItem.prototype.getLevel=function(){return this.level_},a.ToolboxItem.prototype.isSelectable=function(){return!1},a.ToolboxItem.prototype.isCollapsible=function(){return!1},a.ToolboxItem.prototype.dispose=function(){},a.ToolboxCategory=function(o,c,d){a.ToolboxCategory.superClass_.constructor.call(this,o,c,d),this.name_=a.utils.replaceMessageReferences(o.name),this.colour_=this.getColour_(o),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),a.utils.object.mixin(this.cssConfig_,o.cssconfig||o.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(o)},a.utils.object.inherits(a.ToolboxCategory,a.ToolboxItem),a.ToolboxCategory.registrationName="category",a.ToolboxCategory.nestedPadding=19,a.ToolboxCategory.borderWidth=8,a.ToolboxCategory.defaultBackgroundColour="#57e",a.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},a.ToolboxCategory.prototype.parseContents_=function(o){var c=o.contents;if(o.custom)this.flyoutItems_=o.custom;else if(c){o=0;for(var d;d=c[o];o++)this.flyoutItems_.push(d)}},a.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},a.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),a.utils.aria.setRole(this.htmlDiv_,a.utils.aria.Role.TREEITEM),a.utils.aria.setState(this.htmlDiv_,a.utils.aria.State.SELECTED,!1),a.utils.aria.setState(this.htmlDiv_,a.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),a.utils.aria.setRole(this.iconDom_,a.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),a.utils.aria.setState(this.htmlDiv_,a.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},a.ToolboxCategory.prototype.createContainer_=function(){var o=document.createElement("div");return a.utils.dom.addClass(o,this.cssConfig_.container),o},a.ToolboxCategory.prototype.createRowContainer_=function(){var o=document.createElement("div");a.utils.dom.addClass(o,this.cssConfig_.row);var c=a.ToolboxCategory.nestedPadding*this.getLevel();return c=c.toString()+"px",this.workspace_.RTL?o.style.paddingRight=c:o.style.paddingLeft=c,o},a.ToolboxCategory.prototype.createRowContentsContainer_=function(){var o=document.createElement("div");return a.utils.dom.addClass(o,this.cssConfig_.rowcontentcontainer),o},a.ToolboxCategory.prototype.createIconDom_=function(){var o=document.createElement("span");return this.parentToolbox_.isHorizontal()||a.utils.dom.addClass(o,this.cssConfig_.icon),o.style.display="inline-block",o},a.ToolboxCategory.prototype.createLabelDom_=function(o){var c=document.createElement("span");return c.setAttribute("id",this.getId()+".label"),c.textContent=o,a.utils.dom.addClass(c,this.cssConfig_.label),c},a.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},a.ToolboxCategory.prototype.addColourBorder_=function(o){o&&(o=a.ToolboxCategory.borderWidth+"px solid "+(o||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=o:this.rowDiv_.style.borderLeft=o)},a.ToolboxCategory.prototype.getColour_=function(o){var c=o.categorystyle||o.categoryStyle;return(o=o.colour)&&c?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):c?this.getColourfromStyle_(c):this.parseColour_(o)},a.ToolboxCategory.prototype.getColourfromStyle_=function(o){var c=this.workspace_.getTheme();if(o&&c){if((c=c.categoryStyles[o])&&c.colour)return this.parseColour_(c.colour);console.warn('Style "'+o+'" must exist and contain a colour value')}return""},a.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},a.ToolboxCategory.prototype.parseColour_=function(o){if(null==(o=a.utils.replaceMessageReferences(o))||""===o)return"";var c=Number(o);return isNaN(c)?(c=a.utils.colour.parse(o))?c:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+o),""):a.hueToHex(c)},a.ToolboxCategory.prototype.openIcon_=function(o){o&&(a.utils.dom.removeClasses(o,this.cssConfig_.closedicon),a.utils.dom.addClass(o,this.cssConfig_.openicon))},a.ToolboxCategory.prototype.closeIcon_=function(o){o&&(a.utils.dom.removeClasses(o,this.cssConfig_.openicon),a.utils.dom.addClass(o,this.cssConfig_.closedicon))},a.ToolboxCategory.prototype.setVisible_=function(o){this.htmlDiv_.style.display=o?"block":"none",this.isHidden_=!o,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},a.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},a.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},a.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},a.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var o=this;o.getParent();)if(!(o=o.getParent()).isExpanded())return!1;return!0},a.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},a.ToolboxCategory.prototype.onClick=function(o){},a.ToolboxCategory.prototype.setSelected=function(o){if(o){var c=this.parseColour_(a.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||c,a.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",a.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);a.utils.aria.setState(this.htmlDiv_,a.utils.aria.State.SELECTED,o)},a.ToolboxCategory.prototype.setDisabled=function(o){this.isDisabled_=o,this.getDiv().setAttribute("disabled",o),o?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},a.ToolboxCategory.prototype.getName=function(){return this.name_},a.ToolboxCategory.prototype.getParent=function(){return this.parent_},a.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},a.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},a.ToolboxCategory.prototype.updateFlyoutContents=function(o){this.flyoutItems_=[],"string"==typeof o?this.toolboxItemDef_.custom=o:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=a.utils.toolbox.convertFlyoutDefToJsonArray(o)),this.parseContents_(this.toolboxItemDef_)},a.ToolboxCategory.prototype.dispose=function(){a.utils.dom.removeNode(this.htmlDiv_)},a.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),a.registry.register(a.registry.Type.TOOLBOX_ITEM,a.ToolboxCategory.registrationName,a.ToolboxCategory),a.ToolboxSeparator=function(o,c){a.ToolboxSeparator.superClass_.constructor.call(this,o,c),this.cssConfig_={container:"blocklyTreeSeparator"},a.utils.object.mixin(this.cssConfig_,o.cssconfig||o.cssConfig)},a.utils.object.inherits(a.ToolboxSeparator,a.ToolboxItem),a.ToolboxSeparator.registrationName="sep",a.ToolboxSeparator.prototype.init=function(){this.createDom_()},a.ToolboxSeparator.prototype.createDom_=function(){var o=document.createElement("div");return a.utils.dom.addClass(o,this.cssConfig_.container),this.htmlDiv_=o},a.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},a.ToolboxSeparator.prototype.dispose=function(){a.utils.dom.removeNode(this.htmlDiv_)},a.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),a.registry.register(a.registry.Type.TOOLBOX_ITEM,a.ToolboxSeparator.registrationName,a.ToolboxSeparator),a.CollapsibleToolboxCategory=function(o,c,d){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],a.CollapsibleToolboxCategory.superClass_.constructor.call(this,o,c,d)},a.utils.object.inherits(a.CollapsibleToolboxCategory,a.ToolboxCategory),a.CollapsibleToolboxCategory.registrationName="collapsibleCategory",a.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var o=a.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return o.contents="blocklyToolboxContents",o},a.CollapsibleToolboxCategory.prototype.parseContents_=function(o){var c=o.contents,d=!0;if(o.custom)this.flyoutItems_=o.custom;else if(c){o=0;for(var f;f=c[o];o++)!a.registry.hasItem(a.registry.Type.TOOLBOX_ITEM,f.kind)||f.kind.toLowerCase()==a.ToolboxSeparator.registrationName&&d?(this.flyoutItems_.push(f),d=!0):(this.createToolboxItem_(f),d=!1)}},a.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(o){var c=o.kind;"CATEGORY"==c.toUpperCase()&&a.utils.toolbox.isCategoryCollapsible(o)&&(c=a.CollapsibleToolboxCategory.registrationName),o=new(a.registry.getClass(a.registry.Type.TOOLBOX_ITEM,c))(o,this.parentToolbox_,this),this.toolboxItems_.push(o)},a.CollapsibleToolboxCategory.prototype.init=function(){a.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},a.CollapsibleToolboxCategory.prototype.createDom_=function(){a.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var o=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(o),a.utils.aria.setRole(this.subcategoriesDiv_,a.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},a.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var o=document.createElement("span");return this.parentToolbox_.isHorizontal()||(a.utils.dom.addClass(o,this.cssConfig_.icon),o.style.visibility="visible"),o.style.display="inline-block",o},a.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(o){var c=document.createElement("div");a.utils.dom.addClass(c,this.cssConfig_.contents);for(var d=0;d<o.length;d++){var f=o[d];f.init();var v=f.getDiv();c.appendChild(v),f.getClickTarget&&f.getClickTarget().setAttribute("id",f.getId())}return c},a.CollapsibleToolboxCategory.prototype.setExpanded=function(o){this.expanded_!=o&&((this.expanded_=o)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),a.utils.aria.setState(this.htmlDiv_,a.utils.aria.State.EXPANDED,o),this.parentToolbox_.handleToolboxItemResize())},a.CollapsibleToolboxCategory.prototype.setVisible_=function(o){this.htmlDiv_.style.display=o?"block":"none";for(var d,c=0;d=this.getChildToolboxItems()[c];c++)d.setVisible_(o);this.isHidden_=!o,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},a.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},a.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},a.CollapsibleToolboxCategory.prototype.onClick=function(o){this.toggleExpanded()},a.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},a.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},a.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},a.registry.register(a.registry.Type.TOOLBOX_ITEM,a.CollapsibleToolboxCategory.registrationName,a.CollapsibleToolboxCategory),a.Events.ToolboxItemSelect=function(o,c,d){a.Events.ToolboxItemSelect.superClass_.constructor.call(this,d),this.oldItem=o,this.newItem=c},a.utils.object.inherits(a.Events.ToolboxItemSelect,a.Events.UiBase),a.Events.ToolboxItemSelect.prototype.type=a.Events.TOOLBOX_ITEM_SELECT,a.Events.ToolboxItemSelect.prototype.toJson=function(){var o=a.Events.ToolboxItemSelect.superClass_.toJson.call(this);return o.oldItem=this.oldItem,o.newItem=this.newItem,o},a.Events.ToolboxItemSelect.prototype.fromJson=function(o){a.Events.ToolboxItemSelect.superClass_.fromJson.call(this,o),this.oldItem=o.oldItem,this.newItem=o.newItem},a.registry.register(a.registry.Type.EVENT,a.Events.TOOLBOX_ITEM_SELECT,a.Events.ToolboxItemSelect),a.IAutoHideable=function(){},a.IStyleable=function(){},a.IToolbox=function(){},a.Toolbox=function(o){a.Toolbox.superClass_.constructor.call(this),this.workspace_=o,this.id="toolbox",this.toolboxDef_=o.options.languageTree||{contents:[]},this.horizontalLayout_=o.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=o.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=o.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},a.utils.object.inherits(a.Toolbox,a.DeleteArea),a.Toolbox.prototype.onShortcut=function(o){return!1},a.Toolbox.prototype.init=function(){var o=this.workspace_,c=o.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),a.utils.dom.insertAfter(this.flyout_.createDom("svg"),c),this.setVisible(!0),this.flyout_.init(o),this.render(this.toolboxDef_),(o=o.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),o.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[a.ComponentManager.Capability.AUTOHIDEABLE,a.ComponentManager.Capability.DELETE_AREA,a.ComponentManager.Capability.DRAG_TARGET]})},a.Toolbox.prototype.createDom_=function(o){o=o.getParentSvg();var c=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,a.utils.aria.setRole(this.contentsDiv_,a.utils.aria.Role.TREE),c.appendChild(this.contentsDiv_),o.parentNode.insertBefore(c,o),this.attachEvents_(c,this.contentsDiv_),c},a.Toolbox.prototype.createContainer_=function(){var o=document.createElement("div");return o.setAttribute("layout",this.isHorizontal()?"h":"v"),a.utils.dom.addClass(o,"blocklyToolboxDiv"),a.utils.dom.addClass(o,"blocklyNonSelectable"),o.setAttribute("dir",this.RTL?"RTL":"LTR"),o},a.Toolbox.prototype.createContentsContainer_=function(){var o=document.createElement("div");return a.utils.dom.addClass(o,"blocklyToolboxContents"),this.isHorizontal()&&(o.style.flexDirection="row"),o},a.Toolbox.prototype.attachEvents_=function(o,c){o=a.browserEvents.conditionalBind(o,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(o),c=a.browserEvents.conditionalBind(c,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(c)},a.Toolbox.prototype.onClick_=function(o){if(a.utils.isRightButton(o)||o.target==this.HtmlDiv)a.hideChaff(!1);else{var c=o.target.getAttribute("id");c&&(c=this.getToolboxItemById(c)).isSelectable()&&(this.setSelectedItem(c),c.onClick(o)),a.hideChaff(!0)}a.Touch.clearTouchIdentifier()},a.Toolbox.prototype.onKeyDown_=function(o){var c=!1;switch(o.keyCode){case a.utils.KeyCodes.DOWN:c=this.selectNext_();break;case a.utils.KeyCodes.UP:c=this.selectPrevious_();break;case a.utils.KeyCodes.LEFT:c=this.selectParent_();break;case a.utils.KeyCodes.RIGHT:c=this.selectChild_();break;case a.utils.KeyCodes.ENTER:case a.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),c=!0);break;default:c=!1}!c&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(c=this.selectedItem_.onKeyDown(o)),c&&o.preventDefault()},a.Toolbox.prototype.createFlyout_=function(){var o=this.workspace_,c=new a.Options({parentWorkspace:o,rtl:o.RTL,oneBasedIndex:o.options.oneBasedIndex,horizontalLayout:o.horizontalLayout,renderer:o.options.renderer,rendererOverrides:o.options.rendererOverrides,move:{scrollbars:!0}});return c.toolboxPosition=o.options.toolboxPosition,new(a.registry.getClassFromOptions(o.horizontalLayout?a.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:a.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,o.options,!0))(c)},a.Toolbox.prototype.render=function(o){this.toolboxDef_=o;for(var c=0;c<this.contents_.length;c++){var d=this.contents_[c];d&&d.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(o.contents),this.position(),this.handleToolboxItemResize()},a.Toolbox.prototype.renderContents_=function(o){for(var f,c=document.createDocumentFragment(),d=0;f=o[d];d++)this.createToolboxItem_(f,c);this.contentsDiv_.appendChild(c)},a.Toolbox.prototype.createToolboxItem_=function(o,c){var d=o.kind;"CATEGORY"==d.toUpperCase()&&a.utils.toolbox.isCategoryCollapsible(o)&&(d=a.CollapsibleToolboxCategory.registrationName),(d=a.registry.getClass(a.registry.Type.TOOLBOX_ITEM,d.toLowerCase()))&&(o=new d(o,this),this.addToolboxItem_(o),o.init(),(d=o.getDiv())&&c.appendChild(d),o.getClickTarget&&o.getClickTarget().setAttribute("id",o.getId()))},a.Toolbox.prototype.addToolboxItem_=function(o){if(this.contents_.push(o),this.contentMap_[o.getId()]=o,o.isCollapsible())for(var d,c=0;d=o.getChildToolboxItems()[c];c++)this.addToolboxItem_(d)},a.Toolbox.prototype.getToolboxItems=function(){return this.contents_},a.Toolbox.prototype.addStyle=function(o){a.utils.dom.addClass(this.HtmlDiv,o)},a.Toolbox.prototype.removeStyle=function(o){a.utils.dom.removeClass(this.HtmlDiv,o)},a.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var o=this.HtmlDiv.getBoundingClientRect(),c=o.top,d=c+o.height,f=o.left;return o=f+o.width,this.toolboxPosition==a.utils.toolbox.Position.TOP?new a.utils.Rect(-1e7,d,-1e7,1e7):this.toolboxPosition==a.utils.toolbox.Position.BOTTOM?new a.utils.Rect(c,1e7,-1e7,1e7):this.toolboxPosition==a.utils.toolbox.Position.LEFT?new a.utils.Rect(-1e7,1e7,-1e7,o):new a.utils.Rect(-1e7,1e7,f,1e7)},a.Toolbox.prototype.wouldDelete=function(o,c){return this.updateWouldDelete_(o instanceof a.BlockSvg?!o.getParent()&&o.isDeletable():o.isDeletable()),this.wouldDelete_},a.Toolbox.prototype.onDragEnter=function(o){this.updateCursorDeleteStyle_(!0)},a.Toolbox.prototype.onDragExit=function(o){this.updateCursorDeleteStyle_(!1)},a.Toolbox.prototype.onDrop=function(o){this.updateCursorDeleteStyle_(!1)},a.Toolbox.prototype.updateWouldDelete_=function(o){o!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=o,this.updateCursorDeleteStyle_(!0))},a.Toolbox.prototype.updateCursorDeleteStyle_=function(o){var c=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";o?this.addStyle(c):this.removeStyle(c)},a.Toolbox.prototype.getToolboxItemById=function(o){return this.contentMap_[o]||null},a.Toolbox.prototype.getWidth=function(){return this.width_},a.Toolbox.prototype.getHeight=function(){return this.height_},a.Toolbox.prototype.getFlyout=function(){return this.flyout_},a.Toolbox.prototype.getWorkspace=function(){return this.workspace_},a.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},a.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},a.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},a.Toolbox.prototype.position=function(){var o=this.workspace_.getMetrics(),c=this.HtmlDiv;c&&(this.horizontalLayout_?(c.style.left="0",c.style.height="auto",c.style.width="100%",this.height_=c.offsetHeight,this.width_=o.viewWidth,this.toolboxPosition==a.utils.toolbox.Position.TOP?c.style.top="0":c.style.bottom="0"):(this.toolboxPosition==a.utils.toolbox.Position.RIGHT?c.style.right="0":c.style.left="0",c.style.height="100%",this.width_=c.offsetWidth,this.height_=o.viewHeight),this.flyout_.position())},a.Toolbox.prototype.handleToolboxItemResize=function(){var o=this.workspace_,c=this.HtmlDiv.getBoundingClientRect();o.translate(this.toolboxPosition==a.utils.toolbox.Position.LEFT?o.scrollX+c.width:o.scrollX,this.toolboxPosition==a.utils.toolbox.Position.TOP?o.scrollY+c.height:o.scrollY),a.svgResize(o)},a.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},a.Toolbox.prototype.refreshTheme=function(){for(var o=0;o<this.contents_.length;o++){var c=this.contents_[o];c.refreshTheme&&c.refreshTheme()}},a.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},a.Toolbox.prototype.setVisible=function(o){this.isVisible_!==o&&(this.HtmlDiv.style.display=o?"block":"none",this.isVisible_=o,this.workspace_.recordDragTargets())},a.Toolbox.prototype.autoHide=function(o){!o&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},a.Toolbox.prototype.setSelectedItem=function(o){var c=this.selectedItem_;!o&&!c||o&&!o.isSelectable()||(this.shouldDeselectItem_(c,o)&&null!=c&&this.deselectItem_(c),this.shouldSelectItem_(c,o)&&null!=o&&this.selectItem_(c,o),this.updateFlyout_(c,o),this.fireSelectEvent_(c,o))},a.Toolbox.prototype.shouldDeselectItem_=function(o,c){return null!=o&&(!o.isCollapsible()||o!=c)},a.Toolbox.prototype.shouldSelectItem_=function(o,c){return null!=c&&c!=o},a.Toolbox.prototype.deselectItem_=function(o){this.selectedItem_=null,this.previouslySelectedItem_=o,o.setSelected(!1),a.utils.aria.setState(this.contentsDiv_,a.utils.aria.State.ACTIVEDESCENDANT,"")},a.Toolbox.prototype.selectItem_=function(o,c){this.selectedItem_=c,this.previouslySelectedItem_=o,c.setSelected(!0),a.utils.aria.setState(this.contentsDiv_,a.utils.aria.State.ACTIVEDESCENDANT,c.getId())},a.Toolbox.prototype.selectItemByPosition=function(o){-1<o&&o<this.contents_.length&&(o=this.contents_[o]).isSelectable()&&this.setSelectedItem(o)},a.Toolbox.prototype.updateFlyout_=function(o,c){(o!=c||c.isCollapsible())&&c&&c.getContents().length?(this.flyout_.show(c.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},a.Toolbox.prototype.fireSelectEvent_=function(o,c){var d=o&&o.getName(),f=c&&c.getName();o==c&&(f=null),o=new(a.Events.get(a.Events.TOOLBOX_ITEM_SELECT))(d,f,this.workspace_.id),a.Events.fire(o)},a.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},a.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var o=this.selectedItem_;return o.isExpanded()?this.selectNext_():o.setExpanded(!0),!0},a.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var o=this.contents_.indexOf(this.selectedItem_)+1;if(-1<o&&o<this.contents_.length){for(var c=this.contents_[o];c&&!c.isSelectable();)c=this.contents_[++o];if(c&&c.isSelectable())return this.setSelectedItem(c),!0}return!1},a.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var o=this.contents_.indexOf(this.selectedItem_)-1;if(-1<o&&o<this.contents_.length){for(var c=this.contents_[o];c&&!c.isSelectable();)c=this.contents_[--o];if(c&&c.isSelectable())return this.setSelectedItem(c),!0}return!1},a.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var o=0;o<this.contents_.length;o++)this.contents_[o].dispose();for(o=0;o<this.boundEvents_.length;o++)a.browserEvents.unbind(this.boundEvents_[o]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),a.utils.dom.removeNode(this.HtmlDiv)},a.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),a.registry.register(a.registry.Type.TOOLBOX,a.registry.DEFAULT,a.Toolbox),a.Events.TrashcanOpen=function(o,c){a.Events.TrashcanOpen.superClass_.constructor.call(this,c),this.isOpen=o},a.utils.object.inherits(a.Events.TrashcanOpen,a.Events.UiBase),a.Events.TrashcanOpen.prototype.type=a.Events.TRASHCAN_OPEN,a.Events.TrashcanOpen.prototype.toJson=function(){var o=a.Events.TrashcanOpen.superClass_.toJson.call(this);return o.isOpen=this.isOpen,o},a.Events.TrashcanOpen.prototype.fromJson=function(o){a.Events.TrashcanOpen.superClass_.fromJson.call(this,o),this.isOpen=o.isOpen},a.registry.register(a.registry.Type.EVENT,a.Events.TRASHCAN_OPEN,a.Events.TrashcanOpen),a.IPositionable=function(){},a.uiPosition={},a.uiPosition.verticalPosition={TOP:0,BOTTOM:1},a.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},a.uiPosition.bumpDirection={UP:0,DOWN:1},a.uiPosition.getStartPositionRect=function(o,c,d,f,v,y){var D=y.scrollbar&&y.scrollbar.canScrollVertically();return o.horizontal===a.uiPosition.horizontalPosition.LEFT?(d=v.absoluteMetrics.left+d,D&&y.RTL&&(d+=a.Scrollbar.scrollbarThickness)):(d=v.absoluteMetrics.left+v.viewMetrics.width-c.width-d,D&&!y.RTL&&(d-=a.Scrollbar.scrollbarThickness)),o.vertical===a.uiPosition.verticalPosition.TOP?o=v.absoluteMetrics.top+f:(o=v.absoluteMetrics.top+v.viewMetrics.height-c.height-f,y.scrollbar&&y.scrollbar.canScrollHorizontally()&&(o-=a.Scrollbar.scrollbarThickness)),new a.utils.Rect(o,o+c.height,d,d+c.width)},a.uiPosition.getCornerOppositeToolbox=function(o,c){return{horizontal:c.toolboxMetrics.position===a.utils.toolbox.Position.LEFT||o.horizontalLayout&&!o.RTL?a.uiPosition.horizontalPosition.RIGHT:a.uiPosition.horizontalPosition.LEFT,vertical:c.toolboxMetrics.position===a.utils.toolbox.Position.BOTTOM?a.uiPosition.verticalPosition.TOP:a.uiPosition.verticalPosition.BOTTOM}},a.uiPosition.bumpPositionRect=function(o,c,d,f){for(var U,v=o.left,y=o.right-o.left,D=o.bottom-o.top,O=0;U=f[O];O++)o.intersects(U)&&(o=new a.utils.Rect(o=d===a.uiPosition.bumpDirection.UP?U.top-D-c:U.bottom+c,o+D,v,v+y),O=-1);return o},a.Trashcan=function(o){a.Trashcan.superClass_.constructor.call(this),this.workspace_=o,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(o=new a.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(o.toolboxPosition=this.workspace_.toolboxPosition==a.utils.toolbox.Position.TOP?a.utils.toolbox.Position.BOTTOM:a.utils.toolbox.Position.TOP,this.flyout=new(a.registry.getClassFromOptions(a.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(o)):(o.toolboxPosition=this.workspace_.toolboxPosition==a.utils.toolbox.Position.RIGHT?a.utils.toolbox.Position.LEFT:a.utils.toolbox.Position.RIGHT,this.flyout=new(a.registry.getClassFromOptions(a.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(o)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},a.utils.object.inherits(a.Trashcan,a.DeleteArea),a.Trashcan.prototype.WIDTH_=47,a.Trashcan.prototype.BODY_HEIGHT_=44,a.Trashcan.prototype.LID_HEIGHT_=16,a.Trashcan.prototype.MARGIN_VERTICAL_=20,a.Trashcan.prototype.MARGIN_HORIZONTAL_=20,a.Trashcan.prototype.MARGIN_HOTSPOT_=10,a.Trashcan.prototype.SPRITE_LEFT_=0,a.Trashcan.prototype.SPRITE_TOP_=32,a.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,a.Trashcan.ANIMATION_LENGTH_=80,a.Trashcan.ANIMATION_FRAMES_=4,a.Trashcan.OPACITY_MIN_=.4,a.Trashcan.OPACITY_MAX_=.8,a.Trashcan.MAX_LID_ANGLE_=45,a.Trashcan.prototype.isLidOpen=!1,a.Trashcan.prototype.minOpenness_=0,a.Trashcan.prototype.svgGroup_=null,a.Trashcan.prototype.svgLid_=null,a.Trashcan.prototype.lidTask_=0,a.Trashcan.prototype.lidOpen_=0,a.Trashcan.prototype.left_=0,a.Trashcan.prototype.top_=0,a.Trashcan.prototype.initialized_=!1,a.Trashcan.prototype.createDom=function(){this.svgGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{class:"blocklyTrash"},null);var o=String(Math.random()).substring(2),c=a.utils.dom.createSvgElement(a.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+o},this.svgGroup_);a.utils.dom.createSvgElement(a.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},c);var d=a.utils.dom.createSvgElement(a.utils.Svg.IMAGE,{width:a.SPRITE.width,x:-this.SPRITE_LEFT_,height:a.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+o+")"},this.svgGroup_);return d.setAttributeNS(a.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+a.SPRITE.url),c=a.utils.dom.createSvgElement(a.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+o},this.svgGroup_),a.utils.dom.createSvgElement(a.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},c),this.svgLid_=a.utils.dom.createSvgElement(a.utils.Svg.IMAGE,{width:a.SPRITE.width,x:-this.SPRITE_LEFT_,height:a.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+o+")"},this.svgGroup_),this.svgLid_.setAttributeNS(a.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+a.SPRITE.url),a.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),a.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),a.browserEvents.bind(d,"mouseover",this,this.mouseOver_),a.browserEvents.bind(d,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},a.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(a.utils.dom.insertAfter(this.flyout.createDom(a.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[a.ComponentManager.Capability.AUTOHIDEABLE,a.ComponentManager.Capability.DELETE_AREA,a.ComponentManager.Capability.DRAG_TARGET,a.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},a.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(a.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},a.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},a.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},a.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var o=this.contents_.map(a.Xml.textToDom);this.flyout.show(o),this.fireUiEvent_(!0)}},a.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},a.Trashcan.prototype.autoHide=function(o){!o&&this.flyout&&this.closeFlyout()},a.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},a.Trashcan.prototype.position=function(o,c){if(this.initialized_){var d=a.uiPosition.getCornerOppositeToolbox(this.workspace_,o);o=a.uiPosition.getStartPositionRect(d,new a.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,o,this.workspace_),c=a.uiPosition.bumpPositionRect(o,this.MARGIN_VERTICAL_,d.vertical===a.uiPosition.verticalPosition.TOP?a.uiPosition.bumpDirection.DOWN:a.uiPosition.bumpDirection.UP,c),this.top_=c.top,this.left_=c.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},a.Trashcan.prototype.getBoundingRectangle=function(){return new a.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},a.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var o=this.svgGroup_.getBoundingClientRect(),c=o.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new a.utils.Rect(c,c+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,o=o.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,o+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},a.Trashcan.prototype.onDragOver=function(o){this.setLidOpen(this.wouldDelete_)},a.Trashcan.prototype.onDragExit=function(o){this.setLidOpen(!1)},a.Trashcan.prototype.onDrop=function(o){setTimeout(this.setLidOpen.bind(this,!1),100)},a.Trashcan.prototype.setLidOpen=function(o){this.isLidOpen!=o&&(clearTimeout(this.lidTask_),this.isLidOpen=o,this.animateLid_())},a.Trashcan.prototype.animateLid_=function(){var o=a.Trashcan.ANIMATION_FRAMES_,c=1/(o+1);this.lidOpen_+=this.isLidOpen?c:-c,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*a.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(c=a.Trashcan.OPACITY_MIN_)+this.lidOpen_*(a.Trashcan.OPACITY_MAX_-c),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),a.Trashcan.ANIMATION_LENGTH_/o))},a.Trashcan.prototype.setLidAngle_=function(o){var c=this.workspace_.toolboxPosition==a.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(c?-o:o)+","+(c?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},a.Trashcan.prototype.setMinOpenness_=function(o){this.minOpenness_=o,this.isLidOpen||this.setLidAngle_(o*a.Trashcan.MAX_LID_ANGLE_)},a.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},a.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},a.Trashcan.prototype.fireUiEvent_=function(o){o=new(a.Events.get(a.Events.TRASHCAN_OPEN))(o,this.workspace_.id),a.Events.fire(o)},a.Trashcan.prototype.blockMouseDownWhenOpenable_=function(o){!this.contentsIsOpen()&&this.hasContents_()&&o.stopPropagation()},a.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},a.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},a.Trashcan.prototype.onDelete_=function(o){if(!(0>=this.workspace_.options.maxTrashcanContents)&&o.type==a.Events.BLOCK_DELETE&&o.oldXml.tagName&&"shadow"!=o.oldXml.tagName.toLowerCase()&&(o=this.cleanBlockXML_(o.oldXml),-1==this.contents_.indexOf(o))){for(this.contents_.unshift(o);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},a.Trashcan.prototype.cleanBlockXML_=function(o){for(var c=o=o.cloneNode(!0);c;){c.removeAttribute&&(c.removeAttribute("x"),c.removeAttribute("y"),c.removeAttribute("id"),c.removeAttribute("disabled"),"comment"==c.nodeName&&(c.removeAttribute("h"),c.removeAttribute("w"),c.removeAttribute("pinned")));var d=c.firstChild||c.nextSibling;if(!d)for(d=c.parentNode;d;){if(d.nextSibling){d=d.nextSibling;break}d=d.parentNode}c=d}return a.Xml.domToText(o)},a.VariablesDynamic={},a.VariablesDynamic.onCreateVariableButtonClick_String=function(o){a.Variables.createVariableButtonHandler(o.getTargetWorkspace(),void 0,"String")},a.VariablesDynamic.onCreateVariableButtonClick_Number=function(o){a.Variables.createVariableButtonHandler(o.getTargetWorkspace(),void 0,"Number")},a.VariablesDynamic.onCreateVariableButtonClick_Colour=function(o){a.Variables.createVariableButtonHandler(o.getTargetWorkspace(),void 0,"Colour")},a.VariablesDynamic.flyoutCategory=function(o){var c=[],d=document.createElement("button");return d.setAttribute("text",a.Msg.NEW_STRING_VARIABLE),d.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),c.push(d),(d=document.createElement("button")).setAttribute("text",a.Msg.NEW_NUMBER_VARIABLE),d.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),c.push(d),(d=document.createElement("button")).setAttribute("text",a.Msg.NEW_COLOUR_VARIABLE),d.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),c.push(d),o.registerButtonCallback("CREATE_VARIABLE_STRING",a.VariablesDynamic.onCreateVariableButtonClick_String),o.registerButtonCallback("CREATE_VARIABLE_NUMBER",a.VariablesDynamic.onCreateVariableButtonClick_Number),o.registerButtonCallback("CREATE_VARIABLE_COLOUR",a.VariablesDynamic.onCreateVariableButtonClick_Colour),o=a.VariablesDynamic.flyoutCategoryBlocks(o),c.concat(o)},a.VariablesDynamic.flyoutCategoryBlocks=function(o){var c=[];if(0<(o=o.getAllVariables()).length){if(a.Blocks.variables_set_dynamic){var d=o[o.length-1],f=a.utils.xml.createElement("block");f.setAttribute("type","variables_set_dynamic"),f.setAttribute("gap",24),f.appendChild(a.Variables.generateVariableFieldDom(d)),c.push(f)}if(a.Blocks.variables_get_dynamic){o.sort(a.VariableModel.compareByName),d=0;for(var v;v=o[d];d++)(f=a.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),f.setAttribute("gap",8),f.appendChild(a.Variables.generateVariableFieldDom(v)),c.push(f)}}return c},a.ZoomControls=function(o){this.workspace_=o,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},a.ZoomControls.prototype.WIDTH_=32,a.ZoomControls.prototype.HEIGHT_=32,a.ZoomControls.prototype.SMALL_SPACING_=2,a.ZoomControls.prototype.LARGE_SPACING_=11,a.ZoomControls.prototype.MARGIN_VERTICAL_=20,a.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,a.ZoomControls.prototype.svgGroup_=null,a.ZoomControls.prototype.left_=0,a.ZoomControls.prototype.top_=0,a.ZoomControls.prototype.initialized_=!1,a.ZoomControls.prototype.createDom=function(){this.svgGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{},null);var o=String(Math.random()).substring(2);return this.createZoomOutSvg_(o),this.createZoomInSvg_(o),this.workspace_.isMovable()&&this.createZoomResetSvg_(o),this.svgGroup_},a.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[a.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},a.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&a.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&a.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&a.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&a.browserEvents.unbind(this.onZoomOutWrapper_)},a.ZoomControls.prototype.getBoundingRectangle=function(){var o=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(o+=this.LARGE_SPACING_+this.HEIGHT_),new a.utils.Rect(this.top_,this.top_+o,this.left_,this.left_+this.WIDTH_)},a.ZoomControls.prototype.position=function(o,c){if(this.initialized_){var d=a.uiPosition.getCornerOppositeToolbox(this.workspace_,o),f=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(f+=this.LARGE_SPACING_+this.HEIGHT_),o=a.uiPosition.getStartPositionRect(d,new a.utils.Size(this.WIDTH_,f),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,o,this.workspace_),c=a.uiPosition.bumpPositionRect(o,this.MARGIN_VERTICAL_,(d=d.vertical)===a.uiPosition.verticalPosition.TOP?a.uiPosition.bumpDirection.DOWN:a.uiPosition.bumpDirection.UP,c),d===a.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(d=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(d+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(d=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(d+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=c.top,this.left_=c.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},a.ZoomControls.prototype.createZoomOutSvg_=function(o){this.zoomOutGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var c=a.utils.dom.createSvgElement(a.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+o},this.zoomOutGroup_);a.utils.dom.createSvgElement(a.utils.Svg.RECT,{width:32,height:32},c),a.utils.dom.createSvgElement(a.utils.Svg.IMAGE,{width:a.SPRITE.width,height:a.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+o+")"},this.zoomOutGroup_).setAttributeNS(a.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+a.SPRITE.url),this.onZoomOutWrapper_=a.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},a.ZoomControls.prototype.createZoomInSvg_=function(o){this.zoomInGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var c=a.utils.dom.createSvgElement(a.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+o},this.zoomInGroup_);a.utils.dom.createSvgElement(a.utils.Svg.RECT,{width:32,height:32},c),a.utils.dom.createSvgElement(a.utils.Svg.IMAGE,{width:a.SPRITE.width,height:a.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+o+")"},this.zoomInGroup_).setAttributeNS(a.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+a.SPRITE.url),this.onZoomInWrapper_=a.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},a.ZoomControls.prototype.zoom_=function(o,c){this.workspace_.markFocused(),this.workspace_.zoomCenter(o),this.fireZoomEvent_(),a.Touch.clearTouchIdentifier(),c.stopPropagation(),c.preventDefault()},a.ZoomControls.prototype.createZoomResetSvg_=function(o){this.zoomResetGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var c=a.utils.dom.createSvgElement(a.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+o},this.zoomResetGroup_);a.utils.dom.createSvgElement(a.utils.Svg.RECT,{width:32,height:32},c),a.utils.dom.createSvgElement(a.utils.Svg.IMAGE,{width:a.SPRITE.width,height:a.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+o+")"},this.zoomResetGroup_).setAttributeNS(a.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+a.SPRITE.url),this.onZoomResetWrapper_=a.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},a.ZoomControls.prototype.resetZoom_=function(o){this.workspace_.markFocused();var c=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(c),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),a.Touch.clearTouchIdentifier(),o.stopPropagation(),o.preventDefault()},a.ZoomControls.prototype.fireZoomEvent_=function(){var o=new(a.Events.get(a.Events.CLICK))(null,this.workspace_.id,"zoom_controls");a.Events.fire(o)},a.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),a.ShortcutItems={},a.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},a.ShortcutItems.registerEscape=function(){var o={name:a.ShortcutItems.names.ESCAPE,preconditionFn:function(c){return!c.options.readOnly},callback:function(){return a.hideChaff(),!0}};a.ShortcutRegistry.registry.register(o),a.ShortcutRegistry.registry.addKeyMapping(a.utils.KeyCodes.ESC,o.name)},a.ShortcutItems.registerDelete=function(){var o={name:a.ShortcutItems.names.DELETE,preconditionFn:function(c){return!c.options.readOnly&&a.selected&&a.selected.isDeletable()},callback:function(c,d){return d.preventDefault(),!a.Gesture.inProgress()&&(a.deleteBlock(a.selected),!0)}};a.ShortcutRegistry.registry.register(o),a.ShortcutRegistry.registry.addKeyMapping(a.utils.KeyCodes.DELETE,o.name),a.ShortcutRegistry.registry.addKeyMapping(a.utils.KeyCodes.BACKSPACE,o.name)},a.ShortcutItems.registerCopy=function(){var o={name:a.ShortcutItems.names.COPY,preconditionFn:function(d){return!d.options.readOnly&&!a.Gesture.inProgress()&&a.selected&&a.selected.isDeletable()&&a.selected.isMovable()},callback:function(d,f){return f.preventDefault(),a.hideChaff(),a.copy(a.selected),!0}};a.ShortcutRegistry.registry.register(o);var c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.C,[a.utils.KeyCodes.CTRL]);a.ShortcutRegistry.registry.addKeyMapping(c,o.name),c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.C,[a.utils.KeyCodes.ALT]),a.ShortcutRegistry.registry.addKeyMapping(c,o.name),c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.C,[a.utils.KeyCodes.META]),a.ShortcutRegistry.registry.addKeyMapping(c,o.name)},a.ShortcutItems.registerCut=function(){var o={name:a.ShortcutItems.names.CUT,preconditionFn:function(d){return!d.options.readOnly&&!a.Gesture.inProgress()&&a.selected&&a.selected.isDeletable()&&a.selected.isMovable()&&!a.selected.workspace.isFlyout},callback:function(){return a.copy(a.selected),a.deleteBlock(a.selected),!0}};a.ShortcutRegistry.registry.register(o);var c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.X,[a.utils.KeyCodes.CTRL]);a.ShortcutRegistry.registry.addKeyMapping(c,o.name),c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.X,[a.utils.KeyCodes.ALT]),a.ShortcutRegistry.registry.addKeyMapping(c,o.name),c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.X,[a.utils.KeyCodes.META]),a.ShortcutRegistry.registry.addKeyMapping(c,o.name)},a.ShortcutItems.registerPaste=function(){var o={name:a.ShortcutItems.names.PASTE,preconditionFn:function(d){return!d.options.readOnly&&!a.Gesture.inProgress()},callback:function(){return a.paste()}};a.ShortcutRegistry.registry.register(o);var c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.V,[a.utils.KeyCodes.CTRL]);a.ShortcutRegistry.registry.addKeyMapping(c,o.name),c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.V,[a.utils.KeyCodes.ALT]),a.ShortcutRegistry.registry.addKeyMapping(c,o.name),c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.V,[a.utils.KeyCodes.META]),a.ShortcutRegistry.registry.addKeyMapping(c,o.name)},a.ShortcutItems.registerUndo=function(){var o={name:a.ShortcutItems.names.UNDO,preconditionFn:function(d){return!d.options.readOnly&&!a.Gesture.inProgress()},callback:function(d){return a.hideChaff(),d.undo(!1),!0}};a.ShortcutRegistry.registry.register(o);var c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.Z,[a.utils.KeyCodes.CTRL]);a.ShortcutRegistry.registry.addKeyMapping(c,o.name),c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.Z,[a.utils.KeyCodes.ALT]),a.ShortcutRegistry.registry.addKeyMapping(c,o.name),c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.Z,[a.utils.KeyCodes.META]),a.ShortcutRegistry.registry.addKeyMapping(c,o.name)},a.ShortcutItems.registerRedo=function(){var o={name:a.ShortcutItems.names.REDO,preconditionFn:function(d){return!a.Gesture.inProgress()&&!d.options.readOnly},callback:function(d){return a.hideChaff(),d.undo(!0),!0}};a.ShortcutRegistry.registry.register(o);var c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.Z,[a.utils.KeyCodes.SHIFT,a.utils.KeyCodes.CTRL]);a.ShortcutRegistry.registry.addKeyMapping(c,o.name),c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.Z,[a.utils.KeyCodes.SHIFT,a.utils.KeyCodes.ALT]),a.ShortcutRegistry.registry.addKeyMapping(c,o.name),c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.Z,[a.utils.KeyCodes.SHIFT,a.utils.KeyCodes.META]),a.ShortcutRegistry.registry.addKeyMapping(c,o.name),c=a.ShortcutRegistry.registry.createSerializedKey(a.utils.KeyCodes.Y,[a.utils.KeyCodes.CTRL]),a.ShortcutRegistry.registry.addKeyMapping(c,o.name)},a.ShortcutItems.registerDefaultShortcuts=function(){a.ShortcutItems.registerEscape(),a.ShortcutItems.registerDelete(),a.ShortcutItems.registerCopy(),a.ShortcutItems.registerCut(),a.ShortcutItems.registerPaste(),a.ShortcutItems.registerUndo(),a.ShortcutItems.registerRedo()},a.ShortcutItems.registerDefaultShortcuts(),a.ContextMenuItems={},a.ContextMenuItems.registerUndo=function(){a.ContextMenuRegistry.registry.register({displayText:function(){return a.Msg.UNDO},preconditionFn:function(o){return 0<o.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(o){o.workspace.undo(!1)},scopeType:a.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},a.ContextMenuItems.registerRedo=function(){a.ContextMenuRegistry.registry.register({displayText:function(){return a.Msg.REDO},preconditionFn:function(o){return 0<o.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(o){o.workspace.undo(!0)},scopeType:a.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},a.ContextMenuItems.registerCleanup=function(){a.ContextMenuRegistry.registry.register({displayText:function(){return a.Msg.CLEAN_UP},preconditionFn:function(o){return o.workspace.isMovable()?1<o.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(o){o.workspace.cleanUp()},scopeType:a.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},a.ContextMenuItems.toggleOption_=function(o,c){for(var d=0,f=0;f<c.length;f++)for(var v=c[f];v;)setTimeout(v.setCollapsed.bind(v,o),d),v=v.getNextBlock(),d+=10},a.ContextMenuItems.registerCollapse=function(){a.ContextMenuRegistry.registry.register({displayText:function(){return a.Msg.COLLAPSE_ALL},preconditionFn:function(o){if(o.workspace.options.collapse){o=o.workspace.getTopBlocks(!1);for(var c=0;c<o.length;c++)for(var d=o[c];d;){if(!d.isCollapsed())return"enabled";d=d.getNextBlock()}return"disabled"}return"hidden"},callback:function(o){a.ContextMenuItems.toggleOption_(!0,o.workspace.getTopBlocks(!0))},scopeType:a.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},a.ContextMenuItems.registerExpand=function(){a.ContextMenuRegistry.registry.register({displayText:function(){return a.Msg.EXPAND_ALL},preconditionFn:function(o){if(o.workspace.options.collapse){o=o.workspace.getTopBlocks(!1);for(var c=0;c<o.length;c++)for(var d=o[c];d;){if(d.isCollapsed())return"enabled";d=d.getNextBlock()}return"disabled"}return"hidden"},callback:function(o){a.ContextMenuItems.toggleOption_(!1,o.workspace.getTopBlocks(!0))},scopeType:a.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},a.ContextMenuItems.addDeletableBlocks_=function(o,c){if(o.isDeletable())Array.prototype.push.apply(c,o.getDescendants(!1));else{o=o.getChildren(!1);for(var d=0;d<o.length;d++)a.ContextMenuItems.addDeletableBlocks_(o[d],c)}},a.ContextMenuItems.getDeletableBlocks_=function(o){var c=[];o=o.getTopBlocks(!0);for(var d=0;d<o.length;d++)a.ContextMenuItems.addDeletableBlocks_(o[d],c);return c},a.ContextMenuItems.deleteNext_=function(o,c){a.Events.setGroup(c);var d=o.shift();d&&(d.workspace?(d.dispose(!1,!0),setTimeout(a.ContextMenuItems.deleteNext_,10,o,c)):a.ContextMenuItems.deleteNext_(o,c)),a.Events.setGroup(!1)},a.ContextMenuItems.registerDeleteAll=function(){a.ContextMenuRegistry.registry.register({displayText:function(o){if(o.workspace)return 1==(o=a.ContextMenuItems.getDeletableBlocks_(o.workspace).length)?a.Msg.DELETE_BLOCK:a.Msg.DELETE_X_BLOCKS.replace("%1",String(o))},preconditionFn:function(o){if(o.workspace)return 0<a.ContextMenuItems.getDeletableBlocks_(o.workspace).length?"enabled":"disabled"},callback:function(o){if(o.workspace){o.workspace.cancelCurrentGesture();var c=a.ContextMenuItems.getDeletableBlocks_(o.workspace),d=a.utils.genUid();2>c.length?a.ContextMenuItems.deleteNext_(c,d):a.confirm(a.Msg.DELETE_ALL_BLOCKS.replace("%1",c.length),function(f){f&&a.ContextMenuItems.deleteNext_(c,d)})}},scopeType:a.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},a.ContextMenuItems.registerWorkspaceOptions_=function(){a.ContextMenuItems.registerUndo(),a.ContextMenuItems.registerRedo(),a.ContextMenuItems.registerCleanup(),a.ContextMenuItems.registerCollapse(),a.ContextMenuItems.registerExpand(),a.ContextMenuItems.registerDeleteAll()},a.ContextMenuItems.registerDuplicate=function(){a.ContextMenuRegistry.registry.register({displayText:function(){return a.Msg.DUPLICATE_BLOCK},preconditionFn:function(o){return!(o=o.block).isInFlyout&&o.isDeletable()&&o.isMovable()?o.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(o){o.block&&a.duplicate(o.block)},scopeType:a.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},a.ContextMenuItems.registerComment=function(){a.ContextMenuRegistry.registry.register({displayText:function(o){return o.block.getCommentIcon()?a.Msg.REMOVE_COMMENT:a.Msg.ADD_COMMENT},preconditionFn:function(o){return o=o.block,a.utils.userAgent.IE||o.isInFlyout||!o.workspace.options.comments||o.isCollapsed()||!o.isEditable()?"hidden":"enabled"},callback:function(o){(o=o.block).getCommentIcon()?o.setCommentText(null):o.setCommentText("")},scopeType:a.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},a.ContextMenuItems.registerInline=function(){a.ContextMenuRegistry.registry.register({displayText:function(o){return o.block.getInputsInline()?a.Msg.EXTERNAL_INPUTS:a.Msg.INLINE_INPUTS},preconditionFn:function(o){if(!(o=o.block).isInFlyout&&o.isMovable()&&!o.isCollapsed())for(var c=1;c<o.inputList.length;c++)if(o.inputList[c-1].type!=a.inputTypes.STATEMENT&&o.inputList[c].type!=a.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(o){o.block.setInputsInline(!o.block.getInputsInline())},scopeType:a.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},a.ContextMenuItems.registerCollapseExpandBlock=function(){a.ContextMenuRegistry.registry.register({displayText:function(o){return o.block.isCollapsed()?a.Msg.EXPAND_BLOCK:a.Msg.COLLAPSE_BLOCK},preconditionFn:function(o){return!(o=o.block).isInFlyout&&o.isMovable()&&o.workspace.options.collapse?"enabled":"hidden"},callback:function(o){o.block.setCollapsed(!o.block.isCollapsed())},scopeType:a.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},a.ContextMenuItems.registerDisable=function(){a.ContextMenuRegistry.registry.register({displayText:function(o){return o.block.isEnabled()?a.Msg.DISABLE_BLOCK:a.Msg.ENABLE_BLOCK},preconditionFn:function(o){return!(o=o.block).isInFlyout&&o.workspace.options.disable&&o.isEditable()?o.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(o){o=o.block;var c=a.Events.getGroup();c||a.Events.setGroup(!0),o.setEnabled(!o.isEnabled()),c||a.Events.setGroup(!1)},scopeType:a.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},a.ContextMenuItems.registerDelete=function(){a.ContextMenuRegistry.registry.register({displayText:function(o){var c=o.block;return o=c.getDescendants(!1).length,(c=c.getNextBlock())&&(o-=c.getDescendants(!1).length),1==o?a.Msg.DELETE_BLOCK:a.Msg.DELETE_X_BLOCKS.replace("%1",String(o))},preconditionFn:function(o){return!o.block.isInFlyout&&o.block.isDeletable()?"enabled":"hidden"},callback:function(o){a.Events.setGroup(!0),o.block&&a.deleteBlock(o.block),a.Events.setGroup(!1)},scopeType:a.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},a.ContextMenuItems.registerHelp=function(){a.ContextMenuRegistry.registry.register({displayText:function(){return a.Msg.HELP},preconditionFn:function(o){return("function"==typeof(o=o.block).helpUrl?o.helpUrl():o.helpUrl)?"enabled":"hidden"},callback:function(o){o.block.showHelp()},scopeType:a.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},a.ContextMenuItems.registerBlockOptions_=function(){a.ContextMenuItems.registerDuplicate(),a.ContextMenuItems.registerComment(),a.ContextMenuItems.registerInline(),a.ContextMenuItems.registerCollapseExpandBlock(),a.ContextMenuItems.registerDisable(),a.ContextMenuItems.registerDelete(),a.ContextMenuItems.registerHelp()},a.ContextMenuItems.registerDefaultOptions=function(){a.ContextMenuItems.registerWorkspaceOptions_(),a.ContextMenuItems.registerBlockOptions_()},a.ContextMenuItems.registerDefaultOptions(),a.Mutator=function(o){a.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=o},a.utils.object.inherits(a.Mutator,a.Icon),a.Mutator.prototype.workspace_=null,a.Mutator.prototype.workspaceWidth_=0,a.Mutator.prototype.workspaceHeight_=0,a.Mutator.prototype.setBlock=function(o){this.block_=o},a.Mutator.prototype.getWorkspace=function(){return this.workspace_},a.Mutator.prototype.drawIcon_=function(o){a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},o),a.utils.dom.createSvgElement(a.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},o),a.utils.dom.createSvgElement(a.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},o)},a.Mutator.prototype.iconClick_=function(o){this.block_.isEditable()&&a.Icon.prototype.iconClick_.call(this,o)},a.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=a.utils.dom.createSvgElement(a.utils.Svg.SVG,{x:a.Bubble.BORDER_WIDTH,y:a.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var d,o=a.utils.xml.createElement("xml"),c=0;d=this.quarkNames_[c];c++){var f=a.utils.xml.createElement("block");f.setAttribute("type",d),o.appendChild(f)}else o=null;return(c=new a.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?a.utils.toolbox.Position.RIGHT:a.utils.toolbox.Position.LEFT,(d=!!o)&&(c.languageTree=a.utils.toolbox.convertToolboxDefToJson(o)),this.workspace_=new a.WorkspaceSvg(c),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(a.Events.disableOrphans),o=d?this.workspace_.addFlyout(a.utils.Svg.G):null,c=this.workspace_.createDom("blocklyMutatorBackground"),o&&c.insertBefore(o,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(c),this.svgDialog_},a.Mutator.prototype.updateEditable=function(){a.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&a.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&a.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},a.Mutator.prototype.resizeBubble_=function(){var o=2*a.Bubble.BORDER_WIDTH,c=this.workspace_.getCanvas().getBBox(),d=c.width+c.x,f=c.height+3*o,v=this.workspace_.getFlyout();if(v){var y=v.getWorkspace().getMetricsManager().getScrollMetrics();f=Math.max(f,y.height+20),d+=v.getWidth()}this.block_.RTL&&(d=-c.x),d+=3*o,(Math.abs(this.workspaceWidth_-d)>o||Math.abs(this.workspaceHeight_-f)>o)&&(this.workspaceWidth_=d,this.workspaceHeight_=f,this.bubble_.setBubbleSize(d+o,f+o),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(o="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",o)),this.workspace_.resize()},a.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},a.Mutator.prototype.setVisible=function(o){if(o!=this.isVisible())if(a.Events.fire(new(a.Events.get(a.Events.BUBBLE_OPEN))(this.block_,o,"mutator")),o){this.bubble_=new a.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var c=this.workspace_.options.languageTree;o=this.workspace_.getFlyout(),c&&(o.init(this.workspace_),o.show(c)),this.rootBlock_=this.block_.decompose(this.workspace_),c=this.rootBlock_.getDescendants(!1);for(var f,d=0;f=c[d];d++)f.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),o?(c=2*o.CORNER_RADIUS,o=this.rootBlock_.RTL?o.getWidth()+c:c):o=c=16,this.block_.RTL&&(o=-o),this.rootBlock_.moveBy(o,c),this.block_.saveConnections){var v=this,y=this.block_;y.saveConnections(this.rootBlock_),this.sourceListener_=function(){y.saveConnections(v.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},a.Mutator.prototype.workspaceChanged_=function(o){if(!(o.isUiEvent||o.type==a.Events.CHANGE&&"disabled"==o.element)){if(!this.workspace_.isDragging()){o=this.workspace_.getTopBlocks(!1);for(var d,c=0;d=o[c];c++){var f=d.getRelativeToSurfaceXY();if(20>f.y&&d.moveBy(0,20-f.y),d.RTL){var v=-20,y=this.workspace_.getFlyout();y&&(v-=y.getWidth()),f.x>v&&d.moveBy(v-f.x,0)}else 20>f.x&&d.moveBy(20-f.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(a.Events.setGroup(!0),o=(o=(d=this.block_).mutationToDom())&&a.Xml.domToText(o),c=d.rendered,d.rendered=!1,d.compose(this.rootBlock_),d.rendered=c,d.initSvg(),d.rendered&&d.render(),o!=(c=(c=d.mutationToDom())&&a.Xml.domToText(c))){a.Events.fire(new(a.Events.get(a.Events.BLOCK_CHANGE))(d,"mutation",null,o,c));var D=a.Events.getGroup();setTimeout(function(){a.Events.setGroup(D),d.bumpNeighbours(),a.Events.setGroup(!1)},a.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),a.Events.setGroup(!1)}}},a.Mutator.prototype.dispose=function(){this.block_.mutator=null,a.Icon.prototype.dispose.call(this)},a.Mutator.prototype.updateBlockStyle=function(){var o=this.workspace_;if(o&&o.getAllBlocks(!1)){for(var f,c=o.getAllBlocks(!1),d=0;f=c[d];d++)f.setStyle(f.getStyleName());if(d=o.getFlyout())for(o=d.workspace_.getAllBlocks(!1),d=0;f=o[d];d++)f.setStyle(f.getStyleName())}},a.Mutator.reconnect=function(o,c,d){if(!o||!o.getSourceBlock().workspace)return!1;d=c.getInput(d).connection;var f=o.targetBlock();return!(f&&f!=c||d.targetConnection==o||(d.isConnected()&&d.disconnect(),d.connect(o),0))},a.Mutator.findParentWs=function(o){var c=null;if(o&&o.options){var d=o.options.parentWorkspace;o.isFlyout?d&&d.options&&(c=d.options.parentWorkspace):d&&(c=d)}return c},a.FieldTextInput=function(o,c,d){this.spellcheck_=!0,a.FieldTextInput.superClass_.constructor.call(this,o,c,d),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},a.utils.object.inherits(a.FieldTextInput,a.Field),a.FieldTextInput.prototype.DEFAULT_VALUE="",a.FieldTextInput.fromJson=function(o){var c=a.utils.replaceMessageReferences(o.text);return new a.FieldTextInput(c,void 0,o)},a.FieldTextInput.prototype.SERIALIZABLE=!0,a.FieldTextInput.BORDERRADIUS=4,a.FieldTextInput.prototype.CURSOR="text",a.FieldTextInput.prototype.configure_=function(o){a.FieldTextInput.superClass_.configure_.call(this,o),"boolean"==typeof o.spellcheck&&(this.spellcheck_=o.spellcheck)},a.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var f,o=0,c=0,d=0;f=this.sourceBlock_.inputList[d];d++){for(var v=0;f.fieldRow[v];v++)o++;f.connection&&c++}this.fullBlockClickTarget_=1>=o&&this.sourceBlock_.outputConnection&&!c}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},a.FieldTextInput.prototype.doClassValidation_=function(o){return null==o?null:String(o)},a.FieldTextInput.prototype.doValueInvalid_=function(o){this.isBeingEdited_&&(this.isTextValid_=!1,o=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&a.Events.isEnabled()&&a.Events.fire(new(a.Events.get(a.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,o,this.value_)))},a.FieldTextInput.prototype.doValueUpdate_=function(o){this.isTextValid_=!0,this.value_=o,this.isBeingEdited_||(this.isDirty_=!0)},a.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},a.FieldTextInput.prototype.render_=function(){if(a.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var o=this.htmlInput_;this.isTextValid_?(a.utils.dom.removeClass(o,"blocklyInvalidInput"),a.utils.aria.setState(o,a.utils.aria.State.INVALID,!1)):(a.utils.dom.addClass(o,"blocklyInvalidInput"),a.utils.aria.setState(o,a.utils.aria.State.INVALID,!0))}},a.FieldTextInput.prototype.setSpellcheck=function(o){o!=this.spellcheck_&&(this.spellcheck_=o,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},a.FieldTextInput.prototype.showEditor_=function(o,c){this.workspace_=this.sourceBlock_.workspace,!(o=c||!1)&&(a.utils.userAgent.MOBILE||a.utils.userAgent.ANDROID||a.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(o)},a.FieldTextInput.prototype.showPromptEditor_=function(){a.prompt(a.Msg.CHANGE_VALUE_TITLE,this.getText(),function(o){this.setValue(this.getValueFromEditorText_(o))}.bind(this))},a.FieldTextInput.prototype.showInlineEditor_=function(o){a.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,o||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},a.FieldTextInput.prototype.widgetCreate_=function(){var o=a.WidgetDiv.DIV;a.utils.dom.addClass(this.getClickTarget_(),"editing");var c=document.createElement("input");c.className="blocklyHtmlInput",c.setAttribute("spellcheck",this.spellcheck_);var d=this.workspace_.getScale(),f=this.getConstants().FIELD_TEXT_FONTSIZE*d+"pt";if(o.style.fontSize=f,c.style.fontSize=f,f=a.FieldTextInput.BORDERRADIUS*d+"px",this.fullBlockClickTarget_){f=((f=this.getScaledBBox()).bottom-f.top)/2+"px";var v=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;c.style.border=1*d+"px solid "+v,o.style.borderRadius=f,o.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(o.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*d+"px")}return c.style.borderRadius=f,o.appendChild(c),c.value=c.defaultValue=this.getEditorText_(this.value_),c.untypedDefaultValue_=this.value_,c.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(c),c},a.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var o=a.WidgetDiv.DIV.style;o.width="auto",o.height="auto",o.fontSize="",o.transition="",o.boxShadow="",this.htmlInput_=null,a.utils.dom.removeClass(this.getClickTarget_(),"editing")},a.FieldTextInput.prototype.bindInputEvents_=function(o){this.onKeyDownWrapper_=a.browserEvents.conditionalBind(o,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=a.browserEvents.conditionalBind(o,"input",this,this.onHtmlInputChange_)},a.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(a.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(a.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},a.FieldTextInput.prototype.onHtmlInputKeyDown_=function(o){o.keyCode==a.utils.KeyCodes.ENTER?(a.WidgetDiv.hide(),a.DropDownDiv.hideWithoutAnimation()):o.keyCode==a.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),a.WidgetDiv.hide(),a.DropDownDiv.hideWithoutAnimation()):o.keyCode==a.utils.KeyCodes.TAB&&(a.WidgetDiv.hide(),a.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!o.shiftKey),o.preventDefault())},a.FieldTextInput.prototype.onHtmlInputChange_=function(o){(o=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=o,a.Events.setGroup(!0),o=this.getValueFromEditorText_(o),this.setValue(o),this.forceRerender(),this.resizeEditor_(),a.Events.setGroup(!1))},a.FieldTextInput.prototype.setEditorValue_=function(o){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(o)),this.setValue(o)},a.FieldTextInput.prototype.resizeEditor_=function(){var o=a.WidgetDiv.DIV,c=this.getScaledBBox();o.style.width=c.right-c.left+"px",o.style.height=c.bottom-c.top+"px",c=new a.utils.Coordinate(this.sourceBlock_.RTL?c.right-o.offsetWidth:c.left,c.top),o.style.left=c.x+"px",o.style.top=c.y+"px"},a.FieldTextInput.prototype.isTabNavigable=function(){return!0},a.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},a.FieldTextInput.prototype.getEditorText_=function(o){return String(o)},a.FieldTextInput.prototype.getValueFromEditorText_=function(o){return o},a.fieldRegistry.register("field_input",a.FieldTextInput),a.FieldAngle=function(o,c,d){this.clockwise_=a.FieldAngle.CLOCKWISE,this.offset_=a.FieldAngle.OFFSET,this.wrap_=a.FieldAngle.WRAP,this.round_=a.FieldAngle.ROUND,a.FieldAngle.superClass_.constructor.call(this,o,c,d),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},a.utils.object.inherits(a.FieldAngle,a.FieldTextInput),a.FieldAngle.prototype.DEFAULT_VALUE=0,a.FieldAngle.fromJson=function(o){return new a.FieldAngle(o.angle,void 0,o)},a.FieldAngle.prototype.SERIALIZABLE=!0,a.FieldAngle.ROUND=15,a.FieldAngle.HALF=50,a.FieldAngle.CLOCKWISE=!1,a.FieldAngle.OFFSET=0,a.FieldAngle.WRAP=360,a.FieldAngle.RADIUS=a.FieldAngle.HALF-1,a.FieldAngle.prototype.configure_=function(o){switch(a.FieldAngle.superClass_.configure_.call(this,o),o.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var c=o.clockwise;"boolean"==typeof c&&(this.clockwise_=c),null!=(c=o.offset)&&(c=Number(c),isNaN(c)||(this.offset_=c)),null!=(c=o.wrap)&&(c=Number(c),isNaN(c)||(this.wrap_=c)),null!=(o=o.round)&&(o=Number(o),isNaN(o)||(this.round_=o))},a.FieldAngle.prototype.initView=function(){a.FieldAngle.superClass_.initView.call(this),this.symbol_=a.utils.dom.createSvgElement(a.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},a.FieldAngle.prototype.render_=function(){a.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},a.FieldAngle.prototype.showEditor_=function(o){a.FieldAngle.superClass_.showEditor_.call(this,o,a.utils.userAgent.MOBILE||a.utils.userAgent.ANDROID||a.utils.userAgent.IPAD),this.dropdownCreate_(),a.DropDownDiv.getContentDiv().appendChild(this.editor_),a.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),a.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},a.FieldAngle.prototype.dropdownCreate_=function(){var o=a.utils.dom.createSvgElement(a.utils.Svg.SVG,{xmlns:a.utils.dom.SVG_NS,"xmlns:html":a.utils.dom.HTML_NS,"xmlns:xlink":a.utils.dom.XLINK_NS,version:"1.1",height:2*a.FieldAngle.HALF+"px",width:2*a.FieldAngle.HALF+"px",style:"touch-action: none"},null),c=a.utils.dom.createSvgElement(a.utils.Svg.CIRCLE,{cx:a.FieldAngle.HALF,cy:a.FieldAngle.HALF,r:a.FieldAngle.RADIUS,class:"blocklyAngleCircle"},o);this.gauge_=a.utils.dom.createSvgElement(a.utils.Svg.PATH,{class:"blocklyAngleGauge"},o),this.line_=a.utils.dom.createSvgElement(a.utils.Svg.LINE,{x1:a.FieldAngle.HALF,y1:a.FieldAngle.HALF,class:"blocklyAngleLine"},o);for(var d=0;360>d;d+=15)a.utils.dom.createSvgElement(a.utils.Svg.LINE,{x1:a.FieldAngle.HALF+a.FieldAngle.RADIUS,y1:a.FieldAngle.HALF,x2:a.FieldAngle.HALF+a.FieldAngle.RADIUS-(d%45==0?10:5),y2:a.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+d+","+a.FieldAngle.HALF+","+a.FieldAngle.HALF+")"},o);this.clickWrapper_=a.browserEvents.conditionalBind(o,"click",this,this.hide_),this.clickSurfaceWrapper_=a.browserEvents.conditionalBind(c,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=a.browserEvents.conditionalBind(c,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=o},a.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(a.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(a.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(a.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},a.FieldAngle.prototype.hide_=function(){a.DropDownDiv.hideIfOwner(this),a.WidgetDiv.hide()},a.FieldAngle.prototype.onMouseMove_=function(o){var c=this.gauge_.ownerSVGElement.getBoundingClientRect(),d=o.clientX-c.left-a.FieldAngle.HALF;o=o.clientY-c.top-a.FieldAngle.HALF,c=Math.atan(-o/d),isNaN(c)||(c=a.utils.math.toDegrees(c),0>d?c+=180:0<o&&(c+=360),this.displayMouseOrKeyboardValue_(c=this.clockwise_?this.offset_+360-c:360-(this.offset_-c)))},a.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(o){this.round_&&(o=Math.round(o/this.round_)*this.round_),(o=this.wrapValue_(o))!=this.value_&&this.setEditorValue_(o)},a.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var o=Number(this.getText())+this.offset_,c=a.utils.math.toRadians(o%360);o=["M ",a.FieldAngle.HALF,",",a.FieldAngle.HALF];var d=a.FieldAngle.HALF,f=a.FieldAngle.HALF;if(!isNaN(c)){var v=Number(this.clockwise_),y=a.utils.math.toRadians(this.offset_),D=Math.cos(y)*a.FieldAngle.RADIUS,O=Math.sin(y)*-a.FieldAngle.RADIUS;v&&(c=2*y-c),d+=Math.cos(c)*a.FieldAngle.RADIUS,f-=Math.sin(c)*a.FieldAngle.RADIUS,c=Math.abs(Math.floor((c-y)/Math.PI)%2),v&&(c=1-c),o.push(" l ",D,",",O," A ",a.FieldAngle.RADIUS,",",a.FieldAngle.RADIUS," 0 ",c," ",v," ",d,",",f," z")}this.gauge_.setAttribute("d",o.join("")),this.line_.setAttribute("x2",d),this.line_.setAttribute("y2",f)}},a.FieldAngle.prototype.onHtmlInputKeyDown_=function(o){var c;if(a.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,o),o.keyCode===a.utils.KeyCodes.LEFT?c=this.sourceBlock_.RTL?1:-1:o.keyCode===a.utils.KeyCodes.RIGHT?c=this.sourceBlock_.RTL?-1:1:o.keyCode===a.utils.KeyCodes.DOWN?c=-1:o.keyCode===a.utils.KeyCodes.UP&&(c=1),c){var d=this.getValue();this.displayMouseOrKeyboardValue_(d+c*this.round_),o.preventDefault(),o.stopPropagation()}},a.FieldAngle.prototype.doClassValidation_=function(o){return o=Number(o),isNaN(o)||!isFinite(o)?null:this.wrapValue_(o)},a.FieldAngle.prototype.wrapValue_=function(o){return 0>(o%=360)&&(o+=360),o>this.wrap_&&(o-=360),o},a.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),a.fieldRegistry.register("field_angle",a.FieldAngle),a.FieldCheckbox=function(o,c,d){this.checkChar_=null,a.FieldCheckbox.superClass_.constructor.call(this,o,c,d)},a.utils.object.inherits(a.FieldCheckbox,a.Field),a.FieldCheckbox.prototype.DEFAULT_VALUE=!1,a.FieldCheckbox.fromJson=function(o){return new a.FieldCheckbox(o.checked,void 0,o)},a.FieldCheckbox.CHECK_CHAR="\u2713",a.FieldCheckbox.prototype.SERIALIZABLE=!0,a.FieldCheckbox.prototype.CURSOR="default",a.FieldCheckbox.prototype.configure_=function(o){a.FieldCheckbox.superClass_.configure_.call(this,o),o.checkCharacter&&(this.checkChar_=o.checkCharacter)},a.FieldCheckbox.prototype.initView=function(){a.FieldCheckbox.superClass_.initView.call(this),a.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},a.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},a.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||a.FieldCheckbox.CHECK_CHAR},a.FieldCheckbox.prototype.setCheckCharacter=function(o){this.checkChar_=o,this.forceRerender()},a.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},a.FieldCheckbox.prototype.doClassValidation_=function(o){return!0===o||"TRUE"===o?"TRUE":!1===o||"FALSE"===o?"FALSE":null},a.FieldCheckbox.prototype.doValueUpdate_=function(o){this.value_=this.convertValueToBool_(o),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},a.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},a.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},a.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},a.FieldCheckbox.prototype.convertValueToBool_=function(o){return"string"==typeof o?"TRUE"==o:!!o},a.fieldRegistry.register("field_checkbox",a.FieldCheckbox),a.FieldColour=function(o,c,d){a.FieldColour.superClass_.constructor.call(this,o,c,d),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},a.utils.object.inherits(a.FieldColour,a.Field),a.FieldColour.fromJson=function(o){return new a.FieldColour(o.colour,void 0,o)},a.FieldColour.prototype.SERIALIZABLE=!0,a.FieldColour.prototype.CURSOR="default",a.FieldColour.prototype.isDirty_=!1,a.FieldColour.prototype.colours_=null,a.FieldColour.prototype.titles_=null,a.FieldColour.prototype.columns_=0,a.FieldColour.prototype.configure_=function(o){a.FieldColour.superClass_.configure_.call(this,o),o.colourOptions&&(this.colours_=o.colourOptions,this.titles_=o.colourTitles),o.columns&&(this.columns_=o.columns)},a.FieldColour.prototype.initView=function(){this.size_=new a.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},a.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},a.FieldColour.prototype.doClassValidation_=function(o){return"string"!=typeof o?null:a.utils.colour.parse(o)},a.FieldColour.prototype.doValueUpdate_=function(o){this.value_=o,this.borderRect_?this.borderRect_.style.fill=o:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",o),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},a.FieldColour.prototype.getText=function(){var o=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(o)&&(o="#"+o[1]+o[3]+o[5]),o},a.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),a.FieldColour.prototype.DEFAULT_VALUE=a.FieldColour.COLOURS[0],a.FieldColour.TITLES=[],a.FieldColour.COLUMNS=7,a.FieldColour.prototype.setColours=function(o,c){return this.colours_=o,c&&(this.titles_=c),this},a.FieldColour.prototype.setColumns=function(o){return this.columns_=o,this},a.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),a.DropDownDiv.getContentDiv().appendChild(this.picker_),a.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},a.FieldColour.prototype.onClick_=function(o){null!==(o=(o=o.target)&&o.label)&&(this.setValue(o),a.DropDownDiv.hideIfOwner(this))},a.FieldColour.prototype.onKeyDown_=function(o){var c=!1;o.keyCode===a.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),c=!0):o.keyCode===a.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),c=!0):o.keyCode===a.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),c=!0):o.keyCode===a.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),c=!0):o.keyCode===a.utils.KeyCodes.ENTER&&((c=this.getHighlighted_())&&null!==(c=c&&c.label)&&this.setValue(c),a.DropDownDiv.hideWithoutAnimation(),c=!0),c&&o.stopPropagation()},a.FieldColour.prototype.moveHighlightBy_=function(o,c){var d=this.colours_||a.FieldColour.COLOURS,f=this.columns_||a.FieldColour.COLUMNS,v=this.highlightedIndex_%f,y=Math.floor(this.highlightedIndex_/f);v+=o,y+=c,0>o?0>v&&0<y?(v=f-1,y--):0>v&&(v=0):0<o?v>f-1&&y<Math.floor(d.length/f)-1?(v=0,y++):v>f-1&&v--:0>c?0>y&&(y=0):0<c&&y>Math.floor(d.length/f)-1&&(y=Math.floor(d.length/f)-1),this.setHighlightedCell_(this.picker_.childNodes[y].childNodes[v],y*f+v)},a.FieldColour.prototype.onMouseMove_=function(o){var c=(o=o.target)&&Number(o.getAttribute("data-index"));null!==c&&c!==this.highlightedIndex_&&this.setHighlightedCell_(o,c)},a.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},a.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var o=this.getHighlighted_();o&&a.utils.dom.removeClass(o,"blocklyColourHighlighted")},a.FieldColour.prototype.getHighlighted_=function(){var o=this.columns_||a.FieldColour.COLUMNS,c=this.picker_.childNodes[Math.floor(this.highlightedIndex_/o)];return c?c.childNodes[this.highlightedIndex_%o]:null},a.FieldColour.prototype.setHighlightedCell_=function(o,c){var d=this.getHighlighted_();d&&a.utils.dom.removeClass(d,"blocklyColourHighlighted"),a.utils.dom.addClass(o,"blocklyColourHighlighted"),this.highlightedIndex_=c,a.utils.aria.setState(this.picker_,a.utils.aria.State.ACTIVEDESCENDANT,o.getAttribute("id"))},a.FieldColour.prototype.dropdownCreate_=function(){var o=this.columns_||a.FieldColour.COLUMNS,c=this.colours_||a.FieldColour.COLOURS,d=this.titles_||a.FieldColour.TITLES,f=this.getValue(),v=document.createElement("table");v.className="blocklyColourTable",v.tabIndex=0,v.dir="ltr",a.utils.aria.setRole(v,a.utils.aria.Role.GRID),a.utils.aria.setState(v,a.utils.aria.State.EXPANDED,!0),a.utils.aria.setState(v,a.utils.aria.State.ROWCOUNT,Math.floor(c.length/o)),a.utils.aria.setState(v,a.utils.aria.State.COLCOUNT,o);for(var y,D=0;D<c.length;D++){D%o==0&&(y=document.createElement("tr"),a.utils.aria.setRole(y,a.utils.aria.Role.ROW),v.appendChild(y));var O=document.createElement("td");y.appendChild(O),O.label=c[D],O.title=d[D]||c[D],O.id=a.utils.IdGenerator.getNextUniqueId(),O.setAttribute("data-index",D),a.utils.aria.setRole(O,a.utils.aria.Role.GRIDCELL),a.utils.aria.setState(O,a.utils.aria.State.LABEL,c[D]),a.utils.aria.setState(O,a.utils.aria.State.SELECTED,c[D]==f),O.style.backgroundColor=c[D],c[D]==f&&(O.className="blocklyColourSelected",this.highlightedIndex_=D)}this.onClickWrapper_=a.browserEvents.conditionalBind(v,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=a.browserEvents.conditionalBind(v,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=a.browserEvents.conditionalBind(v,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=a.browserEvents.conditionalBind(v,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=a.browserEvents.conditionalBind(v,"keydown",this,this.onKeyDown_),this.picker_=v},a.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(a.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(a.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(a.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(a.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(a.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},a.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),a.fieldRegistry.register("field_colour",a.FieldColour),a.FieldDropdown=function(o,c,d){"function"!=typeof o&&a.FieldDropdown.validateOptions_(o),this.menuGenerator_=o,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],a.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],c,d),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},a.utils.object.inherits(a.FieldDropdown,a.Field),a.FieldDropdown.fromJson=function(o){return new a.FieldDropdown(o.options,void 0,o)},a.FieldDropdown.prototype.fromXml=function(o){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(o.textContent)},a.FieldDropdown.prototype.SERIALIZABLE=!0,a.FieldDropdown.CHECKMARK_OVERHANG=25,a.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,a.FieldDropdown.IMAGE_Y_OFFSET=5,a.FieldDropdown.IMAGE_Y_PADDING=2*a.FieldDropdown.IMAGE_Y_OFFSET,a.FieldDropdown.ARROW_CHAR=a.utils.userAgent.ANDROID?"\u25bc":"\u25be",a.FieldDropdown.prototype.CURSOR="default",a.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=a.utils.dom.createSvgElement(a.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&a.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},a.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},a.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=a.utils.dom.createSvgElement(a.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?a.FieldDropdown.ARROW_CHAR+" ":" "+a.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},a.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=a.utils.dom.createSvgElement(a.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(a.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},a.FieldDropdown.prototype.showEditor_=function(o){if(this.dropdownCreate_(),this.menu_.openingCoords=o&&"number"==typeof o.clientX?new a.utils.Coordinate(o.clientX,o.clientY):null,this.menu_.render(a.DropDownDiv.getContentDiv()),o=this.menu_.getElement(),a.utils.dom.addClass(o,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){o=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var c=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;a.DropDownDiv.setColour(o,c)}a.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},a.FieldDropdown.prototype.dropdownCreate_=function(){var o=new a.Menu;o.setRole(a.utils.aria.Role.LISTBOX),this.menu_=o;var c=this.getOptions(!1);this.selectedMenuItem_=null;for(var d=0;d<c.length;d++){var f=c[d][0],v=c[d][1];if("object"==typeof f){var y=new Image(f.width,f.height);y.src=f.src,y.alt=f.alt||"",f=y}(f=new a.MenuItem(f,v)).setRole(a.utils.aria.Role.OPTION),f.setRightToLeft(this.sourceBlock_.RTL),f.setCheckable(!0),o.addChild(f),f.setChecked(v==this.value_),v==this.value_&&(this.selectedMenuItem_=f),f.onAction(this.handleMenuActionEvent_,this)}},a.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},a.FieldDropdown.prototype.handleMenuActionEvent_=function(o){a.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,o)},a.FieldDropdown.prototype.onItemSelected_=function(o,c){this.setValue(c.getValue())},a.FieldDropdown.prototype.trimOptions_=function(){var o=this.menuGenerator_;if(Array.isArray(o)){for(var c=!1,d=0;d<o.length;d++){var f=o[d][0];"string"==typeof f?o[d][0]=a.utils.replaceMessageReferences(f):(null!=f.alt&&(o[d][0].alt=a.utils.replaceMessageReferences(f.alt)),c=!0)}if(!(c||2>o.length)){for(c=[],d=0;d<o.length;d++)c.push(o[d][0]);d=a.utils.string.shortestStringLength(c),f=a.utils.string.commonWordPrefix(c,d);var v=a.utils.string.commonWordSuffix(c,d);!f&&!v||d<=f+v||(f&&(this.prefixField=c[0].substring(0,f-1)),v&&(this.suffixField=c[0].substr(1-v)),this.menuGenerator_=a.FieldDropdown.applyTrim_(o,f,v))}}},a.FieldDropdown.applyTrim_=function(o,c,d){for(var f=[],v=0;v<o.length;v++){var y=o[v][0],D=o[v][1];y=y.substring(c,y.length-d),f[v]=[y,D]}return f},a.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},a.FieldDropdown.prototype.getOptions=function(o){return this.isOptionListDynamic()?(this.generatedOptions_&&o||(this.generatedOptions_=this.menuGenerator_.call(this),a.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},a.FieldDropdown.prototype.doClassValidation_=function(o){for(var v,c=!1,d=this.getOptions(!0),f=0;v=d[f];f++)if(v[1]==o){c=!0;break}return c?o:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+o),null)},a.FieldDropdown.prototype.doValueUpdate_=function(o){a.FieldDropdown.superClass_.doValueUpdate_.call(this,o),o=this.getOptions(!0);for(var d,c=0;d=o[c];c++)d[1]==this.value_&&(this.selectedOption_=d)},a.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},a.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var o=this.selectedOption_&&this.selectedOption_[0];o&&"object"==typeof o?this.renderSelectedImage_(o):this.renderSelectedText_(),this.positionBorderRect_()},a.FieldDropdown.prototype.renderSelectedImage_=function(o){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(a.utils.dom.XLINK_NS,"xlink:href",o.src),this.imageElement_.setAttribute("height",o.height),this.imageElement_.setAttribute("width",o.width);var c=Number(o.height);o=Number(o.width);var d=!!this.borderRect_,f=Math.max(d?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,c+a.FieldDropdown.IMAGE_Y_PADDING);d=d?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var v=this.svgArrow_?this.positionSVGArrow_(o+d,f/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):a.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=o+v+2*d,this.size_.height=f;var y=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",d+v):(y=o+v,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",d)),this.imageElement_.setAttribute("y",f/2-c/2),this.positionTextElement_(y+d,o+v)},a.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),a.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var o=!!this.borderRect_,c=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),d=a.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var f=0;this.svgArrow_&&(f=this.positionSVGArrow_(d+o,c/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=d+f+2*o,this.size_.height=c,this.positionTextElement_(o,d)},a.FieldDropdown.prototype.positionSVGArrow_=function(o,c){if(!this.svgArrow_)return 0;var d=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,f=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,v=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?d:o+f)+","+c+")"),v+f},a.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var o=this.selectedOption_[0];return"object"==typeof o?o.alt:o},a.FieldDropdown.validateOptions_=function(o){if(!Array.isArray(o))throw TypeError("FieldDropdown options must be an array.");if(!o.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var c=!1,d=0;d<o.length;++d){var f=o[d];Array.isArray(f)?"string"!=typeof f[1]?(c=!0,console.error("Invalid option["+d+"]: Each FieldDropdown option id must be a string. Found "+f[1]+" in: ",f)):f[0]&&"string"!=typeof f[0]&&"string"!=typeof f[0].src&&(c=!0,console.error("Invalid option["+d+"]: Each FieldDropdown option must have a string label or image description. Found"+f[0]+" in: ",f)):(c=!0,console.error("Invalid option["+d+"]: Each FieldDropdown option must be an array. Found: ",f))}if(c)throw TypeError("Found invalid FieldDropdown options.")},a.fieldRegistry.register("field_dropdown",a.FieldDropdown),a.FieldLabelSerializable=function(o,c,d){a.FieldLabelSerializable.superClass_.constructor.call(this,o,c,d)},a.utils.object.inherits(a.FieldLabelSerializable,a.FieldLabel),a.FieldLabelSerializable.fromJson=function(o){var c=a.utils.replaceMessageReferences(o.text);return new a.FieldLabelSerializable(c,void 0,o)},a.FieldLabelSerializable.prototype.EDITABLE=!1,a.FieldLabelSerializable.prototype.SERIALIZABLE=!0,a.fieldRegistry.register("field_label_serializable",a.FieldLabelSerializable),a.FieldImage=function(o,c,d,f,v,y,D){if(!o)throw Error("Src value of an image field is required");if(o=a.utils.replaceMessageReferences(o),d=Number(a.utils.replaceMessageReferences(d)),c=Number(a.utils.replaceMessageReferences(c)),isNaN(d)||isNaN(c))throw Error("Height and width values of an image field must cast to numbers.");if(0>=d||0>=c)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",a.FieldImage.superClass_.constructor.call(this,o,null,D),D||(this.flipRtl_=!!y,this.altText_=a.utils.replaceMessageReferences(f)||""),this.size_=new a.utils.Size(c,d+a.FieldImage.Y_PADDING),this.imageHeight_=d,this.clickHandler_=null,"function"==typeof v&&(this.clickHandler_=v),this.imageElement_=null},a.utils.object.inherits(a.FieldImage,a.Field),a.FieldImage.prototype.DEFAULT_VALUE="",a.FieldImage.fromJson=function(o){return new a.FieldImage(o.src,o.width,o.height,void 0,void 0,void 0,o)},a.FieldImage.Y_PADDING=1,a.FieldImage.prototype.EDITABLE=!1,a.FieldImage.prototype.isDirty_=!1,a.FieldImage.prototype.configure_=function(o){a.FieldImage.superClass_.configure_.call(this,o),this.flipRtl_=!!o.flipRtl,this.altText_=a.utils.replaceMessageReferences(o.alt)||""},a.FieldImage.prototype.initView=function(){this.imageElement_=a.utils.dom.createSvgElement(a.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(a.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},a.FieldImage.prototype.updateSize_=function(){},a.FieldImage.prototype.doClassValidation_=function(o){return"string"!=typeof o?null:o},a.FieldImage.prototype.doValueUpdate_=function(o){this.value_=o,this.imageElement_&&this.imageElement_.setAttributeNS(a.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},a.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},a.FieldImage.prototype.setAlt=function(o){o!=this.altText_&&(this.altText_=o||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},a.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},a.FieldImage.prototype.setOnClickHandler=function(o){this.clickHandler_=o},a.FieldImage.prototype.getText_=function(){return this.altText_},a.fieldRegistry.register("field_image",a.FieldImage),a.FieldMultilineInput=function(o,c,d){a.FieldMultilineInput.superClass_.constructor.call(this,o,c,d),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},a.utils.object.inherits(a.FieldMultilineInput,a.FieldTextInput),a.FieldMultilineInput.prototype.configure_=function(o){a.FieldMultilineInput.superClass_.configure_.call(this,o),o.maxLines&&this.setMaxLines(o.maxLines)},a.FieldMultilineInput.fromJson=function(o){var c=a.utils.replaceMessageReferences(o.text);return new a.FieldMultilineInput(c,void 0,o)},a.FieldMultilineInput.prototype.toXml=function(o){return o.textContent=this.getValue().replace(/\n/g,"&#10;"),o},a.FieldMultilineInput.prototype.fromXml=function(o){this.setValue(o.textContent.replace(/&#10;/g,"\n"))},a.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},a.FieldMultilineInput.prototype.getDisplayText_=function(){var o=this.getText();if(!o)return a.Field.NBSP;var c=o.split("\n");o="";for(var d=this.isOverflowedY_?this.maxLines_:c.length,f=0;f<d;f++){var v=c[f];v.length>this.maxDisplayLength?v=v.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&f===d-1&&(v=v.substring(0,v.length-3)+"..."),o+=v=v.replace(/\s/g,a.Field.NBSP),f!==d-1&&(o+="\n")}return this.sourceBlock_.RTL&&(o+="\u200f"),o},a.FieldMultilineInput.prototype.doValueUpdate_=function(o){a.FieldMultilineInput.superClass_.doValueUpdate_.call(this,o),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},a.FieldMultilineInput.prototype.render_=function(){for(var o;o=this.textGroup_.firstChild;)this.textGroup_.removeChild(o);o=this.getDisplayText_().split("\n");for(var c=0,d=0;d<o.length;d++){var f=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;a.utils.dom.createSvgElement(a.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:c+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(o[d])),c+=f}this.isBeingEdited_&&(o=this.htmlInput_,this.isOverflowedY_?a.utils.dom.addClass(o,"blocklyHtmlTextAreaInputOverflowedY"):a.utils.dom.removeClass(o,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),o=this.htmlInput_,this.isTextValid_?(a.utils.dom.removeClass(o,"blocklyInvalidInput"),a.utils.aria.setState(o,a.utils.aria.State.INVALID,!1)):(a.utils.dom.addClass(o,"blocklyInvalidInput"),a.utils.aria.setState(o,a.utils.aria.State.INVALID,!0)))},a.FieldMultilineInput.prototype.updateSize_=function(){for(var o=this.textGroup_.childNodes,c=0,d=0,f=0;f<o.length;f++){var v=a.utils.dom.getTextWidth(o[f]);v>c&&(c=v),d+=this.getConstants().FIELD_TEXT_HEIGHT+(0<f?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){o=this.value_.split("\n"),v=a.utils.dom.createSvgElement(a.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var y=this.getConstants().FIELD_TEXT_FONTSIZE,D=this.getConstants().FIELD_TEXT_FONTWEIGHT,O=this.getConstants().FIELD_TEXT_FONTFAMILY;for(f=0;f<o.length;f++){o[f].length>this.maxDisplayLength&&(o[f]=o[f].substring(0,this.maxDisplayLength)),v.textContent=o[f];var U=a.utils.dom.getFastTextWidth(v,y,D,O);U>c&&(c=U)}c+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(d+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,c+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",c),this.borderRect_.setAttribute("height",d)),this.size_.width=c,this.size_.height=d,this.positionBorderRect_()},a.FieldMultilineInput.prototype.showEditor_=function(o,c){a.FieldMultilineInput.superClass_.showEditor_.call(this,o,c),this.forceRerender()},a.FieldMultilineInput.prototype.widgetCreate_=function(){var o=a.WidgetDiv.DIV,c=this.workspace_.getScale(),d=document.createElement("textarea");d.className="blocklyHtmlInput blocklyHtmlTextAreaInput",d.setAttribute("spellcheck",this.spellcheck_);var f=this.getConstants().FIELD_TEXT_FONTSIZE*c+"pt";o.style.fontSize=f,d.style.fontSize=f,d.style.borderRadius=a.FieldTextInput.BORDERRADIUS*c+"px",f=this.getConstants().FIELD_BORDER_RECT_X_PADDING*c;var v=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*c/2;return d.style.padding=v+"px "+f+"px "+v+"px "+f+"px",f=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,d.style.lineHeight=f*c+"px",o.appendChild(d),d.value=d.defaultValue=this.getEditorText_(this.value_),d.untypedDefaultValue_=this.value_,d.oldValue_=null,a.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(d),d},a.FieldMultilineInput.prototype.setMaxLines=function(o){"number"==typeof o&&0<o&&o!==this.maxLines_&&(this.maxLines_=o,this.forceRerender())},a.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},a.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(o){o.keyCode!==a.utils.KeyCodes.ENTER&&a.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,o)},a.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),a.fieldRegistry.register("field_multilinetext",a.FieldMultilineInput),a.FieldNumber=function(o,c,d,f,v,y){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,a.FieldNumber.superClass_.constructor.call(this,o,v,y),y||this.setConstraints(c,d,f)},a.utils.object.inherits(a.FieldNumber,a.FieldTextInput),a.FieldNumber.prototype.DEFAULT_VALUE=0,a.FieldNumber.fromJson=function(o){return new a.FieldNumber(o.value,void 0,void 0,void 0,void 0,o)},a.FieldNumber.prototype.SERIALIZABLE=!0,a.FieldNumber.prototype.configure_=function(o){a.FieldNumber.superClass_.configure_.call(this,o),this.setMinInternal_(o.min),this.setMaxInternal_(o.max),this.setPrecisionInternal_(o.precision)},a.FieldNumber.prototype.setConstraints=function(o,c,d){this.setMinInternal_(o),this.setMaxInternal_(c),this.setPrecisionInternal_(d),this.setValue(this.getValue())},a.FieldNumber.prototype.setMin=function(o){this.setMinInternal_(o),this.setValue(this.getValue())},a.FieldNumber.prototype.setMinInternal_=function(o){null==o?this.min_=-1/0:(o=Number(o),isNaN(o)||(this.min_=o))},a.FieldNumber.prototype.getMin=function(){return this.min_},a.FieldNumber.prototype.setMax=function(o){this.setMaxInternal_(o),this.setValue(this.getValue())},a.FieldNumber.prototype.setMaxInternal_=function(o){null==o?this.max_=1/0:(o=Number(o),isNaN(o)||(this.max_=o))},a.FieldNumber.prototype.getMax=function(){return this.max_},a.FieldNumber.prototype.setPrecision=function(o){this.setPrecisionInternal_(o),this.setValue(this.getValue())},a.FieldNumber.prototype.setPrecisionInternal_=function(o){this.precision_=Number(o)||0;var c=String(this.precision_);-1!=c.indexOf("e")&&(c=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var d=c.indexOf(".");this.decimalPlaces_=-1==d?o?0:null:c.length-d-1},a.FieldNumber.prototype.getPrecision=function(){return this.precision_},a.FieldNumber.prototype.doClassValidation_=function(o){return null===o||(o=(o=(o=(o=String(o)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),o=Number(o||0),isNaN(o))?null:(o=Math.min(Math.max(o,this.min_),this.max_),this.precision_&&isFinite(o)&&(o=Math.round(o/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(o=Number(o.toFixed(this.decimalPlaces_))),o)},a.FieldNumber.prototype.widgetCreate_=function(){var o=a.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&a.utils.aria.setState(o,a.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&a.utils.aria.setState(o,a.utils.aria.State.VALUEMAX,this.max_),o},a.fieldRegistry.register("field_number",a.FieldNumber),a.FieldVariable=function(o,c,d,f,v){this.menuGenerator_=a.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof o?o:"",this.size_=new a.utils.Size(0,0),v&&this.configure_(v),c&&this.setValidator(c),v||this.setTypes_(d,f)},a.utils.object.inherits(a.FieldVariable,a.FieldDropdown),a.FieldVariable.fromJson=function(o){var c=a.utils.replaceMessageReferences(o.variable);return new a.FieldVariable(c,void 0,void 0,void 0,o)},a.FieldVariable.prototype.SERIALIZABLE=!0,a.FieldVariable.prototype.configure_=function(o){a.FieldVariable.superClass_.configure_.call(this,o),this.setTypes_(o.variableTypes,o.defaultType)},a.FieldVariable.prototype.initModel=function(){if(!this.variable_){var o=a.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(o.getId())}},a.FieldVariable.prototype.shouldAddBorderRect_=function(){return a.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},a.FieldVariable.prototype.fromXml=function(o){var c=o.getAttribute("id"),d=o.textContent,f=o.getAttribute("variabletype")||o.getAttribute("variableType")||"";if(c=a.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,c,d,f),null!=f&&f!==c.type)throw Error("Serialized variable type with id '"+c.getId()+"' had type "+c.type+", and does not match variable field that references it: "+a.Xml.domToText(o)+".");this.setValue(c.getId())},a.FieldVariable.prototype.toXml=function(o){return this.initModel(),o.id=this.variable_.getId(),o.textContent=this.variable_.name,this.variable_.type&&o.setAttribute("variabletype",this.variable_.type),o},a.FieldVariable.prototype.setSourceBlock=function(o){if(o.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");a.FieldVariable.superClass_.setSourceBlock.call(this,o)},a.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},a.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},a.FieldVariable.prototype.getVariable=function(){return this.variable_},a.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},a.FieldVariable.prototype.doClassValidation_=function(o){if(null===o)return null;var c=a.Variables.getVariable(this.sourceBlock_.workspace,o);return c?this.typeIsAllowed_(c=c.type)?o:(console.warn("Variable type doesn't match this field!  Type was "+c),null):(console.warn("Variable id doesn't point to a real variable! ID was "+o),null)},a.FieldVariable.prototype.doValueUpdate_=function(o){this.variable_=a.Variables.getVariable(this.sourceBlock_.workspace,o),a.FieldVariable.superClass_.doValueUpdate_.call(this,o)},a.FieldVariable.prototype.typeIsAllowed_=function(o){var c=this.getVariableTypes_();if(!c)return!0;for(var d=0;d<c.length;d++)if(o==c[d])return!0;return!1},a.FieldVariable.prototype.getVariableTypes_=function(){var o=this.variableTypes;if(null===o&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(o=o||[""]).length)throw o=this.getText(),Error("'variableTypes' of field variable "+o+" was an empty list");return o},a.FieldVariable.prototype.setTypes_=function(o,c){if(c=c||"",null==o||null==o)o=null;else{if(!Array.isArray(o))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var d=!1,f=0;f<o.length;f++)o[f]==c&&(d=!0);if(!d)throw Error("Invalid default type '"+c+"' in the definition of a FieldVariable")}this.defaultType_=c,this.variableTypes=o},a.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},a.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var o=this.getText(),c=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var d=this.getVariableTypes_(),f=0;f<d.length;f++){var v=this.sourceBlock_.workspace.getVariablesOfType(d[f]);c=c.concat(v)}for(c.sort(a.VariableModel.compareByName),d=[],f=0;f<c.length;f++)d[f]=[c[f].name,c[f].getId()];return d.push([a.Msg.RENAME_VARIABLE,a.RENAME_VARIABLE_ID]),a.Msg.DELETE_VARIABLE&&d.push([a.Msg.DELETE_VARIABLE.replace("%1",o),a.DELETE_VARIABLE_ID]),d},a.FieldVariable.prototype.onItemSelected_=function(o,c){if(o=c.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(o==a.RENAME_VARIABLE_ID)return void a.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(o==a.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(o)},a.FieldVariable.prototype.referencesVariables=function(){return!0},a.fieldRegistry.register("field_variable",a.FieldVariable),a.utils.svgPaths={},a.utils.svgPaths.point=function(o,c){return" "+o+","+c+" "},a.utils.svgPaths.curve=function(o,c){return" "+o+c.join("")},a.utils.svgPaths.moveTo=function(o,c){return" M "+o+","+c+" "},a.utils.svgPaths.moveBy=function(o,c){return" m "+o+","+c+" "},a.utils.svgPaths.lineTo=function(o,c){return" l "+o+","+c+" "},a.utils.svgPaths.line=function(o){return" l"+o.join("")},a.utils.svgPaths.lineOnAxis=function(o,c){return" "+o+" "+c+" "},a.utils.svgPaths.arc=function(o,c,d,f){return o+" "+d+" "+d+" "+c+f},a.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=a.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!a.utils.userAgent.IE&&!a.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},a.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},a.blockRendering.ConstantProvider.prototype.setTheme=function(o){this.blockStyles=Object.create(null);var d,c=o.blockStyles;for(d in c)this.blockStyles[d]=this.validatedBlockStyle_(c[d]);this.setDynamicProperties_(o)},a.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(o){this.setFontConstants_(o),this.setComponentConstants_(o),this.ADD_START_HATS=null!=o.startHats?o.startHats:this.ADD_START_HATS},a.blockRendering.ConstantProvider.prototype.setFontConstants_=function(o){this.FIELD_TEXT_FONTFAMILY=o.fontStyle&&null!=o.fontStyle.family?o.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=o.fontStyle&&null!=o.fontStyle.weight?o.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=o.fontStyle&&null!=o.fontStyle.size?o.fontStyle.size:this.FIELD_TEXT_FONTSIZE,o=a.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=o.height,this.FIELD_TEXT_BASELINE=o.baseline},a.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(o){this.CURSOR_COLOUR=o.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=o.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=o.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(o.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},a.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(o){var c="auto_"+o;return this.blockStyles[c]||(this.blockStyles[c]=this.createBlockStyle_(o)),{style:this.blockStyles[c],name:c}},a.blockRendering.ConstantProvider.prototype.getBlockStyle=function(o){return this.blockStyles[o||""]||(o&&0==o.indexOf("auto_")?this.getBlockStyleForColour(o.substring(5)).style:this.createBlockStyle_("#000000"))},a.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(o){return this.validatedBlockStyle_({colourPrimary:o})},a.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(o){var c={};return o&&a.utils.object.mixin(c,o),o=a.utils.parseBlockColour(c.colourPrimary||"#000"),c.colourPrimary=o.hex,c.colourSecondary=c.colourSecondary?a.utils.parseBlockColour(c.colourSecondary).hex:this.generateSecondaryColour_(c.colourPrimary),c.colourTertiary=c.colourTertiary?a.utils.parseBlockColour(c.colourTertiary).hex:this.generateTertiaryColour_(c.colourPrimary),c.hat=c.hat||"",c},a.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(o){return a.utils.colour.blend("#fff",o,.6)||o},a.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(o){return a.utils.colour.blend("#fff",o,.3)||o},a.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&a.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&a.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&a.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},a.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var o=this.JAGGED_TEETH_HEIGHT,c=this.JAGGED_TEETH_WIDTH;return{height:o,width:c,path:a.utils.svgPaths.line([a.utils.svgPaths.point(c,o/4),a.utils.svgPaths.point(2*-c,o/2),a.utils.svgPaths.point(c,o/4)])}},a.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var o=this.START_HAT_HEIGHT,c=this.START_HAT_WIDTH;return{height:o,width:c,path:a.utils.svgPaths.curve("c",[a.utils.svgPaths.point(30,-o),a.utils.svgPaths.point(70,-o),a.utils.svgPaths.point(c,0)])}},a.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function o(y){var D=-(y=y?-1:1),O=d/2,U=O+2.5,X=O+.5,H=a.utils.svgPaths.point(-c,y*O);return O=a.utils.svgPaths.point(c,y*O),a.utils.svgPaths.curve("c",[a.utils.svgPaths.point(0,y*U),a.utils.svgPaths.point(-c,D*X),H])+a.utils.svgPaths.curve("s",[a.utils.svgPaths.point(c,2.5*D),O])}var c=this.TAB_WIDTH,d=this.TAB_HEIGHT,f=o(!0),v=o(!1);return{type:this.SHAPES.PUZZLE,width:c,height:d,pathDown:v,pathUp:f}},a.blockRendering.ConstantProvider.prototype.makeNotch=function(){function o(D){return a.utils.svgPaths.line([a.utils.svgPaths.point(D*f,d),a.utils.svgPaths.point(3*D,0),a.utils.svgPaths.point(D*f,-d)])}var c=this.NOTCH_WIDTH,d=this.NOTCH_HEIGHT,f=(c-3)/2,v=o(1),y=o(-1);return{type:this.SHAPES.NOTCH,width:c,height:d,pathLeft:v,pathRight:y}},a.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var o=this.CORNER_RADIUS;return{width:o,height:o,pathTop:a.utils.svgPaths.arc("a","0 0,0",o,a.utils.svgPaths.point(-o,o)),pathBottom:a.utils.svgPaths.arc("a","0 0,0",o,a.utils.svgPaths.point(o,o))}},a.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var o=this.CORNER_RADIUS,c=a.utils.svgPaths.moveBy(0,o)+a.utils.svgPaths.arc("a","0 0,1",o,a.utils.svgPaths.point(o,-o)),d=a.utils.svgPaths.arc("a","0 0,1",o,a.utils.svgPaths.point(o,o)),f=a.utils.svgPaths.arc("a","0 0,1",o,a.utils.svgPaths.point(-o,-o));return{topLeft:c,topRight:d,bottomRight:a.utils.svgPaths.arc("a","0 0,1",o,a.utils.svgPaths.point(-o,o)),bottomLeft:f,rightHeight:o}},a.blockRendering.ConstantProvider.prototype.shapeFor=function(o){switch(o.type){case a.connectionTypes.INPUT_VALUE:case a.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case a.connectionTypes.PREVIOUS_STATEMENT:case a.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},a.blockRendering.ConstantProvider.prototype.createDom=function(o,c,d){this.injectCSS_(c,d),o=a.utils.dom.createSvgElement(a.utils.Svg.DEFS,{},o),c=a.utils.dom.createSvgElement(a.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},o),a.utils.dom.createSvgElement(a.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},c),d=a.utils.dom.createSvgElement(a.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},c),a.utils.dom.createSvgElement(a.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},d),a.utils.dom.createSvgElement(a.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},c),a.utils.dom.createSvgElement(a.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},c),this.embossFilterId=c.id,this.embossFilter_=c,c=a.utils.dom.createSvgElement(a.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},o),a.utils.dom.createSvgElement(a.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},c),a.utils.dom.createSvgElement(a.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},c),this.disabledPatternId=c.id,this.disabledPattern_=c,a.blockRendering.Debug&&(o=a.utils.dom.createSvgElement(a.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},o),c=a.utils.dom.createSvgElement(a.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},o),a.utils.dom.createSvgElement(a.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},c),a.utils.dom.createSvgElement(a.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},o),a.utils.dom.createSvgElement(a.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},o),this.debugFilterId=o.id,this.debugFilter_=o)},a.blockRendering.ConstantProvider.prototype.injectCSS_=function(o,c){c=this.getCSS_(c),o="blockly-renderer-style-"+o,this.cssNode_=document.getElementById(o);var d=c.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=d:((c=document.createElement("style")).id=o,o=document.createTextNode(d),c.appendChild(o),document.head.insertBefore(c,document.head.firstChild),this.cssNode_=c)},a.blockRendering.ConstantProvider.prototype.getCSS_=function(o){return[o+" .blocklyText, ",o+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",o+" .blocklyText {","fill: #fff;","}",o+" .blocklyNonEditableText>rect,",o+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",o+" .blocklyNonEditableText>text,",o+" .blocklyEditableText>text {","fill: #000;","}",o+" .blocklyFlyoutLabelText {","fill: #000;","}",o+" .blocklyText.blocklyBubbleText {","fill: #000;","}",o+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",o+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",o+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",o+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",o+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",o+" .blocklyReplaceable .blocklyPathLight,",o+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",o+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},a.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},a.blockRendering.Types.LEFT_CORNER=a.blockRendering.Types.LEFT_SQUARE_CORNER|a.blockRendering.Types.LEFT_ROUND_CORNER,a.blockRendering.Types.RIGHT_CORNER=a.blockRendering.Types.RIGHT_SQUARE_CORNER|a.blockRendering.Types.RIGHT_ROUND_CORNER,a.blockRendering.Types.nextTypeValue_=16777216,a.blockRendering.Types.getType=function(o){return Object.prototype.hasOwnProperty.call(a.blockRendering.Types,o)||(a.blockRendering.Types[o]=a.blockRendering.Types.nextTypeValue_,a.blockRendering.Types.nextTypeValue_<<=1),a.blockRendering.Types[o]},a.blockRendering.Types.isField=function(o){return o.type&a.blockRendering.Types.FIELD},a.blockRendering.Types.isHat=function(o){return o.type&a.blockRendering.Types.HAT},a.blockRendering.Types.isIcon=function(o){return o.type&a.blockRendering.Types.ICON},a.blockRendering.Types.isSpacer=function(o){return o.type&a.blockRendering.Types.SPACER},a.blockRendering.Types.isInRowSpacer=function(o){return o.type&a.blockRendering.Types.IN_ROW_SPACER},a.blockRendering.Types.isInput=function(o){return o.type&a.blockRendering.Types.INPUT},a.blockRendering.Types.isExternalInput=function(o){return o.type&a.blockRendering.Types.EXTERNAL_VALUE_INPUT},a.blockRendering.Types.isInlineInput=function(o){return o.type&a.blockRendering.Types.INLINE_INPUT},a.blockRendering.Types.isStatementInput=function(o){return o.type&a.blockRendering.Types.STATEMENT_INPUT},a.blockRendering.Types.isPreviousConnection=function(o){return o.type&a.blockRendering.Types.PREVIOUS_CONNECTION},a.blockRendering.Types.isNextConnection=function(o){return o.type&a.blockRendering.Types.NEXT_CONNECTION},a.blockRendering.Types.isPreviousOrNextConnection=function(o){return o.type&(a.blockRendering.Types.PREVIOUS_CONNECTION|a.blockRendering.Types.NEXT_CONNECTION)},a.blockRendering.Types.isLeftRoundedCorner=function(o){return o.type&a.blockRendering.Types.LEFT_ROUND_CORNER},a.blockRendering.Types.isRightRoundedCorner=function(o){return o.type&a.blockRendering.Types.RIGHT_ROUND_CORNER},a.blockRendering.Types.isLeftSquareCorner=function(o){return o.type&a.blockRendering.Types.LEFT_SQUARE_CORNER},a.blockRendering.Types.isRightSquareCorner=function(o){return o.type&a.blockRendering.Types.RIGHT_SQUARE_CORNER},a.blockRendering.Types.isCorner=function(o){return o.type&a.blockRendering.Types.CORNER},a.blockRendering.Types.isJaggedEdge=function(o){return o.type&a.blockRendering.Types.JAGGED_EDGE},a.blockRendering.Types.isRow=function(o){return o.type&a.blockRendering.Types.ROW},a.blockRendering.Types.isBetweenRowSpacer=function(o){return o.type&a.blockRendering.Types.BETWEEN_ROW_SPACER},a.blockRendering.Types.isTopRow=function(o){return o.type&a.blockRendering.Types.TOP_ROW},a.blockRendering.Types.isBottomRow=function(o){return o.type&a.blockRendering.Types.BOTTOM_ROW},a.blockRendering.Types.isTopOrBottomRow=function(o){return o.type&(a.blockRendering.Types.TOP_ROW|a.blockRendering.Types.BOTTOM_ROW)},a.blockRendering.Types.isInputRow=function(o){return o.type&a.blockRendering.Types.INPUT_ROW},a.blockRendering.Measurable=function(o){this.height=this.width=0,this.type=a.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=o,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},a.blockRendering.Connection=function(o,c){a.blockRendering.Connection.superClass_.constructor.call(this,o),this.connectionModel=c,this.shape=this.constants_.shapeFor(c),this.isDynamicShape=!!this.shape.isDynamic,this.type|=a.blockRendering.Types.CONNECTION},a.utils.object.inherits(a.blockRendering.Connection,a.blockRendering.Measurable),a.blockRendering.OutputConnection=function(o,c){a.blockRendering.OutputConnection.superClass_.constructor.call(this,o,c),this.type|=a.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},a.utils.object.inherits(a.blockRendering.OutputConnection,a.blockRendering.Connection),a.blockRendering.PreviousConnection=function(o,c){a.blockRendering.PreviousConnection.superClass_.constructor.call(this,o,c),this.type|=a.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},a.utils.object.inherits(a.blockRendering.PreviousConnection,a.blockRendering.Connection),a.blockRendering.NextConnection=function(o,c){a.blockRendering.NextConnection.superClass_.constructor.call(this,o,c),this.type|=a.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},a.utils.object.inherits(a.blockRendering.NextConnection,a.blockRendering.Connection),a.blockRendering.InputConnection=function(o,c){a.blockRendering.InputConnection.superClass_.constructor.call(this,o,c.connection),this.type|=a.blockRendering.Types.INPUT,this.input=c,this.align=c.align,(this.connectedBlock=c.connection&&c.connection.targetBlock()?c.connection.targetBlock():null)?(o=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=o.width,this.connectedBlockHeight=o.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},a.utils.object.inherits(a.blockRendering.InputConnection,a.blockRendering.Connection),a.blockRendering.InlineInput=function(o,c){a.blockRendering.InlineInput.superClass_.constructor.call(this,o,c),this.type|=a.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},a.utils.object.inherits(a.blockRendering.InlineInput,a.blockRendering.InputConnection),a.blockRendering.StatementInput=function(o,c){a.blockRendering.StatementInput.superClass_.constructor.call(this,o,c),this.type|=a.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},a.utils.object.inherits(a.blockRendering.StatementInput,a.blockRendering.InputConnection),a.blockRendering.ExternalValueInput=function(o,c){a.blockRendering.ExternalValueInput.superClass_.constructor.call(this,o,c),this.type|=a.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},a.utils.object.inherits(a.blockRendering.ExternalValueInput,a.blockRendering.InputConnection),a.blockRendering.Icon=function(o,c){a.blockRendering.Icon.superClass_.constructor.call(this,o),this.icon=c,this.isVisible=c.isVisible(),this.type|=a.blockRendering.Types.ICON,o=c.getCorrectedSize(),this.height=o.height,this.width=o.width},a.utils.object.inherits(a.blockRendering.Icon,a.blockRendering.Measurable),a.blockRendering.JaggedEdge=function(o){a.blockRendering.JaggedEdge.superClass_.constructor.call(this,o),this.type|=a.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},a.utils.object.inherits(a.blockRendering.JaggedEdge,a.blockRendering.Measurable),a.blockRendering.Field=function(o,c,d){a.blockRendering.Field.superClass_.constructor.call(this,o),this.field=c,this.isEditable=c.EDITABLE,this.flipRtl=c.getFlipRtl(),this.type|=a.blockRendering.Types.FIELD,o=this.field.getSize(),this.height=o.height,this.width=o.width,this.parentInput=d},a.utils.object.inherits(a.blockRendering.Field,a.blockRendering.Measurable),a.blockRendering.Hat=function(o){a.blockRendering.Hat.superClass_.constructor.call(this,o),this.type|=a.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},a.utils.object.inherits(a.blockRendering.Hat,a.blockRendering.Measurable),a.blockRendering.SquareCorner=function(o,c){a.blockRendering.SquareCorner.superClass_.constructor.call(this,o),this.type=(c&&"left"!=c?a.blockRendering.Types.RIGHT_SQUARE_CORNER:a.blockRendering.Types.LEFT_SQUARE_CORNER)|a.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},a.utils.object.inherits(a.blockRendering.SquareCorner,a.blockRendering.Measurable),a.blockRendering.RoundCorner=function(o,c){a.blockRendering.RoundCorner.superClass_.constructor.call(this,o),this.type=(c&&"left"!=c?a.blockRendering.Types.RIGHT_ROUND_CORNER:a.blockRendering.Types.LEFT_ROUND_CORNER)|a.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},a.utils.object.inherits(a.blockRendering.RoundCorner,a.blockRendering.Measurable),a.blockRendering.InRowSpacer=function(o,c){a.blockRendering.InRowSpacer.superClass_.constructor.call(this,o),this.type=this.type|a.blockRendering.Types.SPACER|a.blockRendering.Types.IN_ROW_SPACER,this.width=c,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},a.utils.object.inherits(a.blockRendering.InRowSpacer,a.blockRendering.Measurable),a.blockRendering.Row=function(o){this.type=a.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=o,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},a.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},a.blockRendering.Row.prototype.getLastInput=function(){for(var c,o=this.elements.length-1;c=this.elements[o];o--)if(a.blockRendering.Types.isInput(c))return c;return null},a.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},a.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},a.blockRendering.Row.prototype.getFirstSpacer=function(){for(var c,o=0;c=this.elements[o];o++)if(a.blockRendering.Types.isSpacer(c))return c;return null},a.blockRendering.Row.prototype.getLastSpacer=function(){for(var c,o=this.elements.length-1;c=this.elements[o];o--)if(a.blockRendering.Types.isSpacer(c))return c;return null},a.blockRendering.TopRow=function(o){a.blockRendering.TopRow.superClass_.constructor.call(this,o),this.type|=a.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},a.utils.object.inherits(a.blockRendering.TopRow,a.blockRendering.Row),a.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(o){var c=(o.hat?"cap"===o.hat:this.constants_.ADD_START_HATS)&&!o.outputConnection&&!o.previousConnection,d=o.getPreviousBlock();return!!o.outputConnection||c||!!d&&d.getNextBlock()==o},a.blockRendering.TopRow.prototype.hasRightSquareCorner=function(o){return!0},a.blockRendering.TopRow.prototype.measure=function(){for(var v,o=0,c=0,d=0,f=0;v=this.elements[f];f++)c+=v.width,a.blockRendering.Types.isSpacer(v)||(a.blockRendering.Types.isHat(v)?d=Math.max(d,v.ascenderHeight):o=Math.max(o,v.height));this.width=Math.max(this.minWidth,c),this.height=Math.max(this.minHeight,o)+d,this.capline=this.ascenderHeight=d,this.widthWithConnectedBlocks=this.width},a.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},a.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},a.blockRendering.BottomRow=function(o){a.blockRendering.BottomRow.superClass_.constructor.call(this,o),this.type|=a.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},a.utils.object.inherits(a.blockRendering.BottomRow,a.blockRendering.Row),a.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(o){return!!o.outputConnection||!!o.getNextBlock()},a.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(o){return!0},a.blockRendering.BottomRow.prototype.measure=function(){for(var v,o=0,c=0,d=0,f=0;v=this.elements[f];f++)c+=v.width,a.blockRendering.Types.isSpacer(v)||(a.blockRendering.Types.isNextConnection(v)?d=Math.max(d,v.height):o=Math.max(o,v.height));this.width=Math.max(this.minWidth,c),this.height=Math.max(this.minHeight,o)+d,this.descenderHeight=d,this.widthWithConnectedBlocks=this.width},a.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},a.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},a.blockRendering.SpacerRow=function(o,c,d){a.blockRendering.SpacerRow.superClass_.constructor.call(this,o),this.type=this.type|a.blockRendering.Types.SPACER|a.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=d,this.height=c,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new a.blockRendering.InRowSpacer(this.constants_,d)]},a.utils.object.inherits(a.blockRendering.SpacerRow,a.blockRendering.Row),a.blockRendering.SpacerRow.prototype.measure=function(){},a.blockRendering.InputRow=function(o){a.blockRendering.InputRow.superClass_.constructor.call(this,o),this.type|=a.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},a.utils.object.inherits(a.blockRendering.InputRow,a.blockRendering.Row),a.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var d,o=0,c=0;d=this.elements[c];c++)this.width+=d.width,a.blockRendering.Types.isInput(d)&&(a.blockRendering.Types.isStatementInput(d)?o+=d.connectedBlockWidth:a.blockRendering.Types.isExternalInput(d)&&0!=d.connectedBlockWidth&&(o+=d.connectedBlockWidth-d.connectionWidth)),a.blockRendering.Types.isSpacer(d)||(this.height=Math.max(this.height,d.height));this.connectedBlockWidths=o,this.widthWithConnectedBlocks=this.width+o},a.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},a.blockRendering.RenderInfo=function(o,c){this.block_=c,this.renderer_=o,this.constants_=this.renderer_.getConstants(),this.outputConnection=c.outputConnection?new a.blockRendering.OutputConnection(this.constants_,c.outputConnection):null,this.isInline=c.getInputsInline()&&!c.isCollapsed(),this.isCollapsed=c.isCollapsed(),this.isInsertionMarker=c.isInsertionMarker(),this.RTL=c.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new a.blockRendering.TopRow(this.constants_),this.bottomRow=new a.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},a.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},a.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},a.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var o=new a.blockRendering.InputRow(this.constants_);this.inputRows.push(o);for(var f,c=this.block_.getIcons(),d=0;f=c[d];d++){var v=new a.blockRendering.Icon(this.constants_,f);this.isCollapsed&&f.collapseHidden?this.hiddenIcons.push(v):o.elements.push(v)}for(f=null,d=0;c=this.block_.inputList[d];d++)if(c.isVisible()){for(this.shouldStartNewRow_(c,f)&&(this.rows.push(o),o=new a.blockRendering.InputRow(this.constants_),this.inputRows.push(o)),f=0;v=c.fieldRow[f];f++)o.elements.push(new a.blockRendering.Field(this.constants_,v,c));this.addInput_(c,o),f=c}this.isCollapsed&&(o.hasJaggedEdge=!0,o.elements.push(new a.blockRendering.JaggedEdge(this.constants_))),(o.elements.length||o.hasDummyInput)&&this.rows.push(o),this.populateBottomRow_(),this.rows.push(this.bottomRow)},a.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var o=!!this.block_.previousConnection,c=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!o,d=this.topRow.hasLeftSquareCorner(this.block_)?a.blockRendering.SquareCorner:a.blockRendering.RoundCorner;this.topRow.elements.push(new d(this.constants_)),c?(o=new a.blockRendering.Hat(this.constants_),this.topRow.elements.push(o),this.topRow.capline=o.ascenderHeight):o&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new a.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==a.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,d=this.topRow.hasRightSquareCorner(this.block_)?a.blockRendering.SquareCorner:a.blockRendering.RoundCorner,this.topRow.elements.push(new d(this.constants_,"right"))},a.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==a.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new a.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new a.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new a.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new a.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new a.blockRendering.RoundCorner(this.constants_,"right"))},a.blockRendering.RenderInfo.prototype.addInput_=function(o,c){this.isInline&&o.type==a.inputTypes.VALUE?(c.elements.push(new a.blockRendering.InlineInput(this.constants_,o)),c.hasInlineInput=!0):o.type==a.inputTypes.STATEMENT?(c.elements.push(new a.blockRendering.StatementInput(this.constants_,o)),c.hasStatement=!0):o.type==a.inputTypes.VALUE?(c.elements.push(new a.blockRendering.ExternalValueInput(this.constants_,o)),c.hasExternalInput=!0):o.type==a.inputTypes.DUMMY&&(c.minHeight=Math.max(c.minHeight,o.getSourceBlock()&&o.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),c.hasDummyInput=!0),null==c.align&&(c.align=o.align)},a.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(o,c){return!(!c||o.type!=a.inputTypes.STATEMENT&&c.type!=a.inputTypes.STATEMENT&&(o.type!=a.inputTypes.VALUE&&o.type!=a.inputTypes.DUMMY||this.isInline))},a.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var c,o=0;c=this.rows[o];o++){var d=c.elements;if(c.elements=[],c.startsWithElemSpacer()&&c.elements.push(new a.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,d[0]))),d.length){for(var f=0;f<d.length-1;f++){c.elements.push(d[f]);var v=this.getInRowSpacing_(d[f],d[f+1]);c.elements.push(new a.blockRendering.InRowSpacer(this.constants_,v))}c.elements.push(d[d.length-1]),c.endsWithElemSpacer()&&c.elements.push(new a.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(d[d.length-1],null)))}}},a.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(o,c){if(!o&&c&&a.blockRendering.Types.isStatementInput(c))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(o&&a.blockRendering.Types.isInput(o)&&!c){if(a.blockRendering.Types.isExternalInput(o))return this.constants_.NO_PADDING;if(a.blockRendering.Types.isInlineInput(o))return this.constants_.LARGE_PADDING;if(a.blockRendering.Types.isStatementInput(o))return this.constants_.NO_PADDING}return o&&a.blockRendering.Types.isLeftSquareCorner(o)&&c&&(a.blockRendering.Types.isPreviousConnection(c)||a.blockRendering.Types.isNextConnection(c))?c.notchOffset:o&&a.blockRendering.Types.isLeftRoundedCorner(o)&&c&&(a.blockRendering.Types.isPreviousConnection(c)||a.blockRendering.Types.isNextConnection(c))?c.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},a.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var v,o=0,c=0,d=0,f=0;v=this.rows[f];f++){if(v.measure(),c=Math.max(c,v.width),v.hasStatement){var y=v.getLastInput();o=Math.max(o,v.width-y.width)}d=Math.max(d,v.widthWithConnectedBlocks)}for(this.statementEdge=o,this.width=c,f=0;v=this.rows[f];f++)v.hasStatement&&(v.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(c,d),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},a.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var c,o=0;c=this.rows[o];o++)if(c.hasStatement)this.alignStatementRow_(c);else{var d=c.width;0<(d=this.getDesiredRowWidth_(c)-d)&&this.addAlignmentPadding_(c,d),a.blockRendering.Types.isTopOrBottomRow(c)&&(c.widthWithConnectedBlocks=c.width)}},a.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(o){return this.width-this.startX},a.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(o,c){var d=o.getFirstSpacer(),f=o.getLastSpacer();(o.hasExternalInput||o.hasStatement)&&(o.widthWithConnectedBlocks+=c),o.align==a.constants.ALIGN.LEFT?f.width+=c:o.align==a.constants.ALIGN.CENTRE?(d.width+=c/2,f.width+=c/2):o.align==a.constants.ALIGN.RIGHT?d.width+=c:f.width+=c,o.width+=c},a.blockRendering.RenderInfo.prototype.alignStatementRow_=function(o){var c=o.getLastInput(),d=o.width-c.width,f=this.statementEdge;0<(d=f-d)&&this.addAlignmentPadding_(o,d),d=o.width,f=this.getDesiredRowWidth_(o),c.width+=f-d,c.height=Math.max(c.height,o.height),o.width+=f-d,o.widthWithConnectedBlocks=Math.max(o.width,this.statementEdge+o.connectedBlockWidths)},a.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var o=this.rows;this.rows=[];for(var c=0;c<o.length;c++)this.rows.push(o[c]),c!=o.length-1&&this.rows.push(this.makeSpacerRow_(o[c],o[c+1]))},a.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(o,c){var d=this.getSpacerRowHeight_(o,c),f=this.getSpacerRowWidth_(o,c);return d=new a.blockRendering.SpacerRow(this.constants_,d,f),o.hasStatement&&(d.followsStatement=!0),c.hasStatement&&(d.precedesStatement=!0),d},a.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(o,c){return this.width-this.startX},a.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(o,c){return this.constants_.MEDIUM_PADDING},a.blockRendering.RenderInfo.prototype.getElemCenterline_=function(o,c){return a.blockRendering.Types.isSpacer(c)?o.yPos+c.height/2:a.blockRendering.Types.isBottomRow(o)?(o=o.yPos+o.height-o.descenderHeight,a.blockRendering.Types.isNextConnection(c)?o+c.height/2:o-c.height/2):a.blockRendering.Types.isTopRow(o)?a.blockRendering.Types.isHat(c)?o.capline-c.height/2:o.capline+c.height/2:o.yPos+o.height/2},a.blockRendering.RenderInfo.prototype.recordElemPositions_=function(o){for(var f,c=o.xPos,d=0;f=o.elements[d];d++)a.blockRendering.Types.isSpacer(f)&&(f.height=o.height),f.xPos=c,f.centerline=this.getElemCenterline_(o,f),c+=f.width},a.blockRendering.RenderInfo.prototype.finalize_=function(){for(var f,o=0,c=0,d=0;f=this.rows[d];d++)f.yPos=c,f.xPos=this.startX,c+=f.height,o=Math.max(o,f.widthWithConnectedBlocks),this.recordElemPositions_(f);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=Math.max(o,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=o+this.startX,this.height=c,this.startY=this.topRow.capline,this.bottomRow.baseline=c-this.bottomRow.descenderHeight},a.blockRendering.Debug=function(o){this.debugElements_=[],this.svgRoot_=null,this.constants_=o},a.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},a.blockRendering.Debug.prototype.clearElems=function(){for(var c,o=0;c=this.debugElements_[o];o++)a.utils.dom.removeNode(c);this.debugElements_=[]},a.blockRendering.Debug.prototype.drawSpacerRow=function(o,c,d){if(a.blockRendering.Debug.config.rowSpacers){var f=Math.abs(o.height),v=0>o.height;v&&(c-=f),this.debugElements_.push(a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:d?-(o.xPos+o.width):o.xPos,y:c,width:o.width,height:f,stroke:v?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},a.blockRendering.Debug.prototype.drawSpacerElem=function(o,c,d){if(a.blockRendering.Debug.config.elemSpacers){c=Math.abs(o.width);var f=0>o.width,v=f?o.xPos-c:o.xPos;d&&(v=-(v+c)),this.debugElements_.push(a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:v,y:o.centerline-o.height/2,width:c,height:o.height,stroke:"pink",fill:f?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},a.blockRendering.Debug.prototype.drawRenderedElem=function(o,c){if(a.blockRendering.Debug.config.elems){var d=o.xPos;c&&(d=-(d+o.width)),this.debugElements_.push(a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:d,y:c=o.centerline-o.height/2,width:o.width,height:o.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),a.blockRendering.Types.isField(o)&&o.field instanceof a.FieldLabel&&this.debugElements_.push(a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:d,y:c+this.constants_.FIELD_TEXT_BASELINE,width:o.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}a.blockRendering.Types.isInput(o)&&a.blockRendering.Debug.config.connections&&this.drawConnection(o.connectionModel)},a.blockRendering.Debug.prototype.drawConnection=function(o){if(a.blockRendering.Debug.config.connections){if(o.type==a.connectionTypes.INPUT_VALUE)var c=4,d="magenta",f="none";else o.type==a.connectionTypes.OUTPUT_VALUE?(c=2,f=d="magenta"):o.type==a.connectionTypes.NEXT_STATEMENT?(c=4,d="goldenrod",f="none"):o.type==a.connectionTypes.PREVIOUS_STATEMENT&&(c=2,f=d="goldenrod");this.debugElements_.push(a.utils.dom.createSvgElement(a.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:o.offsetInBlock_.x,cy:o.offsetInBlock_.y,r:c,fill:f,stroke:d},this.svgRoot_))}},a.blockRendering.Debug.prototype.drawRenderedRow=function(o,c,d){a.blockRendering.Debug.config.rows&&(this.debugElements_.push(a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:d?-(o.xPos+o.width):o.xPos,y:o.yPos,width:o.width,height:o.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),a.blockRendering.Types.isTopOrBottomRow(o)||a.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:d?-(o.xPos+o.widthWithConnectedBlocks):o.xPos,y:o.yPos,width:o.widthWithConnectedBlocks,height:o.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},a.blockRendering.Debug.prototype.drawRowWithElements=function(o,c,d){for(var f=0,v=o.elements.length;f<v;f++){var y=o.elements[f];y?a.blockRendering.Types.isSpacer(y)?this.drawSpacerElem(y,o.height,d):this.drawRenderedElem(y,d):console.warn("A row has an undefined or null element.",o,y)}this.drawRenderedRow(o,c,d)},a.blockRendering.Debug.prototype.drawBoundingBox=function(o){if(a.blockRendering.Debug.config.blockBounds){var c=o.RTL?-o.width:0;this.debugElements_.push(a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:c,y:0,width:o.width,height:o.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),a.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"blockRenderDebug",x:c=o.RTL?-o.widthWithChildren:0,y:0,width:o.widthWithChildren,height:o.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},a.blockRendering.Debug.prototype.drawDebug=function(o,c){this.clearElems(),this.svgRoot_=o.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var v,d=0,f=0;v=c.rows[f];f++)a.blockRendering.Types.isBetweenRowSpacer(v)?this.drawSpacerRow(v,d,c.RTL):this.drawRowWithElements(v,d,c.RTL),d+=v.height;o.previousConnection&&this.drawConnection(o.previousConnection),o.nextConnection&&this.drawConnection(o.nextConnection),o.outputConnection&&this.drawConnection(o.outputConnection),c.rightSide&&this.drawRenderedElem(c.rightSide,c.RTL),this.drawBoundingBox(c),this.drawRender(o.pathObject.svgPath)},a.blockRendering.Debug.prototype.drawRender=function(o){a.blockRendering.Debug.config.render&&(o.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){o.setAttribute("filter","")},100))},a.blockRendering.Drawer=function(o,c){this.block_=o,this.info_=c,this.topLeft_=o.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=c.getRenderer().getConstants()},a.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),a.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},a.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},a.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var c,o=0;c=this.info_.hiddenIcons[o];o++)c.icon.iconGroup_.setAttribute("display","none")},a.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var o=1;o<this.info_.rows.length-1;o++){var c=this.info_.rows[o];c.hasJaggedEdge?this.drawJaggedEdge_(c):c.hasStatement?this.drawStatementInput_(c):c.hasExternalInput?this.drawValueInput_(c):this.drawRightSideRow_(c)}this.drawBottom_(),this.drawLeft_()},a.blockRendering.Drawer.prototype.drawTop_=function(){var o=this.info_.topRow,c=o.elements;this.positionPreviousConnection_(),this.outlinePath_+=a.utils.svgPaths.moveBy(o.xPos,this.info_.startY);for(var f,d=0;f=c[d];d++)a.blockRendering.Types.isLeftRoundedCorner(f)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:a.blockRendering.Types.isRightRoundedCorner(f)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:a.blockRendering.Types.isPreviousConnection(f)?this.outlinePath_+=f.shape.pathLeft:a.blockRendering.Types.isHat(f)?this.outlinePath_+=this.constants_.START_HAT.path:a.blockRendering.Types.isSpacer(f)&&(this.outlinePath_+=a.utils.svgPaths.lineOnAxis("h",f.width));this.outlinePath_+=a.utils.svgPaths.lineOnAxis("v",o.height)},a.blockRendering.Drawer.prototype.drawJaggedEdge_=function(o){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+a.utils.svgPaths.lineOnAxis("v",o.height-this.constants_.JAGGED_TEETH.height)},a.blockRendering.Drawer.prototype.drawValueInput_=function(o){var c=o.getLastInput();this.positionExternalValueConnection_(o);var d="function"==typeof c.shape.pathDown?c.shape.pathDown(c.height):c.shape.pathDown;this.outlinePath_+=a.utils.svgPaths.lineOnAxis("H",c.xPos+c.width)+d+a.utils.svgPaths.lineOnAxis("v",o.height-c.connectionHeight)},a.blockRendering.Drawer.prototype.drawStatementInput_=function(o){var c=o.getLastInput(),d=c.xPos+c.notchOffset+c.shape.width;c=c.shape.pathRight+a.utils.svgPaths.lineOnAxis("h",-(c.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var f=o.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=a.utils.svgPaths.lineOnAxis("H",d)+c+a.utils.svgPaths.lineOnAxis("v",f)+this.constants_.INSIDE_CORNERS.pathBottom+a.utils.svgPaths.lineOnAxis("H",o.xPos+o.width),this.positionStatementInputConnection_(o)},a.blockRendering.Drawer.prototype.drawRightSideRow_=function(o){this.outlinePath_+=a.utils.svgPaths.lineOnAxis("V",o.yPos+o.height)},a.blockRendering.Drawer.prototype.drawBottom_=function(){var o=this.info_.bottomRow,c=o.elements;this.positionNextConnection_();for(var y,d=0,f="",v=c.length-1;y=c[v];v--)a.blockRendering.Types.isNextConnection(y)?f+=y.shape.pathRight:a.blockRendering.Types.isLeftSquareCorner(y)?f+=a.utils.svgPaths.lineOnAxis("H",o.xPos):a.blockRendering.Types.isLeftRoundedCorner(y)?f+=this.constants_.OUTSIDE_CORNERS.bottomLeft:a.blockRendering.Types.isRightRoundedCorner(y)?(f+=this.constants_.OUTSIDE_CORNERS.bottomRight,d=this.constants_.OUTSIDE_CORNERS.rightHeight):a.blockRendering.Types.isSpacer(y)&&(f+=a.utils.svgPaths.lineOnAxis("h",-1*y.width));this.outlinePath_+=a.utils.svgPaths.lineOnAxis("V",o.baseline-d),this.outlinePath_+=f},a.blockRendering.Drawer.prototype.drawLeft_=function(){var o=this.info_.outputConnection;if(this.positionOutputConnection_(),o){var c=o.connectionOffsetY+o.height;o="function"==typeof o.shape.pathUp?o.shape.pathUp(o.height):o.shape.pathUp,this.outlinePath_+=a.utils.svgPaths.lineOnAxis("V",c)+o}this.outlinePath_+="z"},a.blockRendering.Drawer.prototype.drawInternals_=function(){for(var c,o=0;c=this.info_.rows[o];o++)for(var f,d=0;f=c.elements[d];d++)a.blockRendering.Types.isInlineInput(f)?this.drawInlineInput_(f):(a.blockRendering.Types.isIcon(f)||a.blockRendering.Types.isField(f))&&this.layoutField_(f)},a.blockRendering.Drawer.prototype.layoutField_=function(o){if(a.blockRendering.Types.isField(o))var c=o.field.getSvgRoot();else a.blockRendering.Types.isIcon(o)&&(c=o.icon.iconGroup_);var d=o.centerline-o.height/2,f=o.xPos,v="";this.info_.RTL&&(f=-(f+o.width),o.flipRtl&&(f+=o.width,v="scale(-1 1)")),a.blockRendering.Types.isIcon(o)?(c.setAttribute("display","block"),c.setAttribute("transform","translate("+f+","+d+")"),o.icon.computeIconLocation()):c.setAttribute("transform","translate("+f+","+d+")"+v),this.info_.isInsertionMarker&&c.setAttribute("display","none")},a.blockRendering.Drawer.prototype.drawInlineInput_=function(o){var c=o.width,d=o.height,f=o.connectionOffsetY,v=o.connectionHeight+f;this.inlinePath_+=a.utils.svgPaths.moveTo(o.xPos+o.connectionWidth,o.centerline-d/2)+a.utils.svgPaths.lineOnAxis("v",f)+o.shape.pathDown+a.utils.svgPaths.lineOnAxis("v",d-v)+a.utils.svgPaths.lineOnAxis("h",c-o.connectionWidth)+a.utils.svgPaths.lineOnAxis("v",-d)+"z",this.positionInlineInputConnection_(o)},a.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(o){if(o.connectionModel){var d=o.xPos+o.connectionWidth+o.connectionOffsetX;this.info_.RTL&&(d*=-1),o.connectionModel.setOffsetInBlock(d,o.centerline-o.height/2+o.connectionOffsetY)}},a.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(o){var c=o.getLastInput();if(c.connectionModel){var d=o.xPos+o.statementEdge+c.notchOffset;this.info_.RTL&&(d*=-1),c.connectionModel.setOffsetInBlock(d,o.yPos)}},a.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(o){var c=o.getLastInput();if(c.connectionModel){var d=o.xPos+o.width;this.info_.RTL&&(d*=-1),c.connectionModel.setOffsetInBlock(d,o.yPos)}},a.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var o=this.info_.topRow;if(o.connection){var c=o.xPos+o.notchOffset;o.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-c:c,0)}},a.blockRendering.Drawer.prototype.positionNextConnection_=function(){var o=this.info_.bottomRow;if(o.connection){var c=o.connection,d=c.xPos;c.connectionModel.setOffsetInBlock(this.info_.RTL?-d:d,o.baseline)}},a.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var o=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-o:o,this.info_.outputConnection.connectionOffsetY)}},a.Events.MarkerMove=function(o,c,d,f){var v=o?o.workspace.id:void 0;f&&f.getType()==a.ASTNode.types.WORKSPACE&&(v=f.getLocation().id),a.Events.MarkerMove.superClass_.constructor.call(this,v),this.blockId=o?o.id:null,this.oldNode=d,this.newNode=f,this.isCursor=c},a.utils.object.inherits(a.Events.MarkerMove,a.Events.UiBase),a.Events.MarkerMove.prototype.type=a.Events.MARKER_MOVE,a.Events.MarkerMove.prototype.toJson=function(){var o=a.Events.MarkerMove.superClass_.toJson.call(this);return o.isCursor=this.isCursor,o.blockId=this.blockId,o.oldNode=this.oldNode,o.newNode=this.newNode,o},a.Events.MarkerMove.prototype.fromJson=function(o){a.Events.MarkerMove.superClass_.fromJson.call(this,o),this.isCursor=o.isCursor,this.blockId=o.blockId,this.oldNode=o.oldNode,this.newNode=o.newNode},a.registry.register(a.registry.Type.EVENT,a.Events.MARKER_MOVE,a.Events.MarkerMove),a.blockRendering.MarkerSvg=function(o,c,d){this.workspace_=o,this.marker_=d,this.parent_=null,this.constants_=c,this.currentMarkerSvg=null,o=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=d.colour||o},a.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",a.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",a.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,a.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},a.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},a.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},a.blockRendering.MarkerSvg.prototype.createDom=function(){var o=this.isCursor()?a.blockRendering.MarkerSvg.CURSOR_CLASS:a.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{class:o},null),this.createDomInternal_(),this.svgGroup_},a.blockRendering.MarkerSvg.prototype.setParent_=function(o){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),o.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),o.setMarkerSvg(this.getSvgRoot())),this.parent_=o},a.blockRendering.MarkerSvg.prototype.draw=function(o,c){if(c){this.constants_=this.workspace_.getRenderer().getConstants();var d=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||d,this.applyColour_(c),this.showAtLocation_(c),this.fireMarkerEvent_(o,c),void 0!==(o=this.currentMarkerSvg.childNodes[0])&&o.beginElement&&o.beginElement()}else this.hide()},a.blockRendering.MarkerSvg.prototype.showAtLocation_=function(o){var c=o.getLocation().type;o.getType()==a.ASTNode.types.BLOCK?this.showWithBlock_(o):o.getType()==a.ASTNode.types.OUTPUT?this.showWithOutput_(o):c==a.connectionTypes.INPUT_VALUE?this.showWithInput_(o):c==a.connectionTypes.NEXT_STATEMENT?this.showWithNext_(o):o.getType()==a.ASTNode.types.PREVIOUS?this.showWithPrevious_(o):o.getType()==a.ASTNode.types.FIELD?this.showWithField_(o):o.getType()==a.ASTNode.types.WORKSPACE?this.showWithCoordinates_(o):o.getType()==a.ASTNode.types.STACK&&this.showWithStack_(o)},a.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(o){var c=(o=o.getSourceBlock()).width,d=o.height,f=d*a.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,v=this.constants_.CURSOR_BLOCK_PADDING;if(o.previousConnection){var y=this.constants_.shapeFor(o.previousConnection);this.positionPrevious_(c,v,f,y)}else o.outputConnection?(y=this.constants_.shapeFor(o.outputConnection),this.positionOutput_(c,d,y)):this.positionBlock_(c,v,f);this.setParent_(o),this.showCurrent_()},a.blockRendering.MarkerSvg.prototype.showWithBlock_=function(o){this.showWithBlockPrevOutput_(o)},a.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(o){this.showWithBlockPrevOutput_(o)},a.blockRendering.MarkerSvg.prototype.showWithOutput_=function(o){this.showWithBlockPrevOutput_(o)},a.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(o){var c=o.getWsCoordinate();o=c.x,this.workspace_.RTL&&(o-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(o,c=c.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},a.blockRendering.MarkerSvg.prototype.showWithField_=function(o){var c=(o=o.getLocation()).getSize().width,d=o.getSize().height;this.positionRect_(0,0,c,d),this.setParent_(o),this.showCurrent_()},a.blockRendering.MarkerSvg.prototype.showWithInput_=function(o){var c=(o=o.getLocation()).getSourceBlock();this.positionInput_(o),this.setParent_(c),this.showCurrent_()},a.blockRendering.MarkerSvg.prototype.showWithNext_=function(o){var c=o.getLocation();o=c.getSourceBlock();var d=0;c=c.getOffsetInBlock().y;var f=o.getHeightWidth().width;this.workspace_.RTL&&(d=-f),this.positionLine_(d,c,f),this.setParent_(o),this.showCurrent_()},a.blockRendering.MarkerSvg.prototype.showWithStack_=function(o){var c=(o=o.getLocation()).getHeightWidth(),d=c.width+this.constants_.CURSOR_STACK_PADDING,f=-this.constants_.CURSOR_STACK_PADDING/2,y=f;this.workspace_.RTL&&(y=-(d+f)),this.positionRect_(y,-this.constants_.CURSOR_STACK_PADDING/2,d,c=c.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(o),this.showCurrent_()},a.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},a.blockRendering.MarkerSvg.prototype.positionBlock_=function(o,c,d){o=a.utils.svgPaths.moveBy(-c,d)+a.utils.svgPaths.lineOnAxis("V",-c)+a.utils.svgPaths.lineOnAxis("H",o+2*c)+a.utils.svgPaths.lineOnAxis("V",d),this.markerBlock_.setAttribute("d",o),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},a.blockRendering.MarkerSvg.prototype.positionInput_=function(o){var c=o.getOffsetInBlock().x,d=o.getOffsetInBlock().y;o=a.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(o).pathDown,this.markerInput_.setAttribute("d",o),this.markerInput_.setAttribute("transform","translate("+c+","+d+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},a.blockRendering.MarkerSvg.prototype.positionLine_=function(o,c,d){this.markerSvgLine_.setAttribute("x",o),this.markerSvgLine_.setAttribute("y",c),this.markerSvgLine_.setAttribute("width",d),this.currentMarkerSvg=this.markerSvgLine_},a.blockRendering.MarkerSvg.prototype.positionOutput_=function(o,c,d){o=a.utils.svgPaths.moveBy(o,0)+a.utils.svgPaths.lineOnAxis("h",-(o-d.width))+a.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+d.pathDown+a.utils.svgPaths.lineOnAxis("V",c)+a.utils.svgPaths.lineOnAxis("H",o),this.markerBlock_.setAttribute("d",o),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},a.blockRendering.MarkerSvg.prototype.positionPrevious_=function(o,c,d,f){o=a.utils.svgPaths.moveBy(-c,d)+a.utils.svgPaths.lineOnAxis("V",-c)+a.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+f.pathLeft+a.utils.svgPaths.lineOnAxis("H",o+2*c)+a.utils.svgPaths.lineOnAxis("V",d),this.markerBlock_.setAttribute("d",o),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},a.blockRendering.MarkerSvg.prototype.positionRect_=function(o,c,d,f){this.markerSvgRect_.setAttribute("x",o),this.markerSvgRect_.setAttribute("y",c),this.markerSvgRect_.setAttribute("width",d),this.markerSvgRect_.setAttribute("height",f),this.currentMarkerSvg=this.markerSvgRect_},a.blockRendering.MarkerSvg.prototype.flipRtl_=function(o){o.setAttribute("transform","scale(-1 1)")},a.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},a.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(o,c){var d=c.getSourceBlock();o=new(a.Events.get(a.Events.MARKER_MOVE))(d,this.isCursor(),o,c),a.Events.fire(o)},a.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},a.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=a.utils.dom.createSvgElement(a.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=a.utils.dom.createSvgElement(a.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=a.utils.dom.createSvgElement(a.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=a.utils.dom.createSvgElement(a.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=a.utils.dom.createSvgElement(a.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var o=this.getBlinkProperties_();a.utils.dom.createSvgElement(a.utils.Svg.ANIMATE,o,this.markerSvgLine_),a.utils.dom.createSvgElement(a.utils.Svg.ANIMATE,o,this.markerInput_),o.attributeName="stroke",a.utils.dom.createSvgElement(a.utils.Svg.ANIMATE,o,this.markerBlock_)}return this.markerSvg_},a.blockRendering.MarkerSvg.prototype.applyColour_=function(o){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",o=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",o),this.markerBlock_.firstChild.setAttribute("values",o))},a.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&a.utils.dom.removeNode(this.svgGroup_)},a.blockRendering.PathObject=function(o,c,d){this.constants=d,this.svgRoot=o,this.svgPath=a.utils.dom.createSvgElement(a.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=c,this.markerSvg=this.cursorSvg=null},a.blockRendering.PathObject.prototype.setPath=function(o){this.svgPath.setAttribute("d",o)},a.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},a.blockRendering.PathObject.prototype.setCursorSvg=function(o){o?(this.svgRoot.appendChild(o),this.cursorSvg=o):this.cursorSvg=null},a.blockRendering.PathObject.prototype.setMarkerSvg=function(o){o?(this.cursorSvg?this.svgRoot.insertBefore(o,this.cursorSvg):this.svgRoot.appendChild(o),this.markerSvg=o):this.markerSvg=null},a.blockRendering.PathObject.prototype.applyColour=function(o){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(o.isShadow()),this.updateDisabled_(!o.isEnabled()||o.getInheritedDisabled())},a.blockRendering.PathObject.prototype.setStyle=function(o){this.style=o},a.blockRendering.PathObject.prototype.setClass_=function(o,c){c?a.utils.dom.addClass(this.svgRoot,o):a.utils.dom.removeClass(this.svgRoot,o)},a.blockRendering.PathObject.prototype.updateHighlighted=function(o){this.svgPath.setAttribute("filter",o?"url(#"+this.constants.embossFilterId+")":"none")},a.blockRendering.PathObject.prototype.updateShadow_=function(o){o&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},a.blockRendering.PathObject.prototype.updateDisabled_=function(o){this.setClass_("blocklyDisabled",o),o&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},a.blockRendering.PathObject.prototype.updateSelected=function(o){this.setClass_("blocklySelected",o)},a.blockRendering.PathObject.prototype.updateDraggingDelete=function(o){this.setClass_("blocklyDraggingDelete",o)},a.blockRendering.PathObject.prototype.updateInsertionMarker=function(o){this.setClass_("blocklyInsertionMarker",o)},a.blockRendering.PathObject.prototype.updateMovable=function(o){this.setClass_("blocklyDraggable",o)},a.blockRendering.PathObject.prototype.updateReplacementFade=function(o){this.setClass_("blocklyReplaceable",o)},a.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(o,c){},a.blockRendering.Renderer=function(o){this.name=o,this.overrides=this.constants_=null},a.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},a.blockRendering.Renderer.prototype.init=function(o,c){this.constants_=this.makeConstants_(),c&&(this.overrides=c,a.utils.object.mixin(this.constants_,c)),this.constants_.setTheme(o),this.constants_.init()},a.blockRendering.Renderer.prototype.createDom=function(o,c){this.constants_.createDom(o,this.name+"-"+c.name,"."+this.getClassName()+"."+c.getClassName())},a.blockRendering.Renderer.prototype.refreshDom=function(o,c){var d=this.getConstants();d.dispose(),this.constants_=this.makeConstants_(),this.overrides&&a.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=d.randomIdentifier,this.constants_.setTheme(c),this.constants_.init(),this.createDom(o,c)},a.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},a.blockRendering.Renderer.prototype.makeConstants_=function(){return new a.blockRendering.ConstantProvider},a.blockRendering.Renderer.prototype.makeRenderInfo_=function(o){return new a.blockRendering.RenderInfo(this,o)},a.blockRendering.Renderer.prototype.makeDrawer_=function(o,c){return new a.blockRendering.Drawer(o,c)},a.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!a.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new a.blockRendering.Debug(this.getConstants())},a.blockRendering.Renderer.prototype.makeMarkerDrawer=function(o,c){return new a.blockRendering.MarkerSvg(o,this.getConstants(),c)},a.blockRendering.Renderer.prototype.makePathObject=function(o,c){return new a.blockRendering.PathObject(o,c,this.constants_)},a.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},a.blockRendering.Renderer.prototype.shouldHighlightConnection=function(o){return!0},a.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(o,c,d){return!!a.Connection.getConnectionForOrphanedConnection(o,d===a.connectionTypes.OUTPUT_VALUE?c.outputConnection:c.previousConnection)},a.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(o,c,d){return c.type==a.connectionTypes.OUTPUT_VALUE||c.type==a.connectionTypes.PREVIOUS_STATEMENT?!o.isConnected()||this.orphanCanConnectAtEnd(d,o.targetBlock(),c.type)?a.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:a.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:a.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},a.blockRendering.Renderer.prototype.render=function(o){a.blockRendering.useDebugger&&!o.renderingDebugger&&(o.renderingDebugger=this.makeDebugger_());var c=this.makeRenderInfo_(o);c.measure(),this.makeDrawer_(o,c).draw()},a.geras={},a.geras.ConstantProvider=function(){a.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},a.utils.object.inherits(a.geras.ConstantProvider,a.blockRendering.ConstantProvider),a.geras.ConstantProvider.prototype.getCSS_=function(o){return a.geras.ConstantProvider.superClass_.getCSS_.call(this,o).concat([o+" .blocklyInsertionMarker>.blocklyPathLight,",o+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},a.geras.Highlighter=function(o){this.info_=o,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,o=o.getRenderer(),this.constants_=o.getConstants(),this.highlightConstants_=o.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},a.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},a.geras.Highlighter.prototype.drawTopCorner=function(o){this.steps_+=a.utils.svgPaths.moveBy(o.xPos,this.info_.startY);for(var d,c=0;d=o.elements[c];c++)a.blockRendering.Types.isLeftSquareCorner(d)?this.steps_+=this.highlightConstants_.START_POINT:a.blockRendering.Types.isLeftRoundedCorner(d)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):a.blockRendering.Types.isPreviousConnection(d)?this.steps_+=this.notchPaths_.pathLeft:a.blockRendering.Types.isHat(d)?this.steps_+=this.startPaths_.path(this.RTL_):a.blockRendering.Types.isSpacer(d)&&0!=d.width&&(this.steps_+=a.utils.svgPaths.lineOnAxis("H",d.xPos+d.width-this.highlightOffset_));this.steps_+=a.utils.svgPaths.lineOnAxis("H",o.xPos+o.width-this.highlightOffset_)},a.geras.Highlighter.prototype.drawJaggedEdge_=function(o){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+a.utils.svgPaths.lineOnAxis("v",o.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},a.geras.Highlighter.prototype.drawValueInput=function(o){var c=o.getLastInput();if(this.RTL_){var d=o.height-c.connectionHeight;this.steps_+=a.utils.svgPaths.moveTo(c.xPos+c.width-this.highlightOffset_,o.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+a.utils.svgPaths.lineOnAxis("v",d)}else this.steps_+=a.utils.svgPaths.moveTo(c.xPos+c.width,o.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},a.geras.Highlighter.prototype.drawStatementInput=function(o){var c=o.getLastInput();if(this.RTL_){var d=o.height-2*this.insideCornerPaths_.height;this.steps_+=a.utils.svgPaths.moveTo(c.xPos,o.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+a.utils.svgPaths.lineOnAxis("v",d)+this.insideCornerPaths_.pathBottom(this.RTL_)+a.utils.svgPaths.lineTo(o.width-c.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=a.utils.svgPaths.moveTo(c.xPos,o.yPos+o.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+a.utils.svgPaths.lineTo(o.width-c.xPos-this.insideCornerPaths_.width,0)},a.geras.Highlighter.prototype.drawRightSideRow=function(o){var c=o.xPos+o.width-this.highlightOffset_;o.followsStatement&&(this.steps_+=a.utils.svgPaths.lineOnAxis("H",c)),this.RTL_&&(this.steps_+=a.utils.svgPaths.lineOnAxis("H",c),o.height>this.highlightOffset_&&(this.steps_+=a.utils.svgPaths.lineOnAxis("V",o.yPos+o.height-this.highlightOffset_)))},a.geras.Highlighter.prototype.drawBottomRow=function(o){if(this.RTL_)this.steps_+=a.utils.svgPaths.lineOnAxis("V",o.baseline-this.highlightOffset_);else{var c=this.info_.bottomRow.elements[0];a.blockRendering.Types.isLeftSquareCorner(c)?this.steps_+=a.utils.svgPaths.moveTo(o.xPos+this.highlightOffset_,o.baseline-this.highlightOffset_):a.blockRendering.Types.isLeftRoundedCorner(c)&&(this.steps_+=a.utils.svgPaths.moveTo(o.xPos,o.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},a.geras.Highlighter.prototype.drawLeft=function(){var o=this.info_.outputConnection;o&&(o=o.connectionOffsetY+o.height,this.RTL_?this.steps_+=a.utils.svgPaths.moveTo(this.info_.startX,o):(this.steps_+=a.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=a.utils.svgPaths.lineOnAxis("V",o)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(a.blockRendering.Types.isLeftRoundedCorner((o=this.info_.topRow).elements[0])?this.steps_+=a.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=a.utils.svgPaths.lineOnAxis("V",o.capline+this.highlightOffset_))},a.geras.Highlighter.prototype.drawInlineInput=function(o){var c=this.highlightOffset_,d=o.xPos+o.connectionWidth,f=o.centerline-o.height/2,v=o.width-o.connectionWidth,y=f+c;this.RTL_?(f=o.connectionOffsetY-c,o=o.height-(o.connectionOffsetY+o.connectionHeight)+c,this.inlineSteps_+=a.utils.svgPaths.moveTo(d-c,y)+a.utils.svgPaths.lineOnAxis("v",f)+this.puzzleTabPaths_.pathDown(this.RTL_)+a.utils.svgPaths.lineOnAxis("v",o)+a.utils.svgPaths.lineOnAxis("h",v)):this.inlineSteps_+=a.utils.svgPaths.moveTo(o.xPos+o.width+c,y)+a.utils.svgPaths.lineOnAxis("v",o.height)+a.utils.svgPaths.lineOnAxis("h",-v)+a.utils.svgPaths.moveTo(d,f+o.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},a.geras.InlineInput=function(o,c){a.geras.InlineInput.superClass_.constructor.call(this,o,c),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},a.utils.object.inherits(a.geras.InlineInput,a.blockRendering.InlineInput),a.geras.StatementInput=function(o,c){a.geras.StatementInput.superClass_.constructor.call(this,o,c),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},a.utils.object.inherits(a.geras.StatementInput,a.blockRendering.StatementInput),a.geras.RenderInfo=function(o,c){a.geras.RenderInfo.superClass_.constructor.call(this,o,c)},a.utils.object.inherits(a.geras.RenderInfo,a.blockRendering.RenderInfo),a.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},a.geras.RenderInfo.prototype.populateBottomRow_=function(){a.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==a.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},a.geras.RenderInfo.prototype.addInput_=function(o,c){this.isInline&&o.type==a.inputTypes.VALUE?(c.elements.push(new a.geras.InlineInput(this.constants_,o)),c.hasInlineInput=!0):o.type==a.inputTypes.STATEMENT?(c.elements.push(new a.geras.StatementInput(this.constants_,o)),c.hasStatement=!0):o.type==a.inputTypes.VALUE?(c.elements.push(new a.blockRendering.ExternalValueInput(this.constants_,o)),c.hasExternalInput=!0):o.type==a.inputTypes.DUMMY&&(c.minHeight=Math.max(c.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),c.hasDummyInput=!0),this.isInline||null!=c.align||(c.align=o.align)},a.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var d,o=!1,c=0;d=this.rows[c];c++)d.hasExternalInput&&(o=!0);for(c=0;d=this.rows[c];c++){var f=d.elements;if(d.elements=[],d.startsWithElemSpacer()&&d.elements.push(new a.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,f[0]))),f.length){for(var v=0;v<f.length-1;v++){d.elements.push(f[v]);var y=this.getInRowSpacing_(f[v],f[v+1]);d.elements.push(new a.blockRendering.InRowSpacer(this.constants_,y))}d.elements.push(f[f.length-1]),d.endsWithElemSpacer()&&(y=this.getInRowSpacing_(f[f.length-1],null),o&&d.hasDummyInput&&(y+=this.constants_.TAB_WIDTH),d.elements.push(new a.blockRendering.InRowSpacer(this.constants_,y)))}}},a.geras.RenderInfo.prototype.getInRowSpacing_=function(o,c){if(!o)return c&&a.blockRendering.Types.isField(c)&&c.isEditable?this.constants_.MEDIUM_PADDING:c&&a.blockRendering.Types.isInlineInput(c)?this.constants_.MEDIUM_LARGE_PADDING:c&&a.blockRendering.Types.isStatementInput(c)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!a.blockRendering.Types.isInput(o)&&(!c||a.blockRendering.Types.isStatementInput(c)))return a.blockRendering.Types.isField(o)&&o.isEditable?this.constants_.MEDIUM_PADDING:a.blockRendering.Types.isIcon(o)?2*this.constants_.LARGE_PADDING+1:a.blockRendering.Types.isHat(o)?this.constants_.NO_PADDING:a.blockRendering.Types.isPreviousOrNextConnection(o)?this.constants_.LARGE_PADDING:a.blockRendering.Types.isLeftRoundedCorner(o)?this.constants_.MIN_BLOCK_WIDTH:a.blockRendering.Types.isJaggedEdge(o)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(a.blockRendering.Types.isInput(o)&&!c){if(a.blockRendering.Types.isExternalInput(o))return this.constants_.NO_PADDING;if(a.blockRendering.Types.isInlineInput(o))return this.constants_.LARGE_PADDING;if(a.blockRendering.Types.isStatementInput(o))return this.constants_.NO_PADDING}if(!a.blockRendering.Types.isInput(o)&&c&&a.blockRendering.Types.isInput(c)){if(a.blockRendering.Types.isField(o)&&o.isEditable){if(a.blockRendering.Types.isInlineInput(c)||a.blockRendering.Types.isExternalInput(c))return this.constants_.SMALL_PADDING}else{if(a.blockRendering.Types.isInlineInput(c)||a.blockRendering.Types.isExternalInput(c))return this.constants_.MEDIUM_LARGE_PADDING;if(a.blockRendering.Types.isStatementInput(c))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(a.blockRendering.Types.isIcon(o)&&c&&!a.blockRendering.Types.isInput(c))return this.constants_.LARGE_PADDING;if(a.blockRendering.Types.isInlineInput(o)&&c&&a.blockRendering.Types.isField(c))return c.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(a.blockRendering.Types.isLeftSquareCorner(o)&&c){if(a.blockRendering.Types.isHat(c))return this.constants_.NO_PADDING;if(a.blockRendering.Types.isPreviousConnection(c))return c.notchOffset;if(a.blockRendering.Types.isNextConnection(c))return c.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(a.blockRendering.Types.isLeftRoundedCorner(o)&&c){if(a.blockRendering.Types.isPreviousConnection(c))return c.notchOffset-this.constants_.CORNER_RADIUS;if(a.blockRendering.Types.isNextConnection(c))return c.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return a.blockRendering.Types.isField(o)&&c&&a.blockRendering.Types.isField(c)&&o.isEditable==c.isEditable||c&&a.blockRendering.Types.isJaggedEdge(c)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},a.geras.RenderInfo.prototype.getSpacerRowHeight_=function(o,c){return a.blockRendering.Types.isTopRow(o)&&a.blockRendering.Types.isBottomRow(c)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:a.blockRendering.Types.isTopRow(o)||a.blockRendering.Types.isBottomRow(c)?this.constants_.NO_PADDING:o.hasExternalInput&&c.hasExternalInput?this.constants_.LARGE_PADDING:!o.hasStatement&&c.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:o.hasStatement&&c.hasStatement||!o.hasStatement&&c.hasDummyInput||o.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},a.geras.RenderInfo.prototype.getElemCenterline_=function(o,c){if(a.blockRendering.Types.isSpacer(c))return o.yPos+c.height/2;if(a.blockRendering.Types.isBottomRow(o))return o=o.yPos+o.height-o.descenderHeight,a.blockRendering.Types.isNextConnection(c)?o+c.height/2:o-c.height/2;if(a.blockRendering.Types.isTopRow(o))return a.blockRendering.Types.isHat(c)?o.capline-c.height/2:o.capline+c.height/2;var d=o.yPos;return a.blockRendering.Types.isField(c)||a.blockRendering.Types.isIcon(c)?(d+=c.height/2,(o.hasInlineInput||o.hasStatement)&&c.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=o.height&&(d+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):d=a.blockRendering.Types.isInlineInput(c)?d+c.height/2:d+o.height/2,d},a.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var f,o=0,c=null,d=this.rows.length-1;f=this.rows[d];d--)f.nextRightEdge=o,a.blockRendering.Types.isInputRow(f)&&(f.hasStatement&&this.alignStatementRow_(f),c&&c.hasStatement&&f.width<c.width?f.nextRightEdge=c.width:o=f.width,c=f);for(d=o=0;f=this.rows[d];d++)f.hasStatement?o=this.getDesiredRowWidth_(f):a.blockRendering.Types.isSpacer(f)?f.width=Math.max(o,f.nextRightEdge):(0<(o=Math.max(o,f.nextRightEdge)-f.width)&&this.addAlignmentPadding_(f,o),o=f.width)}else a.geras.RenderInfo.superClass_.alignRowElements_.call(this)},a.geras.RenderInfo.prototype.getDesiredRowWidth_=function(o){return this.isInline&&o.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:a.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,o)},a.geras.RenderInfo.prototype.finalize_=function(){for(var f,o=0,c=0,d=0;f=this.rows[d];d++){f.yPos=c,f.xPos=this.startX,c+=f.height,o=Math.max(o,f.widthWithConnectedBlocks);var v=c-this.topRow.ascenderHeight;f==this.bottomRow&&v<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=v=this.constants_.MIN_BLOCK_HEIGHT-v,c+=v),this.recordElemPositions_(f)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=Math.max(o,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=c-this.bottomRow.descenderHeight,this.widthWithChildren=o+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=c+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},a.geras.Drawer=function(o,c){a.geras.Drawer.superClass_.constructor.call(this,o,c),this.highlighter_=new a.geras.Highlighter(c)},a.utils.object.inherits(a.geras.Drawer,a.blockRendering.Drawer),a.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var o=this.block_.pathObject;o.setPath(this.outlinePath_+"\n"+this.inlinePath_),o.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&o.flipRTL(),a.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},a.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),a.geras.Drawer.superClass_.drawTop_.call(this)},a.geras.Drawer.prototype.drawJaggedEdge_=function(o){this.highlighter_.drawJaggedEdge_(o),a.geras.Drawer.superClass_.drawJaggedEdge_.call(this,o)},a.geras.Drawer.prototype.drawValueInput_=function(o){this.highlighter_.drawValueInput(o),a.geras.Drawer.superClass_.drawValueInput_.call(this,o)},a.geras.Drawer.prototype.drawStatementInput_=function(o){this.highlighter_.drawStatementInput(o),a.geras.Drawer.superClass_.drawStatementInput_.call(this,o)},a.geras.Drawer.prototype.drawRightSideRow_=function(o){this.highlighter_.drawRightSideRow(o),this.outlinePath_+=a.utils.svgPaths.lineOnAxis("H",o.xPos+o.width)+a.utils.svgPaths.lineOnAxis("V",o.yPos+o.height)},a.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),a.geras.Drawer.superClass_.drawBottom_.call(this)},a.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),a.geras.Drawer.superClass_.drawLeft_.call(this)},a.geras.Drawer.prototype.drawInlineInput_=function(o){this.highlighter_.drawInlineInput(o),a.geras.Drawer.superClass_.drawInlineInput_.call(this,o)},a.geras.Drawer.prototype.positionInlineInputConnection_=function(o){if(o.connectionModel){var d=o.xPos+o.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(d*=-1),o.connectionModel.setOffsetInBlock(d,o.centerline-o.height/2+o.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},a.geras.Drawer.prototype.positionStatementInputConnection_=function(o){var c=o.getLastInput();if(c.connectionModel){var d=o.xPos+o.statementEdge+c.notchOffset;c.connectionModel.setOffsetInBlock(d=this.info_.RTL?-1*d:d+this.constants_.DARK_PATH_OFFSET,o.yPos+this.constants_.DARK_PATH_OFFSET)}},a.geras.Drawer.prototype.positionExternalValueConnection_=function(o){var c=o.getLastInput();if(c.connectionModel){var d=o.xPos+o.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(d*=-1),c.connectionModel.setOffsetInBlock(d,o.yPos)}},a.geras.Drawer.prototype.positionNextConnection_=function(){var o=this.info_.bottomRow;if(o.connection){var c=o.connection,d=c.xPos;c.connectionModel.setOffsetInBlock((this.info_.RTL?-d:d)+this.constants_.DARK_PATH_OFFSET/2,o.baseline+this.constants_.DARK_PATH_OFFSET)}},a.geras.HighlightConstantProvider=function(o){this.constantProvider=o,this.OFFSET=.5,this.START_POINT=a.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},a.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},a.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var o=this.constantProvider.CORNER_RADIUS,c=this.OFFSET,d=(1-Math.SQRT1_2)*(o+c)-c,f=a.utils.svgPaths.moveBy(d,d)+a.utils.svgPaths.arc("a","0 0,0",o,a.utils.svgPaths.point(-d-c,o-d)),v=a.utils.svgPaths.arc("a","0 0,0",o+c,a.utils.svgPaths.point(o+c,o+c)),y=a.utils.svgPaths.moveBy(d,-d)+a.utils.svgPaths.arc("a","0 0,0",o+c,a.utils.svgPaths.point(o-d,d+c));return{width:o+c,height:o,pathTop:function(D){return D?f:""},pathBottom:function(D){return D?v:y}}},a.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var o=this.constantProvider.CORNER_RADIUS,c=this.OFFSET,d=(1-Math.SQRT1_2)*(o-c)+c,f=a.utils.svgPaths.moveBy(d,d)+a.utils.svgPaths.arc("a","0 0,1",o-c,a.utils.svgPaths.point(o-d,-d+c)),v=a.utils.svgPaths.moveBy(c,o)+a.utils.svgPaths.arc("a","0 0,1",o-c,a.utils.svgPaths.point(o,-o+c)),y=-d,D=a.utils.svgPaths.moveBy(d,y)+a.utils.svgPaths.arc("a","0 0,1",o-c,a.utils.svgPaths.point(-d+c,-y-o));return{height:o,topLeft:function(O){return O?f:v},bottomLeft:function(){return D}}},a.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var o=this.constantProvider.TAB_WIDTH,c=this.constantProvider.TAB_HEIGHT,d=a.utils.svgPaths.moveBy(-2,3.4-c)+a.utils.svgPaths.lineTo(-.45*o,-2.1),f=a.utils.svgPaths.lineOnAxis("v",2.5)+a.utils.svgPaths.moveBy(.97*-o,2.5)+a.utils.svgPaths.curve("q",[a.utils.svgPaths.point(.05*-o,10),a.utils.svgPaths.point(.3*o,9.5)])+a.utils.svgPaths.moveBy(.67*o,-1.9)+a.utils.svgPaths.lineOnAxis("v",2.5),v=a.utils.svgPaths.lineOnAxis("v",-1.5)+a.utils.svgPaths.moveBy(-.92*o,-.5)+a.utils.svgPaths.curve("q",[a.utils.svgPaths.point(-.19*o,-5.5),a.utils.svgPaths.point(0,-11)])+a.utils.svgPaths.moveBy(.92*o,1),y=a.utils.svgPaths.moveBy(-5,c-.7)+a.utils.svgPaths.lineTo(.46*o,-2.1);return{width:o,height:c,pathUp:function(D){return D?d:v},pathDown:function(D){return D?f:y}}},a.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:a.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},a.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:a.utils.svgPaths.lineTo(5.1,2.6)+a.utils.svgPaths.moveBy(-10.2,6.8)+a.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},a.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var o=this.constantProvider.START_HAT.height,c=a.utils.svgPaths.moveBy(25,-8.7)+a.utils.svgPaths.curve("c",[a.utils.svgPaths.point(29.7,-6.2),a.utils.svgPaths.point(57.2,-.5),a.utils.svgPaths.point(75,8.7)]),d=a.utils.svgPaths.curve("c",[a.utils.svgPaths.point(17.8,-9.2),a.utils.svgPaths.point(45.3,-14.9),a.utils.svgPaths.point(75,-8.7)])+a.utils.svgPaths.moveTo(100.5,o+.5);return{path:function(f){return f?c:d}}},a.geras.PathObject=function(o,c,d){this.constants=d,this.svgRoot=o,this.svgPathDark=a.utils.dom.createSvgElement(a.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=a.utils.dom.createSvgElement(a.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=a.utils.dom.createSvgElement(a.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=c},a.utils.object.inherits(a.geras.PathObject,a.blockRendering.PathObject),a.geras.PathObject.prototype.setPath=function(o){this.svgPath.setAttribute("d",o),this.svgPathDark.setAttribute("d",o)},a.geras.PathObject.prototype.setHighlightPath=function(o){this.svgPathLight.setAttribute("d",o)},a.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},a.geras.PathObject.prototype.applyColour=function(o){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),a.geras.PathObject.superClass_.applyColour.call(this,o),this.svgPath.setAttribute("stroke","none")},a.geras.PathObject.prototype.setStyle=function(o){this.style=o,this.colourDark=a.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},a.geras.PathObject.prototype.updateHighlighted=function(o){o?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},a.geras.PathObject.prototype.updateShadow_=function(o){o&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},a.geras.PathObject.prototype.updateDisabled_=function(o){a.geras.PathObject.superClass_.updateDisabled_.call(this,o),o&&this.svgPath.setAttribute("stroke","none")},a.geras.Renderer=function(o){a.geras.Renderer.superClass_.constructor.call(this,o),this.highlightConstants_=null},a.utils.object.inherits(a.geras.Renderer,a.blockRendering.Renderer),a.geras.Renderer.prototype.init=function(o,c){a.geras.Renderer.superClass_.init.call(this,o,c),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},a.geras.Renderer.prototype.refreshDom=function(o,c){a.geras.Renderer.superClass_.refreshDom.call(this,o,c),this.getHighlightConstants().init()},a.geras.Renderer.prototype.makeConstants_=function(){return new a.geras.ConstantProvider},a.geras.Renderer.prototype.makeRenderInfo_=function(o){return new a.geras.RenderInfo(this,o)},a.geras.Renderer.prototype.makeDrawer_=function(o,c){return new a.geras.Drawer(o,c)},a.geras.Renderer.prototype.makePathObject=function(o,c){return new a.geras.PathObject(o,c,this.getConstants())},a.geras.Renderer.prototype.makeHighlightConstants_=function(){return new a.geras.HighlightConstantProvider(this.getConstants())},a.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},a.blockRendering.register("geras",a.geras.Renderer),a.thrasos={},a.thrasos.RenderInfo=function(o,c){a.thrasos.RenderInfo.superClass_.constructor.call(this,o,c)},a.utils.object.inherits(a.thrasos.RenderInfo,a.blockRendering.RenderInfo),a.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},a.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var d,o=!1,c=0;d=this.rows[c];c++)d.hasExternalInput&&(o=!0);for(c=0;d=this.rows[c];c++){var f=d.elements;d.elements=[],d.startsWithElemSpacer()&&d.elements.push(new a.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,f[0])));for(var v=0;v<f.length-1;v++){d.elements.push(f[v]);var y=this.getInRowSpacing_(f[v],f[v+1]);d.elements.push(new a.blockRendering.InRowSpacer(this.constants_,y))}d.elements.push(f[f.length-1]),d.endsWithElemSpacer()&&(y=this.getInRowSpacing_(f[f.length-1],null),o&&d.hasDummyInput&&(y+=this.constants_.TAB_WIDTH),d.elements.push(new a.blockRendering.InRowSpacer(this.constants_,y)))}},a.thrasos.RenderInfo.prototype.getInRowSpacing_=function(o,c){if(!o)return c&&a.blockRendering.Types.isField(c)&&c.isEditable?this.constants_.MEDIUM_PADDING:c&&a.blockRendering.Types.isInlineInput(c)?this.constants_.MEDIUM_LARGE_PADDING:c&&a.blockRendering.Types.isStatementInput(c)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!a.blockRendering.Types.isInput(o)&&!c)return a.blockRendering.Types.isField(o)&&o.isEditable?this.constants_.MEDIUM_PADDING:a.blockRendering.Types.isIcon(o)?2*this.constants_.LARGE_PADDING+1:a.blockRendering.Types.isHat(o)?this.constants_.NO_PADDING:a.blockRendering.Types.isPreviousOrNextConnection(o)?this.constants_.LARGE_PADDING:a.blockRendering.Types.isLeftRoundedCorner(o)?this.constants_.MIN_BLOCK_WIDTH:a.blockRendering.Types.isJaggedEdge(o)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(a.blockRendering.Types.isInput(o)&&!c){if(a.blockRendering.Types.isExternalInput(o))return this.constants_.NO_PADDING;if(a.blockRendering.Types.isInlineInput(o))return this.constants_.LARGE_PADDING;if(a.blockRendering.Types.isStatementInput(o))return this.constants_.NO_PADDING}if(!a.blockRendering.Types.isInput(o)&&c&&a.blockRendering.Types.isInput(c)){if(a.blockRendering.Types.isField(o)&&o.isEditable){if(a.blockRendering.Types.isInlineInput(c)||a.blockRendering.Types.isExternalInput(c))return this.constants_.SMALL_PADDING}else{if(a.blockRendering.Types.isInlineInput(c)||a.blockRendering.Types.isExternalInput(c))return this.constants_.MEDIUM_LARGE_PADDING;if(a.blockRendering.Types.isStatementInput(c))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(a.blockRendering.Types.isIcon(o)&&c&&!a.blockRendering.Types.isInput(c))return this.constants_.LARGE_PADDING;if(a.blockRendering.Types.isInlineInput(o)&&c&&a.blockRendering.Types.isField(c))return c.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(a.blockRendering.Types.isLeftSquareCorner(o)&&c){if(a.blockRendering.Types.isHat(c))return this.constants_.NO_PADDING;if(a.blockRendering.Types.isPreviousConnection(c)||a.blockRendering.Types.isNextConnection(c))return c.notchOffset}return a.blockRendering.Types.isLeftRoundedCorner(o)&&c?c.notchOffset-this.constants_.CORNER_RADIUS:a.blockRendering.Types.isField(o)&&c&&a.blockRendering.Types.isField(c)&&o.isEditable==c.isEditable||c&&a.blockRendering.Types.isJaggedEdge(c)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},a.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(o,c){return a.blockRendering.Types.isTopRow(o)&&a.blockRendering.Types.isBottomRow(c)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:a.blockRendering.Types.isTopRow(o)||a.blockRendering.Types.isBottomRow(c)?this.constants_.NO_PADDING:o.hasExternalInput&&c.hasExternalInput?this.constants_.LARGE_PADDING:!o.hasStatement&&c.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:o.hasStatement&&c.hasStatement||o.hasDummyInput||c.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},a.thrasos.RenderInfo.prototype.getElemCenterline_=function(o,c){if(a.blockRendering.Types.isSpacer(c))return o.yPos+c.height/2;if(a.blockRendering.Types.isBottomRow(o))return o=o.yPos+o.height-o.descenderHeight,a.blockRendering.Types.isNextConnection(c)?o+c.height/2:o-c.height/2;if(a.blockRendering.Types.isTopRow(o))return a.blockRendering.Types.isHat(c)?o.capline-c.height/2:o.capline+c.height/2;var d=o.yPos;return a.blockRendering.Types.isField(c)&&o.hasStatement?d+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+c.height/2):d+o.height/2},a.thrasos.RenderInfo.prototype.finalize_=function(){for(var f,o=0,c=0,d=0;f=this.rows[d];d++){f.yPos=c,f.xPos=this.startX,c+=f.height,o=Math.max(o,f.widthWithConnectedBlocks);var v=c-this.topRow.ascenderHeight;f==this.bottomRow&&v<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=v=this.constants_.MIN_BLOCK_HEIGHT-v,c+=v),this.recordElemPositions_(f)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=Math.max(o,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=c-this.bottomRow.descenderHeight,this.widthWithChildren=o+this.startX,this.height=c,this.startY=this.topRow.capline},a.thrasos.Renderer=function(o){a.thrasos.Renderer.superClass_.constructor.call(this,o)},a.utils.object.inherits(a.thrasos.Renderer,a.blockRendering.Renderer),a.thrasos.Renderer.prototype.makeRenderInfo_=function(o){return new a.thrasos.RenderInfo(this,o)},a.blockRendering.register("thrasos",a.thrasos.Renderer),a.zelos={},a.zelos.ConstantProvider=function(){a.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},a.utils.object.inherits(a.zelos.ConstantProvider,a.blockRendering.ConstantProvider),a.zelos.ConstantProvider.prototype.setFontConstants_=function(o){a.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,o),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},a.zelos.ConstantProvider.prototype.init=function(){a.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},a.zelos.ConstantProvider.prototype.setDynamicProperties_=function(o){a.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,o),this.SELECTED_GLOW_COLOUR=o.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var c=Number(o.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=c&&!isNaN(c)?c:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=o.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(o=Number(o.getComponentStyle("replacementGlowSize")))&&!isNaN(o)?o:this.REPLACEMENT_GLOW_SIZE},a.zelos.ConstantProvider.prototype.dispose=function(){a.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&a.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&a.utils.dom.removeNode(this.replacementGlowFilter_)},a.zelos.ConstantProvider.prototype.makeStartHat=function(){var o=this.START_HAT_HEIGHT,c=this.START_HAT_WIDTH;return{height:o,width:c,path:a.utils.svgPaths.curve("c",[a.utils.svgPaths.point(25,-o),a.utils.svgPaths.point(71,-o),a.utils.svgPaths.point(c,0)])}},a.zelos.ConstantProvider.prototype.makeHexagonal=function(){function o(d,f,v){var y=d/2;return a.utils.svgPaths.lineTo(-(v=v?-1:1)*(y=y>c?c:y),d=(f?-1:1)*d/2)+a.utils.svgPaths.lineTo(v*y,d)}var c=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(d){return(d/=2)>c?c:d},height:function(d){return d},connectionOffsetY:function(d){return d/2},connectionOffsetX:function(d){return-d},pathDown:function(d){return o(d,!1,!1)},pathUp:function(d){return o(d,!0,!1)},pathRightDown:function(d){return o(d,!1,!0)},pathRightUp:function(d){return o(d,!1,!0)}}},a.zelos.ConstantProvider.prototype.makeRounded=function(){function o(f,v,y){var D=f>d?f-d:0;return a.utils.svgPaths.arc("a","0 0,1",f=(f>d?d:f)/2,a.utils.svgPaths.point((v?-1:1)*f,(v?-1:1)*f))+a.utils.svgPaths.lineOnAxis("v",(y?1:-1)*D)+a.utils.svgPaths.arc("a","0 0,1",f,a.utils.svgPaths.point((v?1:-1)*f,(v?-1:1)*f))}var c=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,d=2*c;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(f){return(f/=2)>c?c:f},height:function(f){return f},connectionOffsetY:function(f){return f/2},connectionOffsetX:function(f){return-f},pathDown:function(f){return o(f,!1,!1)},pathUp:function(f){return o(f,!0,!1)},pathRightDown:function(f){return o(f,!1,!0)},pathRightUp:function(f){return o(f,!1,!0)}}},a.zelos.ConstantProvider.prototype.makeSquared=function(){function o(d,f,v){return d-=2*c,a.utils.svgPaths.arc("a","0 0,1",c,a.utils.svgPaths.point((f?-1:1)*c,(f?-1:1)*c))+a.utils.svgPaths.lineOnAxis("v",(v?1:-1)*d)+a.utils.svgPaths.arc("a","0 0,1",c,a.utils.svgPaths.point((f?1:-1)*c,(f?-1:1)*c))}var c=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(d){return c},height:function(d){return d},connectionOffsetY:function(d){return d/2},connectionOffsetX:function(d){return-d},pathDown:function(d){return o(d,!1,!1)},pathUp:function(d){return o(d,!0,!1)},pathRightDown:function(d){return o(d,!1,!0)},pathRightUp:function(d){return o(d,!1,!0)}}},a.zelos.ConstantProvider.prototype.shapeFor=function(o){var c=o.getCheck();switch(!c&&o.targetConnection&&(c=o.targetConnection.getCheck()),o.type){case a.connectionTypes.INPUT_VALUE:case a.connectionTypes.OUTPUT_VALUE:if(null!=(o=o.getSourceBlock().getOutputShape()))switch(o){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return c&&-1!=c.indexOf("Boolean")?this.HEXAGONAL:(c&&-1!=c.indexOf("Number")||c&&c.indexOf("String"),this.ROUNDED);case a.connectionTypes.PREVIOUS_STATEMENT:case a.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},a.zelos.ConstantProvider.prototype.makeNotch=function(){function o(X){return a.utils.svgPaths.curve("c",[a.utils.svgPaths.point(X*v/2,0),a.utils.svgPaths.point(X*v*3/4,D/2),a.utils.svgPaths.point(X*v,D)])+a.utils.svgPaths.line([a.utils.svgPaths.point(X*v,y)])+a.utils.svgPaths.curve("c",[a.utils.svgPaths.point(X*v/4,D/2),a.utils.svgPaths.point(X*v/2,D),a.utils.svgPaths.point(X*v,D)])+a.utils.svgPaths.lineOnAxis("h",X*f)+a.utils.svgPaths.curve("c",[a.utils.svgPaths.point(X*v/2,0),a.utils.svgPaths.point(X*v*3/4,-D/2),a.utils.svgPaths.point(X*v,-D)])+a.utils.svgPaths.line([a.utils.svgPaths.point(X*v,-y)])+a.utils.svgPaths.curve("c",[a.utils.svgPaths.point(X*v/4,-D/2),a.utils.svgPaths.point(X*v/2,-D),a.utils.svgPaths.point(X*v,-D)])}var c=this.NOTCH_WIDTH,d=this.NOTCH_HEIGHT,f=c/3,v=f/3,y=d/2,D=y/2,O=o(1),U=o(-1);return{type:this.SHAPES.NOTCH,width:c,height:d,pathLeft:O,pathRight:U}},a.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var o=this.CORNER_RADIUS,c=a.utils.svgPaths.arc("a","0 0,0",o,a.utils.svgPaths.point(-o,o)),d=a.utils.svgPaths.arc("a","0 0,1",o,a.utils.svgPaths.point(-o,o));return{width:o,height:o,pathTop:c,pathBottom:a.utils.svgPaths.arc("a","0 0,0",o,a.utils.svgPaths.point(o,o)),rightWidth:o,rightHeight:o,pathTopRight:d,pathBottomRight:a.utils.svgPaths.arc("a","0 0,1",o,a.utils.svgPaths.point(o,o))}},a.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(o){return a.utils.colour.blend("#000",o,.15)||o},a.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(o){return a.utils.colour.blend("#000",o,.25)||o},a.zelos.ConstantProvider.prototype.createDom=function(o,c,d){a.zelos.ConstantProvider.superClass_.createDom.call(this,o,c,d),o=a.utils.dom.createSvgElement(a.utils.Svg.DEFS,{},o),c=a.utils.dom.createSvgElement(a.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},o),a.utils.dom.createSvgElement(a.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},c),d=a.utils.dom.createSvgElement(a.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},c),a.utils.dom.createSvgElement(a.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},d),a.utils.dom.createSvgElement(a.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},c),a.utils.dom.createSvgElement(a.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},c),this.selectedGlowFilterId=c.id,this.selectedGlowFilter_=c,o=a.utils.dom.createSvgElement(a.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},o),a.utils.dom.createSvgElement(a.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},o),c=a.utils.dom.createSvgElement(a.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},o),a.utils.dom.createSvgElement(a.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},c),a.utils.dom.createSvgElement(a.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},o),a.utils.dom.createSvgElement(a.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},o),a.utils.dom.createSvgElement(a.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},o),this.replacementGlowFilterId=o.id,this.replacementGlowFilter_=o},a.zelos.ConstantProvider.prototype.getCSS_=function(o){return[o+" .blocklyText,",o+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",o+" .blocklyText {","fill: #fff;","}",o+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",o+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",o+" .blocklyNonEditableText>text,",o+" .blocklyEditableText>text,",o+" .blocklyNonEditableText>g>text,",o+" .blocklyEditableText>g>text {","fill: #575E75;","}",o+" .blocklyFlyoutLabelText {","fill: #575E75;","}",o+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",o+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",o+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",o+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",o+" .blocklyDropdownText {","fill: #fff !important;","}",o+".blocklyWidgetDiv .goog-menuitem,",o+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",o+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",o+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",o+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",o+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},a.zelos.TopRow=function(o){a.zelos.TopRow.superClass_.constructor.call(this,o)},a.utils.object.inherits(a.zelos.TopRow,a.blockRendering.TopRow),a.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},a.zelos.TopRow.prototype.hasLeftSquareCorner=function(o){return!!o.outputConnection||(o.hat?"cap"===o.hat:this.constants_.ADD_START_HATS)&&!o.outputConnection&&!o.previousConnection},a.zelos.TopRow.prototype.hasRightSquareCorner=function(o){return!!o.outputConnection&&!o.statementInputCount&&!o.nextConnection},a.zelos.BottomRow=function(o){a.zelos.BottomRow.superClass_.constructor.call(this,o)},a.utils.object.inherits(a.zelos.BottomRow,a.blockRendering.BottomRow),a.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},a.zelos.BottomRow.prototype.hasLeftSquareCorner=function(o){return!!o.outputConnection},a.zelos.BottomRow.prototype.hasRightSquareCorner=function(o){return!!o.outputConnection&&!o.statementInputCount&&!o.nextConnection},a.zelos.RightConnectionShape=function(o){a.zelos.RightConnectionShape.superClass_.constructor.call(this,o),this.type|=a.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},a.utils.object.inherits(a.zelos.RightConnectionShape,a.blockRendering.Measurable),a.zelos.RenderInfo=function(o,c){a.zelos.RenderInfo.superClass_.constructor.call(this,o,c),this.topRow=new a.zelos.TopRow(this.constants_),this.bottomRow=new a.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!c.getInputsInline()||c.isCollapsed(),this.hasStatementInput=0<c.statementInputCount,this.rightSide=this.outputConnection?new a.zelos.RightConnectionShape(this.constants_):null},a.utils.object.inherits(a.zelos.RenderInfo,a.blockRendering.RenderInfo),a.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},a.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},a.zelos.RenderInfo.prototype.shouldStartNewRow_=function(o,c){return!!c&&(o.type==a.inputTypes.STATEMENT||c.type==a.inputTypes.STATEMENT||(o.type==a.inputTypes.VALUE||o.type==a.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},a.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(o){return o.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):a.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,o)},a.zelos.RenderInfo.prototype.getInRowSpacing_=function(o,c){return o&&c||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!o&&c&&a.blockRendering.Types.isStatementInput(c)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:o&&a.blockRendering.Types.isLeftRoundedCorner(o)&&c&&(a.blockRendering.Types.isPreviousConnection(c)||a.blockRendering.Types.isNextConnection(c))?c.notchOffset-this.constants_.CORNER_RADIUS:o&&a.blockRendering.Types.isLeftSquareCorner(o)&&c&&a.blockRendering.Types.isHat(c)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},a.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(o,c){if(a.blockRendering.Types.isTopRow(o)&&a.blockRendering.Types.isBottomRow(c))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var d=a.blockRendering.Types.isInputRow(o)&&o.hasStatement,f=a.blockRendering.Types.isInputRow(c)&&c.hasStatement;return f||d?(o=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),f&&d?Math.max(o,this.constants_.DUMMY_INPUT_MIN_HEIGHT):o):a.blockRendering.Types.isTopRow(o)?o.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):a.blockRendering.Types.isBottomRow(c)?this.outputConnection?!c.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},a.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(o,c){var d=this.width-this.startX;return a.blockRendering.Types.isInputRow(o)&&o.hasStatement||a.blockRendering.Types.isInputRow(c)&&c.hasStatement?Math.max(d,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):d},a.zelos.RenderInfo.prototype.getElemCenterline_=function(o,c){if(o.hasStatement&&!a.blockRendering.Types.isSpacer(c)&&!a.blockRendering.Types.isStatementInput(c))return o.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(a.blockRendering.Types.isInlineInput(c)){var d=c.connectedBlock;if(d&&d.outputConnection&&d.nextConnection)return o.yPos+d.height/2}return a.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,o,c)},a.zelos.RenderInfo.prototype.addInput_=function(o,c){o.type==a.inputTypes.DUMMY&&c.hasDummyInput&&c.align==a.constants.ALIGN.LEFT&&o.align==a.constants.ALIGN.RIGHT&&(c.rightAlignedDummyInput=o),a.zelos.RenderInfo.superClass_.addInput_.call(this,o,c)},a.zelos.RenderInfo.prototype.addAlignmentPadding_=function(o,c){if(o.rightAlignedDummyInput){for(var d,v,f=0;(v=o.elements[f])&&(a.blockRendering.Types.isSpacer(v)&&(d=v),!a.blockRendering.Types.isField(v)||v.parentInput!=o.rightAlignedDummyInput);f++);if(d)return d.width+=c,void(o.width+=c)}a.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,o,c)},a.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var o=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,c=o,d=2;d<this.rows.length-1;d+=2){var f=this.rows[d-1],v=this.rows[d],y=this.rows[d+1];if(f=2==d?!!this.topRow.hasPreviousConnection:!!f.followsStatement,y=d+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!y.precedesStatement,a.blockRendering.Types.isInputRow(v)&&v.hasStatement)v.measure(),c=v.width-v.getLastInput().width+o;else if(f&&(2==d||y)&&a.blockRendering.Types.isInputRow(v)&&!v.hasStatement){y=v.xPos,f=null;for(var O,D=0;O=v.elements[D];D++)a.blockRendering.Types.isSpacer(O)&&(f=O),!(f&&(a.blockRendering.Types.isField(O)||a.blockRendering.Types.isInput(O))&&y<c)||a.blockRendering.Types.isField(O)&&(O.field instanceof a.FieldLabel||O.field instanceof a.FieldImage)||(f.width+=c-y),y+=O.width}}},a.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var d,o=0,c=0;d=this.rows[c];c++)d.yPos=o,o+=d.height;this.height=o,o=this.outputConnection.shape.height(c=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),c=this.outputConnection.shape.width(c),this.outputConnection.height=o,this.outputConnection.width=c,this.outputConnection.startX=c,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(o),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(c),d=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(d=c,this.rightSide.height=o,this.rightSide.width=d,this.rightSide.centerline=o/2,this.rightSide.xPos=this.width+d),this.startX=c,this.width+=c+d,this.widthWithChildren+=c+d}},a.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var d,o=0,c=0;d=this.rows[c];c++)if(a.blockRendering.Types.isInputRow(d)){o=d.elements[d.elements.length-2];var f=this.getNegativeSpacing_(d.elements[1]),v=this.getNegativeSpacing_(o),y=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(o=f+v)<y&&(f=(o=this.width-y)/2,v=o/2),d.elements.unshift(new a.blockRendering.InRowSpacer(this.constants_,-f)),d.elements.push(new a.blockRendering.InRowSpacer(this.constants_,-v))}if(o)for(this.width-=o,this.widthWithChildren-=o,this.rightSide.xPos-=o,c=0;d=this.rows[c];c++)a.blockRendering.Types.isTopOrBottomRow(d)&&(d.elements[1].width-=o,d.elements[1].widthWithConnectedBlocks-=o),d.width-=o,d.widthWithConnectedBlocks-=o}},a.zelos.RenderInfo.prototype.getNegativeSpacing_=function(o){if(!o)return 0;var c=this.outputConnection.width,d=this.outputConnection.shape.type,f=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(d){case f.SHAPES.ROUND:return c-(d=this.height/2>(d=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?d:this.height/2)*(1-Math.sin(Math.acos((d-this.constants_.SMALL_PADDING)/d)));default:return 0}if(a.blockRendering.Types.isInlineInput(o)){var v=o.connectedBlock;return o=v?v.pathObject.outputShapeType:o.shape.type,v&&v.outputConnection&&(v.statementInputCount||v.nextConnection)||d==f.SHAPES.HEXAGONAL&&d!=o?0:c-this.constants_.SHAPE_IN_SHAPE_PADDING[d][o]}return a.blockRendering.Types.isField(o)?d==f.SHAPES.ROUND&&o.field instanceof a.FieldTextInput?c-2.75*f.GRID_UNIT:c-this.constants_.SHAPE_IN_SHAPE_PADDING[d][0]:a.blockRendering.Types.isIcon(o)?this.constants_.SMALL_PADDING:0},a.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var o=2;o<this.rows.length-1;o+=2){var c=this.rows[o-1],d=this.rows[o],f=this.rows[o+1],v=2==o,y=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!f.precedesStatement;if(v?this.topRow.hasPreviousConnection:c.followsStatement){var D=3==d.elements.length&&(d.elements[1].field instanceof a.FieldLabel||d.elements[1].field instanceof a.FieldImage);if(!v&&D)c.height-=this.constants_.SMALL_PADDING,f.height-=this.constants_.SMALL_PADDING,d.height-=this.constants_.MEDIUM_PADDING;else if(v||y){if(y){for(v=!1,y=0;D=d.elements[y];y++)if(a.blockRendering.Types.isInlineInput(D)&&D.connectedBlock&&!D.connectedBlock.isShadow()&&40<=D.connectedBlock.getHeightWidth().height){v=!0;break}v&&(c.height-=this.constants_.SMALL_PADDING,f.height-=this.constants_.SMALL_PADDING)}}else c.height+=this.constants_.SMALL_PADDING}}},a.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),a.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},a.zelos.Drawer=function(o,c){a.zelos.Drawer.superClass_.constructor.call(this,o,c)},a.utils.object.inherits(a.zelos.Drawer,a.blockRendering.Drawer),a.zelos.Drawer.prototype.draw=function(){var o=this.block_.pathObject;o.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),o.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&o.flipRTL(),a.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(o.outputShapeType=this.info_.outputConnection.shape.type),o.endDrawing()},a.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):a.zelos.Drawer.superClass_.drawOutline_.call(this)},a.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():a.zelos.Drawer.superClass_.drawLeft_.call(this)},a.zelos.Drawer.prototype.drawRightSideRow_=function(o){if(!(0>=o.height))if(o.precedesStatement||o.followsStatement){var c=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(o.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(c=o.height-(o.precedesStatement?c:0))?a.utils.svgPaths.lineOnAxis("V",o.yPos+c):"")+(o.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=a.utils.svgPaths.lineOnAxis("V",o.yPos+o.height)},a.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},a.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},a.zelos.Drawer.prototype.drawFlatTop_=function(){var o=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=a.utils.svgPaths.moveBy(o.xPos,this.info_.startY),this.outlinePath_+=a.utils.svgPaths.lineOnAxis("h",o.width)},a.zelos.Drawer.prototype.drawFlatBottom_=function(){var o=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=a.utils.svgPaths.lineOnAxis("V",o.baseline),this.outlinePath_+=a.utils.svgPaths.lineOnAxis("h",-o.width)},a.zelos.Drawer.prototype.drawInlineInput_=function(o){this.positionInlineInputConnection_(o);var c=o.input.name;if(!o.connectedBlock&&!this.info_.isInsertionMarker){var d=o.width-2*o.connectionWidth;o=a.utils.svgPaths.moveTo(o.xPos+o.connectionWidth,o.centerline-o.height/2)+a.utils.svgPaths.lineOnAxis("h",d)+o.shape.pathRightDown(o.height)+a.utils.svgPaths.lineOnAxis("h",-d)+o.shape.pathUp(o.height)+"z",this.block_.pathObject.setOutlinePath(c,o)}},a.zelos.Drawer.prototype.drawStatementInput_=function(o){var c=o.getLastInput(),d=c.xPos+c.notchOffset+c.shape.width,f=c.shape.pathRight+a.utils.svgPaths.lineOnAxis("h",-(c.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,v=o.height-2*this.constants_.INSIDE_CORNERS.height;c=this.constants_.INSIDE_CORNERS.pathBottom+a.utils.svgPaths.lineOnAxis("h",c.notchOffset-this.constants_.INSIDE_CORNERS.width)+(c.connectedBottomNextConnection?"":c.shape.pathLeft),this.outlinePath_+=a.utils.svgPaths.lineOnAxis("H",d)+f+a.utils.svgPaths.lineOnAxis("v",v)+c+a.utils.svgPaths.lineOnAxis("H",o.xPos+o.width),this.positionStatementInputConnection_(o)},a.zelos.MarkerSvg=function(o,c,d){a.zelos.MarkerSvg.superClass_.constructor.call(this,o,c,d)},a.utils.object.inherits(a.zelos.MarkerSvg,a.blockRendering.MarkerSvg),a.zelos.MarkerSvg.prototype.showWithInputOutput_=function(o){var c=o.getSourceBlock();o=o.getLocation().getOffsetInBlock(),this.positionCircle_(o.x,o.y),this.setParent_(c),this.showCurrent_()},a.zelos.MarkerSvg.prototype.showWithOutput_=function(o){this.showWithInputOutput_(o)},a.zelos.MarkerSvg.prototype.showWithInput_=function(o){this.showWithInputOutput_(o)},a.zelos.MarkerSvg.prototype.showWithBlock_=function(o){var c=(o=o.getLocation()).getHeightWidth();this.positionRect_(0,0,c.width,c.height),this.setParent_(o),this.showCurrent_()},a.zelos.MarkerSvg.prototype.positionCircle_=function(o,c){this.markerCircle_.setAttribute("cx",o),this.markerCircle_.setAttribute("cy",c),this.currentMarkerSvg=this.markerCircle_},a.zelos.MarkerSvg.prototype.hide=function(){a.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},a.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(a.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=a.utils.dom.createSvgElement(a.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var o=this.getBlinkProperties_();a.utils.dom.createSvgElement(a.utils.Svg.ANIMATE,o,this.markerCircle_)}return this.markerSvg_},a.zelos.MarkerSvg.prototype.applyColour_=function(o){a.zelos.MarkerSvg.superClass_.applyColour_.call(this,o),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},a.zelos.PathObject=function(o,c,d){a.zelos.PathObject.superClass_.constructor.call(this,o,c,d),this.constants=d,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},a.utils.object.inherits(a.zelos.PathObject,a.blockRendering.PathObject),a.zelos.PathObject.prototype.setPath=function(o){a.zelos.PathObject.superClass_.setPath.call(this,o),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",o)},a.zelos.PathObject.prototype.applyColour=function(o){for(var c in a.zelos.PathObject.superClass_.applyColour.call(this,o),o.isShadow()&&o.getParent()&&this.svgPath.setAttribute("stroke",o.getParent().style.colourTertiary),this.outlines_)this.outlines_[c].setAttribute("fill",this.style.colourTertiary)},a.zelos.PathObject.prototype.flipRTL=function(){for(var o in a.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[o].setAttribute("transform","scale(-1 1)")},a.zelos.PathObject.prototype.updateSelected=function(o){this.setClass_("blocklySelected",o),o?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},a.zelos.PathObject.prototype.updateReplacementFade=function(o){this.setClass_("blocklyReplaceable",o),o?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},a.zelos.PathObject.prototype.updateShapeForInputHighlight=function(o,c){o=o.getParentInput().name,(o=this.getOutlinePath_(o))&&(c?o.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):o.removeAttribute("filter"))},a.zelos.PathObject.prototype.beginDrawing=function(){for(var o in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[o]=1},a.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var o in this.remainingOutlines_)this.removeOutlinePath_(o);this.remainingOutlines_=null},a.zelos.PathObject.prototype.setOutlinePath=function(o,c){(o=this.getOutlinePath_(o)).setAttribute("d",c),o.setAttribute("fill",this.style.colourTertiary)},a.zelos.PathObject.prototype.getOutlinePath_=function(o){return this.outlines_[o]||(this.outlines_[o]=a.utils.dom.createSvgElement(a.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[o],this.outlines_[o]},a.zelos.PathObject.prototype.removeOutlinePath_=function(o){this.outlines_[o].parentNode.removeChild(this.outlines_[o]),delete this.outlines_[o]},a.zelos.Renderer=function(o){a.zelos.Renderer.superClass_.constructor.call(this,o)},a.utils.object.inherits(a.zelos.Renderer,a.blockRendering.Renderer),a.zelos.Renderer.prototype.makeConstants_=function(){return new a.zelos.ConstantProvider},a.zelos.Renderer.prototype.makeRenderInfo_=function(o){return new a.zelos.RenderInfo(this,o)},a.zelos.Renderer.prototype.makeDrawer_=function(o,c){return new a.zelos.Drawer(o,c)},a.zelos.Renderer.prototype.makeMarkerDrawer=function(o,c){return new a.zelos.MarkerSvg(o,this.getConstants(),c)},a.zelos.Renderer.prototype.makePathObject=function(o,c){return new a.zelos.PathObject(o,c,this.getConstants())},a.zelos.Renderer.prototype.shouldHighlightConnection=function(o){return o.type!=a.connectionTypes.INPUT_VALUE&&o.type!==a.connectionTypes.OUTPUT_VALUE},a.zelos.Renderer.prototype.getConnectionPreviewMethod=function(o,c,d){return c.type==a.connectionTypes.OUTPUT_VALUE?o.isConnected()?a.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:a.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:a.zelos.Renderer.superClass_.getConnectionPreviewMethod(o,c,d)},a.blockRendering.register("zelos",a.zelos.Renderer),a.Themes.Dark=a.Theme.defineTheme("dark",{base:a.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),a.Themes.Deuteranopia={},a.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},a.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},a.Themes.Deuteranopia=new a.Theme("deuteranopia",a.Themes.Deuteranopia.defaultBlockStyles,a.Themes.Deuteranopia.categoryStyles),a.Themes.HighContrast={},a.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},a.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},a.Themes.HighContrast=new a.Theme("highcontrast",a.Themes.HighContrast.defaultBlockStyles,a.Themes.HighContrast.categoryStyles),a.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),a.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),a.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),a.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),a.Themes.Tritanopia={},a.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},a.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},a.Themes.Tritanopia=new a.Theme("tritanopia",a.Themes.Tritanopia.defaultBlockStyles,a.Themes.Tritanopia.categoryStyles),a.requires={},a})?_.apply(A,[]):_)&&(S.exports=R)},81010:function(S,A,_){var E,R,a;R=[_(8100)],void 0!==(a="function"==typeof(E=function(o){"use strict";return o.Blocks={},o.Blocks})?E.apply(A,R):E)&&(S.exports=a)},8100:function(S,A,_){var E,R,a;R=[_(99240)],void 0!==(a="function"==typeof(E=function(o){"use strict";return o.Blocks.colour={},o.Constants={},o.Constants.Colour={},o.Constants.Colour.HUE=20,o.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),o.Constants.Lists={},o.Constants.Lists.HUE=260,o.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),o.Blocks.lists_create_with={init:function(){this.setHelpUrl(o.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new o.Mutator(["lists_create_with_item"])),this.setTooltip(o.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var c=o.utils.xml.createElement("mutation");return c.setAttribute("items",this.itemCount_),c},domToMutation:function(c){this.itemCount_=parseInt(c.getAttribute("items"),10),this.updateShape_()},decompose:function(c){var d=c.newBlock("lists_create_with_container");d.initSvg();for(var f=d.getInput("STACK").connection,v=0;v<this.itemCount_;v++){var y=c.newBlock("lists_create_with_item");y.initSvg(),f.connect(y.previousConnection),f=y.nextConnection}return d},compose:function(c){var d=c.getInputTargetBlock("STACK");for(c=[];d&&!d.isInsertionMarker();)c.push(d.valueConnection_),d=d.nextConnection&&d.nextConnection.targetBlock();for(d=0;d<this.itemCount_;d++){var f=this.getInput("ADD"+d).connection.targetConnection;f&&-1==c.indexOf(f)&&f.disconnect()}for(this.itemCount_=c.length,this.updateShape_(),d=0;d<this.itemCount_;d++)o.Mutator.reconnect(c[d],this,"ADD"+d)},saveConnections:function(c){c=c.getInputTargetBlock("STACK");for(var d=0;c;){var f=this.getInput("ADD"+d);c.valueConnection_=f&&f.connection.targetConnection,d++,c=c.nextConnection&&c.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(o.Msg.LISTS_CREATE_EMPTY_TITLE);for(var c=0;c<this.itemCount_;c++)if(!this.getInput("ADD"+c)){var d=this.appendValueInput("ADD"+c).setAlign(o.ALIGN_RIGHT);0==c&&d.appendField(o.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+c);)this.removeInput("ADD"+c),c++}},o.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(o.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(o.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},o.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(o.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(o.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},o.Blocks.lists_indexOf={init:function(){var c=[[o.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[o.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(o.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(o.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new o.FieldDropdown(c),"END"),this.setInputsInline(!0);var d=this;this.setTooltip(function(){return o.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",d.workspace.options.oneBasedIndex?"0":"-1")})}},o.Blocks.lists_getIndex={init:function(){var c=[[o.Msg.LISTS_GET_INDEX_GET,"GET"],[o.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[o.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[o.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[o.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[o.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[o.Msg.LISTS_GET_INDEX_LAST,"LAST"],[o.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(o.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),c=new o.FieldDropdown(c,function(f){f="REMOVE"==f,this.getSourceBlock().updateStatement_(f)}),this.appendValueInput("VALUE").setCheck("Array").appendField(o.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(c,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),o.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(o.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var d=this;this.setTooltip(function(){var f=d.getFieldValue("MODE"),v=d.getFieldValue("WHERE"),y="";switch(f+" "+v){case"GET FROM_START":case"GET FROM_END":y=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":y=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":y=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":y=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":y=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":y=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":y=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":y=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":y=o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":y=o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":y=o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":y=o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==v||"FROM_END"==v)&&(y+="  "+("FROM_START"==v?o.Msg.LISTS_INDEX_FROM_START_TOOLTIP:o.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",d.workspace.options.oneBasedIndex?"#1":"#0")),y})},mutationToDom:function(){var c=o.utils.xml.createElement("mutation");c.setAttribute("statement",!this.outputConnection);var d=this.getInput("AT").type==o.INPUT_VALUE;return c.setAttribute("at",d),c},domToMutation:function(c){var d="true"==c.getAttribute("statement");this.updateStatement_(d),c="false"!=c.getAttribute("at"),this.updateAt_(c)},updateStatement_:function(c){c!=!this.outputConnection&&(this.unplug(!0,!0),c?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(c){this.removeInput("AT"),this.removeInput("ORDINAL",!0),c?(this.appendValueInput("AT").setCheck("Number"),o.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var d=new o.FieldDropdown(this.WHERE_OPTIONS,function(f){var v="FROM_START"==f||"FROM_END"==f;if(v!=c){var y=this.getSourceBlock();return y.updateAt_(v),y.setFieldValue(f,"WHERE"),null}});this.getInput("AT").appendField(d,"WHERE"),o.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},o.Blocks.lists_setIndex={init:function(){var c=[[o.Msg.LISTS_SET_INDEX_SET,"SET"],[o.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[o.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[o.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[o.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[o.Msg.LISTS_GET_INDEX_LAST,"LAST"],[o.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(o.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(o.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new o.FieldDropdown(c),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(o.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(o.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var d=this;this.setTooltip(function(){var f=d.getFieldValue("MODE"),v=d.getFieldValue("WHERE"),y="";switch(f+" "+v){case"SET FROM_START":case"SET FROM_END":y=o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":y=o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":y=o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":y=o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":y=o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":y=o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":y=o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":y=o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==v||"FROM_END"==v)&&(y+="  "+o.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",d.workspace.options.oneBasedIndex?"#1":"#0")),y})},mutationToDom:function(){var c=o.utils.xml.createElement("mutation"),d=this.getInput("AT").type==o.INPUT_VALUE;return c.setAttribute("at",d),c},domToMutation:function(c){c="false"!=c.getAttribute("at"),this.updateAt_(c)},updateAt_:function(c){this.removeInput("AT"),this.removeInput("ORDINAL",!0),c?(this.appendValueInput("AT").setCheck("Number"),o.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var d=new o.FieldDropdown(this.WHERE_OPTIONS,function(f){var v="FROM_START"==f||"FROM_END"==f;if(v!=c){var y=this.getSourceBlock();return y.updateAt_(v),y.setFieldValue(f,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(d,"WHERE")}},o.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[o.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[o.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[o.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[o.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[o.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[o.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(o.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(o.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),o.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(o.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(o.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var c=o.utils.xml.createElement("mutation"),d=this.getInput("AT1").type==o.INPUT_VALUE;return c.setAttribute("at1",d),d=this.getInput("AT2").type==o.INPUT_VALUE,c.setAttribute("at2",d),c},domToMutation:function(c){var d="true"==c.getAttribute("at1");c="true"==c.getAttribute("at2"),this.updateAt_(1,d),this.updateAt_(2,c)},updateAt_:function(c,d){this.removeInput("AT"+c),this.removeInput("ORDINAL"+c,!0),d?(this.appendValueInput("AT"+c).setCheck("Number"),o.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+c).appendField(o.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+c);var f=new o.FieldDropdown(this["WHERE_OPTIONS_"+c],function(v){var y="FROM_START"==v||"FROM_END"==v;if(y!=d){var D=this.getSourceBlock();return D.updateAt_(c,y),D.setFieldValue(v,"WHERE"+c),null}});this.getInput("AT"+c).appendField(f,"WHERE"+c),1==c&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),o.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},o.Blocks.lists_sort={init:function(){this.jsonInit({message0:o.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[o.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[o.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[o.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[o.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[o.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:o.Msg.LISTS_SORT_TOOLTIP,helpUrl:o.Msg.LISTS_SORT_HELPURL})}},o.Blocks.lists_split={init:function(){var c=this,d=new o.FieldDropdown([[o.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[o.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(f){c.updateType_(f)});this.setHelpUrl(o.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(d,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(o.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var f=c.getFieldValue("MODE");if("SPLIT"==f)return o.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==f)return o.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+f)})},updateType_:function(c){if(this.getFieldValue("MODE")!=c){var d=this.getInput("INPUT").connection;d.setShadowDom(null);var f=d.targetBlock();f&&(d.disconnect(),f.isShadow()?f.dispose():this.bumpNeighbours())}"SPLIT"==c?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var c=o.utils.xml.createElement("mutation");return c.setAttribute("mode",this.getFieldValue("MODE")),c},domToMutation:function(c){this.updateType_(c.getAttribute("mode"))}},o.Blocks.logic={},o.Constants.Logic={},o.Constants.Logic.HUE=210,o.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),o.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),o.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},o.Extensions.register("logic_op_tooltip",o.Extensions.buildTooltipForDropdown("OP",o.Constants.Logic.TOOLTIPS_BY_OP)),o.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var c=o.utils.xml.createElement("mutation");return this.elseifCount_&&c.setAttribute("elseif",this.elseifCount_),this.elseCount_&&c.setAttribute("else",1),c},domToMutation:function(c){this.elseifCount_=parseInt(c.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(c.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(c){var d=c.newBlock("controls_if_if");d.initSvg();for(var f=d.nextConnection,v=1;v<=this.elseifCount_;v++){var y=c.newBlock("controls_if_elseif");y.initSvg(),f.connect(y.previousConnection),f=y.nextConnection}return this.elseCount_&&((c=c.newBlock("controls_if_else")).initSvg(),f.connect(c.previousConnection)),d},compose:function(c){c=c.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var d=[null],f=[null],v=null;c&&!c.isInsertionMarker();){switch(c.type){case"controls_if_elseif":this.elseifCount_++,d.push(c.valueConnection_),f.push(c.statementConnection_);break;case"controls_if_else":this.elseCount_++,v=c.statementConnection_;break;default:throw TypeError("Unknown block type: "+c.type)}c=c.nextConnection&&c.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(d,f,v)},saveConnections:function(c){c=c.nextConnection.targetBlock();for(var d=1;c;){switch(c.type){case"controls_if_elseif":var f=this.getInput("IF"+d),v=this.getInput("DO"+d);c.valueConnection_=f&&f.connection.targetConnection,c.statementConnection_=v&&v.connection.targetConnection,d++;break;case"controls_if_else":v=this.getInput("ELSE"),c.statementConnection_=v&&v.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+c.type)}c=c.nextConnection&&c.nextConnection.targetBlock()}},rebuildShape_:function(){var c=[null],d=[null],f=null;this.getInput("ELSE")&&(f=this.getInput("ELSE").connection.targetConnection);for(var v=1;this.getInput("IF"+v);){var y=this.getInput("IF"+v),D=this.getInput("DO"+v);c.push(y.connection.targetConnection),d.push(D.connection.targetConnection),v++}this.updateShape_(),this.reconnectChildBlocks_(c,d,f)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var c=1;this.getInput("IF"+c);)this.removeInput("IF"+c),this.removeInput("DO"+c),c++;for(c=1;c<=this.elseifCount_;c++)this.appendValueInput("IF"+c).setCheck("Boolean").appendField(o.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+c).appendField(o.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(o.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(c,d,f){for(var v=1;v<=this.elseifCount_;v++)o.Mutator.reconnect(c[v],this,"IF"+v),o.Mutator.reconnect(d[v],this,"DO"+v);o.Mutator.reconnect(f,this,"ELSE")}},o.Extensions.registerMutator("controls_if_mutator",o.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),o.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?o.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?o.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?o.Msg.CONTROLS_IF_TOOLTIP_4:"":o.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},o.Extensions.register("controls_if_tooltip",o.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),o.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(c){this.prevBlocks_||(this.prevBlocks_=[null,null]);var d=this.getInputTargetBlock("A"),f=this.getInputTargetBlock("B");d&&f&&!this.workspace.connectionChecker.doTypeChecks(d.outputConnection,f.outputConnection)&&(o.Events.setGroup(c.group),(c=this.prevBlocks_[0])!==d&&(d.unplug(),!c||c.isDisposed()||c.isShadow()||this.getInput("A").connection.connect(c.outputConnection)),(d=this.prevBlocks_[1])!==f&&(f.unplug(),!d||d.isDisposed()||d.isShadow()||this.getInput("B").connection.connect(d.outputConnection)),this.bumpNeighbours(),o.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},o.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(o.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},o.Extensions.register("logic_compare",o.Constants.Logic.LOGIC_COMPARE_EXTENSION),o.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(c){var d=this.getInputTargetBlock("THEN"),f=this.getInputTargetBlock("ELSE"),v=this.outputConnection.targetConnection;if((d||f)&&v)for(var y=0;2>y;y++){var D=1==y?d:f;D&&!D.workspace.connectionChecker.doTypeChecks(D.outputConnection,v)&&(o.Events.setGroup(c.group),v===this.prevParentConnection_?(this.unplug(),v.getSourceBlock().bumpNeighbours()):(D.unplug(),D.bumpNeighbours()),o.Events.setGroup(!1))}this.prevParentConnection_=v}},o.Extensions.registerMixin("logic_ternary",o.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),o.Blocks.loops={},o.Constants.Loops={},o.Constants.Loops.HUE=120,o.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),o.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},o.Extensions.register("controls_whileUntil_tooltip",o.Extensions.buildTooltipForDropdown("MODE",o.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),o.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},o.Extensions.register("controls_flow_tooltip",o.Extensions.buildTooltipForDropdown("FLOW",o.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),o.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(c){if(!this.isInFlyout){var d=this.getField("VAR").getVariable(),f=d.name;if(!this.isCollapsed()&&null!=f){var v={enabled:!0};v.text=o.Msg.VARIABLES_SET_CREATE_GET.replace("%1",f),d=o.Variables.generateVariableFieldDom(d),(f=o.utils.xml.createElement("block")).setAttribute("type","variables_get"),f.appendChild(d),v.callback=o.ContextMenu.callbackFactory(this,f),c.push(v)}}}},o.Extensions.registerMixin("contextMenu_newGetVariableBlock",o.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),o.Extensions.register("controls_for_tooltip",o.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),o.Extensions.register("controls_forEach_tooltip",o.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),o.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(c){do{if(-1!=o.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(c.type))return c;c=c.getSurroundParent()}while(c);return null},onchange:function(c){if(this.workspace.isDragging&&!this.workspace.isDragging()&&c.type==o.Events.BLOCK_MOVE){var d=o.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(d?null:o.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var f=o.Events.getGroup();o.Events.setGroup(c.group),this.setEnabled(d),o.Events.setGroup(f)}}}},o.Extensions.registerMixin("controls_flow_in_loop_check",o.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),o.Blocks.math={},o.Constants.Math={},o.Constants.Math.HUE=230,o.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),o.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},o.Extensions.register("math_op_tooltip",o.Extensions.buildTooltipForDropdown("OP",o.Constants.Math.TOOLTIPS_BY_OP)),o.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var c=o.utils.xml.createElement("mutation"),d="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return c.setAttribute("divisor_input",d),c},domToMutation:function(c){c="true"==c.getAttribute("divisor_input"),this.updateShape_(c)},updateShape_:function(c){var d=this.getInput("DIVISOR");c?d||this.appendValueInput("DIVISOR").setCheck("Number"):d&&this.removeInput("DIVISOR")}},o.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(c){c="DIVISIBLE_BY"==c,this.getSourceBlock().updateShape_(c)})},o.Extensions.registerMutator("math_is_divisibleby_mutator",o.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,o.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),o.Extensions.register("math_change_tooltip",o.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),o.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(c){this.outputConnection.setCheck("MODE"==c?"Array":"Number")},mutationToDom:function(){var c=o.utils.xml.createElement("mutation");return c.setAttribute("op",this.getFieldValue("OP")),c},domToMutation:function(c){this.updateType_(c.getAttribute("op"))}},o.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(c){this.updateType_(c)}.bind(this))},o.Extensions.registerMutator("math_modes_of_list_mutator",o.Constants.Math.LIST_MODES_MUTATOR_MIXIN,o.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),o.Blocks.procedures={},o.Blocks.procedures_defnoreturn={init:function(){var c=o.Procedures.findLegalName("",this);(c=new o.FieldTextInput(c,o.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(o.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(c,"NAME").appendField("","PARAMS"),this.setMutator(new o.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&o.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(o.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(o.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(c){this.hasStatements_!==c&&(c?(this.appendStatementInput("STACK").appendField(o.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=c)},updateParams_:function(){var c="";this.arguments_.length&&(c=o.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),o.Events.disable();try{this.setFieldValue(c,"PARAMS")}finally{o.Events.enable()}},mutationToDom:function(c){var d=o.utils.xml.createElement("mutation");c&&d.setAttribute("name",this.getFieldValue("NAME"));for(var f=0;f<this.argumentVarModels_.length;f++){var v=o.utils.xml.createElement("arg"),y=this.argumentVarModels_[f];v.setAttribute("name",y.name),v.setAttribute("varid",y.getId()),c&&this.paramIds_&&v.setAttribute("paramId",this.paramIds_[f]),d.appendChild(v)}return this.hasStatements_||d.setAttribute("statements","false"),d},domToMutation:function(c){this.arguments_=[],this.argumentVarModels_=[];for(var f,d=0;f=c.childNodes[d];d++)if("arg"==f.nodeName.toLowerCase()){var v=f.getAttribute("name");f=f.getAttribute("varid")||f.getAttribute("varId"),this.arguments_.push(v),null!=(f=o.Variables.getOrCreateVariablePackage(this.workspace,f,v,""))?this.argumentVarModels_.push(f):console.log("Failed to create a variable with name "+v+", ignoring.")}this.updateParams_(),o.Procedures.mutateCallers(this),this.setStatements_("false"!==c.getAttribute("statements"))},decompose:function(c){var d=o.utils.xml.createElement("block");d.setAttribute("type","procedures_mutatorcontainer");var f=o.utils.xml.createElement("statement");f.setAttribute("name","STACK"),d.appendChild(f);for(var v=0;v<this.arguments_.length;v++){var y=o.utils.xml.createElement("block");y.setAttribute("type","procedures_mutatorarg");var D=o.utils.xml.createElement("field");D.setAttribute("name","NAME");var O=o.utils.xml.createTextNode(this.arguments_[v]);D.appendChild(O),y.appendChild(D),D=o.utils.xml.createElement("next"),y.appendChild(D),f.appendChild(y),f=D}return c=o.Xml.domToBlock(d,c),"procedures_defreturn"==this.type?c.setFieldValue(this.hasStatements_,"STATEMENTS"):c.removeInput("STATEMENT_INPUT"),o.Procedures.mutateCallers(this),c},compose:function(c){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var d=c.getInputTargetBlock("STACK");d&&!d.isInsertionMarker();){var f=d.getFieldValue("NAME");this.arguments_.push(f),f=this.workspace.getVariable(f,""),this.argumentVarModels_.push(f),this.paramIds_.push(d.id),d=d.nextConnection&&d.nextConnection.targetBlock()}this.updateParams_(),o.Procedures.mutateCallers(this),null!==(c=c.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(c="TRUE"==c)&&(c?(this.setStatements_(!0),o.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(c=this.getInput("STACK").connection,(this.statementConnection_=c.targetConnection)&&((c=c.targetBlock()).unplug(),c.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(c,d){var f=this.workspace.getVariableById(c);if(""==f.type){f=f.name,d=this.workspace.getVariableById(d);for(var v=!1,y=0;y<this.argumentVarModels_.length;y++)this.argumentVarModels_[y].getId()==c&&(this.arguments_[y]=d.name,this.argumentVarModels_[y]=d,v=!0);v&&(this.displayRenamedVar_(f,d.name),o.Procedures.mutateCallers(this))}},updateVarName:function(c){for(var d=c.name,f=!1,v=0;v<this.argumentVarModels_.length;v++)if(this.argumentVarModels_[v].getId()==c.getId()){var y=this.arguments_[v];this.arguments_[v]=d,f=!0}f&&(this.displayRenamedVar_(y,d),o.Procedures.mutateCallers(this))},displayRenamedVar_:function(c,d){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var y,f=this.mutator.workspace_.getAllBlocks(!1),v=0;y=f[v];v++)"procedures_mutatorarg"==y.type&&o.Names.equals(c,y.getFieldValue("NAME"))&&y.setFieldValue(d,"NAME")},customContextMenu:function(c){if(!this.isInFlyout){var d={enabled:!0},f=this.getFieldValue("NAME");d.text=o.Msg.PROCEDURES_CREATE_DO.replace("%1",f);var v=o.utils.xml.createElement("mutation");for(v.setAttribute("name",f),f=0;f<this.arguments_.length;f++){var y=o.utils.xml.createElement("arg");y.setAttribute("name",this.arguments_[f]),v.appendChild(y)}if((f=o.utils.xml.createElement("block")).setAttribute("type",this.callType_),f.appendChild(v),d.callback=o.ContextMenu.callbackFactory(this,f),c.push(d),!this.isCollapsed())for(f=0;f<this.argumentVarModels_.length;f++)(d={enabled:!0}).text=o.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(v=this.argumentVarModels_[f]).name),v=o.Variables.generateVariableFieldDom(v),(y=o.utils.xml.createElement("block")).setAttribute("type","variables_get"),y.appendChild(v),d.callback=o.ContextMenu.callbackFactory(this,y),c.push(d)}},callType_:"procedures_callnoreturn"},o.Blocks.procedures_defreturn={init:function(){var c=o.Procedures.findLegalName("",this);(c=new o.FieldTextInput(c,o.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(o.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(c,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(o.ALIGN_RIGHT).appendField(o.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new o.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&o.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(o.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(o.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:o.Blocks.procedures_defnoreturn.setStatements_,updateParams_:o.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:o.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:o.Blocks.procedures_defnoreturn.domToMutation,decompose:o.Blocks.procedures_defnoreturn.decompose,compose:o.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:o.Blocks.procedures_defnoreturn.getVars,getVarModels:o.Blocks.procedures_defnoreturn.getVarModels,renameVarById:o.Blocks.procedures_defnoreturn.renameVarById,updateVarName:o.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:o.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:o.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},o.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(o.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(o.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new o.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},o.Blocks.procedures_mutatorarg={init:function(){var c=new o.FieldTextInput(o.Procedures.DEFAULT_ARG,this.validator_);c.oldShowEditorFn_=c.showEditor_,c.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(o.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(c,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,c.onFinishEditing_=this.deleteIntermediateVars_,c.createdVariables_=[],c.onFinishEditing_("x")},validator_:function(c){var d=this.getSourceBlock(),f=o.Mutator.findParentWs(d.workspace);if(!(c=c.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var v=(d.workspace.targetWorkspace||d.workspace).getAllBlocks(!1),y=c.toLowerCase(),D=0;D<v.length;D++)if(v[D].id!=this.getSourceBlock().id){var O=v[D].getFieldValue("NAME");if(O&&O.toLowerCase()==y)return null}return d.isInFlyout||((d=f.getVariable(c,""))&&d.name!=c&&f.renameVariableById(d.getId(),c),d||(d=f.createVariable(c,""))&&this.createdVariables_&&this.createdVariables_.push(d)),c},deleteIntermediateVars_:function(c){var d=o.Mutator.findParentWs(this.getSourceBlock().workspace);if(d)for(var f=0;f<this.createdVariables_.length;f++){var v=this.createdVariables_[f];v.name!=c&&d.deleteVariableById(v.getId())}}},o.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(o.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(c,d){o.Names.equals(c,this.getProcedureCall())&&(this.setFieldValue(d,"NAME"),this.setTooltip((this.outputConnection?o.Msg.PROCEDURES_CALLRETURN_TOOLTIP:o.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",d)))},setProcedureParameters_:function(c,d){var f=o.Procedures.getDefinition(this.getProcedureCall(),this.workspace),v=f&&f.mutator&&f.mutator.isVisible();if(v||(this.quarkConnections_={},this.quarkIds_=null),d)if(c.join("\n")==this.arguments_.join("\n"))this.quarkIds_=d;else{if(d.length!=c.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),f=this.rendered,this.rendered=!1;for(var y=0;y<this.arguments_.length;y++){var D=this.getInput("ARG"+y);D&&(this.quarkConnections_[this.quarkIds_[y]]=D=D.connection.targetConnection,v&&D&&-1==d.indexOf(this.quarkIds_[y])&&(D.disconnect(),D.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(c),this.argumentVarModels_=[],y=0;y<this.arguments_.length;y++)c=o.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[y],""),this.argumentVarModels_.push(c);if(this.updateShape_(),this.quarkIds_=d)for(y=0;y<this.arguments_.length;y++)(d=this.quarkIds_[y])in this.quarkConnections_&&(o.Mutator.reconnect(D=this.quarkConnections_[d],this,"ARG"+y)||delete this.quarkConnections_[d]);(this.rendered=f)&&this.render()}},updateShape_:function(){for(var c=0;c<this.arguments_.length;c++){var d=this.getField("ARGNAME"+c);if(d){o.Events.disable();try{d.setValue(this.arguments_[c])}finally{o.Events.enable()}}else d=new o.FieldLabel(this.arguments_[c]),this.appendValueInput("ARG"+c).setAlign(o.ALIGN_RIGHT).appendField(d,"ARGNAME"+c).init()}for(;this.getInput("ARG"+c);)this.removeInput("ARG"+c),c++;(c=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(c.appendField(o.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),c.init()):this.getField("WITH")&&c.removeField("WITH"))},mutationToDom:function(){var c=o.utils.xml.createElement("mutation");c.setAttribute("name",this.getProcedureCall());for(var d=0;d<this.arguments_.length;d++){var f=o.utils.xml.createElement("arg");f.setAttribute("name",this.arguments_[d]),c.appendChild(f)}return c},domToMutation:function(c){var d=c.getAttribute("name");this.renameProcedure(this.getProcedureCall(),d),d=[];for(var y,f=[],v=0;y=c.childNodes[v];v++)"arg"==y.nodeName.toLowerCase()&&(d.push(y.getAttribute("name")),f.push(y.getAttribute("paramId")));this.setProcedureParameters_(d,f)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(c){if(this.workspace&&!this.workspace.isFlyout&&c.recordUndo)if(c.type==o.Events.BLOCK_CREATE&&-1!=c.ids.indexOf(this.id)){var d=this.getProcedureCall();if(!(d=o.Procedures.getDefinition(d,this.workspace))||d.type==this.defType_&&JSON.stringify(d.getVars())==JSON.stringify(this.arguments_)||(d=null),!d){o.Events.setGroup(c.group),c=o.utils.xml.createElement("xml"),(d=o.utils.xml.createElement("block")).setAttribute("type",this.defType_);var f=this.getRelativeToSurfaceXY(),v=f.y+2*o.SNAP_RADIUS;d.setAttribute("x",f.x+o.SNAP_RADIUS*(this.RTL?-1:1)),d.setAttribute("y",v),f=this.mutationToDom(),d.appendChild(f),(f=o.utils.xml.createElement("field")).setAttribute("name","NAME"),(v=this.getProcedureCall())||(v=o.Procedures.findLegalName("",this),this.renameProcedure("",v)),f.appendChild(o.utils.xml.createTextNode(v)),d.appendChild(f),c.appendChild(d),o.Xml.domToWorkspace(c,this.workspace),o.Events.setGroup(!1)}}else c.type==o.Events.BLOCK_DELETE?(d=this.getProcedureCall(),(d=o.Procedures.getDefinition(d,this.workspace))||(o.Events.setGroup(c.group),this.dispose(!0),o.Events.setGroup(!1))):c.type==o.Events.CHANGE&&"disabled"==c.element&&(d=this.getProcedureCall(),(d=o.Procedures.getDefinition(d,this.workspace))&&d.id==c.blockId&&((d=o.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),o.Events.setGroup(c.group),c.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),o.Events.setGroup(d)))},customContextMenu:function(c){if(this.workspace.isMovable()){var d={enabled:!0};d.text=o.Msg.PROCEDURES_HIGHLIGHT_DEF;var f=this.getProcedureCall(),v=this.workspace;d.callback=function(){var y=o.Procedures.getDefinition(f,v);y&&(v.centerOnBlock(y.id),y.select())},c.push(d)}},defType_:"procedures_defnoreturn"},o.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(o.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:o.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:o.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:o.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:o.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:o.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:o.Blocks.procedures_callnoreturn.domToMutation,getVars:o.Blocks.procedures_callnoreturn.getVars,getVarModels:o.Blocks.procedures_callnoreturn.getVarModels,onchange:o.Blocks.procedures_callnoreturn.onchange,customContextMenu:o.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},o.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(o.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(o.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(o.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var c=o.utils.xml.createElement("mutation");return c.setAttribute("value",Number(this.hasReturnValue_)),c},domToMutation:function(c){this.hasReturnValue_=1==c.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(o.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(c){if(this.workspace.isDragging&&!this.workspace.isDragging()){c=!1;var d=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(d.type)){c=!0;break}d=d.getSurroundParent()}while(d);c?("procedures_defnoreturn"==d.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(o.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=d.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(o.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(o.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},o.Blocks.texts={},o.Constants.Text={},o.Constants.Text.HUE=160,o.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),o.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[o.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[o.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[o.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[o.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[o.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[o.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(o.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(o.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),o.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(o.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(o.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var c=o.utils.xml.createElement("mutation"),d=this.getInput("AT1").type==o.INPUT_VALUE;return c.setAttribute("at1",d),d=this.getInput("AT2").type==o.INPUT_VALUE,c.setAttribute("at2",d),c},domToMutation:function(c){var d="true"==c.getAttribute("at1");c="true"==c.getAttribute("at2"),this.updateAt_(1,d),this.updateAt_(2,c)},updateAt_:function(c,d){this.removeInput("AT"+c),this.removeInput("ORDINAL"+c,!0),d?(this.appendValueInput("AT"+c).setCheck("Number"),o.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+c).appendField(o.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+c),2==c&&o.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(o.Msg.TEXT_GET_SUBSTRING_TAIL));var f=new o.FieldDropdown(this["WHERE_OPTIONS_"+c],function(v){var y="FROM_START"==v||"FROM_END"==v;if(y!=d){var D=this.getSourceBlock();return D.updateAt_(c,y),D.setFieldValue(v,"WHERE"+c),null}});this.getInput("AT"+c).appendField(f,"WHERE"+c),1==c&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},o.Blocks.text_changeCase={init:function(){var c=[[o.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[o.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[o.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(o.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new o.FieldDropdown(c),"CASE"),this.setOutput(!0,"String"),this.setTooltip(o.Msg.TEXT_CHANGECASE_TOOLTIP)}},o.Blocks.text_trim={init:function(){var c=[[o.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[o.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[o.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(o.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new o.FieldDropdown(c),"MODE"),this.setOutput(!0,"String"),this.setTooltip(o.Msg.TEXT_TRIM_TOOLTIP)}},o.Blocks.text_print={init:function(){this.jsonInit({message0:o.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:o.Msg.TEXT_PRINT_TOOLTIP,helpUrl:o.Msg.TEXT_PRINT_HELPURL})}},o.Blocks.text_prompt_ext={init:function(){var c=[[o.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[o.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(o.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var d=this;c=new o.FieldDropdown(c,function(f){d.updateType_(f)}),this.appendValueInput("TEXT").appendField(c,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==d.getFieldValue("TYPE")?o.Msg.TEXT_PROMPT_TOOLTIP_TEXT:o.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(c){this.outputConnection.setCheck("NUMBER"==c?"Number":"String")},mutationToDom:function(){var c=o.utils.xml.createElement("mutation");return c.setAttribute("type",this.getFieldValue("TYPE")),c},domToMutation:function(c){this.updateType_(c.getAttribute("type"))}},o.Blocks.text_prompt={init:function(){this.mixin(o.Constants.Text.QUOTE_IMAGE_MIXIN);var c=[[o.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[o.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],d=this;this.setHelpUrl(o.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),c=new o.FieldDropdown(c,function(f){d.updateType_(f)}),this.appendDummyInput().appendField(c,"TYPE").appendField(this.newQuote_(!0)).appendField(new o.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==d.getFieldValue("TYPE")?o.Msg.TEXT_PROMPT_TOOLTIP_TEXT:o.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:o.Blocks.text_prompt_ext.updateType_,mutationToDom:o.Blocks.text_prompt_ext.mutationToDom,domToMutation:o.Blocks.text_prompt_ext.domToMutation},o.Blocks.text_count={init:function(){this.jsonInit({message0:o.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:o.Msg.TEXT_COUNT_TOOLTIP,helpUrl:o.Msg.TEXT_COUNT_HELPURL})}},o.Blocks.text_replace={init:function(){this.jsonInit({message0:o.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:o.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:o.Msg.TEXT_REPLACE_HELPURL})}},o.Blocks.text_reverse={init:function(){this.jsonInit({message0:o.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:o.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:o.Msg.TEXT_REVERSE_HELPURL})}},o.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(c){for(var f,d=0;f=this.inputList[d];d++)for(var y,v=0;y=f.fieldRow[v];v++)if(c==y.name)return f.insertFieldAt(v,this.newQuote_(!0)),void f.insertFieldAt(v+2,this.newQuote_(!1));console.warn('field named "'+c+'" not found in '+this.toDevString())},newQuote_:function(c){return new o.FieldImage((c=this.RTL?!c:c)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,c?"\u201c":"\u201d")}},o.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(o.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},o.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var c=o.utils.xml.createElement("mutation");return c.setAttribute("items",this.itemCount_),c},domToMutation:function(c){this.itemCount_=parseInt(c.getAttribute("items"),10),this.updateShape_()},decompose:function(c){var d=c.newBlock("text_create_join_container");d.initSvg();for(var f=d.getInput("STACK").connection,v=0;v<this.itemCount_;v++){var y=c.newBlock("text_create_join_item");y.initSvg(),f.connect(y.previousConnection),f=y.nextConnection}return d},compose:function(c){var d=c.getInputTargetBlock("STACK");for(c=[];d&&!d.isInsertionMarker();)c.push(d.valueConnection_),d=d.nextConnection&&d.nextConnection.targetBlock();for(d=0;d<this.itemCount_;d++){var f=this.getInput("ADD"+d).connection.targetConnection;f&&-1==c.indexOf(f)&&f.disconnect()}for(this.itemCount_=c.length,this.updateShape_(),d=0;d<this.itemCount_;d++)o.Mutator.reconnect(c[d],this,"ADD"+d)},saveConnections:function(c){c=c.getInputTargetBlock("STACK");for(var d=0;c;){var f=this.getInput("ADD"+d);c.valueConnection_=f&&f.connection.targetConnection,d++,c=c.nextConnection&&c.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var c=0;c<this.itemCount_;c++)if(!this.getInput("ADD"+c)){var d=this.appendValueInput("ADD"+c).setAlign(o.ALIGN_RIGHT);0==c&&d.appendField(o.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+c);)this.removeInput("ADD"+c),c++}},o.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(o.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new o.Mutator(["text_create_join_item"]))},o.Extensions.register("text_append_tooltip",o.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),o.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var c=this;this.setTooltip(function(){return o.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",c.workspace.options.oneBasedIndex?"0":"-1")})},o.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var c=o.utils.xml.createElement("mutation");return c.setAttribute("at",!!this.isAt_),c},domToMutation:function(c){c="false"!=c.getAttribute("at"),this.updateAt_(c)},updateAt_:function(c){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),c&&(this.appendValueInput("AT").setCheck("Number"),o.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.Msg.ORDINAL_NUMBER_SUFFIX)),o.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(o.Msg.TEXT_CHARAT_TAIL)),this.isAt_=c}},o.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(d){(d="FROM_START"==d||"FROM_END"==d)!=this.isAt_&&this.getSourceBlock().updateAt_(d)}),this.updateAt_(!0);var c=this;this.setTooltip(function(){var d=c.getFieldValue("WHERE"),f=o.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==d||"FROM_END"==d)&&(d="FROM_START"==d?o.Msg.LISTS_INDEX_FROM_START_TOOLTIP:o.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(f+="  "+d.replace("%1",c.workspace.options.oneBasedIndex?"#1":"#0")),f})},o.Extensions.register("text_indexOf_tooltip",o.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),o.Extensions.register("text_quotes",o.Constants.Text.TEXT_QUOTES_EXTENSION),o.Extensions.registerMutator("text_join_mutator",o.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,o.Constants.Text.TEXT_JOIN_EXTENSION),o.Extensions.registerMutator("text_charAt_mutator",o.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,o.Constants.Text.TEXT_CHARAT_EXTENSION),o.Blocks.variables={},o.Constants.Variables={},o.Constants.Variables.HUE=330,o.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),o.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(c){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(d={text:o.Msg.RENAME_VARIABLE,enabled:!0,callback:o.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},y=this.getField("VAR").getText(),v={text:o.Msg.DELETE_VARIABLE.replace("%1",y),enabled:!0,callback:o.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},c.unshift(d),c.unshift(v));else{if("variables_get"==this.type)var d="variables_set",f=o.Msg.VARIABLES_GET_CREATE_SET;else d="variables_get",f=o.Msg.VARIABLES_SET_CREATE_GET;var v={enabled:0<this.workspace.remainingCapacity()},y=this.getField("VAR").getText();v.text=f.replace("%1",y),(f=o.utils.xml.createElement("field")).setAttribute("name","VAR"),f.appendChild(o.utils.xml.createTextNode(y)),(y=o.utils.xml.createElement("block")).setAttribute("type",d),y.appendChild(f),v.callback=o.ContextMenu.callbackFactory(this,y),c.push(v)}}},o.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(c){return function(){var d=c.workspace,f=c.getField("VAR").getVariable();o.Variables.renameVariable(d,f)}},o.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(c){return function(){var d=c.workspace,f=c.getField("VAR").getVariable();d.deleteVariableById(f.getId()),d.refreshToolboxSelection()}},o.Extensions.registerMixin("contextMenu_variableSetterGetter",o.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),o.Constants.VariablesDynamic={},o.Constants.VariablesDynamic.HUE=310,o.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),o.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(c){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(d={text:o.Msg.RENAME_VARIABLE,enabled:!0,callback:o.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},D=this.getField("VAR").getText(),y={text:o.Msg.DELETE_VARIABLE.replace("%1",D),enabled:!0,callback:o.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},c.unshift(d),c.unshift(y));else{var d=this.getFieldValue("VAR"),f=this.workspace.getVariableById(d).type;if("variables_get_dynamic"==this.type){d="variables_set_dynamic";var v=o.Msg.VARIABLES_GET_CREATE_SET}else d="variables_get_dynamic",v=o.Msg.VARIABLES_SET_CREATE_GET;var y={enabled:0<this.workspace.remainingCapacity()},D=this.getField("VAR").getText();y.text=v.replace("%1",D),(v=o.utils.xml.createElement("field")).setAttribute("name","VAR"),v.setAttribute("variabletype",f),v.appendChild(o.utils.xml.createTextNode(D)),(D=o.utils.xml.createElement("block")).setAttribute("type",d),D.appendChild(v),y.callback=o.ContextMenu.callbackFactory(this,D),c.push(y)}},onchange:function(c){c=this.getFieldValue("VAR"),c=o.Variables.getVariable(this.workspace,c),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(c.type):this.getInput("VALUE").connection.setCheck(c.type)}},o.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(c){return function(){var d=c.workspace,f=c.getField("VAR").getVariable();o.Variables.renameVariable(d,f)}},o.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(c){return function(){var d=c.workspace,f=c.getField("VAR").getVariable();d.deleteVariableById(f.getId()),d.refreshToolboxSelection()}},o.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",o.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),o.Blocks})?E.apply(A,R):E)&&(S.exports=a)},72593:function(S,A,_){var E,R,a;R=[_(81846),_(59090),_(81010),_(7148)],void 0!==(a="function"==typeof(E=function(o,c,d,f){"use strict";return o.setLocale(c),o.Blocks=o.Blocks||{},Object.keys(d).forEach(function(v){o.Blocks[v]=d[v]}),o.JavaScript=f,o})?E.apply(A,R):E)&&(S.exports=a)},81846:function(S,A,_){var E,R,a;R=[_(72749)],void 0!==(a="function"==typeof(E=function(o){"use strict";return o.setLocale=function(c){o.Msg=o.Msg||{},Object.keys(c).forEach(function(d){o.Msg[d]=c[d]})},o})?E.apply(A,R):E)&&(S.exports=a)},7832:function(S,A,_){var E,R,a;R=[_(72593)],void 0!==(a="function"==typeof(E=function(o){"use strict";return o})?E.apply(A,R):E)&&(S.exports=a)},7148:function(S,A,_){var E,R,a;R=[_(81846),_(97861)],void 0!==(a="function"==typeof(E=function(o,c){"use strict";return o.JavaScript=c,c})?E.apply(A,R):E)&&(S.exports=a)},97861:function(S,A,_){var E,R,a;R=[_(99240)],void 0!==(a="function"==typeof(E=function(o){"use strict";return o.JavaScript=new o.Generator("JavaScript"),o.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(o.utils.global).join(",")),o.JavaScript.ORDER_ATOMIC=0,o.JavaScript.ORDER_NEW=1.1,o.JavaScript.ORDER_MEMBER=1.2,o.JavaScript.ORDER_FUNCTION_CALL=2,o.JavaScript.ORDER_INCREMENT=3,o.JavaScript.ORDER_DECREMENT=3,o.JavaScript.ORDER_BITWISE_NOT=4.1,o.JavaScript.ORDER_UNARY_PLUS=4.2,o.JavaScript.ORDER_UNARY_NEGATION=4.3,o.JavaScript.ORDER_LOGICAL_NOT=4.4,o.JavaScript.ORDER_TYPEOF=4.5,o.JavaScript.ORDER_VOID=4.6,o.JavaScript.ORDER_DELETE=4.7,o.JavaScript.ORDER_AWAIT=4.8,o.JavaScript.ORDER_EXPONENTIATION=5,o.JavaScript.ORDER_MULTIPLICATION=5.1,o.JavaScript.ORDER_DIVISION=5.2,o.JavaScript.ORDER_MODULUS=5.3,o.JavaScript.ORDER_SUBTRACTION=6.1,o.JavaScript.ORDER_ADDITION=6.2,o.JavaScript.ORDER_BITWISE_SHIFT=7,o.JavaScript.ORDER_RELATIONAL=8,o.JavaScript.ORDER_IN=8,o.JavaScript.ORDER_INSTANCEOF=8,o.JavaScript.ORDER_EQUALITY=9,o.JavaScript.ORDER_BITWISE_AND=10,o.JavaScript.ORDER_BITWISE_XOR=11,o.JavaScript.ORDER_BITWISE_OR=12,o.JavaScript.ORDER_LOGICAL_AND=13,o.JavaScript.ORDER_LOGICAL_OR=14,o.JavaScript.ORDER_CONDITIONAL=15,o.JavaScript.ORDER_ASSIGNMENT=16,o.JavaScript.ORDER_YIELD=17,o.JavaScript.ORDER_COMMA=18,o.JavaScript.ORDER_NONE=99,o.JavaScript.ORDER_OVERRIDES=[[o.JavaScript.ORDER_FUNCTION_CALL,o.JavaScript.ORDER_MEMBER],[o.JavaScript.ORDER_FUNCTION_CALL,o.JavaScript.ORDER_FUNCTION_CALL],[o.JavaScript.ORDER_MEMBER,o.JavaScript.ORDER_MEMBER],[o.JavaScript.ORDER_MEMBER,o.JavaScript.ORDER_FUNCTION_CALL],[o.JavaScript.ORDER_LOGICAL_NOT,o.JavaScript.ORDER_LOGICAL_NOT],[o.JavaScript.ORDER_MULTIPLICATION,o.JavaScript.ORDER_MULTIPLICATION],[o.JavaScript.ORDER_ADDITION,o.JavaScript.ORDER_ADDITION],[o.JavaScript.ORDER_LOGICAL_AND,o.JavaScript.ORDER_LOGICAL_AND],[o.JavaScript.ORDER_LOGICAL_OR,o.JavaScript.ORDER_LOGICAL_OR]],o.JavaScript.isInitialized=!1,o.JavaScript.init=function(c){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new o.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(c.getVariableMap()),this.nameDB_.populateVariables(c),this.nameDB_.populateProcedures(c);for(var d=[],f=o.Variables.allDeveloperVariables(c),v=0;v<f.length;v++)d.push(this.nameDB_.getName(f[v],o.Names.DEVELOPER_VARIABLE_TYPE));for(c=o.Variables.allUsedVarModels(c),v=0;v<c.length;v++)d.push(this.nameDB_.getName(c[v].getId(),o.VARIABLE_CATEGORY_NAME));d.length&&(this.definitions_.variables="var "+d.join(", ")+";"),this.isInitialized=!0},o.JavaScript.finish=function(c){var d=o.utils.object.values(this.definitions_);return c=Object.getPrototypeOf(this).finish.call(this,c),this.isInitialized=!1,this.nameDB_.reset(),d.join("\n\n")+"\n\n\n"+c},o.JavaScript.scrubNakedValue=function(c){return c+";\n"},o.JavaScript.quote_=function(c){return"'"+(c=c.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},o.JavaScript.multiline_quote_=function(c){return c.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},o.JavaScript.scrub_=function(c,d,f){var v="";if(!c.outputConnection||!c.outputConnection.targetConnection){var y=c.getCommentText();y&&(y=o.utils.string.wrap(y,this.COMMENT_WRAP-3),v+=this.prefixLines(y+"\n","// "));for(var D=0;D<c.inputList.length;D++)c.inputList[D].type==o.inputTypes.VALUE&&(y=c.inputList[D].connection.targetBlock())&&(y=this.allNestedComments(y))&&(v+=this.prefixLines(y,"// "))}return c=c.nextConnection&&c.nextConnection.targetBlock(),v+d+(f?"":this.blockToCode(c))},o.JavaScript.getAdjusted=function(c,d,f,v,y){f=f||0,y=y||this.ORDER_NONE,c.workspace.options.oneBasedIndex&&f--;var D=c.workspace.options.oneBasedIndex?"1":"0";if(c=0<f?this.valueToCode(c,d,this.ORDER_ADDITION)||D:0>f?this.valueToCode(c,d,this.ORDER_SUBTRACTION)||D:v?this.valueToCode(c,d,this.ORDER_UNARY_NEGATION)||D:this.valueToCode(c,d,y)||D,o.isNumber(c))c=Number(c)+f,v&&(c=-c);else{if(0<f){c=c+" + "+f;var O=this.ORDER_ADDITION}else 0>f&&(c=c+" - "+-f,O=this.ORDER_SUBTRACTION);v&&(c=f?"-("+c+")":"-"+c,O=this.ORDER_UNARY_NEGATION),O=Math.floor(O),y=Math.floor(y),O&&y>=O&&(c="("+c+")")}return c},o.JavaScript.colour={},o.JavaScript.colour_picker=function(c){return[o.JavaScript.quote_(c.getFieldValue("COLOUR")),o.JavaScript.ORDER_ATOMIC]},o.JavaScript.colour_random=function(c){return[o.JavaScript.provideFunction_("colourRandom",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.colour_rgb=function(c){var d=o.JavaScript.valueToCode(c,"RED",o.JavaScript.ORDER_NONE)||0,f=o.JavaScript.valueToCode(c,"GREEN",o.JavaScript.ORDER_NONE)||0;return c=o.JavaScript.valueToCode(c,"BLUE",o.JavaScript.ORDER_NONE)||0,[o.JavaScript.provideFunction_("colourRgb",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+d+", "+f+", "+c+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.colour_blend=function(c){var d=o.JavaScript.valueToCode(c,"COLOUR1",o.JavaScript.ORDER_NONE)||"'#000000'",f=o.JavaScript.valueToCode(c,"COLOUR2",o.JavaScript.ORDER_NONE)||"'#000000'";return c=o.JavaScript.valueToCode(c,"RATIO",o.JavaScript.ORDER_NONE)||.5,[o.JavaScript.provideFunction_("colourBlend",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+d+", "+f+", "+c+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.lists={},o.JavaScript.lists_create_empty=function(c){return["[]",o.JavaScript.ORDER_ATOMIC]},o.JavaScript.lists_create_with=function(c){for(var d=Array(c.itemCount_),f=0;f<c.itemCount_;f++)d[f]=o.JavaScript.valueToCode(c,"ADD"+f,o.JavaScript.ORDER_NONE)||"null";return["["+d.join(", ")+"]",o.JavaScript.ORDER_ATOMIC]},o.JavaScript.lists_repeat=function(c){return[o.JavaScript.provideFunction_("listsRepeat",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(o.JavaScript.valueToCode(c,"ITEM",o.JavaScript.ORDER_NONE)||"null")+", "+(c=o.JavaScript.valueToCode(c,"NUM",o.JavaScript.ORDER_NONE)||"0")+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.lists_length=function(c){return[(o.JavaScript.valueToCode(c,"VALUE",o.JavaScript.ORDER_MEMBER)||"[]")+".length",o.JavaScript.ORDER_MEMBER]},o.JavaScript.lists_isEmpty=function(c){return["!"+(o.JavaScript.valueToCode(c,"VALUE",o.JavaScript.ORDER_MEMBER)||"[]")+".length",o.JavaScript.ORDER_LOGICAL_NOT]},o.JavaScript.lists_indexOf=function(c){var d="FIRST"==c.getFieldValue("END")?"indexOf":"lastIndexOf",f=o.JavaScript.valueToCode(c,"FIND",o.JavaScript.ORDER_NONE)||"''";return d=(o.JavaScript.valueToCode(c,"VALUE",o.JavaScript.ORDER_MEMBER)||"[]")+"."+d+"("+f+")",c.workspace.options.oneBasedIndex?[d+" + 1",o.JavaScript.ORDER_ADDITION]:[d,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.lists_getIndex=function(c){var d=c.getFieldValue("MODE")||"GET",f=c.getFieldValue("WHERE")||"FROM_START",v=o.JavaScript.valueToCode(c,"VALUE","RANDOM"==f?o.JavaScript.ORDER_NONE:o.JavaScript.ORDER_MEMBER)||"[]";switch(f){case"FIRST":if("GET"==d)return[v+"[0]",o.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==d)return[v+".shift()",o.JavaScript.ORDER_MEMBER];if("REMOVE"==d)return v+".shift();\n";break;case"LAST":if("GET"==d)return[v+".slice(-1)[0]",o.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==d)return[v+".pop()",o.JavaScript.ORDER_MEMBER];if("REMOVE"==d)return v+".pop();\n";break;case"FROM_START":if(c=o.JavaScript.getAdjusted(c,"AT"),"GET"==d)return[v+"["+c+"]",o.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==d)return[v+".splice("+c+", 1)[0]",o.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==d)return v+".splice("+c+", 1);\n";break;case"FROM_END":if(c=o.JavaScript.getAdjusted(c,"AT",1,!0),"GET"==d)return[v+".slice("+c+")[0]",o.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==d)return[v+".splice("+c+", 1)[0]",o.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==d)return v+".splice("+c+", 1);";break;case"RANDOM":if(v=o.JavaScript.provideFunction_("listsGetRandomItem",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+v+", "+("GET"!=d)+")","GET"==d||"GET_REMOVE"==d)return[v,o.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==d)return v+";\n"}throw Error("Unhandled combination (lists_getIndex).")},o.JavaScript.lists_setIndex=function(c){function d(){if(f.match(/^\w+$/))return"";var O=o.JavaScript.nameDB_.getDistinctName("tmpList",o.VARIABLE_CATEGORY_NAME),U="var "+O+" = "+f+";\n";return f=O,U}var f=o.JavaScript.valueToCode(c,"LIST",o.JavaScript.ORDER_MEMBER)||"[]",v=c.getFieldValue("MODE")||"GET",y=c.getFieldValue("WHERE")||"FROM_START",D=o.JavaScript.valueToCode(c,"TO",o.JavaScript.ORDER_ASSIGNMENT)||"null";switch(y){case"FIRST":if("SET"==v)return f+"[0] = "+D+";\n";if("INSERT"==v)return f+".unshift("+D+");\n";break;case"LAST":if("SET"==v)return(c=d())+(f+"[")+f+".length - 1] = "+D+";\n";if("INSERT"==v)return f+".push("+D+");\n";break;case"FROM_START":if(y=o.JavaScript.getAdjusted(c,"AT"),"SET"==v)return f+"["+y+"] = "+D+";\n";if("INSERT"==v)return f+".splice("+y+", 0, "+D+");\n";break;case"FROM_END":if(y=o.JavaScript.getAdjusted(c,"AT",1,!1,o.JavaScript.ORDER_SUBTRACTION),c=d(),"SET"==v)return c+(f+"[")+f+".length - "+y+"] = "+D+";\n";if("INSERT"==v)return c+(f+".splice(")+f+".length - "+y+", 0, "+D+");\n";break;case"RANDOM":if(c=d(),c+="var "+(y=o.JavaScript.nameDB_.getDistinctName("tmpX",o.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+f+".length);\n","SET"==v)return c+(f+"[")+y+"] = "+D+";\n";if("INSERT"==v)return c+(f+".splice(")+y+", 0, "+D+");\n"}throw Error("Unhandled combination (lists_setIndex).")},o.JavaScript.lists.getIndex_=function(c,d,f){return"FIRST"==d?"0":"FROM_END"==d?c+".length - 1 - "+f:"LAST"==d?c+".length - 1":f},o.JavaScript.lists_getSublist=function(c){var d=o.JavaScript.valueToCode(c,"LIST",o.JavaScript.ORDER_MEMBER)||"[]",f=c.getFieldValue("WHERE1"),v=c.getFieldValue("WHERE2");if("FIRST"==f&&"LAST"==v)d+=".slice(0)";else if(d.match(/^\w+$/)||"FROM_END"!=f&&"FROM_START"==v){switch(f){case"FROM_START":var y=o.JavaScript.getAdjusted(c,"AT1");break;case"FROM_END":y=d+".length - "+(y=o.JavaScript.getAdjusted(c,"AT1",1,!1,o.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":y="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(v){case"FROM_START":c=o.JavaScript.getAdjusted(c,"AT2",1);break;case"FROM_END":c=d+".length - "+(c=o.JavaScript.getAdjusted(c,"AT2",0,!1,o.JavaScript.ORDER_SUBTRACTION));break;case"LAST":c=d+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}d=d+".slice("+y+", "+c+")"}else{y=o.JavaScript.getAdjusted(c,"AT1"),c=o.JavaScript.getAdjusted(c,"AT2");var D=o.JavaScript.lists.getIndex_,O={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};d=o.JavaScript.provideFunction_("subsequence"+O[f]+O[v],["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==f||"FROM_START"==f?", at1":"")+("FROM_END"==v||"FROM_START"==v?", at2":"")+") {","  var start = "+D("sequence",f,"at1")+";","  var end = "+D("sequence",v,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+d+("FROM_END"==f||"FROM_START"==f?", "+y:"")+("FROM_END"==v||"FROM_START"==v?", "+c:"")+")"}return[d,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.lists_sort=function(c){var d=o.JavaScript.valueToCode(c,"LIST",o.JavaScript.ORDER_FUNCTION_CALL)||"[]",f="1"===c.getFieldValue("DIRECTION")?1:-1;return c=c.getFieldValue("TYPE"),[d+".slice().sort("+o.JavaScript.provideFunction_("listsGetSortCompare",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+c+'", '+f+"))",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.lists_split=function(c){var d=o.JavaScript.valueToCode(c,"INPUT",o.JavaScript.ORDER_MEMBER),f=o.JavaScript.valueToCode(c,"DELIM",o.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(c=c.getFieldValue("MODE")))d||(d="''"),c="split";else{if("JOIN"!=c)throw Error("Unknown mode: "+c);d||(d="[]"),c="join"}return[d+"."+c+"("+f+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.lists_reverse=function(c){return[(o.JavaScript.valueToCode(c,"LIST",o.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.logic={},o.JavaScript.controls_if=function(c){var d=0,f="";o.JavaScript.STATEMENT_PREFIX&&(f+=o.JavaScript.injectId(o.JavaScript.STATEMENT_PREFIX,c));do{var v=o.JavaScript.valueToCode(c,"IF"+d,o.JavaScript.ORDER_NONE)||"false",y=o.JavaScript.statementToCode(c,"DO"+d);o.JavaScript.STATEMENT_SUFFIX&&(y=o.JavaScript.prefixLines(o.JavaScript.injectId(o.JavaScript.STATEMENT_SUFFIX,c),o.JavaScript.INDENT)+y),f+=(0<d?" else ":"")+"if ("+v+") {\n"+y+"}",++d}while(c.getInput("IF"+d));return(c.getInput("ELSE")||o.JavaScript.STATEMENT_SUFFIX)&&(y=o.JavaScript.statementToCode(c,"ELSE"),o.JavaScript.STATEMENT_SUFFIX&&(y=o.JavaScript.prefixLines(o.JavaScript.injectId(o.JavaScript.STATEMENT_SUFFIX,c),o.JavaScript.INDENT)+y),f+=" else {\n"+y+"}"),f+"\n"},o.JavaScript.controls_ifelse=o.JavaScript.controls_if,o.JavaScript.logic_compare=function(c){var d={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[c.getFieldValue("OP")],f="=="==d||"!="==d?o.JavaScript.ORDER_EQUALITY:o.JavaScript.ORDER_RELATIONAL;return[(o.JavaScript.valueToCode(c,"A",f)||"0")+" "+d+" "+(c=o.JavaScript.valueToCode(c,"B",f)||"0"),f]},o.JavaScript.logic_operation=function(c){var d="AND"==c.getFieldValue("OP")?"&&":"||",f="&&"==d?o.JavaScript.ORDER_LOGICAL_AND:o.JavaScript.ORDER_LOGICAL_OR,v=o.JavaScript.valueToCode(c,"A",f);if(c=o.JavaScript.valueToCode(c,"B",f),v||c){var y="&&"==d?"true":"false";v||(v=y),c||(c=y)}else c=v="false";return[v+" "+d+" "+c,f]},o.JavaScript.logic_negate=function(c){var d=o.JavaScript.ORDER_LOGICAL_NOT;return["!"+(o.JavaScript.valueToCode(c,"BOOL",d)||"true"),d]},o.JavaScript.logic_boolean=function(c){return["TRUE"==c.getFieldValue("BOOL")?"true":"false",o.JavaScript.ORDER_ATOMIC]},o.JavaScript.logic_null=function(c){return["null",o.JavaScript.ORDER_ATOMIC]},o.JavaScript.logic_ternary=function(c){return[(o.JavaScript.valueToCode(c,"IF",o.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(o.JavaScript.valueToCode(c,"THEN",o.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(c=o.JavaScript.valueToCode(c,"ELSE",o.JavaScript.ORDER_CONDITIONAL)||"null"),o.JavaScript.ORDER_CONDITIONAL]},o.JavaScript.loops={},o.JavaScript.controls_repeat_ext=function(c){var d=c.getField("TIMES")?String(Number(c.getFieldValue("TIMES"))):o.JavaScript.valueToCode(c,"TIMES",o.JavaScript.ORDER_ASSIGNMENT)||"0",f=o.JavaScript.statementToCode(c,"DO");f=o.JavaScript.addLoopTrap(f,c),c="";var v=o.JavaScript.nameDB_.getDistinctName("count",o.VARIABLE_CATEGORY_NAME),y=d;return d.match(/^\w+$/)||o.isNumber(d)||(c+="var "+(y=o.JavaScript.nameDB_.getDistinctName("repeat_end",o.VARIABLE_CATEGORY_NAME))+" = "+d+";\n"),c+"for (var "+v+" = 0; "+v+" < "+y+"; "+v+"++) {\n"+f+"}\n"},o.JavaScript.controls_repeat=o.JavaScript.controls_repeat_ext,o.JavaScript.controls_whileUntil=function(c){var d="UNTIL"==c.getFieldValue("MODE"),f=o.JavaScript.valueToCode(c,"BOOL",d?o.JavaScript.ORDER_LOGICAL_NOT:o.JavaScript.ORDER_NONE)||"false",v=o.JavaScript.statementToCode(c,"DO");return d&&(f="!"+f),"while ("+f+") {\n"+(v=o.JavaScript.addLoopTrap(v,c))+"}\n"},o.JavaScript.controls_for=function(c){var d=o.JavaScript.nameDB_.getName(c.getFieldValue("VAR"),o.VARIABLE_CATEGORY_NAME),f=o.JavaScript.valueToCode(c,"FROM",o.JavaScript.ORDER_ASSIGNMENT)||"0",v=o.JavaScript.valueToCode(c,"TO",o.JavaScript.ORDER_ASSIGNMENT)||"0",y=o.JavaScript.valueToCode(c,"BY",o.JavaScript.ORDER_ASSIGNMENT)||"1",D=o.JavaScript.statementToCode(c,"DO");if(D=o.JavaScript.addLoopTrap(D,c),o.isNumber(f)&&o.isNumber(v)&&o.isNumber(y)){var O=Number(f)<=Number(v);c="for ("+d+" = "+f+"; "+d+(O?" <= ":" >= ")+v+"; "+d,c=(1==(d=Math.abs(Number(y)))?c+(O?"++":"--"):c+(O?" += ":" -= ")+d)+") {\n"+D+"}\n"}else c="",O=f,f.match(/^\w+$/)||o.isNumber(f)||(c+="var "+(O=o.JavaScript.nameDB_.getDistinctName(d+"_start",o.VARIABLE_CATEGORY_NAME))+" = "+f+";\n"),f=v,v.match(/^\w+$/)||o.isNumber(v)||(c+="var "+(f=o.JavaScript.nameDB_.getDistinctName(d+"_end",o.VARIABLE_CATEGORY_NAME))+" = "+v+";\n"),c+="var "+(v=o.JavaScript.nameDB_.getDistinctName(d+"_inc",o.VARIABLE_CATEGORY_NAME))+" = ",c=(c=o.isNumber(y)?c+(Math.abs(y)+";\n"):c+"Math.abs("+y+");\n")+"if ("+O+" > "+f+") {\n"+(o.JavaScript.INDENT+v)+" = -"+v+";\n",c+="}\n",c+="for ("+d+" = "+O+"; "+v+" >= 0 ? "+d+" <= "+f+" : "+d+" >= "+f+"; "+d+" += "+v+") {\n"+D+"}\n";return c},o.JavaScript.controls_forEach=function(c){var d=o.JavaScript.nameDB_.getName(c.getFieldValue("VAR"),o.VARIABLE_CATEGORY_NAME),f=o.JavaScript.valueToCode(c,"LIST",o.JavaScript.ORDER_ASSIGNMENT)||"[]",v=o.JavaScript.statementToCode(c,"DO");v=o.JavaScript.addLoopTrap(v,c),c="";var y=f;return f.match(/^\w+$/)||(c+="var "+(y=o.JavaScript.nameDB_.getDistinctName(d+"_list",o.VARIABLE_CATEGORY_NAME))+" = "+f+";\n"),c+"for (var "+(f=o.JavaScript.nameDB_.getDistinctName(d+"_index",o.VARIABLE_CATEGORY_NAME))+" in "+y+") {\n"+(v=o.JavaScript.INDENT+d+" = "+y+"["+f+"];\n"+v)+"}\n"},o.JavaScript.controls_flow_statements=function(c){var d="";if(o.JavaScript.STATEMENT_PREFIX&&(d+=o.JavaScript.injectId(o.JavaScript.STATEMENT_PREFIX,c)),o.JavaScript.STATEMENT_SUFFIX&&(d+=o.JavaScript.injectId(o.JavaScript.STATEMENT_SUFFIX,c)),o.JavaScript.STATEMENT_PREFIX){var f=o.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(c);f&&!f.suppressPrefixSuffix&&(d+=o.JavaScript.injectId(o.JavaScript.STATEMENT_PREFIX,f))}switch(c.getFieldValue("FLOW")){case"BREAK":return d+"break;\n";case"CONTINUE":return d+"continue;\n"}throw Error("Unknown flow statement.")},o.JavaScript.math={},o.JavaScript.math_number=function(c){return[c=Number(c.getFieldValue("NUM")),0<=c?o.JavaScript.ORDER_ATOMIC:o.JavaScript.ORDER_UNARY_NEGATION]},o.JavaScript.math_arithmetic=function(c){var d={ADD:[" + ",o.JavaScript.ORDER_ADDITION],MINUS:[" - ",o.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",o.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",o.JavaScript.ORDER_DIVISION],POWER:[null,o.JavaScript.ORDER_NONE]}[c.getFieldValue("OP")],f=d[0],v=o.JavaScript.valueToCode(c,"A",d=d[1])||"0";return c=o.JavaScript.valueToCode(c,"B",d)||"0",f?[v+f+c,d]:["Math.pow("+v+", "+c+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.math_single=function(c){var d=c.getFieldValue("OP");if("NEG"==d)return"-"==(c=o.JavaScript.valueToCode(c,"NUM",o.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(c=" "+c),["-"+c,o.JavaScript.ORDER_UNARY_NEGATION];switch(c="SIN"==d||"COS"==d||"TAN"==d?o.JavaScript.valueToCode(c,"NUM",o.JavaScript.ORDER_DIVISION)||"0":o.JavaScript.valueToCode(c,"NUM",o.JavaScript.ORDER_NONE)||"0",d){case"ABS":var f="Math.abs("+c+")";break;case"ROOT":f="Math.sqrt("+c+")";break;case"LN":f="Math.log("+c+")";break;case"EXP":f="Math.exp("+c+")";break;case"POW10":f="Math.pow(10,"+c+")";break;case"ROUND":f="Math.round("+c+")";break;case"ROUNDUP":f="Math.ceil("+c+")";break;case"ROUNDDOWN":f="Math.floor("+c+")";break;case"SIN":f="Math.sin("+c+" / 180 * Math.PI)";break;case"COS":f="Math.cos("+c+" / 180 * Math.PI)";break;case"TAN":f="Math.tan("+c+" / 180 * Math.PI)"}if(f)return[f,o.JavaScript.ORDER_FUNCTION_CALL];switch(d){case"LOG10":f="Math.log("+c+") / Math.log(10)";break;case"ASIN":f="Math.asin("+c+") / Math.PI * 180";break;case"ACOS":f="Math.acos("+c+") / Math.PI * 180";break;case"ATAN":f="Math.atan("+c+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+d)}return[f,o.JavaScript.ORDER_DIVISION]},o.JavaScript.math_constant=function(c){return{PI:["Math.PI",o.JavaScript.ORDER_MEMBER],E:["Math.E",o.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",o.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",o.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",o.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",o.JavaScript.ORDER_ATOMIC]}[c.getFieldValue("CONSTANT")]},o.JavaScript.math_number_property=function(c){var d=o.JavaScript.valueToCode(c,"NUMBER_TO_CHECK",o.JavaScript.ORDER_MODULUS)||"0",f=c.getFieldValue("PROPERTY");if("PRIME"==f)return[o.JavaScript.provideFunction_("mathIsPrime",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+d+")",o.JavaScript.ORDER_FUNCTION_CALL];switch(f){case"EVEN":var v=d+" % 2 == 0";break;case"ODD":v=d+" % 2 == 1";break;case"WHOLE":v=d+" % 1 == 0";break;case"POSITIVE":v=d+" > 0";break;case"NEGATIVE":v=d+" < 0";break;case"DIVISIBLE_BY":v=d+" % "+(c=o.JavaScript.valueToCode(c,"DIVISOR",o.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[v,o.JavaScript.ORDER_EQUALITY]},o.JavaScript.math_change=function(c){var d=o.JavaScript.valueToCode(c,"DELTA",o.JavaScript.ORDER_ADDITION)||"0";return(c=o.JavaScript.nameDB_.getName(c.getFieldValue("VAR"),o.VARIABLE_CATEGORY_NAME))+" = (typeof "+c+" == 'number' ? "+c+" : 0) + "+d+";\n"},o.JavaScript.math_round=o.JavaScript.math_single,o.JavaScript.math_trig=o.JavaScript.math_single,o.JavaScript.math_on_list=function(c){var d=c.getFieldValue("OP");switch(d){case"SUM":c=o.JavaScript.valueToCode(c,"LIST",o.JavaScript.ORDER_MEMBER)||"[]",c+=".reduce(function(x, y) {return x + y;})";break;case"MIN":c="Math.min.apply(null, "+(c=o.JavaScript.valueToCode(c,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":c="Math.max.apply(null, "+(c=o.JavaScript.valueToCode(c,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":c=(d=o.JavaScript.provideFunction_("mathMean",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(c=o.JavaScript.valueToCode(c,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":c=(d=o.JavaScript.provideFunction_("mathMedian",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(c=o.JavaScript.valueToCode(c,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":c=(d=o.JavaScript.provideFunction_("mathModes",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(c=o.JavaScript.valueToCode(c,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":c=(d=o.JavaScript.provideFunction_("mathStandardDeviation",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(c=o.JavaScript.valueToCode(c,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":c=(d=o.JavaScript.provideFunction_("mathRandomList",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(c=o.JavaScript.valueToCode(c,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+d)}return[c,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.math_modulo=function(c){return[(o.JavaScript.valueToCode(c,"DIVIDEND",o.JavaScript.ORDER_MODULUS)||"0")+" % "+(c=o.JavaScript.valueToCode(c,"DIVISOR",o.JavaScript.ORDER_MODULUS)||"0"),o.JavaScript.ORDER_MODULUS]},o.JavaScript.math_constrain=function(c){return["Math.min(Math.max("+(o.JavaScript.valueToCode(c,"VALUE",o.JavaScript.ORDER_NONE)||"0")+", "+(o.JavaScript.valueToCode(c,"LOW",o.JavaScript.ORDER_NONE)||"0")+"), "+(c=o.JavaScript.valueToCode(c,"HIGH",o.JavaScript.ORDER_NONE)||"Infinity")+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.math_random_int=function(c){var d=o.JavaScript.valueToCode(c,"FROM",o.JavaScript.ORDER_NONE)||"0";return c=o.JavaScript.valueToCode(c,"TO",o.JavaScript.ORDER_NONE)||"0",[o.JavaScript.provideFunction_("mathRandomInt",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+d+", "+c+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.math_random_float=function(c){return["Math.random()",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.math_atan2=function(c){var d=o.JavaScript.valueToCode(c,"X",o.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(o.JavaScript.valueToCode(c,"Y",o.JavaScript.ORDER_NONE)||"0")+", "+d+") / Math.PI * 180",o.JavaScript.ORDER_DIVISION]},o.JavaScript.procedures={},o.JavaScript.procedures_defreturn=function(c){var d=o.JavaScript.nameDB_.getName(c.getFieldValue("NAME"),o.PROCEDURE_CATEGORY_NAME),f="";o.JavaScript.STATEMENT_PREFIX&&(f+=o.JavaScript.injectId(o.JavaScript.STATEMENT_PREFIX,c)),o.JavaScript.STATEMENT_SUFFIX&&(f+=o.JavaScript.injectId(o.JavaScript.STATEMENT_SUFFIX,c)),f&&(f=o.JavaScript.prefixLines(f,o.JavaScript.INDENT));var v="";o.JavaScript.INFINITE_LOOP_TRAP&&(v=o.JavaScript.prefixLines(o.JavaScript.injectId(o.JavaScript.INFINITE_LOOP_TRAP,c),o.JavaScript.INDENT));var y=o.JavaScript.statementToCode(c,"STACK"),D=o.JavaScript.valueToCode(c,"RETURN",o.JavaScript.ORDER_NONE)||"",O="";y&&D&&(O=f),D&&(D=o.JavaScript.INDENT+"return "+D+";\n");for(var U=[],X=c.getVars(),H=0;H<X.length;H++)U[H]=o.JavaScript.nameDB_.getName(X[H],o.VARIABLE_CATEGORY_NAME);return f="function "+d+"("+U.join(", ")+") {\n"+f+v+y+O+D+"}",f=o.JavaScript.scrub_(c,f),o.JavaScript.definitions_["%"+d]=f,null},o.JavaScript.procedures_defnoreturn=o.JavaScript.procedures_defreturn,o.JavaScript.procedures_callreturn=function(c){for(var d=o.JavaScript.nameDB_.getName(c.getFieldValue("NAME"),o.PROCEDURE_CATEGORY_NAME),f=[],v=c.getVars(),y=0;y<v.length;y++)f[y]=o.JavaScript.valueToCode(c,"ARG"+y,o.JavaScript.ORDER_NONE)||"null";return[d+"("+f.join(", ")+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.procedures_callnoreturn=function(c){return o.JavaScript.procedures_callreturn(c)[0]+";\n"},o.JavaScript.procedures_ifreturn=function(c){var d="if ("+(o.JavaScript.valueToCode(c,"CONDITION",o.JavaScript.ORDER_NONE)||"false")+") {\n";return o.JavaScript.STATEMENT_SUFFIX&&(d+=o.JavaScript.prefixLines(o.JavaScript.injectId(o.JavaScript.STATEMENT_SUFFIX,c),o.JavaScript.INDENT)),c.hasReturnValue_?(c=o.JavaScript.valueToCode(c,"VALUE",o.JavaScript.ORDER_NONE)||"null",d+=o.JavaScript.INDENT+"return "+c+";\n"):d+=o.JavaScript.INDENT+"return;\n",d+"}\n"},o.JavaScript.texts={},o.JavaScript.text=function(c){return[o.JavaScript.quote_(c.getFieldValue("TEXT")),o.JavaScript.ORDER_ATOMIC]},o.JavaScript.text_multiline=function(c){var d=-1!=(c=o.JavaScript.multiline_quote_(c.getFieldValue("TEXT"))).indexOf("+")?o.JavaScript.ORDER_ADDITION:o.JavaScript.ORDER_ATOMIC;return[c,d]},o.JavaScript.text.forceString_=function(c){return o.JavaScript.text.forceString_.strRegExp.test(c)?[c,o.JavaScript.ORDER_ATOMIC]:["String("+c+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,o.JavaScript.text_join=function(c){switch(c.itemCount_){case 0:return["''",o.JavaScript.ORDER_ATOMIC];case 1:return c=o.JavaScript.valueToCode(c,"ADD0",o.JavaScript.ORDER_NONE)||"''",o.JavaScript.text.forceString_(c);case 2:var d=o.JavaScript.valueToCode(c,"ADD0",o.JavaScript.ORDER_NONE)||"''";return c=o.JavaScript.valueToCode(c,"ADD1",o.JavaScript.ORDER_NONE)||"''",[c=o.JavaScript.text.forceString_(d)[0]+" + "+o.JavaScript.text.forceString_(c)[0],o.JavaScript.ORDER_ADDITION];default:d=Array(c.itemCount_);for(var f=0;f<c.itemCount_;f++)d[f]=o.JavaScript.valueToCode(c,"ADD"+f,o.JavaScript.ORDER_NONE)||"''";return[c="["+d.join(",")+"].join('')",o.JavaScript.ORDER_FUNCTION_CALL]}},o.JavaScript.text_append=function(c){var d=o.JavaScript.nameDB_.getName(c.getFieldValue("VAR"),o.VARIABLE_CATEGORY_NAME);return c=o.JavaScript.valueToCode(c,"TEXT",o.JavaScript.ORDER_NONE)||"''",d+" += "+o.JavaScript.text.forceString_(c)[0]+";\n"},o.JavaScript.text_length=function(c){return[(o.JavaScript.valueToCode(c,"VALUE",o.JavaScript.ORDER_MEMBER)||"''")+".length",o.JavaScript.ORDER_MEMBER]},o.JavaScript.text_isEmpty=function(c){return["!"+(o.JavaScript.valueToCode(c,"VALUE",o.JavaScript.ORDER_MEMBER)||"''")+".length",o.JavaScript.ORDER_LOGICAL_NOT]},o.JavaScript.text_indexOf=function(c){var d="FIRST"==c.getFieldValue("END")?"indexOf":"lastIndexOf",f=o.JavaScript.valueToCode(c,"FIND",o.JavaScript.ORDER_NONE)||"''";return d=(o.JavaScript.valueToCode(c,"VALUE",o.JavaScript.ORDER_MEMBER)||"''")+"."+d+"("+f+")",c.workspace.options.oneBasedIndex?[d+" + 1",o.JavaScript.ORDER_ADDITION]:[d,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_charAt=function(c){var d=c.getFieldValue("WHERE")||"FROM_START",f=o.JavaScript.valueToCode(c,"VALUE","RANDOM"==d?o.JavaScript.ORDER_NONE:o.JavaScript.ORDER_MEMBER)||"''";switch(d){case"FIRST":return[f+".charAt(0)",o.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[f+".slice(-1)",o.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[f+".charAt("+(c=o.JavaScript.getAdjusted(c,"AT"))+")",o.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[f+".slice("+(c=o.JavaScript.getAdjusted(c,"AT",1,!0))+").charAt(0)",o.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[o.JavaScript.provideFunction_("textRandomLetter",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+f+")",o.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},o.JavaScript.text.getIndex_=function(c,d,f){return"FIRST"==d?"0":"FROM_END"==d?c+".length - 1 - "+f:"LAST"==d?c+".length - 1":f},o.JavaScript.text_getSubstring=function(c){var d=c.getFieldValue("WHERE1"),f=c.getFieldValue("WHERE2"),v="FROM_END"!=d&&"LAST"!=d&&"FROM_END"!=f&&"LAST"!=f,y=o.JavaScript.valueToCode(c,"STRING",v?o.JavaScript.ORDER_MEMBER:o.JavaScript.ORDER_NONE)||"''";if("FIRST"==d&&"LAST"==f)return[y,o.JavaScript.ORDER_NONE];if(y.match(/^'?\w+'?$/)||v){switch(d){case"FROM_START":v=o.JavaScript.getAdjusted(c,"AT1");break;case"FROM_END":v=y+".length - "+(v=o.JavaScript.getAdjusted(c,"AT1",1,!1,o.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":v="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(f){case"FROM_START":c=o.JavaScript.getAdjusted(c,"AT2",1);break;case"FROM_END":c=y+".length - "+(c=o.JavaScript.getAdjusted(c,"AT2",0,!1,o.JavaScript.ORDER_SUBTRACTION));break;case"LAST":c=y+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}d=y+".slice("+v+", "+c+")"}else{v=o.JavaScript.getAdjusted(c,"AT1"),c=o.JavaScript.getAdjusted(c,"AT2");var D=o.JavaScript.text.getIndex_,O={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};d=o.JavaScript.provideFunction_("subsequence"+O[d]+O[f],["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==d||"FROM_START"==d?", at1":"")+("FROM_END"==f||"FROM_START"==f?", at2":"")+") {","  var start = "+D("sequence",d,"at1")+";","  var end = "+D("sequence",f,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+y+("FROM_END"==d||"FROM_START"==d?", "+v:"")+("FROM_END"==f||"FROM_START"==f?", "+c:"")+")"}return[d,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_changeCase=function(c){var d={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[c.getFieldValue("CASE")];return c=o.JavaScript.valueToCode(c,"TEXT",d?o.JavaScript.ORDER_MEMBER:o.JavaScript.ORDER_NONE)||"''",[d?c+d:o.JavaScript.provideFunction_("textToTitleCase",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+c+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_trim=function(c){var d={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[c.getFieldValue("MODE")];return[(o.JavaScript.valueToCode(c,"TEXT",o.JavaScript.ORDER_MEMBER)||"''")+d,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_print=function(c){return"window.alert("+(o.JavaScript.valueToCode(c,"TEXT",o.JavaScript.ORDER_NONE)||"''")+");\n"},o.JavaScript.text_prompt_ext=function(c){var d="window.prompt("+(c.getField("TEXT")?o.JavaScript.quote_(c.getFieldValue("TEXT")):o.JavaScript.valueToCode(c,"TEXT",o.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==c.getFieldValue("TYPE")&&(d="Number("+d+")"),[d,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_prompt=o.JavaScript.text_prompt_ext,o.JavaScript.text_count=function(c){var d=o.JavaScript.valueToCode(c,"TEXT",o.JavaScript.ORDER_NONE)||"''";return c=o.JavaScript.valueToCode(c,"SUB",o.JavaScript.ORDER_NONE)||"''",[o.JavaScript.provideFunction_("textCount",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+d+", "+c+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_replace=function(c){var d=o.JavaScript.valueToCode(c,"TEXT",o.JavaScript.ORDER_NONE)||"''",f=o.JavaScript.valueToCode(c,"FROM",o.JavaScript.ORDER_NONE)||"''";return c=o.JavaScript.valueToCode(c,"TO",o.JavaScript.ORDER_NONE)||"''",[o.JavaScript.provideFunction_("textReplace",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+d+", "+f+", "+c+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_reverse=function(c){return[(o.JavaScript.valueToCode(c,"TEXT",o.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.variables={},o.JavaScript.variables_get=function(c){return[o.JavaScript.nameDB_.getName(c.getFieldValue("VAR"),o.VARIABLE_CATEGORY_NAME),o.JavaScript.ORDER_ATOMIC]},o.JavaScript.variables_set=function(c){var d=o.JavaScript.valueToCode(c,"VALUE",o.JavaScript.ORDER_ASSIGNMENT)||"0";return o.JavaScript.nameDB_.getName(c.getFieldValue("VAR"),o.VARIABLE_CATEGORY_NAME)+" = "+d+";\n"},o.JavaScript.variablesDynamic={},o.JavaScript.variables_get_dynamic=o.JavaScript.variables_get,o.JavaScript.variables_set_dynamic=o.JavaScript.variables_set,o.JavaScript})?E.apply(A,R):E)&&(S.exports=a)},59090:function(S,A,_){var E,R,a;R=[_(81846)],void 0!==(a="function"==typeof(E=function(o){return(o={Msg:{}}).Msg.ADD_COMMENT="Add Comment",o.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",o.Msg.CHANGE_VALUE_TITLE="Change value:",o.Msg.CLEAN_UP="Clean up Blocks",o.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",o.Msg.COLLAPSE_ALL="Collapse Blocks",o.Msg.COLLAPSE_BLOCK="Collapse Block",o.Msg.COLOUR_BLEND_COLOUR1="colour 1",o.Msg.COLOUR_BLEND_COLOUR2="colour 2",o.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",o.Msg.COLOUR_BLEND_RATIO="ratio",o.Msg.COLOUR_BLEND_TITLE="blend",o.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",o.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",o.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",o.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",o.Msg.COLOUR_RANDOM_TITLE="random colour",o.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",o.Msg.COLOUR_RGB_BLUE="blue",o.Msg.COLOUR_RGB_GREEN="green",o.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",o.Msg.COLOUR_RGB_RED="red",o.Msg.COLOUR_RGB_TITLE="colour with",o.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",o.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",o.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",o.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",o.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",o.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",o.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",o.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",o.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",o.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",o.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",o.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",o.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",o.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",o.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",o.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",o.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",o.Msg.CONTROLS_IF_MSG_ELSE="else",o.Msg.CONTROLS_IF_MSG_ELSEIF="else if",o.Msg.CONTROLS_IF_MSG_IF="if",o.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",o.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",o.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",o.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",o.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",o.Msg.CONTROLS_REPEAT_INPUT_DO="do",o.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",o.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",o.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",o.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",o.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",o.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",o.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",o.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",o.Msg.DELETE_BLOCK="Delete Block",o.Msg.DELETE_VARIABLE="Delete the '%1' variable",o.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",o.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",o.Msg.DISABLE_BLOCK="Disable Block",o.Msg.DUPLICATE_BLOCK="Duplicate",o.Msg.DUPLICATE_COMMENT="Duplicate Comment",o.Msg.ENABLE_BLOCK="Enable Block",o.Msg.EXPAND_ALL="Expand Blocks",o.Msg.EXPAND_BLOCK="Expand Block",o.Msg.EXTERNAL_INPUTS="External Inputs",o.Msg.HELP="Help",o.Msg.INLINE_INPUTS="Inline Inputs",o.Msg.IOS_CANCEL="Cancel",o.Msg.IOS_ERROR="Error",o.Msg.IOS_OK="OK",o.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",o.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",o.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",o.Msg.IOS_PROCEDURES_INPUTS="INPUTS",o.Msg.IOS_VARIABLES_ADD_BUTTON="Add",o.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",o.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",o.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",o.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",o.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",o.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",o.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",o.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",o.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",o.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",o.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",o.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",o.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",o.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",o.Msg.LISTS_GET_INDEX_FIRST="first",o.Msg.LISTS_GET_INDEX_FROM_END="# from end",o.Msg.LISTS_GET_INDEX_FROM_START="#",o.Msg.LISTS_GET_INDEX_GET="get",o.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",o.Msg.LISTS_GET_INDEX_LAST="last",o.Msg.LISTS_GET_INDEX_RANDOM="random",o.Msg.LISTS_GET_INDEX_REMOVE="remove",o.Msg.LISTS_GET_INDEX_TAIL="",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",o.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",o.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",o.Msg.LISTS_GET_SUBLIST_END_LAST="to last",o.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",o.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",o.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",o.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",o.Msg.LISTS_GET_SUBLIST_TAIL="",o.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",o.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",o.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",o.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",o.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",o.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",o.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",o.Msg.LISTS_INLIST="in list",o.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",o.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",o.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",o.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",o.Msg.LISTS_LENGTH_TITLE="length of %1",o.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",o.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",o.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",o.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",o.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",o.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",o.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",o.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",o.Msg.LISTS_SET_INDEX_INPUT_TO="as",o.Msg.LISTS_SET_INDEX_INSERT="insert at",o.Msg.LISTS_SET_INDEX_SET="set",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",o.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",o.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",o.Msg.LISTS_SORT_ORDER_DESCENDING="descending",o.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",o.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",o.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",o.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",o.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",o.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",o.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",o.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",o.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",o.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",o.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",o.Msg.LOGIC_BOOLEAN_FALSE="false",o.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",o.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",o.Msg.LOGIC_BOOLEAN_TRUE="true",o.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",o.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",o.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",o.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",o.Msg.LOGIC_NEGATE_TITLE="not %1",o.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",o.Msg.LOGIC_NULL="null",o.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",o.Msg.LOGIC_NULL_TOOLTIP="Returns null.",o.Msg.LOGIC_OPERATION_AND="and",o.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",o.Msg.LOGIC_OPERATION_OR="or",o.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",o.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",o.Msg.LOGIC_TERNARY_CONDITION="test",o.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",o.Msg.LOGIC_TERNARY_IF_FALSE="if false",o.Msg.LOGIC_TERNARY_IF_TRUE="if true",o.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",o.Msg.MATH_ADDITION_SYMBOL="+",o.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",o.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",o.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",o.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",o.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",o.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",o.Msg.MATH_CHANGE_TITLE="change %1 by %2",o.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",o.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",o.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",o.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",o.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",o.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",o.Msg.MATH_DIVISION_SYMBOL="\xf7",o.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",o.Msg.MATH_IS_EVEN="is even",o.Msg.MATH_IS_NEGATIVE="is negative",o.Msg.MATH_IS_ODD="is odd",o.Msg.MATH_IS_POSITIVE="is positive",o.Msg.MATH_IS_PRIME="is prime",o.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",o.Msg.MATH_IS_WHOLE="is whole",o.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",o.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",o.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",o.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",o.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",o.Msg.MATH_NUMBER_TOOLTIP="A number.",o.Msg.MATH_ONLIST_HELPURL="",o.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",o.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",o.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",o.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",o.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",o.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",o.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",o.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",o.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",o.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",o.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",o.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",o.Msg.MATH_POWER_SYMBOL="^",o.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",o.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",o.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",o.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",o.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",o.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",o.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",o.Msg.MATH_ROUND_OPERATOR_ROUND="round",o.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",o.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",o.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",o.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",o.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",o.Msg.MATH_SINGLE_OP_ROOT="square root",o.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",o.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",o.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",o.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",o.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",o.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",o.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",o.Msg.MATH_SUBTRACTION_SYMBOL="-",o.Msg.MATH_TRIG_ACOS="acos",o.Msg.MATH_TRIG_ASIN="asin",o.Msg.MATH_TRIG_ATAN="atan",o.Msg.MATH_TRIG_COS="cos",o.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",o.Msg.MATH_TRIG_SIN="sin",o.Msg.MATH_TRIG_TAN="tan",o.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",o.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",o.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",o.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",o.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",o.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",o.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",o.Msg.NEW_NUMBER_VARIABLE="Create number variable...",o.Msg.NEW_STRING_VARIABLE="Create string variable...",o.Msg.NEW_VARIABLE="Create variable...",o.Msg.NEW_VARIABLE_TITLE="New variable name:",o.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",o.Msg.ORDINAL_NUMBER_SUFFIX="",o.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",o.Msg.PROCEDURES_BEFORE_PARAMS="with:",o.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",o.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",o.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",o.Msg.PROCEDURES_CREATE_DO="Create '%1'",o.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",o.Msg.PROCEDURES_DEFNORETURN_DO="",o.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",o.Msg.PROCEDURES_DEFNORETURN_TITLE="to",o.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",o.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_DEFRETURN_RETURN="return",o.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",o.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",o.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",o.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",o.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",o.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",o.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",o.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",o.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",o.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",o.Msg.REDO="Redo",o.Msg.REMOVE_COMMENT="Remove Comment",o.Msg.RENAME_VARIABLE="Rename variable...",o.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",o.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",o.Msg.TEXT_APPEND_TITLE="to %1 append text %2",o.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",o.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",o.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",o.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",o.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",o.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",o.Msg.TEXT_CHARAT_FIRST="get first letter",o.Msg.TEXT_CHARAT_FROM_END="get letter # from end",o.Msg.TEXT_CHARAT_FROM_START="get letter #",o.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",o.Msg.TEXT_CHARAT_LAST="get last letter",o.Msg.TEXT_CHARAT_RANDOM="get random letter",o.Msg.TEXT_CHARAT_TAIL="",o.Msg.TEXT_CHARAT_TITLE="in text %1 %2",o.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",o.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",o.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",o.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",o.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",o.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",o.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",o.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",o.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",o.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",o.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",o.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",o.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",o.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",o.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",o.Msg.TEXT_GET_SUBSTRING_TAIL="",o.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",o.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",o.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",o.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",o.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",o.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",o.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",o.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",o.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",o.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",o.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",o.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",o.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",o.Msg.TEXT_LENGTH_TITLE="length of %1",o.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",o.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",o.Msg.TEXT_PRINT_TITLE="print %1",o.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",o.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",o.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",o.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",o.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",o.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",o.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",o.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",o.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",o.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",o.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",o.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",o.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",o.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",o.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",o.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",o.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",o.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",o.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",o.Msg.TODAY="Today",o.Msg.UNDO="Undo",o.Msg.UNNAMED_KEY="unnamed",o.Msg.VARIABLES_DEFAULT_NAME="item",o.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",o.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",o.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",o.Msg.VARIABLES_SET="set %1 to %2",o.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",o.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",o.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",o.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",o.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",o.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",o.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",o.Msg.CONTROLS_FOREACH_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_FOR_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=o.Msg.CONTROLS_IF_MSG_ELSEIF,o.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=o.Msg.CONTROLS_IF_MSG_ELSE,o.Msg.CONTROLS_IF_IF_TITLE_IF=o.Msg.CONTROLS_IF_MSG_IF,o.Msg.CONTROLS_IF_MSG_THEN=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.LISTS_CREATE_WITH_ITEM_TITLE=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.LISTS_GET_INDEX_HELPURL=o.Msg.LISTS_INDEX_OF_HELPURL,o.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.MATH_CHANGE_TITLE_ITEM=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.PROCEDURES_DEFRETURN_COMMENT=o.Msg.PROCEDURES_DEFNORETURN_COMMENT,o.Msg.PROCEDURES_DEFRETURN_DO=o.Msg.PROCEDURES_DEFNORETURN_DO,o.Msg.PROCEDURES_DEFRETURN_PROCEDURE=o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,o.Msg.PROCEDURES_DEFRETURN_TITLE=o.Msg.PROCEDURES_DEFNORETURN_TITLE,o.Msg.TEXT_APPEND_VARIABLE=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.MATH_HUE="230",o.Msg.LOOPS_HUE="120",o.Msg.LISTS_HUE="260",o.Msg.LOGIC_HUE="210",o.Msg.VARIABLES_HUE="330",o.Msg.TEXTS_HUE="160",o.Msg.PROCEDURES_HUE="290",o.Msg.COLOUR_HUE="20",o.Msg.VARIABLES_DYNAMIC_HUE="310",o.Msg})?E.apply(A,R):E)&&(S.exports=a)},45149:function(S){S.exports=function(){"use strict";function A(L){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(L)}var L,E=(L={},function(Y){var ae=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return L[ae]=L[ae]||0,void 0===Y[ae]&&(Y[ae]=L[ae]++),Y[ae]});function R(L,F,Y){if(L)for(var ae=0,pe=L.length;ae<pe;ae++)F(L[ae],ae);"function"==typeof Y&&Y()}var a=new function(){var F="introjs_event";this._id=function(Y,ae,pe,Ie){return ae+E(pe)+(Ie?"_".concat(E(Ie)):"")},this.on=function(Y,ae,pe,Ie,ve){var Me=this._id.apply(this,arguments),Ge=function(Je){return pe.call(Ie||Y,Je||window.event)};"addEventListener"in Y?Y.addEventListener(ae,Ge,ve):"attachEvent"in Y&&Y.attachEvent("on".concat(ae),Ge),Y[F]=Y[F]||{},Y[F][Me]=Ge},this.off=function(Y,ae,pe,Ie,ve){var Me=this._id.apply(this,arguments),Ge=Y[F]&&Y[F][Me];!Ge||("removeEventListener"in Y?Y.removeEventListener(ae,Ge,ve):"detachEvent"in Y&&Y.detachEvent("on".concat(ae),Ge),Y[F][Me]=null)}},o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(L,F){return L(F={exports:{}},F.exports),F.exports}var Ft,Wt,d=function(L){return L&&L.Math==Math&&L},f=d("object"==typeof globalThis&&globalThis)||d("object"==typeof window&&window)||d("object"==typeof self&&self)||d("object"==typeof o&&o)||function(){return this}()||Function("return this")(),v=function(L){try{return!!L()}catch(F){return!0}},y=!v(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),D=Function.prototype.call,O=D.bind?D.bind(D):function(){return D.apply(D,arguments)},U={}.propertyIsEnumerable,X=Object.getOwnPropertyDescriptor,ee={f:X&&!U.call({1:2},1)?function(F){var Y=X(this,F);return!!Y&&Y.enumerable}:U},J=function(L,F){return{enumerable:!(1&L),configurable:!(2&L),writable:!(4&L),value:F}},ue=Function.prototype,se=ue.bind,_e=ue.call,re=se&&se.bind(_e),q=se?function(L){return L&&re(_e,L)}:function(L){return L&&function(){return _e.apply(L,arguments)}},ie=q({}.toString),Z=q("".slice),G=function(L){return Z(ie(L),8,-1)},fe=f.Object,Q=q("".split),j=v(function(){return!fe("z").propertyIsEnumerable(0)})?function(L){return"String"==G(L)?Q(L,""):fe(L)}:fe,oe=f.TypeError,de=function(L){if(null==L)throw oe("Can't call method on "+L);return L},ye=function(L){return j(de(L))},ce=function(L){return"function"==typeof L},Ce=function(L){return"object"==typeof L?null!==L:ce(L)},Be=function(L){return ce(L)?L:void 0},ot=function(L,F){return arguments.length<2?Be(f[L]):f[L]&&f[L][F]},De=q({}.isPrototypeOf),Ue=ot("navigator","userAgent")||"",Xe=f.process,at=f.Deno,ut=Xe&&Xe.versions||at&&at.version,Qe=ut&&ut.v8;Qe&&(Wt=(Ft=Qe.split("."))[0]>0&&Ft[0]<4?1:+(Ft[0]+Ft[1])),!Wt&&Ue&&(!(Ft=Ue.match(/Edge\/(\d+)/))||Ft[1]>=74)&&(Ft=Ue.match(/Chrome\/(\d+)/))&&(Wt=+Ft[1]);var ln=Wt,Pn=!!Object.getOwnPropertySymbols&&!v(function(){var L=Symbol();return!String(L)||!(Object(L)instanceof Symbol)||!Symbol.sham&&ln&&ln<41}),Kn=Pn&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Vn=f.Object,Jt=Kn?function(L){return"symbol"==typeof L}:function(L){var F=ot("Symbol");return ce(F)&&De(F.prototype,Vn(L))},Nn=f.String,Yt=function(L){try{return Nn(L)}catch(F){return"Object"}},Dn=f.TypeError,Ke=function(L){if(ce(L))return L;throw Dn(Yt(L)+" is not a function")},Ri=function(L,F){var Y=L[F];return null==Y?void 0:Ke(Y)},mn=f.TypeError,An=Object.defineProperty,ei=function(L,F){try{An(f,L,{value:F,configurable:!0,writable:!0})}catch(Y){f[L]=F}return F},Ni="__core-js_shared__",Le=f[Ni]||ei(Ni,{}),vn=c(function(L){(L.exports=function(F,Y){return Le[F]||(Le[F]=void 0!==Y?Y:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),Tn=f.Object,qt=function(L){return Tn(de(L))},Sn=q({}.hasOwnProperty),Hn=Object.hasOwn||function(F,Y){return Sn(qt(F),Y)},ji=0,mt=Math.random(),Dt=q(1..toString),en=function(L){return"Symbol("+(void 0===L?"":L)+")_"+Dt(++ji+mt,36)},We=vn("wks"),dt=f.Symbol,Ee=dt&&dt.for,Ve=Kn?dt:dt&&dt.withoutSetter||en,it=function(L){if(!Hn(We,L)||!Pn&&"string"!=typeof We[L]){var F="Symbol."+L;We[L]=Pn&&Hn(dt,L)?dt[L]:Kn&&Ee?Ee(F):Ve(F)}return We[L]},Ot=f.TypeError,nn=it("toPrimitive"),yn=function(L,F){if(!Ce(L)||Jt(L))return L;var ae,Y=Ri(L,nn);if(Y){if(void 0===F&&(F="default"),ae=O(Y,L,F),!Ce(ae)||Jt(ae))return ae;throw Ot("Can't convert object to primitive value")}return void 0===F&&(F="number"),function(L,F){var Y,ae;if("string"===F&&ce(Y=L.toString)&&!Ce(ae=O(Y,L))||ce(Y=L.valueOf)&&!Ce(ae=O(Y,L))||"string"!==F&&ce(Y=L.toString)&&!Ce(ae=O(Y,L)))return ae;throw mn("Can't convert object to primitive value")}(L,F)},lt=function(L){var F=yn(L,"string");return Jt(F)?F:F+""},dn=f.document,wn=Ce(dn)&&Ce(dn.createElement),wt=function(L){return wn?dn.createElement(L):{}},kt=!y&&!v(function(){return 7!=Object.defineProperty(wt("div"),"a",{get:function(){return 7}}).a}),vo=Object.getOwnPropertyDescriptor,Wr={f:y?vo:function(F,Y){if(F=ye(F),Y=lt(Y),kt)try{return vo(F,Y)}catch(ae){}if(Hn(F,Y))return J(!O(ee.f,F,Y),F[Y])}},tc=f.String,Oa=f.TypeError,hn=function(L){if(Ce(L))return L;throw Oa(tc(L)+" is not an object")},zr=f.TypeError,Ed=Object.defineProperty,nc={f:y?Ed:function(F,Y,ae){if(hn(F),Y=lt(Y),hn(ae),kt)try{return Ed(F,Y,ae)}catch(pe){}if("get"in ae||"set"in ae)throw zr("Accessors not supported");return"value"in ae&&(F[Y]=ae.value),F}},aa=y?function(L,F,Y){return nc.f(L,F,J(1,Y))}:function(L,F,Y){return L[F]=Y,L},bo=q(Function.toString);ce(Le.inspectSource)||(Le.inspectSource=function(L){return bo(L)});var Sd,ic,Md,lp=Le.inspectSource,Td=f.WeakMap,av=ce(Td)&&/native code/.test(lp(Td)),_s=vn("keys"),yg=function(L){return _s[L]||(_s[L]=en(L))},wd={},Cg="Object already initialized",cp=f.TypeError;if(av||Le.state){var vl=Le.state||(Le.state=new(0,f.WeakMap)),lv=q(vl.get),Tg=q(vl.has),Et=q(vl.set);Sd=function(L,F){if(Tg(vl,L))throw new cp(Cg);return F.facade=L,Et(vl,L,F),F},ic=function(L){return lv(vl,L)||{}},Md=function(L){return Tg(vl,L)}}else{var rc=yg("state");wd[rc]=!0,Sd=function(L,F){if(Hn(L,rc))throw new cp(Cg);return F.facade=L,aa(L,rc,F),F},ic=function(L){return Hn(L,rc)?L[rc]:{}},Md=function(L){return Hn(L,rc)}}var Bt={set:Sd,get:ic,has:Md,enforce:function(L){return Md(L)?ic(L):Sd(L,{})},getterFor:function(L){return function(F){var Y;if(!Ce(F)||(Y=ic(F)).type!==L)throw cp("Incompatible receiver, "+L+" required");return Y}}},ts=Function.prototype,Dd=y&&Object.getOwnPropertyDescriptor,uu=Hn(ts,"name"),oc={EXISTS:uu,PROPER:uu&&"something"===function(){}.name,CONFIGURABLE:uu&&(!y||y&&Dd(ts,"name").configurable)},ka=c(function(L){var F=oc.CONFIGURABLE,Y=Bt.get,ae=Bt.enforce,pe=String(String).split("String");(L.exports=function(Ie,ve,Me,Ge){var xn,ze=!!Ge&&!!Ge.unsafe,Je=!!Ge&&!!Ge.enumerable,tn=!!Ge&&!!Ge.noTargetGet,on=Ge&&void 0!==Ge.name?Ge.name:ve;ce(Me)&&("Symbol("===String(on).slice(0,7)&&(on="["+String(on).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Hn(Me,"name")||F&&Me.name!==on)&&aa(Me,"name",on),(xn=ae(Me)).source||(xn.source=pe.join("string"==typeof on?on:""))),Ie!==f?(ze?!tn&&Ie[ve]&&(Je=!0):delete Ie[ve],Je?Ie[ve]=Me:aa(Ie,ve,Me)):Je?Ie[ve]=Me:ei(ve,Me)})(Function.prototype,"toString",function(){return ce(this)&&Y(this).source||lp(this)})}),Rd=Math.ceil,wg=Math.floor,pn=function(L){var F=+L;return F!=F||0===F?0:(F>0?wg:Rd)(F)},sc=Math.max,Sg=Math.min,ns=function(L,F){var Y=pn(L);return Y<0?sc(Y+F,0):Sg(Y,F)},hp=Math.min,xd=function(L){return L>0?hp(pn(L),9007199254740991):0},lo=function(L){return xd(L.length)},yo=function(L){return function(F,Y,ae){var Me,pe=ye(F),Ie=lo(pe),ve=ns(ae,Ie);if(L&&Y!=Y){for(;Ie>ve;)if((Me=pe[ve++])!=Me)return!0}else for(;Ie>ve;ve++)if((L||ve in pe)&&pe[ve]===Y)return L||ve||0;return!L&&-1}},Mg={includes:yo(!0),indexOf:yo(!1)},cv=Mg.indexOf,rr=q([].push),Id=function(L,F){var Ie,Y=ye(L),ae=0,pe=[];for(Ie in Y)!Hn(wd,Ie)&&Hn(Y,Ie)&&rr(pe,Ie);for(;F.length>ae;)Hn(Y,Ie=F[ae++])&&(~cv(pe,Ie)||rr(pe,Ie));return pe},du=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Dg=du.concat("length","prototype"),hi={f:Object.getOwnPropertyNames||function(F){return Id(F,Dg)}},Rg={f:Object.getOwnPropertySymbols},bl=q([].concat),Ti=ot("Reflect","ownKeys")||function(F){var Y=hi.f(hn(F)),ae=Rg.f;return ae?bl(Y,ae(F)):Y},yl=function(L,F){for(var Y=Ti(F),ae=nc.f,pe=Wr.f,Ie=0;Ie<Y.length;Ie++){var ve=Y[Ie];Hn(L,ve)||ae(L,ve,pe(F,ve))}},vs=/#|\.prototype\./,bs=function(L,F){var Y=pp[Ad(L)];return Y==Na||Y!=Po&&(ce(F)?v(F):!!F)},Ad=bs.normalize=function(L){return String(L).replace(vs,".").toLowerCase()},pp=bs.data={},Po=bs.NATIVE="N",Na=bs.POLYFILL="P",xg=bs,Tt=Wr.f,ys=function(L,F){var ve,Me,Ge,ze,Je,Y=L.target,ae=L.global,pe=L.stat;if(ve=ae?f:pe?f[Y]||ei(Y,{}):(f[Y]||{}).prototype)for(Me in F){if(ze=F[Me],Ge=L.noTargetGet?(Je=Tt(ve,Me))&&Je.value:ve[Me],!xg(ae?Me:Y+(pe?".":"#")+Me,L.forced)&&void 0!==Ge){if(typeof ze==typeof Ge)continue;yl(ze,Ge)}(L.sham||Ge&&Ge.sham)&&aa(ze,"sham",!0),ka(ve,Me,ze,L)}},Od={};Od[it("toStringTag")]="z";var Us,ac="[object z]"===String(Od),jt=it("toStringTag"),gp=f.Object,is="Arguments"==G(function(){return arguments}()),wi=ac?G:function(L){var F,Y,ae;return void 0===L?"Undefined":null===L?"Null":"string"==typeof(Y=function(L,F){try{return L[F]}catch(Y){}}(F=gp(L),jt))?Y:is?G(F):"Object"==(ae=G(F))&&ce(F.callee)?"Arguments":ae},cr=f.String,Ai=function(L){if("Symbol"===wi(L))throw TypeError("Cannot convert a Symbol value to a string");return cr(L)},la=function(){var L=hn(this),F="";return L.global&&(F+="g"),L.ignoreCase&&(F+="i"),L.multiline&&(F+="m"),L.dotAll&&(F+="s"),L.unicode&&(F+="u"),L.sticky&&(F+="y"),F},Co=f.RegExp,Vt={UNSUPPORTED_Y:v(function(){var L=Co("a","y");return L.lastIndex=2,null!=L.exec("abcd")}),BROKEN_CARET:v(function(){var L=Co("^r","gy");return L.lastIndex=2,null!=L.exec("str")})},Fn=Object.keys||function(F){return Id(F,du)},Si=y?Object.defineProperties:function(F,Y){hn(F);for(var Me,ae=ye(Y),pe=Fn(Y),Ie=pe.length,ve=0;Ie>ve;)nc.f(F,Me=pe[ve++],ae[Me]);return F},Eo=ot("document","documentElement"),Bo="prototype",Xi="script",To=yg("IE_PROTO"),Hs=function(){},Rn=function(L){return"<script>"+L+"</"+Xi+">"},La=function(L){L.write(Rn("")),L.close();var F=L.parentWindow.Object;return L=null,F},rs=function(){try{Us=new ActiveXObject("htmlfile")}catch(F){}rs="undefined"!=typeof document?document.domain&&Us?La(Us):function(){var Y,L=wt("iframe");return L.style.display="none",Eo.appendChild(L),L.src=String("javascript:"),(Y=L.contentWindow.document).open(),Y.write(Rn("document.F=Object")),Y.close(),Y.F}():La(Us);for(var L=du.length;L--;)delete rs[Bo][du[L]];return rs()};wd[To]=!0;var eo=Object.create||function(F,Y){var ae;return null!==F?(Hs[Bo]=hn(F),ae=new Hs,Hs[Bo]=null,ae[To]=F):ae=rs(),void 0===Y?ae:Si(ae,Y)},lc=f.RegExp,Cl=v(function(){var L=lc(".","s");return!(L.dotAll&&L.exec("\n")&&"s"===L.flags)}),os=f.RegExp,Li=v(function(){var L=os("(?<a>b)","g");return"b"!==L.exec("b").groups.a||"bc"!=="b".replace(L,"$<a>c")}),_p=Bt.get,Ig=vn("native-string-replace",String.prototype.replace),Pa=RegExp.prototype.exec,cc=Pa,uc=q("".charAt),Gs=q("".indexOf),Fa=q("".replace),mr=q("".slice),kd=function(){var L=/a/,F=/b*/g;return O(Pa,L,"a"),O(Pa,F,"a"),0!==L.lastIndex||0!==F.lastIndex}(),ss=Vt.UNSUPPORTED_Y||Vt.BROKEN_CARET,wo=void 0!==/()??/.exec("")[1];(kd||wo||ss||Cl||Li)&&(cc=function(F){var ve,Me,Ge,ze,Je,tn,on,Y=this,ae=_p(Y),pe=Ai(F),Ie=ae.raw;if(Ie)return Ie.lastIndex=Y.lastIndex,ve=O(cc,Ie,pe),Y.lastIndex=Ie.lastIndex,ve;var xn=ae.groups,ur=ss&&Y.sticky,Mi=O(la,Y),_i=Y.source,Gi=0,or=pe;if(ur&&(Mi=Fa(Mi,"y",""),-1===Gs(Mi,"g")&&(Mi+="g"),or=mr(pe,Y.lastIndex),Y.lastIndex>0&&(!Y.multiline||Y.multiline&&"\n"!==uc(pe,Y.lastIndex-1))&&(_i="(?: "+_i+")",or=" "+or,Gi++),Me=new RegExp("^(?:"+_i+")",Mi)),wo&&(Me=new RegExp("^"+_i+"$(?!\\s)",Mi)),kd&&(Ge=Y.lastIndex),ze=O(Pa,ur?Me:Y,or),ur?ze?(ze.input=mr(ze.input,Gi),ze[0]=mr(ze[0],Gi),ze.index=Y.lastIndex,Y.lastIndex+=ze[0].length):Y.lastIndex=0:kd&&ze&&(Y.lastIndex=Y.global?ze.index+ze[0].length:Ge),wo&&ze&&ze.length>1&&O(Ig,ze[0],Me,function(){for(Je=1;Je<arguments.length-2;Je++)void 0===arguments[Je]&&(ze[Je]=void 0)}),ze&&xn)for(ze.groups=tn=eo(null),Je=0;Je<xn.length;Je++)tn[(on=xn[Je])[0]]=ze[on[1]];return ze});var Ws=cc;ys({target:"RegExp",proto:!0,forced:/./.exec!==Ws},{exec:Ws});var dc=it("species"),co=RegExp.prototype,hc=function(L,F,Y,ae){var pe=it(L),Ie=!v(function(){var ze={};return ze[pe]=function(){return 7},7!=""[L](ze)}),ve=Ie&&!v(function(){var ze=!1,Je=/a/;return"split"===L&&((Je={}).constructor={},Je.constructor[dc]=function(){return Je},Je.flags="",Je[pe]=/./[pe]),Je.exec=function(){return ze=!0,null},Je[pe](""),!ze});if(!Ie||!ve||Y){var Me=q(/./[pe]),Ge=F(pe,""[L],function(ze,Je,tn,on,xn){var ur=q(ze),Mi=Je.exec;return Mi===Ws||Mi===co.exec?Ie&&!xn?{done:!0,value:Me(Je,tn,on)}:{done:!0,value:ur(tn,Je,on)}:{done:!1}});ka(String.prototype,L,Ge[0]),ka(co,pe,Ge[1])}ae&&aa(co[pe],"sham",!0)},hv=q("".charAt),El=q("".charCodeAt),Ag=q("".slice),Og=function(L){return function(F,Y){var ve,Me,ae=Ai(de(F)),pe=pn(Y),Ie=ae.length;return pe<0||pe>=Ie?L?"":void 0:(ve=El(ae,pe))<55296||ve>56319||pe+1===Ie||(Me=El(ae,pe+1))<56320||Me>57343?L?hv(ae,pe):ve:L?Ag(ae,pe,pe+2):Me-56320+(ve-55296<<10)+65536}},fv=(Og(!1),Og(!0)),hu=function(L,F,Y){return F+(Y?fv(L,F).length:1)},gv=f.TypeError,pu=function(L,F){var Y=L.exec;if(ce(Y)){var ae=O(Y,L,F);return null!==ae&&hn(ae),ae}if("RegExp"===G(L))return O(Ws,L,F);throw gv("RegExp#exec called on incompatible receiver")};hc("match",function(L,F,Y){return[function(pe){var Ie=de(this),ve=null==pe?void 0:Ri(pe,L);return ve?O(ve,pe,Ie):new RegExp(pe)[L](Ai(Ie))},function(ae){var pe=hn(this),Ie=Ai(ae),ve=Y(F,pe,Ie);if(ve.done)return ve.value;if(!pe.global)return pu(pe,Ie);var Me=pe.unicode;pe.lastIndex=0;for(var Je,Ge=[],ze=0;null!==(Je=pu(pe,Ie));){var tn=Ai(Je[0]);Ge[ze]=tn,""===tn&&(pe.lastIndex=hu(Ie,xd(pe.lastIndex),Me)),ze++}return 0===ze?null:Ge}]});var fu=Array.isArray||function(F){return"Array"==G(F)},Ld=function(L,F,Y){var ae=lt(F);ae in L?nc.f(L,ae,J(0,Y)):L[ae]=Y},vp=function(){},mv=[],gu=ot("Reflect","construct"),bp=/^\s*(?:class|function)\b/,_v=q(bp.exec),vv=!bp.exec(vp),Tl=function(L){if(!ce(L))return!1;try{return gu(vp,mv,L),!0}catch(F){return!1}},Pd=!gu||v(function(){var L;return Tl(Tl.call)||!Tl(Object)||!Tl(function(){L=!0})||L})?function(L){if(!ce(L))return!1;switch(wi(L)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return vv||!!_v(bp,lp(L))}:Tl,bv=it("species"),yp=f.Array,pc=function(L,F){return new(function(L){var F;return fu(L)&&(Pd(F=L.constructor)&&(F===yp||fu(F.prototype))||Ce(F)&&null===(F=F[bv]))&&(F=void 0),void 0===F?yp:F}(L))(0===F?0:F)},_n=it("species"),fc=function(L){return ln>=51||!v(function(){var F=[];return(F.constructor={})[_n]=function(){return{foo:1}},1!==F[L](Boolean).foo})},Cp=it("isConcatSpreadable"),Ep=9007199254740991,Fd="Maximum allowed index exceeded",Bd=f.TypeError,gc=ln>=51||!v(function(){var L=[];return L[Cp]=!1,L.concat()[0]!==L}),Vd=fc("concat"),Tp=function(L){if(!Ce(L))return!1;var F=L[Cp];return void 0!==F?!!F:fu(L)};ys({target:"Array",proto:!0,forced:!gc||!Vd},{concat:function(F){var Ie,ve,Me,Ge,ze,Y=qt(this),ae=pc(Y,0),pe=0;for(Ie=-1,Me=arguments.length;Ie<Me;Ie++)if(Tp(ze=-1===Ie?Y:arguments[Ie])){if(pe+(Ge=lo(ze))>Ep)throw Bd(Fd);for(ve=0;ve<Ge;ve++,pe++)ve in ze&&Ld(ae,pe,ze[ve])}else{if(pe>=Ep)throw Bd(Fd);Ld(ae,pe++,ze)}return ae.length=pe,ae}}),ac||ka(Object.prototype,"toString",ac?{}.toString:function(){return"[object "+wi(this)+"]"},{unsafe:!0});var mc=oc.PROPER,zs="toString",_u=RegExp.prototype,_c=_u[zs],yv=q(la);(v(function(){return"/a/b"!=_c.call({source:"a",flags:"b"})})||mc&&_c.name!=zs)&&ka(RegExp.prototype,zs,function(){var F=hn(this),Y=Ai(F.source),ae=F.flags;return"/"+Y+"/"+Ai(void 0===ae&&De(_u,F)&&!("flags"in _u)?yv(F):ae)},{unsafe:!0});var vc=Function.prototype,Hd=vc.apply,Ud=vc.call,Sp="object"==typeof Reflect&&Reflect.apply||(vc.bind?Ud.bind(Hd):function(){return Ud.apply(Hd,arguments)}),js=it("match"),So=function(L){var F;return Ce(L)&&(void 0!==(F=L[js])?!!F:"RegExp"==G(L))},kg=f.TypeError,Va=it("species"),Mo=function(L,F){var ae,Y=hn(L).constructor;return void 0===Y||null==(ae=hn(Y)[Va])?F:function(L){if(Pd(L))return L;throw kg(Yt(L)+" is not a constructor")}(ae)},Ha=q([].slice),ca=Vt.UNSUPPORTED_Y,Mp=4294967295,Xs=Math.min,Gd=[].push,Wd=q(/./.exec),En=q(Gd),Vo=q("".slice);function Ho(L,F){if(L instanceof SVGElement){var Y=L.getAttribute("class")||"";Y.match(F)||L.setAttribute("class","".concat(Y," ").concat(F))}else void 0!==L.classList?R(F.split(" "),function(pe){L.classList.add(pe)}):L.className.match(F)||(L.className+=" ".concat(F))}function zd(L,F){var Y="";return L.currentStyle?Y=L.currentStyle[F]:document.defaultView&&document.defaultView.getComputedStyle&&(Y=document.defaultView.getComputedStyle(L,null).getPropertyValue(F)),Y&&Y.toLowerCase?Y.toLowerCase():Y}function yu(L){var F=L.element;if(this._options.scrollToElement){var Y=function(L){var F=window.getComputedStyle(L),Y="absolute"===F.position,ae=/(auto|scroll)/;if("fixed"===F.position)return document.body;for(var pe=L;pe=pe.parentElement;)if(F=window.getComputedStyle(pe),(!Y||"static"!==F.position)&&ae.test(F.overflow+F.overflowY+F.overflowX))return pe;return document.body}(F);Y!==document.body&&(Y.scrollTop=F.offsetTop-Y.offsetTop)}}function ht(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var L=document.documentElement;return{width:L.clientWidth,height:L.clientHeight}}function Wn(L,F,Y){var pe,ae=F.element;if("off"!==L&&this._options.scrollToElement&&(pe="tooltip"===L?Y.getBoundingClientRect():ae.getBoundingClientRect(),!function(L){var F=L.getBoundingClientRect();return F.top>=0&&F.left>=0&&F.bottom+80<=window.innerHeight&&F.right<=window.innerWidth}(ae))){var Ie=ht().height;pe.bottom-(pe.bottom-pe.top)<0||ae.clientHeight>Ie?window.scrollBy(0,pe.top-(Ie/2-pe.height/2)-this._options.scrollPadding):window.scrollBy(0,pe.top-(Ie/2-pe.height/2)+this._options.scrollPadding)}}function Yi(L){L.setAttribute("role","button"),L.tabIndex=0}hc("split",function(L,F,Y){var ae;return ae="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(pe,Ie){var ve=Ai(de(this)),Me=void 0===Ie?Mp:Ie>>>0;if(0===Me)return[];if(void 0===pe)return[ve];if(!So(pe))return O(F,ve,pe,Me);for(var on,xn,ur,Ge=[],Je=0,tn=new RegExp(pe.source,(pe.ignoreCase?"i":"")+(pe.multiline?"m":"")+(pe.unicode?"u":"")+(pe.sticky?"y":"")+"g");(on=O(Ws,tn,ve))&&!((xn=tn.lastIndex)>Je&&(En(Ge,Vo(ve,Je,on.index)),on.length>1&&on.index<ve.length&&Sp(Gd,Ge,Ha(on,1)),ur=on[0].length,Je=xn,Ge.length>=Me));)tn.lastIndex===on.index&&tn.lastIndex++;return Je===ve.length?(ur||!Wd(tn,""))&&En(Ge,""):En(Ge,Vo(ve,Je)),Ge.length>Me?Ha(Ge,0,Me):Ge}:"0".split(void 0,0).length?function(pe,Ie){return void 0===pe&&0===Ie?[]:O(F,this,pe,Ie)}:F,[function(Ie,ve){var Me=de(this),Ge=null==Ie?void 0:Ri(Ie,L);return Ge?O(Ge,Ie,Me,ve):O(ae,Ai(Me),Ie,ve)},function(pe,Ie){var ve=hn(this),Me=Ai(pe),Ge=Y(ae,ve,Me,Ie,ae!==F);if(Ge.done)return Ge.value;var ze=Mo(ve,RegExp),Je=ve.unicode,on=new ze(ca?"^(?:"+ve.source+")":ve,(ve.ignoreCase?"i":"")+(ve.multiline?"m":"")+(ve.unicode?"u":"")+(ca?"g":"y")),xn=void 0===Ie?Mp:Ie>>>0;if(0===xn)return[];if(0===Me.length)return null===pu(on,Me)?[Me]:[];for(var ur=0,Mi=0,_i=[];Mi<Me.length;){on.lastIndex=ca?0:Mi;var or,Gi=pu(on,ca?Vo(Me,Mi):Me);if(null===Gi||(or=Xs(xd(on.lastIndex+(ca?Mi:0)),Me.length))===ur)Mi=hu(Me,Mi,Je);else{if(En(_i,Vo(Me,ur,Mi)),_i.length===xn)return _i;for(var dr=1;dr<=Gi.length-1;dr++)if(En(_i,Gi[dr]),_i.length===xn)return _i;Mi=ur=or}}return En(_i,Vo(Me,ur)),_i}]},!!v(function(){var L=/(?:)/,F=L.exec;L.exec=function(){return F.apply(this,arguments)};var Y="ab".split(L);return 2!==Y.length||"a"!==Y[0]||"b"!==Y[1]}),ca);var Ua=Object.assign,wl=Object.defineProperty,Cs=q([].concat),Cu=!Ua||v(function(){if(y&&1!==Ua({b:1},Ua(wl({},"a",{enumerable:!0,get:function(){wl(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var L={},F={},Y=Symbol(),ae="abcdefghijklmnopqrst";return L[Y]=7,ae.split("").forEach(function(pe){F[pe]=pe}),7!=Ua({},L)[Y]||Fn(Ua({},F)).join("")!=ae})?function(F,Y){for(var ae=qt(F),pe=arguments.length,Ie=1,ve=Rg.f,Me=ee.f;pe>Ie;)for(var on,Ge=j(arguments[Ie++]),ze=ve?Cs(Fn(Ge),ve(Ge)):Fn(Ge),Je=ze.length,tn=0;Je>tn;)on=ze[tn++],(!y||O(Me,Ge,on))&&(ae[on]=Ge[on]);return ae}:Ua;function Sl(L){var F=L.parentNode;return!(!F||"HTML"===F.nodeName)&&("fixed"===zd(L,"position")||Sl(F))}function bc(L,F){var Y=document.body,ae=document.documentElement,pe=window.pageYOffset||ae.scrollTop||Y.scrollTop,Ie=window.pageXOffset||ae.scrollLeft||Y.scrollLeft;F=F||Y;var ve=L.getBoundingClientRect(),Me=F.getBoundingClientRect(),Ge=zd(F,"position"),ze={width:ve.width,height:ve.height};return"body"!==F.tagName.toLowerCase()&&"relative"===Ge||"sticky"===Ge?Object.assign(ze,{top:ve.top-Me.top,left:ve.left-Me.left}):Sl(L)?Object.assign(ze,{top:ve.top,left:ve.left}):Object.assign(ze,{top:ve.top+pe,left:ve.left+Ie})}ys({target:"Object",stat:!0,forced:Object.assign!==Cu},{assign:Cu});var Pg=Math.floor,Ml=q("".charAt),Eu=q("".replace),Ar=q("".slice),Es=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,jd=/\$([$&'`]|\d{1,2})/g,Dl=function(L,F,Y,ae,pe,Ie){var ve=Y+L.length,Me=ae.length,Ge=jd;return void 0!==pe&&(pe=qt(pe),Ge=Es),Eu(Ie,Ge,function(ze,Je){var tn;switch(Ml(Je,0)){case"$":return"$";case"&":return L;case"`":return Ar(F,0,Y);case"'":return Ar(F,ve);case"<":tn=pe[Ar(Je,1,-1)];break;default:var on=+Je;if(0===on)return ze;if(on>Me){var xn=Pg(on/10);return 0===xn?ze:xn<=Me?void 0===ae[xn-1]?Ml(Je,1):ae[xn-1]+Ml(Je,1):ze}tn=ae[on-1]}return void 0===tn?"":tn})},Uo=it("replace"),Tu=Math.max,Xd=Math.min,Fg=q([].concat),Yd=q([].push),wu=q("".indexOf),Ts=q("".slice),Rp=function(L){return void 0===L?L:String(L)},Do="$0"==="a".replace(/./,"$0"),xp=!!/./[Uo]&&""===/./[Uo]("a","$0");function as(L,F){if(L instanceof SVGElement){var Y=L.getAttribute("class")||"";L.setAttribute("class",Y.replace(F,"").replace(/^\s+|\s+$/g,""))}else L.className=L.className.replace(F,"").replace(/^\s+|\s+$/g,"")}function ls(L,F){var Y="";if(L.style.cssText&&(Y+=L.style.cssText),"string"==typeof F)Y+=F;else for(var ae in F)Y+="".concat(ae,":").concat(F[ae],";");L.style.cssText=Y}function ws(L){if(L){if(!this._introItems[this._currentStep])return;var F=this._introItems[this._currentStep],Y=bc(F.element,this._targetElement),ae=this._options.helperElementPadding;Sl(F.element)?Ho(L,"introjs-fixedTooltip"):as(L,"introjs-fixedTooltip"),"floating"===F.position&&(ae=0),ls(L,{width:"".concat(Y.width+ae,"px"),height:"".concat(Y.height+ae,"px"),top:"".concat(Y.top-ae/2,"px"),left:"".concat(Y.left-ae/2,"px")})}}hc("replace",function(L,F,Y){var ae=xp?"$":"$0";return[function(Ie,ve){var Me=de(this),Ge=null==Ie?void 0:Ri(Ie,Uo);return Ge?O(Ge,Ie,Me,ve):O(F,Ai(Me),Ie,ve)},function(pe,Ie){var ve=hn(this),Me=Ai(pe);if("string"==typeof Ie&&-1===wu(Ie,ae)&&-1===wu(Ie,"$<")){var Ge=Y(F,ve,Me,Ie);if(Ge.done)return Ge.value}var ze=ce(Ie);ze||(Ie=Ai(Ie));var Je=ve.global;if(Je){var tn=ve.unicode;ve.lastIndex=0}for(var on=[];;){var xn=pu(ve,Me);if(null===xn||(Yd(on,xn),!Je))break;""===Ai(xn[0])&&(ve.lastIndex=hu(Me,xd(ve.lastIndex),tn))}for(var Mi="",_i=0,Gi=0;Gi<on.length;Gi++){for(var or=Ai((xn=on[Gi])[0]),dr=Tu(Xd(pn(xn.index),Me.length),0),Ms=[],Sr=1;Sr<xn.length;Sr++)Yd(Ms,Rp(xn[Sr]));var kr=xn.groups;if(ze){var Ds=Fg([or],Ms,dr,Me);void 0!==kr&&Yd(Ds,kr);var $g=Ai(Sp(Ie,void 0,Ds))}else $g=Dl(or,Me,dr,Ms,kr,Ie);dr>=_i&&(Mi+=Ts(Me,_i,dr)+$g,_i=dr+or.length)}return Mi+Ts(Me,_i)}]},!!v(function(){var L=/./;return L.exec=function(){var F=[];return F.groups={a:"7"},F},"7"!=="".replace(L,"$<a>")})||!Do||xp);var Su=it("unscopables"),Mu=Array.prototype;null==Mu[Su]&&nc.f(Mu,Su,{configurable:!0,value:eo(null)});var Bg=Mg.includes;ys({target:"Array",proto:!0},{includes:function(F){return Bg(this,F,arguments.length>1?arguments[1]:void 0)}}),function(L){Mu[Su][L]=!0}("includes");var $d=fc("slice"),wr=it("species"),Go=f.Array,Qi=Math.max;ys({target:"Array",proto:!0,forced:!$d},{slice:function(F,Y){var Me,Ge,ze,ae=ye(this),pe=lo(ae),Ie=ns(F,pe),ve=ns(void 0===Y?pe:Y,pe);if(fu(ae)&&((Pd(Me=ae.constructor)&&(Me===Go||fu(Me.prototype))||Ce(Me)&&null===(Me=Me[wr]))&&(Me=void 0),Me===Go||void 0===Me))return Ha(ae,Ie,ve);for(Ge=new(void 0===Me?Go:Me)(Qi(ve-Ie,0)),ze=0;Ie<ve;Ie++,ze++)Ie in ae&&Ld(Ge,ze,ae[Ie]);return Ge.length=ze,Ge}});var jr=f.TypeError,Ap=function(L){if(So(L))throw jr("The method doesn't accept regular expressions");return L},yc=it("match"),Kd=q("".indexOf);ys({target:"String",proto:!0,forced:!function(L){var F=/./;try{"/./"[L](F)}catch(Y){try{return F[yc]=!1,"/./"[L](F)}catch(ae){}}return!1}("includes")},{includes:function(F){return!!~Kd(Ai(de(this)),Ai(Ap(F)),arguments.length>1?arguments[1]:void 0)}});var Jd=function(L,F){var Y=[][L];return!!Y&&v(function(){Y.call(null,F||function(){throw 1},1)})},Ru=q([].join),xu=j!=Object,Cc=Jd("join",",");ys({target:"Array",proto:!0,forced:xu||!Cc},{join:function(F){return Ru(ye(this),void 0===F?",":F)}});var Ec=q(q.bind),Qd=q([].push),Xr=function(L){var F=1==L,Y=2==L,ae=3==L,pe=4==L,Ie=6==L,ve=7==L,Me=5==L||Ie;return function(Ge,ze,Je,tn){for(var dr,Ms,on=qt(Ge),xn=j(on),ur=function(L,F){return Ke(L),void 0===F?L:Ec?Ec(L,F):function(){return L.apply(F,arguments)}}(ze,Je),Mi=lo(xn),_i=0,Gi=tn||pc,or=F?Gi(Ge,Mi):Y||ve?Gi(Ge,0):void 0;Mi>_i;_i++)if((Me||_i in xn)&&(Ms=ur(dr=xn[_i],_i,on),L))if(F)or[_i]=Ms;else if(Ms)switch(L){case 3:return!0;case 5:return dr;case 6:return _i;case 2:Qd(or,dr)}else switch(L){case 4:return!1;case 7:Qd(or,dr)}return Ie?-1:ae||pe?pe:or}},Np=[Xr(0),Xr(1),Xr(2),Xr(3),Xr(4),Xr(5),Xr(6),Xr(7)][2];function Ys(L,F,Y,ae,pe){return L.left+F+Y.width>ae.width?(pe.style.left="".concat(ae.width-Y.width-L.left,"px"),!1):(pe.style.left="".concat(F,"px"),!0)}function Rl(L,F,Y,ae){return L.left+L.width-F-Y.width<0?(ae.style.left="".concat(-L.left,"px"),!1):(ae.style.right="".concat(F,"px"),!0)}ys({target:"Array",proto:!0,forced:!fc("filter")},{filter:function(F){return Np(this,F,arguments.length>1?arguments[1]:void 0)}});var Vg=fc("splice"),Hg=f.TypeError,xl=Math.max,Cv=Math.min,Iu=9007199254740991,Pp="Maximum allowed length exceeded";function $s(L,F){L.includes(F)&&L.splice(L.indexOf(F),1)}function Au(L,F,Y){var ae=this._options.positionPrecedence.slice(),pe=ht(),Ie=bc(F).height+10,ve=bc(F).width+20,Me=L.getBoundingClientRect(),Ge="floating";Me.bottom+Ie>pe.height&&$s(ae,"bottom"),Me.top-Ie<0&&$s(ae,"top"),Me.right+ve>pe.width&&$s(ae,"right"),Me.left-ve<0&&$s(ae,"left");var Je,tn,ze=-1!==(tn=(Je=Y||"").indexOf("-"))?Je.substr(tn):"";return Y&&(Y=Y.split("-")[0]),ae.length&&(Ge=ae.includes(Y)?Y:ae[0]),["top","bottom"].includes(Ge)&&(Ge+=function(L,F,Y,ae){var Ie=F/2,ve=Math.min(Y.width,window.screen.width),Me=["-left-aligned","-middle-aligned","-right-aligned"];return ve-L<F&&$s(Me,"-left-aligned"),(L<Ie||ve-L<Ie)&&$s(Me,"-middle-aligned"),L<F&&$s(Me,"-right-aligned"),Me.length?Me.includes(ae)?ae:Me[0]:"-middle-aligned"}(Me.left,ve,pe,ze)),Ge}function Or(L,F,Y,ae){var Ie,ve,Me,Ge,ze;if(ae=ae||!1,F.style.top=null,F.style.right=null,F.style.bottom=null,F.style.left=null,F.style.marginLeft=null,F.style.marginTop=null,Y.style.display="inherit",this._introItems[this._currentStep])switch(F.className=["introjs-tooltip","string"==typeof(Ie=this._introItems[this._currentStep]).tooltipClass?Ie.tooltipClass:this._options.tooltipClass].filter(Boolean).join(" "),F.setAttribute("role","dialog"),"floating"!==(ze=this._introItems[this._currentStep].position)&&this._options.autoPosition&&(ze=Au.call(this,L,F,ze)),Me=bc(L),ve=bc(F),Ge=ht(),Ho(F,"introjs-".concat(ze)),ze){case"top-right-aligned":Y.className="introjs-arrow bottom-right";var tn=0;Rl(Me,tn,ve,F),F.style.bottom="".concat(Me.height+20,"px");break;case"top-middle-aligned":Y.className="introjs-arrow bottom-middle";var on=Me.width/2-ve.width/2;ae&&(on+=5),Rl(Me,on,ve,F)&&(F.style.right=null,Ys(Me,on,ve,Ge,F)),F.style.bottom="".concat(Me.height+20,"px");break;case"top-left-aligned":case"top":Y.className="introjs-arrow bottom",Ys(Me,ae?0:15,ve,Ge,F),F.style.bottom="".concat(Me.height+20,"px");break;case"right":F.style.left="".concat(Me.width+20,"px"),Me.top+ve.height>Ge.height?(Y.className="introjs-arrow left-bottom",F.style.top="-".concat(ve.height-Me.height-20,"px")):Y.className="introjs-arrow left";break;case"left":!ae&&!0===this._options.showStepNumbers&&(F.style.top="15px"),Me.top+ve.height>Ge.height?(F.style.top="-".concat(ve.height-Me.height-20,"px"),Y.className="introjs-arrow right-bottom"):Y.className="introjs-arrow right",F.style.right="".concat(Me.width+20,"px");break;case"floating":Y.style.display="none",F.style.left="50%",F.style.top="50%",F.style.marginLeft="-".concat(ve.width/2,"px"),F.style.marginTop="-".concat(ve.height/2,"px");break;case"bottom-right-aligned":Y.className="introjs-arrow top-right",Rl(Me,tn=0,ve,F),F.style.top="".concat(Me.height+20,"px");break;case"bottom-middle-aligned":Y.className="introjs-arrow top-middle",on=Me.width/2-ve.width/2,ae&&(on+=5),Rl(Me,on,ve,F)&&(F.style.right=null,Ys(Me,on,ve,Ge,F)),F.style.top="".concat(Me.height+20,"px");break;default:Y.className="introjs-arrow top",Ys(Me,0,ve,Ge,F),F.style.top="".concat(Me.height+20,"px")}}function Ks(){R(document.querySelectorAll(".introjs-showElement"),function(F){as(F,/introjs-[a-zA-Z]+/g)})}function zn(L,F){var Y=document.createElement(L);F=F||{};var ae=/^(?:role|data-|aria-)/;for(var pe in F){var Ie=F[pe];"style"===pe?ls(Y,Ie):pe.match(ae)?Y.setAttribute(pe,Ie):Y[pe]=Ie}return Y}function ua(L,F,Y){if(Y){var ae=F.style.opacity||"1";ls(F,{opacity:"0"}),window.setTimeout(function(){ls(F,{opacity:ae})},10)}L.appendChild(F)}function Wa(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function Zd(){var L=document.querySelector(".introjs-disableInteraction");null===L&&(L=zn("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(L)),ws.call(this,L)}function qd(L){var F=this,Y=zn("div",{className:"introjs-bullets"});!1===this._options.showBullets&&(Y.style.display="none");var ae=zn("ul");ae.setAttribute("role","tablist");var pe=function(){F.goToStep(this.getAttribute("data-stepnumber"))};return R(this._introItems,function(Ie,ve){var Me=Ie.step,Ge=zn("li"),ze=zn("a");Ge.setAttribute("role","presentation"),ze.setAttribute("role","tab"),ze.onclick=pe,ve===L.step-1&&(ze.className="active"),Yi(ze),ze.innerHTML="&nbsp;",ze.setAttribute("data-stepnumber",Me),Ge.appendChild(ze),ae.appendChild(Ge)}),Y.appendChild(ae),Y}function eh(L,F){if(this._options.showBullets){var Y=document.querySelector(".introjs-bullets");Y.parentNode.replaceChild(qd.call(this,F),Y)}}function th(L,F){this._options.showBullets&&(L.querySelector(".introjs-bullets li > a.active").className="",L.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(F.step,'"]')).className="active")}function Zi(){var L=zn("div");L.className="introjs-progress",!1===this._options.showProgress&&(L.style.display="none");var F=zn("div",{className:"introjs-progressbar"});return this._options.progressBarAdditionalClass&&(F.className+=" "+this._options.progressBarAdditionalClass),F.setAttribute("role","progress"),F.setAttribute("aria-valuemin",0),F.setAttribute("aria-valuemax",100),F.setAttribute("aria-valuenow",Wa.call(this)),F.style.cssText="width:".concat(Wa.call(this),"%;"),L.appendChild(F),L}function Fp(L){L.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(Wa.call(this),"%;"),L.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",Wa.call(this))}function cs(L){var F=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,L.element);var ve,Me,Ge,Y=this,ae=document.querySelector(".introjs-helperLayer"),pe=document.querySelector(".introjs-tooltipReferenceLayer"),Ie="introjs-helperLayer";if("string"==typeof L.highlightClass&&(Ie+=" ".concat(L.highlightClass)),"string"==typeof this._options.highlightClass&&(Ie+=" ".concat(this._options.highlightClass)),null!==ae&&null!==pe){var ze=pe.querySelector(".introjs-helperNumberLayer"),Je=pe.querySelector(".introjs-tooltiptext"),tn=pe.querySelector(".introjs-tooltip-title"),on=pe.querySelector(".introjs-arrow"),xn=pe.querySelector(".introjs-tooltip");Ge=pe.querySelector(".introjs-skipbutton"),Me=pe.querySelector(".introjs-prevbutton"),ve=pe.querySelector(".introjs-nextbutton"),ae.className=Ie,xn.style.opacity=0,xn.style.display="none",yu.call(Y,L),ws.call(Y,ae),ws.call(Y,pe),Ks(),Y._lastShowElementTimer&&window.clearTimeout(Y._lastShowElementTimer),Y._lastShowElementTimer=window.setTimeout(function(){null!==ze&&(ze.innerHTML="".concat(L.step," of ").concat(F._introItems.length)),Je.innerHTML=L.intro,tn.innerHTML=L.title,xn.style.display="block",Or.call(Y,L.element,xn,on),th.call(Y,pe,L),Fp.call(Y,pe),xn.style.opacity=1,(null!=ve&&/introjs-donebutton/gi.test(ve.className)||null!=ve)&&ve.focus(),Wn.call(Y,L.scrollTo,L,Je)},350)}else{var ur=zn("div",{className:Ie}),Mi=zn("div",{className:"introjs-tooltipReferenceLayer"}),_i=zn("div",{className:"introjs-arrow"}),Gi=zn("div",{className:"introjs-tooltip"}),or=zn("div",{className:"introjs-tooltiptext"}),dr=zn("div",{className:"introjs-tooltip-header"}),Ms=zn("h1",{className:"introjs-tooltip-title"}),Sr=zn("div");ls(ur,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(Y._options.overlayOpacity.toString(),") 0 0 0 5000px")}),yu.call(Y,L),ws.call(Y,ur),ws.call(Y,Mi),ua(this._targetElement,ur,!0),ua(this._targetElement,Mi),or.innerHTML=L.intro,Ms.innerHTML=L.title,Sr.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(Sr.style.display="none"),dr.appendChild(Ms),Gi.appendChild(dr),Gi.appendChild(or),Gi.appendChild(qd.call(this,L)),Gi.appendChild(Zi.call(this));var kr=zn("div");!0===this._options.showStepNumbers&&(kr.className="introjs-helperNumberLayer",kr.innerHTML="".concat(L.step," of ").concat(this._introItems.length),Gi.appendChild(kr)),Gi.appendChild(_i),Mi.appendChild(Gi),(ve=zn("a")).onclick=function(){Y._introItems.length-1!==Y._currentStep?Yr.call(Y):/introjs-donebutton/gi.test(ve.className)&&("function"==typeof Y._introCompleteCallback&&Y._introCompleteCallback.call(Y,Y._currentStep,"done"),xo.call(Y,Y._targetElement))},Yi(ve),ve.innerHTML=this._options.nextLabel,(Me=zn("a")).onclick=function(){0!==Y._currentStep&&Ro.call(Y)},Yi(Me),Me.innerHTML=this._options.prevLabel,Yi(Ge=zn("a",{className:"introjs-skipbutton"})),Ge.innerHTML=this._options.skipLabel,Ge.onclick=function(){Y._introItems.length-1===Y._currentStep&&"function"==typeof Y._introCompleteCallback&&Y._introCompleteCallback.call(Y,Y._currentStep,"skip"),"function"==typeof Y._introSkipCallback&&Y._introSkipCallback.call(Y),xo.call(Y,Y._targetElement)},dr.appendChild(Ge),this._introItems.length>1&&Sr.appendChild(Me),Sr.appendChild(ve),Gi.appendChild(Sr),Or.call(Y,L.element,Gi,_i),Wn.call(this,L.scrollTo,L,Gi)}var Ds=Y._targetElement.querySelector(".introjs-disableInteraction");Ds&&Ds.parentNode.removeChild(Ds),L.disableInteraction&&Zd.call(Y),0===this._currentStep&&this._introItems.length>1?(null!=ve&&(ve.className="".concat(this._options.buttonClass," introjs-nextbutton"),ve.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=Me&&(Me.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=ve&&Ho(ve,"introjs-fullbutton")):null!=Me&&(Me.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=Me&&(Me.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=ve&&(ve.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=Me&&Ho(Me,"introjs-fullbutton")):null!=ve&&(!0===this._options.nextToDone?(ve.innerHTML=this._options.doneLabel,Ho(ve,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):ve.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=Me&&(Me.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=ve&&(ve.className="".concat(this._options.buttonClass," introjs-nextbutton"),ve.innerHTML=this._options.nextLabel)),null!=Me&&Me.setAttribute("role","button"),null!=ve&&ve.setAttribute("role","button"),null!=Ge&&Ge.setAttribute("role","button"),null!=ve&&ve.focus(),function(L){var F=L.element;Ho(F,"introjs-showElement");var Y=zd(F,"position");"absolute"!==Y&&"relative"!==Y&&"sticky"!==Y&&"fixed"!==Y&&Ho(F,"introjs-relativePosition")}(L),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,L.element)}function nh(L){this._currentStep=L-2,void 0!==this._introItems&&Yr.call(this)}function za(L){this._currentStepNumber=L,void 0!==this._introItems&&Yr.call(this)}function Yr(){var L=this;this._direction="forward",void 0!==this._currentStepNumber&&R(this._introItems,function(ae,pe){ae.step===L._currentStepNumber&&(L._currentStep=pe-1,L._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var F=this._introItems[this._currentStep],Y=!0;return void 0!==this._introBeforeChangeCallback&&(Y=this._introBeforeChangeCallback.call(this,F&&F.element)),!1===Y?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"end"),void xo.call(this,this._targetElement)):void cs.call(this,F)}function Ro(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var L=this._introItems[this._currentStep],F=!0;if(void 0!==this._introBeforeChangeCallback&&(F=this._introBeforeChangeCallback.call(this,L&&L.element)),!1===F)return++this._currentStep,!1;cs.call(this,L)}function Ug(){return this._currentStep}function Il(L){var F=void 0===L.code?L.which:L.code;if(null===F&&(F=null===L.charCode?L.keyCode:L.charCode),"Escape"!==F&&27!==F||!0!==this._options.exitOnEsc){if("ArrowLeft"===F||37===F)Ro.call(this);else if("ArrowRight"===F||39===F)Yr.call(this);else if("Enter"===F||"NumpadEnter"===F||13===F){var Y=L.target||L.srcElement;Y&&Y.className.match("introjs-prevbutton")?Ro.call(this):Y&&Y.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"skip"),xo.call(this,this._targetElement)):Y&&Y.getAttribute("data-stepnumber")?Y.click():Yr.call(this),L.preventDefault?L.preventDefault():L.returnValue=!1}}else xo.call(this,this._targetElement)}function wc(L){if(null===L||"object"!==A(L)||void 0!==L.nodeType)return L;var F={};for(var Y in L)F[Y]=void 0!==window.jQuery&&L[Y]instanceof window.jQuery?L[Y]:wc(L[Y]);return F}function Js(L){var F=document.querySelector(".introjs-hints");return F?F.querySelectorAll(L):[]}function ih(L){var F=Js('.introjs-hint[data-step="'.concat(L,'"]'))[0];kl.call(this),F&&Ho(F,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,L)}function Gg(){var L=this;R(Js(".introjs-hint"),function(Y){ih.call(L,Y.getAttribute("data-step"))})}function Ou(){var L=this,F=Js(".introjs-hint");F&&F.length?R(F,function(Y){Ol.call(L,Y.getAttribute("data-step"))}):qi.call(this,this._targetElement)}function Ol(L){var F=Js('.introjs-hint[data-step="'.concat(L,'"]'))[0];F&&as(F,/introjs-hidehint/g)}function Wg(){var L=this;R(Js(".introjs-hint"),function(Y){rh.call(L,Y.getAttribute("data-step"))}),a.off(document,"click",kl,this,!1),a.off(window,"resize",Zs,this,!0),this._hintsAutoRefreshFunction&&a.off(window,"scroll",this._hintsAutoRefreshFunction,this,!0)}function rh(L){var F=Js('.introjs-hint[data-step="'.concat(L,'"]'))[0];F&&F.parentNode.removeChild(F)}function Bp(){var L=this,F=this,Y=document.querySelector(".introjs-hints");null===Y&&(Y=zn("div",{className:"introjs-hints"}));R(this._introItems,function(pe,Ie){if(!document.querySelector('.introjs-hint[data-step="'.concat(Ie,'"]'))){var ve=zn("a",{className:"introjs-hint"});Yi(ve),ve.onclick=function(Ie){return function(ve){var Me=ve||window.event;Me.stopPropagation&&Me.stopPropagation(),null!==Me.cancelBubble&&(Me.cancelBubble=!0),cn.call(F,Ie)}}(Ie),pe.hintAnimation||Ho(ve,"introjs-hint-no-anim"),Sl(pe.element)&&Ho(ve,"introjs-fixedhint");var Me=zn("div",{className:"introjs-hint-dot"}),Ge=zn("div",{className:"introjs-hint-pulse"});ve.appendChild(Me),ve.appendChild(Ge),ve.setAttribute("data-step",Ie),pe.targetElement=pe.element,pe.element=ve,Qs.call(L,pe.hintPosition,ve,pe.targetElement),Y.appendChild(ve)}}),document.body.appendChild(Y),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this),this._options.hintAutoRefreshInterval>=0&&(this._hintsAutoRefreshFunction=function(L,F){var ae,Y=this;return function(){for(var pe=arguments.length,Ie=new Array(pe),ve=0;ve<pe;ve++)Ie[ve]=arguments[ve];clearTimeout(ae),ae=setTimeout(function(){L.apply(Y,Ie)},F)}}(function(){return Zs.call(L)},this._options.hintAutoRefreshInterval),a.on(window,"scroll",this._hintsAutoRefreshFunction,this,!0))}function Qs(L,F,Y){var ae=F.style,pe=bc.call(this,Y);switch(L){default:case"top-left":ae.left="".concat(pe.left,"px"),ae.top="".concat(pe.top,"px");break;case"top-right":ae.left="".concat(pe.left+pe.width-20,"px"),ae.top="".concat(pe.top,"px");break;case"bottom-left":ae.left="".concat(pe.left,"px"),ae.top="".concat(pe.top+pe.height-20,"px");break;case"bottom-right":ae.left="".concat(pe.left+pe.width-20,"px"),ae.top="".concat(pe.top+pe.height-20,"px");break;case"middle-left":ae.left="".concat(pe.left,"px"),ae.top="".concat(pe.top+(pe.height-20)/2,"px");break;case"middle-right":ae.left="".concat(pe.left+pe.width-20,"px"),ae.top="".concat(pe.top+(pe.height-20)/2,"px");break;case"middle-middle":ae.left="".concat(pe.left+(pe.width-20)/2,"px"),ae.top="".concat(pe.top+(pe.height-20)/2,"px");break;case"bottom-middle":ae.left="".concat(pe.left+(pe.width-20)/2,"px"),ae.top="".concat(pe.top+pe.height-20,"px");break;case"top-middle":ae.left="".concat(pe.left+(pe.width-20)/2,"px"),ae.top="".concat(pe.top,"px")}}function cn(L){var F=document.querySelector('.introjs-hint[data-step="'.concat(L,'"]')),Y=this._introItems[L];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,F,Y,L);var ae=kl.call(this);if(parseInt(ae,10)!==L){var pe=zn("div",{className:"introjs-tooltip"}),Ie=zn("div"),ve=zn("div"),Me=zn("div");pe.onclick=function(Je){Je.stopPropagation?Je.stopPropagation():Je.cancelBubble=!0},Ie.className="introjs-tooltiptext";var Ge=zn("p");if(Ge.innerHTML=Y.hint,Ie.appendChild(Ge),this._options.hintShowButton){var ze=zn("a");ze.className=this._options.buttonClass,ze.setAttribute("role","button"),ze.innerHTML=this._options.hintButtonLabel,ze.onclick=ih.bind(this,L),Ie.appendChild(ze)}ve.className="introjs-arrow",pe.appendChild(ve),pe.appendChild(Ie),this._currentStep=F.getAttribute("data-step"),Me.className="introjs-tooltipReferenceLayer introjs-hintReference",Me.setAttribute("data-step",F.getAttribute("data-step")),ws.call(this,Me),Me.appendChild(pe),document.body.appendChild(Me),Or.call(this,F,pe,ve,!0)}}function kl(){var L=document.querySelector(".introjs-hintReference");if(L){var F=L.getAttribute("data-step");return L.parentNode.removeChild(L),F}}function qi(L){var F=this;if(this._introItems=[],this._options.hints)R(this._options.hints,function(ae){var pe=wc(ae);"string"==typeof pe.element&&(pe.element=document.querySelector(pe.element)),pe.hintPosition=pe.hintPosition||F._options.hintPosition,pe.hintAnimation=pe.hintAnimation||F._options.hintAnimation,null!==pe.element&&F._introItems.push(pe)});else{var Y=L.querySelectorAll("*[data-hint]");if(!Y||!Y.length)return!1;R(Y,function(ae){var pe=ae.getAttribute("data-hintanimation");pe=pe?"true"===pe:F._options.hintAnimation,F._introItems.push({element:ae,hint:ae.getAttribute("data-hint"),hintPosition:ae.getAttribute("data-hintposition")||F._options.hintPosition,hintAnimation:pe,tooltipClass:ae.getAttribute("data-tooltipclass"),position:ae.getAttribute("data-position")||F._options.tooltipPosition})})}Bp.call(this),a.on(document,"click",kl,this,!1),a.on(window,"resize",Zs,this,!0)}function Zs(){var L=this;R(this._introItems,function(F){var Y=F.targetElement;void 0!==Y&&Qs.call(L,F.hintPosition,F.element,Y)})}ys({target:"Array",proto:!0,forced:!Vg},{splice:function(F,Y){var Me,Ge,ze,Je,tn,on,ae=qt(this),pe=lo(ae),Ie=ns(F,pe),ve=arguments.length;if(0===ve?Me=Ge=0:1===ve?(Me=0,Ge=pe-Ie):(Me=ve-2,Ge=Cv(xl(pn(Y),0),pe-Ie)),pe+Me-Ge>Iu)throw Hg(Pp);for(ze=pc(ae,Ge),Je=0;Je<Ge;Je++)(tn=Ie+Je)in ae&&Ld(ze,Je,ae[tn]);if(ze.length=Ge,Me<Ge){for(Je=Ie;Je<pe-Ge;Je++)on=Je+Me,(tn=Je+Ge)in ae?ae[on]=ae[tn]:delete ae[on];for(Je=pe;Je>pe-Ge+Me;Je--)delete ae[Je-1]}else if(Me>Ge)for(Je=pe-Ge;Je>Ie;Je--)on=Je+Me-1,(tn=Je+Ge-1)in ae?ae[on]=ae[tn]:delete ae[on];for(Je=0;Je<Me;Je++)ae[Je+Ie]=arguments[Je+2];return ae.length=pe-Ge+Me,ze}});var Nl=Math.floor,da=function(L,F){var Y=L.length,ae=Nl(Y/2);return Y<8?Sc(L,F):li(L,da(Ha(L,0,ae),F),da(Ha(L,ae),F),F)},Sc=function(L,F){for(var pe,Ie,Y=L.length,ae=1;ae<Y;){for(Ie=ae,pe=L[ae];Ie&&F(L[Ie-1],pe)>0;)L[Ie]=L[--Ie];Ie!==ae++&&(L[Ie]=pe)}return L},li=function(L,F,Y,ae){for(var pe=F.length,Ie=Y.length,ve=0,Me=0;ve<pe||Me<Ie;)L[ve+Me]=ve<pe&&Me<Ie?ae(F[ve],Y[Me])<=0?F[ve++]:Y[Me++]:ve<pe?F[ve++]:Y[Me++];return L},ja=da,Vp=Ue.match(/firefox\/(\d+)/i),zg=!!Vp&&+Vp[1],oh=/MSIE|Trident/.test(Ue),jg=Ue.match(/AppleWebKit\/(\d+)\./),Hp=!!jg&&+jg[1],je=[],Up=q(je.sort),Gp=q(je.push),Ev=v(function(){je.sort(void 0)}),Xg=v(function(){je.sort(null)}),Wp=Jd("sort"),sh=!v(function(){if(ln)return ln<70;if(!(zg&&zg>3)){if(oh)return!0;if(Hp)return Hp<603;var F,Y,ae,pe,L="";for(F=65;F<76;F++){switch(Y=String.fromCharCode(F),F){case 66:case 69:case 70:case 72:ae=3;break;case 68:case 71:ae=4;break;default:ae=2}for(pe=0;pe<47;pe++)je.push({k:Y+pe,v:ae})}for(je.sort(function(Ie,ve){return ve.v-Ie.v}),pe=0;pe<je.length;pe++)Y=je[pe].k.charAt(0),L.charAt(L.length-1)!==Y&&(L+=Y);return"DGBEFHACIJK"!==L}});function Yg(L){var F=this,Y=L.querySelectorAll("*[data-intro]"),ae=[];if(this._options.steps)R(this._options.steps,function(ze){var Je=wc(ze);if(Je.step=ae.length+1,Je.title=Je.title||"","string"==typeof Je.element&&(Je.element=document.querySelector(Je.element)),null==Je.element){var tn=document.querySelector(".introjsFloatingElement");null===tn&&(tn=zn("div",{className:"introjsFloatingElement"}),document.body.appendChild(tn)),Je.element=tn,Je.position="floating"}Je.position=Je.position||F._options.tooltipPosition,Je.scrollTo=Je.scrollTo||F._options.scrollTo,void 0===Je.disableInteraction&&(Je.disableInteraction=F._options.disableInteraction),null!==Je.element&&ae.push(Je)});else{var Ie;if(Y.length<1)return[];R(Y,function(ze){if((!F._options.group||ze.getAttribute("data-intro-group")===F._options.group)&&"none"!==ze.style.display){var Je=parseInt(ze.getAttribute("data-step"),10);Ie=ze.hasAttribute("data-disable-interaction")?!!ze.getAttribute("data-disable-interaction"):F._options.disableInteraction,Je>0&&(ae[Je-1]={element:ze,title:ze.getAttribute("data-title")||"",intro:ze.getAttribute("data-intro"),step:parseInt(ze.getAttribute("data-step"),10),tooltipClass:ze.getAttribute("data-tooltipclass"),highlightClass:ze.getAttribute("data-highlightclass"),position:ze.getAttribute("data-position")||F._options.tooltipPosition,scrollTo:ze.getAttribute("data-scrollto")||F._options.scrollTo,disableInteraction:Ie})}});var ve=0;R(Y,function(ze){if((!F._options.group||ze.getAttribute("data-intro-group")===F._options.group)&&null===ze.getAttribute("data-step")){for(;void 0!==ae[ve];)ve++;Ie=ze.hasAttribute("data-disable-interaction")?!!ze.getAttribute("data-disable-interaction"):F._options.disableInteraction,ae[ve]={element:ze,title:ze.getAttribute("data-title")||"",intro:ze.getAttribute("data-intro"),step:ve+1,tooltipClass:ze.getAttribute("data-tooltipclass"),highlightClass:ze.getAttribute("data-highlightclass"),position:ze.getAttribute("data-position")||F._options.tooltipPosition,scrollTo:ze.getAttribute("data-scrollto")||F._options.scrollTo,disableInteraction:Ie}}})}for(var Me=[],Ge=0;Ge<ae.length;Ge++)ae[Ge]&&Me.push(ae[Ge]);return(ae=Me).sort(function(ze,Je){return ze.step-Je.step}),ae}function zp(L){var F=document.querySelector(".introjs-tooltipReferenceLayer"),Y=document.querySelector(".introjs-helperLayer"),ae=document.querySelector(".introjs-disableInteraction");if(ws.call(this,Y),ws.call(this,F),ws.call(this,ae),L&&(this._introItems=Yg.call(this,this._targetElement),eh.call(this,F,this._introItems[this._currentStep]),Fp.call(this,F)),null!=this._currentStep){var pe=document.querySelector(".introjs-arrow"),Ie=document.querySelector(".introjs-tooltip");Ie&&pe&&Or.call(this,this._introItems[this._currentStep].element,Ie,pe)}return Zs.call(this),this}function Mc(){zp.call(this)}function Ss(L,F){if(L&&L.parentElement){var Y=L.parentElement;F?(ls(L,{opacity:"0"}),window.setTimeout(function(){try{Y.removeChild(L)}catch(ae){}},500)):Y.removeChild(L)}}function xo(L,F){var Y=!0;if(void 0!==this._introBeforeExitCallback&&(Y=this._introBeforeExitCallback.call(this)),F||!1!==Y){var ae=L.querySelectorAll(".introjs-overlay");ae&&ae.length&&R(ae,function(Ge){return Ss(Ge)}),Ss(L.querySelector(".introjs-helperLayer"),!0),Ss(L.querySelector(".introjs-tooltipReferenceLayer")),Ss(L.querySelector(".introjs-disableInteraction")),Ss(document.querySelector(".introjsFloatingElement")),Ks(),a.off(window,"keydown",Il,this,!0),a.off(window,"resize",Mc,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function _r(L){var F=this,Y=zn("div",{className:"introjs-overlay"});return ls(Y,{top:0,bottom:0,left:0,right:0,position:"fixed"}),L.appendChild(Y),!0===this._options.exitOnOverlayClick&&(ls(Y,{cursor:"pointer"}),Y.onclick=function(){xo.call(F,L)}),!0}function Xa(L){void 0!==this._introStartCallback&&this._introStartCallback.call(this,L);var F=Yg.call(this,L);return 0===F.length||(this._introItems=F,_r.call(this,L)&&(Yr.call(this),this._options.keyboardNavigation&&a.on(window,"keydown",Il,this,!0),a.on(window,"resize",Mc,this,!0))),!1}function Dc(L){this._targetElement=L,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}ys({target:"Array",proto:!0,forced:Ev||!Xg||!Wp||!sh},{sort:function(F){void 0!==F&&Ke(F);var Y=qt(this);if(sh)return void 0===F?Up(Y):Up(Y,F);var Ie,ve,ae=[],pe=lo(Y);for(ve=0;ve<pe;ve++)ve in Y&&Gp(ae,Y[ve]);for(ja(ae,function(L){return function(F,Y){return void 0===Y?-1:void 0===F?1:void 0!==L?+L(F,Y)||0:Ai(F)>Ai(Y)?1:-1}}(F)),Ie=ae.length,ve=0;ve<Ie;)Y[ve]=ae[ve++];for(;ve<pe;)delete Y[ve++];return Y}});var Nu=function L(F){var Y;if("object"===A(F))Y=new Dc(F);else if("string"==typeof F){var ae=document.querySelector(F);if(!ae)throw new Error("There is no element with given selector.");Y=new Dc(ae)}else Y=new Dc(document.body);return L.instances[E(Y,"introjs-instance")]=Y,Y};return Nu.version="4.3.0",Nu.instances={},Nu.fn=Dc.prototype={clone:function(){return new Dc(this)},setOption:function(F,Y){return this._options[F]=Y,this},setOptions:function(F){return this._options=function(L,F){var ae,Y={};for(ae in L)Y[ae]=L[ae];for(ae in F)Y[ae]=F[ae];return Y}(this._options,F),this},start:function(){return Xa.call(this,this._targetElement),this},goToStep:function(F){return nh.call(this,F),this},addStep:function(F){return this._options.steps||(this._options.steps=[]),this._options.steps.push(F),this},addSteps:function(F){if(F.length){for(var Y=0;Y<F.length;Y++)this.addStep(F[Y]);return this}},goToStepNumber:function(F){return za.call(this,F),this},nextStep:function(){return Yr.call(this),this},previousStep:function(){return Ro.call(this),this},currentStep:function(){return Ug.call(this)},exit:function(F){return xo.call(this,this._targetElement,F),this},refresh:function(F){return zp.call(this,F),this},onbeforechange:function(F){if("function"!=typeof F)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=F,this},onchange:function(F){if("function"!=typeof F)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=F,this},onafterchange:function(F){if("function"!=typeof F)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=F,this},oncomplete:function(F){if("function"!=typeof F)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=F,this},onhintsadded:function(F){if("function"!=typeof F)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=F,this},onhintclick:function(F){if("function"!=typeof F)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=F,this},onhintclose:function(F){if("function"!=typeof F)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=F,this},onstart:function(F){if("function"!=typeof F)throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=F,this},onexit:function(F){if("function"!=typeof F)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=F,this},onskip:function(F){if("function"!=typeof F)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=F,this},onbeforeexit:function(F){if("function"!=typeof F)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=F,this},addHints:function(){return qi.call(this,this._targetElement),this},hideHint:function(F){return ih.call(this,F),this},hideHints:function(){return Gg.call(this),this},showHint:function(F){return Ol.call(this,F),this},showHints:function(){return Ou.call(this),this},removeHints:function(){return Wg.call(this),this},removeHint:function(F){return rh().call(this,F),this},showHintDialog:function(F){return cn.call(this,F),this}},Nu}()},30981:(S,A,_)=>{"use strict";function E(r){return"function"==typeof r}let R=!1;const a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else R&&console.log("RxJS: Back to a better error behavior. Thank you. <3");R=r},get useDeprecatedSynchronousErrorHandling(){return R}};function o(r){setTimeout(()=>{throw r},0)}const c={closed:!0,next(r){},error(r){if(a.useDeprecatedSynchronousErrorHandling)throw r;o(r)},complete(){}},d=Array.isArray||(r=>r&&"number"==typeof r.length);function f(r){return null!==r&&"object"==typeof r}const y=(()=>{function r(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((e,n)=>`${n+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r})();class D{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:s,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof D)e.remove(this);else if(null!==e)for(let u=0;u<e.length;++u)e[u].remove(this);if(E(s)){n&&(this._unsubscribe=void 0);try{s.call(this)}catch(u){t=u instanceof y?O(u.errors):[u]}}if(d(l)){let u=-1,h=l.length;for(;++u<h;){const p=l[u];if(f(p))try{p.unsubscribe()}catch(g){t=t||[],g instanceof y?t=t.concat(O(g.errors)):t.push(g)}}}if(t)throw new y(t)}add(t){let e=t;if(!t)return D.EMPTY;switch(typeof t){case"function":e=new D(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof D)){const l=e;e=new D,e._subscriptions=[l]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof D){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[e]:s.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var r;function O(r){return r.reduce((t,e)=>t.concat(e instanceof y?e.errors:e),[])}D.EMPTY=((r=new D).closed=!0,r);const U="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class H extends D{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=c;break;case 1:if(!t){this.destination=c;break}if("object"==typeof t){t instanceof H?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new ne(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new ne(this,t,e,n)}}[U](){return this}static create(t,e,n){const s=new H(t,e,n);return s.syncErrorThrowable=!1,s}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class ne extends H{constructor(t,e,n,s){super(),this._parentSubscriber=t;let l,u=this;E(e)?l=e:e&&(l=e.next,n=e.error,s=e.complete,e!==c&&(u=Object.create(e),E(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=l,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(s){return a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=s,t.syncErrorThrown=!0,!0):(o(s),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const ue="function"==typeof Symbol&&Symbol.observable||"@@observable";function se(r){return r}let q=(()=>{class r{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const n=new r;return n.source=this,n.operator=e,n}subscribe(e,n,s){const{operator:l}=this,u=function(r,t,e){if(r){if(r instanceof H)return r;if(r[U])return r[U]()}return r||t||e?new H(r,t,e):new H(c)}(e,n,s);if(u.add(l?l.call(u,this.source):this.source||a.useDeprecatedSynchronousErrorHandling&&!u.syncErrorThrowable?this._subscribe(u):this._trySubscribe(u)),a.useDeprecatedSynchronousErrorHandling&&u.syncErrorThrowable&&(u.syncErrorThrowable=!1,u.syncErrorThrown))throw u.syncErrorValue;return u}_trySubscribe(e){try{return this._subscribe(e)}catch(n){a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=n),function(r){for(;r;){const{closed:t,destination:e,isStopped:n}=r;if(t||n)return!1;r=e&&e instanceof H?e:null}return!0}(e)?e.error(n):console.warn(n)}}forEach(e,n){return new(n=ie(n))((s,l)=>{let u;u=this.subscribe(h=>{try{e(h)}catch(p){l(p),u&&u.unsubscribe()}},l,s)})}_subscribe(e){const{source:n}=this;return n&&n.subscribe(e)}[ue](){return this}pipe(...e){return 0===e.length?this:function(r){return 0===r.length?se:1===r.length?r[0]:function(e){return r.reduce((n,s)=>s(n),e)}}(e)(this)}toPromise(e){return new(e=ie(e))((n,s)=>{let l;this.subscribe(u=>l=u,u=>s(u),()=>n(l))})}}return r.create=t=>new r(t),r})();function ie(r){if(r||(r=a.Promise||Promise),!r)throw new Error("no Promise impl found");return r}const G=(()=>{function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r})();class fe extends D{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class Q extends H{constructor(t){super(t),this.destination=t}}let j=(()=>{class r extends q{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[U](){return new Q(this)}lift(e){const n=new oe(this,this);return n.operator=e,n}next(e){if(this.closed)throw new G;if(!this.isStopped){const{observers:n}=this,s=n.length,l=n.slice();for(let u=0;u<s;u++)l[u].next(e)}}error(e){if(this.closed)throw new G;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:n}=this,s=n.length,l=n.slice();for(let u=0;u<s;u++)l[u].error(e);this.observers.length=0}complete(){if(this.closed)throw new G;this.isStopped=!0;const{observers:e}=this,n=e.length,s=e.slice();for(let l=0;l<n;l++)s[l].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new G;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new G;return this.hasError?(e.error(this.thrownError),D.EMPTY):this.isStopped?(e.complete(),D.EMPTY):(this.observers.push(e),new fe(this,e))}asObservable(){const e=new q;return e.source=this,e}}return r.create=(t,e)=>new oe(t,e),r})();class oe extends j{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):D.EMPTY}}function de(r){return r&&"function"==typeof r.schedule}function ye(r,t){return function(n){if("function"!=typeof r)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new ce(r,t))}}class ce{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new Ce(t,this.project,this.thisArg))}}class Ce extends H{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Be=r=>t=>{for(let e=0,n=r.length;e<n&&!t.closed;e++)t.next(r[e]);t.complete()},Ue="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Qe=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function Ft(r){return!!r&&"function"!=typeof r.subscribe&&"function"==typeof r.then}const Wt=r=>{if(r&&"function"==typeof r[ue])return(r=>t=>{const e=r[ue]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)})(r);if(Qe(r))return Be(r);if(Ft(r))return(r=>t=>(r.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t))(r);if(r&&"function"==typeof r[Ue])return(r=>t=>{const e=r[Ue]();for(;;){let n;try{n=e.next()}catch(s){return t.error(s),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof e.return&&t.add(()=>{e.return&&e.return()}),t})(r);{const e=`You provided ${f(r)?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(e)}};function Kn(r,t){return new q(e=>{const n=new D;let s=0;return n.add(t.schedule(function(){s!==r.length?(e.next(r[s++]),e.closed||n.add(this.schedule())):e.complete()})),n})}function Dn(r,t){return t?function(r,t){if(null!=r){if(function(r){return r&&"function"==typeof r[ue]}(r))return function(r,t){return new q(e=>{const n=new D;return n.add(t.schedule(()=>{const s=r[ue]();n.add(s.subscribe({next(l){n.add(t.schedule(()=>e.next(l)))},error(l){n.add(t.schedule(()=>e.error(l)))},complete(){n.add(t.schedule(()=>e.complete()))}}))})),n})}(r,t);if(Ft(r))return function(r,t){return new q(e=>{const n=new D;return n.add(t.schedule(()=>r.then(s=>{n.add(t.schedule(()=>{e.next(s),n.add(t.schedule(()=>e.complete()))}))},s=>{n.add(t.schedule(()=>e.error(s)))}))),n})}(r,t);if(Qe(r))return Kn(r,t);if(function(r){return r&&"function"==typeof r[Ue]}(r)||"string"==typeof r)return function(r,t){if(!r)throw new Error("Iterable cannot be null");return new q(e=>{const n=new D;let s;return n.add(()=>{s&&"function"==typeof s.return&&s.return()}),n.add(t.schedule(()=>{s=r[Ue](),n.add(t.schedule(function(){if(e.closed)return;let l,u;try{const h=s.next();l=h.value,u=h.done}catch(h){return void e.error(h)}u?e.complete():(e.next(l),this.schedule())}))})),n})}(r,t)}throw new TypeError((null!==r&&typeof r||r)+" is not observable")}(r,t):r instanceof q?r:new q(Wt(r))}class Ke extends H{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class mn extends H{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function An(r,t){if(t.closed)return;if(r instanceof q)return r.subscribe(t);let e;try{e=Wt(r)(t)}catch(n){t.error(n)}return e}function ei(r,t,e=Number.POSITIVE_INFINITY){return"function"==typeof t?n=>n.pipe(ei((s,l)=>Dn(r(s,l)).pipe(ye((u,h)=>t(s,u,l,h))),e)):("number"==typeof t&&(e=t),n=>n.lift(new Ni(r,e)))}class Ni{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new Ne(t,this.project,this.concurrent))}}class Ne extends mn{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(s){return void this.destination.error(s)}this.active++,this._innerSub(e)}_innerSub(t){const e=new Ke(this),n=this.destination;n.add(e);const s=An(t,e);s!==e&&n.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function vn(r=Number.POSITIVE_INFINITY){return ei(se,r)}function Tn(r,t){return t?Kn(r,t):new q(Be(r))}function qt(...r){let t=Number.POSITIVE_INFINITY,e=null,n=r[r.length-1];return de(n)?(e=r.pop(),r.length>1&&"number"==typeof r[r.length-1]&&(t=r.pop())):"number"==typeof n&&(t=r.pop()),null===e&&1===r.length&&r[0]instanceof q?r[0]:vn(t)(Tn(r,e))}function Sn(){return function(t){return t.lift(new Hn(t))}}class Hn{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const s=new ji(t,n),l=e.subscribe(s);return s.closed||(s.connection=n.connect()),l}}class ji extends H{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,s=t._connection;this.connection=null,s&&(!n||s===n)&&s.unsubscribe()}}class mt extends q{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new D,t.add(this.source.subscribe(new en(this.getSubject(),this))),t.closed&&(this._connection=null,t=D.EMPTY)),t}refCount(){return Sn()(this)}}const Dt=(()=>{const r=mt.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}})();class en extends Q{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function it(){return new j}function Ot(){return r=>Sn()(function(r,t){return function(n){let s;s="function"==typeof r?r:function(){return r};const l=Object.create(n,Dt);return l.source=n,l.subjectFactory=s,l}}(it)(r))}function nn(r){for(let t in r)if(r[t]===nn)return t;throw Error("Could not find renamed property on target object.")}function yn(r,t){for(const e in t)t.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(r[e]=t[e])}function lt(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(lt).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function dn(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const wn=nn({__forward_ref__:nn});function wt(r){return r.__forward_ref__=wt,r.toString=function(){return lt(this())},r}function kt(r){return vo(r)?r():r}function vo(r){return"function"==typeof r&&r.hasOwnProperty(wn)&&r.__forward_ref__===wt}class Wr extends Error{constructor(t,e){super(function(r,t){return`${r?`NG0${r}: `:""}${t}`}(t,e)),this.code=t}}function hn(r){return"string"==typeof r?r:null==r?"":String(r)}function zr(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():hn(r)}function aa(r,t){const e=t?` in ${t}`:"";throw new Wr("201",`No provider for ${zr(r)} found${e}`)}function ao(r,t){null==r&&function(r,t,e,n){throw new Error(`ASSERTION ERROR: ${r}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,r,null,"!=")}function Et(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Bt(r){return{providers:r.providers||[],imports:r.imports||[]}}function ts(r){return Dd(r,oc)||Dd(r,Rd)}function Dd(r,t){return r.hasOwnProperty(t)?r[t]:null}function dp(r){return r&&(r.hasOwnProperty(ka)||r.hasOwnProperty(wg))?r[ka]:null}const oc=nn({\u0275prov:nn}),ka=nn({\u0275inj:nn}),Rd=nn({ngInjectableDef:nn}),wg=nn({ngInjectorDef:nn});var pn=(()=>((pn=pn||{})[pn.Default=0]="Default",pn[pn.Host=1]="Host",pn[pn.Self=2]="Self",pn[pn.SkipSelf=4]="SkipSelf",pn[pn.Optional=8]="Optional",pn))();let sc;function ns(r){const t=sc;return sc=r,t}function hp(r,t,e){const n=ts(r);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&pn.Optional?null:void 0!==t?t:void aa(lt(r),"Injector")}function lo(r){return{toString:r}.toString()}var yo=(()=>((yo=yo||{})[yo.OnPush=0]="OnPush",yo[yo.Default=1]="Default",yo))(),rr=(()=>((rr=rr||{})[rr.Emulated=0]="Emulated",rr[rr.None=2]="None",rr[rr.ShadowDom=3]="ShadowDom",rr))();const Id="undefined"!=typeof globalThis&&globalThis,du="undefined"!=typeof window&&window,Dg="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,hi=Id||"undefined"!=typeof global&&global||du||Dg,bl={},Ti=[],yl=nn({\u0275cmp:nn}),vs=nn({\u0275dir:nn}),bs=nn({\u0275pipe:nn}),Ad=nn({\u0275mod:nn}),pp=nn({\u0275loc:nn}),Po=nn({\u0275fac:nn}),Na=nn({__NG_ELEMENT_ID__:nn});let xg=0;function Tt(r){return lo(()=>{const e={},n={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===yo.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||Ti,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||rr.Emulated,id:"c",styles:r.styles||Ti,_:null,setInput:null,schemas:r.schemas||null,tView:null},s=r.directives,l=r.features,u=r.pipes;return n.id+=xg++,n.inputs=is(r.inputs,e),n.outputs=is(r.outputs),l&&l.forEach(h=>h(n)),n.directiveDefs=s?()=>("function"==typeof s?s():s).map(fp):null,n.pipeDefs=u?()=>("function"==typeof u?u():u).map(Od):null,n})}function fp(r){return cr(r)||function(r){return r[vs]||null}(r)}function Od(r){return function(r){return r[bs]||null}(r)}const ac={};function jt(r){return lo(()=>{const t={type:r.type,bootstrap:r.bootstrap||Ti,declarations:r.declarations||Ti,imports:r.imports||Ti,exports:r.exports||Ti,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(ac[r.id]=r.type),t})}function is(r,t){if(null==r)return bl;const e={};for(const n in r)if(r.hasOwnProperty(n)){let s=r[n],l=s;Array.isArray(s)&&(l=s[1],s=s[0]),e[s]=n,t&&(t[s]=l)}return e}const Te=Tt;function wi(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function cr(r){return r[yl]||null}function Co(r,t){const e=r[Ad]||null;if(!e&&!0===t)throw new Error(`Type ${lt(r)} does not have '\u0275mod' property.`);return e}function ss(r){return Array.isArray(r)&&"object"==typeof r[1]}function wo(r){return Array.isArray(r)&&!0===r[1]}function Nd(r){return 0!=(8&r.flags)}function Ws(r){return 2==(2&r.flags)}function dc(r){return 1==(1&r.flags)}function co(r){return null!==r.template}function hc(r){return 0!=(512&r[2])}function Ba(r,t){return r.hasOwnProperty(Po)?r[Po]:null}class pc{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _n(){return fc}function fc(r){return r.type.prototype.ngOnChanges&&(r.setInput=Ep),Cp}function Cp(){const r=Bd(this),t=null==r?void 0:r.current;if(t){const e=r.previous;if(e===bl)r.previous=t;else for(let n in t)e[n]=t[n];r.current=null,this.ngOnChanges(t)}}function Ep(r,t,e,n){const s=Bd(r)||function(r,t){return r[Fd]=t}(r,{previous:bl,current:null}),l=s.current||(s.current={}),u=s.previous,h=this.declaredInputs[e],p=u[h];l[h]=new pc(p&&p.currentValue,t,u===bl),r[n]=t}_n.ngInherit=!0;const Fd="__ngSimpleChanges__";function Bd(r){return r[Fd]||null}const wp="http://www.w3.org/2000/svg";let zs;function Ki(r){return!!r.listen}const vc={createRenderer:(r,t)=>void 0!==zs?zs:"undefined"!=typeof document?document:void 0};function Ji(r){for(;Array.isArray(r);)r=r[0];return r}function js(r,t){return Ji(t[r])}function So(r,t){return Ji(t[r.index])}function bu(r,t){return r.data[t]}function Va(r,t){return r[t]}function Mo(r,t){const e=t[r];return ss(e)?e:e[0]}function Ha(r){return 4==(4&r[2])}function ca(r){return 128==(128&r[2])}function Xs(r,t){return null==t?null:r[t]}function Gd(r){r[18]=0}function Wd(r,t){r[5]+=t;let e=r,n=r[3];for(;null!==n&&(1===t&&1===e[5]||-1===t&&0===e[5]);)n[5]+=t,e=n,n=n[3]}const En={lFrame:ws(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Dp(){return En.bindingsEnabled}function ht(){return En.lFrame.lView}function ti(){return En.lFrame.tView}function Wn(r){return En.lFrame.contextLView=r,r[8]}function Yi(){let r=Ua();for(;null!==r&&64===r.type;)r=r.parent;return r}function Ua(){return En.lFrame.currentTNode}function Cs(r,t){const e=En.lFrame;e.currentTNode=r,e.isParent=t}function Cu(){return En.lFrame.isParent}function Sl(){En.lFrame.isParent=!1}function Ml(){return En.isInCheckNoChangesMode}function Eu(r){En.isInCheckNoChangesMode=r}function Ar(){const r=En.lFrame;let t=r.bindingRootIndex;return-1===t&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}function Es(){return En.lFrame.bindingIndex}function Dl(){return En.lFrame.bindingIndex++}function Uo(r){const t=En.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,e}function Fg(r,t){const e=En.lFrame;e.bindingIndex=e.bindingRootIndex=r,wu(t)}function wu(r){En.lFrame.currentDirectiveIndex=r}function Ts(r){const t=En.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}function Rp(){return En.lFrame.currentQueryIndex}function Do(r){En.lFrame.currentQueryIndex=r}function xp(r){const t=r[1];return 2===t.type?t.declTNode:1===t.type?r[6]:null}function Ip(r,t,e){if(e&pn.SkipSelf){let s=t,l=r;for(;!(s=s.parent,null!==s||e&pn.Host||(s=xp(l),null===s||(l=l[15],10&s.type))););if(null===s)return!1;t=s,r=l}const n=En.lFrame=ls();return n.currentTNode=t,n.lView=r,!0}function as(r){const t=ls(),e=r[1];En.lFrame=t,t.currentTNode=e.firstChild,t.lView=r,t.tView=e,t.contextLView=r,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function ls(){const r=En.lFrame,t=null===r?null:r.child;return null===t?ws(r):t}function ws(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function Su(){const r=En.lFrame;return En.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Mu=Su;function Du(){const r=Su();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function wr(){return En.lFrame.selectedIndex}function Go(r){En.lFrame.selectedIndex=r}function Qi(){const r=En.lFrame;return bu(r.tView,r.selectedIndex)}function jr(){En.lFrame.currentNamespace=wp}function Ru(r,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const l=r.data[e].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:h,ngAfterViewInit:p,ngAfterViewChecked:g,ngOnDestroy:b}=l;u&&(r.contentHooks||(r.contentHooks=[])).push(-e,u),h&&((r.contentHooks||(r.contentHooks=[])).push(e,h),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(e,h)),p&&(r.viewHooks||(r.viewHooks=[])).push(-e,p),g&&((r.viewHooks||(r.viewHooks=[])).push(e,g),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(e,g)),null!=b&&(r.destroyHooks||(r.destroyHooks=[])).push(e,b)}}function xu(r,t,e){kp(r,t,3,e)}function Cc(r,t,e,n){(3&r[2])===e&&kp(r,t,e,n)}function Ec(r,t){let e=r[2];(3&e)===t&&(e&=2047,e+=1,r[2]=e)}function kp(r,t,e,n){const l=null!=n?n:-1,u=t.length-1;let h=0;for(let p=void 0!==n?65535&r[18]:0;p<u;p++)if("number"==typeof t[p+1]){if(h=t[p],null!=n&&h>=n)break}else t[p]<0&&(r[18]+=65536),(h<l||-1==l)&&(Qd(r,e,t,p),r[18]=(4294901760&r[18])+p+2),p++}function Qd(r,t,e,n){const s=e[n]<0,l=e[n+1],h=r[s?-e[n]:e[n]];if(s){if(r[2]>>11<r[18]>>16&&(3&r[2])===t){r[2]+=2048;try{l.call(h)}finally{}}}else try{l.call(h)}finally{}}class Tc{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Iu(r,t,e){const n=Ki(r);let s=0;for(;s<e.length;){const l=e[s];if("number"==typeof l){if(0!==l)break;s++;const u=e[s++],h=e[s++],p=e[s++];n?r.setAttribute(t,h,p,u):t.setAttributeNS(u,h,p)}else{const u=l,h=e[++s];$s(u)?n&&r.setProperty(t,u,h):n?r.setAttribute(t,u,h):t.setAttribute(u,h),s++}}return s}function Pp(r){return 3===r||4===r||6===r}function $s(r){return 64===r.charCodeAt(0)}function Ga(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const s=t[n];"number"==typeof s?e=s:0===e||Au(r,e,s,null,-1===e||2===e?t[++n]:null)}}return r}function Au(r,t,e,n,s){let l=0,u=r.length;if(-1===t)u=-1;else for(;l<r.length;){const h=r[l++];if("number"==typeof h){if(h===t){u=-1;break}if(h>t){u=l-1;break}}}for(;l<r.length;){const h=r[l];if("number"==typeof h)break;if(h===e){if(null===n)return void(null!==s&&(r[l+1]=s));if(n===r[l+1])return void(r[l+2]=s)}l++,null!==n&&l++,null!==s&&l++}-1!==u&&(r.splice(u,0,t),l=u+1),r.splice(l++,0,e),null!==n&&r.splice(l++,0,n),null!==s&&r.splice(l++,0,s)}function Or(r){return-1!==r}function Ks(r){return 32767&r}function ua(r,t){let e=function(r){return r>>16}(r),n=t;for(;e>0;)n=n[15],e--;return n}let Wa=!0;function Zd(r){const t=Wa;return Wa=r,t}let Zi=0;function cs(r,t){const e=za(r,t);if(-1!==e)return e;const n=t[1];n.firstCreatePass&&(r.injectorIndex=t.length,nh(n.data,r),nh(t,null),nh(n.blueprint,null));const s=Yr(r,t),l=r.injectorIndex;if(Or(s)){const u=Ks(s),h=ua(s,t),p=h[1].data;for(let g=0;g<8;g++)t[l+g]=h[u+g]|p[u+g]}return t[l+8]=s,l}function nh(r,t){r.push(0,0,0,0,0,0,0,0,t)}function za(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function Yr(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let e=0,n=null,s=t;for(;null!==s;){const l=s[1],u=l.type;if(n=2===u?l.declTNode:1===u?s[6]:null,null===n)return-1;if(e++,s=s[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function Ro(r,t,e){!function(r,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(Na)&&(n=e[Na]),null==n&&(n=e[Na]=Zi++);const s=255&n;t.data[r+(s>>5)]|=1<<s}(r,t,e)}function Il(r,t,e){if(e&pn.Optional)return r;aa(t,"NodeInjector")}function wc(r,t,e,n){if(e&pn.Optional&&void 0===n&&(n=null),0==(e&(pn.Self|pn.Host))){const s=r[9],l=ns(void 0);try{return s?s.get(t,n,e&pn.Optional):hp(t,n,e&pn.Optional)}finally{ns(l)}}return Il(n,t,e)}function Al(r,t,e,n=pn.Default,s){if(null!==r){const l=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(Na)?r[Na]:void 0;return"number"==typeof t?t>=0?255&t:ih:t}(e);if("function"==typeof l){if(!Ip(t,r,n))return n&pn.Host?Il(s,e,n):wc(t,e,n,s);try{const u=l(n);if(null!=u||n&pn.Optional)return u;aa(e)}finally{Mu()}}else if("number"==typeof l){let u=null,h=za(r,t),p=-1,g=n&pn.Host?t[16][6]:null;for((-1===h||n&pn.SkipSelf)&&(p=-1===h?Yr(r,t):t[h+8],-1!==p&&Bp(n,!1)?(u=t[1],h=Ks(p),t=ua(p,t)):h=-1);-1!==h;){const b=t[1];if(rh(l,h,b.data)){const C=Gg(h,t,e,u,n,g);if(C!==Js)return C}p=t[h+8],-1!==p&&Bp(n,t[1].data[h+8]===g)&&rh(l,h,t)?(u=b,h=Ks(p),t=ua(p,t)):h=-1}}}return wc(t,e,n,s)}const Js={};function ih(){return new Qs(Yi(),ht())}function Gg(r,t,e,n,s,l){const u=t[1],h=u.data[r+8],b=Ou(h,u,e,null==n?Ws(h)&&Wa:n!=u&&0!=(3&h.type),s&pn.Host&&l===h);return null!==b?Ol(t,u,b,h):Js}function Ou(r,t,e,n,s){const l=r.providerIndexes,u=t.data,h=1048575&l,p=r.directiveStart,b=l>>20,w=s?h+b:r.directiveEnd;for(let x=n?h:h+b;x<w;x++){const N=u[x];if(x<p&&e===N||x>=p&&N.type===e)return x}if(s){const x=u[p];if(x&&co(x)&&x.type===e)return p}return null}function Ol(r,t,e,n){let s=r[e];const l=t.data;if(function(r){return r instanceof Tc}(s)){const u=s;u.resolving&&function(r,t){throw new Wr("200",`Circular dependency in DI detected for ${r}`)}(zr(l[e]));const h=Zd(u.canSeeViewProviders);u.resolving=!0;const p=u.injectImpl?ns(u.injectImpl):null;Ip(r,n,pn.Default);try{s=r[e]=u.factory(void 0,l,r,n),t.firstCreatePass&&e>=n.directiveStart&&function(r,t,e){const{ngOnChanges:n,ngOnInit:s,ngDoCheck:l}=t.type.prototype;if(n){const u=fc(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(r,u),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,u)}s&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-r,s),l&&((e.preOrderHooks||(e.preOrderHooks=[])).push(r,l),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,l))}(e,l[e],t)}finally{null!==p&&ns(p),Zd(h),u.resolving=!1,Mu()}}return s}function rh(r,t,e){return!!(e[t+(r>>5)]&1<<r)}function Bp(r,t){return!(r&pn.Self||r&pn.Host&&t)}class Qs{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return Al(this._tNode,this._lView,t,n,e)}}function cn(r){return lo(()=>{const t=r.prototype.constructor,e=t[Po]||kl(t),n=Object.prototype;let s=Object.getPrototypeOf(r.prototype).constructor;for(;s&&s!==n;){const l=s[Po]||kl(s);if(l&&l!==e)return l;s=Object.getPrototypeOf(s)}return l=>new l})}function kl(r){return vo(r)?()=>{const t=kl(kt(r));return t&&t()}:Ba(r)}function qi(r){return function(r,t){if("class"===t)return r.classes;if("style"===t)return r.styles;const e=r.attrs;if(e){const n=e.length;let s=0;for(;s<n;){const l=e[s];if(Pp(l))break;if(0===l)s+=2;else if("number"==typeof l)for(s++;s<n&&"string"==typeof e[s];)s++;else{if(l===t)return e[s+1];s+=2}}}return null}(Yi(),r)}const Nl="__parameters__";function ja(r,t,e){return lo(()=>{const n=function(r){return function(...e){if(r){const n=r(...e);for(const s in n)this[s]=n[s]}}}(t);function s(...l){if(this instanceof s)return n.apply(this,l),this;const u=new s(...l);return h.annotation=u,h;function h(p,g,b){const C=p.hasOwnProperty(Nl)?p[Nl]:Object.defineProperty(p,Nl,{value:[]})[Nl];for(;C.length<=b;)C.push(null);return(C[b]=C[b]||[]).push(u),p}}return e&&(s.prototype=Object.create(e.prototype)),s.prototype.ngMetadataName=r,s.annotationCls=s,s})}class je{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Et({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Up=new je("AnalyzeForEntryComponents"),Xa=Function;function L(r,t){void 0===t&&(t=r);for(let e=0;e<r.length;e++){let n=r[e];Array.isArray(n)?(t===r&&(t=r.slice(0,e)),L(n,t)):t!==r&&t.push(n)}return t}function F(r,t){r.forEach(e=>Array.isArray(e)?F(e,t):t(e))}function Y(r,t,e){t>=r.length?r.push(e):r.splice(t,0,e)}function ae(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function pe(r,t){const e=[];for(let n=0;n<r;n++)e.push(t);return e}function tn(r,t,e){let n=xn(r,t);return n>=0?r[1|n]=e:(n=~n,function(r,t,e,n){let s=r.length;if(s==t)r.push(e,n);else if(1===s)r.push(n,r[0]),r[0]=e;else{for(s--,r.push(r[s-1],r[s]);s>t;)r[s]=r[s-2],s--;r[t]=e,r[t+1]=n}}(r,n,t,e)),n}function on(r,t){const e=xn(r,t);if(e>=0)return r[1|e]}function xn(r,t){return function(r,t,e){let n=0,s=r.length>>e;for(;s!==n;){const l=n+(s-n>>1),u=r[l<<e];if(t===u)return l<<e;u>t?s=l:n=l+1}return~(s<<e)}(r,t,1)}const ah={},Kg="__NG_DI_FLAG__",Rc="ngTempTokenPath",Sv=/\n/gm,jp="__source",Qg=nn({provide:String,useValue:nn});let Lu;function Pu(r){const t=Lu;return Lu=r,t}function Zg(r,t=pn.Default){if(void 0===Lu)throw new Error("inject() must be called from an injection context");return null===Lu?hp(r,void 0,t):Lu.get(r,t&pn.Optional?null:void 0,t)}function be(r,t=pn.Default){return(sc||Zg)(kt(r),t)}const lh=be;function xc(r){const t=[];for(let e=0;e<r.length;e++){const n=kt(r[e]);if(Array.isArray(n)){if(0===n.length)throw new Error("Arguments array must have arguments.");let s,l=pn.Default;for(let u=0;u<n.length;u++){const h=n[u],p=em(h);"number"==typeof p?-1===p?s=h.token:l|=p:s=h}t.push(be(s,l))}else t.push(be(n))}return t}function ch(r,t){return r[Kg]=t,r.prototype[Kg]=t,r}function em(r){return r[Kg]}function Mv(r,t,e,n){const s=r[Rc];throw t[jp]&&s.unshift(t[jp]),r.message=function(r,t,e,n=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let s=lt(t);if(Array.isArray(t))s=t.map(lt).join(" -> ");else if("object"==typeof t){let l=[];for(let u in t)if(t.hasOwnProperty(u)){let h=t[u];l.push(u+":"+("string"==typeof h?JSON.stringify(h):lt(h)))}s=`{${l.join(", ")}}`}return`${e}${n?"("+n+")":""}[${s}]: ${r.replace(Sv,"\n  ")}`}("\n"+r.message,s,e,n),r.ngTokenPath=s,r[Rc]=null,r}const Fu=ch(ja("Inject",r=>({token:r})),-1),sr=ch(ja("Optional"),8),Io=ch(ja("SkipSelf"),4);let Kp;function Ic(r){var t;return(null===(t=function(){if(void 0===Kp&&(Kp=null,hi.trustedTypes))try{Kp=hi.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return Kp}())||void 0===t?void 0:t.createHTML(r))||r}class Ac{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class VE extends Ac{getTypeName(){return"HTML"}}class Qp extends Ac{getTypeName(){return"Style"}}class HE extends Ac{getTypeName(){return"Script"}}class bR extends Ac{getTypeName(){return"URL"}}class UE extends Ac{getTypeName(){return"ResourceURL"}}function us(r){return r instanceof Ac?r.changingThisBreaksApplicationSecurity:r}function qs(r,t){const e=Nv(r);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}function Nv(r){return r instanceof Ac&&r.getTypeName()||null}class XE{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Ic(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class YE{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Ic(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Ic(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let s=e.length-1;0<s;s--){const u=e.item(s).name;("xmlns:ns1"===u||0===u.indexOf("ns1:"))&&t.removeAttribute(u)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const KE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,JE=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ph(r){return(r=String(r)).match(KE)||r.match(JE)?r:"unsafe:"+r}function Fv(r){return(r=String(r)).split(",").map(t=>ph(t.trim())).join(", ")}function ha(r){const t={};for(const e of r.split(","))t[e]=!0;return t}function fh(...r){const t={};for(const e of r)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const Bv=ha("area,br,col,hr,img,wbr"),sm=ha("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vv=ha("rp,rt"),am=fh(Bv,fh(sm,ha("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fh(Vv,ha("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fh(Vv,sm)),Zp=ha("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lm=ha("srcset"),Hv=fh(Zp,lm,ha("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ha("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),QE=ha("script,style,template");class Uv{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let s=this.checkClobberedElement(e,e.nextSibling);if(s){e=s;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!am.hasOwnProperty(e))return this.sanitizedSomething=!0,!QE.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let s=0;s<n.length;s++){const l=n.item(s),u=l.name,h=u.toLowerCase();if(!Hv.hasOwnProperty(h)){this.sanitizedSomething=!0;continue}let p=l.value;Zp[h]&&(p=ph(p)),lm[h]&&(p=Fv(p)),this.buf.push(" ",u,'="',Wv(p),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();am.hasOwnProperty(e)&&!Bv.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Wv(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const cm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gv=/([^\#-~ |!])/g;function Wv(r){return r.replace(/&/g,"&amp;").replace(cm,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Gv,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let qp;function zv(r,t){let e=null;try{qp=qp||function(r){const t=new YE(r);return function(){try{return!!(new window.DOMParser).parseFromString(Ic(""),"text/html")}catch(r){return!1}}()?new XE(t):t}(r);let n=t?String(t):"";e=qp.getInertBodyElement(n);let s=5,l=n;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,n=l,l=e.innerHTML,e=qp.getInertBodyElement(n)}while(n!==l);return Ic((new Uv).sanitizeChildren(um(e)||e))}finally{if(e){const n=um(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function um(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var vi=(()=>((vi=vi||{})[vi.NONE=0]="NONE",vi[vi.HTML=1]="HTML",vi[vi.STYLE=2]="STYLE",vi[vi.SCRIPT=3]="SCRIPT",vi[vi.URL=4]="URL",vi[vi.RESOURCE_URL=5]="RESOURCE_URL",vi))();function T(r){const t=function(){const r=ht();return r&&r[12]}();return t?t.sanitize(vi.URL,r)||"":qs(r,"URL")?us(r):ph(hn(r))}const Ze="__ngContext__";function et(r,t){r[Ze]=t}function $t(r){const t=function(r){return r[Ze]||null}(r);return t?Array.isArray(t)?t:t.lView:null}function Uu(r){return r.ngOriginalError}function dm(r,...t){r.error(...t)}class xs{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),s=function(r){return r&&r.ngErrorLogger||dm}(t);s(this._console,"ERROR",t),e&&s(this._console,"ORIGINAL ERROR",e),n&&s(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?function(r){return r.ngDebugContext}(t)||this._findContext(Uu(t)):null}_findOriginalError(t){let e=t&&Uu(t);for(;e&&Uu(e);)e=Uu(e);return e||null}}const RR=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(hi))();function Pl(r){return r instanceof Function?r():r}var ea=(()=>((ea=ea||{})[ea.Important=1]="Important",ea[ea.DashCase=2]="DashCase",ea))();function eT(r,t){return undefined(r,t)}function hm(r){const t=r[3];return wo(t)?t[3]:t}function tT(r){return kR(r[13])}function nT(r){return kR(r[4])}function kR(r){for(;null!==r&&!wo(r);)r=r[4];return r}function tf(r,t,e,n,s){if(null!=n){let l,u=!1;wo(n)?l=n:ss(n)&&(u=!0,n=n[0]);const h=Ji(n);0===r&&null!==e?null==s?VR(t,e,h):gh(t,e,h,s||null,!0):1===r&&null!==e?gh(t,e,h,s||null,!0):2===r?function(r,t,e){const n=Yv(r,t);n&&function(r,t,e,n){Ki(r)?r.removeChild(t,e,n):t.removeChild(e)}(r,n,t,e)}(t,h,u):3===r&&t.destroyNode(h),null!=l&&function(r,t,e,n,s){const l=e[7];l!==Ji(e)&&tf(t,r,n,l,s);for(let h=10;h<e.length;h++){const p=e[h];pm(p[1],p,r,t,n,l)}}(t,r,l,e,s)}}function rT(r,t,e){return Ki(r)?r.createElement(t,e):null===e?r.createElement(t):r.createElementNS(e,t)}function LR(r,t){const e=r[9],n=e.indexOf(t),s=t[3];1024&t[2]&&(t[2]&=-1025,Wd(s,-1)),e.splice(n,1)}function oT(r,t){if(r.length<=10)return;const e=10+t,n=r[e];if(n){const s=n[17];null!==s&&s!==r&&LR(s,n),t>0&&(r[e-1][4]=n[4]);const l=ae(r,10+t);!function(r,t){pm(r,t,t[11],2,null,null),t[0]=null,t[6]=null}(n[1],n);const u=l[19];null!==u&&u.detachView(l[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}function PR(r,t){if(!(256&t[2])){const e=t[11];Ki(e)&&e.destroyNode&&pm(r,t,e,3,null,null),function(r){let t=r[13];if(!t)return sT(r[1],r);for(;t;){let e=null;if(ss(t))e=t[13];else{const n=t[10];n&&(e=n)}if(!e){for(;t&&!t[4]&&t!==r;)ss(t)&&sT(t[1],t),t=t[3];null===t&&(t=r),ss(t)&&sT(t[1],t),e=t&&t[4]}t=e}}(t)}}function sT(r,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(r,t){let e;if(null!=r&&null!=(e=r.destroyHooks))for(let n=0;n<e.length;n+=2){const s=t[e[n]];if(!(s instanceof Tc)){const l=e[n+1];if(Array.isArray(l))for(let u=0;u<l.length;u+=2){const h=s[l[u]],p=l[u+1];try{p.call(h)}finally{}}else try{l.call(s)}finally{}}}}(r,t),function(r,t){const e=r.cleanup,n=t[7];let s=-1;if(null!==e)for(let l=0;l<e.length-1;l+=2)if("string"==typeof e[l]){const u=e[l+1],h="function"==typeof u?u(t):Ji(t[u]),p=n[s=e[l+2]],g=e[l+3];"boolean"==typeof g?h.removeEventListener(e[l],p,g):g>=0?n[s=g]():n[s=-g].unsubscribe(),l+=2}else{const u=n[s=e[l+1]];e[l].call(u)}if(null!==n){for(let l=s+1;l<n.length;l++)n[l]();t[7]=null}}(r,t),1===t[1].type&&Ki(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&wo(t[3])){e!==t[3]&&LR(e,t);const n=t[19];null!==n&&n.detachView(r)}}}function FR(r,t,e){return function(r,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[0];if(2&n.flags){const s=r.data[n.directiveStart].encapsulation;if(s===rr.None||s===rr.Emulated)return null}return So(n,e)}(r,t.parent,e)}function gh(r,t,e,n,s){Ki(r)?r.insertBefore(t,e,n,s):t.insertBefore(e,n,s)}function VR(r,t,e){Ki(r)?r.appendChild(t,e):t.appendChild(e)}function HR(r,t,e,n,s){null!==n?gh(r,t,e,n,s):VR(r,t,e)}function Yv(r,t){return Ki(r)?r.parentNode(t):t.parentNode}function UR(r,t,e){return WR(r,t,e)}let WR=function(r,t,e){return 40&r.type?So(r,e):null};function $v(r,t,e,n){const s=FR(r,n,t),l=t[11],h=UR(n.parent||t[6],n,t);if(null!=s)if(Array.isArray(e))for(let p=0;p<e.length;p++)HR(l,s,e[p],h,!1);else HR(l,s,e,h,!1)}function Kv(r,t){if(null!==t){const e=t.type;if(3&e)return So(t,r);if(4&e)return lT(-1,r[t.index]);if(8&e){const n=t.child;if(null!==n)return Kv(r,n);{const s=r[t.index];return wo(s)?lT(-1,s):Ji(s)}}if(32&e)return eT(t,r)()||Ji(r[t.index]);{const n=jR(r,t);return null!==n?Array.isArray(n)?n[0]:Kv(hm(r[16]),n):Kv(r,t.next)}}return null}function jR(r,t){return null!==t?r[16][6].projection[t.projection]:null}function lT(r,t){const e=10+r+1;if(e<t.length){const n=t[e],s=n[1].firstChild;if(null!==s)return Kv(n,s)}return t[7]}function cT(r,t,e,n,s,l,u){for(;null!=e;){const h=n[e.index],p=e.type;if(u&&0===t&&(h&&et(Ji(h),n),e.flags|=4),64!=(64&e.flags))if(8&p)cT(r,t,e.child,n,s,l,!1),tf(t,r,s,h,l);else if(32&p){const g=eT(e,n);let b;for(;b=g();)tf(t,r,s,b,l);tf(t,r,s,h,l)}else 16&p?YR(r,t,n,e,s,l):tf(t,r,s,h,l);e=u?e.projectionNext:e.next}}function pm(r,t,e,n,s,l){cT(e,n,r.firstChild,t,s,l,!1)}function YR(r,t,e,n,s,l){const u=e[16],p=u[6].projection[n.projection];if(Array.isArray(p))for(let g=0;g<p.length;g++)tf(t,r,s,p[g],l);else cT(r,t,p,u[3],s,l,!0)}function $R(r,t,e){Ki(r)?r.setAttribute(t,"style",e):t.style.cssText=e}function uT(r,t,e){Ki(r)?""===e?r.removeAttribute(t,"class"):r.setAttribute(t,"class",e):t.className=e}function KR(r,t,e){let n=r.length;for(;;){const s=r.indexOf(t,e);if(-1===s)return s;if(0===s||r.charCodeAt(s-1)<=32){const l=t.length;if(s+l===n||r.charCodeAt(s+l)<=32)return s}e=s+1}}const JR="ng-template";function u3(r,t,e){let n=0;for(;n<r.length;){let s=r[n++];if(e&&"class"===s){if(s=r[n],-1!==KR(s.toLowerCase(),t,0))return!0}else if(1===s){for(;n<r.length&&"string"==typeof(s=r[n++]);)if(s.toLowerCase()===t)return!0;return!1}}return!1}function QR(r){return 4===r.type&&r.value!==JR}function d3(r,t,e){return t===(4!==r.type||e?r.value:JR)}function h3(r,t,e){let n=4;const s=r.attrs||[],l=function(r){for(let t=0;t<r.length;t++)if(Pp(r[t]))return t;return r.length}(s);let u=!1;for(let h=0;h<t.length;h++){const p=t[h];if("number"!=typeof p){if(!u)if(4&n){if(n=2|1&n,""!==p&&!d3(r,p,e)||""===p&&1===t.length){if($a(n))return!1;u=!0}}else{const g=8&n?p:t[++h];if(8&n&&null!==r.attrs){if(!u3(r.attrs,g,e)){if($a(n))return!1;u=!0}continue}const C=p3(8&n?"class":p,s,QR(r),e);if(-1===C){if($a(n))return!1;u=!0;continue}if(""!==g){let w;w=C>l?"":s[C+1].toLowerCase();const x=8&n?w:null;if(x&&-1!==KR(x,g,0)||2&n&&g!==w){if($a(n))return!1;u=!0}}}}else{if(!u&&!$a(n)&&!$a(p))return!1;if(u&&$a(p))continue;u=!1,n=p|1&n}}return $a(n)||u}function $a(r){return 0==(1&r)}function p3(r,t,e,n){if(null===t)return-1;let s=0;if(n||!e){let l=!1;for(;s<t.length;){const u=t[s];if(u===r)return s;if(3===u||6===u)l=!0;else{if(1===u||2===u){let h=t[++s];for(;"string"==typeof h;)h=t[++s];continue}if(4===u)break;if(0===u){s+=4;continue}}s+=l?1:2}return-1}return function(r,t){let e=r.indexOf(4);if(e>-1)for(e++;e<r.length;){const n=r[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,r)}function ZR(r,t,e=!1){for(let n=0;n<t.length;n++)if(h3(r,t[n],e))return!0;return!1}function _3(r,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(r.length===n.length){for(let s=0;s<r.length;s++)if(r[s]!==n[s])continue e;return!0}}return!1}function qR(r,t){return r?":not("+t.trim()+")":t}function v3(r){let t=r[0],e=1,n=2,s="",l=!1;for(;e<r.length;){let u=r[e];if("string"==typeof u)if(2&n){const h=r[++e];s+="["+u+(h.length>0?'="'+h+'"':"")+"]"}else 8&n?s+="."+u:4&n&&(s+=" "+u);else""!==s&&!$a(u)&&(t+=qR(l,s),s=""),n=u,l=l||!$a(n);e++}return""!==s&&(t+=qR(l,s)),t}const Un={};function Ae(r){ex(ti(),ht(),wr()+r,Ml())}function ex(r,t,e,n){if(!n)if(3==(3&t[2])){const l=r.preOrderCheckHooks;null!==l&&xu(t,l,e)}else{const l=r.preOrderHooks;null!==l&&Cc(t,l,0,e)}Go(e)}function Jv(r,t){return r<<17|t<<2}function Ka(r){return r>>17&32767}function dT(r){return 2|r}function Oc(r){return(131068&r)>>2}function hT(r,t){return-131069&r|t<<2}function pT(r){return 1|r}function ux(r,t){const e=r.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const s=e[n],l=e[n+1];if(-1!==l){const u=r.data[l];Do(s),u.contentQueries(2,t[l],l)}}}function fm(r,t,e,n,s,l,u,h,p,g){const b=t.blueprint.slice();return b[0]=s,b[2]=140|n,Gd(b),b[3]=b[15]=r,b[8]=e,b[10]=u||r&&r[10],b[11]=h||r&&r[11],b[12]=p||r&&r[12]||null,b[9]=g||r&&r[9]||null,b[6]=l,b[16]=2==t.type?r[16]:b,b}function nf(r,t,e,n,s){let l=r.data[t];if(null===l)l=function(r,t,e,n,s){const l=Ua(),u=Cu(),p=r.data[t]=function(r,t,e,n,s,l){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?l:l&&l.parent,e,t,n,s);return null===r.firstChild&&(r.firstChild=p),null!==l&&(u?null==l.child&&null!==p.parent&&(l.child=p):null===l.next&&(l.next=p)),p}(r,t,e,n,s),En.lFrame.inI18n&&(l.flags|=64);else if(64&l.type){l.type=e,l.value=n,l.attrs=s;const u=function(){const r=En.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();l.injectorIndex=null===u?-1:u.injectorIndex}return Cs(l,!0),l}function rf(r,t,e,n){if(0===e)return-1;const s=t.length;for(let l=0;l<e;l++)t.push(n),r.blueprint.push(n),r.data.push(null);return s}function gm(r,t,e){as(t);try{const n=r.viewQuery;null!==n&&xT(1,n,e);const s=r.template;null!==s&&dx(r,t,s,1,e),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&ux(r,t),r.staticViewQueries&&xT(2,r.viewQuery,e);const l=r.components;null!==l&&function(r,t){for(let e=0;e<t.length;e++)Q3(r,t[e])}(t,l)}catch(n){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),n}finally{t[2]&=-5,Du()}}function sf(r,t,e,n){const s=t[2];if(256==(256&s))return;as(t);const l=Ml();try{Gd(t),function(r){En.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==e&&dx(r,t,e,2,n);const u=3==(3&s);if(!l)if(u){const g=r.preOrderCheckHooks;null!==g&&xu(t,g,null)}else{const g=r.preOrderHooks;null!==g&&Cc(t,g,0,null),Ec(t,0)}if(function(r){for(let t=tT(r);null!==t;t=nT(t)){if(!t[2])continue;const e=t[9];for(let n=0;n<e.length;n++){const s=e[n],l=s[3];0==(1024&s[2])&&Wd(l,1),s[2]|=1024}}}(t),function(r){for(let t=tT(r);null!==t;t=nT(t))for(let e=10;e<t.length;e++){const n=t[e],s=n[1];ca(n)&&sf(s,n,s.template,n[8])}}(t),null!==r.contentQueries&&ux(r,t),!l)if(u){const g=r.contentCheckHooks;null!==g&&xu(t,g)}else{const g=r.contentHooks;null!==g&&Cc(t,g,1),Ec(t,1)}!function(r,t){const e=r.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const s=e[n];if(s<0)Go(~s);else{const l=s,u=e[++n],h=e[++n];Fg(u,l),h(2,t[l])}}}finally{Go(-1)}}(r,t);const h=r.components;null!==h&&function(r,t){for(let e=0;e<t.length;e++)J3(r,t[e])}(t,h);const p=r.viewQuery;if(null!==p&&xT(2,p,n),!l)if(u){const g=r.viewCheckHooks;null!==g&&xu(t,g)}else{const g=r.viewHooks;null!==g&&Cc(t,g,2),Ec(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),l||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Wd(t[3],-1))}finally{Du()}}function A3(r,t,e,n){const s=t[10],l=!Ml(),u=Ha(t);try{l&&!u&&s.begin&&s.begin(),u&&gm(r,t,n),sf(r,t,e,n)}finally{l&&!u&&s.end&&s.end()}}function dx(r,t,e,n,s){const l=wr(),u=2&n;try{Go(-1),u&&t.length>20&&ex(r,t,20,Ml()),e(n,s)}finally{Go(l)}}function CT(r,t,e){!Dp()||(function(r,t,e,n){const s=e.directiveStart,l=e.directiveEnd;r.firstCreatePass||cs(e,t),et(n,t);const u=e.initialInputs;for(let h=s;h<l;h++){const p=r.data[h],g=co(p);g&&j3(t,e,p);const b=Ol(t,r,h,e);et(b,t),null!==u&&X3(0,h-s,b,p,0,u),g&&(Mo(e.index,t)[8]=b)}}(r,t,e,So(e,t)),128==(128&e.flags)&&function(r,t,e){const n=e.directiveStart,s=e.directiveEnd,u=e.index,h=En.lFrame.currentDirectiveIndex;try{Go(u);for(let p=n;p<s;p++){const g=r.data[p],b=t[p];wu(p),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&yx(g,b)}}finally{Go(-1),wu(h)}}(r,t,e))}function ET(r,t,e=So){const n=t.localNames;if(null!==n){let s=t.index+1;for(let l=0;l<n.length;l+=2){const u=n[l+1],h=-1===u?e(t,r):r[u];r[s++]=h}}}function px(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=qv(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):t}function qv(r,t,e,n,s,l,u,h,p,g){const b=20+n,C=b+s,w=function(r,t){const e=[];for(let n=0;n<t;n++)e.push(n<r?null:Un);return e}(b,C),x="function"==typeof g?g():g;return w[1]={type:r,blueprint:w,template:e,queries:null,viewQuery:h,declTNode:t,data:w.slice().fill(null,b),bindingStartIndex:b,expandoStartIndex:C,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:p,consts:x,incompleteFirstPass:!1}}function mx(r,t,e,n){const s=Mx(t);null===e?s.push(n):(s.push(e),r.firstCreatePass&&Dx(r).push(n,s.length-1))}function _x(r,t,e){for(let n in r)if(r.hasOwnProperty(n)){const s=r[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(t,s):e[n]=[t,s]}return e}function ta(r,t,e,n,s,l,u,h){const p=So(t,e);let b,g=t.inputs;!h&&null!=g&&(b=g[n])?(Ix(r,e,b,n,s),Ws(t)&&function(r,t){const e=Mo(t,r);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(n=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(n),s=null!=u?u(s,t.value||"",n):s,Ki(l)?l.setProperty(p,n,s):$s(n)||(p.setProperty?p.setProperty(n,s):p[n]=s))}function TT(r,t,e,n){let s=!1;if(Dp()){const l=function(r,t,e){const n=r.directiveRegistry;let s=null;if(n)for(let l=0;l<n.length;l++){const u=n[l];ZR(e,u.selectors,!1)&&(s||(s=[]),Ro(cs(e,t),r,u.type),co(u)?(Cx(r,e),s.unshift(u)):s.push(u))}return s}(r,t,e),u=null===n?null:{"":-1};if(null!==l){s=!0,Ex(e,r.data.length,l.length);for(let b=0;b<l.length;b++){const C=l[b];C.providersResolver&&C.providersResolver(C)}let h=!1,p=!1,g=rf(r,t,l.length,null);for(let b=0;b<l.length;b++){const C=l[b];e.mergedAttrs=Ga(e.mergedAttrs,C.hostAttrs),Tx(r,e,t,g,C),z3(g,C,u),null!==C.contentQueries&&(e.flags|=8),(null!==C.hostBindings||null!==C.hostAttrs||0!==C.hostVars)&&(e.flags|=128);const w=C.type.prototype;!h&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e.index),h=!0),!p&&(w.ngOnChanges||w.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e.index),p=!0),g++}!function(r,t){const n=t.directiveEnd,s=r.data,l=t.attrs,u=[];let h=null,p=null;for(let g=t.directiveStart;g<n;g++){const b=s[g],C=b.inputs,w=null===l||QR(t)?null:Y3(C,l);u.push(w),h=_x(C,g,h),p=_x(b.outputs,g,p)}null!==h&&(h.hasOwnProperty("class")&&(t.flags|=16),h.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=u,t.inputs=h,t.outputs=p}(r,e)}u&&function(r,t,e){if(t){const n=r.localNames=[];for(let s=0;s<t.length;s+=2){const l=e[t[s+1]];if(null==l)throw new Wr("301",`Export of name '${t[s+1]}' not found!`);n.push(t[s],l)}}}(e,n,u)}return e.mergedAttrs=Ga(e.mergedAttrs,e.attrs),s}function bx(r,t,e,n,s,l){const u=l.hostBindings;if(u){let h=r.hostBindingOpCodes;null===h&&(h=r.hostBindingOpCodes=[]);const p=~t.index;(function(r){let t=r.length;for(;t>0;){const e=r[--t];if("number"==typeof e&&e<0)return e}return 0})(h)!=p&&h.push(p),h.push(n,s,u)}}function yx(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function Cx(r,t){t.flags|=2,(r.components||(r.components=[])).push(t.index)}function z3(r,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=r;co(t)&&(e[""]=r)}}function Ex(r,t,e){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+e,r.providerIndexes=t}function Tx(r,t,e,n,s){r.data[n]=s;const l=s.factory||(s.factory=Ba(s.type)),u=new Tc(l,co(s),null);r.blueprint[n]=u,e[n]=u,bx(r,t,0,n,rf(r,e,s.hostVars,Un),s)}function j3(r,t,e){const n=So(t,r),s=px(e),l=r[10],u=eb(r,fm(r,s,null,e.onPush?64:16,n,t,l,l.createRenderer(n,e),null,null));r[t.index]=u}function Fl(r,t,e,n,s,l){const u=So(r,t);!function(r,t,e,n,s,l,u){if(null==l)Ki(r)?r.removeAttribute(t,s,e):t.removeAttribute(s);else{const h=null==u?hn(l):u(l,n||"",s);Ki(r)?r.setAttribute(t,s,h,e):e?t.setAttributeNS(e,s,h):t.setAttribute(s,h)}}(t[11],u,l,r.value,e,n,s)}function X3(r,t,e,n,s,l){const u=l[t];if(null!==u){const h=n.setInput;for(let p=0;p<u.length;){const g=u[p++],b=u[p++],C=u[p++];null!==h?n.setInput(e,C,g,b):e[b]=C}}}function Y3(r,t){let e=null,n=0;for(;n<t.length;){const s=t[n];if(0!==s)if(5!==s){if("number"==typeof s)break;r.hasOwnProperty(s)&&(null===e&&(e=[]),e.push(s,r[s],t[n+1])),n+=2}else n+=2;else n+=4}return e}function wx(r,t,e,n){return new Array(r,!0,!1,t,null,0,n,e,null,null)}function J3(r,t){const e=Mo(t,r);if(ca(e)){const n=e[1];80&e[2]?sf(n,e,n.template,e[8]):e[5]>0&&ST(e)}}function ST(r){for(let n=tT(r);null!==n;n=nT(n))for(let s=10;s<n.length;s++){const l=n[s];if(1024&l[2]){const u=l[1];sf(u,l,u.template,l[8])}else l[5]>0&&ST(l)}const e=r[1].components;if(null!==e)for(let n=0;n<e.length;n++){const s=Mo(e[n],r);ca(s)&&s[5]>0&&ST(s)}}function Q3(r,t){const e=Mo(t,r),n=e[1];(function(r,t){for(let e=t.length;e<r.blueprint.length;e++)t.push(r.blueprint[e])})(n,e),gm(n,e,e[8])}function eb(r,t){return r[13]?r[14][4]=t:r[13]=t,r[14]=t,t}function MT(r){for(;r;){r[2]|=64;const t=hm(r);if(hc(r)&&!t)return r;r=t}return null}function RT(r,t,e){const n=t[10];n.begin&&n.begin();try{sf(r,t,r.template,e)}catch(s){throw xx(t,s),s}finally{n.end&&n.end()}}function Sx(r){!function(r){for(let t=0;t<r.components.length;t++){const e=r.components[t],n=$t(e),s=n[1];A3(s,n,s.template,e)}}(r[8])}function xT(r,t,e){Do(0),t(r,e)}const nG=(()=>Promise.resolve(null))();function Mx(r){return r[7]||(r[7]=[])}function Dx(r){return r.cleanup||(r.cleanup=[])}function Rx(r,t,e){return(null===r||co(r))&&(e=function(r){for(;Array.isArray(r);){if("object"==typeof r[1])return r;r=r[0]}return null}(e[t.index])),e[11]}function xx(r,t){const e=r[9],n=e?e.get(xs,null):null;n&&n.handleError(t)}function Ix(r,t,e,n,s){for(let l=0;l<e.length;){const u=e[l++],h=e[l++],p=t[u],g=r.data[u];null!==g.setInput?g.setInput(p,s,n,h):p[h]=s}}function Nc(r,t,e){const n=js(t,r);!function(r,t,e){Ki(r)?r.setValue(t,e):t.textContent=e}(r[11],n,e)}function tb(r,t,e){let n=e?r.styles:null,s=e?r.classes:null,l=0;if(null!==t)for(let u=0;u<t.length;u++){const h=t[u];"number"==typeof h?l=h:1==l?s=dn(s,h):2==l&&(n=dn(n,h+": "+t[++u]+";"))}e?r.styles=n:r.stylesWithoutHost=n,e?r.classes=s:r.classesWithoutHost=s}const mh=new je("INJECTOR",-1);class Ax{get(t,e=ah){if(e===ah){const n=new Error(`NullInjectorError: No provider for ${lt(t)}!`);throw n.name="NullInjectorError",n}return e}}const mm=new je("Set Injector scope."),_m={},oG={};let IT;function Ox(){return void 0===IT&&(IT=new Ax),IT}function kx(r,t=null,e=null,n){return new aG(r,e,t||Ox(),n)}class aG{constructor(t,e,n,s=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const l=[];e&&F(e,h=>this.processProvider(h,t,e)),F([t],h=>this.processInjectorType(h,[],l)),this.records.set(mh,af(void 0,this));const u=this.records.get(mm);this.scope=null!=u?u.value:null,this.source=s||("object"==typeof t?null:lt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=ah,n=pn.Default){this.assertNotDestroyed();const s=Pu(this),l=ns(void 0);try{if(!(n&pn.SkipSelf)){let h=this.records.get(t);if(void 0===h){const p=function(r){return"function"==typeof r||"object"==typeof r&&r instanceof je}(t)&&ts(t);h=p&&this.injectableDefInScope(p)?af(AT(t),_m):null,this.records.set(t,h)}if(null!=h)return this.hydrate(t,h)}return(n&pn.Self?Ox():this.parent).get(t,e=n&pn.Optional&&e===ah?null:e)}catch(u){if("NullInjectorError"===u.name){if((u[Rc]=u[Rc]||[]).unshift(lt(t)),s)throw u;return Mv(u,t,"R3InjectorError",this.source)}throw u}finally{ns(l),Pu(s)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((n,s)=>t.push(lt(s))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=kt(t)))return!1;let s=dp(t);const l=null==s&&t.ngModule||void 0,u=void 0===l?t:l,h=-1!==n.indexOf(u);if(void 0!==l&&(s=dp(l)),null==s)return!1;if(null!=s.imports&&!h){let b;n.push(u);try{F(s.imports,C=>{this.processInjectorType(C,e,n)&&(void 0===b&&(b=[]),b.push(C))})}finally{}if(void 0!==b)for(let C=0;C<b.length;C++){const{ngModule:w,providers:x}=b[C];F(x,N=>this.processProvider(N,w,x||Ti))}}this.injectorDefTypes.add(u);const p=Ba(u)||(()=>new u);this.records.set(u,af(p,_m));const g=s.providers;if(null!=g&&!h){const b=t;F(g,C=>this.processProvider(C,b,g))}return void 0!==l&&void 0!==t.providers}processProvider(t,e,n){let s=lf(t=kt(t))?t:kt(t&&t.provide);const l=function(r,t,e){return Lx(r)?af(void 0,r.useValue):af(Nx(r),_m)}(t);if(lf(t)||!0!==t.multi)this.records.get(s);else{let u=this.records.get(s);u||(u=af(void 0,_m,!0),u.factory=()=>xc(u.multi),this.records.set(s,u)),s=t,u.multi.push(t)}this.records.set(s,l)}hydrate(t,e){return e.value===_m&&(e.value=oG,e.value=e.factory()),"object"==typeof e.value&&e.value&&function(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=kt(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function AT(r){const t=ts(r),e=null!==t?t.factory:Ba(r);if(null!==e)return e;if(r instanceof je)throw new Error(`Token ${lt(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const t=r.length;if(t>0){const n=pe(t,"?");throw new Error(`Can't resolve all parameters for ${lt(r)}: (${n.join(", ")}).`)}const e=function(r){const t=r&&(r[oc]||r[Rd]);if(t){const e=function(r){if(r.hasOwnProperty("name"))return r.name;const t=(""+r).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(r);return null!==e?()=>e.factory(r):()=>new r}(r);throw new Error("unreachable")}function Nx(r,t,e){let n;if(lf(r)){const s=kt(r);return Ba(s)||AT(s)}if(Lx(r))n=()=>kt(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))n=()=>r.useFactory(...xc(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))n=()=>be(kt(r.useExisting));else{const s=kt(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return Ba(s)||AT(s);n=()=>new s(...xc(r.deps))}return n}function af(r,t,e=!1){return{factory:r,value:t,multi:e?[]:void 0}}function Lx(r){return null!==r&&"object"==typeof r&&Qg in r}function lf(r){return"function"==typeof r}const Px=function(r,t,e){return function(r,t=null,e=null,n){const s=kx(r,t,e,n);return s._resolveInjectorDefTypes(),s}({name:e},t,r,e)};let Yn=(()=>{class r{static create(e,n){return Array.isArray(e)?Px(e,n,""):Px(e.providers,e.parent,e.name||"")}}return r.THROW_IF_NOT_FOUND=ah,r.NULL=new Ax,r.\u0275prov=Et({token:r,providedIn:"any",factory:()=>be(mh)}),r.__NG_ELEMENT_ID__=-1,r})();function RG(r,t){Ru($t(r)[1],Yi())}function He(r){let t=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),e=!0;const n=[r];for(;t;){let s;if(co(r))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");s=t.\u0275dir}if(s){if(e){n.push(s);const u=r;u.inputs=FT(r.inputs),u.declaredInputs=FT(r.declaredInputs),u.outputs=FT(r.outputs);const h=s.hostBindings;h&&OG(r,h);const p=s.viewQuery,g=s.contentQueries;if(p&&IG(r,p),g&&AG(r,g),yn(r.inputs,s.inputs),yn(r.declaredInputs,s.declaredInputs),yn(r.outputs,s.outputs),co(s)&&s.data.animation){const b=r.data;b.animation=(b.animation||[]).concat(s.data.animation)}}const l=s.features;if(l)for(let u=0;u<l.length;u++){const h=l[u];h&&h.ngInherit&&h(r),h===He&&(e=!1)}}t=Object.getPrototypeOf(t)}!function(r){let t=0,e=null;for(let n=r.length-1;n>=0;n--){const s=r[n];s.hostVars=t+=s.hostVars,s.hostAttrs=Ga(s.hostAttrs,e=Ga(e,s.hostAttrs))}}(n)}function FT(r){return r===bl?{}:r===Ti?[]:r}function IG(r,t){const e=r.viewQuery;r.viewQuery=e?(n,s)=>{t(n,s),e(n,s)}:t}function AG(r,t){const e=r.contentQueries;r.contentQueries=e?(n,s,l)=>{t(n,s,l),e(n,s,l)}:t}function OG(r,t){const e=r.hostBindings;r.hostBindings=e?(n,s)=>{t(n,s),e(n,s)}:t}let nb=null;function cf(){if(!nb){const r=hi.Symbol;if(r&&r.iterator)nb=r.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(nb=n)}}}return nb}class Qa{constructor(t){this.wrapped=t}static wrap(t){return new Qa(t)}static unwrap(t){return Qa.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Qa}}function bm(r){return!!BT(r)&&(Array.isArray(r)||!(r instanceof Map)&&cf()in r)}function BT(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function zo(r,t,e){return!Object.is(r[t],e)&&(r[t]=e,!0)}function _h(r,t,e,n){const s=zo(r,t,e);return zo(r,t+1,n)||s}function yt(r,t,e,n){const s=ht();return zo(s,Dl(),t)&&(ti(),Fl(Qi(),s,r,t,e,n)),yt}function df(r,t,e,n){return zo(r,Dl(),e)?t+hn(e)+n:Un}function pf(r,t,e,n,s,l,u,h){const g=function(r,t,e,n,s){const l=_h(r,t,e,n);return zo(r,t+2,s)||l}(r,Es(),e,s,u);return Uo(3),g?t+hn(e)+n+hn(s)+l+hn(u)+h:Un}function Ct(r,t,e,n,s,l,u,h){const p=ht(),g=ti(),b=r+20,C=g.firstCreatePass?function(r,t,e,n,s,l,u,h,p){const g=t.consts,b=nf(t,r,4,u||null,Xs(g,h));TT(t,e,b,Xs(g,p)),Ru(t,b);const C=b.tViews=qv(2,b,n,s,l,t.directiveRegistry,t.pipeRegistry,null,t.schemas,g);return null!==t.queries&&(t.queries.template(t,b),C.queries=t.queries.embeddedTView(b)),b}(b,g,p,t,e,n,s,l,u):g.data[b];Cs(C,!1);const w=p[11].createComment("");$v(g,p,w,C),et(w,p),eb(p,p[b]=wx(w,p,w,C)),dc(C)&&CT(g,p,C),null!=u&&ET(p,C,h)}function jo(r){return Va(En.lFrame.contextLView,20+r)}function k(r,t=pn.Default){const e=ht();return null===e?be(r,t):Al(Yi(),e,kt(r),t)}function ke(r,t,e){const n=ht();return zo(n,Dl(),t)&&ta(ti(),Qi(),n,r,t,n[11],e,!1),ke}function WT(r,t,e,n,s){const u=s?"class":"style";Ix(r,e,t.inputs[u],u,n)}function ge(r,t,e,n){const s=ht(),l=ti(),u=20+r,h=s[11],p=s[u]=rT(h,t,En.lFrame.currentNamespace),g=l.firstCreatePass?function(r,t,e,n,s,l,u){const h=t.consts,g=nf(t,r,2,s,Xs(h,l));return TT(t,e,g,Xs(h,u)),null!==g.attrs&&tb(g,g.attrs,!1),null!==g.mergedAttrs&&tb(g,g.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,g),g}(u,l,s,0,t,e,n):l.data[u];Cs(g,!0);const b=g.mergedAttrs;null!==b&&Iu(h,p,b);const C=g.classes;null!==C&&uT(h,p,C);const w=g.styles;null!==w&&$R(h,p,w),64!=(64&g.flags)&&$v(l,s,p,g),0===En.lFrame.elementDepthCount&&et(p,s),En.lFrame.elementDepthCount++,dc(g)&&(CT(l,s,g),function(r,t,e){if(Nd(t)){const s=t.directiveEnd;for(let l=t.directiveStart;l<s;l++){const u=r.data[l];u.contentQueries&&u.contentQueries(1,e[l],l)}}}(l,g,s)),null!==n&&ET(s,g)}function me(){let r=Yi();Cu()?Sl():(r=r.parent,Cs(r,!1));const t=r;En.lFrame.elementDepthCount--;const e=ti();e.firstCreatePass&&(Ru(e,r),Nd(r)&&e.queries.elementEnd(r)),null!=t.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(t)&&WT(e,t,ht(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(t)&&WT(e,t,ht(),t.stylesWithoutHost,!1)}function Nt(r,t,e,n){ge(r,t,e,n),me()}function er(){return ht()}function Cm(r){return!!r&&"function"==typeof r.then}function yI(r){return!!r&&"function"==typeof r.subscribe}const ob=yI;function ft(r,t,e,n){const s=ht(),l=ti(),u=Yi();return CI(l,s,s[11],u,r,t,!!e,n),ft}function vh(r,t){const e=Yi(),n=ht(),s=ti();return CI(s,n,Rx(Ts(s.data),e,n),e,r,t,!1),vh}function CI(r,t,e,n,s,l,u,h){const p=dc(n),b=r.firstCreatePass&&Dx(r),C=t[8],w=Mx(t);let x=!0;if(3&n.type||h){const V=So(n,t),$=h?h(V):V,te=w.length,xe=h?Re=>h(Ji(Re[n.index])):n.index;if(Ki(e)){let Re=null;if(!h&&p&&(Re=function(r,t,e,n){const s=r.cleanup;if(null!=s)for(let l=0;l<s.length-1;l+=2){const u=s[l];if(u===e&&s[l+1]===n){const h=t[7],p=s[l+2];return h.length>p?h[p]:null}"string"==typeof u&&(l+=2)}return null}(r,t,s,n.index)),null!==Re)(Re.__ngLastListenerFn__||Re).__ngNextListenerFn__=l,Re.__ngLastListenerFn__=l,x=!1;else{l=zT(n,t,C,l,!1);const Pe=e.listen($,s,l);w.push(l,Pe),b&&b.push(s,xe,te,te+1)}}else l=zT(n,t,C,l,!0),$.addEventListener(s,l,u),w.push(l),b&&b.push(s,xe,te,u)}else l=zT(n,t,C,l,!1);const N=n.outputs;let B;if(x&&null!==N&&(B=N[s])){const V=B.length;if(V)for(let $=0;$<V;$+=2){const nt=t[B[$]][B[$+1]].subscribe(l),ct=w.length;w.push(l,nt),b&&b.push(s,n.index,ct,-(ct+1))}}}function EI(r,t,e,n){try{return!1!==e(n)}catch(s){return xx(r,s),!1}}function zT(r,t,e,n,s){return function l(u){if(u===Function)return n;const h=2&r.flags?Mo(r.index,t):t;0==(32&t[2])&&MT(h);let p=EI(t,0,n,u),g=l.__ngNextListenerFn__;for(;g;)p=EI(t,0,g,u)&&p,g=g.__ngNextListenerFn__;return s&&!1===p&&(u.preventDefault(),u.returnValue=!1),p}}function gt(r=1){return function(r){return(En.lFrame.contextLView=function(r,t){for(;r>0;)t=t[15],r--;return t}(r,En.lFrame.contextLView))[8]}(r)}function hW(r,t){let e=null;const n=function(r){const t=r.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(r);for(let s=0;s<t.length;s++){const l=t[s];if("*"!==l){if(null===n?ZR(r,l,!0):_3(n,l))return s}else e=s}return e}function On(r){const t=ht()[16][6];if(!t.projection){const n=t.projection=pe(r?r.length:1,null),s=n.slice();let l=t.child;for(;null!==l;){const u=r?hW(l,r):0;null!==u&&(s[u]?s[u].projectionNext=l:n[u]=l,s[u]=l),l=l.next}}}function Ht(r,t=0,e){const n=ht(),s=ti(),l=nf(s,20+r,16,null,e||null);null===l.projection&&(l.projection=t),Sl(),64!=(64&l.flags)&&function(r,t,e){YR(t[11],0,t,e,FR(r,e,t),UR(e.parent||t[6],e,t))}(s,n,l)}function jT(r,t,e){return XT(r,"",t,"",e),jT}function XT(r,t,e,n,s){const l=ht(),u=df(l,t,e,n);return u!==Un&&ta(ti(),Qi(),l,r,u,l[11],s,!1),XT}function AI(r,t,e,n,s){const l=r[e+1],u=null===t;let h=n?Ka(l):Oc(l),p=!1;for(;0!==h&&(!1===p||u);){const b=r[h+1];gW(r[h],t)&&(p=!0,r[h+1]=n?pT(b):dT(b)),h=n?Ka(b):Oc(b)}p&&(r[e+1]=n?dT(l):pT(l))}function gW(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&xn(r,t)>=0}function fr(r,t,e){return el(r,t,e,!1),fr}function xt(r,t){return el(r,t,null,!0),xt}function el(r,t,e,n){const s=ht(),l=ti(),u=Uo(2);l.firstUpdatePass&&function(r,t,e,n){const s=r.data;if(null===s[e+1]){const l=s[wr()],u=function(r,t){return t>=r.expandoStartIndex}(r,e);(function(r,t){return 0!=(r.flags&(t?16:32))})(l,n)&&null===t&&!u&&(t=!1),t=function(r,t,e,n){const s=Ts(r);let l=n?t.residualClasses:t.residualStyles;if(null===s)0===(n?t.classBindings:t.styleBindings)&&(e=Em(e=YT(null,r,t,e,n),t.attrs,n),l=null);else{const u=t.directiveStylingLast;if(-1===u||r[u]!==s)if(e=YT(s,r,t,e,n),null===l){let p=function(r,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==Oc(n))return r[Ka(n)]}(r,t,n);void 0!==p&&Array.isArray(p)&&(p=YT(null,r,t,p[1],n),p=Em(p,t.attrs,n),function(r,t,e,n){r[Ka(e?t.classBindings:t.styleBindings)]=n}(r,t,n,p))}else l=function(r,t,e){let n;const s=t.directiveEnd;for(let l=1+t.directiveStylingLast;l<s;l++)n=Em(n,r[l].hostAttrs,e);return Em(n,t.attrs,e)}(r,t,n)}return void 0!==l&&(n?t.residualClasses=l:t.residualStyles=l),e}(s,l,t,n),function(r,t,e,n,s,l){let u=l?t.classBindings:t.styleBindings,h=Ka(u),p=Oc(u);r[n]=e;let b,g=!1;if(Array.isArray(e)){const C=e;b=C[1],(null===b||xn(C,b)>0)&&(g=!0)}else b=e;if(s)if(0!==p){const w=Ka(r[h+1]);r[n+1]=Jv(w,h),0!==w&&(r[w+1]=hT(r[w+1],n)),r[h+1]=function(r,t){return 131071&r|t<<17}(r[h+1],n)}else r[n+1]=Jv(h,0),0!==h&&(r[h+1]=hT(r[h+1],n)),h=n;else r[n+1]=Jv(p,0),0===h?h=n:r[p+1]=hT(r[p+1],n),p=n;g&&(r[n+1]=dT(r[n+1])),AI(r,b,n,!0),AI(r,b,n,!1),function(r,t,e,n,s){const l=s?r.residualClasses:r.residualStyles;null!=l&&"string"==typeof t&&xn(l,t)>=0&&(e[n+1]=pT(e[n+1]))}(t,b,r,n,l),u=Jv(h,p),l?t.classBindings=u:t.styleBindings=u}(s,l,t,e,u,n)}}(l,r,u,n),t!==Un&&zo(s,u,t)&&function(r,t,e,n,s,l,u,h){if(!(3&t.type))return;const p=r.data,g=p[h+1];sb(function(r){return 1==(1&r)}(g)?GI(p,t,e,s,Oc(g),u):void 0)||(sb(l)||function(r){return 2==(2&r)}(g)&&(l=GI(p,null,e,s,h,u)),function(r,t,e,n,s){const l=Ki(r);if(t)s?l?r.addClass(e,n):e.classList.add(n):l?r.removeClass(e,n):e.classList.remove(n);else{let u=-1===n.indexOf("-")?void 0:ea.DashCase;if(null==s)l?r.removeStyle(e,n,u):e.style.removeProperty(n);else{const h="string"==typeof s&&s.endsWith("!important");h&&(s=s.slice(0,-10),u|=ea.Important),l?r.setStyle(e,n,s,u):e.style.setProperty(n,s,h?"important":"")}}}(n,u,js(wr(),e),s,l))}(l,l.data[wr()],s,s[11],r,s[u+1]=function(r,t){return null==r||("string"==typeof t?r+=t:"object"==typeof r&&(r=lt(us(r)))),r}(t,e),n,u)}function YT(r,t,e,n,s){let l=null;const u=e.directiveEnd;let h=e.directiveStylingLast;for(-1===h?h=e.directiveStart:h++;h<u&&(l=t[h],n=Em(n,l.hostAttrs,s),l!==r);)h++;return null!==r&&(e.directiveStylingLast=h),n}function Em(r,t,e){const n=e?1:2;let s=-1;if(null!==t)for(let l=0;l<t.length;l++){const u=t[l];"number"==typeof u?s=u:s===n&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),tn(r,u,!!e||t[++l]))}return void 0===r?null:r}function GI(r,t,e,n,s,l){const u=null===t;let h;for(;s>0;){const p=r[s],g=Array.isArray(p),b=g?p[1]:p,C=null===b;let w=e[s+1];w===Un&&(w=C?Ti:void 0);let x=C?on(w,n):b===n?w:void 0;if(g&&!sb(x)&&(x=on(p,n)),sb(x)&&(h=x,u))return h;const N=r[s+1];s=u?Ka(N):Oc(N)}if(null!==t){let p=l?t.residualClasses:t.residualStyles;null!=p&&(h=on(p,n))}return h}function sb(r){return void 0!==r}function It(r,t=""){const e=ht(),n=ti(),s=r+20,l=n.firstCreatePass?nf(n,s,1,t,null):n.data[s],u=e[s]=function(r,t){return Ki(r)?r.createText(t):r.createTextNode(t)}(e[11],t);$v(n,e,u,l),Cs(l,!1)}function ar(r){return io("",r,""),ar}function io(r,t,e){const n=ht(),s=df(n,r,t,e);return s!==Un&&Nc(n,wr(),s),io}function ab(r,t,e,n,s){const l=ht(),u=function(r,t,e,n,s,l){const h=_h(r,Es(),e,s);return Uo(2),h?t+hn(e)+n+hn(s)+l:Un}(l,r,t,e,n,s);return u!==Un&&Nc(l,wr(),u),ab}function $T(r,t,e,n,s,l,u){const h=ht(),p=pf(h,r,t,e,n,s,l,u);return p!==Un&&Nc(h,wr(),p),$T}function ro(r,t,e){const n=ht();return zo(n,Dl(),t)&&ta(ti(),Qi(),n,r,t,n[11],e,!0),ro}function bh(r,t,e){const n=ht();if(zo(n,Dl(),t)){const l=ti(),u=Qi();ta(l,u,n,r,t,Rx(Ts(l.data),u,n),e,!0)}return bh}const yh=void 0;var KW=["en",[["a","p"],["AM","PM"],yh],[["AM","PM"],yh,yh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yh,"{1} 'at' {0}",yh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const t=Math.floor(Math.abs(r)),e=r.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===e?1:5}];let Cf={};function sA(r){return r in Cf||(Cf[r]=hi.ng&&hi.ng.common&&hi.ng.common.locales&&hi.ng.common.locales[r]),Cf[r]}var Qt=(()=>((Qt=Qt||{})[Qt.LocaleId=0]="LocaleId",Qt[Qt.DayPeriodsFormat=1]="DayPeriodsFormat",Qt[Qt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qt[Qt.DaysFormat=3]="DaysFormat",Qt[Qt.DaysStandalone=4]="DaysStandalone",Qt[Qt.MonthsFormat=5]="MonthsFormat",Qt[Qt.MonthsStandalone=6]="MonthsStandalone",Qt[Qt.Eras=7]="Eras",Qt[Qt.FirstDayOfWeek=8]="FirstDayOfWeek",Qt[Qt.WeekendRange=9]="WeekendRange",Qt[Qt.DateFormat=10]="DateFormat",Qt[Qt.TimeFormat=11]="TimeFormat",Qt[Qt.DateTimeFormat=12]="DateTimeFormat",Qt[Qt.NumberSymbols=13]="NumberSymbols",Qt[Qt.NumberFormats=14]="NumberFormats",Qt[Qt.CurrencyCode=15]="CurrencyCode",Qt[Qt.CurrencySymbol=16]="CurrencySymbol",Qt[Qt.CurrencyName=17]="CurrencyName",Qt[Qt.Currencies=18]="Currencies",Qt[Qt.Directionality=19]="Directionality",Qt[Qt.PluralCase=20]="PluralCase",Qt[Qt.ExtraData=21]="ExtraData",Qt))();const lb="en-US";let aA=lb;function JT(r){ao(r,"Expected localeId to be defined"),"string"==typeof r&&(aA=r.toLowerCase().replace(/_/g,"-"))}function qT(r,t,e,n,s){if(r=kt(r),Array.isArray(r))for(let l=0;l<r.length;l++)qT(r[l],t,e,n,s);else{const l=ti(),u=ht();let h=lf(r)?r:kt(r.provide),p=Nx(r);const g=Yi(),b=1048575&g.providerIndexes,C=g.directiveStart,w=g.providerIndexes>>20;if(lf(r)||!r.multi){const x=new Tc(p,s,k),N=tw(h,t,s?b:b+w,C);-1===N?(Ro(cs(g,u),l,h),ew(l,r,t.length),t.push(h),g.directiveStart++,g.directiveEnd++,s&&(g.providerIndexes+=1048576),e.push(x),u.push(x)):(e[N]=x,u[N]=x)}else{const x=tw(h,t,b+w,C),N=tw(h,t,b,b+w),B=x>=0&&e[x],V=N>=0&&e[N];if(s&&!V||!s&&!B){Ro(cs(g,u),l,h);const $=function(r,t,e,n,s){const l=new Tc(r,e,k);return l.multi=[],l.index=t,l.componentProviders=0,AA(l,s,n&&!e),l}(s?Xz:jz,e.length,s,n,p);!s&&V&&(e[N].providerFactory=$),ew(l,r,t.length,0),t.push(h),g.directiveStart++,g.directiveEnd++,s&&(g.providerIndexes+=1048576),e.push($),u.push($)}else ew(l,r,x>-1?x:N,AA(e[s?N:x],p,!s&&n));!s&&n&&V&&e[N].componentProviders++}}}function ew(r,t,e,n){const s=lf(t);if(s||function(r){return!!r.useClass}(t)){const u=(t.useClass||t).prototype.ngOnDestroy;if(u){const h=r.destroyHooks||(r.destroyHooks=[]);if(!s&&t.multi){const p=h.indexOf(e);-1===p?h.push(e,[n,u]):h[p+1].push(n,u)}else h.push(e,u)}}}function AA(r,t,e){return e&&r.componentProviders++,r.multi.push(t)-1}function tw(r,t,e,n){for(let s=e;s<n;s++)if(t[s]===r)return s;return-1}function jz(r,t,e,n){return nw(this.multi,[])}function Xz(r,t,e,n){const s=this.multi;let l;if(this.providerFactory){const u=this.providerFactory.componentProviders,h=Ol(e,e[1],this.providerFactory.index,n);l=h.slice(0,u),nw(s,l);for(let p=u;p<h.length;p++)l.push(h[p])}else l=[],nw(s,l);return l}function nw(r,t){for(let e=0;e<r.length;e++)t.push((0,r[e])());return t}function vt(r,t=[]){return e=>{e.providersResolver=(n,s)=>function(r,t,e){const n=ti();if(n.firstCreatePass){const s=co(r);qT(e,n.data,n.blueprint,s,!0),qT(t,n.data,n.blueprint,s,!1)}}(n,s?s(r):r,t)}}class OA{}const NA="ngComponent";class Kz{resolveComponentFactory(t){throw function(r){const t=Error(`No component factory found for ${lt(r)}. Did you add it to @NgModule.entryComponents?`);return t[NA]=r,t}(t)}}let nl=(()=>{class r{}return r.NULL=new Kz,r})();function pb(...r){}function Tf(r,t){return new qe(So(r,t))}const Zz=function(){return Tf(Yi(),ht())};let qe=(()=>{class r{constructor(e){this.nativeElement=e}}return r.__NG_ELEMENT_ID__=Zz,r})();function LA(r){return r instanceof qe?r.nativeElement:r}class Ch{}let Ul=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>ej(),r})();const ej=function(){const r=ht(),e=Mo(Yi().index,r);return function(r){return r[11]}(ss(e)?e:r)};let rw=(()=>{class r{}return r.\u0275prov=Et({token:r,providedIn:"root",factory:()=>null}),r})();class zu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const PA=new zu("12.2.13");class FA{constructor(){}supports(t){return bm(t)}create(t){return new rj(t)}}const ij=(r,t)=>t;class rj{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ij}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,s=0,l=null;for(;e||n;){const u=!n||e&&e.currentIndex<VA(n,s,l)?e:n,h=VA(u,s,l),p=u.currentIndex;if(u===n)s--,n=n._nextRemoved;else if(e=e._next,null==u.previousIndex)s++;else{l||(l=[]);const g=h-s,b=p-s;if(g!=b){for(let w=0;w<g;w++){const x=w<l.length?l[w]:l[w]=0,N=x+w;b<=N&&N<g&&(l[w]=x+1)}l[u.previousIndex]=b-g}}h!==p&&t(u,h,p)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!bm(t))throw new Error(`Error trying to diff '${lt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let s,l,u,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let h=0;h<this.length;h++)l=t[h],u=this._trackByFn(h,l),null!==e&&Object.is(e.trackById,u)?(n&&(e=this._verifyReinsertion(e,l,u,h)),Object.is(e.item,l)||this._addIdentityChange(e,l)):(e=this._mismatch(e,l,u,h),n=!0),e=e._next}else s=0,function(r,t){if(Array.isArray(r))for(let e=0;e<r.length;e++)t(r[e]);else{const e=r[cf()]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,h=>{u=this._trackByFn(s,h),null!==e&&Object.is(e.trackById,u)?(n&&(e=this._verifyReinsertion(e,h,u,s)),Object.is(e.item,h)||this._addIdentityChange(e,h)):(e=this._mismatch(e,h,u,s),n=!0),e=e._next,s++}),this.length=s;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,s){let l;return null===t?l=this._itTail:(l=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,l,s)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,s))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,l,s)):t=this._addAfter(new oj(e,n),l,s),t}_verifyReinsertion(t,e,n,s){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==l?t=this._reinsertAfter(l,t._prev,s):t.currentIndex!=s&&(t.currentIndex=s,this._addToMoves(t,s)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const s=t._prevRemoved,l=t._nextRemoved;return null===s?this._removalsHead=l:s._nextRemoved=l,null===l?this._removalsTail=s:l._prevRemoved=s,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const s=null===e?this._itHead:e._next;return t._next=s,t._prev=e,null===s?this._itTail=t:s._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new BA),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new BA),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class oj{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sj{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class BA{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new sj,this.map.set(e,n)),n.add(t)}get(t,e){const s=this.map.get(t);return s?s.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VA(r,t,e){const n=r.previousIndex;if(null===n)return n;let s=0;return e&&n<e.length&&(s=e[n]),n+t+s}class HA{constructor(){}supports(t){return t instanceof Map||BT(t)}create(){return new aj}}class aj{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||BT(t)))throw new Error(`Error trying to diff '${lt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,s)=>{if(e&&e.key===s)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const l=this._getOrCreateRecordForKey(s,n);e=this._insertBeforeOrAppend(e,l)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const s=this._records.get(t);this._maybeAddToChanges(s,e);const l=s._prev,u=s._next;return l&&(l._next=u),u&&(u._prev=l),s._next=null,s._prev=null,s}const n=new lj(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class lj{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UA(){return new Is([new FA])}let Is=(()=>{class r{constructor(e){this.factories=e}static create(e,n){if(null!=n){const s=n.factories.slice();e=e.concat(s)}return new r(e)}static extend(e){return{provide:r,useFactory:n=>r.create(e,n||UA()),deps:[[r,new Io,new sr]]}}find(e){const n=this.factories.find(s=>s.supports(e));if(null!=n)return n;throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(r){return r.name||typeof r}(e)}'`)}}return r.\u0275prov=Et({token:r,providedIn:"root",factory:UA}),r})();function GA(){return new wf([new HA])}let wf=(()=>{class r{constructor(e){this.factories=e}static create(e,n){if(n){const s=n.factories.slice();e=e.concat(s)}return new r(e)}static extend(e){return{provide:r,useFactory:n=>r.create(e,n||GA()),deps:[[r,new Io,new sr]]}}find(e){const n=this.factories.find(s=>s.supports(e));if(n)return n;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return r.\u0275prov=Et({token:r,providedIn:"root",factory:GA}),r})();function fb(r,t,e,n,s=!1){for(;null!==e;){const l=t[e.index];if(null!==l&&n.push(Ji(l)),wo(l))for(let h=10;h<l.length;h++){const p=l[h],g=p[1].firstChild;null!==g&&fb(p[1],p,g,n)}const u=e.type;if(8&u)fb(r,t,e.child,n);else if(32&u){const h=eT(e,t);let p;for(;p=h();)n.push(p)}else if(16&u){const h=jR(t,e);if(Array.isArray(h))n.push(...h);else{const p=hm(t[16]);fb(p[1],p,h,n,!0)}}e=s?e.projectionNext:e.next}return n}class Dm{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return fb(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(wo(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(oT(t,n),ae(e,n))}this._attachedToViewContainer=!1}PR(this._lView[1],this._lView)}onDestroy(t){mx(this._lView[1],this._lView,null,t)}markForCheck(){MT(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){RT(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,t,e){Eu(!0);try{RT(r,t,e)}finally{Eu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(r,t){pm(r,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class uj extends Dm{constructor(t){super(t),this._view=t}detectChanges(){Sx(this._view)}checkNoChanges(){!function(r){Eu(!0);try{Sx(r)}finally{Eu(!1)}}(this._view)}get context(){return null}}const hj=function(r){return function(r,t,e){if(Ws(r)&&!e){const n=Mo(r.index,t);return new Dm(n,n)}return 47&r.type?new Dm(t[16],t):null}(Yi(),ht(),16==(16&r))};let bn=(()=>{class r{}return r.__NG_ELEMENT_ID__=hj,r})();const gj=[new HA],_j=new Is([new FA]),vj=new wf(gj),yj=function(){return gb(Yi(),ht())};let ci=(()=>{class r{}return r.__NG_ELEMENT_ID__=yj,r})();const Cj=ci,Ej=class extends Cj{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=fm(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const l=this._declarationLView[19];return null!==l&&(n[19]=l.createEmbeddedView(e)),gm(e,n,t),new Dm(n)}};function gb(r,t){return 4&r.type?new Ej(t,r,Tf(r,t)):null}class Gl{}class WA{}const Sj=function(){return XA(Yi(),ht())};let bi=(()=>{class r{}return r.__NG_ELEMENT_ID__=Sj,r})();const Dj=bi,zA=class extends Dj{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Tf(this._hostTNode,this._hostLView)}get injector(){return new Qs(this._hostTNode,this._hostLView)}get parentInjector(){const t=Yr(this._hostTNode,this._hostLView);if(Or(t)){const e=ua(t,this._hostLView),n=Ks(t);return new Qs(e[1].data[n+8],e)}return new Qs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=jA(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const s=t.createEmbeddedView(e||{});return this.insert(s,n),s}createComponent(t,e,n,s,l){const u=n||this.parentInjector;if(!l&&null==t.ngModule&&u){const p=u.get(Gl,null);p&&(l=p)}const h=t.create(u,s,void 0,l);return this.insert(h.hostView,e),h}insert(t,e){const n=t._lView,s=n[1];if(function(r){return wo(r[3])}(n)){const b=this.indexOf(t);if(-1!==b)this.detach(b);else{const C=n[3],w=new zA(C,C[6],C[3]);w.detach(w.indexOf(t))}}const l=this._adjustIndex(e),u=this._lContainer;!function(r,t,e,n){const s=10+n,l=e.length;n>0&&(e[s-1][4]=t),n<l-10?(t[4]=e[s],Y(e,10+n,t)):(e.push(t),t[4]=null),t[3]=e;const u=t[17];null!==u&&e!==u&&function(r,t){const e=r[9];t[16]!==t[3][3][16]&&(r[2]=!0),null===e?r[9]=[t]:e.push(t)}(u,t);const h=t[19];null!==h&&h.insertView(r),t[2]|=128}(s,n,u,l);const h=lT(l,u),p=n[11],g=Yv(p,u[7]);return null!==g&&function(r,t,e,n,s,l){n[0]=s,n[6]=t,pm(r,n,e,1,s,l)}(s,u[6],p,n,g,h),t.attachToViewContainerRef(),Y(ow(u),l,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=jA(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=oT(this._lContainer,e);n&&(ae(ow(this._lContainer),e),PR(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=oT(this._lContainer,e);return n&&null!=ae(ow(this._lContainer),e)?new Dm(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function jA(r){return r[8]}function ow(r){return r[8]||(r[8]=[])}function XA(r,t){let e;const n=t[r.index];if(wo(n))e=n;else{let s;if(8&r.type)s=Ji(n);else{const l=t[11];s=l.createComment("");const u=So(r,t);gh(l,Yv(l,u),s,function(r,t){return Ki(r)?r.nextSibling(t):t.nextSibling}(l,u),!1)}t[r.index]=e=wx(n,t,s,r),eb(t,e)}return new zA(e,r,t)}const Rf={};class hO extends nl{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=cr(t);return new fO(e,this.ngModule)}}function pO(r){const t=[];for(let e in r)r.hasOwnProperty(e)&&t.push({propName:r[e],templateName:e});return t}const T5=new je("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>RR});class fO extends OA{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function(r){return r.map(v3).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return pO(this.componentDef.inputs)}get outputs(){return pO(this.componentDef.outputs)}create(t,e,n,s){const l=(s=s||this.ngModule)?function(r,t){return{get:(e,n,s)=>{const l=r.get(e,Rf,s);return l!==Rf||n===Rf?l:t.get(e,n,s)}}}(t,s.injector):t,u=l.get(Ch,vc),h=l.get(rw,null),p=u.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",b=n?function(r,t,e){if(Ki(r))return r.selectRootElement(t,e===rr.ShadowDom);let n="string"==typeof t?r.querySelector(t):t;return n.textContent="",n}(p,n,this.componentDef.encapsulation):rT(u.createRenderer(null,this.componentDef),g,function(r){const t=r.toLowerCase();return"svg"===t?wp:"math"===t?"http://www.w3.org/1998/MathML/":null}(g)),C=this.componentDef.onPush?576:528,w=function(r,t){return{components:[],scheduler:r||RR,clean:nG,playerHandler:t||null,flags:0}}(),x=qv(0,null,null,1,0,null,null,null,null,null),N=fm(null,x,w,C,null,null,u,p,h,l);let B,V;as(N);try{const $=function(r,t,e,n,s,l){const u=e[1];e[20]=r;const p=nf(u,20,2,"#host",null),g=p.mergedAttrs=t.hostAttrs;null!==g&&(tb(p,g,!0),null!==r&&(Iu(s,r,g),null!==p.classes&&uT(s,r,p.classes),null!==p.styles&&$R(s,r,p.styles)));const b=n.createRenderer(r,t),C=fm(e,px(t),null,t.onPush?64:16,e[20],p,n,b,l||null,null);return u.firstCreatePass&&(Ro(cs(p,e),u,t.type),Cx(u,p),Ex(p,e.length,1)),eb(e,C),e[20]=C}(b,this.componentDef,N,u,p);if(b)if(n)Iu(p,b,["ng-version",PA.full]);else{const{attrs:te,classes:xe}=function(r){const t=[],e=[];let n=1,s=2;for(;n<r.length;){let l=r[n];if("string"==typeof l)2===s?""!==l&&t.push(l,r[++n]):8===s&&e.push(l);else{if(!$a(s))break;s=l}n++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);te&&Iu(p,b,te),xe&&xe.length>0&&uT(p,b,xe.join(" "))}if(V=bu(x,20),void 0!==e){const te=V.projection=[];for(let xe=0;xe<this.ngContentSelectors.length;xe++){const Re=e[xe];te.push(null!=Re?Array.from(Re):null)}}B=function(r,t,e,n,s){const l=e[1],u=function(r,t,e){const n=Yi();r.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),Tx(r,n,t,rf(r,t,1,null),e));const s=Ol(t,r,n.directiveStart,n);et(s,t);const l=So(n,t);return l&&et(l,t),s}(l,e,t);if(n.components.push(u),r[8]=u,s&&s.forEach(p=>p(u,t)),t.contentQueries){const p=Yi();t.contentQueries(1,u,p.directiveStart)}const h=Yi();return!l.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Go(h.index),bx(e[1],h,0,h.directiveStart,h.directiveEnd,t),yx(t,u)),u}($,this.componentDef,N,w,[RG]),gm(x,N,null)}finally{Du()}return new M5(this.componentType,B,Tf(V,N),N,V)}}class M5 extends class{}{constructor(t,e,n,s,l){super(),this.location=n,this._rootLView=s,this._tNode=l,this.instance=e,this.hostView=this.changeDetectorRef=new uj(s),this.componentType=t}get injector(){return new Qs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const xf=new Map;class x5 extends Gl{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new hO(this);const n=Co(t),s=function(r){return r[pp]||null}(t);s&&JT(s),this._bootstrapComponents=Pl(n.bootstrap),this._r3Injector=kx(t,e,[{provide:Gl,useValue:this},{provide:nl,useValue:this.componentFactoryResolver}],lt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Yn.THROW_IF_NOT_FOUND,n=pn.Default){return t===Yn||t===Gl||t===mh?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class vw extends WA{constructor(t){super(),this.moduleType=t,null!==Co(t)&&function(r){const t=new Set;!function e(n){const s=Co(n,!0),l=s.id;null!==l&&(function(r,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${r} - ${lt(t)} vs ${lt(t.name)}`)}(l,xf.get(l),n),xf.set(l,n));const u=Pl(s.imports);for(const h of u)t.has(h)||(t.add(h),e(h))}(r)}(t)}create(t){return new x5(this.moduleType,t)}}function wh(r,t,e,n){return _O(ht(),Ar(),r,t,e,n)}function _O(r,t,e,n,s,l){const u=t+e;return zo(r,u,s)?function(r,t,e){return r[t]=e}(r,u+1,l?n.call(l,s):n(s)):function(r,t){const e=r[t];return e===Un?void 0:e}(r,u+1)}function Sh(r,t){const e=ti();let n;const s=r+20;e.firstCreatePass?(n=function(r,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(r===n.name)return n}throw new Wr("302",`The pipe '${r}' could not be found!`)}(t,e.pipeRegistry),e.data[s]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(s,n.onDestroy)):n=e.data[s];const l=n.factory||(n.factory=Ba(n.type)),u=ns(k);try{const h=Zd(!1),p=l();return Zd(h),function(r,t,e,n){e>=r.data.length&&(r.data[e]=null,r.blueprint[e]=null),t[e]=n}(e,ht(),s,p),p}finally{ns(u)}}function Mh(r,t,e){const n=r+20,s=ht(),l=Va(s,n);return function(r,t){Qa.isWrapped(t)&&(t=Qa.unwrap(t),r[Es()]=Un);return t}(s,function(r,t){return r[1].data[t].pure}(s,n)?_O(s,Ar(),t,l.transform,e,l):l.transform(e))}function bw(r){return t=>{setTimeout(r,void 0,t)}}const st=class extends j{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var s,l,u;let h=t,p=e||(()=>null),g=n;if(t&&"object"==typeof t){const C=t;h=null===(s=C.next)||void 0===s?void 0:s.bind(C),p=null===(l=C.error)||void 0===l?void 0:l.bind(C),g=null===(u=C.complete)||void 0===u?void 0:u.bind(C)}this.__isAsync&&(p=bw(p),h&&(h=bw(h)),g&&(g=bw(g)));const b=super.subscribe({next:h,error:p,complete:g});return t instanceof D&&t.add(b),b}};function z5(){return this._results[cf()]()}class na{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=cf(),n=na.prototype;n[e]||(n[e]=z5)}get changes(){return this._changes||(this._changes=new st)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const s=L(t);(this._changesDetected=!function(r,t,e){if(r.length!==t.length)return!1;for(let n=0;n<r.length;n++){let s=r[n],l=t[n];if(e&&(s=e(s),l=e(l)),l!==s)return!1}return!0}(n._results,s,e))&&(n._results=s,n.length=s.length,n.last=s[this.length-1],n.first=s[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class yw{constructor(t){this.queryList=t,this.matches=null}clone(){return new yw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cw{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,s=[];for(let l=0;l<n;l++){const u=e.getByIndex(l);s.push(this.queries[u.indexInDeclarationView].clone())}return new Cw(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==MO(t,e).matches&&this.queries[e].setDirty()}}class EO{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Ew{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const s=null!==e?e.length:0,l=this.getByIndex(n).embeddedTView(t,s);l&&(l.indexInDeclarationView=n,null!==e?e.push(l):e=[l])}return null!==e?new Ew(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Tw{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Tw(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let s=0;s<n.length;s++){const l=n[s];this.matchTNodeWithReadOption(t,e,Y5(e,l)),this.matchTNodeWithReadOption(t,e,Ou(e,t,l,!1,!1))}else n===ci?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ou(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const s=this.metadata.read;if(null!==s)if(s===qe||s===bi||s===ci&&4&e.type)this.addMatch(e.index,-2);else{const l=Ou(e,t,s,!1,!1);null!==l&&this.addMatch(e.index,l)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Y5(r,t){const e=r.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function K5(r,t,e,n){return-1===e?function(r,t){return 11&r.type?Tf(r,t):4&r.type?gb(r,t):null}(t,r):-2===e?function(r,t,e){return e===qe?Tf(t,r):e===ci?gb(t,r):e===bi?XA(t,r):void 0}(r,t,n):Ol(r,r[1],e,t)}function TO(r,t,e,n){const s=t[19].queries[n];if(null===s.matches){const l=r.data,u=e.matches,h=[];for(let p=0;p<u.length;p+=2){const g=u[p];h.push(g<0?null:K5(t,l[g],u[p+1],e.metadata.read))}s.matches=h}return s.matches}function ww(r,t,e,n){const s=r.queries.getByIndex(e),l=s.matches;if(null!==l){const u=TO(r,t,s,e);for(let h=0;h<l.length;h+=2){const p=l[h];if(p>0)n.push(u[h/2]);else{const g=l[h+1],b=t[-p];for(let C=10;C<b.length;C++){const w=b[C];w[17]===w[3]&&ww(w[1],w,g,n)}if(null!==b[9]){const C=b[9];for(let w=0;w<C.length;w++){const x=C[w];ww(x[1],x,g,n)}}}}}return n}function Ye(r){const t=ht(),e=ti(),n=Rp();Do(n+1);const s=MO(e,n);if(r.dirty&&Ha(t)===(2==(2&s.metadata.flags))){if(null===s.matches)r.reset([]);else{const l=s.crossesNgTemplate?ww(e,t,n,[]):TO(e,t,s,n);r.reset(l,LA),r.notifyOnChanges()}return!0}return!1}function gn(r,t,e){const n=ti();n.firstCreatePass&&(SO(n,new EO(r,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),wO(n,ht(),t)}function sn(r,t,e,n){const s=ti();if(s.firstCreatePass){const l=Yi();SO(s,new EO(t,e,n),l.index),function(r,t){const e=r.contentQueries||(r.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(r.queries.length-1,t)}(s,r),2==(2&e)&&(s.staticContentQueries=!0)}wO(s,ht(),e)}function $e(){return function(r,t){return r[19].queries[t].queryList}(ht(),Rp())}function wO(r,t,e){const n=new na(4==(4&e));mx(r,t,n,n.destroy),null===t[19]&&(t[19]=new Cw),t[19].queries.push(new yw(n))}function SO(r,t,e){null===r.queries&&(r.queries=new Ew),r.queries.track(new Tw(t,e))}function MO(r,t){return r.queries.getByIndex(t)}const Af=new je("Application Initializer");let Of=(()=>{class r{constructor(e){this.appInits=e,this.resolve=pb,this.reject=pb,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,s)=>{this.resolve=n,this.reject=s})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const l=this.appInits[s]();if(Cm(l))e.push(l);else if(ob(l)){const u=new Promise((h,p)=>{l.subscribe({complete:h,error:p})});e.push(u)}}Promise.all(e).then(()=>{n()}).catch(s=>{this.reject(s)}),0===e.length&&n(),this.initialized=!0}}return r.\u0275fac=function(e){return new(e||r)(be(Af,8))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const Vm=new je("AppId"),S8={provide:Vm,useFactory:function(){return`${Iw()}${Iw()}${Iw()}`},deps:[]};function Iw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jO=new je("Platform Initializer"),kf=new je("Platform ID"),XO=new je("appBootstrapListener");let Tb=(()=>{class r{log(e){console.log(e)}warn(e){console.warn(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const Pc=new je("LocaleId"),YO=new je("DefaultCurrencyCode");class D8{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Aw=function(r){return new vw(r)},R8=Aw,x8=function(r){return Promise.resolve(Aw(r))},$O=function(r){const t=Aw(r),n=Pl(Co(r).declarations).reduce((s,l)=>{const u=cr(l);return u&&s.push(new fO(u)),s},[]);return new D8(t,n)},I8=$O,A8=function(r){return Promise.resolve($O(r))};let Dh=(()=>{class r{constructor(){this.compileModuleSync=R8,this.compileModuleAsync=x8,this.compileModuleAndAllComponentsSync=I8,this.compileModuleAndAllComponentsAsync=A8}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const N8=(()=>Promise.resolve(0))();function Ow(r){"undefined"==typeof Zone?N8.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Xt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new st(!1),this.onMicrotaskEmpty=new st(!1),this.onStable=new st(!1),this.onError=new st(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!n&&e,s.shouldCoalesceRunChangeDetection=n,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function(){let r=hi.requestAnimationFrame,t=hi.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&t){const e=r[Zone.__symbol__("OriginalDelegate")];e&&(r=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(r){const t=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(hi,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Nw(r),r.isCheckStableRunning=!0,kw(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Nw(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,s,l,u,h)=>{try{return KO(r),e.invokeTask(s,l,u,h)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||r.shouldCoalesceRunChangeDetection)&&t(),JO(r)}},onInvoke:(e,n,s,l,u,h,p)=>{try{return KO(r),e.invoke(s,l,u,h,p)}finally{r.shouldCoalesceRunChangeDetection&&t(),JO(r)}},onHasTask:(e,n,s,l)=>{e.hasTask(s,l),n===s&&("microTask"==l.change?(r._hasPendingMicrotasks=l.microTask,Nw(r),kw(r)):"macroTask"==l.change&&(r.hasPendingMacrotasks=l.macroTask))},onHandleError:(e,n,s,l)=>(e.handleError(s,l),r.runOutsideAngular(()=>r.onError.emit(l)),!1)})}(s)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Xt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,s){const l=this._inner,u=l.scheduleEventTask("NgZoneEvent: "+s,t,P8,pb,pb);try{return l.runTask(u,e,n)}finally{l.cancelTask(u)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const P8={};function kw(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Nw(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function KO(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function JO(r){r._nesting--,kw(r)}class V8{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new st,this.onMicrotaskEmpty=new st,this.onStable=new st,this.onError=new st}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,s){return t.apply(e,n)}}let Lw=(()=>{class r{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xt.assertNotInAngularZone(),Ow(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ow(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,s){let l=-1;n&&n>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==l),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:l,updateCb:s})}whenStable(e,n,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,n,s){return[]}}return r.\u0275fac=function(e){return new(e||r)(be(Xt))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),QO=(()=>{class r{constructor(){this._applications=new Map,Pw.addToWindow(this)}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return Pw.findTestabilityInTree(this,e,n)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();class H8{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let Pw=new H8,ZO=!0,qO=!1;function Fw(){return qO=!0,ZO}let ol;const ek=new je("AllowMultipleToken");class Bw{constructor(t,e){this.name=t,this.token=e}}function tk(r,t,e=[]){const n=`Platform: ${t}`,s=new je(n);return(l=[])=>{let u=nk();if(!u||u.injector.get(ek,!1))if(r)r(e.concat(l).concat({provide:s,useValue:!0}));else{const h=e.concat(l).concat({provide:s,useValue:!0},{provide:mm,useValue:"platform"});!function(r){if(ol&&!ol.destroyed&&!ol.injector.get(ek,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ol=r.get(ik);const t=r.get(jO,null);t&&t.forEach(e=>e())}(Yn.create({providers:h,name:n}))}return function(r){const t=nk();if(!t)throw new Error("No platform exists!");if(!t.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(s)}}function nk(){return ol&&!ol.destroyed?ol:null}let ik=(()=>{class r{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const h=function(r,t){let e;return e="noop"===r?new V8:("zone.js"===r?void 0:r)||new Xt({enableLongStackTrace:Fw(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(n?n.ngZone:void 0,{ngZoneEventCoalescing:n&&n.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:n&&n.ngZoneRunCoalescing||!1}),p=[{provide:Xt,useValue:h}];return h.run(()=>{const g=Yn.create({providers:p,parent:this.injector,name:e.moduleType.name}),b=e.create(g),C=b.injector.get(xs,null);if(!C)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return h.runOutsideAngular(()=>{const w=h.onError.subscribe({next:x=>{C.handleError(x)}});b.onDestroy(()=>{Vw(this._modules,b),w.unsubscribe()})}),function(r,t,e){try{const n=e();return Cm(n)?n.catch(s=>{throw t.runOutsideAngular(()=>r.handleError(s)),s}):n}catch(n){throw t.runOutsideAngular(()=>r.handleError(n)),n}}(C,h,()=>{const w=b.injector.get(Of);return w.runInitializers(),w.donePromise.then(()=>(JT(b.injector.get(Pc,lb)||lb),this._moduleDoBootstrap(b),b))})})}bootstrapModule(e,n=[]){const s=rk({},n);return function(r,t,e){const n=new vw(e);return Promise.resolve(n)}(0,0,e).then(l=>this.bootstrapModuleFactory(l,s))}_moduleDoBootstrap(e){const n=e.injector.get(Xu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(s=>n.bootstrap(s));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${lt(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(e){return new(e||r)(be(Yn))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function rk(r,t){return Array.isArray(t)?t.reduce(rk,r):Object.assign(Object.assign({},r),t)}let Xu=(()=>{class r{constructor(e,n,s,l,u){this._zone=e,this._injector=n,this._exceptionHandler=s,this._componentFactoryResolver=l,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new q(g=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{g.next(this._stable),g.complete()})}),p=new q(g=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Xt.assertNotInAngularZone(),Ow(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,g.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{Xt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{g.next(!1)}))});return()=>{b.unsubscribe(),C.unsubscribe()}});this.isStable=qt(h,p.pipe(Ot()))}bootstrap(e,n){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let s;s=e instanceof OA?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(s.componentType);const l=function(r){return r.isBoundToModule}(s)?void 0:this._injector.get(Gl),h=s.create(Yn.NULL,[],n||s.selector,l),p=h.location.nativeElement,g=h.injector.get(Lw,null),b=g&&h.injector.get(QO);return g&&b&&b.registerApplication(p,g),h.onDestroy(()=>{this.detachView(h.hostView),Vw(this.components,h),b&&b.unregisterApplication(p)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;Vw(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(XO,[]).concat(this._bootstrapListeners).forEach(s=>s(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(e){return new(e||r)(be(Xt),be(Yn),be(xs),be(nl),be(Of))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function Vw(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}class Sb{}class t4{}const n4={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let i4=(()=>{class r{constructor(e,n){this._compiler=e,this._config=n||n4}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[n,s]=e.split("#");return void 0===s&&(s="default"),_(98255)(n).then(l=>l[s]).then(l=>lk(l,n,s)).then(l=>this._compiler.compileModuleAsync(l))}loadFactory(e){let[n,s]=e.split("#"),l="NgFactory";return void 0===s&&(s="default",l=""),_(98255)(this._config.factoryPathPrefix+n+this._config.factoryPathSuffix).then(u=>u[s+l]).then(u=>lk(u,n,s))}}return r.\u0275fac=function(e){return new(e||r)(be(Dh),be(t4,8))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function lk(r,t,e){if(!r)throw new Error(`Cannot find '${e}' in '${t}'`);return r}const p4=tk(null,"core",[{provide:kf,useValue:"unknown"},{provide:ik,deps:[Yn]},{provide:QO,deps:[]},{provide:Tb,deps:[]}]),v4=[{provide:Xu,useClass:Xu,deps:[Xt,Yn,xs,nl,Of]},{provide:T5,deps:[Xt],useFactory:function(r){let t=[];return r.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Of,useClass:Of,deps:[[new sr,Af]]},{provide:Dh,useClass:Dh,deps:[]},S8,{provide:Is,useFactory:function(){return _j},deps:[]},{provide:wf,useFactory:function(){return vj},deps:[]},{provide:Pc,useFactory:function(r){return JT(r=r||"undefined"!=typeof $localize&&$localize.locale||lb),r},deps:[[new Fu(Pc),new sr,new Io]]},{provide:YO,useValue:"USD"}];let y4=(()=>{class r{constructor(e){}}return r.\u0275fac=function(e){return new(e||r)(be(Xu))},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:v4}),r})(),Lb=null;function Wl(){return Lb}const Ut=new je("DocumentToken");let Ih=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({factory:b6,token:r,providedIn:"platform"}),r})();function b6(){return be(Ok)}const y6=new je("Location Initialized");let Ok=(()=>{class r extends Ih{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wl().getBaseHref(this._doc)}onPopState(e){const n=Wl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Wl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,s){kk()?this._history.pushState(e,n,s):this.location.hash=s}replaceState(e,n,s){kk()?this._history.replaceState(e,n,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return r.\u0275fac=function(e){return new(e||r)(be(Ut))},r.\u0275prov=Et({factory:C6,token:r,providedIn:"platform"}),r})();function kk(){return!!window.history.pushState}function C6(){return new Ok(be(Ut))}function eS(r,t){if(0==r.length)return t;if(0==t.length)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?r+t.substring(1):1==e?r+t:r+"/"+t}function Nk(r){const t=r.match(/#|\?|$/),e=t&&t.index||r.length;return r.slice(0,e-("/"===r[e-1]?1:0))+r.slice(e)}function Bc(r){return r&&"?"!==r[0]?"?"+r:r}let Pf=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({factory:E6,token:r,providedIn:"root"}),r})();function E6(r){const t=be(Ut).location;return new Lk(be(Ih),t&&t.origin||"")}const tS=new je("appBaseHref");let Lk=(()=>{class r extends Pf{constructor(e,n){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return eS(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+Bc(this._platformLocation.search),s=this._platformLocation.hash;return s&&e?`${n}${s}`:n}pushState(e,n,s,l){const u=this.prepareExternalUrl(s+Bc(l));this._platformLocation.pushState(e,n,u)}replaceState(e,n,s,l){const u=this.prepareExternalUrl(s+Bc(l));this._platformLocation.replaceState(e,n,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,s;null===(s=(n=this._platformLocation).historyGo)||void 0===s||s.call(n,e)}}return r.\u0275fac=function(e){return new(e||r)(be(Ih),be(tS,8))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),T6=(()=>{class r extends Pf{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=eS(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,s,l){let u=this.prepareExternalUrl(s+Bc(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(e,n,u)}replaceState(e,n,s,l){let u=this.prepareExternalUrl(s+Bc(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,s;null===(s=(n=this._platformLocation).historyGo)||void 0===s||s.call(n,e)}}return r.\u0275fac=function(e){return new(e||r)(be(Ih),be(tS,8))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),Ff=(()=>{class r{constructor(e,n){this._subject=new st,this._urlChangeListeners=[],this._platformStrategy=e;const s=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=Nk(Pk(s)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Bc(n))}normalize(e){return r.stripTrailingSlash(function(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,Pk(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,n="",s=null){this._platformStrategy.pushState(s,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Bc(n)),s)}replaceState(e,n="",s=null){this._platformStrategy.replaceState(s,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Bc(n)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var n,s;null===(s=(n=this._platformStrategy).historyGo)||void 0===s||s.call(n,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}))}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(s=>s(e,n))}subscribe(e,n,s){return this._subject.subscribe({next:e,error:n,complete:s})}}return r.\u0275fac=function(e){return new(e||r)(be(Pf),be(Ih))},r.normalizeQueryParams=Bc,r.joinWithSlash=eS,r.stripTrailingSlash=Nk,r.\u0275prov=Et({factory:w6,token:r,providedIn:"root"}),r})();function w6(){return new Ff(be(Pf),be(Ih))}function Pk(r){return r.replace(/\/index.html$/,"")}var $r=(()=>(($r=$r||{})[$r.Zero=0]="Zero",$r[$r.One=1]="One",$r[$r.Two=2]="Two",$r[$r.Few=3]="Few",$r[$r.Many=4]="Many",$r[$r.Other=5]="Other",$r))();const O6=function(r){return function(r){const t=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let e=sA(t);if(e)return e;const n=t.split("-")[0];if(e=sA(n),e)return e;if("en"===n)return KW;throw new Error(`Missing locale data for the locale "${r}".`)}(r)[Qt.PluralCase]};class jb{}let a7=(()=>{class r extends jb{constructor(e){super(),this.locale=e}getPluralCategory(e,n){switch(O6(n||this.locale)(e)){case $r.Zero:return"zero";case $r.One:return"one";case $r.Two:return"two";case $r.Few:return"few";case $r.Many:return"many";default:return"other"}}}return r.\u0275fac=function(e){return new(e||r)(be(Pc))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function jk(r,t){t=encodeURIComponent(t);for(const e of r.split(";")){const n=e.indexOf("="),[s,l]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(s.trim()===t)return decodeURIComponent(l)}return null}let Ah=(()=>{class r{constructor(e,n,s,l){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=s,this._renderer=l,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(bm(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${lt(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(s=>{n?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return r.\u0275fac=function(e){return new(e||r)(k(Is),k(wf),k(qe),k(Ul))},r.\u0275dir=Te({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),r})();class c7{constructor(t,e,n,s){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $u=(()=>{class r{constructor(e,n,s){this._viewContainer=e,this._template=n,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(n){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(r){return r.name||typeof r}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=[];e.forEachOperation((s,l,u)=>{if(null==s.previousIndex){const h=this._viewContainer.createEmbeddedView(this._template,new c7(null,this._ngForOf,-1,-1),null===u?void 0:u),p=new Xk(s,h);n.push(p)}else if(null==u)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const h=this._viewContainer.get(l);this._viewContainer.move(h,u);const p=new Xk(s,h);n.push(p)}});for(let s=0;s<n.length;s++)this._perViewChange(n[s].view,n[s].record);for(let s=0,l=this._viewContainer.length;s<l;s++){const u=this._viewContainer.get(s);u.context.index=s,u.context.count=l,u.context.ngForOf=this._ngForOf}e.forEachIdentityChange(s=>{this._viewContainer.get(s.currentIndex).context.$implicit=s.item})}_perViewChange(e,n){e.context.$implicit=n.item}static ngTemplateContextGuard(e,n){return!0}}return r.\u0275fac=function(e){return new(e||r)(k(bi),k(ci),k(Is))},r.\u0275dir=Te({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),r})();class Xk{constructor(t,e){this.record=t,this.view=e}}let fo=(()=>{class r{constructor(e,n){this._viewContainer=e,this._context=new d7,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Yk("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Yk("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return r.\u0275fac=function(e){return new(e||r)(k(bi),k(ci))},r.\u0275dir=Te({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),r})();class d7{constructor(){this.$implicit=null,this.ngIf=null}}function Yk(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${lt(t)}'.`)}class uS{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let zl=(()=>{class r{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(e)}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Te({type:r,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),r})(),Ku=(()=>{class r{constructor(e,n,s){this.ngSwitch=s,s._addCase(),this._view=new uS(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return r.\u0275fac=function(e){return new(e||r)(k(bi),k(ci),k(zl,9))},r.\u0275dir=Te({type:r,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),r})();class p7{createSubscription(t,e){return t.subscribe({next:e,error:n=>{throw n}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class f7{createSubscription(t,e){return t.then(e,n=>{throw n})}dispose(t){}onDestroy(t){}}const g7=new f7,m7=new p7;let fS=(()=>{class r{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,n=>this._updateLatestValue(e,n))}_selectStrategy(e){if(Cm(e))return g7;if(yI(e))return m7;throw function(r,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${lt(r)}'`)}(r,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,n){e===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return r.\u0275fac=function(e){return new(e||r)(k(bn,16))},r.\u0275pipe=wi({name:"async",type:r,pure:!1}),r})(),Kk=(()=>{class r{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=Jk}transform(e,n=Jk){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const s=this.differ.diff(e),l=n!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(u=>{this.keyValues.push(function(r,t){return{key:r,value:t}}(u.key,u.currentValue))})),(s||l)&&(this.keyValues.sort(n),this.compareFn=n),this.keyValues}}return r.\u0275fac=function(e){return new(e||r)(k(wf,16))},r.\u0275pipe=wi({name:"keyvalue",type:r,pure:!1}),r})();function Jk(r,t){const e=r.key,n=t.key;if(e===n)return 0;if(void 0===e)return 1;if(void 0===n)return-1;if(null===e)return 1;if(null===n)return-1;if("string"==typeof e&&"string"==typeof n)return e<n?-1:1;if("number"==typeof e&&"number"==typeof n)return e-n;if("boolean"==typeof e&&"boolean"==typeof n)return e<n?-1:1;const s=String(e),l=String(n);return s==l?0:s<l?-1:1}let Jr=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[{provide:jb,useClass:a7}]}),r})();const Qk="browser";let Zk=(()=>{class r{}return r.\u0275prov=Et({token:r,providedIn:"root",factory:()=>new L7(be(Ut),window)}),r})();class L7{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(r,t){const e=r.getElementById(t)||r.getElementsByName(t)[0];if(e)return e;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const n=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let s=n.currentNode;for(;s;){const l=s.shadowRoot;if(l){const u=l.getElementById(t)||l.querySelector(`[name="${t}"]`);if(u)return u}s=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,s=e.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(n-l[0],s-l[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=qk(this.window.history)||qk(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function qk(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class e1{}class _S extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(r){Lb||(Lb=r)}(new _S)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Xm=Xm||document.querySelector("base"),Xm?Xm.getAttribute("href"):null);return null==e?null:function(r){Xb=Xb||document.createElement("a"),Xb.setAttribute("href",r);const t=Xb.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Xm=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return jk(document.cookie,t)}}let Xb,Xm=null;const t1=new je("TRANSITION_ID"),U7=[{provide:Af,useFactory:function(r,t,e){return()=>{e.get(Of).donePromise.then(()=>{const n=Wl(),s=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let l=0;l<s.length;l++)n.remove(s[l])})}},deps:[t1,Ut,Yn],multi:!0}];class vS{static init(){!function(r){Pw=r}(new vS)}addToWindow(t){hi.getAngularTestability=(n,s=!0)=>{const l=t.findTestabilityInTree(n,s);if(null==l)throw new Error("Could not find testability for element.");return l},hi.getAllAngularTestabilities=()=>t.getAllTestabilities(),hi.getAllAngularRootElements=()=>t.getAllRootElements(),hi.frameworkStabilizers||(hi.frameworkStabilizers=[]),hi.frameworkStabilizers.push(n=>{const s=hi.getAllAngularTestabilities();let l=s.length,u=!1;const h=function(p){u=u||p,l--,0==l&&n(u)};s.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const s=t.getTestability(e);return null!=s?s:n?Wl().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let G7=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const Ym=new je("EventManagerPlugins");let $b=(()=>{class r{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(s=>s.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,s){return this._findPluginFor(n).addEventListener(e,n,s)}addGlobalEventListener(e,n,s){return this._findPluginFor(n).addGlobalEventListener(e,n,s)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const s=this._plugins;for(let l=0;l<s.length;l++){const u=s[l];if(u.supports(e))return this._eventNameToPlugin.set(e,u),u}throw new Error(`No event manager plugin found for event ${e}`)}}return r.\u0275fac=function(e){return new(e||r)(be(Ym),be(Xt))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();class bS{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const s=Wl().getGlobalEventTarget(this._doc,t);if(!s)throw new Error(`Unsupported event target ${s} for event ${e}`);return this.addEventListener(s,e,n)}}let r1=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),n.add(s))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),$m=(()=>{class r extends r1{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,s){e.forEach(l=>{const u=this._doc.createElement("style");u.textContent=l,s.push(n.appendChild(u))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(o1),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,s)=>{this._addStylesToHost(e,s,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(o1))}}return r.\u0275fac=function(e){return new(e||r)(be(Ut))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function o1(r){Wl().remove(r)}const yS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},CS=/%COMP%/g;function Kb(r,t,e){for(let n=0;n<t.length;n++){let s=t[n];Array.isArray(s)?Kb(r,s,e):(s=s.replace(CS,r),e.push(s))}return e}function l1(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let Jb=(()=>{class r{constructor(e,n,s){this.eventManager=e,this.sharedStylesHost=n,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new ES(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case rr.Emulated:{let s=this.rendererByCompId.get(n.id);return s||(s=new i9(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,s)),s.applyToHost(e),s}case 1:case rr.ShadowDom:return new r9(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const s=Kb(n.id,n.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(e){return new(e||r)(be($b),be($m),be(Vm))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();class ES{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(yS[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,s){if(s){e=s+":"+e;const l=yS[s];l?t.setAttributeNS(l,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const s=yS[n];s?t.removeAttributeNS(s,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,s){s&(ea.DashCase|ea.Important)?t.style.setProperty(e,n,s&ea.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&ea.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,l1(n)):this.eventManager.addEventListener(t,e,l1(n))}}class i9 extends ES{constructor(t,e,n,s){super(t),this.component=n;const l=Kb(s+"-"+n.id,n.styles,[]);e.addStyles(l),this.contentAttr=function(r){return"_ngcontent-%COMP%".replace(CS,r)}(s+"-"+n.id),this.hostAttr=function(r){return"_nghost-%COMP%".replace(CS,r)}(s+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class r9 extends ES{constructor(t,e,n,s){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Kb(s.id,s.styles,[]);for(let u=0;u<l.length;u++){const h=document.createElement("style");h.textContent=l[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let o9=(()=>{class r extends bS{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,s){return e.addEventListener(n,s,!1),()=>this.removeEventListener(e,n,s)}removeEventListener(e,n,s){return e.removeEventListener(n,s)}}return r.\u0275fac=function(e){return new(e||r)(be(Ut))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const d1=["alt","control","meta","shift"],h9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},h1={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},p9={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let f9=(()=>{class r extends bS{constructor(e){super(e)}supports(e){return null!=r.parseEventName(e)}addEventListener(e,n,s){const l=r.parseEventName(n),u=r.eventCallback(l.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wl().onAndCancel(e,l.domEventName,u))}static parseEventName(e){const n=e.toLowerCase().split("."),s=n.shift();if(0===n.length||"keydown"!==s&&"keyup"!==s)return null;const l=r._normalizeKey(n.pop());let u="";if(d1.forEach(p=>{const g=n.indexOf(p);g>-1&&(n.splice(g,1),u+=p+".")}),u+=l,0!=n.length||0===l.length)return null;const h={};return h.domEventName=s,h.fullKey=u,h}static getEventFullKey(e){let n="",s=function(r){let t=r.key;if(null==t){if(t=r.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===r.location&&h1.hasOwnProperty(t)&&(t=h1[t]))}return h9[t]||t}(e);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),d1.forEach(l=>{l!=s&&p9[l](e)&&(n+=l+".")}),n+=s,n}static eventCallback(e,n,s){return l=>{r.getEventFullKey(l)===e&&s.runGuarded(()=>n(l))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return r.\u0275fac=function(e){return new(e||r)(be(Ut))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),Bf=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({factory:function(){return be(wS)},token:r,providedIn:"root"}),r})(),wS=(()=>{class r extends Bf{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case vi.NONE:return n;case vi.HTML:return qs(n,"HTML")?us(n):zv(this._doc,String(n)).toString();case vi.STYLE:return qs(n,"Style")?us(n):n;case vi.SCRIPT:if(qs(n,"Script"))return us(n);throw new Error("unsafe value used in a script context");case vi.URL:return Nv(n),qs(n,"URL")?us(n):ph(String(n));case vi.RESOURCE_URL:if(qs(n,"ResourceURL"))return us(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function(r){return new VE(r)}(e)}bypassSecurityTrustStyle(e){return function(r){return new Qp(r)}(e)}bypassSecurityTrustScript(e){return function(r){return new HE(r)}(e)}bypassSecurityTrustUrl(e){return function(r){return new bR(r)}(e)}bypassSecurityTrustResourceUrl(e){return function(r){return new UE(r)}(e)}}return r.\u0275fac=function(e){return new(e||r)(be(Ut))},r.\u0275prov=Et({factory:function(){return function(r){return new wS(r.get(Ut))}(be(mh))},token:r,providedIn:"root"}),r})();const E9=tk(p4,"browser",[{provide:kf,useValue:Qk},{provide:jO,useValue:function(){_S.makeCurrent(),vS.init()},multi:!0},{provide:Ut,useFactory:function(){return function(r){zs=r}(document),document},deps:[]}]),T9=[[],{provide:mm,useValue:"root"},{provide:xs,useFactory:function(){return new xs},deps:[]},{provide:Ym,useClass:o9,multi:!0,deps:[Ut,Xt,kf]},{provide:Ym,useClass:f9,multi:!0,deps:[Ut]},[],{provide:Jb,useClass:Jb,deps:[$b,$m,Vm]},{provide:Ch,useExisting:Jb},{provide:r1,useExisting:$m},{provide:$m,useClass:$m,deps:[Ut]},{provide:Lw,useClass:Lw,deps:[Xt]},{provide:$b,useClass:$b,deps:[Ym,Xt]},{provide:e1,useClass:G7,deps:[]},[]];let SS=(()=>{class r{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:r,providers:[{provide:Vm,useValue:e.appId},{provide:t1,useExisting:Vm},U7]}}}return r.\u0275fac=function(e){return new(e||r)(be(r,12))},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:T9,imports:[Jr,y4]}),r})();function S9(){return new p1(be(Ut))}let p1=(()=>{class r{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return r.\u0275fac=function(e){return new(e||r)(be(Ut))},r.\u0275prov=Et({factory:S9,token:r,providedIn:"root"}),r})();function g1(...r){if(1===r.length){const t=r[0];if(d(t))return Qb(t,null);if(f(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return Qb(e.map(n=>t[n]),e)}}if("function"==typeof r[r.length-1]){const t=r.pop();return Qb(r=1===r.length&&d(r[0])?r[0]:r,null).pipe(ye(e=>t(...e)))}return Qb(r,null)}function Qb(r,t){return new q(e=>{const n=r.length;if(0===n)return void e.complete();const s=new Array(n);let l=0,u=0;for(let h=0;h<n;h++){const p=Dn(r[h]);let g=!1;e.add(p.subscribe({next:b=>{g||(g=!0,u++),s[h]=b},error:b=>e.error(b),complete:()=>{l++,(l===n||!g)&&(u===n&&e.next(t?t.reduce((b,C,w)=>(b[C]=s[w],b),{}):s),e.complete())}}))}})}"undefined"!=typeof window&&window;let m1=(()=>{class r{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(k(Ul),k(qe))},r.\u0275dir=Te({type:r}),r})(),Oh=(()=>{class r extends m1{}return r.\u0275fac=function(){let t;return function(n){return(t||(t=cn(r)))(n||r)}}(),r.\u0275dir=Te({type:r,features:[He]}),r})();const Pr=new je("NgValueAccessor"),O9={provide:Pr,useExisting:wt(()=>DS),multi:!0},N9=new je("CompositionEventMode");let DS=(()=>{class r extends m1{constructor(e,n,s){super(e,n),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const r=Wl()?Wl().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(k(Ul),k(qe),k(N9,8))},r.\u0275dir=Te({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&ft("input",function(l){return n._handleInput(l.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(l){return n._compositionEnd(l.target.value)})},features:[vt([O9]),He]}),r})();const Fr=new je("NgValidators"),Zu=new je("NgAsyncValidators");function D1(r){return null!=r}function R1(r){const t=Cm(r)?Dn(r):r;return ob(t),t}function x1(r){let t={};return r.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function I1(r,t){return t.map(e=>e(r))}function A1(r){return r.map(t=>function(r){return!r.validate}(t)?t:e=>t.validate(e))}function xS(r){return null!=r?function(r){if(!r)return null;const t=r.filter(D1);return 0==t.length?null:function(e){return x1(I1(e,t))}}(A1(r)):null}function IS(r){return null!=r?function(r){if(!r)return null;const t=r.filter(D1);return 0==t.length?null:function(e){return g1(I1(e,t).map(R1)).pipe(ye(x1))}}(A1(r)):null}function N1(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function AS(r){return r?Array.isArray(r)?r:[r]:[]}function Zb(r,t){return Array.isArray(r)?r.includes(t):r===t}function F1(r,t){const e=AS(t);return AS(r).forEach(s=>{Zb(e,s)||e.push(s)}),e}function B1(r,t){return AS(t).filter(e=>!Zb(r,e))}let V1=(()=>{class r{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=IS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Te({type:r}),r})(),$o=(()=>{class r extends V1{get formDirective(){return null}get path(){return null}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=cn(r)))(n||r)}}(),r.\u0275dir=Te({type:r,features:[He]}),r})();class ba extends V1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let U1=(()=>{class r extends class{constructor(t){this._cd=t}is(t){var e,n,s;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(s=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===s?void 0:s[t])}}{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(k(ba,2))},r.\u0275dir=Te({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&xt("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))},features:[He]}),r})();function Km(r,t){(function(r,t){const e=function(r){return r._rawValidators}(r);null!==t.validator?r.setValidators(N1(e,t.validator)):"function"==typeof e&&r.setValidators([e]);const n=function(r){return r._rawAsyncValidators}(r);null!==t.asyncValidator?r.setAsyncValidators(N1(n,t.asyncValidator)):"function"==typeof n&&r.setAsyncValidators([n]);const s=()=>r.updateValueAndValidity();ny(t._rawValidators,s),ny(t._rawAsyncValidators,s)})(r,t),t.valueAccessor.writeValue(r.value),function(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&G1(r,t)})}(r,t),function(r,t){const e=(n,s)=>{t.valueAccessor.writeValue(n),s&&t.viewToModelUpdate(n)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,t),function(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&G1(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function(r,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,t)}function ny(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function G1(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function ry(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}const Jm="VALID",oy="INVALID",Vf="PENDING",Qm="DISABLED";function FS(r){return(VS(r)?r.validators:r)||null}function j1(r){return Array.isArray(r)?xS(r):r||null}function BS(r,t){return(VS(t)?t.asyncValidators:r)||null}function X1(r){return Array.isArray(r)?IS(r):r||null}function VS(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class HS{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=j1(this._rawValidators),this._composedAsyncValidatorFn=X1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Jm}get invalid(){return this.status===oy}get pending(){return this.status==Vf}get disabled(){return this.status===Qm}get enabled(){return this.status!==Qm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=j1(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=X1(t)}addValidators(t){this.setValidators(F1(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(F1(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(B1(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(B1(t,this._rawAsyncValidators))}hasValidator(t){return Zb(this._rawValidators,t)}hasAsyncValidator(t){return Zb(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Vf,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Qm,this.errors=null,this._forEachChild(n=>{n.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Jm,this._forEachChild(n=>{n.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jm||this.status===Vf)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qm:Jm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Vf,this._hasOwnPendingAsyncValidator=!0;const e=R1(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(r,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let n=r;return t.forEach(s=>{n=n instanceof US?n.controls.hasOwnProperty(s)?n.controls[s]:null:n instanceof K9&&n.at(s)||null}),n}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new st,this.statusChanges=new st}_calculateStatus(){return this._allControlsDisabled()?Qm:this.errors?oy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vf)?Vf:this._anyControlsHaveStatus(oy)?oy:Jm}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){VS(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class sy extends HS{constructor(t=null,e,n){super(FS(e),BS(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ry(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ry(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class US extends HS{constructor(t,e,n){super(FS(e),BS(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,s)=>{n.reset(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof sy?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((s,l)=>{n=e(n,s,l)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class K9 extends HS{constructor(t,e,n){super(FS(e),BS(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((n,s)=>{this._throwIfControlMissing(s),this.at(s).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((n,s)=>{this.at(s)&&this.at(s).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,s)=>{n.reset(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof sy?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Z9={provide:ba,useExisting:wt(()=>GS)},K1=(()=>Promise.resolve(null))();let GS=(()=>{class r extends ba{constructor(e,n,s,l){super(),this.control=new sy,this._registered=!1,this.update=new st,this._parent=e,this._setValidators(n),this._setAsyncValidators(s),this.valueAccessor=function(r,t){if(!t)return null;let e,n,s;return Array.isArray(t),t.forEach(l=>{l.constructor===DS?e=l:function(r){return Object.getPrototypeOf(r.constructor)===Oh}(l)?n=l:s=l}),s||n||e||null}(0,l)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(r,t){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(r,t){return[...t.path,r]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Km(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){K1.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const n=e.isDisabled.currentValue,s=""===n||n&&"false"!==n;K1.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable()})}}return r.\u0275fac=function(e){return new(e||r)(k($o,9),k(Fr,10),k(Zu,10),k(Pr,10))},r.\u0275dir=Te({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[vt([Z9]),He,_n]}),r})(),Q1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({}),r})(),pN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[Q1]]}),r})(),TX=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[pN]}),r})();function an(...r){let t=r[r.length-1];return de(t)?(r.pop(),Kn(r,t)):Tn(r)}class Os extends j{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new G;return this._value}next(t){super.next(this._value=t)}}class wX extends H{notifyNext(t,e,n,s,l){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class SX extends H{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function MX(r,t,e,n,s=new SX(r,e,n)){if(!s.closed)return t instanceof q?t.subscribe(s):Wt(t)(s)}const fN={};function gN(...r){let t,e;return de(r[r.length-1])&&(e=r.pop()),"function"==typeof r[r.length-1]&&(t=r.pop()),1===r.length&&d(r[0])&&(r=r[0]),Tn(r,e).lift(new DX(t))}class DX{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new RX(t,this.resultSelector))}}class RX extends wX{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(fN),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(MX(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const s=this.values,u=this.toRespond?s[n]===fN?--this.toRespond:this.toRespond:0;s[n]=e,0===u&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const ly=(()=>{function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r})();function cy(...r){return vn(1)(an(...r))}const ed=new q(r=>r.complete());function uy(r){return r?function(r){return new q(t=>r.schedule(()=>t.complete()))}(r):ed}function qm(r){return new q(t=>{let e;try{e=r()}catch(s){return void t.error(s)}return(e?Dn(e):uy()).subscribe(t)})}function Oo(r,t){return"function"==typeof t?e=>e.pipe(Oo((n,s)=>Dn(r(n,s)).pipe(ye((l,u)=>t(n,l,s,u))))):e=>e.lift(new AX(r))}class AX{constructor(t){this.project=t}call(t,e){return e.subscribe(new OX(t,this.project))}}class OX extends mn{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(s){return void this.destination.error(s)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Ke(this),s=this.destination;s.add(n),this.innerSubscription=An(t,n),this.innerSubscription!==n&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const mN=(()=>{function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r})();function Fi(r){return t=>0===r?uy():t.lift(new kX(r))}class kX{constructor(t){if(this.total=t,this.total<0)throw new mN}call(t,e){return e.subscribe(new NX(t,this.total))}}class NX extends H{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Bi(...r){const t=r[r.length-1];return de(t)?(r.pop(),e=>cy(r,e,t)):e=>cy(r,e)}function _N(r,t){let e=!1;return arguments.length>=2&&(e=!0),function(s){return s.lift(new LX(r,t,e))}}class LX{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new PX(t,this.accumulator,this.seed,this.hasSeed))}}class PX extends H{constructor(t,e,n,s){super(t),this.accumulator=e,this._seed=n,this.hasSeed=s,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(s){this.destination.error(s)}this.seed=n,this.destination.next(n)}}function yi(r,t){return function(n){return n.lift(new FX(r,t))}}class FX{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new BX(t,this.predicate,this.thisArg))}}class BX extends H{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function td(r){return function(e){const n=new VX(r),s=e.lift(n);return n.caught=s}}class VX{constructor(t){this.selector=t}call(t,e){return e.subscribe(new HX(t,this.selector,this.caught))}}class HX extends mn{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const n=new Ke(this);this.add(n);const s=An(e,n);s!==n&&this.add(s)}}}function Hf(r,t){return ei(r,t,1)}function KS(r){return function(e){return 0===r?uy():e.lift(new UX(r))}}class UX{constructor(t){if(this.total=t,this.total<0)throw new mN}call(t,e){return e.subscribe(new GX(t,this.total))}}class GX extends H{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,s=this.count++;e.length<n?e.push(t):e[s%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,s=this.ring;for(let l=0;l<n;l++){const u=e++%n;t.next(s[u])}}t.complete()}}function vN(r=jX){return t=>t.lift(new WX(r))}class WX{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new zX(t,this.errorFactory))}}class zX extends H{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function jX(){return new ly}function bN(r=null){return t=>t.lift(new XX(r))}class XX{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new YX(t,this.defaultValue))}}class YX extends H{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Uf(r,t){const e=arguments.length>=2;return n=>n.pipe(r?yi((s,l)=>r(s,l,n)):se,Fi(1),e?bN(t):vN(()=>new ly))}function nd(){}function Qr(r,t,e){return function(s){return s.lift(new KX(r,t,e))}}class KX{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new JX(t,this.nextOrObserver,this.error,this.complete))}}class JX extends H{constructor(t,e,n,s){super(t),this._tapNext=nd,this._tapError=nd,this._tapComplete=nd,this._tapError=n||nd,this._tapComplete=s||nd,E(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||nd,this._tapError=e.error||nd,this._tapComplete=e.complete||nd)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function yN(r){return t=>t.lift(new QX(r))}class QX{constructor(t){this.callback=t}call(t,e){return e.subscribe(new ZX(t,this.callback))}}class ZX extends H{constructor(t,e){super(t),this.add(new D(e))}}class Gc{constructor(t,e){this.id=t,this.url=e}}class JS extends Gc{constructor(t,e,n="imperative",s=null){super(t,e),this.navigationTrigger=n,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class e_ extends Gc{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class CN extends Gc{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qX extends Gc{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eY extends Gc{constructor(t,e,n,s){super(t,e),this.urlAfterRedirects=n,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tY extends Gc{constructor(t,e,n,s){super(t,e),this.urlAfterRedirects=n,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nY extends Gc{constructor(t,e,n,s,l){super(t,e),this.urlAfterRedirects=n,this.state=s,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class iY extends Gc{constructor(t,e,n,s){super(t,e),this.urlAfterRedirects=n,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rY extends Gc{constructor(t,e,n,s){super(t,e),this.urlAfterRedirects=n,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EN{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class TN{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oY{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sY{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aY{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lY{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wN{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ri="primary";class cY{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Gf(r){return new cY(r)}const SN="ngNavigationCancelingError";function QS(r){const t=Error("NavigationCancelingError: "+r);return t[SN]=!0,t}function dY(r,t,e){const n=e.path.split("/");if(n.length>r.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<r.length))return null;const s={};for(let l=0;l<n.length;l++){const u=n[l],h=r[l];if(u.startsWith(":"))s[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:r.slice(0,n.length),posParams:s}}function jl(r,t){const e=r?Object.keys(r):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let s;for(let l=0;l<e.length;l++)if(s=e[l],!MN(r[s],t[s]))return!1;return!0}function MN(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const e=[...r].sort(),n=[...t].sort();return e.every((s,l)=>n[l]===s)}return r===t}function DN(r){return Array.prototype.concat.apply([],r)}function RN(r){return r.length>0?r[r.length-1]:null}function ko(r,t){for(const e in r)r.hasOwnProperty(e)&&t(r[e],e)}function Xl(r){return ob(r)?r:Cm(r)?Dn(Promise.resolve(r)):an(r)}const fY={exact:function AN(r,t,e){if(!Nh(r.segments,t.segments)||!dy(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!r.children[n]||!AN(r.children[n],t.children[n],e))return!1;return!0},subset:ON},xN={exact:function(r,t){return jl(r,t)},subset:function(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>MN(r[e],t[e]))},ignored:()=>!0};function IN(r,t,e){return fY[e.paths](r.root,t.root,e.matrixParams)&&xN[e.queryParams](r.queryParams,t.queryParams)&&!("exact"===e.fragment&&r.fragment!==t.fragment)}function ON(r,t,e){return kN(r,t,t.segments,e)}function kN(r,t,e,n){if(r.segments.length>e.length){const s=r.segments.slice(0,e.length);return!(!Nh(s,e)||t.hasChildren()||!dy(s,e,n))}if(r.segments.length===e.length){if(!Nh(r.segments,e)||!dy(r.segments,e,n))return!1;for(const s in t.children)if(!r.children[s]||!ON(r.children[s],t.children[s],n))return!1;return!0}{const s=e.slice(0,r.segments.length),l=e.slice(r.segments.length);return!!(Nh(r.segments,s)&&dy(r.segments,s,n)&&r.children[ri])&&kN(r.children[ri],t,l,n)}}function dy(r,t,e){return t.every((n,s)=>xN[e](r[s].parameters,n.parameters))}class kh{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gf(this.queryParams)),this._queryParamMap}toString(){return bY.serialize(this)}}class ui{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ko(e,(n,s)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hy(this)}}class t_{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Gf(this.parameters)),this._parameterMap}toString(){return FN(this)}}function Nh(r,t){return r.length===t.length&&r.every((e,n)=>e.path===t[n].path)}class ZS{}class NN{parse(t){const e=new RY(t);return new kh(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${`/${n_(t.root,!0)}`}${function(r){const t=Object.keys(r).map(e=>{const n=r[e];return Array.isArray(n)?n.map(s=>`${py(e)}=${py(s)}`).join("&"):`${py(e)}=${py(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${function(r){return encodeURI(r)}(t.fragment)}`:""}`}}const bY=new NN;function hy(r){return r.segments.map(t=>FN(t)).join("/")}function n_(r,t){if(!r.hasChildren())return hy(r);if(t){const e=r.children[ri]?n_(r.children[ri],!1):"",n=[];return ko(r.children,(s,l)=>{l!==ri&&n.push(`${l}:${n_(s,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(r,t){let e=[];return ko(r.children,(n,s)=>{s===ri&&(e=e.concat(t(n,s)))}),ko(r.children,(n,s)=>{s!==ri&&(e=e.concat(t(n,s)))}),e}(r,(n,s)=>s===ri?[n_(r.children[ri],!1)]:[`${s}:${n_(n,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[ri]?`${hy(r)}/${e[0]}`:`${hy(r)}/(${e.join("//")})`}}function LN(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function py(r){return LN(r).replace(/%3B/gi,";")}function qS(r){return LN(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fy(r){return decodeURIComponent(r)}function PN(r){return fy(r.replace(/\+/g,"%20"))}function FN(r){return`${qS(r.path)}${function(r){return Object.keys(r).map(t=>`;${qS(t)}=${qS(r[t])}`).join("")}(r.parameters)}`}const TY=/^[^\/()?;=#]+/;function gy(r){const t=r.match(TY);return t?t[0]:""}const wY=/^[^=?&#]+/,MY=/^[^?&#]+/;class RY{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ui([],{}):new ui([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[ri]=new ui(t,e)),n}parseSegment(){const t=gy(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new t_(fy(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=gy(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const s=gy(this.remaining);s&&(n=s,this.capture(n))}t[fy(e)]=fy(n)}parseQueryParam(t){const e=function(r){const t=r.match(wY);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const u=function(r){const t=r.match(MY);return t?t[0]:""}(this.remaining);u&&(n=u,this.capture(n))}const s=PN(e),l=PN(n);if(t.hasOwnProperty(s)){let u=t[s];Array.isArray(u)||(u=[u],t[s]=u),u.push(l)}else t[s]=l}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=gy(this.remaining),s=this.remaining[n.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let l;n.indexOf(":")>-1?(l=n.substr(0,n.indexOf(":")),this.capture(l),this.capture(":")):t&&(l=ri);const u=this.parseChildren();e[l]=1===Object.keys(u).length?u[ri]:new ui([],u),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class BN{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=eM(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=eM(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=tM(t,this._root);return e.length<2?[]:e[e.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return tM(t,this._root).map(e=>e.value)}}function eM(r,t){if(r===t.value)return t;for(const e of t.children){const n=eM(r,e);if(n)return n}return null}function tM(r,t){if(r===t.value)return[t];for(const e of t.children){const n=tM(r,e);if(n.length)return n.unshift(t),n}return[]}class Wc{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function i_(r){const t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}class VN extends BN{constructor(t,e){super(t),this.snapshot=e,nM(this,t)}toString(){return this.snapshot.toString()}}function HN(r,t){const e=function(r,t){const u=new my([],{},{},"",{},ri,t,null,r.root,-1,{});return new GN("",new Wc(u,[]))}(r,t),n=new Os([new t_("",{})]),s=new Os({}),l=new Os({}),u=new Os({}),h=new Os(""),p=new Lh(n,s,u,h,l,ri,t,e.root);return p.snapshot=e.root,new VN(new Wc(p,[]),e)}class Lh{constructor(t,e,n,s,l,u,h,p){this.url=t,this.params=e,this.queryParams=n,this.fragment=s,this.data=l,this.outlet=u,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ye(t=>Gf(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ye(t=>Gf(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function UN(r,t="emptyOnly"){const e=r.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const s=e[n],l=e[n-1];if(s.routeConfig&&""===s.routeConfig.path)n--;else{if(l.component)break;n--}}return function(r){return r.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(n))}class my{constructor(t,e,n,s,l,u,h,p,g,b,C){this.url=t,this.params=e,this.queryParams=n,this.fragment=s,this.data=l,this.outlet=u,this.component=h,this.routeConfig=p,this._urlSegment=g,this._lastPathIndex=b,this._resolve=C}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class GN extends BN{constructor(t,e){super(e),this.url=t,nM(this,e)}toString(){return WN(this._root)}}function nM(r,t){t.value._routerState=r,t.children.forEach(e=>nM(r,e))}function WN(r){const t=r.children.length>0?` { ${r.children.map(WN).join(", ")} } `:"";return`${r.value}${t}`}function iM(r){if(r.snapshot){const t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,jl(t.queryParams,e.queryParams)||r.queryParams.next(e.queryParams),t.fragment!==e.fragment&&r.fragment.next(e.fragment),jl(t.params,e.params)||r.params.next(e.params),function(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!jl(r[e],t[e]))return!1;return!0}(t.url,e.url)||r.url.next(e.url),jl(t.data,e.data)||r.data.next(e.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function rM(r,t){return jl(r.params,t.params)&&function(r,t){return Nh(r,t)&&r.every((e,n)=>jl(e.parameters,t[n].parameters))}(r.url,t.url)&&!(!r.parent!=!t.parent)&&(!r.parent||rM(r.parent,t.parent))}function _y(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const s=function(r,t,e){return t.children.map(n=>{for(const s of e.children)if(r.shouldReuseRoute(n.value,s.value.snapshot))return _y(r,n,s);return _y(r,n)})}(r,t,e);return new Wc(n,s)}{if(r.shouldAttach(t.value)){const l=r.retrieve(t.value);if(null!==l){const u=l.route;return zN(t,u),u}}const n=function(r){return new Lh(new Os(r.url),new Os(r.params),new Os(r.queryParams),new Os(r.fragment),new Os(r.data),r.outlet,r.component,r)}(t.value),s=t.children.map(l=>_y(r,l));return new Wc(n,s)}}function zN(r,t){if(r.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(r.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=r.value;for(let e=0;e<r.children.length;++e)zN(r.children[e],t.children[e])}function vy(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function r_(r){return"object"==typeof r&&null!=r&&r.outlets}function oM(r,t,e,n,s){let l={};return n&&ko(n,(u,h)=>{l[h]=Array.isArray(u)?u.map(p=>`${p}`):`${u}`}),new kh(e.root===r?t:jN(e.root,r,t),l,s)}function jN(r,t,e){const n={};return ko(r.children,(s,l)=>{n[l]=s===t?e:jN(s,t,e)}),new ui(r.segments,n)}class XN{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&vy(n[0]))throw new Error("Root segment cannot have matrix parameters");const s=n.find(r_);if(s&&s!==RN(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sM{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function YN(r,t,e){if(r||(r=new ui([],{})),0===r.segments.length&&r.hasChildren())return by(r,t,e);const n=function(r,t,e){let n=0,s=t;const l={match:!1,pathIndex:0,commandIndex:0};for(;s<r.segments.length;){if(n>=e.length)return l;const u=r.segments[s],h=e[n];if(r_(h))break;const p=`${h}`,g=n<e.length-1?e[n+1]:null;if(s>0&&void 0===p)break;if(p&&g&&"object"==typeof g&&void 0===g.outlets){if(!KN(p,g,u))return l;n+=2}else{if(!KN(p,{},u))return l;n++}s++}return{match:!0,pathIndex:s,commandIndex:n}}(r,t,e),s=e.slice(n.commandIndex);if(n.match&&n.pathIndex<r.segments.length){const l=new ui(r.segments.slice(0,n.pathIndex),{});return l.children[ri]=new ui(r.segments.slice(n.pathIndex),r.children),by(l,0,s)}return n.match&&0===s.length?new ui(r.segments,{}):n.match&&!r.hasChildren()?aM(r,t,e):n.match?by(r,0,s):aM(r,t,e)}function by(r,t,e){if(0===e.length)return new ui(r.segments,{});{const n=function(r){return r_(r[0])?r[0].outlets:{[ri]:r}}(e),s={};return ko(n,(l,u)=>{"string"==typeof l&&(l=[l]),null!==l&&(s[u]=YN(r.children[u],t,l))}),ko(r.children,(l,u)=>{void 0===n[u]&&(s[u]=l)}),new ui(r.segments,s)}}function aM(r,t,e){const n=r.segments.slice(0,t);let s=0;for(;s<e.length;){const l=e[s];if(r_(l)){const p=HY(l.outlets);return new ui(n,p)}if(0===s&&vy(e[0])){n.push(new t_(r.segments[t].path,$N(e[0]))),s++;continue}const u=r_(l)?l.outlets[ri]:`${l}`,h=s<e.length-1?e[s+1]:null;u&&h&&vy(h)?(n.push(new t_(u,$N(h))),s+=2):(n.push(new t_(u,{})),s++)}return new ui(n,{})}function HY(r){const t={};return ko(r,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=aM(new ui([],{}),0,e))}),t}function $N(r){const t={};return ko(r,(e,n)=>t[n]=`${e}`),t}function KN(r,t,e){return r==e.path&&jl(t,e.parameters)}class GY{constructor(t,e,n,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=s}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),iM(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const s=i_(e);t.children.forEach(l=>{const u=l.value.outlet;this.deactivateRoutes(l,s[u],n),delete s[u]}),ko(s,(l,u)=>{this.deactivateRouteAndItsChildren(l,n)})}deactivateRoutes(t,e,n){const s=t.value,l=e?e.value:null;if(s===l)if(s.component){const u=n.getContext(s.outlet);u&&this.deactivateChildRoutes(t,e,u.children)}else this.deactivateChildRoutes(t,e,n);else l&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const s=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),s=n&&t.value.component?n.children:e,l=i_(t);for(const u of Object.keys(l))this.deactivateRouteAndItsChildren(l[u],s);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const s=i_(e);t.children.forEach(l=>{this.activateRoutes(l,s[l.value.outlet],n),this.forwardEvent(new lY(l.value.snapshot))}),t.children.length&&this.forwardEvent(new sY(t.value.snapshot))}activateRoutes(t,e,n){const s=t.value,l=e?e.value:null;if(iM(s),s===l)if(s.component){const u=n.getOrCreateContext(s.outlet);this.activateChildRoutes(t,e,u.children)}else this.activateChildRoutes(t,e,n);else if(s.component){const u=n.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const h=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),JN(h.route)}else{const h=function(r){for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(s.snapshot),p=h?h.module.componentFactoryResolver:null;u.attachRef=null,u.route=s,u.resolver=p,u.outlet&&u.outlet.activateWith(s,p),this.activateChildRoutes(t,null,u.children)}}else this.activateChildRoutes(t,null,n)}}function JN(r){iM(r.value),r.children.forEach(JN)}class lM{constructor(t,e){this.routes=t,this.module=e}}function id(r){return"function"==typeof r}function Ph(r){return r instanceof kh}const o_=Symbol("INITIAL_VALUE");function s_(){return Oo(r=>gN(r.map(t=>t.pipe(Fi(1),Bi(o_)))).pipe(_N((t,e)=>{let n=!1;return e.reduce((s,l,u)=>s!==o_?s:(l===o_&&(n=!0),n||!1!==l&&u!==e.length-1&&!Ph(l)?s:l),t)},o_),yi(t=>t!==o_),ye(t=>Ph(t)?t:!0===t),Fi(1)))}let QN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=Tt({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&Nt(0,"router-outlet")},directives:function(){return[fM]},encapsulation:2}),r})();function ZN(r,t=""){for(let e=0;e<r.length;e++){const n=r[e];KY(n,JY(t,n))}}function KY(r,t){r.children&&ZN(r.children,t)}function JY(r,t){return t?r||t.path?r&&!t.path?`${r}/`:!r&&t.path?t.path:`${r}/${t.path}`:"":r}function cM(r){const t=r.children&&r.children.map(cM),e=t?Object.assign(Object.assign({},r),{children:t}):Object.assign({},r);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==ri&&(e.component=QN),e}function ya(r){return r.outlet||ri}function qN(r,t){const e=r.filter(n=>ya(n)===t);return e.push(...r.filter(n=>ya(n)!==t)),e}const eL={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function yy(r,t,e){var n;if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||e.length>0)?Object.assign({},eL):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(t.matcher||dY)(e,r,t);if(!l)return Object.assign({},eL);const u={};ko(l.posParams,(p,g)=>{u[g]=p.path});const h=l.consumed.length>0?Object.assign(Object.assign({},u),l.consumed[l.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:h,positionalParamSegments:null!==(n=l.posParams)&&void 0!==n?n:{}}}function Cy(r,t,e,n,s="corrected"){if(e.length>0&&function(r,t,e){return e.some(n=>Ey(r,t,n)&&ya(n)!==ri)}(r,e,n)){const u=new ui(t,function(r,t,e,n){const s={};s[ri]=n,n._sourceSegment=r,n._segmentIndexShift=t.length;for(const l of e)if(""===l.path&&ya(l)!==ri){const u=new ui([],{});u._sourceSegment=r,u._segmentIndexShift=t.length,s[ya(l)]=u}return s}(r,t,n,new ui(e,r.children)));return u._sourceSegment=r,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:[]}}if(0===e.length&&function(r,t,e){return e.some(n=>Ey(r,t,n))}(r,e,n)){const u=new ui(r.segments,function(r,t,e,n,s,l){const u={};for(const h of n)if(Ey(r,e,h)&&!s[ya(h)]){const p=new ui([],{});p._sourceSegment=r,p._segmentIndexShift="legacy"===l?r.segments.length:t.length,u[ya(h)]=p}return Object.assign(Object.assign({},s),u)}(r,t,e,n,r.children,s));return u._sourceSegment=r,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:e}}const l=new ui(r.segments,r.children);return l._sourceSegment=r,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:e}}function Ey(r,t,e){return(!(r.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function tL(r,t,e,n){return!!(ya(r)===n||n!==ri&&Ey(t,e,r))&&("**"===r.path||yy(t,r,e).matched)}function nL(r,t,e){return 0===t.length&&!r.children[e]}class a_{constructor(t){this.segmentGroup=t||null}}class iL{constructor(t){this.urlTree=t}}function Ty(r){return new q(t=>t.error(new a_(r)))}function rL(r){return new q(t=>t.error(new iL(r)))}function t$(r){return new q(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${r}'`)))}class r${constructor(t,e,n,s,l){this.configLoader=e,this.urlSerializer=n,this.urlTree=s,this.config=l,this.allowRedirects=!0,this.ngModule=t.get(Gl)}apply(){const t=Cy(this.urlTree.root,[],[],this.config).segmentGroup,e=new ui(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,ri).pipe(ye(l=>this.createUrlTree(uM(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(td(l=>{if(l instanceof iL)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof a_?this.noMatchError(l):l}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,ri).pipe(ye(s=>this.createUrlTree(uM(s),t.queryParams,t.fragment))).pipe(td(s=>{throw s instanceof a_?this.noMatchError(s):s}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const s=t.segments.length>0?new ui([],{[ri]:t}):t;return new kh(s,e,n)}expandSegmentGroup(t,e,n,s){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(ye(l=>new ui([],l))):this.expandSegment(t,n,e,n.segments,s,!0)}expandChildren(t,e,n){const s=[];for(const l of Object.keys(n.children))"primary"===l?s.unshift(l):s.push(l);return Dn(s).pipe(Hf(l=>{const u=n.children[l],h=qN(e,l);return this.expandSegmentGroup(t,h,u,l).pipe(ye(p=>({segment:p,outlet:l})))}),_N((l,u)=>(l[u.outlet]=u.segment,l),{}),function(r,t){const e=arguments.length>=2;return n=>n.pipe(r?yi((s,l)=>r(s,l,n)):se,KS(1),e?bN(t):vN(()=>new ly))}())}expandSegment(t,e,n,s,l,u){return Dn(n).pipe(Hf(h=>this.expandSegmentAgainstRoute(t,e,n,h,s,l,u).pipe(td(g=>{if(g instanceof a_)return an(null);throw g}))),Uf(h=>!!h),td((h,p)=>{if(h instanceof ly||"EmptyError"===h.name){if(nL(e,s,l))return an(new ui([],{}));throw new a_(e)}throw h}))}expandSegmentAgainstRoute(t,e,n,s,l,u,h){return tL(s,e,l,u)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(t,e,s,l,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,s,l,u):Ty(e):Ty(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,s,l,u){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,s,u):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,s,l,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,s){const l=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?rL(l):this.lineralizeSegments(n,l).pipe(ei(u=>{const h=new ui(u,{});return this.expandSegment(t,h,e,u,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,s,l,u){const{matched:h,consumedSegments:p,lastChild:g,positionalParamSegments:b}=yy(e,s,l);if(!h)return Ty(e);const C=this.applyRedirectCommands(p,s.redirectTo,b);return s.redirectTo.startsWith("/")?rL(C):this.lineralizeSegments(s,C).pipe(ei(w=>this.expandSegment(t,e,n,w.concat(l.slice(g)),u,!1)))}matchSegmentAgainstRoute(t,e,n,s,l){if("**"===n.path)return n.loadChildren?(n._loadedConfig?an(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(ye(w=>(n._loadedConfig=w,new ui(s,{})))):an(new ui(s,{}));const{matched:u,consumedSegments:h,lastChild:p}=yy(e,n,s);if(!u)return Ty(e);const g=s.slice(p);return this.getChildConfig(t,n,s).pipe(ei(C=>{const w=C.module,x=C.routes,{segmentGroup:N,slicedSegments:B}=Cy(e,h,g,x),V=new ui(N.segments,N.children);if(0===B.length&&V.hasChildren())return this.expandChildren(w,x,V).pipe(ye(Re=>new ui(h,Re)));if(0===x.length&&0===B.length)return an(new ui(h,{}));const $=ya(n)===l;return this.expandSegment(w,V,x,B,$?ri:l,!0).pipe(ye(xe=>new ui(h.concat(xe.segments),xe.children)))}))}getChildConfig(t,e,n){return e.children?an(new lM(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?an(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(ei(s=>s?this.configLoader.load(t.injector,e).pipe(ye(l=>(e._loadedConfig=l,l))):function(r){return new q(t=>t.error(QS(`Cannot load children because the guard of the route "path: '${r.path}'" returned false`)))}(e))):an(new lM([],t))}runCanLoadGuards(t,e,n){const s=e.canLoad;return s&&0!==s.length?an(s.map(u=>{const h=t.get(u);let p;if(function(r){return r&&id(r.canLoad)}(h))p=h.canLoad(e,n);else{if(!id(h))throw new Error("Invalid CanLoad guard");p=h(e,n)}return Xl(p)})).pipe(s_(),Qr(u=>{if(!Ph(u))return;const h=QS(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw h.url=u,h}),ye(u=>!0===u)):an(!0)}lineralizeSegments(t,e){let n=[],s=e.root;for(;;){if(n=n.concat(s.segments),0===s.numberOfChildren)return an(n);if(s.numberOfChildren>1||!s.children[ri])return t$(t.redirectTo);s=s.children[ri]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,s){const l=this.createSegmentGroup(t,e.root,n,s);return new kh(l,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ko(t,(s,l)=>{if("string"==typeof s&&s.startsWith(":")){const h=s.substring(1);n[l]=e[h]}else n[l]=s}),n}createSegmentGroup(t,e,n,s){const l=this.createSegments(t,e.segments,n,s);let u={};return ko(e.children,(h,p)=>{u[p]=this.createSegmentGroup(t,h,n,s)}),new ui(l,u)}createSegments(t,e,n,s){return e.map(l=>l.path.startsWith(":")?this.findPosParam(t,l,s):this.findOrReturn(l,n))}findPosParam(t,e,n){const s=n[e.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return s}findOrReturn(t,e){let n=0;for(const s of e){if(s.path===t.path)return e.splice(n),s;n++}return t}}function uM(r){const t={};for(const n of Object.keys(r.children)){const l=uM(r.children[n]);(l.segments.length>0||l.hasChildren())&&(t[n]=l)}return function(r){if(1===r.numberOfChildren&&r.children[ri]){const t=r.children[ri];return new ui(r.segments.concat(t.segments),t.children)}return r}(new ui(r.segments,t))}class oL{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class wy{constructor(t,e){this.component=t,this.route=e}}function a$(r,t,e){const n=r._root;return l_(n,t?t._root:null,e,[n.value])}function Sy(r,t,e){const n=function(r){if(!r)return null;for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(n?n.module.injector:e).get(r)}function l_(r,t,e,n,s={canDeactivateChecks:[],canActivateChecks:[]}){const l=i_(t);return r.children.forEach(u=>{(function(r,t,e,n,s={canDeactivateChecks:[],canActivateChecks:[]}){const l=r.value,u=t?t.value:null,h=e?e.getContext(r.value.outlet):null;if(u&&l.routeConfig===u.routeConfig){const p=function(r,t,e){if("function"==typeof e)return e(r,t);switch(e){case"pathParamsChange":return!Nh(r.url,t.url);case"pathParamsOrQueryParamsChange":return!Nh(r.url,t.url)||!jl(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rM(r,t)||!jl(r.queryParams,t.queryParams);case"paramsChange":default:return!rM(r,t)}}(u,l,l.routeConfig.runGuardsAndResolvers);p?s.canActivateChecks.push(new oL(n)):(l.data=u.data,l._resolvedData=u._resolvedData),l_(r,t,l.component?h?h.children:null:e,n,s),p&&h&&h.outlet&&h.outlet.isActivated&&s.canDeactivateChecks.push(new wy(h.outlet.component,u))}else u&&c_(t,h,s),s.canActivateChecks.push(new oL(n)),l_(r,null,l.component?h?h.children:null:e,n,s)})(u,l[u.value.outlet],e,n.concat([u.value]),s),delete l[u.value.outlet]}),ko(l,(u,h)=>c_(u,e.getContext(h),s)),s}function c_(r,t,e){const n=i_(r),s=r.value;ko(n,(l,u)=>{c_(l,s.component?t?t.children.getContext(u):null:t,e)}),e.canDeactivateChecks.push(new wy(s.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,s))}class y${}function sL(r){return new q(t=>t.error(r))}class E${constructor(t,e,n,s,l,u){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=s,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=u}recognize(){const t=Cy(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,ri);if(null===e)return null;const n=new my([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ri,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Wc(n,e),l=new GN(this.url,s);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(t){const e=t.value,n=UN(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const l of Object.keys(e.children)){const u=e.children[l],h=qN(t,l),p=this.processSegmentGroup(h,u,l);if(null===p)return null;n.push(...p)}const s=aL(n);return function(r){r.sort((t,e)=>t.value.outlet===ri?-1:e.value.outlet===ri?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}processSegment(t,e,n,s){for(const l of t){const u=this.processSegmentAgainstRoute(l,e,n,s);if(null!==u)return u}return nL(e,n,s)?[]:null}processSegmentAgainstRoute(t,e,n,s){if(t.redirectTo||!tL(t,e,n,s))return null;let l,u=[],h=[];if("**"===t.path){const x=n.length>0?RN(n).parameters:{};l=new my(n,x,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,uL(t),ya(t),t.component,t,lL(e),cL(e)+n.length,dL(t))}else{const x=yy(e,t,n);if(!x.matched)return null;u=x.consumedSegments,h=n.slice(x.lastChild),l=new my(u,x.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,uL(t),ya(t),t.component,t,lL(e),cL(e)+u.length,dL(t))}const p=function(r){return r.children?r.children:r.loadChildren?r._loadedConfig.routes:[]}(t),{segmentGroup:g,slicedSegments:b}=Cy(e,u,h,p.filter(x=>void 0===x.redirectTo),this.relativeLinkResolution);if(0===b.length&&g.hasChildren()){const x=this.processChildren(p,g);return null===x?null:[new Wc(l,x)]}if(0===p.length&&0===b.length)return[new Wc(l,[])];const C=ya(t)===s,w=this.processSegment(p,g,b,C?ri:s);return null===w?null:[new Wc(l,w)]}}function S$(r){const t=r.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function aL(r){const t=[],e=new Set;for(const n of r){if(!S$(n)){t.push(n);continue}const s=t.find(l=>n.value.routeConfig===l.value.routeConfig);void 0!==s?(s.children.push(...n.children),e.add(s)):t.push(n)}for(const n of e){const s=aL(n.children);t.push(new Wc(n.value,s))}return t.filter(n=>!e.has(n))}function lL(r){let t=r;for(;t._sourceSegment;)t=t._sourceSegment;return t}function cL(r){let t=r,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function uL(r){return r.data||{}}function dL(r){return r.resolve||{}}function dM(r){return Oo(t=>{const e=r(t);return e?Dn(e).pipe(ye(()=>t)):an(t)})}class k$ extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const hM=new je("ROUTES");class hL{constructor(t,e,n,s){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=s}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const s=this.loadModuleFactory(e.loadChildren).pipe(ye(l=>{this.onLoadEndListener&&this.onLoadEndListener(e);const u=l.create(t);return new lM(DN(u.injector.get(hM,void 0,pn.Self|pn.Optional)).map(cM),u)}),td(l=>{throw e._loader$=void 0,l}));return e._loader$=new mt(s,()=>new j).pipe(Sn()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Dn(this.loader.load(t)):Xl(t()).pipe(ei(e=>e instanceof WA?an(e):Dn(this.compiler.compileModuleAsync(e))))}}class N${constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wf,this.attachRef=null}}class Wf{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new N$,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class P${shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function F$(r){throw r}function B$(r,t,e){return t.parse("/")}function pL(r,t){return an(null)}const V$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},H$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ks=(()=>{class r{constructor(e,n,s,l,u,h,p,g){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=s,this.location=l,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new j,this.errorHandler=F$,this.malformedUriErrorHandler=B$,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:pL,afterPreactivation:pL},this.urlHandlingStrategy=new P$,this.routeReuseStrategy=new k$,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(Gl),this.console=u.get(Tb);const w=u.get(Xt);this.isNgZoneEnabled=w instanceof Xt&&Xt.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=new kh(new ui([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new hL(h,p,x=>this.triggerEvent(new EN(x)),x=>this.triggerEvent(new TN(x))),this.routerState=HN(this.currentUrlTree,this.rootComponentType),this.transitions=new Os({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(yi(s=>0!==s.id),ye(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Oo(s=>{let l=!1,u=!1;return an(s).pipe(Qr(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Oo(h=>{const p=this.browserUrlTree.toString(),g=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||g)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return My(h.source)&&(this.browserUrlTree=h.extractedUrl),an(h).pipe(Oo(C=>{const w=this.transitions.getValue();return n.next(new JS(C.id,this.serializeUrl(C.extractedUrl),C.source,C.restoredState)),w!==this.transitions.getValue()?ed:Promise.resolve(C)}),function(r,t,e,n){return Oo(s=>function(r,t,e,n,s){return new r$(r,t,e,n,s).apply()}(r,t,e,s.extractedUrl,n).pipe(ye(l=>Object.assign(Object.assign({},s),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Qr(C=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:C.urlAfterRedirects})}),function(r,t,e,n,s){return ei(l=>function(r,t,e,n,s="emptyOnly",l="legacy"){try{const u=new E$(r,t,e,n,s,l).recognize();return null===u?sL(new y$):an(u)}catch(u){return sL(u)}}(r,t,l.urlAfterRedirects,e(l.urlAfterRedirects),n,s).pipe(ye(u=>Object.assign(Object.assign({},l),{targetSnapshot:u}))))}(this.rootComponentType,this.config,C=>this.serializeUrl(C),this.paramsInheritanceStrategy,this.relativeLinkResolution),Qr(C=>{"eager"===this.urlUpdateStrategy&&(C.extras.skipLocationChange||this.setBrowserUrl(C.urlAfterRedirects,C),this.browserUrlTree=C.urlAfterRedirects);const w=new eY(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);n.next(w)}));if(g&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:w,extractedUrl:x,source:N,restoredState:B,extras:V}=h,$=new JS(w,this.serializeUrl(x),N,B);n.next($);const te=HN(x,this.rootComponentType).snapshot;return an(Object.assign(Object.assign({},h),{targetSnapshot:te,urlAfterRedirects:x,extras:Object.assign(Object.assign({},V),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,this.browserUrlTree=h.urlAfterRedirects,h.resolve(null),ed}),dM(h=>{const{targetSnapshot:p,id:g,extractedUrl:b,rawUrl:C,extras:{skipLocationChange:w,replaceUrl:x}}=h;return this.hooks.beforePreactivation(p,{navigationId:g,appliedUrlTree:b,rawUrlTree:C,skipLocationChange:!!w,replaceUrl:!!x})}),Qr(h=>{const p=new tY(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),ye(h=>Object.assign(Object.assign({},h),{guards:a$(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function(r,t){return ei(e=>{const{targetSnapshot:n,currentSnapshot:s,guards:{canActivateChecks:l,canDeactivateChecks:u}}=e;return 0===u.length&&0===l.length?an(Object.assign(Object.assign({},e),{guardsResult:!0})):function(r,t,e,n){return Dn(r).pipe(ei(s=>function(r,t,e,n,s){const l=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return l&&0!==l.length?an(l.map(h=>{const p=Sy(h,t,s);let g;if(function(r){return r&&id(r.canDeactivate)}(p))g=Xl(p.canDeactivate(r,t,e,n));else{if(!id(p))throw new Error("Invalid CanDeactivate guard");g=Xl(p(r,t,e,n))}return g.pipe(Uf())})).pipe(s_()):an(!0)}(s.component,s.route,e,t,n)),Uf(s=>!0!==s,!0))}(u,n,s,r).pipe(ei(h=>h&&function(r){return"boolean"==typeof r}(h)?function(r,t,e,n){return Dn(t).pipe(Hf(s=>cy(function(r,t){return null!==r&&t&&t(new oY(r)),an(!0)}(s.route.parent,n),function(r,t){return null!==r&&t&&t(new aY(r)),an(!0)}(s.route,n),function(r,t,e){const n=t[t.length-1],l=t.slice(0,t.length-1).reverse().map(u=>function(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(u)).filter(u=>null!==u).map(u=>qm(()=>an(u.guards.map(p=>{const g=Sy(p,u.node,e);let b;if(function(r){return r&&id(r.canActivateChild)}(g))b=Xl(g.canActivateChild(n,r));else{if(!id(g))throw new Error("Invalid CanActivateChild guard");b=Xl(g(n,r))}return b.pipe(Uf())})).pipe(s_())));return an(l).pipe(s_())}(r,s.path,e),function(r,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;return n&&0!==n.length?an(n.map(l=>qm(()=>{const u=Sy(l,t,e);let h;if(function(r){return r&&id(r.canActivate)}(u))h=Xl(u.canActivate(t,r));else{if(!id(u))throw new Error("Invalid CanActivate guard");h=Xl(u(t,r))}return h.pipe(Uf())}))).pipe(s_()):an(!0)}(r,s.route,e))),Uf(s=>!0!==s,!0))}(n,l,r,t):an(h)),ye(h=>Object.assign(Object.assign({},e),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),Qr(h=>{if(Ph(h.guardsResult)){const g=QS(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw g.url=h.guardsResult,g}const p=new nY(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),yi(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),dM(h=>{if(h.guards.canActivateChecks.length)return an(h).pipe(Qr(p=>{const g=new iY(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(g)}),Oo(p=>{let g=!1;return an(p).pipe(function(r,t){return ei(e=>{const{targetSnapshot:n,guards:{canActivateChecks:s}}=e;if(!s.length)return an(e);let l=0;return Dn(s).pipe(Hf(u=>function(r,t,e,n){return function(r,t,e,n){const s=Object.keys(r);if(0===s.length)return an({});const l={};return Dn(s).pipe(ei(u=>function(r,t,e,n){const s=Sy(r,t,n);return Xl(s.resolve?s.resolve(t,e):s(t,e))}(r[u],t,e,n).pipe(Qr(h=>{l[u]=h}))),KS(1),ei(()=>Object.keys(l).length===s.length?an(l):ed))}(r._resolve,r,t,n).pipe(ye(l=>(r._resolvedData=l,r.data=Object.assign(Object.assign({},r.data),UN(r,e).resolve),null)))}(u.route,n,r,t)),Qr(()=>l++),KS(1),ei(u=>l===s.length?an(e):ed))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Qr({next:()=>g=!0,complete:()=>{g||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),Qr(p=>{const g=new rY(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(g)}))}),dM(h=>{const{targetSnapshot:p,id:g,extractedUrl:b,rawUrl:C,extras:{skipLocationChange:w,replaceUrl:x}}=h;return this.hooks.afterPreactivation(p,{navigationId:g,appliedUrlTree:b,rawUrlTree:C,skipLocationChange:!!w,replaceUrl:!!x})}),ye(h=>{const p=function(r,t,e){const n=_y(r,t._root,e?e._root:void 0);return new VN(n,t)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:p})}),Qr(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((r,t,e)=>ye(n=>(new GY(t,n.targetRouterState,n.currentRouterState,e).activate(r),n)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),Qr({next(){l=!0},complete(){l=!0}}),yN(()=>{var h;if(!l&&!u){const p=`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(s),this.cancelNavigationTransition(s,p)):this.cancelNavigationTransition(s,p)}(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===s.id&&(this.currentNavigation=null)}),td(h=>{if(u=!0,function(r){return r&&r[SN]}(h)){const p=Ph(h.url);p||(this.navigated=!0,this.restoreHistory(s,!0));const g=new CN(s.id,this.serializeUrl(s.extractedUrl),h.message);n.next(g),p?setTimeout(()=>{const b=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),C={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||My(s.source)};this.scheduleNavigation(b,"imperative",null,C,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const p=new qX(s.id,this.serializeUrl(s.extractedUrl),h);n.next(p);try{s.resolve(this.errorHandler(h))}catch(g){s.reject(g)}}return ed}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,n)&&setTimeout(()=>{const{source:s,state:l,urlTree:u}=n,h={replaceUrl:!0};if(l){const p=Object.assign({},l);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(h.state=p)}this.scheduleNavigation(u,s,l,h)},0),this.lastLocationChangeInfo=n}))}extractLocationChangeInfoFromEvent(e){var n;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(n=e.state)||void 0===n?void 0:n.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,n){if(!e)return!0;const s=n.urlTree.toString()===e.urlTree.toString();return n.transitionId!==e.transitionId||!s||!("hashchange"===n.source&&"popstate"===e.source||"popstate"===n.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){ZN(e),this.config=e.map(cM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:s,queryParams:l,fragment:u,queryParamsHandling:h,preserveFragment:p}=n,g=s||this.routerState.root,b=p?this.currentUrlTree.fragment:u;let C=null;switch(h){case"merge":C=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=l||null}return null!==C&&(C=this.removeEmptyProps(C)),function(r,t,e,n,s){if(0===e.length)return oM(t.root,t.root,t,n,s);const l=function(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new XN(!0,0,r);let t=0,e=!1;const n=r.reduce((s,l,u)=>{if("object"==typeof l&&null!=l){if(l.outlets){const h={};return ko(l.outlets,(p,g)=>{h[g]="string"==typeof p?p.split("/"):p}),[...s,{outlets:h}]}if(l.segmentPath)return[...s,l.segmentPath]}return"string"!=typeof l?[...s,l]:0===u?(l.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?e=!0:".."===h?t++:""!=h&&s.push(h))}),s):[...s,l]},[]);return new XN(e,t,n)}(e);if(l.toRoot())return oM(t.root,new ui([],{}),t,n,s);const u=function(r,t,e){if(r.isAbsolute)return new sM(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const l=e.snapshot._urlSegment;return new sM(l,l===t.root,0)}const n=vy(r.commands[0])?0:1;return function(r,t,e){let n=r,s=t,l=e;for(;l>s;){if(l-=s,n=n.parent,!n)throw new Error("Invalid number of '../'");s=n.segments.length}return new sM(n,!1,s-l)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+n,r.numberOfDoubleDots)}(l,t,r),h=u.processChildren?by(u.segmentGroup,u.index,l.commands):YN(u.segmentGroup,u.index,l.commands);return oM(u.segmentGroup,h,t,n,s)}(g,this.currentUrlTree,e,C,null!=b?b:null)}navigateByUrl(e,n={skipLocationChange:!1}){const s=Ph(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function(r){for(let t=0;t<r.length;t++){const e=r[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(s){n=this.malformedUriErrorHandler(s,this.urlSerializer,e)}return n}isActive(e,n){let s;if(s=!0===n?Object.assign({},V$):!1===n?Object.assign({},H$):n,Ph(e))return IN(this.currentUrlTree,e,s);const l=this.parseUrl(e);return IN(this.currentUrlTree,l,s)}removeEmptyProps(e){return Object.keys(e).reduce((n,s)=>{const l=e[s];return null!=l&&(n[s]=l),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new e_(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,s,l,u){var h,p;if(this.disposed)return Promise.resolve(!1);const g=this.getTransition(),b=My(n)&&g&&!My(g.source),x=(this.lastSuccessfulId===g.id||this.currentNavigation?g.rawUrl:g.urlAfterRedirects).toString()===e.toString();if(b&&x)return Promise.resolve(!0);let N,B,V;u?(N=u.resolve,B=u.reject,V=u.promise):V=new Promise((xe,Re)=>{N=xe,B=Re});const $=++this.navigationId;let te;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),te=s&&s.\u0275routerPageId?s.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):te=0,this.setTransition({id:$,targetPageId:te,source:n,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:N,reject:B,promise:V,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),V.catch(xe=>Promise.reject(xe))}setBrowserUrl(e,n){const s=this.urlSerializer.serialize(e),l=Object.assign(Object.assign({},n.extras.state),this.generateNgRouterState(n.id,n.targetPageId));this.location.isCurrentPathEqualTo(s)||n.extras.replaceUrl?this.location.replaceState(s,"",l):this.location.go(s,"",l)}restoreHistory(e,n=!1){var s,l;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===u?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===u&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n){const s=new CN(e.id,this.serializeUrl(e.extractedUrl),n);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return r.\u0275fac=function(e){return new(e||r)(be(Xa),be(ZS),be(Wf),be(Ff),be(Yn),be(Sb),be(Dh),be(void 0))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function My(r){return"imperative"!==r}let u_=(()=>{class r{constructor(e,n,s){this.router=e,this.route=n,this.locationStrategy=s,this.commands=[],this.onChanges=new j,this.subscription=e.events.subscribe(l=>{l instanceof e_&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,n,s,l,u){if(0!==e||n||s||l||u||"string"==typeof this.target&&"_self"!=this.target)return!0;const h={skipLocationChange:zf(this.skipLocationChange),replaceUrl:zf(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:zf(this.preserveFragment)})}}return r.\u0275fac=function(e){return new(e||r)(k(ks),k(Lh),k(Pf))},r.\u0275dir=Te({type:r,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,n){1&e&&ft("click",function(l){return n.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&e&&(ro("href",n.href,T),yt("target",n.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[_n]}),r})();function zf(r){return""===r||!!r}let fM=(()=>{class r{constructor(e,n,s,l,u){this.parentContexts=e,this.location=n,this.resolver=s,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new st,this.deactivateEvents=new st,this.name=l||ri,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const u=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,p=new z$(e,h,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(e){return new(e||r)(k(Wf),k(bi),k(nl),qi("name"),k(bn))},r.\u0275dir=Te({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),r})();class z${constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Lh?this.route:t===Wf?this.childContexts:this.parent.get(t,e)}}class fL{}class gL{preload(t,e){return an(null)}}let mL=(()=>{class r{constructor(e,n,s,l,u){this.router=e,this.injector=l,this.preloadingStrategy=u,this.loader=new hL(n,s,g=>e.triggerEvent(new EN(g)),g=>e.triggerEvent(new TN(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(yi(e=>e instanceof e_),Hf(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Gl);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const s=[];for(const l of n)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const u=l._loadedConfig;s.push(this.processRoutes(u.module,u.routes))}else l.loadChildren&&!l.canLoad?s.push(this.preloadConfig(e,l)):l.children&&s.push(this.processRoutes(e,l.children));return Dn(s).pipe(vn(),ye(l=>{}))}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>(n._loadedConfig?an(n._loadedConfig):this.loader.load(e.injector,n)).pipe(ei(l=>(n._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return r.\u0275fac=function(e){return new(e||r)(be(ks),be(Sb),be(Dh),be(Yn),be(fL))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),gM=(()=>{class r{constructor(e,n,s={}){this.router=e,this.viewportScroller=n,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof JS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof e_&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof wN&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new wN(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(be(ks),be(Zk),be(void 0))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const Fh=new je("ROUTER_CONFIGURATION"),_L=new je("ROUTER_FORROOT_GUARD"),X$=[Ff,{provide:ZS,useClass:NN},{provide:ks,useFactory:function(r,t,e,n,s,l,u,h={},p,g){const b=new ks(null,r,t,e,n,s,l,DN(u));return p&&(b.urlHandlingStrategy=p),g&&(b.routeReuseStrategy=g),function(r,t){r.errorHandler&&(t.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(t.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(t.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(t.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(t.urlUpdateStrategy=r.urlUpdateStrategy)}(h,b),h.enableTracing&&b.events.subscribe(C=>{var w,x;null===(w=console.group)||void 0===w||w.call(console,`Router Event: ${C.constructor.name}`),console.log(C.toString()),console.log(C),null===(x=console.groupEnd)||void 0===x||x.call(console)}),b},deps:[ZS,Wf,Ff,Yn,Sb,Dh,hM,Fh,[class{},new sr],[class{},new sr]]},Wf,{provide:Lh,useFactory:function(r){return r.routerState.root},deps:[ks]},{provide:Sb,useClass:i4},mL,gL,class{preload(t,e){return e().pipe(td(()=>an(null)))}},{provide:Fh,useValue:{enableTracing:!1}}];function Y$(){return new Bw("Router",ks)}let vL=(()=>{class r{constructor(e,n){}static forRoot(e,n){return{ngModule:r,providers:[X$,bL(e),{provide:_L,useFactory:J$,deps:[[ks,new sr,new Io]]},{provide:Fh,useValue:n||{}},{provide:Pf,useFactory:K$,deps:[Ih,[new Fu(tS),new sr],Fh]},{provide:gM,useFactory:$$,deps:[ks,Zk,Fh]},{provide:fL,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:gL},{provide:Bw,multi:!0,useFactory:Y$},[mM,{provide:Af,multi:!0,useFactory:eK,deps:[mM]},{provide:yL,useFactory:tK,deps:[mM]},{provide:XO,multi:!0,useExisting:yL}]]}}static forChild(e){return{ngModule:r,providers:[bL(e)]}}}return r.\u0275fac=function(e){return new(e||r)(be(_L,8),be(ks,8))},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({}),r})();function $$(r,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new gM(r,t,e)}function K$(r,t,e={}){return e.useHash?new T6(r,t):new Lk(r,t)}function J$(r){return"guarded"}function bL(r){return[{provide:Up,multi:!0,useValue:r},{provide:hM,multi:!0,useValue:r}]}let mM=(()=>{class r{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new j}appInitializer(){return this.injector.get(y6,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let n=null;const s=new Promise(h=>n=h),l=this.injector.get(ks),u=this.injector.get(Fh);return"disabled"===u.initialNavigation?(l.setUpLocationChangeListener(),n(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?an(null):(this.initNavigation=!0,n(!0),this.resultOfPreactivationDone),l.initialNavigation()):n(!0),s})}bootstrapListener(e){const n=this.injector.get(Fh),s=this.injector.get(mL),l=this.injector.get(gM),u=this.injector.get(ks),h=this.injector.get(Xu);e===h.components[0]&&(("enabledNonBlocking"===n.initialNavigation||void 0===n.initialNavigation)&&u.initialNavigation(),s.setUpPreloading(),l.init(),u.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return r.\u0275fac=function(e){return new(e||r)(be(Yn))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function eK(r){return r.appInitializer.bind(r)}function tK(r){return r.bootstrapListener.bind(r)}const yL=new je("Router Initializer");function CL(r,t,e,n,s,l,u){try{var h=r[l](u),p=h.value}catch(g){return void e(g)}h.done?t(p):Promise.resolve(p).then(n,s)}function _M(r){return function(){var t=this,e=arguments;return new Promise(function(n,s){var l=r.apply(t,e);function u(p){CL(l,n,s,u,h,"next",p)}function h(p){CL(l,n,s,u,h,"throw",p)}u(void 0)})}}var Ln=_(7832),Br=_(7148),Di=_(57470),jf=_(39855),iK=_(76894),rK=_(45149);const EL="undefined"==typeof window?function(r){return r()}:window.requestAnimationFrame;function TL(r,t,e){const n=e||(u=>Array.prototype.slice.call(u));let s=!1,l=[];return function(...u){l=n(u),s||(s=!0,EL.call(window,()=>{s=!1,r.apply(t,l)}))}}const vM=r=>"start"===r?"left":"end"===r?"right":"center",Ko=(r,t,e)=>"start"===r?t:"end"===r?e:(t+e)/2;function zc(){}const aK=function(){let r=0;return function(){return r++}}();function xi(r){return null==r}function nr(r){if(Array.isArray&&Array.isArray(r))return!0;const t=Object.prototype.toString.call(r);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)}function pi(r){return null!==r&&"[object Object]"===Object.prototype.toString.call(r)}const Vr=r=>("number"==typeof r||r instanceof Number)&&isFinite(+r);function Ca(r,t){return Vr(r)?r:t}function Zn(r,t){return void 0===r?t:r}const wL=(r,t)=>"string"==typeof r&&r.endsWith("%")?parseFloat(r)/100*t:+r;function ir(r,t,e){if(r&&"function"==typeof r.call)return r.apply(e,t)}function zi(r,t,e,n){let s,l,u;if(nr(r))if(l=r.length,n)for(s=l-1;s>=0;s--)t.call(e,r[s],s);else for(s=0;s<l;s++)t.call(e,r[s],s);else if(pi(r))for(u=Object.keys(r),l=u.length,s=0;s<l;s++)t.call(e,r[u[s]],u[s])}function Dy(r,t){let e,n,s,l;if(!r||!t||r.length!==t.length)return!1;for(e=0,n=r.length;e<n;++e)if(s=r[e],l=t[e],s.datasetIndex!==l.datasetIndex||s.index!==l.index)return!1;return!0}function Ry(r){if(nr(r))return r.map(Ry);if(pi(r)){const t=Object.create(null),e=Object.keys(r),n=e.length;let s=0;for(;s<n;++s)t[e[s]]=Ry(r[e[s]]);return t}return r}function SL(r){return-1===["__proto__","prototype","constructor"].indexOf(r)}function cK(r,t,e,n){if(!SL(r))return;const s=t[r],l=e[r];pi(s)&&pi(l)?d_(s,l,n):t[r]=Ry(l)}function d_(r,t,e){const n=nr(t)?t:[t],s=n.length;if(!pi(r))return r;const l=(e=e||{}).merger||cK;for(let u=0;u<s;++u){if(!pi(t=n[u]))continue;const h=Object.keys(t);for(let p=0,g=h.length;p<g;++p)l(h[p],r,t,e)}return r}function h_(r,t){return d_(r,t,{merger:uK})}function uK(r,t,e){if(!SL(r))return;const n=t[r],s=e[r];pi(n)&&pi(s)?h_(n,s):Object.prototype.hasOwnProperty.call(t,r)||(t[r]=Ry(s))}function ML(r,t){const e=r.indexOf(".",t);return-1===e?r.length:e}function Bh(r,t){if(""===t)return r;let e=0,n=ML(t,e);for(;r&&n>e;)r=r[t.substr(e,n-e)],e=n+1,n=ML(t,e);return r}function bM(r){return r.charAt(0).toUpperCase()+r.slice(1)}const Ea=r=>void 0!==r,rd=r=>"function"==typeof r,DL=(r,t)=>{if(r.size!==t.size)return!1;for(const e of r)if(!t.has(e))return!1;return!0},xr=Math.PI,$i=2*xr,pK=$i+xr,xy=Number.POSITIVE_INFINITY,fK=xr/180,Hr=xr/2,p_=xr/4,RL=2*xr/3,Ta=Math.log10,Yl=Math.sign;function xL(r){const t=Math.round(r);r=f_(r,t,r/1e3)?t:r;const e=Math.pow(10,Math.floor(Ta(r))),n=r/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function Xf(r){return!isNaN(parseFloat(r))&&isFinite(r)}function f_(r,t,e){return Math.abs(r-t)<e}function IL(r,t,e){let n,s,l;for(n=0,s=r.length;n<s;n++)l=r[n][e],isNaN(l)||(t.min=Math.min(t.min,l),t.max=Math.max(t.max,l))}function ul(r){return r*(xr/180)}function yM(r){return r*(180/xr)}function AL(r){if(!Vr(r))return;let t=1,e=0;for(;Math.round(r*t)/t!==r;)t*=10,e++;return e}function CM(r,t){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}function vK(r,t){return(r-t+pK)%$i-xr}function dl(r){return(r%$i+$i)%$i}function Iy(r,t,e,n){const s=dl(r),l=dl(t),u=dl(e),h=dl(l-s),p=dl(u-s),g=dl(s-l),b=dl(s-u);return s===l||s===u||n&&l===u||h>p&&g<b}function go(r,t,e){return Math.max(t,Math.min(e,r))}function jc(r,t,e,n=1e-6){return r>=Math.min(t,e)-n&&r<=Math.max(t,e)+n}const Ay=r=>0===r||1===r,OL=(r,t,e)=>-Math.pow(2,10*(r-=1))*Math.sin((r-t)*$i/e),kL=(r,t,e)=>Math.pow(2,-10*r)*Math.sin((r-t)*$i/e)+1,g_={linear:r=>r,easeInQuad:r=>r*r,easeOutQuad:r=>-r*(r-2),easeInOutQuad:r=>(r/=.5)<1?.5*r*r:-.5*(--r*(r-2)-1),easeInCubic:r=>r*r*r,easeOutCubic:r=>(r-=1)*r*r+1,easeInOutCubic:r=>(r/=.5)<1?.5*r*r*r:.5*((r-=2)*r*r+2),easeInQuart:r=>r*r*r*r,easeOutQuart:r=>-((r-=1)*r*r*r-1),easeInOutQuart:r=>(r/=.5)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2),easeInQuint:r=>r*r*r*r*r,easeOutQuint:r=>(r-=1)*r*r*r*r+1,easeInOutQuint:r=>(r/=.5)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2),easeInSine:r=>1-Math.cos(r*Hr),easeOutSine:r=>Math.sin(r*Hr),easeInOutSine:r=>-.5*(Math.cos(xr*r)-1),easeInExpo:r=>0===r?0:Math.pow(2,10*(r-1)),easeOutExpo:r=>1===r?1:1-Math.pow(2,-10*r),easeInOutExpo:r=>Ay(r)?r:r<.5?.5*Math.pow(2,10*(2*r-1)):.5*(2-Math.pow(2,-10*(2*r-1))),easeInCirc:r=>r>=1?r:-(Math.sqrt(1-r*r)-1),easeOutCirc:r=>Math.sqrt(1-(r-=1)*r),easeInOutCirc:r=>(r/=.5)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1),easeInElastic:r=>Ay(r)?r:OL(r,.075,.3),easeOutElastic:r=>Ay(r)?r:kL(r,.075,.3),easeInOutElastic(r){const t=.1125;return Ay(r)?r:r<.5?.5*OL(2*r,t,.45):.5+.5*kL(2*r-1,t,.45)},easeInBack(r){const t=1.70158;return r*r*((t+1)*r-t)},easeOutBack(r){const t=1.70158;return(r-=1)*r*((t+1)*r+t)+1},easeInOutBack(r){let t=1.70158;return(r/=.5)<1?r*r*((1+(t*=1.525))*r-t)*.5:.5*((r-=2)*r*((1+(t*=1.525))*r+t)+2)},easeInBounce:r=>1-g_.easeOutBounce(1-r),easeOutBounce(r){const t=7.5625,e=2.75;return r<1/e?t*r*r:r<2/e?t*(r-=1.5/e)*r+.75:r<2.5/e?t*(r-=2.25/e)*r+.9375:t*(r-=2.625/e)*r+.984375},easeInOutBounce:r=>r<.5?.5*g_.easeInBounce(2*r):.5*g_.easeOutBounce(2*r-1)+.5},wa={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},EM="0123456789ABCDEF",yK=r=>EM[15&r],CK=r=>EM[(240&r)>>4]+EM[15&r],Oy=r=>(240&r)>>4==(15&r);function m_(r){return r+.5|0}const ky=(r,t,e)=>Math.max(Math.min(r,e),t);function __(r){return ky(m_(2.55*r),0,255)}function v_(r){return ky(m_(255*r),0,255)}function TM(r){return ky(m_(r/2.55)/100,0,1)}function NL(r){return ky(m_(100*r),0,100)}const SK=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,RK=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function LL(r,t,e){const n=t*Math.min(e,1-e),s=(l,u=(l+r/30)%12)=>e-n*Math.max(Math.min(u-3,9-u,1),-1);return[s(0),s(8),s(4)]}function xK(r,t,e){const n=(s,l=(s+r/60)%6)=>e-e*t*Math.max(Math.min(l,4-l,1),0);return[n(5),n(3),n(1)]}function IK(r,t,e){const n=LL(r,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)n[s]*=1-t-e,n[s]+=t;return n}function wM(r){const e=r.r/255,n=r.g/255,s=r.b/255,l=Math.max(e,n,s),u=Math.min(e,n,s),h=(l+u)/2;let p,g,b;return l!==u&&(b=l-u,g=h>.5?b/(2-l-u):b/(l+u),p=l===e?(n-s)/b+(n<s?6:0):l===n?(s-e)/b+2:(e-n)/b+4,p=60*p+.5),[0|p,g||0,h]}function SM(r,t,e,n){return(Array.isArray(t)?r(t[0],t[1],t[2]):r(t,e,n)).map(v_)}function MM(r,t,e){return SM(LL,r,t,e)}function PL(r){return(r%360+360)%360}const FL={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},BL={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ny;function Ly(r,t,e){if(r){let n=wM(r);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,0===t?360:1)),n=MM(n),r.r=n[0],r.g=n[1],r.b=n[2]}}function VL(r,t){return r&&Object.assign(t||{},r)}function HL(r){var t={r:0,g:0,b:0,a:255};return Array.isArray(r)?r.length>=3&&(t={r:r[0],g:r[1],b:r[2],a:255},r.length>3&&(t.a=v_(r[3]))):(t=VL(r,{r:0,g:0,b:0,a:1})).a=v_(t.a),t}function BK(r){return"r"===r.charAt(0)?function(r){const t=SK.exec(r);let n,s,l,e=255;if(t){if(t[7]!==n){const u=+t[7];e=255&(t[8]?__(u):255*u)}return n=+t[1],s=+t[3],l=+t[5],n=255&(t[2]?__(n):n),s=255&(t[4]?__(s):s),l=255&(t[6]?__(l):l),{r:n,g:s,b:l,a:e}}}(r):function(r){const t=RK.exec(r);let n,e=255;if(!t)return;t[5]!==n&&(e=t[6]?__(+t[5]):v_(+t[5]));const s=PL(+t[2]),l=+t[3]/100,u=+t[4]/100;return n="hwb"===t[1]?function(r,t,e){return SM(IK,r,t,e)}(s,l,u):"hsv"===t[1]?function(r,t,e){return SM(xK,r,t,e)}(s,l,u):MM(s,l,u),{r:n[0],g:n[1],b:n[2],a:e}}(r)}class Py{constructor(t){if(t instanceof Py)return t;const e=typeof t;let n;"object"===e?n=HL(t):"string"===e&&(n=function(r){var e,t=r.length;return"#"===r[0]&&(4===t||5===t?e={r:255&17*wa[r[1]],g:255&17*wa[r[2]],b:255&17*wa[r[3]],a:5===t?17*wa[r[4]]:255}:(7===t||9===t)&&(e={r:wa[r[1]]<<4|wa[r[2]],g:wa[r[3]]<<4|wa[r[4]],b:wa[r[5]]<<4|wa[r[6]],a:9===t?wa[r[7]]<<4|wa[r[8]]:255})),e}(t)||function(r){Ny||(Ny=function(){const r={},t=Object.keys(BL),e=Object.keys(FL);let n,s,l,u,h;for(n=0;n<t.length;n++){for(u=h=t[n],s=0;s<e.length;s++)l=e[s],h=h.replace(l,FL[l]);l=parseInt(BL[u],16),r[h]=[l>>16&255,l>>8&255,255&l]}return r}(),Ny.transparent=[0,0,0,0]);const t=Ny[r.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(t)||BK(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=VL(this._rgb);return t&&(t.a=TM(t.a)),t}set rgb(t){this._rgb=HL(t)}rgbString(){return this._valid?function(r){return r&&(r.a<255?`rgba(${r.r}, ${r.g}, ${r.b}, ${TM(r.a)})`:`rgb(${r.r}, ${r.g}, ${r.b})`)}(this._rgb):this._rgb}hexString(){return this._valid?function(r){var t=function(r){return Oy(r.r)&&Oy(r.g)&&Oy(r.b)&&Oy(r.a)}(r)?yK:CK;return r&&"#"+t(r.r)+t(r.g)+t(r.b)+(r.a<255?t(r.a):"")}(this._rgb):this._rgb}hslString(){return this._valid?function(r){if(!r)return;const t=wM(r),e=t[0],n=NL(t[1]),s=NL(t[2]);return r.a<255?`hsla(${e}, ${n}%, ${s}%, ${TM(r.a)})`:`hsl(${e}, ${n}%, ${s}%)`}(this._rgb):this._rgb}mix(t,e){const n=this;if(t){const s=n.rgb,l=t.rgb;let u;const h=e===u?.5:e,p=2*h-1,g=s.a-l.a,b=((p*g==-1?p:(p+g)/(1+p*g))+1)/2;u=1-b,s.r=255&b*s.r+u*l.r+.5,s.g=255&b*s.g+u*l.g+.5,s.b=255&b*s.b+u*l.b+.5,s.a=h*s.a+(1-h)*l.a,n.rgb=s}return n}clone(){return new Py(this.rgb)}alpha(t){return this._rgb.a=v_(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=m_(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ly(this._rgb,2,t),this}darken(t){return Ly(this._rgb,2,-t),this}saturate(t){return Ly(this._rgb,1,t),this}desaturate(t){return Ly(this._rgb,1,-t),this}rotate(t){return function(r,t){var e=wM(r);e[0]=PL(e[0]+t),e=MM(e),r.r=e[0],r.g=e[1],r.b=e[2]}(this._rgb,t),this}}function UL(r){return new Py(r)}const GL=r=>r instanceof CanvasGradient||r instanceof CanvasPattern;function WL(r){return GL(r)?r:UL(r)}function DM(r){return GL(r)?r:UL(r).saturate(.5).darken(.1).hexString()}const Vh=Object.create(null),RM=Object.create(null);function b_(r,t){if(!t)return r;const e=t.split(".");for(let n=0,s=e.length;n<s;++n){const l=e[n];r=r[l]||(r[l]=Object.create(null))}return r}function xM(r,t,e){return"string"==typeof t?d_(b_(r,t),e):d_(b_(r,""),t)}var fi=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,n)=>DM(n.backgroundColor),this.hoverBorderColor=(e,n)=>DM(n.borderColor),this.hoverColor=(e,n)=>DM(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.describe(t)}set(t,e){return xM(this,t,e)}get(t){return b_(this,t)}describe(t,e){return xM(RM,t,e)}override(t,e){return xM(Vh,t,e)}route(t,e,n,s){const l=b_(this,t),u=b_(this,n),h="_"+e;Object.defineProperties(l,{[h]:{value:l[e],writable:!0},[e]:{enumerable:!0,get(){const p=this[h],g=u[s];return pi(p)?Object.assign({},g,p):Zn(p,g)},set(p){this[h]=p}}})}}({_scriptable:r=>!r.startsWith("on"),_indexable:r=>"events"!==r,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Fy(r,t,e,n,s){let l=t[s];return l||(l=t[s]=r.measureText(s).width,e.push(s)),l>n&&(n=l),n}function UK(r,t,e,n){let s=(n=n||{}).data=n.data||{},l=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(s=n.data={},l=n.garbageCollect=[],n.font=t),r.save(),r.font=t;let u=0;const h=e.length;let p,g,b,C,w;for(p=0;p<h;p++)if(C=e[p],null!=C&&!0!==nr(C))u=Fy(r,s,l,u,C);else if(nr(C))for(g=0,b=C.length;g<b;g++)w=C[g],null!=w&&!nr(w)&&(u=Fy(r,s,l,u,w));r.restore();const x=l.length/2;if(x>e.length){for(p=0;p<x;p++)delete s[l[p]];l.splice(0,x)}return u}function Hh(r,t,e){const n=r.currentDevicePixelRatio,s=0!==e?Math.max(e/2,.5):0;return Math.round((t-s)*n)/n+s}function zL(r,t){(t=t||r.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,r.width,r.height),t.restore()}function By(r,t,e,n){let s,l,u,h,p;const g=t.pointStyle,b=t.rotation,C=t.radius;let w=(b||0)*fK;if(g&&"object"==typeof g&&(s=g.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return r.save(),r.translate(e,n),r.rotate(w),r.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),void r.restore();if(!(isNaN(C)||C<=0)){switch(r.beginPath(),g){default:r.arc(e,n,C,0,$i),r.closePath();break;case"triangle":r.moveTo(e+Math.sin(w)*C,n-Math.cos(w)*C),w+=RL,r.lineTo(e+Math.sin(w)*C,n-Math.cos(w)*C),w+=RL,r.lineTo(e+Math.sin(w)*C,n-Math.cos(w)*C),r.closePath();break;case"rectRounded":p=.516*C,h=C-p,l=Math.cos(w+p_)*h,u=Math.sin(w+p_)*h,r.arc(e-l,n-u,p,w-xr,w-Hr),r.arc(e+u,n-l,p,w-Hr,w),r.arc(e+l,n+u,p,w,w+Hr),r.arc(e-u,n+l,p,w+Hr,w+xr),r.closePath();break;case"rect":if(!b){h=Math.SQRT1_2*C,r.rect(e-h,n-h,2*h,2*h);break}w+=p_;case"rectRot":l=Math.cos(w)*C,u=Math.sin(w)*C,r.moveTo(e-l,n-u),r.lineTo(e+u,n-l),r.lineTo(e+l,n+u),r.lineTo(e-u,n+l),r.closePath();break;case"crossRot":w+=p_;case"cross":l=Math.cos(w)*C,u=Math.sin(w)*C,r.moveTo(e-l,n-u),r.lineTo(e+l,n+u),r.moveTo(e+u,n-l),r.lineTo(e-u,n+l);break;case"star":l=Math.cos(w)*C,u=Math.sin(w)*C,r.moveTo(e-l,n-u),r.lineTo(e+l,n+u),r.moveTo(e+u,n-l),r.lineTo(e-u,n+l),w+=p_,l=Math.cos(w)*C,u=Math.sin(w)*C,r.moveTo(e-l,n-u),r.lineTo(e+l,n+u),r.moveTo(e+u,n-l),r.lineTo(e-u,n+l);break;case"line":l=Math.cos(w)*C,u=Math.sin(w)*C,r.moveTo(e-l,n-u),r.lineTo(e+l,n+u);break;case"dash":r.moveTo(e,n),r.lineTo(e+Math.cos(w)*C,n+Math.sin(w)*C)}r.fill(),t.borderWidth>0&&r.stroke()}}function Uh(r,t,e){return e=e||.5,!t||r&&r.x>t.left-e&&r.x<t.right+e&&r.y>t.top-e&&r.y<t.bottom+e}function Vy(r,t){r.save(),r.beginPath(),r.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),r.clip()}function Hy(r){r.restore()}function GK(r,t,e,n,s){if(!t)return r.lineTo(e.x,e.y);if("middle"===s){const l=(t.x+e.x)/2;r.lineTo(l,t.y),r.lineTo(l,e.y)}else"after"===s!=!!n?r.lineTo(t.x,e.y):r.lineTo(e.x,t.y);r.lineTo(e.x,e.y)}function WK(r,t,e,n){if(!t)return r.lineTo(e.x,e.y);r.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function Gh(r,t,e,n,s,l={}){const u=nr(t)?t:[t],h=l.strokeWidth>0&&""!==l.strokeColor;let p,g;for(r.save(),r.font=s.string,function(r,t){t.translation&&r.translate(t.translation[0],t.translation[1]),xi(t.rotation)||r.rotate(t.rotation),t.color&&(r.fillStyle=t.color),t.textAlign&&(r.textAlign=t.textAlign),t.textBaseline&&(r.textBaseline=t.textBaseline)}(r,l),p=0;p<u.length;++p)g=u[p],h&&(l.strokeColor&&(r.strokeStyle=l.strokeColor),xi(l.strokeWidth)||(r.lineWidth=l.strokeWidth),r.strokeText(g,e,n,l.maxWidth)),r.fillText(g,e,n,l.maxWidth),jK(r,e,n,g,l),n+=s.lineHeight;r.restore()}function jK(r,t,e,n,s){if(s.strikethrough||s.underline){const l=r.measureText(n),u=t-l.actualBoundingBoxLeft,h=t+l.actualBoundingBoxRight,p=e-l.actualBoundingBoxAscent,g=e+l.actualBoundingBoxDescent,b=s.strikethrough?(p+g)/2:g;r.strokeStyle=r.fillStyle,r.beginPath(),r.lineWidth=s.decorationWidth||2,r.moveTo(u,b),r.lineTo(h,b),r.stroke()}}function Uy(r,t){const{x:e,y:n,w:s,h:l,radius:u}=t;r.arc(e+u.topLeft,n+u.topLeft,u.topLeft,-Hr,xr,!0),r.lineTo(e,n+l-u.bottomLeft),r.arc(e+u.bottomLeft,n+l-u.bottomLeft,u.bottomLeft,xr,Hr,!0),r.lineTo(e+s-u.bottomRight,n+l),r.arc(e+s-u.bottomRight,n+l-u.bottomRight,u.bottomRight,Hr,0,!0),r.lineTo(e+s,n+u.topRight),r.arc(e+s-u.topRight,n+u.topRight,u.topRight,0,-Hr,!0),r.lineTo(e+u.topLeft,n)}const XK=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),YK=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function $K(r,t){const e=(""+r).match(XK);if(!e||"normal"===e[1])return 1.2*t;switch(r=+e[2],e[3]){case"px":return r;case"%":r/=100}return t*r}const KK=r=>+r||0;function IM(r,t){const e={},n=pi(t),s=n?Object.keys(t):t,l=pi(r)?n?u=>Zn(r[u],r[t[u]]):u=>r[u]:()=>r;for(const u of s)e[u]=KK(l(u));return e}function jL(r){return IM(r,{top:"y",right:"x",bottom:"y",left:"x"})}function Yf(r){return IM(r,["topLeft","topRight","bottomLeft","bottomRight"])}function fs(r){const t=jL(r);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function so(r,t){let e=Zn((r=r||{}).size,(t=t||fi.font).size);"string"==typeof e&&(e=parseInt(e,10));let n=Zn(r.style,t.style);n&&!(""+n).match(YK)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const s={family:Zn(r.family,t.family),lineHeight:$K(Zn(r.lineHeight,t.lineHeight),e),size:e,style:n,weight:Zn(r.weight,t.weight),string:""};return s.string=function(r){return!r||xi(r.size)||xi(r.family)?null:(r.style?r.style+" ":"")+(r.weight?r.weight+" ":"")+r.size+"px "+r.family}(s),s}function y_(r,t,e,n){let l,u,h,s=!0;for(l=0,u=r.length;l<u;++l)if(h=r[l],void 0!==h&&(void 0!==t&&"function"==typeof h&&(h=h(t),s=!1),void 0!==e&&nr(h)&&(h=h[e%h.length],s=!1),void 0!==h))return n&&!s&&(n.cacheable=!1),h}function od(r,t){return Object.assign(Object.create(r),t)}function AM(r,t,e){e=e||(u=>r[u]<t);let l,n=r.length-1,s=0;for(;n-s>1;)l=s+n>>1,e(l)?s=l:n=l;return{lo:s,hi:n}}const Xc=(r,t,e)=>AM(r,e,n=>r[n][t]<e),QK=(r,t,e)=>AM(r,e,n=>r[n][t]>=e),XL=["push","pop","shift","splice","unshift"];function YL(r,t){const e=r._chartjs;if(!e)return;const n=e.listeners,s=n.indexOf(t);-1!==s&&n.splice(s,1),!(n.length>0)&&(XL.forEach(l=>{delete r[l]}),delete r._chartjs)}function $L(r){const t=new Set;let e,n;for(e=0,n=r.length;e<n;++e)t.add(r[e]);return t.size===n?r:Array.from(t)}function OM(r,t=[""],e=r,n,s=(()=>r[0])){Ea(n)||(n=qL("_fallback",r));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:r,_rootScopes:e,_fallback:n,_getTarget:s,override:u=>OM([u,...r],t,e,n)};return new Proxy(l,{deleteProperty:(u,h)=>(delete u[h],delete u._keys,delete r[0][h],!0),get:(u,h)=>JL(u,h,()=>function(r,t,e,n){let s;for(const l of t)if(s=qL(eJ(l,r),e),Ea(s))return kM(r,s)?NM(e,n,r,s):s}(h,t,r,u)),getOwnPropertyDescriptor:(u,h)=>Reflect.getOwnPropertyDescriptor(u._scopes[0],h),getPrototypeOf:()=>Reflect.getPrototypeOf(r[0]),has:(u,h)=>eP(u).includes(h),ownKeys:u=>eP(u),set:(u,h,p)=>((u._storage||(u._storage=s()))[h]=p,delete u[h],delete u._keys,!0)})}function $f(r,t,e,n){const s={_cacheable:!1,_proxy:r,_context:t,_subProxy:e,_stack:new Set,_descriptors:KL(r,n),setContext:l=>$f(r,l,e,n),override:l=>$f(r.override(l),t,e,n)};return new Proxy(s,{deleteProperty:(l,u)=>(delete l[u],delete r[u],!0),get:(l,u,h)=>JL(l,u,()=>function(r,t,e){const{_proxy:n,_context:s,_subProxy:l,_descriptors:u}=r;let h=n[t];return rd(h)&&u.isScriptable(t)&&(h=function(r,t,e,n){const{_proxy:s,_context:l,_subProxy:u,_stack:h}=e;if(h.has(r))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+r);return h.add(r),t=t(l,u||n),h.delete(r),kM(r,t)&&(t=NM(s._scopes,s,r,t)),t}(t,h,r,e)),nr(h)&&h.length&&(h=function(r,t,e,n){const{_proxy:s,_context:l,_subProxy:u,_descriptors:h}=e;if(Ea(l.index)&&n(r))t=t[l.index%t.length];else if(pi(t[0])){const p=t,g=s._scopes.filter(b=>b!==p);t=[];for(const b of p){const C=NM(g,s,r,b);t.push($f(C,l,u&&u[r],h))}}return t}(t,h,r,u.isIndexable)),kM(t,h)&&(h=$f(h,s,l&&l[t],u)),h}(l,u,h)),getOwnPropertyDescriptor:(l,u)=>l._descriptors.allKeys?Reflect.has(r,u)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(r,u),getPrototypeOf:()=>Reflect.getPrototypeOf(r),has:(l,u)=>Reflect.has(r,u),ownKeys:()=>Reflect.ownKeys(r),set:(l,u,h)=>(r[u]=h,delete l[u],!0)})}function KL(r,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=r;return{allKeys:s,scriptable:e,indexable:n,isScriptable:rd(e)?e:()=>e,isIndexable:rd(n)?n:()=>n}}const eJ=(r,t)=>r?r+bM(t):t,kM=(r,t)=>pi(t)&&"adapters"!==r&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function JL(r,t,e){if(Object.prototype.hasOwnProperty.call(r,t))return r[t];const n=e();return r[t]=n,n}function QL(r,t,e){return rd(r)?r(t,e):r}const rJ=(r,t)=>!0===r?t:"string"==typeof r?Bh(t,r):void 0;function oJ(r,t,e,n){for(const s of t){const l=rJ(e,s);if(l){r.add(l);const u=QL(l._fallback,e,l);if(Ea(u)&&u!==e&&u!==n)return u}else if(!1===l&&Ea(n)&&e!==n)return null}return!1}function NM(r,t,e,n){const s=t._rootScopes,l=QL(t._fallback,e,n),u=[...r,...s],h=new Set;h.add(n);let p=ZL(h,u,e,l||e);return!(null===p||Ea(l)&&l!==e&&(p=ZL(h,u,l,p),null===p))&&OM(Array.from(h),[""],s,l,()=>function(r,t,e){const n=r._getTarget();t in n||(n[t]={});const s=n[t];return nr(s)&&pi(e)?e:s}(t,e,n))}function ZL(r,t,e,n){for(;e;)e=oJ(r,t,e,n);return e}function qL(r,t){for(const e of t){if(!e)continue;const n=e[r];if(Ea(n))return n}}function eP(r){let t=r._keys;return t||(t=r._keys=function(r){const t=new Set;for(const e of r)for(const n of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}(r._scopes)),t}const cJ=Number.EPSILON||1e-14,Kf=(r,t)=>t<r.length&&!r[t].skip&&r[t],tP=r=>"x"===r?"y":"x";function uJ(r,t,e,n){const s=r.skip?t:r,l=t,u=e.skip?t:e,h=CM(l,s),p=CM(u,l);let g=h/(h+p),b=p/(h+p);g=isNaN(g)?0:g,b=isNaN(b)?0:b;const C=n*g,w=n*b;return{previous:{x:l.x-C*(u.x-s.x),y:l.y-C*(u.y-s.y)},next:{x:l.x+w*(u.x-s.x),y:l.y+w*(u.y-s.y)}}}function Gy(r,t,e){return Math.max(Math.min(r,e),t)}function gJ(r,t,e,n,s){let l,u,h,p;if(t.spanGaps&&(r=r.filter(g=>!g.skip)),"monotone"===t.cubicInterpolationMode)!function(r,t="x"){const e=tP(t),n=r.length,s=Array(n).fill(0),l=Array(n);let u,h,p,g=Kf(r,0);for(u=0;u<n;++u)if(h=p,p=g,g=Kf(r,u+1),p){if(g){const b=g[t]-p[t];s[u]=0!==b?(g[e]-p[e])/b:0}l[u]=h?g?Yl(s[u-1])!==Yl(s[u])?0:(s[u-1]+s[u])/2:s[u-1]:s[u]}(function(r,t,e){const n=r.length;let s,l,u,h,p,g=Kf(r,0);for(let b=0;b<n-1;++b)if(p=g,g=Kf(r,b+1),p&&g){if(f_(t[b],0,cJ)){e[b]=e[b+1]=0;continue}s=e[b]/t[b],l=e[b+1]/t[b],h=Math.pow(s,2)+Math.pow(l,2),!(h<=9)&&(u=3/Math.sqrt(h),e[b]=s*u*t[b],e[b+1]=l*u*t[b])}})(r,s,l),function(r,t,e="x"){const n=tP(e),s=r.length;let l,u,h,p=Kf(r,0);for(let g=0;g<s;++g){if(u=h,h=p,p=Kf(r,g+1),!h)continue;const b=h[e],C=h[n];u&&(l=(b-u[e])/3,h[`cp1${e}`]=b-l,h[`cp1${n}`]=C-l*t[g]),p&&(l=(p[e]-b)/3,h[`cp2${e}`]=b+l,h[`cp2${n}`]=C+l*t[g])}}(r,l,t)}(r,s);else{let g=n?r[r.length-1]:r[0];for(l=0,u=r.length;l<u;++l)h=r[l],p=uJ(g,h,r[Math.min(l+1,u-(n?0:1))%u],t.tension),h.cp1x=p.previous.x,h.cp1y=p.previous.y,h.cp2x=p.next.x,h.cp2y=p.next.y,g=h}t.capBezierPoints&&function(r,t){let e,n,s,l,u,h=Uh(r[0],t);for(e=0,n=r.length;e<n;++e)u=l,l=h,h=e<n-1&&Uh(r[e+1],t),l&&(s=r[e],u&&(s.cp1x=Gy(s.cp1x,t.left,t.right),s.cp1y=Gy(s.cp1y,t.top,t.bottom)),h&&(s.cp2x=Gy(s.cp2x,t.left,t.right),s.cp2y=Gy(s.cp2y,t.top,t.bottom)))}(r,e)}function nP(){return"undefined"!=typeof window&&"undefined"!=typeof document}function LM(r){let t=r.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Wy(r,t,e){let n;return"string"==typeof r?(n=parseInt(r,10),-1!==r.indexOf("%")&&(n=n/100*t.parentNode[e])):n=r,n}const zy=r=>window.getComputedStyle(r,null),_J=["top","right","bottom","left"];function Wh(r,t,e){const n={};e=e?"-"+e:"";for(let s=0;s<4;s++){const l=_J[s];n[l]=parseFloat(r[t+"-"+l+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function iP(r,t){const{canvas:e,currentDevicePixelRatio:n}=t,s=zy(e),l="border-box"===s.boxSizing,u=Wh(s,"padding"),h=Wh(s,"border","width"),{x:p,y:g,box:b}=function(r,t){const e=r.native||r,n=e.touches,s=n&&n.length?n[0]:e,{offsetX:l,offsetY:u}=s;let p,g,h=!1;if(((r,t,e)=>(r>0||t>0)&&(!e||!e.shadowRoot))(l,u,e.target))p=l,g=u;else{const b=t.getBoundingClientRect();p=s.clientX-b.left,g=s.clientY-b.top,h=!0}return{x:p,y:g,box:h}}(r,e),C=u.left+(b&&h.left),w=u.top+(b&&h.top);let{width:x,height:N}=t;return l&&(x-=u.width+h.width,N-=u.height+h.height),{x:Math.round((p-C)/x*e.width/n),y:Math.round((g-w)/N*e.height/n)}}const PM=r=>Math.round(10*r)/10;function rP(r,t,e){const n=t||1,s=Math.floor(r.height*n),l=Math.floor(r.width*n);r.height=s/n,r.width=l/n;const u=r.canvas;return u.style&&(e||!u.style.height&&!u.style.width)&&(u.style.height=`${r.height}px`,u.style.width=`${r.width}px`),(r.currentDevicePixelRatio!==n||u.height!==s||u.width!==l)&&(r.currentDevicePixelRatio=n,u.height=s,u.width=l,r.ctx.setTransform(n,0,0,n,0,0),!0)}const EJ=function(){let r=!1;try{const t={get passive(){return r=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){}return r}();function oP(r,t){const e=function(r,t){return zy(r).getPropertyValue(t)}(r,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function zh(r,t,e,n){return{x:r.x+e*(t.x-r.x),y:r.y+e*(t.y-r.y)}}function TJ(r,t,e,n){return{x:r.x+e*(t.x-r.x),y:"middle"===n?e<.5?r.y:t.y:"after"===n?e<1?r.y:t.y:e>0?t.y:r.y}}function wJ(r,t,e,n){const s={x:r.cp2x,y:r.cp2y},l={x:t.cp1x,y:t.cp1y},u=zh(r,s,e),h=zh(s,l,e),p=zh(l,t,e),g=zh(u,h,e),b=zh(h,p,e);return zh(g,b,e)}const sP=new Map;function C_(r,t,e){return function(r,t){t=t||{};const e=r+JSON.stringify(t);let n=sP.get(e);return n||(n=new Intl.NumberFormat(r,t),sP.set(e,n)),n}(t,e).format(r)}function Jf(r,t,e){return r?function(r,t){return{x:e=>r+r+t-e,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,n)=>e-n,leftForLtr:(e,n)=>e-n}}(t,e):{x:r=>r,setWidth(r){},textAlign:r=>r,xPlus:(r,t)=>r+t,leftForLtr:(r,t)=>r}}function aP(r,t){let e,n;("ltr"===t||"rtl"===t)&&(e=r.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),r.prevTextDirection=n)}function lP(r,t){void 0!==t&&(delete r.prevTextDirection,r.canvas.style.setProperty("direction",t[0],t[1]))}function cP(r){return"angle"===r?{between:Iy,compare:vK,normalize:dl}:{between:jc,compare:(t,e)=>t-e,normalize:t=>t}}function uP({start:r,end:t,count:e,loop:n,style:s}){return{start:r%e,end:t%e,loop:n&&(t-r+1)%e==0,style:s}}function dP(r,t,e){if(!e)return[r];const{property:n,start:s,end:l}=e,u=t.length,{compare:h,between:p,normalize:g}=cP(n),{start:b,end:C,loop:w,style:x}=function(r,t,e){const{property:n,start:s,end:l}=e,{between:u,normalize:h}=cP(n),p=t.length;let w,x,{start:g,end:b,loop:C}=r;if(C){for(g+=p,b+=p,w=0,x=p;w<x&&u(h(t[g%p][n]),s,l);++w)g--,b--;g%=p,b%=p}return b<g&&(b+=p),{start:g,end:b,loop:C,style:r.style}}(r,t,e),N=[];let $,te,xe,B=!1,V=null;for(let St=b,At=b;St<=C;++St)te=t[St%u],!te.skip&&($=g(te[n]),$!==xe&&(B=p($,s,l),null===V&&(B||p(s,xe,$)&&0!==h(s,xe))&&(V=0===h($,s)?St:At),null!==V&&(!B||0===h(l,$)||p(l,xe,$))&&(N.push(uP({start:V,end:St,loop:w,count:u,style:x})),V=null),At=St,xe=$));return null!==V&&N.push(uP({start:V,end:C,loop:w,count:u,style:x})),N}function hP(r,t){const e=[],n=r.segments;for(let s=0;s<n.length;s++){const l=dP(n[s],r.points,t);l.length&&e.push(...l)}return e}function fP(r){return{backgroundColor:r.backgroundColor,borderCapStyle:r.borderCapStyle,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderJoinStyle:r.borderJoinStyle,borderWidth:r.borderWidth,borderColor:r.borderColor}}function kJ(r,t){return t&&JSON.stringify(r)!==JSON.stringify(t)}var Yc=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,s){const u=e.duration;e.listeners[s].forEach(h=>h({chart:t,initial:e.initial,numSteps:u,currentStep:Math.min(n-e.start,u)}))}_refresh(){this._request||(this._running=!0,this._request=EL.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const l=n.items;let p,u=l.length-1,h=!1;for(;u>=0;--u)p=l[u],p._active?(p._total>n.duration&&(n.duration=p._total),p.tick(t),h=!0):(l[u]=l[l.length-1],l.pop());h&&(s.draw(),this._notify(s,n,t,"progress")),l.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),e+=l.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);!e||(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const gP="transparent",LJ={boolean:(r,t,e)=>e>.5?t:r,color(r,t,e){const n=WL(r||gP),s=n.valid&&WL(t||gP);return s&&s.valid?s.mix(n,e).hexString():t},number:(r,t,e)=>r+(t-r)*e};class PJ{constructor(t,e,n,s){const l=e[n];s=y_([t.to,s,l,t.from]);const u=y_([t.from,l,s]);this._active=!0,this._fn=t.fn||LJ[t.type||typeof u],this._easing=g_[t.easing]||g_.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=u,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const s=this._target[this._prop],l=n-this._start,u=this._duration-l;this._start=n,this._duration=Math.floor(Math.max(u,t.duration)),this._total+=l,this._loop=!!t.loop,this._to=y_([t.to,e,s,t.from]),this._from=y_([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,s=this._prop,l=this._from,u=this._loop,h=this._to;let p;if(this._active=l!==h&&(u||e<n),!this._active)return this._target[s]=h,void this._notify(!0);e<0?this._target[s]=l:(p=e/n%2,p=u&&p>1?2-p:p,p=this._easing(Math.min(1,Math.max(0,p))),this._target[s]=this._fn(l,h,p))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][e]()}}fi.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const VJ=Object.keys(fi.animation);fi.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:r=>"onProgress"!==r&&"onComplete"!==r&&"fn"!==r}),fi.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),fi.describe("animations",{_fallback:"animation"}),fi.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:r=>0|r}}}});class mP{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!pi(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const s=t[n];if(!pi(s))return;const l={};for(const u of VJ)l[u]=s[u];(nr(s.properties)&&s.properties||[n]).forEach(u=>{(u===n||!e.has(u))&&e.set(u,l)})})}_animateOptions(t,e){const n=e.options,s=function(r,t){if(!t)return;let e=r.options;if(e)return e.$shared&&(r.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;r.options=t}(t,n);if(!s)return[];const l=this._createAnimations(s,n);return n.$shared&&function(r,t){const e=[],n=Object.keys(t);for(let s=0;s<n.length;s++){const l=r[n[s]];l&&l.active()&&e.push(l.wait())}return Promise.all(e)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),l}_createAnimations(t,e){const n=this._properties,s=[],l=t.$animations||(t.$animations={}),u=Object.keys(e),h=Date.now();let p;for(p=u.length-1;p>=0;--p){const g=u[p];if("$"===g.charAt(0))continue;if("options"===g){s.push(...this._animateOptions(t,e));continue}const b=e[g];let C=l[g];const w=n.get(g);if(C){if(w&&C.active()){C.update(w,b,h);continue}C.cancel()}w&&w.duration?(l[g]=C=new PJ(w,t,g,b),s.push(C)):t[g]=b}return s}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Yc.add(this._chart,n),!0):void 0}}function _P(r,t){const e=r&&r.options||{},n=e.reverse,s=void 0===e.min?t:0,l=void 0===e.max?t:0;return{start:n?l:s,end:n?s:l}}function vP(r,t){const e=[],n=r._getSortedDatasetMetas(t);let s,l;for(s=0,l=n.length;s<l;++s)e.push(n[s].index);return e}function bP(r,t,e,n={}){const s=r.keys,l="single"===n.mode;let u,h,p,g;if(null!==t){for(u=0,h=s.length;u<h;++u){if(p=+s[u],p===e){if(n.all)continue;break}g=r.values[p],Vr(g)&&(l||0===t||Yl(t)===Yl(g))&&(t+=g)}return t}}function yP(r,t){const e=r&&r.options.stacked;return e||void 0===e&&void 0!==t.stack}function YJ(r,t,e){const n=r[t]||(r[t]={});return n[e]||(n[e]={})}function CP(r,t,e,n){for(const s of t.getMatchingVisibleMetas(n).reverse()){const l=r[s.index];if(e&&l>0||!e&&l<0)return s.index}return null}function EP(r,t){const{chart:e,_cachedMeta:n}=r,s=e._stacks||(e._stacks={}),{iScale:l,vScale:u,index:h}=n,p=l.axis,g=u.axis,b=function(r,t,e){return`${r.id}.${t.id}.${e.stack||e.type}`}(l,u,n),C=t.length;let w;for(let x=0;x<C;++x){const N=t[x],{[p]:B,[g]:V}=N;w=(N._stacks||(N._stacks={}))[g]=YJ(s,b,B),w[h]=V,w._top=CP(w,u,!0,n.type),w._bottom=CP(w,u,!1,n.type)}}function FM(r,t){const e=r.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function E_(r,t){const e=r.controller.index,n=r.vScale&&r.vScale.axis;if(n){t=t||r._parsed;for(const s of t){const l=s._stacks;if(!l||void 0===l[n]||void 0===l[n][e])return;delete l[n][e]}}}const BM=r=>"reset"===r||"none"===r,TP=(r,t)=>t?r:Object.assign({},r);let $c=(()=>{class r{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=yP(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&E_(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),l=(w,x,N,B)=>"x"===w?x:"r"===w?B:N,u=n.xAxisID=Zn(s.xAxisID,FM(e,"x")),h=n.yAxisID=Zn(s.yAxisID,FM(e,"y")),p=n.rAxisID=Zn(s.rAxisID,FM(e,"r")),g=n.indexAxis,b=n.iAxisID=l(g,u,h,p),C=n.vAxisID=l(g,h,u,p);n.xScale=this.getScaleForId(u),n.yScale=this.getScaleForId(h),n.rScale=this.getScaleForId(p),n.iScale=this.getScaleForId(b),n.vScale=this.getScaleForId(C)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&YL(this._data,this),e._stacked&&E_(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(pi(n))this._data=function(r){const t=Object.keys(r),e=new Array(t.length);let n,s,l;for(n=0,s=t.length;n<s;++n)l=t[n],e[n]={x:l,y:r[l]};return e}(n);else if(s!==n){if(s){YL(s,this);const l=this._cachedMeta;E_(l),l._parsed=[]}n&&Object.isExtensible(n)&&function(r,t){r._chartjs?r._chartjs.listeners.push(t):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),XL.forEach(e=>{const n="_onData"+bM(e),s=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(...l){const u=s.apply(this,l);return r._chartjs.listeners.forEach(h=>{"function"==typeof h[n]&&h[n](...l)}),u}})}))}(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let l=!1;this._dataCheck();const u=n._stacked;n._stacked=yP(n.vScale,n),n.stack!==s.stack&&(l=!0,E_(n),n.stack=s.stack),this._resyncElements(e),(l||u!==n._stacked)&&EP(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:l}=this,{iScale:u,_stacked:h}=s,p=u.axis;let C,w,x,g=0===e&&n===l.length||s._sorted,b=e>0&&s._parsed[e-1];if(!1===this._parsing)s._parsed=l,s._sorted=!0,x=l;else{x=nr(l[e])?this.parseArrayData(s,l,e,n):pi(l[e])?this.parseObjectData(s,l,e,n):this.parsePrimitiveData(s,l,e,n);const N=()=>null===w[p]||b&&w[p]<b[p];for(C=0;C<n;++C)s._parsed[C+e]=w=x[C],g&&(N()&&(g=!1),b=w);s._sorted=g}h&&EP(this,x)}parsePrimitiveData(e,n,s,l){const{iScale:u,vScale:h}=e,p=u.axis,g=h.axis,b=u.getLabels(),C=u===h,w=new Array(l);let x,N,B;for(x=0,N=l;x<N;++x)B=x+s,w[x]={[p]:C||u.parse(b[B],B),[g]:h.parse(n[B],B)};return w}parseArrayData(e,n,s,l){const{xScale:u,yScale:h}=e,p=new Array(l);let g,b,C,w;for(g=0,b=l;g<b;++g)C=g+s,w=n[C],p[g]={x:u.parse(w[0],C),y:h.parse(w[1],C)};return p}parseObjectData(e,n,s,l){const{xScale:u,yScale:h}=e,{xAxisKey:p="x",yAxisKey:g="y"}=this._parsing,b=new Array(l);let C,w,x,N;for(C=0,w=l;C<w;++C)x=C+s,N=n[x],b[C]={x:u.parse(Bh(N,p),x),y:h.parse(Bh(N,g),x)};return b}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const u=this._cachedMeta,h=n[e.axis];return bP({keys:vP(this.chart,!0),values:n._stacks[e.axis]},h,u.index,{mode:s})}updateRangeFromParsed(e,n,s,l){const u=s[n.axis];let h=null===u?NaN:u;const p=l&&s._stacks[n.axis];l&&p&&(l.values=p,h=bP(l,u,this._cachedMeta.index)),e.min=Math.min(e.min,h),e.max=Math.max(e.max,h)}getMinMax(e,n){const s=this._cachedMeta,l=s._parsed,u=s._sorted&&e===s.iScale,h=l.length,p=this._getOtherScale(e),g=((r,t,e)=>r&&!t.hidden&&t._stacked&&{keys:vP(this.chart,!0),values:null})(n,s),b={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:C,max:w}=function(r){const{min:t,max:e,minDefined:n,maxDefined:s}=r.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}(p);let x,N;function B(){N=l[x];const V=N[p.axis];return!Vr(N[e.axis])||C>V||w<V}for(x=0;x<h&&(B()||(this.updateRangeFromParsed(b,e,N,g),!u));++x);if(u)for(x=h-1;x>=0;--x)if(!B()){this.updateRangeFromParsed(b,e,N,g);break}return b}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let l,u,h;for(l=0,u=n.length;l<u;++l)h=n[l][e.axis],Vr(h)&&s.push(h);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,l=n.vScale,u=this.getParsed(e);return{label:s?""+s.getLabelForValue(u[s.axis]):"",value:l?""+l.getLabelForValue(u[l.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=function(r){let t,e,n,s;return pi(r)?(t=r.top,e=r.right,n=r.bottom,s=r.left):t=e=n=s=r,{top:t,right:e,bottom:n,left:s,disabled:!1===r}}(Zn(this.options.clip,function(r,t,e){if(!1===e)return!1;const n=_P(r,e),s=_P(t,e);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this._cachedMeta,l=s.data||[],u=this.chart.chartArea,h=[],p=this._drawStart||0,g=this._drawCount||l.length-p;let b;for(s.dataset&&s.dataset.draw(e,u,p,g),b=p;b<p+g;++b){const C=l[b];C.hidden||(C.active?h.push(C):C.draw(e,u))}for(b=0;b<h.length;++b)h[b].draw(e,u)}getStyle(e,n){const s=n?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const l=this.getDataset();let u;if(e>=0&&e<this._cachedMeta.data.length){const h=this._cachedMeta.data[e];u=h.$context||(h.$context=function(r,t,e){return od(r,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}(this.getContext(),e,h)),u.parsed=this.getParsed(e),u.raw=l.data[e],u.index=u.dataIndex=e}else u=this.$context||(this.$context=function(r,t){return od(r,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),u.dataset=l,u.index=u.datasetIndex=this.index;return u.active=!!n,u.mode=s,u}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const l="active"===n,u=this._cachedDataOpts,h=e+"-"+n,p=u[h],g=this.enableOptionSharing&&Ea(s);if(p)return TP(p,g);const b=this.chart.config,C=b.datasetElementScopeKeys(this._type,e),w=l?[`${e}Hover`,"hover",e,""]:[e,""],x=b.getOptionScopes(this.getDataset(),C),N=Object.keys(fi.elements[e]),V=b.resolveNamedOptions(x,N,()=>this.getContext(s,l),w);return V.$shared&&(V.$shared=g,u[h]=Object.freeze(TP(V,g))),V}_resolveAnimations(e,n,s){const l=this.chart,u=this._cachedDataOpts,h=`animation-${n}`,p=u[h];if(p)return p;let g;if(!1!==l.options.animation){const C=this.chart.config,w=C.datasetAnimationScopeKeys(this._type,n),x=C.getOptionScopes(this.getDataset(),w);g=C.createResolver(x,this.getContext(e,s,n))}const b=new mP(l,g&&g.animations);return g&&g._cacheable&&(u[h]=Object.freeze(b)),b}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||BM(e)||this.chart._animationsDisabled}updateElement(e,n,s,l){BM(l)?Object.assign(e,s):this._resolveAnimations(n,l).update(e,s)}updateSharedOptions(e,n,s){e&&!BM(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,l){e.active=l;const u=this.getStyle(n,l);this._resolveAnimations(n,s,l).update(e,{options:!l&&this.getSharedOptions(u)||u})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[p,g,b]of this._syncList)this[p](g,b);this._syncList=[];const l=s.length,u=n.length,h=Math.min(u,l);h&&this.parse(0,h),u>l?this._insertElements(l,u-l,e):u<l&&this._removeElements(u,l-u)}_insertElements(e,n,s=!0){const l=this._cachedMeta,u=l.data,h=e+n;let p;const g=b=>{for(b.length+=n,p=b.length-1;p>=h;p--)b[p]=b[p-n]};for(g(u),p=e;p<h;++p)u[p]=new this.dataElementType;this._parsing&&g(l._parsed),this.parse(e,n),s&&this.updateElements(u,e,n,"reset")}updateElements(e,n,s,l){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const l=s._parsed.splice(e,n);s._stacked&&E_(s,l)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,l]=e;this[n](s,l)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return r.defaults={},r})();function ZJ(r){const t=r.iScale,e=function(r,t){if(!r._cache.$bar){const e=r.getMatchingVisibleMetas(t);let n=[];for(let s=0,l=e.length;s<l;s++)n=n.concat(e[s].controller.getAllParsedValues(r));r._cache.$bar=$L(n.sort((s,l)=>s-l))}return r._cache.$bar}(t,r.type);let s,l,u,h,n=t._length;const p=()=>{32767===u||-32768===u||(Ea(h)&&(n=Math.min(n,Math.abs(u-h)||n)),h=u)};for(s=0,l=e.length;s<l;++s)u=t.getPixelForValue(e[s]),p();for(h=void 0,s=0,l=t.ticks.length;s<l;++s)u=t.getPixelForTick(s),p();return n}function wP(r,t,e,n){return nr(r)?function(r,t,e,n){const s=e.parse(r[0],n),l=e.parse(r[1],n),u=Math.min(s,l),h=Math.max(s,l);let p=u,g=h;Math.abs(u)>Math.abs(h)&&(p=h,g=u),t[e.axis]=g,t._custom={barStart:p,barEnd:g,start:s,end:l,min:u,max:h}}(r,t,e,n):t[e.axis]=e.parse(r,n),t}function SP(r,t,e,n){const s=r.iScale,l=r.vScale,u=s.getLabels(),h=s===l,p=[];let g,b,C,w;for(g=e,b=e+n;g<b;++g)w=t[g],C={},C[s.axis]=h||s.parse(u[g],g),p.push(wP(w,C,l,g));return p}function VM(r){return r&&void 0!==r.barStart&&void 0!==r.barEnd}function rQ(r,t,e,n){let s=t.borderSkipped;const l={};if(!s)return void(r.borderSkipped=l);const{start:u,end:h,reverse:p,top:g,bottom:b}=function(r){let t,e,n,s,l;return r.horizontal?(t=r.base>r.x,e="left",n="right"):(t=r.base<r.y,e="bottom",n="top"),t?(s="end",l="start"):(s="start",l="end"),{start:e,end:n,reverse:t,top:s,bottom:l}}(r);"middle"===s&&e&&(r.enableBorderRadius=!0,(e._top||0)===n?s=g:(e._bottom||0)===n?s=b:(l[MP(b,u,h,p)]=!0,s=g)),l[MP(s,u,h,p)]=!0,r.borderSkipped=l}function MP(r,t,e,n){return r=n?DP(r=function(r,t,e){return r===t?e:r===e?t:r}(r,t,e),e,t):DP(r,t,e)}function DP(r,t,e){return"start"===r?t:"end"===r?e:r}function sQ(r,{inflateAmount:t},e){r.inflateAmount="auto"===t?1===e?.33:0:t}$c.prototype.datasetElementType=null,$c.prototype.dataElementType=null;let aQ=(()=>{class r extends $c{parsePrimitiveData(e,n,s,l){return SP(e,n,s,l)}parseArrayData(e,n,s,l){return SP(e,n,s,l)}parseObjectData(e,n,s,l){const{iScale:u,vScale:h}=e,{xAxisKey:p="x",yAxisKey:g="y"}=this._parsing,b="x"===u.axis?p:g,C="x"===h.axis?p:g,w=[];let x,N,B,V;for(x=s,N=s+l;x<N;++x)V=n[x],B={},B[u.axis]=u.parse(Bh(V,b),x),w.push(wP(Bh(V,C),B,h,x));return w}updateRangeFromParsed(e,n,s,l){super.updateRangeFromParsed(e,n,s,l);const u=s._custom;u&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,u.min),e.max=Math.max(e.max,u.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:l}=n,u=this.getParsed(e),h=u._custom,p=VM(h)?"["+h.start+", "+h.end+"]":""+l.getLabelForValue(u[l.axis]);return{label:""+s.getLabelForValue(u[s.axis]),value:p}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,l){const u="reset"===l,{index:h,_cachedMeta:{vScale:p}}=this,g=p.getBasePixel(),b=p.isHorizontal(),C=this._getRuler(),w=this.resolveDataElementOptions(n,l),x=this.getSharedOptions(w),N=this.includeOptions(l,x);this.updateSharedOptions(x,l,w);for(let B=n;B<n+s;B++){const V=this.getParsed(B),$=u||xi(V[p.axis])?{base:g,head:g}:this._calculateBarValuePixels(B),te=this._calculateBarIndexPixels(B,C),xe=(V._stacks||{})[p.axis],Re={horizontal:b,base:$.base,enableBorderRadius:!xe||VM(V._custom)||h===xe._top||h===xe._bottom,x:b?$.head:te.center,y:b?te.center:$.head,height:b?te.size:Math.abs($.size),width:b?Math.abs($.size):te.size};N&&(Re.options=x||this.resolveDataElementOptions(B,e[B].active?"active":l));const Pe=Re.options||e[B].options;rQ(Re,Pe,xe,h),sQ(Re,Pe,C.ratio),this.updateElement(e[B],B,Re,l)}}_getStacks(e,n){const l=this._cachedMeta.iScale,u=l.getMatchingVisibleMetas(this._type),h=l.options.stacked,p=u.length,g=[];let b,C;for(b=0;b<p;++b)if(C=u[b],C.controller.options.grouped){if(void 0!==n){const w=C.controller.getParsed(n)[C.controller._cachedMeta.vScale.axis];if(xi(w)||isNaN(w))continue}if((!1===h||-1===g.indexOf(C.stack)||void 0===h&&void 0===C.stack)&&g.push(C.stack),C.index===e)break}return g.length||g.push(void 0),g}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,s){const l=this._getStacks(e,s),u=void 0!==n?l.indexOf(n):-1;return-1===u?l.length-1:u}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,l=[];let u,h;for(u=0,h=n.data.length;u<h;++u)l.push(s.getPixelForValue(this.getParsed(u)[s.axis],u));const p=e.barThickness;return{min:p||ZJ(n),pixels:l,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:p?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s},options:{base:l,minBarLength:u}}=this,h=l||0,p=this.getParsed(e),g=p._custom,b=VM(g);let N,B,C=p[n.axis],w=0,x=s?this.applyStack(n,p,s):C;x!==C&&(w=x-C,x=C),b&&(C=g.barStart,x=g.barEnd-g.barStart,0!==C&&Yl(C)!==Yl(g.barEnd)&&(w=0),w+=C);const V=xi(l)||b?w:l;let $=n.getPixelForValue(V);if(N=this.chart.getDataVisibility(e)?n.getPixelForValue(w+x):$,B=N-$,Math.abs(B)<u&&(B=function(r,t,e){return 0!==r?Yl(r):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}(B,n,h)*u,C===h&&($-=B/2),N=$+B),$===n.getPixelForValue(h)){const te=Yl(B)*n.getLineWidthForValue(h)/2;$+=te,B-=te}return{size:B,base:$,head:N,center:N+B/2}}_calculateBarIndexPixels(e,n){const s=n.scale,l=this.options,u=l.skipNull,h=Zn(l.maxBarThickness,1/0);let p,g;if(n.grouped){const b=u?this._getStackCount(e):n.stackCount,C="flex"===l.barThickness?function(r,t,e,n){const s=t.pixels,l=s[r];let u=r>0?s[r-1]:null,h=r<s.length-1?s[r+1]:null;const p=e.categoryPercentage;null===u&&(u=l-(null===h?t.end-t.start:h-l)),null===h&&(h=l+l-u);const g=l-(l-Math.min(u,h))/2*p;return{chunk:Math.abs(h-u)/2*p/n,ratio:e.barPercentage,start:g}}(e,n,l,b):function(r,t,e,n){const s=e.barThickness;let l,u;return xi(s)?(l=t.min*e.categoryPercentage,u=e.barPercentage):(l=s*n,u=1),{chunk:l/n,ratio:u,start:t.pixels[r]-l/2}}(e,n,l,b),w=this._getStackIndex(this.index,this._cachedMeta.stack,u?e:void 0);p=C.start+C.chunk*w+C.chunk/2,g=Math.min(h,C.chunk*C.ratio)}else p=s.getPixelForValue(this.getParsed(e)[s.axis],e),g=Math.min(h,n.min*n.ratio);return{base:p-g/2,head:p+g/2,center:p,size:g}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,l=s.length;let u=0;for(;u<l;++u)null!==this.getParsed(u)[n.axis]&&s[u].draw(this._ctx)}}return r.id="bar",r.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},r.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},r})(),lQ=(()=>{class r extends $c{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,s,l){const u=super.parsePrimitiveData(e,n,s,l);for(let h=0;h<u.length;h++)u[h]._custom=this.resolveDataElementOptions(h+s).radius;return u}parseArrayData(e,n,s,l){const u=super.parseArrayData(e,n,s,l);for(let h=0;h<u.length;h++)u[h]._custom=Zn(n[s+h][2],this.resolveDataElementOptions(h+s).radius);return u}parseObjectData(e,n,s,l){const u=super.parseObjectData(e,n,s,l);for(let h=0;h<u.length;h++){const p=n[s+h];u[h]._custom=Zn(p&&p.r&&+p.r,this.resolveDataElementOptions(h+s).radius)}return u}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let s=e.length-1;s>=0;--s)n=Math.max(n,e[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,{xScale:s,yScale:l}=n,u=this.getParsed(e),h=s.getLabelForValue(u.x),p=l.getLabelForValue(u.y),g=u._custom;return{label:n.label,value:"("+h+", "+p+(g?", "+g:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,s,l){const u="reset"===l,{iScale:h,vScale:p}=this._cachedMeta,g=this.resolveDataElementOptions(n,l),b=this.getSharedOptions(g),C=this.includeOptions(l,b),w=h.axis,x=p.axis;for(let N=n;N<n+s;N++){const B=e[N],V=!u&&this.getParsed(N),$={},te=$[w]=u?h.getPixelForDecimal(.5):h.getPixelForValue(V[w]),xe=$[x]=u?p.getBasePixel():p.getPixelForValue(V[x]);$.skip=isNaN(te)||isNaN(xe),C&&($.options=this.resolveDataElementOptions(N,B.active?"active":l),u&&($.options.radius=0)),this.updateElement(B,N,$,l)}this.updateSharedOptions(b,l,g)}resolveDataElementOptions(e,n){const s=this.getParsed(e);let l=super.resolveDataElementOptions(e,n);l.$shared&&(l=Object.assign({},l,{$shared:!1}));const u=l.radius;return"active"!==n&&(l.radius=0),l.radius+=Zn(s&&s._custom,u),l}}return r.id="bubble",r.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},r.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},r})(),RP=(()=>{class r extends $c{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,l=this._cachedMeta;if(!1===this._parsing)l._parsed=s;else{let h,p,u=g=>+s[g];if(pi(s[e])){const{key:g="value"}=this._parsing;u=b=>+Bh(s[b],g)}for(h=e,p=e+n;h<p;++h)l._parsed[h]=u(h)}}_getRotation(){return ul(this.options.rotation-90)}_getCircumference(){return ul(this.options.circumference)}_getRotationExtents(){let e=$i,n=-$i;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)){const l=this.chart.getDatasetMeta(s).controller,u=l._getRotation(),h=l._getCircumference();e=Math.min(e,u),n=Math.max(n,u+h)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,l=this._cachedMeta,u=l.data,h=this.getMaxBorderWidth()+this.getMaxOffset(u)+this.options.spacing,p=Math.max((Math.min(s.width,s.height)-h)/2,0),g=Math.min(((r,t)=>"string"==typeof r&&r.endsWith("%")?parseFloat(r)/100:r/t)(this.options.cutout,p),1),b=this._getRingWeight(this.index),{circumference:C,rotation:w}=this._getRotationExtents(),{ratioX:x,ratioY:N,offsetX:B,offsetY:V}=function(r,t,e){let n=1,s=1,l=0,u=0;if(t<$i){const h=r,p=h+t,g=Math.cos(h),b=Math.sin(h),C=Math.cos(p),w=Math.sin(p),x=(xe,Re,Pe)=>Iy(xe,h,p,!0)?1:Math.max(Re,Re*e,Pe,Pe*e),N=(xe,Re,Pe)=>Iy(xe,h,p,!0)?-1:Math.min(Re,Re*e,Pe,Pe*e),B=x(0,g,C),V=x(Hr,b,w),$=N(xr,g,C),te=N(xr+Hr,b,w);n=(B-$)/2,s=(V-te)/2,l=-(B+$)/2,u=-(V+te)/2}return{ratioX:n,ratioY:s,offsetX:l,offsetY:u}}(w,C,g),xe=Math.max(Math.min((s.width-h)/x,(s.height-h)/N)/2,0),Re=wL(this.options.radius,xe),nt=(Re-Math.max(Re*g,0))/this._getVisibleDatasetWeightTotal();this.offsetX=B*Re,this.offsetY=V*Re,l.total=this.calculateTotal(),this.outerRadius=Re-nt*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-nt*b,0),this.updateElements(u,0,u.length,e)}_circumference(e,n){const s=this.options,l=this._cachedMeta,u=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||null===l._parsed[e]||l.data[e].hidden?0:this.calculateCircumference(l._parsed[e]*u/$i)}updateElements(e,n,s,l){const u="reset"===l,h=this.chart,p=h.chartArea,C=(p.left+p.right)/2,w=(p.top+p.bottom)/2,x=u&&h.options.animation.animateScale,N=x?0:this.innerRadius,B=x?0:this.outerRadius,V=this.resolveDataElementOptions(n,l),$=this.getSharedOptions(V),te=this.includeOptions(l,$);let Re,xe=this._getRotation();for(Re=0;Re<n;++Re)xe+=this._circumference(Re,u);for(Re=n;Re<n+s;++Re){const Pe=this._circumference(Re,u),nt=e[Re],ct={x:C+this.offsetX,y:w+this.offsetY,startAngle:xe,endAngle:xe+Pe,circumference:Pe,outerRadius:B,innerRadius:N};te&&(ct.options=$||this.resolveDataElementOptions(Re,nt.active?"active":l)),xe+=Pe,this.updateElement(nt,Re,ct,l)}this.updateSharedOptions($,l,V)}calculateTotal(){const e=this._cachedMeta,n=e.data;let l,s=0;for(l=0;l<n.length;l++){const u=e._parsed[l];null!==u&&!isNaN(u)&&this.chart.getDataVisibility(l)&&!n[l].hidden&&(s+=Math.abs(u))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?$i*(Math.abs(e)/n):0}getLabelAndValue(e){const s=this.chart,l=s.data.labels||[],u=C_(this._cachedMeta._parsed[e],s.options.locale);return{label:l[e]||"",value:u}}getMaxBorderWidth(e){let n=0;const s=this.chart;let l,u,h,p,g;if(!e)for(l=0,u=s.data.datasets.length;l<u;++l)if(s.isDatasetVisible(l)){h=s.getDatasetMeta(l),e=h.data,p=h.controller;break}if(!e)return 0;for(l=0,u=e.length;l<u;++l)g=p.resolveDataElementOptions(l),"inner"!==g.borderAlign&&(n=Math.max(n,g.borderWidth||0,g.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,l=e.length;s<l;++s){const u=this.resolveDataElementOptions(s);n=Math.max(n,u.offset||0,u.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(Zn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return r.id="doughnut",r.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},r.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},r.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((s,l)=>{const h=t.getDatasetMeta(0).controller.getStyle(l);return{text:s,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,lineWidth:h.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return nr(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}},r})(),xP=(()=>{class r extends $c{initialize(){this.enableOptionSharing=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:l=[],_dataset:u}=n,h=this.chart._animationsDisabled;let{start:p,count:g}=function(r,t,e){const n=t.length;let s=0,l=n;if(r._sorted){const{iScale:u,_parsed:h}=r,p=u.axis,{min:g,max:b,minDefined:C,maxDefined:w}=u.getUserBounds();C&&(s=go(Math.min(Xc(h,u.axis,g).lo,e?n:Xc(t,p,u.getPixelForValue(g)).lo),0,n-1)),l=w?go(Math.max(Xc(h,u.axis,b).hi+1,e?0:Xc(t,p,u.getPixelForValue(b)).hi+1),s,n)-s:n-s}return{start:s,count:l}}(n,l,h);this._drawStart=p,this._drawCount=g,function(r){const{xScale:t,yScale:e,_scaleRanges:n}=r,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return r._scaleRanges=s,!0;const l=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,s),l}(n)&&(p=0,g=l.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!u._decimated,s.points=l;const b=this.resolveDatasetElementOptions(e);this.options.showLine||(b.borderWidth=0),b.segment=this.options.segment,this.updateElement(s,void 0,{animated:!h,options:b},e),this.updateElements(l,p,g,e)}updateElements(e,n,s,l){const u="reset"===l,{iScale:h,vScale:p,_stacked:g,_dataset:b}=this._cachedMeta,C=this.resolveDataElementOptions(n,l),w=this.getSharedOptions(C),x=this.includeOptions(l,w),N=h.axis,B=p.axis,{spanGaps:V,segment:$}=this.options,te=Xf(V)?V:Number.POSITIVE_INFINITY,xe=this.chart._animationsDisabled||u||"none"===l;let Re=n>0&&this.getParsed(n-1);for(let Pe=n;Pe<n+s;++Pe){const nt=e[Pe],ct=this.getParsed(Pe),St=xe?nt:{},At=xi(ct[B]),Cn=St[N]=h.getPixelForValue(ct[N],Pe),Gt=St[B]=u||At?p.getBasePixel():p.getPixelForValue(g?this.applyStack(p,ct,g):ct[B],Pe);St.skip=isNaN(Cn)||isNaN(Gt)||At,St.stop=Pe>0&&ct[N]-Re[N]>te,$&&(St.parsed=ct,St.raw=b.data[Pe]),x&&(St.options=w||this.resolveDataElementOptions(Pe,nt.active?"active":l)),xe||this.updateElement(nt,Pe,St,l),Re=ct}this.updateSharedOptions(w,l,C)}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,l=e.data||[];if(!l.length)return s;const u=l[0].size(this.resolveDataElementOptions(0)),h=l[l.length-1].size(this.resolveDataElementOptions(l.length-1));return Math.max(s,u,h)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return r.id="line",r.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},r.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},r})();var hQ=Object.freeze({__proto__:null,BarController:aQ,BubbleController:lQ,DoughnutController:RP,LineController:xP,PolarAreaController:(()=>{class r extends $c{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const s=this.chart,l=s.data.labels||[],u=C_(this._cachedMeta._parsed[e].r,s.options.locale);return{label:l[e]||"",value:u}}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}_updateRadius(){const e=this.chart,n=e.chartArea,s=e.options,l=Math.min(n.right-n.left,n.bottom-n.top),u=Math.max(l/2,0),p=(u-Math.max(s.cutoutPercentage?u/100*s.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=u-p*this.index,this.innerRadius=this.outerRadius-p}updateElements(e,n,s,l){const u="reset"===l,h=this.chart,p=this.getDataset(),b=h.options.animation,C=this._cachedMeta.rScale,w=C.xCenter,x=C.yCenter,N=C.getIndexAngle(0)-.5*xr;let V,B=N;const $=360/this.countVisibleElements();for(V=0;V<n;++V)B+=this._computeAngle(V,l,$);for(V=n;V<n+s;V++){const te=e[V];let xe=B,Re=B+this._computeAngle(V,l,$),Pe=h.getDataVisibility(V)?C.getDistanceFromCenterForValue(p.data[V]):0;B=Re,u&&(b.animateScale&&(Pe=0),b.animateRotate&&(xe=Re=N));const nt={x:w,y:x,innerRadius:0,outerRadius:Pe,startAngle:xe,endAngle:Re,options:this.resolveDataElementOptions(V,te.active?"active":l)};this.updateElement(te,V,nt,l)}}countVisibleElements(){const e=this.getDataset();let s=0;return this._cachedMeta.data.forEach((l,u)=>{!isNaN(e.data[u])&&this.chart.getDataVisibility(u)&&s++}),s}_computeAngle(e,n,s){return this.chart.getDataVisibility(e)?ul(this.resolveDataElementOptions(e,n).angle||s):0}}return r.id="polarArea",r.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},r.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((s,l)=>{const h=t.getDatasetMeta(0).controller.getStyle(l);return{text:s,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,lineWidth:h.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},r})(),PieController:(()=>{class r extends RP{}return r.id="pie",r.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},r})(),RadarController:(()=>{class r extends $c{getLabelAndValue(e){const n=this._cachedMeta.vScale,s=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(s[n.axis])}}update(e){const n=this._cachedMeta,s=n.dataset,l=n.data||[],u=n.iScale.getLabels();if(s.points=l,"resize"!==e){const h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),this.updateElement(s,void 0,{_loop:!0,_fullLoop:u.length===l.length,options:h},e)}this.updateElements(l,0,l.length,e)}updateElements(e,n,s,l){const u=this.getDataset(),h=this._cachedMeta.rScale,p="reset"===l;for(let g=n;g<n+s;g++){const b=e[g],C=this.resolveDataElementOptions(g,b.active?"active":l),w=h.getPointPositionForValue(g,u.data[g]),x=p?h.xCenter:w.x,N=p?h.yCenter:w.y,B={x,y:N,angle:w.angle,skip:isNaN(x)||isNaN(N),options:C};this.updateElement(b,g,B,l)}}}return r.id="radar",r.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},r.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},r})(),ScatterController:(()=>{class r extends xP{}return r.id="scatter",r.defaults={showLine:!1,fill:!1},r.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},r})()});function jh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var pQ={_date:(()=>{class r{constructor(e){this.options=e||{}}formats(){return jh()}parse(e,n){return jh()}format(e,n){return jh()}add(e,n,s){return jh()}diff(e,n,s){return jh()}startOf(e,n,s){return jh()}endOf(e,n){return jh()}}return r.override=function(t){Object.assign(r.prototype,t)},r})()};function T_(r,t){return"native"in r?{x:r.x,y:r.y}:iP(r,t)}function gQ(r,t,e,n){const{controller:s,data:l,_sorted:u}=r,h=s._cachedMeta.iScale;if(h&&t===h.axis&&u&&l.length){const p=h._reversePixels?QK:Xc;if(!n)return p(l,t,e);if(s._sharedOptions){const g=l[0],b="function"==typeof g.getRange&&g.getRange(t);if(b){const C=p(l,t,e-b),w=p(l,t,e+b);return{lo:C.lo,hi:w.hi}}}}return{lo:0,hi:l.length-1}}function IP(r,t,e,n,s){const l=r.getSortedVisibleDatasetMetas(),u=e[t];for(let h=0,p=l.length;h<p;++h){const{index:g,data:b}=l[h],{lo:C,hi:w}=gQ(l[h],t,u,s);for(let x=C;x<=w;++x){const N=b[x];N.skip||n(N,g,x)}}}function HM(r,t,e,n){const s=[];return Uh(t,r.chartArea,r._minPadding)&&IP(r,e,t,function(u,h,p){u.inRange(t.x,t.y,n)&&s.push({element:u,datasetIndex:h,index:p})},!0),s}function UM(r,t,e,n,s){const l=function(r){const t=-1!==r.indexOf("x"),e=-1!==r.indexOf("y");return function(n,s){const l=t?Math.abs(n.x-s.x):0,u=e?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(u,2))}}(e);let u=Number.POSITIVE_INFINITY,h=[];return Uh(t,r.chartArea,r._minPadding)&&IP(r,e,t,function(g,b,C){if(n&&!g.inRange(t.x,t.y,s))return;const w=g.getCenterPoint(s);if(!Uh(w,r.chartArea,r._minPadding)&&!g.inRange(t.x,t.y,s))return;const x=l(t,w);x<u?(h=[{element:g,datasetIndex:b,index:C}],u=x):x===u&&h.push({element:g,datasetIndex:b,index:C})}),h}function AP(r,t,e,n){const s=T_(t,r),l=[],u=e.axis,h="x"===u?"inXRange":"inYRange";let p=!1;return function(r,t){const e=r.getSortedVisibleDatasetMetas();let n,s,l;for(let u=0,h=e.length;u<h;++u){({index:n,data:s}=e[u]);for(let p=0,g=s.length;p<g;++p)l=s[p],l.skip||t(l,n,p)}}(r,(g,b,C)=>{g[h](s[u],n)&&l.push({element:g,datasetIndex:b,index:C}),g.inRange(s.x,s.y,n)&&(p=!0)}),e.intersect&&!p?[]:l}var _Q={modes:{index(r,t,e,n){const s=T_(t,r),l=e.axis||"x",u=e.intersect?HM(r,s,l,n):UM(r,s,l,!1,n),h=[];return u.length?(r.getSortedVisibleDatasetMetas().forEach(p=>{const g=u[0].index,b=p.data[g];b&&!b.skip&&h.push({element:b,datasetIndex:p.index,index:g})}),h):[]},dataset(r,t,e,n){const s=T_(t,r),l=e.axis||"xy";let u=e.intersect?HM(r,s,l,n):UM(r,s,l,!1,n);if(u.length>0){const h=u[0].datasetIndex,p=r.getDatasetMeta(h).data;u=[];for(let g=0;g<p.length;++g)u.push({element:p[g],datasetIndex:h,index:g})}return u},point:(r,t,e,n)=>HM(r,T_(t,r),e.axis||"xy",n),nearest:(r,t,e,n)=>UM(r,T_(t,r),e.axis||"xy",e.intersect,n),x:(r,t,e,n)=>(e.axis="x",AP(r,t,e,n)),y:(r,t,e,n)=>(e.axis="y",AP(r,t,e,n))}};const OP=["left","top","right","bottom"];function w_(r,t){return r.filter(e=>e.pos===t)}function kP(r,t){return r.filter(e=>-1===OP.indexOf(e.pos)&&e.box.axis===t)}function S_(r,t){return r.sort((e,n)=>{const s=t?n:e,l=t?e:n;return s.weight===l.weight?s.index-l.index:s.weight-l.weight})}function NP(r,t,e,n){return Math.max(r[e],t[e])+Math.max(r[n],t[n])}function LP(r,t){r.top=Math.max(r.top,t.top),r.left=Math.max(r.left,t.left),r.bottom=Math.max(r.bottom,t.bottom),r.right=Math.max(r.right,t.right)}function EQ(r,t,e,n){const{pos:s,box:l}=e,u=r.maxPadding;if(!pi(s)){e.size&&(r[s]-=e.size);const C=n[e.stack]||{size:0,count:1};C.size=Math.max(C.size,e.horizontal?l.height:l.width),e.size=C.size/C.count,r[s]+=e.size}l.getPadding&&LP(u,l.getPadding());const h=Math.max(0,t.outerWidth-NP(u,r,"left","right")),p=Math.max(0,t.outerHeight-NP(u,r,"top","bottom")),g=h!==r.w,b=p!==r.h;return r.w=h,r.h=p,e.horizontal?{same:g,other:b}:{same:b,other:g}}function wQ(r,t){const e=t.maxPadding;return function(s){const l={left:0,top:0,right:0,bottom:0};return s.forEach(u=>{l[u]=Math.max(t[u],e[u])}),l}(r?["left","right"]:["top","bottom"])}function M_(r,t,e,n){const s=[];let l,u,h,p,g,b;for(l=0,u=r.length,g=0;l<u;++l){h=r[l],p=h.box,p.update(h.width||t.w,h.height||t.h,wQ(h.horizontal,t));const{same:C,other:w}=EQ(t,e,h,n);g|=C&&s.length,b=b||w,p.fullSize||s.push(h)}return g&&M_(s,t,e,n)||b}function jy(r,t,e,n,s){r.top=e,r.left=t,r.right=t+n,r.bottom=e+s,r.width=n,r.height=s}function PP(r,t,e,n){const s=e.padding;let{x:l,y:u}=t;for(const h of r){const p=h.box,g=n[h.stack]||{count:1,placed:0,weight:1},b=h.stackWeight/g.weight||1;if(h.horizontal){const C=t.w*b,w=g.size||p.height;Ea(g.start)&&(u=g.start),p.fullSize?jy(p,s.left,u,e.outerWidth-s.right-s.left,w):jy(p,t.left+g.placed,u,C,w),g.start=u,g.placed+=C,u=p.bottom}else{const C=t.h*b,w=g.size||p.width;Ea(g.start)&&(l=g.start),p.fullSize?jy(p,l,s.top,w,e.outerHeight-s.bottom-s.top):jy(p,l,t.top+g.placed,w,C),g.start=l,g.placed+=C,l=p.right}}t.x=l,t.y=u}fi.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Jo={addBox(r,t){r.boxes||(r.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},r.boxes.push(t)},removeBox(r,t){const e=r.boxes?r.boxes.indexOf(t):-1;-1!==e&&r.boxes.splice(e,1)},configure(r,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(r,t,e,n){if(!r)return;const s=fs(r.options.layout.padding),l=Math.max(t-s.width,0),u=Math.max(e-s.height,0),h=function(r){const t=function(r){const t=[];let e,n,s,l,u,h;for(e=0,n=(r||[]).length;e<n;++e)s=r[e],({position:l,options:{stack:u,stackWeight:h=1}}=s),t.push({index:e,box:s,pos:l,horizontal:s.isHorizontal(),weight:s.weight,stack:u&&l+u,stackWeight:h});return t}(r),e=S_(t.filter(g=>g.box.fullSize),!0),n=S_(w_(t,"left"),!0),s=S_(w_(t,"right")),l=S_(w_(t,"top"),!0),u=S_(w_(t,"bottom")),h=kP(t,"x"),p=kP(t,"y");return{fullSize:e,leftAndTop:n.concat(l),rightAndBottom:s.concat(p).concat(u).concat(h),chartArea:w_(t,"chartArea"),vertical:n.concat(s).concat(p),horizontal:l.concat(u).concat(h)}}(r.boxes),p=h.vertical,g=h.horizontal;zi(r.boxes,B=>{"function"==typeof B.beforeLayout&&B.beforeLayout()});const b=p.reduce((B,V)=>V.box.options&&!1===V.box.options.display?B:B+1,0)||1,C=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:l,availableHeight:u,vBoxMaxWidth:l/2/b,hBoxMaxHeight:u/2}),w=Object.assign({},s);LP(w,fs(n));const x=Object.assign({maxPadding:w,w:l,h:u,x:s.left,y:s.top},s),N=function(r,t){const e=function(r){const t={};for(const e of r){const{stack:n,pos:s,stackWeight:l}=e;if(!n||!OP.includes(s))continue;const u=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=l}return t}(r),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t;let l,u,h;for(l=0,u=r.length;l<u;++l){h=r[l];const{fullSize:p}=h.box,g=e[h.stack],b=g&&h.stackWeight/g.weight;h.horizontal?(h.width=b?b*n:p&&t.availableWidth,h.height=s):(h.width=n,h.height=b?b*s:p&&t.availableHeight)}return e}(p.concat(g),C);M_(h.fullSize,x,C,N),M_(p,x,C,N),M_(g,x,C,N)&&M_(p,x,C,N),function(r){const t=r.maxPadding;function e(n){const s=Math.max(t[n]-r[n],0);return r[n]+=s,s}r.y+=e("top"),r.x+=e("left"),e("right"),e("bottom")}(x),PP(h.leftAndTop,x,C,N),x.x+=x.w,x.y+=x.h,PP(h.rightAndBottom,x,C,N),r.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},zi(h.chartArea,B=>{const V=B.box;Object.assign(V,r.chartArea),V.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class FP{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,s){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):n)}}isAttached(t){return!0}updateConfig(t){}}class SQ extends FP{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Xy="$chartjs",MQ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},BP=r=>null===r||""===r,VP=!!EJ&&{passive:!0};function xQ(r,t,e){r.canvas.removeEventListener(t,e,VP)}function Yy(r,t){for(const e of r)if(e===t||e.contains(t))return!0}function AQ(r,t,e){const n=r.canvas,s=new MutationObserver(l=>{let u=!1;for(const h of l)u=u||Yy(h.addedNodes,n),u=u&&!Yy(h.removedNodes,n);u&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function OQ(r,t,e){const n=r.canvas,s=new MutationObserver(l=>{let u=!1;for(const h of l)u=u||Yy(h.removedNodes,n),u=u&&!Yy(h.addedNodes,n);u&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const D_=new Map;let HP=0;function UP(){const r=window.devicePixelRatio;r!==HP&&(HP=r,D_.forEach((t,e)=>{e.currentDevicePixelRatio!==r&&t()}))}function LQ(r,t,e){const n=r.canvas,s=n&&LM(n);if(!s)return;const l=TL((h,p)=>{const g=s.clientWidth;e(h,p),g<s.clientWidth&&e()},window),u=new ResizeObserver(h=>{const p=h[0],g=p.contentRect.width,b=p.contentRect.height;0===g&&0===b||l(g,b)});return u.observe(s),function(r,t){D_.size||window.addEventListener("resize",UP),D_.set(r,t)}(r,l),u}function GM(r,t,e){e&&e.disconnect(),"resize"===t&&function(r){D_.delete(r),D_.size||window.removeEventListener("resize",UP)}(r)}function PQ(r,t,e){const n=r.canvas,s=TL(l=>{null!==r.ctx&&e(function(r,t){const e=MQ[r.type]||r.type,{x:n,y:s}=iP(r,t);return{type:e,chart:t,native:r,x:void 0!==n?n:null,y:void 0!==s?s:null}}(l,r))},r,l=>{const u=l[0];return[u,u.offsetX,u.offsetY]});return function(r,t,e){r.addEventListener(t,e,VP)}(n,t,s),s}class FQ extends FP{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(r,t){const e=r.style,n=r.getAttribute("height"),s=r.getAttribute("width");if(r[Xy]={initial:{height:n,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",BP(s)){const l=oP(r,"width");void 0!==l&&(r.width=l)}if(BP(n))if(""===r.style.height)r.height=r.width/(t||2);else{const l=oP(r,"height");void 0!==l&&(r.height=l)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Xy])return!1;const n=e[Xy].initial;["height","width"].forEach(l=>{const u=n[l];xi(u)?e.removeAttribute(l):e.setAttribute(l,u)});const s=n.style||{};return Object.keys(s).forEach(l=>{e.style[l]=s[l]}),e.width=e.width,delete e[Xy],!0}addEventListener(t,e,n){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:AQ,detach:OQ,resize:LQ}[e]||PQ)(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),s=n[e];s&&(({attach:GM,detach:GM,resize:GM}[e]||xQ)(t,e,s),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,s){return function(r,t,e,n){const s=zy(r),l=Wh(s,"margin"),u=Wy(s.maxWidth,r,"clientWidth")||xy,h=Wy(s.maxHeight,r,"clientHeight")||xy,p=function(r,t,e){let n,s;if(void 0===t||void 0===e){const l=LM(r);if(l){const u=l.getBoundingClientRect(),h=zy(l),p=Wh(h,"border","width"),g=Wh(h,"padding");t=u.width-g.width-p.width,e=u.height-g.height-p.height,n=Wy(h.maxWidth,l,"clientWidth"),s=Wy(h.maxHeight,l,"clientHeight")}else t=r.clientWidth,e=r.clientHeight}return{width:t,height:e,maxWidth:n||xy,maxHeight:s||xy}}(r,t,e);let{width:g,height:b}=p;if("content-box"===s.boxSizing){const C=Wh(s,"border","width"),w=Wh(s,"padding");g-=w.width+C.width,b-=w.height+C.height}return g=Math.max(0,g-l.width),b=Math.max(0,n?Math.floor(g/n):b-l.height),g=PM(Math.min(g,u,p.maxWidth)),b=PM(Math.min(b,h,p.maxHeight)),g&&!b&&(b=PM(g/2)),{width:g,height:b}}(t,e,n,s)}isAttached(t){const e=LM(t);return!(!e||!e.isConnected)}}class hl{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Xf(this.x)&&Xf(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const s={};return t.forEach(l=>{s[l]=n[l]&&n[l].active()?n[l]._to:this[l]}),s}}hl.defaults={},hl.defaultRoutes=void 0;const GP={values:r=>nr(r)?r:""+r,numeric(r,t,e){if(0===r)return"0";const n=this.chart.options.locale;let s,l=r;if(e.length>1){const g=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(g<1e-4||g>1e15)&&(s="scientific"),l=function(r,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&r!==Math.floor(r)&&(e=r-Math.floor(r)),e}(r,e)}const u=Ta(Math.abs(l)),h=Math.max(Math.min(-1*Math.floor(u),20),0),p={notation:s,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(p,this.options.ticks.format),C_(r,n,p)},logarithmic(r,t,e){if(0===r)return"0";const n=r/Math.pow(10,Math.floor(Ta(r)));return 1===n||2===n||5===n?GP.numeric.call(this,r,t,e):""}};var $y={formatters:GP};function Ky(r,t,e,n,s){const l=Zn(n,0),u=Math.min(Zn(s,r.length),r.length);let p,g,b,h=0;for(e=Math.ceil(e),s&&(p=s-n,e=p/Math.floor(p/e)),b=l;b<0;)h++,b=Math.round(l+h*e);for(g=Math.max(l,0);g<u;g++)g===b&&(t.push(r[g]),h++,b=Math.round(l+h*e))}fi.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(r,t)=>t.lineWidth,tickColor:(r,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:$y.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),fi.route("scale.ticks","color","","color"),fi.route("scale.grid","color","","borderColor"),fi.route("scale.grid","borderColor","","borderColor"),fi.route("scale.title","color","","color"),fi.describe("scale",{_fallback:!1,_scriptable:r=>!r.startsWith("before")&&!r.startsWith("after")&&"callback"!==r&&"parser"!==r,_indexable:r=>"borderDash"!==r&&"tickBorderDash"!==r}),fi.describe("scales",{_fallback:"scale"}),fi.describe("scale.ticks",{_scriptable:r=>"backdropPadding"!==r&&"callback"!==r,_indexable:r=>"backdropPadding"!==r});const WP=(r,t,e)=>"top"===t||"left"===t?r[t]+e:r[t]-e;function zP(r,t){const e=[],n=r.length/t,s=r.length;let l=0;for(;l<s;l+=n)e.push(r[Math.floor(l)]);return e}function YQ(r,t,e){const n=r.ticks.length,s=Math.min(t,n-1),l=r._startPixel,u=r._endPixel,h=1e-6;let g,p=r.getPixelForTick(s);if(!(e&&(g=1===n?Math.max(p-l,u-p):0===t?(r.getPixelForTick(1)-p)/2:(p-r.getPixelForTick(s-1))/2,p+=s<t?g:-g,p<l-h||p>u+h)))return p}function R_(r){return r.drawTicks?r.tickLength:0}function jP(r,t){if(!r.display)return 0;const e=so(r.font,t),n=fs(r.padding);return(nr(r.text)?r.text.length:1)*e.lineHeight+n.height}function QQ(r,t,e){let n=vM(r);return(e&&"right"!==t||!e&&"right"===t)&&(n=(r=>"left"===r?"right":"right"===r?"left":r)(n)),n}class Xh extends hl{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:s}=this;return t=Ca(t,Number.POSITIVE_INFINITY),e=Ca(e,Number.NEGATIVE_INFINITY),n=Ca(n,Number.POSITIVE_INFINITY),s=Ca(s,Number.NEGATIVE_INFINITY),{min:Ca(t,n),max:Ca(e,s),minDefined:Vr(t),maxDefined:Vr(e)}}getMinMax(t){let u,{min:e,max:n,minDefined:s,maxDefined:l}=this.getUserBounds();if(s&&l)return{min:e,max:n};const h=this.getMatchingVisibleMetas();for(let p=0,g=h.length;p<g;++p)u=h[p].controller.getMinMax(this,t),s||(e=Math.min(e,u.min)),l||(n=Math.max(n,u.max));return e=l&&e>n?n:e,n=s&&e>n?e:n,{min:Ca(e,Ca(n,e)),max:Ca(n,Ca(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ir(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:s,grace:l,ticks:u}=this.options,h=u.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(r,t,e){const{min:n,max:s}=r,l=wL(t,(s-n)/2),u=(h,p)=>e&&0===h?0:h+p;return{min:u(n,-Math.abs(l)),max:u(s,l)}}(this,l,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const p=h<this.ticks.length;this._convertTicksToLabels(p?zP(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),u.display&&(u.autoSkip||"auto"===u.source)&&(this.ticks=function(r,t){const e=r.options.ticks,n=e.maxTicksLimit||function(r){const t=r.options.offset,e=r._tickSize();return Math.floor(Math.min(r._length/e+(t?0:1),r._maxLength/e))}(r),s=e.major.enabled?function(r){const t=[];let e,n;for(e=0,n=r.length;e<n;e++)r[e].major&&t.push(e);return t}(t):[],l=s.length,u=s[0],h=s[l-1],p=[];if(l>n)return function(r,t,e,n){let u,s=0,l=e[0];for(n=Math.ceil(n),u=0;u<r.length;u++)u===l&&(t.push(r[u]),s++,l=e[s*n])}(t,p,s,l/n),p;const g=function(r,t,e){const n=function(r){const t=r.length;let e,n;if(t<2)return!1;for(n=r[0],e=1;e<t;++e)if(r[e]-r[e-1]!==n)return!1;return n}(r),s=t.length/e;if(!n)return Math.max(s,1);const l=function(r){const t=[],e=Math.sqrt(r);let n;for(n=1;n<e;n++)r%n==0&&(t.push(n),t.push(r/n));return e===(0|e)&&t.push(e),t.sort((s,l)=>s-l).pop(),t}(n);for(let u=0,h=l.length-1;u<h;u++){const p=l[u];if(p>s)return p}return Math.max(s,1)}(s,t,n);if(l>0){let b,C;const w=l>1?Math.round((h-u)/(l-1)):null;for(Ky(t,p,g,xi(w)?0:u-w,u),b=0,C=l-1;b<C;b++)Ky(t,p,g,s[b],s[b+1]);return Ky(t,p,g,h,xi(w)?t.length:h+w),p}return Ky(t,p,g),p}(this,this.ticks),this._labelSizes=null),p&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,n,t=this.options.reverse;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ir(this.options.afterUpdate,[this])}beforeSetDimensions(){ir(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ir(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ir(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ir(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,s,l;for(n=0,s=t.length;n<s;n++)l=t[n],l.label=ir(e.callback,[l.value,n,t],this)}afterTickToLabelConversion(){ir(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ir(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,s=e.minRotation||0,l=e.maxRotation;let h,p,g,u=s;if(!this._isVisible()||!e.display||s>=l||n<=1||!this.isHorizontal())return void(this.labelRotation=s);const b=this._getLabelSizes(),C=b.widest.width,w=b.highest.height,x=go(this.chart.width-C,0,this.maxWidth);h=t.offset?this.maxWidth/n:x/(n-1),C+6>h&&(h=x/(n-(t.offset?.5:1)),p=this.maxHeight-R_(t.grid)-e.padding-jP(t.title,this.chart.options.font),g=Math.sqrt(C*C+w*w),u=yM(Math.min(Math.asin(go((b.highest.height+6)/h,-1,1)),Math.asin(go(p/g,-1,1))-Math.asin(go(w/g,-1,1)))),u=Math.max(s,Math.min(l,u))),this.labelRotation=u}afterCalculateLabelRotation(){ir(this.options.afterCalculateLabelRotation,[this])}beforeFit(){ir(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:s,grid:l}}=this,u=this._isVisible(),h=this.isHorizontal();if(u){const p=jP(s,e.options.font);if(h?(t.width=this.maxWidth,t.height=R_(l)+p):(t.height=this.maxHeight,t.width=R_(l)+p),n.display&&this.ticks.length){const{first:g,last:b,widest:C,highest:w}=this._getLabelSizes(),x=2*n.padding,N=ul(this.labelRotation),B=Math.cos(N),V=Math.sin(N);h?t.height=Math.min(this.maxHeight,t.height+(n.mirror?0:V*C.width+B*w.height)+x):t.width=Math.min(this.maxWidth,t.width+(n.mirror?0:B*C.width+V*w.height)+x),this._calculatePadding(g,b,V,B)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,s){const{ticks:{align:l,padding:u},position:h}=this.options,p=0!==this.labelRotation,g="top"!==h&&"x"===this.axis;if(this.isHorizontal()){const b=this.getPixelForTick(0)-this.left,C=this.right-this.getPixelForTick(this.ticks.length-1);let w=0,x=0;p?g?(w=s*t.width,x=n*e.height):(w=n*t.height,x=s*e.width):"start"===l?x=e.width:"end"===l?w=t.width:(w=t.width/2,x=e.width/2),this.paddingLeft=Math.max((w-b+u)*this.width/(this.width-b),0),this.paddingRight=Math.max((x-C+u)*this.width/(this.width-C),0)}else{let b=e.height/2,C=t.height/2;"start"===l?(b=0,C=t.height):"end"===l&&(b=e.height,C=0),this.paddingTop=b+u,this.paddingBottom=C+u}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ir(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)xi(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=zP(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:s}=this,l=[],u=[];let g,b,C,w,x,N,B,V,$,te,xe,h=0,p=0;for(g=0;g<e;++g){if(w=t[g].label,x=this._resolveTickFontOptions(g),n.font=N=x.string,B=s[N]=s[N]||{data:{},gc:[]},V=x.lineHeight,$=te=0,xi(w)||nr(w)){if(nr(w))for(b=0,C=w.length;b<C;++b)xe=w[b],!xi(xe)&&!nr(xe)&&($=Fy(n,B.data,B.gc,$,xe),te+=V)}else $=Fy(n,B.data,B.gc,$,w),te=V;l.push($),u.push(te),h=Math.max($,h),p=Math.max(te,p)}!function(r,t){zi(r,e=>{const n=e.gc,s=n.length/2;let l;if(s>t){for(l=0;l<s;++l)delete e.data[n[l]];n.splice(0,s)}})}(s,e);const Re=l.indexOf(h),Pe=u.indexOf(p),nt=ct=>({width:l[ct]||0,height:u[ct]||0});return{first:nt(0),last:nt(e-1),widest:nt(Re),highest:nt(Pe),widths:l,heights:u}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function(r){return go(r,-32768,32767)}(this._alignToPixels?Hh(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(r,t,e){return od(r,{tick:e,index:t,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=function(r,t){return od(r,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ul(this.labelRotation),n=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),l=this._getLabelSizes(),u=t.autoSkipPadding||0,h=l?l.widest.width+u:0,p=l?l.highest.height+u:0;return this.isHorizontal()?p*n>h*s?h/n:p/s:p*s<h*n?p/n:h/s}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,s=this.options,{grid:l,position:u}=s,h=l.offset,p=this.isHorizontal(),b=this.ticks.length+(h?1:0),C=R_(l),w=[],x=l.setContext(this.getContext()),N=x.drawBorder?x.borderWidth:0,B=N/2,V=function(Rt){return Hh(n,Rt,N)};let $,te,xe,Re,Pe,nt,ct,St,At,Cn,Gt,Mn;if("top"===u)$=V(this.bottom),nt=this.bottom-C,St=$-B,Cn=V(t.top)+B,Mn=t.bottom;else if("bottom"===u)$=V(this.top),Cn=t.top,Mn=V(t.bottom)-B,nt=$+B,St=this.top+C;else if("left"===u)$=V(this.right),Pe=this.right-C,ct=$-B,At=V(t.left)+B,Gt=t.right;else if("right"===u)$=V(this.left),At=t.left,Gt=V(t.right)-B,Pe=$+B,ct=this.left+C;else if("x"===e){if("center"===u)$=V((t.top+t.bottom)/2+.5);else if(pi(u)){const Rt=Object.keys(u)[0];$=V(this.chart.scales[Rt].getPixelForValue(u[Rt]))}Cn=t.top,Mn=t.bottom,nt=$+B,St=nt+C}else if("y"===e){if("center"===u)$=V((t.left+t.right)/2);else if(pi(u)){const Rt=Object.keys(u)[0];$=V(this.chart.scales[Rt].getPixelForValue(u[Rt]))}Pe=$-B,ct=Pe-C,At=t.left,Gt=t.right}const qn=Zn(s.ticks.maxTicksLimit,b),Mt=Math.max(1,Math.ceil(b/qn));for(te=0;te<b;te+=Mt){const Rt=l.setContext(this.getContext(te)),tt=Rt.lineWidth,Lt=Rt.color,Pt=l.borderDash||[],fn=Rt.borderDashOffset,lr=Rt.tickWidth,rt=Rt.tickColor,Kt=Rt.tickBorderDash||[],ai=Rt.tickBorderDashOffset;xe=YQ(this,te,h),void 0!==xe&&(Re=Hh(n,xe,tt),p?Pe=ct=At=Gt=Re:nt=St=Cn=Mn=Re,w.push({tx1:Pe,ty1:nt,tx2:ct,ty2:St,x1:At,y1:Cn,x2:Gt,y2:Mn,width:tt,color:Lt,borderDash:Pt,borderDashOffset:fn,tickWidth:lr,tickColor:rt,tickBorderDash:Kt,tickBorderDashOffset:ai}))}return this._ticksLength=b,this._borderValue=$,w}_computeLabelItems(t){const e=this.axis,n=this.options,{position:s,ticks:l}=n,u=this.isHorizontal(),h=this.ticks,{align:p,crossAlign:g,padding:b,mirror:C}=l,w=R_(n.grid),x=w+b,N=C?-b:x,B=-ul(this.labelRotation),V=[];let $,te,xe,Re,Pe,nt,ct,St,At,Cn,Gt,Mn,qn="middle";if("top"===s)nt=this.bottom-N,ct=this._getXAxisLabelAlignment();else if("bottom"===s)nt=this.top+N,ct=this._getXAxisLabelAlignment();else if("left"===s){const Rt=this._getYAxisLabelAlignment(w);ct=Rt.textAlign,Pe=Rt.x}else if("right"===s){const Rt=this._getYAxisLabelAlignment(w);ct=Rt.textAlign,Pe=Rt.x}else if("x"===e){if("center"===s)nt=(t.top+t.bottom)/2+x;else if(pi(s)){const Rt=Object.keys(s)[0];nt=this.chart.scales[Rt].getPixelForValue(s[Rt])+x}ct=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===s)Pe=(t.left+t.right)/2-x;else if(pi(s)){const Rt=Object.keys(s)[0];Pe=this.chart.scales[Rt].getPixelForValue(s[Rt])}ct=this._getYAxisLabelAlignment(w).textAlign}"y"===e&&("start"===p?qn="top":"end"===p&&(qn="bottom"));const Mt=this._getLabelSizes();for($=0,te=h.length;$<te;++$){xe=h[$],Re=xe.label;const Rt=l.setContext(this.getContext($));St=this.getPixelForTick($)+l.labelOffset,At=this._resolveTickFontOptions($),Cn=At.lineHeight,Gt=nr(Re)?Re.length:1;const tt=Gt/2,Lt=Rt.color,Pt=Rt.textStrokeColor,fn=Rt.textStrokeWidth;let lr;if(u?(Pe=St,Mn="top"===s?"near"===g||0!==B?-Gt*Cn+Cn/2:"center"===g?-Mt.highest.height/2-tt*Cn+Cn:Cn/2-Mt.highest.height:"near"===g||0!==B?Cn/2:"center"===g?Mt.highest.height/2-tt*Cn:Mt.highest.height-Gt*Cn,C&&(Mn*=-1)):(nt=St,Mn=(1-Gt)*Cn/2),Rt.showLabelBackdrop){const rt=fs(Rt.backdropPadding),Kt=Mt.heights[$],ai=Mt.widths[$];let $n=nt+Mn-rt.top,ql=Pe-rt.left;switch(qn){case"middle":$n-=Kt/2;break;case"bottom":$n-=Kt}switch(ct){case"center":ql-=ai/2;break;case"right":ql-=ai}lr={left:ql,top:$n,width:ai+rt.width,height:Kt+rt.height,color:Rt.backdropColor}}V.push({rotation:B,label:Re,font:At,color:Lt,strokeColor:Pt,strokeWidth:fn,textOffset:Mn,textAlign:ct,textBaseline:qn,translation:[Pe,nt],backdrop:lr})}return V}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ul(this.labelRotation))return"top"===t?"left":"right";let s="center";return"start"===e.align?s="left":"end"===e.align&&(s="right"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:s,padding:l}}=this.options,h=t+l,p=this._getLabelSizes().widest.width;let g,b;return"left"===e?s?(b=this.right+l,"near"===n?g="left":"center"===n?(g="center",b+=p/2):(g="right",b+=p)):(b=this.right-h,"near"===n?g="right":"center"===n?(g="center",b-=p/2):(g="left",b=this.left)):"right"===e?s?(b=this.left+l,"near"===n?g="right":"center"===n?(g="center",b-=p/2):(g="left",b-=p)):(b=this.left+h,"near"===n?g="left":"center"===n?(g="center",b+=p/2):(g="right",b=this.right)):g="right",{textAlign:g,x:b}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:s,width:l,height:u}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,s,l,u),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(l=>l.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let l,u;const h=(p,g,b)=>{!b.width||!b.color||(n.save(),n.lineWidth=b.width,n.strokeStyle=b.color,n.setLineDash(b.borderDash||[]),n.lineDashOffset=b.borderDashOffset,n.beginPath(),n.moveTo(p.x,p.y),n.lineTo(g.x,g.y),n.stroke(),n.restore())};if(e.display)for(l=0,u=s.length;l<u;++l){const p=s[l];e.drawOnChartArea&&h({x:p.x1,y:p.y1},{x:p.x2,y:p.y2},p),e.drawTicks&&h({x:p.tx1,y:p.ty1},{x:p.tx2,y:p.ty2},{color:p.tickColor,width:p.tickWidth,borderDash:p.tickBorderDash,borderDashOffset:p.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,s=n.setContext(this.getContext()),l=n.drawBorder?s.borderWidth:0;if(!l)return;const u=n.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let p,g,b,C;this.isHorizontal()?(p=Hh(t,this.left,l)-l/2,g=Hh(t,this.right,u)+u/2,b=C=h):(b=Hh(t,this.top,l)-l/2,C=Hh(t,this.bottom,u)+u/2,p=g=h),e.save(),e.lineWidth=s.borderWidth,e.strokeStyle=s.borderColor,e.beginPath(),e.moveTo(p,b),e.lineTo(g,C),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&Vy(n,s);const l=this._labelItems||(this._labelItems=this._computeLabelItems(t));let u,h;for(u=0,h=l.length;u<h;++u){const p=l[u],g=p.font,b=p.label;p.backdrop&&(n.fillStyle=p.backdrop.color,n.fillRect(p.backdrop.left,p.backdrop.top,p.backdrop.width,p.backdrop.height)),Gh(n,b,0,p.textOffset,g,p)}s&&Hy(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:s}}=this;if(!n.display)return;const l=so(n.font),u=fs(n.padding),h=n.align;let p=l.lineHeight/2;"bottom"===e||"center"===e||pi(e)?(p+=u.bottom,nr(n.text)&&(p+=l.lineHeight*(n.text.length-1))):p+=u.top;const{titleX:g,titleY:b,maxWidth:C,rotation:w}=function(r,t,e,n){const{top:s,left:l,bottom:u,right:h,chart:p}=r,{chartArea:g,scales:b}=p;let w,x,N,C=0;const B=u-s,V=h-l;if(r.isHorizontal()){if(x=Ko(n,l,h),pi(e)){const $=Object.keys(e)[0];N=b[$].getPixelForValue(e[$])+B-t}else N="center"===e?(g.bottom+g.top)/2+B-t:WP(r,e,t);w=h-l}else{if(pi(e)){const $=Object.keys(e)[0];x=b[$].getPixelForValue(e[$])-V+t}else x="center"===e?(g.left+g.right)/2-V+t:WP(r,e,t);N=Ko(n,u,s),C="left"===e?-Hr:Hr}return{titleX:x,titleY:N,maxWidth:w,rotation:C}}(this,p,e,h);Gh(t,n.text,0,0,l,{color:n.color,maxWidth:C,rotation:w,textAlign:QQ(h,e,s),textBaseline:"middle",translation:[g,b]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Zn(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===Xh.prototype.draw?[{z:n,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]:[{z:e,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let l,u;for(l=0,u=e.length;l<u;++l){const h=e[l];h[n]===this.id&&(!t||h.type===t)&&s.push(h)}return s}_resolveTickFontOptions(t){return so(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Jy{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(r){return"id"in r&&"defaults"in r})(e)&&(n=this.register(e));const s=this.items,l=t.id,u=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+t);return l in s||(s[l]=t,function(r,t,e){const n=d_(Object.create(null),[e?fi.get(e):{},fi.get(t),r.defaults]);fi.set(t,n),r.defaultRoutes&&function(r,t){Object.keys(t).forEach(e=>{const n=e.split("."),s=n.pop(),l=[r].concat(n).join("."),u=t[e].split("."),h=u.pop(),p=u.join(".");fi.route(l,s,p,h)})}(t,r.defaultRoutes),r.descriptors&&fi.describe(t,r.descriptors)}(t,u,n),this.override&&fi.override(t.id,t.overrides)),u}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,s=this.scope;n in e&&delete e[n],s&&n in fi[s]&&(delete fi[s][n],this.override&&delete Vh[n])}}var Kc=new class{constructor(){this.controllers=new Jy($c,"datasets",!0),this.elements=new Jy(hl,"elements"),this.plugins=new Jy(Object,"plugins"),this.scales=new Jy(Xh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(s=>{const l=n||this._getRegistryForType(s);n||l.isForType(s)||l===this.plugins&&s.id?this._exec(t,l,s):zi(s,u=>{const h=n||this._getRegistryForType(u);this._exec(t,h,u)})})}_exec(t,e,n){const s=bM(t);ir(n["before"+s],[],n),e[t](n),ir(n["after"+s],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const s=e.get(t);if(void 0===s)throw new Error('"'+t+'" is not a registered '+n+".");return s}};class iZ{constructor(){this._init=[]}notify(t,e,n,s){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const l=s?this._descriptors(t).filter(s):this._descriptors(t),u=this._notify(l,t,e,n);return"destroy"===e&&(this._notify(l,t,"stop"),this._notify(this._init,t,"uninstall")),u}_notify(t,e,n,s){s=s||{};for(const l of t){const u=l.plugin;if(!1===ir(u[n],[e,s,l.options],u)&&s.cancelable)return!1}return!0}invalidate(){xi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,s=Zn(n.options&&n.options.plugins,{}),l=function(r){const t=[],e=Object.keys(Kc.plugins.items);for(let s=0;s<e.length;s++)t.push(Kc.getPlugin(e[s]));const n=r.plugins||[];for(let s=0;s<n.length;s++){const l=n[s];-1===t.indexOf(l)&&t.push(l)}return t}(n);return!1!==s||e?function(r,t,e,n){const s=[],l=r.getContext();for(let u=0;u<t.length;u++){const h=t[u],g=oZ(e[h.id],n);null!==g&&s.push({plugin:h,options:aZ(r.config,h,g,l)})}return s}(t,l,s,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,s=(l,u)=>l.filter(h=>!u.some(p=>h.plugin.id===p.plugin.id));this._notify(s(e,n),t,"stop"),this._notify(s(n,e),t,"start")}}function oZ(r,t){return t||!1!==r?!0===r?{}:r:null}function aZ(r,t,e,n){const s=r.pluginScopeKeys(t),l=r.getOptionScopes(e,s);return r.createResolver(l,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function WM(r,t){return((t.datasets||{})[r]||{}).indexAxis||t.indexAxis||(fi.datasets[r]||{}).indexAxis||"x"}function zM(r,t){return"x"===r||"y"===r?r:t.axis||function(r){return"top"===r||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0}(t.position)||r.charAt(0).toLowerCase()}function XP(r){const t=r.options||(r.options={});t.plugins=Zn(t.plugins,{}),t.scales=function(r,t){const e=Vh[r.type]||{scales:{}},n=t.scales||{},s=WM(r.type,t),l=Object.create(null),u=Object.create(null);return Object.keys(n).forEach(h=>{const p=n[h];if(!pi(p))return console.error(`Invalid scale configuration for scale: ${h}`);if(p._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${h}`);const g=zM(h,p),b=function(r,t){return r===t?"_index_":"_value_"}(g,s),C=e.scales||{};l[g]=l[g]||h,u[h]=h_(Object.create(null),[{axis:g},p,C[g],C[b]])}),r.data.datasets.forEach(h=>{const p=h.type||r.type,g=h.indexAxis||WM(p,t),C=(Vh[p]||{}).scales||{};Object.keys(C).forEach(w=>{const x=function(r,t){let e=r;return"_index_"===r?e=t:"_value_"===r&&(e="x"===t?"y":"x"),e}(w,g),N=h[x+"AxisID"]||l[x]||x;u[N]=u[N]||Object.create(null),h_(u[N],[{axis:x},n[N],C[w]])})}),Object.keys(u).forEach(h=>{const p=u[h];h_(p,[fi.scales[p.type],fi.scale])}),u}(r,t)}function YP(r){return(r=r||{}).datasets=r.datasets||[],r.labels=r.labels||[],r}const $P=new Map,KP=new Set;function Qy(r,t){let e=$P.get(r);return e||(e=t(),$P.set(r,e),KP.add(e)),e}const x_=(r,t,e)=>{const n=Bh(t,e);void 0!==n&&r.add(n)};class pZ{constructor(t){this._config=function(r){return(r=r||{}).data=YP(r.data),XP(r),r}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=YP(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),XP(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Qy(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Qy(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Qy(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return Qy(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let s=n.get(t);return(!s||e)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,e,n){const{options:s,type:l}=this,u=this._cachedScopes(t,n),h=u.get(e);if(h)return h;const p=new Set;e.forEach(b=>{t&&(p.add(t),b.forEach(C=>x_(p,t,C))),b.forEach(C=>x_(p,s,C)),b.forEach(C=>x_(p,Vh[l]||{},C)),b.forEach(C=>x_(p,fi,C)),b.forEach(C=>x_(p,RM,C))});const g=Array.from(p);return 0===g.length&&g.push(Object.create(null)),KP.has(e)&&u.set(e,g),g}chartOptionScopes(){const{options:t,type:e}=this;return[t,Vh[e]||{},fi.datasets[e]||{},{type:e},fi,RM]}resolveNamedOptions(t,e,n,s=[""]){const l={$shared:!0},{resolver:u,subPrefixes:h}=JP(this._resolverCache,t,s);let p=u;(function(r,t){const{isScriptable:e,isIndexable:n}=KL(r);for(const s of t){const l=e(s),u=n(s),h=(u||l)&&r[s];if(l&&(rd(h)||fZ(h))||u&&nr(h))return!0}return!1})(u,e)&&(l.$shared=!1,p=$f(u,n=rd(n)?n():n,this.createResolver(t,n,h)));for(const g of e)l[g]=p[g];return l}createResolver(t,e,n=[""],s){const{resolver:l}=JP(this._resolverCache,t,n);return pi(e)?$f(l,e,void 0,s):l}}function JP(r,t,e){let n=r.get(t);n||(n=new Map,r.set(t,n));const s=e.join();let l=n.get(s);return l||(l={resolver:OM(t,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},n.set(s,l)),l}const fZ=r=>pi(r)&&Object.getOwnPropertyNames(r).reduce((t,e)=>t||rd(r[e]),!1),_Z=["top","bottom","left","right","chartArea"];function QP(r,t){return"top"===r||"bottom"===r||-1===_Z.indexOf(r)&&"x"===t}function ZP(r,t){return function(e,n){return e[r]===n[r]?e[t]-n[t]:e[r]-n[r]}}function qP(r){const t=r.chart,e=t.options.animation;t.notifyPlugins("afterRender"),ir(e&&e.onComplete,[r],t)}function vZ(r){const t=r.chart,e=t.options.animation;ir(e&&e.onProgress,[r],t)}function eF(r){return nP()&&"string"==typeof r?r=document.getElementById(r):r&&r.length&&(r=r[0]),r&&r.canvas&&(r=r.canvas),r}const Zy={},tF=r=>{const t=eF(r);return Object.values(Zy).filter(e=>e.canvas===t).pop()};function bZ(r,t,e){const n=Object.keys(r);for(const s of n){const l=+s;if(l>=t){const u=r[s];delete r[s],(e>0||l>t)&&(r[l+e]=u)}}}class qy{constructor(t,e){const n=this.config=new pZ(e),s=eF(t),l=tF(s);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas can be reused.");const u=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(r){return!nP()||"undefined"!=typeof OffscreenCanvas&&r instanceof OffscreenCanvas?SQ:FQ}(s)),this.platform.updateConfig(n);const h=this.platform.acquireContext(s,u.aspectRatio),p=h&&h.canvas,g=p&&p.height,b=p&&p.width;this.id=aK(),this.ctx=h,this.canvas=p,this.width=b,this.height=g,this._options=u,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new iZ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(r,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(r,t,n)):r.apply(this,n),t}}(C=>this.update(C),u.resizeDelay||0),this._dataChanges=[],Zy[this.id]=this,h&&p?(Yc.listen(this,"complete",qP),Yc.listen(this,"progress",vZ),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:s,_aspectRatio:l}=this;return xi(t)?e&&l?l:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():rP(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zL(this.canvas,this.ctx),this}stop(){return Yc.stop(this),this}resize(t,e){Yc.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,u=this.platform.getMaximumSize(this.canvas,t,e,n.maintainAspectRatio&&this.aspectRatio),h=n.devicePixelRatio||this.platform.getDevicePixelRatio(),p=this.width?"resize":"attach";this.width=u.width,this.height=u.height,this._aspectRatio=this.aspectRatio,rP(this,h,!0)&&(this.notifyPlugins("resize",{size:u}),ir(n.onResize,[this,u],this),this.attached&&this._doResize(p)&&this.render())}ensureScalesHaveIDs(){zi(this.options.scales||{},(n,s)=>{n.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,s=Object.keys(n).reduce((u,h)=>(u[h]=!1,u),{});let l=[];e&&(l=l.concat(Object.keys(e).map(u=>{const h=e[u],p=zM(u,h),g="r"===p,b="x"===p;return{options:h,dposition:g?"chartArea":b?"bottom":"left",dtype:g?"radialLinear":b?"category":"linear"}}))),zi(l,u=>{const h=u.options,p=h.id,g=zM(p,h),b=Zn(h.type,u.dtype);(void 0===h.position||QP(h.position,g)!==QP(u.dposition))&&(h.position=u.dposition),s[p]=!0;let C=null;p in n&&n[p].type===b?C=n[p]:(C=new(Kc.getScale(b))({id:p,type:b,ctx:this.ctx,chart:this}),n[C.id]=C),C.init(h,t)}),zi(s,(u,h)=>{u||delete n[h]}),zi(n,u=>{Jo.configure(this,u,u.options),Jo.addBox(this,u)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((s,l)=>s.index-l.index),n>e){for(let s=e;s<n;++s)this._destroyDatasetMeta(s);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(ZP("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,s)=>{0===e.filter(l=>l===n._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=e.length;n<s;n++){const l=e[n];let u=this.getDatasetMeta(n);const h=l.type||this.config.type;if(u.type&&u.type!==h&&(this._destroyDatasetMeta(n),u=this.getDatasetMeta(n)),u.type=h,u.indexAxis=l.indexAxis||WM(h,this.options),u.order=l.order||0,u.index=n,u.label=""+l.label,u.visible=this.isDatasetVisible(n),u.controller)u.controller.updateIndex(n),u.controller.linkScales();else{const p=Kc.getController(h),{datasetElementType:g,dataElementType:b}=fi.datasets[h];Object.assign(p.prototype,{dataElementType:Kc.getElement(b),datasetElementType:g&&Kc.getElement(g)}),u.controller=new p(this,n),t.push(u.controller)}}return this._updateMetasets(),t}_resetElements(){zi(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let u=0;for(let h=0,p=this.data.datasets.length;h<p;h++){const{controller:g}=this.getDatasetMeta(h),b=!s&&-1===l.indexOf(g);g.buildOrUpdateElements(b),u=Math.max(+g.getMaxOverflow(),u)}u=this._minPadding=n.layout.autoPadding?u:0,this._updateLayout(u),s||zi(l,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(ZP("z","_idx")),this._lastEvent&&this._eventHandler(this._lastEvent,!0),this.render()}_updateScales(){zi(this.scales,t=>{Jo.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!DL(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:l}of e)bZ(t,s,"_removeElements"===n?-l:l)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=l=>new Set(t.filter(u=>u[0]===l).map((u,h)=>h+","+u.splice(1).join(","))),s=n(0);for(let l=1;l<e;l++)if(!DL(s,n(l)))return;return Array.from(s).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Jo.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],zi(this.boxes,s=>{n&&"chartArea"===s.position||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,l)=>{s._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,rd(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),s={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(n.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Yc.has(this)?this.attached&&!Yc.running(this)&&Yc.start(this):(this.draw(),qP({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resize(n,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let s,l;for(s=0,l=e.length;s<l;++s){const u=e[s];(!t||u.visible)&&n.push(u)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,s=!n.disabled,l=this.chartArea,u={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",u)&&(s&&Vy(e,{left:!1===n.left?0:l.left-n.left,right:!1===n.right?this.width:l.right+n.right,top:!1===n.top?0:l.top-n.top,bottom:!1===n.bottom?this.height:l.bottom+n.bottom}),t.controller.draw(),s&&Hy(e),u.cancelable=!1,this.notifyPlugins("afterDatasetDraw",u))}getElementsAtEventForMode(t,e,n,s){const l=_Q.modes[e];return"function"==typeof l?l(this,t,n,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let s=n.filter(l=>l&&l._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=od(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const s=n?"show":"hide",l=this.getDatasetMeta(t),u=l.controller._resolveAnimations(void 0,s);Ea(e)?(l.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),u.update(l,{visible:n}),this.update(h=>h.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Yc.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),zL(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Zy[this.id]}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(l,u)=>{e.addEventListener(this,l,u),t[l]=u},s=(l,u,h)=>{l.offsetX=u,l.offsetY=h,this._eventHandler(l)};zi(this.options.events,l=>n(l,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(p,g)=>{e.addEventListener(this,p,g),t[p]=g},s=(p,g)=>{t[p]&&(e.removeEventListener(this,p,g),delete t[p])},l=(p,g)=>{this.canvas&&this.resize(p,g)};let u;const h=()=>{s("attach",h),this.attached=!0,this.resize(),n("resize",l),n("detach",u)};u=()=>{this.attached=!1,s("resize",l),this._stop(),this._resize(0,0),n("attach",h)},e.isAttached(this.canvas)?h():u()}unbindEvents(){zi(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},zi(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const s=n?"set":"remove";let l,u,h,p;for("dataset"===e&&(l=this.getDatasetMeta(t[0].datasetIndex),l.controller["_"+s+"DatasetHoverStyle"]()),h=0,p=t.length;h<p;++h){u=t[h];const g=u&&this.getDatasetMeta(u.datasetIndex).controller;g&&g[s+"HoverStyle"](u.element,u.datasetIndex,u.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:l,index:u})=>{const h=this.getDatasetMeta(l);if(!h)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:h.data[u],index:u}});!Dy(n,e)&&(this._active=n,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const s=this.options.hover,l=(p,g)=>p.filter(b=>!g.some(C=>b.datasetIndex===C.datasetIndex&&b.index===C.index)),u=l(e,t),h=n?t:l(t,e);u.length&&this.updateHoverStyle(u,s.mode,!1),h.length&&s.mode&&this.updateHoverStyle(h,s.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0},s=u=>(u.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,s))return;const l=this._handleEvent(t,e);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(l||n.changed)&&this.render(),this}_handleEvent(t,e){const{_active:n=[],options:s}=this,l=s.hover;let h=[],p=!1,g=null;return"mouseout"!==t.type&&(h=this.getElementsAtEventForMode(t,l.mode,l,e),g="click"===t.type?this._lastEvent:t),this._lastEvent=null,Uh(t,this.chartArea,this._minPadding)&&(ir(s.onHover,[t,h,this],this),("mouseup"===t.type||"click"===t.type||"contextmenu"===t.type)&&ir(s.onClick,[t,h,this],this)),p=!Dy(h,n),(p||e)&&(this._active=h,this._updateHoverStyles(h,n,e)),this._lastEvent=g,p}}const nF=()=>zi(qy.instances,r=>r._plugins.invalidate()),sd=!0;function iF(r,t,e){const{startAngle:n,pixelMargin:s,x:l,y:u,outerRadius:h,innerRadius:p}=t;let g=s/h;r.beginPath(),r.arc(l,u,h,n-g,e+g),p>s?(g=s/p,r.arc(l,u,p,e+g,n-g,!0)):r.arc(l,u,s,e+Hr,n-Hr),r.closePath(),r.clip()}function Qf(r,t,e,n){return{x:e+r*Math.cos(t),y:n+r*Math.sin(t)}}function jM(r,t,e,n,s){const{x:l,y:u,startAngle:h,pixelMargin:p,innerRadius:g}=t,b=Math.max(t.outerRadius+n+e-p,0),C=g>0?g+n+e+p:0;let w=0;const x=s-h;if(n){const Pt=((g>0?g-n:0)+(b>0?b-n:0))/2;w=(x-(0!==Pt?x*Pt/(Pt+n):x))/2}const B=(x-Math.max(.001,x*b-e/xr)/b)/2,V=h+B+w,$=s-B-w,{outerStart:te,outerEnd:xe,innerStart:Re,innerEnd:Pe}=function(r,t,e,n){const s=function(r){return IM(r,["outerStart","outerEnd","innerStart","innerEnd"])}(r.options.borderRadius),l=(e-t)/2,u=Math.min(l,n*t/2),h=p=>{const g=(e-Math.min(l,p))*n/2;return go(p,0,Math.min(l,g))};return{outerStart:h(s.outerStart),outerEnd:h(s.outerEnd),innerStart:go(s.innerStart,0,u),innerEnd:go(s.innerEnd,0,u)}}(t,C,b,$-V),nt=b-te,ct=b-xe,St=V+te/nt,At=$-xe/ct,Cn=C+Re,Gt=C+Pe,Mn=V+Re/Cn,qn=$-Pe/Gt;if(r.beginPath(),r.arc(l,u,b,St,At),xe>0){const tt=Qf(ct,At,l,u);r.arc(tt.x,tt.y,xe,At,$+Hr)}const Mt=Qf(Gt,$,l,u);if(r.lineTo(Mt.x,Mt.y),Pe>0){const tt=Qf(Gt,qn,l,u);r.arc(tt.x,tt.y,Pe,$+Hr,qn+Math.PI)}if(r.arc(l,u,C,$-Pe/C,V+Re/C,!0),Re>0){const tt=Qf(Cn,Mn,l,u);r.arc(tt.x,tt.y,Re,Mn+Math.PI,V-Hr)}const Rt=Qf(nt,V,l,u);if(r.lineTo(Rt.x,Rt.y),te>0){const tt=Qf(nt,St,l,u);r.arc(tt.x,tt.y,te,V-Hr,St)}r.closePath()}Object.defineProperties(qy,{defaults:{enumerable:sd,value:fi},instances:{enumerable:sd,value:Zy},overrides:{enumerable:sd,value:Vh},registry:{enumerable:sd,value:Kc},version:{enumerable:sd,value:"3.6.1"},getChart:{enumerable:sd,value:tF},register:{enumerable:sd,value:(...r)=>{Kc.add(...r),nF()}},unregister:{enumerable:sd,value:(...r)=>{Kc.remove(...r),nF()}}});class eC extends hl{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const s=this.getProps(["x","y"],n),{angle:l,distance:u}=function(r,t){const e=t.x-r.x,n=t.y-r.y,s=Math.sqrt(e*e+n*n);let l=Math.atan2(n,e);return l<-.5*xr&&(l+=$i),{angle:l,distance:s}}(s,{x:t,y:e}),{startAngle:h,endAngle:p,innerRadius:g,outerRadius:b,circumference:C}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),w=this.options.spacing/2,N=Zn(C,p-h)>=$i||Iy(l,h,p),B=jc(u,g+w,b+w);return N&&B}getCenterPoint(t){const{x:e,y:n,startAngle:s,endAngle:l,innerRadius:u,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:p,spacing:g}=this.options,b=(s+l)/2,C=(u+h+g+p)/2;return{x:e+Math.cos(b)*C,y:n+Math.sin(b)*C}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,s=(e.offset||0)/2,l=(e.spacing||0)/2;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>$i?Math.floor(n/$i):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let u=0;if(s){u=s/2;const p=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(p)*u,Math.sin(p)*u),this.circumference>=xr&&(u=s)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(r,t,e,n,s){const{options:l}=t,u="inner"===l.borderAlign;!l.borderWidth||(u?(r.lineWidth=2*l.borderWidth,r.lineJoin="round"):(r.lineWidth=l.borderWidth,r.lineJoin="bevel"),t.fullCircles&&function(r,t,e){const{x:n,y:s,startAngle:l,pixelMargin:u,fullCircles:h}=t,p=Math.max(t.outerRadius-u,0),g=t.innerRadius+u;let b;for(e&&iF(r,t,l+$i),r.beginPath(),r.arc(n,s,g,l+$i,l,!0),b=0;b<h;++b)r.stroke();for(r.beginPath(),r.arc(n,s,p,l,l+$i),b=0;b<h;++b)r.stroke()}(r,t,u),u&&iF(r,t,s),jM(r,t,e,n,s),r.stroke())}(t,this,u,l,function(r,t,e,n){const{fullCircles:s,startAngle:l,circumference:u}=t;let h=t.endAngle;if(s){jM(r,t,e,n,l+$i);for(let p=0;p<s;++p)r.fill();isNaN(u)||(h=l+u%$i,u%$i==0&&(h+=$i))}return jM(r,t,e,n,h),r.fill(),h}(t,this,u,l)),t.restore()}}function rF(r,t,e=t){r.lineCap=Zn(e.borderCapStyle,t.borderCapStyle),r.setLineDash(Zn(e.borderDash,t.borderDash)),r.lineDashOffset=Zn(e.borderDashOffset,t.borderDashOffset),r.lineJoin=Zn(e.borderJoinStyle,t.borderJoinStyle),r.lineWidth=Zn(e.borderWidth,t.borderWidth),r.strokeStyle=Zn(e.borderColor,t.borderColor)}function SZ(r,t,e){r.lineTo(e.x,e.y)}function oF(r,t,e={}){const n=r.length,{start:s=0,end:l=n-1}=e,{start:u,end:h}=t,p=Math.max(s,u),g=Math.min(l,h);return{count:n,start:p,loop:t.loop,ilen:g<p&&!(s<u&&l<u||s>h&&l>h)?n+g-p:g-p}}function DZ(r,t,e,n){const{points:s,options:l}=t,{count:u,start:h,loop:p,ilen:g}=oF(s,e,n),b=function(r){return r.stepped?GK:r.tension||"monotone"===r.cubicInterpolationMode?WK:SZ}(l);let x,N,B,{move:C=!0,reverse:w}=n||{};for(x=0;x<=g;++x)N=s[(h+(w?g-x:x))%u],!N.skip&&(C?(r.moveTo(N.x,N.y),C=!1):b(r,B,N,w,l.stepped),B=N);return p&&(N=s[(h+(w?g:0))%u],b(r,B,N,w,l.stepped)),!!p}function RZ(r,t,e,n){const s=t.points,{count:l,start:u,ilen:h}=oF(s,e,n),{move:p=!0,reverse:g}=n||{};let w,x,N,B,V,$,b=0,C=0;const te=Re=>(u+(g?h-Re:Re))%l,xe=()=>{B!==V&&(r.lineTo(b,V),r.lineTo(b,B),r.lineTo(b,$))};for(p&&(x=s[te(0)],r.moveTo(x.x,x.y)),w=0;w<=h;++w){if(x=s[te(w)],x.skip)continue;const Re=x.x,Pe=x.y,nt=0|Re;nt===N?(Pe<B?B=Pe:Pe>V&&(V=Pe),b=(C*b+Re)/++C):(xe(),r.lineTo(Re,Pe),N=nt,C=0,B=V=Pe),$=Pe}xe()}function XM(r){const t=r.options;return r._decimated||r._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||t.borderDash&&t.borderDash.length?DZ:RZ}eC.id="arc",eC.defaults={borderAlign:"center",borderColor:"#fff",borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},eC.defaultRoutes={backgroundColor:"backgroundColor"};const OZ="function"==typeof Path2D;let tC=(()=>{class r extends hl{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;!s.tension&&"monotone"!==s.cubicInterpolationMode||s.stepped||this._pointsUpdated||(gJ(this._points,s,e,s.spanGaps?this._loop:this._fullLoop,n),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(r,t){const e=r.points,n=r.options.spanGaps,s=e.length;if(!s)return[];const l=!!r._loop,{start:u,end:h}=function(r,t,e,n){let s=0,l=t-1;if(e&&!n)for(;s<t&&!r[s].skip;)s++;for(;s<t&&r[s].skip;)s++;for(s%=t,e&&(l+=s);l>s&&r[l%t].skip;)l--;return l%=t,{start:s,end:l}}(e,s,l,n);return function(r,t,e,n){return n&&n.setContext&&e?function(r,t,e,n){const s=r._chart.getContext(),l=fP(r.options),{_datasetIndex:u,options:{spanGaps:h}}=r,p=e.length,g=[];let b=l,C=t[0].start,w=C;function x(N,B,V,$){const te=h?-1:1;if(N!==B){for(N+=p;e[N%p].skip;)N-=te;for(;e[B%p].skip;)B+=te;N%p!=B%p&&(g.push({start:N%p,end:B%p,loop:V,style:$}),b=$,C=B%p)}}for(const N of t){C=h?C:N.start;let V,B=e[C%p];for(w=C+1;w<=N.end;w++){const $=e[w%p];V=fP(n.setContext(od(s,{type:"segment",p0:B,p1:$,p0DataIndex:(w-1)%p,p1DataIndex:w%p,datasetIndex:u}))),kJ(V,b)&&x(C,w-1,N.loop,b),B=$,b=V}C<w-1&&x(C,w-1,N.loop,b)}return g}(r,t,e,n):t}(r,!0===n?[{start:u,end:h,loop:l}]:function(r,t,e,n){const s=r.length,l=[];let p,u=t,h=r[t];for(p=t+1;p<=e;++p){const g=r[p%s];g.skip||g.stop?h.skip||(l.push({start:t%s,end:(p-1)%s,loop:n=!1}),t=u=g.stop?p:null):(u=p,h.skip&&(t=p)),h=g}return null!==u&&l.push({start:t%s,end:u%s,loop:n}),l}(e,u,h<u?h+s:h,!!r._fullLoop&&0===u&&h===s-1),e,t)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,s=e.length;return s&&this.points[e[s-1].end]}interpolate(e,n){const s=this.options,l=e[n],u=this.points,h=hP(this,{property:n,start:l,end:l});if(!h.length)return;const p=[],g=function(r){return r.stepped?TJ:r.tension||"monotone"===r.cubicInterpolationMode?wJ:zh}(s);let b,C;for(b=0,C=h.length;b<C;++b){const{start:w,end:x}=h[b],N=u[w],B=u[x];if(N===B){p.push(N);continue}const $=g(N,B,Math.abs((l-N[n])/(B[n]-N[n])),s.stepped);$[n]=e[n],p.push($)}return 1===p.length?p[0]:p}pathSegment(e,n,s){return XM(this)(e,this,n,s)}path(e,n,s){const l=this.segments,u=XM(this);let h=this._loop;n=n||0,s=s||this.points.length-n;for(const p of l)h&=u(e,this,p,{start:n,end:n+s-1});return!!h}draw(e,n,s,l){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function(r,t,e,n){OZ&&!t.options.segment?function(r,t,e,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,n)&&s.closePath()),rF(r,t.options),r.stroke(s)}(r,t,e,n):function(r,t,e,n){const{segments:s,options:l}=t,u=XM(t);for(const h of s)rF(r,l,h.style),r.beginPath(),u(r,t,h,{start:e,end:e+n-1})&&r.closePath(),r.stroke()}(r,t,e,n)}(e,this,s,l),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return r.id="line",r.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},r.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},r.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t},r})();function sF(r,t,e,n){const s=r.options,{[e]:l}=r.getProps([e],n);return Math.abs(t-l)<s.radius+s.hitRadius}let NZ=(()=>{class r extends hl{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,s){const l=this.options,{x:u,y:h}=this.getProps(["x","y"],s);return Math.pow(e-u,2)+Math.pow(n-h,2)<Math.pow(l.hitRadius+l.radius,2)}inXRange(e,n){return sF(this,e,"x",n)}inYRange(e,n){return sF(this,e,"y",n)}getCenterPoint(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}size(e){let n=(e=e||this.options||{}).radius||0;return n=Math.max(n,n&&e.hoverRadius||0),2*(n+(n&&e.borderWidth||0))}draw(e,n){const s=this.options;this.skip||s.radius<.1||!Uh(this,n,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,By(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}return r.id="point",r.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},r.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},r})();function aF(r,t){const{x:e,y:n,base:s,width:l,height:u}=r.getProps(["x","y","base","width","height"],t);let h,p,g,b,C;return r.horizontal?(C=u/2,h=Math.min(e,s),p=Math.max(e,s),g=n-C,b=n+C):(C=l/2,h=e-C,p=e+C,g=Math.min(n,s),b=Math.max(n,s)),{left:h,top:g,right:p,bottom:b}}function ad(r,t,e,n){return r?0:go(t,e,n)}function YM(r,t,e,n){const s=null===t,l=null===e,h=r&&!(s&&l)&&aF(r,n);return h&&(s||jc(t,h.left,h.right))&&(l||jc(e,h.top,h.bottom))}function VZ(r,t){r.rect(t.x,t.y,t.w,t.h)}function $M(r,t,e={}){const n=r.x!==e.x?-t:0,s=r.y!==e.y?-t:0;return{x:r.x+n,y:r.y+s,w:r.w+((r.x+r.w!==e.x+e.w?t:0)-n),h:r.h+((r.y+r.h!==e.y+e.h?t:0)-s),radius:r.radius}}class nC extends hl{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:s}}=this,{inner:l,outer:u}=function(r){const t=aF(r),e=t.right-t.left,n=t.bottom-t.top,s=function(r,t,e){const s=r.borderSkipped,l=jL(r.options.borderWidth);return{t:ad(s.top,l.top,0,e),r:ad(s.right,l.right,0,t),b:ad(s.bottom,l.bottom,0,e),l:ad(s.left,l.left,0,t)}}(r,e/2,n/2),l=function(r,t,e){const{enableBorderRadius:n}=r.getProps(["enableBorderRadius"]),s=r.options.borderRadius,l=Yf(s),u=Math.min(t,e),h=r.borderSkipped,p=n||pi(s);return{topLeft:ad(!p||h.top||h.left,l.topLeft,0,u),topRight:ad(!p||h.top||h.right,l.topRight,0,u),bottomLeft:ad(!p||h.bottom||h.left,l.bottomLeft,0,u),bottomRight:ad(!p||h.bottom||h.right,l.bottomRight,0,u)}}(r,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:l},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,l.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,l.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,l.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,l.bottomRight-Math.max(s.b,s.r))}}}}(this),h=function(r){return r.topLeft||r.topRight||r.bottomLeft||r.bottomRight}(u.radius)?Uy:VZ;t.save(),(u.w!==l.w||u.h!==l.h)&&(t.beginPath(),h(t,$M(u,e,l)),t.clip(),h(t,$M(l,-e,u)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),h(t,$M(l,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,n){return YM(this,t,e,n)}inXRange(t,e){return YM(this,t,null,e)}inYRange(t,e){return YM(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:s,horizontal:l}=this.getProps(["x","y","base","horizontal"],t);return{x:l?(e+s)/2:e,y:l?n:(n+s)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}nC.id="bar",nC.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},nC.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var HZ=Object.freeze({__proto__:null,ArcElement:eC,LineElement:tC,PointElement:NZ,BarElement:nC});function lF(r){if(r._decimated){const t=r._data;delete r._decimated,delete r._data,Object.defineProperty(r,"data",{value:t})}}function cF(r){r.data.datasets.forEach(t=>{lF(t)})}var zZ={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(r,t,e)=>{if(!e.enabled)return void cF(r);const n=r.width;r.data.datasets.forEach((s,l)=>{const{_data:u,indexAxis:h}=s,p=r.getDatasetMeta(l),g=u||s.data;if("y"===y_([h,r.options.indexAxis])||"line"!==p.type)return;const b=r.scales[p.xAxisID];if("linear"!==b.type&&"time"!==b.type||r.options.parsing)return;let N,{start:C,count:w}=function(r,t){const e=t.length;let s,n=0;const{iScale:l}=r,{min:u,max:h,minDefined:p,maxDefined:g}=l.getUserBounds();return p&&(n=go(Xc(t,l.axis,u).lo,0,e-1)),s=g?go(Xc(t,l.axis,h).hi+1,n,e)-n:e-n,{start:n,count:s}}(p,g);if(w<=(e.threshold||4*n))lF(s);else{switch(xi(u)&&(s._data=g,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(B){this._data=B}})),e.algorithm){case"lttb":N=function(r,t,e,n,s){const l=s.samples||n;if(l>=e)return r.slice(t,t+e);const u=[],h=(e-2)/(l-2);let p=0;const g=t+e-1;let C,w,x,N,B,b=t;for(u[p++]=r[b],C=0;C<l-2;C++){let te,V=0,$=0;const xe=Math.floor((C+1)*h)+1+t,Re=Math.min(Math.floor((C+2)*h)+1,e)+t,Pe=Re-xe;for(te=xe;te<Re;te++)V+=r[te].x,$+=r[te].y;V/=Pe,$/=Pe;const nt=Math.floor(C*h)+1+t,ct=Math.min(Math.floor((C+1)*h)+1,e)+t,{x:St,y:At}=r[b];for(x=N=-1,te=nt;te<ct;te++)N=.5*Math.abs((St-V)*(r[te].y-At)-(St-r[te].x)*($-At)),N>x&&(x=N,w=r[te],B=te);u[p++]=w,b=B}return u[p++]=r[g],u}(g,C,w,n,e);break;case"min-max":N=function(r,t,e,n){let u,h,p,g,b,C,w,x,N,B,s=0,l=0;const V=[],te=r[t].x,Re=r[t+e-1].x-te;for(u=t;u<t+e;++u){h=r[u],p=(h.x-te)/Re*n,g=h.y;const Pe=0|p;if(Pe===b)g<N?(N=g,C=u):g>B&&(B=g,w=u),s=(l*s+h.x)/++l;else{const nt=u-1;if(!xi(C)&&!xi(w)){const ct=Math.min(C,w),St=Math.max(C,w);ct!==x&&ct!==nt&&V.push(mR(gR({},r[ct]),{x:s})),St!==x&&St!==nt&&V.push(mR(gR({},r[St]),{x:s}))}u>0&&nt!==x&&V.push(r[nt]),V.push(h),b=Pe,l=0,N=B=g,C=w=x=u}}return V}(g,C,w,n);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}s._decimated=N}})},destroy(r){cF(r)}};function YZ(r,t,e){const n=function(r){const t=r.options,e=t.fill;let n=Zn(e&&e.target,e);return void 0===n&&(n=!!t.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(r);if(pi(n))return!isNaN(n.value)&&n;let s=parseFloat(n);return Vr(s)&&Math.floor(s)===s?(("-"===n[0]||"+"===n[0])&&(s=t+s),!(s===t||s<0||s>=e)&&s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}class uF{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:s,y:l,radius:u}=this;return t.arc(s,l,u,(e=e||{start:0,end:$i}).end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:s}=this,l=t.angle;return{x:e+Math.cos(l)*s,y:n+Math.sin(l)*s,angle:l}}}function dF(r,t,e){for(;t>r;t--){const n=e[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function eq(r,t,e){const n=[];for(let s=0;s<e.length;s++){const l=e[s],{first:u,last:h,point:p}=tq(l,t,"x");if(!(!p||u&&h))if(u)n.unshift(p);else if(r.push(p),!h)break}r.push(...n)}function tq(r,t,e){const n=r.interpolate(t,e);if(!n)return{};const s=n[e],l=r.segments,u=r.points;let h=!1,p=!1;for(let g=0;g<l.length;g++){const b=l[g],C=u[b.start][e],w=u[b.end][e];if(jc(s,C,w)){h=s===C,p=s===w;break}}return{first:h,last:p,point:n}}function nq(r){const{chart:t,fill:e,line:n}=r;if(Vr(e))return function(r,t){const e=r.getDatasetMeta(t);return e&&r.isDatasetVisible(t)?e.dataset:null}(t,e);if("stack"===e)return function(r){const{scale:t,index:e,line:n}=r,s=[],l=n.segments,u=n.points,h=function(r,t){const e=[],n=r.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){const l=n[s];if(l.index===t)break;l.hidden||e.unshift(l.dataset)}return e}(t,e);h.push(hF({x:null,y:t.bottom},n));for(let p=0;p<l.length;p++){const g=l[p];for(let b=g.start;b<=g.end;b++)eq(s,u[b],h)}return new tC({points:s,options:{}})}(r);if("shape"===e)return!0;const s=function(r){return(r.scale||{}).getPointPositionForValue?function(r){const{scale:t,fill:e}=r,n=t.options,s=t.getLabels().length,l=[],u=n.reverse?t.max:t.min;let p,g,b;if(b="start"===e?u:"end"===e?n.reverse?t.min:t.max:pi(e)?e.value:t.getBaseValue(),n.grid.circular)return g=t.getPointPositionForValue(0,u),new uF({x:g.x,y:g.y,radius:t.getDistanceFromCenterForValue(b)});for(p=0;p<s;++p)l.push(t.getPointPositionForValue(p,b));return l}(r):function(r){const{scale:t={},fill:e}=r;let s,n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:pi(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),Vr(n)?(s=t.isHorizontal(),{x:s?n:null,y:s?null:n}):null}(r)}(r);return s instanceof uF?s:hF(s,n)}function hF(r,t){let e=[],n=!1;return nr(r)?(n=!0,e=r):e=function(r,t){const{x:e=null,y:n=null}=r||{},s=t.points,l=[];return t.segments.forEach(({start:u,end:h})=>{h=dF(u,h,s);const p=s[u],g=s[h];null!==n?(l.push({x:p.x,y:n}),l.push({x:g.x,y:n})):null!==e&&(l.push({x:e,y:p.y}),l.push({x:e,y:g.y}))}),l}(r,t),e.length?new tC({points:e,options:{tension:0},_loop:n,_fullLoop:n}):null}function iq(r,t,e){let s=r[t].fill;const l=[t];let u;if(!e)return s;for(;!1!==s&&-1===l.indexOf(s);){if(!Vr(s))return s;if(u=r[s],!u)return!1;if(u.visible)return s;l.push(s),s=u.fill}return!1}function pF(r,t,e){r.beginPath(),t.path(r),r.lineTo(t.last().x,e),r.lineTo(t.first().x,e),r.closePath(),r.clip()}function KM(r,t,e,n){if(n)return;let s=t[r],l=e[r];return"angle"===r&&(s=dl(s),l=dl(l)),{property:r,start:s,end:l}}function fF(r,t,e,n){return r&&t?n(r[e],t[e]):r?r[e]:t?t[e]:0}function oq(r,t,e){const{top:n,bottom:s}=t.chart.chartArea,{property:l,start:u,end:h}=e||{};"x"===l&&(r.beginPath(),r.rect(u,n,h-u,s-n),r.clip())}function gF(r,t,e,n){const s=t.interpolate(e,n);s&&r.lineTo(s.x,s.y)}function mF(r,t){const{line:e,target:n,property:s,color:l,scale:u}=t,h=function(r,t,e){const n=r.segments,s=r.points,l=t.points,u=[];for(const h of n){let{start:p,end:g}=h;g=dF(p,g,s);const b=KM(e,s[p],s[g],h.loop);if(!t.segments){u.push({source:h,target:b,start:s[p],end:s[g]});continue}const C=hP(t,b);for(const w of C){const x=KM(e,l[w.start],l[w.end],w.loop),N=dP(h,s,x);for(const B of N)u.push({source:B,target:w,start:{[e]:fF(b,x,"start",Math.max)},end:{[e]:fF(b,x,"end",Math.min)}})}}return u}(e,n,s);for(const{source:p,target:g,start:b,end:C}of h){const{style:{backgroundColor:w=l}={}}=p,x=!0!==n;r.save(),r.fillStyle=w,oq(r,u,x&&KM(s,b,C)),r.beginPath();const N=!!e.pathSegment(r,p);let B;if(x){N?r.closePath():gF(r,n,C,s);const V=!!n.pathSegment(r,g,{move:N,reverse:!0});B=N&&V,B||gF(r,n,b,s)}r.closePath(),r.fill(B?"evenodd":"nonzero"),r.restore()}}function JM(r,t,e){const n=nq(t),{line:s,scale:l,axis:u}=t,h=s.options,p=h.fill,g=h.backgroundColor,{above:b=g,below:C=g}=p||{};n&&s.points.length&&(Vy(r,e),function(r,t){const{line:e,target:n,above:s,below:l,area:u,scale:h}=t,p=e._loop?"angle":t.axis;r.save(),"x"===p&&l!==s&&(pF(r,n,u.top),mF(r,{line:e,target:n,color:s,scale:h,property:p}),r.restore(),r.save(),pF(r,n,u.bottom)),mF(r,{line:e,target:n,color:l,scale:h,property:p}),r.restore()}(r,{line:s,target:n,above:b,below:C,area:e,scale:l,axis:u}),Hy(r))}var aq={id:"filler",afterDatasetsUpdate(r,t,e){const n=(r.data.datasets||[]).length,s=[];let l,u,h,p;for(u=0;u<n;++u)l=r.getDatasetMeta(u),h=l.dataset,p=null,h&&h.options&&h instanceof tC&&(p={visible:r.isDatasetVisible(u),index:u,fill:YZ(h,u,n),chart:r,axis:l.controller.options.indexAxis,scale:l.vScale,line:h}),l.$filler=p,s.push(p);for(u=0;u<n;++u)p=s[u],p&&!1!==p.fill&&(p.fill=iq(s,u,e.propagate))},beforeDraw(r,t,e){const n="beforeDraw"===e.drawTime,s=r.getSortedVisibleDatasetMetas(),l=r.chartArea;for(let u=s.length-1;u>=0;--u){const h=s[u].$filler;!h||(h.line.updateControlPoints(l,h.axis),n&&JM(r.ctx,h,l))}},beforeDatasetsDraw(r,t,e){if("beforeDatasetsDraw"!==e.drawTime)return;const n=r.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){const l=n[s].$filler;l&&JM(r.ctx,l,r.chartArea)}},beforeDatasetDraw(r,t,e){const n=t.meta.$filler;!n||!1===n.fill||"beforeDatasetDraw"!==e.drawTime||JM(r.ctx,n,r.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const _F=(r,t)=>{let{boxHeight:e=t,boxWidth:n=t}=r;return r.usePointStyle&&(e=Math.min(e,t),n=Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}};class vF extends hl{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=ir(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,s=so(n.font),l=s.size,u=this._computeTitleHeight(),{boxWidth:h,itemHeight:p}=_F(n,l);let g,b;e.font=s.string,this.isHorizontal()?(g=this.maxWidth,b=this._fitRows(u,l,h,p)+10):(b=this.maxHeight,g=this._fitCols(u,l,h,p)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(b,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,s){const{ctx:l,maxWidth:u,options:{labels:{padding:h}}}=this,p=this.legendHitBoxes=[],g=this.lineWidths=[0],b=s+h;let C=t;l.textAlign="left",l.textBaseline="middle";let w=-1,x=-b;return this.legendItems.forEach((N,B)=>{const V=n+e/2+l.measureText(N.text).width;(0===B||g[g.length-1]+V+2*h>u)&&(C+=b,g[g.length-(B>0?0:1)]=0,x+=b,w++),p[B]={left:0,top:x,row:w,width:V,height:s},g[g.length-1]+=V+h}),C}_fitCols(t,e,n,s){const{ctx:l,maxHeight:u,options:{labels:{padding:h}}}=this,p=this.legendHitBoxes=[],g=this.columnSizes=[],b=u-t;let C=h,w=0,x=0,N=0,B=0;return this.legendItems.forEach((V,$)=>{const te=n+e/2+l.measureText(V.text).width;$>0&&x+s+2*h>b&&(C+=w+h,g.push({width:w,height:x}),N+=w+h,B++,w=x=0),p[$]={left:N,top:x,col:B,width:te,height:s},w=Math.max(w,te),x+=s+h}),C+=w,g.push({width:w,height:x}),C}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:s},rtl:l}}=this,u=Jf(l,this.left,this.width);if(this.isHorizontal()){let h=0,p=Ko(n,this.left+s,this.right-this.lineWidths[h]);for(const g of e)h!==g.row&&(h=g.row,p=Ko(n,this.left+s,this.right-this.lineWidths[h])),g.top+=this.top+t+s,g.left=u.leftForLtr(u.x(p),g.width),p+=g.width+s}else{let h=0,p=Ko(n,this.top+t+s,this.bottom-this.columnSizes[h].height);for(const g of e)g.col!==h&&(h=g.col,p=Ko(n,this.top+t+s,this.bottom-this.columnSizes[h].height)),g.top=p,g.left+=this.left+s,g.left=u.leftForLtr(u.x(g.left),g.width),p+=g.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Vy(t,this),this._draw(),Hy(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:s}=this,{align:l,labels:u}=t,h=fi.color,p=Jf(t.rtl,this.left,this.width),g=so(u.font),{color:b,padding:C}=u,w=g.size,x=w/2;let N;this.drawTitle(),s.textAlign=p.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=g.string;const{boxWidth:B,boxHeight:V,itemHeight:$}=_F(u,w),Re=this.isHorizontal(),Pe=this._computeTitleHeight();N=Re?{x:Ko(l,this.left+C,this.right-n[0]),y:this.top+C+Pe,line:0}:{x:this.left+C,y:Ko(l,this.top+Pe+C,this.bottom-e[0].height),line:0},aP(this.ctx,t.textDirection);const nt=$+C;this.legendItems.forEach((ct,St)=>{s.strokeStyle=ct.fontColor||b,s.fillStyle=ct.fontColor||b;const At=s.measureText(ct.text).width,Cn=p.textAlign(ct.textAlign||(ct.textAlign=u.textAlign)),Gt=B+x+At;let Mn=N.x,qn=N.y;p.setWidth(this.width),Re?St>0&&Mn+Gt+C>this.right&&(qn=N.y+=nt,N.line++,Mn=N.x=Ko(l,this.left+C,this.right-n[N.line])):St>0&&qn+nt>this.bottom&&(Mn=N.x=Mn+e[N.line].width+C,N.line++,qn=N.y=Ko(l,this.top+Pe+C,this.bottom-e[N.line].height)),function(ct,St,At){if(isNaN(B)||B<=0||isNaN(V)||V<0)return;s.save();const Cn=Zn(At.lineWidth,1);if(s.fillStyle=Zn(At.fillStyle,h),s.lineCap=Zn(At.lineCap,"butt"),s.lineDashOffset=Zn(At.lineDashOffset,0),s.lineJoin=Zn(At.lineJoin,"miter"),s.lineWidth=Cn,s.strokeStyle=Zn(At.strokeStyle,h),s.setLineDash(Zn(At.lineDash,[])),u.usePointStyle){const Gt={radius:B*Math.SQRT2/2,pointStyle:At.pointStyle,rotation:At.rotation,borderWidth:Cn},Mn=p.xPlus(ct,B/2);By(s,Gt,Mn,St+x)}else{const Gt=St+Math.max((w-V)/2,0),Mn=p.leftForLtr(ct,B),qn=Yf(At.borderRadius);s.beginPath(),Object.values(qn).some(Mt=>0!==Mt)?Uy(s,{x:Mn,y:Gt,w:B,h:V,radius:qn}):s.rect(Mn,Gt,B,V),s.fill(),0!==Cn&&s.stroke()}s.restore()}(p.x(Mn),qn,ct),Mn=((r,t,e,n)=>r===(n?"left":"right")?e:"center"===r?(t+e)/2:t)(Cn,Mn+B+x,Re?Mn+Gt:this.right,t.rtl),function(ct,St,At){Gh(s,At.text,ct,St+$/2,g,{strikethrough:At.hidden,textAlign:p.textAlign(At.textAlign)})}(p.x(Mn),qn,ct),Re?N.x+=Gt+C:N.y+=nt}),lP(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=so(e.font),s=fs(e.padding);if(!e.display)return;const l=Jf(t.rtl,this.left,this.width),u=this.ctx,h=e.position,g=s.top+n.size/2;let b,C=this.left,w=this.width;if(this.isHorizontal())w=Math.max(...this.lineWidths),b=this.top+g,C=Ko(t.align,C,this.right-w);else{const N=this.columnSizes.reduce((B,V)=>Math.max(B,V.height),0);b=g+Ko(t.align,this.top,this.bottom-N-t.labels.padding-this._computeTitleHeight())}const x=Ko(h,C,C+w);u.textAlign=l.textAlign(vM(h)),u.textBaseline="middle",u.strokeStyle=e.color,u.fillStyle=e.color,u.font=n.string,Gh(u,e.text,x,b,n)}_computeTitleHeight(){const t=this.options.title,e=so(t.font),n=fs(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,s,l;if(jc(t,this.left,this.right)&&jc(e,this.top,this.bottom))for(l=this.legendHitBoxes,n=0;n<l.length;++n)if(s=l[n],jc(t,s.left,s.left+s.width)&&jc(e,s.top,s.top+s.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(r,t){return!!("mousemove"===r&&(t.onHover||t.onLeave)||t.onClick&&("click"===r||"mouseup"===r))}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type){const s=this._hoveredItem,l=((r,t)=>null!==r&&null!==t&&r.datasetIndex===t.datasetIndex&&r.index===t.index)(s,n);s&&!l&&ir(e.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!l&&ir(e.onHover,[t,n,this],this)}else n&&ir(e.onClick,[t,n,this],this)}}var uq={id:"legend",_element:vF,start(r,t,e){const n=r.legend=new vF({ctx:r.ctx,options:e,chart:r});Jo.configure(r,n,e),Jo.addBox(r,n)},stop(r){Jo.removeBox(r,r.legend),delete r.legend},beforeUpdate(r,t,e){const n=r.legend;Jo.configure(r,n,e),n.options=e},afterUpdate(r){const t=r.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(r,t){t.replay||r.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(r,t,e){const n=t.datasetIndex,s=e.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:r=>r.chart.options.color,boxWidth:40,padding:10,generateLabels(r){const t=r.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:s,color:l}}=r.legend.options;return r._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(e?0:void 0),p=fs(h.borderWidth);return{text:t[u.index].label,fillStyle:h.backgroundColor,fontColor:l,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:h.borderColor,pointStyle:n||h.pointStyle,rotation:h.rotation,textAlign:s||h.textAlign,borderRadius:0,datasetIndex:u.index}},this)}},title:{color:r=>r.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:r=>!r.startsWith("on"),labels:{_scriptable:r=>!["generateLabels","filter","sort"].includes(r)}}};class QM extends hl{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const s=nr(n.text)?n.text.length:1;this._padding=fs(n.padding);const l=s*so(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=l:this.width=l}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:s,right:l,options:u}=this,h=u.align;let g,b,C,p=0;return this.isHorizontal()?(b=Ko(h,n,l),C=e+t,g=l-n):("left"===u.position?(b=n+t,C=Ko(h,s,e),p=-.5*xr):(b=l-t,C=Ko(h,e,s),p=.5*xr),g=s-e),{titleX:b,titleY:C,maxWidth:g,rotation:p}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=so(e.font),l=n.lineHeight/2+this._padding.top,{titleX:u,titleY:h,maxWidth:p,rotation:g}=this._drawArgs(l);Gh(t,e.text,0,0,n,{color:e.color,maxWidth:p,rotation:g,textAlign:vM(e.align),textBaseline:"middle",translation:[u,h]})}}var hq={id:"title",_element:QM,start(r,t,e){!function(r,t){const e=new QM({ctx:r.ctx,options:t,chart:r});Jo.configure(r,e,t),Jo.addBox(r,e),r.titleBlock=e}(r,e)},stop(r){Jo.removeBox(r,r.titleBlock),delete r.titleBlock},beforeUpdate(r,t,e){const n=r.titleBlock;Jo.configure(r,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const iC=new WeakMap;var pq={id:"subtitle",start(r,t,e){const n=new QM({ctx:r.ctx,options:e,chart:r});Jo.configure(r,n,e),Jo.addBox(r,n),iC.set(r,n)},stop(r){Jo.removeBox(r,iC.get(r)),iC.delete(r)},beforeUpdate(r,t,e){const n=iC.get(r);Jo.configure(r,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const I_={average(r){if(!r.length)return!1;let t,e,n=0,s=0,l=0;for(t=0,e=r.length;t<e;++t){const u=r[t].element;if(u&&u.hasValue()){const h=u.tooltipPosition();n+=h.x,s+=h.y,++l}}return{x:n/l,y:s/l}},nearest(r,t){if(!r.length)return!1;let l,u,h,e=t.x,n=t.y,s=Number.POSITIVE_INFINITY;for(l=0,u=r.length;l<u;++l){const p=r[l].element;if(p&&p.hasValue()){const b=CM(t,p.getCenterPoint());b<s&&(s=b,h=p)}}if(h){const p=h.tooltipPosition();e=p.x,n=p.y}return{x:e,y:n}}};function $l(r,t){return t&&(nr(t)?Array.prototype.push.apply(r,t):r.push(t)),r}function Jc(r){return("string"==typeof r||r instanceof String)&&r.indexOf("\n")>-1?r.split("\n"):r}function fq(r,t){const{element:e,datasetIndex:n,index:s}=t,l=r.getDatasetMeta(n).controller,{label:u,value:h}=l.getLabelAndValue(s);return{chart:r,label:u,parsed:l.getParsed(s),raw:r.data.datasets[n].data[s],formattedValue:h,dataset:l.getDataset(),dataIndex:s,datasetIndex:n,element:e}}function bF(r,t){const e=r._chart.ctx,{body:n,footer:s,title:l}=r,{boxWidth:u,boxHeight:h}=t,p=so(t.bodyFont),g=so(t.titleFont),b=so(t.footerFont),C=l.length,w=s.length,x=n.length,N=fs(t.padding);let B=N.height,V=0,$=n.reduce((Re,Pe)=>Re+Pe.before.length+Pe.lines.length+Pe.after.length,0);$+=r.beforeBody.length+r.afterBody.length,C&&(B+=C*g.lineHeight+(C-1)*t.titleSpacing+t.titleMarginBottom),$&&(B+=x*(t.displayColors?Math.max(h,p.lineHeight):p.lineHeight)+($-x)*p.lineHeight+($-1)*t.bodySpacing),w&&(B+=t.footerMarginTop+w*b.lineHeight+(w-1)*t.footerSpacing);let te=0;const xe=function(Re){V=Math.max(V,e.measureText(Re).width+te)};return e.save(),e.font=g.string,zi(r.title,xe),e.font=p.string,zi(r.beforeBody.concat(r.afterBody),xe),te=t.displayColors?u+2+t.boxPadding:0,zi(n,Re=>{zi(Re.before,xe),zi(Re.lines,xe),zi(Re.after,xe)}),te=0,e.font=b.string,zi(r.footer,xe),e.restore(),V+=N.width,{width:V,height:B}}function _q(r,t,e,n){const{x:s,width:l}=e,{width:u,chartArea:{left:h,right:p}}=r;let g="center";return"center"===n?g=s<=(h+p)/2?"left":"right":s<=l/2?g="left":s>=u-l/2&&(g="right"),function(r,t,e,n){const{x:s,width:l}=n,u=e.caretSize+e.caretPadding;if("left"===r&&s+l+u>t.width||"right"===r&&s-l-u<0)return!0}(g,r,t,e)&&(g="center"),g}function yF(r,t,e){const n=t.yAlign||function(r,t){const{y:e,height:n}=t;return e<n/2?"top":e>r.height-n/2?"bottom":"center"}(r,e);return{xAlign:t.xAlign||_q(r,t,e,n),yAlign:n}}function CF(r,t,e,n){const{caretSize:s,caretPadding:l,cornerRadius:u}=r,{xAlign:h,yAlign:p}=e,g=s+l,{topLeft:b,topRight:C,bottomLeft:w,bottomRight:x}=Yf(u);let N=function(r,t){let{x:e,width:n}=r;return"right"===t?e-=n:"center"===t&&(e-=n/2),e}(t,h);const B=function(r,t,e){let{y:n,height:s}=r;return"top"===t?n+=e:n-="bottom"===t?s+e:s/2,n}(t,p,g);return"center"===p?"left"===h?N+=g:"right"===h&&(N-=g):"left"===h?N-=Math.max(b,w)+s:"right"===h&&(N+=Math.max(C,x)+s),{x:go(N,0,n.width-t.width),y:go(B,0,n.height-t.height)}}function rC(r,t,e){const n=fs(e.padding);return"center"===t?r.x+r.width/2:"right"===t?r.x+r.width-n.right:r.x+n.left}function EF(r){return $l([],Jc(r))}function TF(r,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?r.override(e):r}let wF=(()=>{class r extends hl{constructor(e){super(),this.opacity=0,this._active=[],this._chart=e._chart,this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this._chart,s=this.options.setContext(this.getContext()),l=s.enabled&&n.options.animation&&s.animations,u=new mP(this._chart,l);return l._cacheable&&(this._cachedAnimations=Object.freeze(u)),u}getContext(){return this.$context||(this.$context=function(r,t,e){return od(r,{tooltip:t,tooltipItems:e,type:"tooltip"})}(this._chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,l=s.beforeTitle.apply(this,[e]),u=s.title.apply(this,[e]),h=s.afterTitle.apply(this,[e]);let p=[];return p=$l(p,Jc(l)),p=$l(p,Jc(u)),p=$l(p,Jc(h)),p}getBeforeBody(e,n){return EF(n.callbacks.beforeBody.apply(this,[e]))}getBody(e,n){const{callbacks:s}=n,l=[];return zi(e,u=>{const h={before:[],lines:[],after:[]},p=TF(s,u);$l(h.before,Jc(p.beforeLabel.call(this,u))),$l(h.lines,p.label.call(this,u)),$l(h.after,Jc(p.afterLabel.call(this,u))),l.push(h)}),l}getAfterBody(e,n){return EF(n.callbacks.afterBody.apply(this,[e]))}getFooter(e,n){const{callbacks:s}=n,l=s.beforeFooter.apply(this,[e]),u=s.footer.apply(this,[e]),h=s.afterFooter.apply(this,[e]);let p=[];return p=$l(p,Jc(l)),p=$l(p,Jc(u)),p=$l(p,Jc(h)),p}_createItems(e){const n=this._active,s=this._chart.data,l=[],u=[],h=[];let g,b,p=[];for(g=0,b=n.length;g<b;++g)p.push(fq(this._chart,n[g]));return e.filter&&(p=p.filter((C,w,x)=>e.filter(C,w,x,s))),e.itemSort&&(p=p.sort((C,w)=>e.itemSort(C,w,s))),zi(p,C=>{const w=TF(e.callbacks,C);l.push(w.labelColor.call(this,C)),u.push(w.labelPointStyle.call(this,C)),h.push(w.labelTextColor.call(this,C))}),this.labelColors=l,this.labelPointStyles=u,this.labelTextColors=h,this.dataPoints=p,p}update(e,n){const s=this.options.setContext(this.getContext()),l=this._active;let u,h=[];if(l.length){const p=I_[s.position].call(this,l,this._eventPosition);h=this._createItems(s),this.title=this.getTitle(h,s),this.beforeBody=this.getBeforeBody(h,s),this.body=this.getBody(h,s),this.afterBody=this.getAfterBody(h,s),this.footer=this.getFooter(h,s);const g=this._size=bF(this,s),b=Object.assign({},p,g),C=yF(this._chart,s,b),w=CF(s,b,C,this._chart);this.xAlign=C.xAlign,this.yAlign=C.yAlign,u={opacity:1,x:w.x,y:w.y,width:g.width,height:g.height,caretX:p.x,caretY:p.y}}else 0!==this.opacity&&(u={opacity:0});this._tooltipItems=h,this.$context=void 0,u&&this._resolveAnimations().update(this,u),e&&s.external&&s.external.call(this,{chart:this._chart,tooltip:this,replay:n})}drawCaret(e,n,s,l){const u=this.getCaretPosition(e,s,l);n.lineTo(u.x1,u.y1),n.lineTo(u.x2,u.y2),n.lineTo(u.x3,u.y3)}getCaretPosition(e,n,s){const{xAlign:l,yAlign:u}=this,{caretSize:h,cornerRadius:p}=s,{topLeft:g,topRight:b,bottomLeft:C,bottomRight:w}=Yf(p),{x,y:N}=e,{width:B,height:V}=n;let $,te,xe,Re,Pe,nt;return"center"===u?(Pe=N+V/2,"left"===l?($=x,te=$-h,Re=Pe+h,nt=Pe-h):($=x+B,te=$+h,Re=Pe-h,nt=Pe+h),xe=$):(te="left"===l?x+Math.max(g,C)+h:"right"===l?x+B-Math.max(b,w)-h:this.caretX,"top"===u?(Re=N,Pe=Re-h,$=te-h,xe=te+h):(Re=N+V,Pe=Re+h,$=te+h,xe=te-h),nt=Re),{x1:$,x2:te,x3:xe,y1:Re,y2:Pe,y3:nt}}drawTitle(e,n,s){const l=this.title,u=l.length;let h,p,g;if(u){const b=Jf(s.rtl,this.x,this.width);for(e.x=rC(this,s.titleAlign,s),n.textAlign=b.textAlign(s.titleAlign),n.textBaseline="middle",h=so(s.titleFont),p=s.titleSpacing,n.fillStyle=s.titleColor,n.font=h.string,g=0;g<u;++g)n.fillText(l[g],b.x(e.x),e.y+h.lineHeight/2),e.y+=h.lineHeight+p,g+1===u&&(e.y+=s.titleMarginBottom-p)}}_drawColorBox(e,n,s,l,u){const h=this.labelColors[s],p=this.labelPointStyles[s],{boxHeight:g,boxWidth:b,boxPadding:C}=u,w=so(u.bodyFont),x=rC(this,"left",u),N=l.x(x),V=n.y+(g<w.lineHeight?(w.lineHeight-g)/2:0);if(u.usePointStyle){const $={radius:Math.min(b,g)/2,pointStyle:p.pointStyle,rotation:p.rotation,borderWidth:1},te=l.leftForLtr(N,b)+b/2,xe=V+g/2;e.strokeStyle=u.multiKeyBackground,e.fillStyle=u.multiKeyBackground,By(e,$,te,xe),e.strokeStyle=h.borderColor,e.fillStyle=h.backgroundColor,By(e,$,te,xe)}else{e.lineWidth=h.borderWidth||1,e.strokeStyle=h.borderColor,e.setLineDash(h.borderDash||[]),e.lineDashOffset=h.borderDashOffset||0;const $=l.leftForLtr(N,b-C),te=l.leftForLtr(l.xPlus(N,1),b-C-2),xe=Yf(h.borderRadius);Object.values(xe).some(Re=>0!==Re)?(e.beginPath(),e.fillStyle=u.multiKeyBackground,Uy(e,{x:$,y:V,w:b,h:g,radius:xe}),e.fill(),e.stroke(),e.fillStyle=h.backgroundColor,e.beginPath(),Uy(e,{x:te,y:V+1,w:b-2,h:g-2,radius:xe}),e.fill()):(e.fillStyle=u.multiKeyBackground,e.fillRect($,V,b,g),e.strokeRect($,V,b,g),e.fillStyle=h.backgroundColor,e.fillRect(te,V+1,b-2,g-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:l}=this,{bodySpacing:u,bodyAlign:h,displayColors:p,boxHeight:g,boxWidth:b,boxPadding:C}=s,w=so(s.bodyFont);let x=w.lineHeight,N=0;const B=Jf(s.rtl,this.x,this.width),V=function(At){n.fillText(At,B.x(e.x+N),e.y+x/2),e.y+=x+u},$=B.textAlign(h);let te,xe,Re,Pe,nt,ct,St;for(n.textAlign=h,n.textBaseline="middle",n.font=w.string,e.x=rC(this,$,s),n.fillStyle=s.bodyColor,zi(this.beforeBody,V),N=p&&"right"!==$?"center"===h?b/2+C:b+2+C:0,Pe=0,ct=l.length;Pe<ct;++Pe){for(te=l[Pe],xe=this.labelTextColors[Pe],n.fillStyle=xe,zi(te.before,V),Re=te.lines,p&&Re.length&&(this._drawColorBox(n,e,Pe,B,s),x=Math.max(w.lineHeight,g)),nt=0,St=Re.length;nt<St;++nt)V(Re[nt]),x=w.lineHeight;zi(te.after,V)}N=0,x=w.lineHeight,zi(this.afterBody,V),e.y-=u}drawFooter(e,n,s){const l=this.footer,u=l.length;let h,p;if(u){const g=Jf(s.rtl,this.x,this.width);for(e.x=rC(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=g.textAlign(s.footerAlign),n.textBaseline="middle",h=so(s.footerFont),n.fillStyle=s.footerColor,n.font=h.string,p=0;p<u;++p)n.fillText(l[p],g.x(e.x),e.y+h.lineHeight/2),e.y+=h.lineHeight+s.footerSpacing}}drawBackground(e,n,s,l){const{xAlign:u,yAlign:h}=this,{x:p,y:g}=e,{width:b,height:C}=s,{topLeft:w,topRight:x,bottomLeft:N,bottomRight:B}=Yf(l.cornerRadius);n.fillStyle=l.backgroundColor,n.strokeStyle=l.borderColor,n.lineWidth=l.borderWidth,n.beginPath(),n.moveTo(p+w,g),"top"===h&&this.drawCaret(e,n,s,l),n.lineTo(p+b-x,g),n.quadraticCurveTo(p+b,g,p+b,g+x),"center"===h&&"right"===u&&this.drawCaret(e,n,s,l),n.lineTo(p+b,g+C-B),n.quadraticCurveTo(p+b,g+C,p+b-B,g+C),"bottom"===h&&this.drawCaret(e,n,s,l),n.lineTo(p+N,g+C),n.quadraticCurveTo(p,g+C,p,g+C-N),"center"===h&&"left"===u&&this.drawCaret(e,n,s,l),n.lineTo(p,g+w),n.quadraticCurveTo(p,g,p+w,g),n.closePath(),n.fill(),l.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this._chart,s=this.$animations,l=s&&s.x,u=s&&s.y;if(l||u){const h=I_[e.position].call(this,this._active,this._eventPosition);if(!h)return;const p=this._size=bF(this,e),g=Object.assign({},h,this._size),b=yF(n,e,g),C=CF(e,g,b,n);(l._to!==C.x||u._to!==C.y)&&(this.xAlign=b.xAlign,this.yAlign=b.yAlign,this.width=p.width,this.height=p.height,this.caretX=h.x,this.caretY=h.y,this._resolveAnimations().update(this,C))}}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const l={width:this.width,height:this.height},u={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const h=fs(n.padding);n.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=s,this.drawBackground(u,e,l,n),aP(e,n.textDirection),u.y+=h.top,this.drawTitle(u,e,n),this.drawBody(u,e,n),this.drawFooter(u,e,n),lP(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,l=e.map(({datasetIndex:p,index:g})=>{const b=this._chart.getDatasetMeta(p);if(!b)throw new Error("Cannot find a dataset at index "+p);return{datasetIndex:p,element:b.data[g],index:g}}),u=!Dy(s,l),h=this._positionChanged(l,n);(u||h)&&(this._active=l,this._eventPosition=n,this.update(!0))}handleEvent(e,n){const s=this.options,l=this._active||[];let u=!1,h=[];"mouseout"!==e.type&&(h=this._chart.getElementsAtEventForMode(e,s.mode,s,n),s.reverse&&h.reverse());const p=this._positionChanged(h,e);return u=n||!Dy(h,l)||p,u&&(this._active=h,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),u}_positionChanged(e,n){const{caretX:s,caretY:l,options:u}=this,h=I_[u.position].call(this,e,n);return!1!==h&&(s!==h.x||l!==h.y)}}return r.positioners=I_,r})();var Eq=Object.freeze({__proto__:null,Decimation:zZ,Filler:aq,Legend:uq,SubTitle:pq,Title:hq,Tooltip:{id:"tooltip",_element:wF,positioners:I_,afterInit(r,t,e){e&&(r.tooltip=new wF({_chart:r,options:e}))},beforeUpdate(r,t,e){r.tooltip&&r.tooltip.initialize(e)},reset(r,t,e){r.tooltip&&r.tooltip.initialize(e)},afterDraw(r){const t=r.tooltip,e={tooltip:t};!1!==r.notifyPlugins("beforeTooltipDraw",e)&&(t&&t.draw(r.ctx),r.notifyPlugins("afterTooltipDraw",e))},afterEvent(r,t){r.tooltip&&r.tooltip.handleEvent(t.event,t.replay)&&(t.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(r,t)=>t.bodyFont.size,boxWidth:(r,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:zc,title(r){if(r.length>0){const t=r[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:zc,beforeBody:zc,beforeLabel:zc,label(r){if(this&&this.options&&"dataset"===this.options.mode)return r.label+": "+r.formattedValue||r.formattedValue;let t=r.dataset.label||"";t&&(t+=": ");const e=r.formattedValue;return xi(e)||(t+=e),t},labelColor(r){const e=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(r){const e=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:zc,afterBody:zc,beforeFooter:zc,footer:zc,afterFooter:zc}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:r=>"filter"!==r&&"itemSort"!==r&&"external"!==r,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class oC extends Xh{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:s,label:l}of e)n[s]===l&&n.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(xi(t))return null;const n=this.getLabels();return((r,t)=>null===r?null:go(Math.round(r),0,t))(e=isFinite(e)&&n[e]===t?e:function(r,t,e,n){const s=r.indexOf(t);return-1===s?((r,t,e,n)=>("string"==typeof t?(e=r.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e))(r,t,e,n):s!==r.lastIndexOf(t)?e:s}(n,t,Zn(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,s=[];let l=this.getLabels();l=0===t&&e===l.length-1?l:l.slice(t,e+1),this._valueRange=Math.max(l.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let u=t;u<=e;u++)s.push({value:u});return s}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function SF(r,t,{horizontal:e,minRotation:n}){const s=ul(n),l=(e?Math.sin(s):Math.cos(s))||.001;return Math.min(t/l,.75*t*(""+r).length)}oC.id="category",oC.defaults={ticks:{callback:oC.prototype.getLabelForValue}};class sC extends Xh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return xi(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:l}=this;const u=p=>s=e?s:p,h=p=>l=n?l:p;if(t){const p=Yl(s),g=Yl(l);p<0&&g<0?h(0):p>0&&g>0&&u(0)}if(s===l){let p=1;(l>=Number.MAX_SAFE_INTEGER||s<=Number.MIN_SAFE_INTEGER)&&(p=Math.abs(.05*l)),h(l+p),t||u(s-p)}this.min=s,this.max=l}getTickLimit(){const t=this.options.ticks;let s,{maxTicksLimit:e,stepSize:n}=t;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const u=function(r,t){const e=[],{bounds:s,step:l,min:u,max:h,precision:p,count:g,maxTicks:b,maxDigits:C,includeBounds:w}=r,x=l||1,N=b-1,{min:B,max:V}=t,$=!xi(u),te=!xi(h),xe=!xi(g),Re=(V-B)/(C+1);let nt,ct,St,At,Pe=xL((V-B)/N/x)*x;if(Pe<1e-14&&!$&&!te)return[{value:B},{value:V}];At=Math.ceil(V/Pe)-Math.floor(B/Pe),At>N&&(Pe=xL(At*Pe/N/x)*x),xi(p)||(nt=Math.pow(10,p),Pe=Math.ceil(Pe*nt)/nt),"ticks"===s?(ct=Math.floor(B/Pe)*Pe,St=Math.ceil(V/Pe)*Pe):(ct=B,St=V),$&&te&&l&&function(r,t){const e=Math.round(r);return e-t<=r&&e+t>=r}((h-u)/l,Pe/1e3)?(At=Math.round(Math.min((h-u)/Pe,b)),Pe=(h-u)/At,ct=u,St=h):xe?(ct=$?u:ct,St=te?h:St,At=g-1,Pe=(St-ct)/At):(At=(St-ct)/Pe,At=f_(At,Math.round(At),Pe/1e3)?Math.round(At):Math.ceil(At));const Cn=Math.max(AL(Pe),AL(ct));nt=Math.pow(10,xi(p)?Cn:p),ct=Math.round(ct*nt)/nt,St=Math.round(St*nt)/nt;let Gt=0;for($&&(w&&ct!==u?(e.push({value:u}),ct<u&&Gt++,f_(Math.round((ct+Gt*Pe)*nt)/nt,u,SF(u,Re,r))&&Gt++):ct<u&&Gt++);Gt<At;++Gt)e.push({value:Math.round((ct+Gt*Pe)*nt)/nt});return te&&w&&St!==h?e.length&&f_(e[e.length-1].value,h,SF(h,Re,r))?e[e.length-1].value=h:e.push({value:h}):(!te||St===h)&&e.push({value:St}),e}({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&IL(u,this,"value"),t.reverse?(u.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),u}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const s=(n-e)/Math.max(t.length-1,1)/2;e-=s,n+=s}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return C_(t,this.chart.options.locale,this.options.ticks.format)}}class ZM extends sC{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Vr(t)?t:0,this.max=Vr(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=ul(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,l=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,l.lineHeight/s))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function MF(r){return r/Math.pow(10,Math.floor(Ta(r)))==1}ZM.id="linear",ZM.defaults={ticks:{callback:$y.formatters.numeric}};class qM extends Xh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=sC.prototype.parse.apply(this,[t,e]);if(0!==n)return Vr(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Vr(t)?Math.max(0,t):null,this.max=Vr(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,s=this.max;const l=p=>n=t?n:p,u=p=>s=e?s:p,h=(p,g)=>Math.pow(10,Math.floor(Ta(p))+g);n===s&&(n<=0?(l(1),u(10)):(l(h(n,-1)),u(h(s,1)))),n<=0&&l(h(s,-1)),s<=0&&u(h(n,1)),this._zero&&this.min!==this._suggestedMin&&n===h(this.min,0)&&l(h(n,-1)),this.min=n,this.max=s}buildTicks(){const t=this.options,n=function(r,t){const e=Math.floor(Ta(t.max)),n=Math.ceil(t.max/Math.pow(10,e)),s=[];let l=Ca(r.min,Math.pow(10,Math.floor(Ta(t.min)))),u=Math.floor(Ta(l)),h=Math.floor(l/Math.pow(10,u)),p=u<0?Math.pow(10,Math.abs(u)):1;do{s.push({value:l,major:MF(l)}),++h,10===h&&(h=1,++u,p=u>=0?1:p),l=Math.round(h*Math.pow(10,u)*p)/p}while(u<e||u===e&&h<n);const g=Ca(r.max,l);return s.push({value:g,major:MF(l)}),s}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&IL(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return void 0===t?"0":C_(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ta(t),this._valueRange=Ta(this.max)-Ta(t)}getPixelForValue(t){return(void 0===t||0===t)&&(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ta(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function eD(r){const t=r.ticks;if(t.display&&r.display){const e=fs(t.backdropPadding);return Zn(t.font&&t.font.size,fi.font.size)+e.height}return 0}function Rq(r,t,e){return e=nr(e)?e:[e],{w:UK(r,t.string,e),h:e.length*t.lineHeight}}function DF(r,t,e,n,s){return r===n||r===s?{start:t-e/2,end:t+e/2}:r<n||r>s?{start:t-e,end:t}:{start:t,end:t+e}}function Aq(r){return 0===r||180===r?"center":r<180?"left":"right"}function Oq(r,t,e){return"right"===e?r-=t:"center"===e&&(r-=t/2),r}function kq(r,t,e){return 90===e||270===e?r-=t/2:(e>270||e<90)&&(r-=t),r}function RF(r,t,e,n){const{ctx:s}=r;if(e)s.arc(r.xCenter,r.yCenter,t,0,$i);else{let l=r.getPointPosition(0,t);s.moveTo(l.x,l.y);for(let u=1;u<n;u++)l=r.getPointPosition(u,t),s.lineTo(l.x,l.y)}}function aC(r){return Xf(r)?r:0}qM.id="logarithmic",qM.defaults={ticks:{callback:$y.formatters.logarithmic,major:{enabled:!0}}};class A_ extends sC{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){this.width=this.maxWidth,this.height=this.maxHeight,this.paddingTop=eD(this.options)/2,this.xCenter=Math.floor(this.width/2),this.yCenter=Math.floor((this.height-this.paddingTop)/2),this.drawingArea=Math.min(this.height-this.paddingTop,this.width)/2}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Vr(t)&&!isNaN(t)?t:0,this.max=Vr(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/eD(this.options))}generateTickLabels(t){sC.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,n)=>{const s=ir(this.options.pointLabels.callback,[e,n],this);return s||0===s?s:""})}fit(){const t=this.options;t.display&&t.pointLabels.display?function(r){const t={l:0,r:r.width,t:0,b:r.height-r.paddingTop},e={},n=[],s=[],l=r.getLabels().length;for(let u=0;u<l;u++){const h=r.options.pointLabels.setContext(r.getPointLabelContext(u));s[u]=h.padding;const p=r.getPointPosition(u,r.drawingArea+s[u]),g=so(h.font),b=Rq(r.ctx,g,r._pointLabels[u]);n[u]=b;const C=r.getIndexAngle(u),w=yM(C),x=DF(w,p.x,b.w,0,180),N=DF(w,p.y,b.h,90,270);x.start<t.l&&(t.l=x.start,e.l=C),x.end>t.r&&(t.r=x.end,e.r=C),N.start<t.t&&(t.t=N.start,e.t=C),N.end>t.b&&(t.b=N.end,e.b=C)}r._setReductions(r.drawingArea,t,e),r._pointLabelItems=function(r,t,e){const n=[],s=r.getLabels().length,l=r.options,u=eD(l),h=r.getDistanceFromCenterForValue(l.ticks.reverse?r.min:r.max);for(let p=0;p<s;p++){const b=r.getPointPosition(p,h+(0===p?u/2:0)+e[p]),C=yM(r.getIndexAngle(p)),w=t[p],x=kq(b.y,w.h,C),N=Aq(C),B=Oq(b.x,w.w,N);n.push({x:b.x,y:x,textAlign:N,left:B,top:x,right:B+w.w,bottom:x+w.h})}return n}(r,n,s)}(this):this.setCenterPoint(0,0,0,0)}_setReductions(t,e,n){let s=e.l/Math.sin(n.l),l=Math.max(e.r-this.width,0)/Math.sin(n.r),u=-e.t/Math.cos(n.t),h=-Math.max(e.b-(this.height-this.paddingTop),0)/Math.cos(n.b);s=aC(s),l=aC(l),u=aC(u),h=aC(h),this.drawingArea=Math.max(t/2,Math.min(Math.floor(t-(s+l)/2),Math.floor(t-(u+h)/2))),this.setCenterPoint(s,l,u,h)}setCenterPoint(t,e,n,s){const h=n+this.drawingArea,p=this.height-this.paddingTop-s-this.drawingArea;this.xCenter=Math.floor((t+this.drawingArea+(this.width-e-this.drawingArea))/2+this.left),this.yCenter=Math.floor((h+p)/2+this.top+this.paddingTop)}getIndexAngle(t){return dl(t*($i/this.getLabels().length)+ul(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(xi(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(xi(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(r,t,e){return od(r,{label:e,index:t,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e){const n=this.getIndexAngle(t)-Hr;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:s,bottom:l}=this._pointLabelItems[t];return{left:e,top:n,right:s,bottom:l}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),RF(this,this.getDistanceFromCenterForValue(this._endValue),e,this.getLabels().length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:s}=e,l=this.getLabels().length;let u,h,p;if(e.pointLabels.display&&function(r,t){const{ctx:e,options:{pointLabels:n}}=r;for(let s=t-1;s>=0;s--){const l=n.setContext(r.getPointLabelContext(s)),u=so(l.font),{x:h,y:p,textAlign:g,left:b,top:C,right:w,bottom:x}=r._pointLabelItems[s],{backdropColor:N}=l;if(!xi(N)){const B=fs(l.backdropPadding);e.fillStyle=N,e.fillRect(b-B.left,C-B.top,w-b+B.width,x-C+B.height)}Gh(e,r._pointLabels[s],h,p+u.lineHeight/2,u,{color:l.color,textAlign:g,textBaseline:"middle"})}}(this,l),s.display&&this.ticks.forEach((g,b)=>{0!==b&&(h=this.getDistanceFromCenterForValue(g.value),function(r,t,e,n){const s=r.ctx,l=t.circular,{color:u,lineWidth:h}=t;!l&&!n||!u||!h||e<0||(s.save(),s.strokeStyle=u,s.lineWidth=h,s.setLineDash(t.borderDash),s.lineDashOffset=t.borderDashOffset,s.beginPath(),RF(r,e,l,n),s.closePath(),s.stroke(),s.restore())}(this,s.setContext(this.getContext(b-1)),h,l))}),n.display){for(t.save(),u=this.getLabels().length-1;u>=0;u--){const g=n.setContext(this.getPointLabelContext(u)),{color:b,lineWidth:C}=g;!C||!b||(t.lineWidth=C,t.strokeStyle=b,t.setLineDash(g.borderDash),t.lineDashOffset=g.borderDashOffset,h=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),p=this.getPointPosition(u,h),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(p.x,p.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const s=this.getIndexAngle(0);let l,u;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((h,p)=>{if(0===p&&!e.reverse)return;const g=n.setContext(this.getContext(p)),b=so(g.font);if(l=this.getDistanceFromCenterForValue(this.ticks[p].value),g.showLabelBackdrop){t.font=b.string,u=t.measureText(h.label).width,t.fillStyle=g.backdropColor;const C=fs(g.backdropPadding);t.fillRect(-u/2-C.left,-l-b.size/2-C.top,u+C.width,b.size+C.height)}Gh(t,h.label,0,-l,b,{color:g.color})}),t.restore()}drawTitle(){}}A_.id="radialLinear",A_.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:$y.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:r=>r,padding:5}},A_.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},A_.descriptors={angleLines:{_fallback:"grid"}};const lC={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ns=Object.keys(lC);function Fq(r,t){return r-t}function xF(r,t){if(xi(t))return null;const e=r._adapter,{parser:n,round:s,isoWeekday:l}=r._parseOpts;let u=t;return"function"==typeof n&&(u=n(u)),Vr(u)||(u="string"==typeof n?e.parse(u,n):e.parse(u)),null===u?null:(s&&(u="week"!==s||!Xf(l)&&!0!==l?e.startOf(u,s):e.startOf(u,"isoWeek",l)),+u)}function IF(r,t,e,n){const s=Ns.length;for(let l=Ns.indexOf(r);l<s-1;++l){const u=lC[Ns[l]],h=u.steps?u.steps:Number.MAX_SAFE_INTEGER;if(u.common&&Math.ceil((e-t)/(h*u.size))<=n)return Ns[l]}return Ns[s-1]}function AF(r,t,e){if(e){if(e.length){const{lo:n,hi:s}=AM(e,t);r[e[n]>=t?e[n]:e[s]]=!0}}else r[t]=!0}function OF(r,t,e){const n=[],s={},l=t.length;let u,h;for(u=0;u<l;++u)h=t[u],s[h]=u,n.push({value:h,major:!1});return 0!==l&&e?function(r,t,e,n){const s=r._adapter,l=+s.startOf(t[0].value,n),u=t[t.length-1].value;let h,p;for(h=l;h<=u;h=+s.add(h,1,n))p=e[h],p>=0&&(t[p].major=!0);return t}(r,n,s,e):n}let tD=(()=>{class r extends Xh{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n){const s=e.time||(e.time={}),l=this._adapter=new pQ._date(e.adapters.date);h_(s.displayFormats,l.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return void 0===e?null:xF(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:l,max:u,minDefined:h,maxDefined:p}=this.getUserBounds();function g(b){!h&&!isNaN(b.min)&&(l=Math.min(l,b.min)),!p&&!isNaN(b.max)&&(u=Math.max(u,b.max))}(!h||!p)&&(g(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&g(this.getMinMax(!1))),l=Vr(l)&&!isNaN(l)?l:+n.startOf(Date.now(),s),u=Vr(u)&&!isNaN(u)?u:+n.endOf(Date.now(),s)+1,this.min=Math.min(l,u-1),this.max=Math.max(l+1,u)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,l="labels"===s.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&l.length&&(this.min=this._userMin||l[0],this.max=this._userMax||l[l.length-1]);const u=this.min,p=function(r,t,e){let n=0,s=r.length;for(;n<s&&r[n]<t;)n++;for(;s>n&&r[s-1]>e;)s--;return n>0||s<r.length?r.slice(n,s):r}(l,u,this.max);return this._unit=n.unit||(s.autoSkip?IF(n.minUnit,this.min,this.max,this._getLabelCapacity(u)):function(r,t,e,n,s){for(let l=Ns.length-1;l>=Ns.indexOf(e);l--){const u=Ns[l];if(lC[u].common&&r._adapter.diff(s,n,u)>=t-1)return u}return Ns[e?Ns.indexOf(e):0]}(this,p.length,n.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&"year"!==this._unit?function(r){for(let t=Ns.indexOf(r)+1,e=Ns.length;t<e;++t)if(lC[Ns[t]].common)return Ns[t]}(this._unit):void 0,this.initOffsets(l),e.reverse&&p.reverse(),OF(this,p,this._majorUnit)}initOffsets(e){let l,u,n=0,s=0;this.options.offset&&e.length&&(l=this.getDecimalForValue(e[0]),n=1===e.length?1-l:(this.getDecimalForValue(e[1])-l)/2,u=this.getDecimalForValue(e[e.length-1]),s=1===e.length?u:(u-this.getDecimalForValue(e[e.length-2]))/2);const h=e.length<3?.5:.25;n=go(n,0,h),s=go(s,0,h),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,l=this.options,u=l.time,h=u.unit||IF(u.minUnit,n,s,this._getLabelCapacity(n)),p=Zn(u.stepSize,1),g="week"===h&&u.isoWeekday,b=Xf(g)||!0===g,C={};let x,N,w=n;if(b&&(w=+e.startOf(w,"isoWeek",g)),w=+e.startOf(w,b?"day":h),e.diff(s,n,h)>1e5*p)throw new Error(n+" and "+s+" are too far apart with stepSize of "+p+" "+h);const B="data"===l.ticks.source&&this.getDataTimestamps();for(x=w,N=0;x<s;x=+e.add(x,p,h),N++)AF(C,x,B);return(x===s||"ticks"===l.bounds||1===N)&&AF(C,x,B),Object.keys(C).sort((V,$)=>V-$).map(V=>+V)}getLabelForValue(e){const s=this.options.time;return this._adapter.format(e,s.tooltipFormat?s.tooltipFormat:s.displayFormats.datetime)}_tickFormatFunction(e,n,s,l){const u=this.options,h=u.time.displayFormats,p=this._unit,g=this._majorUnit,C=g&&h[g],w=s[n],N=this._adapter.format(e,l||(g&&C&&w&&w.major?C:p&&h[p])),B=u.ticks.callback;return B?ir(B,[N,n,s],this):N}generateTickLabels(e){let n,s,l;for(n=0,s=e.length;n<s;++n)l=e[n],l.label=this._tickFormatFunction(l.value,n,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,l=ul(this.isHorizontal()?n.maxRotation:n.minRotation),u=Math.cos(l),h=Math.sin(l),p=this._resolveTickFontOptions(0).size;return{w:s*u+p*h,h:s*h+p*u}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,l=s[n.unit]||s.millisecond,u=this._tickFormatFunction(e,0,OF(this,[e],this._majorUnit),l),h=this._getLabelSize(u),p=Math.floor(this.isHorizontal()?this.width/h.w:this.height/h.h)-1;return p>0?p:1}getDataTimestamps(){let n,s,e=this._cache.data||[];if(e.length)return e;const l=this.getMatchingVisibleMetas();if(this._normalized&&l.length)return this._cache.data=l[0].controller.getAllParsedValues(this);for(n=0,s=l.length;n<s;++n)e=e.concat(l[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const l=this.getLabels();for(n=0,s=l.length;n<s;++n)e.push(xF(this,l[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return $L(e.sort(Fq))}}return r.id="time",r.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},r})();function cC(r,t,e){let l,u,h,p,n=0,s=r.length-1;e?(t>=r[n].pos&&t<=r[s].pos&&({lo:n,hi:s}=Xc(r,"pos",t)),({pos:l,time:h}=r[n]),({pos:u,time:p}=r[s])):(t>=r[n].time&&t<=r[s].time&&({lo:n,hi:s}=Xc(r,"time",t)),({time:l,pos:h}=r[n]),({time:u,pos:p}=r[s]));const g=u-l;return g?h+(p-h)*(t-l)/g:h}class nD extends tD{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=cC(e,this.min),this._tableRange=cC(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,s=[],l=[];let u,h,p,g,b;for(u=0,h=t.length;u<h;++u)g=t[u],g>=e&&g<=n&&s.push(g);if(s.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(u=0,h=s.length;u<h;++u)b=s[u+1],p=s[u-1],g=s[u],Math.round((b+p)/2)!==g&&l.push({time:g,pos:u/(h-1)});return l}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(cC(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return cC(this._table,n*this._tableRange+this._minPos,!0)}}nD.id="timeseries",nD.defaults=tD.defaults,qy.register(hQ,HZ,Eq,Object.freeze({__proto__:null,CategoryScale:oC,LinearScale:ZM,LogarithmicScale:qM,RadialLinearScale:A_,TimeScale:tD,TimeSeriesScale:nD}));const Wq=qy;class pl{constructor(t){this.table=t}reloadData(t,e){return this.table.dataLoader.load(t,void 0,void 0,void 0,e)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(t){return this.table.eventBus.subscribed(t)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(t){return this.table.externalEvents.subscribed(t)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(t,e){return void 0!==e&&(this.table.options[t]=e),this.table.options[t]}setOption(t,e){return void 0!==e&&(this.table.options[t]=e),this.table.options[t]}module(t){return this.table.module(t)}}class gi extends pl{constructor(t,e){super(t),this._handler=null}initialize(){}registerTableOption(t,e){this.table.optionsList.register(t,e)}registerColumnOption(t,e){this.table.columnManager.optionsList.register(t,e)}registerTableFunction(t,e){void 0===this.table[t]?this.table[t]=e:console.warn("Unable to bind table function, name already in use",t)}registerComponentFunction(t,e,n){return this.table.componentFunctionBinder.bind(t,e,n)}registerDataHandler(t,e){this.table.rowManager.registerDataPipelineHandler(t,e),this._handler=t}registerDisplayHandler(t,e){this.table.rowManager.registerDisplayPipelineHandler(t,e),this._handler=t}refreshData(t,e){e||(e=this._handler),e&&this.table.rowManager.refreshActiveData(e,!1,t)}}class gr{static elVisible(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)}static elOffset(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(t,e,n=[]){var s={}.__proto__,l=[].__proto__;for(var u in e||(e=Object.assign(Array.isArray(t)?[]:{},t)),t){let p,g,h=t[u];null!=h&&"object"==typeof h&&(h.__proto__===s||h.__proto__===l)&&(p=n.findIndex(b=>b.subject===h),p>-1?e[u]=n[p].copy:(g=Object.assign(Array.isArray(h)?[]:{},h),n.unshift({subject:h,copy:g}),e[u]=this.deepClone(h,g,n)))}return e}}var zq={};let jq=(()=>{class r extends gi{constructor(e){super(e),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(e){var n=!1,s={};this.allowedTypes.forEach(l=>{var h,u="accessor"+(l.charAt(0).toUpperCase()+l.slice(1));e.definition[u]&&(h=this.lookupAccessor(e.definition[u]))&&(n=!0,s[u]={accessor:h,params:e.definition[u+"Params"]||{}})}),n&&(e.modules.accessor=s)}lookupAccessor(e){var n=!1;switch(typeof e){case"string":r.accessors[e]?n=r.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":n=e}return n}transformRow(e,n){var s="accessor"+(n.charAt(0).toUpperCase()+n.slice(1)),l=e.getComponent(),u=gr.deepClone(e.data||{});return this.table.columnManager.traverse(function(h){var p,g,b,C;h.modules.accessor&&(g=h.modules.accessor[s]||h.modules.accessor.accessor||!1)&&"undefined"!=(p=h.getFieldValue(u))&&(C=h.getComponent(),b="function"==typeof g.params?g.params(p,u,n,C,l):g.params,h.setFieldValue(u,g.accessor(p,u,n,b,C,l)))}),u}}return r.moduleName="accessor",r.accessors=zq,r})();var Xq={method:"GET"};function iD(r,t){var e=[];if(t=t||"",Array.isArray(r))r.forEach((s,l)=>{e=e.concat(iD(s,t?t+"["+l+"]":l))});else if("object"==typeof r)for(var n in r)e=e.concat(iD(r[n],t?t+"["+n+"]":n));else e.push({key:t,value:r});return e}function Yq(r){var t=iD(r),e=[];return t.forEach(function(n){e.push(encodeURIComponent(n.key)+"="+encodeURIComponent(n.value))}),e.join("&")}function $q(r,t,e){return r&&e&&Object.keys(e).length&&(!t.method||"get"==t.method.toLowerCase())&&(t.method="get",r+=(r.includes("?")?"&":"?")+Yq(e)),r}function Kq(r,t,e){var n;return new Promise((s,l)=>{if(r=this.urlGenerator.call(this.table,r,t,e),"GET"!=t.method.toUpperCase())if(n="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var u in n.headers)t.headers||(t.headers={}),void 0===t.headers[u]&&(t.headers[u]=n.headers[u]);t.body=n.body.call(this,r,t,e)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);r?(void 0===t.headers&&(t.headers={}),void 0===t.headers.Accept&&(t.headers.Accept="application/json"),void 0===t.headers["X-Requested-With"]&&(t.headers["X-Requested-With"]="XMLHttpRequest"),void 0===t.mode&&(t.mode="cors"),"cors"==t.mode?(void 0===t.headers.Origin&&(t.headers.Origin=window.location.origin),void 0===t.credentials&&(t.credentials="same-origin")):void 0===t.credentials&&(t.credentials="include"),fetch(r,t).then(h=>{h.ok?h.json().then(p=>{s(p)}).catch(p=>{l(p),console.warn("Ajax Load Error - Invalid JSON returned",p)}):(console.error("Ajax Load Error - Connection Error: "+h.status,h.statusText),l(h))}).catch(h=>{console.error("Ajax Load Error - Connection Error: ",h),l(h)})):(console.warn("Ajax Load Error - No URL Set"),s([]))})}function rD(r,t){var e=[];if(t=t||"",Array.isArray(r))r.forEach((s,l)=>{e=e.concat(rD(s,t?t+"["+l+"]":l))});else if("object"==typeof r)for(var n in r)e=e.concat(rD(r[n],t?t+"["+n+"]":n));else e.push({key:t,value:r});return e}var Jq={json:{headers:{"Content-Type":"application/json"},body:function(r,t,e){return JSON.stringify(e)}},form:{headers:{},body:function(r,t,e){var n=rD(e),s=new FormData;return n.forEach(function(l){s.append(l.key,l.value)}),s}}};let Qq=(()=>{class r extends gi{constructor(e){super(e),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=r.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||r.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||r.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(e,n,s,l){return!((e||!this.url)&&"string"!=typeof e)}requestData(e,n,s,l,u){return this.requestDataCheck(e)?(e&&this.setUrl(e),n&&this.setParams(n,!0),s&&this.setConfig(s),this.sendRequest()):u}setParams(e,n){if(n){this.params=this.params||{};for(let s in e)this.params[s]=e[s]}else this.params=e}getParams(){return this.params||{}}setConfig(e){if(this._loadDefaultConfig(),"string"==typeof e)this.config.method=e;else for(let n in e)this.config[n]=e[n]}_loadDefaultConfig(e){if(!this.config||e){this.config={};for(let n in r.defaultConfig)this.config[n]=r.defaultConfig[n]}}setUrl(e){this.url=e}getUrl(){return this.url}sendRequest(e){var n=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(n,this.config,this.params).then(s=>(this.table.options.ajaxResponse&&(s=this.table.options.ajaxResponse.call(this.table,this.url,this.params,s)),s)):Promise.reject()}}return r.moduleName="ajax",r.defaultConfig=Xq,r.defaultURLGenerator=$q,r.defaultLoaderPromise=Kq,r.contentTypeFormatters=Jq,r})();var Zq={replace:function(r){return this.table.setData(r)},update:function(r){return this.table.updateOrAddData(r)},insert:function(r){return this.table.addData(r)}},qq={table:function(r){var t=[],e=!0,n=this.table.columnManager.columns,s=[],l=[];return(r=r.split("\n")).forEach(function(u){t.push(u.split("\t"))}),!(!t.length||1===t.length&&t[0].length<2)&&(t[0].forEach(function(u){var h=n.find(function(p){return u&&p.definition.title&&u.trim()&&p.definition.title.trim()===u.trim()});h?s.push(h):e=!1}),e||(e=!0,s=[],t[0].forEach(function(u){var h=n.find(function(p){return u&&p.field&&u.trim()&&p.field.trim()===u.trim()});h?s.push(h):e=!1}),e||(s=this.table.columnManager.columnsByIndex)),e&&t.shift(),t.forEach(function(u){var h={};u.forEach(function(p,g){s[g]&&(h[s[g].field]=p)}),l.push(h)}),l)}};let eee=(()=>{class r extends gi{constructor(e){super(e),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",e=>{var n,s;if(!this.blocked){if(e.preventDefault(),this.customSelection)n=this.customSelection,this.table.options.clipboardCopyFormatter&&(n=this.table.options.clipboardCopyFormatter("plain",n));else{var l=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");n=(s=this.table.modules.export.genereateHTMLTable(l))?this.generatePlainContent(l):"",this.table.options.clipboardCopyFormatter&&(n=this.table.options.clipboardCopyFormatter("plain",n),s=this.table.options.clipboardCopyFormatter("html",s))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",n):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",n),s&&e.clipboardData.setData("text/html",s)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",n),s&&e.originalEvent.clipboardData.setData("text/html",s)),this.dispatchExternal("clipboardCopied",n,s),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",e=>{this.paste(e)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(e){var n=[];return e.forEach(s=>{var l=[];s.columns.forEach(u=>{var h="";if(u)if("group"===s.type&&(u.value=u.component.getKey()),null===u.value)h="";else switch(typeof u.value){case"object":h=JSON.stringify(u.value);break;case"undefined":h="";break;default:h=u.value}l.push(h)}),n.push(l.join("\t"))}),n.join("\n")}copy(e,n){var s,l;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=e||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((e=document.createRange()).selectNodeContents(this.table.element),(s=window.getSelection()).toString()&&n&&(this.customSelection=s.toString()),s.removeAllRanges(),s.addRange(e)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((l=document.body.createTextRange()).moveToElementText(this.table.element),l.select()),document.execCommand("copy"),s&&s.removeAllRanges())}setPasteAction(e){switch(typeof e){case"string":this.pasteAction=r.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e}}setPasteParser(e){switch(typeof e){case"string":this.pasteParser=r.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e}}paste(e){var n,s,l;this.checkPaseOrigin(e)&&(n=this.getPasteData(e),(s=this.pasteParser.call(this,n))?(e.preventDefault(),this.table.modExists("mutator")&&(s=this.mutateData(s)),l=this.pasteAction.call(this,s),this.dispatchExternal("clipboardPasted",n,s,l)):this.dispatchExternal("clipboardPasteError",n))}mutateData(e){var n=[];return Array.isArray(e)?e.forEach(s=>{n.push(this.table.modules.mutator.transformRow(s,"clipboard"))}):n=e,n}checkPaseOrigin(e){var n=!0;return("DIV"!=e.target.tagName||this.table.modules.edit.currentCell)&&(n=!1),n}getPasteData(e){var n;return window.clipboardData&&window.clipboardData.getData?n=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?n=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(n=e.originalEvent.clipboardData.getData("text/plain")),n}}return r.moduleName="clipboard",r.pasteActions=Zq,r.pasteParsers=qq,r})();class tee{constructor(t){return this._row=t,new Proxy(this,{get:function(e,n,s){return void 0!==e[n]?e[n]:e._row.table.componentFunctionBinder.handle("row",e._row,n)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return!!e&&e.getComponent()}_getSelf(){return this._row}}class kF{constructor(t){return this._cell=t,new Proxy(this,{get:function(e,n,s){return void 0!==e[n]?e[n]:e._cell.table.componentFunctionBinder.handle("cell",e._cell,n)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(t,e){void 0===e&&(e=!0),this._cell.setValue(t,e)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class uC extends pl{constructor(t,e){super(t.table),this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var t=this.element,e=this.column.getField();t.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(t.style.display="inline-flex",t.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(t.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),e&&t.setAttribute("tabulator-field",e),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(u=>{t.classList.add(u)}),"hover"===this.table.options.tooltipGenerationMode&&t.addEventListener("mouseenter",u=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var t;switch(typeof(t=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",null!=t&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=t}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var t=this.column.tooltip;t?(!0===t?t=this.value:"function"==typeof t&&!1===(t=t(this.getComponent()))&&(t=""),void 0===t&&(t=""),this.element.setAttribute("title",t)):this.element.setAttribute("title","")}getElement(t){return this.loaded||(this.loaded=!0,t||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(t,e){this.setValueProcessData(t,e)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(t,e){var n=!1;return this.value!=t&&(n=!0,e&&(t=this.chain("cell-value-changing",[this,t],null,t))),this.setValueActual(t),n&&this.dispatch("cell-value-changed",this),n}setValueActual(t){this.oldValue=this.value,this.value=t,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,t),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new kF(this)),this.component}}class NF{constructor(t){return this._column=t,this.type="ColumnComponent",new Proxy(this,{get:function(e,n,s){return void 0!==e[n]?e[n]:e._column.table.componentFunctionBinder.handle("column",e._column,n)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var t=[];return this._column.cells.forEach(function(e){t.push(e.getComponent())}),t}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(t){t.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(t){t.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var t=[];return this._column.columns.length&&this._column.columns.forEach(function(e){t.push(e.getComponent())}),t}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(t,e){var n=this._column.table.columnManager.findColumn(t);n?this._column.table.columnManager.moveColumn(this._column,n,e):console.warn("Move Error - No matching column found:",n)}getNextColumn(){var t=this._column.nextColumn();return!!t&&t.getComponent()}getPrevColumn(){var t=this._column.prevColumn();return!!t&&t.getComponent()}updateDefinition(t){return this._column.updateDefinition(t)}getWidth(){return this._column.getWidth()}setWidth(t){var e;return e=!0===t?this._column.reinitializeWidth(!0):this._column.setWidth(t),this._column.table.columnManager.renderer.rerenderColumns(!0),e}}var nee={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let O_=(()=>{class r extends pl{constructor(e,n){super(n.table),this.definition=e,this.parent=n,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((s,l)=>{var u=new r(s,this);this.attachColumn(u)}),this.checkColumnVisibility()):n.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),e}createGroupElement(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e}mapDefinitions(){var e=this.table.options.columnDefaults;if(e)for(let n in e)void 0===this.definition[n]&&(this.definition[n]=e[n]);this.definition=this.table.columnManager.optionsList.generate(r.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(e=>{-1===r.defaultOptionList.indexOf(e)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",e)})}setField(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(e){this.parent.registerColumnPosition(e)}registerColumnField(e){this.parent.registerColumnField(e)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(e){e.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var e=this.definition,n=void 0===e.headerTooltip?e.tooltip:e.headerTooltip;n?!0===n?e.field?this.langBind("columns|"+e.field,s=>{this.element.setAttribute("title",s||e.title)}):this.element.setAttribute("title",e.title):("function"==typeof n&&!1===(n=n(this.getComponent()))&&(n=""),this.element.setAttribute("title",n)):this.element.setAttribute("title","")}_initialize(){for(var e=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);e.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===e.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",n=>{this.setTooltip()})}_bindEvents(){var n,s,l,e=this.definition;"function"==typeof e.headerClick&&this.element.addEventListener("click",u=>{e.headerClick(u,this.getComponent())}),"function"==typeof e.headerDblClick&&this.element.addEventListener("dblclick",u=>{e.headerDblClick(u,this.getComponent())}),"function"==typeof e.headerContext&&this.element.addEventListener("contextmenu",u=>{e.headerContext(u,this.getComponent())}),"function"==typeof e.headerTap&&(l=!1,this.element.addEventListener("touchstart",u=>{l=!0},{passive:!0}),this.element.addEventListener("touchend",u=>{l&&e.headerTap(u,this.getComponent()),l=!1})),"function"==typeof e.headerDblTap&&(n=null,this.element.addEventListener("touchend",u=>{n?(clearTimeout(n),n=null,e.headerDblTap(u,this.getComponent())):n=setTimeout(()=>{clearTimeout(n),n=null},300)})),"function"==typeof e.headerTapHold&&(s=null,this.element.addEventListener("touchstart",u=>{clearTimeout(s),s=setTimeout(function(){clearTimeout(s),s=null,l=!1,e.headerTapHold(u,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",u=>{clearTimeout(s),s=null}))}_buildColumnHeader(){var e=this.definition;this.dispatch("column-layout",this),void 0!==e.visible&&(e.visible?this.show(!0):this.hide(!0)),e.cssClass&&e.cssClass.split(" ").forEach(l=>{this.element.classList.add(l)}),e.field&&this.element.setAttribute("tabulator-field",e.field),this.setMinWidth(parseInt(e.minWidth)),e.maxWidth&&this.setMaxWidth(parseInt(e.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var s=document.createElement("div");return s.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),s.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),s}_buildColumnHeaderTitle(){var e=this.definition,n=document.createElement("div");if(n.classList.add("tabulator-col-title"),e.editableTitle){var s=document.createElement("input");s.classList.add("tabulator-title-editor"),s.addEventListener("click",l=>{l.stopPropagation(),s.focus()}),s.addEventListener("change",()=>{e.title=s.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),n.appendChild(s),e.field?this.langBind("columns|"+e.field,l=>{s.value=l||e.title||"&nbsp;"}):s.value=e.title||"&nbsp;"}else e.field?this.langBind("columns|"+e.field,l=>{this._formatColumnHeaderTitle(n,l||e.title||"&nbsp;")}):this._formatColumnHeaderTitle(n,e.title||"&nbsp;");return n}_formatColumnHeaderTitle(e,n){var s=this.chain("column-format",[this,n,e],null,()=>n);switch(typeof s){case"object":s instanceof Node?e.appendChild(s):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",s));break;case"undefined":case"null":e.innerHTML="";break;default:e.innerHTML=s}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(n=>{this.element.classList.add(n)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(e){return e[this.field]}_getNestedData(e){var u,n=e,s=this.fieldStructure,l=s.length;for(let h=0;h<l&&(u=n=n[s[h]],n);h++);return u}_setFlatData(e,n){this.field&&(e[this.field]=n)}_setNestedData(e,n){var s=e,l=this.fieldStructure,u=l.length;for(let h=0;h<u;h++)if(h==u-1)s[l[h]]=n;else{if(!s[l[h]]){if(void 0===n)break;s[l[h]]={}}s=s[l[h]]}}attachColumn(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(e,n){var s=this.parent.isGroup?this.parent.getGroupElement().clientHeight:n||this.parent.getHeadersElement().clientHeight;this.element.style.height=s+"px",this.isGroup&&(this.groupElement.style.minHeight=s-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==e&&(this.element.style.paddingTop="bottom"===e?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(l){l.verticalAlign(e)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(e){e.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(e){var n=[];return this.isGroup&&e&&(this.columns.forEach(function(s){n.push(s.getDefinition(!0))}),this.definition.columns=n),this.definition}checkColumnVisibility(){var e=!1;this.columns.forEach(function(n){n.visible&&(e=!0)}),e?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(e,n){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(s){s.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,n),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(e,n){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(s){s.hide()}),this.dispatch("column-hide",this),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(n){n.visible&&(e+=n.getWidth())}),this.contentElement.style.maxWidth=e-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(e){var n=this.columns.indexOf(e);n>-1&&this.columns.splice(n,1),this.columns.length||this.delete()}setWidth(e){this.widthFixed=!0,this.setWidthActual(e)}setWidthActual(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(n){n.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var e=[];this.cells.forEach(function(n){n.row.heightInitialized&&(null!==n.row.getElement().offsetParent?(e.push(n.row),n.row.clearCellHeight()):n.row.heightInitialized=!1)}),e.forEach(function(n){n.calcHeight()}),e.forEach(function(n){n.setCellHeight()})}getWidth(){var e=0;return this.isGroup?this.columns.forEach(function(n){n.visible&&(e+=n.getWidth())}):e=this.width,e}getHeight(){return this.element.offsetHeight}setMinWidth(e){this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(n){n.setMinWidth()})}setMaxWidth(e){this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(n){n.setMaxWidth()})}delete(){return new Promise((e,n)=>{this.isGroup&&this.columns.forEach(function(l){l.delete()}),this.dispatch("column-delete",this);var s=this.cells.length;for(let l=0;l<s;l++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),e()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(e){var n=new uC(this,e);return this.cells.push(n),n}nextColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._nextVisibleColumn(e+1)}_nextVisibleColumn(e){var n=this.table.columnManager.getColumnByIndex(e);return!n||n.visible?n:this._nextVisibleColumn(e+1)}prevColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._prevVisibleColumn(e-1)}_prevVisibleColumn(e){var n=this.table.columnManager.getColumnByIndex(e);return!n||n.visible?n:this._prevVisibleColumn(e-1)}reinitializeWidth(e){this.widthFixed=!1,void 0!==this.definition.width&&!e&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(n=>{n.clearWidth()}));var e=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(n=>{var s=n.getWidth();s>e&&(e=s)}),e&&this.setWidthActual(e+1))}}updateDefinition(e){var n;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(n=Object.assign({},this.getDefinition()),n=Object.assign(n,e),this.table.columnManager.addColumn(n,!1,this).then(s=>(n.field==this.field&&(this.field=!1),this.delete().then(()=>s.getComponent()))))}deleteCell(e){var n=this.cells.indexOf(e);n>-1&&this.cells.splice(n,1)}getComponent(){return this.component||(this.component=new NF(this)),this.component}}return r.defaultOptionList=nee,r})();class oD{constructor(t){return this._row=t,new Proxy(this,{get:function(e,n,s){return void 0!==e[n]?e[n]:e._row.table.componentFunctionBinder.handle("row",e._row,n)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return!!e&&e.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(t){return this._row.table.rowManager.getRowPosition(this._row,t)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(t,e){this._row.moveToRow(t,e)}update(t){return this._row.updateData(t)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var t=this._row.nextRow();return t&&t.getComponent()}getPrevRow(){var t=this._row.prevRow();return t&&t.getComponent()}}class Ls extends pl{constructor(t,e,n="row"){super(e.table),this.parent=e,this.data={},this.type=n,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(t)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var t=document.createElement("div");t.classList.add("tabulator-row"),t.setAttribute("role","row"),this.element=t}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(t){if(this.create(),!this.initialized||t){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),t&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(t){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(t){var e=0,n=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(s){var l=s.getHeight();l>e&&(e=l)}),this.height=t?Math.max(e,n):this.manualHeight?this.height:Math.max(e,n),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(t){t.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(t){t.clearHeight()})}normalizeHeight(t){t&&this.clearCellHeight(),this.calcHeight(t),this.setCellHeight()}setHeight(t,e){(this.height!=t||e)&&(this.manualHeight=!0,this.height=t,this.heightStyled=t?t+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}setData(t){this.data=this.chain("row-data-init-before",[this,t],void 0,t),this.dispatch("row-data-init-after",this)}updateData(t){var s,e=this.element&&gr.elVisible(this.element),n={};return new Promise((l,u)=>{for(var h in"string"==typeof t&&(t=JSON.parse(t)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(n=Object.assign(n,this.data),n=Object.assign(n,t)),s=this.chain("row-data-changing",[this,n,t],null,t))this.data[h]=s[h];for(var h in this.dispatch("row-data-save-after",this),t)this.table.columnManager.getColumnsByFieldRoot(h).forEach(b=>{let C=this.getCell(b.getField());if(C){let w=b.getFieldValue(s);C.getValue()!=w&&(C.setValueProcessData(w),e&&C.cellRendered())}});e?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,e,t),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),l()})}getData(t){return t?this.chain("row-data-retrieve",[this,t],null,this.data):this.data}getCell(t){return t=this.table.columnManager.findColumn(t),this.initialized||this.generateCells(),this.cells.find(function(n){return n.column===t})}getCellIndex(t){return this.cells.findIndex(function(e){return e===t})}findCell(t){return this.cells.find(e=>e.element===t)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(t,e){var n=this.table.rowManager.findRow(t);n?(this.table.rowManager.moveRowActual(this,n,!e),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",t)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(t){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,t),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var t=this.cells.length;for(let e=0;e<t;e++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new oD(this)),this.component}}var iee={avg:function(r,t,e){var n=0,s=void 0!==e.precision?e.precision:2;return r.length&&(n=r.reduce(function(l,u){return Number(l)+Number(u)}),n/=r.length,n=!1!==s?n.toFixed(s):n),parseFloat(n).toString()},max:function(r,t,e){var n=null,s=void 0!==e.precision&&e.precision;return r.forEach(function(l){((l=Number(l))>n||null===n)&&(n=l)}),null!==n?!1!==s?n.toFixed(s):n:""},min:function(r,t,e){var n=null,s=void 0!==e.precision&&e.precision;return r.forEach(function(l){((l=Number(l))<n||null===n)&&(n=l)}),null!==n?!1!==s?n.toFixed(s):n:""},sum:function(r,t,e){var n=0,s=void 0!==e.precision&&e.precision;return r.length&&r.forEach(function(l){l=Number(l),n+=isNaN(l)?0:Number(l)}),!1!==s?n.toFixed(s):n},concat:function(r,t,e){var n=0;return r.length&&(n=r.reduce(function(s,l){return String(s)+String(l)})),n},count:function(r,t,e){var n=0;return r.length&&r.forEach(function(s){s&&n++}),n}};let ree=(()=>{class r extends gi{constructor(e){super(e),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e}initialize(){this.genColumn=new O_({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(e){this.recalc(this.table.rowManager.activeRows),e&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(e){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(e){(e.column.definition.topCalc||e.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(e.row)):this.recalcActiveRows())}initializeColumnCheck(e){(e.definition.topCalc||e.definition.bottomCalc)&&this.initializeColumn(e)}initializeColumn(e){var n=e.definition,s={topCalcParams:n.topCalcParams||{},botCalcParams:n.bottomCalcParams||{}};if(n.topCalc){switch(typeof n.topCalc){case"string":r.calculations[n.topCalc]?s.topCalc=r.calculations[n.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",n.topCalc);break;case"function":s.topCalc=n.topCalc}s.topCalc&&(e.modules.columnCalcs=s,this.topCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(n.bottomCalc){switch(typeof n.bottomCalc){case"string":r.calculations[n.bottomCalc]?s.botCalc=r.calculations[n.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",n.bottomCalc);break;case"function":s.botCalc=n.bottomCalc}s.botCalc&&(e.modules.columnCalcs=s,this.botCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(e){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-e+"px")}recalc(e){var n;if(this.topInitialized||this.botInitialized){if(this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),n=this.generateRow("top",this.rowsToData(e)),this.topRow=n;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(n.getElement()),n.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),n=this.generateRow("bottom",this.rowsToData(e)),this.botRow=n;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(n.getElement()),n.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(n=>{this.recalcGroup(n)})}recalcGroup(e){var n,s;e&&e.calcs&&(e.calcs.bottom&&(n=this.rowsToData(e.rows),s=this.generateRowData("bottom",n),e.calcs.bottom.updateData(s),e.calcs.bottom.reinitialize()),e.calcs.top&&(n=this.rowsToData(e.rows),s=this.generateRowData("top",n),e.calcs.top.updateData(s),e.calcs.top.reinitialize()))}generateTopRow(e){return this.generateRow("top",this.rowsToData(e))}generateBottomRow(e){return this.generateRow("bottom",this.rowsToData(e))}rowsToData(e){var n=[];return e.forEach(s=>{if(n.push(s.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&s.modules.dataTree.open){var l=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(s));n=n.concat(l)}}),n}generateRow(e,n){var l,s=this.generateRowData(e,n);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),l=new Ls(s,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),l.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),l.component=!1,l.getComponent=()=>(l.component||(l.component=new tee(this)),l.component),l.generateCells=()=>{var u=[];this.table.columnManager.columnsByIndex.forEach(h=>{this.genColumn.setField(h.getField()),this.genColumn.hozAlign=h.hozAlign,this.genColumn.modules.format=h.definition[e+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(h.definition[e+"CalcFormatter"]),params:h.definition[e+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=h.definition.cssClass;var p=new uC(this.genColumn,l);p.getElement(),p.column=h,p.setWidth(),h.cells.push(p),u.push(p),h.visible||p.hide()}),l.cells=u},l}generateRowData(e,n){var h,p,s={},u="top"==e?"topCalc":"botCalc";return("top"==e?this.topCalcs:this.botCalcs).forEach(function(g){var b=[];g.modules.columnCalcs&&g.modules.columnCalcs[u]&&(n.forEach(function(C){b.push(g.getFieldValue(C))}),h="function"==typeof g.modules.columnCalcs[p=u+"Params"]?g.modules.columnCalcs[p](b,n):g.modules.columnCalcs[p],g.setFieldValue(s,g.modules.columnCalcs[u](b,n,h)))}),s}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var e={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(s=>{e[s.getKey()]=this.getGroupResults(s)}):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e}getGroupResults(e){var n=e._getSelf(),s=e.getSubGroups(),l={};return s.forEach(h=>{l[h.getKey()]=this.getGroupResults(h)}),{top:n.calcs.top?n.calcs.top.getData():{},bottom:n.calcs.bottom?n.calcs.bottom.getData():{},groups:l}}}return r.moduleName="columnCalcs",r.calculations=iee,r})(),oee=(()=>{class r extends gi{constructor(e){super(e),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var e=null,n=this.table.columnManager.getFirstVisibileColumn(),s=this.table.options;switch(this.field=s.dataTreeChildField,this.indent=s.dataTreeChildIndent,this.elementField=s.dataTreeElementColumn||!!n&&n.field,s.dataTreeBranchElement&&(!0===s.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof s.dataTreeBranchElement?((e=document.createElement("div")).innerHTML=s.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=s.dataTreeBranchElement),s.dataTreeCollapseElement?"string"==typeof s.dataTreeCollapseElement?((e=document.createElement("div")).innerHTML=s.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=s.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),s.dataTreeExpandElement?"string"==typeof s.dataTreeExpandElement?((e=document.createElement("div")).innerHTML=s.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=s.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof s.dataTreeStartExpanded){case"boolean":this.startOpen=function(l,u){return s.dataTreeStartExpanded};break;case"function":this.startOpen=s.dataTreeStartExpanded;break;default:this.startOpen=function(l,u){return s.dataTreeStartExpanded[u]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(e){return this.getTreeChildren(e,!0)}columnMoving(){var e=[];return this.table.rowManager.rows.forEach(n=>{e=e.concat(this.getTreeChildren(n,!1,!0))}),e}rowDataChanged(e,n,s){this.redrawNeeded(s)&&(this.initializeRow(e),n&&(this.layoutRow(e),this.refreshData(!0)))}initializeRow(e){var n=e.getData()[this.field],s=Array.isArray(n),l=s||!s&&"object"==typeof n&&null!==n;!l&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!l&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:!!l&&(e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0)),controlEl:!(!e.modules.dataTree||!l)&&e.modules.dataTree.controlEl,branchEl:!(!e.modules.dataTree||!l)&&e.modules.dataTree.branchEl,parent:!!e.modules.dataTree&&e.modules.dataTree.parent,children:l}}reinitializeRowChildren(e){this.getTreeChildren(e,!1,!0).forEach(function(s){s.reinitialize(!0)})}layoutRow(e){var s=(this.elementField?e.getCell(this.elementField):e.getCells()[0]).getElement(),l=e.modules.dataTree;l.branchEl&&(l.branchEl.parentNode&&l.branchEl.parentNode.removeChild(l.branchEl),l.branchEl=!1),l.controlEl&&(l.controlEl.parentNode&&l.controlEl.parentNode.removeChild(l.controlEl),l.controlEl=!1),this.generateControlElement(e,s),e.getElement().classList.add("tabulator-tree-level-"+l.index),l.index&&(this.branchEl?(l.branchEl=this.branchEl.cloneNode(!0),s.insertBefore(l.branchEl,s.firstChild),this.table.rtl?l.branchEl.style.marginRight=(l.branchEl.offsetWidth+l.branchEl.style.marginLeft)*(l.index-1)+l.index*this.indent+"px":l.branchEl.style.marginLeft=(l.branchEl.offsetWidth+l.branchEl.style.marginRight)*(l.index-1)+l.index*this.indent+"px"):this.table.rtl?s.style.paddingRight=parseInt(window.getComputedStyle(s,null).getPropertyValue("padding-right"))+l.index*this.indent+"px":s.style.paddingLeft=parseInt(window.getComputedStyle(s,null).getPropertyValue("padding-left"))+l.index*this.indent+"px")}generateControlElement(e,n){var s=e.modules.dataTree,l=(n=n||e.getCells()[0].getElement(),s.controlEl);!1!==s.children&&(s.open?(s.controlEl=this.collapseEl.cloneNode(!0),s.controlEl.addEventListener("click",u=>{u.stopPropagation(),this.collapseRow(e)})):(s.controlEl=this.expandEl.cloneNode(!0),s.controlEl.addEventListener("click",u=>{u.stopPropagation(),this.expandRow(e)})),s.controlEl.addEventListener("mousedown",u=>{u.stopPropagation()}),l&&l.parentNode===n?l.parentNode.replaceChild(s.controlEl,l):n.insertBefore(s.controlEl,n.firstChild))}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}getRows(e){var n=[];return e.forEach((s,l)=>{var u;n.push(s),s instanceof Ls&&(s.create(),!(u=s.modules.dataTree.children).index&&!1!==u.children&&this.getChildren(s).forEach(p=>{p.create(),n.push(p)}))}),n}getChildren(e,n){var s=e.modules.dataTree,l=[],u=[];return!1!==s.children&&(s.open||n)&&(Array.isArray(s.children)||(s.children=this.generateChildren(e)),l=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(s.children):s.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(l),l.forEach(h=>{u.push(h),this.getChildren(h).forEach(g=>{u.push(g)})})),u}generateChildren(e){var n=[],s=e.getData()[this.field];return Array.isArray(s)||(s=[s]),s.forEach(l=>{var u=new Ls(l||{},this.table.rowManager);u.create(),u.modules.dataTree.index=e.modules.dataTree.index+1,u.modules.dataTree.parent=e,u.modules.dataTree.children&&(u.modules.dataTree.open=this.startOpen(u.getComponent(),u.modules.dataTree.index)),n.push(u)}),n}expandRow(e,n){var s=e.modules.dataTree;!1!==s.children&&(s.open=!0,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",e.getComponent(),e.modules.dataTree.index))}collapseRow(e){var n=e.modules.dataTree;!1!==n.children&&(n.open=!1,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",e.getComponent(),e.modules.dataTree.index))}toggleRow(e){var n=e.modules.dataTree;!1!==n.children&&(n.open?this.collapseRow(e):this.expandRow(e))}getTreeParent(e){return!!e.modules.dataTree.parent&&e.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(e){var n=e.modules.dataTree,s=[];return n.children&&(Array.isArray(n.children)||(n.children=this.generateChildren(e)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(n.children):n.children).forEach(u=>{u instanceof Ls&&s.push(u)})),s}rowDelete(e){var s,n=e.modules.dataTree.parent;n&&(!1!==(s=this.findChildIndex(e,n))&&n.data[this.field].splice(s,1),n.data[this.field].length||delete n.data[this.field],this.initializeRow(n),this.layoutRow(n)),this.refreshData(!0)}addTreeChildRow(e,n,s,l){var u=!1;"string"==typeof n&&(n=JSON.parse(n)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),void 0!==l&&!1!==(u=this.findChildIndex(l,e))&&e.data[this.field].splice(s?u:u+1,0,n),!1===u&&(s?e.data[this.field].unshift(n):e.data[this.field].push(n)),this.initializeRow(e),this.layoutRow(e),this.refreshData(!0)}findChildIndex(e,n){var s=!1;return"object"==typeof e?e instanceof Ls?s=e.data:e instanceof RowComponent?s=e._getSelf().data:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&n.modules.dataTree&&(s=n.modules.dataTree.children.find(l=>l instanceof Ls&&l.element===e))&&(s=s.data):s=null!=e&&n.data[this.field].find(l=>l.data[this.table.options.index]==e),s&&(Array.isArray(n.data[this.field])&&(s=n.data[this.field].indexOf(s)),-1==s&&(s=!1)),s}getTreeChildren(e,n,s){var l=e.modules.dataTree,u=[];return l.children&&(Array.isArray(l.children)||(l.children=this.generateChildren(e)),l.children.forEach(h=>{h instanceof Ls&&(u.push(n?h.getComponent():h),s&&(u=u.concat(this.getTreeChildren(h,n,s))))})),u}checkForRestyle(e){e.row.cells.indexOf(e)||this.layoutRow(e.row)}getChildField(){return this.field}redrawNeeded(e){return!!this.field&&void 0!==e[this.field]||!!this.elementField&&void 0!==e[this.elementField]}}return r.moduleName="dataTree",r})();var dee={csv:function(r,t,e){var n=t&&t.delimiter?t.delimiter:",",s=[],l=[];r.forEach(u=>{var h=[];switch(u.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":u.columns.forEach((p,g)=>{p&&1===p.depth&&(l[g]=null==p.value?"":'"'+String(p.value).split('"').join('""')+'"')});break;case"row":u.columns.forEach(p=>{if(p){switch(typeof p.value){case"object":p.value=JSON.stringify(p.value);break;case"undefined":case"null":p.value=""}h.push('"'+String(p.value).split('"').join('""')+'"')}}),s.push(h.join(n))}}),l.length&&s.unshift(l.join(n)),s=s.join("\n"),t.bom&&(s="\ufeff"+s),e(s,"text/csv")},json:function(r,t,e){var n=[];r.forEach(s=>{var l={};switch(s.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":s.columns.forEach(u=>{u&&(l[u.component.getField()]=u.value)}),n.push(l)}}),e(n=JSON.stringify(n,null,"\t"),"application/json")},pdf:function(r,t,e){var n=[],s=[],l={},u=t.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},h=t.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},p=t.jsPDF||{},g=t&&t.title?t.title:"";function b(w,x){var N=[];return w.columns.forEach(B=>{var V;if(B){switch(typeof B.value){case"object":B.value=JSON.stringify(B.value);break;case"undefined":case"null":B.value=""}V={content:B.value,colSpan:B.width,rowSpan:B.height},x&&(V.styles=x),N.push(V)}else N.push("")}),N}p.orientation||(p.orientation=t.orientation||"landscape"),p.unit||(p.unit="pt"),r.forEach(w=>{switch(w.type){case"header":n.push(b(w));break;case"group":s.push(b(w,u));break;case"calc":s.push(b(w,h));break;case"row":s.push(b(w))}});var C=new jspdf.jsPDF(p);t&&t.autoTable&&(l="function"==typeof t.autoTable?t.autoTable(C)||{}:t.autoTable),g&&(l.didDrawPage=function(w){C.text(g,40,30)}),l.head=n,l.body=s,C.autoTable(l),t&&t.documentProcessing&&t.documentProcessing(C),e(C.output("arraybuffer"),"application/pdf")},xlsx:function(r,t,e){var s=t.sheetName||"Sheet1",l=XLSX.utils.book_new(),u=new pl(this);function p(){var C=[],w=[],x={},N={s:{c:0,r:0},e:{c:r[0]?r[0].columns.reduce((B,V)=>B+(V&&V.width?V.width:1),0):0,r:r.length}};return r.forEach((B,V)=>{var $=[];B.columns.forEach(function(te,xe){te?($.push(te.value instanceof Date||"object"!=typeof te.value?te.value:JSON.stringify(te.value)),(te.width>1||te.height>-1)&&w.push({s:{r:V,c:xe},e:{r:V+te.height-1,c:xe+te.width-1}})):$.push("")}),C.push($)}),XLSX.utils.sheet_add_aoa(x,C),x["!ref"]=XLSX.utils.encode_range(N),w.length&&(x["!merges"]=w),x}if(l.SheetNames=[],l.Sheets={},t.sheetOnly)e(p());else{if(t.sheets)for(var g in t.sheets)!0===t.sheets[g]?(l.SheetNames.push(g),l.Sheets[g]=p()):(l.SheetNames.push(g),u.commsSend(t.sheets[g],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(C){l.Sheets[g]=C}}));else l.SheetNames.push(s),l.Sheets[s]=p();t.documentProcessing&&(l=t.documentProcessing(l)),e(function(C){for(var w=new ArrayBuffer(C.length),x=new Uint8Array(w),N=0;N!=C.length;++N)x[N]=255&C.charCodeAt(N);return w}(XLSX.write(l,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(r,t,e){this.modExists("export",!0)&&e(this.modules.export.genereateHTMLTable(r),"text/html")}};let hee=(()=>{class r extends gi{constructor(e){super(e),this.registerTableOption("downloadReady",function(n,s){return s}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(e,n,s,l){this.download(e,n,s,l,!0)}download(e,n,s,l,u){var h=!1;if("function"==typeof e?h=e:r.downloaders[e]?h=r.downloaders[e]:console.warn("Download Error - No such download type found: ",e),h){var g=this.generateExportList(l);h.call(this.table,g,s||{},function(b,C){u?!0===u?this.triggerDownload(b,C,e,n,!0):u(b):this.triggerDownload(b,C,e,n)}.bind(this))}}generateExportList(e){var n=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),s=this.table.options.groupHeaderDownload;return s&&!Array.isArray(s)&&(s=[s]),n.forEach(l=>{var u;"group"===l.type&&(u=l.columns[0],s&&s[l.indent]&&(u.value=s[l.indent](u.value,l.component._group.getRowCount(),l.component._group.getData(),l.component)))}),n}triggerDownload(e,n,s,l,u){var h=document.createElement("a"),p=new Blob([e],{type:n});l=l||"Tabulator."+("function"==typeof s?"txt":s),(p=this.table.options.downloadReady(e,p))&&(u?window.open(window.URL.createObjectURL(p)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(p,l):(h.setAttribute("href",window.URL.createObjectURL(p)),h.setAttribute("download",l),h.style.display="none",document.body.appendChild(h),h.click(),document.body.removeChild(h)),this.dispatchExternal("downloadComplete"))}commsReceived(e,n,s){switch(n){case"intercept":this.download(s.type,"",s.options,s.active,s.intercept)}}}return r.moduleName="download",r.downloaders=dee,r})();function dC(r,t){var e=t.mask,n=void 0!==t.maskLetterChar?t.maskLetterChar:"A",s=void 0!==t.maskNumberChar?t.maskNumberChar:"9",l=void 0!==t.maskWildcardChar?t.maskWildcardChar:"*";function u(h){var p=e[h];void 0!==p&&p!==l&&p!==n&&p!==s&&(r.value=r.value+""+p,u(h+1))}r.addEventListener("keydown",h=>{var p=r.value.length,g=h.key;if(h.keyCode>46){if(p>=e.length)return h.preventDefault(),h.stopPropagation(),!1;switch(e[p]){case n:if(g.toUpperCase()==g.toLowerCase())return h.preventDefault(),h.stopPropagation(),!1;break;case s:if(isNaN(g))return h.preventDefault(),h.stopPropagation(),!1;break;case l:break;default:if(g!==e[p])return h.preventDefault(),h.stopPropagation(),!1}}}),r.addEventListener("keyup",h=>{h.keyCode>46&&t.maskAutoFill&&u(r.value.length)}),r.placeholder||(r.placeholder=e),t.maskAutoFill&&u(r.value.length)}var Eee={input:function(r,t,e,n,s){var l=r.getValue(),u=document.createElement("input");if(u.setAttribute("type",s.search?"search":"text"),u.style.padding="4px",u.style.width="100%",u.style.boxSizing="border-box",s.elementAttributes&&"object"==typeof s.elementAttributes)for(let p in s.elementAttributes)"+"==p.charAt(0)?(p=p.slice(1),u.setAttribute(p,u.getAttribute(p)+s.elementAttributes["+"+p])):u.setAttribute(p,s.elementAttributes[p]);function h(p){null==l&&""!==u.value||u.value!==l?e(u.value)&&(l=u.value):n()}return u.value=void 0!==l?l:"",t(function(){u.focus({preventScroll:!0}),u.style.height="100%"}),u.addEventListener("change",h),u.addEventListener("blur",h),u.addEventListener("keydown",function(p){switch(p.keyCode){case 13:h();break;case 27:n();break;case 35:case 36:p.stopPropagation()}}),s.mask&&dC(u,s),u},textarea:function(r,t,e,n,s){var l=r.getValue(),u=s.verticalNavigation||"hybrid",h=String(null!=l?l:""),g=(h.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),b=0;if(g.style.display="block",g.style.padding="2px",g.style.height="100%",g.style.width="100%",g.style.boxSizing="border-box",g.style.whiteSpace="pre-wrap",g.style.resize="none",s.elementAttributes&&"object"==typeof s.elementAttributes)for(let w in s.elementAttributes)"+"==w.charAt(0)?(w=w.slice(1),g.setAttribute(w,g.getAttribute(w)+s.elementAttributes["+"+w])):g.setAttribute(w,s.elementAttributes[w]);function C(w){null==l&&""!==g.value||g.value!==l?(e(g.value)&&(l=g.value),setTimeout(function(){r.getRow().normalizeHeight()},300)):n()}return g.value=h,t(function(){g.focus({preventScroll:!0}),g.style.height="100%",g.style.height=g.scrollHeight+"px",r.getRow().normalizeHeight()}),g.addEventListener("change",C),g.addEventListener("blur",C),g.addEventListener("keyup",function(){g.style.height="";var w=g.scrollHeight;g.style.height=w+"px",w!=b&&(b=w,r.getRow().normalizeHeight())}),g.addEventListener("keydown",function(w){switch(w.keyCode){case 27:n();break;case 38:("editor"==u||"hybrid"==u&&g.selectionStart)&&(w.stopImmediatePropagation(),w.stopPropagation());break;case 40:("editor"==u||"hybrid"==u&&g.selectionStart!==g.value.length)&&(w.stopImmediatePropagation(),w.stopPropagation());break;case 35:case 36:w.stopPropagation()}}),s.mask&&dC(g,s),g},number:function(r,t,e,n,s){var l=r.getValue(),u=s.verticalNavigation||"editor",h=document.createElement("input");if(h.setAttribute("type","number"),void 0!==s.max&&h.setAttribute("max",s.max),void 0!==s.min&&h.setAttribute("min",s.min),void 0!==s.step&&h.setAttribute("step",s.step),h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",s.elementAttributes&&"object"==typeof s.elementAttributes)for(let b in s.elementAttributes)"+"==b.charAt(0)?(b=b.slice(1),h.setAttribute(b,h.getAttribute(b)+s.elementAttributes["+"+b])):h.setAttribute(b,s.elementAttributes[b]);h.value=l;var p=function(b){g()};function g(){var b=h.value;!isNaN(b)&&""!==b&&(b=Number(b)),b!==l?e(b)&&(l=b):n()}return t(function(){h.removeEventListener("blur",p),h.focus({preventScroll:!0}),h.style.height="100%",h.addEventListener("blur",p)}),h.addEventListener("keydown",function(b){switch(b.keyCode){case 13:g();break;case 27:n();break;case 38:case 40:"editor"==u&&(b.stopImmediatePropagation(),b.stopPropagation());break;case 35:case 36:b.stopPropagation()}}),s.mask&&dC(h,s),h},range:function(r,t,e,n,s){var l=r.getValue(),u=document.createElement("input");if(u.setAttribute("type","range"),void 0!==s.max&&u.setAttribute("max",s.max),void 0!==s.min&&u.setAttribute("min",s.min),void 0!==s.step&&u.setAttribute("step",s.step),u.style.padding="4px",u.style.width="100%",u.style.boxSizing="border-box",s.elementAttributes&&"object"==typeof s.elementAttributes)for(let p in s.elementAttributes)"+"==p.charAt(0)?(p=p.slice(1),u.setAttribute(p,u.getAttribute(p)+s.elementAttributes["+"+p])):u.setAttribute(p,s.elementAttributes[p]);function h(){var p=u.value;!isNaN(p)&&""!==p&&(p=Number(p)),p!=l?e(p)&&(l=p):n()}return u.value=l,t(function(){u.focus({preventScroll:!0}),u.style.height="100%"}),u.addEventListener("blur",function(p){h()}),u.addEventListener("keydown",function(p){switch(p.keyCode){case 13:h();break;case 27:n()}}),u},select:function(r,t,e,n,s){var l=this,u=r.getElement(),h=r.getValue(),p=s.verticalNavigation||"editor",g=void 0!==h||null===h?Array.isArray(h)?h:[h]:void 0!==s.defaultValue?s.defaultValue:[],b=document.createElement("input"),C=document.createElement("div"),w=s.multiselect,x=[],N={},B=[],V=[],$=!0,te=!1,xe="",Re=null;function Pe(rt){var $n,Kt={},ai=l.table.getData();return($n=rt?l.table.columnManager.getColumnByField(rt):r.getColumn()._getSelf())?ai.forEach(function(ql){var _o=$n.getFieldValue(ql);null!=_o&&""!==_o&&(Kt[_o]=!0)}):console.warn("unable to find matching column to create select lookup list:",rt),Object.keys(Kt)}function St(rt,Kt){!w&&N&&N.element&&N.element.classList.remove("active"),N&&N.element&&N.element.classList.remove("focused"),N=rt,rt.element&&(rt.element.classList.add("focused"),Kt&&rt.element.classList.add("active")),rt&&rt.element&&rt.element.scrollIntoView&&rt.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function At(rt){-1==V.indexOf(rt)&&(V.push(rt),St(rt,!0)),Mt()}function Cn(rt){var Kt=V[rt];rt>-1&&(V.splice(rt,1),Kt.element&&Kt.element.classList.remove("active"))}function Gt(rt){rt||(rt=N);var Kt=V.indexOf(rt);Kt>-1?Cn(Kt):(!0!==w&&V.length>=w&&Cn(0),At(rt)),Mt()}function Mn(rt){Pt(),rt||(rt=N),rt&&(b.value=rt.label,e(rt.value)),g=[rt.value]}function qn(rt){rt||Pt();var Kt=[];V.forEach(ai=>{Kt.push(ai.value)}),g=Kt,e(Kt)}function Mt(){var rt=[];V.forEach(Kt=>{rt.push(Kt.label)}),b.value=rt.join(", "),!1===l.currentCell&&qn(!0)}function tt(){Pt(),n()}function Pt(){C.parentNode&&C.parentNode.removeChild(C),l.table.rowManager.element.removeEventListener("scroll",tt)}if((Array.isArray(s)||!Array.isArray(s)&&"object"==typeof s&&!s.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),s={values:s}),b.setAttribute("type","text"),b.style.padding="4px",b.style.width="100%",b.style.boxSizing="border-box",b.style.cursor="default",b.readOnly=0!=this.currentCell,s.elementAttributes&&"object"==typeof s.elementAttributes)for(let rt in s.elementAttributes)"+"==rt.charAt(0)?(rt=rt.slice(1),b.setAttribute(rt,b.getAttribute(rt)+s.elementAttributes["+"+rt])):b.setAttribute(rt,s.elementAttributes[rt]);return b.value=void 0!==h||null===h?h:"",b.addEventListener("search",function(rt){b.value||(function(){var rt=V.length;for(let Kt=0;Kt<rt;Kt++)Cn(0)}(),qn())}),b.addEventListener("keydown",function(rt){var Kt;switch(rt.keyCode){case 38:Kt=x.indexOf(N),("editor"==p||"hybrid"==p&&Kt)&&(rt.stopImmediatePropagation(),rt.stopPropagation(),rt.preventDefault(),Kt>0&&St(x[Kt-1],!w));break;case 40:Kt=x.indexOf(N),("editor"==p||"hybrid"==p&&Kt<x.length-1)&&(rt.stopImmediatePropagation(),rt.stopPropagation(),rt.preventDefault(),Kt<x.length-1&&St(-1==Kt?x[0]:x[Kt+1],!w));break;case 37:case 39:rt.stopImmediatePropagation(),rt.stopPropagation(),rt.preventDefault();break;case 13:w?Gt():Mn();break;case 27:tt();break;case 9:break;default:!1===l.currentCell&&rt.preventDefault(),rt.keyCode>=38&&rt.keyCode<=90&&function(rt){clearTimeout(Re);var Kt=String.fromCharCode(event.keyCode).toLowerCase();xe+=Kt.toLowerCase();var ai=x.find($n=>void 0!==$n.label&&$n.label.toLowerCase().startsWith(xe));ai&&St(ai,!w),Re=setTimeout(()=>{xe=""},800)}()}}),b.addEventListener("blur",function(rt){$&&(w?qn():tt())}),b.addEventListener("focus",function(rt){te||function(){if(V=[],!C.parentNode){!function(rt,Kt){var ai=[],$n=[];function ql(ki){return Kt.indexOf((ki={label:ki.label,value:ki.value,itemParams:ki.itemParams,elementAttributes:ki.elementAttributes,element:!1}).value)>-1&&At(ki),ai.push(ki),$n.push(ki),ki}if("function"==typeof rt&&(rt=rt(r)),Array.isArray(rt))rt.forEach(function(ki){var Gr;"object"==typeof ki?ki.options?($n.push(Gr={label:ki.label,group:!0,itemParams:ki.itemParams,elementAttributes:ki.elementAttributes,element:!1}),ki.options.forEach(function(sv){ql(sv)})):ql(ki):(Kt.indexOf((Gr={label:ki,value:ki,element:!1}).value)>-1&&At(Gr),ai.push(Gr),$n.push(Gr))});else for(var _o in rt){var ec={label:rt[_o],value:_o,element:!1};Kt.indexOf(ec.value)>-1&&At(ec),ai.push(ec),$n.push(ec)}s.sortValuesList&&(ai.sort((ki,Gr)=>ki.label<Gr.label?-1:ki.label>Gr.label?1:0),$n.sort((ki,Gr)=>ki.label<Gr.label?-1:ki.label>Gr.label?1:0),"asc"!==s.sortValuesList&&(ai.reverse(),$n.reverse())),x=ai,B=$n,function(){for(;C.firstChild;)C.removeChild(C.firstChild);B.forEach(function(rt){var Kt=rt.element;if(!Kt){if(Kt=document.createElement("div"),rt.label=s.listItemFormatter?s.listItemFormatter(rt.value,rt.label,r,Kt,rt.itemParams):rt.label,rt.group?(Kt.classList.add("tabulator-edit-select-list-group"),Kt.tabIndex=0,Kt.innerHTML=""===rt.label?"&nbsp;":rt.label):(Kt.classList.add("tabulator-edit-select-list-item"),Kt.tabIndex=0,Kt.innerHTML=""===rt.label?"&nbsp;":rt.label,Kt.addEventListener("click",function(){te=!0,setTimeout(()=>{te=!1},10),w?(Gt(rt),b.focus()):Mn(rt)}),V.indexOf(rt)>-1&&Kt.classList.add("active")),rt.elementAttributes&&"object"==typeof rt.elementAttributes)for(let ai in rt.elementAttributes)"+"==ai.charAt(0)?(ai=ai.slice(1),Kt.setAttribute(ai,b.getAttribute(ai)+rt.elementAttributes["+"+ai])):Kt.setAttribute(ai,rt.elementAttributes[ai]);Kt.addEventListener("mousedown",function(){$=!1,setTimeout(function(){$=!0},10)}),rt.element=Kt}C.appendChild(Kt)})}()}(!0===s.values?Pe():"string"==typeof s.values?Pe(s.values):s.values||[],g);var rt=gr.elOffset(u);C.style.minWidth=u.offsetWidth+"px",C.style.top=rt.top+u.offsetHeight+"px",C.style.left=rt.left+"px",C.addEventListener("mousedown",function(Kt){$=!1,setTimeout(function(){$=!0},10)}),document.body.appendChild(C)}}()}),(C=document.createElement("div")).classList.add("tabulator-edit-select-list"),t(function(){b.style.height="100%",b.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",tt)},10),b},autocomplete:function(r,t,e,n,s){var l=this,u=r.getElement(),h=r.getValue(),p=s.verticalNavigation||"editor",g=void 0!==h||null===h?h:void 0!==s.defaultValue?s.defaultValue:"",b=document.createElement("input"),C=document.createElement("div"),w=[],x=!1,N=!0,B=!1;if(b.setAttribute("type","search"),b.style.padding="4px",b.style.width="100%",b.style.boxSizing="border-box",s.elementAttributes&&"object"==typeof s.elementAttributes)for(let Mt in s.elementAttributes)"+"==Mt.charAt(0)?(Mt=Mt.slice(1),b.setAttribute(Mt,b.getAttribute(Mt)+s.elementAttributes["+"+Mt])):b.setAttribute(Mt,s.elementAttributes[Mt]);function V(){!0===s.values?B=$():"string"==typeof s.values&&(B=$(s.values))}function $(Mt){var Lt,Rt={},tt=l.table.getData();return(Lt=Mt?l.table.columnManager.getColumnByField(Mt):r.getColumn()._getSelf())?(tt.forEach(function(Pt){var fn=Lt.getFieldValue(Pt);null!=fn&&""!==fn&&(Rt[fn]=!0)}),Rt=s.sortValuesList?"asc"==s.sortValuesList?Object.keys(Rt).sort():Object.keys(Rt).sort().reverse():Object.keys(Rt)):console.warn("unable to find matching column to create autocomplete lookup list:",Mt),Rt}function te(Mt,Rt){var Lt,Pt,tt=[];Lt=B||s.values||[],s.searchFunc?(tt=s.searchFunc(Mt,Lt))instanceof Promise?(xe(void 0!==s.searchingPlaceholder?s.searchingPlaceholder:"Searching..."),tt.then(fn=>{nt(Re(fn),Rt)}).catch(fn=>{console.err("error in autocomplete search promise:",fn)})):nt(Re(tt),Rt):(Pt=Re(Lt),""===Mt?s.showListOnEmpty&&(tt=Pt):Pt.forEach(function(fn){(null!==fn.value||void 0!==fn.value)&&(String(fn.value).toLowerCase().indexOf(String(Mt).toLowerCase())>-1||String(fn.title).toLowerCase().indexOf(String(Mt).toLowerCase())>-1)&&tt.push(fn)}),nt(tt,Rt))}function xe(Mt){var Rt=document.createElement("div");Pe(),!1!==Mt&&(Rt.classList.add("tabulator-edit-select-list-notice"),Rt.tabIndex=0,Mt instanceof Node?Rt.appendChild(Mt):Rt.innerHTML=Mt,C.appendChild(Rt))}function Re(Mt){var Rt=[];if(Array.isArray(Mt))Mt.forEach(function(Pt){var fn={};"object"==typeof Pt?(fn.title=s.listItemFormatter?s.listItemFormatter(Pt.value,Pt.label):Pt.label,fn.value=Pt.value):(fn.title=s.listItemFormatter?s.listItemFormatter(Pt,Pt):Pt,fn.value=Pt),Rt.push(fn)});else for(var tt in Mt){var Lt={title:s.listItemFormatter?s.listItemFormatter(tt,Mt[tt]):Mt[tt],value:tt};Rt.push(Lt)}return Rt}function Pe(){for(;C.firstChild;)C.removeChild(C.firstChild)}function nt(Mt,Rt){Mt.length?function(Mt,Rt){var tt=!1;Pe(),(w=Mt).forEach(function(Lt){var Pt=Lt.element;Pt||((Pt=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),Pt.tabIndex=0,Pt.innerHTML=Lt.title,Pt.addEventListener("click",function(fn){Cn(Lt),St()}),Pt.addEventListener("mousedown",function(fn){N=!1,setTimeout(function(){N=!0},10)}),Lt.element=Pt,Rt&&Lt.value==h&&(b.value=Lt.title,Lt.element.classList.add("active"),tt=!0),Lt===x&&(Lt.element.classList.add("active"),tt=!0)),C.appendChild(Pt)}),tt||Cn(!1)}(Mt,Rt):s.emptyPlaceholder&&xe(s.emptyPlaceholder)}function St(){Gt(),x?h!==x.value?(h=x.value,b.value=x.title,e(x.value)):n():s.freetext||s.allowEmpty&&""===b.value?(h=b.value,e(b.value)):n()}function Cn(Mt,Rt){x&&x.element&&x.element.classList.remove("active"),x=Mt,Mt&&Mt.element&&Mt.element.classList.add("active"),Mt&&Mt.element&&Mt.element.scrollIntoView&&Mt.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Gt(){C.parentNode&&C.parentNode.removeChild(C),l.table.rowManager.element.removeEventListener("scroll",Mn)}function Mn(){Gt(),n()}return C.classList.add("tabulator-edit-select-list"),C.addEventListener("mousedown",function(Mt){N=!1,setTimeout(function(){N=!0},10)}),b.addEventListener("keydown",function(Mt){var Rt;switch(Mt.keyCode){case 38:Rt=w.indexOf(x),("editor"==p||"hybrid"==p&&Rt)&&(Mt.stopImmediatePropagation(),Mt.stopPropagation(),Mt.preventDefault(),Cn(Rt>0&&w[Rt-1]));break;case 40:Rt=w.indexOf(x),("editor"==p||"hybrid"==p&&Rt<w.length-1)&&(Mt.stopImmediatePropagation(),Mt.stopPropagation(),Mt.preventDefault(),Rt<w.length-1&&Cn(-1==Rt?w[0]:w[Rt+1]));break;case 37:case 39:Mt.stopImmediatePropagation(),Mt.stopPropagation();break;case 13:St();break;case 27:Mn();break;case 36:case 35:Mt.stopImmediatePropagation()}}),b.addEventListener("keyup",function(Mt){switch(Mt.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:te(b.value)}}),b.addEventListener("search",function(Mt){te(b.value)}),b.addEventListener("blur",function(Mt){N&&St()}),b.addEventListener("focus",function(Mt){var Rt=g;V(),function(){if(!C.parentNode){for(;C.firstChild;)C.removeChild(C.firstChild);var Mt=gr.elOffset(u);C.style.minWidth=u.offsetWidth+"px",C.style.top=Mt.top+u.offsetHeight+"px",C.style.left=Mt.left+"px",document.body.appendChild(C)}}(),b.value=Rt,te(Rt,!0)}),t(function(){b.style.height="100%",b.focus({preventScroll:!0})}),s.mask&&dC(b,s),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Mn)},10),V(),b.value=g,te(g,!0),b},star:function(r,t,e,n,s){var l=this,u=r.getElement(),h=r.getValue(),p=u.getElementsByTagName("svg").length||5,g=u.getElementsByTagName("svg")[0]?u.getElementsByTagName("svg")[0].getAttribute("width"):14,b=[],C=document.createElement("div"),w=document.createElementNS("http://www.w3.org/2000/svg","svg");function x($){b.forEach(function(te,xe){xe<$?("ie"==l.table.browser?te.setAttribute("class","tabulator-star-active"):te.classList.replace("tabulator-star-inactive","tabulator-star-active"),te.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==l.table.browser?te.setAttribute("class","tabulator-star-inactive"):te.classList.replace("tabulator-star-active","tabulator-star-inactive"),te.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function N($){var te=document.createElement("span"),xe=w.cloneNode(!0);b.push(xe),te.addEventListener("mouseenter",function(Re){Re.stopPropagation(),Re.stopImmediatePropagation(),x($)}),te.addEventListener("mousemove",function(Re){Re.stopPropagation(),Re.stopImmediatePropagation()}),te.addEventListener("click",function(Re){Re.stopPropagation(),Re.stopImmediatePropagation(),e($),u.blur()}),te.appendChild(xe),C.appendChild(te)}function B($){h=$,x($)}if(u.style.whiteSpace="nowrap",u.style.overflow="hidden",u.style.textOverflow="ellipsis",C.style.verticalAlign="middle",C.style.display="inline-block",C.style.padding="4px",w.setAttribute("width",g),w.setAttribute("height",g),w.setAttribute("viewBox","0 0 512 512"),w.setAttribute("xml:space","preserve"),w.style.padding="0 1px",s.elementAttributes&&"object"==typeof s.elementAttributes)for(let $ in s.elementAttributes)"+"==$.charAt(0)?($=$.slice(1),C.setAttribute($,C.getAttribute($)+s.elementAttributes["+"+$])):C.setAttribute($,s.elementAttributes[$]);for(var V=1;V<=p;V++)N(V);return x(h=Math.min(parseInt(h),p)),C.addEventListener("mousemove",function($){x(0)}),C.addEventListener("click",function($){e(0)}),u.addEventListener("blur",function($){n()}),u.addEventListener("keydown",function($){switch($.keyCode){case 39:B(h+1);break;case 37:B(h-1);break;case 13:e(h);break;case 27:n()}}),C},progress:function(r,t,e,n,s){var B,V,w,x,l=r.getElement(),u=void 0===s.max?(null==(B=l.getElementsByTagName("div")[0])?void 0:B.getAttribute("max"))||100:s.max,h=void 0===s.min?(null==(V=l.getElementsByTagName("div")[0])?void 0:V.getAttribute("min"))||0:s.min,p=(u-h)/100,g=r.getValue()||0,b=document.createElement("div"),C=document.createElement("div");function N(){var $=window.getComputedStyle(l,null),te=p*Math.round(C.offsetWidth/((l.clientWidth-parseInt($.getPropertyValue("padding-left"))-parseInt($.getPropertyValue("padding-right")))/100))+h;e(te),l.setAttribute("aria-valuenow",te),l.setAttribute("aria-label",g)}if(b.style.position="absolute",b.style.right="0",b.style.top="0",b.style.bottom="0",b.style.width="5px",b.classList.add("tabulator-progress-handle"),C.style.display="inline-block",C.style.position="relative",C.style.height="100%",C.style.backgroundColor="#488CE9",C.style.maxWidth="100%",C.style.minWidth="0%",s.elementAttributes&&"object"==typeof s.elementAttributes)for(let $ in s.elementAttributes)"+"==$.charAt(0)?($=$.slice(1),C.setAttribute($,C.getAttribute($)+s.elementAttributes["+"+$])):C.setAttribute($,s.elementAttributes[$]);return l.style.padding="4px 4px",g=Math.min(parseFloat(g),u),g=Math.max(parseFloat(g),h),g=Math.round((g-h)/p),C.style.width=g+"%",l.setAttribute("aria-valuemin",h),l.setAttribute("aria-valuemax",u),C.appendChild(b),b.addEventListener("mousedown",function($){w=$.screenX,x=C.offsetWidth}),b.addEventListener("mouseover",function(){b.style.cursor="ew-resize"}),l.addEventListener("mousemove",function($){w&&(C.style.width=x+$.screenX-w+"px")}),l.addEventListener("mouseup",function($){w&&($.stopPropagation(),$.stopImmediatePropagation(),w=!1,x=!1,N())}),l.addEventListener("keydown",function($){switch($.keyCode){case 39:$.preventDefault(),C.style.width=C.clientWidth+l.clientWidth/100+"px";break;case 37:$.preventDefault(),C.style.width=C.clientWidth-l.clientWidth/100+"px";break;case 9:case 13:N();break;case 27:n()}}),l.addEventListener("blur",function(){n()}),C},tickCross:function(r,t,e,n,s){var l=r.getValue(),u=document.createElement("input"),h=s.tristate,p=void 0===s.indeterminateValue?null:s.indeterminateValue,g=!1;if(u.setAttribute("type","checkbox"),u.style.marginTop="5px",u.style.boxSizing="border-box",s.elementAttributes&&"object"==typeof s.elementAttributes)for(let C in s.elementAttributes)"+"==C.charAt(0)?(C=C.slice(1),u.setAttribute(C,u.getAttribute(C)+s.elementAttributes["+"+C])):u.setAttribute(C,s.elementAttributes[C]);function b(C){return h?C?g?p:u.checked:u.checked&&!g?(u.checked=!1,u.indeterminate=!0,g=!0,p):(g=!1,u.checked):u.checked}return u.value=l,h&&(void 0===l||l===p||""===l)&&(g=!0,u.indeterminate=!0),"firefox"!=this.table.browser&&t(function(){u.focus({preventScroll:!0})}),u.checked=!0===l||"true"===l||"True"===l||1===l,t(function(){u.focus()}),u.addEventListener("change",function(C){e(b())}),u.addEventListener("blur",function(C){e(b(!0))}),u.addEventListener("keydown",function(C){13==C.keyCode&&e(b()),27==C.keyCode&&n()}),u}};let Tee=(()=>{class r extends gi{constructor(e){super(e),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=r.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(e){var n=this.currentCell,s=this.options("tabEndNewRow");n&&(this.navigateNext(e)||s&&(n.getElement().firstChild.blur(),(s=this.table.addRow(!0===s?{}:"function"==typeof s?s(n.row.getComponent()):Object.assign({},s))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(e){return!!e.modules.edit&&e.modules.edit.edited}cellCancelEdit(e){e===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(e){e||(e=this.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach(n=>{this.modules.edit.clearEdited(n._getSelf())})}navigatePrev(e){var s,l,n=this.currentCell;if(n){if(e&&e.preventDefault(),s=this.navigateLeft())return!0;if((l=this.table.rowManager.prevDisplayRow(n.row,!0))&&(s=this.findNextEditableCell(l,l.cells.length)))return s.getComponent().edit(),!0}return!1}navigateNext(e){var s,l,n=this.currentCell;if(n){if(e&&e.preventDefault(),s=this.navigateRight())return!0;if((l=this.table.rowManager.nextDisplayRow(n.row,!0))&&(s=this.findNextEditableCell(l,-1)))return s.getComponent().edit(),!0}return!1}navigateLeft(e){var s,l,n=this.currentCell;return!(!n||(e&&e.preventDefault(),s=n.getIndex(),l=this.findPrevEditableCell(n.row,s),!l)||(l.getComponent().edit(),0))}navigateRight(e){var s,l,n=this.currentCell;return!(!n||(e&&e.preventDefault(),s=n.getIndex(),l=this.findNextEditableCell(n.row,s),!l)||(l.getComponent().edit(),0))}navigateUp(e){var s,l,n=this.currentCell;return!(!n||(e&&e.preventDefault(),s=n.getIndex(),l=this.table.rowManager.prevDisplayRow(n.row,!0),!l)||(l.cells[s].getComponent().edit(),0))}navigateDown(e){var s,l,n=this.currentCell;return!(!n||(e&&e.preventDefault(),s=n.getIndex(),l=this.table.rowManager.nextDisplayRow(n.row,!0),!l)||(l.cells[s].getComponent().edit(),0))}findNextEditableCell(e,n){var s=!1;if(n<e.cells.length-1)for(var l=n+1;l<e.cells.length;l++){let u=e.cells[l];if(u.column.modules.edit&&gr.elVisible(u.getElement())){let h=!0;if("function"==typeof u.column.modules.edit.check&&(h=u.column.modules.edit.check(u.getComponent())),h){s=u;break}}}return s}findPrevEditableCell(e,n){var s=!1;if(n>0)for(var l=n-1;l>=0;l--){let u=e.cells[l],h=!0;if(u.column.modules.edit&&gr.elVisible(u.getElement())&&("function"==typeof u.column.modules.edit.check&&(h=u.column.modules.edit.check(u.getComponent())),h)){s=u;break}}return s}initializeColumnCheck(e){void 0!==e.definition.editor&&this.initializeColumn(e)}columnDeleteCheck(e){this.currentCell&&this.currentCell.column===e&&this.cancelEdit()}rowDeleteCheck(e){this.currentCell&&this.currentCell.row===e&&this.cancelEdit()}initializeColumn(e){var n={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{}};switch(typeof e.definition.editor){case"string":this.editors[e.definition.editor]?n.editor=this.editors[e.definition.editor]:console.warn("Editor Error - No such editor found: ",e.definition.editor);break;case"function":n.editor=e.definition.editor;break;case"boolean":!0===e.definition.editor&&("function"!=typeof e.definition.formatter?n.editor=this.editors[e.definition.formatter]?this.editors[e.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",e.definition.formatter))}n.editor&&(e.modules.edit=n)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(e){var s,n=this.currentCell;if(this.invalidEdit=!1,n){for(this.currentCell=!1,s=n.getElement(),e?n.validate&&n.validate():s.classList.remove("tabulator-validation-fail"),s.classList.remove("tabulator-editing");s.firstChild;)s.removeChild(s.firstChild);n.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var e=this.currentCell,n=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),("textarea"==e.column.definition.editor||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.definition.cellEditCancelled&&e.column.definition.cellEditCancelled.call(this.table,n),this.dispatchExternal("cellEditCancelled",n)}}bindEditor(e){if(e.column.modules.edit){var n=this,s=e.getElement(!0);s.setAttribute("tabindex",0),s.addEventListener("click",function(l){s.classList.contains("tabulator-editing")||s.focus({preventScroll:!0})}),s.addEventListener("mousedown",function(l){2===l.button?l.preventDefault():n.mouseClick=!0}),s.addEventListener("focus",function(l){n.recursionBlock||n.edit(e,l,!1)})}}focusCellNoEvent(e,n){this.recursionBlock=!0,n&&"ie"===this.table.browser||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(e,n){this.focusCellNoEvent(e),this.edit(e,!1,n)}focusScrollAdjust(e){if("virtual"==this.table.rowManager.getRenderMode()){var n=this.table.rowManager.element.scrollTop,s=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,l=e.row.getElement();l.offsetTop<n?this.table.rowManager.element.scrollTop-=n-l.offsetTop:l.offsetTop+l.offsetHeight>s&&(this.table.rowManager.element.scrollTop+=l.offsetTop+l.offsetHeight-s);var h=this.table.rowManager.element.scrollLeft,p=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,g=e.getElement();this.table.modExists("frozenColumns")&&(h+=parseInt(this.table.modules.frozenColumns.leftMargin),p-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(h-=parseInt(this.table.columnManager.renderer.vDomPadLeft),p-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),g.offsetLeft<h?this.table.rowManager.element.scrollLeft-=h-g.offsetLeft:g.offsetLeft+g.offsetWidth>p&&(this.table.rowManager.element.scrollLeft+=g.offsetLeft+g.offsetWidth-p)}}edit(e,n,s){var g,b,C,l=this,u=!0,h=function(){},p=e.getElement();if(!this.currentCell){if(e.column.modules.edit.blocked)return this.mouseClick=!1,p.blur(),!1;switch(n&&n.stopPropagation(),typeof e.column.modules.edit.check){case"function":u=e.column.modules.edit.check(e.getComponent());break;case"boolean":u=e.column.modules.edit.check}if(u||s){if(l.cancelEdit(),l.currentCell=e,this.focusScrollAdjust(e),b=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.definition.cellClick&&e.column.definition.cellClick.call(this.table,n,b)),e.column.definition.cellEditing&&e.column.definition.cellEditing.call(this.table,b),this.dispatchExternal("cellEditing",b),C="function"==typeof e.column.modules.edit.params?e.column.modules.edit.params(b):e.column.modules.edit.params,!1===(g=e.column.modules.edit.editor.call(l,b,function($){h=$},function($){if(l.currentCell===e){var te=!0;return e.column.modules.validate&&l.table.modExists("validate")&&"manual"!=l.table.options.validationMode&&(te=l.table.modules.validate.validate(e.column.modules.validate,e,$)),!0===te||"highlight"===l.table.options.validationMode?(l.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,-1==l.editedCells.indexOf(e)&&l.editedCells.push(e),e.setValue($,!0),l.table.options.dataTree&&l.table.modExists("dataTree")&&l.table.modules.dataTree.checkForRestyle(e),!0===te||(p.classList.add("tabulator-validation-fail"),l.table.externalEvents.dispatch("validationFailed",e.getComponent(),$,te),!1)):(l.invalidEdit=!0,p.classList.add("tabulator-validation-fail"),l.focusCellNoEvent(e,!0),h(),l.table.externalEvents.dispatch("validationFailed",e.getComponent(),$,te),!1)}},function(){l.currentCell===e&&(l.cancelEdit(),l.table.options.dataTree&&l.table.modExists("dataTree")&&l.table.modules.dataTree.checkForRestyle(e))},C)))return p.blur(),!1;if(!(g instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",g),p.blur(),!1;for(p.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-row-editing");p.firstChild;)p.removeChild(p.firstChild);p.appendChild(g),h();for(var B=p.children,V=0;V<B.length;V++)B[V].addEventListener("click",function($){$.stopPropagation()});return!0}return this.mouseClick=!1,p.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var e=[];return this.editedCells.forEach(n=>{e.push(n.getComponent())}),e}clearEdited(e){var n;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,e.modules.validate&&(e.modules.validate.invalid=!1)),(n=this.editedCells.indexOf(e))>-1&&this.editedCells.splice(n,1)}}return r.moduleName="edit",r.editors=Eee,r})();class LF{constructor(t,e,n,s){this.type=t,this.columns=e,this.component=n||!1,this.indent=s||0}}class sD{constructor(t,e,n,s,l){this.value=t,this.component=e||!1,this.width=n,this.height=s,this.depth=l}}let wee=(()=>{class r extends gi{constructor(e){super(e),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(e,n,s,l){this.cloneTableStyle=n,this.config=e||{},this.colVisProp=l;var u=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],h=this.bodyToExportRows(this.rowLookup(s));return u.concat(h)}genereateTable(e,n,s,l){var u=this.generateExportList(e,n,s,l);return this.genereateTableElement(u)}rowLookup(e){var n=[];if("function"==typeof e)e.call(this.table).forEach(s=>{(s=this.table.rowManager.findRow(s))&&n.push(s)});else switch(e){case!0:case"visible":n=this.table.rowManager.getVisibleRows(!0);break;case"all":n=this.table.rowManager.rows;break;case"selected":n=this.table.modules.selectRow.selectedRows;break;case"active":default:n=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],n)}generateColumnGroupHeaders(){var e=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(s=>{var l=this.processColumnGroup(s);l&&e.push(l)}),e}processColumnGroup(e){var n=e.columns,s=0,u={title:e.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||e.definition.title,column:e,depth:1};if(n.length){if(u.subGroups=[],u.width=0,n.forEach(h=>{var p=this.processColumnGroup(h);p&&(u.width+=p.width,u.subGroups.push(p),p.depth>s&&(s=p.depth))}),u.depth+=s,!u.width)return!1}else{if(!this.columnVisCheck(e))return!1;u.width=1}return u}columnVisCheck(e){return!1!==e.definition[this.colVisProp]&&(e.visible||!e.visible&&e.definition[this.colVisProp])}headersToExportRows(e){var n=[],s=0,l=[];function u(h,p){var g=s-p;if(void 0===n[p]&&(n[p]=[]),h.height=h.subGroups?1:g-h.depth+1,n[p].push(h),h.height>1)for(let b=1;b<h.height;b++)void 0===n[p+b]&&(n[p+b]=[]),n[p+b].push(!1);if(h.width>1)for(let b=1;b<h.width;b++)n[p].push(!1);h.subGroups&&h.subGroups.forEach(function(b){u(b,p+1)})}return e.forEach(function(h){h.depth>s&&(s=h.depth)}),e.forEach(function(h){u(h,0)}),n.forEach(h=>{var p=[];h.forEach(g=>{p.push(g?new sD(g.title,g.column.getComponent(),g.width,g.height,g.depth):null)}),l.push(new LF("header",p))}),l}bodyToExportRows(e){var n=[],s=[];return this.table.columnManager.columnsByIndex.forEach(l=>{this.columnVisCheck(l)&&n.push(l.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),(e=e.filter(l=>{switch(l.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&l.modules.dataTree.parent)}return!0})).forEach((l,u)=>{var h=l.getData(this.colVisProp),p=[],g=0;switch(l.type){case"group":g=l.level,p.push(new sD(l.key,l.getComponent(),n.length,1));break;case"calc":case"row":n.forEach(b=>{p.push(new sD(b._column.getFieldValue(h),b,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(g=l.modules.dataTree.index)}s.push(new LF(l.type,p,l.getComponent(),g))}),s}genereateTableElement(e){var n=document.createElement("table"),s=document.createElement("thead"),l=document.createElement("tbody"),u=this.lookupTableStyles(),h=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],p={};return p.rowFormatter=null!==h?h:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(p.treeElementField=this.table.modules.dataTree.elementField),p.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],p.groupHeader&&!Array.isArray(p.groupHeader)&&(p.groupHeader=[p.groupHeader]),n.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),s,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach((g,b)=>{switch(g.type){case"header":s.appendChild(this.genereateHeaderElement(g,p,u));break;case"group":l.appendChild(this.genereateGroupElement(g,p,u));break;case"calc":l.appendChild(this.genereateCalcElement(g,p,u));break;case"row":let C=this.genereateRowElement(g,p,u);this.mapElementStyles(b%2&&u.evenRow?u.evenRow:u.oddRow,C,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),l.appendChild(C)}}),s.innerHTML&&n.appendChild(s),n.appendChild(l),this.mapElementStyles(this.table.element,n,["border-top","border-left","border-right","border-bottom"]),n}lookupTableStyles(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e}genereateHeaderElement(e,n,s){var l=document.createElement("tr");return e.columns.forEach(u=>{if(u){var h=document.createElement("th"),p=u.component._column.definition.cssClass?u.component._column.definition.cssClass.split(" "):[];h.colSpan=u.width,h.rowSpan=u.height,h.innerHTML=u.value,this.cloneTableStyle&&(h.style.boxSizing="border-box"),p.forEach(function(g){h.classList.add(g)}),this.mapElementStyles(u.component.getElement(),h,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(u.component._column.contentElement,h,["padding-top","padding-left","padding-right","padding-bottom"]),u.component._column.visible?this.mapElementStyles(u.component.getElement(),h,["width"]):u.component._column.definition.width&&(h.style.width=u.component._column.definition.width+"px"),u.component._column.parent&&this.mapElementStyles(u.component._column.parent.groupElement,h,["border-top"]),l.appendChild(h)}}),l}genereateGroupElement(e,n,s){var l=document.createElement("tr"),u=document.createElement("td"),h=e.columns[0];return l.classList.add("tabulator-print-table-row"),h.value=n.groupHeader&&n.groupHeader[e.indent]?n.groupHeader[e.indent](h.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):!1===n.groupHeader?h.value:e.component._group.generator(h.value,e.component._group.getRowCount(),e.component._group.getData(),e.component),u.colSpan=h.width,u.innerHTML=h.value,l.classList.add("tabulator-print-table-group"),l.classList.add("tabulator-group-level-"+e.indent),h.component.isVisible()&&l.classList.add("tabulator-group-visible"),this.mapElementStyles(s.firstGroup,l,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(s.firstGroup,u,["padding-top","padding-left","padding-right","padding-bottom"]),l.appendChild(u),l}genereateCalcElement(e,n,s){var l=this.genereateRowElement(e,n,s);return l.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(s.calcRow,l,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),l}genereateRowElement(e,n,s){var l=document.createElement("tr");return l.classList.add("tabulator-print-table-row"),e.columns.forEach(u=>{if(u){var h=document.createElement("td"),p=u.component._column,g=u.value,b={modules:{},getValue:function(){return g},getField:function(){return p.definition.field},getElement:function(){return h},getColumn:function(){return p.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getComponent:function(){return b},column:p};if((p.definition.cssClass?p.definition.cssClass.split(" "):[]).forEach(function(w){h.classList.add(w)}),this.table.modExists("format")&&!1!==this.config.formatCells)g=this.table.modules.format.formatExportValue(b,this.colVisProp);else switch(typeof g){case"object":g=JSON.stringify(g);break;case"undefined":case"null":g="";break;default:g=g}g instanceof Node?h.appendChild(g):h.innerHTML=g,s.firstCell&&(this.mapElementStyles(s.firstCell,h,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),p.definition.align&&(h.style.textAlign=p.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(n.treeElementField&&n.treeElementField==p.field||!n.treeElementField&&0==i)&&(e.component._row.modules.dataTree.controlEl&&h.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),h.firstChild),e.component._row.modules.dataTree.branchEl&&h.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),h.firstChild)),l.appendChild(h),b.modules.format&&b.modules.format.renderedCallback&&b.modules.format.renderedCallback(),n.rowFormatter&&!1!==this.config.formatCells&&n.rowFormatter(e.component)}}),l}genereateHTMLTable(e){var n=document.createElement("div");return n.appendChild(this.genereateTableElement(e)),n.innerHTML}getHtml(e,n,s,l){var u=this.generateExportList(s||this.table.options.htmlOutputConfig,n,e,l||"htmlOutput");return this.genereateHTMLTable(u)}mapElementStyles(e,n,s){if(this.cloneTableStyle&&e&&n){var l={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var u=window.getComputedStyle(e);s.forEach(function(h){n.style[l[h]]=u.getPropertyValue(h)})}}}}return r.moduleName="export",r})();var See={"=":function(r,t,e,n){return t==r},"<":function(r,t,e,n){return t<r},"<=":function(r,t,e,n){return t<=r},">":function(r,t,e,n){return t>r},">=":function(r,t,e,n){return t>=r},"!=":function(r,t,e,n){return t!=r},regex:function(r,t,e,n){return"string"==typeof r&&(r=new RegExp(r)),r.test(t)},like:function(r,t,e,n){return null==r?t===r:null!=t&&String(t).toLowerCase().indexOf(r.toLowerCase())>-1},keywords:function(r,t,e,n){var s=r.toLowerCase().split(void 0===n.separator?" ":n.separator),l=String(null==t?"":t).toLowerCase(),u=[];return s.forEach(h=>{l.includes(h)&&u.push(!0)}),n.matchAll?u.length===s.length:!!u.length},starts:function(r,t,e,n){return null==r?t===r:null!=t&&String(t).toLowerCase().startsWith(r.toLowerCase())},ends:function(r,t,e,n){return null==r?t===r:null!=t&&String(t).toLowerCase().endsWith(r.toLowerCase())},in:function(r,t,e,n){return Array.isArray(r)?!r.length||r.indexOf(t)>-1:(console.warn("Filter Error - filter value is not an array:",r),!1)}};let Mee=(()=>{class r extends gi{constructor(e){super(e),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(e=>{var n=this.table.columnManager.findColumn(e.field);if(!n)return console.warn("Column Filter Error - No matching column found:",e.field),!1;this.setHeaderFilterValue(n,e.value)}),this.tableInitialized=!0}remoteFilterParams(e,n,s,l){return l.filter=this.getFilters(!0,!0),l}userSetFilter(e,n,s,l){this.setFilter(e,n,s,l),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(e,n,s,l){this.addFilter(e,n,s,l),this.refreshFilter()}userSetHeaderFilterFocus(e){var n=this.table.columnManager.findColumn(e);if(!n)return console.warn("Column Filter Focus Error - No matching column found:",e),!1;this.setHeaderFilterFocus(n)}userGetHeaderFilterValue(e){var n=this.table.columnManager.findColumn(e);if(n)return this.getHeaderFilterValue(n);console.warn("Column Filter Error - No matching column found:",e)}userSetHeaderFilterValue(e,n){var s=this.table.columnManager.findColumn(e);if(!s)return console.warn("Column Filter Error - No matching column found:",e),!1;this.setHeaderFilterValue(s,n)}userRemoveFilter(e,n,s){this.removeFilter(e,n,s),this.refreshFilter()}userClearFilter(e){this.clearFilter(e),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(e,n,s){return this.search("rows",e,n,s)}searchData(e,n,s){return this.search("data",e,n,s)}initializeColumnHeaderFilter(e){var n=e.definition;n.headerFilter&&(void 0!==n.headerFilterPlaceholder&&n.field&&this.module("localize").setHeaderFilterColumnPlaceholder(n.field,n.headerFilterPlaceholder),this.initializeColumn(e))}initializeColumn(e,n){var s=this,l=e.getField();e.modules.filter={success:function(h){var C,p="input"==e.modules.filter.tagType&&"text"==e.modules.filter.attrType||"textarea"==e.modules.filter.tagType?"partial":"match",g="",b="";if(void 0===e.modules.filter.prevSuccess||e.modules.filter.prevSuccess!==h){if(e.modules.filter.prevSuccess=h,e.modules.filter.emptyFunc(h))delete s.headerFilters[l];else{switch(e.modules.filter.value=h,typeof e.definition.headerFilterFunc){case"string":r.filters[e.definition.headerFilterFunc]?(g=e.definition.headerFilterFunc,C=function(w){var x=e.definition.headerFilterFuncParams||{},N=e.getFieldValue(w);return x="function"==typeof x?x(h,N,w):x,r.filters[e.definition.headerFilterFunc](h,N,w,x)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":g=C=function(w){var x=e.definition.headerFilterFuncParams||{},N=e.getFieldValue(w);return x="function"==typeof x?x(h,N,w):x,e.definition.headerFilterFunc(h,N,w,x)}}if(!C)switch(p){case"partial":C=function(w){var x=e.getFieldValue(w);return null!=x&&String(x).toLowerCase().indexOf(String(h).toLowerCase())>-1},g="like";break;default:C=function(w){return e.getFieldValue(w)==h},g="="}s.headerFilters[l]={value:h,func:C,type:g,params:{}}}b=JSON.stringify(s.headerFilters),s.prevHeaderFilterChangeCheck!==b&&(s.prevHeaderFilterChangeCheck=b,s.trackChanges(),s.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)}generateHeaderFilterElement(e,n,s){var p,g,b,C,w,x,N,l=this,u=e.modules.filter.success,h=e.getField();if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),h){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(V){return!V&&"0"!==V&&0!==V},(p=document.createElement("div")).classList.add("tabulator-header-filter"),typeof e.definition.headerFilter){case"string":l.table.modules.edit.editors[e.definition.headerFilter]?(g=l.table.modules.edit.editors[e.definition.headerFilter],("tick"===e.definition.headerFilter||"tickCross"===e.definition.headerFilter)&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(V){return!0!==V&&!1!==V})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":g=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?g=e.modules.edit.editor:e.definition.formatter&&l.table.modules.edit.editors[e.definition.formatter]?(g=l.table.modules.edit.editors[e.definition.formatter],("tick"===e.definition.formatter||"tickCross"===e.definition.formatter)&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(V){return!0!==V&&!1!==V})):g=l.table.modules.edit.editors.input}if(g){if(C={getValue:function(){return void 0!==n?n:""},getField:function(){return e.definition.field},getElement:function(){return p},getColumn:function(){return e.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},N="function"==typeof(N=e.definition.headerFilterParams||{})?N.call(l.table):N,!(b=g.call(this.table.modules.edit,C,function(){},u,function(){},N)))return void console.warn("Filter Error - Cannot add filter to "+h+" column, editor returned a value of false");if(!(b instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+h+" column, editor should return an instance of Node, the editor returned:",b);h?l.langBind("headerFilters|columns|"+e.definition.field,function(V){b.setAttribute("placeholder",void 0!==V&&V?V:l.langText("headerFilters|default"))}):l.langBind("headerFilters|default",function(V){b.setAttribute("placeholder",V)}),b.addEventListener("click",function(V){V.stopPropagation(),b.focus()}),b.addEventListener("focus",V=>{var $=this.table.columnManager.element.scrollLeft;$!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal($),this.table.columnManager.scrollHorizontal($))}),w=!1,x=function(V){w&&clearTimeout(w),w=setTimeout(function(){u(b.value)},l.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=b,e.modules.filter.attrType=b.hasAttribute("type")?b.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=b.tagName.toLowerCase(),!1!==e.definition.headerFilterLiveFilter&&("autocomplete"===e.definition.headerFilter||"tickCross"===e.definition.headerFilter||("autocomplete"===e.definition.editor||"tickCross"===e.definition.editor)&&!0===e.definition.headerFilter||(b.addEventListener("keyup",x),b.addEventListener("search",x),"number"==e.modules.filter.attrType&&b.addEventListener("change",function(V){u(b.value)}),"text"==e.modules.filter.attrType&&"ie"!==this.table.browser&&b.setAttribute("type","search")),("input"==e.modules.filter.tagType||"select"==e.modules.filter.tagType||"textarea"==e.modules.filter.tagType)&&b.addEventListener("mousedown",function(V){V.stopPropagation()})),p.appendChild(b),e.contentElement.appendChild(p),s||l.headerFilterColumns.push(e)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())}getHeaderFilterValue(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())}setHeaderFilterValue(e,n){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,n,!0),e.modules.filter.success(n)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}reloadHeaderFilter(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var e=this.changed;return this.changed=!1,e}setFilter(e,n,s,l){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:n,value:s,params:l}]),this.addFilter(e)}addFilter(e,n,s,l){Array.isArray(e)||(e=[{field:e,type:n,value:s,params:l}]),e.forEach(u=>{(u=this.findFilter(u))&&(this.filterList.push(u),this.changed=!0)})}findFilter(e){var n;if(Array.isArray(e))return this.findSubFilters(e);var s=!1;return"function"==typeof e.field?s=function(l){return e.field(l,e.type||{})}:r.filters[e.type]?s=(n=this.table.columnManager.getColumnByField(e.field))?function(l){return r.filters[e.type](e.value,n.getFieldValue(l),l,e.params||{})}:function(l){return r.filters[e.type](e.value,l[e.field],l,e.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=s,!!e.func&&e}findSubFilters(e){var n=[];return e.forEach(s=>{(s=this.findFilter(s))&&n.push(s)}),!!n.length&&n}getFilters(e,n){var s=[];return e&&(s=this.getHeaderFilters()),n&&s.forEach(function(l){"function"==typeof l.type&&(l.type="function")}),s.concat(this.filtersToArray(this.filterList,n))}filtersToArray(e,n){var s=[];return e.forEach(l=>{var u;Array.isArray(l)?s.push(this.filtersToArray(l,n)):(u={field:l.field,type:l.type,value:l.value},n&&"function"==typeof u.type&&(u.type="function"),s.push(u))}),s}getHeaderFilters(){var e=[];for(var n in this.headerFilters)e.push({field:n,type:this.headerFilters[n].type,value:this.headerFilters[n].value});return e}removeFilter(e,n,s){Array.isArray(e)||(e=[{field:e,type:n,value:s}]),e.forEach(l=>{var u;(u=this.filterList.findIndex("object"==typeof l.field?h=>l===h:h=>l.field===h.field&&l.type===h.type&&l.value===h.value))>-1?this.filterList.splice(u,1):console.warn("Filter Error - No matching filter type found, ignoring: ",l.type)}),this.trackChanges()}clearFilter(e){this.filterList=[],e&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(e=>{void 0!==e.modules.filter.value&&delete e.modules.filter.value,e.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(e)}),this.trackChanges()}search(e,n,s,l){var u=[],h=[];return Array.isArray(n)||(n=[{field:n,type:s,value:l}]),n.forEach(p=>{(p=this.findFilter(p))&&h.push(p)}),this.table.rowManager.rows.forEach(p=>{var g=!0;h.forEach(b=>{this.filterRecurse(b,p.getData())||(g=!1)}),g&&u.push("data"===e?p.getData("data"):p.getComponent())}),u}filter(e,n){var s=[],l=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?e.forEach(u=>{this.filterRow(u)&&s.push(u)}):s=e.slice(0),this.subscribedExternal("dataFiltered")&&(s.forEach(u=>{l.push(u.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),l)),s}filterRow(e,n){var s=!0,l=e.getData();for(var u in this.filterList.forEach(h=>{this.filterRecurse(h,l)||(s=!1)}),this.headerFilters)this.headerFilters[u].func(l)||(s=!1);return s}filterRecurse(e,n){var s=!1;return Array.isArray(e)?e.forEach(l=>{this.filterRecurse(l,n)&&(s=!0)}):s=e.func(n),s}}return r.moduleName="filter",r.filters=See,r})();var Yee={plaintext:function(r,t,e){return this.emptyToSpace(this.sanitizeHTML(r.getValue()))},html:function(r,t,e){return r.getValue()},textarea:function(r,t,e){return r.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(r.getValue()))},money:function(r,t,e){var l,u,h,p,n=parseFloat(r.getValue()),s="",g=t.decimal||".",b=t.thousand||",",C=t.negativeSign||"-",w=t.symbol||"",x=!!t.symbolAfter,N=void 0!==t.precision?t.precision:2;if(isNaN(n))return this.emptyToSpace(this.sanitizeHTML(r.getValue()));for(n<0&&(n=Math.abs(n),s=C),l=!1!==N?n.toFixed(N):n,u=(l=String(l).split("."))[0],h=l.length>1?g+l[1]:"",p=/(\d+)(\d{3})/;p.test(u);)u=u.replace(p,"$1"+b+"$2");return x?s+u+h+w:s+w+u+h},link:function(r,t,e){var n=r.getValue(),s=t.urlPrefix||"",l=t.download,u=n,h=document.createElement("a");if(t.labelField&&(u=r.getData()[t.labelField]),t.label)switch(typeof t.label){case"string":u=t.label;break;case"function":u=t.label(r)}if(u){if(t.urlField&&(n=r.getData()[t.urlField]),t.url)switch(typeof t.url){case"string":n=t.url;break;case"function":n=t.url(r)}return h.setAttribute("href",s+n),t.target&&h.setAttribute("target",t.target),t.download&&(l="function"==typeof l?l(r):!0===l?"":l,h.setAttribute("download",l)),h.innerHTML=this.emptyToSpace(this.sanitizeHTML(u)),h}return"&nbsp;"},image:function(r,t,e){var n=document.createElement("img"),s=r.getValue();switch(t.urlPrefix&&(s=t.urlPrefix+r.getValue()),t.urlSuffix&&(s+=t.urlSuffix),n.setAttribute("src",s),typeof t.height){case"number":n.style.height=t.height+"px";break;case"string":n.style.height=t.height}switch(typeof t.width){case"number":n.style.width=t.width+"px";break;case"string":n.style.width=t.width}return n.addEventListener("load",function(){r.getRow().normalizeHeight()}),n},tickCross:function(r,t,e){var n=r.getValue(),s=r.getElement(),l=t.allowEmpty,h=void 0!==t.tickElement?t.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',p=void 0!==t.crossElement?t.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return t.allowTruthy&&n||!0===n||"true"===n||"True"===n||1===n||"1"===n?(s.setAttribute("aria-checked",!0),h||""):!l||"null"!==n&&""!==n&&null!=n?(s.setAttribute("aria-checked",!1),p||""):(s.setAttribute("aria-checked","mixed"),"")},datetime:function(r,t,e){var n=window.DateTime||luxon.DateTime,s=t.inputFormat||"yyyy-MM-dd HH:mm:ss",l=t.outputFormat||"dd/MM/yyyy HH:mm:ss",u=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",h=r.getValue();if(void 0!==n){var p=(window.DateTime||luxon.DateTime).fromFormat(h,s);return p.isValid?(t.timezone&&(p=p.shiftTimezone(t.timezone)),p.toFormat(l)):!0===u?h:"function"==typeof u?u(h):u}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(r,t,e){var n=window.DateTime||luxon.DateTime,s=t.inputFormat||"yyyy-MM-dd HH:mm:ss",l=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",u=void 0!==t.suffix&&t.suffix,h=void 0!==t.unit?t.unit:"days",p=void 0!==t.humanize&&t.humanize,g=void 0!==t.date?t.date:n.now(),b=r.getValue();if(void 0!==n){var C=n.fromFormat(b,s);if(!C.isValid)return!0===l?b:"function"==typeof l?l(b):l;if(!p)return parseInt(C.diff(g,h)[h])+(u?" "+u:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(r,t,e){var n=r.getValue();return void 0===t[n]?(console.warn("Missing display value for "+n),n):t[n]},star:function(r,t,e){var n=r.getValue(),s=r.getElement(),l=t&&t.stars?t.stars:5,u=document.createElement("span"),h=document.createElementNS("http://www.w3.org/2000/svg","svg");u.style.verticalAlign="middle",h.setAttribute("width","14"),h.setAttribute("height","14"),h.setAttribute("viewBox","0 0 512 512"),h.setAttribute("xml:space","preserve"),h.style.padding="0 1px",n=n&&!isNaN(n)?parseInt(n):0,n=Math.max(0,Math.min(n,l));for(var b=1;b<=l;b++){var C=h.cloneNode(!0);C.innerHTML=b<=n?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',u.appendChild(C)}return s.style.whiteSpace="nowrap",s.style.overflow="hidden",s.style.textOverflow="ellipsis",s.setAttribute("aria-label",n),u},traffic:function(r,t,e){var b,n=this.sanitizeHTML(r.getValue())||0,s=document.createElement("span"),l=t&&t.max?t.max:100,u=t&&t.min?t.min:0,h=t&&void 0!==t.color?t.color:["red","orange","green"],p="#666666";if(!isNaN(n)&&void 0!==r.getValue()){switch(s.classList.add("tabulator-traffic-light"),b=parseFloat(n)<=l?parseFloat(n):l,b=parseFloat(b)>=u?parseFloat(b):u,b=Math.round((b-u)/((l-u)/100)),typeof h){case"string":p=h;break;case"function":p=h(n);break;case"object":if(Array.isArray(h)){var w=Math.floor(b/(100/h.length));w=Math.min(w,h.length-1),p=h[w=Math.max(w,0)];break}}return s.style.backgroundColor=p,s}},progress:function(r,t,e){var g,b,C,w,n=this.sanitizeHTML(r.getValue())||0,s=r.getElement(),l=t&&t.max?t.max:100,u=t&&t.min?t.min:0,h=t&&t.legendAlign?t.legendAlign:"center";switch(g=parseFloat(n)<=l?parseFloat(n):l,g=parseFloat(g)>=u?parseFloat(g):u,g=Math.round((g-u)/((l-u)/100)),typeof t.color){case"string":b=t.color;break;case"function":b=t.color(n);break;case"object":if(Array.isArray(t.color)){var x=100/t.color.length,N=Math.floor(g/x);N=Math.min(N,t.color.length-1),N=Math.max(N,0),b=t.color[N];break}default:b="#2DC214"}switch(typeof t.legend){case"string":C=t.legend;break;case"function":C=t.legend(n);break;case"boolean":C=n;break;default:C=!1}switch(typeof t.legendColor){case"string":w=t.legendColor;break;case"function":w=t.legendColor(n);break;case"object":Array.isArray(t.legendColor)&&(x=100/t.legendColor.length,N=Math.floor(g/x),N=Math.min(N,t.legendColor.length-1),N=Math.max(N,0),w=t.legendColor[N]);break;default:w="#000"}s.style.minWidth="30px",s.style.position="relative",s.setAttribute("aria-label",g);var B=document.createElement("div");B.style.display="inline-block",B.style.position="absolute",B.style.width=g+"%",B.style.backgroundColor=b,B.style.height="100%",B.setAttribute("data-max",l),B.setAttribute("data-min",u);var V=document.createElement("div");if(V.style.position="relative",V.style.width="100%",V.style.height="100%",C){var $=document.createElement("div");$.style.position="absolute",$.style.top=0,$.style.left=0,$.style.textAlign=h,$.style.width="100%",$.style.color=w,$.innerHTML=C}return e(function(){if(!(r instanceof kF)){var te=document.createElement("div");te.style.position="absolute",te.style.top="4px",te.style.bottom="4px",te.style.left="4px",te.style.right="4px",s.appendChild(te),s=te}s.appendChild(V),V.appendChild(B),C&&V.appendChild($)}),""},color:function(r,t,e){return r.getElement().style.backgroundColor=this.sanitizeHTML(r.getValue()),""},buttonTick:function(r,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(r,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(r,t,e){return this.table.rowManager.activeRows.indexOf(r.getRow()._getSelf())+1},handle:function(r,t,e){return r.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(r,t,e){var n=document.createElement("div"),s=r.getRow()._row.modules.responsiveLayout;function l(u){var h=s.element;s.open=u,h&&(s.open?(n.classList.add("open"),h.style.display=""):(n.classList.remove("open"),h.style.display="none"))}return n.classList.add("tabulator-responsive-collapse-toggle"),n.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",r.getElement().classList.add("tabulator-row-handle"),n.addEventListener("click",function(u){u.stopImmediatePropagation(),l(!s.open)}),l(s.open),n},rowSelection:function(r,t,e){var n=document.createElement("input");if(n.type="checkbox",this.table.modExists("selectRow",!0))if(n.addEventListener("click",l=>{l.stopPropagation()}),"function"==typeof r.getRow){var s=r.getRow();s instanceof oD?(n.addEventListener("change",l=>{s.toggleSelect()}),n.checked=s.isSelected&&s.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(s,n)):n=""}else n.addEventListener("change",l=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(t.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(n);return n}};let $ee=(()=>{class r extends gi{constructor(e){super(e),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(e){e.modules.format=this.lookupFormatter(e,""),void 0!==e.definition.formatterPrint&&(e.modules.format.print=this.lookupFormatter(e,"Print")),void 0!==e.definition.formatterClipboard&&(e.modules.format.clipboard=this.lookupFormatter(e,"Clipboard")),void 0!==e.definition.formatterHtmlOutput&&(e.modules.format.htmlOutput=this.lookupFormatter(e,"HtmlOutput"))}lookupFormatter(e,n){var s={params:e.definition["formatter"+n+"Params"]||{}},l=e.definition["formatter"+n];switch(typeof l){case"string":r.formatters[l]?s.formatter=r.formatters[l]:(console.warn("Formatter Error - No such formatter found: ",l),s.formatter=r.formatters.plaintext);break;case"function":s.formatter=l;break;default:s.formatter=r.formatters.plaintext}return s}cellRendered(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)}formatHeader(e,n,s){var l,u,h,p;return e.definition.titleFormatter?(l=this.getFormatter(e.definition.titleFormatter),h=g=>{e.titleFormatterRendered=g},p={getValue:function(){return n},getElement:function(){return s}},u="function"==typeof(u=e.definition.titleFormatterParams||{})?u():u,l.call(this,p,u,h)):n}formatValue(e){var n=e.getComponent(),s="function"==typeof e.column.modules.format.params?e.column.modules.format.params(n):e.column.modules.format.params;return e.column.modules.format.formatter.call(this,n,s,function(u){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=u,e.modules.format.rendered=!1})}formatExportValue(e,n){var l,s=e.column.modules.format[n];if(s){let u=function(h){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=h,e.modules.format.rendered=!1};return l="function"==typeof s.params?s.params(component):s.params,s.formatter.call(this,e.getComponent(),l,u)}return this.formatValue(e)}sanitizeHTML(e){if(e){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(s){return n[s]})}return e}emptyToSpace(e){return null==e||""===e?"&nbsp;":e}getFormatter(e){switch(typeof e){case"string":r.formatters[e]?e=r.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),e=r.formatters.plaintext);break;case"function":e=e;break;default:e=r.formatters.plaintext}return e}}return r.moduleName="format",r.formatters=Yee,r})(),Kee=(()=>{class r extends gi{constructor(e){super(e),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(e){this.layoutElement(e.element,e.column)}initializeColumn(e){var n={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(n.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=n):this.initializationMode="right")}frozenCheck(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen}scrollHorizontal(){var e;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),e=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),e.forEach(n=>{"row"===n.type&&this.layoutRow(n)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(e){e.forEach(n=>{n.calcs.top&&this.layoutRow(n.calcs.top),n.calcs.bottom&&this.layoutRow(n.calcs.bottom),n.groupList&&n.groupList.length&&this.layoutGroupCalcs(n.groupList&&n.groupList)})}layoutColumnPosition(e){var n=[];this.leftColumns.forEach((s,l)=>{if(s.modules.frozen.margin=this._calcSpace(this.leftColumns,l)+this.table.columnManager.scrollLeft+"px",s.modules.frozen.edge=l==this.leftColumns.length-1,s.parent.isGroup){var u=this.getColGroupParentElement(s);n.includes(u)||(this.layoutElement(u,s),n.push(u)),s.modules.frozen.edge&&u.classList.add("tabulator-frozen-"+s.modules.frozen.position)}else this.layoutElement(s.getElement(),s);e&&s.cells.forEach(h=>{this.layoutElement(h.getElement(!0),s)})}),this.rightColumns.forEach((s,l)=>{s.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,l+1)+"px",s.modules.frozen.edge=l==this.rightColumns.length-1,this.layoutElement(s.parent.isGroup?this.getColGroupParentElement(s):s.getElement(),s),e&&s.cells.forEach(u=>{this.layoutElement(u.getElement(!0),s)})})}getColGroupParentElement(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(e=>{"row"===e.type&&this.layoutRow(e)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(e){e.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(s=>{var l=e.getCell(s);l&&this.layoutElement(l.getElement(!0),s)}),this.rightColumns.forEach(s=>{var l=e.getCell(s);l&&this.layoutElement(l.getElement(!0),s)})}layoutElement(e,n){n.modules.frozen&&(e.style.position="absolute",e.style.left=n.modules.frozen.margin,e.classList.add("tabulator-frozen"),n.modules.frozen.edge&&e.classList.add("tabulator-frozen-"+n.modules.frozen.position))}_calcSpace(e,n){var s=0;for(let l=0;l<n;l++)e[l].visible&&(s+=e[l].getWidth());return s}}return r.moduleName="frozenColumns",r})(),Jee=(()=>{class r extends gi{constructor(e){super(e),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(e){return this.rows.indexOf(e)>-1}isFrozen(){return!!this.rows.length}getRows(e){var n=e.slice(0);return this.rows.forEach(function(s){var l=n.indexOf(s);l>-1&&n.splice(l,1)}),n}freezeRow(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(e),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(e){this.rows.indexOf(e),e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(e){var n=this.rows.indexOf(e);if(n>-1){var s=e.getElement();s.parentNode&&s.parentNode.removeChild(s),this.rows.splice(n,1)}}styleRows(e){this.rows.forEach((n,s)=>{this.table.rowManager.styleRow(n,s)})}}return r.moduleName="frozenRows",r})();class Qee{constructor(t){return this._group=t,this.type="GroupComponent",new Proxy(this,{get:function(e,n,s){return void 0!==e[n]?e[n]:e._group.table.componentFunctionBinder.handle("row",e._group,n)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class Zf{constructor(t,e,n,s,l,u,h){this.groupManager=t,this.parent=e,this.key=s,this.level=n,this.field=l,this.hasSubGroups=n<t.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=h,this.rows=[],this.groups=[],this.groupList=[],this.generator=u,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=h?h.visible:void 0!==t.startOpen[n]?t.startOpen[n]:t.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(t){t.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var t=document.createElement("div");t.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(t),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var t=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]&&this.groupManager.allowedValues[t].forEach(e=>{this._createGroup(e,t)})}addBindings(){var t,e,n;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(n=!1,this.element.addEventListener("touchstart",l=>{n=!0},{passive:!0}),this.element.addEventListener("touchend",l=>{n&&this.groupManager.table.options.groupTap(l,this.getComponent()),n=!1})),this.groupManager.table.options.groupDblTap&&(t=null,this.element.addEventListener("touchend",l=>{t?(clearTimeout(t),t=null,this.groupManager.table.options.groupDblTap(l,this.getComponent())):t=setTimeout(()=>{clearTimeout(t),t=null},300)})),this.groupManager.table.options.groupTapHold&&(e=null,this.element.addEventListener("touchstart",l=>{clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),e=null,n=!1,this.groupManager.table.options.groupTapHold(l,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",l=>{clearTimeout(e),e=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",l=>{l.stopPropagation(),l.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(t,e){var n=e+"_"+t,s=new Zf(this.groupManager,this,e,t,this.groupManager.groupIDLookups[e].field,this.groupManager.headerGenerator[e]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[n]);this.groups[n]=s,this.groupList.push(s)}_addRowToGroup(t){var e=this.level+1;if(this.hasSubGroups){var n=this.groupManager.groupIDLookups[e].func(t.getData()),s=e+"_"+n;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]?this.groups[s]&&this.groups[s].addRow(t):(this.groups[s]||this._createGroup(n,e),this.groups[s].addRow(t))}}_addRow(t){this.rows.push(t),t.modules.group=this}insertRow(t,e,n){var s=this.conformRowData({});t.updateData(s);var l=this.rows.indexOf(e);l>-1?this.rows.splice(n?l+1:l,0,t):n?this.rows.push(t):this.rows.unshift(t),t.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(t){this.arrowElement.style.marginLeft=t,this.groupList.forEach(function(e){e.scrollHeader(t)})}getRowIndex(t){}conformRowData(t){return this.field?t[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(t=this.parent.conformRowData(t)),t}removeRow(t){var e=this.rows.indexOf(t),n=t.getElement();e>-1&&this.rows.splice(e,1),this.groupManager.table.options.groupValues||this.rows.length?(n.parentNode&&n.parentNode.removeChild(n),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(t){var n,e=t.level+"_"+t.key;this.groups[e]&&(delete this.groups[e],(n=this.groupList.indexOf(t))>-1&&this.groupList.splice(n,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(t){var e=[];return e.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(n){e=e.concat(n.getHeadersAndRows(t))}):(!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),e=e.concat(this.rows),!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!t&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top))),!t&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom)))),e}getData(t,e){var n=[];return this._visSet(),(!t||t&&this.visible)&&this.rows.forEach(s=>{n.push(s.getData(e||"data"))}),n}getRowCount(){var t=0;return this.groupList.length?this.groupList.forEach(e=>{t+=e.getRowCount()}):t=this.rows.length,t}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(t=>{t.getHeadersAndRows().forEach(n=>{n.detachElement()})}):this.rows.forEach(t=>{var e=t.getElement();e.parentNode.removeChild(e)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var t=this.getElement();this.groupList.length?this.groupList.forEach(e=>{e.getHeadersAndRows().forEach(s=>{var l=s.getElement();t.parentNode.insertBefore(l,t.nextSibling),s.initialize(),t=l})}):this.rows.forEach(e=>{var n=e.getElement();t.parentNode.insertBefore(n,t.nextSibling),e.initialize(),t=n}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var t=[];"function"==typeof this.visible&&(this.rows.forEach(function(e){t.push(e.getData())}),this.visible=this.visible(this.key,this.getRowCount(),t,this.getComponent()))}getRowGroup(t){var e=!1;return this.groupList.length?this.groupList.forEach(function(n){var s=n.getRowGroup(t);s&&(e=s)}):this.rows.find(function(n){return n===t})&&(e=this),e}getSubGroups(t){var e=[];return this.groupList.forEach(function(n){e.push(t?n.getComponent():n)}),e}getRows(t){var e=[];return this.rows.forEach(function(n){e.push(t?n.getComponent():n)}),e}generateGroupHeaderContents(){var t=[];for(this.rows.forEach(function(e){t.push(e.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),t,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(t=[]){return t.unshift(this.key),this.parent&&this.parent.getPath(t),t}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var t=0;t<this.element.childNodes.length;++t)this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(t){(!this.initialized||t)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,gr.elVisible(this.element)&&this.initialize(!0)}setHeight(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new Qee(this)),this.component}}let Zee=(()=>{class r extends gi{constructor(e){super(e),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var e=this.table.options.groupBy,n=this.table.options.groupStartOpen,s=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(e)&&Array.isArray(s)&&e.length>s.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(u,h)=>{this.headerGenerator[0]=(p,g,b)=>(void 0===p?"":p)+"<span>("+g+" "+(1===g?u:h.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(e)||e?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(u=>{u.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),u.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(e)||(e=[e]),e.forEach((u,h)=>{var p,g;p="function"==typeof u?u:(g=this.table.columnManager.getColumnByField(u))?function(b){return g.getFieldValue(b)}:function(b){return b[u]},this.groupIDLookups.push({field:"function"!=typeof u&&u,func:p,values:!!this.allowedValues&&this.allowedValues[h]})}),n&&(Array.isArray(n)||(n=[n]),n.forEach(u=>{}),this.startOpen=n),s&&(this.headerGenerator=Array.isArray(s)?s:[s])}}rowSample(e,n){var s=this.getGroups(!1)[0];return n.push(s.getRows(!1)[0]),n}virtualRenderFill(){var e=this.table.rowManager.tableElement,n=this.table.rowManager.getVisibleRows();n=n.filter(s=>"group"!==s.type),e.style.minWidth=n.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(e,n,s){this.assignRowToGroup(e);var l=e.modules.group.rows;return l.length>1&&(!n||n&&-1==l.indexOf(n)?s?l[0]!==e&&this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n=l[0],!s):l[l.length-1]!==e&&this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n=l[l.length-1],!s):this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n,!s)),n}trackChanges(){this.dispatch("group-changed")}setGroupBy(e){this.table.options.groupBy=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(e){this.table.options.groupValues=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(e){this.table.options.groupStartOpen=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(e){this.table.options.groupHeader=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(e){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(e){return!!e.modules.group&&e.modules.group.getComponent()}rowMoving(e,n,s){!s&&n instanceof Zf&&(n=this.table.rowManager.prevDisplayRow(e)||n);var l=n instanceof Zf?n:n.modules.group,u=e instanceof Zf?e:e.modules.group;l===u?this.table.rowManager.moveRowInArray(l.rows,e,n,s):(u&&u.removeRow(e),l.insertRow(e,n,s))}rowDeleting(e){e.modules.group&&e.modules.group.removeRow(e)}rowsUpdated(e){this.updateGroupRows(!0)}cellUpdated(e){this.reassignRowToGroup(e.row)}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}getRows(e){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(e),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):e.slice(0)}getGroups(e){var n=[];return this.groupList.forEach(function(s){n.push(e?s.getComponent():s)}),n}getChildGroups(e){var n=[];return e||(e=this),e.groupList.forEach(s=>{s.groupList.length?n=n.concat(this.getChildGroups(s)):n.push(s)}),n}wipe(){this.groupList.forEach(function(e){e.wipe()})}pullGroupListData(e){var n=[];return e.forEach(s=>{var l={level:0,rowCount:0,headerContent:""},u=[];s.hasSubGroups?(u=this.pullGroupListData(s.groupList),l.level=s.level,l.rowCount=u.length-s.groupList.length,l.headerContent=s.generator(s.key,l.rowCount,s.rows,s),n.push(l),n=n.concat(u)):(l.level=s.level,l.headerContent=s.generator(s.key,s.rows.length,s.rows,s),l.rowCount=s.getRows().length,n.push(l),s.getRows().forEach(h=>{n.push(h.getData("data"))}))}),n}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(e){var n=!1;return this.groupList.forEach(s=>{var l=s.getRowGroup(e);l&&(n=l)}),n}countGroups(){return this.groupList.length}generateGroups(e){var n=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(s=>{this.createGroup(s,0,n)}),e.forEach(s=>{this.assignRowToExistingGroup(s,n)})):e.forEach(s=>{this.assignRowToGroup(s,n)})}createGroup(e,n,s){var u,l=n+"_"+e;u=new Zf(this,!1,n,e,this.groupIDLookups[0].field,this.headerGenerator[0],(s=s||[])[l]),this.groups[l]=u,this.groupList.push(u)}assignRowToExistingGroup(e,n){var l="0_"+this.groupIDLookups[0].func(e.getData());this.groups[l]&&this.groups[l].addRow(e)}assignRowToGroup(e,n){var s=this.groupIDLookups[0].func(e.getData()),l=!this.groups["0_"+s];return l&&this.createGroup(s,0,n),this.groups["0_"+s].addRow(e),!l}reassignRowToGroup(e){if("row"===e.type){var n=e.modules.group,s=n.getPath(),l=this.getExpectedPath(e);s.length==l.length&&s.every((h,p)=>h===l[p])||(n.removeRow(e),this.assignRowToGroup(e,this.groups),this.refreshData(!0))}}getExpectedPath(e){var n=[],s=e.getData();return this.groupIDLookups.forEach(l=>{n.push(l.func(s))}),n}updateGroupRows(e){var n=[];return this.groupList.forEach(s=>{n=n.concat(s.getHeadersAndRows())}),e&&this.refreshData(!0,this.displayHandler),n}scrollHeaders(e){"virtual"===this.table.options.renderHorizontal&&(e-=this.table.columnManager.renderer.vDomPadLeft),e+="px",this.groupList.forEach(n=>{n.scrollHeader(e)})}removeGroup(e){var s,n=e.level+"_"+e.key;this.groups[n]&&(delete this.groups[n],(s=this.groupList.indexOf(e))>-1&&this.groupList.splice(s,1))}}return r.moduleName="groupRows",r})();var qee={cellEdit:function(r){r.component.setValueProcessData(r.data.oldValue),r.component.cellRendered()},rowAdd:function(r){r.component.deleteActual()},rowDelete:function(r){var t=this.table.rowManager.addRowActual(r.data.data,r.data.pos,r.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(r.component,t)},rowMove:function(r){this.table.rowManager.moveRowActual(r.component,this.table.rowManager.rows[r.data.posFrom],!r.data.after),this.table.rowManager.redraw()}},ete={cellEdit:function(r){r.component.setValueProcessData(r.data.newValue),r.component.cellRendered()},rowAdd:function(r){var t=this.table.rowManager.addRowActual(r.data.data,r.data.pos,r.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(r.component,t)},rowDelete:function(r){r.component.deleteActual()},rowMove:function(r){this.table.rowManager.moveRowActual(r.component,this.table.rowManager.rows[r.data.posTo],r.data.after),this.table.rowManager.redraw()}};let tte=(()=>{class r extends gi{constructor(e){super(e),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(e,n,s){this.action("rowMove",e,{posFrom:this.table.rowManager.getRowPosition(e),posTo:this.table.rowManager.getRowPosition(n),to:n,after:s})}rowAdded(e,n,s,l){this.action("rowAdd",e,{data:n,pos:s,index:l})}rowDeleted(e){var n,s;this.table.options.groupBy?(n=(s=e.getComponent().getGroup().rows).indexOf(e))&&(n=s[n-1]):(n=e.table.rowManager.getRowIndex(e))&&(n=e.table.rowManager.rows[n-1]),this.action("rowDelete",e,{data:e.getData(),pos:!n,index:n})}cellUpdated(e){this.action("cellEdit",e,{oldValue:e.oldValue,newValue:e.value})}clear(){this.history=[],this.index=-1}action(e,n,s){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:n,data:s}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(e){var n=this.history.findIndex(function(s){return s.component===e});n>-1&&(this.history.splice(n,1),n<=this.index&&this.index--,this.clearComponentHistory(e))}undo(){if(this.index>-1){let e=this.history[this.index];return r.undoers[e.type].call(this,e),this.index--,this.dispatchExternal("historyUndo",e.type,e.component.getComponent(),e.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let e=this.history[this.index];return r.redoers[e.type].call(this,e),this.dispatchExternal("historyRedo",e.type,e.component.getComponent(),e.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(e,n){this.history.forEach(function(s){if(s.component instanceof Ls)s.component===e&&(s.component=n);else if(s.component instanceof uC&&s.component.row===e){var l=s.component.column.getField();l&&(s.component=n.getCell(l))}})}}return r.moduleName="history",r.undoers=qee,r.redoers=ete,r})(),nte=(()=>{class r extends gi{constructor(e){super(e),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var e=this.table.originalElement,n=this.table.options,l=e.getElementsByTagName("th"),u=e.getElementsByTagName("tbody")[0],h=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),u=u?u.getElementsByTagName("tr"):[],this._extractOptions(e,n),l.length?this._extractHeaders(l,u):this._generateBlankHeaders(l,u);for(var p=0;p<u.length;p++){var b=u[p].getElementsByTagName("td"),C={};this.hasIndex||(C[n.index]=p);for(var w=0;w<b.length;w++)void 0!==this.fieldIndex[w]&&(C[this.fieldIndex[w]]=b[w].innerHTML);h.push(C)}n.data=h,this.dispatchExternal("htmlImported")}_extractOptions(e,n,s){var l=e.attributes,u=s?Object.assign([],s):Object.keys(n),h={};for(var p in u.forEach(C=>{h[C.toLowerCase()]=C}),l){var b,g=l[p];g&&"object"==typeof g&&g.name&&0===g.name.indexOf("tabulator-")&&(b=g.name.replace("tabulator-",""),void 0!==h[b]&&(n[h[b]]=this._attribValue(g.value)))}}_attribValue(e){return"true"===e||"false"!==e&&e}_findCol(e){return this.table.options.columns.find(s=>s.title===e)||!1}_extractHeaders(e,n){for(var s=0;s<e.length;s++){var p,l=e[s],u=!1,h=this._findCol(l.textContent);h?u=!0:h={title:l.textContent.trim()},h.field||(h.field=l.textContent.trim().toLowerCase().replace(" ","_")),(p=l.getAttribute("width"))&&!h.width&&(h.width=p),this._extractOptions(l,h,O_.prototype.defaultOptionList),this.fieldIndex[s]=h.field,h.field==this.table.options.index&&(this.hasIndex=!0),u||this.table.options.columns.push(h)}}_generateBlankHeaders(e,n){for(var s=0;s<e.length;s++){var l=e[s],u={title:"",field:"col"+s};this.fieldIndex[s]=u.field;var h=l.getAttribute("width");h&&(u.width=h),this.table.options.columns.push(u)}}}return r.moduleName="htmlTableImport",r})(),ite=(()=>{class r extends gi{constructor(e){super(e),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(e,n){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){e.preventDefault();try{if(document.selection)(s=document.body.createTextRange()).moveToElementText(this.element),s.select();else if(window.getSelection){var s;(s=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(s)}}catch(l){}}}initializeExternalEvents(){for(let e in this.eventMap)this.subscriptionChangeExternal(e,this.subscriptionChanged.bind(this,e))}subscriptionChanged(e,n){n?this.subscribers[e]||(this.eventMap[e].includes("-")?(this.subscribers[e]=this.handle.bind(this,e),this.subscribe(this.eventMap[e],this.subscribers[e])):this.subscribeTouchEvents(e)):this.eventMap[e].includes("-")?this.subscribers[e]&&!this.columnSubscribers[e]&&!this.subscribedExternal(e)&&(this.unsubscribe(this.eventMap[e],this.subscribers[e]),delete this.subscribers[e]):this.unsubscribeTouchEvents(e)}subscribeTouchEvents(e){var n=this.eventMap[e];this.touchSubscribers[n+"-touchstart"]||(this.touchSubscribers[n+"-touchstart"]=this.handleTouch.bind(this,n,"start"),this.touchSubscribers[n+"-touchend"]=this.handleTouch.bind(this,n,"end"),this.subscribe(n+"-touchstart",this.touchSubscribers[n+"-touchstart"]),this.subscribe(n+"-touchend",this.touchSubscribers[n+"-touchend"])),this.subscribers[e]=!0}unsubscribeTouchEvents(e){var n=!0,s=this.eventMap[e];if(this.subscribers[e]&&!this.subscribedExternal(e)){delete this.subscribers[e];for(let l in this.eventMap)this.eventMap[l]===s&&this.subscribers[l]&&(n=!1);n&&(this.unsubscribe(s+"-touchstart",this.touchSubscribers[s+"-touchstart"]),this.unsubscribe(s+"-touchend",this.touchSubscribers[s+"-touchend"]),delete this.touchSubscribers[s+"-touchstart"],delete this.touchSubscribers[s+"-touchend"])}}initializeColumn(e){var n=e.definition;for(let s in this.eventMap)n[s]&&(this.subscriptionChanged(s,!0),this.columnSubscribers[s]||(this.columnSubscribers[s]=[]),this.columnSubscribers[s].push(e))}handle(e,n,s){this.dispatchEvent(e,n,s)}handleTouch(e,n,s,l){var u=this.touchWatchers[e];switch("column"===e&&(e="header"),n){case"start":u.tap=!0,clearTimeout(u.tapHold),u.tapHold=setTimeout(()=>{clearTimeout(u.tapHold),u.tapHold=null,u.tap=null,clearTimeout(u.tapDbl),u.tapDbl=null,this.dispatchEvent(e+"TapHold",s,l)},1e3);break;case"end":u.tap&&(u.tap=null,this.dispatchEvent(e+"Tap",s,l)),u.tapDbl?(clearTimeout(u.tapDbl),u.tapDbl=null,this.dispatchEvent(e+"DblTap",s,l)):u.tapDbl=setTimeout(()=>{clearTimeout(u.tapDbl),u.tapDbl=null},300),clearTimeout(u.tapHold),u.tapHold=null}}dispatchEvent(e,n,s){var u,l=s.getComponent();this.columnSubscribers[e]&&(s instanceof uC?u=s.column.definition[e]:s instanceof O_&&(u=s.definition[e]),u&&u(n,l)),this.dispatchExternal(e,n,l)}}return r.moduleName="interaction",r})();var rte={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},ote={keyBlock:function(r){r.stopPropagation(),r.preventDefault()},scrollPageUp:function(r){var t=this.table.rowManager,e=t.scrollTop-t.element.clientHeight;r.preventDefault(),t.displayRowsCount&&(e>=0?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(r){var t=this.table.rowManager,e=t.scrollTop+t.element.clientHeight,n=t.element.scrollHeight;r.preventDefault(),t.displayRowsCount&&(e<=n?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(r){var t=this.table.rowManager;r.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(r){var t=this.table.rowManager;r.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]),this.table.element.focus()},navPrev:function(r){this.dispatch("keybinding-nav-prev",r)},navNext:function(r){this.dispatch("keybinding-nav-next",r)},navLeft:function(r){this.dispatch("keybinding-nav-left",r)},navRight:function(r){this.dispatch("keybinding-nav-right",r)},navUp:function(r){this.dispatch("keybinding-nav-up",r)},navDown:function(r){this.dispatch("keybinding-nav-down",r)},undo:function(r){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(r.preventDefault(),this.table.modules.history.undo()))},redo:function(r){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(r.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(r){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let ste=(()=>{class r extends gi{constructor(e){super(e),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var e=this.table.options.keybindings,n={};if(this.watchKeys={},this.pressedKeys=[],!1!==e){for(let s in r.bindings)n[s]=r.bindings[s];if(Object.keys(e).length)for(let s in e)n[s]=e[s];this.mapBindings(n),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(e){for(let n in e)r.actions[n]?e[n]&&("object"!=typeof e[n]&&(e[n]=[e[n]]),e[n].forEach(s=>{this.mapBinding(n,s)})):console.warn("Key Binding Error - no such action:",n)}mapBinding(e,n){var s={action:r.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1};n.toString().toLowerCase().split(" ").join("").split("+").forEach(u=>{switch(u){case"ctrl":s.ctrl=!0;break;case"shift":s.shift=!0;break;case"meta":s.meta=!0;break;default:u=parseInt(u),s.keys.push(u),this.watchKeys[u]||(this.watchKeys[u]=[]),this.watchKeys[u].push(s)}})}bindEvents(){var e=this;this.keyupBinding=function(n){var s=n.keyCode,l=e.watchKeys[s];l&&(e.pressedKeys.push(s),l.forEach(function(u){e.checkBinding(n,u)}))},this.keydownBinding=function(n){var s=n.keyCode;if(e.watchKeys[s]){var u=e.pressedKeys.indexOf(s);u>-1&&e.pressedKeys.splice(u,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(e,n){var s=!0;return e.ctrlKey==n.ctrl&&e.shiftKey==n.shift&&e.metaKey==n.meta&&(n.keys.forEach(l=>{-1==this.pressedKeys.indexOf(l)&&(s=!1)}),s&&n.action.call(this,e),!0)}}return r.moduleName="keybindings",r.bindings=rte,r.actions=ote,r})(),ate=(()=>{class r extends gi{constructor(e){super(e),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(e){(e.column.definition.contextMenu||e.column.definition.clickMenu)&&this.initializeCell(e)}initializeColumn(e){var n=e.definition;(n.headerContextMenu||n.headerClickMenu||n.headerMenu)&&this.initializeColumnHeader(e)}initializeColumnHeader(e){var n;e.definition.headerContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.definition.headerContextMenu)),this.tapHold(e,e.definition.headerContextMenu)),e.definition.headerMenu&&((n=document.createElement("span")).classList.add("tabulator-header-menu-button"),n.innerHTML="&vellip;",n.addEventListener("click",s=>{s.stopPropagation(),s.preventDefault(),this.LoadMenuEvent(e,e.definition.headerMenu,s)}),e.titleElement.insertBefore(n,e.titleElement.firstChild))}LoadMenuEvent(e,n,s){n="function"==typeof n?n.call(this.table,e.getComponent(),s):n,this.loadMenu(s,e,n)}tapHold(e,n){var s=e.getElement(),l=null,u=!1;s.addEventListener("touchstart",h=>{clearTimeout(l),u=!1,l=setTimeout(()=>{clearTimeout(l),l=null,u=!0,this.LoadMenuEvent(e,n,h)},1e3)},{passive:!0}),s.addEventListener("touchend",h=>{clearTimeout(l),l=null,u&&h.preventDefault()})}initializeCell(e){e.column.definition.contextMenu&&(e.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.column.definition.contextMenu)),this.tapHold(e,e.column.definition.contextMenu)),e.column.definition.clickMenu&&e.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,e,e.column.definition.clickMenu))}initializeRow(e){this.table.options.rowContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.rowContextMenu)),this.tapHold(e,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.rowClickMenu))}initializeGroup(e){this.table.options.groupContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.groupContextMenu)),this.tapHold(e,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.groupClickMenu))}loadMenu(e,n,s,l){var u=!(e instanceof MouseEvent),h=document.createElement("div");if(h.classList.add("tabulator-menu"),u||e.preventDefault(),s&&s.length){if(!l){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}s.forEach(p=>{var g=document.createElement("div"),b=p.label,C=p.disabled;p.separator?g.classList.add("tabulator-menu-separator"):(g.classList.add("tabulator-menu-item"),"function"==typeof b&&(b=b.call(this.table,n.getComponent())),b instanceof Node?g.appendChild(b):g.innerHTML=b,"function"==typeof C&&(C=C.call(this.table,n.getComponent())),C?(g.classList.add("tabulator-menu-item-disabled"),g.addEventListener("click",w=>{w.stopPropagation()})):p.menu&&p.menu.length?g.addEventListener("click",w=>{w.stopPropagation(),this.hideOldSubMenus(h),this.loadMenu(w,n,p.menu,g)}):p.action&&g.addEventListener("click",w=>{p.action(w,n.getComponent())}),p.menu&&p.menu.length&&g.classList.add("tabulator-menu-item-submenu")),h.appendChild(g)}),h.addEventListener("click",p=>{this.hideMenu()}),this.menuElements.push(h),this.positionMenu(h,l,u,e)}}hideOldSubMenus(e){var n=this.menuElements.indexOf(e);if(n>-1)for(let l=this.menuElements.length-1;l>n;l--){var s=this.menuElements[l];s.parentNode&&s.parentNode.removeChild(s),this.menuElements.pop()}}positionMenu(e,n,s,l){var h,p,g,u=Math.max(document.body.offsetHeight,window.innerHeight);n?(h=(g=gr.elOffset(n)).left+n.offsetWidth,p=g.top-1):(h=s?l.touches[0].pageX:l.pageX,p=s?l.touches[0].pageY:l.pageY,this.positionReversedX=!1),e.style.top=p+"px",e.style.left=h+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(e),p+e.offsetHeight>=u&&(e.style.top="",e.style.bottom=n?u-g.top-n.offsetHeight-1+"px":u-p+"px"),(h+e.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(e.style.left="",e.style.right=n?document.documentElement.offsetWidth-g.left+"px":document.documentElement.offsetWidth-h+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(e){27==e.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return r.moduleName="menu",r})(),lte=(()=>{class r extends gi{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(e){var l,n=this,s={};e.modules.frozen||(l=e.getElement(),s.mousemove=function(u){e.parent===n.moving.parent&&((n.touchMove?u.touches[0].pageX:u.pageX)-gr.elOffset(l).left+n.table.columnManager.element.scrollLeft>e.getWidth()/2?(n.toCol!==e||!n.toColAfter)&&(l.parentNode.insertBefore(n.placeholderElement,l.nextSibling),n.moveColumn(e,!0)):(n.toCol!==e||n.toColAfter)&&(l.parentNode.insertBefore(n.placeholderElement,l),n.moveColumn(e,!1)))}.bind(n),l.addEventListener("mousedown",function(u){n.touchMove=!1,1===u.which&&(n.checkTimeout=setTimeout(function(){n.startMove(u,e)},n.checkPeriod))}),l.addEventListener("mouseup",function(u){1===u.which&&n.checkTimeout&&clearTimeout(n.checkTimeout)}),n.bindTouchEvents(e)),e.modules.moveColumn=s}bindTouchEvents(e){var l,u,h,p,g,b,n=e.getElement(),s=!1;n.addEventListener("touchstart",C=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,l=e.nextColumn(),h=l?l.getWidth()/2:0,u=e.prevColumn(),p=u?u.getWidth()/2:0,g=0,b=0,s=!1,this.startMove(C,e)},this.checkPeriod)},{passive:!0}),n.addEventListener("touchmove",C=>{var w,x;this.moving&&(this.moveHover(C),s||(s=C.touches[0].pageX),(w=C.touches[0].pageX-s)>0?l&&w-g>h&&(x=l)!==e&&(s=C.touches[0].pageX,x.getElement().parentNode.insertBefore(this.placeholderElement,x.getElement().nextSibling),this.moveColumn(x,!0)):u&&-w-b>p&&(x=u)!==e&&(s=C.touches[0].pageX,x.getElement().parentNode.insertBefore(this.placeholderElement,x.getElement()),this.moveColumn(x,!1)),x&&(l=x.nextColumn(),g=h,h=l?l.getWidth()/2:0,u=x.prevColumn(),b=p,p=u?u.getWidth()/2:0))},{passive:!0}),n.addEventListener("touchend",C=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(C)})}startMove(e,n){var s=n.getElement(),l=this.table.columnManager.getElement(),u=this.table.columnManager.getHeadersElement();this.moving=n,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-gr.elOffset(s).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=n.getWidth()+"px",this.placeholderElement.style.height=n.getHeight()+"px",s.parentNode.insertBefore(this.placeholderElement,s),s.parentNode.removeChild(s),this.hoverElement=s.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=l.clientHeight-u.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)})}moveColumn(e,n){var s=this.moving.getCells();this.toCol=e,this.toColAfter=n,n?e.getCells().forEach(function(l,u){var h=l.getElement(!0);h.parentNode&&s[u]&&h.parentNode.insertBefore(s[u].getElement(),h.nextSibling)}):e.getCells().forEach(function(l,u){var h=l.getElement(!0);h.parentNode&&s[u]&&h.parentNode.insertBefore(s[u].getElement(),h)})}endMove(e){(1===e.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(e){var u,n=this.table.columnManager.getElement(),s=n.scrollLeft,l=(this.touchMove?e.touches[0].pageX:e.pageX)-gr.elOffset(n).left+s;this.hoverElement.style.left=l-this.startX+"px",l-s<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{u=Math.max(0,s-5),this.table.rowManager.getElement().scrollLeft=u,this.autoScrollTimeout=!1},1))),s+n.clientWidth-l<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{u=Math.min(n.clientWidth,s+5),this.table.rowManager.getElement().scrollLeft=u,this.autoScrollTimeout=!1},1)))}}return r.moduleName="moveColumn",r})();class hC extends gi{constructor(t){super(t),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.classList.add("tabulator-row-placeholder"),t}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(t){var e=this,n={};n.mouseup=function(s){e.tableRowDrop(s,row)}.bind(e),n.mousemove=function(s){if(s.pageY-gr.elOffset(t.element).top+e.table.rowManager.element.scrollTop>t.getHeight()/2)e.toRow===t&&e.toRowAfter||((l=t.getElement()).parentNode.insertBefore(e.placeholderElement,l.nextSibling),e.moveRow(t,!0));else if(e.toRow!==t||e.toRowAfter){var l;(l=t.getElement()).previousSibling&&(l.parentNode.insertBefore(e.placeholderElement,l),e.moveRow(t,!1))}}.bind(e),t.modules.moveRow=n}initializeRow(t){var s,e=this,n={};n.mouseup=function(l){e.tableRowDrop(l,t)}.bind(e),n.mousemove=function(l){var u=t.getElement();l.pageY-gr.elOffset(u).top+e.table.rowManager.element.scrollTop>t.getHeight()/2?(e.toRow!==t||!e.toRowAfter)&&(u.parentNode.insertBefore(e.placeholderElement,u.nextSibling),e.moveRow(t,!0)):(e.toRow!==t||e.toRowAfter)&&(u.parentNode.insertBefore(e.placeholderElement,u),e.moveRow(t,!1))}.bind(e),this.hasHandle||((s=t.getElement()).addEventListener("mousedown",function(l){1===l.which&&(e.checkTimeout=setTimeout(function(){e.startMove(l,t)},e.checkPeriod))}),s.addEventListener("mouseup",function(l){1===l.which&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t,t.getElement())),t.modules.moveRow=n}initializeColumn(t){t.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(t){if(t.column.definition.rowHandle&&!1!==this.table.options.movableRows){var e=this,n=t.getElement(!0);n.addEventListener("mousedown",function(s){1===s.which&&(e.checkTimeout=setTimeout(function(){e.startMove(s,t.row)},e.checkPeriod))}),n.addEventListener("mouseup",function(s){1===s.which&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t.row,n)}}bindTouchEvents(t,e){var s,l,u,h,p,g,n=!1;e.addEventListener("touchstart",b=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,s=t.nextRow(),u=s?s.getHeight()/2:0,l=t.prevRow(),h=l?l.getHeight()/2:0,p=0,g=0,n=!1,this.startMove(b,t)},this.checkPeriod)},{passive:!0}),e.addEventListener("touchmove",b=>{var C,w;this.moving&&(b.preventDefault(),this.moveHover(b),n||(n=b.touches[0].pageY),(C=b.touches[0].pageY-n)>0?s&&C-p>u&&(w=s)!==t&&(n=b.touches[0].pageY,w.getElement().parentNode.insertBefore(this.placeholderElement,w.getElement().nextSibling),this.moveRow(w,!0)):l&&-C-g>h&&(w=l)!==t&&(n=b.touches[0].pageY,w.getElement().parentNode.insertBefore(this.placeholderElement,w.getElement()),this.moveRow(w,!1)),w&&(s=w.nextRow(),p=u,u=s?s.getHeight()/2:0,l=w.prevRow(),g=h,h=l?l.getHeight()/2:0))}),e.addEventListener("touchend",b=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(b),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{("row"===t.type||"group"===t.type)&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{("row"===t.type||"group"===t.type)&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveRow.mousemove)})}startMove(t,e){var n=e.getElement();this.setStartPosition(t,e),this.moving=e,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(e)):(n.parentNode.insertBefore(this.placeholderElement,n),n.parentNode.removeChild(n)),this.hoverElement=n.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(t)}setStartPosition(t,e){var l,u,n=this.touchMove?t.touches[0].pageX:t.pageX,s=this.touchMove?t.touches[0].pageY:t.pageY;l=e.getElement(),this.connection?(u=l.getBoundingClientRect(),this.startX=u.left-n+window.pageXOffset,this.startY=u.top-s+window.pageYOffset):this.startY=s-l.getBoundingClientRect().top}endMove(t){(!t||1===t.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(t,e){this.toRow=t,this.toRowAfter=e}moveHover(t){this.connection?this.moveHoverConnections.call(this,t):this.moveHoverTable.call(this,t)}moveHoverTable(t){var e=this.table.rowManager.getElement(),n=e.scrollTop,s=(this.touchMove?t.touches[0].pageY:t.pageY)-e.getBoundingClientRect().top+n;this.hoverElement.style.top=s-this.startY+"px"}moveHoverConnections(t){this.hoverElement.style.left=this.startX+(this.touchMove?t.touches[0].pageX:t.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?t.touches[0].pageY:t.pageY)+"px"}elementRowDrop(t,e,n){this.dispatchExternal("movableRowsElementDrop",t,e,!!n&&n.getComponent())}connectToTables(t){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",e),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:t})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(n=>{"string"==typeof n?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(n))):this.connectionElements.push(n)}),this.connectionElements.forEach(n=>{var s=l=>{this.elementRowDrop(l,n,this.moving)};n.addEventListener("mouseup",s),n.tabulatorElementDropEvent=s,n.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var t;this.connectionSelectorsTables&&(t=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",t),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(e=>{e.classList.remove("tabulator-movingrow-receiving"),e.removeEventListener("mouseup",e.tabulatorElementDropEvent),delete e.tabulatorElementDropEvent})}connect(t,e){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=t,this.connectedRow=e,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(n=>{"row"===n.type&&n.modules.moveRow&&n.modules.moveRow.mouseup&&n.getElement().addEventListener("mouseup",n.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",e,t),!0)}disconnect(t){t===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(e=>{"row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().removeEventListener("mouseup",e.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",t)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(t,e,n){var s=!1;if(n){switch(typeof this.table.options.movableRowsSender){case"string":s=this.senders[this.table.options.movableRowsSender];break;case"function":s=this.table.options.movableRowsSender}s?s.call(this,this.moving.getComponent(),e?e.getComponent():void 0,t):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),e?e.getComponent():void 0,t)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),e?e.getComponent():void 0,t);this.endMove()}tableRowDrop(t,e){var n=!1,s=!1;switch(t.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":n=this.receivers[this.table.options.movableRowsReceiver];break;case"function":n=this.table.options.movableRowsReceiver}n?s=n.call(this,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(s?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:e,success:s})}commsReceived(t,e,n){switch(e){case"connect":return this.connect(t,n.row);case"disconnect":return this.disconnect(t);case"dropcomplete":return this.dropComplete(t,n.row,n.success)}}}hC.prototype.receivers={insert:function(r,t,e){return this.table.addRow(r.getData(),void 0,t),!0},add:function(r,t,e){return this.table.addRow(r.getData()),!0},update:function(r,t,e){return!!t&&(t.update(r.getData()),!0)},replace:function(r,t,e){return!!t&&(this.table.addRow(r.getData(),void 0,t),t.delete(),!0)}},hC.prototype.senders={delete:function(r,t,e){r.delete()}},hC.moduleName="moveRow";var cte={};let ute=(()=>{class r extends gi{constructor(e){super(e),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(e,n,s){return this.transformRow(n,"data",s)}initializeColumn(e){var n=!1,s={};this.allowedTypes.forEach(l=>{var h,u="mutator"+(l.charAt(0).toUpperCase()+l.slice(1));e.definition[u]&&(h=this.lookupMutator(e.definition[u]))&&(n=!0,s[u]={mutator:h,params:e.definition[u+"Params"]||{}})}),n&&(e.modules.mutate=s)}lookupMutator(e){var n=!1;switch(typeof e){case"string":r.mutators[e]?n=r.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":n=e}return n}transformRow(e,n,s){var u,l="mutator"+(n.charAt(0).toUpperCase()+n.slice(1));return this.enabled&&this.table.columnManager.traverse(h=>{var p,g,b;h.modules.mutate&&(p=h.modules.mutate[l]||h.modules.mutate.mutator||!1)&&(u=h.getFieldValue(void 0!==s?s:e),("data"==n||void 0!==u)&&(b=h.getComponent(),g="function"==typeof p.params?p.params(u,e,n,b):p.params,h.setFieldValue(e,p.mutator(u,e,n,g,b))))}),e}transformCell(e,n){if(e.column.modules.mutate){var s=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,l={};if(s)return l=Object.assign(l,e.row.getData()),e.column.setFieldValue(l,n),s.mutator(n,l,"edit",s.params,e.getComponent())}return n}enable(){this.enabled=!0}disable(){this.enabled=!1}}return r.moduleName="mutator",r.mutators=cte,r})(),dte=(()=>{class r extends gi{constructor(e){super(e),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(e,n){var u,s=this.table.rowManager,l=s.getDisplayRows();return n?l.length?u=l[0]:s.activeRows.length&&(u=s.activeRows[s.activeRows.length-1],n=!1):l.length&&(u=l[l.length-1],n=!(l.length<this.size)),{index:u,top:n}}calculatePageSizes(){var e,n;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((e=document.createElement("div")).classList.add("tabulator-row"),e.style.visibility="hidden",(n=document.createElement("div")).classList.add("tabulator-cell"),n.innerHTML="Page Row Test",e.appendChild(n),this.table.rowManager.getTableElement().appendChild(e),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/e.offsetHeight),this.table.rowManager.getTableElement().removeChild(e)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(e,n,s,l){return this.initialLoad||(this.progressiveLoad&&!s||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),l.page=this.page,this.size&&(l.size=this.size),l}userSetPageToRow(e){return this.table.options.pagination&&(e=this.rowManager.findRow(e))?this.setPageToRow(e):Promise.reject()}userSetPageSize(e){return!!this.table.options.pagination&&(this.setPageSize(e),this.setPage(1))}scrollVertical(e,n){var s;!n&&!this.table.dataLoader.loading&&(s=this.table.rowManager.getElement()).scrollHeight-s.clientHeight-e<(this.table.options.progressiveLoadScrollMargin||2*s.clientHeight)&&this.nextPage()}restOnRenderBefore(e,n){return n||"local"===this.mode&&this.reset(),e}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(e=document.createElement("button")).classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var e=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=e=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&e.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){e=[];for(let n=1;n<5;n++)e.push(this.size*n);this.pageSizes=e}else e=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);e.forEach(n=>{var s=document.createElement("option");s.value=n,!0===n?this.langBind("pagination|all",function(l){s.innerHTML=l}):s.innerHTML=n,this.pageSizeSelect.appendChild(s)}),this.pageSizeSelect.value=this.size}}initializePaginator(e){var n;e||(this.langBind("pagination|first",s=>{this.firstBut.innerHTML=s}),this.langBind("pagination|first_title",s=>{this.firstBut.setAttribute("aria-label",s),this.firstBut.setAttribute("title",s)}),this.langBind("pagination|prev",s=>{this.prevBut.innerHTML=s}),this.langBind("pagination|prev_title",s=>{this.prevBut.setAttribute("aria-label",s),this.prevBut.setAttribute("title",s)}),this.langBind("pagination|next",s=>{this.nextBut.innerHTML=s}),this.langBind("pagination|next_title",s=>{this.nextBut.setAttribute("aria-label",s),this.nextBut.setAttribute("title",s)}),this.langBind("pagination|last",s=>{this.lastBut.innerHTML=s}),this.langBind("pagination|last_title",s=>{this.lastBut.setAttribute("aria-label",s),this.lastBut.setAttribute("title",s)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(n=document.createElement("label"),this.langBind("pagination|page_size",s=>{this.pageSizeSelect.setAttribute("aria-label",s),this.pageSizeSelect.setAttribute("title",s),n.innerHTML=s}),this.element.appendChild(n),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",s=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!e&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(e){this.initializePaginator(!0),this.mode="progressive_"+e,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}setMaxRows(e){this.max=e?!0===this.size?1:Math.ceil(e/this.size):1,this.page>this.max&&(this.page=this.max)}reset(e){this.initialLoad||("local"==this.mode||e)&&(this.page=1)}setMaxPage(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(e){switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(e=parseInt(e))>0&&e<=this.max||"local"!==this.mode?(this.page=e,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",e),Promise.reject())}setPageToRow(e){var s=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(e);if(s>-1){var l=!0===this.size?1:Math.ceil((s+1)/this.size);return this.setPage(l)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(e){!0!==e&&(e=parseInt(e)),e>0&&(this.size=e),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let e=Math.floor((this.count-1)/2),n=Math.ceil((this.count-1)/2),s=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),l=this.page<=n?Math.min(this.count,this.max):Math.min(this.page+n,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let u=s;u<=l;u++)u>0&&u<=this.max&&this.pagesElement.appendChild(this._generatePageButton(u));this.footerRedraw()}_generatePageButton(e){var n=document.createElement("button");return n.classList.add("tabulator-page"),e==this.page&&n.classList.add("active"),n.setAttribute("type","button"),n.setAttribute("role","button"),this.langBind("pagination|page_title",s=>{n.setAttribute("aria-label",s+" "+e),n.setAttribute("title",s+" "+e)}),n.setAttribute("data-page",e),n.textContent=e,n.addEventListener("click",s=>{this.setPage(e)}),n}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(e){return this.size}getMode(){return this.mode}getRows(e){var n,s,l;if("local"==this.mode){n=[],this.setMaxRows(e.length),!0===this.size?(s=0,l=e.length):l=(s=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let u=s;u<l;u++)e[u]&&n.push(e[u]);return n}return this._setPageButtons(),e.slice(0)}trigger(){var e;switch(this.mode){case"local":return e=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(e),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(e){if(void 0===e.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),e.data){if(this.max=parseInt(e.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(e.data,!1,1==this.page):this.table.rowManager.addRows(e.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":e=this.table.rowManager.getData().concat(e.data),this.table.rowManager.setData(e,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return e.data}footerRedraw(){var e=this.table.footerManager.element;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return r.moduleName="page",r})();var hte={local:function(r,t){var e=localStorage.getItem(r+"-"+t);return!!e&&JSON.parse(e)},cookie:function(r,t){var l,u,e=document.cookie,n=r+"-"+t,s=e.indexOf(n+"=");return s>-1&&((l=(e=e.substr(s)).indexOf(";"))>-1&&(e=e.substr(0,l)),u=e.replace(n+"=","")),!!u&&JSON.parse(u)}},pte={local:function(r,t,e){localStorage.setItem(r+"-"+t,JSON.stringify(e))},cookie:function(r,t,e){var n=new Date;n.setDate(n.getDate()+1e4),document.cookie=r+"-"+t+"="+JSON.stringify(e)+"; expires="+n.toUTCString()}};let fte=(()=>{class r extends gi{constructor(e){super(e),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(n){return!1}}initialize(){if(this.table.options.persistence){var s,e=this.table.options.persistenceMode,n=this.table.options.persistenceID;this.mode=!0!==e?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:r.readers[this.table.options.persistenceReaderFunc]?this.readFunc=r.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):r.readers[this.mode]?this.readFunc=r.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:r.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=r.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):r.writers[this.mode]?this.writeFunc=r.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(n||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(s=this.retreiveData("page"))&&(void 0!==s.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=s.paginationSize),void 0!==s.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=s.paginationInitialPage)),this.config.group&&(s=this.retreiveData("group"))&&(void 0!==s.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=s.groupBy),void 0!==s.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=s.groupStartOpen),void 0!==s.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=s.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(e){this.config[e]&&this.save(e)}tableBuilt(){var n,s;this.config.sort&&(n=this.load("sort"))&&(this.table.initialSort=n),this.config.filter&&(s=this.load("filter"))&&(this.table.initialFilter=s)}tableRedraw(e){e&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(e){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,e)),!0}initializeColumn(e){var n;this.config.columns&&(this.defWatcherBlock=!0,n=e.getDefinition(),(!0===this.config.columns?Object.keys(n):this.config.columns).forEach(l=>{var u=Object.getOwnPropertyDescriptor(n,l),h=n[l];u&&Object.defineProperty(n,l,{set:function(p){h=p,this.defWatcherBlock||this.save("columns"),u.set&&u.set(p)},get:function(){return u.get&&u.get(),h}})}),this.defWatcherBlock=!1)}load(e,n){var s=this.retreiveData(e);return n&&(s=s?this.mergeDefinition(n,s):n),s}retreiveData(e){return!!this.readFunc&&this.readFunc(this.id,e)}mergeDefinition(e,n){var s=[];return(n=n||[]).forEach((l,u)=>{var p,h=this._findColumn(e,l);h&&(!0===this.config.columns||null==this.config.columns?(p=Object.keys(h)).push("width"):p=this.config.columns,p.forEach(g=>{"columns"!==g&&void 0!==l[g]&&(h[g]=l[g])}),h.columns&&(h.columns=this.mergeDefinition(h.columns,l.columns)),s.push(h))}),e.forEach((l,u)=>{this._findColumn(n,l)||(s.length>u?s.splice(u,0,l):s.push(l))}),s}_findColumn(e,n){var s=n.columns?"group":n.field?"field":"object";return e.find(function(l){switch(s){case"group":return l.title===n.title&&l.columns.length===n.columns.length;case"field":return l.field===n.field;case"object":return l===n}})}save(e){var n={};switch(e){case"columns":n=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":n=this.table.modules.filter.getFilters();break;case"sort":n=this.validateSorters(this.table.modules.sort.getSort());break;case"group":n=this.getGroupConfig();break;case"page":n=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,e,n)}validateSorters(e){return e.forEach(function(n){n.column=n.field,delete n.field}),e}getGroupConfig(){var e={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e}getPageConfig(){var e={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e}parseColumns(e){var n=[],s=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach(l=>{var p,u={},h=l.getDefinition();l.isGroup?(u.title=h.title,u.columns=this.parseColumns(l.getColumns())):(u.field=l.getField(),!0===this.config.columns||null==this.config.columns?(p=Object.keys(h)).push("width"):p=this.config.columns,p.forEach(g=>{switch(g){case"width":u.width=l.getWidth();break;case"visible":u.visible=l.visible;break;default:"function"!=typeof h[g]&&-1===s.indexOf(g)&&(u[g]=h[g])}})),n.push(u)}),n}}return r.moduleName="persistence",r.readers=hte,r.writers=pte,r})(),gte=(()=>{class r extends gi{constructor(e){super(e),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(e,n,s){var b,C,l=window.scrollX,u=window.scrollY,h=document.createElement("div"),p=document.createElement("div"),g=this.table.modules.export.genereateTable(void 0!==s?s:this.table.options.printConfig,void 0!==n?n:this.table.options.printStyled,e||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(h.classList.add("tabulator-print-header"),"string"==typeof(b="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?h.innerHTML=b:h.appendChild(b),this.element.appendChild(h)),this.element.appendChild(g),this.table.options.printFooter&&(p.classList.add("tabulator-print-footer"),"string"==typeof(C="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?p.innerHTML=C:p.appendChild(C),this.element.appendChild(p)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,g),window.print(),this.cleanup(),window.scrollTo(l,u),this.manualBlock=!1}}return r.moduleName="print",r})(),mte=(()=>{class r extends gi{constructor(e){super(e),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(e){var s,n=this;this.currentVersion++,s=this.currentVersion,this.unwatchData(),this.data=e,this.origFuncs.push=e.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var l=Array.from(arguments);return!n.blocked&&s===n.currentVersion&&l.forEach(u=>{n.table.rowManager.addRowActual(u,!1)}),n.origFuncs.push.apply(e,arguments)}}),this.origFuncs.unshift=e.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var l=Array.from(arguments);return!n.blocked&&s===n.currentVersion&&l.forEach(u=>{n.table.rowManager.addRowActual(u,!0)}),n.origFuncs.unshift.apply(e,arguments)}}),this.origFuncs.shift=e.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var l;return!n.blocked&&s===n.currentVersion&&n.data.length&&(l=n.table.rowManager.getRowFromDataObject(n.data[0]))&&l.deleteActual(),n.origFuncs.shift.call(e)}}),this.origFuncs.pop=e.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var l;return!n.blocked&&s===n.currentVersion&&n.data.length&&(l=n.table.rowManager.getRowFromDataObject(n.data[n.data.length-1]))&&l.deleteActual(),n.origFuncs.pop.call(e)}}),this.origFuncs.splice=e.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var g,l=Array.from(arguments),u=l[0]<0?e.length+l[0]:l[0],h=l[1],p=!!l[2]&&l.slice(2);if(!n.blocked&&s===n.currentVersion){if(p&&((g=!!e[u]&&n.table.rowManager.getRowFromDataObject(e[u]))?p.forEach(C=>{n.table.rowManager.addRowActual(C,!0,g,!0)}):(p=p.slice().reverse()).forEach(C=>{n.table.rowManager.addRowActual(C,!0,!1,!0)})),0!==h){var b=e.slice(u,void 0===l[1]?l[1]:u+h);b.forEach((C,w)=>{var x=n.table.rowManager.getRowFromDataObject(C);x&&x.deleteActual(w!==b.length-1)})}(p||0!==h)&&n.table.rowManager.reRenderInPosition()}return n.origFuncs.splice.apply(e,arguments)}})}unwatchData(){if(!1!==this.data)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(e){var n=e.getData();for(var s in this.blocked=!0,n)this.watchKey(e,n,s);this.table.options.dataTree&&this.watchTreeChildren(e),this.blocked=!1}watchTreeChildren(e){var n=e.getData()[this.table.options.dataTreeChildField],s={};function l(){this.table.modules.dataTree.initializeRow(e),this.table.modules.dataTree.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)}n&&(s.push=n.push,Object.defineProperty(n,"push",{enumerable:!1,configurable:!0,value:()=>{var u=s.push.apply(n,arguments);return l(),u}}),s.unshift=n.unshift,Object.defineProperty(n,"unshift",{enumerable:!1,configurable:!0,value:()=>{var u=s.unshift.apply(n,arguments);return l(),u}}),s.shift=n.shift,Object.defineProperty(n,"shift",{enumerable:!1,configurable:!0,value:()=>{var u=s.shift.call(n);return l(),u}}),s.pop=n.pop,Object.defineProperty(n,"pop",{enumerable:!1,configurable:!0,value:()=>{var u=s.pop.call(n);return l(),u}}),s.splice=n.splice,Object.defineProperty(n,"splice",{enumerable:!1,configurable:!0,value:()=>{var u=s.splice.apply(n,arguments);return l(),u}}))}watchKey(e,n,s){var l=Object.getOwnPropertyDescriptor(n,s),u=n[s],h=this.currentVersion;Object.defineProperty(n,s,{set:p=>{if(u=p,!this.blocked&&h===this.currentVersion){var g={};g[s]=p,e.updateData(g)}l.set&&l.set(p)},get:()=>(l.get&&l.get(),u)})}unwatchRow(e){var n=e.getData();for(var s in n)Object.defineProperty(n,s,{value:n[s]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return r.moduleName="reactiveData",r})(),_te=(()=>{class r extends gi{constructor(e){super(e),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(e){"row"===e.row.type&&this.initializeColumn("cell",e.column,e.element)}layoutColumnHeader(e){this.initializeColumn("header",e,e.element)}initializeColumn(e,n,s){var l=this,h=n.definition.resizable;if("header"===e&&(n.modules.resize={variableHeight:"textarea"==n.definition.formatter||n.definition.variableHeight}),!0===h||h==e){var p=document.createElement("div");p.className="tabulator-col-resize-handle";var g=document.createElement("div");g.className="tabulator-col-resize-handle prev",p.addEventListener("click",function(w){w.stopPropagation()});var b=function(w){var x=n.getLastColumn();x&&l._checkResizability(x)&&(l.startColumn=n,l._mouseDown(w,x,p))};p.addEventListener("mousedown",b),p.addEventListener("touchstart",b,{passive:!0}),p.addEventListener("dblclick",function(w){var x=n.getLastColumn();x&&l._checkResizability(x)&&(w.stopPropagation(),x.reinitializeWidth(!0))}),g.addEventListener("click",function(w){w.stopPropagation()});var C=function(w){var x,N,B;(x=n.getFirstColumn())&&(B=(N=l.table.columnManager.findColumnIndex(x))>0&&l.table.columnManager.getColumnByIndex(N-1))&&l._checkResizability(B)&&(l.startColumn=n,l._mouseDown(w,B,g))};g.addEventListener("mousedown",C),g.addEventListener("touchstart",C,{passive:!0}),g.addEventListener("dblclick",function(w){var x,N,B;(x=n.getFirstColumn())&&(B=(N=l.table.columnManager.findColumnIndex(x))>0&&l.table.columnManager.getColumnByIndex(N-1))&&l._checkResizability(B)&&(w.stopPropagation(),B.reinitializeWidth(!0))}),s.appendChild(p),s.appendChild(g)}}_checkResizability(e){return e.definition.resizable}_mouseDown(e,n,s){var l=this;function u(p){n.setWidth(l.table.rtl?l.startWidth-((void 0===p.screenX?p.touches[0].screenX:p.screenX)-l.startX):l.startWidth+((void 0===p.screenX?p.touches[0].screenX:p.screenX)-l.startX)),l.table.columnManager.renderer.rerenderColumns(!0),!l.table.browserSlow&&n.modules.resize&&n.modules.resize.variableHeight&&n.checkCellHeights()}function h(p){l.startColumn.modules.edit&&(l.startColumn.modules.edit.blocked=!1),l.table.browserSlow&&n.modules.resize&&n.modules.resize.variableHeight&&n.checkCellHeights(),document.body.removeEventListener("mouseup",h),document.body.removeEventListener("mousemove",u),s.removeEventListener("touchmove",u),s.removeEventListener("touchend",h),l.table.element.classList.remove("tabulator-block-select"),l.dispatch("column-resized",n),l.table.externalEvents.dispatch("columnResized",n.getComponent())}l.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),l.startColumn.modules.edit&&(l.startColumn.modules.edit.blocked=!0),l.startX=void 0===e.screenX?e.touches[0].screenX:e.screenX,l.startWidth=n.getWidth(),document.body.addEventListener("mousemove",u),document.body.addEventListener("mouseup",h),s.addEventListener("touchmove",u,{passive:!0}),s.addEventListener("touchend",h)}}return r.moduleName="resizeColumns",r})(),vte=(()=>{class r extends gi{constructor(e){super(e),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(e){var n=this,s=e.getElement(),l=document.createElement("div");l.className="tabulator-row-resize-handle";var u=document.createElement("div");u.className="tabulator-row-resize-handle prev",l.addEventListener("click",function(g){g.stopPropagation()});var h=function(g){n.startRow=e,n._mouseDown(g,e,l)};l.addEventListener("mousedown",h),l.addEventListener("touchstart",h,{passive:!0}),u.addEventListener("click",function(g){g.stopPropagation()});var p=function(g){var b=n.table.rowManager.prevDisplayRow(e);b&&(n.startRow=b,n._mouseDown(g,b,u))};u.addEventListener("mousedown",p),u.addEventListener("touchstart",p,{passive:!0}),s.appendChild(l),s.appendChild(u)}_mouseDown(e,n,s){var l=this;function u(p){n.setHeight(l.startHeight+((void 0===p.screenY?p.touches[0].screenY:p.screenY)-l.startY))}function h(p){document.body.removeEventListener("mouseup",u),document.body.removeEventListener("mousemove",u),s.removeEventListener("touchmove",u),s.removeEventListener("touchend",h),l.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",n.getComponent())}l.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),l.startY=void 0===e.screenY?e.touches[0].screenY:e.screenY,l.startHeight=n.getHeight(),document.body.addEventListener("mousemove",u),document.body.addEventListener("mouseup",h),s.addEventListener("touchmove",u,{passive:!0}),s.addEventListener("touchend",h)}}return r.moduleName="resizeRows",r})(),bte=(()=>{class r extends gi{constructor(e){super(e),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var n,e=this.table;this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===e.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(s=>{if(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell){var l=Math.floor(s[0].contentRect.height),u=Math.floor(s[0].contentRect.width);(this.tableHeight!=l||this.tableWidth!=u)&&(this.tableHeight=l,this.tableWidth=u,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),e.redraw())}}),this.observer.observe(e.element),n=window.getComputedStyle(e.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(n.getPropertyValue("max-height")||n.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(s=>{if(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell){var l=Math.floor(s[0].contentRect.height),u=Math.floor(s[0].contentRect.width);(this.containerHeight!=l||this.containerWidth!=u)&&(this.containerHeight=l,this.containerWidth=u,this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth),e.columnManager.renderer.rerenderColumns(!0),e.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell)&&(e.columnManager.renderer.rerenderColumns(!0),e.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return r.moduleName="resizeTable",r})(),yte=(()=>{class r extends gi{constructor(e){super(e),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(e){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(e||this.update())}initializeResponsivity(){var e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(n,s){n.modules.responsive&&n.modules.responsive.order&&n.modules.responsive.visible&&(n.modules.responsive.index=s,e.push(n),!n.visible&&"collapse"===self.mode&&self.hiddenColumns.push(n))}),e=(e=e.reverse()).sort(function(n,s){return s.modules.responsive.order-n.modules.responsive.order||s.modules.responsive.index-n.modules.responsive.index}),this.columns=e,"collapse"===this.mode&&this.generateCollapsedContent();for(let n of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==n.definition.formatter){this.collapseHandleColumn=n;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(e){var n=e.getDefinition();e.modules.responsive={order:void 0===n.responsive?1:n.responsive,visible:!1!==n.visible}}initializeRow(e){var n;"calc"!==e.type&&((n=document.createElement("div")).classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:n,open:this.collapseStartOpen},this.collapseStartOpen||(n.style.display="none"))}layoutRow(e){var n=e.getElement();e.modules.responsiveLayout&&(n.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))}updateColumnVisibility(e,n){!n&&e.modules.responsive&&(e.modules.responsive.visible=e.visible,this.initialize())}hideColumn(e){var n=this.hiddenColumns.length;e.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!n&&this.collapseHandleColumn.show())}showColumn(e){var n;e.show(!1,!0),e.setWidth(e.getWidth()),"collapse"===this.mode&&((n=this.hiddenColumns.indexOf(e))>-1&&this.hiddenColumns.splice(n,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var e=this,n=!0;n;){let s="fitColumns"==e.table.modules.layout.getMode()?e.table.columnManager.getFlexBaseWidth():e.table.columnManager.getWidth(),l=(e.table.options.headerVisible?e.table.columnManager.element.clientWidth:e.table.element.clientWidth)-s;if(l<0){let u=e.columns[e.index];u?(e.hideColumn(u),e.index++):n=!1}else{let u=e.columns[e.index-1];u&&l>0&&l>=u.getWidth()?(e.showColumn(u),e.index--):n=!1}e.table.rowManager.activeRowsCount||e.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var e=this;this.table.rowManager.getDisplayRows().forEach(function(s){e.generateCollapsedRowContent(s)})}generateCollapsedRowContent(e){var n,s;if(e.modules.responsiveLayout){for(n=e.modules.responsiveLayout.element;n.firstChild;)n.removeChild(n.firstChild);(s=this.collapseFormatter(this.generateCollapsedRowData(e)))&&n.appendChild(s)}}generateCollapsedRowData(e){var u,n=this,s=e.getData(),l=[];return this.hiddenColumns.forEach(function(h){var p=h.getFieldValue(s);h.definition.title&&h.field&&(h.modules.format&&n.table.options.responsiveLayoutCollapseUseFormatters?(u={value:!1,data:{},getValue:function(){return p},getData:function(){return s},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return h.getComponent()}},l.push({field:h.field,title:h.definition.title,value:h.modules.format.formatter.call(n.table.modules.format,u,h.modules.format.params,function(b){b()})})):l.push({field:h.field,title:h.definition.title,value:p}))}),l}formatCollapsedData(e){var n=document.createElement("table");return e.forEach(function(s){var p,l=document.createElement("tr"),u=document.createElement("td"),h=document.createElement("td"),g=document.createElement("strong");u.appendChild(g),this.langBind("columns|"+s.field,function(b){g.innerText=b||s.title}),s.value instanceof Node?((p=document.createElement("div")).appendChild(s.value),h.appendChild(p)):h.innerHTML=s.value,l.appendChild(u),l.appendChild(h),n.appendChild(l)},this),Object.keys(e).length?n:""}}return r.moduleName="responsiveLayout",r})();function aD(r,t,e,n,s,l,u){var h=window.DateTime||luxon.DateTime,p=u.format||"dd/MM/yyyy HH:mm:ss",g=u.alignEmptyValues,b=0;if(void 0!==h){if(r=h.fromFormat(r,p),t=h.fromFormat(t,p),r.isValid){if(t.isValid)return r-t;b=1}else b=t.isValid?-1:0;return("top"===g&&"desc"===l||"bottom"===g&&"asc"===l)&&(b*=-1),b}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var Ite={number:function(r,t,e,n,s,l,u){var h=u.alignEmptyValues,p=u.decimalSeparator,g=u.thousandSeparator,b=0;if(r=String(r),t=String(t),g&&(r=r.split(g).join(""),t=t.split(g).join("")),p&&(r=r.split(p).join("."),t=t.split(p).join(".")),r=parseFloat(r),t=parseFloat(t),isNaN(r))b=isNaN(t)?0:-1;else{if(!isNaN(t))return r-t;b=1}return("top"===h&&"desc"===l||"bottom"===h&&"asc"===l)&&(b*=-1),b},string:function(r,t,e,n,s,l,u){var g,h=u.alignEmptyValues,p=0;if(r){if(t){switch(typeof u.locale){case"boolean":u.locale&&(g=this.langLocale());break;case"string":g=u.locale}return String(r).toLowerCase().localeCompare(String(t).toLowerCase(),g)}p=1}else p=t?-1:0;return("top"===h&&"desc"===l||"bottom"===h&&"asc"===l)&&(p*=-1),p},date:function(r,t,e,n,s,l,u){return u.format||(u.format="dd/MM/yyyy"),aD.call(this,r,t,e,n,s,l,u)},time:function(r,t,e,n,s,l,u){return u.format||(u.format="HH:mm"),aD.call(this,r,t,e,n,s,l,u)},datetime:aD,boolean:function(r,t,e,n,s,l,u){return(!0===r||"true"===r||"True"===r||1===r?1:0)-(!0===t||"true"===t||"True"===t||1===t?1:0)},array:function(r,t,e,n,s,l,u){var g=u.type||"length",b=u.alignEmptyValues,C=0;function w(x){switch(g){case"length":return x.length;case"sum":return x.reduce(function(N,B){return N+B});case"max":return Math.max.apply(null,x);case"min":return Math.min.apply(null,x);case"avg":return x.reduce(function(N,B){return N+B})/x.length}}if(Array.isArray(r)){if(Array.isArray(t))return(r?w(r):0)-(t?w(t):0);b=1}else b=Array.isArray(t)?-1:0;return("top"===b&&"desc"===l||"bottom"===b&&"asc"===l)&&(C*=-1),C},exists:function(r,t,e,n,s,l,u){return(void 0===r?0:1)-(void 0===t?0:1)},alphanum:function(r,t,e,n,s,l,u){var h,p,g,b,w,C=0,x=/(\d+)|(\D+)/g,N=/\d/,B=u.alignEmptyValues,V=0;if(r||0===r){if(t||0===t){if(isFinite(r)&&isFinite(t))return r-t;if((h=String(r).toLowerCase())===(p=String(t).toLowerCase()))return 0;if(!N.test(h)||!N.test(p))return h>p?1:-1;for(h=h.match(x),p=p.match(x),w=h.length>p.length?p.length:h.length;C<w;)if((g=h[C])!==(b=p[C++]))return isFinite(g)&&isFinite(b)?("0"===g.charAt(0)&&(g="."+g),"0"===b.charAt(0)&&(b="."+b),g-b):g>b?1:-1;return h.length>p.length}V=1}else V=t||0===t?-1:0;return("top"===B&&"desc"===l||"bottom"===B&&"asc"===l)&&(V*=-1),V}},Ote={integer:function(r,t,e){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&Math.floor(t)===t},float:function(r,t,e){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&t%1!=0},numeric:function(r,t,e){return""===t||null==t||!isNaN(t)},string:function(r,t,e){return""===t||null==t||isNaN(t)},max:function(r,t,e){return""===t||null==t||parseFloat(t)<=e},min:function(r,t,e){return""===t||null==t||parseFloat(t)>=e},starts:function(r,t,e){return""===t||null==t||String(t).toLowerCase().startsWith(String(e).toLowerCase())},ends:function(r,t,e){return""===t||null==t||String(t).toLowerCase().endsWith(String(e).toLowerCase())},minLength:function(r,t,e){return""===t||null==t||String(t).length>=e},maxLength:function(r,t,e){return""===t||null==t||String(t).length<=e},in:function(r,t,e){return""===t||null==t||("string"==typeof e&&(e=e.split("|")),""===t||e.indexOf(t)>-1)},regex:function(r,t,e){return""===t||null==t||new RegExp(e).test(t)},unique:function(r,t,e){if(""===t||null==t)return!0;var n=!0,s=r.getData(),l=r.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(u){var h=u.getData();h!==s&&t==l.getFieldValue(h)&&(n=!1)}),n},required:function(r,t,e){return""!==t&&null!=t}},kte=Object.freeze({__proto__:null,AccessorModule:jq,AjaxModule:Qq,ClipboardModule:eee,ColumnCalcsModule:ree,DataTreeModule:oee,DownloadModule:hee,EditModule:Tee,ExportModule:wee,FilterModule:Mee,FormatModule:$ee,FrozenColumnsModule:Kee,FrozenRowsModule:Jee,GroupRowsModule:Zee,HistoryModule:tte,HtmlTableImportModule:nte,InteractionModule:ite,KeybindingsModule:ste,MenuModule:ate,MoveColumnsModule:lte,MoveRowsModule:hC,MutatorModule:ute,PageModule:dte,PersistenceModule:fte,PrintModule:gte,ReactiveDataModule:mte,ResizeColumnsModule:_te,ResizeRowsModule:vte,ResizeTableModule:bte,ResponsiveLayoutModule:yte,SelectRowModule:(()=>{class r extends gi{constructor(e){super(e),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(n,s){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(e,n){return"selected"===e?this.selectedRows:n}rowDeleted(e){this._deselectRow(e,!0)}clearSelectionData(e){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==e&&this._rowSelectionChanged()}initializeRow(e){var n=this,s=e.getElement(),l=function(){setTimeout(function(){n.selecting=!1},50),document.body.removeEventListener("mouseup",l)};e.modules.select={selected:!1},n.table.options.selectableCheck.call(this.table,e.getComponent())?(s.classList.add("tabulator-selectable"),s.classList.remove("tabulator-unselectable"),n.table.options.selectable&&"highlight"!=n.table.options.selectable&&("click"===n.table.options.selectableRangeMode?s.addEventListener("click",function(u){if(u.shiftKey){n.table._clearSelection(),n.lastClickedRow=n.lastClickedRow||e;var h=n.table.rowManager.getDisplayRowIndex(n.lastClickedRow),p=n.table.rowManager.getDisplayRowIndex(e),g=h<=p?h:p,b=h>=p?h:p,w=n.table.rowManager.getDisplayRows().slice(0).splice(g,b-g+1);u.ctrlKey||u.metaKey?(w.forEach(function(x){x!==n.lastClickedRow&&(!0===n.table.options.selectable||n.isRowSelected(e)||n.selectedRows.length<n.table.options.selectable)&&n.toggleRow(x)}),n.lastClickedRow=e):(n.deselectRows(void 0,!0),!0!==n.table.options.selectable&&w.length>n.table.options.selectable&&(w=w.slice(0,n.table.options.selectable)),n.selectRows(w)),n.table._clearSelection()}else u.ctrlKey||u.metaKey?(n.toggleRow(e),n.lastClickedRow=e):(n.deselectRows(void 0,!0),n.selectRows(e),n.lastClickedRow=e)}):(s.addEventListener("click",function(u){(!n.table.modExists("edit")||!n.table.modules.edit.getCurrentCell())&&n.table._clearSelection(),n.selecting||n.toggleRow(e)}),s.addEventListener("mousedown",function(u){if(u.shiftKey)return n.table._clearSelection(),n.selecting=!0,n.selectPrev=[],document.body.addEventListener("mouseup",l),document.body.addEventListener("keyup",l),n.toggleRow(e),!1}),s.addEventListener("mouseenter",function(u){n.selecting&&(n.table._clearSelection(),n.toggleRow(e),n.selectPrev[1]==e&&n.toggleRow(n.selectPrev[0]))}),s.addEventListener("mouseout",function(u){n.selecting&&(n.table._clearSelection(),n.selectPrev.unshift(e))})))):(s.classList.add("tabulator-unselectable"),s.classList.remove("tabulator-selectable"))}toggleRow(e){this.table.options.selectableCheck.call(this.table,e.getComponent())&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))}selectRows(e){var n;switch(typeof e){case"undefined":this.table.rowManager.rows.forEach(s=>{this._selectRow(s,!0,!0)}),this._rowSelectionChanged();break;case"string":(n=this.table.rowManager.findRow(e))?this._selectRow(n,!0,!0):this.table.rowManager.getRows(e).forEach(s=>{this._selectRow(s,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(e)?(e.forEach(s=>{this._selectRow(s,!0,!0)}),this._rowSelectionChanged()):this._selectRow(e,!1,!0)}}_selectRow(e,n,s){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!s&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var l=this.table.rowManager.findRow(e);l?-1==this.selectedRows.indexOf(l)&&(l.getElement().classList.add("tabulator-selected"),l.modules.select||(l.modules.select={}),l.modules.select.selected=!0,l.modules.select.checkboxEl&&(l.modules.select.checkboxEl.checked=!0),this.selectedRows.push(l),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(l,!0),n||this.dispatchExternal("rowSelected",l.getComponent()),this._rowSelectionChanged(n)):n||console.warn("Selection Error - No such row found, ignoring selection:"+e)}isRowSelected(e){return-1!==this.selectedRows.indexOf(e)}deselectRows(e,n){var l,s=this;if(void 0===e){l=s.selectedRows.length;for(let u=0;u<l;u++)s._deselectRow(s.selectedRows[0],!0);s._rowSelectionChanged(n)}else Array.isArray(e)?(e.forEach(function(u){s._deselectRow(u,!0)}),s._rowSelectionChanged(n)):s._deselectRow(e,n)}_deselectRow(e,n){var u,s=this,l=s.table.rowManager.findRow(e);l?(u=s.selectedRows.findIndex(function(h){return h==l}))>-1&&(l.getElement().classList.remove("tabulator-selected"),l.modules.select||(l.modules.select={}),l.modules.select.selected=!1,l.modules.select.checkboxEl&&(l.modules.select.checkboxEl.checked=!1),s.selectedRows.splice(u,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(l,!1),n||this.dispatchExternal("rowDeselected",l.getComponent()),s._rowSelectionChanged(n)):n||console.warn("Deselection Error - No such row found, ignoring selection:"+e)}getSelectedData(){var e=[];return this.selectedRows.forEach(function(n){e.push(n.getData())}),e}getSelectedRows(){var e=[];return this.selectedRows.forEach(function(n){e.push(n.getComponent())}),e}_rowSelectionChanged(e){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(e,n){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=n}registerHeaderSelectCheckbox(e){this.headerCheckboxElement=e}childRowSelection(e,n){var s=this.table.modules.dataTree.getChildren(e,!0);if(n)for(let l of s)this._selectRow(l,!0);else for(let l of s)this._deselectRow(l,!0)}}return r.moduleName="selectRow",r})(),SortModule:(()=>{class r extends gi{constructor(e){super(e),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(e,n,s,l){var u=this.getSort();return u.forEach(h=>{delete h.column}),l.sort=u,l}userSetSort(e,n){this.setSort(e,n),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(e){var s,l,n=!1;switch(typeof e.definition.sorter){case"string":r.sorters[e.definition.sorter]?n=r.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":n=e.definition.sorter}e.modules.sort={sorter:n,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:e.definition.headerSortTristate},!1!==e.definition.headerSort&&((s=e.getElement()).classList.add("tabulator-sortable"),(l=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?l.appendChild(this.table.options.headerSortElement):l.innerHTML=this.table.options.headerSortElement,e.titleHolderElement.appendChild(l),e.modules.sort.element=l,s.addEventListener("click",u=>{var h="",p=[],g=!1;if(e.modules.sort){if(e.modules.sort.tristate)h="none"==e.modules.sort.dir?e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?"asc"==e.modules.sort.dir?"desc":"asc":"none";else switch(e.modules.sort.dir){case"asc":h="desc";break;case"desc":h="asc";break;default:h=e.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(u.shiftKey||u.ctrlKey)?((g=(p=this.getSort()).findIndex(b=>b.field===e.getField()))>-1?(p[g].dir=h,g!=p.length-1&&(g=p.splice(g,1)[0],"none"!=h&&p.push(g))):"none"!=h&&p.push({column:e,dir:h}),this.setSort(p)):"none"==h?this.clear():this.setSort(e,h),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var e=this.changed;return this.changed=!1,e}getSort(){var n=[];return this.sortList.forEach(function(s){s.column&&n.push({column:s.column.getComponent(),field:s.column.getField(),dir:s.dir})}),n}setSort(e,n){var s=this,l=[];Array.isArray(e)||(e=[{column:e,dir:n}]),e.forEach(function(u){var h;(h=s.table.columnManager.findColumn(u.column))?(u.column=h,l.push(u),s.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",u.column)}),s.sortList=l,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(e){var u,n=this.table.rowManager.activeRows[0],s="string";if(n&&(n=n.getData(),e.getField()))switch(u=e.getFieldValue(n),typeof u){case"undefined":s="string";break;case"boolean":s="boolean";break;default:isNaN(u)||""===u?u.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(s="alphanum"):s="number"}return r.sorters[s]}sort(e){var n=this,s=this.table.options.sortOrderReverse?n.sortList.slice().reverse():n.sortList,l=[],u=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",n.getSort()),n.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(s.forEach(function(h,p){var g=h.column.modules.sort;h.column&&g&&(g.sorter||(g.sorter=n.findSorter(h.column)),h.params="function"==typeof g.params?g.params(h.column.getComponent(),h.dir):g.params,l.push(h)),n.setColumnHeader(h.column,h.dir)}),l.length&&n._sortItems(e,l)):s.forEach(function(h,p){n.setColumnHeader(h.column,h.dir)}),this.subscribedExternal("dataSorted")&&(e.forEach(h=>{u.push(h.getComponent())}),this.dispatchExternal("dataSorted",n.getSort(),u)),e}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(e){e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(e,n){e.modules.sort.dir=n,e.getElement().setAttribute("aria-sort",n)}_sortItems(e,n){var s=n.length-1;e.sort((l,u)=>{for(var h,p=s;p>=0;p--){let g=n[p];if(0!==(h=this._sortRow(l,u,g.column,g.dir,g.params)))break}return h})}_sortRow(e,n,s,l,u){var h,p,g="asc"==l?e:n,b="asc"==l?n:e;return e=void 0!==(e=s.getFieldValue(g.getData()))?e:"",n=void 0!==(n=s.getFieldValue(b.getData()))?n:"",h=g.getComponent(),p=b.getComponent(),s.modules.sort.sorter.call(this,e,n,h,p,s.getComponent(),l,u)}}return r.moduleName="sort",r.sorters=Ite,r})(),ValidateModule:(()=>{class r extends gi{constructor(e){super(e),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(e){return!e.modules.validate||!e.modules.validate.invalid}cellValidate(e){return this.validate(e.column.modules.validate,e,e.getValue())}columnValidate(e){var n=[];return e.cells.forEach(function(s){this.cellValidate(s)||n.push(s.getComponent())}),!n.length||n}rowValidate(e){var n=[];return e.cells.forEach(function(s){this.cellValidate(s)||n.push(s.getComponent())}),!n.length||n}userClearCellValidation(e){e||(e=this.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach(n=>{this.clearValidation(n._getSelf())})}userValidate(e){var n=[];return this.table.rowManager.rows.forEach(function(s){var l=s.validate();!0!==l&&(n=n.concat(l))}),!n.length||n}initializeColumnCheck(e){void 0!==e.definition.validator&&this.initializeColumn(e)}initializeColumn(e){var l,n=this,s=[];e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach(function(u){(l=n._extractValidator(u))&&s.push(l)}):(l=this._extractValidator(e.definition.validator))&&s.push(l),e.modules.validate=!!s.length&&s)}_extractValidator(e){var n,s,l;switch(typeof e){case"string":return(l=e.indexOf(":"))>-1?(n=e.substring(0,l),s=e.substring(l+1)):n=e,this._buildValidator(n,s);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}}_buildValidator(e,n){var s="function"==typeof e?e:r.validators[e];return s?{type:"function"==typeof e?"function":e,func:s,params:n}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)}validate(e,n,s){var l=this,u=[],h=this.invalidCells.indexOf(n);return e&&e.forEach(function(p){p.func.call(l,n.getComponent(),s,p.params)||u.push({type:p.type,parameters:p.params})}),u=!u.length||u,n.modules.validate||(n.modules.validate={}),!0===u?(n.modules.validate.invalid=!1,n.getElement().classList.remove("tabulator-validation-fail"),h>-1&&this.invalidCells.splice(h,1)):(n.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&n.getElement().classList.add("tabulator-validation-fail"),-1==h&&this.invalidCells.push(n)),u}getInvalidCells(){var e=[];return this.invalidCells.forEach(n=>{e.push(n.getComponent())}),e}clearValidation(e){var n;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,(n=this.invalidCells.indexOf(e))>-1&&this.invalidCells.splice(n,1))}}return r.moduleName="validate",r.validators=Ote,r})()}),Nte={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class PF{constructor(t,e){this.table=t,this.msgType=e,this.registeredDefaults={}}register(t,e){this.registeredDefaults[t]=e}generate(t,e={}){var n=Object.assign({},this.registeredDefaults);if(Object.assign(n,t),!1!==e.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var s in e)n.hasOwnProperty(s)||console.warn("Invalid "+this.msgType+" option:",s);for(var s in n)s in e?n[s]=e[s]:Array.isArray(n[s])?n[s]=Object.assign([],n[s]):"object"==typeof n[s]&&null!==n[s]?n[s]=Object.assign({},n[s]):void 0===n[s]&&delete n[s];return n}}class pC extends pl{constructor(t){super(t),this.elementVertical=t.rowManager.element,this.elementHorizontal=t.columnManager.element,this.tableElement=t.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(t){}renderRows(){}renderColumns(){}rerenderRows(t){t&&t()}rerenderColumns(t,e){}renderRowCells(t){}rerenderRowCells(t,e){}scrollColumns(t,e){}scrollRows(t,e){}resize(){}scrollToRow(t){}scrollToRowNearestTop(t){}visibleRows(t){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(t,e){var n=t.getElement();e%2?(n.classList.add("tabulator-row-even"),n.classList.remove("tabulator-row-odd")):(n.classList.add("tabulator-row-odd"),n.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(t){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(t,e,n){var s=this.rows().indexOf(t),l=t.getElement(),u=0;return new Promise((h,p)=>{if(s>-1){if(void 0===n&&(n=this.table.options.scrollToRowIfVisible),!n&&gr.elVisible(l)&&(u=gr.elOffset(l).top-gr.elOffset(this.elementVertical).top)>0&&u<this.elementVertical.clientHeight-l.offsetHeight)return!1;switch(void 0===e&&(e=this.table.options.scrollToRowPosition),"nearest"===e&&(e=this.scrollToRowNearestTop(t)?"top":"bottom"),this.scrollToRow(t),e){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(l.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-l.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-l.offsetTop)+l.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+l.offsetHeight}h()}else console.warn("Scroll Error - Row not visible"),p("Scroll Error - Row not visible")})}}class Lte extends pC{constructor(t){super(t)}renderRowCells(t){t.cells.forEach(e=>{t.element.appendChild(e.getElement()),e.cellRendered()})}reinitializeColumnWidths(t){t.forEach(function(e){e.reinitializeWidth()})}}class Pte extends pC{constructor(t){super(t),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var t=this.options("columns"),n=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),n=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),n=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),n=!1),t&&t.find(s=>s.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),n=!1),n}renderColumns(t,e){this.dataChange()}scrollColumns(t,e){this.scrollLeft!=t&&(this.scrollLeft=t,this.scroll(t-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(t,e){var n={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!t||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var s=0;this.table.columnManager.columnsByIndex.forEach(l=>{var u={};if(l.visible){var h=l.getWidth();u.leftPos=s,u.rightPos=s+h,u.width=h,"fitData"===this.options("layout")&&(u.fitDataCheck=!0),s+h>this.vDomScrollPosLeft&&s<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=s),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=h),this.columns.push(l),l.modules.vdomHoz=u,s+=h}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,e||(!t||this.reinitChanged(n))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(t){this.initialized?this.initializeRow(t):t.cells.forEach(e=>{t.element.appendChild(e.getElement()),e.cellRendered()})}rerenderRowCells(t,e){this.reinitializeRow(t,e)}reinitializeColumnWidths(t){for(let e=this.leftCol;e<=this.rightCol;e++)this.columns[e].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var l,s,t=!1,e=0,n=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(u=>{!u.definition.width&&u.visible&&(t=!0)}),t&&t&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,s=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(l=s.getElement(),s.generateCells(),this.tableElement.appendChild(l),n=0;n<s.cells.length;n++){let p=s.cells[n];if(l.appendChild(p.getElement()),p.column.reinitializeWidth(),(e+=p.column.getWidth())>this.vDomScrollPosRight)break}for(l.parentNode.removeChild(l),this.fitDataColAvg=Math.floor(e/(n+1));n<this.table.columnManager.columnsByIndex.length;n++)this.table.columnManager.columnsByIndex[n].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(t){var e=!0;return t.cols.length!==this.columns.length||t.leftCol!==this.leftCol||t.rightCol!==this.rightCol||(t.cols.forEach((n,s)=>{n!==this.columns[s]&&(e=!1)}),!e)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(e=>{this.reinitializeRow(e,!0)})}scroll(t){this.vDomScrollPosLeft+=t,this.vDomScrollPosRight+=t,t>.8*this.elementVertical.clientWidth?this.rerenderColumns():t>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(t,e,n){for(let s=t;s<e;s++){let l=this.columns[s];l.modules.vdomHoz.leftPos+=n,l.modules.vdomHoz.rightPos+=n}}addColRight(){var t=this.columns[this.rightCol+1];t&&t.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(n=>{if("group"!==n.type){var s=n.getCell(t);n.getElement().appendChild(s.getElement()),s.cellRendered()}}),this.fitDataColActualWidthCheck(t),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=t.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var t=this.columns[this.leftCol-1];t&&t.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(s=>{if("group"!==s.type){var l=s.getCell(t);s.getElement().prepend(l.getElement()),l.cellRendered()}}),this.fitDataColActualWidthCheck(t),this.leftCol?this.vDomPadLeft-=t.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(t){var e;(t=this.columns[this.rightCol])&&t.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(e=this.table.rowManager.getVisibleRows(),t.modules.vdomHoz.visible=!1,e.forEach(n=>{if("group"!==n.type){var s=n.getCell(t);n.getElement().removeChild(s.getElement())}}),this.vDomPadRight+=t.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var t=this.columns[this.leftCol];t&&t.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(n=>{if("group"!==n.type){var s=n.getCell(t);s.parentNode&&n.getElement().removeChild(s.getElement())}}),this.vDomPadLeft+=t.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(t){var e,n;t.modules.vdomHoz.fitDataCheck&&(t.reinitializeWidth(),(n=(e=t.getWidth())-t.modules.vdomHoz.width)&&(t.modules.vdomHoz.rightPos+=n,t.modules.vdomHoz.width=e,this.colPositionAdjust(this.rightCol+2,this.columns.length,n)),t.modules.vdomHoz.fitDataCheck=!1)}initializeRow(t){if("group"!==t.type){t.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let e=this.leftCol;e<=this.rightCol;e++){let n=this.columns[e];if(n&&n.visible){let s=t.getCell(n);t.getElement().appendChild(s.getElement()),s.cellRendered()}}}}reinitializeRow(t,e){if("group"!==t.type&&(e||!t.modules.vdomHoz||t.modules.vdomHoz.leftCol!==this.leftCol||t.modules.vdomHoz.rightCol!==this.rightCol)){for(var n=t.getElement();n.firstChild;)n.removeChild(n.firstChild);this.initializeRow(t)}}}class Fte extends pl{constructor(t){super(t),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new PF(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var t;(t="string"==typeof this.table.options.renderHorizontal?{virtual:Pte,basic:Lte}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t.setAttribute("role","row"),t}createHeaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-header"),t.setAttribute("role","rowgroup"),this.table.options.headerVisible||t.classList.add("tabulator-header-hidden"),t}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(t){var n=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=t,this.element.style.marginLeft=t>n?-(t-n)+"px":0,this.scrollLeft=t,this.renderer.scrollColumns(t)}generateColumnsFromRowData(t){var s,l,e=[],n=this.table.options.autoColumnsDefinitions;if(t&&t.length){for(var u in s=t[0]){let h={field:u,title:u},p=s[u];switch(typeof p){case"undefined":l="string";break;case"boolean":l="boolean";break;case"object":l=Array.isArray(p)?"array":"string";break;default:l=isNaN(p)||""===p?p.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}h.sorter=l,e.push(h)}if(n)switch(typeof n){case"function":this.table.options.columns=n.call(this.table,e);break;case"object":Array.isArray(n)?e.forEach(h=>{var p=n.find(g=>g.field===h.field);p&&Object.assign(h,p)}):e.forEach(h=>{n[h.field]&&Object.assign(h,n[h.field])}),this.table.options.columns=e}else this.table.options.columns=e;this.setColumns(this.table.options.columns)}}setColumns(t,e){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),t.forEach((n,s)=>{this._addColumn(n)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(t,e,n){var s=new O_(t,this),l=s.getElement(),u=n&&this.findColumnIndex(n);if(n&&u>-1){var h=n.getTopColumn(),p=this.columns.indexOf(h),g=h.getElement();e?(this.columns.splice(p,0,s),g.parentNode.insertBefore(l,g)):(this.columns.splice(p+1,0,s),g.parentNode.insertBefore(l,g.nextSibling))}else e?(this.columns.unshift(s),this.headersElement.insertBefore(s.getElement(),this.headersElement.firstChild)):(this.columns.push(s),this.headersElement.appendChild(s.getElement()));return s.columnRendered(),s}registerColumnField(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)}registerColumnPosition(t){this.columnsByIndex.push(t)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(t){t.reRegisterPosition()})}verticalAlignHeaders(){var t=0;this.columns.forEach(e=>{var n;e.clearVerticalAlign(),(n=e.getHeight())>t&&(t=n)}),this.columns.forEach(e=>{e.verticalAlign(this.table.options.columnHeaderVertAlign,t)}),this.table.rowManager.adjustTableSize()}findColumn(t){return"object"!=typeof t?this.columnsByField[t]||!1:t instanceof O_?t:t instanceof NF?t._getSelf()||!1:"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&this.columns.find(n=>n.element===t)||!1}getColumnByField(t){return this.columnsByField[t]}getColumnsByFieldRoot(t){var e=[];return Object.keys(this.columnsByField).forEach(n=>{n.split(".")[0]===t&&e.push(this.columnsByField[n])}),e}getColumnByIndex(t){return this.columnsByIndex[t]}getFirstVisibileColumn(t){return(t=this.columnsByIndex.findIndex(e=>e.visible))>-1&&this.columnsByIndex[t]}getColumns(){return this.columns}findColumnIndex(t){return this.columnsByIndex.findIndex(e=>t===e)}getRealColumns(){return this.columnsByIndex}traverse(t){this.columnsByIndex.forEach((e,n)=>{t(e,n)})}getDefinitions(t){var e=[];return this.columnsByIndex.forEach(n=>{(!t||t&&n.visible)&&e.push(n.getDefinition())}),e}getDefinitionTree(){var t=[];return this.columns.forEach(e=>{t.push(e.getDefinition(!0))}),t}getComponents(t){var e=[];return(t?this.columns:this.columnsByIndex).forEach(s=>{e.push(s.getComponent())}),e}getWidth(){var t=0;return this.columnsByIndex.forEach(e=>{e.visible&&(t+=e.getWidth())}),t}moveColumn(t,e,n){this.moveColumnActual(t,e,n),e.element.parentNode.insertBefore(t.element,e.element),n&&e.element.parentNode.insertBefore(e.element,t.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(t,e,n){this._moveColumnInArray(t.parent.isGroup?t.parent.columns:this.columns,t,e,n),this._moveColumnInArray(this.columnsByIndex,t,e,n,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",t,e,n),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",t.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(t,e,n,s,l){var h,u=t.indexOf(e);u>-1&&(t.splice(u,1),(h=t.indexOf(n))>-1?s&&(h+=1):h=u,t.splice(h,0,e),l&&(this.chain("column-moving-rows",[e,n,s],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(g){if(g.cells.length){var b=g.cells.splice(u,1)[0];g.cells.splice(h,0,b)}}))}scrollToColumn(t,e,n){var s=0,l=0,u=0,h=t.getElement();return new Promise((p,g)=>{if(void 0===e&&(e=this.table.options.scrollToColumnPosition),void 0===n&&(n=this.table.options.scrollToColumnIfVisible),t.visible){switch(e){case"middle":case"center":u=-this.element.clientWidth/2;break;case"right":u=h.clientWidth-this.headersElement.clientWidth}if(!n&&(l=h.offsetLeft)>0&&l+h.offsetWidth<this.element.clientWidth)return!1;s=h.offsetLeft+u,s=Math.max(Math.min(s,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(s),this.scrollHorizontal(s),p()}else console.warn("Scroll Error - Column not visible"),g("Scroll Error - Column not visible")})}generateCells(t){var e=[];return this.columnsByIndex.forEach(n=>{e.push(n.generateCell(t))}),e}getFlexBaseWidth(){var t=this.table.element.clientWidth,e=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(n){var s,l,u;n.visible&&(s=n.definition.width||0,l=parseInt(n.minWidth),u="string"==typeof s?s.indexOf("%")>-1?t/100*parseInt(s):parseInt(s):s,e+=u>l?u:l)}),e}addColumn(t,e,n){return new Promise((s,l)=>{var u=this._addColumn(t,e,n);this._reIndexColumns(),this.dispatch("column-add",t,e,n),"fitColumns"!=this.layoutMode()&&u.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),s(u)})}deregisterColumn(t){var n,e=t.getField();e&&delete this.columnsByField[e],(n=this.columnsByIndex.indexOf(t))>-1&&this.columnsByIndex.splice(n,1),(n=this.columns.indexOf(t))>-1&&this.columns.splice(n,1),this.verticalAlignHeaders(),this.redraw()}redraw(t){gr.elVisible(this.element)&&this.verticalAlignHeaders(),t&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",t)||this.layoutRefresh(),this.dispatch("table-redraw",t),this.table.footerManager.redraw()}}class Bte extends pC{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.scrollTop=0,t.scrollLeft=0,t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility=""}renderRows(){var t=this.tableElement,e=!0;this.rows().forEach((n,s)=>{this.styleRow(n,s),t.appendChild(n.getElement()),n.initialize(!0),"group"!==n.type&&(e=!1)}),t.style.minWidth=e?this.table.columnManager.getWidth()+"px":""}rerenderRows(t){this.render(),t&&t()}scrollToRowNearestTop(t){var e=gr.elOffset(t.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-e)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-e))}scrollToRow(t){var e=t.getElement();this.elementVertical.scrollTop=gr.elOffset(e).top-gr.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(t){return this.rows()}}class Vte extends pC{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(t){for(var e=this.elementVertical.scrollTop,n=!1,s=!1,l=this.table.rowManager.scrollLeft,u=this.rows(),h=this.vDomTop;h<=this.vDomBottom;h++)if(u[h]){var p=e-u[h].getElement().offsetTop;if(!(!1===s||Math.abs(p)<s))break;s=p,n=h}u.forEach(g=>{g.deinitializeHeight()}),t&&t(),this._virtualRenderFill(!1===n?this.rows.length-1:n,!0,s||0),this.scrollColumns(l)}scrollColumns(t){this.table.rowManager.scrollHorizontal(t)}scrollRows(t,e){var n=t-this.vDomScrollPosTop,s=t-this.vDomScrollPosBottom,l=2*this.vDomWindowBuffer,u=this.rows();if(this.scrollTop=t,-n>l||s>l){var h=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*u.length)),this.scrollColumns(h)}else e?(n<0&&this._addTopRow(u,-n),s<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(u,-s):this.vDomScrollPosBottom=this.scrollTop)):(s>=0&&this._addBottomRow(u,s),n>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(u,n):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(t){var e=this.rows().indexOf(t);return!(Math.abs(this.vDomTop-e)>Math.abs(this.vDomBottom-e))}scrollToRow(t){var e=this.rows().indexOf(t);e>-1&&this._virtualRenderFill(e,!0)}visibleRows(t){var e=this.elementVertical.scrollTop,n=this.elementVertical.clientHeight+e,s=!1,l=0,u=0,h=this.rows();if(t)l=this.vDomTop,u=this.vDomBottom;else for(var p=this.vDomTop;p<=this.vDomBottom;p++)if(h[p])if(s){if(!(n-h[p].getElement().offsetTop>=0))break;u=p}else if(e-h[p].getElement().offsetTop>=0)l=p;else{if(s=!0,!(n-h[p].getElement().offsetTop>=0))break;u=p}return h.slice(l,u+1)}_virtualRenderFill(t,e,n){var s=this.tableElement,l=this.elementVertical,u=0,h=0,p=0,g=0,b=0,C=this.rows(),w=C.length,x=this.elementVertical.clientHeight;if(n=n||0,t=t||0){for(;s.firstChild;)s.removeChild(s.firstChild);(p=(w-t+1)*this.vDomRowHeight)<x&&(t-=Math.ceil((x-p)/this.vDomRowHeight))<0&&(t=0),t-=u=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),t)}else this.clear();if(w&&gr.elVisible(this.elementVertical)){for(this.vDomTop=t,this.vDomBottom=t-1;(h<=x+this.vDomWindowBuffer||b<this.vDomWindowMinTotalRows)&&this.vDomBottom<w-1;){var V,N=this.vDomBottom+1,B=C[N];this.styleRow(B,N),s.appendChild(B.getElement()),B.initialize(),B.heightInitialized||B.normalizeHeight(!0),V=B.getHeight(),b<u?g+=V:h+=V,V>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*V),this.vDomBottom++,b++}t?(this.vDomTopPad=e?this.vDomRowHeight*this.vDomTop+n:this.scrollTop-g,this.vDomBottomPad=this.vDomBottom==w-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-h-g,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((h+g)/b),this.vDomBottomPad=this.vDomRowHeight*(w-this.vDomBottom-1),this.vDomScrollHeight=g+h+this.vDomBottomPad-x),s.style.paddingTop=this.vDomTopPad+"px",s.style.paddingBottom=this.vDomBottomPad+"px",e&&(this.scrollTop=this.vDomTopPad+g+n-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-x:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-x),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&e&&(this.scrollTop+=this.elementVertical.offsetHeight-x),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,l.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(t,e){for(var n=this.tableElement,s=[],l=0,u=this.vDomTop-1,h=0;this.vDomTop;){let g,b,p=t[u];if(!(p&&h<this.vDomMaxRenderChain))break;if(g=p.getHeight()||this.vDomRowHeight,b=p.initialized,!(e>=g))break;this.styleRow(p,u),n.insertBefore(p.getElement(),n.firstChild),(!p.initialized||!p.heightInitialized)&&s.push(p),p.initialize(),b||(g=p.getElement().offsetHeight,g>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*g)),e-=g,l+=g,this.vDomTop--,u--,h++}for(let p of s)p.clearCellHeight();this._quickNormalizeRowHeight(s),l&&(this.vDomTopPad-=l,this.vDomTopPad<0&&(this.vDomTopPad=u*this.vDomRowHeight),u<1&&(this.vDomTopPad=0),n.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=l)}_removeTopRow(t,e){for(var n=[],s=0,l=0;;){let h,u=t[this.vDomTop];if(!(u&&l<this.vDomMaxRenderChain))break;if(h=u.getHeight()||this.vDomRowHeight,!(e>=h))break;this.vDomTop++,e-=h,s+=h,n.push(u),l++}for(let u of n){let h=u.getElement();h.parentNode&&h.parentNode.removeChild(h)}s&&(this.vDomTopPad+=s,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?s:s+this.vDomWindowBuffer)}_addBottomRow(t,e){for(var n=this.tableElement,s=[],l=0,u=this.vDomBottom+1,h=0;;){let g,b,p=t[u];if(!(p&&h<this.vDomMaxRenderChain))break;if(g=p.getHeight()||this.vDomRowHeight,b=p.initialized,!(e>=g))break;this.styleRow(p,u),n.appendChild(p.getElement()),(!p.initialized||!p.heightInitialized)&&s.push(p),p.initialize(),b||(g=p.getElement().offsetHeight,g>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*g)),e-=g,l+=g,this.vDomBottom++,u++,h++}for(let p of s)p.clearCellHeight();this._quickNormalizeRowHeight(s),l&&(this.vDomBottomPad-=l,(this.vDomBottomPad<0||u==t.length-1)&&(this.vDomBottomPad=0),n.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=l)}_removeBottomRow(t,e){for(var n=[],s=0,l=0;;){let h,u=t[this.vDomBottom];if(!(u&&l<this.vDomMaxRenderChain))break;if(h=u.getHeight()||this.vDomRowHeight,!(e>=h))break;this.vDomBottom--,e-=h,s+=h,n.push(u),l++}for(let u of n){let h=u.getElement();h.parentNode&&h.parentNode.removeChild(h)}s&&(this.vDomBottomPad+=s,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=s)}_quickNormalizeRowHeight(t){for(let e of t)e.calcHeight();for(let e of t)e.setCellHeight()}}class Hte extends pl{constructor(t){super(t),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var t=document.createElement("div");return t.classList.add("tabulator-tableholder"),t.setAttribute("tabindex",0),t.setAttribute("role","rowgroup"),t}createTableElement(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t.setAttribute("role","rowgroup"),t}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(t,e){return e?this.activeRows.indexOf(t):this.rows.indexOf(t)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var t=this.element.scrollLeft,e=this.scrollLeft>t,n=this.element.scrollTop,s=this.scrollTop>n;this.scrollLeft!=t&&(this.scrollLeft=t,this.dispatch("scroll-horizontal",t,e),this.dispatchExternal("scrollHorizontal",t,e)),this.scrollTop!=n&&(this.scrollTop=n,this.renderer.scrollRows(n,s),this.dispatch("scroll-vertical",n,s),this.dispatchExternal("scrollVertical",n,s))})}findRow(t){return"object"!=typeof t?null!=t&&(this.rows.find(n=>n.data[this.table.options.index]==t)||!1):t instanceof Ls?t:t instanceof oD?t._getSelf()||!1:"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&this.rows.find(n=>n.getElement()===t)||!1}getRowFromDataObject(t){return this.rows.find(n=>n.data===t)||!1}getRowFromPosition(t,e){return e?this.activeRows[t]:this.rows[t]}scrollToRow(t,e,n){return this.renderer.scrollToRowPosition(t,e,n)}setData(t,e,n){return new Promise((s,l)=>{e&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(t,!0):this.reRenderInPosition(()=>{this._setDataActual(t)}):(this.table.options.autoColumns&&n&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(t),this.resetScroll(),this._setDataActual(t)),s()})}_setDataActual(t,e){this.dispatchExternal("dataProcessing",t),this._wipeElements(),Array.isArray(t)?(this.dispatch("data-processing",t),t.forEach((n,s)=>{if(n&&"object"==typeof n){var l=new Ls(n,this);this.rows.push(l)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",n)}),this.refreshActiveData(!1,!1,e),this.dispatch("data-processed",t),this.dispatchExternal("dataProcessed",t)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof t,"\nData:     ",t)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(t=>{t.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(t,e){var n=this.rows.indexOf(t),s=this.activeRows.indexOf(t);s>-1&&this.activeRows.splice(s,1),n>-1&&this.rows.splice(n,1),this.setActiveRows(this.activeRows),this.displayRowIterator(l=>{var u=l.indexOf(t);u>-1&&l.splice(u,1)}),e||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",t.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(t,e,n,s){var l=this.addRowActual(t,e,n,s);return this.dispatch("row-added",l,t,e,n),l}addRows(t,e,n){var s=[];return new Promise((l,u)=>{e=this.findAddRowPos(e),Array.isArray(t)||(t=[t]),(void 0===n&&e||void 0!==n&&!e)&&t.reverse(),t.forEach((h,p)=>{var g=this.addRow(h,e,n,!0);s.push(g),this.dispatch("row-added",g,t,e,n)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),s.length&&this._clearPlaceholder(),l(s)})}findAddRowPos(t){return void 0===t&&(t=this.table.options.addRowPos),"pos"===t&&(t=!0),"bottom"===t&&(t=!1),t}addRowActual(t,e,n,s){var p,g,l=t instanceof Ls?t:new Ls(t||{},this),u=this.findAddRowPos(e),h=-1;return n||(g=this.chain("row-adding-position",[l,u],null,{index:n,top:u}),n=g.index,u=g.top),void 0!==n&&(n=this.findRow(n)),(n=this.chain("row-adding-index",[l,n,u],null,n))&&(h=this.rows.indexOf(n)),n&&h>-1?(p=this.activeRows.indexOf(n),this.displayRowIterator(function(b){var C=b.indexOf(n);C>-1&&b.splice(u?C:C+1,0,l)}),p>-1&&this.activeRows.splice(u?p:p+1,0,l),this.rows.splice(u?h:h+1,0,l)):u?(this.displayRowIterator(function(b){b.unshift(l)}),this.activeRows.unshift(l),this.rows.unshift(l)):(this.displayRowIterator(function(b){b.push(l)}),this.activeRows.push(l),this.rows.push(l)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",l.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),s||this.reRenderInPosition(),l}moveRow(t,e,n){this.dispatch("row-move",t,e,n),this.moveRowActual(t,e,n),this.regenerateRowNumbers(),this.dispatch("row-moved",t,e,n),this.dispatchExternal("rowMoved",t.getComponent())}moveRowActual(t,e,n){this.moveRowInArray(this.rows,t,e,n),this.moveRowInArray(this.activeRows,t,e,n),this.displayRowIterator(s=>{this.moveRowInArray(s,t,e,n)}),this.dispatch("row-moving",t,e,n)}moveRowInArray(t,e,n,s){var l,u,p;if(e!==n&&((l=t.indexOf(e))>-1&&(t.splice(l,1),u=t.indexOf(n),t.splice(u>-1?s?u+1:u:l,0,e)),t===this.getDisplayRows())){p=u>l?u:l+1;for(let g=l<u?l:u;g<=p;g++)t[g]&&this.styleRow(t[g],g)}}clearData(){this.setData([])}getRowIndex(t){return this.findRowIndex(t,this.rows)}getDisplayRowIndex(t){var e=this.getDisplayRows().indexOf(t);return e>-1&&e}nextDisplayRow(t,e){var n=this.getDisplayRowIndex(t),s=!1;return!1!==n&&n<this.displayRowsCount-1&&(s=this.getDisplayRows()[n+1]),!s||s instanceof Ls&&"row"==s.type?s:this.nextDisplayRow(s,e)}prevDisplayRow(t,e){var n=this.getDisplayRowIndex(t),s=!1;return n&&(s=this.getDisplayRows()[n-1]),!e||!s||s instanceof Ls&&"row"==s.type?s:this.prevDisplayRow(s,e)}findRowIndex(t,e){var n;return!!((t=this.findRow(t))&&(n=e.indexOf(t),n>-1))&&n}getData(t,e){var n=[];return this.getRows(t).forEach(function(l){"row"==l.type&&n.push(l.getData(e||"data"))}),n}getComponents(t){var e=[];return this.getRows(t).forEach(function(s){e.push(s.getComponent())}),e}getDataCount(t){return this.getRows(t).length}scrollHorizontal(t){this.scrollLeft=t,this.element.scrollLeft=t,this.dispatch("scroll-horizontal",t)}registerDataPipelineHandler(t,e){void 0!==e?(this.dataPipeline.push({handler:t,priority:e}),this.dataPipeline.sort((n,s)=>n.priority-s.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(t,e){void 0!==e?(this.displayPipeline.push({handler:t,priority:e}),this.displayPipeline.sort((n,s)=>n.priority-s.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(t,e,n){var s=this.table,l="",u=0,h=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof t)if((u=this.dataPipeline.findIndex(p=>p.handler===t))>-1)l="dataPipeline",e&&(u==this.dataPipeline.length-1?l="display":u++);else{if(!((u=this.displayPipeline.findIndex(p=>p.handler===t))>-1))return void console.error("Unable to refresh data, invalid handler provided",t);l="displayPipeline",e&&(u==this.displayPipeline.length-1?l="end":u++)}else l=t||"all",u=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===l&&u<this.redrawBlockRestoreConfig.index||h.indexOf(l)<h.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:t,skipStage:e,renderInPosition:n,stage:l,index:u});else{switch(this.dispatch("data-refeshing"),t||(this.activeRowsPipeline[0]=this.rows.slice(0)),l){case"all":case"dataPipeline":for(let p=u;p<this.dataPipeline.length;p++){let g=this.dataPipeline[p].handler(this.activeRowsPipeline[p].slice(0));this.activeRowsPipeline[p+1]=g||this.activeRowsPipeline[p].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":u=0,this.resetDisplayRows();case"displayPipeline":for(let p=u;p<this.displayPipeline.length;p++){let g=this.displayPipeline[p].handler((p?this.getDisplayRows(p-1):this.activeRows).slice(0),n);this.setDisplayRows(g||this.getDisplayRows(p-1).slice(0),p)}}gr.elVisible(this.element)&&(n?this.reRenderInPosition():(t||this.table.columnManager.renderer.renderColumns(),this.renderTable(),s.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(t=>{var e=t.getCell(this.rowNumColumn);e&&e._generateContents()})}setActiveRows(t){this.activeRows=t,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(t,e){var n=!0;return e&&void 0!==this.displayRows[e]?(this.displayRows[e]=t,n=!0):(this.displayRows.push(t),n=e=this.displayRows.length-1),e==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),n}getDisplayRows(t){return void 0===t?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]}getVisibleRows(t){return this.renderer.visibleRows(!t)}displayRowIterator(t){this.activeRowsPipeline.forEach(t),this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(t){var e;switch(t){case"active":e=this.activeRows;break;case"display":e=this.table.rowManager.getDisplayRows();break;case"visible":e=this.getVisibleRows(!0);break;default:e=this.chain("rows-retrieve",t,null,this.rows)||this.rows}return e}reRenderInPosition(t){this.redrawBlock?t?t():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(t)}initializeRenderer(){var t;(t="string"==typeof this.table.options.renderVertical?{virtual:Vte,basic:Bte}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(t,e){var n=t.getElement();e%2?(n.classList.add("tabulator-row-even"),n.classList.remove("tabulator-row-odd")):(n.classList.add("tabulator-row-odd"),n.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(t){t.normalizeHeight()})}adjustTableSize(){var t=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let e=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+e+"px)",this.element.style.height="calc(100% - "+e+"px)",this.element.style.maxHeight="calc(100% - "+e+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-e+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&t!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(t){t.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(t){var e=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,t?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(e),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))}}class Ute extends pl{constructor(t){super(t),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t}initializeElement(){if(this.table.options.footerElement)switch(typeof this.table.options.footerElement){case"string":"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement}}getElement(){return this.element}append(t,e){this.activate(e),this.element.appendChild(t),this.table.rowManager.adjustTableSize()}prepend(t,e){this.activate(e),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(t){t.parentNode.removeChild(t),this.deactivate()}deactivate(t){(!this.element.firstChild||t)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(t){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),t&&this.links.push(t)}redraw(){this.links.forEach(function(t){t.footerRedraw()})}}class Gte extends pl{constructor(t){super(t),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var t={};this.listeners.forEach(e=>{t[e]={handler:null,components:[]}}),this.listeners=t}bindSubscriptionWatchers(){var t=Object.keys(this.listeners),e=Object.values(this.componentMap);for(let n of e)for(let s of t)this.subscriptionChange(n+"-"+s,this.subscriptionChanged.bind(this,n,s))}subscriptionChanged(t,e,n){var s=this.listeners[e].components,l=s.indexOf(t),u=!1;n?-1===l&&(s.push(t),u=!0):this.subscribed(t+"-"+e)||l>-1&&(s.splice(l,1),u=!0),u&&this.updateEventListeners()}updateEventListeners(){for(let t in this.listeners){let e=this.listeners[t];e.components.length?e.handler||(e.handler=this.track.bind(this,t),this.el.addEventListener(t,e.handler)):e.handler&&(this.el.removeEventListener(t,e.handler),e.handler=null)}}track(t,e){var n=e.composedPath&&e.composedPath()||e.path,s=this.findTargets(n);s=this.bindComponents(t,s),this.triggerEvents(t,e,s)}findTargets(t){var e={};let n=Object.keys(this.componentMap);for(let s of t){let l=s.classList?[...s.classList]:[];if(l.filter(p=>this.abortClasses.includes(p)).length)break;let h=l.filter(p=>n.includes(p));for(let p of h)e[this.componentMap[p]]=s}return e.group&&e.group===e.row&&delete e.row,e}bindComponents(t,e){var n=Object.keys(e).reverse(),s=this.listeners[t],l={};for(let u of n){let h,p=e[u],g=this.previousTargets[u];if(g&&g.target===p)h=g.component;else switch(u){case"row":case"group":(s.components.includes("row")||s.components.includes("cell"))&&(h=this.table.rowManager.getVisibleRows().find(C=>C.getElement()===p));break;case"column":s.components.includes("column")&&(h=this.table.columnManager.findColumn(p));break;case"cell":s.components.includes("cell")&&(h=e.row.findCell(p))}h&&(e[u]=h,l[u]={target:p,component:h})}return this.previousTargets=l,e}triggerEvents(t,e,n){var s=this.listeners[t];for(let l in n)n[l]&&s.components.includes(l)&&this.dispatch(l+"-"+t,e,n[l])}}class Wte{constructor(t){this.table=t,this.bindings={}}bind(t,e,n){this.bindings[t]||(this.bindings[t]={}),this.bindings[t][e]?console.warn("Unable to bind component handler, a matching function name is already bound",t,e,hanlder):this.bindings[t][e]=n}handle(t,e,n){if(this.bindings[t]&&this.bindings[t][n])return this.bindings[t][n].bind(null,e);"then"!==n&&"string"==typeof n&&!n.startsWith("_")&&console.error("The "+t+" component does not have a "+n+" function, have you checked that you have the correct Tabulator module installed?")}}class zte extends pl{constructor(t){super(t),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var t;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((t=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=t.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((t=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=t.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-loader"),t}createMsgElement(){var t=document.createElement("div");return t.classList.add("tabulator-loader-msg"),t.setAttribute("role","alert"),t}load(t,e,n,s,l){var u=++this.requestOrder;return this.dispatchExternal("dataLoading",t),t&&(0==t.indexOf("{")||0==t.indexOf("["))&&(t=JSON.parse(t)),this.confirm("data-loading",t,e,n,l)?(this.loading=!0,l||this.showLoader(),e=this.chain("data-params",[t,n,l],e||{},{}),e=this.mapParams(e,this.table.options.dataSendParams),this.chain("data-load",[t,e,n,l],Promise.resolve([])).then(g=>{!Array.isArray(g)&&"object"==typeof g&&(g=this.mapParams(g,this.objectInvert(this.table.options.dataReceiveParams)));var b=this.chain("data-loaded",g,null,g);u==this.requestOrder?(this.hideLoader(),!1!==b&&(this.dispatchExternal("dataLoaded",b),this.table.rowManager.setData(b,s,!s))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(g=>{console.error("Data Load Error: ",g),this.dispatchExternal("dataLoadError",g),l||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",t),t||(t=[]),this.table.rowManager.setData(t,s,!s),Promise.resolve())}mapParams(t,e){var n={};for(let s in t)n[e.hasOwnProperty(s)?e[s]:s]=t[s];return n}objectInvert(t){var e={};for(let n in t)e[t[n]]=n;return e}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class jte{constructor(t,e,n){this.table=t,this.events={},this.optionsList=e||{},this.subscriptionNotifiers={},this.dispatch=n?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=n}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifiySubscriptionChange(t,!0)}subscribe(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e),this._notifiySubscriptionChange(t,!0)}unsubscribe(t,e){var n;if(this.events[t]){if(e){if(!((n=this.events[t].findIndex(s=>s===e))>-1))return void console.warn("Cannot remove event, no matching event found:",t,e);this.events[t].splice(n,1)}else delete this.events[t];this._notifiySubscriptionChange(t,!1)}else console.warn("Cannot remove event, no events set on:",t)}subscribed(t){return this.events[t]&&this.events[t].length}_notifiySubscriptionChange(t,e){var n=this.subscriptionNotifiers[t];n&&n.forEach(s=>{s(e)})}_dispatch(){var n,t=Array.from(arguments),e=t.shift();return this.events[e]&&this.events[e].forEach((s,l)=>{let u=s.apply(this.table,t);l||(n=u)}),n}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="ExternalEvent:"+t[0],(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}}class Xte{constructor(t){this.events={},this.subscriptionNotifiers={},this.dispatch=t?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=t?this._debugChain.bind(this):this._chain.bind(this),this.confirm=t?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=t}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifiySubscriptionChange(t,!0)}subscribe(t,e,n=1e4){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:e,priority:n}),this.events[t].sort((s,l)=>s.priority-l.priority),this._notifiySubscriptionChange(t,!0)}unsubscribe(t,e){var n;if(this.events[t]){if(e){if(!((n=this.events[t].findIndex(s=>s.callback===e))>-1))return void console.warn("Cannot remove event, no matching event found:",t,e);this.events[t].splice(n,1)}this._notifiySubscriptionChange(t,!1)}else console.warn("Cannot remove event, no events set on:",t)}subscribed(t){return this.events[t]&&this.events[t].length}_chain(t,e,n,s){var l=n;return Array.isArray(e)||(e=[e]),this.subscribed(t)?(this.events[t].forEach((u,h)=>{l=u.callback.apply(this,e.concat([l]))}),l):"function"==typeof s?s():s}_confirm(t,e){var n=!1;return Array.isArray(e)||(e=[e]),this.subscribed(t)&&this.events[t].forEach((s,l)=>{s.callback.apply(this,e)&&(n=!0)}),n}_notifiySubscriptionChange(t,e){var n=this.subscriptionNotifiers[t];n&&n.forEach(s=>{s(e)})}_dispatch(){var t=Array.from(arguments),e=t.shift();this.events[e]&&this.events[e].forEach(n=>{n.callback.apply(this,t)})}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}_debugChain(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._chain(...arguments)}_debugConfirm(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._confirm(...arguments)}}let fC=(()=>{class r{static register(e){r.tables.push(e)}static deregister(e){var n=r.tables.indexOf(e);n>-1&&r.tables.splice(n,1)}static lookupTable(e,n){var l,u,s=[];if("string"==typeof e){if((l=document.querySelectorAll(e)).length)for(var h=0;h<l.length;h++)(u=r.matchElement(l[h]))&&s.push(u)}else"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e instanceof k_?(u=r.matchElement(e))&&s.push(u):Array.isArray(e)?e.forEach(function(p){s=s.concat(r.lookupTable(p))}):n||console.warn("Table Connection Error - Invalid Selector",e);return s}static matchElement(e){return r.tables.find(function(n){return e instanceof k_?n===e:n.element===e})}}return r.tables=[],r})();function FF(r){r.forEach(function(t){t.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var Jte={fitData:function(r){this.table.columnManager.renderer.reinitializeColumnWidths(r),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:FF,fitDataTable:FF,fitDataStretch:function(r){var t=0,e=this.table.rowManager.element.clientWidth,n=0,s=!1;r.forEach((l,u)=>{l.widthFixed||l.reinitializeWidth(),(this.table.options.responsiveLayout?l.modules.responsive.visible:l.visible)&&(s=l),l.visible&&(t+=l.getWidth())}),s?(n=e-t+s.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(s.setWidth(0),this.table.modules.responsiveLayout.update()),n>0?s.setWidth(n):s.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(r){var l,g,t=this.table.element.clientWidth,e=0,n=0,s=0,u=[],h=[],p=0,b=0;function C(x){return"string"==typeof x?x.indexOf("%")>-1?t/100*parseInt(x):parseInt(x):x}function w(x,N,B,V){var $=[],te=0,xe=0,Re=0,Pe=s,nt=0,ct=0,St=[];function At(Gt){return B*(Gt.column.definition.widthGrow||1)}function Cn(Gt){return C(Gt.width)-B*(Gt.column.definition.widthShrink||0)}return x.forEach(function(Gt,Mn){var qn=V?Cn(Gt):At(Gt);Gt.column.minWidth>=qn?$.push(Gt):Gt.column.maxWidth&&Gt.column.maxWidth<qn?(Gt.width=Gt.column.maxWidth,N-=Gt.column.maxWidth,(Pe-=V?Gt.column.definition.widthShrink||1:Gt.column.definition.widthGrow||1)&&(B=Math.floor(N/Pe))):(St.push(Gt),ct+=V?Gt.column.definition.widthShrink||1:Gt.column.definition.widthGrow||1)}),$.length?($.forEach(function(Gt){te+=V?Gt.width-Gt.column.minWidth:Gt.column.minWidth,Gt.width=Gt.column.minWidth}),nt=(xe=N-te)-(Re=ct?Math.floor(xe/ct):xe)*ct,nt+=w(St,xe,Re,V)):(nt=ct?N-Math.floor(N/ct)*ct:N,St.forEach(function(Gt){Gt.width=V?Cn(Gt):At(Gt)})),nt}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),r.forEach(function(x){var N,B,V;x.visible&&(N=x.definition.width,B=parseInt(x.minWidth),N?(V=C(N),e+=V>B?V:B,x.definition.widthShrink&&(h.push({column:x,width:V>B?V:B}),p+=x.definition.widthShrink)):(u.push({column:x,width:0}),s+=x.definition.widthGrow||1))}),n=t-e,l=Math.floor(n/s),b=w(u,n,l,!1),u.length&&b>0&&(u[u.length-1].width+=+b),u.forEach(function(x){n-=x.width}),(g=Math.abs(b)+n)>0&&p&&(b=w(h,g,Math.floor(g/p),!0)),h.length&&(h[h.length-1].width-=b),u.forEach(function(x){x.column.setWidth(x.width)}),h.forEach(function(x){x.column.setWidth(x.width)})}},Zte={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},qte=Object.freeze({__proto__:null,LayoutModule:(()=>{class r extends gi{constructor(e){super(e,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var e=this.table.options.layout;r.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){r.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return r.moduleName="layout",r.modes=Jte,r})(),LocalizeModule:(()=>{class r extends gi{constructor(e){super(e),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=gr.deepClone(r.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let e in this.table.options.langs)this.installLang(e,this.table.options.langs[e]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(e){this.langList.default.headerFilters.default=e}setHeaderFilterColumnPlaceholder(e,n){this.langList.default.headerFilters.columns[e]=n,this.lang&&!this.lang.headerFilters.columns[e]&&(this.lang.headerFilters.columns[e]=n)}installLang(e,n){this.langList[e]?this._setLangProp(this.langList[e],n):this.langList[e]=n}_setLangProp(e,n){for(let s in n)e[s]&&"object"==typeof e[s]?this._setLangProp(e[s],n[s]):e[s]=n[s]}setLocale(e){if(!0===(e=e||"default")&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langList[e]){let s=e.split("-")[0];this.langList[s]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,s),e=s):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=gr.deepClone(this.langList.default||{}),"default"!=e&&function n(s,l){for(var u in s)"object"==typeof s[u]?(l[u]||(l[u]={}),n(s[u],l[u])):l[u]=s[u]}(this.langList[e],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(e){return this.locale}getLang(e){return e?this.langList[e]:this.lang}getText(e,n){var s=(e=n?e+"|"+n:e).split("|");return this._getLangElement(s,this.locale)||""}_getLangElement(e,n){var s=this.lang;return e.forEach(function(l){var u;s&&(s=void 0!==(u=s[l])&&u)}),s}bind(e,n){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(n),n(this.getText(e),this.lang)}_executeBindings(){for(let e in this.bindings)this.bindings[e].forEach(n=>{n(this.getText(e),this.lang)})}}return r.moduleName="localize",r.langs=Zte,r})(),CommsModule:(()=>{class r extends gi{constructor(e){super(e)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(e){var n=[];return fC.lookupTable(e).forEach(l=>{this.table!==l&&n.push(l)}),n}send(e,n,s,l){var u=this.getConnections(e);u.forEach(h=>{h.tableComms(this.table.element,n,s,l)}),!u.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)}receive(e,n,s,l){if(this.table.modExists(n))return this.table.modules[n].commsReceived(e,s,l);console.warn("Inter-table Comms Error - no such module:",n)}}return r.moduleName="comms",r})()});class BF{constructor(t,e){this.bindStaticFuctionality(t),this.bindModules(t,qte,!0),e&&this.bindModules(t,e)}bindStaticFuctionality(t){t.moduleBindings={},t.extendModule=function(e,n,s){if(t.moduleBindings[e]){var l=t.moduleBindings[e][n];if(l)if("object"==typeof s)for(let u in s)l[u]=s[u];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",n)}else console.warn("Module Error - module does not exist:",e)},t.registerModule=function(e){Array.isArray(e)||(e=[e]),e.forEach(n=>{t.registerModuleBinding(n)})},t.registerModuleBinding=function(e){t.moduleBindings[e.moduleName]=e},t.findTable=function(e){var n=fC.lookupTable(e,!0);return!(Array.isArray(n)&&!n.length)&&n},t.prototype.bindModules=function(){for(var e in this.modules={},t.moduleBindings){let n=t.moduleBindings[e];this.modules[e]=new n(this),n.prototype.moduleCore?this.modulesCore[e]=this.modules[e]:this.modulesRegular[e]=this.modules[e]}}}bindModules(t,e,n){var s=Object.values(e);n&&s.forEach(l=>{l.prototype.moduleCore=!0}),t.registerModule(s)}}let k_=(()=>{class r{constructor(e,n){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new Wte(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new PF(this,"table constructor"),this.initialized=!1,this.initializeElement(e)&&(this.initialzeCoreSystems(n),setTimeout(()=>{this._create()})),fC.register(this)}initializeElement(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement?(this.element=e,!0):"string"==typeof e?(this.element=document.querySelector(e),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)}initialzeCoreSystems(e){this.columnManager=new Fte(this),this.rowManager=new Hte(this),this.footerManager=new Ute(this),this.dataLoader=new zte(this),this.bindModules(),this.options=this.optionsList.generate(r.defaultOptions,e),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new jte(this,this.options,this.options.debugEventsExternal),this.eventBus=new Xte(this.options.debugEventsInternal),this.interactionMonitor=new Gte(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==e.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var s,e=this.element,n=this.options;if("TABLE"===e.tagName){this.originalElement=this.element,s=document.createElement("div");var l=e.attributes;for(var u in l)"object"==typeof l[u]&&s.setAttribute(l[u].name,l[u].value);e.parentNode.replaceChild(s,e),this.element=e=s}for(e.classList.add("tabulator"),e.setAttribute("role","grid");e.firstChild;)e.removeChild(e.firstChild);n.height&&(n.height=isNaN(n.height)?n.height:n.height+"px",e.style.height=n.height),!1!==n.minHeight&&(n.minHeight=isNaN(n.minHeight)?n.minHeight:n.minHeight+"px",e.style.minHeight=n.minHeight),!1!==n.maxHeight&&(n.maxHeight=isNaN(n.maxHeight)?n.maxHeight:n.maxHeight+"px",e.style.maxHeight=n.maxHeight)}_initializeTable(){var e=this.element,n=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let u in this.modulesCore)this.modulesCore[u].initialize();if("string"==typeof n.placeholder){var s=document.createElement("div");s.classList.add("tabulator-placeholder");var l=document.createElement("span");l.innerHTML=n.placeholder,s.appendChild(l),n.placeholder=s}e.appendChild(this.columnManager.getElement()),e.appendChild(this.rowManager.getElement()),n.footerElement&&this.footerManager.activate(),n.autoColumns&&n.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let u in this.modulesRegular)this.modulesRegular[u].initialize();this.columnManager.setColumns(n.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var e=this.element;for(fC.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(n){n.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator")}_detectBrowser(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(e){return new Promise((n,s)=>{var l=document.createElement("input");l.type="file",l.accept=e||".json,application/json",l.addEventListener("change",u=>{var g,h=l.files[0],p=new FileReader;p.readAsText(h),p.onload=b=>{try{g=JSON.parse(p.result)}catch(C){return console.warn("File Load Error - File contents is invalid JSON",C),void s(C)}this.setData(g).then(C=>{n(C)}).catch(C=>{n(C)})},p.onerror=b=>{console.warn("File Load Error - Unable to read file"),s()}}),l.click()})}setData(e,n,s){if(this.initialized)return this.dataLoader.load(e,n,s,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(e){return this.rowManager.getData(e)}getDataCount(e){return this.rowManager.getDataCount(e)}replaceData(e,n,s){if(this.initialized)return this.dataLoader.load(e,n,s,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(e){var n=0;if(this.initialized)return new Promise((s,l)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(u=>{var h=this.rowManager.findRow(u[this.options.index]);h&&(n++,h.updateData(u).then(()=>{--n||s()}))}):(console.warn("Update Error - No data provided"),l("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(e,n,s){if(this.initialized)return new Promise((l,u)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?this.rowManager.addRows(e,n,s).then(h=>{var p=[];h.forEach(function(g){p.push(g.getComponent())}),l(p)}):(console.warn("Update Error - No data provided"),u("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(e){var n=[],s=0;if(this.initialized)return new Promise((l,u)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(h=>{var p=this.rowManager.findRow(h[this.options.index]);s++,p?p.updateData(h).then(()=>{s--,n.push(p.getComponent()),s||l(n)}):this.rowManager.addRows(h).then(g=>{s--,n.push(g[0].getComponent()),s||l(n)})}):(console.warn("Update Error - No data provided"),u("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(e){var n=this.rowManager.findRow(e);return n?n.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}getRowFromPosition(e,n){var s=this.rowManager.getRowFromPosition(e,n);return s?s.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}deleteRow(e){var n=[];Array.isArray(e)||(e=[e]);for(let s of e){let l=this.rowManager.findRow(s,!0);if(!l)return console.error("Delete Error - No matching row found:",s),Promise.reject("Delete Error - No matching row found");n.push(l)}return n.sort((s,l)=>this.rowManager.rows.indexOf(s)>this.rowManager.rows.indexOf(l)?1:-1),n.forEach(s=>{s.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(e,n,s){if(this.initialized)return"string"==typeof e&&(e=JSON.parse(e)),this.rowManager.addRows(e,n,s).then(l=>l[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(e,n){var s=this.rowManager.findRow(e);return"string"==typeof n&&(n=JSON.parse(n)),s?s.updateData(n).then(()=>s.getComponent()):this.rowManager.addRows(n).then(l=>l[0].getComponent())}updateRow(e,n){var s=this.rowManager.findRow(e);return"string"==typeof n&&(n=JSON.parse(n)),s?s.updateData(n).then(()=>{resolve(s.getComponent())}):(console.warn("Update Error - No matching row found:",e),Promise.reject("Update Error - No matching row found"))}scrollToRow(e,n,s){var l=this.rowManager.findRow(e);return l?this.rowManager.scrollToRow(l,n,s):(console.warn("Scroll Error - No matching row found:",e),Promise.reject("Scroll Error - No matching row found"))}moveRow(e,n,s){var l=this.rowManager.findRow(e);l?l.moveToRow(n,s):console.warn("Move Error - No matching row found:",e)}getRows(e){if(this.initialized)return this.rowManager.getComponents(e);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(e,n){var s=this.rowManager.findRow(e);return s?this.rowManager.getRowPosition(s,n):(console.warn("Position Error - No matching row found:",e),!1)}setColumns(e){this.initialized?this.columnManager.setColumns(e):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(e){return this.columnManager.getComponents(e)}getColumn(e){var n=this.columnManager.findColumn(e);return n?n.getComponent():(console.warn("Find Error - No matching column found:",e),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(e){var n=this.columnManager.findColumn(e);if(!n)return console.warn("Column Show Error - No matching column found:",e),!1;n.show()}hideColumn(e){var n=this.columnManager.findColumn(e);if(!n)return console.warn("Column Hide Error - No matching column found:",e),!1;n.hide()}toggleColumn(e){var n=this.columnManager.findColumn(e);if(!n)return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1;n.visible?n.hide():n.show()}addColumn(e,n,s){var l=this.columnManager.findColumn(s);return this.columnManager.addColumn(e,n,l).then(u=>u.getComponent())}deleteColumn(e){var n=this.columnManager.findColumn(e);return n?n.delete():(console.warn("Column Delete Error - No matching column found:",e),Promise.reject())}updateColumnDefinition(e,n){var s=this.columnManager.findColumn(e);return s?s.updateDefinition(n):(console.warn("Column Update Error - No matching column found:",e),Promise.reject())}moveColumn(e,n,s){var l=this.columnManager.findColumn(e),u=this.columnManager.findColumn(n);l?u?this.columnManager.moveColumn(l,u,s):console.warn("Move Error - No matching column found:",u):console.warn("Move Error - No matching column found:",e)}scrollToColumn(e,n,s){return new Promise((l,u)=>{var h=this.columnManager.findColumn(e);return h?this.columnManager.scrollToColumn(h,n,s):(console.warn("Scroll Error - No matching column found:",e),Promise.reject("Scroll Error - No matching column found"))})}redraw(e){this.initialized?(this.columnManager.redraw(e),this.rowManager.redraw(e)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(e){this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(e,n){this.externalEvents.subscribe(e,n)}off(e,n){this.externalEvents.unsubscribe(e,n)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(e,n){return!!this.modules[e]||(n&&console.error("Tabulator Module Not Installed: "+e),!1)}module(e){var n=this.modules[e];return n||console.error("Tabulator module not installed: "+e),n}}return r.defaultOptions=Nte,r})();new BF(k_),new BF(class extends k_{},kte);let tne=(()=>{class r{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null}get hot(){if(null!=this.hotInstance)return this.hotInstance;throw new Error("hot is null")}initGrid(e){this.hotInstance=new k_(e,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",footerElement:'<div>\n        \x3c!-- <a href="javascript:copyClip()">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href="javascript:copyCSV()">CSV</a>\n        --\x3e\n    </div>',placeholder:"please press execute button"}),this.hot.replaceData([]),this.hot.redraw(!0)}AddStringToGrid(e){var n;if(e.startsWith("{")&&e.endsWith("}"))try{var s=JSON.parse(e);return void this.objectsForGrid.push(s)}catch(h){}if(e.startsWith("[")&&e.endsWith("]"))try{for(var l=JSON.parse(e),u=0;u<l.length;u++)this.objectsForGrid.push(null===(n=l[u])||void 0===n?void 0:n.toString());return}catch(h){}this.stringsForGrid.push(e)}AddDataToGrid(e){return"string"==typeof e?(this.AddStringToGrid(null==e?void 0:e.toString()),void this.dataObject.push([null==e?void 0:e.toString()])):"object"==typeof e?(console.log("adding object to grid"),this.AddStringToGrid(JSON.stringify(e)),void this.dataObject.push([e])):(this.dataObject.push([e.ToString()]),void this.AddStringToGrid(e.toString()))}ClearDataGrid(){this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(e,n){return null!=e&&e.hasOwnProperty(n)}AddObjectToFinishGrid(){for(var e=[],n=this.objectsForGrid,s=0;s<n.length;s++)"string"==typeof(l=n[s])?e.push("_"):e.push(...Object.keys(l));var u=new Set(e);e=Array.from(u);var h=[...e],p=[];for(s=0;s<n.length;s++){for(var l=n[s],g={Nr:s+1},b=0;b<e.length;b++){var C=e[b],w=this.goodNameForKey(C);if(l&&this.hasOwnProperty(l,C)){var x=l[C];g[w]="object"==typeof x?JSON.stringify(x):x}else g[w]="string"==typeof l&&0===b?l:""}p.push(g)}e.splice(0,0,"Nr"),h.splice(0,0,"Nr");var N=this.Headers(h);this.hot.setColumns(N),this.hot.replaceData(p)}Headers(e){return e.map(n=>({title:n,field:this.goodNameForKey(n)}))}AddStringToFinishGrid(){for(var e=[],n=0;n<this.stringsForGrid.length;n++)e.push({Nr:n+1,Text:this.stringsForGrid[n]});var l=this.Headers(["Nr","Text"]);this.hot.setColumns(l),this.hot.replaceData(e)}FinishGrid(){this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),this.hot.redraw(!0))}goodNameForKey(e){var n=e;return n.replace(".","_")}copyClip(){this.hot.copyToClipboard("all")}copyCSV(){this.hot.download("csv","data.csv",{bom:!0})}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class ine{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new rne(t,this.resultSelector))}}class rne extends H{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;d(t)?e.push(new sne(t)):e.push("function"==typeof t[Ue]?new one(t[Ue]()):new ane(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let s=t[n];s.stillUnsubscribed?this.destination.add(s.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let u=0;u<e;u++){let h=t[u];if("function"==typeof h.hasValue&&!h.hasValue())return}let s=!1;const l=[];for(let u=0;u<e;u++){let h=t[u],p=h.next();if(h.hasCompleted()&&(s=!0),p.done)return void n.complete();l.push(p.value)}this.resultSelector?this._tryresultSelector(l):n.next(l),s&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class one{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class sne{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[Ue](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class ane extends mn{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[Ue](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return An(this.observable,new Ke(this))}}class lne extends D{constructor(t,e){super()}schedule(t,e=0){return this}}class gC extends lne{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,s=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(s,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let s,n=!1;try{this.work(t)}catch(l){n=!0,s=!!l&&l||new Error(l)}if(n)return this.unsubscribe(),s}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,s=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&n.splice(s,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let VF=(()=>{class r{constructor(e,n=r.now){this.SchedulerAction=e,this.now=n}schedule(e,n=0,s){return new this.SchedulerAction(this,e).schedule(s,n)}}return r.now=()=>Date.now(),r})();class fl extends VF{constructor(t,e=VF.now){super(t,()=>fl.delegate&&fl.delegate!==this?fl.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return fl.delegate&&fl.delegate!==this?fl.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const mC=new fl(gC);function HF(r,t){return new q(t?e=>t.schedule(une,0,{error:r,subscriber:e}):e=>e.error(r))}function une({error:r,subscriber:t}){t.error(r)}class Ps{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return an(this.value);case"E":return HF(this.error);case"C":return uy()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new Ps("N",t):Ps.undefinedValueNotification}static createError(t){return new Ps("E",void 0,t)}static createComplete(){return Ps.completeNotification}}function _C(r,t=mC){const n=function(r){return r instanceof Date&&!isNaN(+r)}(r)?+r-t.now():Math.abs(r);return s=>s.lift(new dne(n,t))}Ps.completeNotification=new Ps("C"),Ps.undefinedValueNotification=new Ps("N",void 0);class dne{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new lD(t,this.delay,this.scheduler))}}class lD extends H{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,s=t.scheduler,l=t.destination;for(;n.length>0&&n[0].time-s.now()<=0;)n.shift().notification.observe(l);if(n.length>0){const u=Math.max(0,n[0].time-s.now());this.schedule(t,u)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(lD.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new hne(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(Ps.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(Ps.createComplete()),this.unsubscribe()}}class hne{constructor(t,e){this.time=t,this.notification=e}}class UF{}class GF{}class Qc{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const s=e.slice(0,n),l=s.toLowerCase(),u=e.slice(n+1).trim();this.maybeSetNormalizedName(s,l),this.headers.has(l)?this.headers.get(l).push(u):this.headers.set(l,[u])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const s=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(s,n),this.maybeSetNormalizedName(e,s))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Qc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Qc;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Qc?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const s=("a"===t.op?this.headers.get(e):void 0)||[];s.push(...n),this.headers.set(e,s);break;case"d":const l=t.value;if(l){let u=this.headers.get(e);if(!u)return;u=u.filter(h=>-1===l.indexOf(h)),0===u.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,u)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class pne{encodeKey(t){return WF(t)}encodeValue(t){return WF(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const gne=/%(\d[a-f0-9])/gi,mne={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function WF(r){return encodeURIComponent(r).replace(gne,(t,e)=>{var n;return null!==(n=mne[e])&&void 0!==n?n:t})}function zF(r){return`${r}`}class ld{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new pne,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(r,t){const e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(s=>{const l=s.indexOf("="),[u,h]=-1==l?[t.decodeKey(s),""]:[t.decodeKey(s.slice(0,l)),t.decodeValue(s.slice(l+1))],p=e.get(u)||[];p.push(h),e.set(u,p)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const s=t[n];Array.isArray(s)?s.forEach(l=>{e.push({param:n,value:l,op:"a"})}):e.push({param:n,value:s,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new ld({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(zF(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const s=n.indexOf(zF(t.value));-1!==s&&n.splice(s,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class _ne{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function jF(r){return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer}function XF(r){return"undefined"!=typeof Blob&&r instanceof Blob}function YF(r){return"undefined"!=typeof FormData&&r instanceof FormData}class N_{constructor(t,e,n,s){let l;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==n?n:null,l=s):l=n,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new Qc),this.context||(this.context=new _ne),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=e;else{const h=e.indexOf("?");this.urlWithParams=e+(-1===h?"?":h<e.length-1?"&":"")+u}}else this.params=new ld,this.urlWithParams=e}serializeBody(){return null===this.body?null:jF(this.body)||XF(this.body)||YF(this.body)||function(r){return"undefined"!=typeof URLSearchParams&&r instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ld?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||YF(this.body)?null:XF(this.body)?this.body.type||null:jF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ld?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,s=t.url||this.url,l=t.responseType||this.responseType,u=void 0!==t.body?t.body:this.body,h=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,p=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let g=t.headers||this.headers,b=t.params||this.params;const C=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(g=Object.keys(t.setHeaders).reduce((w,x)=>w.set(x,t.setHeaders[x]),g)),t.setParams&&(b=Object.keys(t.setParams).reduce((w,x)=>w.set(x,t.setParams[x]),b)),new N_(n,s,u,{params:b,headers:g,context:C,reportProgress:p,responseType:l,withCredentials:h})}}var Zr=(()=>((Zr=Zr||{})[Zr.Sent=0]="Sent",Zr[Zr.UploadProgress=1]="UploadProgress",Zr[Zr.ResponseHeader=2]="ResponseHeader",Zr[Zr.DownloadProgress=3]="DownloadProgress",Zr[Zr.Response=4]="Response",Zr[Zr.User=5]="User",Zr))();class cD{constructor(t,e=200,n="OK"){this.headers=t.headers||new Qc,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class uD extends cD{constructor(t={}){super(t),this.type=Zr.ResponseHeader}clone(t={}){return new uD({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class vC extends cD{constructor(t={}){super(t),this.type=Zr.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new vC({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class $F extends cD{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function dD(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let qf=(()=>{class r{constructor(e){this.handler=e}request(e,n,s={}){let l;if(e instanceof N_)l=e;else{let p,g;p=s.headers instanceof Qc?s.headers:new Qc(s.headers),s.params&&(g=s.params instanceof ld?s.params:new ld({fromObject:s.params})),l=new N_(e,n,void 0!==s.body?s.body:null,{headers:p,context:s.context,params:g,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const u=an(l).pipe(Hf(p=>this.handler.handle(p)));if(e instanceof N_||"events"===s.observe)return u;const h=u.pipe(yi(p=>p instanceof vC));switch(s.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return h.pipe(ye(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe(ye(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe(ye(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));case"json":default:return h.pipe(ye(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new ld).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,s={}){return this.request("PATCH",e,dD(s,n))}post(e,n,s={}){return this.request("POST",e,dD(s,n))}put(e,n,s={}){return this.request("PUT",e,dD(s,n))}}return r.\u0275fac=function(e){return new(e||r)(be(UF))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();class KF{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const JF=new je("HTTP_INTERCEPTORS");let yne=(()=>{class r{intercept(e,n){return n.handle(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const Cne=/^\)\]\}',?\n/;let QF=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new q(n=>{const s=this.xhrFactory.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((x,N)=>s.setRequestHeader(x,N.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const x=e.detectContentTypeHeader();null!==x&&s.setRequestHeader("Content-Type",x)}if(e.responseType){const x=e.responseType.toLowerCase();s.responseType="json"!==x?x:"text"}const l=e.serializeBody();let u=null;const h=()=>{if(null!==u)return u;const x=1223===s.status?204:s.status,N=s.statusText||"OK",B=new Qc(s.getAllResponseHeaders()),V=function(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(s)||e.url;return u=new uD({headers:B,status:x,statusText:N,url:V}),u},p=()=>{let{headers:x,status:N,statusText:B,url:V}=h(),$=null;204!==N&&($=void 0===s.response?s.responseText:s.response),0===N&&(N=$?200:0);let te=N>=200&&N<300;if("json"===e.responseType&&"string"==typeof $){const xe=$;$=$.replace(Cne,"");try{$=""!==$?JSON.parse($):null}catch(Re){$=xe,te&&(te=!1,$={error:Re,text:$})}}te?(n.next(new vC({body:$,headers:x,status:N,statusText:B,url:V||void 0})),n.complete()):n.error(new $F({error:$,headers:x,status:N,statusText:B,url:V||void 0}))},g=x=>{const{url:N}=h(),B=new $F({error:x,status:s.status||0,statusText:s.statusText||"Unknown Error",url:N||void 0});n.error(B)};let b=!1;const C=x=>{b||(n.next(h()),b=!0);let N={type:Zr.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(N.total=x.total),"text"===e.responseType&&!!s.responseText&&(N.partialText=s.responseText),n.next(N)},w=x=>{let N={type:Zr.UploadProgress,loaded:x.loaded};x.lengthComputable&&(N.total=x.total),n.next(N)};return s.addEventListener("load",p),s.addEventListener("error",g),s.addEventListener("timeout",g),s.addEventListener("abort",g),e.reportProgress&&(s.addEventListener("progress",C),null!==l&&s.upload&&s.upload.addEventListener("progress",w)),s.send(l),n.next({type:Zr.Sent}),()=>{s.removeEventListener("error",g),s.removeEventListener("abort",g),s.removeEventListener("load",p),s.removeEventListener("timeout",g),e.reportProgress&&(s.removeEventListener("progress",C),null!==l&&s.upload&&s.upload.removeEventListener("progress",w)),s.readyState!==s.DONE&&s.abort()}})}}return r.\u0275fac=function(e){return new(e||r)(be(e1))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const hD=new je("XSRF_COOKIE_NAME"),pD=new je("XSRF_HEADER_NAME");class ZF{}let Tne=(()=>{class r{constructor(e,n,s){this.doc=e,this.platform=n,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=jk(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return r.\u0275fac=function(e){return new(e||r)(be(Ut),be(kf),be(hD))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),fD=(()=>{class r{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const s=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||s.startsWith("http://")||s.startsWith("https://"))return n.handle(e);const l=this.tokenService.getToken();return null!==l&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,l)})),n.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(be(ZF),be(pD))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),wne=(()=>{class r{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const n=this.injector.get(JF,[]);this.chain=n.reduceRight((s,l)=>new KF(s,l),this.backend)}return this.chain.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(be(GF),be(Yn))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),Sne=(()=>{class r{static disable(){return{ngModule:r,providers:[{provide:fD,useClass:yne}]}}static withOptions(e={}){return{ngModule:r,providers:[e.cookieName?{provide:hD,useValue:e.cookieName}:[],e.headerName?{provide:pD,useValue:e.headerName}:[]]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[fD,{provide:JF,useExisting:fD,multi:!0},{provide:ZF,useClass:Tne},{provide:hD,useValue:"XSRF-TOKEN"},{provide:pD,useValue:"X-XSRF-TOKEN"}]}),r})(),Mne=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[qf,{provide:UF,useClass:wne},QF,{provide:GF,useExisting:QF}],imports:[[Sne.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),r})(),qF=(()=>{class r{constructor(e){this.http=e}getDemoBlocks(){var e=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/all.txt?${e}`,{responseType:"text"}).pipe(ye(n=>JSON.parse(n)))}getSwaggerLinks(){var e=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/swaggers.json?${e}`,{responseType:"text"}).pipe(ye(n=>JSON.parse(n)))}getDemoBlock(e){var n=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/${e}.txt?${n}`,{responseType:"text"}).pipe(Qr(l=>{}),ye(l=>l.toString()))}}return r.\u0275fac=function(e){return new(e||r)(be(qf))},r.\u0275prov=Et({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),L_=(()=>{class r{constructor(e,n){this.http=e,this.loadShowUsageService=n,this.settings=null,this.links=[],this.demoBlocks=[],this.Init()}Init(){return function(...r){const t=r[r.length-1];return"function"==typeof t&&r.pop(),Tn(r,void 0).lift(new ine(t))}(this.getSettings(),this.loadShowUsageService.getSwaggerLinks(),this.loadShowUsageService.getDemoBlocks()).pipe(_C(2e3),Qr(([e,n,s])=>{this.settings=e,this.links=n,this.demoBlocks=s}),Oo(()=>an("")))}getSettings(){var e=(new Date).toISOString();return this.http.get(`assets/settings.json?${e}`,{responseType:"text"}).pipe(ye(n=>JSON.parse(n)))}}return r.\u0275fac=function(e){return new(e||r)(be(qf),be(qF))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),gD=(()=>{class r{constructor(){this.sendData=new j}receiveData(){return this.sendData.asObservable()}sendDataToServer(e,n){this.sendData.next([e,n])}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function bt(r){return null!=r&&"false"!=`${r}`}function mi(r,t=0){return function(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}(r)?Number(r):t}function bC(r){return Array.isArray(r)?r:[r]}function qr(r){return null==r?"":"string"==typeof r?r:`${r}px`}function Zc(r){return r instanceof qe?r.nativeElement:r}function Fs(r,t,e,n){return E(e)&&(n=e,e=void 0),n?Fs(r,t,e).pipe(ye(s=>d(s)?n(...s):n(s))):new q(s=>{tB(r,t,function(u){s.next(arguments.length>1?Array.prototype.slice.call(arguments):u)},s,e)})}function tB(r,t,e,n,s){let l;if(function(r){return r&&"function"==typeof r.addEventListener&&"function"==typeof r.removeEventListener}(r)){const u=r;r.addEventListener(t,e,s),l=()=>u.removeEventListener(t,e,s)}else if(function(r){return r&&"function"==typeof r.on&&"function"==typeof r.off}(r)){const u=r;r.on(t,e),l=()=>u.off(t,e)}else if(function(r){return r&&"function"==typeof r.addListener&&"function"==typeof r.removeListener}(r)){const u=r;r.addListener(t,e),l=()=>u.removeListener(t,e)}else{if(!r||!r.length)throw new TypeError("Invalid event target");for(let u=0,h=r.length;u<h;u++)tB(r[u],t,e,n,s)}n.add(l)}new class extends fl{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,s=-1,l=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++s<l&&(t=e.shift()));if(this.active=!1,n){for(;++s<l&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends gC{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}});let Nne=1;const Lne=Promise.resolve(),yC={};function nB(r){return r in yC&&(delete yC[r],!0)}const iB={setImmediate(r){const t=Nne++;return yC[t]=!0,Lne.then(()=>nB(t)&&r()),t},clearImmediate(r){nB(r)}},mD=new class extends fl{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,s=-1,l=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++s<l&&(t=e.shift()));if(this.active=!1,n){for(;++s<l&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends gC{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=iB.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(iB.clearImmediate(e),t.scheduled=void 0)}});function Yh(r,t){return e=>e.lift(new Bne(r,t))}class Bne{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Vne(t,this.compare,this.keySelector))}}class Vne extends H{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:s}=this;e=s?s(t):t}catch(s){return this.destination.error(s)}let n=!1;if(this.hasKey)try{const{compare:s}=this;n=s(this.key,e)}catch(s){return this.destination.error(s)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class Une{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new Gne(t,this.durationSelector))}}class Gne extends mn{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let e;try{const{durationSelector:s}=this;e=s(t)}catch(s){return this.destination.error(s)}const n=An(e,new Ke(this));!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function rB(r){return!d(r)&&r-parseFloat(r)+1>=0}function Wne(r){const{index:t,period:e,subscriber:n}=r;if(n.next(t),!n.closed){if(-1===e)return n.complete();r.index=t+1,this.schedule(r,e)}}function CC(r,t=mC){return function(r){return function(e){return e.lift(new Une(r))}}(()=>function(r=0,t,e){let n=-1;return rB(t)?n=Number(t)<1?1:Number(t):de(t)&&(e=t),de(e)||(e=mC),new q(s=>{const l=rB(r)?r:+r-e.now();return e.schedule(Wne,l,{index:0,period:n,subscriber:s})})}(r,t))}function un(r){return t=>t.lift(new zne(r))}class zne{constructor(t){this.notifier=t}call(t,e){const n=new jne(t),s=An(this.notifier,new Ke(n));return s&&!n.seenValue?(n.add(s),e.subscribe(n)):n}}class jne extends mn{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const Qne=new class extends fl{}(class extends gC{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}});class EC extends H{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(EC.dispatch,this.delay,new qne(t,this.destination)))}_next(t){this.scheduleMessage(Ps.createNext(t))}_error(t){this.scheduleMessage(Ps.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(Ps.createComplete()),this.unsubscribe()}}class qne{constructor(t,e){this.notification=t,this.destination=e}}class eie extends j{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new tie(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,l=n.length;let u;if(this.closed)throw new G;if(this.isStopped||this.hasError?u=D.EMPTY:(this.observers.push(t),u=new fe(this,t)),s&&t.add(t=new EC(t,s)),e)for(let h=0;h<l&&!t.closed;h++)t.next(n[h]);else for(let h=0;h<l&&!t.closed;h++)t.next(n[h].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),u}_getNow(){return(this.scheduler||Qne).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,s=this._events,l=s.length;let u=0;for(;u<l&&!(t-s[u].time<n);)u++;return l>e&&(u=Math.max(u,l-e)),u>0&&s.splice(0,u),s}}class tie{constructor(t,e){this.time=t,this.value=e}}let _D;try{_D="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(r){_D=!1}let F_,TC,$h,vD,jn=(()=>{class r{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function(r){return r===Qk}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!_D)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return r.\u0275fac=function(e){return new(e||r)(be(kf))},r.\u0275prov=Et({factory:function(){return new r(be(kf))},token:r,providedIn:"root"}),r})(),eg=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({}),r})();function cd(r){return function(){if(null==F_&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>F_=!0}))}finally{F_=F_||!1}return F_}()?r:!!r.capture}function cB(){if(null==$h){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return $h=!1,$h;if("scrollBehavior"in document.documentElement.style)$h=!0;else{const r=Element.prototype.scrollTo;$h=!!r&&!/\{\s*\[native code\]\s*\}/.test(r.toString())}}return $h}function B_(){if("object"!=typeof document||!document)return 0;if(null==TC){const r=document.createElement("div"),t=r.style;r.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",r.appendChild(e),document.body.appendChild(r),TC=0,0===r.scrollLeft&&(r.scrollLeft=1,TC=0===r.scrollLeft?1:2),r.parentNode.removeChild(r)}return TC}function uB(r){if(function(){if(null==vD){const r="undefined"!=typeof document?document.head:null;vD=!(!r||!r.createShadowRoot&&!r.attachShadow)}return vD}()){const t=r.getRootNode?r.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function qc(){let r="undefined"!=typeof document&&document?document.activeElement:null;for(;r&&r.shadowRoot;){const t=r.shadowRoot.activeElement;if(t===r)break;r=t}return r}function ud(r){return r.composedPath?r.composedPath()[0]:r.target}function bD(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const dB=new je("cdk-dir-doc",{providedIn:"root",factory:function(){return lh(Ut)}});let Ii=(()=>{class r{constructor(e){if(this.value="ltr",this.change=new st,e){const s=e.documentElement?e.documentElement.dir:null,l=(e.body?e.body.dir:null)||s;this.value="ltr"===l||"rtl"===l?l:"ltr"}}ngOnDestroy(){this.change.complete()}}return r.\u0275fac=function(e){return new(e||r)(be(dB,8))},r.\u0275prov=Et({factory:function(){return new r(be(dB,8))},token:r,providedIn:"root"}),r})(),ng=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({}),r})(),wC=(()=>{class r{constructor(){this._listeners=[]}notify(e,n){for(let s of this._listeners)s(e,n)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(n=>e!==n)}}ngOnDestroy(){this._listeners=[]}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({factory:function(){return new r},token:r,providedIn:"root"}),r})(),dd=(()=>{class r{constructor(e,n,s){this._ngZone=e,this._platform=n,this._scrolled=new j,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new q(n=>{this._globalSubscription||this._addGlobalListener();const s=e>0?this._scrolled.pipe(CC(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):an()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const s=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(yi(l=>!l||s.indexOf(l)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((s,l)=>{this._scrollableContainsElement(l,e)&&n.push(l)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let s=Zc(n),l=e.getElementRef().nativeElement;do{if(s==l)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Fs(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return r.\u0275fac=function(e){return new(e||r)(be(Xt),be(jn),be(Ut,8))},r.\u0275prov=Et({factory:function(){return new r(be(Xt),be(jn),be(Ut,8))},token:r,providedIn:"root"}),r})(),ig=(()=>{class r{constructor(e,n,s,l){this.elementRef=e,this.scrollDispatcher=n,this.ngZone=s,this.dir=l,this._destroyed=new j,this._elementScrolled=new q(u=>this.ngZone.runOutsideAngular(()=>Fs(this.elementRef.nativeElement,"scroll").pipe(un(this._destroyed)).subscribe(u)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const n=this.elementRef.nativeElement,s=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=s?e.end:e.start),null==e.right&&(e.right=s?e.start:e.end),null!=e.bottom&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),s&&0!=B_()?(null!=e.left&&(e.right=n.scrollWidth-n.clientWidth-e.left),2==B_()?e.left=e.right:1==B_()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const n=this.elementRef.nativeElement;cB()?n.scrollTo(e):(null!=e.top&&(n.scrollTop=e.top),null!=e.left&&(n.scrollLeft=e.left))}measureScrollOffset(e){const n="left",s="right",l=this.elementRef.nativeElement;if("top"==e)return l.scrollTop;if("bottom"==e)return l.scrollHeight-l.clientHeight-l.scrollTop;const u=this.dir&&"rtl"==this.dir.value;return"start"==e?e=u?s:n:"end"==e&&(e=u?n:s),u&&2==B_()?e==n?l.scrollWidth-l.clientWidth-l.scrollLeft:l.scrollLeft:u&&1==B_()?e==n?l.scrollLeft+l.scrollWidth-l.clientWidth:-l.scrollLeft:e==n?l.scrollLeft:l.scrollWidth-l.clientWidth-l.scrollLeft}}return r.\u0275fac=function(e){return new(e||r)(k(qe),k(dd),k(Xt),k(Ii,8))},r.\u0275dir=Te({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),r})(),Bs=(()=>{class r{constructor(e,n,s){this._platform=e,this._change=new j,this._changeListener=l=>{this._change.next(l)},this._document=s,n.runOutsideAngular(()=>{if(e.isBrowser){const l=this._getWindow();l.addEventListener("resize",this._changeListener),l.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:s}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+s,right:e.left+n,height:s,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),s=e.documentElement,l=s.getBoundingClientRect();return{top:-l.top||e.body.scrollTop||n.scrollY||s.scrollTop||0,left:-l.left||e.body.scrollLeft||n.scrollX||s.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(CC(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return r.\u0275fac=function(e){return new(e||r)(be(jn),be(Xt),be(Ut,8))},r.\u0275prov=Et({factory:function(){return new r(be(jn),be(Xt),be(Ut,8))},token:r,providedIn:"root"}),r})(),eu=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({}),r})(),CD=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[ng,eg,eu],ng,eu]}),r})();class ED{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class hd extends ED{constructor(t,e,n,s){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=s}}class Sa extends ED{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class _ie extends ED{constructor(t){super(),this.element=t instanceof qe?t.nativeElement:t}}class U_{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof hd?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Sa?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof _ie?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class gB extends U_{constructor(t,e,n,s,l){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=s,this.attachDomPortal=u=>{const h=u.element,p=this._document.createComment("dom-portal");h.parentNode.insertBefore(p,h),this.outletElement.appendChild(h),this._attachedPortal=u,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(h,p)})},this._document=l}attachComponentPortal(t){const n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let s;return t.viewContainerRef?(s=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>s.destroy())):(s=n.create(t.injector||this._defaultInjector),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=t,s}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(s=>this.outletElement.appendChild(s)),n.detectChanges(),this.setDisposeFn(()=>{let s=e.indexOf(n);-1!==s&&e.remove(s)}),this._attachedPortal=t,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let gs=(()=>{class r extends U_{constructor(e,n,s){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new st,this.attachDomPortal=l=>{const u=l.element,h=this._document.createComment("dom-portal");l.setAttachedHost(this),u.parentNode.insertBefore(h,u),this._getRootNode().appendChild(u),this._attachedPortal=l,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(u,h)})},this._document=s}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,l=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),u=n.createComponent(l,n.length,e.injector||n.injector);return n!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=e,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(e){e.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return r.\u0275fac=function(e){return new(e||r)(k(nl),k(bi),k(Ut))},r.\u0275dir=Te({type:r,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[He]}),r})(),pd=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({}),r})();function Er(r,...t){return t.length?t.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}const mB=cB();class Iie{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=qr(-this._previousScrollPosition.left),t.style.top=qr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,n=t.style,s=this._document.body.style,l=n.scrollBehavior||"",u=s.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),mB&&(n.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),mB&&(n.scrollBehavior=l,s.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class Aie{constructor(t,e,n,s){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class _B{enable(){}disable(){}attach(){}}function MD(r,t){return t.some(e=>r.bottom<e.top||r.top>e.bottom||r.right<e.left||r.left>e.right)}function vB(r,t){return t.some(e=>r.top<e.top||r.bottom>e.bottom||r.left<e.left||r.right>e.right)}class Oie{constructor(t,e,n,s){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=s,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:s}=this._viewportRuler.getViewportSize();MD(e,[{width:n,height:s,bottom:s,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let kie=(()=>{class r{constructor(e,n,s,l){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=s,this.noop=()=>new _B,this.close=u=>new Aie(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new Iie(this._viewportRuler,this._document),this.reposition=u=>new Oie(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=l}}return r.\u0275fac=function(e){return new(e||r)(be(dd),be(Bs),be(Xt),be(Ut))},r.\u0275prov=Et({factory:function(){return new r(be(dd),be(Bs),be(Xt),be(Ut))},token:r,providedIn:"root"}),r})();class Jh{constructor(t){if(this.scrollStrategy=new _B,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class Nie{constructor(t,e,n,s,l){this.offsetX=n,this.offsetY=s,this.panelClass=l,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class Lie{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let bB=(()=>{class r{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return r.\u0275fac=function(e){return new(e||r)(be(Ut))},r.\u0275prov=Et({factory:function(){return new r(be(Ut))},token:r,providedIn:"root"}),r})(),Pie=(()=>{class r extends bB{constructor(e){super(e),this._keydownListener=n=>{const s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){s[l]._keydownEvents.next(n);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return r.\u0275fac=function(e){return new(e||r)(be(Ut))},r.\u0275prov=Et({factory:function(){return new r(be(Ut))},token:r,providedIn:"root"}),r})(),Fie=(()=>{class r extends bB{constructor(e,n){super(e),this._platform=n,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=ud(s)},this._clickListener=s=>{const l=ud(s),u="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const h=this._attachedOverlays.slice();for(let p=h.length-1;p>-1;p--){const g=h[p];if(!(g._outsidePointerEvents.observers.length<1)&&g.hasAttached()){if(g.overlayElement.contains(l)||g.overlayElement.contains(u))break;g._outsidePointerEvents.next(s)}}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;n.addEventListener("pointerdown",this._pointerDownListener,!0),n.addEventListener("click",this._clickListener,!0),n.addEventListener("auxclick",this._clickListener,!0),n.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return r.\u0275fac=function(e){return new(e||r)(be(Ut),be(jn))},r.\u0275prov=Et({factory:function(){return new r(be(Ut),be(jn))},token:r,providedIn:"root"}),r})(),z_=(()=>{class r{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||bD()){const s=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let l=0;l<s.length;l++)s[l].parentNode.removeChild(s[l])}const n=this._document.createElement("div");n.classList.add(e),bD()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return r.\u0275fac=function(e){return new(e||r)(be(Ut),be(jn))},r.\u0275prov=Et({factory:function(){return new r(be(Ut),be(jn))},token:r,providedIn:"root"}),r})();class Bie{constructor(t,e,n,s,l,u,h,p,g){this._portalOutlet=t,this._host=e,this._pane=n,this._config=s,this._ngZone=l,this._keyboardDispatcher=u,this._document=h,this._location=p,this._outsideClickDispatcher=g,this._backdropElement=null,this._backdropClick=new j,this._attachments=new j,this._detachments=new j,this._locationChanges=D.EMPTY,this._backdropClickHandler=b=>this._backdropClick.next(b),this._keydownEvents=new j,this._outsidePointerEvents=new j,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Fi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=qr(this._config.width),t.height=qr(this._config.height),t.minWidth=qr(this._config.minWidth),t.minHeight=qr(this._config.minHeight),t.maxWidth=qr(this._config.maxWidth),t.maxHeight=qr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(!t)return;let e;const n=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",n),this._disposeBackdrop(t)),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",n)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const s=t.classList;bC(e).forEach(l=>{l&&(n?s.add(l):s.remove(l))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(un(qt(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.parentNode&&t.parentNode.removeChild(t),this._backdropElement===t&&(this._backdropElement=null))}}const yB="cdk-overlay-connected-position-bounding-box",Vie=/([A-Za-z%]+)$/;class DD{constructor(t,e,n,s,l){this._viewportRuler=e,this._document=n,this._platform=s,this._overlayContainer=l,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new j,this._resizeSubscription=D.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(yB),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,s=[];let l;for(let u of this._preferredPositions){let h=this._getOriginPoint(t,u),p=this._getOverlayPoint(h,e,u),g=this._getOverlayFit(p,e,n,u);if(g.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(u,h);this._canFitWithFlexibleDimensions(g,p,n)?s.push({position:u,origin:h,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(h,u)}):(!l||l.overlayFit.visibleArea<g.visibleArea)&&(l={overlayFit:g,overlayPoint:p,originPoint:h,position:u,overlayRect:e})}if(s.length){let u=null,h=-1;for(const p of s){const g=p.boundingBoxRect.width*p.boundingBoxRect.height*(p.position.weight||1);g>h&&(h=g,u=p)}return this._isPushed=!1,void this._applyPosition(u.position,u.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Qh(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(yB),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,s;if("center"==e.originX)n=t.left+t.width/2;else{const l=this._isRtl()?t.right:t.left,u=this._isRtl()?t.left:t.right;n="start"==e.originX?l:u}return s="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:s}}_getOverlayPoint(t,e,n){let s,l;return s="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,l="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+s,y:t.y+l}}_getOverlayFit(t,e,n,s){const l=EB(e);let{x:u,y:h}=t,p=this._getOffset(s,"x"),g=this._getOffset(s,"y");p&&(u+=p),g&&(h+=g);let w=0-h,x=h+l.height-n.height,N=this._subtractOverflows(l.width,0-u,u+l.width-n.width),B=this._subtractOverflows(l.height,w,x),V=N*B;return{visibleArea:V,isCompletelyWithinViewport:l.width*l.height===V,fitsInViewportVertically:B===l.height,fitsInViewportHorizontally:N==l.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const s=n.bottom-e.y,l=n.right-e.x,u=CB(this._overlayRef.getConfig().minHeight),h=CB(this._overlayRef.getConfig().minWidth),g=t.fitsInViewportHorizontally||null!=h&&h<=l;return(t.fitsInViewportVertically||null!=u&&u<=s)&&g}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const s=EB(e),l=this._viewportRect,u=Math.max(t.x+s.width-l.width,0),h=Math.max(t.y+s.height-l.height,0),p=Math.max(l.top-n.top-t.y,0),g=Math.max(l.left-n.left-t.x,0);let b=0,C=0;return b=s.width<=l.width?g||-u:t.x<this._viewportMargin?l.left-n.left-t.x:0,C=s.height<=l.height?p||-h:t.y<this._viewportMargin?l.top-n.top-t.y:0,this._previousPushAmount={x:b,y:C},{x:t.x+b,y:t.y+C}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const n=this._getScrollVisibility(),s=new Lie(t,n);this._positionChanges.next(s)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,s=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let l=0;l<e.length;l++)e[l].style.transformOrigin=`${n} ${s}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,s=this._isRtl();let l,u,h,b,C,w;if("top"===e.overlayY)u=t.y,l=n.height-u+this._viewportMargin;else if("bottom"===e.overlayY)h=n.height-t.y+2*this._viewportMargin,l=n.height-h+this._viewportMargin;else{const x=Math.min(n.bottom-t.y+n.top,t.y),N=this._lastBoundingBoxSize.height;l=2*x,u=t.y-x,l>N&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.y-N/2)}if("end"===e.overlayX&&!s||"start"===e.overlayX&&s)w=n.width-t.x+this._viewportMargin,b=t.x-this._viewportMargin;else if("start"===e.overlayX&&!s||"end"===e.overlayX&&s)C=t.x,b=n.right-t.x;else{const x=Math.min(n.right-t.x+n.left,t.x),N=this._lastBoundingBoxSize.width;b=2*x,C=t.x-x,b>N&&!this._isInitialRender&&!this._growAfterOpen&&(C=t.x-N/2)}return{top:u,left:C,bottom:h,right:w,width:b,height:l}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const l=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;s.height=qr(n.height),s.top=qr(n.top),s.bottom=qr(n.bottom),s.width=qr(n.width),s.left=qr(n.left),s.right=qr(n.right),s.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",s.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",l&&(s.maxHeight=qr(l)),u&&(s.maxWidth=qr(u))}this._lastBoundingBoxSize=n,Qh(this._boundingBox.style,s)}_resetBoundingBoxStyles(){Qh(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Qh(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},s=this._hasExactPosition(),l=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(s){const b=this._viewportRuler.getViewportScrollPosition();Qh(n,this._getExactOverlayY(e,t,b)),Qh(n,this._getExactOverlayX(e,t,b))}else n.position="static";let h="",p=this._getOffset(e,"x"),g=this._getOffset(e,"y");p&&(h+=`translateX(${p}px) `),g&&(h+=`translateY(${g}px)`),n.transform=h.trim(),u.maxHeight&&(s?n.maxHeight=qr(u.maxHeight):l&&(n.maxHeight="")),u.maxWidth&&(s?n.maxWidth=qr(u.maxWidth):l&&(n.maxWidth="")),Qh(this._pane.style,n)}_getExactOverlayY(t,e,n){let s={top:"",bottom:""},l=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(l=this._pushOverlayOnScreen(l,this._overlayRect,n));let u=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return l.y-=u,"bottom"===t.overlayY?s.bottom=this._document.documentElement.clientHeight-(l.y+this._overlayRect.height)+"px":s.top=qr(l.y),s}_getExactOverlayX(t,e,n){let u,s={left:"",right:""},l=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(l=this._pushOverlayOnScreen(l,this._overlayRect,n)),u=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===u?s.right=this._document.documentElement.clientWidth-(l.x+this._overlayRect.width)+"px":s.left=qr(l.x),s}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:vB(t,n),isOriginOutsideView:MD(t,n),isOverlayClipped:vB(e,n),isOverlayOutsideView:MD(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,s)=>n-Math.max(s,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&bC(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof qe)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function Qh(r,t){for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function CB(r){if("number"!=typeof r&&null!=r){const[t,e]=r.split(Vie);return e&&"px"!==e?null:parseFloat(t)}return r||null}function EB(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}class Hie{constructor(t,e,n,s,l,u,h){this._preferredPositions=[],this._positionStrategy=new DD(n,s,l,u,h).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,s){const l=new Nie(t,e,n,s);return this._preferredPositions.push(l),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const TB="cdk-global-overlay-wrapper";class Uie{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(TB),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:s,height:l,maxWidth:u,maxHeight:h}=n,p=!("100%"!==s&&"100vw"!==s||u&&"100%"!==u&&"100vw"!==u),g=!("100%"!==l&&"100vh"!==l||h&&"100%"!==h&&"100vh"!==h);t.position=this._cssPosition,t.marginLeft=p?"0":this._leftOffset,t.marginTop=g?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,p?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=g?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(TB),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Gie=(()=>{class r{constructor(e,n,s,l){this._viewportRuler=e,this._document=n,this._platform=s,this._overlayContainer=l}global(){return new Uie}connectedTo(e,n,s){return new Hie(n,s,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new DD(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return r.\u0275fac=function(e){return new(e||r)(be(Bs),be(Ut),be(jn),be(z_))},r.\u0275prov=Et({factory:function(){return new r(be(Bs),be(Ut),be(jn),be(z_))},token:r,providedIn:"root"}),r})(),Wie=0,mo=(()=>{class r{constructor(e,n,s,l,u,h,p,g,b,C,w){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=s,this._positionBuilder=l,this._keyboardDispatcher=u,this._injector=h,this._ngZone=p,this._document=g,this._directionality=b,this._location=C,this._outsideClickDispatcher=w}create(e){const n=this._createHostElement(),s=this._createPaneElement(n),l=this._createPortalOutlet(s),u=new Jh(e);return u.direction=u.direction||this._directionality.value,new Bie(l,n,s,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+Wie++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Xu)),new gB(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return r.\u0275fac=function(e){return new(e||r)(be(kie),be(z_),be(nl),be(Gie),be(Pie),be(Yn),be(Xt),be(Ut),be(Ii),be(Ff),be(Fie))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const Yie={provide:new je("cdk-connected-overlay-scroll-strategy"),deps:[mo],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let md=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[mo,Yie],imports:[[ng,pd,CD],CD]}),r})();function RC(r,t=mC){return e=>e.lift(new $ie(r,t))}class $ie{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new Kie(t,this.dueTime,this.scheduler))}}class Kie extends H{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Jie,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Jie(r){r.debouncedNext()}function MB(r){return t=>t.lift(new Qie(r))}class Qie{constructor(t){this.total=t}call(t,e){return e.subscribe(new Zie(t,this.total))}}class Zie extends H{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}let RD=(()=>{class r{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({factory:function(){return new r},token:r,providedIn:"root"}),r})(),X_=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[RD]}),r})();class rg extends class{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new j,this._typeaheadSubscription=D.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new j,this.change=new j,t instanceof na&&t.changes.subscribe(e=>{if(this._activeItem){const s=e.toArray().indexOf(this._activeItem);s>-1&&s!==this._activeItemIndex&&(this._activeItemIndex=s)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Qr(e=>this._pressedLetters.push(e)),RC(t),yi(()=>this._pressedLetters.length>0),ye(()=>this._pressedLetters.join(""))).subscribe(e=>{const n=this._getItemsArray();for(let s=1;s<n.length+1;s++){const l=(this._activeItemIndex+s)%n.length,u=n[l];if(!this._skipPredicateFn(u)&&0===u.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(l);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,s=["altKey","ctrlKey","metaKey","shiftKey"].every(l=>!t[l]||this._allowedModifierKeys.indexOf(l)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&s){this.setNextItemActive();break}return;case 38:if(this._vertical&&s){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&s){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&s){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&s){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&s){this.setLastItemActive();break}return;default:return void((s||Er(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),s=e[n];this._activeItem=null==s?null:s,this._activeItemIndex=n}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const s=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[s]))return void this.setActiveItem(s)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof na?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let NB=(()=>{class r{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(r){return!!(r.offsetWidth||r.offsetHeight||"function"==typeof r.getClientRects&&r.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function(r){try{return r.frameElement}catch(t){return null}}(function(r){return r.ownerDocument&&r.ownerDocument.defaultView||window}(e));if(n&&(-1===PB(n)||!this.isVisible(n)))return!1;let s=e.nodeName.toLowerCase(),l=PB(e);return e.hasAttribute("contenteditable")?-1!==l:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function(r){let t=r.nodeName.toLowerCase(),e="input"===t&&r.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===s?!!e.hasAttribute("controls")&&-1!==l:"video"===s?-1!==l&&(null!==l||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function(r){return!function(r){return function(r){return"input"==r.nodeName.toLowerCase()}(r)&&"hidden"==r.type}(r)&&(function(r){let t=r.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(r)||function(r){return function(r){return"a"==r.nodeName.toLowerCase()}(r)&&r.hasAttribute("href")}(r)||r.hasAttribute("contenteditable")||LB(r))}(e)&&!this.isDisabled(e)&&((null==n?void 0:n.ignoreVisibility)||this.isVisible(e))}}return r.\u0275fac=function(e){return new(e||r)(be(jn))},r.\u0275prov=Et({factory:function(){return new r(be(jn))},token:r,providedIn:"root"}),r})();function LB(r){if(!r.hasAttribute("tabindex")||void 0===r.tabIndex)return!1;let t=r.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function PB(r){if(!LB(r))return null;const t=parseInt(r.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class hre{constructor(t,e,n,s,l=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=s,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,l||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return null==n||n.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let s=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(s)return s}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let s=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(s)return s}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Fi(1)).subscribe(t)}}let OC=(()=>{class r{constructor(e,n,s){this._checker=e,this._ngZone=n,this._document=s}create(e,n=!1){return new hre(e,this._checker,this._ngZone,this._document,n)}}return r.\u0275fac=function(e){return new(e||r)(be(NB),be(Xt),be(Ut))},r.\u0275prov=Et({factory:function(){return new r(be(NB),be(Xt),be(Ut))},token:r,providedIn:"root"}),r})();function ID(r){return 0===r.offsetX&&0===r.offsetY}function AD(r){const t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}"undefined"!=typeof Element&&Element;const FB=new je("cdk-input-modality-detector-options"),vre={ignoreKeys:[18,17,224,91,16]},og=cd({passive:!0,capture:!0});let VB=(()=>{class r{constructor(e,n,s,l){this._platform=e,this._mostRecentTarget=null,this._modality=new Os(null),this._lastTouchMs=0,this._onKeydown=u=>{var h,p;(null===(p=null===(h=this._options)||void 0===h?void 0:h.ignoreKeys)||void 0===p?void 0:p.some(g=>g===u.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=ud(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(ID(u)?"keyboard":"mouse"),this._mostRecentTarget=ud(u))},this._onTouchstart=u=>{AD(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ud(u))},this._options=Object.assign(Object.assign({},vre),l),this.modalityDetected=this._modality.pipe(MB(1)),this.modalityChanged=this.modalityDetected.pipe(Yh()),e.isBrowser&&n.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,og),s.addEventListener("mousedown",this._onMousedown,og),s.addEventListener("touchstart",this._onTouchstart,og)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,og),document.removeEventListener("mousedown",this._onMousedown,og),document.removeEventListener("touchstart",this._onTouchstart,og))}}return r.\u0275fac=function(e){return new(e||r)(be(jn),be(Xt),be(Ut),be(FB,8))},r.\u0275prov=Et({factory:function(){return new r(be(jn),be(Xt),be(Ut),be(FB,8))},token:r,providedIn:"root"}),r})();const HB=new je("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),UB=new je("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let kC=(()=>{class r{constructor(e,n,s,l){this._ngZone=n,this._defaultOptions=l,this._document=s,this._liveElement=e||this._createLiveElement()}announce(e,...n){const s=this._defaultOptions;let l,u;return 1===n.length&&"number"==typeof n[0]?u=n[0]:[l,u]=n,this.clear(),clearTimeout(this._previousTimeout),l||(l=s&&s.politeness?s.politeness:"polite"),null==u&&s&&(u=s.duration),this._liveElement.setAttribute("aria-live",l),this._ngZone.runOutsideAngular(()=>new Promise(h=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,h(),"number"==typeof u&&(this._previousTimeout=setTimeout(()=>this.clear(),u))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const e="cdk-live-announcer-element",n=this._document.getElementsByClassName(e),s=this._document.createElement("div");for(let l=0;l<n.length;l++)n[l].parentNode.removeChild(n[l]);return s.classList.add(e),s.classList.add("cdk-visually-hidden"),s.setAttribute("aria-atomic","true"),s.setAttribute("aria-live","polite"),this._document.body.appendChild(s),s}}return r.\u0275fac=function(e){return new(e||r)(be(HB,8),be(Xt),be(Ut),be(UB,8))},r.\u0275prov=Et({factory:function(){return new r(be(HB,8),be(Xt),be(Ut),be(UB,8))},token:r,providedIn:"root"}),r})();const GB=new je("cdk-focus-monitor-default-options"),NC=cd({passive:!0,capture:!0});let Ur=(()=>{class r{constructor(e,n,s,l,u){this._ngZone=e,this._platform=n,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new j,this._rootNodeFocusAndBlurListener=h=>{const p=ud(h),g="focus"===h.type?this._onFocus:this._onBlur;for(let b=p;b;b=b.parentElement)g.call(this,h,b)},this._document=l,this._detectionMode=(null==u?void 0:u.detectionMode)||0}monitor(e,n=!1){const s=Zc(e);if(!this._platform.isBrowser||1!==s.nodeType)return an(null);const l=uB(s)||this._getDocument(),u=this._elementInfo.get(s);if(u)return n&&(u.checkChildren=!0),u.subject;const h={checkChildren:n,subject:new j,rootNode:l};return this._elementInfo.set(s,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(e){const n=Zc(e),s=this._elementInfo.get(n);s&&(s.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(s))}focusVia(e,n,s){const l=Zc(e);l===this._getDocument().activeElement?this._getClosestElementsInfo(l).forEach(([h,p])=>this._originChanged(h,n,p)):(this._setOrigin(n),"function"==typeof l.focus&&l.focus(s))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,n,s){s?e.classList.add(n):e.classList.remove(n)}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,n){this._toggleClass(e,"cdk-focused",!!n),this._toggleClass(e,"cdk-touch-focused","touch"===n),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===n),this._toggleClass(e,"cdk-mouse-focused","mouse"===n),this._toggleClass(e,"cdk-program-focused","program"===n)}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,n){const s=this._elementInfo.get(n),l=ud(e);!s||!s.checkChildren&&n!==l||this._originChanged(n,this._getFocusOrigin(l),s)}_onBlur(e,n){const s=this._elementInfo.get(n);!s||s.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(s.subject,null))}_emitOrigin(e,n){this._ngZone.run(()=>e.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const n=e.rootNode,s=this._rootNodeFocusListenerCount.get(n)||0;s||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,NC),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,NC)}),this._rootNodeFocusListenerCount.set(n,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(un(this._stopInputModalityDetector)).subscribe(l=>{this._setOrigin(l,!0)}))}_removeGlobalListeners(e){const n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const s=this._rootNodeFocusListenerCount.get(n);s>1?this._rootNodeFocusListenerCount.set(n,s-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,NC),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,NC),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,s){this._setClasses(e,n),this._emitOrigin(s.subject,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){const n=[];return this._elementInfo.forEach((s,l)=>{(l===e||s.checkChildren&&l.contains(e))&&n.push([l,s])}),n}}return r.\u0275fac=function(e){return new(e||r)(be(Xt),be(jn),be(VB),be(Ut,8),be(GB,8))},r.\u0275prov=Et({factory:function(){return new r(be(Xt),be(jn),be(VB),be(Ut,8),be(GB,8))},token:r,providedIn:"root"}),r})();const WB="cdk-high-contrast-black-on-white",zB="cdk-high-contrast-white-on-black",kD="cdk-high-contrast-active";let jB=(()=>{class r{constructor(e,n){this._platform=e,this._document=n}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,s=n&&n.getComputedStyle?n.getComputedStyle(e):null,l=(s&&s.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),l){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(kD),e.remove(WB),e.remove(zB),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?(e.add(kD),e.add(WB)):2===n&&(e.add(kD),e.add(zB))}}}return r.\u0275fac=function(e){return new(e||r)(be(jn),be(Ut))},r.\u0275prov=Et({factory:function(){return new r(be(jn),be(Ut))},token:r,providedIn:"root"}),r})(),LC=(()=>{class r{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return r.\u0275fac=function(e){return new(e||r)(be(jB))},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[eg,X_]]}),r})();const XB=new zu("12.2.13");class YB{}const nu="*";function Tr(r,t){return{type:7,name:r,definitions:t,options:{}}}function di(r,t=null){return{type:4,styles:t,timings:r}}function $B(r,t=null){return{type:2,steps:r,options:t}}function Zt(r){return{type:6,styles:r,offset:null}}function Xn(r,t,e){return{type:0,name:r,styles:t,options:e}}function oi(r,t,e=null){return{type:1,expr:r,animation:t,options:e}}function QB(r){Promise.resolve(null).then(r)}class sg{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){QB(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class ZB{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,s=0;const l=this.players.length;0==l?QB(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++e==l&&this._onFinish()}),u.onDestroy(()=>{++n==l&&this._onDestroy()}),u.onStart(()=>{++s==l&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const s=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(s)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}function qB(){return"undefined"!=typeof window&&void 0!==window.document}function LD(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function _d(r){switch(r.length){case 0:return new sg;case 1:return r[0];default:return new ZB(r)}}function e2(r,t,e,n,s={},l={}){const u=[],h=[];let p=-1,g=null;if(n.forEach(b=>{const C=b.offset,w=C==p,x=w&&g||{};Object.keys(b).forEach(N=>{let B=N,V=b[N];if("offset"!==N)switch(B=t.normalizePropertyName(B,u),V){case"!":V=s[N];break;case nu:V=l[N];break;default:V=t.normalizeStyleValue(N,B,V,u)}x[B]=V}),w||h.push(x),g=x,p=C}),u.length){const b="\n - ";throw new Error(`Unable to animate due to the following errors:${b}${u.join(b)}`)}return h}function PD(r,t,e,n){switch(t){case"start":r.onStart(()=>n(e&&FD(e,"start",r)));break;case"done":r.onDone(()=>n(e&&FD(e,"done",r)));break;case"destroy":r.onDestroy(()=>n(e&&FD(e,"destroy",r)))}}function FD(r,t,e){const n=e.totalTime,l=BD(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,null==n?r.totalTime:n,!!e.disabled),u=r._data;return null!=u&&(l._data=u),l}function BD(r,t,e,n,s="",l=0,u){return{element:r,triggerName:t,fromState:e,toState:n,phaseName:s,totalTime:l,disabled:!!u}}function ia(r,t,e){let n;return r instanceof Map?(n=r.get(t),n||r.set(t,n=e)):(n=r[t],n||(n=r[t]=e)),n}function t2(r){const t=r.indexOf(":");return[r.substring(1,t),r.substr(t+1)]}let VD=(r,t)=>!1,HD=(r,t)=>!1,n2=(r,t,e)=>[];const r2=LD();(r2||"undefined"!=typeof Element)&&(VD=qB()?(r,t)=>{for(;t&&t!==document.documentElement;){if(t===r)return!0;t=t.parentNode||t.host}return!1}:(r,t)=>r.contains(t),HD=(()=>{if(r2||Element.prototype.matches)return(r,t)=>r.matches(t);{const r=Element.prototype,t=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):HD}})(),n2=(r,t,e)=>{let n=[];if(e){const s=r.querySelectorAll(t);for(let l=0;l<s.length;l++)n.push(s[l])}else{const s=r.querySelector(t);s&&n.push(s)}return n});let qh=null,o2=!1;function UD(r){qh||(qh=("undefined"!=typeof document?document.body:null)||{},o2=!!qh.style&&"WebkitAppearance"in qh.style);let t=!0;return qh.style&&!function(r){return"ebkit"==r.substring(1,6)}(r)&&(t=r in qh.style,!t&&o2&&(t="Webkit"+r.charAt(0).toUpperCase()+r.substr(1)in qh.style)),t}const GD=HD,WD=VD,zD=n2;function s2(r){const t={};return Object.keys(r).forEach(e=>{const n=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[n]=r[e]}),t}let a2=(()=>{class r{validateStyleProperty(e){return UD(e)}matchesElement(e,n){return GD(e,n)}containsElement(e,n){return WD(e,n)}query(e,n,s){return zD(e,n,s)}computeStyle(e,n,s){return s||""}animate(e,n,s,l,u,h=[],p){return new sg(s,l)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),jD=(()=>{class r{}return r.NOOP=new a2,r})();const XD="ng-enter",PC="ng-leave",FC="ng-trigger",BC=".ng-trigger",c2="ng-animating",YD=".ng-animating";function ep(r){if("number"==typeof r)return r;const t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:$D(parseFloat(t[1]),t[2])}function $D(r,t){switch(t){case"s":return 1e3*r;default:return r}}function VC(r,t,e){return r.hasOwnProperty("duration")?r:function(r,t,e){let s,l=0,u="";if("string"==typeof r){const h=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return t.push(`The provided timing value "${r}" is invalid.`),{duration:0,delay:0,easing:""};s=$D(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(l=$D(parseFloat(p),h[4]));const g=h[5];g&&(u=g)}else s=r;if(!e){let h=!1,p=t.length;s<0&&(t.push("Duration values below 0 are not allowed for this animation step."),h=!0),l<0&&(t.push("Delay values below 0 are not allowed for this animation step."),h=!0),h&&t.splice(p,0,`The provided timing value "${r}" is invalid.`)}return{duration:s,delay:l,easing:u}}(r,t,e)}function ag(r,t={}){return Object.keys(r).forEach(e=>{t[e]=r[e]}),t}function vd(r,t,e={}){if(t)for(let n in r)e[n]=r[n];else ag(r,e);return e}function d2(r,t,e){return e?t+":"+e+";":""}function h2(r){let t="";for(let e=0;e<r.style.length;e++){const n=r.style.item(e);t+=d2(0,n,r.style.getPropertyValue(n))}for(const e in r.style)r.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=d2(0,xre(e),r.style[e]));r.setAttribute("style",t)}function Jl(r,t,e){r.style&&(Object.keys(t).forEach(n=>{const s=JD(n);e&&!e.hasOwnProperty(n)&&(e[n]=r.style[s]),r.style[s]=t[n]}),LD()&&h2(r))}function tp(r,t){r.style&&(Object.keys(t).forEach(e=>{const n=JD(e);r.style[n]=""}),LD()&&h2(r))}function Y_(r){return Array.isArray(r)?1==r.length?r[0]:$B(r):r}const KD=new RegExp("{{\\s*(.+?)\\s*}}","g");function p2(r){let t=[];if("string"==typeof r){let e;for(;e=KD.exec(r);)t.push(e[1]);KD.lastIndex=0}return t}function HC(r,t,e){const n=r.toString(),s=n.replace(KD,(l,u)=>{let h=t[u];return t.hasOwnProperty(u)||(e.push(`Please provide a value for the animation param ${u}`),h=""),h.toString()});return s==n?r:s}function UC(r){const t=[];let e=r.next();for(;!e.done;)t.push(e.value),e=r.next();return t}const Rre=/-+([a-z0-9])/g;function JD(r){return r.replace(Rre,(...t)=>t[1].toUpperCase())}function xre(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function f2(r,t){return 0===r||0===t}function g2(r,t,e){const n=Object.keys(e);if(n.length&&t.length){let l=t[0],u=[];if(n.forEach(h=>{l.hasOwnProperty(h)||u.push(h),l[h]=e[h]}),u.length)for(var s=1;s<t.length;s++){let h=t[s];u.forEach(function(p){h[p]=QD(r,p)})}}return t}function ra(r,t,e){switch(t.type){case 7:return r.visitTrigger(t,e);case 0:return r.visitState(t,e);case 1:return r.visitTransition(t,e);case 2:return r.visitSequence(t,e);case 3:return r.visitGroup(t,e);case 4:return r.visitAnimate(t,e);case 5:return r.visitKeyframes(t,e);case 6:return r.visitStyle(t,e);case 8:return r.visitReference(t,e);case 9:return r.visitAnimateChild(t,e);case 10:return r.visitAnimateRef(t,e);case 11:return r.visitQuery(t,e);case 12:return r.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function QD(r,t){return window.getComputedStyle(r)[t]}function Ire(r,t){const e=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(n=>function(r,t,e){if(":"==r[0]){const p=function(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(`The transition alias value "${r}" is not supported`),"* => *"}}(r,e);if("function"==typeof p)return void t.push(p);r=p}const n=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(`The provided transition expression "${r}" is not supported`),t;const s=n[1],l=n[2],u=n[3];t.push(m2(s,u));"<"==l[0]&&!("*"==s&&"*"==u)&&t.push(m2(u,s))}(n,e,t)):e.push(r),e}const WC=new Set(["true","1"]),zC=new Set(["false","0"]);function m2(r,t){const e=WC.has(r)||zC.has(r),n=WC.has(t)||zC.has(t);return(s,l)=>{let u="*"==r||r==s,h="*"==t||t==l;return!u&&e&&"boolean"==typeof s&&(u=s?WC.has(r):zC.has(r)),!h&&n&&"boolean"==typeof l&&(h=l?WC.has(t):zC.has(t)),u&&h}}const kre=new RegExp("s*:selfs*,?","g");function ZD(r,t,e){return new Nre(r).build(t,e)}class Nre{constructor(t){this._driver=t}build(t,e){const n=new Fre(e);return this._resetContextStyleTimingState(n),ra(this,Y_(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,s=e.depCount=0;const l=[],u=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(h=>{if(this._resetContextStyleTimingState(e),0==h.type){const p=h,g=p.name;g.toString().split(/\s*,\s*/).forEach(b=>{p.name=b,l.push(this.visitState(p,e))}),p.name=g}else if(1==h.type){const p=this.visitTransition(h,e);n+=p.queryCount,s+=p.depCount,u.push(p)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:l,transitions:u,queryCount:n,depCount:s,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),s=t.options&&t.options.params||null;if(n.containsDynamicStyles){const l=new Set,u=s||{};if(n.styles.forEach(h=>{if(jC(h)){const p=h;Object.keys(p).forEach(g=>{p2(p[g]).forEach(b=>{u.hasOwnProperty(b)||l.add(b)})})}}),l.size){const h=UC(l.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${h.join(", ")}`)}}return{type:0,name:t.name,style:n,options:s?{params:s}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=ra(this,Y_(t.animation),e);return{type:1,matchers:Ire(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:np(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>ra(this,n,e)),options:np(t.options)}}visitGroup(t,e){const n=e.currentTime;let s=0;const l=t.steps.map(u=>{e.currentTime=n;const h=ra(this,u,e);return s=Math.max(s,e.currentTime),h});return e.currentTime=s,{type:3,steps:l,options:np(t.options)}}visitAnimate(t,e){const n=function(r,t){let e=null;if(r.hasOwnProperty("duration"))e=r;else if("number"==typeof r)return qD(VC(r,t).duration,0,"");const n=r;if(n.split(/\s+/).some(l=>"{"==l.charAt(0)&&"{"==l.charAt(1))){const l=qD(0,0,"");return l.dynamic=!0,l.strValue=n,l}return e=e||VC(n,t),qD(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let s,l=t.styles?t.styles:Zt({});if(5==l.type)s=this.visitKeyframes(l,e);else{let u=t.styles,h=!1;if(!u){h=!0;const g={};n.easing&&(g.easing=n.easing),u=Zt(g)}e.currentTime+=n.duration+n.delay;const p=this.visitStyle(u,e);p.isEmptyStep=h,s=p}return e.currentAnimateTimings=null,{type:4,timings:n,style:s,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(u=>{"string"==typeof u?u==nu?n.push(u):e.errors.push(`The provided style string value ${u} is not allowed.`):n.push(u)}):n.push(t.styles);let s=!1,l=null;return n.forEach(u=>{if(jC(u)){const h=u,p=h.easing;if(p&&(l=p,delete h.easing),!s)for(let g in h)if(h[g].toString().indexOf("{{")>=0){s=!0;break}}}),{type:6,styles:n,easing:l,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let s=e.currentTime,l=e.currentTime;n&&l>0&&(l-=n.duration+n.delay),t.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(h=>{if(!this._driver.validateStyleProperty(h))return void e.errors.push(`The provided animation property "${h}" is not a supported CSS property for animations`);const p=e.collectedStyles[e.currentQuerySelector],g=p[h];let b=!0;g&&(l!=s&&l>=g.startTime&&s<=g.endTime&&(e.errors.push(`The CSS property "${h}" that exists between the times of "${g.startTime}ms" and "${g.endTime}ms" is also being animated in a parallel animation between the times of "${l}ms" and "${s}ms"`),b=!1),l=g.startTime),b&&(p[h]={startTime:l,endTime:s}),e.options&&function(r,t,e){const n=t.params||{},s=p2(r);s.length&&s.forEach(l=>{n.hasOwnProperty(l)||e.push(`Unable to resolve the local animation param ${l} in the given list of values`)})}(u[h],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let l=0;const u=[];let h=!1,p=!1,g=0;const b=t.steps.map($=>{const te=this._makeStyleAst($,e);let xe=null!=te.offset?te.offset:function(r){if("string"==typeof r)return null;let t=null;if(Array.isArray(r))r.forEach(e=>{if(jC(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(jC(r)&&r.hasOwnProperty("offset")){const e=r;t=parseFloat(e.offset),delete e.offset}return t}(te.styles),Re=0;return null!=xe&&(l++,Re=te.offset=xe),p=p||Re<0||Re>1,h=h||Re<g,g=Re,u.push(Re),te});p&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),h&&e.errors.push("Please ensure that all keyframe offsets are in order");const C=t.steps.length;let w=0;l>0&&l<C?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==l&&(w=1/(C-1));const x=C-1,N=e.currentTime,B=e.currentAnimateTimings,V=B.duration;return b.forEach(($,te)=>{const xe=w>0?te==x?1:w*te:u[te],Re=xe*V;e.currentTime=N+B.delay+Re,B.duration=Re,this._validateStyleAst($,e),$.offset=xe,n.styles.push($)}),n}visitReference(t,e){return{type:8,animation:ra(this,Y_(t.animation),e),options:np(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:np(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:np(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,s=t.options||{};e.queryCount++,e.currentQuery=t;const[l,u]=function(r){const t=!!r.split(/\s*,\s*/).find(e=>":self"==e);return t&&(r=r.replace(kre,"")),[r=r.replace(/@\*/g,BC).replace(/@\w+/g,e=>BC+"-"+e.substr(1)).replace(/:animating/g,YD),t]}(t.selector);e.currentQuerySelector=n.length?n+" "+l:l,ia(e.collectedStyles,e.currentQuerySelector,{});const h=ra(this,Y_(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:l,limit:s.limit||0,optional:!!s.optional,includeSelf:u,animation:h,originalSelector:t.selector,options:np(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:VC(t.timings,e.errors,!0);return{type:12,animation:ra(this,Y_(t.animation),e),timings:n,options:null}}}class Fre{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function jC(r){return!Array.isArray(r)&&"object"==typeof r}function np(r){return r?(r=ag(r)).params&&(r.params=function(r){return r?ag(r):null}(r.params)):r={},r}function qD(r,t,e){return{duration:r,delay:t,easing:e}}function e0(r,t,e,n,s,l,u=null,h=!1){return{type:1,element:r,keyframes:t,preStyleProps:e,postStyleProps:n,duration:s,delay:l,totalTime:s+l,easing:u,subTimeline:h}}class XC{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Gre=new RegExp(":enter","g"),zre=new RegExp(":leave","g");function t0(r,t,e,n,s,l={},u={},h,p,g=[]){return(new jre).buildKeyframes(r,t,e,n,s,l,u,h,p,g)}class jre{buildKeyframes(t,e,n,s,l,u,h,p,g,b=[]){g=g||new XC;const C=new n0(t,e,g,s,l,b,[]);C.options=p,C.currentTimeline.setStyles([u],null,C.errors,p),ra(this,n,C);const w=C.timelines.filter(x=>x.containsAnimation());if(w.length&&Object.keys(h).length){const x=w[w.length-1];x.allowOnlyTimelineStyles()||x.setStyles([h],null,C.errors,p)}return w.length?w.map(x=>x.buildKeyframes()):[e0(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const s=e.createSubContext(t.options),l=e.currentTimeline.currentTime,u=this._visitSubInstructions(n,s,s.options);l!=u&&e.transformIntoNewTimeline(u)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let l=e.currentTimeline.currentTime;const u=null!=n.duration?ep(n.duration):null,h=null!=n.delay?ep(n.delay):null;return 0!==u&&t.forEach(p=>{const g=e.appendInstructionToTimeline(p,u,h);l=Math.max(l,g.duration+g.delay)}),l}visitReference(t,e){e.updateOptions(t.options,!0),ra(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let s=e;const l=t.options;if(l&&(l.params||l.delay)&&(s=e.createSubContext(l),s.transformIntoNewTimeline(),null!=l.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=YC);const u=ep(l.delay);s.delayNextStep(u)}t.steps.length&&(t.steps.forEach(u=>ra(this,u,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>n&&s.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let s=e.currentTimeline.currentTime;const l=t.options&&t.options.delay?ep(t.options.delay):0;t.steps.forEach(u=>{const h=e.createSubContext(t.options);l&&h.delayNextStep(l),ra(this,u,h),s=Math.max(s,h.currentTimeline.currentTime),n.push(h.currentTimeline)}),n.forEach(u=>e.currentTimeline.mergeTimelineCollectedStyles(u)),e.transformIntoNewTimeline(s),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return VC(e.params?HC(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),s=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),s.snapshotCurrentStyles());const l=t.style;5==l.type?this.visitKeyframes(l,e):(e.incrementTime(n.duration),this.visitStyle(l,e),s.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,s=e.currentAnimateTimings;!s&&n.getCurrentStyleProperties().length&&n.forwardFrame();const l=s&&s.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(l):n.setStyles(t.styles,l,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,s=e.currentTimeline.duration,l=n.duration,h=e.createSubContext().currentTimeline;h.easing=n.easing,t.styles.forEach(p=>{h.forwardTime((p.offset||0)*l),h.setStyles(p.styles,p.easing,e.errors,e.options),h.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(h),e.transformIntoNewTimeline(s+l),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,s=t.options||{},l=s.delay?ep(s.delay):0;l&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=YC);let u=n;const h=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!s.optional,e.errors);e.currentQueryTotal=h.length;let p=null;h.forEach((g,b)=>{e.currentQueryIndex=b;const C=e.createSubContext(t.options,g);l&&C.delayNextStep(l),g===e.element&&(p=C.currentTimeline),ra(this,t.animation,C),C.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,C.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(u),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,s=e.currentTimeline,l=t.timings,u=Math.abs(l.duration),h=u*(e.currentQueryTotal-1);let p=u*e.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":p=h-p;break;case"full":p=n.currentStaggerTime}const b=e.currentTimeline;p&&b.delayNextStep(p);const C=b.currentTime;ra(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=s.currentTime-C+(s.startTime-n.currentTimeline.startTime)}}const YC={};class n0{constructor(t,e,n,s,l,u,h,p){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=s,this._leaveClassName=l,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=YC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new $C(this._driver,e,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let s=this.options;null!=n.duration&&(s.duration=ep(n.duration)),null!=n.delay&&(s.delay=ep(n.delay));const l=n.params;if(l){let u=s.params;u||(u=this.options.params={}),Object.keys(l).forEach(h=>{(!e||!u.hasOwnProperty(h))&&(u[h]=HC(l[h],u,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(s=>{n[s]=e[s]})}}return t}createSubContext(t=null,e,n){const s=e||this.element,l=new n0(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,n||0));return l.previousNode=this.previousNode,l.currentAnimateTimings=this.currentAnimateTimings,l.options=this._copyOptions(),l.updateOptions(t),l.currentQueryIndex=this.currentQueryIndex,l.currentQueryTotal=this.currentQueryTotal,l.parentContext=this,this.subContextCount++,l}transformIntoNewTimeline(t){return this.previousNode=YC,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const s={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},l=new Xre(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,s,t.stretchStartingKeyframe);return this.timelines.push(l),s}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,s,l,u){let h=[];if(s&&h.push(this.element),t.length>0){t=(t=t.replace(Gre,"."+this._enterClassName)).replace(zre,"."+this._leaveClassName);let g=this._driver.query(this.element,t,1!=n);0!==n&&(g=n<0?g.slice(g.length+n,g.length):g.slice(0,n)),h.push(...g)}return!l&&0==h.length&&u.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),h}}class $C{constructor(t,e,n,s){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new $C(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||nu,this._currentKeyframe[e]=nu}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,s){e&&(this._previousKeyframe.easing=e);const l=s&&s.params||{},u=function(r,t){const e={};let n;return r.forEach(s=>{"*"===s?(n=n||Object.keys(t),n.forEach(l=>{e[l]=nu})):vd(s,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(u).forEach(h=>{const p=HC(u[h],l,n);this._pendingStyles[h]=p,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:nu),this._updateStyle(h,p)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(n=>{this._currentKeyframe[n]=t[n]}),Object.keys(this._localTimelineStyles).forEach(n=>{this._currentKeyframe.hasOwnProperty(n)||(this._currentKeyframe[n]=this._localTimelineStyles[n])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],s=t._styleSummary[e];(!n||s.time>n.time)&&this._updateStyle(e,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((h,p)=>{const g=vd(h,!0);Object.keys(g).forEach(b=>{const C=g[b];"!"==C?t.add(b):C==nu&&e.add(b)}),n||(g.offset=p/this.duration),s.push(g)});const l=t.size?UC(t.values()):[],u=e.size?UC(e.values()):[];if(n){const h=s[0],p=ag(h);h.offset=0,p.offset=1,s=[h,p]}return e0(this.element,s,l,u,this.duration,this.startTime,this.easing,!1)}}class Xre extends $C{constructor(t,e,n,s,l,u,h=!1){super(t,e,u.delay),this.keyframes=n,this.preStyleProps=s,this.postStyleProps=l,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:s}=this.timings;if(this._stretchStartingKeyframe&&e){const l=[],u=n+e,h=e/u,p=vd(t[0],!1);p.offset=0,l.push(p);const g=vd(t[0],!1);g.offset=b2(h),l.push(g);const b=t.length-1;for(let C=1;C<=b;C++){let w=vd(t[C],!1);w.offset=b2((e+w.offset*n)/u),l.push(w)}n=u,e=0,s="",t=l}return e0(this.element,t,this.preStyleProps,this.postStyleProps,n,e,s,!0)}}function b2(r,t=3){const e=Math.pow(10,t-1);return Math.round(r*e)/e}class r0{}class $re extends r0{normalizePropertyName(t,e){return JD(t)}normalizeStyleValue(t,e,n,s){let l="";const u=n.toString().trim();if(Kre[e]&&0!==n&&"0"!==n)if("number"==typeof n)l="px";else{const h=n.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&s.push(`Please provide a CSS unit value for ${t}:${n}`)}return u+l}}const Kre=(()=>function(r){const t={};return r.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function y2(r,t,e,n,s,l,u,h,p,g,b,C,w){return{type:0,element:r,triggerName:t,isRemovalTransition:s,fromState:e,fromStyles:l,toState:n,toStyles:u,timelines:h,queriedElements:p,preStyleProps:g,postStyleProps:b,totalTime:C,errors:w}}const o0={};class C2{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,s){return function(r,t,e,n,s){return r.some(l=>l(t,e,n,s))}(this.ast.matchers,t,e,n,s)}buildStyles(t,e,n){const s=this._stateStyles["*"],l=this._stateStyles[t],u=s?s.buildStyles(e,n):{};return l?l.buildStyles(e,n):u}build(t,e,n,s,l,u,h,p,g,b){const C=[],w=this.ast.options&&this.ast.options.params||o0,N=this.buildStyles(n,h&&h.params||o0,C),B=p&&p.params||o0,V=this.buildStyles(s,B,C),$=new Set,te=new Map,xe=new Map,Re="void"===s,Pe={params:Object.assign(Object.assign({},w),B)},nt=b?[]:t0(t,e,this.ast.animation,l,u,N,V,Pe,g,C);let ct=0;if(nt.forEach(At=>{ct=Math.max(At.duration+At.delay,ct)}),C.length)return y2(e,this._triggerName,n,s,Re,N,V,[],[],te,xe,ct,C);nt.forEach(At=>{const Cn=At.element,Gt=ia(te,Cn,{});At.preStyleProps.forEach(qn=>Gt[qn]=!0);const Mn=ia(xe,Cn,{});At.postStyleProps.forEach(qn=>Mn[qn]=!0),Cn!==e&&$.add(Cn)});const St=UC($.values());return y2(e,this._triggerName,n,s,Re,N,V,nt,St,te,xe,ct)}}class Zre{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n={},s=ag(this.defaultParams);return Object.keys(t).forEach(l=>{const u=t[l];null!=u&&(s[l]=u)}),this.styles.styles.forEach(l=>{if("string"!=typeof l){const u=l;Object.keys(u).forEach(h=>{let p=u[h];p.length>1&&(p=HC(p,s,e));const g=this.normalizer.normalizePropertyName(h,e);p=this.normalizer.normalizeStyleValue(h,g,p,e),n[g]=p})}}),n}}class eoe{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states={},e.states.forEach(s=>{this.states[s.name]=new Zre(s.style,s.options&&s.options.params||{},n)}),E2(this.states,"true","1"),E2(this.states,"false","0"),e.transitions.forEach(s=>{this.transitionFactories.push(new C2(t,s,this.states))}),this.fallbackTransition=function(r,t,e){return new C2(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,s){return this.transitionFactories.find(u=>u.match(t,e,n,s))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function E2(r,t,e){r.hasOwnProperty(t)?r.hasOwnProperty(e)||(r[e]=r[t]):r.hasOwnProperty(e)&&(r[t]=r[e])}const noe=new XC;class ioe{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],s=ZD(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=s}_buildPlayer(t,e,n){const s=t.element,l=e2(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(s,l,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const s=[],l=this._animations[t];let u;const h=new Map;if(l?(u=t0(this._driver,e,l,XD,PC,{},{},n,noe,s),u.forEach(b=>{const C=ia(h,b.element,{});b.postStyleProps.forEach(w=>C[w]=null)})):(s.push("The requested animation doesn't exist or has already been destroyed"),u=[]),s.length)throw new Error(`Unable to create the animation due to the following errors: ${s.join("\n")}`);h.forEach((b,C)=>{Object.keys(b).forEach(w=>{b[w]=this._driver.computeStyle(C,w,nu)})});const g=_d(u.map(b=>{const C=h.get(b.element);return this._buildPlayer(b,{},C)}));return this._playersById[t]=g,g.onDestroy(()=>this.destroy(t)),this.players.push(g),g}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,s){const l=BD(e,"","","");return PD(this._getPlayer(t),n,l,s),()=>{}}command(t,e,n,s){if("register"==n)return void this.register(t,s[0]);if("create"==n)return void this.create(t,e,s[0]||{});const l=this._getPlayer(t);switch(n){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(t)}}}const T2="ng-animate-queued",w2="ng-animate-disabled",S2=".ng-animate-disabled",aoe=[],M2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},loe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Da="__ng_removed";class s0{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function(r){return null!=r?r:null}(n?t.value:t),n){const l=ag(t);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(s=>{null==n[s]&&(n[s]=e[s])})}}}const $_="void",a0=new s0($_);class coe{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Ra(e,this._hostClassName)}listen(t,e,n,s){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function(r){return"start"==r||"done"==r}(n))throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);const l=ia(this._elementListeners,t,[]),u={name:e,phase:n,callback:s};l.push(u);const h=ia(this._engine.statesByElement,t,{});return h.hasOwnProperty(e)||(Ra(t,FC),Ra(t,FC+"-"+e),h[e]=a0),()=>{this._engine.afterFlush(()=>{const p=l.indexOf(u);p>=0&&l.splice(p,1),this._triggers[e]||delete h[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,s=!0){const l=this._getTrigger(e),u=new l0(this.id,e,t);let h=this._engine.statesByElement.get(t);h||(Ra(t,FC),Ra(t,FC+"-"+e),this._engine.statesByElement.set(t,h={}));let p=h[e];const g=new s0(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&p&&g.absorbOptions(p.options),h[e]=g,p||(p=a0),g.value!==$_&&p.value===g.value){if(!function(r,t){const e=Object.keys(r),n=Object.keys(t);if(e.length!=n.length)return!1;for(let s=0;s<e.length;s++){const l=e[s];if(!t.hasOwnProperty(l)||r[l]!==t[l])return!1}return!0}(p.params,g.params)){const B=[],V=l.matchStyles(p.value,p.params,B),$=l.matchStyles(g.value,g.params,B);B.length?this._engine.reportError(B):this._engine.afterFlush(()=>{tp(t,V),Jl(t,$)})}return}const w=ia(this._engine.playersByElement,t,[]);w.forEach(B=>{B.namespaceId==this.id&&B.triggerName==e&&B.queued&&B.destroy()});let x=l.matchTransition(p.value,g.value,t,g.params),N=!1;if(!x){if(!s)return;x=l.fallbackTransition,N=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:x,fromState:p,toState:g,player:u,isFallbackTransition:N}),N||(Ra(t,T2),u.onStart(()=>{lg(t,T2)})),u.onDone(()=>{let B=this.players.indexOf(u);B>=0&&this.players.splice(B,1);const V=this._engine.playersByElement.get(t);if(V){let $=V.indexOf(u);$>=0&&V.splice($,1)}}),this.players.push(u),w.push(u),u}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(s=>s.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,BC,!0);n.forEach(s=>{if(s[Da])return;const l=this._engine.fetchNamespacesByElement(s);l.size?l.forEach(u=>u.triggerLeaveAnimation(s,e,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(t,e,n,s){const l=this._engine.statesByElement.get(t);if(l){const u=[];if(Object.keys(l).forEach(h=>{if(this._triggers[h]){const p=this.trigger(t,h,$_,s);p&&u.push(p)}}),u.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&_d(u).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const s=new Set;e.forEach(l=>{const u=l.name;if(s.has(u))return;s.add(u);const p=this._triggers[u].fallbackTransition,g=n[u]||a0,b=new s0($_),C=new l0(this.id,u,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:u,transition:p,fromState:g,toState:b,player:C,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let s=!1;if(n.totalAnimations){const l=n.players.length?n.playersByQueriedElement.get(t):[];if(l&&l.length)s=!0;else{let u=t;for(;u=u.parentNode;)if(n.statesByElement.get(u)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(t),s)n.markElementAsRemoved(this.id,t,!1,e);else{const l=t[Da];(!l||l===M2)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Ra(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const s=n.player;if(s.destroyed)return;const l=n.element,u=this._elementListeners.get(l);u&&u.forEach(h=>{if(h.name==n.triggerName){const p=BD(l,n.triggerName,n.fromState.value,n.toState.value);p._data=t,PD(n.player,h.phase,p,h.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):e.push(n)}),this._queue=[],e.sort((n,s)=>{const l=n.transition.ast.depCount,u=s.transition.ast.depCount;return 0==l||0==u?l-u:this._engine.driver.containsElement(n.element,s.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class uoe{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,l)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new coe(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let s=!1;for(let l=n;l>=0;l--)if(this.driver.containsElement(this._namespaceList[l].hostElement,e)){this._namespaceList.splice(l+1,0,t),s=!0;break}s||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let s=this._namespaceLookup[t];s&&s.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const s=this._namespaceList.indexOf(n);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const s=Object.keys(n);for(let l=0;l<s.length;l++){const u=n[s[l]].namespaceId;if(u){const h=this._fetchNamespace(u);h&&e.add(h)}}}return e}trigger(t,e,n,s){if(KC(e)){const l=this._fetchNamespace(t);if(l)return l.trigger(e,n,s),!0}return!1}insertNode(t,e,n,s){if(!KC(e))return;const l=e[Da];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;const u=this.collectedLeaveElements.indexOf(e);u>=0&&this.collectedLeaveElements.splice(u,1)}if(t){const u=this._fetchNamespace(t);u&&u.insertNode(e,n)}s&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ra(t,w2)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),lg(t,w2))}removeNode(t,e,n,s){if(KC(e)){const l=t?this._fetchNamespace(t):null;if(l?l.removeNode(e,s):this.markElementAsRemoved(t,e,!1,s),n){const u=this.namespacesByHostElement.get(e);u&&u.id!==t&&u.removeNode(e,s)}}else this._onRemovalComplete(e,s)}markElementAsRemoved(t,e,n,s){this.collectedLeaveElements.push(e),e[Da]={namespaceId:t,setForRemoval:s,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,s,l){return KC(e)?this._fetchNamespace(t).listen(e,n,s,l):()=>{}}_buildInstruction(t,e,n,s,l){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,s,t.fromState.options,t.toState.options,e,l)}destroyInnerAnimations(t){let e=this.driver.query(t,BC,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,YD,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return _d(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Da];if(e&&e.setForRemoval){if(t[Da]=M2,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,S2)&&this.markElementAsDisabled(t,!1),this.driver.query(t,S2,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,s)=>this._balanceNamespaceList(n,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Ra(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let s=0;s<n.length;s++)n[s]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?_d(e).onDone(()=>{n.forEach(s=>s())}):n.forEach(s=>s())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new XC,s=[],l=new Map,u=[],h=new Map,p=new Map,g=new Map,b=new Set;this.disabledNodes.forEach(tt=>{b.add(tt);const Lt=this.driver.query(tt,".ng-animate-queued",!0);for(let Pt=0;Pt<Lt.length;Pt++)b.add(Lt[Pt])});const C=this.bodyNode,w=Array.from(this.statesByElement.keys()),x=x2(w,this.collectedEnterElements),N=new Map;let B=0;x.forEach((tt,Lt)=>{const Pt=XD+B++;N.set(Lt,Pt),tt.forEach(fn=>Ra(fn,Pt))});const V=[],$=new Set,te=new Set;for(let tt=0;tt<this.collectedLeaveElements.length;tt++){const Lt=this.collectedLeaveElements[tt],Pt=Lt[Da];Pt&&Pt.setForRemoval&&(V.push(Lt),$.add(Lt),Pt.hasAnimation?this.driver.query(Lt,".ng-star-inserted",!0).forEach(fn=>$.add(fn)):te.add(Lt))}const xe=new Map,Re=x2(w,Array.from($));Re.forEach((tt,Lt)=>{const Pt=PC+B++;xe.set(Lt,Pt),tt.forEach(fn=>Ra(fn,Pt))}),t.push(()=>{x.forEach((tt,Lt)=>{const Pt=N.get(Lt);tt.forEach(fn=>lg(fn,Pt))}),Re.forEach((tt,Lt)=>{const Pt=xe.get(Lt);tt.forEach(fn=>lg(fn,Pt))}),V.forEach(tt=>{this.processLeaveNode(tt)})});const Pe=[],nt=[];for(let tt=this._namespaceList.length-1;tt>=0;tt--)this._namespaceList[tt].drainQueuedTransitions(e).forEach(Pt=>{const fn=Pt.player,lr=Pt.element;if(Pe.push(fn),this.collectedEnterElements.length){const _o=lr[Da];if(_o&&_o.setForMove)return void fn.destroy()}const rt=!C||!this.driver.containsElement(C,lr),Kt=xe.get(lr),ai=N.get(lr),$n=this._buildInstruction(Pt,n,ai,Kt,rt);if($n.errors&&$n.errors.length)nt.push($n);else{if(rt)return fn.onStart(()=>tp(lr,$n.fromStyles)),fn.onDestroy(()=>Jl(lr,$n.toStyles)),void s.push(fn);if(Pt.isFallbackTransition)return fn.onStart(()=>tp(lr,$n.fromStyles)),fn.onDestroy(()=>Jl(lr,$n.toStyles)),void s.push(fn);$n.timelines.forEach(_o=>_o.stretchStartingKeyframe=!0),n.append(lr,$n.timelines),u.push({instruction:$n,player:fn,element:lr}),$n.queriedElements.forEach(_o=>ia(h,_o,[]).push(fn)),$n.preStyleProps.forEach((_o,ec)=>{const ki=Object.keys(_o);if(ki.length){let Gr=p.get(ec);Gr||p.set(ec,Gr=new Set),ki.forEach(sv=>Gr.add(sv))}}),$n.postStyleProps.forEach((_o,ec)=>{const ki=Object.keys(_o);let Gr=g.get(ec);Gr||g.set(ec,Gr=new Set),ki.forEach(sv=>Gr.add(sv))})}});if(nt.length){const tt=[];nt.forEach(Lt=>{tt.push(`@${Lt.triggerName} has failed due to:\n`),Lt.errors.forEach(Pt=>tt.push(`- ${Pt}\n`))}),Pe.forEach(Lt=>Lt.destroy()),this.reportError(tt)}const ct=new Map,St=new Map;u.forEach(tt=>{const Lt=tt.element;n.has(Lt)&&(St.set(Lt,Lt),this._beforeAnimationBuild(tt.player.namespaceId,tt.instruction,ct))}),s.forEach(tt=>{const Lt=tt.element;this._getPreviousPlayers(Lt,!1,tt.namespaceId,tt.triggerName,null).forEach(fn=>{ia(ct,Lt,[]).push(fn),fn.destroy()})});const At=V.filter(tt=>A2(tt,p,g)),Cn=new Map;R2(Cn,this.driver,te,g,nu).forEach(tt=>{A2(tt,p,g)&&At.push(tt)});const Mn=new Map;x.forEach((tt,Lt)=>{R2(Mn,this.driver,new Set(tt),p,"!")}),At.forEach(tt=>{const Lt=Cn.get(tt),Pt=Mn.get(tt);Cn.set(tt,Object.assign(Object.assign({},Lt),Pt))});const qn=[],Mt=[],Rt={};u.forEach(tt=>{const{element:Lt,player:Pt,instruction:fn}=tt;if(n.has(Lt)){if(b.has(Lt))return Pt.onDestroy(()=>Jl(Lt,fn.toStyles)),Pt.disabled=!0,Pt.overrideTotalTime(fn.totalTime),void s.push(Pt);let lr=Rt;if(St.size>1){let Kt=Lt;const ai=[];for(;Kt=Kt.parentNode;){const $n=St.get(Kt);if($n){lr=$n;break}ai.push(Kt)}ai.forEach($n=>St.set($n,lr))}const rt=this._buildAnimation(Pt.namespaceId,fn,ct,l,Mn,Cn);if(Pt.setRealPlayer(rt),lr===Rt)qn.push(Pt);else{const Kt=this.playersByElement.get(lr);Kt&&Kt.length&&(Pt.parentPlayer=_d(Kt)),s.push(Pt)}}else tp(Lt,fn.fromStyles),Pt.onDestroy(()=>Jl(Lt,fn.toStyles)),Mt.push(Pt),b.has(Lt)&&s.push(Pt)}),Mt.forEach(tt=>{const Lt=l.get(tt.element);if(Lt&&Lt.length){const Pt=_d(Lt);tt.setRealPlayer(Pt)}}),s.forEach(tt=>{tt.parentPlayer?tt.syncPlayerEvents(tt.parentPlayer):tt.destroy()});for(let tt=0;tt<V.length;tt++){const Lt=V[tt],Pt=Lt[Da];if(lg(Lt,PC),Pt&&Pt.hasAnimation)continue;let fn=[];if(h.size){let rt=h.get(Lt);rt&&rt.length&&fn.push(...rt);let Kt=this.driver.query(Lt,YD,!0);for(let ai=0;ai<Kt.length;ai++){let $n=h.get(Kt[ai]);$n&&$n.length&&fn.push(...$n)}}const lr=fn.filter(rt=>!rt.destroyed);lr.length?foe(this,Lt,lr):this.processLeaveNode(Lt)}return V.length=0,qn.forEach(tt=>{this.players.push(tt),tt.onDone(()=>{tt.destroy();const Lt=this.players.indexOf(tt);this.players.splice(Lt,1)}),tt.play()}),qn}elementContainsData(t,e){let n=!1;const s=e[Da];return s&&s.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,s,l){let u=[];if(e){const h=this.playersByQueriedElement.get(t);h&&(u=h)}else{const h=this.playersByElement.get(t);if(h){const p=!l||l==$_;h.forEach(g=>{g.queued||!p&&g.triggerName!=s||u.push(g)})}}return(n||s)&&(u=u.filter(h=>!(n&&n!=h.namespaceId||s&&s!=h.triggerName))),u}_beforeAnimationBuild(t,e,n){const l=e.element,u=e.isRemovalTransition?void 0:t,h=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const g=p.element,b=g!==l,C=ia(n,g,[]);this._getPreviousPlayers(g,b,u,h,e.toState).forEach(x=>{const N=x.getRealPlayer();N.beforeDestroy&&N.beforeDestroy(),x.destroy(),C.push(x)})}tp(l,e.fromStyles)}_buildAnimation(t,e,n,s,l,u){const h=e.triggerName,p=e.element,g=[],b=new Set,C=new Set,w=e.timelines.map(N=>{const B=N.element;b.add(B);const V=B[Da];if(V&&V.removedBeforeQueried)return new sg(N.duration,N.delay);const $=B!==p,te=function(r){const t=[];return I2(r,t),t}((n.get(B)||aoe).map(ct=>ct.getRealPlayer())).filter(ct=>!!ct.element&&ct.element===B),xe=l.get(B),Re=u.get(B),Pe=e2(0,this._normalizer,0,N.keyframes,xe,Re),nt=this._buildPlayer(N,Pe,te);if(N.subTimeline&&s&&C.add(B),$){const ct=new l0(t,h,B);ct.setRealPlayer(nt),g.push(ct)}return nt});g.forEach(N=>{ia(this.playersByQueriedElement,N.element,[]).push(N),N.onDone(()=>function(r,t,e){let n;if(r instanceof Map){if(n=r.get(t),n){if(n.length){const s=n.indexOf(e);n.splice(s,1)}0==n.length&&r.delete(t)}}else if(n=r[t],n){if(n.length){const s=n.indexOf(e);n.splice(s,1)}0==n.length&&delete r[t]}return n}(this.playersByQueriedElement,N.element,N))}),b.forEach(N=>Ra(N,c2));const x=_d(w);return x.onDestroy(()=>{b.forEach(N=>lg(N,c2)),Jl(p,e.toStyles)}),C.forEach(N=>{ia(s,N,[]).push(x)}),x}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new sg(t.duration,t.delay)}}class l0{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new sg,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>PD(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ia(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function KC(r){return r&&1===r.nodeType}function D2(r,t){const e=r.style.display;return r.style.display=null!=t?t:"none",e}function R2(r,t,e,n,s){const l=[];e.forEach(p=>l.push(D2(p)));const u=[];n.forEach((p,g)=>{const b={};p.forEach(C=>{const w=b[C]=t.computeStyle(g,C,s);(!w||0==w.length)&&(g[Da]=loe,u.push(g))}),r.set(g,b)});let h=0;return e.forEach(p=>D2(p,l[h++])),u}function x2(r,t){const e=new Map;if(r.forEach(h=>e.set(h,[])),0==t.length)return e;const s=new Set(t),l=new Map;function u(h){if(!h)return 1;let p=l.get(h);if(p)return p;const g=h.parentNode;return p=e.has(g)?g:s.has(g)?1:u(g),l.set(h,p),p}return t.forEach(h=>{const p=u(h);1!==p&&e.get(p).push(h)}),e}const JC="$$classes";function Ra(r,t){if(r.classList)r.classList.add(t);else{let e=r[JC];e||(e=r[JC]={}),e[t]=!0}}function lg(r,t){if(r.classList)r.classList.remove(t);else{let e=r[JC];e&&delete e[t]}}function foe(r,t,e){_d(e).onDone(()=>r.processLeaveNode(t))}function I2(r,t){for(let e=0;e<r.length;e++){const n=r[e];n instanceof ZB?I2(n.players,t):t.push(n)}}function A2(r,t,e){const n=e.get(r);if(!n)return!1;let s=t.get(r);return s?n.forEach(l=>s.add(l)):t.set(r,n),e.delete(r),!0}class QC{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(s,l)=>{},this._transitionEngine=new uoe(t,e,n),this._timelineEngine=new ioe(t,e,n),this._transitionEngine.onRemovalComplete=(s,l)=>this.onRemovalComplete(s,l)}registerTrigger(t,e,n,s,l){const u=t+"-"+s;let h=this._triggerCache[u];if(!h){const p=[],g=ZD(this._driver,l,p);if(p.length)throw new Error(`The animation trigger "${s}" has failed to build due to the following errors:\n - ${p.join("\n - ")}`);h=function(r,t,e){return new eoe(r,t,e)}(s,g,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(e,s,h)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,s){this._transitionEngine.insertNode(t,e,n,s)}onRemove(t,e,n,s){this._transitionEngine.removeNode(t,e,s||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,s){if("@"==n.charAt(0)){const[l,u]=t2(n);this._timelineEngine.command(l,e,u,s)}else this._transitionEngine.trigger(t,e,n,s)}listen(t,e,n,s,l){if("@"==n.charAt(0)){const[u,h]=t2(n);return this._timelineEngine.listen(u,e,h,l)}return this._transitionEngine.listen(t,e,n,s,l)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function O2(r,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=c0(t[0]),t.length>1&&(n=c0(t[t.length-1]))):t&&(e=c0(t)),e||n?new _oe(r,e,n):null}let _oe=(()=>{class r{constructor(e,n,s){this._element=e,this._startStyles=n,this._endStyles=s,this._state=0;let l=r.initialStylesByElement.get(e);l||r.initialStylesByElement.set(e,l={}),this._initialStyles=l}start(){this._state<1&&(this._startStyles&&Jl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Jl(this._element,this._initialStyles),this._endStyles&&(Jl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(tp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(tp(this._element,this._endStyles),this._endStyles=null),Jl(this._element,this._initialStyles),this._state=3)}}return r.initialStylesByElement=new WeakMap,r})();function c0(r){let t=null;const e=Object.keys(r);for(let n=0;n<e.length;n++){const s=e[n];voe(s)&&(t=t||{},t[s]=r[s])}return t}function voe(r){return"display"===r||"position"===r}const k2="animation",N2="animationend";class Coe{constructor(t,e,n,s,l,u,h){this._element=t,this._name=e,this._duration=n,this._delay=s,this._easing=l,this._fillMode=u,this._onDoneFn=h,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=p=>this._handleCallback(p)}apply(){(function(r,t){const e=d0(r,"").trim();let n=0;e.length&&(function(r,t){let e=0;for(let n=0;n<r.length;n++)","===r.charAt(n)&&e++;return e}(e)+1,t=`${e}, ${t}`),ZC(r,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),F2(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){L2(this._element,this._name,"paused")}resume(){L2(this._element,this._name,"running")}setPosition(t){const e=P2(this._element,this._name);this._position=t*this._duration,ZC(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),F2(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(r,t){const n=d0(r,"").split(","),s=u0(n,t);s>=0&&(n.splice(s,1),ZC(r,"",n.join(",")))}(this._element,this._name))}}function L2(r,t,e){ZC(r,"PlayState",e,P2(r,t))}function P2(r,t){const e=d0(r,"");return e.indexOf(",")>0?u0(e.split(","),t):u0([e],t)}function u0(r,t){for(let e=0;e<r.length;e++)if(r[e].indexOf(t)>=0)return e;return-1}function F2(r,t,e){e?r.removeEventListener(N2,t):r.addEventListener(N2,t)}function ZC(r,t,e,n){const s=k2+t;if(null!=n){const l=r.style[s];if(l.length){const u=l.split(",");u[n]=e,e=u.join(",")}}r.style[s]=e}function d0(r,t){return r.style[k2+t]||""}class B2{constructor(t,e,n,s,l,u,h,p){this.element=t,this.keyframes=e,this.animationName=n,this._duration=s,this._delay=l,this._finalStyles=h,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=s+l,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Coe(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:QD(this.element,n))})}this.currentSnapshot=t}}class Doe extends sg{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=s2(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class H2{constructor(){this._count=0}validateStyleProperty(t){return UD(t)}matchesElement(t,e){return GD(t,e)}containsElement(t,e){return WD(t,e)}query(t,e,n){return zD(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(h=>s2(h));let s=`@keyframes ${e} {\n`,l="";n.forEach(h=>{l=" ";const p=parseFloat(h.offset);s+=`${l}${100*p}% {\n`,l+=" ",Object.keys(h).forEach(g=>{const b=h[g];switch(g){case"offset":return;case"easing":return void(b&&(s+=`${l}animation-timing-function: ${b};\n`));default:return void(s+=`${l}${g}: ${b};\n`)}}),s+=`${l}}\n`}),s+="}\n";const u=document.createElement("style");return u.textContent=s,u}animate(t,e,n,s,l,u=[],h){const p=u.filter(V=>V instanceof B2),g={};f2(n,s)&&p.forEach(V=>{let $=V.currentSnapshot;Object.keys($).forEach(te=>g[te]=$[te])});const b=function(r){let t={};return r&&(Array.isArray(r)?r:[r]).forEach(n=>{Object.keys(n).forEach(s=>{"offset"==s||"easing"==s||(t[s]=n[s])})}),t}(e=g2(t,e,g));if(0==n)return new Doe(t,b);const C="gen_css_kf_"+this._count++,w=this.buildKeyframeElement(t,C,e);(function(r){var t;const e=null===(t=r.getRootNode)||void 0===t?void 0:t.call(r);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(t).appendChild(w);const N=O2(t,e),B=new B2(t,e,C,n,s,l,b,N);return B.onDestroy(()=>function(r){r.parentNode.removeChild(r)}(w)),B}}class G2{constructor(t,e,n,s){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:QD(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class Ooe{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(W2().toString()),this._cssKeyframesDriver=new H2}validateStyleProperty(t){return UD(t)}matchesElement(t,e){return GD(t,e)}containsElement(t,e){return WD(t,e)}query(t,e,n){return zD(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,s,l,u=[],h){if(!h&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,s,l,u);const b={duration:n,delay:s,fill:0==s?"both":"forwards"};l&&(b.easing=l);const C={},w=u.filter(N=>N instanceof G2);f2(n,s)&&w.forEach(N=>{let B=N.currentSnapshot;Object.keys(B).forEach(V=>C[V]=B[V])});const x=O2(t,e=g2(t,e=e.map(N=>vd(N,!1)),C));return new G2(t,e,b,x)}}function W2(){return qB()&&Element.prototype.animate||{}}let Noe=(()=>{class r extends YB{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:rr.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(e)?$B(e):e;return z2(this._renderer,null,n,"register",[s]),new Loe(n,this._renderer)}}return r.\u0275fac=function(e){return new(e||r)(be(Ch),be(Ut))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();class Loe extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Poe(this._id,t,e||{},this._renderer)}}class Poe{constructor(t,e,n,s){this.id=t,this.element=e,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return z2(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function z2(r,t,e,n,s){return r.setProperty(t,`@@${e}:${n}`,s)}const j2="@.disabled";let Foe=(()=>{class r{constructor(e,n,s){this.delegate=e,this.engine=n,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(l,u)=>{u&&u.parentNode(l)&&u.removeChild(l.parentNode,l)}}createRenderer(e,n){const l=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let b=this._rendererCache.get(l);return b||(b=new X2("",l,this.engine),this._rendererCache.set(l,b)),b}const u=n.id,h=n.id+"-"+this._currentId;this._currentId++,this.engine.register(h,e);const p=b=>{Array.isArray(b)?b.forEach(p):this.engine.registerTrigger(u,h,e,b.name,b)};return n.data.animation.forEach(p),new Boe(this,h,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,s){e>=0&&e<this._microtaskId?this._zone.run(()=>n(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(l=>{const[u,h]=l;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(e){return new(e||r)(be(Ch),be(QC),be(Xt))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();class X2{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,s=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,s)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,s){this.delegate.setAttribute(t,e,n,s)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,s){this.delegate.setStyle(t,e,n,s)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==j2?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Boe extends X2{constructor(t,e,n,s){super(e,n,s),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==j2?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const s=function(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(t);let l=e.substr(1),u="";return"@"!=l.charAt(0)&&([l,u]=function(r){const t=r.indexOf(".");return[r.substring(0,t),r.substr(t+1)]}(l)),this.engine.listen(this.namespaceId,s,l,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,n,h)})}return this.delegate.listen(t,e,n)}}let Uoe=(()=>{class r extends QC{constructor(e,n,s){super(e.body,n,s)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(e){return new(e||r)(be(Ut),be(jD),be(r0))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const Vi=new je("AnimationModuleType"),Y2=[{provide:YB,useClass:Noe},{provide:r0,useFactory:function(){return new $re}},{provide:QC,useClass:Uoe},{provide:Ch,useFactory:function(r,t,e){return new Foe(r,t,e)},deps:[Jb,QC,Xt]}],$2=[{provide:jD,useFactory:function(){return"function"==typeof W2()?new Ooe:new H2}},{provide:Vi,useValue:"BrowserAnimations"},...Y2],K2=[{provide:jD,useClass:a2},{provide:Vi,useValue:"NoopAnimations"},...Y2];let joe=(()=>{class r{static withConfig(e){return{ngModule:r,providers:e.disableAnimations?K2:$2}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:$2,imports:[SS]}),r})();const J2=new zu("12.2.13"),Zoe=new je("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let rn=(()=>{class r{constructor(e,n,s){this._hasDoneGlobalChecks=!1,this._document=s,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=n,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!(!Fw()||bD())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const n=getComputedStyle(e);n&&"none"!==n.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&J2.full!==XB.full&&console.warn("The Angular Material version ("+J2.full+") does not match the Angular CDK version ("+XB.full+").\nPlease ensure the versions of these two packages exactly match.")}}return r.\u0275fac=function(e){return new(e||r)(be(jB),be(Zoe,8),be(Ut))},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[ng],ng]}),r})();function Zo(r){return class extends r{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=bt(t)}}}function oa(r,t){return class extends r{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const n=e||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function ms(r){return class extends r{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=bt(t)}}}function iu(r,t=0){return class extends r{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?mi(e):this.defaultTabIndex}}}const qoe=new je("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return lh(Pc)}});class Ir{constructor(){this._localeChanges=new j,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let n=this.isValid(t),s=this.isValid(e);return n&&s?!this.compareDate(t,e):n==s}return t==e}clampDate(t,e,n){return e&&this.compareDate(t,e)<0?e:n&&this.compareDate(t,n)>0?n:t}}const Ql=new je("mat-date-formats");let ip;try{ip="undefined"!=typeof Intl}catch(r){ip=!1}const tse={long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"]},nse=tE(31,r=>String(r+1)),ise={long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"]},rse=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function tE(r,t){const e=Array(r);for(let n=0;n<r;n++)e[n]=t(n);return e}let ose=(()=>{class r extends Ir{constructor(e,n){super(),this.useUtcForDisplay=!0,super.setLocale(e),this.useUtcForDisplay=!n.TRIDENT,this._clampDate=n.TRIDENT||n.EDGE}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){if(ip){const n=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return tE(12,s=>this._stripDirectionalityCharacters(this._format(n,new Date(2017,s,1))))}return tse[e]}getDateNames(){if(ip){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return tE(31,n=>this._stripDirectionalityCharacters(this._format(e,new Date(2017,0,n+1))))}return nse}getDayOfWeekNames(e){if(ip){const n=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return tE(7,s=>this._stripDirectionalityCharacters(this._format(n,new Date(2017,0,s+1))))}return ise[e]}getYearName(e){if(ip){const n=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._stripDirectionalityCharacters(this._format(n,e))}return String(this.getYear(e))}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,n,s){let l=this._createDateWithOverflow(e,n,s);return l.getMonth(),l}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,n){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");if(ip){this._clampDate&&(e.getFullYear()<1||e.getFullYear()>9999)&&(e=this.clone(e)).setFullYear(Math.max(1,Math.min(9999,e.getFullYear()))),n=Object.assign(Object.assign({},n),{timeZone:"utc"});const s=new Intl.DateTimeFormat(this.locale,n);return this._stripDirectionalityCharacters(this._format(s,e))}return this._stripDirectionalityCharacters(e.toDateString())}addCalendarYears(e,n){return this.addCalendarMonths(e,12*n)}addCalendarMonths(e,n){let s=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+n,this.getDate(e));return this.getMonth(s)!=((this.getMonth(e)+n)%12+12)%12&&(s=this._createDateWithOverflow(this.getYear(s),this.getMonth(s),0)),s}addCalendarDays(e,n){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+n)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(rse.test(e)){let n=new Date(e);if(this.isValid(n))return n}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,n,s){const l=new Date;return l.setFullYear(e,n,s),l.setHours(0,0,0,0),l}_2digit(e){return("00"+e).slice(-2)}_stripDirectionalityCharacters(e){return e.replace(/[\u200e\u200f]/g,"")}_format(e,n){const s=new Date;return s.setUTCFullYear(n.getFullYear(),n.getMonth(),n.getDate()),s.setUTCHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e.format(s)}}return r.\u0275fac=function(e){return new(e||r)(be(qoe,8),be(jn))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),ase=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[{provide:Ir,useClass:ose}],imports:[[eg]]}),r})();const lse={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let cse=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[{provide:Ql,useValue:lse}],imports:[[ase]]}),r})(),ml=(()=>{class r{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({factory:function(){return new r},token:r,providedIn:"root"}),r})(),f0=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Te({type:r,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),r})();function g0(r,t,e="mat"){r.changes.pipe(Bi(r)).subscribe(({length:n})=>{K_(t,`${e}-2-line`,!1),K_(t,`${e}-3-line`,!1),K_(t,`${e}-multi-line`,!1),2===n||3===n?K_(t,`${e}-${n}-line`,!0):n>3&&K_(t,`${e}-multi-line`,!0)})}function K_(r,t,e){const n=r.nativeElement.classList;e?n.add(t):n.remove(t)}let nE=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[rn],rn]}),r})();class use{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Z2={enterDuration:225,exitDuration:150},m0=cd({passive:!0}),q2=["mousedown","touchstart"],eV=["mouseup","mouseleave","touchend","touchcancel"];class _0{constructor(t,e,n,s){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=Zc(n))}fadeInRipple(t,e,n={}){const s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),l=Object.assign(Object.assign({},Z2),n.animation);n.centered&&(t=s.left+s.width/2,e=s.top+s.height/2);const u=n.radius||function(r,t,e){const n=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),s=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+s*s)}(t,e,s),h=t-s.left,p=e-s.top,g=l.enterDuration,b=document.createElement("div");b.classList.add("mat-ripple-element"),b.style.left=h-u+"px",b.style.top=p-u+"px",b.style.height=2*u+"px",b.style.width=2*u+"px",null!=n.color&&(b.style.backgroundColor=n.color),b.style.transitionDuration=`${g}ms`,this._containerElement.appendChild(b),function(r){window.getComputedStyle(r).getPropertyValue("opacity")}(b),b.style.transform="scale(1)";const C=new use(this,b,n);return C.state=0,this._activeRipples.add(C),n.persistent||(this._mostRecentTransientRipple=C),this._runTimeoutOutsideZone(()=>{const w=C===this._mostRecentTransientRipple;C.state=1,!n.persistent&&(!w||!this._isPointerDown)&&C.fadeOut()},g),C}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,s=Object.assign(Object.assign({},Z2),t.config.animation);n.style.transitionDuration=`${s.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},s.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Zc(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(q2))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(eV),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=ID(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!AD(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,m0)})})}_removeTriggerEvents(){this._triggerElement&&(q2.forEach(t=>{this._triggerElement.removeEventListener(t,this,m0)}),this._pointerUpEventsRegistered&&eV.forEach(t=>{this._triggerElement.removeEventListener(t,this,m0)}))}}const iE=new je("mat-ripple-global-options");let qo=(()=>{class r{constructor(e,n,s,l,u){this._elementRef=e,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=l||{},this._rippleRenderer=new _0(this,n,e,s)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,s){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,n,Object.assign(Object.assign({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return r.\u0275fac=function(e){return new(e||r)(k(qe),k(Xt),k(jn),k(iE,8),k(Vi,8))},r.\u0275dir=Te({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,n){2&e&&xt("mat-ripple-unbounded",n.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),r})(),_l=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[rn,eg],rn]}),r})(),v0=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[rn]]}),r})(),sE=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[_l,Jr,rn,v0]]}),r})();const oV=["mat-button",""],sV=["*"],aV=".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n",bse=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],yse=oa(Zo(ms(class{constructor(r){this._elementRef=r}})));let bd=(()=>{class r extends yse{constructor(e,n,s){super(e),this._focusMonitor=n,this._animationMode=s,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const l of bse)this._hasHostAttributes(l)&&this._getHostElement().classList.add(l);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,n){e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(n=>this._getHostElement().hasAttribute(n))}}return r.\u0275fac=function(e){return new(e||r)(k(qe),k(Ur),k(Vi,8))},r.\u0275cmp=Tt({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,n){if(1&e&&gn(qo,5),2&e){let s;Ye(s=$e())&&(n.ripple=s.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,n){2&e&&(yt("disabled",n.disabled||null),xt("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[He],attrs:oV,ngContentSelectors:sV,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,n){1&e&&(On(),ge(0,"span",0),Ht(1),me(),Nt(2,"span",1),Nt(3,"span",2)),2&e&&(Ae(2),xt("mat-button-ripple-round",n.isRoundButton||n.isIconButton),ke("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},directives:[qo],styles:[aV],encapsulation:2,changeDetection:0}),r})(),Cse=(()=>{class r extends bd{constructor(e,n,s){super(n,e,s)}_haltDisabledEvents(e){this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}}return r.\u0275fac=function(e){return new(e||r)(k(Ur),k(qe),k(Vi,8))},r.\u0275cmp=Tt({type:r,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(e,n){1&e&&ft("click",function(l){return n._haltDisabledEvents(l)}),2&e&&(yt("tabindex",n.disabled?-1:n.tabIndex||0)("disabled",n.disabled||null)("aria-disabled",n.disabled.toString()),xt("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[He],attrs:oV,ngContentSelectors:sV,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,n){1&e&&(On(),ge(0,"span",0),Ht(1),me(),Nt(2,"span",1),Nt(3,"span",2)),2&e&&(Ae(2),xt("mat-button-ripple-round",n.isRoundButton||n.isIconButton),ke("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},directives:[qo],styles:[aV],encapsulation:2,changeDetection:0}),r})(),rp=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[_l,rn],rn]}),r})();const lV=new Set;let cg,cV=(()=>{class r{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Tse}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function(r){if(!lV.has(r))try{cg||(cg=document.createElement("style"),cg.setAttribute("type","text/css"),document.head.appendChild(cg)),cg.sheet&&(cg.sheet.insertRule(`@media ${r} {body{ }}`,0),lV.add(r))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return r.\u0275fac=function(e){return new(e||r)(be(jn))},r.\u0275prov=Et({factory:function(){return new r(be(jn))},token:r,providedIn:"root"}),r})();function Tse(r){return{matches:"all"===r||""===r,media:r,addListener:()=>{},removeListener:()=>{}}}let J_=(()=>{class r{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new j}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return uV(bC(e)).some(s=>this._registerQuery(s).mql.matches)}observe(e){let l=gN(uV(bC(e)).map(u=>this._registerQuery(u).observable));return l=cy(l.pipe(Fi(1)),l.pipe(MB(1),RC(0))),l.pipe(ye(u=>{const h={matches:!1,breakpoints:{}};return u.forEach(({matches:p,query:g})=>{h.matches=h.matches||p,h.breakpoints[g]=p}),h}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const n=this._mediaMatcher.matchMedia(e),l={observable:new q(u=>{const h=p=>this._zone.run(()=>u.next(p));return n.addListener(h),()=>{n.removeListener(h)}}).pipe(Bi(n),ye(({matches:u})=>({query:e,matches:u})),un(this._destroySubject)),mql:n};return this._queries.set(e,l),l}}return r.\u0275fac=function(e){return new(e||r)(be(cV),be(Xt))},r.\u0275prov=Et({factory:function(){return new r(be(cV),be(Xt))},token:r,providedIn:"root"}),r})();function uV(r){return r.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function wse(r,t){if(1&r){const e=er();ge(0,"div",1),ge(1,"button",2),ft("click",function(){return Wn(e),gt().action()}),It(2),me(),me()}if(2&r){const e=gt();Ae(2),ar(e.data.action)}}function Sse(r,t){}const dV=new je("MatSnackBarData");class aE{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const Mse=Math.pow(2,31)-1;class C0{constructor(t,e){this._overlayRef=e,this._afterDismissed=new j,this._afterOpened=new j,this._onAction=new j,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe(()=>this.dismiss()),t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,Mse))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let Dse=(()=>{class r{constructor(e,n){this.snackBarRef=e,this.data=n}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return r.\u0275fac=function(e){return new(e||r)(k(C0),k(dV))},r.\u0275cmp=Tt({type:r,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,n){1&e&&(ge(0,"span"),It(1),me(),Ct(2,wse,3,1,"div",0)),2&e&&(Ae(1),ar(n.data.message),Ae(1),ke("ngIf",n.hasAction))},directives:[fo,bd],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),r})();const Rse={snackBarState:Tr("state",[Xn("void, hidden",Zt({transform:"scale(0.8)",opacity:0})),Xn("visible",Zt({transform:"scale(1)",opacity:1})),oi("* => visible",di("150ms cubic-bezier(0, 0, 0.2, 1)")),oi("* => void, * => hidden",di("75ms cubic-bezier(0.4, 0.0, 1, 1)",Zt({opacity:0})))])};let xse=(()=>{class r extends U_{constructor(e,n,s,l,u){super(),this._ngZone=e,this._elementRef=n,this._changeDetectorRef=s,this._platform=l,this.snackBarConfig=u,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new j,this._onExit=new j,this._onEnter=new j,this._animationState="void",this.attachDomPortal=h=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(h)),this._live="assertive"!==u.politeness||u.announcementMessage?"off"===u.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}onAnimationEnd(e){const{fromState:n,toState:s}=e;if(("void"===s&&"void"!==n||"hidden"===s)&&this._completeExit(),"visible"===s){const l=this._onEnter;this._ngZone.run(()=>{l.next(),l.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Fi(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const e=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(s=>e.classList.add(s)):e.classList.add(n)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&n){let s=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(s=document.activeElement),e.removeAttribute("aria-hidden"),n.appendChild(e),null==s||s.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return r.\u0275fac=function(e){return new(e||r)(k(Xt),k(qe),k(bn),k(jn),k(aE))},r.\u0275cmp=Tt({type:r,selectors:[["snack-bar-container"]],viewQuery:function(e,n){if(1&e&&gn(gs,7),2&e){let s;Ye(s=$e())&&(n._portalOutlet=s.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,n){1&e&&vh("@state.done",function(l){return n.onAnimationEnd(l)}),2&e&&bh("@state",n._animationState)},features:[He],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,n){1&e&&(ge(0,"div",0),Ct(1,Sse,0,0,"ng-template",1),me(),Nt(2,"div")),2&e&&(Ae(2),yt("aria-live",n._live)("role",n._role))},directives:[gs],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[Rse.snackBarState]}}),r})(),hV=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[md,pd,Jr,rp,rn],rn]}),r})();const pV=new je("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new aE}});let Ase=(()=>{class r{constructor(e,n,s,l,u,h){this._overlay=e,this._live=n,this._injector=s,this._breakpointObserver=l,this._parentSnackBar=u,this._defaultConfig=h,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Dse,this.snackBarContainerComponent=xse,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,n){return this._attach(e,n)}openFromTemplate(e,n){return this._attach(e,n)}open(e,n="",s){const l=Object.assign(Object.assign({},this._defaultConfig),s);return l.data={message:e,action:n},l.announcementMessage===e&&(l.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,l)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,n){const l=Yn.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:aE,useValue:n}]}),u=new hd(this.snackBarContainerComponent,n.viewContainerRef,l),h=e.attach(u);return h.instance.snackBarConfig=n,h.instance}_attach(e,n){const s=Object.assign(Object.assign(Object.assign({},new aE),this._defaultConfig),n),l=this._createOverlay(s),u=this._attachSnackBarContainer(l,s),h=new C0(u,l);if(e instanceof ci){const p=new Sa(e,null,{$implicit:s.data,snackBarRef:h});h.instance=u.attachTemplatePortal(p)}else{const p=this._createInjector(s,h),g=new hd(e,void 0,p),b=u.attachComponentPortal(g);h.instance=b.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(un(l.detachments())).subscribe(p=>{const g=l.overlayElement.classList;p.matches?g.add(this.handsetCssClass):g.remove(this.handsetCssClass)}),s.announcementMessage&&u._onAnnounce.subscribe(()=>{this._live.announce(s.announcementMessage,s.politeness)}),this._animateSnackBar(h,s),this._openedSnackBarRef=h,this._openedSnackBarRef}_animateSnackBar(e,n){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),n.duration&&n.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(n.duration))}_createOverlay(e){const n=new Jh;n.direction=e.direction;let s=this._overlay.position().global();const l="rtl"===e.direction,u="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!l||"end"===e.horizontalPosition&&l,h=!u&&"center"!==e.horizontalPosition;return u?s.left("0"):h?s.right("0"):s.centerHorizontally(),"top"===e.verticalPosition?s.top("0"):s.bottom("0"),n.positionStrategy=s,this._overlay.create(n)}_createInjector(e,n){return Yn.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:C0,useValue:n},{provide:dV,useValue:e.data}]})}}return r.\u0275fac=function(e){return new(e||r)(be(mo),be(kC),be(Yn),be(J_),be(r,12),be(pV))},r.\u0275prov=Et({factory:function(){return new r(be(mo),be(kC),be(mh),be(J_),be(r,12),be(pV))},token:r,providedIn:hV}),r})();const fV=["*"],Ose=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],kse=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"],gV=".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n";class Nse{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(n=>this._trackTile(n))}_trackTile(t){const e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new Lse(this.rowIndex,e)}_findMatchingGap(t){let e=-1,n=-1;do{this.columnIndex+t>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),n=this._findGapEndIndex(e)):(e=this.tracker.indexOf(0,this.columnIndex),-1!=e?(n=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),n=this._findGapEndIndex(e)))}while(n-e<t||0==n);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(t,e){for(let n=0;n<e.colspan;n++)this.tracker[t+n]=e.rowspan}}class Lse{constructor(t,e){this.row=t,this.col=e}}const mV=new je("MAT_GRID_LIST");let _V=(()=>{class r{constructor(e,n){this._element=e,this._gridList=n,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round(mi(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round(mi(e))}_setStyle(e,n){this._element.nativeElement.style[e]=n}}return r.\u0275fac=function(e){return new(e||r)(k(qe),k(mV,8))},r.\u0275cmp=Tt({type:r,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(e,n){2&e&&yt("rowspan",n.rowspan)("colspan",n.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:fV,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(e,n){1&e&&(On(),ge(0,"div",0),Ht(1),me())},styles:[gV],encapsulation:2,changeDetection:0}),r})(),Pse=(()=>{class r{constructor(e){this._element=e}ngAfterContentInit(){g0(this._lines,this._element)}}return r.\u0275fac=function(e){return new(e||r)(k(qe))},r.\u0275cmp=Tt({type:r,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(e,n,s){if(1&e&&sn(s,f0,5),2&e){let l;Ye(l=$e())&&(n._lines=l)}},ngContentSelectors:kse,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(e,n){1&e&&(On(Ose),Ht(0),ge(1,"div",0),Ht(2,1),me(),Ht(3,2))},encapsulation:2,changeDetection:0}),r})(),Fse=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Te({type:r,selectors:[["mat-grid-tile-header"]],hostAttrs:[1,"mat-grid-tile-header"]}),r})();const Bse=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class E0{constructor(){this._rows=0,this._rowspan=0}init(t,e,n,s){this._gutterSize=vV(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=n,this._direction=s}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return 0===e?"0":op(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,n){let s=100/this._cols,l=(this._cols-1)/this._cols;this.setColStyles(t,n,s,l),this.setRowStyles(t,e,s,l)}setColStyles(t,e,n,s){let l=this.getBaseTileSize(n,s);t._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(l,e)),t._setStyle("width",op(this.getTileSize(l,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}}class Vse extends E0{constructor(t){super(),this.fixedRowHeight=t}init(t,e,n,s){super.init(t,e,n,s),this.fixedRowHeight=vV(this.fixedRowHeight),Bse.test(this.fixedRowHeight)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",op(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",op(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}class Hse extends E0{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,n,s){this.baseTileHeight=this.getBaseTileSize(n/this.rowHeightRatio,s),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",op(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",op(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(t){const e=t.split(":");this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class Use extends E0{setRowStyles(t,e){let l=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);t._setStyle("top",this.getTilePosition(l,e)),t._setStyle("height",op(this.getTileSize(l,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}function op(r){return`calc(${r})`}function vV(r){return r.match(/([A-Za-z%]+)$/)?r:`${r}px`}let Wse=(()=>{class r{constructor(e,n){this._element=e,this._dir=n,this._gutter="1px"}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(mi(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${null==e?"":e}`}get rowHeight(){return this._rowHeight}set rowHeight(e){const n=`${null==e?"":e}`;n!==this._rowHeight&&(this._rowHeight=n,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===e?new Use:e&&e.indexOf(":")>-1?new Hse(e):new Vse(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new Nse);const e=this._tileCoordinator,n=this._tiles.filter(l=>!l._gridList||l._gridList===this),s=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,n),this._tileStyler.init(this.gutterSize,e,this.cols,s),n.forEach((l,u)=>{const h=e.positions[u];this._tileStyler.setStyle(l,h.row,h.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}}return r.\u0275fac=function(e){return new(e||r)(k(qe),k(Ii,8))},r.\u0275cmp=Tt({type:r,selectors:[["mat-grid-list"]],contentQueries:function(e,n,s){if(1&e&&sn(s,_V,5),2&e){let l;Ye(l=$e())&&(n._tiles=l)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(e,n){2&e&&yt("cols",n.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[vt([{provide:mV,useExisting:r}])],ngContentSelectors:fV,decls:2,vars:0,template:function(e,n){1&e&&(On(),ge(0,"div"),Ht(1),me())},styles:[gV],encapsulation:2,changeDetection:0}),r})(),zse=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[nE,rn],nE,rn]}),r})();const jse=["*"];function bV(r){return Error(`Unable to find icon with the name "${r}"`)}function yV(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function CV(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}class sp{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let lE=(()=>{class r{constructor(e,n,s,l){this._httpClient=e,this._sanitizer=n,this._errorHandler=l,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=s}addSvgIcon(e,n,s){return this.addSvgIconInNamespace("",e,n,s)}addSvgIconLiteral(e,n,s){return this.addSvgIconLiteralInNamespace("",e,n,s)}addSvgIconInNamespace(e,n,s,l){return this._addSvgIconConfig(e,n,new sp(s,null,l))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,s,l){const u=this._sanitizer.sanitize(vi.HTML,s);if(!u)throw CV(s);return this._addSvgIconConfig(e,n,new sp("",u,l))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,s){return this._addSvgIconSetConfig(e,new sp(n,null,s))}addSvgIconSetLiteralInNamespace(e,n,s){const l=this._sanitizer.sanitize(vi.HTML,n);if(!l)throw CV(n);return this._addSvgIconSetConfig(e,new sp("",l,s))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const n=this._sanitizer.sanitize(vi.RESOURCE_URL,e);if(!n)throw yV(e);const s=this._cachedIconsByUrl.get(n);return s?an(cE(s)):this._loadSvgIconFromConfig(new sp(e,null)).pipe(Qr(l=>this._cachedIconsByUrl.set(n,l)),ye(l=>cE(l)))}getNamedSvgIcon(e,n=""){const s=EV(n,e);let l=this._svgIconConfigs.get(s);if(l)return this._getSvgFromConfig(l);if(l=this._getIconConfigFromResolvers(n,e),l)return this._svgIconConfigs.set(s,l),this._getSvgFromConfig(l);const u=this._iconSetConfigs.get(n);return u?this._getSvgFromIconSetConfigs(e,u):HF(bV(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?an(cE(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(ye(n=>cE(n)))}_getSvgFromIconSetConfigs(e,n){const s=this._extractIconWithNameFromAnySet(e,n);return s?an(s):g1(n.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(td(h=>{const g=`Loading icon set URL: ${this._sanitizer.sanitize(vi.RESOURCE_URL,u.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(g)),an(null)})))).pipe(ye(()=>{const u=this._extractIconWithNameFromAnySet(e,n);if(!u)throw bV(e);return u}))}_extractIconWithNameFromAnySet(e,n){for(let s=n.length-1;s>=0;s--){const l=n[s];if(l.svgText&&l.svgText.indexOf(e)>-1){const u=this._svgElementFromConfig(l),h=this._extractSvgIconFromSet(u,e,l.options);if(h)return h}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Qr(n=>e.svgText=n),ye(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?an(null):this._fetchIcon(e).pipe(Qr(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,s){const l=e.querySelector(`[id="${n}"]`);if(!l)return null;const u=l.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,s);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),s);const h=this._svgElementFromString("<svg></svg>");return h.appendChild(u),this._setSvgAttributes(h,s)}_svgElementFromString(e){const n=this._document.createElement("DIV");n.innerHTML=e;const s=n.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(e){const n=this._svgElementFromString("<svg></svg>"),s=e.attributes;for(let l=0;l<s.length;l++){const{name:u,value:h}=s[l];"id"!==u&&n.setAttribute(u,h)}for(let l=0;l<e.childNodes.length;l++)e.childNodes[l].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[l].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){var n;const{url:s,options:l}=e,u=null!==(n=null==l?void 0:l.withCredentials)&&void 0!==n&&n;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==s)throw Error(`Cannot fetch icon from URL "${s}".`);const h=this._sanitizer.sanitize(vi.RESOURCE_URL,s);if(!h)throw yV(s);const p=this._inProgressUrlFetches.get(h);if(p)return p;const g=this._httpClient.get(h,{responseType:"text",withCredentials:u}).pipe(yN(()=>this._inProgressUrlFetches.delete(h)),Ot());return this._inProgressUrlFetches.set(h,g),g}_addSvgIconConfig(e,n,s){return this._svgIconConfigs.set(EV(e,n),s),this}_addSvgIconSetConfig(e,n){const s=this._iconSetConfigs.get(e);return s?s.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){const n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let s=0;s<this._resolvers.length;s++){const l=this._resolvers[s](n,e);if(l)return $se(l)?new sp(l.url,null,l.options):new sp(l,null)}}}return r.\u0275fac=function(e){return new(e||r)(be(qf,8),be(Bf),be(Ut,8),be(xs))},r.\u0275prov=Et({factory:function(){return new r(be(qf,8),be(Bf),be(Ut,8),be(xs))},token:r,providedIn:"root"}),r})();function cE(r){return r.cloneNode(!0)}function EV(r,t){return r+":"+t}function $se(r){return!(!r.url||!r.options)}const Kse=oa(class{constructor(r){this._elementRef=r}}),Jse=new je("mat-icon-location",{providedIn:"root",factory:function(){const r=lh(Ut),t=r?r.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),TV=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],qse=TV.map(r=>`[${r}]`).join(", "),eae=/^url\(['"]?#(.*?)['"]?\)$/;let T0=(()=>{class r extends Kse{constructor(e,n,s,l,u){super(e),this._iconRegistry=n,this._location=l,this._errorHandler=u,this._inline=!1,this._currentIconFetch=D.EMPTY,s||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=bt(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const n=e.querySelectorAll("style");for(let l=0;l<n.length;l++)n[l].textContent+=" ";const s=this._location.getPathname();this._previousPath=s,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(s),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const s=e.childNodes[n];(1!==s.nodeType||"svg"===s.nodeName.toLowerCase())&&e.removeChild(s)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,n=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();n!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),n&&e.classList.add(n),this._previousFontSetClass=n),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const n=this._elementsWithExternalReferences;n&&n.forEach((s,l)=>{s.forEach(u=>{l.setAttribute(u.name,`url('${e}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(e){const n=e.querySelectorAll(qse),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let l=0;l<n.length;l++)TV.forEach(u=>{const h=n[l],p=h.getAttribute(u),g=p?p.match(eae):null;if(g){let b=s.get(h);b||(b=[],s.set(h,b)),b.push({name:u,value:g[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[n,s]=this._splitIconName(e);n&&(this._svgNamespace=n),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,n).pipe(Fi(1)).subscribe(l=>this._setSvgElement(l),l=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${s}! ${l.message}`))})}}}return r.\u0275fac=function(e){return new(e||r)(k(qe),k(lE),qi("aria-hidden"),k(Jse),k(xs))},r.\u0275cmp=Tt({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,n){2&e&&(yt("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet),xt("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[He],ngContentSelectors:jse,decls:1,vars:0,template:function(e,n){1&e&&(On(),Ht(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),r})(),w0=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[rn],rn]}),r})();const tae=["mat-menu-item",""];function nae(r,t){1&r&&(jr(),ge(0,"svg",2),Nt(1,"polygon",3),me())}const wV=["*"];function iae(r,t){if(1&r){const e=er();ge(0,"div",0),ft("keydown",function(s){return Wn(e),gt()._handleKeydown(s)})("click",function(){return Wn(e),gt().closed.emit("click")})("@transformMenu.start",function(s){return Wn(e),gt()._onAnimationStart(s)})("@transformMenu.done",function(s){return Wn(e),gt()._onAnimationDone(s)}),ge(1,"div",1),Ht(2),me(),me()}if(2&r){const e=gt();ke("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),yt("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const uE={transformMenu:Tr("transformMenu",[Xn("void",Zt({opacity:0,transform:"scale(0.8)"})),oi("void => enter",di("120ms cubic-bezier(0, 0, 0.2, 1)",Zt({opacity:1,transform:"scale(1)"}))),oi("* => void",di("100ms 25ms linear",Zt({opacity:0})))]),fadeInItems:Tr("fadeInItems",[Xn("showing",Zt({opacity:1})),oi("void => *",[Zt({opacity:0}),di("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},SV=new je("MatMenuContent"),S0=new je("MAT_MENU_PANEL"),oae=ms(Zo(class{}));let dE=(()=>{class r extends oae{constructor(e,n,s,l,u){super(),this._elementRef=e,this._focusMonitor=s,this._parentMenu=l,this._changeDetectorRef=u,this.role="menuitem",this._hovered=new j,this._focused=new j,this._highlighted=!1,this._triggersSubmenu=!1,l&&l.addItem&&l.addItem(this)}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var e,n;const s=this._elementRef.nativeElement.cloneNode(!0),l=s.querySelectorAll("mat-icon, .material-icons");for(let u=0;u<l.length;u++){const h=l[u];null===(e=h.parentNode)||void 0===e||e.removeChild(h)}return(null===(n=s.textContent)||void 0===n?void 0:n.trim())||""}_setHighlighted(e){var n;this._highlighted=e,null===(n=this._changeDetectorRef)||void 0===n||n.markForCheck()}}return r.\u0275fac=function(e){return new(e||r)(k(qe),k(Ut),k(Ur),k(S0,8),k(bn))},r.\u0275cmp=Tt({type:r,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,n){1&e&&ft("click",function(l){return n._checkDisabled(l)})("mouseenter",function(){return n._handleMouseEnter()}),2&e&&(yt("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled.toString())("disabled",n.disabled||null),xt("mat-menu-item",!0)("mat-menu-item-highlighted",n._highlighted)("mat-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[He],attrs:tae,ngContentSelectors:wV,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,n){1&e&&(On(),Ht(0),Nt(1,"div",0),Ct(2,nae,2,0,"svg",1)),2&e&&(Ae(1),ke("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),Ae(1),ke("ngIf",n._triggersSubmenu))},directives:[qo,fo],encapsulation:2,changeDetection:0}),r})();const MV=new je("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let aae=0,Q_=(()=>{class r{constructor(e,n,s){this._elementRef=e,this._ngZone=n,this._defaultOptions=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new na,this._tabSubscription=D.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new j,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new st,this.close=this.closed,this.panelId="mat-menu-panel-"+aae++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=bt(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=bt(e)}set panelClass(e){const n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach(s=>{this._classList[s]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(s=>{this._classList[s]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new rg(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Bi(this._directDescendantItems),Oo(e=>qt(...e.map(n=>n._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Bi(this._directDescendantItems),Oo(n=>qt(...n.map(s=>s._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const n=e.keyCode,s=this._keyManager;switch(n){case 27:Er(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(38===n||40===n)&&s.setFocusOrigin("keyboard"),s.onKeydown(e)}}focusFirstItem(e="program"){this.lazyContent?this._ngZone.onStable.pipe(Fi(1)).subscribe(()=>this._focusFirstItem(e)):this._focusFirstItem(e)}_focusFirstItem(e){const n=this._keyManager;if(n.setFocusOrigin(e).setFirstItemActive(),!n.activeItem&&this._directDescendantItems.length){let s=this._directDescendantItems.first._getHostElement().parentElement;for(;s;){if("menu"===s.getAttribute("role")){s.focus();break}s=s.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const n=Math.min(this._baseElevation+e,24),s=`${this._elevationPrefix}${n}`,l=Object.keys(this._classList).find(u=>u.startsWith(this._elevationPrefix));(!l||l===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[s]=!0,this._previousElevation=s)}setPositionClasses(e=this.xPosition,n=this.yPosition){const s=this._classList;s["mat-menu-before"]="before"===e,s["mat-menu-after"]="after"===e,s["mat-menu-above"]="above"===n,s["mat-menu-below"]="below"===n}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Bi(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return r.\u0275fac=function(e){return new(e||r)(k(qe),k(Xt),k(MV))},r.\u0275dir=Te({type:r,contentQueries:function(e,n,s){if(1&e&&(sn(s,SV,5),sn(s,dE,5),sn(s,dE,4)),2&e){let l;Ye(l=$e())&&(n.lazyContent=l.first),Ye(l=$e())&&(n._allItems=l),Ye(l=$e())&&(n.items=l)}},viewQuery:function(e,n){if(1&e&&gn(ci,5),2&e){let s;Ye(s=$e())&&(n.templateRef=s.first)}},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),r})(),DV=(()=>{class r extends Q_{constructor(e,n,s){super(e,n,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return r.\u0275fac=function(e){return new(e||r)(k(qe),k(Xt),k(MV))},r.\u0275cmp=Tt({type:r,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,n){2&e&&yt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[vt([{provide:S0,useExisting:r}]),He],ngContentSelectors:wV,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,n){1&e&&(On(),Ct(0,iae,3,6,"ng-template"))},directives:[Ah],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[uE.transformMenu,uE.fadeInItems]},changeDetection:0}),r})();const RV=new je("mat-menu-scroll-strategy"),cae={provide:RV,deps:[mo],useFactory:function(r){return()=>r.scrollStrategies.reposition()}},IV=cd({passive:!0});let uae=(()=>{class r{constructor(e,n,s,l,u,h,p,g){this._overlay=e,this._element=n,this._viewContainerRef=s,this._menuItemInstance=h,this._dir=p,this._focusMonitor=g,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=D.EMPTY,this._hoverSubscription=D.EMPTY,this._menuCloseSubscription=D.EMPTY,this._handleTouchStart=b=>{AD(b)||(this._openedBy="touch")},this._openedBy=void 0,this._ariaHaspopup=!0,this.restoreFocus=!0,this.menuOpened=new st,this.onMenuOpen=this.menuOpened,this.menuClosed=new st,this.onMenuClose=this.menuClosed,this._scrollStrategy=l,this._parentMaterialMenu=u instanceof Q_?u:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,IV),h&&(h._triggersSubmenu=this.triggersSubmenu())}get _ariaExpanded(){return this.menuOpen||null}get _ariaControl(){return this.menuOpen?this.menu.panelId:null}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(n=>{this._destroyMenu(n),("click"===n||"tab"===n)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,IV),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),n=e.getConfig();this._setPosition(n.positionStrategy),n.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Q_&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}updatePosition(){var e;null===(e=this._overlayRef)||void 0===e||e.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof Q_?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(yi(s=>"void"===s.toState),Fi(1),un(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n.lazyContent&&n.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,n=this.menu.parentMenu;for(;n;)e++,n=n.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new Jh({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(n=>{this.menu.setPositionClasses("start"===n.connectionPair.overlayX?"after":"before","top"===n.connectionPair.overlayY?"below":"above")})}_setPosition(e){let[n,s]="before"===this.menu.xPosition?["end","start"]:["start","end"],[l,u]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[h,p]=[l,u],[g,b]=[n,s],C=0;this.triggersSubmenu()?(b=n="before"===this.menu.xPosition?"start":"end",s=g="end"===n?"start":"end",C="bottom"===l?8:-8):this.menu.overlapTrigger||(h="top"===l?"bottom":"top",p="top"===u?"bottom":"top"),e.withPositions([{originX:n,originY:h,overlayX:g,overlayY:l,offsetY:C},{originX:s,originY:h,overlayX:b,overlayY:l,offsetY:C},{originX:n,originY:p,overlayX:g,overlayY:u,offsetY:-C},{originX:s,originY:p,overlayX:b,overlayY:u,offsetY:-C}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments();return qt(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:an(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(yi(u=>u!==this._menuItemInstance),yi(()=>this._menuOpen)):an(),n)}_handleMousedown(e){ID(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const n=e.keyCode;(13===n||32===n)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===n&&"ltr"===this.dir||37===n&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(yi(e=>e===this._menuItemInstance&&!e.disabled),_C(0,mD)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Q_&&this.menu._isAnimating?this.menu._animationDone.pipe(Fi(1),_C(0,mD),un(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new Sa(this.menu.templateRef,this._viewContainerRef)),this._portal}}return r.\u0275fac=function(e){return new(e||r)(k(mo),k(qe),k(bi),k(RV),k(S0,8),k(dE,10),k(Ii,8),k(Ur))},r.\u0275dir=Te({type:r,hostVars:3,hostBindings:function(e,n){1&e&&ft("mousedown",function(l){return n._handleMousedown(l)})("keydown",function(l){return n._handleKeydown(l)})("click",function(l){return n._handleClick(l)}),2&e&&yt("aria-haspopup",n._ariaHaspopup)("aria-expanded",n._ariaExpanded)("aria-controls",n._ariaControl)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),r})(),AV=(()=>{class r extends uae{}return r.\u0275fac=function(){let t;return function(n){return(t||(t=cn(r)))(n||r)}}(),r.\u0275dir=Te({type:r,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[He]}),r})(),dae=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[cae],imports:[[Jr,rn,_l,md],eu,rn]}),r})(),hae=0;const M0=new je("CdkAccordion");let pae=(()=>{class r{constructor(){this._stateChanges=new j,this._openCloseAllActions=new j,this.id="cdk-accordion-"+hae++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=bt(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Te({type:r,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[vt([{provide:M0,useExisting:r}]),_n]}),r})(),fae=0,mae=(()=>{class r{constructor(e,n,s){this.accordion=e,this._changeDetectorRef=n,this._expansionDispatcher=s,this._openCloseAllSubscription=D.EMPTY,this.closed=new st,this.opened=new st,this.destroyed=new st,this.expandedChange=new st,this.id="cdk-accordion-child-"+fae++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=s.listen((l,u)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===u&&this.id!==l&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=bt(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=bt(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return r.\u0275fac=function(e){return new(e||r)(k(M0,12),k(bn),k(wC))},r.\u0275dir=Te({type:r,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[vt([{provide:M0,useValue:void 0}])]}),r})(),_ae=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({}),r})();const vae=["body"];function bae(r,t){}const yae=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Cae=["mat-expansion-panel-header","*","mat-action-row"];function Eae(r,t){1&r&&Nt(0,"span",2),2&r&&ke("@indicatorRotate",gt()._getExpandedState())}const Tae=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],wae=["mat-panel-title","mat-panel-description","*"],D0=new je("MAT_ACCORDION"),OV="225ms cubic-bezier(0.4,0.0,0.2,1)",kV={indicatorRotate:Tr("indicatorRotate",[Xn("collapsed, void",Zt({transform:"rotate(0deg)"})),Xn("expanded",Zt({transform:"rotate(180deg)"})),oi("expanded <=> collapsed, void => collapsed",di(OV))]),bodyExpansion:Tr("bodyExpansion",[Xn("collapsed, void",Zt({height:"0px",visibility:"hidden"})),Xn("expanded",Zt({height:"*",visibility:"visible"})),oi("expanded <=> collapsed, void => collapsed",di(OV))])};let Sae=(()=>{class r{constructor(e){this._template=e}}return r.\u0275fac=function(e){return new(e||r)(k(ci))},r.\u0275dir=Te({type:r,selectors:[["ng-template","matExpansionPanelContent",""]]}),r})(),Mae=0;const NV=new je("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let R0=(()=>{class r extends mae{constructor(e,n,s,l,u,h,p){super(e,n,s),this._viewContainerRef=l,this._animationMode=h,this._hideToggle=!1,this.afterExpand=new st,this.afterCollapse=new st,this._inputChanges=new j,this._headerId="mat-expansion-panel-header-"+Mae++,this._bodyAnimationDone=new j,this.accordion=e,this._document=u,this._bodyAnimationDone.pipe(Yh((g,b)=>g.fromState===b.fromState&&g.toState===b.toState)).subscribe(g=>{"void"!==g.fromState&&("expanded"===g.toState?this.afterExpand.emit():"collapsed"===g.toState&&this.afterCollapse.emit())}),p&&(this.hideToggle=p.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=bt(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Bi(null),yi(()=>this.expanded&&!this._portal),Fi(1)).subscribe(()=>{this._portal=new Sa(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,n=this._body.nativeElement;return e===n||n.contains(e)}return!1}}return r.\u0275fac=function(e){return new(e||r)(k(D0,12),k(bn),k(wC),k(bi),k(Ut),k(Vi,8),k(NV,8))},r.\u0275cmp=Tt({type:r,selectors:[["mat-expansion-panel"]],contentQueries:function(e,n,s){if(1&e&&sn(s,Sae,5),2&e){let l;Ye(l=$e())&&(n._lazyContent=l.first)}},viewQuery:function(e,n){if(1&e&&gn(vae,5),2&e){let s;Ye(s=$e())&&(n._body=s.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,n){2&e&&xt("mat-expanded",n.expanded)("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-expansion-panel-spacing",n._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[vt([{provide:D0,useValue:void 0}]),He,_n],ngContentSelectors:Cae,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,n){1&e&&(On(yae),Ht(0),ge(1,"div",0,1),ft("@bodyExpansion.done",function(l){return n._bodyAnimationDone.next(l)}),ge(3,"div",2),Ht(4,1),Ct(5,bae,0,0,"ng-template",3),me(),Ht(6,2),me()),2&e&&(Ae(1),ke("@bodyExpansion",n._getExpandedState())("id",n.id),yt("aria-labelledby",n._headerId),Ae(4),ke("cdkPortalOutlet",n._portal))},directives:[gs],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[kV.bodyExpansion]},changeDetection:0}),r})();class Rae{}const xae=iu(Rae);let x0=(()=>{class r extends xae{constructor(e,n,s,l,u,h,p){super(),this.panel=e,this._element=n,this._focusMonitor=s,this._changeDetectorRef=l,this._animationMode=h,this._parentChangeSubscription=D.EMPTY;const g=e.accordion?e.accordion._stateChanges.pipe(yi(b=>!(!b.hideToggle&&!b.togglePosition))):ed;this.tabIndex=parseInt(p||"")||0,this._parentChangeSubscription=qt(e.opened,e.closed,g,e._inputChanges.pipe(yi(b=>!!(b.hideToggle||b.disabled||b.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(yi(()=>e._containsFocus())).subscribe(()=>s.focusVia(n,"program")),u&&(this.expandedHeight=u.expandedHeight,this.collapsedHeight=u.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:Er(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,n){e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return r.\u0275fac=function(e){return new(e||r)(k(R0,1),k(qe),k(Ur),k(bn),k(NV,8),k(Vi,8),qi("tabindex"))},r.\u0275cmp=Tt({type:r,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,n){1&e&&ft("click",function(){return n._toggle()})("keydown",function(l){return n._keydown(l)}),2&e&&(yt("id",n.panel._headerId)("tabindex",n.tabIndex)("aria-controls",n._getPanelId())("aria-expanded",n._isExpanded())("aria-disabled",n.panel.disabled),fr("height",n._getHeaderHeight()),xt("mat-expanded",n._isExpanded())("mat-expansion-toggle-indicator-after","after"===n._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===n._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[He],ngContentSelectors:wae,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,n){1&e&&(On(Tae),ge(0,"span",0),Ht(1),Ht(2,1),Ht(3,2),me(),Ct(4,Eae,1,1,"span",1)),2&e&&(Ae(4),ke("ngIf",n._showToggle()))},directives:[fo],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[kV.indicatorRotate]},changeDetection:0}),r})(),Iae=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Te({type:r,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),r})(),LV=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Te({type:r,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),r})(),Aae=(()=>{class r extends pae{constructor(){super(...arguments),this._ownHeaders=new na,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=bt(e)}ngAfterContentInit(){this._headers.changes.pipe(Bi(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(n=>n.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new rg(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=cn(r)))(n||r)}}(),r.\u0275dir=Te({type:r,selectors:[["mat-accordion"]],contentQueries:function(e,n,s){if(1&e&&sn(s,x0,5),2&e){let l;Ye(l=$e())&&(n._headers=l)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,n){2&e&&xt("mat-accordion-multi",n.multi)},inputs:{multi:"multi",displayMode:"displayMode",togglePosition:"togglePosition",hideToggle:"hideToggle"},exportAs:["matAccordion"],features:[vt([{provide:D0,useExisting:r}]),He]}),r})(),Oae=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[Jr,rn,_ae,pd]]}),r})();const kae=["editorContainer"],I0=new je("NGX_MONACO_EDITOR_CONFIG");let FV,PV=!1,Nae=(()=>{class r{constructor(e){this.config=e,this.onInit=new st}ngAfterViewInit(){PV?FV.then(()=>{this.initMonaco(this._options)}):(PV=!0,FV=new Promise(e=>{const n=(this.config.baseUrl||"./assets")+"/monaco-editor/min/vs";if("object"==typeof window.monaco)return void e();const s=()=>{window.require.config({paths:{vs:`${n}`}}),window.require(["vs/editor/editor.main"],()=>{"function"==typeof this.config.onMonacoLoad&&this.config.onMonacoLoad(),this.initMonaco(this._options),e()})};if(window.require)s();else{const l=document.createElement("script");l.type="text/javascript",l.src=`${n}/loader.js`,l.addEventListener("load",s),document.body.appendChild(l)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return r.\u0275fac=function(e){return new(e||r)(k(I0))},r.\u0275cmp=Tt({type:r,selectors:[["ng-component"]],viewQuery:function(e,n){if(1&e&&gn(kae,7),2&e){let s;Ye(s=$e())&&(n._editorContainer=s.first)}},outputs:{onInit:"onInit"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),r})(),Lae=(()=>{class r extends Nae{constructor(e,n){super(n),this.zone=e,this.editorConfig=n,this._value="",this.propagateChange=s=>{},this.onTouched=()=>{}}set options(e){this._options=Object.assign({},this.config.defaultOptions,e),this._editor&&(this._editor.dispose(),this.initMonaco(e))}get options(){return this._options}set model(e){this.options.model=e,this._editor&&(this._editor.dispose(),this.initMonaco(this.options))}writeValue(e){this._value=e||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouched=e}initMonaco(e){const n=!!e.model;if(n){const s=monaco.editor.getModel(e.model.uri||"");s?(e.model=s,e.model.setValue(this._value)):e.model=monaco.editor.createModel(e.model.value,e.model.language,e.model.uri)}this._editor=monaco.editor.create(this._editorContainer.nativeElement,e),n||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(s=>{const l=this._editor.getValue();this.zone.run(()=>{this.propagateChange(l),this._value=l})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=Fs(window,"resize").subscribe(()=>this._editor.layout()),this.onInit.emit(this._editor)}}return r.\u0275fac=function(e){return new(e||r)(k(Xt),k(I0))},r.\u0275cmp=Tt({type:r,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",model:"model"},features:[vt([{provide:Pr,useExisting:wt(()=>r),multi:!0}]),He],decls:2,vars:0,consts:[[1,"editor-container"],["editorContainer",""]],template:function(e,n){1&e&&Nt(0,"div",0,1)},styles:["[_nghost-%COMP%] {\n          display: block;\n          height: 200px;\n      }\n\n      .editor-container[_ngcontent-%COMP%] {\n          width: 100%;\n          height: 98%;\n      }"]}),r})(),Pae=(()=>{class r{static forRoot(e={}){return{ngModule:r,providers:[{provide:I0,useValue:e}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[Jr]]}),r})();function Fae(r,t){if(1&r){const e=er();ge(0,"button",16),ft("click",function(){const l=Wn(e).$implicit;return gt(2).ShowDemo(l.id)}),It(1),me()}if(2&r){const e=t.$implicit,n=t.index;Ae(1),ab("",n+1," ",e.description,"")}}function Bae(r,t){if(1&r&&(ge(0,"button",15),It(1),me(),ge(2,"mat-menu",null,8),Ct(4,Fae,2,2,"ng-template",9),me()),2&r){const e=t.$implicit,n=t.index;ke("matMenuTriggerFor",jo(3)),Ae(1),$T("",n+1," ",e.key," (",e.value.length,")"),Ae(3),ke("ngForOf",e.value)}}const Vae=function(r){return["/","automation","loadexample",r]};function Hae(r,t){if(1&r&&(ge(0,"a",17),It(1),me()),2&r){const e=gt();ke("routerLink",wh(2,Vae,e.mustLoadDemoBlock)),Ae(1),io("Direct link ",e.mustLoadDemoBlock,"")}}function Uae(r,t){1&r&&(ge(0,"span"),It(1,"Loading"),me())}function Gae(r,t){if(1&r){const e=er();ge(0,"ngx-monaco-editor",19),ft("ngModelChange",function(s){return Wn(e),gt(2).showInner=s}),me()}if(2&r){const e=gt(2);ke("options",e.editorPlain)("ngModel",e.showInner)}}function Wae(r,t){if(1&r){const e=er();ge(0,"ngx-monaco-editor",19),ft("ngModelChange",function(s){return Wn(e),gt(2).showXMLCode=s}),me()}if(2&r){const e=gt(2);ke("options",e.editorXMLOptions)("ngModel",e.showXMLCode)}}function zae(r,t){if(1&r){const e=er();ge(0,"ngx-monaco-editor",19),ft("ngModelChange",function(s){return Wn(e),gt(2).showJSCode=s}),me()}if(2&r){const e=gt(2);ke("options",e.editorJSOptions)("ngModel",e.showJSCode)}}function jae(r,t){if(1&r){const e=er();ge(0,"ngx-monaco-editor",19),ft("ngModelChange",function(s){return Wn(e),gt(2).showBlocksDefinition=s}),me()}if(2&r){const e=gt(2);ke("options",e.editorJSOptions)("ngModel",e.showBlocksDefinition)}}function Xae(r,t){if(1&r&&(ge(0,"mat-grid-tile"),Ct(1,Gae,1,2,"ngx-monaco-editor",18),Ct(2,Wae,1,2,"ngx-monaco-editor",18),Ct(3,zae,1,2,"ngx-monaco-editor",18),Ct(4,jae,1,2,"ngx-monaco-editor",18),me()),2&r){const e=gt();Ae(1),ke("ngIf",e.ShowOutput()),Ae(1),ke("ngIf",e.ShowCode()),Ae(1),ke("ngIf",e.ShowXML()),Ae(1),ke("ngIf",e.ShowBlocksDefinition())}}var xa=(()=>(function(r){r[r.ShowNone=0]="ShowNone",r[r.ShowCode=1]="ShowCode",r[r.ShowXML=2]="ShowXML",r[r.ShowOutput=3]="ShowOutput",r[r.ShowBlocksDefinition=4]="ShowBlocksDefinition",r[r.Stop=100]="Stop"}(xa||(xa={})),xa))();let BV=(()=>{class r{constructor(e,n,s,l,u,h){this.tabulator=e,this.settings=n,this.loadDemo=s,this.ar=l,this.ta=u,this.snackBar=h,this.editorXMLOptions={theme:"vs-dark",language:"xml"},this.editorJSOptions={theme:"vs-dark",language:"javascript",lineNumbers:"on"},this.editorPlain={theme:"vs-dark",language:"plaintext",lineNumbers:"on"},this.code='function x() {\nconsole.log("Hello world!");\n}',this.showCodeAndXML=xa.ShowNone,this.swaggerLoaded=0,this.demoWorkspace=null,this.demos=[],this.demosCategories=new Map,this.mustLoadDemoBlock="",this.intro=rK(),this.myChart=null,this.step=0,this.swaggerData=[],this.showInner="",this.showXMLCode="",this.showJSCode="",this.showBlocksDefinition="",this.toolboxXML="",this.ar.paramMap.subscribe(p=>{this.mustLoadDemoBlock=p.get("demoblock")}),this.ta.receiveData().subscribe(p=>{"DisplayBlocklyComponent"==p[0]&&this[p[1]]()})}createIntro(){var e,n,s=(null===(e=this.settings.settings)||void 0===e?void 0:e.title)||"",l=null===(n=this.settings.settings)||void 0===n?void 0:n.tourSteps.map(u=>({title:s,intro:u.text,element:document.querySelector(u.query)||void 0}));this.intro.setOptions({exitOnEsc:!0,showStepNumbers:!0,showButtons:!0,doneLabel:"Exit",skipLabel:"Skip",showProgress:!0,steps:l}).start()}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid()}ShowChart(e){var n,s=null===(n=document.getElementById("barchart"))||void 0===n?void 0:n.getContext("2d");if(null!=s){null!=this.myChart&&this.myChart.clear();try{var l=null==e?void 0:e.toString(),u=JSON.parse(l);u&&u.type&&(this.myChart=new Wq(s,u),console.log("make chart",e))}catch(h){this.myChart=null}}else console.log("not canvas available for chart!")}RunCode(){this.snackBar.open("Program start","Executing...");var e;this.run=jf.interpreterHelper.createInterpreter(this.demoWorkspace,Br),this.clearOutput(),this.showCodeAndXML=xa.ShowOutput,this.showInner='{ "step_start": "start program",',e=this,this.run.runCode((s,l)=>{try{return new Interpreter(this.run.latestCode,l)}catch(u){e.CalculateXMLAndCode(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(u))}},s=>{e.step++,e.showInner+=`\n           \n"step_${e.step}" : "${s}",`,e.tabulator.AddDataToGrid(s),e.ShowChart(s)},()=>{this.snackBar.open("Program end","Done!",{duration:3e3}),e.showInner+='\n "step_end" : "program executed; see results below"\n}',this.tabulator.FinishGrid()})}ShowDemo(e){this.mustLoadDemoBlock=e,this.loadDemo.getDemoBlock(e).subscribe(n=>{var s=Ln.Xml.textToDom(n);null!=this.demoWorkspace&&(Ln.Xml.clearWorkspaceAndLoadFromXml(s,this.demoWorkspace),window.alert("please press run code button"))})}registerSwaggerBlocksObjects(e,n){return n.fieldXMLObjects.map(l=>Ln.Xml.textToDom(l))}registerSwaggerBlocksAPIControllers(e,n,s){var u=n.operations.filter(h=>h.controller==s);return n.fieldXMLFunctions.filter(h=>{if(""==h.id)return!0;var p=h.id+"/",g=!1;return u.forEach(b=>{p.startsWith(b.id)&&(g=!0)}),!!g||(u.forEach(b=>{var C=b.id.substring(0,b.id.lastIndexOf("/"))+"{";p.startsWith(C)&&(g=!0)}),g)}).map(h=>Ln.Xml.textToDom(h.gui))}registerSwaggerBlocksAPIAll(e,n){return n.fieldXMLFunctions.map(l=>Ln.Xml.textToDom(l.gui))}ngOnInit(){this.StartRegister()}LoadSwagger(){var e=window.prompt("Swagger url? ","https://swagger-tax-calc-api.herokuapp.com/api-docs");if(e){if(e.endsWith(".html")||e.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");this.LoadSwaggerFromUrl(e).then(n=>{this.addToToolboxSwagger(n,this),window.alert("done")})}}LoadSwaggerFromUrl(e,n){var s=this;return _M(function*(){var l=new iK.parseData(e),u=yield l.ParseSwagger();u.name=n||e,s.swaggerData.push(u);for(var h=0;h<u.GenerateBlocks.length;h++)(0,u.GenerateBlocks[h])(Ln.Blocks,Br,b=>new Ln.FieldDropdown(b));for(h=0;h<u.GenerateFunctions.length;h++)(0,u.GenerateFunctions[h])(Ln.Blocks,Br,function(w){return new Ln.FieldImage(`assets/httpImages/${w}.png`,90,20,w)});return u})()}StartRegister(){var e=this;return _M(function*(){var n=e.settings.links,s=new Map;n.forEach(function(){var b=_M(function*(C){s.set(C.id,yield e.LoadSwaggerFromUrl(C.link,C.id))});return function(C){return b.apply(this,arguments)}}());var l=[...Array(50).keys()].map(b=>e.CategorySwaggerHidden(b)).join(""),u=e.settings.demoBlocks;e.demos=u.sort((b,C)=>b.description.localeCompare(C.description));var h=u.map(b=>b.categories).filter(b=>(null==b?void 0:b.length)>0).flatMap(b=>b.split(";")).filter(b=>(null==b?void 0:b.length)>0);e.demosCategories.set("All",e.demos),h.forEach(b=>{e.demosCategories.set(b,u.filter(C=>{var w;return(null===(w=C.categories)||void 0===w?void 0:w.length)>0}).filter(C=>(";"+C.categories+";").indexOf(";"+b+";")>-1))});const p=document.getElementById("steps");if(null!=p){e.tabulator.initGrid(p),Di.filterBlocks.definitionBlocks(Ln.Blocks,Br),Di.waitBlocks.definitionBlocks(Ln.defineBlocksWithJsonArray,Br),Di.xhrBlocks.definitionBlocks(Ln.Blocks,Br,function(b){return new Ln.FieldDropdown(b)}),Di.propBlocks.definitionBlocks(Ln.Blocks,Br,function(b){return new Ln.FieldLabelSerializable(b)}),Di.guiBlocks.definitionBlocks(Ln.Blocks,Br,b=>new Ln.FieldLabelSerializable(b)),Di.convertersBlocks.definitionBlocks(Ln.Blocks,Br),Di.exportFileBlock.definitionBlocks(Ln.Blocks,Br),Di.createObjectBlocks.definitionBlocks(Ln.Blocks,Br,Ln.Extensions,b=>new Ln.FieldTextInput(b),()=>Ln.Mutator),Di.currentDateBlock.definitionBlocks(Ln.Blocks,Br,function(b){return new Ln.FieldDropdown(b)}),Di.dateFromTextBlock.definitionBlocks(Ln.Blocks,Br),Di.waitBlocks.definitionBlocks(Ln.Blocks,Br),Di.commentBlock.definitionBlocks(Ln.Blocks,Br,b=>new Ln.FieldLabelSerializable(b)),Di.trycatchFinBlock.definitionBlocks(Ln.Blocks,Br),Di.auth0Blocks.definitionBlocks(Ln.Blocks,Br),Di.windowsCreds.definitionBlocks(Ln.Blocks,Br),Di.chartBlock.definitionBlocks(Ln.Blocks,Br,function(b){return new Ln.FieldDropdown(b)},b=>new Ln.FieldLabelSerializable(b));var g=[Di.defaultBlocks.generalBlocks(),`    \n        <category name='Blockly Advanced'>\n                ${Di.filterBlocks.fieldXML()}\n            <category id="XHR" name="Request">\n            ${Di.xhrBlocks.fieldXML()}\n            ${Di.windowsCreds.fieldXML()}\n            </category>\n            <category name="Objects" id="objects">\n            ${Di.propBlocks.fieldXML()}\n            ${Di.createObjectBlocks.fieldXML()}\n            </category>\n            <category id="catGUI" name="GUI">\n            ${Di.guiBlocks.fieldXML()}\n            ${Di.chartBlock.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${Di.waitBlocks.fieldXML()}\n        </category>`,`<category id="catConverters"  name="Converters">\n          ${Di.convertersBlocks.fieldXML()}\n        </category>`,`<category id="catExporter"  name="Exporter">\n          ${Di.exportFileBlock.fieldXML()}\n        </category>`,`<category id="catDates"  name="Dates">\n          ${Di.currentDateBlock.fieldXML()}\n          ${Di.dateFromTextBlock.fieldXML()}\n          ${Di.waitBlocks.fieldXML()}\n        </category>`,`  <category id="programming" name="Programming">\n        ${Di.trycatchFinBlock.fieldXML()}\n        ${Di.commentBlock.fieldXML()}\n          </category>\n        \n      `,`${Di.auth0Blocks.fieldXML()}`,`</category>\n      <category name="Swagger" id="catSwagger" expanded='true' >          \n          ${l}\n        </category> \n        \n        `];e.initialize(g)}else window.alert("gridElement is null")})()}SaveBlocks(){jf.saveBlocksUrl.saveState(Ln.Xml,this.demoWorkspace)}ShowBlocksDefinition(){return this.showCodeAndXML===xa.ShowBlocksDefinition}ShowSelection(){return xa[this.showCodeAndXML]}ShowSomething(){return this.showCodeAndXML!==xa.ShowNone}ShowOutput(){return this.showCodeAndXML===xa.ShowOutput}ShowCode(){return this.showCodeAndXML===xa.ShowCode}ShowXML(){return this.showCodeAndXML===xa.ShowXML}CalculateXMLAndCode(){var e=Ln.Xml.workspaceToDom(this.demoWorkspace,!0),n=Ln.Xml.domToPrettyText(e);this.showJSCode=this.run.latestCode,this.showXMLCode=n;var s=this.parseTextForBlocks(n);this.showBlocksDefinition=s.map(l=>{try{return`Blockly.Blocks['${l}']={ init: \n`+Ln.Blocks[l].init.toString()+`};\n};\nBlockly.JavaScript['${l}']=`+Br[l].toString()+";"}catch(p){return console.error("parse definition : "+l,p),"//Error for "+l}}).join("\n")}parseTextForBlocks(e){var n=[];if(e.indexOf('<block type="')>=0)for(var s=e.split('<block type="'),l=1;l<s.length;l++){var u=s[l].split('"')[0];n.push(u)}return n}ShowInnerWorkings(){null!=this.demoWorkspace?(this.showCodeAndXML++,this.ShowSelection()||(this.showCodeAndXML=xa.ShowNone),this.CalculateXMLAndCode()):window.alert("demoWorkspace is null")}Download(){var e=window.prompt("Name?","blocks.txt");null!=e&&jf.saveLoad.DownloadBlocks(Ln.Xml,this.demoWorkspace,e)}changeListener(e){this.readThis(e.target)}readThis(e){var n=e.files[0],s=new FileReader,l=this;s.onloadend=function(u){jf.saveLoad.LoadFile(Ln.Xml,l.demoWorkspace,s.result),l.run.resetInterpreter()},s.readAsText(n)}CategorySwaggerHidden(e){return`<category name='swagger_hidden_${e}' hidden='true' >${e}</category>`}initialize(e){var n,s,l;const u=document.getElementById("blocklyDiv");if(null!=u){var h=e.map(C=>`<sep></sep>${C}`);this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">\n    ${h}\n    </xml>`,this.demoWorkspace=Ln.inject(u,{readOnly:!1,media:"media/",trashcan:!0,horizontalLayout:!1,move:{scrollbars:!0,drag:!0,wheel:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},toolbox:this.toolboxXML});var p=this;if(((null===(s=null===(n=this.settings.settings)||void 0===n?void 0:n.startBlocks)||void 0===s?void 0:s.length)||0)>0)try{var g=((null===(l=this.settings.settings)||void 0===l?void 0:l.startBlocks)||[]).join("\n"),b=Ln.Xml.textToDom(g);Ln.Xml.clearWorkspaceAndLoadFromXml(b,this.demoWorkspace)}catch(C){console.error("error when load default blocks",C)}window.setTimeout(p.afterTimeout,2e3,this),this.run=jf.interpreterHelper.createInterpreter(this.demoWorkspace,Br),p=this,this.demoWorkspace.addChangeListener(function(C){C.isUiEvent||(p.run.resetInterpreter(),p.run.generateCodeAndLoadIntoInterpreter(),p.CalculateXMLAndCode())})}else window.alert("blocklyDiv is null")}restoreBlocks(){jf.saveBlocksUrl.restoreState(Ln.Xml,this.demoWorkspace)}addToToolboxSwagger(e,n){var s,l=e.findCategSwaggerFromPaths().sort().map(x=>`<category name='${x}' custom='func_${e.name}_${x}'></category>`).join("\n"),u=(null==n?void 0:n.CategorySwaggerHidden(null==n?void 0:n.swaggerLoaded))||"",h=n.toolboxXML,p=`<category name='${e.name}'>\n<category name='API' id='func_${e.name}'>\n${l}\n</category>\n${e.categSwagger()}\n</category>\n`;if(h=h.replace(u,p),n.swaggerLoaded++,n.toolboxXML=h,null===(s=null==n?void 0:n.demoWorkspace)||void 0===s||s.updateToolbox(h),null!=(null==n?void 0:n.demoWorkspace)){var b="objects_"+e.nameCategSwagger(),C="AllApi_"+e.nameCategSwagger(),w=e;n.demoWorkspace.registerToolboxCategoryCallback(b,x=>n.registerSwaggerBlocksObjects(x,w)),n.demoWorkspace.registerToolboxCategoryCallback(C,x=>n.registerSwaggerBlocksAPIAll(x,w)),e.findCategSwaggerFromPaths().forEach(x=>{var N;null===(N=null==n?void 0:n.demoWorkspace)||void 0===N||N.registerToolboxCategoryCallback(`func_${e.name}_${x}`,B=>n.registerSwaggerBlocksAPIControllers(B,e,x))})}}afterTimeout(e){var n,s,l;if(null!=(null==e?void 0:e.swaggerData))if(e.toolboxXML=e.toolboxXML.replace("Swagger",`Swagger(${e.swaggerData.length})`),e.swaggerData.forEach(g=>{e.addToToolboxSwagger(g,e)}),null!=(null==e?void 0:e.mustLoadDemoBlock))e.ShowDemo(null==e?void 0:e.mustLoadDemoBlock);else{if(((null===(s=null===(n=e.settings.settings)||void 0===n?void 0:n.startBlocks)||void 0===s?void 0:s.length)||0)>0)try{var h=((null===(l=e.settings.settings)||void 0===l?void 0:l.startBlocks)||[]).join("\n");if((null==h?void 0:h.length)>62){var p=Ln.Xml.textToDom(h);Ln.Xml.clearWorkspaceAndLoadFromXml(p,e.demoWorkspace)}}catch(g){console.log("error when load default blocks",g)}e.restoreBlocks()}}}return r.\u0275fac=function(e){return new(e||r)(k(tne),k(L_),k(qF),k(Lh),k(gD),k(Ase))},r.\u0275cmp=Tt({type:r,selectors:[["app-display-blockly"]],decls:58,vars:10,consts:[["rowHeight","1:1",3,"cols"],[2,"display","inline-block","height","100%","width","100%"],[2,"display","inline-block","height","5%","width","100%"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary","id","runButton",3,"click"],["id","downloadBlocks","mat-raised-button","","color","primary",3,"click"],["type","file",3,"change"],["mat-raised-button","","id","demos","color","primary",3,"matMenuTriggerFor"],["menu","matMenu"],["ngFor","",3,"ngForOf"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[4,"ngIf"],["id","blocklyDiv",2,"display","inline-block","height","100%","width","100%"],["id","steps"],["id","barchart","width","800","height","450"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"],["style","display: inline-block; height: 100%; width: 100%",3,"options","ngModel","ngModelChange",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"options","ngModel","ngModelChange"]],template:function(e,n){if(1&e&&(ge(0,"mat-grid-list",0),ge(1,"mat-grid-tile-header"),ge(2,"div",1),ge(3,"div",2),ge(4,"button",3),ft("click",function(){return n.LoadSwagger()}),ge(5,"mat-icon"),It(6,"file_upload"),me(),It(7," Load Swagger"),me(),ge(8,"button",3),ft("click",function(){return n.ShowInnerWorkings()}),ge(9,"mat-icon"),It(10,"code"),me(),It(11),me(),It(12," \xa0 "),ge(13,"button",3),ft("click",function(){return n.SaveBlocks()}),ge(14,"mat-icon"),It(15,"save"),me(),It(16," Persist in browser"),me(),It(17," \xa0 "),ge(18,"button",4),ft("click",function(){return n.RunCode()}),ge(19,"mat-icon"),It(20,"play_arrow"),me(),It(21," Run Code"),me(),It(22," \xa0 "),ge(23,"button",5),ft("click",function(){return n.Download()}),ge(24,"mat-icon"),It(25,"download"),me(),It(26," Download blocks"),me(),It(27," \xa0 "),ge(28,"input",6),ft("change",function(l){return n.changeListener(l)}),me(),ge(29,"button",7),ge(30,"mat-icon"),It(31,"list"),me(),It(32),me(),ge(33,"mat-menu",null,8),Ct(35,Bae,5,5,"ng-template",9),Sh(36,"keyvalue"),me(),Ct(37,Hae,2,4,"a",10),Ct(38,Uae,2,0,"span",11),me(),me(),me(),ge(39,"mat-grid-tile"),Nt(40,"div",12),me(),Ct(41,Xae,5,4,"mat-grid-tile",11),me(),ge(42,"mat-accordion"),ge(43,"mat-expansion-panel"),ge(44,"mat-expansion-panel-header"),ge(45,"mat-panel-title"),It(46," Output "),me(),ge(47,"mat-panel-description"),It(48," Click to see grid of output values "),me(),me(),Nt(49,"div",13),me(),ge(50,"mat-expansion-panel"),ge(51,"mat-expansion-panel-header"),ge(52,"mat-panel-title"),It(53," Chart "),me(),ge(54,"mat-panel-description"),It(55," Click to see chart of output values "),me(),me(),ge(56,"p"),Nt(57,"canvas",14),me(),me(),me()),2&e){const s=jo(34);ke("cols",n.ShowSomething()?2:1),Ae(11),io(" ",n.ShowSelection()," "),Ae(18),ke("matMenuTriggerFor",s),Ae(3),io(" Demos (",n.demos.length,")"),Ae(3),ke("ngForOf",Mh(36,8,n.demosCategories)),Ae(2),ke("ngIf",null==n.mustLoadDemoBlock?null:n.mustLoadDemoBlock.length),Ae(1),ke("ngIf",null==n.demoWorkspace),Ae(3),ke("ngIf",n.ShowSomething())}},directives:[Wse,Pse,Fse,bd,T0,AV,DV,$u,fo,_V,Aae,R0,x0,LV,Iae,dE,Cse,u_,Lae,U1,GS],pipes:[Kk],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:normal;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),r})();const Yae=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:BV},{path:"automation/loadexample/:demoblock",component:BV}];let $ae=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[vL.forRoot(Yae)],vL]}),r})(),Kae=(()=>{class r{constructor(){this.title="",this.startBlocks=[],this.tourSteps=[]}}return r.version="2021.11.30.2134",r})();function VV(r){return t=>t.lift(new Jae(r))}class Jae{constructor(t){this.value=t}call(t,e){return e.subscribe(new Qae(t,this.value))}}class Qae extends H{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}const hE=["*"];function Zae(r,t){if(1&r){const e=er();ge(0,"div",2),ft("click",function(){return Wn(e),gt()._onBackdropClicked()}),me()}2&r&&xt("mat-drawer-shown",gt()._isShowingBackdrop())}function qae(r,t){1&r&&(ge(0,"mat-drawer-content"),Ht(1,2),me())}const ele=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],tle=["mat-drawer","mat-drawer-content","*"];function nle(r,t){if(1&r){const e=er();ge(0,"div",2),ft("click",function(){return Wn(e),gt()._onBackdropClicked()}),me()}2&r&&xt("mat-drawer-shown",gt()._isShowingBackdrop())}function ile(r,t){1&r&&(ge(0,"mat-sidenav-content",3),Ht(1,2),me())}const rle=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],ole=["mat-sidenav","mat-sidenav-content","*"],HV=".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n",UV={transformDrawer:Tr("transform",[Xn("open, open-instant",Zt({transform:"none",visibility:"visible"})),Xn("void",Zt({"box-shadow":"none",visibility:"hidden"})),oi("void => open-instant",di("0ms")),oi("void <=> open, open-instant => void",di("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},sle=new je("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),A0=new je("MAT_DRAWER_CONTAINER");let pE=(()=>{class r extends ig{constructor(e,n,s,l,u){super(s,l,u),this._changeDetectorRef=e,this._container=n}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return r.\u0275fac=function(e){return new(e||r)(k(bn),k(wt(()=>WV)),k(qe),k(dd),k(Xt))},r.\u0275cmp=Tt({type:r,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,n){2&e&&fr("margin-left",n._container._contentMargins.left,"px")("margin-right",n._container._contentMargins.right,"px")},features:[He],ngContentSelectors:hE,decls:1,vars:0,template:function(e,n){1&e&&(On(),Ht(0))},encapsulation:2,changeDetection:0}),r})(),GV=(()=>{class r{constructor(e,n,s,l,u,h,p){this._elementRef=e,this._focusTrapFactory=n,this._focusMonitor=s,this._platform=l,this._ngZone=u,this._doc=h,this._container=p,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new j,this._animationEnd=new j,this._animationState="void",this.openedChange=new st(!0),this._openedStream=this.openedChange.pipe(yi(g=>g),ye(()=>{})),this.openedStart=this._animationStarted.pipe(yi(g=>g.fromState!==g.toState&&0===g.toState.indexOf("open")),VV(void 0)),this._closedStream=this.openedChange.pipe(yi(g=>!g),ye(()=>{})),this.closedStart=this._animationStarted.pipe(yi(g=>g.fromState!==g.toState&&"void"===g.toState),VV(void 0)),this._destroyed=new j,this.onPositionChanged=new st,this._modeChanged=new j,this.openedChange.subscribe(g=>{g?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus()}),this._ngZone.runOutsideAngular(()=>{Fs(this._elementRef.nativeElement,"keydown").pipe(yi(g=>27===g.keyCode&&!this.disableClose&&!Er(g)),un(this._destroyed)).subscribe(g=>this._ngZone.run(()=>{this.close(),g.stopPropagation(),g.preventDefault()}))}),this._animationEnd.pipe(Yh((g,b)=>g.fromState===b.fromState&&g.toState===b.toState)).subscribe(g=>{const{fromState:b,toState:C}=g;(0===C.indexOf("open")&&"void"===b||"void"===C&&0===b.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!=this._position&&(this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=bt(e)}get autoFocus(){const e=this._autoFocus;return null==e?"side"!==this.mode:e}set autoFocus(e){this._autoFocus=bt(e)}get opened(){return this._opened}set opened(e){this.toggle(bt(e))}_takeFocus(){!this.autoFocus||!this._focusTrap||this._focusTrap.focusInitialElementWhenReady().then(e=>{!e&&"function"==typeof this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()})}_restoreFocus(){!this.autoFocus||(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}_isFocusWithinDrawer(){var e;const n=null===(e=this._doc)||void 0===e?void 0:e.activeElement;return!!n&&this._elementRef.nativeElement.contains(n)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0)}toggle(e=!this.opened,n){return this._setOpen(e,!e&&this._isFocusWithinDrawer(),n)}_setOpen(e,n,s="program"){return this._opened=e,e?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=s):(this._animationState="void",n&&this._restoreFocus()),this._updateFocusTrapState(),new Promise(l=>{this.openedChange.pipe(Fi(1)).subscribe(u=>l(u?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_animationStartListener(e){this._animationStarted.next(e)}_animationDoneListener(e){this._animationEnd.next(e)}}return r.\u0275fac=function(e){return new(e||r)(k(qe),k(OC),k(Ur),k(jn),k(Xt),k(Ut,8),k(A0,8))},r.\u0275cmp=Tt({type:r,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,n){1&e&&vh("@transform.start",function(l){return n._animationStartListener(l)})("@transform.done",function(l){return n._animationDoneListener(l)}),2&e&&(yt("align",null),bh("@transform",n._animationState),xt("mat-drawer-end","end"===n.position)("mat-drawer-over","over"===n.mode)("mat-drawer-push","push"===n.mode)("mat-drawer-side","side"===n.mode)("mat-drawer-opened",n.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:hE,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,n){1&e&&(On(),ge(0,"div",0),Ht(1),me())},directives:[ig],encapsulation:2,data:{animation:[UV.transformDrawer]},changeDetection:0}),r})(),WV=(()=>{class r{constructor(e,n,s,l,u,h=!1,p){this._dir=e,this._element=n,this._ngZone=s,this._changeDetectorRef=l,this._animationMode=p,this._drawers=new na,this.backdropClick=new st,this._destroyed=new j,this._doCheckSubject=new j,this._contentMargins={left:null,right:null},this._contentMarginChanges=new j,e&&e.change.pipe(un(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),u.change().pipe(un(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=h}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=bt(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:bt(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Bi(this._allDrawers),un(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(n=>!n._container||n._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Bi(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(RC(10),un(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const s=this._left._getWidth();e+=s,n-=s}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._getWidth();else if("push"==this._right.mode){const s=this._right._getWidth();n+=s,e-=s}e=e||null,n=n||null,(e!==this._contentMargins.left||n!==this._contentMargins.right)&&(this._contentMargins={left:e,right:n},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(yi(n=>n.fromState!==n.toState),un(this._drawers.changes)).subscribe(n=>{"open-instant"!==n.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(un(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe(un(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Fi(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(un(qt(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const n=this._element.nativeElement.classList,s="mat-drawer-container-has-open";e?n.add(s):n.remove(s)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return r.\u0275fac=function(e){return new(e||r)(k(Ii,8),k(qe),k(Xt),k(bn),k(Bs),k(sle),k(Vi,8))},r.\u0275cmp=Tt({type:r,selectors:[["mat-drawer-container"]],contentQueries:function(e,n,s){if(1&e&&(sn(s,pE,5),sn(s,GV,5)),2&e){let l;Ye(l=$e())&&(n._content=l.first),Ye(l=$e())&&(n._allDrawers=l)}},viewQuery:function(e,n){if(1&e&&gn(pE,5),2&e){let s;Ye(s=$e())&&(n._userContent=s.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,n){2&e&&xt("mat-drawer-container-explicit-backdrop",n._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[vt([{provide:A0,useExisting:r}])],ngContentSelectors:tle,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,n){1&e&&(On(ele),Ct(0,Zae,1,2,"div",0),Ht(1),Ht(2,1),Ct(3,qae,2,0,"mat-drawer-content",1)),2&e&&(ke("ngIf",n.hasBackdrop),Ae(3),ke("ngIf",!n._content))},directives:[fo,pE],styles:[HV],encapsulation:2,changeDetection:0}),r})(),O0=(()=>{class r extends pE{constructor(e,n,s,l,u){super(e,n,s,l,u)}}return r.\u0275fac=function(e){return new(e||r)(k(bn),k(wt(()=>jV)),k(qe),k(dd),k(Xt))},r.\u0275cmp=Tt({type:r,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(e,n){2&e&&fr("margin-left",n._container._contentMargins.left,"px")("margin-right",n._container._contentMargins.right,"px")},features:[He],ngContentSelectors:hE,decls:1,vars:0,template:function(e,n){1&e&&(On(),Ht(0))},encapsulation:2,changeDetection:0}),r})(),zV=(()=>{class r extends GV{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=bt(e)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=mi(e)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=mi(e)}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=cn(r)))(n||r)}}(),r.\u0275cmp=Tt({type:r,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(e,n){2&e&&(yt("align",null),fr("top",n.fixedInViewport?n.fixedTopGap:null,"px")("bottom",n.fixedInViewport?n.fixedBottomGap:null,"px"),xt("mat-drawer-end","end"===n.position)("mat-drawer-over","over"===n.mode)("mat-drawer-push","push"===n.mode)("mat-drawer-side","side"===n.mode)("mat-drawer-opened",n.opened)("mat-sidenav-fixed",n.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[He],ngContentSelectors:hE,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,n){1&e&&(On(),ge(0,"div",0),Ht(1),me())},directives:[ig],encapsulation:2,data:{animation:[UV.transformDrawer]},changeDetection:0}),r})(),jV=(()=>{class r extends WV{}return r.\u0275fac=function(){let t;return function(n){return(t||(t=cn(r)))(n||r)}}(),r.\u0275cmp=Tt({type:r,selectors:[["mat-sidenav-container"]],contentQueries:function(e,n,s){if(1&e&&(sn(s,O0,5),sn(s,zV,5)),2&e){let l;Ye(l=$e())&&(n._content=l.first),Ye(l=$e())&&(n._allDrawers=l)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(e,n){2&e&&xt("mat-drawer-container-explicit-backdrop",n._backdropOverride)},exportAs:["matSidenavContainer"],features:[vt([{provide:A0,useExisting:r}]),He],ngContentSelectors:ole,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(e,n){1&e&&(On(rle),Ct(0,nle,1,2,"div",0),Ht(1),Ht(2,1),Ct(3,ile,2,0,"mat-sidenav-content",1)),2&e&&(ke("ngIf",n.hasBackdrop),Ae(3),ke("ngIf",!n._content))},directives:[fo,O0,ig],styles:[HV],encapsulation:2,changeDetection:0}),r})(),XV=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[Jr,rn,eg,eu],eu,rn]}),r})();const lle=["*",[["mat-toolbar-row"]]],cle=["*","mat-toolbar-row"],ule=oa(class{constructor(r){this._elementRef=r}});let dle=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Te({type:r,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),r})(),hle=(()=>{class r extends ule{constructor(e,n,s){super(e),this._platform=n,this._document=s}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return r.\u0275fac=function(e){return new(e||r)(k(qe),k(jn),k(Ut))},r.\u0275cmp=Tt({type:r,selectors:[["mat-toolbar"]],contentQueries:function(e,n,s){if(1&e&&sn(s,dle,5),2&e){let l;Ye(l=$e())&&(n._toolbarRows=l)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,n){2&e&&xt("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",0===n._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[He],ngContentSelectors:cle,decls:2,vars:0,template:function(e,n){1&e&&(On(lle),Ht(0),Ht(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),r})(),YV=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[rn],rn]}),r})(),ple=(()=>{class r{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=bt(e)}get inset(){return this._inset}set inset(e){this._inset=bt(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=Tt({type:r,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,n){2&e&&(yt("aria-orientation",n.vertical?"vertical":"horizontal"),xt("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,n){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),r})(),$V=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[rn],rn]}),r})();const k0=["*"],fle=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],gle=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],KV=Zo(ms(class{})),yle=ms(class{}),JV=new je("MatList"),QV=new je("MatNavList");let Cle=(()=>{class r extends KV{constructor(){super(...arguments),this._stateChanges=new j}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=cn(r)))(n||r)}}(),r.\u0275cmp=Tt({type:r,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[vt([{provide:QV,useExisting:r}]),He,_n],ngContentSelectors:k0,decls:1,vars:0,template:function(e,n){1&e&&(On(),Ht(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),r})(),ZV=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Te({type:r,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),r})(),qV=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Te({type:r,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),r})(),Ele=(()=>{class r extends yle{constructor(e,n,s,l){super(),this._element=e,this._isInteractiveList=!1,this._destroyed=new j,this._disabled=!1,this._isInteractiveList=!!(s||l&&"action-list"===l._getListType()),this._list=s||l;const u=this._getHostElement();"button"===u.nodeName.toLowerCase()&&!u.hasAttribute("type")&&u.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(un(this._destroyed)).subscribe(()=>{n.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(e){this._disabled=bt(e)}ngAfterContentInit(){g0(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return r.\u0275fac=function(e){return new(e||r)(k(qe),k(bn),k(QV,8),k(JV,8))},r.\u0275cmp=Tt({type:r,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(e,n,s){if(1&e&&(sn(s,ZV,5),sn(s,qV,5),sn(s,f0,5)),2&e){let l;Ye(l=$e())&&(n._avatar=l.first),Ye(l=$e())&&(n._icon=l.first),Ye(l=$e())&&(n._lines=l)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(e,n){2&e&&xt("mat-list-item-disabled",n.disabled)("mat-list-item-avatar",n._avatar||n._icon)("mat-list-item-with-avatar",n._avatar||n._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[He],ngContentSelectors:gle,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(e,n){1&e&&(On(fle),ge(0,"div",0),Nt(1,"div",1),Ht(2),ge(3,"div",2),Ht(4,1),me(),Ht(5,2),me()),2&e&&(Ae(1),ke("matRippleTrigger",n._getHostElement())("matRippleDisabled",n._isRippleDisabled()))},directives:[qo],encapsulation:2,changeDetection:0}),r})(),tH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[nE,_l,rn,v0,Jr],nE,rn,v0,$V]}),r})();const Rle=function(r){return["/","automation","loadexample",r]};function xle(r,t){if(1&r&&(ge(0,"a",21),ge(1,"mat-icon"),It(2," https "),me(),It(3),me()),2&r){const e=t.index,n=t.$implicit;ke("routerLink",wh(3,Rle,n.id)),Ae(3),ab(" ",e+1," ",n.description,"")}}function Ile(r,t){if(1&r){const e=er();ge(0,"button",22),ft("click",function(){return Wn(e),gt(),jo(2).toggle()}),ge(1,"mat-icon",23),It(2,"menu"),me(),me()}}let Ale=(()=>{class r{constructor(e,n,s){this.breakpointObserver=e,this.details=n,this.ta=s,this.demoBlocks=[],this.isHandset$=this.breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)").pipe(ye(l=>l.matches),function(r,t,e){let n;return n=r&&"object"==typeof r?r:{bufferSize:r,windowTime:t,refCount:!1,scheduler:e},s=>s.lift(function({bufferSize:r=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:n}){let s,u,l=0,h=!1,p=!1;return function(b){let C;l++,!s||h?(h=!1,s=new eie(r,t,n),C=s.subscribe(this),u=b.subscribe({next(w){s.next(w)},error(w){h=!0,s.error(w)},complete(){p=!0,u=void 0,s.complete()}}),p&&(u=void 0)):C=s.subscribe(this),this.add(()=>{l--,C.unsubscribe(),C=void 0,u&&!p&&e&&0===l&&(u.unsubscribe(),u=void 0,s=void 0)})}}(n))}()),this.version=Kae.version,this.title="Blockly Automation"}ngOnInit(){var e,n;this.demoBlocks=this.details.demoBlocks.sort((s,l)=>s.description.localeCompare(l.description)),this.title=null===(n=null===(e=this.details)||void 0===e?void 0:e.settings)||void 0===n?void 0:n.title}executeOnDisplayBlockly(e){this.ta.sendDataToServer("DisplayBlocklyComponent",e)}}return r.\u0275fac=function(e){return new(e||r)(k(J_),k(L_),k(gD))},r.\u0275cmp=Tt({type:r,selectors:[["app-primary-navig"]],decls:65,vars:18,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation","target","_blank"],["mat-list-item","","href","https://ignatandrei.github.io/BlocklyAutomation","target","_blank"],["mat-list-item","","target","_blank",3,"routerLink",4,"ngFor","ngForOf"],["color","primary",1,"nav-bar"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[3,"title"],[1,"example-spacer"],["mat-raised-button","","color","primary",3,"click"],["id","download","mat-button","",3,"matMenuTriggerFor"],["download","matMenu"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseIISWin.zip/","target","_blank"],["mat-button","",3,"matMenuTriggerFor"],["examples","matMenu"],[1,"main-content"],["mat-list-item","","target","_blank",3,"routerLink"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(e,n){if(1&e&&(ge(0,"mat-sidenav-container",0),ge(1,"mat-sidenav",1,2),Sh(3,"async"),Sh(4,"async"),Sh(5,"async"),ge(6,"mat-toolbar"),ge(7,"a",3),It(8,"Menu"),me(),me(),ge(9,"mat-nav-list"),ge(10,"a",4),ge(11,"mat-icon"),It(12," source "),me(),It(13," Github"),me(),Nt(14,"mat-divider"),ge(15,"a",5),ge(16,"mat-icon"),It(17," https "),me(),It(18," Demo online"),me(),Nt(19,"mat-divider"),ge(20,"mat-expansion-panel"),ge(21,"mat-expansion-panel-header"),ge(22,"mat-panel-title"),It(23),me(),me(),Ct(24,xle,4,5,"a",6),me(),me(),me(),ge(25,"mat-sidenav-content"),ge(26,"mat-toolbar",7),Ct(27,Ile,3,0,"button",8),Sh(28,"async"),ge(29,"span",9),It(30),me(),Nt(31,"span",10),ge(32,"button",11),ft("click",function(){return n.executeOnDisplayBlockly("createIntro")}),ge(33,"mat-icon"),It(34," help_outline "),me(),It(35," Help"),me(),ge(36,"button",12),ge(37,"mat-icon"),It(38," file_download "),me(),me(),ge(39,"mat-menu",null,13),ge(41,"a",14),It(42," Download HTML"),me(),ge(43,"a",15),It(44," Download Linux"),me(),ge(45,"a",16),It(46," Download Windows"),me(),ge(47,"a",17),It(48," Download IIS"),me(),me(),ge(49,"button",18),ge(50,"mat-icon"),It(51," source "),me(),me(),ge(52,"mat-menu",null,19),ge(54,"a",4),ge(55,"mat-icon"),It(56," source "),me(),It(57," Github"),me(),Nt(58,"mat-divider"),ge(59,"a",5),ge(60,"mat-icon"),It(61," https "),me(),It(62," Demo online"),me(),me(),me(),ge(63,"div",20),Nt(64,"router-outlet"),me(),me(),me()),2&e){const s=jo(40),l=jo(53);Ae(1),ke("mode",Mh(4,12,n.isHandset$)?"over":"side")("opened",!1===Mh(5,14,n.isHandset$)),yt("role",Mh(3,10,n.isHandset$)?"dialog":"navigation"),Ae(22),io(" Demos ",n.demoBlocks.length," "),Ae(1),ke("ngForOf",n.demoBlocks),Ae(3),ke("ngIf",Mh(28,16,n.isHandset$)),Ae(2),jT("title",n.version),Ae(1),ar(n.title),Ae(6),ke("matMenuTriggerFor",s),Ae(13),ke("matMenuTriggerFor",l)}},directives:[jV,zV,hle,Ele,u_,Cle,T0,ple,R0,x0,LV,$u,O0,fo,bd,AV,DV,fM],pipes:[fS],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%}.sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-content[_ngcontent-%COMP%]{height:97%;width:100%}.nav-bar[_ngcontent-%COMP%]{height:3%;width:100%}"]}),r})(),Ole=(()=>{class r{constructor(e,n){var s,l;this.titleService=e,this.title="AutoBlocklyApp",console.log(null===(s=n.settings)||void 0===s?void 0:s.title),this.titleService.setTitle((null===(l=n.settings)||void 0===l?void 0:l.title)||"")}}return r.\u0275fac=function(e){return new(e||r)(k(p1),k(L_))},r.\u0275cmp=Tt({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(e,n){1&e&&Nt(0,"app-primary-navig")},directives:[Ale],styles:[""]}),r})(),L0=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[Jr,rn,X_],rn]}),r})();const fce={provide:new je("mat-autocomplete-scroll-strategy"),deps:[mo],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let vce=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[fce],imports:[[md,sE,rn,Jr],eu,sE,rn]}),r})(),Cce=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[LC,rn],rn]}),r})(),Sce=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[md,rn,pd],rn]}),r})(),Oce=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[rn,_l],rn]}),r})(),Vce=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[rn],rn]}),r})(),_H=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({}),r})(),Qce=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[_l,rn,X_,_H],rn,_H]}),r})();const CH=new je("mat-chips-default-options"),uue={separatorKeyCodes:[13]};let due=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[ml,{provide:CH,useValue:uue}],imports:[[rn]]}),r})(),_ue=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[ng]]}),r})(),fE=(()=>{class r{constructor(){this.changes=new j,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({factory:function(){return new r},token:r,providedIn:"root"}),r})();const Vue={provide:fE,deps:[[new sr,new Io,fE]],useFactory:function(r){return r||new fE}};let Yue=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[Vue,ml],imports:[[rn,Jr,pd,rp,_ue,w0,_l],rn]}),r})(),AH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[eg]]}),r})(),Zue=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[ml],imports:[[AH,L0,rn],AH,L0]}),r})(),Z_=(()=>{class r{constructor(){this.changes=new j,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,n){return`${e} \u2013 ${n}`}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({factory:function(){return new r},token:r,providedIn:"root"}),r})();const Ide={provide:new je("mat-datepicker-scroll-strategy"),deps:[mo],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let Vde=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[Z_,Ide],imports:[[Jr,rp,md,LC,pd,rn],eu]}),r})();function Hde(r,t){}class Y0{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const Ude={dialogContainer:Tr("dialogContainer",[Xn("void, exit",Zt({opacity:0,transform:"scale(0.7)"})),Xn("enter",Zt({transform:"none"})),oi("* => enter",di("150ms cubic-bezier(0, 0, 0.2, 1)",Zt({transform:"none",opacity:1}))),oi("* => void, * => exit",di("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Zt({opacity:0})))])};let Gde=(()=>{class r extends U_{constructor(e,n,s,l,u,h){super(),this._elementRef=e,this._focusTrapFactory=n,this._changeDetectorRef=s,this._config=u,this._focusMonitor=h,this._animationStateChanged=new st,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=p=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(p)),this._ariaLabelledBy=u.ariaLabelledBy||null,this._document=l}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const n=qc(),s=this._elementRef.nativeElement;(!n||n===this._document.body||n===s||s.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=qc())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=qc();return e===n||e.contains(n)}}return r.\u0275fac=function(e){return new(e||r)(k(qe),k(OC),k(bn),k(Ut,8),k(Y0),k(Ur))},r.\u0275dir=Te({type:r,viewQuery:function(e,n){if(1&e&&gn(gs,7),2&e){let s;Ye(s=$e())&&(n._portalOutlet=s.first)}},features:[He]}),r})(),Wde=(()=>{class r extends Gde{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:n}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}_onAnimationStart({toState:e,totalTime:n}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=cn(r)))(n||r)}}(),r.\u0275cmp=Tt({type:r,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,n){1&e&&vh("@dialogContainer.start",function(l){return n._onAnimationStart(l)})("@dialogContainer.done",function(l){return n._onAnimationDone(l)}),2&e&&(ro("id",n._id),yt("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),bh("@dialogContainer",n._state))},features:[He],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&Ct(0,Hde,0,0,"ng-template",0)},directives:[gs],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Ude.dialogContainer]}}),r})(),zde=0;class $0{constructor(t,e,n="mat-dialog-"+zde++){this._overlayRef=t,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new j,this._afterClosed=new j,this._beforeClosed=new j,this._state=0,e._id=n,e._animationStateChanged.pipe(yi(s=>"opened"===s.state),Fi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(yi(s=>"closed"===s.state),Fi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(yi(s=>27===s.keyCode&&!this.disableClose&&!Er(s))).subscribe(s=>{s.preventDefault(),K0(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():K0(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(yi(e=>"closing"===e.state),Fi(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function K0(r,t,e){return void 0!==r._containerInstance&&(r._containerInstance._closeInteractionType=t),r.close(e)}const jde=new je("MatDialogData"),Xde=new je("mat-dialog-default-options"),XH=new je("mat-dialog-scroll-strategy"),$de={provide:XH,deps:[mo],useFactory:function(r){return()=>r.scrollStrategies.block()}};let Kde=(()=>{class r{constructor(e,n,s,l,u,h,p,g,b){this._overlay=e,this._injector=n,this._defaultOptions=s,this._parentDialog=l,this._overlayContainer=u,this._dialogRefConstructor=p,this._dialogContainerType=g,this._dialogDataToken=b,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new j,this._afterOpenedAtThisLevel=new j,this._ariaHiddenElements=new Map,this.afterAllClosed=qm(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Bi(void 0))),this._scrollStrategy=h}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,n){(n=function(r,t){return Object.assign(Object.assign({},t),r)}(n,this._defaultOptions||new Y0)).id&&this.getDialogById(n.id);const s=this._createOverlay(n),l=this._attachDialogContainer(s,n),u=this._attachDialogContent(e,l,s,n);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(u),u.afterClosed().subscribe(()=>this._removeOpenDialog(u)),this.afterOpened.next(u),l._initializeWithAttachedContent(),u}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const n=this._getOverlayConfig(e);return this._overlay.create(n)}_getOverlayConfig(e){const n=new Jh({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachDialogContainer(e,n){const l=Yn.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:Y0,useValue:n}]}),u=new hd(this._dialogContainerType,n.viewContainerRef,l,n.componentFactoryResolver);return e.attach(u).instance}_attachDialogContent(e,n,s,l){const u=new this._dialogRefConstructor(s,n,l.id);if(e instanceof ci)n.attachTemplatePortal(new Sa(e,null,{$implicit:l.data,dialogRef:u}));else{const h=this._createInjector(l,u,n),p=n.attachComponentPortal(new hd(e,l.viewContainerRef,h));u.componentInstance=p.instance}return u.updateSize(l.width,l.height).updatePosition(l.position),u}_createInjector(e,n,s){const l=e&&e.viewContainerRef&&e.viewContainerRef.injector,u=[{provide:this._dialogContainerType,useValue:s},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:n}];return e.direction&&(!l||!l.get(Ii,null,pn.Optional))&&u.push({provide:Ii,useValue:{value:e.direction,change:an()}}),Yn.create({parent:l||this._injector,providers:u})}_removeOpenDialog(e){const n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,l)=>{s?l.setAttribute("aria-hidden",s):l.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let s=n.length-1;s>-1;s--){let l=n[s];l!==e&&"SCRIPT"!==l.nodeName&&"STYLE"!==l.nodeName&&!l.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(l,l.getAttribute("aria-hidden")),l.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return r.\u0275fac=function(e){return new(e||r)(k(mo),k(Yn),k(void 0),k(void 0),k(z_),k(void 0),k(Xa),k(Xa),k(je))},r.\u0275dir=Te({type:r}),r})(),J0=(()=>{class r extends Kde{constructor(e,n,s,l,u,h,p){super(e,n,l,h,p,u,$0,Wde,jde)}}return r.\u0275fac=function(e){return new(e||r)(be(mo),be(Yn),be(Ff,8),be(Xde,8),be(XH),be(r,12),be(z_))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),Zde=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[J0,$de],imports:[[md,pd,rn],rn]}),r})();const hhe={provide:new je("mat-select-scroll-strategy"),deps:[mo],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let qH=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[hhe],imports:[[Jr,md,sE,rn],eu,L0,sE,rn]}),r})();const Che={provide:new je("mat-tooltip-scroll-strategy"),deps:[mo],useFactory:function(r){return()=>r.scrollStrategies.reposition({scrollThrottle:20})}};let iU=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[Che],imports:[[LC,Jr,md,rn],rn,eu]}),r})(),tv=(()=>{class r{constructor(){this.changes=new j,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,n,s)=>{if(0==s||0==n)return`0 of ${s}`;const l=e*n;return`${l+1} \u2013 ${l<(s=Math.max(s,0))?Math.min(l+n,s):l+n} of ${s}`}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({factory:function(){return new r},token:r,providedIn:"root"}),r})();const Lhe={provide:tv,deps:[[new sr,new Io,tv]],useFactory:function(r){return r||new tv}};let Hhe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[Lhe],imports:[[Jr,rp,qH,iU,rn]]}),r})(),Xhe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[Jr,rn],rn]}),r})();function Yhe(r,t){if(1&r&&(jr(),Nt(0,"circle",3)),2&r){const e=gt();fr("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),yt("r",e._getCircleRadius())}}function $he(r,t){if(1&r&&(jr(),Nt(0,"circle",3)),2&r){const e=gt();fr("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),yt("r",e._getCircleRadius())}}const Zhe=oa(class{constructor(r){this._elementRef=r}},"primary"),sU=new je("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class su extends Zhe{constructor(t,e,n,s,l){super(t),this._document=n,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const u=su._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),u.has(n.head)||u.set(n.head,new Set([100])),this._fallbackAnimation=e.EDGE||e.TRIDENT,this._noopAnimations="NoopAnimations"===s&&!!l&&!l._forceAnimations,l&&(l.diameter&&(this.diameter=l.diameter),l.strokeWidth&&(this.strokeWidth=l.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=mi(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=mi(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,mi(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=uB(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,n=su._diameters;let s=n.get(t);if(!s||!s.has(e)){const l=this._document.createElement("style");l.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),l.textContent=this._getAnimationText(),t.appendChild(l),s||(s=new Set,n.set(t,s)),s.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}su.\u0275fac=function(t){return new(t||su)(k(qe),k(jn),k(Ut,8),k(Vi,8),k(sU))},su.\u0275cmp=Tt({type:su,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(yt("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),fr("width",e.diameter,"px")("height",e.diameter,"px"),xt("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[He],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(jr(),ge(0,"svg",0),Ct(1,Yhe,1,9,"circle",1),Ct(2,$he,1,7,"circle",2),me()),2&t&&(fr("width",e.diameter,"px")("height",e.diameter,"px"),ke("ngSwitch","indeterminate"===e.mode),yt("viewBox",e._getViewBox()),Ae(1),ke("ngSwitchCase",!0),Ae(1),ke("ngSwitchCase",!1))},directives:[zl,Ku],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),su._diameters=new WeakMap;let tpe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[rn,Jr],rn]}),r})(),ppe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[_l,rn],rn]}),r})(),hU=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[Jr,rn],rn]}),r})(),pU=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({}),r})(),Fpe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[pU,_l,rn,X_],pU,rn]}),r})(),bE=(()=>{class r{constructor(){this.changes=new j}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=Et({factory:function(){return new r},token:r,providedIn:"root"}),r})();const Xpe={provide:bE,deps:[[new sr,new Io,bE]],useFactory:function(r){return r||new bE}};let $pe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({providers:[Xpe],imports:[[Jr,rn]]}),r})(),lfe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[CD]]}),r})(),Sfe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[lfe,rn],rn]}),r})(),oge=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[Jr,rn,pd,_l,X_,LC],rn]}),r})(),uge=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({}),r})(),vge=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r}),r.\u0275inj=Bt({imports:[[uge,rn],rn]}),r})(),bge=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=jt({type:r,bootstrap:[Ole]}),r.\u0275inj=Bt({providers:[L_,gD,{provide:Af,useFactory:yge,deps:[L_],multi:!0}],imports:[[SS,$ae,TX,joe,hU,rp,Mne,vce,Cce,Sce,rp,Oce,Vce,Qce,due,Yue,Vde,Zde,$V,Oae,zse,w0,Zue,tH,dae,cse,Hhe,Xhe,tpe,ppe,_l,qH,XV,hU,Fpe,hV,$pe,Sfe,oge,YV,iU,vge,YV,rp,XV,w0,tH,Pae.forRoot()]]}),r})();function yge(r){return()=>r.Init()}(function(){if(qO)throw new Error("Cannot enable prod mode after platform setup.");ZO=!1})(),E9().bootstrapModule(bge).catch(r=>console.error(r))},39855:(S,A,_)=>{S.exports={interpreterHelper:_(44212),saveBlocksUrl:_(70200),saveLoad:_(98288)}},44212:(S,A,_)=>{A.createInterpreter=function(E,R){return{latestCode:"",workspace:E,BlocklyJavaScript:R,step:0,highlightPause:!1,myInterpreter:null,runner:null,generateCodeAndLoadIntoInterpreter:function(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(E),this.resetStepUi(!0)},resetStepUi:function(a){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1},resetInterpreter:function(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)},highlightBlock:function(a){this.workspace.highlightBlock(a),highlightPause=!0},runCode:function(a,o,c){this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var d=this;setTimeout(function(){this.highlightPause=!1,d.myInterpreter=a(d.latestCode,(f,v)=>d.initApiJS(f,v,d,o,c)),d.runner=function(){d.myInterpreter&&(d.myInterpreter.run()?setTimeout(d.runner,10):(c?c():console.log("\n\n<< Program complete >>"),d.resetInterpreter(),d.resetStepUi(!1)))},d.runner&&d.runner()},100)},initInterpreterWaitForSeconds:function(a,o){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var c=a.createAsyncFunction(function(d,f){setTimeout(f,1e3*d)});a.setProperty(o,"waitForSeconds",c)},getCreds:function(a,o,c){var d=a.pseudoToNative(o),f="(localSite)";(c.startsWith("http://")||c.startsWith("https://"))&&(f=new URL(c).hostname);var v=!1;return f in d?v=d[f]:"*"in d&&(v=d["*"]),v},getHeaders:function(a,o,c){var d=a.pseudoToNative(o),f="(localSite)";(c.startsWith("http://")||c.startsWith("https://"))&&(f=new URL(c).hostname);var v=[];return f in d?v=d[f]:"*"in d&&(v=d["*"]),v},doGet:function(a,o,c,d){let f=new XMLHttpRequest;if(f.open("GET",a,!0),f.withCredentials=d,c&&c.length>0)for(var v=0;v<c.length;v++){var y=c[v];f.setRequestHeader(y.name,y.value)}f.onreadystatechange=function(){if(4==f.readyState){if(f.status>=200&&f.status<300){var D=JSON.stringify({origHref:a,objectToSend:"",status:f.status,statusOK:!0,text:f.responseText});return o(D)}return D=JSON.stringify({origHref:a,objectToSend:"",status:f.status,statusOK:!1,text:f.responseText}),o(D)}},f.send(null)},exportToFile:function(a,o,c){var f,d=_(74694);return f=c?this.b64toBlob(o):new Blob([o],{type:"text/plain;charset=utf-8"}),d.saveAs(f,a),a},b64toBlob:function(a,o="",c=512){const d=atob(a),f=[];for(let y=0;y<d.length;y+=c){const D=d.slice(y,y+c),O=new Array(D.length);for(let X=0;X<D.length;X++)O[X]=D.charCodeAt(X);const U=new Uint8Array(O);f.push(U)}return new Blob(f,{type:o})},displayDateCurrentAsHuman:function(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},displayDateCurrentAsIso:function(){return(new Date).toISOString()},displayDateCurrentAsUnix:function(){return Date.now()},displayDateFormatted:function(a){switch(a){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:console.log("Date time format not suported")}},doPut:(a,o,c,d,f)=>{let v=o,y=new XMLHttpRequest;if(y.open("PUT",a,!0),f)y.withCredentials=f;else if(d&&d.length>0)for(var D=0;D<d.length;D++){var O=d[D];y.setRequestHeader(O.name,O.value)}else y.setRequestHeader("Content-Type","application/json;charset=UTF-8");y.onreadystatechange=function(){if(4==y.readyState){if(y.status>=200&&y.status<300){var U=JSON.stringify({origHref:a,objectToSend:o,status:y.status,statusOK:!0,text:y.responseText});return c(U)}return U=JSON.stringify({origHref:a,objectToSend:o,status:y.status,statusOK:!1,text:y.responseText}),c(U)}},y.send(v)},doDelete:(a,o,c,d,f)=>{let v=o;var y=new XMLHttpRequest;if(y.open("DELETE",a,!0),f)y.withCredentials=f;else if(d&&d.length>0)for(var D=0;D<d.length;D++){var O=d[D];y.setRequestHeader(O.name,O.value)}else y.setRequestHeader("Content-Type","application/json;charset=UTF-8");y.onreadystatechange=function(){if(4==y.readyState){if(y.status>=200&&y.status<300){var U=JSON.stringify({origHref:a,objectToSend:"",status:y.status,statusOK:!0,text:y.responseText});return c(U)}return U=JSON.stringify({origHref:a,objectToSend:"",status:y.status,statusOK:!1,text:y.responseText}),c(U)}},y.send(v)},doPost:function(a,o,c,d,f){let v=o,y=new XMLHttpRequest;if(y.open("POST",a,!0),f)y.withCredentials=f;else if(d&&d.length>0)for(var D=0;D<d.length;D++){var O=d[D];y.setRequestHeader(O.name,O.value)}else y.setRequestHeader("Content-Type","application/json;charset=UTF-8");y.onreadystatechange=function(){if(4==y.readyState){if(y.status>=200&&y.status<300){var U=JSON.stringify({origHref:a,objectToSend:o,status:y.status,statusOK:!0,text:y.responseText});return c(U)}return U=JSON.stringify({origHref:a,objectToSend:o,status:y.status,statusOK:!1,text:y.responseText}),c(U)}},y.send(v)},initApiJS:function(a,o,c,d,f){a.setProperty(o,"errHandler",a.createNativeFunction(v=O=>{d?d("\n error --\n"+O+"\n error --"):console.log(O)}));var y=a.nativeToPseudo({"(localSite)":!1});a.setProperty(o,"withCredsForDomain",y);var D=a.nativeToPseudo({"(localSite)":[]});a.setProperty(o,"headersForDomain",D),a.setProperty(o,"alert1",a.createNativeFunction(v=function(O){O=O?O.toString():"",window.alert(O)})),a.setProperty(o,"alert",a.createNativeFunction(v=function(O){O=O?O.toString():"",d?d(O):console.log(O)})),a.setProperty(o,"waitTime",a.createAsyncFunction(v=(O,U)=>{console.log(`waiting seconds ${O}`),setTimeout(U,1e3*O)})),a.setProperty(o,"displayDateFormatted",a.createNativeFunction(v=O=>c.displayDateFormatted(O))),a.setProperty(o,"exportToFile",a.createNativeFunction(v=(O,U,X)=>c.exportToFile(O,U,X))),a.setProperty(o,"convertToCSV",a.createNativeFunction(v=O=>{let U="object"!=typeof O?JSON.parse(O):{};return U=[Object.keys(U[0])].concat(U),U.map(H=>Object.values(H).toString()).join("\n")})),a.setProperty(o,"open",a.createNativeFunction(v=function(O){window.open(O)})),a.setProperty(o,"changeHost",a.createNativeFunction(v=function(O,U){if(0==(U=(U=U?U.toString():"").trim()).length)return O;if(0==(O=(O=O||"").trim()).length&&!(O=U).startsWith("http"))throw`please put in front of ${U} http:// or https://`;(O=new URL(O)).hostname=U.replace("https://","").replace("http://","");var X=O.href;return X.endsWith("/")&&(X=X.substring(0,X.length-1)),X})),a.setProperty(o,"changePort",a.createNativeFunction(v=function(O,U){O=new URL(O),console.log(`url ${O.href}`),O.port=U,console.log(`url ${O.href}`);var X=O.href;return X.endsWith("/")&&(X=X.substring(0,X.length-1)),X}));var v=function(O){return O=O?O.toString():"",a.createPrimitive(prompt(O))};a.setProperty(o,"prompt",a.createNativeFunction(v)),c.BlocklyJavaScript.addReservedWords("waitForSeconds"),v=a.createAsyncFunction(function(O,U){setTimeout(U,1e3*O)}),a.setProperty(o,"waitForSeconds",v),a.setProperty(o,"getXhr",a.createAsyncFunction(v=(O,U)=>{var X=c.getHeaders(a,D,O),H=c.getCreds(a,y,O);return c.doGet(O,U,X,H)})),a.setProperty(o,"postXhr",a.createAsyncFunction(v=(O,U,X)=>{try{var H=c.getHeaders(a,D,O),ne=c.getCreds(a,y,O);c.doPost(O,U,X,H,ne)}catch(ee){alert("is an error"+ee)}})),a.setProperty(o,"deleteXhr",a.createAsyncFunction(v=(O,U,X)=>{try{var H=c.getHeaders(a,D,O),ne=c.getCreds(a,y,O);c.doDelete(O,U,X,H,ne)}catch(ee){alert("is an error"+ee)}})),v=(O,U,X)=>{try{var H=a.pseudoToNative(D),ne="(localSite)";(O.startsWith("http://")||O.startsWith("https://"))&&(ne=new URL(O).hostname);var ee=[];ne in H&&(ee=H[ne]),c.doPut(O,U,X,ee,!1)}catch(ue){alert("is an error"+ue)}},a.setProperty(o,"putXhr",a.createAsyncFunction(v)),v=function(O){return O=O?O.toString():"",a.createPrimitive(c.highlightBlock(O))},a.setProperty(o,"highlightBlock",a.createNativeFunction(v))}}}},70200:(S,A)=>{A.saveState=function(R,a){var c=R.workspaceToDom(a,!0),d=R.domToPrettyText(c);window.localStorage.setItem("BlocklyState",d)},A.restoreState=function(R,a){var c=window.localStorage.getItem("BlocklyState");if(c.length>62){var d=R.textToDom(c);R.clearWorkspaceAndLoadFromXml(d,a)}return""}},98288:(S,A,_)=>{var E=_(74694);A.DownloadBlocks=function(R,a,o){var c=R.workspaceToDom(a,!0),d=R.domToPrettyText(c),f=new Blob([d],{type:"text/plain;charset=utf-16"});E.saveAs(f,o)},A.LoadFile=function(R,a,o){a.clear();var c=R.textToDom(o);R.domToWorkspace(c,a)}},99848:(S,A)=>{A.definitionBlocks=function(_,E){_.credsforhttp={init:function(){this.appendDummyInput().appendField("Http with Creds"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("WithCreds").setCheck("Boolean").appendField("With Creds ?"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},E.credsforhttp=function(o){return"withCredsForDomain["+(E.valueToCode(o,"HttpDomain",0)||"(localSite)")+"]="+E.valueToCode(o,"WithCreds",0)+";\n"}},A.fieldXML=function(){return'<block type="credsforhttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="WithCreds">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},10650:(S,A)=>{A.definitionBlocks=function(_,E){_.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},E.auth0webapidata=function(o){var y='{"client_id":'+E.valueToCode(o,"client_id",0);return y+=',"client_secret":'+E.valueToCode(o,"client_secret",0),y+=',"audience":'+E.valueToCode(o,"audience",0),y+=',"grant_type":'+E.valueToCode(o,"grant_type",0),[y+="}",99]}},A.fieldXML=function(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}},80681:(S,A)=>{A.definitionBlocks=function(_,E,R,a){_.chart_js={init:function(){this.appendDummyInput().appendField("ChartType").appendField(R([["HBar","HBar"],["VBar","VBar"]]),"ChartTypeValue"),this.appendValueInput("ChartTitleValue").setCheck(null).appendField(a("Title"),"ChartTitle"),this.appendValueInput("LabelsValue").setCheck("Array").appendField(a("Labels"),"ChartLabels"),this.appendValueInput("DataSet1Label").setCheck("String").appendField(a("DataSet1 Label"),"DataSetLabel1"),this.appendValueInput("DataSet1Data").setCheck("Array").appendField(a("DataSet1 Data"),"DataSetData1"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},E.chart_js=function(o){var c=o.getFieldValue("ChartTypeValue"),f=(E.valueToCode(o,"ChartTitleValue",E.ORDER_ATOMIC),E.valueToCode(o,"LabelsValue",E.ORDER_ATOMIC)),v=E.valueToCode(o,"DataSet1Label",E.ORDER_ATOMIC),y=E.valueToCode(o,"DataSet1Data",E.ORDER_ATOMIC),D="";switch(c){case"HBar":case"VBar":D="bar";break;default:throw"Unknown chart type:"+c}return[`JSON.stringify({ 'type': '${D}', 'data': {  'labels': ${f}, 'datasets': [{ 'backgroundColor': ['green','blue'],'label': ${v}, 'data': ${y} }] } })`,E.ORDER_NONE]}},A.fieldXML=function(){return'<block type="chart_js"></block>'}},31439:(S,A)=>{A.definitionBlocks=function(_,E,R){_.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(R(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},E.comment=function(o){return"/*\n"+(E.valueToCode(o,"TEXT",0)||"''")+"\n*/;\n"}},A.fieldXML=function(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n'}},5986:(S,A)=>{A.definitionBlocks=function(_,E){_.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},E.converttojson=function(c){return["JSON.parse("+E.valueToCode(c,"ValueToConvert",0)+")",99]},_.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},E.converttostring=function(c){return["JSON.stringify("+E.valueToCode(c,"ValueToConvert",0)+")",99]},_.convertcsv={init:function(){this.appendDummyInput().appendField("Convert CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},E.convertcsv=function(c){return["convertToCSV("+E.valueToCode(c,"ArrayToConvert",E.ORDER_ATOMIC)+")",99]}},A.fieldXML=function(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n'}},44832:(S,A)=>{A.definitionBlocks=function(_,E,R,a,o){E.object_from_json=function(fe){return[`JSON.parse(${E.valueToCode(fe,"JSON",0)})`,99]},E.object_to_json=function(fe){return[`JSON.stringify(${E.valueToCode(fe,"object",0)})`,99]},E.object_get=function(fe){const Q=fe.getFieldValue("field_name");return[`${E.valueToCode(fe,"object",0)}['${Q}']`,99]},E.object_set=function(fe){const Q=fe.getFieldValue("field_name");return`${E.valueToCode(fe,"object_field",0)}['${Q}'] = ${E.valueToCode(fe,"value_field",0)};\n`},E.object_create=function(fe){if(!fe.numFields)return["{}",99];let Q="";for(let oe=1;oe<=fe.numFields;oe++)Q+=`"${fe.getFieldValue("field"+oe)}": ${E.valueToCode(fe,"field_input"+oe,0)}, `;return[`{ ${Q} }`,99]};const H="object_field",ne="object_create_mutator_top",ee="#F99EA3",J=(fe,...Q)=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[fe]),ue={type:"object_from_json",message0:J("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:ee,tooltip:J("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};_.object_from_json={init:function(){this.jsonInit(ue)}};const se={type:"object_to_json",message0:J("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:ee,tooltip:J("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};_.object_to_json={init:function(){this.jsonInit(se)}};const _e={type:"object_get",message0:J("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:ee,tooltip:J("object_get_json_tooltip"),helpUrl:""};_.object_get={init:function(){this.jsonInit(_e)}};const re={type:"object_set",message0:J("object_set_json"),args0:[{type:"field_input",name:"field_name",text:J("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:ee,tooltip:J("object_set_json_tooltip"),helpUrl:""};_.object_set={init:function(){this.jsonInit(re)}};const q={type:"object_create",message0:J("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:J("object_create_tooltip"),helpUrl:""};_.object_create={init:function(){this.jsonInit(q)}};const ie={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:J("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};_[H]={init:function(){this.jsonInit(ie)}};const Z={type:"object_create_mutator",message0:J("object_create"),nextStatement:null,colour:15,tooltip:J("object_create_tooltip"),helpUrl:""};_[ne]={init:function(){this.jsonInit(Z)}},R.registerMutator("controls_create_mutator",{numFields:0,fields:[],domToMutation:function(fe){this.fields=[];for(let j,Q=0;j=fe.childNodes[Q];Q++)"field"==j.nodeName.toLowerCase()&&this.fields.push(j.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const fe=document.createElement("mutation");fe.setAttribute("num_fields",""+this.numFields);for(let Q=0;Q<this.fields.length;Q++){const j=document.createElement("field");j.setAttribute("name",this.fields[Q]),fe.appendChild(j)}return fe},compose:function(fe){let Q=fe.nextConnection&&fe.nextConnection.targetBlock();this.numFields=0,this.fields=[];let j=[null];for(;Q;)this.fields.push(Q.getFieldValue("field_name")),this.numFields++,j.push(Q.savedConnection),Q=Q.nextConnection&&Q.nextConnection.targetBlock();this.updateShape();for(let oe=1;oe<=this.numFields;oe++)o().reconnect(j[oe],this,"field_input"+oe)},decompose:function(fe){const Q=fe.newBlock(ne);Q.initSvg();let j=Q.nextConnection;for(let oe=0;oe<this.fields.length;oe++){const de=fe.newBlock(H);de.initSvg(),de.setFieldValue(this.fields[oe],"field_name"),j.connect(de.previousConnection),j=de.nextConnection}return Q},saveConnections:function(fe){let Q=fe.nextConnection&&fe.nextConnection.targetBlock(),j=1;for(;Q;){const oe=this.getInput("field_input"+j);Q.savedConnection=oe&&oe.connection.targetConnection,Q.setFieldValue(this.getFieldValue("field"+j),"field_name"),j++,Q=Q.nextConnection&&Q.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let fe=1;for(;this.getInput("field_input"+fe);)this.removeInput("field_input"+fe),fe++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let Q=1;Q<=this.numFields;Q++){const j=this.fields[Q-1];this.appendValueInput("field_input"+Q).setCheck(null).setAlign(1).appendField(a(j),"field"+Q)}}},null,["object_field"])},A.fieldXML=function(){return'    \n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n\n'}},31310:(S,A)=>{A.definitionBlocks=function(_,E,R){_.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new R([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};E.displayCurrentDate=c=>{let f="";switch(c.getFieldValue("dateFormat").toString()){case"human":f="displayDateFormatted('human')";break;case"iso":f="displayDateFormatted('iso')";break;case"unix":f="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[f,99]}},A.fieldXML=function(){return'<block type="displayCurrentDate"></block>'}},70061:(S,A)=>{A.definitionBlocks=function(_,E){_.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},E.DateFromText=a=>["Date.parse("+(E.valueToCode(a,"VALUE",E.ORDER_ATOMIC)||"")+")",99]},A.fieldXML=function(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}},75140:(S,A)=>{A.generalBlocks=function(){return'\n    \n    <category name="Blockly Core">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}},93736:(S,A)=>{A.definitionBlocks=function(_,E){_.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},E.exportfile=function(o){return"exportToFile("+E.valueToCode(o,"fileName",0)+","+E.valueToCode(o,"contentFile",0)+","+E.valueToCode(o,"convertToByte",0)+");\n"}},A.fieldXML=function(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},21811:(S,A)=>{A.definitionBlocks=function(_,E){_.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},E.filterList=function(R){var a=E.valueToCode(R,"LIST",E.ORDER_MEMBER)||"[]",o=E.valueToCode(R,"Logic",E.ORDER_ATOMIC);"string"==typeof o&&(o=o.substr(1,o.length-2));var c="";return c+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+a+")).filter(function (item){ return "+o+";})",[c+="",E.ORDER_FUNCTION_CALL]},_.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},E.mapList=function(R){var a=E.valueToCode(R,"LIST",E.ORDER_MEMBER)||"[]",o=E.valueToCode(R,"Logic",E.ORDER_ATOMIC);"string"==typeof o&&(o=o.substr(1,o.length-2));var c="";return c+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+a+")).map(function (item){ return "+o+";})",[c+="",E.ORDER_FUNCTION_CALL]}},A.fieldXML=function(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n\n        </category>\n\n'}},92605:(S,A)=>{A.definitionBlocks=function(_,E,R){_.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},E.window_open=function(c){return"open("+(E.valueToCode(c,"TEXT",99)||"''")+");\n"},_.text_message={init:function(){this.jsonInit({message0:"alert %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},E.text_message=function(c){return"alert1("+(E.valueToCode(c,"TEXT",99)||"''")+");\n"},_.text_print_return={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("print return").appendField(R(""),"NAME"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},E.text_print_return=function(c){var d=E.valueToCode(c,"TEXT",0)||"''";return["(function(){window.alert("+d+");\n;return ("+d+");}())\n",99]},_.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},E.valuefromtext=function(c){return["getIDProp("+E.valueToCode(c,"IdOfText",0)+","+(E.valueToCode(c,"ValueToObtain",0)||'"value"')+")",99]}},A.fieldXML=function(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_print_return"></block>  \n    <block type="text_prompt_ext"></block>\n    <block type="text_message"></block>\n    \n    '}},57470:(S,A,_)=>{S.exports={defaultBlocks:_(75140),filterBlocks:_(21811),waitBlocks:_(95870),xhrBlocks:_(67716),propBlocks:_(53951),guiBlocks:_(92605),convertersBlocks:_(5986),exportFileBlock:_(93736),createObjectBlocks:_(44832),currentDateBlock:_(31310),dateFromTextBlock:_(70061),waitBlocks:_(96126),commentBlock:_(31439),auth0Blocks:_(10650),windowsCreds:_(99848),trycatchFinBlock:_(73375),chartBlock:_(80681)}},53951:(S,A)=>{A.definitionBlocks=function(_,E,R){_.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(R("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(R(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(R("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},E.modifyproperty=function(f){return E.valueToCode(f,"ObjectToChange",0)+"["+E.valueToCode(f,"PropertyName",0)+"]="+E.valueToCode(f,"NewValue",0)+";"},_.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(R("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(R("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},E.getproperty=function(f){return['(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+E.valueToCode(f,"ObjectToChange",0)+"))["+E.valueToCode(f,"PropertyName",0)+"]",99]}},A.fieldXML=function(){return'\n    \n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n'}},73375:(S,A)=>{A.definitionBlocks=function(_,E){_.trycatchfinally={init:function(){this.appendStatementInput("TRY").appendField("try"),this.appendStatementInput("CATCH").appendField("catch"),this.appendStatementInput("FINALLY").appendField("finally"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},E.trycatchfinally=function(o){var v="try {\n"+E.statementToCode(o,"TRY")+"}\n";return(v+="catch(err){\n errHandler(JSON.stringify(err));\n"+E.statementToCode(o,"CATCH")+"\n}")+"finally{\n "+E.statementToCode(o,"FINALLY")+"\n}\n"}},A.fieldXML=function(){return'\n    \n    <block type="trycatchfinally">\n    \n</block>\n'}},96126:(S,A)=>{A.definitionBlocks=function(_,E){_.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},E.wait=function(a){return"waitTime("+(E.valueToCode(a,"VALUE",E.ORDER_ATOMIC)||"")+");"},_.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},E.wait_until=function(a){return"waitTime(("+(E.valueToCode(a,"VALUE",0)||"")+"-new Date())/1000);"}},A.fieldXML=function(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}},95870:(S,A)=>{A.definitionBlocks=function(_,E){_([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),E.wait_seconds=function(R){return"waitForSeconds("+Number(R.getFieldValue("SECONDS"))+");\n"}},A.fieldXML=function(){return'\n  <block type="wait_seconds"></block>\n'}},67716:(S,A)=>{A.definitionBlocks=function(_,E,R){_.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("at domain put (localSite) or *")}},E.headersbeforehttp=function(c){var d=E.valueToCode(c,"HttpDomain",0)||"(localSite)",y="\n";return y+="{\n",y+="if(!("+d+" in headersForDomain))\n",y+="{\n",y+="headersForDomain["+d+"]=[];\n",y+="};\n",y+="var arr = headersForDomain["+d+"];\n",y+="arr.push({name:"+E.valueToCode(c,"HeaderName",0)+", value:"+E.valueToCode(c,"HeaderValue",0)+"});\n",y+='//alert("a" + JSON.stringify(arr)+"a");\n',(y+='//alert("a" + JSON.stringify(headersForDomain['+d+'])+"a");\n')+"};\n"},_.httprequest={init:function(){this.appendDummyInput().appendField(R([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(R([["GET","GET"],["POST","POST"],["PUT","PUT"],["DELETE","DELETE"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},E.httprequest=function(c){var d=c.getFieldValue("TypeOutput"),f=c.getFieldValue("TypeRequest"),v=E.valueToCode(c,"TheUrl",0),y=E.valueToCode(c,"Data",0),D="";switch(f.toString()){case"GET":D="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+v+") )";break;case"POST":D="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+v,y&&(D+=","+y),D+=") )";break;case"DELETE":D="(function(url,data){ var res=JSON.parse(deleteXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+v,y&&(D+=","+y),D+=") )";break;case"PUT":D="(function(url,data){ var res=JSON.parse(putXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+v,y&&(D+=","+y),D+=") )";break;default:alert("Do not understand : "+f.toString())}var O=D;switch(d){case"JSON":O="JSON.parse("+O+")"}return[O,99]}},A.fieldXML=function(){return'\n    \n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n<block type="text_print">\n<value name="TEXT">\n\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n</block>\n</value>\n</block>    \n\n'}},47730:(S,A,_)=>{var E=_(38506).default;S.exports=class{constructor(o){Aa(this,"GenerateBlocks",[]),Aa(this,"GenerateFunctions",[]),Aa(this,"fieldXMLObjects",[]),Aa(this,"fieldXMLFunctions",[]),Aa(this,"hasError",!0),Aa(this,"paths",[]),Aa(this,"name",""),Aa(this,"operations",[]),Aa(this,"cacheCategSwaggerFromPaths",[]),Aa(this,"openApiDocument",null),Aa(this,"basePath",""),this.swaggerUrl=o}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}_${this.name}`}findCategSwaggerFromPaths(){if(this.cacheCategSwaggerFromPaths.length>0)return this.cacheCategSwaggerFromPaths;var o=this.paths.filter(d=>d&&d.id&&d.id.length>0).map(d=>{for(var f=d.id.length,v=d.id.indexOf("{");v>0;){var y=d.id.indexOf("}",v);if(f-y<2){d.id=d.id.substring(0,v);break}v=d.id.indexOf("{",y)}return d}).map(d=>(d.id.lastIndexOf("/")!=d.id.length-1&&(d.id+="/"),d));this.operations=o.filter(d=>d.nrOps>1).map(d=>({arr:d.id.split("/").filter(v=>v.length>0),id:d.id})).map(d=>({controller:d.arr[d.arr.length-1],id:d.id}));var c=o.filter(d=>1==d.nrOps).map(d=>({arr:d.id.split("/").filter(f=>f.length>0),id:d.id})).map(d=>1==d.arr.length?{controller:d.arr[0],id:d.id}:{controller:d.arr[d.arr.length-2],id:d.id});return this.operations.push(...c),this.cacheCategSwaggerFromPaths=[...new Set(this.operations.map(d=>d.controller))],this.cacheCategSwaggerFromPaths}categSwagger(){var o=this.findHostNameRegular();(o=o.replaceAll(".","")).length>5&&o.substring(0,5);var f=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+f+'"></category><category name="AllApi" custom="AllApi_'+f+'"></category>'}findRootSite(){var o=this.swaggerUrl,c="";if(o.startsWith("http://")||o.startsWith("https://")){var d=new URL(o);c=d.protocol+"//"+d.hostname,d.port.length>0&&(c+=":"+d.port)}return c}findHostNameRegular(){var v,o=this.swaggerUrl,c="(localSite)";if(o.startsWith("http://")||o.startsWith("https://")){var d=new URL(o),f=null!=(v=d.port)?v:80;c=d.hostname+f}return c.replaceAll(".","")}ParseSwagger(){var o=this;return E(function*(){var D,c=o;c.fieldXMLObjects.push(`<label text="${c.swaggerUrl}"></label>`),c.fieldXMLFunctions.push({id:"",gui:`<label text="${c.swaggerUrl}"></label>`});var d=null;try{d=(yield _(14087).default(o.swaggerUrl)).spec}catch(O){return console.error(`parseSwagger ${o.swaggerUrl}`,O),c.fieldXMLObjects.push("<label text='Error parsing!'></label>"),o}o.hasError=!1,o.basePath=d.basePath||"";var v=null==(D=d.components)?void 0:D.schemas;return(null==v||null==v)&&(v=d.definitions),v?Object.keys(v).sort().forEach(function(O){var U=v[O],X=c.findProperties(U),H=`<block type="${O}">`;X.forEach(function(ne){if(ne.value&&ne.value.type){var ee=c.GenerateShadowField(ne.value.type,ne.key);ee.length>0&&(H+=`<value name="val_${ne.key}">${ee}</value>`)}}),c.fieldXMLObjects.push(H+="</block>"),c.GenerateBlocks.push(c.GenerateBlock(U,O))}):console.log("_A",d),d.paths&&Object.keys(d.paths).forEach(function(O){var U=d.paths[O];c.paths.push({id:O,nrOps:Object.keys(U).length}),Object.keys(U).forEach(function(X){c.GenerateFunctions.push(c.GenerateFunction(U,O,U[X],X))})}),c.openApiDocument=d,c})()}findProperties(o){var c=[];return o.properties&&Object.keys(o.properties).forEach(d=>{c.push({key:d,value:o.properties[d]})}),c}GenerateNameFunction(o,c,d,f){return f+"_"+c.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateShadowField(o,c,d){switch(o){case"integer":return`<block type='math_number'><field name='NUM'>${d||0}</field></block>`;case"string":return`<block type='text'><field name='TEXT'>${d||`please enter ${c}`}</field></block>`;case"boolean":return`<block type='logic_boolean'><field name='BOOL'>${d||"FALSE"}</field></block>`;case"array":return'<block type="lists_create_with"> <mutation items="0"></mutation></block>';default:return""}}GenerateFunction(o,c,d,f){var v=this,y=v.GenerateNameFunction(o,c,d,f),O=d,U=`<block type="text_print"> <value name="TEXT"><block type="${y}">`;O.parameters&&O.parameters.forEach(J=>{if(J.type)(ue=v.GenerateShadowField(J.type,J.name)).length>0&&(U+=`<value name="val_${J.name}">${ue}</value>`);else if(J.schema&&J.schema.type){var ue;(ue=v.GenerateShadowField(J.schema.type,J.name)).length>0&&(U+=`<value name="val_${J.name}">${ue}</value>`)}});var X="",H="";try{var ne=new URL(v.findRootSite());X=ne.hostname,H=ne.port}catch(J){}var ee=v.GenerateShadowField("string","override_host",X=X||" ");return U+=`<value name="override_Host">${ee}</value>`,ee=v.GenerateShadowField("integer","override_port",H=H||"80"),U+=`<value name="override_Port">${ee}</value>`,U+="</block></value>",v.fieldXMLFunctions.push({id:c,gui:U+="</block>"}),function(J,ue,se){J[y]={init:function(){var _e=f;switch(f.toString().toLowerCase()){case"get":_e="",this.setColour(210);break;case"post":_e="",this.setColour(165);break;case"put":_e="",this.setColour(40);break;case"delete":_e="",this.setColour(10);break;default:console.log(`not found ${f}`),this.setColour(10)}for(var re=c,q=v.findCategSwaggerFromPaths(),ie=0;ie<q.length;ie++){var Z="/"+q[ie]+"/",G=c.indexOf(Z);if(G>-1){var fe=c.substring(G+Z.length);fe.length<re.length&&(re=fe)}}re.length>25&&(re=re.substring(0,25)+"..."),this.appendDummyInput().appendField(se(f)).appendField(`${_e} ${re}`);var Q=v.findRootSite();if(O.parameters&&O.parameters.forEach(ye=>{var ce=ye.name;if(ye.required&&(ce+="*"),ye.type)ce+=":"+ye.type;else if(ye.schema&&ye.schema.type)if("object"==ye.schema.type){var Ce=ye.schema.$$ref||"";Ce.length>0&&(ce+=":"+(Ce=Ce.substring(Ce.lastIndexOf("/")+1)))}else ce+=":"+ye.schema.type;this.appendValueInput(`val_${ye.name}`).appendField(ce)}),O.requestBody){var j="";if(O.requestBody.content){var oe=O.requestBody.content["application/json"];if(oe&&oe.schema){var de=oe.schema.$$ref;de&&(j="=>"+de.substring(de.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+j).setCheck()}this.appendValueInput("override_Host").appendField("override Host"),this.appendValueInput("override_Port").appendField("override Port"),this.setTooltip(`${f} ${Q}${c}`),this.setOutput(!0,"")}},ue[y]=function(_e){var Z=v.openApiDocument.paths[c][f],G=[];"parameters"in Z&&(G=Z.parameters);var fe=!1,Q=G.filter(ut=>"body"==ut.in).length>0;(Q||"requestBody"in Z)&&(fe=!0);var j={},oe={};fe&&(j.val_values=ue.valueToCode(_e,"val_values",0),oe.val_values=j.val_values),G.forEach(ut=>{j[`val_${ut.name}`]=ue.valueToCode(_e,`val_${ut.name}`,0)});var de=G.map(ut=>ut.name);fe&!Q&&de.push("values"),de.push("extraData"),G.map(ut=>`\${obj['val_${ut.name}']},`);var ce="function(";ce+=de.join(","),ce+="){\n",ce+='var rootSite="'+v.findRootSite()+'";\n',ce+="if(extraData){\n",ce+="if(extraData.url && extraData.url.host && extraData.url.host.length>0 ){\n",ce+="rootSite =  changeHost(rootSite, extraData.url.host);\n",ce+="};\n",ce+="if(extraData.url && extraData.url.port && extraData.url.port.toString().length>0 ){\n",ce+="rootSite  =changePort(rootSite , extraData.url.port);\n",ce+="};\n",ce+="};\n",ce+='var strUrl =rootSite +"'+v.basePath+c+'";\n';var Ce=G.filter(ut=>"query"==ut.in);if(Ce.length>0){ce+='strUrl+="?";\n;';var Be=Ce.map(ut=>`${ut.name}={`+ut.name+"}").join("&");ce+='strUrl += "'+Be+'";\n;'}var ot=G.filter(ut=>"path"==ut.in||"query"==ut.in).map(ut=>`strUrl = strUrl.replace("{${ut.name}}",${ut.name});`);if(ce+=ot.join("\n"),ce+=`\n{var res= ${f}Xhr(strUrl`,fe){var De="values";Q&&(De=G.filter(ut=>"body"==ut.in)[0].name),ce+=`,JSON.stringify(${De})`}ce+=");\n",ce+="var resJS=JSON.parse(res);\n",ce+="if(resJS.statusOK) return resJS.text;\n",ce+="errHandler(res);\n}\n",ce+="}",ce+="(",G.forEach(ut=>{ce+=j[`val_${ut.name}`]+","}),fe&!Q&&(ce+=oe.val_values+",");var Ue="url:{notImportant:1",Xe=ue.valueToCode(_e,"override_Host",0);(Xe=Xe||"").length>0&&(Ue+=`,host:${Xe}`);var at=ue.valueToCode(_e,"override_Port",0);return(at=at||"").length>0&&(Ue+=`,port:${at}`),ce+=`{${Ue+="}"}}\n`,[ce+=")",99]}}}GenerateBlock(o,c){var d=this,f=c,y=d.findProperties(o);return function(D,O,U){D[f]={init:function(){var X=!1,H=[];o.enum&&(X=!0,H=Object.keys(o.enum).map(o["x-enumNames"]?J=>[o["x-enumNames"][J],J]:J=>[o.enum[J],J]));var ee=this.appendDummyInput().appendField(c);X?(H=H.map(J=>[J[0].toString(),J[1].toString()]),ee.appendField(U(H),`val_${c}`)):y.forEach(J=>{var q,ue=J.key;if(J.value.nullable&&0==J.value.nullable&&(ue+="*"),null==(q=J.value)?void 0:q.type){var se=J.value.type||"";if("object"==se){var _e=J.value.$$ref||"";_e.length>0&&(se=_e.substring(_e.lastIndexOf("/")+1))}ue+=":"+se}J.value.$ref&&(ue+="->"+J.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${J.key}`).appendField(`${ue}`)}),this.setOutput(!0,f)}},O[f]=function(X){{var H=!1;o.enum&&(H=!0);var ne=d.findProperties(o);const se=99,_e=0;var ee="",J=[];return ne.forEach(re=>{let q=O.valueToCode(X,`val_${re.key}`,_e);""===q&&(q="null"),null==q&&(q="null"),J.push(`"${re.key}":${q}`)}),ee="{ "+J.join(",")+" }",H&&(ee=X.getFieldValue(`val_${c}`)),[ee,se]}}}}TranslateToBlocklyType(o){return"integer"==o?"Number":"string"==o?"String":"bool"==o?"Boolean":"array"==o?"Array":(console.error("not found TranslateToBlocklyType item"+o),"not found type"+o)}}},76894:(S,A,_)=>{S.exports={parseSwagger:_(88977),parseData:_(47730)}},88977:(S,A,_)=>{var E=_(38506).default;A.parseSwagger=function(){var o=E(function*(c){var U;new(_(47730))(c);var v=[],O=(yield _(33817).default(c)).response;return(null==(U=O.components)?void 0:U.schemas)&&Object.keys(O.components.schemas).forEach(function(X){v.push(function(o,c){var d=c;return o.properties&&Object.keys(o.properties).forEach(f=>{}),function(f,v){f[d]={init:function(){this.appendDummyInput().appendField(c),this.setOutput(!0,d)}}}}(O.components.schemas[X],X))}),v});return function(c){return o.apply(this,arguments)}}(),A.parseSwagger1=function(o){return _(33817).default(o)}},80751:(S,A,_)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Api=void 0;var E=_(14985);A.Api=function(o,c){void 0===c&&(c={}),this.entrypoint=o,E.assignSealed(this,c)}},77981:(S,A,_)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Field=void 0;var E=_(14985);A.Field=function(o,c){void 0===c&&(c={}),this.name=o,E.assignSealed(this,c)}},20985:(S,A,_)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Resource=void 0;var E=_(14985);A.Resource=function(o,c,d){void 0===d&&(d={}),this.name=o,this.url=c,E.assignSealed(this,d)}},22566:(S,A,_)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.removeTrailingSlash=void 0;var R=_(2805).__importDefault(_(19556)),a=_(77981),o=_(20985),c=_(37906);A.removeTrailingSlash=function(v){return v.endsWith("/")&&(v=v.slice(0,-1)),v},A.default=function(v,y){return c.getResources(v.paths).map(function(U){var X=U.replace("/",""),H=A.removeTrailingSlash(y)+U,ne=Object.keys(v.paths[U])[0],ee=v.paths[U][ne];if(!ee.tags)throw new Error;var J=ee.tags[0];if(!v.components)throw new Error;if(!v.components.schemas)throw new Error;var se=v.components.schemas[J].properties;if(!se)throw new Error;var _e=Object.keys(se),re=R.default(v,["components","schemas",J,"required"],[]),q=_e.map(function(ie){return new a.Field(ie,{id:null,range:null,reference:null,required:!!re.find(function(Z){return Z===ie}),description:R.default(se[ie],"description","")})});return new o.Resource(X,H,{id:null,title:J,fields:q,readableFields:q,writableFields:q})})}},33817:(S,A,_)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});var E=_(2805),R=_(80751),a=E.__importStar(_(22566));A.default=function(c){return c=a.removeTrailingSlash(c),fetch(c).then(function(d){return Promise.all([d,d.json()])}).then(function(d){var f=d[0],v=d[1],y=v.info.title,D=a.default(v,c);return Promise.resolve({api:new R.Api(c,{title:y,resources:D}),response:v,status:f.status})},function(d){var f=d[0],v=d[1];return Promise.reject({api:new R.Api(c,{resources:[]}),response:v,status:f.status})})}},14985:(S,A)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.assignSealed=void 0,A.assignSealed=function(E,R){Object.keys(R).forEach(function(a){Object.defineProperty(E,a,{writable:!0,enumerable:!0,configurable:!1,value:R[a]})})}},37906:(S,A)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getResources=void 0,A.getResources=function(E){var R=[];return Object.keys(E).forEach(function(a){a.includes("/{id}")||R.find(function(o){return o.startsWith("/"+a.split("/")[1])})||R.push(a)}),R}},56675:S=>{!function(){"use strict";S.exports=function(_){return(_ instanceof Buffer?_:Buffer.from(_.toString(),"binary")).toString("base64")}}()},29448:(S,A,_)=>{"use strict";var E=_(93602),R=_(32321),a=R(E("String.prototype.indexOf"));S.exports=function(c,d){var f=E(c,!!d);return"function"==typeof f&&a(c,".prototype.")>-1?R(f):f}},32321:(S,A,_)=>{"use strict";var E=_(21857),R=_(93602),a=R("%Function.prototype.apply%"),o=R("%Function.prototype.call%"),c=R("%Reflect.apply%",!0)||E.call(o,a),d=R("%Object.getOwnPropertyDescriptor%",!0),f=R("%Object.defineProperty%",!0),v=R("%Math.max%");if(f)try{f({},"a",{value:1})}catch(D){f=null}S.exports=function(O){var U=c(E,o,arguments);if(d&&f){var X=d(U,"length");X.configurable&&f(U,"length",{value:1+v(0,O.length-(arguments.length-1))})}return U};var y=function(){return c(E,a,arguments)};f?f(S.exports,"apply",{value:y}):S.exports.apply=y},23813:(S,A,_)=>{_(62009),_(46601);var E=_(83271);S.exports=E.Array.from},89740:(S,A,_)=>{_(67011);var E=_(83271);S.exports=E.Array.isArray},53247:(S,A,_)=>{_(94570);var E=_(2159);S.exports=E("Array").concat},34014:(S,A,_)=>{_(64741),_(97045);var E=_(2159);S.exports=E("Array").entries},80228:(S,A,_)=>{_(76613);var E=_(2159);S.exports=E("Array").filter},92606:(S,A,_)=>{_(15963);var E=_(2159);S.exports=E("Array").find},47957:(S,A,_)=>{_(28436);var E=_(2159);S.exports=E("Array").forEach},75532:(S,A,_)=>{_(82680);var E=_(2159);S.exports=E("Array").includes},18329:(S,A,_)=>{_(73713);var E=_(2159);S.exports=E("Array").indexOf},59157:(S,A,_)=>{_(48303);var E=_(2159);S.exports=E("Array").map},78928:(S,A,_)=>{_(96682);var E=_(2159);S.exports=E("Array").slice},60660:(S,A,_)=>{_(92241);var E=_(2159);S.exports=E("Array").splice},48873:(S,A,_)=>{_(64741),_(62009);var E=_(62439);S.exports=E},233:(S,A,_)=>{var E=_(28833),R=_(53247),a=Array.prototype;S.exports=function(o){var c=o.concat;return o===a||E(a,o)&&c===a.concat?R:c}},32263:(S,A,_)=>{var E=_(28833),R=_(80228),a=Array.prototype;S.exports=function(o){var c=o.filter;return o===a||E(a,o)&&c===a.filter?R:c}},81754:(S,A,_)=>{var E=_(28833),R=_(92606),a=Array.prototype;S.exports=function(o){var c=o.find;return o===a||E(a,o)&&c===a.find?R:c}},46397:(S,A,_)=>{var E=_(28833),R=_(75532),a=_(65106),o=Array.prototype,c=String.prototype;S.exports=function(d){var f=d.includes;return d===o||E(o,d)&&f===o.includes?R:"string"==typeof d||d===c||E(c,d)&&f===c.includes?a:f}},88699:(S,A,_)=>{var E=_(28833),R=_(18329),a=Array.prototype;S.exports=function(o){var c=o.indexOf;return o===a||E(a,o)&&c===a.indexOf?R:c}},24454:(S,A,_)=>{var E=_(28833),R=_(59157),a=Array.prototype;S.exports=function(o){var c=o.map;return o===a||E(a,o)&&c===a.map?R:c}},18422:(S,A,_)=>{var E=_(28833),R=_(78928),a=Array.prototype;S.exports=function(o){var c=o.slice;return o===a||E(a,o)&&c===a.slice?R:c}},13807:(S,A,_)=>{var E=_(28833),R=_(60660),a=Array.prototype;S.exports=function(o){var c=o.splice;return o===a||E(a,o)&&c===a.splice?R:c}},13194:(S,A,_)=>{var E=_(28833),R=_(80083),a=String.prototype;S.exports=function(o){var c=o.startsWith;return"string"==typeof o||o===a||E(a,o)&&c===a.startsWith?R:c}},20573:(S,A,_)=>{_(62260);var E=_(83271),R=_(80626);E.JSON||(E.JSON={stringify:JSON.stringify}),S.exports=function(o,c,d){return R(E.JSON.stringify,null,arguments)}},49483:(S,A,_)=>{_(91487);var E=_(83271);S.exports=E.Object.assign},12171:(S,A,_)=>{_(40020);var R=_(83271).Object,a=S.exports=function(c,d){return R.defineProperties(c,d)};R.defineProperties.sham&&(a.sham=!0)},39469:(S,A,_)=>{_(55523);var R=_(83271).Object,a=S.exports=function(c,d,f){return R.defineProperty(c,d,f)};R.defineProperty.sham&&(a.sham=!0)},24911:(S,A,_)=>{_(67777);var E=_(83271);S.exports=E.Object.entries},942:(S,A,_)=>{_(32696);var R=_(83271).Object,a=S.exports=function(c,d){return R.getOwnPropertyDescriptor(c,d)};R.getOwnPropertyDescriptor.sham&&(a.sham=!0)},46592:(S,A,_)=>{_(36714);var E=_(83271);S.exports=E.Object.getOwnPropertyDescriptors},51594:(S,A,_)=>{_(33353);var E=_(83271);S.exports=E.Object.getOwnPropertySymbols},87079:(S,A,_)=>{_(89405);var E=_(83271);S.exports=E.Object.keys},42654:(S,A,_)=>{_(52935),_(64741),_(97045),_(12545),_(75077),_(83218),_(45895),_(62009);var E=_(83271);S.exports=E.Promise},65106:(S,A,_)=>{_(96595);var E=_(2159);S.exports=E("String").includes},80083:(S,A,_)=>{_(11322);var E=_(2159);S.exports=E("String").startsWith},59366:(S,A,_)=>{_(94570),_(97045),_(33353),_(32159),_(72450),_(43071),_(34025),_(19155),_(64485),_(16576),_(42053),_(96668),_(54714),_(20437),_(11979),_(78559),_(59450),_(10157),_(30238),_(22428);var E=_(83271);S.exports=E.Symbol},48926:(S,A,_)=>{_(64741),_(97045),_(62009),_(19155);var E=_(42572);S.exports=E.f("iterator")},1796:(S,A,_)=>{_(64741),_(97045),_(82695);var E=_(83271);S.exports=E.WeakMap},96883:(S,A,_)=>{var E=_(96353);S.exports=E},21244:(S,A,_)=>{var E=_(18830);S.exports=E},81548:(S,A,_)=>{var E=_(92578);S.exports=E},30206:(S,A,_)=>{var E=_(26271);S.exports=E},73915:(S,A,_)=>{var E=_(6506);S.exports=E},91391:(S,A,_)=>{var E=_(28532);S.exports=E},16557:(S,A,_)=>{var E=_(34123);S.exports=E},11944:(S,A,_)=>{var E=_(62217);S.exports=E},63780:(S,A,_)=>{var E=_(14893);S.exports=E},65332:(S,A,_)=>{var E=_(52572);S.exports=E},66203:(S,A,_)=>{var E=_(17608);S.exports=E},98836:(S,A,_)=>{var E=_(27567);S.exports=E},89857:(S,A,_)=>{var E=_(158);S.exports=E},42658:(S,A,_)=>{var E=_(27620);_(62373),_(18168),_(73944),_(25831),S.exports=E},93585:(S,A,_)=>{var E=_(75743);_(42673),_(34286),_(73695),_(13990),_(69181),_(11686),_(84430),S.exports=E},9207:(S,A,_)=>{var E=_(40359);S.exports=E},98204:(S,A,_)=>{var E=_(37516),R=_(91699),a=_(42349),o=E.TypeError;S.exports=function(c){if(R(c))return c;throw o(a(c)+" is not a function")}},39660:(S,A,_)=>{var E=_(37516),R=_(36025),a=_(42349),o=E.TypeError;S.exports=function(c){if(R(c))return c;throw o(a(c)+" is not a constructor")}},82361:(S,A,_)=>{var E=_(37516),R=_(91699),a=E.String,o=E.TypeError;S.exports=function(c){if("object"==typeof c||R(c))return c;throw o("Can't set "+a(c)+" as a prototype")}},51802:S=>{S.exports=function(){}},74528:(S,A,_)=>{var E=_(37516),R=_(28833),a=E.TypeError;S.exports=function(o,c){if(R(c,o))return o;throw a("Incorrect invocation")}},22696:(S,A,_)=>{var E=_(37516),R=_(883),a=E.String,o=E.TypeError;S.exports=function(c){if(R(c))return c;throw o(a(c)+" is not an object")}},70830:(S,A,_)=>{var E=_(20065);S.exports=E(function(){if("function"==typeof ArrayBuffer){var R=new ArrayBuffer(8);Object.isExtensible(R)&&Object.defineProperty(R,"a",{value:8})}})},30247:(S,A,_)=>{"use strict";var E=_(69720).forEach,a=_(40386)("forEach");S.exports=a?[].forEach:function(c){return E(this,c,arguments.length>1?arguments[1]:void 0)}},58365:(S,A,_)=>{"use strict";var E=_(37516),R=_(88509),a=_(13868),o=_(23349),c=_(72178),d=_(60692),f=_(36025),v=_(1435),y=_(763),D=_(13020),O=_(62439),U=E.Array;S.exports=function(H){var ne=o(H),ee=f(this),J=arguments.length,ue=J>1?arguments[1]:void 0,se=void 0!==ue;se&&(ue=R(ue,J>2?arguments[2]:void 0));var q,ie,Z,G,fe,Q,_e=O(ne),re=0;if(!_e||this==U&&d(_e))for(q=v(ne),ie=ee?new this(q):U(q);q>re;re++)Q=se?ue(ne[re],re):ne[re],y(ie,re,Q);else for(fe=(G=D(ne,_e)).next,ie=ee?new this:[];!(Z=a(fe,G)).done;re++)Q=se?c(G,ue,[Z.value,re],!0):Z.value,y(ie,re,Q);return ie.length=re,ie}},591:(S,A,_)=>{var E=_(75880),R=_(54346),a=_(1435),o=function(c){return function(d,f,v){var U,y=E(d),D=a(y),O=R(v,D);if(c&&f!=f){for(;D>O;)if((U=y[O++])!=U)return!0}else for(;D>O;O++)if((c||O in y)&&y[O]===f)return c||O||0;return!c&&-1}};S.exports={includes:o(!0),indexOf:o(!1)}},69720:(S,A,_)=>{var E=_(88509),R=_(45972),a=_(41738),o=_(23349),c=_(1435),d=_(94947),f=R([].push),v=function(y){var D=1==y,O=2==y,U=3==y,X=4==y,H=6==y,ne=7==y,ee=5==y||H;return function(J,ue,se,_e){for(var j,oe,re=o(J),q=a(re),ie=E(ue,se),Z=c(q),G=0,fe=_e||d,Q=D?fe(J,Z):O||ne?fe(J,0):void 0;Z>G;G++)if((ee||G in q)&&(oe=ie(j=q[G],G,re),y))if(D)Q[G]=oe;else if(oe)switch(y){case 3:return!0;case 5:return j;case 6:return G;case 2:f(Q,j)}else switch(y){case 4:return!1;case 7:f(Q,j)}return H?-1:U||X?X:Q}};S.exports={forEach:v(0),map:v(1),filter:v(2),some:v(3),every:v(4),find:v(5),findIndex:v(6),filterReject:v(7)}},64630:(S,A,_)=>{var E=_(20065),R=_(63211),a=_(93687),o=R("species");S.exports=function(c){return a>=51||!E(function(){var d=[];return(d.constructor={})[o]=function(){return{foo:1}},1!==d[c](Boolean).foo})}},40386:(S,A,_)=>{"use strict";var E=_(20065);S.exports=function(R,a){var o=[][R];return!!o&&E(function(){o.call(null,a||function(){throw 1},1)})}},10545:(S,A,_)=>{var E=_(37516),R=_(54346),a=_(1435),o=_(763),c=E.Array,d=Math.max;S.exports=function(f,v,y){for(var D=a(f),O=R(v,D),U=R(void 0===y?D:y,D),X=c(d(U-O,0)),H=0;O<U;O++,H++)o(X,H,f[O]);return X.length=H,X}},13053:(S,A,_)=>{var E=_(45972);S.exports=E([].slice)},95264:(S,A,_)=>{var E=_(10545),R=Math.floor,a=function(d,f){var v=d.length,y=R(v/2);return v<8?o(d,f):c(d,a(E(d,0,y),f),a(E(d,y),f),f)},o=function(d,f){for(var D,O,v=d.length,y=1;y<v;){for(O=y,D=d[y];O&&f(d[O-1],D)>0;)d[O]=d[--O];O!==y++&&(d[O]=D)}return d},c=function(d,f,v,y){for(var D=f.length,O=v.length,U=0,X=0;U<D||X<O;)d[U+X]=U<D&&X<O?y(f[U],v[X])<=0?f[U++]:v[X++]:U<D?f[U++]:v[X++];return d};S.exports=a},61397:(S,A,_)=>{var E=_(37516),R=_(51556),a=_(36025),o=_(883),d=_(63211)("species"),f=E.Array;S.exports=function(v){var y;return R(v)&&(a(y=v.constructor)&&(y===f||R(y.prototype))||o(y)&&null===(y=y[d]))&&(y=void 0),void 0===y?f:y}},94947:(S,A,_)=>{var E=_(61397);S.exports=function(R,a){return new(E(R))(0===a?0:a)}},72178:(S,A,_)=>{var E=_(22696),R=_(29475);S.exports=function(a,o,c,d){try{return d?o(E(c)[0],c[1]):o(c)}catch(f){R(a,"throw",f)}}},78442:(S,A,_)=>{var R=_(63211)("iterator"),a=!1;try{var o=0,c={next:function(){return{done:!!o++}},return:function(){a=!0}};c[R]=function(){return this},Array.from(c,function(){throw 2})}catch(d){}S.exports=function(d,f){if(!f&&!a)return!1;var v=!1;try{var y={};y[R]=function(){return{next:function(){return{done:v=!0}}}},d(y)}catch(D){}return v}},35735:(S,A,_)=>{var E=_(45972),R=E({}.toString),a=E("".slice);S.exports=function(o){return a(R(o),8,-1)}},98330:(S,A,_)=>{var E=_(37516),R=_(89834),a=_(91699),o=_(35735),d=_(63211)("toStringTag"),f=E.Object,v="Arguments"==o(function(){return arguments}());S.exports=R?o:function(D){var O,U,X;return void 0===D?"Undefined":null===D?"Null":"string"==typeof(U=function(D,O){try{return D[O]}catch(U){}}(O=f(D),d))?U:v?o(O):"Object"==(X=o(O))&&a(O.callee)?"Arguments":X}},67232:(S,A,_)=>{var E=_(45972),R=_(10545),a=E("".replace),o=E("".split),c=E([].join),d=String(Error("zxcasd").stack),f=/\n\s*at [^:]*:[^\n]*/,v=f.test(d),y=/@[^\n]*\n/.test(d)&&!/zxcasd/.test(d);S.exports=function(D,O){if("string"!=typeof D)return D;if(v)for(;O--;)D=a(D,f,"");else if(y)return c(R(o(D,"\n"),O),"\n");return D}},39754:(S,A,_)=>{"use strict";var E=_(45972),R=_(22239),a=_(48016).getWeakData,o=_(22696),c=_(883),d=_(74528),f=_(30772),v=_(69720),y=_(7723),D=_(90149),O=D.set,U=D.getterFor,X=v.find,H=v.findIndex,ne=E([].splice),ee=0,J=function(_e){return _e.frozen||(_e.frozen=new ue)},ue=function(){this.entries=[]},se=function(_e,re){return X(_e.entries,function(q){return q[0]===re})};ue.prototype={get:function(_e){var re=se(this,_e);if(re)return re[1]},has:function(_e){return!!se(this,_e)},set:function(_e,re){var q=se(this,_e);q?q[1]=re:this.entries.push([_e,re])},delete:function(_e){var re=H(this.entries,function(q){return q[0]===_e});return~re&&ne(this.entries,re,1),!!~re}},S.exports={getConstructor:function(_e,re,q,ie){var Z=_e(function(j,oe){d(j,G),O(j,{type:re,id:ee++,frozen:void 0}),null!=oe&&f(oe,j[ie],{that:j,AS_ENTRIES:q})}),G=Z.prototype,fe=U(re),Q=function(j,oe,de){var ye=fe(j),ce=a(o(oe),!0);return!0===ce?J(ye).set(oe,de):ce[ye.id]=de,j};return R(G,{delete:function(j){var oe=fe(this);if(!c(j))return!1;var de=a(j);return!0===de?J(oe).delete(j):de&&y(de,oe.id)&&delete de[oe.id]},has:function(oe){var de=fe(this);if(!c(oe))return!1;var ye=a(oe);return!0===ye?J(de).has(oe):ye&&y(ye,de.id)}}),R(G,q?{get:function(oe){var de=fe(this);if(c(oe)){var ye=a(oe);return!0===ye?J(de).get(oe):ye?ye[de.id]:void 0}},set:function(oe,de){return Q(this,oe,de)}}:{add:function(oe){return Q(this,oe,!0)}}),Z}}},7448:(S,A,_)=>{"use strict";var E=_(99253),R=_(37516),a=_(48016),o=_(20065),c=_(6103),d=_(30772),f=_(74528),v=_(91699),y=_(883),D=_(65702),O=_(70762).f,U=_(69720).forEach,X=_(61385),H=_(90149),ne=H.set,ee=H.getterFor;S.exports=function(J,ue,se){var fe,_e=-1!==J.indexOf("Map"),re=-1!==J.indexOf("Weak"),q=_e?"set":"add",ie=R[J],Z=ie&&ie.prototype,G={};if(X&&v(ie)&&(re||Z.forEach&&!o(function(){(new ie).entries().next()}))){var Q=(fe=ue(function(oe,de){ne(f(oe,Q),{type:J,collection:new ie}),null!=de&&d(de,oe[q],{that:oe,AS_ENTRIES:_e})})).prototype,j=ee(J);U(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(oe){var de="add"==oe||"set"==oe;oe in Z&&(!re||"clear"!=oe)&&c(Q,oe,function(ye,ce){var Ce=j(this).collection;if(!de&&re&&!y(ye))return"get"==oe&&void 0;var Be=Ce[oe](0===ye?0:ye,ce);return de?this:Be})}),re||O(Q,"size",{configurable:!0,get:function(){return j(this).collection.size}})}else fe=se.getConstructor(ue,J,_e,q),a.enable();return D(fe,J,!1,!0),G[J]=fe,E({global:!0,forced:!0},G),re||se.setStrong(fe,J,_e),fe}},64325:(S,A,_)=>{var E=_(7723),R=_(8452),a=_(59819),o=_(70762);S.exports=function(c,d){for(var f=R(d),v=o.f,y=a.f,D=0;D<f.length;D++){var O=f[D];E(c,O)||v(c,O,y(d,O))}}},23655:(S,A,_)=>{var R=_(63211)("match");S.exports=function(a){var o=/./;try{"/./"[a](o)}catch(c){try{return o[R]=!1,"/./"[a](o)}catch(d){}}return!1}},719:(S,A,_)=>{var E=_(20065);S.exports=!E(function(){function R(){}return R.prototype.constructor=null,Object.getPrototypeOf(new R)!==R.prototype})},59571:(S,A,_)=>{"use strict";var E=_(61056).IteratorPrototype,R=_(73821),a=_(42856),o=_(65702),c=_(48626),d=function(){return this};S.exports=function(f,v,y){var D=v+" Iterator";return f.prototype=R(E,{next:a(1,y)}),o(f,D,!1,!0),c[D]=d,f}},6103:(S,A,_)=>{var E=_(61385),R=_(70762),a=_(42856);S.exports=E?function(o,c,d){return R.f(o,c,a(1,d))}:function(o,c,d){return o[c]=d,o}},42856:S=>{S.exports=function(A,_){return{enumerable:!(1&A),configurable:!(2&A),writable:!(4&A),value:_}}},763:(S,A,_)=>{"use strict";var E=_(54053),R=_(70762),a=_(42856);S.exports=function(o,c,d){var f=E(c);f in o?R.f(o,f,a(0,d)):o[f]=d}},68797:(S,A,_)=>{"use strict";var E=_(99253),R=_(13868),a=_(27316),o=_(91261),c=_(91699),d=_(59571),f=_(26142),v=_(74494),y=_(65702),D=_(6103),O=_(46573),U=_(63211),X=_(48626),H=_(61056),ne=o.PROPER,ee=o.CONFIGURABLE,J=H.IteratorPrototype,ue=H.BUGGY_SAFARI_ITERATORS,se=U("iterator"),re="values",q="entries",ie=function(){return this};S.exports=function(Z,G,fe,Q,j,oe,de){d(fe,G,Q);var Xe,at,ut,ye=function(Qe){if(Qe===j&&De)return De;if(!ue&&Qe in Be)return Be[Qe];switch(Qe){case"keys":case re:case q:return function(){return new fe(this,Qe)}}return function(){return new fe(this)}},ce=G+" Iterator",Ce=!1,Be=Z.prototype,ot=Be[se]||Be["@@iterator"]||j&&Be[j],De=!ue&&ot||ye(j),Ue="Array"==G&&Be.entries||ot;if(Ue&&(Xe=f(Ue.call(new Z)))!==Object.prototype&&Xe.next&&(!a&&f(Xe)!==J&&(v?v(Xe,J):c(Xe[se])||O(Xe,se,ie)),y(Xe,ce,!0,!0),a&&(X[ce]=ie)),ne&&j==re&&ot&&ot.name!==re&&(!a&&ee?D(Be,"name",re):(Ce=!0,De=function(){return R(ot,this)})),j)if(at={values:ye(re),keys:oe?De:ye("keys"),entries:ye(q)},de)for(ut in at)(ue||Ce||!(ut in Be))&&O(Be,ut,at[ut]);else E({target:G,proto:!0,forced:ue||Ce},at);return(!a||de)&&Be[se]!==De&&O(Be,se,De,{name:j}),X[G]=De,at}},8254:(S,A,_)=>{var E=_(83271),R=_(7723),a=_(42572),o=_(70762).f;S.exports=function(c){var d=E.Symbol||(E.Symbol={});R(d,c)||o(d,c,{value:a.f(c)})}},61385:(S,A,_)=>{var E=_(20065);S.exports=!E(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},42304:(S,A,_)=>{var E=_(37516),R=_(883),a=E.document,o=R(a)&&R(a.createElement);S.exports=function(c){return o?a.createElement(c):{}}},70808:S=>{S.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},33040:S=>{S.exports="object"==typeof window},27129:(S,A,_)=>{var E=_(61509),R=_(37516);S.exports=/ipad|iphone|ipod/i.test(E)&&void 0!==R.Pebble},50357:(S,A,_)=>{var E=_(61509);S.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(E)},7214:(S,A,_)=>{var E=_(35735),R=_(37516);S.exports="process"==E(R.process)},35773:(S,A,_)=>{var E=_(61509);S.exports=/web0s(?!.*chrome)/i.test(E)},61509:(S,A,_)=>{var E=_(73289);S.exports=E("navigator","userAgent")||""},93687:(S,A,_)=>{var f,v,E=_(37516),R=_(61509),a=E.process,o=E.Deno,c=a&&a.versions||o&&o.version,d=c&&c.v8;d&&(v=(f=d.split("."))[0]>0&&f[0]<4?1:+(f[0]+f[1])),!v&&R&&(!(f=R.match(/Edge\/(\d+)/))||f[1]>=74)&&(f=R.match(/Chrome\/(\d+)/))&&(v=+f[1]),S.exports=v},2159:(S,A,_)=>{var E=_(83271);S.exports=function(R){return E[R+"Prototype"]}},53752:S=>{S.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},54315:(S,A,_)=>{var E=_(20065),R=_(42856);S.exports=!E(function(){var a=Error("a");return!("stack"in a)||(Object.defineProperty(a,"stack",R(1,7)),7!==a.stack)})},99253:(S,A,_)=>{"use strict";var E=_(37516),R=_(80626),a=_(45972),o=_(91699),c=_(59819).f,d=_(808),f=_(83271),v=_(88509),y=_(6103),D=_(7723),O=function(U){var X=function(H,ne,ee){if(this instanceof X){switch(arguments.length){case 0:return new U;case 1:return new U(H);case 2:return new U(H,ne)}return new U(H,ne,ee)}return R(U,this,arguments)};return X.prototype=U.prototype,X};S.exports=function(U,X){var q,ie,Z,G,fe,Q,j,oe,H=U.target,ne=U.global,ee=U.stat,J=U.proto,ue=ne?E:ee?E[H]:(E[H]||{}).prototype,se=ne?f:f[H]||y(f,H,{})[H],_e=se.prototype;for(Z in X)q=!d(ne?Z:H+(ee?".":"#")+Z,U.forced)&&ue&&D(ue,Z),fe=se[Z],q&&(Q=U.noTargetGet?(oe=c(ue,Z))&&oe.value:ue[Z]),G=q&&Q?Q:X[Z],(!q||typeof fe!=typeof G)&&(j=U.bind&&q?v(G,E):U.wrap&&q?O(G):J&&o(G)?a(G):G,(U.sham||G&&G.sham||fe&&fe.sham)&&y(j,"sham",!0),y(se,Z,j),J&&(D(f,ie=H+"Prototype")||y(f,ie,{}),y(f[ie],Z,G),U.real&&_e&&!_e[Z]&&y(_e,Z,G)))}},20065:S=>{S.exports=function(A){try{return!!A()}catch(_){return!0}}},4224:(S,A,_)=>{var E=_(20065);S.exports=!E(function(){return Object.isExtensible(Object.preventExtensions({}))})},80626:S=>{var A=Function.prototype,_=A.apply,R=A.call;S.exports="object"==typeof Reflect&&Reflect.apply||(A.bind?R.bind(_):function(){return R.apply(_,arguments)})},88509:(S,A,_)=>{var E=_(45972),R=_(98204),a=E(E.bind);S.exports=function(o,c){return R(o),void 0===c?o:a?a(o,c):function(){return o.apply(c,arguments)}}},13868:S=>{var A=Function.prototype.call;S.exports=A.bind?A.bind(A):function(){return A.apply(A,arguments)}},91261:(S,A,_)=>{var E=_(61385),R=_(7723),a=Function.prototype,o=E&&Object.getOwnPropertyDescriptor,c=R(a,"name"),d=c&&"something"===function(){}.name,f=c&&(!E||E&&o(a,"name").configurable);S.exports={EXISTS:c,PROPER:d,CONFIGURABLE:f}},45972:S=>{var A=Function.prototype,_=A.bind,E=A.call,R=_&&_.bind(E);S.exports=_?function(a){return a&&R(E,a)}:function(a){return a&&function(){return E.apply(a,arguments)}}},73289:(S,A,_)=>{var E=_(83271),R=_(37516),a=_(91699),o=function(c){return a(c)?c:void 0};S.exports=function(c,d){return arguments.length<2?o(E[c])||o(R[c]):E[c]&&E[c][d]||R[c]&&R[c][d]}},62439:(S,A,_)=>{var E=_(98330),R=_(37571),a=_(48626),c=_(63211)("iterator");S.exports=function(d){if(null!=d)return R(d,c)||R(d,"@@iterator")||a[E(d)]}},13020:(S,A,_)=>{var E=_(37516),R=_(13868),a=_(98204),o=_(22696),c=_(42349),d=_(62439),f=E.TypeError;S.exports=function(v,y){var D=arguments.length<2?d(v):y;if(a(D))return o(R(D,v));throw f(c(v)+" is not iterable")}},37571:(S,A,_)=>{var E=_(98204);S.exports=function(R,a){var o=R[a];return null==o?void 0:E(o)}},37516:S=>{var A=function(_){return _&&_.Math==Math&&_};S.exports=A("object"==typeof globalThis&&globalThis)||A("object"==typeof window&&window)||A("object"==typeof self&&self)||A("object"==typeof global&&global)||function(){return this}()||Function("return this")()},7723:(S,A,_)=>{var E=_(45972),R=_(23349),a=E({}.hasOwnProperty);S.exports=Object.hasOwn||function(c,d){return a(R(c),d)}},64842:S=>{S.exports={}},28979:(S,A,_)=>{var E=_(37516);S.exports=function(R,a){var o=E.console;o&&o.error&&(1==arguments.length?o.error(R):o.error(R,a))}},21060:(S,A,_)=>{var E=_(73289);S.exports=E("document","documentElement")},86957:(S,A,_)=>{var E=_(61385),R=_(20065),a=_(42304);S.exports=!E&&!R(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},41738:(S,A,_)=>{var E=_(37516),R=_(45972),a=_(20065),o=_(35735),c=E.Object,d=R("".split);S.exports=a(function(){return!c("z").propertyIsEnumerable(0)})?function(f){return"String"==o(f)?d(f,""):c(f)}:c},57761:(S,A,_)=>{var E=_(45972),R=_(91699),a=_(53575),o=E(Function.toString);R(a.inspectSource)||(a.inspectSource=function(c){return o(c)}),S.exports=a.inspectSource},84992:(S,A,_)=>{var E=_(883),R=_(6103);S.exports=function(a,o){E(o)&&"cause"in o&&R(a,"cause",o.cause)}},48016:(S,A,_)=>{var E=_(99253),R=_(45972),a=_(64842),o=_(883),c=_(7723),d=_(70762).f,f=_(92081),v=_(69820),y=_(2577),D=_(11789),O=_(4224),U=!1,X=D("meta"),H=0,ne=function(re){d(re,X,{value:{objectID:"O"+H++,weakData:{}}})},_e=S.exports={enable:function(){_e.enable=function(){},U=!0;var re=f.f,q=R([].splice),ie={};ie[X]=1,re(ie).length&&(f.f=function(Z){for(var G=re(Z),fe=0,Q=G.length;fe<Q;fe++)if(G[fe]===X){q(G,fe,1);break}return G},E({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:v.f}))},fastKey:function(re,q){if(!o(re))return"symbol"==typeof re?re:("string"==typeof re?"S":"P")+re;if(!c(re,X)){if(!y(re))return"F";if(!q)return"E";ne(re)}return re[X].objectID},getWeakData:function(re,q){if(!c(re,X)){if(!y(re))return!0;if(!q)return!1;ne(re)}return re[X].weakData},onFreeze:function(re){return O&&U&&y(re)&&!c(re,X)&&ne(re),re}};a[X]=!0},90149:(S,A,_)=>{var X,H,ne,E=_(74381),R=_(37516),a=_(45972),o=_(883),c=_(6103),d=_(7723),f=_(53575),v=_(26103),y=_(64842),D="Object already initialized",O=R.TypeError;if(E||f.state){var ue=f.state||(f.state=new(0,R.WeakMap)),se=a(ue.get),_e=a(ue.has),re=a(ue.set);X=function(ie,Z){if(_e(ue,ie))throw new O(D);return Z.facade=ie,re(ue,ie,Z),Z},H=function(ie){return se(ue,ie)||{}},ne=function(ie){return _e(ue,ie)}}else{var q=v("state");y[q]=!0,X=function(ie,Z){if(d(ie,q))throw new O(D);return Z.facade=ie,c(ie,q,Z),Z},H=function(ie){return d(ie,q)?ie[q]:{}},ne=function(ie){return d(ie,q)}}S.exports={set:X,get:H,has:ne,enforce:function(ie){return ne(ie)?H(ie):X(ie,{})},getterFor:function(ie){return function(Z){var G;if(!o(Z)||(G=H(Z)).type!==ie)throw O("Incompatible receiver, "+ie+" required");return G}}}},60692:(S,A,_)=>{var E=_(63211),R=_(48626),a=E("iterator"),o=Array.prototype;S.exports=function(c){return void 0!==c&&(R.Array===c||o[a]===c)}},51556:(S,A,_)=>{var E=_(35735);S.exports=Array.isArray||function(a){return"Array"==E(a)}},91699:S=>{S.exports=function(A){return"function"==typeof A}},36025:(S,A,_)=>{var E=_(45972),R=_(20065),a=_(91699),o=_(98330),c=_(73289),d=_(57761),f=function(){},v=[],y=c("Reflect","construct"),D=/^\s*(?:class|function)\b/,O=E(D.exec),U=!D.exec(f),X=function(ne){if(!a(ne))return!1;try{return y(f,v,ne),!0}catch(ee){return!1}};S.exports=!y||R(function(){var ne;return X(X.call)||!X(Object)||!X(function(){ne=!0})||ne})?function(ne){if(!a(ne))return!1;switch(o(ne)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return U||!!O(D,d(ne))}:X},808:(S,A,_)=>{var E=_(20065),R=_(91699),a=/#|\.prototype\./,o=function(y,D){var O=d[c(y)];return O==v||O!=f&&(R(D)?E(D):!!D)},c=o.normalize=function(y){return String(y).replace(a,".").toLowerCase()},d=o.data={},f=o.NATIVE="N",v=o.POLYFILL="P";S.exports=o},883:(S,A,_)=>{var E=_(91699);S.exports=function(R){return"object"==typeof R?null!==R:E(R)}},27316:S=>{S.exports=!0},89250:(S,A,_)=>{var E=_(883),R=_(35735),o=_(63211)("match");S.exports=function(c){var d;return E(c)&&(void 0!==(d=c[o])?!!d:"RegExp"==R(c))}},17397:(S,A,_)=>{var E=_(37516),R=_(73289),a=_(91699),o=_(28833),c=_(4286),d=E.Object;S.exports=c?function(f){return"symbol"==typeof f}:function(f){var v=R("Symbol");return a(v)&&o(v.prototype,d(f))}},30772:(S,A,_)=>{var E=_(37516),R=_(88509),a=_(13868),o=_(22696),c=_(42349),d=_(60692),f=_(1435),v=_(28833),y=_(13020),D=_(62439),O=_(29475),U=E.TypeError,X=function(ne,ee){this.stopped=ne,this.result=ee},H=X.prototype;S.exports=function(ne,ee,J){var ie,Z,G,fe,Q,j,oe,se=!(!J||!J.AS_ENTRIES),_e=!(!J||!J.IS_ITERATOR),re=!(!J||!J.INTERRUPTED),q=R(ee,J&&J.that),de=function(ce){return ie&&O(ie,"normal",ce),new X(!0,ce)},ye=function(ce){return se?(o(ce),re?q(ce[0],ce[1],de):q(ce[0],ce[1])):re?q(ce,de):q(ce)};if(_e)ie=ne;else{if(!(Z=D(ne)))throw U(c(ne)+" is not iterable");if(d(Z)){for(G=0,fe=f(ne);fe>G;G++)if((Q=ye(ne[G]))&&v(H,Q))return Q;return new X(!1)}ie=y(ne,Z)}for(j=ie.next;!(oe=a(j,ie)).done;){try{Q=ye(oe.value)}catch(ce){O(ie,"throw",ce)}if("object"==typeof Q&&Q&&v(H,Q))return Q}return new X(!1)}},29475:(S,A,_)=>{var E=_(13868),R=_(22696),a=_(37571);S.exports=function(o,c,d){var f,v;R(o);try{if(!(f=a(o,"return"))){if("throw"===c)throw d;return d}f=E(f,o)}catch(y){v=!0,f=y}if("throw"===c)throw d;if(v)throw f;return R(f),d}},61056:(S,A,_)=>{"use strict";var D,O,U,E=_(20065),R=_(91699),a=_(73821),o=_(26142),c=_(46573),d=_(63211),f=_(27316),v=d("iterator"),y=!1;[].keys&&("next"in(U=[].keys())?(O=o(o(U)))!==Object.prototype&&(D=O):y=!0),null==D||E(function(){var H={};return D[v].call(H)!==H})?D={}:f&&(D=a(D)),R(D[v])||c(D,v,function(){return this}),S.exports={IteratorPrototype:D,BUGGY_SAFARI_ITERATORS:y}},48626:S=>{S.exports={}},1435:(S,A,_)=>{var E=_(37159);S.exports=function(R){return E(R.length)}},6120:(S,A,_)=>{var ne,ee,J,ue,se,_e,re,q,E=_(37516),R=_(88509),a=_(59819).f,o=_(15691).set,c=_(50357),d=_(27129),f=_(35773),v=_(7214),y=E.MutationObserver||E.WebKitMutationObserver,D=E.document,O=E.process,U=E.Promise,X=a(E,"queueMicrotask"),H=X&&X.value;H||(ne=function(){var ie,Z;for(v&&(ie=O.domain)&&ie.exit();ee;){Z=ee.fn,ee=ee.next;try{Z()}catch(G){throw ee?ue():J=void 0,G}}J=void 0,ie&&ie.enter()},c||v||f||!y||!D?!d&&U&&U.resolve?((re=U.resolve(void 0)).constructor=U,q=R(re.then,re),ue=function(){q(ne)}):v?ue=function(){O.nextTick(ne)}:(o=R(o,E),ue=function(){o(ne)}):(se=!0,_e=D.createTextNode(""),new y(ne).observe(_e,{characterData:!0}),ue=function(){_e.data=se=!se})),S.exports=H||function(ie){var Z={fn:ie,next:void 0};J&&(J.next=Z),ee||(ee=Z,ue()),J=Z}},99978:(S,A,_)=>{var E=_(37516);S.exports=E.Promise},74267:(S,A,_)=>{var E=_(93687),R=_(20065);S.exports=!!Object.getOwnPropertySymbols&&!R(function(){var a=Symbol();return!String(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&E&&E<41})},71665:(S,A,_)=>{var E=_(20065),R=_(63211),a=_(27316),o=R("iterator");S.exports=!E(function(){var c=new URL("b?a=1&b=2&c=3","http://a"),d=c.searchParams,f="";return c.pathname="c%20d",d.forEach(function(v,y){d.delete("b"),f+=y+v}),a&&!c.toJSON||!d.sort||"http://a/c%20d?a=1&c=3"!==c.href||"3"!==d.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!d[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==f||"x"!==new URL("http://x",void 0).host})},74381:(S,A,_)=>{var E=_(37516),R=_(91699),a=_(57761),o=E.WeakMap;S.exports=R(o)&&/native code/.test(a(o))},2637:(S,A,_)=>{"use strict";var E=_(98204),R=function(a){var o,c;this.promise=new a(function(d,f){if(void 0!==o||void 0!==c)throw TypeError("Bad Promise constructor");o=d,c=f}),this.resolve=E(o),this.reject=E(c)};S.exports.f=function(a){return new R(a)}},19105:(S,A,_)=>{var E=_(37299);S.exports=function(R,a){return void 0===R?arguments.length<2?"":a:E(R)}},9974:(S,A,_)=>{var E=_(37516),R=_(89250),a=E.TypeError;S.exports=function(o){if(R(o))throw a("The method doesn't accept regular expressions");return o}},36477:(S,A,_)=>{"use strict";var E=_(61385),R=_(45972),a=_(13868),o=_(20065),c=_(47836),d=_(62222),f=_(52725),v=_(23349),y=_(41738),D=Object.assign,O=Object.defineProperty,U=R([].concat);S.exports=!D||o(function(){if(E&&1!==D({b:1},D(O({},"a",{enumerable:!0,get:function(){O(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var X={},H={},ne=Symbol(),ee="abcdefghijklmnopqrst";return X[ne]=7,ee.split("").forEach(function(J){H[J]=J}),7!=D({},X)[ne]||c(D({},H)).join("")!=ee})?function(H,ne){for(var ee=v(H),J=arguments.length,ue=1,se=d.f,_e=f.f;J>ue;)for(var G,re=y(arguments[ue++]),q=se?U(c(re),se(re)):c(re),ie=q.length,Z=0;ie>Z;)G=q[Z++],(!E||a(_e,re,G))&&(ee[G]=re[G]);return ee}:D},73821:(S,A,_)=>{var J,E=_(22696),R=_(25526),a=_(53752),o=_(64842),c=_(21060),d=_(42304),f=_(26103),D="prototype",O="script",U=f("IE_PROTO"),X=function(){},H=function(se){return"<"+O+">"+se+"</"+O+">"},ne=function(se){se.write(H("")),se.close();var _e=se.parentWindow.Object;return se=null,_e},ue=function(){try{J=new ActiveXObject("htmlfile")}catch(_e){}ue="undefined"!=typeof document?document.domain&&J?ne(J):function(){var re,se=d("iframe");return se.style.display="none",c.appendChild(se),se.src=String("javascript:"),(re=se.contentWindow.document).open(),re.write(H("document.F=Object")),re.close(),re.F}():ne(J);for(var se=a.length;se--;)delete ue[D][a[se]];return ue()};o[U]=!0,S.exports=Object.create||function(_e,re){var q;return null!==_e?(X[D]=E(_e),q=new X,X[D]=null,q[U]=_e):q=ue(),void 0===re?q:R(q,re)}},25526:(S,A,_)=>{var E=_(61385),R=_(70762),a=_(22696),o=_(75880),c=_(47836);S.exports=E?Object.defineProperties:function(f,v){a(f);for(var X,y=o(v),D=c(v),O=D.length,U=0;O>U;)R.f(f,X=D[U++],y[X]);return f}},70762:(S,A,_)=>{var E=_(37516),R=_(61385),a=_(86957),o=_(22696),c=_(54053),d=E.TypeError,f=Object.defineProperty;A.f=R?f:function(y,D,O){if(o(y),D=c(D),o(O),a)try{return f(y,D,O)}catch(U){}if("get"in O||"set"in O)throw d("Accessors not supported");return"value"in O&&(y[D]=O.value),y}},59819:(S,A,_)=>{var E=_(61385),R=_(13868),a=_(52725),o=_(42856),c=_(75880),d=_(54053),f=_(7723),v=_(86957),y=Object.getOwnPropertyDescriptor;A.f=E?y:function(O,U){if(O=c(O),U=d(U),v)try{return y(O,U)}catch(X){}if(f(O,U))return o(!R(a.f,O,U),O[U])}},69820:(S,A,_)=>{var E=_(35735),R=_(75880),a=_(92081).f,o=_(10545),c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];S.exports.f=function(v){return c&&"Window"==E(v)?function(f){try{return a(f)}catch(v){return o(c)}}(v):a(R(v))}},92081:(S,A,_)=>{var E=_(66230),a=_(53752).concat("length","prototype");A.f=Object.getOwnPropertyNames||function(c){return E(c,a)}},62222:(S,A)=>{A.f=Object.getOwnPropertySymbols},26142:(S,A,_)=>{var E=_(37516),R=_(7723),a=_(91699),o=_(23349),c=_(26103),d=_(719),f=c("IE_PROTO"),v=E.Object,y=v.prototype;S.exports=d?v.getPrototypeOf:function(D){var O=o(D);if(R(O,f))return O[f];var U=O.constructor;return a(U)&&O instanceof U?U.prototype:O instanceof v?y:null}},2577:(S,A,_)=>{var E=_(20065),R=_(883),a=_(35735),o=_(70830),c=Object.isExtensible,d=E(function(){c(1)});S.exports=d||o?function(v){return!(!R(v)||o&&"ArrayBuffer"==a(v))&&(!c||c(v))}:c},28833:(S,A,_)=>{var E=_(45972);S.exports=E({}.isPrototypeOf)},66230:(S,A,_)=>{var E=_(45972),R=_(7723),a=_(75880),o=_(591).indexOf,c=_(64842),d=E([].push);S.exports=function(f,v){var U,y=a(f),D=0,O=[];for(U in y)!R(c,U)&&R(y,U)&&d(O,U);for(;v.length>D;)R(y,U=v[D++])&&(~o(O,U)||d(O,U));return O}},47836:(S,A,_)=>{var E=_(66230),R=_(53752);S.exports=Object.keys||function(o){return E(o,R)}},52725:(S,A)=>{"use strict";var _={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor,R=E&&!_.call({1:2},1);A.f=R?function(o){var c=E(this,o);return!!c&&c.enumerable}:_},74494:(S,A,_)=>{var E=_(45972),R=_(22696),a=_(82361);S.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d,o=!1,c={};try{(d=E(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(c,[]),o=c instanceof Array}catch(f){}return function(v,y){return R(v),a(y),o?d(v,y):v.__proto__=y,v}}():void 0)},37621:(S,A,_)=>{var E=_(61385),R=_(45972),a=_(47836),o=_(75880),d=R(_(52725).f),f=R([].push),v=function(y){return function(D){for(var ee,O=o(D),U=a(O),X=U.length,H=0,ne=[];X>H;)ee=U[H++],(!E||d(O,ee))&&f(ne,y?[ee,O[ee]]:O[ee]);return ne}};S.exports={entries:v(!0),values:v(!1)}},97390:(S,A,_)=>{"use strict";var E=_(89834),R=_(98330);S.exports=E?{}.toString:function(){return"[object "+R(this)+"]"}},53890:(S,A,_)=>{var E=_(37516),R=_(13868),a=_(91699),o=_(883),c=E.TypeError;S.exports=function(d,f){var v,y;if("string"===f&&a(v=d.toString)&&!o(y=R(v,d))||a(v=d.valueOf)&&!o(y=R(v,d))||"string"!==f&&a(v=d.toString)&&!o(y=R(v,d)))return y;throw c("Can't convert object to primitive value")}},8452:(S,A,_)=>{var E=_(73289),R=_(45972),a=_(92081),o=_(62222),c=_(22696),d=R([].concat);S.exports=E("Reflect","ownKeys")||function(v){var y=a.f(c(v)),D=o.f;return D?d(y,D(v)):y}},83271:S=>{S.exports={}},18429:S=>{S.exports=function(A){try{return{error:!1,value:A()}}catch(_){return{error:!0,value:_}}}},33898:(S,A,_)=>{var E=_(22696),R=_(883),a=_(2637);S.exports=function(o,c){if(E(o),R(c)&&c.constructor===o)return c;var d=a.f(o);return(0,d.resolve)(c),d.promise}},22239:(S,A,_)=>{var E=_(46573);S.exports=function(R,a,o){for(var c in a)o&&o.unsafe&&R[c]?R[c]=a[c]:E(R,c,a[c],o);return R}},46573:(S,A,_)=>{var E=_(6103);S.exports=function(R,a,o,c){c&&c.enumerable?R[a]=o:E(R,a,o)}},63805:(S,A,_)=>{var R=_(37516).TypeError;S.exports=function(a){if(null==a)throw R("Can't call method on "+a);return a}},75987:(S,A,_)=>{var E=_(37516),R=Object.defineProperty;S.exports=function(a,o){try{R(E,a,{value:o,configurable:!0,writable:!0})}catch(c){E[a]=o}return o}},31333:(S,A,_)=>{"use strict";var E=_(73289),R=_(70762),a=_(63211),o=_(61385),c=a("species");S.exports=function(d){var f=E(d);o&&f&&!f[c]&&(0,R.f)(f,c,{configurable:!0,get:function(){return this}})}},65702:(S,A,_)=>{var E=_(89834),R=_(70762).f,a=_(6103),o=_(7723),c=_(97390),f=_(63211)("toStringTag");S.exports=function(v,y,D,O){if(v){var U=D?v:v.prototype;o(U,f)||R(U,f,{configurable:!0,value:y}),O&&!E&&a(U,"toString",c)}}},26103:(S,A,_)=>{var E=_(2389),R=_(11789),a=E("keys");S.exports=function(o){return a[o]||(a[o]=R(o))}},53575:(S,A,_)=>{var E=_(37516),R=_(75987),a="__core-js_shared__",o=E[a]||R(a,{});S.exports=o},2389:(S,A,_)=>{var E=_(27316),R=_(53575);(S.exports=function(a,o){return R[a]||(R[a]=void 0!==o?o:{})})("versions",[]).push({version:"3.19.2",mode:E?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},3759:(S,A,_)=>{var E=_(22696),R=_(39660),o=_(63211)("species");S.exports=function(c,d){var v,f=E(c).constructor;return void 0===f||null==(v=E(f)[o])?d:R(v)}},14924:(S,A,_)=>{var E=_(45972),R=_(88582),a=_(37299),o=_(63805),c=E("".charAt),d=E("".charCodeAt),f=E("".slice),v=function(y){return function(D,O){var ne,ee,U=a(o(D)),X=R(O),H=U.length;return X<0||X>=H?y?"":void 0:(ne=d(U,X))<55296||ne>56319||X+1===H||(ee=d(U,X+1))<56320||ee>57343?y?c(U,X):ne:y?f(U,X,X+2):ee-56320+(ne-55296<<10)+65536}};S.exports={codeAt:v(!1),charAt:v(!0)}},15691:(S,A,_)=>{var q,ie,Z,G,E=_(37516),R=_(80626),a=_(88509),o=_(91699),c=_(7723),d=_(20065),f=_(21060),v=_(13053),y=_(42304),D=_(50357),O=_(7214),U=E.setImmediate,X=E.clearImmediate,H=E.process,ne=E.Dispatch,ee=E.Function,J=E.MessageChannel,ue=E.String,se=0,_e={},re="onreadystatechange";try{q=E.location}catch(de){}var fe=function(de){if(c(_e,de)){var ye=_e[de];delete _e[de],ye()}},Q=function(de){return function(){fe(de)}},j=function(de){fe(de.data)},oe=function(de){E.postMessage(ue(de),q.protocol+"//"+q.host)};(!U||!X)&&(U=function(ye){var ce=v(arguments,1);return _e[++se]=function(){R(o(ye)?ye:ee(ye),void 0,ce)},ie(se),se},X=function(ye){delete _e[ye]},O?ie=function(de){H.nextTick(Q(de))}:ne&&ne.now?ie=function(de){ne.now(Q(de))}:J&&!D?(G=(Z=new J).port2,Z.port1.onmessage=j,ie=a(G.postMessage,G)):E.addEventListener&&o(E.postMessage)&&!E.importScripts&&q&&"file:"!==q.protocol&&!d(oe)?(ie=oe,E.addEventListener("message",j,!1)):ie=re in y("script")?function(de){f.appendChild(y("script"))[re]=function(){f.removeChild(this),fe(de)}}:function(de){setTimeout(Q(de),0)}),S.exports={set:U,clear:X}},54346:(S,A,_)=>{var E=_(88582),R=Math.max,a=Math.min;S.exports=function(o,c){var d=E(o);return d<0?R(d+c,0):a(d,c)}},75880:(S,A,_)=>{var E=_(41738),R=_(63805);S.exports=function(a){return E(R(a))}},88582:S=>{var A=Math.ceil,_=Math.floor;S.exports=function(E){var R=+E;return R!=R||0===R?0:(R>0?_:A)(R)}},37159:(S,A,_)=>{var E=_(88582),R=Math.min;S.exports=function(a){return a>0?R(E(a),9007199254740991):0}},23349:(S,A,_)=>{var E=_(37516),R=_(63805),a=E.Object;S.exports=function(o){return a(R(o))}},54017:(S,A,_)=>{var E=_(37516),R=_(13868),a=_(883),o=_(17397),c=_(37571),d=_(53890),f=_(63211),v=E.TypeError,y=f("toPrimitive");S.exports=function(D,O){if(!a(D)||o(D))return D;var X,U=c(D,y);if(U){if(void 0===O&&(O="default"),X=R(U,D,O),!a(X)||o(X))return X;throw v("Can't convert object to primitive value")}return void 0===O&&(O="number"),d(D,O)}},54053:(S,A,_)=>{var E=_(54017),R=_(17397);S.exports=function(a){var o=E(a,"string");return R(o)?o:o+""}},89834:(S,A,_)=>{var a={};a[_(63211)("toStringTag")]="z",S.exports="[object z]"===String(a)},37299:(S,A,_)=>{var E=_(37516),R=_(98330),a=E.String;S.exports=function(o){if("Symbol"===R(o))throw TypeError("Cannot convert a Symbol value to a string");return a(o)}},42349:(S,A,_)=>{var R=_(37516).String;S.exports=function(a){try{return R(a)}catch(o){return"Object"}}},11789:(S,A,_)=>{var E=_(45972),R=0,a=Math.random(),o=E(1..toString);S.exports=function(c){return"Symbol("+(void 0===c?"":c)+")_"+o(++R+a,36)}},4286:(S,A,_)=>{var E=_(74267);S.exports=E&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},42572:(S,A,_)=>{var E=_(63211);A.f=E},63211:(S,A,_)=>{var E=_(37516),R=_(2389),a=_(7723),o=_(11789),c=_(74267),d=_(4286),f=R("wks"),v=E.Symbol,y=v&&v.for,D=d?v:v&&v.withoutSetter||o;S.exports=function(O){if(!a(f,O)||!c&&"string"!=typeof f[O]){var U="Symbol."+O;f[O]=c&&a(v,O)?v[O]:d&&y?y(U):D(U)}return f[O]}},52935:(S,A,_)=>{"use strict";var E=_(99253),R=_(37516),a=_(28833),o=_(26142),c=_(74494),d=_(64325),f=_(73821),v=_(6103),y=_(42856),D=_(67232),O=_(84992),U=_(30772),X=_(19105),H=_(63211),ne=_(54315),ee=H("toStringTag"),J=R.Error,ue=[].push,se=function(q,ie){var fe,Z=arguments.length>2?arguments[2]:void 0,G=a(_e,this);c?fe=c(new J(void 0),G?o(this):_e):(fe=G?this:f(_e),v(fe,ee,"Error")),v(fe,"message",X(ie,"")),ne&&v(fe,"stack",D(fe.stack,1)),O(fe,Z);var Q=[];return U(q,ue,{that:Q}),v(fe,"errors",Q),fe};c?c(se,J):d(se,J);var _e=se.prototype=f(J.prototype,{constructor:y(1,se),message:y(1,""),name:y(1,"AggregateError")});E({global:!0},{AggregateError:se})},94570:(S,A,_)=>{"use strict";var E=_(99253),R=_(37516),a=_(20065),o=_(51556),c=_(883),d=_(23349),f=_(1435),v=_(763),y=_(94947),D=_(64630),O=_(63211),U=_(93687),X=O("isConcatSpreadable"),H=9007199254740991,ne="Maximum allowed index exceeded",ee=R.TypeError,J=U>=51||!a(function(){var re=[];return re[X]=!1,re.concat()[0]!==re}),ue=D("concat"),se=function(re){if(!c(re))return!1;var q=re[X];return void 0!==q?!!q:o(re)};E({target:"Array",proto:!0,forced:!J||!ue},{concat:function(q){var fe,Q,j,oe,de,ie=d(this),Z=y(ie,0),G=0;for(fe=-1,j=arguments.length;fe<j;fe++)if(se(de=-1===fe?ie:arguments[fe])){if(G+(oe=f(de))>H)throw ee(ne);for(Q=0;Q<oe;Q++,G++)Q in de&&v(Z,G,de[Q])}else{if(G>=H)throw ee(ne);v(Z,G++,de)}return Z.length=G,Z}})},76613:(S,A,_)=>{"use strict";var E=_(99253),R=_(69720).filter;E({target:"Array",proto:!0,forced:!_(64630)("filter")},{filter:function(d){return R(this,d,arguments.length>1?arguments[1]:void 0)}})},15963:(S,A,_)=>{"use strict";var E=_(99253),R=_(69720).find,a=_(51802),o="find",c=!0;o in[]&&Array(1)[o](function(){c=!1}),E({target:"Array",proto:!0,forced:c},{find:function(f){return R(this,f,arguments.length>1?arguments[1]:void 0)}}),a(o)},28436:(S,A,_)=>{"use strict";var E=_(99253),R=_(30247);E({target:"Array",proto:!0,forced:[].forEach!=R},{forEach:R})},46601:(S,A,_)=>{var E=_(99253),R=_(58365);E({target:"Array",stat:!0,forced:!_(78442)(function(c){Array.from(c)})},{from:R})},82680:(S,A,_)=>{"use strict";var E=_(99253),R=_(591).includes,a=_(51802);E({target:"Array",proto:!0},{includes:function(c){return R(this,c,arguments.length>1?arguments[1]:void 0)}}),a("includes")},73713:(S,A,_)=>{"use strict";var E=_(99253),R=_(45972),a=_(591).indexOf,o=_(40386),c=R([].indexOf),d=!!c&&1/c([1],1,-0)<0,f=o("indexOf");E({target:"Array",proto:!0,forced:d||!f},{indexOf:function(y){var D=arguments.length>1?arguments[1]:void 0;return d?c(this,y,D)||0:a(this,y,D)}})},67011:(S,A,_)=>{_(99253)({target:"Array",stat:!0},{isArray:_(51556)})},64741:(S,A,_)=>{"use strict";var E=_(75880),R=_(51802),a=_(48626),o=_(90149),c=_(68797),d="Array Iterator",f=o.set,v=o.getterFor(d);S.exports=c(Array,"Array",function(y,D){f(this,{type:d,target:E(y),index:0,kind:D})},function(){var y=v(this),D=y.target,O=y.kind,U=y.index++;return!D||U>=D.length?(y.target=void 0,{value:void 0,done:!0}):"keys"==O?{value:U,done:!1}:"values"==O?{value:D[U],done:!1}:{value:[U,D[U]],done:!1}},"values"),a.Arguments=a.Array,R("keys"),R("values"),R("entries")},48303:(S,A,_)=>{"use strict";var E=_(99253),R=_(69720).map;E({target:"Array",proto:!0,forced:!_(64630)("map")},{map:function(d){return R(this,d,arguments.length>1?arguments[1]:void 0)}})},96682:(S,A,_)=>{"use strict";var E=_(99253),R=_(37516),a=_(51556),o=_(36025),c=_(883),d=_(54346),f=_(1435),v=_(75880),y=_(763),D=_(63211),O=_(64630),U=_(13053),X=O("slice"),H=D("species"),ne=R.Array,ee=Math.max;E({target:"Array",proto:!0,forced:!X},{slice:function(ue,se){var Z,G,fe,_e=v(this),re=f(_e),q=d(ue,re),ie=d(void 0===se?re:se,re);if(a(_e)&&((o(Z=_e.constructor)&&(Z===ne||a(Z.prototype))||c(Z)&&null===(Z=Z[H]))&&(Z=void 0),Z===ne||void 0===Z))return U(_e,q,ie);for(G=new(void 0===Z?ne:Z)(ee(ie-q,0)),fe=0;q<ie;q++,fe++)q in _e&&y(G,fe,_e[q]);return G.length=fe,G}})},92241:(S,A,_)=>{"use strict";var E=_(99253),R=_(37516),a=_(54346),o=_(88582),c=_(1435),d=_(23349),f=_(94947),v=_(763),D=_(64630)("splice"),O=R.TypeError,U=Math.max,X=Math.min,H=9007199254740991,ne="Maximum allowed length exceeded";E({target:"Array",proto:!0,forced:!D},{splice:function(J,ue){var ie,Z,G,fe,Q,j,se=d(this),_e=c(se),re=a(J,_e),q=arguments.length;if(0===q?ie=Z=0:1===q?(ie=0,Z=_e-re):(ie=q-2,Z=X(U(o(ue),0),_e-re)),_e+ie-Z>H)throw O(ne);for(G=f(se,Z),fe=0;fe<Z;fe++)(Q=re+fe)in se&&v(G,fe,se[Q]);if(G.length=Z,ie<Z){for(fe=re;fe<_e-Z;fe++)j=fe+ie,(Q=fe+Z)in se?se[j]=se[Q]:delete se[j];for(fe=_e;fe>_e-Z+ie;fe--)delete se[fe-1]}else if(ie>Z)for(fe=_e-Z;fe>re;fe--)j=fe+ie-1,(Q=fe+Z-1)in se?se[j]=se[Q]:delete se[j];for(fe=0;fe<ie;fe++)se[fe+re]=arguments[fe+2];return se.length=_e-Z+ie,G}})},62260:(S,A,_)=>{var E=_(99253),R=_(37516),a=_(73289),o=_(80626),c=_(45972),d=_(20065),f=R.Array,v=a("JSON","stringify"),y=c(/./.exec),D=c("".charAt),O=c("".charCodeAt),U=c("".replace),X=c(1..toString),H=/[\uD800-\uDFFF]/g,ne=/^[\uD800-\uDBFF]$/,ee=/^[\uDC00-\uDFFF]$/,J=function(se,_e,re){var q=D(re,_e-1),ie=D(re,_e+1);return y(ne,se)&&!y(ee,ie)||y(ee,se)&&!y(ne,q)?"\\u"+X(O(se,0),16):se},ue=d(function(){return'"\\udf06\\ud834"'!==v("\udf06\ud834")||'"\\udead"'!==v("\udead")});v&&E({target:"JSON",stat:!0,forced:ue},{stringify:function(_e,re,q){for(var ie=0,Z=arguments.length,G=f(Z);ie<Z;ie++)G[ie]=arguments[ie];var fe=o(v,null,G);return"string"==typeof fe?U(fe,H,J):fe}})},10157:(S,A,_)=>{var E=_(37516);_(65702)(E.JSON,"JSON",!0)},30238:()=>{},91487:(S,A,_)=>{var E=_(99253),R=_(36477);E({target:"Object",stat:!0,forced:Object.assign!==R},{assign:R})},40020:(S,A,_)=>{var E=_(99253),R=_(61385);E({target:"Object",stat:!0,forced:!R,sham:!R},{defineProperties:_(25526)})},55523:(S,A,_)=>{var E=_(99253),R=_(61385);E({target:"Object",stat:!0,forced:!R,sham:!R},{defineProperty:_(70762).f})},67777:(S,A,_)=>{var E=_(99253),R=_(37621).entries;E({target:"Object",stat:!0},{entries:function(o){return R(o)}})},32696:(S,A,_)=>{var E=_(99253),R=_(20065),a=_(75880),o=_(59819).f,c=_(61385),d=R(function(){o(1)});E({target:"Object",stat:!0,forced:!c||d,sham:!c},{getOwnPropertyDescriptor:function(y,D){return o(a(y),D)}})},36714:(S,A,_)=>{var E=_(99253),R=_(61385),a=_(8452),o=_(75880),c=_(59819),d=_(763);E({target:"Object",stat:!0,sham:!R},{getOwnPropertyDescriptors:function(v){for(var H,ne,y=o(v),D=c.f,O=a(y),U={},X=0;O.length>X;)void 0!==(ne=D(y,H=O[X++]))&&d(U,H,ne);return U}})},89405:(S,A,_)=>{var E=_(99253),R=_(23349),a=_(47836);E({target:"Object",stat:!0,forced:_(20065)(function(){a(1)})},{keys:function(f){return a(R(f))}})},97045:()=>{},75077:(S,A,_)=>{"use strict";var E=_(99253),R=_(13868),a=_(98204),o=_(2637),c=_(18429),d=_(30772);E({target:"Promise",stat:!0},{allSettled:function(v){var y=this,D=o.f(y),O=D.resolve,U=D.reject,X=c(function(){var H=a(y.resolve),ne=[],ee=0,J=1;d(v,function(ue){var se=ee++,_e=!1;J++,R(H,y,ue).then(function(re){_e||(_e=!0,ne[se]={status:"fulfilled",value:re},--J||O(ne))},function(re){_e||(_e=!0,ne[se]={status:"rejected",reason:re},--J||O(ne))})}),--J||O(ne)});return X.error&&U(X.value),D.promise}})},83218:(S,A,_)=>{"use strict";var E=_(99253),R=_(98204),a=_(73289),o=_(13868),c=_(2637),d=_(18429),f=_(30772),v="No one promise resolved";E({target:"Promise",stat:!0},{any:function(D){var O=this,U=a("AggregateError"),X=c.f(O),H=X.resolve,ne=X.reject,ee=d(function(){var J=R(O.resolve),ue=[],se=0,_e=1,re=!1;f(D,function(q){var ie=se++,Z=!1;_e++,o(J,O,q).then(function(G){Z||re||(re=!0,H(G))},function(G){Z||re||(Z=!0,ue[ie]=G,--_e||ne(new U(ue,v)))})}),--_e||ne(new U(ue,v))});return ee.error&&ne(ee.value),X.promise}})},45895:(S,A,_)=>{"use strict";var E=_(99253),R=_(27316),a=_(99978),o=_(20065),c=_(73289),d=_(91699),f=_(3759),v=_(33898),y=_(46573);if(E({target:"Promise",proto:!0,real:!0,forced:!!a&&o(function(){a.prototype.finally.call({then:function(){}},function(){})})},{finally:function(U){var X=f(this,c("Promise")),H=d(U);return this.then(H?function(ne){return v(X,U()).then(function(){return ne})}:U,H?function(ne){return v(X,U()).then(function(){throw ne})}:U)}}),!R&&d(a)){var O=c("Promise").prototype.finally;a.prototype.finally!==O&&y(a.prototype,"finally",O,{unsafe:!0})}},12545:(S,A,_)=>{"use strict";var Ci,An,ei,Ni,E=_(99253),R=_(27316),a=_(37516),o=_(73289),c=_(13868),d=_(99978),f=_(46573),v=_(22239),y=_(74494),D=_(65702),O=_(31333),U=_(98204),X=_(91699),H=_(883),ne=_(74528),ee=_(57761),J=_(30772),ue=_(78442),se=_(3759),_e=_(15691).set,re=_(6120),q=_(33898),ie=_(28979),Z=_(2637),G=_(18429),fe=_(90149),Q=_(808),j=_(63211),oe=_(33040),de=_(7214),ye=_(93687),ce=j("species"),Ce="Promise",Be=fe.get,ot=fe.set,De=fe.getterFor(Ce),Ue=d&&d.prototype,Xe=d,at=Ue,ut=a.TypeError,Qe=a.document,Ft=a.process,Wt=Z.f,ln=Wt,Pn=!!(Qe&&Qe.createEvent&&a.dispatchEvent),Kn=X(a.PromiseRejectionEvent),Vn="unhandledrejection",mn=!1,Ne=Q(Ce,function(){var We=ee(Xe),dt=We!==String(Xe);if(!dt&&66===ye||R&&!at.finally)return!0;if(ye>=51&&/native code/.test(We))return!1;var Ee=new Xe(function(Ot){Ot(1)}),Ve=function(Ot){Ot(function(){},function(){})};return(Ee.constructor={})[ce]=Ve,!(mn=Ee.then(function(){})instanceof Ve)||!dt&&oe&&!Kn}),Le=Ne||!ue(function(We){Xe.all(We).catch(function(){})}),vn=function(We){var dt;return!(!H(We)||!X(dt=We.then))&&dt},Tn=function(We,dt){if(!We.notified){We.notified=!0;var Ee=We.reactions;re(function(){for(var Ve=We.value,it=1==We.state,Ot=0;Ee.length>Ot;){var wt,kt,vo,nn=Ee[Ot++],yn=it?nn.ok:nn.fail,lt=nn.resolve,dn=nn.reject,wn=nn.domain;try{yn?(it||(2===We.rejection&&ji(We),We.rejection=1),!0===yn?wt=Ve:(wn&&wn.enter(),wt=yn(Ve),wn&&(wn.exit(),vo=!0)),wt===nn.promise?dn(ut("Promise-chain cycle")):(kt=vn(wt))?c(kt,wt,lt,dn):lt(wt)):dn(Ve)}catch(Ei){wn&&!vo&&wn.exit(),dn(Ei)}}We.reactions=[],We.notified=!1,dt&&!We.rejection&&Sn(We)})}},qt=function(We,dt,Ee){var Ve,it;Pn?((Ve=Qe.createEvent("Event")).promise=dt,Ve.reason=Ee,Ve.initEvent(We,!1,!0),a.dispatchEvent(Ve)):Ve={promise:dt,reason:Ee},!Kn&&(it=a["on"+We])?it(Ve):We===Vn&&ie("Unhandled promise rejection",Ee)},Sn=function(We){c(_e,a,function(){var it,dt=We.facade,Ee=We.value;if(Hn(We)&&(it=G(function(){de?Ft.emit("unhandledRejection",Ee,dt):qt(Vn,dt,Ee)}),We.rejection=de||Hn(We)?2:1,it.error))throw it.value})},Hn=function(We){return 1!==We.rejection&&!We.parent},ji=function(We){c(_e,a,function(){var dt=We.facade;de?Ft.emit("rejectionHandled",dt):qt("rejectionhandled",dt,We.value)})},mt=function(We,dt,Ee){return function(Ve){We(dt,Ve,Ee)}},Dt=function(We,dt,Ee){We.done||(We.done=!0,Ee&&(We=Ee),We.value=dt,We.state=2,Tn(We,!0))},en=function(We,dt,Ee){if(!We.done){We.done=!0,Ee&&(We=Ee);try{if(We.facade===dt)throw ut("Promise can't be resolved itself");var Ve=vn(dt);Ve?re(function(){var it={done:!1};try{c(Ve,dt,mt(en,it,We),mt(Dt,it,We))}catch(Ot){Dt(it,Ot,We)}}):(We.value=dt,We.state=1,Tn(We,!1))}catch(it){Dt({done:!1},it,We)}}};if(Ne&&(Xe=function(dt){ne(this,at),U(dt),c(Ci,this);var Ee=Be(this);try{dt(mt(en,Ee),mt(Dt,Ee))}catch(Ve){Dt(Ee,Ve)}},(Ci=function(dt){ot(this,{type:Ce,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=v(at=Xe.prototype,{then:function(dt,Ee){var Ve=De(this),it=Ve.reactions,Ot=Wt(se(this,Xe));return Ot.ok=!X(dt)||dt,Ot.fail=X(Ee)&&Ee,Ot.domain=de?Ft.domain:void 0,Ve.parent=!0,it[it.length]=Ot,0!=Ve.state&&Tn(Ve,!1),Ot.promise},catch:function(We){return this.then(void 0,We)}}),An=function(){var We=new Ci,dt=Be(We);this.promise=We,this.resolve=mt(en,dt),this.reject=mt(Dt,dt)},Z.f=Wt=function(We){return We===Xe||We===ei?new An(We):ln(We)},!R&&X(d)&&Ue!==Object.prototype)){Ni=Ue.then,mn||(f(Ue,"then",function(dt,Ee){var Ve=this;return new Xe(function(it,Ot){c(Ni,Ve,it,Ot)}).then(dt,Ee)},{unsafe:!0}),f(Ue,"catch",at.catch,{unsafe:!0}));try{delete Ue.constructor}catch(We){}y&&y(Ue,at)}E({global:!0,wrap:!0,forced:Ne},{Promise:Xe}),D(Xe,Ce,!1,!0),O(Ce),ei=o(Ce),E({target:Ce,stat:!0,forced:Ne},{reject:function(dt){var Ee=Wt(this);return c(Ee.reject,void 0,dt),Ee.promise}}),E({target:Ce,stat:!0,forced:R||Ne},{resolve:function(dt){return q(R&&this===ei?Xe:this,dt)}}),E({target:Ce,stat:!0,forced:Le},{all:function(dt){var Ee=this,Ve=Wt(Ee),it=Ve.resolve,Ot=Ve.reject,nn=G(function(){var yn=U(Ee.resolve),lt=[],dn=0,wn=1;J(dt,function(wt){var kt=dn++,vo=!1;wn++,c(yn,Ee,wt).then(function(Ei){vo||(vo=!0,lt[kt]=Ei,--wn||it(lt))},Ot)}),--wn||it(lt)});return nn.error&&Ot(nn.value),Ve.promise},race:function(dt){var Ee=this,Ve=Wt(Ee),it=Ve.reject,Ot=G(function(){var nn=U(Ee.resolve);J(dt,function(yn){c(nn,Ee,yn).then(Ve.resolve,it)})});return Ot.error&&it(Ot.value),Ve.promise}})},22428:()=>{},96595:(S,A,_)=>{"use strict";var E=_(99253),R=_(45972),a=_(9974),o=_(63805),c=_(37299),d=_(23655),f=R("".indexOf);E({target:"String",proto:!0,forced:!d("includes")},{includes:function(y){return!!~f(c(o(this)),c(a(y)),arguments.length>1?arguments[1]:void 0)}})},62009:(S,A,_)=>{"use strict";var E=_(14924).charAt,R=_(37299),a=_(90149),o=_(68797),c="String Iterator",d=a.set,f=a.getterFor(c);o(String,"String",function(v){d(this,{type:c,string:R(v),index:0})},function(){var U,y=f(this),D=y.string,O=y.index;return O>=D.length?{value:void 0,done:!0}:(U=E(D,O),y.index+=U.length,{value:U,done:!1})})},11322:(S,A,_)=>{"use strict";var ne,E=_(99253),R=_(45972),a=_(59819).f,o=_(37159),c=_(37299),d=_(9974),f=_(63805),v=_(23655),y=_(27316),D=R("".startsWith),O=R("".slice),U=Math.min,X=v("startsWith");E({target:"String",proto:!0,forced:!(!y&&!X&&(ne=a(String.prototype,"startsWith"),ne&&!ne.writable)||X)},{startsWith:function(ee){var J=c(f(this));d(ee);var ue=o(U(arguments.length>1?arguments[1]:void 0,J.length)),se=c(ee);return D?D(J,se,ue):O(J,ue,ue+se.length)===se}})},32159:(S,A,_)=>{_(8254)("asyncIterator")},72450:()=>{},43071:(S,A,_)=>{_(8254)("hasInstance")},34025:(S,A,_)=>{_(8254)("isConcatSpreadable")},19155:(S,A,_)=>{_(8254)("iterator")},33353:(S,A,_)=>{"use strict";var E=_(99253),R=_(37516),a=_(73289),o=_(80626),c=_(13868),d=_(45972),f=_(27316),v=_(61385),y=_(74267),D=_(20065),O=_(7723),U=_(51556),X=_(91699),H=_(883),ne=_(28833),ee=_(17397),J=_(22696),ue=_(23349),se=_(75880),_e=_(54053),re=_(37299),q=_(42856),ie=_(73821),Z=_(47836),G=_(92081),fe=_(69820),Q=_(62222),j=_(59819),oe=_(70762),de=_(52725),ye=_(13053),ce=_(46573),Ce=_(2389),Be=_(26103),ot=_(64842),De=_(11789),Ue=_(63211),Xe=_(42572),at=_(8254),ut=_(65702),Qe=_(90149),Ft=_(69720).forEach,Wt=Be("hidden"),ln="Symbol",Pn="prototype",Kn=Ue("toPrimitive"),Vn=Qe.set,Jt=Qe.getterFor(ln),Nn=Object[Pn],Yt=R.Symbol,Dn=Yt&&Yt[Pn],Ke=R.TypeError,Ri=R.QObject,mn=a("JSON","stringify"),Ci=j.f,An=oe.f,ei=fe.f,Ni=de.f,Ne=d([].push),Le=Ce("symbols"),vn=Ce("op-symbols"),Tn=Ce("string-to-symbol-registry"),qt=Ce("symbol-to-string-registry"),Sn=Ce("wks"),Hn=!Ri||!Ri[Pn]||!Ri[Pn].findChild,ji=v&&D(function(){return 7!=ie(An({},"a",{get:function(){return An(this,"a",{value:7}).a}})).a})?function(yn,lt,dn){var wn=Ci(Nn,lt);wn&&delete Nn[lt],An(yn,lt,dn),wn&&yn!==Nn&&An(Nn,lt,wn)}:An,mt=function(yn,lt){var dn=Le[yn]=ie(Dn);return Vn(dn,{type:ln,tag:yn,description:lt}),v||(dn.description=lt),dn},Dt=function(lt,dn,wn){lt===Nn&&Dt(vn,dn,wn),J(lt);var wt=_e(dn);return J(wn),O(Le,wt)?(wn.enumerable?(O(lt,Wt)&&lt[Wt][wt]&&(lt[Wt][wt]=!1),wn=ie(wn,{enumerable:q(0,!1)})):(O(lt,Wt)||An(lt,Wt,q(1,{})),lt[Wt][wt]=!0),ji(lt,wt,wn)):An(lt,wt,wn)},en=function(lt,dn){J(lt);var wn=se(dn),wt=Z(wn).concat(it(wn));return Ft(wt,function(kt){(!v||c(dt,wn,kt))&&Dt(lt,kt,wn[kt])}),lt},dt=function(lt){var dn=_e(lt),wn=c(Ni,this,dn);return!(this===Nn&&O(Le,dn)&&!O(vn,dn))&&(!(wn||!O(this,dn)||!O(Le,dn)||O(this,Wt)&&this[Wt][dn])||wn)},Ee=function(lt,dn){var wn=se(lt),wt=_e(dn);if(wn!==Nn||!O(Le,wt)||O(vn,wt)){var kt=Ci(wn,wt);return kt&&O(Le,wt)&&!(O(wn,Wt)&&wn[Wt][wt])&&(kt.enumerable=!0),kt}},Ve=function(lt){var dn=ei(se(lt)),wn=[];return Ft(dn,function(wt){!O(Le,wt)&&!O(ot,wt)&&Ne(wn,wt)}),wn},it=function(lt){var dn=lt===Nn,wn=ei(dn?vn:se(lt)),wt=[];return Ft(wn,function(kt){O(Le,kt)&&(!dn||O(Nn,kt))&&Ne(wt,Le[kt])}),wt};if(y||(ce(Dn=(Yt=function(){if(ne(Dn,this))throw Ke("Symbol is not a constructor");var lt=arguments.length&&void 0!==arguments[0]?re(arguments[0]):void 0,dn=De(lt),wn=function(wt){this===Nn&&c(wn,vn,wt),O(this,Wt)&&O(this[Wt],dn)&&(this[Wt][dn]=!1),ji(this,dn,q(1,wt))};return v&&Hn&&ji(Nn,dn,{configurable:!0,set:wn}),mt(dn,lt)})[Pn],"toString",function(){return Jt(this).tag}),ce(Yt,"withoutSetter",function(yn){return mt(De(yn),yn)}),de.f=dt,oe.f=Dt,j.f=Ee,G.f=fe.f=Ve,Q.f=it,Xe.f=function(yn){return mt(Ue(yn),yn)},v&&(An(Dn,"description",{configurable:!0,get:function(){return Jt(this).description}}),f||ce(Nn,"propertyIsEnumerable",dt,{unsafe:!0}))),E({global:!0,wrap:!0,forced:!y,sham:!y},{Symbol:Yt}),Ft(Z(Sn),function(yn){at(yn)}),E({target:ln,stat:!0,forced:!y},{for:function(yn){var lt=re(yn);if(O(Tn,lt))return Tn[lt];var dn=Yt(lt);return Tn[lt]=dn,qt[dn]=lt,dn},keyFor:function(lt){if(!ee(lt))throw Ke(lt+" is not a symbol");if(O(qt,lt))return qt[lt]},useSetter:function(){Hn=!0},useSimple:function(){Hn=!1}}),E({target:"Object",stat:!0,forced:!y,sham:!v},{create:function(lt,dn){return void 0===dn?ie(lt):en(ie(lt),dn)},defineProperty:Dt,defineProperties:en,getOwnPropertyDescriptor:Ee}),E({target:"Object",stat:!0,forced:!y},{getOwnPropertyNames:Ve,getOwnPropertySymbols:it}),E({target:"Object",stat:!0,forced:D(function(){Q.f(1)})},{getOwnPropertySymbols:function(lt){return Q.f(ue(lt))}}),mn&&E({target:"JSON",stat:!0,forced:!y||D(function(){var yn=Yt();return"[null]"!=mn([yn])||"{}"!=mn({a:yn})||"{}"!=mn(Object(yn))})},{stringify:function(lt,dn,wn){var wt=ye(arguments),kt=dn;if((H(dn)||void 0!==lt)&&!ee(lt))return U(dn)||(dn=function(vo,Ei){if(X(kt)&&(Ei=c(kt,this,vo,Ei)),!ee(Ei))return Ei}),wt[1]=dn,o(mn,null,wt)}}),!Dn[Kn]){var nn=Dn.valueOf;ce(Dn,Kn,function(yn){return c(nn,this)})}ut(Yt,ln),ot[Wt]=!0},16576:(S,A,_)=>{_(8254)("matchAll")},64485:(S,A,_)=>{_(8254)("match")},42053:(S,A,_)=>{_(8254)("replace")},96668:(S,A,_)=>{_(8254)("search")},54714:(S,A,_)=>{_(8254)("species")},20437:(S,A,_)=>{_(8254)("split")},11979:(S,A,_)=>{_(8254)("toPrimitive")},78559:(S,A,_)=>{_(8254)("toStringTag")},59450:(S,A,_)=>{_(8254)("unscopables")},82695:(S,A,_)=>{"use strict";var U,E=_(37516),R=_(45972),a=_(22239),o=_(48016),c=_(7448),d=_(39754),f=_(883),v=_(2577),y=_(90149).enforce,D=_(74381),O=!E.ActiveXObject&&"ActiveXObject"in E,X=function(_e){return function(){return _e(this,arguments.length?arguments[0]:void 0)}},H=c("WeakMap",X,d);if(D&&O){U=d.getConstructor(X,"WeakMap",!0),o.enable();var ne=H.prototype,ee=R(ne.delete),J=R(ne.has),ue=R(ne.get),se=R(ne.set);a(ne,{delete:function(_e){if(f(_e)&&!v(_e)){var re=y(this);return re.frozen||(re.frozen=new U),ee(this,_e)||re.frozen.delete(_e)}return ee(this,_e)},has:function(re){if(f(re)&&!v(re)){var q=y(this);return q.frozen||(q.frozen=new U),J(this,re)||q.frozen.has(re)}return J(this,re)},get:function(re){if(f(re)&&!v(re)){var q=y(this);return q.frozen||(q.frozen=new U),J(this,re)?ue(this,re):q.frozen.get(re)}return ue(this,re)},set:function(re,q){if(f(re)&&!v(re)){var ie=y(this);ie.frozen||(ie.frozen=new U),J(this,re)?se(this,re,q):ie.frozen.set(re,q)}else se(this,re,q);return this}})}},62373:(S,A,_)=>{_(52935)},18168:(S,A,_)=>{_(75077)},25831:(S,A,_)=>{_(83218)},73944:(S,A,_)=>{"use strict";var E=_(99253),R=_(2637),a=_(18429);E({target:"Promise",stat:!0},{try:function(o){var c=R.f(this),d=a(o);return(d.error?c.reject:c.resolve)(d.value),c.promise}})},42673:(S,A,_)=>{_(8254)("asyncDispose")},34286:(S,A,_)=>{_(8254)("dispose")},73695:(S,A,_)=>{_(8254)("matcher")},13990:(S,A,_)=>{_(8254)("metadata")},69181:(S,A,_)=>{_(8254)("observable")},11686:(S,A,_)=>{_(8254)("patternMatch")},84430:(S,A,_)=>{_(8254)("replaceAll")},10713:(S,A,_)=>{_(64741);var E=_(70808),R=_(37516),a=_(98330),o=_(6103),c=_(48626),f=_(63211)("toStringTag");for(var v in E){var y=R[v],D=y&&y.prototype;D&&a(D)!==f&&o(D,f,v),c[v]=c.Array}},37298:(S,A,_)=>{"use strict";_(64741);var E=_(99253),R=_(37516),a=_(73289),o=_(13868),c=_(45972),d=_(71665),f=_(46573),v=_(22239),y=_(65702),D=_(59571),O=_(90149),U=_(74528),X=_(91699),H=_(7723),ne=_(88509),ee=_(98330),J=_(22696),ue=_(883),se=_(37299),_e=_(73821),re=_(42856),q=_(13020),ie=_(62439),Z=_(63211),G=_(95264),fe=Z("iterator"),Q="URLSearchParams",j=Q+"Iterator",oe=O.set,de=O.getterFor(Q),ye=O.getterFor(j),ce=a("fetch"),Ce=a("Request"),Be=a("Headers"),ot=Ce&&Ce.prototype,De=Be&&Be.prototype,Ue=R.RegExp,Xe=R.TypeError,at=R.decodeURIComponent,ut=R.encodeURIComponent,Qe=c("".charAt),Ft=c([].join),Wt=c([].push),ln=c("".replace),Pn=c([].shift),Kn=c([].splice),Vn=c("".split),Jt=c("".slice),Nn=/\+/g,Yt=Array(4),Dn=function(mt){return Yt[mt-1]||(Yt[mt-1]=Ue("((?:%[\\da-f]{2}){"+mt+"})","gi"))},Ke=function(mt){try{return at(mt)}catch(Dt){return mt}},Ri=function(mt){var Dt=ln(mt,Nn," "),en=4;try{return at(Dt)}catch(We){for(;en;)Dt=ln(Dt,Dn(en--),Ke);return Dt}},mn=/[!'()~]|%20/g,Ci={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},An=function(mt){return Ci[mt]},ei=function(mt){return ln(ut(mt),mn,An)},Ni=function(mt,Dt){if(mt<Dt)throw Xe("Not enough arguments")},Ne=D(function(Dt,en){oe(this,{type:j,iterator:q(de(Dt).entries),kind:en})},"Iterator",function(){var Dt=ye(this),en=Dt.kind,We=Dt.iterator.next(),dt=We.value;return We.done||(We.value="keys"===en?dt.key:"values"===en?dt.value:[dt.key,dt.value]),We}),Le=function(mt){this.entries=[],this.url=null,void 0!==mt&&(ue(mt)?this.parseObject(mt):this.parseQuery("string"==typeof mt?"?"===Qe(mt,0)?Jt(mt,1):mt:se(mt)))};Le.prototype={type:Q,bindURL:function(mt){this.url=mt,this.update()},parseObject:function(mt){var en,We,dt,Ee,Ve,it,Ot,Dt=ie(mt);if(Dt)for(We=(en=q(mt,Dt)).next;!(dt=o(We,en)).done;){if(Ee=q(J(dt.value)),(it=o(Ve=Ee.next,Ee)).done||(Ot=o(Ve,Ee)).done||!o(Ve,Ee).done)throw Xe("Expected sequence with length 2");Wt(this.entries,{key:se(it.value),value:se(Ot.value)})}else for(var nn in mt)H(mt,nn)&&Wt(this.entries,{key:nn,value:se(mt[nn])})},parseQuery:function(mt){if(mt)for(var We,dt,Dt=Vn(mt,"&"),en=0;en<Dt.length;)(We=Dt[en++]).length&&(dt=Vn(We,"="),Wt(this.entries,{key:Ri(Pn(dt)),value:Ri(Ft(dt,"="))}))},serialize:function(){for(var We,mt=this.entries,Dt=[],en=0;en<mt.length;)We=mt[en++],Wt(Dt,ei(We.key)+"="+ei(We.value));return Ft(Dt,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var vn=function(){U(this,Tn);var Dt=arguments.length>0?arguments[0]:void 0;oe(this,new Le(Dt))},Tn=vn.prototype;if(v(Tn,{append:function(Dt,en){Ni(arguments.length,2);var We=de(this);Wt(We.entries,{key:se(Dt),value:se(en)}),We.updateURL()},delete:function(mt){Ni(arguments.length,1);for(var Dt=de(this),en=Dt.entries,We=se(mt),dt=0;dt<en.length;)en[dt].key===We?Kn(en,dt,1):dt++;Dt.updateURL()},get:function(Dt){Ni(arguments.length,1);for(var en=de(this).entries,We=se(Dt),dt=0;dt<en.length;dt++)if(en[dt].key===We)return en[dt].value;return null},getAll:function(Dt){Ni(arguments.length,1);for(var en=de(this).entries,We=se(Dt),dt=[],Ee=0;Ee<en.length;Ee++)en[Ee].key===We&&Wt(dt,en[Ee].value);return dt},has:function(Dt){Ni(arguments.length,1);for(var en=de(this).entries,We=se(Dt),dt=0;dt<en.length;)if(en[dt++].key===We)return!0;return!1},set:function(Dt,en){Ni(arguments.length,1);for(var nn,We=de(this),dt=We.entries,Ee=!1,Ve=se(Dt),it=se(en),Ot=0;Ot<dt.length;Ot++)(nn=dt[Ot]).key===Ve&&(Ee?Kn(dt,Ot--,1):(Ee=!0,nn.value=it));Ee||Wt(dt,{key:Ve,value:it}),We.updateURL()},sort:function(){var Dt=de(this);G(Dt.entries,function(en,We){return en.key>We.key?1:-1}),Dt.updateURL()},forEach:function(Dt){for(var Ee,en=de(this).entries,We=ne(Dt,arguments.length>1?arguments[1]:void 0),dt=0;dt<en.length;)We((Ee=en[dt++]).value,Ee.key,this)},keys:function(){return new Ne(this,"keys")},values:function(){return new Ne(this,"values")},entries:function(){return new Ne(this,"entries")}},{enumerable:!0}),f(Tn,fe,Tn.entries,{name:"entries"}),f(Tn,"toString",function(){return de(this).serialize()},{enumerable:!0}),y(vn,Q),E({global:!0,forced:!d},{URLSearchParams:vn}),!d&&X(Be)){var qt=c(De.has),Sn=c(De.set),Hn=function(mt){if(ue(mt)){var en,Dt=mt.body;if(ee(Dt)===Q)return en=mt.headers?new Be(mt.headers):new Be,qt(en,"content-type")||Sn(en,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),_e(mt,{body:re(0,se(Dt)),headers:re(0,en)})}return mt};if(X(ce)&&E({global:!0,enumerable:!0,forced:!0},{fetch:function(Dt){return ce(Dt,arguments.length>1?Hn(arguments[1]):{})}}),X(Ce)){var ji=function(Dt){return U(this,ot),new Ce(Dt,arguments.length>1?Hn(arguments[1]):{})};ot.constructor=ji,ji.prototype=ot,E({global:!0,forced:!0},{Request:ji})}}S.exports={URLSearchParams:vn,getState:de}},96353:(S,A,_)=>{var E=_(23813);S.exports=E},18830:(S,A,_)=>{var E=_(89740);S.exports=E},76023:(S,A,_)=>{var E=_(34014);S.exports=E},88051:(S,A,_)=>{var E=_(47957);S.exports=E},92578:(S,A,_)=>{var E=_(48873);_(10713),S.exports=E},85671:(S,A,_)=>{var E=_(233);S.exports=E},60580:(S,A,_)=>{_(10713);var E=_(98330),R=_(7723),a=_(28833),o=_(76023),c=Array.prototype,d={DOMTokenList:!0,NodeList:!0};S.exports=function(f){var v=f.entries;return f===c||a(c,f)&&v===c.entries||R(d,E(f))?o:v}},26271:(S,A,_)=>{var E=_(32263);S.exports=E},82237:(S,A,_)=>{var E=_(81754);S.exports=E},6506:(S,A,_)=>{_(10713);var E=_(98330),R=_(7723),a=_(28833),o=_(88051),c=Array.prototype,d={DOMTokenList:!0,NodeList:!0};S.exports=function(f){var v=f.forEach;return f===c||a(c,f)&&v===c.forEach||R(d,E(f))?o:v}},26944:(S,A,_)=>{var E=_(46397);S.exports=E},28532:(S,A,_)=>{var E=_(88699);S.exports=E},3245:(S,A,_)=>{var E=_(24454);S.exports=E},34123:(S,A,_)=>{var E=_(18422);S.exports=E},43264:(S,A,_)=>{var E=_(13807);S.exports=E},75991:(S,A,_)=>{var E=_(13194);S.exports=E},65155:(S,A,_)=>{var E=_(20573);S.exports=E},80301:(S,A,_)=>{var E=_(49483);S.exports=E},62217:(S,A,_)=>{var E=_(12171);S.exports=E},14893:(S,A,_)=>{var E=_(39469);S.exports=E},81145:(S,A,_)=>{var E=_(24911);S.exports=E},52572:(S,A,_)=>{var E=_(942);S.exports=E},17608:(S,A,_)=>{var E=_(46592);S.exports=E},27567:(S,A,_)=>{var E=_(51594);S.exports=E},158:(S,A,_)=>{var E=_(87079);S.exports=E},27620:(S,A,_)=>{var E=_(42654);_(10713),S.exports=E},75743:(S,A,_)=>{var E=_(59366);_(10713),S.exports=E},40359:(S,A,_)=>{var E=_(48926);_(10713),S.exports=E},37254:(S,A,_)=>{var E=_(34271);_(10713),S.exports=E},30770:(S,A,_)=>{var E=_(1796);_(10713),S.exports=E},34271:(S,A,_)=>{_(37298);var E=_(83271);S.exports=E.URLSearchParams},9874:function(){var S;S="undefined"!=typeof self?self:this,function(_){var E_searchParams="URLSearchParams"in S,E_iterable="Symbol"in S&&"iterator"in Symbol,E_blob="FileReader"in S&&"Blob"in S&&function(){try{return new Blob,!0}catch(Z){return!1}}(),E_formData="FormData"in S,E_arrayBuffer="ArrayBuffer"in S;if(E_arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(Z){return Z&&a.indexOf(Object.prototype.toString.call(Z))>-1};function c(Z){if("string"!=typeof Z&&(Z=String(Z)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(Z))throw new TypeError("Invalid character in header field name");return Z.toLowerCase()}function d(Z){return"string"!=typeof Z&&(Z=String(Z)),Z}function f(Z){var G={next:function(){var fe=Z.shift();return{done:void 0===fe,value:fe}}};return E_iterable&&(G[Symbol.iterator]=function(){return G}),G}function v(Z){this.map={},Z instanceof v?Z.forEach(function(G,fe){this.append(fe,G)},this):Array.isArray(Z)?Z.forEach(function(G){this.append(G[0],G[1])},this):Z&&Object.getOwnPropertyNames(Z).forEach(function(G){this.append(G,Z[G])},this)}function y(Z){if(Z.bodyUsed)return Promise.reject(new TypeError("Already read"));Z.bodyUsed=!0}function D(Z){return new Promise(function(G,fe){Z.onload=function(){G(Z.result)},Z.onerror=function(){fe(Z.error)}})}function O(Z){var G=new FileReader,fe=D(G);return G.readAsArrayBuffer(Z),fe}function H(Z){if(Z.slice)return Z.slice(0);var G=new Uint8Array(Z.byteLength);return G.set(new Uint8Array(Z)),G.buffer}function ne(){return this.bodyUsed=!1,this._initBody=function(Z){this._bodyInit=Z,Z?"string"==typeof Z?this._bodyText=Z:E_blob&&Blob.prototype.isPrototypeOf(Z)?this._bodyBlob=Z:E_formData&&FormData.prototype.isPrototypeOf(Z)?this._bodyFormData=Z:E_searchParams&&URLSearchParams.prototype.isPrototypeOf(Z)?this._bodyText=Z.toString():E_arrayBuffer&&E_blob&&function(Z){return Z&&DataView.prototype.isPrototypeOf(Z)}(Z)?(this._bodyArrayBuffer=H(Z.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):E_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(Z)||o(Z))?this._bodyArrayBuffer=H(Z):this._bodyText=Z=Object.prototype.toString.call(Z):this._bodyText="",this.headers.get("content-type")||("string"==typeof Z?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):E_searchParams&&URLSearchParams.prototype.isPrototypeOf(Z)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},E_blob&&(this.blob=function(){var Z=y(this);if(Z)return Z;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(O)}),this.text=function(){var Z=y(this);if(Z)return Z;if(this._bodyBlob)return function(Z){var G=new FileReader,fe=D(G);return G.readAsText(Z),fe}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(Z){for(var G=new Uint8Array(Z),fe=new Array(G.length),Q=0;Q<G.length;Q++)fe[Q]=String.fromCharCode(G[Q]);return fe.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},E_formData&&(this.formData=function(){return this.text().then(se)}),this.json=function(){return this.text().then(JSON.parse)},this}v.prototype.append=function(Z,G){Z=c(Z),G=d(G);var fe=this.map[Z];this.map[Z]=fe?fe+", "+G:G},v.prototype.delete=function(Z){delete this.map[c(Z)]},v.prototype.get=function(Z){return Z=c(Z),this.has(Z)?this.map[Z]:null},v.prototype.has=function(Z){return this.map.hasOwnProperty(c(Z))},v.prototype.set=function(Z,G){this.map[c(Z)]=d(G)},v.prototype.forEach=function(Z,G){for(var fe in this.map)this.map.hasOwnProperty(fe)&&Z.call(G,this.map[fe],fe,this)},v.prototype.keys=function(){var Z=[];return this.forEach(function(G,fe){Z.push(fe)}),f(Z)},v.prototype.values=function(){var Z=[];return this.forEach(function(G){Z.push(G)}),f(Z)},v.prototype.entries=function(){var Z=[];return this.forEach(function(G,fe){Z.push([fe,G])}),f(Z)},E_iterable&&(v.prototype[Symbol.iterator]=v.prototype.entries);var ee=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ue(Z,G){var fe=(G=G||{}).body;if(Z instanceof ue){if(Z.bodyUsed)throw new TypeError("Already read");this.url=Z.url,this.credentials=Z.credentials,G.headers||(this.headers=new v(Z.headers)),this.method=Z.method,this.mode=Z.mode,this.signal=Z.signal,!fe&&null!=Z._bodyInit&&(fe=Z._bodyInit,Z.bodyUsed=!0)}else this.url=String(Z);if(this.credentials=G.credentials||this.credentials||"same-origin",(G.headers||!this.headers)&&(this.headers=new v(G.headers)),this.method=function(Z){var G=Z.toUpperCase();return ee.indexOf(G)>-1?G:Z}(G.method||this.method||"GET"),this.mode=G.mode||this.mode||null,this.signal=G.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&fe)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(fe)}function se(Z){var G=new FormData;return Z.trim().split("&").forEach(function(fe){if(fe){var Q=fe.split("="),j=Q.shift().replace(/\+/g," "),oe=Q.join("=").replace(/\+/g," ");G.append(decodeURIComponent(j),decodeURIComponent(oe))}}),G}function _e(Z){var G=new v;return Z.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(Q){var j=Q.split(":"),oe=j.shift().trim();if(oe){var de=j.join(":").trim();G.append(oe,de)}}),G}function re(Z,G){G||(G={}),this.type="default",this.status=void 0===G.status?200:G.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in G?G.statusText:"OK",this.headers=new v(G.headers),this.url=G.url||"",this._initBody(Z)}ue.prototype.clone=function(){return new ue(this,{body:this._bodyInit})},ne.call(ue.prototype),ne.call(re.prototype),re.prototype.clone=function(){return new re(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},re.error=function(){var Z=new re(null,{status:0,statusText:""});return Z.type="error",Z};var q=[301,302,303,307,308];re.redirect=function(Z,G){if(-1===q.indexOf(G))throw new RangeError("Invalid status code");return new re(null,{status:G,headers:{location:Z}})},_.DOMException=S.DOMException;try{new _.DOMException}catch(Z){_.DOMException=function(G,fe){this.message=G,this.name=fe;var Q=Error(G);this.stack=Q.stack},_.DOMException.prototype=Object.create(Error.prototype),_.DOMException.prototype.constructor=_.DOMException}function ie(Z,G){return new Promise(function(fe,Q){var j=new ue(Z,G);if(j.signal&&j.signal.aborted)return Q(new _.DOMException("Aborted","AbortError"));var oe=new XMLHttpRequest;function de(){oe.abort()}oe.onload=function(){var ye={status:oe.status,statusText:oe.statusText,headers:_e(oe.getAllResponseHeaders()||"")};ye.url="responseURL"in oe?oe.responseURL:ye.headers.get("X-Request-URL"),fe(new re("response"in oe?oe.response:oe.responseText,ye))},oe.onerror=function(){Q(new TypeError("Network request failed"))},oe.ontimeout=function(){Q(new TypeError("Network request failed"))},oe.onabort=function(){Q(new _.DOMException("Aborted","AbortError"))},oe.open(j.method,j.url,!0),"include"===j.credentials?oe.withCredentials=!0:"omit"===j.credentials&&(oe.withCredentials=!1),"responseType"in oe&&E_blob&&(oe.responseType="blob"),j.headers.forEach(function(ye,ce){oe.setRequestHeader(ce,ye)}),j.signal&&(j.signal.addEventListener("abort",de),oe.onreadystatechange=function(){4===oe.readyState&&j.signal.removeEventListener("abort",de)}),oe.send(void 0===j._bodyInit?null:j._bodyInit)})}ie.polyfill=!0,S.fetch||(S.fetch=ie,S.Headers=v,S.Request=ue,S.Response=re),_.Headers=v,_.Request=ue,_.Response=re,_.fetch=ie,Object.defineProperty(_,"__esModule",{value:!0})}({})},80915:S=>{"use strict";function A(o){return o instanceof Buffer||o instanceof Date||o instanceof RegExp}function _(o){if(o instanceof Buffer){var c=Buffer.alloc?Buffer.alloc(o.length):new Buffer(o.length);return o.copy(c),c}if(o instanceof Date)return new Date(o.getTime());if(o instanceof RegExp)return new RegExp(o);throw new Error("Unexpected situation")}function E(o){var c=[];return o.forEach(function(d,f){c[f]="object"==typeof d&&null!==d?Array.isArray(d)?E(d):A(d)?_(d):a({},d):d}),c}function R(o,c){return"__proto__"===c?void 0:o[c]}var a=S.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var d,f,o=arguments[0],c=Array.prototype.slice.call(arguments,1);return c.forEach(function(y){"object"!=typeof y||null===y||Array.isArray(y)||Object.keys(y).forEach(function(D){if(f=R(o,D),(d=R(y,D))!==o)return"object"!=typeof d||null===d?void(o[D]=d):Array.isArray(d)?void(o[D]=E(d)):A(d)?void(o[D]=_(d)):"object"!=typeof f||null===f||Array.isArray(f)?void(o[D]=a({},d)):void(o[D]=a(f,d))})}),o}},74694:function(S,A){var _,R;void 0!==(R="function"==typeof(_=function(){"use strict";function o(D,O,U){var X=new XMLHttpRequest;X.open("GET",D),X.responseType="blob",X.onload=function(){y(X.response,O,U)},X.onerror=function(){console.error("could not download file")},X.send()}function c(D){var O=new XMLHttpRequest;O.open("HEAD",D,!1);try{O.send()}catch(U){}return 200<=O.status&&299>=O.status}function d(D){try{D.dispatchEvent(new MouseEvent("click"))}catch(U){var O=document.createEvent("MouseEvents");O.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),D.dispatchEvent(O)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,v=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),y=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!v?function(D,O,U){var X=f.URL||f.webkitURL,H=document.createElement("a");H.download=O=O||D.name||"download",H.rel="noopener","string"==typeof D?(H.href=D,H.origin===location.origin?d(H):c(H.href)?o(D,O,U):d(H,H.target="_blank")):(H.href=X.createObjectURL(D),setTimeout(function(){X.revokeObjectURL(H.href)},4e4),setTimeout(function(){d(H)},0))}:"msSaveOrOpenBlob"in navigator?function(D,O,U){if(O=O||D.name||"download","string"!=typeof D)navigator.msSaveOrOpenBlob(function(D,O){return void 0===O?O={autoBom:!1}:"object"!=typeof O&&(console.warn("Deprecated: Expected third argument to be a object"),O={autoBom:!O}),O.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(D.type)?new Blob(["\ufeff",D],{type:D.type}):D}(D,U),O);else if(c(D))o(D,O,U);else{var X=document.createElement("a");X.href=D,X.target="_blank",setTimeout(function(){d(X)})}}:function(D,O,U,X){if((X=X||open("","_blank"))&&(X.document.title=X.document.body.innerText="downloading..."),"string"==typeof D)return o(D,O,U);var H="application/octet-stream"===D.type,ne=/constructor/i.test(f.HTMLElement)||f.safari,ee=/CriOS\/[\d]+/.test(navigator.userAgent);if((ee||H&&ne||v)&&"undefined"!=typeof FileReader){var J=new FileReader;J.onloadend=function(){var _e=J.result;_e=ee?_e:_e.replace(/^data:[^;]*;/,"data:attachment/file;"),X?X.location.href=_e:location=_e,X=null},J.readAsDataURL(D)}else{var ue=f.URL||f.webkitURL,se=ue.createObjectURL(D);X?X.location=se:location.href=se,X=null,setTimeout(function(){ue.revokeObjectURL(se)},4e4)}});f.saveAs=y.saveAs=y,S.exports=y})?_.apply(A,[]):_)&&(S.exports=R)},51359:S=>{"use strict";var A="Function.prototype.bind called on incompatible ",_=Array.prototype.slice,E=Object.prototype.toString,R="[object Function]";S.exports=function(o){var c=this;if("function"!=typeof c||E.call(c)!==R)throw new TypeError(A+c);for(var f,d=_.call(arguments,1),v=function(){if(this instanceof f){var X=c.apply(this,d.concat(_.call(arguments)));return Object(X)===X?X:this}return c.apply(o,d.concat(_.call(arguments)))},y=Math.max(0,c.length-d.length),D=[],O=0;O<y;O++)D.push("$"+O);if(f=Function("binder","return function ("+D.join(",")+"){ return binder.apply(this,arguments); }")(v),c.prototype){var U=function(){};U.prototype=c.prototype,f.prototype=new U,U.prototype=null}return f}},21857:(S,A,_)=>{"use strict";var E=_(51359);S.exports=Function.prototype.bind||E},93602:(S,A,_)=>{"use strict";var E,R=SyntaxError,a=Function,o=TypeError,c=function(fe){try{return a('"use strict"; return ('+fe+").constructor;")()}catch(Q){}},d=Object.getOwnPropertyDescriptor;if(d)try{d({},"")}catch(fe){d=null}var f=function(){throw new o},v=d?function(){try{return f}catch(fe){try{return d(arguments,"callee").get}catch(Q){return f}}}():f,y=_(33715)(),D=Object.getPrototypeOf||function(fe){return fe.__proto__},O={},U="undefined"==typeof Uint8Array?E:D(Uint8Array),X={"%AggregateError%":"undefined"==typeof AggregateError?E:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?E:ArrayBuffer,"%ArrayIteratorPrototype%":y?D([][Symbol.iterator]()):E,"%AsyncFromSyncIteratorPrototype%":E,"%AsyncFunction%":O,"%AsyncGenerator%":O,"%AsyncGeneratorFunction%":O,"%AsyncIteratorPrototype%":O,"%Atomics%":"undefined"==typeof Atomics?E:Atomics,"%BigInt%":"undefined"==typeof BigInt?E:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?E:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?E:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?E:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?E:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":O,"%Int8Array%":"undefined"==typeof Int8Array?E:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?E:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?E:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y?D(D([][Symbol.iterator]())):E,"%JSON%":"object"==typeof JSON?JSON:E,"%Map%":"undefined"==typeof Map?E:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&y?D((new Map)[Symbol.iterator]()):E,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?E:Promise,"%Proxy%":"undefined"==typeof Proxy?E:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?E:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?E:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&y?D((new Set)[Symbol.iterator]()):E,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?E:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y?D(""[Symbol.iterator]()):E,"%Symbol%":y?Symbol:E,"%SyntaxError%":R,"%ThrowTypeError%":v,"%TypedArray%":U,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?E:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?E:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?E:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?E:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?E:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?E:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?E:WeakSet},H=function fe(Q){var j;if("%AsyncFunction%"===Q)j=c("async function () {}");else if("%GeneratorFunction%"===Q)j=c("function* () {}");else if("%AsyncGeneratorFunction%"===Q)j=c("async function* () {}");else if("%AsyncGenerator%"===Q){var oe=fe("%AsyncGeneratorFunction%");oe&&(j=oe.prototype)}else if("%AsyncIteratorPrototype%"===Q){var de=fe("%AsyncGenerator%");de&&(j=D(de.prototype))}return X[Q]=j,j},ne={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ee=_(21857),J=_(26761),ue=ee.call(Function.call,Array.prototype.concat),se=ee.call(Function.apply,Array.prototype.splice),_e=ee.call(Function.call,String.prototype.replace),re=ee.call(Function.call,String.prototype.slice),q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ie=/\\(\\)?/g,Z=function(Q){var j=re(Q,0,1),oe=re(Q,-1);if("%"===j&&"%"!==oe)throw new R("invalid intrinsic syntax, expected closing `%`");if("%"===oe&&"%"!==j)throw new R("invalid intrinsic syntax, expected opening `%`");var de=[];return _e(Q,q,function(ye,ce,Ce,Be){de[de.length]=Ce?_e(Be,ie,"$1"):ce||ye}),de},G=function(Q,j){var de,oe=Q;if(J(ne,oe)&&(oe="%"+(de=ne[oe])[0]+"%"),J(X,oe)){var ye=X[oe];if(ye===O&&(ye=H(oe)),void 0===ye&&!j)throw new o("intrinsic "+Q+" exists, but is not available. Please file an issue!");return{alias:de,name:oe,value:ye}}throw new R("intrinsic "+Q+" does not exist!")};S.exports=function(Q,j){if("string"!=typeof Q||0===Q.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof j)throw new o('"allowMissing" argument must be a boolean');var oe=Z(Q),de=oe.length>0?oe[0]:"",ye=G("%"+de+"%",j),ce=ye.name,Ce=ye.value,Be=!1,ot=ye.alias;ot&&(de=ot[0],se(oe,ue([0,1],ot)));for(var De=1,Ue=!0;De<oe.length;De+=1){var Xe=oe[De],at=re(Xe,0,1),ut=re(Xe,-1);if(('"'===at||"'"===at||"`"===at||'"'===ut||"'"===ut||"`"===ut)&&at!==ut)throw new R("property names with quotes must have matching quotes");if(("constructor"===Xe||!Ue)&&(Be=!0),J(X,ce="%"+(de+="."+Xe)+"%"))Ce=X[ce];else if(null!=Ce){if(!(Xe in Ce)){if(!j)throw new o("base intrinsic for "+Q+" exists, but the property is not available.");return}if(d&&De+1>=oe.length){var Qe=d(Ce,Xe);Ce=(Ue=!!Qe)&&"get"in Qe&&!("originalValue"in Qe.get)?Qe.get:Ce[Xe]}else Ue=J(Ce,Xe),Ce=Ce[Xe];Ue&&!Be&&(X[ce]=Ce)}}return Ce}},33715:(S,A,_)=>{"use strict";var E="undefined"!=typeof Symbol&&Symbol,R=_(26069);S.exports=function(){return"function"==typeof E&&"function"==typeof Symbol&&"symbol"==typeof E("foo")&&"symbol"==typeof Symbol("bar")&&R()}},26069:S=>{"use strict";S.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var _={},E=Symbol("test"),R=Object(E);if("string"==typeof E||"[object Symbol]"!==Object.prototype.toString.call(E)||"[object Symbol]"!==Object.prototype.toString.call(R))return!1;for(E in _[E]=42,_)return!1;if("function"==typeof Object.keys&&0!==Object.keys(_).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(_).length)return!1;var o=Object.getOwnPropertySymbols(_);if(1!==o.length||o[0]!==E||!Object.prototype.propertyIsEnumerable.call(_,E))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var c=Object.getOwnPropertyDescriptor(_,E);if(42!==c.value||!0!==c.enumerable)return!1}return!0}},26761:(S,A,_)=>{"use strict";var E=_(21857);S.exports=E.call(Function.call,Object.prototype.hasOwnProperty)},19556:S=>{var Ee,_="__lodash_hash_undefined__",E=1/0,c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/,f=/^\./,v=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,D=/\\(\\)?/g,O=/^\[object .+?Constructor\]$/,U="object"==typeof global&&global&&global.Object===Object&&global,X="object"==typeof self&&self&&self.Object===Object&&self,H=U||X||Function("return this")(),J=Array.prototype,ue=Function.prototype,se=Object.prototype,_e=H["__core-js_shared__"],re=(Ee=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||""))?"Symbol(src)_1."+Ee:"",q=ue.toString,ie=se.hasOwnProperty,Z=se.toString,G=RegExp("^"+q.call(ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fe=H.Symbol,Q=J.splice,j=An(H,"Map"),oe=An(Object,"create"),de=fe?fe.prototype:void 0,ye=de?de.toString:void 0;function ce(Ee){var Ve=-1,it=Ee?Ee.length:0;for(this.clear();++Ve<it;){var Ot=Ee[Ve];this.set(Ot[0],Ot[1])}}function Xe(Ee){var Ve=-1,it=Ee?Ee.length:0;for(this.clear();++Ve<it;){var Ot=Ee[Ve];this.set(Ot[0],Ot[1])}}function ln(Ee){var Ve=-1,it=Ee?Ee.length:0;for(this.clear();++Ve<it;){var Ot=Ee[Ve];this.set(Ot[0],Ot[1])}}function Yt(Ee,Ve){for(var it=Ee.length;it--;)if(Sn(Ee[it][0],Ve))return it;return-1}function Ci(Ee,Ve){var it=Ee.__data__;return function(Ee){var Ve=typeof Ee;return"string"==Ve||"number"==Ve||"symbol"==Ve||"boolean"==Ve?"__proto__"!==Ee:null===Ee}(Ve)?it["string"==typeof Ve?"string":"hash"]:it.map}function An(Ee,Ve){var it=function(Ee,Ve){return null==Ee?void 0:Ee[Ve]}(Ee,Ve);return function(Ee){return!(!mt(Ee)||function(Ee){return!!re&&re in Ee}(Ee))&&(function(Ee){var Ve=mt(Ee)?Z.call(Ee):"";return"[object Function]"==Ve||"[object GeneratorFunction]"==Ve}(Ee)||function(Ee){var Ve=!1;if(null!=Ee&&"function"!=typeof Ee.toString)try{Ve=!!(Ee+"")}catch(it){}return Ve}(Ee)?G:O).test(function(Ee){if(null!=Ee){try{return q.call(Ee)}catch(Ve){}try{return Ee+""}catch(Ve){}}return""}(Ee))}(it)?it:void 0}ce.prototype.clear=function(){this.__data__=oe?oe(null):{}},ce.prototype.delete=function(Ee){return this.has(Ee)&&delete this.__data__[Ee]},ce.prototype.get=function(Ee){var Ve=this.__data__;if(oe){var it=Ve[Ee];return it===_?void 0:it}return ie.call(Ve,Ee)?Ve[Ee]:void 0},ce.prototype.has=function(Ee){var Ve=this.__data__;return oe?void 0!==Ve[Ee]:ie.call(Ve,Ee)},ce.prototype.set=function(Ee,Ve){return this.__data__[Ee]=oe&&void 0===Ve?_:Ve,this},Xe.prototype.clear=function(){this.__data__=[]},Xe.prototype.delete=function(Ee){var Ve=this.__data__,it=Yt(Ve,Ee);return!(it<0||(it==Ve.length-1?Ve.pop():Q.call(Ve,it,1),0))},Xe.prototype.get=function(Ee){var Ve=this.__data__,it=Yt(Ve,Ee);return it<0?void 0:Ve[it][1]},Xe.prototype.has=function(Ee){return Yt(this.__data__,Ee)>-1},Xe.prototype.set=function(Ee,Ve){var it=this.__data__,Ot=Yt(it,Ee);return Ot<0?it.push([Ee,Ve]):it[Ot][1]=Ve,this},ln.prototype.clear=function(){this.__data__={hash:new ce,map:new(j||Xe),string:new ce}},ln.prototype.delete=function(Ee){return Ci(this,Ee).delete(Ee)},ln.prototype.get=function(Ee){return Ci(this,Ee).get(Ee)},ln.prototype.has=function(Ee){return Ci(this,Ee).has(Ee)},ln.prototype.set=function(Ee,Ve){return Ci(this,Ee).set(Ee,Ve),this};var Le=qt(function(Ee){Ee=function(Ee){return null==Ee?"":function(Ee){if("string"==typeof Ee)return Ee;if(en(Ee))return ye?ye.call(Ee):"";var Ve=Ee+"";return"0"==Ve&&1/Ee==-E?"-0":Ve}(Ee)}(Ee);var Ve=[];return f.test(Ee)&&Ve.push(""),Ee.replace(v,function(it,Ot,nn,yn){Ve.push(nn?yn.replace(D,"$1"):Ot||it)}),Ve});function vn(Ee){if("string"==typeof Ee||en(Ee))return Ee;var Ve=Ee+"";return"0"==Ve&&1/Ee==-E?"-0":Ve}function qt(Ee,Ve){if("function"!=typeof Ee||Ve&&"function"!=typeof Ve)throw new TypeError("Expected a function");var it=function(){var Ot=arguments,nn=Ve?Ve.apply(this,Ot):Ot[0],yn=it.cache;if(yn.has(nn))return yn.get(nn);var lt=Ee.apply(this,Ot);return it.cache=yn.set(nn,lt),lt};return it.cache=new(qt.Cache||ln),it}function Sn(Ee,Ve){return Ee===Ve||Ee!=Ee&&Ve!=Ve}qt.Cache=ln;var Hn=Array.isArray;function mt(Ee){var Ve=typeof Ee;return!!Ee&&("object"==Ve||"function"==Ve)}function en(Ee){return"symbol"==typeof Ee||function(Ee){return!!Ee&&"object"==typeof Ee}(Ee)&&"[object Symbol]"==Z.call(Ee)}S.exports=function(Ee,Ve,it){var Ot=null==Ee?void 0:function(Ee,Ve){Ve=function(Ee,Ve){if(Hn(Ee))return!1;var it=typeof Ee;return!("number"!=it&&"symbol"!=it&&"boolean"!=it&&null!=Ee&&!en(Ee))||d.test(Ee)||!c.test(Ee)||null!=Ve&&Ee in Object(Ve)}(Ve,Ee)?[Ve]:function(Ee){return Hn(Ee)?Ee:Le(Ee)}(Ve);for(var it=0,Ot=Ve.length;null!=Ee&&it<Ot;)Ee=Ee[vn(Ve[it++])];return it&&it==Ot?Ee:void 0}(Ee,Ve);return void 0===Ot?it:Ot}},78452:(S,A,_)=>{var a=_(87078)(_(37684),"DataView");S.exports=a},17434:(S,A,_)=>{var E=_(1930),R=_(10868),a=_(40640),o=_(22811),c=_(31628);function d(f){var v=-1,y=null==f?0:f.length;for(this.clear();++v<y;){var D=f[v];this.set(D[0],D[1])}}d.prototype.clear=E,d.prototype.delete=R,d.prototype.get=a,d.prototype.has=o,d.prototype.set=c,S.exports=d},60748:(S,A,_)=>{var E=_(56154),R=_(49232),a=_(58847),o=_(64703),c=_(43807);function d(f){var v=-1,y=null==f?0:f.length;for(this.clear();++v<y;){var D=f[v];this.set(D[0],D[1])}}d.prototype.clear=E,d.prototype.delete=R,d.prototype.get=a,d.prototype.has=o,d.prototype.set=c,S.exports=d},15873:(S,A,_)=>{var a=_(87078)(_(37684),"Map");S.exports=a},37718:(S,A,_)=>{var E=_(11521),R=_(83019),a=_(37392),o=_(51062),c=_(35655);function d(f){var v=-1,y=null==f?0:f.length;for(this.clear();++v<y;){var D=f[v];this.set(D[0],D[1])}}d.prototype.clear=E,d.prototype.delete=R,d.prototype.get=a,d.prototype.has=o,d.prototype.set=c,S.exports=d},98680:(S,A,_)=>{var a=_(87078)(_(37684),"Promise");S.exports=a},31415:(S,A,_)=>{var a=_(87078)(_(37684),"Set");S.exports=a},93112:(S,A,_)=>{var E=_(60748),R=_(77219),a=_(68027),o=_(95307),c=_(38127),d=_(18732);function f(v){var y=this.__data__=new E(v);this.size=y.size}f.prototype.clear=R,f.prototype.delete=a,f.prototype.get=o,f.prototype.has=c,f.prototype.set=d,S.exports=f},17135:(S,A,_)=>{var E=_(37684);S.exports=E.Symbol},9456:(S,A,_)=>{var E=_(37684);S.exports=E.Uint8Array},86230:(S,A,_)=>{var a=_(87078)(_(37684),"WeakMap");S.exports=a},57963:S=>{S.exports=function(_,E){for(var R=-1,a=null==_?0:_.length;++R<a&&!1!==E(_[R],R,_););return _}},29736:S=>{S.exports=function(_,E){for(var R=-1,a=null==_?0:_.length,o=0,c=[];++R<a;){var d=_[R];E(d,R,_)&&(c[o++]=d)}return c}},87293:(S,A,_)=>{var E=_(92963),R=_(15034),a=_(81123),o=_(28924),c=_(75398),d=_(39058),v=Object.prototype.hasOwnProperty;S.exports=function(D,O){var U=a(D),X=!U&&R(D),H=!U&&!X&&o(D),ne=!U&&!X&&!H&&d(D),ee=U||X||H||ne,J=ee?E(D.length,String):[],ue=J.length;for(var se in D)(O||v.call(D,se))&&(!ee||!("length"==se||H&&("offset"==se||"parent"==se)||ne&&("buffer"==se||"byteLength"==se||"byteOffset"==se)||c(se,ue)))&&J.push(se);return J}},56041:S=>{S.exports=function(_,E){for(var R=-1,a=null==_?0:_.length,o=Array(a);++R<a;)o[R]=E(_[R],R,_);return o}},33855:S=>{S.exports=function(_,E){for(var R=-1,a=E.length,o=_.length;++R<a;)_[o+R]=E[R];return _}},84805:(S,A,_)=>{var E=_(91649),R=_(43170),o=Object.prototype.hasOwnProperty;S.exports=function(d,f,v){var y=d[f];(!o.call(d,f)||!R(y,v)||void 0===v&&!(f in d))&&E(d,f,v)}},30662:(S,A,_)=>{var E=_(43170);S.exports=function(a,o){for(var c=a.length;c--;)if(E(a[c][0],o))return c;return-1}},43772:(S,A,_)=>{var E=_(45309),R=_(32863);S.exports=function(o,c){return o&&E(c,R(c),o)}},97741:(S,A,_)=>{var E=_(45309),R=_(28640);S.exports=function(o,c){return o&&E(c,R(c),o)}},91649:(S,A,_)=>{var E=_(49923);S.exports=function(a,o,c){"__proto__"==o&&E?E(a,o,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[o]=c}},82482:(S,A,_)=>{var E=_(93112),R=_(57963),a=_(84805),o=_(43772),c=_(97741),d=_(31869),f=_(70119),v=_(4504),y=_(78127),D=_(34024),O=_(16269),U=_(1395),X=_(67019),H=_(88479),ne=_(5291),ee=_(81123),J=_(28924),ue=_(10501),se=_(4471),_e=_(87858),re=_(32863),q=_(28640),fe="[object Arguments]",ye="[object Function]",ot="[object Object]",Ke={};Ke[fe]=Ke["[object Array]"]=Ke["[object ArrayBuffer]"]=Ke["[object DataView]"]=Ke["[object Boolean]"]=Ke["[object Date]"]=Ke["[object Float32Array]"]=Ke["[object Float64Array]"]=Ke["[object Int8Array]"]=Ke["[object Int16Array]"]=Ke["[object Int32Array]"]=Ke["[object Map]"]=Ke["[object Number]"]=Ke[ot]=Ke["[object RegExp]"]=Ke["[object Set]"]=Ke["[object String]"]=Ke["[object Symbol]"]=Ke["[object Uint8Array]"]=Ke["[object Uint8ClampedArray]"]=Ke["[object Uint16Array]"]=Ke["[object Uint32Array]"]=!0,Ke["[object Error]"]=Ke[ye]=Ke["[object WeakMap]"]=!1,S.exports=function Ri(mn,Ci,An,ei,Ni,Ne){var Le,vn=1&Ci,Tn=2&Ci,qt=4&Ci;if(An&&(Le=Ni?An(mn,ei,Ni,Ne):An(mn)),void 0!==Le)return Le;if(!se(mn))return mn;var Sn=ee(mn);if(Sn){if(Le=X(mn),!vn)return f(mn,Le)}else{var Hn=U(mn),ji=Hn==ye||"[object GeneratorFunction]"==Hn;if(J(mn))return d(mn,vn);if(Hn==ot||Hn==fe||ji&&!Ni){if(Le=Tn||ji?{}:ne(mn),!vn)return Tn?y(mn,c(Le,mn)):v(mn,o(Le,mn))}else{if(!Ke[Hn])return Ni?mn:{};Le=H(mn,Hn,vn)}}Ne||(Ne=new E);var mt=Ne.get(mn);if(mt)return mt;Ne.set(mn,Le),_e(mn)?mn.forEach(function(We){Le.add(Ri(We,Ci,An,We,mn,Ne))}):ue(mn)&&mn.forEach(function(We,dt){Le.set(dt,Ri(We,Ci,An,dt,mn,Ne))});var en=Sn?void 0:(qt?Tn?O:D:Tn?q:re)(mn);return R(en||mn,function(We,dt){en&&(We=mn[dt=We]),a(Le,dt,Ri(We,Ci,An,dt,mn,Ne))}),Le}},5563:(S,A,_)=>{var E=_(4471),R=Object.create,a=function(){function o(){}return function(c){if(!E(c))return{};if(R)return R(c);o.prototype=c;var d=new o;return o.prototype=void 0,d}}();S.exports=a},36432:(S,A,_)=>{var E=_(54021),R=_(31017);S.exports=function(o,c){for(var d=0,f=(c=E(c,o)).length;null!=o&&d<f;)o=o[R(c[d++])];return d&&d==f?o:void 0}},82184:(S,A,_)=>{var E=_(33855),R=_(81123);S.exports=function(o,c,d){var f=c(o);return R(o)?f:E(f,d(o))}},77909:(S,A,_)=>{var E=_(17135),R=_(45222),a=_(48097),d=E?E.toStringTag:void 0;S.exports=function(v){return null==v?void 0===v?"[object Undefined]":"[object Null]":d&&d in Object(v)?R(v):a(v)}},43689:(S,A,_)=>{var E=_(77909),R=_(37409);S.exports=function(c){return R(c)&&"[object Arguments]"==E(c)}},80916:(S,A,_)=>{var E=_(1395),R=_(37409);S.exports=function(c){return R(c)&&"[object Map]"==E(c)}},49915:(S,A,_)=>{var E=_(88939),R=_(60862),a=_(4471),o=_(70753),d=/^\[object .+?Constructor\]$/,O=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");S.exports=function(X){return!(!a(X)||R(X))&&(E(X)?O:d).test(o(X))}},15229:(S,A,_)=>{var E=_(1395),R=_(37409);S.exports=function(c){return R(c)&&"[object Set]"==E(c)}},8596:(S,A,_)=>{var E=_(77909),R=_(24282),a=_(37409),j={};j["[object Float32Array]"]=j["[object Float64Array]"]=j["[object Int8Array]"]=j["[object Int16Array]"]=j["[object Int32Array]"]=j["[object Uint8Array]"]=j["[object Uint8ClampedArray]"]=j["[object Uint16Array]"]=j["[object Uint32Array]"]=!0,j["[object Arguments]"]=j["[object Array]"]=j["[object ArrayBuffer]"]=j["[object Boolean]"]=j["[object DataView]"]=j["[object Date]"]=j["[object Error]"]=j["[object Function]"]=j["[object Map]"]=j["[object Number]"]=j["[object Object]"]=j["[object RegExp]"]=j["[object Set]"]=j["[object String]"]=j["[object WeakMap]"]=!1,S.exports=function(de){return a(de)&&R(de.length)&&!!j[E(de)]}},57626:(S,A,_)=>{var E=_(43516),R=_(10863),o=Object.prototype.hasOwnProperty;S.exports=function(d){if(!E(d))return R(d);var f=[];for(var v in Object(d))o.call(d,v)&&"constructor"!=v&&f.push(v);return f}},50899:(S,A,_)=>{var E=_(4471),R=_(43516),a=_(46183),c=Object.prototype.hasOwnProperty;S.exports=function(f){if(!E(f))return a(f);var v=R(f),y=[];for(var D in f)"constructor"==D&&(v||!c.call(f,D))||y.push(D);return y}},92963:S=>{S.exports=function(_,E){for(var R=-1,a=Array(_);++R<_;)a[R]=E(R);return a}},94496:(S,A,_)=>{var E=_(17135),R=_(56041),a=_(81123),o=_(20267),d=E?E.prototype:void 0,f=d?d.toString:void 0;S.exports=function v(y){if("string"==typeof y)return y;if(a(y))return R(y,v)+"";if(o(y))return f?f.call(y):"";var D=y+"";return"0"==D&&1/y==-1/0?"-0":D}},71214:S=>{S.exports=function(_){return function(E){return _(E)}}},54021:(S,A,_)=>{var E=_(81123),R=_(27288),a=_(11796),o=_(45803);S.exports=function(d,f){return E(d)?d:R(d,f)?[d]:a(o(d))}},40056:(S,A,_)=>{var E=_(9456);S.exports=function(a){var o=new a.constructor(a.byteLength);return new E(o).set(new E(a)),o}},31869:(S,A,_)=>{S=_.nmd(S);var E=_(37684),R=A&&!A.nodeType&&A,a=R&&S&&!S.nodeType&&S,c=a&&a.exports===R?E.Buffer:void 0,d=c?c.allocUnsafe:void 0;S.exports=function(v,y){if(y)return v.slice();var D=v.length,O=d?d(D):new v.constructor(D);return v.copy(O),O}},52737:(S,A,_)=>{var E=_(40056);S.exports=function(a,o){var c=o?E(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.byteLength)}},93349:S=>{var A=/\w*$/;S.exports=function(E){var R=new E.constructor(E.source,A.exec(E));return R.lastIndex=E.lastIndex,R}},18740:(S,A,_)=>{var E=_(17135),R=E?E.prototype:void 0,a=R?R.valueOf:void 0;S.exports=function(c){return a?Object(a.call(c)):{}}},73611:(S,A,_)=>{var E=_(40056);S.exports=function(a,o){var c=o?E(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}},70119:S=>{S.exports=function(_,E){var R=-1,a=_.length;for(E||(E=Array(a));++R<a;)E[R]=_[R];return E}},45309:(S,A,_)=>{var E=_(84805),R=_(91649);S.exports=function(o,c,d,f){var v=!d;d||(d={});for(var y=-1,D=c.length;++y<D;){var O=c[y],U=f?f(d[O],o[O],O,d,o):void 0;void 0===U&&(U=o[O]),v?R(d,O,U):E(d,O,U)}return d}},4504:(S,A,_)=>{var E=_(45309),R=_(79976);S.exports=function(o,c){return E(o,R(o),c)}},78127:(S,A,_)=>{var E=_(45309),R=_(60456);S.exports=function(o,c){return E(o,R(o),c)}},39809:(S,A,_)=>{var E=_(37684);S.exports=E["__core-js_shared__"]},49923:(S,A,_)=>{var E=_(87078),R=function(){try{var a=E(Object,"defineProperty");return a({},"",{}),a}catch(o){}}();S.exports=R},76288:S=>{var A="object"==typeof global&&global&&global.Object===Object&&global;S.exports=A},34024:(S,A,_)=>{var E=_(82184),R=_(79976),a=_(32863);S.exports=function(c){return E(c,a,R)}},16269:(S,A,_)=>{var E=_(82184),R=_(60456),a=_(28640);S.exports=function(c){return E(c,a,R)}},26762:(S,A,_)=>{var E=_(5900);S.exports=function(a,o){var c=a.__data__;return E(o)?c["string"==typeof o?"string":"hash"]:c.map}},87078:(S,A,_)=>{var E=_(49915),R=_(63199);S.exports=function(o,c){var d=R(o,c);return E(d)?d:void 0}},23346:(S,A,_)=>{var R=_(24991)(Object.getPrototypeOf,Object);S.exports=R},45222:(S,A,_)=>{var E=_(17135),R=Object.prototype,a=R.hasOwnProperty,o=R.toString,c=E?E.toStringTag:void 0;S.exports=function(f){var v=a.call(f,c),y=f[c];try{f[c]=void 0;var D=!0}catch(U){}var O=o.call(f);return D&&(v?f[c]=y:delete f[c]),O}},79976:(S,A,_)=>{var E=_(29736),R=_(97324),o=Object.prototype.propertyIsEnumerable,c=Object.getOwnPropertySymbols;S.exports=c?function(f){return null==f?[]:(f=Object(f),E(c(f),function(v){return o.call(f,v)}))}:R},60456:(S,A,_)=>{var E=_(33855),R=_(23346),a=_(79976),o=_(97324);S.exports=Object.getOwnPropertySymbols?function(f){for(var v=[];f;)E(v,a(f)),f=R(f);return v}:o},1395:(S,A,_)=>{var E=_(78452),R=_(15873),a=_(98680),o=_(31415),c=_(86230),d=_(77909),f=_(70753),v="[object Map]",D="[object Promise]",O="[object Set]",U="[object WeakMap]",X="[object DataView]",H=f(E),ne=f(R),ee=f(a),J=f(o),ue=f(c),se=d;(E&&se(new E(new ArrayBuffer(1)))!=X||R&&se(new R)!=v||a&&se(a.resolve())!=D||o&&se(new o)!=O||c&&se(new c)!=U)&&(se=function(_e){var re=d(_e),q="[object Object]"==re?_e.constructor:void 0,ie=q?f(q):"";if(ie)switch(ie){case H:return X;case ne:return v;case ee:return D;case J:return O;case ue:return U}return re}),S.exports=se},63199:S=>{S.exports=function(_,E){return null==_?void 0:_[E]}},1930:(S,A,_)=>{var E=_(57279);S.exports=function(){this.__data__=E?E(null):{},this.size=0}},10868:S=>{S.exports=function(_){var E=this.has(_)&&delete this.__data__[_];return this.size-=E?1:0,E}},40640:(S,A,_)=>{var E=_(57279),o=Object.prototype.hasOwnProperty;S.exports=function(d){var f=this.__data__;if(E){var v=f[d];return"__lodash_hash_undefined__"===v?void 0:v}return o.call(f,d)?f[d]:void 0}},22811:(S,A,_)=>{var E=_(57279),a=Object.prototype.hasOwnProperty;S.exports=function(c){var d=this.__data__;return E?void 0!==d[c]:a.call(d,c)}},31628:(S,A,_)=>{var E=_(57279);S.exports=function(o,c){var d=this.__data__;return this.size+=this.has(o)?0:1,d[o]=E&&void 0===c?"__lodash_hash_undefined__":c,this}},67019:S=>{var _=Object.prototype.hasOwnProperty;S.exports=function(R){var a=R.length,o=new R.constructor(a);return a&&"string"==typeof R[0]&&_.call(R,"index")&&(o.index=R.index,o.input=R.input),o}},88479:(S,A,_)=>{var E=_(40056),R=_(52737),a=_(93349),o=_(18740),c=_(73611);S.exports=function(fe,Q,j){var oe=fe.constructor;switch(Q){case"[object ArrayBuffer]":return E(fe);case"[object Boolean]":case"[object Date]":return new oe(+fe);case"[object DataView]":return R(fe,j);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(fe,j);case"[object Map]":return new oe;case"[object Number]":case"[object String]":return new oe(fe);case"[object RegExp]":return a(fe);case"[object Set]":return new oe;case"[object Symbol]":return o(fe)}}},5291:(S,A,_)=>{var E=_(5563),R=_(23346),a=_(43516);S.exports=function(c){return"function"!=typeof c.constructor||a(c)?{}:E(R(c))}},75398:S=>{var _=/^(?:0|[1-9]\d*)$/;S.exports=function(R,a){var o=typeof R;return!!(a=null==a?9007199254740991:a)&&("number"==o||"symbol"!=o&&_.test(R))&&R>-1&&R%1==0&&R<a}},27288:(S,A,_)=>{var E=_(81123),R=_(20267),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;S.exports=function(d,f){if(E(d))return!1;var v=typeof d;return!("number"!=v&&"symbol"!=v&&"boolean"!=v&&null!=d&&!R(d))||o.test(d)||!a.test(d)||null!=f&&d in Object(f)}},5900:S=>{S.exports=function(_){var E=typeof _;return"string"==E||"number"==E||"symbol"==E||"boolean"==E?"__proto__"!==_:null===_}},60862:(S,A,_)=>{var o,E=_(39809),R=(o=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";S.exports=function(o){return!!R&&R in o}},43516:S=>{var A=Object.prototype;S.exports=function(E){var R=E&&E.constructor;return E===("function"==typeof R&&R.prototype||A)}},56154:S=>{S.exports=function(){this.__data__=[],this.size=0}},49232:(S,A,_)=>{var E=_(30662),a=Array.prototype.splice;S.exports=function(c){var d=this.__data__,f=E(d,c);return!(f<0||(f==d.length-1?d.pop():a.call(d,f,1),--this.size,0))}},58847:(S,A,_)=>{var E=_(30662);S.exports=function(a){var o=this.__data__,c=E(o,a);return c<0?void 0:o[c][1]}},64703:(S,A,_)=>{var E=_(30662);S.exports=function(a){return E(this.__data__,a)>-1}},43807:(S,A,_)=>{var E=_(30662);S.exports=function(a,o){var c=this.__data__,d=E(c,a);return d<0?(++this.size,c.push([a,o])):c[d][1]=o,this}},11521:(S,A,_)=>{var E=_(17434),R=_(60748),a=_(15873);S.exports=function(){this.size=0,this.__data__={hash:new E,map:new(a||R),string:new E}}},83019:(S,A,_)=>{var E=_(26762);S.exports=function(a){var o=E(this,a).delete(a);return this.size-=o?1:0,o}},37392:(S,A,_)=>{var E=_(26762);S.exports=function(a){return E(this,a).get(a)}},51062:(S,A,_)=>{var E=_(26762);S.exports=function(a){return E(this,a).has(a)}},35655:(S,A,_)=>{var E=_(26762);S.exports=function(a,o){var c=E(this,a),d=c.size;return c.set(a,o),this.size+=c.size==d?0:1,this}},44170:(S,A,_)=>{var E=_(91407);S.exports=function(o){var c=E(o,function(f){return 500===d.size&&d.clear(),f}),d=c.cache;return c}},57279:(S,A,_)=>{var R=_(87078)(Object,"create");S.exports=R},10863:(S,A,_)=>{var R=_(24991)(Object.keys,Object);S.exports=R},46183:S=>{S.exports=function(_){var E=[];if(null!=_)for(var R in Object(_))E.push(R);return E}},52560:(S,A,_)=>{S=_.nmd(S);var E=_(76288),R=A&&!A.nodeType&&A,a=R&&S&&!S.nodeType&&S,c=a&&a.exports===R&&E.process,d=function(){try{return a&&a.require&&a.require("util").types||c&&c.binding&&c.binding("util")}catch(v){}}();S.exports=d},48097:S=>{var _=Object.prototype.toString;S.exports=function(R){return _.call(R)}},24991:S=>{S.exports=function(_,E){return function(R){return _(E(R))}}},37684:(S,A,_)=>{var E=_(76288),R="object"==typeof self&&self&&self.Object===Object&&self,a=E||R||Function("return this")();S.exports=a},77219:(S,A,_)=>{var E=_(60748);S.exports=function(){this.__data__=new E,this.size=0}},68027:S=>{S.exports=function(_){var E=this.__data__,R=E.delete(_);return this.size=E.size,R}},95307:S=>{S.exports=function(_){return this.__data__.get(_)}},38127:S=>{S.exports=function(_){return this.__data__.has(_)}},18732:(S,A,_)=>{var E=_(60748),R=_(15873),a=_(37718);S.exports=function(d,f){var v=this.__data__;if(v instanceof E){var y=v.__data__;if(!R||y.length<199)return y.push([d,f]),this.size=++v.size,this;v=this.__data__=new a(y)}return v.set(d,f),this.size=v.size,this}},11796:(S,A,_)=>{var E=_(44170),R=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=E(function(c){var d=[];return 46===c.charCodeAt(0)&&d.push(""),c.replace(R,function(f,v,y,D){d.push(y?D.replace(a,"$1"):v||f)}),d});S.exports=o},31017:(S,A,_)=>{var E=_(20267);S.exports=function(o){if("string"==typeof o||E(o))return o;var c=o+"";return"0"==c&&1/o==-1/0?"-0":c}},70753:S=>{var _=Function.prototype.toString;S.exports=function(R){if(null!=R){try{return _.call(R)}catch(a){}try{return R+""}catch(a){}}return""}},57469:(S,A,_)=>{var E=_(82482);S.exports=function(c){return E(c,5)}},43170:S=>{S.exports=function(_,E){return _===E||_!=_&&E!=E}},17410:(S,A,_)=>{var E=_(36432);S.exports=function(a,o,c){var d=null==a?void 0:E(a,o);return void 0===d?c:d}},15034:(S,A,_)=>{var E=_(43689),R=_(37409),a=Object.prototype,o=a.hasOwnProperty,c=a.propertyIsEnumerable,d=E(function(){return arguments}())?E:function(f){return R(f)&&o.call(f,"callee")&&!c.call(f,"callee")};S.exports=d},81123:S=>{S.exports=Array.isArray},59809:(S,A,_)=>{var E=_(88939),R=_(24282);S.exports=function(o){return null!=o&&R(o.length)&&!E(o)}},28924:(S,A,_)=>{S=_.nmd(S);var E=_(37684),R=_(45801),a=A&&!A.nodeType&&A,o=a&&S&&!S.nodeType&&S,d=o&&o.exports===a?E.Buffer:void 0;S.exports=(d?d.isBuffer:void 0)||R},85191:(S,A,_)=>{var E=_(57626),R=_(1395),a=_(15034),o=_(81123),c=_(59809),d=_(28924),f=_(43516),v=_(39058),U=Object.prototype.hasOwnProperty;S.exports=function(H){if(null==H)return!0;if(c(H)&&(o(H)||"string"==typeof H||"function"==typeof H.splice||d(H)||v(H)||a(H)))return!H.length;var ne=R(H);if("[object Map]"==ne||"[object Set]"==ne)return!H.size;if(f(H))return!E(H).length;for(var ee in H)if(U.call(H,ee))return!1;return!0}},88939:(S,A,_)=>{var E=_(77909),R=_(4471);S.exports=function(v){if(!R(v))return!1;var y=E(v);return"[object Function]"==y||"[object GeneratorFunction]"==y||"[object AsyncFunction]"==y||"[object Proxy]"==y}},24282:S=>{S.exports=function(E){return"number"==typeof E&&E>-1&&E%1==0&&E<=9007199254740991}},10501:(S,A,_)=>{var E=_(80916),R=_(71214),a=_(52560),o=a&&a.isMap,c=o?R(o):E;S.exports=c},4471:S=>{S.exports=function(_){var E=typeof _;return null!=_&&("object"==E||"function"==E)}},37409:S=>{S.exports=function(_){return null!=_&&"object"==typeof _}},64994:(S,A,_)=>{var E=_(77909),R=_(23346),a=_(37409),f=Function.prototype.toString,v=Object.prototype.hasOwnProperty,y=f.call(Object);S.exports=function(O){if(!a(O)||"[object Object]"!=E(O))return!1;var U=R(O);if(null===U)return!0;var X=v.call(U,"constructor")&&U.constructor;return"function"==typeof X&&X instanceof X&&f.call(X)==y}},87858:(S,A,_)=>{var E=_(15229),R=_(71214),a=_(52560),o=a&&a.isSet,c=o?R(o):E;S.exports=c},20267:(S,A,_)=>{var E=_(77909),R=_(37409);S.exports=function(c){return"symbol"==typeof c||R(c)&&"[object Symbol]"==E(c)}},39058:(S,A,_)=>{var E=_(8596),R=_(71214),a=_(52560),o=a&&a.isTypedArray,c=o?R(o):E;S.exports=c},32863:(S,A,_)=>{var E=_(87293),R=_(57626),a=_(59809);S.exports=function(c){return a(c)?E(c):R(c)}},28640:(S,A,_)=>{var E=_(87293),R=_(50899),a=_(59809);S.exports=function(c){return a(c)?E(c,!0):R(c)}},91407:(S,A,_)=>{var E=_(37718);function a(o,c){if("function"!=typeof o||null!=c&&"function"!=typeof c)throw new TypeError("Expected a function");var d=function(){var f=arguments,v=c?c.apply(this,f):f[0],y=d.cache;if(y.has(v))return y.get(v);var D=o.apply(this,f);return d.cache=y.set(v,D)||y,D};return d.cache=new(a.Cache||E),d}a.Cache=E,S.exports=a},97324:S=>{S.exports=function(){return[]}},45801:S=>{S.exports=function(){return!1}},45803:(S,A,_)=>{var E=_(94496);S.exports=function(a){return null==a?"":E(a)}},94292:(S,A,_)=>{var E="function"==typeof Map&&Map.prototype,R=Object.getOwnPropertyDescriptor&&E?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,a=E&&R&&"function"==typeof R.get?R.get:null,o=E&&Map.prototype.forEach,c="function"==typeof Set&&Set.prototype,d=Object.getOwnPropertyDescriptor&&c?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,f=c&&d&&"function"==typeof d.get?d.get:null,v=c&&Set.prototype.forEach,D="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,U="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,H="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,ne=Boolean.prototype.valueOf,ee=Object.prototype.toString,J=Function.prototype.toString,ue=String.prototype.match,se="function"==typeof BigInt?BigInt.prototype.valueOf:null,_e=Object.getOwnPropertySymbols,re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,q="function"==typeof Symbol&&"object"==typeof Symbol.iterator,ie=Object.prototype.propertyIsEnumerable,Z=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ne){return Ne.__proto__}:null),G=_(96553).custom,fe=G&&Ue(G)?G:null,Q="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function j(Ne,Le,vn){var Tn="double"===(vn.quoteStyle||Le)?'"':"'";return Tn+Ne+Tn}function oe(Ne){return String(Ne).replace(/"/g,"&quot;")}function de(Ne){return!("[object Array]"!==Qe(Ne)||Q&&"object"==typeof Ne&&Q in Ne)}function Ue(Ne){if(q)return Ne&&"object"==typeof Ne&&Ne instanceof Symbol;if("symbol"==typeof Ne)return!0;if(!Ne||"object"!=typeof Ne||!re)return!1;try{return re.call(Ne),!0}catch(Le){}return!1}S.exports=function Ne(Le,vn,Tn,qt){var Sn=vn||{};if(ut(Sn,"quoteStyle")&&"single"!==Sn.quoteStyle&&"double"!==Sn.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ut(Sn,"maxStringLength")&&("number"==typeof Sn.maxStringLength?Sn.maxStringLength<0&&Sn.maxStringLength!==1/0:null!==Sn.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Hn=!ut(Sn,"customInspect")||Sn.customInspect;if("boolean"!=typeof Hn&&"symbol"!==Hn)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ut(Sn,"indent")&&null!==Sn.indent&&"\t"!==Sn.indent&&!(parseInt(Sn.indent,10)===Sn.indent&&Sn.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===Le)return"undefined";if(null===Le)return"null";if("boolean"==typeof Le)return Le?"true":"false";if("string"==typeof Le)return Yt(Le,Sn);if("number"==typeof Le)return 0===Le?1/0/Le>0?"0":"-0":String(Le);if("bigint"==typeof Le)return String(Le)+"n";var ji=void 0===Sn.depth?5:Sn.depth;if(void 0===Tn&&(Tn=0),Tn>=ji&&ji>0&&"object"==typeof Le)return de(Le)?"[Array]":"[Object]";var mt=function(Ne,Le){var vn;if("\t"===Ne.indent)vn="\t";else{if(!("number"==typeof Ne.indent&&Ne.indent>0))return null;vn=Array(Ne.indent+1).join(" ")}return{base:vn,prev:Array(Le+1).join(vn)}}(Sn,Tn);if(void 0===qt)qt=[];else if(Wt(qt,Le)>=0)return"[Circular]";function Dt(Wr,tc,Oa){if(tc&&(qt=qt.slice()).push(tc),Oa){var hn={depth:Sn.depth};return ut(Sn,"quoteStyle")&&(hn.quoteStyle=Sn.quoteStyle),Ne(Wr,hn,Tn+1,qt)}return Ne(Wr,Sn,Tn+1,qt)}if("function"==typeof Le){var en=function(Ne){if(Ne.name)return Ne.name;var Le=ue.call(J.call(Ne),/^function\s*([\w$]+)/);return Le?Le[1]:null}(Le),We=Ni(Le,Dt);return"[Function"+(en?": "+en:" (anonymous)")+"]"+(We.length>0?" { "+We.join(", ")+" }":"")}if(Ue(Le)){var dt=q?String(Le).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):re.call(Le);return"object"!=typeof Le||q?dt:Ke(dt)}if(function(Ne){return!(!Ne||"object"!=typeof Ne)&&("undefined"!=typeof HTMLElement&&Ne instanceof HTMLElement||"string"==typeof Ne.nodeName&&"function"==typeof Ne.getAttribute)}(Le)){for(var Ee="<"+String(Le.nodeName).toLowerCase(),Ve=Le.attributes||[],it=0;it<Ve.length;it++)Ee+=" "+Ve[it].name+"="+j(oe(Ve[it].value),"double",Sn);return Ee+=">",Le.childNodes&&Le.childNodes.length&&(Ee+="..."),Ee+"</"+String(Le.nodeName).toLowerCase()+">"}if(de(Le)){if(0===Le.length)return"[]";var Ot=Ni(Le,Dt);return mt&&!function(Ne){for(var Le=0;Le<Ne.length;Le++)if(Wt(Ne[Le],"\n")>=0)return!1;return!0}(Ot)?"["+ei(Ot,mt)+"]":"[ "+Ot.join(", ")+" ]"}if(function(Ne){return!("[object Error]"!==Qe(Ne)||Q&&"object"==typeof Ne&&Q in Ne)}(Le)){var nn=Ni(Le,Dt);return 0===nn.length?"["+String(Le)+"]":"{ ["+String(Le)+"] "+nn.join(", ")+" }"}if("object"==typeof Le&&Hn){if(fe&&"function"==typeof Le[fe])return Le[fe]();if("symbol"!==Hn&&"function"==typeof Le.inspect)return Le.inspect()}if(function(Ne){if(!a||!Ne||"object"!=typeof Ne)return!1;try{a.call(Ne);try{f.call(Ne)}catch(Le){return!0}return Ne instanceof Map}catch(Le){}return!1}(Le)){var yn=[];return o.call(Le,function(Wr,tc){yn.push(Dt(tc,Le,!0)+" => "+Dt(Wr,Le))}),mn("Map",a.call(Le),yn,mt)}if(function(Ne){if(!f||!Ne||"object"!=typeof Ne)return!1;try{f.call(Ne);try{a.call(Ne)}catch(Le){return!0}return Ne instanceof Set}catch(Le){}return!1}(Le)){var lt=[];return v.call(Le,function(Wr){lt.push(Dt(Wr,Le))}),mn("Set",f.call(Le),lt,mt)}if(function(Ne){if(!D||!Ne||"object"!=typeof Ne)return!1;try{D.call(Ne,D);try{U.call(Ne,U)}catch(Le){return!0}return Ne instanceof WeakMap}catch(Le){}return!1}(Le))return Ri("WeakMap");if(function(Ne){if(!U||!Ne||"object"!=typeof Ne)return!1;try{U.call(Ne,U);try{D.call(Ne,D)}catch(Le){return!0}return Ne instanceof WeakSet}catch(Le){}return!1}(Le))return Ri("WeakSet");if(function(Ne){if(!H||!Ne||"object"!=typeof Ne)return!1;try{return H.call(Ne),!0}catch(Le){}return!1}(Le))return Ri("WeakRef");if(function(Ne){return!("[object Number]"!==Qe(Ne)||Q&&"object"==typeof Ne&&Q in Ne)}(Le))return Ke(Dt(Number(Le)));if(function(Ne){if(!Ne||"object"!=typeof Ne||!se)return!1;try{return se.call(Ne),!0}catch(Le){}return!1}(Le))return Ke(Dt(se.call(Le)));if(function(Ne){return!("[object Boolean]"!==Qe(Ne)||Q&&"object"==typeof Ne&&Q in Ne)}(Le))return Ke(ne.call(Le));if(function(Ne){return!("[object String]"!==Qe(Ne)||Q&&"object"==typeof Ne&&Q in Ne)}(Le))return Ke(Dt(String(Le)));if(!function(Ne){return!("[object Date]"!==Qe(Ne)||Q&&"object"==typeof Ne&&Q in Ne)}(Le)&&!function(Ne){return!("[object RegExp]"!==Qe(Ne)||Q&&"object"==typeof Ne&&Q in Ne)}(Le)){var dn=Ni(Le,Dt),wn=Z?Z(Le)===Object.prototype:Le instanceof Object||Le.constructor===Object,wt=Le instanceof Object?"":"null prototype",kt=!wn&&Q&&Object(Le)===Le&&Q in Le?Qe(Le).slice(8,-1):wt?"Object":"",Ei=(wn||"function"!=typeof Le.constructor?"":Le.constructor.name?Le.constructor.name+" ":"")+(kt||wt?"["+[].concat(kt||[],wt||[]).join(": ")+"] ":"");return 0===dn.length?Ei+"{}":mt?Ei+"{"+ei(dn,mt)+"}":Ei+"{ "+dn.join(", ")+" }"}return String(Le)};var at=Object.prototype.hasOwnProperty||function(Ne){return Ne in this};function ut(Ne,Le){return at.call(Ne,Le)}function Qe(Ne){return ee.call(Ne)}function Wt(Ne,Le){if(Ne.indexOf)return Ne.indexOf(Le);for(var vn=0,Tn=Ne.length;vn<Tn;vn++)if(Ne[vn]===Le)return vn;return-1}function Yt(Ne,Le){if(Ne.length>Le.maxStringLength){var vn=Ne.length-Le.maxStringLength,Tn="... "+vn+" more character"+(vn>1?"s":"");return Yt(Ne.slice(0,Le.maxStringLength),Le)+Tn}return j(Ne.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,Dn),"single",Le)}function Dn(Ne){var Le=Ne.charCodeAt(0),vn={8:"b",9:"t",10:"n",12:"f",13:"r"}[Le];return vn?"\\"+vn:"\\x"+(Le<16?"0":"")+Le.toString(16).toUpperCase()}function Ke(Ne){return"Object("+Ne+")"}function Ri(Ne){return Ne+" { ? }"}function mn(Ne,Le,vn,Tn){return Ne+" ("+Le+") {"+(Tn?ei(vn,Tn):vn.join(", "))+"}"}function ei(Ne,Le){if(0===Ne.length)return"";var vn="\n"+Le.prev+Le.base;return vn+Ne.join(","+vn)+"\n"+Le.prev}function Ni(Ne,Le){var vn=de(Ne),Tn=[];if(vn){Tn.length=Ne.length;for(var qt=0;qt<Ne.length;qt++)Tn[qt]=ut(Ne,qt)?Le(Ne[qt],Ne):""}var Hn,Sn="function"==typeof _e?_e(Ne):[];if(q){Hn={};for(var ji=0;ji<Sn.length;ji++)Hn["$"+Sn[ji]]=Sn[ji]}for(var mt in Ne)!ut(Ne,mt)||vn&&String(Number(mt))===mt&&mt<Ne.length||q&&Hn["$"+mt]instanceof Symbol||(/[^\w$]/.test(mt)?Tn.push(Le(mt,Ne)+": "+Le(Ne[mt],Ne)):Tn.push(mt+": "+Le(Ne[mt],Ne)));if("function"==typeof _e)for(var Dt=0;Dt<Sn.length;Dt++)ie.call(Ne,Sn[Dt])&&Tn.push("["+Le(Sn[Dt])+"]: "+Le(Ne[Sn[Dt]],Ne));return Tn}},74946:S=>{"use strict";function A(_,E){return Object.prototype.hasOwnProperty.call(_,E)}S.exports=function(_,E,R,a){R=R||"=";var o={};if("string"!=typeof _||0===_.length)return o;var c=/\+/g;_=_.split(E=E||"&");var d=1e3;a&&"number"==typeof a.maxKeys&&(d=a.maxKeys);var f=_.length;d>0&&f>d&&(f=d);for(var v=0;v<f;++v){var O,U,X,H,y=_[v].replace(c,"%20"),D=y.indexOf(R);D>=0?(O=y.substr(0,D),U=y.substr(D+1)):(O=y,U=""),X=decodeURIComponent(O),H=decodeURIComponent(U),A(o,X)?Array.isArray(o[X])?o[X].push(H):o[X]=[o[X],H]:o[X]=H}return o}},83392:S=>{"use strict";var A=function(_){switch(typeof _){case"string":return _;case"boolean":return _?"true":"false";case"number":return isFinite(_)?_:"";default:return""}};S.exports=function(_,E,R,a){return E=E||"&",R=R||"=",null===_&&(_=void 0),"object"==typeof _?Object.keys(_).map(function(o){var c=encodeURIComponent(A(o))+R;return Array.isArray(_[o])?_[o].map(function(d){return c+encodeURIComponent(A(d))}).join(E):c+encodeURIComponent(A(_[o]))}).join(E):a?encodeURIComponent(A(a))+R+encodeURIComponent(A(_)):""}},1521:(S,A,_)=>{"use strict";A.decode=A.parse=_(74946),A.encode=A.stringify=_(83392)},32518:S=>{var A=function(_){"use strict";var a,E=Object.prototype,R=E.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",d=o.asyncIterator||"@@asyncIterator",f=o.toStringTag||"@@toStringTag";function v(ce,Ce,Be){return Object.defineProperty(ce,Ce,{value:Be,enumerable:!0,configurable:!0,writable:!0}),ce[Ce]}try{v({},"")}catch(ce){v=function(Ce,Be,ot){return Ce[Be]=ot}}function y(ce,Ce,Be,ot){var Ue=Object.create((Ce&&Ce.prototype instanceof ee?Ce:ee).prototype),Xe=new oe(ot||[]);return Ue._invoke=function(ce,Ce,Be){var ot=O;return function(Ue,Xe){if(ot===X)throw new Error("Generator is already running");if(ot===H){if("throw"===Ue)throw Xe;return ye()}for(Be.method=Ue,Be.arg=Xe;;){var at=Be.delegate;if(at){var ut=fe(at,Be);if(ut){if(ut===ne)continue;return ut}}if("next"===Be.method)Be.sent=Be._sent=Be.arg;else if("throw"===Be.method){if(ot===O)throw ot=H,Be.arg;Be.dispatchException(Be.arg)}else"return"===Be.method&&Be.abrupt("return",Be.arg);ot=X;var Qe=D(ce,Ce,Be);if("normal"===Qe.type){if(ot=Be.done?H:U,Qe.arg===ne)continue;return{value:Qe.arg,done:Be.done}}"throw"===Qe.type&&(ot=H,Be.method="throw",Be.arg=Qe.arg)}}}(ce,Be,Xe),Ue}function D(ce,Ce,Be){try{return{type:"normal",arg:ce.call(Ce,Be)}}catch(ot){return{type:"throw",arg:ot}}}_.wrap=y;var O="suspendedStart",U="suspendedYield",X="executing",H="completed",ne={};function ee(){}function J(){}function ue(){}var se={};v(se,c,function(){return this});var _e=Object.getPrototypeOf,re=_e&&_e(_e(de([])));re&&re!==E&&R.call(re,c)&&(se=re);var q=ue.prototype=ee.prototype=Object.create(se);function ie(ce){["next","throw","return"].forEach(function(Ce){v(ce,Ce,function(Be){return this._invoke(Ce,Be)})})}function Z(ce,Ce){function Be(Ue,Xe,at,ut){var Qe=D(ce[Ue],ce,Xe);if("throw"!==Qe.type){var Ft=Qe.arg,Wt=Ft.value;return Wt&&"object"==typeof Wt&&R.call(Wt,"__await")?Ce.resolve(Wt.__await).then(function(ln){Be("next",ln,at,ut)},function(ln){Be("throw",ln,at,ut)}):Ce.resolve(Wt).then(function(ln){Ft.value=ln,at(Ft)},function(ln){return Be("throw",ln,at,ut)})}ut(Qe.arg)}var ot;this._invoke=function(Ue,Xe){function at(){return new Ce(function(ut,Qe){Be(Ue,Xe,ut,Qe)})}return ot=ot?ot.then(at,at):at()}}function fe(ce,Ce){var Be=ce.iterator[Ce.method];if(Be===a){if(Ce.delegate=null,"throw"===Ce.method){if(ce.iterator.return&&(Ce.method="return",Ce.arg=a,fe(ce,Ce),"throw"===Ce.method))return ne;Ce.method="throw",Ce.arg=new TypeError("The iterator does not provide a 'throw' method")}return ne}var ot=D(Be,ce.iterator,Ce.arg);if("throw"===ot.type)return Ce.method="throw",Ce.arg=ot.arg,Ce.delegate=null,ne;var De=ot.arg;return De?De.done?(Ce[ce.resultName]=De.value,Ce.next=ce.nextLoc,"return"!==Ce.method&&(Ce.method="next",Ce.arg=a),Ce.delegate=null,ne):De:(Ce.method="throw",Ce.arg=new TypeError("iterator result is not an object"),Ce.delegate=null,ne)}function Q(ce){var Ce={tryLoc:ce[0]};1 in ce&&(Ce.catchLoc=ce[1]),2 in ce&&(Ce.finallyLoc=ce[2],Ce.afterLoc=ce[3]),this.tryEntries.push(Ce)}function j(ce){var Ce=ce.completion||{};Ce.type="normal",delete Ce.arg,ce.completion=Ce}function oe(ce){this.tryEntries=[{tryLoc:"root"}],ce.forEach(Q,this),this.reset(!0)}function de(ce){if(ce){var Ce=ce[c];if(Ce)return Ce.call(ce);if("function"==typeof ce.next)return ce;if(!isNaN(ce.length)){var Be=-1,ot=function De(){for(;++Be<ce.length;)if(R.call(ce,Be))return De.value=ce[Be],De.done=!1,De;return De.value=a,De.done=!0,De};return ot.next=ot}}return{next:ye}}function ye(){return{value:a,done:!0}}return J.prototype=ue,v(q,"constructor",ue),v(ue,"constructor",J),J.displayName=v(ue,f,"GeneratorFunction"),_.isGeneratorFunction=function(ce){var Ce="function"==typeof ce&&ce.constructor;return!!Ce&&(Ce===J||"GeneratorFunction"===(Ce.displayName||Ce.name))},_.mark=function(ce){return Object.setPrototypeOf?Object.setPrototypeOf(ce,ue):(ce.__proto__=ue,v(ce,f,"GeneratorFunction")),ce.prototype=Object.create(q),ce},_.awrap=function(ce){return{__await:ce}},ie(Z.prototype),v(Z.prototype,d,function(){return this}),_.AsyncIterator=Z,_.async=function(ce,Ce,Be,ot,De){void 0===De&&(De=Promise);var Ue=new Z(y(ce,Ce,Be,ot),De);return _.isGeneratorFunction(Ce)?Ue:Ue.next().then(function(Xe){return Xe.done?Xe.value:Ue.next()})},ie(q),v(q,f,"Generator"),v(q,c,function(){return this}),v(q,"toString",function(){return"[object Generator]"}),_.keys=function(ce){var Ce=[];for(var Be in ce)Ce.push(Be);return Ce.reverse(),function ot(){for(;Ce.length;){var De=Ce.pop();if(De in ce)return ot.value=De,ot.done=!1,ot}return ot.done=!0,ot}},_.values=de,oe.prototype={constructor:oe,reset:function(ce){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(j),!ce)for(var Ce in this)"t"===Ce.charAt(0)&&R.call(this,Ce)&&!isNaN(+Ce.slice(1))&&(this[Ce]=a)},stop:function(){this.done=!0;var Ce=this.tryEntries[0].completion;if("throw"===Ce.type)throw Ce.arg;return this.rval},dispatchException:function(ce){if(this.done)throw ce;var Ce=this;function Be(ut,Qe){return Ue.type="throw",Ue.arg=ce,Ce.next=ut,Qe&&(Ce.method="next",Ce.arg=a),!!Qe}for(var ot=this.tryEntries.length-1;ot>=0;--ot){var De=this.tryEntries[ot],Ue=De.completion;if("root"===De.tryLoc)return Be("end");if(De.tryLoc<=this.prev){var Xe=R.call(De,"catchLoc"),at=R.call(De,"finallyLoc");if(Xe&&at){if(this.prev<De.catchLoc)return Be(De.catchLoc,!0);if(this.prev<De.finallyLoc)return Be(De.finallyLoc)}else if(Xe){if(this.prev<De.catchLoc)return Be(De.catchLoc,!0)}else{if(!at)throw new Error("try statement without catch or finally");if(this.prev<De.finallyLoc)return Be(De.finallyLoc)}}}},abrupt:function(ce,Ce){for(var Be=this.tryEntries.length-1;Be>=0;--Be){var ot=this.tryEntries[Be];if(ot.tryLoc<=this.prev&&R.call(ot,"finallyLoc")&&this.prev<ot.finallyLoc){var De=ot;break}}De&&("break"===ce||"continue"===ce)&&De.tryLoc<=Ce&&Ce<=De.finallyLoc&&(De=null);var Ue=De?De.completion:{};return Ue.type=ce,Ue.arg=Ce,De?(this.method="next",this.next=De.finallyLoc,ne):this.complete(Ue)},complete:function(ce,Ce){if("throw"===ce.type)throw ce.arg;return"break"===ce.type||"continue"===ce.type?this.next=ce.arg:"return"===ce.type?(this.rval=this.arg=ce.arg,this.method="return",this.next="end"):"normal"===ce.type&&Ce&&(this.next=Ce),ne},finish:function(ce){for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var Be=this.tryEntries[Ce];if(Be.finallyLoc===ce)return this.complete(Be.completion,Be.afterLoc),j(Be),ne}},catch:function(ce){for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var Be=this.tryEntries[Ce];if(Be.tryLoc===ce){var ot=Be.completion;if("throw"===ot.type){var De=ot.arg;j(Be)}return De}}throw new Error("illegal catch attempt")},delegateYield:function(ce,Ce,Be){return this.delegate={iterator:de(ce),resultName:Ce,nextLoc:Be},"next"===this.method&&(this.arg=a),ne}},_}(S.exports);try{regeneratorRuntime=A}catch(_){"object"==typeof globalThis?globalThis.regeneratorRuntime=A:Function("r","regeneratorRuntime = r")(A)}},73340:(S,A,_)=>{"use strict";var E=_(93602),R=_(29448),a=_(94292),o=E("%TypeError%"),c=E("%WeakMap%",!0),d=E("%Map%",!0),f=R("WeakMap.prototype.get",!0),v=R("WeakMap.prototype.set",!0),y=R("WeakMap.prototype.has",!0),D=R("Map.prototype.get",!0),O=R("Map.prototype.set",!0),U=R("Map.prototype.has",!0),X=function(J,ue){for(var _e,se=J;null!==(_e=se.next);se=_e)if(_e.key===ue)return se.next=_e.next,_e.next=J.next,J.next=_e,_e};S.exports=function(){var ue,se,_e,re={assert:function(q){if(!re.has(q))throw new o("Side channel does not contain "+a(q))},get:function(q){if(c&&q&&("object"==typeof q||"function"==typeof q)){if(ue)return f(ue,q)}else if(d){if(se)return D(se,q)}else if(_e)return function(J,ue){var se=X(J,ue);return se&&se.value}(_e,q)},has:function(q){if(c&&q&&("object"==typeof q||"function"==typeof q)){if(ue)return y(ue,q)}else if(d){if(se)return U(se,q)}else if(_e)return function(J,ue){return!!X(J,ue)}(_e,q);return!1},set:function(q,ie){c&&q&&("object"==typeof q||"function"==typeof q)?(ue||(ue=new c),v(ue,q,ie)):d?(se||(se=new d),O(se,q,ie)):(_e||(_e={key:{},next:null}),function(J,ue,se){var _e=X(J,ue);_e?_e.value=se:J.next={key:ue,next:J.next,value:se}}(_e,q,ie))}};return re}},14087:(S,A,_)=>{"use strict";_.r(A),_.d(A,{default:()=>ZE,helpers:()=>vi});var E={};_.r(E),_.d(E,{JsonPatchError:()=>Zi,_areEquals:()=>Al,applyOperation:()=>Yr,applyPatch:()=>Ro,applyReducer:()=>Ug,deepClone:()=>Fp,getValueByPointer:()=>za,validate:()=>wc,validator:()=>Il});var R={};_.r(R),_.d(R,{compare:()=>kl,generate:()=>Qs,observe:()=>Bp,unobserve:()=>rh});var a={};_.r(a),_.d(a,{cookie:()=>fh,header:()=>ha,path:()=>JE,query:()=>ph});var o=_(23005),c=_(12988),d=_(66360),f=_(18753),v=_(71094),y=_(90343),D=_(84916),O=_(31946);function U(m,T,M){return T in m?O(m,T,{value:M,enumerable:!0,configurable:!0,writable:!0}):m[T]=M,m}function X(m,T){var M=o(m);if(c){var I=c(m);T&&(I=d(I).call(I,function(P){return f(m,P).enumerable})),M.push.apply(M,I)}return M}function H(m){for(var T=1;T<arguments.length;T++){var I,M=null!=arguments[T]?arguments[T]:{};if(T%2)v(I=X(Object(M),!0)).call(I,function(z){U(m,z,M[z])});else if(y)D(m,y(M));else{var P;v(P=X(Object(M))).call(P,function(z){O(m,z,f(M,z))})}}return m}var ne=_(53130),ee=_.n(ne),J=_(38330),ue=_.n(J),se=_(77526),_e=_(93449),re=_(57272),q=_(57124),ie=_(19898),Z=_(97326);function G(m,T){(null==T||T>m.length)&&(T=m.length);for(var M=0,I=new Array(T);M<T;M++)I[M]=m[M];return I}function fe(m,T){var M;if(m){if("string"==typeof m)return G(m,T);var I=ie(M=Object.prototype.toString.call(m)).call(M,8,-1);if("Object"===I&&m.constructor&&(I=m.constructor.name),"Map"===I||"Set"===I)return Z(m);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return G(m,T)}}function Q(m,T){var M=void 0!==_e&&re(m)||m["@@iterator"];if(!M){if(q(m)||(M=fe(m))||T&&m&&"number"==typeof m.length){M&&(m=M);var I=0,P=function(){};return{s:P,n:function(){return I>=m.length?{done:!0}:{done:!1,value:m[I++]}},e:function(he){throw he},f:P}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var K,z=!0,W=!1;return{s:function(){M=M.call(m)},n:function(){var he=M.next();return z=he.done,he},e:function(he){W=!0,K=he},f:function(){try{!z&&null!=M.return&&M.return()}finally{if(W)throw K}}}}var j=_(3599);function oe(m){return(oe="function"==typeof _e&&"symbol"==typeof j?function(M){return typeof M}:function(M){return M&&"function"==typeof _e&&M.constructor===_e&&M!==_e.prototype?"symbol":typeof M})(m)}function Ce(m,T){return function(m){if(q(m))return m}(m)||function(m,T){var M=null==m?null:void 0!==_e&&re(m)||m["@@iterator"];if(null!=M){var W,K,I=[],P=!0,z=!1;try{for(M=M.call(m);!(P=(W=M.next()).done)&&(I.push(W.value),!T||I.length!==T);P=!0);}catch(le){z=!0,K=le}finally{try{!P&&null!=M.return&&M.return()}finally{if(z)throw K}}return I}}(m,T)||fe(m,T)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Be=_(26394);function ot(m,T,M,I,P,z,W){try{var K=m[z](W),le=K.value}catch(he){return void M(he)}K.done?T(le):Be.resolve(le).then(I,P)}function De(m){return function(){var T=this,M=arguments;return new Be(function(I,P){var z=m.apply(T,M);function W(le){ot(z,I,P,W,K,"next",le)}function K(le){ot(z,I,P,W,K,"throw",le)}W(void 0)})}}var Ue=_(39126),Xe=_.n(Ue),at=_(11761),ut=_.n(at),Qe=_(20272),Ft=_.n(Qe),Wt=_(89926),ln=_.n(Wt),Pn=_(23289),Kn=_.n(Pn),Vn=_(64770),Jt=_.n(Vn),Nn=_(45635),Yt=_.n(Nn),Dn=_(87048),Ke=_.n(Dn),Ri=_(45107),mn=_.n(Ri),Ci=_(26775),An=_.n(Ci),Ni=(_(9874),_(96912)),Ne=_.n(Ni);function Le(m){return null==m}var Ee={isNothing:Le,isObject:function(m){return"object"==typeof m&&null!==m},toArray:function(m){return Array.isArray(m)?m:Le(m)?[]:[m]},repeat:function(m,T){var I,M="";for(I=0;I<T;I+=1)M+=m;return M},isNegativeZero:function(m){return 0===m&&Number.NEGATIVE_INFINITY===1/m},extend:function(m,T){var M,I,P,z;if(T)for(M=0,I=(z=Object.keys(T)).length;M<I;M+=1)m[P=z[M]]=T[P];return m}};function Ve(m,T){var M="",I=m.reason||"(unknown reason)";return m.mark?(m.mark.name&&(M+='in "'+m.mark.name+'" '),M+="("+(m.mark.line+1)+":"+(m.mark.column+1)+")",!T&&m.mark.snippet&&(M+="\n\n"+m.mark.snippet),I+" "+M):I}function it(m,T){Error.call(this),this.name="YAMLException",this.reason=m,this.mark=T,this.message=Ve(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(it.prototype=Object.create(Error.prototype)).constructor=it,it.prototype.toString=function(T){return this.name+": "+Ve(this,T)};var Ot=it;function nn(m,T,M,I,P){var z="",W="",K=Math.floor(P/2)-1;return I-T>K&&(T=I-K+(z=" ... ").length),M-I>K&&(M=I+K-(W=" ...").length),{str:z+m.slice(T,M).replace(/\t/g,"\u2192")+W,pos:I-T+z.length}}function yn(m,T){return Ee.repeat(" ",T-m.length)+m}var wn=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],wt=["scalar","sequence","mapping"],Ei=function(m,T){if(T=T||{},Object.keys(T).forEach(function(M){if(-1===wn.indexOf(M))throw new Ot('Unknown option "'+M+'" is met in definition of "'+m+'" YAML type.')}),this.options=T,this.tag=m,this.kind=T.kind||null,this.resolve=T.resolve||function(){return!0},this.construct=T.construct||function(M){return M},this.instanceOf=T.instanceOf||null,this.predicate=T.predicate||null,this.represent=T.represent||null,this.representName=T.representName||null,this.defaultStyle=T.defaultStyle||null,this.multi=T.multi||!1,this.styleAliases=function(m){var T={};return null!==m&&Object.keys(m).forEach(function(M){m[M].forEach(function(I){T[String(I)]=M})}),T}(T.styleAliases||null),-1===wt.indexOf(this.kind))throw new Ot('Unknown kind "'+this.kind+'" is specified for "'+m+'" YAML type.')};function Wr(m,T){var M=[];return m[T].forEach(function(I){var P=M.length;M.forEach(function(z,W){z.tag===I.tag&&z.kind===I.kind&&z.multi===I.multi&&(P=W)}),M[P]=I}),M}function Oa(m){return this.extend(m)}Oa.prototype.extend=function(T){var M=[],I=[];if(T instanceof Ei)I.push(T);else if(Array.isArray(T))I=I.concat(T);else{if(!T||!Array.isArray(T.implicit)&&!Array.isArray(T.explicit))throw new Ot("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");T.implicit&&(M=M.concat(T.implicit)),T.explicit&&(I=I.concat(T.explicit))}M.forEach(function(z){if(!(z instanceof Ei))throw new Ot("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(z.loadKind&&"scalar"!==z.loadKind)throw new Ot("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(z.multi)throw new Ot("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),I.forEach(function(z){if(!(z instanceof Ei))throw new Ot("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var P=Object.create(Oa.prototype);return P.implicit=(this.implicit||[]).concat(M),P.explicit=(this.explicit||[]).concat(I),P.compiledImplicit=Wr(P,"implicit"),P.compiledExplicit=Wr(P,"explicit"),P.compiledTypeMap=function(){var T,M,m={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function I(P){P.multi?(m.multi[P.kind].push(P),m.multi.fallback.push(P)):m[P.kind][P.tag]=m.fallback[P.tag]=P}for(T=0,M=arguments.length;T<M;T+=1)arguments[T].forEach(I);return m}(P.compiledImplicit,P.compiledExplicit),P};var hn=Oa,zr=new Ei("tag:yaml.org,2002:str",{kind:"scalar",construct:function(m){return null!==m?m:""}}),Ed=new Ei("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(m){return null!==m?m:[]}}),bg=new Ei("tag:yaml.org,2002:map",{kind:"mapping",construct:function(m){return null!==m?m:{}}}),nc=new hn({explicit:[zr,Ed,bg]}),Td=new Ei("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(m){if(null===m)return!0;var T=m.length;return 1===T&&"~"===m||4===T&&("null"===m||"Null"===m||"NULL"===m)},construct:function(){return null},predicate:function(m){return null===m},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),wd=new Ei("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(m){if(null===m)return!1;var T=m.length;return 4===T&&("true"===m||"True"===m||"TRUE"===m)||5===T&&("false"===m||"False"===m||"FALSE"===m)},construct:function(m){return"true"===m||"True"===m||"TRUE"===m},predicate:function(m){return"[object Boolean]"===Object.prototype.toString.call(m)},represent:{lowercase:function(m){return m?"true":"false"},uppercase:function(m){return m?"TRUE":"FALSE"},camelcase:function(m){return m?"True":"False"}},defaultStyle:"lowercase"});function Cg(m){return 48<=m&&m<=57||65<=m&&m<=70||97<=m&&m<=102}function cp(m){return 48<=m&&m<=55}function Eg(m){return 48<=m&&m<=57}var ao=new Ei("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(m){if(null===m)return!1;var P,T=m.length,M=0,I=!1;if(!T)return!1;if(("-"===(P=m[M])||"+"===P)&&(P=m[++M]),"0"===P){if(M+1===T)return!0;if("b"===(P=m[++M])){for(M++;M<T;M++)if("_"!==(P=m[M])){if("0"!==P&&"1"!==P)return!1;I=!0}return I&&"_"!==P}if("x"===P){for(M++;M<T;M++)if("_"!==(P=m[M])){if(!Cg(m.charCodeAt(M)))return!1;I=!0}return I&&"_"!==P}if("o"===P){for(M++;M<T;M++)if("_"!==(P=m[M])){if(!cp(m.charCodeAt(M)))return!1;I=!0}return I&&"_"!==P}}if("_"===P)return!1;for(;M<T;M++)if("_"!==(P=m[M])){if(!Eg(m.charCodeAt(M)))return!1;I=!0}return!(!I||"_"===P)},construct:function(m){var I,T=m,M=1;if(-1!==T.indexOf("_")&&(T=T.replace(/_/g,"")),("-"===(I=T[0])||"+"===I)&&("-"===I&&(M=-1),I=(T=T.slice(1))[0]),"0"===T)return 0;if("0"===I){if("b"===T[1])return M*parseInt(T.slice(2),2);if("x"===T[1])return M*parseInt(T.slice(2),16);if("o"===T[1])return M*parseInt(T.slice(2),8)}return M*parseInt(T,10)},predicate:function(m){return"[object Number]"===Object.prototype.toString.call(m)&&m%1==0&&!Ee.isNegativeZero(m)},represent:{binary:function(m){return m>=0?"0b"+m.toString(2):"-0b"+m.toString(2).slice(1)},octal:function(m){return m>=0?"0o"+m.toString(8):"-0o"+m.toString(8).slice(1)},decimal:function(m){return m.toString(10)},hexadecimal:function(m){return m>=0?"0x"+m.toString(16).toUpperCase():"-0x"+m.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Hi=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),Tg=/^[-+]?[0-9]+e/,Bt=new Ei("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(m){return!(null===m||!Hi.test(m)||"_"===m[m.length-1])},construct:function(m){var T,M;return M="-"===(T=m.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(T[0])>=0&&(T=T.slice(1)),".inf"===T?1===M?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===T?NaN:M*parseFloat(T,10)},predicate:function(m){return"[object Number]"===Object.prototype.toString.call(m)&&(m%1!=0||Ee.isNegativeZero(m))},represent:function(m,T){var M;if(isNaN(m))switch(T){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===m)switch(T){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===m)switch(T){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ee.isNegativeZero(m))return"-0.0";return M=m.toString(10),Tg.test(M)?M.replace("e",".e"):M},defaultStyle:"lowercase"}),ts=nc.extend({implicit:[Td,wd,ao,Bt]}),Dd=ts,uu=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),up=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),Rd=new Ei("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(m){return null!==m&&(null!==uu.exec(m)||null!==up.exec(m))},construct:function(m){var T,M,I,P,z,W,K,Oe,le=0,he=null;if(null===(T=uu.exec(m))&&(T=up.exec(m)),null===T)throw new Error("Date resolve error");if(M=+T[1],I=+T[2]-1,P=+T[3],!T[4])return new Date(Date.UTC(M,I,P));if(z=+T[4],W=+T[5],K=+T[6],T[7]){for(le=T[7].slice(0,3);le.length<3;)le+="0";le=+le}return T[9]&&(he=6e4*(60*+T[10]+ +(T[11]||0)),"-"===T[9]&&(he=-he)),Oe=new Date(Date.UTC(M,I,P,z,W,K,le)),he&&Oe.setTime(Oe.getTime()-he),Oe},instanceOf:Date,represent:function(m){return m.toISOString()}}),pn=new Ei("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(m){return"<<"===m||null===m}}),sc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",lo=new Ei("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(m){if(null===m)return!1;var T,M,I=0,P=m.length,z=sc;for(M=0;M<P;M++)if(!((T=z.indexOf(m.charAt(M)))>64)){if(T<0)return!1;I+=6}return I%8==0},construct:function(m){var T,M,I=m.replace(/[\r\n=]/g,""),P=I.length,z=sc,W=0,K=[];for(T=0;T<P;T++)T%4==0&&T&&(K.push(W>>16&255),K.push(W>>8&255),K.push(255&W)),W=W<<6|z.indexOf(I.charAt(T));return 0==(M=P%4*6)?(K.push(W>>16&255),K.push(W>>8&255),K.push(255&W)):18===M?(K.push(W>>10&255),K.push(W>>2&255)):12===M&&K.push(W>>4&255),new Uint8Array(K)},predicate:function(m){return"[object Uint8Array]"===Object.prototype.toString.call(m)},represent:function(m){var I,P,T="",M=0,z=m.length,W=sc;for(I=0;I<z;I++)I%3==0&&I&&(T+=W[M>>18&63],T+=W[M>>12&63],T+=W[M>>6&63],T+=W[63&M]),M=(M<<8)+m[I];return 0==(P=z%3)?(T+=W[M>>18&63],T+=W[M>>12&63],T+=W[M>>6&63],T+=W[63&M]):2===P?(T+=W[M>>10&63],T+=W[M>>4&63],T+=W[M<<2&63],T+=W[64]):1===P&&(T+=W[M>>2&63],T+=W[M<<4&63],T+=W[64],T+=W[64]),T}}),yo=Object.prototype.hasOwnProperty,Mg=Object.prototype.toString,Id=new Ei("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(m){if(null===m)return!0;var M,I,P,z,W,T=[],K=m;for(M=0,I=K.length;M<I;M+=1){if(W=!1,"[object Object]"!==Mg.call(P=K[M]))return!1;for(z in P)if(yo.call(P,z)){if(W)return!1;W=!0}if(!W)return!1;if(-1!==T.indexOf(z))return!1;T.push(z)}return!0},construct:function(m){return null!==m?m:[]}}),du=Object.prototype.toString,hi=new Ei("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(m){if(null===m)return!0;var T,M,I,P,z,W=m;for(z=new Array(W.length),T=0,M=W.length;T<M;T+=1){if("[object Object]"!==du.call(I=W[T])||1!==(P=Object.keys(I)).length)return!1;z[T]=[P[0],I[P[0]]]}return!0},construct:function(m){if(null===m)return[];var T,M,I,P,z,W=m;for(z=new Array(W.length),T=0,M=W.length;T<M;T+=1)I=W[T],P=Object.keys(I),z[T]=[P[0],I[P[0]]];return z}}),dv=Object.prototype.hasOwnProperty,Ti=new Ei("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(m){if(null===m)return!0;var T,M=m;for(T in M)if(dv.call(M,T)&&null!==M[T])return!1;return!0},construct:function(m){return null!==m?m:{}}}),yl=Dd.extend({implicit:[Rd,pn],explicit:[lo,Id,hi,Ti]}),vs=Object.prototype.hasOwnProperty,ys=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,fp=/[\x85\u2028\u2029]/,Od=/[,\[\]\{\}]/,ac=/^(?:!|!!|![a-z\-]+!)$/i,jt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function gp(m){return Object.prototype.toString.call(m)}function is(m){return 10===m||13===m}function Te(m){return 9===m||32===m}function wi(m){return 9===m||32===m||10===m||13===m}function cr(m){return 44===m||91===m||93===m||123===m||125===m}function Ai(m){var T;return 48<=m&&m<=57?m-48:97<=(T=32|m)&&T<=102?T-97+10:-1}function la(m){return 120===m?2:117===m?4:85===m?8:0}function Co(m){return 48<=m&&m<=57?m-48:-1}function mp(m){return 48===m?"\0":97===m?"\x07":98===m?"\b":116===m||9===m?"\t":110===m?"\n":118===m?"\v":102===m?"\f":114===m?"\r":101===m?"\x1b":32===m?" ":34===m?'"':47===m?"/":92===m?"\\":78===m?"\x85":95===m?"\xa0":76===m?"\u2028":80===m?"\u2029":""}function Fo(m){return m<=65535?String.fromCharCode(m):String.fromCharCode(55296+(m-65536>>10),56320+(m-65536&1023))}for(var Vt=new Array(256),Fn=new Array(256),Si=0;Si<256;Si++)Vt[Si]=mp(Si)?1:0,Fn[Si]=mp(Si);function Eo(m,T){this.input=m,this.filename=T.filename||null,this.schema=T.schema||yl,this.onWarning=T.onWarning||null,this.legacy=T.legacy||!1,this.json=T.json||!1,this.listener=T.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=m.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Vs(m,T){var M={name:m.filename,buffer:m.input.slice(0,-1),position:m.position,line:m.line,column:m.position-m.lineStart};return M.snippet=function(m,T){if(T=Object.create(T||null),!m.buffer)return null;T.maxLength||(T.maxLength=79),"number"!=typeof T.indent&&(T.indent=1),"number"!=typeof T.linesBefore&&(T.linesBefore=3),"number"!=typeof T.linesAfter&&(T.linesAfter=2);for(var z,M=/\r?\n|\r|\0/g,I=[0],P=[],W=-1;z=M.exec(m.buffer);)P.push(z.index),I.push(z.index+z[0].length),m.position<=z.index&&W<0&&(W=I.length-2);W<0&&(W=I.length-1);var le,he,K="",Se=Math.min(m.line+T.linesAfter,P.length).toString().length,we=T.maxLength-(T.indent+Se+3);for(le=1;le<=T.linesBefore&&!(W-le<0);le++)he=nn(m.buffer,I[W-le],P[W-le],m.position-(I[W]-I[W-le]),we),K=Ee.repeat(" ",T.indent)+yn((m.line-le+1).toString(),Se)+" | "+he.str+"\n"+K;for(he=nn(m.buffer,I[W],P[W],m.position,we),K+=Ee.repeat(" ",T.indent)+yn((m.line+1).toString(),Se)+" | "+he.str+"\n",K+=Ee.repeat("-",T.indent+Se+3+he.pos)+"^\n",le=1;le<=T.linesAfter&&!(W+le>=P.length);le++)he=nn(m.buffer,I[W+le],P[W+le],m.position-(I[W]-I[W+le]),we),K+=Ee.repeat(" ",T.indent)+yn((m.line+le+1).toString(),Se)+" | "+he.str+"\n";return K.replace(/\n$/,"")}(M),new Ot(T,M)}function zt(m,T){throw Vs(m,T)}function Bo(m,T){m.onWarning&&m.onWarning.call(null,Vs(m,T))}var Xi={YAML:function(T,M,I){var P,z,W;null!==T.version&&zt(T,"duplication of %YAML directive"),1!==I.length&&zt(T,"YAML directive accepts exactly one argument"),null===(P=/^([0-9]+)\.([0-9]+)$/.exec(I[0]))&&zt(T,"ill-formed argument of the YAML directive"),z=parseInt(P[1],10),W=parseInt(P[2],10),1!==z&&zt(T,"unacceptable YAML version of the document"),T.version=I[0],T.checkLineBreaks=W<2,1!==W&&2!==W&&Bo(T,"unsupported YAML version of the document")},TAG:function(T,M,I){var P,z;2!==I.length&&zt(T,"TAG directive accepts exactly two arguments"),z=I[1],ac.test(P=I[0])||zt(T,"ill-formed tag handle (first argument) of the TAG directive"),vs.call(T.tagMap,P)&&zt(T,'there is a previously declared suffix for "'+P+'" tag handle'),jt.test(z)||zt(T,"ill-formed tag prefix (second argument) of the TAG directive");try{z=decodeURIComponent(z)}catch(W){zt(T,"tag prefix is malformed: "+z)}T.tagMap[P]=z}};function To(m,T,M,I){var P,z,W,K;if(T<M){if(K=m.input.slice(T,M),I)for(P=0,z=K.length;P<z;P+=1)9===(W=K.charCodeAt(P))||32<=W&&W<=1114111||zt(m,"expected valid JSON character");else ys.test(K)&&zt(m,"the stream contains non-printable characters");m.result+=K}}function Hs(m,T,M,I){var P,z,W,K;for(Ee.isObject(M)||zt(m,"cannot merge mappings; the provided source object is unacceptable"),W=0,K=(P=Object.keys(M)).length;W<K;W+=1)vs.call(T,z=P[W])||(T[z]=M[z],I[z]=!0)}function Rn(m,T,M,I,P,z,W,K,le){var he,Se;if(Array.isArray(P))for(he=0,Se=(P=Array.prototype.slice.call(P)).length;he<Se;he+=1)Array.isArray(P[he])&&zt(m,"nested arrays are not supported inside keys"),"object"==typeof P&&"[object Object]"===gp(P[he])&&(P[he]="[object Object]");if("object"==typeof P&&"[object Object]"===gp(P)&&(P="[object Object]"),P=String(P),null===T&&(T={}),"tag:yaml.org,2002:merge"===I)if(Array.isArray(z))for(he=0,Se=z.length;he<Se;he+=1)Hs(m,T,z[he],M);else Hs(m,T,z,M);else!m.json&&!vs.call(M,P)&&vs.call(T,P)&&(m.line=W||m.line,m.lineStart=K||m.lineStart,m.position=le||m.position,zt(m,"duplicated mapping key")),"__proto__"===P?Object.defineProperty(T,P,{configurable:!0,enumerable:!0,writable:!0,value:z}):T[P]=z,delete M[P];return T}function La(m){var T;10===(T=m.input.charCodeAt(m.position))?m.position++:13===T?(m.position++,10===m.input.charCodeAt(m.position)&&m.position++):zt(m,"a line break is expected"),m.line+=1,m.lineStart=m.position,m.firstTabInLine=-1}function Ui(m,T,M){for(var I=0,P=m.input.charCodeAt(m.position);0!==P;){for(;Te(P);)9===P&&-1===m.firstTabInLine&&(m.firstTabInLine=m.position),P=m.input.charCodeAt(++m.position);if(T&&35===P)do{P=m.input.charCodeAt(++m.position)}while(10!==P&&13!==P&&0!==P);if(!is(P))break;for(La(m),P=m.input.charCodeAt(m.position),I++,m.lineIndent=0;32===P;)m.lineIndent++,P=m.input.charCodeAt(++m.position)}return-1!==M&&0!==I&&m.lineIndent<M&&Bo(m,"deficient indentation"),I}function Us(m){var M,T=m.position;return!(45!==(M=m.input.charCodeAt(T))&&46!==M||M!==m.input.charCodeAt(T+1)||M!==m.input.charCodeAt(T+2)||(T+=3,M=m.input.charCodeAt(T),0!==M&&!wi(M)))}function rs(m,T){1===T?m.result+=" ":T>1&&(m.result+=Ee.repeat("\n",T-1))}function _p(m,T){var M,le,I=m.tag,P=m.anchor,z=[],K=!1;if(-1!==m.firstTabInLine)return!1;for(null!==m.anchor&&(m.anchorMap[m.anchor]=z),le=m.input.charCodeAt(m.position);0!==le&&(-1!==m.firstTabInLine&&(m.position=m.firstTabInLine,zt(m,"tab characters must not be used in indentation")),45===le&&wi(m.input.charCodeAt(m.position+1)));)if(K=!0,m.position++,Ui(m,!0,-1)&&m.lineIndent<=T)z.push(null),le=m.input.charCodeAt(m.position);else if(M=m.line,Gs(m,T,3,!1,!0),z.push(m.result),Ui(m,!0,-1),le=m.input.charCodeAt(m.position),(m.line===M||m.lineIndent>T)&&0!==le)zt(m,"bad indentation of a sequence entry");else if(m.lineIndent<T)break;return!!K&&(m.tag=I,m.anchor=P,m.kind="sequence",m.result=z,!0)}function Pa(m){var T,P,z,W,M=!1,I=!1;if(33!==(W=m.input.charCodeAt(m.position)))return!1;if(null!==m.tag&&zt(m,"duplication of a tag property"),60===(W=m.input.charCodeAt(++m.position))?(M=!0,W=m.input.charCodeAt(++m.position)):33===W?(I=!0,P="!!",W=m.input.charCodeAt(++m.position)):P="!",T=m.position,M){do{W=m.input.charCodeAt(++m.position)}while(0!==W&&62!==W);m.position<m.length?(z=m.input.slice(T,m.position),W=m.input.charCodeAt(++m.position)):zt(m,"unexpected end of the stream within a verbatim tag")}else{for(;0!==W&&!wi(W);)33===W&&(I?zt(m,"tag suffix cannot contain exclamation marks"):(P=m.input.slice(T-1,m.position+1),ac.test(P)||zt(m,"named tag handle cannot contain such characters"),I=!0,T=m.position+1)),W=m.input.charCodeAt(++m.position);z=m.input.slice(T,m.position),Od.test(z)&&zt(m,"tag suffix cannot contain flow indicator characters")}z&&!jt.test(z)&&zt(m,"tag name cannot contain such characters: "+z);try{z=decodeURIComponent(z)}catch(K){zt(m,"tag name is malformed: "+z)}return M?m.tag=z:vs.call(m.tagMap,P)?m.tag=m.tagMap[P]+z:"!"===P?m.tag="!"+z:"!!"===P?m.tag="tag:yaml.org,2002:"+z:zt(m,'undeclared tag handle "'+P+'"'),!0}function cc(m){var T,M;if(38!==(M=m.input.charCodeAt(m.position)))return!1;for(null!==m.anchor&&zt(m,"duplication of an anchor property"),M=m.input.charCodeAt(++m.position),T=m.position;0!==M&&!wi(M)&&!cr(M);)M=m.input.charCodeAt(++m.position);return m.position===T&&zt(m,"name of an anchor node must contain at least one character"),m.anchor=m.input.slice(T,m.position),!0}function Gs(m,T,M,I,P){var z,W,K,we,Oe,Fe,Ze,et,_t,le=1,he=!1,Se=!1;if(null!==m.listener&&m.listener("open",m),m.tag=null,m.anchor=null,m.kind=null,m.result=null,z=W=K=4===M||3===M,I&&Ui(m,!0,-1)&&(he=!0,m.lineIndent>T?le=1:m.lineIndent===T?le=0:m.lineIndent<T&&(le=-1)),1===le)for(;Pa(m)||cc(m);)Ui(m,!0,-1)?(he=!0,K=z,m.lineIndent>T?le=1:m.lineIndent===T?le=0:m.lineIndent<T&&(le=-1)):K=!1;if(K&&(K=he||P),(1===le||4===M)&&(et=1===M||2===M?T:T+1,_t=m.position-m.lineStart,1===le?K&&(_p(m,_t)||function(m,T,M){var I,P,z,W,K,le,pt,he=m.tag,Se=m.anchor,we={},Oe=Object.create(null),Fe=null,Ze=null,et=null,_t=!1,$t=!1;if(-1!==m.firstTabInLine)return!1;for(null!==m.anchor&&(m.anchorMap[m.anchor]=we),pt=m.input.charCodeAt(m.position);0!==pt;){if(!_t&&-1!==m.firstTabInLine&&(m.position=m.firstTabInLine,zt(m,"tab characters must not be used in indentation")),I=m.input.charCodeAt(m.position+1),z=m.line,63!==pt&&58!==pt||!wi(I)){if(W=m.line,K=m.lineStart,le=m.position,!Gs(m,M,2,!1,!0))break;if(m.line===z){for(pt=m.input.charCodeAt(m.position);Te(pt);)pt=m.input.charCodeAt(++m.position);if(58===pt)wi(pt=m.input.charCodeAt(++m.position))||zt(m,"a whitespace character is expected after the key-value separator within a block mapping"),_t&&(Rn(m,we,Oe,Fe,Ze,null,W,K,le),Fe=Ze=et=null),$t=!0,_t=!1,P=!1,Fe=m.tag,Ze=m.result;else{if(!$t)return m.tag=he,m.anchor=Se,!0;zt(m,"can not read an implicit mapping pair; a colon is missed")}}else{if(!$t)return m.tag=he,m.anchor=Se,!0;zt(m,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===pt?(_t&&(Rn(m,we,Oe,Fe,Ze,null,W,K,le),Fe=Ze=et=null),$t=!0,_t=!0,P=!0):_t?(_t=!1,P=!0):zt(m,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),m.position+=1,pt=I;if((m.line===z||m.lineIndent>T)&&(_t&&(W=m.line,K=m.lineStart,le=m.position),Gs(m,T,4,!0,P)&&(_t?Ze=m.result:et=m.result),_t||(Rn(m,we,Oe,Fe,Ze,et,W,K,le),Fe=Ze=et=null),Ui(m,!0,-1),pt=m.input.charCodeAt(m.position)),(m.line===z||m.lineIndent>T)&&0!==pt)zt(m,"bad indentation of a mapping entry");else if(m.lineIndent<T)break}return _t&&Rn(m,we,Oe,Fe,Ze,null,W,K,le),$t&&(m.tag=he,m.anchor=Se,m.kind="mapping",m.result=we),$t}(m,_t,et))||function(m,T){var I,P,z,K,Se,we,Oe,Fe,et,_t,$t,pt,M=!0,W=m.tag,le=m.anchor,Ze=Object.create(null);if(91===(pt=m.input.charCodeAt(m.position)))Se=93,Fe=!1,K=[];else{if(123!==pt)return!1;Se=125,Fe=!0,K={}}for(null!==m.anchor&&(m.anchorMap[m.anchor]=K),pt=m.input.charCodeAt(++m.position);0!==pt;){if(Ui(m,!0,T),(pt=m.input.charCodeAt(m.position))===Se)return m.position++,m.tag=W,m.anchor=le,m.kind=Fe?"mapping":"sequence",m.result=K,!0;M?44===pt&&zt(m,"expected the node content, but found ','"):zt(m,"missed comma between flow collection entries"),$t=null,we=Oe=!1,63===pt&&wi(m.input.charCodeAt(m.position+1))&&(we=Oe=!0,m.position++,Ui(m,!0,T)),I=m.line,P=m.lineStart,z=m.position,Gs(m,T,1,!1,!0),_t=m.tag,et=m.result,Ui(m,!0,T),pt=m.input.charCodeAt(m.position),(Oe||m.line===I)&&58===pt&&(we=!0,pt=m.input.charCodeAt(++m.position),Ui(m,!0,T),Gs(m,T,1,!1,!0),$t=m.result),Fe?Rn(m,K,Ze,_t,et,$t,I,P,z):K.push(we?Rn(m,null,Ze,_t,et,$t,I,P,z):et),Ui(m,!0,T),44===(pt=m.input.charCodeAt(m.position))?(M=!0,pt=m.input.charCodeAt(++m.position)):M=!1}zt(m,"unexpected end of the stream within a flow collection")}(m,et)?Se=!0:(W&&function(m,T){var M,I,Se,we,P=1,z=!1,W=!1,K=T,le=0,he=!1;if(124===(we=m.input.charCodeAt(m.position)))I=!1;else{if(62!==we)return!1;I=!0}for(m.kind="scalar",m.result="";0!==we;)if(43===(we=m.input.charCodeAt(++m.position))||45===we)1===P?P=43===we?3:2:zt(m,"repeat of a chomping mode identifier");else{if(!((Se=Co(we))>=0))break;0===Se?zt(m,"bad explicit indentation width of a block scalar; it cannot be less than one"):W?zt(m,"repeat of an indentation width identifier"):(K=T+Se-1,W=!0)}if(Te(we)){do{we=m.input.charCodeAt(++m.position)}while(Te(we));if(35===we)do{we=m.input.charCodeAt(++m.position)}while(!is(we)&&0!==we)}for(;0!==we;){for(La(m),m.lineIndent=0,we=m.input.charCodeAt(m.position);(!W||m.lineIndent<K)&&32===we;)m.lineIndent++,we=m.input.charCodeAt(++m.position);if(!W&&m.lineIndent>K&&(K=m.lineIndent),is(we))le++;else{if(m.lineIndent<K){3===P?m.result+=Ee.repeat("\n",z?1+le:le):1===P&&z&&(m.result+="\n");break}for(I?Te(we)?(he=!0,m.result+=Ee.repeat("\n",z?1+le:le)):he?(he=!1,m.result+=Ee.repeat("\n",le+1)):0===le?z&&(m.result+=" "):m.result+=Ee.repeat("\n",le):m.result+=Ee.repeat("\n",z?1+le:le),z=!0,W=!0,le=0,M=m.position;!is(we)&&0!==we;)we=m.input.charCodeAt(++m.position);To(m,M,m.position,!1)}}return!0}(m,et)||function(m,T){var M,I,P;if(39!==(M=m.input.charCodeAt(m.position)))return!1;for(m.kind="scalar",m.result="",m.position++,I=P=m.position;0!==(M=m.input.charCodeAt(m.position));)if(39===M){if(To(m,I,m.position,!0),39!==(M=m.input.charCodeAt(++m.position)))return!0;I=m.position,m.position++,P=m.position}else is(M)?(To(m,I,P,!0),rs(m,Ui(m,!1,T)),I=P=m.position):m.position===m.lineStart&&Us(m)?zt(m,"unexpected end of the document within a single quoted scalar"):(m.position++,P=m.position);zt(m,"unexpected end of the stream within a single quoted scalar")}(m,et)||function(m,T){var M,I,P,z,W,K;if(34!==(K=m.input.charCodeAt(m.position)))return!1;for(m.kind="scalar",m.result="",m.position++,M=I=m.position;0!==(K=m.input.charCodeAt(m.position));){if(34===K)return To(m,M,m.position,!0),m.position++,!0;if(92===K){if(To(m,M,m.position,!0),is(K=m.input.charCodeAt(++m.position)))Ui(m,!1,T);else if(K<256&&Vt[K])m.result+=Fn[K],m.position++;else if((W=la(K))>0){for(P=W,z=0;P>0;P--)(W=Ai(K=m.input.charCodeAt(++m.position)))>=0?z=(z<<4)+W:zt(m,"expected hexadecimal character");m.result+=Fo(z),m.position++}else zt(m,"unknown escape sequence");M=I=m.position}else is(K)?(To(m,M,I,!0),rs(m,Ui(m,!1,T)),M=I=m.position):m.position===m.lineStart&&Us(m)?zt(m,"unexpected end of the document within a double quoted scalar"):(m.position++,I=m.position)}zt(m,"unexpected end of the stream within a double quoted scalar")}(m,et)?Se=!0:function(m){var T,M,I;if(42!==(I=m.input.charCodeAt(m.position)))return!1;for(I=m.input.charCodeAt(++m.position),T=m.position;0!==I&&!wi(I)&&!cr(I);)I=m.input.charCodeAt(++m.position);return m.position===T&&zt(m,"name of an alias node must contain at least one character"),M=m.input.slice(T,m.position),vs.call(m.anchorMap,M)||zt(m,'unidentified alias "'+M+'"'),m.result=m.anchorMap[M],Ui(m,!0,-1),!0}(m)?(Se=!0,(null!==m.tag||null!==m.anchor)&&zt(m,"alias node should not have any properties")):function(m,T,M){var P,z,W,K,le,he,Se,Fe,we=m.kind,Oe=m.result;if(wi(Fe=m.input.charCodeAt(m.position))||cr(Fe)||35===Fe||38===Fe||42===Fe||33===Fe||124===Fe||62===Fe||39===Fe||34===Fe||37===Fe||64===Fe||96===Fe||(63===Fe||45===Fe)&&(wi(P=m.input.charCodeAt(m.position+1))||M&&cr(P)))return!1;for(m.kind="scalar",m.result="",z=W=m.position,K=!1;0!==Fe;){if(58===Fe){if(wi(P=m.input.charCodeAt(m.position+1))||M&&cr(P))break}else if(35===Fe){if(wi(m.input.charCodeAt(m.position-1)))break}else{if(m.position===m.lineStart&&Us(m)||M&&cr(Fe))break;if(is(Fe)){if(le=m.line,he=m.lineStart,Se=m.lineIndent,Ui(m,!1,-1),m.lineIndent>=T){K=!0,Fe=m.input.charCodeAt(m.position);continue}m.position=W,m.line=le,m.lineStart=he,m.lineIndent=Se;break}}K&&(To(m,z,W,!1),rs(m,m.line-le),z=W=m.position,K=!1),Te(Fe)||(W=m.position+1),Fe=m.input.charCodeAt(++m.position)}return To(m,z,W,!1),!!m.result||(m.kind=we,m.result=Oe,!1)}(m,et,1===M)&&(Se=!0,null===m.tag&&(m.tag="?")),null!==m.anchor&&(m.anchorMap[m.anchor]=m.result)):0===le&&(Se=K&&_p(m,_t))),null===m.tag)null!==m.anchor&&(m.anchorMap[m.anchor]=m.result);else if("?"===m.tag){for(null!==m.result&&"scalar"!==m.kind&&zt(m,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+m.kind+'"'),we=0,Oe=m.implicitTypes.length;we<Oe;we+=1)if((Ze=m.implicitTypes[we]).resolve(m.result)){m.result=Ze.construct(m.result),m.tag=Ze.tag,null!==m.anchor&&(m.anchorMap[m.anchor]=m.result);break}}else if("!"!==m.tag){if(vs.call(m.typeMap[m.kind||"fallback"],m.tag))Ze=m.typeMap[m.kind||"fallback"][m.tag];else for(Ze=null,we=0,Oe=(Fe=m.typeMap.multi[m.kind||"fallback"]).length;we<Oe;we+=1)if(m.tag.slice(0,Fe[we].tag.length)===Fe[we].tag){Ze=Fe[we];break}Ze||zt(m,"unknown tag !<"+m.tag+">"),null!==m.result&&Ze.kind!==m.kind&&zt(m,"unacceptable node kind for !<"+m.tag+'> tag; it should be "'+Ze.kind+'", not "'+m.kind+'"'),Ze.resolve(m.result,m.tag)?(m.result=Ze.construct(m.result,m.tag),null!==m.anchor&&(m.anchorMap[m.anchor]=m.result)):zt(m,"cannot resolve a node with !<"+m.tag+"> explicit tag")}return null!==m.listener&&m.listener("close",m),null!==m.tag||null!==m.anchor||Se}function Fa(m){var M,I,P,W,T=m.position,z=!1;for(m.version=null,m.checkLineBreaks=m.legacy,m.tagMap=Object.create(null),m.anchorMap=Object.create(null);0!==(W=m.input.charCodeAt(m.position))&&(Ui(m,!0,-1),W=m.input.charCodeAt(m.position),!(m.lineIndent>0||37!==W));){for(z=!0,W=m.input.charCodeAt(++m.position),M=m.position;0!==W&&!wi(W);)W=m.input.charCodeAt(++m.position);for(P=[],(I=m.input.slice(M,m.position)).length<1&&zt(m,"directive name must not be less than one character in length");0!==W;){for(;Te(W);)W=m.input.charCodeAt(++m.position);if(35===W){do{W=m.input.charCodeAt(++m.position)}while(0!==W&&!is(W));break}if(is(W))break;for(M=m.position;0!==W&&!wi(W);)W=m.input.charCodeAt(++m.position);P.push(m.input.slice(M,m.position))}0!==W&&La(m),vs.call(Xi,I)?Xi[I](m,I,P):Bo(m,'unknown document directive "'+I+'"')}Ui(m,!0,-1),0===m.lineIndent&&45===m.input.charCodeAt(m.position)&&45===m.input.charCodeAt(m.position+1)&&45===m.input.charCodeAt(m.position+2)?(m.position+=3,Ui(m,!0,-1)):z&&zt(m,"directives end mark is expected"),Gs(m,m.lineIndent-1,4,!1,!0),Ui(m,!0,-1),m.checkLineBreaks&&fp.test(m.input.slice(T,m.position))&&Bo(m,"non-ASCII line breaks are interpreted as content"),m.documents.push(m.result),m.position===m.lineStart&&Us(m)?46===m.input.charCodeAt(m.position)&&(m.position+=3,Ui(m,!0,-1)):m.position<m.length-1&&zt(m,"end of the stream or a document separator is expected")}function mr(m,T){T=T||{},0!==(m=String(m)).length&&(10!==m.charCodeAt(m.length-1)&&13!==m.charCodeAt(m.length-1)&&(m+="\n"),65279===m.charCodeAt(0)&&(m=m.slice(1)));var M=new Eo(m,T),I=m.indexOf("\0");for(-1!==I&&(M.position=I,zt(M,"null byte is not allowed in input")),M.input+="\0";32===M.input.charCodeAt(M.position);)M.lineIndent+=1,M.position+=1;for(;M.position<M.length-1;)Fa(M);return M.documents}var Ws={loadAll:function(m,T,M){null!==T&&"object"==typeof T&&void 0===M&&(M=T,T=null);var I=mr(m,M);if("function"!=typeof T)return I;for(var P=0,z=I.length;P<z;P+=1)T(I[P])},load:function(m,T){var M=mr(m,T);if(0!==M.length){if(1===M.length)return M[0];throw new Ot("expected a single document in the stream, but found more")}}},dc=Object.prototype.toString,co=Object.prototype.hasOwnProperty,_n={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},fc=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Cp=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Fd(m){var T,M,I;if(T=m.toString(16).toUpperCase(),m<=255)M="x",I=2;else if(m<=65535)M="u",I=4;else{if(!(m<=4294967295))throw new Ot("code point within a string may not be greater than 0xFFFFFFFF");M="U",I=8}return"\\"+M+Ee.repeat("0",I-T.length)+T}function Vd(m){this.schema=m.schema||yl,this.indent=Math.max(1,m.indent||2),this.noArrayIndent=m.noArrayIndent||!1,this.skipInvalid=m.skipInvalid||!1,this.flowLevel=Ee.isNothing(m.flowLevel)?-1:m.flowLevel,this.styleMap=function(m,T){var M,I,P,z,W,K,le;if(null===T)return{};for(M={},P=0,z=(I=Object.keys(T)).length;P<z;P+=1)W=I[P],K=String(T[W]),"!!"===W.slice(0,2)&&(W="tag:yaml.org,2002:"+W.slice(2)),(le=m.compiledTypeMap.fallback[W])&&co.call(le.styleAliases,K)&&(K=le.styleAliases[K]),M[W]=K;return M}(this.schema,m.styles||null),this.sortKeys=m.sortKeys||!1,this.lineWidth=m.lineWidth||80,this.noRefs=m.noRefs||!1,this.noCompatMode=m.noCompatMode||!1,this.condenseFlow=m.condenseFlow||!1,this.quotingType='"'===m.quotingType?2:1,this.forceQuotes=m.forceQuotes||!1,this.replacer="function"==typeof m.replacer?m.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Tp(m,T){for(var W,M=Ee.repeat(" ",T),I=0,P=-1,z="",K=m.length;I<K;)-1===(P=m.indexOf("\n",I))?(W=m.slice(I),I=K):(W=m.slice(I,P+1),I=P+1),W.length&&"\n"!==W&&(z+=M),z+=W;return z}function uo(m,T){return"\n"+Ee.repeat(" ",m.indent*T)}function mc(m){return 32===m||9===m}function zs(m){return 32<=m&&m<=126||161<=m&&m<=55295&&8232!==m&&8233!==m||57344<=m&&m<=65533&&65279!==m||65536<=m&&m<=1114111}function _u(m){return zs(m)&&65279!==m&&13!==m&&10!==m}function _c(m,T,M){var I=_u(m),P=I&&!mc(m);return(M?I:I&&44!==m&&91!==m&&93!==m&&123!==m&&125!==m)&&35!==m&&!(58===T&&!P)||_u(T)&&!mc(T)&&35===m||58===T&&P}function vu(m,T){var I,M=m.charCodeAt(T);return M>=55296&&M<=56319&&T+1<m.length&&(I=m.charCodeAt(T+1))>=56320&&I<=57343?1024*(M-55296)+I-56320+65536:M}function vc(m){return/^\n* /.test(m)}function kg(m,T,M,I,P){m.dump=function(){if(0===T.length)return 2===m.quotingType?'""':"''";if(!m.noCompatMode&&(-1!==fc.indexOf(T)||Cp.test(T)))return 2===m.quotingType?'"'+T+'"':"'"+T+"'";var z=m.indent*Math.max(1,M),W=-1===m.lineWidth?-1:Math.max(Math.min(m.lineWidth,40),m.lineWidth-z);switch(function(m,T,M,I,P,z,W,K){var le,he=0,Se=null,we=!1,Oe=!1,Fe=-1!==I,Ze=-1,et=function(m){return zs(m)&&65279!==m&&!mc(m)&&45!==m&&63!==m&&58!==m&&44!==m&&91!==m&&93!==m&&123!==m&&125!==m&&35!==m&&38!==m&&42!==m&&33!==m&&124!==m&&61!==m&&62!==m&&39!==m&&34!==m&&37!==m&&64!==m&&96!==m}(vu(m,0))&&function(m){return!mc(m)&&58!==m}(vu(m,m.length-1));if(T||W)for(le=0;le<m.length;he>=65536?le+=2:le++){if(!zs(he=vu(m,le)))return 5;et=et&&_c(he,Se,K),Se=he}else{for(le=0;le<m.length;he>=65536?le+=2:le++){if(10===(he=vu(m,le)))we=!0,Fe&&(Oe=Oe||le-Ze-1>I&&" "!==m[Ze+1],Ze=le);else if(!zs(he))return 5;et=et&&_c(he,Se,K),Se=he}Oe=Oe||Fe&&le-Ze-1>I&&" "!==m[Ze+1]}return we||Oe?M>9&&vc(m)?5:W?2===z?5:2:Oe?4:3:!et||W||P(m)?2===z?5:2:1}(T,I||m.flowLevel>-1&&M>=m.flowLevel,m.indent,W,function(he){return function(m,T){var M,I;for(M=0,I=m.implicitTypes.length;M<I;M+=1)if(m.implicitTypes[M].resolve(T))return!0;return!1}(m,he)},m.quotingType,m.forceQuotes&&!I,P)){case 1:return T;case 2:return"'"+T.replace(/'/g,"''")+"'";case 3:return"|"+bu(T,m.indent)+Va(Tp(T,z));case 4:return">"+bu(T,m.indent)+Va(Tp(function(m,T){for(var z,W,M=/(\n+)([^\n]*)/g,I=(he=void 0,he=m.indexOf("\n"),M.lastIndex=he=-1!==he?he:m.length,Ha(m.slice(0,he),T)),P="\n"===m[0]||" "===m[0];W=M.exec(m);){var le=W[2];z=" "===le[0],I+=W[1]+(P||z||""===le?"":"\n")+Ha(le,T),P=z}var he;return I}(T,W),z));case 5:return'"'+function(m){for(var I,T="",M=0,P=0;P<m.length;M>=65536?P+=2:P++)M=vu(m,P),!(I=_n[M])&&zs(M)?(T+=m[P],M>=65536&&(T+=m[P+1])):T+=I||Fd(M);return T}(T)+'"';default:throw new Ot("impossible error: invalid scalar style")}}()}function bu(m,T){var M=vc(m)?String(T):"",I="\n"===m[m.length-1];return M+(!I||"\n"!==m[m.length-2]&&"\n"!==m?I?"":"-":"+")+"\n"}function Va(m){return"\n"===m[m.length-1]?m.slice(0,-1):m}function Ha(m,T){if(""===m||" "===m[0])return m;for(var I,z,M=/ [^ ]/g,P=0,W=0,K=0,le="";I=M.exec(m);)(K=I.index)-P>T&&(le+="\n"+m.slice(P,z=W>P?W:K),P=z+1),W=K;return le+="\n",(le+=m.length-P>T&&W>P?m.slice(P,W)+"\n"+m.slice(W+1):m.slice(P)).slice(1)}function En(m,T,M){var I,P,z,W,K,le;for(z=0,W=(P=M?m.explicitTypes:m.implicitTypes).length;z<W;z+=1)if(((K=P[z]).instanceOf||K.predicate)&&(!K.instanceOf||"object"==typeof T&&T instanceof K.instanceOf)&&(!K.predicate||K.predicate(T))){if(m.tag=M?K.multi&&K.representName?K.representName(T):K.tag:"?",K.represent){if(le=m.styleMap[K.tag]||K.defaultStyle,"[object Function]"===dc.call(K.represent))I=K.represent(T,le);else{if(!co.call(K.represent,le))throw new Ot("!<"+K.tag+'> tag resolver accepts not "'+le+'" style');I=K.represent[le](T,le)}m.dump=I}return!0}return!1}function Vo(m,T,M,I,P,z,W){m.tag=null,m.dump=M,En(m,M,!1)||En(m,M,!0);var he,K=dc.call(m.dump),le=I;I&&(I=m.flowLevel<0||m.flowLevel>T);var we,Oe,Se="[object Object]"===K||"[object Array]"===K;if(Se&&(Oe=-1!==(we=m.duplicates.indexOf(M))),(null!==m.tag&&"?"!==m.tag||Oe||2!==m.indent&&T>0)&&(P=!1),Oe&&m.usedDuplicates[we])m.dump="*ref_"+we;else{if(Se&&Oe&&!m.usedDuplicates[we]&&(m.usedDuplicates[we]=!0),"[object Object]"===K)I&&0!==Object.keys(m.dump).length?(function(m,T,M,I){var K,le,he,Se,we,Oe,P="",z=m.tag,W=Object.keys(M);if(!0===m.sortKeys)W.sort();else if("function"==typeof m.sortKeys)W.sort(m.sortKeys);else if(m.sortKeys)throw new Ot("sortKeys must be a boolean or a function");for(K=0,le=W.length;K<le;K+=1)Oe="",(!I||""!==P)&&(Oe+=uo(m,T)),Se=M[he=W[K]],m.replacer&&(Se=m.replacer.call(M,he,Se)),Vo(m,T+1,he,!0,!0,!0)&&((we=null!==m.tag&&"?"!==m.tag||m.dump&&m.dump.length>1024)&&(m.dump&&10===m.dump.charCodeAt(0)?Oe+="?":Oe+="? "),Oe+=m.dump,we&&(Oe+=uo(m,T)),Vo(m,T+1,Se,!0,we)&&(m.dump&&10===m.dump.charCodeAt(0)?Oe+=":":Oe+=": ",P+=Oe+=m.dump));m.tag=z,m.dump=P||"{}"}(m,T,m.dump,P),Oe&&(m.dump="&ref_"+we+m.dump)):(function(m,T,M){var W,K,le,he,Se,I="",P=m.tag,z=Object.keys(M);for(W=0,K=z.length;W<K;W+=1)Se="",""!==I&&(Se+=", "),m.condenseFlow&&(Se+='"'),he=M[le=z[W]],m.replacer&&(he=m.replacer.call(M,le,he)),Vo(m,T,le,!1,!1)&&(m.dump.length>1024&&(Se+="? "),Se+=m.dump+(m.condenseFlow?'"':"")+":"+(m.condenseFlow?"":" "),Vo(m,T,he,!1,!1)&&(I+=Se+=m.dump));m.tag=P,m.dump="{"+I+"}"}(m,T,m.dump),Oe&&(m.dump="&ref_"+we+" "+m.dump));else if("[object Array]"===K)I&&0!==m.dump.length?(function(m,T,M,I){var W,K,le,P="",z=m.tag;for(W=0,K=M.length;W<K;W+=1)le=M[W],m.replacer&&(le=m.replacer.call(M,String(W),le)),(Vo(m,T+1,le,!0,!0,!1,!0)||void 0===le&&Vo(m,T+1,null,!0,!0,!1,!0))&&((!I||""!==P)&&(P+=uo(m,T)),m.dump&&10===m.dump.charCodeAt(0)?P+="-":P+="- ",P+=m.dump);m.tag=z,m.dump=P||"[]"}(m,m.noArrayIndent&&!W&&T>0?T-1:T,m.dump,P),Oe&&(m.dump="&ref_"+we+m.dump)):(function(m,T,M){var z,W,K,I="",P=m.tag;for(z=0,W=M.length;z<W;z+=1)K=M[z],m.replacer&&(K=m.replacer.call(M,String(z),K)),(Vo(m,T,K,!1,!1)||void 0===K&&Vo(m,T,null,!1,!1))&&(""!==I&&(I+=","+(m.condenseFlow?"":" ")),I+=m.dump);m.tag=P,m.dump="["+I+"]"}(m,T,m.dump),Oe&&(m.dump="&ref_"+we+" "+m.dump));else{if("[object String]"!==K){if("[object Undefined]"===K)return!1;if(m.skipInvalid)return!1;throw new Ot("unacceptable kind of an object to dump "+K)}"?"!==m.tag&&kg(m,m.dump,T,z,le)}null!==m.tag&&"?"!==m.tag&&(he=encodeURI("!"===m.tag[0]?m.tag.slice(1):m.tag).replace(/!/g,"%21"),he="!"===m.tag[0]?"!"+he:"tag:yaml.org,2002:"===he.slice(0,18)?"!!"+he.slice(18):"!<"+he+">",m.dump=he+" "+m.dump)}return!0}function Ng(m,T){var P,z,M=[],I=[];for(Ho(m,M,I),P=0,z=I.length;P<z;P+=1)T.duplicates.push(M[I[P]]);T.usedDuplicates=new Array(z)}function Ho(m,T,M){var I,P,z;if(null!==m&&"object"==typeof m)if(-1!==(P=T.indexOf(m)))-1===M.indexOf(P)&&M.push(P);else if(T.push(m),Array.isArray(m))for(P=0,z=m.length;P<z;P+=1)Ho(m[P],T,M);else for(P=0,z=(I=Object.keys(m)).length;P<z;P+=1)Ho(m[I[P]],T,M)}function yu(m,T){return function(){throw new Error("Function yaml."+m+" is removed in js-yaml 4. Use yaml."+T+" instead, which is now safe by default.")}}const jd={Type:Ei,Schema:hn,FAILSAFE_SCHEMA:nc,JSON_SCHEMA:ts,CORE_SCHEMA:Dd,DEFAULT_SCHEMA:yl,load:Ws.load,loadAll:Ws.loadAll,dump:function(m,T){var M=new Vd(T=T||{});M.noRefs||Ng(m,M);var I=m;return M.replacer&&(I=M.replacer.call({"":I},"",I)),Vo(M,0,I,!0,!0)?M.dump+"\n":""},YAMLException:Ot,types:{binary:lo,float:Bt,map:bg,null:Td,pairs:hi,set:Ti,timestamp:Rd,bool:wd,int:ao,merge:pn,omap:Id,seq:Ed,str:zr},safeLoad:yu("safeLoad","load"),safeLoadAll:yu("safeLoadAll","loadAll"),safeDump:yu("safeDump","dump")},Dl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,{FormData:Uo,Blob:Tu,File:Xd}=Dl;function Ts(m){return function(m){if(q(m))return G(m)}(m)||function(m){if(void 0!==_e&&null!=re(m)||null!=m["@@iterator"])return Z(m)}(m)||fe(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Rp=_(71049),Do=_.n(Rp),xp=function(T){return":/?#[]@!$&'()*+,;=".indexOf(T)>-1},Ip=function(T){return/^[a-z0-9\-._~]+$/i.test(T)};function as(m){var T,M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},I=M.escape,P=arguments.length>2?arguments[2]:void 0;return"number"==typeof m&&(m=m.toString()),"string"==typeof m&&m.length&&I?P?JSON.parse(m):Jt()(T=Ts(m)).call(T,function(z){var W,K;if(Ip(z)||xp(z)&&"unsafe"===I)return z;var le=new TextEncoder;return Jt()(W=Jt()(K=ln()(le.encode(z))).call(K,function(Se){var we;return Do()(we="0".concat(Se.toString(16).toUpperCase())).call(we,-2)})).call(W,function(Se){return"%".concat(Se)}).join("")}).join(""):m}function ls(m){var T=m.value;return Array.isArray(T)?function(m){var T=m.key,M=m.value,I=m.style,P=m.explode,z=m.escape,W=function(we){return as(we,{escape:z})};if("simple"===I)return Jt()(M).call(M,function(Se){return W(Se)}).join(",");if("label"===I)return".".concat(Jt()(M).call(M,function(Se){return W(Se)}).join("."));if("matrix"===I)return Jt()(M).call(M,function(Se){return W(Se)}).reduce(function(Se,we){var Oe,Fe,Ze;return!Se||P?Ke()(Fe=Ke()(Ze="".concat(Se||"",";")).call(Ze,T,"=")).call(Fe,we):Ke()(Oe="".concat(Se,",")).call(Oe,we)},"");if("form"===I){var K=P?"&".concat(T,"="):",";return Jt()(M).call(M,function(Se){return W(Se)}).join(K)}if("spaceDelimited"===I){var le=P?"".concat(T,"="):"";return Jt()(M).call(M,function(Se){return W(Se)}).join(" ".concat(le))}if("pipeDelimited"===I){var he=P?"".concat(T,"="):"";return Jt()(M).call(M,function(Se){return W(Se)}).join("|".concat(he))}}(m):"object"===oe(T)?function(m){var T=m.key,M=m.value,I=m.style,P=m.explode,z=m.escape,W=function(he){return as(he,{escape:z})},K=Yt()(M);return"simple"===I?K.reduce(function(le,he){var Se,we,Oe,Fe=W(M[he]),Ze=P?"=":",",et=le?"".concat(le,","):"";return Ke()(Se=Ke()(we=Ke()(Oe="".concat(et)).call(Oe,he)).call(we,Ze)).call(Se,Fe)},""):"label"===I?K.reduce(function(le,he){var Se,we,Oe,Fe=W(M[he]),Ze=P?"=":".",et=le?"".concat(le,"."):".";return Ke()(Se=Ke()(we=Ke()(Oe="".concat(et)).call(Oe,he)).call(we,Ze)).call(Se,Fe)},""):"matrix"===I&&P?K.reduce(function(le,he){var Se,we,Oe=W(M[he]),Fe=le?"".concat(le,";"):";";return Ke()(Se=Ke()(we="".concat(Fe)).call(we,he,"=")).call(Se,Oe)},""):"matrix"===I?K.reduce(function(le,he){var Se,we,Oe=W(M[he]),Fe=le?"".concat(le,","):";".concat(T,"=");return Ke()(Se=Ke()(we="".concat(Fe)).call(we,he,",")).call(Se,Oe)},""):"form"===I?K.reduce(function(le,he){var Se,we,Oe,Fe,Ze=W(M[he]),et=le?Ke()(Se="".concat(le)).call(Se,P?"&":","):"",_t=P?"=":",";return Ke()(we=Ke()(Oe=Ke()(Fe="".concat(et)).call(Fe,he)).call(Oe,_t)).call(we,Ze)},""):void 0}(m):function(m){var W,T=m.key,M=m.value,I=m.style,P=m.escape,z=function(le){return as(le,{escape:P})};return"simple"===I?z(M):"label"===I?".".concat(z(M)):"matrix"===I?Ke()(W=";".concat(T,"=")).call(W,z(M)):"form"===I||"deepObject"===I?z(M):void 0}(m)}const Bg=function(T,M){M.body=T};var $d={serializeRes:Ap,mergeInQueryOrForm:Xr};function wr(m){return Go.apply(this,arguments)}function Go(){return(Go=De(Xe().mark(function m(T){var M,P,z,W,K=arguments;return Xe().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(M=K.length>1&&void 0!==K[1]?K[1]:{},"object"===oe(T)&&(T=(M=T).url),M.headers=M.headers||{},$d.mergeInQueryOrForm(M),M.headers&&Yt()(M.headers).forEach(function(Se){var we=M.headers[Se];"string"==typeof we&&(M.headers[Se]=we.replace(/\n+/g," "))}),!M.requestInterceptor){he.next=12;break}return he.next=8,M.requestInterceptor(M);case 8:if(he.t0=he.sent,he.t0){he.next=11;break}he.t0=M;case 11:M=he.t0;case 12:return/multipart\/form-data/i.test(M.headers["content-type"]||M.headers["Content-Type"])&&M.body instanceof Uo&&(delete M.headers["content-type"],delete M.headers["Content-Type"]),he.prev=14,he.next=17,(M.userFetch||fetch)(M.url,M);case 17:return P=he.sent,he.next=20,$d.serializeRes(P,T,M);case 20:if(P=he.sent,!M.responseInterceptor){he.next=28;break}return he.next=24,M.responseInterceptor(P);case 24:if(he.t1=he.sent,he.t1){he.next=27;break}he.t1=P;case 27:P=he.t1;case 28:he.next=39;break;case 30:if(he.prev=30,he.t2=he.catch(14),P){he.next=34;break}throw he.t2;case 34:throw(z=new Error(P.statusText||"response status is ".concat(P.status))).status=P.status,z.statusCode=P.status,z.responseError=he.t2,z;case 39:if(P.ok){he.next=45;break}throw(W=new Error(P.statusText||"response status is ".concat(P.status))).status=P.status,W.statusCode=P.status,W.response=P,W;case 45:return he.abrupt("return",P);case 46:case"end":return he.stop()}},m,null,[[14,30]])}))).apply(this,arguments)}var Qi=function(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(json|xml|yaml|text)\b/.test(T)};function jr(m,T){return T&&(0===T.indexOf("application/json")||T.indexOf("+json")>0)?JSON.parse(m):jd.load(m)}function Ap(m,T){var M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},I=M.loadSpec,P=void 0!==I&&I,z={ok:m.ok,url:m.url||T,status:m.status,statusText:m.statusText,headers:Op(m.headers)},W=z.headers["content-type"],K=P||Qi(W),le=K?m.text:m.blob||m.buffer;return le.call(m).then(function(he){if(z.text=he,z.data=he,K)try{var Se=jr(he,W);z.body=Se,z.obj=Se}catch(we){z.parseError=we}return z})}function yc(m){return ut()(m).call(m,", ")?m.split(", "):m}function Op(){var m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"!=typeof Ft()(m)?{}:ln()(Ft()(m).call(m)).reduce(function(T,M){var I=Ce(M,2);return T[I[0]]=yc(I[1]),T},{})}function Kd(m,T){return!T&&"undefined"!=typeof navigator&&(T=navigator),T&&"ReactNative"===T.product?!(!m||"object"!==oe(m)||"string"!=typeof m.uri):!!(void 0!==Xd&&m instanceof Xd||void 0!==Tu&&m instanceof Tu||ArrayBuffer.isView(m))||null!==m&&"object"===oe(m)&&"function"==typeof m.pipe}function Jd(m,T){return Array.isArray(m)&&m.some(function(M){return Kd(M,T)})}var Ru={form:",",spaceDelimited:"%20",pipeDelimited:"|"},xu={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Cc(m,T){var M=arguments.length>2&&void 0!==arguments[2]&&arguments[2],I=T.collectionFormat,P=T.allowEmptyValue,z=T.serializationOption,W=T.encoding,K="object"!==oe(T)||Array.isArray(T)?T:T.value,le=M?function(Ze){return Ze.toString()}:function(Ze){return encodeURIComponent(Ze)},he=le(m);if(void 0===K&&P)return[[he,""]];if(Kd(K)||Jd(K))return[[he,K]];if(z)return Ec(m,K,M,z);if(W){if([oe(W.style),oe(W.explode),oe(W.allowReserved)].some(function(Ze){return"undefined"!==Ze})){var Se=W.style,we=W.explode,Oe=W.allowReserved;return Ec(m,K,M,{style:Se,explode:we,allowReserved:Oe})}if(W.contentType){if("application/json"===W.contentType){var Fe="string"==typeof K?K:Kn()(K);return[[he,le(Fe)]]}return[[he,le(K.toString())]]}return"object"!==oe(K)?[[he,le(K)]]:Array.isArray(K)&&K.every(function(Ze){return"object"!==oe(Ze)})?[[he,Jt()(K).call(K,le).join(",")]]:[[he,le(Kn()(K))]]}return"object"!==oe(K)?[[he,le(K)]]:Array.isArray(K)?"multi"===I?[[he,Jt()(K).call(K,le)]]:[[he,Jt()(K).call(K,le).join(xu[I||"csv"])]]:[[he,""]]}function Ec(m,T,M,I){var P,Se,we,z=I.style||"form",W=void 0===I.explode?"form"===z:I.explode,K=!M&&(I&&I.allowReserved?"unsafe":"reserved"),le=function(Fe){return as(Fe,{escape:K})},he=M?function(Oe){return Oe}:function(Oe){return as(Oe,{escape:K})};return"object"!==oe(T)?[[he(m),le(T)]]:Array.isArray(T)?W?[[he(m),Jt()(T).call(T,le)]]:[[he(m),Jt()(T).call(T,le).join(Ru[z])]]:"deepObject"===z?Jt()(Se=Yt()(T)).call(Se,function(Oe){var Fe;return[he(Ke()(Fe="".concat(m,"[")).call(Fe,Oe,"]")),le(T[Oe])]}):W?Jt()(we=Yt()(T)).call(we,function(Oe){return[he(Oe),le(T[Oe])]}):[[he(m),Jt()(P=Yt()(T)).call(P,function(Oe){var Fe;return[Ke()(Fe="".concat(he(Oe),",")).call(Fe,le(T[Oe]))]}).join(",")]]}function kp(m){return mn()(m).reduce(function(T,M){var K,I=Ce(M,2),W=Q(Cc(I[0],I[1],!0));try{for(W.s();!(K=W.n()).done;){var le=Ce(K.value,2),he=le[0],Se=le[1];if(Array.isArray(Se)){var Oe,we=Q(Se);try{for(we.s();!(Oe=we.n()).done;){var Fe=Oe.value;if(ArrayBuffer.isView(Fe)){var Ze=new Tu([Fe]);T.append(he,Ze)}else T.append(he,Fe)}}catch(_t){we.e(_t)}finally{we.f()}}else if(ArrayBuffer.isView(Se)){var et=new Tu([Se]);T.append(he,et)}else T.append(he,Se)}}catch(_t){W.e(_t)}finally{W.f()}return T},new Uo)}function Qd(m){var T=Yt()(m).reduce(function(M,I){var z,P=Q(Cc(I,m[I]));try{for(P.s();!(z=P.n()).done;){var W=Ce(z.value,2);M[W[0]]=W[1]}}catch(he){P.e(he)}finally{P.f()}return M},{});return Ne().stringify(T,{encode:!1,indices:!1})||""}function Xr(){var m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},T=m.url,M=void 0===T?"":T,I=m.query,P=m.form,z=function(){for(var pt=arguments.length,ni=new Array(pt),Jn=0;Jn<pt;Jn++)ni[Jn]=arguments[Jn];var pr=An()(ni).call(ni,function(Wi){return Wi}).join("&");return pr?"?".concat(pr):""};if(P){var W=Yt()(P).some(function($t){var pt=P[$t].value;return Kd(pt)||Jd(pt)}),K=m.headers["content-type"]||m.headers["Content-Type"];if(W||/multipart\/form-data/i.test(K)){var le=kp(m.form);Bg(le,m)}else m.body=Qd(P);delete m.form}if(I){var he=M.split("?"),Se=Ce(he,2),we=Se[0],Oe=Se[1],Fe="";if(Oe){var Ze=Ne().parse(Oe),et=Yt()(I);et.forEach(function($t){return delete Ze[$t]}),Fe=Ne().stringify(Ze,{encode:!0})}var _t=z(Fe,Qd(I));m.url=we+_t,delete m.query}return m}function Np(m,T){if(!(m instanceof T))throw new TypeError("Cannot call a class as a function")}function Lp(m,T){for(var M=0;M<T.length;M++){var I=T[M];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),O(m,I.key,I)}}function Ys(m,T,M){return T&&Lp(m.prototype,T),M&&Lp(m,M),m}var m,Rl=_(78804),Vg=_.n(Rl),Hg=_(96916),xl=_.n(Hg),Cv=_(3498),Iu=_.n(Cv),Pp=(m=function(T,M){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,P){I.__proto__=P}||function(I,P){for(var z in P)P.hasOwnProperty(z)&&(I[z]=P[z])})(T,M)},function(T,M){function I(){this.constructor=T}m(T,M),T.prototype=null===M?Object.create(M):(I.prototype=M.prototype,new I)}),$s=Object.prototype.hasOwnProperty;function Ga(m,T){return $s.call(m,T)}function Au(m){if(Array.isArray(m)){for(var M=new Array(m.length),T=0;T<M.length;T++)M[T]=""+T;return M}if(Object.keys)return Object.keys(m);for(var I in M=[],m)Ga(m,I)&&M.push(I);return M}function Or(m){switch(typeof m){case"object":return JSON.parse(JSON.stringify(m));case"undefined":return null;default:return m}}function Ks(m){for(var I,T=0,M=m.length;T<M;){if(!((I=m.charCodeAt(T))>=48&&I<=57))return!1;T++}return!0}function zn(m){return-1===m.indexOf("/")&&-1===m.indexOf("~")?m:m.replace(/~/g,"~0").replace(/\//g,"~1")}function ua(m){return m.replace(/~1/g,"/").replace(/~0/g,"~")}function qd(m){if(void 0===m)return!0;if(m)if(Array.isArray(m)){for(var T=0,M=m.length;T<M;T++)if(qd(m[T]))return!0}else if("object"==typeof m){var I=Au(m),P=I.length;for(T=0;T<P;T++)if(qd(m[I[T]]))return!0}return!1}function eh(m,T){var M=[m];for(var I in T){var P="object"==typeof T[I]?JSON.stringify(T[I],null,2):T[I];void 0!==P&&M.push(I+": "+P)}return M.join("\n")}var th=function(m){function T(M,I,P,z,W){var K=this.constructor,le=m.call(this,eh(M,{name:I,index:P,operation:z,tree:W}))||this;return le.name=I,le.index=P,le.operation=z,le.tree=W,Object.setPrototypeOf(le,K.prototype),le.message=eh(M,{name:I,index:P,operation:z,tree:W}),le}return Pp(T,m),T}(Error),Zi=th,Fp=Or,cs={add:function(m,T,M){return m[T]=this.value,{newDocument:M}},remove:function(m,T,M){var I=m[T];return delete m[T],{newDocument:M,removed:I}},replace:function(m,T,M){var I=m[T];return m[T]=this.value,{newDocument:M,removed:I}},move:function(m,T,M){var I=za(M,this.path);I&&(I=Or(I));var P=Yr(M,{op:"remove",path:this.from}).removed;return Yr(M,{op:"add",path:this.path,value:P}),{newDocument:M,removed:I}},copy:function(m,T,M){var I=za(M,this.from);return Yr(M,{op:"add",path:this.path,value:Or(I)}),{newDocument:M}},test:function(m,T,M){return{newDocument:M,test:Al(m[T],this.value)}},_get:function(m,T,M){return this.value=m[T],{newDocument:M}}},nh={add:function(m,T,M){return Ks(T)?m.splice(T,0,this.value):m[T]=this.value,{newDocument:M,index:T}},remove:function(m,T,M){return{newDocument:M,removed:m.splice(T,1)[0]}},replace:function(m,T,M){var I=m[T];return m[T]=this.value,{newDocument:M,removed:I}},move:cs.move,copy:cs.copy,test:cs.test,_get:cs._get};function za(m,T){if(""==T)return m;var M={op:"_get",path:T};return Yr(m,M),M.value}function Yr(m,T,M,I,P,z){if(void 0===M&&(M=!1),void 0===I&&(I=!0),void 0===P&&(P=!0),void 0===z&&(z=0),M&&("function"==typeof M?M(T,0,m,T.path):Il(T,0)),""===T.path){var W={newDocument:m};if("add"===T.op)return W.newDocument=T.value,W;if("replace"===T.op)return W.newDocument=T.value,W.removed=m,W;if("move"===T.op||"copy"===T.op)return W.newDocument=za(m,T.from),"move"===T.op&&(W.removed=m),W;if("test"===T.op){if(W.test=Al(m,T.value),!1===W.test)throw new Zi("Test operation failed","TEST_OPERATION_FAILED",z,T,m);return W.newDocument=m,W}if("remove"===T.op)return W.removed=m,W.newDocument=null,W;if("_get"===T.op)return T.value=m,W;if(M)throw new Zi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",z,T,m);return W}I||(m=Or(m));var le=(T.path||"").split("/"),he=m,Se=1,we=le.length,Oe=void 0,Fe=void 0,Ze=void 0;for(Ze="function"==typeof M?M:Il;;){if((Fe=le[Se])&&-1!=Fe.indexOf("~")&&(Fe=ua(Fe)),P&&"__proto__"==Fe)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(M&&void 0===Oe&&(void 0===he[Fe]?Oe=le.slice(0,Se).join("/"):Se==we-1&&(Oe=T.path),void 0!==Oe&&Ze(T,0,m,Oe)),Se++,Array.isArray(he)){if("-"===Fe)Fe=he.length;else{if(M&&!Ks(Fe))throw new Zi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",z,T,m);Ks(Fe)&&(Fe=~~Fe)}if(Se>=we){if(M&&"add"===T.op&&Fe>he.length)throw new Zi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",z,T,m);if(!1===(W=nh[T.op].call(T,he,Fe,m)).test)throw new Zi("Test operation failed","TEST_OPERATION_FAILED",z,T,m);return W}}else if(Se>=we){if(!1===(W=cs[T.op].call(T,he,Fe,m)).test)throw new Zi("Test operation failed","TEST_OPERATION_FAILED",z,T,m);return W}if(he=he[Fe],M&&Se<we&&(!he||"object"!=typeof he))throw new Zi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",z,T,m)}}function Ro(m,T,M,I,P){if(void 0===I&&(I=!0),void 0===P&&(P=!0),M&&!Array.isArray(T))throw new Zi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");I||(m=Or(m));for(var z=new Array(T.length),W=0,K=T.length;W<K;W++)z[W]=Yr(m,T[W],M,!0,P,W),m=z[W].newDocument;return z.newDocument=m,z}function Ug(m,T,M){var I=Yr(m,T);if(!1===I.test)throw new Zi("Test operation failed","TEST_OPERATION_FAILED",M,T,m);return I.newDocument}function Il(m,T,M,I){if("object"!=typeof m||null===m||Array.isArray(m))throw new Zi("Operation is not an object","OPERATION_NOT_AN_OBJECT",T,m,M);if(!cs[m.op])throw new Zi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",T,m,M);if("string"!=typeof m.path)throw new Zi("Operation `path` property is not a string","OPERATION_PATH_INVALID",T,m,M);if(0!==m.path.indexOf("/")&&m.path.length>0)throw new Zi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",T,m,M);if(("move"===m.op||"copy"===m.op)&&"string"!=typeof m.from)throw new Zi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",T,m,M);if(("add"===m.op||"replace"===m.op||"test"===m.op)&&void 0===m.value)throw new Zi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",T,m,M);if(("add"===m.op||"replace"===m.op||"test"===m.op)&&qd(m.value))throw new Zi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",T,m,M);if(M)if("add"==m.op){var P=m.path.split("/").length,z=I.split("/").length;if(P!==z+1&&P!==z)throw new Zi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",T,m,M)}else if("replace"===m.op||"remove"===m.op||"_get"===m.op){if(m.path!==I)throw new Zi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",T,m,M)}else if("move"===m.op||"copy"===m.op){var K=wc([{op:"_get",path:m.from,value:void 0}],M);if(K&&"OPERATION_PATH_UNRESOLVABLE"===K.name)throw new Zi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",T,m,M)}}function wc(m,T,M){try{if(!Array.isArray(m))throw new Zi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(T)Ro(Or(T),Or(m),M||!0);else{M=M||Il;for(var I=0;I<m.length;I++)M(m[I],I,T,void 0)}}catch(P){if(P instanceof Zi)return P;throw P}}function Al(m,T){if(m===T)return!0;if(m&&T&&"object"==typeof m&&"object"==typeof T){var P,z,W,M=Array.isArray(m),I=Array.isArray(T);if(M&&I){if((z=m.length)!=T.length)return!1;for(P=z;0!=P--;)if(!Al(m[P],T[P]))return!1;return!0}if(M!=I)return!1;var K=Object.keys(m);if((z=K.length)!==Object.keys(T).length)return!1;for(P=z;0!=P--;)if(!T.hasOwnProperty(K[P]))return!1;for(P=z;0!=P--;)if(!Al(m[W=K[P]],T[W]))return!1;return!0}return m!=m&&T!=T}var Js=new WeakMap,ih=function(T){this.observers=new Map,this.obj=T},Gg=function(T,M){this.callback=T,this.observer=M};function rh(m,T){T.unobserve()}function Bp(m,T){var I,P=function(m){return Js.get(m)}(m);if(P){var z=function(m,T){return m.observers.get(T)}(P,T);I=z&&z.observer}else P=new ih(m),Js.set(m,P);if(I)return I;if(I={},P.value=Or(m),T){I.callback=T,I.next=null;var W=function(){Qs(I)},K=function(){clearTimeout(I.next),I.next=setTimeout(W)};"undefined"!=typeof window&&(window.addEventListener("mouseup",K),window.addEventListener("keyup",K),window.addEventListener("mousedown",K),window.addEventListener("keydown",K),window.addEventListener("change",K))}return I.patches=[],I.object=m,I.unobserve=function(){Qs(I),clearTimeout(I.next),function(m,T){m.observers.delete(T.callback)}(P,I),"undefined"!=typeof window&&(window.removeEventListener("mouseup",K),window.removeEventListener("keyup",K),window.removeEventListener("mousedown",K),window.removeEventListener("keydown",K),window.removeEventListener("change",K))},P.observers.set(T,new Gg(T,I)),I}function Qs(m,T){void 0===T&&(T=!1);var M=Js.get(m.object);cn(M.value,m.object,m.patches,"",T),m.patches.length&&Ro(M.value,m.patches);var I=m.patches;return I.length>0&&(m.patches=[],m.callback&&m.callback(I)),I}function cn(m,T,M,I,P){if(T!==m){"function"==typeof T.toJSON&&(T=T.toJSON());for(var z=Au(T),W=Au(m),le=!1,he=W.length-1;he>=0;he--){var we=m[Se=W[he]];if(!Ga(T,Se)||void 0===T[Se]&&void 0!==we&&!1===Array.isArray(T))Array.isArray(m)===Array.isArray(T)?(P&&M.push({op:"test",path:I+"/"+zn(Se),value:Or(we)}),M.push({op:"remove",path:I+"/"+zn(Se)}),le=!0):(P&&M.push({op:"test",path:I,value:m}),M.push({op:"replace",path:I,value:T}));else{var Oe=T[Se];"object"==typeof we&&null!=we&&"object"==typeof Oe&&null!=Oe&&Array.isArray(we)===Array.isArray(Oe)?cn(we,Oe,M,I+"/"+zn(Se),P):we!==Oe&&(P&&M.push({op:"test",path:I+"/"+zn(Se),value:Or(we)}),M.push({op:"replace",path:I+"/"+zn(Se),value:Or(Oe)}))}}if(le||z.length!=W.length)for(he=0;he<z.length;he++){var Se;!Ga(m,Se=z[he])&&void 0!==T[Se]&&M.push({op:"add",path:I+"/"+zn(Se),value:Or(T[Se])})}}}function kl(m,T,M){void 0===M&&(M=!1);var I=[];return cn(m,T,I,"",M),I}Object.assign({},E,R,{JsonPatchError:th,deepClone:Or,escapePathComponent:zn,unescapePathComponent:ua});var Zs=_(80915),Nl=_.n(Zs),da=_(57469),Sc=_.n(da);const li={add:function(m,T){return{op:"add",path:m,value:T}},replace:oh,remove:function(m){return{op:"remove",path:m}},merge:function(m,T){return{type:"mutation",op:"merge",path:m,value:T}},mergeDeep:function(m,T){return{type:"mutation",op:"mergeDeep",path:m,value:T}},context:function(m,T){return{type:"context",path:m,value:T}},getIn:function(m,T){return T.reduce(function(M,I){return void 0!==I&&M?M[I]:M},m)},applyPatch:function(m,T,M){if(M=M||{},"merge"===(T=H(H({},T),{},{path:T.path&&Vp(T.path)})).op){var I=pe(m,T.path);ee()(I,T.value),Ro(m,[oh(T.path,I)])}else if("mergeDeep"===T.op){var P=pe(m,T.path);for(var z in T.value){var W=T.value[z],K=Array.isArray(W);if(K){var le=P[z]||[];P[z]=Ke()(le).call(le,W)}else if(xo(W)&&!K){var he=H({},P[z]);for(var Se in W){if(Object.prototype.hasOwnProperty.call(he,Se)){he=Nl()(Sc()(he),W);break}ee()(he,U({},Se,W[Se]))}P[z]=he}else P[z]=W}}else if("add"===T.op&&""===T.path&&xo(T.value)){Ro(m,Yt()(T.value).reduce(function(_t,$t){return _t.push({op:"add",path:"/".concat(Vp($t)),value:T.value[$t]}),_t},[]))}else if("replace"===T.op&&""===T.path){var Fe=T.value;M.allowMetaPatches&&T.meta&&F(T)&&(Array.isArray(T.value)||xo(T.value))&&(Fe=H(H({},Fe),T.meta)),m=Fe}else if(Ro(m,[T]),M.allowMetaPatches&&T.meta&&F(T)&&(Array.isArray(T.value)||xo(T.value))){var et=H(H({},pe(m,T.path)),T.meta);Ro(m,[oh(T.path,et)])}return m},parentPathMatch:function(m,T){if(!Array.isArray(T))return!1;for(var M=0,I=T.length;M<I;M+=1)if(T[M]!==m[M])return!1;return!0},flatten:Mc,fullyNormalizeArray:function(m){return Ss(Mc(zp(m)))},normalizeArray:zp,isPromise:function(m){return xo(m)&&Xa(m.then)},forEachNew:function(m,T){try{return Xg(m,sh,T)}catch(M){return M}},forEachNewPrimitive:function(m,T){try{return Xg(m,Wp,T)}catch(M){return M}},isJsonPatch:Dc,isContextPatch:function(m){return ae(m)&&"context"===m.type},isPatch:ae,isMutation:L,isAdditiveMutation:F,isGenerator:function(m){return"[object GeneratorFunction]"===Object.prototype.toString.call(m)},isFunction:Xa,isObject:xo,isError:function(m){return m instanceof Error}};function Vp(m){return Array.isArray(m)?m.length<1?"":"/".concat(Jt()(m).call(m,function(T){return(T+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")):m}function oh(m,T,M){return{op:"replace",path:m,value:T,meta:M}}function Xg(m,T,M){var I;return Ss(Mc(Jt()(I=An()(m).call(m,F)).call(I,function(K){return T(K.value,M,K.path)})||[]))}function Wp(m,T,M){return M=M||[],Array.isArray(m)?Jt()(m).call(m,function(P,z){return Wp(P,T,Ke()(M).call(M,z))}):xo(m)?Jt()(I=Yt()(m)).call(I,function(P){return Wp(m[P],T,Ke()(M).call(M,P))}):T(m,M[M.length-1],M);var I}function sh(m,T,M){var I=[];if((M=M||[]).length>0){var P=T(m,M[M.length-1],M);P&&(I=Ke()(I).call(I,P))}if(Array.isArray(m)){var z=Jt()(m).call(m,function(le,he){return sh(le,T,Ke()(M).call(M,he))});z&&(I=Ke()(I).call(I,z))}else if(xo(m)){var W,K=Jt()(W=Yt()(m)).call(W,function(le){return sh(m[le],T,Ke()(M).call(M,le))});K&&(I=Ke()(I).call(I,K))}return Mc(I)}function zp(m){return Array.isArray(m)?m:[m]}function Mc(m){var T;return Ke()(T=[]).apply(T,Ts(Jt()(m).call(m,function(M){return Array.isArray(M)?Mc(M):M})))}function Ss(m){return An()(m).call(m,function(T){return void 0!==T})}function xo(m){return m&&"object"===oe(m)}function Xa(m){return m&&"function"==typeof m}function Dc(m){if(ae(m)){var T=m.op;return"add"===T||"remove"===T||"replace"===T}return!1}function L(m){return Dc(m)||ae(m)&&"mutation"===m.type}function F(m){return L(m)&&("add"===m.op||"replace"===m.op||"merge"===m.op||"mergeDeep"===m.op)}function ae(m){return m&&"object"===oe(m)}function pe(m,T){try{return za(m,T)}catch(M){return console.error(M),{}}}var Ie=_(14569),ve=_.n(Ie),Me=_(58258),Ge=_.n(Me);function ze(m,T){function M(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var I=arguments.length,P=new Array(I),z=0;z<I;z++)P[z]=arguments[z];this.message=P[0],T&&T.apply(this,P)}return(M.prototype=new Error).name=m,M.prototype.constructor=M,M}var Je=_(16958),tn=_.n(Je),on=["properties"],xn=["properties"],ur=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],Mi=["schema/example","items/example"];function _i(m){var T=m[m.length-1],M=m[m.length-2],I=m.join("/");return on.indexOf(T)>-1&&-1===xn.indexOf(M)||ur.indexOf(I)>-1||Mi.some(function(P){return I.indexOf(P)>-1})}function or(m,T){var M,P=Ce(m.split("#"),2),W=P[1],K=se.resolve(P[0]||"",T||"");return W?Ke()(M="".concat(K,"#")).call(M,W):K}var dr="application/json, application/yaml",Ms=new RegExp("^([a-z]+://|//)","i"),Sr=ze("JSONRefError",function(T,M,I){this.originalError=I,ee()(this,M||{})}),kr={},Ds=new(ve()),$g=[function(m){return"paths"===m[0]&&"responses"===m[3]&&"examples"===m[5]},function(m){return"paths"===m[0]&&"responses"===m[3]&&"content"===m[5]&&"example"===m[7]},function(m){return"paths"===m[0]&&"responses"===m[3]&&"content"===m[5]&&"examples"===m[7]&&"value"===m[9]},function(m){return"paths"===m[0]&&"requestBody"===m[3]&&"content"===m[4]&&"example"===m[6]},function(m){return"paths"===m[0]&&"requestBody"===m[3]&&"content"===m[4]&&"examples"===m[6]&&"value"===m[8]},function(m){return"paths"===m[0]&&"parameters"===m[2]&&"example"===m[4]},function(m){return"paths"===m[0]&&"parameters"===m[3]&&"example"===m[5]},function(m){return"paths"===m[0]&&"parameters"===m[2]&&"examples"===m[4]&&"value"===m[6]},function(m){return"paths"===m[0]&&"parameters"===m[3]&&"examples"===m[5]&&"value"===m[7]},function(m){return"paths"===m[0]&&"parameters"===m[2]&&"content"===m[4]&&"example"===m[6]},function(m){return"paths"===m[0]&&"parameters"===m[2]&&"content"===m[4]&&"examples"===m[6]&&"value"===m[8]},function(m){return"paths"===m[0]&&"parameters"===m[3]&&"content"===m[4]&&"example"===m[7]},function(m){return"paths"===m[0]&&"parameters"===m[3]&&"content"===m[5]&&"examples"===m[7]&&"value"===m[9]}],Kg={key:"$ref",plugin:function(T,M,I,P){var z=P.getInstance(),W=Do()(I).call(I,0,-1);if(!_i(W)&&!function(T){return $g.some(function(M){return M(T)})}(W)){var le=P.getContext(I).baseDoc;if("string"!=typeof T)return new Sr("$ref: must be a string (JSON-Ref)",{$ref:T,baseDoc:le,fullPath:I});var Oe,Fe,Ze,he=jp(T),Se=he[0],we=he[1]||"";try{Oe=le||Se?Sv(Se,le):null}catch(pt){return Jg(pt,{pointer:we,$ref:T,basePath:Oe,fullPath:I})}if(function(m,T,M,I){var P,z,W=Ds.get(I);W||Ds.set(I,W={});var K=function(m){return 0===m.length?"":"/".concat(Jt()(m).call(m,lh).join("/"))}(M),le=Ke()(P="".concat(T||"<specmap-base>","#")).call(P,m),he=K.replace(/allOf\/\d+\/?/g,"");if(T===I.contextTree.get([]).baseDoc&&em(he,m))return!0;var we="";if(M.some(function(Fe){var Ze;return we=Ke()(Ze="".concat(we,"/")).call(Ze,lh(Fe)),W[we]&&W[we].some(function(et){return em(et,le)||em(le,et)})}))return!0;W[he]=Ke()(z=W[he]||[]).call(z,le)}(we,Oe,W,P)&&!z.useCircularStructures){var et=or(T,Oe);return T===et?null:li.replace(I,et)}if(null==Oe?(Ze=be(we),void 0===(Fe=P.get(Ze))&&(Fe=new Sr("Could not resolve reference: ".concat(T),{pointer:we,$ref:T,baseDoc:le,fullPath:I}))):Fe=null!=(Fe=kE(Oe,we)).__value?Fe.__value:Fe.catch(function(pt){throw Jg(pt,{pointer:we,$ref:T,baseDoc:le,fullPath:I})}),Fe instanceof Error)return[li.remove(I),Fe];var _t=or(T,Oe),$t=li.replace(W,Fe,{$$ref:_t});if(Oe&&Oe!==le)return[$t,li.context(W,{baseDoc:Oe})];try{if(!function(m,T){var M=[m];return T.path.reduce(function(P,z){return M.push(P[z]),P[z]},m),function I(P){return li.isObject(P)&&(M.indexOf(P)>=0||Yt()(P).some(function(z){return I(P[z])}))}(T.value)}(P.state,$t)||z.useCircularStructures)return $t}catch(pt){return null}}}},Rc=ee()(Kg,{docCache:kr,absoluteify:Sv,clearCache:function(m){void 0!==m?delete kr[m]:Yt()(kr).forEach(function(T){delete kr[T]})},JSONRefError:Sr,wrapError:Jg,getDoc:Lu,split:jp,extractFromDoc:kE,fetchJSON:function(m){return fetch(m,{headers:{Accept:dr},loadSpec:!0}).then(function(T){return T.text()}).then(function(T){return jd.load(T)})},extract:Zg,jsonPointerToArray:be,unescapeJsonPointerToken:qg});const OE=Rc;function Sv(m,T){if(!Ms.test(m)){var M;if(!T)throw new Sr(Ke()(M="Tried to resolve a relative URL, without having a basePath. path: '".concat(m,"' basePath: '")).call(M,T,"'"));return se.resolve(T,m)}return m}function Jg(m,T){var M,I;return M=m&&m.response&&m.response.body?Ke()(I="".concat(m.response.body.code," ")).call(I,m.response.body.message):m.message,new Sr("Could not resolve reference: ".concat(M),T,m)}function jp(m){return(m+"").split("#")}function kE(m,T){var M=kr[m];if(M&&!li.isPromise(M))try{var I=Zg(T,M);return ee()(xl().resolve(I),{__value:I})}catch(P){return xl().reject(P)}return Lu(m).then(function(P){return Zg(T,P)})}function Lu(m){var T=kr[m];return T?li.isPromise(T)?T:xl().resolve(T):(kr[m]=Rc.fetchJSON(m).then(function(M){return kr[m]=M,M}),kr[m])}function Zg(m,T){var M=be(m);if(M.length<1)return T;var I=li.getIn(T,M);if(void 0===I)throw new Sr("Could not resolve pointer: ".concat(m," does not exist in document"),{pointer:m});return I}function be(m){var T;if("string"!=typeof m)throw new TypeError("Expected a string, got a ".concat(oe(m)));return"/"===m[0]&&(m=m.substr(1)),""===m?[]:Jt()(T=m.split("/")).call(T,qg)}function qg(m){return"string"!=typeof m?m:new(Ge())("=".concat(m.replace(/~1/g,"/").replace(/~0/g,"~"))).get("")}function lh(m){var T,M=new(Ge())([["",m.replace(/~/g,"~0").replace(/\//g,"~1")]]);return Do()(T=M.toString()).call(T,1)}function em(m,T){if(function(T){return!T||"/"===T||"#"===T}(T))return!0;var M=m.charAt(T.length),I=Do()(T).call(T,-1);return 0===m.indexOf(T)&&(!M||"/"===M||"#"===M)&&"#"!==I}var _R=_(85191),Fu=_.n(_R);const sr={key:"allOf",plugin:function(T,M,I,P,z){if(!z.meta||!z.meta.$$ref){var W=Do()(I).call(I,0,-1);if(!_i(W)){if(!Array.isArray(T)){var K=new TypeError("allOf must be an array");return K.fullPath=I,K}var le=!1,he=z.value;if(W.forEach(function(Oe){!he||(he=he[Oe])}),he=H({},he),!Fu()(he)){delete he.allOf;var we,Se=[];return Se.push(P.replace(W,{})),T.forEach(function(Oe,Fe){if(!P.isObject(Oe)){if(le)return null;le=!0;var Ze=new TypeError("Elements in allOf must be objects");return Ze.fullPath=I,Se.push(Ze)}Se.push(P.mergeDeep(W,Oe));var _t=function(m,T){var M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},I=M.specmap,P=M.getBaseUrlForNodePath,z=void 0===P?function(he){var Se;return I.getContext(Ke()(Se=[]).call(Se,Ts(T),Ts(he))).baseDoc}:P,W=M.targetKeys,K=void 0===W?["$ref","$$ref"]:W,le=[];return tn()(m).forEach(function(){if(ut()(K).call(K,this.key)&&"string"==typeof this.node){var Se=this.path,we=Ke()(T).call(T,this.path),Oe=or(this.node,z(Se));le.push(I.replace(we,Oe))}}),le}(Oe,Do()(I).call(I,0,-1),{getBaseUrlForNodePath:function(pt){var ni;return P.getContext(Ke()(ni=[]).call(ni,Ts(I),[Fe],Ts(pt))).baseDoc},specmap:P});Se.push.apply(Se,Ts(_t))}),Se.push(P.mergeDeep(W,he)),he.$$ref||Se.push(P.remove(Ke()(we=[]).call(we,W,"$$ref"))),Se}}}}},Xp={key:"parameters",plugin:function(T,M,I,P){if(Array.isArray(T)&&T.length){var z=ee()([],T),W=Do()(I).call(I,0,-1),K=H({},li.getIn(P.spec,W));return T.forEach(function(le,he){try{z[he].default=P.parameterMacro(K,le)}catch(we){var Se=new Error(we);return Se.fullPath=I,Se}}),li.replace(I,z)}return li.replace(I,T)}},Io={key:"properties",plugin:function(T,M,I,P){var z=H({},T);for(var W in T)try{z[W].default=P.modelPropertyMacro(z[W])}catch(he){var K=new Error(he);return K.fullPath=I,K}return li.replace(I,z)}};var NE=function(){function m(T){Np(this,m),this.root=Yp(T||{})}return Ys(m,[{key:"set",value:function(M,I){var P=this.getParent(M,!0);if(P){var z=M[M.length-1],W=P.children;W[z]?Bu(W[z],I,P):W[z]=Yp(I,P)}else Bu(this.root,I,null)}},{key:"get",value:function(M){if((M=M||[]).length<1)return this.root.value;for(var P,z,I=this.root,W=0;W<M.length&&(P=I.children)[z=M[W]];W+=1)I=P[z];return I&&I.protoValue}},{key:"getParent",value:function(M,I){return!M||M.length<1?null:M.length<2?this.root:Do()(M).call(M,0,-1).reduce(function(P,z){if(!P)return P;var W=P.children;return!W[z]&&I&&(W[z]=Yp(null,P)),W[z]},this.root)}}]),m}();function Yp(m,T){return Bu({children:{}},m,T)}function Bu(m,T,M){return m.value=T||{},m.protoValue=M?H(H({},M.protoValue),m.value):m.value,Yt()(m.children).forEach(function(I){var P=m.children[I];m.children[I]=Bu(P,P.value,m)}),m}var tm=function(){},LE=function(){function m(T){var I,P,M=this;Np(this,m),ee()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new NE,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:ee()(Object.create(this),li,{getInstance:function(){return M}}),allowMetaPatches:!1},T),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=An()(I=Jt()(P=this.plugins).call(P,this.wrapPlugin.bind(this))).call(I,li.isFunction),this.patches.push(li.add([],this.spec)),this.patches.push(li.context([],this.context)),this.updatePatches(this.patches)}return Ys(m,[{key:"debug",value:function(M){if(this.debugLevel===M){for(var I,P=arguments.length,z=new Array(P>1?P-1:0),W=1;W<P;W++)z[W-1]=arguments[W];(I=console).log.apply(I,z)}}},{key:"verbose",value:function(M){if("verbose"===this.debugLevel){for(var I,P,z=arguments.length,W=new Array(z>1?z-1:0),K=1;K<z;K++)W[K-1]=arguments[K];(I=console).log.apply(I,Ke()(P=["[".concat(M,"]   ")]).call(P,W))}}},{key:"wrapPlugin",value:function(M,I){var W,le,he,P=this.pathDiscriminator,z=null;return M[this.pluginProp]?(z=M,W=M[this.pluginProp]):li.isFunction(M)?W=M:li.isObject(M)&&(le=M,he=function(we,Oe){return!Array.isArray(we)||we.every(function(Fe,Ze){return Fe===Oe[Ze]})},W=Xe().mark(function Se(we,Oe){var Fe,Ze,et,_t,$t,pt;return Xe().wrap(function(Jn){for(;;)switch(Jn.prev=Jn.next){case 0:pt=function(Wi,Oi,to){var Wo,Mr,Nr,ii,vr,Dr,Ll,Ya,Hu,Uu,jv,dm,xs;return Xe().wrap(function(Ao){for(;;)switch(Ao.prev=Ao.next){case 0:if(li.isObject(Wi)){Ao.next=6;break}if(le.key!==Oi[Oi.length-1]){Ao.next=4;break}return Ao.next=4,le.plugin(Wi,le.key,Oi,Oe);case 4:Ao.next=30;break;case 6:Mr=Oi[Wo=Oi.length-1],Nr=Oi.indexOf("properties"),ii="properties"===Mr&&Wo===Nr,vr=Oe.allowMetaPatches&&Ze[Wi.$$ref],Dr=0,Ll=Yt()(Wi);case 12:if(!(Dr<Ll.length)){Ao.next=30;break}if(Hu=Wi[Ya=Ll[Dr]],Uu=Ke()(Oi).call(Oi,Ya),jv=li.isObject(Hu),dm=Wi.$$ref,vr){Ao.next=22;break}if(!jv){Ao.next=22;break}return Oe.allowMetaPatches&&dm&&(Ze[dm]=!0),Ao.delegateYield(pt(Hu,Uu,to),"t0",22);case 22:if(ii||Ya!==le.key){Ao.next=27;break}if(xs=he(P,Oi),P&&!xs){Ao.next=27;break}return Ao.next=27,le.plugin(Hu,Ya,Uu,Oe,to);case 27:Dr++,Ao.next=12;break;case 30:case"end":return Ao.stop()}},Fe)},Fe=Xe().mark(pt),Ze={},et=Q(An()(we).call(we,li.isAdditiveMutation)),Jn.prev=4,et.s();case 6:if((_t=et.n()).done){Jn.next=11;break}return Jn.delegateYield(pt(($t=_t.value).value,$t.path,$t),"t0",9);case 9:Jn.next=6;break;case 11:Jn.next=16;break;case 13:Jn.prev=13,Jn.t1=Jn.catch(4),et.e(Jn.t1);case 16:return Jn.prev=16,et.f(),Jn.finish(16);case 19:case"end":return Jn.stop()}},Se,null,[[4,13,16,19]])})),ee()(W.bind(z),{pluginName:M.name||I,isGenerator:li.isGenerator(W)})}},{key:"nextPlugin",value:function(){var M,I=this;return Vg()(M=this.wrappedPlugins).call(M,function(P){return I.getMutationsForPlugin(P).length>0})}},{key:"nextPromisedPatch",value:function(){var M;if(this.promisedPatches.length>0)return xl().race(Jt()(M=this.promisedPatches).call(M,function(I){return I.value}))}},{key:"getPluginHistory",value:function(M){var I=this.constructor.getPluginName(M);return this.pluginHistory[I]||[]}},{key:"getPluginRunCount",value:function(M){return this.getPluginHistory(M).length}},{key:"getPluginHistoryTip",value:function(M){var I=this.getPluginHistory(M);return I&&I[I.length-1]||{}}},{key:"getPluginMutationIndex",value:function(M){var I=this.getPluginHistoryTip(M).mutationIndex;return"number"!=typeof I?-1:I}},{key:"updatePluginHistory",value:function(M,I){var P=this.constructor.getPluginName(M);this.pluginHistory[P]=this.pluginHistory[P]||[],this.pluginHistory[P].push(I)}},{key:"updatePatches",value:function(M){var I=this;li.normalizeArray(M).forEach(function(P){if(P instanceof Error)I.errors.push(P);else try{if(!li.isObject(P))return void I.debug("updatePatches","Got a non-object patch",P);if(I.showDebug&&I.allPatches.push(P),li.isPromise(P.value))return I.promisedPatches.push(P),void I.promisedPatchThen(P);if(li.isContextPatch(P))return void I.setContext(P.path,P.value);if(li.isMutation(P))return void I.updateMutations(P)}catch(z){console.error(z),I.errors.push(z)}})}},{key:"updateMutations",value:function(M){"object"===oe(M.value)&&!Array.isArray(M.value)&&this.allowMetaPatches&&(M.value=H({},M.value));var I=li.applyPatch(this.state,M,{allowMetaPatches:this.allowMetaPatches});I&&(this.mutations.push(M),this.state=I)}},{key:"removePromisedPatch",value:function(M){var I,P=this.promisedPatches.indexOf(M);P<0?this.debug("Tried to remove a promisedPatch that isn't there!"):Iu()(I=this.promisedPatches).call(I,P,1)}},{key:"promisedPatchThen",value:function(M){var I=this;return M.value=M.value.then(function(P){var z=H(H({},M),{},{value:P});I.removePromisedPatch(M),I.updatePatches(z)}).catch(function(P){I.removePromisedPatch(M),I.updatePatches(P)}),M.value}},{key:"getMutations",value:function(M,I){var P;return M=M||0,"number"!=typeof I&&(I=this.mutations.length),Do()(P=this.mutations).call(P,M,I)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(M){var I=this.getPluginMutationIndex(M);return this.getMutations(I+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(M){return li.getIn(this.state,M)}},{key:"_getContext",value:function(M){return this.contextTree.get(M)}},{key:"setContext",value:function(M,I){return this.contextTree.set(M,I)}},{key:"_hasRun",value:function(M){return this.getPluginRunCount(this.getCurrentPlugin())>(M||0)}},{key:"dispatch",value:function(){var K,M=this,I=this,P=this.nextPlugin();if(!P){var z=this.nextPromisedPatch();if(z)return z.then(function(){return M.dispatch()}).catch(function(){return M.dispatch()});var W={spec:this.state,errors:this.errors};return this.showDebug&&(W.patches=this.allPatches),xl().resolve(W)}if(I.pluginCount=I.pluginCount||{},I.pluginCount[P]=(I.pluginCount[P]||0)+1,I.pluginCount[P]>100)return xl().resolve({spec:I.state,errors:Ke()(K=I.errors).call(K,new Error("We've reached a hard limit of ".concat(100," plugin runs")))});if(P!==this.currentPlugin&&this.promisedPatches.length){var le,he=Jt()(le=this.promisedPatches).call(le,function(Oe){return Oe.value});return xl().all(Jt()(he).call(he,function(Oe){return Oe.then(tm,tm)})).then(function(){return M.dispatch()})}return function(){I.currentPlugin=P;var Oe=I.getCurrentMutations(),Fe=I.mutations.length-1;try{if(P.isGenerator){var et,Ze=Q(P(Oe,I.getLib()));try{for(Ze.s();!(et=Ze.n()).done;)we(et.value)}catch(pt){Ze.e(pt)}finally{Ze.f()}}else we(P(Oe,I.getLib()))}catch(pt){console.error(pt),we([ee()(Object.create(pt),{plugin:P})])}finally{I.updatePluginHistory(P,{mutationIndex:Fe})}return I.dispatch()}();function we(Oe){Oe&&(Oe=li.fullyNormalizeArray(Oe),I.updatePatches(Oe,P))}}}],[{key:"getPluginName",value:function(M){return M.pluginName}},{key:"getPatchesOfType",value:function(M,I){return An()(M).call(M,I)}}]),m}(),Rs={refs:OE,allOf:sr,parameters:Xp,properties:Io},dh=_(4471),Rv=_.n(dh),FE=function(T){return String.prototype.toLowerCase.call(T)},nm=function(T){return T.replace(/[^\w]/gi,"_")};function xv(m){var T=m.openapi;return!!T&&ue()(T).call(T,"3")}function $p(m,T){var M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",I=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},P=I.v2OperationIdCompatibilityMode;if(!m||"object"!==oe(m))return null;var z=(m.operationId||"").replace(/\s/g,"");return z.length?nm(m.operationId):BE(T,M,{v2OperationIdCompatibilityMode:P})}function BE(m,T){var M,I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},P=I.v2OperationIdCompatibilityMode;if(P){var z,W,K=Ke()(z="".concat(T.toLowerCase(),"_")).call(z,m).replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return(K=K||Ke()(W="".concat(m.substring(1),"_")).call(W,T)).replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return Ke()(M="".concat(FE(T))).call(M,nm(m))}function Iv(m,T){var M;return Ke()(M="".concat(FE(T),"-")).call(M,m)}function Ic(m,T,M){if(!m||"object"!==oe(m)||!m.paths||"object"!==oe(m.paths))return null;var I=m.paths;for(var P in I)for(var z in I[P])if("PARAMETERS"!==z.toUpperCase()){var W=I[P][z];if(W&&"object"===oe(W)){var K={spec:m,pathName:P,method:z.toUpperCase(),operation:W},le=T(K);if(M&&le)return K}}}function Av(m){var T=m.spec,M=T.paths,I={};if(!M||T.$$normalized)return m;for(var P in M){var z=M[P];if(Rv()(z)){var W=z.parameters,K=function(we){var Oe=z[we];if(!Rv()(Oe))return"continue";var Fe=$p(Oe,P,we);if(Fe){I[Fe]?I[Fe].push(Oe):I[Fe]=[Oe];var Ze=I[Fe];if(Ze.length>1)Ze.forEach(function(Mr,Nr){var ii;Mr.__originalOperationId=Mr.__originalOperationId||Mr.operationId,Mr.operationId=Ke()(ii="".concat(Fe)).call(ii,Nr+1)});else if(void 0!==Oe.operationId){var et=Ze[0];et.__originalOperationId=et.__originalOperationId||Oe.operationId,et.operationId=Fe}}if("parameters"!==we){var _t=[],$t={};for(var pt in T)("produces"===pt||"consumes"===pt||"security"===pt)&&($t[pt]=T[pt],_t.push($t));if(W&&($t.parameters=W,_t.push($t)),_t.length){var Jn,ni=Q(_t);try{for(ni.s();!(Jn=ni.n()).done;){var pr=Jn.value;for(var Wi in pr)if(Oe[Wi]){if("parameters"===Wi){var to,Oi=Q(pr[Wi]);try{var Wo=function(){var Nr=to.value;Oe[Wi].some(function(vr){return vr.name&&vr.name===Nr.name||vr.$ref&&vr.$ref===Nr.$ref||vr.$$ref&&vr.$$ref===Nr.$$ref||vr===Nr})||Oe[Wi].push(Nr)};for(Oi.s();!(to=Oi.n()).done;)Wo()}catch(Mr){Oi.e(Mr)}finally{Oi.f()}}}else Oe[Wi]=pr[Wi]}}catch(Mr){ni.e(Mr)}finally{ni.f()}}}};for(var le in z)K(le)}}return T.$$normalized=!0,m}function Ov(m){var T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},M=T.requestInterceptor,I=T.responseInterceptor,P=m.withCredentials?"include":"same-origin";return function(z){return m({url:z,loadSpec:!0,requestInterceptor:M,responseInterceptor:I,headers:{Accept:dr},credentials:P}).then(function(W){return W.body})}}function hh(m){var M=m.spec,P=m.mode,z=m.allowMetaPatches,W=void 0===z||z,K=m.pathDiscriminator,le=m.modelPropertyMacro,he=m.parameterMacro,Se=m.requestInterceptor,we=m.responseInterceptor,Oe=m.skipNormalization,Fe=m.useCircularStructures,Ze=m.http,et=m.baseDoc;return et=et||m.url,Ze=m.fetch||Ze||wr,M?_t(M):Ov(Ze,{requestInterceptor:Se,responseInterceptor:we})(et).then(_t);function _t($t){et&&(Rs.refs.docCache[et]=$t),Rs.refs.fetchJSON=Ov(Ze,{requestInterceptor:Se,responseInterceptor:we});var pt=[Rs.refs];return"function"==typeof he&&pt.push(Rs.parameters),"function"==typeof le&&pt.push(Rs.properties),"strict"!==P&&pt.push(Rs.allOf),function(m){return new LE(m).dispatch()}({spec:$t,context:{baseDoc:et},plugins:pt,allowMetaPatches:W,pathDiscriminator:K,parameterMacro:he,modelPropertyMacro:le,useCircularStructures:Fe}).then(Oe?function(){var ni=De(Xe().mark(function Jn(pr){return Xe().wrap(function(Oi){for(;;)switch(Oi.prev=Oi.next){case 0:return Oi.abrupt("return",pr);case 1:case"end":return Oi.stop()}},Jn)}));return function(Jn){return ni.apply(this,arguments)}}():Av)}}var rm=_(17410),Vu=_.n(rm);function Jp(){return(Jp=De(Xe().mark(function m(T,M){var I,P,we,Oe,Fe,Ze,et=arguments;return Xe().wrap(function($t){for(;;)switch($t.prev=$t.next){case 0:return P=(I=et.length>2&&void 0!==et[2]?et[2]:{}).returnEntireTree,we={pathDiscriminator:M,baseDoc:I.baseDoc,requestInterceptor:I.requestInterceptor,responseInterceptor:I.responseInterceptor,parameterMacro:I.parameterMacro,modelPropertyMacro:I.modelPropertyMacro,useCircularStructures:I.useCircularStructures},Oe=Av({spec:T}),Fe=Oe.spec,$t.next=6,hh(H(H({},we),{},{spec:Fe,allowMetaPatches:!0,skipNormalization:!0}));case 6:return Ze=$t.sent,!P&&Array.isArray(M)&&M.length&&(Ze.spec=Vu()(Ze.spec,M)||null),$t.abrupt("return",Ze);case 9:case"end":return $t.stop()}},m)}))).apply(this,arguments)}var Ac=function(){return null},Qp_mapTagOperations=function(m){var T=m.spec,M=m.cb,I=void 0===M?Ac:M,P=m.defaultTag,z=void 0===P?"default":P,W=m.v2OperationIdCompatibilityMode,K={},le={};return Ic(T,function(he){var Se=he.pathName,we=he.method,Oe=he.operation;(Oe.tags?function(T){return Array.isArray(T)?T:[T]}(Oe.tags):[z]).forEach(function(Ze){if("string"==typeof Ze){le[Ze]=le[Ze]||{};var pt,et=le[Ze],_t=$p(Oe,Se,we,{v2OperationIdCompatibilityMode:W}),$t=I({spec:T,pathName:Se,method:we,operation:Oe,operationId:_t});if(K[_t])K[_t]+=1,et[Ke()(pt="".concat(_t)).call(pt,K[_t])]=$t;else if(void 0!==et[_t]){var ni,Jn,pr=K[_t]||1;K[_t]=pr+1,et[Ke()(ni="".concat(_t)).call(ni,K[_t])]=$t;var Wi=et[_t];delete et[_t],et[Ke()(Jn="".concat(_t)).call(Jn,pr)]=Wi}else et[_t]=$t}})}),le},Qp_makeExecute=function(){var m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(T){var M=T.pathName,I=T.method,P=T.operationId;return function(z){var W=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},K=m.requestInterceptor,le=m.responseInterceptor,he=m.userFetch;return m.execute(H({spec:m.spec,requestInterceptor:K,responseInterceptor:le,userFetch:he,pathName:M,method:I,parameters:z,operationId:P},W))}}},qs=_(93165);var WE=_(64994),Lv=_.n(WE),zE=_(59716);const jE={body:function(m){m.req.body=m.value},header:function(m){var T=m.req,M=m.parameter,I=m.value;T.headers=T.headers||{},void 0!==I&&(T.headers[M.name]=I)},query:function(m){var T=m.req,M=m.value,I=m.parameter;if(T.query=T.query||{},!1===M&&"boolean"===I.type&&(M="false"),0===M&&["number","integer"].indexOf(I.type)>-1&&(M="0"),M)T.query[I.name]={collectionFormat:I.collectionFormat,value:M};else if(I.allowEmptyValue&&void 0!==M){var P=I.name;T.query[P]=T.query[P]||{},T.query[P].allowEmptyValue=!0}},path:function(m){var T=m.req,M=m.value;T.url=T.url.split("{".concat(m.parameter.name,"}")).join(encodeURIComponent(M))},formData:function(m){var T=m.req,M=m.value,I=m.parameter;(M||I.allowEmptyValue)&&(T.form=T.form||{},T.form[I.name]={value:M,allowEmptyValue:I.allowEmptyValue,collectionFormat:I.collectionFormat})}};function om(m,T){return ut()(T).call(T,"application/json")?"string"==typeof m?m:Kn()(m):m.toString()}function JE(m){var T=m.req,M=m.value,I=m.parameter,P=I.name,z=I.style,W=I.explode,K=I.content;if(K){var le=Yt()(K)[0];T.url=T.url.split("{".concat(P,"}")).join(as(om(M,le),{escape:!0}))}else{var he=ls({key:I.name,value:M,style:z||"simple",explode:W||!1,escape:!0});T.url=T.url.split("{".concat(P,"}")).join(he)}}function ph(m){var T=m.req,M=m.value,I=m.parameter;if(T.query=T.query||{},I.content){var P=Yt()(I.content)[0];T.query[I.name]=om(M,P)}else if(!1===M&&(M="false"),0===M&&(M="0"),M)T.query[I.name]={value:M,serializationOption:{style:I.style,explode:I.explode,allowReserved:I.allowReserved}};else if(I.allowEmptyValue&&void 0!==M){var le=I.name;T.query[le]=T.query[le]||{},T.query[le].allowEmptyValue=!0}}var Fv=["accept","authorization","content-type"];function ha(m){var T=m.req,M=m.parameter,I=m.value;if(T.headers=T.headers||{},!(Fv.indexOf(M.name.toLowerCase())>-1)){if(M.content){var P=Yt()(M.content)[0];return void(T.headers[M.name]=om(I,P))}void 0!==I&&(T.headers[M.name]=ls({key:M.name,value:I,style:M.style||"simple",explode:void 0!==M.explode&&M.explode,escape:!1}))}}function fh(m){var T=m.req,M=m.parameter,I=m.value;T.headers=T.headers||{};var P=oe(I);if(M.content){var z,W=Yt()(M.content)[0];T.headers.Cookie=Ke()(z="".concat(M.name,"=")).call(z,om(I,W))}else if("undefined"!==P){var K="object"===P&&!Array.isArray(I)&&M.explode?"":"".concat(M.name,"=");T.headers.Cookie=K+ls({key:M.name,value:I,escape:!1,style:M.style||"form",explode:void 0!==M.explode&&M.explode})}}var Bv=_(56675),sm=_.n(Bv);var am=["http","fetch","spec","operationId","pathName","method","parameters","securities"],Zp=function(T){return Array.isArray(T)?T:[]},lm=ze("OperationNotFoundError",function(T,M,I){this.originalError=I,ee()(this,M||{})}),Hv={buildRequest:Uv};function Uv(m){var T,M,I=m.spec,P=m.operationId,z=m.responseContentType,W=m.scheme,K=m.requestInterceptor,le=m.responseInterceptor,he=m.contextUrl,Se=m.userFetch,we=m.server,Oe=m.serverVariables,Fe=m.http,Ze=m.parameters,et=m.parameterBuilders,_t=xv(I);et||(et=_t?a:jE);var pt={url:"",credentials:Fe&&Fe.withCredentials?"include":"same-origin",headers:{},cookies:{}};K&&(pt.requestInterceptor=K),le&&(pt.responseInterceptor=le),Se&&(pt.userFetch=Se);var ni=function(m,T){return m&&m.paths?function(m,T){return Ic(m,T,!0)||null}(m,function(M){var I=M.pathName,P=M.method,z=M.operation;if(!z||"object"!==oe(z))return!1;var W=z.operationId;return[$p(z,I,P),Iv(I,P),W].some(function(he){return he&&he===T})}):null}(I,P);if(!ni)throw new lm("Operation ".concat(P," not found"));var Jn=ni.operation,pr=void 0===Jn?{}:Jn,Wi=ni.method,Oi=ni.pathName;if(pt.url+=Gv({spec:I,scheme:W,contextUrl:he,server:we,serverVariables:Oe,pathName:Oi,method:Wi}),!P)return delete pt.cookies,pt;pt.url+=Oi,pt.method="".concat(Wi).toUpperCase(),Ze=Ze||{};var to=I.paths[Oi]||{};z&&(pt.headers.accept=z);var Wo=function(T){var M={};T.forEach(function(P){M[P.in]||(M[P.in]={}),M[P.in][P.name]=P});var I=[];return Yt()(M).forEach(function(P){Yt()(M[P]).forEach(function(z){I.push(M[P][z])})}),I}(Ke()(T=Ke()(M=[]).call(M,Zp(pr.parameters))).call(T,Zp(to.parameters)));Wo.forEach(function(ii){var Dr,Ll,vr=et[ii.in];if("body"===ii.in&&ii.schema&&ii.schema.properties&&(Dr=Ze),void 0===(Dr=ii&&ii.name&&Ze[ii.name]))Dr=ii&&ii.name&&Ze[Ke()(Ll="".concat(ii.in,".")).call(Ll,ii.name)];else if(function(T,M){return An()(M).call(M,function(I){return I.name===T})}(ii.name,Wo).length>1){var Ya;console.warn(Ke()(Ya="Parameter '".concat(ii.name,"' is ambiguous because the defined spec has more than one parameter with the name: '")).call(Ya,ii.name,"' and the passed-in parameter values did not define an 'in' value."))}if(null!==Dr){if(void 0!==ii.default&&void 0===Dr&&(Dr=ii.default),void 0===Dr&&ii.required&&!ii.allowEmptyValue)throw new Error("Required parameter ".concat(ii.name," is not provided"));if(_t&&ii.schema&&"object"===ii.schema.type&&"string"==typeof Dr)try{Dr=JSON.parse(Dr)}catch(Hu){throw new Error("Could not parse object parameter value string as JSON")}vr&&vr({req:pt,parameter:ii,value:Dr,operation:pr,spec:I})}});var Mr=H(H({},m),{},{operation:pr});if((pt=_t?function(m,T){var M=m.operation,I=m.requestBody,W=m.attachContentTypeForEmptyPayload,K=m.requestContentType;T=function(m){var T=m.request,M=m.securities,I=void 0===M?{}:M,P=m.operation,z=void 0===P?{}:P,W=m.spec,K=H({},T),le=I.authorized,he=void 0===le?{}:le,Se=z.security||W.security||[],we=he&&!!Yt()(he).length,Oe=Vu()(W,["components","securitySchemes"])||{};return K.headers=K.headers||{},K.query=K.query||{},Yt()(I).length&&we&&Se&&(!Array.isArray(z.security)||z.security.length)?(Se.forEach(function(Fe){Yt()(Fe).forEach(function(Ze){var et=he[Ze],_t=Oe[Ze];if(et){var $t=et.value||et,pt=_t.type;if(et)if("apiKey"===pt)"query"===_t.in&&(K.query[_t.name]=$t),"header"===_t.in&&(K.headers[_t.name]=$t),"cookie"===_t.in&&(K.cookies[_t.name]=$t);else if("http"===pt){if(/^basic$/i.test(_t.scheme)){var ni,Jn=$t.username||"",pr=$t.password||"",Wi=sm()(Ke()(ni="".concat(Jn,":")).call(ni,pr));K.headers.Authorization="Basic ".concat(Wi)}/^bearer$/i.test(_t.scheme)&&(K.headers.Authorization="Bearer ".concat($t))}else if("oauth2"===pt||"openIdConnect"===pt){var Oi,to=et.token||{},Mr=to[_t["x-tokenName"]||"access_token"],Nr=to.token_type;(!Nr||"bearer"===Nr.toLowerCase())&&(Nr="Bearer"),K.headers.Authorization=Ke()(Oi="".concat(Nr," ")).call(Oi,Mr)}}})}),K):T}({request:T,securities:m.securities,operation:M,spec:m.spec});var le=M.requestBody||{},he=Yt()(le.content||{}),Se=K&&he.indexOf(K)>-1;if(I||W){if(K&&Se)T.headers["Content-Type"]=K;else if(!K){var we=he[0];we&&(T.headers["Content-Type"]=we,K=we)}}else K&&Se&&(T.headers["Content-Type"]=K);if(!m.responseContentType&&M.responses){var Oe,Fe=An()(Oe=mn()(M.responses)).call(Oe,function(et){var _t=Ce(et,2),pt=_t[1],ni=parseInt(_t[0],10);return ni>=200&&ni<300&&Lv()(pt.content)}).reduce(function(et,_t){var pt=Ce(_t,2)[1];return Ke()(et).call(et,Yt()(pt.content))},[]);Fe.length>0&&(T.headers.accept=Fe.join(", "))}if(I)if(K){if(he.indexOf(K)>-1)if("application/x-www-form-urlencoded"===K||"multipart/form-data"===K)if("object"===oe(I)){var Ze=(le.content[K]||{}).encoding||{};T.form={},Yt()(I).forEach(function(et){T.form[et]={value:I[et],encoding:Ze[et]||{}}})}else T.form=I;else T.body=I}else T.body=I;return T}(Mr,pt):function(m,T){var le,he,M=m.spec,I=m.operation,z=m.requestContentType,W=m.responseContentType,K=m.attachContentTypeForEmptyPayload;if((T=function(m){var T=m.request,M=m.securities,I=void 0===M?{}:M,P=m.operation,z=void 0===P?{}:P,W=m.spec,K=H({},T),le=I.authorized,he=void 0===le?{}:le,Se=I.specSecurity,Oe=z.security||(void 0===Se?[]:Se),Fe=he&&!!Yt()(he).length,Ze=W.securityDefinitions;return K.headers=K.headers||{},K.query=K.query||{},Yt()(I).length&&Fe&&Oe&&(!Array.isArray(z.security)||z.security.length)?(Oe.forEach(function(et){Yt()(et).forEach(function(_t){var $t=he[_t];if($t){var pt=$t.token,ni=$t.value||$t,Jn=Ze[_t],pr=Jn.type,Oi=pt&&pt[Jn["x-tokenName"]||"access_token"],to=pt&&pt.token_type;if($t)if("apiKey"===pr){var Wo="query"===Jn.in?"query":"headers";K[Wo]=K[Wo]||{},K[Wo][Jn.name]=ni}else if("basic"===pr)if(ni.header)K.headers.authorization=ni.header;else{var Mr,Nr=ni.username||"",ii=ni.password||"";ni.base64=sm()(Ke()(Mr="".concat(Nr,":")).call(Mr,ii)),K.headers.authorization="Basic ".concat(ni.base64)}else if("oauth2"===pr&&Oi){var vr;to=to&&"bearer"!==to.toLowerCase()?to:"Bearer",K.headers.authorization=Ke()(vr="".concat(to," ")).call(vr,Oi)}}})}),K):T}({request:T,securities:m.securities,operation:I,spec:M})).body||T.form||K)if(z)T.headers["Content-Type"]=z;else if(Array.isArray(I.consumes)){var Se=Ce(I.consumes,1);T.headers["Content-Type"]=Se[0]}else if(Array.isArray(M.consumes)){var we=Ce(M.consumes,1);T.headers["Content-Type"]=we[0]}else I.parameters&&An()(le=I.parameters).call(le,function(_t){return"file"===_t.type}).length?T.headers["Content-Type"]="multipart/form-data":I.parameters&&An()(he=I.parameters).call(he,function(_t){return"formData"===_t.in}).length&&(T.headers["Content-Type"]="application/x-www-form-urlencoded");else if(z){var Oe,Fe,Ze=I.parameters&&An()(Oe=I.parameters).call(Oe,function(_t){return"body"===_t.in}).length>0,et=I.parameters&&An()(Fe=I.parameters).call(Fe,function(_t){return"formData"===_t.in}).length>0;(Ze||et)&&(T.headers["Content-Type"]=z)}return!W&&Array.isArray(I.produces)&&I.produces.length>0&&(T.headers.accept=I.produces.join(", ")),T}(Mr,pt)).cookies&&Yt()(pt.cookies).length){var Nr=Yt()(pt.cookies).reduce(function(ii,vr){return ii+(ii?"&":"")+zE.serialize(vr,pt.cookies[vr])},"");pt.headers.Cookie=Nr}return pt.cookies&&delete pt.cookies,Xr(pt),pt}var cm=function(T){return T?T.replace(/\W/g,""):null};function Gv(m){return xv(m.spec)?function(m){var T=m.spec,M=m.pathName,I=m.method,P=m.server,z=m.contextUrl,W=m.serverVariables,K=void 0===W?{}:W,le=Vu()(T,["paths",M,(I||"").toLowerCase(),"servers"])||Vu()(T,["paths",M,"servers"])||Vu()(T,["servers"]),he="",Se=null;if(P&&le&&le.length){var we=Jt()(le).call(le,function(Ze){return Ze.url});we.indexOf(P)>-1&&(he=P,Se=le[we.indexOf(P)])}if(!he&&le&&le.length){he=le[0].url;var Oe=Ce(le,1);Se=Oe[0]}return he.indexOf("{")>-1&&function(m){for(var I,T=[],M=/{([^}]+)}/g;I=M.exec(m);)T.push(I[1]);return T}(he).forEach(function(Ze){if(Se.variables&&Se.variables[Ze]){var _t=K[Ze]||Se.variables[Ze].default,$t=new RegExp("{".concat(Ze,"}"),"g");he=he.replace($t,_t)}}),function(){var K,le,m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",M=se.parse(m&&T?se.resolve(T,m):m),I=se.parse(T),P=cm(M.protocol)||cm(I.protocol)||"",z=M.host||I.host,W=M.pathname||"";return"/"===(K=P&&z?Ke()(le="".concat(P,"://")).call(le,z+W):W)[K.length-1]?Do()(K).call(K,0,-1):K}(he,z)}(m):function(m){var Se,we,T=m.spec,M=m.scheme,I=m.contextUrl,z=se.parse(void 0===I?"":I),W=Array.isArray(T.schemes)?T.schemes[0]:null,K=M||W||cm(z.protocol)||"http",le=T.host||z.host||"",he=T.basePath||"";return"/"===(Se=K&&le?Ke()(we="".concat(K,"://")).call(we,le+he):he)[Se.length-1]?Do()(Se).call(Se,0,-1):Se}(m)}function hr(m){var T=this,M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof m?M.url=m:M=m,!(this instanceof hr))return new hr(M);ee()(this,M);var I=this.resolve().then(function(){return T.disableInterfaces||ee()(T,hr.makeApisTagOperation(T)),T});return I.client=this,I}hr.makeHttp=function(m,T,M){return M=M||function(I){return I},T=T||function(I){return I},function(I){return"string"==typeof I&&(I={url:I}),$d.mergeInQueryOrForm(I),I=T(I),M(m(I))}}.bind(null,hr.http=wr),hr.resolve=hh,hr.resolveSubtree=function(m,T){return Jp.apply(this,arguments)},hr.execute=function(m){var T=m.http,M=m.fetch,I=m.spec,P=m.operationId,z=m.pathName,W=m.method,K=m.parameters,le=m.securities,he=function(m,T){if(null==m)return{};var I,P,M=function(m,T){if(null==m)return{};var P,z,M={},I=o(m);for(z=0;z<I.length;z++)P=I[z],!(qs(T).call(T,P)>=0)&&(M[P]=m[P]);return M}(m,T);if(c){var z=c(m);for(P=0;P<z.length;P++)I=z[P],!(qs(T).call(T,I)>=0)&&(!Object.prototype.propertyIsEnumerable.call(m,I)||(M[I]=m[I]))}return M}(m,am),Se=T||M||wr;z&&W&&!P&&(P=Iv(z,W));var we=Hv.buildRequest(H({spec:I,operationId:P,parameters:K,securities:le,http:Se},he));return we.body&&(Lv()(we.body)||Array.isArray(we.body))&&(we.body=Kn()(we.body)),Se(we)},hr.serializeRes=Ap,hr.serializeHeaders=Op,hr.clearCache=function(){Rs.refs.clearCache()},hr.makeApisTagOperation=function(){var m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},T=Qp_makeExecute(m);return{apis:Qp_mapTagOperations({v2OperationIdCompatibilityMode:m.v2OperationIdCompatibilityMode,spec:m.spec,cb:T})}},hr.buildRequest=Uv,hr.helpers={opId:$p},hr.getBaseUrl=Gv,(hr.prototype={http:wr,execute:function(T){return this.applyDefaults(),hr.execute(H({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null},T))},resolve:function(){var T=this,M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return hr.resolve(H({spec:this.spec,url:this.url,http:this.http||this.fetch,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null,skipNormalization:this.skipNormalization||!1},M)).then(function(I){return T.originalSpec=T.spec,T.spec=I.spec,T.errors=I.errors,T})}}).applyDefaults=function(){var T=this.spec,M=this.url;if(M&&ue()(M).call(M,"http")){var I=se.parse(M);T.host||(T.host=I.host),T.schemes||(T.schemes=[I.protocol.replace(":","")]),T.basePath||(T.basePath="/")}};var vi=hr.helpers;const ZE=hr},59716:(S,A)=>{"use strict";A.parse=function(f,v){if("string"!=typeof f)throw new TypeError("argument str must be a string");for(var y={},D=v||{},O=f.split(R),U=D.decode||_,X=0;X<O.length;X++){var H=O[X],ne=H.indexOf("=");if(!(ne<0)){var ee=H.substr(0,ne).trim(),J=H.substr(++ne,H.length).trim();'"'==J[0]&&(J=J.slice(1,-1)),null==y[ee]&&(y[ee]=d(J,U))}}return y},A.serialize=function(f,v,y){var D=y||{},O=D.encode||E;if("function"!=typeof O)throw new TypeError("option encode is invalid");if(!a.test(f))throw new TypeError("argument name is invalid");var U=O(v);if(U&&!a.test(U))throw new TypeError("argument val is invalid");var X=f+"="+U;if(null!=D.maxAge){var H=D.maxAge-0;if(isNaN(H)||!isFinite(H))throw new TypeError("option maxAge is invalid");X+="; Max-Age="+Math.floor(H)}if(D.domain){if(!a.test(D.domain))throw new TypeError("option domain is invalid");X+="; Domain="+D.domain}if(D.path){if(!a.test(D.path))throw new TypeError("option path is invalid");X+="; Path="+D.path}if(D.expires){if("function"!=typeof D.expires.toUTCString)throw new TypeError("option expires is invalid");X+="; Expires="+D.expires.toUTCString()}if(D.httpOnly&&(X+="; HttpOnly"),D.secure&&(X+="; Secure"),D.sameSite)switch("string"==typeof D.sameSite?D.sameSite.toLowerCase():D.sameSite){case!0:X+="; SameSite=Strict";break;case"lax":X+="; SameSite=Lax";break;case"strict":X+="; SameSite=Strict";break;case"none":X+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return X};var _=decodeURIComponent,E=encodeURIComponent,R=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function d(f,v){try{return v(f)}catch(y){return f}}},11085:S=>{"use strict";var A=String.prototype.replace,_=/%20/g;S.exports={default:"RFC3986",formatters:{RFC1738:function(R){return A.call(R,_,"+")},RFC3986:function(R){return String(R)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},96912:(S,A,_)=>{"use strict";var E=_(96156),R=_(28895),a=_(11085);S.exports={formats:a,parse:R,stringify:E}},28895:(S,A,_)=>{"use strict";var E=_(45811),R=Object.prototype.hasOwnProperty,a=Array.isArray,o={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:E.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},d=function(X,H){return X&&"string"==typeof X&&H.comma&&X.indexOf(",")>-1?X.split(","):X},O=function(H,ne,ee,J){if(H){var ue=ee.allowDots?H.replace(/\.([^.[]+)/g,"[$1]"):H,_e=/(\[[^[\]]*])/g,re=ee.depth>0&&/(\[[^[\]]*])/.exec(ue),q=re?ue.slice(0,re.index):ue,ie=[];if(q){if(!ee.plainObjects&&R.call(Object.prototype,q)&&!ee.allowPrototypes)return;ie.push(q)}for(var Z=0;ee.depth>0&&null!==(re=_e.exec(ue))&&Z<ee.depth;){if(Z+=1,!ee.plainObjects&&R.call(Object.prototype,re[1].slice(1,-1))&&!ee.allowPrototypes)return;ie.push(re[1])}return re&&ie.push("["+ue.slice(re.index)+"]"),function(X,H,ne,ee){for(var J=ee?H:d(H,ne),ue=X.length-1;ue>=0;--ue){var se,_e=X[ue];if("[]"===_e&&ne.parseArrays)se=[].concat(J);else{se=ne.plainObjects?Object.create(null):{};var re="["===_e.charAt(0)&&"]"===_e.charAt(_e.length-1)?_e.slice(1,-1):_e,q=parseInt(re,10);ne.parseArrays||""!==re?!isNaN(q)&&_e!==re&&String(q)===re&&q>=0&&ne.parseArrays&&q<=ne.arrayLimit?(se=[])[q]=J:se[re]=J:se={0:J}}J=se}return J}(ie,ne,ee,J)}};S.exports=function(X,H){var ne=function(H){if(!H)return o;if(null!=H.decoder&&"function"!=typeof H.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==H.charset&&"utf-8"!==H.charset&&"iso-8859-1"!==H.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===H.allowDots?o.allowDots:!!H.allowDots,allowPrototypes:"boolean"==typeof H.allowPrototypes?H.allowPrototypes:o.allowPrototypes,allowSparse:"boolean"==typeof H.allowSparse?H.allowSparse:o.allowSparse,arrayLimit:"number"==typeof H.arrayLimit?H.arrayLimit:o.arrayLimit,charset:void 0===H.charset?o.charset:H.charset,charsetSentinel:"boolean"==typeof H.charsetSentinel?H.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof H.comma?H.comma:o.comma,decoder:"function"==typeof H.decoder?H.decoder:o.decoder,delimiter:"string"==typeof H.delimiter||E.isRegExp(H.delimiter)?H.delimiter:o.delimiter,depth:"number"==typeof H.depth||!1===H.depth?+H.depth:o.depth,ignoreQueryPrefix:!0===H.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof H.interpretNumericEntities?H.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof H.parameterLimit?H.parameterLimit:o.parameterLimit,parseArrays:!1!==H.parseArrays,plainObjects:"boolean"==typeof H.plainObjects?H.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof H.strictNullHandling?H.strictNullHandling:o.strictNullHandling}}(H);if(""===X||null==X)return ne.plainObjects?Object.create(null):{};for(var ee="string"==typeof X?function(H,ne){var re,ee={},se=(ne.ignoreQueryPrefix?H.replace(/^\?/,""):H).split(ne.delimiter,ne.parameterLimit===1/0?void 0:ne.parameterLimit),_e=-1,q=ne.charset;if(ne.charsetSentinel)for(re=0;re<se.length;++re)0===se[re].indexOf("utf8=")&&("utf8=%E2%9C%93"===se[re]?q="utf-8":"utf8=%26%2310003%3B"===se[re]&&(q="iso-8859-1"),_e=re,re=se.length);for(re=0;re<se.length;++re)if(re!==_e){var fe,Q,ie=se[re],Z=ie.indexOf("]="),G=-1===Z?ie.indexOf("="):Z+1;-1===G?(fe=ne.decoder(ie,o.decoder,q,"key"),Q=ne.strictNullHandling?null:""):(fe=ne.decoder(ie.slice(0,G),o.decoder,q,"key"),Q=E.maybeMap(d(ie.slice(G+1),ne),function(j){return ne.decoder(j,o.decoder,q,"value")})),Q&&ne.interpretNumericEntities&&"iso-8859-1"===q&&(Q=Q.replace(/&#(\d+);/g,function(H,ne){return String.fromCharCode(parseInt(ne,10))})),ie.indexOf("[]=")>-1&&(Q=a(Q)?[Q]:Q),ee[fe]=R.call(ee,fe)?E.combine(ee[fe],Q):Q}return ee}(X,ne):X,J=ne.plainObjects?Object.create(null):{},ue=Object.keys(ee),se=0;se<ue.length;++se){var _e=ue[se],re=O(_e,ee[_e],ne,"string"==typeof X);J=E.merge(J,re,ne)}return!0===ne.allowSparse?J:E.compact(J)}},96156:(S,A,_)=>{"use strict";var E=_(73340),R=_(45811),a=_(11085),o=Object.prototype.hasOwnProperty,c={brackets:function(ee){return ee+"[]"},comma:"comma",indices:function(ee,J){return ee+"["+J+"]"},repeat:function(ee){return ee}},d=Array.isArray,f=Array.prototype.push,v=function(ne,ee){f.apply(ne,d(ee)?ee:[ee])},y=Date.prototype.toISOString,D=a.default,O={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:R.encode,encodeValuesOnly:!1,format:D,formatter:a.formatters[D],indices:!1,serializeDate:function(ee){return y.call(ee)},skipNulls:!1,strictNullHandling:!1},X=function ne(ee,J,ue,se,_e,re,q,ie,Z,G,fe,Q,j,oe,de){var ye=ee;if(de.has(ee))throw new RangeError("Cyclic object value");if("function"==typeof q?ye=q(J,ye):ye instanceof Date?ye=G(ye):"comma"===ue&&d(ye)&&(ye=R.maybeMap(ye,function(Qe){return Qe instanceof Date?G(Qe):Qe})),null===ye){if(se)return re&&!j?re(J,O.encoder,oe,"key",fe):J;ye=""}if(function(ee){return"string"==typeof ee||"number"==typeof ee||"boolean"==typeof ee||"symbol"==typeof ee||"bigint"==typeof ee}(ye)||R.isBuffer(ye))return re?[Q(j?J:re(J,O.encoder,oe,"key",fe))+"="+Q(re(ye,O.encoder,oe,"value",fe))]:[Q(J)+"="+Q(String(ye))];var Be,Ce=[];if(void 0===ye)return Ce;if("comma"===ue&&d(ye))Be=[{value:ye.length>0?ye.join(",")||null:void 0}];else if(d(q))Be=q;else{var ot=Object.keys(ye);Be=ie?ot.sort(ie):ot}for(var De=0;De<Be.length;++De){var Ue=Be[De],Xe="object"==typeof Ue&&void 0!==Ue.value?Ue.value:ye[Ue];if(!_e||null!==Xe){var at=d(ye)?"function"==typeof ue?ue(J,Ue):J:J+(Z?"."+Ue:"["+Ue+"]");de.set(ee,!0);var ut=E();v(Ce,ne(Xe,at,ue,se,_e,re,q,ie,Z,G,fe,Q,j,oe,ut))}}return Ce};S.exports=function(ne,ee){var se,J=ne,ue=function(ee){if(!ee)return O;if(null!=ee.encoder&&"function"!=typeof ee.encoder)throw new TypeError("Encoder has to be a function.");var J=ee.charset||O.charset;if(void 0!==ee.charset&&"utf-8"!==ee.charset&&"iso-8859-1"!==ee.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var ue=a.default;if(void 0!==ee.format){if(!o.call(a.formatters,ee.format))throw new TypeError("Unknown format option provided.");ue=ee.format}var se=a.formatters[ue],_e=O.filter;return("function"==typeof ee.filter||d(ee.filter))&&(_e=ee.filter),{addQueryPrefix:"boolean"==typeof ee.addQueryPrefix?ee.addQueryPrefix:O.addQueryPrefix,allowDots:void 0===ee.allowDots?O.allowDots:!!ee.allowDots,charset:J,charsetSentinel:"boolean"==typeof ee.charsetSentinel?ee.charsetSentinel:O.charsetSentinel,delimiter:void 0===ee.delimiter?O.delimiter:ee.delimiter,encode:"boolean"==typeof ee.encode?ee.encode:O.encode,encoder:"function"==typeof ee.encoder?ee.encoder:O.encoder,encodeValuesOnly:"boolean"==typeof ee.encodeValuesOnly?ee.encodeValuesOnly:O.encodeValuesOnly,filter:_e,format:ue,formatter:se,serializeDate:"function"==typeof ee.serializeDate?ee.serializeDate:O.serializeDate,skipNulls:"boolean"==typeof ee.skipNulls?ee.skipNulls:O.skipNulls,sort:"function"==typeof ee.sort?ee.sort:null,strictNullHandling:"boolean"==typeof ee.strictNullHandling?ee.strictNullHandling:O.strictNullHandling}}(ee);"function"==typeof ue.filter?J=(0,ue.filter)("",J):d(ue.filter)&&(se=ue.filter);var re=[];if("object"!=typeof J||null===J)return"";var ie=c[ee&&ee.arrayFormat in c?ee.arrayFormat:ee&&"indices"in ee?ee.indices?"indices":"repeat":"indices"];se||(se=Object.keys(J)),ue.sort&&se.sort(ue.sort);for(var Z=E(),G=0;G<se.length;++G){var fe=se[G];ue.skipNulls&&null===J[fe]||v(re,X(J[fe],fe,ie,ue.strictNullHandling,ue.skipNulls,ue.encode?ue.encoder:null,ue.filter,ue.sort,ue.allowDots,ue.serializeDate,ue.format,ue.formatter,ue.encodeValuesOnly,ue.charset,Z))}var Q=re.join(ue.delimiter),j=!0===ue.addQueryPrefix?"?":"";return ue.charsetSentinel&&(j+="iso-8859-1"===ue.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),Q.length>0?j+Q:""}},45811:(S,A,_)=>{"use strict";var E=_(11085),R=Object.prototype.hasOwnProperty,a=Array.isArray,o=function(){for(var ee=[],J=0;J<256;++J)ee.push("%"+((J<16?"0":"")+J.toString(16)).toUpperCase());return ee}(),d=function(J,ue){for(var se=ue&&ue.plainObjects?Object.create(null):{},_e=0;_e<J.length;++_e)void 0!==J[_e]&&(se[_e]=J[_e]);return se};S.exports={arrayToObject:d,assign:function(J,ue){return Object.keys(ue).reduce(function(se,_e){return se[_e]=ue[_e],se},J)},combine:function(J,ue){return[].concat(J,ue)},compact:function(J){for(var ue=[{obj:{o:J},prop:"o"}],se=[],_e=0;_e<ue.length;++_e)for(var re=ue[_e],q=re.obj[re.prop],ie=Object.keys(q),Z=0;Z<ie.length;++Z){var G=ie[Z],fe=q[G];"object"==typeof fe&&null!==fe&&-1===se.indexOf(fe)&&(ue.push({obj:q,prop:G}),se.push(fe))}return function(J){for(;J.length>1;){var ue=J.pop(),se=ue.obj[ue.prop];if(a(se)){for(var _e=[],re=0;re<se.length;++re)void 0!==se[re]&&_e.push(se[re]);ue.obj[ue.prop]=_e}}}(ue),J},decode:function(ee,J,ue){var se=ee.replace(/\+/g," ");if("iso-8859-1"===ue)return se.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(se)}catch(_e){return se}},encode:function(J,ue,se,_e,re){if(0===J.length)return J;var q=J;if("symbol"==typeof J?q=Symbol.prototype.toString.call(J):"string"!=typeof J&&(q=String(J)),"iso-8859-1"===se)return escape(q).replace(/%u[0-9a-f]{4}/gi,function(fe){return"%26%23"+parseInt(fe.slice(2),16)+"%3B"});for(var ie="",Z=0;Z<q.length;++Z){var G=q.charCodeAt(Z);45===G||46===G||95===G||126===G||G>=48&&G<=57||G>=65&&G<=90||G>=97&&G<=122||re===E.RFC1738&&(40===G||41===G)?ie+=q.charAt(Z):G<128?ie+=o[G]:G<2048?ie+=o[192|G>>6]+o[128|63&G]:G<55296||G>=57344?ie+=o[224|G>>12]+o[128|G>>6&63]+o[128|63&G]:(G=65536+((1023&G)<<10|1023&q.charCodeAt(Z+=1)),ie+=o[240|G>>18]+o[128|G>>12&63]+o[128|G>>6&63]+o[128|63&G])}return ie},isBuffer:function(J){return!(!J||"object"!=typeof J||!(J.constructor&&J.constructor.isBuffer&&J.constructor.isBuffer(J)))},isRegExp:function(J){return"[object RegExp]"===Object.prototype.toString.call(J)},maybeMap:function(J,ue){if(a(J)){for(var se=[],_e=0;_e<J.length;_e+=1)se.push(ue(J[_e]));return se}return ue(J)},merge:function ee(J,ue,se){if(!ue)return J;if("object"!=typeof ue){if(a(J))J.push(ue);else{if(!J||"object"!=typeof J)return[J,ue];(se&&(se.plainObjects||se.allowPrototypes)||!R.call(Object.prototype,ue))&&(J[ue]=!0)}return J}if(!J||"object"!=typeof J)return[J].concat(ue);var _e=J;return a(J)&&!a(ue)&&(_e=d(J,se)),a(J)&&a(ue)?(ue.forEach(function(re,q){if(R.call(J,q)){var ie=J[q];ie&&"object"==typeof ie&&re&&"object"==typeof re?J[q]=ee(ie,re,se):J.push(re)}else J[q]=re}),J):Object.keys(ue).reduce(function(re,q){var ie=ue[q];return re[q]=R.call(re,q)?ee(re[q],ie,se):ie,re},_e)}}},16958:S=>{var A=S.exports=function(H){return new _(H)};function _(H){this.value=H}function E(H,ne,ee){var J=[],ue=[],se=!0;return function _e(re){var q=ee?R(re):re,ie={},Z=!0,G={node:q,node_:re,path:[].concat(J),parent:ue[ue.length-1],parents:ue,key:J.slice(-1)[0],isRoot:0===J.length,level:J.length,circular:null,update:function(j,oe){G.isRoot||(G.parent.node[G.key]=j),G.node=j,oe&&(Z=!1)},delete:function(j){delete G.parent.node[G.key],j&&(Z=!1)},remove:function(j){O(G.parent.node)?G.parent.node.splice(G.key,1):delete G.parent.node[G.key],j&&(Z=!1)},keys:null,before:function(j){ie.before=j},after:function(j){ie.after=j},pre:function(j){ie.pre=j},post:function(j){ie.post=j},stop:function(){se=!1},block:function(){Z=!1}};if(!se)return G;function fe(){if("object"==typeof G.node&&null!==G.node){(!G.keys||G.node_!==G.node)&&(G.keys=a(G.node)),G.isLeaf=0==G.keys.length;for(var j=0;j<ue.length;j++)if(ue[j].node_===re){G.circular=ue[j];break}}else G.isLeaf=!0,G.keys=null;G.notLeaf=!G.isLeaf,G.notRoot=!G.isRoot}fe();var Q=ne.call(G,G.node);return void 0!==Q&&G.update&&G.update(Q),ie.before&&ie.before.call(G,G.node),Z&&("object"==typeof G.node&&null!==G.node&&!G.circular&&(ue.push(G),fe(),U(G.keys,function(j,oe){J.push(j),ie.pre&&ie.pre.call(G,G.node[j],j);var de=_e(G.node[j]);ee&&X.call(G.node,j)&&(G.node[j]=de.node),de.isLast=oe==G.keys.length-1,de.isFirst=0==oe,ie.post&&ie.post.call(G,de),J.pop()}),ue.pop()),ie.after&&ie.after.call(G,G.node)),G}(H).node}function R(H){if("object"==typeof H&&null!==H){var ne;if(O(H))ne=[];else if(function(H){return"[object Date]"===o(H)}(H))ne=new Date(H.getTime?H.getTime():H);else if(function(H){return"[object RegExp]"===o(H)}(H))ne=new RegExp(H);else if(function(H){return"[object Error]"===o(H)}(H))ne={message:H.message};else if(function(H){return"[object Boolean]"===o(H)}(H))ne=new Boolean(H);else if(function(H){return"[object Number]"===o(H)}(H))ne=new Number(H);else if(function(H){return"[object String]"===o(H)}(H))ne=new String(H);else if(Object.create&&Object.getPrototypeOf)ne=Object.create(Object.getPrototypeOf(H));else if(H.constructor===Object)ne={};else{var J=function(){};J.prototype=H.constructor&&H.constructor.prototype||H.__proto__||{},ne=new J}return U(a(H),function(ue){ne[ue]=H[ue]}),ne}return H}_.prototype.get=function(H){for(var ne=this.value,ee=0;ee<H.length;ee++){var J=H[ee];if(!ne||!X.call(ne,J)){ne=void 0;break}ne=ne[J]}return ne},_.prototype.has=function(H){for(var ne=this.value,ee=0;ee<H.length;ee++){var J=H[ee];if(!ne||!X.call(ne,J))return!1;ne=ne[J]}return!0},_.prototype.set=function(H,ne){for(var ee=this.value,J=0;J<H.length-1;J++){var ue=H[J];X.call(ee,ue)||(ee[ue]={}),ee=ee[ue]}return ee[H[J]]=ne,ne},_.prototype.map=function(H){return E(this.value,H,!0)},_.prototype.forEach=function(H){return this.value=E(this.value,H,!1),this.value},_.prototype.reduce=function(H,ne){var ee=1===arguments.length,J=ee?this.value:ne;return this.forEach(function(ue){(!this.isRoot||!ee)&&(J=H.call(this,J,ue))}),J},_.prototype.paths=function(){var H=[];return this.forEach(function(ne){H.push(this.path)}),H},_.prototype.nodes=function(){var H=[];return this.forEach(function(ne){H.push(this.node)}),H},_.prototype.clone=function(){var H=[],ne=[];return function ee(J){for(var ue=0;ue<H.length;ue++)if(H[ue]===J)return ne[ue];if("object"==typeof J&&null!==J){var se=R(J);return H.push(J),ne.push(se),U(a(J),function(_e){se[_e]=ee(J[_e])}),H.pop(),ne.pop(),se}return J}(this.value)};var a=Object.keys||function(ne){var ee=[];for(var J in ne)ee.push(J);return ee};function o(H){return Object.prototype.toString.call(H)}var O=Array.isArray||function(ne){return"[object Array]"===Object.prototype.toString.call(ne)},U=function(H,ne){if(H.forEach)return H.forEach(ne);for(var ee=0;ee<H.length;ee++)ne(H[ee],ee,H)};U(a(_.prototype),function(H){A[H]=function(ne){var ee=[].slice.call(arguments,1),J=new _(ne);return J[H].apply(J,ee)}});var X=Object.hasOwnProperty||function(H,ne){return ne in H}},58872:function(S,A,_){var E;S=_.nmd(S),function(R){"object"==typeof global&&global;var d,f=2147483647,v=36,ee=/^xn--/,J=/[^\x20-\x7E]/,ue=/[\x2E\u3002\uFF0E\uFF61]/g,se={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},re=Math.floor,q=String.fromCharCode;function Z(De){throw RangeError(se[De])}function G(De,Ue){for(var Xe=De.length,at=[];Xe--;)at[Xe]=Ue(De[Xe]);return at}function fe(De,Ue){var Xe=De.split("@"),at="";return Xe.length>1&&(at=Xe[0]+"@",De=Xe[1]),at+G((De=De.replace(ue,".")).split("."),Ue).join(".")}function Q(De){for(var ut,Qe,Ue=[],Xe=0,at=De.length;Xe<at;)(ut=De.charCodeAt(Xe++))>=55296&&ut<=56319&&Xe<at?56320==(64512&(Qe=De.charCodeAt(Xe++)))?Ue.push(((1023&ut)<<10)+(1023&Qe)+65536):(Ue.push(ut),Xe--):Ue.push(ut);return Ue}function j(De){return G(De,function(Ue){var Xe="";return Ue>65535&&(Xe+=q((Ue-=65536)>>>10&1023|55296),Ue=56320|1023&Ue),Xe+q(Ue)}).join("")}function oe(De){return De-48<10?De-22:De-65<26?De-65:De-97<26?De-97:v}function de(De,Ue){return De+22+75*(De<26)-((0!=Ue)<<5)}function ye(De,Ue,Xe){var at=0;for(De=Xe?re(De/700):De>>1,De+=re(De/Ue);De>455;at+=v)De=re(De/35);return re(at+36*De/(De+38))}function ce(De){var at,Wt,ln,Pn,Kn,Vn,Jt,Nn,Yt,Dn,Ue=[],Xe=De.length,ut=0,Qe=128,Ft=72;for((Wt=De.lastIndexOf("-"))<0&&(Wt=0),ln=0;ln<Wt;++ln)De.charCodeAt(ln)>=128&&Z("not-basic"),Ue.push(De.charCodeAt(ln));for(Pn=Wt>0?Wt+1:0;Pn<Xe;){for(Kn=ut,Vn=1,Jt=v;Pn>=Xe&&Z("invalid-input"),((Nn=oe(De.charCodeAt(Pn++)))>=v||Nn>re((f-ut)/Vn))&&Z("overflow"),ut+=Nn*Vn,!(Nn<(Yt=Jt<=Ft?1:Jt>=Ft+26?26:Jt-Ft));Jt+=v)Vn>re(f/(Dn=v-Yt))&&Z("overflow"),Vn*=Dn;Ft=ye(ut-Kn,at=Ue.length+1,0==Kn),re(ut/at)>f-Qe&&Z("overflow"),Qe+=re(ut/at),ut%=at,Ue.splice(ut++,0,Qe)}return j(Ue)}function Ce(De){var Ue,Xe,at,ut,Qe,Ft,Wt,ln,Pn,Kn,Vn,Nn,Yt,Dn,Ke,Jt=[];for(Nn=(De=Q(De)).length,Ue=128,Xe=0,Qe=72,Ft=0;Ft<Nn;++Ft)(Vn=De[Ft])<128&&Jt.push(q(Vn));for(at=ut=Jt.length,ut&&Jt.push("-");at<Nn;){for(Wt=f,Ft=0;Ft<Nn;++Ft)(Vn=De[Ft])>=Ue&&Vn<Wt&&(Wt=Vn);for(Wt-Ue>re((f-Xe)/(Yt=at+1))&&Z("overflow"),Xe+=(Wt-Ue)*Yt,Ue=Wt,Ft=0;Ft<Nn;++Ft)if((Vn=De[Ft])<Ue&&++Xe>f&&Z("overflow"),Vn==Ue){for(ln=Xe,Pn=v;!(ln<(Kn=Pn<=Qe?1:Pn>=Qe+26?26:Pn-Qe));Pn+=v)Jt.push(q(de(Kn+(Ke=ln-Kn)%(Dn=v-Kn),0))),ln=re(Ke/Dn);Jt.push(q(de(ln,0))),Qe=ye(Xe,Yt,at==ut),Xe=0,++at}++Xe,++Ue}return Jt.join("")}d={version:"1.3.2",ucs2:{decode:Q,encode:j},decode:ce,encode:Ce,toASCII:function(De){return fe(De,function(Ue){return J.test(Ue)?"xn--"+Ce(Ue):Ue})},toUnicode:function(De){return fe(De,function(Ue){return ee.test(Ue)?ce(Ue.slice(4).toLowerCase()):Ue})}},void 0!==(E=function(){return d}.call(A,_,A,S))&&(S.exports=E)}()},77526:(S,A,_)=>{"use strict";var E=_(58872),R=_(98893);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}A.parse=se,A.resolve=function(ie,Z){return se(ie,!1,!0).resolve(Z)},A.resolveObject=function(ie,Z){return ie?se(ie,!1,!0).resolveObject(Z):Z},A.format=function(ie){return R.isString(ie)&&(ie=se(ie)),ie instanceof a?ie.format():a.prototype.format.call(ie)},A.Url=a;var o=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,v=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),y=["'"].concat(v),D=["%","/","?",";","#"].concat(y),O=["/","?","#"],X=/^[+a-z0-9A-Z_-]{0,63}$/,H=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ne={javascript:!0,"javascript:":!0},ee={javascript:!0,"javascript:":!0},J={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ue=_(1521);function se(ie,Z,G){if(ie&&R.isObject(ie)&&ie instanceof a)return ie;var fe=new a;return fe.parse(ie,Z,G),fe}a.prototype.parse=function(ie,Z,G){if(!R.isString(ie))throw new TypeError("Parameter 'url' must be a string, not "+typeof ie);var fe=ie.indexOf("?"),Q=-1!==fe&&fe<ie.indexOf("#")?"?":"#",j=ie.split(Q);j[0]=j[0].replace(/\\/g,"/");var de=ie=j.join(Q);if(de=de.trim(),!G&&1===ie.split("#").length){var ye=d.exec(de);if(ye)return this.path=de,this.href=de,this.pathname=ye[1],ye[2]?(this.search=ye[2],this.query=Z?ue.parse(this.search.substr(1)):this.search.substr(1)):Z&&(this.search="",this.query={}),this}var ce=o.exec(de);if(ce){var Ce=(ce=ce[0]).toLowerCase();this.protocol=Ce,de=de.substr(ce.length)}if(G||ce||de.match(/^\/\/[^@\/]+@[^@\/]+/)){var Be="//"===de.substr(0,2);Be&&(!ce||!ee[ce])&&(de=de.substr(2),this.slashes=!0)}if(!ee[ce]&&(Be||ce&&!J[ce])){for(var ot=-1,De=0;De<O.length;De++)-1!==(Ue=de.indexOf(O[De]))&&(-1===ot||Ue<ot)&&(ot=Ue);var Xe,at;for(-1!==(at=-1===ot?de.lastIndexOf("@"):de.lastIndexOf("@",ot))&&(Xe=de.slice(0,at),de=de.slice(at+1),this.auth=decodeURIComponent(Xe)),ot=-1,De=0;De<D.length;De++){var Ue;-1!==(Ue=de.indexOf(D[De]))&&(-1===ot||Ue<ot)&&(ot=Ue)}-1===ot&&(ot=de.length),this.host=de.slice(0,ot),de=de.slice(ot),this.parseHost(),this.hostname=this.hostname||"";var ut="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ut)for(var Qe=this.hostname.split(/\./),Ft=(De=0,Qe.length);De<Ft;De++){var Wt=Qe[De];if(Wt&&!Wt.match(X)){for(var ln="",Pn=0,Kn=Wt.length;Pn<Kn;Pn++)Wt.charCodeAt(Pn)>127?ln+="x":ln+=Wt[Pn];if(!ln.match(X)){var Vn=Qe.slice(0,De),Jt=Qe.slice(De+1),Nn=Wt.match(H);Nn&&(Vn.push(Nn[1]),Jt.unshift(Nn[2])),Jt.length&&(de="/"+Jt.join(".")+de),this.hostname=Vn.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),ut||(this.hostname=E.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,ut&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==de[0]&&(de="/"+de))}if(!ne[Ce])for(De=0,Ft=y.length;De<Ft;De++){var Ke=y[De];if(-1!==de.indexOf(Ke)){var Ri=encodeURIComponent(Ke);Ri===Ke&&(Ri=escape(Ke)),de=de.split(Ke).join(Ri)}}var mn=de.indexOf("#");-1!==mn&&(this.hash=de.substr(mn),de=de.slice(0,mn));var Ci=de.indexOf("?");return-1!==Ci?(this.search=de.substr(Ci),this.query=de.substr(Ci+1),Z&&(this.query=ue.parse(this.query)),de=de.slice(0,Ci)):Z&&(this.search="",this.query={}),de&&(this.pathname=de),J[Ce]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},a.prototype.format=function(){var ie=this.auth||"";ie&&(ie=(ie=encodeURIComponent(ie)).replace(/%3A/i,":"),ie+="@");var Z=this.protocol||"",G=this.pathname||"",fe=this.hash||"",Q=!1,j="";this.host?Q=ie+this.host:this.hostname&&(Q=ie+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Q+=":"+this.port)),this.query&&R.isObject(this.query)&&Object.keys(this.query).length&&(j=ue.stringify(this.query));var oe=this.search||j&&"?"+j||"";return Z&&":"!==Z.substr(-1)&&(Z+=":"),this.slashes||(!Z||J[Z])&&!1!==Q?(Q="//"+(Q||""),G&&"/"!==G.charAt(0)&&(G="/"+G)):Q||(Q=""),fe&&"#"!==fe.charAt(0)&&(fe="#"+fe),oe&&"?"!==oe.charAt(0)&&(oe="?"+oe),Z+Q+(G=G.replace(/[?#]/g,function(de){return encodeURIComponent(de)}))+(oe=oe.replace("#","%23"))+fe},a.prototype.resolve=function(ie){return this.resolveObject(se(ie,!1,!0)).format()},a.prototype.resolveObject=function(ie){if(R.isString(ie)){var Z=new a;Z.parse(ie,!1,!0),ie=Z}for(var G=new a,fe=Object.keys(this),Q=0;Q<fe.length;Q++){var j=fe[Q];G[j]=this[j]}if(G.hash=ie.hash,""===ie.href)return G.href=G.format(),G;if(ie.slashes&&!ie.protocol){for(var oe=Object.keys(ie),de=0;de<oe.length;de++){var ye=oe[de];"protocol"!==ye&&(G[ye]=ie[ye])}return J[G.protocol]&&G.hostname&&!G.pathname&&(G.path=G.pathname="/"),G.href=G.format(),G}if(ie.protocol&&ie.protocol!==G.protocol){if(!J[ie.protocol]){for(var ce=Object.keys(ie),Ce=0;Ce<ce.length;Ce++){var Be=ce[Ce];G[Be]=ie[Be]}return G.href=G.format(),G}if(G.protocol=ie.protocol,ie.host||ee[ie.protocol])G.pathname=ie.pathname;else{for(var Ft=(ie.pathname||"").split("/");Ft.length&&!(ie.host=Ft.shift()););ie.host||(ie.host=""),ie.hostname||(ie.hostname=""),""!==Ft[0]&&Ft.unshift(""),Ft.length<2&&Ft.unshift(""),G.pathname=Ft.join("/")}return G.search=ie.search,G.query=ie.query,G.host=ie.host||"",G.auth=ie.auth,G.hostname=ie.hostname||ie.host,G.port=ie.port,(G.pathname||G.search)&&(G.path=(G.pathname||"")+(G.search||"")),G.slashes=G.slashes||ie.slashes,G.href=G.format(),G}var Ue=G.pathname&&"/"===G.pathname.charAt(0),Xe=ie.host||ie.pathname&&"/"===ie.pathname.charAt(0),at=Xe||Ue||G.host&&ie.pathname,ut=at,Qe=G.pathname&&G.pathname.split("/")||[],Wt=(Ft=ie.pathname&&ie.pathname.split("/")||[],G.protocol&&!J[G.protocol]);if(Wt&&(G.hostname="",G.port=null,G.host&&(""===Qe[0]?Qe[0]=G.host:Qe.unshift(G.host)),G.host="",ie.protocol&&(ie.hostname=null,ie.port=null,ie.host&&(""===Ft[0]?Ft[0]=ie.host:Ft.unshift(ie.host)),ie.host=null),at=at&&(""===Ft[0]||""===Qe[0])),Xe)G.host=ie.host||""===ie.host?ie.host:G.host,G.hostname=ie.hostname||""===ie.hostname?ie.hostname:G.hostname,G.search=ie.search,G.query=ie.query,Qe=Ft;else if(Ft.length)Qe||(Qe=[]),Qe.pop(),Qe=Qe.concat(Ft),G.search=ie.search,G.query=ie.query;else if(!R.isNullOrUndefined(ie.search))return Wt&&(G.hostname=G.host=Qe.shift(),(ln=!!(G.host&&G.host.indexOf("@")>0)&&G.host.split("@"))&&(G.auth=ln.shift(),G.host=G.hostname=ln.shift())),G.search=ie.search,G.query=ie.query,(!R.isNull(G.pathname)||!R.isNull(G.search))&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.href=G.format(),G;if(!Qe.length)return G.pathname=null,G.path=G.search?"/"+G.search:null,G.href=G.format(),G;for(var Pn=Qe.slice(-1)[0],Kn=(G.host||ie.host||Qe.length>1)&&("."===Pn||".."===Pn)||""===Pn,Vn=0,Jt=Qe.length;Jt>=0;Jt--)"."===(Pn=Qe[Jt])?Qe.splice(Jt,1):".."===Pn?(Qe.splice(Jt,1),Vn++):Vn&&(Qe.splice(Jt,1),Vn--);if(!at&&!ut)for(;Vn--;Vn)Qe.unshift("..");at&&""!==Qe[0]&&(!Qe[0]||"/"!==Qe[0].charAt(0))&&Qe.unshift(""),Kn&&"/"!==Qe.join("/").substr(-1)&&Qe.push("");var ln,Nn=""===Qe[0]||Qe[0]&&"/"===Qe[0].charAt(0);return Wt&&(G.hostname=G.host=Nn?"":Qe.length?Qe.shift():"",(ln=!!(G.host&&G.host.indexOf("@")>0)&&G.host.split("@"))&&(G.auth=ln.shift(),G.host=G.hostname=ln.shift())),(at=at||G.host&&Qe.length)&&!Nn&&Qe.unshift(""),Qe.length?G.pathname=Qe.join("/"):(G.pathname=null,G.path=null),(!R.isNull(G.pathname)||!R.isNull(G.search))&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.auth=ie.auth||G.auth,G.slashes=G.slashes||ie.slashes,G.href=G.format(),G},a.prototype.parseHost=function(){var ie=this.host,Z=c.exec(ie);Z&&(":"!==(Z=Z[0])&&(this.port=Z.substr(1)),ie=ie.substr(0,ie.length-Z.length)),ie&&(this.hostname=ie)}},98893:S=>{"use strict";S.exports={isString:function(A){return"string"==typeof A},isObject:function(A){return"object"==typeof A&&null!==A},isNull:function(A){return null===A},isNullOrUndefined:function(A){return null==A}}},96553:()=>{}},S=>{S(S.s=30981)}]);