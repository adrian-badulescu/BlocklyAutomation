var rS=Object.defineProperty,oS=Object.defineProperties,sS=Object.getOwnPropertyDescriptors,Xb=Object.getOwnPropertySymbols,aS=Object.prototype.hasOwnProperty,lS=Object.prototype.propertyIsEnumerable,Em=(H,W,f)=>W in H?rS(H,W,{enumerable:!0,configurable:!0,writable:!0,value:f}):H[W]=f,Tm=(H,W)=>{for(var f in W||(W={}))aS.call(W,f)&&Em(H,f,W[f]);if(Xb)for(var f of Xb(W))lS.call(W,f)&&Em(H,f,W[f]);return H},Cm=(H,W)=>oS(H,sS(W)),Xc=(H,W,f)=>(Em(H,"symbol"!=typeof W?W+"":W,f),f);(self.webpackChunkAutoBlocklyApp=self.webpackChunkAutoBlocklyApp||[]).push([[179],{33290:(H,W,f)=>{"use strict";f.d(W,{d:()=>lt});var y=f(79307),g=f(38421);const{isArray:e}=Array;var n=f(60515),r=f(25403),s=f(63269);var v=f(39646),D=f(4128),P=f(32076),G=f(91005),it=f(18505),q=f(63900),bt=f(70262),Ft=f(54004),gt=f(43787),wt=f(21086);class Bt{constructor(ht,Gt){this.urL=ht,this.http=Gt,this.WasAlive=!1}download(){window.location.href="https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip"}IsAlive(){this.WasAlive=!1;var ht=this,Gt=(new Date).toISOString();return this.http.get(this.urL+`api/v1/Management/CurrentDate?${Gt}`,{responseType:"text"}).pipe((0,bt.K)(ut=>(0,v.of)("")),(0,Ft.U)(ut=>(null==ut?void 0:ut.length)>0&&(Date.parse(ut),ht.WasAlive=!0,!0)))}LoadBlockContent(ht){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocksContent",{id:ht},{responseType:"text"}).pipe((0,Ft.U)(ut=>null==ut?void 0:ut.toString()))}LoadBlocks(){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocks",null).pipe((0,Ft.U)(Gt=>Gt.map(ot=>{var st=new gt.q(ot);return st.Source="LocalAPI",st})))}SaveBlock(ht,Gt){return this.http.post(this.urL+"api/v1/BASave/SaveNewBlock",{b:ht,content:Gt},{responseType:"text"}).pipe((0,Ft.U)(ut=>Number.parseInt(null==ut?void 0:ut.toString(),10)))}}var Kt=f(5e3),It=f(40520),St=f(16335);let lt=(()=>{class ft{constructor(Gt,ut){this.http=Gt,this.loadShowUsageService=ut,this.settings=null,this.linksSwagger=[],this.demoBlocks=[],this.swaggersDict=new Map,this.customCategories="",this.LocalAPI=null,this.Init()}CreateLocalApis(Gt,ut){return new Bt(ut,Gt)}Init(){return function(...ft){const ht=(0,s.jO)(ft),Gt=function(ft){return 1===ft.length&&e(ft[0])?ft[0]:ft}(ft);return Gt.length?new y.y(ut=>{let ot=Gt.map(()=>[]),st=Gt.map(()=>!1);ut.add(()=>{ot=st=null});for(let Z=0;!ut.closed&&Z<Gt.length;Z++)(0,g.Xf)(Gt[Z]).subscribe(new r.Q(ut,Zt=>{if(ot[Z].push(Zt),ot.every(vt=>vt.length)){const vt=ot.map(At=>At.shift());ut.next(ht?ht(...vt):vt),ot.some((At,re)=>!At.length&&st[re])&&ut.complete()}},()=>{st[Z]=!0,!ot[Z].length&&ut.complete()}));return()=>{ot=st=null}}):n.E}(this.getSettings(),this.loadShowUsageService.getSwaggerLinks(),this.loadShowUsageService.getDemoBlocks(),this.loadShowUsageService.getCustomCategories(),this.getLatestVersion()).pipe((0,G.g)(1e3),(0,it.b)(([Gt,ut,ot,st,Z])=>{this.settings=Gt,this.settings.latestVersion=Z,this.linksSwagger=ut,this.demoBlocks=ot.map(Zt=>{var vt=new gt.q(Zt);return vt.Source="Demos",vt}),this.customCategories=st,this.LocalAPI=this.CreateLocalApis(this.http,this.settings.localAPI),this.LocalAPI.IsAlive().subscribe(Zt=>{console.log("LocalAPI is alive",Zt)})}),(0,q.w)(()=>this.obtainSwaggers(this.linksSwagger)),(0,q.w)(()=>(0,v.of)("")))}obtainSwaggers(Gt){var ut=Gt.map(st=>this.LoadSwaggersFromUrl(st));return(0,D.D)(ut)}LoadSwaggersFromUrl(Gt){var ut=Gt.link,ot=Gt.id||Gt.link,st=new wt.parseData(ut);return(0,P.D)(st.ParseSwagger()).pipe((0,it.b)(Zt=>{console.log("swagger loaded:"+ut,Zt),Zt.name=ot,this.swaggersDict.set(ut,Zt)},Zt=>{console.error("swagger error:"+ut,Zt)}))}getLatestVersion(){return this.http.get("https://ignatandrei.github.io/BlocklyAutomation/version.txt",{responseType:"text"}).pipe((0,bt.K)(Gt=>(console.error("error getting latest version",Gt),(0,v.of)("vcannot get latest version"))),(0,Ft.U)(Gt=>Gt.toString().trim().substr(1)))}getSettings(){var Gt=(new Date).toISOString();return this.http.get(`assets/settings.json?${Gt}`,{responseType:"text"}).pipe((0,Ft.U)(ut=>JSON.parse(ut)))}}return ft.\u0275fac=function(Gt){return new(Gt||ft)(Kt.LFG(It.eN),Kt.LFG(St.F))},ft.\u0275prov=Kt.Yz7({token:ft,factory:ft.\u0275fac}),ft})()},43787:(H,W,f)=>{"use strict";f.d(W,{q:()=>y});class y{constructor(e={}){this.id="",this.description="",this.categories="",this.blocks="",this.Source="None",Object.assign(this,e)}}},68260:(H,W,f)=>{"use strict";f.d(W,{v:()=>e});var y=f(77579),g=f(5e3);let e=(()=>{class t{constructor(){this.sendData=new y.x}receiveData(){return this.sendData.asObservable()}sendDataToServer(r,s){this.sendData.next([r,s])}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac}),t})()},19378:(H,W,f)=>{"use strict";f.r(W),f.d(W,{DisplayBlocklyComponent:()=>rf});var y=f(15861),e=(f(64166),f(76279)),t=f(30069);const n=[e.Events.VIEWPORT_CHANGE,e.Events.BLOCK_MOVE,e.Events.BLOCK_DELETE];class c{constructor(l){this.workspace_=l,this.width_=0,this.height_=0,this.top_=0,this.left_=0,this.lastScale_=1,this.cachedContentMetrics_=void 0}init(l){l=Number(l),this.padding_=isNaN(l)?10:l,this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"contentAreaHighlight"},null);const o=String(Math.random()).substring(2),a=e.utils.dom.createSvgElement(new e.utils.Svg("mask"),{id:"contentAreaHighlightMask"+o},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",fill:"white"},a),this.rect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH,fill:"black"},a),this.background_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",mask:"url(#contentAreaHighlightMask"+o+")"},this.svgGroup_),this.applyColor_();const u=this.workspace_.getMetricsManager();this.cachedContentMetrics_=u.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_);const m=u.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,m),this.svgGroup_.style.transition="opacity 0.25s";const C=this.workspace_.getParentSvg();C.firstChild?C.insertBefore(this.svgGroup_,C.firstChild):C.appendChild(this.svgGroup_),this.onChangeWrapper_=this.onChange_.bind(this),this.workspace_.addChangeListener(this.onChangeWrapper_)}dispose(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onChangeWrapper_&&e.unbindEvent_(this.onChangeWrapper_)}onChange_(l){if(l.type===e.Events.THEME_CHANGE)this.applyColor_();else if(-1!==n.indexOf(l.type)){const o=this.workspace_.getMetricsManager();l.type!==e.Events.VIEWPORT_CHANGE&&(this.cachedContentMetrics_=o.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_));const a=o.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,a)}else l.type===e.Events.BLOCK_DRAG&&this.handleBlockDrag_(l)}handleBlockDrag_(l){this.svgGroup_.setAttribute("opacity",l.isStart?"0":"1")}applyColor_(){const o=this.workspace_.getTheme().getComponentStyle("workspaceBackgroundColour")||"#ffffff",a=e.utils.colour.blend("#000",o,.1),u=e.utils.colour.blend("#fff",o,.1);this.background_.setAttribute("fill","#ffffff"===o||"#fff"===o?a:u)}resize_(l){const o=l.width?l.width+2*this.padding_:0,a=l.height?l.height+2*this.padding_:0;o!==this.width_&&(this.width_=o,this.rect_.setAttribute("width",o)),a!==this.height_&&(this.height_=a,this.rect_.setAttribute("height",a))}position_(l,o){const m=this.workspace_.scale,C=o.top+l.top*m- -this.workspace_.scrollY-this.padding_*m,R=o.left+l.left*m- -this.workspace_.scrollX-this.padding_*m;(C!==this.top_||R!==this.left_||this.lastScale_!==m)&&(this.top_=C,this.left_=R,this.lastScale_=m,this.rect_.setAttribute("transform","translate("+R+","+C+") scale("+m+")"))}}var v=f(4283),D=f(34346),P=f(43787),G=f(21086),it=f(70697);const bt="undefined"==typeof window?function(_){return _()}:window.requestAnimationFrame;function Ft(_,l,o){const a=o||(C=>Array.prototype.slice.call(C));let u=!1,m=[];return function(...C){m=a(C),u||(u=!0,bt.call(window,()=>{u=!1,_.apply(l,m)}))}}const wt=_=>"start"===_?"left":"end"===_?"right":"center",Bt=(_,l,o)=>"start"===_?l:"end"===_?o:(l+o)/2;function It(){}const St=function(){let _=0;return function(){return _++}}();function lt(_){return null==_}function ft(_){if(Array.isArray&&Array.isArray(_))return!0;const l=Object.prototype.toString.call(_);return"[object"===l.substr(0,7)&&"Array]"===l.substr(-6)}function ht(_){return null!==_&&"[object Object]"===Object.prototype.toString.call(_)}const Gt=_=>("number"==typeof _||_ instanceof Number)&&isFinite(+_);function ut(_,l){return Gt(_)?_:l}function ot(_,l){return void 0===_?l:_}const Z=(_,l)=>"string"==typeof _&&_.endsWith("%")?parseFloat(_)/100*l:+_;function Zt(_,l,o){if(_&&"function"==typeof _.call)return _.apply(o,l)}function vt(_,l,o,a){let u,m,C;if(ft(_))if(m=_.length,a)for(u=m-1;u>=0;u--)l.call(o,_[u],u);else for(u=0;u<m;u++)l.call(o,_[u],u);else if(ht(_))for(C=Object.keys(_),m=C.length,u=0;u<m;u++)l.call(o,_[C[u]],C[u])}function At(_,l){let o,a,u,m;if(!_||!l||_.length!==l.length)return!1;for(o=0,a=_.length;o<a;++o)if(u=_[o],m=l[o],u.datasetIndex!==m.datasetIndex||u.index!==m.index)return!1;return!0}function re(_){if(ft(_))return _.map(re);if(ht(_)){const l=Object.create(null),o=Object.keys(_),a=o.length;let u=0;for(;u<a;++u)l[o[u]]=re(_[o[u]]);return l}return _}function ve(_){return-1===["__proto__","prototype","constructor"].indexOf(_)}function oe(_,l,o,a){if(!ve(_))return;const u=l[_],m=o[_];ht(u)&&ht(m)?Ie(u,m,a):l[_]=re(m)}function Ie(_,l,o){const a=ft(l)?l:[l],u=a.length;if(!ht(_))return _;const m=(o=o||{}).merger||oe;for(let C=0;C<u;++C){if(!ht(l=a[C]))continue;const R=Object.keys(l);for(let x=0,U=R.length;x<U;++x)m(R[x],_,l,o)}return _}function Re(_,l){return Ie(_,l,{merger:je})}function je(_,l,o){if(!ve(_))return;const a=l[_],u=o[_];ht(a)&&ht(u)?Re(a,u):Object.prototype.hasOwnProperty.call(l,_)||(l[_]=re(u))}function ci(_,l){const o=_.indexOf(".",l);return-1===o?_.length:o}function Wt(_,l){if(""===l)return _;let o=0,a=ci(l,o);for(;_&&a>o;)_=_[l.substr(o,a-o)],o=a+1,a=ci(l,o);return _}function Ae(_){return _.charAt(0).toUpperCase()+_.slice(1)}const Qt=_=>void 0!==_,ee=_=>"function"==typeof _,Mt=(_,l)=>{if(_.size!==l.size)return!1;for(const o of _)if(!l.has(o))return!1;return!0},Yt=Math.PI,ye=2*Yt,ui=ye+Yt,Te=Number.POSITIVE_INFINITY,ce=Yt/180,te=Yt/2,Me=Yt/4,ue=2*Yt/3,_e=Math.log10,be=Math.sign;function Dt(_){const l=Math.round(_);_=Xe(_,l,_/1e3)?l:_;const o=Math.pow(10,Math.floor(_e(_))),a=_/o;return(a<=1?1:a<=2?2:a<=5?5:10)*o}function Ge(_){return!isNaN(parseFloat(_))&&isFinite(_)}function Xe(_,l,o){return Math.abs(_-l)<o}function bi(_,l,o){let a,u,m;for(a=0,u=_.length;a<u;a++)m=_[a][o],isNaN(m)||(l.min=Math.min(l.min,m),l.max=Math.max(l.max,m))}function mi(_){return _*(Yt/180)}function on(_){return _*(180/Yt)}function li(_){if(!Gt(_))return;let l=1,o=0;for(;Math.round(_*l)/l!==_;)l*=10,o++;return o}function Ii(_,l){return Math.sqrt(Math.pow(l.x-_.x,2)+Math.pow(l.y-_.y,2))}function ni(_,l){return(_-l+ui)%ye-Yt}function vi(_){return(_%ye+ye)%ye}function Ce(_,l,o,a){const u=vi(_),m=vi(l),C=vi(o),R=vi(m-u),x=vi(C-u),U=vi(u-m),tt=vi(u-C);return u===m||u===C||a&&m===C||R>x&&U<tt}function Qe(_,l,o){return Math.max(l,Math.min(o,_))}function Pi(_,l,o,a=1e-6){return _>=Math.min(l,o)-a&&_<=Math.max(l,o)+a}const ti=_=>0===_||1===_,ge=(_,l,o)=>-Math.pow(2,10*(_-=1))*Math.sin((_-l)*ye/o),Pt=(_,l,o)=>Math.pow(2,-10*_)*Math.sin((_-l)*ye/o)+1,dt={linear:_=>_,easeInQuad:_=>_*_,easeOutQuad:_=>-_*(_-2),easeInOutQuad:_=>(_/=.5)<1?.5*_*_:-.5*(--_*(_-2)-1),easeInCubic:_=>_*_*_,easeOutCubic:_=>(_-=1)*_*_+1,easeInOutCubic:_=>(_/=.5)<1?.5*_*_*_:.5*((_-=2)*_*_+2),easeInQuart:_=>_*_*_*_,easeOutQuart:_=>-((_-=1)*_*_*_-1),easeInOutQuart:_=>(_/=.5)<1?.5*_*_*_*_:-.5*((_-=2)*_*_*_-2),easeInQuint:_=>_*_*_*_*_,easeOutQuint:_=>(_-=1)*_*_*_*_+1,easeInOutQuint:_=>(_/=.5)<1?.5*_*_*_*_*_:.5*((_-=2)*_*_*_*_+2),easeInSine:_=>1-Math.cos(_*te),easeOutSine:_=>Math.sin(_*te),easeInOutSine:_=>-.5*(Math.cos(Yt*_)-1),easeInExpo:_=>0===_?0:Math.pow(2,10*(_-1)),easeOutExpo:_=>1===_?1:1-Math.pow(2,-10*_),easeInOutExpo:_=>ti(_)?_:_<.5?.5*Math.pow(2,10*(2*_-1)):.5*(2-Math.pow(2,-10*(2*_-1))),easeInCirc:_=>_>=1?_:-(Math.sqrt(1-_*_)-1),easeOutCirc:_=>Math.sqrt(1-(_-=1)*_),easeInOutCirc:_=>(_/=.5)<1?-.5*(Math.sqrt(1-_*_)-1):.5*(Math.sqrt(1-(_-=2)*_)+1),easeInElastic:_=>ti(_)?_:ge(_,.075,.3),easeOutElastic:_=>ti(_)?_:Pt(_,.075,.3),easeInOutElastic(_){const l=.1125;return ti(_)?_:_<.5?.5*ge(2*_,l,.45):.5+.5*Pt(2*_-1,l,.45)},easeInBack(_){const l=1.70158;return _*_*((l+1)*_-l)},easeOutBack(_){const l=1.70158;return(_-=1)*_*((l+1)*_+l)+1},easeInOutBack(_){let l=1.70158;return(_/=.5)<1?_*_*((1+(l*=1.525))*_-l)*.5:.5*((_-=2)*_*((1+(l*=1.525))*_+l)+2)},easeInBounce:_=>1-dt.easeOutBounce(1-_),easeOutBounce(_){const l=7.5625,o=2.75;return _<1/o?l*_*_:_<2/o?l*(_-=1.5/o)*_+.75:_<2.5/o?l*(_-=2.25/o)*_+.9375:l*(_-=2.625/o)*_+.984375},easeInOutBounce:_=>_<.5?.5*dt.easeInBounce(2*_):.5*dt.easeOutBounce(2*_-1)+.5},Nt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},pe="0123456789ABCDEF",Le=_=>pe[15&_],Vi=_=>pe[(240&_)>>4]+pe[15&_],Ki=_=>(240&_)>>4==(15&_);function Ke(_){return _+.5|0}const Pe=(_,l,o)=>Math.max(Math.min(_,o),l);function di(_){return Pe(Ke(2.55*_),0,255)}function Oi(_){return Pe(Ke(255*_),0,255)}function dn(_){return Pe(Ke(_/2.55)/100,0,1)}function Rn(_){return Pe(Ke(100*_),0,100)}const nr=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,_o=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ko(_,l,o){const a=l*Math.min(o,1-o),u=(m,C=(m+_/30)%12)=>o-a*Math.max(Math.min(C-3,9-C,1),-1);return[u(0),u(8),u(4)]}function jr(_,l,o){const a=(u,m=(u+_/60)%6)=>o-o*l*Math.max(Math.min(m,4-m,1),0);return[a(5),a(3),a(1)]}function pr(_,l,o){const a=Ko(_,1,.5);let u;for(l+o>1&&(u=1/(l+o),l*=u,o*=u),u=0;u<3;u++)a[u]*=1-l-o,a[u]+=l;return a}function ss(_){const o=_.r/255,a=_.g/255,u=_.b/255,m=Math.max(o,a,u),C=Math.min(o,a,u),R=(m+C)/2;let x,U,tt;return m!==C&&(tt=m-C,U=R>.5?tt/(2-m-C):tt/(m+C),x=m===o?(a-u)/tt+(a<u?6:0):m===a?(u-o)/tt+2:(o-a)/tt+4,x=60*x+.5),[0|x,U||0,R]}function Zn(_,l,o,a){return(Array.isArray(l)?_(l[0],l[1],l[2]):_(l,o,a)).map(Oi)}function Di(_,l,o){return Zn(Ko,_,l,o)}function Mr(_){return(_%360+360)%360}const Tr={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ui={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Nn;function Fe(_,l,o){if(_){let a=ss(_);a[l]=Math.max(0,Math.min(a[l]+a[l]*o,0===l?360:1)),a=Di(a),_.r=a[0],_.g=a[1],_.b=a[2]}}function Ai(_,l){return _&&Object.assign(l||{},_)}function ji(_){var l={r:0,g:0,b:0,a:255};return Array.isArray(_)?_.length>=3&&(l={r:_[0],g:_[1],b:_[2],a:255},_.length>3&&(l.a=Oi(_[3]))):(l=Ai(_,{r:0,g:0,b:0,a:1})).a=Oi(l.a),l}function Xi(_){return"r"===_.charAt(0)?function(_){const l=nr.exec(_);let a,u,m,o=255;if(l){if(l[7]!==a){const C=+l[7];o=255&(l[8]?di(C):255*C)}return a=+l[1],u=+l[3],m=+l[5],a=255&(l[2]?di(a):a),u=255&(l[4]?di(u):u),m=255&(l[6]?di(m):m),{r:a,g:u,b:m,a:o}}}(_):function(_){const l=_o.exec(_);let a,o=255;if(!l)return;l[5]!==a&&(o=l[6]?di(+l[5]):Oi(+l[5]));const u=Mr(+l[2]),m=+l[3]/100,C=+l[4]/100;return a="hwb"===l[1]?function(_,l,o){return Zn(pr,_,l,o)}(u,m,C):"hsv"===l[1]?function(_,l,o){return Zn(jr,_,l,o)}(u,m,C):Di(u,m,C),{r:a[0],g:a[1],b:a[2],a:o}}(_)}class Qn{constructor(l){if(l instanceof Qn)return l;const o=typeof l;let a;"object"===o?a=ji(l):"string"===o&&(a=function(_){var o,l=_.length;return"#"===_[0]&&(4===l||5===l?o={r:255&17*Nt[_[1]],g:255&17*Nt[_[2]],b:255&17*Nt[_[3]],a:5===l?17*Nt[_[4]]:255}:(7===l||9===l)&&(o={r:Nt[_[1]]<<4|Nt[_[2]],g:Nt[_[3]]<<4|Nt[_[4]],b:Nt[_[5]]<<4|Nt[_[6]],a:9===l?Nt[_[7]]<<4|Nt[_[8]]:255})),o}(l)||function(_){Nn||(Nn=function(){const _={},l=Object.keys(Ui),o=Object.keys(Tr);let a,u,m,C,R;for(a=0;a<l.length;a++){for(C=R=l[a],u=0;u<o.length;u++)m=o[u],R=R.replace(m,Tr[m]);m=parseInt(Ui[C],16),_[R]=[m>>16&255,m>>8&255,255&m]}return _}(),Nn.transparent=[0,0,0,0]);const l=Nn[_.toLowerCase()];return l&&{r:l[0],g:l[1],b:l[2],a:4===l.length?l[3]:255}}(l)||Xi(l)),this._rgb=a,this._valid=!!a}get valid(){return this._valid}get rgb(){var l=Ai(this._rgb);return l&&(l.a=dn(l.a)),l}set rgb(l){this._rgb=ji(l)}rgbString(){return this._valid?(_=this._rgb)&&(_.a<255?`rgba(${_.r}, ${_.g}, ${_.b}, ${dn(_.a)})`:`rgb(${_.r}, ${_.g}, ${_.b})`):this._rgb;var _}hexString(){return this._valid?(l=function(_){return Ki(_.r)&&Ki(_.g)&&Ki(_.b)&&Ki(_.a)}(_=this._rgb)?Le:Vi,_&&"#"+l(_.r)+l(_.g)+l(_.b)+(_.a<255?l(_.a):"")):this._rgb;var _,l}hslString(){return this._valid?function(_){if(!_)return;const l=ss(_),o=l[0],a=Rn(l[1]),u=Rn(l[2]);return _.a<255?`hsla(${o}, ${a}%, ${u}%, ${dn(_.a)})`:`hsl(${o}, ${a}%, ${u}%)`}(this._rgb):this._rgb}mix(l,o){const a=this;if(l){const u=a.rgb,m=l.rgb;let C;const R=o===C?.5:o,x=2*R-1,U=u.a-m.a,tt=((x*U==-1?x:(x+U)/(1+x*U))+1)/2;C=1-tt,u.r=255&tt*u.r+C*m.r+.5,u.g=255&tt*u.g+C*m.g+.5,u.b=255&tt*u.b+C*m.b+.5,u.a=R*u.a+(1-R)*m.a,a.rgb=u}return a}clone(){return new Qn(this.rgb)}alpha(l){return this._rgb.a=Oi(l),this}clearer(l){return this._rgb.a*=1-l,this}greyscale(){const l=this._rgb,o=Ke(.3*l.r+.59*l.g+.11*l.b);return l.r=l.g=l.b=o,this}opaquer(l){return this._rgb.a*=1+l,this}negate(){const l=this._rgb;return l.r=255-l.r,l.g=255-l.g,l.b=255-l.b,this}lighten(l){return Fe(this._rgb,2,l),this}darken(l){return Fe(this._rgb,2,-l),this}saturate(l){return Fe(this._rgb,1,l),this}desaturate(l){return Fe(this._rgb,1,-l),this}rotate(l){return function(_,l){var o=ss(_);o[0]=Mr(o[0]+l),o=Di(o),_.r=o[0],_.g=o[1],_.b=o[2]}(this._rgb,l),this}}function qn(_){return new Qn(_)}const Jn=_=>_ instanceof CanvasGradient||_ instanceof CanvasPattern;function Tn(_){return Jn(_)?_:qn(_)}function Jo(_){return Jn(_)?_:qn(_).saturate(.5).darken(.1).hexString()}const no=Object.create(null),ro=Object.create(null);function vo(_,l){if(!l)return _;const o=l.split(".");for(let a=0,u=o.length;a<u;++a){const m=o[a];_=_[m]||(_[m]=Object.create(null))}return _}function Bs(_,l,o){return"string"==typeof l?Ie(vo(_,l),o):Ie(vo(_,""),l)}var tr=new class{constructor(l){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=o=>o.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(o,a)=>Jo(a.backgroundColor),this.hoverBorderColor=(o,a)=>Jo(a.borderColor),this.hoverColor=(o,a)=>Jo(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.describe(l)}set(l,o){return Bs(this,l,o)}get(l){return vo(this,l)}describe(l,o){return Bs(ro,l,o)}override(l,o){return Bs(no,l,o)}route(l,o,a,u){const m=vo(this,l),C=vo(this,a),R="_"+o;Object.defineProperties(m,{[R]:{value:m[o],writable:!0},[o]:{enumerable:!0,get(){const x=this[R],U=C[u];return ht(x)?Object.assign({},U,x):ot(x,U)},set(x){this[R]=x}}})}}({_scriptable:_=>!_.startsWith("on"),_indexable:_=>"events"!==_,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Go(_,l,o,a,u){let m=l[u];return m||(m=l[u]=_.measureText(u).width,o.push(u)),m>a&&(a=m),a}function sl(_,l,o,a){let u=(a=a||{}).data=a.data||{},m=a.garbageCollect=a.garbageCollect||[];a.font!==l&&(u=a.data={},m=a.garbageCollect=[],a.font=l),_.save(),_.font=l;let C=0;const R=o.length;let x,U,tt,yt,Vt;for(x=0;x<R;x++)if(yt=o[x],null!=yt&&!0!==ft(yt))C=Go(_,u,m,C,yt);else if(ft(yt))for(U=0,tt=yt.length;U<tt;U++)Vt=yt[U],null!=Vt&&!ft(Vt)&&(C=Go(_,u,m,C,Vt));_.restore();const ne=m.length/2;if(ne>o.length){for(x=0;x<ne;x++)delete u[m[x]];m.splice(0,ne)}return C}function po(_,l,o){const a=_.currentDevicePixelRatio,u=0!==o?Math.max(o/2,.5):0;return Math.round((l-u)*a)/a+u}function ya(_,l){(l=l||_.getContext("2d")).save(),l.resetTransform(),l.clearRect(0,0,_.width,_.height),l.restore()}function Zs(_,l,o,a){let u,m,C,R,x;const U=l.pointStyle,tt=l.rotation,yt=l.radius;let Vt=(tt||0)*ce;if(U&&"object"==typeof U&&(u=U.toString(),"[object HTMLImageElement]"===u||"[object HTMLCanvasElement]"===u))return _.save(),_.translate(o,a),_.rotate(Vt),_.drawImage(U,-U.width/2,-U.height/2,U.width,U.height),void _.restore();if(!(isNaN(yt)||yt<=0)){switch(_.beginPath(),U){default:_.arc(o,a,yt,0,ye),_.closePath();break;case"triangle":_.moveTo(o+Math.sin(Vt)*yt,a-Math.cos(Vt)*yt),Vt+=ue,_.lineTo(o+Math.sin(Vt)*yt,a-Math.cos(Vt)*yt),Vt+=ue,_.lineTo(o+Math.sin(Vt)*yt,a-Math.cos(Vt)*yt),_.closePath();break;case"rectRounded":x=.516*yt,R=yt-x,m=Math.cos(Vt+Me)*R,C=Math.sin(Vt+Me)*R,_.arc(o-m,a-C,x,Vt-Yt,Vt-te),_.arc(o+C,a-m,x,Vt-te,Vt),_.arc(o+m,a+C,x,Vt,Vt+te),_.arc(o-C,a+m,x,Vt+te,Vt+Yt),_.closePath();break;case"rect":if(!tt){R=Math.SQRT1_2*yt,_.rect(o-R,a-R,2*R,2*R);break}Vt+=Me;case"rectRot":m=Math.cos(Vt)*yt,C=Math.sin(Vt)*yt,_.moveTo(o-m,a-C),_.lineTo(o+C,a-m),_.lineTo(o+m,a+C),_.lineTo(o-C,a+m),_.closePath();break;case"crossRot":Vt+=Me;case"cross":m=Math.cos(Vt)*yt,C=Math.sin(Vt)*yt,_.moveTo(o-m,a-C),_.lineTo(o+m,a+C),_.moveTo(o+C,a-m),_.lineTo(o-C,a+m);break;case"star":m=Math.cos(Vt)*yt,C=Math.sin(Vt)*yt,_.moveTo(o-m,a-C),_.lineTo(o+m,a+C),_.moveTo(o+C,a-m),_.lineTo(o-C,a+m),Vt+=Me,m=Math.cos(Vt)*yt,C=Math.sin(Vt)*yt,_.moveTo(o-m,a-C),_.lineTo(o+m,a+C),_.moveTo(o+C,a-m),_.lineTo(o-C,a+m);break;case"line":m=Math.cos(Vt)*yt,C=Math.sin(Vt)*yt,_.moveTo(o-m,a-C),_.lineTo(o+m,a+C);break;case"dash":_.moveTo(o,a),_.lineTo(o+Math.cos(Vt)*yt,a+Math.sin(Vt)*yt)}_.fill(),l.borderWidth>0&&_.stroke()}}function Cr(_,l,o){return o=o||.5,!l||_&&_.x>l.left-o&&_.x<l.right+o&&_.y>l.top-o&&_.y<l.bottom+o}function Qs(_,l){_.save(),_.beginPath(),_.rect(l.left,l.top,l.right-l.left,l.bottom-l.top),_.clip()}function Ea(_){_.restore()}function Ma(_,l,o,a,u){if(!l)return _.lineTo(o.x,o.y);if("middle"===u){const m=(l.x+o.x)/2;_.lineTo(m,l.y),_.lineTo(m,o.y)}else"after"===u!=!!a?_.lineTo(l.x,o.y):_.lineTo(o.x,l.y);_.lineTo(o.x,o.y)}function qs(_,l,o,a){if(!l)return _.lineTo(o.x,o.y);_.bezierCurveTo(a?l.cp1x:l.cp2x,a?l.cp1y:l.cp2y,a?o.cp2x:o.cp1x,a?o.cp2y:o.cp1y,o.x,o.y)}function Ts(_,l,o,a,u,m={}){const C=ft(l)?l:[l],R=m.strokeWidth>0&&""!==m.strokeColor;let x,U;for(_.save(),_.font=u.string,function(_,l){l.translation&&_.translate(l.translation[0],l.translation[1]),lt(l.rotation)||_.rotate(l.rotation),l.color&&(_.fillStyle=l.color),l.textAlign&&(_.textAlign=l.textAlign),l.textBaseline&&(_.textBaseline=l.textBaseline)}(_,m),x=0;x<C.length;++x)U=C[x],R&&(m.strokeColor&&(_.strokeStyle=m.strokeColor),lt(m.strokeWidth)||(_.lineWidth=m.strokeWidth),_.strokeText(U,o,a,m.maxWidth)),_.fillText(U,o,a,m.maxWidth),ha(_,o,a,U,m),a+=u.lineHeight;_.restore()}function ha(_,l,o,a,u){if(u.strikethrough||u.underline){const m=_.measureText(a),C=l-m.actualBoundingBoxLeft,R=l+m.actualBoundingBoxRight,x=o-m.actualBoundingBoxAscent,U=o+m.actualBoundingBoxDescent,tt=u.strikethrough?(x+U)/2:U;_.strokeStyle=_.fillStyle,_.beginPath(),_.lineWidth=u.decorationWidth||2,_.moveTo(C,tt),_.lineTo(R,tt),_.stroke()}}function Aa(_,l){const{x:o,y:a,w:u,h:m,radius:C}=l;_.arc(o+C.topLeft,a+C.topLeft,C.topLeft,-te,Yt,!0),_.lineTo(o,a+m-C.bottomLeft),_.arc(o+C.bottomLeft,a+m-C.bottomLeft,C.bottomLeft,Yt,te,!0),_.lineTo(o+u-C.bottomRight,a+m),_.arc(o+u-C.bottomRight,a+m-C.bottomRight,C.bottomRight,te,0,!0),_.lineTo(o+u,a+C.topRight),_.arc(o+u-C.topRight,a+C.topRight,C.topRight,0,-te,!0),_.lineTo(o+C.topLeft,a)}const ta=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),as=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function xl(_,l){const o=(""+_).match(ta);if(!o||"normal"===o[1])return 1.2*l;switch(_=+o[2],o[3]){case"px":return _;case"%":_/=100}return l*_}const al=_=>+_||0;function Us(_,l){const o={},a=ht(l),u=a?Object.keys(l):l,m=ht(_)?a?C=>ot(_[C],_[l[C]]):C=>_[C]:()=>_;for(const C of u)o[C]=al(m(C));return o}function Wo(_){return Us(_,{top:"y",right:"x",bottom:"y",left:"x"})}function No(_){return Us(_,["topLeft","topRight","bottomLeft","bottomRight"])}function Mo(_){const l=Wo(_);return l.width=l.left+l.right,l.height=l.top+l.bottom,l}function _r(_,l){let o=ot((_=_||{}).size,(l=l||tr.font).size);"string"==typeof o&&(o=parseInt(o,10));let a=ot(_.style,l.style);a&&!(""+a).match(as)&&(console.warn('Invalid font style specified: "'+a+'"'),a="");const u={family:ot(_.family,l.family),lineHeight:xl(ot(_.lineHeight,l.lineHeight),o),size:o,style:a,weight:ot(_.weight,l.weight),string:""};return u.string=function(_){return!_||lt(_.size)||lt(_.family)?null:(_.style?_.style+" ":"")+(_.weight?_.weight+" ":"")+_.size+"px "+_.family}(u),u}function ls(_,l,o,a){let m,C,R,u=!0;for(m=0,C=_.length;m<C;++m)if(R=_[m],void 0!==R&&(void 0!==l&&"function"==typeof R&&(R=R(l),u=!1),void 0!==o&&ft(R)&&(R=R[o%R.length],u=!1),void 0!==R))return a&&!u&&(a.cacheable=!1),R}function Po(_,l){return Object.assign(Object.create(_),l)}function Vs(_,l,o){o=o||(C=>_[C]<l);let m,a=_.length-1,u=0;for(;a-u>1;)m=u+a>>1,o(m)?u=m:a=m;return{lo:u,hi:a}}const Xr=(_,l,o)=>Vs(_,o,a=>_[a][l]<o),Oo=(_,l,o)=>Vs(_,o,a=>_[a][l]>=o),Qr=["push","pop","shift","splice","unshift"];function Ar(_,l){const o=_._chartjs;if(!o)return;const a=o.listeners,u=a.indexOf(l);-1!==u&&a.splice(u,1),!(a.length>0)&&(Qr.forEach(m=>{delete _[m]}),delete _._chartjs)}function ea(_){const l=new Set;let o,a;for(o=0,a=_.length;o<a;++o)l.add(_[o]);return l.size===a?_:Array.from(l)}function Hr(_,l=[""],o=_,a,u=(()=>_[0])){Qt(a)||(a=Ti("_fallback",_));const m={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:_,_rootScopes:o,_fallback:a,_getTarget:u,override:C=>Hr([C,..._],l,o,a)};return new Proxy(m,{deleteProperty:(C,R)=>(delete C[R],delete C._keys,delete _[0][R],!0),get:(C,R)=>us(C,R,()=>function(_,l,o,a){let u;for(const m of l)if(u=Ti(cs(m,_),o),Qt(u))return Ao(_,u)?V(o,a,_,u):u}(R,l,_,C)),getOwnPropertyDescriptor:(C,R)=>Reflect.getOwnPropertyDescriptor(C._scopes[0],R),getPrototypeOf:()=>Reflect.getPrototypeOf(_[0]),has:(C,R)=>an(C).includes(R),ownKeys:C=>an(C),set(C,R,x){const U=C._storage||(C._storage=u());return C[R]=U[R]=x,delete C._keys,!0}})}function vs(_,l,o,a){const u={_cacheable:!1,_proxy:_,_context:l,_subProxy:o,_stack:new Set,_descriptors:Na(_,a),setContext:m=>vs(_,m,o,a),override:m=>vs(_.override(m),l,o,a)};return new Proxy(u,{deleteProperty:(m,C)=>(delete m[C],delete _[C],!0),get:(m,C,R)=>us(m,C,()=>function(_,l,o){const{_proxy:a,_context:u,_subProxy:m,_descriptors:C}=_;let R=a[l];return ee(R)&&C.isScriptable(l)&&(R=function(_,l,o,a){const{_proxy:u,_context:m,_subProxy:C,_stack:R}=o;if(R.has(_))throw new Error("Recursion detected: "+Array.from(R).join("->")+"->"+_);return R.add(_),l=l(m,C||a),R.delete(_),Ao(_,l)&&(l=V(u._scopes,u,_,l)),l}(l,R,_,o)),ft(R)&&R.length&&(R=function(_,l,o,a){const{_proxy:u,_context:m,_subProxy:C,_descriptors:R}=o;if(Qt(m.index)&&a(_))l=l[m.index%l.length];else if(ht(l[0])){const x=l,U=u._scopes.filter(tt=>tt!==x);l=[];for(const tt of x){const yt=V(U,u,_,tt);l.push(vs(yt,m,C&&C[_],R))}}return l}(l,R,_,C.isIndexable)),Ao(l,R)&&(R=vs(R,u,m&&m[l],C)),R}(m,C,R)),getOwnPropertyDescriptor:(m,C)=>m._descriptors.allKeys?Reflect.has(_,C)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(_,C),getPrototypeOf:()=>Reflect.getPrototypeOf(_),has:(m,C)=>Reflect.has(_,C),ownKeys:()=>Reflect.ownKeys(_),set:(m,C,R)=>(_[C]=R,delete m[C],!0)})}function Na(_,l={scriptable:!0,indexable:!0}){const{_scriptable:o=l.scriptable,_indexable:a=l.indexable,_allKeys:u=l.allKeys}=_;return{allKeys:u,scriptable:o,indexable:a,isScriptable:ee(o)?o:()=>o,isIndexable:ee(a)?a:()=>a}}const cs=(_,l)=>_?_+Ae(l):l,Ao=(_,l)=>ht(l)&&"adapters"!==_&&(null===Object.getPrototypeOf(l)||l.constructor===Object);function us(_,l,o){if(Object.prototype.hasOwnProperty.call(_,l))return _[l];const a=o();return _[l]=a,a}function ia(_,l,o){return ee(_)?_(l,o):_}const Lt=(_,l)=>!0===_?l:"string"==typeof _?Wt(l,_):void 0;function Q(_,l,o,a){for(const u of l){const m=Lt(o,u);if(m){_.add(m);const C=ia(m._fallback,o,m);if(Qt(C)&&C!==o&&C!==a)return C}else if(!1===m&&Qt(a)&&o!==a)return null}return!1}function V(_,l,o,a){const u=l._rootScopes,m=ia(l._fallback,o,a),C=[..._,...u],R=new Set;R.add(a);let x=j(R,C,o,m||o);return!(null===x||Qt(m)&&m!==o&&(x=j(R,C,m,x),null===x))&&Hr(Array.from(R),[""],u,m,()=>function(_,l,o){const a=_._getTarget();l in a||(a[l]={});const u=a[l];return ft(u)&&ht(o)?o:u}(l,o,a))}function j(_,l,o,a){for(;o;)o=Q(_,l,o,a);return o}function Ti(_,l){for(const o of l){if(!o)continue;const a=o[_];if(Qt(a))return a}}function an(_){let l=_._keys;return l||(l=_._keys=function(_){const l=new Set;for(const o of _)for(const a of Object.keys(o).filter(u=>!u.startsWith("_")))l.add(a);return Array.from(l)}(_._scopes)),l}const wr=Number.EPSILON||1e-14,vr=(_,l)=>l<_.length&&!_[l].skip&&_[l],yr=_=>"x"===_?"y":"x";function Gr(_,l,o,a){const u=_.skip?l:_,m=l,C=o.skip?l:o,R=Ii(m,u),x=Ii(C,m);let U=R/(R+x),tt=x/(R+x);U=isNaN(U)?0:U,tt=isNaN(tt)?0:tt;const yt=a*U,Vt=a*tt;return{previous:{x:m.x-yt*(C.x-u.x),y:m.y-yt*(C.y-u.y)},next:{x:m.x+Vt*(C.x-u.x),y:m.y+Vt*(C.y-u.y)}}}function Bo(_,l,o){return Math.max(Math.min(_,o),l)}function zo(_,l,o,a,u){let m,C,R,x;if(l.spanGaps&&(_=_.filter(U=>!U.skip)),"monotone"===l.cubicInterpolationMode)!function(_,l="x"){const o=yr(l),a=_.length,u=Array(a).fill(0),m=Array(a);let C,R,x,U=vr(_,0);for(C=0;C<a;++C)if(R=x,x=U,U=vr(_,C+1),x){if(U){const tt=U[l]-x[l];u[C]=0!==tt?(U[o]-x[o])/tt:0}m[C]=R?U?be(u[C-1])!==be(u[C])?0:(u[C-1]+u[C])/2:u[C-1]:u[C]}(function(_,l,o){const a=_.length;let u,m,C,R,x,U=vr(_,0);for(let tt=0;tt<a-1;++tt)if(x=U,U=vr(_,tt+1),x&&U){if(Xe(l[tt],0,wr)){o[tt]=o[tt+1]=0;continue}u=o[tt]/l[tt],m=o[tt+1]/l[tt],R=Math.pow(u,2)+Math.pow(m,2),!(R<=9)&&(C=3/Math.sqrt(R),o[tt]=u*C*l[tt],o[tt+1]=m*C*l[tt])}})(_,u,m),function(_,l,o="x"){const a=yr(o),u=_.length;let m,C,R,x=vr(_,0);for(let U=0;U<u;++U){if(C=R,R=x,x=vr(_,U+1),!R)continue;const tt=R[o],yt=R[a];C&&(m=(tt-C[o])/3,R[`cp1${o}`]=tt-m,R[`cp1${a}`]=yt-m*l[U]),x&&(m=(x[o]-tt)/3,R[`cp2${o}`]=tt+m,R[`cp2${a}`]=yt+m*l[U])}}(_,m,l)}(_,u);else{let U=a?_[_.length-1]:_[0];for(m=0,C=_.length;m<C;++m)R=_[m],x=Gr(U,R,_[Math.min(m+1,C-(a?0:1))%C],l.tension),R.cp1x=x.previous.x,R.cp1y=x.previous.y,R.cp2x=x.next.x,R.cp2y=x.next.y,U=R}l.capBezierPoints&&function(_,l){let o,a,u,m,C,R=Cr(_[0],l);for(o=0,a=_.length;o<a;++o)C=m,m=R,R=o<a-1&&Cr(_[o+1],l),m&&(u=_[o],C&&(u.cp1x=Bo(u.cp1x,l.left,l.right),u.cp1y=Bo(u.cp1y,l.top,l.bottom)),R&&(u.cp2x=Bo(u.cp2x,l.left,l.right),u.cp2y=Bo(u.cp2y,l.top,l.bottom)))}(_,o)}function Ja(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Cs(_){let l=_.parentNode;return l&&"[object ShadowRoot]"===l.toString()&&(l=l.host),l}function Ss(_,l,o){let a;return"string"==typeof _?(a=parseInt(_,10),-1!==_.indexOf("%")&&(a=a/100*l.parentNode[o])):a=_,a}const bl=_=>window.getComputedStyle(_,null),Rr=["top","right","bottom","left"];function ae(_,l,o){const a={};o=o?"-"+o:"";for(let u=0;u<4;u++){const m=Rr[u];a[m]=parseFloat(_[l+"-"+m+o])||0}return a.width=a.left+a.right,a.height=a.top+a.bottom,a}function Et(_,l){const{canvas:o,currentDevicePixelRatio:a}=l,u=bl(o),m="border-box"===u.boxSizing,C=ae(u,"padding"),R=ae(u,"border","width"),{x,y:U,box:tt}=function(_,l){const o=_.native||_,a=o.touches,u=a&&a.length?a[0]:o,{offsetX:m,offsetY:C}=u;let x,U,R=!1;if(((_,l,o)=>(_>0||l>0)&&(!o||!o.shadowRoot))(m,C,o.target))x=m,U=C;else{const tt=l.getBoundingClientRect();x=u.clientX-tt.left,U=u.clientY-tt.top,R=!0}return{x,y:U,box:R}}(_,o),yt=C.left+(tt&&R.left),Vt=C.top+(tt&&R.top);let{width:ne,height:Se}=l;return m&&(ne-=C.width+R.width,Se-=C.height+R.height),{x:Math.round((x-yt)/ne*o.width/a),y:Math.round((U-Vt)/Se*o.height/a)}}const Ee=_=>Math.round(10*_)/10;function $e(_,l,o){const a=l||1,u=Math.floor(_.height*a),m=Math.floor(_.width*a);_.height=u/a,_.width=m/a;const C=_.canvas;return C.style&&(o||!C.style.height&&!C.style.width)&&(C.style.height=`${_.height}px`,C.style.width=`${_.width}px`),(_.currentDevicePixelRatio!==a||C.height!==u||C.width!==m)&&(_.currentDevicePixelRatio=a,C.height=u,C.width=m,_.ctx.setTransform(a,0,0,a,0,0),!0)}const yi=function(){let _=!1;try{const l={get passive(){return _=!0,!1}};window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch(l){}return _}();function Hi(_,l){const o=function(_,l){return bl(_).getPropertyValue(l)}(_,l),a=o&&o.match(/^(\d+)(\.\d+)?px$/);return a?+a[1]:void 0}function sn(_,l,o,a){return{x:_.x+o*(l.x-_.x),y:_.y+o*(l.y-_.y)}}function fn(_,l,o,a){return{x:_.x+o*(l.x-_.x),y:"middle"===a?o<.5?_.y:l.y:"after"===a?o<1?_.y:l.y:o>0?l.y:_.y}}function Yn(_,l,o,a){const u={x:_.cp2x,y:_.cp2y},m={x:l.cp1x,y:l.cp1y},C=sn(_,u,o),R=sn(u,m,o),x=sn(m,l,o),U=sn(C,R,o),tt=sn(R,x,o);return sn(U,tt,o)}const cr=new Map;function Fn(_,l,o){return function(_,l){l=l||{};const o=_+JSON.stringify(l);let a=cr.get(o);return a||(a=new Intl.NumberFormat(_,l),cr.set(o,a)),a}(l,o).format(_)}function Kr(_,l,o){return _?function(_,l){return{x:o=>_+_+l-o,setWidth(o){l=o},textAlign:o=>"center"===o?o:"right"===o?"left":"right",xPlus:(o,a)=>o-a,leftForLtr:(o,a)=>o-a}}(l,o):{x:_=>_,setWidth(_){},textAlign:_=>_,xPlus:(_,l)=>_+l,leftForLtr:(_,l)=>_}}function $o(_,l){let o,a;("ltr"===l||"rtl"===l)&&(o=_.canvas.style,a=[o.getPropertyValue("direction"),o.getPropertyPriority("direction")],o.setProperty("direction",l,"important"),_.prevTextDirection=a)}function xo(_,l){void 0!==l&&(delete _.prevTextDirection,_.canvas.style.setProperty("direction",l[0],l[1]))}function Ws(_){return"angle"===_?{between:Ce,compare:ni,normalize:vi}:{between:Pi,compare:(l,o)=>l-o,normalize:l=>l}}function ws({start:_,end:l,count:o,loop:a,style:u}){return{start:_%o,end:l%o,loop:a&&(l-_+1)%o==0,style:u}}function zs(_,l,o){if(!o)return[_];const{property:a,start:u,end:m}=o,C=l.length,{compare:R,between:x,normalize:U}=Ws(a),{start:tt,end:yt,loop:Vt,style:ne}=function(_,l,o){const{property:a,start:u,end:m}=o,{between:C,normalize:R}=Ws(a),x=l.length;let Vt,ne,{start:U,end:tt,loop:yt}=_;if(yt){for(U+=x,tt+=x,Vt=0,ne=x;Vt<ne&&C(R(l[U%x][a]),u,m);++Vt)U--,tt--;U%=x,tt%=x}return tt<U&&(tt+=x),{start:U,end:tt,loop:yt,style:_.style}}(_,l,o),Se=[];let qe,Mi,en,He=!1,ze=null;for(let Ln=tt,Xn=tt;Ln<=yt;++Ln)Mi=l[Ln%C],!Mi.skip&&(qe=U(Mi[a]),qe!==en&&(He=x(qe,u,m),null===ze&&(He||x(u,en,qe)&&0!==R(u,en))&&(ze=0===R(qe,u)?Ln:Xn),null!==ze&&(!He||0===R(m,qe)||x(m,en,qe))&&(Se.push(ws({start:ze,end:Ln,loop:Vt,count:C,style:ne})),ze=null),Xn=Ln,en=qe));return null!==ze&&Se.push(ws({start:ze,end:yt,loop:Vt,count:C,style:ne})),Se}function Rs(_,l){const o=[],a=_.segments;for(let u=0;u<a.length;u++){const m=zs(a[u],_.points,l);m.length&&o.push(...m)}return o}function Zo(_){return{backgroundColor:_.backgroundColor,borderCapStyle:_.borderCapStyle,borderDash:_.borderDash,borderDashOffset:_.borderDashOffset,borderJoinStyle:_.borderJoinStyle,borderWidth:_.borderWidth,borderColor:_.borderColor}}function Dn(_,l){return l&&JSON.stringify(_)!==JSON.stringify(l)}var bn=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(l,o,a,u){const C=o.duration;o.listeners[u].forEach(R=>R({chart:l,initial:o.initial,numSteps:C,currentStep:Math.min(a-o.start,C)}))}_refresh(){this._request||(this._running=!0,this._request=bt.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(l=Date.now()){let o=0;this._charts.forEach((a,u)=>{if(!a.running||!a.items.length)return;const m=a.items;let x,C=m.length-1,R=!1;for(;C>=0;--C)x=m[C],x._active?(x._total>a.duration&&(a.duration=x._total),x.tick(l),R=!0):(m[C]=m[m.length-1],m.pop());R&&(u.draw(),this._notify(u,a,l,"progress")),m.length||(a.running=!1,this._notify(u,a,l,"complete"),a.initial=!1),o+=m.length}),this._lastDate=l,0===o&&(this._running=!1)}_getAnims(l){const o=this._charts;let a=o.get(l);return a||(a={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},o.set(l,a)),a}listen(l,o,a){this._getAnims(l).listeners[o].push(a)}add(l,o){!o||!o.length||this._getAnims(l).items.push(...o)}has(l){return this._getAnims(l).items.length>0}start(l){const o=this._charts.get(l);!o||(o.running=!0,o.start=Date.now(),o.duration=o.items.reduce((a,u)=>Math.max(a,u._duration),0),this._refresh())}running(l){if(!this._running)return!1;const o=this._charts.get(l);return!(!o||!o.running||!o.items.length)}stop(l){const o=this._charts.get(l);if(!o||!o.items.length)return;const a=o.items;let u=a.length-1;for(;u>=0;--u)a[u].cancel();o.items=[],this._notify(l,o,Date.now(),"complete")}remove(l){return this._charts.delete(l)}};const ur="transparent",fr={boolean:(_,l,o)=>o>.5?l:_,color(_,l,o){const a=Tn(_||ur),u=a.valid&&Tn(l||ur);return u&&u.valid?u.mix(a,o).hexString():l},number:(_,l,o)=>_+(l-_)*o};class Qo{constructor(l,o,a,u){const m=o[a];u=ls([l.to,u,m,l.from]);const C=ls([l.from,m,u]);this._active=!0,this._fn=l.fn||fr[l.type||typeof C],this._easing=dt[l.easing]||dt.linear,this._start=Math.floor(Date.now()+(l.delay||0)),this._duration=this._total=Math.floor(l.duration),this._loop=!!l.loop,this._target=o,this._prop=a,this._from=C,this._to=u,this._promises=void 0}active(){return this._active}update(l,o,a){if(this._active){this._notify(!1);const u=this._target[this._prop],m=a-this._start,C=this._duration-m;this._start=a,this._duration=Math.floor(Math.max(C,l.duration)),this._total+=m,this._loop=!!l.loop,this._to=ls([l.to,o,u,l.from]),this._from=ls([l.from,u,o])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(l){const o=l-this._start,a=this._duration,u=this._prop,m=this._from,C=this._loop,R=this._to;let x;if(this._active=m!==R&&(C||o<a),!this._active)return this._target[u]=R,void this._notify(!0);o<0?this._target[u]=m:(x=o/a%2,x=C&&x>1?2-x:x,x=this._easing(Math.min(1,Math.max(0,x))),this._target[u]=this._fn(m,R,x))}wait(){const l=this._promises||(this._promises=[]);return new Promise((o,a)=>{l.push({res:o,rej:a})})}_notify(l){const o=l?"res":"rej",a=this._promises||[];for(let u=0;u<a.length;u++)a[u][o]()}}tr.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const qr=Object.keys(tr.animation);tr.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:_=>"onProgress"!==_&&"onComplete"!==_&&"fn"!==_}),tr.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),tr.describe("animations",{_fallback:"animation"}),tr.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:_=>0|_}}}});class Do{constructor(l,o){this._chart=l,this._properties=new Map,this.configure(o)}configure(l){if(!ht(l))return;const o=this._properties;Object.getOwnPropertyNames(l).forEach(a=>{const u=l[a];if(!ht(u))return;const m={};for(const C of qr)m[C]=u[C];(ft(u.properties)&&u.properties||[a]).forEach(C=>{(C===a||!o.has(C))&&o.set(C,m)})})}_animateOptions(l,o){const a=o.options,u=function(_,l){if(!l)return;let o=_.options;if(o)return o.$shared&&(_.options=o=Object.assign({},o,{$shared:!1,$animations:{}})),o;_.options=l}(l,a);if(!u)return[];const m=this._createAnimations(u,a);return a.$shared&&function(_,l){const o=[],a=Object.keys(l);for(let u=0;u<a.length;u++){const m=_[a[u]];m&&m.active()&&o.push(m.wait())}return Promise.all(o)}(l.options.$animations,a).then(()=>{l.options=a},()=>{}),m}_createAnimations(l,o){const a=this._properties,u=[],m=l.$animations||(l.$animations={}),C=Object.keys(o),R=Date.now();let x;for(x=C.length-1;x>=0;--x){const U=C[x];if("$"===U.charAt(0))continue;if("options"===U){u.push(...this._animateOptions(l,o));continue}const tt=o[U];let yt=m[U];const Vt=a.get(U);if(yt){if(Vt&&yt.active()){yt.update(Vt,tt,R);continue}yt.cancel()}Vt&&Vt.duration?(m[U]=yt=new Qo(Vt,l,U,tt),u.push(yt)):l[U]=tt}return u}update(l,o){if(0===this._properties.size)return void Object.assign(l,o);const a=this._createAnimations(l,o);return a.length?(bn.add(this._chart,a),!0):void 0}}function da(_,l){const o=_&&_.options||{},a=o.reverse,u=void 0===o.min?l:0,m=void 0===o.max?l:0;return{start:a?m:u,end:a?u:m}}function kl(_,l){const o=[],a=_._getSortedDatasetMetas(l);let u,m;for(u=0,m=a.length;u<m;++u)o.push(a[u].index);return o}function Qa(_,l,o,a={}){const u=_.keys,m="single"===a.mode;let C,R,x,U;if(null!==l){for(C=0,R=u.length;C<R;++C){if(x=+u[C],x===o){if(a.all)continue;break}U=_.values[x],Gt(U)&&(m||0===l||be(l)===be(U))&&(l+=U)}return l}}function Ho(_,l){const o=_&&_.options.stacked;return o||void 0===o&&void 0!==l.stack}function fa(_,l,o){const a=_[l]||(_[l]={});return a[o]||(a[o]={})}function Yl(_,l,o,a){for(const u of l.getMatchingVisibleMetas(a).reverse()){const m=_[u.index];if(o&&m>0||!o&&m<0)return u.index}return null}function qa(_,l){const{chart:o,_cachedMeta:a}=_,u=o._stacks||(o._stacks={}),{iScale:m,vScale:C,index:R}=a,x=m.axis,U=C.axis,tt=function(_,l,o){return`${_.id}.${l.id}.${o.stack||o.type}`}(m,C,a),yt=l.length;let Vt;for(let ne=0;ne<yt;++ne){const Se=l[ne],{[x]:He,[U]:ze}=Se;Vt=(Se._stacks||(Se._stacks={}))[U]=fa(u,tt,He),Vt[R]=ze,Vt._top=Yl(Vt,C,!0,a.type),Vt._bottom=Yl(Vt,C,!1,a.type)}}function yl(_,l){const o=_.scales;return Object.keys(o).filter(a=>o[a].axis===l).shift()}function Oa(_,l){const o=_.controller.index,a=_.vScale&&_.vScale.axis;if(a){l=l||_._parsed;for(const u of l){const m=u._stacks;if(!m||void 0===m[a]||void 0===m[a][o])return;delete m[a][o]}}}const ac=_=>"reset"===_||"none"===_,Nl=(_,l)=>l?_:Object.assign({},_);let ds=(()=>{class _{constructor(o,a){this.chart=o,this._ctx=o.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const o=this._cachedMeta;this.configure(),this.linkScales(),o._stacked=Ho(o.vScale,o),this.addElements()}updateIndex(o){this.index!==o&&Oa(this._cachedMeta),this.index=o}linkScales(){const o=this.chart,a=this._cachedMeta,u=this.getDataset(),m=(Vt,ne,Se,He)=>"x"===Vt?ne:"r"===Vt?He:Se,C=a.xAxisID=ot(u.xAxisID,yl(o,"x")),R=a.yAxisID=ot(u.yAxisID,yl(o,"y")),x=a.rAxisID=ot(u.rAxisID,yl(o,"r")),U=a.indexAxis,tt=a.iAxisID=m(U,C,R,x),yt=a.vAxisID=m(U,R,C,x);a.xScale=this.getScaleForId(C),a.yScale=this.getScaleForId(R),a.rScale=this.getScaleForId(x),a.iScale=this.getScaleForId(tt),a.vScale=this.getScaleForId(yt)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(o){return this.chart.scales[o]}_getOtherScale(o){const a=this._cachedMeta;return o===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const o=this._cachedMeta;this._data&&Ar(this._data,this),o._stacked&&Oa(o)}_dataCheck(){const o=this.getDataset(),a=o.data||(o.data=[]),u=this._data;if(ht(a))this._data=function(_){const l=Object.keys(_),o=new Array(l.length);let a,u,m;for(a=0,u=l.length;a<u;++a)m=l[a],o[a]={x:m,y:_[m]};return o}(a);else if(u!==a){if(u){Ar(u,this);const m=this._cachedMeta;Oa(m),m._parsed=[]}a&&Object.isExtensible(a)&&function(_,l){_._chartjs?_._chartjs.listeners.push(l):(Object.defineProperty(_,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[l]}}),Qr.forEach(o=>{const a="_onData"+Ae(o),u=_[o];Object.defineProperty(_,o,{configurable:!0,enumerable:!1,value(...m){const C=u.apply(this,m);return _._chartjs.listeners.forEach(R=>{"function"==typeof R[a]&&R[a](...m)}),C}})}))}(a,this),this._syncList=[],this._data=a}}addElements(){const o=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(o.dataset=new this.datasetElementType)}buildOrUpdateElements(o){const a=this._cachedMeta,u=this.getDataset();let m=!1;this._dataCheck();const C=a._stacked;a._stacked=Ho(a.vScale,a),a.stack!==u.stack&&(m=!0,Oa(a),a.stack=u.stack),this._resyncElements(o),(m||C!==a._stacked)&&qa(this,a._parsed)}configure(){const o=this.chart.config,a=o.datasetScopeKeys(this._type),u=o.getOptionScopes(this.getDataset(),a,!0);this.options=o.createResolver(u,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(o,a){const{_cachedMeta:u,_data:m}=this,{iScale:C,_stacked:R}=u,x=C.axis;let yt,Vt,ne,U=0===o&&a===m.length||u._sorted,tt=o>0&&u._parsed[o-1];if(!1===this._parsing)u._parsed=m,u._sorted=!0,ne=m;else{ne=ft(m[o])?this.parseArrayData(u,m,o,a):ht(m[o])?this.parseObjectData(u,m,o,a):this.parsePrimitiveData(u,m,o,a);const Se=()=>null===Vt[x]||tt&&Vt[x]<tt[x];for(yt=0;yt<a;++yt)u._parsed[yt+o]=Vt=ne[yt],U&&(Se()&&(U=!1),tt=Vt);u._sorted=U}R&&qa(this,ne)}parsePrimitiveData(o,a,u,m){const{iScale:C,vScale:R}=o,x=C.axis,U=R.axis,tt=C.getLabels(),yt=C===R,Vt=new Array(m);let ne,Se,He;for(ne=0,Se=m;ne<Se;++ne)He=ne+u,Vt[ne]={[x]:yt||C.parse(tt[He],He),[U]:R.parse(a[He],He)};return Vt}parseArrayData(o,a,u,m){const{xScale:C,yScale:R}=o,x=new Array(m);let U,tt,yt,Vt;for(U=0,tt=m;U<tt;++U)yt=U+u,Vt=a[yt],x[U]={x:C.parse(Vt[0],yt),y:R.parse(Vt[1],yt)};return x}parseObjectData(o,a,u,m){const{xScale:C,yScale:R}=o,{xAxisKey:x="x",yAxisKey:U="y"}=this._parsing,tt=new Array(m);let yt,Vt,ne,Se;for(yt=0,Vt=m;yt<Vt;++yt)ne=yt+u,Se=a[ne],tt[yt]={x:C.parse(Wt(Se,x),ne),y:R.parse(Wt(Se,U),ne)};return tt}getParsed(o){return this._cachedMeta._parsed[o]}getDataElement(o){return this._cachedMeta.data[o]}applyStack(o,a,u){const C=this._cachedMeta,R=a[o.axis];return Qa({keys:kl(this.chart,!0),values:a._stacks[o.axis]},R,C.index,{mode:u})}updateRangeFromParsed(o,a,u,m){const C=u[a.axis];let R=null===C?NaN:C;const x=m&&u._stacks[a.axis];m&&x&&(m.values=x,R=Qa(m,C,this._cachedMeta.index)),o.min=Math.min(o.min,R),o.max=Math.max(o.max,R)}getMinMax(o,a){const u=this._cachedMeta,m=u._parsed,C=u._sorted&&o===u.iScale,R=m.length,x=this._getOtherScale(o),U=((_,l,o)=>_&&!l.hidden&&l._stacked&&{keys:kl(this.chart,!0),values:null})(a,u),tt={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:yt,max:Vt}=function(_){const{min:l,max:o,minDefined:a,maxDefined:u}=_.getUserBounds();return{min:a?l:Number.NEGATIVE_INFINITY,max:u?o:Number.POSITIVE_INFINITY}}(x);let ne,Se;function He(){Se=m[ne];const ze=Se[x.axis];return!Gt(Se[o.axis])||yt>ze||Vt<ze}for(ne=0;ne<R&&(He()||(this.updateRangeFromParsed(tt,o,Se,U),!C));++ne);if(C)for(ne=R-1;ne>=0;--ne)if(!He()){this.updateRangeFromParsed(tt,o,Se,U);break}return tt}getAllParsedValues(o){const a=this._cachedMeta._parsed,u=[];let m,C,R;for(m=0,C=a.length;m<C;++m)R=a[m][o.axis],Gt(R)&&u.push(R);return u}getMaxOverflow(){return!1}getLabelAndValue(o){const a=this._cachedMeta,u=a.iScale,m=a.vScale,C=this.getParsed(o);return{label:u?""+u.getLabelForValue(C[u.axis]):"",value:m?""+m.getLabelForValue(C[m.axis]):""}}_update(o){const a=this._cachedMeta;this.update(o||"default"),a._clip=function(_){let l,o,a,u;return ht(_)?(l=_.top,o=_.right,a=_.bottom,u=_.left):l=o=a=u=_,{top:l,right:o,bottom:a,left:u,disabled:!1===_}}(ot(this.options.clip,function(_,l,o){if(!1===o)return!1;const a=da(_,o),u=da(l,o);return{top:u.end,right:a.end,bottom:u.start,left:a.start}}(a.xScale,a.yScale,this.getMaxOverflow())))}update(o){}draw(){const o=this._ctx,u=this._cachedMeta,m=u.data||[],C=this.chart.chartArea,R=[],x=this._drawStart||0,U=this._drawCount||m.length-x;let tt;for(u.dataset&&u.dataset.draw(o,C,x,U),tt=x;tt<x+U;++tt){const yt=m[tt];yt.hidden||(yt.active?R.push(yt):yt.draw(o,C))}for(tt=0;tt<R.length;++tt)R[tt].draw(o,C)}getStyle(o,a){const u=a?"active":"default";return void 0===o&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(u):this.resolveDataElementOptions(o||0,u)}getContext(o,a,u){const m=this.getDataset();let C;if(o>=0&&o<this._cachedMeta.data.length){const R=this._cachedMeta.data[o];C=R.$context||(R.$context=function(_,l,o){return Po(_,{active:!1,dataIndex:l,parsed:void 0,raw:void 0,element:o,index:l,mode:"default",type:"data"})}(this.getContext(),o,R)),C.parsed=this.getParsed(o),C.raw=m.data[o],C.index=C.dataIndex=o}else C=this.$context||(this.$context=function(_,l){return Po(_,{active:!1,dataset:void 0,datasetIndex:l,index:l,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),C.dataset=m,C.index=C.datasetIndex=this.index;return C.active=!!a,C.mode=u,C}resolveDatasetElementOptions(o){return this._resolveElementOptions(this.datasetElementType.id,o)}resolveDataElementOptions(o,a){return this._resolveElementOptions(this.dataElementType.id,a,o)}_resolveElementOptions(o,a="default",u){const m="active"===a,C=this._cachedDataOpts,R=o+"-"+a,x=C[R],U=this.enableOptionSharing&&Qt(u);if(x)return Nl(x,U);const tt=this.chart.config,yt=tt.datasetElementScopeKeys(this._type,o),Vt=m?[`${o}Hover`,"hover",o,""]:[o,""],ne=tt.getOptionScopes(this.getDataset(),yt),Se=Object.keys(tr.elements[o]),ze=tt.resolveNamedOptions(ne,Se,()=>this.getContext(u,m),Vt);return ze.$shared&&(ze.$shared=U,C[R]=Object.freeze(Nl(ze,U))),ze}_resolveAnimations(o,a,u){const m=this.chart,C=this._cachedDataOpts,R=`animation-${a}`,x=C[R];if(x)return x;let U;if(!1!==m.options.animation){const yt=this.chart.config,Vt=yt.datasetAnimationScopeKeys(this._type,a),ne=yt.getOptionScopes(this.getDataset(),Vt);U=yt.createResolver(ne,this.getContext(o,u,a))}const tt=new Do(m,U&&U.animations);return U&&U._cacheable&&(C[R]=Object.freeze(tt)),tt}getSharedOptions(o){if(o.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},o))}includeOptions(o,a){return!a||ac(o)||this.chart._animationsDisabled}updateElement(o,a,u,m){ac(m)?Object.assign(o,u):this._resolveAnimations(a,m).update(o,u)}updateSharedOptions(o,a,u){o&&!ac(a)&&this._resolveAnimations(void 0,a).update(o,u)}_setStyle(o,a,u,m){o.active=m;const C=this.getStyle(a,m);this._resolveAnimations(a,u,m).update(o,{options:!m&&this.getSharedOptions(C)||C})}removeHoverStyle(o,a,u){this._setStyle(o,u,"active",!1)}setHoverStyle(o,a,u){this._setStyle(o,u,"active",!0)}_removeDatasetHoverStyle(){const o=this._cachedMeta.dataset;o&&this._setStyle(o,void 0,"active",!1)}_setDatasetHoverStyle(){const o=this._cachedMeta.dataset;o&&this._setStyle(o,void 0,"active",!0)}_resyncElements(o){const a=this._data,u=this._cachedMeta.data;for(const[x,U,tt]of this._syncList)this[x](U,tt);this._syncList=[];const m=u.length,C=a.length,R=Math.min(C,m);R&&this.parse(0,R),C>m?this._insertElements(m,C-m,o):C<m&&this._removeElements(C,m-C)}_insertElements(o,a,u=!0){const m=this._cachedMeta,C=m.data,R=o+a;let x;const U=tt=>{for(tt.length+=a,x=tt.length-1;x>=R;x--)tt[x]=tt[x-a]};for(U(C),x=o;x<R;++x)C[x]=new this.dataElementType;this._parsing&&U(m._parsed),this.parse(o,a),u&&this.updateElements(C,o,a,"reset")}updateElements(o,a,u,m){}_removeElements(o,a){const u=this._cachedMeta;if(this._parsing){const m=u._parsed.splice(o,a);u._stacked&&Oa(u,m)}u.data.splice(o,a)}_sync(o){if(this._parsing)this._syncList.push(o);else{const[a,u,m]=o;this[a](u,m)}this.chart._dataChanges.push([this.index,...o])}_onDataPush(){const o=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-o,o])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(o,a){a&&this._sync(["_removeElements",o,a]);const u=arguments.length-2;u&&this._sync(["_insertElements",o,u])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return _.defaults={},_})();function Fa(_){const l=_.iScale,o=function(_,l){if(!_._cache.$bar){const o=_.getMatchingVisibleMetas(l);let a=[];for(let u=0,m=o.length;u<m;u++)a=a.concat(o[u].controller.getAllParsedValues(_));_._cache.$bar=ea(a.sort((u,m)=>u-m))}return _._cache.$bar}(l,_.type);let u,m,C,R,a=l._length;const x=()=>{32767===C||-32768===C||(Qt(R)&&(a=Math.min(a,Math.abs(C-R)||a)),R=C)};for(u=0,m=o.length;u<m;++u)C=l.getPixelForValue(o[u]),x();for(R=void 0,u=0,m=l.ticks.length;u<m;++u)C=l.getPixelForTick(u),x();return a}function cc(_,l,o,a){return ft(_)?function(_,l,o,a){const u=o.parse(_[0],a),m=o.parse(_[1],a),C=Math.min(u,m),R=Math.max(u,m);let x=C,U=R;Math.abs(C)>Math.abs(R)&&(x=R,U=C),l[o.axis]=U,l._custom={barStart:x,barEnd:U,start:u,end:m,min:C,max:R}}(_,l,o,a):l[o.axis]=o.parse(_,a),l}function uc(_,l,o,a){const u=_.iScale,m=_.vScale,C=u.getLabels(),R=u===m,x=[];let U,tt,yt,Vt;for(U=o,tt=o+a;U<tt;++U)Vt=l[U],yt={},yt[u.axis]=R||u.parse(C[U],U),x.push(cc(Vt,yt,m,U));return x}function Kl(_){return _&&void 0!==_.barStart&&void 0!==_.barEnd}function at(_,l,o,a){let u=l.borderSkipped;const m={};if(!u)return void(_.borderSkipped=m);const{start:C,end:R,reverse:x,top:U,bottom:tt}=function(_){let l,o,a,u,m;return _.horizontal?(l=_.base>_.x,o="left",a="right"):(l=_.base<_.y,o="bottom",a="top"),l?(u="end",m="start"):(u="start",m="end"),{start:o,end:a,reverse:l,top:u,bottom:m}}(_);"middle"===u&&o&&(_.enableBorderRadius=!0,(o._top||0)===a?u=U:(o._bottom||0)===a?u=tt:(m[et(tt,C,R,x)]=!0,u=U)),m[et(u,C,R,x)]=!0,_.borderSkipped=m}function et(_,l,o,a){return a?(_=function(_,l,o){return _===l?o:_===o?l:_}(_,l,o),_=jt(_,o,l)):_=jt(_,l,o),_}function jt(_,l,o){return"start"===_?l:"end"===_?o:_}function me(_,{inflateAmount:l},o){_.inflateAmount="auto"===l?1===o?.33:0:l}ds.prototype.datasetElementType=null,ds.prototype.dataElementType=null;let Ue=(()=>{class _ extends ds{parsePrimitiveData(o,a,u,m){return uc(o,a,u,m)}parseArrayData(o,a,u,m){return uc(o,a,u,m)}parseObjectData(o,a,u,m){const{iScale:C,vScale:R}=o,{xAxisKey:x="x",yAxisKey:U="y"}=this._parsing,tt="x"===C.axis?x:U,yt="x"===R.axis?x:U,Vt=[];let ne,Se,He,ze;for(ne=u,Se=u+m;ne<Se;++ne)ze=a[ne],He={},He[C.axis]=C.parse(Wt(ze,tt),ne),Vt.push(cc(Wt(ze,yt),He,R,ne));return Vt}updateRangeFromParsed(o,a,u,m){super.updateRangeFromParsed(o,a,u,m);const C=u._custom;C&&a===this._cachedMeta.vScale&&(o.min=Math.min(o.min,C.min),o.max=Math.max(o.max,C.max))}getMaxOverflow(){return 0}getLabelAndValue(o){const a=this._cachedMeta,{iScale:u,vScale:m}=a,C=this.getParsed(o),R=C._custom,x=Kl(R)?"["+R.start+", "+R.end+"]":""+m.getLabelForValue(C[m.axis]);return{label:""+u.getLabelForValue(C[u.axis]),value:x}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(o){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,o)}updateElements(o,a,u,m){const C="reset"===m,{index:R,_cachedMeta:{vScale:x}}=this,U=x.getBasePixel(),tt=x.isHorizontal(),yt=this._getRuler(),Vt=this.resolveDataElementOptions(a,m),ne=this.getSharedOptions(Vt),Se=this.includeOptions(m,ne);this.updateSharedOptions(ne,m,Vt);for(let He=a;He<a+u;He++){const ze=this.getParsed(He),qe=C||lt(ze[x.axis])?{base:U,head:U}:this._calculateBarValuePixels(He),Mi=this._calculateBarIndexPixels(He,yt),en=(ze._stacks||{})[x.axis],Zi={horizontal:tt,base:qe.base,enableBorderRadius:!en||Kl(ze._custom)||R===en._top||R===en._bottom,x:tt?qe.head:Mi.center,y:tt?Mi.center:qe.head,height:tt?Mi.size:Math.abs(qe.size),width:tt?Math.abs(qe.size):Mi.size};Se&&(Zi.options=ne||this.resolveDataElementOptions(He,o[He].active?"active":m));const $i=Zi.options||o[He].options;at(Zi,$i,en,R),me(Zi,$i,yt.ratio),this.updateElement(o[He],He,Zi,m)}}_getStacks(o,a){const m=this._cachedMeta.iScale,C=m.getMatchingVisibleMetas(this._type),R=m.options.stacked,x=C.length,U=[];let tt,yt;for(tt=0;tt<x;++tt)if(yt=C[tt],yt.controller.options.grouped){if(void 0!==a){const Vt=yt.controller.getParsed(a)[yt.controller._cachedMeta.vScale.axis];if(lt(Vt)||isNaN(Vt))continue}if((!1===R||-1===U.indexOf(yt.stack)||void 0===R&&void 0===yt.stack)&&U.push(yt.stack),yt.index===o)break}return U.length||U.push(void 0),U}_getStackCount(o){return this._getStacks(void 0,o).length}_getStackIndex(o,a,u){const m=this._getStacks(o,u),C=void 0!==a?m.indexOf(a):-1;return-1===C?m.length-1:C}_getRuler(){const o=this.options,a=this._cachedMeta,u=a.iScale,m=[];let C,R;for(C=0,R=a.data.length;C<R;++C)m.push(u.getPixelForValue(this.getParsed(C)[u.axis],C));const x=o.barThickness;return{min:x||Fa(a),pixels:m,start:u._startPixel,end:u._endPixel,stackCount:this._getStackCount(),scale:u,grouped:o.grouped,ratio:x?1:o.categoryPercentage*o.barPercentage}}_calculateBarValuePixels(o){const{_cachedMeta:{vScale:a,_stacked:u},options:{base:m,minBarLength:C}}=this,R=m||0,x=this.getParsed(o),U=x._custom,tt=Kl(U);let Se,He,yt=x[a.axis],Vt=0,ne=u?this.applyStack(a,x,u):yt;ne!==yt&&(Vt=ne-yt,ne=yt),tt&&(yt=U.barStart,ne=U.barEnd-U.barStart,0!==yt&&be(yt)!==be(U.barEnd)&&(Vt=0),Vt+=yt);const ze=lt(m)||tt?Vt:m;let qe=a.getPixelForValue(ze);if(Se=this.chart.getDataVisibility(o)?a.getPixelForValue(Vt+ne):qe,He=Se-qe,Math.abs(He)<C&&(He=function(_,l,o){return 0!==_?be(_):(l.isHorizontal()?1:-1)*(l.min>=o?1:-1)}(He,a,R)*C,yt===R&&(qe-=He/2),Se=qe+He),qe===a.getPixelForValue(R)){const Mi=be(He)*a.getLineWidthForValue(R)/2;qe+=Mi,He-=Mi}return{size:He,base:qe,head:Se,center:Se+He/2}}_calculateBarIndexPixels(o,a){const u=a.scale,m=this.options,C=m.skipNull,R=ot(m.maxBarThickness,1/0);let x,U;if(a.grouped){const tt=C?this._getStackCount(o):a.stackCount,yt="flex"===m.barThickness?function(_,l,o,a){const u=l.pixels,m=u[_];let C=_>0?u[_-1]:null,R=_<u.length-1?u[_+1]:null;const x=o.categoryPercentage;null===C&&(C=m-(null===R?l.end-l.start:R-m)),null===R&&(R=m+m-C);const U=m-(m-Math.min(C,R))/2*x;return{chunk:Math.abs(R-C)/2*x/a,ratio:o.barPercentage,start:U}}(o,a,m,tt):function(_,l,o,a){const u=o.barThickness;let m,C;return lt(u)?(m=l.min*o.categoryPercentage,C=o.barPercentage):(m=u*a,C=1),{chunk:m/a,ratio:C,start:l.pixels[_]-m/2}}(o,a,m,tt),Vt=this._getStackIndex(this.index,this._cachedMeta.stack,C?o:void 0);x=yt.start+yt.chunk*Vt+yt.chunk/2,U=Math.min(R,yt.chunk*yt.ratio)}else x=u.getPixelForValue(this.getParsed(o)[u.axis],o),U=Math.min(R,a.min*a.ratio);return{base:x-U/2,head:x+U/2,center:x,size:U}}draw(){const o=this._cachedMeta,a=o.vScale,u=o.data,m=u.length;let C=0;for(;C<m;++C)null!==this.getParsed(C)[a.axis]&&u[C].draw(this._ctx)}}return _.id="bar",_.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},_.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},_})(),ei=(()=>{class _ extends ds{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(o,a,u,m){const C=super.parsePrimitiveData(o,a,u,m);for(let R=0;R<C.length;R++)C[R]._custom=this.resolveDataElementOptions(R+u).radius;return C}parseArrayData(o,a,u,m){const C=super.parseArrayData(o,a,u,m);for(let R=0;R<C.length;R++)C[R]._custom=ot(a[u+R][2],this.resolveDataElementOptions(R+u).radius);return C}parseObjectData(o,a,u,m){const C=super.parseObjectData(o,a,u,m);for(let R=0;R<C.length;R++){const x=a[u+R];C[R]._custom=ot(x&&x.r&&+x.r,this.resolveDataElementOptions(R+u).radius)}return C}getMaxOverflow(){const o=this._cachedMeta.data;let a=0;for(let u=o.length-1;u>=0;--u)a=Math.max(a,o[u].size(this.resolveDataElementOptions(u))/2);return a>0&&a}getLabelAndValue(o){const a=this._cachedMeta,{xScale:u,yScale:m}=a,C=this.getParsed(o),R=u.getLabelForValue(C.x),x=m.getLabelForValue(C.y),U=C._custom;return{label:a.label,value:"("+R+", "+x+(U?", "+U:"")+")"}}update(o){const a=this._cachedMeta.data;this.updateElements(a,0,a.length,o)}updateElements(o,a,u,m){const C="reset"===m,{iScale:R,vScale:x}=this._cachedMeta,U=this.resolveDataElementOptions(a,m),tt=this.getSharedOptions(U),yt=this.includeOptions(m,tt),Vt=R.axis,ne=x.axis;for(let Se=a;Se<a+u;Se++){const He=o[Se],ze=!C&&this.getParsed(Se),qe={},Mi=qe[Vt]=C?R.getPixelForDecimal(.5):R.getPixelForValue(ze[Vt]),en=qe[ne]=C?x.getBasePixel():x.getPixelForValue(ze[ne]);qe.skip=isNaN(Mi)||isNaN(en),yt&&(qe.options=this.resolveDataElementOptions(Se,He.active?"active":m),C&&(qe.options.radius=0)),this.updateElement(He,Se,qe,m)}this.updateSharedOptions(tt,m,U)}resolveDataElementOptions(o,a){const u=this.getParsed(o);let m=super.resolveDataElementOptions(o,a);m.$shared&&(m=Object.assign({},m,{$shared:!1}));const C=m.radius;return"active"!==a&&(m.radius=0),m.radius+=ot(u&&u._custom,C),m}}return _.id="bubble",_.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},_.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},_})(),pn=(()=>{class _ extends ds{constructor(o,a){super(o,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(o,a){const u=this.getDataset().data,m=this._cachedMeta;if(!1===this._parsing)m._parsed=u;else{let R,x,C=U=>+u[U];if(ht(u[o])){const{key:U="value"}=this._parsing;C=tt=>+Wt(u[tt],U)}for(R=o,x=o+a;R<x;++R)m._parsed[R]=C(R)}}_getRotation(){return mi(this.options.rotation-90)}_getCircumference(){return mi(this.options.circumference)}_getRotationExtents(){let o=ye,a=-ye;for(let u=0;u<this.chart.data.datasets.length;++u)if(this.chart.isDatasetVisible(u)){const m=this.chart.getDatasetMeta(u).controller,C=m._getRotation(),R=m._getCircumference();o=Math.min(o,C),a=Math.max(a,C+R)}return{rotation:o,circumference:a-o}}update(o){const a=this.chart,{chartArea:u}=a,m=this._cachedMeta,C=m.data,R=this.getMaxBorderWidth()+this.getMaxOffset(C)+this.options.spacing,x=Math.max((Math.min(u.width,u.height)-R)/2,0),U=Math.min(((_,l)=>"string"==typeof _&&_.endsWith("%")?parseFloat(_)/100:_/l)(this.options.cutout,x),1),tt=this._getRingWeight(this.index),{circumference:yt,rotation:Vt}=this._getRotationExtents(),{ratioX:ne,ratioY:Se,offsetX:He,offsetY:ze}=function(_,l,o){let a=1,u=1,m=0,C=0;if(l<ye){const R=_,x=R+l,U=Math.cos(R),tt=Math.sin(R),yt=Math.cos(x),Vt=Math.sin(x),ne=(en,Zi,$i)=>Ce(en,R,x,!0)?1:Math.max(Zi,Zi*o,$i,$i*o),Se=(en,Zi,$i)=>Ce(en,R,x,!0)?-1:Math.min(Zi,Zi*o,$i,$i*o),He=ne(0,U,yt),ze=ne(te,tt,Vt),qe=Se(Yt,U,yt),Mi=Se(Yt+te,tt,Vt);a=(He-qe)/2,u=(ze-Mi)/2,m=-(He+qe)/2,C=-(ze+Mi)/2}return{ratioX:a,ratioY:u,offsetX:m,offsetY:C}}(Vt,yt,U),en=Math.max(Math.min((u.width-R)/ne,(u.height-R)/Se)/2,0),Zi=Z(this.options.radius,en),mn=(Zi-Math.max(Zi*U,0))/this._getVisibleDatasetWeightTotal();this.offsetX=He*Zi,this.offsetY=ze*Zi,m.total=this.calculateTotal(),this.outerRadius=Zi-mn*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-mn*tt,0),this.updateElements(C,0,C.length,o)}_circumference(o,a){const u=this.options,m=this._cachedMeta,C=this._getCircumference();return a&&u.animation.animateRotate||!this.chart.getDataVisibility(o)||null===m._parsed[o]||m.data[o].hidden?0:this.calculateCircumference(m._parsed[o]*C/ye)}updateElements(o,a,u,m){const C="reset"===m,R=this.chart,x=R.chartArea,yt=(x.left+x.right)/2,Vt=(x.top+x.bottom)/2,ne=C&&R.options.animation.animateScale,Se=ne?0:this.innerRadius,He=ne?0:this.outerRadius,ze=this.resolveDataElementOptions(a,m),qe=this.getSharedOptions(ze),Mi=this.includeOptions(m,qe);let Zi,en=this._getRotation();for(Zi=0;Zi<a;++Zi)en+=this._circumference(Zi,C);for(Zi=a;Zi<a+u;++Zi){const $i=this._circumference(Zi,C),mn=o[Zi],En={x:yt+this.offsetX,y:Vt+this.offsetY,startAngle:en,endAngle:en+$i,circumference:$i,outerRadius:He,innerRadius:Se};Mi&&(En.options=qe||this.resolveDataElementOptions(Zi,mn.active?"active":m)),en+=$i,this.updateElement(mn,Zi,En,m)}this.updateSharedOptions(qe,m,ze)}calculateTotal(){const o=this._cachedMeta,a=o.data;let m,u=0;for(m=0;m<a.length;m++){const C=o._parsed[m];null!==C&&!isNaN(C)&&this.chart.getDataVisibility(m)&&!a[m].hidden&&(u+=Math.abs(C))}return u}calculateCircumference(o){const a=this._cachedMeta.total;return a>0&&!isNaN(o)?ye*(Math.abs(o)/a):0}getLabelAndValue(o){const u=this.chart,m=u.data.labels||[],C=Fn(this._cachedMeta._parsed[o],u.options.locale);return{label:m[o]||"",value:C}}getMaxBorderWidth(o){let a=0;const u=this.chart;let m,C,R,x,U;if(!o)for(m=0,C=u.data.datasets.length;m<C;++m)if(u.isDatasetVisible(m)){R=u.getDatasetMeta(m),o=R.data,x=R.controller;break}if(!o)return 0;for(m=0,C=o.length;m<C;++m)U=x.resolveDataElementOptions(m),"inner"!==U.borderAlign&&(a=Math.max(a,U.borderWidth||0,U.hoverBorderWidth||0));return a}getMaxOffset(o){let a=0;for(let u=0,m=o.length;u<m;++u){const C=this.resolveDataElementOptions(u);a=Math.max(a,C.offset||0,C.hoverOffset||0)}return a}_getRingWeightOffset(o){let a=0;for(let u=0;u<o;++u)this.chart.isDatasetVisible(u)&&(a+=this._getRingWeight(u));return a}_getRingWeight(o){return Math.max(ot(this.chart.data.datasets[o].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return _.id="doughnut",_.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},_.descriptors={_scriptable:l=>"spacing"!==l,_indexable:l=>"spacing"!==l},_.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const o=l.data;if(o.labels.length&&o.datasets.length){const{labels:{pointStyle:a}}=l.legend.options;return o.labels.map((u,m)=>{const R=l.getDatasetMeta(0).controller.getStyle(m);return{text:u,fillStyle:R.backgroundColor,strokeStyle:R.borderColor,lineWidth:R.borderWidth,pointStyle:a,hidden:!l.getDataVisibility(m),index:m}})}return[]}},onClick(l,o,a){a.chart.toggleDataVisibility(o.index),a.chart.update()}},tooltip:{callbacks:{title:()=>"",label(l){let o=l.label;const a=": "+l.formattedValue;return ft(o)?(o=o.slice(),o[0]+=a):o+=a,o}}}}},_})(),lr=(()=>{class _ extends ds{initialize(){this.enableOptionSharing=!0,super.initialize()}update(o){const a=this._cachedMeta,{dataset:u,data:m=[],_dataset:C}=a,R=this.chart._animationsDisabled;let{start:x,count:U}=function(_,l,o){const a=l.length;let u=0,m=a;if(_._sorted){const{iScale:C,_parsed:R}=_,x=C.axis,{min:U,max:tt,minDefined:yt,maxDefined:Vt}=C.getUserBounds();yt&&(u=Qe(Math.min(Xr(R,C.axis,U).lo,o?a:Xr(l,x,C.getPixelForValue(U)).lo),0,a-1)),m=Vt?Qe(Math.max(Xr(R,C.axis,tt).hi+1,o?0:Xr(l,x,C.getPixelForValue(tt)).hi+1),u,a)-u:a-u}return{start:u,count:m}}(a,m,R);this._drawStart=x,this._drawCount=U,function(_){const{xScale:l,yScale:o,_scaleRanges:a}=_,u={xmin:l.min,xmax:l.max,ymin:o.min,ymax:o.max};if(!a)return _._scaleRanges=u,!0;const m=a.xmin!==l.min||a.xmax!==l.max||a.ymin!==o.min||a.ymax!==o.max;return Object.assign(a,u),m}(a)&&(x=0,U=m.length),u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!C._decimated,u.points=m;const tt=this.resolveDatasetElementOptions(o);this.options.showLine||(tt.borderWidth=0),tt.segment=this.options.segment,this.updateElement(u,void 0,{animated:!R,options:tt},o),this.updateElements(m,x,U,o)}updateElements(o,a,u,m){const C="reset"===m,{iScale:R,vScale:x,_stacked:U,_dataset:tt}=this._cachedMeta,yt=this.resolveDataElementOptions(a,m),Vt=this.getSharedOptions(yt),ne=this.includeOptions(m,Vt),Se=R.axis,He=x.axis,{spanGaps:ze,segment:qe}=this.options,Mi=Ge(ze)?ze:Number.POSITIVE_INFINITY,en=this.chart._animationsDisabled||C||"none"===m;let Zi=a>0&&this.getParsed(a-1);for(let $i=a;$i<a+u;++$i){const mn=o[$i],En=this.getParsed($i),Ln=en?mn:{},Xn=lt(En[He]),Vr=Ln[Se]=R.getPixelForValue(En[Se],$i),Un=Ln[He]=C||Xn?x.getBasePixel():x.getPixelForValue(U?this.applyStack(x,En,U):En[He],$i);Ln.skip=isNaN(Vr)||isNaN(Un)||Xn,Ln.stop=$i>0&&En[Se]-Zi[Se]>Mi,qe&&(Ln.parsed=En,Ln.raw=tt.data[$i]),ne&&(Ln.options=Vt||this.resolveDataElementOptions($i,mn.active?"active":m)),en||this.updateElement(mn,$i,Ln,m),Zi=En}this.updateSharedOptions(Vt,m,yt)}getMaxOverflow(){const o=this._cachedMeta,a=o.dataset,u=a.options&&a.options.borderWidth||0,m=o.data||[];if(!m.length)return u;const C=m[0].size(this.resolveDataElementOptions(0)),R=m[m.length-1].size(this.resolveDataElementOptions(m.length-1));return Math.max(u,C,R)/2}draw(){const o=this._cachedMeta;o.dataset.updateControlPoints(this.chart.chartArea,o.iScale.axis),super.draw()}}return _.id="line",_.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},_.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},_})();var As=Object.freeze({__proto__:null,BarController:Ue,BubbleController:ei,DoughnutController:pn,LineController:lr,PolarAreaController:(()=>{class _ extends ds{constructor(o,a){super(o,a),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(o){const u=this.chart,m=u.data.labels||[],C=Fn(this._cachedMeta._parsed[o].r,u.options.locale);return{label:m[o]||"",value:C}}update(o){const a=this._cachedMeta.data;this._updateRadius(),this.updateElements(a,0,a.length,o)}_updateRadius(){const o=this.chart,a=o.chartArea,u=o.options,m=Math.min(a.right-a.left,a.bottom-a.top),C=Math.max(m/2,0),x=(C-Math.max(u.cutoutPercentage?C/100*u.cutoutPercentage:1,0))/o.getVisibleDatasetCount();this.outerRadius=C-x*this.index,this.innerRadius=this.outerRadius-x}updateElements(o,a,u,m){const C="reset"===m,R=this.chart,x=this.getDataset(),tt=R.options.animation,yt=this._cachedMeta.rScale,Vt=yt.xCenter,ne=yt.yCenter,Se=yt.getIndexAngle(0)-.5*Yt;let ze,He=Se;const qe=360/this.countVisibleElements();for(ze=0;ze<a;++ze)He+=this._computeAngle(ze,m,qe);for(ze=a;ze<a+u;ze++){const Mi=o[ze];let en=He,Zi=He+this._computeAngle(ze,m,qe),$i=R.getDataVisibility(ze)?yt.getDistanceFromCenterForValue(x.data[ze]):0;He=Zi,C&&(tt.animateScale&&($i=0),tt.animateRotate&&(en=Zi=Se));const mn={x:Vt,y:ne,innerRadius:0,outerRadius:$i,startAngle:en,endAngle:Zi,options:this.resolveDataElementOptions(ze,Mi.active?"active":m)};this.updateElement(Mi,ze,mn,m)}}countVisibleElements(){const o=this.getDataset();let u=0;return this._cachedMeta.data.forEach((m,C)=>{!isNaN(o.data[C])&&this.chart.getDataVisibility(C)&&u++}),u}_computeAngle(o,a,u){return this.chart.getDataVisibility(o)?mi(this.resolveDataElementOptions(o,a).angle||u):0}}return _.id="polarArea",_.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},_.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const o=l.data;if(o.labels.length&&o.datasets.length){const{labels:{pointStyle:a}}=l.legend.options;return o.labels.map((u,m)=>{const R=l.getDatasetMeta(0).controller.getStyle(m);return{text:u,fillStyle:R.backgroundColor,strokeStyle:R.borderColor,lineWidth:R.borderWidth,pointStyle:a,hidden:!l.getDataVisibility(m),index:m}})}return[]}},onClick(l,o,a){a.chart.toggleDataVisibility(o.index),a.chart.update()}},tooltip:{callbacks:{title:()=>"",label:l=>l.chart.data.labels[l.dataIndex]+": "+l.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},_})(),PieController:(()=>{class _ extends pn{}return _.id="pie",_.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},_})(),RadarController:(()=>{class _ extends ds{getLabelAndValue(o){const a=this._cachedMeta.vScale,u=this.getParsed(o);return{label:a.getLabels()[o],value:""+a.getLabelForValue(u[a.axis])}}update(o){const a=this._cachedMeta,u=a.dataset,m=a.data||[],C=a.iScale.getLabels();if(u.points=m,"resize"!==o){const R=this.resolveDatasetElementOptions(o);this.options.showLine||(R.borderWidth=0),this.updateElement(u,void 0,{_loop:!0,_fullLoop:C.length===m.length,options:R},o)}this.updateElements(m,0,m.length,o)}updateElements(o,a,u,m){const C=this.getDataset(),R=this._cachedMeta.rScale,x="reset"===m;for(let U=a;U<a+u;U++){const tt=o[U],yt=this.resolveDataElementOptions(U,tt.active?"active":m),Vt=R.getPointPositionForValue(U,C.data[U]),ne=x?R.xCenter:Vt.x,Se=x?R.yCenter:Vt.y,He={x:ne,y:Se,angle:Vt.angle,skip:isNaN(ne)||isNaN(Se),options:yt};this.updateElement(tt,U,He,m)}}}return _.id="radar",_.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},_.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},_})(),ScatterController:(()=>{class _ extends lr{}return _.id="scatter",_.defaults={showLine:!1,fill:!1},_.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:l=>"("+l.label+", "+l.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},_})()});function ys(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Tl={_date:(()=>{class _{constructor(o){this.options=o||{}}formats(){return ys()}parse(o,a){return ys()}format(o,a){return ys()}add(o,a,u){return ys()}diff(o,a,u){return ys()}startOf(o,a,u){return ys()}endOf(o,a){return ys()}}return _.override=function(l){Object.assign(_.prototype,l)},_})()};function ga(_,l){return"native"in _?{x:_.x,y:_.y}:Et(_,l)}function ma(_,l,o,a){const{controller:u,data:m,_sorted:C}=_,R=u._cachedMeta.iScale;if(R&&l===R.axis&&C&&m.length){const x=R._reversePixels?Oo:Xr;if(!a)return x(m,l,o);if(u._sharedOptions){const U=m[0],tt="function"==typeof U.getRange&&U.getRange(l);if(tt){const yt=x(m,l,o-tt),Vt=x(m,l,o+tt);return{lo:yt.lo,hi:Vt.hi}}}}return{lo:0,hi:m.length-1}}function Jl(_,l,o,a,u){const m=_.getSortedVisibleDatasetMetas(),C=o[l];for(let R=0,x=m.length;R<x;++R){const{index:U,data:tt}=m[R],{lo:yt,hi:Vt}=ma(m[R],l,C,u);for(let ne=yt;ne<=Vt;++ne){const Se=tt[ne];Se.skip||a(Se,U,ne)}}}function bo(_,l,o,a){const u=[];return Cr(l,_.chartArea,_._minPadding)&&Jl(_,o,l,function(C,R,x){C.inRange(l.x,l.y,a)&&u.push({element:C,datasetIndex:R,index:x})},!0),u}function ao(_,l,o,a,u){const m=function(_){const l=-1!==_.indexOf("x"),o=-1!==_.indexOf("y");return function(a,u){const m=l?Math.abs(a.x-u.x):0,C=o?Math.abs(a.y-u.y):0;return Math.sqrt(Math.pow(m,2)+Math.pow(C,2))}}(o);let C=Number.POSITIVE_INFINITY,R=[];return Cr(l,_.chartArea,_._minPadding)&&Jl(_,o,l,function(U,tt,yt){if(a&&!U.inRange(l.x,l.y,u))return;const Vt=U.getCenterPoint(u);if(!Cr(Vt,_.chartArea,_._minPadding)&&!U.inRange(l.x,l.y,u))return;const ne=m(l,Vt);ne<C?(R=[{element:U,datasetIndex:tt,index:yt}],C=ne):ne===C&&R.push({element:U,datasetIndex:tt,index:yt})}),R}function zr(_,l,o,a){const u=ga(l,_),m=[],C=o.axis,R="x"===C?"inXRange":"inYRange";let x=!1;return function(_,l){const o=_.getSortedVisibleDatasetMetas();let a,u,m;for(let C=0,R=o.length;C<R;++C){({index:a,data:u}=o[C]);for(let x=0,U=u.length;x<U;++x)m=u[x],m.skip||l(m,a,x)}}(_,(U,tt,yt)=>{U[R](u[C],a)&&m.push({element:U,datasetIndex:tt,index:yt}),U.inRange(u.x,u.y,a)&&(x=!0)}),o.intersect&&!x?[]:m}var Ac={modes:{index(_,l,o,a){const u=ga(l,_),m=o.axis||"x",C=o.intersect?bo(_,u,m,a):ao(_,u,m,!1,a),R=[];return C.length?(_.getSortedVisibleDatasetMetas().forEach(x=>{const U=C[0].index,tt=x.data[U];tt&&!tt.skip&&R.push({element:tt,datasetIndex:x.index,index:U})}),R):[]},dataset(_,l,o,a){const u=ga(l,_),m=o.axis||"xy";let C=o.intersect?bo(_,u,m,a):ao(_,u,m,!1,a);if(C.length>0){const R=C[0].datasetIndex,x=_.getDatasetMeta(R).data;C=[];for(let U=0;U<x.length;++U)C.push({element:x[U],datasetIndex:R,index:U})}return C},point:(_,l,o,a)=>bo(_,ga(l,_),o.axis||"xy",a),nearest:(_,l,o,a)=>ao(_,ga(l,_),o.axis||"xy",o.intersect,a),x:(_,l,o,a)=>zr(_,l,{axis:"x",intersect:o.intersect},a),y:(_,l,o,a)=>zr(_,l,{axis:"y",intersect:o.intersect},a)}};const Jc=["left","top","right","bottom"];function yo(_,l){return _.filter(o=>o.pos===l)}function Ju(_,l){return _.filter(o=>-1===Jc.indexOf(o.pos)&&o.box.axis===l)}function Oc(_,l){return _.sort((o,a)=>{const u=l?a:o,m=l?o:a;return u.weight===m.weight?u.index-m.index:u.weight-m.weight})}function Ou(_,l,o,a){return Math.max(_[o],l[o])+Math.max(_[a],l[a])}function $l(_,l){_.top=Math.max(_.top,l.top),_.left=Math.max(_.left,l.left),_.bottom=Math.max(_.bottom,l.bottom),_.right=Math.max(_.right,l.right)}function xu(_,l,o,a){const{pos:u,box:m}=o,C=_.maxPadding;if(!ht(u)){o.size&&(_[u]-=o.size);const yt=a[o.stack]||{size:0,count:1};yt.size=Math.max(yt.size,o.horizontal?m.height:m.width),o.size=yt.size/yt.count,_[u]+=o.size}m.getPadding&&$l(C,m.getPadding());const R=Math.max(0,l.outerWidth-Ou(C,_,"left","right")),x=Math.max(0,l.outerHeight-Ou(C,_,"top","bottom")),U=R!==_.w,tt=x!==_.h;return _.w=R,_.h=x,o.horizontal?{same:U,other:tt}:{same:tt,other:U}}function kc(_,l){const o=l.maxPadding;return function(u){const m={left:0,top:0,right:0,bottom:0};return u.forEach(C=>{m[C]=Math.max(l[C],o[C])}),m}(_?["left","right"]:["top","bottom"])}function Sa(_,l,o,a){const u=[];let m,C,R,x,U,tt;for(m=0,C=_.length,U=0;m<C;++m){R=_[m],x=R.box,x.update(R.width||l.w,R.height||l.h,kc(R.horizontal,l));const{same:yt,other:Vt}=xu(l,o,R,a);U|=yt&&u.length,tt=tt||Vt,x.fullSize||u.push(R)}return U&&Sa(u,l,o,a)||tt}function $c(_,l,o,a,u){_.top=o,_.left=l,_.right=l+a,_.bottom=o+u,_.width=a,_.height=u}function Zl(_,l,o,a){const u=o.padding;let{x:m,y:C}=l;for(const R of _){const x=R.box,U=a[R.stack]||{count:1,placed:0,weight:1},tt=R.stackWeight/U.weight||1;if(R.horizontal){const yt=l.w*tt,Vt=U.size||x.height;Qt(U.start)&&(C=U.start),x.fullSize?$c(x,u.left,C,o.outerWidth-u.right-u.left,Vt):$c(x,l.left+U.placed,C,yt,Vt),U.start=C,U.placed+=yt,C=x.bottom}else{const yt=l.h*tt,Vt=U.size||x.width;Qt(U.start)&&(m=U.start),x.fullSize?$c(x,m,u.top,Vt,o.outerHeight-u.bottom-u.top):$c(x,m,l.top+U.placed,Vt,yt),U.start=m,U.placed+=yt,m=x.right}}l.x=m,l.y=C}tr.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var fo={addBox(_,l){_.boxes||(_.boxes=[]),l.fullSize=l.fullSize||!1,l.position=l.position||"top",l.weight=l.weight||0,l._layers=l._layers||function(){return[{z:0,draw(o){l.draw(o)}}]},_.boxes.push(l)},removeBox(_,l){const o=_.boxes?_.boxes.indexOf(l):-1;-1!==o&&_.boxes.splice(o,1)},configure(_,l,o){l.fullSize=o.fullSize,l.position=o.position,l.weight=o.weight},update(_,l,o,a){if(!_)return;const u=Mo(_.options.layout.padding),m=Math.max(l-u.width,0),C=Math.max(o-u.height,0),R=function(_){const l=function(_){const l=[];let o,a,u,m,C,R;for(o=0,a=(_||[]).length;o<a;++o)u=_[o],({position:m,options:{stack:C,stackWeight:R=1}}=u),l.push({index:o,box:u,pos:m,horizontal:u.isHorizontal(),weight:u.weight,stack:C&&m+C,stackWeight:R});return l}(_),o=Oc(l.filter(U=>U.box.fullSize),!0),a=Oc(yo(l,"left"),!0),u=Oc(yo(l,"right")),m=Oc(yo(l,"top"),!0),C=Oc(yo(l,"bottom")),R=Ju(l,"x"),x=Ju(l,"y");return{fullSize:o,leftAndTop:a.concat(m),rightAndBottom:u.concat(x).concat(C).concat(R),chartArea:yo(l,"chartArea"),vertical:a.concat(u).concat(x),horizontal:m.concat(C).concat(R)}}(_.boxes),x=R.vertical,U=R.horizontal;vt(_.boxes,He=>{"function"==typeof He.beforeLayout&&He.beforeLayout()});const tt=x.reduce((He,ze)=>ze.box.options&&!1===ze.box.options.display?He:He+1,0)||1,yt=Object.freeze({outerWidth:l,outerHeight:o,padding:u,availableWidth:m,availableHeight:C,vBoxMaxWidth:m/2/tt,hBoxMaxHeight:C/2}),Vt=Object.assign({},u);$l(Vt,Mo(a));const ne=Object.assign({maxPadding:Vt,w:m,h:C,x:u.left,y:u.top},u),Se=function(_,l){const o=function(_){const l={};for(const o of _){const{stack:a,pos:u,stackWeight:m}=o;if(!a||!Jc.includes(u))continue;const C=l[a]||(l[a]={count:0,placed:0,weight:0,size:0});C.count++,C.weight+=m}return l}(_),{vBoxMaxWidth:a,hBoxMaxHeight:u}=l;let m,C,R;for(m=0,C=_.length;m<C;++m){R=_[m];const{fullSize:x}=R.box,U=o[R.stack],tt=U&&R.stackWeight/U.weight;R.horizontal?(R.width=tt?tt*a:x&&l.availableWidth,R.height=u):(R.width=a,R.height=tt?tt*u:x&&l.availableHeight)}return o}(x.concat(U),yt);Sa(R.fullSize,ne,yt,Se),Sa(x,ne,yt,Se),Sa(U,ne,yt,Se)&&Sa(x,ne,yt,Se),function(_){const l=_.maxPadding;function o(a){const u=Math.max(l[a]-_[a],0);return _[a]+=u,u}_.y+=o("top"),_.x+=o("left"),o("right"),o("bottom")}(ne),Zl(R.leftAndTop,ne,yt,Se),ne.x+=ne.w,ne.y+=ne.h,Zl(R.rightAndBottom,ne,yt,Se),_.chartArea={left:ne.left,top:ne.top,right:ne.left+ne.w,bottom:ne.top+ne.h,height:ne.h,width:ne.w},vt(R.chartArea,He=>{const ze=He.box;Object.assign(ze,_.chartArea),ze.update(ne.w,ne.h,{left:0,top:0,right:0,bottom:0})})}};class wa{acquireContext(l,o){}releaseContext(l){return!1}addEventListener(l,o,a){}removeEventListener(l,o,a){}getDevicePixelRatio(){return 1}getMaximumSize(l,o,a,u){return o=Math.max(0,o||l.width),a=a||l.height,{width:o,height:Math.max(0,u?Math.floor(o/u):a)}}isAttached(l){return!0}updateConfig(l){}}class xa extends wa{acquireContext(l){return l&&l.getContext&&l.getContext("2d")||null}updateConfig(l){l.options.animation=!1}}const _a="$chartjs",Zc={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Qc=_=>null===_||""===_,Lr=!!yi&&{passive:!0};function dc(_,l,o){_.canvas.removeEventListener(l,o,Lr)}function Yo(_,l){for(const o of _)if(o===l||o.contains(l))return!0}function qc(_,l,o){const a=_.canvas,u=new MutationObserver(m=>{let C=!1;for(const R of m)C=C||Yo(R.addedNodes,a),C=C&&!Yo(R.removedNodes,a);C&&o()});return u.observe(document,{childList:!0,subtree:!0}),u}function pc(_,l,o){const a=_.canvas,u=new MutationObserver(m=>{let C=!1;for(const R of m)C=C||Yo(R.removedNodes,a),C=C&&!Yo(R.addedNodes,a);C&&o()});return u.observe(document,{childList:!0,subtree:!0}),u}const gu=new Map;let ul=0;function Cl(){const _=window.devicePixelRatio;_!==ul&&(ul=_,gu.forEach((l,o)=>{o.currentDevicePixelRatio!==_&&l()}))}function hl(_,l,o){const a=_.canvas,u=a&&Cs(a);if(!u)return;const m=Ft((R,x)=>{const U=u.clientWidth;o(R,x),U<u.clientWidth&&o()},window),C=new ResizeObserver(R=>{const x=R[0],U=x.contentRect.width,tt=x.contentRect.height;0===U&&0===tt||m(U,tt)});return C.observe(u),function(_,l){gu.size||window.addEventListener("resize",Cl),gu.set(_,l)}(_,m),C}function Er(_,l,o){o&&o.disconnect(),"resize"===l&&function(_){gu.delete(_),gu.size||window.removeEventListener("resize",Cl)}(_)}function eu(_,l,o){const a=_.canvas,u=Ft(m=>{null!==_.ctx&&o(function(_,l){const o=Zc[_.type]||_.type,{x:a,y:u}=Et(_,l);return{type:o,chart:l,native:_,x:void 0!==a?a:null,y:void 0!==u?u:null}}(m,_))},_,m=>{const C=m[0];return[C,C.offsetX,C.offsetY]});return function(_,l,o){_.addEventListener(l,o,Lr)}(a,l,u),u}class Ql extends wa{acquireContext(l,o){const a=l&&l.getContext&&l.getContext("2d");return a&&a.canvas===l?(function(_,l){const o=_.style,a=_.getAttribute("height"),u=_.getAttribute("width");if(_[_a]={initial:{height:a,width:u,style:{display:o.display,height:o.height,width:o.width}}},o.display=o.display||"block",o.boxSizing=o.boxSizing||"border-box",Qc(u)){const m=Hi(_,"width");void 0!==m&&(_.width=m)}if(Qc(a))if(""===_.style.height)_.height=_.width/(l||2);else{const m=Hi(_,"height");void 0!==m&&(_.height=m)}}(l,o),a):null}releaseContext(l){const o=l.canvas;if(!o[_a])return!1;const a=o[_a].initial;["height","width"].forEach(m=>{const C=a[m];lt(C)?o.removeAttribute(m):o.setAttribute(m,C)});const u=a.style||{};return Object.keys(u).forEach(m=>{o.style[m]=u[m]}),o.width=o.width,delete o[_a],!0}addEventListener(l,o,a){this.removeEventListener(l,o),(l.$proxies||(l.$proxies={}))[o]=({attach:qc,detach:pc,resize:hl}[o]||eu)(l,o,a)}removeEventListener(l,o){const a=l.$proxies||(l.$proxies={}),u=a[o];u&&(({attach:Er,detach:Er,resize:Er}[o]||dc)(l,o,u),a[o]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(l,o,a,u){return function(_,l,o,a){const u=bl(_),m=ae(u,"margin"),C=Ss(u.maxWidth,_,"clientWidth")||Te,R=Ss(u.maxHeight,_,"clientHeight")||Te,x=function(_,l,o){let a,u;if(void 0===l||void 0===o){const m=Cs(_);if(m){const C=m.getBoundingClientRect(),R=bl(m),x=ae(R,"border","width"),U=ae(R,"padding");l=C.width-U.width-x.width,o=C.height-U.height-x.height,a=Ss(R.maxWidth,m,"clientWidth"),u=Ss(R.maxHeight,m,"clientHeight")}else l=_.clientWidth,o=_.clientHeight}return{width:l,height:o,maxWidth:a||Te,maxHeight:u||Te}}(_,l,o);let{width:U,height:tt}=x;if("content-box"===u.boxSizing){const yt=ae(u,"border","width"),Vt=ae(u,"padding");U-=Vt.width+yt.width,tt-=Vt.height+yt.height}return U=Math.max(0,U-m.width),tt=Math.max(0,a?Math.floor(U/a):tt-m.height),U=Ee(Math.min(U,C,x.maxWidth)),tt=Ee(Math.min(tt,R,x.maxHeight)),U&&!tt&&(tt=Ee(U/2)),{width:U,height:tt}}(l,o,a,u)}isAttached(l){const o=Cs(l);return!(!o||!o.isConnected)}}class Ra{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(l){const{x:o,y:a}=this.getProps(["x","y"],l);return{x:o,y:a}}hasValue(){return Ge(this.x)&&Ge(this.y)}getProps(l,o){const a=this.$animations;if(!o||!a)return this;const u={};return l.forEach(m=>{u[m]=a[m]&&a[m].active()?a[m]._to:this[m]}),u}}Ra.defaults={},Ra.defaultRoutes=void 0;const ql={values:_=>ft(_)?_:""+_,numeric(_,l,o){if(0===_)return"0";const a=this.chart.options.locale;let u,m=_;if(o.length>1){const U=Math.max(Math.abs(o[0].value),Math.abs(o[o.length-1].value));(U<1e-4||U>1e15)&&(u="scientific"),m=function(_,l){let o=l.length>3?l[2].value-l[1].value:l[1].value-l[0].value;return Math.abs(o)>=1&&_!==Math.floor(_)&&(o=_-Math.floor(_)),o}(_,o)}const C=_e(Math.abs(m)),R=Math.max(Math.min(-1*Math.floor(C),20),0),x={notation:u,minimumFractionDigits:R,maximumFractionDigits:R};return Object.assign(x,this.options.ticks.format),Fn(_,a,x)},logarithmic(_,l,o){if(0===_)return"0";const a=_/Math.pow(10,Math.floor(_e(_)));return 1===a||2===a||5===a?ql.numeric.call(this,_,l,o):""}};var Eo={formatters:ql};function aa(_,l,o,a,u){const m=ot(a,0),C=Math.min(ot(u,_.length),_.length);let x,U,tt,R=0;for(o=Math.ceil(o),u&&(x=u-a,o=x/Math.floor(x/o)),tt=m;tt<0;)R++,tt=Math.round(m+R*o);for(U=Math.max(m,0);U<C;U++)U===tt&&(l.push(_[U]),R++,tt=Math.round(m+R*o))}tr.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(_,l)=>l.lineWidth,tickColor:(_,l)=>l.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Eo.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),tr.route("scale.ticks","color","","color"),tr.route("scale.grid","color","","borderColor"),tr.route("scale.grid","borderColor","","borderColor"),tr.route("scale.title","color","","color"),tr.describe("scale",{_fallback:!1,_scriptable:_=>!_.startsWith("before")&&!_.startsWith("after")&&"callback"!==_&&"parser"!==_,_indexable:_=>"borderDash"!==_&&"tickBorderDash"!==_}),tr.describe("scales",{_fallback:"scale"}),tr.describe("scale.ticks",{_scriptable:_=>"backdropPadding"!==_&&"callback"!==_,_indexable:_=>"backdropPadding"!==_});const Uo=(_,l,o)=>"top"===l||"left"===l?_[l]+o:_[l]-o;function wl(_,l){const o=[],a=_.length/l,u=_.length;let m=0;for(;m<u;m+=a)o.push(_[Math.floor(m)]);return o}function Fl(_,l,o){const a=_.ticks.length,u=Math.min(l,a-1),m=_._startPixel,C=_._endPixel,R=1e-6;let U,x=_.getPixelForTick(u);if(!(o&&(U=1===a?Math.max(x-m,C-x):0===l?(_.getPixelForTick(1)-x)/2:(x-_.getPixelForTick(u-1))/2,x+=u<l?U:-U,x<m-R||x>C+R)))return x}function dl(_){return _.drawTicks?_.tickLength:0}function Qu(_,l){if(!_.display)return 0;const o=_r(_.font,l),a=Mo(_.padding);return(ft(_.text)?_.text.length:1)*o.lineHeight+a.height}function Bl(_,l,o){let a=wt(_);return(o&&"right"!==l||!o&&"right"===l)&&(a=(_=>"left"===_?"right":"right"===_?"left":_)(a)),a}class tl extends Ra{constructor(l){super(),this.id=l.id,this.type=l.type,this.options=void 0,this.ctx=l.ctx,this.chart=l.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(l){this.options=l.setContext(this.getContext()),this.axis=l.axis,this._userMin=this.parse(l.min),this._userMax=this.parse(l.max),this._suggestedMin=this.parse(l.suggestedMin),this._suggestedMax=this.parse(l.suggestedMax)}parse(l,o){return l}getUserBounds(){let{_userMin:l,_userMax:o,_suggestedMin:a,_suggestedMax:u}=this;return l=ut(l,Number.POSITIVE_INFINITY),o=ut(o,Number.NEGATIVE_INFINITY),a=ut(a,Number.POSITIVE_INFINITY),u=ut(u,Number.NEGATIVE_INFINITY),{min:ut(l,a),max:ut(o,u),minDefined:Gt(l),maxDefined:Gt(o)}}getMinMax(l){let C,{min:o,max:a,minDefined:u,maxDefined:m}=this.getUserBounds();if(u&&m)return{min:o,max:a};const R=this.getMatchingVisibleMetas();for(let x=0,U=R.length;x<U;++x)C=R[x].controller.getMinMax(this,l),u||(o=Math.min(o,C.min)),m||(a=Math.max(a,C.max));return o=m&&o>a?a:o,a=u&&o>a?o:a,{min:ut(o,ut(a,o)),max:ut(a,ut(o,a))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const l=this.chart.data;return this.options.labels||(this.isHorizontal()?l.xLabels:l.yLabels)||l.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Zt(this.options.beforeUpdate,[this])}update(l,o,a){const{beginAtZero:u,grace:m,ticks:C}=this.options,R=C.sampleSize;this.beforeUpdate(),this.maxWidth=l,this.maxHeight=o,this._margins=a=Object.assign({left:0,right:0,top:0,bottom:0},a),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+a.left+a.right:this.height+a.top+a.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(_,l,o){const{min:a,max:u}=_,m=Z(l,(u-a)/2),C=(R,x)=>o&&0===R?0:R+x;return{min:C(a,-Math.abs(m)),max:C(u,m)}}(this,m,u),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const x=R<this.ticks.length;this._convertTicksToLabels(x?wl(this.ticks,R):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),C.display&&(C.autoSkip||"auto"===C.source)&&(this.ticks=function(_,l){const o=_.options.ticks,a=o.maxTicksLimit||function(_){const l=_.options.offset,o=_._tickSize();return Math.floor(Math.min(_._length/o+(l?0:1),_._maxLength/o))}(_),u=o.major.enabled?function(_){const l=[];let o,a;for(o=0,a=_.length;o<a;o++)_[o].major&&l.push(o);return l}(l):[],m=u.length,C=u[0],R=u[m-1],x=[];if(m>a)return function(_,l,o,a){let C,u=0,m=o[0];for(a=Math.ceil(a),C=0;C<_.length;C++)C===m&&(l.push(_[C]),u++,m=o[u*a])}(l,x,u,m/a),x;const U=function(_,l,o){const a=function(_){const l=_.length;let o,a;if(l<2)return!1;for(a=_[0],o=1;o<l;++o)if(_[o]-_[o-1]!==a)return!1;return a}(_),u=l.length/o;if(!a)return Math.max(u,1);const m=function(_){const l=[],o=Math.sqrt(_);let a;for(a=1;a<o;a++)_%a==0&&(l.push(a),l.push(_/a));return o===(0|o)&&l.push(o),l.sort((u,m)=>u-m).pop(),l}(a);for(let C=0,R=m.length-1;C<R;C++){const x=m[C];if(x>u)return x}return Math.max(u,1)}(u,l,a);if(m>0){let tt,yt;const Vt=m>1?Math.round((R-C)/(m-1)):null;for(aa(l,x,U,lt(Vt)?0:C-Vt,C),tt=0,yt=m-1;tt<yt;tt++)aa(l,x,U,u[tt],u[tt+1]);return aa(l,x,U,R,lt(Vt)?l.length:R+Vt),x}return aa(l,x,U),x}(this,this.ticks),this._labelSizes=null),x&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let o,a,l=this.options.reverse;this.isHorizontal()?(o=this.left,a=this.right):(o=this.top,a=this.bottom,l=!l),this._startPixel=o,this._endPixel=a,this._reversePixels=l,this._length=a-o,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Zt(this.options.afterUpdate,[this])}beforeSetDimensions(){Zt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Zt(this.options.afterSetDimensions,[this])}_callHooks(l){this.chart.notifyPlugins(l,this.getContext()),Zt(this.options[l],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Zt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(l){const o=this.options.ticks;let a,u,m;for(a=0,u=l.length;a<u;a++)m=l[a],m.label=Zt(o.callback,[m.value,a,l],this)}afterTickToLabelConversion(){Zt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Zt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const l=this.options,o=l.ticks,a=this.ticks.length,u=o.minRotation||0,m=o.maxRotation;let R,x,U,C=u;if(!this._isVisible()||!o.display||u>=m||a<=1||!this.isHorizontal())return void(this.labelRotation=u);const tt=this._getLabelSizes(),yt=tt.widest.width,Vt=tt.highest.height,ne=Qe(this.chart.width-yt,0,this.maxWidth);R=l.offset?this.maxWidth/a:ne/(a-1),yt+6>R&&(R=ne/(a-(l.offset?.5:1)),x=this.maxHeight-dl(l.grid)-o.padding-Qu(l.title,this.chart.options.font),U=Math.sqrt(yt*yt+Vt*Vt),C=on(Math.min(Math.asin(Qe((tt.highest.height+6)/R,-1,1)),Math.asin(Qe(x/U,-1,1))-Math.asin(Qe(Vt/U,-1,1)))),C=Math.max(u,Math.min(m,C))),this.labelRotation=C}afterCalculateLabelRotation(){Zt(this.options.afterCalculateLabelRotation,[this])}beforeFit(){Zt(this.options.beforeFit,[this])}fit(){const l={width:0,height:0},{chart:o,options:{ticks:a,title:u,grid:m}}=this,C=this._isVisible(),R=this.isHorizontal();if(C){const x=Qu(u,o.options.font);if(R?(l.width=this.maxWidth,l.height=dl(m)+x):(l.height=this.maxHeight,l.width=dl(m)+x),a.display&&this.ticks.length){const{first:U,last:tt,widest:yt,highest:Vt}=this._getLabelSizes(),ne=2*a.padding,Se=mi(this.labelRotation),He=Math.cos(Se),ze=Math.sin(Se);R?l.height=Math.min(this.maxHeight,l.height+(a.mirror?0:ze*yt.width+He*Vt.height)+ne):l.width=Math.min(this.maxWidth,l.width+(a.mirror?0:He*yt.width+ze*Vt.height)+ne),this._calculatePadding(U,tt,ze,He)}}this._handleMargins(),R?(this.width=this._length=o.width-this._margins.left-this._margins.right,this.height=l.height):(this.width=l.width,this.height=this._length=o.height-this._margins.top-this._margins.bottom)}_calculatePadding(l,o,a,u){const{ticks:{align:m,padding:C},position:R}=this.options,x=0!==this.labelRotation,U="top"!==R&&"x"===this.axis;if(this.isHorizontal()){const tt=this.getPixelForTick(0)-this.left,yt=this.right-this.getPixelForTick(this.ticks.length-1);let Vt=0,ne=0;x?U?(Vt=u*l.width,ne=a*o.height):(Vt=a*l.height,ne=u*o.width):"start"===m?ne=o.width:"end"===m?Vt=l.width:(Vt=l.width/2,ne=o.width/2),this.paddingLeft=Math.max((Vt-tt+C)*this.width/(this.width-tt),0),this.paddingRight=Math.max((ne-yt+C)*this.width/(this.width-yt),0)}else{let tt=o.height/2,yt=l.height/2;"start"===m?(tt=0,yt=l.height):"end"===m&&(tt=o.height,yt=0),this.paddingTop=tt+C,this.paddingBottom=yt+C}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Zt(this.options.afterFit,[this])}isHorizontal(){const{axis:l,position:o}=this.options;return"top"===o||"bottom"===o||"x"===l}isFullSize(){return this.options.fullSize}_convertTicksToLabels(l){let o,a;for(this.beforeTickToLabelConversion(),this.generateTickLabels(l),o=0,a=l.length;o<a;o++)lt(l[o].label)&&(l.splice(o,1),a--,o--);this.afterTickToLabelConversion()}_getLabelSizes(){let l=this._labelSizes;if(!l){const o=this.options.ticks.sampleSize;let a=this.ticks;o<a.length&&(a=wl(a,o)),this._labelSizes=l=this._computeLabelSizes(a,a.length)}return l}_computeLabelSizes(l,o){const{ctx:a,_longestTextCache:u}=this,m=[],C=[];let U,tt,yt,Vt,ne,Se,He,ze,qe,Mi,en,R=0,x=0;for(U=0;U<o;++U){if(Vt=l[U].label,ne=this._resolveTickFontOptions(U),a.font=Se=ne.string,He=u[Se]=u[Se]||{data:{},gc:[]},ze=ne.lineHeight,qe=Mi=0,lt(Vt)||ft(Vt)){if(ft(Vt))for(tt=0,yt=Vt.length;tt<yt;++tt)en=Vt[tt],!lt(en)&&!ft(en)&&(qe=Go(a,He.data,He.gc,qe,en),Mi+=ze)}else qe=Go(a,He.data,He.gc,qe,Vt),Mi=ze;m.push(qe),C.push(Mi),R=Math.max(qe,R),x=Math.max(Mi,x)}!function(_,l){vt(_,o=>{const a=o.gc,u=a.length/2;let m;if(u>l){for(m=0;m<u;++m)delete o.data[a[m]];a.splice(0,u)}})}(u,o);const Zi=m.indexOf(R),$i=C.indexOf(x),mn=En=>({width:m[En]||0,height:C[En]||0});return{first:mn(0),last:mn(o-1),widest:mn(Zi),highest:mn($i),widths:m,heights:C}}getLabelForValue(l){return l}getPixelForValue(l,o){return NaN}getValueForPixel(l){}getPixelForTick(l){const o=this.ticks;return l<0||l>o.length-1?null:this.getPixelForValue(o[l].value)}getPixelForDecimal(l){this._reversePixels&&(l=1-l);const o=this._startPixel+l*this._length;return Qe(this._alignToPixels?po(this.chart,o,0):o,-32768,32767)}getDecimalForPixel(l){const o=(l-this._startPixel)/this._length;return this._reversePixels?1-o:o}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:l,max:o}=this;return l<0&&o<0?o:l>0&&o>0?l:0}getContext(l){const o=this.ticks||[];if(l>=0&&l<o.length){const a=o[l];return a.$context||(a.$context=function(_,l,o){return Po(_,{tick:o,index:l,type:"tick"})}(this.getContext(),l,a))}return this.$context||(this.$context=function(_,l){return Po(_,{scale:l,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const l=this.options.ticks,o=mi(this.labelRotation),a=Math.abs(Math.cos(o)),u=Math.abs(Math.sin(o)),m=this._getLabelSizes(),C=l.autoSkipPadding||0,R=m?m.widest.width+C:0,x=m?m.highest.height+C:0;return this.isHorizontal()?x*a>R*u?R/a:x/u:x*u<R*a?x/a:R/u}_isVisible(){const l=this.options.display;return"auto"!==l?!!l:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(l){const o=this.axis,a=this.chart,u=this.options,{grid:m,position:C}=u,R=m.offset,x=this.isHorizontal(),tt=this.ticks.length+(R?1:0),yt=dl(m),Vt=[],ne=m.setContext(this.getContext()),Se=ne.drawBorder?ne.borderWidth:0,He=Se/2,ze=function(wn){return po(a,wn,Se)};let qe,Mi,en,Zi,$i,mn,En,Ln,Xn,Vr,Un,Nr;if("top"===C)qe=ze(this.bottom),mn=this.bottom-yt,Ln=qe-He,Vr=ze(l.top)+He,Nr=l.bottom;else if("bottom"===C)qe=ze(this.top),Vr=l.top,Nr=ze(l.bottom)-He,mn=qe+He,Ln=this.top+yt;else if("left"===C)qe=ze(this.right),$i=this.right-yt,En=qe-He,Xn=ze(l.left)+He,Un=l.right;else if("right"===C)qe=ze(this.left),Xn=l.left,Un=ze(l.right)-He,$i=qe+He,En=this.left+yt;else if("x"===o){if("center"===C)qe=ze((l.top+l.bottom)/2+.5);else if(ht(C)){const wn=Object.keys(C)[0];qe=ze(this.chart.scales[wn].getPixelForValue(C[wn]))}Vr=l.top,Nr=l.bottom,mn=qe+He,Ln=mn+yt}else if("y"===o){if("center"===C)qe=ze((l.left+l.right)/2);else if(ht(C)){const wn=Object.keys(C)[0];qe=ze(this.chart.scales[wn].getPixelForValue(C[wn]))}$i=qe-He,En=$i-yt,Xn=l.left,Un=l.right}const rs=ot(u.ticks.maxTicksLimit,tt),Cn=Math.max(1,Math.ceil(tt/rs));for(Mi=0;Mi<tt;Mi+=Cn){const wn=m.setContext(this.getContext(Mi)),mr=wn.lineWidth,os=wn.color,mo=m.borderDash||[],Xo=wn.borderDashOffset,td=wn.tickWidth,rn=wn.tickColor,Kn=wn.tickBorderDash||[],gs=wn.tickBorderDashOffset;en=Fl(this,Mi,R),void 0!==en&&(Zi=po(a,en,mr),x?$i=En=Xn=Un=Zi:mn=Ln=Vr=Nr=Zi,Vt.push({tx1:$i,ty1:mn,tx2:En,ty2:Ln,x1:Xn,y1:Vr,x2:Un,y2:Nr,width:mr,color:os,borderDash:mo,borderDashOffset:Xo,tickWidth:td,tickColor:rn,tickBorderDash:Kn,tickBorderDashOffset:gs}))}return this._ticksLength=tt,this._borderValue=qe,Vt}_computeLabelItems(l){const o=this.axis,a=this.options,{position:u,ticks:m}=a,C=this.isHorizontal(),R=this.ticks,{align:x,crossAlign:U,padding:tt,mirror:yt}=m,Vt=dl(a.grid),ne=Vt+tt,Se=yt?-tt:ne,He=-mi(this.labelRotation),ze=[];let qe,Mi,en,Zi,$i,mn,En,Ln,Xn,Vr,Un,Nr,rs="middle";if("top"===u)mn=this.bottom-Se,En=this._getXAxisLabelAlignment();else if("bottom"===u)mn=this.top+Se,En=this._getXAxisLabelAlignment();else if("left"===u){const wn=this._getYAxisLabelAlignment(Vt);En=wn.textAlign,$i=wn.x}else if("right"===u){const wn=this._getYAxisLabelAlignment(Vt);En=wn.textAlign,$i=wn.x}else if("x"===o){if("center"===u)mn=(l.top+l.bottom)/2+ne;else if(ht(u)){const wn=Object.keys(u)[0];mn=this.chart.scales[wn].getPixelForValue(u[wn])+ne}En=this._getXAxisLabelAlignment()}else if("y"===o){if("center"===u)$i=(l.left+l.right)/2-ne;else if(ht(u)){const wn=Object.keys(u)[0];$i=this.chart.scales[wn].getPixelForValue(u[wn])}En=this._getYAxisLabelAlignment(Vt).textAlign}"y"===o&&("start"===x?rs="top":"end"===x&&(rs="bottom"));const Cn=this._getLabelSizes();for(qe=0,Mi=R.length;qe<Mi;++qe){en=R[qe],Zi=en.label;const wn=m.setContext(this.getContext(qe));Ln=this.getPixelForTick(qe)+m.labelOffset,Xn=this._resolveTickFontOptions(qe),Vr=Xn.lineHeight,Un=ft(Zi)?Zi.length:1;const mr=Un/2,os=wn.color,mo=wn.textStrokeColor,Xo=wn.textStrokeWidth;let td;if(C?($i=Ln,Nr="top"===u?"near"===U||0!==He?-Un*Vr+Vr/2:"center"===U?-Cn.highest.height/2-mr*Vr+Vr:Vr/2-Cn.highest.height:"near"===U||0!==He?Vr/2:"center"===U?Cn.highest.height/2-mr*Vr:Cn.highest.height-Un*Vr,yt&&(Nr*=-1)):(mn=Ln,Nr=(1-Un)*Vr/2),wn.showLabelBackdrop){const rn=Mo(wn.backdropPadding),Kn=Cn.heights[qe],gs=Cn.widths[qe];let ba=mn+Nr-rn.top,Th=$i-rn.left;switch(rs){case"middle":ba-=Kn/2;break;case"bottom":ba-=Kn}switch(En){case"center":Th-=gs/2;break;case"right":Th-=gs}td={left:Th,top:ba,width:gs+rn.width,height:Kn+rn.height,color:wn.backdropColor}}ze.push({rotation:He,label:Zi,font:Xn,color:os,strokeColor:mo,strokeWidth:Xo,textOffset:Nr,textAlign:En,textBaseline:rs,translation:[$i,mn],backdrop:td})}return ze}_getXAxisLabelAlignment(){const{position:l,ticks:o}=this.options;if(-mi(this.labelRotation))return"top"===l?"left":"right";let u="center";return"start"===o.align?u="left":"end"===o.align&&(u="right"),u}_getYAxisLabelAlignment(l){const{position:o,ticks:{crossAlign:a,mirror:u,padding:m}}=this.options,R=l+m,x=this._getLabelSizes().widest.width;let U,tt;return"left"===o?u?(tt=this.right+m,"near"===a?U="left":"center"===a?(U="center",tt+=x/2):(U="right",tt+=x)):(tt=this.right-R,"near"===a?U="right":"center"===a?(U="center",tt-=x/2):(U="left",tt=this.left)):"right"===o?u?(tt=this.left+m,"near"===a?U="right":"center"===a?(U="center",tt-=x/2):(U="left",tt-=x)):(tt=this.left+R,"near"===a?U="left":"center"===a?(U="center",tt+=x/2):(U="right",tt=this.right)):U="right",{textAlign:U,x:tt}}_computeLabelArea(){if(this.options.ticks.mirror)return;const l=this.chart,o=this.options.position;return"left"===o||"right"===o?{top:0,left:this.left,bottom:l.height,right:this.right}:"top"===o||"bottom"===o?{top:this.top,left:0,bottom:this.bottom,right:l.width}:void 0}drawBackground(){const{ctx:l,options:{backgroundColor:o},left:a,top:u,width:m,height:C}=this;o&&(l.save(),l.fillStyle=o,l.fillRect(a,u,m,C),l.restore())}getLineWidthForValue(l){const o=this.options.grid;if(!this._isVisible()||!o.display)return 0;const u=this.ticks.findIndex(m=>m.value===l);return u>=0?o.setContext(this.getContext(u)).lineWidth:0}drawGrid(l){const o=this.options.grid,a=this.ctx,u=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(l));let m,C;const R=(x,U,tt)=>{!tt.width||!tt.color||(a.save(),a.lineWidth=tt.width,a.strokeStyle=tt.color,a.setLineDash(tt.borderDash||[]),a.lineDashOffset=tt.borderDashOffset,a.beginPath(),a.moveTo(x.x,x.y),a.lineTo(U.x,U.y),a.stroke(),a.restore())};if(o.display)for(m=0,C=u.length;m<C;++m){const x=u[m];o.drawOnChartArea&&R({x:x.x1,y:x.y1},{x:x.x2,y:x.y2},x),o.drawTicks&&R({x:x.tx1,y:x.ty1},{x:x.tx2,y:x.ty2},{color:x.tickColor,width:x.tickWidth,borderDash:x.tickBorderDash,borderDashOffset:x.tickBorderDashOffset})}}drawBorder(){const{chart:l,ctx:o,options:{grid:a}}=this,u=a.setContext(this.getContext()),m=a.drawBorder?u.borderWidth:0;if(!m)return;const C=a.setContext(this.getContext(0)).lineWidth,R=this._borderValue;let x,U,tt,yt;this.isHorizontal()?(x=po(l,this.left,m)-m/2,U=po(l,this.right,C)+C/2,tt=yt=R):(tt=po(l,this.top,m)-m/2,yt=po(l,this.bottom,C)+C/2,x=U=R),o.save(),o.lineWidth=u.borderWidth,o.strokeStyle=u.borderColor,o.beginPath(),o.moveTo(x,tt),o.lineTo(U,yt),o.stroke(),o.restore()}drawLabels(l){if(!this.options.ticks.display)return;const a=this.ctx,u=this._computeLabelArea();u&&Qs(a,u);const m=this._labelItems||(this._labelItems=this._computeLabelItems(l));let C,R;for(C=0,R=m.length;C<R;++C){const x=m[C],U=x.font,tt=x.label;x.backdrop&&(a.fillStyle=x.backdrop.color,a.fillRect(x.backdrop.left,x.backdrop.top,x.backdrop.width,x.backdrop.height)),Ts(a,tt,0,x.textOffset,U,x)}u&&Ea(a)}drawTitle(){const{ctx:l,options:{position:o,title:a,reverse:u}}=this;if(!a.display)return;const m=_r(a.font),C=Mo(a.padding),R=a.align;let x=m.lineHeight/2;"bottom"===o||"center"===o||ht(o)?(x+=C.bottom,ft(a.text)&&(x+=m.lineHeight*(a.text.length-1))):x+=C.top;const{titleX:U,titleY:tt,maxWidth:yt,rotation:Vt}=function(_,l,o,a){const{top:u,left:m,bottom:C,right:R,chart:x}=_,{chartArea:U,scales:tt}=x;let Vt,ne,Se,yt=0;const He=C-u,ze=R-m;if(_.isHorizontal()){if(ne=Bt(a,m,R),ht(o)){const qe=Object.keys(o)[0];Se=tt[qe].getPixelForValue(o[qe])+He-l}else Se="center"===o?(U.bottom+U.top)/2+He-l:Uo(_,o,l);Vt=R-m}else{if(ht(o)){const qe=Object.keys(o)[0];ne=tt[qe].getPixelForValue(o[qe])-ze+l}else ne="center"===o?(U.left+U.right)/2-ze+l:Uo(_,o,l);Se=Bt(a,C,u),yt="left"===o?-te:te}return{titleX:ne,titleY:Se,maxWidth:Vt,rotation:yt}}(this,x,o,R);Ts(l,a.text,0,0,m,{color:a.color,maxWidth:yt,rotation:Vt,textAlign:Bl(R,o,u),textBaseline:"middle",translation:[U,tt]})}draw(l){!this._isVisible()||(this.drawBackground(),this.drawGrid(l),this.drawBorder(),this.drawTitle(),this.drawLabels(l))}_layers(){const l=this.options,o=l.ticks&&l.ticks.z||0,a=ot(l.grid&&l.grid.z,-1);return this._isVisible()&&this.draw===tl.prototype.draw?[{z:a,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:a+1,draw:()=>{this.drawBorder()}},{z:o,draw:u=>{this.drawLabels(u)}}]:[{z:o,draw:u=>{this.draw(u)}}]}getMatchingVisibleMetas(l){const o=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",u=[];let m,C;for(m=0,C=o.length;m<C;++m){const R=o[m];R[a]===this.id&&(!l||R.type===l)&&u.push(R)}return u}_resolveTickFontOptions(l){return _r(this.options.ticks.setContext(this.getContext(l)).font)}_maxDigits(){const l=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/l}}class Va{constructor(l,o,a){this.type=l,this.scope=o,this.override=a,this.items=Object.create(null)}isForType(l){return Object.prototype.isPrototypeOf.call(this.type.prototype,l.prototype)}register(l){const o=Object.getPrototypeOf(l);let a;var _;"id"in(_=o)&&"defaults"in _&&(a=this.register(o));const u=this.items,m=l.id,C=this.scope+"."+m;if(!m)throw new Error("class does not have id: "+l);return m in u||(u[m]=l,function(_,l,o){const a=Ie(Object.create(null),[o?tr.get(o):{},tr.get(l),_.defaults]);tr.set(l,a),_.defaultRoutes&&function(_,l){Object.keys(l).forEach(o=>{const a=o.split("."),u=a.pop(),m=[_].concat(a).join("."),C=l[o].split("."),R=C.pop(),x=C.join(".");tr.route(m,u,x,R)})}(l,_.defaultRoutes),_.descriptors&&tr.describe(l,_.descriptors)}(l,C,a),this.override&&tr.override(l.id,l.overrides)),C}get(l){return this.items[l]}unregister(l){const o=this.items,a=l.id,u=this.scope;a in o&&delete o[a],u&&a in tr[u]&&(delete tr[u][a],this.override&&delete no[a])}}var Ga=new class{constructor(){this.controllers=new Va(ds,"datasets",!0),this.elements=new Va(Ra,"elements"),this.plugins=new Va(Object,"plugins"),this.scales=new Va(tl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...l){this._each("register",l)}remove(...l){this._each("unregister",l)}addControllers(...l){this._each("register",l,this.controllers)}addElements(...l){this._each("register",l,this.elements)}addPlugins(...l){this._each("register",l,this.plugins)}addScales(...l){this._each("register",l,this.scales)}getController(l){return this._get(l,this.controllers,"controller")}getElement(l){return this._get(l,this.elements,"element")}getPlugin(l){return this._get(l,this.plugins,"plugin")}getScale(l){return this._get(l,this.scales,"scale")}removeControllers(...l){this._each("unregister",l,this.controllers)}removeElements(...l){this._each("unregister",l,this.elements)}removePlugins(...l){this._each("unregister",l,this.plugins)}removeScales(...l){this._each("unregister",l,this.scales)}_each(l,o,a){[...o].forEach(u=>{const m=a||this._getRegistryForType(u);a||m.isForType(u)||m===this.plugins&&u.id?this._exec(l,m,u):vt(u,C=>{const R=a||this._getRegistryForType(C);this._exec(l,R,C)})})}_exec(l,o,a){const u=Ae(l);Zt(a["before"+u],[],a),o[l](a),Zt(a["after"+u],[],a)}_getRegistryForType(l){for(let o=0;o<this._typedRegistries.length;o++){const a=this._typedRegistries[o];if(a.isForType(l))return a}return this.plugins}_get(l,o,a){const u=o.get(l);if(void 0===u)throw new Error('"'+l+'" is not a registered '+a+".");return u}};class Nc{constructor(){this._init=[]}notify(l,o,a,u){"beforeInit"===o&&(this._init=this._createDescriptors(l,!0),this._notify(this._init,l,"install"));const m=u?this._descriptors(l).filter(u):this._descriptors(l),C=this._notify(m,l,o,a);return"destroy"===o&&(this._notify(m,l,"stop"),this._notify(this._init,l,"uninstall")),C}_notify(l,o,a,u){u=u||{};for(const m of l){const C=m.plugin;if(!1===Zt(C[a],[o,u,m.options],C)&&u.cancelable)return!1}return!0}invalidate(){lt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(l){if(this._cache)return this._cache;const o=this._cache=this._createDescriptors(l);return this._notifyStateChanges(l),o}_createDescriptors(l,o){const a=l&&l.config,u=ot(a.options&&a.options.plugins,{}),m=function(_){const l=[],o=Object.keys(Ga.plugins.items);for(let u=0;u<o.length;u++)l.push(Ga.getPlugin(o[u]));const a=_.plugins||[];for(let u=0;u<a.length;u++){const m=a[u];-1===l.indexOf(m)&&l.push(m)}return l}(a);return!1!==u||o?function(_,l,o,a){const u=[],m=_.getContext();for(let C=0;C<l.length;C++){const R=l[C],U=Ul(o[R.id],a);null!==U&&u.push({plugin:R,options:bc(_.config,R,U,m)})}return u}(l,m,u,o):[]}_notifyStateChanges(l){const o=this._oldCache||[],a=this._cache,u=(m,C)=>m.filter(R=>!C.some(x=>R.plugin.id===x.plugin.id));this._notify(u(o,a),l,"stop"),this._notify(u(a,o),l,"start")}}function Ul(_,l){return l||!1!==_?!0===_?{}:_:null}function bc(_,l,o,a){const u=_.pluginScopeKeys(l),m=_.getOptionScopes(o,u);return _.createResolver(m,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function nu(_,l){return((l.datasets||{})[_]||{}).indexAxis||l.indexAxis||(tr.datasets[_]||{}).indexAxis||"x"}function ru(_,l){return"x"===_||"y"===_?_:l.axis||function(_){return"top"===_||"bottom"===_?"x":"left"===_||"right"===_?"y":void 0}(l.position)||_.charAt(0).toLowerCase()}function Pc(_){const l=_.options||(_.options={});l.plugins=ot(l.plugins,{}),l.scales=function(_,l){const o=no[_.type]||{scales:{}},a=l.scales||{},u=nu(_.type,l),m=Object.create(null),C=Object.create(null);return Object.keys(a).forEach(R=>{const x=a[R];if(!ht(x))return console.error(`Invalid scale configuration for scale: ${R}`);if(x._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${R}`);const U=ru(R,x),tt=function(_,l){return _===l?"_index_":"_value_"}(U,u),yt=o.scales||{};m[U]=m[U]||R,C[R]=Re(Object.create(null),[{axis:U},x,yt[U],yt[tt]])}),_.data.datasets.forEach(R=>{const x=R.type||_.type,U=R.indexAxis||nu(x,l),yt=(no[x]||{}).scales||{};Object.keys(yt).forEach(Vt=>{const ne=function(_,l){let o=_;return"_index_"===_?o=l:"_value_"===_&&(o="x"===l?"y":"x"),o}(Vt,U),Se=R[ne+"AxisID"]||m[ne]||ne;C[Se]=C[Se]||Object.create(null),Re(C[Se],[{axis:ne},a[Se],yt[Vt]])})}),Object.keys(C).forEach(R=>{const x=C[R];Re(x,[tr.scales[x.type],tr.scale])}),C}(_,l)}function Rl(_){return(_=_||{}).datasets=_.datasets||[],_.labels=_.labels||[],_}const el=new Map,Lu=new Set;function Fc(_,l){let o=el.get(_);return o||(o=l(),el.set(_,o),Lu.add(o)),o}const il=(_,l,o)=>{const a=Wt(l,o);void 0!==a&&_.add(a)};class fl{constructor(l){var _;this._config=((_=(_=l)||{}).data=Rl(_.data),Pc(_),_),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(l){this._config.type=l}get data(){return this._config.data}set data(l){this._config.data=Rl(l)}get options(){return this._config.options}set options(l){this._config.options=l}get plugins(){return this._config.plugins}update(){const l=this._config;this.clearCache(),Pc(l)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(l){return Fc(l,()=>[[`datasets.${l}`,""]])}datasetAnimationScopeKeys(l,o){return Fc(`${l}.transition.${o}`,()=>[[`datasets.${l}.transitions.${o}`,`transitions.${o}`],[`datasets.${l}`,""]])}datasetElementScopeKeys(l,o){return Fc(`${l}-${o}`,()=>[[`datasets.${l}.elements.${o}`,`datasets.${l}`,`elements.${o}`,""]])}pluginScopeKeys(l){const o=l.id;return Fc(`${this.type}-plugin-${o}`,()=>[[`plugins.${o}`,...l.additionalOptionScopes||[]]])}_cachedScopes(l,o){const a=this._scopeCache;let u=a.get(l);return(!u||o)&&(u=new Map,a.set(l,u)),u}getOptionScopes(l,o,a){const{options:u,type:m}=this,C=this._cachedScopes(l,a),R=C.get(o);if(R)return R;const x=new Set;o.forEach(tt=>{l&&(x.add(l),tt.forEach(yt=>il(x,l,yt))),tt.forEach(yt=>il(x,u,yt)),tt.forEach(yt=>il(x,no[m]||{},yt)),tt.forEach(yt=>il(x,tr,yt)),tt.forEach(yt=>il(x,ro,yt))});const U=Array.from(x);return 0===U.length&&U.push(Object.create(null)),Lu.has(o)&&C.set(o,U),U}chartOptionScopes(){const{options:l,type:o}=this;return[l,no[o]||{},tr.datasets[o]||{},{type:o},tr,ro]}resolveNamedOptions(l,o,a,u=[""]){const m={$shared:!0},{resolver:C,subPrefixes:R}=Wa(this._resolverCache,l,u);let x=C;(function(_,l){const{isScriptable:o,isIndexable:a}=Na(_);for(const u of l){const m=o(u),C=a(u),R=(C||m)&&_[u];if(m&&(ee(R)||Dl(R))||C&&ft(R))return!0}return!1})(C,o)&&(m.$shared=!1,x=vs(C,a=ee(a)?a():a,this.createResolver(l,a,R)));for(const U of o)m[U]=x[U];return m}createResolver(l,o,a=[""],u){const{resolver:m}=Wa(this._resolverCache,l,a);return ht(o)?vs(m,o,void 0,u):m}}function Wa(_,l,o){let a=_.get(l);a||(a=new Map,_.set(l,a));const u=o.join();let m=a.get(u);return m||(m={resolver:Hr(l,o),subPrefixes:o.filter(R=>!R.toLowerCase().includes("hover"))},a.set(u,m)),m}const Dl=_=>ht(_)&&Object.getOwnPropertyNames(_).reduce((l,o)=>l||ee(_[o]),!1),nc=["top","bottom","left","right","chartArea"];function qu(_,l){return"top"===_||"bottom"===_||-1===nc.indexOf(_)&&"x"===l}function ps(_,l){return function(o,a){return o[_]===a[_]?o[l]-a[l]:o[_]-a[_]}}function Bc(_){const l=_.chart,o=l.options.animation;l.notifyPlugins("afterRender"),Zt(o&&o.onComplete,[_],l)}function Tt(_){const l=_.chart,o=l.options.animation;Zt(o&&o.onProgress,[_],l)}function Ot(_){return Ja()&&"string"==typeof _?_=document.getElementById(_):_&&_.length&&(_=_[0]),_&&_.canvas&&(_=_.canvas),_}const se={},Oe=_=>{const l=Ot(_);return Object.values(se).filter(o=>o.canvas===l).pop()};function Ve(_,l,o){const a=Object.keys(_);for(const u of a){const m=+u;if(m>=l){const C=_[u];delete _[u],(o>0||m>l)&&(_[m+o]=C)}}}class fi{constructor(l,o){const a=this.config=new fl(o),u=Ot(l),m=Oe(u);if(m)throw new Error("Canvas is already in use. Chart with ID '"+m.id+"' must be destroyed before the canvas can be reused.");const C=a.createResolver(a.chartOptionScopes(),this.getContext());var _;this.platform=new(a.platform||(_=u,!Ja()||"undefined"!=typeof OffscreenCanvas&&_ instanceof OffscreenCanvas?xa:Ql)),this.platform.updateConfig(a);const R=this.platform.acquireContext(u,C.aspectRatio),x=R&&R.canvas,U=x&&x.height,tt=x&&x.width;this.id=St(),this.ctx=R,this.canvas=x,this.width=tt,this.height=U,this._options=C,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Nc,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(_,l){let o;return function(...a){return l?(clearTimeout(o),o=setTimeout(_,l,a)):_.apply(this,a),l}}(yt=>this.update(yt),C.resizeDelay||0),this._dataChanges=[],se[this.id]=this,R&&x?(bn.listen(this,"complete",Bc),bn.listen(this,"progress",Tt),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:l,maintainAspectRatio:o},width:a,height:u,_aspectRatio:m}=this;return lt(l)?o&&m?m:u?a/u:null:l}get data(){return this.config.data}set data(l){this.config.data=l}get options(){return this._options}set options(l){this.config.options=l}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$e(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ya(this.canvas,this.ctx),this}stop(){return bn.stop(this),this}resize(l,o){bn.running(this)?this._resizeBeforeDraw={width:l,height:o}:this._resize(l,o)}_resize(l,o){const a=this.options,C=this.platform.getMaximumSize(this.canvas,l,o,a.maintainAspectRatio&&this.aspectRatio),R=a.devicePixelRatio||this.platform.getDevicePixelRatio(),x=this.width?"resize":"attach";this.width=C.width,this.height=C.height,this._aspectRatio=this.aspectRatio,$e(this,R,!0)&&(this.notifyPlugins("resize",{size:C}),Zt(a.onResize,[this,C],this),this.attached&&this._doResize(x)&&this.render())}ensureScalesHaveIDs(){vt(this.options.scales||{},(a,u)=>{a.id=u})}buildOrUpdateScales(){const l=this.options,o=l.scales,a=this.scales,u=Object.keys(a).reduce((C,R)=>(C[R]=!1,C),{});let m=[];o&&(m=m.concat(Object.keys(o).map(C=>{const R=o[C],x=ru(C,R),U="r"===x,tt="x"===x;return{options:R,dposition:U?"chartArea":tt?"bottom":"left",dtype:U?"radialLinear":tt?"category":"linear"}}))),vt(m,C=>{const R=C.options,x=R.id,U=ru(x,R),tt=ot(R.type,C.dtype);(void 0===R.position||qu(R.position,U)!==qu(C.dposition))&&(R.position=C.dposition),u[x]=!0;let yt=null;x in a&&a[x].type===tt?yt=a[x]:(yt=new(Ga.getScale(tt))({id:x,type:tt,ctx:this.ctx,chart:this}),a[yt.id]=yt),yt.init(R,l)}),vt(u,(C,R)=>{C||delete a[R]}),vt(a,C=>{fo.configure(this,C,C.options),fo.addBox(this,C)})}_updateMetasets(){const l=this._metasets,o=this.data.datasets.length,a=l.length;if(l.sort((u,m)=>u.index-m.index),a>o){for(let u=o;u<a;++u)this._destroyDatasetMeta(u);l.splice(o,a-o)}this._sortedMetasets=l.slice(0).sort(ps("order","index"))}_removeUnreferencedMetasets(){const{_metasets:l,data:{datasets:o}}=this;l.length>o.length&&delete this._stacks,l.forEach((a,u)=>{0===o.filter(m=>m===a._dataset).length&&this._destroyDatasetMeta(u)})}buildOrUpdateControllers(){const l=[],o=this.data.datasets;let a,u;for(this._removeUnreferencedMetasets(),a=0,u=o.length;a<u;a++){const m=o[a];let C=this.getDatasetMeta(a);const R=m.type||this.config.type;if(C.type&&C.type!==R&&(this._destroyDatasetMeta(a),C=this.getDatasetMeta(a)),C.type=R,C.indexAxis=m.indexAxis||nu(R,this.options),C.order=m.order||0,C.index=a,C.label=""+m.label,C.visible=this.isDatasetVisible(a),C.controller)C.controller.updateIndex(a),C.controller.linkScales();else{const x=Ga.getController(R),{datasetElementType:U,dataElementType:tt}=tr.datasets[R];Object.assign(x.prototype,{dataElementType:Ga.getElement(tt),datasetElementType:U&&Ga.getElement(U)}),C.controller=new x(this,a),l.push(C.controller)}}return this._updateMetasets(),l}_resetElements(){vt(this.data.datasets,(l,o)=>{this.getDatasetMeta(o).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(l){const o=this.config;o.update();const a=this._options=o.createResolver(o.chartOptionScopes(),this.getContext()),u=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:l,cancelable:!0}))return;const m=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let C=0;for(let R=0,x=this.data.datasets.length;R<x;R++){const{controller:U}=this.getDatasetMeta(R),tt=!u&&-1===m.indexOf(U);U.buildOrUpdateElements(tt),C=Math.max(+U.getMaxOverflow(),C)}C=this._minPadding=a.layout.autoPadding?C:0,this._updateLayout(C),u||vt(m,R=>{R.reset()}),this._updateDatasets(l),this.notifyPlugins("afterUpdate",{mode:l}),this._layers.sort(ps("z","_idx")),this._lastEvent&&this._eventHandler(this._lastEvent,!0),this.render()}_updateScales(){vt(this.scales,l=>{fo.removeBox(this,l)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const l=this.options,o=new Set(Object.keys(this._listeners)),a=new Set(l.events);(!Mt(o,a)||!!this._responsiveListeners!==l.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:l}=this,o=this._getUniformDataChanges()||[];for(const{method:a,start:u,count:m}of o)Ve(l,u,"_removeElements"===a?-m:m)}_getUniformDataChanges(){const l=this._dataChanges;if(!l||!l.length)return;this._dataChanges=[];const o=this.data.datasets.length,a=m=>new Set(l.filter(C=>C[0]===m).map((C,R)=>R+","+C.splice(1).join(","))),u=a(0);for(let m=1;m<o;m++)if(!Mt(u,a(m)))return;return Array.from(u).map(m=>m.split(",")).map(m=>({method:m[1],start:+m[2],count:+m[3]}))}_updateLayout(l){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;fo.update(this,this.width,this.height,l);const o=this.chartArea,a=o.width<=0||o.height<=0;this._layers=[],vt(this.boxes,u=>{a&&"chartArea"===u.position||(u.configure&&u.configure(),this._layers.push(...u._layers()))},this),this._layers.forEach((u,m)=>{u._idx=m}),this.notifyPlugins("afterLayout")}_updateDatasets(l){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:l,cancelable:!0})){for(let o=0,a=this.data.datasets.length;o<a;++o)this.getDatasetMeta(o).controller.configure();for(let o=0,a=this.data.datasets.length;o<a;++o)this._updateDataset(o,ee(l)?l({datasetIndex:o}):l);this.notifyPlugins("afterDatasetsUpdate",{mode:l})}}_updateDataset(l,o){const a=this.getDatasetMeta(l),u={meta:a,index:l,mode:o,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",u)&&(a.controller._update(o),u.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",u))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(bn.has(this)?this.attached&&!bn.running(this)&&bn.start(this):(this.draw(),Bc({chart:this})))}draw(){let l;if(this._resizeBeforeDraw){const{width:a,height:u}=this._resizeBeforeDraw;this._resize(a,u),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const o=this._layers;for(l=0;l<o.length&&o[l].z<=0;++l)o[l].draw(this.chartArea);for(this._drawDatasets();l<o.length;++l)o[l].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(l){const o=this._sortedMetasets,a=[];let u,m;for(u=0,m=o.length;u<m;++u){const C=o[u];(!l||C.visible)&&a.push(C)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const l=this.getSortedVisibleDatasetMetas();for(let o=l.length-1;o>=0;--o)this._drawDataset(l[o]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(l){const o=this.ctx,a=l._clip,u=!a.disabled,m=this.chartArea,C={meta:l,index:l.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",C)&&(u&&Qs(o,{left:!1===a.left?0:m.left-a.left,right:!1===a.right?this.width:m.right+a.right,top:!1===a.top?0:m.top-a.top,bottom:!1===a.bottom?this.height:m.bottom+a.bottom}),l.controller.draw(),u&&Ea(o),C.cancelable=!1,this.notifyPlugins("afterDatasetDraw",C))}getElementsAtEventForMode(l,o,a,u){const m=Ac.modes[o];return"function"==typeof m?m(this,l,a,u):[]}getDatasetMeta(l){const o=this.data.datasets[l],a=this._metasets;let u=a.filter(m=>m&&m._dataset===o).pop();return u||(u={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:o&&o.order||0,index:l,_dataset:o,_parsed:[],_sorted:!1},a.push(u)),u}getContext(){return this.$context||(this.$context=Po(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(l){const o=this.data.datasets[l];if(!o)return!1;const a=this.getDatasetMeta(l);return"boolean"==typeof a.hidden?!a.hidden:!o.hidden}setDatasetVisibility(l,o){this.getDatasetMeta(l).hidden=!o}toggleDataVisibility(l){this._hiddenIndices[l]=!this._hiddenIndices[l]}getDataVisibility(l){return!this._hiddenIndices[l]}_updateVisibility(l,o,a){const u=a?"show":"hide",m=this.getDatasetMeta(l),C=m.controller._resolveAnimations(void 0,u);Qt(o)?(m.data[o].hidden=!a,this.update()):(this.setDatasetVisibility(l,a),C.update(m,{visible:a}),this.update(R=>R.datasetIndex===l?u:void 0))}hide(l,o){this._updateVisibility(l,o,!1)}show(l,o){this._updateVisibility(l,o,!0)}_destroyDatasetMeta(l){const o=this._metasets[l];o&&o.controller&&o.controller._destroy(),delete this._metasets[l]}_stop(){let l,o;for(this.stop(),bn.remove(this),l=0,o=this.data.datasets.length;l<o;++l)this._destroyDatasetMeta(l)}destroy(){const{canvas:l,ctx:o}=this;this._stop(),this.config.clearCache(),l&&(this.unbindEvents(),ya(l,o),this.platform.releaseContext(o),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete se[this.id]}toBase64Image(...l){return this.canvas.toDataURL(...l)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const l=this._listeners,o=this.platform,a=(m,C)=>{o.addEventListener(this,m,C),l[m]=C},u=(m,C,R)=>{m.offsetX=C,m.offsetY=R,this._eventHandler(m)};vt(this.options.events,m=>a(m,u))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const l=this._responsiveListeners,o=this.platform,a=(x,U)=>{o.addEventListener(this,x,U),l[x]=U},u=(x,U)=>{l[x]&&(o.removeEventListener(this,x,U),delete l[x])},m=(x,U)=>{this.canvas&&this.resize(x,U)};let C;const R=()=>{u("attach",R),this.attached=!0,this.resize(),a("resize",m),a("detach",C)};C=()=>{this.attached=!1,u("resize",m),this._stop(),this._resize(0,0),a("attach",R)},o.isAttached(this.canvas)?R():C()}unbindEvents(){vt(this._listeners,(l,o)=>{this.platform.removeEventListener(this,o,l)}),this._listeners={},vt(this._responsiveListeners,(l,o)=>{this.platform.removeEventListener(this,o,l)}),this._responsiveListeners=void 0}updateHoverStyle(l,o,a){const u=a?"set":"remove";let m,C,R,x;for("dataset"===o&&(m=this.getDatasetMeta(l[0].datasetIndex),m.controller["_"+u+"DatasetHoverStyle"]()),R=0,x=l.length;R<x;++R){C=l[R];const U=C&&this.getDatasetMeta(C.datasetIndex).controller;U&&U[u+"HoverStyle"](C.element,C.datasetIndex,C.index)}}getActiveElements(){return this._active||[]}setActiveElements(l){const o=this._active||[],a=l.map(({datasetIndex:m,index:C})=>{const R=this.getDatasetMeta(m);if(!R)throw new Error("No dataset found at index "+m);return{datasetIndex:m,element:R.data[C],index:C}});!At(a,o)&&(this._active=a,this._updateHoverStyles(a,o))}notifyPlugins(l,o,a){return this._plugins.notify(this,l,o,a)}_updateHoverStyles(l,o,a){const u=this.options.hover,m=(x,U)=>x.filter(tt=>!U.some(yt=>tt.datasetIndex===yt.datasetIndex&&tt.index===yt.index)),C=m(o,l),R=a?l:m(l,o);C.length&&this.updateHoverStyle(C,u.mode,!1),R.length&&u.mode&&this.updateHoverStyle(R,u.mode,!0)}_eventHandler(l,o){const a={event:l,replay:o,cancelable:!0},u=C=>(C.options.events||this.options.events).includes(l.native.type);if(!1===this.notifyPlugins("beforeEvent",a,u))return;const m=this._handleEvent(l,o);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,u),(m||a.changed)&&this.render(),this}_handleEvent(l,o){const{_active:a=[],options:u}=this,m=u.hover;let R=[],x=!1,U=null;return"mouseout"!==l.type&&(R=this.getElementsAtEventForMode(l,m.mode,m,o),U="click"===l.type?this._lastEvent:l),this._lastEvent=null,Cr(l,this.chartArea,this._minPadding)&&(Zt(u.onHover,[l,R,this],this),("mouseup"===l.type||"click"===l.type||"contextmenu"===l.type)&&Zt(u.onClick,[l,R,this],this)),x=!At(R,a),(x||o)&&(this._active=R,this._updateHoverStyles(R,a,o)),this._lastEvent=U,x}}const Je=()=>vt(fi.instances,_=>_._plugins.invalidate()),oi=!0;function Li(_,l,o){const{startAngle:a,pixelMargin:u,x:m,y:C,outerRadius:R,innerRadius:x}=l;let U=u/R;_.beginPath(),_.arc(m,C,R,a-U,o+U),x>u?(U=u/x,_.arc(m,C,x,o+U,a-U,!0)):_.arc(m,C,u,o+te,a-te),_.closePath(),_.clip()}function Wn(_,l,o,a){return{x:o+_*Math.cos(l),y:a+_*Math.sin(l)}}function kn(_,l,o,a,u){const{x:m,y:C,startAngle:R,pixelMargin:x,innerRadius:U}=l,tt=Math.max(l.outerRadius+a+o-x,0),yt=U>0?U+a+o+x:0;let Vt=0;const ne=u-R;if(a){const mo=((U>0?U-a:0)+(tt>0?tt-a:0))/2;Vt=(ne-(0!==mo?ne*mo/(mo+a):ne))/2}const He=(ne-Math.max(.001,ne*tt-o/Yt)/tt)/2,ze=R+He+Vt,qe=u-He-Vt,{outerStart:Mi,outerEnd:en,innerStart:Zi,innerEnd:$i}=function(_,l,o,a){const u=function(_){return Us(_,["outerStart","outerEnd","innerStart","innerEnd"])}(_.options.borderRadius),m=(o-l)/2,C=Math.min(m,a*l/2),R=x=>{const U=(o-Math.min(m,x))*a/2;return Qe(x,0,Math.min(m,U))};return{outerStart:R(u.outerStart),outerEnd:R(u.outerEnd),innerStart:Qe(u.innerStart,0,C),innerEnd:Qe(u.innerEnd,0,C)}}(l,yt,tt,qe-ze),mn=tt-Mi,En=tt-en,Ln=ze+Mi/mn,Xn=qe-en/En,Vr=yt+Zi,Un=yt+$i,Nr=ze+Zi/Vr,rs=qe-$i/Un;if(_.beginPath(),_.arc(m,C,tt,Ln,Xn),en>0){const mr=Wn(En,Xn,m,C);_.arc(mr.x,mr.y,en,Xn,qe+te)}const Cn=Wn(Un,qe,m,C);if(_.lineTo(Cn.x,Cn.y),$i>0){const mr=Wn(Un,rs,m,C);_.arc(mr.x,mr.y,$i,qe+te,rs+Math.PI)}if(_.arc(m,C,yt,qe-$i/yt,ze+Zi/yt,!0),Zi>0){const mr=Wn(Vr,Nr,m,C);_.arc(mr.x,mr.y,Zi,Nr+Math.PI,ze-te)}const wn=Wn(mn,ze,m,C);if(_.lineTo(wn.x,wn.y),Mi>0){const mr=Wn(mn,Ln,m,C);_.arc(mr.x,mr.y,Mi,ze-te,Ln)}_.closePath()}Object.defineProperties(fi,{defaults:{enumerable:oi,value:tr},instances:{enumerable:oi,value:se},overrides:{enumerable:oi,value:no},registry:{enumerable:oi,value:Ga},version:{enumerable:oi,value:"3.6.2"},getChart:{enumerable:oi,value:Oe},register:{enumerable:oi,value:(..._)=>{Ga.add(..._),Je()}},unregister:{enumerable:oi,value:(..._)=>{Ga.remove(..._),Je()}}});class Dr extends Ra{constructor(l){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,l&&Object.assign(this,l)}inRange(l,o,a){const u=this.getProps(["x","y"],a),{angle:m,distance:C}=function(_,l){const o=l.x-_.x,a=l.y-_.y,u=Math.sqrt(o*o+a*a);let m=Math.atan2(a,o);return m<-.5*Yt&&(m+=ye),{angle:m,distance:u}}(u,{x:l,y:o}),{startAngle:R,endAngle:x,innerRadius:U,outerRadius:tt,circumference:yt}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),Vt=this.options.spacing/2,Se=ot(yt,x-R)>=ye||Ce(m,R,x),He=Pi(C,U+Vt,tt+Vt);return Se&&He}getCenterPoint(l){const{x:o,y:a,startAngle:u,endAngle:m,innerRadius:C,outerRadius:R}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],l),{offset:x,spacing:U}=this.options,tt=(u+m)/2,yt=(C+R+U+x)/2;return{x:o+Math.cos(tt)*yt,y:a+Math.sin(tt)*yt}}tooltipPosition(l){return this.getCenterPoint(l)}draw(l){const{options:o,circumference:a}=this,u=(o.offset||0)/2,m=(o.spacing||0)/2;if(this.pixelMargin="inner"===o.borderAlign?.33:0,this.fullCircles=a>ye?Math.floor(a/ye):0,0===a||this.innerRadius<0||this.outerRadius<0)return;l.save();let C=0;if(u){C=u/2;const x=(this.startAngle+this.endAngle)/2;l.translate(Math.cos(x)*C,Math.sin(x)*C),this.circumference>=Yt&&(C=u)}l.fillStyle=o.backgroundColor,l.strokeStyle=o.borderColor;const R=function(_,l,o,a){const{fullCircles:u,startAngle:m,circumference:C}=l;let R=l.endAngle;if(u){kn(_,l,o,a,m+ye);for(let x=0;x<u;++x)_.fill();isNaN(C)||(R=m+C%ye,C%ye==0&&(R+=ye))}return kn(_,l,o,a,R),_.fill(),R}(l,this,C,m);(function(_,l,o,a,u){const{options:m}=l,C="inner"===m.borderAlign;!m.borderWidth||(C?(_.lineWidth=2*m.borderWidth,_.lineJoin="round"):(_.lineWidth=m.borderWidth,_.lineJoin="bevel"),l.fullCircles&&function(_,l,o){const{x:a,y:u,startAngle:m,pixelMargin:C,fullCircles:R}=l,x=Math.max(l.outerRadius-C,0),U=l.innerRadius+C;let tt;for(o&&Li(_,l,m+ye),_.beginPath(),_.arc(a,u,U,m+ye,m,!0),tt=0;tt<R;++tt)_.stroke();for(_.beginPath(),_.arc(a,u,x,m,m+ye),tt=0;tt<R;++tt)_.stroke()}(_,l,C),C&&Li(_,l,u),kn(_,l,o,a,u),_.stroke())})(l,this,C,m,R),l.restore()}}function to(_,l,o=l){_.lineCap=ot(o.borderCapStyle,l.borderCapStyle),_.setLineDash(ot(o.borderDash,l.borderDash)),_.lineDashOffset=ot(o.borderDashOffset,l.borderDashOffset),_.lineJoin=ot(o.borderJoinStyle,l.borderJoinStyle),_.lineWidth=ot(o.borderWidth,l.borderWidth),_.strokeStyle=ot(o.borderColor,l.borderColor)}function Lo(_,l,o){_.lineTo(o.x,o.y)}function Es(_,l,o={}){const a=_.length,{start:u=0,end:m=a-1}=o,{start:C,end:R}=l,x=Math.max(u,C),U=Math.min(m,R);return{count:a,start:x,loop:l.loop,ilen:U<x&&!(u<C&&m<C||u>R&&m>R)?a+U-x:U-x}}function es(_,l,o,a){const{points:u,options:m}=l,{count:C,start:R,loop:x,ilen:U}=Es(u,o,a),tt=function(_){return _.stepped?Ma:_.tension||"monotone"===_.cubicInterpolationMode?qs:Lo}(m);let ne,Se,He,{move:yt=!0,reverse:Vt}=a||{};for(ne=0;ne<=U;++ne)Se=u[(R+(Vt?U-ne:ne))%C],!Se.skip&&(yt?(_.moveTo(Se.x,Se.y),yt=!1):tt(_,He,Se,Vt,m.stepped),He=Se);return x&&(Se=u[(R+(Vt?U:0))%C],tt(_,He,Se,Vt,m.stepped)),!!x}function ks(_,l,o,a){const u=l.points,{count:m,start:C,ilen:R}=Es(u,o,a),{move:x=!0,reverse:U}=a||{};let Vt,ne,Se,He,ze,qe,tt=0,yt=0;const Mi=Zi=>(C+(U?R-Zi:Zi))%m,en=()=>{He!==ze&&(_.lineTo(tt,ze),_.lineTo(tt,He),_.lineTo(tt,qe))};for(x&&(ne=u[Mi(0)],_.moveTo(ne.x,ne.y)),Vt=0;Vt<=R;++Vt){if(ne=u[Mi(Vt)],ne.skip)continue;const Zi=ne.x,$i=ne.y,mn=0|Zi;mn===Se?($i<He?He=$i:$i>ze&&(ze=$i),tt=(yt*tt+Zi)/++yt):(en(),_.lineTo(Zi,$i),Se=mn,yt=0,He=ze=$i),qe=$i}en()}function za(_){const l=_.options;return _._decimated||_._loop||l.tension||"monotone"===l.cubicInterpolationMode||l.stepped||l.borderDash&&l.borderDash.length?es:ks}Dr.id="arc",Dr.defaults={borderAlign:"center",borderColor:"#fff",borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Dr.defaultRoutes={backgroundColor:"backgroundColor"};const yu="function"==typeof Path2D;let yc=(()=>{class _ extends Ra{constructor(o){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,o&&Object.assign(this,o)}updateControlPoints(o,a){const u=this.options;!u.tension&&"monotone"!==u.cubicInterpolationMode||u.stepped||this._pointsUpdated||(zo(this._points,u,o,u.spanGaps?this._loop:this._fullLoop,a),this._pointsUpdated=!0)}set points(o){this._points=o,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(_,l){const o=_.points,a=_.options.spanGaps,u=o.length;if(!u)return[];const m=!!_._loop,{start:C,end:R}=function(_,l,o,a){let u=0,m=l-1;if(o&&!a)for(;u<l&&!_[u].skip;)u++;for(;u<l&&_[u].skip;)u++;for(u%=l,o&&(m+=u);m>u&&_[m%l].skip;)m--;return m%=l,{start:u,end:m}}(o,u,m,a);return function(_,l,o,a){return a&&a.setContext&&o?function(_,l,o,a){const u=_._chart.getContext(),m=Zo(_.options),{_datasetIndex:C,options:{spanGaps:R}}=_,x=o.length,U=[];let tt=m,yt=l[0].start,Vt=yt;function ne(Se,He,ze,qe){const Mi=R?-1:1;if(Se!==He){for(Se+=x;o[Se%x].skip;)Se-=Mi;for(;o[He%x].skip;)He+=Mi;Se%x!=He%x&&(U.push({start:Se%x,end:He%x,loop:ze,style:qe}),tt=qe,yt=He%x)}}for(const Se of l){yt=R?yt:Se.start;let ze,He=o[yt%x];for(Vt=yt+1;Vt<=Se.end;Vt++){const qe=o[Vt%x];ze=Zo(a.setContext(Po(u,{type:"segment",p0:He,p1:qe,p0DataIndex:(Vt-1)%x,p1DataIndex:Vt%x,datasetIndex:C}))),Dn(ze,tt)&&ne(yt,Vt-1,Se.loop,tt),He=qe,tt=ze}yt<Vt-1&&ne(yt,Vt-1,Se.loop,tt)}return U}(_,l,o,a):l}(_,!0===a?[{start:C,end:R,loop:m}]:function(_,l,o,a){const u=_.length,m=[];let x,C=l,R=_[l];for(x=l+1;x<=o;++x){const U=_[x%u];U.skip||U.stop?R.skip||(m.push({start:l%u,end:(x-1)%u,loop:a=!1}),l=C=U.stop?x:null):(C=x,R.skip&&(l=x)),R=U}return null!==C&&m.push({start:l%u,end:C%u,loop:a}),m}(o,C,R<C?R+u:R,!!_._fullLoop&&0===C&&R===u-1),o,l)}(this,this.options.segment))}first(){const o=this.segments;return o.length&&this.points[o[0].start]}last(){const o=this.segments,u=o.length;return u&&this.points[o[u-1].end]}interpolate(o,a){const u=this.options,m=o[a],C=this.points,R=Rs(this,{property:a,start:m,end:m});if(!R.length)return;const x=[],U=function(_){return _.stepped?fn:_.tension||"monotone"===_.cubicInterpolationMode?Yn:sn}(u);let tt,yt;for(tt=0,yt=R.length;tt<yt;++tt){const{start:Vt,end:ne}=R[tt],Se=C[Vt],He=C[ne];if(Se===He){x.push(Se);continue}const qe=U(Se,He,Math.abs((m-Se[a])/(He[a]-Se[a])),u.stepped);qe[a]=o[a],x.push(qe)}return 1===x.length?x[0]:x}pathSegment(o,a,u){return za(this)(o,this,a,u)}path(o,a,u){const m=this.segments,C=za(this);let R=this._loop;a=a||0,u=u||this.points.length-a;for(const x of m)R&=C(o,this,x,{start:a,end:a+u-1});return!!R}draw(o,a,u,m){(this.points||[]).length&&(this.options||{}).borderWidth&&(o.save(),function(_,l,o,a){yu&&!l.options.segment?function(_,l,o,a){let u=l._path;u||(u=l._path=new Path2D,l.path(u,o,a)&&u.closePath()),to(_,l.options),_.stroke(u)}(_,l,o,a):function(_,l,o,a){const{segments:u,options:m}=l,C=za(l);for(const R of u)to(_,m,R.style),_.beginPath(),C(_,l,R,{start:o,end:o+a-1})&&_.closePath(),_.stroke()}(_,l,o,a)}(o,this,u,m),o.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return _.id="line",_.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},_.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},_.descriptors={_scriptable:!0,_indexable:l=>"borderDash"!==l&&"fill"!==l},_})();function va(_,l,o,a){const u=_.options,{[o]:m}=_.getProps([o],a);return Math.abs(l-m)<u.radius+u.hitRadius}let Rh=(()=>{class _ extends Ra{constructor(o){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,o&&Object.assign(this,o)}inRange(o,a,u){const m=this.options,{x:C,y:R}=this.getProps(["x","y"],u);return Math.pow(o-C,2)+Math.pow(a-R,2)<Math.pow(m.hitRadius+m.radius,2)}inXRange(o,a){return va(this,o,"x",a)}inYRange(o,a){return va(this,o,"y",a)}getCenterPoint(o){const{x:a,y:u}=this.getProps(["x","y"],o);return{x:a,y:u}}size(o){let a=(o=o||this.options||{}).radius||0;return a=Math.max(a,a&&o.hoverRadius||0),2*(a+(a&&o.borderWidth||0))}draw(o,a){const u=this.options;this.skip||u.radius<.1||!Cr(this,a,this.size(u)/2)||(o.strokeStyle=u.borderColor,o.lineWidth=u.borderWidth,o.fillStyle=u.backgroundColor,Zs(o,u,this.x,this.y))}getRange(){const o=this.options||{};return o.radius+o.hitRadius}}return _.id="point",_.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},_.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},_})();function Fu(_,l){const{x:o,y:a,base:u,width:m,height:C}=_.getProps(["x","y","base","width","height"],l);let R,x,U,tt,yt;return _.horizontal?(yt=C/2,R=Math.min(o,u),x=Math.max(o,u),U=a-yt,tt=a+yt):(yt=m/2,R=o-yt,x=o+yt,U=Math.min(a,u),tt=Math.max(a,u)),{left:R,top:U,right:x,bottom:tt}}function gl(_,l,o,a){return _?0:Qe(l,o,a)}function Ec(_,l,o,a){const u=null===l,m=null===o,R=_&&!(u&&m)&&Fu(_,a);return R&&(u||Pi(l,R.left,R.right))&&(m||Pi(o,R.top,R.bottom))}function Hc(_,l){_.rect(l.x,l.y,l.w,l.h)}function Uc(_,l,o={}){const a=_.x!==o.x?-l:0,u=_.y!==o.y?-l:0;return{x:_.x+a,y:_.y+u,w:_.w+((_.x+_.w!==o.x+o.w?l:0)-a),h:_.h+((_.y+_.h!==o.y+o.h?l:0)-u),radius:_.radius}}class Vc extends Ra{constructor(l){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,l&&Object.assign(this,l)}draw(l){const{inflateAmount:o,options:{borderColor:a,backgroundColor:u}}=this,{inner:m,outer:C}=function(_){const l=Fu(_),o=l.right-l.left,a=l.bottom-l.top,u=function(_,l,o){const u=_.borderSkipped,m=Wo(_.options.borderWidth);return{t:gl(u.top,m.top,0,o),r:gl(u.right,m.right,0,l),b:gl(u.bottom,m.bottom,0,o),l:gl(u.left,m.left,0,l)}}(_,o/2,a/2),m=function(_,l,o){const{enableBorderRadius:a}=_.getProps(["enableBorderRadius"]),u=_.options.borderRadius,m=No(u),C=Math.min(l,o),R=_.borderSkipped,x=a||ht(u);return{topLeft:gl(!x||R.top||R.left,m.topLeft,0,C),topRight:gl(!x||R.top||R.right,m.topRight,0,C),bottomLeft:gl(!x||R.bottom||R.left,m.bottomLeft,0,C),bottomRight:gl(!x||R.bottom||R.right,m.bottomRight,0,C)}}(_,o/2,a/2);return{outer:{x:l.left,y:l.top,w:o,h:a,radius:m},inner:{x:l.left+u.l,y:l.top+u.t,w:o-u.l-u.r,h:a-u.t-u.b,radius:{topLeft:Math.max(0,m.topLeft-Math.max(u.t,u.l)),topRight:Math.max(0,m.topRight-Math.max(u.t,u.r)),bottomLeft:Math.max(0,m.bottomLeft-Math.max(u.b,u.l)),bottomRight:Math.max(0,m.bottomRight-Math.max(u.b,u.r))}}}}(this),R=(_=C.radius).topLeft||_.topRight||_.bottomLeft||_.bottomRight?Aa:Hc;var _;l.save(),(C.w!==m.w||C.h!==m.h)&&(l.beginPath(),R(l,Uc(C,o,m)),l.clip(),R(l,Uc(m,-o,C)),l.fillStyle=a,l.fill("evenodd")),l.beginPath(),R(l,Uc(m,o)),l.fillStyle=u,l.fill(),l.restore()}inRange(l,o,a){return Ec(this,l,o,a)}inXRange(l,o){return Ec(this,l,null,o)}inYRange(l,o){return Ec(this,null,l,o)}getCenterPoint(l){const{x:o,y:a,base:u,horizontal:m}=this.getProps(["x","y","base","horizontal"],l);return{x:m?(o+u)/2:o,y:m?a:(a+u)/2}}getRange(l){return"x"===l?this.width/2:this.height/2}}Vc.id="bar",Vc.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Vc.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var is=Object.freeze({__proto__:null,ArcElement:Dr,LineElement:yc,PointElement:Rh,BarElement:Vc});function Tc(_){if(_._decimated){const l=_._data;delete _._decimated,delete _._data,Object.defineProperty(_,"data",{value:l})}}function nh(_){_.data.datasets.forEach(l=>{Tc(l)})}var Dh={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(_,l,o)=>{if(!o.enabled)return void nh(_);const a=_.width;_.data.datasets.forEach((u,m)=>{const{_data:C,indexAxis:R}=u,x=_.getDatasetMeta(m),U=C||u.data;if("y"===ls([R,_.options.indexAxis])||"line"!==x.type)return;const tt=_.scales[x.xAxisID];if("linear"!==tt.type&&"time"!==tt.type||_.options.parsing)return;let Se,{start:yt,count:Vt}=function(_,l){const o=l.length;let u,a=0;const{iScale:m}=_,{min:C,max:R,minDefined:x,maxDefined:U}=m.getUserBounds();return x&&(a=Qe(Xr(l,m.axis,C).lo,0,o-1)),u=U?Qe(Xr(l,m.axis,R).hi+1,a,o)-a:o-a,{start:a,count:u}}(x,U);if(Vt<=(o.threshold||4*a))Tc(u);else{switch(lt(C)&&(u._data=U,delete u.data,Object.defineProperty(u,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(He){this._data=He}})),o.algorithm){case"lttb":Se=function(_,l,o,a,u){const m=u.samples||a;if(m>=o)return _.slice(l,l+o);const C=[],R=(o-2)/(m-2);let x=0;const U=l+o-1;let yt,Vt,ne,Se,He,tt=l;for(C[x++]=_[tt],yt=0;yt<m-2;yt++){let Mi,ze=0,qe=0;const en=Math.floor((yt+1)*R)+1+l,Zi=Math.min(Math.floor((yt+2)*R)+1,o)+l,$i=Zi-en;for(Mi=en;Mi<Zi;Mi++)ze+=_[Mi].x,qe+=_[Mi].y;ze/=$i,qe/=$i;const mn=Math.floor(yt*R)+1+l,En=Math.min(Math.floor((yt+1)*R)+1,o)+l,{x:Ln,y:Xn}=_[tt];for(ne=Se=-1,Mi=mn;Mi<En;Mi++)Se=.5*Math.abs((Ln-ze)*(_[Mi].y-Xn)-(Ln-_[Mi].x)*(qe-Xn)),Se>ne&&(ne=Se,Vt=_[Mi],He=Mi);C[x++]=Vt,tt=He}return C[x++]=_[U],C}(U,yt,Vt,a,o);break;case"min-max":Se=function(_,l,o,a){let C,R,x,U,tt,yt,Vt,ne,Se,He,u=0,m=0;const ze=[],Mi=_[l].x,Zi=_[l+o-1].x-Mi;for(C=l;C<l+o;++C){R=_[C],x=(R.x-Mi)/Zi*a,U=R.y;const $i=0|x;if($i===tt)U<Se?(Se=U,yt=C):U>He&&(He=U,Vt=C),u=(m*u+R.x)/++m;else{const mn=C-1;if(!lt(yt)&&!lt(Vt)){const En=Math.min(yt,Vt),Ln=Math.max(yt,Vt);En!==ne&&En!==mn&&ze.push(Cm(Tm({},_[En]),{x:u})),Ln!==ne&&Ln!==mn&&ze.push(Cm(Tm({},_[Ln]),{x:u}))}C>0&&mn!==ne&&ze.push(_[mn]),ze.push(R),tt=$i,m=0,Se=He=U,yt=Vt=ne=C}}return ze}(U,yt,Vt,a);break;default:throw new Error(`Unsupported decimation algorithm '${o.algorithm}'`)}u._decimated=Se}})},destroy(_){nh(_)}};function rh(_,l,o){const a=function(_){const l=_.options,o=l.fill;let a=ot(o&&o.target,o);return void 0===a&&(a=!!l.backgroundColor),!1!==a&&null!==a&&(!0===a?"origin":a)}(_);if(ht(a))return!isNaN(a.value)&&a;let u=parseFloat(a);return Gt(u)&&Math.floor(u)===u?(("-"===a[0]||"+"===a[0])&&(u=l+u),!(u===l||u<0||u>=o)&&u):["origin","start","end","stack","shape"].indexOf(a)>=0&&a}class _h{constructor(l){this.x=l.x,this.y=l.y,this.radius=l.radius}pathSegment(l,o,a){const{x:u,y:m,radius:C}=this;return l.arc(u,m,C,(o=o||{start:0,end:ye}).end,o.start,!0),!a.bounds}interpolate(l){const{x:o,y:a,radius:u}=this,m=l.angle;return{x:o+Math.cos(m)*u,y:a+Math.sin(m)*u,angle:m}}}function lu(_,l,o){for(;l>_;l--){const a=o[l];if(!isNaN(a.x)&&!isNaN(a.y))break}return l}function zl(_,l,o){const a=[];for(let u=0;u<o.length;u++){const m=o[u],{first:C,last:R,point:x}=Uu(m,l,"x");if(!(!x||C&&R))if(C)a.unshift(x);else if(_.push(x),!R)break}_.push(...a)}function Uu(_,l,o){const a=_.interpolate(l,o);if(!a)return{};const u=a[o],m=_.segments,C=_.points;let R=!1,x=!1;for(let U=0;U<m.length;U++){const tt=m[U],yt=C[tt.start][o],Vt=C[tt.end][o];if(Pi(u,yt,Vt)){R=u===yt,x=u===Vt;break}}return{first:R,last:x,point:a}}function Vu(_){const{chart:l,fill:o,line:a}=_;if(Gt(o))return function(_,l){const o=_.getDatasetMeta(l);return o&&_.isDatasetVisible(l)?o.dataset:null}(l,o);if("stack"===o)return function(_){const{scale:l,index:o,line:a}=_,u=[],m=a.segments,C=a.points,R=function(_,l){const o=[],a=_.getMatchingVisibleMetas("line");for(let u=0;u<a.length;u++){const m=a[u];if(m.index===l)break;m.hidden||o.unshift(m.dataset)}return o}(l,o);R.push(Cc({x:null,y:l.bottom},a));for(let x=0;x<m.length;x++){const U=m[x];for(let tt=U.start;tt<=U.end;tt++)zl(u,C[tt],R)}return new yc({points:u,options:{}})}(_);if("shape"===o)return!0;const u=function(_){return(_.scale||{}).getPointPositionForValue?function(_){const{scale:l,fill:o}=_,a=l.options,u=l.getLabels().length,m=[],C=a.reverse?l.max:l.min;let x,U,tt;if(tt="start"===o?C:"end"===o?a.reverse?l.min:l.max:ht(o)?o.value:l.getBaseValue(),a.grid.circular)return U=l.getPointPositionForValue(0,C),new _h({x:U.x,y:U.y,radius:l.getDistanceFromCenterForValue(tt)});for(x=0;x<u;++x)m.push(l.getPointPositionForValue(x,tt));return m}(_):function(_){const{scale:l={},fill:o}=_;let u,a=null;return"start"===o?a=l.bottom:"end"===o?a=l.top:ht(o)?a=l.getPixelForValue(o.value):l.getBasePixel&&(a=l.getBasePixel()),Gt(a)?(u=l.isHorizontal(),{x:u?a:null,y:u?null:a}):null}(_)}(_);return u instanceof _h?u:Cc(u,a)}function Cc(_,l){let o=[],a=!1;return ft(_)?(a=!0,o=_):o=function(_,l){const{x:o=null,y:a=null}=_||{},u=l.points,m=[];return l.segments.forEach(({start:C,end:R})=>{R=lu(C,R,u);const x=u[C],U=u[R];null!==a?(m.push({x:x.x,y:a}),m.push({x:U.x,y:a})):null!==o&&(m.push({x:o,y:x.y}),m.push({x:o,y:U.y}))}),m}(_,l),o.length?new yc({points:o,options:{tension:0},_loop:a,_fullLoop:a}):null}function Gu(_,l,o){let u=_[l].fill;const m=[l];let C;if(!o)return u;for(;!1!==u&&-1===m.indexOf(u);){if(!Gt(u))return u;if(C=_[u],!C)return!1;if(C.visible)return u;m.push(u),u=C.fill}return!1}function Ah(_,l,o){_.beginPath(),l.path(_),_.lineTo(l.last().x,o),_.lineTo(l.first().x,o),_.closePath(),_.clip()}function Io(_,l,o,a){if(a)return;let u=l[_],m=o[_];return"angle"===_&&(u=vi(u),m=vi(m)),{property:_,start:u,end:m}}function Oh(_,l,o,a){return _&&l?a(_[o],l[o]):_?_[o]:l?l[o]:0}function Sc(_,l,o){const{top:a,bottom:u}=l.chart.chartArea,{property:m,start:C,end:R}=o||{};"x"===m&&(_.beginPath(),_.rect(C,a,R-C,u-a),_.clip())}function nl(_,l,o,a){const u=l.interpolate(o,a);u&&_.lineTo(u.x,u.y)}function cu(_,l){const{line:o,target:a,property:u,color:m,scale:C}=l,R=function(_,l,o){const a=_.segments,u=_.points,m=l.points,C=[];for(const R of a){let{start:x,end:U}=R;U=lu(x,U,u);const tt=Io(o,u[x],u[U],R.loop);if(!l.segments){C.push({source:R,target:tt,start:u[x],end:u[U]});continue}const yt=Rs(l,tt);for(const Vt of yt){const ne=Io(o,m[Vt.start],m[Vt.end],Vt.loop),Se=zs(R,u,ne);for(const He of Se)C.push({source:He,target:Vt,start:{[o]:Oh(tt,ne,"start",Math.max)},end:{[o]:Oh(tt,ne,"end",Math.min)}})}}return C}(o,a,u);for(const{source:x,target:U,start:tt,end:yt}of R){const{style:{backgroundColor:Vt=m}={}}=x,ne=!0!==a;_.save(),_.fillStyle=Vt,Sc(_,C,ne&&Io(u,tt,yt)),_.beginPath();const Se=!!o.pathSegment(_,x);let He;if(ne){Se?_.closePath():nl(_,a,yt,u);const ze=!!a.pathSegment(_,U,{move:Se,reverse:!0});He=Se&&ze,He||nl(_,a,tt,u)}_.closePath(),_.fill(He?"evenodd":"nonzero"),_.restore()}}function zu(_,l,o){const a=Vu(l),{line:u,scale:m,axis:C}=l,R=u.options,x=R.fill,U=R.backgroundColor,{above:tt=U,below:yt=U}=x||{};a&&u.points.length&&(Qs(_,o),function(_,l){const{line:o,target:a,above:u,below:m,area:C,scale:R}=l,x=o._loop?"angle":l.axis;_.save(),"x"===x&&m!==u&&(Ah(_,a,C.top),cu(_,{line:o,target:a,color:u,scale:R,property:x}),_.restore(),_.save(),Ah(_,a,C.bottom)),cu(_,{line:o,target:a,color:m,scale:R,property:x}),_.restore()}(_,{line:u,target:a,above:tt,below:yt,area:o,scale:m,axis:C}),Ea(_))}var xh={id:"filler",afterDatasetsUpdate(_,l,o){const a=(_.data.datasets||[]).length,u=[];let m,C,R,x;for(C=0;C<a;++C)m=_.getDatasetMeta(C),R=m.dataset,x=null,R&&R.options&&R instanceof yc&&(x={visible:_.isDatasetVisible(C),index:C,fill:rh(R,C,a),chart:_,axis:m.controller.options.indexAxis,scale:m.vScale,line:R}),m.$filler=x,u.push(x);for(C=0;C<a;++C)x=u[C],x&&!1!==x.fill&&(x.fill=Gu(u,C,o.propagate))},beforeDraw(_,l,o){const a="beforeDraw"===o.drawTime,u=_.getSortedVisibleDatasetMetas(),m=_.chartArea;for(let C=u.length-1;C>=0;--C){const R=u[C].$filler;!R||(R.line.updateControlPoints(m,R.axis),a&&zu(_.ctx,R,m))}},beforeDatasetsDraw(_,l,o){if("beforeDatasetsDraw"!==o.drawTime)return;const a=_.getSortedVisibleDatasetMetas();for(let u=a.length-1;u>=0;--u){const m=a[u].$filler;m&&zu(_.ctx,m,_.chartArea)}},beforeDatasetDraw(_,l,o){const a=l.meta.$filler;!a||!1===a.fill||"beforeDatasetDraw"!==o.drawTime||zu(_.ctx,a,_.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Tu=(_,l)=>{let{boxHeight:o=l,boxWidth:a=l}=_;return _.usePointStyle&&(o=Math.min(o,l),a=Math.min(a,l)),{boxWidth:a,boxHeight:o,itemHeight:Math.max(l,o)}};class ju extends Ra{constructor(l){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=l.chart,this.options=l.options,this.ctx=l.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(l,o,a){this.maxWidth=l,this.maxHeight=o,this._margins=a,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const l=this.options.labels||{};let o=Zt(l.generateLabels,[this.chart],this)||[];l.filter&&(o=o.filter(a=>l.filter(a,this.chart.data))),l.sort&&(o=o.sort((a,u)=>l.sort(a,u,this.chart.data))),this.options.reverse&&o.reverse(),this.legendItems=o}fit(){const{options:l,ctx:o}=this;if(!l.display)return void(this.width=this.height=0);const a=l.labels,u=_r(a.font),m=u.size,C=this._computeTitleHeight(),{boxWidth:R,itemHeight:x}=Tu(a,m);let U,tt;o.font=u.string,this.isHorizontal()?(U=this.maxWidth,tt=this._fitRows(C,m,R,x)+10):(tt=this.maxHeight,U=this._fitCols(C,m,R,x)+10),this.width=Math.min(U,l.maxWidth||this.maxWidth),this.height=Math.min(tt,l.maxHeight||this.maxHeight)}_fitRows(l,o,a,u){const{ctx:m,maxWidth:C,options:{labels:{padding:R}}}=this,x=this.legendHitBoxes=[],U=this.lineWidths=[0],tt=u+R;let yt=l;m.textAlign="left",m.textBaseline="middle";let Vt=-1,ne=-tt;return this.legendItems.forEach((Se,He)=>{const ze=a+o/2+m.measureText(Se.text).width;(0===He||U[U.length-1]+ze+2*R>C)&&(yt+=tt,U[U.length-(He>0?0:1)]=0,ne+=tt,Vt++),x[He]={left:0,top:ne,row:Vt,width:ze,height:u},U[U.length-1]+=ze+R}),yt}_fitCols(l,o,a,u){const{ctx:m,maxHeight:C,options:{labels:{padding:R}}}=this,x=this.legendHitBoxes=[],U=this.columnSizes=[],tt=C-l;let yt=R,Vt=0,ne=0,Se=0,He=0;return this.legendItems.forEach((ze,qe)=>{const Mi=a+o/2+m.measureText(ze.text).width;qe>0&&ne+u+2*R>tt&&(yt+=Vt+R,U.push({width:Vt,height:ne}),Se+=Vt+R,He++,Vt=ne=0),x[qe]={left:Se,top:ne,col:He,width:Mi,height:u},Vt=Math.max(Vt,Mi),ne+=u+R}),yt+=Vt,U.push({width:Vt,height:ne}),yt}adjustHitBoxes(){if(!this.options.display)return;const l=this._computeTitleHeight(),{legendHitBoxes:o,options:{align:a,labels:{padding:u},rtl:m}}=this,C=Kr(m,this.left,this.width);if(this.isHorizontal()){let R=0,x=Bt(a,this.left+u,this.right-this.lineWidths[R]);for(const U of o)R!==U.row&&(R=U.row,x=Bt(a,this.left+u,this.right-this.lineWidths[R])),U.top+=this.top+l+u,U.left=C.leftForLtr(C.x(x),U.width),x+=U.width+u}else{let R=0,x=Bt(a,this.top+l+u,this.bottom-this.columnSizes[R].height);for(const U of o)U.col!==R&&(R=U.col,x=Bt(a,this.top+l+u,this.bottom-this.columnSizes[R].height)),U.top=x,U.left+=this.left+u,U.left=C.leftForLtr(C.x(U.left),U.width),x+=U.height+u}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const l=this.ctx;Qs(l,this),this._draw(),Ea(l)}}_draw(){const{options:l,columnSizes:o,lineWidths:a,ctx:u}=this,{align:m,labels:C}=l,R=tr.color,x=Kr(l.rtl,this.left,this.width),U=_r(C.font),{color:tt,padding:yt}=C,Vt=U.size,ne=Vt/2;let Se;this.drawTitle(),u.textAlign=x.textAlign("left"),u.textBaseline="middle",u.lineWidth=.5,u.font=U.string;const{boxWidth:He,boxHeight:ze,itemHeight:qe}=Tu(C,Vt),Zi=this.isHorizontal(),$i=this._computeTitleHeight();Se=Zi?{x:Bt(m,this.left+yt,this.right-a[0]),y:this.top+yt+$i,line:0}:{x:this.left+yt,y:Bt(m,this.top+$i+yt,this.bottom-o[0].height),line:0},$o(this.ctx,l.textDirection);const mn=qe+yt;this.legendItems.forEach((En,Ln)=>{u.strokeStyle=En.fontColor||tt,u.fillStyle=En.fontColor||tt;const Xn=u.measureText(En.text).width,Vr=x.textAlign(En.textAlign||(En.textAlign=C.textAlign)),Un=He+ne+Xn;let Nr=Se.x,rs=Se.y;x.setWidth(this.width),Zi?Ln>0&&Nr+Un+yt>this.right&&(rs=Se.y+=mn,Se.line++,Nr=Se.x=Bt(m,this.left+yt,this.right-a[Se.line])):Ln>0&&rs+mn>this.bottom&&(Nr=Se.x=Nr+o[Se.line].width+yt,Se.line++,rs=Se.y=Bt(m,this.top+$i+yt,this.bottom-o[Se.line].height)),function(En,Ln,Xn){if(isNaN(He)||He<=0||isNaN(ze)||ze<0)return;u.save();const Vr=ot(Xn.lineWidth,1);if(u.fillStyle=ot(Xn.fillStyle,R),u.lineCap=ot(Xn.lineCap,"butt"),u.lineDashOffset=ot(Xn.lineDashOffset,0),u.lineJoin=ot(Xn.lineJoin,"miter"),u.lineWidth=Vr,u.strokeStyle=ot(Xn.strokeStyle,R),u.setLineDash(ot(Xn.lineDash,[])),C.usePointStyle){const Un={radius:He*Math.SQRT2/2,pointStyle:Xn.pointStyle,rotation:Xn.rotation,borderWidth:Vr},Nr=x.xPlus(En,He/2);Zs(u,Un,Nr,Ln+ne)}else{const Un=Ln+Math.max((Vt-ze)/2,0),Nr=x.leftForLtr(En,He),rs=No(Xn.borderRadius);u.beginPath(),Object.values(rs).some(Cn=>0!==Cn)?Aa(u,{x:Nr,y:Un,w:He,h:ze,radius:rs}):u.rect(Nr,Un,He,ze),u.fill(),0!==Vr&&u.stroke()}u.restore()}(x.x(Nr),rs,En),Nr=((_,l,o,a)=>_===(a?"left":"right")?o:"center"===_?(l+o)/2:l)(Vr,Nr+He+ne,Zi?Nr+Un:this.right,l.rtl),function(En,Ln,Xn){Ts(u,Xn.text,En,Ln+qe/2,U,{strikethrough:Xn.hidden,textAlign:x.textAlign(Xn.textAlign)})}(x.x(Nr),rs,En),Zi?Se.x+=Un+yt:Se.y+=mn}),xo(this.ctx,l.textDirection)}drawTitle(){const l=this.options,o=l.title,a=_r(o.font),u=Mo(o.padding);if(!o.display)return;const m=Kr(l.rtl,this.left,this.width),C=this.ctx,R=o.position,U=u.top+a.size/2;let tt,yt=this.left,Vt=this.width;if(this.isHorizontal())Vt=Math.max(...this.lineWidths),tt=this.top+U,yt=Bt(l.align,yt,this.right-Vt);else{const Se=this.columnSizes.reduce((He,ze)=>Math.max(He,ze.height),0);tt=U+Bt(l.align,this.top,this.bottom-Se-l.labels.padding-this._computeTitleHeight())}const ne=Bt(R,yt,yt+Vt);C.textAlign=m.textAlign(wt(R)),C.textBaseline="middle",C.strokeStyle=o.color,C.fillStyle=o.color,C.font=a.string,Ts(C,o.text,ne,tt,a)}_computeTitleHeight(){const l=this.options.title,o=_r(l.font),a=Mo(l.padding);return l.display?o.lineHeight+a.height:0}_getLegendItemAt(l,o){let a,u,m;if(Pi(l,this.left,this.right)&&Pi(o,this.top,this.bottom))for(m=this.legendHitBoxes,a=0;a<m.length;++a)if(u=m[a],Pi(l,u.left,u.left+u.width)&&Pi(o,u.top,u.top+u.height))return this.legendItems[a];return null}handleEvent(l){const o=this.options;if(!function(_,l){return!!("mousemove"===_&&(l.onHover||l.onLeave)||l.onClick&&("click"===_||"mouseup"===_))}(l.type,o))return;const a=this._getLegendItemAt(l.x,l.y);if("mousemove"===l.type){const u=this._hoveredItem,m=((_,l)=>null!==_&&null!==l&&_.datasetIndex===l.datasetIndex&&_.index===l.index)(u,a);u&&!m&&Zt(o.onLeave,[l,u,this],this),this._hoveredItem=a,a&&!m&&Zt(o.onHover,[l,a,this],this)}else a&&Zt(o.onClick,[l,a,this],this)}}var Gc={id:"legend",_element:ju,start(_,l,o){const a=_.legend=new ju({ctx:_.ctx,options:o,chart:_});fo.configure(_,a,o),fo.addBox(_,a)},stop(_){fo.removeBox(_,_.legend),delete _.legend},beforeUpdate(_,l,o){const a=_.legend;fo.configure(_,a,o),a.options=o},afterUpdate(_){const l=_.legend;l.buildLabels(),l.adjustHitBoxes()},afterEvent(_,l){l.replay||_.legend.handleEvent(l.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(_,l,o){const a=l.datasetIndex,u=o.chart;u.isDatasetVisible(a)?(u.hide(a),l.hidden=!0):(u.show(a),l.hidden=!1)},onHover:null,onLeave:null,labels:{color:_=>_.chart.options.color,boxWidth:40,padding:10,generateLabels(_){const l=_.data.datasets,{labels:{usePointStyle:o,pointStyle:a,textAlign:u,color:m}}=_.legend.options;return _._getSortedDatasetMetas().map(C=>{const R=C.controller.getStyle(o?0:void 0),x=Mo(R.borderWidth);return{text:l[C.index].label,fillStyle:R.backgroundColor,fontColor:m,hidden:!C.visible,lineCap:R.borderCapStyle,lineDash:R.borderDash,lineDashOffset:R.borderDashOffset,lineJoin:R.borderJoinStyle,lineWidth:(x.width+x.height)/4,strokeStyle:R.borderColor,pointStyle:a||R.pointStyle,rotation:R.rotation,textAlign:u||R.textAlign,borderRadius:0,datasetIndex:C.index}},this)}},title:{color:_=>_.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:_=>!_.startsWith("on"),labels:{_scriptable:_=>!["generateLabels","filter","sort"].includes(_)}}};class wc extends Ra{constructor(l){super(),this.chart=l.chart,this.options=l.options,this.ctx=l.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(l,o){const a=this.options;if(this.left=0,this.top=0,!a.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=l,this.height=this.bottom=o;const u=ft(a.text)?a.text.length:1;this._padding=Mo(a.padding);const m=u*_r(a.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=m:this.width=m}isHorizontal(){const l=this.options.position;return"top"===l||"bottom"===l}_drawArgs(l){const{top:o,left:a,bottom:u,right:m,options:C}=this,R=C.align;let U,tt,yt,x=0;return this.isHorizontal()?(tt=Bt(R,a,m),yt=o+l,U=m-a):("left"===C.position?(tt=a+l,yt=Bt(R,u,o),x=-.5*Yt):(tt=m-l,yt=Bt(R,o,u),x=.5*Yt),U=u-o),{titleX:tt,titleY:yt,maxWidth:U,rotation:x}}draw(){const l=this.ctx,o=this.options;if(!o.display)return;const a=_r(o.font),m=a.lineHeight/2+this._padding.top,{titleX:C,titleY:R,maxWidth:x,rotation:U}=this._drawArgs(m);Ts(l,o.text,0,0,a,{color:o.color,maxWidth:x,rotation:U,textAlign:wt(o.align),textBaseline:"middle",translation:[C,R]})}}var bh={id:"title",_element:wc,start(_,l,o){!function(_,l){const o=new wc({ctx:_.ctx,options:l,chart:_});fo.configure(_,o,l),fo.addBox(_,o),_.titleBlock=o}(_,o)},stop(_){fo.removeBox(_,_.titleBlock),delete _.titleBlock},beforeUpdate(_,l,o){const a=_.titleBlock;fo.configure(_,a,o),a.options=o},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const uu=new WeakMap;var Rc={id:"subtitle",start(_,l,o){const a=new wc({ctx:_.ctx,options:o,chart:_});fo.configure(_,a,o),fo.addBox(_,a),uu.set(_,a)},stop(_){fo.removeBox(_,uu.get(_)),uu.delete(_)},beforeUpdate(_,l,o){const a=uu.get(_);fo.configure(_,a,o),a.options=o},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Wc={average(_){if(!_.length)return!1;let l,o,a=0,u=0,m=0;for(l=0,o=_.length;l<o;++l){const C=_[l].element;if(C&&C.hasValue()){const R=C.tooltipPosition();a+=R.x,u+=R.y,++m}}return{x:a/m,y:u/m}},nearest(_,l){if(!_.length)return!1;let m,C,R,o=l.x,a=l.y,u=Number.POSITIVE_INFINITY;for(m=0,C=_.length;m<C;++m){const x=_[m].element;if(x&&x.hasValue()){const tt=Ii(l,x.getCenterPoint());tt<u&&(u=tt,R=x)}}if(R){const x=R.tooltipPosition();o=x.x,a=x.y}return{x:o,y:a}}};function rl(_,l){return l&&(ft(l)?Array.prototype.push.apply(_,l):_.push(l)),_}function rc(_){return("string"==typeof _||_ instanceof String)&&_.indexOf("\n")>-1?_.split("\n"):_}function fs(_,l){const{element:o,datasetIndex:a,index:u}=l,m=_.getDatasetMeta(a).controller,{label:C,value:R}=m.getLabelAndValue(u);return{chart:_,label:C,parsed:m.getParsed(u),raw:_.data.datasets[a].data[u],formattedValue:R,dataset:m.getDataset(),dataIndex:u,datasetIndex:a,element:o}}function Cu(_,l){const o=_._chart.ctx,{body:a,footer:u,title:m}=_,{boxWidth:C,boxHeight:R}=l,x=_r(l.bodyFont),U=_r(l.titleFont),tt=_r(l.footerFont),yt=m.length,Vt=u.length,ne=a.length,Se=Mo(l.padding);let He=Se.height,ze=0,qe=a.reduce((Zi,$i)=>Zi+$i.before.length+$i.lines.length+$i.after.length,0);qe+=_.beforeBody.length+_.afterBody.length,yt&&(He+=yt*U.lineHeight+(yt-1)*l.titleSpacing+l.titleMarginBottom),qe&&(He+=ne*(l.displayColors?Math.max(R,x.lineHeight):x.lineHeight)+(qe-ne)*x.lineHeight+(qe-1)*l.bodySpacing),Vt&&(He+=l.footerMarginTop+Vt*tt.lineHeight+(Vt-1)*l.footerSpacing);let Mi=0;const en=function(Zi){ze=Math.max(ze,o.measureText(Zi).width+Mi)};return o.save(),o.font=U.string,vt(_.title,en),o.font=x.string,vt(_.beforeBody.concat(_.afterBody),en),Mi=l.displayColors?C+2+l.boxPadding:0,vt(a,Zi=>{vt(Zi.before,en),vt(Zi.lines,en),vt(Zi.after,en)}),Mi=0,o.font=tt.string,vt(_.footer,en),o.restore(),ze+=Se.width,{width:ze,height:He}}function oc(_,l,o,a){const{x:u,width:m}=o,{width:C,chartArea:{left:R,right:x}}=_;let U="center";return"center"===a?U=u<=(R+x)/2?"left":"right":u<=m/2?U="left":u>=C-m/2&&(U="right"),function(_,l,o,a){const{x:u,width:m}=a,C=o.caretSize+o.caretPadding;if("left"===_&&u+m+C>l.width||"right"===_&&u-m-C<0)return!0}(U,_,l,o)&&(U="center"),U}function p(_,l,o){const a=l.yAlign||function(_,l){const{y:o,height:a}=l;return o<a/2?"top":o>_.height-a/2?"bottom":"center"}(_,o);return{xAlign:l.xAlign||oc(_,l,o,a),yAlign:a}}function I(_,l,o,a){const{caretSize:u,caretPadding:m,cornerRadius:C}=_,{xAlign:R,yAlign:x}=o,U=u+m,{topLeft:tt,topRight:yt,bottomLeft:Vt,bottomRight:ne}=No(C);let Se=function(_,l){let{x:o,width:a}=_;return"right"===l?o-=a:"center"===l&&(o-=a/2),o}(l,R);const He=function(_,l,o){let{y:a,height:u}=_;return"top"===l?a+=o:a-="bottom"===l?u+o:u/2,a}(l,x,U);return"center"===x?"left"===R?Se+=U:"right"===R&&(Se-=U):"left"===R?Se-=Math.max(tt,Vt)+u:"right"===R&&(Se+=Math.max(yt,ne)+u),{x:Qe(Se,0,a.width-l.width),y:Qe(He,0,a.height-l.height)}}function L(_,l,o){const a=Mo(o.padding);return"center"===l?_.x+_.width/2:"right"===l?_.x+_.width-a.right:_.x+a.left}function K(_){return rl([],rc(_))}function Rt(_,l){const o=l&&l.dataset&&l.dataset.tooltip&&l.dataset.tooltip.callbacks;return o?_.override(o):_}let Ht=(()=>{class _ extends Ra{constructor(o){super(),this.opacity=0,this._active=[],this._chart=o._chart,this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.options=o.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(o){this.options=o,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const o=this._cachedAnimations;if(o)return o;const a=this._chart,u=this.options.setContext(this.getContext()),m=u.enabled&&a.options.animation&&u.animations,C=new Do(this._chart,m);return m._cacheable&&(this._cachedAnimations=Object.freeze(C)),C}getContext(){return this.$context||(this.$context=function(_,l,o){return Po(_,{tooltip:l,tooltipItems:o,type:"tooltip"})}(this._chart.getContext(),this,this._tooltipItems))}getTitle(o,a){const{callbacks:u}=a,m=u.beforeTitle.apply(this,[o]),C=u.title.apply(this,[o]),R=u.afterTitle.apply(this,[o]);let x=[];return x=rl(x,rc(m)),x=rl(x,rc(C)),x=rl(x,rc(R)),x}getBeforeBody(o,a){return K(a.callbacks.beforeBody.apply(this,[o]))}getBody(o,a){const{callbacks:u}=a,m=[];return vt(o,C=>{const R={before:[],lines:[],after:[]},x=Rt(u,C);rl(R.before,rc(x.beforeLabel.call(this,C))),rl(R.lines,x.label.call(this,C)),rl(R.after,rc(x.afterLabel.call(this,C))),m.push(R)}),m}getAfterBody(o,a){return K(a.callbacks.afterBody.apply(this,[o]))}getFooter(o,a){const{callbacks:u}=a,m=u.beforeFooter.apply(this,[o]),C=u.footer.apply(this,[o]),R=u.afterFooter.apply(this,[o]);let x=[];return x=rl(x,rc(m)),x=rl(x,rc(C)),x=rl(x,rc(R)),x}_createItems(o){const a=this._active,u=this._chart.data,m=[],C=[],R=[];let U,tt,x=[];for(U=0,tt=a.length;U<tt;++U)x.push(fs(this._chart,a[U]));return o.filter&&(x=x.filter((yt,Vt,ne)=>o.filter(yt,Vt,ne,u))),o.itemSort&&(x=x.sort((yt,Vt)=>o.itemSort(yt,Vt,u))),vt(x,yt=>{const Vt=Rt(o.callbacks,yt);m.push(Vt.labelColor.call(this,yt)),C.push(Vt.labelPointStyle.call(this,yt)),R.push(Vt.labelTextColor.call(this,yt))}),this.labelColors=m,this.labelPointStyles=C,this.labelTextColors=R,this.dataPoints=x,x}update(o,a){const u=this.options.setContext(this.getContext()),m=this._active;let C,R=[];if(m.length){const x=Wc[u.position].call(this,m,this._eventPosition);R=this._createItems(u),this.title=this.getTitle(R,u),this.beforeBody=this.getBeforeBody(R,u),this.body=this.getBody(R,u),this.afterBody=this.getAfterBody(R,u),this.footer=this.getFooter(R,u);const U=this._size=Cu(this,u),tt=Object.assign({},x,U),yt=p(this._chart,u,tt),Vt=I(u,tt,yt,this._chart);this.xAlign=yt.xAlign,this.yAlign=yt.yAlign,C={opacity:1,x:Vt.x,y:Vt.y,width:U.width,height:U.height,caretX:x.x,caretY:x.y}}else 0!==this.opacity&&(C={opacity:0});this._tooltipItems=R,this.$context=void 0,C&&this._resolveAnimations().update(this,C),o&&u.external&&u.external.call(this,{chart:this._chart,tooltip:this,replay:a})}drawCaret(o,a,u,m){const C=this.getCaretPosition(o,u,m);a.lineTo(C.x1,C.y1),a.lineTo(C.x2,C.y2),a.lineTo(C.x3,C.y3)}getCaretPosition(o,a,u){const{xAlign:m,yAlign:C}=this,{caretSize:R,cornerRadius:x}=u,{topLeft:U,topRight:tt,bottomLeft:yt,bottomRight:Vt}=No(x),{x:ne,y:Se}=o,{width:He,height:ze}=a;let qe,Mi,en,Zi,$i,mn;return"center"===C?($i=Se+ze/2,"left"===m?(qe=ne,Mi=qe-R,Zi=$i+R,mn=$i-R):(qe=ne+He,Mi=qe+R,Zi=$i-R,mn=$i+R),en=qe):(Mi="left"===m?ne+Math.max(U,yt)+R:"right"===m?ne+He-Math.max(tt,Vt)-R:this.caretX,"top"===C?(Zi=Se,$i=Zi-R,qe=Mi-R,en=Mi+R):(Zi=Se+ze,$i=Zi+R,qe=Mi+R,en=Mi-R),mn=Zi),{x1:qe,x2:Mi,x3:en,y1:Zi,y2:$i,y3:mn}}drawTitle(o,a,u){const m=this.title,C=m.length;let R,x,U;if(C){const tt=Kr(u.rtl,this.x,this.width);for(o.x=L(this,u.titleAlign,u),a.textAlign=tt.textAlign(u.titleAlign),a.textBaseline="middle",R=_r(u.titleFont),x=u.titleSpacing,a.fillStyle=u.titleColor,a.font=R.string,U=0;U<C;++U)a.fillText(m[U],tt.x(o.x),o.y+R.lineHeight/2),o.y+=R.lineHeight+x,U+1===C&&(o.y+=u.titleMarginBottom-x)}}_drawColorBox(o,a,u,m,C){const R=this.labelColors[u],x=this.labelPointStyles[u],{boxHeight:U,boxWidth:tt,boxPadding:yt}=C,Vt=_r(C.bodyFont),ne=L(this,"left",C),Se=m.x(ne),ze=a.y+(U<Vt.lineHeight?(Vt.lineHeight-U)/2:0);if(C.usePointStyle){const qe={radius:Math.min(tt,U)/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:1},Mi=m.leftForLtr(Se,tt)+tt/2,en=ze+U/2;o.strokeStyle=C.multiKeyBackground,o.fillStyle=C.multiKeyBackground,Zs(o,qe,Mi,en),o.strokeStyle=R.borderColor,o.fillStyle=R.backgroundColor,Zs(o,qe,Mi,en)}else{o.lineWidth=R.borderWidth||1,o.strokeStyle=R.borderColor,o.setLineDash(R.borderDash||[]),o.lineDashOffset=R.borderDashOffset||0;const qe=m.leftForLtr(Se,tt-yt),Mi=m.leftForLtr(m.xPlus(Se,1),tt-yt-2),en=No(R.borderRadius);Object.values(en).some(Zi=>0!==Zi)?(o.beginPath(),o.fillStyle=C.multiKeyBackground,Aa(o,{x:qe,y:ze,w:tt,h:U,radius:en}),o.fill(),o.stroke(),o.fillStyle=R.backgroundColor,o.beginPath(),Aa(o,{x:Mi,y:ze+1,w:tt-2,h:U-2,radius:en}),o.fill()):(o.fillStyle=C.multiKeyBackground,o.fillRect(qe,ze,tt,U),o.strokeRect(qe,ze,tt,U),o.fillStyle=R.backgroundColor,o.fillRect(Mi,ze+1,tt-2,U-2))}o.fillStyle=this.labelTextColors[u]}drawBody(o,a,u){const{body:m}=this,{bodySpacing:C,bodyAlign:R,displayColors:x,boxHeight:U,boxWidth:tt,boxPadding:yt}=u,Vt=_r(u.bodyFont);let ne=Vt.lineHeight,Se=0;const He=Kr(u.rtl,this.x,this.width),ze=function(Xn){a.fillText(Xn,He.x(o.x+Se),o.y+ne/2),o.y+=ne+C},qe=He.textAlign(R);let Mi,en,Zi,$i,mn,En,Ln;for(a.textAlign=R,a.textBaseline="middle",a.font=Vt.string,o.x=L(this,qe,u),a.fillStyle=u.bodyColor,vt(this.beforeBody,ze),Se=x&&"right"!==qe?"center"===R?tt/2+yt:tt+2+yt:0,$i=0,En=m.length;$i<En;++$i){for(Mi=m[$i],en=this.labelTextColors[$i],a.fillStyle=en,vt(Mi.before,ze),Zi=Mi.lines,x&&Zi.length&&(this._drawColorBox(a,o,$i,He,u),ne=Math.max(Vt.lineHeight,U)),mn=0,Ln=Zi.length;mn<Ln;++mn)ze(Zi[mn]),ne=Vt.lineHeight;vt(Mi.after,ze)}Se=0,ne=Vt.lineHeight,vt(this.afterBody,ze),o.y-=C}drawFooter(o,a,u){const m=this.footer,C=m.length;let R,x;if(C){const U=Kr(u.rtl,this.x,this.width);for(o.x=L(this,u.footerAlign,u),o.y+=u.footerMarginTop,a.textAlign=U.textAlign(u.footerAlign),a.textBaseline="middle",R=_r(u.footerFont),a.fillStyle=u.footerColor,a.font=R.string,x=0;x<C;++x)a.fillText(m[x],U.x(o.x),o.y+R.lineHeight/2),o.y+=R.lineHeight+u.footerSpacing}}drawBackground(o,a,u,m){const{xAlign:C,yAlign:R}=this,{x,y:U}=o,{width:tt,height:yt}=u,{topLeft:Vt,topRight:ne,bottomLeft:Se,bottomRight:He}=No(m.cornerRadius);a.fillStyle=m.backgroundColor,a.strokeStyle=m.borderColor,a.lineWidth=m.borderWidth,a.beginPath(),a.moveTo(x+Vt,U),"top"===R&&this.drawCaret(o,a,u,m),a.lineTo(x+tt-ne,U),a.quadraticCurveTo(x+tt,U,x+tt,U+ne),"center"===R&&"right"===C&&this.drawCaret(o,a,u,m),a.lineTo(x+tt,U+yt-He),a.quadraticCurveTo(x+tt,U+yt,x+tt-He,U+yt),"bottom"===R&&this.drawCaret(o,a,u,m),a.lineTo(x+Se,U+yt),a.quadraticCurveTo(x,U+yt,x,U+yt-Se),"center"===R&&"left"===C&&this.drawCaret(o,a,u,m),a.lineTo(x,U+Vt),a.quadraticCurveTo(x,U,x+Vt,U),a.closePath(),a.fill(),m.borderWidth>0&&a.stroke()}_updateAnimationTarget(o){const a=this._chart,u=this.$animations,m=u&&u.x,C=u&&u.y;if(m||C){const R=Wc[o.position].call(this,this._active,this._eventPosition);if(!R)return;const x=this._size=Cu(this,o),U=Object.assign({},R,this._size),tt=p(a,o,U),yt=I(o,U,tt,a);(m._to!==yt.x||C._to!==yt.y)&&(this.xAlign=tt.xAlign,this.yAlign=tt.yAlign,this.width=x.width,this.height=x.height,this.caretX=R.x,this.caretY=R.y,this._resolveAnimations().update(this,yt))}}draw(o){const a=this.options.setContext(this.getContext());let u=this.opacity;if(!u)return;this._updateAnimationTarget(a);const m={width:this.width,height:this.height},C={x:this.x,y:this.y};u=Math.abs(u)<.001?0:u;const R=Mo(a.padding);a.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(o.save(),o.globalAlpha=u,this.drawBackground(C,o,m,a),$o(o,a.textDirection),C.y+=R.top,this.drawTitle(C,o,a),this.drawBody(C,o,a),this.drawFooter(C,o,a),xo(o,a.textDirection),o.restore())}getActiveElements(){return this._active||[]}setActiveElements(o,a){const u=this._active,m=o.map(({datasetIndex:x,index:U})=>{const tt=this._chart.getDatasetMeta(x);if(!tt)throw new Error("Cannot find a dataset at index "+x);return{datasetIndex:x,element:tt.data[U],index:U}}),C=!At(u,m),R=this._positionChanged(m,a);(C||R)&&(this._active=m,this._eventPosition=a,this.update(!0))}handleEvent(o,a){const u=this.options,m=this._active||[];let C=!1,R=[];"mouseout"!==o.type&&(R=this._chart.getElementsAtEventForMode(o,u.mode,u,a),u.reverse&&R.reverse());const x=this._positionChanged(R,o);return C=a||!At(R,m)||x,C&&(this._active=R,(u.enabled||u.external)&&(this._eventPosition={x:o.x,y:o.y},this.update(!0,a))),C}_positionChanged(o,a){const{caretX:u,caretY:m,options:C}=this,R=Wc[C.position].call(this,o,a);return!1!==R&&(u!==R.x||m!==R.y)}}return _.positioners=Wc,_})();var xe=Object.freeze({__proto__:null,Decimation:Dh,Filler:xh,Legend:Gc,SubTitle:Rc,Title:bh,Tooltip:{id:"tooltip",_element:Ht,positioners:Wc,afterInit(_,l,o){o&&(_.tooltip=new Ht({_chart:_,options:o}))},beforeUpdate(_,l,o){_.tooltip&&_.tooltip.initialize(o)},reset(_,l,o){_.tooltip&&_.tooltip.initialize(o)},afterDraw(_){const l=_.tooltip,o={tooltip:l};!1!==_.notifyPlugins("beforeTooltipDraw",o)&&(l&&l.draw(_.ctx),_.notifyPlugins("afterTooltipDraw",o))},afterEvent(_,l){_.tooltip&&_.tooltip.handleEvent(l.event,l.replay)&&(l.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(_,l)=>l.bodyFont.size,boxWidth:(_,l)=>l.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:It,title(_){if(_.length>0){const l=_[0],o=l.chart.data.labels,a=o?o.length:0;if(this&&this.options&&"dataset"===this.options.mode)return l.dataset.label||"";if(l.label)return l.label;if(a>0&&l.dataIndex<a)return o[l.dataIndex]}return""},afterTitle:It,beforeBody:It,beforeLabel:It,label(_){if(this&&this.options&&"dataset"===this.options.mode)return _.label+": "+_.formattedValue||_.formattedValue;let l=_.dataset.label||"";l&&(l+=": ");const o=_.formattedValue;return lt(o)||(l+=o),l},labelColor(_){const o=_.chart.getDatasetMeta(_.datasetIndex).controller.getStyle(_.dataIndex);return{borderColor:o.borderColor,backgroundColor:o.backgroundColor,borderWidth:o.borderWidth,borderDash:o.borderDash,borderDashOffset:o.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(_){const o=_.chart.getDatasetMeta(_.datasetIndex).controller.getStyle(_.dataIndex);return{pointStyle:o.pointStyle,rotation:o.rotation}},afterLabel:It,afterBody:It,beforeFooter:It,footer:It,afterFooter:It}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:_=>"filter"!==_&&"itemSort"!==_&&"external"!==_,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class ki extends tl{constructor(l){super(l),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(l){const o=this._addedLabels;if(o.length){const a=this.getLabels();for(const{index:u,label:m}of o)a[u]===m&&a.splice(u,1);this._addedLabels=[]}super.init(l)}parse(l,o){if(lt(l))return null;const a=this.getLabels();return((_,l)=>null===_?null:Qe(Math.round(_),0,l))(o=isFinite(o)&&a[o]===l?o:function(_,l,o,a){const u=_.indexOf(l);return-1===u?((_,l,o,a)=>("string"==typeof l?(o=_.push(l)-1,a.unshift({index:o,label:l})):isNaN(l)&&(o=null),o))(_,l,o,a):u!==_.lastIndexOf(l)?o:u}(a,l,ot(o,l),this._addedLabels),a.length-1)}determineDataLimits(){const{minDefined:l,maxDefined:o}=this.getUserBounds();let{min:a,max:u}=this.getMinMax(!0);"ticks"===this.options.bounds&&(l||(a=0),o||(u=this.getLabels().length-1)),this.min=a,this.max=u}buildTicks(){const l=this.min,o=this.max,a=this.options.offset,u=[];let m=this.getLabels();m=0===l&&o===m.length-1?m:m.slice(l,o+1),this._valueRange=Math.max(m.length-(a?0:1),1),this._startValue=this.min-(a?.5:0);for(let C=l;C<=o;C++)u.push({value:C});return u}getLabelForValue(l){const o=this.getLabels();return l>=0&&l<o.length?o[l]:l}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(l){return"number"!=typeof l&&(l=this.parse(l)),null===l?NaN:this.getPixelForDecimal((l-this._startValue)/this._valueRange)}getPixelForTick(l){const o=this.ticks;return l<0||l>o.length-1?null:this.getPixelForValue(o[l].value)}getValueForPixel(l){return Math.round(this._startValue+this.getDecimalForPixel(l)*this._valueRange)}getBasePixel(){return this.bottom}}function Qi(_,l,{horizontal:o,minRotation:a}){const u=mi(a),m=(o?Math.sin(u):Math.cos(u))||.001;return Math.min(l/m,.75*l*(""+_).length)}ki.id="category",ki.defaults={ticks:{callback:ki.prototype.getLabelForValue}};class hn extends tl{constructor(l){super(l),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(l,o){return lt(l)||("number"==typeof l||l instanceof Number)&&!isFinite(+l)?null:+l}handleTickRangeOptions(){const{beginAtZero:l}=this.options,{minDefined:o,maxDefined:a}=this.getUserBounds();let{min:u,max:m}=this;const C=x=>u=o?u:x,R=x=>m=a?m:x;if(l){const x=be(u),U=be(m);x<0&&U<0?R(0):x>0&&U>0&&C(0)}if(u===m){let x=1;(m>=Number.MAX_SAFE_INTEGER||u<=Number.MIN_SAFE_INTEGER)&&(x=Math.abs(.05*m)),R(m+x),l||C(u-x)}this.min=u,this.max=m}getTickLimit(){const l=this.options.ticks;let u,{maxTicksLimit:o,stepSize:a}=l;return a?(u=Math.ceil(this.max/a)-Math.floor(this.min/a)+1,u>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${a} would result generating up to ${u} ticks. Limiting to 1000.`),u=1e3)):(u=this.computeTickLimit(),o=o||11),o&&(u=Math.min(o,u)),u}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const l=this.options,o=l.ticks;let a=this.getTickLimit();a=Math.max(2,a);const C=function(_,l){const o=[],{bounds:u,step:m,min:C,max:R,precision:x,count:U,maxTicks:tt,maxDigits:yt,includeBounds:Vt}=_,ne=m||1,Se=tt-1,{min:He,max:ze}=l,qe=!lt(C),Mi=!lt(R),en=!lt(U),Zi=(ze-He)/(yt+1);let mn,En,Ln,Xn,$i=Dt((ze-He)/Se/ne)*ne;if($i<1e-14&&!qe&&!Mi)return[{value:He},{value:ze}];Xn=Math.ceil(ze/$i)-Math.floor(He/$i),Xn>Se&&($i=Dt(Xn*$i/Se/ne)*ne),lt(x)||(mn=Math.pow(10,x),$i=Math.ceil($i*mn)/mn),"ticks"===u?(En=Math.floor(He/$i)*$i,Ln=Math.ceil(ze/$i)*$i):(En=He,Ln=ze),qe&&Mi&&m&&function(_,l){const o=Math.round(_);return o-l<=_&&o+l>=_}((R-C)/m,$i/1e3)?(Xn=Math.round(Math.min((R-C)/$i,tt)),$i=(R-C)/Xn,En=C,Ln=R):en?(En=qe?C:En,Ln=Mi?R:Ln,Xn=U-1,$i=(Ln-En)/Xn):(Xn=(Ln-En)/$i,Xn=Xe(Xn,Math.round(Xn),$i/1e3)?Math.round(Xn):Math.ceil(Xn));const Vr=Math.max(li($i),li(En));mn=Math.pow(10,lt(x)?Vr:x),En=Math.round(En*mn)/mn,Ln=Math.round(Ln*mn)/mn;let Un=0;for(qe&&(Vt&&En!==C?(o.push({value:C}),En<C&&Un++,Xe(Math.round((En+Un*$i)*mn)/mn,C,Qi(C,Zi,_))&&Un++):En<C&&Un++);Un<Xn;++Un)o.push({value:Math.round((En+Un*$i)*mn)/mn});return Mi&&Vt&&Ln!==R?o.length&&Xe(o[o.length-1].value,R,Qi(R,Zi,_))?o[o.length-1].value=R:o.push({value:R}):(!Mi||Ln===R)&&o.push({value:Ln}),o}({maxTicks:a,bounds:l.bounds,min:l.min,max:l.max,precision:o.precision,step:o.stepSize,count:o.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:o.minRotation||0,includeBounds:!1!==o.includeBounds},this._range||this);return"ticks"===l.bounds&&bi(C,this,"value"),l.reverse?(C.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),C}configure(){const l=this.ticks;let o=this.min,a=this.max;if(super.configure(),this.options.offset&&l.length){const u=(a-o)/Math.max(l.length-1,1)/2;o-=u,a+=u}this._startValue=o,this._endValue=a,this._valueRange=a-o}getLabelForValue(l){return Fn(l,this.chart.options.locale,this.options.ticks.format)}}class vn extends hn{determineDataLimits(){const{min:l,max:o}=this.getMinMax(!0);this.min=Gt(l)?l:0,this.max=Gt(o)?o:1,this.handleTickRangeOptions()}computeTickLimit(){const l=this.isHorizontal(),o=l?this.width:this.height,a=mi(this.options.ticks.minRotation),u=(l?Math.sin(a):Math.cos(a))||.001,m=this._resolveTickFontOptions(0);return Math.ceil(o/Math.min(40,m.lineHeight/u))}getPixelForValue(l){return null===l?NaN:this.getPixelForDecimal((l-this._startValue)/this._valueRange)}getValueForPixel(l){return this._startValue+this.getDecimalForPixel(l)*this._valueRange}}function un(_){return _/Math.pow(10,Math.floor(_e(_)))==1}vn.id="linear",vn.defaults={ticks:{callback:Eo.formatters.numeric}};class Bn extends tl{constructor(l){super(l),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(l,o){const a=hn.prototype.parse.apply(this,[l,o]);if(0!==a)return Gt(a)&&a>0?a:null;this._zero=!0}determineDataLimits(){const{min:l,max:o}=this.getMinMax(!0);this.min=Gt(l)?Math.max(0,l):null,this.max=Gt(o)?Math.max(0,o):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:l,maxDefined:o}=this.getUserBounds();let a=this.min,u=this.max;const m=x=>a=l?a:x,C=x=>u=o?u:x,R=(x,U)=>Math.pow(10,Math.floor(_e(x))+U);a===u&&(a<=0?(m(1),C(10)):(m(R(a,-1)),C(R(u,1)))),a<=0&&m(R(u,-1)),u<=0&&C(R(a,1)),this._zero&&this.min!==this._suggestedMin&&a===R(this.min,0)&&m(R(a,-1)),this.min=a,this.max=u}buildTicks(){const l=this.options,a=function(_,l){const o=Math.floor(_e(l.max)),a=Math.ceil(l.max/Math.pow(10,o)),u=[];let m=ut(_.min,Math.pow(10,Math.floor(_e(l.min)))),C=Math.floor(_e(m)),R=Math.floor(m/Math.pow(10,C)),x=C<0?Math.pow(10,Math.abs(C)):1;do{u.push({value:m,major:un(m)}),++R,10===R&&(R=1,++C,x=C>=0?1:x),m=Math.round(R*Math.pow(10,C)*x)/x}while(C<o||C===o&&R<a);const U=ut(_.max,m);return u.push({value:U,major:un(m)}),u}({min:this._userMin,max:this._userMax},this);return"ticks"===l.bounds&&bi(a,this,"value"),l.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}getLabelForValue(l){return void 0===l?"0":Fn(l,this.chart.options.locale,this.options.ticks.format)}configure(){const l=this.min;super.configure(),this._startValue=_e(l),this._valueRange=_e(this.max)-_e(l)}getPixelForValue(l){return(void 0===l||0===l)&&(l=this.min),null===l||isNaN(l)?NaN:this.getPixelForDecimal(l===this.min?0:(_e(l)-this._startValue)/this._valueRange)}getValueForPixel(l){const o=this.getDecimalForPixel(l);return Math.pow(10,this._startValue+o*this._valueRange)}}function zn(_){const l=_.ticks;if(l.display&&_.display){const o=Mo(l.backdropPadding);return ot(l.font&&l.font.size,tr.font.size)+o.height}return 0}function hr(_,l,o){return o=ft(o)?o:[o],{w:sl(_,l.string,o),h:o.length*l.lineHeight}}function eo(_,l,o,a,u){return _===a||_===u?{start:l-o/2,end:l+o/2}:_<a||_>u?{start:l-o,end:l}:{start:l,end:l+o}}function ja(_){return 0===_||180===_?"center":_<180?"left":"right"}function Ya(_,l,o){return"right"===o?_-=l:"center"===o&&(_-=l/2),_}function Ls(_,l,o){return 90===o||270===o?_-=l/2:(o>270||o<90)&&(_-=l),_}function Ns(_,l,o,a){const{ctx:u}=_;if(o)u.arc(_.xCenter,_.yCenter,l,0,ye);else{let m=_.getPointPosition(0,l);u.moveTo(m.x,m.y);for(let C=1;C<a;C++)m=_.getPointPosition(C,l),u.lineTo(m.x,m.y)}}function S(_){return Ge(_)?_:0}Bn.id="logarithmic",Bn.defaults={ticks:{callback:Eo.formatters.logarithmic,major:{enabled:!0}}};class Y extends hn{constructor(l){super(l),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){this.width=this.maxWidth,this.height=this.maxHeight,this.paddingTop=zn(this.options)/2,this.xCenter=Math.floor(this.width/2),this.yCenter=Math.floor((this.height-this.paddingTop)/2),this.drawingArea=Math.min(this.height-this.paddingTop,this.width)/2}determineDataLimits(){const{min:l,max:o}=this.getMinMax(!1);this.min=Gt(l)&&!isNaN(l)?l:0,this.max=Gt(o)&&!isNaN(o)?o:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/zn(this.options))}generateTickLabels(l){hn.prototype.generateTickLabels.call(this,l),this._pointLabels=this.getLabels().map((o,a)=>{const u=Zt(this.options.pointLabels.callback,[o,a],this);return u||0===u?u:""})}fit(){const l=this.options;l.display&&l.pointLabels.display?function(_){const l={l:0,r:_.width,t:0,b:_.height-_.paddingTop},o={},a=[],u=[],m=_.getLabels().length;for(let C=0;C<m;C++){const R=_.options.pointLabels.setContext(_.getPointLabelContext(C));u[C]=R.padding;const x=_.getPointPosition(C,_.drawingArea+u[C]),U=_r(R.font),tt=hr(_.ctx,U,_._pointLabels[C]);a[C]=tt;const yt=_.getIndexAngle(C),Vt=on(yt),ne=eo(Vt,x.x,tt.w,0,180),Se=eo(Vt,x.y,tt.h,90,270);ne.start<l.l&&(l.l=ne.start,o.l=yt),ne.end>l.r&&(l.r=ne.end,o.r=yt),Se.start<l.t&&(l.t=Se.start,o.t=yt),Se.end>l.b&&(l.b=Se.end,o.b=yt)}_._setReductions(_.drawingArea,l,o),_._pointLabelItems=function(_,l,o){const a=[],u=_.getLabels().length,m=_.options,C=zn(m),R=_.getDistanceFromCenterForValue(m.ticks.reverse?_.min:_.max);for(let x=0;x<u;x++){const tt=_.getPointPosition(x,R+(0===x?C/2:0)+o[x]),yt=on(_.getIndexAngle(x)),Vt=l[x],ne=Ls(tt.y,Vt.h,yt),Se=ja(yt),He=Ya(tt.x,Vt.w,Se);a.push({x:tt.x,y:ne,textAlign:Se,left:He,top:ne,right:He+Vt.w,bottom:ne+Vt.h})}return a}(_,a,u)}(this):this.setCenterPoint(0,0,0,0)}_setReductions(l,o,a){let u=o.l/Math.sin(a.l),m=Math.max(o.r-this.width,0)/Math.sin(a.r),C=-o.t/Math.cos(a.t),R=-Math.max(o.b-(this.height-this.paddingTop),0)/Math.cos(a.b);u=S(u),m=S(m),C=S(C),R=S(R),this.drawingArea=Math.max(l/2,Math.min(Math.floor(l-(u+m)/2),Math.floor(l-(C+R)/2))),this.setCenterPoint(u,m,C,R)}setCenterPoint(l,o,a,u){const R=a+this.drawingArea,x=this.height-this.paddingTop-u-this.drawingArea;this.xCenter=Math.floor((l+this.drawingArea+(this.width-o-this.drawingArea))/2+this.left),this.yCenter=Math.floor((R+x)/2+this.top+this.paddingTop)}getIndexAngle(l){return vi(l*(ye/this.getLabels().length)+mi(this.options.startAngle||0))}getDistanceFromCenterForValue(l){if(lt(l))return NaN;const o=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-l)*o:(l-this.min)*o}getValueForDistanceFromCenter(l){if(lt(l))return NaN;const o=l/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-o:this.min+o}getPointLabelContext(l){const o=this._pointLabels||[];if(l>=0&&l<o.length){const a=o[l];return function(_,l,o){return Po(_,{label:o,index:l,type:"pointLabel"})}(this.getContext(),l,a)}}getPointPosition(l,o){const a=this.getIndexAngle(l)-te;return{x:Math.cos(a)*o+this.xCenter,y:Math.sin(a)*o+this.yCenter,angle:a}}getPointPositionForValue(l,o){return this.getPointPosition(l,this.getDistanceFromCenterForValue(o))}getBasePosition(l){return this.getPointPositionForValue(l||0,this.getBaseValue())}getPointLabelPosition(l){const{left:o,top:a,right:u,bottom:m}=this._pointLabelItems[l];return{left:o,top:a,right:u,bottom:m}}drawBackground(){const{backgroundColor:l,grid:{circular:o}}=this.options;if(l){const a=this.ctx;a.save(),a.beginPath(),Ns(this,this.getDistanceFromCenterForValue(this._endValue),o,this.getLabels().length),a.closePath(),a.fillStyle=l,a.fill(),a.restore()}}drawGrid(){const l=this.ctx,o=this.options,{angleLines:a,grid:u}=o,m=this.getLabels().length;let C,R,x;if(o.pointLabels.display&&function(_,l){const{ctx:o,options:{pointLabels:a}}=_;for(let u=l-1;u>=0;u--){const m=a.setContext(_.getPointLabelContext(u)),C=_r(m.font),{x:R,y:x,textAlign:U,left:tt,top:yt,right:Vt,bottom:ne}=_._pointLabelItems[u],{backdropColor:Se}=m;if(!lt(Se)){const He=Mo(m.backdropPadding);o.fillStyle=Se,o.fillRect(tt-He.left,yt-He.top,Vt-tt+He.width,ne-yt+He.height)}Ts(o,_._pointLabels[u],R,x+C.lineHeight/2,C,{color:m.color,textAlign:U,textBaseline:"middle"})}}(this,m),u.display&&this.ticks.forEach((U,tt)=>{0!==tt&&(R=this.getDistanceFromCenterForValue(U.value),function(_,l,o,a){const u=_.ctx,m=l.circular,{color:C,lineWidth:R}=l;!m&&!a||!C||!R||o<0||(u.save(),u.strokeStyle=C,u.lineWidth=R,u.setLineDash(l.borderDash),u.lineDashOffset=l.borderDashOffset,u.beginPath(),Ns(_,o,m,a),u.closePath(),u.stroke(),u.restore())}(this,u.setContext(this.getContext(tt-1)),R,m))}),a.display){for(l.save(),C=this.getLabels().length-1;C>=0;C--){const U=a.setContext(this.getPointLabelContext(C)),{color:tt,lineWidth:yt}=U;!yt||!tt||(l.lineWidth=yt,l.strokeStyle=tt,l.setLineDash(U.borderDash),l.lineDashOffset=U.borderDashOffset,R=this.getDistanceFromCenterForValue(o.ticks.reverse?this.min:this.max),x=this.getPointPosition(C,R),l.beginPath(),l.moveTo(this.xCenter,this.yCenter),l.lineTo(x.x,x.y),l.stroke())}l.restore()}}drawBorder(){}drawLabels(){const l=this.ctx,o=this.options,a=o.ticks;if(!a.display)return;const u=this.getIndexAngle(0);let m,C;l.save(),l.translate(this.xCenter,this.yCenter),l.rotate(u),l.textAlign="center",l.textBaseline="middle",this.ticks.forEach((R,x)=>{if(0===x&&!o.reverse)return;const U=a.setContext(this.getContext(x)),tt=_r(U.font);if(m=this.getDistanceFromCenterForValue(this.ticks[x].value),U.showLabelBackdrop){l.font=tt.string,C=l.measureText(R.label).width,l.fillStyle=U.backdropColor;const yt=Mo(U.backdropPadding);l.fillRect(-C/2-yt.left,-m-tt.size/2-yt.top,C+yt.width,tt.size+yt.height)}Ts(l,R.label,0,-m,tt,{color:U.color})}),l.restore()}drawTitle(){}}Y.id="radialLinear",Y.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Eo.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:_=>_,padding:5}},Y.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Y.descriptors={angleLines:{_fallback:"grid"}};const rt={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_t=Object.keys(rt);function Xt(_,l){return _-l}function Jt(_,l){if(lt(l))return null;const o=_._adapter,{parser:a,round:u,isoWeekday:m}=_._parseOpts;let C=l;return"function"==typeof a&&(C=a(C)),Gt(C)||(C="string"==typeof a?o.parse(C,a):o.parse(C)),null===C?null:(u&&(C="week"!==u||!Ge(m)&&!0!==m?o.startOf(C,u):o.startOf(C,"isoWeek",m)),+C)}function he(_,l,o,a){const u=_t.length;for(let m=_t.indexOf(_);m<u-1;++m){const C=rt[_t[m]],R=C.steps?C.steps:Number.MAX_SAFE_INTEGER;if(C.common&&Math.ceil((o-l)/(R*C.size))<=a)return _t[m]}return _t[u-1]}function ri(_,l,o){if(o){if(o.length){const{lo:a,hi:u}=Vs(o,l);_[o[a]>=l?o[a]:o[u]]=!0}}else _[l]=!0}function gi(_,l,o){const a=[],u={},m=l.length;let C,R;for(C=0;C<m;++C)R=l[C],u[R]=C,a.push({value:R,major:!1});return 0!==m&&o?function(_,l,o,a){const u=_._adapter,m=+u.startOf(l[0].value,a),C=l[l.length-1].value;let R,x;for(R=m;R<=C;R=+u.add(R,1,a))x=o[R],x>=0&&(l[x].major=!0);return l}(_,a,u,o):a}let wi=(()=>{class _ extends tl{constructor(o){super(o),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(o,a){const u=o.time||(o.time={}),m=this._adapter=new Tl._date(o.adapters.date);Re(u.displayFormats,m.formats()),this._parseOpts={parser:u.parser,round:u.round,isoWeekday:u.isoWeekday},super.init(o),this._normalized=a.normalized}parse(o,a){return void 0===o?null:Jt(this,o)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const o=this.options,a=this._adapter,u=o.time.unit||"day";let{min:m,max:C,minDefined:R,maxDefined:x}=this.getUserBounds();function U(tt){!R&&!isNaN(tt.min)&&(m=Math.min(m,tt.min)),!x&&!isNaN(tt.max)&&(C=Math.max(C,tt.max))}(!R||!x)&&(U(this._getLabelBounds()),("ticks"!==o.bounds||"labels"!==o.ticks.source)&&U(this.getMinMax(!1))),m=Gt(m)&&!isNaN(m)?m:+a.startOf(Date.now(),u),C=Gt(C)&&!isNaN(C)?C:+a.endOf(Date.now(),u)+1,this.min=Math.min(m,C-1),this.max=Math.max(m+1,C)}_getLabelBounds(){const o=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;return o.length&&(a=o[0],u=o[o.length-1]),{min:a,max:u}}buildTicks(){const o=this.options,a=o.time,u=o.ticks,m="labels"===u.source?this.getLabelTimestamps():this._generate();"ticks"===o.bounds&&m.length&&(this.min=this._userMin||m[0],this.max=this._userMax||m[m.length-1]);const C=this.min,x=function(_,l,o){let a=0,u=_.length;for(;a<u&&_[a]<l;)a++;for(;u>a&&_[u-1]>o;)u--;return a>0||u<_.length?_.slice(a,u):_}(m,C,this.max);return this._unit=a.unit||(u.autoSkip?he(a.minUnit,this.min,this.max,this._getLabelCapacity(C)):function(_,l,o,a,u){for(let m=_t.length-1;m>=_t.indexOf(o);m--){const C=_t[m];if(rt[C].common&&_._adapter.diff(u,a,C)>=l-1)return C}return _t[o?_t.indexOf(o):0]}(this,x.length,a.minUnit,this.min,this.max)),this._majorUnit=u.major.enabled&&"year"!==this._unit?function(_){for(let l=_t.indexOf(_)+1,o=_t.length;l<o;++l)if(rt[_t[l]].common)return _t[l]}(this._unit):void 0,this.initOffsets(m),o.reverse&&x.reverse(),gi(this,x,this._majorUnit)}initOffsets(o){let m,C,a=0,u=0;this.options.offset&&o.length&&(m=this.getDecimalForValue(o[0]),a=1===o.length?1-m:(this.getDecimalForValue(o[1])-m)/2,C=this.getDecimalForValue(o[o.length-1]),u=1===o.length?C:(C-this.getDecimalForValue(o[o.length-2]))/2);const R=o.length<3?.5:.25;a=Qe(a,0,R),u=Qe(u,0,R),this._offsets={start:a,end:u,factor:1/(a+1+u)}}_generate(){const o=this._adapter,a=this.min,u=this.max,m=this.options,C=m.time,R=C.unit||he(C.minUnit,a,u,this._getLabelCapacity(a)),x=ot(C.stepSize,1),U="week"===R&&C.isoWeekday,tt=Ge(U)||!0===U,yt={};let ne,Se,Vt=a;if(tt&&(Vt=+o.startOf(Vt,"isoWeek",U)),Vt=+o.startOf(Vt,tt?"day":R),o.diff(u,a,R)>1e5*x)throw new Error(a+" and "+u+" are too far apart with stepSize of "+x+" "+R);const He="data"===m.ticks.source&&this.getDataTimestamps();for(ne=Vt,Se=0;ne<u;ne=+o.add(ne,x,R),Se++)ri(yt,ne,He);return(ne===u||"ticks"===m.bounds||1===Se)&&ri(yt,ne,He),Object.keys(yt).sort((ze,qe)=>ze-qe).map(ze=>+ze)}getLabelForValue(o){const u=this.options.time;return this._adapter.format(o,u.tooltipFormat?u.tooltipFormat:u.displayFormats.datetime)}_tickFormatFunction(o,a,u,m){const C=this.options,R=C.time.displayFormats,x=this._unit,U=this._majorUnit,yt=U&&R[U],Vt=u[a],Se=this._adapter.format(o,m||(U&&yt&&Vt&&Vt.major?yt:x&&R[x])),He=C.ticks.callback;return He?Zt(He,[Se,a,u],this):Se}generateTickLabels(o){let a,u,m;for(a=0,u=o.length;a<u;++a)m=o[a],m.label=this._tickFormatFunction(m.value,a,o)}getDecimalForValue(o){return null===o?NaN:(o-this.min)/(this.max-this.min)}getPixelForValue(o){const a=this._offsets,u=this.getDecimalForValue(o);return this.getPixelForDecimal((a.start+u)*a.factor)}getValueForPixel(o){const a=this._offsets,u=this.getDecimalForPixel(o)/a.factor-a.end;return this.min+u*(this.max-this.min)}_getLabelSize(o){const a=this.options.ticks,u=this.ctx.measureText(o).width,m=mi(this.isHorizontal()?a.maxRotation:a.minRotation),C=Math.cos(m),R=Math.sin(m),x=this._resolveTickFontOptions(0).size;return{w:u*C+x*R,h:u*R+x*C}}_getLabelCapacity(o){const a=this.options.time,u=a.displayFormats,m=u[a.unit]||u.millisecond,C=this._tickFormatFunction(o,0,gi(this,[o],this._majorUnit),m),R=this._getLabelSize(C),x=Math.floor(this.isHorizontal()?this.width/R.w:this.height/R.h)-1;return x>0?x:1}getDataTimestamps(){let a,u,o=this._cache.data||[];if(o.length)return o;const m=this.getMatchingVisibleMetas();if(this._normalized&&m.length)return this._cache.data=m[0].controller.getAllParsedValues(this);for(a=0,u=m.length;a<u;++a)o=o.concat(m[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(o)}getLabelTimestamps(){const o=this._cache.labels||[];let a,u;if(o.length)return o;const m=this.getLabels();for(a=0,u=m.length;a<u;++a)o.push(Jt(this,m[a]));return this._cache.labels=this._normalized?o:this.normalize(o)}normalize(o){return ea(o.sort(Xt))}}return _.id="time",_.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},_})();function Wi(_,l,o){let m,C,R,x,a=0,u=_.length-1;o?(l>=_[a].pos&&l<=_[u].pos&&({lo:a,hi:u}=Xr(_,"pos",l)),({pos:m,time:R}=_[a]),({pos:C,time:x}=_[u])):(l>=_[a].time&&l<=_[u].time&&({lo:a,hi:u}=Xr(_,"time",l)),({time:m,pos:R}=_[a]),({time:C,pos:x}=_[u]));const U=C-m;return U?R+(x-R)*(l-m)/U:R}class qi extends wi{constructor(l){super(l),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const l=this._getTimestampsForTable(),o=this._table=this.buildLookupTable(l);this._minPos=Wi(o,this.min),this._tableRange=Wi(o,this.max)-this._minPos,super.initOffsets(l)}buildLookupTable(l){const{min:o,max:a}=this,u=[],m=[];let C,R,x,U,tt;for(C=0,R=l.length;C<R;++C)U=l[C],U>=o&&U<=a&&u.push(U);if(u.length<2)return[{time:o,pos:0},{time:a,pos:1}];for(C=0,R=u.length;C<R;++C)tt=u[C+1],x=u[C-1],U=u[C],Math.round((tt+x)/2)!==U&&m.push({time:U,pos:C/(R-1)});return m}_getTimestampsForTable(){let l=this._cache.all||[];if(l.length)return l;const o=this.getDataTimestamps(),a=this.getLabelTimestamps();return l=o.length&&a.length?this.normalize(o.concat(a)):o.length?o:a,l=this._cache.all=l,l}getDecimalForValue(l){return(Wi(this._table,l)-this._minPos)/this._tableRange}getValueForPixel(l){const o=this._offsets,a=this.getDecimalForPixel(l)/o.factor-o.end;return Wi(this._table,a*this._tableRange+this._minPos,!0)}}qi.id="timeseries",qi.defaults=wi.defaults,fi.register(As,is,xe,Object.freeze({__proto__:null,CategoryScale:ki,LinearScale:vn,LogarithmicScale:Bn,RadialLinearScale:Y,TimeScale:wi,TimeSeriesScale:qi}));const tn=fi;var Pr=f(54968),Fr=f(70262),uo=f(93075),Jr=f(68675),Co=f(54004),La=f(39841),le=f(5e3),Fs=f(48966),Ks=f(33290),Br=f(53251),Js=f(67322),Ia=f(77531),Dc=f(91079),Il=f(69808),hu=f(47423),yh=f(63874),Vh=f(90508);function Ml(_,l){if(1&_&&(le.TgZ(0,"mat-option",14),le._uU(1),le.qZA()),2&_){const o=l.$implicit;le.Q6J("value",o),le.xp6(1),le.hij(" ",o," ")}}function id(_,l){if(1&_&&(le.TgZ(0,"mat-option",14),le._uU(1),le.qZA()),2&_){const o=l.$implicit;le.Q6J("value",o),le.xp6(1),le.hij(" ",o," ")}}function nd(_,l){if(1&_){const o=le.EpF();le.TgZ(0,"tr"),le.TgZ(1,"td"),le._uU(2),le.qZA(),le.TgZ(3,"td"),le.TgZ(4,"button",15),le.NdJ("click",function(){const m=le.CHM(o).$implicit;return le.oxw().chooseDemo(m)}),le._uU(5),le.qZA(),le.qZA(),le.TgZ(6,"td"),le.TgZ(7,"b"),le._uU(8),le.qZA(),le._uU(9),le.qZA(),le.qZA()}if(2&_){const o=l.$implicit,a=l.index;let u,m;le.xp6(2),le.hij(" ",a+1," "),le.xp6(3),le.hij(" ",o.description," "),le.xp6(3),le.Oqu(null==o.categories||null==(u=o.categories.split(";"))?null:u.join(", ")),le.xp6(1),le.hij(" ",null==o.blocks||null==(m=o.blocks.split(";"))?null:m.join(", ")," ")}}function ol(_,l){if(1&_){const o=le.EpF();le.TgZ(0,"button",15),le.NdJ("click",function(){return le.CHM(o),le.oxw().Verify()}),le.TgZ(1,"mat-icon"),le._uU(2,"save"),le.qZA(),le._uU(3," Verify LocalAPI "),le.qZA()}}function Op(_,l){if(1&_){const o=le.EpF();le.TgZ(0,"tr"),le.TgZ(1,"td"),le._uU(2),le.qZA(),le.TgZ(3,"td"),le.TgZ(4,"button",15),le.NdJ("click",function(){const m=le.CHM(o).$implicit;return le.oxw().chooseDemo(m)}),le._uU(5),le.qZA(),le.qZA(),le.TgZ(6,"td"),le.TgZ(7,"b"),le._uU(8),le.qZA(),le._uU(9),le.qZA(),le.qZA()}if(2&_){const o=l.$implicit,a=l.index;let u,m;le.xp6(2),le.hij(" ",a+1," "),le.xp6(3),le.hij(" ",o.description||o.id," "),le.xp6(3),le.Oqu(null==o.categories||null==(u=o.categories.split(";"))?null:u.join(", ")),le.xp6(1),le.hij(" ",null==o.blocks||null==(m=o.blocks.split(";"))?null:m.join(", ")," ")}}let xp=(()=>{class _{constructor(o,a){this.dialogRef=o,this.DetailsApp=a,this.BlocksLocal=[],this.demos=[],this.demosCategories=new Map,this.demosBlocks=new Map,this.demosArray=null,this.myBlocks=new uo.NI,this.optionsBlocks=[],this.filteredOptionsBlocks=null,this.myCategories=new uo.NI,this.mySearchText=new uo.NI,this.optionsCategories=[],this.filteredOptionsCategories=null,this.InitiateDemos(),this.loadFromLocalAPI()}loadFromLocalAPI(){var o,a;(null===(o=this.DetailsApp.LocalAPI)||void 0===o?void 0:o.WasAlive)&&(null===(a=this.DetailsApp.LocalAPI)||void 0===a||a.LoadBlocks().subscribe(u=>{this.BlocksLocal=u}))}Verify(){var o;null===(o=this.DetailsApp.LocalAPI)||void 0===o||o.IsAlive().subscribe(a=>{a&&this.loadFromLocalAPI()})}InitiateDemos(){var o=this.DetailsApp.demoBlocks;this.demos=o.sort((a,u)=>a.description.localeCompare(u.description)),this.optionsCategories=[...new Set(o.map(a=>a.categories).filter(a=>(null==a?void 0:a.length)>0).flatMap(a=>a.split(";")).filter(a=>(null==a?void 0:a.length)>0).sort((a,u)=>a.toLocaleLowerCase().localeCompare(u.toLocaleLowerCase())))],this.optionsBlocks=[...new Set(o.map(a=>a.blocks).filter(a=>(null==a?void 0:a.length)>0).flatMap(a=>a.split(";")).filter(a=>(null==a?void 0:a.length)>0).sort((a,u)=>a.toLowerCase().localeCompare(u.toLowerCase())))],this.filteredOptionsBlocks=this.myBlocks.valueChanges.pipe((0,Jr.O)(""),(0,Co.U)(a=>{var u=(a||"").trim();return this._filter(u,this.optionsBlocks)})),this.filteredOptionsCategories=this.myCategories.valueChanges.pipe((0,Jr.O)(""),(0,Co.U)(a=>{var u=(a||"").trim();return this._filter(u,this.optionsCategories)})),this.demosArray=(0,La.a)([this.myBlocks.valueChanges.pipe((0,Jr.O)("")),this.myCategories.valueChanges.pipe((0,Jr.O)("")),this.mySearchText.valueChanges.pipe((0,Jr.O)(""))]).pipe((0,Jr.O)(this.demos),(0,Co.U)(([a,u,m])=>((Array.isArray(a)||"object"==typeof a)&&(a=""),(Array.isArray(u)||"object"==typeof u)&&(u=""),(Array.isArray(m)||"object"==typeof m)&&(m=""),a=(a||"").trim().toLowerCase(),u=(u||"").trim().toLowerCase(),m=(null==m?void 0:m.trim().toLowerCase())||"",this.demos.filter(R=>{var x,U,tt,yt,Vt,ne;return(0==a.length||(null===(x=R.blocks)||void 0===x?void 0:x.toLowerCase().indexOf(a))>-1)&&(0==u.length||(null===(U=R.categories)||void 0===U?void 0:U.toLowerCase().indexOf(u))>-1)&&(0==m.length||(null===(tt=R.description)||void 0===tt?void 0:tt.toLowerCase().indexOf(m))>-1||(null===(yt=R.blocks)||void 0===yt?void 0:yt.toLowerCase().indexOf(m))>-1||(null===(Vt=R.categories)||void 0===Vt?void 0:Vt.toLowerCase().indexOf(m))>-1||(null===(ne=R.id)||void 0===ne?void 0:ne.toLowerCase().indexOf(m))>-1)}))))}ngOnInit(){}_filter(o,a){const u=o.toLowerCase();return 0==u.length?a:a.filter(m=>m.toLowerCase().includes(u))}chooseDemo(o){return this.dialogRef.close(o)}Close(){this.dialogRef.close()}}return _.\u0275fac=function(o){return new(o||_)(le.Y36(Fs.so),le.Y36(Ks.d))},_.\u0275cmp=le.Xpm({type:_,selectors:[["app-find-saved-blocks"]],decls:52,vars:16,consts:[["label","Demos"],[1,"example-form"],["appearance","fill",1,"example-full-width"],["type","text","placeholder","Pick one","aria-label","Categories","matInput","",3,"formControl","matAutocomplete"],["autoCategories","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Pick one","aria-label","Blocks","matInput","",3,"formControl","matAutocomplete"],["autoBlocks","matAutocomplete"],["type","text","placeholder","enter text to search","matInput","",3,"formControl"],[4,"ngFor","ngForOf"],["label","Saved on local"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["label","CLOUD","disabled","disabled"],["mat-raised-button","","id","blocks","color","accent",3,"click"],[3,"value"],["mat-raised-button","","color","primary",3,"click"]],template:function(o,a){if(1&o&&(le.TgZ(0,"mat-tab-group"),le.TgZ(1,"mat-tab",0),le.TgZ(2,"form",1),le.TgZ(3,"mat-form-field",2),le.TgZ(4,"mat-label"),le._uU(5,"Categories"),le.qZA(),le._UZ(6,"input",3),le.TgZ(7,"mat-autocomplete",null,4),le.YNc(9,Ml,2,2,"mat-option",5),le.ALo(10,"async"),le.qZA(),le.qZA(),le.TgZ(11,"mat-form-field",2),le.TgZ(12,"mat-label"),le._uU(13,"Blocks"),le.qZA(),le._UZ(14,"input",6),le.TgZ(15,"mat-autocomplete",null,7),le.YNc(17,id,2,2,"mat-option",5),le.ALo(18,"async"),le.qZA(),le.qZA(),le.TgZ(19,"mat-form-field",2),le.TgZ(20,"mat-label"),le._uU(21,"Search"),le.qZA(),le._UZ(22,"input",8),le.qZA(),le.qZA(),le.TgZ(23,"table"),le.TgZ(24,"thead"),le.TgZ(25,"tr"),le.TgZ(26,"th"),le._uU(27,"Number"),le.qZA(),le.TgZ(28,"th"),le._uU(29,"Name"),le.qZA(),le.TgZ(30,"th"),le._uU(31,"Details"),le.qZA(),le.qZA(),le.qZA(),le.YNc(32,nd,10,4,"tr",9),le.ALo(33,"async"),le.qZA(),le.qZA(),le.TgZ(34,"mat-tab",10),le.YNc(35,ol,4,0,"button",11),le.TgZ(36,"table"),le.TgZ(37,"thead"),le.TgZ(38,"tr"),le.TgZ(39,"th"),le._uU(40,"Number"),le.qZA(),le.TgZ(41,"th"),le._uU(42,"Name"),le.qZA(),le.TgZ(43,"th"),le._uU(44,"Details"),le.qZA(),le.qZA(),le.qZA(),le.YNc(45,Op,10,4,"tr",9),le.qZA(),le.qZA(),le.TgZ(46,"mat-tab",12),le._uU(47," Saved on Cloud "),le.qZA(),le.qZA(),le.TgZ(48,"button",13),le.NdJ("click",function(){return a.Close()}),le.TgZ(49,"mat-icon"),le._uU(50,"close"),le.qZA(),le._uU(51," Close\n"),le.qZA()),2&o){const u=le.MAs(8),m=le.MAs(16);le.xp6(6),le.Q6J("formControl",a.myCategories)("matAutocomplete",u),le.xp6(3),le.Q6J("ngForOf",le.lcZ(10,10,a.filteredOptionsCategories)),le.xp6(5),le.Q6J("formControl",a.myBlocks)("matAutocomplete",m),le.xp6(3),le.Q6J("ngForOf",le.lcZ(18,12,a.filteredOptionsBlocks)),le.xp6(5),le.Q6J("formControl",a.mySearchText),le.xp6(10),le.Q6J("ngForOf",le.lcZ(33,14,a.demosArray)),le.xp6(3),le.Q6J("ngIf",!(null!=a.DetailsApp.LocalAPI&&a.DetailsApp.LocalAPI.WasAlive)),le.xp6(10),le.Q6J("ngForOf",a.BlocksLocal)}},directives:[Br.SP,Br.uX,uo._Y,uo.JL,uo.F,Js.KE,Js.hX,Ia.Nt,uo.Fj,Dc.ZL,uo.JJ,uo.oH,Dc.XC,Il.sg,Il.O5,hu.lW,yh.Hw,Vh.ey],pipes:[Il.Ov],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid}table[_ngcontent-%COMP%]{width:100%;height:480px;margin:0 auto;display:block;overflow-x:auto;border-spacing:0}tbody[_ngcontent-%COMP%]{white-space:nowrap}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px 10px;border-top-width:0;border-left-width:0}th[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;vertical-align:bottom}th[_ngcontent-%COMP%]:last-child, td[_ngcontent-%COMP%]:last-child{border-right-width:0}tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom-width:0}"]}),_})();class du{constructor(l){this.table=l}reloadData(l,o){return this.table.dataLoader.load(l,void 0,void 0,void 0,o)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(l){return this.table.eventBus.subscribed(l)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(l){return this.table.externalEvents.subscribed(l)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(l,o){return void 0!==o&&(this.table.options[l]=o),this.table.options[l]}setOption(l,o){return void 0!==o&&(this.table.options[l]=o),this.table.options[l]}module(l){return this.table.module(l)}}class go extends du{constructor(l,o){super(l),this._handler=null}initialize(){}registerTableOption(l,o){this.table.optionsList.register(l,o)}registerColumnOption(l,o){this.table.columnManager.optionsList.register(l,o)}registerTableFunction(l,o){void 0===this.table[l]?this.table[l]=o:console.warn("Unable to bind table function, name already in use",l)}registerComponentFunction(l,o,a){return this.table.componentFunctionBinder.bind(l,o,a)}registerDataHandler(l,o){this.table.rowManager.registerDataPipelineHandler(l,o),this._handler=l}registerDisplayHandler(l,o){this.table.rowManager.registerDisplayPipelineHandler(l,o),this._handler=l}refreshData(l,o){o||(o=this._handler),o&&this.table.rowManager.refreshActiveData(o,!1,l)}}class $s{static elVisible(l){return!(l.offsetWidth<=0&&l.offsetHeight<=0)}static elOffset(l){var o=l.getBoundingClientRect();return{top:o.top+window.pageYOffset-document.documentElement.clientTop,left:o.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(l,o,a=[]){var u={}.__proto__,m=[].__proto__;for(var C in o||(o=Object.assign(Array.isArray(l)?[]:{},l)),l){let x,U,R=l[C];null!=R&&"object"==typeof R&&(R.__proto__===u||R.__proto__===m)&&(x=a.findIndex(tt=>tt.subject===R),x>-1?o[C]=a[x].copy:(U=Object.assign(Array.isArray(R)?[]:{},R),a.unshift({subject:R,copy:U}),o[C]=this.deepClone(R,U,a)))}return o}}var Gh={};let Nh=(()=>{class _ extends go{constructor(o){super(o),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(o){var a=!1,u={};this.allowedTypes.forEach(m=>{var R,C="accessor"+(m.charAt(0).toUpperCase()+m.slice(1));o.definition[C]&&(R=this.lookupAccessor(o.definition[C]))&&(a=!0,u[C]={accessor:R,params:o.definition[C+"Params"]||{}})}),a&&(o.modules.accessor=u)}lookupAccessor(o){var a=!1;switch(typeof o){case"string":_.accessors[o]?a=_.accessors[o]:console.warn("Accessor Error - No such accessor found, ignoring: ",o);break;case"function":a=o}return a}transformRow(o,a){var u="accessor"+(a.charAt(0).toUpperCase()+a.slice(1)),m=o.getComponent(),C=$s.deepClone(o.data||{});return this.table.columnManager.traverse(function(R){var x,U,tt,yt;R.modules.accessor&&(U=R.modules.accessor[u]||R.modules.accessor.accessor||!1)&&"undefined"!=(x=R.getFieldValue(C))&&(yt=R.getComponent(),tt="function"==typeof U.params?U.params(x,C,a,yt,m):U.params,R.setFieldValue(C,U.accessor(x,C,a,tt,yt,m)))}),C}}return _.moduleName="accessor",_.accessors=Gh,_})();var Ir={method:"GET"};function ah(_,l){var o=[];if(l=l||"",Array.isArray(_))_.forEach((u,m)=>{o=o.concat(ah(u,l?l+"["+m+"]":m))});else if("object"==typeof _)for(var a in _)o=o.concat(ah(_[a],l?l+"["+a+"]":a));else o.push({key:l,value:_});return o}function Yd(_){var l=ah(_),o=[];return l.forEach(function(a){o.push(encodeURIComponent(a.key)+"="+encodeURIComponent(a.value))}),o.join("&")}function Xd(_,l,o){return _&&o&&Object.keys(o).length&&(!l.method||"get"==l.method.toLowerCase())&&(l.method="get",_+=(_.includes("?")?"&":"?")+Yd(o)),_}function rd(_,l,o){var a;return new Promise((u,m)=>{if(_=this.urlGenerator.call(this.table,_,l,o),"GET"!=l.method.toUpperCase())if(a="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var C in a.headers)l.headers||(l.headers={}),void 0===l.headers[C]&&(l.headers[C]=a.headers[C]);l.body=a.body.call(this,_,l,o)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);_?(void 0===l.headers&&(l.headers={}),void 0===l.headers.Accept&&(l.headers.Accept="application/json"),void 0===l.headers["X-Requested-With"]&&(l.headers["X-Requested-With"]="XMLHttpRequest"),void 0===l.mode&&(l.mode="cors"),"cors"==l.mode?(void 0===l.headers.Origin&&(l.headers.Origin=window.location.origin),void 0===l.credentials&&(l.credentials="same-origin")):void 0===l.credentials&&(l.credentials="include"),fetch(_,l).then(R=>{R.ok?R.json().then(x=>{u(x)}).catch(x=>{m(x),console.warn("Ajax Load Error - Invalid JSON returned",x)}):(console.error("Ajax Load Error - Connection Error: "+R.status,R.statusText),m(R))}).catch(R=>{console.error("Ajax Load Error - Connection Error: ",R),m(R)})):(console.warn("Ajax Load Error - No URL Set"),u([]))})}function Ic(_,l){var o=[];if(l=l||"",Array.isArray(_))_.forEach((u,m)=>{o=o.concat(Ic(u,l?l+"["+m+"]":m))});else if("object"==typeof _)for(var a in _)o=o.concat(Ic(_[a],l?l+"["+a+"]":a));else o.push({key:l,value:_});return o}var Kd={json:{headers:{"Content-Type":"application/json"},body:function(_,l,o){return JSON.stringify(o)}},form:{headers:{},body:function(_,l,o){var a=Ic(o),u=new FormData;return a.forEach(function(m){u.append(m.key,m.value)}),u}}};let Su=(()=>{class _ extends go{constructor(o){super(o),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=_.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||_.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||_.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(o,a,u,m){return!((o||!this.url)&&"string"!=typeof o)}requestData(o,a,u,m,C){return this.requestDataCheck(o)?(o&&this.setUrl(o),a&&this.setParams(a,!0),u&&this.setConfig(u),this.sendRequest()):C}setParams(o,a){if(a){this.params=this.params||{};for(let u in o)this.params[u]=o[u]}else this.params=o}getParams(){return this.params||{}}setConfig(o){if(this._loadDefaultConfig(),"string"==typeof o)this.config.method=o;else for(let a in o)this.config[a]=o[a]}_loadDefaultConfig(o){if(!this.config||o){this.config={};for(let a in _.defaultConfig)this.config[a]=_.defaultConfig[a]}}setUrl(o){this.url=o}getUrl(){return this.url}sendRequest(o){var a=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(a,this.config,this.params).then(u=>(this.table.options.ajaxResponse&&(u=this.table.options.ajaxResponse.call(this.table,this.url,this.params,u)),u)):Promise.reject()}}return _.moduleName="ajax",_.defaultConfig=Ir,_.defaultURLGenerator=Xd,_.defaultLoaderPromise=rd,_.contentTypeFormatters=Kd,_})();var Mc={replace:function(_){return this.table.setData(_)},update:function(_){return this.table.updateOrAddData(_)},insert:function(_){return this.table.addData(_)}},wu={table:function(_){var l=[],o=!0,a=this.table.columnManager.columns,u=[],m=[];return(_=_.split("\n")).forEach(function(C){l.push(C.split("\t"))}),!(!l.length||1===l.length&&l[0].length<2)&&(l[0].forEach(function(C){var R=a.find(function(x){return C&&x.definition.title&&C.trim()&&x.definition.title.trim()===C.trim()});R?u.push(R):o=!1}),o||(o=!0,u=[],l[0].forEach(function(C){var R=a.find(function(x){return C&&x.field&&C.trim()&&x.field.trim()===C.trim()});R?u.push(R):o=!1}),o||(u=this.table.columnManager.columnsByIndex)),o&&l.shift(),l.forEach(function(C){var R={};C.forEach(function(x,U){u[U]&&(R[u[U].field]=x)}),m.push(R)}),m)}};let Wh=(()=>{class _ extends go{constructor(o){super(o),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",o=>{var a,u;if(!this.blocked){if(o.preventDefault(),this.customSelection)a=this.customSelection,this.table.options.clipboardCopyFormatter&&(a=this.table.options.clipboardCopyFormatter("plain",a));else{var m=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");a=(u=this.table.modules.export.genereateHTMLTable(m))?this.generatePlainContent(m):"",this.table.options.clipboardCopyFormatter&&(a=this.table.options.clipboardCopyFormatter("plain",a),u=this.table.options.clipboardCopyFormatter("html",u))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",a):o.clipboardData&&o.clipboardData.setData?(o.clipboardData.setData("text/plain",a),u&&o.clipboardData.setData("text/html",u)):o.originalEvent&&o.originalEvent.clipboardData.setData&&(o.originalEvent.clipboardData.setData("text/plain",a),u&&o.originalEvent.clipboardData.setData("text/html",u)),this.dispatchExternal("clipboardCopied",a,u),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",o=>{this.paste(o)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(o){var a=[];return o.forEach(u=>{var m=[];u.columns.forEach(C=>{var R="";if(C)if("group"===u.type&&(C.value=C.component.getKey()),null===C.value)R="";else switch(typeof C.value){case"object":R=JSON.stringify(C.value);break;case"undefined":R="";break;default:R=C.value}m.push(R)}),a.push(m.join("\t"))}),a.join("\n")}copy(o,a){var u,m;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=o||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((o=document.createRange()).selectNodeContents(this.table.element),(u=window.getSelection()).toString()&&a&&(this.customSelection=u.toString()),u.removeAllRanges(),u.addRange(o)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((m=document.body.createTextRange()).moveToElementText(this.table.element),m.select()),document.execCommand("copy"),u&&u.removeAllRanges())}setPasteAction(o){switch(typeof o){case"string":this.pasteAction=_.pasteActions[o],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",o);break;case"function":this.pasteAction=o}}setPasteParser(o){switch(typeof o){case"string":this.pasteParser=_.pasteParsers[o],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",o);break;case"function":this.pasteParser=o}}paste(o){var a,u,m;this.checkPaseOrigin(o)&&(a=this.getPasteData(o),(u=this.pasteParser.call(this,a))?(o.preventDefault(),this.table.modExists("mutator")&&(u=this.mutateData(u)),m=this.pasteAction.call(this,u),this.dispatchExternal("clipboardPasted",a,u,m)):this.dispatchExternal("clipboardPasteError",a))}mutateData(o){var a=[];return Array.isArray(o)?o.forEach(u=>{a.push(this.table.modules.mutator.transformRow(u,"clipboard"))}):a=o,a}checkPaseOrigin(o){var a=!0;return("DIV"!=o.target.tagName||this.table.modules.edit.currentCell)&&(a=!1),a}getPasteData(o){var a;return window.clipboardData&&window.clipboardData.getData?a=window.clipboardData.getData("Text"):o.clipboardData&&o.clipboardData.getData?a=o.clipboardData.getData("text/plain"):o.originalEvent&&o.originalEvent.clipboardData.getData&&(a=o.originalEvent.clipboardData.getData("text/plain")),a}}return _.moduleName="clipboard",_.pasteActions=Mc,_.pasteParsers=wu,_})();class zh{constructor(l){return this._row=l,new Proxy(this,{get:function(o,a,u){return void 0!==o[a]?o[a]:o._row.table.componentFunctionBinder.handle("row",o._row,a)}})}getData(l){return this._row.getData(l)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var l=[];return this._row.getCells().forEach(function(o){l.push(o.getComponent())}),l}getCell(l){var o=this._row.getCell(l);return!!o&&o.getComponent()}_getSelf(){return this._row}}class jh{constructor(l){return this._cell=l,new Proxy(this,{get:function(o,a,u){return void 0!==o[a]?o[a]:o._cell.table.componentFunctionBinder.handle("cell",o._cell,a)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(l,o){void 0===o&&(o=!0),this._cell.setValue(l,o)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class Ph extends du{constructor(l,o){super(l.table),this.table=l.table,this.column=l,this.row=o,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var l=this.element,o=this.column.getField();l.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(l.style.display="inline-flex",l.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(l.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),o&&l.setAttribute("tabulator-field",o),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(C=>{l.classList.add(C)}),"hover"===this.table.options.tooltipGenerationMode&&l.addEventListener("mouseenter",C=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var l;switch(typeof(l=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(l instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(l)}else this.element.innerHTML="",null!=l&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",l);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=l}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var l=this.column.tooltip;l?(!0===l?l=this.value:"function"==typeof l&&!1===(l=l(this.getComponent()))&&(l=""),void 0===l&&(l=""),this.element.setAttribute("title",l)):this.element.setAttribute("title","")}getElement(l){return this.loaded||(this.loaded=!0,l||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(l,o){this.setValueProcessData(l,o)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(l,o){var a=!1;return this.value!=l&&(a=!0,o&&(l=this.chain("cell-value-changing",[this,l],null,l))),this.setValueActual(l),a&&this.dispatch("cell-value-changed",this),a}setValueActual(l){this.oldValue=this.value,this.value=l,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,l),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new jh(this)),this.component}}class Fh{constructor(l){return this._column=l,this.type="ColumnComponent",new Proxy(this,{get:function(o,a,u){return void 0!==o[a]?o[a]:o._column.table.componentFunctionBinder.handle("column",o._column,a)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var l=[];return this._column.cells.forEach(function(o){l.push(o.getComponent())}),l}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(l){l.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(l){l.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var l=[];return this._column.columns.length&&this._column.columns.forEach(function(o){l.push(o.getComponent())}),l}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(l,o){var a=this._column.table.columnManager.findColumn(l);a?this._column.table.columnManager.moveColumn(this._column,a,o):console.warn("Move Error - No matching column found:",a)}getNextColumn(){var l=this._column.nextColumn();return!!l&&l.getComponent()}getPrevColumn(){var l=this._column.prevColumn();return!!l&&l.getComponent()}updateDefinition(l){return this._column.updateDefinition(l)}getWidth(){return this._column.getWidth()}setWidth(l){var o;return o=!0===l?this._column.reinitializeWidth(!0):this._column.setWidth(l),this._column.table.columnManager.renderer.rerenderColumns(!0),o}}var Rf={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let Yu=(()=>{class _ extends du{constructor(o,a){super(a.table),this.definition=o,this.parent=a,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((u,m)=>{var C=new _(u,this);this.attachColumn(C)}),this.checkColumnVisibility()):a.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var o=document.createElement("div");return o.classList.add("tabulator-col"),o.setAttribute("role","columnheader"),o.setAttribute("aria-sort","none"),o}createGroupElement(){var o=document.createElement("div");return o.classList.add("tabulator-col-group-cols"),o}mapDefinitions(){var o=this.table.options.columnDefaults;if(o)for(let a in o)void 0===this.definition[a]&&(this.definition[a]=o[a]);this.definition=this.table.columnManager.optionsList.generate(_.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(o=>{-1===_.defaultOptionList.indexOf(o)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",o)})}setField(o){this.field=o,this.fieldStructure=o?this.table.options.nestedFieldSeparator?o.split(this.table.options.nestedFieldSeparator):[o]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(o){this.parent.registerColumnPosition(o)}registerColumnField(o){this.parent.registerColumnField(o)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(o){o.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var o=this.definition,a=void 0===o.headerTooltip?o.tooltip:o.headerTooltip;a?!0===a?o.field?this.langBind("columns|"+o.field,u=>{this.element.setAttribute("title",u||o.title)}):this.element.setAttribute("title",o.title):("function"==typeof a&&!1===(a=a(this.getComponent()))&&(a=""),this.element.setAttribute("title",a)):this.element.setAttribute("title","")}_initialize(){for(var o=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);o.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===o.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",a=>{this.setTooltip()})}_bindEvents(){var a,u,m,o=this.definition;"function"==typeof o.headerClick&&this.element.addEventListener("click",C=>{o.headerClick(C,this.getComponent())}),"function"==typeof o.headerDblClick&&this.element.addEventListener("dblclick",C=>{o.headerDblClick(C,this.getComponent())}),"function"==typeof o.headerContext&&this.element.addEventListener("contextmenu",C=>{o.headerContext(C,this.getComponent())}),"function"==typeof o.headerTap&&(m=!1,this.element.addEventListener("touchstart",C=>{m=!0},{passive:!0}),this.element.addEventListener("touchend",C=>{m&&o.headerTap(C,this.getComponent()),m=!1})),"function"==typeof o.headerDblTap&&(a=null,this.element.addEventListener("touchend",C=>{a?(clearTimeout(a),a=null,o.headerDblTap(C,this.getComponent())):a=setTimeout(()=>{clearTimeout(a),a=null},300)})),"function"==typeof o.headerTapHold&&(u=null,this.element.addEventListener("touchstart",C=>{clearTimeout(u),u=setTimeout(function(){clearTimeout(u),u=null,m=!1,o.headerTapHold(C,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",C=>{clearTimeout(u),u=null}))}_buildColumnHeader(){var o=this.definition;this.dispatch("column-layout",this),void 0!==o.visible&&(o.visible?this.show(!0):this.hide(!0)),o.cssClass&&o.cssClass.split(" ").forEach(m=>{this.element.classList.add(m)}),o.field&&this.element.setAttribute("tabulator-field",o.field),this.setMinWidth(parseInt(o.minWidth)),o.maxWidth&&this.setMaxWidth(parseInt(o.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var u=document.createElement("div");return u.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),u.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),u}_buildColumnHeaderTitle(){var o=this.definition,a=document.createElement("div");if(a.classList.add("tabulator-col-title"),o.editableTitle){var u=document.createElement("input");u.classList.add("tabulator-title-editor"),u.addEventListener("click",m=>{m.stopPropagation(),u.focus()}),u.addEventListener("change",()=>{o.title=u.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),a.appendChild(u),o.field?this.langBind("columns|"+o.field,m=>{u.value=m||o.title||"&nbsp;"}):u.value=o.title||"&nbsp;"}else o.field?this.langBind("columns|"+o.field,m=>{this._formatColumnHeaderTitle(a,m||o.title||"&nbsp;")}):this._formatColumnHeaderTitle(a,o.title||"&nbsp;");return a}_formatColumnHeaderTitle(o,a){var u=this.chain("column-format",[this,a,o],null,()=>a);switch(typeof u){case"object":u instanceof Node?o.appendChild(u):(o.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",u));break;case"undefined":case"null":o.innerHTML="";break;default:o.innerHTML=u}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(a=>{this.element.classList.add(a)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(o){return o[this.field]}_getNestedData(o){var C,a=o,u=this.fieldStructure,m=u.length;for(let R=0;R<m&&(C=a=a[u[R]],a);R++);return C}_setFlatData(o,a){this.field&&(o[this.field]=a)}_setNestedData(o,a){var u=o,m=this.fieldStructure,C=m.length;for(let R=0;R<C;R++)if(R==C-1)u[m[R]]=a;else{if(!u[m[R]]){if(void 0===a)break;u[m[R]]={}}u=u[m[R]]}}attachColumn(o){this.groupElement?(this.columns.push(o),this.groupElement.appendChild(o.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(o,a){var u=this.parent.isGroup?this.parent.getGroupElement().clientHeight:a||this.parent.getHeadersElement().clientHeight;this.element.style.height=u+"px",this.isGroup&&(this.groupElement.style.minHeight=u-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==o&&(this.element.style.paddingTop="bottom"===o?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(m){m.verticalAlign(o)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(o){o.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(o){var a=[];return this.isGroup&&o&&(this.columns.forEach(function(u){a.push(u.getDefinition(!0))}),this.definition.columns=a),this.definition}checkColumnVisibility(){var o=!1;this.columns.forEach(function(a){a.visible&&(o=!0)}),o?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(o,a){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(u){u.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,a),o||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(o,a){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(u){u.hide()}),this.dispatch("column-hide",this),o||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var o=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(a){a.visible&&(o+=a.getWidth())}),this.contentElement.style.maxWidth=o-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(o){var a=this.columns.indexOf(o);a>-1&&this.columns.splice(a,1),this.columns.length||this.delete()}setWidth(o){this.widthFixed=!0,this.setWidthActual(o)}setWidthActual(o){isNaN(o)&&(o=Math.floor(this.table.element.clientWidth/100*parseInt(o))),o=Math.max(this.minWidth,o),this.maxWidth&&(o=Math.min(this.maxWidth,o)),this.width=o,this.widthStyled=o?o+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(a){a.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var o=[];this.cells.forEach(function(a){a.row.heightInitialized&&(null!==a.row.getElement().offsetParent?(o.push(a.row),a.row.clearCellHeight()):a.row.heightInitialized=!1)}),o.forEach(function(a){a.calcHeight()}),o.forEach(function(a){a.setCellHeight()})}getWidth(){var o=0;return this.isGroup?this.columns.forEach(function(a){a.visible&&(o+=a.getWidth())}):o=this.width,o}getHeight(){return this.element.offsetHeight}setMinWidth(o){this.minWidth=o,this.minWidthStyled=o?o+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(a){a.setMinWidth()})}setMaxWidth(o){this.maxWidth=o,this.maxWidthStyled=o?o+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(a){a.setMaxWidth()})}delete(){return new Promise((o,a)=>{this.isGroup&&this.columns.forEach(function(m){m.delete()}),this.dispatch("column-delete",this);var u=this.cells.length;for(let m=0;m<u;m++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),o()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(o){var a=new Ph(this,o);return this.cells.push(a),a}nextColumn(){var o=this.table.columnManager.findColumnIndex(this);return o>-1&&this._nextVisibleColumn(o+1)}_nextVisibleColumn(o){var a=this.table.columnManager.getColumnByIndex(o);return!a||a.visible?a:this._nextVisibleColumn(o+1)}prevColumn(){var o=this.table.columnManager.findColumnIndex(this);return o>-1&&this._prevVisibleColumn(o-1)}_prevVisibleColumn(o){var a=this.table.columnManager.getColumnByIndex(o);return!a||a.visible?a:this._prevVisibleColumn(o-1)}reinitializeWidth(o){this.widthFixed=!1,void 0!==this.definition.width&&!o&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(a=>{a.clearWidth()}));var o=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(a=>{var u=a.getWidth();u>o&&(o=u)}),o&&this.setWidthActual(o+1))}}updateDefinition(o){var a;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(a=Object.assign({},this.getDefinition()),a=Object.assign(a,o),this.table.columnManager.addColumn(a,!1,this).then(u=>(a.field==this.field&&(this.field=!1),this.delete().then(()=>u.getComponent()))))}deleteCell(o){var a=this.cells.indexOf(o);a>-1&&this.cells.splice(a,1)}getComponent(){return this.component||(this.component=new Fh(this)),this.component}}return _.defaultOptionList=Rf,_})();class Eh{constructor(l){return this._row=l,new Proxy(this,{get:function(o,a,u){return void 0!==o[a]?o[a]:o._row.table.componentFunctionBinder.handle("row",o._row,a)}})}getData(l){return this._row.getData(l)}getElement(){return this._row.getElement()}getCells(){var l=[];return this._row.getCells().forEach(function(o){l.push(o.getComponent())}),l}getCell(l){var o=this._row.getCell(l);return!!o&&o.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(l){return this._row.table.rowManager.getRowPosition(this._row,l)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(l,o){this._row.moveToRow(l,o)}update(l){return this._row.updateData(l)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var l=this._row.nextRow();return l&&l.getComponent()}getPrevRow(){var l=this._row.prevRow();return l&&l.getComponent()}}class ml extends du{constructor(l,o,a="row"){super(o.table),this.parent=o,this.data={},this.type=a,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(l)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var l=document.createElement("div");l.classList.add("tabulator-row"),l.setAttribute("role","row"),this.element=l}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(l){if(this.create(),!this.initialized||l){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),l&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(l){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(l){var o=0,a=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(u){var m=u.getHeight();m>o&&(o=m)}),this.height=l?Math.max(o,a):this.manualHeight?this.height:Math.max(o,a),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(l){l.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(l){l.clearHeight()})}normalizeHeight(l){l&&this.clearCellHeight(),this.calcHeight(l),this.setCellHeight()}setHeight(l,o){(this.height!=l||o)&&(this.manualHeight=!0,this.height=l,this.heightStyled=l?l+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(l){var o=this.cells.indexOf(l);o>-1&&this.cells.splice(o,1)}setData(l){this.data=this.chain("row-data-init-before",[this,l],void 0,l),this.dispatch("row-data-init-after",this)}updateData(l){var u,o=this.element&&$s.elVisible(this.element),a={};return new Promise((m,C)=>{for(var R in"string"==typeof l&&(l=JSON.parse(l)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(a=Object.assign(a,this.data),a=Object.assign(a,l)),u=this.chain("row-data-changing",[this,a,l],null,l))this.data[R]=u[R];for(var R in this.dispatch("row-data-save-after",this),l)this.table.columnManager.getColumnsByFieldRoot(R).forEach(tt=>{let yt=this.getCell(tt.getField());if(yt){let Vt=tt.getFieldValue(u);yt.getValue()!=Vt&&(yt.setValueProcessData(Vt),o&&yt.cellRendered())}});o?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,o,l),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),m()})}getData(l){return l?this.chain("row-data-retrieve",[this,l],null,this.data):this.data}getCell(l){return l=this.table.columnManager.findColumn(l),this.initialized||this.generateCells(),this.cells.find(function(a){return a.column===l})}getCellIndex(l){return this.cells.findIndex(function(o){return o===l})}findCell(l){return this.cells.find(o=>o.element===l)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(l,o){var a=this.table.rowManager.findRow(l);a?(this.table.rowManager.moveRowActual(this,a,!o),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",l)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(l){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,l),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var l=this.cells.length;for(let o=0;o<l;o++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new Eh(this)),this.component}}var od={avg:function(_,l,o){var a=0,u=void 0!==o.precision?o.precision:2;return _.length&&(a=_.reduce(function(m,C){return Number(m)+Number(C)}),a/=_.length,a=!1!==u?a.toFixed(u):a),parseFloat(a).toString()},max:function(_,l,o){var a=null,u=void 0!==o.precision&&o.precision;return _.forEach(function(m){((m=Number(m))>a||null===a)&&(a=m)}),null!==a?!1!==u?a.toFixed(u):a:""},min:function(_,l,o){var a=null,u=void 0!==o.precision&&o.precision;return _.forEach(function(m){((m=Number(m))<a||null===a)&&(a=m)}),null!==a?!1!==u?a.toFixed(u):a:""},sum:function(_,l,o){var a=0,u=void 0!==o.precision&&o.precision;return _.length&&_.forEach(function(m){m=Number(m),a+=isNaN(m)?0:Number(m)}),!1!==u?a.toFixed(u):a},concat:function(_,l,o){var a=0;return _.length&&(a=_.reduce(function(u,m){return String(u)+String(m)})),a},count:function(_,l,o){var a=0;return _.length&&_.forEach(function(u){u&&a++}),a}};let sd=(()=>{class _ extends go{constructor(o){super(o),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var o=document.createElement("div");return o.classList.add("tabulator-calcs-holder"),o}initialize(){this.genColumn=new Yu({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(o){this.recalc(this.table.rowManager.activeRows),o&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(o){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(o){(o.column.definition.topCalc||o.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(o.row)):this.recalcActiveRows())}initializeColumnCheck(o){(o.definition.topCalc||o.definition.bottomCalc)&&this.initializeColumn(o)}initializeColumn(o){var a=o.definition,u={topCalcParams:a.topCalcParams||{},botCalcParams:a.bottomCalcParams||{}};if(a.topCalc){switch(typeof a.topCalc){case"string":_.calculations[a.topCalc]?u.topCalc=_.calculations[a.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",a.topCalc);break;case"function":u.topCalc=a.topCalc}u.topCalc&&(o.modules.columnCalcs=u,this.topCalcs.push(o),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(a.bottomCalc){switch(typeof a.bottomCalc){case"string":_.calculations[a.bottomCalc]?u.botCalc=_.calculations[a.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",a.bottomCalc);break;case"function":u.botCalc=a.bottomCalc}u.botCalc&&(o.modules.columnCalcs=u,this.botCalcs.push(o),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var o=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),o=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),o=!0),o&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(o){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-o+"px")}recalc(o){var a;if(this.topInitialized||this.botInitialized){if(this.rowsToData(o),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),a=this.generateRow("top",this.rowsToData(o)),this.topRow=a;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(a.getElement()),a.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),a=this.generateRow("bottom",this.rowsToData(o)),this.botRow=a;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(a.getElement()),a.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(o){this.recalcGroup(this.table.modules.groupRows.getRowGroup(o))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(a=>{this.recalcGroup(a)})}recalcGroup(o){var a,u;o&&o.calcs&&(o.calcs.bottom&&(a=this.rowsToData(o.rows),u=this.generateRowData("bottom",a),o.calcs.bottom.updateData(u),o.calcs.bottom.reinitialize()),o.calcs.top&&(a=this.rowsToData(o.rows),u=this.generateRowData("top",a),o.calcs.top.updateData(u),o.calcs.top.reinitialize()))}generateTopRow(o){return this.generateRow("top",this.rowsToData(o))}generateBottomRow(o){return this.generateRow("bottom",this.rowsToData(o))}rowsToData(o){var a=[];return o.forEach(u=>{if(a.push(u.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&u.modules.dataTree.open){var m=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(u));a=a.concat(m)}}),a}generateRow(o,a){var m,u=this.generateRowData(o,a);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),m=new ml(u,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),m.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+o),m.component=!1,m.getComponent=()=>(m.component||(m.component=new zh(this)),m.component),m.generateCells=()=>{var C=[];this.table.columnManager.columnsByIndex.forEach(R=>{this.genColumn.setField(R.getField()),this.genColumn.hozAlign=R.hozAlign,this.genColumn.modules.format=R.definition[o+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(R.definition[o+"CalcFormatter"]),params:R.definition[o+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=R.definition.cssClass;var x=new Ph(this.genColumn,m);x.getElement(),x.column=R,x.setWidth(),R.cells.push(x),C.push(x),R.visible||x.hide()}),m.cells=C},m}generateRowData(o,a){var R,x,u={},C="top"==o?"topCalc":"botCalc";return("top"==o?this.topCalcs:this.botCalcs).forEach(function(U){var tt=[];U.modules.columnCalcs&&U.modules.columnCalcs[C]&&(a.forEach(function(yt){tt.push(U.getFieldValue(yt))}),R="function"==typeof U.modules.columnCalcs[x=C+"Params"]?U.modules.columnCalcs[x](tt,a):U.modules.columnCalcs[x],U.setFieldValue(u,U.modules.columnCalcs[C](tt,a,R)))}),u}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var o={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(u=>{o[u.getKey()]=this.getGroupResults(u)}):o={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},o}getGroupResults(o){var a=o._getSelf(),u=o.getSubGroups(),m={};return u.forEach(R=>{m[R.getKey()]=this.getGroupResults(R)}),{top:a.calcs.top?a.calcs.top.getData():{},bottom:a.calcs.bottom?a.calcs.bottom.getData():{},groups:m}}}return _.moduleName="columnCalcs",_.calculations=od,_})(),kp=(()=>{class _ extends go{constructor(o){super(o),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var o=null,a=this.table.columnManager.getFirstVisibileColumn(),u=this.table.options;switch(this.field=u.dataTreeChildField,this.indent=u.dataTreeChildIndent,this.elementField=u.dataTreeElementColumn||!!a&&a.field,u.dataTreeBranchElement&&(!0===u.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof u.dataTreeBranchElement?((o=document.createElement("div")).innerHTML=u.dataTreeBranchElement,this.branchEl=o.firstChild):this.branchEl=u.dataTreeBranchElement),u.dataTreeCollapseElement?"string"==typeof u.dataTreeCollapseElement?((o=document.createElement("div")).innerHTML=u.dataTreeCollapseElement,this.collapseEl=o.firstChild):this.collapseEl=u.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),u.dataTreeExpandElement?"string"==typeof u.dataTreeExpandElement?((o=document.createElement("div")).innerHTML=u.dataTreeExpandElement,this.expandEl=o.firstChild):this.expandEl=u.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof u.dataTreeStartExpanded){case"boolean":this.startOpen=function(m,C){return u.dataTreeStartExpanded};break;case"function":this.startOpen=u.dataTreeStartExpanded;break;default:this.startOpen=function(m,C){return u.dataTreeStartExpanded[C]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(o){return this.getTreeChildren(o,!0)}columnMoving(){var o=[];return this.table.rowManager.rows.forEach(a=>{o=o.concat(this.getTreeChildren(a,!1,!0))}),o}rowDataChanged(o,a,u){this.redrawNeeded(u)&&(this.initializeRow(o),a&&(this.layoutRow(o),this.refreshData(!0)))}initializeRow(o){var a=o.getData()[this.field],u=Array.isArray(a),m=u||!u&&"object"==typeof a&&null!==a;!m&&o.modules.dataTree&&o.modules.dataTree.branchEl&&o.modules.dataTree.branchEl.parentNode.removeChild(o.modules.dataTree.branchEl),!m&&o.modules.dataTree&&o.modules.dataTree.controlEl&&o.modules.dataTree.controlEl.parentNode.removeChild(o.modules.dataTree.controlEl),o.modules.dataTree={index:o.modules.dataTree?o.modules.dataTree.index:0,open:!!m&&(o.modules.dataTree?o.modules.dataTree.open:this.startOpen(o.getComponent(),0)),controlEl:!(!o.modules.dataTree||!m)&&o.modules.dataTree.controlEl,branchEl:!(!o.modules.dataTree||!m)&&o.modules.dataTree.branchEl,parent:!!o.modules.dataTree&&o.modules.dataTree.parent,children:m}}reinitializeRowChildren(o){this.getTreeChildren(o,!1,!0).forEach(function(u){u.reinitialize(!0)})}layoutRow(o){var u=(this.elementField?o.getCell(this.elementField):o.getCells()[0]).getElement(),m=o.modules.dataTree;m.branchEl&&(m.branchEl.parentNode&&m.branchEl.parentNode.removeChild(m.branchEl),m.branchEl=!1),m.controlEl&&(m.controlEl.parentNode&&m.controlEl.parentNode.removeChild(m.controlEl),m.controlEl=!1),this.generateControlElement(o,u),o.getElement().classList.add("tabulator-tree-level-"+m.index),m.index&&(this.branchEl?(m.branchEl=this.branchEl.cloneNode(!0),u.insertBefore(m.branchEl,u.firstChild),this.table.rtl?m.branchEl.style.marginRight=(m.branchEl.offsetWidth+m.branchEl.style.marginLeft)*(m.index-1)+m.index*this.indent+"px":m.branchEl.style.marginLeft=(m.branchEl.offsetWidth+m.branchEl.style.marginRight)*(m.index-1)+m.index*this.indent+"px"):this.table.rtl?u.style.paddingRight=parseInt(window.getComputedStyle(u,null).getPropertyValue("padding-right"))+m.index*this.indent+"px":u.style.paddingLeft=parseInt(window.getComputedStyle(u,null).getPropertyValue("padding-left"))+m.index*this.indent+"px")}generateControlElement(o,a){var u=o.modules.dataTree,m=(a=a||o.getCells()[0].getElement(),u.controlEl);!1!==u.children&&(u.open?(u.controlEl=this.collapseEl.cloneNode(!0),u.controlEl.addEventListener("click",C=>{C.stopPropagation(),this.collapseRow(o)})):(u.controlEl=this.expandEl.cloneNode(!0),u.controlEl.addEventListener("click",C=>{C.stopPropagation(),this.expandRow(o)})),u.controlEl.addEventListener("mousedown",C=>{C.stopPropagation()}),m&&m.parentNode===a?m.parentNode.replaceChild(u.controlEl,m):a.insertBefore(u.controlEl,a.firstChild))}setDisplayIndex(o){this.displayIndex=o}getDisplayIndex(){return this.displayIndex}getRows(o){var a=[];return o.forEach((u,m)=>{var C;a.push(u),u instanceof ml&&(u.create(),!(C=u.modules.dataTree.children).index&&!1!==C.children&&this.getChildren(u).forEach(x=>{x.create(),a.push(x)}))}),a}getChildren(o,a){var u=o.modules.dataTree,m=[],C=[];return!1!==u.children&&(u.open||a)&&(Array.isArray(u.children)||(u.children=this.generateChildren(o)),m=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(u.children):u.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(m),m.forEach(R=>{C.push(R),this.getChildren(R).forEach(U=>{C.push(U)})})),C}generateChildren(o){var a=[],u=o.getData()[this.field];return Array.isArray(u)||(u=[u]),u.forEach(m=>{var C=new ml(m||{},this.table.rowManager);C.create(),C.modules.dataTree.index=o.modules.dataTree.index+1,C.modules.dataTree.parent=o,C.modules.dataTree.children&&(C.modules.dataTree.open=this.startOpen(C.getComponent(),C.modules.dataTree.index)),a.push(C)}),a}expandRow(o,a){var u=o.modules.dataTree;!1!==u.children&&(u.open=!0,o.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",o.getComponent(),o.modules.dataTree.index))}collapseRow(o){var a=o.modules.dataTree;!1!==a.children&&(a.open=!1,o.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",o.getComponent(),o.modules.dataTree.index))}toggleRow(o){var a=o.modules.dataTree;!1!==a.children&&(a.open?this.collapseRow(o):this.expandRow(o))}getTreeParent(o){return!!o.modules.dataTree.parent&&o.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(o){var a=o.modules.dataTree,u=[];return a.children&&(Array.isArray(a.children)||(a.children=this.generateChildren(o)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(a.children):a.children).forEach(C=>{C instanceof ml&&u.push(C)})),u}rowDelete(o){var u,a=o.modules.dataTree.parent;a&&(!1!==(u=this.findChildIndex(o,a))&&a.data[this.field].splice(u,1),a.data[this.field].length||delete a.data[this.field],this.initializeRow(a),this.layoutRow(a)),this.refreshData(!0)}addTreeChildRow(o,a,u,m){var C=!1;"string"==typeof a&&(a=JSON.parse(a)),Array.isArray(o.data[this.field])||(o.data[this.field]=[],o.modules.dataTree.open=this.startOpen(o.getComponent(),o.modules.dataTree.index)),void 0!==m&&!1!==(C=this.findChildIndex(m,o))&&o.data[this.field].splice(u?C:C+1,0,a),!1===C&&(u?o.data[this.field].unshift(a):o.data[this.field].push(a)),this.initializeRow(o),this.layoutRow(o),this.refreshData(!0)}findChildIndex(o,a){var u=!1;return"object"==typeof o?o instanceof ml?u=o.data:o instanceof RowComponent?u=o._getSelf().data:"undefined"!=typeof HTMLElement&&o instanceof HTMLElement&&a.modules.dataTree&&(u=a.modules.dataTree.children.find(m=>m instanceof ml&&m.element===o))&&(u=u.data):u=null!=o&&a.data[this.field].find(m=>m.data[this.table.options.index]==o),u&&(Array.isArray(a.data[this.field])&&(u=a.data[this.field].indexOf(u)),-1==u&&(u=!1)),u}getTreeChildren(o,a,u){var m=o.modules.dataTree,C=[];return m.children&&(Array.isArray(m.children)||(m.children=this.generateChildren(o)),m.children.forEach(R=>{R instanceof ml&&(C.push(a?R.getComponent():R),u&&(C=C.concat(this.getTreeChildren(R,a,u))))})),C}checkForRestyle(o){o.row.cells.indexOf(o)||this.layoutRow(o.row)}getChildField(){return this.field}redrawNeeded(o){return!!this.field&&void 0!==o[this.field]||!!this.elementField&&void 0!==o[this.elementField]}}return _.moduleName="dataTree",_})();var Df={csv:function(_,l,o){var a=l&&l.delimiter?l.delimiter:",",u=[],m=[];_.forEach(C=>{var R=[];switch(C.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":C.columns.forEach((x,U)=>{x&&1===x.depth&&(m[U]=null==x.value?"":'"'+String(x.value).split('"').join('""')+'"')});break;case"row":C.columns.forEach(x=>{if(x){switch(typeof x.value){case"object":x.value=JSON.stringify(x.value);break;case"undefined":case"null":x.value=""}R.push('"'+String(x.value).split('"').join('""')+'"')}}),u.push(R.join(a))}}),m.length&&u.unshift(m.join(a)),u=u.join("\n"),l.bom&&(u="\ufeff"+u),o(u,"text/csv")},json:function(_,l,o){var a=[];_.forEach(u=>{var m={};switch(u.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":u.columns.forEach(C=>{C&&(m[C.component.getField()]=C.value)}),a.push(m)}}),o(a=JSON.stringify(a,null,"\t"),"application/json")},pdf:function(_,l,o){var a=[],u=[],m={},C=l.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},R=l.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},x=l.jsPDF||{},U=l&&l.title?l.title:"";function tt(Vt,ne){var Se=[];return Vt.columns.forEach(He=>{var ze;if(He){switch(typeof He.value){case"object":He.value=JSON.stringify(He.value);break;case"undefined":case"null":He.value=""}ze={content:He.value,colSpan:He.width,rowSpan:He.height},ne&&(ze.styles=ne),Se.push(ze)}else Se.push("")}),Se}x.orientation||(x.orientation=l.orientation||"landscape"),x.unit||(x.unit="pt"),_.forEach(Vt=>{switch(Vt.type){case"header":a.push(tt(Vt));break;case"group":u.push(tt(Vt,C));break;case"calc":u.push(tt(Vt,R));break;case"row":u.push(tt(Vt))}});var yt=new jspdf.jsPDF(x);l&&l.autoTable&&(m="function"==typeof l.autoTable?l.autoTable(yt)||{}:l.autoTable),U&&(m.didDrawPage=function(Vt){yt.text(U,40,30)}),m.head=a,m.body=u,yt.autoTable(m),l&&l.documentProcessing&&l.documentProcessing(yt),o(yt.output("arraybuffer"),"application/pdf")},xlsx:function(_,l,o){var u=l.sheetName||"Sheet1",m=XLSX.utils.book_new(),C=new du(this);function x(){var yt=[],Vt=[],ne={},Se={s:{c:0,r:0},e:{c:_[0]?_[0].columns.reduce((He,ze)=>He+(ze&&ze.width?ze.width:1),0):0,r:_.length}};return _.forEach((He,ze)=>{var qe=[];He.columns.forEach(function(Mi,en){Mi?(qe.push(Mi.value instanceof Date||"object"!=typeof Mi.value?Mi.value:JSON.stringify(Mi.value)),(Mi.width>1||Mi.height>-1)&&Vt.push({s:{r:ze,c:en},e:{r:ze+Mi.height-1,c:en+Mi.width-1}})):qe.push("")}),yt.push(qe)}),XLSX.utils.sheet_add_aoa(ne,yt),ne["!ref"]=XLSX.utils.encode_range(Se),Vt.length&&(ne["!merges"]=Vt),ne}if(m.SheetNames=[],m.Sheets={},l.sheetOnly)o(x());else{if(l.sheets)for(var U in l.sheets)!0===l.sheets[U]?(m.SheetNames.push(U),m.Sheets[U]=x()):(m.SheetNames.push(U),C.commsSend(l.sheets[U],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(yt){m.Sheets[U]=yt}}));else m.SheetNames.push(u),m.Sheets[u]=x();l.documentProcessing&&(m=l.documentProcessing(m)),o(function(yt){for(var Vt=new ArrayBuffer(yt.length),ne=new Uint8Array(Vt),Se=0;Se!=yt.length;++Se)ne[Se]=255&yt.charCodeAt(Se);return Vt}(XLSX.write(m,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(_,l,o){this.modExists("export",!0)&&o(this.modules.export.genereateHTMLTable(_),"text/html")}};let Zd=(()=>{class _ extends go{constructor(o){super(o),this.registerTableOption("downloadReady",function(a,u){return u}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(o,a,u,m){this.download(o,a,u,m,!0)}download(o,a,u,m,C){var R=!1;if("function"==typeof o?R=o:_.downloaders[o]?R=_.downloaders[o]:console.warn("Download Error - No such download type found: ",o),R){var U=this.generateExportList(m);R.call(this.table,U,u||{},function(tt,yt){C?!0===C?this.triggerDownload(tt,yt,o,a,!0):C(tt):this.triggerDownload(tt,yt,o,a)}.bind(this))}}generateExportList(o){var a=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,o||this.table.options.downloadRowRange,"download"),u=this.table.options.groupHeaderDownload;return u&&!Array.isArray(u)&&(u=[u]),a.forEach(m=>{var C;"group"===m.type&&(C=m.columns[0],u&&u[m.indent]&&(C.value=u[m.indent](C.value,m.component._group.getRowCount(),m.component._group.getData(),m.component)))}),a}triggerDownload(o,a,u,m,C){var R=document.createElement("a"),x=new Blob([o],{type:a});m=m||"Tabulator."+("function"==typeof u?"txt":u),(x=this.table.options.downloadReady(o,x))&&(C?window.open(window.URL.createObjectURL(x)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(x,m):(R.setAttribute("href",window.URL.createObjectURL(x)),R.setAttribute("download",m),R.style.display="none",document.body.appendChild(R),R.click(),document.body.removeChild(R)),this.dispatchExternal("downloadComplete"))}commsReceived(o,a,u){"intercept"===a&&this.download(u.type,"",u.options,u.active,u.intercept)}}return _.moduleName="download",_.downloaders=Df,_})();function vd(_,l){var o=l.mask,a=void 0!==l.maskLetterChar?l.maskLetterChar:"A",u=void 0!==l.maskNumberChar?l.maskNumberChar:"9",m=void 0!==l.maskWildcardChar?l.maskWildcardChar:"*";function C(R){var x=o[R];void 0!==x&&x!==m&&x!==a&&x!==u&&(_.value=_.value+""+x,C(R+1))}_.addEventListener("keydown",R=>{var x=_.value.length,U=R.key;if(R.keyCode>46){if(x>=o.length)return R.preventDefault(),R.stopPropagation(),!1;switch(o[x]){case a:if(U.toUpperCase()==U.toLowerCase())return R.preventDefault(),R.stopPropagation(),!1;break;case u:if(isNaN(U))return R.preventDefault(),R.stopPropagation(),!1;break;case m:break;default:if(U!==o[x])return R.preventDefault(),R.stopPropagation(),!1}}}),_.addEventListener("keyup",R=>{R.keyCode>46&&l.maskAutoFill&&C(_.value.length)}),_.placeholder||(_.placeholder=o),l.maskAutoFill&&C(_.value.length)}var Ut={input:function(_,l,o,a,u){var m=_.getValue(),C=document.createElement("input");if(C.setAttribute("type",u.search?"search":"text"),C.style.padding="4px",C.style.width="100%",C.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let x in u.elementAttributes)"+"==x.charAt(0)?(x=x.slice(1),C.setAttribute(x,C.getAttribute(x)+u.elementAttributes["+"+x])):C.setAttribute(x,u.elementAttributes[x]);function R(x){null==m&&""!==C.value||C.value!==m?o(C.value)&&(m=C.value):a()}return C.value=void 0!==m?m:"",l(function(){C.focus({preventScroll:!0}),C.style.height="100%"}),C.addEventListener("change",R),C.addEventListener("blur",R),C.addEventListener("keydown",function(x){switch(x.keyCode){case 13:R();break;case 27:a();break;case 35:case 36:x.stopPropagation()}}),u.mask&&vd(C,u),C},textarea:function(_,l,o,a,u){var m=_.getValue(),C=u.verticalNavigation||"hybrid",R=String(null!=m?m:""),U=(R.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),tt=0;if(U.style.display="block",U.style.padding="2px",U.style.height="100%",U.style.width="100%",U.style.boxSizing="border-box",U.style.whiteSpace="pre-wrap",U.style.resize="none",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let Vt in u.elementAttributes)"+"==Vt.charAt(0)?(Vt=Vt.slice(1),U.setAttribute(Vt,U.getAttribute(Vt)+u.elementAttributes["+"+Vt])):U.setAttribute(Vt,u.elementAttributes[Vt]);function yt(Vt){null==m&&""!==U.value||U.value!==m?(o(U.value)&&(m=U.value),setTimeout(function(){_.getRow().normalizeHeight()},300)):a()}return U.value=R,l(function(){U.focus({preventScroll:!0}),U.style.height="100%",U.style.height=U.scrollHeight+"px",_.getRow().normalizeHeight()}),U.addEventListener("change",yt),U.addEventListener("blur",yt),U.addEventListener("keyup",function(){U.style.height="";var Vt=U.scrollHeight;U.style.height=Vt+"px",Vt!=tt&&(tt=Vt,_.getRow().normalizeHeight())}),U.addEventListener("keydown",function(Vt){switch(Vt.keyCode){case 27:a();break;case 38:("editor"==C||"hybrid"==C&&U.selectionStart)&&(Vt.stopImmediatePropagation(),Vt.stopPropagation());break;case 40:("editor"==C||"hybrid"==C&&U.selectionStart!==U.value.length)&&(Vt.stopImmediatePropagation(),Vt.stopPropagation());break;case 35:case 36:Vt.stopPropagation()}}),u.mask&&vd(U,u),U},number:function(_,l,o,a,u){var m=_.getValue(),C=u.verticalNavigation||"editor",R=document.createElement("input");if(R.setAttribute("type","number"),void 0!==u.max&&R.setAttribute("max",u.max),void 0!==u.min&&R.setAttribute("min",u.min),void 0!==u.step&&R.setAttribute("step",u.step),R.style.padding="4px",R.style.width="100%",R.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let tt in u.elementAttributes)"+"==tt.charAt(0)?(tt=tt.slice(1),R.setAttribute(tt,R.getAttribute(tt)+u.elementAttributes["+"+tt])):R.setAttribute(tt,u.elementAttributes[tt]);R.value=m;var x=function(tt){U()};function U(){var tt=R.value;!isNaN(tt)&&""!==tt&&(tt=Number(tt)),tt!==m?o(tt)&&(m=tt):a()}return l(function(){R.removeEventListener("blur",x),R.focus({preventScroll:!0}),R.style.height="100%",R.addEventListener("blur",x)}),R.addEventListener("keydown",function(tt){switch(tt.keyCode){case 13:U();break;case 27:a();break;case 38:case 40:"editor"==C&&(tt.stopImmediatePropagation(),tt.stopPropagation());break;case 35:case 36:tt.stopPropagation()}}),u.mask&&vd(R,u),R},range:function(_,l,o,a,u){var m=_.getValue(),C=document.createElement("input");if(C.setAttribute("type","range"),void 0!==u.max&&C.setAttribute("max",u.max),void 0!==u.min&&C.setAttribute("min",u.min),void 0!==u.step&&C.setAttribute("step",u.step),C.style.padding="4px",C.style.width="100%",C.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let x in u.elementAttributes)"+"==x.charAt(0)?(x=x.slice(1),C.setAttribute(x,C.getAttribute(x)+u.elementAttributes["+"+x])):C.setAttribute(x,u.elementAttributes[x]);function R(){var x=C.value;!isNaN(x)&&""!==x&&(x=Number(x)),x!=m?o(x)&&(m=x):a()}return C.value=m,l(function(){C.focus({preventScroll:!0}),C.style.height="100%"}),C.addEventListener("blur",function(x){R()}),C.addEventListener("keydown",function(x){switch(x.keyCode){case 13:R();break;case 27:a()}}),C},select:function(_,l,o,a,u){var m=this,C=_.getElement(),R=_.getValue(),x=u.verticalNavigation||"editor",U=void 0!==R||null===R?Array.isArray(R)?R:[R]:void 0!==u.defaultValue?u.defaultValue:[],tt=document.createElement("input"),yt=document.createElement("div"),Vt=u.multiselect,ne=[],Se={},He=[],ze=[],qe=!0,Mi=!1,en="",Zi=null;function $i(rn){var ba,Kn={},gs=m.table.getData();return(ba=rn?m.table.columnManager.getColumnByField(rn):_.getColumn()._getSelf())?gs.forEach(function(Th){var Hh=ba.getFieldValue(Th);null!=Hh&&""!==Hh&&(Kn[Hh]=!0)}):console.warn("unable to find matching column to create select lookup list:",rn),Object.keys(Kn)}function Ln(rn,Kn){!Vt&&Se&&Se.element&&Se.element.classList.remove("active"),Se&&Se.element&&Se.element.classList.remove("focused"),Se=rn,rn.element&&(rn.element.classList.add("focused"),Kn&&rn.element.classList.add("active")),rn&&rn.element&&rn.element.scrollIntoView&&rn.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Xn(rn){-1==ze.indexOf(rn)&&(ze.push(rn),Ln(rn,!0)),Cn()}function Vr(rn){var Kn=ze[rn];rn>-1&&(ze.splice(rn,1),Kn.element&&Kn.element.classList.remove("active"))}function Un(rn){rn||(rn=Se);var Kn=ze.indexOf(rn);Kn>-1?Vr(Kn):(!0!==Vt&&ze.length>=Vt&&Vr(0),Xn(rn)),Cn()}function Nr(rn){mo(),rn||(rn=Se),rn&&(tt.value=rn.label,o(rn.value)),U=[rn.value]}function rs(rn){rn||mo();var Kn=[];ze.forEach(gs=>{Kn.push(gs.value)}),U=Kn,o(Kn)}function Cn(){var rn=[];ze.forEach(Kn=>{rn.push(Kn.label)}),tt.value=rn.join(", "),!1===m.currentCell&&rs(!0)}function mr(){mo(),a()}function mo(){yt.parentNode&&yt.parentNode.removeChild(yt),m.table.rowManager.element.removeEventListener("scroll",mr)}if((Array.isArray(u)||!Array.isArray(u)&&"object"==typeof u&&!u.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),u={values:u}),tt.setAttribute("type","text"),tt.style.padding="4px",tt.style.width="100%",tt.style.boxSizing="border-box",tt.style.cursor="default",tt.readOnly=0!=this.currentCell,u.elementAttributes&&"object"==typeof u.elementAttributes)for(let rn in u.elementAttributes)"+"==rn.charAt(0)?(rn=rn.slice(1),tt.setAttribute(rn,tt.getAttribute(rn)+u.elementAttributes["+"+rn])):tt.setAttribute(rn,u.elementAttributes[rn]);return tt.value=void 0!==R||null===R?R:"",tt.addEventListener("search",function(rn){tt.value||(function(){var rn=ze.length;for(let Kn=0;Kn<rn;Kn++)Vr(0)}(),rs())}),tt.addEventListener("keydown",function(rn){var Kn;switch(rn.keyCode){case 38:Kn=ne.indexOf(Se),("editor"==x||"hybrid"==x&&Kn)&&(rn.stopImmediatePropagation(),rn.stopPropagation(),rn.preventDefault(),Kn>0&&Ln(ne[Kn-1],!Vt));break;case 40:Kn=ne.indexOf(Se),("editor"==x||"hybrid"==x&&Kn<ne.length-1)&&(rn.stopImmediatePropagation(),rn.stopPropagation(),rn.preventDefault(),Kn<ne.length-1&&Ln(-1==Kn?ne[0]:ne[Kn+1],!Vt));break;case 37:case 39:rn.stopImmediatePropagation(),rn.stopPropagation(),rn.preventDefault();break;case 13:Vt?Un():Nr();break;case 27:mr();break;case 9:break;default:!1===m.currentCell&&rn.preventDefault(),rn.keyCode>=38&&rn.keyCode<=90&&function(rn){clearTimeout(Zi);var Kn=String.fromCharCode(event.keyCode).toLowerCase();en+=Kn.toLowerCase();var gs=ne.find(ba=>void 0!==ba.label&&ba.label.toLowerCase().startsWith(en));gs&&Ln(gs,!Vt),Zi=setTimeout(()=>{en=""},800)}()}}),tt.addEventListener("blur",function(rn){qe&&(Vt?rs():mr())}),tt.addEventListener("focus",function(rn){Mi||function(){if(ze=[],!yt.parentNode){!function(rn,Kn){var gs=[],ba=[];function Th(wo){return Kn.indexOf((wo={label:wo.label,value:wo.value,itemParams:wo.itemParams,elementAttributes:wo.elementAttributes,element:!1}).value)>-1&&Xn(wo),gs.push(wo),ba.push(wo),wo}if("function"==typeof rn&&(rn=rn(_)),Array.isArray(rn))rn.forEach(function(wo){var Al;"object"==typeof wo?wo.options?(ba.push(Al={label:wo.label,group:!0,itemParams:wo.itemParams,elementAttributes:wo.elementAttributes,element:!1}),wo.options.forEach(function(jl){Th(jl)})):Th(wo):(Kn.indexOf((Al={label:wo,value:wo,element:!1}).value)>-1&&Xn(Al),gs.push(Al),ba.push(Al))});else for(var Hh in rn){var ed={label:rn[Hh],value:Hh,element:!1};Kn.indexOf(ed.value)>-1&&Xn(ed),gs.push(ed),ba.push(ed)}u.sortValuesList&&(gs.sort((wo,Al)=>wo.label<Al.label?-1:wo.label>Al.label?1:0),ba.sort((wo,Al)=>wo.label<Al.label?-1:wo.label>Al.label?1:0),"asc"!==u.sortValuesList&&(gs.reverse(),ba.reverse())),ne=gs,He=ba,function(){for(;yt.firstChild;)yt.removeChild(yt.firstChild);He.forEach(function(rn){var Kn=rn.element;if(!Kn){if(Kn=document.createElement("div"),rn.label=u.listItemFormatter?u.listItemFormatter(rn.value,rn.label,_,Kn,rn.itemParams):rn.label,rn.group?(Kn.classList.add("tabulator-edit-select-list-group"),Kn.tabIndex=0,Kn.innerHTML=""===rn.label?"&nbsp;":rn.label):(Kn.classList.add("tabulator-edit-select-list-item"),Kn.tabIndex=0,Kn.innerHTML=""===rn.label?"&nbsp;":rn.label,Kn.addEventListener("click",function(){Mi=!0,setTimeout(()=>{Mi=!1},10),Vt?(Un(rn),tt.focus()):Nr(rn)}),ze.indexOf(rn)>-1&&Kn.classList.add("active")),rn.elementAttributes&&"object"==typeof rn.elementAttributes)for(let gs in rn.elementAttributes)"+"==gs.charAt(0)?(gs=gs.slice(1),Kn.setAttribute(gs,tt.getAttribute(gs)+rn.elementAttributes["+"+gs])):Kn.setAttribute(gs,rn.elementAttributes[gs]);Kn.addEventListener("mousedown",function(){qe=!1,setTimeout(function(){qe=!0},10)}),rn.element=Kn}yt.appendChild(Kn)})}()}(!0===u.values?$i():"string"==typeof u.values?$i(u.values):u.values||[],U);var rn=$s.elOffset(C);yt.style.minWidth=C.offsetWidth+"px",yt.style.top=rn.top+C.offsetHeight+"px",yt.style.left=rn.left+"px",yt.addEventListener("mousedown",function(Kn){qe=!1,setTimeout(function(){qe=!0},10)}),document.body.appendChild(yt)}}()}),(yt=document.createElement("div")).classList.add("tabulator-edit-select-list"),l(function(){tt.style.height="100%",tt.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",mr)},10),tt},autocomplete:function(_,l,o,a,u){var m=this,C=_.getElement(),R=_.getValue(),x=u.verticalNavigation||"editor",U=void 0!==R||null===R?R:void 0!==u.defaultValue?u.defaultValue:"",tt=document.createElement("input"),yt=document.createElement("div"),Vt=[],ne=!1,Se=!0,He=!1;if(tt.setAttribute("type","search"),tt.style.padding="4px",tt.style.width="100%",tt.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let Cn in u.elementAttributes)"+"==Cn.charAt(0)?(Cn=Cn.slice(1),tt.setAttribute(Cn,tt.getAttribute(Cn)+u.elementAttributes["+"+Cn])):tt.setAttribute(Cn,u.elementAttributes[Cn]);function ze(){!0===u.values?He=qe():"string"==typeof u.values&&(He=qe(u.values))}function qe(Cn){var os,wn={},mr=m.table.getData();return(os=Cn?m.table.columnManager.getColumnByField(Cn):_.getColumn()._getSelf())?(mr.forEach(function(mo){var Xo=os.getFieldValue(mo);null!=Xo&&""!==Xo&&(wn[Xo]=!0)}),wn=u.sortValuesList?"asc"==u.sortValuesList?Object.keys(wn).sort():Object.keys(wn).sort().reverse():Object.keys(wn)):console.warn("unable to find matching column to create autocomplete lookup list:",Cn),wn}function Mi(Cn,wn){var os,mo,mr=[];os=He||u.values||[],u.searchFunc?(mr=u.searchFunc(Cn,os))instanceof Promise?(en(void 0!==u.searchingPlaceholder?u.searchingPlaceholder:"Searching..."),mr.then(Xo=>{mn(Zi(Xo),wn)}).catch(Xo=>{console.err("error in autocomplete search promise:",Xo)})):mn(Zi(mr),wn):(mo=Zi(os),""===Cn?u.showListOnEmpty&&(mr=mo):mo.forEach(function(Xo){(null!==Xo.value||void 0!==Xo.value)&&(String(Xo.value).toLowerCase().indexOf(String(Cn).toLowerCase())>-1||String(Xo.title).toLowerCase().indexOf(String(Cn).toLowerCase())>-1)&&mr.push(Xo)}),mn(mr,wn))}function en(Cn){var wn=document.createElement("div");$i(),!1!==Cn&&(wn.classList.add("tabulator-edit-select-list-notice"),wn.tabIndex=0,Cn instanceof Node?wn.appendChild(Cn):wn.innerHTML=Cn,yt.appendChild(wn))}function Zi(Cn){var wn=[];if(Array.isArray(Cn))Cn.forEach(function(mo){var Xo={};"object"==typeof mo?(Xo.title=u.listItemFormatter?u.listItemFormatter(mo.value,mo.label):mo.label,Xo.value=mo.value):(Xo.title=u.listItemFormatter?u.listItemFormatter(mo,mo):mo,Xo.value=mo),wn.push(Xo)});else for(var mr in Cn){var os={title:u.listItemFormatter?u.listItemFormatter(mr,Cn[mr]):Cn[mr],value:mr};wn.push(os)}return wn}function $i(){for(;yt.firstChild;)yt.removeChild(yt.firstChild)}function mn(Cn,wn){Cn.length?function(Cn,wn){var mr=!1;$i(),(Vt=Cn).forEach(function(os){var mo=os.element;mo||((mo=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),mo.tabIndex=0,mo.innerHTML=os.title,mo.addEventListener("click",function(Xo){Vr(os),Ln()}),mo.addEventListener("mousedown",function(Xo){Se=!1,setTimeout(function(){Se=!0},10)}),os.element=mo,wn&&os.value==R&&(tt.value=os.title,os.element.classList.add("active"),mr=!0),os===ne&&(os.element.classList.add("active"),mr=!0)),yt.appendChild(mo)}),mr||Vr(!1)}(Cn,wn):u.emptyPlaceholder&&en(u.emptyPlaceholder)}function Ln(){Un(),ne?R!==ne.value?(R=ne.value,tt.value=ne.title,o(ne.value)):a():u.freetext||u.allowEmpty&&""===tt.value?(R=tt.value,o(tt.value)):a()}function Vr(Cn,wn){ne&&ne.element&&ne.element.classList.remove("active"),ne=Cn,Cn&&Cn.element&&Cn.element.classList.add("active"),Cn&&Cn.element&&Cn.element.scrollIntoView&&Cn.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Un(){yt.parentNode&&yt.parentNode.removeChild(yt),m.table.rowManager.element.removeEventListener("scroll",Nr)}function Nr(){Un(),a()}return yt.classList.add("tabulator-edit-select-list"),yt.addEventListener("mousedown",function(Cn){Se=!1,setTimeout(function(){Se=!0},10)}),tt.addEventListener("keydown",function(Cn){var wn;switch(Cn.keyCode){case 38:wn=Vt.indexOf(ne),("editor"==x||"hybrid"==x&&wn)&&(Cn.stopImmediatePropagation(),Cn.stopPropagation(),Cn.preventDefault(),Vr(wn>0&&Vt[wn-1]));break;case 40:wn=Vt.indexOf(ne),("editor"==x||"hybrid"==x&&wn<Vt.length-1)&&(Cn.stopImmediatePropagation(),Cn.stopPropagation(),Cn.preventDefault(),wn<Vt.length-1&&Vr(-1==wn?Vt[0]:Vt[wn+1]));break;case 37:case 39:Cn.stopImmediatePropagation(),Cn.stopPropagation();break;case 13:Ln();break;case 27:Nr();break;case 36:case 35:Cn.stopImmediatePropagation()}}),tt.addEventListener("keyup",function(Cn){switch(Cn.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:Mi(tt.value)}}),tt.addEventListener("search",function(Cn){Mi(tt.value)}),tt.addEventListener("blur",function(Cn){Se&&Ln()}),tt.addEventListener("focus",function(Cn){var wn=U;ze(),function(){if(!yt.parentNode){for(;yt.firstChild;)yt.removeChild(yt.firstChild);var Cn=$s.elOffset(C);yt.style.minWidth=C.offsetWidth+"px",yt.style.top=Cn.top+C.offsetHeight+"px",yt.style.left=Cn.left+"px",document.body.appendChild(yt)}}(),tt.value=wn,Mi(wn,!0)}),l(function(){tt.style.height="100%",tt.focus({preventScroll:!0})}),u.mask&&vd(tt,u),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Nr)},10),ze(),tt.value=U,Mi(U,!0),tt},star:function(_,l,o,a,u){var m=this,C=_.getElement(),R=_.getValue(),x=C.getElementsByTagName("svg").length||5,U=C.getElementsByTagName("svg")[0]?C.getElementsByTagName("svg")[0].getAttribute("width"):14,tt=[],yt=document.createElement("div"),Vt=document.createElementNS("http://www.w3.org/2000/svg","svg");function ne(qe){tt.forEach(function(Mi,en){en<qe?("ie"==m.table.browser?Mi.setAttribute("class","tabulator-star-active"):Mi.classList.replace("tabulator-star-inactive","tabulator-star-active"),Mi.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==m.table.browser?Mi.setAttribute("class","tabulator-star-inactive"):Mi.classList.replace("tabulator-star-active","tabulator-star-inactive"),Mi.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function Se(qe){var Mi=document.createElement("span"),en=Vt.cloneNode(!0);tt.push(en),Mi.addEventListener("mouseenter",function(Zi){Zi.stopPropagation(),Zi.stopImmediatePropagation(),ne(qe)}),Mi.addEventListener("mousemove",function(Zi){Zi.stopPropagation(),Zi.stopImmediatePropagation()}),Mi.addEventListener("click",function(Zi){Zi.stopPropagation(),Zi.stopImmediatePropagation(),o(qe),C.blur()}),Mi.appendChild(en),yt.appendChild(Mi)}function He(qe){R=qe,ne(qe)}if(C.style.whiteSpace="nowrap",C.style.overflow="hidden",C.style.textOverflow="ellipsis",yt.style.verticalAlign="middle",yt.style.display="inline-block",yt.style.padding="4px",Vt.setAttribute("width",U),Vt.setAttribute("height",U),Vt.setAttribute("viewBox","0 0 512 512"),Vt.setAttribute("xml:space","preserve"),Vt.style.padding="0 1px",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let qe in u.elementAttributes)"+"==qe.charAt(0)?(qe=qe.slice(1),yt.setAttribute(qe,yt.getAttribute(qe)+u.elementAttributes["+"+qe])):yt.setAttribute(qe,u.elementAttributes[qe]);for(var ze=1;ze<=x;ze++)Se(ze);return ne(R=Math.min(parseInt(R),x)),yt.addEventListener("mousemove",function(qe){ne(0)}),yt.addEventListener("click",function(qe){o(0)}),C.addEventListener("blur",function(qe){a()}),C.addEventListener("keydown",function(qe){switch(qe.keyCode){case 39:He(R+1);break;case 37:He(R-1);break;case 13:o(R);break;case 27:a()}}),yt},progress:function(_,l,o,a,u){var He,ze,Vt,ne,m=_.getElement(),C=void 0===u.max?(null==(He=m.getElementsByTagName("div")[0])?void 0:He.getAttribute("max"))||100:u.max,R=void 0===u.min?(null==(ze=m.getElementsByTagName("div")[0])?void 0:ze.getAttribute("min"))||0:u.min,x=(C-R)/100,U=_.getValue()||0,tt=document.createElement("div"),yt=document.createElement("div");function Se(){var qe=window.getComputedStyle(m,null),Mi=x*Math.round(yt.offsetWidth/((m.clientWidth-parseInt(qe.getPropertyValue("padding-left"))-parseInt(qe.getPropertyValue("padding-right")))/100))+R;o(Mi),m.setAttribute("aria-valuenow",Mi),m.setAttribute("aria-label",U)}if(tt.style.position="absolute",tt.style.right="0",tt.style.top="0",tt.style.bottom="0",tt.style.width="5px",tt.classList.add("tabulator-progress-handle"),yt.style.display="inline-block",yt.style.position="relative",yt.style.height="100%",yt.style.backgroundColor="#488CE9",yt.style.maxWidth="100%",yt.style.minWidth="0%",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let qe in u.elementAttributes)"+"==qe.charAt(0)?(qe=qe.slice(1),yt.setAttribute(qe,yt.getAttribute(qe)+u.elementAttributes["+"+qe])):yt.setAttribute(qe,u.elementAttributes[qe]);return m.style.padding="4px 4px",U=Math.min(parseFloat(U),C),U=Math.max(parseFloat(U),R),U=Math.round((U-R)/x),yt.style.width=U+"%",m.setAttribute("aria-valuemin",R),m.setAttribute("aria-valuemax",C),yt.appendChild(tt),tt.addEventListener("mousedown",function(qe){Vt=qe.screenX,ne=yt.offsetWidth}),tt.addEventListener("mouseover",function(){tt.style.cursor="ew-resize"}),m.addEventListener("mousemove",function(qe){Vt&&(yt.style.width=ne+qe.screenX-Vt+"px")}),m.addEventListener("mouseup",function(qe){Vt&&(qe.stopPropagation(),qe.stopImmediatePropagation(),Vt=!1,ne=!1,Se())}),m.addEventListener("keydown",function(qe){switch(qe.keyCode){case 39:qe.preventDefault(),yt.style.width=yt.clientWidth+m.clientWidth/100+"px";break;case 37:qe.preventDefault(),yt.style.width=yt.clientWidth-m.clientWidth/100+"px";break;case 9:case 13:Se();break;case 27:a()}}),m.addEventListener("blur",function(){a()}),yt},tickCross:function(_,l,o,a,u){var m=_.getValue(),C=document.createElement("input"),R=u.tristate,x=void 0===u.indeterminateValue?null:u.indeterminateValue,U=!1;if(C.setAttribute("type","checkbox"),C.style.marginTop="5px",C.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let yt in u.elementAttributes)"+"==yt.charAt(0)?(yt=yt.slice(1),C.setAttribute(yt,C.getAttribute(yt)+u.elementAttributes["+"+yt])):C.setAttribute(yt,u.elementAttributes[yt]);function tt(yt){return R?yt?U?x:C.checked:C.checked&&!U?(C.checked=!1,C.indeterminate=!0,U=!0,x):(U=!1,C.checked):C.checked}return C.value=m,R&&(void 0===m||m===x||""===m)&&(U=!0,C.indeterminate=!0),"firefox"!=this.table.browser&&l(function(){C.focus({preventScroll:!0})}),C.checked=!0===m||"true"===m||"True"===m||1===m,l(function(){C.focus()}),C.addEventListener("change",function(yt){o(tt())}),C.addEventListener("blur",function(yt){o(tt(!0))}),C.addEventListener("keydown",function(yt){13==yt.keyCode&&o(tt()),27==yt.keyCode&&a()}),C}};let ii=(()=>{class _ extends go{constructor(o){super(o),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=_.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(o){var a=this.currentCell,u=this.options("tabEndNewRow");a&&(this.navigateNext(o)||u&&(a.getElement().firstChild.blur(),(u=this.table.addRow(!0===u?{}:"function"==typeof u?u(a.row.getComponent()):Object.assign({},u))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(o){return!!o.modules.edit&&o.modules.edit.edited}cellCancelEdit(o){o===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(o){o||(o=this.modules.edit.getEditedCells()),Array.isArray(o)||(o=[o]),o.forEach(a=>{this.modules.edit.clearEdited(a._getSelf())})}navigatePrev(o){var u,m,a=this.currentCell;if(a){if(o&&o.preventDefault(),u=this.navigateLeft())return!0;if((m=this.table.rowManager.prevDisplayRow(a.row,!0))&&(u=this.findNextEditableCell(m,m.cells.length)))return u.getComponent().edit(),!0}return!1}navigateNext(o){var u,m,a=this.currentCell;if(a){if(o&&o.preventDefault(),u=this.navigateRight())return!0;if((m=this.table.rowManager.nextDisplayRow(a.row,!0))&&(u=this.findNextEditableCell(m,-1)))return u.getComponent().edit(),!0}return!1}navigateLeft(o){var u,m,a=this.currentCell;return!(!a||(o&&o.preventDefault(),u=a.getIndex(),m=this.findPrevEditableCell(a.row,u),!m)||(m.getComponent().edit(),0))}navigateRight(o){var u,m,a=this.currentCell;return!(!a||(o&&o.preventDefault(),u=a.getIndex(),m=this.findNextEditableCell(a.row,u),!m)||(m.getComponent().edit(),0))}navigateUp(o){var u,m,a=this.currentCell;return!(!a||(o&&o.preventDefault(),u=a.getIndex(),m=this.table.rowManager.prevDisplayRow(a.row,!0),!m)||(m.cells[u].getComponent().edit(),0))}navigateDown(o){var u,m,a=this.currentCell;return!(!a||(o&&o.preventDefault(),u=a.getIndex(),m=this.table.rowManager.nextDisplayRow(a.row,!0),!m)||(m.cells[u].getComponent().edit(),0))}findNextEditableCell(o,a){var u=!1;if(a<o.cells.length-1)for(var m=a+1;m<o.cells.length;m++){let C=o.cells[m];if(C.column.modules.edit&&$s.elVisible(C.getElement())){let R=!0;if("function"==typeof C.column.modules.edit.check&&(R=C.column.modules.edit.check(C.getComponent())),R){u=C;break}}}return u}findPrevEditableCell(o,a){var u=!1;if(a>0)for(var m=a-1;m>=0;m--){let C=o.cells[m],R=!0;if(C.column.modules.edit&&$s.elVisible(C.getElement())&&("function"==typeof C.column.modules.edit.check&&(R=C.column.modules.edit.check(C.getComponent())),R)){u=C;break}}return u}initializeColumnCheck(o){void 0!==o.definition.editor&&this.initializeColumn(o)}columnDeleteCheck(o){this.currentCell&&this.currentCell.column===o&&this.cancelEdit()}rowDeleteCheck(o){this.currentCell&&this.currentCell.row===o&&this.cancelEdit()}initializeColumn(o){var a={editor:!1,blocked:!1,check:o.definition.editable,params:o.definition.editorParams||{}};switch(typeof o.definition.editor){case"string":this.editors[o.definition.editor]?a.editor=this.editors[o.definition.editor]:console.warn("Editor Error - No such editor found: ",o.definition.editor);break;case"function":a.editor=o.definition.editor;break;case"boolean":!0===o.definition.editor&&("function"!=typeof o.definition.formatter?a.editor=this.editors[o.definition.formatter]?this.editors[o.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",o.definition.formatter))}a.editor&&(o.modules.edit=a)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(o){var u,a=this.currentCell;if(this.invalidEdit=!1,a){for(this.currentCell=!1,u=a.getElement(),o?a.validate&&a.validate():u.classList.remove("tabulator-validation-fail"),u.classList.remove("tabulator-editing");u.firstChild;)u.removeChild(u.firstChild);a.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var o=this.currentCell,a=this.currentCell.getComponent();this.clearEditor(!0),o.setValueActual(o.getValue()),o.cellRendered(),("textarea"==o.column.definition.editor||o.column.definition.variableHeight)&&o.row.normalizeHeight(!0),o.column.definition.cellEditCancelled&&o.column.definition.cellEditCancelled.call(this.table,a),this.dispatchExternal("cellEditCancelled",a)}}bindEditor(o){if(o.column.modules.edit){var a=this,u=o.getElement(!0);u.setAttribute("tabindex",0),u.addEventListener("click",function(m){u.classList.contains("tabulator-editing")||u.focus({preventScroll:!0})}),u.addEventListener("mousedown",function(m){2===m.button?m.preventDefault():a.mouseClick=!0}),u.addEventListener("focus",function(m){a.recursionBlock||a.edit(o,m,!1)})}}focusCellNoEvent(o,a){this.recursionBlock=!0,a&&"ie"===this.table.browser||o.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(o,a){this.focusCellNoEvent(o),this.edit(o,!1,a)}focusScrollAdjust(o){if("virtual"==this.table.rowManager.getRenderMode()){var a=this.table.rowManager.element.scrollTop,u=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,m=o.row.getElement();m.offsetTop<a?this.table.rowManager.element.scrollTop-=a-m.offsetTop:m.offsetTop+m.offsetHeight>u&&(this.table.rowManager.element.scrollTop+=m.offsetTop+m.offsetHeight-u);var R=this.table.rowManager.element.scrollLeft,x=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,U=o.getElement();this.table.modExists("frozenColumns")&&(R+=parseInt(this.table.modules.frozenColumns.leftMargin),x-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(R-=parseInt(this.table.columnManager.renderer.vDomPadLeft),x-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),U.offsetLeft<R?this.table.rowManager.element.scrollLeft-=R-U.offsetLeft:U.offsetLeft+U.offsetWidth>x&&(this.table.rowManager.element.scrollLeft+=U.offsetLeft+U.offsetWidth-x)}}edit(o,a,u){var U,tt,yt,m=this,C=!0,R=function(){},x=o.getElement();if(!this.currentCell){if(o.column.modules.edit.blocked)return this.mouseClick=!1,x.blur(),!1;switch(a&&a.stopPropagation(),typeof o.column.modules.edit.check){case"function":C=o.column.modules.edit.check(o.getComponent());break;case"boolean":C=o.column.modules.edit.check}if(C||u){if(m.cancelEdit(),m.currentCell=o,this.focusScrollAdjust(o),tt=o.getComponent(),this.mouseClick&&(this.mouseClick=!1,o.column.definition.cellClick&&o.column.definition.cellClick.call(this.table,a,tt)),o.column.definition.cellEditing&&o.column.definition.cellEditing.call(this.table,tt),this.dispatchExternal("cellEditing",tt),yt="function"==typeof o.column.modules.edit.params?o.column.modules.edit.params(tt):o.column.modules.edit.params,!1===(U=o.column.modules.edit.editor.call(m,tt,function(qe){R=qe},function(qe){if(m.currentCell===o){var Mi=!0;return o.column.modules.validate&&m.table.modExists("validate")&&"manual"!=m.table.options.validationMode&&(Mi=m.table.modules.validate.validate(o.column.modules.validate,o,qe)),!0===Mi||"highlight"===m.table.options.validationMode?(m.clearEditor(),o.modules.edit||(o.modules.edit={}),o.modules.edit.edited=!0,-1==m.editedCells.indexOf(o)&&m.editedCells.push(o),o.setValue(qe,!0),m.table.options.dataTree&&m.table.modExists("dataTree")&&m.table.modules.dataTree.checkForRestyle(o),!0===Mi||(x.classList.add("tabulator-validation-fail"),m.table.externalEvents.dispatch("validationFailed",o.getComponent(),qe,Mi),!1)):(m.invalidEdit=!0,x.classList.add("tabulator-validation-fail"),m.focusCellNoEvent(o,!0),R(),m.table.externalEvents.dispatch("validationFailed",o.getComponent(),qe,Mi),!1)}},function(){m.currentCell===o&&(m.cancelEdit(),m.table.options.dataTree&&m.table.modExists("dataTree")&&m.table.modules.dataTree.checkForRestyle(o))},yt)))return x.blur(),!1;if(!(U instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",U),x.blur(),!1;for(x.classList.add("tabulator-editing"),o.row.getElement().classList.add("tabulator-row-editing");x.firstChild;)x.removeChild(x.firstChild);x.appendChild(U),R();for(var He=x.children,ze=0;ze<He.length;ze++)He[ze].addEventListener("click",function(qe){qe.stopPropagation()});return!0}return this.mouseClick=!1,x.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var o=[];return this.editedCells.forEach(a=>{o.push(a.getComponent())}),o}clearEdited(o){var a;o.modules.edit&&o.modules.edit.edited&&(o.modules.edit.edited=!1,o.modules.validate&&(o.modules.validate.invalid=!1)),(a=this.editedCells.indexOf(o))>-1&&this.editedCells.splice(a,1)}}return _.moduleName="edit",_.editors=Ut,_})();class Fi{constructor(l,o,a,u){this.type=l,this.columns=o,this.component=a||!1,this.indent=u||0}}class cn{constructor(l,o,a,u,m){this.value=l,this.component=o||!1,this.width=a,this.height=u,this.depth=m}}let gr=(()=>{class _ extends go{constructor(o){super(o),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(o,a,u,m){this.cloneTableStyle=a,this.config=o||{},this.colVisProp=m;var C=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],R=this.bodyToExportRows(this.rowLookup(u));return C.concat(R)}genereateTable(o,a,u,m){var C=this.generateExportList(o,a,u,m);return this.genereateTableElement(C)}rowLookup(o){var a=[];if("function"==typeof o)o.call(this.table).forEach(u=>{(u=this.table.rowManager.findRow(u))&&a.push(u)});else switch(o){case!0:case"visible":a=this.table.rowManager.getVisibleRows(!0);break;case"all":a=this.table.rowManager.rows;break;case"selected":a=this.table.modules.selectRow.selectedRows;break;default:a=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],a)}generateColumnGroupHeaders(){var o=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(u=>{var m=this.processColumnGroup(u);m&&o.push(m)}),o}processColumnGroup(o){var a=o.columns,u=0,C={title:o.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||o.definition.title,column:o,depth:1};if(a.length){if(C.subGroups=[],C.width=0,a.forEach(R=>{var x=this.processColumnGroup(R);x&&(C.width+=x.width,C.subGroups.push(x),x.depth>u&&(u=x.depth))}),C.depth+=u,!C.width)return!1}else{if(!this.columnVisCheck(o))return!1;C.width=1}return C}columnVisCheck(o){return!1!==o.definition[this.colVisProp]&&(o.visible||!o.visible&&o.definition[this.colVisProp])}headersToExportRows(o){var a=[],u=0,m=[];function C(R,x){var U=u-x;if(void 0===a[x]&&(a[x]=[]),R.height=R.subGroups?1:U-R.depth+1,a[x].push(R),R.height>1)for(let tt=1;tt<R.height;tt++)void 0===a[x+tt]&&(a[x+tt]=[]),a[x+tt].push(!1);if(R.width>1)for(let tt=1;tt<R.width;tt++)a[x].push(!1);R.subGroups&&R.subGroups.forEach(function(tt){C(tt,x+1)})}return o.forEach(function(R){R.depth>u&&(u=R.depth)}),o.forEach(function(R){C(R,0)}),a.forEach(R=>{var x=[];R.forEach(U=>{x.push(U?new cn(U.title,U.column.getComponent(),U.width,U.height,U.depth):null)}),m.push(new Fi("header",x))}),m}bodyToExportRows(o){var a=[],u=[];return this.table.columnManager.columnsByIndex.forEach(m=>{this.columnVisCheck(m)&&a.push(m.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&o.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&o.push(this.table.modules.columnCalcs.botRow)),(o=o.filter(m=>{switch(m.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&m.modules.dataTree.parent)}return!0})).forEach((m,C)=>{var R=m.getData(this.colVisProp),x=[],U=0;switch(m.type){case"group":U=m.level,x.push(new cn(m.key,m.getComponent(),a.length,1));break;case"calc":case"row":a.forEach(tt=>{x.push(new cn(tt._column.getFieldValue(R),tt,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(U=m.modules.dataTree.index)}u.push(new Fi(m.type,x,m.getComponent(),U))}),u}genereateTableElement(o){var a=document.createElement("table"),u=document.createElement("thead"),m=document.createElement("tbody"),C=this.lookupTableStyles(),R=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],x={};return x.rowFormatter=null!==R?R:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(x.treeElementField=this.table.modules.dataTree.elementField),x.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],x.groupHeader&&!Array.isArray(x.groupHeader)&&(x.groupHeader=[x.groupHeader]),a.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),u,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),o.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),o.forEach((U,tt)=>{switch(U.type){case"header":u.appendChild(this.genereateHeaderElement(U,x,C));break;case"group":m.appendChild(this.genereateGroupElement(U,x,C));break;case"calc":m.appendChild(this.genereateCalcElement(U,x,C));break;case"row":let yt=this.genereateRowElement(U,x,C);this.mapElementStyles(tt%2&&C.evenRow?C.evenRow:C.oddRow,yt,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),m.appendChild(yt)}}),u.innerHTML&&a.appendChild(u),a.appendChild(m),this.mapElementStyles(this.table.element,a,["border-top","border-left","border-right","border-bottom"]),a}lookupTableStyles(){var o={};return this.cloneTableStyle&&window.getComputedStyle&&(o.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),o.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),o.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),o.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),o.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],o.firstRow&&(o.styleCells=o.firstRow.getElementsByClassName("tabulator-cell"),o.firstCell=o.styleCells[0],o.lastCell=o.styleCells[o.styleCells.length-1])),o}genereateHeaderElement(o,a,u){var m=document.createElement("tr");return o.columns.forEach(C=>{if(C){var R=document.createElement("th"),x=C.component._column.definition.cssClass?C.component._column.definition.cssClass.split(" "):[];R.colSpan=C.width,R.rowSpan=C.height,R.innerHTML=C.value,this.cloneTableStyle&&(R.style.boxSizing="border-box"),x.forEach(function(U){R.classList.add(U)}),this.mapElementStyles(C.component.getElement(),R,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(C.component._column.contentElement,R,["padding-top","padding-left","padding-right","padding-bottom"]),C.component._column.visible?this.mapElementStyles(C.component.getElement(),R,["width"]):C.component._column.definition.width&&(R.style.width=C.component._column.definition.width+"px"),C.component._column.parent&&this.mapElementStyles(C.component._column.parent.groupElement,R,["border-top"]),m.appendChild(R)}}),m}genereateGroupElement(o,a,u){var m=document.createElement("tr"),C=document.createElement("td"),R=o.columns[0];return m.classList.add("tabulator-print-table-row"),R.value=a.groupHeader&&a.groupHeader[o.indent]?a.groupHeader[o.indent](R.value,o.component._group.getRowCount(),o.component._group.getData(),o.component):!1===a.groupHeader?R.value:o.component._group.generator(R.value,o.component._group.getRowCount(),o.component._group.getData(),o.component),C.colSpan=R.width,C.innerHTML=R.value,m.classList.add("tabulator-print-table-group"),m.classList.add("tabulator-group-level-"+o.indent),R.component.isVisible()&&m.classList.add("tabulator-group-visible"),this.mapElementStyles(u.firstGroup,m,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(u.firstGroup,C,["padding-top","padding-left","padding-right","padding-bottom"]),m.appendChild(C),m}genereateCalcElement(o,a,u){var m=this.genereateRowElement(o,a,u);return m.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(u.calcRow,m,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),m}genereateRowElement(o,a,u){var m=document.createElement("tr");return m.classList.add("tabulator-print-table-row"),o.columns.forEach(C=>{if(C){var R=document.createElement("td"),x=C.component._column,U=C.value,tt={modules:{},getValue:function(){return U},getField:function(){return x.definition.field},getElement:function(){return R},getColumn:function(){return x.getComponent()},getData:function(){return o.component.getData()},getRow:function(){return o.component},getComponent:function(){return tt},column:x};if((x.definition.cssClass?x.definition.cssClass.split(" "):[]).forEach(function(Vt){R.classList.add(Vt)}),this.table.modExists("format")&&!1!==this.config.formatCells)U=this.table.modules.format.formatExportValue(tt,this.colVisProp);else switch(typeof U){case"object":U=JSON.stringify(U);break;case"undefined":case"null":U="";break;default:U=U}U instanceof Node?R.appendChild(U):R.innerHTML=U,u.firstCell&&(this.mapElementStyles(u.firstCell,R,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),x.definition.align&&(R.style.textAlign=x.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(a.treeElementField&&a.treeElementField==x.field||!a.treeElementField&&0==i)&&(o.component._row.modules.dataTree.controlEl&&R.insertBefore(o.component._row.modules.dataTree.controlEl.cloneNode(!0),R.firstChild),o.component._row.modules.dataTree.branchEl&&R.insertBefore(o.component._row.modules.dataTree.branchEl.cloneNode(!0),R.firstChild)),m.appendChild(R),tt.modules.format&&tt.modules.format.renderedCallback&&tt.modules.format.renderedCallback(),a.rowFormatter&&!1!==this.config.formatCells&&a.rowFormatter(o.component)}}),m}genereateHTMLTable(o){var a=document.createElement("div");return a.appendChild(this.genereateTableElement(o)),a.innerHTML}getHtml(o,a,u,m){var C=this.generateExportList(u||this.table.options.htmlOutputConfig,a,o,m||"htmlOutput");return this.genereateHTMLTable(C)}mapElementStyles(o,a,u){if(this.cloneTableStyle&&o&&a){var m={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var C=window.getComputedStyle(o);u.forEach(function(R){a.style[m[R]]=C.getPropertyValue(R)})}}}}return _.moduleName="export",_})();var _n={"=":function(_,l,o,a){return l==_},"<":function(_,l,o,a){return l<_},"<=":function(_,l,o,a){return l<=_},">":function(_,l,o,a){return l>_},">=":function(_,l,o,a){return l>=_},"!=":function(_,l,o,a){return l!=_},regex:function(_,l,o,a){return"string"==typeof _&&(_=new RegExp(_)),_.test(l)},like:function(_,l,o,a){return null==_?l===_:null!=l&&String(l).toLowerCase().indexOf(_.toLowerCase())>-1},keywords:function(_,l,o,a){var u=_.toLowerCase().split(void 0===a.separator?" ":a.separator),m=String(null==l?"":l).toLowerCase(),C=[];return u.forEach(R=>{m.includes(R)&&C.push(!0)}),a.matchAll?C.length===u.length:!!C.length},starts:function(_,l,o,a){return null==_?l===_:null!=l&&String(l).toLowerCase().startsWith(_.toLowerCase())},ends:function(_,l,o,a){return null==_?l===_:null!=l&&String(l).toLowerCase().endsWith(_.toLowerCase())},in:function(_,l,o,a){return Array.isArray(_)?!_.length||_.indexOf(l)>-1:(console.warn("Filter Error - filter value is not an array:",_),!1)}};let $r=(()=>{class _ extends go{constructor(o){super(o),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(o=>{var a=this.table.columnManager.findColumn(o.field);if(!a)return console.warn("Column Filter Error - No matching column found:",o.field),!1;this.setHeaderFilterValue(a,o.value)}),this.tableInitialized=!0}remoteFilterParams(o,a,u,m){return m.filter=this.getFilters(!0,!0),m}userSetFilter(o,a,u,m){this.setFilter(o,a,u,m),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(o,a,u,m){this.addFilter(o,a,u,m),this.refreshFilter()}userSetHeaderFilterFocus(o){var a=this.table.columnManager.findColumn(o);if(!a)return console.warn("Column Filter Focus Error - No matching column found:",o),!1;this.setHeaderFilterFocus(a)}userGetHeaderFilterValue(o){var a=this.table.columnManager.findColumn(o);if(a)return this.getHeaderFilterValue(a);console.warn("Column Filter Error - No matching column found:",o)}userSetHeaderFilterValue(o,a){var u=this.table.columnManager.findColumn(o);if(!u)return console.warn("Column Filter Error - No matching column found:",o),!1;this.setHeaderFilterValue(u,a)}userRemoveFilter(o,a,u){this.removeFilter(o,a,u),this.refreshFilter()}userClearFilter(o){this.clearFilter(o),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(o,a,u){return this.search("rows",o,a,u)}searchData(o,a,u){return this.search("data",o,a,u)}initializeColumnHeaderFilter(o){var a=o.definition;a.headerFilter&&(void 0!==a.headerFilterPlaceholder&&a.field&&this.module("localize").setHeaderFilterColumnPlaceholder(a.field,a.headerFilterPlaceholder),this.initializeColumn(o))}initializeColumn(o,a){var u=this,m=o.getField();o.modules.filter={success:function(R){var yt,x="input"==o.modules.filter.tagType&&"text"==o.modules.filter.attrType||"textarea"==o.modules.filter.tagType?"partial":"match",U="",tt="";if(void 0===o.modules.filter.prevSuccess||o.modules.filter.prevSuccess!==R){if(o.modules.filter.prevSuccess=R,o.modules.filter.emptyFunc(R))delete u.headerFilters[m];else{switch(o.modules.filter.value=R,typeof o.definition.headerFilterFunc){case"string":_.filters[o.definition.headerFilterFunc]?(U=o.definition.headerFilterFunc,yt=function(Vt){var ne=o.definition.headerFilterFuncParams||{},Se=o.getFieldValue(Vt);return ne="function"==typeof ne?ne(R,Se,Vt):ne,_.filters[o.definition.headerFilterFunc](R,Se,Vt,ne)}):console.warn("Header Filter Error - Matching filter function not found: ",o.definition.headerFilterFunc);break;case"function":U=yt=function(Vt){var ne=o.definition.headerFilterFuncParams||{},Se=o.getFieldValue(Vt);return ne="function"==typeof ne?ne(R,Se,Vt):ne,o.definition.headerFilterFunc(R,Se,Vt,ne)}}yt||("partial"===x?(yt=function(Vt){var ne=o.getFieldValue(Vt);return null!=ne&&String(ne).toLowerCase().indexOf(String(R).toLowerCase())>-1},U="like"):(yt=function(Vt){return o.getFieldValue(Vt)==R},U="=")),u.headerFilters[m]={value:R,func:yt,type:U,params:{}}}tt=JSON.stringify(u.headerFilters),u.prevHeaderFilterChangeCheck!==tt&&(u.prevHeaderFilterChangeCheck=tt,u.trackChanges(),u.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(o)}generateHeaderFilterElement(o,a,u){var x,U,tt,yt,Vt,ne,Se,m=this,C=o.modules.filter.success,R=o.getField();if(o.modules.filter.headerElement&&o.modules.filter.headerElement.parentNode&&o.contentElement.removeChild(o.modules.filter.headerElement.parentNode),R){switch(o.modules.filter.emptyFunc=o.definition.headerFilterEmptyCheck||function(ze){return!ze&&"0"!==ze&&0!==ze},(x=document.createElement("div")).classList.add("tabulator-header-filter"),typeof o.definition.headerFilter){case"string":m.table.modules.edit.editors[o.definition.headerFilter]?(U=m.table.modules.edit.editors[o.definition.headerFilter],("tick"===o.definition.headerFilter||"tickCross"===o.definition.headerFilter)&&!o.definition.headerFilterEmptyCheck&&(o.modules.filter.emptyFunc=function(ze){return!0!==ze&&!1!==ze})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",o.definition.editor);break;case"function":U=o.definition.headerFilter;break;case"boolean":o.modules.edit&&o.modules.edit.editor?U=o.modules.edit.editor:o.definition.formatter&&m.table.modules.edit.editors[o.definition.formatter]?(U=m.table.modules.edit.editors[o.definition.formatter],("tick"===o.definition.formatter||"tickCross"===o.definition.formatter)&&!o.definition.headerFilterEmptyCheck&&(o.modules.filter.emptyFunc=function(ze){return!0!==ze&&!1!==ze})):U=m.table.modules.edit.editors.input}if(U){if(yt={getValue:function(){return void 0!==a?a:""},getField:function(){return o.definition.field},getElement:function(){return x},getColumn:function(){return o.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},Se="function"==typeof(Se=o.definition.headerFilterParams||{})?Se.call(m.table):Se,!(tt=U.call(this.table.modules.edit,yt,function(){},C,function(){},Se)))return void console.warn("Filter Error - Cannot add filter to "+R+" column, editor returned a value of false");if(!(tt instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+R+" column, editor should return an instance of Node, the editor returned:",tt);R?m.langBind("headerFilters|columns|"+o.definition.field,function(ze){tt.setAttribute("placeholder",void 0!==ze&&ze?ze:m.langText("headerFilters|default"))}):m.langBind("headerFilters|default",function(ze){tt.setAttribute("placeholder",ze)}),tt.addEventListener("click",function(ze){ze.stopPropagation(),tt.focus()}),tt.addEventListener("focus",ze=>{var qe=this.table.columnManager.element.scrollLeft;qe!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(qe),this.table.columnManager.scrollHorizontal(qe))}),Vt=!1,ne=function(ze){Vt&&clearTimeout(Vt),Vt=setTimeout(function(){C(tt.value)},m.table.options.headerFilterLiveFilterDelay)},o.modules.filter.headerElement=tt,o.modules.filter.attrType=tt.hasAttribute("type")?tt.getAttribute("type").toLowerCase():"",o.modules.filter.tagType=tt.tagName.toLowerCase(),!1!==o.definition.headerFilterLiveFilter&&("autocomplete"===o.definition.headerFilter||"tickCross"===o.definition.headerFilter||("autocomplete"===o.definition.editor||"tickCross"===o.definition.editor)&&!0===o.definition.headerFilter||(tt.addEventListener("keyup",ne),tt.addEventListener("search",ne),"number"==o.modules.filter.attrType&&tt.addEventListener("change",function(ze){C(tt.value)}),"text"==o.modules.filter.attrType&&"ie"!==this.table.browser&&tt.setAttribute("type","search")),("input"==o.modules.filter.tagType||"select"==o.modules.filter.tagType||"textarea"==o.modules.filter.tagType)&&tt.addEventListener("mousedown",function(ze){ze.stopPropagation()})),x.appendChild(tt),o.contentElement.appendChild(x),u||m.headerFilterColumns.push(o)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",o.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(o){o.modules.filter&&o.modules.filter.headerElement&&(o.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(o){o.modules.filter&&o.modules.filter.headerElement&&(o.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(o){o.modules.filter&&o.modules.filter.headerElement?o.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",o.getField())}getHeaderFilterValue(o){if(o.modules.filter&&o.modules.filter.headerElement)return o.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",o.getField())}setHeaderFilterValue(o,a){o&&(o.modules.filter&&o.modules.filter.headerElement?(this.generateHeaderFilterElement(o,a,!0),o.modules.filter.success(a)):console.warn("Column Filter Error - No header filter set on column:",o.getField()))}reloadHeaderFilter(o){o&&(o.modules.filter&&o.modules.filter.headerElement?this.generateHeaderFilterElement(o,o.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",o.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var o=this.changed;return this.changed=!1,o}setFilter(o,a,u,m){this.filterList=[],Array.isArray(o)||(o=[{field:o,type:a,value:u,params:m}]),this.addFilter(o)}addFilter(o,a,u,m){Array.isArray(o)||(o=[{field:o,type:a,value:u,params:m}]),o.forEach(C=>{(C=this.findFilter(C))&&(this.filterList.push(C),this.changed=!0)})}findFilter(o){var a;if(Array.isArray(o))return this.findSubFilters(o);var u=!1;return"function"==typeof o.field?u=function(m){return o.field(m,o.type||{})}:_.filters[o.type]?u=(a=this.table.columnManager.getColumnByField(o.field))?function(m){return _.filters[o.type](o.value,a.getFieldValue(m),m,o.params||{})}:function(m){return _.filters[o.type](o.value,m[o.field],m,o.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",o.type),o.func=u,!!o.func&&o}findSubFilters(o){var a=[];return o.forEach(u=>{(u=this.findFilter(u))&&a.push(u)}),!!a.length&&a}getFilters(o,a){var u=[];return o&&(u=this.getHeaderFilters()),a&&u.forEach(function(m){"function"==typeof m.type&&(m.type="function")}),u.concat(this.filtersToArray(this.filterList,a))}filtersToArray(o,a){var u=[];return o.forEach(m=>{var C;Array.isArray(m)?u.push(this.filtersToArray(m,a)):(C={field:m.field,type:m.type,value:m.value},a&&"function"==typeof C.type&&(C.type="function"),u.push(C))}),u}getHeaderFilters(){var o=[];for(var a in this.headerFilters)o.push({field:a,type:this.headerFilters[a].type,value:this.headerFilters[a].value});return o}removeFilter(o,a,u){Array.isArray(o)||(o=[{field:o,type:a,value:u}]),o.forEach(m=>{var C;(C=this.filterList.findIndex("object"==typeof m.field?R=>m===R:R=>m.field===R.field&&m.type===R.type&&m.value===R.value))>-1?this.filterList.splice(C,1):console.warn("Filter Error - No matching filter type found, ignoring: ",m.type)}),this.trackChanges()}clearFilter(o){this.filterList=[],o&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(o=>{void 0!==o.modules.filter.value&&delete o.modules.filter.value,o.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(o)}),this.trackChanges()}search(o,a,u,m){var C=[],R=[];return Array.isArray(a)||(a=[{field:a,type:u,value:m}]),a.forEach(x=>{(x=this.findFilter(x))&&R.push(x)}),this.table.rowManager.rows.forEach(x=>{var U=!0;R.forEach(tt=>{this.filterRecurse(tt,x.getData())||(U=!1)}),U&&C.push("data"===o?x.getData("data"):x.getComponent())}),C}filter(o,a){var u=[],m=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?o.forEach(C=>{this.filterRow(C)&&u.push(C)}):u=o.slice(0),this.subscribedExternal("dataFiltered")&&(u.forEach(C=>{m.push(C.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),m)),u}filterRow(o,a){var u=!0,m=o.getData();for(var C in this.filterList.forEach(R=>{this.filterRecurse(R,m)||(u=!1)}),this.headerFilters)this.headerFilters[C].func(m)||(u=!1);return u}filterRecurse(o,a){var u=!1;return Array.isArray(o)?o.forEach(m=>{this.filterRecurse(m,a)&&(u=!0)}):u=o.func(a),u}}return _.moduleName="filter",_.filters=_n,_})();var Of={plaintext:function(_,l,o){return this.emptyToSpace(this.sanitizeHTML(_.getValue()))},html:function(_,l,o){return _.getValue()},textarea:function(_,l,o){return _.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(_.getValue()))},money:function(_,l,o){var m,C,R,x,a=parseFloat(_.getValue()),u="",U=l.decimal||".",tt=l.thousand||",",yt=l.negativeSign||"-",Vt=l.symbol||"",ne=!!l.symbolAfter,Se=void 0!==l.precision?l.precision:2;if(isNaN(a))return this.emptyToSpace(this.sanitizeHTML(_.getValue()));for(a<0&&(a=Math.abs(a),u=yt),m=!1!==Se?a.toFixed(Se):a,C=(m=String(m).split("."))[0],R=m.length>1?U+m[1]:"",x=/(\d+)(\d{3})/;x.test(C);)C=C.replace(x,"$1"+tt+"$2");return ne?u+C+R+Vt:u+Vt+C+R},link:function(_,l,o){var a=_.getValue(),u=l.urlPrefix||"",m=l.download,C=a,R=document.createElement("a");if(l.labelField&&(C=_.getData()[l.labelField]),l.label)switch(typeof l.label){case"string":C=l.label;break;case"function":C=l.label(_)}if(C){if(l.urlField&&(a=_.getData()[l.urlField]),l.url)switch(typeof l.url){case"string":a=l.url;break;case"function":a=l.url(_)}return R.setAttribute("href",u+a),l.target&&R.setAttribute("target",l.target),l.download&&(m="function"==typeof m?m(_):!0===m?"":m,R.setAttribute("download",m)),R.innerHTML=this.emptyToSpace(this.sanitizeHTML(C)),R}return"&nbsp;"},image:function(_,l,o){var a=document.createElement("img"),u=_.getValue();switch(l.urlPrefix&&(u=l.urlPrefix+_.getValue()),l.urlSuffix&&(u+=l.urlSuffix),a.setAttribute("src",u),typeof l.height){case"number":a.style.height=l.height+"px";break;case"string":a.style.height=l.height}switch(typeof l.width){case"number":a.style.width=l.width+"px";break;case"string":a.style.width=l.width}return a.addEventListener("load",function(){_.getRow().normalizeHeight()}),a},tickCross:function(_,l,o){var a=_.getValue(),u=_.getElement(),m=l.allowEmpty,R=void 0!==l.tickElement?l.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',x=void 0!==l.crossElement?l.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return l.allowTruthy&&a||!0===a||"true"===a||"True"===a||1===a||"1"===a?(u.setAttribute("aria-checked",!0),R||""):!m||"null"!==a&&""!==a&&null!=a?(u.setAttribute("aria-checked",!1),x||""):(u.setAttribute("aria-checked","mixed"),"")},datetime:function(_,l,o){var a=window.DateTime||luxon.DateTime,u=l.inputFormat||"yyyy-MM-dd HH:mm:ss",m=l.outputFormat||"dd/MM/yyyy HH:mm:ss",C=void 0!==l.invalidPlaceholder?l.invalidPlaceholder:"",R=_.getValue();if(void 0!==a){var x=(window.DateTime||luxon.DateTime).fromFormat(R,u);return x.isValid?(l.timezone&&(x=x.shiftTimezone(l.timezone)),x.toFormat(m)):!0===C?R:"function"==typeof C?C(R):C}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(_,l,o){var a=window.DateTime||luxon.DateTime,u=l.inputFormat||"yyyy-MM-dd HH:mm:ss",m=void 0!==l.invalidPlaceholder?l.invalidPlaceholder:"",C=void 0!==l.suffix&&l.suffix,R=void 0!==l.unit?l.unit:"days",x=void 0!==l.humanize&&l.humanize,U=void 0!==l.date?l.date:a.now(),tt=_.getValue();if(void 0!==a){var yt=a.fromFormat(tt,u);if(!yt.isValid)return!0===m?tt:"function"==typeof m?m(tt):m;if(!x)return parseInt(yt.diff(U,R)[R])+(C?" "+C:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(_,l,o){var a=_.getValue();return void 0===l[a]?(console.warn("Missing display value for "+a),a):l[a]},star:function(_,l,o){var a=_.getValue(),u=_.getElement(),m=l&&l.stars?l.stars:5,C=document.createElement("span"),R=document.createElementNS("http://www.w3.org/2000/svg","svg");C.style.verticalAlign="middle",R.setAttribute("width","14"),R.setAttribute("height","14"),R.setAttribute("viewBox","0 0 512 512"),R.setAttribute("xml:space","preserve"),R.style.padding="0 1px",a=a&&!isNaN(a)?parseInt(a):0,a=Math.max(0,Math.min(a,m));for(var tt=1;tt<=m;tt++){var yt=R.cloneNode(!0);yt.innerHTML=tt<=a?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',C.appendChild(yt)}return u.style.whiteSpace="nowrap",u.style.overflow="hidden",u.style.textOverflow="ellipsis",u.setAttribute("aria-label",a),C},traffic:function(_,l,o){var tt,a=this.sanitizeHTML(_.getValue())||0,u=document.createElement("span"),m=l&&l.max?l.max:100,C=l&&l.min?l.min:0,R=l&&void 0!==l.color?l.color:["red","orange","green"],x="#666666";if(!isNaN(a)&&void 0!==_.getValue()){switch(u.classList.add("tabulator-traffic-light"),tt=parseFloat(a)<=m?parseFloat(a):m,tt=parseFloat(tt)>=C?parseFloat(tt):C,tt=Math.round((tt-C)/((m-C)/100)),typeof R){case"string":x=R;break;case"function":x=R(a);break;case"object":if(Array.isArray(R)){var Vt=Math.floor(tt/(100/R.length));Vt=Math.min(Vt,R.length-1),x=R[Vt=Math.max(Vt,0)];break}}return u.style.backgroundColor=x,u}},progress:function(_,l,o){var U,tt,yt,Vt,a=this.sanitizeHTML(_.getValue())||0,u=_.getElement(),m=l&&l.max?l.max:100,C=l&&l.min?l.min:0,R=l&&l.legendAlign?l.legendAlign:"center";switch(U=parseFloat(a)<=m?parseFloat(a):m,U=parseFloat(U)>=C?parseFloat(U):C,U=Math.round((U-C)/((m-C)/100)),typeof l.color){case"string":tt=l.color;break;case"function":tt=l.color(a);break;case"object":if(Array.isArray(l.color)){var ne=100/l.color.length,Se=Math.floor(U/ne);Se=Math.min(Se,l.color.length-1),Se=Math.max(Se,0),tt=l.color[Se];break}default:tt="#2DC214"}switch(typeof l.legend){case"string":yt=l.legend;break;case"function":yt=l.legend(a);break;case"boolean":yt=a;break;default:yt=!1}switch(typeof l.legendColor){case"string":Vt=l.legendColor;break;case"function":Vt=l.legendColor(a);break;case"object":Array.isArray(l.legendColor)&&(ne=100/l.legendColor.length,Se=Math.floor(U/ne),Se=Math.min(Se,l.legendColor.length-1),Se=Math.max(Se,0),Vt=l.legendColor[Se]);break;default:Vt="#000"}u.style.minWidth="30px",u.style.position="relative",u.setAttribute("aria-label",U);var He=document.createElement("div");He.style.display="inline-block",He.style.position="absolute",He.style.width=U+"%",He.style.backgroundColor=tt,He.style.height="100%",He.setAttribute("data-max",m),He.setAttribute("data-min",C);var ze=document.createElement("div");if(ze.style.position="relative",ze.style.width="100%",ze.style.height="100%",yt){var qe=document.createElement("div");qe.style.position="absolute",qe.style.top=0,qe.style.left=0,qe.style.textAlign=R,qe.style.width="100%",qe.style.color=Vt,qe.innerHTML=yt}return o(function(){if(!(_ instanceof jh)){var Mi=document.createElement("div");Mi.style.position="absolute",Mi.style.top="4px",Mi.style.bottom="4px",Mi.style.left="4px",Mi.style.right="4px",u.appendChild(Mi),u=Mi}u.appendChild(ze),ze.appendChild(He),yt&&ze.appendChild(qe)}),""},color:function(_,l,o){return _.getElement().style.backgroundColor=this.sanitizeHTML(_.getValue()),""},buttonTick:function(_,l,o){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(_,l,o){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(_,l,o){return this.table.rowManager.activeRows.indexOf(_.getRow()._getSelf())+1},handle:function(_,l,o){return _.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(_,l,o){var a=document.createElement("div"),u=_.getRow()._row.modules.responsiveLayout;function m(C){var R=u.element;u.open=C,R&&(u.open?(a.classList.add("open"),R.style.display=""):(a.classList.remove("open"),R.style.display="none"))}return a.classList.add("tabulator-responsive-collapse-toggle"),a.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",_.getElement().classList.add("tabulator-row-handle"),a.addEventListener("click",function(C){C.stopImmediatePropagation(),m(!u.open)}),m(u.open),a},rowSelection:function(_,l,o){var a=document.createElement("input");if(a.type="checkbox",this.table.modExists("selectRow",!0))if(a.addEventListener("click",m=>{m.stopPropagation()}),"function"==typeof _.getRow){var u=_.getRow();u instanceof Eh?(a.addEventListener("change",m=>{u.toggleSelect()}),a.checked=u.isSelected&&u.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(u,a)):a=""}else a.addEventListener("change",m=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(l.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(a);return a}};let ip=(()=>{class _ extends go{constructor(o){super(o),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(o){o.modules.format=this.lookupFormatter(o,""),void 0!==o.definition.formatterPrint&&(o.modules.format.print=this.lookupFormatter(o,"Print")),void 0!==o.definition.formatterClipboard&&(o.modules.format.clipboard=this.lookupFormatter(o,"Clipboard")),void 0!==o.definition.formatterHtmlOutput&&(o.modules.format.htmlOutput=this.lookupFormatter(o,"HtmlOutput"))}lookupFormatter(o,a){var u={params:o.definition["formatter"+a+"Params"]||{}},m=o.definition["formatter"+a];switch(typeof m){case"string":_.formatters[m]?u.formatter=_.formatters[m]:(console.warn("Formatter Error - No such formatter found: ",m),u.formatter=_.formatters.plaintext);break;case"function":u.formatter=m;break;default:u.formatter=_.formatters.plaintext}return u}cellRendered(o){o.modules.format&&o.modules.format.renderedCallback&&!o.modules.format.rendered&&(o.modules.format.renderedCallback(),o.modules.format.rendered=!0)}formatHeader(o,a,u){var m,C,R,x;return o.definition.titleFormatter?(m=this.getFormatter(o.definition.titleFormatter),R=U=>{o.titleFormatterRendered=U},x={getValue:function(){return a},getElement:function(){return u}},C="function"==typeof(C=o.definition.titleFormatterParams||{})?C():C,m.call(this,x,C,R)):a}formatValue(o){var a=o.getComponent(),u="function"==typeof o.column.modules.format.params?o.column.modules.format.params(a):o.column.modules.format.params;return o.column.modules.format.formatter.call(this,a,u,function(C){o.modules.format||(o.modules.format={}),o.modules.format.renderedCallback=C,o.modules.format.rendered=!1})}formatExportValue(o,a){var m,u=o.column.modules.format[a];if(u){let C=function(R){o.modules.format||(o.modules.format={}),o.modules.format.renderedCallback=R,o.modules.format.rendered=!1};return m="function"==typeof u.params?u.params(component):u.params,u.formatter.call(this,o.getComponent(),m,C)}return this.formatValue(o)}sanitizeHTML(o){if(o){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(o).replace(/[&<>"'`=\/]/g,function(u){return a[u]})}return o}emptyToSpace(o){return null==o||""===o?"&nbsp;":o}getFormatter(o){switch(typeof o){case"string":_.formatters[o]?o=_.formatters[o]:(console.warn("Formatter Error - No such formatter found: ",o),o=_.formatters.plaintext);break;case"function":o=o;break;default:o=_.formatters.plaintext}return o}}return _.moduleName="format",_.formatters=Of,_})(),Pp=(()=>{class _ extends go{constructor(o){super(o),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(o){this.layoutElement(o.element,o.column)}initializeColumn(o){var a={margin:0,edge:!1};o.isGroup||(this.frozenCheck(o)?(a.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(o):this.rightColumns.unshift(o),this.active=!0,o.modules.frozen=a):this.initializationMode="right")}frozenCheck(o){return o.parent.isGroup&&o.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),o.parent.isGroup?this.frozenCheck(o.parent):o.definition.frozen}scrollHorizontal(){var o;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),o=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),o.forEach(a=>{"row"===a.type&&this.layoutRow(a)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(o){o.forEach(a=>{a.calcs.top&&this.layoutRow(a.calcs.top),a.calcs.bottom&&this.layoutRow(a.calcs.bottom),a.groupList&&a.groupList.length&&this.layoutGroupCalcs(a.groupList&&a.groupList)})}layoutColumnPosition(o){var a=[];this.leftColumns.forEach((u,m)=>{if(u.modules.frozen.margin=this._calcSpace(this.leftColumns,m)+this.table.columnManager.scrollLeft+"px",u.modules.frozen.edge=m==this.leftColumns.length-1,u.parent.isGroup){var C=this.getColGroupParentElement(u);a.includes(C)||(this.layoutElement(C,u),a.push(C)),u.modules.frozen.edge&&C.classList.add("tabulator-frozen-"+u.modules.frozen.position)}else this.layoutElement(u.getElement(),u);o&&u.cells.forEach(R=>{this.layoutElement(R.getElement(!0),u)})}),this.rightColumns.forEach((u,m)=>{u.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,m+1)+"px",u.modules.frozen.edge=m==this.rightColumns.length-1,this.layoutElement(u.parent.isGroup?this.getColGroupParentElement(u):u.getElement(),u),o&&u.cells.forEach(C=>{this.layoutElement(C.getElement(!0),u)})})}getColGroupParentElement(o){return o.parent.isGroup?this.getColGroupParentElement(o.parent):o.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(o=>{"row"===o.type&&this.layoutRow(o)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(o){o.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(u=>{var m=o.getCell(u);m&&this.layoutElement(m.getElement(!0),u)}),this.rightColumns.forEach(u=>{var m=o.getCell(u);m&&this.layoutElement(m.getElement(!0),u)})}layoutElement(o,a){a.modules.frozen&&(o.style.position="absolute",o.style.left=a.modules.frozen.margin,o.classList.add("tabulator-frozen"),a.modules.frozen.edge&&o.classList.add("tabulator-frozen-"+a.modules.frozen.position))}_calcSpace(o,a){var u=0;for(let m=0;m<a;m++)o[m].visible&&(u+=o[m].getWidth());return u}}return _.moduleName="frozenColumns",_})(),np=(()=>{class _ extends go{constructor(o){super(o),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(o){return this.rows.indexOf(o)>-1}isFrozen(){return!!this.rows.length}getRows(o){var a=o.slice(0);return this.rows.forEach(function(u){var m=a.indexOf(u);m>-1&&a.splice(m,1)}),a}freezeRow(o){o.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(o.modules.frozen=!0,this.topElement.appendChild(o.getElement()),o.initialize(),o.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(o),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(o){this.rows.indexOf(o),o.modules.frozen?(o.modules.frozen=!1,this.detachRow(o),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(o){var a=this.rows.indexOf(o);if(a>-1){var u=o.getElement();u.parentNode&&u.parentNode.removeChild(u),this.rows.splice(a,1)}}styleRows(o){this.rows.forEach((a,u)=>{this.table.rowManager.styleRow(a,u)})}}return _.moduleName="frozenRows",_})();class rp{constructor(l){return this._group=l,this.type="GroupComponent",new Proxy(this,{get:function(o,a,u){return void 0!==o[a]?o[a]:o._group.table.componentFunctionBinder.handle("row",o._group,a)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class Bh{constructor(l,o,a,u,m,C,R){this.groupManager=l,this.parent=o,this.key=u,this.level=a,this.field=m,this.hasSubGroups=a<l.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=R,this.rows=[],this.groups=[],this.groupList=[],this.generator=C,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=R?R.visible:void 0!==l.startOpen[a]?l.startOpen[a]:l.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(l){l.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var l=document.createElement("div");l.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(l),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var l=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[l]&&this.groupManager.allowedValues[l].forEach(o=>{this._createGroup(o,l)})}addBindings(){var l,o,a;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(a=!1,this.element.addEventListener("touchstart",m=>{a=!0},{passive:!0}),this.element.addEventListener("touchend",m=>{a&&this.groupManager.table.options.groupTap(m,this.getComponent()),a=!1})),this.groupManager.table.options.groupDblTap&&(l=null,this.element.addEventListener("touchend",m=>{l?(clearTimeout(l),l=null,this.groupManager.table.options.groupDblTap(m,this.getComponent())):l=setTimeout(()=>{clearTimeout(l),l=null},300)})),this.groupManager.table.options.groupTapHold&&(o=null,this.element.addEventListener("touchstart",m=>{clearTimeout(o),o=setTimeout(()=>{clearTimeout(o),o=null,a=!1,this.groupManager.table.options.groupTapHold(m,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",m=>{clearTimeout(o),o=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",m=>{m.stopPropagation(),m.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(l,o){var a=o+"_"+l,u=new Bh(this.groupManager,this,o,l,this.groupManager.groupIDLookups[o].field,this.groupManager.headerGenerator[o]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[a]);this.groups[a]=u,this.groupList.push(u)}_addRowToGroup(l){var o=this.level+1;if(this.hasSubGroups){var a=this.groupManager.groupIDLookups[o].func(l.getData()),u=o+"_"+a;this.groupManager.allowedValues&&this.groupManager.allowedValues[o]?this.groups[u]&&this.groups[u].addRow(l):(this.groups[u]||this._createGroup(a,o),this.groups[u].addRow(l))}}_addRow(l){this.rows.push(l),l.modules.group=this}insertRow(l,o,a){var u=this.conformRowData({});l.updateData(u);var m=this.rows.indexOf(o);m>-1?this.rows.splice(a?m+1:m,0,l):a?this.rows.push(l):this.rows.unshift(l),l.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(l){this.arrowElement.style.marginLeft=l,this.groupList.forEach(function(o){o.scrollHeader(l)})}getRowIndex(l){}conformRowData(l){return this.field?l[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(l=this.parent.conformRowData(l)),l}removeRow(l){var o=this.rows.indexOf(l),a=l.getElement();o>-1&&this.rows.splice(o,1),this.groupManager.table.options.groupValues||this.rows.length?(a.parentNode&&a.parentNode.removeChild(a),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(l){var a,o=l.level+"_"+l.key;this.groups[o]&&(delete this.groups[o],(a=this.groupList.indexOf(l))>-1&&this.groupList.splice(a,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(l){var o=[];return o.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(a){o=o.concat(a.getHeadersAndRows(l))}):(!l&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),o.push(this.calcs.top)),o=o.concat(this.rows),!l&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),o.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!l&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),o.push(this.calcs.top))),!l&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),o.push(this.calcs.bottom)))),o}getData(l,o){var a=[];return this._visSet(),(!l||l&&this.visible)&&this.rows.forEach(u=>{a.push(u.getData(o||"data"))}),a}getRowCount(){var l=0;return this.groupList.length?this.groupList.forEach(o=>{l+=o.getRowCount()}):l=this.rows.length,l}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(l=>{l.getHeadersAndRows().forEach(a=>{a.detachElement()})}):this.rows.forEach(l=>{var o=l.getElement();o.parentNode.removeChild(o)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var l=this.getElement();this.groupList.length?this.groupList.forEach(o=>{o.getHeadersAndRows().forEach(u=>{var m=u.getElement();l.parentNode.insertBefore(m,l.nextSibling),u.initialize(),l=m})}):this.rows.forEach(o=>{var a=o.getElement();l.parentNode.insertBefore(a,l.nextSibling),o.initialize(),l=a}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var l=[];"function"==typeof this.visible&&(this.rows.forEach(function(o){l.push(o.getData())}),this.visible=this.visible(this.key,this.getRowCount(),l,this.getComponent()))}getRowGroup(l){var o=!1;return this.groupList.length?this.groupList.forEach(function(a){var u=a.getRowGroup(l);u&&(o=u)}):this.rows.find(function(a){return a===l})&&(o=this),o}getSubGroups(l){var o=[];return this.groupList.forEach(function(a){o.push(l?a.getComponent():a)}),o}getRows(l){var o=[];return this.rows.forEach(function(a){o.push(l?a.getComponent():a)}),o}generateGroupHeaderContents(){var l=[];for(this.rows.forEach(function(o){l.push(o.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),l,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(l=[]){return l.unshift(this.key),this.parent&&this.parent.getPath(l),l}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var l=0;l<this.element.childNodes.length;++l)this.element.childNodes[l].parentNode.removeChild(this.element.childNodes[l]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(l){(!this.initialized||l)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,$s.elVisible(this.element)&&this.initialize(!0)}setHeight(l){this.height!=l&&(this.height=l,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new rp(this)),this.component}}let Td=(()=>{class _ extends go{constructor(o){super(o),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var o=this.table.options.groupBy,a=this.table.options.groupStartOpen,u=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(o)&&Array.isArray(u)&&o.length>u.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(C,R)=>{this.headerGenerator[0]=(x,U,tt)=>(void 0===x?"":x)+"<span>("+U+" "+(1===U?C:R.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(o)||o?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(C=>{C.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),C.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(o)||(o=[o]),o.forEach((C,R)=>{var x,U;x="function"==typeof C?C:(U=this.table.columnManager.getColumnByField(C))?function(tt){return U.getFieldValue(tt)}:function(tt){return tt[C]},this.groupIDLookups.push({field:"function"!=typeof C&&C,func:x,values:!!this.allowedValues&&this.allowedValues[R]})}),a&&(Array.isArray(a)||(a=[a]),a.forEach(C=>{}),this.startOpen=a),u&&(this.headerGenerator=Array.isArray(u)?u:[u])}}rowSample(o,a){var u=this.getGroups(!1)[0];return a.push(u.getRows(!1)[0]),a}virtualRenderFill(){var o=this.table.rowManager.tableElement,a=this.table.rowManager.getVisibleRows();a=a.filter(u=>"group"!==u.type),o.style.minWidth=a.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(o,a,u){this.assignRowToGroup(o);var m=o.modules.group.rows;return m.length>1&&(!a||a&&-1==m.indexOf(a)?u?m[0]!==o&&this.table.rowManager.moveRowInArray(o.modules.group.rows,o,a=m[0],!u):m[m.length-1]!==o&&this.table.rowManager.moveRowInArray(o.modules.group.rows,o,a=m[m.length-1],!u):this.table.rowManager.moveRowInArray(o.modules.group.rows,o,a,!u)),a}trackChanges(){this.dispatch("group-changed")}setGroupBy(o){this.table.options.groupBy=o,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(o){this.table.options.groupValues=o,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(o){this.table.options.groupStartOpen=o,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(o){this.table.options.groupHeader=o,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(o){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(o){return!!o.modules.group&&o.modules.group.getComponent()}rowMoving(o,a,u){!u&&a instanceof Bh&&(a=this.table.rowManager.prevDisplayRow(o)||a);var m=a instanceof Bh?a:a.modules.group,C=o instanceof Bh?o:o.modules.group;m===C?this.table.rowManager.moveRowInArray(m.rows,o,a,u):(C&&C.removeRow(o),m.insertRow(o,a,u))}rowDeleting(o){o.modules.group&&o.modules.group.removeRow(o)}rowsUpdated(o){this.updateGroupRows(!0)}cellUpdated(o){this.reassignRowToGroup(o.row)}setDisplayIndex(o){this.displayIndex=o}getDisplayIndex(){return this.displayIndex}getRows(o){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(o),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):o.slice(0)}getGroups(o){var a=[];return this.groupList.forEach(function(u){a.push(o?u.getComponent():u)}),a}getChildGroups(o){var a=[];return o||(o=this),o.groupList.forEach(u=>{u.groupList.length?a=a.concat(this.getChildGroups(u)):a.push(u)}),a}wipe(){this.groupList.forEach(function(o){o.wipe()})}pullGroupListData(o){var a=[];return o.forEach(u=>{var m={level:0,rowCount:0,headerContent:""},C=[];u.hasSubGroups?(C=this.pullGroupListData(u.groupList),m.level=u.level,m.rowCount=C.length-u.groupList.length,m.headerContent=u.generator(u.key,m.rowCount,u.rows,u),a.push(m),a=a.concat(C)):(m.level=u.level,m.headerContent=u.generator(u.key,u.rows.length,u.rows,u),m.rowCount=u.getRows().length,a.push(m),u.getRows().forEach(R=>{a.push(R.getData("data"))}))}),a}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(o){var a=!1;return this.groupList.forEach(u=>{var m=u.getRowGroup(o);m&&(a=m)}),a}countGroups(){return this.groupList.length}generateGroups(o){var a=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(u=>{this.createGroup(u,0,a)}),o.forEach(u=>{this.assignRowToExistingGroup(u,a)})):o.forEach(u=>{this.assignRowToGroup(u,a)})}createGroup(o,a,u){var C,m=a+"_"+o;C=new Bh(this,!1,a,o,this.groupIDLookups[0].field,this.headerGenerator[0],(u=u||[])[m]),this.groups[m]=C,this.groupList.push(C)}assignRowToExistingGroup(o,a){var m="0_"+this.groupIDLookups[0].func(o.getData());this.groups[m]&&this.groups[m].addRow(o)}assignRowToGroup(o,a){var u=this.groupIDLookups[0].func(o.getData()),m=!this.groups["0_"+u];return m&&this.createGroup(u,0,a),this.groups["0_"+u].addRow(o),!m}reassignRowToGroup(o){if("row"===o.type){var a=o.modules.group,u=a.getPath(),m=this.getExpectedPath(o);u.length==m.length&&u.every((R,x)=>R===m[x])||(a.removeRow(o),this.assignRowToGroup(o,this.groups),this.refreshData(!0))}}getExpectedPath(o){var a=[],u=o.getData();return this.groupIDLookups.forEach(m=>{a.push(m.func(u))}),a}updateGroupRows(o){var a=[];return this.groupList.forEach(u=>{a=a.concat(u.getHeadersAndRows())}),o&&this.refreshData(!0,this.displayHandler),a}scrollHeaders(o){"virtual"===this.table.options.renderHorizontal&&(o-=this.table.columnManager.renderer.vDomPadLeft),o+="px",this.groupList.forEach(a=>{a.scrollHeader(o)})}removeGroup(o){var u,a=o.level+"_"+o.key;this.groups[a]&&(delete this.groups[a],(u=this.groupList.indexOf(o))>-1&&this.groupList.splice(u,1))}}return _.moduleName="groupRows",_})();var xf={cellEdit:function(_){_.component.setValueProcessData(_.data.oldValue),_.component.cellRendered()},rowAdd:function(_){_.component.deleteActual()},rowDelete:function(_){var l=this.table.rowManager.addRowActual(_.data.data,_.data.pos,_.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(_.component,l)},rowMove:function(_){this.table.rowManager.moveRowActual(_.component,this.table.rowManager.rows[_.data.posFrom],!_.data.after),this.table.rowManager.redraw()}},Fp={cellEdit:function(_){_.component.setValueProcessData(_.data.newValue),_.component.cellRendered()},rowAdd:function(_){var l=this.table.rowManager.addRowActual(_.data.data,_.data.pos,_.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(_.component,l)},rowDelete:function(_){_.component.deleteActual()},rowMove:function(_){this.table.rowManager.moveRowActual(_.component,this.table.rowManager.rows[_.data.posTo],_.data.after),this.table.rowManager.redraw()}};let Sm=(()=>{class _ extends go{constructor(o){super(o),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(o,a,u){this.action("rowMove",o,{posFrom:this.table.rowManager.getRowPosition(o),posTo:this.table.rowManager.getRowPosition(a),to:a,after:u})}rowAdded(o,a,u,m){this.action("rowAdd",o,{data:a,pos:u,index:m})}rowDeleted(o){var a,u;this.table.options.groupBy?(a=(u=o.getComponent().getGroup().rows).indexOf(o))&&(a=u[a-1]):(a=o.table.rowManager.getRowIndex(o))&&(a=o.table.rowManager.rows[a-1]),this.action("rowDelete",o,{data:o.getData(),pos:!a,index:a})}cellUpdated(o){this.action("cellEdit",o,{oldValue:o.oldValue,newValue:o.value})}clear(){this.history=[],this.index=-1}action(o,a,u){this.history=this.history.slice(0,this.index+1),this.history.push({type:o,component:a,data:u}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(o){var a=this.history.findIndex(function(u){return u.component===o});a>-1&&(this.history.splice(a,1),a<=this.index&&this.index--,this.clearComponentHistory(o))}undo(){if(this.index>-1){let o=this.history[this.index];return _.undoers[o.type].call(this,o),this.index--,this.dispatchExternal("historyUndo",o.type,o.component.getComponent(),o.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let o=this.history[this.index];return _.redoers[o.type].call(this,o),this.dispatchExternal("historyRedo",o.type,o.component.getComponent(),o.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(o,a){this.history.forEach(function(u){if(u.component instanceof ml)u.component===o&&(u.component=a);else if(u.component instanceof Ph&&u.component.row===o){var m=u.component.column.getField();m&&(u.component=a.getCell(m))}})}}return _.moduleName="history",_.undoers=xf,_.redoers=Fp,_})(),Bp=(()=>{class _ extends go{constructor(o){super(o),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var o=this.table.originalElement,a=this.table.options,m=o.getElementsByTagName("th"),C=o.getElementsByTagName("tbody")[0],R=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),C=C?C.getElementsByTagName("tr"):[],this._extractOptions(o,a),m.length?this._extractHeaders(m,C):this._generateBlankHeaders(m,C);for(var x=0;x<C.length;x++){var tt=C[x].getElementsByTagName("td"),yt={};this.hasIndex||(yt[a.index]=x);for(var Vt=0;Vt<tt.length;Vt++)void 0!==this.fieldIndex[Vt]&&(yt[this.fieldIndex[Vt]]=tt[Vt].innerHTML);R.push(yt)}a.data=R,this.dispatchExternal("htmlImported")}_extractOptions(o,a,u){var m=o.attributes,C=u?Object.assign([],u):Object.keys(a),R={};for(var x in C.forEach(yt=>{R[yt.toLowerCase()]=yt}),m){var tt,U=m[x];U&&"object"==typeof U&&U.name&&0===U.name.indexOf("tabulator-")&&(tt=U.name.replace("tabulator-",""),void 0!==R[tt]&&(a[R[tt]]=this._attribValue(U.value)))}}_attribValue(o){return"true"===o||"false"!==o&&o}_findCol(o){return this.table.options.columns.find(u=>u.title===o)||!1}_extractHeaders(o,a){for(var u=0;u<o.length;u++){var x,m=o[u],C=!1,R=this._findCol(m.textContent);R?C=!0:R={title:m.textContent.trim()},R.field||(R.field=m.textContent.trim().toLowerCase().replace(" ","_")),(x=m.getAttribute("width"))&&!R.width&&(R.width=x),this._extractOptions(m,R,Yu.prototype.defaultOptionList),this.fieldIndex[u]=R.field,R.field==this.table.options.index&&(this.hasIndex=!0),C||this.table.options.columns.push(R)}}_generateBlankHeaders(o,a){for(var u=0;u<o.length;u++){var m=o[u],C={title:"",field:"col"+u};this.fieldIndex[u]=C.field;var R=m.getAttribute("width");R&&(C.width=R),this.table.options.columns.push(C)}}}return _.moduleName="htmlTableImport",_})(),Hp=(()=>{class _ extends go{constructor(o){super(o),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(o,a){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){o.preventDefault();try{if(document.selection)(u=document.body.createTextRange()).moveToElementText(this.element),u.select();else if(window.getSelection){var u;(u=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(u)}}catch(m){}}}initializeExternalEvents(){for(let o in this.eventMap)this.subscriptionChangeExternal(o,this.subscriptionChanged.bind(this,o))}subscriptionChanged(o,a){a?this.subscribers[o]||(this.eventMap[o].includes("-")?(this.subscribers[o]=this.handle.bind(this,o),this.subscribe(this.eventMap[o],this.subscribers[o])):this.subscribeTouchEvents(o)):this.eventMap[o].includes("-")?this.subscribers[o]&&!this.columnSubscribers[o]&&!this.subscribedExternal(o)&&(this.unsubscribe(this.eventMap[o],this.subscribers[o]),delete this.subscribers[o]):this.unsubscribeTouchEvents(o)}subscribeTouchEvents(o){var a=this.eventMap[o];this.touchSubscribers[a+"-touchstart"]||(this.touchSubscribers[a+"-touchstart"]=this.handleTouch.bind(this,a,"start"),this.touchSubscribers[a+"-touchend"]=this.handleTouch.bind(this,a,"end"),this.subscribe(a+"-touchstart",this.touchSubscribers[a+"-touchstart"]),this.subscribe(a+"-touchend",this.touchSubscribers[a+"-touchend"])),this.subscribers[o]=!0}unsubscribeTouchEvents(o){var a=!0,u=this.eventMap[o];if(this.subscribers[o]&&!this.subscribedExternal(o)){delete this.subscribers[o];for(let m in this.eventMap)this.eventMap[m]===u&&this.subscribers[m]&&(a=!1);a&&(this.unsubscribe(u+"-touchstart",this.touchSubscribers[u+"-touchstart"]),this.unsubscribe(u+"-touchend",this.touchSubscribers[u+"-touchend"]),delete this.touchSubscribers[u+"-touchstart"],delete this.touchSubscribers[u+"-touchend"])}}initializeColumn(o){var a=o.definition;for(let u in this.eventMap)a[u]&&(this.subscriptionChanged(u,!0),this.columnSubscribers[u]||(this.columnSubscribers[u]=[]),this.columnSubscribers[u].push(o))}handle(o,a,u){this.dispatchEvent(o,a,u)}handleTouch(o,a,u,m){var C=this.touchWatchers[o];switch("column"===o&&(o="header"),a){case"start":C.tap=!0,clearTimeout(C.tapHold),C.tapHold=setTimeout(()=>{clearTimeout(C.tapHold),C.tapHold=null,C.tap=null,clearTimeout(C.tapDbl),C.tapDbl=null,this.dispatchEvent(o+"TapHold",u,m)},1e3);break;case"end":C.tap&&(C.tap=null,this.dispatchEvent(o+"Tap",u,m)),C.tapDbl?(clearTimeout(C.tapDbl),C.tapDbl=null,this.dispatchEvent(o+"DblTap",u,m)):C.tapDbl=setTimeout(()=>{clearTimeout(C.tapDbl),C.tapDbl=null},300),clearTimeout(C.tapHold),C.tapHold=null}}dispatchEvent(o,a,u){var C,m=u.getComponent();this.columnSubscribers[o]&&(u instanceof Ph?C=u.column.definition[o]:u instanceof Yu&&(C=u.definition[o]),C&&C(a,m)),this.dispatchExternal(o,a,m)}}return _.moduleName="interaction",_})();var kf={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},Up={keyBlock:function(_){_.stopPropagation(),_.preventDefault()},scrollPageUp:function(_){var l=this.table.rowManager,o=l.scrollTop-l.element.clientHeight;_.preventDefault(),l.displayRowsCount&&(o>=0?l.element.scrollTop=o:l.scrollToRow(l.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(_){var l=this.table.rowManager,o=l.scrollTop+l.element.clientHeight,a=l.element.scrollHeight;_.preventDefault(),l.displayRowsCount&&(o<=a?l.element.scrollTop=o:l.scrollToRow(l.getDisplayRows()[l.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(_){var l=this.table.rowManager;_.preventDefault(),l.displayRowsCount&&l.scrollToRow(l.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(_){var l=this.table.rowManager;_.preventDefault(),l.displayRowsCount&&l.scrollToRow(l.getDisplayRows()[l.displayRowsCount-1]),this.table.element.focus()},navPrev:function(_){this.dispatch("keybinding-nav-prev",_)},navNext:function(_){this.dispatch("keybinding-nav-next",_)},navLeft:function(_){this.dispatch("keybinding-nav-left",_)},navRight:function(_){this.dispatch("keybinding-nav-right",_)},navUp:function(_){this.dispatch("keybinding-nav-up",_)},navDown:function(_){this.dispatch("keybinding-nav-down",_)},undo:function(_){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(_.preventDefault(),this.table.modules.history.undo()))},redo:function(_){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(_.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(_){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let Lf=(()=>{class _ extends go{constructor(o){super(o),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var o=this.table.options.keybindings,a={};if(this.watchKeys={},this.pressedKeys=[],!1!==o){for(let u in _.bindings)a[u]=_.bindings[u];if(Object.keys(o).length)for(let u in o)a[u]=o[u];this.mapBindings(a),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(o){for(let a in o)_.actions[a]?o[a]&&("object"!=typeof o[a]&&(o[a]=[o[a]]),o[a].forEach(u=>{this.mapBinding(a,u)})):console.warn("Key Binding Error - no such action:",a)}mapBinding(o,a){var u={action:_.actions[o],keys:[],ctrl:!1,shift:!1,meta:!1};a.toString().toLowerCase().split(" ").join("").split("+").forEach(C=>{switch(C){case"ctrl":u.ctrl=!0;break;case"shift":u.shift=!0;break;case"meta":u.meta=!0;break;default:C=parseInt(C),u.keys.push(C),this.watchKeys[C]||(this.watchKeys[C]=[]),this.watchKeys[C].push(u)}})}bindEvents(){var o=this;this.keyupBinding=function(a){var u=a.keyCode,m=o.watchKeys[u];m&&(o.pressedKeys.push(u),m.forEach(function(C){o.checkBinding(a,C)}))},this.keydownBinding=function(a){var u=a.keyCode;if(o.watchKeys[u]){var C=o.pressedKeys.indexOf(u);C>-1&&o.pressedKeys.splice(C,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(o,a){var u=!0;return o.ctrlKey==a.ctrl&&o.shiftKey==a.shift&&o.metaKey==a.meta&&(a.keys.forEach(m=>{-1==this.pressedKeys.indexOf(m)&&(u=!1)}),u&&a.action.call(this,o),!0)}}return _.moduleName="keybindings",_.bindings=kf,_.actions=Up,_})(),Nf=(()=>{class _ extends go{constructor(o){super(o),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(o){(o.column.definition.contextMenu||o.column.definition.clickMenu)&&this.initializeCell(o)}initializeColumn(o){var a=o.definition;(a.headerContextMenu||a.headerClickMenu||a.headerMenu)&&this.initializeColumnHeader(o)}initializeColumnHeader(o){var a;o.definition.headerContextMenu&&(o.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,o,o.definition.headerContextMenu)),this.tapHold(o,o.definition.headerContextMenu)),o.definition.headerMenu&&((a=document.createElement("span")).classList.add("tabulator-header-menu-button"),a.innerHTML="&vellip;",a.addEventListener("click",u=>{u.stopPropagation(),u.preventDefault(),this.LoadMenuEvent(o,o.definition.headerMenu,u)}),o.titleElement.insertBefore(a,o.titleElement.firstChild))}LoadMenuEvent(o,a,u){a="function"==typeof a?a.call(this.table,o.getComponent(),u):a,this.loadMenu(u,o,a)}tapHold(o,a){var u=o.getElement(),m=null,C=!1;u.addEventListener("touchstart",R=>{clearTimeout(m),C=!1,m=setTimeout(()=>{clearTimeout(m),m=null,C=!0,this.LoadMenuEvent(o,a,R)},1e3)},{passive:!0}),u.addEventListener("touchend",R=>{clearTimeout(m),m=null,C&&R.preventDefault()})}initializeCell(o){o.column.definition.contextMenu&&(o.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,o,o.column.definition.contextMenu)),this.tapHold(o,o.column.definition.contextMenu)),o.column.definition.clickMenu&&o.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,o,o.column.definition.clickMenu))}initializeRow(o){this.table.options.rowContextMenu&&(o.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,o,this.table.options.rowContextMenu)),this.tapHold(o,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&o.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,o,this.table.options.rowClickMenu))}initializeGroup(o){this.table.options.groupContextMenu&&(o.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,o,this.table.options.groupContextMenu)),this.tapHold(o,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&o.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,o,this.table.options.groupClickMenu))}loadMenu(o,a,u,m){var C=!(o instanceof MouseEvent),R=document.createElement("div");if(R.classList.add("tabulator-menu"),C||o.preventDefault(),u&&u.length){if(!m){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}u.forEach(x=>{var U=document.createElement("div"),tt=x.label,yt=x.disabled;x.separator?U.classList.add("tabulator-menu-separator"):(U.classList.add("tabulator-menu-item"),"function"==typeof tt&&(tt=tt.call(this.table,a.getComponent())),tt instanceof Node?U.appendChild(tt):U.innerHTML=tt,"function"==typeof yt&&(yt=yt.call(this.table,a.getComponent())),yt?(U.classList.add("tabulator-menu-item-disabled"),U.addEventListener("click",Vt=>{Vt.stopPropagation()})):x.menu&&x.menu.length?U.addEventListener("click",Vt=>{Vt.stopPropagation(),this.hideOldSubMenus(R),this.loadMenu(Vt,a,x.menu,U)}):x.action&&U.addEventListener("click",Vt=>{x.action(Vt,a.getComponent())}),x.menu&&x.menu.length&&U.classList.add("tabulator-menu-item-submenu")),R.appendChild(U)}),R.addEventListener("click",x=>{this.hideMenu()}),this.menuElements.push(R),this.positionMenu(R,m,C,o)}}hideOldSubMenus(o){var a=this.menuElements.indexOf(o);if(a>-1)for(let m=this.menuElements.length-1;m>a;m--){var u=this.menuElements[m];u.parentNode&&u.parentNode.removeChild(u),this.menuElements.pop()}}positionMenu(o,a,u,m){var R,x,U,C=Math.max(document.body.offsetHeight,window.innerHeight);a?(R=(U=$s.elOffset(a)).left+a.offsetWidth,x=U.top-1):(R=u?m.touches[0].pageX:m.pageX,x=u?m.touches[0].pageY:m.pageY,this.positionReversedX=!1),o.style.top=x+"px",o.style.left=R+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(o),x+o.offsetHeight>=C&&(o.style.top="",o.style.bottom=a?C-U.top-a.offsetHeight-1+"px":C-x+"px"),(R+o.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(o.style.left="",o.style.right=a?document.documentElement.offsetWidth-U.left+"px":document.documentElement.offsetWidth-R+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(o){27==o.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(o=>{o.parentNode&&o.parentNode.removeChild(o)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return _.moduleName="menu",_})(),jc=(()=>{class _ extends go{constructor(o){super(o),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var o=document.createElement("div");return o.classList.add("tabulator-col"),o.classList.add("tabulator-col-placeholder"),o}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(o){var m,a=this,u={};o.modules.frozen||(m=o.getElement(),u.mousemove=function(C){o.parent===a.moving.parent&&((a.touchMove?C.touches[0].pageX:C.pageX)-$s.elOffset(m).left+a.table.columnManager.element.scrollLeft>o.getWidth()/2?(a.toCol!==o||!a.toColAfter)&&(m.parentNode.insertBefore(a.placeholderElement,m.nextSibling),a.moveColumn(o,!0)):(a.toCol!==o||a.toColAfter)&&(m.parentNode.insertBefore(a.placeholderElement,m),a.moveColumn(o,!1)))}.bind(a),m.addEventListener("mousedown",function(C){a.touchMove=!1,1===C.which&&(a.checkTimeout=setTimeout(function(){a.startMove(C,o)},a.checkPeriod))}),m.addEventListener("mouseup",function(C){1===C.which&&a.checkTimeout&&clearTimeout(a.checkTimeout)}),a.bindTouchEvents(o)),o.modules.moveColumn=u}bindTouchEvents(o){var m,C,R,x,U,tt,a=o.getElement(),u=!1;a.addEventListener("touchstart",yt=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,m=o.nextColumn(),R=m?m.getWidth()/2:0,C=o.prevColumn(),x=C?C.getWidth()/2:0,U=0,tt=0,u=!1,this.startMove(yt,o)},this.checkPeriod)},{passive:!0}),a.addEventListener("touchmove",yt=>{var Vt,ne;this.moving&&(this.moveHover(yt),u||(u=yt.touches[0].pageX),(Vt=yt.touches[0].pageX-u)>0?m&&Vt-U>R&&(ne=m)!==o&&(u=yt.touches[0].pageX,ne.getElement().parentNode.insertBefore(this.placeholderElement,ne.getElement().nextSibling),this.moveColumn(ne,!0)):C&&-Vt-tt>x&&(ne=C)!==o&&(u=yt.touches[0].pageX,ne.getElement().parentNode.insertBefore(this.placeholderElement,ne.getElement()),this.moveColumn(ne,!1)),ne&&(m=ne.nextColumn(),U=R,R=m?m.getWidth()/2:0,C=ne.prevColumn(),tt=x,x=C?C.getWidth()/2:0))},{passive:!0}),a.addEventListener("touchend",yt=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(yt)})}startMove(o,a){var u=a.getElement(),m=this.table.columnManager.getElement(),C=this.table.columnManager.getHeadersElement();this.moving=a,this.startX=(this.touchMove?o.touches[0].pageX:o.pageX)-$s.elOffset(u).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=a.getWidth()+"px",this.placeholderElement.style.height=a.getHeight()+"px",u.parentNode.insertBefore(this.placeholderElement,u),u.parentNode.removeChild(u),this.hoverElement=u.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=m.clientHeight-C.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(o)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(o){o.modules.moveColumn.mousemove&&o.getElement().addEventListener("mousemove",o.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(o){o.modules.moveColumn.mousemove&&o.getElement().removeEventListener("mousemove",o.modules.moveColumn.mousemove)})}moveColumn(o,a){var u=this.moving.getCells();this.toCol=o,this.toColAfter=a,a?o.getCells().forEach(function(m,C){var R=m.getElement(!0);R.parentNode&&u[C]&&R.parentNode.insertBefore(u[C].getElement(),R.nextSibling)}):o.getCells().forEach(function(m,C){var R=m.getElement(!0);R.parentNode&&u[C]&&R.parentNode.insertBefore(u[C].getElement(),R)})}endMove(o){(1===o.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(o){var C,a=this.table.columnManager.getElement(),u=a.scrollLeft,m=(this.touchMove?o.touches[0].pageX:o.pageX)-$s.elOffset(a).left+u;this.hoverElement.style.left=m-this.startX+"px",m-u<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{C=Math.max(0,u-5),this.table.rowManager.getElement().scrollLeft=C,this.autoScrollTimeout=!1},1))),u+a.clientWidth-m<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{C=Math.min(a.clientWidth,u+5),this.table.rowManager.getElement().scrollLeft=C,this.autoScrollTimeout=!1},1)))}}return _.moduleName="moveColumn",_})();class Cd extends go{constructor(l){super(l),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var l=document.createElement("div");return l.classList.add("tabulator-row"),l.classList.add("tabulator-row-placeholder"),l}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(l){var o=this,a={};a.mouseup=function(u){o.tableRowDrop(u,row)}.bind(o),a.mousemove=function(u){if(u.pageY-$s.elOffset(l.element).top+o.table.rowManager.element.scrollTop>l.getHeight()/2)o.toRow===l&&o.toRowAfter||((m=l.getElement()).parentNode.insertBefore(o.placeholderElement,m.nextSibling),o.moveRow(l,!0));else if(o.toRow!==l||o.toRowAfter){var m;(m=l.getElement()).previousSibling&&(m.parentNode.insertBefore(o.placeholderElement,m),o.moveRow(l,!1))}}.bind(o),l.modules.moveRow=a}initializeRow(l){var u,o=this,a={};a.mouseup=function(m){o.tableRowDrop(m,l)}.bind(o),a.mousemove=function(m){var C=l.getElement();m.pageY-$s.elOffset(C).top+o.table.rowManager.element.scrollTop>l.getHeight()/2?(o.toRow!==l||!o.toRowAfter)&&(C.parentNode.insertBefore(o.placeholderElement,C.nextSibling),o.moveRow(l,!0)):(o.toRow!==l||o.toRowAfter)&&(C.parentNode.insertBefore(o.placeholderElement,C),o.moveRow(l,!1))}.bind(o),this.hasHandle||((u=l.getElement()).addEventListener("mousedown",function(m){1===m.which&&(o.checkTimeout=setTimeout(function(){o.startMove(m,l)},o.checkPeriod))}),u.addEventListener("mouseup",function(m){1===m.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)}),this.bindTouchEvents(l,l.getElement())),l.modules.moveRow=a}initializeColumn(l){l.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(l){if(l.column.definition.rowHandle&&!1!==this.table.options.movableRows){var o=this,a=l.getElement(!0);a.addEventListener("mousedown",function(u){1===u.which&&(o.checkTimeout=setTimeout(function(){o.startMove(u,l.row)},o.checkPeriod))}),a.addEventListener("mouseup",function(u){1===u.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)}),this.bindTouchEvents(l.row,a)}}bindTouchEvents(l,o){var u,m,C,R,x,U,a=!1;o.addEventListener("touchstart",tt=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,u=l.nextRow(),C=u?u.getHeight()/2:0,m=l.prevRow(),R=m?m.getHeight()/2:0,x=0,U=0,a=!1,this.startMove(tt,l)},this.checkPeriod)},{passive:!0}),o.addEventListener("touchmove",tt=>{var yt,Vt;this.moving&&(tt.preventDefault(),this.moveHover(tt),a||(a=tt.touches[0].pageY),(yt=tt.touches[0].pageY-a)>0?u&&yt-x>C&&(Vt=u)!==l&&(a=tt.touches[0].pageY,Vt.getElement().parentNode.insertBefore(this.placeholderElement,Vt.getElement().nextSibling),this.moveRow(Vt,!0)):m&&-yt-U>R&&(Vt=m)!==l&&(a=tt.touches[0].pageY,Vt.getElement().parentNode.insertBefore(this.placeholderElement,Vt.getElement()),this.moveRow(Vt,!1)),Vt&&(u=Vt.nextRow(),x=C,C=u?u.getHeight()/2:0,m=Vt.prevRow(),U=R,R=m?m.getHeight()/2:0))}),o.addEventListener("touchend",tt=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(tt),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(l=>{("row"===l.type||"group"===l.type)&&l.modules.moveRow&&l.modules.moveRow.mousemove&&l.getElement().addEventListener("mousemove",l.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(l=>{("row"===l.type||"group"===l.type)&&l.modules.moveRow&&l.modules.moveRow.mousemove&&l.getElement().removeEventListener("mousemove",l.modules.moveRow.mousemove)})}startMove(l,o){var a=o.getElement();this.setStartPosition(l,o),this.moving=o,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=o.getWidth()+"px",this.placeholderElement.style.height=o.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(o)):(a.parentNode.insertBefore(this.placeholderElement,a),a.parentNode.removeChild(a)),this.hoverElement=a.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(l)}setStartPosition(l,o){var m,C,a=this.touchMove?l.touches[0].pageX:l.pageX,u=this.touchMove?l.touches[0].pageY:l.pageY;m=o.getElement(),this.connection?(C=m.getBoundingClientRect(),this.startX=C.left-a+window.pageXOffset,this.startY=C.top-u+window.pageYOffset):this.startY=u-m.getBoundingClientRect().top}endMove(l){(!l||1===l.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(l,o){this.toRow=l,this.toRowAfter=o}moveHover(l){this.connection?this.moveHoverConnections.call(this,l):this.moveHoverTable.call(this,l)}moveHoverTable(l){var o=this.table.rowManager.getElement(),a=o.scrollTop,u=(this.touchMove?l.touches[0].pageY:l.pageY)-o.getBoundingClientRect().top+a;this.hoverElement.style.top=u-this.startY+"px"}moveHoverConnections(l){this.hoverElement.style.left=this.startX+(this.touchMove?l.touches[0].pageX:l.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?l.touches[0].pageY:l.pageY)+"px"}elementRowDrop(l,o,a){this.dispatchExternal("movableRowsElementDrop",l,o,!!a&&a.getComponent())}connectToTables(l){var o;this.connectionSelectorsTables&&(o=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",o),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:l})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(a=>{"string"==typeof a?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(a))):this.connectionElements.push(a)}),this.connectionElements.forEach(a=>{var u=m=>{this.elementRowDrop(m,a,this.moving)};a.addEventListener("mouseup",u),a.tabulatorElementDropEvent=u,a.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var l;this.connectionSelectorsTables&&(l=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",l),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(o=>{o.classList.remove("tabulator-movingrow-receiving"),o.removeEventListener("mouseup",o.tabulatorElementDropEvent),delete o.tabulatorElementDropEvent})}connect(l,o){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=l,this.connectedRow=o,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(a=>{"row"===a.type&&a.modules.moveRow&&a.modules.moveRow.mouseup&&a.getElement().addEventListener("mouseup",a.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",o,l),!0)}disconnect(l){l===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(o=>{"row"===o.type&&o.modules.moveRow&&o.modules.moveRow.mouseup&&o.getElement().removeEventListener("mouseup",o.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",l)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(l,o,a){var u=!1;if(a){switch(typeof this.table.options.movableRowsSender){case"string":u=this.senders[this.table.options.movableRowsSender];break;case"function":u=this.table.options.movableRowsSender}u?u.call(this,this.moving.getComponent(),o?o.getComponent():void 0,l):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),o?o.getComponent():void 0,l)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),o?o.getComponent():void 0,l);this.endMove()}tableRowDrop(l,o){var a=!1,u=!1;switch(l.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":a=this.receivers[this.table.options.movableRowsReceiver];break;case"function":a=this.table.options.movableRowsReceiver}a?u=a.call(this,this.connectedRow.getComponent(),o?o.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(u?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),o?o.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:o,success:u})}commsReceived(l,o,a){switch(o){case"connect":return this.connect(l,a.row);case"disconnect":return this.disconnect(l);case"dropcomplete":return this.dropComplete(l,a.row,a.success)}}}Cd.prototype.receivers={insert:function(_,l,o){return this.table.addRow(_.getData(),void 0,l),!0},add:function(_,l,o){return this.table.addRow(_.getData()),!0},update:function(_,l,o){return!!l&&(l.update(_.getData()),!0)},replace:function(_,l,o){return!!l&&(this.table.addRow(_.getData(),void 0,l),l.delete(),!0)}},Cd.prototype.senders={delete:function(_,l,o){_.delete()}},Cd.moduleName="moveRow";var Pf={};let wm=(()=>{class _ extends go{constructor(o){super(o),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(o,a,u){return this.transformRow(a,"data",u)}initializeColumn(o){var a=!1,u={};this.allowedTypes.forEach(m=>{var R,C="mutator"+(m.charAt(0).toUpperCase()+m.slice(1));o.definition[C]&&(R=this.lookupMutator(o.definition[C]))&&(a=!0,u[C]={mutator:R,params:o.definition[C+"Params"]||{}})}),a&&(o.modules.mutate=u)}lookupMutator(o){var a=!1;switch(typeof o){case"string":_.mutators[o]?a=_.mutators[o]:console.warn("Mutator Error - No such mutator found, ignoring: ",o);break;case"function":a=o}return a}transformRow(o,a,u){var C,m="mutator"+(a.charAt(0).toUpperCase()+a.slice(1));return this.enabled&&this.table.columnManager.traverse(R=>{var x,U,tt;R.modules.mutate&&(x=R.modules.mutate[m]||R.modules.mutate.mutator||!1)&&(C=R.getFieldValue(void 0!==u?u:o),("data"==a||void 0!==C)&&(tt=R.getComponent(),U="function"==typeof x.params?x.params(C,o,a,tt):x.params,R.setFieldValue(o,x.mutator(C,o,a,U,tt))))}),o}transformCell(o,a){if(o.column.modules.mutate){var u=o.column.modules.mutate.mutatorEdit||o.column.modules.mutate.mutator||!1,m={};if(u)return m=Object.assign(m,o.row.getData()),o.column.setFieldValue(m,a),u.mutator(a,m,"edit",u.params,o.getComponent())}return a}enable(){this.enabled=!0}disable(){this.enabled=!1}}return _.moduleName="mutator",_.mutators=Pf,_})(),Rm=(()=>{class _ extends go{constructor(o){super(o),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(o,a){var C,u=this.table.rowManager,m=u.getDisplayRows();return a?m.length?C=m[0]:u.activeRows.length&&(C=u.activeRows[u.activeRows.length-1],a=!1):m.length&&(C=m[m.length-1],a=!(m.length<this.size)),{index:C,top:a}}calculatePageSizes(){var o,a;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((o=document.createElement("div")).classList.add("tabulator-row"),o.style.visibility="hidden",(a=document.createElement("div")).classList.add("tabulator-cell"),a.innerHTML="Page Row Test",o.appendChild(a),this.table.rowManager.getTableElement().appendChild(o),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/o.offsetHeight),this.table.rowManager.getTableElement().removeChild(o)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(o,a,u,m){return this.initialLoad||(this.progressiveLoad&&!u||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),m.page=this.page,this.size&&(m.size=this.size),m}userSetPageToRow(o){return this.table.options.pagination&&(o=this.rowManager.findRow(o))?this.setPageToRow(o):Promise.reject()}userSetPageSize(o){return!!this.table.options.pagination&&(this.setPageSize(o),this.setPage(1))}scrollVertical(o,a){var u;!a&&!this.table.dataLoader.loading&&(u=this.table.rowManager.getElement()).scrollHeight-u.clientHeight-o<(this.table.options.progressiveLoadScrollMargin||2*u.clientHeight)&&this.nextPage()}restOnRenderBefore(o,a){return a||"local"===this.mode&&this.reset(),o}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var o;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(o=document.createElement("button")).classList.add("tabulator-page"),o.setAttribute("type","button"),o.setAttribute("role","button"),o.setAttribute("aria-label",""),o.setAttribute("title",""),this.firstBut=o.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=o.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=o.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=o.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var o=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=o=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&o.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){o=[];for(let a=1;a<5;a++)o.push(this.size*a);this.pageSizes=o}else o=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);o.forEach(a=>{var u=document.createElement("option");u.value=a,!0===a?this.langBind("pagination|all",function(m){u.innerHTML=m}):u.innerHTML=a,this.pageSizeSelect.appendChild(u)}),this.pageSizeSelect.value=this.size}}initializePaginator(o){var a;o||(this.langBind("pagination|first",u=>{this.firstBut.innerHTML=u}),this.langBind("pagination|first_title",u=>{this.firstBut.setAttribute("aria-label",u),this.firstBut.setAttribute("title",u)}),this.langBind("pagination|prev",u=>{this.prevBut.innerHTML=u}),this.langBind("pagination|prev_title",u=>{this.prevBut.setAttribute("aria-label",u),this.prevBut.setAttribute("title",u)}),this.langBind("pagination|next",u=>{this.nextBut.innerHTML=u}),this.langBind("pagination|next_title",u=>{this.nextBut.setAttribute("aria-label",u),this.nextBut.setAttribute("title",u)}),this.langBind("pagination|last",u=>{this.lastBut.innerHTML=u}),this.langBind("pagination|last_title",u=>{this.lastBut.setAttribute("aria-label",u),this.lastBut.setAttribute("title",u)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(a=document.createElement("label"),this.langBind("pagination|page_size",u=>{this.pageSizeSelect.setAttribute("aria-label",u),this.pageSizeSelect.setAttribute("title",u),a.innerHTML=u}),this.element.appendChild(a),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",u=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!o&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(o){this.initializePaginator(!0),this.mode="progressive_"+o,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(o){this.displayIndex=o}getDisplayIndex(){return this.displayIndex}setMaxRows(o){this.max=o?!0===this.size?1:Math.ceil(o/this.size):1,this.page>this.max&&(this.page=this.max)}reset(o){this.initialLoad||("local"==this.mode||o)&&(this.page=1)}setMaxPage(o){o=parseInt(o),this.max=o||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(o){switch(o){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(o=parseInt(o))>0&&o<=this.max||"local"!==this.mode?(this.page=o,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",o),Promise.reject())}setPageToRow(o){var u=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(o);if(u>-1){var m=!0===this.size?1:Math.ceil((u+1)/this.size);return this.setPage(m)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(o){!0!==o&&(o=parseInt(o)),o>0&&(this.size=o),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let o=Math.floor((this.count-1)/2),a=Math.ceil((this.count-1)/2),u=this.max-this.page+o+1<this.count?this.max-this.count+1:Math.max(this.page-o,1),m=this.page<=a?Math.min(this.count,this.max):Math.min(this.page+a,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let C=u;C<=m;C++)C>0&&C<=this.max&&this.pagesElement.appendChild(this._generatePageButton(C));this.footerRedraw()}_generatePageButton(o){var a=document.createElement("button");return a.classList.add("tabulator-page"),o==this.page&&a.classList.add("active"),a.setAttribute("type","button"),a.setAttribute("role","button"),this.langBind("pagination|page_title",u=>{a.setAttribute("aria-label",u+" "+o),a.setAttribute("title",u+" "+o)}),a.setAttribute("data-page",o),a.textContent=o,a.addEventListener("click",u=>{this.setPage(o)}),a}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(o){return this.size}getMode(){return this.mode}getRows(o){var a,u,m;if("local"==this.mode){a=[],this.setMaxRows(o.length),!0===this.size?(u=0,m=o.length):m=(u=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let C=u;C<m;C++)o[C]&&a.push(o[C]);return a}return this._setPageButtons(),o.slice(0)}trigger(){var o;switch(this.mode){case"local":return o=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(o),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(o){if(void 0===o.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),o.data){if(this.max=parseInt(o.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(o.data,!1,1==this.page):this.table.rowManager.addRows(o.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":o=this.table.rowManager.getData().concat(o.data),this.table.rowManager.setData(o,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return o.data}footerRedraw(){var o=this.table.footerManager.element;Math.ceil(o.clientWidth)-o.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(o.clientWidth)-o.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return _.moduleName="page",_})();var Vp={local:function(_,l){var o=localStorage.getItem(_+"-"+l);return!!o&&JSON.parse(o)},cookie:function(_,l){var m,C,o=document.cookie,a=_+"-"+l,u=o.indexOf(a+"=");return u>-1&&((m=(o=o.substr(u)).indexOf(";"))>-1&&(o=o.substr(0,m)),C=o.replace(a+"=","")),!!C&&JSON.parse(C)}},Dm={local:function(_,l,o){localStorage.setItem(_+"-"+l,JSON.stringify(o))},cookie:function(_,l,o){var a=new Date;a.setDate(a.getDate()+1e4),document.cookie=_+"-"+l+"="+JSON.stringify(o)+"; expires="+a.toUTCString()}};let Ff=(()=>{class _ extends go{constructor(o){super(o),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var o="_tabulator_test";try{return window.localStorage.setItem(o,o),window.localStorage.removeItem(o),!0}catch(a){return!1}}initialize(){if(this.table.options.persistence){var u,o=this.table.options.persistenceMode,a=this.table.options.persistenceID;this.mode=!0!==o?o:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:_.readers[this.table.options.persistenceReaderFunc]?this.readFunc=_.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):_.readers[this.mode]?this.readFunc=_.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:_.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=_.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):_.writers[this.mode]?this.writeFunc=_.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(a||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(u=this.retreiveData("page"))&&(void 0!==u.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=u.paginationSize),void 0!==u.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=u.paginationInitialPage)),this.config.group&&(u=this.retreiveData("group"))&&(void 0!==u.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=u.groupBy),void 0!==u.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=u.groupStartOpen),void 0!==u.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=u.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(o){this.config[o]&&this.save(o)}tableBuilt(){var a,u;this.config.sort&&(a=this.load("sort"))&&(this.table.initialSort=a),this.config.filter&&(u=this.load("filter"))&&(this.table.initialFilter=u)}tableRedraw(o){o&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(o){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,o)),!0}initializeColumn(o){var a;this.config.columns&&(this.defWatcherBlock=!0,a=o.getDefinition(),(!0===this.config.columns?Object.keys(a):this.config.columns).forEach(m=>{var C=Object.getOwnPropertyDescriptor(a,m),R=a[m];C&&Object.defineProperty(a,m,{set:function(x){R=x,this.defWatcherBlock||this.save("columns"),C.set&&C.set(x)},get:function(){return C.get&&C.get(),R}})}),this.defWatcherBlock=!1)}load(o,a){var u=this.retreiveData(o);return a&&(u=u?this.mergeDefinition(a,u):a),u}retreiveData(o){return!!this.readFunc&&this.readFunc(this.id,o)}mergeDefinition(o,a){var u=[];return(a=a||[]).forEach((m,C)=>{var x,R=this._findColumn(o,m);R&&(!0===this.config.columns||null==this.config.columns?(x=Object.keys(R)).push("width"):x=this.config.columns,x.forEach(U=>{"columns"!==U&&void 0!==m[U]&&(R[U]=m[U])}),R.columns&&(R.columns=this.mergeDefinition(R.columns,m.columns)),u.push(R))}),o.forEach((m,C)=>{this._findColumn(a,m)||(u.length>C?u.splice(C,0,m):u.push(m))}),u}_findColumn(o,a){var u=a.columns?"group":a.field?"field":"object";return o.find(function(m){switch(u){case"group":return m.title===a.title&&m.columns.length===a.columns.length;case"field":return m.field===a.field;case"object":return m===a}})}save(o){var a={};switch(o){case"columns":a=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":a=this.table.modules.filter.getFilters();break;case"sort":a=this.validateSorters(this.table.modules.sort.getSort());break;case"group":a=this.getGroupConfig();break;case"page":a=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,o,a)}validateSorters(o){return o.forEach(function(a){a.column=a.field,delete a.field}),o}getGroupConfig(){var o={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(o.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(o.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(o.groupHeader=this.table.options.groupHeader)),o}getPageConfig(){var o={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(o.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(o.paginationInitialPage=this.table.modules.page.getPage())),o}parseColumns(o){var a=[],u=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return o.forEach(m=>{var x,C={},R=m.getDefinition();m.isGroup?(C.title=R.title,C.columns=this.parseColumns(m.getColumns())):(C.field=m.getField(),!0===this.config.columns||null==this.config.columns?(x=Object.keys(R)).push("width"):x=this.config.columns,x.forEach(U=>{switch(U){case"width":C.width=m.getWidth();break;case"visible":C.visible=m.visible;break;default:"function"!=typeof R[U]&&-1===u.indexOf(U)&&(C[U]=R[U])}})),a.push(C)}),a}}return _.moduleName="persistence",_.readers=Vp,_.writers=Dm,_})(),op=(()=>{class _ extends go{constructor(o){super(o),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(o,a,u){var tt,yt,m=window.scrollX,C=window.scrollY,R=document.createElement("div"),x=document.createElement("div"),U=this.table.modules.export.genereateTable(void 0!==u?u:this.table.options.printConfig,void 0!==a?a:this.table.options.printStyled,o||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(R.classList.add("tabulator-print-header"),"string"==typeof(tt="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?R.innerHTML=tt:R.appendChild(tt),this.element.appendChild(R)),this.element.appendChild(U),this.table.options.printFooter&&(x.classList.add("tabulator-print-footer"),"string"==typeof(yt="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?x.innerHTML=yt:x.appendChild(yt),this.element.appendChild(x)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,U),window.print(),this.cleanup(),window.scrollTo(m,C),this.manualBlock=!1}}return _.moduleName="print",_})(),Gp=(()=>{class _ extends go{constructor(o){super(o),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(o){var u,a=this;this.currentVersion++,u=this.currentVersion,this.unwatchData(),this.data=o,this.origFuncs.push=o.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var m=Array.from(arguments);return!a.blocked&&u===a.currentVersion&&m.forEach(C=>{a.table.rowManager.addRowActual(C,!1)}),a.origFuncs.push.apply(o,arguments)}}),this.origFuncs.unshift=o.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var m=Array.from(arguments);return!a.blocked&&u===a.currentVersion&&m.forEach(C=>{a.table.rowManager.addRowActual(C,!0)}),a.origFuncs.unshift.apply(o,arguments)}}),this.origFuncs.shift=o.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var m;return!a.blocked&&u===a.currentVersion&&a.data.length&&(m=a.table.rowManager.getRowFromDataObject(a.data[0]))&&m.deleteActual(),a.origFuncs.shift.call(o)}}),this.origFuncs.pop=o.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var m;return!a.blocked&&u===a.currentVersion&&a.data.length&&(m=a.table.rowManager.getRowFromDataObject(a.data[a.data.length-1]))&&m.deleteActual(),a.origFuncs.pop.call(o)}}),this.origFuncs.splice=o.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var U,m=Array.from(arguments),C=m[0]<0?o.length+m[0]:m[0],R=m[1],x=!!m[2]&&m.slice(2);if(!a.blocked&&u===a.currentVersion){if(x&&((U=!!o[C]&&a.table.rowManager.getRowFromDataObject(o[C]))?x.forEach(yt=>{a.table.rowManager.addRowActual(yt,!0,U,!0)}):(x=x.slice().reverse()).forEach(yt=>{a.table.rowManager.addRowActual(yt,!0,!1,!0)})),0!==R){var tt=o.slice(C,void 0===m[1]?m[1]:C+R);tt.forEach((yt,Vt)=>{var ne=a.table.rowManager.getRowFromDataObject(yt);ne&&ne.deleteActual(Vt!==tt.length-1)})}(x||0!==R)&&a.table.rowManager.reRenderInPosition()}return a.origFuncs.splice.apply(o,arguments)}})}unwatchData(){if(!1!==this.data)for(var o in this.origFuncs)Object.defineProperty(this.data,o,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(o){var a=o.getData();for(var u in this.blocked=!0,a)this.watchKey(o,a,u);this.table.options.dataTree&&this.watchTreeChildren(o),this.blocked=!1}watchTreeChildren(o){var a=o.getData()[this.table.options.dataTreeChildField],u={};function m(){this.table.modules.dataTree.initializeRow(o),this.table.modules.dataTree.layoutRow(o),this.table.rowManager.refreshActiveData("tree",!1,!0)}a&&(u.push=a.push,Object.defineProperty(a,"push",{enumerable:!1,configurable:!0,value:()=>{var C=u.push.apply(a,arguments);return m(),C}}),u.unshift=a.unshift,Object.defineProperty(a,"unshift",{enumerable:!1,configurable:!0,value:()=>{var C=u.unshift.apply(a,arguments);return m(),C}}),u.shift=a.shift,Object.defineProperty(a,"shift",{enumerable:!1,configurable:!0,value:()=>{var C=u.shift.call(a);return m(),C}}),u.pop=a.pop,Object.defineProperty(a,"pop",{enumerable:!1,configurable:!0,value:()=>{var C=u.pop.call(a);return m(),C}}),u.splice=a.splice,Object.defineProperty(a,"splice",{enumerable:!1,configurable:!0,value:()=>{var C=u.splice.apply(a,arguments);return m(),C}}))}watchKey(o,a,u){var m=Object.getOwnPropertyDescriptor(a,u),C=a[u],R=this.currentVersion;Object.defineProperty(a,u,{set:x=>{if(C=x,!this.blocked&&R===this.currentVersion){var U={};U[u]=x,o.updateData(U)}m.set&&m.set(x)},get:()=>(m.get&&m.get(),C)})}unwatchRow(o){var a=o.getData();for(var u in a)Object.defineProperty(a,u,{value:a[u]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return _.moduleName="reactiveData",_})(),Bf=(()=>{class _ extends go{constructor(o){super(o),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(o){"row"===o.row.type&&this.initializeColumn("cell",o.column,o.element)}layoutColumnHeader(o){this.initializeColumn("header",o,o.element)}initializeColumn(o,a,u){var m=this,R=a.definition.resizable;if("header"===o&&(a.modules.resize={variableHeight:"textarea"==a.definition.formatter||a.definition.variableHeight}),!0===R||R==o){var x=document.createElement("div");x.className="tabulator-col-resize-handle";var U=document.createElement("div");U.className="tabulator-col-resize-handle prev",x.addEventListener("click",function(Vt){Vt.stopPropagation()});var tt=function(Vt){var ne=a.getLastColumn();ne&&m._checkResizability(ne)&&(m.startColumn=a,m._mouseDown(Vt,ne,x))};x.addEventListener("mousedown",tt),x.addEventListener("touchstart",tt,{passive:!0}),x.addEventListener("dblclick",function(Vt){var ne=a.getLastColumn();ne&&m._checkResizability(ne)&&(Vt.stopPropagation(),ne.reinitializeWidth(!0))}),U.addEventListener("click",function(Vt){Vt.stopPropagation()});var yt=function(Vt){var ne,Se,He;(ne=a.getFirstColumn())&&(He=(Se=m.table.columnManager.findColumnIndex(ne))>0&&m.table.columnManager.getColumnByIndex(Se-1))&&m._checkResizability(He)&&(m.startColumn=a,m._mouseDown(Vt,He,U))};U.addEventListener("mousedown",yt),U.addEventListener("touchstart",yt,{passive:!0}),U.addEventListener("dblclick",function(Vt){var ne,Se,He;(ne=a.getFirstColumn())&&(He=(Se=m.table.columnManager.findColumnIndex(ne))>0&&m.table.columnManager.getColumnByIndex(Se-1))&&m._checkResizability(He)&&(Vt.stopPropagation(),He.reinitializeWidth(!0))}),u.appendChild(x),u.appendChild(U)}}_checkResizability(o){return o.definition.resizable}_mouseDown(o,a,u){var m=this;function C(x){a.setWidth(m.table.rtl?m.startWidth-((void 0===x.screenX?x.touches[0].screenX:x.screenX)-m.startX):m.startWidth+((void 0===x.screenX?x.touches[0].screenX:x.screenX)-m.startX)),m.table.columnManager.renderer.rerenderColumns(!0),!m.table.browserSlow&&a.modules.resize&&a.modules.resize.variableHeight&&a.checkCellHeights()}function R(x){m.startColumn.modules.edit&&(m.startColumn.modules.edit.blocked=!1),m.table.browserSlow&&a.modules.resize&&a.modules.resize.variableHeight&&a.checkCellHeights(),document.body.removeEventListener("mouseup",R),document.body.removeEventListener("mousemove",C),u.removeEventListener("touchmove",C),u.removeEventListener("touchend",R),m.table.element.classList.remove("tabulator-block-select"),m.dispatch("column-resized",a),m.table.externalEvents.dispatch("columnResized",a.getComponent())}m.table.element.classList.add("tabulator-block-select"),o.stopPropagation(),m.startColumn.modules.edit&&(m.startColumn.modules.edit.blocked=!0),m.startX=void 0===o.screenX?o.touches[0].screenX:o.screenX,m.startWidth=a.getWidth(),document.body.addEventListener("mousemove",C),document.body.addEventListener("mouseup",R),u.addEventListener("touchmove",C,{passive:!0}),u.addEventListener("touchend",R)}}return _.moduleName="resizeColumns",_})(),Hf=(()=>{class _ extends go{constructor(o){super(o),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(o){var a=this,u=o.getElement(),m=document.createElement("div");m.className="tabulator-row-resize-handle";var C=document.createElement("div");C.className="tabulator-row-resize-handle prev",m.addEventListener("click",function(U){U.stopPropagation()});var R=function(U){a.startRow=o,a._mouseDown(U,o,m)};m.addEventListener("mousedown",R),m.addEventListener("touchstart",R,{passive:!0}),C.addEventListener("click",function(U){U.stopPropagation()});var x=function(U){var tt=a.table.rowManager.prevDisplayRow(o);tt&&(a.startRow=tt,a._mouseDown(U,tt,C))};C.addEventListener("mousedown",x),C.addEventListener("touchstart",x,{passive:!0}),u.appendChild(m),u.appendChild(C)}_mouseDown(o,a,u){var m=this;function C(x){a.setHeight(m.startHeight+((void 0===x.screenY?x.touches[0].screenY:x.screenY)-m.startY))}function R(x){document.body.removeEventListener("mouseup",C),document.body.removeEventListener("mousemove",C),u.removeEventListener("touchmove",C),u.removeEventListener("touchend",R),m.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",a.getComponent())}m.table.element.classList.add("tabulator-block-select"),o.stopPropagation(),m.startY=void 0===o.screenY?o.touches[0].screenY:o.screenY,m.startHeight=a.getHeight(),document.body.addEventListener("mousemove",C),document.body.addEventListener("mouseup",R),u.addEventListener("touchmove",C,{passive:!0}),u.addEventListener("touchend",R)}}return _.moduleName="resizeRows",_})(),Uf=(()=>{class _ extends go{constructor(o){super(o),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var a,o=this.table;this.tableHeight=o.element.clientHeight,this.tableWidth=o.element.clientWidth,o.element.parentNode&&(this.containerHeight=o.element.parentNode.clientHeight,this.containerWidth=o.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===o.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(u=>{if(!o.browserMobile||o.browserMobile&&!o.modules.edit.currentCell){var m=Math.floor(u[0].contentRect.height),C=Math.floor(u[0].contentRect.width);(this.tableHeight!=m||this.tableWidth!=C)&&(this.tableHeight=m,this.tableWidth=C,o.element.parentNode&&(this.containerHeight=o.element.parentNode.clientHeight,this.containerWidth=o.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),o.redraw())}}),this.observer.observe(o.element),a=window.getComputedStyle(o.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(a.getPropertyValue("max-height")||a.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(u=>{if(!o.browserMobile||o.browserMobile&&!o.modules.edit.currentCell){var m=Math.floor(u[0].contentRect.height),C=Math.floor(u[0].contentRect.width);(this.containerHeight!=m||this.containerWidth!=C)&&(this.containerHeight=m,this.containerWidth=C,this.tableHeight=o.element.clientHeight,this.tableWidth=o.element.clientWidth),o.columnManager.renderer.rerenderColumns(!0),o.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!o.browserMobile||o.browserMobile&&!o.modules.edit.currentCell)&&(o.columnManager.renderer.rerenderColumns(!0),o.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return _.moduleName="resizeTable",_})(),Wp=(()=>{class _ extends go{constructor(o){super(o),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(o){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(o||this.update())}initializeResponsivity(){var o=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(a,u){a.modules.responsive&&a.modules.responsive.order&&a.modules.responsive.visible&&(a.modules.responsive.index=u,o.push(a),!a.visible&&"collapse"===self.mode&&self.hiddenColumns.push(a))}),o=(o=o.reverse()).sort(function(a,u){return u.modules.responsive.order-a.modules.responsive.order||u.modules.responsive.index-a.modules.responsive.index}),this.columns=o,"collapse"===this.mode&&this.generateCollapsedContent();for(let a of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==a.definition.formatter){this.collapseHandleColumn=a;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(o){var a=o.getDefinition();o.modules.responsive={order:void 0===a.responsive?1:a.responsive,visible:!1!==a.visible}}initializeRow(o){var a;"calc"!==o.type&&((a=document.createElement("div")).classList.add("tabulator-responsive-collapse"),o.modules.responsiveLayout={element:a,open:this.collapseStartOpen},this.collapseStartOpen||(a.style.display="none"))}layoutRow(o){var a=o.getElement();o.modules.responsiveLayout&&(a.appendChild(o.modules.responsiveLayout.element),this.generateCollapsedRowContent(o))}updateColumnVisibility(o,a){!a&&o.modules.responsive&&(o.modules.responsive.visible=o.visible,this.initialize())}hideColumn(o){var a=this.hiddenColumns.length;o.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(o),this.generateCollapsedContent(),this.collapseHandleColumn&&!a&&this.collapseHandleColumn.show())}showColumn(o){var a;o.show(!1,!0),o.setWidth(o.getWidth()),"collapse"===this.mode&&((a=this.hiddenColumns.indexOf(o))>-1&&this.hiddenColumns.splice(a,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var o=this,a=!0;a;){let u="fitColumns"==o.table.modules.layout.getMode()?o.table.columnManager.getFlexBaseWidth():o.table.columnManager.getWidth(),m=(o.table.options.headerVisible?o.table.columnManager.element.clientWidth:o.table.element.clientWidth)-u;if(m<0){let C=o.columns[o.index];C?(o.hideColumn(C),o.index++):a=!1}else{let C=o.columns[o.index-1];C&&m>0&&m>=C.getWidth()?(o.showColumn(C),o.index--):a=!1}o.table.rowManager.activeRowsCount||o.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var o=this;this.table.rowManager.getDisplayRows().forEach(function(u){o.generateCollapsedRowContent(u)})}generateCollapsedRowContent(o){var a,u;if(o.modules.responsiveLayout){for(a=o.modules.responsiveLayout.element;a.firstChild;)a.removeChild(a.firstChild);(u=this.collapseFormatter(this.generateCollapsedRowData(o)))&&a.appendChild(u)}}generateCollapsedRowData(o){var C,a=this,u=o.getData(),m=[];return this.hiddenColumns.forEach(function(R){var x=R.getFieldValue(u);R.definition.title&&R.field&&(R.modules.format&&a.table.options.responsiveLayoutCollapseUseFormatters?(C={value:!1,data:{},getValue:function(){return x},getData:function(){return u},getElement:function(){return document.createElement("div")},getRow:function(){return o.getComponent()},getColumn:function(){return R.getComponent()}},m.push({field:R.field,title:R.definition.title,value:R.modules.format.formatter.call(a.table.modules.format,C,R.modules.format.params,function(tt){tt()})})):m.push({field:R.field,title:R.definition.title,value:x}))}),m}formatCollapsedData(o){var a=document.createElement("table");return o.forEach(function(u){var x,m=document.createElement("tr"),C=document.createElement("td"),R=document.createElement("td"),U=document.createElement("strong");C.appendChild(U),this.langBind("columns|"+u.field,function(tt){U.innerText=tt||u.title}),u.value instanceof Node?((x=document.createElement("div")).appendChild(u.value),R.appendChild(x)):R.innerHTML=u.value,m.appendChild(C),m.appendChild(R),a.appendChild(m)},this),Object.keys(o).length?a:""}}return _.moduleName="responsiveLayout",_})(),zp=(()=>{class _ extends go{constructor(o){super(o),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(a,u){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(o,a){return"selected"===o?this.selectedRows:a}rowDeleted(o){this._deselectRow(o,!0)}clearSelectionData(o){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==o&&this._rowSelectionChanged()}initializeRow(o){var a=this,u=o.getElement(),m=function(){setTimeout(function(){a.selecting=!1},50),document.body.removeEventListener("mouseup",m)};o.modules.select={selected:!1},a.table.options.selectableCheck.call(this.table,o.getComponent())?(u.classList.add("tabulator-selectable"),u.classList.remove("tabulator-unselectable"),a.table.options.selectable&&"highlight"!=a.table.options.selectable&&("click"===a.table.options.selectableRangeMode?u.addEventListener("click",function(C){if(C.shiftKey){a.table._clearSelection(),a.lastClickedRow=a.lastClickedRow||o;var R=a.table.rowManager.getDisplayRowIndex(a.lastClickedRow),x=a.table.rowManager.getDisplayRowIndex(o),U=R<=x?R:x,tt=R>=x?R:x,Vt=a.table.rowManager.getDisplayRows().slice(0).splice(U,tt-U+1);C.ctrlKey||C.metaKey?(Vt.forEach(function(ne){ne!==a.lastClickedRow&&(!0===a.table.options.selectable||a.isRowSelected(o)||a.selectedRows.length<a.table.options.selectable)&&a.toggleRow(ne)}),a.lastClickedRow=o):(a.deselectRows(void 0,!0),!0!==a.table.options.selectable&&Vt.length>a.table.options.selectable&&(Vt=Vt.slice(0,a.table.options.selectable)),a.selectRows(Vt)),a.table._clearSelection()}else C.ctrlKey||C.metaKey?(a.toggleRow(o),a.lastClickedRow=o):(a.deselectRows(void 0,!0),a.selectRows(o),a.lastClickedRow=o)}):(u.addEventListener("click",function(C){(!a.table.modExists("edit")||!a.table.modules.edit.getCurrentCell())&&a.table._clearSelection(),a.selecting||a.toggleRow(o)}),u.addEventListener("mousedown",function(C){if(C.shiftKey)return a.table._clearSelection(),a.selecting=!0,a.selectPrev=[],document.body.addEventListener("mouseup",m),document.body.addEventListener("keyup",m),a.toggleRow(o),!1}),u.addEventListener("mouseenter",function(C){a.selecting&&(a.table._clearSelection(),a.toggleRow(o),a.selectPrev[1]==o&&a.toggleRow(a.selectPrev[0]))}),u.addEventListener("mouseout",function(C){a.selecting&&(a.table._clearSelection(),a.selectPrev.unshift(o))})))):(u.classList.add("tabulator-unselectable"),u.classList.remove("tabulator-selectable"))}toggleRow(o){this.table.options.selectableCheck.call(this.table,o.getComponent())&&(o.modules.select&&o.modules.select.selected?this._deselectRow(o):this._selectRow(o))}selectRows(o){var a;switch(typeof o){case"undefined":this.table.rowManager.rows.forEach(u=>{this._selectRow(u,!0,!0)}),this._rowSelectionChanged();break;case"string":(a=this.table.rowManager.findRow(o))?this._selectRow(a,!0,!0):this.table.rowManager.getRows(o).forEach(u=>{this._selectRow(u,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(o)?(o.forEach(u=>{this._selectRow(u,!0,!0)}),this._rowSelectionChanged()):this._selectRow(o,!1,!0)}}_selectRow(o,a,u){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!u&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var m=this.table.rowManager.findRow(o);m?-1==this.selectedRows.indexOf(m)&&(m.getElement().classList.add("tabulator-selected"),m.modules.select||(m.modules.select={}),m.modules.select.selected=!0,m.modules.select.checkboxEl&&(m.modules.select.checkboxEl.checked=!0),this.selectedRows.push(m),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(m,!0),a||this.dispatchExternal("rowSelected",m.getComponent()),this._rowSelectionChanged(a)):a||console.warn("Selection Error - No such row found, ignoring selection:"+o)}isRowSelected(o){return-1!==this.selectedRows.indexOf(o)}deselectRows(o,a){var m,u=this;if(void 0===o){m=u.selectedRows.length;for(let C=0;C<m;C++)u._deselectRow(u.selectedRows[0],!0);u._rowSelectionChanged(a)}else Array.isArray(o)?(o.forEach(function(C){u._deselectRow(C,!0)}),u._rowSelectionChanged(a)):u._deselectRow(o,a)}_deselectRow(o,a){var C,u=this,m=u.table.rowManager.findRow(o);m?(C=u.selectedRows.findIndex(function(R){return R==m}))>-1&&(m.getElement().classList.remove("tabulator-selected"),m.modules.select||(m.modules.select={}),m.modules.select.selected=!1,m.modules.select.checkboxEl&&(m.modules.select.checkboxEl.checked=!1),u.selectedRows.splice(C,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(m,!1),a||this.dispatchExternal("rowDeselected",m.getComponent()),u._rowSelectionChanged(a)):a||console.warn("Deselection Error - No such row found, ignoring selection:"+o)}getSelectedData(){var o=[];return this.selectedRows.forEach(function(a){o.push(a.getData())}),o}getSelectedRows(){var o=[];return this.selectedRows.forEach(function(a){o.push(a.getComponent())}),o}_rowSelectionChanged(o){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),o||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(o,a){o._row.modules.select||(o._row.modules.select={}),o._row.modules.select.checkboxEl=a}registerHeaderSelectCheckbox(o){this.headerCheckboxElement=o}childRowSelection(o,a){var u=this.table.modules.dataTree.getChildren(o,!0);if(a)for(let m of u)this._selectRow(m,!0);else for(let m of u)this._deselectRow(m,!0)}}return _.moduleName="selectRow",_})();function sp(_,l,o,a,u,m,C){var R=window.DateTime||luxon.DateTime,x=C.format||"dd/MM/yyyy HH:mm:ss",U=C.alignEmptyValues,tt=0;if(void 0!==R){if(_=R.fromFormat(_,x),l=R.fromFormat(l,x),_.isValid){if(l.isValid)return _-l;tt=1}else tt=l.isValid?-1:0;return("top"===U&&"desc"===m||"bottom"===U&&"asc"===m)&&(tt*=-1),tt}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var zf={number:function(_,l,o,a,u,m,C){var R=C.alignEmptyValues,x=C.decimalSeparator,U=C.thousandSeparator,tt=0;if(_=String(_),l=String(l),U&&(_=_.split(U).join(""),l=l.split(U).join("")),x&&(_=_.split(x).join("."),l=l.split(x).join(".")),_=parseFloat(_),l=parseFloat(l),isNaN(_))tt=isNaN(l)?0:-1;else{if(!isNaN(l))return _-l;tt=1}return("top"===R&&"desc"===m||"bottom"===R&&"asc"===m)&&(tt*=-1),tt},string:function(_,l,o,a,u,m,C){var U,R=C.alignEmptyValues,x=0;if(_){if(l){switch(typeof C.locale){case"boolean":C.locale&&(U=this.langLocale());break;case"string":U=C.locale}return String(_).toLowerCase().localeCompare(String(l).toLowerCase(),U)}x=1}else x=l?-1:0;return("top"===R&&"desc"===m||"bottom"===R&&"asc"===m)&&(x*=-1),x},date:function(_,l,o,a,u,m,C){return C.format||(C.format="dd/MM/yyyy"),sp.call(this,_,l,o,a,u,m,C)},time:function(_,l,o,a,u,m,C){return C.format||(C.format="HH:mm"),sp.call(this,_,l,o,a,u,m,C)},datetime:sp,boolean:function(_,l,o,a,u,m,C){return(!0===_||"true"===_||"True"===_||1===_?1:0)-(!0===l||"true"===l||"True"===l||1===l?1:0)},array:function(_,l,o,a,u,m,C){var U=C.type||"length",tt=C.alignEmptyValues,yt=0;function Vt(ne){switch(U){case"length":return ne.length;case"sum":return ne.reduce(function(Se,He){return Se+He});case"max":return Math.max.apply(null,ne);case"min":return Math.min.apply(null,ne);case"avg":return ne.reduce(function(Se,He){return Se+He})/ne.length}}if(Array.isArray(_)){if(Array.isArray(l))return(_?Vt(_):0)-(l?Vt(l):0);tt=1}else tt=Array.isArray(l)?-1:0;return("top"===tt&&"desc"===m||"bottom"===tt&&"asc"===m)&&(yt*=-1),yt},exists:function(_,l,o,a,u,m,C){return(void 0===_?0:1)-(void 0===l?0:1)},alphanum:function(_,l,o,a,u,m,C){var R,x,U,tt,Vt,yt=0,ne=/(\d+)|(\D+)/g,Se=/\d/,He=C.alignEmptyValues,ze=0;if(_||0===_){if(l||0===l){if(isFinite(_)&&isFinite(l))return _-l;if((R=String(_).toLowerCase())===(x=String(l).toLowerCase()))return 0;if(!Se.test(R)||!Se.test(x))return R>x?1:-1;for(R=R.match(ne),x=x.match(ne),Vt=R.length>x.length?x.length:R.length;yt<Vt;)if((U=R[yt])!==(tt=x[yt++]))return isFinite(U)&&isFinite(tt)?("0"===U.charAt(0)&&(U="."+U),"0"===tt.charAt(0)&&(tt="."+tt),U-tt):U>tt?1:-1;return R.length>x.length}ze=1}else ze=l||0===l?-1:0;return("top"===He&&"desc"===m||"bottom"===He&&"asc"===m)&&(ze*=-1),ze}},Kp={integer:function(_,l,o){return""===l||null==l||"number"==typeof(l=Number(l))&&isFinite(l)&&Math.floor(l)===l},float:function(_,l,o){return""===l||null==l||"number"==typeof(l=Number(l))&&isFinite(l)&&l%1!=0},numeric:function(_,l,o){return""===l||null==l||!isNaN(l)},string:function(_,l,o){return""===l||null==l||isNaN(l)},max:function(_,l,o){return""===l||null==l||parseFloat(l)<=o},min:function(_,l,o){return""===l||null==l||parseFloat(l)>=o},starts:function(_,l,o){return""===l||null==l||String(l).toLowerCase().startsWith(String(o).toLowerCase())},ends:function(_,l,o){return""===l||null==l||String(l).toLowerCase().endsWith(String(o).toLowerCase())},minLength:function(_,l,o){return""===l||null==l||String(l).length>=o},maxLength:function(_,l,o){return""===l||null==l||String(l).length<=o},in:function(_,l,o){return""===l||null==l||("string"==typeof o&&(o=o.split("|")),""===l||o.indexOf(l)>-1)},regex:function(_,l,o){return""===l||null==l||new RegExp(o).test(l)},unique:function(_,l,o){if(""===l||null==l)return!0;var a=!0,u=_.getData(),m=_.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(C){var R=C.getData();R!==u&&l==m.getFieldValue(R)&&(a=!1)}),a},required:function(_,l,o){return""!==l&&null!=l}},jf=Object.freeze({__proto__:null,AccessorModule:Nh,AjaxModule:Su,ClipboardModule:Wh,ColumnCalcsModule:sd,DataTreeModule:kp,DownloadModule:Zd,EditModule:ii,ExportModule:gr,FilterModule:$r,FormatModule:ip,FrozenColumnsModule:Pp,FrozenRowsModule:np,GroupRowsModule:Td,HistoryModule:Sm,HtmlTableImportModule:Bp,InteractionModule:Hp,KeybindingsModule:Lf,MenuModule:Nf,MoveColumnsModule:jc,MoveRowsModule:Cd,MutatorModule:wm,PageModule:Rm,PersistenceModule:Ff,PrintModule:op,ReactiveDataModule:Gp,ResizeColumnsModule:Bf,ResizeRowsModule:Hf,ResizeTableModule:Uf,ResponsiveLayoutModule:Wp,SelectRowModule:zp,SortModule:(()=>{class _ extends go{constructor(o){super(o),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(o,a,u,m){var C=this.getSort();return C.forEach(R=>{delete R.column}),m.sort=C,m}userSetSort(o,a){this.setSort(o,a),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(o){var u,m,a=!1;switch(typeof o.definition.sorter){case"string":_.sorters[o.definition.sorter]?a=_.sorters[o.definition.sorter]:console.warn("Sort Error - No such sorter found: ",o.definition.sorter);break;case"function":a=o.definition.sorter}o.modules.sort={sorter:a,dir:"none",params:o.definition.sorterParams||{},startingDir:o.definition.headerSortStartingDir||"asc",tristate:o.definition.headerSortTristate},!1!==o.definition.headerSort&&((u=o.getElement()).classList.add("tabulator-sortable"),(m=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?m.appendChild(this.table.options.headerSortElement):m.innerHTML=this.table.options.headerSortElement,o.titleHolderElement.appendChild(m),o.modules.sort.element=m,u.addEventListener("click",C=>{var R="",x=[],U=!1;if(o.modules.sort){if(o.modules.sort.tristate)R="none"==o.modules.sort.dir?o.modules.sort.startingDir:o.modules.sort.dir==o.modules.sort.startingDir?"asc"==o.modules.sort.dir?"desc":"asc":"none";else switch(o.modules.sort.dir){case"asc":R="desc";break;case"desc":R="asc";break;default:R=o.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(C.shiftKey||C.ctrlKey)?((U=(x=this.getSort()).findIndex(tt=>tt.field===o.getField()))>-1?(x[U].dir=R,U!=x.length-1&&(U=x.splice(U,1)[0],"none"!=R&&x.push(U))):"none"!=R&&x.push({column:o,dir:R}),this.setSort(x)):"none"==R?this.clear():this.setSort(o,R),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var o=this.changed;return this.changed=!1,o}getSort(){var a=[];return this.sortList.forEach(function(u){u.column&&a.push({column:u.column.getComponent(),field:u.column.getField(),dir:u.dir})}),a}setSort(o,a){var u=this,m=[];Array.isArray(o)||(o=[{column:o,dir:a}]),o.forEach(function(C){var R;(R=u.table.columnManager.findColumn(C.column))?(C.column=R,m.push(C),u.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",C.column)}),u.sortList=m,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(o){var C,a=this.table.rowManager.activeRows[0],u="string";if(a&&(a=a.getData(),o.getField()))switch(C=o.getFieldValue(a),typeof C){case"undefined":u="string";break;case"boolean":u="boolean";break;default:isNaN(C)||""===C?C.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(u="alphanum"):u="number"}return _.sorters[u]}sort(o){var a=this,u=this.table.options.sortOrderReverse?a.sortList.slice().reverse():a.sortList,m=[],C=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",a.getSort()),a.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(u.forEach(function(R,x){var U=R.column.modules.sort;R.column&&U&&(U.sorter||(U.sorter=a.findSorter(R.column)),R.params="function"==typeof U.params?U.params(R.column.getComponent(),R.dir):U.params,m.push(R)),a.setColumnHeader(R.column,R.dir)}),m.length&&a._sortItems(o,m)):u.forEach(function(R,x){a.setColumnHeader(R.column,R.dir)}),this.subscribedExternal("dataSorted")&&(o.forEach(R=>{C.push(R.getComponent())}),this.dispatchExternal("dataSorted",a.getSort(),C)),o}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(o){o.modules.sort&&(o.modules.sort.dir="none",o.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(o,a){o.modules.sort.dir=a,o.getElement().setAttribute("aria-sort",a)}_sortItems(o,a){var u=a.length-1;o.sort((m,C)=>{for(var R,x=u;x>=0;x--){let U=a[x];if(0!==(R=this._sortRow(m,C,U.column,U.dir,U.params)))break}return R})}_sortRow(o,a,u,m,C){var R,x,U="asc"==m?o:a,tt="asc"==m?a:o;return o=void 0!==(o=u.getFieldValue(U.getData()))?o:"",a=void 0!==(a=u.getFieldValue(tt.getData()))?a:"",R=U.getComponent(),x=tt.getComponent(),u.modules.sort.sorter.call(this,o,a,R,x,u.getComponent(),m,C)}}return _.moduleName="sort",_.sorters=zf,_})(),ValidateModule:(()=>{class _ extends go{constructor(o){super(o),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(o){return!o.modules.validate||!o.modules.validate.invalid}cellValidate(o){return this.validate(o.column.modules.validate,o,o.getValue())}columnValidate(o){var a=[];return o.cells.forEach(function(u){this.cellValidate(u)||a.push(u.getComponent())}),!a.length||a}rowValidate(o){var a=[];return o.cells.forEach(function(u){this.cellValidate(u)||a.push(u.getComponent())}),!a.length||a}userClearCellValidation(o){o||(o=this.getInvalidCells()),Array.isArray(o)||(o=[o]),o.forEach(a=>{this.clearValidation(a._getSelf())})}userValidate(o){var a=[];return this.table.rowManager.rows.forEach(function(u){var m=u.validate();!0!==m&&(a=a.concat(m))}),!a.length||a}initializeColumnCheck(o){void 0!==o.definition.validator&&this.initializeColumn(o)}initializeColumn(o){var m,a=this,u=[];o.definition.validator&&(Array.isArray(o.definition.validator)?o.definition.validator.forEach(function(C){(m=a._extractValidator(C))&&u.push(m)}):(m=this._extractValidator(o.definition.validator))&&u.push(m),o.modules.validate=!!u.length&&u)}_extractValidator(o){var a,u,m;switch(typeof o){case"string":return(m=o.indexOf(":"))>-1?(a=o.substring(0,m),u=o.substring(m+1)):a=o,this._buildValidator(a,u);case"function":return this._buildValidator(o);case"object":return this._buildValidator(o.type,o.parameters)}}_buildValidator(o,a){var u="function"==typeof o?o:_.validators[o];return u?{type:"function"==typeof o?"function":o,func:u,params:a}:(console.warn("Validator Setup Error - No matching validator found:",o),!1)}validate(o,a,u){var m=this,C=[],R=this.invalidCells.indexOf(a);return o&&o.forEach(function(x){x.func.call(m,a.getComponent(),u,x.params)||C.push({type:x.type,parameters:x.params})}),C=!C.length||C,a.modules.validate||(a.modules.validate={}),!0===C?(a.modules.validate.invalid=!1,a.getElement().classList.remove("tabulator-validation-fail"),R>-1&&this.invalidCells.splice(R,1)):(a.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&a.getElement().classList.add("tabulator-validation-fail"),-1==R&&this.invalidCells.push(a)),C}getInvalidCells(){var o=[];return this.invalidCells.forEach(a=>{o.push(a.getComponent())}),o}clearValidation(o){var a;o.modules.validate&&o.modules.validate.invalid&&(o.getElement().classList.remove("tabulator-validation-fail"),o.modules.validate.invalid=!1,(a=this.invalidCells.indexOf(o))>-1&&this.invalidCells.splice(a,1))}}return _.moduleName="validate",_.validators=Kp,_})()}),Yf={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class Sd{constructor(l,o){this.table=l,this.msgType=o,this.registeredDefaults={}}register(l,o){this.registeredDefaults[l]=o}generate(l,o={}){var a=Object.assign({},this.registeredDefaults);if(Object.assign(a,l),!1!==o.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var u in o)a.hasOwnProperty(u)||console.warn("Invalid "+this.msgType+" option:",u);for(var u in a)u in o?a[u]=o[u]:Array.isArray(a[u])?a[u]=Object.assign([],a[u]):"object"==typeof a[u]&&null!==a[u]?a[u]=Object.assign({},a[u]):void 0===a[u]&&delete a[u];return a}}class wd extends du{constructor(l){super(l),this.elementVertical=l.rowManager.element,this.elementHorizontal=l.columnManager.element,this.tableElement=l.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(l){}renderRows(){}renderColumns(){}rerenderRows(l){l&&l()}rerenderColumns(l,o){}renderRowCells(l){}rerenderRowCells(l,o){}scrollColumns(l,o){}scrollRows(l,o){}resize(){}scrollToRow(l){}scrollToRowNearestTop(l){}visibleRows(l){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(l,o){var a=l.getElement();o%2?(a.classList.add("tabulator-row-even"),a.classList.remove("tabulator-row-odd")):(a.classList.add("tabulator-row-odd"),a.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(l){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(l,o,a){var u=this.rows().indexOf(l),m=l.getElement(),C=0;return new Promise((R,x)=>{if(u>-1){if(void 0===a&&(a=this.table.options.scrollToRowIfVisible),!a&&$s.elVisible(m)&&(C=$s.elOffset(m).top-$s.elOffset(this.elementVertical).top)>0&&C<this.elementVertical.clientHeight-m.offsetHeight)return!1;switch(void 0===o&&(o=this.table.options.scrollToRowPosition),"nearest"===o&&(o=this.scrollToRowNearestTop(l)?"top":"bottom"),this.scrollToRow(l),o){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(m.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-m.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-m.offsetTop)+m.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+m.offsetHeight}R()}else console.warn("Scroll Error - Row not visible"),x("Scroll Error - Row not visible")})}}class Xf extends wd{constructor(l){super(l)}renderRowCells(l){l.cells.forEach(o=>{l.element.appendChild(o.getElement()),o.cellRendered()})}reinitializeColumnWidths(l){l.forEach(function(o){o.reinitializeWidth()})}}class Rd extends wd{constructor(l){super(l),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var l=this.options("columns"),a=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),a=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),a=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),a=!1),l&&l.find(u=>u.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),a=!1),a}renderColumns(l,o){this.dataChange()}scrollColumns(l,o){this.scrollLeft!=l&&(this.scrollLeft=l,this.scroll(l-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(l,o){var a={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!l||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var u=0;this.table.columnManager.columnsByIndex.forEach(m=>{var C={};if(m.visible){var R=m.getWidth();C.leftPos=u,C.rightPos=u+R,C.width=R,"fitData"===this.options("layout")&&(C.fitDataCheck=!0),u+R>this.vDomScrollPosLeft&&u<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=u),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=R),this.columns.push(m),m.modules.vdomHoz=C,u+=R}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,o||(!l||this.reinitChanged(a))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(l){this.initialized?this.initializeRow(l):l.cells.forEach(o=>{l.element.appendChild(o.getElement()),o.cellRendered()})}rerenderRowCells(l,o){this.reinitializeRow(l,o)}reinitializeColumnWidths(l){for(let o=this.leftCol;o<=this.rightCol;o++)this.columns[o].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var m,u,l=!1,o=0,a=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(C=>{!C.definition.width&&C.visible&&(l=!0)}),l&&l&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,u=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(m=u.getElement(),u.generateCells(),this.tableElement.appendChild(m),a=0;a<u.cells.length;a++){let x=u.cells[a];if(m.appendChild(x.getElement()),x.column.reinitializeWidth(),(o+=x.column.getWidth())>this.vDomScrollPosRight)break}for(m.parentNode.removeChild(m),this.fitDataColAvg=Math.floor(o/(a+1));a<this.table.columnManager.columnsByIndex.length;a++)this.table.columnManager.columnsByIndex[a].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(l){var o=!0;return l.cols.length!==this.columns.length||l.leftCol!==this.leftCol||l.rightCol!==this.rightCol||(l.cols.forEach((a,u)=>{a!==this.columns[u]&&(o=!1)}),!o)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(o=>{this.reinitializeRow(o,!0)})}scroll(l){this.vDomScrollPosLeft+=l,this.vDomScrollPosRight+=l,l>.8*this.elementVertical.clientWidth?this.rerenderColumns():l>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(l,o,a){for(let u=l;u<o;u++){let m=this.columns[u];m.modules.vdomHoz.leftPos+=a,m.modules.vdomHoz.rightPos+=a}}addColRight(){var l=this.columns[this.rightCol+1];l&&l.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(a=>{if("group"!==a.type){var u=a.getCell(l);a.getElement().appendChild(u.getElement()),u.cellRendered()}}),this.fitDataColActualWidthCheck(l),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=l.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var l=this.columns[this.leftCol-1];l&&l.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(u=>{if("group"!==u.type){var m=u.getCell(l);u.getElement().prepend(m.getElement()),m.cellRendered()}}),this.fitDataColActualWidthCheck(l),this.leftCol?this.vDomPadLeft-=l.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(l){var o;(l=this.columns[this.rightCol])&&l.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(o=this.table.rowManager.getVisibleRows(),l.modules.vdomHoz.visible=!1,o.forEach(a=>{if("group"!==a.type){var u=a.getCell(l);a.getElement().removeChild(u.getElement())}}),this.vDomPadRight+=l.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var l=this.columns[this.leftCol];l&&l.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(a=>{if("group"!==a.type){var u=a.getCell(l);u.parentNode&&a.getElement().removeChild(u.getElement())}}),this.vDomPadLeft+=l.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(l){var o,a;l.modules.vdomHoz.fitDataCheck&&(l.reinitializeWidth(),(a=(o=l.getWidth())-l.modules.vdomHoz.width)&&(l.modules.vdomHoz.rightPos+=a,l.modules.vdomHoz.width=o,this.colPositionAdjust(this.rightCol+2,this.columns.length,a)),l.modules.vdomHoz.fitDataCheck=!1)}initializeRow(l){if("group"!==l.type){l.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let o=this.leftCol;o<=this.rightCol;o++){let a=this.columns[o];if(a&&a.visible){let u=l.getCell(a);l.getElement().appendChild(u.getElement()),u.cellRendered()}}}}reinitializeRow(l,o){if("group"!==l.type&&(o||!l.modules.vdomHoz||l.modules.vdomHoz.leftCol!==this.leftCol||l.modules.vdomHoz.rightCol!==this.rightCol)){for(var a=l.getElement();a.firstChild;)a.removeChild(a.firstChild);this.initializeRow(l)}}}class lp extends du{constructor(l){super(l),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new Sd(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var l;(l="string"==typeof this.table.options.renderHorizontal?{virtual:Rd,basic:Xf}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new l(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var l=document.createElement("div");return l.classList.add("tabulator-headers"),l.setAttribute("role","row"),l}createHeaderElement(){var l=document.createElement("div");return l.classList.add("tabulator-header"),l.setAttribute("role","rowgroup"),this.table.options.headerVisible||l.classList.add("tabulator-header-hidden"),l}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(l){var a=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=l,this.element.style.marginLeft=l>a?-(l-a)+"px":0,this.scrollLeft=l,this.renderer.scrollColumns(l)}generateColumnsFromRowData(l){var u,m,o=[],a=this.table.options.autoColumnsDefinitions;if(l&&l.length){for(var C in u=l[0]){let R={field:C,title:C},x=u[C];switch(typeof x){case"undefined":m="string";break;case"boolean":m="boolean";break;case"object":m=Array.isArray(x)?"array":"string";break;default:m=isNaN(x)||""===x?x.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}R.sorter=m,o.push(R)}if(a)switch(typeof a){case"function":this.table.options.columns=a.call(this.table,o);break;case"object":Array.isArray(a)?o.forEach(R=>{var x=a.find(U=>U.field===R.field);x&&Object.assign(R,x)}):o.forEach(R=>{a[R.field]&&Object.assign(R,a[R.field])}),this.table.options.columns=o}else this.table.options.columns=o;this.setColumns(this.table.options.columns)}}setColumns(l,o){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),l.forEach((a,u)=>{this._addColumn(a)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(l,o,a){var u=new Yu(l,this),m=u.getElement(),C=a&&this.findColumnIndex(a);if(a&&C>-1){var R=a.getTopColumn(),x=this.columns.indexOf(R),U=R.getElement();o?(this.columns.splice(x,0,u),U.parentNode.insertBefore(m,U)):(this.columns.splice(x+1,0,u),U.parentNode.insertBefore(m,U.nextSibling))}else o?(this.columns.unshift(u),this.headersElement.insertBefore(u.getElement(),this.headersElement.firstChild)):(this.columns.push(u),this.headersElement.appendChild(u.getElement()));return u.columnRendered(),u}registerColumnField(l){l.definition.field&&(this.columnsByField[l.definition.field]=l)}registerColumnPosition(l){this.columnsByIndex.push(l)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(l){l.reRegisterPosition()})}verticalAlignHeaders(){var l=0;this.columns.forEach(o=>{var a;o.clearVerticalAlign(),(a=o.getHeight())>l&&(l=a)}),this.columns.forEach(o=>{o.verticalAlign(this.table.options.columnHeaderVertAlign,l)}),this.table.rowManager.adjustTableSize()}findColumn(l){return"object"!=typeof l?this.columnsByField[l]||!1:l instanceof Yu?l:l instanceof Fh?l._getSelf()||!1:"undefined"!=typeof HTMLElement&&l instanceof HTMLElement&&this.columns.find(a=>a.element===l)||!1}getColumnByField(l){return this.columnsByField[l]}getColumnsByFieldRoot(l){var o=[];return Object.keys(this.columnsByField).forEach(a=>{a.split(".")[0]===l&&o.push(this.columnsByField[a])}),o}getColumnByIndex(l){return this.columnsByIndex[l]}getFirstVisibileColumn(l){return(l=this.columnsByIndex.findIndex(o=>o.visible))>-1&&this.columnsByIndex[l]}getColumns(){return this.columns}findColumnIndex(l){return this.columnsByIndex.findIndex(o=>l===o)}getRealColumns(){return this.columnsByIndex}traverse(l){this.columnsByIndex.forEach((o,a)=>{l(o,a)})}getDefinitions(l){var o=[];return this.columnsByIndex.forEach(a=>{(!l||l&&a.visible)&&o.push(a.getDefinition())}),o}getDefinitionTree(){var l=[];return this.columns.forEach(o=>{l.push(o.getDefinition(!0))}),l}getComponents(l){var o=[];return(l?this.columns:this.columnsByIndex).forEach(u=>{o.push(u.getComponent())}),o}getWidth(){var l=0;return this.columnsByIndex.forEach(o=>{o.visible&&(l+=o.getWidth())}),l}moveColumn(l,o,a){this.moveColumnActual(l,o,a),o.element.parentNode.insertBefore(l.element,o.element),a&&o.element.parentNode.insertBefore(o.element,l.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(l,o,a){this._moveColumnInArray(l.parent.isGroup?l.parent.columns:this.columns,l,o,a),this._moveColumnInArray(this.columnsByIndex,l,o,a,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",l,o,a),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",l.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(l,o,a,u,m){var R,C=l.indexOf(o);C>-1&&(l.splice(C,1),(R=l.indexOf(a))>-1?u&&(R+=1):R=C,l.splice(R,0,o),m&&(this.chain("column-moving-rows",[o,a,u],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(U){if(U.cells.length){var tt=U.cells.splice(C,1)[0];U.cells.splice(R,0,tt)}}))}scrollToColumn(l,o,a){var u=0,m=0,C=0,R=l.getElement();return new Promise((x,U)=>{if(void 0===o&&(o=this.table.options.scrollToColumnPosition),void 0===a&&(a=this.table.options.scrollToColumnIfVisible),l.visible){switch(o){case"middle":case"center":C=-this.element.clientWidth/2;break;case"right":C=R.clientWidth-this.headersElement.clientWidth}if(!a&&(m=R.offsetLeft)>0&&m+R.offsetWidth<this.element.clientWidth)return!1;u=R.offsetLeft+C,u=Math.max(Math.min(u,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(u),this.scrollHorizontal(u),x()}else console.warn("Scroll Error - Column not visible"),U("Scroll Error - Column not visible")})}generateCells(l){var o=[];return this.columnsByIndex.forEach(a=>{o.push(a.generateCell(l))}),o}getFlexBaseWidth(){var l=this.table.element.clientWidth,o=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(l-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(a){var u,m,C;a.visible&&(u=a.definition.width||0,m=parseInt(a.minWidth),C="string"==typeof u?u.indexOf("%")>-1?l/100*parseInt(u):parseInt(u):u,o+=C>m?C:m)}),o}addColumn(l,o,a){return new Promise((u,m)=>{var C=this._addColumn(l,o,a);this._reIndexColumns(),this.dispatch("column-add",l,o,a),"fitColumns"!=this.layoutMode()&&C.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),u(C)})}deregisterColumn(l){var a,o=l.getField();o&&delete this.columnsByField[o],(a=this.columnsByIndex.indexOf(l))>-1&&this.columnsByIndex.splice(a,1),(a=this.columns.indexOf(l))>-1&&this.columns.splice(a,1),this.verticalAlignHeaders(),this.redraw()}redraw(l){$s.elVisible(this.element)&&this.verticalAlignHeaders(),l&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",l)||this.layoutRefresh(),this.dispatch("table-redraw",l),this.table.footerManager.redraw()}}class Kf extends wd{constructor(l){super(l),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var l=this.tableElement;l.firstChild;)l.removeChild(l.firstChild);l.scrollTop=0,l.scrollLeft=0,l.style.minWidth="",l.style.minHeight="",l.style.display="",l.style.visibility=""}renderRows(){var l=this.tableElement,o=!0;this.rows().forEach((a,u)=>{this.styleRow(a,u),l.appendChild(a.getElement()),a.initialize(!0),"group"!==a.type&&(o=!1)}),l.style.minWidth=o?this.table.columnManager.getWidth()+"px":""}rerenderRows(l){this.render(),l&&l()}scrollToRowNearestTop(l){var o=$s.elOffset(l.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-o)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-o))}scrollToRow(l){var o=l.getElement();this.elementVertical.scrollTop=$s.elOffset(o).top-$s.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(l){return this.rows()}}class cp extends wd{constructor(l){super(l),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var l=this.tableElement;l.firstChild;)l.removeChild(l.firstChild);l.style.paddingTop="",l.style.paddingBottom="",l.style.minWidth="",l.style.minHeight="",l.style.display="",l.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(l){for(var o=this.elementVertical.scrollTop,a=!1,u=!1,m=this.table.rowManager.scrollLeft,C=this.rows(),R=this.vDomTop;R<=this.vDomBottom;R++)if(C[R]){var x=o-C[R].getElement().offsetTop;if(!(!1===u||Math.abs(x)<u))break;u=x,a=R}C.forEach(U=>{U.deinitializeHeight()}),l&&l(),this._virtualRenderFill(!1===a?this.rows.length-1:a,!0,u||0),this.scrollColumns(m)}scrollColumns(l){this.table.rowManager.scrollHorizontal(l)}scrollRows(l,o){var a=l-this.vDomScrollPosTop,u=l-this.vDomScrollPosBottom,m=2*this.vDomWindowBuffer,C=this.rows();if(this.scrollTop=l,-a>m||u>m){var R=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*C.length)),this.scrollColumns(R)}else o?(a<0&&this._addTopRow(C,-a),u<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(C,-u):this.vDomScrollPosBottom=this.scrollTop)):(u>=0&&this._addBottomRow(C,u),a>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(C,a):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(l){var o=this.rows().indexOf(l);return!(Math.abs(this.vDomTop-o)>Math.abs(this.vDomBottom-o))}scrollToRow(l){var o=this.rows().indexOf(l);o>-1&&this._virtualRenderFill(o,!0)}visibleRows(l){var o=this.elementVertical.scrollTop,a=this.elementVertical.clientHeight+o,u=!1,m=0,C=0,R=this.rows();if(l)m=this.vDomTop,C=this.vDomBottom;else for(var x=this.vDomTop;x<=this.vDomBottom;x++)if(R[x])if(u){if(!(a-R[x].getElement().offsetTop>=0))break;C=x}else if(o-R[x].getElement().offsetTop>=0)m=x;else{if(u=!0,!(a-R[x].getElement().offsetTop>=0))break;C=x}return R.slice(m,C+1)}_virtualRenderFill(l,o,a){var u=this.tableElement,m=this.elementVertical,C=0,R=0,x=0,U=0,tt=0,yt=this.rows(),Vt=yt.length,ne=this.elementVertical.clientHeight;if(a=a||0,l=l||0){for(;u.firstChild;)u.removeChild(u.firstChild);(x=(Vt-l+1)*this.vDomRowHeight)<ne&&(l-=Math.ceil((ne-x)/this.vDomRowHeight))<0&&(l=0),l-=C=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),l)}else this.clear();if(Vt&&$s.elVisible(this.elementVertical)){for(this.vDomTop=l,this.vDomBottom=l-1;(R<=ne+this.vDomWindowBuffer||tt<this.vDomWindowMinTotalRows)&&this.vDomBottom<Vt-1;){var ze,Se=this.vDomBottom+1,He=yt[Se];this.styleRow(He,Se),u.appendChild(He.getElement()),He.initialize(),He.heightInitialized||He.normalizeHeight(!0),ze=He.getHeight(),tt<C?U+=ze:R+=ze,ze>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*ze),this.vDomBottom++,tt++}l?(this.vDomTopPad=o?this.vDomRowHeight*this.vDomTop+a:this.scrollTop-U,this.vDomBottomPad=this.vDomBottom==Vt-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-R-U,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((R+U)/tt),this.vDomBottomPad=this.vDomRowHeight*(Vt-this.vDomBottom-1),this.vDomScrollHeight=U+R+this.vDomBottomPad-ne),u.style.paddingTop=this.vDomTopPad+"px",u.style.paddingBottom=this.vDomBottomPad+"px",o&&(this.scrollTop=this.vDomTopPad+U+a-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-ne:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-ne),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&o&&(this.scrollTop+=this.elementVertical.offsetHeight-ne),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,m.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(l,o){for(var a=this.tableElement,u=[],m=0,C=this.vDomTop-1,R=0;this.vDomTop;){let U,tt,x=l[C];if(!(x&&R<this.vDomMaxRenderChain))break;if(U=x.getHeight()||this.vDomRowHeight,tt=x.initialized,!(o>=U))break;this.styleRow(x,C),a.insertBefore(x.getElement(),a.firstChild),(!x.initialized||!x.heightInitialized)&&u.push(x),x.initialize(),tt||(U=x.getElement().offsetHeight,U>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*U)),o-=U,m+=U,this.vDomTop--,C--,R++}for(let x of u)x.clearCellHeight();this._quickNormalizeRowHeight(u),m&&(this.vDomTopPad-=m,this.vDomTopPad<0&&(this.vDomTopPad=C*this.vDomRowHeight),C<1&&(this.vDomTopPad=0),a.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=m)}_removeTopRow(l,o){for(var a=[],u=0,m=0;;){let R,C=l[this.vDomTop];if(!(C&&m<this.vDomMaxRenderChain))break;if(R=C.getHeight()||this.vDomRowHeight,!(o>=R))break;this.vDomTop++,o-=R,u+=R,a.push(C),m++}for(let C of a){let R=C.getElement();R.parentNode&&R.parentNode.removeChild(R)}u&&(this.vDomTopPad+=u,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?u:u+this.vDomWindowBuffer)}_addBottomRow(l,o){for(var a=this.tableElement,u=[],m=0,C=this.vDomBottom+1,R=0;;){let U,tt,x=l[C];if(!(x&&R<this.vDomMaxRenderChain))break;if(U=x.getHeight()||this.vDomRowHeight,tt=x.initialized,!(o>=U))break;this.styleRow(x,C),a.appendChild(x.getElement()),(!x.initialized||!x.heightInitialized)&&u.push(x),x.initialize(),tt||(U=x.getElement().offsetHeight,U>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*U)),o-=U,m+=U,this.vDomBottom++,C++,R++}for(let x of u)x.clearCellHeight();this._quickNormalizeRowHeight(u),m&&(this.vDomBottomPad-=m,(this.vDomBottomPad<0||C==l.length-1)&&(this.vDomBottomPad=0),a.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=m)}_removeBottomRow(l,o){for(var a=[],u=0,m=0;;){let R,C=l[this.vDomBottom];if(!(C&&m<this.vDomMaxRenderChain))break;if(R=C.getHeight()||this.vDomRowHeight,!(o>=R))break;this.vDomBottom--,o-=R,u+=R,a.push(C),m++}for(let C of a){let R=C.getElement();R.parentNode&&R.parentNode.removeChild(R)}u&&(this.vDomBottomPad+=u,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=u)}_quickNormalizeRowHeight(l){for(let o of l)o.calcHeight();for(let o of l)o.setCellHeight()}}class up extends du{constructor(l){super(l),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var l=document.createElement("div");return l.classList.add("tabulator-tableholder"),l.setAttribute("tabindex",0),l.setAttribute("role","rowgroup"),l}createTableElement(){var l=document.createElement("div");return l.classList.add("tabulator-table"),l.setAttribute("role","rowgroup"),l}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(l,o){return o?this.activeRows.indexOf(l):this.rows.indexOf(l)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var l=this.element.scrollLeft,o=this.scrollLeft>l,a=this.element.scrollTop,u=this.scrollTop>a;this.scrollLeft!=l&&(this.scrollLeft=l,this.dispatch("scroll-horizontal",l,o),this.dispatchExternal("scrollHorizontal",l,o)),this.scrollTop!=a&&(this.scrollTop=a,this.renderer.scrollRows(a,u),this.dispatch("scroll-vertical",a,u),this.dispatchExternal("scrollVertical",a,u))})}findRow(l){return"object"!=typeof l?null!=l&&(this.rows.find(a=>a.data[this.table.options.index]==l)||!1):l instanceof ml?l:l instanceof Eh?l._getSelf()||!1:"undefined"!=typeof HTMLElement&&l instanceof HTMLElement&&this.rows.find(a=>a.getElement()===l)||!1}getRowFromDataObject(l){return this.rows.find(a=>a.data===l)||!1}getRowFromPosition(l,o){return o?this.activeRows[l]:this.rows[l]}scrollToRow(l,o,a){return this.renderer.scrollToRowPosition(l,o,a)}setData(l,o,a){return new Promise((u,m)=>{o&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(l,!0):this.reRenderInPosition(()=>{this._setDataActual(l)}):(this.table.options.autoColumns&&a&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(l),this.resetScroll(),this._setDataActual(l)),u()})}_setDataActual(l,o){this.dispatchExternal("dataProcessing",l),this._wipeElements(),Array.isArray(l)?(this.dispatch("data-processing",l),l.forEach((a,u)=>{if(a&&"object"==typeof a){var m=new ml(a,this);this.rows.push(m)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",a)}),this.refreshActiveData(!1,!1,o),this.dispatch("data-processed",l),this.dispatchExternal("dataProcessed",l)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof l,"\nData:     ",l)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(l=>{l.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(l,o){var a=this.rows.indexOf(l),u=this.activeRows.indexOf(l);u>-1&&this.activeRows.splice(u,1),a>-1&&this.rows.splice(a,1),this.setActiveRows(this.activeRows),this.displayRowIterator(m=>{var C=m.indexOf(l);C>-1&&m.splice(C,1)}),o||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",l.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(l,o,a,u){var m=this.addRowActual(l,o,a,u);return this.dispatch("row-added",m,l,o,a),m}addRows(l,o,a){var u=[];return new Promise((m,C)=>{o=this.findAddRowPos(o),Array.isArray(l)||(l=[l]),(void 0===a&&o||void 0!==a&&!o)&&l.reverse(),l.forEach((R,x)=>{var U=this.addRow(R,o,a,!0);u.push(U),this.dispatch("row-added",U,l,o,a)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),u.length&&this._clearPlaceholder(),m(u)})}findAddRowPos(l){return void 0===l&&(l=this.table.options.addRowPos),"pos"===l&&(l=!0),"bottom"===l&&(l=!1),l}addRowActual(l,o,a,u){var x,U,m=l instanceof ml?l:new ml(l||{},this),C=this.findAddRowPos(o),R=-1;return a||(U=this.chain("row-adding-position",[m,C],null,{index:a,top:C}),a=U.index,C=U.top),void 0!==a&&(a=this.findRow(a)),(a=this.chain("row-adding-index",[m,a,C],null,a))&&(R=this.rows.indexOf(a)),a&&R>-1?(x=this.activeRows.indexOf(a),this.displayRowIterator(function(tt){var yt=tt.indexOf(a);yt>-1&&tt.splice(C?yt:yt+1,0,m)}),x>-1&&this.activeRows.splice(C?x:x+1,0,m),this.rows.splice(C?R:R+1,0,m)):C?(this.displayRowIterator(function(tt){tt.unshift(m)}),this.activeRows.unshift(m),this.rows.unshift(m)):(this.displayRowIterator(function(tt){tt.push(m)}),this.activeRows.push(m),this.rows.push(m)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",m.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),u||this.reRenderInPosition(),m}moveRow(l,o,a){this.dispatch("row-move",l,o,a),this.moveRowActual(l,o,a),this.regenerateRowNumbers(),this.dispatch("row-moved",l,o,a),this.dispatchExternal("rowMoved",l.getComponent())}moveRowActual(l,o,a){this.moveRowInArray(this.rows,l,o,a),this.moveRowInArray(this.activeRows,l,o,a),this.displayRowIterator(u=>{this.moveRowInArray(u,l,o,a)}),this.dispatch("row-moving",l,o,a)}moveRowInArray(l,o,a,u){var m,C,x;if(o!==a&&((m=l.indexOf(o))>-1&&(l.splice(m,1),C=l.indexOf(a),l.splice(C>-1?u?C+1:C:m,0,o)),l===this.getDisplayRows())){x=C>m?C:m+1;for(let U=m<C?m:C;U<=x;U++)l[U]&&this.styleRow(l[U],U)}}clearData(){this.setData([])}getRowIndex(l){return this.findRowIndex(l,this.rows)}getDisplayRowIndex(l){var o=this.getDisplayRows().indexOf(l);return o>-1&&o}nextDisplayRow(l,o){var a=this.getDisplayRowIndex(l),u=!1;return!1!==a&&a<this.displayRowsCount-1&&(u=this.getDisplayRows()[a+1]),!u||u instanceof ml&&"row"==u.type?u:this.nextDisplayRow(u,o)}prevDisplayRow(l,o){var a=this.getDisplayRowIndex(l),u=!1;return a&&(u=this.getDisplayRows()[a-1]),!o||!u||u instanceof ml&&"row"==u.type?u:this.prevDisplayRow(u,o)}findRowIndex(l,o){var a;return!!((l=this.findRow(l))&&(a=o.indexOf(l),a>-1))&&a}getData(l,o){var a=[];return this.getRows(l).forEach(function(m){"row"==m.type&&a.push(m.getData(o||"data"))}),a}getComponents(l){var o=[];return this.getRows(l).forEach(function(u){o.push(u.getComponent())}),o}getDataCount(l){return this.getRows(l).length}scrollHorizontal(l){this.scrollLeft=l,this.element.scrollLeft=l,this.dispatch("scroll-horizontal",l)}registerDataPipelineHandler(l,o){void 0!==o?(this.dataPipeline.push({handler:l,priority:o}),this.dataPipeline.sort((a,u)=>a.priority-u.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(l,o){void 0!==o?(this.displayPipeline.push({handler:l,priority:o}),this.displayPipeline.sort((a,u)=>a.priority-u.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(l,o,a){var u=this.table,m="",C=0,R=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof l)if((C=this.dataPipeline.findIndex(x=>x.handler===l))>-1)m="dataPipeline",o&&(C==this.dataPipeline.length-1?m="display":C++);else{if(!((C=this.displayPipeline.findIndex(x=>x.handler===l))>-1))return void console.error("Unable to refresh data, invalid handler provided",l);m="displayPipeline",o&&(C==this.displayPipeline.length-1?m="end":C++)}else m=l||"all",C=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===m&&C<this.redrawBlockRestoreConfig.index||R.indexOf(m)<R.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:l,skipStage:o,renderInPosition:a,stage:m,index:C});else{switch(this.dispatch("data-refeshing"),l||(this.activeRowsPipeline[0]=this.rows.slice(0)),m){case"all":case"dataPipeline":for(let x=C;x<this.dataPipeline.length;x++){let U=this.dataPipeline[x].handler(this.activeRowsPipeline[x].slice(0));this.activeRowsPipeline[x+1]=U||this.activeRowsPipeline[x].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":C=0,this.resetDisplayRows();case"displayPipeline":for(let x=C;x<this.displayPipeline.length;x++){let U=this.displayPipeline[x].handler((x?this.getDisplayRows(x-1):this.activeRows).slice(0),a);this.setDisplayRows(U||this.getDisplayRows(x-1).slice(0),x)}}$s.elVisible(this.element)&&(a?this.reRenderInPosition():(l||this.table.columnManager.renderer.renderColumns(),this.renderTable(),u.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(l=>{var o=l.getCell(this.rowNumColumn);o&&o._generateContents()})}setActiveRows(l){this.activeRows=l,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(l,o){var a=!0;return o&&void 0!==this.displayRows[o]?(this.displayRows[o]=l,a=!0):(this.displayRows.push(l),a=o=this.displayRows.length-1),o==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),a}getDisplayRows(l){return void 0===l?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[l]||[]}getVisibleRows(l){return this.renderer.visibleRows(!l)}displayRowIterator(l){this.activeRowsPipeline.forEach(l),this.displayRows.forEach(l),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(l){var o;switch(l){case"active":o=this.activeRows;break;case"display":o=this.table.rowManager.getDisplayRows();break;case"visible":o=this.getVisibleRows(!0);break;default:o=this.chain("rows-retrieve",l,null,this.rows)||this.rows}return o}reRenderInPosition(l){this.redrawBlock?l?l():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(l)}initializeRenderer(){var l;(l="string"==typeof this.table.options.renderVertical?{virtual:cp,basic:Kf}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new l(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(l,o){var a=l.getElement();o%2?(a.classList.add("tabulator-row-even"),a.classList.remove("tabulator-row-odd")):(a.classList.add("tabulator-row-odd"),a.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(l){l.normalizeHeight()})}adjustTableSize(){var l=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let o=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+o+"px)",this.element.style.height="calc(100% - "+o+"px)",this.element.style.maxHeight="calc(100% - "+o+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-o+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&l!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(l){l.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(l){var o=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,l?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(o),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var l=document.createEvent("Event");l.initEvent("scroll",!1,!0),this.element.dispatchEvent(l)}else this.element.dispatchEvent(new Event("scroll"))}}class Jp extends du{constructor(l){super(l),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var l=document.createElement("div");return l.classList.add("tabulator-footer"),l}initializeElement(){this.table.options.footerElement&&("string"==typeof this.table.options.footerElement?"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement)):this.element=this.table.options.footerElement)}getElement(){return this.element}append(l,o){this.activate(o),this.element.appendChild(l),this.table.rowManager.adjustTableSize()}prepend(l,o){this.activate(o),this.element.insertBefore(l,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(l){l.parentNode.removeChild(l),this.deactivate()}deactivate(l){(!this.element.firstChild||l)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(l){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),l&&this.links.push(l)}redraw(){this.links.forEach(function(l){l.footerRedraw()})}}class Jf extends du{constructor(l){super(l),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var l={};this.listeners.forEach(o=>{l[o]={handler:null,components:[]}}),this.listeners=l}bindSubscriptionWatchers(){var l=Object.keys(this.listeners),o=Object.values(this.componentMap);for(let a of o)for(let u of l)this.subscriptionChange(a+"-"+u,this.subscriptionChanged.bind(this,a,u))}subscriptionChanged(l,o,a){var u=this.listeners[o].components,m=u.indexOf(l),C=!1;a?-1===m&&(u.push(l),C=!0):this.subscribed(l+"-"+o)||m>-1&&(u.splice(m,1),C=!0),C&&this.updateEventListeners()}updateEventListeners(){for(let l in this.listeners){let o=this.listeners[l];o.components.length?o.handler||(o.handler=this.track.bind(this,l),this.el.addEventListener(l,o.handler)):o.handler&&(this.el.removeEventListener(l,o.handler),o.handler=null)}}track(l,o){var a=o.composedPath&&o.composedPath()||o.path,u=this.findTargets(a);u=this.bindComponents(l,u),this.triggerEvents(l,o,u)}findTargets(l){var o={};let a=Object.keys(this.componentMap);for(let u of l){let m=u.classList?[...u.classList]:[];if(m.filter(x=>this.abortClasses.includes(x)).length)break;let R=m.filter(x=>a.includes(x));for(let x of R)o[this.componentMap[x]]=u}return o.group&&o.group===o.row&&delete o.row,o}bindComponents(l,o){var a=Object.keys(o).reverse(),u=this.listeners[l],m={};for(let C of a){let R,x=o[C],U=this.previousTargets[C];if(U&&U.target===x)R=U.component;else switch(C){case"row":case"group":(u.components.includes("row")||u.components.includes("cell"))&&(R=this.table.rowManager.getVisibleRows().find(yt=>yt.getElement()===x));break;case"column":u.components.includes("column")&&(R=this.table.columnManager.findColumn(x));break;case"cell":u.components.includes("cell")&&(R=o.row.findCell(x))}R&&(o[C]=R,m[C]={target:x,component:R})}return this.previousTargets=m,o}triggerEvents(l,o,a){var u=this.listeners[l];for(let m in a)a[m]&&u.components.includes(m)&&this.dispatch(m+"-"+l,o,a[m])}}class $f{constructor(l){this.table=l,this.bindings={}}bind(l,o,a){this.bindings[l]||(this.bindings[l]={}),this.bindings[l][o]?console.warn("Unable to bind component handler, a matching function name is already bound",l,o,hanlder):this.bindings[l][o]=a}handle(l,o,a){if(this.bindings[l]&&this.bindings[l][a])return this.bindings[l][a].bind(null,o);"then"!==a&&"string"==typeof a&&!a.startsWith("_")&&console.error("The "+l+" component does not have a "+a+" function, have you checked that you have the correct Tabulator module installed?")}}class hp extends du{constructor(l){super(l),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var l;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((l=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=l.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((l=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=l.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var l=document.createElement("div");return l.classList.add("tabulator-loader"),l}createMsgElement(){var l=document.createElement("div");return l.classList.add("tabulator-loader-msg"),l.setAttribute("role","alert"),l}load(l,o,a,u,m){var C=++this.requestOrder;return this.dispatchExternal("dataLoading",l),l&&(0==l.indexOf("{")||0==l.indexOf("["))&&(l=JSON.parse(l)),this.confirm("data-loading",l,o,a,m)?(this.loading=!0,m||this.showLoader(),o=this.chain("data-params",[l,a,m],o||{},{}),o=this.mapParams(o,this.table.options.dataSendParams),this.chain("data-load",[l,o,a,m],Promise.resolve([])).then(U=>{!Array.isArray(U)&&"object"==typeof U&&(U=this.mapParams(U,this.objectInvert(this.table.options.dataReceiveParams)));var tt=this.chain("data-loaded",U,null,U);C==this.requestOrder?(this.hideLoader(),!1!==tt&&(this.dispatchExternal("dataLoaded",tt),this.table.rowManager.setData(tt,u,!u))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(U=>{console.error("Data Load Error: ",U),this.dispatchExternal("dataLoadError",U),m||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",l),l||(l=[]),this.table.rowManager.setData(l,u,!u),Promise.resolve())}mapParams(l,o){var a={};for(let u in l)a[o.hasOwnProperty(u)?o[u]:u]=l[u];return a}objectInvert(l){var o={};for(let a in l)o[l[a]]=a;return o}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class Am{constructor(l,o,a){this.table=l,this.events={},this.optionsList=o||{},this.subscriptionNotifiers={},this.dispatch=a?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=a}subscriptionChange(l,o){this.subscriptionNotifiers[l]||(this.subscriptionNotifiers[l]=[]),this.subscriptionNotifiers[l].push(o),this.subscribed(l)&&this._notifiySubscriptionChange(l,!0)}subscribe(l,o){this.events[l]||(this.events[l]=[]),this.events[l].push(o),this._notifiySubscriptionChange(l,!0)}unsubscribe(l,o){var a;if(this.events[l]){if(o){if(!((a=this.events[l].findIndex(u=>u===o))>-1))return void console.warn("Cannot remove event, no matching event found:",l,o);this.events[l].splice(a,1)}else delete this.events[l];this._notifiySubscriptionChange(l,!1)}else console.warn("Cannot remove event, no events set on:",l)}subscribed(l){return this.events[l]&&this.events[l].length}_notifiySubscriptionChange(l,o){var a=this.subscriptionNotifiers[l];a&&a.forEach(u=>{u(o)})}_dispatch(){var a,l=Array.from(arguments),o=l.shift();return this.events[o]&&this.events[o].forEach((u,m)=>{let C=u.apply(this.table,l);m||(a=C)}),a}_debugDispatch(){var l=Array.from(arguments),o=l[0];return l[0]="ExternalEvent:"+l[0],(!0===this.debug||this.debug.includes(o))&&console.log(...l),this._dispatch(...arguments)}}class Zf{constructor(l){this.events={},this.subscriptionNotifiers={},this.dispatch=l?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=l?this._debugChain.bind(this):this._chain.bind(this),this.confirm=l?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=l}subscriptionChange(l,o){this.subscriptionNotifiers[l]||(this.subscriptionNotifiers[l]=[]),this.subscriptionNotifiers[l].push(o),this.subscribed(l)&&this._notifiySubscriptionChange(l,!0)}subscribe(l,o,a=1e4){this.events[l]||(this.events[l]=[]),this.events[l].push({callback:o,priority:a}),this.events[l].sort((u,m)=>u.priority-m.priority),this._notifiySubscriptionChange(l,!0)}unsubscribe(l,o){var a;if(this.events[l]){if(o){if(!((a=this.events[l].findIndex(u=>u.callback===o))>-1))return void console.warn("Cannot remove event, no matching event found:",l,o);this.events[l].splice(a,1)}this._notifiySubscriptionChange(l,!1)}else console.warn("Cannot remove event, no events set on:",l)}subscribed(l){return this.events[l]&&this.events[l].length}_chain(l,o,a,u){var m=a;return Array.isArray(o)||(o=[o]),this.subscribed(l)?(this.events[l].forEach((C,R)=>{m=C.callback.apply(this,o.concat([m]))}),m):"function"==typeof u?u():u}_confirm(l,o){var a=!1;return Array.isArray(o)||(o=[o]),this.subscribed(l)&&this.events[l].forEach((u,m)=>{u.callback.apply(this,o)&&(a=!0)}),a}_notifiySubscriptionChange(l,o){var a=this.subscriptionNotifiers[l];a&&a.forEach(u=>{u(o)})}_dispatch(){var l=Array.from(arguments),o=l.shift();this.events[o]&&this.events[o].forEach(a=>{a.callback.apply(this,l)})}_debugDispatch(){var l=Array.from(arguments),o=l[0];return l[0]="InternalEvent:"+o,(!0===this.debug||this.debug.includes(o))&&console.log(...l),this._dispatch(...arguments)}_debugChain(){var l=Array.from(arguments),o=l[0];return l[0]="InternalEvent:"+o,(!0===this.debug||this.debug.includes(o))&&console.log(...l),this._chain(...arguments)}_debugConfirm(){var l=Array.from(arguments),o=l[0];return l[0]="InternalEvent:"+o,(!0===this.debug||this.debug.includes(o))&&console.log(...l),this._confirm(...arguments)}}let hd=(()=>{class _{static register(o){_.tables.push(o)}static deregister(o){var a=_.tables.indexOf(o);a>-1&&_.tables.splice(a,1)}static lookupTable(o,a){var m,C,u=[];if("string"==typeof o){if((m=document.querySelectorAll(o)).length)for(var R=0;R<m.length;R++)(C=_.matchElement(m[R]))&&u.push(C)}else"undefined"!=typeof HTMLElement&&o instanceof HTMLElement||o instanceof hh?(C=_.matchElement(o))&&u.push(C):Array.isArray(o)?o.forEach(function(x){u=u.concat(_.lookupTable(x))}):a||console.warn("Table Connection Error - Invalid Selector",o);return u}static matchElement(o){return _.tables.find(function(a){return o instanceof hh?a===o:a.element===o})}}return _.tables=[],_})();function dp(_){_.forEach(function(l){l.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var uh={fitData:function(_){this.table.columnManager.renderer.reinitializeColumnWidths(_),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:dp,fitDataTable:dp,fitDataStretch:function(_){var l=0,o=this.table.rowManager.element.clientWidth,a=0,u=!1;_.forEach((m,C)=>{m.widthFixed||m.reinitializeWidth(),(this.table.options.responsiveLayout?m.modules.responsive.visible:m.visible)&&(u=m),m.visible&&(l+=m.getWidth())}),u?(a=o-l+u.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(u.setWidth(0),this.table.modules.responsiveLayout.update()),a>0?u.setWidth(a):u.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(_){var m,U,l=this.table.element.clientWidth,o=0,a=0,u=0,C=[],R=[],x=0,tt=0;function yt(ne){return"string"==typeof ne?ne.indexOf("%")>-1?l/100*parseInt(ne):parseInt(ne):ne}function Vt(ne,Se,He,ze){var qe=[],Mi=0,en=0,Zi=0,$i=u,mn=0,En=0,Ln=[];function Xn(Un){return He*(Un.column.definition.widthGrow||1)}function Vr(Un){return yt(Un.width)-He*(Un.column.definition.widthShrink||0)}return ne.forEach(function(Un,Nr){var rs=ze?Vr(Un):Xn(Un);Un.column.minWidth>=rs?qe.push(Un):Un.column.maxWidth&&Un.column.maxWidth<rs?(Un.width=Un.column.maxWidth,Se-=Un.column.maxWidth,($i-=ze?Un.column.definition.widthShrink||1:Un.column.definition.widthGrow||1)&&(He=Math.floor(Se/$i))):(Ln.push(Un),En+=ze?Un.column.definition.widthShrink||1:Un.column.definition.widthGrow||1)}),qe.length?(qe.forEach(function(Un){Mi+=ze?Un.width-Un.column.minWidth:Un.column.minWidth,Un.width=Un.column.minWidth}),mn=(en=Se-Mi)-(Zi=En?Math.floor(en/En):en)*En,mn+=Vt(Ln,en,Zi,ze)):(mn=En?Se-Math.floor(Se/En)*En:Se,Ln.forEach(function(Un){Un.width=ze?Vr(Un):Xn(Un)})),mn}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(l-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),_.forEach(function(ne){var Se,He,ze;ne.visible&&(Se=ne.definition.width,He=parseInt(ne.minWidth),Se?(ze=yt(Se),o+=ze>He?ze:He,ne.definition.widthShrink&&(R.push({column:ne,width:ze>He?ze:He}),x+=ne.definition.widthShrink)):(C.push({column:ne,width:0}),u+=ne.definition.widthGrow||1))}),a=l-o,m=Math.floor(a/u),tt=Vt(C,a,m,!1),C.length&&tt>0&&(C[C.length-1].width+=+tt),C.forEach(function(ne){a-=ne.width}),(U=Math.abs(tt)+a)>0&&x&&(tt=Vt(R,U,Math.floor(U/x),!0)),R.length&&(R[R.length-1].width-=tt),C.forEach(function(ne){ne.column.setWidth(ne.width)}),R.forEach(function(ne){ne.column.setWidth(ne.width)})}},Qf={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},pp=Object.freeze({__proto__:null,LayoutModule:(()=>{class _ extends go{constructor(o){super(o,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var o=this.table.options.layout;_.modes[o]?this.mode=o:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+o),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){_.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return _.moduleName="layout",_.modes=uh,_})(),LocalizeModule:(()=>{class _ extends go{constructor(o){super(o),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=$s.deepClone(_.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let o in this.table.options.langs)this.installLang(o,this.table.options.langs[o]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(o){this.langList.default.headerFilters.default=o}setHeaderFilterColumnPlaceholder(o,a){this.langList.default.headerFilters.columns[o]=a,this.lang&&!this.lang.headerFilters.columns[o]&&(this.lang.headerFilters.columns[o]=a)}installLang(o,a){this.langList[o]?this._setLangProp(this.langList[o],a):this.langList[o]=a}_setLangProp(o,a){for(let u in a)o[u]&&"object"==typeof o[u]?this._setLangProp(o[u],a[u]):o[u]=a[u]}setLocale(o){if(!0===(o=o||"default")&&navigator.language&&(o=navigator.language.toLowerCase()),o&&!this.langList[o]){let u=o.split("-")[0];this.langList[u]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",o,u),o=u):(console.warn("Localization Error - Matching locale not found, using default: ",o),o="default")}this.locale=o,this.lang=$s.deepClone(this.langList.default||{}),"default"!=o&&function a(u,m){for(var C in u)"object"==typeof u[C]?(m[C]||(m[C]={}),a(u[C],m[C])):m[C]=u[C]}(this.langList[o],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(o){return this.locale}getLang(o){return o?this.langList[o]:this.lang}getText(o,a){var u=(o=a?o+"|"+a:o).split("|");return this._getLangElement(u,this.locale)||""}_getLangElement(o,a){var u=this.lang;return o.forEach(function(m){var C;u&&(u=void 0!==(C=u[m])&&C)}),u}bind(o,a){this.bindings[o]||(this.bindings[o]=[]),this.bindings[o].push(a),a(this.getText(o),this.lang)}_executeBindings(){for(let o in this.bindings)this.bindings[o].forEach(a=>{a(this.getText(o),this.lang)})}}return _.moduleName="localize",_.langs=Qf,_})(),CommsModule:(()=>{class _ extends go{constructor(o){super(o)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(o){var a=[];return hd.lookupTable(o).forEach(m=>{this.table!==m&&a.push(m)}),a}send(o,a,u,m){var C=this.getConnections(o);C.forEach(R=>{R.tableComms(this.table.element,a,u,m)}),!C.length&&o&&console.warn("Table Connection Error - No tables matching selector found",o)}receive(o,a,u,m){if(this.table.modExists(a))return this.table.modules[a].commsReceived(o,u,m);console.warn("Inter-table Comms Error - no such module:",a)}}return _.moduleName="comms",_})()});class fp{constructor(l,o){this.bindStaticFuctionality(l),this.bindModules(l,pp,!0),o&&this.bindModules(l,o)}bindStaticFuctionality(l){l.moduleBindings={},l.extendModule=function(o,a,u){if(l.moduleBindings[o]){var m=l.moduleBindings[o][a];if(m)if("object"==typeof u)for(let C in u)m[C]=u[C];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",a)}else console.warn("Module Error - module does not exist:",o)},l.registerModule=function(o){Array.isArray(o)||(o=[o]),o.forEach(a=>{l.registerModuleBinding(a)})},l.registerModuleBinding=function(o){l.moduleBindings[o.moduleName]=o},l.findTable=function(o){var a=hd.lookupTable(o,!0);return!(Array.isArray(a)&&!a.length)&&a},l.prototype.bindModules=function(){for(var o in this.modules={},l.moduleBindings){let a=l.moduleBindings[o];this.modules[o]=new a(this),a.prototype.moduleCore?this.modulesCore[o]=this.modules[o]:this.modulesRegular[o]=this.modules[o]}}}bindModules(l,o,a){var u=Object.values(o);a&&u.forEach(m=>{m.prototype.moduleCore=!0}),l.registerModule(u)}}let hh=(()=>{class _{constructor(o,a){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new $f(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new Sd(this,"table constructor"),this.initialized=!1,this.initializeElement(o)&&(this.initialzeCoreSystems(a),setTimeout(()=>{this._create()})),hd.register(this)}initializeElement(o){return"undefined"!=typeof HTMLElement&&o instanceof HTMLElement?(this.element=o,!0):"string"==typeof o?(this.element=document.querySelector(o),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",o),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",o),!1)}initialzeCoreSystems(o){this.columnManager=new lp(this),this.rowManager=new up(this),this.footerManager=new Jp(this),this.dataLoader=new hp(this),this.bindModules(),this.options=this.optionsList.generate(_.defaultOptions,o),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new Am(this,this.options,this.options.debugEventsExternal),this.eventBus=new Zf(this.options.debugEventsInternal),this.interactionMonitor=new Jf(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var o=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==o.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var u,o=this.element,a=this.options;if("TABLE"===o.tagName){this.originalElement=this.element,u=document.createElement("div");var m=o.attributes;for(var C in m)"object"==typeof m[C]&&u.setAttribute(m[C].name,m[C].value);o.parentNode.replaceChild(u,o),this.element=o=u}for(o.classList.add("tabulator"),o.setAttribute("role","grid");o.firstChild;)o.removeChild(o.firstChild);a.height&&(a.height=isNaN(a.height)?a.height:a.height+"px",o.style.height=a.height),!1!==a.minHeight&&(a.minHeight=isNaN(a.minHeight)?a.minHeight:a.minHeight+"px",o.style.minHeight=a.minHeight),!1!==a.maxHeight&&(a.maxHeight=isNaN(a.maxHeight)?a.maxHeight:a.maxHeight+"px",o.style.maxHeight=a.maxHeight)}_initializeTable(){var o=this.element,a=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let C in this.modulesCore)this.modulesCore[C].initialize();if("string"==typeof a.placeholder){var u=document.createElement("div");u.classList.add("tabulator-placeholder");var m=document.createElement("span");m.innerHTML=a.placeholder,u.appendChild(m),a.placeholder=u}o.appendChild(this.columnManager.getElement()),o.appendChild(this.rowManager.getElement()),a.footerElement&&this.footerManager.activate(),a.autoColumns&&a.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let C in this.modulesRegular)this.modulesRegular[C].initialize();this.columnManager.setColumns(a.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var o=this.element;for(hd.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(a){a.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];o.firstChild;)o.removeChild(o.firstChild);o.classList.remove("tabulator")}_detectBrowser(){var o=navigator.userAgent||navigator.vendor||window.opera;o.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):o.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):o.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(o){return new Promise((a,u)=>{var m=document.createElement("input");m.type="file",m.accept=o||".json,application/json",m.addEventListener("change",C=>{var U,R=m.files[0],x=new FileReader;x.readAsText(R),x.onload=tt=>{try{U=JSON.parse(x.result)}catch(yt){return console.warn("File Load Error - File contents is invalid JSON",yt),void u(yt)}this.setData(U).then(yt=>{a(yt)}).catch(yt=>{a(yt)})},x.onerror=tt=>{console.warn("File Load Error - Unable to read file"),u()}}),m.click()})}setData(o,a,u){if(this.initialized)return this.dataLoader.load(o,a,u,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(o){return this.rowManager.getData(o)}getDataCount(o){return this.rowManager.getDataCount(o)}replaceData(o,a,u){if(this.initialized)return this.dataLoader.load(o,a,u,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(o){var a=0;if(this.initialized)return new Promise((u,m)=>{this.dataLoader.blockActiveLoad(),"string"==typeof o&&(o=JSON.parse(o)),o?o.forEach(C=>{var R=this.rowManager.findRow(C[this.options.index]);R&&(a++,R.updateData(C).then(()=>{--a||u()}))}):(console.warn("Update Error - No data provided"),m("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(o,a,u){if(this.initialized)return new Promise((m,C)=>{this.dataLoader.blockActiveLoad(),"string"==typeof o&&(o=JSON.parse(o)),o?this.rowManager.addRows(o,a,u).then(R=>{var x=[];R.forEach(function(U){x.push(U.getComponent())}),m(x)}):(console.warn("Update Error - No data provided"),C("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(o){var a=[],u=0;if(this.initialized)return new Promise((m,C)=>{this.dataLoader.blockActiveLoad(),"string"==typeof o&&(o=JSON.parse(o)),o?o.forEach(R=>{var x=this.rowManager.findRow(R[this.options.index]);u++,x?x.updateData(R).then(()=>{u--,a.push(x.getComponent()),u||m(a)}):this.rowManager.addRows(R).then(U=>{u--,a.push(U[0].getComponent()),u||m(a)})}):(console.warn("Update Error - No data provided"),C("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(o){var a=this.rowManager.findRow(o);return a?a.getComponent():(console.warn("Find Error - No matching row found:",o),!1)}getRowFromPosition(o,a){var u=this.rowManager.getRowFromPosition(o,a);return u?u.getComponent():(console.warn("Find Error - No matching row found:",o),!1)}deleteRow(o){var a=[];Array.isArray(o)||(o=[o]);for(let u of o){let m=this.rowManager.findRow(u,!0);if(!m)return console.error("Delete Error - No matching row found:",u),Promise.reject("Delete Error - No matching row found");a.push(m)}return a.sort((u,m)=>this.rowManager.rows.indexOf(u)>this.rowManager.rows.indexOf(m)?1:-1),a.forEach(u=>{u.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(o,a,u){if(this.initialized)return"string"==typeof o&&(o=JSON.parse(o)),this.rowManager.addRows(o,a,u).then(m=>m[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(o,a){var u=this.rowManager.findRow(o);return"string"==typeof a&&(a=JSON.parse(a)),u?u.updateData(a).then(()=>u.getComponent()):this.rowManager.addRows(a).then(m=>m[0].getComponent())}updateRow(o,a){var u=this.rowManager.findRow(o);return"string"==typeof a&&(a=JSON.parse(a)),u?u.updateData(a).then(()=>{resolve(u.getComponent())}):(console.warn("Update Error - No matching row found:",o),Promise.reject("Update Error - No matching row found"))}scrollToRow(o,a,u){var m=this.rowManager.findRow(o);return m?this.rowManager.scrollToRow(m,a,u):(console.warn("Scroll Error - No matching row found:",o),Promise.reject("Scroll Error - No matching row found"))}moveRow(o,a,u){var m=this.rowManager.findRow(o);m?m.moveToRow(a,u):console.warn("Move Error - No matching row found:",o)}getRows(o){if(this.initialized)return this.rowManager.getComponents(o);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(o,a){var u=this.rowManager.findRow(o);return u?this.rowManager.getRowPosition(u,a):(console.warn("Position Error - No matching row found:",o),!1)}setColumns(o){this.initialized?this.columnManager.setColumns(o):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(o){return this.columnManager.getComponents(o)}getColumn(o){var a=this.columnManager.findColumn(o);return a?a.getComponent():(console.warn("Find Error - No matching column found:",o),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(o){var a=this.columnManager.findColumn(o);if(!a)return console.warn("Column Show Error - No matching column found:",o),!1;a.show()}hideColumn(o){var a=this.columnManager.findColumn(o);if(!a)return console.warn("Column Hide Error - No matching column found:",o),!1;a.hide()}toggleColumn(o){var a=this.columnManager.findColumn(o);if(!a)return console.warn("Column Visibility Toggle Error - No matching column found:",o),!1;a.visible?a.hide():a.show()}addColumn(o,a,u){var m=this.columnManager.findColumn(u);return this.columnManager.addColumn(o,a,m).then(C=>C.getComponent())}deleteColumn(o){var a=this.columnManager.findColumn(o);return a?a.delete():(console.warn("Column Delete Error - No matching column found:",o),Promise.reject())}updateColumnDefinition(o,a){var u=this.columnManager.findColumn(o);return u?u.updateDefinition(a):(console.warn("Column Update Error - No matching column found:",o),Promise.reject())}moveColumn(o,a,u){var m=this.columnManager.findColumn(o),C=this.columnManager.findColumn(a);m?C?this.columnManager.moveColumn(m,C,u):console.warn("Move Error - No matching column found:",C):console.warn("Move Error - No matching column found:",o)}scrollToColumn(o,a,u){return new Promise((m,C)=>{var R=this.columnManager.findColumn(o);return R?this.columnManager.scrollToColumn(R,a,u):(console.warn("Scroll Error - No matching column found:",o),Promise.reject("Scroll Error - No matching column found"))})}redraw(o){this.initialized?(this.columnManager.redraw(o),this.rowManager.redraw(o)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(o){this.options.height=isNaN(o)?o:o+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(o,a){this.externalEvents.subscribe(o,a)}off(o,a){this.externalEvents.unsubscribe(o,a)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(o,a){return!!this.modules[o]||(a&&console.error("Tabulator Module Not Installed: "+o),!1)}module(o){var a=this.modules[o];return a||console.error("Tabulator module not installed: "+o),a}}return _.defaultOptions=Yf,_})();new fp(hh),new fp(class extends hh{},jf);let gp=(()=>{class _{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null}get hot(){if(null!=this.hotInstance)return this.hotInstance;throw new Error("hot is null")}initGrid(o){hh.registerModule([ip,Wh,Zd,zp]),this.hotInstance=new hh(o,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",clipboard:"copy",footerElement:"<div>\n        \x3c!-- <a href=\"javascript:{var event = new Event('TabCopy'); window.dispatchEvent(event);}\">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href=\"javascript:{var event = new Event('TabDownload'); window.dispatchEvent(event);}\">CSV</a>\n        --\x3e\n        \n    </div>",placeholder:"please press execute button"})}AddStringToGrid(o){if(o.startsWith("{")&&o.endsWith("}"))try{var a=JSON.parse(o);return void this.objectsForGrid.push(a)}catch(C){}if(o.startsWith("[")&&o.endsWith("]"))try{for(var u=JSON.parse(o),m=0;m<u.length;m++)this.objectsForGrid.push(u[m]);return}catch(C){}this.stringsForGrid.push(o)}AddDataToGrid(o){return"string"==typeof o?(this.AddStringToGrid(null==o?void 0:o.toString()),void this.dataObject.push([null==o?void 0:o.toString()])):"object"==typeof o?(console.log("adding object to grid"),this.AddStringToGrid(JSON.stringify(o)),void this.dataObject.push([o])):(this.dataObject.push([o.ToString()]),void this.AddStringToGrid(o.toString()))}ClearDataGrid(){this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(o,a){return null!=o&&o.hasOwnProperty(a)}AddObjectToFinishGrid(){for(var o=[],a=this.objectsForGrid,u=0;u<a.length;u++)"string"==typeof(m=a[u])?o.push("_"):o.push(...Object.keys(m));var C=new Set(o);o=Array.from(C);var R=[...o],x=[];for(u=0;u<a.length;u++){for(var m=a[u],U={Nr:u+1},tt=0;tt<o.length;tt++){var yt=o[tt],Vt=this.goodNameForKey(yt);if(m&&this.hasOwnProperty(m,yt)){var ne=m[yt];U[Vt]="object"==typeof ne?JSON.stringify(ne):ne}else U[Vt]="string"==typeof m&&0===tt?m:""}x.push(U)}o.splice(0,0,"Nr"),R.splice(0,0,"Nr");var Se=this.Headers(R);this.hot.setColumns(Se),this.hot.replaceData(x)}Headers(o){return o.map(a=>({title:a,field:this.goodNameForKey(a),formatter:function(u,m,C){try{var R=u.getValue().toString();if(R.length<2)return R;if(R.startsWith("[")&&R.endsWith("]"))try{var x=JSON.parse(R),U=u.getRow().getData().Nr,yt=u.getColumn().getField()+"_"+U;return C(function(){new hh("#"+yt,{data:x,autoColumns:!0,layout:"fitDataFill"})}),"<div id='"+yt+"'>"+R+"</div>"}catch(Vt){return R}}catch(Vt){return R}return u.getValue()}}))}AddStringToFinishGrid(){for(var o=[],a=0;a<this.stringsForGrid.length;a++)o.push({Nr:a+1,Text:this.stringsForGrid[a]});var m=this.Headers(["Nr","Text"]);this.hot.setColumns(m),this.hot.replaceData(o)}FinishGrid(){this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),this.hot.redraw(!0))}goodNameForKey(o){var a=o;return a.replace(".","_")}copyClip(){this.hot.copyToClipboard()}copyCSV(){this.hot.download("csv","data.csv",{bom:!0})}}return _.\u0275fac=function(o){return new(o||_)},_.\u0275prov=le.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();var qp=f(16335),mp=f(91083),tf=f(68260),qf=f(57261),$h=f(43954),ef=f(92181),tg=f(4834),Zh=f(81125),Qh=f(20773),nf=f(33);function eg(_,l){1&_&&le._UZ(0,"mat-spinner")}const ig=function(_){return["/","automation","loadexample",_]};function qh(_,l){if(1&_&&(le.TgZ(0,"a",17),le._uU(1),le.qZA()),2&_){const o=le.oxw();le.Q6J("routerLink",le.VKq(2,ig,o.mustLoadDemoBlock)),le.xp6(1),le.hij("Direct link ",o.mustLoadDemoBlock,"")}}function ng(_,l){if(1&_){const o=le.EpF();le.TgZ(0,"ngx-codemirror",19),le.NdJ("ngModelChange",function(u){return le.CHM(o),le.oxw(2).showInner=u}),le.qZA()}if(2&_){const o=le.oxw(2);le.Q6J("options",o.editorPlain)("ngModel",o.showInner)}}function rg(_,l){if(1&_){const o=le.EpF();le.TgZ(0,"ngx-codemirror",19),le.NdJ("ngModelChange",function(u){return le.CHM(o),le.oxw(2).showJSCode=u}),le.qZA()}if(2&_){const o=le.oxw(2);le.Q6J("options",o.editorJSOptions)("ngModel",o.showJSCode)}}function og(_,l){if(1&_){const o=le.EpF();le.TgZ(0,"ngx-codemirror",19),le.NdJ("ngModelChange",function(u){return le.CHM(o),le.oxw(2).showXMLCode=u}),le.qZA()}if(2&_){const o=le.oxw(2);le.Q6J("options",o.editorXMLOptions)("ngModel",o.showXMLCode)}}function sg(_,l){if(1&_){const o=le.EpF();le.TgZ(0,"ngx-codemirror",19),le.NdJ("ngModelChange",function(u){return le.CHM(o),le.oxw(2).showBlocksDefinition=u}),le.qZA()}if(2&_){const o=le.oxw(2);le.Q6J("options",o.editorJSOptions)("ngModel",o.showBlocksDefinition)}}function fu(_,l){if(1&_&&(le.TgZ(0,"mat-grid-tile"),le.YNc(1,ng,1,2,"ngx-codemirror",18),le.YNc(2,rg,1,2,"ngx-codemirror",18),le.YNc(3,og,1,2,"ngx-codemirror",18),le.YNc(4,sg,1,2,"ngx-codemirror",18),le.qZA()),2&_){const o=le.oxw();le.xp6(1),le.Q6J("ngIf",o.ShowOutput()),le.xp6(1),le.Q6J("ngIf",o.ShowCode()),le.xp6(1),le.Q6J("ngIf",o.ShowXML()),le.xp6(1),le.Q6J("ngIf",o.ShowBlocksDefinition())}}var sc=(()=>{return(_=sc||(sc={}))[_.ShowNone=0]="ShowNone",_[_.ShowBlocksDefinition=1]="ShowBlocksDefinition",_[_.ShowXML=2]="ShowXML",_[_.ShowOutput=3]="ShowOutput",_[_.ShowCode=4]="ShowCode",_[_.Stop=100]="Stop",sc;var _})();let rf=(()=>{class _{constructor(o,a,u,m,C,R,x){var U;this.tabulator=o,this.DetailsApp=a,this.loadDemo=u,this.ar=m,this.ta=C,this.snackBar=R,this.dialog=x,this.editorXMLOptions={theme:"vs-dark",language:"xml"},this.editorJSOptions={theme:"vs-dark",language:"javascript",lineNumbers:"on"},this.editorPlain={theme:"vs-dark",language:"plaintext",lineNumbers:"on"},this.code='function x() {\nconsole.log("Hello world!");\n}',this.showCodeAndXML=sc.ShowNone,this.swaggerLoaded=0,this.demoWorkspace=null,this.mustLoadDemoBlock="",this.intro=it(),this.myId=0,this.fullTextData="",this.fullHtmlData="",this.myChart=null,this.step=0,this.swaggerData=[],this.showInner="",this.showXMLCode="",this.showJSCode="",this.showBlocksDefinition="",this.toolboxXML="",this.loadedCompletely=!1,this.myId=++_.id,this.ar.paramMap.subscribe(tt=>{this.mustLoadDemoBlock=tt.get("demoblock")}),this.ta.receiveData().subscribe(tt=>{"DisplayBlocklyComponent"==tt[0]&&this[tt[1]]()}),null===(U=this.DetailsApp.LocalAPI)||void 0===U||U.IsAlive().subscribe()}createIntro(){var o,a=null===(o=this.DetailsApp.settings)||void 0===o?void 0:o.tourSteps.map(u=>{var m;return{title:(null===(m=this.DetailsApp.settings)||void 0===m?void 0:m.title)||"Blockly Automation",intro:u.text,element:document.querySelector(u.query)||void 0}});this.intro.setOptions({exitOnEsc:!0,showStepNumbers:!0,showButtons:!0,doneLabel:"Exit",skipLabel:"Skip",showProgress:!0,steps:a}).start()}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid(),null!=this.myChart&&this.myChart.destroy();var o=this.theHtmlOutput();o.innerHTML="",this.fullHtmlData="",(o=this.theTextOutput()).innerText="",this.fullTextData=""}ShowText(o){if(null!=o){var a=o.toString();this.fullTextData+=a,this.theTextOutput().innerText=this.fullTextData}}finishHTMLOutput(){this.theHtmlOutput().innerHTML=this.fullHtmlData}ShowHTML(o){if(null!=o){var a=o.toString();this.fullHtmlData+=a,this.theHtmlOutput().innerHTML+=a}}theHtmlOutput(){return document.getElementById("htmlOutput"+this.myId)}theTextOutput(){return document.getElementById("htmlText"+this.myId)}ShowChart(o){var a,u=null===(a=document.getElementById("barchart"+this.myId))||void 0===a?void 0:a.getContext("2d");if(null!=u)try{var m=null==o?void 0:o.toString(),C=JSON.parse(m);C&&C.type&&(this.myChart=new tn(u,C),console.log("make chart",o))}catch(R){this.myChart=null}else console.log("not canvas available for chart!")}RunCode(){this.snackBar.open("Program start","Executing...");var o=this,a=this.run.latestCode,u=this.showJSCode;o.CalculateXMLAndCode(),this.run=D.interpreterHelper.createInterpreter(this.demoWorkspace,t),this.clearOutput(),this.showCodeAndXML=sc.ShowOutput,this.showInner='{ "step_start": "start program",',a!=u&&(window.confirm("Do you want to run the code modified by you ?")&&(a=u),this.showJSCode=u),this.run.runCode((C,R)=>{try{return new Interpreter(C,R)}catch(x){o.CalculateXMLAndCode(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(x)),this.showCodeAndXML=sc.ShowCode}},C=>{o.step++,o.showInner+=`\n           \n"step_${o.step}" : "${C}",`,o.tabulator.AddDataToGrid(C),o.ShowChart(C),o.ShowHTML(C),o.ShowText(C)},()=>{this.snackBar.open("Program end","Done!",{duration:3e3}),o.showInner+='\n "step_end" : "program executed; see results below"\n}',this.tabulator.FinishGrid(),this.finishHTMLOutput()},a)}ShowLocalAPI(o){var a;null===(a=this.DetailsApp.LocalAPI)||void 0===a||a.LoadBlockContent(o).subscribe(u=>{var m=e.Xml.textToDom(u);null!=this.demoWorkspace&&(e.Xml.clearWorkspaceAndLoadFromXml(m,this.demoWorkspace),window.alert("please press execute button"))})}ShowDemo(o){this.mustLoadDemoBlock=o,this.loadDemo.getDemoBlock(o).subscribe(a=>{var u=e.Xml.textToDom(a);if(null!=this.demoWorkspace){try{e.Xml.clearWorkspaceAndLoadFromXml(u,this.demoWorkspace)}catch(m){return(null==o?void 0:o.toString().indexOf("docker"))>-1?void(window.confirm("This demo must run with Desktop App.\nDo you want to go to download page?")&&window.open("http://ba.serviciipeweb.ro/")):(null==o?void 0:o.toString().indexOf("chrome"))>-1?void(window.confirm("This demo must run with MyPC swagger.\nDo you want to go to download page?")&&window.open("https://github.com/ignatandrei/BlocklyAutomation/wiki/MyPC")):void window.alert("error "+o)}window.alert("please press execute button")}})}registerSwaggerBlocksObjects(o,a){return a.fieldXMLObjects.map(m=>e.Xml.textToDom(m))}registerSwaggerBlocksAPIControllers(o,a,u){return a.findfieldXMLFunctions(u).map(C=>e.Xml.textToDom(C.gui))}registerSwaggerBlocksAPIAll(o,a){return a.fieldXMLFunctions.map(m=>e.Xml.textToDom(m.gui))}ngOnInit(){}ngAfterViewInit(){this.StartRegister(),(0,Pr.R)(window,"TabDownload").subscribe(o=>this.tabulator.copyCSV()),(0,Pr.R)(window,"TabCopy").subscribe(o=>this.tabulator.copyClip())}ShowBlocks(){this.dialog.open(xp,{}).afterClosed().subscribe(a=>{if(console.log("The dialog was closed with ",a),a){var u=a;switch(u.Source){case"Demos":try{console.log("into try"),this.ShowDemo(a.id)}catch(m){window.alert(a.id),window.alert(m)}break;case"LocalAPI":this.ShowLocalAPI(a.id);break;default:window.alert(u.Source)}}})}LoadSwagger(){var o=this,u=(new G.parseData(""),window.prompt("Swagger/OpenAPI ? "));if(u){if(u.endsWith(".html")||u.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");o.LoadSwaggerFromUrl(u).then(m=>{m.hasError?window.alert("error loading swagger"):(o.addToToolboxSwagger(m,this),window.alert("loaded successfully"))})}}LoadSwaggerFromUrl(o,a){var u=this;return(0,y.Z)(function*(){var m=new G.parseData(o),C=yield m.ParseSwagger();return C.name=a||o,C.hasError?C:u.LoadSwaggerFromAPI(C)})()}LoadSwaggerFromAPI(o){if(o.hasError)return console.error("error in swagger",o.name),o;this.swaggerData.push(o);for(var a=0;a<o.GenerateBlocks.length;a++)(0,o.GenerateBlocks[a])(e.Blocks,t);for(a=0;a<o.GenerateFunctions.length;a++)(0,o.GenerateFunctions[a])(e.Blocks,t);return o.metaBlocks()(e.Blocks,t),o}StartRegister(){var o=this;return(0,y.Z)(function*(){var a=o.DetailsApp.swaggersDict,u=new Map;a.forEach((U,tt)=>{var yt=!U.hasError;console.log("show swagger: "+tt+":"+yt),yt&&u.set(tt,o.LoadSwaggerFromAPI(U))});var m=[...Array(50).keys()].map(U=>o.CategorySwaggerHidden(U)).join("");const C=document.getElementById("steps"+o.myId);if(null!=C){o.tabulator.initGrid(C),v.filterBlocks.definitionBlocks(e.Blocks,t),v.waitBlocks.definitionBlocks(e.defineBlocksWithJsonArray,t),v.xhrBlocks.definitionBlocks(e.Blocks,t),v.propBlocks.definitionBlocks(e.Blocks,t),v.guiBlocks.definitionBlocks(e.Blocks,t),v.convertersBlocks.definitionBlocks(e.Blocks,t),v.exportFileBlock.definitionBlocks(e.Blocks,t),v.createObjectBlocks.definitionBlocks(e.Blocks,t,e.Extensions,e.Mutator),v.currentDateBlock.definitionBlocks(e.Blocks,t),v.dateFromTextBlock.definitionBlocks(e.Blocks,t),v.waitBlocks.definitionBlocks(e.Blocks,t),v.commentBlock.definitionBlocks(e.Blocks,t),v.trycatchFinBlock.definitionBlocks(e.Blocks,t),v.auth0Blocks.definitionBlocks(e.Blocks,t),v.windowsCreds.definitionBlocks(e.Blocks,t),v.chartBlock.definitionBlocks(e.Blocks,t),v.emailBlocks.definitionBlocks(e.Blocks,t),v.htmlblocks.definitionBlocks(e.Blocks,t),v.HTMLParserBlocks.definitionBlocks(e.Blocks,t),v.ttsBlock.definitionBlocks(e.Blocks,t),v.pianoBlock.definitionBlocks(e.Blocks,t);var R=o.DetailsApp.customCategories,x=[v.defaultBlocks.generalBlocks(),` \n        <category name='Blockly Advanced'>\n        <category id="Audio" name="Audio">\n        ${v.ttsBlock.fieldXML()}\n        ${v.pianoBlock.fieldXML()}\n        </category>  \n            ${v.filterBlocks.fieldXML()}\n                \n                ${v.auth0Blocks.fieldXML()}\n                <category id="catConverters"  name="Converters">\n                ${v.convertersBlocks.fieldXML()}\n              </category>    \n              <category id="catDates"  name="Dates">\n          ${v.currentDateBlock.fieldXML()}\n          ${v.dateFromTextBlock.fieldXML()}\n          ${v.waitBlocks.fieldXML()}\n        </category>\n        <category id="catEmail"  name="Email">\n        ${v.emailBlocks.fieldXML()}\n      </category>\n\n        <category id="catExporter"  name="Exporter">\n        ${v.exportFileBlock.fieldXML()}\n      </category>\n              <category id="catGUI" name="GUI">\n              ${v.guiBlocks.fieldXML()}\n              ${v.chartBlock.fieldXML()}\n              </category>\n              <category id="catHTML" name="HTML">\n              <category name="GenHTML" id="Generate">\n              ${v.htmlblocks.fieldXML()}\n              </category>\n              <category name="Parser" id="parseHTML">\n              ${v.HTMLParserBlocks.fieldXML()}\n              </category>\n              </category>\n              <category name="Objects" id="objects">\n              ${v.propBlocks.fieldXML()}\n              ${v.createObjectBlocks.fieldXML()}\n              \n              </category>\n              <category id="XHR" name="Request">\n            ${v.xhrBlocks.fieldXML()}\n            ${v.windowsCreds.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${v.waitBlocks.fieldXML()}\n        </category>`,`  <category id="programming" name="Programming">\n        ${v.trycatchFinBlock.fieldXML()}\n        ${v.commentBlock.fieldXML()}\n          </category>\n        \n      `,`</category>\n      ${R}\n      \n      <category name="Swagger" id="catSwagger" expanded='false' >          \n          ${m}\n        </category> \n       \n        `];o.initialize(x)}else window.alert("gridElement is null")})()}SaveBlocks(){D.saveBlocksUrl.saveState(e.Xml,this.demoWorkspace,this.myId)}ShowBlocksDefinition(){return this.showCodeAndXML===sc.ShowBlocksDefinition}ShowSelection(){return sc[this.showCodeAndXML]}ShowSomething(){return this.showCodeAndXML!==sc.ShowNone}ShowOutput(){return this.showCodeAndXML===sc.ShowOutput}ShowCode(){return this.showCodeAndXML===sc.ShowCode}ShowXML(){return this.showCodeAndXML===sc.ShowXML}CalculateXMLAndCode(){var o=e.Xml.workspaceToDom(this.demoWorkspace,!0),a=e.Xml.domToPrettyText(o);this.showJSCode=this.run.latestCode,this.showXMLCode=a;var u=this.parseTextForBlocks(a);this.showBlocksDefinition=u.map(m=>{try{return`Blockly.Blocks['${m}']={ init: \n`+e.Blocks[m].init.toString()+`};\n};\nBlockly.JavaScript['${m}']=`+t[m].toString()+";"}catch(x){return console.error("parse definition : "+m,x),"//Error for "+m}}).join("\n")}parseTextForBlocks(o){var a=[];if(o.indexOf('<block type="')>=0)for(var u=o.split('<block type="'),m=1;m<u.length;m++){var C=u[m].split('"')[0];a.push(C)}return a}ShowInnerWorkings(){null!=this.demoWorkspace?(this.showCodeAndXML++,this.ShowSelection()||(this.showCodeAndXML=sc.ShowNone,setTimeout(a=>{e.svgResize(a)},1e3,this.demoWorkspace)),this.CalculateXMLAndCode()):window.alert("demoWorkspace is null")}Download(){var o=window.prompt("Name?","blocks.txt");null!=o&&D.saveLoad.DownloadBlocks(e.Xml,this.demoWorkspace,o)}changeListener(o){this.readThis(o.target)}readThis(o){var a=o.files[0],u=new FileReader,m=this;u.onloadend=function(C){D.saveLoad.LoadFile(e.Xml,m.demoWorkspace,u.result),m.run.resetInterpreter()},u.readAsText(a)}CategorySwaggerHidden(o){return`<category name='swagger_hidden_${o}' hidden='true' >${o}</category>`}SaveToLocalAPI(){var o,a,u;if(0==((null===(a=null===(o=this.DetailsApp)||void 0===o?void 0:o.LocalAPI)||void 0===a?void 0:a.WasAlive)||!1))return this.LoadLocalAPI(),void window.alert("local api it is not yet loaded - please try again after loading");var m=e.Xml.workspaceToDom(this.demoWorkspace,!0),C=e.Xml.domToPrettyText(m),R=new P.q,x=window.prompt("name of the blocks?");null!=x&&(R.id=x,R.blocks="",R.categories="",R.description="",null===(u=this.DetailsApp.LocalAPI)||void 0===u||u.SaveBlock(R,C).subscribe(U=>{console.log("number blocks",U),window.alert("saved !")}))}LoadLocalAPI(){var o,a,u=this;return null===(a=null===(o=u.DetailsApp.LocalAPI)||void 0===o?void 0:o.IsAlive())||void 0===a?void 0:a.pipe((0,Fr.K)(m=>{var C;throw window.alert(`cannot load ${null===(C=u.DetailsApp.LocalAPI)||void 0===C?void 0:C.urL}`),m})).subscribe(m=>{var C;if(!m){if(!window.confirm("LocalAPI is not alive.\n Do you want to downlod and run ?"))return;u.DetailsApp.LocalAPI.download()}var R=(null===(C=u.DetailsApp.LocalAPI)||void 0===C?void 0:C.urL)||"";u.LoadSwaggerFromUrl(R+="swagger/v1/swagger.json").then(x=>{x.hasError?window.alert("error loading local api"):(x.name="LocalAPI",u.addToToolboxSwagger(x,this),window.alert("loaded successfully"))})})}initialize(o){var a,u,m,C;const R=document.getElementById("blocklyDiv"+this.myId);if(null!=R){var x=o.map(ne=>`<sep></sep>${ne}`);this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">    \n    ${x}\n    </xml>`,this.demoWorkspace=e.inject(R,{readOnly:!1,media:"media/",trashcan:!0,horizontalLayout:!1,move:{scrollbars:!0,drag:!0,wheel:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},toolbox:this.toolboxXML}),new c(this.demoWorkspace).init();var tt=this;if(((null===(u=null===(a=this.DetailsApp.settings)||void 0===a?void 0:a.startBlocks)||void 0===u?void 0:u.length)||0)>0)try{var yt=((null===(m=this.DetailsApp.settings)||void 0===m?void 0:m.startBlocks)||[]).join("\n"),Vt=e.Xml.textToDom(yt);e.Xml.clearWorkspaceAndLoadFromXml(Vt,this.demoWorkspace)}catch(ne){console.error("error when load default blocks",ne)}(null===(C=this.DetailsApp.LocalAPI)||void 0===C?void 0:C.WasAlive)&&this.LoadSwaggerFromUrl(this.DetailsApp.LocalAPI.urL+"swagger/v1/swagger.json","LocalAutomation"),window.setTimeout(tt.afterTimeout,2e3,this),this.run=D.interpreterHelper.createInterpreter(this.demoWorkspace,t),tt=this,this.demoWorkspace.addChangeListener(function(ne){ne.isUiEvent||(tt.run.resetInterpreter(),tt.run.generateCodeAndLoadIntoInterpreter(),tt.CalculateXMLAndCode())})}else window.alert("blocklyDiv is null")}restoreBlocks(){D.saveBlocksUrl.restoreState(e.Xml,this.demoWorkspace,this.myId)}addToToolboxSwagger(o,a){var u,m=o.findCategSwaggerFromPaths().sort().map(ne=>`<category name='${ne}' custom='func_${o.name}_${ne}'></category>`).join("\n"),C=(null==a?void 0:a.CategorySwaggerHidden(null==a?void 0:a.swaggerLoaded))||"",R=a.toolboxXML,x=`<category name='${o.name}'>\n<category name='API' id='func_${o.name}'>\n${m}\n</category>\n${o.categSwagger()}\n\n<category name='meta' id='meta_${o.name}'>\n<block type='meta_swagger_controllers_${o.name}'></block>\n<block type='meta_swagger_controllers_actions_${o.name}'></block>\n</category>\n\n</category>\n`;if(R=R.replace(C,x),a.swaggerLoaded++,a.toolboxXML=R,null===(u=null==a?void 0:a.demoWorkspace)||void 0===u||u.updateToolbox(R),null!=(null==a?void 0:a.demoWorkspace)){var tt="objects_"+o.nameCategSwagger(),yt="AllApi_"+o.nameCategSwagger(),Vt=o;a.demoWorkspace.registerToolboxCategoryCallback(tt,ne=>a.registerSwaggerBlocksObjects(ne,Vt)),a.demoWorkspace.registerToolboxCategoryCallback(yt,ne=>a.registerSwaggerBlocksAPIAll(ne,Vt)),o.findCategSwaggerFromPaths().forEach(ne=>{var Se;null===(Se=null==a?void 0:a.demoWorkspace)||void 0===Se||Se.registerToolboxCategoryCallback(`func_${o.name}_${ne}`,He=>a.registerSwaggerBlocksAPIControllers(He,o,ne))})}}afterTimeout(o){var a,u,m;if(o.loadedCompletely=!0,null!=(null==o?void 0:o.swaggerData))if(o.toolboxXML=o.toolboxXML.replace("Swagger",`Swagger(${o.swaggerData.length})`),o.swaggerData.forEach(U=>{o.addToToolboxSwagger(U,o)}),null!=(null==o?void 0:o.mustLoadDemoBlock))o.ShowDemo(null==o?void 0:o.mustLoadDemoBlock);else{if(((null===(u=null===(a=o.DetailsApp.settings)||void 0===a?void 0:a.startBlocks)||void 0===u?void 0:u.length)||0)>0)try{var R=((null===(m=o.DetailsApp.settings)||void 0===m?void 0:m.startBlocks)||[]).join("\n");if((null==R?void 0:R.length)>62){var x=e.Xml.textToDom(R);e.Xml.clearWorkspaceAndLoadFromXml(x,o.demoWorkspace)}}catch(U){console.log("error when load default blocks",U)}o.restoreBlocks()}}}return _.id=0,_.\u0275fac=function(o){return new(o||_)(le.Y36(gp),le.Y36(Ks.d),le.Y36(qp.F),le.Y36(mp.gz),le.Y36(tf.v),le.Y36(qf.ux),le.Y36(Fs.uw))},_.\u0275cmp=le.Xpm({type:_,selectors:[["app-display-blockly"]],decls:79,vars:14,consts:[[4,"ngIf"],["rowHeight","1:1",3,"cols"],[2,"display","inline-block","height","100%","width","100%"],[2,"display","inline-block","height","5%","width","100%"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","id","downloadBlocks","color","primary",3,"matMenuTriggerFor"],["menuSave","matMenu"],[3,"inset"],["id","downloadBlocks","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"color","click"],["mat-raised-button","","color","warn","id","runButton",3,"click"],["type","file",3,"change"],["mat-raised-button","","id","demos","color","accent",3,"click"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"id"],[3,"id"],["width","800","height","450",3,"id"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"],["style","display: inline-block; height: 100%; width: 100%",3,"options","ngModel","ngModelChange",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"options","ngModel","ngModelChange"]],template:function(o,a){if(1&o&&(le.YNc(0,eg,1,0,"mat-spinner",0),le.TgZ(1,"mat-grid-list",1),le.TgZ(2,"mat-grid-tile-header"),le.TgZ(3,"div",2),le.TgZ(4,"div",3),le.TgZ(5,"button",4),le.NdJ("click",function(){return a.LoadSwagger()}),le.TgZ(6,"mat-icon"),le._uU(7,"file_upload"),le.qZA(),le._uU(8," Load Swagger/OpenAPI "),le.qZA(),le._uU(9," \xa0 "),le.TgZ(10,"button",5),le.TgZ(11,"mat-icon"),le._uU(12,"save"),le.qZA(),le._uU(13," Save => "),le.qZA(),le.TgZ(14,"mat-menu",null,6),le.TgZ(16,"button",4),le.NdJ("click",function(){return a.SaveBlocks()}),le.TgZ(17,"mat-icon"),le._uU(18,"web"),le.qZA(),le._uU(19," Persist in browser "),le.qZA(),le._UZ(20,"mat-divider",7),le.TgZ(21,"button",8),le.NdJ("click",function(){return a.Download()}),le.TgZ(22,"mat-icon"),le._uU(23,"download"),le.qZA(),le._uU(24," Download blocks "),le.qZA(),le._UZ(25,"mat-divider",7),le.TgZ(26,"button",9),le.NdJ("click",function(){return a.SaveToLocalAPI()}),le.TgZ(27,"mat-icon"),le._uU(28,"save"),le.qZA(),le._uU(29," Save Local "),le.qZA(),le.qZA(),le._uU(30," \xa0 "),le.TgZ(31,"button",10),le.NdJ("click",function(){return a.RunCode()}),le.TgZ(32,"mat-icon"),le._uU(33,"play_arrow"),le.qZA(),le._uU(34," Execute "),le.qZA(),le._uU(35," \xa0 \xa0 "),le.TgZ(36,"input",11),le.NdJ("change",function(m){return a.changeListener(m)}),le.qZA(),le.TgZ(37,"button",4),le.NdJ("click",function(){return a.ShowInnerWorkings()}),le.TgZ(38,"mat-icon"),le._uU(39,"code"),le.qZA(),le._uU(40),le.qZA(),le.TgZ(41,"button",12),le.NdJ("click",function(){return a.ShowBlocks()}),le.TgZ(42,"mat-icon"),le._uU(43,"list"),le.qZA(),le._uU(44," Load Blocks "),le.qZA(),le.YNc(45,qh,2,4,"a",13),le.qZA(),le.qZA(),le.qZA(),le.TgZ(46,"mat-grid-tile"),le._UZ(47,"div",14),le.qZA(),le.YNc(48,fu,5,4,"mat-grid-tile",0),le.qZA(),le.TgZ(49,"mat-accordion"),le.TgZ(50,"mat-expansion-panel"),le.TgZ(51,"mat-expansion-panel-header"),le.TgZ(52,"mat-panel-title"),le._uU(53," Output Grid "),le.qZA(),le.TgZ(54,"mat-panel-description"),le._uU(55," Click to see grid of output values "),le.qZA(),le.qZA(),le._UZ(56,"div",15),le.qZA(),le.TgZ(57,"mat-expansion-panel"),le.TgZ(58,"mat-expansion-panel-header"),le.TgZ(59,"mat-panel-title"),le._uU(60," Chart "),le.qZA(),le.TgZ(61,"mat-panel-description"),le._uU(62," Click to see chart of output values "),le.qZA(),le.qZA(),le.TgZ(63,"p"),le._UZ(64,"canvas",16),le.qZA(),le.qZA(),le.TgZ(65,"mat-expansion-panel"),le.TgZ(66,"mat-expansion-panel-header"),le.TgZ(67,"mat-panel-title"),le._uU(68," HTML "),le.qZA(),le.TgZ(69,"mat-panel-description"),le._uU(70," Click to see output as HTML "),le.qZA(),le.qZA(),le._UZ(71,"div",15),le.qZA(),le.TgZ(72,"mat-expansion-panel"),le.TgZ(73,"mat-expansion-panel-header"),le.TgZ(74,"mat-panel-title"),le._uU(75," Text "),le.qZA(),le.TgZ(76,"mat-panel-description"),le._uU(77," Click to see output as Text "),le.qZA(),le.qZA(),le._UZ(78,"div",15),le.qZA(),le.qZA()),2&o){const u=le.MAs(15);le.Q6J("ngIf",!a.loadedCompletely),le.xp6(1),le.Q6J("cols",a.ShowSomething()?2:1),le.xp6(9),le.Q6J("matMenuTriggerFor",u),le.xp6(10),le.Q6J("inset",!0),le.xp6(5),le.Q6J("inset",!0),le.xp6(1),le.Q6J("color",null!=a.DetailsApp.LocalAPI&&a.DetailsApp.LocalAPI.WasAlive?"primary":"warn"),le.xp6(14),le.hij(" ",a.ShowSelection()," "),le.xp6(5),le.Q6J("ngIf",null==a.mustLoadDemoBlock?null:a.mustLoadDemoBlock.length),le.xp6(2),le.Q6J("id","blocklyDiv"+a.myId),le.xp6(1),le.Q6J("ngIf",a.ShowSomething()),le.xp6(8),le.Q6J("id","steps"+a.myId),le.xp6(8),le.Q6J("id","barchart"+a.myId),le.xp6(7),le.Q6J("id","htmlOutput"+a.myId),le.xp6(7),le.Q6J("id","htmlText"+a.myId)}},directives:[Il.O5,$h.Il,$h.$H,$h.jo,hu.lW,yh.Hw,ef.p6,ef.VK,tg.d,$h.DX,Zh.pp,Zh.ib,Zh.yz,Zh.yK,Zh.u4,Qh.$g,hu.zs,mp.yS,nf.C,uo.JJ,uo.On],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:400;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),_})()},16335:(H,W,f)=>{"use strict";f.d(W,{F:()=>r}),f(39646);var g=f(54004),e=f(18505),t=f(5e3),n=f(40520);let r=(()=>{class s{constructor(v){this.http=v}getDemoBlocks(){var v=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/all.txt?${v}`,{responseType:"text"}).pipe((0,g.U)(D=>JSON.parse(D)))}getCustomCategories(){var v=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/customCategories.txt?${v}`,{responseType:"text"}).pipe((0,g.U)(D=>D.toString()))}getSwaggerLinks(){var v=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/swaggers.json?${v}`,{responseType:"text"}).pipe((0,g.U)(D=>JSON.parse(D)))}getDemoBlock(v){var D=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/${v}.txt?${D}`,{responseType:"text"}).pipe((0,e.b)(G=>{}),(0,g.U)(G=>G.toString()))}}return s.\u0275fac=function(v){return new(v||s)(t.LFG(n.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},13155:(H,W,f)=>{"use strict";var y=f(22313),g=f(5e3),e=f(93075),t=f(91083),n=f(15861),r=f(47423),s=f(63874),c=f(53251),v=f(69808);const D=["vcr"];function P(N,X){if(1&N&&(g.TgZ(0,"mat-icon",9),g._uU(1),g.qZA()),2&N){const E=g.oxw(2).$implicit;g.xp6(1),g.hij(" filter_",E+1,"")}}function G(N,X){1&N&&(g.TgZ(0,"span"),g._uU(1,"W:{{number+1}"),g.qZA())}function it(N,X){if(1&N&&(g.YNc(0,P,2,1,"mat-icon",7),g.YNc(1,G,2,0,"span",8)),2&N){const E=g.oxw().$implicit;g.Q6J("ngIf",E<10),g.xp6(1),g.Q6J("ngIf",E>9)}}function q(N,X){}function bt(N,X){1&N&&(g.TgZ(0,"mat-tab",4),g.YNc(1,it,2,2,"ng-template",5),g.YNc(2,q,0,0,"ng-template",null,6,g.W1O),g.qZA()),2&N&&g.Q6J("label","W:"+(X.$implicit+1))}let Ft=(()=>{class N{constructor(E,k){this.fooInjector=E,this.resolver=k,this.data=[],this.selectedTabIndex=0,this.numbers=[0]}addTab(){this.numbers.push(this.numbers.length),this.selectedTabIndex=this.numbers.length-1}changeSelected(E){this.data.filter(k=>k==E).length>0||(this.data.push(E),this.loadBar(E).then(k=>{}))}ngAfterViewInit(){this.data.push(0),this.loadBar(0).then(E=>{})}loadBar(E){var k=this;return(0,n.Z)(function*(){var nt;try{const ii=yield Promise.resolve().then(f.bind(f,19378)),Fi=k.resolver.resolveComponentFactory(ii.DisplayBlocklyComponent);var Ut=null===(nt=k.components)||void 0===nt?void 0:nt.get(E);null!=Ut&&Ut.createComponent(Fi)}catch(ii){console.error("loading"+E,ii)}return E})()}ngOnInit(){}}return N.\u0275fac=function(E){return new(E||N)(g.Y36(g.zs3),g.Y36(g._Vd))},N.\u0275cmp=g.Xpm({type:N,selectors:[["app-blockly-studio"]],viewQuery:function(E,k){if(1&E&&g.Gf(D,5,g.s_b),2&E){let nt;g.iGM(nt=g.CRH())&&(k.components=nt)}},decls:7,vars:2,consts:[["mat-icon-button","","color","primary",3,"click"],[3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[3,"label"],["mat-tab-label",""],["vcr",""],["aria-hidden","false",4,"ngIf"],[4,"ngIf"],["aria-hidden","false"]],template:function(E,k){1&E&&(g.TgZ(0,"button",0),g.NdJ("click",function(){return k.addTab()}),g.TgZ(1,"mat-icon"),g._uU(2,"add_circle"),g.qZA(),g.qZA(),g.TgZ(3,"mat-tab-group",1),g.NdJ("selectedIndexChange",function(Ut){return k.changeSelected(Ut)}),g.YNc(4,bt,4,1,"mat-tab",2),g.qZA(),g.TgZ(5,"button",3),g.NdJ("click",function(){return k.addTab()}),g._uU(6,"Add"),g.qZA()),2&E&&(g.xp6(3),g.Q6J("selectedIndex",k.selectedTabIndex),g.xp6(1),g.Q6J("ngForOf",k.numbers))},directives:[r.lW,s.Hw,c.SP,v.sg,c.uX,c.uD,v.O5],styles:[""]}),N})();var gt=f(19378);const wt=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:gt.DisplayBlocklyComponent},{path:"automation/studio",component:Ft},{path:"automation/loadexample/:demoblock",component:gt.DisplayBlocklyComponent}];let Bt=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[t.Bz.forRoot(wt)],t.Bz]}),N})();var Kt=f(33290),It=f(95113),St=f(54004),lt=f(77579),ft=f(26063);class ht extends lt.x{constructor(X=1/0,E=1/0,k=ft.l){super(),this._bufferSize=X,this._windowTime=E,this._timestampProvider=k,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=E===1/0,this._bufferSize=Math.max(1,X),this._windowTime=Math.max(1,E)}next(X){const{isStopped:E,_buffer:k,_infiniteTimeWindow:nt,_timestampProvider:Ut,_windowTime:ii}=this;E||(k.push(X),!nt&&k.push(Ut.now()+ii)),this._trimBuffer(),super.next(X)}_subscribe(X){this._throwIfClosed(),this._trimBuffer();const E=this._innerSubscribe(X),{_infiniteTimeWindow:k,_buffer:nt}=this,Ut=nt.slice();for(let ii=0;ii<Ut.length&&!X.closed;ii+=k?1:2)X.next(Ut[ii]);return this._checkFinalizedStatuses(X),E}_trimBuffer(){const{_bufferSize:X,_timestampProvider:E,_buffer:k,_infiniteTimeWindow:nt}=this,Ut=(nt?1:2)*X;if(X<1/0&&Ut<k.length&&k.splice(0,k.length-Ut),!nt){const ii=E.now();let Fi=0;for(let cn=1;cn<k.length&&k[cn]<=ii;cn+=2)Fi=cn;Fi&&k.splice(0,Fi+1)}}}var Gt=f(13099);let ot=(()=>{class N{constructor(){this.title="",this.footer="",this.startBlocks=[],this.tourSteps=[],this.latestVersion="",this.localAPI=""}}return N.version="2021.12.29.1130",N})();var st=f(68260),Z=f(70925),Zt=f(30495),vt=f(90508),At=f(63191),re=f(91159),ve=f(54968),oe=f(56451),Ie=f(39300),Re=f(69718),je=f(82722),Si=f(71884),Ze=f(95698),we=f(68675),ci=f(78372),Wt=f(41777),Ae=f(76360),Qt=f(15664),ee=f(50226);const Mt=["*"];function Yt(N,X){if(1&N){const E=g.EpF();g.TgZ(0,"div",2),g.NdJ("click",function(){return g.CHM(E),g.oxw()._onBackdropClicked()}),g.qZA()}if(2&N){const E=g.oxw();g.ekj("mat-drawer-shown",E._isShowingBackdrop())}}function ye(N,X){1&N&&(g.TgZ(0,"mat-drawer-content"),g.Hsn(1,2),g.qZA())}const ui=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Te=["mat-drawer","mat-drawer-content","*"];function ce(N,X){if(1&N){const E=g.EpF();g.TgZ(0,"div",2),g.NdJ("click",function(){return g.CHM(E),g.oxw()._onBackdropClicked()}),g.qZA()}if(2&N){const E=g.oxw();g.ekj("mat-drawer-shown",E._isShowingBackdrop())}}function te(N,X){1&N&&(g.TgZ(0,"mat-sidenav-content",3),g.Hsn(1,2),g.qZA())}const Me=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],ue=["mat-sidenav","mat-sidenav-content","*"],be={transformDrawer:(0,Wt.X$)("transform",[(0,Wt.SB)("open, open-instant",(0,Wt.oB)({transform:"none",visibility:"visible"})),(0,Wt.SB)("void",(0,Wt.oB)({"box-shadow":"none",visibility:"hidden"})),(0,Wt.eR)("void => open-instant",(0,Wt.jt)("0ms")),(0,Wt.eR)("void <=> open, open-instant => void",(0,Wt.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},zt=new g.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),Ge=new g.OlP("MAT_DRAWER_CONTAINER");let Ri=(()=>{class N extends Zt.PQ{constructor(E,k,nt,Ut,ii){super(nt,Ut,ii),this._changeDetectorRef=E,this._container=k}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return N.\u0275fac=function(E){return new(E||N)(g.Y36(g.sBO),g.Y36((0,g.Gpc)(()=>mi)),g.Y36(g.SBq),g.Y36(Zt.mF),g.Y36(g.R0b))},N.\u0275cmp=g.Xpm({type:N,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(E,k){2&E&&g.Udp("margin-left",k._container._contentMargins.left,"px")("margin-right",k._container._contentMargins.right,"px")},features:[g.qOj],ngContentSelectors:Mt,decls:1,vars:0,template:function(E,k){1&E&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),N})(),bi=(()=>{class N{constructor(E,k,nt,Ut,ii,Fi,cn,gr){this._elementRef=E,this._focusTrapFactory=k,this._focusMonitor=nt,this._platform=Ut,this._ngZone=ii,this._interactivityChecker=Fi,this._doc=cn,this._container=gr,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new lt.x,this._animationEnd=new lt.x,this._animationState="void",this.openedChange=new g.vpe(!0),this._openedStream=this.openedChange.pipe((0,Ie.h)(_n=>_n),(0,St.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,Ie.h)(_n=>_n.fromState!==_n.toState&&0===_n.toState.indexOf("open")),(0,Re.h)(void 0)),this._closedStream=this.openedChange.pipe((0,Ie.h)(_n=>!_n),(0,St.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,Ie.h)(_n=>_n.fromState!==_n.toState&&"void"===_n.toState),(0,Re.h)(void 0)),this._destroyed=new lt.x,this.onPositionChanged=new g.vpe,this._modeChanged=new lt.x,this.openedChange.subscribe(_n=>{_n?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,ve.R)(this._elementRef.nativeElement,"keydown").pipe((0,Ie.h)(_n=>_n.keyCode===re.hY&&!this.disableClose&&!(0,re.Vb)(_n)),(0,je.R)(this._destroyed)).subscribe(_n=>this._ngZone.run(()=>{this.close(),_n.stopPropagation(),_n.preventDefault()}))}),this._animationEnd.pipe((0,Si.x)((_n,$r)=>_n.fromState===$r.fromState&&_n.toState===$r.toState)).subscribe(_n=>{const{fromState:$r,toState:Zr}=_n;(0===Zr.indexOf("open")&&"void"===$r||"void"===Zr&&0===$r.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(E){(E="end"===E?"end":"start")!=this._position&&(this._position=E,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(E){this._mode=E,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(E){this._disableClose=(0,At.Ig)(E)}get autoFocus(){const E=this._autoFocus;return null==E?"side"===this.mode?"dialog":"first-tabbable":E}set autoFocus(E){("true"===E||"false"===E)&&(E=(0,At.Ig)(E)),this._autoFocus=E}get opened(){return this._opened}set opened(E){this.toggle((0,At.Ig)(E))}_forceFocus(E,k){this._interactivityChecker.isFocusable(E)||(E.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{E.addEventListener("blur",()=>E.removeAttribute("tabindex")),E.addEventListener("mousedown",()=>E.removeAttribute("tabindex"))})),E.focus(k)}_focusByCssSelector(E,k){let nt=this._elementRef.nativeElement.querySelector(E);nt&&this._forceFocus(nt,k)}_takeFocus(){if(!this._focusTrap)return;const E=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(k=>{!k&&"function"==typeof this._elementRef.nativeElement.focus&&E.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(E){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,E):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){var E;const k=null===(E=this._doc)||void 0===E?void 0:E.activeElement;return!!k&&this._elementRef.nativeElement.contains(k)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(E){return this.toggle(!0,E)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(E=!this.opened,k){E&&k&&(this._openedVia=k);const nt=this._setOpen(E,!E&&this._isFocusWithinDrawer(),this._openedVia||"program");return E||(this._openedVia=null),nt}_setOpen(E,k,nt){return this._opened=E,E?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",k&&this._restoreFocus(nt)),this._updateFocusTrapState(),new Promise(Ut=>{this.openedChange.pipe((0,Ze.q)(1)).subscribe(ii=>Ut(ii?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}}return N.\u0275fac=function(E){return new(E||N)(g.Y36(g.SBq),g.Y36(Qt.qV),g.Y36(Qt.tE),g.Y36(Z.t4),g.Y36(g.R0b),g.Y36(Qt.ic),g.Y36(v.K0,8),g.Y36(Ge,8))},N.\u0275cmp=g.Xpm({type:N,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(E,k){1&E&&g.WFA("@transform.start",function(Ut){return k._animationStarted.next(Ut)})("@transform.done",function(Ut){return k._animationEnd.next(Ut)}),2&E&&(g.uIk("align",null),g.d8E("@transform",k._animationState),g.ekj("mat-drawer-end","end"===k.position)("mat-drawer-over","over"===k.mode)("mat-drawer-push","push"===k.mode)("mat-drawer-side","side"===k.mode)("mat-drawer-opened",k.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Mt,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(E,k){1&E&&(g.F$t(),g.TgZ(0,"div",0),g.Hsn(1),g.qZA())},directives:[Zt.PQ],encapsulation:2,data:{animation:[be.transformDrawer]},changeDetection:0}),N})(),mi=(()=>{class N{constructor(E,k,nt,Ut,ii,Fi=!1,cn){this._dir=E,this._element=k,this._ngZone=nt,this._changeDetectorRef=Ut,this._animationMode=cn,this._drawers=new g.n_E,this.backdropClick=new g.vpe,this._destroyed=new lt.x,this._doCheckSubject=new lt.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new lt.x,E&&E.change.pipe((0,je.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),ii.change().pipe((0,je.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=Fi}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(E){this._autosize=(0,At.Ig)(E)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(E){this._backdropOverride=null==E?null:(0,At.Ig)(E)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,we.O)(this._allDrawers),(0,je.R)(this._destroyed)).subscribe(E=>{this._drawers.reset(E.filter(k=>!k._container||k._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,we.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(E=>{this._watchDrawerToggle(E),this._watchDrawerPosition(E),this._watchDrawerMode(E)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,ci.b)(10),(0,je.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(E=>E.open())}close(){this._drawers.forEach(E=>E.close())}updateContentMargins(){let E=0,k=0;if(this._left&&this._left.opened)if("side"==this._left.mode)E+=this._left._getWidth();else if("push"==this._left.mode){const nt=this._left._getWidth();E+=nt,k-=nt}if(this._right&&this._right.opened)if("side"==this._right.mode)k+=this._right._getWidth();else if("push"==this._right.mode){const nt=this._right._getWidth();k+=nt,E-=nt}E=E||null,k=k||null,(E!==this._contentMargins.left||k!==this._contentMargins.right)&&(this._contentMargins={left:E,right:k},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(E){E._animationStarted.pipe((0,Ie.h)(k=>k.fromState!==k.toState),(0,je.R)(this._drawers.changes)).subscribe(k=>{"open-instant"!==k.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==E.mode&&E.openedChange.pipe((0,je.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(E.opened))}_watchDrawerPosition(E){!E||E.onPositionChanged.pipe((0,je.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Ze.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(E){E&&E._modeChanged.pipe((0,je.R)((0,oe.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(E){const k=this._element.nativeElement.classList,nt="mat-drawer-container-has-open";E?k.add(nt):k.remove(nt)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(E=>{"end"==E.position?this._end=E:this._start=E}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(E=>E&&!E.disableClose&&this._canHaveBackdrop(E)).forEach(E=>E._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(E){return"side"!==E.mode||!!this._backdropOverride}_isDrawerOpen(E){return null!=E&&E.opened}}return N.\u0275fac=function(E){return new(E||N)(g.Y36(ee.Is,8),g.Y36(g.SBq),g.Y36(g.R0b),g.Y36(g.sBO),g.Y36(Zt.rL),g.Y36(zt),g.Y36(Ae.Qb,8))},N.\u0275cmp=g.Xpm({type:N,selectors:[["mat-drawer-container"]],contentQueries:function(E,k,nt){if(1&E&&(g.Suo(nt,Ri,5),g.Suo(nt,bi,5)),2&E){let Ut;g.iGM(Ut=g.CRH())&&(k._content=Ut.first),g.iGM(Ut=g.CRH())&&(k._allDrawers=Ut)}},viewQuery:function(E,k){if(1&E&&g.Gf(Ri,5),2&E){let nt;g.iGM(nt=g.CRH())&&(k._userContent=nt.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(E,k){2&E&&g.ekj("mat-drawer-container-explicit-backdrop",k._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[g._Bn([{provide:Ge,useExisting:N}])],ngContentSelectors:Te,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(E,k){1&E&&(g.F$t(ui),g.YNc(0,Yt,1,2,"div",0),g.Hsn(1),g.Hsn(2,1),g.YNc(3,ye,2,0,"mat-drawer-content",1)),2&E&&(g.Q6J("ngIf",k.hasBackdrop),g.xp6(3),g.Q6J("ngIf",!k._content))},directives:[v.O5,Ri],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),N})(),on=(()=>{class N extends Ri{constructor(E,k,nt,Ut,ii){super(E,k,nt,Ut,ii)}}return N.\u0275fac=function(E){return new(E||N)(g.Y36(g.sBO),g.Y36((0,g.Gpc)(()=>Bi)),g.Y36(g.SBq),g.Y36(Zt.mF),g.Y36(g.R0b))},N.\u0275cmp=g.Xpm({type:N,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(E,k){2&E&&g.Udp("margin-left",k._container._contentMargins.left,"px")("margin-right",k._container._contentMargins.right,"px")},features:[g.qOj],ngContentSelectors:Mt,decls:1,vars:0,template:function(E,k){1&E&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),N})(),li=(()=>{class N extends bi{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(E){this._fixedInViewport=(0,At.Ig)(E)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(E){this._fixedTopGap=(0,At.su)(E)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(E){this._fixedBottomGap=(0,At.su)(E)}}return N.\u0275fac=function(){let X;return function(k){return(X||(X=g.n5z(N)))(k||N)}}(),N.\u0275cmp=g.Xpm({type:N,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(E,k){2&E&&(g.uIk("align",null),g.Udp("top",k.fixedInViewport?k.fixedTopGap:null,"px")("bottom",k.fixedInViewport?k.fixedBottomGap:null,"px"),g.ekj("mat-drawer-end","end"===k.position)("mat-drawer-over","over"===k.mode)("mat-drawer-push","push"===k.mode)("mat-drawer-side","side"===k.mode)("mat-drawer-opened",k.opened)("mat-sidenav-fixed",k.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[g.qOj],ngContentSelectors:Mt,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(E,k){1&E&&(g.F$t(),g.TgZ(0,"div",0),g.Hsn(1),g.qZA())},directives:[Zt.PQ],encapsulation:2,data:{animation:[be.transformDrawer]},changeDetection:0}),N})(),Bi=(()=>{class N extends mi{}return N.\u0275fac=function(){let X;return function(k){return(X||(X=g.n5z(N)))(k||N)}}(),N.\u0275cmp=g.Xpm({type:N,selectors:[["mat-sidenav-container"]],contentQueries:function(E,k,nt){if(1&E&&(g.Suo(nt,on,5),g.Suo(nt,li,5)),2&E){let Ut;g.iGM(Ut=g.CRH())&&(k._content=Ut.first),g.iGM(Ut=g.CRH())&&(k._allDrawers=Ut)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(E,k){2&E&&g.ekj("mat-drawer-container-explicit-backdrop",k._backdropOverride)},exportAs:["matSidenavContainer"],features:[g._Bn([{provide:Ge,useExisting:N}]),g.qOj],ngContentSelectors:ue,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(E,k){1&E&&(g.F$t(Me),g.YNc(0,ce,1,2,"div",0),g.Hsn(1),g.Hsn(2,1),g.YNc(3,te,2,0,"mat-sidenav-content",1)),2&E&&(g.Q6J("ngIf",k.hasBackdrop),g.xp6(3),g.Q6J("ngIf",!k._content))},directives:[v.O5,on,Zt.PQ],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),N})(),Ii=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[v.ez,vt.BQ,Z.ud,Zt.ZD],Zt.ZD,vt.BQ]}),N})();const ni=["*",[["mat-toolbar-row"]]],vi=["*","mat-toolbar-row"],Ce=(0,vt.pj)(class{constructor(N){this._elementRef=N}});let Qe=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275dir=g.lG2({type:N,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),N})(),Ei=(()=>{class N extends Ce{constructor(E,k,nt){super(E),this._platform=k,this._document=nt}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return N.\u0275fac=function(E){return new(E||N)(g.Y36(g.SBq),g.Y36(Z.t4),g.Y36(v.K0))},N.\u0275cmp=g.Xpm({type:N,selectors:[["mat-toolbar"]],contentQueries:function(E,k,nt){if(1&E&&g.Suo(nt,Qe,5),2&E){let Ut;g.iGM(Ut=g.CRH())&&(k._toolbarRows=Ut)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(E,k){2&E&&g.ekj("mat-toolbar-multiple-rows",k._toolbarRows.length>0)("mat-toolbar-single-row",0===k._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[g.qOj],ngContentSelectors:vi,decls:2,vars:0,template:function(E,k){1&E&&(g.F$t(ni),g.Hsn(0),g.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),N})(),ti=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[vt.BQ],vt.BQ]}),N})();f(20449);var Pt=f(4834);const dt=["*"],pe=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],Le=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],pi=(0,vt.Id)((0,vt.Kr)(class{})),Ke=(0,vt.Kr)(class{}),Pe=new g.OlP("MatList"),di=new g.OlP("MatNavList");let Oi=(()=>{class N extends pi{constructor(){super(...arguments),this._stateChanges=new lt.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return N.\u0275fac=function(){let X;return function(k){return(X||(X=g.n5z(N)))(k||N)}}(),N.\u0275cmp=g.Xpm({type:N,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[g._Bn([{provide:di,useExisting:N}]),g.qOj,g.TTD],ngContentSelectors:dt,decls:1,vars:0,template:function(E,k){1&E&&(g.F$t(),g.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),N})(),Rn=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275dir=g.lG2({type:N,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),N})(),nr=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275dir=g.lG2({type:N,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),N})(),io=(()=>{class N extends Ke{constructor(E,k,nt,Ut){super(),this._element=E,this._isInteractiveList=!1,this._destroyed=new lt.x,this._disabled=!1,this._isInteractiveList=!!(nt||Ut&&"action-list"===Ut._getListType()),this._list=nt||Ut;const ii=this._getHostElement();"button"===ii.nodeName.toLowerCase()&&!ii.hasAttribute("type")&&ii.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,je.R)(this._destroyed)).subscribe(()=>{k.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(E){this._disabled=(0,At.Ig)(E)}ngAfterContentInit(){(0,vt.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return N.\u0275fac=function(E){return new(E||N)(g.Y36(g.SBq),g.Y36(g.sBO),g.Y36(di,8),g.Y36(Pe,8))},N.\u0275cmp=g.Xpm({type:N,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(E,k,nt){if(1&E&&(g.Suo(nt,Rn,5),g.Suo(nt,nr,5),g.Suo(nt,vt.X2,5)),2&E){let Ut;g.iGM(Ut=g.CRH())&&(k._avatar=Ut.first),g.iGM(Ut=g.CRH())&&(k._icon=Ut.first),g.iGM(Ut=g.CRH())&&(k._lines=Ut)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(E,k){2&E&&g.ekj("mat-list-item-disabled",k.disabled)("mat-list-item-avatar",k._avatar||k._icon)("mat-list-item-with-avatar",k._avatar||k._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[g.qOj],ngContentSelectors:Le,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(E,k){1&E&&(g.F$t(pe),g.TgZ(0,"div",0),g._UZ(1,"div",1),g.Hsn(2),g.TgZ(3,"div",2),g.Hsn(4,1),g.qZA(),g.Hsn(5,2),g.qZA()),2&E&&(g.xp6(1),g.Q6J("matRippleTrigger",k._getHostElement())("matRippleDisabled",k._isRippleDisabled()))},directives:[vt.wG],encapsulation:2,changeDetection:0}),N})(),Di=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[vt.uc,vt.si,vt.BQ,vt.us,v.ez],vt.uc,vt.BQ,vt.us,Pt.t]}),N})();var An=f(81125),sr=f(92181);const Mr=function(N){return["/","automation","loadexample",N]};function ar(N,X){if(1&N&&(g.TgZ(0,"a",24),g.TgZ(1,"mat-icon"),g._uU(2," https "),g.qZA(),g._uU(3),g.qZA()),2&N){const E=X.index,k=X.$implicit;g.Q6J("routerLink",g.VKq(3,Mr,k.id)),g.xp6(3),g.AsE(" ",E+1," ",k.description,"")}}function Sr(N,X){if(1&N){const E=g.EpF();g.TgZ(0,"button",26),g.NdJ("click",function(){return g.CHM(E),g.oxw(),g.MAs(2).toggle()}),g.TgZ(1,"mat-icon",27),g._uU(2,"menu"),g.qZA(),g.qZA()}}function Yr(N,X){if(1&N&&(g.TgZ(0,"span",28),g._uU(1),g.qZA()),2&N){const E=g.oxw();g.xp6(1),g.AsE(" ",E.version," => ",E.latestVersion," ")}}const Tr=function(){return["/","automation","studio"]},Ui=function(){return["/","automation","main"]};let On=(()=>{class N{constructor(E,k,nt){this.breakpointObserver=E,this.details=k,this.ta=nt,this.demoBlocks=[],this.isHandset$=this.breakpointObserver.observe(It.u3.Handset).pipe((0,St.U)(Ut=>Ut.matches||!0),function(N,X,E){let Ut,ii=!1;return Ut=1/0,(0,Gt.B)({connector:()=>new ht(Ut,X,E),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ii})}()),this.version=ot.version,this.latestVersion="",this.title="Blockly Automation",this.footer="",this.standalone=!1}ngOnInit(){var E,k,nt,Ut,ii;this.latestVersion=null===(E=this.details.settings)||void 0===E?void 0:E.latestVersion,this.demoBlocks=this.details.demoBlocks.sort((Fi,cn)=>Fi.description.localeCompare(cn.description)),this.title=(null===(nt=null===(k=this.details)||void 0===k?void 0:k.settings)||void 0===nt?void 0:nt.title)||"Blockly Automation",this.footer=(null===(ii=null===(Ut=this.details)||void 0===Ut?void 0:Ut.settings)||void 0===ii?void 0:ii.footer)||"",(navigator.standalone||window.matchMedia("(display-mode: standalone)").matches)&&(this.standalone=!0)}executeOnDisplayBlockly(E){this.ta.sendDataToServer("DisplayBlocklyComponent",E)}}return N.\u0275fac=function(E){return new(E||N)(g.Y36(It.Yg),g.Y36(Kt.d),g.Y36(st.v))},N.\u0275cmp=g.Xpm({type:N,selectors:[["app-primary-navig"]],decls:84,vars:27,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation","target","_blank"],["mat-list-item","","href","https://ignatandrei.github.io/BlocklyAutomation","target","_blank"],["mat-list-item","","target","_blank",3,"routerLink",4,"ngFor","ngForOf"],["color","primary",1,"nav-bar"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[3,"title"],[1,"example-spacer"],["mat-mini-fab","","color","primary",3,"click"],["id","download","mat-button","",3,"matMenuTriggerFor"],["download","matMenu"],["mat-list-item","",4,"ngIf"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseIISWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip/","target","_blank"],["mat-list-item","","href","http://ba.serviciipeweb.ro/","target","_blank"],["mat-list-item","","href","https://www.microsoft.com/en-us/p/blocklyautomation/9mxnwjt6zpd0","target","_blank"],["mat-button","",3,"matMenuTriggerFor"],["examples","matMenu"],["mat-list-item","","target","_blank",3,"routerLink"],[1,"main-content"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-list-item",""]],template:function(E,k){if(1&E&&(g.TgZ(0,"mat-sidenav-container",0),g.TgZ(1,"mat-sidenav",1,2),g.ALo(3,"async"),g.ALo(4,"async"),g.ALo(5,"async"),g.TgZ(6,"mat-toolbar"),g.TgZ(7,"a",3),g._uU(8,"Menu"),g.qZA(),g.qZA(),g.TgZ(9,"mat-nav-list"),g.TgZ(10,"a",4),g.TgZ(11,"mat-icon"),g._uU(12," source "),g.qZA(),g._uU(13," Github"),g.qZA(),g._UZ(14,"mat-divider"),g.TgZ(15,"a",5),g.TgZ(16,"mat-icon"),g._uU(17," https "),g.qZA(),g._uU(18," Demo online"),g.qZA(),g._UZ(19,"mat-divider"),g.TgZ(20,"mat-expansion-panel"),g.TgZ(21,"mat-expansion-panel-header"),g.TgZ(22,"mat-panel-title"),g._uU(23),g.qZA(),g.qZA(),g.YNc(24,ar,4,5,"a",6),g.qZA(),g.qZA(),g.qZA(),g.TgZ(25,"mat-sidenav-content"),g.TgZ(26,"mat-toolbar",7),g.YNc(27,Sr,3,0,"button",8),g.ALo(28,"async"),g.TgZ(29,"span",9),g._uU(30),g.qZA(),g._UZ(31,"span",10),g.TgZ(32,"button",11),g.NdJ("click",function(){return k.executeOnDisplayBlockly("createIntro")}),g.TgZ(33,"mat-icon"),g._uU(34," help_outline "),g.qZA(),g.qZA(),g.TgZ(35,"button",12),g.TgZ(36,"mat-icon"),g._uU(37," file_download "),g.qZA(),g.qZA(),g.TgZ(38,"mat-menu",null,13),g.YNc(40,Yr,2,2,"span",14),g.TgZ(41,"a",15),g._uU(42," Download HTML"),g.qZA(),g.TgZ(43,"a",16),g._uU(44," Download Linux"),g.qZA(),g.TgZ(45,"a",17),g._uU(46," Download Windows"),g.qZA(),g.TgZ(47,"a",18),g._uU(48," Download IIS"),g.qZA(),g.TgZ(49,"a",19),g._uU(50," Download LocalAPI"),g.qZA(),g.TgZ(51,"a",20),g._uU(52," Download WPF"),g.qZA(),g.TgZ(53,"a",21),g._uU(54," Store"),g.qZA(),g.qZA(),g.TgZ(55,"button",22),g.TgZ(56,"mat-icon"),g._uU(57," source "),g.qZA(),g.qZA(),g.TgZ(58,"mat-menu",null,23),g.TgZ(60,"a",24),g.TgZ(61,"mat-icon"),g._uU(62," star "),g.qZA(),g._uU(63,"Studio "),g.qZA(),g.TgZ(64,"a",24),g.TgZ(65,"mat-icon"),g._uU(66," star_half "),g.qZA(),g._uU(67,"Single "),g.qZA(),g.TgZ(68,"a",4),g.TgZ(69,"mat-icon"),g._uU(70," source "),g.qZA(),g._uU(71," Github"),g.qZA(),g._UZ(72,"mat-divider"),g.TgZ(73,"a",5),g.TgZ(74,"mat-icon"),g._uU(75," https "),g.qZA(),g._uU(76," Demo online"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(77,"div",25),g._UZ(78,"router-outlet"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(79,"footer"),g.TgZ(80,"small"),g._uU(81),g.qZA(),g.TgZ(82,"small"),g._uU(83),g.qZA(),g.qZA()),2&E){const nt=g.MAs(39),Ut=g.MAs(59);g.xp6(1),g.Q6J("mode",g.lcZ(4,19,k.isHandset$)?"over":"side")("opened",!1===g.lcZ(5,21,k.isHandset$)),g.uIk("role",g.lcZ(3,17,k.isHandset$)?"dialog":"navigation"),g.xp6(22),g.hij(" Demos ",k.demoBlocks.length," "),g.xp6(1),g.Q6J("ngForOf",k.demoBlocks),g.xp6(3),g.Q6J("ngIf",g.lcZ(28,23,k.isHandset$)),g.xp6(2),g.s9C("title",k.version),g.xp6(1),g.Oqu(k.title),g.xp6(5),g.Q6J("matMenuTriggerFor",nt),g.xp6(5),g.Q6J("ngIf",k.version!=k.latestVersion),g.xp6(15),g.Q6J("matMenuTriggerFor",Ut),g.xp6(5),g.Q6J("routerLink",g.DdM(25,Tr)),g.xp6(4),g.Q6J("routerLink",g.DdM(26,Ui)),g.xp6(17),g.Oqu(k.footer),g.xp6(2),g.lnq("",k.standalone?"standalone":"browser"," ",k.version," -> ",k.latestVersion,"")}},directives:[Bi,li,Ei,io,t.yS,Oi,s.Hw,Pt.d,An.ib,An.yz,An.yK,v.sg,on,v.O5,r.lW,sr.p6,sr.VK,t.lC],pipes:[v.Ov],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%}.sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-content[_ngcontent-%COMP%]{height:97%;width:100%}.nav-bar[_ngcontent-%COMP%]{height:3%;width:100%}"]}),N})(),Nn=(()=>{class N{constructor(E,k){var nt,Ut;this.titleService=E,this.title="AutoBlocklyApp",console.log(null===(nt=k.settings)||void 0===nt?void 0:nt.title),this.titleService.setTitle((null===(Ut=k.settings)||void 0===Ut?void 0:Ut.title)||"")}}return N.\u0275fac=function(E){return new(E||N)(g.Y36(y.Dx),g.Y36(Kt.d))},N.\u0275cmp=g.Xpm({type:N,selectors:[["app-root"]],decls:1,vars:0,template:function(E,k){1&E&&g._UZ(0,"app-primary-navig")},directives:[On],styles:[""]}),N})();var de=f(40520),Fe=f(91079);let qn=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[Qt.rt,vt.BQ],vt.BQ]}),N})();var Jn=f(91314),Tn=f(99129);let Hs=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[Jn.U8,vt.BQ,Tn.eL],vt.BQ]}),N})(),ha=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[vt.BQ,vt.si],vt.BQ]}),N})(),ea=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[vt.BQ],vt.BQ]}),N})();var Hr=f(17144);let xt=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({}),N})(),Be=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[vt.si,vt.BQ,Hr.Q8,xt],vt.BQ,xt]}),N})();var Ti=f(67322);const zo=new g.OlP("mat-chips-default-options");let z=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({providers:[vt.rD,{provide:zo,useValue:{separatorKeyCodes:[re.K5]}}],imports:[[vt.BQ]]}),N})(),Pn=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[ee.vT]]}),N})(),Qo=(()=>{class N{constructor(){this.changes=new lt.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return N.\u0275fac=function(E){return new(E||N)},N.\u0275prov=g.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();const ra={provide:Qo,deps:[[new g.FiY,new g.tp0,Qo]],useFactory:function(N){return N||new Qo}};let Pa=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({providers:[ra,vt.rD],imports:[[vt.BQ,v.ez,Tn.eL,r.ot,Pn,s.Ps,vt.si],vt.BQ]}),N})();f(50727);var Yl=f(77531);let Jc=(()=>{class N{constructor(){this.changes=new lt.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(E,k){return`${E} \u2013 ${k}`}}return N.\u0275fac=function(E){return new(E||N)},N.\u0275prov=g.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();const Ou={provide:new g.OlP("mat-datepicker-scroll-strategy"),deps:[Jn.aV],useFactory:function(N){return()=>N.scrollStrategies.reposition()}};let Cl=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({providers:[Jc,Ou],imports:[[v.ez,r.ot,Jn.U8,Qt.rt,Tn.eL,vt.BQ],Zt.ZD]}),N})();var tu=f(48966),xs=f(43954);const vu={provide:new g.OlP("mat-select-scroll-strategy"),deps:[Jn.aV],useFactory:function(N){return()=>N.scrollStrategies.reposition()}};let _c=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({providers:[vu],imports:[[v.ez,Jn.U8,vt.Ng,vt.BQ],Zt.ZD,Ti.lN,vt.Ng,vt.BQ]}),N})();const Vl={provide:new g.OlP("mat-tooltip-scroll-strategy"),deps:[Jn.aV],useFactory:function(N){return()=>N.scrollStrategies.reposition({scrollThrottle:20})}};let pl=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({providers:[Vl],imports:[[Qt.rt,v.ez,Jn.U8,vt.BQ],vt.BQ,Zt.ZD]}),N})(),Dl=(()=>{class N{constructor(){this.changes=new lt.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(E,k,nt)=>{if(0==nt||0==k)return`0 of ${nt}`;const Ut=E*k;return`${Ut+1} \u2013 ${Ut<(nt=Math.max(nt,0))?Math.min(Ut+k,nt):Ut+k} of ${nt}`}}}return N.\u0275fac=function(E){return new(E||N)},N.\u0275prov=g.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();const Nu={provide:Dl,deps:[[new g.FiY,new g.tp0,Dl]],useFactory:function(N){return N||new Dl}};let se=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({providers:[Nu],imports:[[v.ez,r.ot,_c,pl,vt.BQ]]}),N})(),Wn=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[v.ez,vt.BQ],vt.BQ]}),N})();var kn=f(20773);let th=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[vt.si,vt.BQ],vt.BQ]}),N})(),Bu=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[v.ez,vt.BQ],vt.BQ]}),N})(),Wl=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({}),N})(),vh=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[Wl,vt.si,vt.BQ,Hr.Q8],Wl,vt.BQ]}),N})();var ua=f(57261);let Sc=(()=>{class N{constructor(){this.changes=new lt.x}}return N.\u0275fac=function(E){return new(E||N)},N.\u0275prov=g.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();const cu={provide:Sc,deps:[[new g.FiY,new g.tp0,Sc]],useFactory:function(N){return N||new Sc}};let kh=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({providers:[cu],imports:[[v.ez,vt.BQ]]}),N})();f(32076),f(61135),f(79307),f(30576),f(39646);let qi=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[Zt.Cl]]}),N})(),nd=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[qi,vt.BQ],vt.BQ]}),N})(),Yu=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({}),N})(),_d=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N}),N.\u0275inj=g.cJS({imports:[[Yu,vt.BQ],vt.BQ]}),N})();var bd=f(33);let yd=(()=>{class N{}return N.\u0275fac=function(E){return new(E||N)},N.\u0275mod=g.oAB({type:N,bootstrap:[Nn]}),N.\u0275inj=g.cJS({providers:[Kt.d,st.v,{provide:g.ip1,useFactory:Qd,deps:[Kt.d],multi:!0}],imports:[[y.b2,bd.k,Bt,e.u5,e.UX,Ae.PW,Bu,r.ot,de.JF,Fe.Bb,qn,Hs,r.ot,ha,ea,Be,z,Pa,Cl,tu.Is,Pt.t,An.To,xs.N6,s.Ps,Yl.c,Di,sr.Tx,vt.XK,se,Wn,kn.Cq,th,vt.si,_c,Ii,Bu,vh,ua.ZX,kh,nd,c.Nh,ti,pl,_d,ti,r.ot,Ii,s.Ps,Di]]}),N})();function Qd(N){return()=>N.Init()}(0,g.G48)(),y.q6().bootstrapModule(yd).catch(N=>console.error(N))},86931:function(H,W,f){var g,e;g=[f(81069)],void 0!==(e=function(t){"use strict";return t}.apply(W,g))&&(H.exports=e)},81069:function(H,W){var g;void 0!==(g=function(){"use strict";var e={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return e.CONNECTING_SNAP_RADIUS=e.SNAP_RADIUS,e.CURRENT_CONNECTION_PREFERENCE=8,e.BUMP_DELAY=250,e.BUMP_RANDOMNESS=10,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.connectionTypes.INPUT_VALUE]=e.connectionTypes.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.OUTPUT_VALUE]=e.connectionTypes.INPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.NEXT_STATEMENT]=e.connectionTypes.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.connectionTypes.PREVIOUS_STATEMENT]=e.connectionTypes.NEXT_STATEMENT,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",e.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",e.utils={},e.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),e.Msg={},e.utils.global.Blockly||(e.utils.global.Blockly={}),e.utils.global.Blockly.Msg||(e.utils.global.Blockly.Msg=e.Msg),e.utils.colour={},e.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var n=e.utils.colour.names[t];if(n||(n="0x"==t.substring(0,2)?"#"+t.substring(2):t,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var r=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return r&&(t=Number(r[1]),n=Number(r[2]),r=Number(r[3]),0<=t&&256>t&&0<=n&&256>n&&0<=r&&256>r)?e.utils.colour.rgbToHex(t,n,r):null},e.utils.colour.rgbToHex=function(t,n,r){return n=t<<16|n<<8|r,16>t?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},e.utils.colour.hexToRgb=function(t){return(t=e.utils.colour.parse(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},e.utils.colour.hsvToHex=function(t,n,r){var s=0,c=0,v=0;if(0==n)v=c=s=r;else{var D=Math.floor(t/60),P=t/60-D;t=r*(1-n);var G=r*(1-n*P);switch(n=r*(1-n*(1-P)),D){case 1:s=G,c=r,v=t;break;case 2:s=t,c=r,v=n;break;case 3:s=t,c=G,v=r;break;case 4:s=n,c=t,v=r;break;case 5:s=r,c=t,v=G;break;case 6:case 0:s=r,c=n,v=t}}return e.utils.colour.rgbToHex(Math.floor(s),Math.floor(c),Math.floor(v))},e.utils.colour.blend=function(t,n,r){return(t=e.utils.colour.parse(t))&&(n=e.utils.colour.parse(n))?(t=e.utils.colour.hexToRgb(t),n=e.utils.colour.hexToRgb(n),e.utils.colour.rgbToHex(Math.round(n[0]+r*(t[0]-n[0])),Math.round(n[1]+r*(t[1]-n[1])),Math.round(n[2]+r*(t[2]-n[2])))):null},e.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},e.utils.Coordinate=function(t,n){this.x=t,this.y=n},e.utils.Coordinate.equals=function(t,n){return t==n||!(!t||!n)&&t.x==n.x&&t.y==n.y},e.utils.Coordinate.distance=function(t,n){var r=t.x-n.x;return t=t.y-n.y,Math.sqrt(r*r+t*t)},e.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.utils.Coordinate.difference=function(t,n){return new e.utils.Coordinate(t.x-n.x,t.y-n.y)},e.utils.Coordinate.sum=function(t,n){return new e.utils.Coordinate(t.x+n.x,t.y+n.y)},e.utils.Coordinate.prototype.clone=function(){return new e.utils.Coordinate(this.x,this.y)},e.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},e.utils.Coordinate.prototype.translate=function(t,n){return this.x+=t,this.y+=n,this},e.utils.Rect=function(t,n,r,s){this.top=t,this.bottom=n,this.left=r,this.right=s},e.utils.Rect.prototype.contains=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},e.utils.string={},e.utils.string.startsWith=function(t,n){return 0==t.lastIndexOf(n,0)},e.utils.string.shortestStringLength=function(t){return t.length?t.reduce(function(n,r){return n.length<r.length?n:r}).length:0},e.utils.string.commonWordPrefix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var r=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var c=t[0][s],v=1;v<t.length;v++)if(c!=t[v][s])return r;" "==c&&(r=s+1)}for(v=1;v<t.length;v++)if((c=t[v][s])&&" "!=c)return r;return n},e.utils.string.commonWordSuffix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var r=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var c=t[0].substr(-s-1,1),v=1;v<t.length;v++)if(c!=t[v].substr(-s-1,1))return r;" "==c&&(r=s+1)}for(v=1;v<t.length;v++)if((c=t[v].charAt(t[v].length-s-1))&&" "!=c)return r;return n},e.utils.string.wrap=function(t,n){t=t.split("\n");for(var r=0;r<t.length;r++)t[r]=e.utils.string.wrapLine_(t[r],n);return t.join("\n")},e.utils.string.wrapLine_=function(t,n){if(t.length<=n)return t;for(var r=t.trim().split(/\s+/),s=0;s<r.length;s++)r[s].length>n&&(n=r[s].length);s=-1/0;var c=1;do{var v=s,D=t;t=[];var P=r.length/c,G=1;for(s=0;s<r.length-1;s++)G<(s+1.5)/P?(G++,t[s]=!0):t[s]=!1;t=e.utils.string.wrapMutate_(r,t,n),s=e.utils.string.wrapScore_(r,t,n),t=e.utils.string.wrapToText_(r,t),c++}while(s>v);return D},e.utils.string.wrapScore_=function(t,n,r){for(var s=[0],c=[],v=0;v<t.length;v++)s[s.length-1]+=t[v].length,!0===n[v]?(s.push(0),c.push(t[v].charAt(t[v].length-1))):!1===n[v]&&s[s.length-1]++;for(t=Math.max.apply(Math,s),v=n=0;v<s.length;v++)n-=2*Math.pow(Math.abs(r-s[v]),1.5),n-=Math.pow(t-s[v],1.5),-1!=".?!".indexOf(c[v])?n+=r/3:-1!=",;)]}".indexOf(c[v])&&(n+=r/4);return 1<s.length&&s[s.length-1]<=s[s.length-2]&&(n+=.5),n},e.utils.string.wrapMutate_=function(t,n,r){for(var c,s=e.utils.string.wrapScore_(t,n,r),v=0;v<n.length-1;v++)if(n[v]!=n[v+1]){var D=[].concat(n);D[v]=!D[v],D[v+1]=!D[v+1];var P=e.utils.string.wrapScore_(t,D,r);P>s&&(s=P,c=D)}return c?e.utils.string.wrapMutate_(t,c,r):n},e.utils.string.wrapToText_=function(t,n){for(var r=[],s=0;s<t.length;s++)r.push(t[s]),void 0!==n[s]&&r.push(n[s]?"\n":" ");return r.join("")},e.utils.Size=function(t,n){this.width=t,this.height=n},e.utils.Size.equals=function(t,n){return t==n||!(!t||!n)&&t.width==n.width&&t.height==n.height},e.utils.style={},e.utils.style.getSize=function(t){if("none"!=e.utils.style.getStyle_(t,"display"))return e.utils.style.getSizeWithDisplay_(t);var n=t.style,r=n.display,s=n.visibility,c=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var v=t.offsetWidth;return t=t.offsetHeight,n.display=r,n.position=c,n.visibility=s,new e.utils.Size(v,t)},e.utils.style.getSizeWithDisplay_=function(t){return new e.utils.Size(t.offsetWidth,t.offsetHeight)},e.utils.style.getStyle_=function(t,n){return e.utils.style.getComputedStyle(t,n)||e.utils.style.getCascadedStyle(t,n)||t.style&&t.style[n]},e.utils.style.getComputedStyle=function(t,n){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[n]||t.getPropertyValue(n))||""},e.utils.style.getCascadedStyle=function(t,n){return t.currentStyle?t.currentStyle[n]:null},e.utils.style.getPageOffset=function(t){var n=new e.utils.Coordinate(0,0);t=t.getBoundingClientRect();var r=document.documentElement;return r=new e.utils.Coordinate(window.pageXOffset||r.scrollLeft,window.pageYOffset||r.scrollTop),n.x=t.left+r.x,n.y=t.top+r.y,n},e.utils.style.getViewportPageOffset=function(){var t=document.body,n=document.documentElement;return new e.utils.Coordinate(t.scrollLeft||n.scrollLeft,t.scrollTop||n.scrollTop)},e.utils.style.setElementShown=function(t,n){t.style.display=n?"":"none"},e.utils.style.isRightToLeft=function(t){return"rtl"==e.utils.style.getStyle_(t,"direction")},e.utils.style.getBorderBox=function(t){var n=e.utils.style.getComputedStyle(t,"borderLeftWidth"),r=e.utils.style.getComputedStyle(t,"borderRightWidth"),s=e.utils.style.getComputedStyle(t,"borderTopWidth");return t=e.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(s),right:parseFloat(r),bottom:parseFloat(t),left:parseFloat(n)}},e.utils.style.scrollIntoContainerView=function(t,n,r){t=e.utils.style.getContainerOffsetToScrollInto(t,n,r),n.scrollLeft=t.x,n.scrollTop=t.y},e.utils.style.getContainerOffsetToScrollInto=function(t,n,r){var s=e.utils.style.getPageOffset(t),c=e.utils.style.getPageOffset(n),v=e.utils.style.getBorderBox(n),D=s.x-c.x-v.left;return s=s.y-c.y-v.top,c=e.utils.style.getSizeWithDisplay_(t),t=n.clientWidth-c.width,c=n.clientHeight-c.height,v=n.scrollLeft,n=n.scrollTop,r?(v+=D-t/2,n+=s-c/2):(v+=Math.min(D,Math.max(D-t,0)),n+=Math.min(s,Math.max(s-c,0))),new e.utils.Coordinate(v,n)},e.utils.userAgent={},function(t){function n(s){return-1!=r.indexOf(s.toUpperCase())}e.utils.userAgent.raw=t;var r=e.utils.userAgent.raw.toUpperCase();e.utils.userAgent.IE=n("Trident")||n("MSIE"),e.utils.userAgent.EDGE=n("Edge"),e.utils.userAgent.JAVA_FX=n("JavaFX"),e.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!e.utils.userAgent.EDGE,e.utils.userAgent.WEBKIT=n("WebKit")&&!e.utils.userAgent.EDGE,e.utils.userAgent.GECKO=n("Gecko")&&!e.utils.userAgent.WEBKIT&&!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,e.utils.userAgent.ANDROID=n("Android"),t=e.utils.global.navigator&&e.utils.global.navigator.maxTouchPoints,e.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<t,e.utils.userAgent.IPOD=n("iPod"),e.utils.userAgent.IPHONE=n("iPhone")&&!e.utils.userAgent.IPAD&&!e.utils.userAgent.IPOD,e.utils.userAgent.MAC=n("Macintosh"),e.utils.userAgent.TABLET=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),e.utils.userAgent.MOBILE=!e.utils.userAgent.TABLET&&(e.utils.userAgent.IPOD||e.utils.userAgent.IPHONE||e.utils.userAgent.ANDROID||n("IEMobile"))}(e.utils.global.navigator&&e.utils.global.navigator.userAgent||""),e.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},e.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},e.utils.getRelativeXY=function(t){var n=new e.utils.Coordinate(0,0),r=t.getAttribute("x");return r&&(n.x=parseInt(r,10)),(r=t.getAttribute("y"))&&(n.y=parseInt(r,10)),(r=(r=t.getAttribute("transform"))&&r.match(e.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(r[1]),r[3]&&(n.y+=Number(r[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(e.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(t[1]),t[3]&&(n.y+=Number(t[3]))),n},e.utils.getInjectionDivXY_=function(t){for(var n=0,r=0;t;){var s=e.utils.getRelativeXY(t);if(n+=s.x,r+=s.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new e.utils.Coordinate(n,r)},e.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,e.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,e.utils.isRightButton=function(t){return!(!t.ctrlKey||!e.utils.userAgent.MAC)||2==t.button},e.utils.mouseToSvg=function(t,n,r){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,r||(r=n.getScreenCTM().inverse()),s.matrixTransform(r)},e.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*e.LINE_MODE_MULTIPLIER,y:t.deltaY*e.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*e.PAGE_MODE_MULTIPLIER,y:t.deltaY*e.PAGE_MODE_MULTIPLIER}}},e.utils.tokenizeInterpolation=function(t){return e.utils.tokenizeInterpolation_(t,!0)},e.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=e.utils.tokenizeInterpolation_(t,!1)).length?String(t[0]):""},e.utils.checkMessageReferences=function(t){for(var n=!0,r=e.Msg,s=t.match(/%{BKY_[A-Z]\w*}/gi),c=0;c<s.length;c++)null==r[s[c].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+s[c]+" in "+t),n=!1);return n},e.utils.tokenizeInterpolation_=function(t,n){var r=[],s=t.split("");s.push("");var c=0;t=[];for(var v=null,D=0;D<s.length;D++){var P=s[D];0==c?"%"==P?((P=t.join(""))&&r.push(P),t.length=0,c=1):t.push(P):1==c?"%"==P?(t.push(P),c=0):n&&"0"<=P&&"9">=P?(c=2,v=P,(P=t.join(""))&&r.push(P),t.length=0):"{"==P?c=3:(t.push("%",P),c=0):2==c?"0"<=P&&"9">=P?v+=P:(r.push(parseInt(v,10)),D--,c=0):3==c&&(""==P?(t.splice(0,0,"%{"),D--,c=0):"}"!=P?t.push(P):(c=t.join(""),/[A-Z]\w*/i.test(c)?(P=c.toUpperCase(),(P=e.utils.string.startsWith(P,"BKY_")?P.substring(4):null)&&P in e.Msg?"string"==typeof(c=e.Msg[P])?Array.prototype.push.apply(r,e.utils.tokenizeInterpolation_(c,n)):r.push(n?String(c):c):r.push("%{"+c+"}")):r.push("%{"+c+"}"),c=t.length=0))}for((P=t.join(""))&&r.push(P),n=[],D=t.length=0;D<r.length;++D)"string"==typeof r[D]?t.push(r[D]):((P=t.join(""))&&n.push(P),t.length=0,n.push(r[D]));return(P=t.join(""))&&n.push(P),t.length=0,n},e.utils.genUid=function(){for(var t=e.utils.genUid.soup_.length,n=[],r=0;20>r;r++)n[r]=e.utils.genUid.soup_.charAt(Math.random()*t);return n.join("")},e.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.utils.is3dSupported=function(){if(void 0!==e.utils.is3dSupported.cached_)return e.utils.is3dSupported.cached_;if(!e.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),n="none",r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var s in document.body.insertBefore(t,null),r)if(void 0!==t.style[s]){if(t.style[s]="translate3d(1px,1px,1px)",!(n=e.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(r[s])}return document.body.removeChild(t),e.utils.is3dSupported.cached_="none"!==n,e.utils.is3dSupported.cached_},e.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),t())},10)},e.utils.getViewportBBox=function(){var t=e.utils.style.getViewportPageOffset();return new e.utils.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},e.utils.arrayRemove=function(t,n){return-1!=(n=t.indexOf(n))&&(t.splice(n,1),!0)},e.utils.getDocumentScroll=function(){var t=document.documentElement,n=window;return e.utils.userAgent.IE&&n.pageYOffset!=t.scrollTop?new e.utils.Coordinate(t.scrollLeft,t.scrollTop):new e.utils.Coordinate(n.pageXOffset||t.scrollLeft,n.pageYOffset||t.scrollTop)},e.utils.getBlockTypeCounts=function(t,n){var r=Object.create(null),s=t.getDescendants(!0);for(n&&(t=t.getNextBlock())&&(t=s.indexOf(t),s.splice(t,s.length-t)),t=0;n=s[t];t++)r[n.type]?r[n.type]++:r[n.type]=1;return r},e.utils.screenToWsCoordinates=function(t,n){var r=n.x;n=n.y;var s=t.getInjectionDiv().getBoundingClientRect();return r=new e.utils.Coordinate(r-s.left,n-s.top),n=t.getOriginOffsetInPixels(),e.utils.Coordinate.difference(r,n).scale(1/t.scale)},e.utils.parseBlockColour=function(t){var n="string"==typeof t?e.utils.replaceMessageReferences(t):t,r=Number(n);if(!isNaN(r)&&0<=r&&360>=r)return{hue:r,hex:e.utils.colour.hsvToHex(r,e.HSV_SATURATION,255*e.HSV_VALUE)};if(r=e.utils.colour.parse(n))return{hue:null,hex:r};throw r='Invalid colour: "'+n+'"',t!=n&&(r+=' (from "'+t+'")'),Error(r)},e.Touch={},e.Touch.TOUCH_ENABLED="ontouchstart"in e.utils.global||!!(e.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!e.utils.global.navigator||!e.utils.global.navigator.maxTouchPoints&&!e.utils.global.navigator.msMaxTouchPoints),e.Touch.touchIdentifier_=null,e.Touch.TOUCH_MAP={},e.utils.global.PointerEvent?e.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:e.Touch.TOUCH_ENABLED&&(e.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),e.longPid_=0,e.longStart=function(t,n){e.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(e.longPid_=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n&&n.handleRightClick(t)},e.LONGPRESS))},e.longStop_=function(){e.longPid_&&(clearTimeout(e.longPid_),e.longPid_=0)},e.Touch.clearTouchIdentifier=function(){e.Touch.touchIdentifier_=null},e.Touch.shouldHandleEvent=function(t){return!e.Touch.isMouseOrTouchEvent(t)||e.Touch.checkTouchIdentifier(t)},e.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},e.Touch.checkTouchIdentifier=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);return null!=e.Touch.touchIdentifier_?e.Touch.touchIdentifier_==n:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(e.Touch.touchIdentifier_=n,!0)},e.Touch.setClientFromTouch=function(t){if(e.utils.string.startsWith(t.type,"touch")){var n=t.changedTouches[0];t.clientX=n.clientX,t.clientY=n.clientY}},e.Touch.isMouseOrTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"mouse")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.isTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.splitEventByTouches=function(t){var n=[];if(t.changedTouches)for(var r=0;r<t.changedTouches.length;r++)n[r]={type:t.type,changedTouches:[t.changedTouches[r]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else n.push(t);return n},e.browserEvents={},e.browserEvents.conditionalBind=function(t,n,r,s,c,v){var D=!1,P=function(Ft){var gt=!c;Ft=e.Touch.splitEventByTouches(Ft);for(var Bt,wt=0;Bt=Ft[wt];wt++)(!gt||e.Touch.shouldHandleEvent(Bt))&&(e.Touch.setClientFromTouch(Bt),r?s.call(r,Bt):s(Bt),D=!0)},G=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var q,it=0;q=e.Touch.TOUCH_MAP[n][it];it++)t.addEventListener(q,P,!1),G.push([t,q,P]);else if(t.addEventListener(n,P,!1),G.push([t,n,P]),n in e.Touch.TOUCH_MAP){var bt=function(Ft){P(Ft),D&&!v&&Ft.preventDefault()};for(it=0;q=e.Touch.TOUCH_MAP[n][it];it++)t.addEventListener(q,bt,!1),G.push([t,q,bt])}return G},e.browserEvents.bind=function(t,n,r,s){var c=function(it){r?s.call(r,it):s(it)},v=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var P,D=0;P=e.Touch.TOUCH_MAP[n][D];D++)t.addEventListener(P,c,!1),v.push([t,P,c]);else if(t.addEventListener(n,c,!1),v.push([t,n,c]),n in e.Touch.TOUCH_MAP){var G=function(it){if(it.changedTouches&&1==it.changedTouches.length){var q=it.changedTouches[0];it.clientX=q.clientX,it.clientY=q.clientY}c(it),it.preventDefault()};for(D=0;P=e.Touch.TOUCH_MAP[n][D];D++)t.addEventListener(P,G,!1),v.push([t,P,G])}return v},e.browserEvents.unbind=function(t){for(;t.length;){var n=t.pop(),r=n[2];n[0].removeEventListener(n[1],r,!1)}return r},e.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},e.ComponentManager.prototype.addComponent=function(t,n){var r=t.component.id;if(!n&&this.componentData_[r])throw Error('Plugin "'+r+'" with capabilities "'+this.componentData_[r].capabilities+'" already added.');this.componentData_[r]=t,n=[];for(var s=0;s<t.capabilities.length;s++){var c=String(t.capabilities[s]).toLowerCase();n.push(c),void 0===this.capabilityToComponentIds_[c]?this.capabilityToComponentIds_[c]=[r]:this.capabilityToComponentIds_[c].push(r)}this.componentData_[r].capabilities=n},e.ComponentManager.prototype.removeComponent=function(t){var n=this.componentData_[t];if(n){for(var r=0;r<n.capabilities.length;r++){var s=String(n.capabilities[r]).toLowerCase();this.capabilityToComponentIds_[s].splice(this.capabilityToComponentIds_[s].indexOf(t),1)}delete this.componentData_[t]}},e.ComponentManager.prototype.addCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot add capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?console.warn('Plugin "'+t+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[t].capabilities.push(n),this.capabilityToComponentIds_[n].push(t))},e.ComponentManager.prototype.removeCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?(n=String(n).toLowerCase(),this.componentData_[t].capabilities.splice(this.componentData_[t].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(t),1)):console.warn('Plugin "'+t+"doesn't have capability \""+n+'" to remove')},e.ComponentManager.prototype.hasCapability=function(t,n){return n=String(n).toLowerCase(),-1!==this.componentData_[t].capabilities.indexOf(n)},e.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},e.ComponentManager.prototype.getComponents=function(t,n){if(t=String(t).toLowerCase(),!(t=this.capabilityToComponentIds_[t]))return[];var r=[];if(n){var s=[],c=this.componentData_;t.forEach(function(v){s.push(c[v])}),s.sort(function(v,D){return v.weight-D.weight}),s.forEach(function(v){r.push(v.component)})}else c=this.componentData_,t.forEach(function(v){r.push(c[v].component)});return r},e.ComponentManager.Capability=function(t){this.name_=t},e.ComponentManager.Capability.prototype.toString=function(){return this.name_},e.ComponentManager.Capability.POSITIONABLE=new e.ComponentManager.Capability("positionable"),e.ComponentManager.Capability.DRAG_TARGET=new e.ComponentManager.Capability("drag_target"),e.ComponentManager.Capability.DELETE_AREA=new e.ComponentManager.Capability("delete_area"),e.ComponentManager.Capability.AUTOHIDEABLE=new e.ComponentManager.Capability("autohideable"),e.utils.Svg=function(t){this.tagName_=t},e.utils.Svg.prototype.toString=function(){return this.tagName_},e.utils.Svg.ANIMATE=new e.utils.Svg("animate"),e.utils.Svg.CIRCLE=new e.utils.Svg("circle"),e.utils.Svg.CLIPPATH=new e.utils.Svg("clipPath"),e.utils.Svg.DEFS=new e.utils.Svg("defs"),e.utils.Svg.FECOMPOSITE=new e.utils.Svg("feComposite"),e.utils.Svg.FECOMPONENTTRANSFER=new e.utils.Svg("feComponentTransfer"),e.utils.Svg.FEFLOOD=new e.utils.Svg("feFlood"),e.utils.Svg.FEFUNCA=new e.utils.Svg("feFuncA"),e.utils.Svg.FEGAUSSIANBLUR=new e.utils.Svg("feGaussianBlur"),e.utils.Svg.FEPOINTLIGHT=new e.utils.Svg("fePointLight"),e.utils.Svg.FESPECULARLIGHTING=new e.utils.Svg("feSpecularLighting"),e.utils.Svg.FILTER=new e.utils.Svg("filter"),e.utils.Svg.FOREIGNOBJECT=new e.utils.Svg("foreignObject"),e.utils.Svg.G=new e.utils.Svg("g"),e.utils.Svg.IMAGE=new e.utils.Svg("image"),e.utils.Svg.LINE=new e.utils.Svg("line"),e.utils.Svg.PATH=new e.utils.Svg("path"),e.utils.Svg.PATTERN=new e.utils.Svg("pattern"),e.utils.Svg.POLYGON=new e.utils.Svg("polygon"),e.utils.Svg.RECT=new e.utils.Svg("rect"),e.utils.Svg.SVG=new e.utils.Svg("svg"),e.utils.Svg.TEXT=new e.utils.Svg("text"),e.utils.Svg.TSPAN=new e.utils.Svg("tspan"),e.utils.dom={},e.utils.dom.SVG_NS="http://www.w3.org/2000/svg",e.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",e.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",e.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},e.utils.dom.cacheWidths_=null,e.utils.dom.cacheReference_=0,e.utils.dom.canvasContext_=null,e.utils.dom.createSvgElement=function(t,n,r){for(var s in t=document.createElementNS(e.utils.dom.SVG_NS,String(t)),n)t.setAttribute(s,n[s]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),r&&r.appendChild(t),t},e.utils.dom.addClass=function(t,n){var r=t.getAttribute("class")||"";return-1==(" "+r+" ").indexOf(" "+n+" ")&&(r&&(r+=" "),t.setAttribute("class",r+n),!0)},e.utils.dom.removeClasses=function(t,n){n=n.split(" ");for(var r=0;r<n.length;r++)e.utils.dom.removeClass(t,n[r])},e.utils.dom.removeClass=function(t,n){var r=t.getAttribute("class");if(-1==(" "+r+" ").indexOf(" "+n+" "))return!1;r=r.split(/\s+/);for(var s=0;s<r.length;s++)r[s]&&r[s]!=n||(r.splice(s,1),s--);return r.length?t.setAttribute("class",r.join(" ")):t.removeAttribute("class"),!0},e.utils.dom.hasClass=function(t,n){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+n+" ")},e.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},e.utils.dom.insertAfter=function(t,n){var r=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");r?n.insertBefore(t,r):n.appendChild(t)},e.utils.dom.containsNode=function(t,n){return!!(t.compareDocumentPosition(n)&e.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},e.utils.dom.setCssTransform=function(t,n){t.style.transform=n,t.style["-webkit-transform"]=n},e.utils.dom.startTextWidthCache=function(){e.utils.dom.cacheReference_++,e.utils.dom.cacheWidths_||(e.utils.dom.cacheWidths_=Object.create(null))},e.utils.dom.stopTextWidthCache=function(){e.utils.dom.cacheReference_--,e.utils.dom.cacheReference_||(e.utils.dom.cacheWidths_=null)},e.utils.dom.getTextWidth=function(t){var r,n=t.textContent+"\n"+t.className.baseVal;if(e.utils.dom.cacheWidths_&&(r=e.utils.dom.cacheWidths_[n]))return r;try{r=e.utils.userAgent.IE||e.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(s){return 8*t.textContent.length}return e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[n]=r),r},e.utils.dom.getFastTextWidth=function(t,n,r,s){return e.utils.dom.getFastTextWidthWithSizeString(t,n+"pt",r,s)},e.utils.dom.getFastTextWidthWithSizeString=function(t,n,r,s){var v,c=t.textContent;return t=c+"\n"+t.className.baseVal,e.utils.dom.cacheWidths_&&(v=e.utils.dom.cacheWidths_[t])||(e.utils.dom.canvasContext_||((v=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(v),e.utils.dom.canvasContext_=v.getContext("2d")),e.utils.dom.canvasContext_.font=r+" "+n+" "+s,v=e.utils.dom.canvasContext_.measureText(c).width,e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[t]=v)),v},e.utils.dom.measureFontMetrics=function(t,n,r,s){var c=document.createElement("span");c.style.font=r+" "+n+" "+s,c.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(c),n.appendChild(t),document.body.appendChild(n);try{r={},n.style.alignItems="baseline",r.baseline=t.offsetTop-c.offsetTop,n.style.alignItems="flex-end",r.height=t.offsetTop-c.offsetTop}finally{document.body.removeChild(n)}return r},e.utils.math={},e.utils.math.toRadians=function(t){return t*Math.PI/180},e.utils.math.toDegrees=function(t){return 180*t/Math.PI},e.utils.math.clamp=function(t,n,r){if(r<t){var s=r;r=t,t=s}return Math.max(t,Math.min(n,r))},e.DropDownDiv=function(){},e.DropDownDiv.boundsElement_=null,e.DropDownDiv.owner_=null,e.DropDownDiv.positionToField_=null,e.DropDownDiv.ARROW_SIZE=16,e.DropDownDiv.BORDER_SIZE=1,e.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,e.DropDownDiv.PADDING_Y=16,e.DropDownDiv.ANIMATION_TIME=.25,e.DropDownDiv.animateOutTimer_=null,e.DropDownDiv.onHide_=null,e.DropDownDiv.rendererClassName_="",e.DropDownDiv.themeClassName_="",e.DropDownDiv.createDom=function(){if(!e.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",(e.parentContainer||document.body).appendChild(t),e.DropDownDiv.DIV_=t;var n=document.createElement("div");n.className="blocklyDropDownContent",t.appendChild(n),e.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(n),e.DropDownDiv.arrow_=n,e.DropDownDiv.DIV_.style.opacity=0,e.DropDownDiv.DIV_.style.transition="transform "+e.DropDownDiv.ANIMATION_TIME+"s, opacity "+e.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",function(){e.utils.dom.addClass(t,"blocklyFocused")}),t.addEventListener("focusout",function(){e.utils.dom.removeClass(t,"blocklyFocused")})}},e.DropDownDiv.setBoundsElement=function(t){e.DropDownDiv.boundsElement_=t},e.DropDownDiv.getContentDiv=function(){return e.DropDownDiv.content_},e.DropDownDiv.clearContent=function(){e.DropDownDiv.content_.textContent="",e.DropDownDiv.content_.style.width=""},e.DropDownDiv.setColour=function(t,n){e.DropDownDiv.DIV_.style.backgroundColor=t,e.DropDownDiv.DIV_.style.borderColor=n},e.DropDownDiv.showPositionedByBlock=function(t,n,r,s){return e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfBlock_(n),t,r,s)},e.DropDownDiv.showPositionedByField=function(t,n,r){return e.DropDownDiv.positionToField_=!0,e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfField_(t),t,n,r)},e.DropDownDiv.getScaledBboxOfBlock_=function(t){var n=t.getSvgRoot(),r=n.getBBox(),s=t.workspace.scale;return t=r.height*s,r=r.width*s,n=e.utils.style.getPageOffset(n),new e.utils.Rect(n.y,n.y+t,n.x,n.x+r)},e.DropDownDiv.getScaledBboxOfField_=function(t){return t=t.getScaledBBox(),new e.utils.Rect(t.top,t.bottom,t.left,t.right)},e.DropDownDiv.showPositionedByRect_=function(t,n,r,s){var c=t.left+(t.right-t.left)/2,v=t.bottom;t=t.top,s&&(t+=s);for(var D=(s=n.getSourceBlock()).workspace;D.options.parentWorkspace;)D=D.options.parentWorkspace;return e.DropDownDiv.setBoundsElement(D.getParentSvg().parentNode),e.DropDownDiv.show(n,s.RTL,c,v,c,t,r)},e.DropDownDiv.show=function(t,n,r,s,c,v,D){return e.DropDownDiv.owner_=t,e.DropDownDiv.onHide_=D||null,(t=e.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=e.getMainWorkspace(),e.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),e.DropDownDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.DropDownDiv.rendererClassName_),e.utils.dom.addClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.positionInternal_(r,s,c,v)},e.DropDownDiv.getBoundsInfo_=function(){var t=e.utils.style.getPageOffset(e.DropDownDiv.boundsElement_),n=e.utils.style.getSize(e.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+n.width,top:t.y,bottom:t.y+n.height,width:n.width,height:n.height}},e.DropDownDiv.getPositionMetrics_=function(t,n,r,s){var c=e.DropDownDiv.getBoundsInfo_(),v=e.utils.style.getSize(e.DropDownDiv.DIV_);return n+v.height<c.bottom?e.DropDownDiv.getPositionBelowMetrics_(t,n,c,v):s-v.height>c.top?e.DropDownDiv.getPositionAboveMetrics_(r,s,c,v):n+v.height<document.documentElement.clientHeight?e.DropDownDiv.getPositionBelowMetrics_(t,n,c,v):s-v.height>document.documentElement.clientTop?e.DropDownDiv.getPositionAboveMetrics_(r,s,c,v):e.DropDownDiv.getPositionTopOfPageMetrics_(t,c,v)},e.DropDownDiv.getPositionBelowMetrics_=function(t,n,r,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,r.left,r.right,s.width)).divX,initialY:n,finalX:t.divX,finalY:n+e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(e.DropDownDiv.ARROW_SIZE/2+e.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},e.DropDownDiv.getPositionAboveMetrics_=function(t,n,r,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,r.left,r.right,s.width)).divX,initialY:n-s.height,finalX:t.divX,finalY:n-s.height-e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:s.height-2*e.DropDownDiv.BORDER_SIZE-e.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},e.DropDownDiv.getPositionTopOfPageMetrics_=function(t,n,r){return{initialX:(t=e.DropDownDiv.getPositionX(t,n.left,n.right,r.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},e.DropDownDiv.getPositionX=function(t,n,r,s){var c=t;return t=e.utils.math.clamp(n,t-s/2,r-s),{arrowX:s=e.utils.math.clamp(n=e.DropDownDiv.ARROW_HORIZONTAL_PADDING,(c-=e.DropDownDiv.ARROW_SIZE/2)-t,s-n-e.DropDownDiv.ARROW_SIZE),divX:t}},e.DropDownDiv.isVisible=function(){return!!e.DropDownDiv.owner_},e.DropDownDiv.hideIfOwner=function(t,n){return e.DropDownDiv.owner_===t&&(n?e.DropDownDiv.hideWithoutAnimation():e.DropDownDiv.hide(),!0)},e.DropDownDiv.hide=function(){var t=e.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,e.DropDownDiv.animateOutTimer_=setTimeout(function(){e.DropDownDiv.hideWithoutAnimation()},1e3*e.DropDownDiv.ANIMATION_TIME),e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null)},e.DropDownDiv.hideWithoutAnimation=function(){if(e.DropDownDiv.isVisible()){e.DropDownDiv.animateOutTimer_&&clearTimeout(e.DropDownDiv.animateOutTimer_);var t=e.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null),e.DropDownDiv.clearContent(),e.DropDownDiv.owner_=null,e.DropDownDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.rendererClassName_),e.DropDownDiv.rendererClassName_=""),e.DropDownDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.DropDownDiv.positionInternal_=function(t,n,r,s){(t=e.DropDownDiv.getPositionMetrics_(t,n,r,s)).arrowVisible?(e.DropDownDiv.arrow_.style.display="",e.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",e.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):e.DropDownDiv.arrow_.style.display="none",n=Math.floor(t.initialX),r=Math.floor(t.initialY),s=Math.floor(t.finalX);var c=Math.floor(t.finalY),v=e.DropDownDiv.DIV_;return v.style.left=n+"px",v.style.top=r+"px",v.style.display="block",v.style.opacity=1,v.style.transform="translate("+(s-n)+"px,"+(c-r)+"px)",!!t.arrowAtTop},e.DropDownDiv.repositionForWindowResize=function(){if(e.DropDownDiv.owner_){var t=e.DropDownDiv.owner_,n=t.getSourceBlock();t=e.DropDownDiv.positionToField_?e.DropDownDiv.getScaledBboxOfField_(t):e.DropDownDiv.getScaledBboxOfBlock_(n),e.DropDownDiv.positionInternal_(n=t.left+(t.right-t.left)/2,t.bottom,n,t.top)}else e.DropDownDiv.hide()},e.registry={},e.registry.typeMap_=Object.create(null),e.registry.DEFAULT="default",e.registry.Type=function(t){this.name_=t},e.registry.Type.prototype.toString=function(){return this.name_},e.registry.Type.CONNECTION_CHECKER=new e.registry.Type("connectionChecker"),e.registry.Type.CURSOR=new e.registry.Type("cursor"),e.registry.Type.EVENT=new e.registry.Type("event"),e.registry.Type.FIELD=new e.registry.Type("field"),e.registry.Type.RENDERER=new e.registry.Type("renderer"),e.registry.Type.TOOLBOX=new e.registry.Type("toolbox"),e.registry.Type.THEME=new e.registry.Type("theme"),e.registry.Type.TOOLBOX_ITEM=new e.registry.Type("toolboxItem"),e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new e.registry.Type("flyoutsVerticalToolbox"),e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new e.registry.Type("flyoutsHorizontalToolbox"),e.registry.Type.METRICS_MANAGER=new e.registry.Type("metricsManager"),e.registry.Type.BLOCK_DRAGGER=new e.registry.Type("blockDragger"),e.registry.register=function(t,n,r,s){if(!(t instanceof e.registry.Type)&&"string"!=typeof t||""==String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!r)throw Error("Can not register a null value");var c=e.registry.typeMap_[t];if(c||(c=e.registry.typeMap_[t]=Object.create(null)),e.registry.validate_(t,r),!s&&c[n])throw Error('Name "'+n+'" with type "'+t+'" already registered.');c[n]=r},e.registry.validate_=function(t,n){if(t===String(e.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+t+'" must have a fromJson function')},e.registry.unregister=function(t,n){t=String(t).toLowerCase(),n=n.toLowerCase();var r=e.registry.typeMap_[t];r&&r[n]?delete e.registry.typeMap_[t][n]:console.warn("Unable to unregister ["+n+"]["+t+"] from the registry.")},e.registry.getItem_=function(t,n,r){t=String(t).toLowerCase(),n=n.toLowerCase();var s=e.registry.typeMap_[t];if(!s||!s[n]){if(n="Unable to find ["+n+"]["+t+"] in the registry.",r)throw Error(n+" You must require or register a "+t+" plugin.");return console.warn(n),null}return s[n]},e.registry.hasItem=function(t,n){return t=String(t).toLowerCase(),n=n.toLowerCase(),!!(t=e.registry.typeMap_[t])&&!!t[n]},e.registry.getClass=function(t,n,r){return e.registry.getItem_(t,n,r)},e.registry.getObject=function(t,n,r){return e.registry.getItem_(t,n,r)},e.registry.getClassFromOptions=function(t,n,r){return"function"==typeof(n=n.plugins[t.toString()]||e.registry.DEFAULT)?n:e.registry.getClass(t,n,r)},e.Events={},e.Events.group_="",e.Events.recordUndo=!0,e.Events.disabled_=0,e.Events.CREATE="create",e.Events.BLOCK_CREATE=e.Events.CREATE,e.Events.DELETE="delete",e.Events.BLOCK_DELETE=e.Events.DELETE,e.Events.CHANGE="change",e.Events.BLOCK_CHANGE=e.Events.CHANGE,e.Events.MOVE="move",e.Events.BLOCK_MOVE=e.Events.MOVE,e.Events.VAR_CREATE="var_create",e.Events.VAR_DELETE="var_delete",e.Events.VAR_RENAME="var_rename",e.Events.UI="ui",e.Events.BLOCK_DRAG="drag",e.Events.SELECTED="selected",e.Events.CLICK="click",e.Events.MARKER_MOVE="marker_move",e.Events.BUBBLE_OPEN="bubble_open",e.Events.TRASHCAN_OPEN="trashcan_open",e.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.Events.THEME_CHANGE="theme_change",e.Events.VIEWPORT_CHANGE="viewport_change",e.Events.COMMENT_CREATE="comment_create",e.Events.COMMENT_DELETE="comment_delete",e.Events.COMMENT_CHANGE="comment_change",e.Events.COMMENT_MOVE="comment_move",e.Events.FINISHED_LOADING="finished_loading",e.Events.BUMP_EVENTS=[e.Events.BLOCK_CREATE,e.Events.BLOCK_MOVE,e.Events.COMMENT_CREATE,e.Events.COMMENT_MOVE],e.Events.FIRE_QUEUE_=[],e.Events.fire=function(t){e.Events.isEnabled()&&(e.Events.FIRE_QUEUE_.length||setTimeout(e.Events.fireNow_,0),e.Events.FIRE_QUEUE_.push(t))},e.Events.fireNow_=function(){for(var r,t=e.Events.filter(e.Events.FIRE_QUEUE_,!0),n=e.Events.FIRE_QUEUE_.length=0;r=t[n];n++)if(r.workspaceId){var s=e.Workspace.getById(r.workspaceId);s&&s.fireChangeListener(r)}},e.Events.filter=function(t,n){t=t.slice(),n||t.reverse();for(var v,r=[],s=Object.create(null),c=0;v=t[c];c++)if(!v.isNull()){var D=[v.isUiEvent?e.Events.UI:v.type,v.blockId,v.workspaceId].join(" "),P=s[D],G=P?P.event:null;P?v.type==e.Events.MOVE&&P.index==c-1?(G.newParentId=v.newParentId,G.newInputName=v.newInputName,G.newCoordinate=v.newCoordinate,P.index=c):v.type==e.Events.CHANGE&&v.element==G.element&&v.name==G.name?G.newValue=v.newValue:v.type==e.Events.VIEWPORT_CHANGE?(G.viewTop=v.viewTop,G.viewLeft=v.viewLeft,G.scale=v.scale,G.oldScale=v.oldScale):(v.type!=e.Events.CLICK||G.type!=e.Events.BUBBLE_OPEN)&&(s[D]={event:v,index:c},r.push(v)):(s[D]={event:v,index:c},r.push(v))}for(t=r.filter(function(it){return!it.isNull()}),n||t.reverse(),c=1;v=t[c];c++)v.type==e.Events.CHANGE&&"mutation"==v.element&&t.unshift(t.splice(c,1)[0]);return t},e.Events.clearPendingUndo=function(){for(var n,t=0;n=e.Events.FIRE_QUEUE_[t];t++)n.recordUndo=!1},e.Events.disable=function(){e.Events.disabled_++},e.Events.enable=function(){e.Events.disabled_--},e.Events.isEnabled=function(){return 0==e.Events.disabled_},e.Events.getGroup=function(){return e.Events.group_},e.Events.setGroup=function(t){e.Events.group_="boolean"==typeof t?t?e.utils.genUid():"":t},e.Events.getDescendantIds=function(t){var n=[];t=t.getDescendants(!1);for(var s,r=0;s=t[r];r++)n[r]=s.id;return n},e.Events.fromJson=function(t,n){var r=e.Events.get(t.type);if(!r)throw Error("Unknown event type.");return(r=new r).fromJson(t),r.workspaceId=n.id,r},e.Events.get=function(t){return e.registry.getClass(e.registry.Type.EVENT,t)},e.Events.disableOrphans=function(t){if((t.type==e.Events.MOVE||t.type==e.Events.CREATE)&&t.workspaceId){var n=e.Workspace.getById(t.workspaceId),r=n.getBlockById(t.blockId);if(r){t=e.Events.recordUndo;try{e.Events.recordUndo=!1;var s=r.getParent();if(s&&s.isEnabled()){var v,c=r.getDescendants(!1);for(n=0;v=c[n];n++)v.setEnabled(!0)}else if((r.outputConnection||r.previousConnection)&&!n.isDragging())do{r.setEnabled(!1),r=r.getNextBlock()}while(r)}finally{e.Events.recordUndo=t}}}},e.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.Events.Abstract.prototype.isUiEvent=!1,e.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},e.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},e.Events.Abstract.prototype.isNull=function(){return!1},e.Events.Abstract.prototype.run=function(t){},e.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=e.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},e.utils.object={},e.utils.object.inherits=function(t,n){t.superClass_=n.prototype,t.prototype=Object.create(n.prototype),t.prototype.constructor=t},e.utils.object.mixin=function(t,n){for(var r in n)t[r]=n[r]},e.utils.object.deepMerge=function(t,n){for(var r in n)t[r]=null!=n[r]&&"object"==typeof n[r]?e.utils.object.deepMerge(t[r]||Object.create(null),n[r]):n[r];return t},e.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(n){return t[n]})},e.utils.xml={},e.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",e.utils.xml.document=function(){return document},e.utils.xml.createElement=function(t){return e.utils.xml.document().createElementNS(e.utils.xml.NAME_SPACE,t)},e.utils.xml.createTextNode=function(t){return e.utils.xml.document().createTextNode(t)},e.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},e.inputTypes={VALUE:e.connectionTypes.INPUT_VALUE,STATEMENT:e.connectionTypes.NEXT_STATEMENT,DUMMY:5},e.Xml={},e.Xml.workspaceToDom=function(t,n){var r=e.utils.xml.createElement("xml"),s=e.Xml.variablesToDom(e.Variables.allUsedVarModels(t));s.hasChildNodes()&&r.appendChild(s);var v,c=t.getTopComments(!0);for(s=0;v=c[s];s++)r.appendChild(v.toXmlWithXY(n));for(t=t.getTopBlocks(!0),s=0;c=t[s];s++)r.appendChild(e.Xml.blockToDomWithXY(c,n));return r},e.Xml.variablesToDom=function(t){for(var s,n=e.utils.xml.createElement("variables"),r=0;s=t[r];r++){var c=e.utils.xml.createElement("variable");c.appendChild(e.utils.xml.createTextNode(s.name)),s.type&&c.setAttribute("type",s.type),c.id=s.getId(),n.appendChild(c)}return n},e.Xml.blockToDomWithXY=function(t,n){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var r;t.workspace.RTL&&(r=t.workspace.getWidth()),n=e.Xml.blockToDom(t,n);var s=t.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(t.workspace.RTL?r-s.x:s.x)),n.setAttribute("y",Math.round(s.y)),n},e.Xml.fieldToDom_=function(t){if(t.isSerializable()){var n=e.utils.xml.createElement("field");return n.setAttribute("name",t.name||""),t.toXml(n)}return null},e.Xml.allFieldsToDom_=function(t,n){for(var s,r=0;s=t.inputList[r];r++)for(var v,c=0;v=s.fieldRow[c];c++)(v=e.Xml.fieldToDom_(v))&&n.appendChild(v)},e.Xml.blockToDom=function(t,n){if(t.isInsertionMarker())return(t=t.getChildren(!1)[0])?e.Xml.blockToDom(t):new DocumentFragment;var r=e.utils.xml.createElement(t.isShadow()?"shadow":"block");if(r.setAttribute("type",t.type),n||r.setAttribute("id",t.id),t.mutationToDom){var s=t.mutationToDom();s&&(s.hasChildNodes()||s.hasAttributes())&&r.appendChild(s)}if(e.Xml.allFieldsToDom_(t,r),s=t.getCommentText()){var c=t.commentModel.size,v=t.commentModel.pinned,D=e.utils.xml.createElement("comment");D.appendChild(e.utils.xml.createTextNode(s)),D.setAttribute("pinned",v),D.setAttribute("h",c.height),D.setAttribute("w",c.width),r.appendChild(D)}for(t.data&&((s=e.utils.xml.createElement("data")).appendChild(e.utils.xml.createTextNode(t.data)),r.appendChild(s)),s=0;c=t.inputList[s];s++){var P;if(v=!0,c.type!=e.inputTypes.DUMMY){var G=c.connection.targetBlock();c.type==e.inputTypes.VALUE?P=e.utils.xml.createElement("value"):c.type==e.inputTypes.STATEMENT&&(P=e.utils.xml.createElement("statement")),!(D=c.connection.getShadowDom())||G&&G.isShadow()||P.appendChild(e.Xml.cloneShadow_(D,n)),G&&(D=e.Xml.blockToDom(G,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&(P.appendChild(D),v=!1),P.setAttribute("name",c.name),v||r.appendChild(P)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&r.setAttribute("inline",t.inputsInline),t.isCollapsed()&&r.setAttribute("collapsed",!0),t.isEnabled()||r.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||r.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||r.setAttribute("movable",!1),t.isEditable()||r.setAttribute("editable",!1),(s=t.getNextBlock())&&(D=e.Xml.blockToDom(s,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&((P=e.utils.xml.createElement("next")).appendChild(D),r.appendChild(P)),!(D=t.nextConnection&&t.nextConnection.getShadowDom())||s&&s.isShadow()||P.appendChild(e.Xml.cloneShadow_(D,n)),r},e.Xml.cloneShadow_=function(t,n){for(var s,r=t=t.cloneNode(!0);r;)if(n&&"shadow"==r.nodeName&&r.removeAttribute("id"),r.firstChild)r=r.firstChild;else{for(;r&&!r.nextSibling;)s=r,r=r.parentNode,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&r.firstChild!=s&&e.utils.dom.removeNode(s);r&&(s=r,r=r.nextSibling,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&e.utils.dom.removeNode(s))}return t},e.Xml.domToText=function(t){return e.utils.xml.domToText(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},e.Xml.domToPrettyText=function(t){t=e.Xml.domToText(t).split("<");for(var n="",r=1;r<t.length;r++){var s=t[r];"/"==s[0]&&(n=n.substring(2)),t[r]=n+"<"+s,"/"!=s[0]&&"/>"!=s.slice(-2)&&(n+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},e.Xml.textToDom=function(t){var n=e.utils.xml.textToDomDocument(t);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return n.documentElement},e.Xml.clearWorkspaceAndLoadFromXml=function(t,n){return n.setResizesEnabled(!1),n.clear(),t=e.Xml.domToWorkspace(t,n),n.setResizesEnabled(!0),t},e.Xml.domToWorkspace=function(t,n){if(t instanceof e.Workspace){var r=t;t=n,n=r,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var s;n.RTL&&(s=n.getWidth()),r=[],e.utils.dom.startTextWidthCache();var c=e.Events.getGroup();c||e.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var v=!0;try{for(var P,D=0;P=t.childNodes[D];D++){var G=P.nodeName.toLowerCase(),it=P;if("block"==G||"shadow"==G&&!e.Events.recordUndo){var q=e.Xml.domToBlock(it,n);r.push(q.id);var bt=it.hasAttribute("x")?parseInt(it.getAttribute("x"),10):10,Ft=it.hasAttribute("y")?parseInt(it.getAttribute("y"),10):10;isNaN(bt)||isNaN(Ft)||q.moveBy(n.RTL?s-bt:bt,Ft),v=!1}else{if("shadow"==G)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==G)n.rendered?e.WorkspaceCommentSvg?e.WorkspaceCommentSvg.fromXml(it,n,s):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):e.WorkspaceComment?e.WorkspaceComment.fromXml(it,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==G){if(!v)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");e.Xml.domToVariables(it,n),v=!1}}}}finally{c||e.Events.setGroup(!1),e.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),e.Events.fire(new(e.Events.get(e.Events.FINISHED_LOADING))(n)),r},e.Xml.appendDomToWorkspace=function(t,n){var r;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(r=n.getBlocksBoundingBox()),t=e.Xml.domToWorkspace(t,n),r&&r.top!=r.bottom){var s=r.bottom,c=n.RTL?r.right:r.left,v=1/0,D=-1/0,P=1/0;for(r=0;r<t.length;r++){var G=n.getBlockById(t[r]).getRelativeToSurfaceXY();G.y<P&&(P=G.y),G.x<v&&(v=G.x),G.x>D&&(D=G.x)}for(s=s-P+10,c=n.RTL?c-D:c-v,r=0;r<t.length;r++)n.getBlockById(t[r]).moveBy(c,s)}return t},e.Xml.domToBlock=function(t,n){if(t instanceof e.Workspace){var r=t;t=n,n=r,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}e.Events.disable(),r=n.getAllVariables();try{var s=e.Xml.domToBlockHeadless_(t,n),c=s.getDescendants(!1);if(n.rendered){s.setConnectionTracking(!1);for(var v=c.length-1;0<=v;v--)c[v].initSvg();for(v=c.length-1;0<=v;v--)c[v].render(!1);setTimeout(function(){s.disposed||s.setConnectionTracking(!0)},1),s.updateDisabled(),n.resizeContents()}else for(v=c.length-1;0<=v;v--)c[v].initModel()}finally{e.Events.enable()}if(e.Events.isEnabled()){for(t=e.Variables.getAddedVariables(n,r),v=0;v<t.length;v++)n=t[v],e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(n));e.Events.fire(new(e.Events.get(e.Events.CREATE))(s))}return s},e.Xml.domToVariables=function(t,n){for(var s,r=0;s=t.childNodes[r];r++)if(s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE){var c=s.getAttribute("type"),v=s.getAttribute("id");n.createVariable(s.textContent,c,v)}},e.Xml.mapSupportedXmlTags_=function(t){for(var s,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},r=0;s=t.childNodes[r];r++)if(s.nodeType!=e.utils.dom.NodeType.TEXT_NODE)switch(s.nodeName.toLowerCase()){case"mutation":n.mutation.push(s);break;case"comment":if(!e.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(s);break;case"data":n.data.push(s);break;case"title":case"field":n.field.push(s);break;case"value":case"statement":n.input.push(s);break;case"next":n.next.push(s);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}return n},e.Xml.applyMutationTagNodes_=function(t,n){for(var c,r=!1,s=0;c=t[s];s++)n.domToMutation&&(n.domToMutation(c),n.initSvg&&(r=!0));return r},e.Xml.applyCommentTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++){var c=s.textContent,v="true"==s.getAttribute("pinned"),D=parseInt(s.getAttribute("w"),10);s=parseInt(s.getAttribute("h"),10),n.setCommentText(c),n.commentModel.pinned=v,isNaN(D)||isNaN(s)||(n.commentModel.size=new e.utils.Size(D,s)),v&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},e.Xml.applyDataTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++)n.data=s.textContent},e.Xml.applyFieldTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++){var c=s.getAttribute("name");e.Xml.domToField_(n,c,s)}},e.Xml.findChildBlocks_=function(t){for(var s,n={childBlockElement:null,childShadowElement:null},r=0;s=t.childNodes[r];r++)s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&("block"==s.nodeName.toLowerCase()?n.childBlockElement=s:"shadow"==s.nodeName.toLowerCase()&&(n.childShadowElement=s));return n},e.Xml.applyInputTagNodes_=function(t,n,r,s){for(var v,c=0;v=t[c];c++){var D=v.getAttribute("name"),P=r.getInput(D);if(!P){console.warn("Ignoring non-existent input "+D+" in block "+s);break}if((v=e.Xml.findChildBlocks_(v)).childBlockElement){if(!P.connection)throw TypeError("Input connection does not exist.");e.Xml.domToBlockHeadless_(v.childBlockElement,n,P.connection,!1)}v.childShadowElement&&P.connection.setShadowDom(v.childShadowElement)}},e.Xml.applyNextTagNodes_=function(t,n,r){for(var c,s=0;c=t[s];s++){if((c=e.Xml.findChildBlocks_(c)).childBlockElement){if(!r.nextConnection)throw TypeError("Next statement does not exist.");if(r.nextConnection.isConnected())throw TypeError("Next statement is already connected.");e.Xml.domToBlockHeadless_(c.childBlockElement,n,r.nextConnection,!0)}c.childShadowElement&&r.nextConnection&&r.nextConnection.setShadowDom(c.childShadowElement)}},e.Xml.domToBlockHeadless_=function(t,n,r,s){var c=t.getAttribute("type");if(!c)throw TypeError("Block type unspecified: "+t.outerHTML);var v=t.getAttribute("id");v=n.newBlock(c,v);var D=e.Xml.mapSupportedXmlTags_(t),P=e.Xml.applyMutationTagNodes_(D.mutation,v);if(e.Xml.applyCommentTagNodes_(D.comment,v),e.Xml.applyDataTagNodes_(D.data,v),r)if(s){if(!v.previousConnection)throw TypeError("Next block does not have previous statement.");r.connect(v.previousConnection)}else if(v.outputConnection)r.connect(v.outputConnection);else{if(!v.previousConnection)throw TypeError("Child block does not have output or previous statement.");r.connect(v.previousConnection)}if(e.Xml.applyFieldTagNodes_(D.field,v),e.Xml.applyInputTagNodes_(D.input,n,v,c),e.Xml.applyNextTagNodes_(D.next,n,v),P&&v.initSvg(),(n=t.getAttribute("inline"))&&v.setInputsInline("true"==n),(n=t.getAttribute("disabled"))&&v.setEnabled("true"!=n&&"disabled"!=n),(n=t.getAttribute("deletable"))&&v.setDeletable("true"==n),(n=t.getAttribute("movable"))&&v.setMovable("true"==n),(n=t.getAttribute("editable"))&&v.setEditable("true"==n),(n=t.getAttribute("collapsed"))&&v.setCollapsed("true"==n),"shadow"==t.nodeName.toLowerCase()){for(t=v.getChildren(!1),n=0;r=t[n];n++)if(!r.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(v.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");v.setShadow(!0)}return v},e.Xml.domToField_=function(t,n,r){var s=t.getField(n);s?s.fromXml(r):console.warn("Ignoring non-existent field "+n+" in block "+t.type)},e.Xml.deleteNext=function(t){for(var r,n=0;r=t.childNodes[n];n++)if("next"==r.nodeName.toLowerCase()){t.removeChild(r);break}},e.Events.BlockBase=function(t){e.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.BlockBase,e.Events.Abstract),e.Events.BlockBase.prototype.toJson=function(){var t=e.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},e.Events.BlockBase.prototype.fromJson=function(t){e.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},e.Events.BlockChange=function(t,n,r,s,c){e.Events.Change.superClass_.constructor.call(this,t),t&&(this.element=void 0===n?"":n,this.name=void 0===r?"":r,this.oldValue=void 0===s?"":s,this.newValue=void 0===c?"":c)},e.utils.object.inherits(e.Events.BlockChange,e.Events.BlockBase),e.Events.Change=e.Events.BlockChange,e.Events.BlockChange.prototype.type=e.Events.CHANGE,e.Events.BlockChange.prototype.toJson=function(){var t=e.Events.BlockChange.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},e.Events.BlockChange.prototype.fromJson=function(t){e.Events.BlockChange.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},e.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},e.Events.BlockChange.prototype.run=function(t){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(t||null);break;case"collapsed":n.setCollapsed(!!t);break;case"disabled":n.setEnabled(!t);break;case"inline":n.setInputsInline(!!t);break;case"mutation":var r="";if(n.mutationToDom&&(r=(r=n.mutationToDom())&&e.Xml.domToText(r)),n.domToMutation){var s=e.Xml.textToDom(t||"<mutation/>");n.domToMutation(s)}e.Events.fire(new e.Events.BlockChange(n,"mutation",null,r,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},e.Events.Create=function(t){e.Events.Create.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t))},e.utils.object.inherits(e.Events.Create,e.Events.BlockBase),e.Events.BlockCreate=e.Events.Create,e.Events.Create.prototype.type=e.Events.CREATE,e.Events.Create.prototype.toJson=function(){var t=e.Events.Create.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Create.prototype.fromJson=function(t){e.Events.Create.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Create.prototype.run=function(t){var n=this.getEventWorkspace_();if(t)(t=e.utils.xml.createElement("xml")).appendChild(this.xml),e.Xml.domToWorkspace(t,n);else{t=0;for(var r;r=this.ids[t];t++){var s=n.getBlockById(r);s?s.dispose(!1):r==this.blockId&&console.warn("Can't uncreate non-existent block: "+r)}}},e.Events.Delete=function(t){if(e.Events.Delete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t)}},e.utils.object.inherits(e.Events.Delete,e.Events.BlockBase),e.Events.BlockDelete=e.Events.Delete,e.Events.Delete.prototype.type=e.Events.DELETE,e.Events.Delete.prototype.toJson=function(){var t=e.Events.Delete.superClass_.toJson.call(this);return t.oldXml=e.Xml.domToText(this.oldXml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Delete.prototype.fromJson=function(t){e.Events.Delete.superClass_.fromJson.call(this,t),this.oldXml=e.Xml.textToDom(t.oldXml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Delete.prototype.run=function(t){var n=this.getEventWorkspace_();if(t){t=0;for(var r;r=this.ids[t];t++){var s=n.getBlockById(r);s?s.dispose(!1):r==this.blockId&&console.warn("Can't delete non-existent block: "+r)}}else(t=e.utils.xml.createElement("xml")).appendChild(this.oldXml),e.Xml.domToWorkspace(t,n)},e.Events.Move=function(t){e.Events.Move.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},e.utils.object.inherits(e.Events.Move,e.Events.BlockBase),e.Events.BlockMove=e.Events.Move,e.Events.Move.prototype.type=e.Events.MOVE,e.Events.Move.prototype.toJson=function(){var t=e.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Move.prototype.fromJson=function(t){if(e.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var n=t.newCoordinate.split(",");this.newCoordinate=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},e.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),n={},r=t.getParent();return r?(n.parentId=r.id,(t=r.getInputWithBlock(t))&&(n.inputName=t.name)):n.coordinate=t.getRelativeToSurfaceXY(),n},e.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&e.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},e.Events.Move.prototype.run=function(t){var n=this.getEventWorkspace_(),r=n.getBlockById(this.blockId);if(r){var s=t?this.newParentId:this.oldParentId,c=t?this.newInputName:this.oldInputName,v=t?this.newCoordinate:this.oldCoordinate;if(t=null,s&&!(t=n.getBlockById(s)))return void console.warn("Can't connect to non-existent block: "+s);if(r.getParent()&&r.unplug(),v)c=r.getRelativeToSurfaceXY(),r.moveBy(v.x-c.x,v.y-c.y);else{if(n=(r=r.outputConnection||r.previousConnection).type,c){if(t=t.getInput(c))var D=t.connection}else n==e.connectionTypes.PREVIOUS_STATEMENT&&(D=t.nextConnection);D?r.connect(D):console.warn("Can't connect to non-existent input: "+c)}}else console.warn("Can't move non-existent block: "+this.blockId)},e.registry.register(e.registry.Type.EVENT,e.Events.CREATE,e.Events.Create),e.registry.register(e.registry.Type.EVENT,e.Events.DELETE,e.Events.Delete),e.registry.register(e.registry.Type.EVENT,e.Events.CHANGE,e.Events.BlockChange),e.registry.register(e.registry.Type.EVENT,e.Events.MOVE,e.Events.Move),e.Events.FinishedLoading=function(t){this.isBlank=void 0===t,this.workspaceId=t?t.id:"",this.group=e.Events.getGroup(),this.recordUndo=!1},e.utils.object.inherits(e.Events.FinishedLoading,e.Events.Abstract),e.Events.FinishedLoading.prototype.type=e.Events.FINISHED_LOADING,e.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},e.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},e.registry.register(e.registry.Type.EVENT,e.Events.FINISHED_LOADING,e.Events.FinishedLoading),e.Events.UiBase=function(t){e.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===t,this.workspaceId=t||"",this.recordUndo=!1},e.utils.object.inherits(e.Events.UiBase,e.Events.Abstract),e.Events.UiBase.prototype.isUiEvent=!0,e.Events.Ui=function(t,n,r,s){e.Events.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===r?"":r,this.newValue=void 0===s?"":s},e.utils.object.inherits(e.Events.Ui,e.Events.UiBase),e.Events.Ui.prototype.type=e.Events.UI,e.Events.Ui.prototype.toJson=function(){var t=e.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},e.Events.Ui.prototype.fromJson=function(t){e.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.UI,e.Events.Ui),e.Events.VarBase=function(t){e.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===t)?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.VarBase,e.Events.Abstract),e.Events.VarBase.prototype.toJson=function(){var t=e.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},e.Events.VarBase.prototype.fromJson=function(t){e.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},e.Events.VarCreate=function(t){e.Events.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarCreate,e.Events.VarBase),e.Events.VarCreate.prototype.type=e.Events.VAR_CREATE,e.Events.VarCreate.prototype.toJson=function(){var t=e.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarCreate.prototype.fromJson=function(t){e.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarCreate.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},e.Events.VarDelete=function(t){e.Events.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarDelete,e.Events.VarBase),e.Events.VarDelete.prototype.type=e.Events.VAR_DELETE,e.Events.VarDelete.prototype.toJson=function(){var t=e.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarDelete.prototype.fromJson=function(t){e.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarDelete.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},e.Events.VarRename=function(t,n){e.Events.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=void 0===n?"":n)},e.utils.object.inherits(e.Events.VarRename,e.Events.VarBase),e.Events.VarRename.prototype.type=e.Events.VAR_RENAME,e.Events.VarRename.prototype.toJson=function(){var t=e.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},e.Events.VarRename.prototype.fromJson=function(t){e.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},e.Events.VarRename.prototype.run=function(t){this.getEventWorkspace_().renameVariableById(this.varId,t?this.newName:this.oldName)},e.registry.register(e.registry.Type.EVENT,e.Events.VAR_CREATE,e.Events.VarCreate),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_DELETE,e.Events.VarDelete),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_RENAME,e.Events.VarRename),e.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.BlockDragSurfaceSvg.prototype.SVG_=null,e.BlockDragSurfaceSvg.prototype.dragGroup_=null,e.BlockDragSurfaceSvg.prototype.container_=null,e.BlockDragSurfaceSvg.prototype.scale_=1,e.BlockDragSurfaceSvg.prototype.surfaceXY_=null,e.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new e.utils.Coordinate(0,0),e.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.SVG_))},e.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new e.utils.Coordinate(0,0)},e.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,n,r){this.scale_=r,t=t.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+t+","+n+") scale("+r+")")},e.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,n=this.surfaceXY_.y;t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.BlockDragSurfaceSvg.prototype.translateBy=function(t,n){this.surfaceXY_=new e.utils.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.translateSurface=function(t,n){this.surfaceXY_=new e.utils.Coordinate(t*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=e.utils.getRelativeXY(this.SVG_);return new e.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},e.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},e.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},e.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},e.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},e.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},e.Css={},e.Css.injected_=!1,e.Css.register=function(t){if(e.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(e.Css.CONTENT,t),t.length=0},e.Css.inject=function(t,n){if(!e.Css.injected_){e.Css.injected_=!0;var r=e.Css.CONTENT.join("\n");e.Css.CONTENT.length=0,t&&(t=n.replace(/[\\/]$/,""),r=r.replace(/<<<PATH>>>/g,t),(t=document.createElement("style")).id="blockly-common-style",r=document.createTextNode(r),t.appendChild(r),document.head.insertBefore(t,document.head.firstChild))}},e.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],e.Grid=function(t,n){this.gridPattern_=t,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},e.Grid.prototype.scale_=1,e.Grid.prototype.dispose=function(){this.gridPattern_=null},e.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},e.Grid.prototype.getSpacing=function(){return this.spacing_},e.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},e.Grid.prototype.update=function(t){this.scale_=t;var n=this.spacing_*t||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var r=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,s=n+this.length_/2;this.setLineAttributes_(this.line1_,t,r*=t,s*=t,n*=t,n),this.setLineAttributes_(this.line2_,t,n,n,r,s)},e.Grid.prototype.setLineAttributes_=function(t,n,r,s,c,v){t&&(t.setAttribute("stroke-width",n),t.setAttribute("x1",r),t.setAttribute("y1",c),t.setAttribute("x2",s),t.setAttribute("y2",v))},e.Grid.prototype.moveTo=function(t,n){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",n),(e.utils.userAgent.IE||e.utils.userAgent.EDGE)&&this.update(this.scale_)},e.Grid.createDom=function(t,n,r){return t=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},r),0<n.length&&0<n.spacing?(e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t),1<n.length&&e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t)):e.utils.dom.createSvgElement(e.utils.Svg.LINE,{},t),t},e.Theme=function(t,n,r,s){this.name=t,this.blockStyles=n||Object.create(null),this.categoryStyles=r||Object.create(null),this.componentStyles=s||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,e.registry.register(e.registry.Type.THEME,t,this)},e.Theme.prototype.getClassName=function(){return this.name+"-theme"},e.Theme.prototype.setBlockStyle=function(t,n){this.blockStyles[t]=n},e.Theme.prototype.setCategoryStyle=function(t,n){this.categoryStyles[t]=n},e.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},e.Theme.prototype.setComponentStyle=function(t,n){this.componentStyles[t]=n},e.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},e.Theme.prototype.setStartHats=function(t){this.startHats=t},e.Theme.defineTheme=function(t,n){var r=new e.Theme(t),s=n.base;return s&&("string"==typeof s&&(s=e.registry.getObject(e.registry.Type.THEME,s)),s instanceof e.Theme&&(e.utils.object.deepMerge(r,s),r.name=t)),e.utils.object.deepMerge(r.blockStyles,n.blockStyles),e.utils.object.deepMerge(r.categoryStyles,n.categoryStyles),e.utils.object.deepMerge(r.componentStyles,n.componentStyles),e.utils.object.deepMerge(r.fontStyle,n.fontStyle),null!=n.startHats&&(r.startHats=n.startHats),r},e.Themes={},e.Themes.Classic={},e.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},e.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},e.Themes.Classic=new e.Theme("classic",e.Themes.Classic.defaultBlockStyles,e.Themes.Classic.categoryStyles),e.utils.IdGenerator={},e.utils.IdGenerator.nextId_=0,e.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(e.utils.IdGenerator.nextId_++).toString(36)},e.utils.Metrics=function(){},e.utils.toolbox={},e.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",e.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",e.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},e.utils.toolbox.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=e.utils.toolbox.parseToolboxTree(t),t=e.utils.toolbox.convertToToolboxJson_(t)),e.utils.toolbox.validateToolbox_(t),t):null},e.utils.toolbox.validateToolbox_=function(t){var n=t.kind;if(t=t.contents,n&&n!=e.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=e.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+e.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+e.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!t)throw Error("Toolbox must have a contents attribute.")},e.utils.toolbox.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:e.utils.toolbox.xmlToJsonArray_(t):[]},e.utils.toolbox.hasCategories=function(t){if(!t)return!1;var n=t.kind;return n?n==e.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!t.contents.filter(function(r){return"CATEGORY"==r.kind.toUpperCase()}).length},e.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},e.utils.toolbox.convertToToolboxJson_=function(t){var n={contents:e.utils.toolbox.xmlToJsonArray_(t)};return t instanceof Node&&e.utils.toolbox.addAttributes_(t,n),n},e.utils.toolbox.xmlToJsonArray_=function(t){var s,n=[],r=t.childNodes;for(r||(r=t),t=0;s=r[t];t++)if(s.tagName){var c={},v=s.tagName.toUpperCase();c.kind=v,"BLOCK"==v?c.blockxml=s:s.childNodes&&0<s.childNodes.length&&(c.contents=e.utils.toolbox.xmlToJsonArray_(s)),e.utils.toolbox.addAttributes_(s,c),n.push(c)}return n},e.utils.toolbox.addAttributes_=function(t,n){for(var r=0;r<t.attributes.length;r++){var s=t.attributes[r];-1<s.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[s.nodeName.replace("css-","")]=s.value):n[s.nodeName]=s.value}},e.utils.toolbox.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(e.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=e.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},e.Options=function(t){var n=!!t.readOnly;if(n)var r=null,s=!1,c=!1,v=!1,D=!1,P=!1,G=!1;else{r=e.utils.toolbox.convertToolboxDefToJson(t.toolbox),s=e.utils.toolbox.hasCategories(r),void 0===(c=t.trashcan)&&(c=s);var it=t.maxTrashcanContents;c?void 0===it&&(it=32):it=0,void 0===(v=t.collapse)&&(v=s),void 0===(D=t.comments)&&(D=s),void 0===(P=t.disable)&&(P=s),void 0===(G=t.sounds)&&(G=!0)}var q=!!t.rtl,bt=t.horizontalLayout;void 0===bt&&(bt=!1);var Ft=t.toolboxPosition;Ft="end"!==Ft,Ft=bt?Ft?e.utils.toolbox.Position.TOP:e.utils.toolbox.Position.BOTTOM:Ft==q?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT;var gt=t.css;void 0===gt&&(gt=!0);var wt="https://blockly-demo.appspot.com/static/media/";t.media?wt=t.media:t.path&&(wt=t.path+"media/");var Bt=void 0===t.oneBasedIndex||!!t.oneBasedIndex,Kt=t.renderer||"geras",It=t.plugins||{};this.RTL=q,this.oneBasedIndex=Bt,this.collapse=v,this.comments=D,this.disable=P,this.readOnly=n,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=wt,this.hasCategories=s,this.moveOptions=e.Options.parseMoveOptions_(t,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=c,this.maxTrashcanContents=it,this.hasSounds=G,this.hasCss=gt,this.horizontalLayout=bt,this.languageTree=r,this.gridOptions=e.Options.parseGridOptions_(t),this.zoomOptions=e.Options.parseZoomOptions_(t),this.toolboxPosition=Ft,this.theme=e.Options.parseThemeOptions_(t),this.renderer=Kt,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=It},e.BlocklyOptions=function(){},e.Options.parseMoveOptions_=function(t,n){var r=t.move||{},s={};return void 0===r.scrollbars&&void 0===t.scrollbars?s.scrollbars=n:"object"==typeof r.scrollbars?(s.scrollbars={},s.scrollbars.horizontal=!!r.scrollbars.horizontal,s.scrollbars.vertical=!!r.scrollbars.vertical,s.scrollbars.horizontal&&s.scrollbars.vertical?s.scrollbars=!0:s.scrollbars.horizontal||s.scrollbars.vertical||(s.scrollbars=!1)):s.scrollbars=!!r.scrollbars||!!t.scrollbars,s.wheel=s.scrollbars&&void 0!==r.wheel?!!r.wheel:"object"==typeof s.scrollbars,s.drag=!(!s.scrollbars||void 0!==r.drag&&!r.drag),s},e.Options.parseZoomOptions_=function(t){var n={};return n.controls=void 0!==(t=t.zoom||{}).controls&&!!t.controls,n.wheel=void 0!==t.wheel&&!!t.wheel,n.startScale=void 0===t.startScale?1:Number(t.startScale),n.maxScale=void 0===t.maxScale?3:Number(t.maxScale),n.minScale=void 0===t.minScale?.3:Number(t.minScale),n.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),n.pinch=void 0===t.pinch?n.wheel||n.controls:!!t.pinch,n},e.Options.parseGridOptions_=function(t){t=t.grid||{};var n={};return n.spacing=Number(t.spacing)||0,n.colour=t.colour||"#888",n.length=void 0===t.length?1:Number(t.length),n.snap=0<n.spacing&&!!t.snap,n},e.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||e.Themes.Classic)?e.registry.getObject(e.registry.Type.THEME,t):t instanceof e.Theme?t:e.Theme.defineTheme(t.name||"builtin"+e.utils.IdGenerator.getNextUniqueId(),t)},e.Options.parseToolboxTree=function(t){return e.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),e.utils.toolbox.parseToolboxTree(t)},e.ScrollbarPair=function(t,n,r,s,c){this.workspace_=t,r=void 0===r||r;var v=(n=void 0===n||n)&&r;n&&(this.hScroll=new e.Scrollbar(t,!0,v,s,c)),r&&(this.vScroll=new e.Scrollbar(t,!1,v,s,c)),v&&(this.corner_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:e.Scrollbar.scrollbarThickness,width:e.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),e.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null},e.ScrollbarPair.prototype.dispose=function(){e.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},e.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var n=!1,r=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==t.scrollWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.scrollLeft==t.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==t.scrollHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.scrollTop==t.scrollTop||(r=!0)):r=n=!0,n||r){try{e.Events.disable(),this.hScroll&&n&&this.hScroll.resize(t),this.vScroll&&r&&this.vScroll.resize(t)}finally{e.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},e.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},e.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},e.ScrollbarPair.prototype.setOrigin=function(t,n){this.hScroll&&this.hScroll.setOrigin(t,n),this.vScroll&&this.vScroll.setOrigin(t,n)},e.ScrollbarPair.prototype.set=function(t,n,r){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(n,!1),(r||void 0===r)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},e.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},e.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},e.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},e.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},e.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},e.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},e.Scrollbar=function(t,n,r,s,c){this.workspace_=t,this.pair_=r||!1,this.horizontal_=n,this.margin_=void 0!==c?c:e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(s),this.position=new e.utils.Coordinate(0,0),t=e.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=e.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},e.Scrollbar.prototype.origin_=new e.utils.Coordinate(0,0),e.Scrollbar.prototype.startDragMouse_=0,e.Scrollbar.prototype.scrollbarLength_=0,e.Scrollbar.prototype.handleLength_=0,e.Scrollbar.prototype.handlePosition_=0,e.Scrollbar.prototype.isVisible_=!0,e.Scrollbar.prototype.containerVisible_=!0,e.Scrollbar.scrollbarThickness=15,e.Touch.TOUCH_ENABLED&&(e.Scrollbar.scrollbarThickness=25),e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,e.Scrollbar.metricsAreEquivalent_=function(t,n){return t.viewWidth==n.viewWidth&&t.viewHeight==n.viewHeight&&t.viewLeft==n.viewLeft&&t.viewTop==n.viewTop&&t.absoluteTop==n.absoluteTop&&t.absoluteLeft==n.absoluteLeft&&t.scrollWidth==n.scrollWidth&&t.scrollHeight==n.scrollHeight&&t.scrollLeft==n.scrollLeft&&t.scrollTop==n.scrollTop},e.Scrollbar.prototype.dispose=function(){this.cleanUp_(),e.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,e.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,e.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},e.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},e.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},e.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},e.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},e.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},e.Scrollbar.prototype.setPosition=function(t,n){this.position.x=t,this.position.y=n,e.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},e.Scrollbar.prototype.resize=function(t){!t&&!(t=this.workspace_.getMetrics())||this.oldHostMetrics_&&e.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},e.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},e.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeViewHorizontal=function(t){var n=t.viewWidth-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=e.Scrollbar.scrollbarThickness),this.setPosition(n,t.absoluteTop+t.viewHeight-e.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewWidth/t.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var r=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewLeft-t.scrollLeft)/(n=t.scrollWidth-t.viewWidth)*r),this.setHandlePosition(t),this.ratio=r/n}},e.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeViewVertical=function(t){var n=t.viewHeight-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-e.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewHeight/t.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var r=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewTop-t.scrollTop)/(n=t.scrollHeight-t.viewHeight)*r),this.setHandlePosition(t),this.ratio=r/n}},e.Scrollbar.prototype.createDom_=function(t){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(n+=" "+t),this.outerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{class:n},null),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((e.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),e.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},e.Scrollbar.prototype.isVisible=function(){return this.isVisible_},e.Scrollbar.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.setVisible=function(t){var n=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},e.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),e.Touch.clearTouchIdentifier(),this.cleanUp_(),e.utils.isRightButton(t))t.stopPropagation();else{var n=e.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var r=e.utils.getInjectionDivXY_(this.svgHandle_),s=this.handlePosition_,c=.95*this.handleLength_;n<=(r=this.horizontal_?r.x:r.y)?s-=c:n>=r+this.handleLength_&&(s+=c),this.setHandlePosition(this.constrainHandlePosition_(s)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},e.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),e.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,e.Scrollbar.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),e.Scrollbar.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},e.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},e.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),e.Touch.clearTouchIdentifier(),this.cleanUp_()},e.Scrollbar.prototype.cleanUp_=function(){e.hideChaff(!0),e.Scrollbar.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseUpWrapper_),e.Scrollbar.onMouseUpWrapper_=null),e.Scrollbar.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseMoveWrapper_),e.Scrollbar.onMouseMoveWrapper_=null)},e.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},e.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),n={};this.horizontal_?n.x=t:n.y=t,this.workspace_.setMetrics(n)},e.Scrollbar.prototype.set=function(t,n){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},e.Scrollbar.prototype.setOrigin=function(t,n){this.origin_=new e.utils.Coordinate(t,n)},e.Tooltip={},e.Tooltip.visible=!1,e.Tooltip.blocked_=!1,e.Tooltip.LIMIT=50,e.Tooltip.mouseOutPid_=0,e.Tooltip.showPid_=0,e.Tooltip.lastX_=0,e.Tooltip.lastY_=0,e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.OFFSET_X=0,e.Tooltip.OFFSET_Y=10,e.Tooltip.RADIUS_OK=10,e.Tooltip.HOVER_MS=750,e.Tooltip.MARGINS=5,e.Tooltip.DIV=null,e.Tooltip.getTooltipOfObject=function(t){if(t=e.Tooltip.getTargetObject_(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},e.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},e.Tooltip.createDom=function(){e.Tooltip.DIV||(e.Tooltip.DIV=document.createElement("div"),e.Tooltip.DIV.className="blocklyTooltipDiv",(e.parentContainer||document.body).appendChild(e.Tooltip.DIV))},e.Tooltip.bindMouseEvents=function(t){t.mouseOverWrapper_=e.browserEvents.bind(t,"mouseover",null,e.Tooltip.onMouseOver_),t.mouseOutWrapper_=e.browserEvents.bind(t,"mouseout",null,e.Tooltip.onMouseOut_),t.addEventListener("mousemove",e.Tooltip.onMouseMove_,!1)},e.Tooltip.unbindMouseEvents=function(t){t&&(e.browserEvents.unbind(t.mouseOverWrapper_),e.browserEvents.unbind(t.mouseOutWrapper_),t.removeEventListener("mousemove",e.Tooltip.onMouseMove_))},e.Tooltip.onMouseOver_=function(t){e.Tooltip.blocked_||(t=e.Tooltip.getTargetObject_(t.currentTarget),e.Tooltip.element_!=t&&(e.Tooltip.hide(),e.Tooltip.poisonedElement_=null,e.Tooltip.element_=t),clearTimeout(e.Tooltip.mouseOutPid_))},e.Tooltip.onMouseOut_=function(t){e.Tooltip.blocked_||(e.Tooltip.mouseOutPid_=setTimeout(function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},1),clearTimeout(e.Tooltip.showPid_))},e.Tooltip.onMouseMove_=function(t){if(e.Tooltip.element_&&e.Tooltip.element_.tooltip&&!e.Tooltip.blocked_)if(e.Tooltip.visible){var n=e.Tooltip.lastX_-t.pageX;t=e.Tooltip.lastY_-t.pageY,Math.sqrt(n*n+t*t)>e.Tooltip.RADIUS_OK&&e.Tooltip.hide()}else e.Tooltip.poisonedElement_!=e.Tooltip.element_&&(clearTimeout(e.Tooltip.showPid_),e.Tooltip.lastX_=t.pageX,e.Tooltip.lastY_=t.pageY,e.Tooltip.showPid_=setTimeout(e.Tooltip.show_,e.Tooltip.HOVER_MS))},e.Tooltip.dispose=function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},e.Tooltip.hide=function(){e.Tooltip.visible&&(e.Tooltip.visible=!1,e.Tooltip.DIV&&(e.Tooltip.DIV.style.display="none")),e.Tooltip.showPid_&&clearTimeout(e.Tooltip.showPid_)},e.Tooltip.block=function(){e.Tooltip.hide(),e.Tooltip.blocked_=!0},e.Tooltip.unblock=function(){e.Tooltip.blocked_=!1},e.Tooltip.show_=function(){if(!e.Tooltip.blocked_&&(e.Tooltip.poisonedElement_=e.Tooltip.element_,e.Tooltip.DIV)){e.Tooltip.DIV.textContent="";var t=e.Tooltip.getTooltipOfObject(e.Tooltip.element_);t=(t=e.utils.string.wrap(t,e.Tooltip.LIMIT)).split("\n");for(var n=0;n<t.length;n++){var r=document.createElement("div");r.appendChild(document.createTextNode(t[n])),e.Tooltip.DIV.appendChild(r)}t=e.Tooltip.element_.RTL,n=document.documentElement.clientWidth,r=document.documentElement.clientHeight,e.Tooltip.DIV.style.direction=t?"rtl":"ltr",e.Tooltip.DIV.style.display="block",e.Tooltip.visible=!0;var s=e.Tooltip.lastX_;s=t?s-(e.Tooltip.OFFSET_X+e.Tooltip.DIV.offsetWidth):s+e.Tooltip.OFFSET_X;var c=e.Tooltip.lastY_+e.Tooltip.OFFSET_Y;c+e.Tooltip.DIV.offsetHeight>r+window.scrollY&&(c-=e.Tooltip.DIV.offsetHeight+2*e.Tooltip.OFFSET_Y),t?s=Math.max(e.Tooltip.MARGINS-window.scrollX,s):s+e.Tooltip.DIV.offsetWidth>n+window.scrollX-2*e.Tooltip.MARGINS&&(s=n-e.Tooltip.DIV.offsetWidth-2*e.Tooltip.MARGINS),e.Tooltip.DIV.style.top=c+"px",e.Tooltip.DIV.style.left=s+"px"}},e.utils.aria={},e.utils.aria.ARIA_PREFIX_="aria-",e.utils.aria.ROLE_ATTRIBUTE_="role",e.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},e.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},e.utils.aria.setRole=function(t,n){t.setAttribute(e.utils.aria.ROLE_ATTRIBUTE_,n)},e.utils.aria.setState=function(t,n,r){Array.isArray(r)&&(r=r.join(" ")),t.setAttribute(e.utils.aria.ARIA_PREFIX_+n,r)},e.IASTNodeLocation=function(){},e.IASTNodeLocationSvg=function(){},e.IASTNodeLocationWithBlock=function(){},e.IKeyboardAccessible=function(){},e.utils.deprecation={},e.utils.deprecation.warn=function(t,n,r,s){t=t+" was deprecated on "+n+" and will be deleted on "+r+".",s&&(t+="\nUse "+s+" instead."),console.warn(t)},e.Connection=function(t,n){this.sourceBlock_=t,this.type=n},e.Connection.CAN_CONNECT=0,e.Connection.REASON_SELF_CONNECTION=1,e.Connection.REASON_WRONG_TYPE=2,e.Connection.REASON_TARGET_NULL=3,e.Connection.REASON_CHECKS_FAILED=4,e.Connection.REASON_DIFFERENT_WORKSPACES=5,e.Connection.REASON_SHADOW_PARENT=6,e.Connection.REASON_DRAG_CHECKS_FAILED=7,e.Connection.prototype.targetConnection=null,e.Connection.prototype.disposed=!1,e.Connection.prototype.check_=null,e.Connection.prototype.shadowDom_=null,e.Connection.prototype.x=0,e.Connection.prototype.y=0,e.Connection.prototype.connect_=function(t){var P,n=e.connectionTypes.INPUT_VALUE,r=this.getSourceBlock(),s=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var c=this.getShadowDom(!0);this.shadowDom_=null;var v=this.targetBlock();if(v.isShadow())v.dispose(!1);else{this.disconnect();var D=v}this.shadowDom_=c}e.Events.isEnabled()&&(P=new(e.Events.get(e.Events.BLOCK_MOVE))(s)),e.Connection.connectReciprocally_(this,t),s.setParent(r),P&&(P.recordNew(),e.Events.fire(P)),D&&((s=e.Connection.getConnectionForOrphanedConnection(s,t=this.type===n?D.outputConnection:D.previousConnection))?t.connect(s):t.onFailedConnect(this))},e.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},e.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Connection.prototype.isSuperior=function(){return this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.NEXT_STATEMENT},e.Connection.prototype.isConnected=function(){return!!this.targetConnection},e.Connection.prototype.canConnectWithReason=function(t){return e.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,t,!1)},e.Connection.prototype.checkConnection=function(t){e.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),r=n.canConnectWithReason(this,t,!1);if(r!=e.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(r,this,t))},e.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},e.Connection.prototype.isConnectionAllowed=function(t){return e.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!0)},e.Connection.prototype.onFailedConnect=function(t){},e.Connection.prototype.connect=function(t){if(this.targetConnection!=t&&this.getConnectionChecker().canConnect(this,t,!1)){var n=e.Events.getGroup();n||e.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n||e.Events.setGroup(!1)}},e.Connection.connectReciprocally_=function(t,n){if(!t||!n)throw Error("Cannot connect null connections.");t.targetConnection=n,n.targetConnection=t},e.Connection.getSingleConnection_=function(t,n){for(var v,r=null,s=(n=n.outputConnection).getConnectionChecker(),c=0;v=t.inputList[c];c++)if((v=v.connection)&&s.canConnect(n,v,!1)){if(r)return null;r=v}return r},e.Connection.getConnectionForOrphanedOutput_=function(t,n){for(var r;r=e.Connection.getSingleConnection_(t,n);)if(!(t=r.targetBlock())||t.isShadow())return r;return null},e.Connection.getConnectionForOrphanedConnection=function(t,n){if(n.type===e.connectionTypes.OUTPUT_VALUE)return e.Connection.getConnectionForOrphanedOutput_(t,n.getSourceBlock());t=t.lastConnectionInStack(!0);var r=n.getConnectionChecker();return t&&r.canConnect(n,t,!1)?t:null},e.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,r=t.getSourceBlock();t=this}else n=t.getSourceBlock(),r=this.sourceBlock_;var s=e.Events.getGroup();s||e.Events.setGroup(!0),this.disconnectInternal_(n,r),r.isShadow()||t.respawnShadow_(),s||e.Events.setGroup(!1)},e.Connection.prototype.disconnectInternal_=function(t,n){var r;e.Events.isEnabled()&&(r=new(e.Events.get(e.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),r&&(r.recordNew(),e.Events.fire(r))},e.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n)if((t=e.Xml.domToBlock(n,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},e.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},e.Connection.prototype.checkType=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!1)},e.Connection.prototype.checkType_=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(t)},e.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},e.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},e.Connection.prototype.getCheck=function(){return this.check_},e.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},e.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?e.Xml.blockToDom(this.targetBlock()):this.shadowDom_},e.Connection.prototype.neighbours=function(t){return[]},e.Connection.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_.inputList,r=0;r<n.length;r++)if(n[r].connection===this){t=n[r];break}return t},e.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var n="Output Connection of ";else if(t.previousConnection==this)n="Previous Connection of ";else if(t.nextConnection==this)n="Next Connection of ";else{n=null;for(var s,r=0;s=t.inputList[r];r++)if(s.connection==this){n=s;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+t.toDevString()},e.IConnectionChecker=function(){},e.ConnectionChecker=function(){},e.ConnectionChecker.prototype.canConnect=function(t,n,r,s){return this.canConnectWithReason(t,n,r,s)==e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.canConnectWithReason=function(t,n,r,s){var c=this.doSafetyChecks(t,n);return c!=e.Connection.CAN_CONNECT?c:this.doTypeChecks(t,n)?r&&!this.doDragChecks(t,n,s||0)?e.Connection.REASON_DRAG_CHECKS_FAILED:e.Connection.CAN_CONNECT:e.Connection.REASON_CHECKS_FAILED},e.ConnectionChecker.prototype.getErrorMessage=function(t,n,r){switch(t){case e.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case e.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case e.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case e.Connection.REASON_TARGET_NULL:return"Target connection is null.";case e.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+r.getCheck();case e.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case e.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},e.ConnectionChecker.prototype.doSafetyChecks=function(t,n){if(!t||!n)return e.Connection.REASON_TARGET_NULL;if(t.isSuperior())var r=t.getSourceBlock(),s=n.getSourceBlock();else s=t.getSourceBlock(),r=n.getSourceBlock();return r==s?e.Connection.REASON_SELF_CONNECTION:n.type!=e.OPPOSITE_TYPE[t.type]?e.Connection.REASON_WRONG_TYPE:r.workspace!==s.workspace?e.Connection.REASON_DIFFERENT_WORKSPACES:r.isShadow()&&!s.isShadow()?e.Connection.REASON_SHADOW_PARENT:e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.doTypeChecks=function(t,n){if(t=t.getCheck(),n=n.getCheck(),!t||!n)return!0;for(var r=0;r<t.length;r++)if(-1!=n.indexOf(t[r]))return!0;return!1},e.ConnectionChecker.prototype.doDragChecks=function(t,n,r){if(t.distanceFrom(n)>r||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case e.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,n);case e.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case e.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case e.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!t.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==e.draggingConnections.indexOf(n)},e.ConnectionChecker.prototype.canConnectToPrevious_=function(t,n){return!(t.targetConnection||-1!=e.draggingConnections.indexOf(n)||n.targetConnection&&(!(t=n.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},e.registry.register(e.registry.Type.CONNECTION_CHECKER,e.registry.DEFAULT,e.ConnectionChecker),e.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},e.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},e.VariableMap.prototype.renameVariable=function(t,n){var r=this.getVariable(n,t.type),s=this.workspace.getAllBlocks(!1);e.Events.setGroup(!0);try{r&&r.getId()!=t.getId()?this.renameVariableWithConflict_(t,n,r,s):this.renameVariableAndUses_(t,n,s)}finally{e.Events.setGroup(!1)}},e.VariableMap.prototype.renameVariableById=function(t,n){var r=this.getVariableById(t);if(!r)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(r,n)},e.VariableMap.prototype.renameVariableAndUses_=function(t,n,r){for(e.Events.fire(new(e.Events.get(e.Events.VAR_RENAME))(t,n)),t.name=n,n=0;n<r.length;n++)r[n].updateVarName(t)},e.VariableMap.prototype.renameVariableWithConflict_=function(t,n,r,s){var c=t.type;for(n!=r.name&&this.renameVariableAndUses_(r,n,s),n=0;n<s.length;n++)s[n].renameVarById(t.getId(),r.getId());e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t)),t=this.getVariablesOfType(c).indexOf(t),this.variableMap_[c].splice(t,1)},e.VariableMap.prototype.createVariable=function(t,n,r){var s=this.getVariable(t,n);if(s){if(r&&s.getId()!=r)throw Error('Variable "'+t+'" is already in use and its id is "'+s.getId()+'" which conflicts with the passed in id, "'+r+'".');return s}if(r&&this.getVariableById(r))throw Error('Variable id, "'+r+'", is already in use.');return s=r||e.utils.genUid(),s=new e.VariableModel(this.workspace,t,n=n||"",s),(t=this.variableMap_[n]||[]).push(s),delete this.variableMap_[n],this.variableMap_[n]=t,s},e.VariableMap.prototype.deleteVariable=function(t){for(var s,n=this.variableMap_[t.type],r=0;s=n[r];r++)if(s.getId()==t.getId()){n.splice(r,1),e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t));break}},e.VariableMap.prototype.deleteVariableById=function(t){var n=this.getVariableById(t);if(n){var c,r=n.name,s=this.getVariableUsesById(t);for(t=0;c=s[t];t++)if("procedures_defnoreturn"==c.type||"procedures_defreturn"==c.type)return t=c.getFieldValue("NAME"),r=e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",r).replace("%2",t),void e.alert(r);var v=this;1<s.length?(r=e.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(s.length)).replace("%2",r),e.confirm(r,function(D){D&&n&&v.deleteVariableInternal(n,s)})):v.deleteVariableInternal(n,s)}else console.warn("Can't delete non-existent variable: "+t)},e.VariableMap.prototype.deleteVariableInternal=function(t,n){var r=e.Events.getGroup();r||e.Events.setGroup(!0);try{for(var s=0;s<n.length;s++)n[s].dispose(!0);this.deleteVariable(t)}finally{r||e.Events.setGroup(!1)}},e.VariableMap.prototype.getVariable=function(t,n){if(n=this.variableMap_[n||""])for(var s,r=0;s=n[r];r++)if(e.Names.equals(s.name,t))return s;return null},e.VariableMap.prototype.getVariableById=function(t){for(var n=Object.keys(this.variableMap_),r=0;r<n.length;r++)for(var v,s=n[r],c=0;v=this.variableMap_[s][c];c++)if(v.getId()==t)return v;return null},e.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},e.VariableMap.prototype.getVariableTypes=function(t){var n={};e.utils.object.mixin(n,this.variableMap_),t&&t.getPotentialVariableMap()&&e.utils.object.mixin(n,t.getPotentialVariableMap().variableMap_),t=Object.keys(n),n=!1;for(var r=0;r<t.length;r++)""==t[r]&&(n=!0);return n||t.push(""),t},e.VariableMap.prototype.getAllVariables=function(){var n,t=[];for(n in this.variableMap_)t=t.concat(this.variableMap_[n]);return t},e.VariableMap.prototype.getAllVariableNames=function(){var n,t=[];for(n in this.variableMap_)for(var c,r=this.variableMap_[n],s=0;c=r[s];s++)t.push(c.name);return t},e.VariableMap.prototype.getVariableUsesById=function(t){for(var n=[],r=this.workspace.getAllBlocks(!1),s=0;s<r.length;s++){var c=r[s].getVarModels();if(c)for(var v=0;v<c.length;v++)c[v].getId()==t&&n.push(r[s])}return n},e.Workspace=function(t){this.id=e.utils.genUid(),e.Workspace.WorkspaceDB_[this.id]=this,this.options=t||new e.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(e.registry.getClassFromOptions(e.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new e.VariableMap(this),this.potentialVariableMap_=null},e.Workspace.prototype.rendered=!1,e.Workspace.prototype.isClearing=!1,e.Workspace.prototype.MAX_UNDO=1024,e.Workspace.prototype.connectionDBList=null,e.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete e.Workspace.WorkspaceDB_[this.id]},e.Workspace.SCAN_ANGLE=3,e.Workspace.prototype.sortObjects_=function(t,n){return t=t.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),t.y+e.Workspace.prototype.sortObjects_.offset*t.x-(n.y+e.Workspace.prototype.sortObjects_.offset*n.x)},e.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},e.Workspace.prototype.removeTopBlock=function(t){if(!e.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},e.Workspace.prototype.getTopBlocks=function(t){var n=[].concat(this.topBlocks_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},e.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},e.Workspace.prototype.getBlocksByType=function(t,n){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),n&&1<t.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t):[]},e.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},e.Workspace.prototype.removeTopComment=function(t){if(!e.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},e.Workspace.prototype.getTopComments=function(t){var n=[].concat(this.topComments_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var n=[],r=0;r<t.length;r++)n.push.apply(n,t[r].getDescendants(!0))}else for(n=this.getTopBlocks(!1),r=0;r<n.length;r++)n.push.apply(n,n[r].getChildren(!1));return n.filter(function(s){return!s.isInsertionMarker()})},e.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=e.Events.getGroup();for(t||e.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);t||e.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},e.Workspace.prototype.renameVariableById=function(t,n){this.variableMap_.renameVariableById(t,n)},e.Workspace.prototype.createVariable=function(t,n,r){return this.variableMap_.createVariable(t,n,r)},e.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},e.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},e.Workspace.prototype.getVariable=function(t,n){return this.variableMap_.getVariable(t,n)},e.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},e.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},e.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},e.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},e.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},e.Workspace.prototype.getWidth=function(){return 0},e.Workspace.prototype.newBlock=function(t,n){return new e.Block(this,t,n)},e.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},e.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},e.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var r,n=0;for(r in t){if(t[r]>this.remainingCapacityOfType(r))return!1;n+=t[r]}return!(n>this.remainingCapacity())},e.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},e.Workspace.prototype.getUndoStack=function(){return this.undoStack_},e.Workspace.prototype.getRedoStack=function(){return this.redoStack_},e.Workspace.prototype.undo=function(t){var n=t?this.redoStack_:this.undoStack_,r=t?this.undoStack_:this.redoStack_,s=n.pop();if(s){for(var c=[s];n.length&&s.group&&s.group==n[n.length-1].group;)c.push(n.pop());for(n=0;s=c[n];n++)r.push(s);c=e.Events.filter(c,t),e.Events.recordUndo=!1;try{for(n=0;s=c[n];n++)s.run(t)}finally{e.Events.recordUndo=!0}}},e.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,e.Events.clearPendingUndo()},e.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},e.Workspace.prototype.removeChangeListener=function(t){e.utils.arrayRemove(this.listeners_,t)},e.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var r,n=0;r=this.listeners_[n];n++)r(t)},e.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},e.Workspace.prototype.setBlockById=function(t,n){this.blockDB_[t]=n},e.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},e.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},e.Workspace.prototype.allInputsFilled=function(t){for(var s,n=this.getTopBlocks(!1),r=0;s=n[r];r++)if(!s.allInputsFilled(t))return!1;return!0},e.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},e.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new e.VariableMap(this)},e.Workspace.prototype.getVariableMap=function(){return this.variableMap_},e.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},e.Workspace.WorkspaceDB_=Object.create(null),e.Workspace.getById=function(t){return e.Workspace.WorkspaceDB_[t]||null},e.Workspace.getAll=function(){var n,t=[];for(n in e.Workspace.WorkspaceDB_)t.push(e.Workspace.WorkspaceDB_[n]);return t},e.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.WorkspaceDragSurfaceSvg.prototype.SVG_=null,e.WorkspaceDragSurfaceSvg.prototype.container_=null,e.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},e.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,n){t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return e.utils.getRelativeXY(this.SVG_)},e.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],r=this.SVG_.childNodes[1];if(!(n&&r&&e.utils.dom.hasClass(n,"blocklyBlockCanvas")&&e.utils.dom.hasClass(r,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?e.utils.dom.insertAfter(n,this.previousSibling_):t.insertBefore(n,t.firstChild),e.utils.dom.insertAfter(r,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");e.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},e.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,n,r,s,c,v){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=r,t.setAttribute("transform","translate(0, 0) scale("+v+")"),n.setAttribute("transform","translate(0, 0) scale("+v+")"),this.SVG_.setAttribute("width",s),this.SVG_.setAttribute("height",c),this.SVG_.appendChild(t),this.SVG_.appendChild(n),this.SVG_.style.display="block"},e.blockRendering={},e.blockRendering.useDebugger=!1,e.blockRendering.register=function(t,n){e.registry.register(e.registry.Type.RENDERER,t,n)},e.blockRendering.unregister=function(t){e.registry.unregister(e.registry.Type.RENDERER,t)},e.blockRendering.startDebugger=function(){e.blockRendering.useDebugger=!0},e.blockRendering.stopDebugger=function(){e.blockRendering.useDebugger=!1},e.blockRendering.init=function(t,n,r){return(t=new(e.registry.getClass(e.registry.Type.RENDERER,t))(t)).init(n,r),t},e.ASTNode=function(t,n,r){if(!n)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=e.ASTNode.isConnectionType_(t),this.location_=n,this.wsCoordinate_=null,this.processParams_(r||null)},e.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},e.ASTNode.NAVIGATE_ALL_FIELDS=!1,e.ASTNode.DEFAULT_OFFSET_Y=-20,e.ASTNode.isConnectionType_=function(t){switch(t){case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:case e.ASTNode.types.INPUT:case e.ASTNode.types.OUTPUT:return!0}return!1},e.ASTNode.createFieldNode=function(t){return t?new e.ASTNode(e.ASTNode.types.FIELD,t):null},e.ASTNode.createConnectionNode=function(t){if(!t)return null;var n=t.type;return n==e.connectionTypes.INPUT_VALUE||n==e.connectionTypes.NEXT_STATEMENT&&t.getParentInput()?e.ASTNode.createInputNode(t.getParentInput()):n==e.connectionTypes.NEXT_STATEMENT?new e.ASTNode(e.ASTNode.types.NEXT,t):n==e.connectionTypes.OUTPUT_VALUE?new e.ASTNode(e.ASTNode.types.OUTPUT,t):n==e.connectionTypes.PREVIOUS_STATEMENT?new e.ASTNode(e.ASTNode.types.PREVIOUS,t):null},e.ASTNode.createInputNode=function(t){return t&&t.connection?new e.ASTNode(e.ASTNode.types.INPUT,t.connection):null},e.ASTNode.createBlockNode=function(t){return t?new e.ASTNode(e.ASTNode.types.BLOCK,t):null},e.ASTNode.createStackNode=function(t){return t?new e.ASTNode(e.ASTNode.types.STACK,t):null},e.ASTNode.createWorkspaceNode=function(t,n){return n&&t?new e.ASTNode(e.ASTNode.types.WORKSPACE,t,{wsCoordinate:n}):null},e.ASTNode.createTopNode=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},e.ASTNode.prototype.getLocation=function(){return this.location_},e.ASTNode.prototype.getType=function(){return this.type_},e.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},e.ASTNode.prototype.isConnection=function(){return this.isConnection_},e.ASTNode.prototype.findNextForInput_=function(){var r,t=this.location_.getParentInput(),n=t.getSourceBlock();for(t=n.inputList.indexOf(t)+1;r=n.inputList[t];t++){for(var v,s=r.fieldRow,c=0;v=s[c];c++)if(v.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(v);if(r.connection)return e.ASTNode.createInputNode(r)}return null},e.ASTNode.prototype.findNextForField_=function(){var t=this.location_,n=t.getParentInput(),r=t.getSourceBlock(),s=r.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)+1;n=r.inputList[s];s++){for(var c=n.fieldRow;t<c.length;){if(c[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(c[t]);t++}if(t=0,n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.findPrevForInput_=function(){for(var s,t=this.location_.getParentInput(),n=t.getSourceBlock(),r=n.inputList.indexOf(t);s=n.inputList[r];r--){if(s.connection&&s!==t)return e.ASTNode.createInputNode(s);for(var v,c=(s=s.fieldRow).length-1;v=s[c];c--)if(v.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(v)}return null},e.ASTNode.prototype.findPrevForField_=function(){var c,t=this.location_,n=t.getParentInput(),r=t.getSourceBlock(),s=r.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)-1;c=r.inputList[s];s--){if(c.connection&&c!==n)return e.ASTNode.createInputNode(c);for(c=c.fieldRow;-1<t;){if(c[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(c[t]);t--}0<=s-1&&(t=r.inputList[s-1].fieldRow.length-1)}return null},e.ASTNode.prototype.navigateBetweenStacks_=function(t){var n=this.getLocation();if(n instanceof e.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var r=n.getRootBlock();n=r.workspace.getTopBlocks(!0);for(var c,s=0;c=n[s];s++)if(r.id==c.id)return-1==(t=s+(t?1:-1))||t==n.length?null:e.ASTNode.createStackNode(n[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},e.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var n=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?e.ASTNode.createInputNode(n.targetConnection.getParentInput()):e.ASTNode.createStackNode(t)},e.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var r,n=0;r=t[n];n++){for(var v,s=r.fieldRow,c=0;v=s[c];c++)if(v.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(v);if(r.connection)return e.ASTNode.createInputNode(r)}return null},e.ASTNode.prototype.getSourceBlock=function(){return this.getType()===e.ASTNode.types.BLOCK||this.getType()===e.ASTNode.types.STACK?this.getLocation():this.getType()===e.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},e.ASTNode.prototype.next=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case e.ASTNode.types.OUTPUT:var t=this.location_;return e.ASTNode.createBlockNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return this.findNextForField_();case e.ASTNode.types.INPUT:return this.findNextForInput_();case e.ASTNode.types.BLOCK:return e.ASTNode.createConnectionNode(this.location_.nextConnection);case e.ASTNode.types.PREVIOUS:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.NEXT:return e.ASTNode.createConnectionNode((t=this.location_).targetConnection)}return null},e.ASTNode.prototype.in=function(){switch(this.type_){case e.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return e.ASTNode.createStackNode(t[0]);break;case e.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(t=this.location_);case e.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(t=this.location_);case e.ASTNode.types.INPUT:return e.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},e.ASTNode.prototype.prev=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case e.ASTNode.types.FIELD:return this.findPrevForField_();case e.ASTNode.types.INPUT:return this.findPrevForInput_();case e.ASTNode.types.BLOCK:var t=this.location_;return e.ASTNode.createConnectionNode(t.previousConnection||t.outputConnection);case e.ASTNode.types.PREVIOUS:if((t=(t=this.location_).targetConnection)&&!t.getParentInput())return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.NEXT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock())}return null},e.ASTNode.prototype.out=function(){switch(this.type_){case e.ASTNode.types.STACK:var t=this.location_,n=t.getRelativeToSurfaceXY();return n=new e.utils.Coordinate(n.x,n.y+e.ASTNode.DEFAULT_OFFSET_Y),e.ASTNode.createWorkspaceNode(t.workspace,n);case e.ASTNode.types.OUTPUT:return(n=(t=this.location_).targetConnection)?e.ASTNode.createConnectionNode(n):e.ASTNode.createStackNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.INPUT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(t=this.location_);case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((t=this.location_).getSourceBlock())}return null},e.Blocks=Object.create(null),e.Extensions={},e.Extensions.ALL_=Object.create(null),e.Extensions.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(e.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+t+'" must be a function');e.Extensions.ALL_[t]=n},e.Extensions.registerMixin=function(t,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+t+'" must be a object');e.Extensions.register(t,function(){this.mixin(n)})},e.Extensions.registerMutator=function(t,n,r,s){var c='Error when registering mutator "'+t+'": ';e.Extensions.checkHasFunction_(c,n.domToMutation,"domToMutation"),e.Extensions.checkHasFunction_(c,n.mutationToDom,"mutationToDom");var v=e.Extensions.checkMutatorDialog_(n,c);if(r&&"function"!=typeof r)throw Error('Extension "'+t+'" is not a function');e.Extensions.register(t,function(){if(v){if(!e.Mutator)throw Error(c+"Missing require for Blockly.Mutator");this.setMutator(new e.Mutator(s||[]))}this.mixin(n),r&&r.apply(this)})},e.Extensions.unregister=function(t){e.Extensions.ALL_[t]?delete e.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},e.Extensions.apply=function(t,n,r){var s=e.Extensions.ALL_[t];if("function"!=typeof s)throw Error('Error: Extension "'+t+'" not found.');if(r)e.Extensions.checkNoMutatorProperties_(t,n);else var c=e.Extensions.getMutatorProperties_(n);if(s.apply(n),r)e.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',n);else if(!e.Extensions.mutatorPropertiesMatch_(c,n))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},e.Extensions.checkHasFunction_=function(t,n,r){if(!n)throw Error(t+'missing required property "'+r+'"');if("function"!=typeof n)throw Error(t+'" required property "'+r+'" must be a function')},e.Extensions.checkNoMutatorProperties_=function(t,n){if(e.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+n.id)},e.Extensions.checkMutatorDialog_=function(t,n){var r=void 0!==t.compose,s=void 0!==t.decompose;if(r&&s){if("function"!=typeof t.compose)throw Error(n+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(n+"decompose must be a function.");return!0}if(!r&&!s)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},e.Extensions.checkBlockHasMutatorProperties_=function(t,n){if("function"!=typeof n.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');e.Extensions.checkMutatorDialog_(n,t)},e.Extensions.getMutatorProperties_=function(t){var n=[];return void 0!==t.domToMutation&&n.push(t.domToMutation),void 0!==t.mutationToDom&&n.push(t.mutationToDom),void 0!==t.compose&&n.push(t.compose),void 0!==t.decompose&&n.push(t.decompose),n},e.Extensions.mutatorPropertiesMatch_=function(t,n){if((n=e.Extensions.getMutatorProperties_(n)).length!=t.length)return!1;for(var r=0;r<n.length;r++)if(t[r]!=n[r])return!1;return!0},e.Extensions.buildTooltipForDropdown=function(t,n){var r=[];return"object"==typeof document&&e.utils.runAfterPageLoad(function(){for(var s in n)e.utils.checkMessageReferences(n[s])}),function(){this.type&&-1==r.indexOf(this.type)&&(e.Extensions.checkDropdownOptionsInTable_(this,t,n),r.push(this.type)),this.setTooltip(function(){var s=String(this.getFieldValue(t)),c=n[s];return null==c?-1==r.indexOf(this.type)&&(s="No tooltip mapping for value "+s+" of field "+t,null!=this.type&&(s+=" of block type "+this.type),console.warn(s+".")):c=e.utils.replaceMessageReferences(c),c}.bind(this))}},e.Extensions.checkDropdownOptionsInTable_=function(t,n,r){var s=t.getField(n);if(!s.isOptionListDynamic()){s=s.getOptions();for(var c=0;c<s.length;++c){var v=s[c][1];null==r[v]&&console.warn("No tooltip mapping for value "+v+" of field "+n+" of block type "+t.type)}}},e.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&e.utils.runAfterPageLoad(function(){e.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var r=this.getField(n);return e.utils.replaceMessageReferences(t).replace("%1",r?r.getText():"")}.bind(this))}},e.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},e.Extensions.register("parent_tooltip_when_inline",e.Extensions.extensionParentTooltip_),e.fieldRegistry={},e.fieldRegistry.register=function(t,n){e.registry.register(e.registry.Type.FIELD,t,n)},e.fieldRegistry.unregister=function(t){e.registry.unregister(e.registry.Type.FIELD,t)},e.fieldRegistry.fromJson=function(t){var n=e.registry.getObject(e.registry.Type.FIELD,t.type);return n?n.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},e.IDeletable=function(){},e.blockAnimations={},e.blockAnimations.disconnectPid_=0,e.blockAnimations.disconnectGroup_=null,e.blockAnimations.disposeUiEffect=function(t){var n=t.workspace,r=t.getSvgRoot();n.getAudioManager().play("delete"),t=n.getSvgXY(r),(r=r.cloneNode(!0)).translateX_=t.x,r.translateY_=t.y,r.setAttribute("transform","translate("+t.x+","+t.y+")"),n.getParentSvg().appendChild(r),r.bBox_=r.getBBox(),e.blockAnimations.disposeUiStep_(r,n.RTL,new Date,n.scale)},e.blockAnimations.disposeUiStep_=function(t,n,r,s){var c=(new Date-r)/150;1<c?e.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(n?-1:1)*t.bBox_.width*s/2*c)+","+(t.translateY_+t.bBox_.height*s*c)+") scale("+(1-c)*s+")"),setTimeout(e.blockAnimations.disposeUiStep_,10,t,n,r,s))},e.blockAnimations.connectionUiEffect=function(t){var n=t.workspace,r=n.scale;if(n.getAudioManager().play("click"),!(1>r)){var s=n.getSvgXY(t.getSvgRoot());t.outputConnection?(s.x+=(t.RTL?3:-3)*r,s.y+=13*r):t.previousConnection&&(s.x+=(t.RTL?-23:23)*r,s.y+=3*r),t=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:s.x,cy:s.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),e.blockAnimations.connectionUiStep_(t,new Date,r)}},e.blockAnimations.connectionUiStep_=function(t,n,r){var s=(new Date-n)/150;1<s?e.utils.dom.removeNode(t):(t.setAttribute("r",25*s*r),t.style.opacity=1-s,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.connectionUiStep_,10,t,n,r))},e.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var n=t.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,t.RTL||(n*=-1),e.blockAnimations.disconnectUiStep_(t.getSvgRoot(),n,new Date)}},e.blockAnimations.disconnectUiStep_=function(t,n,r){var s=(new Date-r)/200;1<s?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(s*Math.PI*3)*(1-s)*n)+")",e.blockAnimations.disconnectGroup_=t,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.disconnectUiStep_,10,t,n,r)),t.setAttribute("transform",t.translate_+t.skew_)},e.blockAnimations.disconnectUiStop=function(){if(e.blockAnimations.disconnectGroup_){clearTimeout(e.blockAnimations.disconnectPid_);var t=e.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),e.blockAnimations.disconnectGroup_=null}},e.Events.BlockDrag=function(t,n,r){e.Events.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=n,this.blocks=r},e.utils.object.inherits(e.Events.BlockDrag,e.Events.UiBase),e.Events.BlockDrag.prototype.type=e.Events.BLOCK_DRAG,e.Events.BlockDrag.prototype.toJson=function(){var t=e.Events.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},e.Events.BlockDrag.prototype.fromJson=function(t){e.Events.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},e.registry.register(e.registry.Type.EVENT,e.Events.BLOCK_DRAG,e.Events.BlockDrag),e.IBlockDragger=function(){},e.InsertionMarkerManager=function(t){this.topBlock_=e.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",e.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,e.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{e.Events.enable()}},e.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},e.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},e.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(e.Events.disable(),this.hidePreview_(),e.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;e.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},e.InsertionMarkerManager.prototype.update=function(t,n){var r=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(r,n))||this.shouldUpdatePreviews_(r,t))&&(e.Events.disable(),this.maybeHidePreview_(r),this.maybeShowPreview_(r),e.Events.enable())},e.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var n=t.type;e.Events.disable();try{var r=this.workspace_.newBlock(n);if(r.setInsertionMarker(!0),t.mutationToDom){var s=t.mutationToDom();s&&r.domToMutation(s)}for(n=0;n<t.inputList.length;n++){var c=t.inputList[n];if(c.name!=e.constants.COLLAPSED_INPUT_NAME){var v=r.inputList[n];if(!v)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(s=0;s<c.fieldRow.length;s++){var D=c.fieldRow[s],P=v.fieldRow[s];if(!P)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));P.setValue(D.getValue())}}}r.setCollapsed(t.isCollapsed()),r.setInputsInline(t.getInputsInline()),r.initSvg(),r.getSvgRoot().setAttribute("visibility","hidden")}finally{e.Events.enable()}return r},e.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(t.push(n),this.lastOnStack_=n,this.lastMarker_){e.Events.disable();try{this.lastMarker_.dispose()}finally{e.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return t},e.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,n){var r=t.local,s=t.closest;return t=t.radius,r&&s?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==s&&this.localConnection_==r||(r=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(r*r+n*n),s&&t>n-e.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},e.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var n=this.getStartRadius_(),r=null,s=null,c=0;c<this.availableConnections_.length;c++){var v=this.availableConnections_[c],D=v.closest(n,t);D.connection&&(r=D.connection,s=v,n=D.radius)}return{closest:r,local:s,radius:n}},e.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?e.CONNECTING_SNAP_RADIUS:e.SNAP_RADIUS},e.InsertionMarkerManager.prototype.shouldDelete_=function(t,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,e.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,t&&!!t.closest)},e.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var n=t.closest;t=t.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=t,this.showPreview_()))}},e.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&n.shouldHighlightConnection(t)&&t.highlight()},e.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var n=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(n||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},e.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},e.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,n=this.closestConnection_,r=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=r.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");r.render(),r.rendered=!0,r.getSvgRoot().setAttribute("visibility","visible"),t&&n&&r.positionNearConnection(t,n),n&&t.connect(n),this.markerConnection_=t},e.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,n=t.getSourceBlock(),r=n.nextConnection,s=n.previousConnection,c=n.outputConnection;if(c=t.type==e.connectionTypes.INPUT_VALUE&&!(c&&c.targetConnection),!(t!=r||s&&s.targetConnection)||c?t.targetBlock().unplug(!1):t.type==e.connectionTypes.NEXT_STATEMENT&&t!=r?((r=t.targetConnection).getSourceBlock().unplug(!1),s=s?s.targetConnection:null,n.unplug(!0),s&&s.connect(r)):n.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=n.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},e.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},e.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},e.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},e.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},e.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},e.BlockDragger=function(t,n){this.draggingBlock_=t,this.workspace_=n,this.draggedConnectionManager_=new e.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=e.BlockDragger.initIconData_(t)},e.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},e.BlockDragger.initIconData_=function(t){var n=[];t=t.getDescendants(!1);for(var s,r=0;s=t[r];r++){s=s.getIcons();for(var c=0;c<s.length;c++){var v={location:s[c].getIconLocation(),icon:s[c]};n.push(v)}}return n},e.BlockDragger.prototype.startDrag=function(t,n){e.Events.getGroup()||e.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),e.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),e.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},e.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},e.BlockDragger.prototype.disconnectBlock_=function(t,n){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),e.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},e.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.drag=function(t,n){n=this.pixelsToWorkspaceUnits_(n);var r=e.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(r),this.dragIcons_(n),r=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(n,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==r&&(r&&r.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},e.BlockDragger.prototype.endDrag=function(t,n){if(this.drag(t,n),this.dragIconData_=[],this.fireDragEndEvent_(),e.utils.dom.stopTextWidthCache(),e.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{var r=(t=this.getNewLocationAfterDrag_(n)).delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),r?this.updateBlockAfterMove_(r):e.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var n={};return n.delta=this.pixelsToWorkspaceUnits_(t),n.newLocation=e.utils.Coordinate.sum(this.startXY_,n.delta),n},e.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),e.draggingConnections=[],!0)},e.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},e.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.updateToolboxStyle_=function(t){var n=this.workspace_.getToolbox();if(n){var r=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&"function"==typeof n.removeStyle?n.removeStyle(r):t||"function"!=typeof n.addStyle||n.addStyle(r)}},e.BlockDragger.prototype.fireMoveEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),e.Events.fire(t)},e.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},e.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BlockDragger.prototype.dragIcons_=function(t){for(var n=0;n<this.dragIconData_.length;n++){var r=this.dragIconData_[n];r.icon.setIconLocation(e.utils.Coordinate.sum(r.location,t))}},e.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},e.registry.register(e.registry.Type.BLOCK_DRAGGER,e.registry.DEFAULT,e.BlockDragger),e.IContextMenu=function(){},e.IDraggable=function(){},e.IBubble=function(){},e.Bubble=function(t,n,r,s,c,v){this.workspace_=t,this.content_=n,this.shape_=r,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,r=e.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(r=-r),this.arrow_radians_=e.utils.math.toRadians(r),t.getBubbleCanvas().appendChild(this.createDom_(n,!(!c||!v))),this.setAnchorLocation(s),c&&v||(c=(t=this.content_.getBBox()).width+2*e.Bubble.BORDER_WIDTH,v=t.height+2*e.Bubble.BORDER_WIDTH),this.setBubbleSize(c,v),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},e.Bubble.BORDER_WIDTH=6,e.Bubble.ARROW_THICKNESS=5,e.Bubble.ARROW_ANGLE=20,e.Bubble.ARROW_BEND=4,e.Bubble.ANCHOR_RADIUS=8,e.Bubble.onMouseUpWrapper_=null,e.Bubble.onMouseMoveWrapper_=null,e.Bubble.unbindDragEvents_=function(){e.Bubble.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseUpWrapper_),e.Bubble.onMouseUpWrapper_=null),e.Bubble.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseMoveWrapper_),e.Bubble.onMouseMoveWrapper_=null)},e.Bubble.bubbleMouseUp_=function(t){e.Touch.clearTouchIdentifier(),e.Bubble.unbindDragEvents_()},e.Bubble.prototype.rendered_=!1,e.Bubble.prototype.anchorXY_=null,e.Bubble.prototype.relativeLeft_=0,e.Bubble.prototype.relativeTop_=0,e.Bubble.prototype.width_=0,e.Bubble.prototype.height_=0,e.Bubble.prototype.autoLayout_=!0,e.Bubble.prototype.createDom_=function(t,n){this.bubbleGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var r={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return e.utils.userAgent.JAVA_FX&&(r={}),r=e.utils.dom.createSvgElement(e.utils.Svg.G,r,this.bubbleGroup_),this.bubbleArrow_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{},r),this.bubbleBack_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH},r),n?(this.resizeGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e.utils.dom.createSvgElement(e.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*e.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=e.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=e.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},e.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},e.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},e.Bubble.prototype.bubbleMouseDown_=function(t){var n=this.workspace_.getGesture(t);n&&n.handleBubbleStart(t,this)},e.Bubble.prototype.showContextMenu=function(t){},e.Bubble.prototype.isDeletable=function(){return!1},e.Bubble.prototype.setDeleteStyle=function(t){},e.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),e.Bubble.unbindDragEvents_(),e.utils.isRightButton(t)||(this.workspace_.startDrag(t,new e.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),e.Bubble.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,e.Bubble.bubbleMouseUp_),e.Bubble.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),e.hideChaff()),t.stopPropagation()},e.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},e.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},e.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},e.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},e.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},e.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(t),r=this.getOptimalRelativeTop_(t),s=this.shape_.getBBox(),c={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},v={x:-this.width_-30,y:r};r={x:s.width,y:r};var D={x:n,y:s.height};n=s.width<s.height?r:D,s=s.width<s.height?D:r,r=this.getOverlap_(c,t),D=this.getOverlap_(v,t);var P=this.getOverlap_(n,t);t=this.getOverlap_(s,t),r==(t=Math.max(r,D,P,t))?(this.relativeLeft_=c.x,this.relativeTop_=c.y):D==t?(this.relativeLeft_=v.x,this.relativeTop_=v.y):P==t?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=s.x,this.relativeTop_=s.y)},e.Bubble.prototype.getOverlap_=function(t,n){var r=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(r+this.width_,n.left+n.width)-Math.max(r,n.left))*(Math.min(t+this.height_,n.top+n.height)-Math.max(t,n.top))/(this.width_*this.height_)))},e.Bubble.prototype.getOptimalRelativeLeft_=function(t){var n=-this.width_/4;if(this.width_>t.width)return n;if(this.workspace_.RTL)var r=this.anchorXY_.x-n,s=r-this.width_,c=t.left+t.width,v=t.left+e.Scrollbar.scrollbarThickness/this.workspace_.scale;else r=(s=n+this.anchorXY_.x)+this.width_,v=t.left,c=t.left+t.width-e.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?s<v?n=-(v-this.anchorXY_.x+this.width_):r>c&&(n=-(c-this.anchorXY_.x)):s<v?n=v-this.anchorXY_.x:r>c&&(n=c-this.anchorXY_.x-this.width_),n},e.Bubble.prototype.getOptimalRelativeTop_=function(t){var n=-this.height_/4;if(this.height_>t.height)return n;var r=this.anchorXY_.y+n,c=t.top;t=t.top+t.height-e.Scrollbar.scrollbarThickness/this.workspace_.scale;var v=this.anchorXY_.y;return r<c?n=c-v:r+this.height_>t&&(n=t-v-this.height_),n},e.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;this.moveTo(t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},e.Bubble.prototype.moveTo=function(t,n){this.bubbleGroup_.setAttribute("transform","translate("+t+","+n+")")},e.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},e.Bubble.prototype.getBubbleSize=function(){return new e.utils.Size(this.width_,this.height_)},e.Bubble.prototype.setBubbleSize=function(t,n){var r=2*e.Bubble.BORDER_WIDTH;t=Math.max(t,r+45),n=Math.max(n,r+20),this.width_=t,this.height_=n,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*e.Bubble.BORDER_WIDTH+","+(n-r)+") scale(-1 1)":"translate("+(t-r)+","+(n-r)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},e.Bubble.prototype.renderArrow_=function(){var t=[],n=this.width_/2,r=this.height_/2,s=-this.relativeLeft_,c=-this.relativeTop_;if(n==s&&r==c)t.push("M "+n+","+r);else{c-=r,s-=n,this.workspace_.RTL&&(s*=-1);var v=Math.sqrt(c*c+s*s),D=Math.acos(s/v);0>c&&(D=2*Math.PI-D);var P=D+Math.PI/2;P>2*Math.PI&&(P-=2*Math.PI);var G=Math.sin(P),it=Math.cos(P),q=this.getBubbleSize();P=(q.width+q.height)/e.Bubble.ARROW_THICKNESS,P=Math.min(P,q.width,q.height)/4,s=n+(q=1-e.Bubble.ANCHOR_RADIUS/v)*s,c=r+q*c,q=n+P*it;var bt=r+P*G;n-=P*it,r-=P*G,(G=D+this.arrow_radians_)>2*Math.PI&&(G-=2*Math.PI),D=Math.sin(G)*v/e.Bubble.ARROW_BEND,v=Math.cos(G)*v/e.Bubble.ARROW_BEND,t.push("M"+q+","+bt),t.push("C"+(q+v)+","+(bt+D)+" "+s+","+c+" "+s+","+c),t.push("C"+s+","+c+" "+(n+v)+","+(r+D)+" "+n+","+r)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},e.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},e.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&e.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&e.browserEvents.unbind(this.onMouseDownResizeWrapper_),e.Bubble.unbindDragEvents_(),e.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},e.Bubble.prototype.moveDuringDrag=function(t,n){t?t.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},e.Bubble.prototype.getRelativeToSurfaceXY=function(){return new e.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},e.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},e.Bubble.textToDom=function(t){var n=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:e.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var r=0;r<t.length;r++){var s=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{dy:"1em",x:e.Bubble.BORDER_WIDTH},n),c=document.createTextNode(t[r]);s.appendChild(c)}return n},e.Bubble.createNonEditableBubble=function(t,n,r){if((r=new e.Bubble(n.workspace,t,n.pathObject.svgPath,r,null,null)).setSvgId(n.id),n.RTL){n=t.getBBox().width;for(var c,s=0;c=t.childNodes[s];s++)c.setAttribute("text-anchor","end"),c.setAttribute("x",n+e.Bubble.BORDER_WIDTH)}return r},e.Events.CommentBase=function(t){this.commentId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.utils.object.inherits(e.Events.CommentBase,e.Events.Abstract),e.Events.CommentBase.prototype.toJson=function(){var t=e.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},e.Events.CommentBase.prototype.fromJson=function(t){e.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},e.Events.CommentChange=function(t,n,r){e.Events.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===r?"":r)},e.utils.object.inherits(e.Events.CommentChange,e.Events.CommentBase),e.Events.CommentChange.prototype.type=e.Events.COMMENT_CHANGE,e.Events.CommentChange.prototype.toJson=function(){var t=e.Events.CommentChange.superClass_.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},e.Events.CommentChange.prototype.fromJson=function(t){e.Events.CommentChange.superClass_.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},e.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},e.Events.CommentChange.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},e.Events.CommentCreate=function(t){e.Events.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentCreate,e.Events.CommentBase),e.Events.CommentCreate.prototype.type=e.Events.COMMENT_CREATE,e.Events.CommentCreate.prototype.toJson=function(){var t=e.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t},e.Events.CommentCreate.prototype.fromJson=function(t){e.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml)},e.Events.CommentCreate.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,t)},e.Events.CommentCreateDeleteHelper=function(t,n){var r=t.getEventWorkspace_();n?((n=e.utils.xml.createElement("xml")).appendChild(t.xml),e.Xml.domToWorkspace(n,r)):(r=r.getCommentById(t.commentId))?r.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},e.Events.CommentDelete=function(t){e.Events.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentDelete,e.Events.CommentBase),e.Events.CommentDelete.prototype.type=e.Events.COMMENT_DELETE,e.Events.CommentDelete.prototype.toJson=function(){return e.Events.CommentDelete.superClass_.toJson.call(this)},e.Events.CommentDelete.prototype.fromJson=function(t){e.Events.CommentDelete.superClass_.fromJson.call(this,t)},e.Events.CommentDelete.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,!t)},e.Events.CommentMove=function(t){e.Events.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},e.utils.object.inherits(e.Events.CommentMove,e.Events.CommentBase),e.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},e.Events.CommentMove.prototype.type=e.Events.COMMENT_MOVE,e.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},e.Events.CommentMove.prototype.toJson=function(){var t=e.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},e.Events.CommentMove.prototype.fromJson=function(t){if(e.Events.CommentMove.superClass_.fromJson.call(this,t),t.oldCoordinate){var n=t.oldCoordinate.split(",");this.oldCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}t.newCoordinate&&(n=t.newCoordinate.split(","),this.newCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1])))},e.Events.CommentMove.prototype.isNull=function(){return e.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},e.Events.CommentMove.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){t=t?this.newCoordinate_:this.oldCoordinate_;var r=n.getXY();n.moveBy(t.x-r.x,t.y-r.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CREATE,e.Events.CommentCreate),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CHANGE,e.Events.CommentChange),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_MOVE,e.Events.CommentMove),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_DELETE,e.Events.CommentDelete),e.BubbleDragger=function(t,n){this.draggingBubble_=t,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=e.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},e.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},e.BubbleDragger.prototype.startBubbleDrag=function(){e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},e.BubbleDragger.prototype.dragBubble=function(t,n){n=this.pixelsToWorkspaceUnits_(n),n=e.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},e.BubbleDragger.prototype.shouldDelete_=function(t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,e.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.draggingBubble_,!1)},e.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},e.BubbleDragger.prototype.endBubbleDrag=function(t,n){this.dragBubble(t,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new(e.Events.get(e.Events.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),e.Events.fire(t)}},e.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},e.Events.Click=function(t,n,r){e.Events.Click.superClass_.constructor.call(this,t?t.workspace.id:n),this.blockId=t?t.id:null,this.targetType=r},e.utils.object.inherits(e.Events.Click,e.Events.UiBase),e.Events.Click.prototype.type=e.Events.CLICK,e.Events.Click.prototype.toJson=function(){var t=e.Events.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},e.Events.Click.prototype.fromJson=function(t){e.Events.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.CLICK,e.Events.Click),e.WorkspaceDragger=function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new e.utils.Coordinate(t.scrollX,t.scrollY)},e.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},e.WorkspaceDragger.prototype.startDrag=function(){e.selected&&e.selected.unselect(),this.workspace_.setupDragSurface()},e.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},e.WorkspaceDragger.prototype.drag=function(t){if(t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,t.y)}},e.Gesture=function(t,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new e.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!e.DRAG_STACK},e.Gesture.prototype.dispose=function(){e.Touch.clearTouchIdentifier(),e.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&e.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&e.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},e.Gesture.prototype.updateFromEvent_=function(t){var n=new e.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),e.longStop_()),this.mostRecentEvent_=t},e.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=e.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=e.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.FLYOUT_DRAG_RADIUS:e.DRAG_RADIUS))},e.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),e.Events.getGroup()||e.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},e.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},e.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},e.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new e.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},e.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},e.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(e.registry.getClassFromOptions(e.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new e.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.doStart=function(t){e.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,e.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),e.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,e.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),e.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||e.longStart(t,this),this.mouseDownXY_=new e.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},e.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),e.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},e.Gesture.prototype.cancel=function(){this.isEnding_||(e.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},e.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),e.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(e.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},e.Gesture.prototype.handleWsStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=t,this.doStart(t)},e.Gesture.prototype.fireWorkspaceClick_=function(t){e.Events.fire(new(e.Events.get(e.Events.CLICK))(null,t.id,"workspace"))},e.Gesture.prototype.handleFlyoutStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(t,n.getWorkspace())},e.Gesture.prototype.handleBlockStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=t},e.Gesture.prototype.handleBubbleStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=t},e.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},e.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},e.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(e.Events.getGroup()||e.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new(e.Events.get(e.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");e.Events.fire(t)}this.bringBlockToFront_(),e.Events.setGroup(!1)},e.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,e.selected&&e.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},e.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},e.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},e.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},e.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},e.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},e.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},e.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},e.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},e.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},e.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},e.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},e.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},e.Gesture.prototype.hasStarted=function(){return this.hasStarted_},e.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},e.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},e.Gesture.inProgress=function(){for(var r,t=e.Workspace.getAll(),n=0;r=t[n];n++)if(r.currentGesture_)return!0;return!1},e.IRegistrable=function(){},e.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},e.Marker.prototype.setDrawer=function(t){this.drawer_=t},e.Marker.prototype.getDrawer=function(){return this.drawer_},e.Marker.prototype.getCurNode=function(){return this.curNode_},e.Marker.prototype.setCurNode=function(t){var n=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(n,this.curNode_)},e.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},e.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},e.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},e.Cursor=function(){e.Cursor.superClass_.constructor.call(this),this.type="cursor"},e.utils.object.inherits(e.Cursor,e.Marker),e.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},e.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()==e.ASTNode.types.PREVIOUS||t.getType()==e.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},e.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},e.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==e.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},e.registry.register(e.registry.Type.CURSOR,e.registry.DEFAULT,e.Cursor),e.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t},e.MarkerManager.LOCAL_MARKER="local_marker_1",e.MarkerManager.prototype.registerMarker=function(t,n){this.markers_[t]&&this.unregisterMarker(t),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[t]=n},e.MarkerManager.prototype.unregisterMarker=function(t){var n=this.markers_[t];if(!n)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[t]},e.MarkerManager.prototype.getCursor=function(){return this.cursor_},e.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},e.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},e.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},e.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},e.MarkerManager.prototype.dispose=function(){for(var r,t=Object.keys(this.markers_),n=0;r=t[n];n++)this.unregisterMarker(r);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},e.WidgetDiv={},e.WidgetDiv.owner_=null,e.WidgetDiv.dispose_=null,e.WidgetDiv.rendererClassName_="",e.WidgetDiv.themeClassName_="",e.WidgetDiv.createDom=function(){e.WidgetDiv.DIV||(e.WidgetDiv.DIV=document.createElement("div"),e.WidgetDiv.DIV.className="blocklyWidgetDiv",(e.parentContainer||document.body).appendChild(e.WidgetDiv.DIV))},e.WidgetDiv.show=function(t,n,r){e.WidgetDiv.hide(),e.WidgetDiv.owner_=t,e.WidgetDiv.dispose_=r,(t=e.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",t.style.display="block",n=e.getMainWorkspace(),e.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),e.WidgetDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.WidgetDiv.rendererClassName_),e.utils.dom.addClass(t,e.WidgetDiv.themeClassName_)},e.WidgetDiv.hide=function(){if(e.WidgetDiv.isVisible()){e.WidgetDiv.owner_=null;var t=e.WidgetDiv.DIV;t.style.display="none",t.style.left="",t.style.top="",e.WidgetDiv.dispose_&&e.WidgetDiv.dispose_(),e.WidgetDiv.dispose_=null,t.textContent="",e.WidgetDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.rendererClassName_),e.WidgetDiv.rendererClassName_=""),e.WidgetDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.themeClassName_),e.WidgetDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.WidgetDiv.isVisible=function(){return!!e.WidgetDiv.owner_},e.WidgetDiv.hideIfOwner=function(t){e.WidgetDiv.owner_==t&&e.WidgetDiv.hide()},e.WidgetDiv.positionInternal_=function(t,n,r){e.WidgetDiv.DIV.style.left=t+"px",e.WidgetDiv.DIV.style.top=n+"px",e.WidgetDiv.DIV.style.height=r+"px"},e.WidgetDiv.positionWithAnchor=function(t,n,r,s){var c=e.WidgetDiv.calculateY_(t,n,r);t=e.WidgetDiv.calculateX_(t,n,r,s),0>c?e.WidgetDiv.positionInternal_(t,0,r.height+c):e.WidgetDiv.positionInternal_(t,c,r.height)},e.WidgetDiv.calculateX_=function(t,n,r,s){return s?(n=Math.max(n.right-r.width,t.left),Math.min(n,t.right-r.width)):(n=Math.min(n.left,t.right-r.width),Math.max(n,t.left))},e.WidgetDiv.calculateY_=function(t,n,r){return n.bottom+r.height>=t.bottom?n.top-r.height:n.bottom},e.Field=function(t,n,r){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new e.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,r&&this.configure_(r),this.setValue(t),n&&this.setValidator(n)},e.Field.prototype.DEFAULT_VALUE=null,e.Field.prototype.name=void 0,e.Field.prototype.disposed=!1,e.Field.prototype.maxDisplayLength=50,e.Field.prototype.sourceBlock_=null,e.Field.prototype.isDirty_=!0,e.Field.prototype.visible_=!0,e.Field.prototype.clickTarget_=null,e.Field.NBSP="\xa0",e.Field.prototype.EDITABLE=!0,e.Field.prototype.SERIALIZABLE=!1,e.Field.prototype.configure_=function(t){var n=t.tooltip;"string"==typeof n&&(n=e.utils.replaceMessageReferences(t.tooltip)),n&&this.setTooltip(n)},e.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},e.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},e.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},e.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},e.Field.prototype.initModel=function(){},e.Field.prototype.createBorderRect_=function(){this.borderRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},e.Field.prototype.createTextElement_=function(){this.textElement_=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},e.Field.prototype.bindEvents_=function(){e.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=e.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},e.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},e.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},e.Field.prototype.dispose=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hideIfOwner(this),e.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&e.browserEvents.unbind(this.mouseDownWrapper_),e.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},e.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(e.utils.dom.addClass(t,"blocklyEditableText"),e.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(e.utils.dom.addClass(t,"blocklyNonEditableText"),e.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},e.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},e.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},e.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},e.Field.prototype.isVisible=function(){return this.visible_},e.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var n=this.getSvgRoot();n&&(n.style.display=t?"block":"none")}},e.Field.prototype.setValidator=function(t){this.validator_=t},e.Field.prototype.getValidator=function(){return this.validator_},e.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},e.Field.prototype.applyColour=function(){},e.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},e.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},e.Field.prototype.updateSize_=function(t){var n=this.getConstants(),r=2*(t=null!=t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),s=n.FIELD_TEXT_HEIGHT,c=0;this.textElement_&&(r+=c=e.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(s=Math.max(s,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=s,this.size_.width=r,this.positionTextElement_(t,c),this.positionBorderRect_()},e.Field.prototype.positionTextElement_=function(t,n){if(this.textElement_){var r=this.getConstants(),s=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-t:t),this.textElement_.setAttribute("y",r.FIELD_TEXT_BASELINE_CENTER?s:s-r.FIELD_TEXT_HEIGHT/2+r.FIELD_TEXT_BASELINE)}},e.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},e.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new e.utils.Size(0,0)},e.Field.prototype.getScaledBBox=function(){if(this.borderRect_)t=this.borderRect_.getBoundingClientRect(),r=e.utils.style.getPageOffset(this.borderRect_),s=t.width,t=t.height;else{var t=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,r=this.getAbsoluteXY_(),s=t.width*n;t=t.height*n,e.utils.userAgent.GECKO?(r.x+=1.5*n,r.y+=1.5*n):e.utils.userAgent.EDGE||e.utils.userAgent.IE||(r.x-=.5*n,r.y-=.5*n),s+=1*n,t+=1*n}return new e.utils.Rect(r.y,r.y+t,r.x,r.x+s)},e.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,e.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200f"),t):e.Field.NBSP},e.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},e.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},e.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},e.Field.prototype.setValue=function(t){if(null!==t){var n=this.doClassValidation_(t);if(!((t=this.processValidation_(t,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,t),(t=this.processValidation_(t,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var r=this.getValue();r===t?this.doValueUpdate_(t):(n&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(n,"field",this.name||null,r,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}}},e.Field.prototype.processValidation_=function(t,n){return null===n?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(t=n),t)},e.Field.prototype.getValue=function(){return this.value_},e.Field.prototype.doClassValidation_=function(t){return null==t?null:t},e.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},e.Field.prototype.doValueInvalid_=function(t){},e.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},e.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=t:this.tooltip_=t},e.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return e.Tooltip.getTooltipOfObject(t||{tooltip:this.tooltip_})},e.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},e.Field.prototype.getAbsoluteXY_=function(){return e.utils.style.getPageOffset(this.getClickTarget_())},e.Field.prototype.referencesVariables=function(){return!1},e.Field.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_,r=n.inputList,s=0;s<n.inputList.length;s++)for(var c=r[s],v=c.fieldRow,D=0;D<v.length;D++)if(v[D]===this){t=c;break}return t},e.Field.prototype.getFlipRtl=function(){return!1},e.Field.prototype.isTabNavigable=function(){return!1},e.Field.prototype.onShortcut=function(t){return!1},e.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},e.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.FieldLabel=function(t,n,r){this.class_=null,e.FieldLabel.superClass_.constructor.call(this,t,null,r),r||(this.class_=n||null)},e.utils.object.inherits(e.FieldLabel,e.Field),e.FieldLabel.prototype.DEFAULT_VALUE="",e.FieldLabel.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabel(n,void 0,t)},e.FieldLabel.prototype.EDITABLE=!1,e.FieldLabel.prototype.configure_=function(t){e.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},e.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&e.utils.dom.addClass(this.textElement_,this.class_)},e.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&e.utils.dom.removeClass(this.textElement_,this.class_),t&&e.utils.dom.addClass(this.textElement_,t)),this.class_=t},e.fieldRegistry.register("field_label",e.FieldLabel),e.Input=function(t,n,r,s){if(t!=e.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=n,this.sourceBlock_=r,this.connection=s,this.fieldRow=[]},e.Input.prototype.align=e.constants.ALIGN.LEFT,e.Input.prototype.visible_=!0,e.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Input.prototype.appendField=function(t,n){return this.insertFieldAt(this.fieldRow.length,t,n),this},e.Input.prototype.insertFieldAt=function(t,n,r){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(n||""==n&&r)&&("string"==typeof n&&(n=e.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=r,n.setVisible(this.isVisible()),n.prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,n),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},e.Input.prototype.removeField=function(t,n){for(var s,r=0;s=this.fieldRow[r];r++)if(s.name===t)return s.dispose(),this.fieldRow.splice(r,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+t+'" not found.')},e.Input.prototype.isVisible=function(){return this.visible_},e.Input.prototype.setVisible=function(t){var n=[];if(this.visible_==t)return n;this.visible_=t;for(var s,r=0;s=this.fieldRow[r];r++)s.setVisible(t);return this.connection&&(this.connection=this.connection,t?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),r=this.connection.targetBlock())&&(r.getSvgRoot().style.display=t?"block":"none"),n},e.Input.prototype.markDirty=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.markDirty()},e.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},e.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},e.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},e.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},e.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},e.Input.prototype.dispose=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},e.Block=function(t,n,r){if(e.Generator&&void 0!==e.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=r&&!t.getBlockById(r)?r:e.utils.genUid(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new e.utils.Size(160,80)},this.xy_=new e.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(r=e.Blocks[n])||"object"!=typeof r)throw TypeError("Unknown block type: "+n);e.utils.object.mixin(this,r)}t.addTopBlock(this),t.addTypedBlock(this),(t=e.Events.getGroup())||e.Events.setGroup(!0),n=e.Events.recordUndo;try{"function"==typeof this.init&&(e.Events.recordUndo=!1,this.init(),e.Events.recordUndo=n),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(this))}finally{t||e.Events.setGroup(!1),e.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},e.Block.COLLAPSED_INPUT_NAME=e.constants.COLLAPSED_INPUT_NAME,e.Block.COLLAPSED_FIELD_NAME=e.constants.COLLAPSED_FIELD_NAME,e.Block.prototype.data=null,e.Block.prototype.disposed=!1,e.Block.prototype.hue_=null,e.Block.prototype.colour_="#000000",e.Block.prototype.styleName_="",e.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_DELETE))(this)),e.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),e.selected==this&&(e.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var r;r=this.inputList[n];n++)r.dispose();this.inputList.length=0;var c,s=this.getConnections_(!0);for(n=0;c=s[n];n++)c.dispose()}finally{e.Events.enable(),this.disposed=!0}}},e.Block.prototype.initModel=function(){for(var n,t=0;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.initModel&&s.initModel()},e.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},e.Block.prototype.unplugFromRow_=function(t){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,n,!1)?n.connect(t):t.onFailedConnect(n))},e.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;if(r&&r.type==e.connectionTypes.INPUT_VALUE&&r.targetConnection){if(t)return null;t=r}}return t},e.Block.prototype.unplugFromStack_=function(t){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var r=this.getNextBlock();t&&r&&!r.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,t,!1)&&n.connect(t))},e.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var r,n=0;r=this.inputList[n];n++)r.connection&&t.push(r.connection);return t},e.Block.prototype.lastConnectionInStack=function(t){for(var n=this.nextConnection;n;){var r=n.targetBlock();if(!r||t&&r.isShadow())return n;n=r.nextConnection}return null},e.Block.prototype.bumpNeighbours=function(){},e.Block.prototype.getParent=function(){return this.parentBlock_},e.Block.prototype.getInputWithBlock=function(t){for(var r,n=0;r=this.inputList[n];n++)if(r.connection&&r.connection.targetBlock()==t)return r;return null},e.Block.prototype.getSurroundParent=function(){var t=this;do{var n=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==n);return t},e.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},e.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},e.Block.prototype.getFirstStatementConnection=function(){for(var n,t=0;n=this.inputList[t];t++)if(n.connection&&n.connection.type==e.connectionTypes.NEXT_STATEMENT)return n.connection;return null},e.Block.prototype.getRootBlock=function(){var t=this;do{var n=t;t=n.parentBlock_}while(t);return n},e.Block.prototype.getTopStackBlock=function(){var t=this;do{var n=t.getPreviousBlock()}while(n&&n.getNextBlock()==t&&(t=n));return t},e.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var r,n=0;r=this.inputList[n];n++)r.connection&&(r=r.connection.targetBlock())&&t.push(r);return(n=this.getNextBlock())&&t.push(n),t},e.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(e.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},e.Block.prototype.getDescendants=function(t){for(var s,n=[this],r=this.getChildren(t),c=0;s=r[c];c++)n.push.apply(n,s.getDescendants(t));return n},e.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setDeletable=function(t){this.deletable_=t},e.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setMovable=function(t){this.movable_=t},e.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(e.utils.getBlockTypeCounts(this,!0))},e.Block.prototype.isShadow=function(){return this.isShadow_},e.Block.prototype.setShadow=function(t){this.isShadow_=t},e.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},e.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},e.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var n;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.updateEditable()},e.Block.prototype.isDisposed=function(){return this.disposed},e.Block.prototype.getMatchingConnection=function(t,n){var r=this.getConnections_(!0);if(t=t.getConnections_(!0),r.length!=t.length)throw Error("Connection lists did not match in length.");for(var s=0;s<t.length;s++)if(t[s]==n)return r[s];return null},e.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},e.Block.prototype.setTooltip=function(t){this.tooltip=t},e.Block.prototype.getTooltip=function(){return e.Tooltip.getTooltipOfObject(this)},e.Block.prototype.getColour=function(){return this.colour_},e.Block.prototype.getStyleName=function(){return this.styleName_},e.Block.prototype.getHue=function(){return this.hue_},e.Block.prototype.setColour=function(t){t=e.utils.parseBlockColour(t),this.hue_=t.hue,this.colour_=t.hex},e.Block.prototype.setStyle=function(t){this.styleName_=t},e.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},e.Block.prototype.getField=function(t){if("string"!=typeof t)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(var r,n=0;r=this.inputList[n];n++)for(var c,s=0;c=r.fieldRow[s];s++)if(c.name===t)return c;return null},e.Block.prototype.getVars=function(){for(var r,t=[],n=0;r=this.inputList[n];n++)for(var c,s=0;c=r.fieldRow[s];s++)c.referencesVariables()&&t.push(c.getValue());return t},e.Block.prototype.getVarModels=function(){for(var r,t=[],n=0;r=this.inputList[n];n++)for(var c,s=0;c=r.fieldRow[s];s++)c.referencesVariables()&&(c=this.workspace.getVariableById(c.getValue()))&&t.push(c);return t},e.Block.prototype.updateVarName=function(t){for(var r,n=0;r=this.inputList[n];n++)for(var c,s=0;c=r.fieldRow[s];s++)c.referencesVariables()&&t.getId()==c.getValue()&&c.refreshVariableName()},e.Block.prototype.renameVarById=function(t,n){for(var s,r=0;s=this.inputList[r];r++)for(var v,c=0;v=s.fieldRow[c];c++)v.referencesVariables()&&t==v.getValue()&&v.setValue(n)},e.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},e.Block.prototype.setFieldValue=function(t,n){var r=this.getField(n);if(!r)throw Error('Field "'+n+'" not found.');r.setValue(t)},e.Block.prototype.setPreviousStatement=function(t,n){if(t){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(e.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},e.Block.prototype.setNextStatement=function(t,n){if(t)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(e.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},e.Block.prototype.setOutput=function(t,n){if(t){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(e.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},e.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},e.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.DUMMY&&this.inputList[t].type==e.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.VALUE&&this.inputList[t].type==e.inputTypes.DUMMY)return!0;return!1},e.Block.prototype.setOutputShape=function(t){this.outputShape_=t},e.Block.prototype.getOutputShape=function(){return this.outputShape_},e.Block.prototype.isEnabled=function(){return!this.disabled},e.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},e.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},e.Block.prototype.isCollapsed=function(){return this.collapsed_},e.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},e.Block.prototype.toString=function(t,n){function r(it){var q=it.getCheck();return!q&&it.targetConnection&&(q=it.targetConnection.getCheck()),!!q&&(-1!=q.indexOf("Boolean")||-1!=q.indexOf("Number"))}function s(){D&&D.getType()==P.getType()&&D.getLocation()==P.getLocation()&&(D=null)}var c=[];n=n||"?";var v=e.ASTNode.NAVIGATE_ALL_FIELDS;e.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var D=e.ASTNode.createBlockNode(this),P=D;D;){switch(D.getType()){case e.ASTNode.types.INPUT:var G=D.getLocation();D.in()?r(G)&&c.push("("):c.push(n);break;case e.ASTNode.types.FIELD:(G=D.getLocation()).name!=e.constants.COLLAPSED_FIELD_NAME&&c.push(G.getText())}if(!(D=(G=D).in()||G.next())){for(D=G.out(),s();D&&!D.next();)D=D.out(),s(),D&&D.getType()==e.ASTNode.types.INPUT&&r(D.getLocation())&&c.push(")");D&&(D=D.next())}}for(e.ASTNode.NAVIGATE_ALL_FIELDS=v,n=2;n<c.length;n++)"("==c[n-2]&&")"==c[n]&&(c[n-2]=c[n-1],c.splice(n-1,2));return c=(c=c.reduce(function(it,q){return it+("("==it.substr(-1)||")"==q?"":" ")+q},"")).trim()||"???",t&&c.length>t&&(c=c.substring(0,t-3)+"..."),c},e.Block.prototype.appendValueInput=function(t){return this.appendInput_(e.inputTypes.VALUE,t)},e.Block.prototype.appendStatementInput=function(t){return this.appendInput_(e.inputTypes.STATEMENT,t)},e.Block.prototype.appendDummyInput=function(t){return this.appendInput_(e.inputTypes.DUMMY,t||"")},e.Block.prototype.jsonInit=function(t){var n=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(n+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,n):this.jsonInitColour_(t,n);for(var r=0;void 0!==t["message"+r];)this.interpolate_(t["message"+r],t["args"+r]||[],t["lastDummyAlign"+r],n),r++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(r=e.utils.replaceMessageReferences(r=t.tooltip),this.setTooltip(r)),void 0!==t.enableContextMenu&&(this.contextMenu=!!(r=t.enableContextMenu)),void 0!==t.helpUrl&&(r=e.utils.replaceMessageReferences(r=t.helpUrl),this.setHelpUrl(r)),"string"==typeof t.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&e.Extensions.apply(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(n=0;n<t.length;++n)e.Extensions.apply(t[n],this,!1)},e.Block.prototype.jsonInitColour_=function(t,n){if("colour"in t)if(void 0===t.colour)console.warn(n+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(r){console.warn(n+"Illegal colour value: ",t)}}},e.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(r){console.warn(n+"Style does not exist: ",t)}},e.Block.prototype.mixin=function(t,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var r in n=[],t)void 0!==this[r]&&n.push(r);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}e.utils.object.mixin(this,t)},e.Block.prototype.interpolate_=function(t,n,r,s){t=e.utils.tokenizeInterpolation(t),this.validateTokens_(t,n.length),n=this.interpolateArguments_(t,n,r),r=[],t=0;for(var c;c=n[t];t++)if(this.isInputKeyword_(c.type)){if(c=this.inputFromJson_(c,s)){for(var D,v=0;D=r[v];v++)c.appendField(D[0],D[1]);r.length=0}}else(v=this.fieldFromJson_(c))&&r.push([v,c.name])},e.Block.prototype.validateTokens_=function(t,n){for(var r=[],s=0,c=0;c<t.length;c++){var v=t[c];if("number"==typeof v){if(1>v||v>n)throw Error('Block "'+this.type+'": Message index %'+v+" out of range.");if(r[v])throw Error('Block "'+this.type+'": Message index %'+v+" duplicated.");r[v]=!0,s++}}if(s!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},e.Block.prototype.interpolateArguments_=function(t,n,r){for(var s=[],c=0;c<t.length;c++){var v=t[c];"number"==typeof v&&(v=n[v-1]),("string"!=typeof v||(v=this.stringToFieldJson_(v)))&&s.push(v)}return(t=s.length)&&!this.isInputKeyword_(s[t-1].type)&&(t={type:"input_dummy"},r&&(t.align=r),s.push(t)),s},e.Block.prototype.fieldFromJson_=function(t){var n=e.fieldRegistry.fromJson(t);return!n&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):n},e.Block.prototype.inputFromJson_=function(t,n){var r={LEFT:e.constants.ALIGN.LEFT,RIGHT:e.constants.ALIGN.RIGHT,CENTRE:e.constants.ALIGN.CENTRE,CENTER:e.constants.ALIGN.CENTRE},s=null;switch(t.type){case"input_value":s=this.appendValueInput(t.name);break;case"input_statement":s=this.appendStatementInput(t.name);break;case"input_dummy":s=this.appendDummyInput(t.name)}return s?(t.check&&s.setCheck(t.check),t.align&&(void 0===(r=r[t.align.toUpperCase()])?console.warn(n+"Illegal align value: ",t.align):s.setAlign(r)),s):null},e.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},e.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},e.Block.prototype.appendInput_=function(t,n){var r=null;return(t==e.inputTypes.VALUE||t==e.inputTypes.STATEMENT)&&(r=this.makeConnection_(t)),t==e.inputTypes.STATEMENT&&this.statementInputCount++,t=new e.Input(t,n,this,r),this.inputList.push(t),t},e.Block.prototype.moveInputBefore=function(t,n){if(t!=n){for(var v,r=-1,s=n?-1:this.inputList.length,c=0;v=this.inputList[c];c++)if(v.name==t){if(r=c,-1!=s)break}else if(n&&v.name==n&&(s=c,-1!=r))break;if(-1==r)throw Error('Named input "'+t+'" not found.');if(-1==s)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(r,s)}},e.Block.prototype.moveNumberedInputBefore=function(t,n){if(t==n)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var r=this.inputList[t];this.inputList.splice(t,1),t<n&&n--,this.inputList.splice(n,0,r)},e.Block.prototype.removeInput=function(t,n){for(var s,r=0;s=this.inputList[r];r++)if(s.name==t)return s.type==e.inputTypes.STATEMENT&&this.statementInputCount--,s.dispose(),this.inputList.splice(r,1),!0;if(n)return!1;throw Error("Input not found: "+t)},e.Block.prototype.getInput=function(t){for(var r,n=0;r=this.inputList[n];n++)if(r.name==t)return r;return null},e.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},e.Block.prototype.getCommentText=function(){return this.commentModel.text},e.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},e.Block.prototype.setWarningText=function(t,n){},e.Block.prototype.setMutator=function(t){},e.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},e.Block.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var r=new(e.Events.get(e.Events.BLOCK_MOVE))(this);this.xy_.translate(t,n),r.recordNew(),e.Events.fire(r)},e.Block.prototype.makeConnection_=function(t){return new e.Connection(this,t)},e.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var r,n=0;r=this.inputList[n];n++)if(r.connection&&(!(r=r.connection.targetBlock())||!r.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},e.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},e.blockRendering.IPathObject=function(t,n){},e.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},e.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},e.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},e.Menu.prototype.render=function(t){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&e.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var s,r=0;s=this.menuItems_[r];r++)n.appendChild(s.createDom());this.mouseOverHandler_=e.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=e.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=e.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=e.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=e.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),t.appendChild(n)},e.Menu.prototype.getElement=function(){return this.element_},e.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),e.utils.dom.addClass(t,"blocklyFocused"))},e.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),e.utils.dom.removeClass(t,"blocklyFocused"))},e.Menu.prototype.setRole=function(t){this.roleName_=t},e.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(e.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(e.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(e.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(e.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(e.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,t=0;n=this.menuItems_[t];t++)n.dispose();this.element_=null},e.Menu.prototype.getMenuItem_=function(t){for(var n=this.getElement();t&&t!=n;){if(e.utils.dom.hasClass(t,"blocklyMenuItem"))for(var s,r=0;s=this.menuItems_[r];r++)if(s.getElement()==t)return s;t=t.parentElement}return null},e.Menu.prototype.setHighlighted=function(t){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,n=this.getElement(),e.utils.style.scrollIntoContainerView(t.getElement(),n),e.utils.aria.setState(n,e.utils.aria.State.ACTIVEDESCENDANT,t.getId()))},e.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},e.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},e.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},e.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},e.Menu.prototype.highlightHelper_=function(t,n){t+=n;for(var r;r=this.menuItems_[t];){if(r.isEnabled()){this.setHighlighted(r);break}t+=n}},e.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},e.Menu.prototype.handleClick_=function(t){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof t.clientX){var r=new e.utils.Coordinate(t.clientX,t.clientY);if(1>e.utils.Coordinate.distance(n,r))return}(t=this.getMenuItem_(t.target))&&t.performAction()},e.Menu.prototype.handleMouseEnter_=function(t){this.focus()},e.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},e.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var n=this.highlightedItem_;switch(t.keyCode){case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:n&&n.performAction();break;case e.utils.KeyCodes.UP:this.highlightPrevious();break;case e.utils.KeyCodes.DOWN:this.highlightNext();break;case e.utils.KeyCodes.PAGE_UP:case e.utils.KeyCodes.HOME:this.highlightFirst_();break;case e.utils.KeyCodes.PAGE_DOWN:case e.utils.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},e.Menu.prototype.getSize=function(){var t=this.getElement(),n=e.utils.style.getSize(t);return n.height=t.scrollHeight,n},e.MenuItem=function(t,n){this.content_=t,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=e.utils.IdGenerator.getNextUniqueId(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var r=document.createElement("div");r.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(r)}return r=this.content_,"string"==typeof this.content_&&(r=document.createTextNode(this.content_)),n.appendChild(r),t.appendChild(n),this.roleName_&&e.utils.aria.setRole(t,this.roleName_),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),e.utils.aria.setState(t,e.utils.aria.State.DISABLED,!this.enabled_),t},e.MenuItem.prototype.dispose=function(){this.element_=null},e.MenuItem.prototype.getElement=function(){return this.element_},e.MenuItem.prototype.getId=function(){return this.element_.id},e.MenuItem.prototype.getValue=function(){return this.value_},e.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},e.MenuItem.prototype.setRole=function(t){this.roleName_=t},e.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},e.MenuItem.prototype.setChecked=function(t){this.checked_=t},e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var n=this.getElement();n&&this.isEnabled()&&(t?(e.utils.dom.addClass(n,"blocklyMenuItemHighlight"),e.utils.dom.addClass(n,"goog-menuitem-highlight")):(e.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),e.utils.dom.removeClass(n,"goog-menuitem-highlight")))},e.MenuItem.prototype.isEnabled=function(){return this.enabled_},e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},e.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},e.MenuItem.prototype.onAction=function(t,n){this.actionHandler_=t.bind(n)},e.ContextMenu={},e.ContextMenu.currentBlock=null,e.ContextMenu.menu_=null,e.ContextMenu.show=function(t,n,r){if(e.WidgetDiv.show(e.ContextMenu,r,e.ContextMenu.dispose),n.length){var s=e.ContextMenu.populate_(n,r);e.ContextMenu.menu_=s,e.ContextMenu.position_(s,t,r),setTimeout(function(){s.focus()},1),e.ContextMenu.currentBlock=null}else e.ContextMenu.hide()},e.ContextMenu.populate_=function(t,n){var r=new e.Menu;r.setRole(e.utils.aria.Role.MENU);for(var c,s=0;c=t[s];s++){var v=new e.MenuItem(c.text);v.setRightToLeft(n),v.setRole(e.utils.aria.Role.MENUITEM),r.addChild(v),v.setEnabled(c.enabled),c.enabled&&v.onAction(function(D){e.ContextMenu.hide(),this.callback(this.scope)},c)}return r},e.ContextMenu.position_=function(t,n,r){var s=e.utils.getViewportBBox();n=new e.utils.Rect(n.clientY+s.top,n.clientY+s.top,n.clientX+s.left,n.clientX+s.left),e.ContextMenu.createWidget_(t);var c=t.getSize();r&&(n.left+=c.width,n.right+=c.width,s.left+=c.width,s.right+=c.width),e.WidgetDiv.positionWithAnchor(s,n,c,r),t.focus()},e.ContextMenu.createWidget_=function(t){t.render(e.WidgetDiv.DIV);var n=t.getElement();e.utils.dom.addClass(n,"blocklyContextMenu"),e.browserEvents.conditionalBind(n,"contextmenu",null,e.utils.noEvent),t.focus()},e.ContextMenu.hide=function(){e.WidgetDiv.hideIfOwner(e.ContextMenu),e.ContextMenu.currentBlock=null},e.ContextMenu.dispose=function(){e.ContextMenu.menu_&&(e.ContextMenu.menu_.dispose(),e.ContextMenu.menu_=null)},e.ContextMenu.callbackFactory=function(t,n){return function(){e.Events.disable();try{var r=e.Xml.domToBlock(n,t.workspace),s=t.getRelativeToSurfaceXY();s.x=t.RTL?s.x-e.SNAP_RADIUS:s.x+e.SNAP_RADIUS,s.y+=2*e.SNAP_RADIUS,r.moveBy(s.x,s.y)}finally{e.Events.enable()}e.Events.isEnabled()&&!r.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(r)),r.select()}},e.ContextMenu.commentDeleteOption=function(t){return{text:e.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.commentDuplicateOption=function(t){return{text:e.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){e.duplicate(t)}}},e.ContextMenu.workspaceCommentOption=function(t,n){if(!e.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var r={enabled:!e.utils.userAgent.IE};return r.text=e.Msg.ADD_COMMENT,r.callback=function(){var s=new e.WorkspaceCommentSvg(t,e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,e.WorkspaceCommentSvg.DEFAULT_SIZE,e.WorkspaceCommentSvg.DEFAULT_SIZE),c=t.getInjectionDiv().getBoundingClientRect();c=new e.utils.Coordinate(n.clientX-c.left,n.clientY-c.top);var v=t.getOriginOffsetInPixels();(c=e.utils.Coordinate.difference(c,v)).scale(1/t.scale),s.moveBy(c.x,c.y),t.rendered&&(s.initSvg(),s.render(),s.select())},r},e.ContextMenuRegistry=function(){e.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},e.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},e.ContextMenuRegistry.registry=null,e.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},e.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},e.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},e.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,n){var r=[],s=this.registry_;return Object.keys(s).forEach(function(c){if(t==(c=s[c]).scopeType){var v=c.preconditionFn(n);"hidden"!=v&&(c={text:"function"==typeof c.displayText?c.displayText(n):c.displayText,enabled:"enabled"==v,callback:c.callback,scope:n,weight:c.weight},r.push(c))}}),r.sort(function(c,v){return c.weight-v.weight}),r},new e.ContextMenuRegistry,e.Events.Selected=function(t,n,r){e.Events.Selected.superClass_.constructor.call(this,r),this.oldElementId=t,this.newElementId=n},e.utils.object.inherits(e.Events.Selected,e.Events.UiBase),e.Events.Selected.prototype.type=e.Events.SELECTED,e.Events.Selected.prototype.toJson=function(){var t=e.Events.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},e.Events.Selected.prototype.fromJson=function(t){e.Events.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},e.registry.register(e.registry.Type.EVENT,e.Events.SELECTED,e.Events.Selected),e.IBoundedElement=function(){},e.ICopyable=function(){},e.RenderedConnection=function(t,n){e.RenderedConnection.superClass_.constructor.call(this,t,n),this.db_=t.workspace.connectionDBList[n],this.dbOpposite_=t.workspace.connectionDBList[e.OPPOSITE_TYPE[n]],this.offsetInBlock_=new e.utils.Coordinate(0,0),this.trackedState_=e.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},e.utils.object.inherits(e.RenderedConnection,e.Connection),e.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},e.RenderedConnection.prototype.dispose=function(){e.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},e.RenderedConnection.prototype.getSourceBlock=function(){return e.RenderedConnection.superClass_.getSourceBlock.call(this)},e.RenderedConnection.prototype.targetBlock=function(){return e.RenderedConnection.superClass_.targetBlock.call(this)},e.RenderedConnection.prototype.distanceFrom=function(t){var n=this.x-t.x;return t=this.y-t.y,Math.sqrt(n*n+t*t)},e.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var r=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,r=!0}var s=e.selected==n;s||n.addSelect();var c=t.x+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x,v=t.y+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.y;r&&(v=-v),n.RTL&&(c=t.x-e.SNAP_RADIUS-Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x),n.moveBy(c,v),s||n.removeSelect()}}},e.RenderedConnection.prototype.moveTo=function(t,n){this.trackedState_==e.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=t,this.y=n},e.RenderedConnection.prototype.moveBy=function(t,n){this.moveTo(this.x+t,this.y+n)},e.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},e.RenderedConnection.prototype.setOffsetInBlock=function(t,n){this.offsetInBlock_.x=t,this.offsetInBlock_.y=n},e.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},e.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=t||0!=n){var r=this.targetBlock(),s=r.getSvgRoot();if(!s)throw Error("block is not rendered.");s=e.utils.getRelativeXY(s),r.getSvgRoot().setAttribute("transform","translate("+(s.x-t)+","+(s.y-n)+")"),r.moveConnections(-t,-n)}},e.RenderedConnection.prototype.closest=function(t,n){return this.dbOpposite_.searchForClosest(this,t,n)},e.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),n=t.shapeFor(this);n=this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.OUTPUT_VALUE?e.utils.svgPaths.moveBy(0,-(t=t.TAB_OFFSET_FROM_TOP))+e.utils.svgPaths.lineOnAxis("v",t)+n.pathDown+e.utils.svgPaths.lineOnAxis("v",t):e.utils.svgPaths.moveBy(-(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS),0)+e.utils.svgPaths.lineOnAxis("h",t)+n.pathLeft+e.utils.svgPaths.lineOnAxis("h",t),t=this.sourceBlock_.getRelativeToSurfaceXY(),e.Connection.highlightedPath_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},e.RenderedConnection.prototype.unhighlight=function(){e.utils.dom.removeNode(e.Connection.highlightedPath_),delete e.Connection.highlightedPath_},e.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_==e.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_==e.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.UNTRACKED))},e.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),n=0;n<t.length;n++){for(var r=t[n],s=r.getConnections_(!0),c=0;c<s.length;c++)s[c].setTracking(!1);for(r=r.getIcons(),c=0;c<r.length;c++)r[c].setVisible(!1)}},e.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!=e.connectionTypes.INPUT_VALUE&&this.type!=e.connectionTypes.NEXT_STATEMENT)return t;var n=this.targetBlock();if(n){if(n.isCollapsed()){var r=[];n.outputConnection&&r.push(n.outputConnection),n.nextConnection&&r.push(n.nextConnection),n.previousConnection&&r.push(n.previousConnection)}else r=n.getConnections_(!0);for(var s=0;s<r.length;s++)t.push.apply(t,r[s].startTrackingAll());t.length||(t[0]=n)}return t},e.RenderedConnection.prototype.isConnectionAllowed=function(t,n){return e.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(t)>n)&&e.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},e.RenderedConnection.prototype.onFailedConnect=function(t){var n=this.getSourceBlock();if(e.Events.recordUndo){var r=e.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(e.Events.setGroup(r),this.bumpAwayFrom(t),e.Events.setGroup(!1))}.bind(this),e.BUMP_DELAY)}},e.RenderedConnection.prototype.disconnectInternal_=function(t,n){e.RenderedConnection.superClass_.disconnectInternal_.call(this,t,n),t.rendered&&t.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},e.RenderedConnection.prototype.respawnShadow_=function(){e.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},e.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},e.RenderedConnection.prototype.connect_=function(t){e.RenderedConnection.superClass_.connect_.call(this,t);var n=this.getSourceBlock();t=t.getSourceBlock();var r=n.rendered,s=t.rendered;r&&n.updateDisabled(),s&&t.updateDisabled(),r&&s&&(this.type==e.connectionTypes.NEXT_STATEMENT||this.type==e.connectionTypes.PREVIOUS_STATEMENT?t.render():n.render()),(n=n.getInputWithBlock(t))&&(n=n.isVisible(),t.getSvgRoot().style.display=n?"block":"none")},e.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},e.BasicCursor=function(){e.BasicCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.BasicCursor,e.Cursor),e.BasicCursor.registrationName="basicCursor",e.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.in=function(){return this.next()},e.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.out=function(){return this.prev()},e.BasicCursor.prototype.getNextNode_=function(t,n){if(!t)return null;var r=t.in()||t.next();return n(r)?r:r?this.getNextNode_(r,n):n(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,n):null},e.BasicCursor.prototype.getPreviousNode_=function(t,n){if(!t)return null;var r=t.prev();return n(r=r?this.getRightMostChild_(r):t.out())?r:r?this.getPreviousNode_(r,n):null},e.BasicCursor.prototype.validNode_=function(t){var n=!1;return((t=t&&t.getType())==e.ASTNode.types.OUTPUT||t==e.ASTNode.types.INPUT||t==e.ASTNode.types.FIELD||t==e.ASTNode.types.NEXT||t==e.ASTNode.types.PREVIOUS||t==e.ASTNode.types.WORKSPACE)&&(n=!0),n},e.BasicCursor.prototype.findSiblingOrParent_=function(t){return t?t.next()||this.findSiblingOrParent_(t.out()):null},e.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},e.registry.register(e.registry.Type.CURSOR,e.BasicCursor.registrationName,e.BasicCursor),e.TabNavigateCursor=function(){e.TabNavigateCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.TabNavigateCursor,e.BasicCursor),e.TabNavigateCursor.prototype.validNode_=function(t){var n=!1,r=t&&t.getType();return t&&(t=t.getLocation(),r==e.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(n=!0)),n},e.BlockSvg=function(t,n,r){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=e.utils.is3dSupported()&&!!t.getBlockDragSurface();var s=this.pathObject.svgPath;s.tooltip=this,e.Tooltip.bindMouseEvents(s),e.BlockSvg.superClass_.constructor.call(this,t,n,r),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:e.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},e.utils.object.inherits(e.BlockSvg,e.Block),e.BlockSvg.prototype.height=0,e.BlockSvg.prototype.width=0,e.BlockSvg.prototype.warningTextDb_=null,e.BlockSvg.INLINE=-1,e.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",e.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,t=0;n=this.inputList[t];t++)n.init();for(n=this.getIcons(),t=0;t<n.length;t++)n[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||e.browserEvents.conditionalBind(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},e.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},e.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},e.BlockSvg.prototype.getColourShadow=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},e.BlockSvg.prototype.getColourBorder=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},e.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(e.selected!=this){var t=null;if(e.selected){t=e.selected.id,e.Events.disable();try{e.selected.unselect()}finally{e.Events.enable()}}t=new(e.Events.get(e.Events.SELECTED))(t,this.id,this.workspace.id),e.Events.fire(t),e.selected=this,this.addSelect()}},e.BlockSvg.prototype.unselect=function(){if(e.selected==this){var t=new(e.Events.get(e.Events.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,e.Events.fire(t),e.selected=null,this.removeSelect()}},e.BlockSvg.prototype.mutator=null,e.BlockSvg.prototype.comment=null,e.BlockSvg.prototype.commentIcon_=null,e.BlockSvg.prototype.warning=null,e.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},e.BlockSvg.prototype.setParent=function(t){var n=this.parentBlock_;if(t!=n){e.utils.dom.startTextWidthCache(),e.BlockSvg.superClass_.setParent.call(this,t),e.utils.dom.stopTextWidthCache();var r=this.getSvgRoot();if(!this.workspace.isClearing&&r){var s=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(r),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-s.x,t.y-s.y)):n&&(this.workspace.getCanvas().appendChild(r),this.translate(s.x,s.y)),this.applyColour()}}},e.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,n=0,r=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,s=this.getSvgRoot();if(s)do{var c=e.utils.getRelativeXY(s);t+=c.x,n+=c.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==s&&(t+=(c=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=c.y),s=s.parentNode}while(s&&s!=this.workspace.getCanvas()&&s!=r);return new e.utils.Coordinate(t,n)},e.BlockSvg.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var r=e.Events.isEnabled();if(r)var s=new(e.Events.get(e.Events.BLOCK_MOVE))(this);var c=this.getRelativeToSurfaceXY();this.translate(c.x+t,c.y+n),this.moveConnections(t,n),r&&(s.recordNew(),e.Events.fire(s)),this.workspace.resizeContents()},e.BlockSvg.prototype.translate=function(t,n){this.getSvgRoot().setAttribute("transform","translate("+t+","+n+")")},e.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},e.BlockSvg.prototype.moveTo=function(t){var n=this.getRelativeToSurfaceXY();this.moveBy(t.x-n.x,t.y-n.y)},e.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},e.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},e.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},e.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var n=t.getSpacing(),r=n/2,s=this.getRelativeToSurfaceXY();t=Math.round((s.x-r)/n)*n+r-s.x,n=Math.round((s.y-r)/n)*n+r-s.y,t=Math.round(t),n=Math.round(n),0==t&&0==n||this.moveBy(t,n)}}},e.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var r=t.x-n.width,s=t.x;else r=t.x,s=t.x+n.width;return new e.utils.Rect(t.y,t.y+n.height,r,s)},e.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,t=0;n=this.inputList[t];t++)n.markDirty()},e.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},e.BlockSvg.prototype.updateCollapsed_=function(){for(var c,t=this.isCollapsed(),n=e.constants.COLLAPSED_INPUT_NAME,r=e.constants.COLLAPSED_FIELD_NAME,s=0;c=this.inputList[s];s++)c.name!=n&&c.setVisible(!t);if(t){for(c=this.getIcons(),s=0;t=c[s];s++)t.setVisible(!1);s=this.toString(e.COLLAPSE_CHARS),(c=this.getField(r))?c.setValue(s):(c=this.getInput(n)||this.appendDummyInput(n)).appendField(new e.FieldLabel(s),r)}else this.updateDisabled(),this.removeInput(n)},e.BlockSvg.prototype.tab=function(t,n){var r=new e.TabNavigateCursor;r.setCurNode(e.ASTNode.createFieldNode(t)),t=r.getCurNode(),n?r.next():r.prev(),(n=r.getCurNode())&&n!==t&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},e.BlockSvg.prototype.onMouseDown_=function(t){var n=this.workspace&&this.workspace.getGesture(t);n&&n.handleBlockStart(t,this)},e.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},e.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},e.BlockSvg.prototype.showContextMenu=function(t){var n=this.generateContextMenu();n&&n.length&&(e.ContextMenu.show(t,n,this.RTL),e.ContextMenu.currentBlock=this)},e.BlockSvg.prototype.moveConnections=function(t,n){if(this.rendered){for(var r=this.getConnections_(!1),s=0;s<r.length;s++)r[s].moveBy(t,n);for(r=this.getIcons(),s=0;s<r.length;s++)r[s].computeIconLocation();for(s=0;s<this.childBlocks_.length;s++)this.childBlocks_[s].moveConnections(t,n)}},e.BlockSvg.prototype.setDragging=function(t){if(t){var n=this.getSvgRoot();n.translate_="",n.skew_="",e.draggingConnections=e.draggingConnections.concat(this.getConnections_(!0)),e.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else e.draggingConnections=[],e.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(t)},e.BlockSvg.prototype.setMovable=function(t){e.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},e.BlockSvg.prototype.setEditable=function(t){e.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var n=0;n<t.length;n++)t[n].updateEditable()},e.BlockSvg.prototype.setShadow=function(t){e.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},e.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},e.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.BlockSvg.prototype.dispose=function(t,n){if(this.workspace){e.Tooltip.dispose(),e.Tooltip.unbindMouseEvents(this.pathObject.svgPath),e.utils.dom.startTextWidthCache();var r=this.workspace;if(e.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),e.ContextMenu.currentBlock==this&&e.ContextMenu.hide(),n&&this.rendered&&(this.unplug(t),e.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]);this.warningTextDb_=null}for(n=this.getIcons(),s=0;s<n.length;s++)n[s].dispose();e.BlockSvg.superClass_.dispose.call(this,!!t),e.utils.dom.removeNode(this.svgGroup_),r.resizeContents(),this.svgGroup_=null,e.utils.dom.stopTextWidthCache()}},e.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var t=e.Xml.blockToDom(this,!0);e.Xml.deleteNext(t);var n=this.getRelativeToSurfaceXY();return t.setAttribute("x",this.RTL?-n.x:n.x),t.setAttribute("y",n.y),{xml:t,source:this.workspace,typeCounts:e.utils.getBlockTypeCounts(this,!0)}},e.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),n=0;n<t.length;n++)t[n].applyColour();for(t=0;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.applyColour()},e.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var r,n=0;r=t[n];n++)r.rendered&&r.updateDisabled()},e.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},e.BlockSvg.prototype.setCommentText=function(t){if(!e.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(e.BlockSvg.superClass_.setCommentText.call(this,t),!!this.commentIcon_==(t=null!=t)?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},e.BlockSvg.prototype.setWarningText=function(t,n){if(!e.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var r=n||"";if(r)this.warningTextDb_[r]&&(clearTimeout(this.warningTextDb_[r]),delete this.warningTextDb_[r]);else for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]),delete this.warningTextDb_[s];if(this.workspace.isDragging()){var c=this;this.warningTextDb_[r]=setTimeout(function(){c.workspace&&(delete c.warningTextDb_[r],c.setWarningText(t,r))},100)}else{if(this.isInFlyout&&(t=null),n=!1,"string"==typeof t){s=this.getSurroundParent();for(var v=null;s;)s.isCollapsed()&&(v=s),s=s.getSurroundParent();v&&v.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new e.Warning(this),n=!0),this.warning.setText(t,r)}else this.warning&&!r?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",r),(s=this.warning.getText())||this.warning.dispose(),n=n!=s);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},e.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},e.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},e.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},e.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},e.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},e.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},e.BlockSvg.prototype.setColour=function(t){e.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},e.BlockSvg.prototype.setStyle=function(t){var n=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!n)throw Error("Invalid style name: "+t);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},e.BlockSvg.prototype.bringToFront=function(){var t=this;do{var n=t.getSvgRoot(),r=n.parentNode,s=r.childNodes;s[s.length-1]!==n&&r.appendChild(n),t=t.getParent()}while(t)},e.BlockSvg.prototype.setPreviousStatement=function(t,n){e.BlockSvg.superClass_.setPreviousStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setNextStatement=function(t,n){e.BlockSvg.superClass_.setNextStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setOutput=function(t,n){e.BlockSvg.superClass_.setOutput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setInputsInline=function(t){e.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.removeInput=function(t,n){return t=e.BlockSvg.superClass_.removeInput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.moveNumberedInputBefore=function(t,n){e.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.appendInput_=function(t,n){return t=e.BlockSvg.superClass_.appendInput_.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(t)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;r&&(r.setTracking(t),(r=r.targetBlock())&&r.setConnectionTracking(t))}},e.BlockSvg.prototype.getConnections_=function(t){var n=[];if((t||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var r;r=this.inputList[t];t++)r.connection&&n.push(r.connection)}return n},e.BlockSvg.prototype.lastConnectionInStack=function(t){return e.BlockSvg.superClass_.lastConnectionInStack.call(this,t)},e.BlockSvg.prototype.getMatchingConnection=function(t,n){return e.BlockSvg.superClass_.getMatchingConnection.call(this,t,n)},e.BlockSvg.prototype.makeConnection_=function(t){return new e.RenderedConnection(this,t)},e.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var s,n=this.getConnections_(!1),r=0;s=n[r];r++){s.isConnected()&&s.isSuperior()&&s.targetBlock().bumpNeighbours();for(var D,c=s.neighbours(e.SNAP_RADIUS),v=0;D=c[v];v++)s.isConnected()&&D.isConnected()||D.getSourceBlock().getRootBlock()!=t&&(s.isSuperior()?D.bumpAwayFrom(s):s.bumpAwayFrom(D))}}},e.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,n=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(n),t.snapToGrid(),e.Events.setGroup(!1)},e.BUMP_DELAY/2),setTimeout(function(){e.Events.setGroup(n),t.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)},e.BlockSvg.prototype.positionNearConnection=function(t,n){t.type!=e.connectionTypes.NEXT_STATEMENT&&t.type!=e.connectionTypes.INPUT_VALUE||this.moveBy(n.x-t.x,n.y-t.y)},e.BlockSvg.prototype.getParent=function(){return e.BlockSvg.superClass_.getParent.call(this)},e.BlockSvg.prototype.getRootBlock=function(){return e.BlockSvg.superClass_.getRootBlock.call(this)},e.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,e.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}e.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},e.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;r&&(r.moveToOffset(t),r.isConnected()&&r.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},e.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},e.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},e.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,n=this.width,r=this.getNextBlock();if(r){r=r.getHeightWidth();var s=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=r.height-s,n=Math.max(n,r.width)}return{height:t,width:n}},e.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},e.BlockSvg.prototype.highlightShapeForInput=function(t,n){this.pathObject.updateShapeForInputHighlight(t,n)},e.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},e.ConnectionDB.prototype.addConnection=function(t,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,t)},e.ConnectionDB.prototype.findIndexOfConnection_=function(t,n){if(!this.connections_.length)return-1;var r=this.calculateIndexForYPos_(n);if(r>=this.connections_.length)return-1;n=t.y;for(var s=r;0<=s&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s--}for(s=r;s<this.connections_.length&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s++}return-1},e.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var n=0,r=this.connections_.length;n<r;){var s=Math.floor((n+r)/2);if(this.connections_[s].y<t)n=s+1;else{if(!(this.connections_[s].y>t)){n=s;break}r=s}}return n},e.ConnectionDB.prototype.removeConnection=function(t,n){if(-1==(t=this.findIndexOfConnection_(t,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},e.ConnectionDB.prototype.getNeighbours=function(t,n){function r(it){var q=c-s[it].x,bt=v-s[it].y;return Math.sqrt(q*q+bt*bt)<=n&&G.push(s[it]),bt<n}var s=this.connections_,c=t.x,v=t.y;t=0;for(var D=s.length-2,P=D;t<P;)s[P].y<v?t=P:D=P,P=Math.floor((t+D)/2);var G=[];if(D=t=P,s.length){for(;0<=t&&r(t);)t--;do{D++}while(D<s.length&&r(D))}return G},e.ConnectionDB.prototype.isInYRange_=function(t,n,r){return Math.abs(this.connections_[t].y-n)<=r},e.ConnectionDB.prototype.searchForClosest=function(t,n,r){if(!this.connections_.length)return{connection:null,radius:n};var s=t.y,c=t.x;t.x=c+r.x,t.y=s+r.y;var v=this.calculateIndexForYPos_(t.y);r=null;for(var P,D=n,G=v-1;0<=G&&this.isInYRange_(G,t.y,n);)this.connectionChecker_.canConnect(t,P=this.connections_[G],!0,D)&&(r=P,D=P.distanceFrom(t)),G--;for(;v<this.connections_.length&&this.isInYRange_(v,t.y,n);)this.connectionChecker_.canConnect(t,P=this.connections_[v],!0,D)&&(r=P,D=P.distanceFrom(t)),v++;return t.x=c,t.y=s,{connection:r,radius:D}},e.ConnectionDB.init=function(t){var n=[];return n[e.connectionTypes.INPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.OUTPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.NEXT_STATEMENT]=new e.ConnectionDB(t),n[e.connectionTypes.PREVIOUS_STATEMENT]=new e.ConnectionDB(t),n},e.Events.ThemeChange=function(t,n){e.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=t},e.utils.object.inherits(e.Events.ThemeChange,e.Events.UiBase),e.Events.ThemeChange.prototype.type=e.Events.THEME_CHANGE,e.Events.ThemeChange.prototype.toJson=function(){var t=e.Events.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},e.Events.ThemeChange.prototype.fromJson=function(t){e.Events.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},e.registry.register(e.registry.Type.EVENT,e.Events.THEME_CHANGE,e.Events.ThemeChange),e.Events.ViewportChange=function(t,n,r,s,c){e.Events.ViewportChange.superClass_.constructor.call(this,s),this.viewTop=t,this.viewLeft=n,this.scale=r,this.oldScale=c},e.utils.object.inherits(e.Events.ViewportChange,e.Events.UiBase),e.Events.ViewportChange.prototype.type=e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange.prototype.toJson=function(){var t=e.Events.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},e.Events.ViewportChange.prototype.fromJson=function(t){e.Events.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},e.registry.register(e.registry.Type.EVENT,e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange),e.IMetricsManager=function(){},e.MetricsManager=function(t){this.workspace_=t},e.MetricsManager.prototype.getDimensionsPx_=function(t){var n=0,r=0;return t&&(n=t.getWidth(),r=t.getHeight()),new e.utils.Size(n,r)},e.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},e.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,n=this.getToolboxMetrics(),r=this.getFlyoutMetrics(!0),s=!!this.workspace_.getToolbox(),c=!!this.workspace_.getFlyout(!0),v=s?n.position:r.position,D=v==e.utils.toolbox.Position.LEFT;return v=v==e.utils.toolbox.Position.TOP,s&&D?t=n.width:c&&D&&(t=r.width),D=0,s&&v?D=n.height:c&&v&&(D=r.height),{top:D,left:t}},e.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var n=this.getSvgMetrics(),r=this.getToolboxMetrics(),s=this.getFlyoutMetrics(!0),c=this.workspace_.getToolbox()?r.position:s.position;return this.workspace_.getToolbox()?c==e.utils.toolbox.Position.TOP||c==e.utils.toolbox.Position.BOTTOM?n.height-=r.height:(c==e.utils.toolbox.Position.LEFT||c==e.utils.toolbox.Position.RIGHT)&&(n.width-=r.width):this.workspace_.getFlyout(!0)&&(c==e.utils.toolbox.Position.TOP||c==e.utils.toolbox.Position.BOTTOM?n.height-=s.height:(c==e.utils.toolbox.Position.LEFT||c==e.utils.toolbox.Position.RIGHT)&&(n.width-=s.width)),{height:n.height/t,width:n.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},e.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*t,width:(n.right-n.left)*t,top:n.top*t,left:n.left*t}},e.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},e.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),r=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var s={};return r||(s.top=t.top,s.bottom=t.top+t.height),n||(s.left=t.left,s.right=t.left+t.width),s},e.MetricsManager.prototype.getPaddedContent_=function(t,n){var r=n.top+n.height,s=n.left+n.width,c=t.width,v=c/2,D=(t=t.height)/2;return{top:Math.min(n.top-D,r-t),bottom:Math.max(r+D,n.top+t),left:Math.min(n.left-v,s-c),right:Math.max(s+v,n.left+c)}},e.MetricsManager.prototype.getScrollMetrics=function(t,n,r){t=t?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var s=r||this.getContentMetrics();r=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,s);var c=void 0!==r.left?r.left:n.left;return{top:(s=void 0!==r.top?r.top:n.top)/t,left:c/t,width:((void 0!==r.right?r.right:n.right)-c)/t,height:((void 0!==r.bottom?r.bottom:n.bottom)-s)/t}},e.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},e.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),r=this.getSvgMetrics(),s=this.getAbsoluteMetrics(),c=this.getViewMetrics(),v=this.getContentMetrics(),D=this.getScrollMetrics(!1,c,v);return{contentHeight:v.height,contentWidth:v.width,contentTop:v.top,contentLeft:v.left,scrollHeight:D.height,scrollWidth:D.width,scrollTop:D.top,scrollLeft:D.left,viewHeight:c.height,viewWidth:c.width,viewTop:c.top,viewLeft:c.left,absoluteTop:s.top,absoluteLeft:s.left,svgHeight:r.height,svgWidth:r.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:n.width,flyoutHeight:n.height}},e.registry.register(e.registry.Type.METRICS_MANAGER,e.registry.DEFAULT,e.MetricsManager),e.FlyoutMetricsManager=function(t,n){this.flyout_=n,e.FlyoutMetricsManager.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.FlyoutMetricsManager,e.MetricsManager),e.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(n){t={height:0,y:0,width:0,x:0}}return t},e.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var n=this.getBoundingBox_();return{height:n.height*(t=t?1:this.workspace_.scale),width:n.width*t,top:n.y*t,left:n.x*t}},e.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,n,r){return{height:((n=r||this.getContentMetrics()).height+2*(r=this.flyout_.MARGIN*this.workspace_.scale))/(t=t?this.workspace_.scale:1),width:(n.width+n.left+r)/t,top:0,left:0}},e.ThemeManager=function(t,n){this.workspace_=t,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},e.ThemeManager.prototype.getTheme=function(){return this.theme_},e.ThemeManager.prototype.setTheme=function(t){var r,n=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(n&&e.utils.dom.removeClass(t,n.getClassName()),e.utils.dom.addClass(t,this.theme_.getClassName())),n=0;t=this.subscribedWorkspaces_[n];n++)t.refreshTheme();for(n=0,t=Object.keys(this.componentDB_);r=t[n];n++)for(var c,s=0;c=this.componentDB_[r][s];s++){var v=c.element;c=c.propertyName;var D=this.theme_&&this.theme_.getComponentStyle(r);v.style[c]=D||""}e.hideChaff()},e.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},e.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},e.ThemeManager.prototype.subscribe=function(t,n,r){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:t,propertyName:r}),n=this.theme_&&this.theme_.getComponentStyle(n),t.style[r]=n||""},e.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var s,n=Object.keys(this.componentDB_),r=0;s=n[r];r++){for(var c=this.componentDB_[s],v=c.length-1;0<=v;v--)c[v].element===t&&c.splice(v,1);this.componentDB_[s].length||delete this.componentDB_[s]}},e.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},e.TouchGesture=function(t,n){e.TouchGesture.superClass_.constructor.call(this,t,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},e.utils.object.inherits(e.TouchGesture,e.Gesture),e.TouchGesture.ZOOM_IN_MULTIPLIER=5,e.TouchGesture.ZOOM_OUT_MULTIPLIER=6,e.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,e.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&e.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=e.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&e.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&e.longStop_())},e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(e.Touch.isTouchEvent(t)&&this.handleTouchMove(t),e.longStop_()):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handleUp=function(t){e.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},e.TouchGesture.prototype.dispose=function(){e.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&e.browserEvents.unbind(this.onStartWrapper_)},e.TouchGesture.prototype.handleTouchStart=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,t.preventDefault())},e.TouchGesture.prototype.handleTouchMove=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(t):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handlePinch_=function(t){var n=Object.keys(this.cachedPoints_);if(n=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var r=n-this.previousScale_;r=0<r?r*e.TouchGesture.ZOOM_IN_MULTIPLIER:r*e.TouchGesture.ZOOM_OUT_MULTIPLIER;var s=this.startWorkspace_,c=e.utils.mouseToSvg(t,s.getParentSvg(),s.getInverseScreenCTM());s.zoom(c.x,c.y,r)}this.previousScale_=n,t.preventDefault()},e.TouchGesture.prototype.handleTouchEnd=function(t){t=e.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new e.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},e.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},e.WorkspaceAudio.prototype.lastSound_=null,e.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},e.WorkspaceAudio.prototype.load=function(t,n){if(t.length){try{var r=new e.utils.global.Audio}catch(P){return}for(var s,c=0;c<t.length;c++){var v=t[c],D=v.match(/\.(\w+)$/);if(D&&r.canPlayType("audio/"+D[1])){s=new e.utils.global.Audio(v);break}}s&&s.play&&(this.SOUNDS_[n]=s)}},e.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var n=this.SOUNDS_[t];n.volume=.01;var r=n.play();if(void 0!==r?r.then(n.pause).catch(function(){}):n.pause(),e.utils.userAgent.IPAD||e.utils.userAgent.IPHONE)break}},e.WorkspaceAudio.prototype.play=function(t,n){var r=this.SOUNDS_[t];r?(t=new Date,null!=this.lastSound_&&t-this.lastSound_<e.SOUND_LIMIT||(this.lastSound_=t,(r=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID?r:r.cloneNode()).volume=void 0===n?1:n,r.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,n)},e.WorkspaceSvg=function(t,n,r){e.WorkspaceSvg.superClass_.constructor.call(this,t),this.metricsManager_=new(e.registry.getClassFromOptions(e.registry.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||e.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new e.ComponentManager,this.connectionDBList=e.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),r&&(this.workspaceDragSurface_=r),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&e.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new e.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new e.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new e.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),e.Variables&&e.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_CATEGORY_NAME,e.Variables.flyoutCategory),e.VariablesDynamic&&e.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_DYNAMIC_CATEGORY_NAME,e.VariablesDynamic.flyoutCategory),e.Procedures&&e.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(e.PROCEDURE_CATEGORY_NAME,e.Procedures.flyoutCategory),this.addChangeListener(e.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new e.ThemeManager(this,this.options.theme||e.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=e.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new e.utils.Size(0,0)},e.utils.object.inherits(e.WorkspaceSvg,e.Workspace),e.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,e.WorkspaceSvg.prototype.rendered=!0,e.WorkspaceSvg.prototype.isVisible_=!0,e.WorkspaceSvg.prototype.isFlyout=!1,e.WorkspaceSvg.prototype.isMutator=!1,e.WorkspaceSvg.prototype.resizesEnabled_=!0,e.WorkspaceSvg.prototype.scrollX=0,e.WorkspaceSvg.prototype.scrollY=0,e.WorkspaceSvg.prototype.startScrollX=0,e.WorkspaceSvg.prototype.startScrollY=0,e.WorkspaceSvg.prototype.dragDeltaXY_=null,e.WorkspaceSvg.prototype.scale=1,e.WorkspaceSvg.prototype.oldScale_=1,e.WorkspaceSvg.prototype.oldTop_=0,e.WorkspaceSvg.prototype.oldLeft_=0,e.WorkspaceSvg.prototype.trashcan=null,e.WorkspaceSvg.prototype.scrollbar=null,e.WorkspaceSvg.prototype.flyout_=null,e.WorkspaceSvg.prototype.toolbox_=null,e.WorkspaceSvg.prototype.currentGesture_=null,e.WorkspaceSvg.prototype.blockDragSurface_=null,e.WorkspaceSvg.prototype.workspaceDragSurface_=null,e.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,e.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,e.WorkspaceSvg.prototype.injectionDiv_=null,e.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,e.WorkspaceSvg.prototype.targetWorkspace=null,e.WorkspaceSvg.prototype.inverseScreenCTM_=null,e.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,e.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},e.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},e.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},e.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},e.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},e.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},e.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},e.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},e.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},e.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},e.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},e.WorkspaceSvg.prototype.setTheme=function(t){t||(t=e.Themes.Classic),this.themeManager_.setTheme(t)},e.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new(e.Events.get(e.Events.THEME_CHANGE))(this.getTheme().name,this.id);e.Events.fire(t)},e.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var r,n=0;r=t[n];n++){var s=r.getStyleName();s&&(r.setStyle(s),r.mutator&&r.mutator.updateBlockStyle())}},e.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},e.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},e.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},e.WorkspaceSvg.prototype.getSvgXY=function(t){var n=0,r=0,s=1;(e.utils.dom.containsNode(this.getCanvas(),t)||e.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(s=this.scale);do{var c=e.utils.getRelativeXY(t);(t==this.getCanvas()||t==this.getBubbleCanvas())&&(s=1),n+=c.x*s,r+=c.y*s,t=t.parentNode}while(t&&t!=this.getParentSvg());return new e.utils.Coordinate(n,r)},e.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new e.utils.Size(t.width,t.height)},e.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return e.utils.getInjectionDivXY_(this.getCanvas())},e.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},e.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},e.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(e.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(e.registry.getClassFromOptions(e.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=e.registry.getClassFromOptions(e.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},e.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),e.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&e.utils.dom.removeNode(t.parentNode)}this.resizeHandlerWrapper_&&(e.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},e.WorkspaceSvg.prototype.newBlock=function(t,n){return new e.BlockSvg(this,t,n)},e.WorkspaceSvg.prototype.addTrashcan=function(){if(!e.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new e.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.addZoomControls=function(){if(!e.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new e.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},e.WorkspaceSvg.prototype.addFlyout=function(t){var n=new e.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},e.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},e.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},e.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},e.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},e.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var c,t=this.componentManager_.getComponents(e.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),r=[],s=0;c=t[s];s++)c.position(n,r),(c=c.getBoundingRectangle())&&r.push(c);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},e.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=e.utils.getDocumentScroll();e.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},e.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,n){var r=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,r.cachedWidth_=t),n&&(this.cachedParentSvgSize_.height=n,r.cachedHeight_=n)},e.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},e.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},e.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(e.Events.isEnabled()){var t=this.scale,n=-this.scrollY,r=-this.scrollX;if(!(t==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(r-this.oldLeft_))){var s=new(e.Events.get(e.Events.VIEWPORT_CHANGE))(n,r,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=n,this.oldLeft_=r,e.Events.fire(s)}}},e.WorkspaceSvg.prototype.translate=function(t,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,n);else{var r="translate("+t+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",r),this.svgBubbleCanvas_.setAttribute("transform",r)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,n,this.scale),this.grid_&&this.grid_.moveTo(t,n),this.maybeFireViewportChangeEvent()},e.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",t="translate("+t.x+","+t.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",t)}},e.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),r=parseInt(this.getParentSvg().getAttribute("height"),10),s=e.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,n,r,this.scale),this.workspaceDragSurface_.translateSurface(s.x,s.y)}},e.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},e.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},e.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var n=(t=this.getAllBlocks(!1)).length-1;0<=n;n--)t[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else e.hideChaff(!0)},e.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),n=0;n<t.length;n++)t[n].render(!1);this.markerManager_.updateMarkers()},e.WorkspaceSvg.prototype.highlightBlock=function(t,n){if(void 0===n){for(var s,r=0;s=this.highlightedBlocks_[r];r++)s.setHighlighted(!1);this.highlightedBlocks_.length=0}(s=t?this.getBlockById(t):null)&&((t=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(s)&&this.highlightedBlocks_.push(s):e.utils.arrayRemove(this.highlightedBlocks_,s),s.setHighlighted(t))},e.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},e.WorkspaceSvg.prototype.pasteBlock_=function(t){e.Events.disable();try{var n=e.Xml.domToBlock(t,this),r=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);if(!isNaN(r)&&!isNaN(s)){this.RTL&&(r=-r);do{t=!1;for(var D,c=this.getAllBlocks(!1),v=0;D=c[v];v++){var P=D.getRelativeToSurfaceXY();if(1>=Math.abs(r-P.x)&&1>=Math.abs(s-P.y)){t=!0;break}}if(!t){var it,G=n.getConnections_(!1);for(v=0;it=G[v];v++)if(it.closest(e.SNAP_RADIUS,new e.utils.Coordinate(r,s)).connection){t=!0;break}}t&&(r=this.RTL?r-e.SNAP_RADIUS:r+e.SNAP_RADIUS,s+=2*e.SNAP_RADIUS)}while(t);n.moveBy(r,s)}}finally{e.Events.enable()}e.Events.isEnabled()&&!n.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n)),n.select()},e.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){e.Events.disable();try{var n=e.WorkspaceCommentSvg.fromXml(t,this),r=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);isNaN(r)||isNaN(s)||(this.RTL&&(r=-r),n.moveBy(r+50,s+50))}finally{e.Events.enable()}e.Events.isEnabled()&&e.WorkspaceComment.fireCreateEvent(n),n.select()},e.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},e.WorkspaceSvg.prototype.renameVariableById=function(t,n){e.WorkspaceSvg.superClass_.renameVariableById.call(this,t,n),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.deleteVariableById=function(t){e.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.createVariable=function(t,n,r){return t=e.WorkspaceSvg.superClass_.createVariable.call(this,t,n,r),this.refreshToolboxSelection(),t},e.WorkspaceSvg.prototype.recordDeleteAreas=function(){e.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},e.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(e.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var r,n=0;r=t[n];n++){var s=r.getClientRect();s&&this.dragTargetAreas_.push({component:r,clientRect:s})}},e.WorkspaceSvg.prototype.getDragTarget=function(t){for(var r,n=0;r=this.dragTargetAreas_[n];n++)if(r.clientRect.contains(t.clientX,t.clientY))return r.component;return null},e.WorkspaceSvg.prototype.onMouseDown_=function(t){var n=this.getGesture(t);n&&n.handleWsStart(t,this)},e.WorkspaceSvg.prototype.startDrag=function(t,n){(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=e.utils.Coordinate.difference(n,t)},e.WorkspaceSvg.prototype.moveDrag=function(t){return(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,e.utils.Coordinate.sum(this.dragDeltaXY_,t)},e.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},e.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},e.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},e.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},e.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},e.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(e.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,r=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||r){var s=e.utils.getScrollDeltaPixels(t);!n||!t.ctrlKey&&r?(n=this.scrollX-s.x,r=this.scrollY-s.y,t.shiftKey&&!s.x&&(n=this.scrollX-s.y,r=this.scrollY),this.scroll(n,r)):(s=-s.y/50,n=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,s)),t.preventDefault()}}},e.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new e.utils.Rect(0,0,0,0);for(var n=t[0].getBoundingRectangle(),r=1;r<t.length;r++){var s=t[r];s.isInsertionMarker&&s.isInsertionMarker()||((s=s.getBoundingRectangle()).top<n.top&&(n.top=s.top),s.bottom>n.bottom&&(n.bottom=s.bottom),s.left<n.left&&(n.left=s.left),s.right>n.right&&(n.right=s.right))}return n},e.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),e.Events.setGroup(!0);for(var s,t=this.getTopBlocks(!0),n=0,r=0;s=t[r];r++)if(s.isMovable()){var c=s.getRelativeToSurfaceXY();s.moveBy(-c.x,n-c.y),s.snapToGrid(),n=s.getRelativeToSurfaceXY().y+s.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}e.Events.setGroup(!1),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var n=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,t),e.ContextMenu.show(t,n,this.RTL)}},e.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=e.utils.toolbox.convertToolboxDefToJson(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.utils.toolbox.hasCategories(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},e.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(e.mainWorkspace=this,this.setBrowserFocus())},e.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},e.WorkspaceSvg.prototype.zoom=function(t,n,r){r=Math.pow(this.options.zoomOptions.scaleSpeed,r);var s=this.scale*r;if(this.scale!=s){s>this.options.zoomOptions.maxScale?r=this.options.zoomOptions.maxScale/this.scale:s<this.options.zoomOptions.minScale&&(r=this.options.zoomOptions.minScale/this.scale);var c=this.getCanvas().getCTM(),v=this.getParentSvg().createSVGPoint();v.x=t,v.y=n,v=v.matrixTransform(c.inverse()),c=c.translate((t=v.x)*(1-r),(n=v.y)*(1-r)).scale(r),this.scrollX=c.e,this.scrollY=c.f,this.setScale(s)}},e.WorkspaceSvg.prototype.zoomCenter=function(t){var n=this.getMetrics();if(this.flyout_){var r=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else r=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(r,n,t)},e.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),n=t.viewWidth;t=t.viewHeight;var r=this.getBlocksBoundingBox(),s=r.right-r.left;if(r=r.bottom-r.top,s){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),r+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),s+=this.flyout_.getWidth()/this.scale)),n/=s,t/=r,e.Events.disable();try{this.setScale(Math.min(n,t)),this.scrollCenter()}finally{e.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.beginCanvasTransition=function(){e.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.endCanvasTransition=function(){e.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),n=(t.scrollWidth-t.viewWidth)/2,r=(t.scrollHeight-t.viewHeight)/2;this.scroll(n=-n-t.scrollLeft,r=-r-t.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var n=t.getRelativeToSurfaceXY(),r=t.getHeightWidth(),s=this.scale;t=(n.x+(this.RTL?-1:1)*r.width/2)*s,n=(n.y+r.height/2)*s,r=this.getMetrics(),this.scroll(-(t-r.viewWidth/2),-(n-r.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,e.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},e.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},e.WorkspaceSvg.prototype.scroll=function(t,n){e.hideChaff(!0);var r=this.getMetrics();t=Math.min(t,-r.scrollLeft),n=Math.min(n,-r.scrollTop);var s=r.scrollTop+Math.max(0,r.scrollHeight-r.viewHeight);t=Math.max(t,-(r.scrollLeft+Math.max(0,r.scrollWidth-r.viewWidth))),n=Math.max(n,-s),this.scrollX=t,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(t+r.scrollLeft),-(n+r.scrollTop),!1),this.translate(t+=r.absoluteLeft,n+=r.absoluteTop)},e.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var n=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*t.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},e.WorkspaceSvg.prototype.getBlockById=function(t){return e.WorkspaceSvg.superClass_.getBlockById.call(this,t)},e.WorkspaceSvg.prototype.getTopBlocks=function(t){return e.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},e.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},e.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},e.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopComment.call(this,t)},e.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},e.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},e.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){e.utils.arrayRemove(this.topBoundedElements_,t)},e.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},e.WorkspaceSvg.prototype.setResizesEnabled=function(t){var n=!this.resizesEnabled_&&t;this.resizesEnabled_=t,n&&this.resizeContents()},e.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),e.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.registerButtonCallback=function(t,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=n},e.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},e.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},e.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=n},e.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},e.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},e.WorkspaceSvg.prototype.getGesture=function(t){var n="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,r=this.currentGesture_;return r?n&&r.hasStarted()?(console.warn("Tried to start the same gesture twice."),r.cancel(),null):r:n?this.currentGesture_=new e.TouchGesture(t,this):null},e.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},e.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},e.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},e.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},e.inject=function(t,n){if(e.checkBlockColourConstants(),"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!e.utils.dom.containsNode(document,t))throw Error("Error: container is not in current document.");n=new e.Options(n||{});var r=document.createElement("div");r.className="injectionDiv",r.tabIndex=0,e.utils.aria.setState(r,e.utils.aria.State.LABEL,e.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(r),t=e.createDom_(r,n);var s=new e.BlockDragSurfaceSvg(r),c=new e.WorkspaceDragSurfaceSvg(r),v=e.createMainWorkspace_(t,n,s,c);return e.init_(v),e.mainWorkspace=v,e.svgResize(v),r.addEventListener("focusin",function(){e.mainWorkspace=v}),v},e.createDom_=function(t,n){t.setAttribute("dir","LTR"),e.Css.inject(n.hasCss,n.pathToMedia),t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var r=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),s=String(Math.random()).substring(2);return n.gridPattern=e.Grid.createDom(s,n.gridOptions,r),t},e.createMainWorkspace_=function(t,n,r,s){return n.parentWorkspace=null,(n=new e.WorkspaceSvg(n,r,s)).scale=(r=n.options).zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground")),e.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),e.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!r.hasCategories&&r.languageTree&&(s=n.addFlyout(e.utils.Svg.SVG),e.utils.dom.insertAfter(s,t)),r.hasTrashcan&&n.addTrashcan(),r.zoomOptions&&r.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(e.bumpIntoBoundsHandler_(n)),e.svgResize(n),e.WidgetDiv.createDom(),e.DropDownDiv.createDom(),e.Tooltip.createDom(),n},e.extractObjectFromEvent_=function(t,n){var r=null;switch(n.type){case e.Events.BLOCK_CREATE:case e.Events.BLOCK_MOVE:(r=t.getBlockById(n.blockId))&&(r=r.getRootBlock());break;case e.Events.COMMENT_CREATE:case e.Events.COMMENT_MOVE:r=t.getCommentById(n.commentId)}return r},e.bumpTopObjectsIntoBounds_=function(t){var n=t.getMetricsManager();if(n.hasFixedEdges()&&!t.isDragging()){n=n.getScrollMetrics(!0);for(var c,r=t.getTopBoundedElements(),s=0;c=r[s];s++)e.bumpObjectIntoBounds_(t,n,c)}},e.bumpIntoBoundsHandler_=function(t){return function(n){var r=t.getMetricsManager();if(r.hasFixedEdges()&&!t.isDragging())if(-1!==e.Events.BUMP_EVENTS.indexOf(n.type)){r=r.getScrollMetrics(!0);var s=e.extractObjectFromEvent_(t,n);if(s){var c=e.Events.getGroup();e.Events.setGroup(n.group),e.bumpObjectIntoBounds_(t,r,s)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==c&&e.Events.setGroup(c)}}else n.type===e.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&e.bumpTopObjectsIntoBounds_(t)}},e.bumpObjectIntoBounds_=function(t,n,r){var s=r.getBoundingRectangle(),c=s.right-s.left,v=e.utils.math.clamp(n.top,s.top,n.top+n.height-(s.bottom-s.top))-s.top,D=n.left;return n=n.left+n.width-c,t.RTL?D=Math.min(n,D):n=Math.max(D,n),!(!(t=e.utils.math.clamp(D,s.left,n)-s.left)&&!v||(r.moveBy(t,v),0))},e.init_=function(t){var n=t.options,r=t.getParentSvg();if(e.browserEvents.conditionalBind(r.parentNode,"contextmenu",null,function(c){e.utils.isTargetInput(c)||c.preventDefault()}),r=e.browserEvents.conditionalBind(window,"resize",null,function(){e.hideChaff(!0),e.svgResize(t),e.bumpTopObjectsIntoBounds_(t)}),t.setResizeHandlerWrapper(r),e.inject.bindDocumentEvents_(),n.languageTree){r=t.getToolbox();var s=t.getFlyout(!0);r?r.init():s&&(s.init(t),s.show(n.languageTree),"function"==typeof s.scrollToStart&&s.scrollToStart())}n.hasTrashcan&&t.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&t.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(t.scrollbar=new e.ScrollbarPair(t,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),n.hasSounds&&e.inject.loadSounds_(n.pathToMedia,t)},e.inject.bindDocumentEvents_=function(){e.documentEventsBound_||(e.browserEvents.conditionalBind(document,"scroll",null,function(){for(var r,t=e.Workspace.getAll(),n=0;r=t[n];n++)r.updateInverseScreenCTM&&r.updateInverseScreenCTM()}),e.browserEvents.conditionalBind(document,"keydown",null,e.onKeyDown),e.browserEvents.bind(document,"touchend",null,e.longStop_),e.browserEvents.bind(document,"touchcancel",null,e.longStop_),e.utils.userAgent.IPAD&&e.browserEvents.conditionalBind(window,"orientationchange",document,function(){e.svgResize(e.getMainWorkspace())})),e.documentEventsBound_=!0},e.inject.loadSounds_=function(t,n){var r=n.getAudioManager();r.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),r.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),r.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var s=[];t=function(){for(;s.length;)e.browserEvents.unbind(s.pop());r.preload()},s.push(e.browserEvents.conditionalBind(document,"mousemove",null,t,!0)),s.push(e.browserEvents.conditionalBind(document,"touchstart",null,t,!0))},e.Names=function(t,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),n=0;n<t.length;n++)this.reservedDict_[t[n]]=!0;this.reset()},e.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",e.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},e.Names.prototype.setVariableMap=function(t){this.variableMap_=t},e.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},e.Names.prototype.populateVariables=function(t){t=e.Variables.allUsedVarModels(t);for(var n=0;n<t.length;n++)this.getName(t[n].getId(),e.VARIABLE_CATEGORY_NAME)},e.Names.prototype.populateProcedures=function(t){t=(t=e.Procedures.allProcedures(t))[0].concat(t[1]);for(var n=0;n<t.length;n++)this.getName(t[n][0],e.PROCEDURE_CATEGORY_NAME)},e.Names.prototype.getName=function(t,n){var r=t;n==e.VARIABLE_CATEGORY_NAME&&(t=this.getNameForUserVariable_(t))&&(r=t),t=r.toLowerCase();var s=n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var c=this.db_[n];return t in c?s+c[t]:(n=this.getDistinctName(r,n),c[t]=n.substr(s.length),n)},e.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},e.Names.prototype.getDistinctName=function(t,n){t=this.safeName_(t);for(var r="";this.dbReverse_[t+r]||t+r in this.reservedDict_;)r=r?r+1:2;return this.dbReverse_[t+=r]=!0,(n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+t},e.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=e.Msg.UNNAMED_KEY||"unnamed",t},e.Names.equals=function(t,n){return t.toLowerCase()==n.toLowerCase()},e.Procedures={},e.Procedures.NAME_TYPE=e.PROCEDURE_CATEGORY_NAME,e.Procedures.DEFAULT_ARG="x",e.Procedures.allProcedures=function(t){var n=t.getBlocksByType("procedures_defnoreturn",!1).map(function(r){return r.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(r){return r.getProcedureDef()}),n.sort(e.Procedures.procTupleComparator_),t.sort(e.Procedures.procTupleComparator_),[n,t]},e.Procedures.procTupleComparator_=function(t,n){return t[0].localeCompare(n[0],void 0,{sensitivity:"base"})},e.Procedures.findLegalName=function(t,n){if(n.isInFlyout)return t;for(t=t||e.Msg.UNNAMED_KEY||"unnamed";!e.Procedures.isLegalName_(t,n.workspace,n);){var r=t.match(/^(.*?)(\d+)$/);t=r?r[1]+(parseInt(r[2],10)+1):t+"2"}return t},e.Procedures.isLegalName_=function(t,n,r){return!e.Procedures.isNameUsed(t,n,r)},e.Procedures.isNameUsed=function(t,n,r){n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s]!=r&&n[s].getProcedureDef){var c=n[s].getProcedureDef();if(e.Names.equals(c[0],t))return!0}return!1},e.Procedures.rename=function(t){t=t.trim();var n=e.Procedures.findLegalName(t,this.getSourceBlock()),r=this.getValue();if(r!=t&&r!=n){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var s=0;s<t.length;s++)t[s].renameProcedure&&t[s].renameProcedure(r,n)}return n},e.Procedures.flyoutCategory=function(t){function n(v,D){for(var P=0;P<v.length;P++){var G=v[P][0],it=v[P][1],q=e.utils.xml.createElement("block");q.setAttribute("type",D),q.setAttribute("gap",16);var bt=e.utils.xml.createElement("mutation");for(bt.setAttribute("name",G),q.appendChild(bt),G=0;G<it.length;G++){var Ft=e.utils.xml.createElement("arg");Ft.setAttribute("name",it[G]),bt.appendChild(Ft)}r.push(q)}}var r=[];if(e.Blocks.procedures_defnoreturn){var s=e.utils.xml.createElement("block");s.setAttribute("type","procedures_defnoreturn"),s.setAttribute("gap",16);var c=e.utils.xml.createElement("field");c.setAttribute("name","NAME"),c.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),s.appendChild(c),r.push(s)}return e.Blocks.procedures_defreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),s.setAttribute("gap",16),(c=e.utils.xml.createElement("field")).setAttribute("name","NAME"),c.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),s.appendChild(c),r.push(s)),e.Blocks.procedures_ifreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),s.setAttribute("gap",16),r.push(s)),r.length&&r[r.length-1].setAttribute("gap",24),n((t=e.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),n(t[1],"procedures_callreturn"),r},e.Procedures.updateMutatorFlyout_=function(t){for(var c,n=[],r=t.getBlocksByType("procedures_mutatorarg",!1),s=0;c=r[s];s++)n.push(c.getFieldValue("NAME"));r=e.utils.xml.createElement("xml"),(s=e.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(c=e.utils.xml.createElement("field")).setAttribute("name","NAME"),n=e.Variables.generateUniqueNameFromOptions(e.Procedures.DEFAULT_ARG,n),n=e.utils.xml.createTextNode(n),c.appendChild(n),s.appendChild(c),r.appendChild(s),t.updateToolbox(r)},e.Procedures.mutatorOpenListener=function(t){if(t.type==e.Events.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var n=(t=e.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(t=t.mutator.getWorkspace(),e.Procedures.updateMutatorFlyout_(t),t.addChangeListener(e.Procedures.mutatorChangeListener_))}},e.Procedures.mutatorChangeListener_=function(t){(t.type==e.Events.BLOCK_CREATE||t.type==e.Events.BLOCK_DELETE||t.type==e.Events.BLOCK_CHANGE)&&(t=e.Workspace.getById(t.workspaceId),e.Procedures.updateMutatorFlyout_(t))},e.Procedures.getCallers=function(t,n){var r=[];n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s].getProcedureCall){var c=n[s].getProcedureCall();c&&e.Names.equals(c,t)&&r.push(n[s])}return r},e.Procedures.mutateCallers=function(t){var c,n=e.Events.recordUndo,r=t.getProcedureDef()[0],s=t.mutationToDom(!0);for(t=e.Procedures.getCallers(r,t.workspace),r=0;c=t[r];r++){var v=c.mutationToDom();v=v&&e.Xml.domToText(v),c.domToMutation(s);var D=c.mutationToDom();v!=(D=D&&e.Xml.domToText(D))&&(e.Events.recordUndo=!1,e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(c,"mutation",null,v,D)),e.Events.recordUndo=n)}},e.Procedures.getDefinition=function(t,n){n=n.getAllBlocks(!1);for(var r=0;r<n.length;r++)if(n[r].getProcedureDef){var s=n[r].getProcedureDef();if(s&&e.Names.equals(s[0],t))return n[r]}return null},e.ShortcutRegistry=function(){e.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},e.ShortcutRegistry.modifierKeys={Shift:e.utils.KeyCodes.SHIFT,Control:e.utils.KeyCodes.CTRL,Alt:e.utils.KeyCodes.ALT,Meta:e.utils.KeyCodes.META},e.ShortcutRegistry.prototype.register=function(t,n){if(this.registry_[t.name]&&!n)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},e.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},e.ShortcutRegistry.prototype.addKeyMapping=function(t,n,r){t=String(t);var s=this.keyMap_[t];if(s&&!r)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+s.toString());s&&r?s.unshift(n):this.keyMap_[t]=[n]},e.ShortcutRegistry.prototype.removeKeyMapping=function(t,n,r){var s=this.keyMap_[t];if(!s&&!r)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1;var c=s.indexOf(n);return-1<c?(s.splice(c,1),0==s.length&&delete this.keyMap_[t],!0):(r||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1)},e.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var n in this.keyMap_)this.removeKeyMapping(n,t,!0)},e.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},e.ShortcutRegistry.prototype.getKeyMap=function(){return e.utils.object.deepMerge(Object.create(null),this.keyMap_)},e.ShortcutRegistry.prototype.getRegistry=function(){return e.utils.object.deepMerge(Object.create(null),this.registry_)},e.ShortcutRegistry.prototype.onKeyDown=function(t,n){var r=this.serializeKeyEvent_(n);if(!(r=this.getShortcutNamesByKeyCode(r)))return!1;for(var c,s=0;c=r[s];s++)if((!(c=this.registry_[c]).preconditionFn||c.preconditionFn(t))&&c.callback&&c.callback(t,n,c))return!0;return!1},e.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},e.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var r,n=[];for(r in this.keyMap_)-1<this.keyMap_[r].indexOf(t)&&n.push(r);return n},e.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var r,n="";for(r in e.ShortcutRegistry.modifierKeys)t.getModifierState(r)&&(""!=n&&(n+="+"),n+=r);return""!=n&&t.keyCode?n=n+"+"+t.keyCode:t.keyCode&&(n=t.keyCode.toString()),n},e.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var s,n=e.utils.object.values(e.ShortcutRegistry.modifierKeys),r=0;s=t[r];r++)if(0>n.indexOf(s))throw Error(s+" is not a valid modifier key.")},e.ShortcutRegistry.prototype.createSerializedKey=function(t,n){var r="";if(n)for(var s in this.checkModifiers_(n),e.ShortcutRegistry.modifierKeys)-1<n.indexOf(e.ShortcutRegistry.modifierKeys[s])&&(""!=r&&(r+="+"),r+=s);return""!=r&&t?r=r+"+"+t:t&&(r=t.toString()),r},new e.ShortcutRegistry,e.VariableModel=function(t,n,r,s){this.workspace=t,this.name=n,this.type=r||"",this.id_=s||e.utils.genUid(),e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(this))},e.VariableModel.prototype.getId=function(){return this.id_},e.VariableModel.compareByName=function(t,n){return t.name.localeCompare(n.name,void 0,{sensitivity:"base"})},e.Variables={},e.Variables.NAME_TYPE=e.VARIABLE_CATEGORY_NAME,e.Variables.allUsedVarModels=function(t){var n=t.getAllBlocks(!1);t=Object.create(null);for(var r=0;r<n.length;r++){var s=n[r].getVarModels();if(s)for(var c=0;c<s.length;c++){var v=s[c],D=v.getId();D&&(t[D]=v)}}for(D in n=[],t)n.push(t[D]);return n},e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},e.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var s,n=Object.create(null),r=0;s=t[r];r++){var c=s.getDeveloperVariables;if(!c&&s.getDeveloperVars&&(c=s.getDeveloperVars,e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+s.type+"')"),e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]=!0)),c)for(s=c(),c=0;c<s.length;c++)n[s[c]]=!0}return Object.keys(n)},e.Variables.flyoutCategory=function(t){var n=[],r=document.createElement("button");return r.setAttribute("text","%{BKY_NEW_VARIABLE}"),r.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(s){e.Variables.createVariableButtonHandler(s.getTargetWorkspace())}),n.push(r),t=e.Variables.flyoutCategoryBlocks(t),n.concat(t)},e.Variables.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getVariablesOfType("")).length){var r=t[t.length-1];if(e.Blocks.variables_set){var s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set"),s.setAttribute("gap",e.Blocks.math_change?8:24),s.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(s)}if(e.Blocks.math_change&&((s=e.utils.xml.createElement("block")).setAttribute("type","math_change"),s.setAttribute("gap",e.Blocks.variables_get?20:8),s.appendChild(e.Variables.generateVariableFieldDom(r)),r=e.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),s.appendChild(r),n.push(s)),e.Blocks.variables_get){t.sort(e.VariableModel.compareByName),r=0;for(var c;c=t[r];r++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(c)),n.push(s)}}return n},e.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",e.Variables.generateUniqueName=function(t){return e.Variables.generateUniqueNameFromOptions(e.Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},e.Variables.generateUniqueNameFromOptions=function(t,n){if(!n.length)return t;for(var r=e.Variables.VAR_LETTER_OPTIONS,s="",c=r.indexOf(t);;){for(var v=!1,D=0;D<n.length;D++)if(n[D].toLowerCase()==t){v=!0;break}if(!v)return t;++c==r.length&&(c=0,s=Number(s)+1),t=r.charAt(c)+s}},e.Variables.createVariableButtonHandler=function(t,n,r){var s=r||"",c=function(v){e.Variables.promptName(e.Msg.NEW_VARIABLE_TITLE,v,function(D){if(D){var P=e.Variables.nameUsedWithAnyType(D,t);if(P){if(P.type==s)var G=e.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",P.name);else G=(G=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",P.name).replace("%2",P.type);e.alert(G,function(){c(D)})}else t.createVariable(D,s),n&&n(D)}else n&&n(null)})};c("")},e.Variables.createVariable=e.Variables.createVariableButtonHandler,e.Variables.renameVariable=function(t,n,r){var s=function(c){var v=e.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);e.Variables.promptName(v,c,function(D){if(D){var P=e.Variables.nameUsedWithOtherType_(D,n.type,t);P?(P=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",P.name).replace("%2",P.type),e.alert(P,function(){s(D)})):(t.renameVariableById(n.getId(),D),r&&r(D))}else r&&r(null)})};s("")},e.Variables.promptName=function(t,n,r){e.prompt(t,n,function(s){s&&((s=s.replace(/[\s\xa0]+/g," ").trim())==e.Msg.RENAME_VARIABLE||s==e.Msg.NEW_VARIABLE)&&(s=null),r(s)})},e.Variables.nameUsedWithOtherType_=function(t,n,r){r=r.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var c,s=0;c=r[s];s++)if(c.name.toLowerCase()==t&&c.type!=n)return c;return null},e.Variables.nameUsedWithAnyType=function(t,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var s,r=0;s=n[r];r++)if(s.name.toLowerCase()==t)return s;return null},e.Variables.generateVariableFieldDom=function(t){var n=e.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),t=e.utils.xml.createTextNode(t.name),n.appendChild(t),n},e.Variables.getOrCreateVariablePackage=function(t,n,r,s){var c=e.Variables.getVariable(t,n,r,s);return c||(c=e.Variables.createVariable_(t,n,r,s)),c},e.Variables.getVariable=function(t,n,r,s){var c=t.getPotentialVariableMap(),v=null;if(n&&(!(v=t.getVariableById(n))&&c&&(v=c.getVariableById(n)),v))return v;if(r){if(null==s)throw Error("Tried to look up a variable by name without a type");!(v=t.getVariable(r,s))&&c&&(v=c.getVariable(r,s))}return v},e.Variables.createVariable_=function(t,n,r,s){var c=t.getPotentialVariableMap();return r||(r=e.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),c?c.createVariable(r,s,n):t.createVariable(r,s,n)},e.Variables.getAddedVariables=function(t,n){t=t.getAllVariables();var r=[];if(n.length!=t.length)for(var s=0;s<t.length;s++){var c=t[s];-1==n.indexOf(c)&&r.push(c)}return r},e.VERSION="6.20210701.0",e.mainWorkspace=null,e.selected=null,e.draggingConnections=[],e.clipboardXml_=null,e.clipboardSource_=null,e.clipboardTypeCounts_=null,e.cache3dSupported_=null,e.parentContainer=null,e.svgSize=function(t){return e.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new e.utils.Size(t.cachedWidth_,t.cachedHeight_)},e.resizeSvgContents=function(t){t.resizeContents()},e.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var n=t.getParentSvg(),r=t.getCachedParentSvgSize(),s=n.parentNode;if(s){var c=s.offsetWidth;s=s.offsetHeight,r.width!=c&&(n.setAttribute("width",c+"px"),t.setCachedParentSvgSize(c,null)),r.height!=s&&(n.setAttribute("height",s+"px"),t.setCachedParentSvgSize(null,s)),t.resize()}},e.onKeyDown=function(t){var n=e.mainWorkspace;n&&!(e.utils.isTargetInput(t)||n.rendered&&!n.isVisible())&&e.ShortcutRegistry.registry.onKeyDown(n,t)},e.deleteBlock=function(t){t.workspace.isFlyout||(e.Events.setGroup(!0),e.hideChaff(),t.dispose(!t.outputConnection,!0),e.Events.setGroup(!1))},e.copy=function(t){(t=t.toCopyData())&&(e.clipboardXml_=t.xml,e.clipboardSource_=t.source,e.clipboardTypeCounts_=t.typeCounts)},e.paste=function(){if(!e.clipboardXml_)return!1;var t=e.clipboardSource_;return t.isFlyout&&(t=t.targetWorkspace),!(!e.clipboardTypeCounts_||!t.isCapacityAvailable(e.clipboardTypeCounts_)||(e.Events.setGroup(!0),t.paste(e.clipboardXml_),e.Events.setGroup(!1),0))},e.duplicate=function(t){var n=e.clipboardXml_,r=e.clipboardSource_;e.copy(t),t.workspace.paste(e.clipboardXml_),e.clipboardXml_=n,e.clipboardSource_=r},e.onContextMenu_=function(t){e.utils.isTargetInput(t)||t.preventDefault()},e.hideChaff=function(t){e.Tooltip.hide(),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation();var n=!!t;e.getMainWorkspace().getComponentManager().getComponents(e.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(r){r.autoHide(n)})},e.getMainWorkspace=function(){return e.mainWorkspace},e.alert=function(t,n){alert(t),n&&n()},e.confirm=function(t,n){n(confirm(t))},e.prompt=function(t,n,r){r(prompt(t,n))},e.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},e.defineBlocksWithJsonArray=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r){var s=r.type;null==s||""===s?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(e.Blocks[s]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+s+'".'),e.Blocks[s]={init:e.jsonInitFactory_(r)})}else console.warn("Block definition #"+n+" in JSON array is "+r+". Skipping.")}},e.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},e.hueToHex=function(t){return e.utils.colour.hsvToHex(t,e.HSV_SATURATION,255*e.HSV_VALUE)},e.checkBlockColourConstants=function(){e.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),e.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),e.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),e.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),e.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),e.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),e.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),e.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),e.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),e.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),e.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),e.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),e.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),e.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),e.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),e.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},e.checkBlockColourConstant_=function(t,n,r){for(var s="Blockly",c=e,v=0;v<n.length;++v)s+="."+n[v],c&&(c=c[n[v]]);c&&c!==r&&(t=(void 0===r?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",s).replace("%2",t),console.warn(t))},e.setParentContainer=function(t){e.parentContainer=t},e.bindEvent_=e.browserEvents.bind,e.unbindEvent_=e.browserEvents.unbind,e.bindEventWithChecks_=e.browserEvents.conditionalBind,e.ALIGN_LEFT=e.constants.ALIGN.LEFT,e.ALIGN_CENTRE=e.constants.ALIGN.CENTRE,e.ALIGN_RIGHT=e.constants.ALIGN.RIGHT,e.INPUT_VALUE=e.connectionTypes.INPUT_VALUE,e.OUTPUT_VALUE=e.connectionTypes.OUTPUT_VALUE,e.NEXT_STATEMENT=e.connectionTypes.NEXT_STATEMENT,e.PREVIOUS_STATEMENT=e.connectionTypes.PREVIOUS_STATEMENT,e.DUMMY_INPUT=e.inputTypes.DUMMY,e.TOOLBOX_AT_TOP=e.utils.toolbox.Position.TOP,e.TOOLBOX_AT_BOTTOM=e.utils.toolbox.Position.BOTTOM,e.TOOLBOX_AT_LEFT=e.utils.toolbox.Position.LEFT,e.TOOLBOX_AT_RIGHT=e.utils.toolbox.Position.RIGHT,e.Events.BubbleOpen=function(t,n,r){e.Events.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=n,this.bubbleType=r},e.utils.object.inherits(e.Events.BubbleOpen,e.Events.UiBase),e.Events.BubbleOpen.prototype.type=e.Events.BUBBLE_OPEN,e.Events.BubbleOpen.prototype.toJson=function(){var t=e.Events.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},e.Events.BubbleOpen.prototype.fromJson=function(t){e.Events.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.BUBBLE_OPEN,e.Events.BubbleOpen),e.Icon=function(t){this.block_=t,this.iconGroup_=null},e.Icon.prototype.collapseHidden=!0,e.Icon.prototype.SIZE=17,e.Icon.prototype.bubble_=null,e.Icon.prototype.iconXY_=null,e.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),e.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},e.Icon.prototype.dispose=function(){e.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},e.Icon.prototype.updateEditable=function(){},e.Icon.prototype.isVisible=function(){return!!this.bubble_},e.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||e.utils.isRightButton(t)||this.setVisible(!this.isVisible())},e.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},e.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},e.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),n=e.utils.getRelativeXY(this.iconGroup_);t=new e.utils.Coordinate(t.x+n.x+this.SIZE/2,t.y+n.y+this.SIZE/2),e.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},e.Icon.prototype.getIconLocation=function(){return this.iconXY_},e.Icon.prototype.getCorrectedSize=function(){return new e.utils.Size(e.Icon.prototype.SIZE,e.Icon.prototype.SIZE-2)},e.Warning=function(t){e.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_=Object.create(null)},e.utils.object.inherits(e.Warning,e.Icon),e.Warning.prototype.collapseHidden=!1,e.Warning.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},e.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},e.Warning.prototype.createBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.getText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},e.Warning.prototype.setText=function(t,n){this.text_[n]!=t&&(t?this.text_[n]=t:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},e.Warning.prototype.getText=function(){var n,t=[];for(n in this.text_)t.push(this.text_[n]);return t.join("\n")},e.Warning.prototype.dispose=function(){this.block_.warning=null,e.Icon.prototype.dispose.call(this)},e.Comment=function(t){e.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},e.utils.object.inherits(e.Comment,e.Icon),e.Comment.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},e.Comment.prototype.createEditor_=function(){this.foreignObject_=e.utils.dom.createSvgElement(e.utils.Svg.FOREIGNOBJECT,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(e.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",e.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(e.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),t.appendChild(n),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=e.browserEvents.conditionalBind(n,"wheel",this,function(r){r.stopPropagation()}),this.onChangeWrapper_=e.browserEvents.conditionalBind(n,"change",this,function(r){this.cachedText_!=this.model_.text&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=e.browserEvents.conditionalBind(n,"input",this,function(r){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},e.Comment.prototype.updateEditable=function(){e.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},e.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},e.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,n=2*e.Bubble.BORDER_WIDTH,r=t.width-n;t=t.height-n,this.foreignObject_.setAttribute("width",r),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=r-4+"px",this.textarea_.style.height=t-4+"px"},e.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},e.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||e.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},e.Comment.prototype.createEditableBubble_=function(){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},e.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(e.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(e.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(e.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(e.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},e.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},e.Comment.prototype.getBubbleSize=function(){return this.model_.size},e.Comment.prototype.setBubbleSize=function(t,n){this.bubble_?this.bubble_.setBubbleSize(t,n):(this.model_.size.width=t,this.model_.size.height=n)},e.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},e.Comment.prototype.dispose=function(){this.block_.comment=null,e.Icon.prototype.dispose.call(this)},e.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),e.IComponent=function(){},e.IDragTarget=function(){},e.DragTarget=function(){},e.DragTarget.prototype.onDragEnter=function(t){},e.DragTarget.prototype.onDragOver=function(t){},e.DragTarget.prototype.onDragExit=function(t){},e.DragTarget.prototype.onDrop=function(t){},e.DragTarget.prototype.shouldPreventMove=function(t){return!1},e.IDeleteArea=function(){},e.DeleteArea=function(){e.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},e.utils.object.inherits(e.DeleteArea,e.DragTarget),e.DeleteArea.prototype.wouldDelete=function(t,n){return t instanceof e.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!n)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},e.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t},e.IFlyout=function(){},e.Flyout=function(t){e.Flyout.superClass_.constructor.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new e.WorkspaceSvg(t),this.workspace_.setMetricsManager(new e.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=e.utils.genUid(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},e.utils.object.inherits(e.Flyout,e.DeleteArea),e.Flyout.prototype.autoClose=!0,e.Flyout.prototype.isVisible_=!1,e.Flyout.prototype.containerVisible_=!0,e.Flyout.prototype.CORNER_RADIUS=8,e.Flyout.prototype.MARGIN=e.Flyout.prototype.CORNER_RADIUS,e.Flyout.prototype.GAP_X=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.GAP_Y=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.SCROLLBAR_MARGIN=2.5,e.Flyout.prototype.width_=0,e.Flyout.prototype.height_=0,e.Flyout.prototype.dragAngleRange_=70,e.Flyout.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},e.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new e.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),e.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},e.Flyout.prototype.getWidth=function(){return this.width_},e.Flyout.prototype.getHeight=function(){return this.height_},e.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},e.Flyout.prototype.getWorkspace=function(){return this.workspace_},e.Flyout.prototype.isVisible=function(){return this.isVisible_},e.Flyout.prototype.setVisible=function(t){var n=t!=this.isVisible();this.isVisible_=t,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},e.Flyout.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},e.Flyout.prototype.positionAt_=function(t,n,r,s){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(t,n),"svg"==this.svgGroup_.tagName?e.utils.dom.setCssTransform(this.svgGroup_,"translate("+r+"px,"+s+"px)"):this.svgGroup_.setAttribute("transform","translate("+r+","+s+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(r,s),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},e.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,t=0;n=this.listeners_[t];t++)e.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},e.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=e.utils.toolbox.convertFlyoutDefToJsonArray(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(e.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var s,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++)s.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.createFlyoutInfo_=function(t){var n=[],r=[];this.permanentlyDisabled_.length=0;for(var v,s=this.horizontalLayout?this.GAP_X:this.GAP_Y,c=0;v=t[c];c++)switch(v.custom&&(v=this.getDynamicCategoryContents_(v.custom),v=e.utils.toolbox.convertFlyoutDefToJsonArray(v),t.splice.apply(t,[c,1].concat(v)),v=t[c]),v.kind.toUpperCase()){case"BLOCK":var D=v,P=this.getBlockXml_(D);v=this.createBlock_(P),D=parseInt(D.gap||P.getAttribute("gap"),10),r.push(isNaN(D)?s:D),n.push({type:"block",block:v});break;case"SEP":this.addSeparatorGap_(v,r,s);break;case"LABEL":v=this.createButton_(v,!0),n.push({type:"button",button:v}),r.push(s);break;case"BUTTON":v=this.createButton_(v,!1),n.push({type:"button",button:v}),r.push(s)}return{contents:n,gaps:r}},e.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},e.Flyout.prototype.createButton_=function(t,n){if(!e.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new e.FlyoutButton(this.workspace_,this.targetWorkspace,t,n)},e.Flyout.prototype.createBlock_=function(t){return(t=e.Xml.domToBlock(t,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(t),t},e.Flyout.prototype.getBlockXml_=function(t){var n=null,r=t.blockxml;if(r&&"string"!=typeof r?n=r:r&&"string"==typeof r?(n=e.Xml.textToDom(r),t.blockxml=n):t.type&&((n=e.utils.xml.createElement("xml")).setAttribute("type",t.type),n.setAttribute("disabled",t.disabled),t.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},e.Flyout.prototype.addSeparatorGap_=function(t,n,r){t=parseInt(t.gap,10),!isNaN(t)&&0<n.length?n[n.length-1]=t:n.push(r)},e.Flyout.prototype.clearOldBlocks_=function(){for(var r,t=this.workspace_.getTopBlocks(!1),n=0;r=t[n];n++)r.workspace==this.workspace_&&r.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&(e.Tooltip.unbindMouseEvents(t),e.utils.dom.removeNode(t));for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},e.Flyout.prototype.addBlockListeners_=function(t,n,r){this.listeners_.push(e.browserEvents.conditionalBind(t,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.conditionalBind(r,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.bind(t,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(t,"mouseleave",n,n.removeSelect)),this.listeners_.push(e.browserEvents.bind(r,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(r,"mouseleave",n,n.removeSelect))},e.Flyout.prototype.blockMouseDown_=function(t){var n=this;return function(r){var s=n.targetWorkspace.getGesture(r);s&&(s.setStartBlock(t),s.handleFlyoutStart(r,n))}},e.Flyout.prototype.onMouseDown_=function(t){var n=this.targetWorkspace.getGesture(t);n&&n.handleFlyoutStart(t,this)},e.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},e.Flyout.prototype.createBlock=function(t){var n=null;e.Events.disable();var r=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(t)}finally{e.Events.enable()}if(e.hideChaff(),t=e.Variables.getAddedVariables(this.targetWorkspace,r),e.Events.isEnabled()){for(e.Events.setGroup(!0),r=0;r<t.length;r++){var s=t[r];e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(s))}e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},e.Flyout.prototype.initFlyoutButton_=function(t,n,r){var s=t.createDom();t.moveTo(n,r),t.show(),this.listeners_.push(e.browserEvents.conditionalBind(s,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},e.Flyout.prototype.createRect_=function(t,n,r,s,c){return(n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{"fill-opacity":0,x:n,y:r,height:s.height,width:s.width},null)).tooltip=t,e.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,t.getSvgRoot()),t.flyoutRect_=n,this.mats_[c]=n},e.Flyout.prototype.moveRectToBlock_=function(t,n){var r=n.getHeightWidth();t.setAttribute("width",r.width),t.setAttribute("height",r.height),n=n.getRelativeToSurfaceXY(),t.setAttribute("y",n.y),t.setAttribute("x",this.RTL?n.x-r.width:n.x)},e.Flyout.prototype.filterForCapacity_=function(){for(var r,t=this.workspace_.getTopBlocks(!1),n=0;r=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(r))for(var s=this.targetWorkspace.isCapacityAvailable(e.utils.getBlockTypeCounts(r));r;)r.setEnabled(s),r=r.getNextBlock()},e.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},e.Flyout.prototype.placeNewBlock_=function(t){var n=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var r=e.Xml.blockToDom(t,!0);if(n.setResizesEnabled(!1),!(r=e.Xml.domToBlock(r,n)).getSvgRoot())throw Error("block is not rendered.");var s=n.getOriginOffsetInPixels(),c=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=e.utils.Coordinate.sum(c,t),(s=e.utils.Coordinate.difference(t,s)).scale(1/n.scale),r.moveBy(s.x,s.y),r},e.HorizontalFlyout=function(t){e.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0},e.utils.object.inherits(e.HorizontalFlyout,e.Flyout),e.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(r.left+(r.width-s.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.HorizontalFlyout.prototype.getX=function(){return 0},e.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),r=t.getViewMetrics();t=t.getToolboxMetrics();var s=this.toolboxPosition_==e.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?s?t.height:r.height-this.height_:s?0:r.height:s?0:r.height+n.top-this.height_},e.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.HorizontalFlyout.prototype.setBackgroundPath_=function(t,n){var r=this.toolboxPosition_==e.utils.toolbox.Position.TOP,s=["M 0,"+(r?0:this.CORNER_RADIUS)];r?(s.push("h",t+2*this.CORNER_RADIUS),s.push("v",n),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",-t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),s.push("h",t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",n),s.push("h",-t-2*this.CORNER_RADIUS)),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},e.HorizontalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n=n.x||n.y){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics();n=r.getViewMetrics().left-s.left+n,this.workspace_.scrollbar.setX(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.HorizontalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;var r=this.MARGIN,s=r+this.tabWidth_;this.RTL&&(t=t.reverse());for(var v,c=0;v=t[c];c++)if("block"==v.type){for(var G,D=(v=v.block).getDescendants(!1),P=0;G=D[P];P++)G.isInFlyout=!0;v.render(),D=v.getSvgRoot(),P=v.getHeightWidth(),G=v.outputConnection?this.tabWidth_:0,v.moveBy(G=this.RTL?s+P.width:s-G,r),G=this.createRect_(v,G,r,P,c),s+=P.width+n[c],this.addBlockListeners_(D,v,G)}else"button"==v.type&&(this.initFlyoutButton_(v.button,s,r),s+=v.button.width+n[c])},e.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<90+n&&t>90-n||t>-90-n&&t<-90+n},e.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top;return this.toolboxPosition_==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e9,n+t.height,-1e9,1e9):new e.utils.Rect(n,1e9,-1e9,1e9)},e.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++)t=Math.max(t,s.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,this.height_!=(t+=e.Scrollbar.scrollbarThickness)){for(r=0;s=n[r];r++)s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.registry.DEFAULT,e.HorizontalFlyout),e.VerticalFlyout=function(t){e.VerticalFlyout.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.VerticalFlyout,e.Flyout),e.VerticalFlyout.registryName="verticalFlyout",e.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(r.top+(r.height-s.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),r=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==e.utils.toolbox.Position.LEFT?t.width:r.width-this.width_:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:r.width:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:r.width+n.left-this.width_},e.VerticalFlyout.prototype.getY=function(){return 0},e.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.VerticalFlyout.prototype.setBackgroundPath_=function(t,n){var r=this.toolboxPosition_==e.utils.toolbox.Position.RIGHT,s=t+this.CORNER_RADIUS;(s=["M "+(r?s:0)+",0"]).push("h",r?-t:t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",Math.max(0,n)),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",r?t:-t),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},e.VerticalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n.y){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics();n=r.getViewMetrics().top-s.top+n.y,this.workspace_.scrollbar.setY(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.VerticalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;for(var v,r=this.MARGIN,s=this.RTL?r:r+this.tabWidth_,c=0;v=t[c];c++)if("block"==v.type){for(var G,D=(v=v.block).getDescendants(!1),P=0;G=D[P];P++)G.isInFlyout=!0;v.render(),D=v.getSvgRoot(),P=v.getHeightWidth(),v.moveBy(G=v.outputConnection?s-this.tabWidth_:s,r),G=this.createRect_(v,this.RTL?G-P.width:G,r,P,c),this.addBlockListeners_(D,v,G),r+=P.height+n[c]}else"button"==v.type&&(this.initFlyoutButton_(v.button,s,r),r+=v.button.height+n[c])},e.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<n&&t>-n||t<-180+n||t>180-n},e.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.left;return this.toolboxPosition_==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e9,1e9,-1e9,n+t.width):new e.utils.Rect(-1e9,1e9,n,1e9)},e.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++){var c=s.getHeightWidth().width;s.outputConnection&&(c-=this.tabWidth_),t=Math.max(t,c)}for(r=0;s=this.buttons_[r];r++)t=Math.max(t,s.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,this.width_!=(t+=e.Scrollbar.scrollbarThickness)){for(r=0;s=n[r];r++){if(this.RTL){c=s.getRelativeToSurfaceXY().x;var v=t/this.workspace_.scale-this.MARGIN;s.outputConnection||(v-=this.tabWidth_),s.moveBy(v-c,0)}s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s)}if(this.RTL)for(r=0;s=this.buttons_[r];r++)n=s.getPosition().y,s.moveTo(t/this.workspace_.scale-s.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.registry.DEFAULT,e.VerticalFlyout),e.FlyoutButton=function(t,n,r,s){this.workspace_=t,this.targetWorkspace_=n,this.text_=r.text,this.position_=new e.utils.Coordinate(0,0),this.isLabel_=s,this.callbackKey_=r.callbackKey||r.callbackkey,this.cssClass_=r["web-class"]||null,this.onMouseUpWrapper_=null,this.info=r},e.FlyoutButton.MARGIN_X=5,e.FlyoutButton.MARGIN_Y=2,e.FlyoutButton.prototype.width=0,e.FlyoutButton.prototype.height=0,e.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},this.workspace_.getCanvas()),!this.isLabel_)var n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var r=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),s=e.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(s+="\u200f"),r.textContent=s,this.isLabel_&&(this.svgText_=r,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var c=e.utils.style.getComputedStyle(r,"fontSize"),v=e.utils.style.getComputedStyle(r,"fontWeight"),D=e.utils.style.getComputedStyle(r,"fontFamily");return this.width=e.utils.dom.getFastTextWidthWithSizeString(r,c,v,D),s=e.utils.dom.measureFontMetrics(s,c,v,D),this.height=s.height,this.isLabel_||(this.width+=2*e.FlyoutButton.MARGIN_X,this.height+=2*e.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),r.setAttribute("x",this.width/2),r.setAttribute("y",this.height/2-s.height/2+s.baseline),this.updateTransform_(),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},e.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},e.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},e.FlyoutButton.prototype.moveTo=function(t,n){this.position_.x=t,this.position_.y=n,this.updateTransform_()},e.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},e.FlyoutButton.prototype.getPosition=function(){return this.position_},e.FlyoutButton.prototype.getButtonText=function(){return this.text_},e.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},e.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&e.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},e.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},e.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),e.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},e.Generator.prototype.INFINITE_LOOP_TRAP=null,e.Generator.prototype.STATEMENT_PREFIX=null,e.Generator.prototype.STATEMENT_SUFFIX=null,e.Generator.prototype.INDENT="  ",e.Generator.prototype.COMMENT_WRAP=60,e.Generator.prototype.ORDER_OVERRIDES=[],e.Generator.prototype.isInitialized=null,e.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=e.getMainWorkspace());var n=[];this.init(t),t=t.getTopBlocks(!0);for(var s,r=0;s=t[r];r++){var c=this.blockToCode(s);Array.isArray(c)&&(c=c[0]),c&&(s.outputConnection&&(c=this.scrubNakedValue(c),this.STATEMENT_PREFIX&&!s.suppressPrefixSuffix&&(c=this.injectId(this.STATEMENT_PREFIX,s)+c),this.STATEMENT_SUFFIX&&!s.suppressPrefixSuffix&&(c+=this.injectId(this.STATEMENT_SUFFIX,s))),n.push(c))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},e.Generator.prototype.prefixLines=function(t,n){return n+t.replace(/(?!\n$)\n/g,"\n"+n)},e.Generator.prototype.allNestedComments=function(t){var n=[];t=t.getDescendants(!0);for(var r=0;r<t.length;r++){var s=t[r].getCommentText();s&&n.push(s)}return n.length&&n.push(""),n.join("\n")},e.Generator.prototype.blockToCode=function(t,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return n?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return n?"":this.blockToCode(t.getChildren(!1)[0]);var r=this[t.type];if("function"!=typeof r)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(r=r.call(t,t),Array.isArray(r)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,r[0],n),r[1]]}if("string"==typeof r)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,t)+r),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,r,n);if(null===r)return"";throw SyntaxError("Invalid code generated: "+r)},e.Generator.prototype.valueToCode=function(t,n,r){if(isNaN(r))throw TypeError("Expecting valid order from block: "+t.type);var s=t.getInputTargetBlock(n);if(!s||""===(n=this.blockToCode(s)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+s.type);if(t=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+s.type);if(!t)return"";s=!1;var c=Math.floor(r),v=Math.floor(n);if(c<=v&&(c!=v||0!=c&&99!=c))for(s=!0,c=0;c<this.ORDER_OVERRIDES.length;c++)if(this.ORDER_OVERRIDES[c][0]==r&&this.ORDER_OVERRIDES[c][1]==n){s=!1;break}return s&&(t="("+t+")"),t},e.Generator.prototype.statementToCode=function(t,n){if(t=t.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},e.Generator.prototype.addLoopTrap=function(t,n){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+t),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+t),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),t},e.Generator.prototype.injectId=function(t,n){return n=n.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+n+"'")},e.Generator.prototype.RESERVED_WORDS_="",e.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},e.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(e.Generator.prototype,"variableDB_",{get:function(){return e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}),e.Generator.prototype.provideFunction_=function(t,n){if(!this.definitions_[t]){var s,r=this.nameDB_.getDistinctName(t,e.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[t]=r,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,r);s!=n;)s=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[t]=n}return this.functionNames_[t]},e.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},e.Generator.prototype.scrub_=function(t,n,r){return n},e.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},e.Generator.prototype.scrubNakedValue=function(t){return t},e.IToolboxItem=function(){},e.ISelectableToolboxItem=function(){},e.ICollapsibleToolboxItem=function(){},e.ToolboxItem=function(t,n,r){this.id_=t.toolboxitemid||e.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=r||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},e.ToolboxItem.prototype.init=function(){},e.ToolboxItem.prototype.getDiv=function(){return null},e.ToolboxItem.prototype.getId=function(){return this.id_},e.ToolboxItem.prototype.getParent=function(){return null},e.ToolboxItem.prototype.getLevel=function(){return this.level_},e.ToolboxItem.prototype.isSelectable=function(){return!1},e.ToolboxItem.prototype.isCollapsible=function(){return!1},e.ToolboxItem.prototype.dispose=function(){},e.ToolboxCategory=function(t,n,r){e.ToolboxCategory.superClass_.constructor.call(this,t,n,r),this.name_=e.utils.replaceMessageReferences(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)},e.utils.object.inherits(e.ToolboxCategory,e.ToolboxItem),e.ToolboxCategory.registrationName="category",e.ToolboxCategory.nestedPadding=19,e.ToolboxCategory.borderWidth=8,e.ToolboxCategory.defaultBackgroundColour="#57e",e.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},e.ToolboxCategory.prototype.parseContents_=function(t){var n=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var r;r=n[t];t++)this.flyoutItems_.push(r)}},e.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},e.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),e.utils.aria.setRole(this.htmlDiv_,e.utils.aria.Role.TREEITEM),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,!1),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),e.utils.aria.setRole(this.iconDom_,e.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},e.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),t},e.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");e.utils.dom.addClass(t,this.cssConfig_.row);var n=e.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?t.style.paddingRight=n:t.style.paddingLeft=n,t},e.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.rowcontentcontainer),t},e.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.display="inline-block",t},e.ToolboxCategory.prototype.createLabelDom_=function(t){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=t,e.utils.dom.addClass(n,this.cssConfig_.label),n},e.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},e.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=e.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},e.ToolboxCategory.prototype.getColour_=function(t){var n=t.categorystyle||t.categoryStyle;return(t=t.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(t)},e.ToolboxCategory.prototype.getColourfromStyle_=function(t){var n=this.workspace_.getTheme();if(t&&n){if((n=n.categoryStyles[t])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},e.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},e.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=e.utils.replaceMessageReferences(t))||""===t)return"";var n=Number(t);return isNaN(n)?(n=e.utils.colour.parse(t))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):e.hueToHex(n)},e.ToolboxCategory.prototype.openIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.closedicon),e.utils.dom.addClass(t,this.cssConfig_.openicon))},e.ToolboxCategory.prototype.closeIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.openicon),e.utils.dom.addClass(t,this.cssConfig_.closedicon))},e.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},e.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},e.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},e.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},e.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},e.ToolboxCategory.prototype.onClick=function(t){},e.ToolboxCategory.prototype.setSelected=function(t){if(t){var n=this.parseColour_(e.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,e.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",e.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,t)},e.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},e.ToolboxCategory.prototype.getName=function(){return this.name_},e.ToolboxCategory.prototype.getParent=function(){return this.parent_},e.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},e.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=e.utils.toolbox.convertFlyoutDefToJsonArray(t)),this.parseContents_(this.toolboxItemDef_)},e.ToolboxCategory.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxCategory.registrationName,e.ToolboxCategory),e.ToolboxSeparator=function(t,n){e.ToolboxSeparator.superClass_.constructor.call(this,t,n),this.cssConfig_={container:"blocklyTreeSeparator"},e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig)},e.utils.object.inherits(e.ToolboxSeparator,e.ToolboxItem),e.ToolboxSeparator.registrationName="sep",e.ToolboxSeparator.prototype.init=function(){this.createDom_()},e.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),this.htmlDiv_=t},e.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxSeparator.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxSeparator.registrationName,e.ToolboxSeparator),e.CollapsibleToolboxCategory=function(t,n,r){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],e.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.CollapsibleToolboxCategory,e.ToolboxCategory),e.CollapsibleToolboxCategory.registrationName="collapsibleCategory",e.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=e.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},e.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var n=t.contents,r=!0;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var s;s=n[t];t++)!e.registry.hasItem(e.registry.Type.TOOLBOX_ITEM,s.kind)||s.kind.toLowerCase()==e.ToolboxSeparator.registrationName&&r?(this.flyoutItems_.push(s),r=!0):(this.createToolboxItem_(s),r=!1)}},e.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var n=t.kind;"CATEGORY"==n.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(n=e.CollapsibleToolboxCategory.registrationName),t=new(e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,n))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},e.CollapsibleToolboxCategory.prototype.init=function(){e.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},e.CollapsibleToolboxCategory.prototype.createDom_=function(){e.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),e.utils.aria.setRole(this.subcategoriesDiv_,e.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},e.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var n=document.createElement("div");e.utils.dom.addClass(n,this.cssConfig_.contents);for(var r=0;r<t.length;r++){var s=t[r];s.init();var c=s.getDiv();n.appendChild(c),s.getClickTarget&&s.getClickTarget().setAttribute("id",s.getId())}return n},e.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!=t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},e.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var r,n=0;r=this.getChildToolboxItems()[n];n++)r.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},e.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},e.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},e.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},e.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.CollapsibleToolboxCategory.registrationName,e.CollapsibleToolboxCategory),e.Events.ToolboxItemSelect=function(t,n,r){e.Events.ToolboxItemSelect.superClass_.constructor.call(this,r),this.oldItem=t,this.newItem=n},e.utils.object.inherits(e.Events.ToolboxItemSelect,e.Events.UiBase),e.Events.ToolboxItemSelect.prototype.type=e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect.prototype.toJson=function(){var t=e.Events.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},e.Events.ToolboxItemSelect.prototype.fromJson=function(t){e.Events.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},e.registry.register(e.registry.Type.EVENT,e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect),e.IAutoHideable=function(){},e.IStyleable=function(){},e.IToolbox=function(){},e.Toolbox=function(t){e.Toolbox.superClass_.constructor.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},e.utils.object.inherits(e.Toolbox,e.DeleteArea),e.Toolbox.prototype.onShortcut=function(t){return!1},e.Toolbox.prototype.init=function(){var t=this.workspace_,n=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),e.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,e.utils.aria.setRole(this.contentsDiv_,e.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),t.parentNode.insertBefore(n,t),this.attachEvents_(n,this.contentsDiv_),n},e.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),e.utils.dom.addClass(t,"blocklyToolboxDiv"),e.utils.dom.addClass(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},e.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},e.Toolbox.prototype.attachEvents_=function(t,n){t=e.browserEvents.conditionalBind(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),n=e.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},e.Toolbox.prototype.onClick_=function(t){if(e.utils.isRightButton(t)||t.target==this.HtmlDiv)e.hideChaff(!1);else{var n=t.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(t)),e.hideChaff(!0)}e.Touch.clearTouchIdentifier()},e.Toolbox.prototype.onKeyDown_=function(t){var n=!1;switch(t.keyCode){case e.utils.KeyCodes.DOWN:n=this.selectNext_();break;case e.utils.KeyCodes.UP:n=this.selectPrevious_();break;case e.utils.KeyCodes.LEFT:n=this.selectParent_();break;case e.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(t)),n&&t.preventDefault()},e.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,n=new e.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=t.options.toolboxPosition,new(e.registry.getClassFromOptions(t.horizontalLayout?e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(n)},e.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var n=0;n<this.contents_.length;n++){var r=this.contents_[n];r&&r.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},e.Toolbox.prototype.renderContents_=function(t){for(var s,n=document.createDocumentFragment(),r=0;s=t[r];r++)this.createToolboxItem_(s,n);this.contentsDiv_.appendChild(n)},e.Toolbox.prototype.createToolboxItem_=function(t,n){var r=t.kind;"CATEGORY"==r.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(r=e.CollapsibleToolboxCategory.registrationName),(r=e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,r.toLowerCase()))&&(t=new r(t,this),this.addToolboxItem_(t),t.init(),(r=t.getDiv())&&n.appendChild(r),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},e.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var r,n=0;r=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(r)},e.Toolbox.prototype.getToolboxItems=function(){return this.contents_},e.Toolbox.prototype.addStyle=function(t){e.utils.dom.addClass(this.HtmlDiv,t)},e.Toolbox.prototype.removeStyle=function(t){e.utils.dom.removeClass(this.HtmlDiv,t)},e.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),n=t.top,r=n+t.height,s=t.left;return t=s+t.width,this.toolboxPosition==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e7,r,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.BOTTOM?new e.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e7,1e7,-1e7,t):new e.utils.Rect(-1e7,1e7,s,1e7)},e.Toolbox.prototype.wouldDelete=function(t,n){return this.updateWouldDelete_(t instanceof e.BlockSvg?!t.getParent()&&t.isDeletable():t.isDeletable()),this.wouldDelete_},e.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},e.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},e.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(n):this.removeStyle(n)},e.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},e.Toolbox.prototype.getWidth=function(){return this.width_},e.Toolbox.prototype.getHeight=function(){return this.height_},e.Toolbox.prototype.getFlyout=function(){return this.flyout_},e.Toolbox.prototype.getWorkspace=function(){return this.workspace_},e.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},e.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},e.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},e.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition==e.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==e.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},e.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition==e.utils.toolbox.Position.LEFT?t.scrollX+n.width:t.scrollX,this.toolboxPosition==e.utils.toolbox.Position.TOP?t.scrollY+n.height:t.scrollY),e.svgResize(t)},e.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},e.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var n=this.contents_[t];n.refreshTheme&&n.refreshTheme()}},e.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},e.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},e.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},e.Toolbox.prototype.setSelectedItem=function(t){var n=this.selectedItem_;!t&&!n||t&&!t.isSelectable()||(this.shouldDeselectItem_(n,t)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,t)&&null!=t&&this.selectItem_(n,t),this.updateFlyout_(n,t),this.fireSelectEvent_(n,t))},e.Toolbox.prototype.shouldDeselectItem_=function(t,n){return null!=t&&(!t.isCollapsible()||t!=n)},e.Toolbox.prototype.shouldSelectItem_=function(t,n){return null!=n&&n!=t},e.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,"")},e.Toolbox.prototype.selectItem_=function(t,n){this.selectedItem_=n,this.previouslySelectedItem_=t,n.setSelected(!0),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,n.getId())},e.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},e.Toolbox.prototype.updateFlyout_=function(t,n){(t!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},e.Toolbox.prototype.fireSelectEvent_=function(t,n){var r=t&&t.getName(),s=n&&n.getName();t==n&&(s=null),t=new(e.Events.get(e.Events.TOOLBOX_ITEM_SELECT))(r,s,this.workspace_.id),e.Events.fire(t)},e.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},e.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},e.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[++t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[--t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)e.browserEvents.unbind(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),e.utils.dom.removeNode(this.HtmlDiv)},e.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),e.registry.register(e.registry.Type.TOOLBOX,e.registry.DEFAULT,e.Toolbox),e.Events.TrashcanOpen=function(t,n){e.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=t},e.utils.object.inherits(e.Events.TrashcanOpen,e.Events.UiBase),e.Events.TrashcanOpen.prototype.type=e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen.prototype.toJson=function(){var t=e.Events.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},e.Events.TrashcanOpen.prototype.fromJson=function(t){e.Events.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},e.registry.register(e.registry.Type.EVENT,e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen),e.IPositionable=function(){},e.uiPosition={},e.uiPosition.verticalPosition={TOP:0,BOTTOM:1},e.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},e.uiPosition.bumpDirection={UP:0,DOWN:1},e.uiPosition.getStartPositionRect=function(t,n,r,s,c,v){var D=v.scrollbar&&v.scrollbar.canScrollVertically();return t.horizontal===e.uiPosition.horizontalPosition.LEFT?(r=c.absoluteMetrics.left+r,D&&v.RTL&&(r+=e.Scrollbar.scrollbarThickness)):(r=c.absoluteMetrics.left+c.viewMetrics.width-n.width-r,D&&!v.RTL&&(r-=e.Scrollbar.scrollbarThickness)),t.vertical===e.uiPosition.verticalPosition.TOP?t=c.absoluteMetrics.top+s:(t=c.absoluteMetrics.top+c.viewMetrics.height-n.height-s,v.scrollbar&&v.scrollbar.canScrollHorizontally()&&(t-=e.Scrollbar.scrollbarThickness)),new e.utils.Rect(t,t+n.height,r,r+n.width)},e.uiPosition.getCornerOppositeToolbox=function(t,n){return{horizontal:n.toolboxMetrics.position===e.utils.toolbox.Position.LEFT||t.horizontalLayout&&!t.RTL?e.uiPosition.horizontalPosition.RIGHT:e.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===e.utils.toolbox.Position.BOTTOM?e.uiPosition.verticalPosition.TOP:e.uiPosition.verticalPosition.BOTTOM}},e.uiPosition.bumpPositionRect=function(t,n,r,s){for(var G,c=t.left,v=t.right-t.left,D=t.bottom-t.top,P=0;G=s[P];P++)t.intersects(G)&&(t=new e.utils.Rect(t=r===e.uiPosition.bumpDirection.UP?G.top-D-n:G.bottom+n,t+D,c,c+v),P=-1);return t},e.Trashcan=function(t){e.Trashcan.superClass_.constructor.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(t=new e.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.TOP?e.utils.toolbox.Position.BOTTOM:e.utils.toolbox.Position.TOP,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT?e.utils.toolbox.Position.LEFT:e.utils.toolbox.Position.RIGHT,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},e.utils.object.inherits(e.Trashcan,e.DeleteArea),e.Trashcan.prototype.WIDTH_=47,e.Trashcan.prototype.BODY_HEIGHT_=44,e.Trashcan.prototype.LID_HEIGHT_=16,e.Trashcan.prototype.MARGIN_VERTICAL_=20,e.Trashcan.prototype.MARGIN_HORIZONTAL_=20,e.Trashcan.prototype.MARGIN_HOTSPOT_=10,e.Trashcan.prototype.SPRITE_LEFT_=0,e.Trashcan.prototype.SPRITE_TOP_=32,e.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,e.Trashcan.ANIMATION_LENGTH_=80,e.Trashcan.ANIMATION_FRAMES_=4,e.Trashcan.OPACITY_MIN_=.4,e.Trashcan.OPACITY_MAX_=.8,e.Trashcan.MAX_LID_ANGLE_=45,e.Trashcan.prototype.isLidOpen=!1,e.Trashcan.prototype.minOpenness_=0,e.Trashcan.prototype.svgGroup_=null,e.Trashcan.prototype.svgLid_=null,e.Trashcan.prototype.lidTask_=0,e.Trashcan.prototype.lidOpen_=0,e.Trashcan.prototype.left_=0,e.Trashcan.prototype.top_=0,e.Trashcan.prototype.initialized_=!1,e.Trashcan.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var r=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return r.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),e.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),e.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),e.browserEvents.bind(r,"mouseover",this,this.mouseOver_),e.browserEvents.bind(r,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},e.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(e.utils.dom.insertAfter(this.flyout.createDom(e.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET,e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},e.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},e.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},e.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},e.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(e.Xml.textToDom);this.flyout.show(t),this.fireUiEvent_(!0)}},e.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},e.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},e.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},e.Trashcan.prototype.position=function(t,n){if(this.initialized_){var r=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t);t=e.uiPosition.getStartPositionRect(r,new e.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,r.vertical===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.Trashcan.prototype.getBoundingRectangle=function(){return new e.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},e.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new e.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},e.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},e.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},e.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},e.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},e.Trashcan.prototype.animateLid_=function(){var t=e.Trashcan.ANIMATION_FRAMES_,n=1/(t+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*e.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=e.Trashcan.OPACITY_MIN_)+this.lidOpen_*(e.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),e.Trashcan.ANIMATION_LENGTH_/t))},e.Trashcan.prototype.setLidAngle_=function(t){var n=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-t:t)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},e.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*e.Trashcan.MAX_LID_ANGLE_)},e.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},e.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},e.Trashcan.prototype.fireUiEvent_=function(t){t=new(e.Events.get(e.Events.TRASHCAN_OPEN))(t,this.workspace_.id),e.Events.fire(t)},e.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},e.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},e.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},e.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==e.Events.BLOCK_DELETE&&t.oldXml.tagName&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},e.Trashcan.prototype.cleanBlockXML_=function(t){for(var n=t=t.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var r=n.firstChild||n.nextSibling;if(!r)for(r=n.parentNode;r;){if(r.nextSibling){r=r.nextSibling;break}r=r.parentNode}n=r}return e.Xml.domToText(t)},e.VariablesDynamic={},e.VariablesDynamic.onCreateVariableButtonClick_String=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"String")},e.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Number")},e.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Colour")},e.VariablesDynamic.flyoutCategory=function(t){var n=[],r=document.createElement("button");return r.setAttribute("text",e.Msg.NEW_STRING_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(r),(r=document.createElement("button")).setAttribute("text",e.Msg.NEW_NUMBER_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(r),(r=document.createElement("button")).setAttribute("text",e.Msg.NEW_COLOUR_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(r),t.registerButtonCallback("CREATE_VARIABLE_STRING",e.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",e.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",e.VariablesDynamic.onCreateVariableButtonClick_Colour),t=e.VariablesDynamic.flyoutCategoryBlocks(t),n.concat(t)},e.VariablesDynamic.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getAllVariables()).length){if(e.Blocks.variables_set_dynamic){var r=t[t.length-1],s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set_dynamic"),s.setAttribute("gap",24),s.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(s)}if(e.Blocks.variables_get_dynamic){t.sort(e.VariableModel.compareByName),r=0;for(var c;c=t[r];r++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(c)),n.push(s)}}return n},e.ZoomControls=function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},e.ZoomControls.prototype.WIDTH_=32,e.ZoomControls.prototype.HEIGHT_=32,e.ZoomControls.prototype.SMALL_SPACING_=2,e.ZoomControls.prototype.LARGE_SPACING_=11,e.ZoomControls.prototype.MARGIN_VERTICAL_=20,e.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,e.ZoomControls.prototype.svgGroup_=null,e.ZoomControls.prototype.left_=0,e.ZoomControls.prototype.top_=0,e.ZoomControls.prototype.initialized_=!1,e.ZoomControls.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},e.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},e.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&e.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&e.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&e.browserEvents.unbind(this.onZoomOutWrapper_)},e.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new e.utils.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},e.ZoomControls.prototype.position=function(t,n){if(this.initialized_){var r=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t),s=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(s+=this.LARGE_SPACING_+this.HEIGHT_),t=e.uiPosition.getStartPositionRect(r,new e.utils.Size(this.WIDTH_,s),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,(r=r.vertical)===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),r===e.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(r=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(r+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(r=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(r+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomOutWrapper_=e.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},e.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomInWrapper_=e.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},e.ZoomControls.prototype.zoom_=function(t,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},e.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomResetWrapper_=e.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},e.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},e.ZoomControls.prototype.fireZoomEvent_=function(){var t=new(e.Events.get(e.Events.CLICK))(null,this.workspace_.id,"zoom_controls");e.Events.fire(t)},e.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),e.ShortcutItems={},e.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},e.ShortcutItems.registerEscape=function(){var t={name:e.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return e.hideChaff(),!0}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.ESC,t.name)},e.ShortcutItems.registerDelete=function(){var t={name:e.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&e.selected&&e.selected.isDeletable()},callback:function(n,r){return r.preventDefault(),!e.Gesture.inProgress()&&(e.deleteBlock(e.selected),!0)}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.DELETE,t.name),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.BACKSPACE,t.name)},e.ShortcutItems.registerCopy=function(){var t={name:e.ShortcutItems.names.COPY,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()},callback:function(r,s){return s.preventDefault(),e.hideChaff(),e.copy(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerCut=function(){var t={name:e.ShortcutItems.names.CUT,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()&&!e.selected.workspace.isFlyout},callback:function(){return e.copy(e.selected),e.deleteBlock(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerPaste=function(){var t={name:e.ShortcutItems.names.PASTE,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()},callback:function(){return e.paste()}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerUndo=function(){var t={name:e.ShortcutItems.names.UNDO,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()},callback:function(r){return e.hideChaff(),r.undo(!1),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerRedo=function(){var t={name:e.ShortcutItems.names.REDO,preconditionFn:function(r){return!e.Gesture.inProgress()&&!r.options.readOnly},callback:function(r){return e.hideChaff(),r.undo(!0),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Y,[e.utils.KeyCodes.CTRL]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerDefaultShortcuts=function(){e.ShortcutItems.registerEscape(),e.ShortcutItems.registerDelete(),e.ShortcutItems.registerCopy(),e.ShortcutItems.registerCut(),e.ShortcutItems.registerPaste(),e.ShortcutItems.registerUndo(),e.ShortcutItems.registerRedo()},e.ShortcutItems.registerDefaultShortcuts(),e.ContextMenuItems={},e.ContextMenuItems.registerUndo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},e.ContextMenuItems.registerRedo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},e.ContextMenuItems.registerCleanup=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},e.ContextMenuItems.toggleOption_=function(t,n){for(var r=0,s=0;s<n.length;s++)for(var c=n[s];c;)setTimeout(c.setCollapsed.bind(c,t),r),c=c.getNextBlock(),r+=10},e.ContextMenuItems.registerCollapse=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var r=t[n];r;){if(!r.isCollapsed())return"enabled";r=r.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!0,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},e.ContextMenuItems.registerExpand=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var r=t[n];r;){if(r.isCollapsed())return"enabled";r=r.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!1,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},e.ContextMenuItems.addDeletableBlocks_=function(t,n){if(t.isDeletable())Array.prototype.push.apply(n,t.getDescendants(!1));else{t=t.getChildren(!1);for(var r=0;r<t.length;r++)e.ContextMenuItems.addDeletableBlocks_(t[r],n)}},e.ContextMenuItems.getDeletableBlocks_=function(t){var n=[];t=t.getTopBlocks(!0);for(var r=0;r<t.length;r++)e.ContextMenuItems.addDeletableBlocks_(t[r],n);return n},e.ContextMenuItems.deleteNext_=function(t,n){e.Events.setGroup(n);var r=t.shift();r&&(r.workspace?(r.dispose(!1,!0),setTimeout(e.ContextMenuItems.deleteNext_,10,t,n)):e.ContextMenuItems.deleteNext_(t,n)),e.Events.setGroup(!1)},e.ContextMenuItems.registerDeleteAll=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1==(t=e.ContextMenuItems.getDeletableBlocks_(t.workspace).length)?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<e.ContextMenuItems.getDeletableBlocks_(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var n=e.ContextMenuItems.getDeletableBlocks_(t.workspace),r=e.utils.genUid();2>n.length?e.ContextMenuItems.deleteNext_(n,r):e.confirm(e.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(s){s&&e.ContextMenuItems.deleteNext_(n,r)})}},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},e.ContextMenuItems.registerWorkspaceOptions_=function(){e.ContextMenuItems.registerUndo(),e.ContextMenuItems.registerRedo(),e.ContextMenuItems.registerCleanup(),e.ContextMenuItems.registerCollapse(),e.ContextMenuItems.registerExpand(),e.ContextMenuItems.registerDeleteAll()},e.ContextMenuItems.registerDuplicate=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&e.duplicate(t.block)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},e.ContextMenuItems.registerComment=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?e.Msg.REMOVE_COMMENT:e.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,e.utils.userAgent.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},e.ContextMenuItems.registerInline=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?e.Msg.EXTERNAL_INPUTS:e.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var n=1;n<t.inputList.length;n++)if(t.inputList[n-1].type!=e.inputTypes.STATEMENT&&t.inputList[n].type!=e.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},e.ContextMenuItems.registerCollapseExpandBlock=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?e.Msg.EXPAND_BLOCK:e.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},e.ContextMenuItems.registerDisable=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?e.Msg.DISABLE_BLOCK:e.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var n=e.Events.getGroup();n||e.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),n||e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},e.ContextMenuItems.registerDelete=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){var n=t.block;return t=n.getDescendants(!1).length,(n=n.getNextBlock())&&(t-=n.getDescendants(!1).length),1==t?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){e.Events.setGroup(!0),t.block&&e.deleteBlock(t.block),e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},e.ContextMenuItems.registerHelp=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},e.ContextMenuItems.registerBlockOptions_=function(){e.ContextMenuItems.registerDuplicate(),e.ContextMenuItems.registerComment(),e.ContextMenuItems.registerInline(),e.ContextMenuItems.registerCollapseExpandBlock(),e.ContextMenuItems.registerDisable(),e.ContextMenuItems.registerDelete(),e.ContextMenuItems.registerHelp()},e.ContextMenuItems.registerDefaultOptions=function(){e.ContextMenuItems.registerWorkspaceOptions_(),e.ContextMenuItems.registerBlockOptions_()},e.ContextMenuItems.registerDefaultOptions(),e.Mutator=function(t){e.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},e.utils.object.inherits(e.Mutator,e.Icon),e.Mutator.prototype.workspace_=null,e.Mutator.prototype.workspaceWidth_=0,e.Mutator.prototype.workspaceHeight_=0,e.Mutator.prototype.setBlock=function(t){this.block_=t},e.Mutator.prototype.getWorkspace=function(){return this.workspace_},e.Mutator.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},e.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&e.Icon.prototype.iconClick_.call(this,t)},e.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var r,t=e.utils.xml.createElement("xml"),n=0;r=this.quarkNames_[n];n++){var s=e.utils.xml.createElement("block");s.setAttribute("type",r),t.appendChild(s)}else t=null;return(n=new e.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT,(r=!!t)&&(n.languageTree=e.utils.toolbox.convertToolboxDefToJson(t)),this.workspace_=new e.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(e.Events.disableOrphans),t=r?this.workspace_.addFlyout(e.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),t&&n.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},e.Mutator.prototype.updateEditable=function(){e.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&e.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},e.Mutator.prototype.resizeBubble_=function(){var t=2*e.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),r=n.width+n.x,s=n.height+3*t,c=this.workspace_.getFlyout();if(c){var v=c.getWorkspace().getMetricsManager().getScrollMetrics();s=Math.max(s,v.height+20),r+=c.getWidth()}this.block_.RTL&&(r=-n.x),r+=3*t,(Math.abs(this.workspaceWidth_-r)>t||Math.abs(this.workspaceHeight_-s)>t)&&(this.workspaceWidth_=r,this.workspaceHeight_=s,this.bubble_.setBubbleSize(r+t,s+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},e.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},e.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),n&&(t.init(this.workspace_),t.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var s,r=0;s=n[r];r++)s.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(n=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+n:n):t=n=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,n),this.block_.saveConnections){var c=this,v=this.block_;v.saveConnections(this.rootBlock_),this.sourceListener_=function(){v.saveConnections(c.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},e.Mutator.prototype.workspaceChanged_=function(t){if(!(t.isUiEvent||t.type==e.Events.CHANGE&&"disabled"==t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var r,n=0;r=t[n];n++){var s=r.getRelativeToSurfaceXY();if(20>s.y&&r.moveBy(0,20-s.y),r.RTL){var c=-20,v=this.workspace_.getFlyout();v&&(c-=v.getWidth()),s.x>c&&r.moveBy(c-s.x,0)}else 20>s.x&&r.moveBy(20-s.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(e.Events.setGroup(!0),t=(t=(r=this.block_).mutationToDom())&&e.Xml.domToText(t),n=r.rendered,r.rendered=!1,r.compose(this.rootBlock_),r.rendered=n,r.initSvg(),r.rendered&&r.render(),t!=(n=(n=r.mutationToDom())&&e.Xml.domToText(n))){e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(r,"mutation",null,t,n));var D=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(D),r.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),e.Events.setGroup(!1)}}},e.Mutator.prototype.dispose=function(){this.block_.mutator=null,e.Icon.prototype.dispose.call(this)},e.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var s,n=t.getAllBlocks(!1),r=0;s=n[r];r++)s.setStyle(s.getStyleName());if(r=t.getFlyout())for(t=r.workspace_.getAllBlocks(!1),r=0;s=t[r];r++)s.setStyle(s.getStyleName())}},e.Mutator.reconnect=function(t,n,r){if(!t||!t.getSourceBlock().workspace)return!1;r=n.getInput(r).connection;var s=t.targetBlock();return!(s&&s!=n||r.targetConnection==t||(r.isConnected()&&r.disconnect(),r.connect(t),0))},e.Mutator.findParentWs=function(t){var n=null;if(t&&t.options){var r=t.options.parentWorkspace;t.isFlyout?r&&r.options&&(n=r.options.parentWorkspace):r&&(n=r)}return n},e.FieldTextInput=function(t,n,r){this.spellcheck_=!0,e.FieldTextInput.superClass_.constructor.call(this,t,n,r),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},e.utils.object.inherits(e.FieldTextInput,e.Field),e.FieldTextInput.prototype.DEFAULT_VALUE="",e.FieldTextInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldTextInput(n,void 0,t)},e.FieldTextInput.prototype.SERIALIZABLE=!0,e.FieldTextInput.BORDERRADIUS=4,e.FieldTextInput.prototype.CURSOR="text",e.FieldTextInput.prototype.configure_=function(t){e.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},e.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var s,t=0,n=0,r=0;s=this.sourceBlock_.inputList[r];r++){for(var c=0;s.fieldRow[c];c++)t++;s.connection&&n++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},e.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},e.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},e.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},e.FieldTextInput.prototype.render_=function(){if(e.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0))}},e.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},e.FieldTextInput.prototype.showEditor_=function(t,n){this.workspace_=this.sourceBlock_.workspace,!(t=n||!1)&&(e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},e.FieldTextInput.prototype.showPromptEditor_=function(){e.prompt(e.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},e.FieldTextInput.prototype.showInlineEditor_=function(t){e.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},e.FieldTextInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV;e.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var r=this.workspace_.getScale(),s=this.getConstants().FIELD_TEXT_FONTSIZE*r+"pt";if(t.style.fontSize=s,n.style.fontSize=s,s=e.FieldTextInput.BORDERRADIUS*r+"px",this.fullBlockClickTarget_){s=((s=this.getScaledBBox()).bottom-s.top)/2+"px";var c=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*r+"px solid "+c,t.style.borderRadius=s,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*r+"px")}return n.style.borderRadius=s,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},e.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=e.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,e.utils.dom.removeClass(this.getClickTarget_(),"editing")},e.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=e.browserEvents.conditionalBind(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=e.browserEvents.conditionalBind(t,"input",this,this.onHtmlInputChange_)},e.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(e.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},e.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==e.utils.KeyCodes.ENTER?(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.TAB&&(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},e.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,e.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_(),e.Events.setGroup(!1))},e.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},e.FieldTextInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldTextInput.prototype.isTabNavigable=function(){return!0},e.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},e.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},e.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},e.fieldRegistry.register("field_input",e.FieldTextInput),e.FieldAngle=function(t,n,r){this.clockwise_=e.FieldAngle.CLOCKWISE,this.offset_=e.FieldAngle.OFFSET,this.wrap_=e.FieldAngle.WRAP,this.round_=e.FieldAngle.ROUND,e.FieldAngle.superClass_.constructor.call(this,t,n,r),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},e.utils.object.inherits(e.FieldAngle,e.FieldTextInput),e.FieldAngle.prototype.DEFAULT_VALUE=0,e.FieldAngle.fromJson=function(t){return new e.FieldAngle(t.angle,void 0,t)},e.FieldAngle.prototype.SERIALIZABLE=!0,e.FieldAngle.ROUND=15,e.FieldAngle.HALF=50,e.FieldAngle.CLOCKWISE=!1,e.FieldAngle.OFFSET=0,e.FieldAngle.WRAP=360,e.FieldAngle.RADIUS=e.FieldAngle.HALF-1,e.FieldAngle.prototype.configure_=function(t){switch(e.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=t.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=t.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=t.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},e.FieldAngle.prototype.initView=function(){e.FieldAngle.superClass_.initView.call(this),this.symbol_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},e.FieldAngle.prototype.render_=function(){e.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},e.FieldAngle.prototype.showEditor_=function(t){e.FieldAngle.superClass_.showEditor_.call(this,t,e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD),this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.editor_),e.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},e.FieldAngle.prototype.dropdownCreate_=function(){var t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",height:2*e.FieldAngle.HALF+"px",width:2*e.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:e.FieldAngle.HALF,cy:e.FieldAngle.HALF,r:e.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF,y1:e.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var r=0;360>r;r+=15)e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF+e.FieldAngle.RADIUS,y1:e.FieldAngle.HALF,x2:e.FieldAngle.HALF+e.FieldAngle.RADIUS-(r%45==0?10:5),y2:e.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+r+","+e.FieldAngle.HALF+","+e.FieldAngle.HALF+")"},t);this.clickWrapper_=e.browserEvents.conditionalBind(t,"click",this,this.hide_),this.clickSurfaceWrapper_=e.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=e.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},e.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(e.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(e.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(e.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},e.FieldAngle.prototype.hide_=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hide()},e.FieldAngle.prototype.onMouseMove_=function(t){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),r=t.clientX-n.left-e.FieldAngle.HALF;t=t.clientY-n.top-e.FieldAngle.HALF,n=Math.atan(-t/r),isNaN(n)||(n=e.utils.math.toDegrees(n),0>r?n+=180:0<t&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},e.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},e.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,n=e.utils.math.toRadians(t%360);t=["M ",e.FieldAngle.HALF,",",e.FieldAngle.HALF];var r=e.FieldAngle.HALF,s=e.FieldAngle.HALF;if(!isNaN(n)){var c=Number(this.clockwise_),v=e.utils.math.toRadians(this.offset_),D=Math.cos(v)*e.FieldAngle.RADIUS,P=Math.sin(v)*-e.FieldAngle.RADIUS;c&&(n=2*v-n),r+=Math.cos(n)*e.FieldAngle.RADIUS,s-=Math.sin(n)*e.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-v)/Math.PI)%2),c&&(n=1-n),t.push(" l ",D,",",P," A ",e.FieldAngle.RADIUS,",",e.FieldAngle.RADIUS," 0 ",n," ",c," ",r,",",s," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",r),this.line_.setAttribute("y2",s)}},e.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var n;if(e.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===e.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:t.keyCode===e.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:t.keyCode===e.utils.KeyCodes.DOWN?n=-1:t.keyCode===e.utils.KeyCodes.UP&&(n=1),n){var r=this.getValue();this.displayMouseOrKeyboardValue_(r+n*this.round_),t.preventDefault(),t.stopPropagation()}},e.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},e.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},e.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),e.fieldRegistry.register("field_angle",e.FieldAngle),e.FieldCheckbox=function(t,n,r){this.checkChar_=null,e.FieldCheckbox.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.FieldCheckbox,e.Field),e.FieldCheckbox.prototype.DEFAULT_VALUE=!1,e.FieldCheckbox.fromJson=function(t){return new e.FieldCheckbox(t.checked,void 0,t)},e.FieldCheckbox.CHECK_CHAR="\u2713",e.FieldCheckbox.prototype.SERIALIZABLE=!0,e.FieldCheckbox.prototype.CURSOR="default",e.FieldCheckbox.prototype.configure_=function(t){e.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},e.FieldCheckbox.prototype.initView=function(){e.FieldCheckbox.superClass_.initView.call(this),e.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},e.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},e.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||e.FieldCheckbox.CHECK_CHAR},e.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},e.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},e.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},e.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},e.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},e.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},e.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},e.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},e.fieldRegistry.register("field_checkbox",e.FieldCheckbox),e.FieldColour=function(t,n,r){e.FieldColour.superClass_.constructor.call(this,t,n,r),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},e.utils.object.inherits(e.FieldColour,e.Field),e.FieldColour.fromJson=function(t){return new e.FieldColour(t.colour,void 0,t)},e.FieldColour.prototype.SERIALIZABLE=!0,e.FieldColour.prototype.CURSOR="default",e.FieldColour.prototype.isDirty_=!1,e.FieldColour.prototype.colours_=null,e.FieldColour.prototype.titles_=null,e.FieldColour.prototype.columns_=0,e.FieldColour.prototype.configure_=function(t){e.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},e.FieldColour.prototype.initView=function(){this.size_=new e.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},e.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},e.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:e.utils.colour.parse(t)},e.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},e.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},e.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),e.FieldColour.prototype.DEFAULT_VALUE=e.FieldColour.COLOURS[0],e.FieldColour.TITLES=[],e.FieldColour.COLUMNS=7,e.FieldColour.prototype.setColours=function(t,n){return this.colours_=t,n&&(this.titles_=n),this},e.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},e.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.picker_),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),e.DropDownDiv.hideIfOwner(this))},e.FieldColour.prototype.onKeyDown_=function(t){var n=!1;t.keyCode===e.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):t.keyCode===e.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):t.keyCode===e.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):t.keyCode===e.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):t.keyCode===e.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),e.DropDownDiv.hideWithoutAnimation(),n=!0),n&&t.stopPropagation()},e.FieldColour.prototype.moveHighlightBy_=function(t,n){var r=this.colours_||e.FieldColour.COLOURS,s=this.columns_||e.FieldColour.COLUMNS,c=this.highlightedIndex_%s,v=Math.floor(this.highlightedIndex_/s);c+=t,v+=n,0>t?0>c&&0<v?(c=s-1,v--):0>c&&(c=0):0<t?c>s-1&&v<Math.floor(r.length/s)-1?(c=0,v++):c>s-1&&c--:0>n?0>v&&(v=0):0<n&&v>Math.floor(r.length/s)-1&&(v=Math.floor(r.length/s)-1),this.setHighlightedCell_(this.picker_.childNodes[v].childNodes[c],v*s+c)},e.FieldColour.prototype.onMouseMove_=function(t){var n=(t=t.target)&&Number(t.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(t,n)},e.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&e.utils.dom.removeClass(t,"blocklyColourHighlighted")},e.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return n?n.childNodes[this.highlightedIndex_%t]:null},e.FieldColour.prototype.setHighlightedCell_=function(t,n){var r=this.getHighlighted_();r&&e.utils.dom.removeClass(r,"blocklyColourHighlighted"),e.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=n,e.utils.aria.setState(this.picker_,e.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},e.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.colours_||e.FieldColour.COLOURS,r=this.titles_||e.FieldColour.TITLES,s=this.getValue(),c=document.createElement("table");c.className="blocklyColourTable",c.tabIndex=0,c.dir="ltr",e.utils.aria.setRole(c,e.utils.aria.Role.GRID),e.utils.aria.setState(c,e.utils.aria.State.EXPANDED,!0),e.utils.aria.setState(c,e.utils.aria.State.ROWCOUNT,Math.floor(n.length/t)),e.utils.aria.setState(c,e.utils.aria.State.COLCOUNT,t);for(var v,D=0;D<n.length;D++){D%t==0&&(v=document.createElement("tr"),e.utils.aria.setRole(v,e.utils.aria.Role.ROW),c.appendChild(v));var P=document.createElement("td");v.appendChild(P),P.label=n[D],P.title=r[D]||n[D],P.id=e.utils.IdGenerator.getNextUniqueId(),P.setAttribute("data-index",D),e.utils.aria.setRole(P,e.utils.aria.Role.GRIDCELL),e.utils.aria.setState(P,e.utils.aria.State.LABEL,n[D]),e.utils.aria.setState(P,e.utils.aria.State.SELECTED,n[D]==s),P.style.backgroundColor=n[D],n[D]==s&&(P.className="blocklyColourSelected",this.highlightedIndex_=D)}this.onClickWrapper_=e.browserEvents.conditionalBind(c,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=e.browserEvents.conditionalBind(c,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=e.browserEvents.conditionalBind(c,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=e.browserEvents.conditionalBind(c,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=e.browserEvents.conditionalBind(c,"keydown",this,this.onKeyDown_),this.picker_=c},e.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(e.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(e.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(e.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(e.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},e.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),e.fieldRegistry.register("field_colour",e.FieldColour),e.FieldDropdown=function(t,n,r){"function"!=typeof t&&e.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],e.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,r),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},e.utils.object.inherits(e.FieldDropdown,e.Field),e.FieldDropdown.fromJson=function(t){return new e.FieldDropdown(t.options,void 0,t)},e.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},e.FieldDropdown.prototype.SERIALIZABLE=!0,e.FieldDropdown.CHECKMARK_OVERHANG=25,e.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,e.FieldDropdown.IMAGE_Y_OFFSET=5,e.FieldDropdown.IMAGE_Y_PADDING=2*e.FieldDropdown.IMAGE_Y_OFFSET,e.FieldDropdown.ARROW_CHAR=e.utils.userAgent.ANDROID?"\u25bc":"\u25be",e.FieldDropdown.prototype.CURSOR="default",e.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&e.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},e.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},e.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?e.FieldDropdown.ARROW_CHAR+" ":" "+e.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},e.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},e.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new e.utils.Coordinate(t.clientX,t.clientY):null,this.menu_.render(e.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),e.utils.dom.addClass(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.DropDownDiv.setColour(t,n)}e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},e.FieldDropdown.prototype.dropdownCreate_=function(){var t=new e.Menu;t.setRole(e.utils.aria.Role.LISTBOX),this.menu_=t;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var r=0;r<n.length;r++){var s=n[r][0],c=n[r][1];if("object"==typeof s){var v=new Image(s.width,s.height);v.src=s.src,v.alt=s.alt||"",s=v}(s=new e.MenuItem(s,c)).setRole(e.utils.aria.Role.OPTION),s.setRightToLeft(this.sourceBlock_.RTL),s.setCheckable(!0),t.addChild(s),s.setChecked(c==this.value_),c==this.value_&&(this.selectedMenuItem_=s),s.onAction(this.handleMenuActionEvent_,this)}},e.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},e.FieldDropdown.prototype.handleMenuActionEvent_=function(t){e.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},e.FieldDropdown.prototype.onItemSelected_=function(t,n){this.setValue(n.getValue())},e.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var n=!1,r=0;r<t.length;r++){var s=t[r][0];"string"==typeof s?t[r][0]=e.utils.replaceMessageReferences(s):(null!=s.alt&&(t[r][0].alt=e.utils.replaceMessageReferences(s.alt)),n=!0)}if(!(n||2>t.length)){for(n=[],r=0;r<t.length;r++)n.push(t[r][0]);r=e.utils.string.shortestStringLength(n),s=e.utils.string.commonWordPrefix(n,r);var c=e.utils.string.commonWordSuffix(n,r);!s&&!c||r<=s+c||(s&&(this.prefixField=n[0].substring(0,s-1)),c&&(this.suffixField=n[0].substr(1-c)),this.menuGenerator_=e.FieldDropdown.applyTrim_(t,s,c))}}},e.FieldDropdown.applyTrim_=function(t,n,r){for(var s=[],c=0;c<t.length;c++){var v=t[c][0],D=t[c][1];v=v.substring(n,v.length-r),s[c]=[v,D]}return s},e.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},e.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),e.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},e.FieldDropdown.prototype.doClassValidation_=function(t){for(var c,n=!1,r=this.getOptions(!0),s=0;c=r[s];s++)if(c[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},e.FieldDropdown.prototype.doValueUpdate_=function(t){e.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var r,n=0;r=t[n];n++)r[1]==this.value_&&(this.selectedOption_=r)},e.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},e.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},e.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var n=Number(t.height);t=Number(t.width);var r=!!this.borderRect_,s=Math.max(r?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+e.FieldDropdown.IMAGE_Y_PADDING);r=r?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var c=this.svgArrow_?this.positionSVGArrow_(t+r,s/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):e.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+c+2*r,this.size_.height=s;var v=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",r+c):(v=t+c,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",r)),this.imageElement_.setAttribute("y",s/2-n/2),this.positionTextElement_(v+r,t+c)},e.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),e.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,n=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),r=e.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var s=0;this.svgArrow_&&(s=this.positionSVGArrow_(r+t,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=r+s+2*t,this.size_.height=n,this.positionTextElement_(t,r)},e.FieldDropdown.prototype.positionSVGArrow_=function(t,n){if(!this.svgArrow_)return 0;var r=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,s=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,c=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?r:t+s)+","+n+")"),c+s},e.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},e.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,r=0;r<t.length;++r){var s=t[r];Array.isArray(s)?"string"!=typeof s[1]?(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option id must be a string. Found "+s[1]+" in: ",s)):s[0]&&"string"!=typeof s[0]&&"string"!=typeof s[0].src&&(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option must have a string label or image description. Found"+s[0]+" in: ",s)):(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option must be an array. Found: ",s))}if(n)throw TypeError("Found invalid FieldDropdown options.")},e.fieldRegistry.register("field_dropdown",e.FieldDropdown),e.FieldLabelSerializable=function(t,n,r){e.FieldLabelSerializable.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.FieldLabelSerializable,e.FieldLabel),e.FieldLabelSerializable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabelSerializable(n,void 0,t)},e.FieldLabelSerializable.prototype.EDITABLE=!1,e.FieldLabelSerializable.prototype.SERIALIZABLE=!0,e.fieldRegistry.register("field_label_serializable",e.FieldLabelSerializable),e.FieldImage=function(t,n,r,s,c,v,D){if(!t)throw Error("Src value of an image field is required");if(t=e.utils.replaceMessageReferences(t),r=Number(e.utils.replaceMessageReferences(r)),n=Number(e.utils.replaceMessageReferences(n)),isNaN(r)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=r||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",e.FieldImage.superClass_.constructor.call(this,t,null,D),D||(this.flipRtl_=!!v,this.altText_=e.utils.replaceMessageReferences(s)||""),this.size_=new e.utils.Size(n,r+e.FieldImage.Y_PADDING),this.imageHeight_=r,this.clickHandler_=null,"function"==typeof c&&(this.clickHandler_=c),this.imageElement_=null},e.utils.object.inherits(e.FieldImage,e.Field),e.FieldImage.prototype.DEFAULT_VALUE="",e.FieldImage.fromJson=function(t){return new e.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},e.FieldImage.Y_PADDING=1,e.FieldImage.prototype.EDITABLE=!1,e.FieldImage.prototype.isDirty_=!1,e.FieldImage.prototype.configure_=function(t){e.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=e.utils.replaceMessageReferences(t.alt)||""},e.FieldImage.prototype.initView=function(){this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},e.FieldImage.prototype.updateSize_=function(){},e.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},e.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},e.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},e.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},e.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},e.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},e.FieldImage.prototype.getText_=function(){return this.altText_},e.fieldRegistry.register("field_image",e.FieldImage),e.FieldMultilineInput=function(t,n,r){e.FieldMultilineInput.superClass_.constructor.call(this,t,n,r),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},e.utils.object.inherits(e.FieldMultilineInput,e.FieldTextInput),e.FieldMultilineInput.prototype.configure_=function(t){e.FieldMultilineInput.superClass_.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},e.FieldMultilineInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldMultilineInput(n,void 0,t)},e.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},e.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},e.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},e.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return e.Field.NBSP;var n=t.split("\n");t="";for(var r=this.isOverflowedY_?this.maxLines_:n.length,s=0;s<r;s++){var c=n[s];c.length>this.maxDisplayLength?c=c.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&s===r-1&&(c=c.substring(0,c.length-3)+"..."),t+=c=c.replace(/\s/g,e.Field.NBSP),s!==r-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="\u200f"),t},e.FieldMultilineInput.prototype.doValueUpdate_=function(t){e.FieldMultilineInput.superClass_.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},e.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var n=0,r=0;r<t.length;r++){var s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[r])),n+=s}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?e.utils.dom.addClass(t,"blocklyHtmlTextAreaInputOverflowedY"):e.utils.dom.removeClass(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0)))},e.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,n=0,r=0,s=0;s<t.length;s++){var c=e.utils.dom.getTextWidth(t[s]);c>n&&(n=c),r+=this.getConstants().FIELD_TEXT_HEIGHT+(0<s?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split("\n"),c=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var v=this.getConstants().FIELD_TEXT_FONTSIZE,D=this.getConstants().FIELD_TEXT_FONTWEIGHT,P=this.getConstants().FIELD_TEXT_FONTFAMILY;for(s=0;s<t.length;s++){t[s].length>this.maxDisplayLength&&(t[s]=t[s].substring(0,this.maxDisplayLength)),c.textContent=t[s];var G=e.utils.dom.getFastTextWidth(c,v,D,P);G>n&&(n=G)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(r+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",r)),this.size_.width=n,this.size_.height=r,this.positionBorderRect_()},e.FieldMultilineInput.prototype.showEditor_=function(t,n){e.FieldMultilineInput.superClass_.showEditor_.call(this,t,n),this.forceRerender()},e.FieldMultilineInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=this.workspace_.getScale(),r=document.createElement("textarea");r.className="blocklyHtmlInput blocklyHtmlTextAreaInput",r.setAttribute("spellcheck",this.spellcheck_);var s=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";t.style.fontSize=s,r.style.fontSize=s,r.style.borderRadius=e.FieldTextInput.BORDERRADIUS*n+"px",s=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var c=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return r.style.padding=c+"px "+s+"px "+c+"px "+s+"px",s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,r.style.lineHeight=s*n+"px",t.appendChild(r),r.value=r.defaultValue=this.getEditorText_(this.value_),r.untypedDefaultValue_=this.value_,r.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(r),r},e.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},e.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},e.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==e.utils.KeyCodes.ENTER&&e.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},e.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),e.fieldRegistry.register("field_multilinetext",e.FieldMultilineInput),e.FieldNumber=function(t,n,r,s,c,v){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,e.FieldNumber.superClass_.constructor.call(this,t,c,v),v||this.setConstraints(n,r,s)},e.utils.object.inherits(e.FieldNumber,e.FieldTextInput),e.FieldNumber.prototype.DEFAULT_VALUE=0,e.FieldNumber.fromJson=function(t){return new e.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},e.FieldNumber.prototype.SERIALIZABLE=!0,e.FieldNumber.prototype.configure_=function(t){e.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},e.FieldNumber.prototype.setConstraints=function(t,n,r){this.setMinInternal_(t),this.setMaxInternal_(n),this.setPrecisionInternal_(r),this.setValue(this.getValue())},e.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},e.FieldNumber.prototype.getMin=function(){return this.min_},e.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},e.FieldNumber.prototype.getMax=function(){return this.max_},e.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var r=n.indexOf(".");this.decimalPlaces_=-1==r?t?0:null:n.length-r-1},e.FieldNumber.prototype.getPrecision=function(){return this.precision_},e.FieldNumber.prototype.doClassValidation_=function(t){return null===t||(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},e.FieldNumber.prototype.widgetCreate_=function(){var t=e.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMAX,this.max_),t},e.fieldRegistry.register("field_number",e.FieldNumber),e.FieldVariable=function(t,n,r,s,c){this.menuGenerator_=e.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new e.utils.Size(0,0),c&&this.configure_(c),n&&this.setValidator(n),c||this.setTypes_(r,s)},e.utils.object.inherits(e.FieldVariable,e.FieldDropdown),e.FieldVariable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.variable);return new e.FieldVariable(n,void 0,void 0,void 0,t)},e.FieldVariable.prototype.SERIALIZABLE=!0,e.FieldVariable.prototype.configure_=function(t){e.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},e.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},e.FieldVariable.prototype.shouldAddBorderRect_=function(){return e.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},e.FieldVariable.prototype.fromXml=function(t){var n=t.getAttribute("id"),r=t.textContent,s=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(n=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,r,s),null!=s&&s!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+e.Xml.domToText(t)+".");this.setValue(n.getId())},e.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},e.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");e.FieldVariable.superClass_.setSourceBlock.call(this,t)},e.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},e.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},e.FieldVariable.prototype.getVariable=function(){return this.variable_},e.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},e.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var n=e.Variables.getVariable(this.sourceBlock_.workspace,t);return n?this.typeIsAllowed_(n=n.type)?t:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},e.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=e.Variables.getVariable(this.sourceBlock_.workspace,t),e.FieldVariable.superClass_.doValueUpdate_.call(this,t)},e.FieldVariable.prototype.typeIsAllowed_=function(t){var n=this.getVariableTypes_();if(!n)return!0;for(var r=0;r<n.length;r++)if(t==n[r])return!0;return!1},e.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},e.FieldVariable.prototype.setTypes_=function(t,n){if(n=n||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var r=!1,s=0;s<t.length;s++)t[s]==n&&(r=!0);if(!r)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=t},e.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},e.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var r=this.getVariableTypes_(),s=0;s<r.length;s++){var c=this.sourceBlock_.workspace.getVariablesOfType(r[s]);n=n.concat(c)}for(n.sort(e.VariableModel.compareByName),r=[],s=0;s<n.length;s++)r[s]=[n[s].name,n[s].getId()];return r.push([e.Msg.RENAME_VARIABLE,e.RENAME_VARIABLE_ID]),e.Msg.DELETE_VARIABLE&&r.push([e.Msg.DELETE_VARIABLE.replace("%1",t),e.DELETE_VARIABLE_ID]),r},e.FieldVariable.prototype.onItemSelected_=function(t,n){if(t=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t==e.RENAME_VARIABLE_ID)return void e.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(t==e.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},e.FieldVariable.prototype.referencesVariables=function(){return!0},e.fieldRegistry.register("field_variable",e.FieldVariable),e.utils.svgPaths={},e.utils.svgPaths.point=function(t,n){return" "+t+","+n+" "},e.utils.svgPaths.curve=function(t,n){return" "+t+n.join("")},e.utils.svgPaths.moveTo=function(t,n){return" M "+t+","+n+" "},e.utils.svgPaths.moveBy=function(t,n){return" m "+t+","+n+" "},e.utils.svgPaths.lineTo=function(t,n){return" l "+t+","+n+" "},e.utils.svgPaths.line=function(t){return" l"+t.join("")},e.utils.svgPaths.lineOnAxis=function(t,n){return" "+t+" "+n+" "},e.utils.svgPaths.arc=function(t,n,r,s){return t+" "+r+" "+r+" "+n+s},e.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=e.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},e.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},e.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var r,n=t.blockStyles;for(r in n)this.blockStyles[r]=this.validatedBlockStyle_(n[r]);this.setDynamicProperties_(t)},e.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},e.blockRendering.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&null!=t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&null!=t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&null!=t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=e.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},e.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},e.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var n="auto_"+t;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(t)),{style:this.blockStyles[n],name:n}},e.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},e.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},e.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(t){var n={};return t&&e.utils.object.mixin(n,t),t=e.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=t.hex,n.colourSecondary=n.colourSecondary?e.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?e.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},e.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#fff",t,.6)||t},e.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#fff",t,.3)||t},e.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&e.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&e.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&e.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},e.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.line([e.utils.svgPaths.point(n,t/4),e.utils.svgPaths.point(2*-n,t/2),e.utils.svgPaths.point(n,t/4)])}},e.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(30,-t),e.utils.svgPaths.point(70,-t),e.utils.svgPaths.point(n,0)])}},e.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(v){var D=-(v=v?-1:1),P=r/2,G=P+2.5,it=P+.5,q=e.utils.svgPaths.point(-n,v*P);return P=e.utils.svgPaths.point(n,v*P),e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(0,v*G),e.utils.svgPaths.point(-n,D*it),q])+e.utils.svgPaths.curve("s",[e.utils.svgPaths.point(n,2.5*D),P])}var n=this.TAB_WIDTH,r=this.TAB_HEIGHT,s=t(!0),c=t(!1);return{type:this.SHAPES.PUZZLE,width:n,height:r,pathDown:c,pathUp:s}},e.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(D){return e.utils.svgPaths.line([e.utils.svgPaths.point(D*s,r),e.utils.svgPaths.point(3*D,0),e.utils.svgPaths.point(D*s,-r)])}var n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,s=(n-3)/2,c=t(1),v=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:c,pathRight:v}},e.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t))}},e.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.moveBy(0,t)+e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,-t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t)),s=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,-t));return{topLeft:n,topRight:r,bottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t)),bottomLeft:s,rightHeight:t}},e.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},e.blockRendering.ConstantProvider.prototype.createDom=function(t,n,r){this.injectCSS_(n,r),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),r=e.utils.dom.createSvgElement(e.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},r),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,e.blockRendering.Debug&&(t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t)},e.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,n){n=this.getCSS_(n),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var r=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=r:((n=document.createElement("style")).id=t,t=document.createTextNode(r),n.appendChild(t),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},e.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},e.blockRendering.Types.LEFT_CORNER=e.blockRendering.Types.LEFT_SQUARE_CORNER|e.blockRendering.Types.LEFT_ROUND_CORNER,e.blockRendering.Types.RIGHT_CORNER=e.blockRendering.Types.RIGHT_SQUARE_CORNER|e.blockRendering.Types.RIGHT_ROUND_CORNER,e.blockRendering.Types.nextTypeValue_=16777216,e.blockRendering.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(e.blockRendering.Types,t)||(e.blockRendering.Types[t]=e.blockRendering.Types.nextTypeValue_,e.blockRendering.Types.nextTypeValue_<<=1),e.blockRendering.Types[t]},e.blockRendering.Types.isField=function(t){return t.type&e.blockRendering.Types.FIELD},e.blockRendering.Types.isHat=function(t){return t.type&e.blockRendering.Types.HAT},e.blockRendering.Types.isIcon=function(t){return t.type&e.blockRendering.Types.ICON},e.blockRendering.Types.isSpacer=function(t){return t.type&e.blockRendering.Types.SPACER},e.blockRendering.Types.isInRowSpacer=function(t){return t.type&e.blockRendering.Types.IN_ROW_SPACER},e.blockRendering.Types.isInput=function(t){return t.type&e.blockRendering.Types.INPUT},e.blockRendering.Types.isExternalInput=function(t){return t.type&e.blockRendering.Types.EXTERNAL_VALUE_INPUT},e.blockRendering.Types.isInlineInput=function(t){return t.type&e.blockRendering.Types.INLINE_INPUT},e.blockRendering.Types.isStatementInput=function(t){return t.type&e.blockRendering.Types.STATEMENT_INPUT},e.blockRendering.Types.isPreviousConnection=function(t){return t.type&e.blockRendering.Types.PREVIOUS_CONNECTION},e.blockRendering.Types.isNextConnection=function(t){return t.type&e.blockRendering.Types.NEXT_CONNECTION},e.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(e.blockRendering.Types.PREVIOUS_CONNECTION|e.blockRendering.Types.NEXT_CONNECTION)},e.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&e.blockRendering.Types.LEFT_ROUND_CORNER},e.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_ROUND_CORNER},e.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&e.blockRendering.Types.LEFT_SQUARE_CORNER},e.blockRendering.Types.isRightSquareCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_SQUARE_CORNER},e.blockRendering.Types.isCorner=function(t){return t.type&e.blockRendering.Types.CORNER},e.blockRendering.Types.isJaggedEdge=function(t){return t.type&e.blockRendering.Types.JAGGED_EDGE},e.blockRendering.Types.isRow=function(t){return t.type&e.blockRendering.Types.ROW},e.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&e.blockRendering.Types.BETWEEN_ROW_SPACER},e.blockRendering.Types.isTopRow=function(t){return t.type&e.blockRendering.Types.TOP_ROW},e.blockRendering.Types.isBottomRow=function(t){return t.type&e.blockRendering.Types.BOTTOM_ROW},e.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(e.blockRendering.Types.TOP_ROW|e.blockRendering.Types.BOTTOM_ROW)},e.blockRendering.Types.isInputRow=function(t){return t.type&e.blockRendering.Types.INPUT_ROW},e.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=e.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Connection=function(t,n){e.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=e.blockRendering.Types.CONNECTION},e.utils.object.inherits(e.blockRendering.Connection,e.blockRendering.Measurable),e.blockRendering.OutputConnection=function(t,n){e.blockRendering.OutputConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.OutputConnection,e.blockRendering.Connection),e.blockRendering.PreviousConnection=function(t,n){e.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.PreviousConnection,e.blockRendering.Connection),e.blockRendering.NextConnection=function(t,n){e.blockRendering.NextConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.NextConnection,e.blockRendering.Connection),e.blockRendering.InputConnection=function(t,n){e.blockRendering.InputConnection.superClass_.constructor.call(this,t,n.connection),this.type|=e.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.InputConnection,e.blockRendering.Connection),e.blockRendering.InlineInput=function(t,n){e.blockRendering.InlineInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},e.utils.object.inherits(e.blockRendering.InlineInput,e.blockRendering.InputConnection),e.blockRendering.StatementInput=function(t,n){e.blockRendering.StatementInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},e.utils.object.inherits(e.blockRendering.StatementInput,e.blockRendering.InputConnection),e.blockRendering.ExternalValueInput=function(t,n){e.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.ExternalValueInput,e.blockRendering.InputConnection),e.blockRendering.Icon=function(t,n){e.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=n,this.isVisible=n.isVisible(),this.type|=e.blockRendering.Types.ICON,t=n.getCorrectedSize(),this.height=t.height,this.width=t.width},e.utils.object.inherits(e.blockRendering.Icon,e.blockRendering.Measurable),e.blockRendering.JaggedEdge=function(t){e.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},e.utils.object.inherits(e.blockRendering.JaggedEdge,e.blockRendering.Measurable),e.blockRendering.Field=function(t,n,r){e.blockRendering.Field.superClass_.constructor.call(this,t),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=e.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=r},e.utils.object.inherits(e.blockRendering.Field,e.blockRendering.Measurable),e.blockRendering.Hat=function(t){e.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},e.utils.object.inherits(e.blockRendering.Hat,e.blockRendering.Measurable),e.blockRendering.SquareCorner=function(t,n){e.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_SQUARE_CORNER:e.blockRendering.Types.LEFT_SQUARE_CORNER)|e.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},e.utils.object.inherits(e.blockRendering.SquareCorner,e.blockRendering.Measurable),e.blockRendering.RoundCorner=function(t,n){e.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_ROUND_CORNER:e.blockRendering.Types.LEFT_ROUND_CORNER)|e.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},e.utils.object.inherits(e.blockRendering.RoundCorner,e.blockRendering.Measurable),e.blockRendering.InRowSpacer=function(t,n){e.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},e.utils.object.inherits(e.blockRendering.InRowSpacer,e.blockRendering.Measurable),e.blockRendering.Row=function(t){this.type=e.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},e.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},e.blockRendering.Row.prototype.getLastInput=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isInput(n))return n;return null},e.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,t=0;n=this.elements[t];t++)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.TopRow=function(t){e.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},e.utils.object.inherits(e.blockRendering.TopRow,e.blockRendering.Row),e.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var n=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,r=t.getPreviousBlock();return!!t.outputConnection||n||!!r&&r.getNextBlock()==t},e.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.TopRow.prototype.measure=function(){for(var c,t=0,n=0,r=0,s=0;c=this.elements[s];s++)n+=c.width,e.blockRendering.Types.isSpacer(c)||(e.blockRendering.Types.isHat(c)?r=Math.max(r,c.ascenderHeight):t=Math.max(t,c.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+r,this.capline=this.ascenderHeight=r,this.widthWithConnectedBlocks=this.width},e.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow=function(t){e.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},e.utils.object.inherits(e.blockRendering.BottomRow,e.blockRendering.Row),e.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},e.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.BottomRow.prototype.measure=function(){for(var c,t=0,n=0,r=0,s=0;c=this.elements[s];s++)n+=c.width,e.blockRendering.Types.isSpacer(c)||(e.blockRendering.Types.isNextConnection(c)?r=Math.max(r,c.height):t=Math.max(t,c.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+r,this.descenderHeight=r,this.widthWithConnectedBlocks=this.width},e.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.SpacerRow=function(t,n,r){e.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=r,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new e.blockRendering.InRowSpacer(this.constants_,r)]},e.utils.object.inherits(e.blockRendering.SpacerRow,e.blockRendering.Row),e.blockRendering.SpacerRow.prototype.measure=function(){},e.blockRendering.InputRow=function(t){e.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},e.utils.object.inherits(e.blockRendering.InputRow,e.blockRendering.Row),e.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var r,t=0,n=0;r=this.elements[n];n++)this.width+=r.width,e.blockRendering.Types.isInput(r)&&(e.blockRendering.Types.isStatementInput(r)?t+=r.connectedBlockWidth:e.blockRendering.Types.isExternalInput(r)&&0!=r.connectedBlockWidth&&(t+=r.connectedBlockWidth-r.connectionWidth)),e.blockRendering.Types.isSpacer(r)||(this.height=Math.max(this.height,r.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},e.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},e.blockRendering.RenderInfo=function(t,n){this.block_=n,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new e.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new e.blockRendering.TopRow(this.constants_),this.bottomRow=new e.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},e.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new e.blockRendering.InputRow(this.constants_);this.inputRows.push(t);for(var s,n=this.block_.getIcons(),r=0;s=n[r];r++){var c=new e.blockRendering.Icon(this.constants_,s);this.isCollapsed&&s.collapseHidden?this.hiddenIcons.push(c):t.elements.push(c)}for(s=null,r=0;n=this.block_.inputList[r];r++)if(n.isVisible()){for(this.shouldStartNewRow_(n,s)&&(this.rows.push(t),t=new e.blockRendering.InputRow(this.constants_),this.inputRows.push(t)),s=0;c=n.fieldRow[s];s++)t.elements.push(new e.blockRendering.Field(this.constants_,c,n));this.addInput_(n,t),s=n}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new e.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},e.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,r=this.topRow.hasLeftSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner;this.topRow.elements.push(new r(this.constants_)),n?(t=new e.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new e.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==e.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,r=this.topRow.hasRightSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner,this.topRow.elements.push(new r(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new e.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.blockRendering.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=t.align)},e.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!(!n||t.type!=e.inputTypes.STATEMENT&&n.type!=e.inputTypes.STATEMENT&&(t.type!=e.inputTypes.VALUE&&t.type!=e.inputTypes.DUMMY||this.isInline))},e.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,t=0;n=this.rows[t];t++){var r=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(var s=0;s<r.length-1;s++){n.elements.push(r[s]);var c=this.getInRowSpacing_(r[s],r[s+1]);n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,c))}n.elements.push(r[r.length-1]),n.endsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(r[r.length-1],null)))}}},e.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t&&n&&e.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var c,t=0,n=0,r=0,s=0;c=this.rows[s];s++){if(c.measure(),n=Math.max(n,c.width),c.hasStatement){var v=c.getLastInput();t=Math.max(t,c.width-v.width)}r=Math.max(r,c.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,s=0;c=this.rows[s];s++)c.hasStatement&&(c.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,r),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},e.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,t=0;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var r=n.width;0<(r=this.getDesiredRowWidth_(n)-r)&&this.addAlignmentPadding_(n,r),e.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},e.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(t,n){var r=t.getFirstSpacer(),s=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align==e.constants.ALIGN.LEFT?s.width+=n:t.align==e.constants.ALIGN.CENTRE?(r.width+=n/2,s.width+=n/2):t.align==e.constants.ALIGN.RIGHT?r.width+=n:s.width+=n,t.width+=n},e.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var n=t.getLastInput(),r=t.width-n.width,s=this.statementEdge;0<(r=s-r)&&this.addAlignmentPadding_(t,r),r=t.width,s=this.getDesiredRowWidth_(t),n.width+=s-r,n.height=Math.max(n.height,t.height),t.width+=s-r,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},e.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var n=0;n<t.length;n++)this.rows.push(t[n]),n!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[n],t[n+1]))},e.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,n){var r=this.getSpacerRowHeight_(t,n),s=this.getSpacerRowWidth_(t,n);return r=new e.blockRendering.SpacerRow(this.constants_,r,s),t.hasStatement&&(r.followsStatement=!0),n.hasStatement&&(r.precedesStatement=!0),r},e.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,n){return e.blockRendering.Types.isSpacer(n)?t.yPos+n.height/2:e.blockRendering.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2):e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:t.yPos+t.height/2},e.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var s,n=t.xPos,r=0;s=t.elements[r];r++)e.blockRendering.Types.isSpacer(s)&&(s.height=t.height),s.xPos=n,s.centerline=this.getElemCenterline_(t,s),n+=s.width},e.blockRendering.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++)s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks),this.recordElemPositions_(s);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},e.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},e.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},e.blockRendering.Debug.prototype.clearElems=function(){for(var n,t=0;n=this.debugElements_[t];t++)e.utils.dom.removeNode(n);this.debugElements_=[]},e.blockRendering.Debug.prototype.drawSpacerRow=function(t,n,r){if(e.blockRendering.Debug.config.rowSpacers){var s=Math.abs(t.height),c=0>t.height;c&&(n-=s),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:r?-(t.xPos+t.width):t.xPos,y:n,width:t.width,height:s,stroke:c?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawSpacerElem=function(t,n,r){if(e.blockRendering.Debug.config.elemSpacers){n=Math.abs(t.width);var s=0>t.width,c=s?t.xPos-n:t.xPos;r&&(c=-(c+n)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:c,y:t.centerline-t.height/2,width:n,height:t.height,stroke:"pink",fill:s?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedElem=function(t,n){if(e.blockRendering.Debug.config.elems){var r=t.xPos;n&&(r=-(r+t.width)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n=t.centerline-t.height/2,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isField(t)&&t.field instanceof e.FieldLabel&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}e.blockRendering.Types.isInput(t)&&e.blockRendering.Debug.config.connections&&this.drawConnection(t.connectionModel)},e.blockRendering.Debug.prototype.drawConnection=function(t){if(e.blockRendering.Debug.config.connections){if(t.type==e.connectionTypes.INPUT_VALUE)var n=4,r="magenta",s="none";else t.type==e.connectionTypes.OUTPUT_VALUE?(n=2,s=r="magenta"):t.type==e.connectionTypes.NEXT_STATEMENT?(n=4,r="goldenrod",s="none"):t.type==e.connectionTypes.PREVIOUS_STATEMENT&&(n=2,s=r="goldenrod");this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:n,fill:s,stroke:r},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedRow=function(t,n,r){e.blockRendering.Debug.config.rows&&(this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:r?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isTopOrBottomRow(t)||e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:r?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},e.blockRendering.Debug.prototype.drawRowWithElements=function(t,n,r){for(var s=0,c=t.elements.length;s<c;s++){var v=t.elements[s];v?e.blockRendering.Types.isSpacer(v)?this.drawSpacerElem(v,t.height,r):this.drawRenderedElem(v,r):console.warn("A row has an undefined or null element.",t,v)}this.drawRenderedRow(t,n,r)},e.blockRendering.Debug.prototype.drawBoundingBox=function(t){if(e.blockRendering.Debug.config.blockBounds){var n=t.RTL?-t.width:0;this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockRenderDebug",x:n=t.RTL?-t.widthWithChildren:0,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawDebug=function(t,n){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var c,r=0,s=0;c=n.rows[s];s++)e.blockRendering.Types.isBetweenRowSpacer(c)?this.drawSpacerRow(c,r,n.RTL):this.drawRowWithElements(c,r,n.RTL),r+=c.height;t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(t.pathObject.svgPath)},e.blockRendering.Debug.prototype.drawRender=function(t){e.blockRendering.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))},e.blockRendering.Drawer=function(t,n){this.block_=t,this.info_=n,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},e.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},e.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,t=0;n=this.info_.hiddenIcons[t];t++)n.icon.iconGroup_.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var n=this.info_.rows[t];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},e.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,n=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var s,r=0;s=n[r];r++)e.blockRendering.Types.isLeftRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:e.blockRendering.Types.isRightRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:e.blockRendering.Types.isPreviousConnection(s)?this.outlinePath_+=s.shape.pathLeft:e.blockRendering.Types.isHat(s)?this.outlinePath_+=this.constants_.START_HAT.path:e.blockRendering.Types.isSpacer(s)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",s.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("v",t.height)},e.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+e.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},e.blockRendering.Drawer.prototype.drawValueInput_=function(t){var n=t.getLastInput();this.positionExternalValueConnection_(t);var r="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+r+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight)},e.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),r=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var s=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",r)+n+e.utils.svgPaths.lineOnAxis("v",s)+this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,n=t.elements;this.positionNextConnection_();for(var v,r=0,s="",c=n.length-1;v=n[c];c--)e.blockRendering.Types.isNextConnection(v)?s+=v.shape.pathRight:e.blockRendering.Types.isLeftSquareCorner(v)?s+=e.utils.svgPaths.lineOnAxis("H",t.xPos):e.blockRendering.Types.isLeftRoundedCorner(v)?s+=this.constants_.OUTSIDE_CORNERS.bottomLeft:e.blockRendering.Types.isRightRoundedCorner(v)?(s+=this.constants_.OUTSIDE_CORNERS.bottomRight,r=this.constants_.OUTSIDE_CORNERS.rightHeight):e.blockRendering.Types.isSpacer(v)&&(s+=e.utils.svgPaths.lineOnAxis("h",-1*v.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-r),this.outlinePath_+=s},e.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var n=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",n)+t}this.outlinePath_+="z"},e.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,t=0;n=this.info_.rows[t];t++)for(var s,r=0;s=n.elements[r];r++)e.blockRendering.Types.isInlineInput(s)?this.drawInlineInput_(s):(e.blockRendering.Types.isIcon(s)||e.blockRendering.Types.isField(s))&&this.layoutField_(s)},e.blockRendering.Drawer.prototype.layoutField_=function(t){if(e.blockRendering.Types.isField(t))var n=t.field.getSvgRoot();else e.blockRendering.Types.isIcon(t)&&(n=t.icon.iconGroup_);var r=t.centerline-t.height/2,s=t.xPos,c="";this.info_.RTL&&(s=-(s+t.width),t.flipRtl&&(s+=t.width,c="scale(-1 1)")),e.blockRendering.Types.isIcon(t)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+s+","+r+")"),t.icon.computeIconLocation()):n.setAttribute("transform","translate("+s+","+r+")"+c),this.info_.isInsertionMarker&&n.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var n=t.width,r=t.height,s=t.connectionOffsetY,c=t.connectionHeight+s;this.inlinePath_+=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-r/2)+e.utils.svgPaths.lineOnAxis("v",s)+t.shape.pathDown+e.utils.svgPaths.lineOnAxis("v",r-c)+e.utils.svgPaths.lineOnAxis("h",n-t.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",-r)+"z",this.positionInlineInputConnection_(t)},e.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var r=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,t.centerline-t.height/2+t.connectionOffsetY)}},e.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.statementEdge+n.notchOffset;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.width;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var n=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},e.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,r=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-r:r,t.baseline)}},e.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},e.Events.MarkerMove=function(t,n,r,s){var c=t?t.workspace.id:void 0;s&&s.getType()==e.ASTNode.types.WORKSPACE&&(c=s.getLocation().id),e.Events.MarkerMove.superClass_.constructor.call(this,c),this.blockId=t?t.id:null,this.oldNode=r,this.newNode=s,this.isCursor=n},e.utils.object.inherits(e.Events.MarkerMove,e.Events.UiBase),e.Events.MarkerMove.prototype.type=e.Events.MARKER_MOVE,e.Events.MarkerMove.prototype.toJson=function(){var t=e.Events.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},e.Events.MarkerMove.prototype.fromJson=function(t){e.Events.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},e.registry.register(e.registry.Type.EVENT,e.Events.MARKER_MOVE,e.Events.MarkerMove),e.blockRendering.MarkerSvg=function(t,n,r){this.workspace_=t,this.marker_=r,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=r.colour||t},e.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",e.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,e.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},e.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},e.blockRendering.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?e.blockRendering.MarkerSvg.CURSOR_CLASS:e.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},e.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},e.blockRendering.MarkerSvg.prototype.draw=function(t,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var r=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||r,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(t,n),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},e.blockRendering.MarkerSvg.prototype.showAtLocation_=function(t){var n=t.getLocation().type;t.getType()==e.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()==e.ASTNode.types.OUTPUT?this.showWithOutput_(t):n==e.connectionTypes.INPUT_VALUE?this.showWithInput_(t):n==e.connectionTypes.NEXT_STATEMENT?this.showWithNext_(t):t.getType()==e.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()==e.ASTNode.types.FIELD?this.showWithField_(t):t.getType()==e.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()==e.ASTNode.types.STACK&&this.showWithStack_(t)},e.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var n=(t=t.getSourceBlock()).width,r=t.height,s=r*e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,c=this.constants_.CURSOR_BLOCK_PADDING;if(t.previousConnection){var v=this.constants_.shapeFor(t.previousConnection);this.positionPrevious_(n,c,s,v)}else t.outputConnection?(v=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(n,r,v)):this.positionBlock_(n,c,s);this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var n=t.getWsCoordinate();t=n.x,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var n=(t=t.getLocation()).getSize().width,r=t.getSize().height;this.positionRect_(0,0,n,r),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var n=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(n),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var n=t.getLocation();t=n.getSourceBlock();var r=0;n=n.getOffsetInBlock().y;var s=t.getHeightWidth().width;this.workspace_.RTL&&(r=-s),this.positionLine_(r,n,s),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var n=(t=t.getLocation()).getHeightWidth(),r=n.width+this.constants_.CURSOR_STACK_PADDING,s=-this.constants_.CURSOR_STACK_PADDING/2,v=s;this.workspace_.RTL&&(v=-(r+s)),this.positionRect_(v,-this.constants_.CURSOR_STACK_PADDING/2,r,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},e.blockRendering.MarkerSvg.prototype.positionBlock_=function(t,n,r){t=e.utils.svgPaths.moveBy(-n,r)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",r),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionInput_=function(t){var n=t.getOffsetInBlock().x,r=t.getOffsetInBlock().y;t=e.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+n+","+r+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},e.blockRendering.MarkerSvg.prototype.positionLine_=function(t,n,r){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",r),this.currentMarkerSvg=this.markerSvgLine_},e.blockRendering.MarkerSvg.prototype.positionOutput_=function(t,n,r){t=e.utils.svgPaths.moveBy(t,0)+e.utils.svgPaths.lineOnAxis("h",-(t-r.width))+e.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+r.pathDown+e.utils.svgPaths.lineOnAxis("V",n)+e.utils.svgPaths.lineOnAxis("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionPrevious_=function(t,n,r,s){t=e.utils.svgPaths.moveBy(-n,r)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+s.pathLeft+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",r),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionRect_=function(t,n,r,s){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",r),this.markerSvgRect_.setAttribute("height",s),this.currentMarkerSvg=this.markerSvgRect_},e.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},e.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},e.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(t,n){var r=n.getSourceBlock();t=new(e.Events.get(e.Events.MARKER_MOVE))(r,this.isCursor(),t,n),e.Events.fire(t)},e.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},e.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerSvgLine_),e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},e.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",t=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},e.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.blockRendering.PathObject=function(t,n,r){this.constants=r,this.svgRoot=t,this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},e.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},e.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},e.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},e.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},e.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},e.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},e.blockRendering.PathObject.prototype.setClass_=function(t,n){n?e.utils.dom.addClass(this.svgRoot,t):e.utils.dom.removeClass(this.svgRoot,t)},e.blockRendering.PathObject.prototype.updateHighlighted=function(t){this.svgPath.setAttribute("filter",t?"url(#"+this.constants.embossFilterId+")":"none")},e.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},e.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},e.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},e.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},e.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},e.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},e.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,n){},e.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},e.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},e.blockRendering.Renderer.prototype.init=function(t,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,e.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(t),this.constants_.init()},e.blockRendering.Renderer.prototype.createDom=function(t,n){this.constants_.createDom(t,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},e.blockRendering.Renderer.prototype.refreshDom=function(t,n){var r=this.getConstants();r.dispose(),this.constants_=this.makeConstants_(),this.overrides&&e.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=r.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(t,n)},e.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},e.blockRendering.Renderer.prototype.makeConstants_=function(){return new e.blockRendering.ConstantProvider},e.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new e.blockRendering.RenderInfo(this,t)},e.blockRendering.Renderer.prototype.makeDrawer_=function(t,n){return new e.blockRendering.Drawer(t,n)},e.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!e.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new e.blockRendering.Debug(this.getConstants())},e.blockRendering.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.blockRendering.MarkerSvg(t,this.getConstants(),n)},e.blockRendering.Renderer.prototype.makePathObject=function(t,n){return new e.blockRendering.PathObject(t,n,this.constants_)},e.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},e.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},e.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(t,n,r){return!!e.Connection.getConnectionForOrphanedConnection(t,r===e.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},e.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(t,n,r){return n.type==e.connectionTypes.OUTPUT_VALUE||n.type==e.connectionTypes.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(r,t.targetBlock(),n.type)?e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},e.blockRendering.Renderer.prototype.render=function(t){e.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(t);n.measure(),this.makeDrawer_(t,n).draw()},e.geras={},e.geras.ConstantProvider=function(){e.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},e.utils.object.inherits(e.geras.ConstantProvider,e.blockRendering.ConstantProvider),e.geras.ConstantProvider.prototype.getCSS_=function(t){return e.geras.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},e.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},e.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},e.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var r,n=0;r=t.elements[n];n++)e.blockRendering.Types.isLeftSquareCorner(r)?this.steps_+=this.highlightConstants_.START_POINT:e.blockRendering.Types.isLeftRoundedCorner(r)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):e.blockRendering.Types.isPreviousConnection(r)?this.steps_+=this.notchPaths_.pathLeft:e.blockRendering.Types.isHat(r)?this.steps_+=this.startPaths_.path(this.RTL_):e.blockRendering.Types.isSpacer(r)&&0!=r.width&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",r.xPos+r.width-this.highlightOffset_));this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},e.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+e.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},e.geras.Highlighter.prototype.drawValueInput=function(t){var n=t.getLastInput();if(this.RTL_){var r=t.height-n.connectionHeight;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",r)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.Highlighter.prototype.drawStatementInput=function(t){var n=t.getLastInput();if(this.RTL_){var r=t.height-2*this.insideCornerPaths_.height;this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",r)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)},e.geras.Highlighter.prototype.drawRightSideRow=function(t){var n=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n),t.height>this.highlightOffset_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},e.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=e.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):e.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=e.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},e.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=e.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e.blockRendering.Types.isLeftRoundedCorner((t=this.info_.topRow).elements[0])?this.steps_+=e.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},e.geras.Highlighter.prototype.drawInlineInput=function(t){var n=this.highlightOffset_,r=t.xPos+t.connectionWidth,s=t.centerline-t.height/2,c=t.width-t.connectionWidth,v=s+n;this.RTL_?(s=t.connectionOffsetY-n,t=t.height-(t.connectionOffsetY+t.connectionHeight)+n,this.inlineSteps_+=e.utils.svgPaths.moveTo(r-n,v)+e.utils.svgPaths.lineOnAxis("v",s)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",t)+e.utils.svgPaths.lineOnAxis("h",c)):this.inlineSteps_+=e.utils.svgPaths.moveTo(t.xPos+t.width+n,v)+e.utils.svgPaths.lineOnAxis("v",t.height)+e.utils.svgPaths.lineOnAxis("h",-c)+e.utils.svgPaths.moveTo(r,s+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.InlineInput=function(t,n){e.geras.InlineInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.InlineInput,e.blockRendering.InlineInput),e.geras.StatementInput=function(t,n){e.geras.StatementInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.StatementInput,e.blockRendering.StatementInput),e.geras.RenderInfo=function(t,n){e.geras.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.geras.RenderInfo,e.blockRendering.RenderInfo),e.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.geras.RenderInfo.prototype.populateBottomRow_=function(){e.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},e.geras.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.geras.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.geras.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=t.align)},e.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var r,t=!1,n=0;r=this.rows[n];n++)r.hasExternalInput&&(t=!0);for(n=0;r=this.rows[n];n++){var s=r.elements;if(r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(var c=0;c<s.length-1;c++){r.elements.push(s[c]);var v=this.getInRowSpacing_(s[c],s[c+1]);r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v))}r.elements.push(s[s.length-1]),r.endsWithElemSpacer()&&(v=this.getInRowSpacing_(s[s.length-1],null),t&&r.hasDummyInput&&(v+=this.constants_.TAB_WIDTH),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v)))}}},e.geras.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&(!n||e.blockRendering.Types.isStatementInput(n)))return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(e.blockRendering.Types.isLeftRoundedCorner(t)&&n){if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||!t.hasStatement&&n.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var r=t.yPos;return e.blockRendering.Types.isField(n)||e.blockRendering.Types.isIcon(n)?(r+=n.height/2,(t.hasInlineInput||t.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(r+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):r=e.blockRendering.Types.isInlineInput(n)?r+n.height/2:r+t.height/2,r},e.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var s,t=0,n=null,r=this.rows.length-1;s=this.rows[r];r--)s.nextRightEdge=t,e.blockRendering.Types.isInputRow(s)&&(s.hasStatement&&this.alignStatementRow_(s),n&&n.hasStatement&&s.width<n.width?s.nextRightEdge=n.width:t=s.width,n=s);for(r=t=0;s=this.rows[r];r++)s.hasStatement?t=this.getDesiredRowWidth_(s):e.blockRendering.Types.isSpacer(s)?s.width=Math.max(t,s.nextRightEdge):(0<(t=Math.max(t,s.nextRightEdge)-s.width)&&this.addAlignmentPadding_(s,t),t=s.width)}else e.geras.RenderInfo.superClass_.alignRowElements_.call(this)},e.geras.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:e.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.geras.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var c=n-this.topRow.ascenderHeight;s==this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,n+=c),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},e.geras.Drawer=function(t,n){e.geras.Drawer.superClass_.constructor.call(this,t,n),this.highlighter_=new e.geras.Highlighter(n)},e.utils.object.inherits(e.geras.Drawer,e.blockRendering.Drawer),e.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),e.geras.Drawer.superClass_.drawTop_.call(this)},e.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),e.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},e.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),e.geras.Drawer.superClass_.drawValueInput_.call(this,t)},e.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),e.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},e.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),e.geras.Drawer.superClass_.drawBottom_.call(this)},e.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),e.geras.Drawer.superClass_.drawLeft_.call(this)},e.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),e.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},e.geras.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var r=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,t.centerline-t.height/2+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(r=this.info_.RTL?-1*r:r+this.constants_.DARK_PATH_OFFSET,t.yPos+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,r=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-r:r)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},e.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=e.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},e.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},e.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(t+n)-n,s=e.utils.svgPaths.moveBy(r,r)+e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-r-n,t-r)),c=e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t+n,t+n)),v=e.utils.svgPaths.moveBy(r,-r)+e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t-r,r+n));return{width:t+n,height:t,pathTop:function(D){return D?s:""},pathBottom:function(D){return D?c:v}}},e.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(t-n)+n,s=e.utils.svgPaths.moveBy(r,r)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t-r,-r+n)),c=e.utils.svgPaths.moveBy(n,t)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t,-t+n)),v=-r,D=e.utils.svgPaths.moveBy(r,v)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(-r+n,-v-t));return{height:t,topLeft:function(P){return P?s:c},bottomLeft:function(){return D}}},e.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,r=e.utils.svgPaths.moveBy(-2,3.4-n)+e.utils.svgPaths.lineTo(-.45*t,-2.1),s=e.utils.svgPaths.lineOnAxis("v",2.5)+e.utils.svgPaths.moveBy(.97*-t,2.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(.05*-t,10),e.utils.svgPaths.point(.3*t,9.5)])+e.utils.svgPaths.moveBy(.67*t,-1.9)+e.utils.svgPaths.lineOnAxis("v",2.5),c=e.utils.svgPaths.lineOnAxis("v",-1.5)+e.utils.svgPaths.moveBy(-.92*t,-.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(-.19*t,-5.5),e.utils.svgPaths.point(0,-11)])+e.utils.svgPaths.moveBy(.92*t,1),v=e.utils.svgPaths.moveBy(-5,n-.7)+e.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:n,pathUp:function(D){return D?r:c},pathDown:function(D){return D?s:v}}},e.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:e.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},e.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:e.utils.svgPaths.lineTo(5.1,2.6)+e.utils.svgPaths.moveBy(-10.2,6.8)+e.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},e.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,n=e.utils.svgPaths.moveBy(25,-8.7)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(29.7,-6.2),e.utils.svgPaths.point(57.2,-.5),e.utils.svgPaths.point(75,8.7)]),r=e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(17.8,-9.2),e.utils.svgPaths.point(45.3,-14.9),e.utils.svgPaths.point(75,-8.7)])+e.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(s){return s?n:r}}},e.geras.PathObject=function(t,n,r){this.constants=r,this.svgRoot=t,this.svgPathDark=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},e.utils.object.inherits(e.geras.PathObject,e.blockRendering.PathObject),e.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},e.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},e.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},e.geras.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),e.geras.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},e.geras.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=e.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},e.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},e.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.geras.PathObject.prototype.updateDisabled_=function(t){e.geras.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")},e.geras.Renderer=function(t){e.geras.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null},e.utils.object.inherits(e.geras.Renderer,e.blockRendering.Renderer),e.geras.Renderer.prototype.init=function(t,n){e.geras.Renderer.superClass_.init.call(this,t,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},e.geras.Renderer.prototype.refreshDom=function(t,n){e.geras.Renderer.superClass_.refreshDom.call(this,t,n),this.getHighlightConstants().init()},e.geras.Renderer.prototype.makeConstants_=function(){return new e.geras.ConstantProvider},e.geras.Renderer.prototype.makeRenderInfo_=function(t){return new e.geras.RenderInfo(this,t)},e.geras.Renderer.prototype.makeDrawer_=function(t,n){return new e.geras.Drawer(t,n)},e.geras.Renderer.prototype.makePathObject=function(t,n){return new e.geras.PathObject(t,n,this.getConstants())},e.geras.Renderer.prototype.makeHighlightConstants_=function(){return new e.geras.HighlightConstantProvider(this.getConstants())},e.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},e.blockRendering.register("geras",e.geras.Renderer),e.thrasos={},e.thrasos.RenderInfo=function(t,n){e.thrasos.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.thrasos.RenderInfo,e.blockRendering.RenderInfo),e.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var r,t=!1,n=0;r=this.rows[n];n++)r.hasExternalInput&&(t=!0);for(n=0;r=this.rows[n];n++){var s=r.elements;r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0])));for(var c=0;c<s.length-1;c++){r.elements.push(s[c]);var v=this.getInRowSpacing_(s[c],s[c+1]);r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v))}r.elements.push(s[s.length-1]),r.endsWithElemSpacer()&&(v=this.getInRowSpacing_(s[s.length-1],null),t&&r.hasDummyInput&&(v+=this.constants_.TAB_WIDTH),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v)))}},e.thrasos.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&!n)return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))return n.notchOffset}return e.blockRendering.Types.isLeftRoundedCorner(t)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||t.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var r=t.yPos;return e.blockRendering.Types.isField(n)&&t.hasStatement?r+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):r+t.height/2},e.thrasos.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var c=n-this.topRow.ascenderHeight;s==this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,n+=c),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline},e.thrasos.Renderer=function(t){e.thrasos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.thrasos.Renderer,e.blockRendering.Renderer),e.thrasos.Renderer.prototype.makeRenderInfo_=function(t){return new e.thrasos.RenderInfo(this,t)},e.blockRendering.register("thrasos",e.thrasos.Renderer),e.zelos={},e.zelos.ConstantProvider=function(){e.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},e.utils.object.inherits(e.zelos.ConstantProvider,e.blockRendering.ConstantProvider),e.zelos.ConstantProvider.prototype.setFontConstants_=function(t){e.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},e.zelos.ConstantProvider.prototype.init=function(){e.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},e.zelos.ConstantProvider.prototype.setDynamicProperties_=function(t){e.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},e.zelos.ConstantProvider.prototype.dispose=function(){e.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&e.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&e.utils.dom.removeNode(this.replacementGlowFilter_)},e.zelos.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(25,-t),e.utils.svgPaths.point(71,-t),e.utils.svgPaths.point(n,0)])}},e.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(r,s,c){var v=r/2;return e.utils.svgPaths.lineTo(-(c=c?-1:1)*(v=v>n?n:v),r=(s?-1:1)*r/2)+e.utils.svgPaths.lineTo(c*v,r)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(r){return(r/=2)>n?n:r},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeRounded=function(){function t(s,c,v){var D=s>r?s-r:0;return e.utils.svgPaths.arc("a","0 0,1",s=(s>r?r:s)/2,e.utils.svgPaths.point((c?-1:1)*s,(c?-1:1)*s))+e.utils.svgPaths.lineOnAxis("v",(v?1:-1)*D)+e.utils.svgPaths.arc("a","0 0,1",s,e.utils.svgPaths.point((c?1:-1)*s,(c?-1:1)*s))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,r=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(s){return(s/=2)>n?n:s},height:function(s){return s},connectionOffsetY:function(s){return s/2},connectionOffsetX:function(s){return-s},pathDown:function(s){return t(s,!1,!1)},pathUp:function(s){return t(s,!0,!1)},pathRightDown:function(s){return t(s,!1,!0)},pathRightUp:function(s){return t(s,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeSquared=function(){function t(r,s,c){return r-=2*n,e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?-1:1)*n,(s?-1:1)*n))+e.utils.svgPaths.lineOnAxis("v",(c?1:-1)*r)+e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?1:-1)*n,(s?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(r){return n},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.shapeFor=function(t){var n=t.getCheck();switch(!n&&t.targetConnection&&(n=t.targetConnection.getCheck()),t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:if(null!=(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},e.zelos.ConstantProvider.prototype.makeNotch=function(){function t(it){return e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(it*c/2,0),e.utils.svgPaths.point(it*c*3/4,D/2),e.utils.svgPaths.point(it*c,D)])+e.utils.svgPaths.line([e.utils.svgPaths.point(it*c,v)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(it*c/4,D/2),e.utils.svgPaths.point(it*c/2,D),e.utils.svgPaths.point(it*c,D)])+e.utils.svgPaths.lineOnAxis("h",it*s)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(it*c/2,0),e.utils.svgPaths.point(it*c*3/4,-D/2),e.utils.svgPaths.point(it*c,-D)])+e.utils.svgPaths.line([e.utils.svgPaths.point(it*c,-v)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(it*c/4,-D/2),e.utils.svgPaths.point(it*c/2,-D),e.utils.svgPaths.point(it*c,-D)])}var n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,s=n/3,c=s/3,v=r/2,D=v/2,P=t(1),G=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:P,pathRight:G}},e.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t));return{width:t,height:t,pathTop:n,pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t)),rightWidth:t,rightHeight:t,pathTopRight:r,pathBottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t))}},e.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#000",t,.15)||t},e.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#000",t,.25)||t},e.zelos.ConstantProvider.prototype.createDom=function(t,n,r){e.zelos.ConstantProvider.superClass_.createDom.call(this,t,n,r),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),r=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},e.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.zelos.TopRow=function(t){e.zelos.TopRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.TopRow,e.blockRendering.TopRow),e.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection},e.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.BottomRow=function(t){e.zelos.BottomRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.BottomRow,e.blockRendering.BottomRow),e.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},e.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.RightConnectionShape=function(t){e.zelos.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},e.utils.object.inherits(e.zelos.RightConnectionShape,e.blockRendering.Measurable),e.zelos.RenderInfo=function(t,n){e.zelos.RenderInfo.superClass_.constructor.call(this,t,n),this.topRow=new e.zelos.TopRow(this.constants_),this.bottomRow=new e.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new e.zelos.RightConnectionShape(this.constants_):null},e.utils.object.inherits(e.zelos.RenderInfo,e.blockRendering.RenderInfo),e.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.zelos.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!!n&&(t.type==e.inputTypes.STATEMENT||n.type==e.inputTypes.STATEMENT||(t.type==e.inputTypes.VALUE||t.type==e.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},e.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):e.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.zelos.RenderInfo.prototype.getInRowSpacing_=function(t,n){return t&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&e.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){if(e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var r=e.blockRendering.Types.isInputRow(t)&&t.hasStatement,s=e.blockRendering.Types.isInputRow(n)&&n.hasStatement;return s||r?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),s&&r?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):e.blockRendering.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):e.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){var r=this.width-this.startX;return e.blockRendering.Types.isInputRow(t)&&t.hasStatement||e.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(r,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):r},e.zelos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(t.hasStatement&&!e.blockRendering.Types.isSpacer(n)&&!e.blockRendering.Types.isStatementInput(n))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(e.blockRendering.Types.isInlineInput(n)){var r=n.connectedBlock;if(r&&r.outputConnection&&r.nextConnection)return t.yPos+r.height/2}return e.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,t,n)},e.zelos.RenderInfo.prototype.addInput_=function(t,n){t.type==e.inputTypes.DUMMY&&n.hasDummyInput&&n.align==e.constants.ALIGN.LEFT&&t.align==e.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=t),e.zelos.RenderInfo.superClass_.addInput_.call(this,t,n)},e.zelos.RenderInfo.prototype.addAlignmentPadding_=function(t,n){if(t.rightAlignedDummyInput){for(var r,c,s=0;(c=t.elements[s])&&(e.blockRendering.Types.isSpacer(c)&&(r=c),!e.blockRendering.Types.isField(c)||c.parentInput!=t.rightAlignedDummyInput);s++);if(r)return r.width+=n,void(t.width+=n)}e.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,n)},e.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=t,r=2;r<this.rows.length-1;r+=2){var s=this.rows[r-1],c=this.rows[r],v=this.rows[r+1];if(s=2==r?!!this.topRow.hasPreviousConnection:!!s.followsStatement,v=r+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!v.precedesStatement,e.blockRendering.Types.isInputRow(c)&&c.hasStatement)c.measure(),n=c.width-c.getLastInput().width+t;else if(s&&(2==r||v)&&e.blockRendering.Types.isInputRow(c)&&!c.hasStatement){v=c.xPos,s=null;for(var P,D=0;P=c.elements[D];D++)e.blockRendering.Types.isSpacer(P)&&(s=P),!(s&&(e.blockRendering.Types.isField(P)||e.blockRendering.Types.isInput(P))&&v<n)||e.blockRendering.Types.isField(P)&&(P.field instanceof e.FieldLabel||P.field instanceof e.FieldImage)||(s.width+=n-v),v+=P.width}}},e.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var r,t=0,n=0;r=this.rows[n];n++)r.yPos=t,t+=r.height;this.height=t,t=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),r=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(r=n,this.rightSide.height=t,this.rightSide.width=r,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+r),this.startX=n,this.width+=n+r,this.widthWithChildren+=n+r}},e.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var r,t=0,n=0;r=this.rows[n];n++)if(e.blockRendering.Types.isInputRow(r)){t=r.elements[r.elements.length-2];var s=this.getNegativeSpacing_(r.elements[1]),c=this.getNegativeSpacing_(t),v=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(t=s+c)<v&&(s=(t=this.width-v)/2,c=t/2),r.elements.unshift(new e.blockRendering.InRowSpacer(this.constants_,-s)),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,-c))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,n=0;r=this.rows[n];n++)e.blockRendering.Types.isTopOrBottomRow(r)&&(r.elements[1].width-=t,r.elements[1].widthWithConnectedBlocks-=t),r.width-=t,r.widthWithConnectedBlocks-=t}},e.zelos.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var n=this.outputConnection.width,r=this.outputConnection.shape.type,s=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return r===s.SHAPES.ROUND?n-(r=this.height/2>(r=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?r:this.height/2)*(1-Math.sin(Math.acos((r-this.constants_.SMALL_PADDING)/r))):0;if(e.blockRendering.Types.isInlineInput(t)){var c=t.connectedBlock;return t=c?c.pathObject.outputShapeType:t.shape.type,c&&c.outputConnection&&(c.statementInputCount||c.nextConnection)||r==s.SHAPES.HEXAGONAL&&r!=t?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][t]}return e.blockRendering.Types.isField(t)?r==s.SHAPES.ROUND&&t.field instanceof e.FieldTextInput?n-2.75*s.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][0]:e.blockRendering.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},e.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var n=this.rows[t-1],r=this.rows[t],s=this.rows[t+1],c=2==t,v=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement;if(c?this.topRow.hasPreviousConnection:n.followsStatement){var D=3==r.elements.length&&(r.elements[1].field instanceof e.FieldLabel||r.elements[1].field instanceof e.FieldImage);if(!c&&D)n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.MEDIUM_PADDING;else if(c||v){if(v){for(c=!1,v=0;D=r.elements[v];v++)if(e.blockRendering.Types.isInlineInput(D)&&D.connectedBlock&&!D.connectedBlock.isShadow()&&40<=D.connectedBlock.getHeightWidth().height){c=!0;break}c&&(n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},e.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),e.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},e.zelos.Drawer=function(t,n){e.zelos.Drawer.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.zelos.Drawer,e.blockRendering.Drawer),e.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},e.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):e.zelos.Drawer.superClass_.drawOutline_.call(this)},e.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():e.zelos.Drawer.superClass_.drawLeft_.call(this)},e.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=t.height-(t.precedesStatement?n:0))?e.utils.svgPaths.lineOnAxis("V",t.yPos+n):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},e.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},e.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",t.width)},e.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",-t.width)},e.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var n=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var r=t.width-2*t.connectionWidth;t=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-t.height/2)+e.utils.svgPaths.lineOnAxis("h",r)+t.shape.pathRightDown(t.height)+e.utils.svgPaths.lineOnAxis("h",-r)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(n,t)}},e.zelos.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),r=n.xPos+n.notchOffset+n.shape.width,s=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,c=t.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",r)+s+e.utils.svgPaths.lineOnAxis("v",c)+n+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.zelos.MarkerSvg=function(t,n,r){e.zelos.MarkerSvg.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.zelos.MarkerSvg,e.blockRendering.MarkerSvg),e.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var n=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(n),this.showCurrent_()},e.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var n=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(t),this.showCurrent_()},e.zelos.MarkerSvg.prototype.positionCircle_=function(t,n){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},e.zelos.MarkerSvg.prototype.hide=function(){e.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},e.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(e.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},e.zelos.MarkerSvg.prototype.applyColour_=function(t){e.zelos.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},e.zelos.PathObject=function(t,n,r){e.zelos.PathObject.superClass_.constructor.call(this,t,n,r),this.constants=r,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},e.utils.object.inherits(e.zelos.PathObject,e.blockRendering.PathObject),e.zelos.PathObject.prototype.setPath=function(t){e.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},e.zelos.PathObject.prototype.applyColour=function(t){for(var n in e.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.flipRTL=function(){for(var t in e.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},e.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},e.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},e.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,n){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(n?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},e.zelos.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},e.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},e.zelos.PathObject.prototype.setOutlinePath=function(t,n){(t=this.getOutlinePath_(t)).setAttribute("d",n),t.setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},e.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},e.zelos.Renderer=function(t){e.zelos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.Renderer,e.blockRendering.Renderer),e.zelos.Renderer.prototype.makeConstants_=function(){return new e.zelos.ConstantProvider},e.zelos.Renderer.prototype.makeRenderInfo_=function(t){return new e.zelos.RenderInfo(this,t)},e.zelos.Renderer.prototype.makeDrawer_=function(t,n){return new e.zelos.Drawer(t,n)},e.zelos.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.zelos.MarkerSvg(t,this.getConstants(),n)},e.zelos.Renderer.prototype.makePathObject=function(t,n){return new e.zelos.PathObject(t,n,this.getConstants())},e.zelos.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!=e.connectionTypes.INPUT_VALUE&&t.type!==e.connectionTypes.OUTPUT_VALUE},e.zelos.Renderer.prototype.getConnectionPreviewMethod=function(t,n,r){return n.type==e.connectionTypes.OUTPUT_VALUE?t.isConnected()?e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:e.zelos.Renderer.superClass_.getConnectionPreviewMethod(t,n,r)},e.blockRendering.register("zelos",e.zelos.Renderer),e.Themes.Dark=e.Theme.defineTheme("dark",{base:e.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),e.Themes.Deuteranopia={},e.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},e.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},e.Themes.Deuteranopia=new e.Theme("deuteranopia",e.Themes.Deuteranopia.defaultBlockStyles,e.Themes.Deuteranopia.categoryStyles),e.Themes.HighContrast={},e.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},e.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},e.Themes.HighContrast=new e.Theme("highcontrast",e.Themes.HighContrast.defaultBlockStyles,e.Themes.HighContrast.categoryStyles),e.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),e.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),e.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),e.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),e.Themes.Tritanopia={},e.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},e.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},e.Themes.Tritanopia=new e.Theme("tritanopia",e.Themes.Tritanopia.defaultBlockStyles,e.Themes.Tritanopia.categoryStyles),e.requires={},e}.apply(W,[]))&&(H.exports=g)},18783:function(H,W,f){var g,e;g=[f(55484)],void 0!==(e=function(t){"use strict";return t.Blocks={},t.Blocks}.apply(W,g))&&(H.exports=e)},55484:function(H,W,f){var g,e;g=[f(81069)],void 0!==(e=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var r=n.newBlock("lists_create_with_container");r.initSvg();for(var s=r.getInput("STACK").connection,c=0;c<this.itemCount_;c++){var v=n.newBlock("lists_create_with_item");v.initSvg(),s.connect(v.previousConnection),s=v.nextConnection}return r},compose:function(n){var r=n.getInputTargetBlock("STACK");for(n=[];r&&!r.isInsertionMarker();)n.push(r.valueConnection_),r=r.nextConnection&&r.nextConnection.targetBlock();for(r=0;r<this.itemCount_;r++){var s=this.getInput("ADD"+r).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),r=0;r<this.itemCount_;r++)t.Mutator.reconnect(n[r],this,"ADD"+r)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var r=0;n;){var s=this.getInput("ADD"+r);n.valueConnection_=s&&s.connection.targetConnection,r++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var r=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&r.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var n=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(n),"END"),this.setInputsInline(!0);var r=this;this.setTooltip(function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",r.workspace.options.oneBasedIndex?"0":"-1")})}},t.Blocks.lists_getIndex={init:function(){var n=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new t.FieldDropdown(n,function(s){s="REMOVE"==s,this.getSourceBlock().updateStatement_(s)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var r=this;this.setTooltip(function(){var s=r.getFieldValue("MODE"),c=r.getFieldValue("WHERE"),v="";switch(s+" "+c){case"GET FROM_START":case"GET FROM_END":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==c||"FROM_END"==c)&&(v+="  "+("FROM_START"==c?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",r.workspace.options.oneBasedIndex?"#1":"#0")),v})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var r=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",r),n},domToMutation:function(n){var r="true"==n.getAttribute("statement");this.updateStatement_(r),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var r=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var c="FROM_START"==s||"FROM_END"==s;if(c!=n){var v=this.getSourceBlock();return v.updateAt_(c),v.setFieldValue(s,"WHERE"),null}});this.getInput("AT").appendField(r,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var n=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var r=this;this.setTooltip(function(){var s=r.getFieldValue("MODE"),c=r.getFieldValue("WHERE"),v="";switch(s+" "+c){case"SET FROM_START":case"SET FROM_END":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==c||"FROM_END"==c)&&(v+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",r.workspace.options.oneBasedIndex?"#1":"#0")),v})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",r),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var r=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var c="FROM_START"==s||"FROM_END"==s;if(c!=n){var v=this.getSourceBlock();return v.updateAt_(c),v.setFieldValue(s,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(r,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",r),r=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",r),n},domToMutation:function(n){var r="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,r),this.updateAt_(2,n)},updateAt_:function(n,r){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),r?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(c){var v="FROM_START"==c||"FROM_END"==c;if(v!=r){var D=this.getSourceBlock();return D.updateAt_(n,v),D.setFieldValue(c,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var n=this,r=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(s){n.updateType_(s)});this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(r,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var s=n.getFieldValue("MODE");if("SPLIT"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+s)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var r=this.getInput("INPUT").connection;r.setShadowDom(null);var s=r.targetBlock();s&&(r.disconnect(),s.isShadow()?s.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=t.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var r=n.newBlock("controls_if_if");r.initSvg();for(var s=r.nextConnection,c=1;c<=this.elseifCount_;c++){var v=n.newBlock("controls_if_elseif");v.initSvg(),s.connect(v.previousConnection),s=v.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),s.connect(n.previousConnection)),r},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var r=[null],s=[null],c=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,r.push(n.valueConnection_),s.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,c=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(r,s,c)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var r=1;n;){switch(n.type){case"controls_if_elseif":var s=this.getInput("IF"+r),c=this.getInput("DO"+r);n.valueConnection_=s&&s.connection.targetConnection,n.statementConnection_=c&&c.connection.targetConnection,r++;break;case"controls_if_else":c=this.getInput("ELSE"),n.statementConnection_=c&&c.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],r=[null],s=null;this.getInput("ELSE")&&(s=this.getInput("ELSE").connection.targetConnection);for(var c=1;this.getInput("IF"+c);){var v=this.getInput("IF"+c),D=this.getInput("DO"+c);n.push(v.connection.targetConnection),r.push(D.connection.targetConnection),c++}this.updateShape_(),this.reconnectChildBlocks_(n,r,s)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,r,s){for(var c=1;c<=this.elseifCount_;c++)t.Mutator.reconnect(n[c],this,"IF"+c),t.Mutator.reconnect(r[c],this,"DO"+c);t.Mutator.reconnect(s,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var r=this.getInputTargetBlock("A"),s=this.getInputTargetBlock("B");r&&s&&!this.workspace.connectionChecker.doTypeChecks(r.outputConnection,s.outputConnection)&&(t.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==r&&(r.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(r=this.prevBlocks_[1])!==s&&(s.unplug(),!r||r.isDisposed()||r.isShadow()||this.getInput("B").connection.connect(r.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var r=this.getInputTargetBlock("THEN"),s=this.getInputTargetBlock("ELSE"),c=this.outputConnection.targetConnection;if((r||s)&&c)for(var v=0;2>v;v++){var D=1==v?r:s;D&&!D.workspace.connectionChecker.doTypeChecks(D.outputConnection,c)&&(t.Events.setGroup(n.group),c===this.prevParentConnection_?(this.unplug(),c.getSourceBlock().bumpNeighbours()):(D.unplug(),D.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=c}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var r=this.getField("VAR").getVariable(),s=r.name;if(!this.isCollapsed()&&null!=s){var c={enabled:!0};c.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",s),r=t.Variables.generateVariableFieldDom(r),(s=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.appendChild(r),c.callback=t.ContextMenu.callbackFactory(this,s),n.push(c)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==t.Events.BLOCK_MOVE){var r=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(r?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var s=t.Events.getGroup();t.Events.setGroup(n.group),this.setEnabled(r),t.Events.setGroup(s)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",r),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var r=this.getInput("DIVISOR");n?r||this.appendValueInput("DIVISOR").setCheck("Number"):r&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(n){var r=t.utils.xml.createElement("mutation");n&&r.setAttribute("name",this.getFieldValue("NAME"));for(var s=0;s<this.argumentVarModels_.length;s++){var c=t.utils.xml.createElement("arg"),v=this.argumentVarModels_[s];c.setAttribute("name",v.name),c.setAttribute("varid",v.getId()),n&&this.paramIds_&&c.setAttribute("paramId",this.paramIds_[s]),r.appendChild(c)}return this.hasStatements_||r.setAttribute("statements","false"),r},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var s,r=0;s=n.childNodes[r];r++)if("arg"==s.nodeName.toLowerCase()){var c=s.getAttribute("name");s=s.getAttribute("varid")||s.getAttribute("varId"),this.arguments_.push(c),null!=(s=t.Variables.getOrCreateVariablePackage(this.workspace,s,c,""))?this.argumentVarModels_.push(s):console.log("Failed to create a variable with name "+c+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var r=t.utils.xml.createElement("block");r.setAttribute("type","procedures_mutatorcontainer");var s=t.utils.xml.createElement("statement");s.setAttribute("name","STACK"),r.appendChild(s);for(var c=0;c<this.arguments_.length;c++){var v=t.utils.xml.createElement("block");v.setAttribute("type","procedures_mutatorarg");var D=t.utils.xml.createElement("field");D.setAttribute("name","NAME");var P=t.utils.xml.createTextNode(this.arguments_[c]);D.appendChild(P),v.appendChild(D),D=t.utils.xml.createElement("next"),v.appendChild(D),s.appendChild(v),s=D}return n=t.Xml.domToBlock(r,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var r=n.getInputTargetBlock("STACK");r&&!r.isInsertionMarker();){var s=r.getFieldValue("NAME");this.arguments_.push(s),s=this.workspace.getVariable(s,""),this.argumentVarModels_.push(s),this.paramIds_.push(r.id),r=r.nextConnection&&r.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,r){var s=this.workspace.getVariableById(n);if(""==s.type){s=s.name,r=this.workspace.getVariableById(r);for(var c=!1,v=0;v<this.argumentVarModels_.length;v++)this.argumentVarModels_[v].getId()==n&&(this.arguments_[v]=r.name,this.argumentVarModels_[v]=r,c=!0);c&&(this.displayRenamedVar_(s,r.name),t.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var r=n.name,s=!1,c=0;c<this.argumentVarModels_.length;c++)if(this.argumentVarModels_[c].getId()==n.getId()){var v=this.arguments_[c];this.arguments_[c]=r,s=!0}s&&(this.displayRenamedVar_(v,r),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,r){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var v,s=this.mutator.workspace_.getAllBlocks(!1),c=0;v=s[c];c++)"procedures_mutatorarg"==v.type&&t.Names.equals(n,v.getFieldValue("NAME"))&&v.setFieldValue(r,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var r={enabled:!0},s=this.getFieldValue("NAME");r.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",s);var c=t.utils.xml.createElement("mutation");for(c.setAttribute("name",s),s=0;s<this.arguments_.length;s++){var v=t.utils.xml.createElement("arg");v.setAttribute("name",this.arguments_[s]),c.appendChild(v)}if((s=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),s.appendChild(c),r.callback=t.ContextMenu.callbackFactory(this,s),n.push(r),!this.isCollapsed())for(s=0;s<this.argumentVarModels_.length;s++)(r={enabled:!0}).text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(c=this.argumentVarModels_[s]).name),c=t.Variables.generateVariableFieldDom(c),(v=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),v.appendChild(c),r.callback=t.ContextMenu.callbackFactory(this,v),n.push(r)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var n=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var r=this.getSourceBlock(),s=t.Mutator.findParentWs(r.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var c=(r.workspace.targetWorkspace||r.workspace).getAllBlocks(!1),v=n.toLowerCase(),D=0;D<c.length;D++)if(c[D].id!=this.getSourceBlock().id){var P=c[D].getFieldValue("NAME");if(P&&P.toLowerCase()==v)return null}return r.isInFlyout||((r=s.getVariable(n,""))&&r.name!=n&&s.renameVariableById(r.getId(),n),r||(r=s.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(r)),n},deleteIntermediateVars_:function(n){var r=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(r)for(var s=0;s<this.createdVariables_.length;s++){var c=this.createdVariables_[s];c.name!=n&&r.deleteVariableById(c.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,r){t.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(r,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",r)))},setProcedureParameters_:function(n,r){var s=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),c=s&&s.mutator&&s.mutator.isVisible();if(c||(this.quarkConnections_={},this.quarkIds_=null),r)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=r;else{if(r.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),s=this.rendered,this.rendered=!1;for(var v=0;v<this.arguments_.length;v++){var D=this.getInput("ARG"+v);D&&(this.quarkConnections_[this.quarkIds_[v]]=D=D.connection.targetConnection,c&&D&&-1==r.indexOf(this.quarkIds_[v])&&(D.disconnect(),D.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],v=0;v<this.arguments_.length;v++)n=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[v],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=r)for(v=0;v<this.arguments_.length;v++)(r=this.quarkIds_[v])in this.quarkConnections_&&(t.Mutator.reconnect(D=this.quarkConnections_[r],this,"ARG"+v)||delete this.quarkConnections_[r]);(this.rendered=s)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var r=this.getField("ARGNAME"+n);if(r){t.Events.disable();try{r.setValue(this.arguments_[n])}finally{t.Events.enable()}}else r=new t.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(t.ALIGN_RIGHT).appendField(r,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var r=0;r<this.arguments_.length;r++){var s=t.utils.xml.createElement("arg");s.setAttribute("name",this.arguments_[r]),n.appendChild(s)}return n},domToMutation:function(n){var r=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),r),r=[];for(var v,s=[],c=0;v=n.childNodes[c];c++)"arg"==v.nodeName.toLowerCase()&&(r.push(v.getAttribute("name")),s.push(v.getAttribute("paramId")));this.setProcedureParameters_(r,s)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==t.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var r=this.getProcedureCall();if(!(r=t.Procedures.getDefinition(r,this.workspace))||r.type==this.defType_&&JSON.stringify(r.getVars())==JSON.stringify(this.arguments_)||(r=null),!r){t.Events.setGroup(n.group),n=t.utils.xml.createElement("xml"),(r=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var s=this.getRelativeToSurfaceXY(),c=s.y+2*t.SNAP_RADIUS;r.setAttribute("x",s.x+t.SNAP_RADIUS*(this.RTL?-1:1)),r.setAttribute("y",c),s=this.mutationToDom(),r.appendChild(s),(s=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(c=this.getProcedureCall())||(c=t.Procedures.findLegalName("",this),this.renameProcedure("",c)),s.appendChild(t.utils.xml.createTextNode(c)),r.appendChild(s),n.appendChild(r),t.Xml.domToWorkspace(n,this.workspace),t.Events.setGroup(!1)}}else n.type==t.Events.BLOCK_DELETE?(r=this.getProcedureCall(),(r=t.Procedures.getDefinition(r,this.workspace))||(t.Events.setGroup(n.group),this.dispose(!0),t.Events.setGroup(!1))):n.type==t.Events.CHANGE&&"disabled"==n.element&&(r=this.getProcedureCall(),(r=t.Procedures.getDefinition(r,this.workspace))&&r.id==n.blockId&&((r=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(r)))},customContextMenu:function(n){if(this.workspace.isMovable()){var r={enabled:!0};r.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var s=this.getProcedureCall(),c=this.workspace;r.callback=function(){var v=t.Procedures.getDefinition(s,c);v&&(c.centerOnBlock(v.id),v.select())},n.push(r)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var r=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(r.type)){n=!0;break}r=r.getSurroundParent()}while(r);n?("procedures_defnoreturn"==r.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=r.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",r),r=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",r),n},domToMutation:function(n){var r="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,r),this.updateAt_(2,n)},updateAt_:function(n,r){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),r?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(c){var v="FROM_START"==c||"FROM_END"==c;if(v!=r){var D=this.getSourceBlock();return D.updateAt_(n,v),D.setFieldValue(c,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var n=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var n=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var r=this;n=new t.FieldDropdown(n,function(s){r.updateType_(s)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==r.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],r=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new t.FieldDropdown(n,function(s){r.updateType_(s)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==r.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var s,r=0;s=this.inputList[r];r++)for(var v,c=0;v=s.fieldRow[c];c++)if(n==v.name)return s.insertFieldAt(c,this.newQuote_(!0)),void s.insertFieldAt(c+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new t.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var r=n.newBlock("text_create_join_container");r.initSvg();for(var s=r.getInput("STACK").connection,c=0;c<this.itemCount_;c++){var v=n.newBlock("text_create_join_item");v.initSvg(),s.connect(v.previousConnection),s=v.nextConnection}return r},compose:function(n){var r=n.getInputTargetBlock("STACK");for(n=[];r&&!r.isInsertionMarker();)n.push(r.valueConnection_),r=r.nextConnection&&r.nextConnection.targetBlock();for(r=0;r<this.itemCount_;r++){var s=this.getInput("ADD"+r).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),r=0;r<this.itemCount_;r++)t.Mutator.reconnect(n[r],this,"ADD"+r)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var r=0;n;){var s=this.getInput("ADD"+r);n.valueConnection_=s&&s.connection.targetConnection,r++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var r=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&r.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(r){(r="FROM_START"==r||"FROM_END"==r)!=this.isAt_&&this.getSourceBlock().updateAt_(r)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var r=n.getFieldValue("WHERE"),s=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==r||"FROM_END"==r)&&(r="FROM_START"==r?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(s+="  "+r.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),s})},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(r={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},v=this.getField("VAR").getText(),c={text:t.Msg.DELETE_VARIABLE.replace("%1",v),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(r),n.unshift(c));else{if("variables_get"==this.type)var r="variables_set",s=t.Msg.VARIABLES_GET_CREATE_SET;else r="variables_get",s=t.Msg.VARIABLES_SET_CREATE_GET;var c={enabled:0<this.workspace.remainingCapacity()},v=this.getField("VAR").getText();c.text=s.replace("%1",v),(s=t.utils.xml.createElement("field")).setAttribute("name","VAR"),s.appendChild(t.utils.xml.createTextNode(v)),(v=t.utils.xml.createElement("block")).setAttribute("type",r),v.appendChild(s),c.callback=t.ContextMenu.callbackFactory(this,v),n.push(c)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(r,s)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();r.deleteVariableById(s.getId()),r.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(r={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},D=this.getField("VAR").getText(),v={text:t.Msg.DELETE_VARIABLE.replace("%1",D),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(r),n.unshift(v));else{var r=this.getFieldValue("VAR"),s=this.workspace.getVariableById(r).type;if("variables_get_dynamic"==this.type){r="variables_set_dynamic";var c=t.Msg.VARIABLES_GET_CREATE_SET}else r="variables_get_dynamic",c=t.Msg.VARIABLES_SET_CREATE_GET;var v={enabled:0<this.workspace.remainingCapacity()},D=this.getField("VAR").getText();v.text=c.replace("%1",D),(c=t.utils.xml.createElement("field")).setAttribute("name","VAR"),c.setAttribute("variabletype",s),c.appendChild(t.utils.xml.createTextNode(D)),(D=t.utils.xml.createElement("block")).setAttribute("type",r),D.appendChild(c),v.callback=t.ContextMenu.callbackFactory(this,D),n.push(v)}},onchange:function(n){n=this.getFieldValue("VAR"),n=t.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(r,s)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();r.deleteVariableById(s.getId()),r.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks}.apply(W,g))&&(H.exports=e)},25552:function(H,W,f){var g,e;g=[f(68210),f(63266),f(18783),f(30069)],void 0!==(e=function(t,n,r,s){"use strict";return t.setLocale(n),t.Blocks=t.Blocks||{},Object.keys(r).forEach(function(c){t.Blocks[c]=r[c]}),t.JavaScript=s,t}.apply(W,g))&&(H.exports=e)},68210:function(H,W,f){var g,e;g=[f(86931)],void 0!==(e=function(t){"use strict";return t.setLocale=function(n){t.Msg=t.Msg||{},Object.keys(n).forEach(function(r){t.Msg[r]=n[r]})},t}.apply(W,g))&&(H.exports=e)},76279:function(H,W,f){var g,e;g=[f(25552)],void 0!==(e=function(t){"use strict";return t}.apply(W,g))&&(H.exports=e)},30069:function(H,W,f){var g,e;g=[f(68210),f(69957)],void 0!==(e=function(t,n){"use strict";return t.JavaScript=n,n}.apply(W,g))&&(H.exports=e)},69957:function(H,W,f){var g,e;g=[f(81069)],void 0!==(e=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.isInitialized=!1,t.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var r=[],s=t.Variables.allDeveloperVariables(n),c=0;c<s.length;c++)r.push(this.nameDB_.getName(s[c],t.Names.DEVELOPER_VARIABLE_TYPE));for(n=t.Variables.allUsedVarModels(n),c=0;c<n.length;c++)r.push(this.nameDB_.getName(n[c].getId(),t.VARIABLE_CATEGORY_NAME));r.length&&(this.definitions_.variables="var "+r.join(", ")+";"),this.isInitialized=!0},t.JavaScript.finish=function(n){var r=t.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),r.join("\n\n")+"\n\n\n"+n},t.JavaScript.scrubNakedValue=function(n){return n+";\n"},t.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(n,r,s){var c="";if(!n.outputConnection||!n.outputConnection.targetConnection){var v=n.getCommentText();v&&(v=t.utils.string.wrap(v,this.COMMENT_WRAP-3),c+=this.prefixLines(v+"\n","// "));for(var D=0;D<n.inputList.length;D++)n.inputList[D].type==t.inputTypes.VALUE&&(v=n.inputList[D].connection.targetBlock())&&(v=this.allNestedComments(v))&&(c+=this.prefixLines(v,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),c+r+(s?"":this.blockToCode(n))},t.JavaScript.getAdjusted=function(n,r,s,c,v){s=s||0,v=v||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&s--;var D=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<s?this.valueToCode(n,r,this.ORDER_ADDITION)||D:0>s?this.valueToCode(n,r,this.ORDER_SUBTRACTION)||D:c?this.valueToCode(n,r,this.ORDER_UNARY_NEGATION)||D:this.valueToCode(n,r,v)||D,t.isNumber(n))n=Number(n)+s,c&&(n=-n);else{if(0<s){n=n+" + "+s;var P=this.ORDER_ADDITION}else 0>s&&(n=n+" - "+-s,P=this.ORDER_SUBTRACTION);c&&(n=s?"-("+n+")":"-"+n,P=this.ORDER_UNARY_NEGATION),P=Math.floor(P),v=Math.floor(v),P&&v>=P&&(n="("+n+")")}return n},t.JavaScript.colour={},t.JavaScript.colour_picker=function(n){return[t.JavaScript.quote_(n.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(n){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(n){var r=t.JavaScript.valueToCode(n,"RED",t.JavaScript.ORDER_NONE)||0,s=t.JavaScript.valueToCode(n,"GREEN",t.JavaScript.ORDER_NONE)||0;return n=t.JavaScript.valueToCode(n,"BLUE",t.JavaScript.ORDER_NONE)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(n){var r=t.JavaScript.valueToCode(n,"COLOUR1",t.JavaScript.ORDER_NONE)||"'#000000'",s=t.JavaScript.valueToCode(n,"COLOUR2",t.JavaScript.ORDER_NONE)||"'#000000'";return n=t.JavaScript.valueToCode(n,"RATIO",t.JavaScript.ORDER_NONE)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(n){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(n){for(var r=Array(n.itemCount_),s=0;s<n.itemCount_;s++)r[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"null";return["["+r.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(n){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(n,"ITEM",t.JavaScript.ORDER_NONE)||"null")+", "+(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(n){var r="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return r=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+r+"("+s+")",n.workspace.options.oneBasedIndex?[r+" + 1",t.JavaScript.ORDER_ADDITION]:[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(n){var r=n.getFieldValue("MODE")||"GET",s=n.getFieldValue("WHERE")||"FROM_START",c=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==s?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"[]";switch(s){case"FIRST":if("GET"==r)return[c+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[c+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==r)return c+".shift();\n";break;case"LAST":if("GET"==r)return[c+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[c+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==r)return c+".pop();\n";break;case"FROM_START":if(n=t.JavaScript.getAdjusted(n,"AT"),"GET"==r)return[c+"["+n+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[c+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return c+".splice("+n+", 1);\n";break;case"FROM_END":if(n=t.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==r)return[c+".slice("+n+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==r)return[c+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return c+".splice("+n+", 1);";break;case"RANDOM":if(c=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+c+", "+("GET"!=r)+")","GET"==r||"GET_REMOVE"==r)return[c,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return c+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(n){function r(){if(s.match(/^\w+$/))return"";var P=t.JavaScript.nameDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),G="var "+P+" = "+s+";\n";return s=P,G}var s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",c=n.getFieldValue("MODE")||"GET",v=n.getFieldValue("WHERE")||"FROM_START",D=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(v){case"FIRST":if("SET"==c)return s+"[0] = "+D+";\n";if("INSERT"==c)return s+".unshift("+D+");\n";break;case"LAST":if("SET"==c)return(n=r())+(s+"[")+s+".length - 1] = "+D+";\n";if("INSERT"==c)return s+".push("+D+");\n";break;case"FROM_START":if(v=t.JavaScript.getAdjusted(n,"AT"),"SET"==c)return s+"["+v+"] = "+D+";\n";if("INSERT"==c)return s+".splice("+v+", 0, "+D+");\n";break;case"FROM_END":if(v=t.JavaScript.getAdjusted(n,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),n=r(),"SET"==c)return n+(s+"[")+s+".length - "+v+"] = "+D+";\n";if("INSERT"==c)return n+(s+".splice(")+s+".length - "+v+", 0, "+D+");\n";break;case"RANDOM":if(n=r(),n+="var "+(v=t.JavaScript.nameDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+s+".length);\n","SET"==c)return n+(s+"[")+v+"] = "+D+";\n";if("INSERT"==c)return n+(s+".splice(")+v+", 0, "+D+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(n,r,s){return"FIRST"==r?"0":"FROM_END"==r?n+".length - 1 - "+s:"LAST"==r?n+".length - 1":s},t.JavaScript.lists_getSublist=function(n){var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",s=n.getFieldValue("WHERE1"),c=n.getFieldValue("WHERE2");if("FIRST"==s&&"LAST"==c)r+=".slice(0)";else if(r.match(/^\w+$/)||"FROM_END"!=s&&"FROM_START"==c){switch(s){case"FROM_START":var v=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":v=r+".length - "+(v=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":v="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(c){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=r+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=r+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}r=r+".slice("+v+", "+n+")"}else{v=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var D=t.JavaScript.lists.getIndex_,P={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};r=t.JavaScript.provideFunction_("subsequence"+P[s]+P[c],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==s||"FROM_START"==s?", at1":"")+("FROM_END"==c||"FROM_START"==c?", at2":"")+") {","  var start = "+D("sequence",s,"at1")+";","  var end = "+D("sequence",c,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+r+("FROM_END"==s||"FROM_START"==s?", "+v:"")+("FROM_END"==c||"FROM_START"==c?", "+n:"")+")"}return[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(n){var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",s="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[r+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+s+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(n){var r=t.JavaScript.valueToCode(n,"INPUT",t.JavaScript.ORDER_MEMBER),s=t.JavaScript.valueToCode(n,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))r||(r="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);r||(r="[]"),n="join"}return[r+"."+n+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(n){return[(t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(n){var r=0,s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n));do{var c=t.JavaScript.valueToCode(n,"IF"+r,t.JavaScript.ORDER_NONE)||"false",v=t.JavaScript.statementToCode(n,"DO"+r);t.JavaScript.STATEMENT_SUFFIX&&(v=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+v),s+=(0<r?" else ":"")+"if ("+c+") {\n"+v+"}",++r}while(n.getInput("IF"+r));return(n.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(v=t.JavaScript.statementToCode(n,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(v=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+v),s+=" else {\n"+v+"}"),s+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(n){var r={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],s="=="==r||"!="==r?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(n,"A",s)||"0")+" "+r+" "+(n=t.JavaScript.valueToCode(n,"B",s)||"0"),s]},t.JavaScript.logic_operation=function(n){var r="AND"==n.getFieldValue("OP")?"&&":"||",s="&&"==r?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,c=t.JavaScript.valueToCode(n,"A",s);if(n=t.JavaScript.valueToCode(n,"B",s),c||n){var v="&&"==r?"true":"false";c||(c=v),n||(n=v)}else n=c="false";return[c+" "+r+" "+n,s]},t.JavaScript.logic_negate=function(n){var r=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(n,"BOOL",r)||"true"),r]},t.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(n){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(n){return[(t.JavaScript.valueToCode(n,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(n,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=t.JavaScript.valueToCode(n,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(n){var r=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):t.JavaScript.valueToCode(n,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",s=t.JavaScript.statementToCode(n,"DO");s=t.JavaScript.addLoopTrap(s,n),n="";var c=t.JavaScript.nameDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),v=r;return r.match(/^\w+$/)||t.isNumber(r)||(n+="var "+(v=t.JavaScript.nameDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+r+";\n"),n+"for (var "+c+" = 0; "+c+" < "+v+"; "+c+"++) {\n"+s+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(n){var r="UNTIL"==n.getFieldValue("MODE"),s=t.JavaScript.valueToCode(n,"BOOL",r?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",c=t.JavaScript.statementToCode(n,"DO");return r&&(s="!"+s),"while ("+s+") {\n"+(c=t.JavaScript.addLoopTrap(c,n))+"}\n"},t.JavaScript.controls_for=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",c=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",v=t.JavaScript.valueToCode(n,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",D=t.JavaScript.statementToCode(n,"DO");if(D=t.JavaScript.addLoopTrap(D,n),t.isNumber(s)&&t.isNumber(c)&&t.isNumber(v)){var P=Number(s)<=Number(c);n="for ("+r+" = "+s+"; "+r+(P?" <= ":" >= ")+c+"; "+r,n=(1==(r=Math.abs(Number(v)))?n+(P?"++":"--"):n+(P?" += ":" -= ")+r)+") {\n"+D+"}\n"}else n="",P=s,s.match(/^\w+$/)||t.isNumber(s)||(n+="var "+(P=t.JavaScript.nameDB_.getDistinctName(r+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),s=c,c.match(/^\w+$/)||t.isNumber(c)||(n+="var "+(s=t.JavaScript.nameDB_.getDistinctName(r+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+c+";\n"),n+="var "+(c=t.JavaScript.nameDB_.getDistinctName(r+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",n=(n=t.isNumber(v)?n+(Math.abs(v)+";\n"):n+"Math.abs("+v+");\n")+"if ("+P+" > "+s+") {\n"+(t.JavaScript.INDENT+c)+" = -"+c+";\n",n+="}\n",n+="for ("+r+" = "+P+"; "+c+" >= 0 ? "+r+" <= "+s+" : "+r+" >= "+s+"; "+r+" += "+c+") {\n"+D+"}\n";return n},t.JavaScript.controls_forEach=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",c=t.JavaScript.statementToCode(n,"DO");c=t.JavaScript.addLoopTrap(c,n),n="";var v=s;return s.match(/^\w+$/)||(n+="var "+(v=t.JavaScript.nameDB_.getDistinctName(r+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),n+"for (var "+(s=t.JavaScript.nameDB_.getDistinctName(r+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+v+") {\n"+(c=t.JavaScript.INDENT+r+" = "+v+"["+s+"];\n"+c)+"}\n"},t.JavaScript.controls_flow_statements=function(n){var r="";if(t.JavaScript.STATEMENT_PREFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),t.JavaScript.STATEMENT_PREFIX){var s=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);s&&!s.suppressPrefixSuffix&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,s))}switch(n.getFieldValue("FLOW")){case"BREAK":return r+"break;\n";case"CONTINUE":return r+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(n){var r={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],s=r[0],c=t.JavaScript.valueToCode(n,"A",r=r[1])||"0";return n=t.JavaScript.valueToCode(n,"B",r)||"0",s?[c+s+n,r]:["Math.pow("+c+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(n){var r=n.getFieldValue("OP");if("NEG"==r)return"-"==(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,t.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==r||"COS"==r||"TAN"==r?t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0",r){case"ABS":var s="Math.abs("+n+")";break;case"ROOT":s="Math.sqrt("+n+")";break;case"LN":s="Math.log("+n+")";break;case"EXP":s="Math.exp("+n+")";break;case"POW10":s="Math.pow(10,"+n+")";break;case"ROUND":s="Math.round("+n+")";break;case"ROUNDUP":s="Math.ceil("+n+")";break;case"ROUNDDOWN":s="Math.floor("+n+")";break;case"SIN":s="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":s="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":s="Math.tan("+n+" / 180 * Math.PI)"}if(s)return[s,t.JavaScript.ORDER_FUNCTION_CALL];switch(r){case"LOG10":s="Math.log("+n+") / Math.log(10)";break;case"ASIN":s="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":s="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":s="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+r)}return[s,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(n){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(n){var r=t.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",s=n.getFieldValue("PROPERTY");if("PRIME"==s)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+r+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(s){case"EVEN":var c=r+" % 2 == 0";break;case"ODD":c=r+" % 2 == 1";break;case"WHOLE":c=r+" % 1 == 0";break;case"POSITIVE":c=r+" > 0";break;case"NEGATIVE":c=r+" < 0";break;case"DIVISIBLE_BY":c=r+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[c,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(n){var r=t.JavaScript.valueToCode(n,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(n=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+r+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(n){var r=n.getFieldValue("OP");switch(r){case"SUM":n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(r=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(r=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(r=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(r=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(r=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+r)}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(n){return[(t.JavaScript.valueToCode(n,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"0")+", "+(t.JavaScript.valueToCode(n,"LOW",t.JavaScript.ORDER_NONE)||"0")+"), "+(n=t.JavaScript.valueToCode(n,"HIGH",t.JavaScript.ORDER_NONE)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(n){var r=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"0";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(n){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(n){var r=t.JavaScript.valueToCode(n,"X",t.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(n,"Y",t.JavaScript.ORDER_NONE)||"0")+", "+r+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),s&&(s=t.JavaScript.prefixLines(s,t.JavaScript.INDENT));var c="";t.JavaScript.INFINITE_LOOP_TRAP&&(c=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,n),t.JavaScript.INDENT));var v=t.JavaScript.statementToCode(n,"STACK"),D=t.JavaScript.valueToCode(n,"RETURN",t.JavaScript.ORDER_NONE)||"",P="";v&&D&&(P=s),D&&(D=t.JavaScript.INDENT+"return "+D+";\n");for(var G=[],it=n.getVars(),q=0;q<it.length;q++)G[q]=t.JavaScript.nameDB_.getName(it[q],t.VARIABLE_CATEGORY_NAME);return s="function "+r+"("+G.join(", ")+") {\n"+s+c+v+P+D+"}",s=t.JavaScript.scrub_(n,s),t.JavaScript.definitions_["%"+r]=s,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(n){for(var r=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s=[],c=n.getVars(),v=0;v<c.length;v++)s[v]=t.JavaScript.valueToCode(n,"ARG"+v,t.JavaScript.ORDER_NONE)||"null";return[r+"("+s.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(n){return t.JavaScript.procedures_callreturn(n)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(n){var r="if ("+(t.JavaScript.valueToCode(n,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)),n.hasReturnValue_?(n=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"null",r+=t.JavaScript.INDENT+"return "+n+";\n"):r+=t.JavaScript.INDENT+"return;\n",r+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(n){return[t.JavaScript.quote_(n.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(n){var r=-1!=(n=t.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?t.JavaScript.ORDER_ADDITION:t.JavaScript.ORDER_ATOMIC;return[n,r]},t.JavaScript.text.forceString_=function(n){return t.JavaScript.text.forceString_.strRegExp.test(n)?[n,t.JavaScript.ORDER_ATOMIC]:["String("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return n=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''",t.JavaScript.text.forceString_(n);case 2:var r=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"ADD1",t.JavaScript.ORDER_NONE)||"''",[n=t.JavaScript.text.forceString_(r)[0]+" + "+t.JavaScript.text.forceString_(n)[0],t.JavaScript.ORDER_ADDITION];default:r=Array(n.itemCount_);for(var s=0;s<n.itemCount_;s++)r[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"''";return[n="["+r.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return n=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",r+" += "+t.JavaScript.text.forceString_(n)[0]+";\n"},t.JavaScript.text_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(n){var r="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return r=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+r+"("+s+")",n.workspace.options.oneBasedIndex?[r+" + 1",t.JavaScript.ORDER_ADDITION]:[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(n){var r=n.getFieldValue("WHERE")||"FROM_START",s=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==r?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(r){case"FIRST":return[s+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[s+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[s+".charAt("+(n=t.JavaScript.getAdjusted(n,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[s+".slice("+(n=t.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(n,r,s){return"FIRST"==r?"0":"FROM_END"==r?n+".length - 1 - "+s:"LAST"==r?n+".length - 1":s},t.JavaScript.text_getSubstring=function(n){var r=n.getFieldValue("WHERE1"),s=n.getFieldValue("WHERE2"),c="FROM_END"!=r&&"LAST"!=r&&"FROM_END"!=s&&"LAST"!=s,v=t.JavaScript.valueToCode(n,"STRING",c?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''";if("FIRST"==r&&"LAST"==s)return[v,t.JavaScript.ORDER_NONE];if(v.match(/^'?\w+'?$/)||c){switch(r){case"FROM_START":c=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":c=v+".length - "+(c=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":c="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(s){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=v+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=v+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}r=v+".slice("+c+", "+n+")"}else{c=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var D=t.JavaScript.text.getIndex_,P={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};r=t.JavaScript.provideFunction_("subsequence"+P[r]+P[s],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==r||"FROM_START"==r?", at1":"")+("FROM_END"==s||"FROM_START"==s?", at2":"")+") {","  var start = "+D("sequence",r,"at1")+";","  var end = "+D("sequence",s,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+v+("FROM_END"==r||"FROM_START"==r?", "+c:"")+("FROM_END"==s||"FROM_START"==s?", "+n:"")+")"}return[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(n){var r={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=t.JavaScript.valueToCode(n,"TEXT",r?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[r?n+r:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(n){var r={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(n){return"window.alert("+(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(n){var r="window.prompt("+(n.getField("TEXT")?t.JavaScript.quote_(n.getFieldValue("TEXT")):t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(r="Number("+r+")"),[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(n){var r=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_replace=function(n){var r=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_reverse=function(n){return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.variables={},t.JavaScript.variables_get=function(n){return[t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(n){var r=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+r+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript}.apply(W,g))&&(H.exports=e)},63266:function(H,W,f){var g,e;g=[f(68210)],void 0!==(e=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg}.apply(W,g))&&(H.exports=e)},68266:function(H){H.exports=function(){"use strict";var W=navigator.userAgent,f=navigator.platform,y=/gecko\/\d/i.test(W),g=/MSIE \d/.test(W),e=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(W),t=/Edge\/(\d+)/.exec(W),n=g||e||t,r=n&&(g?document.documentMode||6:+(t||e)[1]),s=!t&&/WebKit\//.test(W),c=s&&/Qt\/\d+\.\d+/.test(W),v=!t&&/Chrome\//.test(W),D=/Opera\//.test(W),P=/Apple Computer/.test(navigator.vendor),G=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(W),it=/PhantomJS/.test(W),q=P&&(/Mobile\/\w+/.test(W)||navigator.maxTouchPoints>2),bt=/Android/.test(W),Ft=q||bt||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(W),gt=q||/Mac/.test(f),wt=/\bCrOS\b/.test(W),Bt=/win/i.test(f),Kt=D&&W.match(/Version\/(\d*\.\d*)/);Kt&&(Kt=Number(Kt[1])),Kt&&Kt>=15&&(D=!1,s=!0);var It=gt&&(c||D&&(null==Kt||Kt<12.11)),St=y||n&&r>=9;function lt(p){return new RegExp("(^|\\s)"+p+"(?:$|\\s)\\s*")}var st,ft=function(p,T){var M=p.className,I=lt(T).exec(M);if(I){var L=M.slice(I.index+I[0].length);p.className=M.slice(0,I.index)+(L?I[1]+L:"")}};function ht(p){for(var T=p.childNodes.length;T>0;--T)p.removeChild(p.firstChild);return p}function Gt(p,T){return ht(p).appendChild(T)}function ut(p,T,M,I){var L=document.createElement(p);if(M&&(L.className=M),I&&(L.style.cssText=I),"string"==typeof T)L.appendChild(document.createTextNode(T));else if(T)for(var K=0;K<T.length;++K)L.appendChild(T[K]);return L}function ot(p,T,M,I){var L=ut(p,T,M,I);return L.setAttribute("role","presentation"),L}function Z(p,T){if(3==T.nodeType&&(T=T.parentNode),p.contains)return p.contains(T);do{if(11==T.nodeType&&(T=T.host),T==p)return!0}while(T=T.parentNode)}function Zt(){var p;try{p=document.activeElement}catch(T){p=document.body||null}for(;p&&p.shadowRoot&&p.shadowRoot.activeElement;)p=p.shadowRoot.activeElement;return p}function vt(p,T){var M=p.className;lt(T).test(M)||(p.className+=(M?" ":"")+T)}function At(p,T){for(var M=p.split(" "),I=0;I<M.length;I++)M[I]&&!lt(M[I]).test(T)&&(T+=" "+M[I]);return T}st=document.createRange?function(p,T,M,I){var L=document.createRange();return L.setEnd(I||p,M),L.setStart(p,T),L}:function(p,T,M){var I=document.body.createTextRange();try{I.moveToElementText(p.parentNode)}catch(L){return I}return I.collapse(!0),I.moveEnd("character",M),I.moveStart("character",T),I};var re=function(p){p.select()};function ve(p){var T=Array.prototype.slice.call(arguments,1);return function(){return p.apply(null,T)}}function oe(p,T,M){for(var I in T||(T={}),p)p.hasOwnProperty(I)&&(!1!==M||!T.hasOwnProperty(I))&&(T[I]=p[I]);return T}function Ie(p,T,M,I,L){null==T&&-1==(T=p.search(/[^\s\u00a0]/))&&(T=p.length);for(var K=I||0,pt=L||0;;){var Rt=p.indexOf("\t",K);if(Rt<0||Rt>=T)return pt+(T-K);pt+=Rt-K,pt+=M-pt%M,K=Rt+1}}q?re=function(p){p.selectionStart=0,p.selectionEnd=p.value.length}:n&&(re=function(p){try{p.select()}catch(T){}});var Re=function(){this.id=null,this.f=null,this.time=0,this.handler=ve(this.onTimeout,this)};function je(p,T){for(var M=0;M<p.length;++M)if(p[M]==T)return M;return-1}Re.prototype.onTimeout=function(p){p.id=0,p.time<=+new Date?p.f():setTimeout(p.handler,p.time-+new Date)},Re.prototype.set=function(p,T){this.f=T;var M=+new Date+p;(!this.id||M<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,p),this.time=M)};var Ze={toString:function(){return"CodeMirror.Pass"}},we={scroll:!1},ci={origin:"*mouse"},Wt={origin:"+move"};function Ae(p,T,M){for(var I=0,L=0;;){var K=p.indexOf("\t",I);-1==K&&(K=p.length);var pt=K-I;if(K==p.length||L+pt>=T)return I+Math.min(pt,T-L);if(L+=K-I,I=K+1,(L+=M-L%M)>=T)return I}}var Qt=[""];function ee(p){for(;Qt.length<=p;)Qt.push(Mt(Qt)+" ");return Qt[p]}function Mt(p){return p[p.length-1]}function Yt(p,T){for(var M=[],I=0;I<p.length;I++)M[I]=T(p[I],I);return M}function ui(){}function Te(p,T){var M;return Object.create?M=Object.create(p):(ui.prototype=p,M=new ui),T&&oe(T,M),M}var ce=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function te(p){return/\w/.test(p)||p>"\x80"&&(p.toUpperCase()!=p.toLowerCase()||ce.test(p))}function Me(p,T){return T?!!(T.source.indexOf("\\w")>-1&&te(p))||T.test(p):te(p)}function ue(p){for(var T in p)if(p.hasOwnProperty(T)&&p[T])return!1;return!0}var _e=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function be(p){return p.charCodeAt(0)>=768&&_e.test(p)}function Dt(p,T,M){for(;(M<0?T>0:T<p.length)&&be(p.charAt(T));)T+=M;return T}function zt(p,T,M){for(var I=T>M?-1:1;;){if(T==M)return T;var L=(T+M)/2,K=I<0?Math.ceil(L):Math.floor(L);if(K==T)return p(K)?T:M;p(K)?M=K:T=K+I}}var Xe=null;function Ri(p,T,M){var I;Xe=null;for(var L=0;L<p.length;++L){var K=p[L];if(K.from<T&&K.to>T)return L;K.to==T&&(K.from!=K.to&&"before"==M?I=L:Xe=L),K.from==T&&(K.from!=K.to&&"before"!=M?I=L:Xe=L)}return null!=I?I:Xe}var bi=function(){function M(qt){return qt<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(qt):1424<=qt&&qt<=1524?"R":1536<=qt&&qt<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(qt-1536):1774<=qt&&qt<=2220?"r":8192<=qt&&qt<=8203?"w":8204==qt?"b":"L"}var I=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,L=/[stwN]/,K=/[LRr]/,pt=/[Lb1n]/,Rt=/[1n]/;function Ht(qt,xe,We){this.level=qt,this.from=xe,this.to=We}return function(qt,xe){var We="ltr"==xe?"L":"R";if(0==qt.length||"ltr"==xe&&!I.test(qt))return!1;for(var _i=qt.length,hi=[],ki=0;ki<_i;++ki)hi.push(M(qt.charCodeAt(ki)));for(var zi=0,Qi=We;zi<_i;++zi){var hn=hi[zi];"m"==hn?hi[zi]=Qi:Qi=hn}for(var vn=0,un=We;vn<_i;++vn){var yn=hi[vn];"1"==yn&&"r"==un?hi[vn]="n":K.test(yn)&&(un=yn,"r"==yn&&(hi[vn]="R"))}for(var Bn=1,zn=hi[0];Bn<_i-1;++Bn){var hr=hi[Bn];"+"==hr&&"1"==zn&&"1"==hi[Bn+1]?hi[Bn]="1":","==hr&&zn==hi[Bn+1]&&("1"==zn||"n"==zn)&&(hi[Bn]=zn),zn=hr}for(var eo=0;eo<_i;++eo){var ns=hi[eo];if(","==ns)hi[eo]="N";else if("%"==ns){var Vo=void 0;for(Vo=eo+1;Vo<_i&&"%"==hi[Vo];++Vo);for(var ja=eo&&"!"==hi[eo-1]||Vo<_i&&"1"==hi[Vo]?"1":"N",Ya=eo;Ya<Vo;++Ya)hi[Ya]=ja;eo=Vo-1}}for(var Ls=0,Ur=We;Ls<_i;++Ls){var Ns=hi[Ls];"L"==Ur&&"1"==Ns?hi[Ls]="L":K.test(Ns)&&(Ur=Ns)}for(var Ps=0;Ps<_i;++Ps)if(L.test(hi[Ps])){var S=void 0;for(S=Ps+1;S<_i&&L.test(hi[S]);++S);for(var B="L"==(Ps?hi[Ps-1]:We),rt=B==("L"==(S<_i?hi[S]:We))?B?"L":"R":We,_t=Ps;_t<S;++_t)hi[_t]=rt;Ps=S-1}for(var Jt,Xt=[],he=0;he<_i;)if(pt.test(hi[he])){var De=he;for(++he;he<_i&&pt.test(hi[he]);++he);Xt.push(new Ht(0,De,he))}else{var ke=he,ri=Xt.length,ai="rtl"==xe?1:0;for(++he;he<_i&&"L"!=hi[he];++he);for(var gi=ke;gi<he;)if(Rt.test(hi[gi])){ke<gi&&(Xt.splice(ri,0,new Ht(1,ke,gi)),ri+=ai);var wi=gi;for(++gi;gi<he&&Rt.test(hi[gi]);++gi);Xt.splice(ri,0,new Ht(2,wi,gi)),ri+=ai,ke=gi}else++gi;ke<he&&Xt.splice(ri,0,new Ht(1,ke,he))}return"ltr"==xe&&(1==Xt[0].level&&(Jt=qt.match(/^\s+/))&&(Xt[0].from=Jt[0].length,Xt.unshift(new Ht(0,0,Jt[0].length))),1==Mt(Xt).level&&(Jt=qt.match(/\s+$/))&&(Mt(Xt).to-=Jt[0].length,Xt.push(new Ht(0,_i-Jt[0].length,_i)))),"rtl"==xe?Xt.reverse():Xt}}();function mi(p,T){var M=p.order;return null==M&&(M=p.order=bi(p.text,T)),M}var on=[],li=function(p,T,M){if(p.addEventListener)p.addEventListener(T,M,!1);else if(p.attachEvent)p.attachEvent("on"+T,M);else{var I=p._handlers||(p._handlers={});I[T]=(I[T]||on).concat(M)}};function Bi(p,T){return p._handlers&&p._handlers[T]||on}function Ii(p,T,M){if(p.removeEventListener)p.removeEventListener(T,M,!1);else if(p.detachEvent)p.detachEvent("on"+T,M);else{var I=p._handlers,L=I&&I[T];if(L){var K=je(L,M);K>-1&&(I[T]=L.slice(0,K).concat(L.slice(K+1)))}}}function ni(p,T){var M=Bi(p,T);if(M.length)for(var I=Array.prototype.slice.call(arguments,2),L=0;L<M.length;++L)M[L].apply(null,I)}function vi(p,T,M){return"string"==typeof T&&(T={type:T,preventDefault:function(){this.defaultPrevented=!0}}),ni(p,M||T.type,p,T),ge(T)||T.codemirrorIgnore}function Ce(p){var T=p._handlers&&p._handlers.cursorActivity;if(T)for(var M=p.curOp.cursorActivityHandlers||(p.curOp.cursorActivityHandlers=[]),I=0;I<T.length;++I)-1==je(M,T[I])&&M.push(T[I])}function Qe(p,T){return Bi(p,T).length>0}function Ei(p){p.prototype.on=function(T,M){li(this,T,M)},p.prototype.off=function(T,M){Ii(this,T,M)}}function Pi(p){p.preventDefault?p.preventDefault():p.returnValue=!1}function ti(p){p.stopPropagation?p.stopPropagation():p.cancelBubble=!0}function ge(p){return null!=p.defaultPrevented?p.defaultPrevented:0==p.returnValue}function Pt(p){Pi(p),ti(p)}function dt(p){return p.target||p.srcElement}function Nt(p){var T=p.which;return null==T&&(1&p.button?T=1:2&p.button?T=3:4&p.button&&(T=2)),gt&&p.ctrlKey&&1==T&&(T=3),T}var Le,Ki,pe=function(){if(n&&r<9)return!1;var p=ut("div");return"draggable"in p||"dragDrop"in p}();function Vi(p){if(null==Le){var T=ut("span","\u200b");Gt(p,ut("span",[T,document.createTextNode("x")])),0!=p.firstChild.offsetHeight&&(Le=T.offsetWidth<=1&&T.offsetHeight>2&&!(n&&r<8))}var M=Le?ut("span","\u200b"):ut("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return M.setAttribute("cm-text",""),M}function Sn(p){if(null!=Ki)return Ki;var T=Gt(p,document.createTextNode("A\u062eA")),M=st(T,0,1).getBoundingClientRect(),I=st(T,1,2).getBoundingClientRect();return ht(p),!(!M||M.left==M.right)&&(Ki=I.right-M.right<3)}var p,ir=3!="\n\nb".split(/\n/).length?function(p){for(var T=0,M=[],I=p.length;T<=I;){var L=p.indexOf("\n",T);-1==L&&(L=p.length);var K=p.slice(T,"\r"==p.charAt(L-1)?L-1:L),pt=K.indexOf("\r");-1!=pt?(M.push(K.slice(0,pt)),T+=pt+1):(M.push(K),T=L+1)}return M}:function(p){return p.split(/\r\n?|\n/)},pi=window.getSelection?function(p){try{return p.selectionStart!=p.selectionEnd}catch(T){return!1}}:function(p){var T;try{T=p.ownerDocument.selection.createRange()}catch(M){}return!(!T||T.parentElement()!=p)&&0!=T.compareEndPoints("StartToEnd",T)},Ke="oncopy"in(p=ut("div"))||(p.setAttribute("oncopy","return;"),"function"==typeof p.oncopy),Pe=null;var Oi={},dn={};function Rn(p,T){arguments.length>2&&(T.dependencies=Array.prototype.slice.call(arguments,2)),Oi[p]=T}function xr(p){if("string"==typeof p&&dn.hasOwnProperty(p))p=dn[p];else if(p&&"string"==typeof p.name&&dn.hasOwnProperty(p.name)){var T=dn[p.name];"string"==typeof T&&(T={name:T}),(p=Te(T,p)).name=T.name}else{if("string"==typeof p&&/^[\w\-]+\/[\w\-]+\+xml$/.test(p))return xr("application/xml");if("string"==typeof p&&/^[\w\-]+\/[\w\-]+\+json$/.test(p))return xr("application/json")}return"string"==typeof p?{name:p}:p||{name:"null"}}function io(p,T){T=xr(T);var M=Oi[T.name];if(!M)return io(p,"text/plain");var I=M(p,T);if(_o.hasOwnProperty(T.name)){var L=_o[T.name];for(var K in L)!L.hasOwnProperty(K)||(I.hasOwnProperty(K)&&(I["_"+K]=I[K]),I[K]=L[K])}if(I.name=T.name,T.helperType&&(I.helperType=T.helperType),T.modeProps)for(var pt in T.modeProps)I[pt]=T.modeProps[pt];return I}var _o={};function Ko(p,T){oe(T,_o.hasOwnProperty(p)?_o[p]:_o[p]={})}function jr(p,T){if(!0===T)return T;if(p.copyState)return p.copyState(T);var M={};for(var I in T){var L=T[I];L instanceof Array&&(L=L.concat([])),M[I]=L}return M}function pr(p,T){for(var M;p.innerMode&&(M=p.innerMode(T))&&M.mode!=p;)T=M.state,p=M.mode;return M||{mode:p,state:T}}function ss(p,T,M){return!p.startState||p.startState(T,M)}var Zn=function(p,T,M){this.pos=this.start=0,this.string=p,this.tabSize=T||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=M};function Di(p,T){if((T-=p.first)<0||T>=p.size)throw new Error("There is no line "+(T+p.first)+" in the document.");for(var M=p;!M.lines;)for(var I=0;;++I){var L=M.children[I],K=L.chunkSize();if(T<K){M=L;break}T-=K}return M.lines[T]}function An(p,T,M){var I=[],L=T.line;return p.iter(T.line,M.line+1,function(K){var pt=K.text;L==M.line&&(pt=pt.slice(0,M.ch)),L==T.line&&(pt=pt.slice(T.ch)),I.push(pt),++L}),I}function sr(p,T,M){var I=[];return p.iter(T,M,function(L){I.push(L.text)}),I}function Mr(p,T){var M=T-p.height;if(M)for(var I=p;I;I=I.parent)I.height+=M}function ar(p){if(null==p.parent)return null;for(var T=p.parent,M=je(T.lines,p),I=T.parent;I;T=I,I=I.parent)for(var L=0;I.children[L]!=T;++L)M+=I.children[L].chunkSize();return M+T.first}function Sr(p,T){var M=p.first;t:do{for(var I=0;I<p.children.length;++I){var L=p.children[I],K=L.height;if(T<K){p=L;continue t}T-=K,M+=L.chunkSize()}return M}while(!p.lines);for(var pt=0;pt<p.lines.length;++pt){var Ht=p.lines[pt].height;if(T<Ht)break;T-=Ht}return M+pt}function Yr(p,T){return T>=p.first&&T<p.first+p.size}function Tr(p,T){return String(p.lineNumberFormatter(T+p.firstLineNumber))}function Ui(p,T,M){if(void 0===M&&(M=null),!(this instanceof Ui))return new Ui(p,T,M);this.line=p,this.ch=T,this.sticky=M}function On(p,T){return p.line-T.line||p.ch-T.ch}function Nn(p,T){return p.sticky==T.sticky&&0==On(p,T)}function de(p){return Ui(p.line,p.ch)}function Fe(p,T){return On(p,T)<0?T:p}function Ai(p,T){return On(p,T)<0?p:T}function ji(p,T){return Math.max(p.first,Math.min(T,p.first+p.size-1))}function Xi(p,T){if(T.line<p.first)return Ui(p.first,0);var M=p.first+p.size-1;return T.line>M?Ui(M,Di(p,M).text.length):function(p,T){var M=p.ch;return null==M||M>T?Ui(p.line,T):M<0?Ui(p.line,0):p}(T,Di(p,T.line).text.length)}function qn(p,T){for(var M=[],I=0;I<T.length;I++)M[I]=Xi(p,T[I]);return M}Zn.prototype.eol=function(){return this.pos>=this.string.length},Zn.prototype.sol=function(){return this.pos==this.lineStart},Zn.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Zn.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Zn.prototype.eat=function(p){var T=this.string.charAt(this.pos);if("string"==typeof p?T==p:T&&(p.test?p.test(T):p(T)))return++this.pos,T},Zn.prototype.eatWhile=function(p){for(var T=this.pos;this.eat(p););return this.pos>T},Zn.prototype.eatSpace=function(){for(var p=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>p},Zn.prototype.skipToEnd=function(){this.pos=this.string.length},Zn.prototype.skipTo=function(p){var T=this.string.indexOf(p,this.pos);if(T>-1)return this.pos=T,!0},Zn.prototype.backUp=function(p){this.pos-=p},Zn.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ie(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ie(this.string,this.lineStart,this.tabSize):0)},Zn.prototype.indentation=function(){return Ie(this.string,null,this.tabSize)-(this.lineStart?Ie(this.string,this.lineStart,this.tabSize):0)},Zn.prototype.match=function(p,T,M){if("string"!=typeof p){var K=this.string.slice(this.pos).match(p);return K&&K.index>0?null:(K&&!1!==T&&(this.pos+=K[0].length),K)}var I=function(pt){return M?pt.toLowerCase():pt};if(I(this.string.substr(this.pos,p.length))==I(p))return!1!==T&&(this.pos+=p.length),!0},Zn.prototype.current=function(){return this.string.slice(this.start,this.pos)},Zn.prototype.hideFirstChars=function(p,T){this.lineStart+=p;try{return T()}finally{this.lineStart-=p}},Zn.prototype.lookAhead=function(p){var T=this.lineOracle;return T&&T.lookAhead(p)},Zn.prototype.baseToken=function(){var p=this.lineOracle;return p&&p.baseToken(this.pos)};var Jn=function(p,T){this.state=p,this.lookAhead=T},Tn=function(p,T,M,I){this.state=T,this.doc=p,this.line=M,this.maxLookAhead=I||0,this.baseTokens=null,this.baseTokenPos=1};function Jo(p,T,M,I){var L=[p.state.modeGen],K={};sl(p,T.text,p.doc.mode,M,function(qt,xe){return L.push(qt,xe)},K,I);for(var pt=M.state,Rt=function(qt){M.baseTokens=L;var xe=p.state.overlays[qt],We=1,_i=0;M.state=!0,sl(p,T.text,xe.mode,M,function(hi,ki){for(var zi=We;_i<hi;){var Qi=L[We];Qi>hi&&L.splice(We,1,hi,L[We+1],Qi),We+=2,_i=Math.min(hi,Qi)}if(ki)if(xe.opaque)L.splice(zi,We-zi,hi,"overlay "+ki),We=zi+2;else for(;zi<We;zi+=2){var hn=L[zi+1];L[zi+1]=(hn?hn+" ":"")+"overlay "+ki}},K),M.state=pt,M.baseTokens=null,M.baseTokenPos=1},Ht=0;Ht<p.state.overlays.length;++Ht)Rt(Ht);return{styles:L,classes:K.bgClass||K.textClass?K:null}}function no(p,T,M){if(!T.styles||T.styles[0]!=p.state.modeGen){var I=ro(p,ar(T)),L=T.text.length>p.options.maxHighlightLength&&jr(p.doc.mode,I.state),K=Jo(p,T,I);L&&(I.state=L),T.stateAfter=I.save(!L),T.styles=K.styles,K.classes?T.styleClasses=K.classes:T.styleClasses&&(T.styleClasses=null),M===p.doc.highlightFrontier&&(p.doc.modeFrontier=Math.max(p.doc.modeFrontier,++p.doc.highlightFrontier))}return T.styles}function ro(p,T,M){var I=p.doc,L=p.display;if(!I.mode.startState)return new Tn(I,!0,T);var K=function(p,T,M){for(var I,L,K=p.doc,pt=M?-1:T-(p.doc.mode.innerMode?1e3:100),Rt=T;Rt>pt;--Rt){if(Rt<=K.first)return K.first;var Ht=Di(K,Rt-1),qt=Ht.stateAfter;if(qt&&(!M||Rt+(qt instanceof Jn?qt.lookAhead:0)<=K.modeFrontier))return Rt;var xe=Ie(Ht.text,null,p.options.tabSize);(null==L||I>xe)&&(L=Rt-1,I=xe)}return L}(p,T,M),pt=K>I.first&&Di(I,K-1).stateAfter,Rt=pt?Tn.fromSaved(I,pt,K):new Tn(I,ss(I.mode),K);return I.iter(K,T,function(Ht){vo(p,Ht.text,Rt);var qt=Rt.line;Ht.stateAfter=qt==T-1||qt%5==0||qt>=L.viewFrom&&qt<L.viewTo?Rt.save():null,Rt.nextLine()}),M&&(I.modeFrontier=Rt.line),Rt}function vo(p,T,M,I){var L=p.doc.mode,K=new Zn(T,p.options.tabSize,M);for(K.start=K.pos=I||0,""==T&&Bs(L,M.state);!K.eol();)Hs(L,K,M.state),K.start=K.pos}function Bs(p,T){if(p.blankLine)return p.blankLine(T);if(p.innerMode){var M=pr(p,T);if(M.mode.blankLine)return M.mode.blankLine(M.state)}}function Hs(p,T,M,I){for(var L=0;L<10;L++){I&&(I[0]=pr(p,M).mode);var K=p.token(T,M);if(T.pos>T.start)return K}throw new Error("Mode "+p.name+" failed to advance stream.")}Tn.prototype.lookAhead=function(p){var T=this.doc.getLine(this.line+p);return null!=T&&p>this.maxLookAhead&&(this.maxLookAhead=p),T},Tn.prototype.baseToken=function(p){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=p;)this.baseTokenPos+=2;var T=this.baseTokens[this.baseTokenPos+1];return{type:T&&T.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-p}},Tn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Tn.fromSaved=function(p,T,M){return T instanceof Jn?new Tn(p,jr(p.mode,T.state),M,T.lookAhead):new Tn(p,jr(p.mode,T),M)},Tn.prototype.save=function(p){var T=!1!==p?jr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Jn(T,this.maxLookAhead):T};var tr=function(p,T,M){this.start=p.start,this.end=p.pos,this.string=p.current(),this.type=T||null,this.state=M};function ho(p,T,M,I){var pt,xe,L=p.doc,K=L.mode,Rt=Di(L,(T=Xi(L,T)).line),Ht=ro(p,T.line,M),qt=new Zn(Rt.text,p.options.tabSize,Ht);for(I&&(xe=[]);(I||qt.pos<T.ch)&&!qt.eol();)qt.start=qt.pos,pt=Hs(K,qt,Ht.state),I&&xe.push(new tr(qt,pt,jr(L.mode,Ht.state)));return I?xe:new tr(qt,pt,Ht.state)}function Go(p,T){if(p)for(;;){var M=p.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!M)break;p=p.slice(0,M.index)+p.slice(M.index+M[0].length);var I=M[1]?"bgClass":"textClass";null==T[I]?T[I]=M[2]:new RegExp("(?:^|\\s)"+M[2]+"(?:$|\\s)").test(T[I])||(T[I]+=" "+M[2])}return p}function sl(p,T,M,I,L,K,pt){var Rt=M.flattenSpans;null==Rt&&(Rt=p.options.flattenSpans);var We,Ht=0,qt=null,xe=new Zn(T,p.options.tabSize,I),_i=p.options.addModeClass&&[null];for(""==T&&Go(Bs(M,I.state),K);!xe.eol();){if(xe.pos>p.options.maxHighlightLength?(Rt=!1,pt&&vo(p,T,I,xe.pos),xe.pos=T.length,We=null):We=Go(Hs(M,xe,I.state,_i),K),_i){var hi=_i[0].name;hi&&(We="m-"+(We?hi+" "+We:hi))}if(!Rt||qt!=We){for(;Ht<xe.start;)L(Ht=Math.min(xe.start,Ht+5e3),qt);qt=We}xe.start=xe.pos}for(;Ht<xe.pos;){var ki=Math.min(xe.pos,Ht+5e3);L(ki,qt),Ht=ki}}var Zs=!1,Cr=!1;function Ma(p,T,M){this.marker=p,this.from=T,this.to=M}function qs(p,T){if(p)for(var M=0;M<p.length;++M){var I=p[M];if(I.marker==T)return I}}function Ts(p,T){for(var M,I=0;I<p.length;++I)p[I]!=T&&(M||(M=[])).push(p[I]);return M}function ta(p,T){if(T.full)return null;var M=Yr(p,T.from.line)&&Di(p,T.from.line).markedSpans,I=Yr(p,T.to.line)&&Di(p,T.to.line).markedSpans;if(!M&&!I)return null;var L=T.from.ch,K=T.to.ch,pt=0==On(T.from,T.to),Rt=function(p,T,M){var I;if(p)for(var L=0;L<p.length;++L){var K=p[L],pt=K.marker;null!=K.from&&!(pt.inclusiveLeft?K.from<=T:K.from<T)&&(K.from!=T||"bookmark"!=pt.type||M&&K.marker.insertLeft)||(I||(I=[])).push(new Ma(pt,K.from,null==K.to||(pt.inclusiveRight?K.to>=T:K.to>T)?null:K.to))}return I}(M,L,pt),Ht=function(p,T,M){var I;if(p)for(var L=0;L<p.length;++L){var K=p[L],pt=K.marker;(null==K.to||(pt.inclusiveRight?K.to>=T:K.to>T)||K.from==T&&"bookmark"==pt.type&&(!M||K.marker.insertLeft))&&(I||(I=[])).push(new Ma(pt,null==K.from||(pt.inclusiveLeft?K.from<=T:K.from<T)?null:K.from-T,null==K.to?null:K.to-T))}return I}(I,K,pt),qt=1==T.text.length,xe=Mt(T.text).length+(qt?L:0);if(Rt)for(var We=0;We<Rt.length;++We){var _i=Rt[We];if(null==_i.to){var hi=qs(Ht,_i.marker);hi?qt&&(_i.to=null==hi.to?null:hi.to+xe):_i.to=L}}if(Ht)for(var ki=0;ki<Ht.length;++ki){var zi=Ht[ki];null!=zi.to&&(zi.to+=xe),null==zi.from?qs(Rt,zi.marker)||(zi.from=xe,qt&&(Rt||(Rt=[])).push(zi)):(zi.from+=xe,qt&&(Rt||(Rt=[])).push(zi))}Rt&&(Rt=as(Rt)),Ht&&Ht!=Rt&&(Ht=as(Ht));var hn=[Rt];if(!qt){var un,vn=T.text.length-2;if(vn>0&&Rt)for(var yn=0;yn<Rt.length;++yn)null==Rt[yn].to&&(un||(un=[])).push(new Ma(Rt[yn].marker,null,null));for(var Bn=0;Bn<vn;++Bn)hn.push(un);hn.push(Ht)}return hn}function as(p){for(var T=0;T<p.length;++T){var M=p[T];null!=M.from&&M.from==M.to&&!1!==M.marker.clearWhenEmpty&&p.splice(T--,1)}return p.length?p:null}function al(p){var T=p.markedSpans;if(T){for(var M=0;M<T.length;++M)T[M].marker.detachLine(p);p.markedSpans=null}}function Us(p,T){if(T){for(var M=0;M<T.length;++M)T[M].marker.attachLine(p);p.markedSpans=T}}function Wo(p){return p.inclusiveLeft?-1:0}function No(p){return p.inclusiveRight?1:0}function Mo(p,T){var M=p.lines.length-T.lines.length;if(0!=M)return M;var I=p.find(),L=T.find(),K=On(I.from,L.from)||Wo(p)-Wo(T);return K?-K:On(I.to,L.to)||No(p)-No(T)||T.id-p.id}function _r(p,T){var I,M=Cr&&p.markedSpans;if(M)for(var L=void 0,K=0;K<M.length;++K)(L=M[K]).marker.collapsed&&null==(T?L.from:L.to)&&(!I||Mo(I,L.marker)<0)&&(I=L.marker);return I}function ls(p){return _r(p,!0)}function Ta(p){return _r(p,!1)}function Po(p,T){var I,M=Cr&&p.markedSpans;if(M)for(var L=0;L<M.length;++L){var K=M[L];K.marker.collapsed&&(null==K.from||K.from<T)&&(null==K.to||K.to>T)&&(!I||Mo(I,K.marker)<0)&&(I=K.marker)}return I}function Vs(p,T,M,I,L){var K=Di(p,T),pt=Cr&&K.markedSpans;if(pt)for(var Rt=0;Rt<pt.length;++Rt){var Ht=pt[Rt];if(Ht.marker.collapsed){var qt=Ht.marker.find(0),xe=On(qt.from,M)||Wo(Ht.marker)-Wo(L),We=On(qt.to,I)||No(Ht.marker)-No(L);if(!(xe>=0&&We<=0||xe<=0&&We>=0)&&(xe<=0&&(Ht.marker.inclusiveRight&&L.inclusiveLeft?On(qt.to,M)>=0:On(qt.to,M)>0)||xe>=0&&(Ht.marker.inclusiveRight&&L.inclusiveLeft?On(qt.from,I)<=0:On(qt.from,I)<0)))return!0}}}function Xr(p){for(var T;T=ls(p);)p=T.find(-1,!0).line;return p}function Qr(p,T){var M=Di(p,T),I=Xr(M);return M==I?T:ar(I)}function Gs(p,T){if(T>p.lastLine())return T;var I,M=Di(p,T);if(!Ar(p,M))return T;for(;I=Ta(M);)M=I.find(1,!0).line;return ar(M)+1}function Ar(p,T){var M=Cr&&T.markedSpans;if(M)for(var I=void 0,L=0;L<M.length;++L)if((I=M[L]).marker.collapsed){if(null==I.from)return!0;if(!I.marker.widgetNode&&0==I.from&&I.marker.inclusiveLeft&&ea(p,T,I))return!0}}function ea(p,T,M){if(null==M.to){var I=M.marker.find(1,!0);return ea(p,I.line,qs(I.line.markedSpans,M.marker))}if(M.marker.inclusiveRight&&M.to==T.text.length)return!0;for(var L=void 0,K=0;K<T.markedSpans.length;++K)if((L=T.markedSpans[K]).marker.collapsed&&!L.marker.widgetNode&&L.from==M.to&&(null==L.to||L.to!=M.from)&&(L.marker.inclusiveLeft||M.marker.inclusiveRight)&&ea(p,T,L))return!0}function Hr(p){for(var T=0,M=(p=Xr(p)).parent,I=0;I<M.lines.length;++I){var L=M.lines[I];if(L==p)break;T+=L.height}for(var K=M.parent;K;K=(M=K).parent)for(var pt=0;pt<K.children.length;++pt){var Rt=K.children[pt];if(Rt==M)break;T+=Rt.height}return T}function vs(p){if(0==p.height)return 0;for(var M,T=p.text.length,I=p;M=ls(I);){var L=M.find(0,!0);I=L.from.line,T+=L.from.ch-L.to.ch}for(I=p;M=Ta(I);){var K=M.find(0,!0);T-=I.text.length-K.from.ch,T+=(I=K.to.line).text.length-K.to.ch}return T}function Na(p){var T=p.display,M=p.doc;T.maxLine=Di(M,M.first),T.maxLineLength=vs(T.maxLine),T.maxLineChanged=!0,M.iter(function(I){var L=vs(I);L>T.maxLineLength&&(T.maxLineLength=L,T.maxLine=I)})}var cs=function(p,T,M){this.text=p,Us(this,T),this.height=M?M(this):1};function us(p){p.parent=null,al(p)}cs.prototype.lineNo=function(){return ar(this)},Ei(cs);var ll={},Or={};function xn(p,T){if(!p||/^\s*$/.test(p))return null;var M=T.addModeClass?Or:ll;return M[p]||(M[p]=p.replace(/\S+/g,"cm-$&"))}function ia(p,T){var M=ot("span",null,null,s?"padding-right: .1px":null),I={pre:ot("pre",[M],"CodeMirror-line"),content:M,col:0,pos:0,cm:p,trailingSpace:!1,splitSpaces:p.getOption("lineWrapping")};T.measure={};for(var L=0;L<=(T.rest?T.rest.length:0);L++){var K=L?T.rest[L-1]:T.line,pt=void 0;I.pos=0,I.addToken=Q,Sn(p.display.measure)&&(pt=mi(K,p.doc.direction))&&(I.addToken=j(I.addToken,pt)),I.map=[],Be(K,I,no(p,K,T!=p.display.externalMeasured&&ar(K))),K.styleClasses&&(K.styleClasses.bgClass&&(I.bgClass=At(K.styleClasses.bgClass,I.bgClass||"")),K.styleClasses.textClass&&(I.textClass=At(K.styleClasses.textClass,I.textClass||""))),0==I.map.length&&I.map.push(0,0,I.content.appendChild(Vi(p.display.measure))),0==L?(T.measure.map=I.map,T.measure.cache={}):((T.measure.maps||(T.measure.maps=[])).push(I.map),(T.measure.caches||(T.measure.caches=[])).push({}))}if(s){var Ht=I.content.lastChild;(/\bcm-tab\b/.test(Ht.className)||Ht.querySelector&&Ht.querySelector(".cm-tab"))&&(I.content.className="cm-tab-wrap-hack")}return ni(p,"renderLine",p,T.line,I.pre),I.pre.className&&(I.textClass=At(I.pre.className,I.textClass||"")),I}function Lt(p){var T=ut("span","\u2022","cm-invalidchar");return T.title="\\u"+p.charCodeAt(0).toString(16),T.setAttribute("aria-label",T.title),T}function Q(p,T,M,I,L,K,pt){if(T){var xe,Rt=p.splitSpaces?function(p,T){if(p.length>1&&!/  /.test(p))return p;for(var M=T,I="",L=0;L<p.length;L++){var K=p.charAt(L);" "==K&&M&&(L==p.length-1||32==p.charCodeAt(L+1))&&(K="\xa0"),I+=K,M=" "==K}return I}(T,p.trailingSpace):T,Ht=p.cm.state.specialChars,qt=!1;if(Ht.test(T)){xe=document.createDocumentFragment();for(var We=0;;){Ht.lastIndex=We;var _i=Ht.exec(T),hi=_i?_i.index-We:T.length-We;if(hi){var ki=document.createTextNode(Rt.slice(We,We+hi));xe.appendChild(n&&r<9?ut("span",[ki]):ki),p.map.push(p.pos,p.pos+hi,ki),p.col+=hi,p.pos+=hi}if(!_i)break;We+=hi+1;var zi=void 0;if("\t"==_i[0]){var Qi=p.cm.options.tabSize,hn=Qi-p.col%Qi;(zi=xe.appendChild(ut("span",ee(hn),"cm-tab"))).setAttribute("role","presentation"),zi.setAttribute("cm-text","\t"),p.col+=hn}else"\r"==_i[0]||"\n"==_i[0]?((zi=xe.appendChild(ut("span","\r"==_i[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",_i[0]),p.col+=1):((zi=p.cm.options.specialCharPlaceholder(_i[0])).setAttribute("cm-text",_i[0]),xe.appendChild(n&&r<9?ut("span",[zi]):zi),p.col+=1);p.map.push(p.pos,p.pos+1,zi),p.pos++}}else p.col+=T.length,xe=document.createTextNode(Rt),p.map.push(p.pos,p.pos+T.length,xe),n&&r<9&&(qt=!0),p.pos+=T.length;if(p.trailingSpace=32==Rt.charCodeAt(T.length-1),M||I||L||qt||K||pt){var vn=M||"";I&&(vn+=I),L&&(vn+=L);var un=ut("span",[xe],vn,K);if(pt)for(var yn in pt)pt.hasOwnProperty(yn)&&"style"!=yn&&"class"!=yn&&un.setAttribute(yn,pt[yn]);return p.content.appendChild(un)}p.content.appendChild(xe)}}function j(p,T){return function(M,I,L,K,pt,Rt,Ht){L=L?L+" cm-force-border":"cm-force-border";for(var qt=M.pos,xe=qt+I.length;;){for(var We=void 0,_i=0;_i<T.length&&!((We=T[_i]).to>qt&&We.from<=qt);_i++);if(We.to>=xe)return p(M,I,L,K,pt,Rt,Ht);p(M,I.slice(0,We.to-qt),L,K,null,Rt,Ht),K=null,I=I.slice(We.to-qt),qt=We.to}}}function xt(p,T,M,I){var L=!I&&M.widgetNode;L&&p.map.push(p.pos,p.pos+T,L),!I&&p.cm.display.input.needsContentAttribute&&(L||(L=p.content.appendChild(document.createElement("span"))),L.setAttribute("cm-marker",M.id)),L&&(p.cm.display.input.setUneditable(L),p.content.appendChild(L)),p.pos+=T,p.trailingSpace=!1}function Be(p,T,M){var I=p.markedSpans,L=p.text,K=0;if(I)for(var We,_i,ki,zi,Qi,hn,vn,Rt=L.length,Ht=0,qt=1,xe="",hi=0;;){if(hi==Ht){ki=zi=Qi=_i="",vn=null,hn=null,hi=1/0;for(var un=[],yn=void 0,Bn=0;Bn<I.length;++Bn){var zn=I[Bn],hr=zn.marker;if("bookmark"==hr.type&&zn.from==Ht&&hr.widgetNode)un.push(hr);else if(zn.from<=Ht&&(null==zn.to||zn.to>Ht||hr.collapsed&&zn.to==Ht&&zn.from==Ht)){if(null!=zn.to&&zn.to!=Ht&&hi>zn.to&&(hi=zn.to,zi=""),hr.className&&(ki+=" "+hr.className),hr.css&&(_i=(_i?_i+";":"")+hr.css),hr.startStyle&&zn.from==Ht&&(Qi+=" "+hr.startStyle),hr.endStyle&&zn.to==hi&&(yn||(yn=[])).push(hr.endStyle,zn.to),hr.title&&((vn||(vn={})).title=hr.title),hr.attributes)for(var eo in hr.attributes)(vn||(vn={}))[eo]=hr.attributes[eo];hr.collapsed&&(!hn||Mo(hn.marker,hr)<0)&&(hn=zn)}else zn.from>Ht&&hi>zn.from&&(hi=zn.from)}if(yn)for(var ns=0;ns<yn.length;ns+=2)yn[ns+1]==hi&&(zi+=" "+yn[ns]);if(!hn||hn.from==Ht)for(var Vo=0;Vo<un.length;++Vo)xt(T,0,un[Vo]);if(hn&&(hn.from||0)==Ht){if(xt(T,(null==hn.to?Rt+1:hn.to)-Ht,hn.marker,null==hn.from),null==hn.to)return;hn.to==Ht&&(hn=!1)}}if(Ht>=Rt)break;for(var ja=Math.min(Rt,hi);;){if(xe){var Ya=Ht+xe.length;if(!hn){var Ls=Ya>ja?xe.slice(0,ja-Ht):xe;T.addToken(T,Ls,We?We+ki:ki,Qi,Ht+Ls.length==hi?zi:"",_i,vn)}if(Ya>=ja){xe=xe.slice(ja-Ht),Ht=ja;break}Ht=Ya,Qi=""}xe=L.slice(K,K=M[qt++]),We=xn(M[qt++],T.cm.options)}}else for(var pt=1;pt<M.length;pt+=2)T.addToken(T,L.slice(K,K=M[pt]),xn(M[pt+1],T.cm.options))}function Ti(p,T,M){this.line=T,this.rest=function(p){for(var T,M;T=Ta(p);)p=T.find(1,!0).line,(M||(M=[])).push(p);return M}(T),this.size=this.rest?ar(Mt(this.rest))-M+1:1,this.node=this.text=null,this.hidden=Ar(p,T)}function an(p,T,M){for(var L,I=[],K=T;K<M;K=L){var pt=new Ti(p.doc,Di(p.doc,K),K);L=K+pt.size,I.push(pt)}return I}var Vn=null;var Gr=null;function rr(p,T){var M=Bi(p,T);if(M.length){var L,I=Array.prototype.slice.call(arguments,2);Vn?L=Vn.delayedCallbacks:Gr?L=Gr:(L=Gr=[],setTimeout(Fo,0));for(var K=function(Rt){L.push(function(){return M[Rt].apply(null,I)})},pt=0;pt<M.length;++pt)K(pt)}}function Fo(){var p=Gr;Gr=null;for(var T=0;T<p.length;++T)p[T]()}function Gn(p,T,M,I){for(var L=0;L<T.changes.length;L++){var K=T.changes[L];"text"==K?Ja(p,T):"gutter"==K?Ss(p,T,M,I):"class"==K?Cs(p,T):"widget"==K&&bl(p,T,I)}T.changes=null}function Bo(p){return p.node==p.text&&(p.node=ut("div",null,null,"position: relative"),p.text.parentNode&&p.text.parentNode.replaceChild(p.node,p.text),p.node.appendChild(p.text),n&&r<8&&(p.node.style.zIndex=2)),p.node}function zo(p,T){var M=p.display.externalMeasured;return M&&M.line==T.line?(p.display.externalMeasured=null,T.measure=M.measure,M.built):ia(p,T)}function Ja(p,T){var M=T.text.className,I=zo(p,T);T.text==T.node&&(T.node=I.pre),T.text.parentNode.replaceChild(I.pre,T.text),T.text=I.pre,I.bgClass!=T.bgClass||I.textClass!=T.textClass?(T.bgClass=I.bgClass,T.textClass=I.textClass,Cs(p,T)):M&&(T.text.className=M)}function Cs(p,T){(function(p,T){var M=T.bgClass?T.bgClass+" "+(T.line.bgClass||""):T.line.bgClass;if(M&&(M+=" CodeMirror-linebackground"),T.background)M?T.background.className=M:(T.background.parentNode.removeChild(T.background),T.background=null);else if(M){var I=Bo(T);T.background=I.insertBefore(ut("div",null,M),I.firstChild),p.display.input.setUneditable(T.background)}})(p,T),T.line.wrapClass?Bo(T).className=T.line.wrapClass:T.node!=T.text&&(T.node.className=""),T.text.className=(T.textClass?T.textClass+" "+(T.line.textClass||""):T.line.textClass)||""}function Ss(p,T,M,I){if(T.gutter&&(T.node.removeChild(T.gutter),T.gutter=null),T.gutterBackground&&(T.node.removeChild(T.gutterBackground),T.gutterBackground=null),T.line.gutterClass){var L=Bo(T);T.gutterBackground=ut("div",null,"CodeMirror-gutter-background "+T.line.gutterClass,"left: "+(p.options.fixedGutter?I.fixedPos:-I.gutterTotalWidth)+"px; width: "+I.gutterTotalWidth+"px"),p.display.input.setUneditable(T.gutterBackground),L.insertBefore(T.gutterBackground,T.text)}var K=T.line.gutterMarkers;if(p.options.lineNumbers||K){var pt=Bo(T),Rt=T.gutter=ut("div",null,"CodeMirror-gutter-wrapper","left: "+(p.options.fixedGutter?I.fixedPos:-I.gutterTotalWidth)+"px");if(Rt.setAttribute("aria-hidden","true"),p.display.input.setUneditable(Rt),pt.insertBefore(Rt,T.text),T.line.gutterClass&&(Rt.className+=" "+T.line.gutterClass),p.options.lineNumbers&&(!K||!K["CodeMirror-linenumbers"])&&(T.lineNumber=Rt.appendChild(ut("div",Tr(p.options,M),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+I.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+p.display.lineNumInnerWidth+"px"))),K)for(var Ht=0;Ht<p.display.gutterSpecs.length;++Ht){var qt=p.display.gutterSpecs[Ht].className,xe=K.hasOwnProperty(qt)&&K[qt];xe&&Rt.appendChild(ut("div",[xe],"CodeMirror-gutter-elt","left: "+I.gutterLeft[qt]+"px; width: "+I.gutterWidth[qt]+"px"))}}}function bl(p,T,M){T.alignable&&(T.alignable=null);for(var I=lt("CodeMirror-linewidget"),L=T.node.firstChild,K=void 0;L;L=K)K=L.nextSibling,I.test(L.className)&&T.node.removeChild(L);Rr(p,T,M)}function Ji(p,T,M,I){var L=zo(p,T);return T.text=T.node=L.pre,L.bgClass&&(T.bgClass=L.bgClass),L.textClass&&(T.textClass=L.textClass),Cs(p,T),Ss(p,T,M,I),Rr(p,T,I),T.node}function Rr(p,T,M){if(ae(p,T.line,T,M,!0),T.rest)for(var I=0;I<T.rest.length;I++)ae(p,T.rest[I],T,M,!1)}function ae(p,T,M,I,L){if(T.widgets)for(var K=Bo(M),pt=0,Rt=T.widgets;pt<Rt.length;++pt){var Ht=Rt[pt],qt=ut("div",[Ht.node],"CodeMirror-linewidget"+(Ht.className?" "+Ht.className:""));Ht.handleMouseEvents||qt.setAttribute("cm-ignore-events","true"),z(Ht,qt,M,I),p.display.input.setUneditable(qt),L&&Ht.above?K.insertBefore(qt,M.gutter||M.text):K.appendChild(qt),rr(Ht,"redraw")}}function z(p,T,M,I){if(p.noHScroll){(M.alignable||(M.alignable=[])).push(T);var L=I.wrapperWidth;T.style.left=I.fixedPos+"px",p.coverGutter||(L-=I.gutterTotalWidth,T.style.paddingLeft=I.gutterTotalWidth+"px"),T.style.width=L+"px"}p.coverGutter&&(T.style.zIndex=5,T.style.position="relative",p.noHScroll||(T.style.marginLeft=-I.gutterTotalWidth+"px"))}function J(p){if(null!=p.height)return p.height;var T=p.doc.cm;if(!T)return 0;if(!Z(document.body,p.node)){var M="position: relative;";p.coverGutter&&(M+="margin-left: -"+T.display.gutters.offsetWidth+"px;"),p.noHScroll&&(M+="width: "+T.display.wrapper.clientWidth+"px;"),Gt(T.display.measure,ut("div",[p.node],null,M))}return p.height=p.node.parentNode.offsetHeight}function Et(p,T){for(var M=dt(T);M!=p.wrapper;M=M.parentNode)if(!M||1==M.nodeType&&"true"==M.getAttribute("cm-ignore-events")||M.parentNode==p.sizer&&M!=p.mover)return!0}function ie(p){return p.lineSpace.offsetTop}function Ee(p){return p.mover.offsetHeight-p.lineSpace.offsetHeight}function Ye(p){if(p.cachedPaddingH)return p.cachedPaddingH;var T=Gt(p.measure,ut("pre","x","CodeMirror-line-like")),M=window.getComputedStyle?window.getComputedStyle(T):T.currentStyle,I={left:parseInt(M.paddingLeft),right:parseInt(M.paddingRight)};return!isNaN(I.left)&&!isNaN(I.right)&&(p.cachedPaddingH=I),I}function $e(p){return 50-p.display.nativeBarWidth}function yi(p){return p.display.scroller.clientWidth-$e(p)-p.display.barWidth}function Hi(p){return p.display.scroller.clientHeight-$e(p)-p.display.barHeight}function fn(p,T,M){if(p.line==T)return{map:p.measure.map,cache:p.measure.cache};if(p.rest){for(var I=0;I<p.rest.length;I++)if(p.rest[I]==T)return{map:p.measure.maps[I],cache:p.measure.caches[I]};for(var L=0;L<p.rest.length;L++)if(ar(p.rest[L])>M)return{map:p.measure.maps[L],cache:p.measure.caches[L],before:!0}}}function cr(p,T,M,I){return or(p,Fn(p,T),M,I)}function Pn(p,T){if(T>=p.display.viewFrom&&T<p.display.viewTo)return p.display.view[Ms(p,T)];var M=p.display.externalMeasured;return M&&T>=M.lineN&&T<M.lineN+M.size?M:void 0}function Fn(p,T){var M=ar(T),I=Pn(p,M);I&&!I.text?I=null:I&&I.changes&&(Gn(p,I,M,da(p)),p.curOp.forceUpdate=!0),I||(I=function(p,T){var M=ar(T=Xr(T)),I=p.display.externalMeasured=new Ti(p.doc,T,M);I.lineN=M;var L=I.built=ia(p,I);return I.text=L.pre,Gt(p.display.lineMeasure,L.pre),I}(p,T));var L=fn(I,T,M);return{line:T,view:I,rect:null,map:L.map,cache:L.cache,before:L.before,hasHeights:!1}}function or(p,T,M,I,L){T.before&&(M=-1);var pt,K=M+(I||"");return T.cache.hasOwnProperty(K)?pt=T.cache[K]:(T.rect||(T.rect=T.view.text.getBoundingClientRect()),T.hasHeights||(function(p,T,M){var I=p.options.lineWrapping,L=I&&yi(p);if(!T.measure.heights||I&&T.measure.width!=L){var K=T.measure.heights=[];if(I){T.measure.width=L;for(var pt=T.text.firstChild.getClientRects(),Rt=0;Rt<pt.length-1;Rt++){var Ht=pt[Rt],qt=pt[Rt+1];Math.abs(Ht.bottom-qt.bottom)>2&&K.push((Ht.bottom+qt.top)/2-M.top)}}K.push(M.bottom-M.top)}}(p,T.view,T.rect),T.hasHeights=!0),(pt=function(p,T,M,I){var qt,L=Kr(T.map,M,I),K=L.node,pt=L.start,Rt=L.end,Ht=L.collapse;if(3==K.nodeType){for(var xe=0;xe<4;xe++){for(;pt&&be(T.line.text.charAt(L.coverStart+pt));)--pt;for(;L.coverStart+Rt<L.coverEnd&&be(T.line.text.charAt(L.coverStart+Rt));)++Rt;if((qt=n&&r<9&&0==pt&&Rt==L.coverEnd-L.coverStart?K.parentNode.getBoundingClientRect():$o(st(K,pt,Rt).getClientRects(),I)).left||qt.right||0==pt)break;Rt=pt,pt-=1,Ht="right"}n&&r<11&&(qt=function(p,T){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(p){if(null!=Pe)return Pe;var T=Gt(p,ut("span","x")),M=T.getBoundingClientRect(),I=st(T,0,1).getBoundingClientRect();return Pe=Math.abs(M.left-I.left)>1}(p))return T;var M=screen.logicalXDPI/screen.deviceXDPI,I=screen.logicalYDPI/screen.deviceYDPI;return{left:T.left*M,right:T.right*M,top:T.top*I,bottom:T.bottom*I}}(p.display.measure,qt))}else{var We;pt>0&&(Ht=I="right"),qt=p.options.lineWrapping&&(We=K.getClientRects()).length>1?We["right"==I?We.length-1:0]:K.getBoundingClientRect()}if(n&&r<9&&!pt&&(!qt||!qt.left&&!qt.right)){var _i=K.parentNode.getClientRects()[0];qt=_i?{left:_i.left,right:_i.left+bs(p.display),top:_i.top,bottom:_i.bottom}:Wr}for(var hi=qt.top-T.rect.top,ki=qt.bottom-T.rect.top,zi=(hi+ki)/2,Qi=T.view.measure.heights,hn=0;hn<Qi.length-1&&!(zi<Qi[hn]);hn++);var yn={left:("right"==Ht?qt.right:qt.left)-T.rect.left,right:("left"==Ht?qt.left:qt.right)-T.rect.left,top:hn?Qi[hn-1]:0,bottom:Qi[hn]};return!qt.left&&!qt.right&&(yn.bogus=!0),p.options.singleCursorHeightPerLine||(yn.rtop=hi,yn.rbottom=ki),yn}(p,T,M,I)).bogus||(T.cache[K]=pt)),{left:pt.left,right:pt.right,top:L?pt.rtop:pt.top,bottom:L?pt.rbottom:pt.bottom}}var Do,Wr={left:0,right:0,top:0,bottom:0};function Kr(p,T,M){for(var I,L,K,pt,Rt,Ht,qt=0;qt<p.length;qt+=3)if(Ht=p[qt+1],T<(Rt=p[qt])?(L=0,K=1,pt="left"):T<Ht?K=1+(L=T-Rt):(qt==p.length-3||T==Ht&&p[qt+3]>T)&&(L=(K=Ht-Rt)-1,T>=Ht&&(pt="right")),null!=L){if(I=p[qt+2],Rt==Ht&&M==(I.insertLeft?"left":"right")&&(pt=M),"left"==M&&0==L)for(;qt&&p[qt-2]==p[qt-3]&&p[qt-1].insertLeft;)I=p[2+(qt-=3)],pt="left";if("right"==M&&L==Ht-Rt)for(;qt<p.length-3&&p[qt+3]==p[qt+4]&&!p[qt+5].insertLeft;)I=p[(qt+=3)+2],pt="right";break}return{node:I,start:L,end:K,collapse:pt,coverStart:Rt,coverEnd:Ht}}function $o(p,T){var M=Wr;if("left"==T)for(var I=0;I<p.length&&(M=p[I]).left==M.right;I++);else for(var L=p.length-1;L>=0&&(M=p[L]).left==M.right;L--);return M}function ws(p){if(p.measure&&(p.measure.cache={},p.measure.heights=null,p.rest))for(var T=0;T<p.rest.length;T++)p.measure.caches[T]={}}function ko(p){p.display.externalMeasure=null,ht(p.display.lineMeasure);for(var T=0;T<p.display.view.length;T++)ws(p.display.view[T])}function zs(p){ko(p),p.display.cachedCharWidth=p.display.cachedTextHeight=p.display.cachedPaddingH=null,p.options.lineWrapping||(p.display.maxLineChanged=!0),p.display.lineNumChars=null}function Rs(){return v&&bt?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function na(){return v&&bt?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function $a(p){var T=0;if(p.widgets)for(var M=0;M<p.widgets.length;++M)p.widgets[M].above&&(T+=J(p.widgets[M]));return T}function oo(p,T,M,I,L){if(!L){var K=$a(T);M.top+=K,M.bottom+=K}if("line"==I)return M;I||(I="local");var pt=Hr(T);if("local"==I?pt+=ie(p.display):pt-=p.display.viewOffset,"page"==I||"window"==I){var Rt=p.display.lineSpace.getBoundingClientRect();pt+=Rt.top+("window"==I?0:na());var Ht=Rt.left+("window"==I?0:Rs());M.left+=Ht,M.right+=Ht}return M.top+=pt,M.bottom+=pt,M}function Ds(p,T,M){if("div"==M)return T;var I=T.left,L=T.top;if("page"==M)I-=Rs(),L-=na();else if("local"==M||!M){var K=p.display.sizer.getBoundingClientRect();I+=K.left,L+=K.top}var pt=p.display.lineSpace.getBoundingClientRect();return{left:I-pt.left,top:L-pt.top}}function Za(p,T,M,I,L){return I||(I=Di(p.doc,T.line)),oo(p,I,cr(p,I,T.ch,L),M)}function Zo(p,T,M,I,L,K){function pt(ki,zi){var Qi=or(p,L,ki,zi?"right":"left",K);return zi?Qi.left=Qi.right:Qi.right=Qi.left,oo(p,I,Qi,M)}I=I||Di(p.doc,T.line),L||(L=Fn(p,I));var Rt=mi(I,p.doc.direction),Ht=T.ch,qt=T.sticky;if(Ht>=I.text.length?(Ht=I.text.length,qt="before"):Ht<=0&&(Ht=0,qt="after"),!Rt)return pt("before"==qt?Ht-1:Ht,"before"==qt);function xe(ki,zi,Qi){return pt(Qi?ki-1:ki,1==Rt[zi].level!=Qi)}var We=Ri(Rt,Ht,qt),_i=Xe,hi=xe(Ht,We,"before"==qt);return null!=_i&&(hi.other=xe(Ht,_i,"before"!=qt)),hi}function Dn(p,T){var M=0;T=Xi(p.doc,T),p.options.lineWrapping||(M=bs(p.display)*T.ch);var I=Di(p.doc,T.line),L=Hr(I)+ie(p.display);return{left:M,right:M,top:L,bottom:L+I.height}}function jn(p,T,M,I,L){var K=Ui(p,T,M);return K.xRel=L,I&&(K.outside=I),K}function bn(p,T,M){var I=p.doc;if((M+=p.display.viewOffset)<0)return jn(I.first,0,null,-1,-1);var L=Sr(I,M),K=I.first+I.size-1;if(L>K)return jn(I.first+I.size-1,Di(I,K).text.length,null,1,1);T<0&&(T=0);for(var pt=Di(I,L);;){var Rt=Is(p,pt,L,T,M),Ht=Po(pt,Rt.ch+(Rt.xRel>0||Rt.outside>0?1:0));if(!Ht)return Rt;var qt=Ht.find(1);if(qt.line==L)return qt;pt=Di(I,L=qt.line)}}function ur(p,T,M,I){I-=$a(T);var L=T.text.length,K=zt(function(pt){return or(p,M,pt-1).bottom<=I},L,0);return{begin:K,end:L=zt(function(pt){return or(p,M,pt).top>I},K,L)}}function fr(p,T,M,I){return M||(M=Fn(p,T)),ur(p,T,M,oo(p,T,or(p,M,I),"line").top)}function Qo(p,T,M,I){return!(p.bottom<=M)&&(p.top>M||(I?p.left:p.right)>T)}function Is(p,T,M,I,L){L-=Hr(T);var K=Fn(p,T),pt=$a(T),Rt=0,Ht=T.text.length,qt=!0,xe=mi(T,p.doc.direction);if(xe){var We=(p.options.lineWrapping?qr:ra)(p,T,M,K,xe,I,L);Rt=(qt=1!=We.level)?We.from:We.to-1,Ht=qt?We.to:We.from-1}var zi,Qi,_i=null,hi=null,ki=zt(function(Bn){var zn=or(p,K,Bn);return zn.top+=pt,zn.bottom+=pt,!!Qo(zn,I,L,!1)&&(zn.top<=L&&zn.left<=I&&(_i=Bn,hi=zn),!0)},Rt,Ht),hn=!1;if(hi){var vn=I-hi.left<hi.right-I,un=vn==qt;ki=_i+(un?0:1),Qi=un?"after":"before",zi=vn?hi.left:hi.right}else{!qt&&(ki==Ht||ki==Rt)&&ki++,Qi=0==ki?"after":ki==T.text.length?"before":or(p,K,ki-(qt?1:0)).bottom+pt<=L==qt?"after":"before";var yn=Zo(p,Ui(M,ki,Qi),"line",T,K);zi=yn.left,hn=L<yn.top?-1:L>=yn.bottom?1:0}return jn(M,ki=Dt(T.text,ki,1),Qi,hn,I-zi)}function ra(p,T,M,I,L,K,pt){var Rt=zt(function(We){var _i=L[We],hi=1!=_i.level;return Qo(Zo(p,Ui(M,hi?_i.to:_i.from,hi?"before":"after"),"line",T,I),K,pt,!0)},0,L.length-1),Ht=L[Rt];if(Rt>0){var qt=1!=Ht.level,xe=Zo(p,Ui(M,qt?Ht.from:Ht.to,qt?"after":"before"),"line",T,I);Qo(xe,K,pt,!0)&&xe.top>pt&&(Ht=L[Rt-1])}return Ht}function qr(p,T,M,I,L,K,pt){var Rt=ur(p,T,I,pt),Ht=Rt.begin,qt=Rt.end;/\s/.test(T.text.charAt(qt-1))&&qt--;for(var xe=null,We=null,_i=0;_i<L.length;_i++){var hi=L[_i];if(!(hi.from>=qt||hi.to<=Ht)){var zi=or(p,I,1!=hi.level?Math.min(qt,hi.to)-1:Math.max(Ht,hi.from)).right,Qi=zi<K?K-zi+1e9:zi-K;(!xe||We>Qi)&&(xe=hi,We=Qi)}}return xe||(xe=L[L.length-1]),xe.from<Ht&&(xe={from:Ht,to:xe.to,level:xe.level}),xe.to>qt&&(xe={from:xe.from,to:qt,level:xe.level}),xe}function hs(p){if(null!=p.cachedTextHeight)return p.cachedTextHeight;if(null==Do){Do=ut("pre",null,"CodeMirror-line-like");for(var T=0;T<49;++T)Do.appendChild(document.createTextNode("x")),Do.appendChild(ut("br"));Do.appendChild(document.createTextNode("x"))}Gt(p.measure,Do);var M=Do.offsetHeight/50;return M>3&&(p.cachedTextHeight=M),ht(p.measure),M||1}function bs(p){if(null!=p.cachedCharWidth)return p.cachedCharWidth;var T=ut("span","xxxxxxxxxx"),M=ut("pre",[T],"CodeMirror-line-like");Gt(p.measure,M);var I=T.getBoundingClientRect(),L=(I.right-I.left)/10;return L>2&&(p.cachedCharWidth=L),L||10}function da(p){for(var T=p.display,M={},I={},L=T.gutters.clientLeft,K=T.gutters.firstChild,pt=0;K;K=K.nextSibling,++pt){var Rt=p.display.gutterSpecs[pt].className;M[Rt]=K.offsetLeft+K.clientLeft+L,I[Rt]=K.clientWidth}return{fixedPos:jo(T),gutterTotalWidth:T.gutters.offsetWidth,gutterLeft:M,gutterWidth:I,wrapperWidth:T.wrapper.clientWidth}}function jo(p){return p.scroller.getBoundingClientRect().left-p.sizer.getBoundingClientRect().left}function js(p){var T=hs(p.display),M=p.options.lineWrapping,I=M&&Math.max(5,p.display.scroller.clientWidth/bs(p.display)-3);return function(L){if(Ar(p.doc,L))return 0;var K=0;if(L.widgets)for(var pt=0;pt<L.widgets.length;pt++)L.widgets[pt].height&&(K+=L.widgets[pt].height);return M?K+(Math.ceil(L.text.length/I)||1)*T:K+T}}function kl(p){var T=p.doc,M=js(p);T.iter(function(I){var L=M(I);L!=I.height&&Mr(I,L)})}function Qa(p,T,M,I){var L=p.display;if(!M&&"true"==dt(T).getAttribute("cm-not-content"))return null;var K,pt,Rt=L.lineSpace.getBoundingClientRect();try{K=T.clientX-Rt.left,pt=T.clientY-Rt.top}catch(We){return null}var qt,Ht=bn(p,K,pt);if(I&&Ht.xRel>0&&(qt=Di(p.doc,Ht.line).text).length==Ht.ch){var xe=Ie(qt,qt.length,p.options.tabSize)-qt.length;Ht=Ui(Ht.line,Math.max(0,Math.round((K-Ye(p.display).left)/bs(p.display))-xe))}return Ht}function Ms(p,T){if(T>=p.display.viewTo||(T-=p.display.viewFrom)<0)return null;for(var M=p.display.view,I=0;I<M.length;I++)if((T-=M[I].size)<0)return I}function Ho(p,T,M,I){null==T&&(T=p.doc.first),null==M&&(M=p.doc.first+p.doc.size),I||(I=0);var L=p.display;if(I&&M<L.viewTo&&(null==L.updateLineNumbers||L.updateLineNumbers>T)&&(L.updateLineNumbers=T),p.curOp.viewChanged=!0,T>=L.viewTo)Cr&&Qr(p.doc,T)<L.viewTo&&Pa(p);else if(M<=L.viewFrom)Cr&&Gs(p.doc,M+I)>L.viewFrom?Pa(p):(L.viewFrom+=I,L.viewTo+=I);else if(T<=L.viewFrom&&M>=L.viewTo)Pa(p);else if(T<=L.viewFrom){var K=fa(p,M,M+I,1);K?(L.view=L.view.slice(K.index),L.viewFrom=K.lineN,L.viewTo+=I):Pa(p)}else if(M>=L.viewTo){var pt=fa(p,T,T,-1);pt?(L.view=L.view.slice(0,pt.index),L.viewTo=pt.lineN):Pa(p)}else{var Rt=fa(p,T,T,-1),Ht=fa(p,M,M+I,1);Rt&&Ht?(L.view=L.view.slice(0,Rt.index).concat(an(p,Rt.lineN,Ht.lineN)).concat(L.view.slice(Ht.index)),L.viewTo+=I):Pa(p)}var qt=L.externalMeasured;qt&&(M<qt.lineN?qt.lineN+=I:T<qt.lineN+qt.size&&(L.externalMeasured=null))}function pa(p,T,M){p.curOp.viewChanged=!0;var I=p.display,L=p.display.externalMeasured;if(L&&T>=L.lineN&&T<L.lineN+L.size&&(I.externalMeasured=null),!(T<I.viewFrom||T>=I.viewTo)){var K=I.view[Ms(p,T)];if(null!=K.node){var pt=K.changes||(K.changes=[]);-1==je(pt,M)&&pt.push(M)}}}function Pa(p){p.display.viewFrom=p.display.viewTo=p.doc.first,p.display.view=[],p.display.viewOffset=0}function fa(p,T,M,I){var K,L=Ms(p,T),pt=p.display.view;if(!Cr||M==p.doc.first+p.doc.size)return{index:L,lineN:M};for(var Rt=p.display.viewFrom,Ht=0;Ht<L;Ht++)Rt+=pt[Ht].size;if(Rt!=T){if(I>0){if(L==pt.length-1)return null;K=Rt+pt[L].size-T,L++}else K=Rt-T;T+=K,M+=K}for(;Qr(p.doc,M)!=M;){if(L==(I<0?0:pt.length-1))return null;M+=I*pt[L-(I<0?1:0)].size,L+=I}return{index:L,lineN:M}}function qa(p){for(var T=p.display.view,M=0,I=0;I<T.length;I++){var L=T[I];!L.hidden&&(!L.node||L.changes)&&++M}return M}function yl(p){p.display.input.showSelection(p.display.input.prepareSelection())}function Ll(p,T){void 0===T&&(T=!0);var M=p.doc,I={},L=I.cursors=document.createDocumentFragment(),K=I.selection=document.createDocumentFragment(),pt=p.options.$customCursor;pt&&(T=!0);for(var Rt=0;Rt<M.sel.ranges.length;Rt++)if(T||Rt!=M.sel.primIndex){var Ht=M.sel.ranges[Rt];if(!(Ht.from().line>=p.display.viewTo||Ht.to().line<p.display.viewFrom)){var qt=Ht.empty();if(pt){var xe=pt(p,Ht);xe&&El(p,xe,L)}else(qt||p.options.showCursorWhenSelecting)&&El(p,Ht.head,L);qt||ac(p,Ht,K)}}return I}function El(p,T,M){var I=Zo(p,T,"div",null,null,!p.options.singleCursorHeightPerLine),L=M.appendChild(ut("div","\xa0","CodeMirror-cursor"));if(L.style.left=I.left+"px",L.style.top=I.top+"px",L.style.height=Math.max(0,I.bottom-I.top)*p.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(p.getWrapperElement().className)){var K=Za(p,T,"div",null,null),pt=K.right-K.left;L.style.width=(pt>0?pt:p.defaultCharWidth())+"px"}if(I.other){var Rt=M.appendChild(ut("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));Rt.style.display="",Rt.style.left=I.other.left+"px",Rt.style.top=I.other.top+"px",Rt.style.height=.85*(I.other.bottom-I.other.top)+"px"}}function Oa(p,T){return p.top-T.top||p.left-T.left}function ac(p,T,M){var I=p.display,L=p.doc,K=document.createDocumentFragment(),pt=Ye(p.display),Rt=pt.left,Ht=Math.max(I.sizerWidth,yi(p)-I.sizer.offsetLeft)-pt.right,qt="ltr"==L.direction;function xe(un,yn,Bn,zn){yn<0&&(yn=0),yn=Math.round(yn),zn=Math.round(zn),K.appendChild(ut("div",null,"CodeMirror-selected","position: absolute; left: "+un+"px;\n                             top: "+yn+"px; width: "+(null==Bn?Ht-un:Bn)+"px;\n                             height: "+(zn-yn)+"px"))}function We(un,yn,Bn){var eo,ns,zn=Di(L,un),hr=zn.text.length;function Vo(Ls,Ur){return Za(p,Ui(un,Ls),"div",zn,Ur)}function ja(Ls,Ur,Ns){var Ps=fr(p,zn,null,Ls),S="ltr"==Ur==("after"==Ns)?"left":"right";return Vo("after"==Ns?Ps.begin:Ps.end-(/\s/.test(zn.text.charAt(Ps.end-1))?2:1),S)[S]}var Ya=mi(zn,L.direction);return function(p,T,M,I){if(!p)return I(T,M,"ltr",0);for(var L=!1,K=0;K<p.length;++K){var pt=p[K];(pt.from<M&&pt.to>T||T==M&&pt.to==T)&&(I(Math.max(pt.from,T),Math.min(pt.to,M),1==pt.level?"rtl":"ltr",K),L=!0)}L||I(T,M,"ltr")}(Ya,yn||0,null==Bn?hr:Bn,function(Ls,Ur,Ns,Ps){var S="ltr"==Ns,B=Vo(Ls,S?"left":"right"),Y=Vo(Ur-1,S?"right":"left"),rt=null==yn&&0==Ls,_t=null==Bn&&Ur==hr,Xt=0==Ps,Jt=!Ya||Ps==Ya.length-1;if(Y.top-B.top<=3){var ke=(qt?rt:_t)&&Xt?Rt:(S?B:Y).left;xe(ke,B.top,((qt?_t:rt)&&Jt?Ht:(S?Y:B).right)-ke,B.bottom)}else{var ai,gi,wi,Wi;S?(ai=qt&&rt&&Xt?Rt:B.left,gi=qt?Ht:ja(Ls,Ns,"before"),wi=qt?Rt:ja(Ur,Ns,"after"),Wi=qt&&_t&&Jt?Ht:Y.right):(ai=qt?ja(Ls,Ns,"before"):Rt,gi=!qt&&rt&&Xt?Ht:B.right,wi=!qt&&_t&&Jt?Rt:Y.left,Wi=qt?ja(Ur,Ns,"after"):Ht),xe(ai,B.top,gi-ai,B.bottom),B.bottom<Y.top&&xe(Rt,B.bottom,null,Y.top),xe(wi,Y.top,Wi-wi,Y.bottom)}(!eo||Oa(B,eo)<0)&&(eo=B),Oa(Y,eo)<0&&(eo=Y),(!ns||Oa(B,ns)<0)&&(ns=B),Oa(Y,ns)<0&&(ns=Y)}),{start:eo,end:ns}}var _i=T.from(),hi=T.to();if(_i.line==hi.line)We(_i.line,_i.ch,hi.ch);else{var ki=Di(L,_i.line),zi=Di(L,hi.line),Qi=Xr(ki)==Xr(zi),hn=We(_i.line,_i.ch,Qi?ki.text.length+1:null).end,vn=We(hi.line,Qi?0:null,hi.ch).start;Qi&&(hn.top<vn.top-2?(xe(hn.right,hn.top,null,hn.bottom),xe(Rt,vn.top,vn.left,vn.bottom)):xe(hn.right,hn.top,vn.left-hn.right,hn.bottom)),hn.bottom<vn.top&&xe(Rt,hn.bottom,null,vn.top)}M.appendChild(K)}function Nl(p){if(p.state.focused){var T=p.display;clearInterval(T.blinker);var M=!0;T.cursorDiv.style.visibility="",p.options.cursorBlinkRate>0?T.blinker=setInterval(function(){p.hasFocus()||Fa(p),T.cursorDiv.style.visibility=(M=!M)?"":"hidden"},p.options.cursorBlinkRate):p.options.cursorBlinkRate<0&&(T.cursorDiv.style.visibility="hidden")}}function lc(p){p.hasFocus()||(p.display.input.focus(),p.state.focused||Ys(p))}function ds(p){p.state.delayingBlurEvent=!0,setTimeout(function(){p.state.delayingBlurEvent&&(p.state.delayingBlurEvent=!1,p.state.focused&&Fa(p))},100)}function Ys(p,T){p.state.delayingBlurEvent&&!p.state.draggingText&&(p.state.delayingBlurEvent=!1),"nocursor"!=p.options.readOnly&&(p.state.focused||(ni(p,"focus",p,T),p.state.focused=!0,vt(p.display.wrapper,"CodeMirror-focused"),!p.curOp&&p.display.selForContextMenu!=p.doc.sel&&(p.display.input.reset(),s&&setTimeout(function(){return p.display.input.reset(!0)},20)),p.display.input.receivedFocus()),Nl(p))}function Fa(p,T){p.state.delayingBlurEvent||(p.state.focused&&(ni(p,"blur",p,T),p.state.focused=!1,ft(p.display.wrapper,"CodeMirror-focused")),clearInterval(p.display.blinker),setTimeout(function(){p.state.focused||(p.display.shift=!1)},150))}function oa(p){for(var T=p.display,M=T.lineDiv.offsetTop,I=Math.max(0,T.scroller.getBoundingClientRect().top),L=T.lineDiv.getBoundingClientRect().top,K=0,pt=0;pt<T.view.length;pt++){var Rt=T.view[pt],Ht=p.options.lineWrapping,qt=void 0,xe=0;if(!Rt.hidden){if(L+=Rt.line.height,n&&r<8){var We=Rt.node.offsetTop+Rt.node.offsetHeight;qt=We-M,M=We}else{var _i=Rt.node.getBoundingClientRect();qt=_i.bottom-_i.top,!Ht&&Rt.text.firstChild&&(xe=Rt.text.firstChild.getBoundingClientRect().right-_i.left-1)}var hi=Rt.line.height-qt;if((hi>.005||hi<-.005)&&(L<I&&(K-=hi),Mr(Rt.line,qt),Ba(Rt.line),Rt.rest))for(var ki=0;ki<Rt.rest.length;ki++)Ba(Rt.rest[ki]);if(xe>p.display.sizerWidth){var zi=Math.ceil(xe/bs(p.display));zi>p.display.maxLineLength&&(p.display.maxLineLength=zi,p.display.maxLine=Rt.line,p.display.maxLineChanged=!0)}}}Math.abs(K)>2&&(T.scroller.scrollTop+=K)}function Ba(p){if(p.widgets)for(var T=0;T<p.widgets.length;++T){var M=p.widgets[T],I=M.node.parentNode;I&&(M.height=I.offsetHeight)}}function Xl(p,T,M){var I=M&&null!=M.top?Math.max(0,M.top):p.scroller.scrollTop;I=Math.floor(I-ie(p));var L=M&&null!=M.bottom?M.bottom:I+p.wrapper.clientHeight,K=Sr(T,I),pt=Sr(T,L);if(M&&M.ensure){var Rt=M.ensure.from.line,Ht=M.ensure.to.line;Rt<K?(K=Rt,pt=Sr(T,Hr(Di(T,Rt))+p.wrapper.clientHeight)):Math.min(Ht,T.lastLine())>=pt&&(K=Sr(T,Hr(Di(T,Ht))-p.wrapper.clientHeight),pt=Ht)}return{from:K,to:Math.max(pt,K+1)}}function Kc(p,T){var M=p.display,I=hs(p.display);T.top<0&&(T.top=0);var L=p.curOp&&null!=p.curOp.scrollTop?p.curOp.scrollTop:M.scroller.scrollTop,K=Hi(p),pt={};T.bottom-T.top>K&&(T.bottom=T.top+K);var Rt=p.doc.height+Ee(M),qt=T.bottom>Rt-I;if(T.top<L)pt.scrollTop=T.top<I?0:T.top;else if(T.bottom>L+K){var xe=Math.min(T.top,(qt?Rt:T.bottom)-K);xe!=L&&(pt.scrollTop=xe)}var We=p.options.fixedGutter?0:M.gutters.offsetWidth,_i=p.curOp&&null!=p.curOp.scrollLeft?p.curOp.scrollLeft:M.scroller.scrollLeft-We,hi=yi(p)-M.gutters.offsetWidth,ki=T.right-T.left>hi;return ki&&(T.right=T.left+hi),T.left<10?pt.scrollLeft=0:T.left<_i?pt.scrollLeft=Math.max(0,T.left+We-(ki?0:10)):T.right>hi+_i-3&&(pt.scrollLeft=T.right+(ki?0:10)-hi),pt}function mt(p,T){null!=T&&(jt(p),p.curOp.scrollTop=(null==p.curOp.scrollTop?p.doc.scrollTop:p.curOp.scrollTop)+T)}function at(p){jt(p);var T=p.getCursor();p.curOp.scrollToPos={from:T,to:T,margin:p.options.cursorScrollMargin}}function et(p,T,M){(null!=T||null!=M)&&jt(p),null!=T&&(p.curOp.scrollLeft=T),null!=M&&(p.curOp.scrollTop=M)}function jt(p){var T=p.curOp.scrollToPos;T&&(p.curOp.scrollToPos=null,me(p,Dn(p,T.from),Dn(p,T.to),T.margin))}function me(p,T,M,I){var L=Kc(p,{left:Math.min(T.left,M.left),top:Math.min(T.top,M.top)-I,right:Math.max(T.right,M.right),bottom:Math.max(T.bottom,M.bottom)+I});et(p,L.scrollLeft,L.scrollTop)}function Ue(p,T){Math.abs(p.doc.scrollTop-T)<2||(y||Au(p,{top:T}),ei(p,T,!0),y&&Au(p),Ac(p,100))}function ei(p,T,M){T=Math.max(0,Math.min(p.display.scroller.scrollHeight-p.display.scroller.clientHeight,T)),(p.display.scroller.scrollTop!=T||M)&&(p.doc.scrollTop=T,p.display.scrollbars.setScrollTop(T),p.display.scroller.scrollTop!=T&&(p.display.scroller.scrollTop=T))}function xi(p,T,M,I){T=Math.max(0,Math.min(T,p.display.scroller.scrollWidth-p.display.scroller.clientWidth)),(!(M?T==p.doc.scrollLeft:Math.abs(p.doc.scrollLeft-T)<2)||I)&&(p.doc.scrollLeft=T,qo(p),p.display.scroller.scrollLeft!=T&&(p.display.scroller.scrollLeft=T),p.display.scrollbars.setScrollLeft(T))}function pn(p){var T=p.display,M=T.gutters.offsetWidth,I=Math.round(p.doc.height+Ee(p.display));return{clientHeight:T.scroller.clientHeight,viewHeight:T.wrapper.clientHeight,scrollWidth:T.scroller.scrollWidth,clientWidth:T.scroller.clientWidth,viewWidth:T.wrapper.clientWidth,barLeft:p.options.fixedGutter?M:0,docHeight:I,scrollHeight:I+$e(p)+T.barHeight,nativeBarWidth:T.nativeBarWidth,gutterWidth:M}}var lr=function(p,T,M){this.cm=M;var I=this.vert=ut("div",[ut("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),L=this.horiz=ut("div",[ut("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");I.tabIndex=L.tabIndex=-1,p(I),p(L),li(I,"scroll",function(){I.clientHeight&&T(I.scrollTop,"vertical")}),li(L,"scroll",function(){L.clientWidth&&T(L.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,n&&r<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};lr.prototype.update=function(p){var T=p.scrollWidth>p.clientWidth+1,M=p.scrollHeight>p.clientHeight+1,I=p.nativeBarWidth;return M?(this.vert.style.display="block",this.vert.style.bottom=T?I+"px":"0",this.vert.firstChild.style.height=Math.max(0,p.scrollHeight-p.clientHeight+(p.viewHeight-(T?I:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),T?(this.horiz.style.display="block",this.horiz.style.right=M?I+"px":"0",this.horiz.style.left=p.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,p.scrollWidth-p.clientWidth+(p.viewWidth-p.barLeft-(M?I:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&p.clientHeight>0&&(0==I&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:M?I:0,bottom:T?I:0}},lr.prototype.setScrollLeft=function(p){this.horiz.scrollLeft!=p&&(this.horiz.scrollLeft=p),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},lr.prototype.setScrollTop=function(p){this.vert.scrollTop!=p&&(this.vert.scrollTop=p),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},lr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=gt&&!G?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Re,this.disableVert=new Re},lr.prototype.enableZeroWidthBar=function(p,T,M){p.style.pointerEvents="auto",T.set(1e3,function I(){var L=p.getBoundingClientRect();("vert"==M?document.elementFromPoint(L.right-1,(L.top+L.bottom)/2):document.elementFromPoint((L.right+L.left)/2,L.bottom-1))!=p?p.style.pointerEvents="none":T.set(1e3,I)})},lr.prototype.clear=function(){var p=this.horiz.parentNode;p.removeChild(this.horiz),p.removeChild(this.vert)};var Hn=function(){};function kr(p,T){T||(T=pn(p));var M=p.display.barWidth,I=p.display.barHeight;so(p,T);for(var L=0;L<4&&M!=p.display.barWidth||I!=p.display.barHeight;L++)M!=p.display.barWidth&&p.options.lineWrapping&&oa(p),so(p,pn(p)),M=p.display.barWidth,I=p.display.barHeight}function so(p,T){var M=p.display,I=M.scrollbars.update(T);M.sizer.style.paddingRight=(M.barWidth=I.right)+"px",M.sizer.style.paddingBottom=(M.barHeight=I.bottom)+"px",M.heightForcer.style.borderBottom=I.bottom+"px solid transparent",I.right&&I.bottom?(M.scrollbarFiller.style.display="block",M.scrollbarFiller.style.height=I.bottom+"px",M.scrollbarFiller.style.width=I.right+"px"):M.scrollbarFiller.style.display="",I.bottom&&p.options.coverGutterNextToScrollbar&&p.options.fixedGutter?(M.gutterFiller.style.display="block",M.gutterFiller.style.height=I.bottom+"px",M.gutterFiller.style.width=T.gutterWidth+"px"):M.gutterFiller.style.display=""}Hn.prototype.update=function(){return{bottom:0,right:0}},Hn.prototype.setScrollLeft=function(){},Hn.prototype.setScrollTop=function(){},Hn.prototype.clear=function(){};var cl={native:lr,null:Hn};function Xs(p){p.display.scrollbars&&(p.display.scrollbars.clear(),p.display.scrollbars.addClass&&ft(p.display.wrapper,p.display.scrollbars.addClass)),p.display.scrollbars=new cl[p.options.scrollbarStyle](function(T){p.display.wrapper.insertBefore(T,p.display.scrollbarFiller),li(T,"mousedown",function(){p.state.focused&&setTimeout(function(){return p.display.input.focus()},0)}),T.setAttribute("cm-not-content","true")},function(T,M){"horizontal"==M?xi(p,T):Ue(p,T)},p),p.display.scrollbars.addClass&&vt(p.display.wrapper,p.display.scrollbars.addClass)}var Ca=0;function As(p){p.curOp={cm:p,viewChanged:!1,startHeight:p.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ca,markArrays:null},function(p){Vn?Vn.ops.push(p):p.ownsGroup=Vn={ops:[p],delayedCallbacks:[]}}(p.curOp)}function ys(p){var T=p.curOp;T&&function(p,T){var M=p.ownsGroup;if(M)try{!function(p){var T=p.delayedCallbacks,M=0;do{for(;M<T.length;M++)T[M].call(null);for(var I=0;I<p.ops.length;I++){var L=p.ops[I];if(L.cursorActivityHandlers)for(;L.cursorActivityCalled<L.cursorActivityHandlers.length;)L.cursorActivityHandlers[L.cursorActivityCalled++].call(null,L.cm)}}while(M<T.length)}(M)}finally{Vn=null,T(M)}}(T,function(M){for(var I=0;I<M.ops.length;I++)M.ops[I].cm.curOp=null;!function(p){for(var T=p.ops,M=0;M<T.length;M++)Tl(T[M]);for(var I=0;I<T.length;I++)ga(T[I]);for(var L=0;L<T.length;L++)hc(T[L]);for(var K=0;K<T.length;K++)ma(T[K]);for(var pt=0;pt<T.length;pt++)Jl(T[pt])}(M)})}function Tl(p){var T=p.cm,M=T.display;(function(p){var T=p.display;!T.scrollbarsClipped&&T.scroller.offsetWidth&&(T.nativeBarWidth=T.scroller.offsetWidth-T.scroller.clientWidth,T.heightForcer.style.height=$e(p)+"px",T.sizer.style.marginBottom=-T.nativeBarWidth+"px",T.sizer.style.borderRightWidth=$e(p)+"px",T.scrollbarsClipped=!0)})(T),p.updateMaxLine&&Na(T),p.mustUpdate=p.viewChanged||p.forceUpdate||null!=p.scrollTop||p.scrollToPos&&(p.scrollToPos.from.line<M.viewFrom||p.scrollToPos.to.line>=M.viewTo)||M.maxLineChanged&&T.options.lineWrapping,p.update=p.mustUpdate&&new yo(T,p.mustUpdate&&{top:p.scrollTop,ensure:p.scrollToPos},p.forceUpdate)}function ga(p){p.updatedDisplay=p.mustUpdate&&xc(p.cm,p.update)}function hc(p){var T=p.cm,M=T.display;p.updatedDisplay&&oa(T),p.barMeasure=pn(T),M.maxLineChanged&&!T.options.lineWrapping&&(p.adjustWidthTo=cr(T,M.maxLine,M.maxLine.text.length).left+3,T.display.sizerWidth=p.adjustWidthTo,p.barMeasure.scrollWidth=Math.max(M.scroller.clientWidth,M.sizer.offsetLeft+p.adjustWidthTo+$e(T)+T.display.barWidth),p.maxScrollLeft=Math.max(0,M.sizer.offsetLeft+p.adjustWidthTo-yi(T))),(p.updatedDisplay||p.selectionChanged)&&(p.preparedSelection=M.input.prepareSelection())}function ma(p){var T=p.cm;null!=p.adjustWidthTo&&(T.display.sizer.style.minWidth=p.adjustWidthTo+"px",p.maxScrollLeft<T.doc.scrollLeft&&xi(T,Math.min(T.display.scroller.scrollLeft,p.maxScrollLeft),!0),T.display.maxLineChanged=!1);var M=p.focus&&p.focus==Zt();p.preparedSelection&&T.display.input.showSelection(p.preparedSelection,M),(p.updatedDisplay||p.startHeight!=T.doc.height)&&kr(T,p.barMeasure),p.updatedDisplay&&xu(T,p.barMeasure),p.selectionChanged&&Nl(T),T.state.focused&&p.updateInput&&T.display.input.reset(p.typing),M&&lc(p.cm)}function Jl(p){var T=p.cm,M=T.display,I=T.doc;p.updatedDisplay&&$u(T,p.update),null!=M.wheelStartX&&(null!=p.scrollTop||null!=p.scrollLeft||p.scrollToPos)&&(M.wheelStartX=M.wheelStartY=null),null!=p.scrollTop&&ei(T,p.scrollTop,p.forceScroll),null!=p.scrollLeft&&xi(T,p.scrollLeft,!0,!0),p.scrollToPos&&function(p,T){if(!vi(p,"scrollCursorIntoView")){var M=p.display,I=M.sizer.getBoundingClientRect(),L=null;if(T.top+I.top<0?L=!0:T.bottom+I.top>(window.innerHeight||document.documentElement.clientHeight)&&(L=!1),null!=L&&!it){var K=ut("div","\u200b",null,"position: absolute;\n                         top: "+(T.top-M.viewOffset-ie(p.display))+"px;\n                         height: "+(T.bottom-T.top+$e(p)+M.barHeight)+"px;\n                         left: "+T.left+"px; width: "+Math.max(2,T.right-T.left)+"px;");p.display.lineSpace.appendChild(K),K.scrollIntoView(L),p.display.lineSpace.removeChild(K)}}}(T,function(p,T,M,I){var L;null==I&&(I=0),!p.options.lineWrapping&&T==M&&(M="before"==T.sticky?Ui(T.line,T.ch+1,"before"):T,T=T.ch?Ui(T.line,"before"==T.sticky?T.ch-1:T.ch,"after"):T);for(var K=0;K<5;K++){var pt=!1,Rt=Zo(p,T),Ht=M&&M!=T?Zo(p,M):Rt,qt=Kc(p,L={left:Math.min(Rt.left,Ht.left),top:Math.min(Rt.top,Ht.top)-I,right:Math.max(Rt.left,Ht.left),bottom:Math.max(Rt.bottom,Ht.bottom)+I}),xe=p.doc.scrollTop,We=p.doc.scrollLeft;if(null!=qt.scrollTop&&(Ue(p,qt.scrollTop),Math.abs(p.doc.scrollTop-xe)>1&&(pt=!0)),null!=qt.scrollLeft&&(xi(p,qt.scrollLeft),Math.abs(p.doc.scrollLeft-We)>1&&(pt=!0)),!pt)break}return L}(T,Xi(I,p.scrollToPos.from),Xi(I,p.scrollToPos.to),p.scrollToPos.margin));var K=p.maybeHiddenMarkers,pt=p.maybeUnhiddenMarkers;if(K)for(var Rt=0;Rt<K.length;++Rt)K[Rt].lines.length||ni(K[Rt],"hide");if(pt)for(var Ht=0;Ht<pt.length;++Ht)pt[Ht].lines.length&&ni(pt[Ht],"unhide");M.wrapper.offsetHeight&&(I.scrollTop=T.display.scroller.scrollTop),p.changeObjs&&ni(T,"changes",T,p.changeObjs),p.update&&p.update.finish()}function Os(p,T){if(p.curOp)return T();As(p);try{return T()}finally{ys(p)}}function bo(p,T){return function(){if(p.curOp)return T.apply(p,arguments);As(p);try{return T.apply(p,arguments)}finally{ys(p)}}}function ao(p){return function(){if(this.curOp)return p.apply(this,arguments);As(this);try{return p.apply(this,arguments)}finally{ys(this)}}}function zr(p){return function(){var T=this.cm;if(!T||T.curOp)return p.apply(this,arguments);As(T);try{return p.apply(this,arguments)}finally{ys(T)}}}function Ac(p,T){p.doc.highlightFrontier<p.display.viewTo&&p.state.highlight.set(T,ve(Jc,p))}function Jc(p){var T=p.doc;if(!(T.highlightFrontier>=p.display.viewTo)){var M=+new Date+p.options.workTime,I=ro(p,T.highlightFrontier),L=[];T.iter(I.line,Math.min(T.first+T.size,p.display.viewTo+500),function(K){if(I.line>=p.display.viewFrom){var pt=K.styles,Rt=K.text.length>p.options.maxHighlightLength?jr(T.mode,I.state):null,Ht=Jo(p,K,I,!0);Rt&&(I.state=Rt),K.styles=Ht.styles;var qt=K.styleClasses,xe=Ht.classes;xe?K.styleClasses=xe:qt&&(K.styleClasses=null);for(var We=!pt||pt.length!=K.styles.length||qt!=xe&&(!qt||!xe||qt.bgClass!=xe.bgClass||qt.textClass!=xe.textClass),_i=0;!We&&_i<pt.length;++_i)We=pt[_i]!=K.styles[_i];We&&L.push(I.line),K.stateAfter=I.save(),I.nextLine()}else K.text.length<=p.options.maxHighlightLength&&vo(p,K.text,I),K.stateAfter=I.line%5==0?I.save():null,I.nextLine();if(+new Date>M)return Ac(p,p.options.workDelay),!0}),T.highlightFrontier=I.line,T.modeFrontier=Math.max(T.modeFrontier,I.line),L.length&&Os(p,function(){for(var K=0;K<L.length;K++)pa(p,L[K],"text")})}}var yo=function(p,T,M){var I=p.display;this.viewport=T,this.visible=Xl(I,p.doc,T),this.editorIsHidden=!I.wrapper.offsetWidth,this.wrapperHeight=I.wrapper.clientHeight,this.wrapperWidth=I.wrapper.clientWidth,this.oldDisplayWidth=yi(p),this.force=M,this.dims=da(p),this.events=[]};function xc(p,T){var M=p.display,I=p.doc;if(T.editorIsHidden)return Pa(p),!1;if(!T.force&&T.visible.from>=M.viewFrom&&T.visible.to<=M.viewTo&&(null==M.updateLineNumbers||M.updateLineNumbers>=M.viewTo)&&M.renderedView==M.view&&0==qa(p))return!1;kc(p)&&(Pa(p),T.dims=da(p));var L=I.first+I.size,K=Math.max(T.visible.from-p.options.viewportMargin,I.first),pt=Math.min(L,T.visible.to+p.options.viewportMargin);M.viewFrom<K&&K-M.viewFrom<20&&(K=Math.max(I.first,M.viewFrom)),M.viewTo>pt&&M.viewTo-pt<20&&(pt=Math.min(L,M.viewTo)),Cr&&(K=Qr(p.doc,K),pt=Gs(p.doc,pt));var Rt=K!=M.viewFrom||pt!=M.viewTo||M.lastWrapHeight!=T.wrapperHeight||M.lastWrapWidth!=T.wrapperWidth;(function(p,T,M){var I=p.display;0==I.view.length||T>=I.viewTo||M<=I.viewFrom?(I.view=an(p,T,M),I.viewFrom=T):(I.viewFrom>T?I.view=an(p,T,I.viewFrom).concat(I.view):I.viewFrom<T&&(I.view=I.view.slice(Ms(p,T))),I.viewFrom=T,I.viewTo<M?I.view=I.view.concat(an(p,I.viewTo,M)):I.viewTo>M&&(I.view=I.view.slice(0,Ms(p,M)))),I.viewTo=M})(p,K,pt),M.viewOffset=Hr(Di(p.doc,M.viewFrom)),p.display.mover.style.top=M.viewOffset+"px";var Ht=qa(p);if(!Rt&&0==Ht&&!T.force&&M.renderedView==M.view&&(null==M.updateLineNumbers||M.updateLineNumbers>=M.viewTo))return!1;var qt=function(p){if(p.hasFocus())return null;var T=Zt();if(!T||!Z(p.display.lineDiv,T))return null;var M={activeElt:T};if(window.getSelection){var I=window.getSelection();I.anchorNode&&I.extend&&Z(p.display.lineDiv,I.anchorNode)&&(M.anchorNode=I.anchorNode,M.anchorOffset=I.anchorOffset,M.focusNode=I.focusNode,M.focusOffset=I.focusOffset)}return M}(p);return Ht>4&&(M.lineDiv.style.display="none"),function(p,T,M){var I=p.display,L=p.options.lineNumbers,K=I.lineDiv,pt=K.firstChild;function Rt(ki){var zi=ki.nextSibling;return s&&gt&&p.display.currentWheelTarget==ki?ki.style.display="none":ki.parentNode.removeChild(ki),zi}for(var Ht=I.view,qt=I.viewFrom,xe=0;xe<Ht.length;xe++){var We=Ht[xe];if(!We.hidden)if(We.node&&We.node.parentNode==K){for(;pt!=We.node;)pt=Rt(pt);var hi=L&&null!=T&&T<=qt&&We.lineNumber;We.changes&&(je(We.changes,"gutter")>-1&&(hi=!1),Gn(p,We,qt,M)),hi&&(ht(We.lineNumber),We.lineNumber.appendChild(document.createTextNode(Tr(p.options,qt)))),pt=We.node.nextSibling}else{var _i=Ji(p,We,qt,M);K.insertBefore(_i,pt)}qt+=We.size}for(;pt;)pt=Rt(pt)}(p,M.updateLineNumbers,T.dims),Ht>4&&(M.lineDiv.style.display=""),M.renderedView=M.view,function(p){if(p&&p.activeElt&&p.activeElt!=Zt()&&(p.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(p.activeElt.nodeName)&&p.anchorNode&&Z(document.body,p.anchorNode)&&Z(document.body,p.focusNode))){var T=window.getSelection(),M=document.createRange();M.setEnd(p.anchorNode,p.anchorOffset),M.collapse(!1),T.removeAllRanges(),T.addRange(M),T.extend(p.focusNode,p.focusOffset)}}(qt),ht(M.cursorDiv),ht(M.selectionDiv),M.gutters.style.height=M.sizer.style.minHeight=0,Rt&&(M.lastWrapHeight=T.wrapperHeight,M.lastWrapWidth=T.wrapperWidth,Ac(p,400)),M.updateLineNumbers=null,!0}function $u(p,T){for(var M=T.viewport,I=!0;;I=!1){if(I&&p.options.lineWrapping&&T.oldDisplayWidth!=yi(p))I&&(T.visible=Xl(p.display,p.doc,M));else if(M&&null!=M.top&&(M={top:Math.min(p.doc.height+Ee(p.display)-Hi(p),M.top)}),T.visible=Xl(p.display,p.doc,M),T.visible.from>=p.display.viewFrom&&T.visible.to<=p.display.viewTo)break;if(!xc(p,T))break;oa(p);var L=pn(p);yl(p),kr(p,L),xu(p,L),T.force=!1}T.signal(p,"update",p),(p.display.viewFrom!=p.display.reportedViewFrom||p.display.viewTo!=p.display.reportedViewTo)&&(T.signal(p,"viewportChange",p,p.display.viewFrom,p.display.viewTo),p.display.reportedViewFrom=p.display.viewFrom,p.display.reportedViewTo=p.display.viewTo)}function Au(p,T){var M=new yo(p,T);if(xc(p,M)){oa(p),$u(p,M);var I=pn(p);yl(p),kr(p,I),xu(p,I),M.finish()}}function $l(p){p.sizer.style.marginLeft=p.gutters.offsetWidth+"px",rr(p,"gutterChanged",p)}function xu(p,T){p.display.sizer.style.minHeight=T.docHeight+"px",p.display.heightForcer.style.top=T.docHeight+"px",p.display.gutters.style.height=T.docHeight+p.display.barHeight+$e(p)+"px"}function qo(p){var T=p.display,M=T.view;if(T.alignWidgets||T.gutters.firstChild&&p.options.fixedGutter){for(var I=jo(T)-T.scroller.scrollLeft+p.doc.scrollLeft,L=T.gutters.offsetWidth,K=I+"px",pt=0;pt<M.length;pt++)if(!M[pt].hidden){p.options.fixedGutter&&(M[pt].gutter&&(M[pt].gutter.style.left=K),M[pt].gutterBackground&&(M[pt].gutterBackground.style.left=K));var Rt=M[pt].alignable;if(Rt)for(var Ht=0;Ht<Rt.length;Ht++)Rt[Ht].style.left=K}p.options.fixedGutter&&(T.gutters.style.left=I+L+"px")}}function kc(p){if(!p.options.lineNumbers)return!1;var T=p.doc,M=Tr(p.options,T.first+T.size-1),I=p.display;if(M.length!=I.lineNumChars){var L=I.measure.appendChild(ut("div",[ut("div",M)],"CodeMirror-linenumber CodeMirror-gutter-elt")),K=L.firstChild.offsetWidth,pt=L.offsetWidth-K;return I.lineGutter.style.width="",I.lineNumInnerWidth=Math.max(K,I.lineGutter.offsetWidth-pt)+1,I.lineNumWidth=I.lineNumInnerWidth+pt,I.lineNumChars=I.lineNumInnerWidth?M.length:-1,I.lineGutter.style.width=I.lineNumWidth+"px",$l(p.display),!0}return!1}function Sa(p,T){for(var M=[],I=!1,L=0;L<p.length;L++){var K=p[L],pt=null;if("string"!=typeof K&&(pt=K.style,K=K.className),"CodeMirror-linenumbers"==K){if(!T)continue;I=!0}M.push({className:K,style:pt})}return T&&!I&&M.push({className:"CodeMirror-linenumbers",style:null}),M}function $c(p){var T=p.gutters,M=p.gutterSpecs;ht(T),p.lineGutter=null;for(var I=0;I<M.length;++I){var L=M[I],K=L.className,pt=L.style,Rt=T.appendChild(ut("div",null,"CodeMirror-gutter "+K));pt&&(Rt.style.cssText=pt),"CodeMirror-linenumbers"==K&&(p.lineGutter=Rt,Rt.style.width=(p.lineNumWidth||1)+"px")}T.style.display=M.length?"":"none",$l(p)}function Zl(p){$c(p.display),Ho(p),qo(p)}function fo(p,T,M,I){var L=this;this.input=M,L.scrollbarFiller=ut("div",null,"CodeMirror-scrollbar-filler"),L.scrollbarFiller.setAttribute("cm-not-content","true"),L.gutterFiller=ut("div",null,"CodeMirror-gutter-filler"),L.gutterFiller.setAttribute("cm-not-content","true"),L.lineDiv=ot("div",null,"CodeMirror-code"),L.selectionDiv=ut("div",null,null,"position: relative; z-index: 1"),L.cursorDiv=ut("div",null,"CodeMirror-cursors"),L.measure=ut("div",null,"CodeMirror-measure"),L.lineMeasure=ut("div",null,"CodeMirror-measure"),L.lineSpace=ot("div",[L.measure,L.lineMeasure,L.selectionDiv,L.cursorDiv,L.lineDiv],null,"position: relative; outline: none");var K=ot("div",[L.lineSpace],"CodeMirror-lines");L.mover=ut("div",[K],null,"position: relative"),L.sizer=ut("div",[L.mover],"CodeMirror-sizer"),L.sizerWidth=null,L.heightForcer=ut("div",null,null,"position: absolute; height: 50px; width: 1px;"),L.gutters=ut("div",null,"CodeMirror-gutters"),L.lineGutter=null,L.scroller=ut("div",[L.sizer,L.heightForcer,L.gutters],"CodeMirror-scroll"),L.scroller.setAttribute("tabIndex","-1"),L.wrapper=ut("div",[L.scrollbarFiller,L.gutterFiller,L.scroller],"CodeMirror"),L.wrapper.setAttribute("translate","no"),n&&r<8&&(L.gutters.style.zIndex=-1,L.scroller.style.paddingRight=0),!s&&!(y&&Ft)&&(L.scroller.draggable=!0),p&&(p.appendChild?p.appendChild(L.wrapper):p(L.wrapper)),L.viewFrom=L.viewTo=T.first,L.reportedViewFrom=L.reportedViewTo=T.first,L.view=[],L.renderedView=null,L.externalMeasured=null,L.viewOffset=0,L.lastWrapHeight=L.lastWrapWidth=0,L.updateLineNumbers=null,L.nativeBarWidth=L.barHeight=L.barWidth=0,L.scrollbarsClipped=!1,L.lineNumWidth=L.lineNumInnerWidth=L.lineNumChars=null,L.alignWidgets=!1,L.cachedCharWidth=L.cachedTextHeight=L.cachedPaddingH=null,L.maxLine=null,L.maxLineLength=0,L.maxLineChanged=!1,L.wheelDX=L.wheelDY=L.wheelStartX=L.wheelStartY=null,L.shift=!1,L.selForContextMenu=null,L.activeTouch=null,L.gutterSpecs=Sa(I.gutters,I.lineNumbers),$c(L),M.init(L)}yo.prototype.signal=function(p,T){Qe(p,T)&&this.events.push(arguments)},yo.prototype.finish=function(){for(var p=0;p<this.events.length;p++)ni.apply(null,this.events[p])};var wa=0,xa=null;function _a(p){var T=p.wheelDeltaX,M=p.wheelDeltaY;return null==T&&p.detail&&p.axis==p.HORIZONTAL_AXIS&&(T=p.detail),null==M&&p.detail&&p.axis==p.VERTICAL_AXIS?M=p.detail:null==M&&(M=p.wheelDelta),{x:T,y:M}}function Zc(p){var T=_a(p);return T.x*=xa,T.y*=xa,T}function Qc(p,T){var M=_a(T),I=M.x,L=M.y,K=xa;0===T.deltaMode&&(I=T.deltaX,L=T.deltaY,K=1);var pt=p.display,Rt=pt.scroller,qt=Rt.scrollHeight>Rt.clientHeight;if(I&&Rt.scrollWidth>Rt.clientWidth||L&&qt){if(L&&gt&&s)t:for(var xe=T.target,We=pt.view;xe!=Rt;xe=xe.parentNode)for(var _i=0;_i<We.length;_i++)if(We[_i].node==xe){p.display.currentWheelTarget=xe;break t}if(I&&!y&&!D&&null!=K)return L&&qt&&Ue(p,Math.max(0,Rt.scrollTop+L*K)),xi(p,Math.max(0,Rt.scrollLeft+I*K)),(!L||L&&qt)&&Pi(T),void(pt.wheelStartX=null);if(L&&null!=K){var hi=L*K,ki=p.doc.scrollTop,zi=ki+pt.wrapper.clientHeight;hi<0?ki=Math.max(0,ki+hi-50):zi=Math.min(p.doc.height,zi+hi+50),Au(p,{top:ki,bottom:zi})}wa<20&&0!==T.deltaMode&&(null==pt.wheelStartX?(pt.wheelStartX=Rt.scrollLeft,pt.wheelStartY=Rt.scrollTop,pt.wheelDX=I,pt.wheelDY=L,setTimeout(function(){if(null!=pt.wheelStartX){var Qi=Rt.scrollLeft-pt.wheelStartX,hn=Rt.scrollTop-pt.wheelStartY,vn=hn&&pt.wheelDY&&hn/pt.wheelDY||Qi&&pt.wheelDX&&Qi/pt.wheelDX;pt.wheelStartX=pt.wheelStartY=null,vn&&(xa=(xa*wa+vn)/(wa+1),++wa)}},200)):(pt.wheelDX+=I,pt.wheelDY+=L))}}n?xa=-.53:y?xa=15:v?xa=-.7:P&&(xa=-1/3);var ka=function(p,T){this.ranges=p,this.primIndex=T};ka.prototype.primary=function(){return this.ranges[this.primIndex]},ka.prototype.equals=function(p){if(p==this)return!0;if(p.primIndex!=this.primIndex||p.ranges.length!=this.ranges.length)return!1;for(var T=0;T<this.ranges.length;T++){var M=this.ranges[T],I=p.ranges[T];if(!Nn(M.anchor,I.anchor)||!Nn(M.head,I.head))return!1}return!0},ka.prototype.deepCopy=function(){for(var p=[],T=0;T<this.ranges.length;T++)p[T]=new Lr(de(this.ranges[T].anchor),de(this.ranges[T].head));return new ka(p,this.primIndex)},ka.prototype.somethingSelected=function(){for(var p=0;p<this.ranges.length;p++)if(!this.ranges[p].empty())return!0;return!1},ka.prototype.contains=function(p,T){T||(T=p);for(var M=0;M<this.ranges.length;M++){var I=this.ranges[M];if(On(T,I.from())>=0&&On(p,I.to())<=0)return M}return-1};var Lr=function(p,T){this.anchor=p,this.head=T};function Ha(p,T,M){var I=p&&p.options.selectionsMayTouch,L=T[M];T.sort(function(_i,hi){return On(_i.from(),hi.from())}),M=je(T,L);for(var K=1;K<T.length;K++){var pt=T[K],Rt=T[K-1],Ht=On(Rt.to(),pt.from());if(I&&!pt.empty()?Ht>0:Ht>=0){var qt=Ai(Rt.from(),pt.from()),xe=Fe(Rt.to(),pt.to()),We=Rt.empty()?pt.from()==pt.head:Rt.from()==Rt.head;K<=M&&--M,T.splice(--K,2,new Lr(We?xe:qt,We?qt:xe))}}return new ka(T,M)}function dc(p,T){return new ka([new Lr(p,T||p)],0)}function Pl(p){return p.text?Ui(p.from.line+p.text.length-1,Mt(p.text).length+(1==p.text.length?p.from.ch:0)):p.to}function Yo(p,T){if(On(p,T.from)<0)return p;if(On(p,T.to)<=0)return Pl(T);var M=p.line+T.text.length-(T.to.line-T.from.line)-1,I=p.ch;return p.line==T.to.line&&(I+=Pl(T).ch-T.to.ch),Ui(M,I)}function qc(p,T){for(var M=[],I=0;I<p.sel.ranges.length;I++){var L=p.sel.ranges[I];M.push(new Lr(Yo(L.anchor,T),Yo(L.head,T)))}return Ha(p.cm,M,p.sel.primIndex)}function pc(p,T,M){return p.line==T.line?Ui(M.line,p.ch-T.ch+M.ch):Ui(M.line+(p.line-T.line),p.ch)}function ul(p){p.doc.mode=io(p.options,p.doc.modeOption),Cl(p)}function Cl(p){p.doc.iter(function(T){T.stateAfter&&(T.stateAfter=null),T.styles&&(T.styles=null)}),p.doc.modeFrontier=p.doc.highlightFrontier=p.doc.first,Ac(p,100),p.state.modeGen++,p.curOp&&Ho(p)}function tu(p,T){return 0==T.from.ch&&0==T.to.ch&&""==Mt(T.text)&&(!p.cm||p.cm.options.wholeLineUpdateBefore)}function xs(p,T,M,I){function L(vn){return M?M[vn]:null}function K(vn,un,yn){(function(p,T,M,I){p.text=T,p.stateAfter&&(p.stateAfter=null),p.styles&&(p.styles=null),null!=p.order&&(p.order=null),al(p),Us(p,M);var L=I?I(p):1;L!=p.height&&Mr(p,L)})(vn,un,yn,I),rr(vn,"change",vn,T)}function pt(vn,un){for(var yn=[],Bn=vn;Bn<un;++Bn)yn.push(new cs(qt[Bn],L(Bn),I));return yn}var Rt=T.from,Ht=T.to,qt=T.text,xe=Di(p,Rt.line),We=Di(p,Ht.line),_i=Mt(qt),hi=L(qt.length-1),ki=Ht.line-Rt.line;if(T.full)p.insert(0,pt(0,qt.length)),p.remove(qt.length,p.size-qt.length);else if(tu(p,T)){var zi=pt(0,qt.length-1);K(We,We.text,hi),ki&&p.remove(Rt.line,ki),zi.length&&p.insert(Rt.line,zi)}else if(xe==We)if(1==qt.length)K(xe,xe.text.slice(0,Rt.ch)+_i+xe.text.slice(Ht.ch),hi);else{var Qi=pt(1,qt.length-1);Qi.push(new cs(_i+xe.text.slice(Ht.ch),hi,I)),K(xe,xe.text.slice(0,Rt.ch)+qt[0],L(0)),p.insert(Rt.line+1,Qi)}else if(1==qt.length)K(xe,xe.text.slice(0,Rt.ch)+qt[0]+We.text.slice(Ht.ch),L(0)),p.remove(Rt.line+1,ki);else{K(xe,xe.text.slice(0,Rt.ch)+qt[0],L(0)),K(We,_i+We.text.slice(Ht.ch),hi);var hn=pt(1,qt.length-1);ki>1&&p.remove(Rt.line+1,ki-1),p.insert(Rt.line+1,hn)}rr(p,"change",p,T)}function hl(p,T,M){!function I(L,K,pt){if(L.linked)for(var Rt=0;Rt<L.linked.length;++Rt){var Ht=L.linked[Rt];if(Ht.doc!=K){var qt=pt&&Ht.sharedHist;M&&!qt||(T(Ht.doc,qt),I(Ht.doc,L,qt))}}}(p,null,!0)}function Er(p,T){if(T.cm)throw new Error("This document is already in use.");p.doc=T,T.cm=p,kl(p),ul(p),eu(p),p.options.direction=T.direction,p.options.lineWrapping||Na(p),p.options.mode=T.modeOption,Ho(p)}function eu(p){("rtl"==p.doc.direction?vt:ft)(p.display.lineDiv,"CodeMirror-rtl")}function fc(p){this.done=[],this.undone=[],this.undoDepth=p?p.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=p?p.maxGeneration:1}function Ra(p,T){var M={from:de(T.from),to:Pl(T),text:An(p,T.from,T.to)};return mc(p,M,T.from.line,T.to.line+1),hl(p,function(I){return mc(I,M,T.from.line,T.to.line+1)},!0),M}function ql(p){for(;p.length&&Mt(p).ranges;)p.pop()}function Eo(p,T,M,I){var L=p.history;L.undone.length=0;var pt,Rt,K=+new Date;if((L.lastOp==I||L.lastOrigin==T.origin&&T.origin&&("+"==T.origin.charAt(0)&&L.lastModTime>K-(p.cm?p.cm.options.historyEventDelay:500)||"*"==T.origin.charAt(0)))&&(pt=function(p,T){return T?(ql(p.done),Mt(p.done)):p.done.length&&!Mt(p.done).ranges?Mt(p.done):p.done.length>1&&!p.done[p.done.length-2].ranges?(p.done.pop(),Mt(p.done)):void 0}(L,L.lastOp==I)))Rt=Mt(pt.changes),0==On(T.from,T.to)&&0==On(T.from,Rt.to)?Rt.to=Pl(T):pt.changes.push(Ra(p,T));else{var Ht=Mt(L.done);for((!Ht||!Ht.ranges)&&_u(p.sel,L.done),pt={changes:[Ra(p,T)],generation:L.generation},L.done.push(pt);L.done.length>L.undoDepth;)L.done.shift(),L.done[0].ranges||L.done.shift()}L.done.push(M),L.generation=++L.maxGeneration,L.lastModTime=L.lastSelTime=K,L.lastOp=L.lastSelOp=I,L.lastOrigin=L.lastSelOrigin=T.origin,Rt||ni(p,"historyAdded")}function gc(p,T,M,I){var L=p.history,K=I&&I.origin;M==L.lastSelOp||K&&L.lastSelOrigin==K&&(L.lastModTime==L.lastSelTime&&L.lastOrigin==K||function(p,T,M,I){var L=T.charAt(0);return"*"==L||"+"==L&&M.ranges.length==I.ranges.length&&M.somethingSelected()==I.somethingSelected()&&new Date-p.history.lastSelTime<=(p.cm?p.cm.options.historyEventDelay:500)}(p,K,Mt(L.done),T))?L.done[L.done.length-1]=T:_u(T,L.done),L.lastSelTime=+new Date,L.lastSelOrigin=K,L.lastSelOp=M,I&&!1!==I.clearRedo&&ql(L.undone)}function _u(p,T){var M=Mt(T);M&&M.ranges&&M.equals(p)||T.push(p)}function mc(p,T,M,I){var L=T["spans_"+p.id],K=0;p.iter(Math.max(p.first,M),Math.min(p.first+p.size,I),function(pt){pt.markedSpans&&((L||(L=T["spans_"+p.id]={}))[K]=pt.markedSpans),++K})}function Ua(p){if(!p)return null;for(var T,M=0;M<p.length;++M)p[M].marker.explicitlyCleared?T||(T=p.slice(0,M)):T&&T.push(p[M]);return T?T.length?T:null:p}function iu(p,T){var M=function(p,T){var M=T["spans_"+p.id];if(!M)return null;for(var I=[],L=0;L<T.text.length;++L)I.push(Ua(M[L]));return I}(p,T),I=ta(p,T);if(!M)return I;if(!I)return M;for(var L=0;L<M.length;++L){var K=M[L],pt=I[L];if(K&&pt)t:for(var Rt=0;Rt<pt.length;++Rt){for(var Ht=pt[Rt],qt=0;qt<K.length;++qt)if(K[qt].marker==Ht.marker)continue t;K.push(Ht)}else pt&&(M[L]=pt)}return M}function Sl(p,T,M){for(var I=[],L=0;L<p.length;++L){var K=p[L];if(K.ranges)I.push(M?ka.prototype.deepCopy.call(K):K);else{var pt=K.changes,Rt=[];I.push({changes:Rt});for(var Ht=0;Ht<pt.length;++Ht){var qt=pt[Ht],xe=void 0;if(Rt.push({from:qt.from,to:qt.to,text:qt.text}),T)for(var We in qt)(xe=We.match(/^spans_(\d+)$/))&&je(T,Number(xe[1]))>-1&&(Mt(Rt)[We]=qt[We],delete qt[We])}}}return I}function Uo(p,T,M,I){if(I){var L=p.anchor;if(M){var K=On(T,L)<0;K!=On(M,L)<0?(L=T,T=M):K!=On(T,M)<0&&(T=M)}return new Lr(L,T)}return new Lr(M||T,T)}function wl(p,T,M,I,L){null==L&&(L=p.cm&&(p.cm.display.shift||p.extend)),la(p,new ka([Uo(p.sel.primary(),T,M,L)],0),I)}function Fl(p,T,M){for(var I=[],L=p.cm&&(p.cm.display.shift||p.extend),K=0;K<p.sel.ranges.length;K++)I[K]=Uo(p.sel.ranges[K],T[K],null,L);la(p,Ha(p.cm,I,p.sel.primIndex),M)}function tc(p,T,M,I){var L=p.sel.ranges.slice(0);L[T]=M,la(p,Ha(p.cm,L,p.sel.primIndex),I)}function dl(p,T,M,I){la(p,dc(T,M),I)}function vu(p,T,M){var I=p.history.done,L=Mt(I);L&&L.ranges?(I[I.length-1]=T,Bl(p,T,M)):la(p,T,M)}function la(p,T,M){Bl(p,T,M),gc(p,p.sel,p.cm?p.cm.curOp.id:NaN,M)}function Bl(p,T,M){(Qe(p,"beforeSelectionChange")||p.cm&&Qe(p.cm,"beforeSelectionChange"))&&(T=function(p,T,M){var I={ranges:T.ranges,update:function(L){this.ranges=[];for(var K=0;K<L.length;K++)this.ranges[K]=new Lr(Xi(p,L[K].anchor),Xi(p,L[K].head))},origin:M&&M.origin};return ni(p,"beforeSelectionChange",p,I),p.cm&&ni(p.cm,"beforeSelectionChange",p.cm,I),I.ranges!=T.ranges?Ha(p.cm,I.ranges,I.ranges.length-1):T}(p,T,M));var I=M&&M.bias||(On(T.primary().head,p.sel.primary().head)<0?-1:1);ec(p,Va(p,T,I,!0)),(!M||!1!==M.scroll)&&p.cm&&"nocursor"!=p.cm.getOption("readOnly")&&at(p.cm)}function ec(p,T){T.equals(p.sel)||(p.sel=T,p.cm&&(p.cm.curOp.updateInput=1,p.cm.curOp.selectionChanged=!0,Ce(p.cm)),rr(p,"cursorActivity",p))}function tl(p){ec(p,Va(p,p.sel,null,!1))}function Va(p,T,M,I){for(var L,K=0;K<T.ranges.length;K++){var pt=T.ranges[K],Rt=T.ranges.length==p.sel.ranges.length&&p.sel.ranges[K],Ht=_c(p,pt.anchor,Rt&&Rt.anchor,M,I),qt=_c(p,pt.head,Rt&&Rt.head,M,I);(L||Ht!=pt.anchor||qt!=pt.head)&&(L||(L=T.ranges.slice(0,K)),L[K]=new Lr(Ht,qt))}return L?Ha(p.cm,L,T.primIndex):T}function Hl(p,T,M,I,L){var K=Di(p,T.line);if(K.markedSpans)for(var pt=0;pt<K.markedSpans.length;++pt){var Rt=K.markedSpans[pt],Ht=Rt.marker,qt="selectLeft"in Ht?!Ht.selectLeft:Ht.inclusiveLeft,xe="selectRight"in Ht?!Ht.selectRight:Ht.inclusiveRight;if((null==Rt.from||(qt?Rt.from<=T.ch:Rt.from<T.ch))&&(null==Rt.to||(xe?Rt.to>=T.ch:Rt.to>T.ch))){if(L&&(ni(Ht,"beforeCursorEnter"),Ht.explicitlyCleared)){if(K.markedSpans){--pt;continue}break}if(!Ht.atomic)continue;if(M){var We=Ht.find(I<0?1:-1),_i=void 0;if((I<0?xe:qt)&&(We=vc(p,We,-I,We&&We.line==T.line?K:null)),We&&We.line==T.line&&(_i=On(We,M))&&(I<0?_i<0:_i>0))return Hl(p,We,T,I,L)}var hi=Ht.find(I<0?-1:1);return(I<0?qt:xe)&&(hi=vc(p,hi,I,hi.line==T.line?K:null)),hi?Hl(p,hi,T,I,L):null}}return T}function _c(p,T,M,I,L){var K=I||1;return Hl(p,T,M,K,L)||!L&&Hl(p,T,M,K,!0)||Hl(p,T,M,-K,L)||!L&&Hl(p,T,M,-K,!0)||(p.cantEdit=!0,Ui(p.first,0))}function vc(p,T,M,I){return M<0&&0==T.ch?T.line>p.first?Xi(p,Ui(T.line-1)):null:M>0&&T.ch==(I||Di(p,T.line)).text.length?T.line<p.first+p.size-1?Ui(T.line+1,0):null:new Ui(T.line,T.ch+M)}function Lc(p){p.setSelection(Ui(p.firstLine(),0),Ui(p.lastLine()),we)}function Ga(p,T,M){var I={canceled:!1,from:T.from,to:T.to,text:T.text,origin:T.origin,cancel:function(){return I.canceled=!0}};return M&&(I.update=function(L,K,pt,Rt){L&&(I.from=Xi(p,L)),K&&(I.to=Xi(p,K)),pt&&(I.text=pt),void 0!==Rt&&(I.origin=Rt)}),ni(p,"beforeChange",p,I),p.cm&&ni(p.cm,"beforeChange",p.cm,I),I.canceled?(p.cm&&(p.cm.curOp.updateInput=2),null):{from:I.from,to:I.to,text:I.text,origin:I.origin}}function Nc(p,T,M){if(p.cm){if(!p.cm.curOp)return bo(p.cm,Nc)(p,T,M);if(p.cm.state.suppressEdits)return}if(!(Qe(p,"beforeChange")||p.cm&&Qe(p.cm,"beforeChange"))||(T=Ga(p,T,!0))){var I=Zs&&!M&&function(p,T,M){var I=null;if(p.iter(T.line,M.line+1,function(hi){if(hi.markedSpans)for(var ki=0;ki<hi.markedSpans.length;++ki){var zi=hi.markedSpans[ki].marker;zi.readOnly&&(!I||-1==je(I,zi))&&(I||(I=[])).push(zi)}}),!I)return null;for(var L=[{from:T,to:M}],K=0;K<I.length;++K)for(var pt=I[K],Rt=pt.find(0),Ht=0;Ht<L.length;++Ht){var qt=L[Ht];if(!(On(qt.to,Rt.from)<0||On(qt.from,Rt.to)>0)){var xe=[Ht,1],We=On(qt.from,Rt.from),_i=On(qt.to,Rt.to);(We<0||!pt.inclusiveLeft&&!We)&&xe.push({from:qt.from,to:Rt.from}),(_i>0||!pt.inclusiveRight&&!_i)&&xe.push({from:Rt.to,to:qt.to}),L.splice.apply(L,xe),Ht+=xe.length-3}}return L}(p,T.from,T.to);if(I)for(var L=I.length-1;L>=0;--L)lo(p,{from:I[L].from,to:I[L].to,text:L?[""]:T.text,origin:T.origin});else lo(p,T)}}function lo(p,T){if(1!=T.text.length||""!=T.text[0]||0!=On(T.from,T.to)){var M=qc(p,T);Eo(p,T,M,p.cm?p.cm.curOp.id:NaN),bc(p,T,M,ta(p,T));var I=[];hl(p,function(L,K){!K&&-1==je(I,L.history)&&(ru(L.history,T),I.push(L.history)),bc(L,T,null,ta(L,T))})}}function Ul(p,T,M){var I=p.cm&&p.cm.state.suppressEdits;if(!I||M){for(var K,L=p.history,pt=p.sel,Rt="undo"==T?L.done:L.undone,Ht="undo"==T?L.undone:L.done,qt=0;qt<Rt.length&&(K=Rt[qt],!(M?K.ranges&&!K.equals(p.sel):!K.ranges));qt++);if(qt!=Rt.length){for(L.lastOrigin=L.lastSelOrigin=null;;){if(!(K=Rt.pop()).ranges){if(I)return void Rt.push(K);break}if(_u(K,Ht),M&&!K.equals(p.sel))return void la(p,K,{clearRedo:!1});pt=K}var xe=[];_u(pt,Ht),Ht.push({changes:xe,generation:L.generation}),L.generation=K.generation||++L.maxGeneration;for(var We=Qe(p,"beforeChange")||p.cm&&Qe(p.cm,"beforeChange"),_i=function(zi){var Qi=K.changes[zi];if(Qi.origin=T,We&&!Ga(p,Qi,!1))return Rt.length=0,{};xe.push(Ra(p,Qi));var hn=zi?qc(p,Qi):Mt(Rt);bc(p,Qi,hn,iu(p,Qi)),!zi&&p.cm&&p.cm.scrollIntoView({from:Qi.from,to:Pl(Qi)});var vn=[];hl(p,function(un,yn){!yn&&-1==je(vn,un.history)&&(ru(un.history,Qi),vn.push(un.history)),bc(un,Qi,null,iu(un,Qi))})},hi=K.changes.length-1;hi>=0;--hi){var ki=_i(hi);if(ki)return ki.v}}}}function ic(p,T){if(0!=T&&(p.first+=T,p.sel=new ka(Yt(p.sel.ranges,function(L){return new Lr(Ui(L.anchor.line+T,L.anchor.ch),Ui(L.head.line+T,L.head.ch))}),p.sel.primIndex),p.cm)){Ho(p.cm,p.first,p.first-T,T);for(var M=p.cm.display,I=M.viewFrom;I<M.viewTo;I++)pa(p.cm,I,"gutter")}}function bc(p,T,M,I){if(p.cm&&!p.cm.curOp)return bo(p.cm,bc)(p,T,M,I);if(T.to.line<p.first)ic(p,T.text.length-1-(T.to.line-T.from.line));else if(!(T.from.line>p.lastLine())){if(T.from.line<p.first){var L=T.text.length-1-(p.first-T.from.line);ic(p,L),T={from:Ui(p.first,0),to:Ui(T.to.line+L,T.to.ch),text:[Mt(T.text)],origin:T.origin}}var K=p.lastLine();T.to.line>K&&(T={from:T.from,to:Ui(K,Di(p,K).text.length),text:[T.text[0]],origin:T.origin}),T.removed=An(p,T.from,T.to),M||(M=qc(p,T)),p.cm?function(p,T,M){var I=p.doc,L=p.display,K=T.from,pt=T.to,Rt=!1,Ht=K.line;p.options.lineWrapping||(Ht=ar(Xr(Di(I,K.line))),I.iter(Ht,pt.line+1,function(hi){if(hi==L.maxLine)return Rt=!0,!0})),I.sel.contains(T.from,T.to)>-1&&Ce(p),xs(I,T,M,js(p)),p.options.lineWrapping||(I.iter(Ht,K.line+T.text.length,function(hi){var ki=vs(hi);ki>L.maxLineLength&&(L.maxLine=hi,L.maxLineLength=ki,L.maxLineChanged=!0,Rt=!1)}),Rt&&(p.curOp.updateMaxLine=!0)),function(p,T){if(p.modeFrontier=Math.min(p.modeFrontier,T),!(p.highlightFrontier<T-10)){for(var M=p.first,I=T-1;I>M;I--){var L=Di(p,I).stateAfter;if(L&&(!(L instanceof Jn)||I+L.lookAhead<T)){M=I+1;break}}p.highlightFrontier=Math.min(p.highlightFrontier,M)}}(I,K.line),Ac(p,400);var qt=T.text.length-(pt.line-K.line)-1;T.full?Ho(p):K.line!=pt.line||1!=T.text.length||tu(p.doc,T)?Ho(p,K.line,pt.line+1,qt):pa(p,K.line,"text");var xe=Qe(p,"changes"),We=Qe(p,"change");if(We||xe){var _i={from:K,to:pt,text:T.text,removed:T.removed,origin:T.origin};We&&rr(p,"change",p,_i),xe&&(p.curOp.changeObjs||(p.curOp.changeObjs=[])).push(_i)}p.display.selForContextMenu=null}(p.cm,T,I):xs(p,T,I),Bl(p,M,we),p.cantEdit&&_c(p,Ui(p.firstLine(),0))&&(p.cantEdit=!1)}}function Vl(p,T,M,I,L){var K;I||(I=M),On(I,M)<0&&(M=(K=[I,M])[0],I=K[1]),"string"==typeof T&&(T=p.splitLines(T)),Nc(p,{from:M,to:I,text:T,origin:L})}function ku(p,T,M,I){M<p.line?p.line+=I:T<p.line&&(p.line=T,p.ch=0)}function Gl(p,T,M,I){for(var L=0;L<p.length;++L){var K=p[L],pt=!0;if(K.ranges){K.copied||((K=p[L]=K.deepCopy()).copied=!0);for(var Rt=0;Rt<K.ranges.length;Rt++)ku(K.ranges[Rt].anchor,T,M,I),ku(K.ranges[Rt].head,T,M,I)}else{for(var Ht=0;Ht<K.changes.length;++Ht){var qt=K.changes[Ht];if(M<qt.from.line)qt.from=Ui(qt.from.line+I,qt.from.ch),qt.to=Ui(qt.to.line+I,qt.to.ch);else if(T<=qt.to.line){pt=!1;break}}pt||(p.splice(0,L+1),L=0)}}}function ru(p,T){var M=T.from.line,I=T.to.line,L=T.text.length-(I-M)-1;Gl(p.done,M,I,L),Gl(p.undone,M,I,L)}function ou(p,T,M,I){var L=T,K=T;return"number"==typeof T?K=Di(p,ji(p,T)):L=ar(T),null==L?null:(I(K,L)&&p.cm&&pa(p.cm,L,M),K)}function Pc(p){this.lines=p,this.parent=null;for(var T=0,M=0;M<p.length;++M)p[M].parent=this,T+=p[M].height;this.height=T}function Rl(p){this.children=p;for(var T=0,M=0,I=0;I<p.length;++I){var L=p[I];T+=L.chunkSize(),M+=L.height,L.parent=this}this.size=T,this.height=M,this.parent=null}Lr.prototype.from=function(){return Ai(this.anchor,this.head)},Lr.prototype.to=function(){return Fe(this.anchor,this.head)},Lr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Pc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(p,T){for(var M=p,I=p+T;M<I;++M){var L=this.lines[M];this.height-=L.height,us(L),rr(L,"delete")}this.lines.splice(p,T)},collapse:function(p){p.push.apply(p,this.lines)},insertInner:function(p,T,M){this.height+=M,this.lines=this.lines.slice(0,p).concat(T).concat(this.lines.slice(p));for(var I=0;I<T.length;++I)T[I].parent=this},iterN:function(p,T,M){for(var I=p+T;p<I;++p)if(M(this.lines[p]))return!0}},Rl.prototype={chunkSize:function(){return this.size},removeInner:function(p,T){this.size-=T;for(var M=0;M<this.children.length;++M){var I=this.children[M],L=I.chunkSize();if(p<L){var K=Math.min(T,L-p),pt=I.height;if(I.removeInner(p,K),this.height-=pt-I.height,L==K&&(this.children.splice(M--,1),I.parent=null),0==(T-=K))break;p=0}else p-=L}if(this.size-T<25&&(this.children.length>1||!(this.children[0]instanceof Pc))){var Rt=[];this.collapse(Rt),this.children=[new Pc(Rt)],this.children[0].parent=this}},collapse:function(p){for(var T=0;T<this.children.length;++T)this.children[T].collapse(p)},insertInner:function(p,T,M){this.size+=T.length,this.height+=M;for(var I=0;I<this.children.length;++I){var L=this.children[I],K=L.chunkSize();if(p<=K){if(L.insertInner(p,T,M),L.lines&&L.lines.length>50){for(var pt=L.lines.length%25+25,Rt=pt;Rt<L.lines.length;){var Ht=new Pc(L.lines.slice(Rt,Rt+=25));L.height-=Ht.height,this.children.splice(++I,0,Ht),Ht.parent=this}L.lines=L.lines.slice(0,pt),this.maybeSpill()}break}p-=K}},maybeSpill:function(){if(!(this.children.length<=10)){var p=this;do{var M=new Rl(p.children.splice(p.children.length-5,5));if(p.parent){p.size-=M.size,p.height-=M.height;var L=je(p.parent.children,p);p.parent.children.splice(L+1,0,M)}else{var I=new Rl(p.children);I.parent=p,p.children=[I,M],p=I}M.parent=p.parent}while(p.children.length>10);p.parent.maybeSpill()}},iterN:function(p,T,M){for(var I=0;I<this.children.length;++I){var L=this.children[I],K=L.chunkSize();if(p<K){var pt=Math.min(T,K-p);if(L.iterN(p,pt,M))return!0;if(0==(T-=pt))break;p=0}else p-=K}}};var pl=function(p,T,M){if(M)for(var I in M)M.hasOwnProperty(I)&&(this[I]=M[I]);this.doc=p,this.node=T};function el(p,T,M){Hr(T)<(p.curOp&&p.curOp.scrollTop||p.doc.scrollTop)&&mt(p,M)}pl.prototype.clear=function(){var p=this.doc.cm,T=this.line.widgets,M=this.line,I=ar(M);if(null!=I&&T){for(var L=0;L<T.length;++L)T[L]==this&&T.splice(L--,1);T.length||(M.widgets=null);var K=J(this);Mr(M,Math.max(0,M.height-K)),p&&(Os(p,function(){el(p,M,-K),pa(p,I,"widget")}),rr(p,"lineWidgetCleared",p,this,I))}},pl.prototype.changed=function(){var p=this,T=this.height,M=this.doc.cm,I=this.line;this.height=null;var L=J(this)-T;!L||(Ar(this.doc,I)||Mr(I,I.height+L),M&&Os(M,function(){M.curOp.forceUpdate=!0,el(M,I,L),rr(M,"lineWidgetChanged",M,p,ar(I))}))},Ei(pl);var Fc=0,il=function(p,T){this.lines=[],this.type=T,this.doc=p,this.id=++Fc};function fl(p,T,M,I,L){if(I&&I.shared)return function(p,T,M,I,L){(I=oe(I)).shared=!1;var K=[fl(p,T,M,I,L)],pt=K[0],Rt=I.widgetNode;return hl(p,function(Ht){Rt&&(I.widgetNode=Rt.cloneNode(!0)),K.push(fl(Ht,Xi(Ht,T),Xi(Ht,M),I,L));for(var qt=0;qt<Ht.linked.length;++qt)if(Ht.linked[qt].isParent)return;pt=Mt(K)}),new Wa(K,pt)}(p,T,M,I,L);if(p.cm&&!p.cm.curOp)return bo(p.cm,fl)(p,T,M,I,L);var K=new il(p,L),pt=On(T,M);if(I&&oe(I,K,!1),pt>0||0==pt&&!1!==K.clearWhenEmpty)return K;if(K.replacedWith&&(K.collapsed=!0,K.widgetNode=ot("span",[K.replacedWith],"CodeMirror-widget"),I.handleMouseEvents||K.widgetNode.setAttribute("cm-ignore-events","true"),I.insertLeft&&(K.widgetNode.insertLeft=!0)),K.collapsed){if(Vs(p,T.line,T,M,K)||T.line!=M.line&&Vs(p,M.line,T,M,K))throw new Error("Inserting collapsed marker partially overlapping an existing one");Cr=!0}K.addToHistory&&Eo(p,{from:T,to:M,origin:"markText"},p.sel,NaN);var qt,Rt=T.line,Ht=p.cm;if(p.iter(Rt,M.line+1,function(We){Ht&&K.collapsed&&!Ht.options.lineWrapping&&Xr(We)==Ht.display.maxLine&&(qt=!0),K.collapsed&&Rt!=T.line&&Mr(We,0),function(p,T,M){var I=M&&window.WeakSet&&(M.markedSpans||(M.markedSpans=new WeakSet));I&&I.has(p.markedSpans)?p.markedSpans.push(T):(p.markedSpans=p.markedSpans?p.markedSpans.concat([T]):[T],I&&I.add(p.markedSpans)),T.marker.attachLine(p)}(We,new Ma(K,Rt==T.line?T.ch:null,Rt==M.line?M.ch:null),p.cm&&p.cm.curOp),++Rt}),K.collapsed&&p.iter(T.line,M.line+1,function(We){Ar(p,We)&&Mr(We,0)}),K.clearOnEnter&&li(K,"beforeCursorEnter",function(){return K.clear()}),K.readOnly&&(Zs=!0,(p.history.done.length||p.history.undone.length)&&p.clearHistory()),K.collapsed&&(K.id=++Fc,K.atomic=!0),Ht){if(qt&&(Ht.curOp.updateMaxLine=!0),K.collapsed)Ho(Ht,T.line,M.line+1);else if(K.className||K.startStyle||K.endStyle||K.css||K.attributes||K.title)for(var xe=T.line;xe<=M.line;xe++)pa(Ht,xe,"text");K.atomic&&tl(Ht.doc),rr(Ht,"markerAdded",Ht,K)}return K}il.prototype.clear=function(){if(!this.explicitlyCleared){var p=this.doc.cm,T=p&&!p.curOp;if(T&&As(p),Qe(this,"clear")){var M=this.find();M&&rr(this,"clear",M.from,M.to)}for(var I=null,L=null,K=0;K<this.lines.length;++K){var pt=this.lines[K],Rt=qs(pt.markedSpans,this);p&&!this.collapsed?pa(p,ar(pt),"text"):p&&(null!=Rt.to&&(L=ar(pt)),null!=Rt.from&&(I=ar(pt))),pt.markedSpans=Ts(pt.markedSpans,Rt),null==Rt.from&&this.collapsed&&!Ar(this.doc,pt)&&p&&Mr(pt,hs(p.display))}if(p&&this.collapsed&&!p.options.lineWrapping)for(var Ht=0;Ht<this.lines.length;++Ht){var qt=Xr(this.lines[Ht]),xe=vs(qt);xe>p.display.maxLineLength&&(p.display.maxLine=qt,p.display.maxLineLength=xe,p.display.maxLineChanged=!0)}null!=I&&p&&this.collapsed&&Ho(p,I,L+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,p&&tl(p.doc)),p&&rr(p,"markerCleared",p,this,I,L),T&&ys(p),this.parent&&this.parent.clear()}},il.prototype.find=function(p,T){null==p&&"bookmark"==this.type&&(p=1);for(var M,I,L=0;L<this.lines.length;++L){var K=this.lines[L],pt=qs(K.markedSpans,this);if(null!=pt.from&&(M=Ui(T?K:ar(K),pt.from),-1==p))return M;if(null!=pt.to&&(I=Ui(T?K:ar(K),pt.to),1==p))return I}return M&&{from:M,to:I}},il.prototype.changed=function(){var p=this,T=this.find(-1,!0),M=this,I=this.doc.cm;!T||!I||Os(I,function(){var L=T.line,K=ar(T.line),pt=Pn(I,K);if(pt&&(ws(pt),I.curOp.selectionChanged=I.curOp.forceUpdate=!0),I.curOp.updateMaxLine=!0,!Ar(M.doc,L)&&null!=M.height){var Rt=M.height;M.height=null;var Ht=J(M)-Rt;Ht&&Mr(L,L.height+Ht)}rr(I,"markerChanged",I,p)})},il.prototype.attachLine=function(p){if(!this.lines.length&&this.doc.cm){var T=this.doc.cm.curOp;(!T.maybeHiddenMarkers||-1==je(T.maybeHiddenMarkers,this))&&(T.maybeUnhiddenMarkers||(T.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(p)},il.prototype.detachLine=function(p){if(this.lines.splice(je(this.lines,p),1),!this.lines.length&&this.doc.cm){var T=this.doc.cm.curOp;(T.maybeHiddenMarkers||(T.maybeHiddenMarkers=[])).push(this)}},Ei(il);var Wa=function(p,T){this.markers=p,this.primary=T;for(var M=0;M<p.length;++M)p[M].parent=this};function ca(p){return p.findMarks(Ui(p.first,0),p.clipPos(Ui(p.lastLine())),function(T){return T.parent})}function nc(p){for(var T=function(I){var L=p[I],K=[L.primary.doc];hl(L.primary.doc,function(Ht){return K.push(Ht)});for(var pt=0;pt<L.markers.length;pt++){var Rt=L.markers[pt];-1==je(K,Rt.doc)&&(Rt.parent=null,L.markers.splice(pt--,1))}},M=0;M<p.length;M++)T(M)}Wa.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var p=0;p<this.markers.length;++p)this.markers[p].clear();rr(this,"clear")}},Wa.prototype.find=function(p,T){return this.primary.find(p,T)},Ei(Wa);var qu=0,ps=function(p,T,M,I,L){if(!(this instanceof ps))return new ps(p,T,M,I,L);null==M&&(M=0),Rl.call(this,[new Pc([new cs("",null)])]),this.first=M,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=M;var K=Ui(M,0);this.sel=dc(K),this.history=new fc(null),this.id=++qu,this.modeOption=T,this.lineSep=I,this.direction="rtl"==L?"rtl":"ltr",this.extend=!1,"string"==typeof p&&(p=this.splitLines(p)),xs(this,{from:K,to:K,text:p}),la(this,dc(K),we)};ps.prototype=Te(Rl.prototype,{constructor:ps,iter:function(p,T,M){M?this.iterN(p-this.first,T-p,M):this.iterN(this.first,this.first+this.size,p)},insert:function(p,T){for(var M=0,I=0;I<T.length;++I)M+=T[I].height;this.insertInner(p-this.first,T,M)},remove:function(p,T){this.removeInner(p-this.first,T)},getValue:function(p){var T=sr(this,this.first,this.first+this.size);return!1===p?T:T.join(p||this.lineSeparator())},setValue:zr(function(p){var T=Ui(this.first,0),M=this.first+this.size-1;Nc(this,{from:T,to:Ui(M,Di(this,M).text.length),text:this.splitLines(p),origin:"setValue",full:!0},!0),this.cm&&et(this.cm,0,0),la(this,dc(T),we)}),replaceRange:function(p,T,M,I){Vl(this,p,T=Xi(this,T),M=M?Xi(this,M):T,I)},getRange:function(p,T,M){var I=An(this,Xi(this,p),Xi(this,T));return!1===M?I:I.join(""===M?"":M||this.lineSeparator())},getLine:function(p){var T=this.getLineHandle(p);return T&&T.text},getLineHandle:function(p){if(Yr(this,p))return Di(this,p)},getLineNumber:function(p){return ar(p)},getLineHandleVisualStart:function(p){return"number"==typeof p&&(p=Di(this,p)),Xr(p)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(p){return Xi(this,p)},getCursor:function(p){var T=this.sel.primary();return null==p||"head"==p?T.head:"anchor"==p?T.anchor:"end"==p||"to"==p||!1===p?T.to():T.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:zr(function(p,T,M){dl(this,Xi(this,"number"==typeof p?Ui(p,T||0):p),null,M)}),setSelection:zr(function(p,T,M){dl(this,Xi(this,p),Xi(this,T||p),M)}),extendSelection:zr(function(p,T,M){wl(this,Xi(this,p),T&&Xi(this,T),M)}),extendSelections:zr(function(p,T){Fl(this,qn(this,p),T)}),extendSelectionsBy:zr(function(p,T){Fl(this,qn(this,Yt(this.sel.ranges,p)),T)}),setSelections:zr(function(p,T,M){if(p.length){for(var I=[],L=0;L<p.length;L++)I[L]=new Lr(Xi(this,p[L].anchor),Xi(this,p[L].head||p[L].anchor));null==T&&(T=Math.min(p.length-1,this.sel.primIndex)),la(this,Ha(this.cm,I,T),M)}}),addSelection:zr(function(p,T,M){var I=this.sel.ranges.slice(0);I.push(new Lr(Xi(this,p),Xi(this,T||p))),la(this,Ha(this.cm,I,I.length-1),M)}),getSelection:function(p){for(var M,T=this.sel.ranges,I=0;I<T.length;I++){var L=An(this,T[I].from(),T[I].to());M=M?M.concat(L):L}return!1===p?M:M.join(p||this.lineSeparator())},getSelections:function(p){for(var T=[],M=this.sel.ranges,I=0;I<M.length;I++){var L=An(this,M[I].from(),M[I].to());!1!==p&&(L=L.join(p||this.lineSeparator())),T[I]=L}return T},replaceSelection:function(p,T,M){for(var I=[],L=0;L<this.sel.ranges.length;L++)I[L]=p;this.replaceSelections(I,T,M||"+input")},replaceSelections:zr(function(p,T,M){for(var I=[],L=this.sel,K=0;K<L.ranges.length;K++){var pt=L.ranges[K];I[K]={from:pt.from(),to:pt.to(),text:this.splitLines(p[K]),origin:M}}for(var Rt=T&&"end"!=T&&function(p,T,M){for(var I=[],L=Ui(p.first,0),K=L,pt=0;pt<T.length;pt++){var Rt=T[pt],Ht=pc(Rt.from,L,K),qt=pc(Pl(Rt),L,K);if(L=Rt.to,K=qt,"around"==M){var xe=p.sel.ranges[pt],We=On(xe.head,xe.anchor)<0;I[pt]=new Lr(We?qt:Ht,We?Ht:qt)}else I[pt]=new Lr(Ht,Ht)}return new ka(I,p.sel.primIndex)}(this,I,T),Ht=I.length-1;Ht>=0;Ht--)Nc(this,I[Ht]);Rt?vu(this,Rt):this.cm&&at(this.cm)}),undo:zr(function(){Ul(this,"undo")}),redo:zr(function(){Ul(this,"redo")}),undoSelection:zr(function(){Ul(this,"undo",!0)}),redoSelection:zr(function(){Ul(this,"redo",!0)}),setExtending:function(p){this.extend=p},getExtending:function(){return this.extend},historySize:function(){for(var p=this.history,T=0,M=0,I=0;I<p.done.length;I++)p.done[I].ranges||++T;for(var L=0;L<p.undone.length;L++)p.undone[L].ranges||++M;return{undo:T,redo:M}},clearHistory:function(){var p=this;this.history=new fc(this.history),hl(this,function(T){return T.history=p.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(p){return p&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(p){return this.history.generation==(p||this.cleanGeneration)},getHistory:function(){return{done:Sl(this.history.done),undone:Sl(this.history.undone)}},setHistory:function(p){var T=this.history=new fc(this.history);T.done=Sl(p.done.slice(0),null,!0),T.undone=Sl(p.undone.slice(0),null,!0)},setGutterMarker:zr(function(p,T,M){return ou(this,p,"gutter",function(I){var L=I.gutterMarkers||(I.gutterMarkers={});return L[T]=M,!M&&ue(L)&&(I.gutterMarkers=null),!0})}),clearGutter:zr(function(p){var T=this;this.iter(function(M){M.gutterMarkers&&M.gutterMarkers[p]&&ou(T,M,"gutter",function(){return M.gutterMarkers[p]=null,ue(M.gutterMarkers)&&(M.gutterMarkers=null),!0})})}),lineInfo:function(p){var T;if("number"==typeof p){if(!(Yr(this,p)&&(T=p,p=Di(this,p))))return null}else if(null==(T=ar(p)))return null;return{line:T,handle:p,text:p.text,gutterMarkers:p.gutterMarkers,textClass:p.textClass,bgClass:p.bgClass,wrapClass:p.wrapClass,widgets:p.widgets}},addLineClass:zr(function(p,T,M){return ou(this,p,"gutter"==T?"gutter":"class",function(I){var L="text"==T?"textClass":"background"==T?"bgClass":"gutter"==T?"gutterClass":"wrapClass";if(I[L]){if(lt(M).test(I[L]))return!1;I[L]+=" "+M}else I[L]=M;return!0})}),removeLineClass:zr(function(p,T,M){return ou(this,p,"gutter"==T?"gutter":"class",function(I){var L="text"==T?"textClass":"background"==T?"bgClass":"gutter"==T?"gutterClass":"wrapClass",K=I[L];if(!K)return!1;if(null==M)I[L]=null;else{var pt=K.match(lt(M));if(!pt)return!1;var Rt=pt.index+pt[0].length;I[L]=K.slice(0,pt.index)+(pt.index&&Rt!=K.length?" ":"")+K.slice(Rt)||null}return!0})}),addLineWidget:zr(function(p,T,M){return function(p,T,M,I){var L=new pl(p,M,I),K=p.cm;return K&&L.noHScroll&&(K.display.alignWidgets=!0),ou(p,T,"widget",function(pt){var Rt=pt.widgets||(pt.widgets=[]);if(null==L.insertAt?Rt.push(L):Rt.splice(Math.min(Rt.length,Math.max(0,L.insertAt)),0,L),L.line=pt,K&&!Ar(p,pt)){var Ht=Hr(pt)<p.scrollTop;Mr(pt,pt.height+J(L)),Ht&&mt(K,L.height),K.curOp.forceUpdate=!0}return!0}),K&&rr(K,"lineWidgetAdded",K,L,"number"==typeof T?T:ar(T)),L}(this,p,T,M)}),removeLineWidget:function(p){p.clear()},markText:function(p,T,M){return fl(this,Xi(this,p),Xi(this,T),M,M&&M.type||"range")},setBookmark:function(p,T){var M={replacedWith:T&&(null==T.nodeType?T.widget:T),insertLeft:T&&T.insertLeft,clearWhenEmpty:!1,shared:T&&T.shared,handleMouseEvents:T&&T.handleMouseEvents};return fl(this,p=Xi(this,p),p,M,"bookmark")},findMarksAt:function(p){var T=[],M=Di(this,(p=Xi(this,p)).line).markedSpans;if(M)for(var I=0;I<M.length;++I){var L=M[I];(null==L.from||L.from<=p.ch)&&(null==L.to||L.to>=p.ch)&&T.push(L.marker.parent||L.marker)}return T},findMarks:function(p,T,M){p=Xi(this,p),T=Xi(this,T);var I=[],L=p.line;return this.iter(p.line,T.line+1,function(K){var pt=K.markedSpans;if(pt)for(var Rt=0;Rt<pt.length;Rt++){var Ht=pt[Rt];!(null!=Ht.to&&L==p.line&&p.ch>=Ht.to||null==Ht.from&&L!=p.line||null!=Ht.from&&L==T.line&&Ht.from>=T.ch)&&(!M||M(Ht.marker))&&I.push(Ht.marker.parent||Ht.marker)}++L}),I},getAllMarks:function(){var p=[];return this.iter(function(T){var M=T.markedSpans;if(M)for(var I=0;I<M.length;++I)null!=M[I].from&&p.push(M[I].marker)}),p},posFromIndex:function(p){var T,M=this.first,I=this.lineSeparator().length;return this.iter(function(L){var K=L.text.length+I;if(K>p)return T=p,!0;p-=K,++M}),Xi(this,Ui(M,T))},indexFromPos:function(p){var T=(p=Xi(this,p)).ch;if(p.line<this.first||p.ch<0)return 0;var M=this.lineSeparator().length;return this.iter(this.first,p.line,function(I){T+=I.text.length+M}),T},copy:function(p){var T=new ps(sr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return T.scrollTop=this.scrollTop,T.scrollLeft=this.scrollLeft,T.sel=this.sel,T.extend=!1,p&&(T.history.undoDepth=this.history.undoDepth,T.setHistory(this.getHistory())),T},linkedDoc:function(p){p||(p={});var T=this.first,M=this.first+this.size;null!=p.from&&p.from>T&&(T=p.from),null!=p.to&&p.to<M&&(M=p.to);var I=new ps(sr(this,T,M),p.mode||this.modeOption,T,this.lineSep,this.direction);return p.sharedHist&&(I.history=this.history),(this.linked||(this.linked=[])).push({doc:I,sharedHist:p.sharedHist}),I.linked=[{doc:this,isParent:!0,sharedHist:p.sharedHist}],function(p,T){for(var M=0;M<T.length;M++){var I=T[M],L=I.find(),K=p.clipPos(L.from),pt=p.clipPos(L.to);if(On(K,pt)){var Rt=fl(p,K,pt,I.primary,I.primary.type);I.markers.push(Rt),Rt.parent=I}}}(I,ca(this)),I},unlinkDoc:function(p){if(p instanceof Io&&(p=p.doc),this.linked)for(var T=0;T<this.linked.length;++T)if(this.linked[T].doc==p){this.linked.splice(T,1),p.unlinkDoc(this),nc(ca(this));break}if(p.history==this.history){var I=[p.id];hl(p,function(L){return I.push(L.id)},!0),p.history=new fc(null),p.history.done=Sl(this.history.done,I),p.history.undone=Sl(this.history.undone,I)}},iterLinkedDocs:function(p){hl(this,p)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(p){return this.lineSep?p.split(this.lineSep):ir(p)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:zr(function(p){"rtl"!=p&&(p="ltr"),p!=this.direction&&(this.direction=p,this.iter(function(T){return T.order=null}),this.cm&&function(p){Os(p,function(){eu(p),Ho(p)})}(this.cm))})}),ps.prototype.eachLine=ps.prototype.iter;var Bc=0;function Tt(p){var T=this;if(Oe(T),!vi(T,p)&&!Et(T.display,p)){Pi(p),n&&(Bc=+new Date);var M=Qa(T,p,!0),I=p.dataTransfer.files;if(M&&!T.isReadOnly())if(I&&I.length&&window.FileReader&&window.File)for(var L=I.length,K=Array(L),pt=0,Rt=function(){++pt==L&&bo(T,function(){var hi={from:M=Xi(T.doc,M),to:M,text:T.doc.splitLines(K.filter(function(ki){return null!=ki}).join(T.doc.lineSeparator())),origin:"paste"};Nc(T.doc,hi),vu(T.doc,dc(Xi(T.doc,M),Xi(T.doc,Pl(hi))))})()},Ht=function(hi,ki){if(T.options.allowDropFileTypes&&-1==je(T.options.allowDropFileTypes,hi.type))Rt();else{var zi=new FileReader;zi.onerror=function(){return Rt()},zi.onload=function(){var Qi=zi.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Qi)||(K[ki]=Qi),Rt()},zi.readAsText(hi)}},qt=0;qt<I.length;qt++)Ht(I[qt],qt);else{if(T.state.draggingText&&T.doc.sel.contains(M)>-1)return T.state.draggingText(p),void setTimeout(function(){return T.display.input.focus()},20);try{var xe=p.dataTransfer.getData("Text");if(xe){var We;if(T.state.draggingText&&!T.state.draggingText.copy&&(We=T.listSelections()),Bl(T.doc,dc(M,M)),We)for(var _i=0;_i<We.length;++_i)Vl(T.doc,"",We[_i].anchor,We[_i].head,"drag");T.replaceSelection(xe,"around","paste"),T.display.input.focus()}}catch(hi){}}}}function Oe(p){p.display.dragCursor&&(p.display.lineSpace.removeChild(p.display.dragCursor),p.display.dragCursor=null)}function Ve(p){if(document.getElementsByClassName){for(var T=document.getElementsByClassName("CodeMirror"),M=[],I=0;I<T.length;I++){var L=T[I].CodeMirror;L&&M.push(L)}M.length&&M[0].operation(function(){for(var K=0;K<M.length;K++)p(M[K])})}}var fi=!1;function Je(){fi||(function(){var p;li(window,"resize",function(){null==p&&(p=setTimeout(function(){p=null,Ve(Li)},100))}),li(window,"blur",function(){return Ve(Fa)})}(),fi=!0)}function Li(p){var T=p.display;T.cachedCharWidth=T.cachedTextHeight=T.cachedPaddingH=null,T.scrollbarsClipped=!1,p.setSize()}for(var Ni={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Gi=0;Gi<10;Gi++)Ni[Gi+48]=Ni[Gi+96]=String(Gi);for(var Wn=65;Wn<=90;Wn++)Ni[Wn]=String.fromCharCode(Wn);for(var kn=1;kn<=12;kn++)Ni[kn+111]=Ni[kn+63235]="F"+kn;var er={};function ts(p){var T=p.split(/-(?!$)/);p=T[T.length-1];for(var M,I,L,K,pt=0;pt<T.length-1;pt++){var Rt=T[pt];if(/^(cmd|meta|m)$/i.test(Rt))K=!0;else if(/^a(lt)?$/i.test(Rt))M=!0;else if(/^(c|ctrl|control)$/i.test(Rt))I=!0;else{if(!/^s(hift)?$/i.test(Rt))throw new Error("Unrecognized modifier name: "+Rt);L=!0}}return M&&(p="Alt-"+p),I&&(p="Ctrl-"+p),K&&(p="Cmd-"+p),L&&(p="Shift-"+p),p}function So(p){var T={};for(var M in p)if(p.hasOwnProperty(M)){var I=p[M];if(/^(name|fallthrough|(de|at)tach)$/.test(M))continue;if("..."==I){delete p[M];continue}for(var L=Yt(M.split(" "),ts),K=0;K<L.length;K++){var pt=void 0,Rt=void 0;K==L.length-1?(Rt=L.join(" "),pt=I):(Rt=L.slice(0,K+1).join(" "),pt="...");var Ht=T[Rt];if(Ht){if(Ht!=pt)throw new Error("Inconsistent bindings for "+Rt)}else T[Rt]=pt}delete p[M]}for(var qt in T)p[qt]=T[qt];return p}function Dr(p,T,M,I){var L=(T=Es(T)).call?T.call(p,I):T[p];if(!1===L)return"nothing";if("..."===L)return"multi";if(null!=L&&M(L))return"handled";if(T.fallthrough){if("[object Array]"!=Object.prototype.toString.call(T.fallthrough))return Dr(p,T.fallthrough,M,I);for(var K=0;K<T.fallthrough.length;K++){var pt=Dr(p,T.fallthrough[K],M,I);if(pt)return pt}}}function to(p){var T="string"==typeof p?p:Ni[p.keyCode];return"Ctrl"==T||"Alt"==T||"Shift"==T||"Mod"==T}function Lo(p,T,M){var I=p;return T.altKey&&"Alt"!=I&&(p="Alt-"+p),(It?T.metaKey:T.ctrlKey)&&"Ctrl"!=I&&(p="Ctrl-"+p),(It?T.ctrlKey:T.metaKey)&&"Mod"!=I&&(p="Cmd-"+p),!M&&T.shiftKey&&"Shift"!=I&&(p="Shift-"+p),p}function co(p,T){if(D&&34==p.keyCode&&p.char)return!1;var M=Ni[p.keyCode];return null!=M&&!p.altGraphKey&&(3==p.keyCode&&p.code&&(M=p.code),Lo(M,p,T))}function Es(p){return"string"==typeof p?er[p]:p}function es(p,T){for(var M=p.doc.sel.ranges,I=[],L=0;L<M.length;L++){for(var K=T(M[L]);I.length&&On(K.from,Mt(I).to)<=0;){var pt=I.pop();if(On(pt.from,K.from)<0){K.from=pt.from;break}}I.push(K)}Os(p,function(){for(var Rt=I.length-1;Rt>=0;Rt--)Vl(p.doc,"",I[Rt].from,I[Rt].to,"+delete");at(p)})}function ks(p,T,M){var I=Dt(p.text,T+M,M);return I<0||I>p.text.length?null:I}function za(p,T,M){var I=ks(p,T.ch,M);return null==I?null:new Ui(T.line,I,M<0?"after":"before")}function bu(p,T,M,I,L){if(p){"rtl"==T.doc.direction&&(L=-L);var K=mi(M,T.doc.direction);if(K){var qt,pt=L<0?Mt(K):K[0],Ht=L<0==(1==pt.level)?"after":"before";if(pt.level>0||"rtl"==T.doc.direction){var xe=Fn(T,M),We=or(T,xe,qt=L<0?M.text.length-1:0).top;qt=zt(function(_i){return or(T,xe,_i).top==We},L<0==(1==pt.level)?pt.from:pt.to-1,qt),"before"==Ht&&(qt=ks(M,qt,1))}else qt=L<0?pt.to:pt.from;return new Ui(I,qt,Ht)}}return new Ui(I,L<0?M.text.length:0,L<0?"before":"after")}er.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},er.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},er.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},er.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},er.default=gt?er.macDefault:er.pcDefault;var Pu={selectAll:Lc,singleSelection:function(p){return p.setSelection(p.getCursor("anchor"),p.getCursor("head"),we)},killLine:function(p){return es(p,function(T){if(T.empty()){var M=Di(p.doc,T.head.line).text.length;return T.head.ch==M&&T.head.line<p.lastLine()?{from:T.head,to:Ui(T.head.line+1,0)}:{from:T.head,to:Ui(T.head.line,M)}}return{from:T.from(),to:T.to()}})},deleteLine:function(p){return es(p,function(T){return{from:Ui(T.from().line,0),to:Xi(p.doc,Ui(T.to().line+1,0))}})},delLineLeft:function(p){return es(p,function(T){return{from:Ui(T.from().line,0),to:T.from()}})},delWrappedLineLeft:function(p){return es(p,function(T){var M=p.charCoords(T.head,"div").top+5;return{from:p.coordsChar({left:0,top:M},"div"),to:T.from()}})},delWrappedLineRight:function(p){return es(p,function(T){var M=p.charCoords(T.head,"div").top+5,I=p.coordsChar({left:p.display.lineDiv.offsetWidth+100,top:M},"div");return{from:T.from(),to:I}})},undo:function(p){return p.undo()},redo:function(p){return p.redo()},undoSelection:function(p){return p.undoSelection()},redoSelection:function(p){return p.redoSelection()},goDocStart:function(p){return p.extendSelection(Ui(p.firstLine(),0))},goDocEnd:function(p){return p.extendSelection(Ui(p.lastLine()))},goLineStart:function(p){return p.extendSelectionsBy(function(T){return yu(p,T.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(p){return p.extendSelectionsBy(function(T){return yc(p,T.head)},{origin:"+move",bias:1})},goLineEnd:function(p){return p.extendSelectionsBy(function(T){return function(p,T){var M=Di(p.doc,T),I=function(p){for(var T;T=Ta(p);)p=T.find(1,!0).line;return p}(M);return I!=M&&(T=ar(I)),bu(!0,p,M,T,-1)}(p,T.head.line)},{origin:"+move",bias:-1})},goLineRight:function(p){return p.extendSelectionsBy(function(T){var M=p.cursorCoords(T.head,"div").top+5;return p.coordsChar({left:p.display.lineDiv.offsetWidth+100,top:M},"div")},Wt)},goLineLeft:function(p){return p.extendSelectionsBy(function(T){var M=p.cursorCoords(T.head,"div").top+5;return p.coordsChar({left:0,top:M},"div")},Wt)},goLineLeftSmart:function(p){return p.extendSelectionsBy(function(T){var M=p.cursorCoords(T.head,"div").top+5,I=p.coordsChar({left:0,top:M},"div");return I.ch<p.getLine(I.line).search(/\S/)?yc(p,T.head):I},Wt)},goLineUp:function(p){return p.moveV(-1,"line")},goLineDown:function(p){return p.moveV(1,"line")},goPageUp:function(p){return p.moveV(-1,"page")},goPageDown:function(p){return p.moveV(1,"page")},goCharLeft:function(p){return p.moveH(-1,"char")},goCharRight:function(p){return p.moveH(1,"char")},goColumnLeft:function(p){return p.moveH(-1,"column")},goColumnRight:function(p){return p.moveH(1,"column")},goWordLeft:function(p){return p.moveH(-1,"word")},goGroupRight:function(p){return p.moveH(1,"group")},goGroupLeft:function(p){return p.moveH(-1,"group")},goWordRight:function(p){return p.moveH(1,"word")},delCharBefore:function(p){return p.deleteH(-1,"codepoint")},delCharAfter:function(p){return p.deleteH(1,"char")},delWordBefore:function(p){return p.deleteH(-1,"word")},delWordAfter:function(p){return p.deleteH(1,"word")},delGroupBefore:function(p){return p.deleteH(-1,"group")},delGroupAfter:function(p){return p.deleteH(1,"group")},indentAuto:function(p){return p.indentSelection("smart")},indentMore:function(p){return p.indentSelection("add")},indentLess:function(p){return p.indentSelection("subtract")},insertTab:function(p){return p.replaceSelection("\t")},insertSoftTab:function(p){for(var T=[],M=p.listSelections(),I=p.options.tabSize,L=0;L<M.length;L++){var K=M[L].from(),pt=Ie(p.getLine(K.line),K.ch,I);T.push(ee(I-pt%I))}p.replaceSelections(T)},defaultTab:function(p){p.somethingSelected()?p.indentSelection("add"):p.execCommand("insertTab")},transposeChars:function(p){return Os(p,function(){for(var T=p.listSelections(),M=[],I=0;I<T.length;I++)if(T[I].empty()){var L=T[I].head,K=Di(p.doc,L.line).text;if(K)if(L.ch==K.length&&(L=new Ui(L.line,L.ch-1)),L.ch>0)L=new Ui(L.line,L.ch+1),p.replaceRange(K.charAt(L.ch-1)+K.charAt(L.ch-2),Ui(L.line,L.ch-2),L,"+transpose");else if(L.line>p.doc.first){var pt=Di(p.doc,L.line-1).text;pt&&(L=new Ui(L.line,1),p.replaceRange(K.charAt(0)+p.doc.lineSeparator()+pt.charAt(pt.length-1),Ui(L.line-1,pt.length-1),L,"+transpose"))}M.push(new Lr(L,L))}p.setSelections(M)})},newlineAndIndent:function(p){return Os(p,function(){for(var T=p.listSelections(),M=T.length-1;M>=0;M--)p.replaceRange(p.doc.lineSeparator(),T[M].anchor,T[M].head,"+input");T=p.listSelections();for(var I=0;I<T.length;I++)p.indentLine(T[I].from().line,null,!0);at(p)})},openLine:function(p){return p.replaceSelection("\n","start")},toggleOverwrite:function(p){return p.toggleOverwrite()}};function yu(p,T){var M=Di(p.doc,T),I=Xr(M);return I!=M&&(T=ar(I)),bu(!0,p,I,T,1)}function yc(p,T){var M=yu(p,T.line),I=Di(p.doc,M.line),L=mi(I,p.doc.direction);if(!L||0==L[0].level){var K=Math.max(M.ch,I.text.search(/\S/));return Ui(M.line,T.line==M.line&&T.ch<=K&&T.ch?0:K,M.sticky)}return M}function va(p,T,M){if("string"==typeof T&&!(T=Pu[T]))return!1;p.display.input.ensurePolled();var I=p.display.shift,L=!1;try{p.isReadOnly()&&(p.state.suppressEdits=!0),M&&(p.display.shift=!1),L=T(p)!=Ze}finally{p.display.shift=I,p.state.suppressEdits=!1}return L}var Fu=new Re;function gl(p,T,M,I){var L=p.state.keySeq;if(L){if(to(T))return"handled";if(/\'$/.test(T)?p.state.keySeq=null:Fu.set(50,function(){p.state.keySeq==L&&(p.state.keySeq=null,p.display.input.reset())}),eh(p,L+" "+T,M,I))return!0}return eh(p,T,M,I)}function eh(p,T,M,I){var L=function(p,T,M){for(var I=0;I<p.state.keyMaps.length;I++){var L=Dr(T,p.state.keyMaps[I],M,p);if(L)return L}return p.options.extraKeys&&Dr(T,p.options.extraKeys,M,p)||Dr(T,p.options.keyMap,M,p)}(p,T,I);return"multi"==L&&(p.state.keySeq=T),"handled"==L&&rr(p,"keyHandled",p,T,M),("handled"==L||"multi"==L)&&(Pi(M),Nl(p)),!!L}function gh(p,T){var M=co(T,!0);return!!M&&(T.shiftKey&&!p.state.keySeq?gl(p,"Shift-"+M,T,function(I){return va(p,I,!0)})||gl(p,M,T,function(I){if("string"==typeof I?/^go[A-Z]/.test(I):I.motion)return va(p,I)}):gl(p,M,T,function(I){return va(p,I)}))}var Ec=null;function su(p){var T=this;if(!(p.target&&p.target!=T.display.input.getField()||(T.curOp.focus=Zt(),vi(T,p)))){n&&r<11&&27==p.keyCode&&(p.returnValue=!1);var M=p.keyCode;T.display.shift=16==M||p.shiftKey;var I=gh(T,p);D&&(Ec=I?M:null,!I&&88==M&&!Ke&&(gt?p.metaKey:p.ctrlKey)&&T.replaceSelection("",null,"cut")),y&&!gt&&!I&&46==M&&p.shiftKey&&!p.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==M&&!/\bCodeMirror-crosshair\b/.test(T.display.lineDiv.className)&&function(p){var T=p.display.lineDiv;function M(I){(18==I.keyCode||!I.altKey)&&(ft(T,"CodeMirror-crosshair"),Ii(document,"keyup",M),Ii(document,"mouseover",M))}vt(T,"CodeMirror-crosshair"),li(document,"keyup",M),li(document,"mouseover",M)}(T)}}function Uc(p){16==p.keyCode&&(this.doc.sel.shift=!1),vi(this,p)}function Vc(p){var T=this;if(!(p.target&&p.target!=T.display.input.getField()||Et(T.display,p)||vi(T,p)||p.ctrlKey&&!p.altKey||gt&&p.metaKey)){var M=p.keyCode,I=p.charCode;if(D&&M==Ec)return Ec=null,void Pi(p);if(!D||p.which&&!(p.which<10)||!gh(T,p)){var L=String.fromCharCode(null==I?M:I);"\b"!=L&&(function(p,T,M){return gl(p,"'"+M+"'",T,function(I){return va(p,I,!0)})}(T,p,L)||T.display.input.onKeyPress(p))}}}var Eu,Tc,Bu=function(p,T,M){this.time=p,this.pos=T,this.button=M};function mh(p){var T=this,M=T.display;if(!(vi(T,p)||M.activeTouch&&M.input.supportsTouch())){if(M.input.ensurePolled(),M.shift=p.shiftKey,Et(M,p))return void(s||(M.scroller.draggable=!1,setTimeout(function(){return M.scroller.draggable=!0},100)));if(!lu(T,p)){var I=Qa(T,p),L=Nt(p),K=I?function(p,T){var M=+new Date;return Tc&&Tc.compare(M,p,T)?(Eu=Tc=null,"triple"):Eu&&Eu.compare(M,p,T)?(Tc=new Bu(M,p,T),Eu=null,"double"):(Eu=new Bu(M,p,T),Tc=null,"single")}(I,L):"single";window.focus(),1==L&&T.state.selectingText&&T.state.selectingText(p),(!I||!function(p,T,M,I,L){var K="Click";return"double"==I?K="Double"+K:"triple"==I&&(K="Triple"+K),gl(p,Lo(K=(1==T?"Left":2==T?"Middle":"Right")+K,L),L,function(pt){if("string"==typeof pt&&(pt=Pu[pt]),!pt)return!1;var Rt=!1;try{p.isReadOnly()&&(p.state.suppressEdits=!0),Rt=pt(p,M)!=Ze}finally{p.state.suppressEdits=!1}return Rt})}(T,L,I,K,p))&&(1==L?I?function(p,T,M,I){n?setTimeout(ve(lc,p),0):p.curOp.focus=Zt();var pt,L=function(p,T,M){var I=p.getOption("configureMouse"),L=I?I(p,T,M):{};return null==L.unit&&(L.unit=(wt?M.shiftKey&&M.metaKey:M.altKey)?"rectangle":"single"==T?"char":"double"==T?"word":"line"),(null==L.extend||p.doc.extend)&&(L.extend=p.doc.extend||M.shiftKey),null==L.addNew&&(L.addNew=gt?M.metaKey:M.ctrlKey),null==L.moveOnDrag&&(L.moveOnDrag=!(gt?M.altKey:M.ctrlKey)),L}(p,M,I),K=p.doc.sel;p.options.dragDrop&&pe&&!p.isReadOnly()&&"single"==M&&(pt=K.contains(T))>-1&&(On((pt=K.ranges[pt]).from(),T)<0||T.xRel>0)&&(On(pt.to(),T)>0||T.xRel<0)?function(p,T,M,I){var L=p.display,K=!1,pt=bo(p,function(qt){s&&(L.scroller.draggable=!1),p.state.draggingText=!1,p.state.delayingBlurEvent&&(p.hasFocus()?p.state.delayingBlurEvent=!1:ds(p)),Ii(L.wrapper.ownerDocument,"mouseup",pt),Ii(L.wrapper.ownerDocument,"mousemove",Rt),Ii(L.scroller,"dragstart",Ht),Ii(L.scroller,"drop",pt),K||(Pi(qt),I.addNew||wl(p.doc,M,null,null,I.extend),s&&!P||n&&9==r?setTimeout(function(){L.wrapper.ownerDocument.body.focus({preventScroll:!0}),L.input.focus()},20):L.input.focus())}),Rt=function(qt){K=K||Math.abs(T.clientX-qt.clientX)+Math.abs(T.clientY-qt.clientY)>=10},Ht=function(){return K=!0};s&&(L.scroller.draggable=!0),p.state.draggingText=pt,pt.copy=!I.moveOnDrag,li(L.wrapper.ownerDocument,"mouseup",pt),li(L.wrapper.ownerDocument,"mousemove",Rt),li(L.scroller,"dragstart",Ht),li(L.scroller,"drop",pt),p.state.delayingBlurEvent=!0,setTimeout(function(){return L.input.focus()},20),L.scroller.dragDrop&&L.scroller.dragDrop()}(p,I,T,L):function(p,T,M,I){n&&ds(p);var L=p.display,K=p.doc;Pi(T);var pt,Rt,Ht=K.sel,qt=Ht.ranges;if(I.addNew&&!I.extend?(Rt=K.sel.contains(M),pt=Rt>-1?qt[Rt]:new Lr(M,M)):(pt=K.sel.primary(),Rt=K.sel.primIndex),"rectangle"==I.unit)I.addNew||(pt=new Lr(M,M)),M=Qa(p,T,!0,!0),Rt=-1;else{var xe=Hu(p,M,I.unit);pt=I.extend?Uo(pt,xe.anchor,xe.head,I.extend):xe}I.addNew?-1==Rt?(Rt=qt.length,la(K,Ha(p,qt.concat([pt]),Rt),{scroll:!1,origin:"*mouse"})):qt.length>1&&qt[Rt].empty()&&"char"==I.unit&&!I.extend?(la(K,Ha(p,qt.slice(0,Rt).concat(qt.slice(Rt+1)),0),{scroll:!1,origin:"*mouse"}),Ht=K.sel):tc(K,Rt,pt,ci):(Rt=0,la(K,new ka([pt],0),ci),Ht=K.sel);var We=M;function _i(un){if(0!=On(We,un))if(We=un,"rectangle"==I.unit){for(var yn=[],Bn=p.options.tabSize,zn=Ie(Di(K,M.line).text,M.ch,Bn),hr=Ie(Di(K,un.line).text,un.ch,Bn),eo=Math.min(zn,hr),ns=Math.max(zn,hr),Vo=Math.min(M.line,un.line),ja=Math.min(p.lastLine(),Math.max(M.line,un.line));Vo<=ja;Vo++){var Ya=Di(K,Vo).text,Ls=Ae(Ya,eo,Bn);eo==ns?yn.push(new Lr(Ui(Vo,Ls),Ui(Vo,Ls))):Ya.length>Ls&&yn.push(new Lr(Ui(Vo,Ls),Ui(Vo,Ae(Ya,ns,Bn))))}yn.length||yn.push(new Lr(M,M)),la(K,Ha(p,Ht.ranges.slice(0,Rt).concat(yn),Rt),{origin:"*mouse",scroll:!1}),p.scrollIntoView(un)}else{var S,Ur=pt,Ns=Hu(p,un,I.unit),Ps=Ur.anchor;On(Ns.anchor,Ps)>0?(S=Ns.head,Ps=Ai(Ur.from(),Ns.anchor)):(S=Ns.anchor,Ps=Fe(Ur.to(),Ns.head));var B=Ht.ranges.slice(0);B[Rt]=function(p,T){var M=T.anchor,I=T.head,L=Di(p.doc,M.line);if(0==On(M,I)&&M.sticky==I.sticky)return T;var K=mi(L);if(!K)return T;var pt=Ri(K,M.ch,M.sticky),Rt=K[pt];if(Rt.from!=M.ch&&Rt.to!=M.ch)return T;var qt,Ht=pt+(Rt.from==M.ch==(1!=Rt.level)?0:1);if(0==Ht||Ht==K.length)return T;if(I.line!=M.line)qt=(I.line-M.line)*("ltr"==p.doc.direction?1:-1)>0;else{var xe=Ri(K,I.ch,I.sticky),We=xe-pt||(I.ch-M.ch)*(1==Rt.level?-1:1);qt=xe==Ht-1||xe==Ht?We<0:We>0}var _i=K[Ht+(qt?-1:0)],hi=qt==(1==_i.level),ki=hi?_i.from:_i.to,zi=hi?"after":"before";return M.ch==ki&&M.sticky==zi?T:new Lr(new Ui(M.line,ki,zi),I)}(p,new Lr(Xi(K,Ps),S)),la(K,Ha(p,B,Rt),ci)}}var hi=L.wrapper.getBoundingClientRect(),ki=0;function zi(un){var yn=++ki,Bn=Qa(p,un,!0,"rectangle"==I.unit);if(Bn)if(0!=On(Bn,We)){p.curOp.focus=Zt(),_i(Bn);var zn=Xl(L,K);(Bn.line>=zn.to||Bn.line<zn.from)&&setTimeout(bo(p,function(){ki==yn&&zi(un)}),150)}else{var hr=un.clientY<hi.top?-20:un.clientY>hi.bottom?20:0;hr&&setTimeout(bo(p,function(){ki==yn&&(L.scroller.scrollTop+=hr,zi(un))}),50)}}function Qi(un){p.state.selectingText=!1,ki=1/0,un&&(Pi(un),L.input.focus()),Ii(L.wrapper.ownerDocument,"mousemove",hn),Ii(L.wrapper.ownerDocument,"mouseup",vn),K.history.lastSelOrigin=null}var hn=bo(p,function(un){0!==un.buttons&&Nt(un)?zi(un):Qi(un)}),vn=bo(p,Qi);p.state.selectingText=vn,li(L.wrapper.ownerDocument,"mousemove",hn),li(L.wrapper.ownerDocument,"mouseup",vn)}(p,I,T,L)}(T,I,K,p):dt(p)==M.scroller&&Pi(p):2==L?(I&&wl(T.doc,I),setTimeout(function(){return M.input.focus()},20)):3==L&&(St?T.display.input.onContextMenu(p):ds(T)))}}}function Hu(p,T,M){if("char"==M)return new Lr(T,T);if("word"==M)return p.findWordAt(T);if("line"==M)return new Lr(Ui(T.line,0),Xi(p.doc,Ui(T.line+1,0)));var I=M(p,T);return new Lr(I.from,I.to)}function Da(p,T,M,I){var L,K;if(T.touches)L=T.touches[0].clientX,K=T.touches[0].clientY;else try{L=T.clientX,K=T.clientY}catch(_i){return!1}if(L>=Math.floor(p.display.gutters.getBoundingClientRect().right))return!1;I&&Pi(T);var pt=p.display,Rt=pt.lineDiv.getBoundingClientRect();if(K>Rt.bottom||!Qe(p,M))return ge(T);K-=Rt.top-pt.viewOffset;for(var Ht=0;Ht<p.display.gutterSpecs.length;++Ht){var qt=pt.gutters.childNodes[Ht];if(qt&&qt.getBoundingClientRect().right>=L)return ni(p,M,p,Sr(p.doc,K),p.display.gutterSpecs[Ht].className,T),ge(T)}}function lu(p,T){return Da(p,T,"gutterClick",!0)}function Wl(p,T){Et(p.display,T)||function(p,T){return!!Qe(p,"gutterContextMenu")&&Da(p,T,"gutterContextMenu",!1)}(p,T)||vi(p,T,"contextmenu")||St||p.display.input.onContextMenu(T)}function ua(p){p.display.wrapper.className=p.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+p.options.theme.replace(/(^|\s)\s*/g," cm-s-"),zs(p)}Bu.prototype.compare=function(p,T,M){return this.time+400>p&&0==On(T,this.pos)&&M==this.button};var zl={toString:function(){return"CodeMirror.Init"}},Uu={},Vu={};function Gu(p,T,M){if(!T!=!(M&&M!=zl)){var L=p.display.dragFunctions,K=T?li:Ii;K(p.display.scroller,"dragstart",L.start),K(p.display.scroller,"dragenter",L.enter),K(p.display.scroller,"dragover",L.over),K(p.display.scroller,"dragleave",L.leave),K(p.display.scroller,"drop",L.drop)}}function Ah(p){p.options.lineWrapping?(vt(p.display.wrapper,"CodeMirror-wrap"),p.display.sizer.style.minWidth="",p.display.sizerWidth=null):(ft(p.display.wrapper,"CodeMirror-wrap"),Na(p)),kl(p),Ho(p),zs(p),setTimeout(function(){return kr(p)},100)}function Io(p,T){var M=this;if(!(this instanceof Io))return new Io(p,T);this.options=T=T?oe(T):{},oe(Uu,T,!1);var I=T.value;"string"==typeof I?I=new ps(I,T.mode,null,T.lineSeparator,T.direction):T.mode&&(I.modeOption=T.mode),this.doc=I;var L=new Io.inputStyles[T.inputStyle](this),K=this.display=new fo(p,I,L,T);for(var pt in K.wrapper.CodeMirror=this,ua(this),T.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Xs(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Re,keySeq:null,specialChars:null},T.autofocus&&!Ft&&K.input.focus(),n&&r<11&&setTimeout(function(){return M.display.input.reset(!0)},20),function(p){var T=p.display;li(T.scroller,"mousedown",bo(p,mh)),li(T.scroller,"dblclick",n&&r<11?bo(p,function(Ht){if(!vi(p,Ht)){var qt=Qa(p,Ht);if(qt&&!lu(p,Ht)&&!Et(p.display,Ht)){Pi(Ht);var xe=p.findWordAt(qt);wl(p.doc,xe.anchor,xe.head)}}}):function(Ht){return vi(p,Ht)||Pi(Ht)}),li(T.scroller,"contextmenu",function(Ht){return Wl(p,Ht)}),li(T.input.getField(),"contextmenu",function(Ht){T.scroller.contains(Ht.target)||Wl(p,Ht)});var M,I={end:0};function L(){T.activeTouch&&(M=setTimeout(function(){return T.activeTouch=null},1e3),(I=T.activeTouch).end=+new Date)}function K(Ht){if(1!=Ht.touches.length)return!1;var qt=Ht.touches[0];return qt.radiusX<=1&&qt.radiusY<=1}function pt(Ht,qt){if(null==qt.left)return!0;var xe=qt.left-Ht.left,We=qt.top-Ht.top;return xe*xe+We*We>400}li(T.scroller,"touchstart",function(Ht){if(!vi(p,Ht)&&!K(Ht)&&!lu(p,Ht)){T.input.ensurePolled(),clearTimeout(M);var qt=+new Date;T.activeTouch={start:qt,moved:!1,prev:qt-I.end<=300?I:null},1==Ht.touches.length&&(T.activeTouch.left=Ht.touches[0].pageX,T.activeTouch.top=Ht.touches[0].pageY)}}),li(T.scroller,"touchmove",function(){T.activeTouch&&(T.activeTouch.moved=!0)}),li(T.scroller,"touchend",function(Ht){var qt=T.activeTouch;if(qt&&!Et(T,Ht)&&null!=qt.left&&!qt.moved&&new Date-qt.start<300){var We,xe=p.coordsChar(T.activeTouch,"page");We=!qt.prev||pt(qt,qt.prev)?new Lr(xe,xe):!qt.prev.prev||pt(qt,qt.prev.prev)?p.findWordAt(xe):new Lr(Ui(xe.line,0),Xi(p.doc,Ui(xe.line+1,0))),p.setSelection(We.anchor,We.head),p.focus(),Pi(Ht)}L()}),li(T.scroller,"touchcancel",L),li(T.scroller,"scroll",function(){T.scroller.clientHeight&&(Ue(p,T.scroller.scrollTop),xi(p,T.scroller.scrollLeft,!0),ni(p,"scroll",p))}),li(T.scroller,"mousewheel",function(Ht){return Qc(p,Ht)}),li(T.scroller,"DOMMouseScroll",function(Ht){return Qc(p,Ht)}),li(T.wrapper,"scroll",function(){return T.wrapper.scrollTop=T.wrapper.scrollLeft=0}),T.dragFunctions={enter:function(Ht){vi(p,Ht)||Pt(Ht)},over:function(Ht){vi(p,Ht)||(function(p,T){var M=Qa(p,T);if(M){var I=document.createDocumentFragment();El(p,M,I),p.display.dragCursor||(p.display.dragCursor=ut("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),p.display.lineSpace.insertBefore(p.display.dragCursor,p.display.cursorDiv)),Gt(p.display.dragCursor,I)}}(p,Ht),Pt(Ht))},start:function(Ht){return function(p,T){if(n&&(!p.state.draggingText||+new Date-Bc<100))Pt(T);else if(!vi(p,T)&&!Et(p.display,T)&&(T.dataTransfer.setData("Text",p.getSelection()),T.dataTransfer.effectAllowed="copyMove",T.dataTransfer.setDragImage&&!P)){var M=ut("img",null,null,"position: fixed; left: 0; top: 0;");M.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",D&&(M.width=M.height=1,p.display.wrapper.appendChild(M),M._top=M.offsetTop),T.dataTransfer.setDragImage(M,0,0),D&&M.parentNode.removeChild(M)}}(p,Ht)},drop:bo(p,Tt),leave:function(Ht){vi(p,Ht)||Oe(p)}};var Rt=T.input.getField();li(Rt,"keyup",function(Ht){return Uc.call(p,Ht)}),li(Rt,"keydown",bo(p,su)),li(Rt,"keypress",bo(p,Vc)),li(Rt,"focus",function(Ht){return Ys(p,Ht)}),li(Rt,"blur",function(Ht){return Fa(p,Ht)})}(this),Je(),As(this),this.curOp.forceUpdate=!0,Er(this,I),T.autofocus&&!Ft||this.hasFocus()?setTimeout(function(){M.hasFocus()&&!M.state.focused&&Ys(M)},20):Fa(this),Vu)Vu.hasOwnProperty(pt)&&Vu[pt](this,T[pt],zl);kc(this),T.finishInit&&T.finishInit(this);for(var Rt=0;Rt<oh.length;++Rt)oh[Rt](this);ys(this),s&&T.lineWrapping&&"optimizelegibility"==getComputedStyle(K.lineDiv).textRendering&&(K.lineDiv.style.textRendering="auto")}Io.defaults=Uu,Io.optionHandlers=Vu;var oh=[];function Sc(p,T,M,I){var K,L=p.doc;null==M&&(M="add"),"smart"==M&&(L.mode.indent?K=ro(p,T).state:M="prev");var pt=p.options.tabSize,Rt=Di(L,T),Ht=Ie(Rt.text,null,pt);Rt.stateAfter&&(Rt.stateAfter=null);var xe,qt=Rt.text.match(/^\s*/)[0];if(I||/\S/.test(Rt.text)){if("smart"==M&&((xe=L.mode.indent(K,Rt.text.slice(qt.length),Rt.text))==Ze||xe>150)){if(!I)return;M="prev"}}else xe=0,M="not";"prev"==M?xe=T>L.first?Ie(Di(L,T-1).text,null,pt):0:"add"==M?xe=Ht+p.options.indentUnit:"subtract"==M?xe=Ht-p.options.indentUnit:"number"==typeof M&&(xe=Ht+M),xe=Math.max(0,xe);var We="",_i=0;if(p.options.indentWithTabs)for(var hi=Math.floor(xe/pt);hi;--hi)_i+=pt,We+="\t";if(_i<xe&&(We+=ee(xe-_i)),We!=qt)return Vl(L,We,Ui(T,0),Ui(T,qt.length),"+input"),Rt.stateAfter=null,!0;for(var ki=0;ki<L.sel.ranges.length;ki++){var zi=L.sel.ranges[ki];if(zi.head.line==T&&zi.head.ch<qt.length){var Qi=Ui(T,qt.length);tc(L,ki,new Lr(Qi,Qi));break}}}Io.defineInitHook=function(p){return oh.push(p)};var nl=null;function cu(p){nl=p}function Wu(p,T,M,I,L){var K=p.doc;p.display.shift=!1,I||(I=K.sel);var pt=+new Date-200,Rt="paste"==L||p.state.pasteIncoming>pt,Ht=ir(T),qt=null;if(Rt&&I.ranges.length>1)if(nl&&nl.text.join("\n")==T){if(I.ranges.length%nl.text.length==0){qt=[];for(var xe=0;xe<nl.text.length;xe++)qt.push(K.splitLines(nl.text[xe]))}}else Ht.length==I.ranges.length&&p.options.pasteLinesPerSelection&&(qt=Yt(Ht,function(hn){return[hn]}));for(var We=p.curOp.updateInput,_i=I.ranges.length-1;_i>=0;_i--){var hi=I.ranges[_i],ki=hi.from(),zi=hi.to();hi.empty()&&(M&&M>0?ki=Ui(ki.line,ki.ch-M):p.state.overwrite&&!Rt?zi=Ui(zi.line,Math.min(Di(K,zi.line).text.length,zi.ch+Mt(Ht).length)):Rt&&nl&&nl.lineWise&&nl.text.join("\n")==Ht.join("\n")&&(ki=zi=Ui(ki.line,0)));var Qi={from:ki,to:zi,text:qt?qt[_i%qt.length]:Ht,origin:L||(Rt?"paste":p.state.cutIncoming>pt?"cut":"+input")};Nc(p.doc,Qi),rr(p,"inputRead",p,Qi)}T&&!Rt&&xh(p,T),at(p),p.curOp.updateInput<2&&(p.curOp.updateInput=We),p.curOp.typing=!0,p.state.pasteIncoming=p.state.cutIncoming=-1}function zu(p,T){var M=p.clipboardData&&p.clipboardData.getData("Text");if(M)return p.preventDefault(),!T.isReadOnly()&&!T.options.disableInput&&Os(T,function(){return Wu(T,M,0,null,"paste")}),!0}function xh(p,T){if(p.options.electricChars&&p.options.smartIndent)for(var M=p.doc.sel,I=M.ranges.length-1;I>=0;I--){var L=M.ranges[I];if(!(L.head.ch>100||I&&M.ranges[I-1].head.line==L.head.line)){var K=p.getModeAt(L.head),pt=!1;if(K.electricChars){for(var Rt=0;Rt<K.electricChars.length;Rt++)if(T.indexOf(K.electricChars.charAt(Rt))>-1){pt=Sc(p,L.head.line,"smart");break}}else K.electricInput&&K.electricInput.test(Di(p.doc,L.head.line).text.slice(0,L.head.ch))&&(pt=Sc(p,L.head.line,"smart"));pt&&rr(p,"electricInput",p,L.head.line)}}}function Tu(p){for(var T=[],M=[],I=0;I<p.doc.sel.ranges.length;I++){var L=p.doc.sel.ranges[I].head.line,K={anchor:Ui(L,0),head:Ui(L+1,0)};M.push(K),T.push(p.getRange(K.anchor,K.head))}return{text:T,ranges:M}}function sh(p,T,M,I){p.setAttribute("autocorrect",M?"":"off"),p.setAttribute("autocapitalize",I?"":"off"),p.setAttribute("spellcheck",!!T)}function ju(){var p=ut("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),T=ut("div",[p],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return s?p.style.width="1000px":p.setAttribute("wrap","off"),q&&(p.style.border="1px solid black"),sh(p),T}function Gc(p,T,M,I,L){var K=T,pt=M,Rt=Di(p,T.line),Ht=L&&"rtl"==p.direction?-M:M;function xe(vn){var un;if("codepoint"==I){var yn=Rt.text.charCodeAt(T.ch+(M>0?0:-1));un=isNaN(yn)?null:new Ui(T.line,Math.max(0,Math.min(Rt.text.length,T.ch+M*((M>0?yn>=55296&&yn<56320:yn>=56320&&yn<57343)?2:1))),-M)}else un=L?function(p,T,M,I){var L=mi(T,p.doc.direction);if(!L)return za(T,M,I);M.ch>=T.text.length?(M.ch=T.text.length,M.sticky="before"):M.ch<=0&&(M.ch=0,M.sticky="after");var K=Ri(L,M.ch,M.sticky),pt=L[K];if("ltr"==p.doc.direction&&pt.level%2==0&&(I>0?pt.to>M.ch:pt.from<M.ch))return za(T,M,I);var Ht,Rt=function(hn,vn){return ks(T,hn instanceof Ui?hn.ch:hn,vn)},qt=function(hn){return p.options.lineWrapping?(Ht=Ht||Fn(p,T),fr(p,T,Ht,hn)):{begin:0,end:T.text.length}},xe=qt("before"==M.sticky?Rt(M,-1):M.ch);if("rtl"==p.doc.direction||1==pt.level){var We=1==pt.level==I<0,_i=Rt(M,We?1:-1);if(null!=_i&&(We?_i<=pt.to&&_i<=xe.end:_i>=pt.from&&_i>=xe.begin))return new Ui(M.line,_i,We?"before":"after")}var ki=function(hn,vn,un){for(;hn>=0&&hn<L.length;hn+=vn){var Bn=L[hn],zn=vn>0==(1!=Bn.level),hr=zn?un.begin:Rt(un.end,-1);if(Bn.from<=hr&&hr<Bn.to||(hr=zn?Bn.from:Rt(Bn.to,-1),un.begin<=hr&&hr<un.end))return eo=hr,zn?new Ui(M.line,Rt(eo,1),"before"):new Ui(M.line,eo,"after")}var eo},zi=ki(K+I,I,xe);if(zi)return zi;var Qi=I>0?xe.end:Rt(xe.begin,-1);return null==Qi||I>0&&Qi==T.text.length||!(zi=ki(I>0?0:L.length-1,I,qt(Qi)))?null:zi}(p.cm,Rt,T,M):za(Rt,T,M);if(null==un){if(vn||!function(){var vn=T.line+Ht;return!(vn<p.first||vn>=p.first+p.size)&&(T=new Ui(vn,T.ch,T.sticky),Rt=Di(p,vn))}())return!1;T=bu(L,p.cm,Rt,T.line,Ht)}else T=un;return!0}if("char"==I||"codepoint"==I)xe();else if("column"==I)xe(!0);else if("word"==I||"group"==I)for(var We=null,_i="group"==I,hi=p.cm&&p.cm.getHelper(T,"wordChars"),ki=!0;!(M<0)||xe(!ki);ki=!1){var zi=Rt.text.charAt(T.ch)||"\n",Qi=Me(zi,hi)?"w":_i&&"\n"==zi?"n":!_i||/\s/.test(zi)?null:"p";if(_i&&!ki&&!Qi&&(Qi="s"),We&&We!=Qi){M<0&&(M=1,xe(),T.sticky="after");break}if(Qi&&(We=Qi),M>0&&!xe(!ki))break}var hn=_c(p,T,K,pt,!0);return Nn(K,hn)&&(hn.hitSide=!0),hn}function wc(p,T,M,I){var pt,qt,L=p.doc,K=T.left;if("page"==I){var Rt=Math.min(p.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),Ht=Math.max(Rt-.5*hs(p.display),3);pt=(M>0?T.bottom:T.top)+M*Ht}else"line"==I&&(pt=M>0?T.bottom+3:T.top-3);for(;(qt=bn(p,K,pt)).outside;){if(M<0?pt<=0:pt>=L.height){qt.hitSide=!0;break}pt+=5*M}return qt}var To=function(p){this.cm=p,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Re,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function bh(p,T){var M=Pn(p,T.line);if(!M||M.hidden)return null;var I=Di(p.doc,T.line),L=fn(M,I,T.line),K=mi(I,p.doc.direction),pt="left";K&&(pt=Ri(K,T.ch)%2?"right":"left");var Ht=Kr(L.map,T.ch,pt);return Ht.offset="right"==Ht.collapse?Ht.end:Ht.start,Ht}function Rc(p,T){return T&&(p.bad=!0),p}function rl(p,T,M){var I;if(T==p.display.lineDiv){if(!(I=p.display.lineDiv.childNodes[M]))return Rc(p.clipPos(Ui(p.display.viewTo-1)),!0);T=null,M=0}else for(I=T;;I=I.parentNode){if(!I||I==p.display.lineDiv)return null;if(I.parentNode&&I.parentNode==p.display.lineDiv)break}for(var L=0;L<p.display.view.length;L++){var K=p.display.view[L];if(K.node==I)return rc(K,T,M)}}function rc(p,T,M){var I=p.text.firstChild,L=!1;if(!T||!Z(I,T))return Rc(Ui(ar(p.line),0),!0);if(T==I&&(L=!0,T=I.childNodes[M],M=0,!T)){var K=p.rest?Mt(p.rest):p.line;return Rc(Ui(ar(K),K.text.length),L)}var pt=3==T.nodeType?T:null,Rt=T;for(!pt&&1==T.childNodes.length&&3==T.firstChild.nodeType&&(pt=T.firstChild,M&&(M=pt.nodeValue.length));Rt.parentNode!=I;)Rt=Rt.parentNode;var Ht=p.measure,qt=Ht.maps;function xe(Qi,hn,vn){for(var un=-1;un<(qt?qt.length:0);un++)for(var yn=un<0?Ht.map:qt[un],Bn=0;Bn<yn.length;Bn+=3){var zn=yn[Bn+2];if(zn==Qi||zn==hn){var hr=ar(un<0?p.line:p.rest[un]),eo=yn[Bn]+vn;return(vn<0||zn!=Qi)&&(eo=yn[Bn+(vn?1:0)]),Ui(hr,eo)}}}var We=xe(pt,Rt,M);if(We)return Rc(We,L);for(var _i=Rt.nextSibling,hi=pt?pt.nodeValue.length-M:0;_i;_i=_i.nextSibling){if(We=xe(_i,_i.firstChild,0))return Rc(Ui(We.line,We.ch-hi),L);hi+=_i.textContent.length}for(var ki=Rt.previousSibling,zi=M;ki;ki=ki.previousSibling){if(We=xe(ki,ki.firstChild,-1))return Rc(Ui(We.line,We.ch+zi),L);zi+=ki.textContent.length}}To.prototype.init=function(p){var T=this,M=this,I=M.cm,L=M.div=p.lineDiv;function K(Rt){for(var Ht=Rt.target;Ht;Ht=Ht.parentNode){if(Ht==L)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Ht.className))break}return!1}function pt(Rt){if(K(Rt)&&!vi(I,Rt)){if(I.somethingSelected())cu({lineWise:!1,text:I.getSelections()}),"cut"==Rt.type&&I.replaceSelection("",null,"cut");else{if(!I.options.lineWiseCopyCut)return;var Ht=Tu(I);cu({lineWise:!0,text:Ht.text}),"cut"==Rt.type&&I.operation(function(){I.setSelections(Ht.ranges,0,we),I.replaceSelection("",null,"cut")})}if(Rt.clipboardData){Rt.clipboardData.clearData();var qt=nl.text.join("\n");if(Rt.clipboardData.setData("Text",qt),Rt.clipboardData.getData("Text")==qt)return void Rt.preventDefault()}var xe=ju(),We=xe.firstChild;I.display.lineSpace.insertBefore(xe,I.display.lineSpace.firstChild),We.value=nl.text.join("\n");var _i=Zt();re(We),setTimeout(function(){I.display.lineSpace.removeChild(xe),_i.focus(),_i==L&&M.showPrimarySelection()},50)}}L.contentEditable=!0,sh(L,I.options.spellcheck,I.options.autocorrect,I.options.autocapitalize),li(L,"paste",function(Rt){!K(Rt)||vi(I,Rt)||zu(Rt,I)||r<=11&&setTimeout(bo(I,function(){return T.updateFromDOM()}),20)}),li(L,"compositionstart",function(Rt){T.composing={data:Rt.data,done:!1}}),li(L,"compositionupdate",function(Rt){T.composing||(T.composing={data:Rt.data,done:!1})}),li(L,"compositionend",function(Rt){T.composing&&(Rt.data!=T.composing.data&&T.readFromDOMSoon(),T.composing.done=!0)}),li(L,"touchstart",function(){return M.forceCompositionEnd()}),li(L,"input",function(){T.composing||T.readFromDOMSoon()}),li(L,"copy",pt),li(L,"cut",pt)},To.prototype.screenReaderLabelChanged=function(p){p?this.div.setAttribute("aria-label",p):this.div.removeAttribute("aria-label")},To.prototype.prepareSelection=function(){var p=Ll(this.cm,!1);return p.focus=Zt()==this.div,p},To.prototype.showSelection=function(p,T){!p||!this.cm.display.view.length||((p.focus||T)&&this.showPrimarySelection(),this.showMultipleSelections(p))},To.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},To.prototype.showPrimarySelection=function(){var p=this.getSelection(),T=this.cm,M=T.doc.sel.primary(),I=M.from(),L=M.to();if(T.display.viewTo==T.display.viewFrom||I.line>=T.display.viewTo||L.line<T.display.viewFrom)p.removeAllRanges();else{var K=rl(T,p.anchorNode,p.anchorOffset),pt=rl(T,p.focusNode,p.focusOffset);if(!K||K.bad||!pt||pt.bad||0!=On(Ai(K,pt),I)||0!=On(Fe(K,pt),L)){var Rt=T.display.view,Ht=I.line>=T.display.viewFrom&&bh(T,I)||{node:Rt[0].measure.map[2],offset:0},qt=L.line<T.display.viewTo&&bh(T,L);if(!qt){var xe=Rt[Rt.length-1].measure,We=xe.maps?xe.maps[xe.maps.length-1]:xe.map;qt={node:We[We.length-1],offset:We[We.length-2]-We[We.length-3]}}if(!Ht||!qt)return void p.removeAllRanges();var hi,_i=p.rangeCount&&p.getRangeAt(0);try{hi=st(Ht.node,Ht.offset,qt.offset,qt.node)}catch(ki){}hi&&(!y&&T.state.focused?(p.collapse(Ht.node,Ht.offset),hi.collapsed||(p.removeAllRanges(),p.addRange(hi))):(p.removeAllRanges(),p.addRange(hi)),_i&&null==p.anchorNode?p.addRange(_i):y&&this.startGracePeriod()),this.rememberSelection()}}},To.prototype.startGracePeriod=function(){var p=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){p.gracePeriod=!1,p.selectionChanged()&&p.cm.operation(function(){return p.cm.curOp.selectionChanged=!0})},20)},To.prototype.showMultipleSelections=function(p){Gt(this.cm.display.cursorDiv,p.cursors),Gt(this.cm.display.selectionDiv,p.selection)},To.prototype.rememberSelection=function(){var p=this.getSelection();this.lastAnchorNode=p.anchorNode,this.lastAnchorOffset=p.anchorOffset,this.lastFocusNode=p.focusNode,this.lastFocusOffset=p.focusOffset},To.prototype.selectionInEditor=function(){var p=this.getSelection();if(!p.rangeCount)return!1;var T=p.getRangeAt(0).commonAncestorContainer;return Z(this.div,T)},To.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||Zt()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},To.prototype.blur=function(){this.div.blur()},To.prototype.getField=function(){return this.div},To.prototype.supportsTouch=function(){return!0},To.prototype.receivedFocus=function(){var p=this,T=this;this.selectionInEditor()?setTimeout(function(){return p.pollSelection()},20):Os(this.cm,function(){return T.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function M(){T.cm.state.focused&&(T.pollSelection(),T.polling.set(T.cm.options.pollInterval,M))})},To.prototype.selectionChanged=function(){var p=this.getSelection();return p.anchorNode!=this.lastAnchorNode||p.anchorOffset!=this.lastAnchorOffset||p.focusNode!=this.lastFocusNode||p.focusOffset!=this.lastFocusOffset},To.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var p=this.getSelection(),T=this.cm;if(bt&&v&&this.cm.display.gutterSpecs.length&&function(p){for(var T=p;T;T=T.parentNode)if(/CodeMirror-gutter-wrapper/.test(T.className))return!0;return!1}(p.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var M=rl(T,p.anchorNode,p.anchorOffset),I=rl(T,p.focusNode,p.focusOffset);M&&I&&Os(T,function(){la(T.doc,dc(M,I),we),(M.bad||I.bad)&&(T.curOp.selectionChanged=!0)})}}},To.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var K,pt,Rt,p=this.cm,T=p.display,M=p.doc.sel.primary(),I=M.from(),L=M.to();if(0==I.ch&&I.line>p.firstLine()&&(I=Ui(I.line-1,Di(p.doc,I.line-1).length)),L.ch==Di(p.doc,L.line).text.length&&L.line<p.lastLine()&&(L=Ui(L.line+1,0)),I.line<T.viewFrom||L.line>T.viewTo-1)return!1;I.line==T.viewFrom||0==(K=Ms(p,I.line))?(pt=ar(T.view[0].line),Rt=T.view[0].node):(pt=ar(T.view[K].line),Rt=T.view[K-1].node.nextSibling);var qt,xe,Ht=Ms(p,L.line);if(Ht==T.view.length-1?(qt=T.viewTo-1,xe=T.lineDiv.lastChild):(qt=ar(T.view[Ht+1].line)-1,xe=T.view[Ht+1].node.previousSibling),!Rt)return!1;for(var We=p.doc.splitLines(function(p,T,M,I,L){var K="",pt=!1,Rt=p.doc.lineSeparator(),Ht=!1;function xe(){pt&&(K+=Rt,Ht&&(K+=Rt),pt=Ht=!1)}function We(hi){hi&&(xe(),K+=hi)}function _i(hi){if(1==hi.nodeType){var ki=hi.getAttribute("cm-text");if(ki)return void We(ki);var Qi,zi=hi.getAttribute("cm-marker");if(zi){var hn=p.findMarks(Ui(I,0),Ui(L+1,0),function(hi){return function(ki){return ki.id==hi}}(+zi));return void(hn.length&&(Qi=hn[0].find(0))&&We(An(p.doc,Qi.from,Qi.to).join(Rt)))}if("false"==hi.getAttribute("contenteditable"))return;var vn=/^(pre|div|p|li|table|br)$/i.test(hi.nodeName);if(!/^br$/i.test(hi.nodeName)&&0==hi.textContent.length)return;vn&&xe();for(var un=0;un<hi.childNodes.length;un++)_i(hi.childNodes[un]);/^(pre|p)$/i.test(hi.nodeName)&&(Ht=!0),vn&&(pt=!0)}else 3==hi.nodeType&&We(hi.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;_i(T),T!=M;)T=T.nextSibling,Ht=!1;return K}(p,Rt,xe,pt,qt)),_i=An(p.doc,Ui(pt,0),Ui(qt,Di(p.doc,qt).text.length));We.length>1&&_i.length>1;)if(Mt(We)==Mt(_i))We.pop(),_i.pop(),qt--;else{if(We[0]!=_i[0])break;We.shift(),_i.shift(),pt++}for(var hi=0,ki=0,zi=We[0],Qi=_i[0],hn=Math.min(zi.length,Qi.length);hi<hn&&zi.charCodeAt(hi)==Qi.charCodeAt(hi);)++hi;for(var vn=Mt(We),un=Mt(_i),yn=Math.min(vn.length-(1==We.length?hi:0),un.length-(1==_i.length?hi:0));ki<yn&&vn.charCodeAt(vn.length-ki-1)==un.charCodeAt(un.length-ki-1);)++ki;if(1==We.length&&1==_i.length&&pt==I.line)for(;hi&&hi>I.ch&&vn.charCodeAt(vn.length-ki-1)==un.charCodeAt(un.length-ki-1);)hi--,ki++;We[We.length-1]=vn.slice(0,vn.length-ki).replace(/^\u200b+/,""),We[0]=We[0].slice(hi).replace(/\u200b+$/,"");var Bn=Ui(pt,hi),zn=Ui(qt,_i.length?Mt(_i).length-ki:0);return We.length>1||We[0]||On(Bn,zn)?(Vl(p.doc,We,Bn,zn,"+input"),!0):void 0},To.prototype.ensurePolled=function(){this.forceCompositionEnd()},To.prototype.reset=function(){this.forceCompositionEnd()},To.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},To.prototype.readFromDOMSoon=function(){var p=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(p.readDOMTimeout=null,p.composing){if(!p.composing.done)return;p.composing=null}p.updateFromDOM()},80))},To.prototype.updateFromDOM=function(){var p=this;(this.cm.isReadOnly()||!this.pollContent())&&Os(this.cm,function(){return Ho(p.cm)})},To.prototype.setUneditable=function(p){p.contentEditable="false"},To.prototype.onKeyPress=function(p){0==p.charCode||this.composing||(p.preventDefault(),this.cm.isReadOnly()||bo(this.cm,Wu)(this.cm,String.fromCharCode(null==p.charCode?p.keyCode:p.charCode),0))},To.prototype.readOnlyChanged=function(p){this.div.contentEditable=String("nocursor"!=p)},To.prototype.onContextMenu=function(){},To.prototype.resetPosition=function(){},To.prototype.needsContentAttribute=!0;var fs=function(p){this.cm=p,this.prevInput="",this.pollingFast=!1,this.polling=new Re,this.hasSelection=!1,this.composing=null};fs.prototype.init=function(p){var T=this,M=this,I=this.cm;this.createField(p);var L=this.textarea;function K(pt){if(!vi(I,pt)){if(I.somethingSelected())cu({lineWise:!1,text:I.getSelections()});else{if(!I.options.lineWiseCopyCut)return;var Rt=Tu(I);cu({lineWise:!0,text:Rt.text}),"cut"==pt.type?I.setSelections(Rt.ranges,null,we):(M.prevInput="",L.value=Rt.text.join("\n"),re(L))}"cut"==pt.type&&(I.state.cutIncoming=+new Date)}}p.wrapper.insertBefore(this.wrapper,p.wrapper.firstChild),q&&(L.style.width="0px"),li(L,"input",function(){n&&r>=9&&T.hasSelection&&(T.hasSelection=null),M.poll()}),li(L,"paste",function(pt){vi(I,pt)||zu(pt,I)||(I.state.pasteIncoming=+new Date,M.fastPoll())}),li(L,"cut",K),li(L,"copy",K),li(p.scroller,"paste",function(pt){if(!Et(p,pt)&&!vi(I,pt)){if(!L.dispatchEvent)return I.state.pasteIncoming=+new Date,void M.focus();var Rt=new Event("paste");Rt.clipboardData=pt.clipboardData,L.dispatchEvent(Rt)}}),li(p.lineSpace,"selectstart",function(pt){Et(p,pt)||Pi(pt)}),li(L,"compositionstart",function(){var pt=I.getCursor("from");M.composing&&M.composing.range.clear(),M.composing={start:pt,range:I.markText(pt,I.getCursor("to"),{className:"CodeMirror-composing"})}}),li(L,"compositionend",function(){M.composing&&(M.poll(),M.composing.range.clear(),M.composing=null)})},fs.prototype.createField=function(p){this.wrapper=ju(),this.textarea=this.wrapper.firstChild},fs.prototype.screenReaderLabelChanged=function(p){p?this.textarea.setAttribute("aria-label",p):this.textarea.removeAttribute("aria-label")},fs.prototype.prepareSelection=function(){var p=this.cm,T=p.display,M=p.doc,I=Ll(p);if(p.options.moveInputWithCursor){var L=Zo(p,M.sel.primary().head,"div"),K=T.wrapper.getBoundingClientRect(),pt=T.lineDiv.getBoundingClientRect();I.teTop=Math.max(0,Math.min(T.wrapper.clientHeight-10,L.top+pt.top-K.top)),I.teLeft=Math.max(0,Math.min(T.wrapper.clientWidth-10,L.left+pt.left-K.left))}return I},fs.prototype.showSelection=function(p){var M=this.cm.display;Gt(M.cursorDiv,p.cursors),Gt(M.selectionDiv,p.selection),null!=p.teTop&&(this.wrapper.style.top=p.teTop+"px",this.wrapper.style.left=p.teLeft+"px")},fs.prototype.reset=function(p){if(!this.contextMenuPending&&!this.composing){var T=this.cm;if(T.somethingSelected()){this.prevInput="";var M=T.getSelection();this.textarea.value=M,T.state.focused&&re(this.textarea),n&&r>=9&&(this.hasSelection=M)}else p||(this.prevInput=this.textarea.value="",n&&r>=9&&(this.hasSelection=null))}},fs.prototype.getField=function(){return this.textarea},fs.prototype.supportsTouch=function(){return!1},fs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Ft||Zt()!=this.textarea))try{this.textarea.focus()}catch(p){}},fs.prototype.blur=function(){this.textarea.blur()},fs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},fs.prototype.receivedFocus=function(){this.slowPoll()},fs.prototype.slowPoll=function(){var p=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){p.poll(),p.cm.state.focused&&p.slowPoll()})},fs.prototype.fastPoll=function(){var p=!1,T=this;T.pollingFast=!0,T.polling.set(20,function M(){T.poll()||p?(T.pollingFast=!1,T.slowPoll()):(p=!0,T.polling.set(60,M))})},fs.prototype.poll=function(){var p=this,T=this.cm,M=this.textarea,I=this.prevInput;if(this.contextMenuPending||!T.state.focused||pi(M)&&!I&&!this.composing||T.isReadOnly()||T.options.disableInput||T.state.keySeq)return!1;var L=M.value;if(L==I&&!T.somethingSelected())return!1;if(n&&r>=9&&this.hasSelection===L||gt&&/[\uf700-\uf7ff]/.test(L))return T.display.input.reset(),!1;if(T.doc.sel==T.display.selForContextMenu){var K=L.charCodeAt(0);if(8203==K&&!I&&(I="\u200b"),8666==K)return this.reset(),this.cm.execCommand("undo")}for(var pt=0,Rt=Math.min(I.length,L.length);pt<Rt&&I.charCodeAt(pt)==L.charCodeAt(pt);)++pt;return Os(T,function(){Wu(T,L.slice(pt),I.length-pt,null,p.composing?"*compose":null),L.length>1e3||L.indexOf("\n")>-1?M.value=p.prevInput="":p.prevInput=L,p.composing&&(p.composing.range.clear(),p.composing.range=T.markText(p.composing.start,T.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},fs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},fs.prototype.onKeyPress=function(){n&&r>=9&&(this.hasSelection=null),this.fastPoll()},fs.prototype.onContextMenu=function(p){var T=this,M=T.cm,I=M.display,L=T.textarea;T.contextMenuPending&&T.contextMenuPending();var K=Qa(M,p),pt=I.scroller.scrollTop;if(K&&!D){M.options.resetSelectionOnContextMenu&&-1==M.doc.sel.contains(K)&&bo(M,la)(M.doc,dc(K),we);var We,Ht=L.style.cssText,qt=T.wrapper.style.cssText,xe=T.wrapper.offsetParent.getBoundingClientRect();if(T.wrapper.style.cssText="position: static",L.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(p.clientY-xe.top-5)+"px; left: "+(p.clientX-xe.left-5)+"px;\n      z-index: 1000; background: "+(n?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",s&&(We=window.scrollY),I.input.focus(),s&&window.scrollTo(null,We),I.input.reset(),M.somethingSelected()||(L.value=T.prevInput=" "),T.contextMenuPending=hi,I.selForContextMenu=M.doc.sel,clearTimeout(I.detectingSelectAll),n&&r>=9&&_i(),St){Pt(p);var ki=function(){Ii(window,"mouseup",ki),setTimeout(hi,20)};li(window,"mouseup",ki)}else setTimeout(hi,50)}function _i(){if(null!=L.selectionStart){var zi=M.somethingSelected(),Qi="\u200b"+(zi?L.value:"");L.value="\u21da",L.value=Qi,T.prevInput=zi?"":"\u200b",L.selectionStart=1,L.selectionEnd=Qi.length,I.selForContextMenu=M.doc.sel}}function hi(){if(T.contextMenuPending==hi&&(T.contextMenuPending=!1,T.wrapper.style.cssText=qt,L.style.cssText=Ht,n&&r<9&&I.scrollbars.setScrollTop(I.scroller.scrollTop=pt),null!=L.selectionStart)){(!n||n&&r<9)&&_i();var zi=0,Qi=function(){I.selForContextMenu==M.doc.sel&&0==L.selectionStart&&L.selectionEnd>0&&"\u200b"==T.prevInput?bo(M,Lc)(M):zi++<10?I.detectingSelectAll=setTimeout(Qi,500):(I.selForContextMenu=null,I.input.reset())};I.detectingSelectAll=setTimeout(Qi,200)}}},fs.prototype.readOnlyChanged=function(p){p||this.reset(),this.textarea.disabled="nocursor"==p,this.textarea.readOnly=!!p},fs.prototype.setUneditable=function(){},fs.prototype.needsContentAttribute=!1,function(p){var T=p.optionHandlers;function M(I,L,K,pt){p.defaults[I]=L,K&&(T[I]=pt?function(Rt,Ht,qt){qt!=zl&&K(Rt,Ht,qt)}:K)}p.defineOption=M,p.Init=zl,M("value","",function(I,L){return I.setValue(L)},!0),M("mode",null,function(I,L){I.doc.modeOption=L,ul(I)},!0),M("indentUnit",2,ul,!0),M("indentWithTabs",!1),M("smartIndent",!0),M("tabSize",4,function(I){Cl(I),zs(I),Ho(I)},!0),M("lineSeparator",null,function(I,L){if(I.doc.lineSep=L,L){var K=[],pt=I.doc.first;I.doc.iter(function(Ht){for(var qt=0;;){var xe=Ht.text.indexOf(L,qt);if(-1==xe)break;qt=xe+L.length,K.push(Ui(pt,xe))}pt++});for(var Rt=K.length-1;Rt>=0;Rt--)Vl(I.doc,L,K[Rt],Ui(K[Rt].line,K[Rt].ch+L.length))}}),M("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(I,L,K){I.state.specialChars=new RegExp(L.source+(L.test("\t")?"":"|\t"),"g"),K!=zl&&I.refresh()}),M("specialCharPlaceholder",Lt,function(I){return I.refresh()},!0),M("electricChars",!0),M("inputStyle",Ft?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),M("spellcheck",!1,function(I,L){return I.getInputField().spellcheck=L},!0),M("autocorrect",!1,function(I,L){return I.getInputField().autocorrect=L},!0),M("autocapitalize",!1,function(I,L){return I.getInputField().autocapitalize=L},!0),M("rtlMoveVisually",!Bt),M("wholeLineUpdateBefore",!0),M("theme","default",function(I){ua(I),Zl(I)},!0),M("keyMap","default",function(I,L,K){var pt=Es(L),Rt=K!=zl&&Es(K);Rt&&Rt.detach&&Rt.detach(I,pt),pt.attach&&pt.attach(I,Rt||null)}),M("extraKeys",null),M("configureMouse",null),M("lineWrapping",!1,Ah,!0),M("gutters",[],function(I,L){I.display.gutterSpecs=Sa(L,I.options.lineNumbers),Zl(I)},!0),M("fixedGutter",!0,function(I,L){I.display.gutters.style.left=L?jo(I.display)+"px":"0",I.refresh()},!0),M("coverGutterNextToScrollbar",!1,function(I){return kr(I)},!0),M("scrollbarStyle","native",function(I){Xs(I),kr(I),I.display.scrollbars.setScrollTop(I.doc.scrollTop),I.display.scrollbars.setScrollLeft(I.doc.scrollLeft)},!0),M("lineNumbers",!1,function(I,L){I.display.gutterSpecs=Sa(I.options.gutters,L),Zl(I)},!0),M("firstLineNumber",1,Zl,!0),M("lineNumberFormatter",function(I){return I},Zl,!0),M("showCursorWhenSelecting",!1,yl,!0),M("resetSelectionOnContextMenu",!0),M("lineWiseCopyCut",!0),M("pasteLinesPerSelection",!0),M("selectionsMayTouch",!1),M("readOnly",!1,function(I,L){"nocursor"==L&&(Fa(I),I.display.input.blur()),I.display.input.readOnlyChanged(L)}),M("screenReaderLabel",null,function(I,L){I.display.input.screenReaderLabelChanged(L=""===L?null:L)}),M("disableInput",!1,function(I,L){L||I.display.input.reset()},!0),M("dragDrop",!0,Gu),M("allowDropFileTypes",null),M("cursorBlinkRate",530),M("cursorScrollMargin",0),M("cursorHeight",1,yl,!0),M("singleCursorHeightPerLine",!0,yl,!0),M("workTime",100),M("workDelay",100),M("flattenSpans",!0,Cl,!0),M("addModeClass",!1,Cl,!0),M("pollInterval",100),M("undoDepth",200,function(I,L){return I.doc.history.undoDepth=L}),M("historyEventDelay",1250),M("viewportMargin",10,function(I){return I.refresh()},!0),M("maxHighlightLength",1e4,Cl,!0),M("moveInputWithCursor",!0,function(I,L){L||I.display.input.resetPosition()}),M("tabindex",null,function(I,L){return I.display.input.getField().tabIndex=L||""}),M("autofocus",null),M("direction","ltr",function(I,L){return I.doc.setDirection(L)},!0),M("phrases",null)}(Io),function(p){var T=p.optionHandlers,M=p.helpers={};p.prototype={constructor:p,focus:function(){window.focus(),this.display.input.focus()},setOption:function(I,L){var K=this.options,pt=K[I];K[I]==L&&"mode"!=I||(K[I]=L,T.hasOwnProperty(I)&&bo(this,T[I])(this,L,pt),ni(this,"optionChange",this,I))},getOption:function(I){return this.options[I]},getDoc:function(){return this.doc},addKeyMap:function(I,L){this.state.keyMaps[L?"push":"unshift"](Es(I))},removeKeyMap:function(I){for(var L=this.state.keyMaps,K=0;K<L.length;++K)if(L[K]==I||L[K].name==I)return L.splice(K,1),!0},addOverlay:ao(function(I,L){var K=I.token?I:p.getMode(this.options,I);if(K.startState)throw new Error("Overlays may not be stateful.");(function(p,T,M){for(var I=0,L=M(T);I<p.length&&M(p[I])<=L;)I++;p.splice(I,0,T)})(this.state.overlays,{mode:K,modeSpec:I,opaque:L&&L.opaque,priority:L&&L.priority||0},function(pt){return pt.priority}),this.state.modeGen++,Ho(this)}),removeOverlay:ao(function(I){for(var L=this.state.overlays,K=0;K<L.length;++K){var pt=L[K].modeSpec;if(pt==I||"string"==typeof I&&pt.name==I)return L.splice(K,1),this.state.modeGen++,void Ho(this)}}),indentLine:ao(function(I,L,K){"string"!=typeof L&&"number"!=typeof L&&(L=null==L?this.options.smartIndent?"smart":"prev":L?"add":"subtract"),Yr(this.doc,I)&&Sc(this,I,L,K)}),indentSelection:ao(function(I){for(var L=this.doc.sel.ranges,K=-1,pt=0;pt<L.length;pt++){var Rt=L[pt];if(Rt.empty())Rt.head.line>K&&(Sc(this,Rt.head.line,I,!0),K=Rt.head.line,pt==this.doc.sel.primIndex&&at(this));else{var Ht=Rt.from(),qt=Rt.to(),xe=Math.max(K,Ht.line);K=Math.min(this.lastLine(),qt.line-(qt.ch?0:1))+1;for(var We=xe;We<K;++We)Sc(this,We,I);var _i=this.doc.sel.ranges;0==Ht.ch&&L.length==_i.length&&_i[pt].from().ch>0&&tc(this.doc,pt,new Lr(Ht,_i[pt].to()),we)}}}),getTokenAt:function(I,L){return ho(this,I,L)},getLineTokens:function(I,L){return ho(this,Ui(I),L,!0)},getTokenTypeAt:function(I){I=Xi(this.doc,I);var Ht,L=no(this,Di(this.doc,I.line)),K=0,pt=(L.length-1)/2,Rt=I.ch;if(0==Rt)Ht=L[2];else for(;;){var qt=K+pt>>1;if((qt?L[2*qt-1]:0)>=Rt)pt=qt;else{if(!(L[2*qt+1]<Rt)){Ht=L[2*qt+2];break}K=qt+1}}var xe=Ht?Ht.indexOf("overlay "):-1;return xe<0?Ht:0==xe?null:Ht.slice(0,xe-1)},getModeAt:function(I){var L=this.doc.mode;return L.innerMode?p.innerMode(L,this.getTokenAt(I).state).mode:L},getHelper:function(I,L){return this.getHelpers(I,L)[0]},getHelpers:function(I,L){var K=[];if(!M.hasOwnProperty(L))return K;var pt=M[L],Rt=this.getModeAt(I);if("string"==typeof Rt[L])pt[Rt[L]]&&K.push(pt[Rt[L]]);else if(Rt[L])for(var Ht=0;Ht<Rt[L].length;Ht++){var qt=pt[Rt[L][Ht]];qt&&K.push(qt)}else Rt.helperType&&pt[Rt.helperType]?K.push(pt[Rt.helperType]):pt[Rt.name]&&K.push(pt[Rt.name]);for(var xe=0;xe<pt._global.length;xe++){var We=pt._global[xe];We.pred(Rt,this)&&-1==je(K,We.val)&&K.push(We.val)}return K},getStateAfter:function(I,L){var K=this.doc;return ro(this,(I=ji(K,null==I?K.first+K.size-1:I))+1,L).state},cursorCoords:function(I,L){var pt=this.doc.sel.primary();return Zo(this,null==I?pt.head:"object"==typeof I?Xi(this.doc,I):I?pt.from():pt.to(),L||"page")},charCoords:function(I,L){return Za(this,Xi(this.doc,I),L||"page")},coordsChar:function(I,L){return bn(this,(I=Ds(this,I,L||"page")).left,I.top)},lineAtHeight:function(I,L){return I=Ds(this,{top:I,left:0},L||"page").top,Sr(this.doc,I+this.display.viewOffset)},heightAtLine:function(I,L,K){var Rt,pt=!1;if("number"==typeof I){var Ht=this.doc.first+this.doc.size-1;I<this.doc.first?I=this.doc.first:I>Ht&&(I=Ht,pt=!0),Rt=Di(this.doc,I)}else Rt=I;return oo(this,Rt,{top:0,left:0},L||"page",K||pt).top+(pt?this.doc.height-Hr(Rt):0)},defaultTextHeight:function(){return hs(this.display)},defaultCharWidth:function(){return bs(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(I,L,K,pt,Rt){var Ht=this.display,qt=(I=Zo(this,Xi(this.doc,I))).bottom,xe=I.left;if(L.style.position="absolute",L.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(L),Ht.sizer.appendChild(L),"over"==pt)qt=I.top;else if("above"==pt||"near"==pt){var We=Math.max(Ht.wrapper.clientHeight,this.doc.height),_i=Math.max(Ht.sizer.clientWidth,Ht.lineSpace.clientWidth);("above"==pt||I.bottom+L.offsetHeight>We)&&I.top>L.offsetHeight?qt=I.top-L.offsetHeight:I.bottom+L.offsetHeight<=We&&(qt=I.bottom),xe+L.offsetWidth>_i&&(xe=_i-L.offsetWidth)}L.style.top=qt+"px",L.style.left=L.style.right="","right"==Rt?(xe=Ht.sizer.clientWidth-L.offsetWidth,L.style.right="0px"):("left"==Rt?xe=0:"middle"==Rt&&(xe=(Ht.sizer.clientWidth-L.offsetWidth)/2),L.style.left=xe+"px"),K&&function(p,T){var M=Kc(p,T);null!=M.scrollTop&&Ue(p,M.scrollTop),null!=M.scrollLeft&&xi(p,M.scrollLeft)}(this,{left:xe,top:qt,right:xe+L.offsetWidth,bottom:qt+L.offsetHeight})},triggerOnKeyDown:ao(su),triggerOnKeyPress:ao(Vc),triggerOnKeyUp:Uc,triggerOnMouseDown:ao(mh),execCommand:function(I){if(Pu.hasOwnProperty(I))return Pu[I].call(null,this)},triggerElectric:ao(function(I){xh(this,I)}),findPosH:function(I,L,K,pt){var Rt=1;L<0&&(Rt=-1,L=-L);for(var Ht=Xi(this.doc,I),qt=0;qt<L&&!(Ht=Gc(this.doc,Ht,Rt,K,pt)).hitSide;++qt);return Ht},moveH:ao(function(I,L){var K=this;this.extendSelectionsBy(function(pt){return K.display.shift||K.doc.extend||pt.empty()?Gc(K.doc,pt.head,I,L,K.options.rtlMoveVisually):I<0?pt.from():pt.to()},Wt)}),deleteH:ao(function(I,L){var pt=this.doc;this.doc.sel.somethingSelected()?pt.replaceSelection("",null,"+delete"):es(this,function(Rt){var Ht=Gc(pt,Rt.head,I,L,!1);return I<0?{from:Ht,to:Rt.head}:{from:Rt.head,to:Ht}})}),findPosV:function(I,L,K,pt){var Rt=1,Ht=pt;L<0&&(Rt=-1,L=-L);for(var qt=Xi(this.doc,I),xe=0;xe<L;++xe){var We=Zo(this,qt,"div");if(null==Ht?Ht=We.left:We.left=Ht,(qt=wc(this,We,Rt,K)).hitSide)break}return qt},moveV:ao(function(I,L){var K=this,pt=this.doc,Rt=[],Ht=!this.display.shift&&!pt.extend&&pt.sel.somethingSelected();if(pt.extendSelectionsBy(function(xe){if(Ht)return I<0?xe.from():xe.to();var We=Zo(K,xe.head,"div");null!=xe.goalColumn&&(We.left=xe.goalColumn),Rt.push(We.left);var _i=wc(K,We,I,L);return"page"==L&&xe==pt.sel.primary()&&mt(K,Za(K,_i,"div").top-We.top),_i},Wt),Rt.length)for(var qt=0;qt<pt.sel.ranges.length;qt++)pt.sel.ranges[qt].goalColumn=Rt[qt]}),findWordAt:function(I){var K=Di(this.doc,I.line).text,pt=I.ch,Rt=I.ch;if(K){var Ht=this.getHelper(I,"wordChars");"before"!=I.sticky&&Rt!=K.length||!pt?++Rt:--pt;for(var qt=K.charAt(pt),xe=Me(qt,Ht)?function(We){return Me(We,Ht)}:/\s/.test(qt)?function(We){return/\s/.test(We)}:function(We){return!/\s/.test(We)&&!Me(We)};pt>0&&xe(K.charAt(pt-1));)--pt;for(;Rt<K.length&&xe(K.charAt(Rt));)++Rt}return new Lr(Ui(I.line,pt),Ui(I.line,Rt))},toggleOverwrite:function(I){null!=I&&I==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?vt(this.display.cursorDiv,"CodeMirror-overwrite"):ft(this.display.cursorDiv,"CodeMirror-overwrite"),ni(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Zt()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ao(function(I,L){et(this,I,L)}),getScrollInfo:function(){var I=this.display.scroller;return{left:I.scrollLeft,top:I.scrollTop,height:I.scrollHeight-$e(this)-this.display.barHeight,width:I.scrollWidth-$e(this)-this.display.barWidth,clientHeight:Hi(this),clientWidth:yi(this)}},scrollIntoView:ao(function(I,L){null==I?(I={from:this.doc.sel.primary().head,to:null},null==L&&(L=this.options.cursorScrollMargin)):"number"==typeof I?I={from:Ui(I,0),to:null}:null==I.from&&(I={from:I,to:null}),I.to||(I.to=I.from),I.margin=L||0,null!=I.from.line?function(p,T){jt(p),p.curOp.scrollToPos=T}(this,I):me(this,I.from,I.to,I.margin)}),setSize:ao(function(I,L){var K=this,pt=function(Ht){return"number"==typeof Ht||/^\d+$/.test(String(Ht))?Ht+"px":Ht};null!=I&&(this.display.wrapper.style.width=pt(I)),null!=L&&(this.display.wrapper.style.height=pt(L)),this.options.lineWrapping&&ko(this);var Rt=this.display.viewFrom;this.doc.iter(Rt,this.display.viewTo,function(Ht){if(Ht.widgets)for(var qt=0;qt<Ht.widgets.length;qt++)if(Ht.widgets[qt].noHScroll){pa(K,Rt,"widget");break}++Rt}),this.curOp.forceUpdate=!0,ni(this,"refresh",this)}),operation:function(I){return Os(this,I)},startOperation:function(){return As(this)},endOperation:function(){return ys(this)},refresh:ao(function(){var I=this.display.cachedTextHeight;Ho(this),this.curOp.forceUpdate=!0,zs(this),et(this,this.doc.scrollLeft,this.doc.scrollTop),$l(this.display),(null==I||Math.abs(I-hs(this.display))>.5||this.options.lineWrapping)&&kl(this),ni(this,"refresh",this)}),swapDoc:ao(function(I){var L=this.doc;return L.cm=null,this.state.selectingText&&this.state.selectingText(),Er(this,I),zs(this),this.display.input.reset(),et(this,I.scrollLeft,I.scrollTop),this.curOp.forceScroll=!0,rr(this,"swapDoc",this,L),L}),phrase:function(I){var L=this.options.phrases;return L&&Object.prototype.hasOwnProperty.call(L,I)?L[I]:I},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ei(p),p.registerHelper=function(I,L,K){M.hasOwnProperty(I)||(M[I]=p[I]={_global:[]}),M[I][L]=K},p.registerGlobalHelper=function(I,L,K,pt){p.registerHelper(I,L,pt),M[I]._global.push({pred:K,val:pt})}}(Io);var Lh="iter insert remove copy getEditor constructor".split(" ");for(var oc in ps.prototype)ps.prototype.hasOwnProperty(oc)&&je(Lh,oc)<0&&(Io.prototype[oc]=function(p){return function(){return p.apply(this.doc,arguments)}}(ps.prototype[oc]));return Ei(ps),Io.inputStyles={textarea:fs,contenteditable:To},Io.defineMode=function(p){!Io.defaults.mode&&"null"!=p&&(Io.defaults.mode=p),Rn.apply(this,arguments)},Io.defineMIME=function(p,T){dn[p]=T},Io.defineMode("null",function(){return{token:function(p){return p.skipToEnd()}}}),Io.defineMIME("text/plain","null"),Io.defineExtension=function(p,T){Io.prototype[p]=T},Io.defineDocExtension=function(p,T){ps.prototype[p]=T},Io.fromTextArea=function(p,T){if((T=T?oe(T):{}).value=p.value,!T.tabindex&&p.tabIndex&&(T.tabindex=p.tabIndex),!T.placeholder&&p.placeholder&&(T.placeholder=p.placeholder),null==T.autofocus){var M=Zt();T.autofocus=M==p||null!=p.getAttribute("autofocus")&&M==document.body}function I(){p.value=Rt.getValue()}var L;if(p.form&&(li(p.form,"submit",I),!T.leaveSubmitMethodAlone)){var K=p.form;L=K.submit;try{var pt=K.submit=function(){I(),K.submit=L,K.submit(),K.submit=pt}}catch(Ht){}}T.finishInit=function(Ht){Ht.save=I,Ht.getTextArea=function(){return p},Ht.toTextArea=function(){Ht.toTextArea=isNaN,I(),p.parentNode.removeChild(Ht.getWrapperElement()),p.style.display="",p.form&&(Ii(p.form,"submit",I),!T.leaveSubmitMethodAlone&&"function"==typeof p.form.submit&&(p.form.submit=L))}},p.style.display="none";var Rt=Io(function(Ht){return p.parentNode.insertBefore(Ht,p.nextSibling)},T);return Rt},function(p){p.off=Ii,p.on=li,p.wheelEventPixels=Zc,p.Doc=ps,p.splitLines=ir,p.countColumn=Ie,p.findColumn=Ae,p.isWordChar=te,p.Pass=Ze,p.signal=ni,p.Line=cs,p.changeEnd=Pl,p.scrollbarModel=cl,p.Pos=Ui,p.cmpPos=On,p.modes=Oi,p.mimeModes=dn,p.resolveMode=xr,p.getMode=io,p.modeExtensions=_o,p.extendMode=Ko,p.copyState=jr,p.startState=ss,p.innerMode=pr,p.commands=Pu,p.keyMap=er,p.keyName=co,p.isModifierKey=to,p.lookupKey=Dr,p.normalizeKeyMap=So,p.StringStream=Zn,p.SharedTextMarker=Wa,p.TextMarker=il,p.LineWidget=pl,p.e_preventDefault=Pi,p.e_stopPropagation=ti,p.e_stop=Pt,p.addClass=vt,p.contains=Z,p.rmClass=ft,p.keyNames=Ni}(Io),Io.version="5.65.0",Io}()},64166:(H,W,f)=>{!function(y){"use strict";y.defineMode("javascript",function(g,e){var bt,Ft,t=g.indentUnit,n=e.statementIndent,r=e.jsonld,s=e.json||r,c=!1!==e.trackScope,v=e.typescript,D=e.wordCharacters||/[\w$\xa1-\uffff]/,P=function(){function de(Jn){return{type:Jn,style:"keyword"}}var Fe=de("keyword a"),Ai=de("keyword b"),ji=de("keyword c"),Xi=de("keyword d"),Qn=de("operator"),qn={type:"atom",style:"atom"};return{if:de("if"),while:Fe,with:Fe,else:Ai,do:Ai,try:Ai,finally:Ai,return:Xi,break:Xi,continue:Xi,new:de("new"),delete:ji,void:ji,throw:ji,debugger:de("debugger"),var:de("var"),const:de("var"),let:de("var"),function:de("function"),catch:de("catch"),for:de("for"),switch:de("switch"),case:de("case"),default:de("default"),in:Qn,typeof:Qn,instanceof:Qn,true:qn,false:qn,null:qn,undefined:qn,NaN:qn,Infinity:qn,this:de("this"),class:de("class"),super:de("atom"),yield:ji,export:de("export"),import:de("import"),extends:ji,await:ji}}(),G=/[+\-*&%=<>!?|~^@]/,it=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function gt(de,Fe,Ai){return bt=de,Ft=Ai,Fe}function wt(de,Fe){var Ai=de.next();if('"'==Ai||"'"==Ai)return Fe.tokenize=function(de){return function(Fe,Ai){var Xi,ji=!1;if(r&&"@"==Fe.peek()&&Fe.match(it))return Ai.tokenize=wt,gt("jsonld-keyword","meta");for(;null!=(Xi=Fe.next())&&(Xi!=de||ji);)ji=!ji&&"\\"==Xi;return ji||(Ai.tokenize=wt),gt("string","string")}}(Ai),Fe.tokenize(de,Fe);if("."==Ai&&de.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return gt("number","number");if("."==Ai&&de.match(".."))return gt("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Ai))return gt(Ai);if("="==Ai&&de.eat(">"))return gt("=>","operator");if("0"==Ai&&de.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return gt("number","number");if(/\d/.test(Ai))return de.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),gt("number","number");if("/"==Ai)return de.eat("*")?(Fe.tokenize=Kt,Kt(de,Fe)):de.eat("/")?(de.skipToEnd(),gt("comment","comment")):Nn(de,Fe,1)?(function(de){for(var Ai,Fe=!1,ji=!1;null!=(Ai=de.next());){if(!Fe){if("/"==Ai&&!ji)return;"["==Ai?ji=!0:ji&&"]"==Ai&&(ji=!1)}Fe=!Fe&&"\\"==Ai}}(de),de.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),gt("regexp","string-2")):(de.eat("="),gt("operator","operator",de.current()));if("`"==Ai)return Fe.tokenize=It,It(de,Fe);if("#"==Ai&&"!"==de.peek())return de.skipToEnd(),gt("meta","meta");if("#"==Ai&&de.eatWhile(D))return gt("variable","property");if("<"==Ai&&de.match("!--")||"-"==Ai&&de.match("->")&&!/\S/.test(de.string.slice(0,de.start)))return de.skipToEnd(),gt("comment","comment");if(G.test(Ai))return(">"!=Ai||!Fe.lexical||">"!=Fe.lexical.type)&&(de.eat("=")?("!"==Ai||"="==Ai)&&de.eat("="):/[<>*+\-|&?]/.test(Ai)&&(de.eat(Ai),">"==Ai&&de.eat(Ai))),"?"==Ai&&de.eat(".")?gt("."):gt("operator","operator",de.current());if(D.test(Ai)){de.eatWhile(D);var ji=de.current();if("."!=Fe.lastType){if(P.propertyIsEnumerable(ji)){var Xi=P[ji];return gt(Xi.type,Xi.style,ji)}if("async"==ji&&de.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return gt("async","keyword",ji)}return gt("variable","variable",ji)}}function Kt(de,Fe){for(var ji,Ai=!1;ji=de.next();){if("/"==ji&&Ai){Fe.tokenize=wt;break}Ai="*"==ji}return gt("comment","comment")}function It(de,Fe){for(var ji,Ai=!1;null!=(ji=de.next());){if(!Ai&&("`"==ji||"$"==ji&&de.eat("{"))){Fe.tokenize=wt;break}Ai=!Ai&&"\\"==ji}return gt("quasi","string-2",de.current())}function lt(de,Fe){Fe.fatArrowAt&&(Fe.fatArrowAt=null);var Ai=de.string.indexOf("=>",de.start);if(!(Ai<0)){if(v){var ji=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(de.string.slice(de.start,Ai));ji&&(Ai=ji.index)}for(var Xi=0,Qn=!1,qn=Ai-1;qn>=0;--qn){var Jn=de.string.charAt(qn),Tn="([{}])".indexOf(Jn);if(Tn>=0&&Tn<3){if(!Xi){++qn;break}if(0==--Xi){"("==Jn&&(Qn=!0);break}}else if(Tn>=3&&Tn<6)++Xi;else if(D.test(Jn))Qn=!0;else if(/["'\/`]/.test(Jn))for(;;--qn){if(0==qn)return;if(de.string.charAt(qn-1)==Jn&&"\\"!=de.string.charAt(qn-2)){qn--;break}}else if(Qn&&!Xi){++qn;break}}Qn&&!Xi&&(Fe.fatArrowAt=qn)}}var ft={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ht(de,Fe,Ai,ji,Xi,Qn){this.indented=de,this.column=Fe,this.type=Ai,this.prev=Xi,this.info=Qn,null!=ji&&(this.align=ji)}function Gt(de,Fe){if(!c)return!1;for(var Ai=de.localVars;Ai;Ai=Ai.next)if(Ai.name==Fe)return!0;for(var ji=de.context;ji;ji=ji.prev)for(Ai=ji.vars;Ai;Ai=Ai.next)if(Ai.name==Fe)return!0}function ut(de,Fe,Ai,ji,Xi){var Qn=de.cc;for(ot.state=de,ot.stream=Xi,ot.marked=null,ot.cc=Qn,ot.style=Fe,de.lexical.hasOwnProperty("align")||(de.lexical.align=!0);;)if((Qn.length?Qn.pop():s?Qt:Wt)(Ai,ji)){for(;Qn.length&&Qn[Qn.length-1].lex;)Qn.pop()();return ot.marked?ot.marked:"variable"==Ai&&Gt(de,ji)?"variable-2":Fe}}var ot={state:null,column:null,marked:null,cc:null};function st(){for(var de=arguments.length-1;de>=0;de--)ot.cc.push(arguments[de])}function Z(){return st.apply(null,arguments),!0}function Zt(de,Fe){for(var Ai=Fe;Ai;Ai=Ai.next)if(Ai.name==de)return!0;return!1}function vt(de){var Fe=ot.state;if(ot.marked="def",c){if(Fe.context)if("var"==Fe.lexical.info&&Fe.context&&Fe.context.block){var Ai=At(de,Fe.context);if(null!=Ai)return void(Fe.context=Ai)}else if(!Zt(de,Fe.localVars))return void(Fe.localVars=new oe(de,Fe.localVars));e.globalVars&&!Zt(de,Fe.globalVars)&&(Fe.globalVars=new oe(de,Fe.globalVars))}}function At(de,Fe){if(Fe){if(Fe.block){var Ai=At(de,Fe.prev);return Ai?Ai==Fe.prev?Fe:new ve(Ai,Fe.vars,!0):null}return Zt(de,Fe.vars)?Fe:new ve(Fe.prev,new oe(de,Fe.vars),!1)}return null}function re(de){return"public"==de||"private"==de||"protected"==de||"abstract"==de||"readonly"==de}function ve(de,Fe,Ai){this.prev=de,this.vars=Fe,this.block=Ai}function oe(de,Fe){this.name=de,this.next=Fe}var Ie=new oe("this",new oe("arguments",null));function Re(){ot.state.context=new ve(ot.state.context,ot.state.localVars,!1),ot.state.localVars=Ie}function je(){ot.state.context=new ve(ot.state.context,ot.state.localVars,!0),ot.state.localVars=null}function Si(){ot.state.localVars=ot.state.context.vars,ot.state.context=ot.state.context.prev}function Ze(de,Fe){var Ai=function(){var ji=ot.state,Xi=ji.indented;if("stat"==ji.lexical.type)Xi=ji.lexical.indented;else for(var Qn=ji.lexical;Qn&&")"==Qn.type&&Qn.align;Qn=Qn.prev)Xi=Qn.indented;ji.lexical=new ht(Xi,ot.stream.column(),de,null,ji.lexical,Fe)};return Ai.lex=!0,Ai}function we(){var de=ot.state;de.lexical.prev&&(")"==de.lexical.type&&(de.indented=de.lexical.indented),de.lexical=de.lexical.prev)}function ci(de){return function Fe(Ai){return Ai==de?Z():";"==de||"}"==Ai||")"==Ai||"]"==Ai?st():Z(Fe)}}function Wt(de,Fe){return"var"==de?Z(Ze("vardef",Fe),Vi,ci(";"),we):"keyword a"==de?Z(Ze("form"),Mt,Wt,we):"keyword b"==de?Z(Ze("form"),Wt,we):"keyword d"==de?ot.stream.match(/^\s*$/,!1)?Z():Z(Ze("stat"),ye,ci(";"),we):"debugger"==de?Z(ci(";")):"{"==de?Z(Ze("}"),je,li,we,Si):";"==de?Z():"if"==de?("else"==ot.state.lexical.info&&ot.state.cc[ot.state.cc.length-1]==we&&ot.state.cc.pop()(),Z(Ze("form"),Mt,Wt,we,Pe)):"function"==de?Z(Rn):"for"==de?Z(Ze("form"),je,di,Wt,Si,we):"class"==de||v&&"interface"==Fe?(ot.marked="keyword",Z(Ze("form","class"==de?de:Fe),Ko,we)):"variable"==de?v&&"declare"==Fe?(ot.marked="keyword",Z(Wt)):v&&("module"==Fe||"enum"==Fe||"type"==Fe)&&ot.stream.match(/^\s*\w/,!1)?(ot.marked="keyword","enum"==Fe?Z(Tr):"type"==Fe?Z(xr,ci("operator"),Ce,ci(";")):Z(Ze("form"),Ki,ci("{"),Ze("}"),li,we,we)):v&&"namespace"==Fe?(ot.marked="keyword",Z(Ze("form"),Qt,Wt,we)):v&&"abstract"==Fe?(ot.marked="keyword",Z(Wt)):Z(Ze("stat"),zt):"switch"==de?Z(Ze("form"),Mt,ci("{"),Ze("}","switch"),je,li,we,we,Si):"case"==de?Z(Qt,ci(":")):"default"==de?Z(ci(":")):"catch"==de?Z(Ze("form"),Re,Ae,Wt,we,Si):"export"==de?Z(Ze("stat"),Zn,we):"import"==de?Z(Ze("stat"),An,we):"async"==de?Z(Wt):"@"==Fe?Z(Qt,Wt):st(Ze("stat"),Qt,ci(";"),we)}function Ae(de){if("("==de)return Z(io,ci(")"))}function Qt(de,Fe){return Yt(de,Fe,!1)}function ee(de,Fe){return Yt(de,Fe,!0)}function Mt(de){return"("!=de?st():Z(Ze(")"),ye,ci(")"),we)}function Yt(de,Fe,Ai){if(ot.state.fatArrowAt==ot.stream.start){var ji=Ai?ue:Me;if("("==de)return Z(Re,Ze(")"),mi(io,")"),we,ci("=>"),ji,Si);if("variable"==de)return st(Re,Ki,ci("=>"),ji,Si)}var Xi=Ai?Te:ui;return ft.hasOwnProperty(de)?Z(Xi):"function"==de?Z(Rn,Xi):"class"==de||v&&"interface"==Fe?(ot.marked="keyword",Z(Ze("form"),_o,we)):"keyword c"==de||"async"==de?Z(Ai?ee:Qt):"("==de?Z(Ze(")"),ye,ci(")"),we,Xi):"operator"==de||"spread"==de?Z(Ai?ee:Qt):"["==de?Z(Ze("]"),Yr,we,Xi):"{"==de?on(Xe,"}",null,Xi):"quasi"==de?st(ce,Xi):"new"==de?Z(function(de){return function(Fe){return"."==Fe?Z(de?Dt:be):"variable"==Fe&&v?Z(Nt,de?Te:ui):st(de?ee:Qt)}}(Ai)):Z()}function ye(de){return de.match(/[;\}\)\],]/)?st():st(Qt)}function ui(de,Fe){return","==de?Z(ye):Te(de,Fe,!1)}function Te(de,Fe,Ai){var ji=0==Ai?ui:Te,Xi=0==Ai?Qt:ee;if("=>"==de)return Z(Re,Ai?ue:Me,Si);if("operator"==de)return/\+\+|--/.test(Fe)||v&&"!"==Fe?Z(ji):v&&"<"==Fe&&ot.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?Z(Ze(">"),mi(Ce,">"),we,ji):"?"==Fe?Z(Qt,ci(":"),Xi):Z(Xi);if("quasi"==de)return st(ce,ji);if(";"!=de){if("("==de)return on(ee,")","call",ji);if("."==de)return Z(Ge,ji);if("["==de)return Z(Ze("]"),ye,ci("]"),we,ji);if(v&&"as"==Fe)return ot.marked="keyword",Z(Ce,ji);if("regexp"==de)return ot.state.lastType=ot.marked="operator",ot.stream.backUp(ot.stream.pos-ot.stream.start-1),Z(Xi)}}function ce(de,Fe){return"quasi"!=de?st():"${"!=Fe.slice(Fe.length-2)?Z(ce):Z(ye,te)}function te(de){if("}"==de)return ot.marked="string-2",ot.state.tokenize=It,Z(ce)}function Me(de){return lt(ot.stream,ot.state),st("{"==de?Wt:Qt)}function ue(de){return lt(ot.stream,ot.state),st("{"==de?Wt:ee)}function be(de,Fe){if("target"==Fe)return ot.marked="keyword",Z(ui)}function Dt(de,Fe){if("target"==Fe)return ot.marked="keyword",Z(Te)}function zt(de){return":"==de?Z(we,Wt):st(ui,ci(";"),we)}function Ge(de){if("variable"==de)return ot.marked="property",Z()}function Xe(de,Fe){return"async"==de?(ot.marked="property",Z(Xe)):"variable"==de||"keyword"==ot.style?(ot.marked="property","get"==Fe||"set"==Fe?Z(Ri):(v&&ot.state.fatArrowAt==ot.stream.start&&(Ai=ot.stream.match(/^\s*:\s*/,!1))&&(ot.state.fatArrowAt=ot.stream.pos+Ai[0].length),Z(bi))):"number"==de||"string"==de?(ot.marked=r?"property":ot.style+" property",Z(bi)):"jsonld-keyword"==de?Z(bi):v&&re(Fe)?(ot.marked="keyword",Z(Xe)):"["==de?Z(Qt,Bi,ci("]"),bi):"spread"==de?Z(ee,bi):"*"==Fe?(ot.marked="keyword",Z(Xe)):":"==de?st(bi):void 0;var Ai}function Ri(de){return"variable"!=de?st(bi):(ot.marked="property",Z(Rn))}function bi(de){return":"==de?Z(ee):"("==de?st(Rn):void 0}function mi(de,Fe,Ai){function ji(Xi,Qn){if(Ai?Ai.indexOf(Xi)>-1:","==Xi){var qn=ot.state.lexical;return"call"==qn.info&&(qn.pos=(qn.pos||0)+1),Z(function(Jn,Tn){return Jn==Fe||Tn==Fe?st():st(de)},ji)}return Xi==Fe||Qn==Fe?Z():Ai&&Ai.indexOf(";")>-1?st(de):Z(ci(Fe))}return function(Xi,Qn){return Xi==Fe||Qn==Fe?Z():st(de,ji)}}function on(de,Fe,Ai){for(var ji=3;ji<arguments.length;ji++)ot.cc.push(arguments[ji]);return Z(Ze(Fe,Ai),mi(de,Fe),we)}function li(de){return"}"==de?Z():st(Wt,li)}function Bi(de,Fe){if(v){if(":"==de)return Z(Ce);if("?"==Fe)return Z(Bi)}}function Ii(de,Fe){if(v&&(":"==de||"in"==Fe))return Z(Ce)}function ni(de){if(v&&":"==de)return ot.stream.match(/^\s*\w+\s+is\b/,!1)?Z(Qt,vi,Ce):Z(Ce)}function vi(de,Fe){if("is"==Fe)return ot.marked="keyword",Z()}function Ce(de,Fe){return"keyof"==Fe||"typeof"==Fe||"infer"==Fe||"readonly"==Fe?(ot.marked="keyword",Z("typeof"==Fe?ee:Ce)):"variable"==de||"void"==Fe?(ot.marked="type",Z(dt)):"|"==Fe||"&"==Fe?Z(Ce):"string"==de||"number"==de||"atom"==de?Z(dt):"["==de?Z(Ze("]"),mi(Ce,"]",","),we,dt):"{"==de?Z(Ze("}"),Ei,we,dt):"("==de?Z(mi(Pt,")"),Qe,dt):"<"==de?Z(mi(Ce,">"),Ce):"quasi"==de?st(ti,dt):void 0}function Qe(de){if("=>"==de)return Z(Ce)}function Ei(de){return de.match(/[\}\)\]]/)?Z():","==de||";"==de?Z(Ei):st(Pi,Ei)}function Pi(de,Fe){return"variable"==de||"keyword"==ot.style?(ot.marked="property",Z(Pi)):"?"==Fe||"number"==de||"string"==de?Z(Pi):":"==de?Z(Ce):"["==de?Z(ci("variable"),Ii,ci("]"),Pi):"("==de?st(nr,Pi):de.match(/[;\}\)\],]/)?void 0:Z()}function ti(de,Fe){return"quasi"!=de?st():"${"!=Fe.slice(Fe.length-2)?Z(ti):Z(Ce,ge)}function ge(de){if("}"==de)return ot.marked="string-2",ot.state.tokenize=It,Z(ti)}function Pt(de,Fe){return"variable"==de&&ot.stream.match(/^\s*[?:]/,!1)||"?"==Fe?Z(Pt):":"==de?Z(Ce):"spread"==de?Z(Pt):st(Ce)}function dt(de,Fe){return"<"==Fe?Z(Ze(">"),mi(Ce,">"),we,dt):"|"==Fe||"."==de||"&"==Fe?Z(Ce):"["==de?Z(Ce,ci("]"),dt):"extends"==Fe||"implements"==Fe?(ot.marked="keyword",Z(Ce)):"?"==Fe?Z(Ce,ci(":"),Ce):void 0}function Nt(de,Fe){if("<"==Fe)return Z(Ze(">"),mi(Ce,">"),we,dt)}function pe(){return st(Ce,Le)}function Le(de,Fe){if("="==Fe)return Z(Ce)}function Vi(de,Fe){return"enum"==Fe?(ot.marked="keyword",Z(Tr)):st(Ki,Bi,pi,Ke)}function Ki(de,Fe){return v&&re(Fe)?(ot.marked="keyword",Z(Ki)):"variable"==de?(vt(Fe),Z()):"spread"==de?Z(Ki):"["==de?on(ir,"]"):"{"==de?on(Sn,"}"):void 0}function Sn(de,Fe){return"variable"!=de||ot.stream.match(/^\s*:/,!1)?("variable"==de&&(ot.marked="property"),"spread"==de?Z(Ki):"}"==de?st():"["==de?Z(Qt,ci("]"),ci(":"),Sn):Z(ci(":"),Ki,pi)):(vt(Fe),Z(pi))}function ir(){return st(Ki,pi)}function pi(de,Fe){if("="==Fe)return Z(ee)}function Ke(de){if(","==de)return Z(Vi)}function Pe(de,Fe){if("keyword b"==de&&"else"==Fe)return Z(Ze("form","else"),Wt,we)}function di(de,Fe){return"await"==Fe?Z(di):"("==de?Z(Ze(")"),Oi,we):void 0}function Oi(de){return"var"==de?Z(Vi,dn):"variable"==de?Z(dn):st(dn)}function dn(de,Fe){return")"==de?Z():";"==de?Z(dn):"in"==Fe||"of"==Fe?(ot.marked="keyword",Z(Qt,dn)):st(Qt,dn)}function Rn(de,Fe){return"*"==Fe?(ot.marked="keyword",Z(Rn)):"variable"==de?(vt(Fe),Z(Rn)):"("==de?Z(Re,Ze(")"),mi(io,")"),we,ni,Wt,Si):v&&"<"==Fe?Z(Ze(">"),mi(pe,">"),we,Rn):void 0}function nr(de,Fe){return"*"==Fe?(ot.marked="keyword",Z(nr)):"variable"==de?(vt(Fe),Z(nr)):"("==de?Z(Re,Ze(")"),mi(io,")"),we,ni,Si):v&&"<"==Fe?Z(Ze(">"),mi(pe,">"),we,nr):void 0}function xr(de,Fe){return"keyword"==de||"variable"==de?(ot.marked="type",Z(xr)):"<"==Fe?Z(Ze(">"),mi(pe,">"),we):void 0}function io(de,Fe){return"@"==Fe&&Z(Qt,io),"spread"==de?Z(io):v&&re(Fe)?(ot.marked="keyword",Z(io)):v&&"this"==de?Z(Bi,pi):st(Ki,Bi,pi)}function _o(de,Fe){return"variable"==de?Ko(de,Fe):jr(de,Fe)}function Ko(de,Fe){if("variable"==de)return vt(Fe),Z(jr)}function jr(de,Fe){return"<"==Fe?Z(Ze(">"),mi(pe,">"),we,jr):"extends"==Fe||"implements"==Fe||v&&","==de?("implements"==Fe&&(ot.marked="keyword"),Z(v?Ce:Qt,jr)):"{"==de?Z(Ze("}"),pr,we):void 0}function pr(de,Fe){return"async"==de||"variable"==de&&("static"==Fe||"get"==Fe||"set"==Fe||v&&re(Fe))&&ot.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(ot.marked="keyword",Z(pr)):"variable"==de||"keyword"==ot.style?(ot.marked="property",Z(ss,pr)):"number"==de||"string"==de?Z(ss,pr):"["==de?Z(Qt,Bi,ci("]"),ss,pr):"*"==Fe?(ot.marked="keyword",Z(pr)):v&&"("==de?st(nr,pr):";"==de||","==de?Z(pr):"}"==de?Z():"@"==Fe?Z(Qt,pr):void 0}function ss(de,Fe){if("!"==Fe||"?"==Fe)return Z(ss);if(":"==de)return Z(Ce,pi);if("="==Fe)return Z(ee);var Ai=ot.state.lexical.prev;return st(Ai&&"interface"==Ai.info?nr:Rn)}function Zn(de,Fe){return"*"==Fe?(ot.marked="keyword",Z(Sr,ci(";"))):"default"==Fe?(ot.marked="keyword",Z(Qt,ci(";"))):"{"==de?Z(mi(Di,"}"),Sr,ci(";")):st(Wt)}function Di(de,Fe){return"as"==Fe?(ot.marked="keyword",Z(ci("variable"))):"variable"==de?st(ee,Di):void 0}function An(de){return"string"==de?Z():"("==de?st(Qt):"."==de?st(ui):st(sr,Mr,Sr)}function sr(de,Fe){return"{"==de?on(sr,"}"):("variable"==de&&vt(Fe),"*"==Fe&&(ot.marked="keyword"),Z(ar))}function Mr(de){if(","==de)return Z(sr,Mr)}function ar(de,Fe){if("as"==Fe)return ot.marked="keyword",Z(sr)}function Sr(de,Fe){if("from"==Fe)return ot.marked="keyword",Z(Qt)}function Yr(de){return"]"==de?Z():st(mi(ee,"]"))}function Tr(){return st(Ze("form"),Ki,ci("{"),Ze("}"),mi(Ui,"}"),we,we)}function Ui(){return st(Ki,pi)}function Nn(de,Fe,Ai){return Fe.tokenize==wt&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Fe.lastType)||"quasi"==Fe.lastType&&/\{\s*$/.test(de.string.slice(0,de.pos-(Ai||0)))}return Si.lex=!0,we.lex=!0,{startState:function(de){var Fe={tokenize:wt,lastType:"sof",cc:[],lexical:new ht((de||0)-t,0,"block",!1),localVars:e.localVars,context:e.localVars&&new ve(null,null,!1),indented:de||0};return e.globalVars&&"object"==typeof e.globalVars&&(Fe.globalVars=e.globalVars),Fe},token:function(de,Fe){if(de.sol()&&(Fe.lexical.hasOwnProperty("align")||(Fe.lexical.align=!1),Fe.indented=de.indentation(),lt(de,Fe)),Fe.tokenize!=Kt&&de.eatSpace())return null;var Ai=Fe.tokenize(de,Fe);return"comment"==bt?Ai:(Fe.lastType="operator"!=bt||"++"!=Ft&&"--"!=Ft?bt:"incdec",ut(Fe,Ai,bt,Ft,de))},indent:function(de,Fe){if(de.tokenize==Kt||de.tokenize==It)return y.Pass;if(de.tokenize!=wt)return 0;var Xi,Ai=Fe&&Fe.charAt(0),ji=de.lexical;if(!/^\s*else\b/.test(Fe))for(var Qn=de.cc.length-1;Qn>=0;--Qn){var qn=de.cc[Qn];if(qn==we)ji=ji.prev;else if(qn!=Pe&&qn!=Si)break}for(;("stat"==ji.type||"form"==ji.type)&&("}"==Ai||(Xi=de.cc[de.cc.length-1])&&(Xi==ui||Xi==Te)&&!/^[,\.=+\-*:?[\(]/.test(Fe));)ji=ji.prev;n&&")"==ji.type&&"stat"==ji.prev.type&&(ji=ji.prev);var Jn=ji.type,Tn=Ai==Jn;return"vardef"==Jn?ji.indented+("operator"==de.lastType||","==de.lastType?ji.info.length+1:0):"form"==Jn&&"{"==Ai?ji.indented:"form"==Jn?ji.indented+t:"stat"==Jn?ji.indented+(function(de,Fe){return"operator"==de.lastType||","==de.lastType||G.test(Fe.charAt(0))||/[,.]/.test(Fe.charAt(0))}(de,Fe)?n||t:0):"switch"!=ji.info||Tn||0==e.doubleIndentSwitch?ji.align?ji.column+(Tn?0:1):ji.indented+(Tn?0:t):ji.indented+(/^(?:case|default)\b/.test(Fe)?t:2*t)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:s?null:"/*",blockCommentEnd:s?null:"*/",blockCommentContinue:s?null:" * ",lineComment:s?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:s?"json":"javascript",jsonldMode:r,jsonMode:s,expressionAllowed:Nn,skipExpression:function(de){ut(de,"atom","atom","true",new y.StringStream("",2,null))}}}),y.registerHelper("wordChars","javascript",/[\w$]/),y.defineMIME("text/javascript","javascript"),y.defineMIME("text/ecmascript","javascript"),y.defineMIME("application/javascript","javascript"),y.defineMIME("application/x-javascript","javascript"),y.defineMIME("application/ecmascript","javascript"),y.defineMIME("application/json",{name:"javascript",json:!0}),y.defineMIME("application/x-json",{name:"javascript",json:!0}),y.defineMIME("application/manifest+json",{name:"javascript",json:!0}),y.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),y.defineMIME("text/typescript",{name:"javascript",typescript:!0}),y.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(f(68266))},70697:function(H){H.exports=function(){"use strict";function W(Tt){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ot){return typeof Ot}:function(Ot){return Ot&&"function"==typeof Symbol&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot})(Tt)}var Tt,y=(Tt={},function(se){var Oe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return Tt[Oe]=Tt[Oe]||0,void 0===se[Oe]&&(se[Oe]=Tt[Oe]++),se[Oe]});function g(Tt,Ot,se){if(Tt)for(var Oe=0,Ve=Tt.length;Oe<Ve;Oe++)Ot(Tt[Oe],Oe);"function"==typeof se&&se()}var e=new function(){var Ot="introjs_event";this._id=function(se,Oe,Ve,fi){return Oe+y(Ve)+(fi?"_".concat(y(fi)):"")},this.on=function(se,Oe,Ve,fi,Je){var oi=this._id.apply(this,arguments),Li=function(Gi){return Ve.call(fi||se,Gi||window.event)};"addEventListener"in se?se.addEventListener(Oe,Li,Je):"attachEvent"in se&&se.attachEvent("on".concat(Oe),Li),se[Ot]=se[Ot]||{},se[Ot][oi]=Li},this.off=function(se,Oe,Ve,fi,Je){var oi=this._id.apply(this,arguments),Li=se[Ot]&&se[Ot][oi];!Li||("removeEventListener"in se?se.removeEventListener(Oe,Li,Je):"detachEvent"in se&&se.detachEvent("on".concat(Oe),Li),se[Ot][oi]=null)}},t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(Tt,Ot){return Tt(Ot={exports:{}},Ot.exports),Ot.exports}var we,ci,r=function(Tt){return Tt&&Tt.Math==Math&&Tt},s=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||function(){return this}()||Function("return this")(),c=function(Tt){try{return!!Tt()}catch(Ot){return!0}},v=!c(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),D=Function.prototype.call,P=D.bind?D.bind(D):function(){return D.apply(D,arguments)},G={}.propertyIsEnumerable,it=Object.getOwnPropertyDescriptor,Ft={f:it&&!G.call({1:2},1)?function(Ot){var se=it(this,Ot);return!!se&&se.enumerable}:G},gt=function(Tt,Ot){return{enumerable:!(1&Tt),configurable:!(2&Tt),writable:!(4&Tt),value:Ot}},wt=Function.prototype,Bt=wt.bind,Kt=wt.call,It=Bt&&Bt.bind(Kt),St=Bt?function(Tt){return Tt&&It(Kt,Tt)}:function(Tt){return Tt&&function(){return Kt.apply(Tt,arguments)}},lt=St({}.toString),ft=St("".slice),ht=function(Tt){return ft(lt(Tt),8,-1)},Gt=s.Object,ut=St("".split),ot=c(function(){return!Gt("z").propertyIsEnumerable(0)})?function(Tt){return"String"==ht(Tt)?ut(Tt,""):Gt(Tt)}:Gt,st=s.TypeError,Z=function(Tt){if(null==Tt)throw st("Can't call method on "+Tt);return Tt},Zt=function(Tt){return ot(Z(Tt))},vt=function(Tt){return"function"==typeof Tt},At=function(Tt){return"object"==typeof Tt?null!==Tt:vt(Tt)},re=function(Tt){return vt(Tt)?Tt:void 0},ve=function(Tt,Ot){return arguments.length<2?re(s[Tt]):s[Tt]&&s[Tt][Ot]},oe=St({}.isPrototypeOf),Ie=ve("navigator","userAgent")||"",Re=s.process,je=s.Deno,Si=Re&&Re.versions||je&&je.version,Ze=Si&&Si.v8;Ze&&(ci=(we=Ze.split("."))[0]>0&&we[0]<4?1:+(we[0]+we[1])),!ci&&Ie&&(!(we=Ie.match(/Edge\/(\d+)/))||we[1]>=74)&&(we=Ie.match(/Chrome\/(\d+)/))&&(ci=+we[1]);var Wt=ci,Ae=!!Object.getOwnPropertySymbols&&!c(function(){var Tt=Symbol();return!String(Tt)||!(Object(Tt)instanceof Symbol)||!Symbol.sham&&Wt&&Wt<41}),Qt=Ae&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ee=s.Object,Mt=Qt?function(Tt){return"symbol"==typeof Tt}:function(Tt){var Ot=ve("Symbol");return vt(Ot)&&oe(Ot.prototype,ee(Tt))},Yt=s.String,ye=function(Tt){try{return Yt(Tt)}catch(Ot){return"Object"}},ui=s.TypeError,Te=function(Tt){if(vt(Tt))return Tt;throw ui(ye(Tt)+" is not a function")},ce=function(Tt,Ot){var se=Tt[Ot];return null==se?void 0:Te(se)},te=s.TypeError,ue=Object.defineProperty,_e=function(Tt,Ot){try{ue(s,Tt,{value:Ot,configurable:!0,writable:!0})}catch(se){s[Tt]=Ot}return Ot},be="__core-js_shared__",zt=s[be]||_e(be,{}),Ge=n(function(Tt){(Tt.exports=function(Ot,se){return zt[Ot]||(zt[Ot]=void 0!==se?se:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),Xe=s.Object,Ri=function(Tt){return Xe(Z(Tt))},bi=St({}.hasOwnProperty),mi=Object.hasOwn||function(Ot,se){return bi(Ri(Ot),se)},on=0,li=Math.random(),Bi=St(1..toString),Ii=function(Tt){return"Symbol("+(void 0===Tt?"":Tt)+")_"+Bi(++on+li,36)},ni=Ge("wks"),vi=s.Symbol,Ce=vi&&vi.for,Qe=Qt?vi:vi&&vi.withoutSetter||Ii,Ei=function(Tt){if(!mi(ni,Tt)||!Ae&&"string"!=typeof ni[Tt]){var Ot="Symbol."+Tt;ni[Tt]=Ae&&mi(vi,Tt)?vi[Tt]:Qt&&Ce?Ce(Ot):Qe(Ot)}return ni[Tt]},Pi=s.TypeError,ti=Ei("toPrimitive"),ge=function(Tt,Ot){if(!At(Tt)||Mt(Tt))return Tt;var Oe,se=ce(Tt,ti);if(se){if(void 0===Ot&&(Ot="default"),Oe=P(se,Tt,Ot),!At(Oe)||Mt(Oe))return Oe;throw Pi("Can't convert object to primitive value")}return void 0===Ot&&(Ot="number"),function(Tt,Ot){var se,Oe;if("string"===Ot&&vt(se=Tt.toString)&&!At(Oe=P(se,Tt))||vt(se=Tt.valueOf)&&!At(Oe=P(se,Tt))||"string"!==Ot&&vt(se=Tt.toString)&&!At(Oe=P(se,Tt)))return Oe;throw te("Can't convert object to primitive value")}(Tt,Ot)},Pt=function(Tt){var Ot=ge(Tt,"string");return Mt(Ot)?Ot:Ot+""},dt=s.document,Nt=At(dt)&&At(dt.createElement),pe=function(Tt){return Nt?dt.createElement(Tt):{}},Le=!v&&!c(function(){return 7!=Object.defineProperty(pe("div"),"a",{get:function(){return 7}}).a}),Vi=Object.getOwnPropertyDescriptor,Sn={f:v?Vi:function(Ot,se){if(Ot=Zt(Ot),se=Pt(se),Le)try{return Vi(Ot,se)}catch(Oe){}if(mi(Ot,se))return gt(!P(Ft.f,Ot,se),Ot[se])}},ir=s.String,pi=s.TypeError,Ke=function(Tt){if(At(Tt))return Tt;throw pi(ir(Tt)+" is not an object")},Pe=s.TypeError,di=Object.defineProperty,dn={f:v?di:function(Ot,se,Oe){if(Ke(Ot),se=Pt(se),Ke(Oe),Le)try{return di(Ot,se,Oe)}catch(Ve){}if("get"in Oe||"set"in Oe)throw Pe("Accessors not supported");return"value"in Oe&&(Ot[se]=Oe.value),Ot}},Rn=v?function(Tt,Ot,se){return dn.f(Tt,Ot,gt(1,se))}:function(Tt,Ot,se){return Tt[Ot]=se,Tt},nr=St(Function.toString);vt(zt.inspectSource)||(zt.inspectSource=function(Tt){return nr(Tt)});var An,sr,Mr,xr=zt.inspectSource,io=s.WeakMap,_o=vt(io)&&/native code/.test(xr(io)),Ko=Ge("keys"),jr=function(Tt){return Ko[Tt]||(Ko[Tt]=Ii(Tt))},pr={},ss="Object already initialized",Zn=s.TypeError;if(_o||zt.state){var Yr=zt.state||(zt.state=new(0,s.WeakMap)),Tr=St(Yr.get),Ui=St(Yr.has),On=St(Yr.set);An=function(Tt,Ot){if(Ui(Yr,Tt))throw new Zn(ss);return Ot.facade=Tt,On(Yr,Tt,Ot),Ot},sr=function(Tt){return Tr(Yr,Tt)||{}},Mr=function(Tt){return Ui(Yr,Tt)}}else{var Nn=jr("state");pr[Nn]=!0,An=function(Tt,Ot){if(mi(Tt,Nn))throw new Zn(ss);return Ot.facade=Tt,Rn(Tt,Nn,Ot),Ot},sr=function(Tt){return mi(Tt,Nn)?Tt[Nn]:{}},Mr=function(Tt){return mi(Tt,Nn)}}var de={set:An,get:sr,has:Mr,enforce:function(Tt){return Mr(Tt)?sr(Tt):An(Tt,{})},getterFor:function(Tt){return function(Ot){var se;if(!At(Ot)||(se=sr(Ot)).type!==Tt)throw Zn("Incompatible receiver, "+Tt+" required");return se}}},Fe=Function.prototype,Ai=v&&Object.getOwnPropertyDescriptor,ji=mi(Fe,"name"),qn={EXISTS:ji,PROPER:ji&&"something"===function(){}.name,CONFIGURABLE:ji&&(!v||v&&Ai(Fe,"name").configurable)},Jn=n(function(Tt){var Ot=qn.CONFIGURABLE,se=de.get,Oe=de.enforce,Ve=String(String).split("String");(Tt.exports=function(fi,Je,oi,Li){var er,Ni=!!Li&&!!Li.unsafe,Gi=!!Li&&!!Li.enumerable,Wn=!!Li&&!!Li.noTargetGet,kn=Li&&void 0!==Li.name?Li.name:Je;vt(oi)&&("Symbol("===String(kn).slice(0,7)&&(kn="["+String(kn).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!mi(oi,"name")||Ot&&oi.name!==kn)&&Rn(oi,"name",kn),(er=Oe(oi)).source||(er.source=Ve.join("string"==typeof kn?kn:""))),fi!==s?(Ni?!Wn&&fi[Je]&&(Gi=!0):delete fi[Je],Gi?fi[Je]=oi:Rn(fi,Je,oi)):Gi?fi[Je]=oi:_e(Je,oi)})(Function.prototype,"toString",function(){return vt(this)&&se(this).source||xr(this)})}),Tn=Math.ceil,Jo=Math.floor,no=function(Tt){var Ot=+Tt;return Ot!=Ot||0===Ot?0:(Ot>0?Jo:Tn)(Ot)},ro=Math.max,vo=Math.min,Bs=function(Tt,Ot){var se=no(Tt);return se<0?ro(se+Ot,0):vo(se,Ot)},Hs=Math.min,tr=function(Tt){return Tt>0?Hs(no(Tt),9007199254740991):0},ho=function(Tt){return tr(Tt.length)},Go=function(Tt){return function(Ot,se,Oe){var oi,Ve=Zt(Ot),fi=ho(Ve),Je=Bs(Oe,fi);if(Tt&&se!=se){for(;fi>Je;)if((oi=Ve[Je++])!=oi)return!0}else for(;fi>Je;Je++)if((Tt||Je in Ve)&&Ve[Je]===se)return Tt||Je||0;return!Tt&&-1}},sl={includes:Go(!0),indexOf:Go(!1)},po=sl.indexOf,ya=St([].push),Zs=function(Tt,Ot){var fi,se=Zt(Tt),Oe=0,Ve=[];for(fi in se)!mi(pr,fi)&&mi(se,fi)&&ya(Ve,fi);for(;Ot.length>Oe;)mi(se,fi=Ot[Oe++])&&(~po(Ve,fi)||ya(Ve,fi));return Ve},Cr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qs=Cr.concat("length","prototype"),Ma={f:Object.getOwnPropertyNames||function(Ot){return Zs(Ot,Qs)}},Ts={f:Object.getOwnPropertySymbols},vl=St([].concat),ha=ve("Reflect","ownKeys")||function(Ot){var se=Ma.f(Ke(Ot)),Oe=Ts.f;return Oe?vl(se,Oe(Ot)):se},Aa=function(Tt,Ot){for(var se=ha(Ot),Oe=dn.f,Ve=Sn.f,fi=0;fi<se.length;fi++){var Je=se[fi];mi(Tt,Je)||Oe(Tt,Je,Ve(Ot,Je))}},ta=/#|\.prototype\./,as=function(Tt,Ot){var se=al[xl(Tt)];return se==Wo||se!=Us&&(vt(Ot)?c(Ot):!!Ot)},xl=as.normalize=function(Tt){return String(Tt).replace(ta,".").toLowerCase()},al=as.data={},Us=as.NATIVE="N",Wo=as.POLYFILL="P",No=as,Mo=Sn.f,_r=function(Tt,Ot){var Je,oi,Li,Ni,Gi,se=Tt.target,Oe=Tt.global,Ve=Tt.stat;if(Je=Oe?s:Ve?s[se]||_e(se,{}):(s[se]||{}).prototype)for(oi in Ot){if(Ni=Ot[oi],Li=Tt.noTargetGet?(Gi=Mo(Je,oi))&&Gi.value:Je[oi],!No(Oe?oi:se+(Ve?".":"#")+oi,Tt.forced)&&void 0!==Li){if(typeof Ni==typeof Li)continue;Aa(Ni,Li)}(Tt.sham||Li&&Li.sham)&&Rn(Ni,"sham",!0),Jn(Je,oi,Ni,Tt)}},Ta={};Ta[Ei("toStringTag")]="z";var Ti,Po="[object z]"===String(Ta),Vs=Ei("toStringTag"),Xr=s.Object,Oo="Arguments"==ht(function(){return arguments}()),Qr=Po?ht:function(Tt){var Ot,se,Oe;return void 0===Tt?"Undefined":null===Tt?"Null":"string"==typeof(se=function(Tt,Ot){try{return Tt[Ot]}catch(se){}}(Ot=Xr(Tt),Vs))?se:Oo?ht(Ot):"Object"==(Oe=ht(Ot))&&vt(Ot.callee)?"Arguments":Oe},Gs=s.String,Ar=function(Tt){if("Symbol"===Qr(Tt))throw TypeError("Cannot convert a Symbol value to a string");return Gs(Tt)},ea=function(){var Tt=Ke(this),Ot="";return Tt.global&&(Ot+="g"),Tt.ignoreCase&&(Ot+="i"),Tt.multiline&&(Ot+="m"),Tt.dotAll&&(Ot+="s"),Tt.unicode&&(Ot+="u"),Tt.sticky&&(Ot+="y"),Ot},Hr=s.RegExp,vs=c(function(){var Tt=Hr("a","y");return Tt.lastIndex=2,null!=Tt.exec("abcd")}),Na=c(function(){var Tt=Hr("^r","gy");return Tt.lastIndex=2,null!=Tt.exec("str")}),cs={UNSUPPORTED_Y:vs,BROKEN_CARET:Na},Ao=Object.keys||function(Ot){return Zs(Ot,Cr)},us=v?Object.defineProperties:function(Ot,se){Ke(Ot);for(var oi,Oe=Zt(se),Ve=Ao(se),fi=Ve.length,Je=0;fi>Je;)dn.f(Ot,oi=Ve[Je++],Oe[oi]);return Ot},ll=ve("document","documentElement"),ia="prototype",Lt="script",Q=jr("IE_PROTO"),V=function(){},j=function(Tt){return"<script>"+Tt+"</"+Lt+">"},xt=function(Tt){Tt.write(j("")),Tt.close();var Ot=Tt.parentWindow.Object;return Tt=null,Ot},an=function(){try{Ti=new ActiveXObject("htmlfile")}catch(Ot){}an="undefined"!=typeof document?document.domain&&Ti?xt(Ti):function(){var se,Tt=pe("iframe");return Tt.style.display="none",ll.appendChild(Tt),Tt.src=String("javascript:"),(se=Tt.contentWindow.document).open(),se.write(j("document.F=Object")),se.close(),se.F}():xt(Ti);for(var Tt=Cr.length;Tt--;)delete an[ia][Cr[Tt]];return an()};pr[Q]=!0;var Vn=Object.create||function(Ot,se){var Oe;return null!==Ot?(V[ia]=Ke(Ot),Oe=new V,V[ia]=null,Oe[Q]=Ot):Oe=an(),void 0===se?Oe:us(Oe,se)},wr=s.RegExp,vr=c(function(){var Tt=wr(".","s");return!(Tt.dotAll&&Tt.exec("\n")&&"s"===Tt.flags)}),yr=s.RegExp,Gr=c(function(){var Tt=yr("(?<a>b)","g");return"b"!==Tt.exec("b").groups.a||"bc"!=="b".replace(Tt,"$<a>c")}),rr=de.get,Fo=Ge("native-string-replace",String.prototype.replace),Gn=RegExp.prototype.exec,Bo=Gn,Ka=St("".charAt),zo=St("".indexOf),Ja=St("".replace),Cs=St("".slice),Ss=function(){var Tt=/a/,Ot=/b*/g;return P(Gn,Tt,"a"),P(Gn,Ot,"a"),0!==Tt.lastIndex||0!==Ot.lastIndex}(),bl=cs.UNSUPPORTED_Y||cs.BROKEN_CARET,Ji=void 0!==/()??/.exec("")[1];(Ss||Ji||bl||vr||Gr)&&(Bo=function(Ot){var Je,oi,Li,Ni,Gi,Wn,kn,se=this,Oe=rr(se),Ve=Ar(Ot),fi=Oe.raw;if(fi)return fi.lastIndex=se.lastIndex,Je=P(Bo,fi,Ve),se.lastIndex=fi.lastIndex,Je;var er=Oe.groups,ts=bl&&se.sticky,So=P(ea,se),Dr=se.source,to=0,Lo=Ve;if(ts&&(So=Ja(So,"y",""),-1===zo(So,"g")&&(So+="g"),Lo=Cs(Ve,se.lastIndex),se.lastIndex>0&&(!se.multiline||se.multiline&&"\n"!==Ka(Ve,se.lastIndex-1))&&(Dr="(?: "+Dr+")",Lo=" "+Lo,to++),oi=new RegExp("^(?:"+Dr+")",So)),Ji&&(oi=new RegExp("^"+Dr+"$(?!\\s)",So)),Ss&&(Li=se.lastIndex),Ni=P(Gn,ts?oi:se,Lo),ts?Ni?(Ni.input=Cs(Ni.input,to),Ni[0]=Cs(Ni[0],to),Ni.index=se.lastIndex,se.lastIndex+=Ni[0].length):se.lastIndex=0:Ss&&Ni&&(se.lastIndex=se.global?Ni.index+Ni[0].length:Li),Ji&&Ni&&Ni.length>1&&P(Fo,Ni[0],oi,function(){for(Gi=1;Gi<arguments.length-2;Gi++)void 0===arguments[Gi]&&(Ni[Gi]=void 0)}),Ni&&er)for(Ni.groups=Wn=Vn(null),Gi=0;Gi<er.length;Gi++)Wn[(kn=er[Gi])[0]]=Ni[kn[1]];return Ni});var ae=Bo;_r({target:"RegExp",proto:!0,forced:/./.exec!==ae},{exec:ae});var z=Ei("species"),J=RegExp.prototype,Et=function(Tt,Ot,se,Oe){var Ve=Ei(Tt),fi=!c(function(){var Ni={};return Ni[Ve]=function(){return 7},7!=""[Tt](Ni)}),Je=fi&&!c(function(){var Ni=!1,Gi=/a/;return"split"===Tt&&((Gi={}).constructor={},Gi.constructor[z]=function(){return Gi},Gi.flags="",Gi[Ve]=/./[Ve]),Gi.exec=function(){return Ni=!0,null},Gi[Ve](""),!Ni});if(!fi||!Je||se){var oi=St(/./[Ve]),Li=Ot(Ve,""[Tt],function(Ni,Gi,Wn,kn,er){var ts=St(Ni),So=Gi.exec;return So===ae||So===J.exec?fi&&!er?{done:!0,value:oi(Gi,Wn,kn)}:{done:!0,value:ts(Wn,Gi,kn)}:{done:!1}});Jn(String.prototype,Tt,Li[0]),Jn(J,Ve,Li[1])}Oe&&Rn(J[Ve],"sham",!0)},ie=St("".charAt),Ee=St("".charCodeAt),Ye=St("".slice),$e=function(Tt){return function(Ot,se){var Je,oi,Oe=Ar(Z(Ot)),Ve=no(se),fi=Oe.length;return Ve<0||Ve>=fi?Tt?"":void 0:(Je=Ee(Oe,Ve))<55296||Je>56319||Ve+1===fi||(oi=Ee(Oe,Ve+1))<56320||oi>57343?Tt?ie(Oe,Ve):Je:Tt?Ye(Oe,Ve,Ve+2):oi-56320+(Je-55296<<10)+65536}},Hi=($e(!1),$e(!0)),sn=function(Tt,Ot,se){return Ot+(se?Hi(Tt,Ot).length:1)},fn=s.TypeError,Yn=function(Tt,Ot){var se=Tt.exec;if(vt(se)){var Oe=P(se,Tt,Ot);return null!==Oe&&Ke(Oe),Oe}if("RegExp"===ht(Tt))return P(ae,Tt,Ot);throw fn("RegExp#exec called on incompatible receiver")};Et("match",function(Tt,Ot,se){return[function(Ve){var fi=Z(this),Je=null==Ve?void 0:ce(Ve,Tt);return Je?P(Je,Ve,fi):new RegExp(Ve)[Tt](Ar(fi))},function(Oe){var Ve=Ke(this),fi=Ar(Oe),Je=se(Ot,Ve,fi);if(Je.done)return Je.value;if(!Ve.global)return Yn(Ve,fi);var oi=Ve.unicode;Ve.lastIndex=0;for(var Gi,Li=[],Ni=0;null!==(Gi=Yn(Ve,fi));){var Wn=Ar(Gi[0]);Li[Ni]=Wn,""===Wn&&(Ve.lastIndex=sn(fi,tr(Ve.lastIndex),oi)),Ni++}return 0===Ni?null:Li}]});var cr=Array.isArray||function(Ot){return"Array"==ht(Ot)},Pn=function(Tt,Ot,se){var Oe=Pt(Ot);Oe in Tt?dn.f(Tt,Oe,gt(0,se)):Tt[Oe]=se},Fn=function(){},or=[],Wr=ve("Reflect","construct"),Kr=/^\s*(?:class|function)\b/,$o=St(Kr.exec),xo=!Kr.exec(Fn),Ws=function(Tt){if(!vt(Tt))return!1;try{return Wr(Fn,or,Tt),!0}catch(Ot){return!1}},ko=!Wr||c(function(){var Tt;return Ws(Ws.call)||!Ws(Object)||!Ws(function(){Tt=!0})||Tt})?function(Tt){if(!vt(Tt))return!1;switch(Qr(Tt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return xo||!!$o(Kr,xr(Tt))}:Ws,zs=Ei("species"),Rs=s.Array,$a=function(Tt,Ot){return new(function(Tt){var Ot;return cr(Tt)&&(ko(Ot=Tt.constructor)&&(Ot===Rs||cr(Ot.prototype))||At(Ot)&&null===(Ot=Ot[zs]))&&(Ot=void 0),void 0===Ot?Rs:Ot}(Tt))(0===Ot?0:Ot)},oo=Ei("species"),Ds=function(Tt){return Wt>=51||!c(function(){var Ot=[];return(Ot.constructor={})[oo]=function(){return{foo:1}},1!==Ot[Tt](Boolean).foo})},Za=Ei("isConcatSpreadable"),Zo=9007199254740991,Dn="Maximum allowed index exceeded",jn=s.TypeError,bn=Wt>=51||!c(function(){var Tt=[];return Tt[Za]=!1,Tt.concat()[0]!==Tt}),ur=Ds("concat"),fr=function(Tt){if(!At(Tt))return!1;var Ot=Tt[Za];return void 0!==Ot?!!Ot:cr(Tt)};_r({target:"Array",proto:!0,forced:!bn||!ur},{concat:function(Ot){var fi,Je,oi,Li,Ni,se=Ri(this),Oe=$a(se,0),Ve=0;for(fi=-1,oi=arguments.length;fi<oi;fi++)if(fr(Ni=-1===fi?se:arguments[fi])){if(Ve+(Li=ho(Ni))>Zo)throw jn(Dn);for(Je=0;Je<Li;Je++,Ve++)Je in Ni&&Pn(Oe,Ve,Ni[Je])}else{if(Ve>=Zo)throw jn(Dn);Pn(Oe,Ve++,Ni)}return Oe.length=Ve,Oe}}),Po||Jn(Object.prototype,"toString",Po?{}.toString:function(){return"[object "+Qr(this)+"]"},{unsafe:!0});var ra=qn.PROPER,qr="toString",Do=RegExp.prototype,hs=Do[qr],bs=St(ea);(c(function(){return"/a/b"!=hs.call({source:"a",flags:"b"})})||ra&&hs.name!=qr)&&Jn(RegExp.prototype,qr,function(){var Ot=Ke(this),se=Ar(Ot.source),Oe=Ot.flags;return"/"+se+"/"+Ar(void 0===Oe&&oe(Do,Ot)&&!("flags"in Do)?bs(Ot):Oe)},{unsafe:!0});var js=Function.prototype,kl=js.apply,Ms=js.call,Ho="object"==typeof Reflect&&Reflect.apply||(js.bind?Ms.bind(kl):function(){return Ms.apply(kl,arguments)}),pa=Ei("match"),Pa=function(Tt){var Ot;return At(Tt)&&(void 0!==(Ot=Tt[pa])?!!Ot:"RegExp"==ht(Tt))},fa=s.TypeError,qa=Ei("species"),yl=function(Tt,Ot){var Oe,se=Ke(Tt).constructor;return void 0===se||null==(Oe=Ke(se)[qa])?Ot:function(Tt){if(ko(Tt))return Tt;throw fa(ye(Tt)+" is not a constructor")}(Oe)},Ll=St([].slice),El=cs.UNSUPPORTED_Y,Oa=4294967295,ac=Math.min,Nl=[].push,lc=St(/./.exec),ds=St(Nl),Ys=St("".slice),Fa=!c(function(){var Tt=/(?:)/,Ot=Tt.exec;Tt.exec=function(){return Ot.apply(this,arguments)};var se="ab".split(Tt);return 2!==se.length||"a"!==se[0]||"b"!==se[1]});function oa(Tt,Ot){if(Tt instanceof SVGElement){var se=Tt.getAttribute("class")||"";se.match(Ot)||Tt.setAttribute("class","".concat(se," ").concat(Ot))}else void 0!==Tt.classList?g(Ot.split(" "),function(Ve){Tt.classList.add(Ve)}):Tt.className.match(Ot)||(Tt.className+=" ".concat(Ot))}function Ba(Tt,Ot){var se="";return Tt.currentStyle?se=Tt.currentStyle[Ot]:document.defaultView&&document.defaultView.getComputedStyle&&(se=document.defaultView.getComputedStyle(Tt,null).getPropertyValue(Ot)),se&&se.toLowerCase?se.toLowerCase():se}function uc(Tt){var Ot=Tt.element;if(this._options.scrollToElement){var se=function(Tt){var Ot=window.getComputedStyle(Tt),se="absolute"===Ot.position,Oe=/(auto|scroll)/;if("fixed"===Ot.position)return document.body;for(var Ve=Tt;Ve=Ve.parentElement;)if(Ot=window.getComputedStyle(Ve),(!se||"static"!==Ot.position)&&Oe.test(Ot.overflow+Ot.overflowY+Ot.overflowX))return Ve;return document.body}(Ot);se!==document.body&&(se.scrollTop=Ot.offsetTop-se.offsetTop)}}function Kl(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var Tt=document.documentElement;return{width:Tt.clientWidth,height:Tt.clientHeight}}function mt(Tt,Ot,se){var Ve,Oe=Ot.element;if("off"!==Tt&&this._options.scrollToElement&&(Ve="tooltip"===Tt?se.getBoundingClientRect():Oe.getBoundingClientRect(),!function(Tt){var Ot=Tt.getBoundingClientRect();return Ot.top>=0&&Ot.left>=0&&Ot.bottom+80<=window.innerHeight&&Ot.right<=window.innerWidth}(Oe))){var fi=Kl().height;Ve.bottom-(Ve.bottom-Ve.top)<0||Oe.clientHeight>fi?window.scrollBy(0,Ve.top-(fi/2-Ve.height/2)-this._options.scrollPadding):window.scrollBy(0,Ve.top-(fi/2-Ve.height/2)+this._options.scrollPadding)}}function at(Tt){Tt.setAttribute("role","button"),Tt.tabIndex=0}Et("split",function(Tt,Ot,se){var Oe;return Oe="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(Ve,fi){var Je=Ar(Z(this)),oi=void 0===fi?Oa:fi>>>0;if(0===oi)return[];if(void 0===Ve)return[Je];if(!Pa(Ve))return P(Ot,Je,Ve,oi);for(var kn,er,ts,Li=[],Gi=0,Wn=new RegExp(Ve.source,(Ve.ignoreCase?"i":"")+(Ve.multiline?"m":"")+(Ve.unicode?"u":"")+(Ve.sticky?"y":"")+"g");(kn=P(ae,Wn,Je))&&!((er=Wn.lastIndex)>Gi&&(ds(Li,Ys(Je,Gi,kn.index)),kn.length>1&&kn.index<Je.length&&Ho(Nl,Li,Ll(kn,1)),ts=kn[0].length,Gi=er,Li.length>=oi));)Wn.lastIndex===kn.index&&Wn.lastIndex++;return Gi===Je.length?(ts||!lc(Wn,""))&&ds(Li,""):ds(Li,Ys(Je,Gi)),Li.length>oi?Ll(Li,0,oi):Li}:"0".split(void 0,0).length?function(Ve,fi){return void 0===Ve&&0===fi?[]:P(Ot,this,Ve,fi)}:Ot,[function(fi,Je){var oi=Z(this),Li=null==fi?void 0:ce(fi,Tt);return Li?P(Li,fi,oi,Je):P(Oe,Ar(oi),fi,Je)},function(Ve,fi){var Je=Ke(this),oi=Ar(Ve),Li=se(Oe,Je,oi,fi,Oe!==Ot);if(Li.done)return Li.value;var Ni=yl(Je,RegExp),Gi=Je.unicode,kn=new Ni(El?"^(?:"+Je.source+")":Je,(Je.ignoreCase?"i":"")+(Je.multiline?"m":"")+(Je.unicode?"u":"")+(El?"g":"y")),er=void 0===fi?Oa:fi>>>0;if(0===er)return[];if(0===oi.length)return null===Yn(kn,oi)?[oi]:[];for(var ts=0,So=0,Dr=[];So<oi.length;){kn.lastIndex=El?0:So;var Lo,to=Yn(kn,El?Ys(oi,So):oi);if(null===to||(Lo=ac(tr(kn.lastIndex+(El?So:0)),oi.length))===ts)So=sn(oi,So,Gi);else{if(ds(Dr,Ys(oi,ts,So)),Dr.length===er)return Dr;for(var co=1;co<=to.length-1;co++)if(ds(Dr,to[co]),Dr.length===er)return Dr;So=ts=Lo}}return ds(Dr,Ys(oi,ts)),Dr}]},!Fa,El);var et=Object.assign,kt=Object.defineProperty,jt=St([].concat),me=!et||c(function(){if(v&&1!==et({b:1},et(kt({},"a",{enumerable:!0,get:function(){kt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var Tt={},Ot={},se=Symbol(),Oe="abcdefghijklmnopqrst";return Tt[se]=7,Oe.split("").forEach(function(Ve){Ot[Ve]=Ve}),7!=et({},Tt)[se]||Ao(et({},Ot)).join("")!=Oe})?function(Ot,se){for(var Oe=Ri(Ot),Ve=arguments.length,fi=1,Je=Ts.f,oi=Ft.f;Ve>fi;)for(var kn,Li=ot(arguments[fi++]),Ni=Je?jt(Ao(Li),Je(Li)):Ao(Li),Gi=Ni.length,Wn=0;Gi>Wn;)kn=Ni[Wn++],(!v||P(oi,Li,kn))&&(Oe[kn]=Li[kn]);return Oe}:et;function Ue(Tt){var Ot=Tt.parentNode;return!(!Ot||"HTML"===Ot.nodeName)&&("fixed"===Ba(Tt,"position")||Ue(Ot))}function ei(Tt,Ot){var se=document.body,Oe=document.documentElement,Ve=window.pageYOffset||Oe.scrollTop||se.scrollTop,fi=window.pageXOffset||Oe.scrollLeft||se.scrollLeft;Ot=Ot||se;var Je=Tt.getBoundingClientRect(),oi=Ot.getBoundingClientRect(),Li=Ba(Ot,"position"),Ni={width:Je.width,height:Je.height};return"body"!==Ot.tagName.toLowerCase()&&"relative"===Li||"sticky"===Li?Object.assign(Ni,{top:Je.top-oi.top,left:Je.left-oi.left}):Ue(Tt)?Object.assign(Ni,{top:Je.top,left:Je.left}):Object.assign(Ni,{top:Je.top+Ve,left:Je.left+fi})}_r({target:"Object",stat:!0,forced:Object.assign!==me},{assign:me});var xi=Math.floor,pn=St("".charAt),lr=St("".replace),Hn=St("".slice),kr=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,so=/\$([$&'`]|\d{1,2})/g,cl=function(Tt,Ot,se,Oe,Ve,fi){var Je=se+Tt.length,oi=Oe.length,Li=so;return void 0!==Ve&&(Ve=Ri(Ve),Li=kr),lr(fi,Li,function(Ni,Gi){var Wn;switch(pn(Gi,0)){case"$":return"$";case"&":return Tt;case"`":return Hn(Ot,0,se);case"'":return Hn(Ot,Je);case"<":Wn=Ve[Hn(Gi,1,-1)];break;default:var kn=+Gi;if(0===kn)return Ni;if(kn>oi){var er=xi(kn/10);return 0===er?Ni:er<=oi?void 0===Oe[er-1]?pn(Gi,1):Oe[er-1]+pn(Gi,1):Ni}Wn=Oe[kn-1]}return void 0===Wn?"":Wn})},Xs=Ei("replace"),Ca=Math.max,As=Math.min,ys=St([].concat),sa=St([].push),Tl=St("".indexOf),ga=St("".slice),hc=function(Tt){return void 0===Tt?Tt:String(Tt)},ma="$0"==="a".replace(/./,"$0"),Jl=!!/./[Xs]&&""===/./[Xs]("a","$0"),Os=!c(function(){var Tt=/./;return Tt.exec=function(){var Ot=[];return Ot.groups={a:"7"},Ot},"7"!=="".replace(Tt,"$<a>")});function bo(Tt,Ot){if(Tt instanceof SVGElement){var se=Tt.getAttribute("class")||"";Tt.setAttribute("class",se.replace(Ot,"").replace(/^\s+|\s+$/g,""))}else Tt.className=Tt.className.replace(Ot,"").replace(/^\s+|\s+$/g,"")}function ao(Tt,Ot){var se="";if(Tt.style.cssText&&(se+=Tt.style.cssText),"string"==typeof Ot)se+=Ot;else for(var Oe in Ot)se+="".concat(Oe,":").concat(Ot[Oe],";");Tt.style.cssText=se}function zr(Tt){if(Tt){if(!this._introItems[this._currentStep])return;var Ot=this._introItems[this._currentStep],se=ei(Ot.element,this._targetElement),Oe=this._options.helperElementPadding;Ue(Ot.element)?oa(Tt,"introjs-fixedTooltip"):bo(Tt,"introjs-fixedTooltip"),"floating"===Ot.position&&(Oe=0),ao(Tt,{width:"".concat(se.width+Oe,"px"),height:"".concat(se.height+Oe,"px"),top:"".concat(se.top-Oe/2,"px"),left:"".concat(se.left-Oe/2,"px")})}}Et("replace",function(Tt,Ot,se){var Oe=Jl?"$":"$0";return[function(fi,Je){var oi=Z(this),Li=null==fi?void 0:ce(fi,Xs);return Li?P(Li,fi,oi,Je):P(Ot,Ar(oi),fi,Je)},function(Ve,fi){var Je=Ke(this),oi=Ar(Ve);if("string"==typeof fi&&-1===Tl(fi,Oe)&&-1===Tl(fi,"$<")){var Li=se(Ot,Je,oi,fi);if(Li.done)return Li.value}var Ni=vt(fi);Ni||(fi=Ar(fi));var Gi=Je.global;if(Gi){var Wn=Je.unicode;Je.lastIndex=0}for(var kn=[];;){var er=Yn(Je,oi);if(null===er||(sa(kn,er),!Gi))break;""===Ar(er[0])&&(Je.lastIndex=sn(oi,tr(Je.lastIndex),Wn))}for(var So="",Dr=0,to=0;to<kn.length;to++){for(var Lo=Ar((er=kn[to])[0]),co=Ca(As(no(er.index),oi.length),0),Es=[],es=1;es<er.length;es++)sa(Es,hc(er[es]));var ks=er.groups;if(Ni){var za=ys([Lo],Es,co,oi);void 0!==ks&&sa(za,ks);var bu=Ar(Ho(fi,void 0,za))}else bu=cl(Lo,oi,co,Es,ks,fi);co>=Dr&&(So+=ga(oi,Dr,co)+bu,Dr=co+Lo.length)}return So+ga(oi,Dr)}]},!Os||!ma||Jl);var Ac=Ei("unscopables"),Jc=Array.prototype;null==Jc[Ac]&&dn.f(Jc,Ac,{configurable:!0,value:Vn(null)});var Ju=sl.includes;_r({target:"Array",proto:!0},{includes:function(Ot){return Ju(this,Ot,arguments.length>1?arguments[1]:void 0)}}),function(Tt){Jc[Ac][Tt]=!0}("includes");var Oc=Ds("slice"),Mu=Ei("species"),xc=s.Array,$u=Math.max;_r({target:"Array",proto:!0,forced:!Oc},{slice:function(Ot,se){var oi,Li,Ni,Oe=Zt(this),Ve=ho(Oe),fi=Bs(Ot,Ve),Je=Bs(void 0===se?Ve:se,Ve);if(cr(Oe)&&((ko(oi=Oe.constructor)&&(oi===xc||cr(oi.prototype))||At(oi)&&null===(oi=oi[Mu]))&&(oi=void 0),oi===xc||void 0===oi))return Ll(Oe,fi,Je);for(Li=new(void 0===oi?xc:oi)($u(Je-fi,0)),Ni=0;fi<Je;fi++,Ni++)fi in Oe&&Pn(Li,Ni,Oe[fi]);return Li.length=Ni,Li}});var Au=s.TypeError,Ou=function(Tt){if(Pa(Tt))throw Au("The method doesn't accept regular expressions");return Tt},$l=Ei("match"),qo=St("".indexOf);_r({target:"String",proto:!0,forced:!function(Tt){var Ot=/./;try{"/./"[Tt](Ot)}catch(se){try{return Ot[$l]=!1,"/./"[Tt](Ot)}catch(Oe){}}return!1}("includes")},{includes:function(Ot){return!!~qo(Ar(Z(this)),Ar(Ou(Ot)),arguments.length>1?arguments[1]:void 0)}});var kc=function(Tt,Ot){var se=[][Tt];return!!se&&c(function(){se.call(null,Ot||function(){throw 1},1)})},Sa=St([].join),$c=ot!=Object,Zl=kc("join",",");_r({target:"Array",proto:!0,forced:$c||!Zl},{join:function(Ot){return Sa(Zt(this),void 0===Ot?",":Ot)}});var fo=St(St.bind),xa=St([].push),_a=function(Tt){var Ot=1==Tt,se=2==Tt,Oe=3==Tt,Ve=4==Tt,fi=6==Tt,Je=7==Tt,oi=5==Tt||fi;return function(Li,Ni,Gi,Wn){for(var co,Es,kn=Ri(Li),er=ot(kn),ts=function(Tt,Ot){return Te(Tt),void 0===Ot?Tt:fo?fo(Tt,Ot):function(){return Tt.apply(Ot,arguments)}}(Ni,Gi),So=ho(er),Dr=0,to=Wn||$a,Lo=Ot?to(Li,So):se||Je?to(Li,0):void 0;So>Dr;Dr++)if((oi||Dr in er)&&(Es=ts(co=er[Dr],Dr,kn),Tt))if(Ot)Lo[Dr]=Es;else if(Es)switch(Tt){case 3:return!0;case 5:return co;case 6:return Dr;case 2:xa(Lo,co)}else switch(Tt){case 4:return!1;case 7:xa(Lo,co)}return fi?-1:Oe||Ve?Ve:Lo}},Qc=[_a(0),_a(1),_a(2),_a(3),_a(4),_a(5),_a(6),_a(7)][2];function Lr(Tt,Ot,se,Oe,Ve){return Tt.left+Ot+se.width>Oe.width?(Ve.style.left="".concat(Oe.width-se.width-Tt.left,"px"),!1):(Ve.style.left="".concat(Ot,"px"),!0)}function Ha(Tt,Ot,se,Oe){return Tt.left+Tt.width-Ot-se.width<0?(Oe.style.left="".concat(-Tt.left,"px"),!1):(Oe.style.right="".concat(Ot,"px"),!0)}_r({target:"Array",proto:!0,forced:!Ds("filter")},{filter:function(Ot){return Qc(this,Ot,arguments.length>1?arguments[1]:void 0)}});var dc=Ds("splice"),Pl=s.TypeError,Yo=Math.max,qc=Math.min,pc=9007199254740991,gu="Maximum allowed length exceeded";function ul(Tt,Ot){Tt.includes(Ot)&&Tt.splice(Tt.indexOf(Ot),1)}function tu(Tt,Ot,se){var Oe=this._options.positionPrecedence.slice(),Ve=Kl(),fi=ei(Ot).height+10,Je=ei(Ot).width+20,oi=Tt.getBoundingClientRect(),Li="floating";oi.bottom+fi>Ve.height&&ul(Oe,"bottom"),oi.top-fi<0&&ul(Oe,"top"),oi.right+Je>Ve.width&&ul(Oe,"right"),oi.left-Je<0&&ul(Oe,"left");var Gi,Wn,Ni=-1!==(Wn=(Gi=se||"").indexOf("-"))?Gi.substr(Wn):"";return se&&(se=se.split("-")[0]),Oe.length&&(Li=Oe.includes(se)?se:Oe[0]),["top","bottom"].includes(Li)&&(Li+=function(Tt,Ot,se,Oe){var fi=Ot/2,Je=Math.min(se.width,window.screen.width),oi=["-left-aligned","-middle-aligned","-right-aligned"];return Je-Tt<Ot&&ul(oi,"-left-aligned"),(Tt<fi||Je-Tt<fi)&&ul(oi,"-middle-aligned"),Tt<Ot&&ul(oi,"-right-aligned"),oi.length?oi.includes(Oe)?Oe:oi[0]:"-middle-aligned"}(oi.left,Je,Ve,Ni)),Li}function xs(Tt,Ot,se,Oe){var fi,Je,oi,Li,Ni;if(Oe=Oe||!1,Ot.style.top=null,Ot.style.right=null,Ot.style.bottom=null,Ot.style.left=null,Ot.style.marginLeft=null,Ot.style.marginTop=null,se.style.display="inherit",this._introItems[this._currentStep])switch(Ot.className=["introjs-tooltip","string"==typeof(fi=this._introItems[this._currentStep]).tooltipClass?fi.tooltipClass:this._options.tooltipClass].filter(Boolean).join(" "),Ot.setAttribute("role","dialog"),"floating"!==(Ni=this._introItems[this._currentStep].position)&&this._options.autoPosition&&(Ni=tu.call(this,Tt,Ot,Ni)),oi=ei(Tt),Je=ei(Ot),Li=Kl(),oa(Ot,"introjs-".concat(Ni)),Ni){case"top-right-aligned":se.className="introjs-arrow bottom-right";var Wn=0;Ha(oi,Wn,Je,Ot),Ot.style.bottom="".concat(oi.height+20,"px");break;case"top-middle-aligned":se.className="introjs-arrow bottom-middle";var kn=oi.width/2-Je.width/2;Oe&&(kn+=5),Ha(oi,kn,Je,Ot)&&(Ot.style.right=null,Lr(oi,kn,Je,Li,Ot)),Ot.style.bottom="".concat(oi.height+20,"px");break;case"top-left-aligned":case"top":se.className="introjs-arrow bottom",Lr(oi,Oe?0:15,Je,Li,Ot),Ot.style.bottom="".concat(oi.height+20,"px");break;case"right":Ot.style.left="".concat(oi.width+20,"px"),oi.top+Je.height>Li.height?(se.className="introjs-arrow left-bottom",Ot.style.top="-".concat(Je.height-oi.height-20,"px")):se.className="introjs-arrow left";break;case"left":!Oe&&!0===this._options.showStepNumbers&&(Ot.style.top="15px"),oi.top+Je.height>Li.height?(Ot.style.top="-".concat(Je.height-oi.height-20,"px"),se.className="introjs-arrow right-bottom"):se.className="introjs-arrow right",Ot.style.right="".concat(oi.width+20,"px");break;case"floating":se.style.display="none",Ot.style.left="50%",Ot.style.top="50%",Ot.style.marginLeft="-".concat(Je.width/2,"px"),Ot.style.marginTop="-".concat(Je.height/2,"px");break;case"bottom-right-aligned":se.className="introjs-arrow top-right",Ha(oi,Wn=0,Je,Ot),Ot.style.top="".concat(oi.height+20,"px");break;case"bottom-middle-aligned":se.className="introjs-arrow top-middle",kn=oi.width/2-Je.width/2,Oe&&(kn+=5),Ha(oi,kn,Je,Ot)&&(Ot.style.right=null,Lr(oi,kn,Je,Li,Ot)),Ot.style.top="".concat(oi.height+20,"px");break;default:se.className="introjs-arrow top",Lr(oi,0,Je,Li,Ot),Ot.style.top="".concat(oi.height+20,"px")}}function hl(){g(document.querySelectorAll(".introjs-showElement"),function(Ot){bo(Ot,/introjs-[a-zA-Z]+/g)})}function Er(Tt,Ot){var se=document.createElement(Tt);Ot=Ot||{};var Oe=/^(?:role|data-|aria-)/;for(var Ve in Ot){var fi=Ot[Ve];"style"===Ve?ao(se,fi):Ve.match(Oe)?se.setAttribute(Ve,fi):se[Ve]=fi}return se}function eu(Tt,Ot,se){if(se){var Oe=Ot.style.opacity||"1";ao(Ot,{opacity:"0"}),window.setTimeout(function(){ao(Ot,{opacity:Oe})},10)}Tt.appendChild(Ot)}function Ql(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function fc(){var Tt=document.querySelector(".introjs-disableInteraction");null===Tt&&(Tt=Er("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(Tt)),zr.call(this,Tt)}function Ra(Tt){var Ot=this,se=Er("div",{className:"introjs-bullets"});!1===this._options.showBullets&&(se.style.display="none");var Oe=Er("ul");Oe.setAttribute("role","tablist");var Ve=function(){Ot.goToStep(this.getAttribute("data-stepnumber"))};return g(this._introItems,function(fi,Je){var oi=fi.step,Li=Er("li"),Ni=Er("a");Li.setAttribute("role","presentation"),Ni.setAttribute("role","tab"),Ni.onclick=Ve,Je===Tt.step-1&&(Ni.className="active"),at(Ni),Ni.innerHTML="&nbsp;",Ni.setAttribute("data-stepnumber",oi),Li.appendChild(Ni),Oe.appendChild(Li)}),se.appendChild(Oe),se}function ql(Tt,Ot){if(this._options.showBullets){var se=document.querySelector(".introjs-bullets");se.parentNode.replaceChild(Ra.call(this,Ot),se)}}function mu(Tt,Ot){this._options.showBullets&&(Tt.querySelector(".introjs-bullets li > a.active").className="",Tt.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(Ot.step,'"]')).className="active")}function Eo(){var Tt=Er("div");Tt.className="introjs-progress",!1===this._options.showProgress&&(Tt.style.display="none");var Ot=Er("div",{className:"introjs-progressbar"});return this._options.progressBarAdditionalClass&&(Ot.className+=" "+this._options.progressBarAdditionalClass),Ot.setAttribute("role","progress"),Ot.setAttribute("aria-valuemin",0),Ot.setAttribute("aria-valuemax",100),Ot.setAttribute("aria-valuenow",Ql.call(this)),Ot.style.cssText="width:".concat(Ql.call(this),"%;"),Tt.appendChild(Ot),Tt}function Zu(Tt){Tt.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(Ql.call(this),"%;"),Tt.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",Ql.call(this))}function gc(Tt){var Ot=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,Tt.element);var Je,oi,Li,se=this,Oe=document.querySelector(".introjs-helperLayer"),Ve=document.querySelector(".introjs-tooltipReferenceLayer"),fi="introjs-helperLayer";if("string"==typeof Tt.highlightClass&&(fi+=" ".concat(Tt.highlightClass)),"string"==typeof this._options.highlightClass&&(fi+=" ".concat(this._options.highlightClass)),null!==Oe&&null!==Ve){var Ni=Ve.querySelector(".introjs-helperNumberLayer"),Gi=Ve.querySelector(".introjs-tooltiptext"),Wn=Ve.querySelector(".introjs-tooltip-title"),kn=Ve.querySelector(".introjs-arrow"),er=Ve.querySelector(".introjs-tooltip");Li=Ve.querySelector(".introjs-skipbutton"),oi=Ve.querySelector(".introjs-prevbutton"),Je=Ve.querySelector(".introjs-nextbutton"),Oe.className=fi,er.style.opacity=0,er.style.display="none",uc.call(se,Tt),zr.call(se,Oe),zr.call(se,Ve),hl(),se._lastShowElementTimer&&window.clearTimeout(se._lastShowElementTimer),se._lastShowElementTimer=window.setTimeout(function(){null!==Ni&&(Ni.innerHTML="".concat(Tt.step," of ").concat(Ot._introItems.length)),Gi.innerHTML=Tt.intro,Wn.innerHTML=Tt.title,er.style.display="block",xs.call(se,Tt.element,er,kn),mu.call(se,Ve,Tt),Zu.call(se,Ve),er.style.opacity=1,(null!=Je&&/introjs-donebutton/gi.test(Je.className)||null!=Je)&&Je.focus(),mt.call(se,Tt.scrollTo,Tt,Gi)},350)}else{var ts=Er("div",{className:fi}),So=Er("div",{className:"introjs-tooltipReferenceLayer"}),Dr=Er("div",{className:"introjs-arrow"}),to=Er("div",{className:"introjs-tooltip"}),Lo=Er("div",{className:"introjs-tooltiptext"}),co=Er("div",{className:"introjs-tooltip-header"}),Es=Er("h1",{className:"introjs-tooltip-title"}),es=Er("div");ao(ts,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(se._options.overlayOpacity.toString(),") 0 0 0 5000px")}),uc.call(se,Tt),zr.call(se,ts),zr.call(se,So),eu(this._targetElement,ts,!0),eu(this._targetElement,So),Lo.innerHTML=Tt.intro,Es.innerHTML=Tt.title,es.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(es.style.display="none"),co.appendChild(Es),to.appendChild(co),to.appendChild(Lo),to.appendChild(Ra.call(this,Tt)),to.appendChild(Eo.call(this));var ks=Er("div");!0===this._options.showStepNumbers&&(ks.className="introjs-helperNumberLayer",ks.innerHTML="".concat(Tt.step," of ").concat(this._introItems.length),to.appendChild(ks)),to.appendChild(Dr),So.appendChild(to),(Je=Er("a")).onclick=function(){se._introItems.length-1!==se._currentStep?Ua.call(se):/introjs-donebutton/gi.test(Je.className)&&("function"==typeof se._introCompleteCallback&&se._introCompleteCallback.call(se,se._currentStep,"done"),ca.call(se,se._targetElement))},at(Je),Je.innerHTML=this._options.nextLabel,(oi=Er("a")).onclick=function(){0!==se._currentStep&&aa.call(se)},at(oi),oi.innerHTML=this._options.prevLabel,at(Li=Er("a",{className:"introjs-skipbutton"})),Li.innerHTML=this._options.skipLabel,Li.onclick=function(){se._introItems.length-1===se._currentStep&&"function"==typeof se._introCompleteCallback&&se._introCompleteCallback.call(se,se._currentStep,"skip"),"function"==typeof se._introSkipCallback&&se._introSkipCallback.call(se),ca.call(se,se._targetElement)},co.appendChild(Li),this._introItems.length>1&&es.appendChild(oi),es.appendChild(Je),to.appendChild(es),xs.call(se,Tt.element,to,Dr),mt.call(this,Tt.scrollTo,Tt,to)}var za=se._targetElement.querySelector(".introjs-disableInteraction");za&&za.parentNode.removeChild(za),Tt.disableInteraction&&fc.call(se),0===this._currentStep&&this._introItems.length>1?(null!=Je&&(Je.className="".concat(this._options.buttonClass," introjs-nextbutton"),Je.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=oi&&(oi.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=Je&&oa(Je,"introjs-fullbutton")):null!=oi&&(oi.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=oi&&(oi.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=Je&&(Je.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=oi&&oa(oi,"introjs-fullbutton")):null!=Je&&(!0===this._options.nextToDone?(Je.innerHTML=this._options.doneLabel,oa(Je,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):Je.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=oi&&(oi.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=Je&&(Je.className="".concat(this._options.buttonClass," introjs-nextbutton"),Je.innerHTML=this._options.nextLabel)),null!=oi&&oi.setAttribute("role","button"),null!=Je&&Je.setAttribute("role","button"),null!=Li&&Li.setAttribute("role","button"),null!=Je&&Je.focus(),function(Tt){var Ot=Tt.element;oa(Ot,"introjs-showElement");var se=Ba(Ot,"position");"absolute"!==se&&"relative"!==se&&"sticky"!==se&&"fixed"!==se&&oa(Ot,"introjs-relativePosition")}(Tt),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,Tt.element)}function _u(Tt){this._currentStep=Tt-2,void 0!==this._introItems&&Ua.call(this)}function mc(Tt){this._currentStepNumber=Tt,void 0!==this._introItems&&Ua.call(this)}function Ua(){var Tt=this;this._direction="forward",void 0!==this._currentStepNumber&&g(this._introItems,function(Oe,Ve){Oe.step===Tt._currentStepNumber&&(Tt._currentStep=Ve-1,Tt._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var Ot=this._introItems[this._currentStep],se=!0;return void 0!==this._introBeforeChangeCallback&&(se=this._introBeforeChangeCallback.call(this,Ot&&Ot.element)),!1===se?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"end"),void ca.call(this,this._targetElement)):void gc.call(this,Ot)}function aa(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var Tt=this._introItems[this._currentStep],Ot=!0;if(void 0!==this._introBeforeChangeCallback&&(Ot=this._introBeforeChangeCallback.call(this,Tt&&Tt.element)),!1===Ot)return++this._currentStep,!1;gc.call(this,Tt)}function iu(){return this._currentStep}function Sl(Tt){var Ot=void 0===Tt.code?Tt.which:Tt.code;if(null===Ot&&(Ot=null===Tt.charCode?Tt.keyCode:Tt.charCode),"Escape"!==Ot&&27!==Ot||!0!==this._options.exitOnEsc){if("ArrowLeft"===Ot||37===Ot)aa.call(this);else if("ArrowRight"===Ot||39===Ot)Ua.call(this);else if("Enter"===Ot||"NumpadEnter"===Ot||13===Ot){var se=Tt.target||Tt.srcElement;se&&se.className.match("introjs-prevbutton")?aa.call(this):se&&se.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"skip"),ca.call(this,this._targetElement)):se&&se.getAttribute("data-stepnumber")?se.click():Ua.call(this),Tt.preventDefault?Tt.preventDefault():Tt.returnValue=!1}}else ca.call(this,this._targetElement)}function Uo(Tt){if(null===Tt||"object"!==W(Tt)||void 0!==Tt.nodeType)return Tt;var Ot={};for(var se in Tt)Ot[se]=void 0!==window.jQuery&&Tt[se]instanceof window.jQuery?Tt[se]:Uo(Tt[se]);return Ot}function Fl(Tt){var Ot=document.querySelector(".introjs-hints");return Ot?Ot.querySelectorAll(Tt):[]}function tc(Tt){var Ot=Fl('.introjs-hint[data-step="'.concat(Tt,'"]'))[0];Hl.call(this),Ot&&oa(Ot,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,Tt)}function dl(){var Tt=this;g(Fl(".introjs-hint"),function(se){tc.call(Tt,se.getAttribute("data-step"))})}function Qu(){var Tt=this,Ot=Fl(".introjs-hint");Ot&&Ot.length?g(Ot,function(se){vu.call(Tt,se.getAttribute("data-step"))}):_c.call(this,this._targetElement)}function vu(Tt){var Ot=Fl('.introjs-hint[data-step="'.concat(Tt,'"]'))[0];Ot&&bo(Ot,/introjs-hidehint/g)}function la(){var Tt=this;g(Fl(".introjs-hint"),function(se){Bl.call(Tt,se.getAttribute("data-step"))}),e.off(document,"click",Hl,this,!1),e.off(window,"resize",vc,this,!0),this._hintsAutoRefreshFunction&&e.off(window,"scroll",this._hintsAutoRefreshFunction,this,!0)}function Bl(Tt){var Ot=Fl('.introjs-hint[data-step="'.concat(Tt,'"]'))[0];Ot&&Ot.parentNode.removeChild(Ot)}function ec(){var Tt=this,Ot=this,se=document.querySelector(".introjs-hints");null===se&&(se=Er("div",{className:"introjs-hints"}));g(this._introItems,function(Ve,fi){if(!document.querySelector('.introjs-hint[data-step="'.concat(fi,'"]'))){var Je=Er("a",{className:"introjs-hint"});at(Je),Je.onclick=function(fi){return function(Je){var oi=Je||window.event;oi.stopPropagation&&oi.stopPropagation(),null!==oi.cancelBubble&&(oi.cancelBubble=!0),Va.call(Ot,fi)}}(fi),Ve.hintAnimation||oa(Je,"introjs-hint-no-anim"),Ue(Ve.element)&&oa(Je,"introjs-fixedhint");var oi=Er("div",{className:"introjs-hint-dot"}),Li=Er("div",{className:"introjs-hint-pulse"});Je.appendChild(oi),Je.appendChild(Li),Je.setAttribute("data-step",fi),Ve.targetElement=Ve.element,Ve.element=Je,tl.call(Tt,Ve.hintPosition,Je,Ve.targetElement),se.appendChild(Je)}}),document.body.appendChild(se),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this),this._options.hintAutoRefreshInterval>=0&&(this._hintsAutoRefreshFunction=function(Tt,Ot){var Oe,se=this;return function(){for(var Ve=arguments.length,fi=new Array(Ve),Je=0;Je<Ve;Je++)fi[Je]=arguments[Je];clearTimeout(Oe),Oe=setTimeout(function(){Tt.apply(se,fi)},Ot)}}(function(){return vc.call(Tt)},this._options.hintAutoRefreshInterval),e.on(window,"scroll",this._hintsAutoRefreshFunction,this,!0))}function tl(Tt,Ot,se){var Oe=Ot.style,Ve=ei.call(this,se);switch(Tt){default:case"top-left":Oe.left="".concat(Ve.left,"px"),Oe.top="".concat(Ve.top,"px");break;case"top-right":Oe.left="".concat(Ve.left+Ve.width-20,"px"),Oe.top="".concat(Ve.top,"px");break;case"bottom-left":Oe.left="".concat(Ve.left,"px"),Oe.top="".concat(Ve.top+Ve.height-20,"px");break;case"bottom-right":Oe.left="".concat(Ve.left+Ve.width-20,"px"),Oe.top="".concat(Ve.top+Ve.height-20,"px");break;case"middle-left":Oe.left="".concat(Ve.left,"px"),Oe.top="".concat(Ve.top+(Ve.height-20)/2,"px");break;case"middle-right":Oe.left="".concat(Ve.left+Ve.width-20,"px"),Oe.top="".concat(Ve.top+(Ve.height-20)/2,"px");break;case"middle-middle":Oe.left="".concat(Ve.left+(Ve.width-20)/2,"px"),Oe.top="".concat(Ve.top+(Ve.height-20)/2,"px");break;case"bottom-middle":Oe.left="".concat(Ve.left+(Ve.width-20)/2,"px"),Oe.top="".concat(Ve.top+Ve.height-20,"px");break;case"top-middle":Oe.left="".concat(Ve.left+(Ve.width-20)/2,"px"),Oe.top="".concat(Ve.top,"px")}}function Va(Tt){var Ot=document.querySelector('.introjs-hint[data-step="'.concat(Tt,'"]')),se=this._introItems[Tt];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,Ot,se,Tt);var Oe=Hl.call(this);if(parseInt(Oe,10)!==Tt){var Ve=Er("div",{className:"introjs-tooltip"}),fi=Er("div"),Je=Er("div"),oi=Er("div");Ve.onclick=function(Gi){Gi.stopPropagation?Gi.stopPropagation():Gi.cancelBubble=!0},fi.className="introjs-tooltiptext";var Li=Er("p");if(Li.innerHTML=se.hint,fi.appendChild(Li),this._options.hintShowButton){var Ni=Er("a");Ni.className=this._options.buttonClass,Ni.setAttribute("role","button"),Ni.innerHTML=this._options.hintButtonLabel,Ni.onclick=tc.bind(this,Tt),fi.appendChild(Ni)}Je.className="introjs-arrow",Ve.appendChild(Je),Ve.appendChild(fi),this._currentStep=Ot.getAttribute("data-step"),oi.className="introjs-tooltipReferenceLayer introjs-hintReference",oi.setAttribute("data-step",Ot.getAttribute("data-step")),zr.call(this,oi),oi.appendChild(Ve),document.body.appendChild(oi),xs.call(this,Ot,Ve,Je,!0)}}function Hl(){var Tt=document.querySelector(".introjs-hintReference");if(Tt){var Ot=Tt.getAttribute("data-step");return Tt.parentNode.removeChild(Tt),Ot}}function _c(Tt){var Ot=this;if(this._introItems=[],this._options.hints)g(this._options.hints,function(Oe){var Ve=Uo(Oe);"string"==typeof Ve.element&&(Ve.element=document.querySelector(Ve.element)),Ve.hintPosition=Ve.hintPosition||Ot._options.hintPosition,Ve.hintAnimation=Ve.hintAnimation||Ot._options.hintAnimation,null!==Ve.element&&Ot._introItems.push(Ve)});else{var se=Tt.querySelectorAll("*[data-hint]");if(!se||!se.length)return!1;g(se,function(Oe){var Ve=Oe.getAttribute("data-hintanimation");Ve=Ve?"true"===Ve:Ot._options.hintAnimation,Ot._introItems.push({element:Oe,hint:Oe.getAttribute("data-hint"),hintPosition:Oe.getAttribute("data-hintposition")||Ot._options.hintPosition,hintAnimation:Ve,tooltipClass:Oe.getAttribute("data-tooltipclass"),position:Oe.getAttribute("data-position")||Ot._options.tooltipPosition})})}ec.call(this),e.on(document,"click",Hl,this,!1),e.on(window,"resize",vc,this,!0)}function vc(){var Tt=this;g(this._introItems,function(Ot){var se=Ot.targetElement;void 0!==se&&tl.call(Tt,Ot.hintPosition,Ot.element,se)})}_r({target:"Array",proto:!0,forced:!dc},{splice:function(Ot,se){var oi,Li,Ni,Gi,Wn,kn,Oe=Ri(this),Ve=ho(Oe),fi=Bs(Ot,Ve),Je=arguments.length;if(0===Je?oi=Li=0:1===Je?(oi=0,Li=Ve-fi):(oi=Je-2,Li=qc(Yo(no(se),0),Ve-fi)),Ve+oi-Li>pc)throw Pl(gu);for(Ni=$a(Oe,Li),Gi=0;Gi<Li;Gi++)(Wn=fi+Gi)in Oe&&Pn(Ni,Gi,Oe[Wn]);if(Ni.length=Li,oi<Li){for(Gi=fi;Gi<Ve-Li;Gi++)kn=Gi+oi,(Wn=Gi+Li)in Oe?Oe[kn]=Oe[Wn]:delete Oe[kn];for(Gi=Ve;Gi>Ve-Li+oi;Gi--)delete Oe[Gi-1]}else if(oi>Li)for(Gi=Ve-Li;Gi>fi;Gi--)kn=Gi+oi-1,(Wn=Gi+Li-1)in Oe?Oe[kn]=Oe[Wn]:delete Oe[kn];for(Gi=0;Gi<oi;Gi++)Oe[Gi+fi]=arguments[Gi+2];return Oe.length=Ve-Li+oi,Ni}});var Lc=Math.floor,Ga=function(Tt,Ot){var se=Tt.length,Oe=Lc(se/2);return se<8?Nc(Tt,Ot):lo(Tt,Ga(Ll(Tt,0,Oe),Ot),Ga(Ll(Tt,Oe),Ot),Ot)},Nc=function(Tt,Ot){for(var Ve,fi,se=Tt.length,Oe=1;Oe<se;){for(fi=Oe,Ve=Tt[Oe];fi&&Ot(Tt[fi-1],Ve)>0;)Tt[fi]=Tt[--fi];fi!==Oe++&&(Tt[fi]=Ve)}return Tt},lo=function(Tt,Ot,se,Oe){for(var Ve=Ot.length,fi=se.length,Je=0,oi=0;Je<Ve||oi<fi;)Tt[Je+oi]=Je<Ve&&oi<fi?Oe(Ot[Je],se[oi])<=0?Ot[Je++]:se[oi++]:Je<Ve?Ot[Je++]:se[oi++];return Tt},Ul=Ga,ic=Ie.match(/firefox\/(\d+)/i),bc=!!ic&&+ic[1],nu=/MSIE|Trident/.test(Ie),Vl=Ie.match(/AppleWebKit\/(\d+)\./),ku=!!Vl&&+Vl[1],Gl=[],ru=St(Gl.sort),ou=St(Gl.push),Pc=c(function(){Gl.sort(void 0)}),Rl=c(function(){Gl.sort(null)}),pl=kc("sort"),el=!c(function(){if(Wt)return Wt<70;if(!(bc&&bc>3)){if(nu)return!0;if(ku)return ku<603;var Ot,se,Oe,Ve,Tt="";for(Ot=65;Ot<76;Ot++){switch(se=String.fromCharCode(Ot),Ot){case 66:case 69:case 70:case 72:Oe=3;break;case 68:case 71:Oe=4;break;default:Oe=2}for(Ve=0;Ve<47;Ve++)Gl.push({k:se+Ve,v:Oe})}for(Gl.sort(function(fi,Je){return Je.v-fi.v}),Ve=0;Ve<Gl.length;Ve++)se=Gl[Ve].k.charAt(0),Tt.charAt(Tt.length-1)!==se&&(Tt+=se);return"DGBEFHACIJK"!==Tt}});function il(Tt){var Ot=this,se=Tt.querySelectorAll("*[data-intro]"),Oe=[];if(this._options.steps)g(this._options.steps,function(Ni){var Gi=Uo(Ni);if(Gi.step=Oe.length+1,Gi.title=Gi.title||"","string"==typeof Gi.element&&(Gi.element=document.querySelector(Gi.element)),null==Gi.element){var Wn=document.querySelector(".introjsFloatingElement");null===Wn&&(Wn=Er("div",{className:"introjsFloatingElement"}),document.body.appendChild(Wn)),Gi.element=Wn,Gi.position="floating"}Gi.position=Gi.position||Ot._options.tooltipPosition,Gi.scrollTo=Gi.scrollTo||Ot._options.scrollTo,void 0===Gi.disableInteraction&&(Gi.disableInteraction=Ot._options.disableInteraction),null!==Gi.element&&Oe.push(Gi)});else{var fi;if(se.length<1)return[];g(se,function(Ni){if((!Ot._options.group||Ni.getAttribute("data-intro-group")===Ot._options.group)&&"none"!==Ni.style.display){var Gi=parseInt(Ni.getAttribute("data-step"),10);fi=Ni.hasAttribute("data-disable-interaction")?!!Ni.getAttribute("data-disable-interaction"):Ot._options.disableInteraction,Gi>0&&(Oe[Gi-1]={element:Ni,title:Ni.getAttribute("data-title")||"",intro:Ni.getAttribute("data-intro"),step:parseInt(Ni.getAttribute("data-step"),10),tooltipClass:Ni.getAttribute("data-tooltipclass"),highlightClass:Ni.getAttribute("data-highlightclass"),position:Ni.getAttribute("data-position")||Ot._options.tooltipPosition,scrollTo:Ni.getAttribute("data-scrollto")||Ot._options.scrollTo,disableInteraction:fi})}});var Je=0;g(se,function(Ni){if((!Ot._options.group||Ni.getAttribute("data-intro-group")===Ot._options.group)&&null===Ni.getAttribute("data-step")){for(;void 0!==Oe[Je];)Je++;fi=Ni.hasAttribute("data-disable-interaction")?!!Ni.getAttribute("data-disable-interaction"):Ot._options.disableInteraction,Oe[Je]={element:Ni,title:Ni.getAttribute("data-title")||"",intro:Ni.getAttribute("data-intro"),step:Je+1,tooltipClass:Ni.getAttribute("data-tooltipclass"),highlightClass:Ni.getAttribute("data-highlightclass"),position:Ni.getAttribute("data-position")||Ot._options.tooltipPosition,scrollTo:Ni.getAttribute("data-scrollto")||Ot._options.scrollTo,disableInteraction:fi}}})}for(var oi=[],Li=0;Li<Oe.length;Li++)Oe[Li]&&oi.push(Oe[Li]);return(Oe=oi).sort(function(Ni,Gi){return Ni.step-Gi.step}),Oe}function fl(Tt){var Ot=document.querySelector(".introjs-tooltipReferenceLayer"),se=document.querySelector(".introjs-helperLayer"),Oe=document.querySelector(".introjs-disableInteraction");if(zr.call(this,se),zr.call(this,Ot),zr.call(this,Oe),Tt&&(this._introItems=il.call(this,this._targetElement),ql.call(this,Ot,this._introItems[this._currentStep]),Zu.call(this,Ot)),null!=this._currentStep){var Ve=document.querySelector(".introjs-arrow"),fi=document.querySelector(".introjs-tooltip");fi&&Ve&&xs.call(this,this._introItems[this._currentStep].element,fi,Ve)}return vc.call(this),this}function Wa(){fl.call(this)}function Dl(Tt,Ot){if(Tt&&Tt.parentElement){var se=Tt.parentElement;Ot?(ao(Tt,{opacity:"0"}),window.setTimeout(function(){try{se.removeChild(Tt)}catch(Oe){}},500)):se.removeChild(Tt)}}function ca(Tt,Ot){var se=!0;if(void 0!==this._introBeforeExitCallback&&(se=this._introBeforeExitCallback.call(this)),Ot||!1!==se){var Oe=Tt.querySelectorAll(".introjs-overlay");Oe&&Oe.length&&g(Oe,function(Li){return Dl(Li)}),Dl(Tt.querySelector(".introjs-helperLayer"),!0),Dl(Tt.querySelector(".introjs-tooltipReferenceLayer")),Dl(Tt.querySelector(".introjs-disableInteraction")),Dl(document.querySelector(".introjsFloatingElement")),hl(),e.off(window,"keydown",Sl,this,!0),e.off(window,"resize",Wa,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function Nu(Tt){var Ot=this,se=Er("div",{className:"introjs-overlay"});return ao(se,{top:0,bottom:0,left:0,right:0,position:"fixed"}),Tt.appendChild(se),!0===this._options.exitOnOverlayClick&&(ao(se,{cursor:"pointer"}),se.onclick=function(){ca.call(Ot,Tt)}),!0}function nc(Tt){void 0!==this._introStartCallback&&this._introStartCallback.call(this,Tt);var Ot=il.call(this,Tt);return 0===Ot.length||(this._introItems=Ot,Nu.call(this,Tt)&&(Ua.call(this),this._options.keyboardNavigation&&e.on(window,"keydown",Sl,this,!0),e.on(window,"resize",Wa,this,!0))),!1}function ps(Tt){this._targetElement=Tt,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}_r({target:"Array",proto:!0,forced:Pc||!Rl||!pl||!el},{sort:function(Ot){void 0!==Ot&&Te(Ot);var se=Ri(this);if(el)return void 0===Ot?ru(se):ru(se,Ot);var fi,Je,Oe=[],Ve=ho(se);for(Je=0;Je<Ve;Je++)Je in se&&ou(Oe,se[Je]);for(Ul(Oe,function(Tt){return function(Ot,se){return void 0===se?-1:void 0===Ot?1:void 0!==Tt?+Tt(Ot,se)||0:Ar(Ot)>Ar(se)?1:-1}}(Ot)),fi=Oe.length,Je=0;Je<fi;)se[Je]=Oe[Je++];for(;Je<Ve;)delete se[Je++];return se}});var Bc=function Tt(Ot){var se;if("object"===W(Ot))se=new ps(Ot);else if("string"==typeof Ot){var Oe=document.querySelector(Ot);if(!Oe)throw new Error("There is no element with given selector.");se=new ps(Oe)}else se=new ps(document.body);return Tt.instances[y(se,"introjs-instance")]=se,se};return Bc.version="4.3.0",Bc.instances={},Bc.fn=ps.prototype={clone:function(){return new ps(this)},setOption:function(Ot,se){return this._options[Ot]=se,this},setOptions:function(Ot){return this._options=function(Tt,Ot){var Oe,se={};for(Oe in Tt)se[Oe]=Tt[Oe];for(Oe in Ot)se[Oe]=Ot[Oe];return se}(this._options,Ot),this},start:function(){return nc.call(this,this._targetElement),this},goToStep:function(Ot){return _u.call(this,Ot),this},addStep:function(Ot){return this._options.steps||(this._options.steps=[]),this._options.steps.push(Ot),this},addSteps:function(Ot){if(Ot.length){for(var se=0;se<Ot.length;se++)this.addStep(Ot[se]);return this}},goToStepNumber:function(Ot){return mc.call(this,Ot),this},nextStep:function(){return Ua.call(this),this},previousStep:function(){return aa.call(this),this},currentStep:function(){return iu.call(this)},exit:function(Ot){return ca.call(this,this._targetElement,Ot),this},refresh:function(Ot){return fl.call(this,Ot),this},onbeforechange:function(Ot){if("function"!=typeof Ot)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=Ot,this},onchange:function(Ot){if("function"!=typeof Ot)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=Ot,this},onafterchange:function(Ot){if("function"!=typeof Ot)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=Ot,this},oncomplete:function(Ot){if("function"!=typeof Ot)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=Ot,this},onhintsadded:function(Ot){if("function"!=typeof Ot)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=Ot,this},onhintclick:function(Ot){if("function"!=typeof Ot)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=Ot,this},onhintclose:function(Ot){if("function"!=typeof Ot)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=Ot,this},onstart:function(Ot){if("function"!=typeof Ot)throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=Ot,this},onexit:function(Ot){if("function"!=typeof Ot)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=Ot,this},onskip:function(Ot){if("function"!=typeof Ot)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=Ot,this},onbeforeexit:function(Ot){if("function"!=typeof Ot)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=Ot,this},addHints:function(){return _c.call(this,this._targetElement),this},hideHint:function(Ot){return tc.call(this,Ot),this},hideHints:function(){return dl.call(this),this},showHint:function(Ot){return vu.call(this,Ot),this},showHints:function(){return Qu.call(this),this},removeHints:function(){return la.call(this),this},removeHint:function(Ot){return Bl().call(this,Ot),this},showHintDialog:function(Ot){return Va.call(this,Ot),this}},Bc}()},61135:(H,W,f)=>{"use strict";f.d(W,{X:()=>g});var y=f(77579);class g extends y.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}},79307:(H,W,f)=>{"use strict";f.d(W,{y:()=>D});var y=f(70930),g=f(50727),e=f(48822),t=f(44671);var s=f(42416),c=f(30576),v=f(72806);let D=(()=>{class q{constructor(Ft){Ft&&(this._subscribe=Ft)}lift(Ft){const gt=new q;return gt.source=this,gt.operator=Ft,gt}subscribe(Ft,gt,wt){const Bt=function(q){return q&&q instanceof y.Lv||function(q){return q&&(0,c.m)(q.next)&&(0,c.m)(q.error)&&(0,c.m)(q.complete)}(q)&&(0,g.Nn)(q)}(Ft)?Ft:new y.Hp(Ft,gt,wt);return(0,v.x)(()=>{const{operator:Kt,source:It}=this;Bt.add(Kt?Kt.call(Bt,It):It?this._subscribe(Bt):this._trySubscribe(Bt))}),Bt}_trySubscribe(Ft){try{return this._subscribe(Ft)}catch(gt){Ft.error(gt)}}forEach(Ft,gt){return new(gt=P(gt))((wt,Bt)=>{let Kt;Kt=this.subscribe(It=>{try{Ft(It)}catch(St){Bt(St),null==Kt||Kt.unsubscribe()}},Bt,wt)})}_subscribe(Ft){var gt;return null===(gt=this.source)||void 0===gt?void 0:gt.subscribe(Ft)}[e.L](){return this}pipe(...Ft){return function(q){return 0===q.length?t.y:1===q.length?q[0]:function(Ft){return q.reduce((gt,wt)=>wt(gt),Ft)}}(Ft)(this)}toPromise(Ft){return new(Ft=P(Ft))((gt,wt)=>{let Bt;this.subscribe(Kt=>Bt=Kt,Kt=>wt(Kt),()=>gt(Bt))})}}return q.create=bt=>new q(bt),q})();function P(q){var bt;return null!==(bt=null!=q?q:s.v.Promise)&&void 0!==bt?bt:Promise}},77579:(H,W,f)=>{"use strict";f.d(W,{x:()=>s});var y=f(79307),g=f(50727);const t=(0,f(83888).d)(v=>function(){v(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var n=f(38737),r=f(72806);let s=(()=>{class v extends y.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(P){const G=new c(this,this);return G.operator=P,G}_throwIfClosed(){if(this.closed)throw new t}next(P){(0,r.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const G=this.observers.slice();for(const it of G)it.next(P)}})}error(P){(0,r.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=P;const{observers:G}=this;for(;G.length;)G.shift().error(P)}})}complete(){(0,r.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:P}=this;for(;P.length;)P.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var P;return(null===(P=this.observers)||void 0===P?void 0:P.length)>0}_trySubscribe(P){return this._throwIfClosed(),super._trySubscribe(P)}_subscribe(P){return this._throwIfClosed(),this._checkFinalizedStatuses(P),this._innerSubscribe(P)}_innerSubscribe(P){const{hasError:G,isStopped:it,observers:q}=this;return G||it?g.Lc:(q.push(P),new g.w0(()=>(0,n.P)(q,P)))}_checkFinalizedStatuses(P){const{hasError:G,thrownError:it,isStopped:q}=this;G?P.error(it):q&&P.complete()}asObservable(){const P=new y.y;return P.source=this,P}}return v.create=(D,P)=>new c(D,P),v})();class c extends s{constructor(D,P){super(),this.destination=D,this.source=P}next(D){var P,G;null===(G=null===(P=this.destination)||void 0===P?void 0:P.next)||void 0===G||G.call(P,D)}error(D){var P,G;null===(G=null===(P=this.destination)||void 0===P?void 0:P.error)||void 0===G||G.call(P,D)}complete(){var D,P;null===(P=null===(D=this.destination)||void 0===D?void 0:D.complete)||void 0===P||P.call(D)}_subscribe(D){var P,G;return null!==(G=null===(P=this.source)||void 0===P?void 0:P.subscribe(D))&&void 0!==G?G:g.Lc}}},70930:(H,W,f)=>{"use strict";f.d(W,{Hp:()=>it,Lv:()=>G});var y=f(30576),g=f(50727),e=f(42416),t=f(87849),n=f(25032);const r=v("C",void 0,void 0);function v(wt,Bt,Kt){return{kind:wt,value:Bt,error:Kt}}var D=f(43410),P=f(72806);class G extends g.w0{constructor(Bt){super(),this.isStopped=!1,Bt?(this.destination=Bt,(0,g.Nn)(Bt)&&Bt.add(this)):this.destination=gt}static create(Bt,Kt,It){return new it(Bt,Kt,It)}next(Bt){this.isStopped?Ft(v("N",Bt,void 0),this):this._next(Bt)}error(Bt){this.isStopped?Ft(v("E",void 0,Bt),this):(this.isStopped=!0,this._error(Bt))}complete(){this.isStopped?Ft(r,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Bt){this.destination.next(Bt)}_error(Bt){try{this.destination.error(Bt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class it extends G{constructor(Bt,Kt,It){let St;if(super(),(0,y.m)(Bt))St=Bt;else if(Bt){let lt;({next:St,error:Kt,complete:It}=Bt),this&&e.v.useDeprecatedNextContext?(lt=Object.create(Bt),lt.unsubscribe=()=>this.unsubscribe()):lt=Bt,St=null==St?void 0:St.bind(lt),Kt=null==Kt?void 0:Kt.bind(lt),It=null==It?void 0:It.bind(lt)}this.destination={next:St?q(St):n.Z,error:q(null!=Kt?Kt:bt),complete:It?q(It):n.Z}}}function q(wt,Bt){return(...Kt)=>{try{wt(...Kt)}catch(It){e.v.useDeprecatedSynchronousErrorHandling?(0,P.O)(It):(0,t.h)(It)}}}function bt(wt){throw wt}function Ft(wt,Bt){const{onStoppedNotification:Kt}=e.v;Kt&&D.z.setTimeout(()=>Kt(wt,Bt))}const gt={closed:!0,next:n.Z,error:bt,complete:n.Z}},50727:(H,W,f)=>{"use strict";f.d(W,{Lc:()=>r,w0:()=>n,Nn:()=>s});var y=f(30576);const e=(0,f(83888).d)(v=>function(P){v(this),this.message=P?`${P.length} errors occurred during unsubscription:\n${P.map((G,it)=>`${it+1}) ${G.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=P});var t=f(38737);class n{constructor(D){this.initialTeardown=D,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let D;if(!this.closed){this.closed=!0;const{_parentage:P}=this;if(P)if(this._parentage=null,Array.isArray(P))for(const q of P)q.remove(this);else P.remove(this);const{initialTeardown:G}=this;if((0,y.m)(G))try{G()}catch(q){D=q instanceof e?q.errors:[q]}const{_teardowns:it}=this;if(it){this._teardowns=null;for(const q of it)try{c(q)}catch(bt){D=null!=D?D:[],bt instanceof e?D=[...D,...bt.errors]:D.push(bt)}}if(D)throw new e(D)}}add(D){var P;if(D&&D!==this)if(this.closed)c(D);else{if(D instanceof n){if(D.closed||D._hasParent(this))return;D._addParent(this)}(this._teardowns=null!==(P=this._teardowns)&&void 0!==P?P:[]).push(D)}}_hasParent(D){const{_parentage:P}=this;return P===D||Array.isArray(P)&&P.includes(D)}_addParent(D){const{_parentage:P}=this;this._parentage=Array.isArray(P)?(P.push(D),P):P?[P,D]:D}_removeParent(D){const{_parentage:P}=this;P===D?this._parentage=null:Array.isArray(P)&&(0,t.P)(P,D)}remove(D){const{_teardowns:P}=this;P&&(0,t.P)(P,D),D instanceof n&&D._removeParent(this)}}n.EMPTY=(()=>{const v=new n;return v.closed=!0,v})();const r=n.EMPTY;function s(v){return v instanceof n||v&&"closed"in v&&(0,y.m)(v.remove)&&(0,y.m)(v.add)&&(0,y.m)(v.unsubscribe)}function c(v){(0,y.m)(v)?v():v.unsubscribe()}},42416:(H,W,f)=>{"use strict";f.d(W,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},39841:(H,W,f)=>{"use strict";f.d(W,{a:()=>D});var y=f(79307),g=f(54742),e=f(32076),t=f(44671),n=f(83268),r=f(63269),s=f(31810),c=f(25403),v=f(39672);function D(...it){const q=(0,r.yG)(it),bt=(0,r.jO)(it),{args:Ft,keys:gt}=(0,g.D)(it);if(0===Ft.length)return(0,e.D)([],q);const wt=new y.y(function(it,q,bt=t.y){return Ft=>{G(q,()=>{const{length:gt}=it,wt=new Array(gt);let Bt=gt,Kt=gt;for(let It=0;It<gt;It++)G(q,()=>{const St=(0,e.D)(it[It],q);let lt=!1;St.subscribe(new c.Q(Ft,ft=>{wt[It]=ft,lt||(lt=!0,Kt--),Kt||Ft.next(bt(wt.slice()))},()=>{--Bt||Ft.complete()}))},Ft)},Ft)}}(Ft,q,gt?Bt=>(0,s.n)(gt,Bt):t.y));return bt?wt.pipe((0,n.Z)(bt)):wt}function G(it,q,bt){it?(0,v.f)(bt,it,q):q()}},97272:(H,W,f)=>{"use strict";f.d(W,{z:()=>n});var y=f(8189),e=f(63269),t=f(32076);function n(...r){return(0,y.J)(1)((0,t.D)(r,(0,e.yG)(r)))}},49770:(H,W,f)=>{"use strict";f.d(W,{P:()=>e});var y=f(79307),g=f(38421);function e(t){return new y.y(n=>{(0,g.Xf)(t()).subscribe(n)})}},60515:(H,W,f)=>{"use strict";f.d(W,{E:()=>g});const g=new(f(79307).y)(n=>n.complete())},4128:(H,W,f)=>{"use strict";f.d(W,{D:()=>c});var y=f(79307),g=f(54742),e=f(38421),t=f(63269),n=f(25403),r=f(83268),s=f(31810);function c(...v){const D=(0,t.jO)(v),{args:P,keys:G}=(0,g.D)(v),it=new y.y(q=>{const{length:bt}=P;if(!bt)return void q.complete();const Ft=new Array(bt);let gt=bt,wt=bt;for(let Bt=0;Bt<bt;Bt++){let Kt=!1;(0,e.Xf)(P[Bt]).subscribe(new n.Q(q,It=>{Kt||(Kt=!0,wt--),Ft[Bt]=It},()=>gt--,void 0,()=>{(!gt||!Kt)&&(wt||q.next(G?(0,s.n)(G,Ft):Ft),q.complete())}))}});return D?it.pipe((0,r.Z)(D)):it}},32076:(H,W,f)=>{"use strict";f.d(W,{D:()=>ft});var y=f(38421),g=f(39672),e=f(54482),t=f(25403);function n(ht,Gt=0){return(0,e.e)((ut,ot)=>{ut.subscribe(new t.Q(ot,st=>(0,g.f)(ot,ht,()=>ot.next(st),Gt),()=>(0,g.f)(ot,ht,()=>ot.complete(),Gt),st=>(0,g.f)(ot,ht,()=>ot.error(st),Gt)))})}function r(ht,Gt=0){return(0,e.e)((ut,ot)=>{ot.add(ht.schedule(()=>ut.subscribe(ot),Gt))})}var v=f(79307),P=f(2202),G=f(30576);function q(ht,Gt){if(!ht)throw new Error("Iterable cannot be null");return new v.y(ut=>{(0,g.f)(ut,Gt,()=>{const ot=ht[Symbol.asyncIterator]();(0,g.f)(ut,Gt,()=>{ot.next().then(st=>{st.done?ut.complete():ut.next(st.value)})},0,!0)})})}var bt=f(93670),Ft=f(28239),gt=f(81144),wt=f(26495),Bt=f(12206),Kt=f(44532),It=f(53260);function ft(ht,Gt){return Gt?function(ht,Gt){if(null!=ht){if((0,bt.c)(ht))return function(ht,Gt){return(0,y.Xf)(ht).pipe(r(Gt),n(Gt))}(ht,Gt);if((0,gt.z)(ht))return function(ht,Gt){return new v.y(ut=>{let ot=0;return Gt.schedule(function(){ot===ht.length?ut.complete():(ut.next(ht[ot++]),ut.closed||this.schedule())})})}(ht,Gt);if((0,Ft.t)(ht))return function(ht,Gt){return(0,y.Xf)(ht).pipe(r(Gt),n(Gt))}(ht,Gt);if((0,Bt.D)(ht))return q(ht,Gt);if((0,wt.T)(ht))return function(ht,Gt){return new v.y(ut=>{let ot;return(0,g.f)(ut,Gt,()=>{ot=ht[P.h](),(0,g.f)(ut,Gt,()=>{let st,Z;try{({value:st,done:Z}=ot.next())}catch(Zt){return void ut.error(Zt)}Z?ut.complete():ut.next(st)},0,!0)}),()=>(0,G.m)(null==ot?void 0:ot.return)&&ot.return()})}(ht,Gt);if((0,It.L)(ht))return function(ht,Gt){return q((0,It.Q)(ht),Gt)}(ht,Gt)}throw(0,Kt.z)(ht)}(ht,Gt):(0,y.Xf)(ht)}},54968:(H,W,f)=>{"use strict";f.d(W,{R:()=>D});var y=f(38421),g=f(79307),e=f(95577),t=f(81144),n=f(30576),r=f(83268);const s=["addListener","removeListener"],c=["addEventListener","removeEventListener"],v=["on","off"];function D(bt,Ft,gt,wt){if((0,n.m)(gt)&&(wt=gt,gt=void 0),wt)return D(bt,Ft,gt).pipe((0,r.Z)(wt));const[Bt,Kt]=function(bt){return(0,n.m)(bt.addEventListener)&&(0,n.m)(bt.removeEventListener)}(bt)?c.map(It=>St=>bt[It](Ft,St,gt)):function(bt){return(0,n.m)(bt.addListener)&&(0,n.m)(bt.removeListener)}(bt)?s.map(P(bt,Ft)):function(bt){return(0,n.m)(bt.on)&&(0,n.m)(bt.off)}(bt)?v.map(P(bt,Ft)):[];if(!Bt&&(0,t.z)(bt))return(0,e.z)(It=>D(It,Ft,gt))((0,y.Xf)(bt));if(!Bt)throw new TypeError("Invalid event target");return new g.y(It=>{const St=(...lt)=>It.next(1<lt.length?lt:lt[0]);return Bt(St),()=>Kt(St)})}function P(bt,Ft){return gt=>wt=>bt[gt](Ft,wt)}},38421:(H,W,f)=>{"use strict";f.d(W,{Xf:()=>it});var y=f(35987),g=f(81144),e=f(28239),t=f(79307),n=f(93670),r=f(12206),s=f(44532),c=f(26495),v=f(53260),D=f(30576),P=f(87849),G=f(48822);function it(It){if(It instanceof t.y)return It;if(null!=It){if((0,n.c)(It))return function(It){return new t.y(St=>{const lt=It[G.L]();if((0,D.m)(lt.subscribe))return lt.subscribe(St);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(It);if((0,g.z)(It))return function(It){return new t.y(St=>{for(let lt=0;lt<It.length&&!St.closed;lt++)St.next(It[lt]);St.complete()})}(It);if((0,e.t)(It))return function(It){return new t.y(St=>{It.then(lt=>{St.closed||(St.next(lt),St.complete())},lt=>St.error(lt)).then(null,P.h)})}(It);if((0,r.D)(It))return wt(It);if((0,c.T)(It))return function(It){return new t.y(St=>{for(const lt of It)if(St.next(lt),St.closed)return;St.complete()})}(It);if((0,v.L)(It))return function(It){return wt((0,v.Q)(It))}(It)}throw(0,s.z)(It)}function wt(It){return new t.y(St=>{(function(It,St){var lt,ft,ht,Gt;return(0,y.mG)(this,void 0,void 0,function*(){try{for(lt=(0,y.KL)(It);!(ft=yield lt.next()).done;)if(St.next(ft.value),St.closed)return}catch(ut){ht={error:ut}}finally{try{ft&&!ft.done&&(Gt=lt.return)&&(yield Gt.call(lt))}finally{if(ht)throw ht.error}}St.complete()})})(It,St).catch(lt=>St.error(lt))})}},56451:(H,W,f)=>{"use strict";f.d(W,{T:()=>r});var y=f(8189),g=f(38421),e=f(60515),t=f(63269),n=f(32076);function r(...s){const c=(0,t.yG)(s),v=(0,t._6)(s,1/0),D=s;return D.length?1===D.length?(0,g.Xf)(D[0]):(0,y.J)(v)((0,n.D)(D,c)):e.E}},39646:(H,W,f)=>{"use strict";f.d(W,{of:()=>e});var y=f(63269),g=f(32076);function e(...t){const n=(0,y.yG)(t);return(0,g.D)(t,n)}},5963:(H,W,f)=>{"use strict";f.d(W,{H:()=>n});var y=f(79307),g=f(34986),e=f(93532);function n(r=0,s,c=g.P){let v=-1;return null!=s&&((0,e.K)(s)?c=s:v=s),new y.y(D=>{let P=function(r){return r instanceof Date&&!isNaN(r)}(r)?+r-c.now():r;P<0&&(P=0);let G=0;return c.schedule(function(){D.closed||(D.next(G++),0<=v?this.schedule(void 0,v):D.complete())},P)})}},25403:(H,W,f)=>{"use strict";f.d(W,{Q:()=>g});var y=f(70930);class g extends y.Lv{constructor(t,n,r,s,c){super(t),this.onFinalize=c,this._next=n?function(v){try{n(v)}catch(D){t.error(D)}}:super._next,this._error=s?function(v){try{s(v)}catch(D){t.error(D)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(v){t.error(v)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}},70262:(H,W,f)=>{"use strict";f.d(W,{K:()=>t});var y=f(38421),g=f(25403),e=f(54482);function t(n){return(0,e.e)((r,s)=>{let D,c=null,v=!1;c=r.subscribe(new g.Q(s,void 0,void 0,P=>{D=(0,y.Xf)(n(P,t(n)(r))),c?(c.unsubscribe(),c=null,D.subscribe(s)):v=!0})),v&&(c.unsubscribe(),c=null,D.subscribe(s))})}},24351:(H,W,f)=>{"use strict";f.d(W,{b:()=>e});var y=f(95577),g=f(30576);function e(t,n){return(0,g.m)(n)?(0,y.z)(t,n,1):(0,y.z)(t,1)}},78372:(H,W,f)=>{"use strict";f.d(W,{b:()=>t});var y=f(34986),g=f(54482),e=f(25403);function t(n,r=y.z){return(0,g.e)((s,c)=>{let v=null,D=null,P=null;const G=()=>{if(v){v.unsubscribe(),v=null;const q=D;D=null,c.next(q)}};function it(){const q=P+n,bt=r.now();if(bt<q)return v=this.schedule(void 0,q-bt),void c.add(v);G()}s.subscribe(new e.Q(c,q=>{D=q,P=r.now(),v||(v=r.schedule(it,n),c.add(v))},()=>{G(),c.complete()},void 0,()=>{D=v=null}))})}},91005:(H,W,f)=>{"use strict";f.d(W,{g:()=>G});var y=f(34986),g=f(97272),e=f(95698),t=f(54482),n=f(25403),r=f(25032),c=f(69718),v=f(95577);function D(it,q){return q?bt=>(0,g.z)(q.pipe((0,e.q)(1),(0,t.e)((it,q)=>{it.subscribe(new n.Q(q,r.Z))})),bt.pipe(D(it))):(0,v.z)((bt,Ft)=>it(bt,Ft).pipe((0,e.q)(1),(0,c.h)(bt)))}var P=f(5963);function G(it,q=y.z){const bt=(0,P.H)(it,q);return D(()=>bt)}},71884:(H,W,f)=>{"use strict";f.d(W,{x:()=>t});var y=f(44671),g=f(54482),e=f(25403);function t(r,s=y.y){return r=null!=r?r:n,(0,g.e)((c,v)=>{let D,P=!0;c.subscribe(new e.Q(v,G=>{const it=s(G);(P||!r(D,it))&&(P=!1,D=it,v.next(G))}))})}function n(r,s){return r===s}},39300:(H,W,f)=>{"use strict";f.d(W,{h:()=>e});var y=f(54482),g=f(25403);function e(t,n){return(0,y.e)((r,s)=>{let c=0;r.subscribe(new g.Q(s,v=>t.call(n,v,c++)&&s.next(v)))})}},28746:(H,W,f)=>{"use strict";f.d(W,{x:()=>g});var y=f(54482);function g(e){return(0,y.e)((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}},54004:(H,W,f)=>{"use strict";f.d(W,{U:()=>e});var y=f(54482),g=f(25403);function e(t,n){return(0,y.e)((r,s)=>{let c=0;r.subscribe(new g.Q(s,v=>{s.next(t.call(n,v,c++))}))})}},69718:(H,W,f)=>{"use strict";f.d(W,{h:()=>g});var y=f(54004);function g(e){return(0,y.U)(()=>e)}},8189:(H,W,f)=>{"use strict";f.d(W,{J:()=>e});var y=f(95577),g=f(44671);function e(t=1/0){return(0,y.z)(g.y,t)}},95577:(H,W,f)=>{"use strict";f.d(W,{z:()=>c});var y=f(54004),g=f(38421),e=f(54482),n=(f(39672),f(25403)),s=f(30576);function c(v,D,P=1/0){return(0,s.m)(D)?c((G,it)=>(0,y.U)((q,bt)=>D(G,q,it,bt))((0,g.Xf)(v(G,it))),P):("number"==typeof D&&(P=D),(0,e.e)((G,it)=>function(v,D,P,G,it,q,bt,Ft){const gt=[];let wt=0,Bt=0,Kt=!1;const It=()=>{Kt&&!gt.length&&!wt&&D.complete()},St=ft=>wt<G?lt(ft):gt.push(ft),lt=ft=>{wt++;let ht=!1;(0,g.Xf)(P(ft,Bt++)).subscribe(new n.Q(D,Gt=>{D.next(Gt)},()=>{ht=!0},void 0,()=>{if(ht)try{for(wt--;gt.length&&wt<G;){const Gt=gt.shift();lt(Gt)}It()}catch(Gt){D.error(Gt)}}))};return v.subscribe(new n.Q(D,St,()=>{Kt=!0,It()})),()=>{}}(G,it,v,P)))}},13099:(H,W,f)=>{"use strict";f.d(W,{B:()=>r});var y=f(32076),g=f(95698),e=f(77579),t=f(70930),n=f(54482);function r(c={}){const{connector:v=(()=>new e.x),resetOnError:D=!0,resetOnComplete:P=!0,resetOnRefCountZero:G=!0}=c;return it=>{let q=null,bt=null,Ft=null,gt=0,wt=!1,Bt=!1;const Kt=()=>{null==bt||bt.unsubscribe(),bt=null},It=()=>{Kt(),q=Ft=null,wt=Bt=!1},St=()=>{const lt=q;It(),null==lt||lt.unsubscribe()};return(0,n.e)((lt,ft)=>{gt++,!Bt&&!wt&&Kt();const ht=Ft=null!=Ft?Ft:v();ft.add(()=>{gt--,0===gt&&!Bt&&!wt&&(bt=s(St,G))}),ht.subscribe(ft),q||(q=new t.Hp({next:Gt=>ht.next(Gt),error:Gt=>{Bt=!0,Kt(),bt=s(It,D,Gt),ht.error(Gt)},complete:()=>{wt=!0,Kt(),bt=s(It,P),ht.complete()}}),(0,y.D)(lt).subscribe(q))})(it)}}function s(c,v,...D){return!0===v?(c(),null):!1===v?null:v(...D).pipe((0,g.q)(1)).subscribe(()=>c())}},35684:(H,W,f)=>{"use strict";f.d(W,{T:()=>g});var y=f(39300);function g(e){return(0,y.h)((t,n)=>e<=n)}},68675:(H,W,f)=>{"use strict";f.d(W,{O:()=>t});var y=f(97272),g=f(63269),e=f(54482);function t(...n){const r=(0,g.yG)(n);return(0,e.e)((s,c)=>{(r?(0,y.z)(n,s,r):(0,y.z)(n,s)).subscribe(c)})}},63900:(H,W,f)=>{"use strict";f.d(W,{w:()=>t});var y=f(38421),g=f(54482),e=f(25403);function t(n,r){return(0,g.e)((s,c)=>{let v=null,D=0,P=!1;const G=()=>P&&!v&&c.complete();s.subscribe(new e.Q(c,it=>{null==v||v.unsubscribe();let q=0;const bt=D++;(0,y.Xf)(n(it,bt)).subscribe(v=new e.Q(c,Ft=>c.next(r?r(it,Ft,bt,q++):Ft),()=>{v=null,G()}))},()=>{P=!0,G()}))})}},95698:(H,W,f)=>{"use strict";f.d(W,{q:()=>t});var y=f(60515),g=f(54482),e=f(25403);function t(n){return n<=0?()=>y.E:(0,g.e)((r,s)=>{let c=0;r.subscribe(new e.Q(s,v=>{++c<=n&&(s.next(v),n<=c&&s.complete())}))})}},82722:(H,W,f)=>{"use strict";f.d(W,{R:()=>n});var y=f(54482),g=f(25403),e=f(38421),t=f(25032);function n(r){return(0,y.e)((s,c)=>{(0,e.Xf)(r).subscribe(new g.Q(c,()=>c.complete(),t.Z)),!c.closed&&s.subscribe(c)})}},18505:(H,W,f)=>{"use strict";f.d(W,{b:()=>n});var y=f(30576),g=f(54482),e=f(25403),t=f(44671);function n(r,s,c){const v=(0,y.m)(r)||s||c?{next:r,error:s,complete:c}:r;return v?(0,g.e)((D,P)=>{var G;null===(G=v.subscribe)||void 0===G||G.call(v);let it=!0;D.subscribe(new e.Q(P,q=>{var bt;null===(bt=v.next)||void 0===bt||bt.call(v,q),P.next(q)},()=>{var q;it=!1,null===(q=v.complete)||void 0===q||q.call(v),P.complete()},q=>{var bt;it=!1,null===(bt=v.error)||void 0===bt||bt.call(v,q),P.error(q)},()=>{var q,bt;it&&(null===(q=v.unsubscribe)||void 0===q||q.call(v)),null===(bt=v.finalize)||void 0===bt||bt.call(v)}))}):t.y}},84408:(H,W,f)=>{"use strict";f.d(W,{o:()=>n});var y=f(50727);class g extends y.w0{constructor(s,c){super()}schedule(s,c=0){return this}}const e={setInterval(...r){const{delegate:s}=e;return((null==s?void 0:s.setInterval)||setInterval)(...r)},clearInterval(r){const{delegate:s}=e;return((null==s?void 0:s.clearInterval)||clearInterval)(r)},delegate:void 0};var t=f(38737);class n extends g{constructor(s,c){super(s,c),this.scheduler=s,this.work=c,this.pending=!1}schedule(s,c=0){if(this.closed)return this;this.state=s;const v=this.id,D=this.scheduler;return null!=v&&(this.id=this.recycleAsyncId(D,v,c)),this.pending=!0,this.delay=c,this.id=this.id||this.requestAsyncId(D,this.id,c),this}requestAsyncId(s,c,v=0){return e.setInterval(s.flush.bind(s,this),v)}recycleAsyncId(s,c,v=0){if(null!=v&&this.delay===v&&!1===this.pending)return c;e.clearInterval(c)}execute(s,c){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const v=this._execute(s,c);if(v)return v;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,c){let D,v=!1;try{this.work(s)}catch(P){v=!0,D=P||new Error("Scheduled action threw falsy error")}if(v)return this.unsubscribe(),D}unsubscribe(){if(!this.closed){const{id:s,scheduler:c}=this,{actions:v}=c;this.work=this.state=this.scheduler=null,this.pending=!1,(0,t.P)(v,this),null!=s&&(this.id=this.recycleAsyncId(c,s,null)),this.delay=null,super.unsubscribe()}}}},97565:(H,W,f)=>{"use strict";f.d(W,{v:()=>e});var y=f(26063);class g{constructor(n,r=g.now){this.schedulerActionCtor=n,this.now=r}schedule(n,r=0,s){return new this.schedulerActionCtor(this,n).schedule(s,r)}}g.now=y.l.now;class e extends g{constructor(n,r=g.now){super(n,r),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:r}=this;if(this._active)return void r.push(n);let s;this._active=!0;do{if(s=n.execute(n.state,n.delay))break}while(n=r.shift());if(this._active=!1,s){for(;n=r.shift();)n.unsubscribe();throw s}}}},53101:(H,W,f)=>{"use strict";f.d(W,{E:()=>q});var y=f(84408);let e,g=1;const t={};function n(Ft){return Ft in t&&(delete t[Ft],!0)}const r={setImmediate(Ft){const gt=g++;return t[gt]=!0,e||(e=Promise.resolve()),e.then(()=>n(gt)&&Ft()),gt},clearImmediate(Ft){n(Ft)}},{setImmediate:c,clearImmediate:v}=r,D={setImmediate(...Ft){const{delegate:gt}=D;return((null==gt?void 0:gt.setImmediate)||c)(...Ft)},clearImmediate(Ft){const{delegate:gt}=D;return((null==gt?void 0:gt.clearImmediate)||v)(Ft)},delegate:void 0};var G=f(97565);const q=new class extends G.v{flush(gt){this._active=!0,this._scheduled=void 0;const{actions:wt}=this;let Bt,Kt=-1;gt=gt||wt.shift();const It=wt.length;do{if(Bt=gt.execute(gt.state,gt.delay))break}while(++Kt<It&&(gt=wt.shift()));if(this._active=!1,Bt){for(;++Kt<It&&(gt=wt.shift());)gt.unsubscribe();throw Bt}}}(class extends y.o{constructor(gt,wt){super(gt,wt),this.scheduler=gt,this.work=wt}requestAsyncId(gt,wt,Bt=0){return null!==Bt&&Bt>0?super.requestAsyncId(gt,wt,Bt):(gt.actions.push(this),gt._scheduled||(gt._scheduled=D.setImmediate(gt.flush.bind(gt,void 0))))}recycleAsyncId(gt,wt,Bt=0){if(null!=Bt&&Bt>0||null==Bt&&this.delay>0)return super.recycleAsyncId(gt,wt,Bt);0===gt.actions.length&&(D.clearImmediate(wt),gt._scheduled=void 0)}})},34986:(H,W,f)=>{"use strict";f.d(W,{z:()=>e,P:()=>t});var y=f(84408);const e=new(f(97565).v)(y.o),t=e},26063:(H,W,f)=>{"use strict";f.d(W,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},43410:(H,W,f)=>{"use strict";f.d(W,{z:()=>y});const y={setTimeout(...g){const{delegate:e}=y;return((null==e?void 0:e.setTimeout)||setTimeout)(...g)},clearTimeout(g){const{delegate:e}=y;return((null==e?void 0:e.clearTimeout)||clearTimeout)(g)},delegate:void 0}},2202:(H,W,f)=>{"use strict";f.d(W,{h:()=>g});const g="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},48822:(H,W,f)=>{"use strict";f.d(W,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},63269:(H,W,f)=>{"use strict";f.d(W,{jO:()=>t,yG:()=>n,_6:()=>r});var y=f(30576),g=f(93532);function e(s){return s[s.length-1]}function t(s){return(0,y.m)(e(s))?s.pop():void 0}function n(s){return(0,g.K)(e(s))?s.pop():void 0}function r(s,c){return"number"==typeof e(s)?s.pop():c}},54742:(H,W,f)=>{"use strict";f.d(W,{D:()=>n});const{isArray:y}=Array,{getPrototypeOf:g,prototype:e,keys:t}=Object;function n(s){if(1===s.length){const c=s[0];if(y(c))return{args:c,keys:null};if(function(s){return s&&"object"==typeof s&&g(s)===e}(c)){const v=t(c);return{args:v.map(D=>c[D]),keys:v}}}return{args:s,keys:null}}},38737:(H,W,f)=>{"use strict";function y(g,e){if(g){const t=g.indexOf(e);0<=t&&g.splice(t,1)}}f.d(W,{P:()=>y})},83888:(H,W,f)=>{"use strict";function y(g){const t=g(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}f.d(W,{d:()=>y})},31810:(H,W,f)=>{"use strict";function y(g,e){return g.reduce((t,n,r)=>(t[n]=e[r],t),{})}f.d(W,{n:()=>y})},72806:(H,W,f)=>{"use strict";f.d(W,{x:()=>e,O:()=>t});var y=f(42416);let g=null;function e(n){if(y.v.useDeprecatedSynchronousErrorHandling){const r=!g;if(r&&(g={errorThrown:!1,error:null}),n(),r){const{errorThrown:s,error:c}=g;if(g=null,s)throw c}}else n()}function t(n){y.v.useDeprecatedSynchronousErrorHandling&&g&&(g.errorThrown=!0,g.error=n)}},39672:(H,W,f)=>{"use strict";function y(g,e,t,n=0,r=!1){const s=e.schedule(function(){t(),r?g.add(this.schedule(null,n)):this.unsubscribe()},n);if(g.add(s),!r)return s}f.d(W,{f:()=>y})},44671:(H,W,f)=>{"use strict";function y(g){return g}f.d(W,{y:()=>y})},81144:(H,W,f)=>{"use strict";f.d(W,{z:()=>y});const y=g=>g&&"number"==typeof g.length&&"function"!=typeof g},12206:(H,W,f)=>{"use strict";f.d(W,{D:()=>g});var y=f(30576);function g(e){return Symbol.asyncIterator&&(0,y.m)(null==e?void 0:e[Symbol.asyncIterator])}},30576:(H,W,f)=>{"use strict";function y(g){return"function"==typeof g}f.d(W,{m:()=>y})},93670:(H,W,f)=>{"use strict";f.d(W,{c:()=>e});var y=f(48822),g=f(30576);function e(t){return(0,g.m)(t[y.L])}},26495:(H,W,f)=>{"use strict";f.d(W,{T:()=>e});var y=f(2202),g=f(30576);function e(t){return(0,g.m)(null==t?void 0:t[y.h])}},28239:(H,W,f)=>{"use strict";f.d(W,{t:()=>g});var y=f(30576);function g(e){return(0,y.m)(null==e?void 0:e.then)}},53260:(H,W,f)=>{"use strict";f.d(W,{Q:()=>e,L:()=>t});var y=f(35987),g=f(30576);function e(n){return(0,y.FC)(this,arguments,function*(){const s=n.getReader();try{for(;;){const{value:c,done:v}=yield(0,y.qq)(s.read());if(v)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(c)}}finally{s.releaseLock()}})}function t(n){return(0,g.m)(null==n?void 0:n.getReader)}},93532:(H,W,f)=>{"use strict";f.d(W,{K:()=>g});var y=f(30576);function g(e){return e&&(0,y.m)(e.schedule)}},54482:(H,W,f)=>{"use strict";f.d(W,{A:()=>g,e:()=>e});var y=f(30576);function g(t){return(0,y.m)(null==t?void 0:t.lift)}function e(t){return n=>{if(g(n))return n.lift(function(r){try{return t(r,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}},83268:(H,W,f)=>{"use strict";f.d(W,{Z:()=>t});var y=f(54004);const{isArray:g}=Array;function t(n){return(0,y.U)(r=>function(n,r){return g(r)?n(...r):n(r)}(n,r))}},25032:(H,W,f)=>{"use strict";function y(){}f.d(W,{Z:()=>y})},87849:(H,W,f)=>{"use strict";f.d(W,{h:()=>e});var y=f(42416),g=f(43410);function e(t){g.z.setTimeout(()=>{const{onUnhandledError:n}=y.v;if(!n)throw t;n(t)})}},44532:(H,W,f)=>{"use strict";function y(g){return new TypeError(`You provided ${null!==g&&"object"==typeof g?"an invalid object":`'${g}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}f.d(W,{z:()=>y})},34346:(H,W,f)=>{H.exports={interpreterHelper:f(44489),saveBlocksUrl:f(18449),saveLoad:f(79628)}},44489:(H,W,f)=>{const y=f(55841);W.createInterpreter=function(g,e){return{latestCode:"",workspace:g,BlocklyJavaScript:e,step:0,highlightPause:!1,myInterpreter:null,runner:null,generateCodeAndLoadIntoInterpreter:function(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(g),this.resetStepUi(!0)},resetStepUi:function(t){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1},resetInterpreter:function(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)},highlightBlock:function(t){this.workspace.highlightBlock(t),highlightPause=!0},nextStep:function(t,n){console.log("next step"),t.myInterpreter.step()?setTimeout((r,s)=>{r.nextStep(r,s)},10,t,n):(n?n():console.log("\n\n<< Program complete >>"),t.resetInterpreter(),t.resetStepUi(!1))},runCode:function(t,n,r,s){""==s&&(s=this.latestCode),this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var c=this;c.myInterpreter=t(s,(v,D)=>c.initApiJS(v,D,c,n,r)),1!=window.runOneByOne?setTimeout(function(){this.highlightPause=!1,c.runner=function(){c.myInterpreter&&(c.myInterpreter.run()?setTimeout(c.runner,10):(r?r():console.log("\n\n<< Program complete >>"),c.resetInterpreter(),c.resetStepUi(!1)))},c.runner&&c.runner()},100):this.nextStep(c,r)},initInterpreterWaitForSeconds:function(t,n){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var r=t.createAsyncFunction(function(s,c){setTimeout(c,1e3*s)});t.setProperty(n,"waitForSeconds",r)},getCreds:function(t,n,r){var s=t.pseudoToNative(n),c="(localSite)";(r.startsWith("http://")||r.startsWith("https://"))&&(c=new URL(r).hostname);var v=!1;return c in s?v=s[c]:"*"in s&&(v=s["*"]),v},getHeaders:function(t,n,r){var s=t.pseudoToNative(n),c="(localSite)";(r.startsWith("http://")||r.startsWith("https://"))&&(c=new URL(r).hostname);var v=[];return c in s?v=s[c]:"*"in s&&(v=s["*"]),v},doGet:function(t,n,r,s){let c=new XMLHttpRequest;c.open("GET",t,!0),this.generateDataAndCreds(c,r,s,!1),c.onreadystatechange=function(){if(4==c.readyState){if(c.status>=200&&c.status<300){var v=JSON.stringify({origHref:t,objectToSend:"",status:c.status,statusOK:!0,text:c.responseText});return n(v)}return v=JSON.stringify({origHref:t,objectToSend:"",status:c.status,statusOK:!1,text:c.responseText,headers:c.getAllResponseHeaders()}),n(v)}},c.send(null)},exportToFile:function(t,n,r){var c,s=f(18642);return c=r?this.b64toBlob(n):new Blob([n],{type:"text/plain;charset=utf-8"}),s.saveAs(c,t),t},b64toBlob:function(t,n="",r=512){const s=atob(t),c=[];for(let D=0;D<s.length;D+=r){const P=s.slice(D,D+r),G=new Array(P.length);for(let q=0;q<P.length;q++)G[q]=P.charCodeAt(q);const it=new Uint8Array(G);c.push(it)}return new Blob(c,{type:n})},displayDateCurrentAsHuman:function(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},displayDateCurrentAsIso:function(){return(new Date).toISOString()},displayDateCurrentAsUnix:function(){return Date.now()},displayDateFormatted:function(t){switch(t){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:console.log("Date time format not suported")}},generateDataAndCreds(t,n,r,s){if(r)t.withCredentials=r;else{var c=!1;if(n&&n.length>0)for(var v=0;v<n.length;v++){var D=n[v];"Content-Type"==D.name&&(c=!0),t.setRequestHeader(D.name,D.value)}s&&!c&&t.setRequestHeader("Content-Type","application/json;charset=UTF-8")}},doPut:(t,n,r,s,c)=>{let v=n,D=new XMLHttpRequest;D.open("PUT",t,!0),this.generateDataAndCreds(D,s,c,!!n),D.onreadystatechange=function(){if(4==D.readyState){if(D.status>=200&&D.status<300){var P=JSON.stringify({origHref:t,objectToSend:n,status:D.status,statusOK:!0,text:D.responseText});return r(P)}return P=JSON.stringify({origHref:t,objectToSend:n,status:D.status,statusOK:!1,text:D.responseText,objectToSend:n,headers:D.getAllResponseHeaders()}),r(P)}},D.send(v)},doDelete:function(t,n,r,s,c){let v=n;var D=new XMLHttpRequest;D.open("DELETE",t,!0),this.generateDataAndCreds(D,s,c,!!n),D.onreadystatechange=function(){if(4==D.readyState){if(D.status>=200&&D.status<300){var P=JSON.stringify({origHref:t,objectToSend:"",status:D.status,statusOK:!0,text:D.responseText});return r(P)}return P=JSON.stringify({origHref:t,objectToSend:"",status:D.status,statusOK:!1,text:D.responseText,objectToSend:n,headers:D.getAllResponseHeaders()}),r(P)}},D.send(v)},doPost:function(t,n,r,s,c){let v=n,D=new XMLHttpRequest;D.open("POST",t,!0),this.generateDataAndCreds(D,s,c,!!n),D.onreadystatechange=function(){if(4==D.readyState){if(D.status>=200&&D.status<300){var P=JSON.stringify({origHref:t,objectToSend:n,status:D.status,statusOK:!0,text:D.responseText});return r(P)}return P=JSON.stringify({origHref:t,objectToSend:n,status:D.status,statusOK:!1,text:D.responseText,objectToSend:n,headers:D.getAllResponseHeaders()}),r(P)}},D.send(v)},table2array:function(t){var n=t.rows,r=[];if(0==n.length)return[];for(var s=Array.from(n[0].children).map(G=>G.innerText),c=1;c<n.length;c++){for(var v=n[c].children,D={},P=0;P<v.length;P++)D[s[P]]=v[P].innerText;r.push(D)}return r},list2array:function(t){var n=t.getElementsByTagName("li"),r=[];if(0==n.length)return[];for(var s=0;s<n.length;s++)r.push({li:n[s].innerText});return r},parseDOMFromStringElements:function(t,n,r){var q,s=(new DOMParser).parseFromString(t,n),c=[];if(r.toString().indexOf(",")>-1)for(var v=r.split(","),D=0;D<v.length;D++)c=c.concat(Array.from(s.getElementsByTagName(v[D])));else c=s.getElementsByTagName(r);var P={};if(0==c.length)return P;switch(r){case"table":for(P={},D=0;D<c.length;D++)P["table"+D]=this.table2array(c[D]);break;case"a":P=[];var G=(null==(q=null==window?void 0:window.location)?void 0:q.host)||"";for(G.length>0&&(G=window.location.protocol+"//"+G),D=0;D<c.length;D++){var it=c[D].href;G.length>0&&it.startsWith(G)&&(it=it.substring(G.length)),P.push({href:it,text:c[D].innerText})}break;case"img":for(P=[],D=0;D<c.length;D++)P.push({src:c[D].src});break;case"ul,ol":for(P={},D=0;D<c.length;D++)P["list"+D]=this.list2array(c[D]);break;case"h1,h2,h3,h4,h5,h6":for(P=[],D=0;D<c.length;D++)P.push({header:c[D].innerText});break;default:throw new Error(`tag !${r}! not supported`)}return JSON.stringify(P)},consoleLog:function(t,n){return console.log(t,n)},initApiJS:function(t,n,r,s,c){t.setProperty(n,"errHandler",t.createNativeFunction(v=G=>{s?s("\n error --\n"+G+"\n error --"):console.log(G)}));var v=function(G,it){return t.createPrimitive(r.consoleLog(G,it))};t.setProperty(n,"consoleLog",t.createNativeFunction(v)),v=function(G,it,q){return G=G?G.toString():"",t.createPrimitive(r.parseDOMFromStringElements(G,it,q))},t.setProperty(n,"parseDOMFromStringElements",t.createNativeFunction(v)),t.setProperty(n,"parseDomNative",t.createNativeFunction(v));var D=t.nativeToPseudo({"(localSite)":!1});t.setProperty(n,"withCredsForDomain",D);var P=t.nativeToPseudo({"(localSite)":[]});t.setProperty(n,"headersForDomain",P),t.setProperty(n,"alert1",t.createNativeFunction(v=function(G){G=G?G.toString():"",window.alert(G)})),t.setProperty(n,"playPiano",t.createNativeFunction(v=function(G,it,q){y.Synth.createInstrument("piano").play(G,it,q)})),t.setProperty(n,"startDebugger",t.createNativeFunction(v=function(G,it,q){r.highlightBlock(it),console.log(G,it,q)})),t.setProperty(n,"alert",t.createNativeFunction(v=function(G){G=G?G.toString():"",s?s(G):console.log(G)})),t.setProperty(n,"waitTime",t.createAsyncFunction(v=(G,it)=>{console.log(`waiting seconds ${G}`),setTimeout(it,1e3*G)})),t.setProperty(n,"displayDateFormatted",t.createNativeFunction(v=G=>r.displayDateFormatted(G))),t.setProperty(n,"exportToFile",t.createNativeFunction(v=(G,it,q)=>r.exportToFile(G,it,q))),t.setProperty(n,"convertToCSV",t.createNativeFunction(v=G=>{var it=null;return Array.isArray(G)?it=G:((it="object"!=typeof G?JSON.parse(G):{})&&it.table0&&(it=it.table0),it&&it.list0&&(it=it.list0)),0==it.length?"":(it=[Object.keys(it[0])].concat(it)).map(bt=>Object.values(bt).toString()).join("\n")})),t.setProperty(n,"open",t.createNativeFunction(v=function(G){window.open(G,"_blank")})),t.setProperty(n,"changeHost",t.createNativeFunction(v=function(G,it){if(0==(it=(it=it?it.toString():"").trim()).length)return G;if(0==(G=(G=G||"").trim()).length&&!(G=it).startsWith("http"))throw`please put in front of ${it} http:// or https://`;if(G=new URL(G),it.startsWith("http")){var q=new URL(it);G.hostname=q.hostname,G.protocol=q.protocol}else G.hostname=it.replace("https://","").replace("http://","");var bt=G.href;return bt.endsWith("/")&&(bt=bt.substring(0,bt.length-1)),bt})),t.setProperty(n,"changePort",t.createNativeFunction(v=function(G,it){G=new URL(G),console.log(`url ${G.href}`),G.port=it,console.log(`url ${G.href}`);var q=G.href;return q.endsWith("/")&&(q=q.substring(0,q.length-1)),q})),t.setProperty(n,"speakDefault",t.createNativeFunction(v=function(G,it,q,bt,Ft){var gt=new SpeechSynthesisUtterance(G),wt=parseInt(it),Bt=window.speechSynthesis.getVoices()[wt];gt.voice=Bt,window.speechSynthesis.speak(gt)})),t.setProperty(n,"prompt",t.createAsyncFunction(v=function(G,it,q){G=G?G.toString():"",it=it?it.toString():"",q(window.prompt(G,it))})),r.BlocklyJavaScript.addReservedWords("waitForSeconds"),v=t.createAsyncFunction(function(G,it){setTimeout(it,1e3*G)}),t.setProperty(n,"waitForSeconds",v),t.setProperty(n,"getXhr",t.createAsyncFunction(v=(G,it)=>{var q=r.getHeaders(t,P,G),bt=r.getCreds(t,D,G);return r.doGet(G,it,q,bt)})),t.setProperty(n,"postXhr",t.createAsyncFunction(v=(G,it,q)=>{try{var bt=r.getHeaders(t,P,G),Ft=r.getCreds(t,D,G);r.doPost(G,it,q,bt,Ft)}catch(gt){alert("is an error"+gt)}})),t.setProperty(n,"deleteXhr",t.createAsyncFunction(v=(G,it,q)=>{try{var bt=r.getHeaders(t,P,G),Ft=r.getCreds(t,D,G);r.doDelete(G,it,q,bt,Ft)}catch(gt){alert("is an error"+gt)}})),v=(G,it,q)=>{try{var bt=t.pseudoToNative(P),Ft="(localSite)";(G.startsWith("http://")||G.startsWith("https://"))&&(Ft=new URL(G).hostname);var gt=[];Ft in bt&&(gt=bt[Ft]),r.doPut(G,it,q,gt,!1)}catch(Bt){alert("is an error"+Bt)}},t.setProperty(n,"putXhr",t.createAsyncFunction(v)),v=function(G){return G=G?G.toString():"",t.createPrimitive(r.highlightBlock(G))},t.setProperty(n,"highlightBlock",t.createNativeFunction(v))}}}},55841:(H,W,f)=>{"use strict";var y,g,e;f.r(W),f.d(W,{Synth:()=>y}),function(){var t=window.URL||window.webkitURL,n=window.Blob;if(!t||!n)throw new Error("This browser does not support AudioSynth");var r=!1,s=null,c=function(it,q){return[new Uint8Array([q,q>>8]),new Uint8Array([q,q>>8,q>>16,q>>24])][it]},v=function(it,q,bt,Ft){Object.defineProperty(this,it,{value:q,writable:!!bt,enumerable:!!Ft})},D=function(it,q,bt){v.call(this,it,q,bt,!0)};e=function(){this.__init__.apply(this,arguments)};var P=v.bind(e.prototype),G=D.bind(e.prototype);P("__init__",function(it,q,bt){if(!r)throw new Error("AudioSynthInstrument can only be instantiated from the createInstrument method of the AudioSynth object.");v.call(this,"_parent",it),D.call(this,"name",q),v.call(this,"_soundID",bt)}),G("play",function(it,q,bt){return this._parent.play(this._soundID,it,q,bt)}),G("generate",function(it,q,bt){return this._parent.generate(this._soundID,it,q,bt)}),P=v.bind((g=function it(){return s instanceof it?s:(this.__init__(),this)}).prototype),G=D.bind(g.prototype),P("_debug",!1,!0),P("_bitsPerSample",16),P("_channels",1),P("_sampleRate",44100,!0),G("setSampleRate",function(it){return this._sampleRate=Math.max(Math.min(0|it,44100),4e3),this._clearCache(),this._sampleRate}),G("getSampleRate",function(){return this._sampleRate}),P("_volume",32768,!0),G("setVolume",function(it){return it=parseFloat(it),isNaN(it)&&(it=0),it=Math.round(32768*it),this._volume=Math.max(Math.min(0|it,32768),0),this._clearCache(),this._volume}),G("getVolume",function(){return Math.round(this._volume/32768*1e4)/1e4}),P("_notes",{C:261.63,"C#":277.18,D:293.66,"D#":311.13,E:329.63,F:349.23,"F#":369.99,G:392,"G#":415.3,A:440,"A#":466.16,B:493.88}),P("_fileCache",[],!0),P("_temp",{},!0),P("_sounds",[],!0),P("_mod",[function(it,q,bt,Ft){return Math.sin(2*Math.PI*(it/q)*bt+Ft)}]),P("_resizeCache",function(){for(var it=this._fileCache,q=this._sounds.length;it.length<q;){for(var bt=[],Ft=0;Ft<8;Ft++){var gt={};for(var wt in this._notes)gt[wt]={};bt.push(gt)}it.push(bt)}}),P("_clearCache",function(){this._fileCache=[],this._resizeCache()}),G("generate",function(it,q,bt,Ft){var gt=this._sounds[it];if(!gt)for(var wt=0;wt<this._sounds.length;wt++)if(this._sounds[wt].name==it){gt=this._sounds[wt],it=wt;break}if(!gt)throw new Error("Invalid sound or sound ID: "+it);var Bt=(new Date).valueOf();this._temp={},bt|=0,bt=Math.min(8,Math.max(1,bt));var Kt=Ft?parseFloat(Ft):2;if(void 0===this._notes[q])throw new Error(q+" is not a valid note.");if(void 0!==this._fileCache[it][bt-1][q][Kt])return this._debug&&console.log((new Date).valueOf()-Bt,"ms to retrieve (cached)"),this._fileCache[it][bt-1][q][Kt];var It=this._notes[q]*Math.pow(2,bt-4),St=this._sampleRate,lt=this._volume,ft=this._channels,ht=this._bitsPerSample,Gt=gt.attack(St,It,lt),ut=gt.dampen(St,It,lt),ot=gt.wave,st={modulate:this._mod,vars:this._temp},Z=0,vt=new Uint8Array(new ArrayBuffer(Math.ceil(St*Kt*2))),At=St*Gt|0,re=St*Kt|0;for(wt=0;wt!==At;wt++)Z=lt*(wt/(St*Gt))*ot.call(st,wt,St,It,lt),vt[wt<<1]=Z,vt[1+(wt<<1)]=Z>>8;for(;wt!==re;wt++)Z=lt*Math.pow(1-(wt-St*Gt)/(St*(Kt-Gt)),ut)*ot.call(st,wt,St,It,lt),vt[wt<<1]=Z,vt[1+(wt<<1)]=Z>>8;var ve=["RIFF",c(1,52),"WAVE","fmt ",c(1,16),c(0,1),c(0,ft),c(1,St),c(1,St*ft*ht/8),c(0,ft*ht/8),c(0,ht),"data",c(1,vt.length*ft*ht/8),vt],oe=new n(ve,{type:"audio/wav"}),Ie=t.createObjectURL(oe);return this._fileCache[it][bt-1][q][Kt]=Ie,this._debug&&console.log((new Date).valueOf()-Bt,"ms to generate"),Ie}),G("play",function(it,q,bt,Ft){var gt=this.generate(it,q,bt,Ft);return new Audio(gt).play(),!0}),G("debug",function(){this._debug=!0}),G("createInstrument",function(it){var q=0,bt=!1;if("string"==typeof it){for(var Ft=0;Ft<this._sounds.length;Ft++)if(this._sounds[Ft].name==it){bt=!0,q=Ft;break}}else this._sounds[it]&&(it=this._sounds[q=it].name,bt=!0);if(!bt)throw new Error("Invalid sound or sound ID: "+it);r=!0;var gt=new e(this,it,q);return r=!1,gt}),G("listSounds",function(){for(var it=[],q=0;q<this._sounds.length;q++)it.push(this._sounds[q].name);return it}),P("__init__",function(){this._resizeCache()}),G("loadSoundProfile",function(){for(var it=0,q=arguments.length;it<q;it++){var bt=arguments[it];if(!(bt instanceof Object))throw new Error("Invalid sound profile.");this._sounds.push(bt)}return this._resizeCache(),!0}),G("loadModulationFunction",function(){for(var it=0,q=arguments.length;it<q;it++){var bt=arguments[it];if("function"!=typeof bt)throw new Error("Invalid modulation function.");this._mod.push(bt)}return!0}),s=new g,y=s}(),y.loadModulationFunction(function(t,n,r,s){return 1*Math.sin(2*Math.PI*(t/n*r)+s)},function(t,n,r,s){return 1*Math.sin(4*Math.PI*(t/n*r)+s)},function(t,n,r,s){return 1*Math.sin(8*Math.PI*(t/n*r)+s)},function(t,n,r,s){return 1*Math.sin(.5*Math.PI*(t/n*r)+s)},function(t,n,r,s){return 1*Math.sin(.25*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(2*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(4*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(8*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(.5*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(.25*Math.PI*(t/n*r)+s)}),y.loadSoundProfile({name:"piano",attack:function(){return.002},dampen:function(t,n,r){return Math.pow(.5*Math.log(n*r/t),2)},wave:function(t,n,r,s){var c=this.modulate[0];return this.modulate[1](t,n,r,Math.pow(c(t,n,r,0),2)+.75*c(t,n,r,.25)+.1*c(t,n,r,.5))}},{name:"organ",attack:function(){return.3},dampen:function(t,n){return 1+.01*n},wave:function(t,n,r){var s=this.modulate[0];return this.modulate[1](t,n,r,s(t,n,r,0)+.5*s(t,n,r,.25)+.25*s(t,n,r,.5))}},{name:"acoustic",attack:function(){return.002},dampen:function(){return 1},wave:function(t,n,r){var s=this.vars;s.valueTable=s.valueTable?s.valueTable:[],void 0===s.playVal&&(s.playVal=0),void 0===s.periodCount&&(s.periodCount=0);var c=s.valueTable,v=s.playVal,D=s.periodCount,P=n/r,G=Math.floor(100*(P-Math.floor(P))),it=!1;if(c.length<=Math.ceil(P))return c.push(2*Math.round(Math.random())-1),c[c.length-1];c[v]=.5*(c[v>=c.length-1?0:v+1]+c[v]),v>=Math.floor(P)&&(v<Math.ceil(P)?D%100>=G&&(it=!0,c[v+1]=.5*(c[0]+c[v+1]),s.periodCount++):it=!0);var q=c[v];return it?s.playVal=0:s.playVal++,q}},{name:"edm",attack:function(){return.002},dampen:function(){return 1},wave:function(t,n,r){var s=this.modulate[0],c=this.modulate.slice(1);return c[0](t,n,r,c[9](t,n,r,c[2](t,n,r,Math.pow(s(t,n,r,0),3)+Math.pow(s(t,n,r,.5),5)+Math.pow(s(t,n,r,1),7)))+c[8](t,n,r,s(t,n,r,1.75)))}})},18449:(H,W)=>{W.saveState=function(g,e,t){var n="BlocklyState"+(t||""),r=g.workspaceToDom(e,!0),s=g.domToPrettyText(r);window.localStorage.setItem(n,s)},W.restoreState=function(g,e,t){var r=window.localStorage.getItem("BlocklyState"+(t||""));if((null==r?void 0:r.length)>62){var s=g.textToDom(r);g.clearWorkspaceAndLoadFromXml(s,e)}return""}},79628:(H,W,f)=>{var y=f(18642);W.DownloadBlocks=function(g,e,t){var n=g.workspaceToDom(e,!0),r=g.domToPrettyText(n),s=new Blob([r],{type:"text/plain;charset=utf-16"});y.saveAs(s,t)},W.LoadFile=function(g,e,t){e.clear();var n=g.textToDom(t);g.domToWorkspace(n,e)}},19842:(H,W,f)=>{const y=f(45797);W.definitionBlocks=function(g,e){g.HTMLheaders={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Header").appendField(new y.FieldDropdown([["H1","H1"],["H2","H2"],["H3","H3"]]),"NAME"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to Header "),this.setHelpUrl("")}},e.HTMLheaders=function(t){var n=t.getFieldValue("NAME");return[`'<${n}>'+ ${e.valueToCode(t,"NAME",e.ORDER_ATOMIC)} + '</${n}>'`,e.ORDER_NONE]},g.HTMLlist={init:function(){this.appendDummyInput().appendField("List ").appendField(new y.FieldDropdown([["OL","ol"],["UL","ul"]]),"listType"),this.appendStatementInput("Content").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(240),this.setTooltip("list - please add li block "),this.setHelpUrl("")}},e.HTMLlist=function(t){var n=t.getFieldValue("listType");return e.valueToCode(t,"ListType",e.ORDER_ATOMIC),`window.alert('<${n}>');\n;${e.statementToCode(t,"Content")};\n;window.alert('</${n}>');\n`},g.HTMLli={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("LI"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to LI"),this.setHelpUrl("")}},e.HTMLli=function(t){return[`'<li>'+ ${e.valueToCode(t,"NAME",e.ORDER_ATOMIC)} + '</li>'`,e.ORDER_NONE]},g.HTMLliStart={init:function(){this.appendDummyInput().appendField("List").appendField(new y.FieldDropdown([["OL","OL"],["UL","UL"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI start"),this.setHelpUrl("")}},e.HTMLliStart=function(t){return[`'<${t.getFieldValue("NAME")}>'`,e.ORDER_NONE]},g.HTMLliStop={init:function(){this.appendDummyInput().appendField("/List").appendField(new y.FieldDropdown([["OL","OL"],["UL","UL"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI stop"),this.setHelpUrl("")}},e.HTMLliStop=function(t){return[`'</${t.getFieldValue("NAME")}>'`,e.ORDER_NONE]},g.HTMLlink={init:function(){this.appendDummyInput().appendField("A").appendField("target").appendField(new y.FieldDropdown([["_blank","_blank"],["_self","_self"],["_parent","_parent"],["_top","_top"]]),"targetDrop"),this.appendValueInput("HREF").setCheck(null).appendField("href"),this.appendValueInput("text").setCheck(null).appendField("text"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.HTMLlink=function(t){var n=t.getFieldValue("targetDrop"),r=e.valueToCode(t,"HREF",e.ORDER_ATOMIC),s=e.valueToCode(t,"text",e.ORDER_ATOMIC),c="'<a href=\"'+"+r;return c+=`+ '" target="${n}"'`,[c+="+ '>'+"+(s=s||r)+"+ '</a> '",e.ORDER_NONE]}},W.fieldXML=function(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="HTMLheaders">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        \n<block type="HTMLlist"></block>\n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n  \n<block type="HTMLli">\n<value name="NAME">\n<shadow type="text">\n <field name="TEXT"></field>\n</shadow>\n</value>\n</block>    \n</value>\n</block>\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStart"></block>\n</value>\n</block>    \n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStop"></block>\n\n</value>\n</block>    \n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLlink"></block>\n\n</value>\n</block>    \n\n\n'}},67105:(H,W,f)=>{const y=f(45797);W.definitionBlocks=function(g,e){g.simpleHtmlparser={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Find ").appendField(new y.FieldDropdown([["Tables","table"],["Links","a"],["Images","img"],["List","ul,ol"],["Headers","h1,h2,h3,h4,h5,h6"]]),"To"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.simpleHtmlparser=function(t){var s="(function(value){ \n";return s+=`var doc  = parseDOMFromStringElements(value,"text/html","${t.getFieldValue("To")}");\n`,s+="return doc;\n",[s+="})("+e.valueToCode(t,"NAME",e.ORDER_ATOMIC)+")",e.ORDER_NONE]}},W.fieldXML=function(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="simpleHtmlparser">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        '}},87804:(H,W,f)=>{const y=f(45797);W.definitionBlocks=function(g,e){g.ttsBlock={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Voice").appendField(new y.FieldDropdown(this.generateOptions),"voiceSelected"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")},generateOptions:function(){if(window.speechSynthesis){var n=window.speechSynthesis.getVoices().map((r,s)=>[r.name,"voice"+s]);if(n.length>0)return n}return[["no voice","NoVoice"]]}},e.ttsBlock=function(t){var n=t.getFieldValue("voiceSelected");return n=n.replace("voice",""),"speakDefault("+e.valueToCode(t,"NAME",e.ORDER_ATOMIC)+","+n+");\n"}},W.fieldXML=function(){return'<block type="ttsBlock">\n        <value name="NAME">\n            <shadow type="text">\n            <field name="TEXT">Hello</field></shadow>\n        </value>       \n        </block>\n'}},40054:(H,W)=>{W.definitionBlocks=function(f,y){f.credsforhttp={init:function(){this.appendDummyInput().appendField("Http with Creds"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("WithCreds").setCheck("Boolean").appendField("With Creds ?"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.credsforhttp=function(t){return"withCredsForDomain["+(y.valueToCode(t,"HttpDomain",0)||"(localSite)")+"]="+y.valueToCode(t,"WithCreds",0)+";\n"}},W.fieldXML=function(){return'<block type="credsforhttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="WithCreds">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},29130:(H,W)=>{W.definitionBlocks=function(f,y){f.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.auth0webapidata=function(t){var v='{"client_id":'+y.valueToCode(t,"client_id",0);return v+=',"client_secret":'+y.valueToCode(t,"client_secret",0),v+=',"audience":'+y.valueToCode(t,"audience",0),v+=',"grant_type":'+y.valueToCode(t,"grant_type",0),[v+="}",99]}},W.fieldXML=function(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}},34122:(H,W,f)=>{const y=f(45797);W.definitionBlocks=function(g,e){g.chart_js={init:function(){this.appendDummyInput().appendField("ChartType").appendField(new y.FieldDropdown([["HBar","HBar"],["VBar","VBar"]]),"ChartTypeValue"),this.appendValueInput("ChartTitleValue").setCheck(null).appendField(new y.FieldLabelSerializable("Title"),"ChartTitle"),this.appendValueInput("LabelsValue").setCheck("Array").appendField(new y.FieldLabelSerializable("Labels"),"ChartLabels"),this.appendValueInput("DataSet1Label").setCheck("String").appendField(new y.FieldLabelSerializable("DataSet1 Label"),"DataSetLabel1"),this.appendValueInput("DataSet1Data").setCheck("Array").appendField(new y.FieldLabelSerializable("DataSet1 Data"),"DataSetData1"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.chart_js=function(t){var n=t.getFieldValue("ChartTypeValue"),s=(e.valueToCode(t,"ChartTitleValue",e.ORDER_ATOMIC),e.valueToCode(t,"LabelsValue",e.ORDER_ATOMIC)),c=e.valueToCode(t,"DataSet1Label",e.ORDER_ATOMIC),v=e.valueToCode(t,"DataSet1Data",e.ORDER_ATOMIC),D="",P="x";switch(n){case"HBar":D="bar",P="y";break;case"VBar":D="bar";break;default:throw"Unknown chart type:"+n}return[`JSON.stringify({ 'type': '${D}', 'options':{ 'indexAxis':'${P}'},  'data': {  'labels': ${s}, 'datasets': [{ 'backgroundColor': ['green','blue'],'label': ${c}, 'data': ${v} }] } })`,e.ORDER_NONE]}},W.fieldXML=function(){return'<block type="chart_js"></block>'}},11124:(H,W,f)=>{const y=f(45797);W.definitionBlocks=function(g,e){g.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(new y.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},e.comment=function(n){return"/*\n"+(e.valueToCode(n,"TEXT",0)||"''")+"\n*/;\n"},g.debugger={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("debugger").appendField(new y.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},e.debugger=function(n){return"startDebugger("+(e.valueToCode(n,"TEXT",0)||"''")+",'"+n.id+"',this);\n"}},W.fieldXML=function(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n<block type="debugger">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">my message for debug</field>\n        </shadow>\n    </value>\n</block>\n'}},54256:(H,W)=>{W.definitionBlocks=function(f,y){f.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},y.converttojson=function(t){return["JSON.parse("+y.valueToCode(t,"ValueToConvert",0)+")",99]},f.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},y.converttostring=function(t){return["JSON.stringify("+y.valueToCode(t,"ValueToConvert",0)+")",99]},f.convertcsv={init:function(){this.appendDummyInput().appendField("Convert To CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},y.convertcsv=function(t){return["convertToCSV("+y.valueToCode(t,"ArrayToConvert",y.ORDER_ATOMIC)+")",99]}},W.fieldXML=function(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n'}},97404:(H,W,f)=>{const y=f(45797);W.definitionBlocks=function(g,e,t,n){e.object_from_json=function(ut){return[`JSON.parse(${e.valueToCode(ut,"JSON",0)})`,99]},e.object_to_json=function(ut){return[`JSON.stringify(${e.valueToCode(ut,"object",0)})`,99]},e.object_get=function(ut){const ot=ut.getFieldValue("field_name");return[`${e.valueToCode(ut,"object",0)}['${ot}']`,99]},e.object_set=function(ut){const ot=ut.getFieldValue("field_name");return`${e.valueToCode(ut,"object_field",0)}['${ot}'] = ${e.valueToCode(ut,"value_field",0)};\n`},e.object_create=function(ut){if(!ut.numFields)return["{}",99];let ot="";for(let Z=1;Z<=ut.numFields;Z++)ot+=`"${ut.getFieldValue("field"+Z)}": ${e.valueToCode(ut,"field_input"+Z,0)}, `;return[`{ ${ot} }`,99]};const bt="object_field",Ft="object_create_mutator_top",gt="#F99EA3",wt=(ut,...ot)=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[ut]),Bt={type:"object_from_json",message0:wt("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:gt,tooltip:wt("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};g.object_from_json={init:function(){this.jsonInit(Bt)}};const Kt={type:"object_to_json",message0:wt("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:gt,tooltip:wt("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};g.object_to_json={init:function(){this.jsonInit(Kt)}};const It={type:"object_get",message0:wt("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:gt,tooltip:wt("object_get_json_tooltip"),helpUrl:""};g.object_get={init:function(){this.jsonInit(It)}};const St={type:"object_set",message0:wt("object_set_json"),args0:[{type:"field_input",name:"field_name",text:wt("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:gt,tooltip:wt("object_set_json_tooltip"),helpUrl:""};g.object_set={init:function(){this.jsonInit(St)}};const lt={type:"object_create",message0:wt("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:wt("object_create_tooltip"),helpUrl:""};g.object_create={init:function(){this.jsonInit(lt)}};const ft={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:wt("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};g[bt]={init:function(){this.jsonInit(ft)}};const ht={type:"object_create_mutator",message0:wt("object_create"),nextStatement:null,colour:15,tooltip:wt("object_create_tooltip"),helpUrl:""};g[Ft]={init:function(){this.jsonInit(ht)}};const Gt={numFields:0,fields:[],domToMutation:function(ut){this.fields=[];for(let st,ot=0;st=ut.childNodes[ot];ot++)"field"==st.nodeName.toLowerCase()&&this.fields.push(st.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const ut=document.createElement("mutation");ut.setAttribute("num_fields",""+this.numFields);for(let ot=0;ot<this.fields.length;ot++){const st=document.createElement("field");st.setAttribute("name",this.fields[ot]),ut.appendChild(st)}return ut},compose:function(ut){let ot=ut.nextConnection&&ut.nextConnection.targetBlock();this.numFields=0,this.fields=[];let st=[null];for(;ot;)this.fields.push(ot.getFieldValue("field_name")),this.numFields++,st.push(ot.savedConnection),ot=ot.nextConnection&&ot.nextConnection.targetBlock();this.updateShape();for(let Z=1;Z<=this.numFields;Z++)n.reconnect(st[Z],this,"field_input"+Z)},decompose:function(ut){const ot=ut.newBlock(Ft);ot.initSvg();let st=ot.nextConnection;for(let Z=0;Z<this.fields.length;Z++){const Zt=ut.newBlock(bt);Zt.initSvg(),Zt.setFieldValue(this.fields[Z],"field_name"),st.connect(Zt.previousConnection),st=Zt.nextConnection}return ot},saveConnections:function(ut){let ot=ut.nextConnection&&ut.nextConnection.targetBlock(),st=1;for(;ot;){const Z=this.getInput("field_input"+st);ot.savedConnection=Z&&Z.connection.targetConnection,ot.setFieldValue(this.getFieldValue("field"+st),"field_name"),st++,ot=ot.nextConnection&&ot.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let ut=1;for(;this.getInput("field_input"+ut);)this.removeInput("field_input"+ut),ut++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let ot=1;ot<=this.numFields;ot++){const st=this.fields[ot-1];this.appendValueInput("field_input"+ot).setCheck(null).setAlign(1).appendField(new y.FieldTextInput(st),"field"+ot)}}};try{t.registerMutator("controls_create_mutator",Gt,null,["object_field"])}catch(ut){}},W.fieldXML=function(){return'    \n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n\n'}},50188:(H,W,f)=>{const y=f(45797);W.definitionBlocks=function(g,e){g.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new y.FieldDropdown([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};e.displayCurrentDate=r=>{let c="";switch(r.getFieldValue("dateFormat").toString()){case"human":c="displayDateFormatted('human')";break;case"iso":c="displayDateFormatted('iso')";break;case"unix":c="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[c,99]}},W.fieldXML=function(){return'<block type="displayCurrentDate"></block>'}},71320:(H,W)=>{W.definitionBlocks=function(f,y){f.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},y.DateFromText=e=>["Date.parse("+(y.valueToCode(e,"VALUE",y.ORDER_ATOMIC)||"")+")",99]},W.fieldXML=function(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}},18638:(H,W)=>{W.generalBlocks=function(){return'\n    \n    <category name="Blockly Core">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}},15889:(H,W,f)=>{const y=f(45797);W.definitionBlocks=function(g,e){g.blockemail={init:function(){this.appendValueInput("from").setCheck(null).appendField("From:"),this.appendValueInput("to").setCheck(null).appendField("To:"),this.appendValueInput("cc").setCheck(null).appendField("CC:"),this.appendValueInput("bcc").setCheck(null).appendField("BCC:"),this.appendValueInput("subject").setCheck(null).appendField("Subject:"),this.appendValueInput("body").setCheck(null).appendField("Body:").appendField(new y.FieldDropdown([["HTML","Html"],["TEXT","Text"]]),"NAME"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},g.sendinblue={init:function(){this.appendDummyInput().appendField("SendInBlue"),this.appendValueInput("APIKey").setCheck(null).appendField("ApiKey"),this.appendValueInput("email").setCheck("blockemail").appendField("Email"),this.setColour(230),this.setTooltip("Please see https://account.sendinblue.com/advanced/api"),this.setHelpUrl("https://account.sendinblue.com/advanced/api"),this.setOutput(!0,null)}},e.sendinblue=function(n){var c='window.alert("SendInBlue");\n',v="api.sendinblue.com";return c=`(function(apiKey,email){if(!('${v}' in headersForDomain)){ headersForDomain['${v}']=[]; };\n`,c+=`headersForDomain['${v}'].push({"name":"api-key","value":apiKey});\n`,c+=`headersForDomain['${v}'].push({"name":"Content-Type","value":"application/json"});\n`,c+=`headersForDomain['${v}'].push({"name":"Accept","value":"application/json"});\n`,c+='var sendinblueData={"sender":{"email": email.from }, "to":[{"email":email.to }],"subject":email.subject,"htmlContent": email.body} ;\n',c+="\nwindow.alert(JSON.stringify(sendinblueData));\n",c+=`var res=JSON.parse(postXhr("https://${v}/v3/smtp/email",JSON.stringify(sendinblueData)));if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;\n`,[c+="})("+e.valueToCode(n,"APIKey",e.ORDER_ATOMIC)+","+e.valueToCode(n,"email",e.ORDER_ATOMIC)+")",e.ORDER_NONE]},e.blockemail=function(n){var r=e.valueToCode(n,"from",e.ORDER_ATOMIC),s=e.valueToCode(n,"to",e.ORDER_ATOMIC),c=e.valueToCode(n,"cc",e.ORDER_ATOMIC),v=e.valueToCode(n,"bcc",e.ORDER_ATOMIC),D=e.valueToCode(n,"subject",e.ORDER_ATOMIC),P=n.getFieldValue("NAME"),it="{";return it+='"from":'+r+",",it+='"to":'+s+",",it+='"cc":'+c+",",it+='"bcc":'+v+",",it+='"subject":'+D+",",it+='"body":'+e.valueToCode(n,"body",e.ORDER_ATOMIC)+",",it+='"typeEmail":"'+P+'"',[""+(it+="}"),e.ORDER_NONE]}},W.fieldXML=function(){return'<block type="blockemail">\n        <value name="from">\n            <shadow type="text">\n                <field name="TEXT">test@test.com</field>\n            </shadow>\n        </value>\n        <value name="to">\n            <shadow type="text">\n                <field name="TEXT">ignatandrei@yahoo.com</field>\n            </shadow>\n        </value>\n        <value name="cc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="bcc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="subject">\n            <shadow type="text">\n                <field name="TEXT">My test email</field>\n            </shadow>\n        </value>\n        <value name="body">\n            <shadow type="text">\n                <field name="TEXT">This is the body</field>\n            </shadow>\n        </value>\n            </block>\n        <block type="sendinblue">\n        <value name="APIKey">\n            <shadow type="text">\n                <field name="TEXT">Please put here the API Key from SendInBlue</field>\n            </shadow>\n            \n        </value>\n        <value name="email">\n            <shadow type="blockemail">\n            </shadow>\n            \n        </value>\n        \n        </block>\n'}},19544:(H,W)=>{W.definitionBlocks=function(f,y){f.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.exportfile=function(t){return"exportToFile("+y.valueToCode(t,"fileName",0)+","+y.valueToCode(t,"contentFile",0)+","+y.valueToCode(t,"convertToByte",0)+");\n"}},W.fieldXML=function(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},30721:(H,W)=>{W.definitionBlocks=function(f,y){f.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.filterList=function(g){var e=y.valueToCode(g,"LIST",y.ORDER_MEMBER)||"[]",t=y.valueToCode(g,"Logic",y.ORDER_ATOMIC);"string"==typeof t&&(t=t.substr(1,t.length-2));var n="";return n+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e+")).filter(function (item){ return "+t+";})",[n+="",y.ORDER_FUNCTION_CALL]},f.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.mapList=function(g){var e=y.valueToCode(g,"LIST",y.ORDER_MEMBER)||"[]",t=y.valueToCode(g,"Logic",y.ORDER_ATOMIC);"string"==typeof t&&(t=t.substr(1,t.length-2));var n="";return n+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e+")).map(function (item){ return "+t+";})",[n+="",y.ORDER_FUNCTION_CALL]},f.reduceList={init:function(){this.appendDummyInput().appendField("reduceList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("initValue").setCheck(null).appendField("initialValue"),this.appendValueInput("Logic").setCheck("String").appendField("callback(acc,curVal,index, array)=>"),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.reduceList=function(g){var e=y.valueToCode(g,"LIST",y.ORDER_MEMBER)||"[]",t="";try{t=y.valueToCode(g,"initValue",y.ORDER_ATOMIC)}catch(s){window.alert(s)}var n=y.valueToCode(g,"Logic",y.ORDER_ATOMIC);"string"==typeof n&&(n=n.substr(1,n.length-2));var r="";return r+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e+")).reduce(function (acc,curVal,index,array){ "+n+";}",t&&t.toString().length>0&&(r+=","+t),r+=")",[r+="",y.ORDER_FUNCTION_CALL]}},W.fieldXML=function(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="initValue">\n                    <shadow type="text">\n                        <field name="TEXT"> </field>\n                    </shadow>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="reduceList">\n        <value name="LIST">\n        <block type="variables_get">\n                <field name="VAR">list</field>\n            </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">...</field>\n                </shadow>\n            </value>\n        </block>\n        </category>\n\n'}},79118:(H,W,f)=>{const y=f(45797);W.definitionBlocks=function(g,e){g.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},e.window_open=function(r){var s=e.valueToCode(r,"TEXT",99)||"''";return"if((typeof "+s+' == "object") && ("to" in '+s+')){open("mailto:'+s.to+'")}else{ open('+s+")};\n"},g.text_message={init:function(){this.jsonInit({message0:"alert %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},e.text_message=function(r){return"alert1("+(e.valueToCode(r,"TEXT",99)||"''")+");\n"},g.text_print_return={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("print return").appendField(new y.FieldLabelSerializable(""),"NAME"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},e.text_print_return=function(r){var s=e.valueToCode(r,"TEXT",0)||"''";return["(function(){window.alert("+s+");\n;return ("+s+");}())\n",99]},g.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.valuefromtext=function(r){return["getIDProp("+e.valueToCode(r,"IdOfText",0)+","+(e.valueToCode(r,"ValueToObtain",0)||'"value"')+")",99]}},W.fieldXML=function(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_print_return"></block>  \n    <block type="text_prompt_ext"></block>\n    <block type="text_message"></block>\n    \n    '}},4283:(H,W,f)=>{H.exports={defaultBlocks:f(18638),filterBlocks:f(30721),waitBlocks:f(63889),xhrBlocks:f(23087),propBlocks:f(83033),guiBlocks:f(79118),convertersBlocks:f(54256),exportFileBlock:f(19544),createObjectBlocks:f(97404),currentDateBlock:f(50188),dateFromTextBlock:f(71320),waitBlocks:f(3322),commentBlock:f(11124),auth0Blocks:f(29130),windowsCreds:f(40054),trycatchFinBlock:f(88073),chartBlock:f(34122),emailBlocks:f(15889),htmlblocks:f(19842),ttsBlock:f(87804),pianoBlock:f(62303),HTMLParserBlocks:f(67105)}},62303:(H,W,f)=>{f(45797),W.definitionBlocks=function(g,e){g.pianoBlock={init:function(){this.appendValueInput("Note").setCheck("String").appendField("Note(A-G)"),this.appendValueInput("Sharp").setCheck("Boolean").appendField("#"),this.appendValueInput("Octave").setCheck("Number").appendField("Octave"),this.appendValueInput("Duration").setCheck("Number").appendField("Duration"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://github.com/keithwhor/audiosynth")}},e.pianoBlock=function(t){var n=e.valueToCode(t,"Note",e.ORDER_ATOMIC),v="";return"true"==(e.valueToCode(t,"Sharp",e.ORDER_ATOMIC)||!1)&&(v="#"),"playPiano("+n+v+","+e.valueToCode(t,"Octave",e.ORDER_ATOMIC)+","+(e.valueToCode(t,"Duration",e.ORDER_ATOMIC)||2)+");\n"},g.cmajor={init:function(){this.appendDummyInput().appendField("CMajor "),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.cmajor=function(t){return['["C","D","E","F","G","A","B"]',e.ORDER_NONE]}},W.fieldXML=function(){return'<block type="pianoBlock">\n        <value name="Note">\n            <shadow type="text">\n            <field name="TEXT">C</field></shadow>\n        </value>       \n        <value name="Octave">\n            <shadow type="math_number">\n            <field name="NUM">4</field></shadow>\n        </value>       \n        <value name="Sharp">\n            <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field></shadow>\n        </value>       \n        \n        <value name="Duration">\n            <shadow type="math_number">\n            <field name="NUM">2</field></shadow>\n        </value>       \n        </block>\n        <block type="cmajor"></block>\n\n'}},83033:(H,W,f)=>{const y=f(45797);W.definitionBlocks=function(g,e){g.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new y.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new y.FieldLabelSerializable(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(new y.FieldLabelSerializable("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},e.modifyproperty=function(c){return e.valueToCode(c,"ObjectToChange",0)+"["+e.valueToCode(c,"PropertyName",0)+"]="+e.valueToCode(c,"NewValue",0)+";"},g.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new y.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new y.FieldLabelSerializable("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},e.getproperty=function(c){return['(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e.valueToCode(c,"ObjectToChange",0)+"))["+e.valueToCode(c,"PropertyName",0)+"]",99]}},W.fieldXML=function(){return'\n    \n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n'}},88073:(H,W)=>{W.definitionBlocks=function(f,y){f.trycatchfinally={init:function(){this.appendStatementInput("TRY").appendField("try"),this.appendStatementInput("CATCH").appendField("catch"),this.appendStatementInput("FINALLY").appendField("finally"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.trycatchfinally=function(t){var c="try {\n"+y.statementToCode(t,"TRY")+"}\n";return(c+="catch(err){\n errHandler(JSON.stringify(err));\n"+y.statementToCode(t,"CATCH")+"\n}")+"finally{\n "+y.statementToCode(t,"FINALLY")+"\n}\n"}},W.fieldXML=function(){return'\n    \n    <block type="trycatchfinally">\n    \n</block>\n'}},3322:(H,W)=>{W.definitionBlocks=function(f,y){f.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.wait=function(e){return"waitTime("+(y.valueToCode(e,"VALUE",y.ORDER_ATOMIC)||"")+");"},f.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.wait_until=function(e){return"waitTime(("+(y.valueToCode(e,"VALUE",0)||"")+"-new Date())/1000);"}},W.fieldXML=function(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}},63889:(H,W)=>{W.definitionBlocks=function(f,y){f([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),y.wait_seconds=function(g){return"waitForSeconds("+Number(g.getFieldValue("SECONDS"))+");\n"}},W.fieldXML=function(){return'\n  <block type="wait_seconds"></block>\n'}},23087:(H,W,f)=>{const y=f(45797);W.definitionBlocks=function(g,e){g.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("at domain put (localSite) or *")}},e.headersbeforehttp=function(r){var s=e.valueToCode(r,"HttpDomain",0)||"(localSite)",D="\n";return D+="{\n",D+="if(!("+s+" in headersForDomain))\n",D+="{\n",D+="headersForDomain["+s+"]=[];\n",D+="};\n",D+="var arr = headersForDomain["+s+"];\n",D+="arr.push({name:"+e.valueToCode(r,"HeaderName",0)+", value:"+e.valueToCode(r,"HeaderValue",0)+"});\n",D+='//alert("a" + JSON.stringify(arr)+"a");\n',(D+='//alert("a" + JSON.stringify(headersForDomain['+s+'])+"a");\n')+"};\n"},g.httprequest={init:function(){this.appendDummyInput().appendField(new y.FieldDropdown([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(new y.FieldDropdown([["GET","GET"],["POST","POST"],["PUT","PUT"],["DELETE","DELETE"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},e.httprequest=function(r){var s=r.getFieldValue("TypeOutput"),c=r.getFieldValue("TypeRequest"),v=e.valueToCode(r,"TheUrl",0),D=e.valueToCode(r,"Data",0),P="";switch(c.toString()){case"GET":P="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+v+") )";break;case"POST":P="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+v,D&&(P+=","+D),P+=") )";break;case"DELETE":P="(function(url,data){ var res=JSON.parse(deleteXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+v,D&&(P+=","+D),P+=") )";break;case"PUT":P="(function(url,data){ var res=JSON.parse(putXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+v,D&&(P+=","+D),P+=") )";break;default:alert("Do not understand : "+c.toString())}var G=P;return"JSON"===s&&(G="JSON.parse("+G+")"),[G,99]}},W.fieldXML=function(){return'\n    \n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n<block type="text_print">\n<value name="TEXT">\n\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n</block>\n</value>\n</block>    \n\n'}},20070:(H,W,f)=>{var y=f(48926).default;const g=f(45797);H.exports=class{constructor(r){Xc(this,"GenerateBlocks",[]),Xc(this,"GenerateFunctions",[]),Xc(this,"fieldXMLObjects",[]),Xc(this,"fieldXMLFunctions",[]),Xc(this,"hasError",!0),Xc(this,"paths",[]),Xc(this,"name",""),Xc(this,"operations",[]),Xc(this,"tagsSwagger",[]),Xc(this,"cacheCategSwaggerFromPaths",[]),Xc(this,"openApiDocument",null),Xc(this,"basePath",""),this.swaggerUrl=r}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}_${this.name}`}metaBlocks(){var r=this;return function(s,c){var v;s[v=`meta_swagger_controllers_${r.name}`]={init:function(){this.appendDummyInput().appendField("categories_"+r.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(r.swaggerUrl)}},c[v]=function(D){var G=r.findCategSwaggerFromPaths().map(q=>({name:q}));return G={name:r.name,categories:G},[JSON.stringify(G),c.ORDER_NONE]},s[v=`meta_swagger_controllers_actions_${r.name}`]={init:function(){this.appendDummyInput().appendField("categories_actions"+r.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(r.swaggerUrl)}},c[v]=function(D){var G=r.findCategSwaggerFromPaths().map(q=>({name:q,ops:r.findfieldXMLFunctions(q).map(bt=>bt.id).filter(bt=>bt.length>0)}));return G={name:r.name,categories:G},[JSON.stringify(G),c.ORDER_NONE]}}}findfieldXMLFunctions(r){Object.keys(this.openApiDocument.paths);var v=this.operations.filter(P=>P.controller==r);return this.fieldXMLFunctions.filter(P=>{if(""==P.id)return!0;var G=P.id+"/",it=!1;return v.forEach(q=>{G.startsWith(q.id)&&(it=!0)}),!!it||(v.forEach(q=>{var bt=q.id.substring(0,q.id.lastIndexOf("/"))+"{";G.startsWith(bt)&&(it=!0)}),it)})}findCategsFromTags(){var r=this.openApiDocument.paths,s=Object.keys(r),c=this;s.forEach(function(v){var D=r[v];D&&Object.keys(D).forEach(function(G){var it=D[G].tags;it&&it.length>0&&it.forEach(function(q){c.cacheCategSwaggerFromPaths.includes(q)||c.cacheCategSwaggerFromPaths.push(q),c.operations.push({controller:q,id:v})})})})}findCategSwaggerFromPaths(){if(this.findCategsFromTags(),this.cacheCategSwaggerFromPaths.length>0)return this.cacheCategSwaggerFromPaths;var r=this.paths.filter(c=>c&&c.id&&c.id.length>0).map(c=>{for(var v=c.id.length,D=c.id.indexOf("{");D>0;){var P=c.id.indexOf("}",D);if(v-P<2){c.id=c.id.substring(0,D);break}D=c.id.indexOf("{",P)}return c}).map(c=>(c.id.lastIndexOf("/")!=c.id.length-1&&(c.id+="/"),c));this.operations=r.filter(c=>c.nrOps>1).map(c=>({arr:c.id.split("/").filter(D=>D.length>0),id:c.id})).map(c=>({controller:c.arr[c.arr.length-1],id:c.id}));var s=r.filter(c=>1==c.nrOps).map(c=>({arr:c.id.split("/").filter(v=>v.length>0),id:c.id})).map(c=>1==c.arr.length?{controller:c.arr[0],id:c.id}:{controller:c.arr[c.arr.length-2],id:c.id});return this.operations.push(...s),this.cacheCategSwaggerFromPaths=[...new Set(this.operations.map(c=>c.controller))],this.cacheCategSwaggerFromPaths}categSwagger(){var r=this.findHostNameRegular();(r=r.replaceAll(".","")).length>5&&r.substring(0,5);var v=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+v+'"></category><category name="AllApi" custom="AllApi_'+v+'"></category>'}findRootSite(){var D,P,r="";if((null==(P=null==(D=this.openApiDocument)?void 0:D.host)?void 0:P.length)>0){var s=this.openApiDocument.host;r=Array.isArray(s)?this.openApiDocument.schemes[0]+"://"+s[0]:this.openApiDocument.schemes[0]+"://"+s}else r=this.swaggerUrl;var c="";if(r.startsWith("http://")||r.startsWith("https://")){var v=new URL(r);c=v.protocol+"//"+v.hostname,v.port.length>0&&(c+=":"+v.port)}return c}findHostNameRegular(){var P,G,it,r="";if((null==(G=null==(P=this.openApiDocument)?void 0:P.host)?void 0:G.length)>0){var s=this.openApiDocument.host;r=Array.isArray(s)?this.openApiDocument.schemes[0]+"://"+s[0]:this.openApiDocument.schemes[0]+"://"+s}else r=this.swaggerUrl;var c="(localSite)";if(r.startsWith("http://")||r.startsWith("https://")){var v=new URL(r),D=null!=(it=v.port)?it:80;c=v.hostname+D}return c.replaceAll(".","")}showWindowToLoad(r,s){try{vex.registerPlugin(f(Object(function(){var P=new Error("Cannot find module 'vex-dialog'");throw P.code="MODULE_NOT_FOUND",P}())))}catch(D){}s(window.prompt("Swagger url",r))}ParseSwagger(){var r=this;return y(function*(){var G,s=r;s.fieldXMLObjects.push(`<label text="${s.swaggerUrl}"></label>`),s.fieldXMLFunctions.push({id:"",gui:`<label text="${s.swaggerUrl}"></label>`});var c=null;try{c=(yield f(47511).default(r.swaggerUrl)).spec}catch(it){return console.error(`parseSwagger ${r.swaggerUrl}`,it),s.fieldXMLObjects.push("<label text='Error parsing!'></label>"),r}r.hasError=!1,r.basePath=c.basePath||"";var D=null==(G=c.components)?void 0:G.schemas;return(null==D||null==D)&&(D=c.definitions),D?Object.keys(D).sort().forEach(function(it){var q=D[it],bt=s.findProperties(q),Ft=`<block type="${it}">`;bt.forEach(function(gt){if(gt.value&&gt.value.type){var wt=s.GenerateShadowField(gt.value.type,gt.key);wt.length>0&&(Ft+=`<value name="val_${gt.key}">${wt}</value>`)}}),s.fieldXMLObjects.push(Ft+="</block>"),s.GenerateBlocks.push(s.GenerateBlock(q,it))}):console.log("_A",c),c.paths&&Object.keys(c.paths).forEach(function(it){var q=c.paths[it];s.paths.push({id:it,nrOps:Object.keys(q).length}),Object.keys(q).forEach(function(bt){s.GenerateFunctions.push(s.GenerateFunction(q,it,q[bt],bt))})}),s.openApiDocument=c,s})()}findProperties(r){var s=[];return r.properties&&Object.keys(r.properties).forEach(c=>{s.push({key:c,value:r.properties[c]})}),s}GenerateNameFunction(r,s,c,v){return v+"_"+s.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateShadowField(r,s,c){switch(r){case"integer":return`<block type='math_number'><field name='NUM'>${c||0}</field></block>`;case"string":return`<block type='text'><field name='TEXT'>${c||`please enter ${s}`}</field></block>`;case"boolean":return`<block type='logic_boolean'><field name='BOOL'>${c||"FALSE"}</field></block>`;case"array":return'<block type="lists_create_with"> <mutation items="0"></mutation></block>';default:return""}}GenerateFunction(r,s,c,v){var D=this,P=D.GenerateNameFunction(r,s,c,v),it=c,q=`<block type="text_print"> <value name="TEXT"><block type="${P}">`;it.parameters&&it.parameters.forEach(Kt=>{if(Kt.type)(It=D.GenerateShadowField(Kt.type,Kt.name)).length>0&&(q+=`<value name="val_${Kt.name}">${It}</value>`);else if(Kt.schema&&Kt.schema.type){var It;(It=D.GenerateShadowField(Kt.schema.type,Kt.name)).length>0&&(q+=`<value name="val_${Kt.name}">${It}</value>`)}});var bt="",Ft="";try{var gt=D.findRootSite();if((gt||"").length>0){var wt=new URL(gt);bt=wt.hostname,Ft=wt.port}}catch(Kt){console.log("find root error",Kt)}var Bt=D.GenerateShadowField("string","override_host",bt=bt||" ");return q+=`<value name="override_Host">${Bt}</value>`,Bt=D.GenerateShadowField("integer","override_port",Ft=Ft||"0"),q+=`<value name="override_Port">${Bt}</value>`,q+="</block></value>",D.fieldXMLFunctions.push({id:s,gui:q+="</block>"}),function(Kt,It){Kt[P]={init:function(){var St=v;switch(v.toString().toLowerCase()){case"get":St="",this.setColour(210);break;case"post":St="",this.setColour(165);break;case"put":St="",this.setColour(40);break;case"delete":St="",this.setColour(10);break;default:console.log(`not found ${v}`),this.setColour(10)}for(var lt=s,ft=D.findCategSwaggerFromPaths(),ht=0;ht<ft.length;ht++){var Gt="/"+ft[ht]+"/",ut=s.indexOf(Gt);if(ut>-1){var ot=s.substring(ut+Gt.length);ot.length<lt.length&&(lt=ot)}}lt.length>25&&(lt=lt.substring(0,25)+"..."),this.appendDummyInput().appendField(new g.FieldImage(`assets/httpImages/${v}.png`,90,20,v)).appendField(`${St} ${lt}`);var st=D.findRootSite();if(it.parameters&&it.parameters.forEach(At=>{var re=At.name;if(At.required&&(re+="*"),At.type)re+=":"+At.type;else if(At.schema)if(At.schema.enum&&"$$ref"in At.schema){var ve=At.schema.$$ref.split("/");re+="=>"+ve[ve.length-1]}else if(At.schema.type)if("object"==At.schema.type){var oe=At.schema.$$ref||"";oe.length>0&&(re+=":"+(oe=oe.substring(oe.lastIndexOf("/")+1)))}else re+=":"+At.schema.type;this.appendValueInput(`val_${At.name}`).appendField(re)}),it.requestBody){var Z="";if(it.requestBody.content){var Zt=it.requestBody.content["application/json"];if(Zt&&Zt.schema){var vt=Zt.schema.$$ref;vt&&(Z="=>"+vt.substring(vt.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+Z).setCheck()}this.appendValueInput("override_Host").appendField("override Host"),this.appendValueInput("override_Port").appendField("override Port"),this.setTooltip(`${v} ${st}${s}`),this.setOutput(!0,"")}},It[P]=function(St){var Gt=D.openApiDocument.paths[s][v],ut=[];"parameters"in Gt&&(ut=Gt.parameters);var ot=!1,st=ut.filter(we=>"body"==we.in).length>0;(st||"requestBody"in Gt)&&(ot=!0);var Z={},Zt={};ot&&(Z.val_values=It.valueToCode(St,"val_values",0),Zt.val_values=Z.val_values),ut.forEach(we=>{Z[`val_${we.name}`]=It.valueToCode(St,`val_${we.name}`,0)});var vt=ut.map(we=>we.name);ot&!st&&vt.push("values"),vt.push("extraData"),ut.map(we=>`\${obj['val_${we.name}']},`);var re="function(";re+=vt.join(","),re+="){\n",re+='var rootSite="'+D.findRootSite()+'";\n',re+="if(extraData){\n",re+="if(extraData.url && extraData.url.host && extraData.url.host.length>0 ){\n",re+="rootSite =  changeHost(rootSite, extraData.url.host);\n",re+="};\n",re+="if(extraData.url && extraData.url.port && extraData.url.port.toString().length>0 ){\n",re+="rootSite  =changePort(rootSite , extraData.url.port);\n",re+="};\n",re+="};\n",re+='var strUrl =rootSite +"'+D.basePath+s+'";\n';var ve=ut.filter(we=>"query"==we.in);if(ve.length>0){re+='strUrl+="?";\n;';var oe=ve.map(we=>`${we.name}={`+we.name+"}").join("&");re+='strUrl += "'+oe+'";\n;'}var Ie=ut.filter(we=>"path"==we.in||"query"==we.in).map(we=>`\n          //this gives error cannot read property 'call' of undefined in acorn\n          //strUrl = strUrl.replace("{${we.name}}",${we.name});\n          {\n            var replaceFInd = "{${we.name}}";\n            var index= strUrl.indexOf(replaceFInd);\n            if(index>=0){\n              var strUrlReplace = strUrl.substring(0,index)+ ${we.name} + strUrl.substring(index+replaceFInd.length);\n              strUrl = strUrlReplace;\n            }\n\n          };`);if(re+=Ie.join("\n"),re+=`\n{var res= ${v}Xhr(strUrl`,ot){var Re="values";st&&(Re=ut.filter(we=>"body"==we.in)[0].name),re+=`,JSON.stringify(${Re})`}re+=");\n",re+="var resJS=JSON.parse(res);\n",re+="if(resJS.statusOK) return resJS.text;\n",re+="errHandler(res);\n}\n",re+="}",re+="(",ut.forEach(we=>{re+=Z[`val_${we.name}`]+","}),ot&!st&&(re+=Zt.val_values+",");var je="url:{notImportant:1",Si=It.valueToCode(St,"override_Host",0);(Si=Si||"").length>0&&(je+=`,host:${Si}`);var Ze=It.valueToCode(St,"override_Port",0);return(Ze=Ze||"").length>0&&(je+=`,port:${Ze}`),re+=`{${je+="}"}}\n`,[re+=")",99]}}}GenerateBlock(r,s){var c=this,v=s,P=c.findProperties(r);return function(G,it){G[v]={init:function(){var q=!1,bt=[];r.enum&&(q=!0,bt=Object.keys(r.enum).map(r["x-enumNames"]?wt=>[r["x-enumNames"][wt],wt]:wt=>[r.enum[wt],wt]));var gt=this.appendDummyInput().appendField(s);q?(bt=bt.map(wt=>[wt[0].toString(),wt[1].toString()]),gt.appendField(new g.FieldDropdown(bt),`val_${s}`)):P.forEach(wt=>{var lt,Bt=wt.key;if(wt.value.nullable&&0==wt.value.nullable&&(Bt+="*"),null==(lt=wt.value)?void 0:lt.type){var Kt=wt.value.type||"";if("object"==Kt){var It=wt.value.$$ref||"";It.length>0&&(Kt=It.substring(It.lastIndexOf("/")+1))}Bt+=":"+Kt}wt.value.$ref&&(Bt+="->"+wt.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${wt.key}`).appendField(`${Bt}`)}),this.setOutput(!0,v)}},it[v]=function(q){{var bt=!1;r.enum&&(bt=!0);var Ft=c.findProperties(r);const Kt=99,It=0;var gt="",wt=[];return Ft.forEach(St=>{let lt=it.valueToCode(q,`val_${St.key}`,It);""===lt&&(lt="null"),null==lt&&(lt="null"),wt.push(`"${St.key}":${lt}`)}),gt="{ "+wt.join(",")+" }",bt&&(gt=q.getFieldValue(`val_${s}`)),[gt,Kt]}}}}TranslateToBlocklyType(r){return"integer"==r?"Number":"string"==r?"String":"bool"==r?"Boolean":"array"==r?"Array":(console.error("not found TranslateToBlocklyType item"+r),"not found type"+r)}}},21086:(H,W,f)=>{H.exports={parseSwagger:f(18706),parseData:f(20070)}},18706:(H,W,f)=>{var y=f(48926).default;W.parseSwagger=function(){var t=y(function*(n){var G;new(f(20070))(n);var c=[],P=(yield f(53096).default(n)).response;return(null==(G=P.components)?void 0:G.schemas)&&Object.keys(P.components.schemas).forEach(function(it){c.push(function(t,n){var r=n;return t.properties&&Object.keys(t.properties).forEach(s=>{}),function(s,c){s[r]={init:function(){this.appendDummyInput().appendField(n),this.setOutput(!0,r)}}}}(P.components.schemas[it],it))}),c});return function(n){return t.apply(this,arguments)}}(),W.parseSwagger1=function(t){return f(53096).default(t)}},96609:(H,W,f)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.Api=void 0;var y=f(35414);W.Api=function(t,n){void 0===n&&(n={}),this.entrypoint=t,y.assignSealed(this,n)}},66639:(H,W,f)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.Field=void 0;var y=f(35414);W.Field=function(t,n){void 0===n&&(n={}),this.name=t,y.assignSealed(this,n)}},57175:(H,W,f)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.Resource=void 0;var y=f(35414);W.Resource=function(t,n,r){void 0===r&&(r={}),this.name=t,this.url=n,y.assignSealed(this,r)}},2586:(H,W,f)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.removeTrailingSlash=void 0;var g=f(59312).__importDefault(f(37901)),e=f(66639),t=f(57175),n=f(61817);W.removeTrailingSlash=function(c){return c.endsWith("/")&&(c=c.slice(0,-1)),c},W.default=function(c,v){return n.getResources(c.paths).map(function(G){var it=G.replace("/",""),q=W.removeTrailingSlash(v)+G,bt=Object.keys(c.paths[G])[0],Ft=c.paths[G][bt];if(!Ft.tags)throw new Error;var gt=Ft.tags[0];if(!c.components)throw new Error;if(!c.components.schemas)throw new Error;var Bt=c.components.schemas[gt].properties;if(!Bt)throw new Error;var Kt=Object.keys(Bt),It=g.default(c,["components","schemas",gt,"required"],[]),St=Kt.map(function(lt){return new e.Field(lt,{id:null,range:null,reference:null,required:!!It.find(function(ft){return ft===lt}),description:g.default(Bt[lt],"description","")})});return new t.Resource(it,q,{id:null,title:gt,fields:St,readableFields:St,writableFields:St})})}},53096:(H,W,f)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});var y=f(59312),g=f(96609),e=y.__importStar(f(2586));W.default=function(n){return n=e.removeTrailingSlash(n),fetch(n).then(function(r){return Promise.all([r,r.json()])}).then(function(r){var s=r[0],c=r[1],v=c.info.title,D=e.default(c,n);return Promise.resolve({api:new g.Api(n,{title:v,resources:D}),response:c,status:s.status})},function(r){var s=r[0],c=r[1];return Promise.reject({api:new g.Api(n,{resources:[]}),response:c,status:s.status})})}},35414:(H,W)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.assignSealed=void 0,W.assignSealed=function(y,g){Object.keys(g).forEach(function(e){Object.defineProperty(y,e,{writable:!0,enumerable:!0,configurable:!1,value:g[e]})})}},61817:(H,W)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.getResources=void 0,W.getResources=function(y){var g=[];return Object.keys(y).forEach(function(e){e.includes("/{id}")||g.find(function(t){return t.startsWith("/"+e.split("/")[1])})||g.push(e)}),g}},54678:function(H,W,f){var g,e;g=[f(33164)],void 0!==(e=function(t){"use strict";return t}.apply(W,g))&&(H.exports=e)},33164:function(H,W){var g;void 0!==(g=function(){"use strict";var e={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return e.CONNECTING_SNAP_RADIUS=e.SNAP_RADIUS,e.CURRENT_CONNECTION_PREFERENCE=8,e.BUMP_DELAY=250,e.BUMP_RANDOMNESS=10,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.connectionTypes.INPUT_VALUE]=e.connectionTypes.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.OUTPUT_VALUE]=e.connectionTypes.INPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.NEXT_STATEMENT]=e.connectionTypes.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.connectionTypes.PREVIOUS_STATEMENT]=e.connectionTypes.NEXT_STATEMENT,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",e.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",e.utils={},e.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),e.Msg={},e.utils.global.Blockly||(e.utils.global.Blockly={}),e.utils.global.Blockly.Msg||(e.utils.global.Blockly.Msg=e.Msg),e.utils.colour={},e.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var n=e.utils.colour.names[t];if(n||(n="0x"==t.substring(0,2)?"#"+t.substring(2):t,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var r=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return r&&(t=Number(r[1]),n=Number(r[2]),r=Number(r[3]),0<=t&&256>t&&0<=n&&256>n&&0<=r&&256>r)?e.utils.colour.rgbToHex(t,n,r):null},e.utils.colour.rgbToHex=function(t,n,r){return n=t<<16|n<<8|r,16>t?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},e.utils.colour.hexToRgb=function(t){return(t=e.utils.colour.parse(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},e.utils.colour.hsvToHex=function(t,n,r){var s=0,c=0,v=0;if(0==n)v=c=s=r;else{var D=Math.floor(t/60),P=t/60-D;t=r*(1-n);var G=r*(1-n*P);switch(n=r*(1-n*(1-P)),D){case 1:s=G,c=r,v=t;break;case 2:s=t,c=r,v=n;break;case 3:s=t,c=G,v=r;break;case 4:s=n,c=t,v=r;break;case 5:s=r,c=t,v=G;break;case 6:case 0:s=r,c=n,v=t}}return e.utils.colour.rgbToHex(Math.floor(s),Math.floor(c),Math.floor(v))},e.utils.colour.blend=function(t,n,r){return(t=e.utils.colour.parse(t))&&(n=e.utils.colour.parse(n))?(t=e.utils.colour.hexToRgb(t),n=e.utils.colour.hexToRgb(n),e.utils.colour.rgbToHex(Math.round(n[0]+r*(t[0]-n[0])),Math.round(n[1]+r*(t[1]-n[1])),Math.round(n[2]+r*(t[2]-n[2])))):null},e.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},e.utils.Coordinate=function(t,n){this.x=t,this.y=n},e.utils.Coordinate.equals=function(t,n){return t==n||!(!t||!n)&&t.x==n.x&&t.y==n.y},e.utils.Coordinate.distance=function(t,n){var r=t.x-n.x;return t=t.y-n.y,Math.sqrt(r*r+t*t)},e.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.utils.Coordinate.difference=function(t,n){return new e.utils.Coordinate(t.x-n.x,t.y-n.y)},e.utils.Coordinate.sum=function(t,n){return new e.utils.Coordinate(t.x+n.x,t.y+n.y)},e.utils.Coordinate.prototype.clone=function(){return new e.utils.Coordinate(this.x,this.y)},e.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},e.utils.Coordinate.prototype.translate=function(t,n){return this.x+=t,this.y+=n,this},e.utils.Rect=function(t,n,r,s){this.top=t,this.bottom=n,this.left=r,this.right=s},e.utils.Rect.prototype.contains=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},e.utils.string={},e.utils.string.startsWith=function(t,n){return 0==t.lastIndexOf(n,0)},e.utils.string.shortestStringLength=function(t){return t.length?t.reduce(function(n,r){return n.length<r.length?n:r}).length:0},e.utils.string.commonWordPrefix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var r=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var c=t[0][s],v=1;v<t.length;v++)if(c!=t[v][s])return r;" "==c&&(r=s+1)}for(v=1;v<t.length;v++)if((c=t[v][s])&&" "!=c)return r;return n},e.utils.string.commonWordSuffix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var r=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var c=t[0].substr(-s-1,1),v=1;v<t.length;v++)if(c!=t[v].substr(-s-1,1))return r;" "==c&&(r=s+1)}for(v=1;v<t.length;v++)if((c=t[v].charAt(t[v].length-s-1))&&" "!=c)return r;return n},e.utils.string.wrap=function(t,n){t=t.split("\n");for(var r=0;r<t.length;r++)t[r]=e.utils.string.wrapLine_(t[r],n);return t.join("\n")},e.utils.string.wrapLine_=function(t,n){if(t.length<=n)return t;for(var r=t.trim().split(/\s+/),s=0;s<r.length;s++)r[s].length>n&&(n=r[s].length);s=-1/0;var c=1;do{var v=s,D=t;t=[];var P=r.length/c,G=1;for(s=0;s<r.length-1;s++)G<(s+1.5)/P?(G++,t[s]=!0):t[s]=!1;t=e.utils.string.wrapMutate_(r,t,n),s=e.utils.string.wrapScore_(r,t,n),t=e.utils.string.wrapToText_(r,t),c++}while(s>v);return D},e.utils.string.wrapScore_=function(t,n,r){for(var s=[0],c=[],v=0;v<t.length;v++)s[s.length-1]+=t[v].length,!0===n[v]?(s.push(0),c.push(t[v].charAt(t[v].length-1))):!1===n[v]&&s[s.length-1]++;for(t=Math.max.apply(Math,s),v=n=0;v<s.length;v++)n-=2*Math.pow(Math.abs(r-s[v]),1.5),n-=Math.pow(t-s[v],1.5),-1!=".?!".indexOf(c[v])?n+=r/3:-1!=",;)]}".indexOf(c[v])&&(n+=r/4);return 1<s.length&&s[s.length-1]<=s[s.length-2]&&(n+=.5),n},e.utils.string.wrapMutate_=function(t,n,r){for(var c,s=e.utils.string.wrapScore_(t,n,r),v=0;v<n.length-1;v++)if(n[v]!=n[v+1]){var D=[].concat(n);D[v]=!D[v],D[v+1]=!D[v+1];var P=e.utils.string.wrapScore_(t,D,r);P>s&&(s=P,c=D)}return c?e.utils.string.wrapMutate_(t,c,r):n},e.utils.string.wrapToText_=function(t,n){for(var r=[],s=0;s<t.length;s++)r.push(t[s]),void 0!==n[s]&&r.push(n[s]?"\n":" ");return r.join("")},e.utils.Size=function(t,n){this.width=t,this.height=n},e.utils.Size.equals=function(t,n){return t==n||!(!t||!n)&&t.width==n.width&&t.height==n.height},e.utils.style={},e.utils.style.getSize=function(t){if("none"!=e.utils.style.getStyle_(t,"display"))return e.utils.style.getSizeWithDisplay_(t);var n=t.style,r=n.display,s=n.visibility,c=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var v=t.offsetWidth;return t=t.offsetHeight,n.display=r,n.position=c,n.visibility=s,new e.utils.Size(v,t)},e.utils.style.getSizeWithDisplay_=function(t){return new e.utils.Size(t.offsetWidth,t.offsetHeight)},e.utils.style.getStyle_=function(t,n){return e.utils.style.getComputedStyle(t,n)||e.utils.style.getCascadedStyle(t,n)||t.style&&t.style[n]},e.utils.style.getComputedStyle=function(t,n){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[n]||t.getPropertyValue(n))||""},e.utils.style.getCascadedStyle=function(t,n){return t.currentStyle?t.currentStyle[n]:null},e.utils.style.getPageOffset=function(t){var n=new e.utils.Coordinate(0,0);t=t.getBoundingClientRect();var r=document.documentElement;return r=new e.utils.Coordinate(window.pageXOffset||r.scrollLeft,window.pageYOffset||r.scrollTop),n.x=t.left+r.x,n.y=t.top+r.y,n},e.utils.style.getViewportPageOffset=function(){var t=document.body,n=document.documentElement;return new e.utils.Coordinate(t.scrollLeft||n.scrollLeft,t.scrollTop||n.scrollTop)},e.utils.style.setElementShown=function(t,n){t.style.display=n?"":"none"},e.utils.style.isRightToLeft=function(t){return"rtl"==e.utils.style.getStyle_(t,"direction")},e.utils.style.getBorderBox=function(t){var n=e.utils.style.getComputedStyle(t,"borderLeftWidth"),r=e.utils.style.getComputedStyle(t,"borderRightWidth"),s=e.utils.style.getComputedStyle(t,"borderTopWidth");return t=e.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(s),right:parseFloat(r),bottom:parseFloat(t),left:parseFloat(n)}},e.utils.style.scrollIntoContainerView=function(t,n,r){t=e.utils.style.getContainerOffsetToScrollInto(t,n,r),n.scrollLeft=t.x,n.scrollTop=t.y},e.utils.style.getContainerOffsetToScrollInto=function(t,n,r){var s=e.utils.style.getPageOffset(t),c=e.utils.style.getPageOffset(n),v=e.utils.style.getBorderBox(n),D=s.x-c.x-v.left;return s=s.y-c.y-v.top,c=e.utils.style.getSizeWithDisplay_(t),t=n.clientWidth-c.width,c=n.clientHeight-c.height,v=n.scrollLeft,n=n.scrollTop,r?(v+=D-t/2,n+=s-c/2):(v+=Math.min(D,Math.max(D-t,0)),n+=Math.min(s,Math.max(s-c,0))),new e.utils.Coordinate(v,n)},e.utils.userAgent={},function(t){function n(s){return-1!=r.indexOf(s.toUpperCase())}e.utils.userAgent.raw=t;var r=e.utils.userAgent.raw.toUpperCase();e.utils.userAgent.IE=n("Trident")||n("MSIE"),e.utils.userAgent.EDGE=n("Edge"),e.utils.userAgent.JAVA_FX=n("JavaFX"),e.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!e.utils.userAgent.EDGE,e.utils.userAgent.WEBKIT=n("WebKit")&&!e.utils.userAgent.EDGE,e.utils.userAgent.GECKO=n("Gecko")&&!e.utils.userAgent.WEBKIT&&!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,e.utils.userAgent.ANDROID=n("Android"),t=e.utils.global.navigator&&e.utils.global.navigator.maxTouchPoints,e.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<t,e.utils.userAgent.IPOD=n("iPod"),e.utils.userAgent.IPHONE=n("iPhone")&&!e.utils.userAgent.IPAD&&!e.utils.userAgent.IPOD,e.utils.userAgent.MAC=n("Macintosh"),e.utils.userAgent.TABLET=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),e.utils.userAgent.MOBILE=!e.utils.userAgent.TABLET&&(e.utils.userAgent.IPOD||e.utils.userAgent.IPHONE||e.utils.userAgent.ANDROID||n("IEMobile"))}(e.utils.global.navigator&&e.utils.global.navigator.userAgent||""),e.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},e.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},e.utils.getRelativeXY=function(t){var n=new e.utils.Coordinate(0,0),r=t.getAttribute("x");return r&&(n.x=parseInt(r,10)),(r=t.getAttribute("y"))&&(n.y=parseInt(r,10)),(r=(r=t.getAttribute("transform"))&&r.match(e.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(r[1]),r[3]&&(n.y+=Number(r[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(e.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(t[1]),t[3]&&(n.y+=Number(t[3]))),n},e.utils.getInjectionDivXY_=function(t){for(var n=0,r=0;t;){var s=e.utils.getRelativeXY(t);if(n+=s.x,r+=s.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new e.utils.Coordinate(n,r)},e.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,e.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,e.utils.isRightButton=function(t){return!(!t.ctrlKey||!e.utils.userAgent.MAC)||2==t.button},e.utils.mouseToSvg=function(t,n,r){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,r||(r=n.getScreenCTM().inverse()),s.matrixTransform(r)},e.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*e.LINE_MODE_MULTIPLIER,y:t.deltaY*e.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*e.PAGE_MODE_MULTIPLIER,y:t.deltaY*e.PAGE_MODE_MULTIPLIER}}},e.utils.tokenizeInterpolation=function(t){return e.utils.tokenizeInterpolation_(t,!0)},e.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=e.utils.tokenizeInterpolation_(t,!1)).length?String(t[0]):""},e.utils.checkMessageReferences=function(t){for(var n=!0,r=e.Msg,s=t.match(/%{BKY_[A-Z]\w*}/gi),c=0;c<s.length;c++)null==r[s[c].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+s[c]+" in "+t),n=!1);return n},e.utils.tokenizeInterpolation_=function(t,n){var r=[],s=t.split("");s.push("");var c=0;t=[];for(var v=null,D=0;D<s.length;D++){var P=s[D];0==c?"%"==P?((P=t.join(""))&&r.push(P),t.length=0,c=1):t.push(P):1==c?"%"==P?(t.push(P),c=0):n&&"0"<=P&&"9">=P?(c=2,v=P,(P=t.join(""))&&r.push(P),t.length=0):"{"==P?c=3:(t.push("%",P),c=0):2==c?"0"<=P&&"9">=P?v+=P:(r.push(parseInt(v,10)),D--,c=0):3==c&&(""==P?(t.splice(0,0,"%{"),D--,c=0):"}"!=P?t.push(P):(c=t.join(""),/[A-Z]\w*/i.test(c)?(P=c.toUpperCase(),(P=e.utils.string.startsWith(P,"BKY_")?P.substring(4):null)&&P in e.Msg?"string"==typeof(c=e.Msg[P])?Array.prototype.push.apply(r,e.utils.tokenizeInterpolation_(c,n)):r.push(n?String(c):c):r.push("%{"+c+"}")):r.push("%{"+c+"}"),c=t.length=0))}for((P=t.join(""))&&r.push(P),n=[],D=t.length=0;D<r.length;++D)"string"==typeof r[D]?t.push(r[D]):((P=t.join(""))&&n.push(P),t.length=0,n.push(r[D]));return(P=t.join(""))&&n.push(P),t.length=0,n},e.utils.genUid=function(){for(var t=e.utils.genUid.soup_.length,n=[],r=0;20>r;r++)n[r]=e.utils.genUid.soup_.charAt(Math.random()*t);return n.join("")},e.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.utils.is3dSupported=function(){if(void 0!==e.utils.is3dSupported.cached_)return e.utils.is3dSupported.cached_;if(!e.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),n="none",r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var s in document.body.insertBefore(t,null),r)if(void 0!==t.style[s]){if(t.style[s]="translate3d(1px,1px,1px)",!(n=e.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(r[s])}return document.body.removeChild(t),e.utils.is3dSupported.cached_="none"!==n,e.utils.is3dSupported.cached_},e.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),t())},10)},e.utils.getViewportBBox=function(){var t=e.utils.style.getViewportPageOffset();return new e.utils.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},e.utils.arrayRemove=function(t,n){return-1!=(n=t.indexOf(n))&&(t.splice(n,1),!0)},e.utils.getDocumentScroll=function(){var t=document.documentElement,n=window;return e.utils.userAgent.IE&&n.pageYOffset!=t.scrollTop?new e.utils.Coordinate(t.scrollLeft,t.scrollTop):new e.utils.Coordinate(n.pageXOffset||t.scrollLeft,n.pageYOffset||t.scrollTop)},e.utils.getBlockTypeCounts=function(t,n){var r=Object.create(null),s=t.getDescendants(!0);for(n&&(t=t.getNextBlock())&&(t=s.indexOf(t),s.splice(t,s.length-t)),t=0;n=s[t];t++)r[n.type]?r[n.type]++:r[n.type]=1;return r},e.utils.screenToWsCoordinates=function(t,n){var r=n.x;n=n.y;var s=t.getInjectionDiv().getBoundingClientRect();return r=new e.utils.Coordinate(r-s.left,n-s.top),n=t.getOriginOffsetInPixels(),e.utils.Coordinate.difference(r,n).scale(1/t.scale)},e.utils.parseBlockColour=function(t){var n="string"==typeof t?e.utils.replaceMessageReferences(t):t,r=Number(n);if(!isNaN(r)&&0<=r&&360>=r)return{hue:r,hex:e.utils.colour.hsvToHex(r,e.HSV_SATURATION,255*e.HSV_VALUE)};if(r=e.utils.colour.parse(n))return{hue:null,hex:r};throw r='Invalid colour: "'+n+'"',t!=n&&(r+=' (from "'+t+'")'),Error(r)},e.Touch={},e.Touch.TOUCH_ENABLED="ontouchstart"in e.utils.global||!!(e.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!e.utils.global.navigator||!e.utils.global.navigator.maxTouchPoints&&!e.utils.global.navigator.msMaxTouchPoints),e.Touch.touchIdentifier_=null,e.Touch.TOUCH_MAP={},e.utils.global.PointerEvent?e.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:e.Touch.TOUCH_ENABLED&&(e.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),e.longPid_=0,e.longStart=function(t,n){e.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(e.longPid_=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n&&n.handleRightClick(t)},e.LONGPRESS))},e.longStop_=function(){e.longPid_&&(clearTimeout(e.longPid_),e.longPid_=0)},e.Touch.clearTouchIdentifier=function(){e.Touch.touchIdentifier_=null},e.Touch.shouldHandleEvent=function(t){return!e.Touch.isMouseOrTouchEvent(t)||e.Touch.checkTouchIdentifier(t)},e.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},e.Touch.checkTouchIdentifier=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);return null!=e.Touch.touchIdentifier_?e.Touch.touchIdentifier_==n:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(e.Touch.touchIdentifier_=n,!0)},e.Touch.setClientFromTouch=function(t){if(e.utils.string.startsWith(t.type,"touch")){var n=t.changedTouches[0];t.clientX=n.clientX,t.clientY=n.clientY}},e.Touch.isMouseOrTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"mouse")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.isTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.splitEventByTouches=function(t){var n=[];if(t.changedTouches)for(var r=0;r<t.changedTouches.length;r++)n[r]={type:t.type,changedTouches:[t.changedTouches[r]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else n.push(t);return n},e.browserEvents={},e.browserEvents.conditionalBind=function(t,n,r,s,c,v){var D=!1,P=function(Ft){var gt=!c;Ft=e.Touch.splitEventByTouches(Ft);for(var Bt,wt=0;Bt=Ft[wt];wt++)(!gt||e.Touch.shouldHandleEvent(Bt))&&(e.Touch.setClientFromTouch(Bt),r?s.call(r,Bt):s(Bt),D=!0)},G=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var q,it=0;q=e.Touch.TOUCH_MAP[n][it];it++)t.addEventListener(q,P,!1),G.push([t,q,P]);else if(t.addEventListener(n,P,!1),G.push([t,n,P]),n in e.Touch.TOUCH_MAP){var bt=function(Ft){P(Ft),D&&!v&&Ft.preventDefault()};for(it=0;q=e.Touch.TOUCH_MAP[n][it];it++)t.addEventListener(q,bt,!1),G.push([t,q,bt])}return G},e.browserEvents.bind=function(t,n,r,s){var c=function(it){r?s.call(r,it):s(it)},v=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var P,D=0;P=e.Touch.TOUCH_MAP[n][D];D++)t.addEventListener(P,c,!1),v.push([t,P,c]);else if(t.addEventListener(n,c,!1),v.push([t,n,c]),n in e.Touch.TOUCH_MAP){var G=function(it){if(it.changedTouches&&1==it.changedTouches.length){var q=it.changedTouches[0];it.clientX=q.clientX,it.clientY=q.clientY}c(it),it.preventDefault()};for(D=0;P=e.Touch.TOUCH_MAP[n][D];D++)t.addEventListener(P,G,!1),v.push([t,P,G])}return v},e.browserEvents.unbind=function(t){for(;t.length;){var n=t.pop(),r=n[2];n[0].removeEventListener(n[1],r,!1)}return r},e.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},e.ComponentManager.prototype.addComponent=function(t,n){var r=t.component.id;if(!n&&this.componentData_[r])throw Error('Plugin "'+r+'" with capabilities "'+this.componentData_[r].capabilities+'" already added.');this.componentData_[r]=t,n=[];for(var s=0;s<t.capabilities.length;s++){var c=String(t.capabilities[s]).toLowerCase();n.push(c),void 0===this.capabilityToComponentIds_[c]?this.capabilityToComponentIds_[c]=[r]:this.capabilityToComponentIds_[c].push(r)}this.componentData_[r].capabilities=n},e.ComponentManager.prototype.removeComponent=function(t){var n=this.componentData_[t];if(n){for(var r=0;r<n.capabilities.length;r++){var s=String(n.capabilities[r]).toLowerCase();this.capabilityToComponentIds_[s].splice(this.capabilityToComponentIds_[s].indexOf(t),1)}delete this.componentData_[t]}},e.ComponentManager.prototype.addCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot add capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?console.warn('Plugin "'+t+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[t].capabilities.push(n),this.capabilityToComponentIds_[n].push(t))},e.ComponentManager.prototype.removeCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?(n=String(n).toLowerCase(),this.componentData_[t].capabilities.splice(this.componentData_[t].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(t),1)):console.warn('Plugin "'+t+"doesn't have capability \""+n+'" to remove')},e.ComponentManager.prototype.hasCapability=function(t,n){return n=String(n).toLowerCase(),-1!==this.componentData_[t].capabilities.indexOf(n)},e.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},e.ComponentManager.prototype.getComponents=function(t,n){if(t=String(t).toLowerCase(),!(t=this.capabilityToComponentIds_[t]))return[];var r=[];if(n){var s=[],c=this.componentData_;t.forEach(function(v){s.push(c[v])}),s.sort(function(v,D){return v.weight-D.weight}),s.forEach(function(v){r.push(v.component)})}else c=this.componentData_,t.forEach(function(v){r.push(c[v].component)});return r},e.ComponentManager.Capability=function(t){this.name_=t},e.ComponentManager.Capability.prototype.toString=function(){return this.name_},e.ComponentManager.Capability.POSITIONABLE=new e.ComponentManager.Capability("positionable"),e.ComponentManager.Capability.DRAG_TARGET=new e.ComponentManager.Capability("drag_target"),e.ComponentManager.Capability.DELETE_AREA=new e.ComponentManager.Capability("delete_area"),e.ComponentManager.Capability.AUTOHIDEABLE=new e.ComponentManager.Capability("autohideable"),e.utils.Svg=function(t){this.tagName_=t},e.utils.Svg.prototype.toString=function(){return this.tagName_},e.utils.Svg.ANIMATE=new e.utils.Svg("animate"),e.utils.Svg.CIRCLE=new e.utils.Svg("circle"),e.utils.Svg.CLIPPATH=new e.utils.Svg("clipPath"),e.utils.Svg.DEFS=new e.utils.Svg("defs"),e.utils.Svg.FECOMPOSITE=new e.utils.Svg("feComposite"),e.utils.Svg.FECOMPONENTTRANSFER=new e.utils.Svg("feComponentTransfer"),e.utils.Svg.FEFLOOD=new e.utils.Svg("feFlood"),e.utils.Svg.FEFUNCA=new e.utils.Svg("feFuncA"),e.utils.Svg.FEGAUSSIANBLUR=new e.utils.Svg("feGaussianBlur"),e.utils.Svg.FEPOINTLIGHT=new e.utils.Svg("fePointLight"),e.utils.Svg.FESPECULARLIGHTING=new e.utils.Svg("feSpecularLighting"),e.utils.Svg.FILTER=new e.utils.Svg("filter"),e.utils.Svg.FOREIGNOBJECT=new e.utils.Svg("foreignObject"),e.utils.Svg.G=new e.utils.Svg("g"),e.utils.Svg.IMAGE=new e.utils.Svg("image"),e.utils.Svg.LINE=new e.utils.Svg("line"),e.utils.Svg.PATH=new e.utils.Svg("path"),e.utils.Svg.PATTERN=new e.utils.Svg("pattern"),e.utils.Svg.POLYGON=new e.utils.Svg("polygon"),e.utils.Svg.RECT=new e.utils.Svg("rect"),e.utils.Svg.SVG=new e.utils.Svg("svg"),e.utils.Svg.TEXT=new e.utils.Svg("text"),e.utils.Svg.TSPAN=new e.utils.Svg("tspan"),e.utils.dom={},e.utils.dom.SVG_NS="http://www.w3.org/2000/svg",e.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",e.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",e.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},e.utils.dom.cacheWidths_=null,e.utils.dom.cacheReference_=0,e.utils.dom.canvasContext_=null,e.utils.dom.createSvgElement=function(t,n,r){for(var s in t=document.createElementNS(e.utils.dom.SVG_NS,String(t)),n)t.setAttribute(s,n[s]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),r&&r.appendChild(t),t},e.utils.dom.addClass=function(t,n){var r=t.getAttribute("class")||"";return-1==(" "+r+" ").indexOf(" "+n+" ")&&(r&&(r+=" "),t.setAttribute("class",r+n),!0)},e.utils.dom.removeClasses=function(t,n){n=n.split(" ");for(var r=0;r<n.length;r++)e.utils.dom.removeClass(t,n[r])},e.utils.dom.removeClass=function(t,n){var r=t.getAttribute("class");if(-1==(" "+r+" ").indexOf(" "+n+" "))return!1;r=r.split(/\s+/);for(var s=0;s<r.length;s++)r[s]&&r[s]!=n||(r.splice(s,1),s--);return r.length?t.setAttribute("class",r.join(" ")):t.removeAttribute("class"),!0},e.utils.dom.hasClass=function(t,n){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+n+" ")},e.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},e.utils.dom.insertAfter=function(t,n){var r=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");r?n.insertBefore(t,r):n.appendChild(t)},e.utils.dom.containsNode=function(t,n){return!!(t.compareDocumentPosition(n)&e.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},e.utils.dom.setCssTransform=function(t,n){t.style.transform=n,t.style["-webkit-transform"]=n},e.utils.dom.startTextWidthCache=function(){e.utils.dom.cacheReference_++,e.utils.dom.cacheWidths_||(e.utils.dom.cacheWidths_=Object.create(null))},e.utils.dom.stopTextWidthCache=function(){e.utils.dom.cacheReference_--,e.utils.dom.cacheReference_||(e.utils.dom.cacheWidths_=null)},e.utils.dom.getTextWidth=function(t){var r,n=t.textContent+"\n"+t.className.baseVal;if(e.utils.dom.cacheWidths_&&(r=e.utils.dom.cacheWidths_[n]))return r;try{r=e.utils.userAgent.IE||e.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(s){return 8*t.textContent.length}return e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[n]=r),r},e.utils.dom.getFastTextWidth=function(t,n,r,s){return e.utils.dom.getFastTextWidthWithSizeString(t,n+"pt",r,s)},e.utils.dom.getFastTextWidthWithSizeString=function(t,n,r,s){var v,c=t.textContent;return t=c+"\n"+t.className.baseVal,e.utils.dom.cacheWidths_&&(v=e.utils.dom.cacheWidths_[t])||(e.utils.dom.canvasContext_||((v=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(v),e.utils.dom.canvasContext_=v.getContext("2d")),e.utils.dom.canvasContext_.font=r+" "+n+" "+s,v=e.utils.dom.canvasContext_.measureText(c).width,e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[t]=v)),v},e.utils.dom.measureFontMetrics=function(t,n,r,s){var c=document.createElement("span");c.style.font=r+" "+n+" "+s,c.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(c),n.appendChild(t),document.body.appendChild(n);try{r={},n.style.alignItems="baseline",r.baseline=t.offsetTop-c.offsetTop,n.style.alignItems="flex-end",r.height=t.offsetTop-c.offsetTop}finally{document.body.removeChild(n)}return r},e.utils.math={},e.utils.math.toRadians=function(t){return t*Math.PI/180},e.utils.math.toDegrees=function(t){return 180*t/Math.PI},e.utils.math.clamp=function(t,n,r){if(r<t){var s=r;r=t,t=s}return Math.max(t,Math.min(n,r))},e.DropDownDiv=function(){},e.DropDownDiv.boundsElement_=null,e.DropDownDiv.owner_=null,e.DropDownDiv.positionToField_=null,e.DropDownDiv.ARROW_SIZE=16,e.DropDownDiv.BORDER_SIZE=1,e.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,e.DropDownDiv.PADDING_Y=16,e.DropDownDiv.ANIMATION_TIME=.25,e.DropDownDiv.animateOutTimer_=null,e.DropDownDiv.onHide_=null,e.DropDownDiv.rendererClassName_="",e.DropDownDiv.themeClassName_="",e.DropDownDiv.createDom=function(){if(!e.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",(e.parentContainer||document.body).appendChild(t),e.DropDownDiv.DIV_=t;var n=document.createElement("div");n.className="blocklyDropDownContent",t.appendChild(n),e.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(n),e.DropDownDiv.arrow_=n,e.DropDownDiv.DIV_.style.opacity=0,e.DropDownDiv.DIV_.style.transition="transform "+e.DropDownDiv.ANIMATION_TIME+"s, opacity "+e.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",function(){e.utils.dom.addClass(t,"blocklyFocused")}),t.addEventListener("focusout",function(){e.utils.dom.removeClass(t,"blocklyFocused")})}},e.DropDownDiv.setBoundsElement=function(t){e.DropDownDiv.boundsElement_=t},e.DropDownDiv.getContentDiv=function(){return e.DropDownDiv.content_},e.DropDownDiv.clearContent=function(){e.DropDownDiv.content_.textContent="",e.DropDownDiv.content_.style.width=""},e.DropDownDiv.setColour=function(t,n){e.DropDownDiv.DIV_.style.backgroundColor=t,e.DropDownDiv.DIV_.style.borderColor=n},e.DropDownDiv.showPositionedByBlock=function(t,n,r,s){return e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfBlock_(n),t,r,s)},e.DropDownDiv.showPositionedByField=function(t,n,r){return e.DropDownDiv.positionToField_=!0,e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfField_(t),t,n,r)},e.DropDownDiv.getScaledBboxOfBlock_=function(t){var n=t.getSvgRoot(),r=n.getBBox(),s=t.workspace.scale;return t=r.height*s,r=r.width*s,n=e.utils.style.getPageOffset(n),new e.utils.Rect(n.y,n.y+t,n.x,n.x+r)},e.DropDownDiv.getScaledBboxOfField_=function(t){return t=t.getScaledBBox(),new e.utils.Rect(t.top,t.bottom,t.left,t.right)},e.DropDownDiv.showPositionedByRect_=function(t,n,r,s){var c=t.left+(t.right-t.left)/2,v=t.bottom;t=t.top,s&&(t+=s);for(var D=(s=n.getSourceBlock()).workspace;D.options.parentWorkspace;)D=D.options.parentWorkspace;return e.DropDownDiv.setBoundsElement(D.getParentSvg().parentNode),e.DropDownDiv.show(n,s.RTL,c,v,c,t,r)},e.DropDownDiv.show=function(t,n,r,s,c,v,D){return e.DropDownDiv.owner_=t,e.DropDownDiv.onHide_=D||null,(t=e.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=e.getMainWorkspace(),e.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),e.DropDownDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.DropDownDiv.rendererClassName_),e.utils.dom.addClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.positionInternal_(r,s,c,v)},e.DropDownDiv.getBoundsInfo_=function(){var t=e.utils.style.getPageOffset(e.DropDownDiv.boundsElement_),n=e.utils.style.getSize(e.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+n.width,top:t.y,bottom:t.y+n.height,width:n.width,height:n.height}},e.DropDownDiv.getPositionMetrics_=function(t,n,r,s){var c=e.DropDownDiv.getBoundsInfo_(),v=e.utils.style.getSize(e.DropDownDiv.DIV_);return n+v.height<c.bottom?e.DropDownDiv.getPositionBelowMetrics_(t,n,c,v):s-v.height>c.top?e.DropDownDiv.getPositionAboveMetrics_(r,s,c,v):n+v.height<document.documentElement.clientHeight?e.DropDownDiv.getPositionBelowMetrics_(t,n,c,v):s-v.height>document.documentElement.clientTop?e.DropDownDiv.getPositionAboveMetrics_(r,s,c,v):e.DropDownDiv.getPositionTopOfPageMetrics_(t,c,v)},e.DropDownDiv.getPositionBelowMetrics_=function(t,n,r,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,r.left,r.right,s.width)).divX,initialY:n,finalX:t.divX,finalY:n+e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(e.DropDownDiv.ARROW_SIZE/2+e.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},e.DropDownDiv.getPositionAboveMetrics_=function(t,n,r,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,r.left,r.right,s.width)).divX,initialY:n-s.height,finalX:t.divX,finalY:n-s.height-e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:s.height-2*e.DropDownDiv.BORDER_SIZE-e.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},e.DropDownDiv.getPositionTopOfPageMetrics_=function(t,n,r){return{initialX:(t=e.DropDownDiv.getPositionX(t,n.left,n.right,r.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},e.DropDownDiv.getPositionX=function(t,n,r,s){var c=t;return t=e.utils.math.clamp(n,t-s/2,r-s),{arrowX:s=e.utils.math.clamp(n=e.DropDownDiv.ARROW_HORIZONTAL_PADDING,(c-=e.DropDownDiv.ARROW_SIZE/2)-t,s-n-e.DropDownDiv.ARROW_SIZE),divX:t}},e.DropDownDiv.isVisible=function(){return!!e.DropDownDiv.owner_},e.DropDownDiv.hideIfOwner=function(t,n){return e.DropDownDiv.owner_===t&&(n?e.DropDownDiv.hideWithoutAnimation():e.DropDownDiv.hide(),!0)},e.DropDownDiv.hide=function(){var t=e.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,e.DropDownDiv.animateOutTimer_=setTimeout(function(){e.DropDownDiv.hideWithoutAnimation()},1e3*e.DropDownDiv.ANIMATION_TIME),e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null)},e.DropDownDiv.hideWithoutAnimation=function(){if(e.DropDownDiv.isVisible()){e.DropDownDiv.animateOutTimer_&&clearTimeout(e.DropDownDiv.animateOutTimer_);var t=e.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null),e.DropDownDiv.clearContent(),e.DropDownDiv.owner_=null,e.DropDownDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.rendererClassName_),e.DropDownDiv.rendererClassName_=""),e.DropDownDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.DropDownDiv.positionInternal_=function(t,n,r,s){(t=e.DropDownDiv.getPositionMetrics_(t,n,r,s)).arrowVisible?(e.DropDownDiv.arrow_.style.display="",e.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",e.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):e.DropDownDiv.arrow_.style.display="none",n=Math.floor(t.initialX),r=Math.floor(t.initialY),s=Math.floor(t.finalX);var c=Math.floor(t.finalY),v=e.DropDownDiv.DIV_;return v.style.left=n+"px",v.style.top=r+"px",v.style.display="block",v.style.opacity=1,v.style.transform="translate("+(s-n)+"px,"+(c-r)+"px)",!!t.arrowAtTop},e.DropDownDiv.repositionForWindowResize=function(){if(e.DropDownDiv.owner_){var t=e.DropDownDiv.owner_,n=t.getSourceBlock();t=e.DropDownDiv.positionToField_?e.DropDownDiv.getScaledBboxOfField_(t):e.DropDownDiv.getScaledBboxOfBlock_(n),e.DropDownDiv.positionInternal_(n=t.left+(t.right-t.left)/2,t.bottom,n,t.top)}else e.DropDownDiv.hide()},e.registry={},e.registry.typeMap_=Object.create(null),e.registry.DEFAULT="default",e.registry.Type=function(t){this.name_=t},e.registry.Type.prototype.toString=function(){return this.name_},e.registry.Type.CONNECTION_CHECKER=new e.registry.Type("connectionChecker"),e.registry.Type.CURSOR=new e.registry.Type("cursor"),e.registry.Type.EVENT=new e.registry.Type("event"),e.registry.Type.FIELD=new e.registry.Type("field"),e.registry.Type.RENDERER=new e.registry.Type("renderer"),e.registry.Type.TOOLBOX=new e.registry.Type("toolbox"),e.registry.Type.THEME=new e.registry.Type("theme"),e.registry.Type.TOOLBOX_ITEM=new e.registry.Type("toolboxItem"),e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new e.registry.Type("flyoutsVerticalToolbox"),e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new e.registry.Type("flyoutsHorizontalToolbox"),e.registry.Type.METRICS_MANAGER=new e.registry.Type("metricsManager"),e.registry.Type.BLOCK_DRAGGER=new e.registry.Type("blockDragger"),e.registry.register=function(t,n,r,s){if(!(t instanceof e.registry.Type)&&"string"!=typeof t||""==String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!r)throw Error("Can not register a null value");var c=e.registry.typeMap_[t];if(c||(c=e.registry.typeMap_[t]=Object.create(null)),e.registry.validate_(t,r),!s&&c[n])throw Error('Name "'+n+'" with type "'+t+'" already registered.');c[n]=r},e.registry.validate_=function(t,n){if(t===String(e.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+t+'" must have a fromJson function')},e.registry.unregister=function(t,n){t=String(t).toLowerCase(),n=n.toLowerCase();var r=e.registry.typeMap_[t];r&&r[n]?delete e.registry.typeMap_[t][n]:console.warn("Unable to unregister ["+n+"]["+t+"] from the registry.")},e.registry.getItem_=function(t,n,r){t=String(t).toLowerCase(),n=n.toLowerCase();var s=e.registry.typeMap_[t];if(!s||!s[n]){if(n="Unable to find ["+n+"]["+t+"] in the registry.",r)throw Error(n+" You must require or register a "+t+" plugin.");return console.warn(n),null}return s[n]},e.registry.hasItem=function(t,n){return t=String(t).toLowerCase(),n=n.toLowerCase(),!!(t=e.registry.typeMap_[t])&&!!t[n]},e.registry.getClass=function(t,n,r){return e.registry.getItem_(t,n,r)},e.registry.getObject=function(t,n,r){return e.registry.getItem_(t,n,r)},e.registry.getClassFromOptions=function(t,n,r){return"function"==typeof(n=n.plugins[t.toString()]||e.registry.DEFAULT)?n:e.registry.getClass(t,n,r)},e.Events={},e.Events.group_="",e.Events.recordUndo=!0,e.Events.disabled_=0,e.Events.CREATE="create",e.Events.BLOCK_CREATE=e.Events.CREATE,e.Events.DELETE="delete",e.Events.BLOCK_DELETE=e.Events.DELETE,e.Events.CHANGE="change",e.Events.BLOCK_CHANGE=e.Events.CHANGE,e.Events.MOVE="move",e.Events.BLOCK_MOVE=e.Events.MOVE,e.Events.VAR_CREATE="var_create",e.Events.VAR_DELETE="var_delete",e.Events.VAR_RENAME="var_rename",e.Events.UI="ui",e.Events.BLOCK_DRAG="drag",e.Events.SELECTED="selected",e.Events.CLICK="click",e.Events.MARKER_MOVE="marker_move",e.Events.BUBBLE_OPEN="bubble_open",e.Events.TRASHCAN_OPEN="trashcan_open",e.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.Events.THEME_CHANGE="theme_change",e.Events.VIEWPORT_CHANGE="viewport_change",e.Events.COMMENT_CREATE="comment_create",e.Events.COMMENT_DELETE="comment_delete",e.Events.COMMENT_CHANGE="comment_change",e.Events.COMMENT_MOVE="comment_move",e.Events.FINISHED_LOADING="finished_loading",e.Events.BUMP_EVENTS=[e.Events.BLOCK_CREATE,e.Events.BLOCK_MOVE,e.Events.COMMENT_CREATE,e.Events.COMMENT_MOVE],e.Events.FIRE_QUEUE_=[],e.Events.fire=function(t){e.Events.isEnabled()&&(e.Events.FIRE_QUEUE_.length||setTimeout(e.Events.fireNow_,0),e.Events.FIRE_QUEUE_.push(t))},e.Events.fireNow_=function(){for(var r,t=e.Events.filter(e.Events.FIRE_QUEUE_,!0),n=e.Events.FIRE_QUEUE_.length=0;r=t[n];n++)if(r.workspaceId){var s=e.Workspace.getById(r.workspaceId);s&&s.fireChangeListener(r)}},e.Events.filter=function(t,n){t=t.slice(),n||t.reverse();for(var v,r=[],s=Object.create(null),c=0;v=t[c];c++)if(!v.isNull()){var D=[v.isUiEvent?e.Events.UI:v.type,v.blockId,v.workspaceId].join(" "),P=s[D],G=P?P.event:null;P?v.type==e.Events.MOVE&&P.index==c-1?(G.newParentId=v.newParentId,G.newInputName=v.newInputName,G.newCoordinate=v.newCoordinate,P.index=c):v.type==e.Events.CHANGE&&v.element==G.element&&v.name==G.name?G.newValue=v.newValue:v.type==e.Events.VIEWPORT_CHANGE?(G.viewTop=v.viewTop,G.viewLeft=v.viewLeft,G.scale=v.scale,G.oldScale=v.oldScale):(v.type!=e.Events.CLICK||G.type!=e.Events.BUBBLE_OPEN)&&(s[D]={event:v,index:c},r.push(v)):(s[D]={event:v,index:c},r.push(v))}for(t=r.filter(function(it){return!it.isNull()}),n||t.reverse(),c=1;v=t[c];c++)v.type==e.Events.CHANGE&&"mutation"==v.element&&t.unshift(t.splice(c,1)[0]);return t},e.Events.clearPendingUndo=function(){for(var n,t=0;n=e.Events.FIRE_QUEUE_[t];t++)n.recordUndo=!1},e.Events.disable=function(){e.Events.disabled_++},e.Events.enable=function(){e.Events.disabled_--},e.Events.isEnabled=function(){return 0==e.Events.disabled_},e.Events.getGroup=function(){return e.Events.group_},e.Events.setGroup=function(t){e.Events.group_="boolean"==typeof t?t?e.utils.genUid():"":t},e.Events.getDescendantIds=function(t){var n=[];t=t.getDescendants(!1);for(var s,r=0;s=t[r];r++)n[r]=s.id;return n},e.Events.fromJson=function(t,n){var r=e.Events.get(t.type);if(!r)throw Error("Unknown event type.");return(r=new r).fromJson(t),r.workspaceId=n.id,r},e.Events.get=function(t){return e.registry.getClass(e.registry.Type.EVENT,t)},e.Events.disableOrphans=function(t){if((t.type==e.Events.MOVE||t.type==e.Events.CREATE)&&t.workspaceId){var n=e.Workspace.getById(t.workspaceId),r=n.getBlockById(t.blockId);if(r){t=e.Events.recordUndo;try{e.Events.recordUndo=!1;var s=r.getParent();if(s&&s.isEnabled()){var v,c=r.getDescendants(!1);for(n=0;v=c[n];n++)v.setEnabled(!0)}else if((r.outputConnection||r.previousConnection)&&!n.isDragging())do{r.setEnabled(!1),r=r.getNextBlock()}while(r)}finally{e.Events.recordUndo=t}}}},e.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.Events.Abstract.prototype.isUiEvent=!1,e.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},e.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},e.Events.Abstract.prototype.isNull=function(){return!1},e.Events.Abstract.prototype.run=function(t){},e.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=e.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},e.utils.object={},e.utils.object.inherits=function(t,n){t.superClass_=n.prototype,t.prototype=Object.create(n.prototype),t.prototype.constructor=t},e.utils.object.mixin=function(t,n){for(var r in n)t[r]=n[r]},e.utils.object.deepMerge=function(t,n){for(var r in n)t[r]=null!=n[r]&&"object"==typeof n[r]?e.utils.object.deepMerge(t[r]||Object.create(null),n[r]):n[r];return t},e.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(n){return t[n]})},e.utils.xml={},e.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",e.utils.xml.document=function(){return document},e.utils.xml.createElement=function(t){return e.utils.xml.document().createElementNS(e.utils.xml.NAME_SPACE,t)},e.utils.xml.createTextNode=function(t){return e.utils.xml.document().createTextNode(t)},e.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},e.inputTypes={VALUE:e.connectionTypes.INPUT_VALUE,STATEMENT:e.connectionTypes.NEXT_STATEMENT,DUMMY:5},e.Xml={},e.Xml.workspaceToDom=function(t,n){var r=e.utils.xml.createElement("xml"),s=e.Xml.variablesToDom(e.Variables.allUsedVarModels(t));s.hasChildNodes()&&r.appendChild(s);var v,c=t.getTopComments(!0);for(s=0;v=c[s];s++)r.appendChild(v.toXmlWithXY(n));for(t=t.getTopBlocks(!0),s=0;c=t[s];s++)r.appendChild(e.Xml.blockToDomWithXY(c,n));return r},e.Xml.variablesToDom=function(t){for(var s,n=e.utils.xml.createElement("variables"),r=0;s=t[r];r++){var c=e.utils.xml.createElement("variable");c.appendChild(e.utils.xml.createTextNode(s.name)),s.type&&c.setAttribute("type",s.type),c.id=s.getId(),n.appendChild(c)}return n},e.Xml.blockToDomWithXY=function(t,n){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var r;t.workspace.RTL&&(r=t.workspace.getWidth()),n=e.Xml.blockToDom(t,n);var s=t.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(t.workspace.RTL?r-s.x:s.x)),n.setAttribute("y",Math.round(s.y)),n},e.Xml.fieldToDom_=function(t){if(t.isSerializable()){var n=e.utils.xml.createElement("field");return n.setAttribute("name",t.name||""),t.toXml(n)}return null},e.Xml.allFieldsToDom_=function(t,n){for(var s,r=0;s=t.inputList[r];r++)for(var v,c=0;v=s.fieldRow[c];c++)(v=e.Xml.fieldToDom_(v))&&n.appendChild(v)},e.Xml.blockToDom=function(t,n){if(t.isInsertionMarker())return(t=t.getChildren(!1)[0])?e.Xml.blockToDom(t):new DocumentFragment;var r=e.utils.xml.createElement(t.isShadow()?"shadow":"block");if(r.setAttribute("type",t.type),n||r.setAttribute("id",t.id),t.mutationToDom){var s=t.mutationToDom();s&&(s.hasChildNodes()||s.hasAttributes())&&r.appendChild(s)}if(e.Xml.allFieldsToDom_(t,r),s=t.getCommentText()){var c=t.commentModel.size,v=t.commentModel.pinned,D=e.utils.xml.createElement("comment");D.appendChild(e.utils.xml.createTextNode(s)),D.setAttribute("pinned",v),D.setAttribute("h",c.height),D.setAttribute("w",c.width),r.appendChild(D)}for(t.data&&((s=e.utils.xml.createElement("data")).appendChild(e.utils.xml.createTextNode(t.data)),r.appendChild(s)),s=0;c=t.inputList[s];s++){var P;if(v=!0,c.type!=e.inputTypes.DUMMY){var G=c.connection.targetBlock();c.type==e.inputTypes.VALUE?P=e.utils.xml.createElement("value"):c.type==e.inputTypes.STATEMENT&&(P=e.utils.xml.createElement("statement")),!(D=c.connection.getShadowDom())||G&&G.isShadow()||P.appendChild(e.Xml.cloneShadow_(D,n)),G&&(D=e.Xml.blockToDom(G,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&(P.appendChild(D),v=!1),P.setAttribute("name",c.name),v||r.appendChild(P)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&r.setAttribute("inline",t.inputsInline),t.isCollapsed()&&r.setAttribute("collapsed",!0),t.isEnabled()||r.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||r.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||r.setAttribute("movable",!1),t.isEditable()||r.setAttribute("editable",!1),(s=t.getNextBlock())&&(D=e.Xml.blockToDom(s,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&((P=e.utils.xml.createElement("next")).appendChild(D),r.appendChild(P)),!(D=t.nextConnection&&t.nextConnection.getShadowDom())||s&&s.isShadow()||P.appendChild(e.Xml.cloneShadow_(D,n)),r},e.Xml.cloneShadow_=function(t,n){for(var s,r=t=t.cloneNode(!0);r;)if(n&&"shadow"==r.nodeName&&r.removeAttribute("id"),r.firstChild)r=r.firstChild;else{for(;r&&!r.nextSibling;)s=r,r=r.parentNode,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&r.firstChild!=s&&e.utils.dom.removeNode(s);r&&(s=r,r=r.nextSibling,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&e.utils.dom.removeNode(s))}return t},e.Xml.domToText=function(t){return e.utils.xml.domToText(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},e.Xml.domToPrettyText=function(t){t=e.Xml.domToText(t).split("<");for(var n="",r=1;r<t.length;r++){var s=t[r];"/"==s[0]&&(n=n.substring(2)),t[r]=n+"<"+s,"/"!=s[0]&&"/>"!=s.slice(-2)&&(n+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},e.Xml.textToDom=function(t){var n=e.utils.xml.textToDomDocument(t);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return n.documentElement},e.Xml.clearWorkspaceAndLoadFromXml=function(t,n){return n.setResizesEnabled(!1),n.clear(),t=e.Xml.domToWorkspace(t,n),n.setResizesEnabled(!0),t},e.Xml.domToWorkspace=function(t,n){if(t instanceof e.Workspace){var r=t;t=n,n=r,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var s;n.RTL&&(s=n.getWidth()),r=[],e.utils.dom.startTextWidthCache();var c=e.Events.getGroup();c||e.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var v=!0;try{for(var P,D=0;P=t.childNodes[D];D++){var G=P.nodeName.toLowerCase(),it=P;if("block"==G||"shadow"==G&&!e.Events.recordUndo){var q=e.Xml.domToBlock(it,n);r.push(q.id);var bt=it.hasAttribute("x")?parseInt(it.getAttribute("x"),10):10,Ft=it.hasAttribute("y")?parseInt(it.getAttribute("y"),10):10;isNaN(bt)||isNaN(Ft)||q.moveBy(n.RTL?s-bt:bt,Ft),v=!1}else{if("shadow"==G)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==G)n.rendered?e.WorkspaceCommentSvg?e.WorkspaceCommentSvg.fromXml(it,n,s):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):e.WorkspaceComment?e.WorkspaceComment.fromXml(it,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==G){if(!v)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");e.Xml.domToVariables(it,n),v=!1}}}}finally{c||e.Events.setGroup(!1),e.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),e.Events.fire(new(e.Events.get(e.Events.FINISHED_LOADING))(n)),r},e.Xml.appendDomToWorkspace=function(t,n){var r;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(r=n.getBlocksBoundingBox()),t=e.Xml.domToWorkspace(t,n),r&&r.top!=r.bottom){var s=r.bottom,c=n.RTL?r.right:r.left,v=1/0,D=-1/0,P=1/0;for(r=0;r<t.length;r++){var G=n.getBlockById(t[r]).getRelativeToSurfaceXY();G.y<P&&(P=G.y),G.x<v&&(v=G.x),G.x>D&&(D=G.x)}for(s=s-P+10,c=n.RTL?c-D:c-v,r=0;r<t.length;r++)n.getBlockById(t[r]).moveBy(c,s)}return t},e.Xml.domToBlock=function(t,n){if(t instanceof e.Workspace){var r=t;t=n,n=r,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}e.Events.disable(),r=n.getAllVariables();try{var s=e.Xml.domToBlockHeadless_(t,n),c=s.getDescendants(!1);if(n.rendered){s.setConnectionTracking(!1);for(var v=c.length-1;0<=v;v--)c[v].initSvg();for(v=c.length-1;0<=v;v--)c[v].render(!1);setTimeout(function(){s.disposed||s.setConnectionTracking(!0)},1),s.updateDisabled(),n.resizeContents()}else for(v=c.length-1;0<=v;v--)c[v].initModel()}finally{e.Events.enable()}if(e.Events.isEnabled()){for(t=e.Variables.getAddedVariables(n,r),v=0;v<t.length;v++)n=t[v],e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(n));e.Events.fire(new(e.Events.get(e.Events.CREATE))(s))}return s},e.Xml.domToVariables=function(t,n){for(var s,r=0;s=t.childNodes[r];r++)if(s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE){var c=s.getAttribute("type"),v=s.getAttribute("id");n.createVariable(s.textContent,c,v)}},e.Xml.mapSupportedXmlTags_=function(t){for(var s,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},r=0;s=t.childNodes[r];r++)if(s.nodeType!=e.utils.dom.NodeType.TEXT_NODE)switch(s.nodeName.toLowerCase()){case"mutation":n.mutation.push(s);break;case"comment":if(!e.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(s);break;case"data":n.data.push(s);break;case"title":case"field":n.field.push(s);break;case"value":case"statement":n.input.push(s);break;case"next":n.next.push(s);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}return n},e.Xml.applyMutationTagNodes_=function(t,n){for(var c,r=!1,s=0;c=t[s];s++)n.domToMutation&&(n.domToMutation(c),n.initSvg&&(r=!0));return r},e.Xml.applyCommentTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++){var c=s.textContent,v="true"==s.getAttribute("pinned"),D=parseInt(s.getAttribute("w"),10);s=parseInt(s.getAttribute("h"),10),n.setCommentText(c),n.commentModel.pinned=v,isNaN(D)||isNaN(s)||(n.commentModel.size=new e.utils.Size(D,s)),v&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},e.Xml.applyDataTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++)n.data=s.textContent},e.Xml.applyFieldTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++){var c=s.getAttribute("name");e.Xml.domToField_(n,c,s)}},e.Xml.findChildBlocks_=function(t){for(var s,n={childBlockElement:null,childShadowElement:null},r=0;s=t.childNodes[r];r++)s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&("block"==s.nodeName.toLowerCase()?n.childBlockElement=s:"shadow"==s.nodeName.toLowerCase()&&(n.childShadowElement=s));return n},e.Xml.applyInputTagNodes_=function(t,n,r,s){for(var v,c=0;v=t[c];c++){var D=v.getAttribute("name"),P=r.getInput(D);if(!P){console.warn("Ignoring non-existent input "+D+" in block "+s);break}if((v=e.Xml.findChildBlocks_(v)).childBlockElement){if(!P.connection)throw TypeError("Input connection does not exist.");e.Xml.domToBlockHeadless_(v.childBlockElement,n,P.connection,!1)}v.childShadowElement&&P.connection.setShadowDom(v.childShadowElement)}},e.Xml.applyNextTagNodes_=function(t,n,r){for(var c,s=0;c=t[s];s++){if((c=e.Xml.findChildBlocks_(c)).childBlockElement){if(!r.nextConnection)throw TypeError("Next statement does not exist.");if(r.nextConnection.isConnected())throw TypeError("Next statement is already connected.");e.Xml.domToBlockHeadless_(c.childBlockElement,n,r.nextConnection,!0)}c.childShadowElement&&r.nextConnection&&r.nextConnection.setShadowDom(c.childShadowElement)}},e.Xml.domToBlockHeadless_=function(t,n,r,s){var c=t.getAttribute("type");if(!c)throw TypeError("Block type unspecified: "+t.outerHTML);var v=t.getAttribute("id");v=n.newBlock(c,v);var D=e.Xml.mapSupportedXmlTags_(t),P=e.Xml.applyMutationTagNodes_(D.mutation,v);if(e.Xml.applyCommentTagNodes_(D.comment,v),e.Xml.applyDataTagNodes_(D.data,v),r)if(s){if(!v.previousConnection)throw TypeError("Next block does not have previous statement.");r.connect(v.previousConnection)}else if(v.outputConnection)r.connect(v.outputConnection);else{if(!v.previousConnection)throw TypeError("Child block does not have output or previous statement.");r.connect(v.previousConnection)}if(e.Xml.applyFieldTagNodes_(D.field,v),e.Xml.applyInputTagNodes_(D.input,n,v,c),e.Xml.applyNextTagNodes_(D.next,n,v),P&&v.initSvg(),(n=t.getAttribute("inline"))&&v.setInputsInline("true"==n),(n=t.getAttribute("disabled"))&&v.setEnabled("true"!=n&&"disabled"!=n),(n=t.getAttribute("deletable"))&&v.setDeletable("true"==n),(n=t.getAttribute("movable"))&&v.setMovable("true"==n),(n=t.getAttribute("editable"))&&v.setEditable("true"==n),(n=t.getAttribute("collapsed"))&&v.setCollapsed("true"==n),"shadow"==t.nodeName.toLowerCase()){for(t=v.getChildren(!1),n=0;r=t[n];n++)if(!r.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(v.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");v.setShadow(!0)}return v},e.Xml.domToField_=function(t,n,r){var s=t.getField(n);s?s.fromXml(r):console.warn("Ignoring non-existent field "+n+" in block "+t.type)},e.Xml.deleteNext=function(t){for(var r,n=0;r=t.childNodes[n];n++)if("next"==r.nodeName.toLowerCase()){t.removeChild(r);break}},e.Events.BlockBase=function(t){e.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.BlockBase,e.Events.Abstract),e.Events.BlockBase.prototype.toJson=function(){var t=e.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},e.Events.BlockBase.prototype.fromJson=function(t){e.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},e.Events.BlockChange=function(t,n,r,s,c){e.Events.Change.superClass_.constructor.call(this,t),t&&(this.element=void 0===n?"":n,this.name=void 0===r?"":r,this.oldValue=void 0===s?"":s,this.newValue=void 0===c?"":c)},e.utils.object.inherits(e.Events.BlockChange,e.Events.BlockBase),e.Events.Change=e.Events.BlockChange,e.Events.BlockChange.prototype.type=e.Events.CHANGE,e.Events.BlockChange.prototype.toJson=function(){var t=e.Events.BlockChange.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},e.Events.BlockChange.prototype.fromJson=function(t){e.Events.BlockChange.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},e.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},e.Events.BlockChange.prototype.run=function(t){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(t||null);break;case"collapsed":n.setCollapsed(!!t);break;case"disabled":n.setEnabled(!t);break;case"inline":n.setInputsInline(!!t);break;case"mutation":var r="";if(n.mutationToDom&&(r=(r=n.mutationToDom())&&e.Xml.domToText(r)),n.domToMutation){var s=e.Xml.textToDom(t||"<mutation/>");n.domToMutation(s)}e.Events.fire(new e.Events.BlockChange(n,"mutation",null,r,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},e.Events.Create=function(t){e.Events.Create.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t))},e.utils.object.inherits(e.Events.Create,e.Events.BlockBase),e.Events.BlockCreate=e.Events.Create,e.Events.Create.prototype.type=e.Events.CREATE,e.Events.Create.prototype.toJson=function(){var t=e.Events.Create.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Create.prototype.fromJson=function(t){e.Events.Create.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Create.prototype.run=function(t){var n=this.getEventWorkspace_();if(t)(t=e.utils.xml.createElement("xml")).appendChild(this.xml),e.Xml.domToWorkspace(t,n);else{t=0;for(var r;r=this.ids[t];t++){var s=n.getBlockById(r);s?s.dispose(!1):r==this.blockId&&console.warn("Can't uncreate non-existent block: "+r)}}},e.Events.Delete=function(t){if(e.Events.Delete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t)}},e.utils.object.inherits(e.Events.Delete,e.Events.BlockBase),e.Events.BlockDelete=e.Events.Delete,e.Events.Delete.prototype.type=e.Events.DELETE,e.Events.Delete.prototype.toJson=function(){var t=e.Events.Delete.superClass_.toJson.call(this);return t.oldXml=e.Xml.domToText(this.oldXml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Delete.prototype.fromJson=function(t){e.Events.Delete.superClass_.fromJson.call(this,t),this.oldXml=e.Xml.textToDom(t.oldXml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Delete.prototype.run=function(t){var n=this.getEventWorkspace_();if(t){t=0;for(var r;r=this.ids[t];t++){var s=n.getBlockById(r);s?s.dispose(!1):r==this.blockId&&console.warn("Can't delete non-existent block: "+r)}}else(t=e.utils.xml.createElement("xml")).appendChild(this.oldXml),e.Xml.domToWorkspace(t,n)},e.Events.Move=function(t){e.Events.Move.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},e.utils.object.inherits(e.Events.Move,e.Events.BlockBase),e.Events.BlockMove=e.Events.Move,e.Events.Move.prototype.type=e.Events.MOVE,e.Events.Move.prototype.toJson=function(){var t=e.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Move.prototype.fromJson=function(t){if(e.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var n=t.newCoordinate.split(",");this.newCoordinate=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},e.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),n={},r=t.getParent();return r?(n.parentId=r.id,(t=r.getInputWithBlock(t))&&(n.inputName=t.name)):n.coordinate=t.getRelativeToSurfaceXY(),n},e.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&e.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},e.Events.Move.prototype.run=function(t){var n=this.getEventWorkspace_(),r=n.getBlockById(this.blockId);if(r){var s=t?this.newParentId:this.oldParentId,c=t?this.newInputName:this.oldInputName,v=t?this.newCoordinate:this.oldCoordinate;if(t=null,s&&!(t=n.getBlockById(s)))return void console.warn("Can't connect to non-existent block: "+s);if(r.getParent()&&r.unplug(),v)c=r.getRelativeToSurfaceXY(),r.moveBy(v.x-c.x,v.y-c.y);else{if(n=(r=r.outputConnection||r.previousConnection).type,c){if(t=t.getInput(c))var D=t.connection}else n==e.connectionTypes.PREVIOUS_STATEMENT&&(D=t.nextConnection);D?r.connect(D):console.warn("Can't connect to non-existent input: "+c)}}else console.warn("Can't move non-existent block: "+this.blockId)},e.registry.register(e.registry.Type.EVENT,e.Events.CREATE,e.Events.Create),e.registry.register(e.registry.Type.EVENT,e.Events.DELETE,e.Events.Delete),e.registry.register(e.registry.Type.EVENT,e.Events.CHANGE,e.Events.BlockChange),e.registry.register(e.registry.Type.EVENT,e.Events.MOVE,e.Events.Move),e.Events.FinishedLoading=function(t){this.isBlank=void 0===t,this.workspaceId=t?t.id:"",this.group=e.Events.getGroup(),this.recordUndo=!1},e.utils.object.inherits(e.Events.FinishedLoading,e.Events.Abstract),e.Events.FinishedLoading.prototype.type=e.Events.FINISHED_LOADING,e.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},e.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},e.registry.register(e.registry.Type.EVENT,e.Events.FINISHED_LOADING,e.Events.FinishedLoading),e.Events.UiBase=function(t){e.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===t,this.workspaceId=t||"",this.recordUndo=!1},e.utils.object.inherits(e.Events.UiBase,e.Events.Abstract),e.Events.UiBase.prototype.isUiEvent=!0,e.Events.Ui=function(t,n,r,s){e.Events.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===r?"":r,this.newValue=void 0===s?"":s},e.utils.object.inherits(e.Events.Ui,e.Events.UiBase),e.Events.Ui.prototype.type=e.Events.UI,e.Events.Ui.prototype.toJson=function(){var t=e.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},e.Events.Ui.prototype.fromJson=function(t){e.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.UI,e.Events.Ui),e.Events.VarBase=function(t){e.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===t)?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.VarBase,e.Events.Abstract),e.Events.VarBase.prototype.toJson=function(){var t=e.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},e.Events.VarBase.prototype.fromJson=function(t){e.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},e.Events.VarCreate=function(t){e.Events.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarCreate,e.Events.VarBase),e.Events.VarCreate.prototype.type=e.Events.VAR_CREATE,e.Events.VarCreate.prototype.toJson=function(){var t=e.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarCreate.prototype.fromJson=function(t){e.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarCreate.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},e.Events.VarDelete=function(t){e.Events.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarDelete,e.Events.VarBase),e.Events.VarDelete.prototype.type=e.Events.VAR_DELETE,e.Events.VarDelete.prototype.toJson=function(){var t=e.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarDelete.prototype.fromJson=function(t){e.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarDelete.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},e.Events.VarRename=function(t,n){e.Events.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=void 0===n?"":n)},e.utils.object.inherits(e.Events.VarRename,e.Events.VarBase),e.Events.VarRename.prototype.type=e.Events.VAR_RENAME,e.Events.VarRename.prototype.toJson=function(){var t=e.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},e.Events.VarRename.prototype.fromJson=function(t){e.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},e.Events.VarRename.prototype.run=function(t){this.getEventWorkspace_().renameVariableById(this.varId,t?this.newName:this.oldName)},e.registry.register(e.registry.Type.EVENT,e.Events.VAR_CREATE,e.Events.VarCreate),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_DELETE,e.Events.VarDelete),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_RENAME,e.Events.VarRename),e.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.BlockDragSurfaceSvg.prototype.SVG_=null,e.BlockDragSurfaceSvg.prototype.dragGroup_=null,e.BlockDragSurfaceSvg.prototype.container_=null,e.BlockDragSurfaceSvg.prototype.scale_=1,e.BlockDragSurfaceSvg.prototype.surfaceXY_=null,e.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new e.utils.Coordinate(0,0),e.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.SVG_))},e.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new e.utils.Coordinate(0,0)},e.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,n,r){this.scale_=r,t=t.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+t+","+n+") scale("+r+")")},e.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,n=this.surfaceXY_.y;t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.BlockDragSurfaceSvg.prototype.translateBy=function(t,n){this.surfaceXY_=new e.utils.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.translateSurface=function(t,n){this.surfaceXY_=new e.utils.Coordinate(t*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=e.utils.getRelativeXY(this.SVG_);return new e.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},e.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},e.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},e.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},e.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},e.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},e.Css={},e.Css.injected_=!1,e.Css.register=function(t){if(e.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(e.Css.CONTENT,t),t.length=0},e.Css.inject=function(t,n){if(!e.Css.injected_){e.Css.injected_=!0;var r=e.Css.CONTENT.join("\n");e.Css.CONTENT.length=0,t&&(t=n.replace(/[\\/]$/,""),r=r.replace(/<<<PATH>>>/g,t),(t=document.createElement("style")).id="blockly-common-style",r=document.createTextNode(r),t.appendChild(r),document.head.insertBefore(t,document.head.firstChild))}},e.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],e.Grid=function(t,n){this.gridPattern_=t,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},e.Grid.prototype.scale_=1,e.Grid.prototype.dispose=function(){this.gridPattern_=null},e.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},e.Grid.prototype.getSpacing=function(){return this.spacing_},e.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},e.Grid.prototype.update=function(t){this.scale_=t;var n=this.spacing_*t||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var r=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,s=n+this.length_/2;this.setLineAttributes_(this.line1_,t,r*=t,s*=t,n*=t,n),this.setLineAttributes_(this.line2_,t,n,n,r,s)},e.Grid.prototype.setLineAttributes_=function(t,n,r,s,c,v){t&&(t.setAttribute("stroke-width",n),t.setAttribute("x1",r),t.setAttribute("y1",c),t.setAttribute("x2",s),t.setAttribute("y2",v))},e.Grid.prototype.moveTo=function(t,n){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",n),(e.utils.userAgent.IE||e.utils.userAgent.EDGE)&&this.update(this.scale_)},e.Grid.createDom=function(t,n,r){return t=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},r),0<n.length&&0<n.spacing?(e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t),1<n.length&&e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t)):e.utils.dom.createSvgElement(e.utils.Svg.LINE,{},t),t},e.Theme=function(t,n,r,s){this.name=t,this.blockStyles=n||Object.create(null),this.categoryStyles=r||Object.create(null),this.componentStyles=s||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,e.registry.register(e.registry.Type.THEME,t,this)},e.Theme.prototype.getClassName=function(){return this.name+"-theme"},e.Theme.prototype.setBlockStyle=function(t,n){this.blockStyles[t]=n},e.Theme.prototype.setCategoryStyle=function(t,n){this.categoryStyles[t]=n},e.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},e.Theme.prototype.setComponentStyle=function(t,n){this.componentStyles[t]=n},e.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},e.Theme.prototype.setStartHats=function(t){this.startHats=t},e.Theme.defineTheme=function(t,n){var r=new e.Theme(t),s=n.base;return s&&("string"==typeof s&&(s=e.registry.getObject(e.registry.Type.THEME,s)),s instanceof e.Theme&&(e.utils.object.deepMerge(r,s),r.name=t)),e.utils.object.deepMerge(r.blockStyles,n.blockStyles),e.utils.object.deepMerge(r.categoryStyles,n.categoryStyles),e.utils.object.deepMerge(r.componentStyles,n.componentStyles),e.utils.object.deepMerge(r.fontStyle,n.fontStyle),null!=n.startHats&&(r.startHats=n.startHats),r},e.Themes={},e.Themes.Classic={},e.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},e.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},e.Themes.Classic=new e.Theme("classic",e.Themes.Classic.defaultBlockStyles,e.Themes.Classic.categoryStyles),e.utils.IdGenerator={},e.utils.IdGenerator.nextId_=0,e.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(e.utils.IdGenerator.nextId_++).toString(36)},e.utils.Metrics=function(){},e.utils.toolbox={},e.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",e.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",e.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},e.utils.toolbox.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=e.utils.toolbox.parseToolboxTree(t),t=e.utils.toolbox.convertToToolboxJson_(t)),e.utils.toolbox.validateToolbox_(t),t):null},e.utils.toolbox.validateToolbox_=function(t){var n=t.kind;if(t=t.contents,n&&n!=e.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=e.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+e.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+e.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!t)throw Error("Toolbox must have a contents attribute.")},e.utils.toolbox.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:e.utils.toolbox.xmlToJsonArray_(t):[]},e.utils.toolbox.hasCategories=function(t){if(!t)return!1;var n=t.kind;return n?n==e.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!t.contents.filter(function(r){return"CATEGORY"==r.kind.toUpperCase()}).length},e.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},e.utils.toolbox.convertToToolboxJson_=function(t){var n={contents:e.utils.toolbox.xmlToJsonArray_(t)};return t instanceof Node&&e.utils.toolbox.addAttributes_(t,n),n},e.utils.toolbox.xmlToJsonArray_=function(t){var s,n=[],r=t.childNodes;for(r||(r=t),t=0;s=r[t];t++)if(s.tagName){var c={},v=s.tagName.toUpperCase();c.kind=v,"BLOCK"==v?c.blockxml=s:s.childNodes&&0<s.childNodes.length&&(c.contents=e.utils.toolbox.xmlToJsonArray_(s)),e.utils.toolbox.addAttributes_(s,c),n.push(c)}return n},e.utils.toolbox.addAttributes_=function(t,n){for(var r=0;r<t.attributes.length;r++){var s=t.attributes[r];-1<s.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[s.nodeName.replace("css-","")]=s.value):n[s.nodeName]=s.value}},e.utils.toolbox.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(e.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=e.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},e.Options=function(t){var n=!!t.readOnly;if(n)var r=null,s=!1,c=!1,v=!1,D=!1,P=!1,G=!1;else{r=e.utils.toolbox.convertToolboxDefToJson(t.toolbox),s=e.utils.toolbox.hasCategories(r),void 0===(c=t.trashcan)&&(c=s);var it=t.maxTrashcanContents;c?void 0===it&&(it=32):it=0,void 0===(v=t.collapse)&&(v=s),void 0===(D=t.comments)&&(D=s),void 0===(P=t.disable)&&(P=s),void 0===(G=t.sounds)&&(G=!0)}var q=!!t.rtl,bt=t.horizontalLayout;void 0===bt&&(bt=!1);var Ft=t.toolboxPosition;Ft="end"!==Ft,Ft=bt?Ft?e.utils.toolbox.Position.TOP:e.utils.toolbox.Position.BOTTOM:Ft==q?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT;var gt=t.css;void 0===gt&&(gt=!0);var wt="https://blockly-demo.appspot.com/static/media/";t.media?wt=t.media:t.path&&(wt=t.path+"media/");var Bt=void 0===t.oneBasedIndex||!!t.oneBasedIndex,Kt=t.renderer||"geras",It=t.plugins||{};this.RTL=q,this.oneBasedIndex=Bt,this.collapse=v,this.comments=D,this.disable=P,this.readOnly=n,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=wt,this.hasCategories=s,this.moveOptions=e.Options.parseMoveOptions_(t,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=c,this.maxTrashcanContents=it,this.hasSounds=G,this.hasCss=gt,this.horizontalLayout=bt,this.languageTree=r,this.gridOptions=e.Options.parseGridOptions_(t),this.zoomOptions=e.Options.parseZoomOptions_(t),this.toolboxPosition=Ft,this.theme=e.Options.parseThemeOptions_(t),this.renderer=Kt,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=It},e.BlocklyOptions=function(){},e.Options.parseMoveOptions_=function(t,n){var r=t.move||{},s={};return void 0===r.scrollbars&&void 0===t.scrollbars?s.scrollbars=n:"object"==typeof r.scrollbars?(s.scrollbars={},s.scrollbars.horizontal=!!r.scrollbars.horizontal,s.scrollbars.vertical=!!r.scrollbars.vertical,s.scrollbars.horizontal&&s.scrollbars.vertical?s.scrollbars=!0:s.scrollbars.horizontal||s.scrollbars.vertical||(s.scrollbars=!1)):s.scrollbars=!!r.scrollbars||!!t.scrollbars,s.wheel=s.scrollbars&&void 0!==r.wheel?!!r.wheel:"object"==typeof s.scrollbars,s.drag=!(!s.scrollbars||void 0!==r.drag&&!r.drag),s},e.Options.parseZoomOptions_=function(t){var n={};return n.controls=void 0!==(t=t.zoom||{}).controls&&!!t.controls,n.wheel=void 0!==t.wheel&&!!t.wheel,n.startScale=void 0===t.startScale?1:Number(t.startScale),n.maxScale=void 0===t.maxScale?3:Number(t.maxScale),n.minScale=void 0===t.minScale?.3:Number(t.minScale),n.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),n.pinch=void 0===t.pinch?n.wheel||n.controls:!!t.pinch,n},e.Options.parseGridOptions_=function(t){t=t.grid||{};var n={};return n.spacing=Number(t.spacing)||0,n.colour=t.colour||"#888",n.length=void 0===t.length?1:Number(t.length),n.snap=0<n.spacing&&!!t.snap,n},e.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||e.Themes.Classic)?e.registry.getObject(e.registry.Type.THEME,t):t instanceof e.Theme?t:e.Theme.defineTheme(t.name||"builtin"+e.utils.IdGenerator.getNextUniqueId(),t)},e.Options.parseToolboxTree=function(t){return e.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),e.utils.toolbox.parseToolboxTree(t)},e.ScrollbarPair=function(t,n,r,s,c){this.workspace_=t,r=void 0===r||r;var v=(n=void 0===n||n)&&r;n&&(this.hScroll=new e.Scrollbar(t,!0,v,s,c)),r&&(this.vScroll=new e.Scrollbar(t,!1,v,s,c)),v&&(this.corner_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:e.Scrollbar.scrollbarThickness,width:e.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),e.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null},e.ScrollbarPair.prototype.dispose=function(){e.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},e.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var n=!1,r=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==t.scrollWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.scrollLeft==t.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==t.scrollHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.scrollTop==t.scrollTop||(r=!0)):r=n=!0,n||r){try{e.Events.disable(),this.hScroll&&n&&this.hScroll.resize(t),this.vScroll&&r&&this.vScroll.resize(t)}finally{e.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},e.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},e.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},e.ScrollbarPair.prototype.setOrigin=function(t,n){this.hScroll&&this.hScroll.setOrigin(t,n),this.vScroll&&this.vScroll.setOrigin(t,n)},e.ScrollbarPair.prototype.set=function(t,n,r){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(n,!1),(r||void 0===r)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},e.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},e.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},e.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},e.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},e.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},e.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},e.Scrollbar=function(t,n,r,s,c){this.workspace_=t,this.pair_=r||!1,this.horizontal_=n,this.margin_=void 0!==c?c:e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(s),this.position=new e.utils.Coordinate(0,0),t=e.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=e.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},e.Scrollbar.prototype.origin_=new e.utils.Coordinate(0,0),e.Scrollbar.prototype.startDragMouse_=0,e.Scrollbar.prototype.scrollbarLength_=0,e.Scrollbar.prototype.handleLength_=0,e.Scrollbar.prototype.handlePosition_=0,e.Scrollbar.prototype.isVisible_=!0,e.Scrollbar.prototype.containerVisible_=!0,e.Scrollbar.scrollbarThickness=15,e.Touch.TOUCH_ENABLED&&(e.Scrollbar.scrollbarThickness=25),e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,e.Scrollbar.metricsAreEquivalent_=function(t,n){return t.viewWidth==n.viewWidth&&t.viewHeight==n.viewHeight&&t.viewLeft==n.viewLeft&&t.viewTop==n.viewTop&&t.absoluteTop==n.absoluteTop&&t.absoluteLeft==n.absoluteLeft&&t.scrollWidth==n.scrollWidth&&t.scrollHeight==n.scrollHeight&&t.scrollLeft==n.scrollLeft&&t.scrollTop==n.scrollTop},e.Scrollbar.prototype.dispose=function(){this.cleanUp_(),e.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,e.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,e.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},e.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},e.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},e.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},e.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},e.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},e.Scrollbar.prototype.setPosition=function(t,n){this.position.x=t,this.position.y=n,e.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},e.Scrollbar.prototype.resize=function(t){!t&&!(t=this.workspace_.getMetrics())||this.oldHostMetrics_&&e.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},e.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},e.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeViewHorizontal=function(t){var n=t.viewWidth-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=e.Scrollbar.scrollbarThickness),this.setPosition(n,t.absoluteTop+t.viewHeight-e.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewWidth/t.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var r=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewLeft-t.scrollLeft)/(n=t.scrollWidth-t.viewWidth)*r),this.setHandlePosition(t),this.ratio=r/n}},e.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeViewVertical=function(t){var n=t.viewHeight-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-e.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewHeight/t.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var r=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewTop-t.scrollTop)/(n=t.scrollHeight-t.viewHeight)*r),this.setHandlePosition(t),this.ratio=r/n}},e.Scrollbar.prototype.createDom_=function(t){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(n+=" "+t),this.outerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{class:n},null),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((e.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),e.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},e.Scrollbar.prototype.isVisible=function(){return this.isVisible_},e.Scrollbar.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.setVisible=function(t){var n=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},e.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),e.Touch.clearTouchIdentifier(),this.cleanUp_(),e.utils.isRightButton(t))t.stopPropagation();else{var n=e.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var r=e.utils.getInjectionDivXY_(this.svgHandle_),s=this.handlePosition_,c=.95*this.handleLength_;n<=(r=this.horizontal_?r.x:r.y)?s-=c:n>=r+this.handleLength_&&(s+=c),this.setHandlePosition(this.constrainHandlePosition_(s)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},e.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),e.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,e.Scrollbar.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),e.Scrollbar.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},e.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},e.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),e.Touch.clearTouchIdentifier(),this.cleanUp_()},e.Scrollbar.prototype.cleanUp_=function(){e.hideChaff(!0),e.Scrollbar.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseUpWrapper_),e.Scrollbar.onMouseUpWrapper_=null),e.Scrollbar.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseMoveWrapper_),e.Scrollbar.onMouseMoveWrapper_=null)},e.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},e.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),n={};this.horizontal_?n.x=t:n.y=t,this.workspace_.setMetrics(n)},e.Scrollbar.prototype.set=function(t,n){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},e.Scrollbar.prototype.setOrigin=function(t,n){this.origin_=new e.utils.Coordinate(t,n)},e.Tooltip={},e.Tooltip.visible=!1,e.Tooltip.blocked_=!1,e.Tooltip.LIMIT=50,e.Tooltip.mouseOutPid_=0,e.Tooltip.showPid_=0,e.Tooltip.lastX_=0,e.Tooltip.lastY_=0,e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.OFFSET_X=0,e.Tooltip.OFFSET_Y=10,e.Tooltip.RADIUS_OK=10,e.Tooltip.HOVER_MS=750,e.Tooltip.MARGINS=5,e.Tooltip.DIV=null,e.Tooltip.getTooltipOfObject=function(t){if(t=e.Tooltip.getTargetObject_(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},e.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},e.Tooltip.createDom=function(){e.Tooltip.DIV||(e.Tooltip.DIV=document.createElement("div"),e.Tooltip.DIV.className="blocklyTooltipDiv",(e.parentContainer||document.body).appendChild(e.Tooltip.DIV))},e.Tooltip.bindMouseEvents=function(t){t.mouseOverWrapper_=e.browserEvents.bind(t,"mouseover",null,e.Tooltip.onMouseOver_),t.mouseOutWrapper_=e.browserEvents.bind(t,"mouseout",null,e.Tooltip.onMouseOut_),t.addEventListener("mousemove",e.Tooltip.onMouseMove_,!1)},e.Tooltip.unbindMouseEvents=function(t){t&&(e.browserEvents.unbind(t.mouseOverWrapper_),e.browserEvents.unbind(t.mouseOutWrapper_),t.removeEventListener("mousemove",e.Tooltip.onMouseMove_))},e.Tooltip.onMouseOver_=function(t){e.Tooltip.blocked_||(t=e.Tooltip.getTargetObject_(t.currentTarget),e.Tooltip.element_!=t&&(e.Tooltip.hide(),e.Tooltip.poisonedElement_=null,e.Tooltip.element_=t),clearTimeout(e.Tooltip.mouseOutPid_))},e.Tooltip.onMouseOut_=function(t){e.Tooltip.blocked_||(e.Tooltip.mouseOutPid_=setTimeout(function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},1),clearTimeout(e.Tooltip.showPid_))},e.Tooltip.onMouseMove_=function(t){if(e.Tooltip.element_&&e.Tooltip.element_.tooltip&&!e.Tooltip.blocked_)if(e.Tooltip.visible){var n=e.Tooltip.lastX_-t.pageX;t=e.Tooltip.lastY_-t.pageY,Math.sqrt(n*n+t*t)>e.Tooltip.RADIUS_OK&&e.Tooltip.hide()}else e.Tooltip.poisonedElement_!=e.Tooltip.element_&&(clearTimeout(e.Tooltip.showPid_),e.Tooltip.lastX_=t.pageX,e.Tooltip.lastY_=t.pageY,e.Tooltip.showPid_=setTimeout(e.Tooltip.show_,e.Tooltip.HOVER_MS))},e.Tooltip.dispose=function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},e.Tooltip.hide=function(){e.Tooltip.visible&&(e.Tooltip.visible=!1,e.Tooltip.DIV&&(e.Tooltip.DIV.style.display="none")),e.Tooltip.showPid_&&clearTimeout(e.Tooltip.showPid_)},e.Tooltip.block=function(){e.Tooltip.hide(),e.Tooltip.blocked_=!0},e.Tooltip.unblock=function(){e.Tooltip.blocked_=!1},e.Tooltip.show_=function(){if(!e.Tooltip.blocked_&&(e.Tooltip.poisonedElement_=e.Tooltip.element_,e.Tooltip.DIV)){e.Tooltip.DIV.textContent="";var t=e.Tooltip.getTooltipOfObject(e.Tooltip.element_);t=(t=e.utils.string.wrap(t,e.Tooltip.LIMIT)).split("\n");for(var n=0;n<t.length;n++){var r=document.createElement("div");r.appendChild(document.createTextNode(t[n])),e.Tooltip.DIV.appendChild(r)}t=e.Tooltip.element_.RTL,n=document.documentElement.clientWidth,r=document.documentElement.clientHeight,e.Tooltip.DIV.style.direction=t?"rtl":"ltr",e.Tooltip.DIV.style.display="block",e.Tooltip.visible=!0;var s=e.Tooltip.lastX_;s=t?s-(e.Tooltip.OFFSET_X+e.Tooltip.DIV.offsetWidth):s+e.Tooltip.OFFSET_X;var c=e.Tooltip.lastY_+e.Tooltip.OFFSET_Y;c+e.Tooltip.DIV.offsetHeight>r+window.scrollY&&(c-=e.Tooltip.DIV.offsetHeight+2*e.Tooltip.OFFSET_Y),t?s=Math.max(e.Tooltip.MARGINS-window.scrollX,s):s+e.Tooltip.DIV.offsetWidth>n+window.scrollX-2*e.Tooltip.MARGINS&&(s=n-e.Tooltip.DIV.offsetWidth-2*e.Tooltip.MARGINS),e.Tooltip.DIV.style.top=c+"px",e.Tooltip.DIV.style.left=s+"px"}},e.utils.aria={},e.utils.aria.ARIA_PREFIX_="aria-",e.utils.aria.ROLE_ATTRIBUTE_="role",e.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},e.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},e.utils.aria.setRole=function(t,n){t.setAttribute(e.utils.aria.ROLE_ATTRIBUTE_,n)},e.utils.aria.setState=function(t,n,r){Array.isArray(r)&&(r=r.join(" ")),t.setAttribute(e.utils.aria.ARIA_PREFIX_+n,r)},e.IASTNodeLocation=function(){},e.IASTNodeLocationSvg=function(){},e.IASTNodeLocationWithBlock=function(){},e.IKeyboardAccessible=function(){},e.utils.deprecation={},e.utils.deprecation.warn=function(t,n,r,s){t=t+" was deprecated on "+n+" and will be deleted on "+r+".",s&&(t+="\nUse "+s+" instead."),console.warn(t)},e.Connection=function(t,n){this.sourceBlock_=t,this.type=n},e.Connection.CAN_CONNECT=0,e.Connection.REASON_SELF_CONNECTION=1,e.Connection.REASON_WRONG_TYPE=2,e.Connection.REASON_TARGET_NULL=3,e.Connection.REASON_CHECKS_FAILED=4,e.Connection.REASON_DIFFERENT_WORKSPACES=5,e.Connection.REASON_SHADOW_PARENT=6,e.Connection.REASON_DRAG_CHECKS_FAILED=7,e.Connection.prototype.targetConnection=null,e.Connection.prototype.disposed=!1,e.Connection.prototype.check_=null,e.Connection.prototype.shadowDom_=null,e.Connection.prototype.x=0,e.Connection.prototype.y=0,e.Connection.prototype.connect_=function(t){var P,n=e.connectionTypes.INPUT_VALUE,r=this.getSourceBlock(),s=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var c=this.getShadowDom(!0);this.shadowDom_=null;var v=this.targetBlock();if(v.isShadow())v.dispose(!1);else{this.disconnect();var D=v}this.shadowDom_=c}e.Events.isEnabled()&&(P=new(e.Events.get(e.Events.BLOCK_MOVE))(s)),e.Connection.connectReciprocally_(this,t),s.setParent(r),P&&(P.recordNew(),e.Events.fire(P)),D&&((s=e.Connection.getConnectionForOrphanedConnection(s,t=this.type===n?D.outputConnection:D.previousConnection))?t.connect(s):t.onFailedConnect(this))},e.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},e.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Connection.prototype.isSuperior=function(){return this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.NEXT_STATEMENT},e.Connection.prototype.isConnected=function(){return!!this.targetConnection},e.Connection.prototype.canConnectWithReason=function(t){return e.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,t,!1)},e.Connection.prototype.checkConnection=function(t){e.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),r=n.canConnectWithReason(this,t,!1);if(r!=e.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(r,this,t))},e.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},e.Connection.prototype.isConnectionAllowed=function(t){return e.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!0)},e.Connection.prototype.onFailedConnect=function(t){},e.Connection.prototype.connect=function(t){if(this.targetConnection!=t&&this.getConnectionChecker().canConnect(this,t,!1)){var n=e.Events.getGroup();n||e.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n||e.Events.setGroup(!1)}},e.Connection.connectReciprocally_=function(t,n){if(!t||!n)throw Error("Cannot connect null connections.");t.targetConnection=n,n.targetConnection=t},e.Connection.getSingleConnection_=function(t,n){for(var v,r=null,s=(n=n.outputConnection).getConnectionChecker(),c=0;v=t.inputList[c];c++)if((v=v.connection)&&s.canConnect(n,v,!1)){if(r)return null;r=v}return r},e.Connection.getConnectionForOrphanedOutput_=function(t,n){for(var r;r=e.Connection.getSingleConnection_(t,n);)if(!(t=r.targetBlock())||t.isShadow())return r;return null},e.Connection.getConnectionForOrphanedConnection=function(t,n){if(n.type===e.connectionTypes.OUTPUT_VALUE)return e.Connection.getConnectionForOrphanedOutput_(t,n.getSourceBlock());t=t.lastConnectionInStack(!0);var r=n.getConnectionChecker();return t&&r.canConnect(n,t,!1)?t:null},e.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,r=t.getSourceBlock();t=this}else n=t.getSourceBlock(),r=this.sourceBlock_;var s=e.Events.getGroup();s||e.Events.setGroup(!0),this.disconnectInternal_(n,r),r.isShadow()||t.respawnShadow_(),s||e.Events.setGroup(!1)},e.Connection.prototype.disconnectInternal_=function(t,n){var r;e.Events.isEnabled()&&(r=new(e.Events.get(e.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),r&&(r.recordNew(),e.Events.fire(r))},e.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n)if((t=e.Xml.domToBlock(n,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},e.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},e.Connection.prototype.checkType=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!1)},e.Connection.prototype.checkType_=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(t)},e.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},e.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},e.Connection.prototype.getCheck=function(){return this.check_},e.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},e.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?e.Xml.blockToDom(this.targetBlock()):this.shadowDom_},e.Connection.prototype.neighbours=function(t){return[]},e.Connection.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_.inputList,r=0;r<n.length;r++)if(n[r].connection===this){t=n[r];break}return t},e.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var n="Output Connection of ";else if(t.previousConnection==this)n="Previous Connection of ";else if(t.nextConnection==this)n="Next Connection of ";else{n=null;for(var s,r=0;s=t.inputList[r];r++)if(s.connection==this){n=s;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+t.toDevString()},e.IConnectionChecker=function(){},e.ConnectionChecker=function(){},e.ConnectionChecker.prototype.canConnect=function(t,n,r,s){return this.canConnectWithReason(t,n,r,s)==e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.canConnectWithReason=function(t,n,r,s){var c=this.doSafetyChecks(t,n);return c!=e.Connection.CAN_CONNECT?c:this.doTypeChecks(t,n)?r&&!this.doDragChecks(t,n,s||0)?e.Connection.REASON_DRAG_CHECKS_FAILED:e.Connection.CAN_CONNECT:e.Connection.REASON_CHECKS_FAILED},e.ConnectionChecker.prototype.getErrorMessage=function(t,n,r){switch(t){case e.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case e.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case e.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case e.Connection.REASON_TARGET_NULL:return"Target connection is null.";case e.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+r.getCheck();case e.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case e.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},e.ConnectionChecker.prototype.doSafetyChecks=function(t,n){if(!t||!n)return e.Connection.REASON_TARGET_NULL;if(t.isSuperior())var r=t.getSourceBlock(),s=n.getSourceBlock();else s=t.getSourceBlock(),r=n.getSourceBlock();return r==s?e.Connection.REASON_SELF_CONNECTION:n.type!=e.OPPOSITE_TYPE[t.type]?e.Connection.REASON_WRONG_TYPE:r.workspace!==s.workspace?e.Connection.REASON_DIFFERENT_WORKSPACES:r.isShadow()&&!s.isShadow()?e.Connection.REASON_SHADOW_PARENT:e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.doTypeChecks=function(t,n){if(t=t.getCheck(),n=n.getCheck(),!t||!n)return!0;for(var r=0;r<t.length;r++)if(-1!=n.indexOf(t[r]))return!0;return!1},e.ConnectionChecker.prototype.doDragChecks=function(t,n,r){if(t.distanceFrom(n)>r||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case e.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,n);case e.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case e.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case e.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!t.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==e.draggingConnections.indexOf(n)},e.ConnectionChecker.prototype.canConnectToPrevious_=function(t,n){return!(t.targetConnection||-1!=e.draggingConnections.indexOf(n)||n.targetConnection&&(!(t=n.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},e.registry.register(e.registry.Type.CONNECTION_CHECKER,e.registry.DEFAULT,e.ConnectionChecker),e.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},e.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},e.VariableMap.prototype.renameVariable=function(t,n){var r=this.getVariable(n,t.type),s=this.workspace.getAllBlocks(!1);e.Events.setGroup(!0);try{r&&r.getId()!=t.getId()?this.renameVariableWithConflict_(t,n,r,s):this.renameVariableAndUses_(t,n,s)}finally{e.Events.setGroup(!1)}},e.VariableMap.prototype.renameVariableById=function(t,n){var r=this.getVariableById(t);if(!r)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(r,n)},e.VariableMap.prototype.renameVariableAndUses_=function(t,n,r){for(e.Events.fire(new(e.Events.get(e.Events.VAR_RENAME))(t,n)),t.name=n,n=0;n<r.length;n++)r[n].updateVarName(t)},e.VariableMap.prototype.renameVariableWithConflict_=function(t,n,r,s){var c=t.type;for(n!=r.name&&this.renameVariableAndUses_(r,n,s),n=0;n<s.length;n++)s[n].renameVarById(t.getId(),r.getId());e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t)),t=this.getVariablesOfType(c).indexOf(t),this.variableMap_[c].splice(t,1)},e.VariableMap.prototype.createVariable=function(t,n,r){var s=this.getVariable(t,n);if(s){if(r&&s.getId()!=r)throw Error('Variable "'+t+'" is already in use and its id is "'+s.getId()+'" which conflicts with the passed in id, "'+r+'".');return s}if(r&&this.getVariableById(r))throw Error('Variable id, "'+r+'", is already in use.');return s=r||e.utils.genUid(),s=new e.VariableModel(this.workspace,t,n=n||"",s),(t=this.variableMap_[n]||[]).push(s),delete this.variableMap_[n],this.variableMap_[n]=t,s},e.VariableMap.prototype.deleteVariable=function(t){for(var s,n=this.variableMap_[t.type],r=0;s=n[r];r++)if(s.getId()==t.getId()){n.splice(r,1),e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t));break}},e.VariableMap.prototype.deleteVariableById=function(t){var n=this.getVariableById(t);if(n){var c,r=n.name,s=this.getVariableUsesById(t);for(t=0;c=s[t];t++)if("procedures_defnoreturn"==c.type||"procedures_defreturn"==c.type)return t=c.getFieldValue("NAME"),r=e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",r).replace("%2",t),void e.alert(r);var v=this;1<s.length?(r=e.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(s.length)).replace("%2",r),e.confirm(r,function(D){D&&n&&v.deleteVariableInternal(n,s)})):v.deleteVariableInternal(n,s)}else console.warn("Can't delete non-existent variable: "+t)},e.VariableMap.prototype.deleteVariableInternal=function(t,n){var r=e.Events.getGroup();r||e.Events.setGroup(!0);try{for(var s=0;s<n.length;s++)n[s].dispose(!0);this.deleteVariable(t)}finally{r||e.Events.setGroup(!1)}},e.VariableMap.prototype.getVariable=function(t,n){if(n=this.variableMap_[n||""])for(var s,r=0;s=n[r];r++)if(e.Names.equals(s.name,t))return s;return null},e.VariableMap.prototype.getVariableById=function(t){for(var n=Object.keys(this.variableMap_),r=0;r<n.length;r++)for(var v,s=n[r],c=0;v=this.variableMap_[s][c];c++)if(v.getId()==t)return v;return null},e.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},e.VariableMap.prototype.getVariableTypes=function(t){var n={};e.utils.object.mixin(n,this.variableMap_),t&&t.getPotentialVariableMap()&&e.utils.object.mixin(n,t.getPotentialVariableMap().variableMap_),t=Object.keys(n),n=!1;for(var r=0;r<t.length;r++)""==t[r]&&(n=!0);return n||t.push(""),t},e.VariableMap.prototype.getAllVariables=function(){var n,t=[];for(n in this.variableMap_)t=t.concat(this.variableMap_[n]);return t},e.VariableMap.prototype.getAllVariableNames=function(){var n,t=[];for(n in this.variableMap_)for(var c,r=this.variableMap_[n],s=0;c=r[s];s++)t.push(c.name);return t},e.VariableMap.prototype.getVariableUsesById=function(t){for(var n=[],r=this.workspace.getAllBlocks(!1),s=0;s<r.length;s++){var c=r[s].getVarModels();if(c)for(var v=0;v<c.length;v++)c[v].getId()==t&&n.push(r[s])}return n},e.Workspace=function(t){this.id=e.utils.genUid(),e.Workspace.WorkspaceDB_[this.id]=this,this.options=t||new e.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(e.registry.getClassFromOptions(e.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new e.VariableMap(this),this.potentialVariableMap_=null},e.Workspace.prototype.rendered=!1,e.Workspace.prototype.isClearing=!1,e.Workspace.prototype.MAX_UNDO=1024,e.Workspace.prototype.connectionDBList=null,e.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete e.Workspace.WorkspaceDB_[this.id]},e.Workspace.SCAN_ANGLE=3,e.Workspace.prototype.sortObjects_=function(t,n){return t=t.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),t.y+e.Workspace.prototype.sortObjects_.offset*t.x-(n.y+e.Workspace.prototype.sortObjects_.offset*n.x)},e.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},e.Workspace.prototype.removeTopBlock=function(t){if(!e.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},e.Workspace.prototype.getTopBlocks=function(t){var n=[].concat(this.topBlocks_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},e.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},e.Workspace.prototype.getBlocksByType=function(t,n){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),n&&1<t.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t):[]},e.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},e.Workspace.prototype.removeTopComment=function(t){if(!e.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},e.Workspace.prototype.getTopComments=function(t){var n=[].concat(this.topComments_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var n=[],r=0;r<t.length;r++)n.push.apply(n,t[r].getDescendants(!0))}else for(n=this.getTopBlocks(!1),r=0;r<n.length;r++)n.push.apply(n,n[r].getChildren(!1));return n.filter(function(s){return!s.isInsertionMarker()})},e.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=e.Events.getGroup();for(t||e.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);t||e.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},e.Workspace.prototype.renameVariableById=function(t,n){this.variableMap_.renameVariableById(t,n)},e.Workspace.prototype.createVariable=function(t,n,r){return this.variableMap_.createVariable(t,n,r)},e.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},e.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},e.Workspace.prototype.getVariable=function(t,n){return this.variableMap_.getVariable(t,n)},e.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},e.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},e.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},e.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},e.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},e.Workspace.prototype.getWidth=function(){return 0},e.Workspace.prototype.newBlock=function(t,n){return new e.Block(this,t,n)},e.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},e.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},e.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var r,n=0;for(r in t){if(t[r]>this.remainingCapacityOfType(r))return!1;n+=t[r]}return!(n>this.remainingCapacity())},e.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},e.Workspace.prototype.getUndoStack=function(){return this.undoStack_},e.Workspace.prototype.getRedoStack=function(){return this.redoStack_},e.Workspace.prototype.undo=function(t){var n=t?this.redoStack_:this.undoStack_,r=t?this.undoStack_:this.redoStack_,s=n.pop();if(s){for(var c=[s];n.length&&s.group&&s.group==n[n.length-1].group;)c.push(n.pop());for(n=0;s=c[n];n++)r.push(s);c=e.Events.filter(c,t),e.Events.recordUndo=!1;try{for(n=0;s=c[n];n++)s.run(t)}finally{e.Events.recordUndo=!0}}},e.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,e.Events.clearPendingUndo()},e.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},e.Workspace.prototype.removeChangeListener=function(t){e.utils.arrayRemove(this.listeners_,t)},e.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var r,n=0;r=this.listeners_[n];n++)r(t)},e.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},e.Workspace.prototype.setBlockById=function(t,n){this.blockDB_[t]=n},e.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},e.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},e.Workspace.prototype.allInputsFilled=function(t){for(var s,n=this.getTopBlocks(!1),r=0;s=n[r];r++)if(!s.allInputsFilled(t))return!1;return!0},e.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},e.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new e.VariableMap(this)},e.Workspace.prototype.getVariableMap=function(){return this.variableMap_},e.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},e.Workspace.WorkspaceDB_=Object.create(null),e.Workspace.getById=function(t){return e.Workspace.WorkspaceDB_[t]||null},e.Workspace.getAll=function(){var n,t=[];for(n in e.Workspace.WorkspaceDB_)t.push(e.Workspace.WorkspaceDB_[n]);return t},e.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.WorkspaceDragSurfaceSvg.prototype.SVG_=null,e.WorkspaceDragSurfaceSvg.prototype.container_=null,e.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},e.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,n){t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return e.utils.getRelativeXY(this.SVG_)},e.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],r=this.SVG_.childNodes[1];if(!(n&&r&&e.utils.dom.hasClass(n,"blocklyBlockCanvas")&&e.utils.dom.hasClass(r,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?e.utils.dom.insertAfter(n,this.previousSibling_):t.insertBefore(n,t.firstChild),e.utils.dom.insertAfter(r,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");e.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},e.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,n,r,s,c,v){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=r,t.setAttribute("transform","translate(0, 0) scale("+v+")"),n.setAttribute("transform","translate(0, 0) scale("+v+")"),this.SVG_.setAttribute("width",s),this.SVG_.setAttribute("height",c),this.SVG_.appendChild(t),this.SVG_.appendChild(n),this.SVG_.style.display="block"},e.blockRendering={},e.blockRendering.useDebugger=!1,e.blockRendering.register=function(t,n){e.registry.register(e.registry.Type.RENDERER,t,n)},e.blockRendering.unregister=function(t){e.registry.unregister(e.registry.Type.RENDERER,t)},e.blockRendering.startDebugger=function(){e.blockRendering.useDebugger=!0},e.blockRendering.stopDebugger=function(){e.blockRendering.useDebugger=!1},e.blockRendering.init=function(t,n,r){return(t=new(e.registry.getClass(e.registry.Type.RENDERER,t))(t)).init(n,r),t},e.ASTNode=function(t,n,r){if(!n)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=e.ASTNode.isConnectionType_(t),this.location_=n,this.wsCoordinate_=null,this.processParams_(r||null)},e.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},e.ASTNode.NAVIGATE_ALL_FIELDS=!1,e.ASTNode.DEFAULT_OFFSET_Y=-20,e.ASTNode.isConnectionType_=function(t){switch(t){case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:case e.ASTNode.types.INPUT:case e.ASTNode.types.OUTPUT:return!0}return!1},e.ASTNode.createFieldNode=function(t){return t?new e.ASTNode(e.ASTNode.types.FIELD,t):null},e.ASTNode.createConnectionNode=function(t){if(!t)return null;var n=t.type;return n==e.connectionTypes.INPUT_VALUE||n==e.connectionTypes.NEXT_STATEMENT&&t.getParentInput()?e.ASTNode.createInputNode(t.getParentInput()):n==e.connectionTypes.NEXT_STATEMENT?new e.ASTNode(e.ASTNode.types.NEXT,t):n==e.connectionTypes.OUTPUT_VALUE?new e.ASTNode(e.ASTNode.types.OUTPUT,t):n==e.connectionTypes.PREVIOUS_STATEMENT?new e.ASTNode(e.ASTNode.types.PREVIOUS,t):null},e.ASTNode.createInputNode=function(t){return t&&t.connection?new e.ASTNode(e.ASTNode.types.INPUT,t.connection):null},e.ASTNode.createBlockNode=function(t){return t?new e.ASTNode(e.ASTNode.types.BLOCK,t):null},e.ASTNode.createStackNode=function(t){return t?new e.ASTNode(e.ASTNode.types.STACK,t):null},e.ASTNode.createWorkspaceNode=function(t,n){return n&&t?new e.ASTNode(e.ASTNode.types.WORKSPACE,t,{wsCoordinate:n}):null},e.ASTNode.createTopNode=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},e.ASTNode.prototype.getLocation=function(){return this.location_},e.ASTNode.prototype.getType=function(){return this.type_},e.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},e.ASTNode.prototype.isConnection=function(){return this.isConnection_},e.ASTNode.prototype.findNextForInput_=function(){var r,t=this.location_.getParentInput(),n=t.getSourceBlock();for(t=n.inputList.indexOf(t)+1;r=n.inputList[t];t++){for(var v,s=r.fieldRow,c=0;v=s[c];c++)if(v.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(v);if(r.connection)return e.ASTNode.createInputNode(r)}return null},e.ASTNode.prototype.findNextForField_=function(){var t=this.location_,n=t.getParentInput(),r=t.getSourceBlock(),s=r.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)+1;n=r.inputList[s];s++){for(var c=n.fieldRow;t<c.length;){if(c[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(c[t]);t++}if(t=0,n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.findPrevForInput_=function(){for(var s,t=this.location_.getParentInput(),n=t.getSourceBlock(),r=n.inputList.indexOf(t);s=n.inputList[r];r--){if(s.connection&&s!==t)return e.ASTNode.createInputNode(s);for(var v,c=(s=s.fieldRow).length-1;v=s[c];c--)if(v.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(v)}return null},e.ASTNode.prototype.findPrevForField_=function(){var c,t=this.location_,n=t.getParentInput(),r=t.getSourceBlock(),s=r.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)-1;c=r.inputList[s];s--){if(c.connection&&c!==n)return e.ASTNode.createInputNode(c);for(c=c.fieldRow;-1<t;){if(c[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(c[t]);t--}0<=s-1&&(t=r.inputList[s-1].fieldRow.length-1)}return null},e.ASTNode.prototype.navigateBetweenStacks_=function(t){var n=this.getLocation();if(n instanceof e.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var r=n.getRootBlock();n=r.workspace.getTopBlocks(!0);for(var c,s=0;c=n[s];s++)if(r.id==c.id)return-1==(t=s+(t?1:-1))||t==n.length?null:e.ASTNode.createStackNode(n[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},e.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var n=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?e.ASTNode.createInputNode(n.targetConnection.getParentInput()):e.ASTNode.createStackNode(t)},e.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var r,n=0;r=t[n];n++){for(var v,s=r.fieldRow,c=0;v=s[c];c++)if(v.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(v);if(r.connection)return e.ASTNode.createInputNode(r)}return null},e.ASTNode.prototype.getSourceBlock=function(){return this.getType()===e.ASTNode.types.BLOCK||this.getType()===e.ASTNode.types.STACK?this.getLocation():this.getType()===e.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},e.ASTNode.prototype.next=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case e.ASTNode.types.OUTPUT:var t=this.location_;return e.ASTNode.createBlockNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return this.findNextForField_();case e.ASTNode.types.INPUT:return this.findNextForInput_();case e.ASTNode.types.BLOCK:return e.ASTNode.createConnectionNode(this.location_.nextConnection);case e.ASTNode.types.PREVIOUS:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.NEXT:return e.ASTNode.createConnectionNode((t=this.location_).targetConnection)}return null},e.ASTNode.prototype.in=function(){switch(this.type_){case e.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return e.ASTNode.createStackNode(t[0]);break;case e.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(t=this.location_);case e.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(t=this.location_);case e.ASTNode.types.INPUT:return e.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},e.ASTNode.prototype.prev=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case e.ASTNode.types.FIELD:return this.findPrevForField_();case e.ASTNode.types.INPUT:return this.findPrevForInput_();case e.ASTNode.types.BLOCK:var t=this.location_;return e.ASTNode.createConnectionNode(t.previousConnection||t.outputConnection);case e.ASTNode.types.PREVIOUS:if((t=(t=this.location_).targetConnection)&&!t.getParentInput())return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.NEXT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock())}return null},e.ASTNode.prototype.out=function(){switch(this.type_){case e.ASTNode.types.STACK:var t=this.location_,n=t.getRelativeToSurfaceXY();return n=new e.utils.Coordinate(n.x,n.y+e.ASTNode.DEFAULT_OFFSET_Y),e.ASTNode.createWorkspaceNode(t.workspace,n);case e.ASTNode.types.OUTPUT:return(n=(t=this.location_).targetConnection)?e.ASTNode.createConnectionNode(n):e.ASTNode.createStackNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.INPUT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(t=this.location_);case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((t=this.location_).getSourceBlock())}return null},e.Blocks=Object.create(null),e.Extensions={},e.Extensions.ALL_=Object.create(null),e.Extensions.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(e.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+t+'" must be a function');e.Extensions.ALL_[t]=n},e.Extensions.registerMixin=function(t,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+t+'" must be a object');e.Extensions.register(t,function(){this.mixin(n)})},e.Extensions.registerMutator=function(t,n,r,s){var c='Error when registering mutator "'+t+'": ';e.Extensions.checkHasFunction_(c,n.domToMutation,"domToMutation"),e.Extensions.checkHasFunction_(c,n.mutationToDom,"mutationToDom");var v=e.Extensions.checkMutatorDialog_(n,c);if(r&&"function"!=typeof r)throw Error('Extension "'+t+'" is not a function');e.Extensions.register(t,function(){if(v){if(!e.Mutator)throw Error(c+"Missing require for Blockly.Mutator");this.setMutator(new e.Mutator(s||[]))}this.mixin(n),r&&r.apply(this)})},e.Extensions.unregister=function(t){e.Extensions.ALL_[t]?delete e.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},e.Extensions.apply=function(t,n,r){var s=e.Extensions.ALL_[t];if("function"!=typeof s)throw Error('Error: Extension "'+t+'" not found.');if(r)e.Extensions.checkNoMutatorProperties_(t,n);else var c=e.Extensions.getMutatorProperties_(n);if(s.apply(n),r)e.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',n);else if(!e.Extensions.mutatorPropertiesMatch_(c,n))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},e.Extensions.checkHasFunction_=function(t,n,r){if(!n)throw Error(t+'missing required property "'+r+'"');if("function"!=typeof n)throw Error(t+'" required property "'+r+'" must be a function')},e.Extensions.checkNoMutatorProperties_=function(t,n){if(e.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+n.id)},e.Extensions.checkMutatorDialog_=function(t,n){var r=void 0!==t.compose,s=void 0!==t.decompose;if(r&&s){if("function"!=typeof t.compose)throw Error(n+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(n+"decompose must be a function.");return!0}if(!r&&!s)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},e.Extensions.checkBlockHasMutatorProperties_=function(t,n){if("function"!=typeof n.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');e.Extensions.checkMutatorDialog_(n,t)},e.Extensions.getMutatorProperties_=function(t){var n=[];return void 0!==t.domToMutation&&n.push(t.domToMutation),void 0!==t.mutationToDom&&n.push(t.mutationToDom),void 0!==t.compose&&n.push(t.compose),void 0!==t.decompose&&n.push(t.decompose),n},e.Extensions.mutatorPropertiesMatch_=function(t,n){if((n=e.Extensions.getMutatorProperties_(n)).length!=t.length)return!1;for(var r=0;r<n.length;r++)if(t[r]!=n[r])return!1;return!0},e.Extensions.buildTooltipForDropdown=function(t,n){var r=[];return"object"==typeof document&&e.utils.runAfterPageLoad(function(){for(var s in n)e.utils.checkMessageReferences(n[s])}),function(){this.type&&-1==r.indexOf(this.type)&&(e.Extensions.checkDropdownOptionsInTable_(this,t,n),r.push(this.type)),this.setTooltip(function(){var s=String(this.getFieldValue(t)),c=n[s];return null==c?-1==r.indexOf(this.type)&&(s="No tooltip mapping for value "+s+" of field "+t,null!=this.type&&(s+=" of block type "+this.type),console.warn(s+".")):c=e.utils.replaceMessageReferences(c),c}.bind(this))}},e.Extensions.checkDropdownOptionsInTable_=function(t,n,r){var s=t.getField(n);if(!s.isOptionListDynamic()){s=s.getOptions();for(var c=0;c<s.length;++c){var v=s[c][1];null==r[v]&&console.warn("No tooltip mapping for value "+v+" of field "+n+" of block type "+t.type)}}},e.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&e.utils.runAfterPageLoad(function(){e.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var r=this.getField(n);return e.utils.replaceMessageReferences(t).replace("%1",r?r.getText():"")}.bind(this))}},e.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},e.Extensions.register("parent_tooltip_when_inline",e.Extensions.extensionParentTooltip_),e.fieldRegistry={},e.fieldRegistry.register=function(t,n){e.registry.register(e.registry.Type.FIELD,t,n)},e.fieldRegistry.unregister=function(t){e.registry.unregister(e.registry.Type.FIELD,t)},e.fieldRegistry.fromJson=function(t){var n=e.registry.getObject(e.registry.Type.FIELD,t.type);return n?n.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},e.IDeletable=function(){},e.blockAnimations={},e.blockAnimations.disconnectPid_=0,e.blockAnimations.disconnectGroup_=null,e.blockAnimations.disposeUiEffect=function(t){var n=t.workspace,r=t.getSvgRoot();n.getAudioManager().play("delete"),t=n.getSvgXY(r),(r=r.cloneNode(!0)).translateX_=t.x,r.translateY_=t.y,r.setAttribute("transform","translate("+t.x+","+t.y+")"),n.getParentSvg().appendChild(r),r.bBox_=r.getBBox(),e.blockAnimations.disposeUiStep_(r,n.RTL,new Date,n.scale)},e.blockAnimations.disposeUiStep_=function(t,n,r,s){var c=(new Date-r)/150;1<c?e.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(n?-1:1)*t.bBox_.width*s/2*c)+","+(t.translateY_+t.bBox_.height*s*c)+") scale("+(1-c)*s+")"),setTimeout(e.blockAnimations.disposeUiStep_,10,t,n,r,s))},e.blockAnimations.connectionUiEffect=function(t){var n=t.workspace,r=n.scale;if(n.getAudioManager().play("click"),!(1>r)){var s=n.getSvgXY(t.getSvgRoot());t.outputConnection?(s.x+=(t.RTL?3:-3)*r,s.y+=13*r):t.previousConnection&&(s.x+=(t.RTL?-23:23)*r,s.y+=3*r),t=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:s.x,cy:s.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),e.blockAnimations.connectionUiStep_(t,new Date,r)}},e.blockAnimations.connectionUiStep_=function(t,n,r){var s=(new Date-n)/150;1<s?e.utils.dom.removeNode(t):(t.setAttribute("r",25*s*r),t.style.opacity=1-s,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.connectionUiStep_,10,t,n,r))},e.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var n=t.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,t.RTL||(n*=-1),e.blockAnimations.disconnectUiStep_(t.getSvgRoot(),n,new Date)}},e.blockAnimations.disconnectUiStep_=function(t,n,r){var s=(new Date-r)/200;1<s?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(s*Math.PI*3)*(1-s)*n)+")",e.blockAnimations.disconnectGroup_=t,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.disconnectUiStep_,10,t,n,r)),t.setAttribute("transform",t.translate_+t.skew_)},e.blockAnimations.disconnectUiStop=function(){if(e.blockAnimations.disconnectGroup_){clearTimeout(e.blockAnimations.disconnectPid_);var t=e.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),e.blockAnimations.disconnectGroup_=null}},e.Events.BlockDrag=function(t,n,r){e.Events.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=n,this.blocks=r},e.utils.object.inherits(e.Events.BlockDrag,e.Events.UiBase),e.Events.BlockDrag.prototype.type=e.Events.BLOCK_DRAG,e.Events.BlockDrag.prototype.toJson=function(){var t=e.Events.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},e.Events.BlockDrag.prototype.fromJson=function(t){e.Events.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},e.registry.register(e.registry.Type.EVENT,e.Events.BLOCK_DRAG,e.Events.BlockDrag),e.IBlockDragger=function(){},e.InsertionMarkerManager=function(t){this.topBlock_=e.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",e.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,e.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{e.Events.enable()}},e.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},e.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},e.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(e.Events.disable(),this.hidePreview_(),e.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;e.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},e.InsertionMarkerManager.prototype.update=function(t,n){var r=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(r,n))||this.shouldUpdatePreviews_(r,t))&&(e.Events.disable(),this.maybeHidePreview_(r),this.maybeShowPreview_(r),e.Events.enable())},e.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var n=t.type;e.Events.disable();try{var r=this.workspace_.newBlock(n);if(r.setInsertionMarker(!0),t.mutationToDom){var s=t.mutationToDom();s&&r.domToMutation(s)}for(n=0;n<t.inputList.length;n++){var c=t.inputList[n];if(c.name!=e.constants.COLLAPSED_INPUT_NAME){var v=r.inputList[n];if(!v)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(s=0;s<c.fieldRow.length;s++){var D=c.fieldRow[s],P=v.fieldRow[s];if(!P)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));P.setValue(D.getValue())}}}r.setCollapsed(t.isCollapsed()),r.setInputsInline(t.getInputsInline()),r.initSvg(),r.getSvgRoot().setAttribute("visibility","hidden")}finally{e.Events.enable()}return r},e.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(t.push(n),this.lastOnStack_=n,this.lastMarker_){e.Events.disable();try{this.lastMarker_.dispose()}finally{e.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return t},e.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,n){var r=t.local,s=t.closest;return t=t.radius,r&&s?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==s&&this.localConnection_==r||(r=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(r*r+n*n),s&&t>n-e.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},e.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var n=this.getStartRadius_(),r=null,s=null,c=0;c<this.availableConnections_.length;c++){var v=this.availableConnections_[c],D=v.closest(n,t);D.connection&&(r=D.connection,s=v,n=D.radius)}return{closest:r,local:s,radius:n}},e.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?e.CONNECTING_SNAP_RADIUS:e.SNAP_RADIUS},e.InsertionMarkerManager.prototype.shouldDelete_=function(t,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,e.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,t&&!!t.closest)},e.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var n=t.closest;t=t.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=t,this.showPreview_()))}},e.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&n.shouldHighlightConnection(t)&&t.highlight()},e.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var n=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(n||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},e.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},e.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,n=this.closestConnection_,r=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=r.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");r.render(),r.rendered=!0,r.getSvgRoot().setAttribute("visibility","visible"),t&&n&&r.positionNearConnection(t,n),n&&t.connect(n),this.markerConnection_=t},e.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,n=t.getSourceBlock(),r=n.nextConnection,s=n.previousConnection,c=n.outputConnection;if(c=t.type==e.connectionTypes.INPUT_VALUE&&!(c&&c.targetConnection),!(t!=r||s&&s.targetConnection)||c?t.targetBlock().unplug(!1):t.type==e.connectionTypes.NEXT_STATEMENT&&t!=r?((r=t.targetConnection).getSourceBlock().unplug(!1),s=s?s.targetConnection:null,n.unplug(!0),s&&s.connect(r)):n.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=n.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},e.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},e.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},e.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},e.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},e.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},e.BlockDragger=function(t,n){this.draggingBlock_=t,this.workspace_=n,this.draggedConnectionManager_=new e.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=e.BlockDragger.initIconData_(t)},e.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},e.BlockDragger.initIconData_=function(t){var n=[];t=t.getDescendants(!1);for(var s,r=0;s=t[r];r++){s=s.getIcons();for(var c=0;c<s.length;c++){var v={location:s[c].getIconLocation(),icon:s[c]};n.push(v)}}return n},e.BlockDragger.prototype.startDrag=function(t,n){e.Events.getGroup()||e.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),e.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),e.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},e.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},e.BlockDragger.prototype.disconnectBlock_=function(t,n){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),e.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},e.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.drag=function(t,n){n=this.pixelsToWorkspaceUnits_(n);var r=e.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(r),this.dragIcons_(n),r=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(n,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==r&&(r&&r.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},e.BlockDragger.prototype.endDrag=function(t,n){if(this.drag(t,n),this.dragIconData_=[],this.fireDragEndEvent_(),e.utils.dom.stopTextWidthCache(),e.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{var r=(t=this.getNewLocationAfterDrag_(n)).delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),r?this.updateBlockAfterMove_(r):e.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var n={};return n.delta=this.pixelsToWorkspaceUnits_(t),n.newLocation=e.utils.Coordinate.sum(this.startXY_,n.delta),n},e.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),e.draggingConnections=[],!0)},e.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},e.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.updateToolboxStyle_=function(t){var n=this.workspace_.getToolbox();if(n){var r=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&"function"==typeof n.removeStyle?n.removeStyle(r):t||"function"!=typeof n.addStyle||n.addStyle(r)}},e.BlockDragger.prototype.fireMoveEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),e.Events.fire(t)},e.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},e.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BlockDragger.prototype.dragIcons_=function(t){for(var n=0;n<this.dragIconData_.length;n++){var r=this.dragIconData_[n];r.icon.setIconLocation(e.utils.Coordinate.sum(r.location,t))}},e.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},e.registry.register(e.registry.Type.BLOCK_DRAGGER,e.registry.DEFAULT,e.BlockDragger),e.IContextMenu=function(){},e.IDraggable=function(){},e.IBubble=function(){},e.Bubble=function(t,n,r,s,c,v){this.workspace_=t,this.content_=n,this.shape_=r,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,r=e.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(r=-r),this.arrow_radians_=e.utils.math.toRadians(r),t.getBubbleCanvas().appendChild(this.createDom_(n,!(!c||!v))),this.setAnchorLocation(s),c&&v||(c=(t=this.content_.getBBox()).width+2*e.Bubble.BORDER_WIDTH,v=t.height+2*e.Bubble.BORDER_WIDTH),this.setBubbleSize(c,v),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},e.Bubble.BORDER_WIDTH=6,e.Bubble.ARROW_THICKNESS=5,e.Bubble.ARROW_ANGLE=20,e.Bubble.ARROW_BEND=4,e.Bubble.ANCHOR_RADIUS=8,e.Bubble.onMouseUpWrapper_=null,e.Bubble.onMouseMoveWrapper_=null,e.Bubble.unbindDragEvents_=function(){e.Bubble.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseUpWrapper_),e.Bubble.onMouseUpWrapper_=null),e.Bubble.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseMoveWrapper_),e.Bubble.onMouseMoveWrapper_=null)},e.Bubble.bubbleMouseUp_=function(t){e.Touch.clearTouchIdentifier(),e.Bubble.unbindDragEvents_()},e.Bubble.prototype.rendered_=!1,e.Bubble.prototype.anchorXY_=null,e.Bubble.prototype.relativeLeft_=0,e.Bubble.prototype.relativeTop_=0,e.Bubble.prototype.width_=0,e.Bubble.prototype.height_=0,e.Bubble.prototype.autoLayout_=!0,e.Bubble.prototype.createDom_=function(t,n){this.bubbleGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var r={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return e.utils.userAgent.JAVA_FX&&(r={}),r=e.utils.dom.createSvgElement(e.utils.Svg.G,r,this.bubbleGroup_),this.bubbleArrow_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{},r),this.bubbleBack_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH},r),n?(this.resizeGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e.utils.dom.createSvgElement(e.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*e.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=e.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=e.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},e.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},e.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},e.Bubble.prototype.bubbleMouseDown_=function(t){var n=this.workspace_.getGesture(t);n&&n.handleBubbleStart(t,this)},e.Bubble.prototype.showContextMenu=function(t){},e.Bubble.prototype.isDeletable=function(){return!1},e.Bubble.prototype.setDeleteStyle=function(t){},e.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),e.Bubble.unbindDragEvents_(),e.utils.isRightButton(t)||(this.workspace_.startDrag(t,new e.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),e.Bubble.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,e.Bubble.bubbleMouseUp_),e.Bubble.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),e.hideChaff()),t.stopPropagation()},e.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},e.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},e.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},e.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},e.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},e.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(t),r=this.getOptimalRelativeTop_(t),s=this.shape_.getBBox(),c={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},v={x:-this.width_-30,y:r};r={x:s.width,y:r};var D={x:n,y:s.height};n=s.width<s.height?r:D,s=s.width<s.height?D:r,r=this.getOverlap_(c,t),D=this.getOverlap_(v,t);var P=this.getOverlap_(n,t);t=this.getOverlap_(s,t),r==(t=Math.max(r,D,P,t))?(this.relativeLeft_=c.x,this.relativeTop_=c.y):D==t?(this.relativeLeft_=v.x,this.relativeTop_=v.y):P==t?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=s.x,this.relativeTop_=s.y)},e.Bubble.prototype.getOverlap_=function(t,n){var r=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(r+this.width_,n.left+n.width)-Math.max(r,n.left))*(Math.min(t+this.height_,n.top+n.height)-Math.max(t,n.top))/(this.width_*this.height_)))},e.Bubble.prototype.getOptimalRelativeLeft_=function(t){var n=-this.width_/4;if(this.width_>t.width)return n;if(this.workspace_.RTL)var r=this.anchorXY_.x-n,s=r-this.width_,c=t.left+t.width,v=t.left+e.Scrollbar.scrollbarThickness/this.workspace_.scale;else r=(s=n+this.anchorXY_.x)+this.width_,v=t.left,c=t.left+t.width-e.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?s<v?n=-(v-this.anchorXY_.x+this.width_):r>c&&(n=-(c-this.anchorXY_.x)):s<v?n=v-this.anchorXY_.x:r>c&&(n=c-this.anchorXY_.x-this.width_),n},e.Bubble.prototype.getOptimalRelativeTop_=function(t){var n=-this.height_/4;if(this.height_>t.height)return n;var r=this.anchorXY_.y+n,c=t.top;t=t.top+t.height-e.Scrollbar.scrollbarThickness/this.workspace_.scale;var v=this.anchorXY_.y;return r<c?n=c-v:r+this.height_>t&&(n=t-v-this.height_),n},e.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;this.moveTo(t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},e.Bubble.prototype.moveTo=function(t,n){this.bubbleGroup_.setAttribute("transform","translate("+t+","+n+")")},e.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},e.Bubble.prototype.getBubbleSize=function(){return new e.utils.Size(this.width_,this.height_)},e.Bubble.prototype.setBubbleSize=function(t,n){var r=2*e.Bubble.BORDER_WIDTH;t=Math.max(t,r+45),n=Math.max(n,r+20),this.width_=t,this.height_=n,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*e.Bubble.BORDER_WIDTH+","+(n-r)+") scale(-1 1)":"translate("+(t-r)+","+(n-r)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},e.Bubble.prototype.renderArrow_=function(){var t=[],n=this.width_/2,r=this.height_/2,s=-this.relativeLeft_,c=-this.relativeTop_;if(n==s&&r==c)t.push("M "+n+","+r);else{c-=r,s-=n,this.workspace_.RTL&&(s*=-1);var v=Math.sqrt(c*c+s*s),D=Math.acos(s/v);0>c&&(D=2*Math.PI-D);var P=D+Math.PI/2;P>2*Math.PI&&(P-=2*Math.PI);var G=Math.sin(P),it=Math.cos(P),q=this.getBubbleSize();P=(q.width+q.height)/e.Bubble.ARROW_THICKNESS,P=Math.min(P,q.width,q.height)/4,s=n+(q=1-e.Bubble.ANCHOR_RADIUS/v)*s,c=r+q*c,q=n+P*it;var bt=r+P*G;n-=P*it,r-=P*G,(G=D+this.arrow_radians_)>2*Math.PI&&(G-=2*Math.PI),D=Math.sin(G)*v/e.Bubble.ARROW_BEND,v=Math.cos(G)*v/e.Bubble.ARROW_BEND,t.push("M"+q+","+bt),t.push("C"+(q+v)+","+(bt+D)+" "+s+","+c+" "+s+","+c),t.push("C"+s+","+c+" "+(n+v)+","+(r+D)+" "+n+","+r)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},e.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},e.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&e.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&e.browserEvents.unbind(this.onMouseDownResizeWrapper_),e.Bubble.unbindDragEvents_(),e.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},e.Bubble.prototype.moveDuringDrag=function(t,n){t?t.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},e.Bubble.prototype.getRelativeToSurfaceXY=function(){return new e.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},e.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},e.Bubble.textToDom=function(t){var n=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:e.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var r=0;r<t.length;r++){var s=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{dy:"1em",x:e.Bubble.BORDER_WIDTH},n),c=document.createTextNode(t[r]);s.appendChild(c)}return n},e.Bubble.createNonEditableBubble=function(t,n,r){if((r=new e.Bubble(n.workspace,t,n.pathObject.svgPath,r,null,null)).setSvgId(n.id),n.RTL){n=t.getBBox().width;for(var c,s=0;c=t.childNodes[s];s++)c.setAttribute("text-anchor","end"),c.setAttribute("x",n+e.Bubble.BORDER_WIDTH)}return r},e.Events.CommentBase=function(t){this.commentId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.utils.object.inherits(e.Events.CommentBase,e.Events.Abstract),e.Events.CommentBase.prototype.toJson=function(){var t=e.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},e.Events.CommentBase.prototype.fromJson=function(t){e.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},e.Events.CommentChange=function(t,n,r){e.Events.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===r?"":r)},e.utils.object.inherits(e.Events.CommentChange,e.Events.CommentBase),e.Events.CommentChange.prototype.type=e.Events.COMMENT_CHANGE,e.Events.CommentChange.prototype.toJson=function(){var t=e.Events.CommentChange.superClass_.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},e.Events.CommentChange.prototype.fromJson=function(t){e.Events.CommentChange.superClass_.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},e.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},e.Events.CommentChange.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},e.Events.CommentCreate=function(t){e.Events.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentCreate,e.Events.CommentBase),e.Events.CommentCreate.prototype.type=e.Events.COMMENT_CREATE,e.Events.CommentCreate.prototype.toJson=function(){var t=e.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t},e.Events.CommentCreate.prototype.fromJson=function(t){e.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml)},e.Events.CommentCreate.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,t)},e.Events.CommentCreateDeleteHelper=function(t,n){var r=t.getEventWorkspace_();n?((n=e.utils.xml.createElement("xml")).appendChild(t.xml),e.Xml.domToWorkspace(n,r)):(r=r.getCommentById(t.commentId))?r.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},e.Events.CommentDelete=function(t){e.Events.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentDelete,e.Events.CommentBase),e.Events.CommentDelete.prototype.type=e.Events.COMMENT_DELETE,e.Events.CommentDelete.prototype.toJson=function(){return e.Events.CommentDelete.superClass_.toJson.call(this)},e.Events.CommentDelete.prototype.fromJson=function(t){e.Events.CommentDelete.superClass_.fromJson.call(this,t)},e.Events.CommentDelete.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,!t)},e.Events.CommentMove=function(t){e.Events.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},e.utils.object.inherits(e.Events.CommentMove,e.Events.CommentBase),e.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},e.Events.CommentMove.prototype.type=e.Events.COMMENT_MOVE,e.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},e.Events.CommentMove.prototype.toJson=function(){var t=e.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},e.Events.CommentMove.prototype.fromJson=function(t){if(e.Events.CommentMove.superClass_.fromJson.call(this,t),t.oldCoordinate){var n=t.oldCoordinate.split(",");this.oldCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}t.newCoordinate&&(n=t.newCoordinate.split(","),this.newCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1])))},e.Events.CommentMove.prototype.isNull=function(){return e.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},e.Events.CommentMove.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){t=t?this.newCoordinate_:this.oldCoordinate_;var r=n.getXY();n.moveBy(t.x-r.x,t.y-r.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CREATE,e.Events.CommentCreate),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CHANGE,e.Events.CommentChange),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_MOVE,e.Events.CommentMove),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_DELETE,e.Events.CommentDelete),e.BubbleDragger=function(t,n){this.draggingBubble_=t,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=e.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},e.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},e.BubbleDragger.prototype.startBubbleDrag=function(){e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},e.BubbleDragger.prototype.dragBubble=function(t,n){n=this.pixelsToWorkspaceUnits_(n),n=e.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},e.BubbleDragger.prototype.shouldDelete_=function(t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,e.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.draggingBubble_,!1)},e.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},e.BubbleDragger.prototype.endBubbleDrag=function(t,n){this.dragBubble(t,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new(e.Events.get(e.Events.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),e.Events.fire(t)}},e.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},e.Events.Click=function(t,n,r){e.Events.Click.superClass_.constructor.call(this,t?t.workspace.id:n),this.blockId=t?t.id:null,this.targetType=r},e.utils.object.inherits(e.Events.Click,e.Events.UiBase),e.Events.Click.prototype.type=e.Events.CLICK,e.Events.Click.prototype.toJson=function(){var t=e.Events.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},e.Events.Click.prototype.fromJson=function(t){e.Events.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.CLICK,e.Events.Click),e.WorkspaceDragger=function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new e.utils.Coordinate(t.scrollX,t.scrollY)},e.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},e.WorkspaceDragger.prototype.startDrag=function(){e.selected&&e.selected.unselect(),this.workspace_.setupDragSurface()},e.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},e.WorkspaceDragger.prototype.drag=function(t){if(t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,t.y)}},e.Gesture=function(t,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new e.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!e.DRAG_STACK},e.Gesture.prototype.dispose=function(){e.Touch.clearTouchIdentifier(),e.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&e.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&e.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},e.Gesture.prototype.updateFromEvent_=function(t){var n=new e.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),e.longStop_()),this.mostRecentEvent_=t},e.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=e.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=e.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.FLYOUT_DRAG_RADIUS:e.DRAG_RADIUS))},e.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),e.Events.getGroup()||e.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},e.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},e.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},e.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new e.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},e.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},e.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(e.registry.getClassFromOptions(e.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new e.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.doStart=function(t){e.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,e.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),e.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,e.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),e.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||e.longStart(t,this),this.mouseDownXY_=new e.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},e.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),e.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},e.Gesture.prototype.cancel=function(){this.isEnding_||(e.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},e.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),e.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(e.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},e.Gesture.prototype.handleWsStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=t,this.doStart(t)},e.Gesture.prototype.fireWorkspaceClick_=function(t){e.Events.fire(new(e.Events.get(e.Events.CLICK))(null,t.id,"workspace"))},e.Gesture.prototype.handleFlyoutStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(t,n.getWorkspace())},e.Gesture.prototype.handleBlockStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=t},e.Gesture.prototype.handleBubbleStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=t},e.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},e.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},e.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(e.Events.getGroup()||e.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new(e.Events.get(e.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");e.Events.fire(t)}this.bringBlockToFront_(),e.Events.setGroup(!1)},e.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,e.selected&&e.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},e.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},e.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},e.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},e.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},e.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},e.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},e.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},e.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},e.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},e.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},e.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},e.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},e.Gesture.prototype.hasStarted=function(){return this.hasStarted_},e.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},e.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},e.Gesture.inProgress=function(){for(var r,t=e.Workspace.getAll(),n=0;r=t[n];n++)if(r.currentGesture_)return!0;return!1},e.IRegistrable=function(){},e.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},e.Marker.prototype.setDrawer=function(t){this.drawer_=t},e.Marker.prototype.getDrawer=function(){return this.drawer_},e.Marker.prototype.getCurNode=function(){return this.curNode_},e.Marker.prototype.setCurNode=function(t){var n=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(n,this.curNode_)},e.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},e.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},e.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},e.Cursor=function(){e.Cursor.superClass_.constructor.call(this),this.type="cursor"},e.utils.object.inherits(e.Cursor,e.Marker),e.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},e.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()==e.ASTNode.types.PREVIOUS||t.getType()==e.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},e.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},e.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==e.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},e.registry.register(e.registry.Type.CURSOR,e.registry.DEFAULT,e.Cursor),e.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t},e.MarkerManager.LOCAL_MARKER="local_marker_1",e.MarkerManager.prototype.registerMarker=function(t,n){this.markers_[t]&&this.unregisterMarker(t),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[t]=n},e.MarkerManager.prototype.unregisterMarker=function(t){var n=this.markers_[t];if(!n)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[t]},e.MarkerManager.prototype.getCursor=function(){return this.cursor_},e.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},e.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},e.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},e.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},e.MarkerManager.prototype.dispose=function(){for(var r,t=Object.keys(this.markers_),n=0;r=t[n];n++)this.unregisterMarker(r);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},e.WidgetDiv={},e.WidgetDiv.owner_=null,e.WidgetDiv.dispose_=null,e.WidgetDiv.rendererClassName_="",e.WidgetDiv.themeClassName_="",e.WidgetDiv.createDom=function(){e.WidgetDiv.DIV||(e.WidgetDiv.DIV=document.createElement("div"),e.WidgetDiv.DIV.className="blocklyWidgetDiv",(e.parentContainer||document.body).appendChild(e.WidgetDiv.DIV))},e.WidgetDiv.show=function(t,n,r){e.WidgetDiv.hide(),e.WidgetDiv.owner_=t,e.WidgetDiv.dispose_=r,(t=e.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",t.style.display="block",n=e.getMainWorkspace(),e.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),e.WidgetDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.WidgetDiv.rendererClassName_),e.utils.dom.addClass(t,e.WidgetDiv.themeClassName_)},e.WidgetDiv.hide=function(){if(e.WidgetDiv.isVisible()){e.WidgetDiv.owner_=null;var t=e.WidgetDiv.DIV;t.style.display="none",t.style.left="",t.style.top="",e.WidgetDiv.dispose_&&e.WidgetDiv.dispose_(),e.WidgetDiv.dispose_=null,t.textContent="",e.WidgetDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.rendererClassName_),e.WidgetDiv.rendererClassName_=""),e.WidgetDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.themeClassName_),e.WidgetDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.WidgetDiv.isVisible=function(){return!!e.WidgetDiv.owner_},e.WidgetDiv.hideIfOwner=function(t){e.WidgetDiv.owner_==t&&e.WidgetDiv.hide()},e.WidgetDiv.positionInternal_=function(t,n,r){e.WidgetDiv.DIV.style.left=t+"px",e.WidgetDiv.DIV.style.top=n+"px",e.WidgetDiv.DIV.style.height=r+"px"},e.WidgetDiv.positionWithAnchor=function(t,n,r,s){var c=e.WidgetDiv.calculateY_(t,n,r);t=e.WidgetDiv.calculateX_(t,n,r,s),0>c?e.WidgetDiv.positionInternal_(t,0,r.height+c):e.WidgetDiv.positionInternal_(t,c,r.height)},e.WidgetDiv.calculateX_=function(t,n,r,s){return s?(n=Math.max(n.right-r.width,t.left),Math.min(n,t.right-r.width)):(n=Math.min(n.left,t.right-r.width),Math.max(n,t.left))},e.WidgetDiv.calculateY_=function(t,n,r){return n.bottom+r.height>=t.bottom?n.top-r.height:n.bottom},e.Field=function(t,n,r){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new e.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,r&&this.configure_(r),this.setValue(t),n&&this.setValidator(n)},e.Field.prototype.DEFAULT_VALUE=null,e.Field.prototype.name=void 0,e.Field.prototype.disposed=!1,e.Field.prototype.maxDisplayLength=50,e.Field.prototype.sourceBlock_=null,e.Field.prototype.isDirty_=!0,e.Field.prototype.visible_=!0,e.Field.prototype.clickTarget_=null,e.Field.NBSP="\xa0",e.Field.prototype.EDITABLE=!0,e.Field.prototype.SERIALIZABLE=!1,e.Field.prototype.configure_=function(t){var n=t.tooltip;"string"==typeof n&&(n=e.utils.replaceMessageReferences(t.tooltip)),n&&this.setTooltip(n)},e.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},e.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},e.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},e.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},e.Field.prototype.initModel=function(){},e.Field.prototype.createBorderRect_=function(){this.borderRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},e.Field.prototype.createTextElement_=function(){this.textElement_=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},e.Field.prototype.bindEvents_=function(){e.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=e.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},e.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},e.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},e.Field.prototype.dispose=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hideIfOwner(this),e.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&e.browserEvents.unbind(this.mouseDownWrapper_),e.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},e.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(e.utils.dom.addClass(t,"blocklyEditableText"),e.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(e.utils.dom.addClass(t,"blocklyNonEditableText"),e.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},e.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},e.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},e.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},e.Field.prototype.isVisible=function(){return this.visible_},e.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var n=this.getSvgRoot();n&&(n.style.display=t?"block":"none")}},e.Field.prototype.setValidator=function(t){this.validator_=t},e.Field.prototype.getValidator=function(){return this.validator_},e.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},e.Field.prototype.applyColour=function(){},e.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},e.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},e.Field.prototype.updateSize_=function(t){var n=this.getConstants(),r=2*(t=null!=t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),s=n.FIELD_TEXT_HEIGHT,c=0;this.textElement_&&(r+=c=e.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(s=Math.max(s,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=s,this.size_.width=r,this.positionTextElement_(t,c),this.positionBorderRect_()},e.Field.prototype.positionTextElement_=function(t,n){if(this.textElement_){var r=this.getConstants(),s=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-t:t),this.textElement_.setAttribute("y",r.FIELD_TEXT_BASELINE_CENTER?s:s-r.FIELD_TEXT_HEIGHT/2+r.FIELD_TEXT_BASELINE)}},e.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},e.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new e.utils.Size(0,0)},e.Field.prototype.getScaledBBox=function(){if(this.borderRect_)t=this.borderRect_.getBoundingClientRect(),r=e.utils.style.getPageOffset(this.borderRect_),s=t.width,t=t.height;else{var t=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,r=this.getAbsoluteXY_(),s=t.width*n;t=t.height*n,e.utils.userAgent.GECKO?(r.x+=1.5*n,r.y+=1.5*n):e.utils.userAgent.EDGE||e.utils.userAgent.IE||(r.x-=.5*n,r.y-=.5*n),s+=1*n,t+=1*n}return new e.utils.Rect(r.y,r.y+t,r.x,r.x+s)},e.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,e.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200f"),t):e.Field.NBSP},e.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},e.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},e.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},e.Field.prototype.setValue=function(t){if(null!==t){var n=this.doClassValidation_(t);if(!((t=this.processValidation_(t,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,t),(t=this.processValidation_(t,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var r=this.getValue();r===t?this.doValueUpdate_(t):(n&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(n,"field",this.name||null,r,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}}},e.Field.prototype.processValidation_=function(t,n){return null===n?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(t=n),t)},e.Field.prototype.getValue=function(){return this.value_},e.Field.prototype.doClassValidation_=function(t){return null==t?null:t},e.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},e.Field.prototype.doValueInvalid_=function(t){},e.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},e.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=t:this.tooltip_=t},e.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return e.Tooltip.getTooltipOfObject(t||{tooltip:this.tooltip_})},e.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},e.Field.prototype.getAbsoluteXY_=function(){return e.utils.style.getPageOffset(this.getClickTarget_())},e.Field.prototype.referencesVariables=function(){return!1},e.Field.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_,r=n.inputList,s=0;s<n.inputList.length;s++)for(var c=r[s],v=c.fieldRow,D=0;D<v.length;D++)if(v[D]===this){t=c;break}return t},e.Field.prototype.getFlipRtl=function(){return!1},e.Field.prototype.isTabNavigable=function(){return!1},e.Field.prototype.onShortcut=function(t){return!1},e.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},e.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.FieldLabel=function(t,n,r){this.class_=null,e.FieldLabel.superClass_.constructor.call(this,t,null,r),r||(this.class_=n||null)},e.utils.object.inherits(e.FieldLabel,e.Field),e.FieldLabel.prototype.DEFAULT_VALUE="",e.FieldLabel.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabel(n,void 0,t)},e.FieldLabel.prototype.EDITABLE=!1,e.FieldLabel.prototype.configure_=function(t){e.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},e.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&e.utils.dom.addClass(this.textElement_,this.class_)},e.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&e.utils.dom.removeClass(this.textElement_,this.class_),t&&e.utils.dom.addClass(this.textElement_,t)),this.class_=t},e.fieldRegistry.register("field_label",e.FieldLabel),e.Input=function(t,n,r,s){if(t!=e.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=n,this.sourceBlock_=r,this.connection=s,this.fieldRow=[]},e.Input.prototype.align=e.constants.ALIGN.LEFT,e.Input.prototype.visible_=!0,e.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Input.prototype.appendField=function(t,n){return this.insertFieldAt(this.fieldRow.length,t,n),this},e.Input.prototype.insertFieldAt=function(t,n,r){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(n||""==n&&r)&&("string"==typeof n&&(n=e.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=r,n.setVisible(this.isVisible()),n.prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,n),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},e.Input.prototype.removeField=function(t,n){for(var s,r=0;s=this.fieldRow[r];r++)if(s.name===t)return s.dispose(),this.fieldRow.splice(r,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+t+'" not found.')},e.Input.prototype.isVisible=function(){return this.visible_},e.Input.prototype.setVisible=function(t){var n=[];if(this.visible_==t)return n;this.visible_=t;for(var s,r=0;s=this.fieldRow[r];r++)s.setVisible(t);return this.connection&&(this.connection=this.connection,t?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),r=this.connection.targetBlock())&&(r.getSvgRoot().style.display=t?"block":"none"),n},e.Input.prototype.markDirty=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.markDirty()},e.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},e.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},e.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},e.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},e.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},e.Input.prototype.dispose=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},e.Block=function(t,n,r){if(e.Generator&&void 0!==e.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=r&&!t.getBlockById(r)?r:e.utils.genUid(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new e.utils.Size(160,80)},this.xy_=new e.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(r=e.Blocks[n])||"object"!=typeof r)throw TypeError("Unknown block type: "+n);e.utils.object.mixin(this,r)}t.addTopBlock(this),t.addTypedBlock(this),(t=e.Events.getGroup())||e.Events.setGroup(!0),n=e.Events.recordUndo;try{"function"==typeof this.init&&(e.Events.recordUndo=!1,this.init(),e.Events.recordUndo=n),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(this))}finally{t||e.Events.setGroup(!1),e.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},e.Block.COLLAPSED_INPUT_NAME=e.constants.COLLAPSED_INPUT_NAME,e.Block.COLLAPSED_FIELD_NAME=e.constants.COLLAPSED_FIELD_NAME,e.Block.prototype.data=null,e.Block.prototype.disposed=!1,e.Block.prototype.hue_=null,e.Block.prototype.colour_="#000000",e.Block.prototype.styleName_="",e.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_DELETE))(this)),e.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),e.selected==this&&(e.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var r;r=this.inputList[n];n++)r.dispose();this.inputList.length=0;var c,s=this.getConnections_(!0);for(n=0;c=s[n];n++)c.dispose()}finally{e.Events.enable(),this.disposed=!0}}},e.Block.prototype.initModel=function(){for(var n,t=0;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.initModel&&s.initModel()},e.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},e.Block.prototype.unplugFromRow_=function(t){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,n,!1)?n.connect(t):t.onFailedConnect(n))},e.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;if(r&&r.type==e.connectionTypes.INPUT_VALUE&&r.targetConnection){if(t)return null;t=r}}return t},e.Block.prototype.unplugFromStack_=function(t){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var r=this.getNextBlock();t&&r&&!r.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,t,!1)&&n.connect(t))},e.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var r,n=0;r=this.inputList[n];n++)r.connection&&t.push(r.connection);return t},e.Block.prototype.lastConnectionInStack=function(t){for(var n=this.nextConnection;n;){var r=n.targetBlock();if(!r||t&&r.isShadow())return n;n=r.nextConnection}return null},e.Block.prototype.bumpNeighbours=function(){},e.Block.prototype.getParent=function(){return this.parentBlock_},e.Block.prototype.getInputWithBlock=function(t){for(var r,n=0;r=this.inputList[n];n++)if(r.connection&&r.connection.targetBlock()==t)return r;return null},e.Block.prototype.getSurroundParent=function(){var t=this;do{var n=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==n);return t},e.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},e.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},e.Block.prototype.getFirstStatementConnection=function(){for(var n,t=0;n=this.inputList[t];t++)if(n.connection&&n.connection.type==e.connectionTypes.NEXT_STATEMENT)return n.connection;return null},e.Block.prototype.getRootBlock=function(){var t=this;do{var n=t;t=n.parentBlock_}while(t);return n},e.Block.prototype.getTopStackBlock=function(){var t=this;do{var n=t.getPreviousBlock()}while(n&&n.getNextBlock()==t&&(t=n));return t},e.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var r,n=0;r=this.inputList[n];n++)r.connection&&(r=r.connection.targetBlock())&&t.push(r);return(n=this.getNextBlock())&&t.push(n),t},e.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(e.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},e.Block.prototype.getDescendants=function(t){for(var s,n=[this],r=this.getChildren(t),c=0;s=r[c];c++)n.push.apply(n,s.getDescendants(t));return n},e.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setDeletable=function(t){this.deletable_=t},e.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setMovable=function(t){this.movable_=t},e.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(e.utils.getBlockTypeCounts(this,!0))},e.Block.prototype.isShadow=function(){return this.isShadow_},e.Block.prototype.setShadow=function(t){this.isShadow_=t},e.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},e.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},e.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var n;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.updateEditable()},e.Block.prototype.isDisposed=function(){return this.disposed},e.Block.prototype.getMatchingConnection=function(t,n){var r=this.getConnections_(!0);if(t=t.getConnections_(!0),r.length!=t.length)throw Error("Connection lists did not match in length.");for(var s=0;s<t.length;s++)if(t[s]==n)return r[s];return null},e.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},e.Block.prototype.setTooltip=function(t){this.tooltip=t},e.Block.prototype.getTooltip=function(){return e.Tooltip.getTooltipOfObject(this)},e.Block.prototype.getColour=function(){return this.colour_},e.Block.prototype.getStyleName=function(){return this.styleName_},e.Block.prototype.getHue=function(){return this.hue_},e.Block.prototype.setColour=function(t){t=e.utils.parseBlockColour(t),this.hue_=t.hue,this.colour_=t.hex},e.Block.prototype.setStyle=function(t){this.styleName_=t},e.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},e.Block.prototype.getField=function(t){if("string"!=typeof t)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(var r,n=0;r=this.inputList[n];n++)for(var c,s=0;c=r.fieldRow[s];s++)if(c.name===t)return c;return null},e.Block.prototype.getVars=function(){for(var r,t=[],n=0;r=this.inputList[n];n++)for(var c,s=0;c=r.fieldRow[s];s++)c.referencesVariables()&&t.push(c.getValue());return t},e.Block.prototype.getVarModels=function(){for(var r,t=[],n=0;r=this.inputList[n];n++)for(var c,s=0;c=r.fieldRow[s];s++)c.referencesVariables()&&(c=this.workspace.getVariableById(c.getValue()))&&t.push(c);return t},e.Block.prototype.updateVarName=function(t){for(var r,n=0;r=this.inputList[n];n++)for(var c,s=0;c=r.fieldRow[s];s++)c.referencesVariables()&&t.getId()==c.getValue()&&c.refreshVariableName()},e.Block.prototype.renameVarById=function(t,n){for(var s,r=0;s=this.inputList[r];r++)for(var v,c=0;v=s.fieldRow[c];c++)v.referencesVariables()&&t==v.getValue()&&v.setValue(n)},e.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},e.Block.prototype.setFieldValue=function(t,n){var r=this.getField(n);if(!r)throw Error('Field "'+n+'" not found.');r.setValue(t)},e.Block.prototype.setPreviousStatement=function(t,n){if(t){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(e.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},e.Block.prototype.setNextStatement=function(t,n){if(t)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(e.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},e.Block.prototype.setOutput=function(t,n){if(t){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(e.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},e.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},e.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.DUMMY&&this.inputList[t].type==e.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.VALUE&&this.inputList[t].type==e.inputTypes.DUMMY)return!0;return!1},e.Block.prototype.setOutputShape=function(t){this.outputShape_=t},e.Block.prototype.getOutputShape=function(){return this.outputShape_},e.Block.prototype.isEnabled=function(){return!this.disabled},e.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},e.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},e.Block.prototype.isCollapsed=function(){return this.collapsed_},e.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},e.Block.prototype.toString=function(t,n){function r(it){var q=it.getCheck();return!q&&it.targetConnection&&(q=it.targetConnection.getCheck()),!!q&&(-1!=q.indexOf("Boolean")||-1!=q.indexOf("Number"))}function s(){D&&D.getType()==P.getType()&&D.getLocation()==P.getLocation()&&(D=null)}var c=[];n=n||"?";var v=e.ASTNode.NAVIGATE_ALL_FIELDS;e.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var D=e.ASTNode.createBlockNode(this),P=D;D;){switch(D.getType()){case e.ASTNode.types.INPUT:var G=D.getLocation();D.in()?r(G)&&c.push("("):c.push(n);break;case e.ASTNode.types.FIELD:(G=D.getLocation()).name!=e.constants.COLLAPSED_FIELD_NAME&&c.push(G.getText())}if(!(D=(G=D).in()||G.next())){for(D=G.out(),s();D&&!D.next();)D=D.out(),s(),D&&D.getType()==e.ASTNode.types.INPUT&&r(D.getLocation())&&c.push(")");D&&(D=D.next())}}for(e.ASTNode.NAVIGATE_ALL_FIELDS=v,n=2;n<c.length;n++)"("==c[n-2]&&")"==c[n]&&(c[n-2]=c[n-1],c.splice(n-1,2));return c=(c=c.reduce(function(it,q){return it+("("==it.substr(-1)||")"==q?"":" ")+q},"")).trim()||"???",t&&c.length>t&&(c=c.substring(0,t-3)+"..."),c},e.Block.prototype.appendValueInput=function(t){return this.appendInput_(e.inputTypes.VALUE,t)},e.Block.prototype.appendStatementInput=function(t){return this.appendInput_(e.inputTypes.STATEMENT,t)},e.Block.prototype.appendDummyInput=function(t){return this.appendInput_(e.inputTypes.DUMMY,t||"")},e.Block.prototype.jsonInit=function(t){var n=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(n+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,n):this.jsonInitColour_(t,n);for(var r=0;void 0!==t["message"+r];)this.interpolate_(t["message"+r],t["args"+r]||[],t["lastDummyAlign"+r],n),r++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(r=e.utils.replaceMessageReferences(r=t.tooltip),this.setTooltip(r)),void 0!==t.enableContextMenu&&(this.contextMenu=!!(r=t.enableContextMenu)),void 0!==t.helpUrl&&(r=e.utils.replaceMessageReferences(r=t.helpUrl),this.setHelpUrl(r)),"string"==typeof t.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&e.Extensions.apply(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(n=0;n<t.length;++n)e.Extensions.apply(t[n],this,!1)},e.Block.prototype.jsonInitColour_=function(t,n){if("colour"in t)if(void 0===t.colour)console.warn(n+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(r){console.warn(n+"Illegal colour value: ",t)}}},e.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(r){console.warn(n+"Style does not exist: ",t)}},e.Block.prototype.mixin=function(t,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var r in n=[],t)void 0!==this[r]&&n.push(r);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}e.utils.object.mixin(this,t)},e.Block.prototype.interpolate_=function(t,n,r,s){t=e.utils.tokenizeInterpolation(t),this.validateTokens_(t,n.length),n=this.interpolateArguments_(t,n,r),r=[],t=0;for(var c;c=n[t];t++)if(this.isInputKeyword_(c.type)){if(c=this.inputFromJson_(c,s)){for(var D,v=0;D=r[v];v++)c.appendField(D[0],D[1]);r.length=0}}else(v=this.fieldFromJson_(c))&&r.push([v,c.name])},e.Block.prototype.validateTokens_=function(t,n){for(var r=[],s=0,c=0;c<t.length;c++){var v=t[c];if("number"==typeof v){if(1>v||v>n)throw Error('Block "'+this.type+'": Message index %'+v+" out of range.");if(r[v])throw Error('Block "'+this.type+'": Message index %'+v+" duplicated.");r[v]=!0,s++}}if(s!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},e.Block.prototype.interpolateArguments_=function(t,n,r){for(var s=[],c=0;c<t.length;c++){var v=t[c];"number"==typeof v&&(v=n[v-1]),("string"!=typeof v||(v=this.stringToFieldJson_(v)))&&s.push(v)}return(t=s.length)&&!this.isInputKeyword_(s[t-1].type)&&(t={type:"input_dummy"},r&&(t.align=r),s.push(t)),s},e.Block.prototype.fieldFromJson_=function(t){var n=e.fieldRegistry.fromJson(t);return!n&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):n},e.Block.prototype.inputFromJson_=function(t,n){var r={LEFT:e.constants.ALIGN.LEFT,RIGHT:e.constants.ALIGN.RIGHT,CENTRE:e.constants.ALIGN.CENTRE,CENTER:e.constants.ALIGN.CENTRE},s=null;switch(t.type){case"input_value":s=this.appendValueInput(t.name);break;case"input_statement":s=this.appendStatementInput(t.name);break;case"input_dummy":s=this.appendDummyInput(t.name)}return s?(t.check&&s.setCheck(t.check),t.align&&(void 0===(r=r[t.align.toUpperCase()])?console.warn(n+"Illegal align value: ",t.align):s.setAlign(r)),s):null},e.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},e.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},e.Block.prototype.appendInput_=function(t,n){var r=null;return(t==e.inputTypes.VALUE||t==e.inputTypes.STATEMENT)&&(r=this.makeConnection_(t)),t==e.inputTypes.STATEMENT&&this.statementInputCount++,t=new e.Input(t,n,this,r),this.inputList.push(t),t},e.Block.prototype.moveInputBefore=function(t,n){if(t!=n){for(var v,r=-1,s=n?-1:this.inputList.length,c=0;v=this.inputList[c];c++)if(v.name==t){if(r=c,-1!=s)break}else if(n&&v.name==n&&(s=c,-1!=r))break;if(-1==r)throw Error('Named input "'+t+'" not found.');if(-1==s)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(r,s)}},e.Block.prototype.moveNumberedInputBefore=function(t,n){if(t==n)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var r=this.inputList[t];this.inputList.splice(t,1),t<n&&n--,this.inputList.splice(n,0,r)},e.Block.prototype.removeInput=function(t,n){for(var s,r=0;s=this.inputList[r];r++)if(s.name==t)return s.type==e.inputTypes.STATEMENT&&this.statementInputCount--,s.dispose(),this.inputList.splice(r,1),!0;if(n)return!1;throw Error("Input not found: "+t)},e.Block.prototype.getInput=function(t){for(var r,n=0;r=this.inputList[n];n++)if(r.name==t)return r;return null},e.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},e.Block.prototype.getCommentText=function(){return this.commentModel.text},e.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},e.Block.prototype.setWarningText=function(t,n){},e.Block.prototype.setMutator=function(t){},e.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},e.Block.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var r=new(e.Events.get(e.Events.BLOCK_MOVE))(this);this.xy_.translate(t,n),r.recordNew(),e.Events.fire(r)},e.Block.prototype.makeConnection_=function(t){return new e.Connection(this,t)},e.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var r,n=0;r=this.inputList[n];n++)if(r.connection&&(!(r=r.connection.targetBlock())||!r.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},e.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},e.blockRendering.IPathObject=function(t,n){},e.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},e.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},e.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},e.Menu.prototype.render=function(t){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&e.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var s,r=0;s=this.menuItems_[r];r++)n.appendChild(s.createDom());this.mouseOverHandler_=e.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=e.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=e.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=e.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=e.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),t.appendChild(n)},e.Menu.prototype.getElement=function(){return this.element_},e.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),e.utils.dom.addClass(t,"blocklyFocused"))},e.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),e.utils.dom.removeClass(t,"blocklyFocused"))},e.Menu.prototype.setRole=function(t){this.roleName_=t},e.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(e.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(e.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(e.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(e.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(e.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,t=0;n=this.menuItems_[t];t++)n.dispose();this.element_=null},e.Menu.prototype.getMenuItem_=function(t){for(var n=this.getElement();t&&t!=n;){if(e.utils.dom.hasClass(t,"blocklyMenuItem"))for(var s,r=0;s=this.menuItems_[r];r++)if(s.getElement()==t)return s;t=t.parentElement}return null},e.Menu.prototype.setHighlighted=function(t){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,n=this.getElement(),e.utils.style.scrollIntoContainerView(t.getElement(),n),e.utils.aria.setState(n,e.utils.aria.State.ACTIVEDESCENDANT,t.getId()))},e.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},e.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},e.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},e.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},e.Menu.prototype.highlightHelper_=function(t,n){t+=n;for(var r;r=this.menuItems_[t];){if(r.isEnabled()){this.setHighlighted(r);break}t+=n}},e.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},e.Menu.prototype.handleClick_=function(t){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof t.clientX){var r=new e.utils.Coordinate(t.clientX,t.clientY);if(1>e.utils.Coordinate.distance(n,r))return}(t=this.getMenuItem_(t.target))&&t.performAction()},e.Menu.prototype.handleMouseEnter_=function(t){this.focus()},e.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},e.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var n=this.highlightedItem_;switch(t.keyCode){case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:n&&n.performAction();break;case e.utils.KeyCodes.UP:this.highlightPrevious();break;case e.utils.KeyCodes.DOWN:this.highlightNext();break;case e.utils.KeyCodes.PAGE_UP:case e.utils.KeyCodes.HOME:this.highlightFirst_();break;case e.utils.KeyCodes.PAGE_DOWN:case e.utils.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},e.Menu.prototype.getSize=function(){var t=this.getElement(),n=e.utils.style.getSize(t);return n.height=t.scrollHeight,n},e.MenuItem=function(t,n){this.content_=t,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=e.utils.IdGenerator.getNextUniqueId(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var r=document.createElement("div");r.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(r)}return r=this.content_,"string"==typeof this.content_&&(r=document.createTextNode(this.content_)),n.appendChild(r),t.appendChild(n),this.roleName_&&e.utils.aria.setRole(t,this.roleName_),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),e.utils.aria.setState(t,e.utils.aria.State.DISABLED,!this.enabled_),t},e.MenuItem.prototype.dispose=function(){this.element_=null},e.MenuItem.prototype.getElement=function(){return this.element_},e.MenuItem.prototype.getId=function(){return this.element_.id},e.MenuItem.prototype.getValue=function(){return this.value_},e.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},e.MenuItem.prototype.setRole=function(t){this.roleName_=t},e.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},e.MenuItem.prototype.setChecked=function(t){this.checked_=t},e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var n=this.getElement();n&&this.isEnabled()&&(t?(e.utils.dom.addClass(n,"blocklyMenuItemHighlight"),e.utils.dom.addClass(n,"goog-menuitem-highlight")):(e.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),e.utils.dom.removeClass(n,"goog-menuitem-highlight")))},e.MenuItem.prototype.isEnabled=function(){return this.enabled_},e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},e.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},e.MenuItem.prototype.onAction=function(t,n){this.actionHandler_=t.bind(n)},e.ContextMenu={},e.ContextMenu.currentBlock=null,e.ContextMenu.menu_=null,e.ContextMenu.show=function(t,n,r){if(e.WidgetDiv.show(e.ContextMenu,r,e.ContextMenu.dispose),n.length){var s=e.ContextMenu.populate_(n,r);e.ContextMenu.menu_=s,e.ContextMenu.position_(s,t,r),setTimeout(function(){s.focus()},1),e.ContextMenu.currentBlock=null}else e.ContextMenu.hide()},e.ContextMenu.populate_=function(t,n){var r=new e.Menu;r.setRole(e.utils.aria.Role.MENU);for(var c,s=0;c=t[s];s++){var v=new e.MenuItem(c.text);v.setRightToLeft(n),v.setRole(e.utils.aria.Role.MENUITEM),r.addChild(v),v.setEnabled(c.enabled),c.enabled&&v.onAction(function(D){e.ContextMenu.hide(),this.callback(this.scope)},c)}return r},e.ContextMenu.position_=function(t,n,r){var s=e.utils.getViewportBBox();n=new e.utils.Rect(n.clientY+s.top,n.clientY+s.top,n.clientX+s.left,n.clientX+s.left),e.ContextMenu.createWidget_(t);var c=t.getSize();r&&(n.left+=c.width,n.right+=c.width,s.left+=c.width,s.right+=c.width),e.WidgetDiv.positionWithAnchor(s,n,c,r),t.focus()},e.ContextMenu.createWidget_=function(t){t.render(e.WidgetDiv.DIV);var n=t.getElement();e.utils.dom.addClass(n,"blocklyContextMenu"),e.browserEvents.conditionalBind(n,"contextmenu",null,e.utils.noEvent),t.focus()},e.ContextMenu.hide=function(){e.WidgetDiv.hideIfOwner(e.ContextMenu),e.ContextMenu.currentBlock=null},e.ContextMenu.dispose=function(){e.ContextMenu.menu_&&(e.ContextMenu.menu_.dispose(),e.ContextMenu.menu_=null)},e.ContextMenu.callbackFactory=function(t,n){return function(){e.Events.disable();try{var r=e.Xml.domToBlock(n,t.workspace),s=t.getRelativeToSurfaceXY();s.x=t.RTL?s.x-e.SNAP_RADIUS:s.x+e.SNAP_RADIUS,s.y+=2*e.SNAP_RADIUS,r.moveBy(s.x,s.y)}finally{e.Events.enable()}e.Events.isEnabled()&&!r.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(r)),r.select()}},e.ContextMenu.commentDeleteOption=function(t){return{text:e.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.commentDuplicateOption=function(t){return{text:e.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){e.duplicate(t)}}},e.ContextMenu.workspaceCommentOption=function(t,n){if(!e.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var r={enabled:!e.utils.userAgent.IE};return r.text=e.Msg.ADD_COMMENT,r.callback=function(){var s=new e.WorkspaceCommentSvg(t,e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,e.WorkspaceCommentSvg.DEFAULT_SIZE,e.WorkspaceCommentSvg.DEFAULT_SIZE),c=t.getInjectionDiv().getBoundingClientRect();c=new e.utils.Coordinate(n.clientX-c.left,n.clientY-c.top);var v=t.getOriginOffsetInPixels();(c=e.utils.Coordinate.difference(c,v)).scale(1/t.scale),s.moveBy(c.x,c.y),t.rendered&&(s.initSvg(),s.render(),s.select())},r},e.ContextMenuRegistry=function(){e.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},e.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},e.ContextMenuRegistry.registry=null,e.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},e.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},e.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},e.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,n){var r=[],s=this.registry_;return Object.keys(s).forEach(function(c){if(t==(c=s[c]).scopeType){var v=c.preconditionFn(n);"hidden"!=v&&(c={text:"function"==typeof c.displayText?c.displayText(n):c.displayText,enabled:"enabled"==v,callback:c.callback,scope:n,weight:c.weight},r.push(c))}}),r.sort(function(c,v){return c.weight-v.weight}),r},new e.ContextMenuRegistry,e.Events.Selected=function(t,n,r){e.Events.Selected.superClass_.constructor.call(this,r),this.oldElementId=t,this.newElementId=n},e.utils.object.inherits(e.Events.Selected,e.Events.UiBase),e.Events.Selected.prototype.type=e.Events.SELECTED,e.Events.Selected.prototype.toJson=function(){var t=e.Events.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},e.Events.Selected.prototype.fromJson=function(t){e.Events.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},e.registry.register(e.registry.Type.EVENT,e.Events.SELECTED,e.Events.Selected),e.IBoundedElement=function(){},e.ICopyable=function(){},e.RenderedConnection=function(t,n){e.RenderedConnection.superClass_.constructor.call(this,t,n),this.db_=t.workspace.connectionDBList[n],this.dbOpposite_=t.workspace.connectionDBList[e.OPPOSITE_TYPE[n]],this.offsetInBlock_=new e.utils.Coordinate(0,0),this.trackedState_=e.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},e.utils.object.inherits(e.RenderedConnection,e.Connection),e.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},e.RenderedConnection.prototype.dispose=function(){e.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},e.RenderedConnection.prototype.getSourceBlock=function(){return e.RenderedConnection.superClass_.getSourceBlock.call(this)},e.RenderedConnection.prototype.targetBlock=function(){return e.RenderedConnection.superClass_.targetBlock.call(this)},e.RenderedConnection.prototype.distanceFrom=function(t){var n=this.x-t.x;return t=this.y-t.y,Math.sqrt(n*n+t*t)},e.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var r=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,r=!0}var s=e.selected==n;s||n.addSelect();var c=t.x+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x,v=t.y+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.y;r&&(v=-v),n.RTL&&(c=t.x-e.SNAP_RADIUS-Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x),n.moveBy(c,v),s||n.removeSelect()}}},e.RenderedConnection.prototype.moveTo=function(t,n){this.trackedState_==e.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=t,this.y=n},e.RenderedConnection.prototype.moveBy=function(t,n){this.moveTo(this.x+t,this.y+n)},e.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},e.RenderedConnection.prototype.setOffsetInBlock=function(t,n){this.offsetInBlock_.x=t,this.offsetInBlock_.y=n},e.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},e.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=t||0!=n){var r=this.targetBlock(),s=r.getSvgRoot();if(!s)throw Error("block is not rendered.");s=e.utils.getRelativeXY(s),r.getSvgRoot().setAttribute("transform","translate("+(s.x-t)+","+(s.y-n)+")"),r.moveConnections(-t,-n)}},e.RenderedConnection.prototype.closest=function(t,n){return this.dbOpposite_.searchForClosest(this,t,n)},e.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),n=t.shapeFor(this);n=this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.OUTPUT_VALUE?e.utils.svgPaths.moveBy(0,-(t=t.TAB_OFFSET_FROM_TOP))+e.utils.svgPaths.lineOnAxis("v",t)+n.pathDown+e.utils.svgPaths.lineOnAxis("v",t):e.utils.svgPaths.moveBy(-(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS),0)+e.utils.svgPaths.lineOnAxis("h",t)+n.pathLeft+e.utils.svgPaths.lineOnAxis("h",t),t=this.sourceBlock_.getRelativeToSurfaceXY(),e.Connection.highlightedPath_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},e.RenderedConnection.prototype.unhighlight=function(){e.utils.dom.removeNode(e.Connection.highlightedPath_),delete e.Connection.highlightedPath_},e.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_==e.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_==e.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.UNTRACKED))},e.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),n=0;n<t.length;n++){for(var r=t[n],s=r.getConnections_(!0),c=0;c<s.length;c++)s[c].setTracking(!1);for(r=r.getIcons(),c=0;c<r.length;c++)r[c].setVisible(!1)}},e.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!=e.connectionTypes.INPUT_VALUE&&this.type!=e.connectionTypes.NEXT_STATEMENT)return t;var n=this.targetBlock();if(n){if(n.isCollapsed()){var r=[];n.outputConnection&&r.push(n.outputConnection),n.nextConnection&&r.push(n.nextConnection),n.previousConnection&&r.push(n.previousConnection)}else r=n.getConnections_(!0);for(var s=0;s<r.length;s++)t.push.apply(t,r[s].startTrackingAll());t.length||(t[0]=n)}return t},e.RenderedConnection.prototype.isConnectionAllowed=function(t,n){return e.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(t)>n)&&e.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},e.RenderedConnection.prototype.onFailedConnect=function(t){var n=this.getSourceBlock();if(e.Events.recordUndo){var r=e.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(e.Events.setGroup(r),this.bumpAwayFrom(t),e.Events.setGroup(!1))}.bind(this),e.BUMP_DELAY)}},e.RenderedConnection.prototype.disconnectInternal_=function(t,n){e.RenderedConnection.superClass_.disconnectInternal_.call(this,t,n),t.rendered&&t.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},e.RenderedConnection.prototype.respawnShadow_=function(){e.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},e.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},e.RenderedConnection.prototype.connect_=function(t){e.RenderedConnection.superClass_.connect_.call(this,t);var n=this.getSourceBlock();t=t.getSourceBlock();var r=n.rendered,s=t.rendered;r&&n.updateDisabled(),s&&t.updateDisabled(),r&&s&&(this.type==e.connectionTypes.NEXT_STATEMENT||this.type==e.connectionTypes.PREVIOUS_STATEMENT?t.render():n.render()),(n=n.getInputWithBlock(t))&&(n=n.isVisible(),t.getSvgRoot().style.display=n?"block":"none")},e.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},e.BasicCursor=function(){e.BasicCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.BasicCursor,e.Cursor),e.BasicCursor.registrationName="basicCursor",e.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.in=function(){return this.next()},e.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.out=function(){return this.prev()},e.BasicCursor.prototype.getNextNode_=function(t,n){if(!t)return null;var r=t.in()||t.next();return n(r)?r:r?this.getNextNode_(r,n):n(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,n):null},e.BasicCursor.prototype.getPreviousNode_=function(t,n){if(!t)return null;var r=t.prev();return n(r=r?this.getRightMostChild_(r):t.out())?r:r?this.getPreviousNode_(r,n):null},e.BasicCursor.prototype.validNode_=function(t){var n=!1;return((t=t&&t.getType())==e.ASTNode.types.OUTPUT||t==e.ASTNode.types.INPUT||t==e.ASTNode.types.FIELD||t==e.ASTNode.types.NEXT||t==e.ASTNode.types.PREVIOUS||t==e.ASTNode.types.WORKSPACE)&&(n=!0),n},e.BasicCursor.prototype.findSiblingOrParent_=function(t){return t?t.next()||this.findSiblingOrParent_(t.out()):null},e.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},e.registry.register(e.registry.Type.CURSOR,e.BasicCursor.registrationName,e.BasicCursor),e.TabNavigateCursor=function(){e.TabNavigateCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.TabNavigateCursor,e.BasicCursor),e.TabNavigateCursor.prototype.validNode_=function(t){var n=!1,r=t&&t.getType();return t&&(t=t.getLocation(),r==e.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(n=!0)),n},e.BlockSvg=function(t,n,r){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=e.utils.is3dSupported()&&!!t.getBlockDragSurface();var s=this.pathObject.svgPath;s.tooltip=this,e.Tooltip.bindMouseEvents(s),e.BlockSvg.superClass_.constructor.call(this,t,n,r),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:e.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},e.utils.object.inherits(e.BlockSvg,e.Block),e.BlockSvg.prototype.height=0,e.BlockSvg.prototype.width=0,e.BlockSvg.prototype.warningTextDb_=null,e.BlockSvg.INLINE=-1,e.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",e.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,t=0;n=this.inputList[t];t++)n.init();for(n=this.getIcons(),t=0;t<n.length;t++)n[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||e.browserEvents.conditionalBind(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},e.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},e.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},e.BlockSvg.prototype.getColourShadow=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},e.BlockSvg.prototype.getColourBorder=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},e.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(e.selected!=this){var t=null;if(e.selected){t=e.selected.id,e.Events.disable();try{e.selected.unselect()}finally{e.Events.enable()}}t=new(e.Events.get(e.Events.SELECTED))(t,this.id,this.workspace.id),e.Events.fire(t),e.selected=this,this.addSelect()}},e.BlockSvg.prototype.unselect=function(){if(e.selected==this){var t=new(e.Events.get(e.Events.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,e.Events.fire(t),e.selected=null,this.removeSelect()}},e.BlockSvg.prototype.mutator=null,e.BlockSvg.prototype.comment=null,e.BlockSvg.prototype.commentIcon_=null,e.BlockSvg.prototype.warning=null,e.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},e.BlockSvg.prototype.setParent=function(t){var n=this.parentBlock_;if(t!=n){e.utils.dom.startTextWidthCache(),e.BlockSvg.superClass_.setParent.call(this,t),e.utils.dom.stopTextWidthCache();var r=this.getSvgRoot();if(!this.workspace.isClearing&&r){var s=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(r),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-s.x,t.y-s.y)):n&&(this.workspace.getCanvas().appendChild(r),this.translate(s.x,s.y)),this.applyColour()}}},e.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,n=0,r=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,s=this.getSvgRoot();if(s)do{var c=e.utils.getRelativeXY(s);t+=c.x,n+=c.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==s&&(t+=(c=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=c.y),s=s.parentNode}while(s&&s!=this.workspace.getCanvas()&&s!=r);return new e.utils.Coordinate(t,n)},e.BlockSvg.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var r=e.Events.isEnabled();if(r)var s=new(e.Events.get(e.Events.BLOCK_MOVE))(this);var c=this.getRelativeToSurfaceXY();this.translate(c.x+t,c.y+n),this.moveConnections(t,n),r&&(s.recordNew(),e.Events.fire(s)),this.workspace.resizeContents()},e.BlockSvg.prototype.translate=function(t,n){this.getSvgRoot().setAttribute("transform","translate("+t+","+n+")")},e.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},e.BlockSvg.prototype.moveTo=function(t){var n=this.getRelativeToSurfaceXY();this.moveBy(t.x-n.x,t.y-n.y)},e.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},e.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},e.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},e.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var n=t.getSpacing(),r=n/2,s=this.getRelativeToSurfaceXY();t=Math.round((s.x-r)/n)*n+r-s.x,n=Math.round((s.y-r)/n)*n+r-s.y,t=Math.round(t),n=Math.round(n),0==t&&0==n||this.moveBy(t,n)}}},e.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var r=t.x-n.width,s=t.x;else r=t.x,s=t.x+n.width;return new e.utils.Rect(t.y,t.y+n.height,r,s)},e.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,t=0;n=this.inputList[t];t++)n.markDirty()},e.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},e.BlockSvg.prototype.updateCollapsed_=function(){for(var c,t=this.isCollapsed(),n=e.constants.COLLAPSED_INPUT_NAME,r=e.constants.COLLAPSED_FIELD_NAME,s=0;c=this.inputList[s];s++)c.name!=n&&c.setVisible(!t);if(t){for(c=this.getIcons(),s=0;t=c[s];s++)t.setVisible(!1);s=this.toString(e.COLLAPSE_CHARS),(c=this.getField(r))?c.setValue(s):(c=this.getInput(n)||this.appendDummyInput(n)).appendField(new e.FieldLabel(s),r)}else this.updateDisabled(),this.removeInput(n)},e.BlockSvg.prototype.tab=function(t,n){var r=new e.TabNavigateCursor;r.setCurNode(e.ASTNode.createFieldNode(t)),t=r.getCurNode(),n?r.next():r.prev(),(n=r.getCurNode())&&n!==t&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},e.BlockSvg.prototype.onMouseDown_=function(t){var n=this.workspace&&this.workspace.getGesture(t);n&&n.handleBlockStart(t,this)},e.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},e.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},e.BlockSvg.prototype.showContextMenu=function(t){var n=this.generateContextMenu();n&&n.length&&(e.ContextMenu.show(t,n,this.RTL),e.ContextMenu.currentBlock=this)},e.BlockSvg.prototype.moveConnections=function(t,n){if(this.rendered){for(var r=this.getConnections_(!1),s=0;s<r.length;s++)r[s].moveBy(t,n);for(r=this.getIcons(),s=0;s<r.length;s++)r[s].computeIconLocation();for(s=0;s<this.childBlocks_.length;s++)this.childBlocks_[s].moveConnections(t,n)}},e.BlockSvg.prototype.setDragging=function(t){if(t){var n=this.getSvgRoot();n.translate_="",n.skew_="",e.draggingConnections=e.draggingConnections.concat(this.getConnections_(!0)),e.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else e.draggingConnections=[],e.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(t)},e.BlockSvg.prototype.setMovable=function(t){e.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},e.BlockSvg.prototype.setEditable=function(t){e.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var n=0;n<t.length;n++)t[n].updateEditable()},e.BlockSvg.prototype.setShadow=function(t){e.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},e.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},e.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.BlockSvg.prototype.dispose=function(t,n){if(this.workspace){e.Tooltip.dispose(),e.Tooltip.unbindMouseEvents(this.pathObject.svgPath),e.utils.dom.startTextWidthCache();var r=this.workspace;if(e.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),e.ContextMenu.currentBlock==this&&e.ContextMenu.hide(),n&&this.rendered&&(this.unplug(t),e.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]);this.warningTextDb_=null}for(n=this.getIcons(),s=0;s<n.length;s++)n[s].dispose();e.BlockSvg.superClass_.dispose.call(this,!!t),e.utils.dom.removeNode(this.svgGroup_),r.resizeContents(),this.svgGroup_=null,e.utils.dom.stopTextWidthCache()}},e.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var t=e.Xml.blockToDom(this,!0);e.Xml.deleteNext(t);var n=this.getRelativeToSurfaceXY();return t.setAttribute("x",this.RTL?-n.x:n.x),t.setAttribute("y",n.y),{xml:t,source:this.workspace,typeCounts:e.utils.getBlockTypeCounts(this,!0)}},e.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),n=0;n<t.length;n++)t[n].applyColour();for(t=0;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.applyColour()},e.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var r,n=0;r=t[n];n++)r.rendered&&r.updateDisabled()},e.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},e.BlockSvg.prototype.setCommentText=function(t){if(!e.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(e.BlockSvg.superClass_.setCommentText.call(this,t),!!this.commentIcon_==(t=null!=t)?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},e.BlockSvg.prototype.setWarningText=function(t,n){if(!e.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var r=n||"";if(r)this.warningTextDb_[r]&&(clearTimeout(this.warningTextDb_[r]),delete this.warningTextDb_[r]);else for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]),delete this.warningTextDb_[s];if(this.workspace.isDragging()){var c=this;this.warningTextDb_[r]=setTimeout(function(){c.workspace&&(delete c.warningTextDb_[r],c.setWarningText(t,r))},100)}else{if(this.isInFlyout&&(t=null),n=!1,"string"==typeof t){s=this.getSurroundParent();for(var v=null;s;)s.isCollapsed()&&(v=s),s=s.getSurroundParent();v&&v.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new e.Warning(this),n=!0),this.warning.setText(t,r)}else this.warning&&!r?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",r),(s=this.warning.getText())||this.warning.dispose(),n=n!=s);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},e.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},e.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},e.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},e.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},e.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},e.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},e.BlockSvg.prototype.setColour=function(t){e.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},e.BlockSvg.prototype.setStyle=function(t){var n=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!n)throw Error("Invalid style name: "+t);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},e.BlockSvg.prototype.bringToFront=function(){var t=this;do{var n=t.getSvgRoot(),r=n.parentNode,s=r.childNodes;s[s.length-1]!==n&&r.appendChild(n),t=t.getParent()}while(t)},e.BlockSvg.prototype.setPreviousStatement=function(t,n){e.BlockSvg.superClass_.setPreviousStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setNextStatement=function(t,n){e.BlockSvg.superClass_.setNextStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setOutput=function(t,n){e.BlockSvg.superClass_.setOutput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setInputsInline=function(t){e.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.removeInput=function(t,n){return t=e.BlockSvg.superClass_.removeInput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.moveNumberedInputBefore=function(t,n){e.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.appendInput_=function(t,n){return t=e.BlockSvg.superClass_.appendInput_.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(t)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;r&&(r.setTracking(t),(r=r.targetBlock())&&r.setConnectionTracking(t))}},e.BlockSvg.prototype.getConnections_=function(t){var n=[];if((t||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var r;r=this.inputList[t];t++)r.connection&&n.push(r.connection)}return n},e.BlockSvg.prototype.lastConnectionInStack=function(t){return e.BlockSvg.superClass_.lastConnectionInStack.call(this,t)},e.BlockSvg.prototype.getMatchingConnection=function(t,n){return e.BlockSvg.superClass_.getMatchingConnection.call(this,t,n)},e.BlockSvg.prototype.makeConnection_=function(t){return new e.RenderedConnection(this,t)},e.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var s,n=this.getConnections_(!1),r=0;s=n[r];r++){s.isConnected()&&s.isSuperior()&&s.targetBlock().bumpNeighbours();for(var D,c=s.neighbours(e.SNAP_RADIUS),v=0;D=c[v];v++)s.isConnected()&&D.isConnected()||D.getSourceBlock().getRootBlock()!=t&&(s.isSuperior()?D.bumpAwayFrom(s):s.bumpAwayFrom(D))}}},e.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,n=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(n),t.snapToGrid(),e.Events.setGroup(!1)},e.BUMP_DELAY/2),setTimeout(function(){e.Events.setGroup(n),t.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)},e.BlockSvg.prototype.positionNearConnection=function(t,n){t.type!=e.connectionTypes.NEXT_STATEMENT&&t.type!=e.connectionTypes.INPUT_VALUE||this.moveBy(n.x-t.x,n.y-t.y)},e.BlockSvg.prototype.getParent=function(){return e.BlockSvg.superClass_.getParent.call(this)},e.BlockSvg.prototype.getRootBlock=function(){return e.BlockSvg.superClass_.getRootBlock.call(this)},e.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,e.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}e.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},e.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;r&&(r.moveToOffset(t),r.isConnected()&&r.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},e.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},e.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},e.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,n=this.width,r=this.getNextBlock();if(r){r=r.getHeightWidth();var s=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=r.height-s,n=Math.max(n,r.width)}return{height:t,width:n}},e.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},e.BlockSvg.prototype.highlightShapeForInput=function(t,n){this.pathObject.updateShapeForInputHighlight(t,n)},e.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},e.ConnectionDB.prototype.addConnection=function(t,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,t)},e.ConnectionDB.prototype.findIndexOfConnection_=function(t,n){if(!this.connections_.length)return-1;var r=this.calculateIndexForYPos_(n);if(r>=this.connections_.length)return-1;n=t.y;for(var s=r;0<=s&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s--}for(s=r;s<this.connections_.length&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s++}return-1},e.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var n=0,r=this.connections_.length;n<r;){var s=Math.floor((n+r)/2);if(this.connections_[s].y<t)n=s+1;else{if(!(this.connections_[s].y>t)){n=s;break}r=s}}return n},e.ConnectionDB.prototype.removeConnection=function(t,n){if(-1==(t=this.findIndexOfConnection_(t,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},e.ConnectionDB.prototype.getNeighbours=function(t,n){function r(it){var q=c-s[it].x,bt=v-s[it].y;return Math.sqrt(q*q+bt*bt)<=n&&G.push(s[it]),bt<n}var s=this.connections_,c=t.x,v=t.y;t=0;for(var D=s.length-2,P=D;t<P;)s[P].y<v?t=P:D=P,P=Math.floor((t+D)/2);var G=[];if(D=t=P,s.length){for(;0<=t&&r(t);)t--;do{D++}while(D<s.length&&r(D))}return G},e.ConnectionDB.prototype.isInYRange_=function(t,n,r){return Math.abs(this.connections_[t].y-n)<=r},e.ConnectionDB.prototype.searchForClosest=function(t,n,r){if(!this.connections_.length)return{connection:null,radius:n};var s=t.y,c=t.x;t.x=c+r.x,t.y=s+r.y;var v=this.calculateIndexForYPos_(t.y);r=null;for(var P,D=n,G=v-1;0<=G&&this.isInYRange_(G,t.y,n);)this.connectionChecker_.canConnect(t,P=this.connections_[G],!0,D)&&(r=P,D=P.distanceFrom(t)),G--;for(;v<this.connections_.length&&this.isInYRange_(v,t.y,n);)this.connectionChecker_.canConnect(t,P=this.connections_[v],!0,D)&&(r=P,D=P.distanceFrom(t)),v++;return t.x=c,t.y=s,{connection:r,radius:D}},e.ConnectionDB.init=function(t){var n=[];return n[e.connectionTypes.INPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.OUTPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.NEXT_STATEMENT]=new e.ConnectionDB(t),n[e.connectionTypes.PREVIOUS_STATEMENT]=new e.ConnectionDB(t),n},e.Events.ThemeChange=function(t,n){e.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=t},e.utils.object.inherits(e.Events.ThemeChange,e.Events.UiBase),e.Events.ThemeChange.prototype.type=e.Events.THEME_CHANGE,e.Events.ThemeChange.prototype.toJson=function(){var t=e.Events.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},e.Events.ThemeChange.prototype.fromJson=function(t){e.Events.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},e.registry.register(e.registry.Type.EVENT,e.Events.THEME_CHANGE,e.Events.ThemeChange),e.Events.ViewportChange=function(t,n,r,s,c){e.Events.ViewportChange.superClass_.constructor.call(this,s),this.viewTop=t,this.viewLeft=n,this.scale=r,this.oldScale=c},e.utils.object.inherits(e.Events.ViewportChange,e.Events.UiBase),e.Events.ViewportChange.prototype.type=e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange.prototype.toJson=function(){var t=e.Events.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},e.Events.ViewportChange.prototype.fromJson=function(t){e.Events.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},e.registry.register(e.registry.Type.EVENT,e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange),e.IMetricsManager=function(){},e.MetricsManager=function(t){this.workspace_=t},e.MetricsManager.prototype.getDimensionsPx_=function(t){var n=0,r=0;return t&&(n=t.getWidth(),r=t.getHeight()),new e.utils.Size(n,r)},e.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},e.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,n=this.getToolboxMetrics(),r=this.getFlyoutMetrics(!0),s=!!this.workspace_.getToolbox(),c=!!this.workspace_.getFlyout(!0),v=s?n.position:r.position,D=v==e.utils.toolbox.Position.LEFT;return v=v==e.utils.toolbox.Position.TOP,s&&D?t=n.width:c&&D&&(t=r.width),D=0,s&&v?D=n.height:c&&v&&(D=r.height),{top:D,left:t}},e.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var n=this.getSvgMetrics(),r=this.getToolboxMetrics(),s=this.getFlyoutMetrics(!0),c=this.workspace_.getToolbox()?r.position:s.position;return this.workspace_.getToolbox()?c==e.utils.toolbox.Position.TOP||c==e.utils.toolbox.Position.BOTTOM?n.height-=r.height:(c==e.utils.toolbox.Position.LEFT||c==e.utils.toolbox.Position.RIGHT)&&(n.width-=r.width):this.workspace_.getFlyout(!0)&&(c==e.utils.toolbox.Position.TOP||c==e.utils.toolbox.Position.BOTTOM?n.height-=s.height:(c==e.utils.toolbox.Position.LEFT||c==e.utils.toolbox.Position.RIGHT)&&(n.width-=s.width)),{height:n.height/t,width:n.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},e.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*t,width:(n.right-n.left)*t,top:n.top*t,left:n.left*t}},e.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},e.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),r=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var s={};return r||(s.top=t.top,s.bottom=t.top+t.height),n||(s.left=t.left,s.right=t.left+t.width),s},e.MetricsManager.prototype.getPaddedContent_=function(t,n){var r=n.top+n.height,s=n.left+n.width,c=t.width,v=c/2,D=(t=t.height)/2;return{top:Math.min(n.top-D,r-t),bottom:Math.max(r+D,n.top+t),left:Math.min(n.left-v,s-c),right:Math.max(s+v,n.left+c)}},e.MetricsManager.prototype.getScrollMetrics=function(t,n,r){t=t?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var s=r||this.getContentMetrics();r=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,s);var c=void 0!==r.left?r.left:n.left;return{top:(s=void 0!==r.top?r.top:n.top)/t,left:c/t,width:((void 0!==r.right?r.right:n.right)-c)/t,height:((void 0!==r.bottom?r.bottom:n.bottom)-s)/t}},e.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},e.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),r=this.getSvgMetrics(),s=this.getAbsoluteMetrics(),c=this.getViewMetrics(),v=this.getContentMetrics(),D=this.getScrollMetrics(!1,c,v);return{contentHeight:v.height,contentWidth:v.width,contentTop:v.top,contentLeft:v.left,scrollHeight:D.height,scrollWidth:D.width,scrollTop:D.top,scrollLeft:D.left,viewHeight:c.height,viewWidth:c.width,viewTop:c.top,viewLeft:c.left,absoluteTop:s.top,absoluteLeft:s.left,svgHeight:r.height,svgWidth:r.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:n.width,flyoutHeight:n.height}},e.registry.register(e.registry.Type.METRICS_MANAGER,e.registry.DEFAULT,e.MetricsManager),e.FlyoutMetricsManager=function(t,n){this.flyout_=n,e.FlyoutMetricsManager.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.FlyoutMetricsManager,e.MetricsManager),e.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(n){t={height:0,y:0,width:0,x:0}}return t},e.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var n=this.getBoundingBox_();return{height:n.height*(t=t?1:this.workspace_.scale),width:n.width*t,top:n.y*t,left:n.x*t}},e.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,n,r){return{height:((n=r||this.getContentMetrics()).height+2*(r=this.flyout_.MARGIN*this.workspace_.scale))/(t=t?this.workspace_.scale:1),width:(n.width+n.left+r)/t,top:0,left:0}},e.ThemeManager=function(t,n){this.workspace_=t,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},e.ThemeManager.prototype.getTheme=function(){return this.theme_},e.ThemeManager.prototype.setTheme=function(t){var r,n=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(n&&e.utils.dom.removeClass(t,n.getClassName()),e.utils.dom.addClass(t,this.theme_.getClassName())),n=0;t=this.subscribedWorkspaces_[n];n++)t.refreshTheme();for(n=0,t=Object.keys(this.componentDB_);r=t[n];n++)for(var c,s=0;c=this.componentDB_[r][s];s++){var v=c.element;c=c.propertyName;var D=this.theme_&&this.theme_.getComponentStyle(r);v.style[c]=D||""}e.hideChaff()},e.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},e.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},e.ThemeManager.prototype.subscribe=function(t,n,r){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:t,propertyName:r}),n=this.theme_&&this.theme_.getComponentStyle(n),t.style[r]=n||""},e.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var s,n=Object.keys(this.componentDB_),r=0;s=n[r];r++){for(var c=this.componentDB_[s],v=c.length-1;0<=v;v--)c[v].element===t&&c.splice(v,1);this.componentDB_[s].length||delete this.componentDB_[s]}},e.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},e.TouchGesture=function(t,n){e.TouchGesture.superClass_.constructor.call(this,t,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},e.utils.object.inherits(e.TouchGesture,e.Gesture),e.TouchGesture.ZOOM_IN_MULTIPLIER=5,e.TouchGesture.ZOOM_OUT_MULTIPLIER=6,e.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,e.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&e.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=e.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&e.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&e.longStop_())},e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(e.Touch.isTouchEvent(t)&&this.handleTouchMove(t),e.longStop_()):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handleUp=function(t){e.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},e.TouchGesture.prototype.dispose=function(){e.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&e.browserEvents.unbind(this.onStartWrapper_)},e.TouchGesture.prototype.handleTouchStart=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,t.preventDefault())},e.TouchGesture.prototype.handleTouchMove=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(t):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handlePinch_=function(t){var n=Object.keys(this.cachedPoints_);if(n=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var r=n-this.previousScale_;r=0<r?r*e.TouchGesture.ZOOM_IN_MULTIPLIER:r*e.TouchGesture.ZOOM_OUT_MULTIPLIER;var s=this.startWorkspace_,c=e.utils.mouseToSvg(t,s.getParentSvg(),s.getInverseScreenCTM());s.zoom(c.x,c.y,r)}this.previousScale_=n,t.preventDefault()},e.TouchGesture.prototype.handleTouchEnd=function(t){t=e.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new e.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},e.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},e.WorkspaceAudio.prototype.lastSound_=null,e.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},e.WorkspaceAudio.prototype.load=function(t,n){if(t.length){try{var r=new e.utils.global.Audio}catch(P){return}for(var s,c=0;c<t.length;c++){var v=t[c],D=v.match(/\.(\w+)$/);if(D&&r.canPlayType("audio/"+D[1])){s=new e.utils.global.Audio(v);break}}s&&s.play&&(this.SOUNDS_[n]=s)}},e.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var n=this.SOUNDS_[t];n.volume=.01;var r=n.play();if(void 0!==r?r.then(n.pause).catch(function(){}):n.pause(),e.utils.userAgent.IPAD||e.utils.userAgent.IPHONE)break}},e.WorkspaceAudio.prototype.play=function(t,n){var r=this.SOUNDS_[t];r?(t=new Date,null!=this.lastSound_&&t-this.lastSound_<e.SOUND_LIMIT||(this.lastSound_=t,(r=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID?r:r.cloneNode()).volume=void 0===n?1:n,r.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,n)},e.WorkspaceSvg=function(t,n,r){e.WorkspaceSvg.superClass_.constructor.call(this,t),this.metricsManager_=new(e.registry.getClassFromOptions(e.registry.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||e.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new e.ComponentManager,this.connectionDBList=e.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),r&&(this.workspaceDragSurface_=r),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&e.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new e.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new e.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new e.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),e.Variables&&e.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_CATEGORY_NAME,e.Variables.flyoutCategory),e.VariablesDynamic&&e.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_DYNAMIC_CATEGORY_NAME,e.VariablesDynamic.flyoutCategory),e.Procedures&&e.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(e.PROCEDURE_CATEGORY_NAME,e.Procedures.flyoutCategory),this.addChangeListener(e.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new e.ThemeManager(this,this.options.theme||e.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=e.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new e.utils.Size(0,0)},e.utils.object.inherits(e.WorkspaceSvg,e.Workspace),e.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,e.WorkspaceSvg.prototype.rendered=!0,e.WorkspaceSvg.prototype.isVisible_=!0,e.WorkspaceSvg.prototype.isFlyout=!1,e.WorkspaceSvg.prototype.isMutator=!1,e.WorkspaceSvg.prototype.resizesEnabled_=!0,e.WorkspaceSvg.prototype.scrollX=0,e.WorkspaceSvg.prototype.scrollY=0,e.WorkspaceSvg.prototype.startScrollX=0,e.WorkspaceSvg.prototype.startScrollY=0,e.WorkspaceSvg.prototype.dragDeltaXY_=null,e.WorkspaceSvg.prototype.scale=1,e.WorkspaceSvg.prototype.oldScale_=1,e.WorkspaceSvg.prototype.oldTop_=0,e.WorkspaceSvg.prototype.oldLeft_=0,e.WorkspaceSvg.prototype.trashcan=null,e.WorkspaceSvg.prototype.scrollbar=null,e.WorkspaceSvg.prototype.flyout_=null,e.WorkspaceSvg.prototype.toolbox_=null,e.WorkspaceSvg.prototype.currentGesture_=null,e.WorkspaceSvg.prototype.blockDragSurface_=null,e.WorkspaceSvg.prototype.workspaceDragSurface_=null,e.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,e.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,e.WorkspaceSvg.prototype.injectionDiv_=null,e.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,e.WorkspaceSvg.prototype.targetWorkspace=null,e.WorkspaceSvg.prototype.inverseScreenCTM_=null,e.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,e.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},e.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},e.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},e.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},e.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},e.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},e.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},e.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},e.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},e.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},e.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},e.WorkspaceSvg.prototype.setTheme=function(t){t||(t=e.Themes.Classic),this.themeManager_.setTheme(t)},e.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new(e.Events.get(e.Events.THEME_CHANGE))(this.getTheme().name,this.id);e.Events.fire(t)},e.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var r,n=0;r=t[n];n++){var s=r.getStyleName();s&&(r.setStyle(s),r.mutator&&r.mutator.updateBlockStyle())}},e.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},e.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},e.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},e.WorkspaceSvg.prototype.getSvgXY=function(t){var n=0,r=0,s=1;(e.utils.dom.containsNode(this.getCanvas(),t)||e.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(s=this.scale);do{var c=e.utils.getRelativeXY(t);(t==this.getCanvas()||t==this.getBubbleCanvas())&&(s=1),n+=c.x*s,r+=c.y*s,t=t.parentNode}while(t&&t!=this.getParentSvg());return new e.utils.Coordinate(n,r)},e.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new e.utils.Size(t.width,t.height)},e.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return e.utils.getInjectionDivXY_(this.getCanvas())},e.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},e.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},e.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(e.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(e.registry.getClassFromOptions(e.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=e.registry.getClassFromOptions(e.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},e.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),e.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&e.utils.dom.removeNode(t.parentNode)}this.resizeHandlerWrapper_&&(e.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},e.WorkspaceSvg.prototype.newBlock=function(t,n){return new e.BlockSvg(this,t,n)},e.WorkspaceSvg.prototype.addTrashcan=function(){if(!e.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new e.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.addZoomControls=function(){if(!e.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new e.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},e.WorkspaceSvg.prototype.addFlyout=function(t){var n=new e.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},e.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},e.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},e.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},e.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},e.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var c,t=this.componentManager_.getComponents(e.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),r=[],s=0;c=t[s];s++)c.position(n,r),(c=c.getBoundingRectangle())&&r.push(c);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},e.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=e.utils.getDocumentScroll();e.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},e.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,n){var r=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,r.cachedWidth_=t),n&&(this.cachedParentSvgSize_.height=n,r.cachedHeight_=n)},e.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},e.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},e.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(e.Events.isEnabled()){var t=this.scale,n=-this.scrollY,r=-this.scrollX;if(!(t==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(r-this.oldLeft_))){var s=new(e.Events.get(e.Events.VIEWPORT_CHANGE))(n,r,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=n,this.oldLeft_=r,e.Events.fire(s)}}},e.WorkspaceSvg.prototype.translate=function(t,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,n);else{var r="translate("+t+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",r),this.svgBubbleCanvas_.setAttribute("transform",r)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,n,this.scale),this.grid_&&this.grid_.moveTo(t,n),this.maybeFireViewportChangeEvent()},e.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",t="translate("+t.x+","+t.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",t)}},e.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),r=parseInt(this.getParentSvg().getAttribute("height"),10),s=e.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,n,r,this.scale),this.workspaceDragSurface_.translateSurface(s.x,s.y)}},e.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},e.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},e.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var n=(t=this.getAllBlocks(!1)).length-1;0<=n;n--)t[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else e.hideChaff(!0)},e.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),n=0;n<t.length;n++)t[n].render(!1);this.markerManager_.updateMarkers()},e.WorkspaceSvg.prototype.highlightBlock=function(t,n){if(void 0===n){for(var s,r=0;s=this.highlightedBlocks_[r];r++)s.setHighlighted(!1);this.highlightedBlocks_.length=0}(s=t?this.getBlockById(t):null)&&((t=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(s)&&this.highlightedBlocks_.push(s):e.utils.arrayRemove(this.highlightedBlocks_,s),s.setHighlighted(t))},e.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},e.WorkspaceSvg.prototype.pasteBlock_=function(t){e.Events.disable();try{var n=e.Xml.domToBlock(t,this),r=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);if(!isNaN(r)&&!isNaN(s)){this.RTL&&(r=-r);do{t=!1;for(var D,c=this.getAllBlocks(!1),v=0;D=c[v];v++){var P=D.getRelativeToSurfaceXY();if(1>=Math.abs(r-P.x)&&1>=Math.abs(s-P.y)){t=!0;break}}if(!t){var it,G=n.getConnections_(!1);for(v=0;it=G[v];v++)if(it.closest(e.SNAP_RADIUS,new e.utils.Coordinate(r,s)).connection){t=!0;break}}t&&(r=this.RTL?r-e.SNAP_RADIUS:r+e.SNAP_RADIUS,s+=2*e.SNAP_RADIUS)}while(t);n.moveBy(r,s)}}finally{e.Events.enable()}e.Events.isEnabled()&&!n.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n)),n.select()},e.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){e.Events.disable();try{var n=e.WorkspaceCommentSvg.fromXml(t,this),r=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);isNaN(r)||isNaN(s)||(this.RTL&&(r=-r),n.moveBy(r+50,s+50))}finally{e.Events.enable()}e.Events.isEnabled()&&e.WorkspaceComment.fireCreateEvent(n),n.select()},e.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},e.WorkspaceSvg.prototype.renameVariableById=function(t,n){e.WorkspaceSvg.superClass_.renameVariableById.call(this,t,n),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.deleteVariableById=function(t){e.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.createVariable=function(t,n,r){return t=e.WorkspaceSvg.superClass_.createVariable.call(this,t,n,r),this.refreshToolboxSelection(),t},e.WorkspaceSvg.prototype.recordDeleteAreas=function(){e.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},e.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(e.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var r,n=0;r=t[n];n++){var s=r.getClientRect();s&&this.dragTargetAreas_.push({component:r,clientRect:s})}},e.WorkspaceSvg.prototype.getDragTarget=function(t){for(var r,n=0;r=this.dragTargetAreas_[n];n++)if(r.clientRect.contains(t.clientX,t.clientY))return r.component;return null},e.WorkspaceSvg.prototype.onMouseDown_=function(t){var n=this.getGesture(t);n&&n.handleWsStart(t,this)},e.WorkspaceSvg.prototype.startDrag=function(t,n){(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=e.utils.Coordinate.difference(n,t)},e.WorkspaceSvg.prototype.moveDrag=function(t){return(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,e.utils.Coordinate.sum(this.dragDeltaXY_,t)},e.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},e.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},e.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},e.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},e.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},e.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(e.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,r=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||r){var s=e.utils.getScrollDeltaPixels(t);!n||!t.ctrlKey&&r?(n=this.scrollX-s.x,r=this.scrollY-s.y,t.shiftKey&&!s.x&&(n=this.scrollX-s.y,r=this.scrollY),this.scroll(n,r)):(s=-s.y/50,n=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,s)),t.preventDefault()}}},e.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new e.utils.Rect(0,0,0,0);for(var n=t[0].getBoundingRectangle(),r=1;r<t.length;r++){var s=t[r];s.isInsertionMarker&&s.isInsertionMarker()||((s=s.getBoundingRectangle()).top<n.top&&(n.top=s.top),s.bottom>n.bottom&&(n.bottom=s.bottom),s.left<n.left&&(n.left=s.left),s.right>n.right&&(n.right=s.right))}return n},e.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),e.Events.setGroup(!0);for(var s,t=this.getTopBlocks(!0),n=0,r=0;s=t[r];r++)if(s.isMovable()){var c=s.getRelativeToSurfaceXY();s.moveBy(-c.x,n-c.y),s.snapToGrid(),n=s.getRelativeToSurfaceXY().y+s.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}e.Events.setGroup(!1),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var n=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,t),e.ContextMenu.show(t,n,this.RTL)}},e.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=e.utils.toolbox.convertToolboxDefToJson(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.utils.toolbox.hasCategories(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},e.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(e.mainWorkspace=this,this.setBrowserFocus())},e.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},e.WorkspaceSvg.prototype.zoom=function(t,n,r){r=Math.pow(this.options.zoomOptions.scaleSpeed,r);var s=this.scale*r;if(this.scale!=s){s>this.options.zoomOptions.maxScale?r=this.options.zoomOptions.maxScale/this.scale:s<this.options.zoomOptions.minScale&&(r=this.options.zoomOptions.minScale/this.scale);var c=this.getCanvas().getCTM(),v=this.getParentSvg().createSVGPoint();v.x=t,v.y=n,v=v.matrixTransform(c.inverse()),c=c.translate((t=v.x)*(1-r),(n=v.y)*(1-r)).scale(r),this.scrollX=c.e,this.scrollY=c.f,this.setScale(s)}},e.WorkspaceSvg.prototype.zoomCenter=function(t){var n=this.getMetrics();if(this.flyout_){var r=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else r=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(r,n,t)},e.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),n=t.viewWidth;t=t.viewHeight;var r=this.getBlocksBoundingBox(),s=r.right-r.left;if(r=r.bottom-r.top,s){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),r+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),s+=this.flyout_.getWidth()/this.scale)),n/=s,t/=r,e.Events.disable();try{this.setScale(Math.min(n,t)),this.scrollCenter()}finally{e.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.beginCanvasTransition=function(){e.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.endCanvasTransition=function(){e.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),n=(t.scrollWidth-t.viewWidth)/2,r=(t.scrollHeight-t.viewHeight)/2;this.scroll(n=-n-t.scrollLeft,r=-r-t.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var n=t.getRelativeToSurfaceXY(),r=t.getHeightWidth(),s=this.scale;t=(n.x+(this.RTL?-1:1)*r.width/2)*s,n=(n.y+r.height/2)*s,r=this.getMetrics(),this.scroll(-(t-r.viewWidth/2),-(n-r.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,e.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},e.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},e.WorkspaceSvg.prototype.scroll=function(t,n){e.hideChaff(!0);var r=this.getMetrics();t=Math.min(t,-r.scrollLeft),n=Math.min(n,-r.scrollTop);var s=r.scrollTop+Math.max(0,r.scrollHeight-r.viewHeight);t=Math.max(t,-(r.scrollLeft+Math.max(0,r.scrollWidth-r.viewWidth))),n=Math.max(n,-s),this.scrollX=t,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(t+r.scrollLeft),-(n+r.scrollTop),!1),this.translate(t+=r.absoluteLeft,n+=r.absoluteTop)},e.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var n=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*t.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},e.WorkspaceSvg.prototype.getBlockById=function(t){return e.WorkspaceSvg.superClass_.getBlockById.call(this,t)},e.WorkspaceSvg.prototype.getTopBlocks=function(t){return e.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},e.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},e.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},e.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopComment.call(this,t)},e.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},e.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},e.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){e.utils.arrayRemove(this.topBoundedElements_,t)},e.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},e.WorkspaceSvg.prototype.setResizesEnabled=function(t){var n=!this.resizesEnabled_&&t;this.resizesEnabled_=t,n&&this.resizeContents()},e.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),e.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.registerButtonCallback=function(t,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=n},e.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},e.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},e.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=n},e.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},e.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},e.WorkspaceSvg.prototype.getGesture=function(t){var n="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,r=this.currentGesture_;return r?n&&r.hasStarted()?(console.warn("Tried to start the same gesture twice."),r.cancel(),null):r:n?this.currentGesture_=new e.TouchGesture(t,this):null},e.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},e.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},e.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},e.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},e.inject=function(t,n){if(e.checkBlockColourConstants(),"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!e.utils.dom.containsNode(document,t))throw Error("Error: container is not in current document.");n=new e.Options(n||{});var r=document.createElement("div");r.className="injectionDiv",r.tabIndex=0,e.utils.aria.setState(r,e.utils.aria.State.LABEL,e.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(r),t=e.createDom_(r,n);var s=new e.BlockDragSurfaceSvg(r),c=new e.WorkspaceDragSurfaceSvg(r),v=e.createMainWorkspace_(t,n,s,c);return e.init_(v),e.mainWorkspace=v,e.svgResize(v),r.addEventListener("focusin",function(){e.mainWorkspace=v}),v},e.createDom_=function(t,n){t.setAttribute("dir","LTR"),e.Css.inject(n.hasCss,n.pathToMedia),t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var r=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),s=String(Math.random()).substring(2);return n.gridPattern=e.Grid.createDom(s,n.gridOptions,r),t},e.createMainWorkspace_=function(t,n,r,s){return n.parentWorkspace=null,(n=new e.WorkspaceSvg(n,r,s)).scale=(r=n.options).zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground")),e.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),e.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!r.hasCategories&&r.languageTree&&(s=n.addFlyout(e.utils.Svg.SVG),e.utils.dom.insertAfter(s,t)),r.hasTrashcan&&n.addTrashcan(),r.zoomOptions&&r.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(e.bumpIntoBoundsHandler_(n)),e.svgResize(n),e.WidgetDiv.createDom(),e.DropDownDiv.createDom(),e.Tooltip.createDom(),n},e.extractObjectFromEvent_=function(t,n){var r=null;switch(n.type){case e.Events.BLOCK_CREATE:case e.Events.BLOCK_MOVE:(r=t.getBlockById(n.blockId))&&(r=r.getRootBlock());break;case e.Events.COMMENT_CREATE:case e.Events.COMMENT_MOVE:r=t.getCommentById(n.commentId)}return r},e.bumpTopObjectsIntoBounds_=function(t){var n=t.getMetricsManager();if(n.hasFixedEdges()&&!t.isDragging()){n=n.getScrollMetrics(!0);for(var c,r=t.getTopBoundedElements(),s=0;c=r[s];s++)e.bumpObjectIntoBounds_(t,n,c)}},e.bumpIntoBoundsHandler_=function(t){return function(n){var r=t.getMetricsManager();if(r.hasFixedEdges()&&!t.isDragging())if(-1!==e.Events.BUMP_EVENTS.indexOf(n.type)){r=r.getScrollMetrics(!0);var s=e.extractObjectFromEvent_(t,n);if(s){var c=e.Events.getGroup();e.Events.setGroup(n.group),e.bumpObjectIntoBounds_(t,r,s)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==c&&e.Events.setGroup(c)}}else n.type===e.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&e.bumpTopObjectsIntoBounds_(t)}},e.bumpObjectIntoBounds_=function(t,n,r){var s=r.getBoundingRectangle(),c=s.right-s.left,v=e.utils.math.clamp(n.top,s.top,n.top+n.height-(s.bottom-s.top))-s.top,D=n.left;return n=n.left+n.width-c,t.RTL?D=Math.min(n,D):n=Math.max(D,n),!(!(t=e.utils.math.clamp(D,s.left,n)-s.left)&&!v||(r.moveBy(t,v),0))},e.init_=function(t){var n=t.options,r=t.getParentSvg();if(e.browserEvents.conditionalBind(r.parentNode,"contextmenu",null,function(c){e.utils.isTargetInput(c)||c.preventDefault()}),r=e.browserEvents.conditionalBind(window,"resize",null,function(){e.hideChaff(!0),e.svgResize(t),e.bumpTopObjectsIntoBounds_(t)}),t.setResizeHandlerWrapper(r),e.inject.bindDocumentEvents_(),n.languageTree){r=t.getToolbox();var s=t.getFlyout(!0);r?r.init():s&&(s.init(t),s.show(n.languageTree),"function"==typeof s.scrollToStart&&s.scrollToStart())}n.hasTrashcan&&t.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&t.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(t.scrollbar=new e.ScrollbarPair(t,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),n.hasSounds&&e.inject.loadSounds_(n.pathToMedia,t)},e.inject.bindDocumentEvents_=function(){e.documentEventsBound_||(e.browserEvents.conditionalBind(document,"scroll",null,function(){for(var r,t=e.Workspace.getAll(),n=0;r=t[n];n++)r.updateInverseScreenCTM&&r.updateInverseScreenCTM()}),e.browserEvents.conditionalBind(document,"keydown",null,e.onKeyDown),e.browserEvents.bind(document,"touchend",null,e.longStop_),e.browserEvents.bind(document,"touchcancel",null,e.longStop_),e.utils.userAgent.IPAD&&e.browserEvents.conditionalBind(window,"orientationchange",document,function(){e.svgResize(e.getMainWorkspace())})),e.documentEventsBound_=!0},e.inject.loadSounds_=function(t,n){var r=n.getAudioManager();r.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),r.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),r.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var s=[];t=function(){for(;s.length;)e.browserEvents.unbind(s.pop());r.preload()},s.push(e.browserEvents.conditionalBind(document,"mousemove",null,t,!0)),s.push(e.browserEvents.conditionalBind(document,"touchstart",null,t,!0))},e.Names=function(t,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),n=0;n<t.length;n++)this.reservedDict_[t[n]]=!0;this.reset()},e.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",e.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},e.Names.prototype.setVariableMap=function(t){this.variableMap_=t},e.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},e.Names.prototype.populateVariables=function(t){t=e.Variables.allUsedVarModels(t);for(var n=0;n<t.length;n++)this.getName(t[n].getId(),e.VARIABLE_CATEGORY_NAME)},e.Names.prototype.populateProcedures=function(t){t=(t=e.Procedures.allProcedures(t))[0].concat(t[1]);for(var n=0;n<t.length;n++)this.getName(t[n][0],e.PROCEDURE_CATEGORY_NAME)},e.Names.prototype.getName=function(t,n){var r=t;n==e.VARIABLE_CATEGORY_NAME&&(t=this.getNameForUserVariable_(t))&&(r=t),t=r.toLowerCase();var s=n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var c=this.db_[n];return t in c?s+c[t]:(n=this.getDistinctName(r,n),c[t]=n.substr(s.length),n)},e.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},e.Names.prototype.getDistinctName=function(t,n){t=this.safeName_(t);for(var r="";this.dbReverse_[t+r]||t+r in this.reservedDict_;)r=r?r+1:2;return this.dbReverse_[t+=r]=!0,(n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+t},e.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=e.Msg.UNNAMED_KEY||"unnamed",t},e.Names.equals=function(t,n){return t.toLowerCase()==n.toLowerCase()},e.Procedures={},e.Procedures.NAME_TYPE=e.PROCEDURE_CATEGORY_NAME,e.Procedures.DEFAULT_ARG="x",e.Procedures.allProcedures=function(t){var n=t.getBlocksByType("procedures_defnoreturn",!1).map(function(r){return r.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(r){return r.getProcedureDef()}),n.sort(e.Procedures.procTupleComparator_),t.sort(e.Procedures.procTupleComparator_),[n,t]},e.Procedures.procTupleComparator_=function(t,n){return t[0].localeCompare(n[0],void 0,{sensitivity:"base"})},e.Procedures.findLegalName=function(t,n){if(n.isInFlyout)return t;for(t=t||e.Msg.UNNAMED_KEY||"unnamed";!e.Procedures.isLegalName_(t,n.workspace,n);){var r=t.match(/^(.*?)(\d+)$/);t=r?r[1]+(parseInt(r[2],10)+1):t+"2"}return t},e.Procedures.isLegalName_=function(t,n,r){return!e.Procedures.isNameUsed(t,n,r)},e.Procedures.isNameUsed=function(t,n,r){n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s]!=r&&n[s].getProcedureDef){var c=n[s].getProcedureDef();if(e.Names.equals(c[0],t))return!0}return!1},e.Procedures.rename=function(t){t=t.trim();var n=e.Procedures.findLegalName(t,this.getSourceBlock()),r=this.getValue();if(r!=t&&r!=n){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var s=0;s<t.length;s++)t[s].renameProcedure&&t[s].renameProcedure(r,n)}return n},e.Procedures.flyoutCategory=function(t){function n(v,D){for(var P=0;P<v.length;P++){var G=v[P][0],it=v[P][1],q=e.utils.xml.createElement("block");q.setAttribute("type",D),q.setAttribute("gap",16);var bt=e.utils.xml.createElement("mutation");for(bt.setAttribute("name",G),q.appendChild(bt),G=0;G<it.length;G++){var Ft=e.utils.xml.createElement("arg");Ft.setAttribute("name",it[G]),bt.appendChild(Ft)}r.push(q)}}var r=[];if(e.Blocks.procedures_defnoreturn){var s=e.utils.xml.createElement("block");s.setAttribute("type","procedures_defnoreturn"),s.setAttribute("gap",16);var c=e.utils.xml.createElement("field");c.setAttribute("name","NAME"),c.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),s.appendChild(c),r.push(s)}return e.Blocks.procedures_defreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),s.setAttribute("gap",16),(c=e.utils.xml.createElement("field")).setAttribute("name","NAME"),c.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),s.appendChild(c),r.push(s)),e.Blocks.procedures_ifreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),s.setAttribute("gap",16),r.push(s)),r.length&&r[r.length-1].setAttribute("gap",24),n((t=e.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),n(t[1],"procedures_callreturn"),r},e.Procedures.updateMutatorFlyout_=function(t){for(var c,n=[],r=t.getBlocksByType("procedures_mutatorarg",!1),s=0;c=r[s];s++)n.push(c.getFieldValue("NAME"));r=e.utils.xml.createElement("xml"),(s=e.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(c=e.utils.xml.createElement("field")).setAttribute("name","NAME"),n=e.Variables.generateUniqueNameFromOptions(e.Procedures.DEFAULT_ARG,n),n=e.utils.xml.createTextNode(n),c.appendChild(n),s.appendChild(c),r.appendChild(s),t.updateToolbox(r)},e.Procedures.mutatorOpenListener=function(t){if(t.type==e.Events.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var n=(t=e.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(t=t.mutator.getWorkspace(),e.Procedures.updateMutatorFlyout_(t),t.addChangeListener(e.Procedures.mutatorChangeListener_))}},e.Procedures.mutatorChangeListener_=function(t){(t.type==e.Events.BLOCK_CREATE||t.type==e.Events.BLOCK_DELETE||t.type==e.Events.BLOCK_CHANGE)&&(t=e.Workspace.getById(t.workspaceId),e.Procedures.updateMutatorFlyout_(t))},e.Procedures.getCallers=function(t,n){var r=[];n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s].getProcedureCall){var c=n[s].getProcedureCall();c&&e.Names.equals(c,t)&&r.push(n[s])}return r},e.Procedures.mutateCallers=function(t){var c,n=e.Events.recordUndo,r=t.getProcedureDef()[0],s=t.mutationToDom(!0);for(t=e.Procedures.getCallers(r,t.workspace),r=0;c=t[r];r++){var v=c.mutationToDom();v=v&&e.Xml.domToText(v),c.domToMutation(s);var D=c.mutationToDom();v!=(D=D&&e.Xml.domToText(D))&&(e.Events.recordUndo=!1,e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(c,"mutation",null,v,D)),e.Events.recordUndo=n)}},e.Procedures.getDefinition=function(t,n){n=n.getAllBlocks(!1);for(var r=0;r<n.length;r++)if(n[r].getProcedureDef){var s=n[r].getProcedureDef();if(s&&e.Names.equals(s[0],t))return n[r]}return null},e.ShortcutRegistry=function(){e.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},e.ShortcutRegistry.modifierKeys={Shift:e.utils.KeyCodes.SHIFT,Control:e.utils.KeyCodes.CTRL,Alt:e.utils.KeyCodes.ALT,Meta:e.utils.KeyCodes.META},e.ShortcutRegistry.prototype.register=function(t,n){if(this.registry_[t.name]&&!n)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},e.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},e.ShortcutRegistry.prototype.addKeyMapping=function(t,n,r){t=String(t);var s=this.keyMap_[t];if(s&&!r)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+s.toString());s&&r?s.unshift(n):this.keyMap_[t]=[n]},e.ShortcutRegistry.prototype.removeKeyMapping=function(t,n,r){var s=this.keyMap_[t];if(!s&&!r)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1;var c=s.indexOf(n);return-1<c?(s.splice(c,1),0==s.length&&delete this.keyMap_[t],!0):(r||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1)},e.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var n in this.keyMap_)this.removeKeyMapping(n,t,!0)},e.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},e.ShortcutRegistry.prototype.getKeyMap=function(){return e.utils.object.deepMerge(Object.create(null),this.keyMap_)},e.ShortcutRegistry.prototype.getRegistry=function(){return e.utils.object.deepMerge(Object.create(null),this.registry_)},e.ShortcutRegistry.prototype.onKeyDown=function(t,n){var r=this.serializeKeyEvent_(n);if(!(r=this.getShortcutNamesByKeyCode(r)))return!1;for(var c,s=0;c=r[s];s++)if((!(c=this.registry_[c]).preconditionFn||c.preconditionFn(t))&&c.callback&&c.callback(t,n,c))return!0;return!1},e.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},e.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var r,n=[];for(r in this.keyMap_)-1<this.keyMap_[r].indexOf(t)&&n.push(r);return n},e.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var r,n="";for(r in e.ShortcutRegistry.modifierKeys)t.getModifierState(r)&&(""!=n&&(n+="+"),n+=r);return""!=n&&t.keyCode?n=n+"+"+t.keyCode:t.keyCode&&(n=t.keyCode.toString()),n},e.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var s,n=e.utils.object.values(e.ShortcutRegistry.modifierKeys),r=0;s=t[r];r++)if(0>n.indexOf(s))throw Error(s+" is not a valid modifier key.")},e.ShortcutRegistry.prototype.createSerializedKey=function(t,n){var r="";if(n)for(var s in this.checkModifiers_(n),e.ShortcutRegistry.modifierKeys)-1<n.indexOf(e.ShortcutRegistry.modifierKeys[s])&&(""!=r&&(r+="+"),r+=s);return""!=r&&t?r=r+"+"+t:t&&(r=t.toString()),r},new e.ShortcutRegistry,e.VariableModel=function(t,n,r,s){this.workspace=t,this.name=n,this.type=r||"",this.id_=s||e.utils.genUid(),e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(this))},e.VariableModel.prototype.getId=function(){return this.id_},e.VariableModel.compareByName=function(t,n){return t.name.localeCompare(n.name,void 0,{sensitivity:"base"})},e.Variables={},e.Variables.NAME_TYPE=e.VARIABLE_CATEGORY_NAME,e.Variables.allUsedVarModels=function(t){var n=t.getAllBlocks(!1);t=Object.create(null);for(var r=0;r<n.length;r++){var s=n[r].getVarModels();if(s)for(var c=0;c<s.length;c++){var v=s[c],D=v.getId();D&&(t[D]=v)}}for(D in n=[],t)n.push(t[D]);return n},e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},e.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var s,n=Object.create(null),r=0;s=t[r];r++){var c=s.getDeveloperVariables;if(!c&&s.getDeveloperVars&&(c=s.getDeveloperVars,e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+s.type+"')"),e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]=!0)),c)for(s=c(),c=0;c<s.length;c++)n[s[c]]=!0}return Object.keys(n)},e.Variables.flyoutCategory=function(t){var n=[],r=document.createElement("button");return r.setAttribute("text","%{BKY_NEW_VARIABLE}"),r.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(s){e.Variables.createVariableButtonHandler(s.getTargetWorkspace())}),n.push(r),t=e.Variables.flyoutCategoryBlocks(t),n.concat(t)},e.Variables.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getVariablesOfType("")).length){var r=t[t.length-1];if(e.Blocks.variables_set){var s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set"),s.setAttribute("gap",e.Blocks.math_change?8:24),s.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(s)}if(e.Blocks.math_change&&((s=e.utils.xml.createElement("block")).setAttribute("type","math_change"),s.setAttribute("gap",e.Blocks.variables_get?20:8),s.appendChild(e.Variables.generateVariableFieldDom(r)),r=e.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),s.appendChild(r),n.push(s)),e.Blocks.variables_get){t.sort(e.VariableModel.compareByName),r=0;for(var c;c=t[r];r++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(c)),n.push(s)}}return n},e.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",e.Variables.generateUniqueName=function(t){return e.Variables.generateUniqueNameFromOptions(e.Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},e.Variables.generateUniqueNameFromOptions=function(t,n){if(!n.length)return t;for(var r=e.Variables.VAR_LETTER_OPTIONS,s="",c=r.indexOf(t);;){for(var v=!1,D=0;D<n.length;D++)if(n[D].toLowerCase()==t){v=!0;break}if(!v)return t;++c==r.length&&(c=0,s=Number(s)+1),t=r.charAt(c)+s}},e.Variables.createVariableButtonHandler=function(t,n,r){var s=r||"",c=function(v){e.Variables.promptName(e.Msg.NEW_VARIABLE_TITLE,v,function(D){if(D){var P=e.Variables.nameUsedWithAnyType(D,t);if(P){if(P.type==s)var G=e.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",P.name);else G=(G=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",P.name).replace("%2",P.type);e.alert(G,function(){c(D)})}else t.createVariable(D,s),n&&n(D)}else n&&n(null)})};c("")},e.Variables.createVariable=e.Variables.createVariableButtonHandler,e.Variables.renameVariable=function(t,n,r){var s=function(c){var v=e.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);e.Variables.promptName(v,c,function(D){if(D){var P=e.Variables.nameUsedWithOtherType_(D,n.type,t);P?(P=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",P.name).replace("%2",P.type),e.alert(P,function(){s(D)})):(t.renameVariableById(n.getId(),D),r&&r(D))}else r&&r(null)})};s("")},e.Variables.promptName=function(t,n,r){e.prompt(t,n,function(s){s&&((s=s.replace(/[\s\xa0]+/g," ").trim())==e.Msg.RENAME_VARIABLE||s==e.Msg.NEW_VARIABLE)&&(s=null),r(s)})},e.Variables.nameUsedWithOtherType_=function(t,n,r){r=r.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var c,s=0;c=r[s];s++)if(c.name.toLowerCase()==t&&c.type!=n)return c;return null},e.Variables.nameUsedWithAnyType=function(t,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var s,r=0;s=n[r];r++)if(s.name.toLowerCase()==t)return s;return null},e.Variables.generateVariableFieldDom=function(t){var n=e.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),t=e.utils.xml.createTextNode(t.name),n.appendChild(t),n},e.Variables.getOrCreateVariablePackage=function(t,n,r,s){var c=e.Variables.getVariable(t,n,r,s);return c||(c=e.Variables.createVariable_(t,n,r,s)),c},e.Variables.getVariable=function(t,n,r,s){var c=t.getPotentialVariableMap(),v=null;if(n&&(!(v=t.getVariableById(n))&&c&&(v=c.getVariableById(n)),v))return v;if(r){if(null==s)throw Error("Tried to look up a variable by name without a type");!(v=t.getVariable(r,s))&&c&&(v=c.getVariable(r,s))}return v},e.Variables.createVariable_=function(t,n,r,s){var c=t.getPotentialVariableMap();return r||(r=e.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),c?c.createVariable(r,s,n):t.createVariable(r,s,n)},e.Variables.getAddedVariables=function(t,n){t=t.getAllVariables();var r=[];if(n.length!=t.length)for(var s=0;s<t.length;s++){var c=t[s];-1==n.indexOf(c)&&r.push(c)}return r},e.VERSION="6.20210701.0",e.mainWorkspace=null,e.selected=null,e.draggingConnections=[],e.clipboardXml_=null,e.clipboardSource_=null,e.clipboardTypeCounts_=null,e.cache3dSupported_=null,e.parentContainer=null,e.svgSize=function(t){return e.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new e.utils.Size(t.cachedWidth_,t.cachedHeight_)},e.resizeSvgContents=function(t){t.resizeContents()},e.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var n=t.getParentSvg(),r=t.getCachedParentSvgSize(),s=n.parentNode;if(s){var c=s.offsetWidth;s=s.offsetHeight,r.width!=c&&(n.setAttribute("width",c+"px"),t.setCachedParentSvgSize(c,null)),r.height!=s&&(n.setAttribute("height",s+"px"),t.setCachedParentSvgSize(null,s)),t.resize()}},e.onKeyDown=function(t){var n=e.mainWorkspace;n&&!(e.utils.isTargetInput(t)||n.rendered&&!n.isVisible())&&e.ShortcutRegistry.registry.onKeyDown(n,t)},e.deleteBlock=function(t){t.workspace.isFlyout||(e.Events.setGroup(!0),e.hideChaff(),t.dispose(!t.outputConnection,!0),e.Events.setGroup(!1))},e.copy=function(t){(t=t.toCopyData())&&(e.clipboardXml_=t.xml,e.clipboardSource_=t.source,e.clipboardTypeCounts_=t.typeCounts)},e.paste=function(){if(!e.clipboardXml_)return!1;var t=e.clipboardSource_;return t.isFlyout&&(t=t.targetWorkspace),!(!e.clipboardTypeCounts_||!t.isCapacityAvailable(e.clipboardTypeCounts_)||(e.Events.setGroup(!0),t.paste(e.clipboardXml_),e.Events.setGroup(!1),0))},e.duplicate=function(t){var n=e.clipboardXml_,r=e.clipboardSource_;e.copy(t),t.workspace.paste(e.clipboardXml_),e.clipboardXml_=n,e.clipboardSource_=r},e.onContextMenu_=function(t){e.utils.isTargetInput(t)||t.preventDefault()},e.hideChaff=function(t){e.Tooltip.hide(),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation();var n=!!t;e.getMainWorkspace().getComponentManager().getComponents(e.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(r){r.autoHide(n)})},e.getMainWorkspace=function(){return e.mainWorkspace},e.alert=function(t,n){alert(t),n&&n()},e.confirm=function(t,n){n(confirm(t))},e.prompt=function(t,n,r){r(prompt(t,n))},e.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},e.defineBlocksWithJsonArray=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r){var s=r.type;null==s||""===s?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(e.Blocks[s]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+s+'".'),e.Blocks[s]={init:e.jsonInitFactory_(r)})}else console.warn("Block definition #"+n+" in JSON array is "+r+". Skipping.")}},e.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},e.hueToHex=function(t){return e.utils.colour.hsvToHex(t,e.HSV_SATURATION,255*e.HSV_VALUE)},e.checkBlockColourConstants=function(){e.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),e.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),e.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),e.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),e.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),e.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),e.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),e.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),e.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),e.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),e.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),e.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),e.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),e.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),e.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),e.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},e.checkBlockColourConstant_=function(t,n,r){for(var s="Blockly",c=e,v=0;v<n.length;++v)s+="."+n[v],c&&(c=c[n[v]]);c&&c!==r&&(t=(void 0===r?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",s).replace("%2",t),console.warn(t))},e.setParentContainer=function(t){e.parentContainer=t},e.bindEvent_=e.browserEvents.bind,e.unbindEvent_=e.browserEvents.unbind,e.bindEventWithChecks_=e.browserEvents.conditionalBind,e.ALIGN_LEFT=e.constants.ALIGN.LEFT,e.ALIGN_CENTRE=e.constants.ALIGN.CENTRE,e.ALIGN_RIGHT=e.constants.ALIGN.RIGHT,e.INPUT_VALUE=e.connectionTypes.INPUT_VALUE,e.OUTPUT_VALUE=e.connectionTypes.OUTPUT_VALUE,e.NEXT_STATEMENT=e.connectionTypes.NEXT_STATEMENT,e.PREVIOUS_STATEMENT=e.connectionTypes.PREVIOUS_STATEMENT,e.DUMMY_INPUT=e.inputTypes.DUMMY,e.TOOLBOX_AT_TOP=e.utils.toolbox.Position.TOP,e.TOOLBOX_AT_BOTTOM=e.utils.toolbox.Position.BOTTOM,e.TOOLBOX_AT_LEFT=e.utils.toolbox.Position.LEFT,e.TOOLBOX_AT_RIGHT=e.utils.toolbox.Position.RIGHT,e.Events.BubbleOpen=function(t,n,r){e.Events.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=n,this.bubbleType=r},e.utils.object.inherits(e.Events.BubbleOpen,e.Events.UiBase),e.Events.BubbleOpen.prototype.type=e.Events.BUBBLE_OPEN,e.Events.BubbleOpen.prototype.toJson=function(){var t=e.Events.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},e.Events.BubbleOpen.prototype.fromJson=function(t){e.Events.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.BUBBLE_OPEN,e.Events.BubbleOpen),e.Icon=function(t){this.block_=t,this.iconGroup_=null},e.Icon.prototype.collapseHidden=!0,e.Icon.prototype.SIZE=17,e.Icon.prototype.bubble_=null,e.Icon.prototype.iconXY_=null,e.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),e.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},e.Icon.prototype.dispose=function(){e.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},e.Icon.prototype.updateEditable=function(){},e.Icon.prototype.isVisible=function(){return!!this.bubble_},e.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||e.utils.isRightButton(t)||this.setVisible(!this.isVisible())},e.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},e.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},e.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),n=e.utils.getRelativeXY(this.iconGroup_);t=new e.utils.Coordinate(t.x+n.x+this.SIZE/2,t.y+n.y+this.SIZE/2),e.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},e.Icon.prototype.getIconLocation=function(){return this.iconXY_},e.Icon.prototype.getCorrectedSize=function(){return new e.utils.Size(e.Icon.prototype.SIZE,e.Icon.prototype.SIZE-2)},e.Warning=function(t){e.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_=Object.create(null)},e.utils.object.inherits(e.Warning,e.Icon),e.Warning.prototype.collapseHidden=!1,e.Warning.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},e.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},e.Warning.prototype.createBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.getText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},e.Warning.prototype.setText=function(t,n){this.text_[n]!=t&&(t?this.text_[n]=t:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},e.Warning.prototype.getText=function(){var n,t=[];for(n in this.text_)t.push(this.text_[n]);return t.join("\n")},e.Warning.prototype.dispose=function(){this.block_.warning=null,e.Icon.prototype.dispose.call(this)},e.Comment=function(t){e.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},e.utils.object.inherits(e.Comment,e.Icon),e.Comment.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},e.Comment.prototype.createEditor_=function(){this.foreignObject_=e.utils.dom.createSvgElement(e.utils.Svg.FOREIGNOBJECT,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(e.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",e.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(e.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),t.appendChild(n),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=e.browserEvents.conditionalBind(n,"wheel",this,function(r){r.stopPropagation()}),this.onChangeWrapper_=e.browserEvents.conditionalBind(n,"change",this,function(r){this.cachedText_!=this.model_.text&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=e.browserEvents.conditionalBind(n,"input",this,function(r){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},e.Comment.prototype.updateEditable=function(){e.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},e.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},e.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,n=2*e.Bubble.BORDER_WIDTH,r=t.width-n;t=t.height-n,this.foreignObject_.setAttribute("width",r),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=r-4+"px",this.textarea_.style.height=t-4+"px"},e.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},e.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||e.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},e.Comment.prototype.createEditableBubble_=function(){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},e.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(e.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(e.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(e.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(e.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},e.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},e.Comment.prototype.getBubbleSize=function(){return this.model_.size},e.Comment.prototype.setBubbleSize=function(t,n){this.bubble_?this.bubble_.setBubbleSize(t,n):(this.model_.size.width=t,this.model_.size.height=n)},e.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},e.Comment.prototype.dispose=function(){this.block_.comment=null,e.Icon.prototype.dispose.call(this)},e.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),e.IComponent=function(){},e.IDragTarget=function(){},e.DragTarget=function(){},e.DragTarget.prototype.onDragEnter=function(t){},e.DragTarget.prototype.onDragOver=function(t){},e.DragTarget.prototype.onDragExit=function(t){},e.DragTarget.prototype.onDrop=function(t){},e.DragTarget.prototype.shouldPreventMove=function(t){return!1},e.IDeleteArea=function(){},e.DeleteArea=function(){e.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},e.utils.object.inherits(e.DeleteArea,e.DragTarget),e.DeleteArea.prototype.wouldDelete=function(t,n){return t instanceof e.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!n)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},e.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t},e.IFlyout=function(){},e.Flyout=function(t){e.Flyout.superClass_.constructor.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new e.WorkspaceSvg(t),this.workspace_.setMetricsManager(new e.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=e.utils.genUid(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},e.utils.object.inherits(e.Flyout,e.DeleteArea),e.Flyout.prototype.autoClose=!0,e.Flyout.prototype.isVisible_=!1,e.Flyout.prototype.containerVisible_=!0,e.Flyout.prototype.CORNER_RADIUS=8,e.Flyout.prototype.MARGIN=e.Flyout.prototype.CORNER_RADIUS,e.Flyout.prototype.GAP_X=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.GAP_Y=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.SCROLLBAR_MARGIN=2.5,e.Flyout.prototype.width_=0,e.Flyout.prototype.height_=0,e.Flyout.prototype.dragAngleRange_=70,e.Flyout.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},e.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new e.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),e.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},e.Flyout.prototype.getWidth=function(){return this.width_},e.Flyout.prototype.getHeight=function(){return this.height_},e.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},e.Flyout.prototype.getWorkspace=function(){return this.workspace_},e.Flyout.prototype.isVisible=function(){return this.isVisible_},e.Flyout.prototype.setVisible=function(t){var n=t!=this.isVisible();this.isVisible_=t,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},e.Flyout.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},e.Flyout.prototype.positionAt_=function(t,n,r,s){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(t,n),"svg"==this.svgGroup_.tagName?e.utils.dom.setCssTransform(this.svgGroup_,"translate("+r+"px,"+s+"px)"):this.svgGroup_.setAttribute("transform","translate("+r+","+s+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(r,s),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},e.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,t=0;n=this.listeners_[t];t++)e.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},e.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=e.utils.toolbox.convertFlyoutDefToJsonArray(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(e.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var s,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++)s.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.createFlyoutInfo_=function(t){var n=[],r=[];this.permanentlyDisabled_.length=0;for(var v,s=this.horizontalLayout?this.GAP_X:this.GAP_Y,c=0;v=t[c];c++)switch(v.custom&&(v=this.getDynamicCategoryContents_(v.custom),v=e.utils.toolbox.convertFlyoutDefToJsonArray(v),t.splice.apply(t,[c,1].concat(v)),v=t[c]),v.kind.toUpperCase()){case"BLOCK":var D=v,P=this.getBlockXml_(D);v=this.createBlock_(P),D=parseInt(D.gap||P.getAttribute("gap"),10),r.push(isNaN(D)?s:D),n.push({type:"block",block:v});break;case"SEP":this.addSeparatorGap_(v,r,s);break;case"LABEL":v=this.createButton_(v,!0),n.push({type:"button",button:v}),r.push(s);break;case"BUTTON":v=this.createButton_(v,!1),n.push({type:"button",button:v}),r.push(s)}return{contents:n,gaps:r}},e.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},e.Flyout.prototype.createButton_=function(t,n){if(!e.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new e.FlyoutButton(this.workspace_,this.targetWorkspace,t,n)},e.Flyout.prototype.createBlock_=function(t){return(t=e.Xml.domToBlock(t,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(t),t},e.Flyout.prototype.getBlockXml_=function(t){var n=null,r=t.blockxml;if(r&&"string"!=typeof r?n=r:r&&"string"==typeof r?(n=e.Xml.textToDom(r),t.blockxml=n):t.type&&((n=e.utils.xml.createElement("xml")).setAttribute("type",t.type),n.setAttribute("disabled",t.disabled),t.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},e.Flyout.prototype.addSeparatorGap_=function(t,n,r){t=parseInt(t.gap,10),!isNaN(t)&&0<n.length?n[n.length-1]=t:n.push(r)},e.Flyout.prototype.clearOldBlocks_=function(){for(var r,t=this.workspace_.getTopBlocks(!1),n=0;r=t[n];n++)r.workspace==this.workspace_&&r.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&(e.Tooltip.unbindMouseEvents(t),e.utils.dom.removeNode(t));for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},e.Flyout.prototype.addBlockListeners_=function(t,n,r){this.listeners_.push(e.browserEvents.conditionalBind(t,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.conditionalBind(r,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.bind(t,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(t,"mouseleave",n,n.removeSelect)),this.listeners_.push(e.browserEvents.bind(r,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(r,"mouseleave",n,n.removeSelect))},e.Flyout.prototype.blockMouseDown_=function(t){var n=this;return function(r){var s=n.targetWorkspace.getGesture(r);s&&(s.setStartBlock(t),s.handleFlyoutStart(r,n))}},e.Flyout.prototype.onMouseDown_=function(t){var n=this.targetWorkspace.getGesture(t);n&&n.handleFlyoutStart(t,this)},e.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},e.Flyout.prototype.createBlock=function(t){var n=null;e.Events.disable();var r=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(t)}finally{e.Events.enable()}if(e.hideChaff(),t=e.Variables.getAddedVariables(this.targetWorkspace,r),e.Events.isEnabled()){for(e.Events.setGroup(!0),r=0;r<t.length;r++){var s=t[r];e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(s))}e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},e.Flyout.prototype.initFlyoutButton_=function(t,n,r){var s=t.createDom();t.moveTo(n,r),t.show(),this.listeners_.push(e.browserEvents.conditionalBind(s,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},e.Flyout.prototype.createRect_=function(t,n,r,s,c){return(n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{"fill-opacity":0,x:n,y:r,height:s.height,width:s.width},null)).tooltip=t,e.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,t.getSvgRoot()),t.flyoutRect_=n,this.mats_[c]=n},e.Flyout.prototype.moveRectToBlock_=function(t,n){var r=n.getHeightWidth();t.setAttribute("width",r.width),t.setAttribute("height",r.height),n=n.getRelativeToSurfaceXY(),t.setAttribute("y",n.y),t.setAttribute("x",this.RTL?n.x-r.width:n.x)},e.Flyout.prototype.filterForCapacity_=function(){for(var r,t=this.workspace_.getTopBlocks(!1),n=0;r=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(r))for(var s=this.targetWorkspace.isCapacityAvailable(e.utils.getBlockTypeCounts(r));r;)r.setEnabled(s),r=r.getNextBlock()},e.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},e.Flyout.prototype.placeNewBlock_=function(t){var n=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var r=e.Xml.blockToDom(t,!0);if(n.setResizesEnabled(!1),!(r=e.Xml.domToBlock(r,n)).getSvgRoot())throw Error("block is not rendered.");var s=n.getOriginOffsetInPixels(),c=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=e.utils.Coordinate.sum(c,t),(s=e.utils.Coordinate.difference(t,s)).scale(1/n.scale),r.moveBy(s.x,s.y),r},e.HorizontalFlyout=function(t){e.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0},e.utils.object.inherits(e.HorizontalFlyout,e.Flyout),e.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(r.left+(r.width-s.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.HorizontalFlyout.prototype.getX=function(){return 0},e.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),r=t.getViewMetrics();t=t.getToolboxMetrics();var s=this.toolboxPosition_==e.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?s?t.height:r.height-this.height_:s?0:r.height:s?0:r.height+n.top-this.height_},e.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.HorizontalFlyout.prototype.setBackgroundPath_=function(t,n){var r=this.toolboxPosition_==e.utils.toolbox.Position.TOP,s=["M 0,"+(r?0:this.CORNER_RADIUS)];r?(s.push("h",t+2*this.CORNER_RADIUS),s.push("v",n),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",-t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),s.push("h",t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",n),s.push("h",-t-2*this.CORNER_RADIUS)),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},e.HorizontalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n=n.x||n.y){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics();n=r.getViewMetrics().left-s.left+n,this.workspace_.scrollbar.setX(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.HorizontalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;var r=this.MARGIN,s=r+this.tabWidth_;this.RTL&&(t=t.reverse());for(var v,c=0;v=t[c];c++)if("block"==v.type){for(var G,D=(v=v.block).getDescendants(!1),P=0;G=D[P];P++)G.isInFlyout=!0;v.render(),D=v.getSvgRoot(),P=v.getHeightWidth(),G=v.outputConnection?this.tabWidth_:0,v.moveBy(G=this.RTL?s+P.width:s-G,r),G=this.createRect_(v,G,r,P,c),s+=P.width+n[c],this.addBlockListeners_(D,v,G)}else"button"==v.type&&(this.initFlyoutButton_(v.button,s,r),s+=v.button.width+n[c])},e.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<90+n&&t>90-n||t>-90-n&&t<-90+n},e.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top;return this.toolboxPosition_==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e9,n+t.height,-1e9,1e9):new e.utils.Rect(n,1e9,-1e9,1e9)},e.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++)t=Math.max(t,s.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,this.height_!=(t+=e.Scrollbar.scrollbarThickness)){for(r=0;s=n[r];r++)s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.registry.DEFAULT,e.HorizontalFlyout),e.VerticalFlyout=function(t){e.VerticalFlyout.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.VerticalFlyout,e.Flyout),e.VerticalFlyout.registryName="verticalFlyout",e.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(r.top+(r.height-s.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),r=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==e.utils.toolbox.Position.LEFT?t.width:r.width-this.width_:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:r.width:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:r.width+n.left-this.width_},e.VerticalFlyout.prototype.getY=function(){return 0},e.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.VerticalFlyout.prototype.setBackgroundPath_=function(t,n){var r=this.toolboxPosition_==e.utils.toolbox.Position.RIGHT,s=t+this.CORNER_RADIUS;(s=["M "+(r?s:0)+",0"]).push("h",r?-t:t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",Math.max(0,n)),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",r?t:-t),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},e.VerticalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n.y){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics();n=r.getViewMetrics().top-s.top+n.y,this.workspace_.scrollbar.setY(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.VerticalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;for(var v,r=this.MARGIN,s=this.RTL?r:r+this.tabWidth_,c=0;v=t[c];c++)if("block"==v.type){for(var G,D=(v=v.block).getDescendants(!1),P=0;G=D[P];P++)G.isInFlyout=!0;v.render(),D=v.getSvgRoot(),P=v.getHeightWidth(),v.moveBy(G=v.outputConnection?s-this.tabWidth_:s,r),G=this.createRect_(v,this.RTL?G-P.width:G,r,P,c),this.addBlockListeners_(D,v,G),r+=P.height+n[c]}else"button"==v.type&&(this.initFlyoutButton_(v.button,s,r),r+=v.button.height+n[c])},e.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<n&&t>-n||t<-180+n||t>180-n},e.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.left;return this.toolboxPosition_==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e9,1e9,-1e9,n+t.width):new e.utils.Rect(-1e9,1e9,n,1e9)},e.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++){var c=s.getHeightWidth().width;s.outputConnection&&(c-=this.tabWidth_),t=Math.max(t,c)}for(r=0;s=this.buttons_[r];r++)t=Math.max(t,s.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,this.width_!=(t+=e.Scrollbar.scrollbarThickness)){for(r=0;s=n[r];r++){if(this.RTL){c=s.getRelativeToSurfaceXY().x;var v=t/this.workspace_.scale-this.MARGIN;s.outputConnection||(v-=this.tabWidth_),s.moveBy(v-c,0)}s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s)}if(this.RTL)for(r=0;s=this.buttons_[r];r++)n=s.getPosition().y,s.moveTo(t/this.workspace_.scale-s.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.registry.DEFAULT,e.VerticalFlyout),e.FlyoutButton=function(t,n,r,s){this.workspace_=t,this.targetWorkspace_=n,this.text_=r.text,this.position_=new e.utils.Coordinate(0,0),this.isLabel_=s,this.callbackKey_=r.callbackKey||r.callbackkey,this.cssClass_=r["web-class"]||null,this.onMouseUpWrapper_=null,this.info=r},e.FlyoutButton.MARGIN_X=5,e.FlyoutButton.MARGIN_Y=2,e.FlyoutButton.prototype.width=0,e.FlyoutButton.prototype.height=0,e.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},this.workspace_.getCanvas()),!this.isLabel_)var n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var r=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),s=e.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(s+="\u200f"),r.textContent=s,this.isLabel_&&(this.svgText_=r,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var c=e.utils.style.getComputedStyle(r,"fontSize"),v=e.utils.style.getComputedStyle(r,"fontWeight"),D=e.utils.style.getComputedStyle(r,"fontFamily");return this.width=e.utils.dom.getFastTextWidthWithSizeString(r,c,v,D),s=e.utils.dom.measureFontMetrics(s,c,v,D),this.height=s.height,this.isLabel_||(this.width+=2*e.FlyoutButton.MARGIN_X,this.height+=2*e.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),r.setAttribute("x",this.width/2),r.setAttribute("y",this.height/2-s.height/2+s.baseline),this.updateTransform_(),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},e.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},e.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},e.FlyoutButton.prototype.moveTo=function(t,n){this.position_.x=t,this.position_.y=n,this.updateTransform_()},e.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},e.FlyoutButton.prototype.getPosition=function(){return this.position_},e.FlyoutButton.prototype.getButtonText=function(){return this.text_},e.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},e.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&e.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},e.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},e.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),e.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},e.Generator.prototype.INFINITE_LOOP_TRAP=null,e.Generator.prototype.STATEMENT_PREFIX=null,e.Generator.prototype.STATEMENT_SUFFIX=null,e.Generator.prototype.INDENT="  ",e.Generator.prototype.COMMENT_WRAP=60,e.Generator.prototype.ORDER_OVERRIDES=[],e.Generator.prototype.isInitialized=null,e.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=e.getMainWorkspace());var n=[];this.init(t),t=t.getTopBlocks(!0);for(var s,r=0;s=t[r];r++){var c=this.blockToCode(s);Array.isArray(c)&&(c=c[0]),c&&(s.outputConnection&&(c=this.scrubNakedValue(c),this.STATEMENT_PREFIX&&!s.suppressPrefixSuffix&&(c=this.injectId(this.STATEMENT_PREFIX,s)+c),this.STATEMENT_SUFFIX&&!s.suppressPrefixSuffix&&(c+=this.injectId(this.STATEMENT_SUFFIX,s))),n.push(c))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},e.Generator.prototype.prefixLines=function(t,n){return n+t.replace(/(?!\n$)\n/g,"\n"+n)},e.Generator.prototype.allNestedComments=function(t){var n=[];t=t.getDescendants(!0);for(var r=0;r<t.length;r++){var s=t[r].getCommentText();s&&n.push(s)}return n.length&&n.push(""),n.join("\n")},e.Generator.prototype.blockToCode=function(t,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return n?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return n?"":this.blockToCode(t.getChildren(!1)[0]);var r=this[t.type];if("function"!=typeof r)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(r=r.call(t,t),Array.isArray(r)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,r[0],n),r[1]]}if("string"==typeof r)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,t)+r),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,r,n);if(null===r)return"";throw SyntaxError("Invalid code generated: "+r)},e.Generator.prototype.valueToCode=function(t,n,r){if(isNaN(r))throw TypeError("Expecting valid order from block: "+t.type);var s=t.getInputTargetBlock(n);if(!s||""===(n=this.blockToCode(s)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+s.type);if(t=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+s.type);if(!t)return"";s=!1;var c=Math.floor(r),v=Math.floor(n);if(c<=v&&(c!=v||0!=c&&99!=c))for(s=!0,c=0;c<this.ORDER_OVERRIDES.length;c++)if(this.ORDER_OVERRIDES[c][0]==r&&this.ORDER_OVERRIDES[c][1]==n){s=!1;break}return s&&(t="("+t+")"),t},e.Generator.prototype.statementToCode=function(t,n){if(t=t.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},e.Generator.prototype.addLoopTrap=function(t,n){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+t),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+t),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),t},e.Generator.prototype.injectId=function(t,n){return n=n.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+n+"'")},e.Generator.prototype.RESERVED_WORDS_="",e.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},e.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(e.Generator.prototype,"variableDB_",{get:function(){return e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}),e.Generator.prototype.provideFunction_=function(t,n){if(!this.definitions_[t]){var s,r=this.nameDB_.getDistinctName(t,e.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[t]=r,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,r);s!=n;)s=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[t]=n}return this.functionNames_[t]},e.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},e.Generator.prototype.scrub_=function(t,n,r){return n},e.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},e.Generator.prototype.scrubNakedValue=function(t){return t},e.IToolboxItem=function(){},e.ISelectableToolboxItem=function(){},e.ICollapsibleToolboxItem=function(){},e.ToolboxItem=function(t,n,r){this.id_=t.toolboxitemid||e.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=r||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},e.ToolboxItem.prototype.init=function(){},e.ToolboxItem.prototype.getDiv=function(){return null},e.ToolboxItem.prototype.getId=function(){return this.id_},e.ToolboxItem.prototype.getParent=function(){return null},e.ToolboxItem.prototype.getLevel=function(){return this.level_},e.ToolboxItem.prototype.isSelectable=function(){return!1},e.ToolboxItem.prototype.isCollapsible=function(){return!1},e.ToolboxItem.prototype.dispose=function(){},e.ToolboxCategory=function(t,n,r){e.ToolboxCategory.superClass_.constructor.call(this,t,n,r),this.name_=e.utils.replaceMessageReferences(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)},e.utils.object.inherits(e.ToolboxCategory,e.ToolboxItem),e.ToolboxCategory.registrationName="category",e.ToolboxCategory.nestedPadding=19,e.ToolboxCategory.borderWidth=8,e.ToolboxCategory.defaultBackgroundColour="#57e",e.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},e.ToolboxCategory.prototype.parseContents_=function(t){var n=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var r;r=n[t];t++)this.flyoutItems_.push(r)}},e.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},e.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),e.utils.aria.setRole(this.htmlDiv_,e.utils.aria.Role.TREEITEM),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,!1),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),e.utils.aria.setRole(this.iconDom_,e.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},e.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),t},e.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");e.utils.dom.addClass(t,this.cssConfig_.row);var n=e.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?t.style.paddingRight=n:t.style.paddingLeft=n,t},e.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.rowcontentcontainer),t},e.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.display="inline-block",t},e.ToolboxCategory.prototype.createLabelDom_=function(t){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=t,e.utils.dom.addClass(n,this.cssConfig_.label),n},e.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},e.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=e.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},e.ToolboxCategory.prototype.getColour_=function(t){var n=t.categorystyle||t.categoryStyle;return(t=t.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(t)},e.ToolboxCategory.prototype.getColourfromStyle_=function(t){var n=this.workspace_.getTheme();if(t&&n){if((n=n.categoryStyles[t])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},e.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},e.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=e.utils.replaceMessageReferences(t))||""===t)return"";var n=Number(t);return isNaN(n)?(n=e.utils.colour.parse(t))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):e.hueToHex(n)},e.ToolboxCategory.prototype.openIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.closedicon),e.utils.dom.addClass(t,this.cssConfig_.openicon))},e.ToolboxCategory.prototype.closeIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.openicon),e.utils.dom.addClass(t,this.cssConfig_.closedicon))},e.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},e.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},e.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},e.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},e.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},e.ToolboxCategory.prototype.onClick=function(t){},e.ToolboxCategory.prototype.setSelected=function(t){if(t){var n=this.parseColour_(e.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,e.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",e.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,t)},e.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},e.ToolboxCategory.prototype.getName=function(){return this.name_},e.ToolboxCategory.prototype.getParent=function(){return this.parent_},e.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},e.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=e.utils.toolbox.convertFlyoutDefToJsonArray(t)),this.parseContents_(this.toolboxItemDef_)},e.ToolboxCategory.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxCategory.registrationName,e.ToolboxCategory),e.ToolboxSeparator=function(t,n){e.ToolboxSeparator.superClass_.constructor.call(this,t,n),this.cssConfig_={container:"blocklyTreeSeparator"},e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig)},e.utils.object.inherits(e.ToolboxSeparator,e.ToolboxItem),e.ToolboxSeparator.registrationName="sep",e.ToolboxSeparator.prototype.init=function(){this.createDom_()},e.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),this.htmlDiv_=t},e.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxSeparator.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxSeparator.registrationName,e.ToolboxSeparator),e.CollapsibleToolboxCategory=function(t,n,r){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],e.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.CollapsibleToolboxCategory,e.ToolboxCategory),e.CollapsibleToolboxCategory.registrationName="collapsibleCategory",e.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=e.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},e.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var n=t.contents,r=!0;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var s;s=n[t];t++)!e.registry.hasItem(e.registry.Type.TOOLBOX_ITEM,s.kind)||s.kind.toLowerCase()==e.ToolboxSeparator.registrationName&&r?(this.flyoutItems_.push(s),r=!0):(this.createToolboxItem_(s),r=!1)}},e.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var n=t.kind;"CATEGORY"==n.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(n=e.CollapsibleToolboxCategory.registrationName),t=new(e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,n))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},e.CollapsibleToolboxCategory.prototype.init=function(){e.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},e.CollapsibleToolboxCategory.prototype.createDom_=function(){e.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),e.utils.aria.setRole(this.subcategoriesDiv_,e.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},e.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var n=document.createElement("div");e.utils.dom.addClass(n,this.cssConfig_.contents);for(var r=0;r<t.length;r++){var s=t[r];s.init();var c=s.getDiv();n.appendChild(c),s.getClickTarget&&s.getClickTarget().setAttribute("id",s.getId())}return n},e.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!=t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},e.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var r,n=0;r=this.getChildToolboxItems()[n];n++)r.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},e.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},e.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},e.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},e.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.CollapsibleToolboxCategory.registrationName,e.CollapsibleToolboxCategory),e.Events.ToolboxItemSelect=function(t,n,r){e.Events.ToolboxItemSelect.superClass_.constructor.call(this,r),this.oldItem=t,this.newItem=n},e.utils.object.inherits(e.Events.ToolboxItemSelect,e.Events.UiBase),e.Events.ToolboxItemSelect.prototype.type=e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect.prototype.toJson=function(){var t=e.Events.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},e.Events.ToolboxItemSelect.prototype.fromJson=function(t){e.Events.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},e.registry.register(e.registry.Type.EVENT,e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect),e.IAutoHideable=function(){},e.IStyleable=function(){},e.IToolbox=function(){},e.Toolbox=function(t){e.Toolbox.superClass_.constructor.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},e.utils.object.inherits(e.Toolbox,e.DeleteArea),e.Toolbox.prototype.onShortcut=function(t){return!1},e.Toolbox.prototype.init=function(){var t=this.workspace_,n=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),e.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,e.utils.aria.setRole(this.contentsDiv_,e.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),t.parentNode.insertBefore(n,t),this.attachEvents_(n,this.contentsDiv_),n},e.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),e.utils.dom.addClass(t,"blocklyToolboxDiv"),e.utils.dom.addClass(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},e.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},e.Toolbox.prototype.attachEvents_=function(t,n){t=e.browserEvents.conditionalBind(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),n=e.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},e.Toolbox.prototype.onClick_=function(t){if(e.utils.isRightButton(t)||t.target==this.HtmlDiv)e.hideChaff(!1);else{var n=t.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(t)),e.hideChaff(!0)}e.Touch.clearTouchIdentifier()},e.Toolbox.prototype.onKeyDown_=function(t){var n=!1;switch(t.keyCode){case e.utils.KeyCodes.DOWN:n=this.selectNext_();break;case e.utils.KeyCodes.UP:n=this.selectPrevious_();break;case e.utils.KeyCodes.LEFT:n=this.selectParent_();break;case e.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(t)),n&&t.preventDefault()},e.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,n=new e.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=t.options.toolboxPosition,new(e.registry.getClassFromOptions(t.horizontalLayout?e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(n)},e.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var n=0;n<this.contents_.length;n++){var r=this.contents_[n];r&&r.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},e.Toolbox.prototype.renderContents_=function(t){for(var s,n=document.createDocumentFragment(),r=0;s=t[r];r++)this.createToolboxItem_(s,n);this.contentsDiv_.appendChild(n)},e.Toolbox.prototype.createToolboxItem_=function(t,n){var r=t.kind;"CATEGORY"==r.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(r=e.CollapsibleToolboxCategory.registrationName),(r=e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,r.toLowerCase()))&&(t=new r(t,this),this.addToolboxItem_(t),t.init(),(r=t.getDiv())&&n.appendChild(r),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},e.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var r,n=0;r=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(r)},e.Toolbox.prototype.getToolboxItems=function(){return this.contents_},e.Toolbox.prototype.addStyle=function(t){e.utils.dom.addClass(this.HtmlDiv,t)},e.Toolbox.prototype.removeStyle=function(t){e.utils.dom.removeClass(this.HtmlDiv,t)},e.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),n=t.top,r=n+t.height,s=t.left;return t=s+t.width,this.toolboxPosition==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e7,r,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.BOTTOM?new e.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e7,1e7,-1e7,t):new e.utils.Rect(-1e7,1e7,s,1e7)},e.Toolbox.prototype.wouldDelete=function(t,n){return this.updateWouldDelete_(t instanceof e.BlockSvg?!t.getParent()&&t.isDeletable():t.isDeletable()),this.wouldDelete_},e.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},e.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},e.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(n):this.removeStyle(n)},e.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},e.Toolbox.prototype.getWidth=function(){return this.width_},e.Toolbox.prototype.getHeight=function(){return this.height_},e.Toolbox.prototype.getFlyout=function(){return this.flyout_},e.Toolbox.prototype.getWorkspace=function(){return this.workspace_},e.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},e.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},e.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},e.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition==e.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==e.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},e.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition==e.utils.toolbox.Position.LEFT?t.scrollX+n.width:t.scrollX,this.toolboxPosition==e.utils.toolbox.Position.TOP?t.scrollY+n.height:t.scrollY),e.svgResize(t)},e.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},e.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var n=this.contents_[t];n.refreshTheme&&n.refreshTheme()}},e.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},e.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},e.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},e.Toolbox.prototype.setSelectedItem=function(t){var n=this.selectedItem_;!t&&!n||t&&!t.isSelectable()||(this.shouldDeselectItem_(n,t)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,t)&&null!=t&&this.selectItem_(n,t),this.updateFlyout_(n,t),this.fireSelectEvent_(n,t))},e.Toolbox.prototype.shouldDeselectItem_=function(t,n){return null!=t&&(!t.isCollapsible()||t!=n)},e.Toolbox.prototype.shouldSelectItem_=function(t,n){return null!=n&&n!=t},e.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,"")},e.Toolbox.prototype.selectItem_=function(t,n){this.selectedItem_=n,this.previouslySelectedItem_=t,n.setSelected(!0),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,n.getId())},e.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},e.Toolbox.prototype.updateFlyout_=function(t,n){(t!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},e.Toolbox.prototype.fireSelectEvent_=function(t,n){var r=t&&t.getName(),s=n&&n.getName();t==n&&(s=null),t=new(e.Events.get(e.Events.TOOLBOX_ITEM_SELECT))(r,s,this.workspace_.id),e.Events.fire(t)},e.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},e.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},e.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[++t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[--t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)e.browserEvents.unbind(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),e.utils.dom.removeNode(this.HtmlDiv)},e.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),e.registry.register(e.registry.Type.TOOLBOX,e.registry.DEFAULT,e.Toolbox),e.Events.TrashcanOpen=function(t,n){e.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=t},e.utils.object.inherits(e.Events.TrashcanOpen,e.Events.UiBase),e.Events.TrashcanOpen.prototype.type=e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen.prototype.toJson=function(){var t=e.Events.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},e.Events.TrashcanOpen.prototype.fromJson=function(t){e.Events.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},e.registry.register(e.registry.Type.EVENT,e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen),e.IPositionable=function(){},e.uiPosition={},e.uiPosition.verticalPosition={TOP:0,BOTTOM:1},e.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},e.uiPosition.bumpDirection={UP:0,DOWN:1},e.uiPosition.getStartPositionRect=function(t,n,r,s,c,v){var D=v.scrollbar&&v.scrollbar.canScrollVertically();return t.horizontal===e.uiPosition.horizontalPosition.LEFT?(r=c.absoluteMetrics.left+r,D&&v.RTL&&(r+=e.Scrollbar.scrollbarThickness)):(r=c.absoluteMetrics.left+c.viewMetrics.width-n.width-r,D&&!v.RTL&&(r-=e.Scrollbar.scrollbarThickness)),t.vertical===e.uiPosition.verticalPosition.TOP?t=c.absoluteMetrics.top+s:(t=c.absoluteMetrics.top+c.viewMetrics.height-n.height-s,v.scrollbar&&v.scrollbar.canScrollHorizontally()&&(t-=e.Scrollbar.scrollbarThickness)),new e.utils.Rect(t,t+n.height,r,r+n.width)},e.uiPosition.getCornerOppositeToolbox=function(t,n){return{horizontal:n.toolboxMetrics.position===e.utils.toolbox.Position.LEFT||t.horizontalLayout&&!t.RTL?e.uiPosition.horizontalPosition.RIGHT:e.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===e.utils.toolbox.Position.BOTTOM?e.uiPosition.verticalPosition.TOP:e.uiPosition.verticalPosition.BOTTOM}},e.uiPosition.bumpPositionRect=function(t,n,r,s){for(var G,c=t.left,v=t.right-t.left,D=t.bottom-t.top,P=0;G=s[P];P++)t.intersects(G)&&(t=new e.utils.Rect(t=r===e.uiPosition.bumpDirection.UP?G.top-D-n:G.bottom+n,t+D,c,c+v),P=-1);return t},e.Trashcan=function(t){e.Trashcan.superClass_.constructor.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(t=new e.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.TOP?e.utils.toolbox.Position.BOTTOM:e.utils.toolbox.Position.TOP,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT?e.utils.toolbox.Position.LEFT:e.utils.toolbox.Position.RIGHT,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},e.utils.object.inherits(e.Trashcan,e.DeleteArea),e.Trashcan.prototype.WIDTH_=47,e.Trashcan.prototype.BODY_HEIGHT_=44,e.Trashcan.prototype.LID_HEIGHT_=16,e.Trashcan.prototype.MARGIN_VERTICAL_=20,e.Trashcan.prototype.MARGIN_HORIZONTAL_=20,e.Trashcan.prototype.MARGIN_HOTSPOT_=10,e.Trashcan.prototype.SPRITE_LEFT_=0,e.Trashcan.prototype.SPRITE_TOP_=32,e.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,e.Trashcan.ANIMATION_LENGTH_=80,e.Trashcan.ANIMATION_FRAMES_=4,e.Trashcan.OPACITY_MIN_=.4,e.Trashcan.OPACITY_MAX_=.8,e.Trashcan.MAX_LID_ANGLE_=45,e.Trashcan.prototype.isLidOpen=!1,e.Trashcan.prototype.minOpenness_=0,e.Trashcan.prototype.svgGroup_=null,e.Trashcan.prototype.svgLid_=null,e.Trashcan.prototype.lidTask_=0,e.Trashcan.prototype.lidOpen_=0,e.Trashcan.prototype.left_=0,e.Trashcan.prototype.top_=0,e.Trashcan.prototype.initialized_=!1,e.Trashcan.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var r=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return r.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),e.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),e.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),e.browserEvents.bind(r,"mouseover",this,this.mouseOver_),e.browserEvents.bind(r,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},e.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(e.utils.dom.insertAfter(this.flyout.createDom(e.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET,e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},e.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},e.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},e.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},e.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(e.Xml.textToDom);this.flyout.show(t),this.fireUiEvent_(!0)}},e.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},e.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},e.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},e.Trashcan.prototype.position=function(t,n){if(this.initialized_){var r=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t);t=e.uiPosition.getStartPositionRect(r,new e.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,r.vertical===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.Trashcan.prototype.getBoundingRectangle=function(){return new e.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},e.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new e.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},e.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},e.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},e.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},e.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},e.Trashcan.prototype.animateLid_=function(){var t=e.Trashcan.ANIMATION_FRAMES_,n=1/(t+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*e.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=e.Trashcan.OPACITY_MIN_)+this.lidOpen_*(e.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),e.Trashcan.ANIMATION_LENGTH_/t))},e.Trashcan.prototype.setLidAngle_=function(t){var n=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-t:t)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},e.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*e.Trashcan.MAX_LID_ANGLE_)},e.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},e.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},e.Trashcan.prototype.fireUiEvent_=function(t){t=new(e.Events.get(e.Events.TRASHCAN_OPEN))(t,this.workspace_.id),e.Events.fire(t)},e.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},e.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},e.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},e.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==e.Events.BLOCK_DELETE&&t.oldXml.tagName&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},e.Trashcan.prototype.cleanBlockXML_=function(t){for(var n=t=t.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var r=n.firstChild||n.nextSibling;if(!r)for(r=n.parentNode;r;){if(r.nextSibling){r=r.nextSibling;break}r=r.parentNode}n=r}return e.Xml.domToText(t)},e.VariablesDynamic={},e.VariablesDynamic.onCreateVariableButtonClick_String=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"String")},e.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Number")},e.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Colour")},e.VariablesDynamic.flyoutCategory=function(t){var n=[],r=document.createElement("button");return r.setAttribute("text",e.Msg.NEW_STRING_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(r),(r=document.createElement("button")).setAttribute("text",e.Msg.NEW_NUMBER_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(r),(r=document.createElement("button")).setAttribute("text",e.Msg.NEW_COLOUR_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(r),t.registerButtonCallback("CREATE_VARIABLE_STRING",e.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",e.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",e.VariablesDynamic.onCreateVariableButtonClick_Colour),t=e.VariablesDynamic.flyoutCategoryBlocks(t),n.concat(t)},e.VariablesDynamic.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getAllVariables()).length){if(e.Blocks.variables_set_dynamic){var r=t[t.length-1],s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set_dynamic"),s.setAttribute("gap",24),s.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(s)}if(e.Blocks.variables_get_dynamic){t.sort(e.VariableModel.compareByName),r=0;for(var c;c=t[r];r++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(c)),n.push(s)}}return n},e.ZoomControls=function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},e.ZoomControls.prototype.WIDTH_=32,e.ZoomControls.prototype.HEIGHT_=32,e.ZoomControls.prototype.SMALL_SPACING_=2,e.ZoomControls.prototype.LARGE_SPACING_=11,e.ZoomControls.prototype.MARGIN_VERTICAL_=20,e.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,e.ZoomControls.prototype.svgGroup_=null,e.ZoomControls.prototype.left_=0,e.ZoomControls.prototype.top_=0,e.ZoomControls.prototype.initialized_=!1,e.ZoomControls.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},e.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},e.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&e.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&e.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&e.browserEvents.unbind(this.onZoomOutWrapper_)},e.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new e.utils.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},e.ZoomControls.prototype.position=function(t,n){if(this.initialized_){var r=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t),s=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(s+=this.LARGE_SPACING_+this.HEIGHT_),t=e.uiPosition.getStartPositionRect(r,new e.utils.Size(this.WIDTH_,s),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,(r=r.vertical)===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),r===e.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(r=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(r+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(r=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(r+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomOutWrapper_=e.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},e.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomInWrapper_=e.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},e.ZoomControls.prototype.zoom_=function(t,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},e.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomResetWrapper_=e.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},e.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},e.ZoomControls.prototype.fireZoomEvent_=function(){var t=new(e.Events.get(e.Events.CLICK))(null,this.workspace_.id,"zoom_controls");e.Events.fire(t)},e.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),e.ShortcutItems={},e.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},e.ShortcutItems.registerEscape=function(){var t={name:e.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return e.hideChaff(),!0}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.ESC,t.name)},e.ShortcutItems.registerDelete=function(){var t={name:e.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&e.selected&&e.selected.isDeletable()},callback:function(n,r){return r.preventDefault(),!e.Gesture.inProgress()&&(e.deleteBlock(e.selected),!0)}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.DELETE,t.name),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.BACKSPACE,t.name)},e.ShortcutItems.registerCopy=function(){var t={name:e.ShortcutItems.names.COPY,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()},callback:function(r,s){return s.preventDefault(),e.hideChaff(),e.copy(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerCut=function(){var t={name:e.ShortcutItems.names.CUT,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()&&!e.selected.workspace.isFlyout},callback:function(){return e.copy(e.selected),e.deleteBlock(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerPaste=function(){var t={name:e.ShortcutItems.names.PASTE,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()},callback:function(){return e.paste()}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerUndo=function(){var t={name:e.ShortcutItems.names.UNDO,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()},callback:function(r){return e.hideChaff(),r.undo(!1),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerRedo=function(){var t={name:e.ShortcutItems.names.REDO,preconditionFn:function(r){return!e.Gesture.inProgress()&&!r.options.readOnly},callback:function(r){return e.hideChaff(),r.undo(!0),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Y,[e.utils.KeyCodes.CTRL]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerDefaultShortcuts=function(){e.ShortcutItems.registerEscape(),e.ShortcutItems.registerDelete(),e.ShortcutItems.registerCopy(),e.ShortcutItems.registerCut(),e.ShortcutItems.registerPaste(),e.ShortcutItems.registerUndo(),e.ShortcutItems.registerRedo()},e.ShortcutItems.registerDefaultShortcuts(),e.ContextMenuItems={},e.ContextMenuItems.registerUndo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},e.ContextMenuItems.registerRedo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},e.ContextMenuItems.registerCleanup=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},e.ContextMenuItems.toggleOption_=function(t,n){for(var r=0,s=0;s<n.length;s++)for(var c=n[s];c;)setTimeout(c.setCollapsed.bind(c,t),r),c=c.getNextBlock(),r+=10},e.ContextMenuItems.registerCollapse=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var r=t[n];r;){if(!r.isCollapsed())return"enabled";r=r.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!0,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},e.ContextMenuItems.registerExpand=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var r=t[n];r;){if(r.isCollapsed())return"enabled";r=r.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!1,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},e.ContextMenuItems.addDeletableBlocks_=function(t,n){if(t.isDeletable())Array.prototype.push.apply(n,t.getDescendants(!1));else{t=t.getChildren(!1);for(var r=0;r<t.length;r++)e.ContextMenuItems.addDeletableBlocks_(t[r],n)}},e.ContextMenuItems.getDeletableBlocks_=function(t){var n=[];t=t.getTopBlocks(!0);for(var r=0;r<t.length;r++)e.ContextMenuItems.addDeletableBlocks_(t[r],n);return n},e.ContextMenuItems.deleteNext_=function(t,n){e.Events.setGroup(n);var r=t.shift();r&&(r.workspace?(r.dispose(!1,!0),setTimeout(e.ContextMenuItems.deleteNext_,10,t,n)):e.ContextMenuItems.deleteNext_(t,n)),e.Events.setGroup(!1)},e.ContextMenuItems.registerDeleteAll=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1==(t=e.ContextMenuItems.getDeletableBlocks_(t.workspace).length)?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<e.ContextMenuItems.getDeletableBlocks_(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var n=e.ContextMenuItems.getDeletableBlocks_(t.workspace),r=e.utils.genUid();2>n.length?e.ContextMenuItems.deleteNext_(n,r):e.confirm(e.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(s){s&&e.ContextMenuItems.deleteNext_(n,r)})}},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},e.ContextMenuItems.registerWorkspaceOptions_=function(){e.ContextMenuItems.registerUndo(),e.ContextMenuItems.registerRedo(),e.ContextMenuItems.registerCleanup(),e.ContextMenuItems.registerCollapse(),e.ContextMenuItems.registerExpand(),e.ContextMenuItems.registerDeleteAll()},e.ContextMenuItems.registerDuplicate=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&e.duplicate(t.block)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},e.ContextMenuItems.registerComment=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?e.Msg.REMOVE_COMMENT:e.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,e.utils.userAgent.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},e.ContextMenuItems.registerInline=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?e.Msg.EXTERNAL_INPUTS:e.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var n=1;n<t.inputList.length;n++)if(t.inputList[n-1].type!=e.inputTypes.STATEMENT&&t.inputList[n].type!=e.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},e.ContextMenuItems.registerCollapseExpandBlock=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?e.Msg.EXPAND_BLOCK:e.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},e.ContextMenuItems.registerDisable=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?e.Msg.DISABLE_BLOCK:e.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var n=e.Events.getGroup();n||e.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),n||e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},e.ContextMenuItems.registerDelete=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){var n=t.block;return t=n.getDescendants(!1).length,(n=n.getNextBlock())&&(t-=n.getDescendants(!1).length),1==t?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){e.Events.setGroup(!0),t.block&&e.deleteBlock(t.block),e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},e.ContextMenuItems.registerHelp=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},e.ContextMenuItems.registerBlockOptions_=function(){e.ContextMenuItems.registerDuplicate(),e.ContextMenuItems.registerComment(),e.ContextMenuItems.registerInline(),e.ContextMenuItems.registerCollapseExpandBlock(),e.ContextMenuItems.registerDisable(),e.ContextMenuItems.registerDelete(),e.ContextMenuItems.registerHelp()},e.ContextMenuItems.registerDefaultOptions=function(){e.ContextMenuItems.registerWorkspaceOptions_(),e.ContextMenuItems.registerBlockOptions_()},e.ContextMenuItems.registerDefaultOptions(),e.Mutator=function(t){e.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},e.utils.object.inherits(e.Mutator,e.Icon),e.Mutator.prototype.workspace_=null,e.Mutator.prototype.workspaceWidth_=0,e.Mutator.prototype.workspaceHeight_=0,e.Mutator.prototype.setBlock=function(t){this.block_=t},e.Mutator.prototype.getWorkspace=function(){return this.workspace_},e.Mutator.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},e.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&e.Icon.prototype.iconClick_.call(this,t)},e.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var r,t=e.utils.xml.createElement("xml"),n=0;r=this.quarkNames_[n];n++){var s=e.utils.xml.createElement("block");s.setAttribute("type",r),t.appendChild(s)}else t=null;return(n=new e.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT,(r=!!t)&&(n.languageTree=e.utils.toolbox.convertToolboxDefToJson(t)),this.workspace_=new e.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(e.Events.disableOrphans),t=r?this.workspace_.addFlyout(e.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),t&&n.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},e.Mutator.prototype.updateEditable=function(){e.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&e.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},e.Mutator.prototype.resizeBubble_=function(){var t=2*e.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),r=n.width+n.x,s=n.height+3*t,c=this.workspace_.getFlyout();if(c){var v=c.getWorkspace().getMetricsManager().getScrollMetrics();s=Math.max(s,v.height+20),r+=c.getWidth()}this.block_.RTL&&(r=-n.x),r+=3*t,(Math.abs(this.workspaceWidth_-r)>t||Math.abs(this.workspaceHeight_-s)>t)&&(this.workspaceWidth_=r,this.workspaceHeight_=s,this.bubble_.setBubbleSize(r+t,s+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},e.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},e.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),n&&(t.init(this.workspace_),t.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var s,r=0;s=n[r];r++)s.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(n=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+n:n):t=n=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,n),this.block_.saveConnections){var c=this,v=this.block_;v.saveConnections(this.rootBlock_),this.sourceListener_=function(){v.saveConnections(c.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},e.Mutator.prototype.workspaceChanged_=function(t){if(!(t.isUiEvent||t.type==e.Events.CHANGE&&"disabled"==t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var r,n=0;r=t[n];n++){var s=r.getRelativeToSurfaceXY();if(20>s.y&&r.moveBy(0,20-s.y),r.RTL){var c=-20,v=this.workspace_.getFlyout();v&&(c-=v.getWidth()),s.x>c&&r.moveBy(c-s.x,0)}else 20>s.x&&r.moveBy(20-s.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(e.Events.setGroup(!0),t=(t=(r=this.block_).mutationToDom())&&e.Xml.domToText(t),n=r.rendered,r.rendered=!1,r.compose(this.rootBlock_),r.rendered=n,r.initSvg(),r.rendered&&r.render(),t!=(n=(n=r.mutationToDom())&&e.Xml.domToText(n))){e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(r,"mutation",null,t,n));var D=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(D),r.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),e.Events.setGroup(!1)}}},e.Mutator.prototype.dispose=function(){this.block_.mutator=null,e.Icon.prototype.dispose.call(this)},e.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var s,n=t.getAllBlocks(!1),r=0;s=n[r];r++)s.setStyle(s.getStyleName());if(r=t.getFlyout())for(t=r.workspace_.getAllBlocks(!1),r=0;s=t[r];r++)s.setStyle(s.getStyleName())}},e.Mutator.reconnect=function(t,n,r){if(!t||!t.getSourceBlock().workspace)return!1;r=n.getInput(r).connection;var s=t.targetBlock();return!(s&&s!=n||r.targetConnection==t||(r.isConnected()&&r.disconnect(),r.connect(t),0))},e.Mutator.findParentWs=function(t){var n=null;if(t&&t.options){var r=t.options.parentWorkspace;t.isFlyout?r&&r.options&&(n=r.options.parentWorkspace):r&&(n=r)}return n},e.FieldTextInput=function(t,n,r){this.spellcheck_=!0,e.FieldTextInput.superClass_.constructor.call(this,t,n,r),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},e.utils.object.inherits(e.FieldTextInput,e.Field),e.FieldTextInput.prototype.DEFAULT_VALUE="",e.FieldTextInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldTextInput(n,void 0,t)},e.FieldTextInput.prototype.SERIALIZABLE=!0,e.FieldTextInput.BORDERRADIUS=4,e.FieldTextInput.prototype.CURSOR="text",e.FieldTextInput.prototype.configure_=function(t){e.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},e.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var s,t=0,n=0,r=0;s=this.sourceBlock_.inputList[r];r++){for(var c=0;s.fieldRow[c];c++)t++;s.connection&&n++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},e.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},e.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},e.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},e.FieldTextInput.prototype.render_=function(){if(e.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0))}},e.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},e.FieldTextInput.prototype.showEditor_=function(t,n){this.workspace_=this.sourceBlock_.workspace,!(t=n||!1)&&(e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},e.FieldTextInput.prototype.showPromptEditor_=function(){e.prompt(e.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},e.FieldTextInput.prototype.showInlineEditor_=function(t){e.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},e.FieldTextInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV;e.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var r=this.workspace_.getScale(),s=this.getConstants().FIELD_TEXT_FONTSIZE*r+"pt";if(t.style.fontSize=s,n.style.fontSize=s,s=e.FieldTextInput.BORDERRADIUS*r+"px",this.fullBlockClickTarget_){s=((s=this.getScaledBBox()).bottom-s.top)/2+"px";var c=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*r+"px solid "+c,t.style.borderRadius=s,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*r+"px")}return n.style.borderRadius=s,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},e.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=e.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,e.utils.dom.removeClass(this.getClickTarget_(),"editing")},e.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=e.browserEvents.conditionalBind(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=e.browserEvents.conditionalBind(t,"input",this,this.onHtmlInputChange_)},e.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(e.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},e.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==e.utils.KeyCodes.ENTER?(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.TAB&&(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},e.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,e.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_(),e.Events.setGroup(!1))},e.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},e.FieldTextInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldTextInput.prototype.isTabNavigable=function(){return!0},e.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},e.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},e.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},e.fieldRegistry.register("field_input",e.FieldTextInput),e.FieldAngle=function(t,n,r){this.clockwise_=e.FieldAngle.CLOCKWISE,this.offset_=e.FieldAngle.OFFSET,this.wrap_=e.FieldAngle.WRAP,this.round_=e.FieldAngle.ROUND,e.FieldAngle.superClass_.constructor.call(this,t,n,r),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},e.utils.object.inherits(e.FieldAngle,e.FieldTextInput),e.FieldAngle.prototype.DEFAULT_VALUE=0,e.FieldAngle.fromJson=function(t){return new e.FieldAngle(t.angle,void 0,t)},e.FieldAngle.prototype.SERIALIZABLE=!0,e.FieldAngle.ROUND=15,e.FieldAngle.HALF=50,e.FieldAngle.CLOCKWISE=!1,e.FieldAngle.OFFSET=0,e.FieldAngle.WRAP=360,e.FieldAngle.RADIUS=e.FieldAngle.HALF-1,e.FieldAngle.prototype.configure_=function(t){switch(e.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=t.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=t.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=t.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},e.FieldAngle.prototype.initView=function(){e.FieldAngle.superClass_.initView.call(this),this.symbol_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},e.FieldAngle.prototype.render_=function(){e.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},e.FieldAngle.prototype.showEditor_=function(t){e.FieldAngle.superClass_.showEditor_.call(this,t,e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD),this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.editor_),e.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},e.FieldAngle.prototype.dropdownCreate_=function(){var t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",height:2*e.FieldAngle.HALF+"px",width:2*e.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:e.FieldAngle.HALF,cy:e.FieldAngle.HALF,r:e.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF,y1:e.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var r=0;360>r;r+=15)e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF+e.FieldAngle.RADIUS,y1:e.FieldAngle.HALF,x2:e.FieldAngle.HALF+e.FieldAngle.RADIUS-(r%45==0?10:5),y2:e.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+r+","+e.FieldAngle.HALF+","+e.FieldAngle.HALF+")"},t);this.clickWrapper_=e.browserEvents.conditionalBind(t,"click",this,this.hide_),this.clickSurfaceWrapper_=e.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=e.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},e.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(e.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(e.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(e.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},e.FieldAngle.prototype.hide_=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hide()},e.FieldAngle.prototype.onMouseMove_=function(t){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),r=t.clientX-n.left-e.FieldAngle.HALF;t=t.clientY-n.top-e.FieldAngle.HALF,n=Math.atan(-t/r),isNaN(n)||(n=e.utils.math.toDegrees(n),0>r?n+=180:0<t&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},e.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},e.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,n=e.utils.math.toRadians(t%360);t=["M ",e.FieldAngle.HALF,",",e.FieldAngle.HALF];var r=e.FieldAngle.HALF,s=e.FieldAngle.HALF;if(!isNaN(n)){var c=Number(this.clockwise_),v=e.utils.math.toRadians(this.offset_),D=Math.cos(v)*e.FieldAngle.RADIUS,P=Math.sin(v)*-e.FieldAngle.RADIUS;c&&(n=2*v-n),r+=Math.cos(n)*e.FieldAngle.RADIUS,s-=Math.sin(n)*e.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-v)/Math.PI)%2),c&&(n=1-n),t.push(" l ",D,",",P," A ",e.FieldAngle.RADIUS,",",e.FieldAngle.RADIUS," 0 ",n," ",c," ",r,",",s," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",r),this.line_.setAttribute("y2",s)}},e.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var n;if(e.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===e.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:t.keyCode===e.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:t.keyCode===e.utils.KeyCodes.DOWN?n=-1:t.keyCode===e.utils.KeyCodes.UP&&(n=1),n){var r=this.getValue();this.displayMouseOrKeyboardValue_(r+n*this.round_),t.preventDefault(),t.stopPropagation()}},e.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},e.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},e.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),e.fieldRegistry.register("field_angle",e.FieldAngle),e.FieldCheckbox=function(t,n,r){this.checkChar_=null,e.FieldCheckbox.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.FieldCheckbox,e.Field),e.FieldCheckbox.prototype.DEFAULT_VALUE=!1,e.FieldCheckbox.fromJson=function(t){return new e.FieldCheckbox(t.checked,void 0,t)},e.FieldCheckbox.CHECK_CHAR="\u2713",e.FieldCheckbox.prototype.SERIALIZABLE=!0,e.FieldCheckbox.prototype.CURSOR="default",e.FieldCheckbox.prototype.configure_=function(t){e.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},e.FieldCheckbox.prototype.initView=function(){e.FieldCheckbox.superClass_.initView.call(this),e.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},e.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},e.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||e.FieldCheckbox.CHECK_CHAR},e.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},e.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},e.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},e.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},e.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},e.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},e.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},e.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},e.fieldRegistry.register("field_checkbox",e.FieldCheckbox),e.FieldColour=function(t,n,r){e.FieldColour.superClass_.constructor.call(this,t,n,r),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},e.utils.object.inherits(e.FieldColour,e.Field),e.FieldColour.fromJson=function(t){return new e.FieldColour(t.colour,void 0,t)},e.FieldColour.prototype.SERIALIZABLE=!0,e.FieldColour.prototype.CURSOR="default",e.FieldColour.prototype.isDirty_=!1,e.FieldColour.prototype.colours_=null,e.FieldColour.prototype.titles_=null,e.FieldColour.prototype.columns_=0,e.FieldColour.prototype.configure_=function(t){e.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},e.FieldColour.prototype.initView=function(){this.size_=new e.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},e.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},e.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:e.utils.colour.parse(t)},e.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},e.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},e.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),e.FieldColour.prototype.DEFAULT_VALUE=e.FieldColour.COLOURS[0],e.FieldColour.TITLES=[],e.FieldColour.COLUMNS=7,e.FieldColour.prototype.setColours=function(t,n){return this.colours_=t,n&&(this.titles_=n),this},e.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},e.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.picker_),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),e.DropDownDiv.hideIfOwner(this))},e.FieldColour.prototype.onKeyDown_=function(t){var n=!1;t.keyCode===e.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):t.keyCode===e.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):t.keyCode===e.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):t.keyCode===e.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):t.keyCode===e.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),e.DropDownDiv.hideWithoutAnimation(),n=!0),n&&t.stopPropagation()},e.FieldColour.prototype.moveHighlightBy_=function(t,n){var r=this.colours_||e.FieldColour.COLOURS,s=this.columns_||e.FieldColour.COLUMNS,c=this.highlightedIndex_%s,v=Math.floor(this.highlightedIndex_/s);c+=t,v+=n,0>t?0>c&&0<v?(c=s-1,v--):0>c&&(c=0):0<t?c>s-1&&v<Math.floor(r.length/s)-1?(c=0,v++):c>s-1&&c--:0>n?0>v&&(v=0):0<n&&v>Math.floor(r.length/s)-1&&(v=Math.floor(r.length/s)-1),this.setHighlightedCell_(this.picker_.childNodes[v].childNodes[c],v*s+c)},e.FieldColour.prototype.onMouseMove_=function(t){var n=(t=t.target)&&Number(t.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(t,n)},e.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&e.utils.dom.removeClass(t,"blocklyColourHighlighted")},e.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return n?n.childNodes[this.highlightedIndex_%t]:null},e.FieldColour.prototype.setHighlightedCell_=function(t,n){var r=this.getHighlighted_();r&&e.utils.dom.removeClass(r,"blocklyColourHighlighted"),e.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=n,e.utils.aria.setState(this.picker_,e.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},e.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.colours_||e.FieldColour.COLOURS,r=this.titles_||e.FieldColour.TITLES,s=this.getValue(),c=document.createElement("table");c.className="blocklyColourTable",c.tabIndex=0,c.dir="ltr",e.utils.aria.setRole(c,e.utils.aria.Role.GRID),e.utils.aria.setState(c,e.utils.aria.State.EXPANDED,!0),e.utils.aria.setState(c,e.utils.aria.State.ROWCOUNT,Math.floor(n.length/t)),e.utils.aria.setState(c,e.utils.aria.State.COLCOUNT,t);for(var v,D=0;D<n.length;D++){D%t==0&&(v=document.createElement("tr"),e.utils.aria.setRole(v,e.utils.aria.Role.ROW),c.appendChild(v));var P=document.createElement("td");v.appendChild(P),P.label=n[D],P.title=r[D]||n[D],P.id=e.utils.IdGenerator.getNextUniqueId(),P.setAttribute("data-index",D),e.utils.aria.setRole(P,e.utils.aria.Role.GRIDCELL),e.utils.aria.setState(P,e.utils.aria.State.LABEL,n[D]),e.utils.aria.setState(P,e.utils.aria.State.SELECTED,n[D]==s),P.style.backgroundColor=n[D],n[D]==s&&(P.className="blocklyColourSelected",this.highlightedIndex_=D)}this.onClickWrapper_=e.browserEvents.conditionalBind(c,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=e.browserEvents.conditionalBind(c,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=e.browserEvents.conditionalBind(c,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=e.browserEvents.conditionalBind(c,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=e.browserEvents.conditionalBind(c,"keydown",this,this.onKeyDown_),this.picker_=c},e.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(e.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(e.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(e.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(e.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},e.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),e.fieldRegistry.register("field_colour",e.FieldColour),e.FieldDropdown=function(t,n,r){"function"!=typeof t&&e.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],e.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,r),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},e.utils.object.inherits(e.FieldDropdown,e.Field),e.FieldDropdown.fromJson=function(t){return new e.FieldDropdown(t.options,void 0,t)},e.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},e.FieldDropdown.prototype.SERIALIZABLE=!0,e.FieldDropdown.CHECKMARK_OVERHANG=25,e.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,e.FieldDropdown.IMAGE_Y_OFFSET=5,e.FieldDropdown.IMAGE_Y_PADDING=2*e.FieldDropdown.IMAGE_Y_OFFSET,e.FieldDropdown.ARROW_CHAR=e.utils.userAgent.ANDROID?"\u25bc":"\u25be",e.FieldDropdown.prototype.CURSOR="default",e.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&e.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},e.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},e.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?e.FieldDropdown.ARROW_CHAR+" ":" "+e.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},e.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},e.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new e.utils.Coordinate(t.clientX,t.clientY):null,this.menu_.render(e.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),e.utils.dom.addClass(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.DropDownDiv.setColour(t,n)}e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},e.FieldDropdown.prototype.dropdownCreate_=function(){var t=new e.Menu;t.setRole(e.utils.aria.Role.LISTBOX),this.menu_=t;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var r=0;r<n.length;r++){var s=n[r][0],c=n[r][1];if("object"==typeof s){var v=new Image(s.width,s.height);v.src=s.src,v.alt=s.alt||"",s=v}(s=new e.MenuItem(s,c)).setRole(e.utils.aria.Role.OPTION),s.setRightToLeft(this.sourceBlock_.RTL),s.setCheckable(!0),t.addChild(s),s.setChecked(c==this.value_),c==this.value_&&(this.selectedMenuItem_=s),s.onAction(this.handleMenuActionEvent_,this)}},e.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},e.FieldDropdown.prototype.handleMenuActionEvent_=function(t){e.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},e.FieldDropdown.prototype.onItemSelected_=function(t,n){this.setValue(n.getValue())},e.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var n=!1,r=0;r<t.length;r++){var s=t[r][0];"string"==typeof s?t[r][0]=e.utils.replaceMessageReferences(s):(null!=s.alt&&(t[r][0].alt=e.utils.replaceMessageReferences(s.alt)),n=!0)}if(!(n||2>t.length)){for(n=[],r=0;r<t.length;r++)n.push(t[r][0]);r=e.utils.string.shortestStringLength(n),s=e.utils.string.commonWordPrefix(n,r);var c=e.utils.string.commonWordSuffix(n,r);!s&&!c||r<=s+c||(s&&(this.prefixField=n[0].substring(0,s-1)),c&&(this.suffixField=n[0].substr(1-c)),this.menuGenerator_=e.FieldDropdown.applyTrim_(t,s,c))}}},e.FieldDropdown.applyTrim_=function(t,n,r){for(var s=[],c=0;c<t.length;c++){var v=t[c][0],D=t[c][1];v=v.substring(n,v.length-r),s[c]=[v,D]}return s},e.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},e.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),e.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},e.FieldDropdown.prototype.doClassValidation_=function(t){for(var c,n=!1,r=this.getOptions(!0),s=0;c=r[s];s++)if(c[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},e.FieldDropdown.prototype.doValueUpdate_=function(t){e.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var r,n=0;r=t[n];n++)r[1]==this.value_&&(this.selectedOption_=r)},e.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},e.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},e.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var n=Number(t.height);t=Number(t.width);var r=!!this.borderRect_,s=Math.max(r?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+e.FieldDropdown.IMAGE_Y_PADDING);r=r?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var c=this.svgArrow_?this.positionSVGArrow_(t+r,s/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):e.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+c+2*r,this.size_.height=s;var v=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",r+c):(v=t+c,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",r)),this.imageElement_.setAttribute("y",s/2-n/2),this.positionTextElement_(v+r,t+c)},e.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),e.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,n=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),r=e.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var s=0;this.svgArrow_&&(s=this.positionSVGArrow_(r+t,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=r+s+2*t,this.size_.height=n,this.positionTextElement_(t,r)},e.FieldDropdown.prototype.positionSVGArrow_=function(t,n){if(!this.svgArrow_)return 0;var r=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,s=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,c=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?r:t+s)+","+n+")"),c+s},e.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},e.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,r=0;r<t.length;++r){var s=t[r];Array.isArray(s)?"string"!=typeof s[1]?(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option id must be a string. Found "+s[1]+" in: ",s)):s[0]&&"string"!=typeof s[0]&&"string"!=typeof s[0].src&&(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option must have a string label or image description. Found"+s[0]+" in: ",s)):(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option must be an array. Found: ",s))}if(n)throw TypeError("Found invalid FieldDropdown options.")},e.fieldRegistry.register("field_dropdown",e.FieldDropdown),e.FieldLabelSerializable=function(t,n,r){e.FieldLabelSerializable.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.FieldLabelSerializable,e.FieldLabel),e.FieldLabelSerializable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabelSerializable(n,void 0,t)},e.FieldLabelSerializable.prototype.EDITABLE=!1,e.FieldLabelSerializable.prototype.SERIALIZABLE=!0,e.fieldRegistry.register("field_label_serializable",e.FieldLabelSerializable),e.FieldImage=function(t,n,r,s,c,v,D){if(!t)throw Error("Src value of an image field is required");if(t=e.utils.replaceMessageReferences(t),r=Number(e.utils.replaceMessageReferences(r)),n=Number(e.utils.replaceMessageReferences(n)),isNaN(r)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=r||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",e.FieldImage.superClass_.constructor.call(this,t,null,D),D||(this.flipRtl_=!!v,this.altText_=e.utils.replaceMessageReferences(s)||""),this.size_=new e.utils.Size(n,r+e.FieldImage.Y_PADDING),this.imageHeight_=r,this.clickHandler_=null,"function"==typeof c&&(this.clickHandler_=c),this.imageElement_=null},e.utils.object.inherits(e.FieldImage,e.Field),e.FieldImage.prototype.DEFAULT_VALUE="",e.FieldImage.fromJson=function(t){return new e.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},e.FieldImage.Y_PADDING=1,e.FieldImage.prototype.EDITABLE=!1,e.FieldImage.prototype.isDirty_=!1,e.FieldImage.prototype.configure_=function(t){e.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=e.utils.replaceMessageReferences(t.alt)||""},e.FieldImage.prototype.initView=function(){this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},e.FieldImage.prototype.updateSize_=function(){},e.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},e.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},e.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},e.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},e.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},e.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},e.FieldImage.prototype.getText_=function(){return this.altText_},e.fieldRegistry.register("field_image",e.FieldImage),e.FieldMultilineInput=function(t,n,r){e.FieldMultilineInput.superClass_.constructor.call(this,t,n,r),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},e.utils.object.inherits(e.FieldMultilineInput,e.FieldTextInput),e.FieldMultilineInput.prototype.configure_=function(t){e.FieldMultilineInput.superClass_.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},e.FieldMultilineInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldMultilineInput(n,void 0,t)},e.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},e.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},e.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},e.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return e.Field.NBSP;var n=t.split("\n");t="";for(var r=this.isOverflowedY_?this.maxLines_:n.length,s=0;s<r;s++){var c=n[s];c.length>this.maxDisplayLength?c=c.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&s===r-1&&(c=c.substring(0,c.length-3)+"..."),t+=c=c.replace(/\s/g,e.Field.NBSP),s!==r-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="\u200f"),t},e.FieldMultilineInput.prototype.doValueUpdate_=function(t){e.FieldMultilineInput.superClass_.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},e.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var n=0,r=0;r<t.length;r++){var s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[r])),n+=s}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?e.utils.dom.addClass(t,"blocklyHtmlTextAreaInputOverflowedY"):e.utils.dom.removeClass(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0)))},e.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,n=0,r=0,s=0;s<t.length;s++){var c=e.utils.dom.getTextWidth(t[s]);c>n&&(n=c),r+=this.getConstants().FIELD_TEXT_HEIGHT+(0<s?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split("\n"),c=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var v=this.getConstants().FIELD_TEXT_FONTSIZE,D=this.getConstants().FIELD_TEXT_FONTWEIGHT,P=this.getConstants().FIELD_TEXT_FONTFAMILY;for(s=0;s<t.length;s++){t[s].length>this.maxDisplayLength&&(t[s]=t[s].substring(0,this.maxDisplayLength)),c.textContent=t[s];var G=e.utils.dom.getFastTextWidth(c,v,D,P);G>n&&(n=G)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(r+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",r)),this.size_.width=n,this.size_.height=r,this.positionBorderRect_()},e.FieldMultilineInput.prototype.showEditor_=function(t,n){e.FieldMultilineInput.superClass_.showEditor_.call(this,t,n),this.forceRerender()},e.FieldMultilineInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=this.workspace_.getScale(),r=document.createElement("textarea");r.className="blocklyHtmlInput blocklyHtmlTextAreaInput",r.setAttribute("spellcheck",this.spellcheck_);var s=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";t.style.fontSize=s,r.style.fontSize=s,r.style.borderRadius=e.FieldTextInput.BORDERRADIUS*n+"px",s=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var c=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return r.style.padding=c+"px "+s+"px "+c+"px "+s+"px",s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,r.style.lineHeight=s*n+"px",t.appendChild(r),r.value=r.defaultValue=this.getEditorText_(this.value_),r.untypedDefaultValue_=this.value_,r.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(r),r},e.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},e.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},e.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==e.utils.KeyCodes.ENTER&&e.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},e.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),e.fieldRegistry.register("field_multilinetext",e.FieldMultilineInput),e.FieldNumber=function(t,n,r,s,c,v){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,e.FieldNumber.superClass_.constructor.call(this,t,c,v),v||this.setConstraints(n,r,s)},e.utils.object.inherits(e.FieldNumber,e.FieldTextInput),e.FieldNumber.prototype.DEFAULT_VALUE=0,e.FieldNumber.fromJson=function(t){return new e.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},e.FieldNumber.prototype.SERIALIZABLE=!0,e.FieldNumber.prototype.configure_=function(t){e.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},e.FieldNumber.prototype.setConstraints=function(t,n,r){this.setMinInternal_(t),this.setMaxInternal_(n),this.setPrecisionInternal_(r),this.setValue(this.getValue())},e.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},e.FieldNumber.prototype.getMin=function(){return this.min_},e.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},e.FieldNumber.prototype.getMax=function(){return this.max_},e.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var r=n.indexOf(".");this.decimalPlaces_=-1==r?t?0:null:n.length-r-1},e.FieldNumber.prototype.getPrecision=function(){return this.precision_},e.FieldNumber.prototype.doClassValidation_=function(t){return null===t||(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},e.FieldNumber.prototype.widgetCreate_=function(){var t=e.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMAX,this.max_),t},e.fieldRegistry.register("field_number",e.FieldNumber),e.FieldVariable=function(t,n,r,s,c){this.menuGenerator_=e.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new e.utils.Size(0,0),c&&this.configure_(c),n&&this.setValidator(n),c||this.setTypes_(r,s)},e.utils.object.inherits(e.FieldVariable,e.FieldDropdown),e.FieldVariable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.variable);return new e.FieldVariable(n,void 0,void 0,void 0,t)},e.FieldVariable.prototype.SERIALIZABLE=!0,e.FieldVariable.prototype.configure_=function(t){e.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},e.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},e.FieldVariable.prototype.shouldAddBorderRect_=function(){return e.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},e.FieldVariable.prototype.fromXml=function(t){var n=t.getAttribute("id"),r=t.textContent,s=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(n=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,r,s),null!=s&&s!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+e.Xml.domToText(t)+".");this.setValue(n.getId())},e.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},e.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");e.FieldVariable.superClass_.setSourceBlock.call(this,t)},e.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},e.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},e.FieldVariable.prototype.getVariable=function(){return this.variable_},e.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},e.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var n=e.Variables.getVariable(this.sourceBlock_.workspace,t);return n?this.typeIsAllowed_(n=n.type)?t:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},e.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=e.Variables.getVariable(this.sourceBlock_.workspace,t),e.FieldVariable.superClass_.doValueUpdate_.call(this,t)},e.FieldVariable.prototype.typeIsAllowed_=function(t){var n=this.getVariableTypes_();if(!n)return!0;for(var r=0;r<n.length;r++)if(t==n[r])return!0;return!1},e.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},e.FieldVariable.prototype.setTypes_=function(t,n){if(n=n||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var r=!1,s=0;s<t.length;s++)t[s]==n&&(r=!0);if(!r)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=t},e.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},e.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var r=this.getVariableTypes_(),s=0;s<r.length;s++){var c=this.sourceBlock_.workspace.getVariablesOfType(r[s]);n=n.concat(c)}for(n.sort(e.VariableModel.compareByName),r=[],s=0;s<n.length;s++)r[s]=[n[s].name,n[s].getId()];return r.push([e.Msg.RENAME_VARIABLE,e.RENAME_VARIABLE_ID]),e.Msg.DELETE_VARIABLE&&r.push([e.Msg.DELETE_VARIABLE.replace("%1",t),e.DELETE_VARIABLE_ID]),r},e.FieldVariable.prototype.onItemSelected_=function(t,n){if(t=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t==e.RENAME_VARIABLE_ID)return void e.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(t==e.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},e.FieldVariable.prototype.referencesVariables=function(){return!0},e.fieldRegistry.register("field_variable",e.FieldVariable),e.utils.svgPaths={},e.utils.svgPaths.point=function(t,n){return" "+t+","+n+" "},e.utils.svgPaths.curve=function(t,n){return" "+t+n.join("")},e.utils.svgPaths.moveTo=function(t,n){return" M "+t+","+n+" "},e.utils.svgPaths.moveBy=function(t,n){return" m "+t+","+n+" "},e.utils.svgPaths.lineTo=function(t,n){return" l "+t+","+n+" "},e.utils.svgPaths.line=function(t){return" l"+t.join("")},e.utils.svgPaths.lineOnAxis=function(t,n){return" "+t+" "+n+" "},e.utils.svgPaths.arc=function(t,n,r,s){return t+" "+r+" "+r+" "+n+s},e.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=e.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},e.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},e.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var r,n=t.blockStyles;for(r in n)this.blockStyles[r]=this.validatedBlockStyle_(n[r]);this.setDynamicProperties_(t)},e.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},e.blockRendering.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&null!=t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&null!=t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&null!=t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=e.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},e.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},e.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var n="auto_"+t;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(t)),{style:this.blockStyles[n],name:n}},e.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},e.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},e.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(t){var n={};return t&&e.utils.object.mixin(n,t),t=e.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=t.hex,n.colourSecondary=n.colourSecondary?e.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?e.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},e.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#fff",t,.6)||t},e.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#fff",t,.3)||t},e.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&e.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&e.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&e.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},e.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.line([e.utils.svgPaths.point(n,t/4),e.utils.svgPaths.point(2*-n,t/2),e.utils.svgPaths.point(n,t/4)])}},e.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(30,-t),e.utils.svgPaths.point(70,-t),e.utils.svgPaths.point(n,0)])}},e.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(v){var D=-(v=v?-1:1),P=r/2,G=P+2.5,it=P+.5,q=e.utils.svgPaths.point(-n,v*P);return P=e.utils.svgPaths.point(n,v*P),e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(0,v*G),e.utils.svgPaths.point(-n,D*it),q])+e.utils.svgPaths.curve("s",[e.utils.svgPaths.point(n,2.5*D),P])}var n=this.TAB_WIDTH,r=this.TAB_HEIGHT,s=t(!0),c=t(!1);return{type:this.SHAPES.PUZZLE,width:n,height:r,pathDown:c,pathUp:s}},e.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(D){return e.utils.svgPaths.line([e.utils.svgPaths.point(D*s,r),e.utils.svgPaths.point(3*D,0),e.utils.svgPaths.point(D*s,-r)])}var n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,s=(n-3)/2,c=t(1),v=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:c,pathRight:v}},e.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t))}},e.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.moveBy(0,t)+e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,-t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t)),s=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,-t));return{topLeft:n,topRight:r,bottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t)),bottomLeft:s,rightHeight:t}},e.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},e.blockRendering.ConstantProvider.prototype.createDom=function(t,n,r){this.injectCSS_(n,r),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),r=e.utils.dom.createSvgElement(e.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},r),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,e.blockRendering.Debug&&(t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t)},e.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,n){n=this.getCSS_(n),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var r=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=r:((n=document.createElement("style")).id=t,t=document.createTextNode(r),n.appendChild(t),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},e.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},e.blockRendering.Types.LEFT_CORNER=e.blockRendering.Types.LEFT_SQUARE_CORNER|e.blockRendering.Types.LEFT_ROUND_CORNER,e.blockRendering.Types.RIGHT_CORNER=e.blockRendering.Types.RIGHT_SQUARE_CORNER|e.blockRendering.Types.RIGHT_ROUND_CORNER,e.blockRendering.Types.nextTypeValue_=16777216,e.blockRendering.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(e.blockRendering.Types,t)||(e.blockRendering.Types[t]=e.blockRendering.Types.nextTypeValue_,e.blockRendering.Types.nextTypeValue_<<=1),e.blockRendering.Types[t]},e.blockRendering.Types.isField=function(t){return t.type&e.blockRendering.Types.FIELD},e.blockRendering.Types.isHat=function(t){return t.type&e.blockRendering.Types.HAT},e.blockRendering.Types.isIcon=function(t){return t.type&e.blockRendering.Types.ICON},e.blockRendering.Types.isSpacer=function(t){return t.type&e.blockRendering.Types.SPACER},e.blockRendering.Types.isInRowSpacer=function(t){return t.type&e.blockRendering.Types.IN_ROW_SPACER},e.blockRendering.Types.isInput=function(t){return t.type&e.blockRendering.Types.INPUT},e.blockRendering.Types.isExternalInput=function(t){return t.type&e.blockRendering.Types.EXTERNAL_VALUE_INPUT},e.blockRendering.Types.isInlineInput=function(t){return t.type&e.blockRendering.Types.INLINE_INPUT},e.blockRendering.Types.isStatementInput=function(t){return t.type&e.blockRendering.Types.STATEMENT_INPUT},e.blockRendering.Types.isPreviousConnection=function(t){return t.type&e.blockRendering.Types.PREVIOUS_CONNECTION},e.blockRendering.Types.isNextConnection=function(t){return t.type&e.blockRendering.Types.NEXT_CONNECTION},e.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(e.blockRendering.Types.PREVIOUS_CONNECTION|e.blockRendering.Types.NEXT_CONNECTION)},e.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&e.blockRendering.Types.LEFT_ROUND_CORNER},e.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_ROUND_CORNER},e.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&e.blockRendering.Types.LEFT_SQUARE_CORNER},e.blockRendering.Types.isRightSquareCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_SQUARE_CORNER},e.blockRendering.Types.isCorner=function(t){return t.type&e.blockRendering.Types.CORNER},e.blockRendering.Types.isJaggedEdge=function(t){return t.type&e.blockRendering.Types.JAGGED_EDGE},e.blockRendering.Types.isRow=function(t){return t.type&e.blockRendering.Types.ROW},e.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&e.blockRendering.Types.BETWEEN_ROW_SPACER},e.blockRendering.Types.isTopRow=function(t){return t.type&e.blockRendering.Types.TOP_ROW},e.blockRendering.Types.isBottomRow=function(t){return t.type&e.blockRendering.Types.BOTTOM_ROW},e.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(e.blockRendering.Types.TOP_ROW|e.blockRendering.Types.BOTTOM_ROW)},e.blockRendering.Types.isInputRow=function(t){return t.type&e.blockRendering.Types.INPUT_ROW},e.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=e.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Connection=function(t,n){e.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=e.blockRendering.Types.CONNECTION},e.utils.object.inherits(e.blockRendering.Connection,e.blockRendering.Measurable),e.blockRendering.OutputConnection=function(t,n){e.blockRendering.OutputConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.OutputConnection,e.blockRendering.Connection),e.blockRendering.PreviousConnection=function(t,n){e.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.PreviousConnection,e.blockRendering.Connection),e.blockRendering.NextConnection=function(t,n){e.blockRendering.NextConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.NextConnection,e.blockRendering.Connection),e.blockRendering.InputConnection=function(t,n){e.blockRendering.InputConnection.superClass_.constructor.call(this,t,n.connection),this.type|=e.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.InputConnection,e.blockRendering.Connection),e.blockRendering.InlineInput=function(t,n){e.blockRendering.InlineInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},e.utils.object.inherits(e.blockRendering.InlineInput,e.blockRendering.InputConnection),e.blockRendering.StatementInput=function(t,n){e.blockRendering.StatementInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},e.utils.object.inherits(e.blockRendering.StatementInput,e.blockRendering.InputConnection),e.blockRendering.ExternalValueInput=function(t,n){e.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.ExternalValueInput,e.blockRendering.InputConnection),e.blockRendering.Icon=function(t,n){e.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=n,this.isVisible=n.isVisible(),this.type|=e.blockRendering.Types.ICON,t=n.getCorrectedSize(),this.height=t.height,this.width=t.width},e.utils.object.inherits(e.blockRendering.Icon,e.blockRendering.Measurable),e.blockRendering.JaggedEdge=function(t){e.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},e.utils.object.inherits(e.blockRendering.JaggedEdge,e.blockRendering.Measurable),e.blockRendering.Field=function(t,n,r){e.blockRendering.Field.superClass_.constructor.call(this,t),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=e.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=r},e.utils.object.inherits(e.blockRendering.Field,e.blockRendering.Measurable),e.blockRendering.Hat=function(t){e.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},e.utils.object.inherits(e.blockRendering.Hat,e.blockRendering.Measurable),e.blockRendering.SquareCorner=function(t,n){e.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_SQUARE_CORNER:e.blockRendering.Types.LEFT_SQUARE_CORNER)|e.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},e.utils.object.inherits(e.blockRendering.SquareCorner,e.blockRendering.Measurable),e.blockRendering.RoundCorner=function(t,n){e.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_ROUND_CORNER:e.blockRendering.Types.LEFT_ROUND_CORNER)|e.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},e.utils.object.inherits(e.blockRendering.RoundCorner,e.blockRendering.Measurable),e.blockRendering.InRowSpacer=function(t,n){e.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},e.utils.object.inherits(e.blockRendering.InRowSpacer,e.blockRendering.Measurable),e.blockRendering.Row=function(t){this.type=e.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},e.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},e.blockRendering.Row.prototype.getLastInput=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isInput(n))return n;return null},e.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,t=0;n=this.elements[t];t++)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.TopRow=function(t){e.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},e.utils.object.inherits(e.blockRendering.TopRow,e.blockRendering.Row),e.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var n=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,r=t.getPreviousBlock();return!!t.outputConnection||n||!!r&&r.getNextBlock()==t},e.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.TopRow.prototype.measure=function(){for(var c,t=0,n=0,r=0,s=0;c=this.elements[s];s++)n+=c.width,e.blockRendering.Types.isSpacer(c)||(e.blockRendering.Types.isHat(c)?r=Math.max(r,c.ascenderHeight):t=Math.max(t,c.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+r,this.capline=this.ascenderHeight=r,this.widthWithConnectedBlocks=this.width},e.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow=function(t){e.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},e.utils.object.inherits(e.blockRendering.BottomRow,e.blockRendering.Row),e.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},e.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.BottomRow.prototype.measure=function(){for(var c,t=0,n=0,r=0,s=0;c=this.elements[s];s++)n+=c.width,e.blockRendering.Types.isSpacer(c)||(e.blockRendering.Types.isNextConnection(c)?r=Math.max(r,c.height):t=Math.max(t,c.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+r,this.descenderHeight=r,this.widthWithConnectedBlocks=this.width},e.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.SpacerRow=function(t,n,r){e.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=r,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new e.blockRendering.InRowSpacer(this.constants_,r)]},e.utils.object.inherits(e.blockRendering.SpacerRow,e.blockRendering.Row),e.blockRendering.SpacerRow.prototype.measure=function(){},e.blockRendering.InputRow=function(t){e.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},e.utils.object.inherits(e.blockRendering.InputRow,e.blockRendering.Row),e.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var r,t=0,n=0;r=this.elements[n];n++)this.width+=r.width,e.blockRendering.Types.isInput(r)&&(e.blockRendering.Types.isStatementInput(r)?t+=r.connectedBlockWidth:e.blockRendering.Types.isExternalInput(r)&&0!=r.connectedBlockWidth&&(t+=r.connectedBlockWidth-r.connectionWidth)),e.blockRendering.Types.isSpacer(r)||(this.height=Math.max(this.height,r.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},e.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},e.blockRendering.RenderInfo=function(t,n){this.block_=n,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new e.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new e.blockRendering.TopRow(this.constants_),this.bottomRow=new e.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},e.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new e.blockRendering.InputRow(this.constants_);this.inputRows.push(t);for(var s,n=this.block_.getIcons(),r=0;s=n[r];r++){var c=new e.blockRendering.Icon(this.constants_,s);this.isCollapsed&&s.collapseHidden?this.hiddenIcons.push(c):t.elements.push(c)}for(s=null,r=0;n=this.block_.inputList[r];r++)if(n.isVisible()){for(this.shouldStartNewRow_(n,s)&&(this.rows.push(t),t=new e.blockRendering.InputRow(this.constants_),this.inputRows.push(t)),s=0;c=n.fieldRow[s];s++)t.elements.push(new e.blockRendering.Field(this.constants_,c,n));this.addInput_(n,t),s=n}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new e.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},e.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,r=this.topRow.hasLeftSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner;this.topRow.elements.push(new r(this.constants_)),n?(t=new e.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new e.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==e.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,r=this.topRow.hasRightSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner,this.topRow.elements.push(new r(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new e.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.blockRendering.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=t.align)},e.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!(!n||t.type!=e.inputTypes.STATEMENT&&n.type!=e.inputTypes.STATEMENT&&(t.type!=e.inputTypes.VALUE&&t.type!=e.inputTypes.DUMMY||this.isInline))},e.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,t=0;n=this.rows[t];t++){var r=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(var s=0;s<r.length-1;s++){n.elements.push(r[s]);var c=this.getInRowSpacing_(r[s],r[s+1]);n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,c))}n.elements.push(r[r.length-1]),n.endsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(r[r.length-1],null)))}}},e.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t&&n&&e.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var c,t=0,n=0,r=0,s=0;c=this.rows[s];s++){if(c.measure(),n=Math.max(n,c.width),c.hasStatement){var v=c.getLastInput();t=Math.max(t,c.width-v.width)}r=Math.max(r,c.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,s=0;c=this.rows[s];s++)c.hasStatement&&(c.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,r),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},e.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,t=0;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var r=n.width;0<(r=this.getDesiredRowWidth_(n)-r)&&this.addAlignmentPadding_(n,r),e.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},e.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(t,n){var r=t.getFirstSpacer(),s=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align==e.constants.ALIGN.LEFT?s.width+=n:t.align==e.constants.ALIGN.CENTRE?(r.width+=n/2,s.width+=n/2):t.align==e.constants.ALIGN.RIGHT?r.width+=n:s.width+=n,t.width+=n},e.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var n=t.getLastInput(),r=t.width-n.width,s=this.statementEdge;0<(r=s-r)&&this.addAlignmentPadding_(t,r),r=t.width,s=this.getDesiredRowWidth_(t),n.width+=s-r,n.height=Math.max(n.height,t.height),t.width+=s-r,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},e.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var n=0;n<t.length;n++)this.rows.push(t[n]),n!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[n],t[n+1]))},e.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,n){var r=this.getSpacerRowHeight_(t,n),s=this.getSpacerRowWidth_(t,n);return r=new e.blockRendering.SpacerRow(this.constants_,r,s),t.hasStatement&&(r.followsStatement=!0),n.hasStatement&&(r.precedesStatement=!0),r},e.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,n){return e.blockRendering.Types.isSpacer(n)?t.yPos+n.height/2:e.blockRendering.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2):e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:t.yPos+t.height/2},e.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var s,n=t.xPos,r=0;s=t.elements[r];r++)e.blockRendering.Types.isSpacer(s)&&(s.height=t.height),s.xPos=n,s.centerline=this.getElemCenterline_(t,s),n+=s.width},e.blockRendering.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++)s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks),this.recordElemPositions_(s);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},e.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},e.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},e.blockRendering.Debug.prototype.clearElems=function(){for(var n,t=0;n=this.debugElements_[t];t++)e.utils.dom.removeNode(n);this.debugElements_=[]},e.blockRendering.Debug.prototype.drawSpacerRow=function(t,n,r){if(e.blockRendering.Debug.config.rowSpacers){var s=Math.abs(t.height),c=0>t.height;c&&(n-=s),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:r?-(t.xPos+t.width):t.xPos,y:n,width:t.width,height:s,stroke:c?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawSpacerElem=function(t,n,r){if(e.blockRendering.Debug.config.elemSpacers){n=Math.abs(t.width);var s=0>t.width,c=s?t.xPos-n:t.xPos;r&&(c=-(c+n)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:c,y:t.centerline-t.height/2,width:n,height:t.height,stroke:"pink",fill:s?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedElem=function(t,n){if(e.blockRendering.Debug.config.elems){var r=t.xPos;n&&(r=-(r+t.width)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n=t.centerline-t.height/2,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isField(t)&&t.field instanceof e.FieldLabel&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}e.blockRendering.Types.isInput(t)&&e.blockRendering.Debug.config.connections&&this.drawConnection(t.connectionModel)},e.blockRendering.Debug.prototype.drawConnection=function(t){if(e.blockRendering.Debug.config.connections){if(t.type==e.connectionTypes.INPUT_VALUE)var n=4,r="magenta",s="none";else t.type==e.connectionTypes.OUTPUT_VALUE?(n=2,s=r="magenta"):t.type==e.connectionTypes.NEXT_STATEMENT?(n=4,r="goldenrod",s="none"):t.type==e.connectionTypes.PREVIOUS_STATEMENT&&(n=2,s=r="goldenrod");this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:n,fill:s,stroke:r},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedRow=function(t,n,r){e.blockRendering.Debug.config.rows&&(this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:r?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isTopOrBottomRow(t)||e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:r?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},e.blockRendering.Debug.prototype.drawRowWithElements=function(t,n,r){for(var s=0,c=t.elements.length;s<c;s++){var v=t.elements[s];v?e.blockRendering.Types.isSpacer(v)?this.drawSpacerElem(v,t.height,r):this.drawRenderedElem(v,r):console.warn("A row has an undefined or null element.",t,v)}this.drawRenderedRow(t,n,r)},e.blockRendering.Debug.prototype.drawBoundingBox=function(t){if(e.blockRendering.Debug.config.blockBounds){var n=t.RTL?-t.width:0;this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockRenderDebug",x:n=t.RTL?-t.widthWithChildren:0,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawDebug=function(t,n){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var c,r=0,s=0;c=n.rows[s];s++)e.blockRendering.Types.isBetweenRowSpacer(c)?this.drawSpacerRow(c,r,n.RTL):this.drawRowWithElements(c,r,n.RTL),r+=c.height;t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(t.pathObject.svgPath)},e.blockRendering.Debug.prototype.drawRender=function(t){e.blockRendering.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))},e.blockRendering.Drawer=function(t,n){this.block_=t,this.info_=n,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},e.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},e.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,t=0;n=this.info_.hiddenIcons[t];t++)n.icon.iconGroup_.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var n=this.info_.rows[t];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},e.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,n=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var s,r=0;s=n[r];r++)e.blockRendering.Types.isLeftRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:e.blockRendering.Types.isRightRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:e.blockRendering.Types.isPreviousConnection(s)?this.outlinePath_+=s.shape.pathLeft:e.blockRendering.Types.isHat(s)?this.outlinePath_+=this.constants_.START_HAT.path:e.blockRendering.Types.isSpacer(s)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",s.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("v",t.height)},e.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+e.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},e.blockRendering.Drawer.prototype.drawValueInput_=function(t){var n=t.getLastInput();this.positionExternalValueConnection_(t);var r="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+r+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight)},e.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),r=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var s=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",r)+n+e.utils.svgPaths.lineOnAxis("v",s)+this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,n=t.elements;this.positionNextConnection_();for(var v,r=0,s="",c=n.length-1;v=n[c];c--)e.blockRendering.Types.isNextConnection(v)?s+=v.shape.pathRight:e.blockRendering.Types.isLeftSquareCorner(v)?s+=e.utils.svgPaths.lineOnAxis("H",t.xPos):e.blockRendering.Types.isLeftRoundedCorner(v)?s+=this.constants_.OUTSIDE_CORNERS.bottomLeft:e.blockRendering.Types.isRightRoundedCorner(v)?(s+=this.constants_.OUTSIDE_CORNERS.bottomRight,r=this.constants_.OUTSIDE_CORNERS.rightHeight):e.blockRendering.Types.isSpacer(v)&&(s+=e.utils.svgPaths.lineOnAxis("h",-1*v.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-r),this.outlinePath_+=s},e.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var n=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",n)+t}this.outlinePath_+="z"},e.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,t=0;n=this.info_.rows[t];t++)for(var s,r=0;s=n.elements[r];r++)e.blockRendering.Types.isInlineInput(s)?this.drawInlineInput_(s):(e.blockRendering.Types.isIcon(s)||e.blockRendering.Types.isField(s))&&this.layoutField_(s)},e.blockRendering.Drawer.prototype.layoutField_=function(t){if(e.blockRendering.Types.isField(t))var n=t.field.getSvgRoot();else e.blockRendering.Types.isIcon(t)&&(n=t.icon.iconGroup_);var r=t.centerline-t.height/2,s=t.xPos,c="";this.info_.RTL&&(s=-(s+t.width),t.flipRtl&&(s+=t.width,c="scale(-1 1)")),e.blockRendering.Types.isIcon(t)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+s+","+r+")"),t.icon.computeIconLocation()):n.setAttribute("transform","translate("+s+","+r+")"+c),this.info_.isInsertionMarker&&n.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var n=t.width,r=t.height,s=t.connectionOffsetY,c=t.connectionHeight+s;this.inlinePath_+=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-r/2)+e.utils.svgPaths.lineOnAxis("v",s)+t.shape.pathDown+e.utils.svgPaths.lineOnAxis("v",r-c)+e.utils.svgPaths.lineOnAxis("h",n-t.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",-r)+"z",this.positionInlineInputConnection_(t)},e.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var r=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,t.centerline-t.height/2+t.connectionOffsetY)}},e.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.statementEdge+n.notchOffset;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.width;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var n=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},e.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,r=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-r:r,t.baseline)}},e.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},e.Events.MarkerMove=function(t,n,r,s){var c=t?t.workspace.id:void 0;s&&s.getType()==e.ASTNode.types.WORKSPACE&&(c=s.getLocation().id),e.Events.MarkerMove.superClass_.constructor.call(this,c),this.blockId=t?t.id:null,this.oldNode=r,this.newNode=s,this.isCursor=n},e.utils.object.inherits(e.Events.MarkerMove,e.Events.UiBase),e.Events.MarkerMove.prototype.type=e.Events.MARKER_MOVE,e.Events.MarkerMove.prototype.toJson=function(){var t=e.Events.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},e.Events.MarkerMove.prototype.fromJson=function(t){e.Events.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},e.registry.register(e.registry.Type.EVENT,e.Events.MARKER_MOVE,e.Events.MarkerMove),e.blockRendering.MarkerSvg=function(t,n,r){this.workspace_=t,this.marker_=r,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=r.colour||t},e.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",e.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,e.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},e.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},e.blockRendering.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?e.blockRendering.MarkerSvg.CURSOR_CLASS:e.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},e.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},e.blockRendering.MarkerSvg.prototype.draw=function(t,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var r=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||r,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(t,n),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},e.blockRendering.MarkerSvg.prototype.showAtLocation_=function(t){var n=t.getLocation().type;t.getType()==e.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()==e.ASTNode.types.OUTPUT?this.showWithOutput_(t):n==e.connectionTypes.INPUT_VALUE?this.showWithInput_(t):n==e.connectionTypes.NEXT_STATEMENT?this.showWithNext_(t):t.getType()==e.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()==e.ASTNode.types.FIELD?this.showWithField_(t):t.getType()==e.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()==e.ASTNode.types.STACK&&this.showWithStack_(t)},e.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var n=(t=t.getSourceBlock()).width,r=t.height,s=r*e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,c=this.constants_.CURSOR_BLOCK_PADDING;if(t.previousConnection){var v=this.constants_.shapeFor(t.previousConnection);this.positionPrevious_(n,c,s,v)}else t.outputConnection?(v=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(n,r,v)):this.positionBlock_(n,c,s);this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var n=t.getWsCoordinate();t=n.x,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var n=(t=t.getLocation()).getSize().width,r=t.getSize().height;this.positionRect_(0,0,n,r),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var n=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(n),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var n=t.getLocation();t=n.getSourceBlock();var r=0;n=n.getOffsetInBlock().y;var s=t.getHeightWidth().width;this.workspace_.RTL&&(r=-s),this.positionLine_(r,n,s),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var n=(t=t.getLocation()).getHeightWidth(),r=n.width+this.constants_.CURSOR_STACK_PADDING,s=-this.constants_.CURSOR_STACK_PADDING/2,v=s;this.workspace_.RTL&&(v=-(r+s)),this.positionRect_(v,-this.constants_.CURSOR_STACK_PADDING/2,r,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},e.blockRendering.MarkerSvg.prototype.positionBlock_=function(t,n,r){t=e.utils.svgPaths.moveBy(-n,r)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",r),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionInput_=function(t){var n=t.getOffsetInBlock().x,r=t.getOffsetInBlock().y;t=e.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+n+","+r+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},e.blockRendering.MarkerSvg.prototype.positionLine_=function(t,n,r){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",r),this.currentMarkerSvg=this.markerSvgLine_},e.blockRendering.MarkerSvg.prototype.positionOutput_=function(t,n,r){t=e.utils.svgPaths.moveBy(t,0)+e.utils.svgPaths.lineOnAxis("h",-(t-r.width))+e.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+r.pathDown+e.utils.svgPaths.lineOnAxis("V",n)+e.utils.svgPaths.lineOnAxis("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionPrevious_=function(t,n,r,s){t=e.utils.svgPaths.moveBy(-n,r)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+s.pathLeft+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",r),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionRect_=function(t,n,r,s){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",r),this.markerSvgRect_.setAttribute("height",s),this.currentMarkerSvg=this.markerSvgRect_},e.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},e.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},e.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(t,n){var r=n.getSourceBlock();t=new(e.Events.get(e.Events.MARKER_MOVE))(r,this.isCursor(),t,n),e.Events.fire(t)},e.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},e.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerSvgLine_),e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},e.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",t=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},e.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.blockRendering.PathObject=function(t,n,r){this.constants=r,this.svgRoot=t,this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},e.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},e.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},e.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},e.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},e.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},e.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},e.blockRendering.PathObject.prototype.setClass_=function(t,n){n?e.utils.dom.addClass(this.svgRoot,t):e.utils.dom.removeClass(this.svgRoot,t)},e.blockRendering.PathObject.prototype.updateHighlighted=function(t){this.svgPath.setAttribute("filter",t?"url(#"+this.constants.embossFilterId+")":"none")},e.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},e.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},e.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},e.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},e.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},e.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},e.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,n){},e.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},e.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},e.blockRendering.Renderer.prototype.init=function(t,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,e.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(t),this.constants_.init()},e.blockRendering.Renderer.prototype.createDom=function(t,n){this.constants_.createDom(t,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},e.blockRendering.Renderer.prototype.refreshDom=function(t,n){var r=this.getConstants();r.dispose(),this.constants_=this.makeConstants_(),this.overrides&&e.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=r.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(t,n)},e.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},e.blockRendering.Renderer.prototype.makeConstants_=function(){return new e.blockRendering.ConstantProvider},e.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new e.blockRendering.RenderInfo(this,t)},e.blockRendering.Renderer.prototype.makeDrawer_=function(t,n){return new e.blockRendering.Drawer(t,n)},e.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!e.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new e.blockRendering.Debug(this.getConstants())},e.blockRendering.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.blockRendering.MarkerSvg(t,this.getConstants(),n)},e.blockRendering.Renderer.prototype.makePathObject=function(t,n){return new e.blockRendering.PathObject(t,n,this.constants_)},e.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},e.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},e.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(t,n,r){return!!e.Connection.getConnectionForOrphanedConnection(t,r===e.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},e.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(t,n,r){return n.type==e.connectionTypes.OUTPUT_VALUE||n.type==e.connectionTypes.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(r,t.targetBlock(),n.type)?e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},e.blockRendering.Renderer.prototype.render=function(t){e.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(t);n.measure(),this.makeDrawer_(t,n).draw()},e.geras={},e.geras.ConstantProvider=function(){e.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},e.utils.object.inherits(e.geras.ConstantProvider,e.blockRendering.ConstantProvider),e.geras.ConstantProvider.prototype.getCSS_=function(t){return e.geras.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},e.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},e.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},e.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var r,n=0;r=t.elements[n];n++)e.blockRendering.Types.isLeftSquareCorner(r)?this.steps_+=this.highlightConstants_.START_POINT:e.blockRendering.Types.isLeftRoundedCorner(r)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):e.blockRendering.Types.isPreviousConnection(r)?this.steps_+=this.notchPaths_.pathLeft:e.blockRendering.Types.isHat(r)?this.steps_+=this.startPaths_.path(this.RTL_):e.blockRendering.Types.isSpacer(r)&&0!=r.width&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",r.xPos+r.width-this.highlightOffset_));this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},e.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+e.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},e.geras.Highlighter.prototype.drawValueInput=function(t){var n=t.getLastInput();if(this.RTL_){var r=t.height-n.connectionHeight;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",r)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.Highlighter.prototype.drawStatementInput=function(t){var n=t.getLastInput();if(this.RTL_){var r=t.height-2*this.insideCornerPaths_.height;this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",r)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)},e.geras.Highlighter.prototype.drawRightSideRow=function(t){var n=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n),t.height>this.highlightOffset_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},e.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=e.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):e.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=e.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},e.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=e.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e.blockRendering.Types.isLeftRoundedCorner((t=this.info_.topRow).elements[0])?this.steps_+=e.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},e.geras.Highlighter.prototype.drawInlineInput=function(t){var n=this.highlightOffset_,r=t.xPos+t.connectionWidth,s=t.centerline-t.height/2,c=t.width-t.connectionWidth,v=s+n;this.RTL_?(s=t.connectionOffsetY-n,t=t.height-(t.connectionOffsetY+t.connectionHeight)+n,this.inlineSteps_+=e.utils.svgPaths.moveTo(r-n,v)+e.utils.svgPaths.lineOnAxis("v",s)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",t)+e.utils.svgPaths.lineOnAxis("h",c)):this.inlineSteps_+=e.utils.svgPaths.moveTo(t.xPos+t.width+n,v)+e.utils.svgPaths.lineOnAxis("v",t.height)+e.utils.svgPaths.lineOnAxis("h",-c)+e.utils.svgPaths.moveTo(r,s+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.InlineInput=function(t,n){e.geras.InlineInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.InlineInput,e.blockRendering.InlineInput),e.geras.StatementInput=function(t,n){e.geras.StatementInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.StatementInput,e.blockRendering.StatementInput),e.geras.RenderInfo=function(t,n){e.geras.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.geras.RenderInfo,e.blockRendering.RenderInfo),e.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.geras.RenderInfo.prototype.populateBottomRow_=function(){e.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},e.geras.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.geras.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.geras.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=t.align)},e.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var r,t=!1,n=0;r=this.rows[n];n++)r.hasExternalInput&&(t=!0);for(n=0;r=this.rows[n];n++){var s=r.elements;if(r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(var c=0;c<s.length-1;c++){r.elements.push(s[c]);var v=this.getInRowSpacing_(s[c],s[c+1]);r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v))}r.elements.push(s[s.length-1]),r.endsWithElemSpacer()&&(v=this.getInRowSpacing_(s[s.length-1],null),t&&r.hasDummyInput&&(v+=this.constants_.TAB_WIDTH),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v)))}}},e.geras.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&(!n||e.blockRendering.Types.isStatementInput(n)))return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(e.blockRendering.Types.isLeftRoundedCorner(t)&&n){if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||!t.hasStatement&&n.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var r=t.yPos;return e.blockRendering.Types.isField(n)||e.blockRendering.Types.isIcon(n)?(r+=n.height/2,(t.hasInlineInput||t.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(r+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):r=e.blockRendering.Types.isInlineInput(n)?r+n.height/2:r+t.height/2,r},e.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var s,t=0,n=null,r=this.rows.length-1;s=this.rows[r];r--)s.nextRightEdge=t,e.blockRendering.Types.isInputRow(s)&&(s.hasStatement&&this.alignStatementRow_(s),n&&n.hasStatement&&s.width<n.width?s.nextRightEdge=n.width:t=s.width,n=s);for(r=t=0;s=this.rows[r];r++)s.hasStatement?t=this.getDesiredRowWidth_(s):e.blockRendering.Types.isSpacer(s)?s.width=Math.max(t,s.nextRightEdge):(0<(t=Math.max(t,s.nextRightEdge)-s.width)&&this.addAlignmentPadding_(s,t),t=s.width)}else e.geras.RenderInfo.superClass_.alignRowElements_.call(this)},e.geras.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:e.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.geras.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var c=n-this.topRow.ascenderHeight;s==this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,n+=c),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},e.geras.Drawer=function(t,n){e.geras.Drawer.superClass_.constructor.call(this,t,n),this.highlighter_=new e.geras.Highlighter(n)},e.utils.object.inherits(e.geras.Drawer,e.blockRendering.Drawer),e.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),e.geras.Drawer.superClass_.drawTop_.call(this)},e.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),e.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},e.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),e.geras.Drawer.superClass_.drawValueInput_.call(this,t)},e.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),e.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},e.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),e.geras.Drawer.superClass_.drawBottom_.call(this)},e.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),e.geras.Drawer.superClass_.drawLeft_.call(this)},e.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),e.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},e.geras.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var r=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,t.centerline-t.height/2+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(r=this.info_.RTL?-1*r:r+this.constants_.DARK_PATH_OFFSET,t.yPos+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,r=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-r:r)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},e.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=e.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},e.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},e.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(t+n)-n,s=e.utils.svgPaths.moveBy(r,r)+e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-r-n,t-r)),c=e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t+n,t+n)),v=e.utils.svgPaths.moveBy(r,-r)+e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t-r,r+n));return{width:t+n,height:t,pathTop:function(D){return D?s:""},pathBottom:function(D){return D?c:v}}},e.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(t-n)+n,s=e.utils.svgPaths.moveBy(r,r)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t-r,-r+n)),c=e.utils.svgPaths.moveBy(n,t)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t,-t+n)),v=-r,D=e.utils.svgPaths.moveBy(r,v)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(-r+n,-v-t));return{height:t,topLeft:function(P){return P?s:c},bottomLeft:function(){return D}}},e.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,r=e.utils.svgPaths.moveBy(-2,3.4-n)+e.utils.svgPaths.lineTo(-.45*t,-2.1),s=e.utils.svgPaths.lineOnAxis("v",2.5)+e.utils.svgPaths.moveBy(.97*-t,2.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(.05*-t,10),e.utils.svgPaths.point(.3*t,9.5)])+e.utils.svgPaths.moveBy(.67*t,-1.9)+e.utils.svgPaths.lineOnAxis("v",2.5),c=e.utils.svgPaths.lineOnAxis("v",-1.5)+e.utils.svgPaths.moveBy(-.92*t,-.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(-.19*t,-5.5),e.utils.svgPaths.point(0,-11)])+e.utils.svgPaths.moveBy(.92*t,1),v=e.utils.svgPaths.moveBy(-5,n-.7)+e.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:n,pathUp:function(D){return D?r:c},pathDown:function(D){return D?s:v}}},e.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:e.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},e.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:e.utils.svgPaths.lineTo(5.1,2.6)+e.utils.svgPaths.moveBy(-10.2,6.8)+e.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},e.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,n=e.utils.svgPaths.moveBy(25,-8.7)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(29.7,-6.2),e.utils.svgPaths.point(57.2,-.5),e.utils.svgPaths.point(75,8.7)]),r=e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(17.8,-9.2),e.utils.svgPaths.point(45.3,-14.9),e.utils.svgPaths.point(75,-8.7)])+e.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(s){return s?n:r}}},e.geras.PathObject=function(t,n,r){this.constants=r,this.svgRoot=t,this.svgPathDark=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},e.utils.object.inherits(e.geras.PathObject,e.blockRendering.PathObject),e.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},e.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},e.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},e.geras.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),e.geras.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},e.geras.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=e.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},e.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},e.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.geras.PathObject.prototype.updateDisabled_=function(t){e.geras.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")},e.geras.Renderer=function(t){e.geras.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null},e.utils.object.inherits(e.geras.Renderer,e.blockRendering.Renderer),e.geras.Renderer.prototype.init=function(t,n){e.geras.Renderer.superClass_.init.call(this,t,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},e.geras.Renderer.prototype.refreshDom=function(t,n){e.geras.Renderer.superClass_.refreshDom.call(this,t,n),this.getHighlightConstants().init()},e.geras.Renderer.prototype.makeConstants_=function(){return new e.geras.ConstantProvider},e.geras.Renderer.prototype.makeRenderInfo_=function(t){return new e.geras.RenderInfo(this,t)},e.geras.Renderer.prototype.makeDrawer_=function(t,n){return new e.geras.Drawer(t,n)},e.geras.Renderer.prototype.makePathObject=function(t,n){return new e.geras.PathObject(t,n,this.getConstants())},e.geras.Renderer.prototype.makeHighlightConstants_=function(){return new e.geras.HighlightConstantProvider(this.getConstants())},e.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},e.blockRendering.register("geras",e.geras.Renderer),e.thrasos={},e.thrasos.RenderInfo=function(t,n){e.thrasos.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.thrasos.RenderInfo,e.blockRendering.RenderInfo),e.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var r,t=!1,n=0;r=this.rows[n];n++)r.hasExternalInput&&(t=!0);for(n=0;r=this.rows[n];n++){var s=r.elements;r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0])));for(var c=0;c<s.length-1;c++){r.elements.push(s[c]);var v=this.getInRowSpacing_(s[c],s[c+1]);r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v))}r.elements.push(s[s.length-1]),r.endsWithElemSpacer()&&(v=this.getInRowSpacing_(s[s.length-1],null),t&&r.hasDummyInput&&(v+=this.constants_.TAB_WIDTH),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,v)))}},e.thrasos.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&!n)return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))return n.notchOffset}return e.blockRendering.Types.isLeftRoundedCorner(t)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||t.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var r=t.yPos;return e.blockRendering.Types.isField(n)&&t.hasStatement?r+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):r+t.height/2},e.thrasos.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var c=n-this.topRow.ascenderHeight;s==this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,n+=c),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline},e.thrasos.Renderer=function(t){e.thrasos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.thrasos.Renderer,e.blockRendering.Renderer),e.thrasos.Renderer.prototype.makeRenderInfo_=function(t){return new e.thrasos.RenderInfo(this,t)},e.blockRendering.register("thrasos",e.thrasos.Renderer),e.zelos={},e.zelos.ConstantProvider=function(){e.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},e.utils.object.inherits(e.zelos.ConstantProvider,e.blockRendering.ConstantProvider),e.zelos.ConstantProvider.prototype.setFontConstants_=function(t){e.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},e.zelos.ConstantProvider.prototype.init=function(){e.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},e.zelos.ConstantProvider.prototype.setDynamicProperties_=function(t){e.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},e.zelos.ConstantProvider.prototype.dispose=function(){e.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&e.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&e.utils.dom.removeNode(this.replacementGlowFilter_)},e.zelos.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(25,-t),e.utils.svgPaths.point(71,-t),e.utils.svgPaths.point(n,0)])}},e.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(r,s,c){var v=r/2;return e.utils.svgPaths.lineTo(-(c=c?-1:1)*(v=v>n?n:v),r=(s?-1:1)*r/2)+e.utils.svgPaths.lineTo(c*v,r)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(r){return(r/=2)>n?n:r},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeRounded=function(){function t(s,c,v){var D=s>r?s-r:0;return e.utils.svgPaths.arc("a","0 0,1",s=(s>r?r:s)/2,e.utils.svgPaths.point((c?-1:1)*s,(c?-1:1)*s))+e.utils.svgPaths.lineOnAxis("v",(v?1:-1)*D)+e.utils.svgPaths.arc("a","0 0,1",s,e.utils.svgPaths.point((c?1:-1)*s,(c?-1:1)*s))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,r=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(s){return(s/=2)>n?n:s},height:function(s){return s},connectionOffsetY:function(s){return s/2},connectionOffsetX:function(s){return-s},pathDown:function(s){return t(s,!1,!1)},pathUp:function(s){return t(s,!0,!1)},pathRightDown:function(s){return t(s,!1,!0)},pathRightUp:function(s){return t(s,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeSquared=function(){function t(r,s,c){return r-=2*n,e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?-1:1)*n,(s?-1:1)*n))+e.utils.svgPaths.lineOnAxis("v",(c?1:-1)*r)+e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?1:-1)*n,(s?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(r){return n},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.shapeFor=function(t){var n=t.getCheck();switch(!n&&t.targetConnection&&(n=t.targetConnection.getCheck()),t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:if(null!=(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},e.zelos.ConstantProvider.prototype.makeNotch=function(){function t(it){return e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(it*c/2,0),e.utils.svgPaths.point(it*c*3/4,D/2),e.utils.svgPaths.point(it*c,D)])+e.utils.svgPaths.line([e.utils.svgPaths.point(it*c,v)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(it*c/4,D/2),e.utils.svgPaths.point(it*c/2,D),e.utils.svgPaths.point(it*c,D)])+e.utils.svgPaths.lineOnAxis("h",it*s)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(it*c/2,0),e.utils.svgPaths.point(it*c*3/4,-D/2),e.utils.svgPaths.point(it*c,-D)])+e.utils.svgPaths.line([e.utils.svgPaths.point(it*c,-v)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(it*c/4,-D/2),e.utils.svgPaths.point(it*c/2,-D),e.utils.svgPaths.point(it*c,-D)])}var n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,s=n/3,c=s/3,v=r/2,D=v/2,P=t(1),G=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:P,pathRight:G}},e.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t));return{width:t,height:t,pathTop:n,pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t)),rightWidth:t,rightHeight:t,pathTopRight:r,pathBottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t))}},e.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#000",t,.15)||t},e.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#000",t,.25)||t},e.zelos.ConstantProvider.prototype.createDom=function(t,n,r){e.zelos.ConstantProvider.superClass_.createDom.call(this,t,n,r),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),r=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},e.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.zelos.TopRow=function(t){e.zelos.TopRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.TopRow,e.blockRendering.TopRow),e.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection},e.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.BottomRow=function(t){e.zelos.BottomRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.BottomRow,e.blockRendering.BottomRow),e.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},e.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.RightConnectionShape=function(t){e.zelos.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},e.utils.object.inherits(e.zelos.RightConnectionShape,e.blockRendering.Measurable),e.zelos.RenderInfo=function(t,n){e.zelos.RenderInfo.superClass_.constructor.call(this,t,n),this.topRow=new e.zelos.TopRow(this.constants_),this.bottomRow=new e.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new e.zelos.RightConnectionShape(this.constants_):null},e.utils.object.inherits(e.zelos.RenderInfo,e.blockRendering.RenderInfo),e.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.zelos.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!!n&&(t.type==e.inputTypes.STATEMENT||n.type==e.inputTypes.STATEMENT||(t.type==e.inputTypes.VALUE||t.type==e.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},e.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):e.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.zelos.RenderInfo.prototype.getInRowSpacing_=function(t,n){return t&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&e.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){if(e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var r=e.blockRendering.Types.isInputRow(t)&&t.hasStatement,s=e.blockRendering.Types.isInputRow(n)&&n.hasStatement;return s||r?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),s&&r?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):e.blockRendering.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):e.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){var r=this.width-this.startX;return e.blockRendering.Types.isInputRow(t)&&t.hasStatement||e.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(r,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):r},e.zelos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(t.hasStatement&&!e.blockRendering.Types.isSpacer(n)&&!e.blockRendering.Types.isStatementInput(n))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(e.blockRendering.Types.isInlineInput(n)){var r=n.connectedBlock;if(r&&r.outputConnection&&r.nextConnection)return t.yPos+r.height/2}return e.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,t,n)},e.zelos.RenderInfo.prototype.addInput_=function(t,n){t.type==e.inputTypes.DUMMY&&n.hasDummyInput&&n.align==e.constants.ALIGN.LEFT&&t.align==e.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=t),e.zelos.RenderInfo.superClass_.addInput_.call(this,t,n)},e.zelos.RenderInfo.prototype.addAlignmentPadding_=function(t,n){if(t.rightAlignedDummyInput){for(var r,c,s=0;(c=t.elements[s])&&(e.blockRendering.Types.isSpacer(c)&&(r=c),!e.blockRendering.Types.isField(c)||c.parentInput!=t.rightAlignedDummyInput);s++);if(r)return r.width+=n,void(t.width+=n)}e.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,n)},e.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=t,r=2;r<this.rows.length-1;r+=2){var s=this.rows[r-1],c=this.rows[r],v=this.rows[r+1];if(s=2==r?!!this.topRow.hasPreviousConnection:!!s.followsStatement,v=r+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!v.precedesStatement,e.blockRendering.Types.isInputRow(c)&&c.hasStatement)c.measure(),n=c.width-c.getLastInput().width+t;else if(s&&(2==r||v)&&e.blockRendering.Types.isInputRow(c)&&!c.hasStatement){v=c.xPos,s=null;for(var P,D=0;P=c.elements[D];D++)e.blockRendering.Types.isSpacer(P)&&(s=P),!(s&&(e.blockRendering.Types.isField(P)||e.blockRendering.Types.isInput(P))&&v<n)||e.blockRendering.Types.isField(P)&&(P.field instanceof e.FieldLabel||P.field instanceof e.FieldImage)||(s.width+=n-v),v+=P.width}}},e.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var r,t=0,n=0;r=this.rows[n];n++)r.yPos=t,t+=r.height;this.height=t,t=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),r=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(r=n,this.rightSide.height=t,this.rightSide.width=r,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+r),this.startX=n,this.width+=n+r,this.widthWithChildren+=n+r}},e.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var r,t=0,n=0;r=this.rows[n];n++)if(e.blockRendering.Types.isInputRow(r)){t=r.elements[r.elements.length-2];var s=this.getNegativeSpacing_(r.elements[1]),c=this.getNegativeSpacing_(t),v=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(t=s+c)<v&&(s=(t=this.width-v)/2,c=t/2),r.elements.unshift(new e.blockRendering.InRowSpacer(this.constants_,-s)),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,-c))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,n=0;r=this.rows[n];n++)e.blockRendering.Types.isTopOrBottomRow(r)&&(r.elements[1].width-=t,r.elements[1].widthWithConnectedBlocks-=t),r.width-=t,r.widthWithConnectedBlocks-=t}},e.zelos.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var n=this.outputConnection.width,r=this.outputConnection.shape.type,s=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return r===s.SHAPES.ROUND?n-(r=this.height/2>(r=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?r:this.height/2)*(1-Math.sin(Math.acos((r-this.constants_.SMALL_PADDING)/r))):0;if(e.blockRendering.Types.isInlineInput(t)){var c=t.connectedBlock;return t=c?c.pathObject.outputShapeType:t.shape.type,c&&c.outputConnection&&(c.statementInputCount||c.nextConnection)||r==s.SHAPES.HEXAGONAL&&r!=t?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][t]}return e.blockRendering.Types.isField(t)?r==s.SHAPES.ROUND&&t.field instanceof e.FieldTextInput?n-2.75*s.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][0]:e.blockRendering.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},e.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var n=this.rows[t-1],r=this.rows[t],s=this.rows[t+1],c=2==t,v=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement;if(c?this.topRow.hasPreviousConnection:n.followsStatement){var D=3==r.elements.length&&(r.elements[1].field instanceof e.FieldLabel||r.elements[1].field instanceof e.FieldImage);if(!c&&D)n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.MEDIUM_PADDING;else if(c||v){if(v){for(c=!1,v=0;D=r.elements[v];v++)if(e.blockRendering.Types.isInlineInput(D)&&D.connectedBlock&&!D.connectedBlock.isShadow()&&40<=D.connectedBlock.getHeightWidth().height){c=!0;break}c&&(n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},e.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),e.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},e.zelos.Drawer=function(t,n){e.zelos.Drawer.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.zelos.Drawer,e.blockRendering.Drawer),e.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},e.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):e.zelos.Drawer.superClass_.drawOutline_.call(this)},e.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():e.zelos.Drawer.superClass_.drawLeft_.call(this)},e.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=t.height-(t.precedesStatement?n:0))?e.utils.svgPaths.lineOnAxis("V",t.yPos+n):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},e.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},e.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",t.width)},e.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",-t.width)},e.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var n=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var r=t.width-2*t.connectionWidth;t=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-t.height/2)+e.utils.svgPaths.lineOnAxis("h",r)+t.shape.pathRightDown(t.height)+e.utils.svgPaths.lineOnAxis("h",-r)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(n,t)}},e.zelos.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),r=n.xPos+n.notchOffset+n.shape.width,s=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,c=t.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",r)+s+e.utils.svgPaths.lineOnAxis("v",c)+n+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.zelos.MarkerSvg=function(t,n,r){e.zelos.MarkerSvg.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.zelos.MarkerSvg,e.blockRendering.MarkerSvg),e.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var n=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(n),this.showCurrent_()},e.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var n=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(t),this.showCurrent_()},e.zelos.MarkerSvg.prototype.positionCircle_=function(t,n){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},e.zelos.MarkerSvg.prototype.hide=function(){e.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},e.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(e.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},e.zelos.MarkerSvg.prototype.applyColour_=function(t){e.zelos.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},e.zelos.PathObject=function(t,n,r){e.zelos.PathObject.superClass_.constructor.call(this,t,n,r),this.constants=r,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},e.utils.object.inherits(e.zelos.PathObject,e.blockRendering.PathObject),e.zelos.PathObject.prototype.setPath=function(t){e.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},e.zelos.PathObject.prototype.applyColour=function(t){for(var n in e.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.flipRTL=function(){for(var t in e.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},e.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},e.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},e.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,n){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(n?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},e.zelos.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},e.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},e.zelos.PathObject.prototype.setOutlinePath=function(t,n){(t=this.getOutlinePath_(t)).setAttribute("d",n),t.setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},e.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},e.zelos.Renderer=function(t){e.zelos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.Renderer,e.blockRendering.Renderer),e.zelos.Renderer.prototype.makeConstants_=function(){return new e.zelos.ConstantProvider},e.zelos.Renderer.prototype.makeRenderInfo_=function(t){return new e.zelos.RenderInfo(this,t)},e.zelos.Renderer.prototype.makeDrawer_=function(t,n){return new e.zelos.Drawer(t,n)},e.zelos.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.zelos.MarkerSvg(t,this.getConstants(),n)},e.zelos.Renderer.prototype.makePathObject=function(t,n){return new e.zelos.PathObject(t,n,this.getConstants())},e.zelos.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!=e.connectionTypes.INPUT_VALUE&&t.type!==e.connectionTypes.OUTPUT_VALUE},e.zelos.Renderer.prototype.getConnectionPreviewMethod=function(t,n,r){return n.type==e.connectionTypes.OUTPUT_VALUE?t.isConnected()?e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:e.zelos.Renderer.superClass_.getConnectionPreviewMethod(t,n,r)},e.blockRendering.register("zelos",e.zelos.Renderer),e.Themes.Dark=e.Theme.defineTheme("dark",{base:e.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),e.Themes.Deuteranopia={},e.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},e.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},e.Themes.Deuteranopia=new e.Theme("deuteranopia",e.Themes.Deuteranopia.defaultBlockStyles,e.Themes.Deuteranopia.categoryStyles),e.Themes.HighContrast={},e.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},e.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},e.Themes.HighContrast=new e.Theme("highcontrast",e.Themes.HighContrast.defaultBlockStyles,e.Themes.HighContrast.categoryStyles),e.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),e.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),e.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),e.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),e.Themes.Tritanopia={},e.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},e.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},e.Themes.Tritanopia=new e.Theme("tritanopia",e.Themes.Tritanopia.defaultBlockStyles,e.Themes.Tritanopia.categoryStyles),e.requires={},e}.apply(W,[]))&&(H.exports=g)},96116:function(H,W,f){var g,e;g=[f(83801)],void 0!==(e=function(t){"use strict";return t.Blocks={},t.Blocks}.apply(W,g))&&(H.exports=e)},83801:function(H,W,f){var g,e;g=[f(33164)],void 0!==(e=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var r=n.newBlock("lists_create_with_container");r.initSvg();for(var s=r.getInput("STACK").connection,c=0;c<this.itemCount_;c++){var v=n.newBlock("lists_create_with_item");v.initSvg(),s.connect(v.previousConnection),s=v.nextConnection}return r},compose:function(n){var r=n.getInputTargetBlock("STACK");for(n=[];r&&!r.isInsertionMarker();)n.push(r.valueConnection_),r=r.nextConnection&&r.nextConnection.targetBlock();for(r=0;r<this.itemCount_;r++){var s=this.getInput("ADD"+r).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),r=0;r<this.itemCount_;r++)t.Mutator.reconnect(n[r],this,"ADD"+r)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var r=0;n;){var s=this.getInput("ADD"+r);n.valueConnection_=s&&s.connection.targetConnection,r++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var r=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&r.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var n=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(n),"END"),this.setInputsInline(!0);var r=this;this.setTooltip(function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",r.workspace.options.oneBasedIndex?"0":"-1")})}},t.Blocks.lists_getIndex={init:function(){var n=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new t.FieldDropdown(n,function(s){s="REMOVE"==s,this.getSourceBlock().updateStatement_(s)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var r=this;this.setTooltip(function(){var s=r.getFieldValue("MODE"),c=r.getFieldValue("WHERE"),v="";switch(s+" "+c){case"GET FROM_START":case"GET FROM_END":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":v=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==c||"FROM_END"==c)&&(v+="  "+("FROM_START"==c?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",r.workspace.options.oneBasedIndex?"#1":"#0")),v})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var r=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",r),n},domToMutation:function(n){var r="true"==n.getAttribute("statement");this.updateStatement_(r),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var r=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var c="FROM_START"==s||"FROM_END"==s;if(c!=n){var v=this.getSourceBlock();return v.updateAt_(c),v.setFieldValue(s,"WHERE"),null}});this.getInput("AT").appendField(r,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var n=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var r=this;this.setTooltip(function(){var s=r.getFieldValue("MODE"),c=r.getFieldValue("WHERE"),v="";switch(s+" "+c){case"SET FROM_START":case"SET FROM_END":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":v=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==c||"FROM_END"==c)&&(v+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",r.workspace.options.oneBasedIndex?"#1":"#0")),v})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",r),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var r=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var c="FROM_START"==s||"FROM_END"==s;if(c!=n){var v=this.getSourceBlock();return v.updateAt_(c),v.setFieldValue(s,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(r,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",r),r=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",r),n},domToMutation:function(n){var r="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,r),this.updateAt_(2,n)},updateAt_:function(n,r){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),r?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(c){var v="FROM_START"==c||"FROM_END"==c;if(v!=r){var D=this.getSourceBlock();return D.updateAt_(n,v),D.setFieldValue(c,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var n=this,r=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(s){n.updateType_(s)});this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(r,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var s=n.getFieldValue("MODE");if("SPLIT"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+s)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var r=this.getInput("INPUT").connection;r.setShadowDom(null);var s=r.targetBlock();s&&(r.disconnect(),s.isShadow()?s.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=t.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var r=n.newBlock("controls_if_if");r.initSvg();for(var s=r.nextConnection,c=1;c<=this.elseifCount_;c++){var v=n.newBlock("controls_if_elseif");v.initSvg(),s.connect(v.previousConnection),s=v.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),s.connect(n.previousConnection)),r},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var r=[null],s=[null],c=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,r.push(n.valueConnection_),s.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,c=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(r,s,c)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var r=1;n;){switch(n.type){case"controls_if_elseif":var s=this.getInput("IF"+r),c=this.getInput("DO"+r);n.valueConnection_=s&&s.connection.targetConnection,n.statementConnection_=c&&c.connection.targetConnection,r++;break;case"controls_if_else":c=this.getInput("ELSE"),n.statementConnection_=c&&c.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],r=[null],s=null;this.getInput("ELSE")&&(s=this.getInput("ELSE").connection.targetConnection);for(var c=1;this.getInput("IF"+c);){var v=this.getInput("IF"+c),D=this.getInput("DO"+c);n.push(v.connection.targetConnection),r.push(D.connection.targetConnection),c++}this.updateShape_(),this.reconnectChildBlocks_(n,r,s)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,r,s){for(var c=1;c<=this.elseifCount_;c++)t.Mutator.reconnect(n[c],this,"IF"+c),t.Mutator.reconnect(r[c],this,"DO"+c);t.Mutator.reconnect(s,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var r=this.getInputTargetBlock("A"),s=this.getInputTargetBlock("B");r&&s&&!this.workspace.connectionChecker.doTypeChecks(r.outputConnection,s.outputConnection)&&(t.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==r&&(r.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(r=this.prevBlocks_[1])!==s&&(s.unplug(),!r||r.isDisposed()||r.isShadow()||this.getInput("B").connection.connect(r.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var r=this.getInputTargetBlock("THEN"),s=this.getInputTargetBlock("ELSE"),c=this.outputConnection.targetConnection;if((r||s)&&c)for(var v=0;2>v;v++){var D=1==v?r:s;D&&!D.workspace.connectionChecker.doTypeChecks(D.outputConnection,c)&&(t.Events.setGroup(n.group),c===this.prevParentConnection_?(this.unplug(),c.getSourceBlock().bumpNeighbours()):(D.unplug(),D.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=c}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var r=this.getField("VAR").getVariable(),s=r.name;if(!this.isCollapsed()&&null!=s){var c={enabled:!0};c.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",s),r=t.Variables.generateVariableFieldDom(r),(s=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.appendChild(r),c.callback=t.ContextMenu.callbackFactory(this,s),n.push(c)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==t.Events.BLOCK_MOVE){var r=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(r?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var s=t.Events.getGroup();t.Events.setGroup(n.group),this.setEnabled(r),t.Events.setGroup(s)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",r),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var r=this.getInput("DIVISOR");n?r||this.appendValueInput("DIVISOR").setCheck("Number"):r&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(n){var r=t.utils.xml.createElement("mutation");n&&r.setAttribute("name",this.getFieldValue("NAME"));for(var s=0;s<this.argumentVarModels_.length;s++){var c=t.utils.xml.createElement("arg"),v=this.argumentVarModels_[s];c.setAttribute("name",v.name),c.setAttribute("varid",v.getId()),n&&this.paramIds_&&c.setAttribute("paramId",this.paramIds_[s]),r.appendChild(c)}return this.hasStatements_||r.setAttribute("statements","false"),r},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var s,r=0;s=n.childNodes[r];r++)if("arg"==s.nodeName.toLowerCase()){var c=s.getAttribute("name");s=s.getAttribute("varid")||s.getAttribute("varId"),this.arguments_.push(c),null!=(s=t.Variables.getOrCreateVariablePackage(this.workspace,s,c,""))?this.argumentVarModels_.push(s):console.log("Failed to create a variable with name "+c+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var r=t.utils.xml.createElement("block");r.setAttribute("type","procedures_mutatorcontainer");var s=t.utils.xml.createElement("statement");s.setAttribute("name","STACK"),r.appendChild(s);for(var c=0;c<this.arguments_.length;c++){var v=t.utils.xml.createElement("block");v.setAttribute("type","procedures_mutatorarg");var D=t.utils.xml.createElement("field");D.setAttribute("name","NAME");var P=t.utils.xml.createTextNode(this.arguments_[c]);D.appendChild(P),v.appendChild(D),D=t.utils.xml.createElement("next"),v.appendChild(D),s.appendChild(v),s=D}return n=t.Xml.domToBlock(r,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var r=n.getInputTargetBlock("STACK");r&&!r.isInsertionMarker();){var s=r.getFieldValue("NAME");this.arguments_.push(s),s=this.workspace.getVariable(s,""),this.argumentVarModels_.push(s),this.paramIds_.push(r.id),r=r.nextConnection&&r.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,r){var s=this.workspace.getVariableById(n);if(""==s.type){s=s.name,r=this.workspace.getVariableById(r);for(var c=!1,v=0;v<this.argumentVarModels_.length;v++)this.argumentVarModels_[v].getId()==n&&(this.arguments_[v]=r.name,this.argumentVarModels_[v]=r,c=!0);c&&(this.displayRenamedVar_(s,r.name),t.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var r=n.name,s=!1,c=0;c<this.argumentVarModels_.length;c++)if(this.argumentVarModels_[c].getId()==n.getId()){var v=this.arguments_[c];this.arguments_[c]=r,s=!0}s&&(this.displayRenamedVar_(v,r),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,r){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var v,s=this.mutator.workspace_.getAllBlocks(!1),c=0;v=s[c];c++)"procedures_mutatorarg"==v.type&&t.Names.equals(n,v.getFieldValue("NAME"))&&v.setFieldValue(r,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var r={enabled:!0},s=this.getFieldValue("NAME");r.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",s);var c=t.utils.xml.createElement("mutation");for(c.setAttribute("name",s),s=0;s<this.arguments_.length;s++){var v=t.utils.xml.createElement("arg");v.setAttribute("name",this.arguments_[s]),c.appendChild(v)}if((s=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),s.appendChild(c),r.callback=t.ContextMenu.callbackFactory(this,s),n.push(r),!this.isCollapsed())for(s=0;s<this.argumentVarModels_.length;s++)(r={enabled:!0}).text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(c=this.argumentVarModels_[s]).name),c=t.Variables.generateVariableFieldDom(c),(v=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),v.appendChild(c),r.callback=t.ContextMenu.callbackFactory(this,v),n.push(r)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var n=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var r=this.getSourceBlock(),s=t.Mutator.findParentWs(r.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var c=(r.workspace.targetWorkspace||r.workspace).getAllBlocks(!1),v=n.toLowerCase(),D=0;D<c.length;D++)if(c[D].id!=this.getSourceBlock().id){var P=c[D].getFieldValue("NAME");if(P&&P.toLowerCase()==v)return null}return r.isInFlyout||((r=s.getVariable(n,""))&&r.name!=n&&s.renameVariableById(r.getId(),n),r||(r=s.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(r)),n},deleteIntermediateVars_:function(n){var r=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(r)for(var s=0;s<this.createdVariables_.length;s++){var c=this.createdVariables_[s];c.name!=n&&r.deleteVariableById(c.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,r){t.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(r,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",r)))},setProcedureParameters_:function(n,r){var s=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),c=s&&s.mutator&&s.mutator.isVisible();if(c||(this.quarkConnections_={},this.quarkIds_=null),r)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=r;else{if(r.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),s=this.rendered,this.rendered=!1;for(var v=0;v<this.arguments_.length;v++){var D=this.getInput("ARG"+v);D&&(this.quarkConnections_[this.quarkIds_[v]]=D=D.connection.targetConnection,c&&D&&-1==r.indexOf(this.quarkIds_[v])&&(D.disconnect(),D.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],v=0;v<this.arguments_.length;v++)n=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[v],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=r)for(v=0;v<this.arguments_.length;v++)(r=this.quarkIds_[v])in this.quarkConnections_&&(t.Mutator.reconnect(D=this.quarkConnections_[r],this,"ARG"+v)||delete this.quarkConnections_[r]);(this.rendered=s)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var r=this.getField("ARGNAME"+n);if(r){t.Events.disable();try{r.setValue(this.arguments_[n])}finally{t.Events.enable()}}else r=new t.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(t.ALIGN_RIGHT).appendField(r,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var r=0;r<this.arguments_.length;r++){var s=t.utils.xml.createElement("arg");s.setAttribute("name",this.arguments_[r]),n.appendChild(s)}return n},domToMutation:function(n){var r=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),r),r=[];for(var v,s=[],c=0;v=n.childNodes[c];c++)"arg"==v.nodeName.toLowerCase()&&(r.push(v.getAttribute("name")),s.push(v.getAttribute("paramId")));this.setProcedureParameters_(r,s)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==t.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var r=this.getProcedureCall();if(!(r=t.Procedures.getDefinition(r,this.workspace))||r.type==this.defType_&&JSON.stringify(r.getVars())==JSON.stringify(this.arguments_)||(r=null),!r){t.Events.setGroup(n.group),n=t.utils.xml.createElement("xml"),(r=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var s=this.getRelativeToSurfaceXY(),c=s.y+2*t.SNAP_RADIUS;r.setAttribute("x",s.x+t.SNAP_RADIUS*(this.RTL?-1:1)),r.setAttribute("y",c),s=this.mutationToDom(),r.appendChild(s),(s=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(c=this.getProcedureCall())||(c=t.Procedures.findLegalName("",this),this.renameProcedure("",c)),s.appendChild(t.utils.xml.createTextNode(c)),r.appendChild(s),n.appendChild(r),t.Xml.domToWorkspace(n,this.workspace),t.Events.setGroup(!1)}}else n.type==t.Events.BLOCK_DELETE?(r=this.getProcedureCall(),(r=t.Procedures.getDefinition(r,this.workspace))||(t.Events.setGroup(n.group),this.dispose(!0),t.Events.setGroup(!1))):n.type==t.Events.CHANGE&&"disabled"==n.element&&(r=this.getProcedureCall(),(r=t.Procedures.getDefinition(r,this.workspace))&&r.id==n.blockId&&((r=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(r)))},customContextMenu:function(n){if(this.workspace.isMovable()){var r={enabled:!0};r.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var s=this.getProcedureCall(),c=this.workspace;r.callback=function(){var v=t.Procedures.getDefinition(s,c);v&&(c.centerOnBlock(v.id),v.select())},n.push(r)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var r=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(r.type)){n=!0;break}r=r.getSurroundParent()}while(r);n?("procedures_defnoreturn"==r.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=r.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",r),r=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",r),n},domToMutation:function(n){var r="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,r),this.updateAt_(2,n)},updateAt_:function(n,r){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),r?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(c){var v="FROM_START"==c||"FROM_END"==c;if(v!=r){var D=this.getSourceBlock();return D.updateAt_(n,v),D.setFieldValue(c,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var n=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var n=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var r=this;n=new t.FieldDropdown(n,function(s){r.updateType_(s)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==r.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],r=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new t.FieldDropdown(n,function(s){r.updateType_(s)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==r.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var s,r=0;s=this.inputList[r];r++)for(var v,c=0;v=s.fieldRow[c];c++)if(n==v.name)return s.insertFieldAt(c,this.newQuote_(!0)),void s.insertFieldAt(c+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new t.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var r=n.newBlock("text_create_join_container");r.initSvg();for(var s=r.getInput("STACK").connection,c=0;c<this.itemCount_;c++){var v=n.newBlock("text_create_join_item");v.initSvg(),s.connect(v.previousConnection),s=v.nextConnection}return r},compose:function(n){var r=n.getInputTargetBlock("STACK");for(n=[];r&&!r.isInsertionMarker();)n.push(r.valueConnection_),r=r.nextConnection&&r.nextConnection.targetBlock();for(r=0;r<this.itemCount_;r++){var s=this.getInput("ADD"+r).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),r=0;r<this.itemCount_;r++)t.Mutator.reconnect(n[r],this,"ADD"+r)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var r=0;n;){var s=this.getInput("ADD"+r);n.valueConnection_=s&&s.connection.targetConnection,r++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var r=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&r.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(r){(r="FROM_START"==r||"FROM_END"==r)!=this.isAt_&&this.getSourceBlock().updateAt_(r)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var r=n.getFieldValue("WHERE"),s=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==r||"FROM_END"==r)&&(r="FROM_START"==r?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(s+="  "+r.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),s})},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(r={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},v=this.getField("VAR").getText(),c={text:t.Msg.DELETE_VARIABLE.replace("%1",v),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(r),n.unshift(c));else{if("variables_get"==this.type)var r="variables_set",s=t.Msg.VARIABLES_GET_CREATE_SET;else r="variables_get",s=t.Msg.VARIABLES_SET_CREATE_GET;var c={enabled:0<this.workspace.remainingCapacity()},v=this.getField("VAR").getText();c.text=s.replace("%1",v),(s=t.utils.xml.createElement("field")).setAttribute("name","VAR"),s.appendChild(t.utils.xml.createTextNode(v)),(v=t.utils.xml.createElement("block")).setAttribute("type",r),v.appendChild(s),c.callback=t.ContextMenu.callbackFactory(this,v),n.push(c)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(r,s)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();r.deleteVariableById(s.getId()),r.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(r={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},D=this.getField("VAR").getText(),v={text:t.Msg.DELETE_VARIABLE.replace("%1",D),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(r),n.unshift(v));else{var r=this.getFieldValue("VAR"),s=this.workspace.getVariableById(r).type;if("variables_get_dynamic"==this.type){r="variables_set_dynamic";var c=t.Msg.VARIABLES_GET_CREATE_SET}else r="variables_get_dynamic",c=t.Msg.VARIABLES_SET_CREATE_GET;var v={enabled:0<this.workspace.remainingCapacity()},D=this.getField("VAR").getText();v.text=c.replace("%1",D),(c=t.utils.xml.createElement("field")).setAttribute("name","VAR"),c.setAttribute("variabletype",s),c.appendChild(t.utils.xml.createTextNode(D)),(D=t.utils.xml.createElement("block")).setAttribute("type",r),D.appendChild(c),v.callback=t.ContextMenu.callbackFactory(this,D),n.push(v)}},onchange:function(n){n=this.getFieldValue("VAR"),n=t.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(r,s)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();r.deleteVariableById(s.getId()),r.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks}.apply(W,g))&&(H.exports=e)},38136:function(H,W,f){var g,e;g=[f(3731),f(32998),f(96116),f(59506)],void 0!==(e=function(t,n,r,s){"use strict";return t.setLocale(n),t.Blocks=t.Blocks||{},Object.keys(r).forEach(function(c){t.Blocks[c]=r[c]}),t.JavaScript=s,t}.apply(W,g))&&(H.exports=e)},3731:function(H,W,f){var g,e;g=[f(54678)],void 0!==(e=function(t){"use strict";return t.setLocale=function(n){t.Msg=t.Msg||{},Object.keys(n).forEach(function(r){t.Msg[r]=n[r]})},t}.apply(W,g))&&(H.exports=e)},45797:function(H,W,f){var g,e;g=[f(38136)],void 0!==(e=function(t){"use strict";return t}.apply(W,g))&&(H.exports=e)},59506:function(H,W,f){var g,e;g=[f(3731),f(29920)],void 0!==(e=function(t,n){"use strict";return t.JavaScript=n,n}.apply(W,g))&&(H.exports=e)},29920:function(H,W,f){var g,e;g=[f(33164)],void 0!==(e=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.isInitialized=!1,t.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var r=[],s=t.Variables.allDeveloperVariables(n),c=0;c<s.length;c++)r.push(this.nameDB_.getName(s[c],t.Names.DEVELOPER_VARIABLE_TYPE));for(n=t.Variables.allUsedVarModels(n),c=0;c<n.length;c++)r.push(this.nameDB_.getName(n[c].getId(),t.VARIABLE_CATEGORY_NAME));r.length&&(this.definitions_.variables="var "+r.join(", ")+";"),this.isInitialized=!0},t.JavaScript.finish=function(n){var r=t.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),r.join("\n\n")+"\n\n\n"+n},t.JavaScript.scrubNakedValue=function(n){return n+";\n"},t.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(n,r,s){var c="";if(!n.outputConnection||!n.outputConnection.targetConnection){var v=n.getCommentText();v&&(v=t.utils.string.wrap(v,this.COMMENT_WRAP-3),c+=this.prefixLines(v+"\n","// "));for(var D=0;D<n.inputList.length;D++)n.inputList[D].type==t.inputTypes.VALUE&&(v=n.inputList[D].connection.targetBlock())&&(v=this.allNestedComments(v))&&(c+=this.prefixLines(v,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),c+r+(s?"":this.blockToCode(n))},t.JavaScript.getAdjusted=function(n,r,s,c,v){s=s||0,v=v||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&s--;var D=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<s?this.valueToCode(n,r,this.ORDER_ADDITION)||D:0>s?this.valueToCode(n,r,this.ORDER_SUBTRACTION)||D:c?this.valueToCode(n,r,this.ORDER_UNARY_NEGATION)||D:this.valueToCode(n,r,v)||D,t.isNumber(n))n=Number(n)+s,c&&(n=-n);else{if(0<s){n=n+" + "+s;var P=this.ORDER_ADDITION}else 0>s&&(n=n+" - "+-s,P=this.ORDER_SUBTRACTION);c&&(n=s?"-("+n+")":"-"+n,P=this.ORDER_UNARY_NEGATION),P=Math.floor(P),v=Math.floor(v),P&&v>=P&&(n="("+n+")")}return n},t.JavaScript.colour={},t.JavaScript.colour_picker=function(n){return[t.JavaScript.quote_(n.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(n){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(n){var r=t.JavaScript.valueToCode(n,"RED",t.JavaScript.ORDER_NONE)||0,s=t.JavaScript.valueToCode(n,"GREEN",t.JavaScript.ORDER_NONE)||0;return n=t.JavaScript.valueToCode(n,"BLUE",t.JavaScript.ORDER_NONE)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(n){var r=t.JavaScript.valueToCode(n,"COLOUR1",t.JavaScript.ORDER_NONE)||"'#000000'",s=t.JavaScript.valueToCode(n,"COLOUR2",t.JavaScript.ORDER_NONE)||"'#000000'";return n=t.JavaScript.valueToCode(n,"RATIO",t.JavaScript.ORDER_NONE)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(n){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(n){for(var r=Array(n.itemCount_),s=0;s<n.itemCount_;s++)r[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"null";return["["+r.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(n){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(n,"ITEM",t.JavaScript.ORDER_NONE)||"null")+", "+(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(n){var r="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return r=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+r+"("+s+")",n.workspace.options.oneBasedIndex?[r+" + 1",t.JavaScript.ORDER_ADDITION]:[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(n){var r=n.getFieldValue("MODE")||"GET",s=n.getFieldValue("WHERE")||"FROM_START",c=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==s?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"[]";switch(s){case"FIRST":if("GET"==r)return[c+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[c+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==r)return c+".shift();\n";break;case"LAST":if("GET"==r)return[c+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[c+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==r)return c+".pop();\n";break;case"FROM_START":if(n=t.JavaScript.getAdjusted(n,"AT"),"GET"==r)return[c+"["+n+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[c+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return c+".splice("+n+", 1);\n";break;case"FROM_END":if(n=t.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==r)return[c+".slice("+n+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==r)return[c+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return c+".splice("+n+", 1);";break;case"RANDOM":if(c=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+c+", "+("GET"!=r)+")","GET"==r||"GET_REMOVE"==r)return[c,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return c+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(n){function r(){if(s.match(/^\w+$/))return"";var P=t.JavaScript.nameDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),G="var "+P+" = "+s+";\n";return s=P,G}var s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",c=n.getFieldValue("MODE")||"GET",v=n.getFieldValue("WHERE")||"FROM_START",D=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(v){case"FIRST":if("SET"==c)return s+"[0] = "+D+";\n";if("INSERT"==c)return s+".unshift("+D+");\n";break;case"LAST":if("SET"==c)return(n=r())+(s+"[")+s+".length - 1] = "+D+";\n";if("INSERT"==c)return s+".push("+D+");\n";break;case"FROM_START":if(v=t.JavaScript.getAdjusted(n,"AT"),"SET"==c)return s+"["+v+"] = "+D+";\n";if("INSERT"==c)return s+".splice("+v+", 0, "+D+");\n";break;case"FROM_END":if(v=t.JavaScript.getAdjusted(n,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),n=r(),"SET"==c)return n+(s+"[")+s+".length - "+v+"] = "+D+";\n";if("INSERT"==c)return n+(s+".splice(")+s+".length - "+v+", 0, "+D+");\n";break;case"RANDOM":if(n=r(),n+="var "+(v=t.JavaScript.nameDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+s+".length);\n","SET"==c)return n+(s+"[")+v+"] = "+D+";\n";if("INSERT"==c)return n+(s+".splice(")+v+", 0, "+D+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(n,r,s){return"FIRST"==r?"0":"FROM_END"==r?n+".length - 1 - "+s:"LAST"==r?n+".length - 1":s},t.JavaScript.lists_getSublist=function(n){var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",s=n.getFieldValue("WHERE1"),c=n.getFieldValue("WHERE2");if("FIRST"==s&&"LAST"==c)r+=".slice(0)";else if(r.match(/^\w+$/)||"FROM_END"!=s&&"FROM_START"==c){switch(s){case"FROM_START":var v=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":v=r+".length - "+(v=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":v="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(c){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=r+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=r+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}r=r+".slice("+v+", "+n+")"}else{v=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var D=t.JavaScript.lists.getIndex_,P={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};r=t.JavaScript.provideFunction_("subsequence"+P[s]+P[c],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==s||"FROM_START"==s?", at1":"")+("FROM_END"==c||"FROM_START"==c?", at2":"")+") {","  var start = "+D("sequence",s,"at1")+";","  var end = "+D("sequence",c,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+r+("FROM_END"==s||"FROM_START"==s?", "+v:"")+("FROM_END"==c||"FROM_START"==c?", "+n:"")+")"}return[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(n){var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",s="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[r+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+s+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(n){var r=t.JavaScript.valueToCode(n,"INPUT",t.JavaScript.ORDER_MEMBER),s=t.JavaScript.valueToCode(n,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))r||(r="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);r||(r="[]"),n="join"}return[r+"."+n+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(n){return[(t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(n){var r=0,s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n));do{var c=t.JavaScript.valueToCode(n,"IF"+r,t.JavaScript.ORDER_NONE)||"false",v=t.JavaScript.statementToCode(n,"DO"+r);t.JavaScript.STATEMENT_SUFFIX&&(v=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+v),s+=(0<r?" else ":"")+"if ("+c+") {\n"+v+"}",++r}while(n.getInput("IF"+r));return(n.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(v=t.JavaScript.statementToCode(n,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(v=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+v),s+=" else {\n"+v+"}"),s+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(n){var r={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],s="=="==r||"!="==r?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(n,"A",s)||"0")+" "+r+" "+(n=t.JavaScript.valueToCode(n,"B",s)||"0"),s]},t.JavaScript.logic_operation=function(n){var r="AND"==n.getFieldValue("OP")?"&&":"||",s="&&"==r?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,c=t.JavaScript.valueToCode(n,"A",s);if(n=t.JavaScript.valueToCode(n,"B",s),c||n){var v="&&"==r?"true":"false";c||(c=v),n||(n=v)}else n=c="false";return[c+" "+r+" "+n,s]},t.JavaScript.logic_negate=function(n){var r=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(n,"BOOL",r)||"true"),r]},t.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(n){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(n){return[(t.JavaScript.valueToCode(n,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(n,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=t.JavaScript.valueToCode(n,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(n){var r=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):t.JavaScript.valueToCode(n,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",s=t.JavaScript.statementToCode(n,"DO");s=t.JavaScript.addLoopTrap(s,n),n="";var c=t.JavaScript.nameDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),v=r;return r.match(/^\w+$/)||t.isNumber(r)||(n+="var "+(v=t.JavaScript.nameDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+r+";\n"),n+"for (var "+c+" = 0; "+c+" < "+v+"; "+c+"++) {\n"+s+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(n){var r="UNTIL"==n.getFieldValue("MODE"),s=t.JavaScript.valueToCode(n,"BOOL",r?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",c=t.JavaScript.statementToCode(n,"DO");return r&&(s="!"+s),"while ("+s+") {\n"+(c=t.JavaScript.addLoopTrap(c,n))+"}\n"},t.JavaScript.controls_for=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",c=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",v=t.JavaScript.valueToCode(n,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",D=t.JavaScript.statementToCode(n,"DO");if(D=t.JavaScript.addLoopTrap(D,n),t.isNumber(s)&&t.isNumber(c)&&t.isNumber(v)){var P=Number(s)<=Number(c);n="for ("+r+" = "+s+"; "+r+(P?" <= ":" >= ")+c+"; "+r,n=(1==(r=Math.abs(Number(v)))?n+(P?"++":"--"):n+(P?" += ":" -= ")+r)+") {\n"+D+"}\n"}else n="",P=s,s.match(/^\w+$/)||t.isNumber(s)||(n+="var "+(P=t.JavaScript.nameDB_.getDistinctName(r+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),s=c,c.match(/^\w+$/)||t.isNumber(c)||(n+="var "+(s=t.JavaScript.nameDB_.getDistinctName(r+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+c+";\n"),n+="var "+(c=t.JavaScript.nameDB_.getDistinctName(r+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",n=(n=t.isNumber(v)?n+(Math.abs(v)+";\n"):n+"Math.abs("+v+");\n")+"if ("+P+" > "+s+") {\n"+(t.JavaScript.INDENT+c)+" = -"+c+";\n",n+="}\n",n+="for ("+r+" = "+P+"; "+c+" >= 0 ? "+r+" <= "+s+" : "+r+" >= "+s+"; "+r+" += "+c+") {\n"+D+"}\n";return n},t.JavaScript.controls_forEach=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",c=t.JavaScript.statementToCode(n,"DO");c=t.JavaScript.addLoopTrap(c,n),n="";var v=s;return s.match(/^\w+$/)||(n+="var "+(v=t.JavaScript.nameDB_.getDistinctName(r+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),n+"for (var "+(s=t.JavaScript.nameDB_.getDistinctName(r+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+v+") {\n"+(c=t.JavaScript.INDENT+r+" = "+v+"["+s+"];\n"+c)+"}\n"},t.JavaScript.controls_flow_statements=function(n){var r="";if(t.JavaScript.STATEMENT_PREFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),t.JavaScript.STATEMENT_PREFIX){var s=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);s&&!s.suppressPrefixSuffix&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,s))}switch(n.getFieldValue("FLOW")){case"BREAK":return r+"break;\n";case"CONTINUE":return r+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(n){var r={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],s=r[0],c=t.JavaScript.valueToCode(n,"A",r=r[1])||"0";return n=t.JavaScript.valueToCode(n,"B",r)||"0",s?[c+s+n,r]:["Math.pow("+c+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(n){var r=n.getFieldValue("OP");if("NEG"==r)return"-"==(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,t.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==r||"COS"==r||"TAN"==r?t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0",r){case"ABS":var s="Math.abs("+n+")";break;case"ROOT":s="Math.sqrt("+n+")";break;case"LN":s="Math.log("+n+")";break;case"EXP":s="Math.exp("+n+")";break;case"POW10":s="Math.pow(10,"+n+")";break;case"ROUND":s="Math.round("+n+")";break;case"ROUNDUP":s="Math.ceil("+n+")";break;case"ROUNDDOWN":s="Math.floor("+n+")";break;case"SIN":s="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":s="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":s="Math.tan("+n+" / 180 * Math.PI)"}if(s)return[s,t.JavaScript.ORDER_FUNCTION_CALL];switch(r){case"LOG10":s="Math.log("+n+") / Math.log(10)";break;case"ASIN":s="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":s="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":s="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+r)}return[s,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(n){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(n){var r=t.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",s=n.getFieldValue("PROPERTY");if("PRIME"==s)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+r+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(s){case"EVEN":var c=r+" % 2 == 0";break;case"ODD":c=r+" % 2 == 1";break;case"WHOLE":c=r+" % 1 == 0";break;case"POSITIVE":c=r+" > 0";break;case"NEGATIVE":c=r+" < 0";break;case"DIVISIBLE_BY":c=r+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[c,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(n){var r=t.JavaScript.valueToCode(n,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(n=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+r+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(n){var r=n.getFieldValue("OP");switch(r){case"SUM":n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(r=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(r=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(r=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(r=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(r=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+r)}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(n){return[(t.JavaScript.valueToCode(n,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"0")+", "+(t.JavaScript.valueToCode(n,"LOW",t.JavaScript.ORDER_NONE)||"0")+"), "+(n=t.JavaScript.valueToCode(n,"HIGH",t.JavaScript.ORDER_NONE)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(n){var r=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"0";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(n){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(n){var r=t.JavaScript.valueToCode(n,"X",t.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(n,"Y",t.JavaScript.ORDER_NONE)||"0")+", "+r+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),s&&(s=t.JavaScript.prefixLines(s,t.JavaScript.INDENT));var c="";t.JavaScript.INFINITE_LOOP_TRAP&&(c=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,n),t.JavaScript.INDENT));var v=t.JavaScript.statementToCode(n,"STACK"),D=t.JavaScript.valueToCode(n,"RETURN",t.JavaScript.ORDER_NONE)||"",P="";v&&D&&(P=s),D&&(D=t.JavaScript.INDENT+"return "+D+";\n");for(var G=[],it=n.getVars(),q=0;q<it.length;q++)G[q]=t.JavaScript.nameDB_.getName(it[q],t.VARIABLE_CATEGORY_NAME);return s="function "+r+"("+G.join(", ")+") {\n"+s+c+v+P+D+"}",s=t.JavaScript.scrub_(n,s),t.JavaScript.definitions_["%"+r]=s,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(n){for(var r=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s=[],c=n.getVars(),v=0;v<c.length;v++)s[v]=t.JavaScript.valueToCode(n,"ARG"+v,t.JavaScript.ORDER_NONE)||"null";return[r+"("+s.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(n){return t.JavaScript.procedures_callreturn(n)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(n){var r="if ("+(t.JavaScript.valueToCode(n,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)),n.hasReturnValue_?(n=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"null",r+=t.JavaScript.INDENT+"return "+n+";\n"):r+=t.JavaScript.INDENT+"return;\n",r+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(n){return[t.JavaScript.quote_(n.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(n){var r=-1!=(n=t.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?t.JavaScript.ORDER_ADDITION:t.JavaScript.ORDER_ATOMIC;return[n,r]},t.JavaScript.text.forceString_=function(n){return t.JavaScript.text.forceString_.strRegExp.test(n)?[n,t.JavaScript.ORDER_ATOMIC]:["String("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return n=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''",t.JavaScript.text.forceString_(n);case 2:var r=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"ADD1",t.JavaScript.ORDER_NONE)||"''",[n=t.JavaScript.text.forceString_(r)[0]+" + "+t.JavaScript.text.forceString_(n)[0],t.JavaScript.ORDER_ADDITION];default:r=Array(n.itemCount_);for(var s=0;s<n.itemCount_;s++)r[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"''";return[n="["+r.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return n=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",r+" += "+t.JavaScript.text.forceString_(n)[0]+";\n"},t.JavaScript.text_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(n){var r="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return r=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+r+"("+s+")",n.workspace.options.oneBasedIndex?[r+" + 1",t.JavaScript.ORDER_ADDITION]:[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(n){var r=n.getFieldValue("WHERE")||"FROM_START",s=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==r?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(r){case"FIRST":return[s+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[s+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[s+".charAt("+(n=t.JavaScript.getAdjusted(n,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[s+".slice("+(n=t.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(n,r,s){return"FIRST"==r?"0":"FROM_END"==r?n+".length - 1 - "+s:"LAST"==r?n+".length - 1":s},t.JavaScript.text_getSubstring=function(n){var r=n.getFieldValue("WHERE1"),s=n.getFieldValue("WHERE2"),c="FROM_END"!=r&&"LAST"!=r&&"FROM_END"!=s&&"LAST"!=s,v=t.JavaScript.valueToCode(n,"STRING",c?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''";if("FIRST"==r&&"LAST"==s)return[v,t.JavaScript.ORDER_NONE];if(v.match(/^'?\w+'?$/)||c){switch(r){case"FROM_START":c=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":c=v+".length - "+(c=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":c="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(s){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=v+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=v+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}r=v+".slice("+c+", "+n+")"}else{c=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var D=t.JavaScript.text.getIndex_,P={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};r=t.JavaScript.provideFunction_("subsequence"+P[r]+P[s],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==r||"FROM_START"==r?", at1":"")+("FROM_END"==s||"FROM_START"==s?", at2":"")+") {","  var start = "+D("sequence",r,"at1")+";","  var end = "+D("sequence",s,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+v+("FROM_END"==r||"FROM_START"==r?", "+c:"")+("FROM_END"==s||"FROM_START"==s?", "+n:"")+")"}return[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(n){var r={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=t.JavaScript.valueToCode(n,"TEXT",r?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[r?n+r:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(n){var r={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(n){return"window.alert("+(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(n){var r="window.prompt("+(n.getField("TEXT")?t.JavaScript.quote_(n.getFieldValue("TEXT")):t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(r="Number("+r+")"),[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(n){var r=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_replace=function(n){var r=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_reverse=function(n){return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.variables={},t.JavaScript.variables_get=function(n){return[t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(n){var r=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+r+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript}.apply(W,g))&&(H.exports=e)},32998:function(H,W,f){var g,e;g=[f(3731)],void 0!==(e=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg}.apply(W,g))&&(H.exports=e)},26692:H=>{!function(){"use strict";H.exports=function(f){return(f instanceof Buffer?f:Buffer.from(f.toString(),"binary")).toString("base64")}}()},4640:(H,W,f)=>{"use strict";var y=f(4320),g=f(23330),e=g(y("String.prototype.indexOf"));H.exports=function(n,r){var s=y(n,!!r);return"function"==typeof s&&e(n,".prototype.")>-1?g(s):s}},23330:(H,W,f)=>{"use strict";var y=f(21113),g=f(4320),e=g("%Function.prototype.apply%"),t=g("%Function.prototype.call%"),n=g("%Reflect.apply%",!0)||y.call(t,e),r=g("%Object.getOwnPropertyDescriptor%",!0),s=g("%Object.defineProperty%",!0),c=g("%Math.max%");if(s)try{s({},"a",{value:1})}catch(D){s=null}H.exports=function(P){var G=n(y,t,arguments);if(r&&s){var it=r(G,"length");it.configurable&&s(G,"length",{value:1+c(0,P.length-(arguments.length-1))})}return G};var v=function(){return n(y,e,arguments)};s?s(H.exports,"apply",{value:v}):H.exports.apply=v},76216:(H,W)=>{"use strict";W.parse=function(s,c){if("string"!=typeof s)throw new TypeError("argument str must be a string");for(var v={},D=c||{},P=s.split(g),G=D.decode||f,it=0;it<P.length;it++){var q=P[it],bt=q.indexOf("=");if(!(bt<0)){var Ft=q.substr(0,bt).trim(),gt=q.substr(++bt,q.length).trim();'"'==gt[0]&&(gt=gt.slice(1,-1)),null==v[Ft]&&(v[Ft]=r(gt,G))}}return v},W.serialize=function(s,c,v){var D=v||{},P=D.encode||y;if("function"!=typeof P)throw new TypeError("option encode is invalid");if(!e.test(s))throw new TypeError("argument name is invalid");var G=P(c);if(G&&!e.test(G))throw new TypeError("argument val is invalid");var it=s+"="+G;if(null!=D.maxAge){var q=D.maxAge-0;if(isNaN(q)||!isFinite(q))throw new TypeError("option maxAge is invalid");it+="; Max-Age="+Math.floor(q)}if(D.domain){if(!e.test(D.domain))throw new TypeError("option domain is invalid");it+="; Domain="+D.domain}if(D.path){if(!e.test(D.path))throw new TypeError("option path is invalid");it+="; Path="+D.path}if(D.expires){if("function"!=typeof D.expires.toUTCString)throw new TypeError("option expires is invalid");it+="; Expires="+D.expires.toUTCString()}if(D.httpOnly&&(it+="; HttpOnly"),D.secure&&(it+="; Secure"),D.sameSite)switch("string"==typeof D.sameSite?D.sameSite.toLowerCase():D.sameSite){case!0:it+="; SameSite=Strict";break;case"lax":it+="; SameSite=Lax";break;case"strict":it+="; SameSite=Strict";break;case"none":it+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return it};var f=decodeURIComponent,y=encodeURIComponent,g=/; */,e=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function r(s,c){try{return c(s)}catch(v){return s}}},82344:(H,W,f)=>{f(21514),f(72190);var y=f(52457);H.exports=y.Array.from},12557:(H,W,f)=>{f(99025);var y=f(52457);H.exports=y.Array.isArray},87119:(H,W,f)=>{f(30933);var y=f(6747);H.exports=y("Array").concat},87183:(H,W,f)=>{f(23483),f(79445);var y=f(6747);H.exports=y("Array").entries},94154:(H,W,f)=>{f(24572);var y=f(6747);H.exports=y("Array").filter},5599:(H,W,f)=>{f(40655);var y=f(6747);H.exports=y("Array").find},65009:(H,W,f)=>{f(91762);var y=f(6747);H.exports=y("Array").forEach},40844:(H,W,f)=>{f(38582);var y=f(6747);H.exports=y("Array").includes},86470:(H,W,f)=>{f(13950);var y=f(6747);H.exports=y("Array").indexOf},57818:(H,W,f)=>{f(78713);var y=f(6747);H.exports=y("Array").map},96918:(H,W,f)=>{f(94775);var y=f(6747);H.exports=y("Array").slice},74727:(H,W,f)=>{f(8195);var y=f(6747);H.exports=y("Array").splice},98088:(H,W,f)=>{f(23483),f(21514);var y=f(50806);H.exports=y},48023:(H,W,f)=>{var y=f(61517),g=f(87119),e=Array.prototype;H.exports=function(t){var n=t.concat;return t===e||y(e,t)&&n===e.concat?g:n}},8425:(H,W,f)=>{var y=f(61517),g=f(94154),e=Array.prototype;H.exports=function(t){var n=t.filter;return t===e||y(e,t)&&n===e.filter?g:n}},61008:(H,W,f)=>{var y=f(61517),g=f(5599),e=Array.prototype;H.exports=function(t){var n=t.find;return t===e||y(e,t)&&n===e.find?g:n}},18583:(H,W,f)=>{var y=f(61517),g=f(40844),e=f(96040),t=Array.prototype,n=String.prototype;H.exports=function(r){var s=r.includes;return r===t||y(t,r)&&s===t.includes?g:"string"==typeof r||r===n||y(n,r)&&s===n.includes?e:s}},84676:(H,W,f)=>{var y=f(61517),g=f(86470),e=Array.prototype;H.exports=function(t){var n=t.indexOf;return t===e||y(e,t)&&n===e.indexOf?g:n}},59032:(H,W,f)=>{var y=f(61517),g=f(57818),e=Array.prototype;H.exports=function(t){var n=t.map;return t===e||y(e,t)&&n===e.map?g:n}},70660:(H,W,f)=>{var y=f(61517),g=f(96918),e=Array.prototype;H.exports=function(t){var n=t.slice;return t===e||y(e,t)&&n===e.slice?g:n}},12256:(H,W,f)=>{var y=f(61517),g=f(74727),e=Array.prototype;H.exports=function(t){var n=t.splice;return t===e||y(e,t)&&n===e.splice?g:n}},14475:(H,W,f)=>{var y=f(61517),g=f(91293),e=String.prototype;H.exports=function(t){var n=t.startsWith;return"string"==typeof t||t===e||y(e,t)&&n===e.startsWith?g:n}},98711:(H,W,f)=>{f(35249);var y=f(52457),g=f(66864);y.JSON||(y.JSON={stringify:JSON.stringify}),H.exports=function(t,n,r){return g(y.JSON.stringify,null,arguments)}},98169:(H,W,f)=>{f(41423);var y=f(52457);H.exports=y.Object.assign},31916:(H,W,f)=>{f(81892);var g=f(52457).Object,e=H.exports=function(n,r){return g.defineProperties(n,r)};g.defineProperties.sham&&(e.sham=!0)},47429:(H,W,f)=>{f(80247);var g=f(52457).Object,e=H.exports=function(n,r,s){return g.defineProperty(n,r,s)};g.defineProperty.sham&&(e.sham=!0)},2487:(H,W,f)=>{f(22700);var y=f(52457);H.exports=y.Object.entries},77626:(H,W,f)=>{f(36342);var g=f(52457).Object,e=H.exports=function(n,r){return g.getOwnPropertyDescriptor(n,r)};g.getOwnPropertyDescriptor.sham&&(e.sham=!0)},81043:(H,W,f)=>{f(4878);var y=f(52457);H.exports=y.Object.getOwnPropertyDescriptors},98838:(H,W,f)=>{f(57479);var y=f(52457);H.exports=y.Object.getOwnPropertySymbols},63977:(H,W,f)=>{f(21165);var y=f(52457);H.exports=y.Object.keys},14099:(H,W,f)=>{f(10153),f(23483),f(79445),f(56143),f(35503),f(54677),f(13013),f(21514);var y=f(52457);H.exports=y.Promise},96040:(H,W,f)=>{f(53030);var y=f(6747);H.exports=y("String").includes},91293:(H,W,f)=>{f(35828);var y=f(6747);H.exports=y("String").startsWith},1816:(H,W,f)=>{f(30933),f(79445),f(57479),f(39334),f(27014),f(57071),f(58666),f(15816),f(14740),f(20950),f(76499),f(94696),f(72105),f(5247),f(53825),f(22529),f(90591),f(2757),f(58956),f(32257);var y=f(52457);H.exports=y.Symbol},64776:(H,W,f)=>{f(23483),f(79445),f(21514),f(15816);var y=f(79182);H.exports=y.f("iterator")},65988:(H,W,f)=>{f(23483),f(79445),f(26054);var y=f(52457);H.exports=y.WeakMap},13770:(H,W,f)=>{var y=f(82422);H.exports=y},66715:(H,W,f)=>{var y=f(30260);H.exports=y},46481:(H,W,f)=>{var y=f(31216);H.exports=y},81788:(H,W,f)=>{var y=f(30376);H.exports=y},38637:(H,W,f)=>{var y=f(88334);H.exports=y},48414:(H,W,f)=>{var y=f(68379);H.exports=y},30595:(H,W,f)=>{var y=f(42905);H.exports=y},83930:(H,W,f)=>{var y=f(31545);H.exports=y},41076:(H,W,f)=>{var y=f(39565);H.exports=y},27109:(H,W,f)=>{var y=f(63122);H.exports=y},35841:(H,W,f)=>{var y=f(76650);H.exports=y},5643:(H,W,f)=>{var y=f(51266);H.exports=y},50606:(H,W,f)=>{var y=f(69265);H.exports=y},98222:(H,W,f)=>{var y=f(64781);f(22977),f(17724),f(79178),f(50162),H.exports=y},16487:(H,W,f)=>{var y=f(56219);f(83066),f(40338),f(23560),f(61546),f(70214),f(96506),f(82356),H.exports=y},9735:(H,W,f)=>{var y=f(78921);H.exports=y},6567:(H,W,f)=>{var y=f(74258),g=f(14563),e=f(98217),t=y.TypeError;H.exports=function(n){if(g(n))return n;throw t(e(n)+" is not a function")}},6767:(H,W,f)=>{var y=f(74258),g=f(2817),e=f(98217),t=y.TypeError;H.exports=function(n){if(g(n))return n;throw t(e(n)+" is not a constructor")}},67553:(H,W,f)=>{var y=f(74258),g=f(14563),e=y.String,t=y.TypeError;H.exports=function(n){if("object"==typeof n||g(n))return n;throw t("Can't set "+e(n)+" as a prototype")}},74159:H=>{H.exports=function(){}},7561:(H,W,f)=>{var y=f(74258),g=f(61517),e=y.TypeError;H.exports=function(t,n){if(g(n,t))return t;throw e("Incorrect invocation")}},49403:(H,W,f)=>{var y=f(74258),g=f(9616),e=y.String,t=y.TypeError;H.exports=function(n){if(g(n))return n;throw t(e(n)+" is not an object")}},39749:(H,W,f)=>{var y=f(77054);H.exports=y(function(){if("function"==typeof ArrayBuffer){var g=new ArrayBuffer(8);Object.isExtensible(g)&&Object.defineProperty(g,"a",{value:8})}})},45900:(H,W,f)=>{"use strict";var y=f(93949).forEach,e=f(95750)("forEach");H.exports=e?[].forEach:function(n){return y(this,n,arguments.length>1?arguments[1]:void 0)}},75058:(H,W,f)=>{"use strict";var y=f(74258),g=f(94640),e=f(45439),t=f(34972),n=f(99985),r=f(44821),s=f(2817),c=f(25979),v=f(13493),D=f(72442),P=f(50806),G=y.Array;H.exports=function(q){var bt=t(q),Ft=s(this),gt=arguments.length,wt=gt>1?arguments[1]:void 0,Bt=void 0!==wt;Bt&&(wt=g(wt,gt>2?arguments[2]:void 0));var St,lt,ft,ht,Gt,ut,Kt=P(bt),It=0;if(!Kt||this==G&&r(Kt))for(St=c(bt),lt=Ft?new this(St):G(St);St>It;It++)ut=Bt?wt(bt[It],It):bt[It],v(lt,It,ut);else for(Gt=(ht=D(bt,Kt)).next,lt=Ft?new this:[];!(ft=e(Gt,ht)).done;It++)ut=Bt?n(ht,wt,[ft.value,It],!0):ft.value,v(lt,It,ut);return lt.length=It,lt}},8440:(H,W,f)=>{var y=f(73684),g=f(69723),e=f(25979),t=function(n){return function(r,s,c){var G,v=y(r),D=e(v),P=g(c,D);if(n&&s!=s){for(;D>P;)if((G=v[P++])!=G)return!0}else for(;D>P;P++)if((n||P in v)&&v[P]===s)return n||P||0;return!n&&-1}};H.exports={includes:t(!0),indexOf:t(!1)}},93949:(H,W,f)=>{var y=f(94640),g=f(94800),e=f(8317),t=f(34972),n=f(25979),r=f(47137),s=g([].push),c=function(v){var D=1==v,P=2==v,G=3==v,it=4==v,q=6==v,bt=7==v,Ft=5==v||q;return function(gt,wt,Bt,Kt){for(var ot,st,It=t(gt),St=e(It),lt=y(wt,Bt),ft=n(St),ht=0,Gt=Kt||r,ut=D?Gt(gt,ft):P||bt?Gt(gt,0):void 0;ft>ht;ht++)if((Ft||ht in St)&&(st=lt(ot=St[ht],ht,It),v))if(D)ut[ht]=st;else if(st)switch(v){case 3:return!0;case 5:return ot;case 6:return ht;case 2:s(ut,ot)}else switch(v){case 4:return!1;case 7:s(ut,ot)}return q?-1:G||it?it:ut}};H.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},54647:(H,W,f)=>{var y=f(77054),g=f(35009),e=f(97502),t=g("species");H.exports=function(n){return e>=51||!y(function(){var r=[];return(r.constructor={})[t]=function(){return{foo:1}},1!==r[n](Boolean).foo})}},95750:(H,W,f)=>{"use strict";var y=f(77054);H.exports=function(g,e){var t=[][g];return!!t&&y(function(){t.call(null,e||function(){throw 1},1)})}},58467:(H,W,f)=>{var y=f(74258),g=f(69723),e=f(25979),t=f(13493),n=y.Array,r=Math.max;H.exports=function(s,c,v){for(var D=e(s),P=g(c,D),G=g(void 0===v?D:v,D),it=n(r(G-P,0)),q=0;P<G;P++,q++)t(it,q,s[P]);return it.length=q,it}},64716:(H,W,f)=>{var y=f(94800);H.exports=y([].slice)},53904:(H,W,f)=>{var y=f(58467),g=Math.floor,e=function(r,s){var c=r.length,v=g(c/2);return c<8?t(r,s):n(r,e(y(r,0,v),s),e(y(r,v),s),s)},t=function(r,s){for(var D,P,c=r.length,v=1;v<c;){for(P=v,D=r[v];P&&s(r[P-1],D)>0;)r[P]=r[--P];P!==v++&&(r[P]=D)}return r},n=function(r,s,c,v){for(var D=s.length,P=c.length,G=0,it=0;G<D||it<P;)r[G+it]=G<D&&it<P?v(s[G],c[it])<=0?s[G++]:c[it++]:G<D?s[G++]:c[it++];return r};H.exports=e},83758:(H,W,f)=>{var y=f(74258),g=f(62845),e=f(2817),t=f(9616),r=f(35009)("species"),s=y.Array;H.exports=function(c){var v;return g(c)&&(e(v=c.constructor)&&(v===s||g(v.prototype))||t(v)&&null===(v=v[r]))&&(v=void 0),void 0===v?s:v}},47137:(H,W,f)=>{var y=f(83758);H.exports=function(g,e){return new(y(g))(0===e?0:e)}},99985:(H,W,f)=>{var y=f(49403),g=f(26151);H.exports=function(e,t,n,r){try{return r?t(y(n)[0],n[1]):t(n)}catch(s){g(e,"throw",s)}}},85306:(H,W,f)=>{var g=f(35009)("iterator"),e=!1;try{var t=0,n={next:function(){return{done:!!t++}},return:function(){e=!0}};n[g]=function(){return this},Array.from(n,function(){throw 2})}catch(r){}H.exports=function(r,s){if(!s&&!e)return!1;var c=!1;try{var v={};v[g]=function(){return{next:function(){return{done:c=!0}}}},r(v)}catch(D){}return c}},14592:(H,W,f)=>{var y=f(94800),g=y({}.toString),e=y("".slice);H.exports=function(t){return e(g(t),8,-1)}},27870:(H,W,f)=>{var y=f(74258),g=f(68118),e=f(14563),t=f(14592),r=f(35009)("toStringTag"),s=y.Object,c="Arguments"==t(function(){return arguments}());H.exports=g?t:function(D){var P,G,it;return void 0===D?"Undefined":null===D?"Null":"string"==typeof(G=function(D,P){try{return D[P]}catch(G){}}(P=s(D),r))?G:c?t(P):"Object"==(it=t(P))&&e(P.callee)?"Arguments":it}},56510:(H,W,f)=>{var y=f(94800),g=f(58467),e=y("".replace),t=y("".split),n=y([].join),r=String(Error("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(r),v=/@[^\n]*\n/.test(r)&&!/zxcasd/.test(r);H.exports=function(D,P){if("string"!=typeof D)return D;if(c)for(;P--;)D=e(D,s,"");else if(v)return n(g(t(D,"\n"),P),"\n");return D}},82639:(H,W,f)=>{"use strict";var y=f(94800),g=f(32914),e=f(10344).getWeakData,t=f(49403),n=f(9616),r=f(7561),s=f(74266),c=f(93949),v=f(68739),D=f(46053),P=D.set,G=D.getterFor,it=c.find,q=c.findIndex,bt=y([].splice),Ft=0,gt=function(Kt){return Kt.frozen||(Kt.frozen=new wt)},wt=function(){this.entries=[]},Bt=function(Kt,It){return it(Kt.entries,function(St){return St[0]===It})};wt.prototype={get:function(Kt){var It=Bt(this,Kt);if(It)return It[1]},has:function(Kt){return!!Bt(this,Kt)},set:function(Kt,It){var St=Bt(this,Kt);St?St[1]=It:this.entries.push([Kt,It])},delete:function(Kt){var It=q(this.entries,function(St){return St[0]===Kt});return~It&&bt(this.entries,It,1),!!~It}},H.exports={getConstructor:function(Kt,It,St,lt){var ft=Kt(function(ot,st){r(ot,ht),P(ot,{type:It,id:Ft++,frozen:void 0}),null!=st&&s(st,ot[lt],{that:ot,AS_ENTRIES:St})}),ht=ft.prototype,Gt=G(It),ut=function(ot,st,Z){var Zt=Gt(ot),vt=e(t(st),!0);return!0===vt?gt(Zt).set(st,Z):vt[Zt.id]=Z,ot};return g(ht,{delete:function(ot){var st=Gt(this);if(!n(ot))return!1;var Z=e(ot);return!0===Z?gt(st).delete(ot):Z&&v(Z,st.id)&&delete Z[st.id]},has:function(st){var Z=Gt(this);if(!n(st))return!1;var Zt=e(st);return!0===Zt?gt(Z).has(st):Zt&&v(Zt,Z.id)}}),g(ht,St?{get:function(st){var Z=Gt(this);if(n(st)){var Zt=e(st);return!0===Zt?gt(Z).get(st):Zt?Zt[Z.id]:void 0}},set:function(st,Z){return ut(this,st,Z)}}:{add:function(st){return ut(this,st,!0)}}),ft}}},53303:(H,W,f)=>{"use strict";var y=f(5327),g=f(74258),e=f(10344),t=f(77054),n=f(94119),r=f(74266),s=f(7561),c=f(14563),v=f(9616),D=f(8144),P=f(35270).f,G=f(93949).forEach,it=f(46876),q=f(46053),bt=q.set,Ft=q.getterFor;H.exports=function(gt,wt,Bt){var Gt,Kt=-1!==gt.indexOf("Map"),It=-1!==gt.indexOf("Weak"),St=Kt?"set":"add",lt=g[gt],ft=lt&&lt.prototype,ht={};if(it&&c(lt)&&(It||ft.forEach&&!t(function(){(new lt).entries().next()}))){var ut=(Gt=wt(function(st,Z){bt(s(st,ut),{type:gt,collection:new lt}),null!=Z&&r(Z,st[St],{that:st,AS_ENTRIES:Kt})})).prototype,ot=Ft(gt);G(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(st){var Z="add"==st||"set"==st;st in ft&&(!It||"clear"!=st)&&n(ut,st,function(Zt,vt){var At=ot(this).collection;if(!Z&&It&&!v(Zt))return"get"==st&&void 0;var re=At[st](0===Zt?0:Zt,vt);return Z?this:re})}),It||P(ut,"size",{configurable:!0,get:function(){return ot(this).collection.size}})}else Gt=Bt.getConstructor(wt,gt,Kt,St),e.enable();return D(Gt,gt,!1,!0),ht[gt]=Gt,y({global:!0,forced:!0},ht),It||Bt.setStrong(Gt,gt,Kt),Gt}},53663:(H,W,f)=>{var y=f(68739),g=f(51566),e=f(11841),t=f(35270);H.exports=function(n,r){for(var s=g(r),c=t.f,v=e.f,D=0;D<s.length;D++){var P=s[D];y(n,P)||c(n,P,v(r,P))}}},56850:(H,W,f)=>{var g=f(35009)("match");H.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[g]=!1,"/./"[e](t)}catch(r){}}return!1}},63413:(H,W,f)=>{var y=f(77054);H.exports=!y(function(){function g(){}return g.prototype.constructor=null,Object.getPrototypeOf(new g)!==g.prototype})},94577:(H,W,f)=>{"use strict";var y=f(93489).IteratorPrototype,g=f(66112),e=f(25677),t=f(8144),n=f(76539),r=function(){return this};H.exports=function(s,c,v,D){var P=c+" Iterator";return s.prototype=g(y,{next:e(+!D,v)}),t(s,P,!1,!0),n[P]=r,s}},94119:(H,W,f)=>{var y=f(46876),g=f(35270),e=f(25677);H.exports=y?function(t,n,r){return g.f(t,n,e(1,r))}:function(t,n,r){return t[n]=r,t}},25677:H=>{H.exports=function(W,f){return{enumerable:!(1&W),configurable:!(2&W),writable:!(4&W),value:f}}},13493:(H,W,f)=>{"use strict";var y=f(84061),g=f(35270),e=f(25677);H.exports=function(t,n,r){var s=y(n);s in t?g.f(t,s,e(0,r)):t[s]=r}},63957:(H,W,f)=>{"use strict";var y=f(5327),g=f(45439),e=f(31818),t=f(42515),n=f(14563),r=f(94577),s=f(58826),c=f(3358),v=f(8144),D=f(94119),P=f(73294),G=f(35009),it=f(76539),q=f(93489),bt=t.PROPER,Ft=t.CONFIGURABLE,gt=q.IteratorPrototype,wt=q.BUGGY_SAFARI_ITERATORS,Bt=G("iterator"),It="values",St="entries",lt=function(){return this};H.exports=function(ft,ht,Gt,ut,ot,st,Z){r(Gt,ht,ut);var Re,je,Si,Zt=function(Ze){if(Ze===ot&&oe)return oe;if(!wt&&Ze in re)return re[Ze];switch(Ze){case"keys":case It:case St:return function(){return new Gt(this,Ze)}}return function(){return new Gt(this)}},vt=ht+" Iterator",At=!1,re=ft.prototype,ve=re[Bt]||re["@@iterator"]||ot&&re[ot],oe=!wt&&ve||Zt(ot),Ie="Array"==ht&&re.entries||ve;if(Ie&&(Re=s(Ie.call(new ft)))!==Object.prototype&&Re.next&&(!e&&s(Re)!==gt&&(c?c(Re,gt):n(Re[Bt])||P(Re,Bt,lt)),v(Re,vt,!0,!0),e&&(it[vt]=lt)),bt&&ot==It&&ve&&ve.name!==It&&(!e&&Ft?D(re,"name",It):(At=!0,oe=function(){return g(ve,this)})),ot)if(je={values:Zt(It),keys:st?oe:Zt("keys"),entries:Zt(St)},Z)for(Si in je)(wt||At||!(Si in re))&&P(re,Si,je[Si]);else y({target:ht,proto:!0,forced:wt||At},je);return(!e||Z)&&re[Bt]!==oe&&P(re,Bt,oe,{name:ot}),it[ht]=oe,je}},90898:(H,W,f)=>{var y=f(52457),g=f(68739),e=f(79182),t=f(35270).f;H.exports=function(n){var r=y.Symbol||(y.Symbol={});g(r,n)||t(r,n,{value:e.f(n)})}},46876:(H,W,f)=>{var y=f(77054);H.exports=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},2152:(H,W,f)=>{var y=f(74258),g=f(9616),e=y.document,t=g(e)&&g(e.createElement);H.exports=function(n){return t?e.createElement(n):{}}},6379:H=>{H.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},15418:H=>{H.exports="object"==typeof window},4489:(H,W,f)=>{var y=f(80537),g=f(74258);H.exports=/ipad|iphone|ipod/i.test(y)&&void 0!==g.Pebble},78561:(H,W,f)=>{var y=f(80537);H.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(y)},1593:(H,W,f)=>{var y=f(14592),g=f(74258);H.exports="process"==y(g.process)},43522:(H,W,f)=>{var y=f(80537);H.exports=/web0s(?!.*chrome)/i.test(y)},80537:(H,W,f)=>{var y=f(26444);H.exports=y("navigator","userAgent")||""},97502:(H,W,f)=>{var s,c,y=f(74258),g=f(80537),e=y.process,t=y.Deno,n=e&&e.versions||t&&t.version,r=n&&n.v8;r&&(c=(s=r.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&g&&(!(s=g.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=g.match(/Chrome\/(\d+)/))&&(c=+s[1]),H.exports=c},6747:(H,W,f)=>{var y=f(52457);H.exports=function(g){return y[g+"Prototype"]}},59595:H=>{H.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},39581:(H,W,f)=>{var y=f(77054),g=f(25677);H.exports=!y(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",g(1,7)),7!==e.stack)})},5327:(H,W,f)=>{"use strict";var y=f(74258),g=f(66864),e=f(94800),t=f(14563),n=f(11841).f,r=f(74088),s=f(52457),c=f(94640),v=f(94119),D=f(68739),P=function(G){var it=function(q,bt,Ft){if(this instanceof it){switch(arguments.length){case 0:return new G;case 1:return new G(q);case 2:return new G(q,bt)}return new G(q,bt,Ft)}return g(G,this,arguments)};return it.prototype=G.prototype,it};H.exports=function(G,it){var St,lt,ft,ht,Gt,ut,ot,st,q=G.target,bt=G.global,Ft=G.stat,gt=G.proto,wt=bt?y:Ft?y[q]:(y[q]||{}).prototype,Bt=bt?s:s[q]||v(s,q,{})[q],Kt=Bt.prototype;for(ft in it)St=!r(bt?ft:q+(Ft?".":"#")+ft,G.forced)&&wt&&D(wt,ft),Gt=Bt[ft],St&&(ut=G.noTargetGet?(st=n(wt,ft))&&st.value:wt[ft]),ht=St&&ut?ut:it[ft],(!St||typeof Gt!=typeof ht)&&(ot=G.bind&&St?c(ht,y):G.wrap&&St?P(ht):gt&&t(ht)?e(ht):ht,(G.sham||ht&&ht.sham||Gt&&Gt.sham)&&v(ot,"sham",!0),v(Bt,ft,ot),gt&&(D(s,lt=q+"Prototype")||v(s,lt,{}),v(s[lt],ft,ht),G.real&&Kt&&!Kt[ft]&&v(Kt,ft,ht)))}},77054:H=>{H.exports=function(W){try{return!!W()}catch(f){return!0}}},7545:(H,W,f)=>{var y=f(77054);H.exports=!y(function(){return Object.isExtensible(Object.preventExtensions({}))})},66864:H=>{var W=Function.prototype,f=W.apply,g=W.call;H.exports="object"==typeof Reflect&&Reflect.apply||(W.bind?g.bind(f):function(){return g.apply(f,arguments)})},94640:(H,W,f)=>{var y=f(94800),g=f(6567),e=y(y.bind);H.exports=function(t,n){return g(t),void 0===n?t:e?e(t,n):function(){return t.apply(n,arguments)}}},45439:H=>{var W=Function.prototype.call;H.exports=W.bind?W.bind(W):function(){return W.apply(W,arguments)}},42515:(H,W,f)=>{var y=f(46876),g=f(68739),e=Function.prototype,t=y&&Object.getOwnPropertyDescriptor,n=g(e,"name"),r=n&&"something"===function(){}.name,s=n&&(!y||y&&t(e,"name").configurable);H.exports={EXISTS:n,PROPER:r,CONFIGURABLE:s}},94800:H=>{var W=Function.prototype,f=W.bind,y=W.call,g=f&&f.bind(y);H.exports=f?function(e){return e&&g(y,e)}:function(e){return e&&function(){return y.apply(e,arguments)}}},26444:(H,W,f)=>{var y=f(52457),g=f(74258),e=f(14563),t=function(n){return e(n)?n:void 0};H.exports=function(n,r){return arguments.length<2?t(y[n])||t(g[n]):y[n]&&y[n][r]||g[n]&&g[n][r]}},50806:(H,W,f)=>{var y=f(27870),g=f(78504),e=f(76539),n=f(35009)("iterator");H.exports=function(r){if(null!=r)return g(r,n)||g(r,"@@iterator")||e[y(r)]}},72442:(H,W,f)=>{var y=f(74258),g=f(45439),e=f(6567),t=f(49403),n=f(98217),r=f(50806),s=y.TypeError;H.exports=function(c,v){var D=arguments.length<2?r(c):v;if(e(D))return t(g(D,c));throw s(n(c)+" is not iterable")}},78504:(H,W,f)=>{var y=f(6567);H.exports=function(g,e){var t=g[e];return null==t?void 0:y(t)}},74258:H=>{var W=function(f){return f&&f.Math==Math&&f};H.exports=W("object"==typeof globalThis&&globalThis)||W("object"==typeof window&&window)||W("object"==typeof self&&self)||W("object"==typeof global&&global)||function(){return this}()||Function("return this")()},68739:(H,W,f)=>{var y=f(94800),g=f(34972),e=y({}.hasOwnProperty);H.exports=Object.hasOwn||function(n,r){return e(g(n),r)}},41933:H=>{H.exports={}},47157:(H,W,f)=>{var y=f(74258);H.exports=function(g,e){var t=y.console;t&&t.error&&(1==arguments.length?t.error(g):t.error(g,e))}},70364:(H,W,f)=>{var y=f(26444);H.exports=y("document","documentElement")},58310:(H,W,f)=>{var y=f(46876),g=f(77054),e=f(2152);H.exports=!y&&!g(function(){return 7!=Object.defineProperty(e("div"),"a",{get:function(){return 7}}).a})},8317:(H,W,f)=>{var y=f(74258),g=f(94800),e=f(77054),t=f(14592),n=y.Object,r=g("".split);H.exports=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return"String"==t(s)?r(s,""):n(s)}:n},19656:(H,W,f)=>{var y=f(94800),g=f(14563),e=f(6671),t=y(Function.toString);g(e.inspectSource)||(e.inspectSource=function(n){return t(n)}),H.exports=e.inspectSource},44187:(H,W,f)=>{var y=f(9616),g=f(94119);H.exports=function(e,t){y(t)&&"cause"in t&&g(e,"cause",t.cause)}},10344:(H,W,f)=>{var y=f(5327),g=f(94800),e=f(41933),t=f(9616),n=f(68739),r=f(35270).f,s=f(36336),c=f(25278),v=f(15774),D=f(48110),P=f(7545),G=!1,it=D("meta"),q=0,bt=function(It){r(It,it,{value:{objectID:"O"+q++,weakData:{}}})},Kt=H.exports={enable:function(){Kt.enable=function(){},G=!0;var It=s.f,St=g([].splice),lt={};lt[it]=1,It(lt).length&&(s.f=function(ft){for(var ht=It(ft),Gt=0,ut=ht.length;Gt<ut;Gt++)if(ht[Gt]===it){St(ht,Gt,1);break}return ht},y({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:c.f}))},fastKey:function(It,St){if(!t(It))return"symbol"==typeof It?It:("string"==typeof It?"S":"P")+It;if(!n(It,it)){if(!v(It))return"F";if(!St)return"E";bt(It)}return It[it].objectID},getWeakData:function(It,St){if(!n(It,it)){if(!v(It))return!0;if(!St)return!1;bt(It)}return It[it].weakData},onFreeze:function(It){return P&&G&&v(It)&&!n(It,it)&&bt(It),It}};e[it]=!0},46053:(H,W,f)=>{var it,q,bt,y=f(66654),g=f(74258),e=f(94800),t=f(9616),n=f(94119),r=f(68739),s=f(6671),c=f(82062),v=f(41933),D="Object already initialized",P=g.TypeError;if(y||s.state){var wt=s.state||(s.state=new(0,g.WeakMap)),Bt=e(wt.get),Kt=e(wt.has),It=e(wt.set);it=function(lt,ft){if(Kt(wt,lt))throw new P(D);return ft.facade=lt,It(wt,lt,ft),ft},q=function(lt){return Bt(wt,lt)||{}},bt=function(lt){return Kt(wt,lt)}}else{var St=c("state");v[St]=!0,it=function(lt,ft){if(r(lt,St))throw new P(D);return ft.facade=lt,n(lt,St,ft),ft},q=function(lt){return r(lt,St)?lt[St]:{}},bt=function(lt){return r(lt,St)}}H.exports={set:it,get:q,has:bt,enforce:function(lt){return bt(lt)?q(lt):it(lt,{})},getterFor:function(lt){return function(ft){var ht;if(!t(ft)||(ht=q(ft)).type!==lt)throw P("Incompatible receiver, "+lt+" required");return ht}}}},44821:(H,W,f)=>{var y=f(35009),g=f(76539),e=y("iterator"),t=Array.prototype;H.exports=function(n){return void 0!==n&&(g.Array===n||t[e]===n)}},62845:(H,W,f)=>{var y=f(14592);H.exports=Array.isArray||function(e){return"Array"==y(e)}},14563:H=>{H.exports=function(W){return"function"==typeof W}},2817:(H,W,f)=>{var y=f(94800),g=f(77054),e=f(14563),t=f(27870),n=f(26444),r=f(19656),s=function(){},c=[],v=n("Reflect","construct"),D=/^\s*(?:class|function)\b/,P=y(D.exec),G=!D.exec(s),it=function(bt){if(!e(bt))return!1;try{return v(s,c,bt),!0}catch(Ft){return!1}};H.exports=!v||g(function(){var bt;return it(it.call)||!it(Object)||!it(function(){bt=!0})||bt})?function(bt){if(!e(bt))return!1;switch(t(bt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return G||!!P(D,r(bt))}:it},74088:(H,W,f)=>{var y=f(77054),g=f(14563),e=/#|\.prototype\./,t=function(v,D){var P=r[n(v)];return P==c||P!=s&&(g(D)?y(D):!!D)},n=t.normalize=function(v){return String(v).replace(e,".").toLowerCase()},r=t.data={},s=t.NATIVE="N",c=t.POLYFILL="P";H.exports=t},9616:(H,W,f)=>{var y=f(14563);H.exports=function(g){return"object"==typeof g?null!==g:y(g)}},31818:H=>{H.exports=!0},7191:(H,W,f)=>{var y=f(9616),g=f(14592),t=f(35009)("match");H.exports=function(n){var r;return y(n)&&(void 0!==(r=n[t])?!!r:"RegExp"==g(n))}},7683:(H,W,f)=>{var y=f(74258),g=f(26444),e=f(14563),t=f(61517),n=f(8696),r=y.Object;H.exports=n?function(s){return"symbol"==typeof s}:function(s){var c=g("Symbol");return e(c)&&t(c.prototype,r(s))}},74266:(H,W,f)=>{var y=f(74258),g=f(94640),e=f(45439),t=f(49403),n=f(98217),r=f(44821),s=f(25979),c=f(61517),v=f(72442),D=f(50806),P=f(26151),G=y.TypeError,it=function(bt,Ft){this.stopped=bt,this.result=Ft},q=it.prototype;H.exports=function(bt,Ft,gt){var lt,ft,ht,Gt,ut,ot,st,Bt=!(!gt||!gt.AS_ENTRIES),Kt=!(!gt||!gt.IS_ITERATOR),It=!(!gt||!gt.INTERRUPTED),St=g(Ft,gt&&gt.that),Z=function(vt){return lt&&P(lt,"normal",vt),new it(!0,vt)},Zt=function(vt){return Bt?(t(vt),It?St(vt[0],vt[1],Z):St(vt[0],vt[1])):It?St(vt,Z):St(vt)};if(Kt)lt=bt;else{if(!(ft=D(bt)))throw G(n(bt)+" is not iterable");if(r(ft)){for(ht=0,Gt=s(bt);Gt>ht;ht++)if((ut=Zt(bt[ht]))&&c(q,ut))return ut;return new it(!1)}lt=v(bt,ft)}for(ot=lt.next;!(st=e(ot,lt)).done;){try{ut=Zt(st.value)}catch(vt){P(lt,"throw",vt)}if("object"==typeof ut&&ut&&c(q,ut))return ut}return new it(!1)}},26151:(H,W,f)=>{var y=f(45439),g=f(49403),e=f(78504);H.exports=function(t,n,r){var s,c;g(t);try{if(!(s=e(t,"return"))){if("throw"===n)throw r;return r}s=y(s,t)}catch(v){c=!0,s=v}if("throw"===n)throw r;if(c)throw s;return g(s),r}},93489:(H,W,f)=>{"use strict";var D,P,G,y=f(77054),g=f(14563),e=f(66112),t=f(58826),n=f(73294),r=f(35009),s=f(31818),c=r("iterator"),v=!1;[].keys&&("next"in(G=[].keys())?(P=t(t(G)))!==Object.prototype&&(D=P):v=!0),null==D||y(function(){var q={};return D[c].call(q)!==q})?D={}:s&&(D=e(D)),g(D[c])||n(D,c,function(){return this}),H.exports={IteratorPrototype:D,BUGGY_SAFARI_ITERATORS:v}},76539:H=>{H.exports={}},25979:(H,W,f)=>{var y=f(26965);H.exports=function(g){return y(g.length)}},17547:(H,W,f)=>{var bt,Ft,gt,wt,Bt,Kt,It,St,y=f(74258),g=f(94640),e=f(11841).f,t=f(88530).set,n=f(78561),r=f(4489),s=f(43522),c=f(1593),v=y.MutationObserver||y.WebKitMutationObserver,D=y.document,P=y.process,G=y.Promise,it=e(y,"queueMicrotask"),q=it&&it.value;q||(bt=function(){var lt,ft;for(c&&(lt=P.domain)&&lt.exit();Ft;){ft=Ft.fn,Ft=Ft.next;try{ft()}catch(ht){throw Ft?wt():gt=void 0,ht}}gt=void 0,lt&&lt.enter()},n||c||s||!v||!D?!r&&G&&G.resolve?((It=G.resolve(void 0)).constructor=G,St=g(It.then,It),wt=function(){St(bt)}):c?wt=function(){P.nextTick(bt)}:(t=g(t,y),wt=function(){t(bt)}):(Bt=!0,Kt=D.createTextNode(""),new v(bt).observe(Kt,{characterData:!0}),wt=function(){Kt.data=Bt=!Bt})),H.exports=q||function(lt){var ft={fn:lt,next:void 0};gt&&(gt.next=ft),Ft||(Ft=ft,wt()),gt=ft}},64505:(H,W,f)=>{var y=f(74258);H.exports=y.Promise},98615:(H,W,f)=>{var y=f(97502),g=f(77054);H.exports=!!Object.getOwnPropertySymbols&&!g(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&y&&y<41})},30251:(H,W,f)=>{var y=f(77054),g=f(35009),e=f(31818),t=g("iterator");H.exports=!y(function(){var n=new URL("b?a=1&b=2&c=3","http://a"),r=n.searchParams,s="";return n.pathname="c%20d",r.forEach(function(c,v){r.delete("b"),s+=v+c}),e&&!n.toJSON||!r.sort||"http://a/c%20d?a=1&c=3"!==n.href||"3"!==r.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!r[t]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==s||"x"!==new URL("http://x",void 0).host})},66654:(H,W,f)=>{var y=f(74258),g=f(14563),e=f(19656),t=y.WeakMap;H.exports=g(t)&&/native code/.test(e(t))},51189:(H,W,f)=>{"use strict";var y=f(6567),g=function(e){var t,n;this.promise=new e(function(r,s){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=r,n=s}),this.resolve=y(t),this.reject=y(n)};H.exports.f=function(e){return new g(e)}},83330:(H,W,f)=>{var y=f(16096);H.exports=function(g,e){return void 0===g?arguments.length<2?"":e:y(g)}},38743:(H,W,f)=>{var y=f(74258),g=f(7191),e=y.TypeError;H.exports=function(t){if(g(t))throw e("The method doesn't accept regular expressions");return t}},67271:(H,W,f)=>{"use strict";var y=f(46876),g=f(94800),e=f(45439),t=f(77054),n=f(39698),r=f(72584),s=f(32018),c=f(34972),v=f(8317),D=Object.assign,P=Object.defineProperty,G=g([].concat);H.exports=!D||t(function(){if(y&&1!==D({b:1},D(P({},"a",{enumerable:!0,get:function(){P(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var it={},q={},bt=Symbol(),Ft="abcdefghijklmnopqrst";return it[bt]=7,Ft.split("").forEach(function(gt){q[gt]=gt}),7!=D({},it)[bt]||n(D({},q)).join("")!=Ft})?function(q,bt){for(var Ft=c(q),gt=arguments.length,wt=1,Bt=r.f,Kt=s.f;gt>wt;)for(var ht,It=v(arguments[wt++]),St=Bt?G(n(It),Bt(It)):n(It),lt=St.length,ft=0;lt>ft;)ht=St[ft++],(!y||e(Kt,It,ht))&&(Ft[ht]=It[ht]);return Ft}:D},66112:(H,W,f)=>{var gt,y=f(49403),g=f(47398),e=f(59595),t=f(41933),n=f(70364),r=f(2152),s=f(82062),D="prototype",P="script",G=s("IE_PROTO"),it=function(){},q=function(Bt){return"<"+P+">"+Bt+"</"+P+">"},bt=function(Bt){Bt.write(q("")),Bt.close();var Kt=Bt.parentWindow.Object;return Bt=null,Kt},wt=function(){try{gt=new ActiveXObject("htmlfile")}catch(Kt){}wt="undefined"!=typeof document?document.domain&&gt?bt(gt):function(){var It,Bt=r("iframe");return Bt.style.display="none",n.appendChild(Bt),Bt.src=String("javascript:"),(It=Bt.contentWindow.document).open(),It.write(q("document.F=Object")),It.close(),It.F}():bt(gt);for(var Bt=e.length;Bt--;)delete wt[D][e[Bt]];return wt()};t[G]=!0,H.exports=Object.create||function(Kt,It){var St;return null!==Kt?(it[D]=y(Kt),St=new it,it[D]=null,St[G]=Kt):St=wt(),void 0===It?St:g(St,It)}},47398:(H,W,f)=>{var y=f(46876),g=f(35270),e=f(49403),t=f(73684),n=f(39698);H.exports=y?Object.defineProperties:function(s,c){e(s);for(var it,v=t(c),D=n(c),P=D.length,G=0;P>G;)g.f(s,it=D[G++],v[it]);return s}},35270:(H,W,f)=>{var y=f(74258),g=f(46876),e=f(58310),t=f(49403),n=f(84061),r=y.TypeError,s=Object.defineProperty;W.f=g?s:function(v,D,P){if(t(v),D=n(D),t(P),e)try{return s(v,D,P)}catch(G){}if("get"in P||"set"in P)throw r("Accessors not supported");return"value"in P&&(v[D]=P.value),v}},11841:(H,W,f)=>{var y=f(46876),g=f(45439),e=f(32018),t=f(25677),n=f(73684),r=f(84061),s=f(68739),c=f(58310),v=Object.getOwnPropertyDescriptor;W.f=y?v:function(P,G){if(P=n(P),G=r(G),c)try{return v(P,G)}catch(it){}if(s(P,G))return t(!g(e.f,P,G),P[G])}},25278:(H,W,f)=>{var y=f(14592),g=f(73684),e=f(36336).f,t=f(58467),n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];H.exports.f=function(c){return n&&"Window"==y(c)?function(s){try{return e(s)}catch(c){return t(n)}}(c):e(g(c))}},36336:(H,W,f)=>{var y=f(27603),e=f(59595).concat("length","prototype");W.f=Object.getOwnPropertyNames||function(n){return y(n,e)}},72584:(H,W)=>{W.f=Object.getOwnPropertySymbols},58826:(H,W,f)=>{var y=f(74258),g=f(68739),e=f(14563),t=f(34972),n=f(82062),r=f(63413),s=n("IE_PROTO"),c=y.Object,v=c.prototype;H.exports=r?c.getPrototypeOf:function(D){var P=t(D);if(g(P,s))return P[s];var G=P.constructor;return e(G)&&P instanceof G?G.prototype:P instanceof c?v:null}},15774:(H,W,f)=>{var y=f(77054),g=f(9616),e=f(14592),t=f(39749),n=Object.isExtensible,r=y(function(){n(1)});H.exports=r||t?function(c){return!(!g(c)||t&&"ArrayBuffer"==e(c))&&(!n||n(c))}:n},61517:(H,W,f)=>{var y=f(94800);H.exports=y({}.isPrototypeOf)},27603:(H,W,f)=>{var y=f(94800),g=f(68739),e=f(73684),t=f(8440).indexOf,n=f(41933),r=y([].push);H.exports=function(s,c){var G,v=e(s),D=0,P=[];for(G in v)!g(n,G)&&g(v,G)&&r(P,G);for(;c.length>D;)g(v,G=c[D++])&&(~t(P,G)||r(P,G));return P}},39698:(H,W,f)=>{var y=f(27603),g=f(59595);H.exports=Object.keys||function(t){return y(t,g)}},32018:(H,W)=>{"use strict";var f={}.propertyIsEnumerable,y=Object.getOwnPropertyDescriptor,g=y&&!f.call({1:2},1);W.f=g?function(t){var n=y(this,t);return!!n&&n.enumerable}:f},3358:(H,W,f)=>{var y=f(94800),g=f(49403),e=f(67553);H.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r,t=!1,n={};try{(r=y(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(s){}return function(c,v){return g(c),e(v),t?r(c,v):c.__proto__=v,c}}():void 0)},22014:(H,W,f)=>{var y=f(46876),g=f(94800),e=f(39698),t=f(73684),r=g(f(32018).f),s=g([].push),c=function(v){return function(D){for(var Ft,P=t(D),G=e(P),it=G.length,q=0,bt=[];it>q;)Ft=G[q++],(!y||r(P,Ft))&&s(bt,v?[Ft,P[Ft]]:P[Ft]);return bt}};H.exports={entries:c(!0),values:c(!1)}},42691:(H,W,f)=>{"use strict";var y=f(68118),g=f(27870);H.exports=y?{}.toString:function(){return"[object "+g(this)+"]"}},27704:(H,W,f)=>{var y=f(74258),g=f(45439),e=f(14563),t=f(9616),n=y.TypeError;H.exports=function(r,s){var c,v;if("string"===s&&e(c=r.toString)&&!t(v=g(c,r))||e(c=r.valueOf)&&!t(v=g(c,r))||"string"!==s&&e(c=r.toString)&&!t(v=g(c,r)))return v;throw n("Can't convert object to primitive value")}},51566:(H,W,f)=>{var y=f(26444),g=f(94800),e=f(36336),t=f(72584),n=f(49403),r=g([].concat);H.exports=y("Reflect","ownKeys")||function(c){var v=e.f(n(c)),D=t.f;return D?r(v,D(c)):v}},52457:H=>{H.exports={}},7286:H=>{H.exports=function(W){try{return{error:!1,value:W()}}catch(f){return{error:!0,value:f}}}},47249:(H,W,f)=>{var y=f(49403),g=f(9616),e=f(51189);H.exports=function(t,n){if(y(t),g(n)&&n.constructor===t)return n;var r=e.f(t);return(0,r.resolve)(n),r.promise}},32914:(H,W,f)=>{var y=f(73294);H.exports=function(g,e,t){for(var n in e)t&&t.unsafe&&g[n]?g[n]=e[n]:y(g,n,e[n],t);return g}},73294:(H,W,f)=>{var y=f(94119);H.exports=function(g,e,t,n){n&&n.enumerable?g[e]=t:y(g,e,t)}},45696:(H,W,f)=>{var g=f(74258).TypeError;H.exports=function(e){if(null==e)throw g("Can't call method on "+e);return e}},84360:(H,W,f)=>{var y=f(74258),g=Object.defineProperty;H.exports=function(e,t){try{g(y,e,{value:t,configurable:!0,writable:!0})}catch(n){y[e]=t}return t}},73012:(H,W,f)=>{"use strict";var y=f(26444),g=f(35270),e=f(35009),t=f(46876),n=e("species");H.exports=function(r){var s=y(r);t&&s&&!s[n]&&(0,g.f)(s,n,{configurable:!0,get:function(){return this}})}},8144:(H,W,f)=>{var y=f(68118),g=f(35270).f,e=f(94119),t=f(68739),n=f(42691),s=f(35009)("toStringTag");H.exports=function(c,v,D,P){if(c){var G=D?c:c.prototype;t(G,s)||g(G,s,{configurable:!0,value:v}),P&&!y&&e(G,"toString",n)}}},82062:(H,W,f)=>{var y=f(39302),g=f(48110),e=y("keys");H.exports=function(t){return e[t]||(e[t]=g(t))}},6671:(H,W,f)=>{var y=f(74258),g=f(84360),e="__core-js_shared__",t=y[e]||g(e,{});H.exports=t},39302:(H,W,f)=>{var y=f(31818),g=f(6671);(H.exports=function(e,t){return g[e]||(g[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.3",mode:y?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},7806:(H,W,f)=>{var y=f(49403),g=f(6767),t=f(35009)("species");H.exports=function(n,r){var c,s=y(n).constructor;return void 0===s||null==(c=y(s)[t])?r:g(c)}},4343:(H,W,f)=>{var y=f(94800),g=f(32938),e=f(16096),t=f(45696),n=y("".charAt),r=y("".charCodeAt),s=y("".slice),c=function(v){return function(D,P){var bt,Ft,G=e(t(D)),it=g(P),q=G.length;return it<0||it>=q?v?"":void 0:(bt=r(G,it))<55296||bt>56319||it+1===q||(Ft=r(G,it+1))<56320||Ft>57343?v?n(G,it):bt:v?s(G,it,it+2):Ft-56320+(bt-55296<<10)+65536}};H.exports={codeAt:c(!1),charAt:c(!0)}},88530:(H,W,f)=>{var St,lt,ft,ht,y=f(74258),g=f(66864),e=f(94640),t=f(14563),n=f(68739),r=f(77054),s=f(70364),c=f(64716),v=f(2152),D=f(78561),P=f(1593),G=y.setImmediate,it=y.clearImmediate,q=y.process,bt=y.Dispatch,Ft=y.Function,gt=y.MessageChannel,wt=y.String,Bt=0,Kt={},It="onreadystatechange";try{St=y.location}catch(Z){}var Gt=function(Z){if(n(Kt,Z)){var Zt=Kt[Z];delete Kt[Z],Zt()}},ut=function(Z){return function(){Gt(Z)}},ot=function(Z){Gt(Z.data)},st=function(Z){y.postMessage(wt(Z),St.protocol+"//"+St.host)};(!G||!it)&&(G=function(Zt){var vt=c(arguments,1);return Kt[++Bt]=function(){g(t(Zt)?Zt:Ft(Zt),void 0,vt)},lt(Bt),Bt},it=function(Zt){delete Kt[Zt]},P?lt=function(Z){q.nextTick(ut(Z))}:bt&&bt.now?lt=function(Z){bt.now(ut(Z))}:gt&&!D?(ht=(ft=new gt).port2,ft.port1.onmessage=ot,lt=e(ht.postMessage,ht)):y.addEventListener&&t(y.postMessage)&&!y.importScripts&&St&&"file:"!==St.protocol&&!r(st)?(lt=st,y.addEventListener("message",ot,!1)):lt=It in v("script")?function(Z){s.appendChild(v("script"))[It]=function(){s.removeChild(this),Gt(Z)}}:function(Z){setTimeout(ut(Z),0)}),H.exports={set:G,clear:it}},69723:(H,W,f)=>{var y=f(32938),g=Math.max,e=Math.min;H.exports=function(t,n){var r=y(t);return r<0?g(r+n,0):e(r,n)}},73684:(H,W,f)=>{var y=f(8317),g=f(45696);H.exports=function(e){return y(g(e))}},32938:H=>{var W=Math.ceil,f=Math.floor;H.exports=function(y){var g=+y;return g!=g||0===g?0:(g>0?f:W)(g)}},26965:(H,W,f)=>{var y=f(32938),g=Math.min;H.exports=function(e){return e>0?g(y(e),9007199254740991):0}},34972:(H,W,f)=>{var y=f(74258),g=f(45696),e=y.Object;H.exports=function(t){return e(g(t))}},57350:(H,W,f)=>{var y=f(74258),g=f(45439),e=f(9616),t=f(7683),n=f(78504),r=f(27704),s=f(35009),c=y.TypeError,v=s("toPrimitive");H.exports=function(D,P){if(!e(D)||t(D))return D;var it,G=n(D,v);if(G){if(void 0===P&&(P="default"),it=g(G,D,P),!e(it)||t(it))return it;throw c("Can't convert object to primitive value")}return void 0===P&&(P="number"),r(D,P)}},84061:(H,W,f)=>{var y=f(57350),g=f(7683);H.exports=function(e){var t=y(e,"string");return g(t)?t:t+""}},68118:(H,W,f)=>{var e={};e[f(35009)("toStringTag")]="z",H.exports="[object z]"===String(e)},16096:(H,W,f)=>{var y=f(74258),g=f(27870),e=y.String;H.exports=function(t){if("Symbol"===g(t))throw TypeError("Cannot convert a Symbol value to a string");return e(t)}},98217:(H,W,f)=>{var g=f(74258).String;H.exports=function(e){try{return g(e)}catch(t){return"Object"}}},48110:(H,W,f)=>{var y=f(94800),g=0,e=Math.random(),t=y(1..toString);H.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+t(++g+e,36)}},8696:(H,W,f)=>{var y=f(98615);H.exports=y&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},79182:(H,W,f)=>{var y=f(35009);W.f=y},35009:(H,W,f)=>{var y=f(74258),g=f(39302),e=f(68739),t=f(48110),n=f(98615),r=f(8696),s=g("wks"),c=y.Symbol,v=c&&c.for,D=r?c:c&&c.withoutSetter||t;H.exports=function(P){if(!e(s,P)||!n&&"string"!=typeof s[P]){var G="Symbol."+P;s[P]=n&&e(c,P)?c[P]:r&&v?v(G):D(G)}return s[P]}},10153:(H,W,f)=>{"use strict";var y=f(5327),g=f(74258),e=f(61517),t=f(58826),n=f(3358),r=f(53663),s=f(66112),c=f(94119),v=f(25677),D=f(56510),P=f(44187),G=f(74266),it=f(83330),q=f(35009),bt=f(39581),Ft=q("toStringTag"),gt=g.Error,wt=[].push,Bt=function(St,lt){var Gt,ft=arguments.length>2?arguments[2]:void 0,ht=e(Kt,this);n?Gt=n(new gt(void 0),ht?t(this):Kt):(Gt=ht?this:s(Kt),c(Gt,Ft,"Error")),c(Gt,"message",it(lt,"")),bt&&c(Gt,"stack",D(Gt.stack,1)),P(Gt,ft);var ut=[];return G(St,wt,{that:ut}),c(Gt,"errors",ut),Gt};n?n(Bt,gt):r(Bt,gt);var Kt=Bt.prototype=s(gt.prototype,{constructor:v(1,Bt),message:v(1,""),name:v(1,"AggregateError")});y({global:!0},{AggregateError:Bt})},30933:(H,W,f)=>{"use strict";var y=f(5327),g=f(74258),e=f(77054),t=f(62845),n=f(9616),r=f(34972),s=f(25979),c=f(13493),v=f(47137),D=f(54647),P=f(35009),G=f(97502),it=P("isConcatSpreadable"),q=9007199254740991,bt="Maximum allowed index exceeded",Ft=g.TypeError,gt=G>=51||!e(function(){var It=[];return It[it]=!1,It.concat()[0]!==It}),wt=D("concat"),Bt=function(It){if(!n(It))return!1;var St=It[it];return void 0!==St?!!St:t(It)};y({target:"Array",proto:!0,forced:!gt||!wt},{concat:function(St){var Gt,ut,ot,st,Z,lt=r(this),ft=v(lt,0),ht=0;for(Gt=-1,ot=arguments.length;Gt<ot;Gt++)if(Bt(Z=-1===Gt?lt:arguments[Gt])){if(ht+(st=s(Z))>q)throw Ft(bt);for(ut=0;ut<st;ut++,ht++)ut in Z&&c(ft,ht,Z[ut])}else{if(ht>=q)throw Ft(bt);c(ft,ht++,Z)}return ft.length=ht,ft}})},24572:(H,W,f)=>{"use strict";var y=f(5327),g=f(93949).filter;y({target:"Array",proto:!0,forced:!f(54647)("filter")},{filter:function(r){return g(this,r,arguments.length>1?arguments[1]:void 0)}})},40655:(H,W,f)=>{"use strict";var y=f(5327),g=f(93949).find,e=f(74159),t="find",n=!0;t in[]&&Array(1)[t](function(){n=!1}),y({target:"Array",proto:!0,forced:n},{find:function(s){return g(this,s,arguments.length>1?arguments[1]:void 0)}}),e(t)},91762:(H,W,f)=>{"use strict";var y=f(5327),g=f(45900);y({target:"Array",proto:!0,forced:[].forEach!=g},{forEach:g})},72190:(H,W,f)=>{var y=f(5327),g=f(75058);y({target:"Array",stat:!0,forced:!f(85306)(function(n){Array.from(n)})},{from:g})},38582:(H,W,f)=>{"use strict";var y=f(5327),g=f(8440).includes,e=f(74159);y({target:"Array",proto:!0},{includes:function(n){return g(this,n,arguments.length>1?arguments[1]:void 0)}}),e("includes")},13950:(H,W,f)=>{"use strict";var y=f(5327),g=f(94800),e=f(8440).indexOf,t=f(95750),n=g([].indexOf),r=!!n&&1/n([1],1,-0)<0,s=t("indexOf");y({target:"Array",proto:!0,forced:r||!s},{indexOf:function(v){var D=arguments.length>1?arguments[1]:void 0;return r?n(this,v,D)||0:e(this,v,D)}})},99025:(H,W,f)=>{f(5327)({target:"Array",stat:!0},{isArray:f(62845)})},23483:(H,W,f)=>{"use strict";var y=f(73684),g=f(74159),e=f(76539),t=f(46053),n=f(63957),r="Array Iterator",s=t.set,c=t.getterFor(r);H.exports=n(Array,"Array",function(v,D){s(this,{type:r,target:y(v),index:0,kind:D})},function(){var v=c(this),D=v.target,P=v.kind,G=v.index++;return!D||G>=D.length?(v.target=void 0,{value:void 0,done:!0}):"keys"==P?{value:G,done:!1}:"values"==P?{value:D[G],done:!1}:{value:[G,D[G]],done:!1}},"values"),e.Arguments=e.Array,g("keys"),g("values"),g("entries")},78713:(H,W,f)=>{"use strict";var y=f(5327),g=f(93949).map;y({target:"Array",proto:!0,forced:!f(54647)("map")},{map:function(r){return g(this,r,arguments.length>1?arguments[1]:void 0)}})},94775:(H,W,f)=>{"use strict";var y=f(5327),g=f(74258),e=f(62845),t=f(2817),n=f(9616),r=f(69723),s=f(25979),c=f(73684),v=f(13493),D=f(35009),P=f(54647),G=f(64716),it=P("slice"),q=D("species"),bt=g.Array,Ft=Math.max;y({target:"Array",proto:!0,forced:!it},{slice:function(wt,Bt){var ft,ht,Gt,Kt=c(this),It=s(Kt),St=r(wt,It),lt=r(void 0===Bt?It:Bt,It);if(e(Kt)&&((t(ft=Kt.constructor)&&(ft===bt||e(ft.prototype))||n(ft)&&null===(ft=ft[q]))&&(ft=void 0),ft===bt||void 0===ft))return G(Kt,St,lt);for(ht=new(void 0===ft?bt:ft)(Ft(lt-St,0)),Gt=0;St<lt;St++,Gt++)St in Kt&&v(ht,Gt,Kt[St]);return ht.length=Gt,ht}})},8195:(H,W,f)=>{"use strict";var y=f(5327),g=f(74258),e=f(69723),t=f(32938),n=f(25979),r=f(34972),s=f(47137),c=f(13493),D=f(54647)("splice"),P=g.TypeError,G=Math.max,it=Math.min,q=9007199254740991,bt="Maximum allowed length exceeded";y({target:"Array",proto:!0,forced:!D},{splice:function(gt,wt){var lt,ft,ht,Gt,ut,ot,Bt=r(this),Kt=n(Bt),It=e(gt,Kt),St=arguments.length;if(0===St?lt=ft=0:1===St?(lt=0,ft=Kt-It):(lt=St-2,ft=it(G(t(wt),0),Kt-It)),Kt+lt-ft>q)throw P(bt);for(ht=s(Bt,ft),Gt=0;Gt<ft;Gt++)(ut=It+Gt)in Bt&&c(ht,Gt,Bt[ut]);if(ht.length=ft,lt<ft){for(Gt=It;Gt<Kt-ft;Gt++)ot=Gt+lt,(ut=Gt+ft)in Bt?Bt[ot]=Bt[ut]:delete Bt[ot];for(Gt=Kt;Gt>Kt-ft+lt;Gt--)delete Bt[Gt-1]}else if(lt>ft)for(Gt=Kt-ft;Gt>It;Gt--)ot=Gt+lt-1,(ut=Gt+ft-1)in Bt?Bt[ot]=Bt[ut]:delete Bt[ot];for(Gt=0;Gt<lt;Gt++)Bt[Gt+It]=arguments[Gt+2];return Bt.length=Kt-ft+lt,ht}})},35249:(H,W,f)=>{var y=f(5327),g=f(74258),e=f(26444),t=f(66864),n=f(94800),r=f(77054),s=g.Array,c=e("JSON","stringify"),v=n(/./.exec),D=n("".charAt),P=n("".charCodeAt),G=n("".replace),it=n(1..toString),q=/[\uD800-\uDFFF]/g,bt=/^[\uD800-\uDBFF]$/,Ft=/^[\uDC00-\uDFFF]$/,gt=function(Bt,Kt,It){var St=D(It,Kt-1),lt=D(It,Kt+1);return v(bt,Bt)&&!v(Ft,lt)||v(Ft,Bt)&&!v(bt,St)?"\\u"+it(P(Bt,0),16):Bt},wt=r(function(){return'"\\udf06\\ud834"'!==c("\udf06\ud834")||'"\\udead"'!==c("\udead")});c&&y({target:"JSON",stat:!0,forced:wt},{stringify:function(Kt,It,St){for(var lt=0,ft=arguments.length,ht=s(ft);lt<ft;lt++)ht[lt]=arguments[lt];var Gt=t(c,null,ht);return"string"==typeof Gt?G(Gt,q,gt):Gt}})},2757:(H,W,f)=>{var y=f(74258);f(8144)(y.JSON,"JSON",!0)},58956:()=>{},41423:(H,W,f)=>{var y=f(5327),g=f(67271);y({target:"Object",stat:!0,forced:Object.assign!==g},{assign:g})},81892:(H,W,f)=>{var y=f(5327),g=f(46876);y({target:"Object",stat:!0,forced:!g,sham:!g},{defineProperties:f(47398)})},80247:(H,W,f)=>{var y=f(5327),g=f(46876);y({target:"Object",stat:!0,forced:!g,sham:!g},{defineProperty:f(35270).f})},22700:(H,W,f)=>{var y=f(5327),g=f(22014).entries;y({target:"Object",stat:!0},{entries:function(t){return g(t)}})},36342:(H,W,f)=>{var y=f(5327),g=f(77054),e=f(73684),t=f(11841).f,n=f(46876),r=g(function(){t(1)});y({target:"Object",stat:!0,forced:!n||r,sham:!n},{getOwnPropertyDescriptor:function(v,D){return t(e(v),D)}})},4878:(H,W,f)=>{var y=f(5327),g=f(46876),e=f(51566),t=f(73684),n=f(11841),r=f(13493);y({target:"Object",stat:!0,sham:!g},{getOwnPropertyDescriptors:function(c){for(var q,bt,v=t(c),D=n.f,P=e(v),G={},it=0;P.length>it;)void 0!==(bt=D(v,q=P[it++]))&&r(G,q,bt);return G}})},21165:(H,W,f)=>{var y=f(5327),g=f(34972),e=f(39698);y({target:"Object",stat:!0,forced:f(77054)(function(){e(1)})},{keys:function(s){return e(g(s))}})},79445:()=>{},35503:(H,W,f)=>{"use strict";var y=f(5327),g=f(45439),e=f(6567),t=f(51189),n=f(7286),r=f(74266);y({target:"Promise",stat:!0},{allSettled:function(c){var v=this,D=t.f(v),P=D.resolve,G=D.reject,it=n(function(){var q=e(v.resolve),bt=[],Ft=0,gt=1;r(c,function(wt){var Bt=Ft++,Kt=!1;gt++,g(q,v,wt).then(function(It){Kt||(Kt=!0,bt[Bt]={status:"fulfilled",value:It},--gt||P(bt))},function(It){Kt||(Kt=!0,bt[Bt]={status:"rejected",reason:It},--gt||P(bt))})}),--gt||P(bt)});return it.error&&G(it.value),D.promise}})},54677:(H,W,f)=>{"use strict";var y=f(5327),g=f(6567),e=f(26444),t=f(45439),n=f(51189),r=f(7286),s=f(74266),c="No one promise resolved";y({target:"Promise",stat:!0},{any:function(D){var P=this,G=e("AggregateError"),it=n.f(P),q=it.resolve,bt=it.reject,Ft=r(function(){var gt=g(P.resolve),wt=[],Bt=0,Kt=1,It=!1;s(D,function(St){var lt=Bt++,ft=!1;Kt++,t(gt,P,St).then(function(ht){ft||It||(It=!0,q(ht))},function(ht){ft||It||(ft=!0,wt[lt]=ht,--Kt||bt(new G(wt,c)))})}),--Kt||bt(new G(wt,c))});return Ft.error&&bt(Ft.value),it.promise}})},13013:(H,W,f)=>{"use strict";var y=f(5327),g=f(31818),e=f(64505),t=f(77054),n=f(26444),r=f(14563),s=f(7806),c=f(47249),v=f(73294);if(y({target:"Promise",proto:!0,real:!0,forced:!!e&&t(function(){e.prototype.finally.call({then:function(){}},function(){})})},{finally:function(G){var it=s(this,n("Promise")),q=r(G);return this.then(q?function(bt){return c(it,G()).then(function(){return bt})}:G,q?function(bt){return c(it,G()).then(function(){throw bt})}:G)}}),!g&&r(e)){var P=n("Promise").prototype.finally;e.prototype.finally!==P&&v(e.prototype,"finally",P,{unsafe:!0})}},56143:(H,W,f)=>{"use strict";var Me,ue,_e,be,y=f(5327),g=f(31818),e=f(74258),t=f(26444),n=f(45439),r=f(64505),s=f(73294),c=f(32914),v=f(3358),D=f(8144),P=f(73012),G=f(6567),it=f(14563),q=f(9616),bt=f(7561),Ft=f(19656),gt=f(74266),wt=f(85306),Bt=f(7806),Kt=f(88530).set,It=f(17547),St=f(47249),lt=f(47157),ft=f(51189),ht=f(7286),Gt=f(46053),ut=f(74088),ot=f(35009),st=f(15418),Z=f(1593),Zt=f(97502),vt=ot("species"),At="Promise",re=Gt.getterFor(At),ve=Gt.set,oe=Gt.getterFor(At),Ie=r&&r.prototype,Re=r,je=Ie,Si=e.TypeError,Ze=e.document,we=e.process,ci=ft.f,Wt=ci,Ae=!!(Ze&&Ze.createEvent&&e.dispatchEvent),Qt=it(e.PromiseRejectionEvent),ee="unhandledrejection",te=!1,Dt=ut(At,function(){var ni=Ft(Re),vi=ni!==String(Re);if(!vi&&66===Zt||g&&!je.finally)return!0;if(Zt>=51&&/native code/.test(ni))return!1;var Ce=new Re(function(Pi){Pi(1)}),Qe=function(Pi){Pi(function(){},function(){})};return(Ce.constructor={})[vt]=Qe,!(te=Ce.then(function(){})instanceof Qe)||!vi&&st&&!Qt}),zt=Dt||!wt(function(ni){Re.all(ni).catch(function(){})}),Ge=function(ni){var vi;return!(!q(ni)||!it(vi=ni.then))&&vi},Xe=function(ni,vi){if(!ni.notified){ni.notified=!0;var Ce=ni.reactions;It(function(){for(var Qe=ni.value,Ei=1==ni.state,Pi=0;Ce.length>Pi;){var pe,Le,Vi,ti=Ce[Pi++],ge=Ei?ti.ok:ti.fail,Pt=ti.resolve,dt=ti.reject,Nt=ti.domain;try{ge?(Ei||(2===ni.rejection&&on(ni),ni.rejection=1),!0===ge?pe=Qe:(Nt&&Nt.enter(),pe=ge(Qe),Nt&&(Nt.exit(),Vi=!0)),pe===ti.promise?dt(Si("Promise-chain cycle")):(Le=Ge(pe))?n(Le,pe,Pt,dt):Pt(pe)):dt(Qe)}catch(Ki){Nt&&!Vi&&Nt.exit(),dt(Ki)}}ni.reactions=[],ni.notified=!1,vi&&!ni.rejection&&bi(ni)})}},Ri=function(ni,vi,Ce){var Qe,Ei;Ae?((Qe=Ze.createEvent("Event")).promise=vi,Qe.reason=Ce,Qe.initEvent(ni,!1,!0),e.dispatchEvent(Qe)):Qe={promise:vi,reason:Ce},!Qt&&(Ei=e["on"+ni])?Ei(Qe):ni===ee&&lt("Unhandled promise rejection",Ce)},bi=function(ni){n(Kt,e,function(){var Ei,vi=ni.facade,Ce=ni.value;if(mi(ni)&&(Ei=ht(function(){Z?we.emit("unhandledRejection",Ce,vi):Ri(ee,vi,Ce)}),ni.rejection=Z||mi(ni)?2:1,Ei.error))throw Ei.value})},mi=function(ni){return 1!==ni.rejection&&!ni.parent},on=function(ni){n(Kt,e,function(){var vi=ni.facade;Z?we.emit("rejectionHandled",vi):Ri("rejectionhandled",vi,ni.value)})},li=function(ni,vi,Ce){return function(Qe){ni(vi,Qe,Ce)}},Bi=function(ni,vi,Ce){ni.done||(ni.done=!0,Ce&&(ni=Ce),ni.value=vi,ni.state=2,Xe(ni,!0))},Ii=function(ni,vi,Ce){if(!ni.done){ni.done=!0,Ce&&(ni=Ce);try{if(ni.facade===vi)throw Si("Promise can't be resolved itself");var Qe=Ge(vi);Qe?It(function(){var Ei={done:!1};try{n(Qe,vi,li(Ii,Ei,ni),li(Bi,Ei,ni))}catch(Pi){Bi(Ei,Pi,ni)}}):(ni.value=vi,ni.state=1,Xe(ni,!1))}catch(Ei){Bi({done:!1},Ei,ni)}}};if(Dt&&(Re=function(vi){bt(this,je),G(vi),n(Me,this);var Ce=re(this);try{vi(li(Ii,Ce),li(Bi,Ce))}catch(Qe){Bi(Ce,Qe)}},(Me=function(vi){ve(this,{type:At,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=c(je=Re.prototype,{then:function(vi,Ce){var Qe=oe(this),Ei=Qe.reactions,Pi=ci(Bt(this,Re));return Pi.ok=!it(vi)||vi,Pi.fail=it(Ce)&&Ce,Pi.domain=Z?we.domain:void 0,Qe.parent=!0,Ei[Ei.length]=Pi,0!=Qe.state&&Xe(Qe,!1),Pi.promise},catch:function(ni){return this.then(void 0,ni)}}),ue=function(){var ni=new Me,vi=re(ni);this.promise=ni,this.resolve=li(Ii,vi),this.reject=li(Bi,vi)},ft.f=ci=function(ni){return ni===Re||ni===_e?new ue(ni):Wt(ni)},!g&&it(r)&&Ie!==Object.prototype)){be=Ie.then,te||(s(Ie,"then",function(vi,Ce){var Qe=this;return new Re(function(Ei,Pi){n(be,Qe,Ei,Pi)}).then(vi,Ce)},{unsafe:!0}),s(Ie,"catch",je.catch,{unsafe:!0}));try{delete Ie.constructor}catch(ni){}v&&v(Ie,je)}y({global:!0,wrap:!0,forced:Dt},{Promise:Re}),D(Re,At,!1,!0),P(At),_e=t(At),y({target:At,stat:!0,forced:Dt},{reject:function(vi){var Ce=ci(this);return n(Ce.reject,void 0,vi),Ce.promise}}),y({target:At,stat:!0,forced:g||Dt},{resolve:function(vi){return St(g&&this===_e?Re:this,vi)}}),y({target:At,stat:!0,forced:zt},{all:function(vi){var Ce=this,Qe=ci(Ce),Ei=Qe.resolve,Pi=Qe.reject,ti=ht(function(){var ge=G(Ce.resolve),Pt=[],dt=0,Nt=1;gt(vi,function(pe){var Le=dt++,Vi=!1;Nt++,n(ge,Ce,pe).then(function(Ki){Vi||(Vi=!0,Pt[Le]=Ki,--Nt||Ei(Pt))},Pi)}),--Nt||Ei(Pt)});return ti.error&&Pi(ti.value),Qe.promise},race:function(vi){var Ce=this,Qe=ci(Ce),Ei=Qe.reject,Pi=ht(function(){var ti=G(Ce.resolve);gt(vi,function(ge){n(ti,Ce,ge).then(Qe.resolve,Ei)})});return Pi.error&&Ei(Pi.value),Qe.promise}})},32257:()=>{},53030:(H,W,f)=>{"use strict";var y=f(5327),g=f(94800),e=f(38743),t=f(45696),n=f(16096),r=f(56850),s=g("".indexOf);y({target:"String",proto:!0,forced:!r("includes")},{includes:function(v){return!!~s(n(t(this)),n(e(v)),arguments.length>1?arguments[1]:void 0)}})},21514:(H,W,f)=>{"use strict";var y=f(4343).charAt,g=f(16096),e=f(46053),t=f(63957),n="String Iterator",r=e.set,s=e.getterFor(n);t(String,"String",function(c){r(this,{type:n,string:g(c),index:0})},function(){var G,v=s(this),D=v.string,P=v.index;return P>=D.length?{value:void 0,done:!0}:(G=y(D,P),v.index+=G.length,{value:G,done:!1})})},35828:(H,W,f)=>{"use strict";var bt,y=f(5327),g=f(94800),e=f(11841).f,t=f(26965),n=f(16096),r=f(38743),s=f(45696),c=f(56850),v=f(31818),D=g("".startsWith),P=g("".slice),G=Math.min,it=c("startsWith");y({target:"String",proto:!0,forced:!(!v&&!it&&(bt=e(String.prototype,"startsWith"),bt&&!bt.writable)||it)},{startsWith:function(Ft){var gt=n(s(this));r(Ft);var wt=t(G(arguments.length>1?arguments[1]:void 0,gt.length)),Bt=n(Ft);return D?D(gt,Bt,wt):P(gt,wt,wt+Bt.length)===Bt}})},39334:(H,W,f)=>{f(90898)("asyncIterator")},27014:()=>{},57071:(H,W,f)=>{f(90898)("hasInstance")},58666:(H,W,f)=>{f(90898)("isConcatSpreadable")},15816:(H,W,f)=>{f(90898)("iterator")},57479:(H,W,f)=>{"use strict";var y=f(5327),g=f(74258),e=f(26444),t=f(66864),n=f(45439),r=f(94800),s=f(31818),c=f(46876),v=f(98615),D=f(77054),P=f(68739),G=f(62845),it=f(14563),q=f(9616),bt=f(61517),Ft=f(7683),gt=f(49403),wt=f(34972),Bt=f(73684),Kt=f(84061),It=f(16096),St=f(25677),lt=f(66112),ft=f(39698),ht=f(36336),Gt=f(25278),ut=f(72584),ot=f(11841),st=f(35270),Z=f(32018),Zt=f(64716),vt=f(73294),At=f(39302),re=f(82062),ve=f(41933),oe=f(48110),Ie=f(35009),Re=f(79182),je=f(90898),Si=f(8144),Ze=f(46053),we=f(93949).forEach,ci=re("hidden"),Wt="Symbol",Ae="prototype",Qt=Ie("toPrimitive"),ee=Ze.set,Mt=Ze.getterFor(Wt),Yt=Object[Ae],ye=g.Symbol,ui=ye&&ye[Ae],Te=g.TypeError,ce=g.QObject,te=e("JSON","stringify"),Me=ot.f,ue=st.f,_e=Gt.f,be=Z.f,Dt=r([].push),zt=At("symbols"),Ge=At("op-symbols"),Xe=At("string-to-symbol-registry"),Ri=At("symbol-to-string-registry"),bi=At("wks"),mi=!ce||!ce[Ae]||!ce[Ae].findChild,on=c&&D(function(){return 7!=lt(ue({},"a",{get:function(){return ue(this,"a",{value:7}).a}})).a})?function(ge,Pt,dt){var Nt=Me(Yt,Pt);Nt&&delete Yt[Pt],ue(ge,Pt,dt),Nt&&ge!==Yt&&ue(Yt,Pt,Nt)}:ue,li=function(ge,Pt){var dt=zt[ge]=lt(ui);return ee(dt,{type:Wt,tag:ge,description:Pt}),c||(dt.description=Pt),dt},Bi=function(Pt,dt,Nt){Pt===Yt&&Bi(Ge,dt,Nt),gt(Pt);var pe=Kt(dt);return gt(Nt),P(zt,pe)?(Nt.enumerable?(P(Pt,ci)&&Pt[ci][pe]&&(Pt[ci][pe]=!1),Nt=lt(Nt,{enumerable:St(0,!1)})):(P(Pt,ci)||ue(Pt,ci,St(1,{})),Pt[ci][pe]=!0),on(Pt,pe,Nt)):ue(Pt,pe,Nt)},Ii=function(Pt,dt){gt(Pt);var Nt=Bt(dt),pe=ft(Nt).concat(Ei(Nt));return we(pe,function(Le){(!c||n(vi,Nt,Le))&&Bi(Pt,Le,Nt[Le])}),Pt},vi=function(Pt){var dt=Kt(Pt),Nt=n(be,this,dt);return!(this===Yt&&P(zt,dt)&&!P(Ge,dt))&&(!(Nt||!P(this,dt)||!P(zt,dt)||P(this,ci)&&this[ci][dt])||Nt)},Ce=function(Pt,dt){var Nt=Bt(Pt),pe=Kt(dt);if(Nt!==Yt||!P(zt,pe)||P(Ge,pe)){var Le=Me(Nt,pe);return Le&&P(zt,pe)&&!(P(Nt,ci)&&Nt[ci][pe])&&(Le.enumerable=!0),Le}},Qe=function(Pt){var dt=_e(Bt(Pt)),Nt=[];return we(dt,function(pe){!P(zt,pe)&&!P(ve,pe)&&Dt(Nt,pe)}),Nt},Ei=function(Pt){var dt=Pt===Yt,Nt=_e(dt?Ge:Bt(Pt)),pe=[];return we(Nt,function(Le){P(zt,Le)&&(!dt||P(Yt,Le))&&Dt(pe,zt[Le])}),pe};if(v||(vt(ui=(ye=function(){if(bt(ui,this))throw Te("Symbol is not a constructor");var Pt=arguments.length&&void 0!==arguments[0]?It(arguments[0]):void 0,dt=oe(Pt),Nt=function(pe){this===Yt&&n(Nt,Ge,pe),P(this,ci)&&P(this[ci],dt)&&(this[ci][dt]=!1),on(this,dt,St(1,pe))};return c&&mi&&on(Yt,dt,{configurable:!0,set:Nt}),li(dt,Pt)})[Ae],"toString",function(){return Mt(this).tag}),vt(ye,"withoutSetter",function(ge){return li(oe(ge),ge)}),Z.f=vi,st.f=Bi,ot.f=Ce,ht.f=Gt.f=Qe,ut.f=Ei,Re.f=function(ge){return li(Ie(ge),ge)},c&&(ue(ui,"description",{configurable:!0,get:function(){return Mt(this).description}}),s||vt(Yt,"propertyIsEnumerable",vi,{unsafe:!0}))),y({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:ye}),we(ft(bi),function(ge){je(ge)}),y({target:Wt,stat:!0,forced:!v},{for:function(ge){var Pt=It(ge);if(P(Xe,Pt))return Xe[Pt];var dt=ye(Pt);return Xe[Pt]=dt,Ri[dt]=Pt,dt},keyFor:function(Pt){if(!Ft(Pt))throw Te(Pt+" is not a symbol");if(P(Ri,Pt))return Ri[Pt]},useSetter:function(){mi=!0},useSimple:function(){mi=!1}}),y({target:"Object",stat:!0,forced:!v,sham:!c},{create:function(Pt,dt){return void 0===dt?lt(Pt):Ii(lt(Pt),dt)},defineProperty:Bi,defineProperties:Ii,getOwnPropertyDescriptor:Ce}),y({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:Qe,getOwnPropertySymbols:Ei}),y({target:"Object",stat:!0,forced:D(function(){ut.f(1)})},{getOwnPropertySymbols:function(Pt){return ut.f(wt(Pt))}}),te&&y({target:"JSON",stat:!0,forced:!v||D(function(){var ge=ye();return"[null]"!=te([ge])||"{}"!=te({a:ge})||"{}"!=te(Object(ge))})},{stringify:function(Pt,dt,Nt){var pe=Zt(arguments),Le=dt;if((q(dt)||void 0!==Pt)&&!Ft(Pt))return G(dt)||(dt=function(Vi,Ki){if(it(Le)&&(Ki=n(Le,this,Vi,Ki)),!Ft(Ki))return Ki}),pe[1]=dt,t(te,null,pe)}}),!ui[Qt]){var ti=ui.valueOf;vt(ui,Qt,function(ge){return n(ti,this)})}Si(ye,Wt),ve[ci]=!0},20950:(H,W,f)=>{f(90898)("matchAll")},14740:(H,W,f)=>{f(90898)("match")},76499:(H,W,f)=>{f(90898)("replace")},94696:(H,W,f)=>{f(90898)("search")},72105:(H,W,f)=>{f(90898)("species")},5247:(H,W,f)=>{f(90898)("split")},53825:(H,W,f)=>{f(90898)("toPrimitive")},22529:(H,W,f)=>{f(90898)("toStringTag")},90591:(H,W,f)=>{f(90898)("unscopables")},26054:(H,W,f)=>{"use strict";var G,y=f(74258),g=f(94800),e=f(32914),t=f(10344),n=f(53303),r=f(82639),s=f(9616),c=f(15774),v=f(46053).enforce,D=f(66654),P=!y.ActiveXObject&&"ActiveXObject"in y,it=function(Kt){return function(){return Kt(this,arguments.length?arguments[0]:void 0)}},q=n("WeakMap",it,r);if(D&&P){G=r.getConstructor(it,"WeakMap",!0),t.enable();var bt=q.prototype,Ft=g(bt.delete),gt=g(bt.has),wt=g(bt.get),Bt=g(bt.set);e(bt,{delete:function(Kt){if(s(Kt)&&!c(Kt)){var It=v(this);return It.frozen||(It.frozen=new G),Ft(this,Kt)||It.frozen.delete(Kt)}return Ft(this,Kt)},has:function(It){if(s(It)&&!c(It)){var St=v(this);return St.frozen||(St.frozen=new G),gt(this,It)||St.frozen.has(It)}return gt(this,It)},get:function(It){if(s(It)&&!c(It)){var St=v(this);return St.frozen||(St.frozen=new G),gt(this,It)?wt(this,It):St.frozen.get(It)}return wt(this,It)},set:function(It,St){if(s(It)&&!c(It)){var lt=v(this);lt.frozen||(lt.frozen=new G),gt(this,It)?Bt(this,It,St):lt.frozen.set(It,St)}else Bt(this,It,St);return this}})}},22977:(H,W,f)=>{f(10153)},17724:(H,W,f)=>{f(35503)},50162:(H,W,f)=>{f(54677)},79178:(H,W,f)=>{"use strict";var y=f(5327),g=f(51189),e=f(7286);y({target:"Promise",stat:!0},{try:function(t){var n=g.f(this),r=e(t);return(r.error?n.reject:n.resolve)(r.value),n.promise}})},83066:(H,W,f)=>{f(90898)("asyncDispose")},40338:(H,W,f)=>{f(90898)("dispose")},23560:(H,W,f)=>{f(90898)("matcher")},61546:(H,W,f)=>{f(90898)("metadata")},70214:(H,W,f)=>{f(90898)("observable")},96506:(H,W,f)=>{f(90898)("patternMatch")},82356:(H,W,f)=>{f(90898)("replaceAll")},81006:(H,W,f)=>{f(23483);var y=f(6379),g=f(74258),e=f(27870),t=f(94119),n=f(76539),s=f(35009)("toStringTag");for(var c in y){var v=g[c],D=v&&v.prototype;D&&e(D)!==s&&t(D,s,c),n[c]=n.Array}},28478:(H,W,f)=>{"use strict";f(23483);var y=f(5327),g=f(74258),e=f(26444),t=f(45439),n=f(94800),r=f(30251),s=f(73294),c=f(32914),v=f(8144),D=f(94577),P=f(46053),G=f(7561),it=f(14563),q=f(68739),bt=f(94640),Ft=f(27870),gt=f(49403),wt=f(9616),Bt=f(16096),Kt=f(66112),It=f(25677),St=f(72442),lt=f(50806),ft=f(35009),ht=f(53904),Gt=ft("iterator"),ut="URLSearchParams",ot=ut+"Iterator",st=P.set,Z=P.getterFor(ut),Zt=P.getterFor(ot),vt=e("fetch"),At=e("Request"),re=e("Headers"),ve=At&&At.prototype,oe=re&&re.prototype,Ie=g.RegExp,Re=g.TypeError,je=g.decodeURIComponent,Si=g.encodeURIComponent,Ze=n("".charAt),we=n([].join),ci=n([].push),Wt=n("".replace),Ae=n([].shift),Qt=n([].splice),ee=n("".split),Mt=n("".slice),Yt=/\+/g,ye=Array(4),ui=function(li){return ye[li-1]||(ye[li-1]=Ie("((?:%[\\da-f]{2}){"+li+"})","gi"))},Te=function(li){try{return je(li)}catch(Bi){return li}},ce=function(li){var Bi=Wt(li,Yt," "),Ii=4;try{return je(Bi)}catch(ni){for(;Ii;)Bi=Wt(Bi,ui(Ii--),Te);return Bi}},te=/[!'()~]|%20/g,Me={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ue=function(li){return Me[li]},_e=function(li){return Wt(Si(li),te,ue)},be=function(li,Bi){if(li<Bi)throw Re("Not enough arguments")},Dt=D(function(Bi,Ii){st(this,{type:ot,iterator:St(Z(Bi).entries),kind:Ii})},"Iterator",function(){var Bi=Zt(this),Ii=Bi.kind,ni=Bi.iterator.next(),vi=ni.value;return ni.done||(ni.value="keys"===Ii?vi.key:"values"===Ii?vi.value:[vi.key,vi.value]),ni},!0),zt=function(li){this.entries=[],this.url=null,void 0!==li&&(wt(li)?this.parseObject(li):this.parseQuery("string"==typeof li?"?"===Ze(li,0)?Mt(li,1):li:Bt(li)))};zt.prototype={type:ut,bindURL:function(li){this.url=li,this.update()},parseObject:function(li){var Ii,ni,vi,Ce,Qe,Ei,Pi,Bi=lt(li);if(Bi)for(ni=(Ii=St(li,Bi)).next;!(vi=t(ni,Ii)).done;){if(Ce=St(gt(vi.value)),(Ei=t(Qe=Ce.next,Ce)).done||(Pi=t(Qe,Ce)).done||!t(Qe,Ce).done)throw Re("Expected sequence with length 2");ci(this.entries,{key:Bt(Ei.value),value:Bt(Pi.value)})}else for(var ti in li)q(li,ti)&&ci(this.entries,{key:ti,value:Bt(li[ti])})},parseQuery:function(li){if(li)for(var ni,vi,Bi=ee(li,"&"),Ii=0;Ii<Bi.length;)(ni=Bi[Ii++]).length&&(vi=ee(ni,"="),ci(this.entries,{key:ce(Ae(vi)),value:ce(we(vi,"="))}))},serialize:function(){for(var ni,li=this.entries,Bi=[],Ii=0;Ii<li.length;)ni=li[Ii++],ci(Bi,_e(ni.key)+"="+_e(ni.value));return we(Bi,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Ge=function(){G(this,Xe);var Bi=arguments.length>0?arguments[0]:void 0;st(this,new zt(Bi))},Xe=Ge.prototype;if(c(Xe,{append:function(Bi,Ii){be(arguments.length,2);var ni=Z(this);ci(ni.entries,{key:Bt(Bi),value:Bt(Ii)}),ni.updateURL()},delete:function(li){be(arguments.length,1);for(var Bi=Z(this),Ii=Bi.entries,ni=Bt(li),vi=0;vi<Ii.length;)Ii[vi].key===ni?Qt(Ii,vi,1):vi++;Bi.updateURL()},get:function(Bi){be(arguments.length,1);for(var Ii=Z(this).entries,ni=Bt(Bi),vi=0;vi<Ii.length;vi++)if(Ii[vi].key===ni)return Ii[vi].value;return null},getAll:function(Bi){be(arguments.length,1);for(var Ii=Z(this).entries,ni=Bt(Bi),vi=[],Ce=0;Ce<Ii.length;Ce++)Ii[Ce].key===ni&&ci(vi,Ii[Ce].value);return vi},has:function(Bi){be(arguments.length,1);for(var Ii=Z(this).entries,ni=Bt(Bi),vi=0;vi<Ii.length;)if(Ii[vi++].key===ni)return!0;return!1},set:function(Bi,Ii){be(arguments.length,1);for(var ti,ni=Z(this),vi=ni.entries,Ce=!1,Qe=Bt(Bi),Ei=Bt(Ii),Pi=0;Pi<vi.length;Pi++)(ti=vi[Pi]).key===Qe&&(Ce?Qt(vi,Pi--,1):(Ce=!0,ti.value=Ei));Ce||ci(vi,{key:Qe,value:Ei}),ni.updateURL()},sort:function(){var Bi=Z(this);ht(Bi.entries,function(Ii,ni){return Ii.key>ni.key?1:-1}),Bi.updateURL()},forEach:function(Bi){for(var Ce,Ii=Z(this).entries,ni=bt(Bi,arguments.length>1?arguments[1]:void 0),vi=0;vi<Ii.length;)ni((Ce=Ii[vi++]).value,Ce.key,this)},keys:function(){return new Dt(this,"keys")},values:function(){return new Dt(this,"values")},entries:function(){return new Dt(this,"entries")}},{enumerable:!0}),s(Xe,Gt,Xe.entries,{name:"entries"}),s(Xe,"toString",function(){return Z(this).serialize()},{enumerable:!0}),v(Ge,ut),y({global:!0,forced:!r},{URLSearchParams:Ge}),!r&&it(re)){var Ri=n(oe.has),bi=n(oe.set),mi=function(li){if(wt(li)){var Ii,Bi=li.body;if(Ft(Bi)===ut)return Ii=li.headers?new re(li.headers):new re,Ri(Ii,"content-type")||bi(Ii,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Kt(li,{body:It(0,Bt(Bi)),headers:It(0,Ii)})}return li};if(it(vt)&&y({global:!0,enumerable:!0,forced:!0},{fetch:function(Bi){return vt(Bi,arguments.length>1?mi(arguments[1]):{})}}),it(At)){var on=function(Bi){return G(this,ve),new At(Bi,arguments.length>1?mi(arguments[1]):{})};ve.constructor=on,on.prototype=ve,y({global:!0,forced:!0},{Request:on})}}H.exports={URLSearchParams:Ge,getState:Z}},82422:(H,W,f)=>{var y=f(82344);H.exports=y},30260:(H,W,f)=>{var y=f(12557);H.exports=y},36575:(H,W,f)=>{var y=f(87183);H.exports=y},41215:(H,W,f)=>{var y=f(65009);H.exports=y},31216:(H,W,f)=>{var y=f(98088);f(81006),H.exports=y},8535:(H,W,f)=>{var y=f(48023);H.exports=y},29114:(H,W,f)=>{f(81006);var y=f(27870),g=f(68739),e=f(61517),t=f(36575),n=Array.prototype,r={DOMTokenList:!0,NodeList:!0};H.exports=function(s){var c=s.entries;return s===n||e(n,s)&&c===n.entries||g(r,y(s))?t:c}},30376:(H,W,f)=>{var y=f(8425);H.exports=y},9102:(H,W,f)=>{var y=f(61008);H.exports=y},88334:(H,W,f)=>{f(81006);var y=f(27870),g=f(68739),e=f(61517),t=f(41215),n=Array.prototype,r={DOMTokenList:!0,NodeList:!0};H.exports=function(s){var c=s.forEach;return s===n||e(n,s)&&c===n.forEach||g(r,y(s))?t:c}},40809:(H,W,f)=>{var y=f(18583);H.exports=y},68379:(H,W,f)=>{var y=f(84676);H.exports=y},40051:(H,W,f)=>{var y=f(59032);H.exports=y},42905:(H,W,f)=>{var y=f(70660);H.exports=y},77120:(H,W,f)=>{var y=f(12256);H.exports=y},47940:(H,W,f)=>{var y=f(14475);H.exports=y},15783:(H,W,f)=>{var y=f(98711);H.exports=y},68397:(H,W,f)=>{var y=f(98169);H.exports=y},31545:(H,W,f)=>{var y=f(31916);H.exports=y},39565:(H,W,f)=>{var y=f(47429);H.exports=y},64043:(H,W,f)=>{var y=f(2487);H.exports=y},63122:(H,W,f)=>{var y=f(77626);H.exports=y},76650:(H,W,f)=>{var y=f(81043);H.exports=y},51266:(H,W,f)=>{var y=f(98838);H.exports=y},69265:(H,W,f)=>{var y=f(63977);H.exports=y},64781:(H,W,f)=>{var y=f(14099);f(81006),H.exports=y},56219:(H,W,f)=>{var y=f(1816);f(81006),H.exports=y},78921:(H,W,f)=>{var y=f(64776);f(81006),H.exports=y},99671:(H,W,f)=>{var y=f(64667);f(81006),H.exports=y},80297:(H,W,f)=>{var y=f(65988);f(81006),H.exports=y},64667:(H,W,f)=>{f(28478);var y=f(52457);H.exports=y.URLSearchParams},11966:function(){var H;H="undefined"!=typeof self?self:this,function(f){var y_searchParams="URLSearchParams"in H,y_iterable="Symbol"in H&&"iterator"in Symbol,y_blob="FileReader"in H&&"Blob"in H&&function(){try{return new Blob,!0}catch(ft){return!1}}(),y_formData="FormData"in H,y_arrayBuffer="ArrayBuffer"in H;if(y_arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],t=ArrayBuffer.isView||function(ft){return ft&&e.indexOf(Object.prototype.toString.call(ft))>-1};function n(ft){if("string"!=typeof ft&&(ft=String(ft)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(ft))throw new TypeError("Invalid character in header field name");return ft.toLowerCase()}function r(ft){return"string"!=typeof ft&&(ft=String(ft)),ft}function s(ft){var ht={next:function(){var Gt=ft.shift();return{done:void 0===Gt,value:Gt}}};return y_iterable&&(ht[Symbol.iterator]=function(){return ht}),ht}function c(ft){this.map={},ft instanceof c?ft.forEach(function(ht,Gt){this.append(Gt,ht)},this):Array.isArray(ft)?ft.forEach(function(ht){this.append(ht[0],ht[1])},this):ft&&Object.getOwnPropertyNames(ft).forEach(function(ht){this.append(ht,ft[ht])},this)}function v(ft){if(ft.bodyUsed)return Promise.reject(new TypeError("Already read"));ft.bodyUsed=!0}function D(ft){return new Promise(function(ht,Gt){ft.onload=function(){ht(ft.result)},ft.onerror=function(){Gt(ft.error)}})}function P(ft){var ht=new FileReader,Gt=D(ht);return ht.readAsArrayBuffer(ft),Gt}function q(ft){if(ft.slice)return ft.slice(0);var ht=new Uint8Array(ft.byteLength);return ht.set(new Uint8Array(ft)),ht.buffer}function bt(){return this.bodyUsed=!1,this._initBody=function(ft){this._bodyInit=ft,ft?"string"==typeof ft?this._bodyText=ft:y_blob&&Blob.prototype.isPrototypeOf(ft)?this._bodyBlob=ft:y_formData&&FormData.prototype.isPrototypeOf(ft)?this._bodyFormData=ft:y_searchParams&&URLSearchParams.prototype.isPrototypeOf(ft)?this._bodyText=ft.toString():y_arrayBuffer&&y_blob&&function(ft){return ft&&DataView.prototype.isPrototypeOf(ft)}(ft)?(this._bodyArrayBuffer=q(ft.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):y_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(ft)||t(ft))?this._bodyArrayBuffer=q(ft):this._bodyText=ft=Object.prototype.toString.call(ft):this._bodyText="",this.headers.get("content-type")||("string"==typeof ft?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y_searchParams&&URLSearchParams.prototype.isPrototypeOf(ft)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y_blob&&(this.blob=function(){var ft=v(this);if(ft)return ft;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(P)}),this.text=function(){var ft=v(this);if(ft)return ft;if(this._bodyBlob)return function(ft){var ht=new FileReader,Gt=D(ht);return ht.readAsText(ft),Gt}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(ft){for(var ht=new Uint8Array(ft),Gt=new Array(ht.length),ut=0;ut<ht.length;ut++)Gt[ut]=String.fromCharCode(ht[ut]);return Gt.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y_formData&&(this.formData=function(){return this.text().then(Bt)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(ft,ht){ft=n(ft),ht=r(ht);var Gt=this.map[ft];this.map[ft]=Gt?Gt+", "+ht:ht},c.prototype.delete=function(ft){delete this.map[n(ft)]},c.prototype.get=function(ft){return ft=n(ft),this.has(ft)?this.map[ft]:null},c.prototype.has=function(ft){return this.map.hasOwnProperty(n(ft))},c.prototype.set=function(ft,ht){this.map[n(ft)]=r(ht)},c.prototype.forEach=function(ft,ht){for(var Gt in this.map)this.map.hasOwnProperty(Gt)&&ft.call(ht,this.map[Gt],Gt,this)},c.prototype.keys=function(){var ft=[];return this.forEach(function(ht,Gt){ft.push(Gt)}),s(ft)},c.prototype.values=function(){var ft=[];return this.forEach(function(ht){ft.push(ht)}),s(ft)},c.prototype.entries=function(){var ft=[];return this.forEach(function(ht,Gt){ft.push([Gt,ht])}),s(ft)},y_iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var Ft=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function wt(ft,ht){var Gt=(ht=ht||{}).body;if(ft instanceof wt){if(ft.bodyUsed)throw new TypeError("Already read");this.url=ft.url,this.credentials=ft.credentials,ht.headers||(this.headers=new c(ft.headers)),this.method=ft.method,this.mode=ft.mode,this.signal=ft.signal,!Gt&&null!=ft._bodyInit&&(Gt=ft._bodyInit,ft.bodyUsed=!0)}else this.url=String(ft);if(this.credentials=ht.credentials||this.credentials||"same-origin",(ht.headers||!this.headers)&&(this.headers=new c(ht.headers)),this.method=function(ft){var ht=ft.toUpperCase();return Ft.indexOf(ht)>-1?ht:ft}(ht.method||this.method||"GET"),this.mode=ht.mode||this.mode||null,this.signal=ht.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&Gt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Gt)}function Bt(ft){var ht=new FormData;return ft.trim().split("&").forEach(function(Gt){if(Gt){var ut=Gt.split("="),ot=ut.shift().replace(/\+/g," "),st=ut.join("=").replace(/\+/g," ");ht.append(decodeURIComponent(ot),decodeURIComponent(st))}}),ht}function Kt(ft){var ht=new c;return ft.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(ut){var ot=ut.split(":"),st=ot.shift().trim();if(st){var Z=ot.join(":").trim();ht.append(st,Z)}}),ht}function It(ft,ht){ht||(ht={}),this.type="default",this.status=void 0===ht.status?200:ht.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in ht?ht.statusText:"OK",this.headers=new c(ht.headers),this.url=ht.url||"",this._initBody(ft)}wt.prototype.clone=function(){return new wt(this,{body:this._bodyInit})},bt.call(wt.prototype),bt.call(It.prototype),It.prototype.clone=function(){return new It(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},It.error=function(){var ft=new It(null,{status:0,statusText:""});return ft.type="error",ft};var St=[301,302,303,307,308];It.redirect=function(ft,ht){if(-1===St.indexOf(ht))throw new RangeError("Invalid status code");return new It(null,{status:ht,headers:{location:ft}})},f.DOMException=H.DOMException;try{new f.DOMException}catch(ft){f.DOMException=function(ht,Gt){this.message=ht,this.name=Gt;var ut=Error(ht);this.stack=ut.stack},f.DOMException.prototype=Object.create(Error.prototype),f.DOMException.prototype.constructor=f.DOMException}function lt(ft,ht){return new Promise(function(Gt,ut){var ot=new wt(ft,ht);if(ot.signal&&ot.signal.aborted)return ut(new f.DOMException("Aborted","AbortError"));var st=new XMLHttpRequest;function Z(){st.abort()}st.onload=function(){var Zt={status:st.status,statusText:st.statusText,headers:Kt(st.getAllResponseHeaders()||"")};Zt.url="responseURL"in st?st.responseURL:Zt.headers.get("X-Request-URL"),Gt(new It("response"in st?st.response:st.responseText,Zt))},st.onerror=function(){ut(new TypeError("Network request failed"))},st.ontimeout=function(){ut(new TypeError("Network request failed"))},st.onabort=function(){ut(new f.DOMException("Aborted","AbortError"))},st.open(ot.method,ot.url,!0),"include"===ot.credentials?st.withCredentials=!0:"omit"===ot.credentials&&(st.withCredentials=!1),"responseType"in st&&y_blob&&(st.responseType="blob"),ot.headers.forEach(function(Zt,vt){st.setRequestHeader(vt,Zt)}),ot.signal&&(ot.signal.addEventListener("abort",Z),st.onreadystatechange=function(){4===st.readyState&&ot.signal.removeEventListener("abort",Z)}),st.send(void 0===ot._bodyInit?null:ot._bodyInit)})}lt.polyfill=!0,H.fetch||(H.fetch=lt,H.Headers=c,H.Request=wt,H.Response=It),f.Headers=c,f.Request=wt,f.Response=It,f.fetch=lt,Object.defineProperty(f,"__esModule",{value:!0})}({})},25320:H=>{"use strict";function W(t){return t instanceof Buffer||t instanceof Date||t instanceof RegExp}function f(t){if(t instanceof Buffer){var n=Buffer.alloc?Buffer.alloc(t.length):new Buffer(t.length);return t.copy(n),n}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);throw new Error("Unexpected situation")}function y(t){var n=[];return t.forEach(function(r,s){n[s]="object"==typeof r&&null!==r?Array.isArray(r)?y(r):W(r)?f(r):e({},r):r}),n}function g(t,n){return"__proto__"===n?void 0:t[n]}var e=H.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var r,s,t=arguments[0],n=Array.prototype.slice.call(arguments,1);return n.forEach(function(v){"object"!=typeof v||null===v||Array.isArray(v)||Object.keys(v).forEach(function(D){if(s=g(t,D),(r=g(v,D))!==t)return"object"!=typeof r||null===r?void(t[D]=r):Array.isArray(r)?void(t[D]=y(r)):W(r)?void(t[D]=f(r)):"object"!=typeof s||null===s||Array.isArray(s)?void(t[D]=e({},r)):void(t[D]=e(s,r))})}),t}},18642:function(H,W){var g;void 0!==(g=function(){"use strict";function t(D,P,G){var it=new XMLHttpRequest;it.open("GET",D),it.responseType="blob",it.onload=function(){v(it.response,P,G)},it.onerror=function(){console.error("could not download file")},it.send()}function n(D){var P=new XMLHttpRequest;P.open("HEAD",D,!1);try{P.send()}catch(G){}return 200<=P.status&&299>=P.status}function r(D){try{D.dispatchEvent(new MouseEvent("click"))}catch(G){var P=document.createEvent("MouseEvents");P.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),D.dispatchEvent(P)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,c=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(D,P,G){var it=s.URL||s.webkitURL,q=document.createElement("a");q.download=P=P||D.name||"download",q.rel="noopener","string"==typeof D?(q.href=D,q.origin===location.origin?r(q):n(q.href)?t(D,P,G):r(q,q.target="_blank")):(q.href=it.createObjectURL(D),setTimeout(function(){it.revokeObjectURL(q.href)},4e4),setTimeout(function(){r(q)},0))}:"msSaveOrOpenBlob"in navigator?function(D,P,G){if(P=P||D.name||"download","string"!=typeof D)navigator.msSaveOrOpenBlob(function(D,P){return void 0===P?P={autoBom:!1}:"object"!=typeof P&&(console.warn("Deprecated: Expected third argument to be a object"),P={autoBom:!P}),P.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(D.type)?new Blob(["\ufeff",D],{type:D.type}):D}(D,G),P);else if(n(D))t(D,P,G);else{var it=document.createElement("a");it.href=D,it.target="_blank",setTimeout(function(){r(it)})}}:function(D,P,G,it){if((it=it||open("","_blank"))&&(it.document.title=it.document.body.innerText="downloading..."),"string"==typeof D)return t(D,P,G);var q="application/octet-stream"===D.type,bt=/constructor/i.test(s.HTMLElement)||s.safari,Ft=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ft||q&&bt||c)&&"undefined"!=typeof FileReader){var gt=new FileReader;gt.onloadend=function(){var Kt=gt.result;Kt=Ft?Kt:Kt.replace(/^data:[^;]*;/,"data:attachment/file;"),it?it.location.href=Kt:location=Kt,it=null},gt.readAsDataURL(D)}else{var wt=s.URL||s.webkitURL,Bt=wt.createObjectURL(D);it?it.location=Bt:location.href=Bt,it=null,setTimeout(function(){wt.revokeObjectURL(Bt)},4e4)}});s.saveAs=v.saveAs=v,H.exports=v}.apply(W,[]))&&(H.exports=g)},5051:H=>{"use strict";var W="Function.prototype.bind called on incompatible ",f=Array.prototype.slice,y=Object.prototype.toString,g="[object Function]";H.exports=function(t){var n=this;if("function"!=typeof n||y.call(n)!==g)throw new TypeError(W+n);for(var s,r=f.call(arguments,1),c=function(){if(this instanceof s){var it=n.apply(this,r.concat(f.call(arguments)));return Object(it)===it?it:this}return n.apply(t,r.concat(f.call(arguments)))},v=Math.max(0,n.length-r.length),D=[],P=0;P<v;P++)D.push("$"+P);if(s=Function("binder","return function ("+D.join(",")+"){ return binder.apply(this,arguments); }")(c),n.prototype){var G=function(){};G.prototype=n.prototype,s.prototype=new G,G.prototype=null}return s}},21113:(H,W,f)=>{"use strict";var y=f(5051);H.exports=Function.prototype.bind||y},4320:(H,W,f)=>{"use strict";var y,g=SyntaxError,e=Function,t=TypeError,n=function(Gt){try{return e('"use strict"; return ('+Gt+").constructor;")()}catch(ut){}},r=Object.getOwnPropertyDescriptor;if(r)try{r({},"")}catch(Gt){r=null}var s=function(){throw new t},c=r?function(){try{return s}catch(Gt){try{return r(arguments,"callee").get}catch(ut){return s}}}():s,v=f(62832)(),D=Object.getPrototypeOf||function(Gt){return Gt.__proto__},P={},G="undefined"==typeof Uint8Array?y:D(Uint8Array),it={"%AggregateError%":"undefined"==typeof AggregateError?y:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?y:ArrayBuffer,"%ArrayIteratorPrototype%":v?D([][Symbol.iterator]()):y,"%AsyncFromSyncIteratorPrototype%":y,"%AsyncFunction%":P,"%AsyncGenerator%":P,"%AsyncGeneratorFunction%":P,"%AsyncIteratorPrototype%":P,"%Atomics%":"undefined"==typeof Atomics?y:Atomics,"%BigInt%":"undefined"==typeof BigInt?y:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?y:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?y:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?y:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?y:FinalizationRegistry,"%Function%":e,"%GeneratorFunction%":P,"%Int8Array%":"undefined"==typeof Int8Array?y:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?y:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?y:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":v?D(D([][Symbol.iterator]())):y,"%JSON%":"object"==typeof JSON?JSON:y,"%Map%":"undefined"==typeof Map?y:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&v?D((new Map)[Symbol.iterator]()):y,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?y:Promise,"%Proxy%":"undefined"==typeof Proxy?y:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?y:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?y:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&v?D((new Set)[Symbol.iterator]()):y,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?y:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":v?D(""[Symbol.iterator]()):y,"%Symbol%":v?Symbol:y,"%SyntaxError%":g,"%ThrowTypeError%":c,"%TypedArray%":G,"%TypeError%":t,"%Uint8Array%":"undefined"==typeof Uint8Array?y:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?y:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?y:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?y:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?y:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?y:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?y:WeakSet},q=function Gt(ut){var ot;if("%AsyncFunction%"===ut)ot=n("async function () {}");else if("%GeneratorFunction%"===ut)ot=n("function* () {}");else if("%AsyncGeneratorFunction%"===ut)ot=n("async function* () {}");else if("%AsyncGenerator%"===ut){var st=Gt("%AsyncGeneratorFunction%");st&&(ot=st.prototype)}else if("%AsyncIteratorPrototype%"===ut){var Z=Gt("%AsyncGenerator%");Z&&(ot=D(Z.prototype))}return it[ut]=ot,ot},bt={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ft=f(21113),gt=f(60508),wt=Ft.call(Function.call,Array.prototype.concat),Bt=Ft.call(Function.apply,Array.prototype.splice),Kt=Ft.call(Function.call,String.prototype.replace),It=Ft.call(Function.call,String.prototype.slice),St=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,lt=/\\(\\)?/g,ft=function(ut){var ot=It(ut,0,1),st=It(ut,-1);if("%"===ot&&"%"!==st)throw new g("invalid intrinsic syntax, expected closing `%`");if("%"===st&&"%"!==ot)throw new g("invalid intrinsic syntax, expected opening `%`");var Z=[];return Kt(ut,St,function(Zt,vt,At,re){Z[Z.length]=At?Kt(re,lt,"$1"):vt||Zt}),Z},ht=function(ut,ot){var Z,st=ut;if(gt(bt,st)&&(st="%"+(Z=bt[st])[0]+"%"),gt(it,st)){var Zt=it[st];if(Zt===P&&(Zt=q(st)),void 0===Zt&&!ot)throw new t("intrinsic "+ut+" exists, but is not available. Please file an issue!");return{alias:Z,name:st,value:Zt}}throw new g("intrinsic "+ut+" does not exist!")};H.exports=function(ut,ot){if("string"!=typeof ut||0===ut.length)throw new t("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof ot)throw new t('"allowMissing" argument must be a boolean');var st=ft(ut),Z=st.length>0?st[0]:"",Zt=ht("%"+Z+"%",ot),vt=Zt.name,At=Zt.value,re=!1,ve=Zt.alias;ve&&(Z=ve[0],Bt(st,wt([0,1],ve)));for(var oe=1,Ie=!0;oe<st.length;oe+=1){var Re=st[oe],je=It(Re,0,1),Si=It(Re,-1);if(('"'===je||"'"===je||"`"===je||'"'===Si||"'"===Si||"`"===Si)&&je!==Si)throw new g("property names with quotes must have matching quotes");if(("constructor"===Re||!Ie)&&(re=!0),gt(it,vt="%"+(Z+="."+Re)+"%"))At=it[vt];else if(null!=At){if(!(Re in At)){if(!ot)throw new t("base intrinsic for "+ut+" exists, but the property is not available.");return}if(r&&oe+1>=st.length){var Ze=r(At,Re);At=(Ie=!!Ze)&&"get"in Ze&&!("originalValue"in Ze.get)?Ze.get:At[Re]}else Ie=gt(At,Re),At=At[Re];Ie&&!re&&(it[vt]=At)}}return At}},62832:(H,W,f)=>{"use strict";var y="undefined"!=typeof Symbol&&Symbol,g=f(22718);H.exports=function(){return"function"==typeof y&&"function"==typeof Symbol&&"symbol"==typeof y("foo")&&"symbol"==typeof Symbol("bar")&&g()}},22718:H=>{"use strict";H.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var f={},y=Symbol("test"),g=Object(y);if("string"==typeof y||"[object Symbol]"!==Object.prototype.toString.call(y)||"[object Symbol]"!==Object.prototype.toString.call(g))return!1;for(y in f[y]=42,f)return!1;if("function"==typeof Object.keys&&0!==Object.keys(f).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(f).length)return!1;var t=Object.getOwnPropertySymbols(f);if(1!==t.length||t[0]!==y||!Object.prototype.propertyIsEnumerable.call(f,y))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(f,y);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},60508:(H,W,f)=>{"use strict";var y=f(21113);H.exports=y.call(Function.call,Object.prototype.hasOwnProperty)},37901:H=>{var Ce,f="__lodash_hash_undefined__",y=1/0,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/,s=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,D=/\\(\\)?/g,P=/^\[object .+?Constructor\]$/,G="object"==typeof global&&global&&global.Object===Object&&global,it="object"==typeof self&&self&&self.Object===Object&&self,q=G||it||Function("return this")(),gt=Array.prototype,wt=Function.prototype,Bt=Object.prototype,Kt=q["__core-js_shared__"],It=(Ce=/[^.]+$/.exec(Kt&&Kt.keys&&Kt.keys.IE_PROTO||""))?"Symbol(src)_1."+Ce:"",St=wt.toString,lt=Bt.hasOwnProperty,ft=Bt.toString,ht=RegExp("^"+St.call(lt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gt=q.Symbol,ut=gt.splice,ot=ue(q,"Map"),st=ue(Object,"create"),Z=Gt?Gt.prototype:void 0,Zt=Z?Z.toString:void 0;function vt(Ce){var Qe=-1,Ei=Ce?Ce.length:0;for(this.clear();++Qe<Ei;){var Pi=Ce[Qe];this.set(Pi[0],Pi[1])}}function Re(Ce){var Qe=-1,Ei=Ce?Ce.length:0;for(this.clear();++Qe<Ei;){var Pi=Ce[Qe];this.set(Pi[0],Pi[1])}}function Wt(Ce){var Qe=-1,Ei=Ce?Ce.length:0;for(this.clear();++Qe<Ei;){var Pi=Ce[Qe];this.set(Pi[0],Pi[1])}}function ye(Ce,Qe){for(var Ei=Ce.length;Ei--;)if(bi(Ce[Ei][0],Qe))return Ei;return-1}function Me(Ce,Qe){var Ei=Ce.__data__;return function(Ce){var Qe=typeof Ce;return"string"==Qe||"number"==Qe||"symbol"==Qe||"boolean"==Qe?"__proto__"!==Ce:null===Ce}(Qe)?Ei["string"==typeof Qe?"string":"hash"]:Ei.map}function ue(Ce,Qe){var Ei=function(Ce,Qe){return null==Ce?void 0:Ce[Qe]}(Ce,Qe);return function(Ce){if(!li(Ce)||function(Ce){return!!It&&It in Ce}(Ce))return!1;var Qe=function(Ce){var Qe=li(Ce)?ft.call(Ce):"";return"[object Function]"==Qe||"[object GeneratorFunction]"==Qe}(Ce)||function(Ce){var Qe=!1;if(null!=Ce&&"function"!=typeof Ce.toString)try{Qe=!!(Ce+"")}catch(Ei){}return Qe}(Ce)?ht:P;return Qe.test(function(Ce){if(null!=Ce){try{return St.call(Ce)}catch(Qe){}try{return Ce+""}catch(Qe){}}return""}(Ce))}(Ei)?Ei:void 0}vt.prototype.clear=function(){this.__data__=st?st(null):{}},vt.prototype.delete=function(Ce){return this.has(Ce)&&delete this.__data__[Ce]},vt.prototype.get=function(Ce){var Qe=this.__data__;if(st){var Ei=Qe[Ce];return Ei===f?void 0:Ei}return lt.call(Qe,Ce)?Qe[Ce]:void 0},vt.prototype.has=function(Ce){var Qe=this.__data__;return st?void 0!==Qe[Ce]:lt.call(Qe,Ce)},vt.prototype.set=function(Ce,Qe){return this.__data__[Ce]=st&&void 0===Qe?f:Qe,this},Re.prototype.clear=function(){this.__data__=[]},Re.prototype.delete=function(Ce){var Qe=this.__data__,Ei=ye(Qe,Ce);return!(Ei<0||(Ei==Qe.length-1?Qe.pop():ut.call(Qe,Ei,1),0))},Re.prototype.get=function(Ce){var Qe=this.__data__,Ei=ye(Qe,Ce);return Ei<0?void 0:Qe[Ei][1]},Re.prototype.has=function(Ce){return ye(this.__data__,Ce)>-1},Re.prototype.set=function(Ce,Qe){var Ei=this.__data__,Pi=ye(Ei,Ce);return Pi<0?Ei.push([Ce,Qe]):Ei[Pi][1]=Qe,this},Wt.prototype.clear=function(){this.__data__={hash:new vt,map:new(ot||Re),string:new vt}},Wt.prototype.delete=function(Ce){return Me(this,Ce).delete(Ce)},Wt.prototype.get=function(Ce){return Me(this,Ce).get(Ce)},Wt.prototype.has=function(Ce){return Me(this,Ce).has(Ce)},Wt.prototype.set=function(Ce,Qe){return Me(this,Ce).set(Ce,Qe),this};var zt=Ri(function(Ce){Ce=function(Ce){return null==Ce?"":function(Ce){if("string"==typeof Ce)return Ce;if(Ii(Ce))return Zt?Zt.call(Ce):"";var Qe=Ce+"";return"0"==Qe&&1/Ce==-y?"-0":Qe}(Ce)}(Ce);var Qe=[];return s.test(Ce)&&Qe.push(""),Ce.replace(c,function(Ei,Pi,ti,ge){Qe.push(ti?ge.replace(D,"$1"):Pi||Ei)}),Qe});function Ge(Ce){if("string"==typeof Ce||Ii(Ce))return Ce;var Qe=Ce+"";return"0"==Qe&&1/Ce==-y?"-0":Qe}function Ri(Ce,Qe){if("function"!=typeof Ce||Qe&&"function"!=typeof Qe)throw new TypeError("Expected a function");var Ei=function(){var Pi=arguments,ti=Qe?Qe.apply(this,Pi):Pi[0],ge=Ei.cache;if(ge.has(ti))return ge.get(ti);var Pt=Ce.apply(this,Pi);return Ei.cache=ge.set(ti,Pt),Pt};return Ei.cache=new(Ri.Cache||Wt),Ei}function bi(Ce,Qe){return Ce===Qe||Ce!=Ce&&Qe!=Qe}Ri.Cache=Wt;var mi=Array.isArray;function li(Ce){var Qe=typeof Ce;return!!Ce&&("object"==Qe||"function"==Qe)}function Ii(Ce){return"symbol"==typeof Ce||function(Ce){return!!Ce&&"object"==typeof Ce}(Ce)&&"[object Symbol]"==ft.call(Ce)}H.exports=function(Ce,Qe,Ei){var Pi=null==Ce?void 0:function(Ce,Qe){Qe=function(Ce,Qe){if(mi(Ce))return!1;var Ei=typeof Ce;return!("number"!=Ei&&"symbol"!=Ei&&"boolean"!=Ei&&null!=Ce&&!Ii(Ce))||r.test(Ce)||!n.test(Ce)||null!=Qe&&Ce in Object(Qe)}(Qe,Ce)?[Qe]:function(Ce){return mi(Ce)?Ce:zt(Ce)}(Qe);for(var Ei=0,Pi=Qe.length;null!=Ce&&Ei<Pi;)Ce=Ce[Ge(Qe[Ei++])];return Ei&&Ei==Pi?Ce:void 0}(Ce,Qe);return void 0===Pi?Ei:Pi}},20696:(H,W,f)=>{var e=f(18324)(f(56807),"DataView");H.exports=e},54141:(H,W,f)=>{var y=f(39338),g=f(81439),e=f(15136),t=f(48899),n=f(49077);function r(s){var c=-1,v=null==s?0:s.length;for(this.clear();++c<v;){var D=s[c];this.set(D[0],D[1])}}r.prototype.clear=y,r.prototype.delete=g,r.prototype.get=e,r.prototype.has=t,r.prototype.set=n,H.exports=r},943:(H,W,f)=>{var y=f(20900),g=f(84044),e=f(66981),t=f(84629),n=f(62720);function r(s){var c=-1,v=null==s?0:s.length;for(this.clear();++c<v;){var D=s[c];this.set(D[0],D[1])}}r.prototype.clear=y,r.prototype.delete=g,r.prototype.get=e,r.prototype.has=t,r.prototype.set=n,H.exports=r},43664:(H,W,f)=>{var e=f(18324)(f(56807),"Map");H.exports=e},17324:(H,W,f)=>{var y=f(99166),g=f(61222),e=f(22470),t=f(1048),n=f(34186);function r(s){var c=-1,v=null==s?0:s.length;for(this.clear();++c<v;){var D=s[c];this.set(D[0],D[1])}}r.prototype.clear=y,r.prototype.delete=g,r.prototype.get=e,r.prototype.has=t,r.prototype.set=n,H.exports=r},87209:(H,W,f)=>{var e=f(18324)(f(56807),"Promise");H.exports=e},39434:(H,W,f)=>{var e=f(18324)(f(56807),"Set");H.exports=e},71096:(H,W,f)=>{var y=f(943),g=f(47432),e=f(46639),t=f(11372),n=f(38313),r=f(23137);function s(c){var v=this.__data__=new y(c);this.size=v.size}s.prototype.clear=g,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=r,H.exports=s},5144:(H,W,f)=>{var y=f(56807);H.exports=y.Symbol},68047:(H,W,f)=>{var y=f(56807);H.exports=y.Uint8Array},69847:(H,W,f)=>{var e=f(18324)(f(56807),"WeakMap");H.exports=e},29030:H=>{H.exports=function(f,y){for(var g=-1,e=null==f?0:f.length;++g<e&&!1!==y(f[g],g,f););return f}},94382:H=>{H.exports=function(f,y){for(var g=-1,e=null==f?0:f.length,t=0,n=[];++g<e;){var r=f[g];y(r,g,f)&&(n[t++]=r)}return n}},264:(H,W,f)=>{var y=f(74265),g=f(92526),e=f(87572),t=f(77790),n=f(5021),r=f(18353),c=Object.prototype.hasOwnProperty;H.exports=function(D,P){var G=e(D),it=!G&&g(D),q=!G&&!it&&t(D),bt=!G&&!it&&!q&&r(D),Ft=G||it||q||bt,gt=Ft?y(D.length,String):[],wt=gt.length;for(var Bt in D)(P||c.call(D,Bt))&&(!Ft||!("length"==Bt||q&&("offset"==Bt||"parent"==Bt)||bt&&("buffer"==Bt||"byteLength"==Bt||"byteOffset"==Bt)||n(Bt,wt)))&&gt.push(Bt);return gt}},9829:H=>{H.exports=function(f,y){for(var g=-1,e=null==f?0:f.length,t=Array(e);++g<e;)t[g]=y(f[g],g,f);return t}},57437:H=>{H.exports=function(f,y){for(var g=-1,e=y.length,t=f.length;++g<e;)f[t+g]=y[g];return f}},49782:(H,W,f)=>{var y=f(75372),g=f(47660),t=Object.prototype.hasOwnProperty;H.exports=function(r,s,c){var v=r[s];(!t.call(r,s)||!g(v,c)||void 0===c&&!(s in r))&&y(r,s,c)}},42128:(H,W,f)=>{var y=f(47660);H.exports=function(e,t){for(var n=e.length;n--;)if(y(e[n][0],t))return n;return-1}},56470:(H,W,f)=>{var y=f(56394),g=f(254);H.exports=function(t,n){return t&&y(n,g(n),t)}},88253:(H,W,f)=>{var y=f(56394),g=f(22174);H.exports=function(t,n){return t&&y(n,g(n),t)}},75372:(H,W,f)=>{var y=f(59891);H.exports=function(e,t,n){"__proto__"==t&&y?y(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},55594:(H,W,f)=>{var y=f(71096),g=f(29030),e=f(49782),t=f(56470),n=f(88253),r=f(61709),s=f(93895),c=f(56306),v=f(81294),D=f(72972),P=f(77449),G=f(24524),it=f(72181),q=f(70334),bt=f(80323),Ft=f(87572),gt=f(77790),wt=f(68586),Bt=f(75388),Kt=f(5981),It=f(254),St=f(22174),Gt="[object Arguments]",Zt="[object Function]",ve="[object Object]",Te={};Te[Gt]=Te["[object Array]"]=Te["[object ArrayBuffer]"]=Te["[object DataView]"]=Te["[object Boolean]"]=Te["[object Date]"]=Te["[object Float32Array]"]=Te["[object Float64Array]"]=Te["[object Int8Array]"]=Te["[object Int16Array]"]=Te["[object Int32Array]"]=Te["[object Map]"]=Te["[object Number]"]=Te[ve]=Te["[object RegExp]"]=Te["[object Set]"]=Te["[object String]"]=Te["[object Symbol]"]=Te["[object Uint8Array]"]=Te["[object Uint8ClampedArray]"]=Te["[object Uint16Array]"]=Te["[object Uint32Array]"]=!0,Te["[object Error]"]=Te[Zt]=Te["[object WeakMap]"]=!1,H.exports=function ce(te,Me,ue,_e,be,Dt){var zt,Ge=1&Me,Xe=2&Me,Ri=4&Me;if(ue&&(zt=be?ue(te,_e,be,Dt):ue(te)),void 0!==zt)return zt;if(!Bt(te))return te;var bi=Ft(te);if(bi){if(zt=it(te),!Ge)return s(te,zt)}else{var mi=G(te),on=mi==Zt||"[object GeneratorFunction]"==mi;if(gt(te))return r(te,Ge);if(mi==ve||mi==Gt||on&&!be){if(zt=Xe||on?{}:bt(te),!Ge)return Xe?v(te,n(zt,te)):c(te,t(zt,te))}else{if(!Te[mi])return be?te:{};zt=q(te,mi,Ge)}}Dt||(Dt=new y);var li=Dt.get(te);if(li)return li;Dt.set(te,zt),Kt(te)?te.forEach(function(ni){zt.add(ce(ni,Me,ue,ni,te,Dt))}):wt(te)&&te.forEach(function(ni,vi){zt.set(vi,ce(ni,Me,ue,vi,te,Dt))});var Ii=bi?void 0:(Ri?Xe?P:D:Xe?St:It)(te);return g(Ii||te,function(ni,vi){Ii&&(ni=te[vi=ni]),e(zt,vi,ce(ni,Me,ue,vi,te,Dt))}),zt}},51328:(H,W,f)=>{var y=f(75388),g=Object.create,e=function(){function t(){}return function(n){if(!y(n))return{};if(g)return g(n);t.prototype=n;var r=new t;return t.prototype=void 0,r}}();H.exports=e},885:(H,W,f)=>{var y=f(12294),g=f(55844);H.exports=function(t,n){for(var r=0,s=(n=y(n,t)).length;null!=t&&r<s;)t=t[g(n[r++])];return r&&r==s?t:void 0}},99262:(H,W,f)=>{var y=f(57437),g=f(87572);H.exports=function(t,n,r){var s=n(t);return g(t)?s:y(s,r(t))}},92663:(H,W,f)=>{var y=f(5144),g=f(36476),e=f(65899),r=y?y.toStringTag:void 0;H.exports=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":r&&r in Object(c)?g(c):e(c)}},45446:(H,W,f)=>{var y=f(92663),g=f(3937);H.exports=function(n){return g(n)&&"[object Arguments]"==y(n)}},68306:(H,W,f)=>{var y=f(24524),g=f(3937);H.exports=function(n){return g(n)&&"[object Map]"==y(n)}},42523:(H,W,f)=>{var y=f(83032),g=f(24425),e=f(75388),t=f(18085),r=/^\[object .+?Constructor\]$/,P=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");H.exports=function(it){return!(!e(it)||g(it))&&(y(it)?P:r).test(t(it))}},73256:(H,W,f)=>{var y=f(24524),g=f(3937);H.exports=function(n){return g(n)&&"[object Set]"==y(n)}},66165:(H,W,f)=>{var y=f(92663),g=f(10862),e=f(3937),ot={};ot["[object Float32Array]"]=ot["[object Float64Array]"]=ot["[object Int8Array]"]=ot["[object Int16Array]"]=ot["[object Int32Array]"]=ot["[object Uint8Array]"]=ot["[object Uint8ClampedArray]"]=ot["[object Uint16Array]"]=ot["[object Uint32Array]"]=!0,ot["[object Arguments]"]=ot["[object Array]"]=ot["[object ArrayBuffer]"]=ot["[object Boolean]"]=ot["[object DataView]"]=ot["[object Date]"]=ot["[object Error]"]=ot["[object Function]"]=ot["[object Map]"]=ot["[object Number]"]=ot["[object Object]"]=ot["[object RegExp]"]=ot["[object Set]"]=ot["[object String]"]=ot["[object WeakMap]"]=!1,H.exports=function(Z){return e(Z)&&g(Z.length)&&!!ot[y(Z)]}},69894:(H,W,f)=>{var y=f(21907),g=f(37504),t=Object.prototype.hasOwnProperty;H.exports=function(r){if(!y(r))return g(r);var s=[];for(var c in Object(r))t.call(r,c)&&"constructor"!=c&&s.push(c);return s}},76119:(H,W,f)=>{var y=f(75388),g=f(21907),e=f(20495),n=Object.prototype.hasOwnProperty;H.exports=function(s){if(!y(s))return e(s);var c=g(s),v=[];for(var D in s)"constructor"==D&&(c||!n.call(s,D))||v.push(D);return v}},74265:H=>{H.exports=function(f,y){for(var g=-1,e=Array(f);++g<f;)e[g]=y(g);return e}},78873:(H,W,f)=>{var y=f(5144),g=f(9829),e=f(87572),t=f(2957),r=y?y.prototype:void 0,s=r?r.toString:void 0;H.exports=function c(v){if("string"==typeof v)return v;if(e(v))return g(v,c)+"";if(t(v))return s?s.call(v):"";var D=v+"";return"0"==D&&1/v==-1/0?"-0":D}},76041:H=>{H.exports=function(f){return function(y){return f(y)}}},12294:(H,W,f)=>{var y=f(87572),g=f(36474),e=f(52908),t=f(63881);H.exports=function(r,s){return y(r)?r:g(r,s)?[r]:e(t(r))}},49569:(H,W,f)=>{var y=f(68047);H.exports=function(e){var t=new e.constructor(e.byteLength);return new y(t).set(new y(e)),t}},61709:(H,W,f)=>{H=f.nmd(H);var y=f(56807),g=W&&!W.nodeType&&W,e=g&&H&&!H.nodeType&&H,n=e&&e.exports===g?y.Buffer:void 0,r=n?n.allocUnsafe:void 0;H.exports=function(c,v){if(v)return c.slice();var D=c.length,P=r?r(D):new c.constructor(D);return c.copy(P),P}},96961:(H,W,f)=>{var y=f(49569);H.exports=function(e,t){var n=t?y(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},66766:H=>{var W=/\w*$/;H.exports=function(y){var g=new y.constructor(y.source,W.exec(y));return g.lastIndex=y.lastIndex,g}},74610:(H,W,f)=>{var y=f(5144),g=y?y.prototype:void 0,e=g?g.valueOf:void 0;H.exports=function(n){return e?Object(e.call(n)):{}}},40625:(H,W,f)=>{var y=f(49569);H.exports=function(e,t){var n=t?y(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},93895:H=>{H.exports=function(f,y){var g=-1,e=f.length;for(y||(y=Array(e));++g<e;)y[g]=f[g];return y}},56394:(H,W,f)=>{var y=f(49782),g=f(75372);H.exports=function(t,n,r,s){var c=!r;r||(r={});for(var v=-1,D=n.length;++v<D;){var P=n[v],G=s?s(r[P],t[P],P,r,t):void 0;void 0===G&&(G=t[P]),c?g(r,P,G):y(r,P,G)}return r}},56306:(H,W,f)=>{var y=f(56394),g=f(77664);H.exports=function(t,n){return y(t,g(t),n)}},81294:(H,W,f)=>{var y=f(56394),g=f(19722);H.exports=function(t,n){return y(t,g(t),n)}},17592:(H,W,f)=>{var y=f(56807);H.exports=y["__core-js_shared__"]},59891:(H,W,f)=>{var y=f(18324),g=function(){try{var e=y(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();H.exports=g},89948:H=>{var W="object"==typeof global&&global&&global.Object===Object&&global;H.exports=W},72972:(H,W,f)=>{var y=f(99262),g=f(77664),e=f(254);H.exports=function(n){return y(n,e,g)}},77449:(H,W,f)=>{var y=f(99262),g=f(19722),e=f(22174);H.exports=function(n){return y(n,e,g)}},1520:(H,W,f)=>{var y=f(90149);H.exports=function(e,t){var n=e.__data__;return y(t)?n["string"==typeof t?"string":"hash"]:n.map}},18324:(H,W,f)=>{var y=f(42523),g=f(45278);H.exports=function(t,n){var r=g(t,n);return y(r)?r:void 0}},32341:(H,W,f)=>{var g=f(49219)(Object.getPrototypeOf,Object);H.exports=g},36476:(H,W,f)=>{var y=f(5144),g=Object.prototype,e=g.hasOwnProperty,t=g.toString,n=y?y.toStringTag:void 0;H.exports=function(s){var c=e.call(s,n),v=s[n];try{s[n]=void 0;var D=!0}catch(G){}var P=t.call(s);return D&&(c?s[n]=v:delete s[n]),P}},77664:(H,W,f)=>{var y=f(94382),g=f(75289),t=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;H.exports=n?function(s){return null==s?[]:(s=Object(s),y(n(s),function(c){return t.call(s,c)}))}:g},19722:(H,W,f)=>{var y=f(57437),g=f(32341),e=f(77664),t=f(75289);H.exports=Object.getOwnPropertySymbols?function(s){for(var c=[];s;)y(c,e(s)),s=g(s);return c}:t},24524:(H,W,f)=>{var y=f(20696),g=f(43664),e=f(87209),t=f(39434),n=f(69847),r=f(92663),s=f(18085),c="[object Map]",D="[object Promise]",P="[object Set]",G="[object WeakMap]",it="[object DataView]",q=s(y),bt=s(g),Ft=s(e),gt=s(t),wt=s(n),Bt=r;(y&&Bt(new y(new ArrayBuffer(1)))!=it||g&&Bt(new g)!=c||e&&Bt(e.resolve())!=D||t&&Bt(new t)!=P||n&&Bt(new n)!=G)&&(Bt=function(Kt){var It=r(Kt),St="[object Object]"==It?Kt.constructor:void 0,lt=St?s(St):"";if(lt)switch(lt){case q:return it;case bt:return c;case Ft:return D;case gt:return P;case wt:return G}return It}),H.exports=Bt},45278:H=>{H.exports=function(f,y){return null==f?void 0:f[y]}},39338:(H,W,f)=>{var y=f(24039);H.exports=function(){this.__data__=y?y(null):{},this.size=0}},81439:H=>{H.exports=function(f){var y=this.has(f)&&delete this.__data__[f];return this.size-=y?1:0,y}},15136:(H,W,f)=>{var y=f(24039),t=Object.prototype.hasOwnProperty;H.exports=function(r){var s=this.__data__;if(y){var c=s[r];return"__lodash_hash_undefined__"===c?void 0:c}return t.call(s,r)?s[r]:void 0}},48899:(H,W,f)=>{var y=f(24039),e=Object.prototype.hasOwnProperty;H.exports=function(n){var r=this.__data__;return y?void 0!==r[n]:e.call(r,n)}},49077:(H,W,f)=>{var y=f(24039);H.exports=function(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=y&&void 0===n?"__lodash_hash_undefined__":n,this}},72181:H=>{var f=Object.prototype.hasOwnProperty;H.exports=function(g){var e=g.length,t=new g.constructor(e);return e&&"string"==typeof g[0]&&f.call(g,"index")&&(t.index=g.index,t.input=g.input),t}},70334:(H,W,f)=>{var y=f(49569),g=f(96961),e=f(66766),t=f(74610),n=f(40625);H.exports=function(Gt,ut,ot){var st=Gt.constructor;switch(ut){case"[object ArrayBuffer]":return y(Gt);case"[object Boolean]":case"[object Date]":return new st(+Gt);case"[object DataView]":return g(Gt,ot);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return n(Gt,ot);case"[object Map]":case"[object Set]":return new st;case"[object Number]":case"[object String]":return new st(Gt);case"[object RegExp]":return e(Gt);case"[object Symbol]":return t(Gt)}}},80323:(H,W,f)=>{var y=f(51328),g=f(32341),e=f(21907);H.exports=function(n){return"function"!=typeof n.constructor||e(n)?{}:y(g(n))}},5021:H=>{var f=/^(?:0|[1-9]\d*)$/;H.exports=function(g,e){var t=typeof g;return!!(e=null==e?9007199254740991:e)&&("number"==t||"symbol"!=t&&f.test(g))&&g>-1&&g%1==0&&g<e}},36474:(H,W,f)=>{var y=f(87572),g=f(2957),e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,t=/^\w*$/;H.exports=function(r,s){if(y(r))return!1;var c=typeof r;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=r&&!g(r))||t.test(r)||!e.test(r)||null!=s&&r in Object(s)}},90149:H=>{H.exports=function(f){var y=typeof f;return"string"==y||"number"==y||"symbol"==y||"boolean"==y?"__proto__"!==f:null===f}},24425:(H,W,f)=>{var t,y=f(17592),g=(t=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";H.exports=function(t){return!!g&&g in t}},21907:H=>{var W=Object.prototype;H.exports=function(y){var g=y&&y.constructor;return y===("function"==typeof g&&g.prototype||W)}},20900:H=>{H.exports=function(){this.__data__=[],this.size=0}},84044:(H,W,f)=>{var y=f(42128),e=Array.prototype.splice;H.exports=function(n){var r=this.__data__,s=y(r,n);return!(s<0||(s==r.length-1?r.pop():e.call(r,s,1),--this.size,0))}},66981:(H,W,f)=>{var y=f(42128);H.exports=function(e){var t=this.__data__,n=y(t,e);return n<0?void 0:t[n][1]}},84629:(H,W,f)=>{var y=f(42128);H.exports=function(e){return y(this.__data__,e)>-1}},62720:(H,W,f)=>{var y=f(42128);H.exports=function(e,t){var n=this.__data__,r=y(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},99166:(H,W,f)=>{var y=f(54141),g=f(943),e=f(43664);H.exports=function(){this.size=0,this.__data__={hash:new y,map:new(e||g),string:new y}}},61222:(H,W,f)=>{var y=f(1520);H.exports=function(e){var t=y(this,e).delete(e);return this.size-=t?1:0,t}},22470:(H,W,f)=>{var y=f(1520);H.exports=function(e){return y(this,e).get(e)}},1048:(H,W,f)=>{var y=f(1520);H.exports=function(e){return y(this,e).has(e)}},34186:(H,W,f)=>{var y=f(1520);H.exports=function(e,t){var n=y(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}},23213:(H,W,f)=>{var y=f(26504);H.exports=function(t){var n=y(t,function(s){return 500===r.size&&r.clear(),s}),r=n.cache;return n}},24039:(H,W,f)=>{var g=f(18324)(Object,"create");H.exports=g},37504:(H,W,f)=>{var g=f(49219)(Object.keys,Object);H.exports=g},20495:H=>{H.exports=function(f){var y=[];if(null!=f)for(var g in Object(f))y.push(g);return y}},57662:(H,W,f)=>{H=f.nmd(H);var y=f(89948),g=W&&!W.nodeType&&W,e=g&&H&&!H.nodeType&&H,n=e&&e.exports===g&&y.process,r=function(){try{return e&&e.require&&e.require("util").types||n&&n.binding&&n.binding("util")}catch(c){}}();H.exports=r},65899:H=>{var f=Object.prototype.toString;H.exports=function(g){return f.call(g)}},49219:H=>{H.exports=function(f,y){return function(g){return f(y(g))}}},56807:(H,W,f)=>{var y=f(89948),g="object"==typeof self&&self&&self.Object===Object&&self,e=y||g||Function("return this")();H.exports=e},47432:(H,W,f)=>{var y=f(943);H.exports=function(){this.__data__=new y,this.size=0}},46639:H=>{H.exports=function(f){var y=this.__data__,g=y.delete(f);return this.size=y.size,g}},11372:H=>{H.exports=function(f){return this.__data__.get(f)}},38313:H=>{H.exports=function(f){return this.__data__.has(f)}},23137:(H,W,f)=>{var y=f(943),g=f(43664),e=f(17324);H.exports=function(r,s){var c=this.__data__;if(c instanceof y){var v=c.__data__;if(!g||v.length<199)return v.push([r,s]),this.size=++c.size,this;c=this.__data__=new e(v)}return c.set(r,s),this.size=c.size,this}},52908:(H,W,f)=>{var y=f(23213),g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e=/\\(\\)?/g,t=y(function(n){var r=[];return 46===n.charCodeAt(0)&&r.push(""),n.replace(g,function(s,c,v,D){r.push(v?D.replace(e,"$1"):c||s)}),r});H.exports=t},55844:(H,W,f)=>{var y=f(2957);H.exports=function(t){if("string"==typeof t||y(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},18085:H=>{var f=Function.prototype.toString;H.exports=function(g){if(null!=g){try{return f.call(g)}catch(e){}try{return g+""}catch(e){}}return""}},77282:(H,W,f)=>{var y=f(55594);H.exports=function(n){return y(n,5)}},47660:H=>{H.exports=function(f,y){return f===y||f!=f&&y!=y}},60778:(H,W,f)=>{var y=f(885);H.exports=function(e,t,n){var r=null==e?void 0:y(e,t);return void 0===r?n:r}},92526:(H,W,f)=>{var y=f(45446),g=f(3937),e=Object.prototype,t=e.hasOwnProperty,n=e.propertyIsEnumerable,r=y(function(){return arguments}())?y:function(s){return g(s)&&t.call(s,"callee")&&!n.call(s,"callee")};H.exports=r},87572:H=>{H.exports=Array.isArray},32292:(H,W,f)=>{var y=f(83032),g=f(10862);H.exports=function(t){return null!=t&&g(t.length)&&!y(t)}},77790:(H,W,f)=>{H=f.nmd(H);var y=f(56807),g=f(88603),e=W&&!W.nodeType&&W,t=e&&H&&!H.nodeType&&H,r=t&&t.exports===e?y.Buffer:void 0;H.exports=(r?r.isBuffer:void 0)||g},18421:(H,W,f)=>{var y=f(69894),g=f(24524),e=f(92526),t=f(87572),n=f(32292),r=f(77790),s=f(21907),c=f(18353),G=Object.prototype.hasOwnProperty;H.exports=function(q){if(null==q)return!0;if(n(q)&&(t(q)||"string"==typeof q||"function"==typeof q.splice||r(q)||c(q)||e(q)))return!q.length;var bt=g(q);if("[object Map]"==bt||"[object Set]"==bt)return!q.size;if(s(q))return!y(q).length;for(var Ft in q)if(G.call(q,Ft))return!1;return!0}},83032:(H,W,f)=>{var y=f(92663),g=f(75388);H.exports=function(c){if(!g(c))return!1;var v=y(c);return"[object Function]"==v||"[object GeneratorFunction]"==v||"[object AsyncFunction]"==v||"[object Proxy]"==v}},10862:H=>{H.exports=function(y){return"number"==typeof y&&y>-1&&y%1==0&&y<=9007199254740991}},68586:(H,W,f)=>{var y=f(68306),g=f(76041),e=f(57662),t=e&&e.isMap,n=t?g(t):y;H.exports=n},75388:H=>{H.exports=function(f){var y=typeof f;return null!=f&&("object"==y||"function"==y)}},3937:H=>{H.exports=function(f){return null!=f&&"object"==typeof f}},12507:(H,W,f)=>{var y=f(92663),g=f(32341),e=f(3937),s=Function.prototype.toString,c=Object.prototype.hasOwnProperty,v=s.call(Object);H.exports=function(P){if(!e(P)||"[object Object]"!=y(P))return!1;var G=g(P);if(null===G)return!0;var it=c.call(G,"constructor")&&G.constructor;return"function"==typeof it&&it instanceof it&&s.call(it)==v}},5981:(H,W,f)=>{var y=f(73256),g=f(76041),e=f(57662),t=e&&e.isSet,n=t?g(t):y;H.exports=n},2957:(H,W,f)=>{var y=f(92663),g=f(3937);H.exports=function(n){return"symbol"==typeof n||g(n)&&"[object Symbol]"==y(n)}},18353:(H,W,f)=>{var y=f(66165),g=f(76041),e=f(57662),t=e&&e.isTypedArray,n=t?g(t):y;H.exports=n},254:(H,W,f)=>{var y=f(264),g=f(69894),e=f(32292);H.exports=function(n){return e(n)?y(n):g(n)}},22174:(H,W,f)=>{var y=f(264),g=f(76119),e=f(32292);H.exports=function(n){return e(n)?y(n,!0):g(n)}},26504:(H,W,f)=>{var y=f(17324);function e(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var r=function(){var s=arguments,c=n?n.apply(this,s):s[0],v=r.cache;if(v.has(c))return v.get(c);var D=t.apply(this,s);return r.cache=v.set(c,D)||v,D};return r.cache=new(e.Cache||y),r}e.Cache=y,H.exports=e},75289:H=>{H.exports=function(){return[]}},88603:H=>{H.exports=function(){return!1}},63881:(H,W,f)=>{var y=f(78873);H.exports=function(e){return null==e?"":y(e)}},59009:(H,W,f)=>{var y="function"==typeof Map&&Map.prototype,g=Object.getOwnPropertyDescriptor&&y?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,e=y&&g&&"function"==typeof g.get?g.get:null,t=y&&Map.prototype.forEach,n="function"==typeof Set&&Set.prototype,r=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=n&&r&&"function"==typeof r.get?r.get:null,c=n&&Set.prototype.forEach,D="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,G="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,q="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,bt=Boolean.prototype.valueOf,Ft=Object.prototype.toString,gt=Function.prototype.toString,wt=String.prototype.match,Bt="function"==typeof BigInt?BigInt.prototype.valueOf:null,Kt=Object.getOwnPropertySymbols,It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,St="function"==typeof Symbol&&"object"==typeof Symbol.iterator,lt="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,ft=Object.prototype.propertyIsEnumerable,ht=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Dt){return Dt.__proto__}:null),Gt=f(96553).custom,ut=Gt&&Ie(Gt)?Gt:null;function ot(Dt,zt,Ge){var Xe="double"===(Ge.quoteStyle||zt)?'"':"'";return Xe+Dt+Xe}function st(Dt){return String(Dt).replace(/"/g,"&quot;")}function Z(Dt){return!("[object Array]"!==Ze(Dt)||lt&&"object"==typeof Dt&&lt in Dt)}function Ie(Dt){if(St)return Dt&&"object"==typeof Dt&&Dt instanceof Symbol;if("symbol"==typeof Dt)return!0;if(!Dt||"object"!=typeof Dt||!It)return!1;try{return It.call(Dt),!0}catch(zt){}return!1}H.exports=function Dt(zt,Ge,Xe,Ri){var bi=Ge||{};if(Si(bi,"quoteStyle")&&"single"!==bi.quoteStyle&&"double"!==bi.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Si(bi,"maxStringLength")&&("number"==typeof bi.maxStringLength?bi.maxStringLength<0&&bi.maxStringLength!==1/0:null!==bi.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var mi=!Si(bi,"customInspect")||bi.customInspect;if("boolean"!=typeof mi&&"symbol"!==mi)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Si(bi,"indent")&&null!==bi.indent&&"\t"!==bi.indent&&!(parseInt(bi.indent,10)===bi.indent&&bi.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===zt)return"undefined";if(null===zt)return"null";if("boolean"==typeof zt)return zt?"true":"false";if("string"==typeof zt)return ye(zt,bi);if("number"==typeof zt)return 0===zt?1/0/zt>0?"0":"-0":String(zt);if("bigint"==typeof zt)return String(zt)+"n";var on=void 0===bi.depth?5:bi.depth;if(void 0===Xe&&(Xe=0),Xe>=on&&on>0&&"object"==typeof zt)return Z(zt)?"[Array]":"[Object]";var li=function(Dt,zt){var Ge;if("\t"===Dt.indent)Ge="\t";else{if(!("number"==typeof Dt.indent&&Dt.indent>0))return null;Ge=Array(Dt.indent+1).join(" ")}return{base:Ge,prev:Array(zt+1).join(Ge)}}(bi,Xe);if(void 0===Ri)Ri=[];else if(ci(Ri,zt)>=0)return"[Circular]";function Bi(Sn,ir,pi){if(ir&&(Ri=Ri.slice()).push(ir),pi){var Ke={depth:bi.depth};return Si(bi,"quoteStyle")&&(Ke.quoteStyle=bi.quoteStyle),Dt(Sn,Ke,Xe+1,Ri)}return Dt(Sn,bi,Xe+1,Ri)}if("function"==typeof zt){var Ii=function(Dt){if(Dt.name)return Dt.name;var zt=wt.call(gt.call(Dt),/^function\s*([\w$]+)/);return zt?zt[1]:null}(zt),ni=be(zt,Bi);return"[Function"+(Ii?": "+Ii:" (anonymous)")+"]"+(ni.length>0?" { "+ni.join(", ")+" }":"")}if(Ie(zt)){var vi=St?String(zt).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):It.call(zt);return"object"!=typeof zt||St?vi:Te(vi)}if(function(Dt){return!(!Dt||"object"!=typeof Dt)&&("undefined"!=typeof HTMLElement&&Dt instanceof HTMLElement||"string"==typeof Dt.nodeName&&"function"==typeof Dt.getAttribute)}(zt)){for(var Ce="<"+String(zt.nodeName).toLowerCase(),Qe=zt.attributes||[],Ei=0;Ei<Qe.length;Ei++)Ce+=" "+Qe[Ei].name+"="+ot(st(Qe[Ei].value),"double",bi);return Ce+=">",zt.childNodes&&zt.childNodes.length&&(Ce+="..."),Ce+"</"+String(zt.nodeName).toLowerCase()+">"}if(Z(zt)){if(0===zt.length)return"[]";var Pi=be(zt,Bi);return li&&!function(Dt){for(var zt=0;zt<Dt.length;zt++)if(ci(Dt[zt],"\n")>=0)return!1;return!0}(Pi)?"["+_e(Pi,li)+"]":"[ "+Pi.join(", ")+" ]"}if(function(Dt){return!("[object Error]"!==Ze(Dt)||lt&&"object"==typeof Dt&&lt in Dt)}(zt)){var ti=be(zt,Bi);return 0===ti.length?"["+String(zt)+"]":"{ ["+String(zt)+"] "+ti.join(", ")+" }"}if("object"==typeof zt&&mi){if(ut&&"function"==typeof zt[ut])return zt[ut]();if("symbol"!==mi&&"function"==typeof zt.inspect)return zt.inspect()}if(function(Dt){if(!e||!Dt||"object"!=typeof Dt)return!1;try{e.call(Dt);try{s.call(Dt)}catch(zt){return!0}return Dt instanceof Map}catch(zt){}return!1}(zt)){var ge=[];return t.call(zt,function(Sn,ir){ge.push(Bi(ir,zt,!0)+" => "+Bi(Sn,zt))}),te("Map",e.call(zt),ge,li)}if(function(Dt){if(!s||!Dt||"object"!=typeof Dt)return!1;try{s.call(Dt);try{e.call(Dt)}catch(zt){return!0}return Dt instanceof Set}catch(zt){}return!1}(zt)){var Pt=[];return c.call(zt,function(Sn){Pt.push(Bi(Sn,zt))}),te("Set",s.call(zt),Pt,li)}if(function(Dt){if(!D||!Dt||"object"!=typeof Dt)return!1;try{D.call(Dt,D);try{G.call(Dt,G)}catch(zt){return!0}return Dt instanceof WeakMap}catch(zt){}return!1}(zt))return ce("WeakMap");if(function(Dt){if(!G||!Dt||"object"!=typeof Dt)return!1;try{G.call(Dt,G);try{D.call(Dt,D)}catch(zt){return!0}return Dt instanceof WeakSet}catch(zt){}return!1}(zt))return ce("WeakSet");if(function(Dt){if(!q||!Dt||"object"!=typeof Dt)return!1;try{return q.call(Dt),!0}catch(zt){}return!1}(zt))return ce("WeakRef");if(function(Dt){return!("[object Number]"!==Ze(Dt)||lt&&"object"==typeof Dt&&lt in Dt)}(zt))return Te(Bi(Number(zt)));if(function(Dt){if(!Dt||"object"!=typeof Dt||!Bt)return!1;try{return Bt.call(Dt),!0}catch(zt){}return!1}(zt))return Te(Bi(Bt.call(zt)));if(function(Dt){return!("[object Boolean]"!==Ze(Dt)||lt&&"object"==typeof Dt&&lt in Dt)}(zt))return Te(bt.call(zt));if(function(Dt){return!("[object String]"!==Ze(Dt)||lt&&"object"==typeof Dt&&lt in Dt)}(zt))return Te(Bi(String(zt)));if(!function(Dt){return!("[object Date]"!==Ze(Dt)||lt&&"object"==typeof Dt&&lt in Dt)}(zt)&&!function(Dt){return!("[object RegExp]"!==Ze(Dt)||lt&&"object"==typeof Dt&&lt in Dt)}(zt)){var dt=be(zt,Bi),Nt=ht?ht(zt)===Object.prototype:zt instanceof Object||zt.constructor===Object,pe=zt instanceof Object?"":"null prototype",Le=!Nt&&lt&&Object(zt)===zt&&lt in zt?Ze(zt).slice(8,-1):pe?"Object":"",Ki=(Nt||"function"!=typeof zt.constructor?"":zt.constructor.name?zt.constructor.name+" ":"")+(Le||pe?"["+[].concat(Le||[],pe||[]).join(": ")+"] ":"");return 0===dt.length?Ki+"{}":li?Ki+"{"+_e(dt,li)+"}":Ki+"{ "+dt.join(", ")+" }"}return String(zt)};var je=Object.prototype.hasOwnProperty||function(Dt){return Dt in this};function Si(Dt,zt){return je.call(Dt,zt)}function Ze(Dt){return Ft.call(Dt)}function ci(Dt,zt){if(Dt.indexOf)return Dt.indexOf(zt);for(var Ge=0,Xe=Dt.length;Ge<Xe;Ge++)if(Dt[Ge]===zt)return Ge;return-1}function ye(Dt,zt){if(Dt.length>zt.maxStringLength){var Ge=Dt.length-zt.maxStringLength,Xe="... "+Ge+" more character"+(Ge>1?"s":"");return ye(Dt.slice(0,zt.maxStringLength),zt)+Xe}return ot(Dt.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,ui),"single",zt)}function ui(Dt){var zt=Dt.charCodeAt(0),Ge={8:"b",9:"t",10:"n",12:"f",13:"r"}[zt];return Ge?"\\"+Ge:"\\x"+(zt<16?"0":"")+zt.toString(16).toUpperCase()}function Te(Dt){return"Object("+Dt+")"}function ce(Dt){return Dt+" { ? }"}function te(Dt,zt,Ge,Xe){return Dt+" ("+zt+") {"+(Xe?_e(Ge,Xe):Ge.join(", "))+"}"}function _e(Dt,zt){if(0===Dt.length)return"";var Ge="\n"+zt.prev+zt.base;return Ge+Dt.join(","+Ge)+"\n"+zt.prev}function be(Dt,zt){var Ge=Z(Dt),Xe=[];if(Ge){Xe.length=Dt.length;for(var Ri=0;Ri<Dt.length;Ri++)Xe[Ri]=Si(Dt,Ri)?zt(Dt[Ri],Dt):""}var mi,bi="function"==typeof Kt?Kt(Dt):[];if(St){mi={};for(var on=0;on<bi.length;on++)mi["$"+bi[on]]=bi[on]}for(var li in Dt)!Si(Dt,li)||Ge&&String(Number(li))===li&&li<Dt.length||St&&mi["$"+li]instanceof Symbol||(/[^\w$]/.test(li)?Xe.push(zt(li,Dt)+": "+zt(Dt[li],Dt)):Xe.push(li+": "+zt(Dt[li],Dt)));if("function"==typeof Kt)for(var Bi=0;Bi<bi.length;Bi++)ft.call(Dt,bi[Bi])&&Xe.push("["+zt(bi[Bi])+"]: "+zt(Dt[bi[Bi]],Dt));return Xe}},70721:H=>{"use strict";function W(f,y){return Object.prototype.hasOwnProperty.call(f,y)}H.exports=function(f,y,g,e){g=g||"=";var t={};if("string"!=typeof f||0===f.length)return t;var n=/\+/g;f=f.split(y=y||"&");var r=1e3;e&&"number"==typeof e.maxKeys&&(r=e.maxKeys);var s=f.length;r>0&&s>r&&(s=r);for(var c=0;c<s;++c){var P,G,it,q,v=f[c].replace(n,"%20"),D=v.indexOf(g);D>=0?(P=v.substr(0,D),G=v.substr(D+1)):(P=v,G=""),it=decodeURIComponent(P),q=decodeURIComponent(G),W(t,it)?Array.isArray(t[it])?t[it].push(q):t[it]=[t[it],q]:t[it]=q}return t}},75892:H=>{"use strict";var W=function(f){switch(typeof f){case"string":return f;case"boolean":return f?"true":"false";case"number":return isFinite(f)?f:"";default:return""}};H.exports=function(f,y,g,e){return y=y||"&",g=g||"=",null===f&&(f=void 0),"object"==typeof f?Object.keys(f).map(function(t){var n=encodeURIComponent(W(t))+g;return Array.isArray(f[t])?f[t].map(function(r){return n+encodeURIComponent(W(r))}).join(y):n+encodeURIComponent(W(f[t]))}).join(y):e?encodeURIComponent(W(e))+g+encodeURIComponent(W(f)):""}},36e3:(H,W,f)=>{"use strict";W.decode=W.parse=f(70721),W.encode=W.stringify=f(75892)},26029:H=>{var W=function(f){"use strict";var e,y=Object.prototype,g=y.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",s=t.toStringTag||"@@toStringTag";function c(vt,At,re){return Object.defineProperty(vt,At,{value:re,enumerable:!0,configurable:!0,writable:!0}),vt[At]}try{c({},"")}catch(vt){c=function(At,re,ve){return At[re]=ve}}function v(vt,At,re,ve){var Ie=Object.create((At&&At.prototype instanceof Ft?At:Ft).prototype),Re=new st(ve||[]);return Ie._invoke=function(vt,At,re){var ve=P;return function(Ie,Re){if(ve===it)throw new Error("Generator is already running");if(ve===q){if("throw"===Ie)throw Re;return Zt()}for(re.method=Ie,re.arg=Re;;){var je=re.delegate;if(je){var Si=Gt(je,re);if(Si){if(Si===bt)continue;return Si}}if("next"===re.method)re.sent=re._sent=re.arg;else if("throw"===re.method){if(ve===P)throw ve=q,re.arg;re.dispatchException(re.arg)}else"return"===re.method&&re.abrupt("return",re.arg);ve=it;var Ze=D(vt,At,re);if("normal"===Ze.type){if(ve=re.done?q:G,Ze.arg===bt)continue;return{value:Ze.arg,done:re.done}}"throw"===Ze.type&&(ve=q,re.method="throw",re.arg=Ze.arg)}}}(vt,re,Re),Ie}function D(vt,At,re){try{return{type:"normal",arg:vt.call(At,re)}}catch(ve){return{type:"throw",arg:ve}}}f.wrap=v;var P="suspendedStart",G="suspendedYield",it="executing",q="completed",bt={};function Ft(){}function gt(){}function wt(){}var Bt={};c(Bt,n,function(){return this});var Kt=Object.getPrototypeOf,It=Kt&&Kt(Kt(Z([])));It&&It!==y&&g.call(It,n)&&(Bt=It);var St=wt.prototype=Ft.prototype=Object.create(Bt);function lt(vt){["next","throw","return"].forEach(function(At){c(vt,At,function(re){return this._invoke(At,re)})})}function ft(vt,At){function re(Ie,Re,je,Si){var Ze=D(vt[Ie],vt,Re);if("throw"!==Ze.type){var we=Ze.arg,ci=we.value;return ci&&"object"==typeof ci&&g.call(ci,"__await")?At.resolve(ci.__await).then(function(Wt){re("next",Wt,je,Si)},function(Wt){re("throw",Wt,je,Si)}):At.resolve(ci).then(function(Wt){we.value=Wt,je(we)},function(Wt){return re("throw",Wt,je,Si)})}Si(Ze.arg)}var ve;this._invoke=function(Ie,Re){function je(){return new At(function(Si,Ze){re(Ie,Re,Si,Ze)})}return ve=ve?ve.then(je,je):je()}}function Gt(vt,At){var re=vt.iterator[At.method];if(re===e){if(At.delegate=null,"throw"===At.method){if(vt.iterator.return&&(At.method="return",At.arg=e,Gt(vt,At),"throw"===At.method))return bt;At.method="throw",At.arg=new TypeError("The iterator does not provide a 'throw' method")}return bt}var ve=D(re,vt.iterator,At.arg);if("throw"===ve.type)return At.method="throw",At.arg=ve.arg,At.delegate=null,bt;var oe=ve.arg;return oe?oe.done?(At[vt.resultName]=oe.value,At.next=vt.nextLoc,"return"!==At.method&&(At.method="next",At.arg=e),At.delegate=null,bt):oe:(At.method="throw",At.arg=new TypeError("iterator result is not an object"),At.delegate=null,bt)}function ut(vt){var At={tryLoc:vt[0]};1 in vt&&(At.catchLoc=vt[1]),2 in vt&&(At.finallyLoc=vt[2],At.afterLoc=vt[3]),this.tryEntries.push(At)}function ot(vt){var At=vt.completion||{};At.type="normal",delete At.arg,vt.completion=At}function st(vt){this.tryEntries=[{tryLoc:"root"}],vt.forEach(ut,this),this.reset(!0)}function Z(vt){if(vt){var At=vt[n];if(At)return At.call(vt);if("function"==typeof vt.next)return vt;if(!isNaN(vt.length)){var re=-1,ve=function oe(){for(;++re<vt.length;)if(g.call(vt,re))return oe.value=vt[re],oe.done=!1,oe;return oe.value=e,oe.done=!0,oe};return ve.next=ve}}return{next:Zt}}function Zt(){return{value:e,done:!0}}return gt.prototype=wt,c(St,"constructor",wt),c(wt,"constructor",gt),gt.displayName=c(wt,s,"GeneratorFunction"),f.isGeneratorFunction=function(vt){var At="function"==typeof vt&&vt.constructor;return!!At&&(At===gt||"GeneratorFunction"===(At.displayName||At.name))},f.mark=function(vt){return Object.setPrototypeOf?Object.setPrototypeOf(vt,wt):(vt.__proto__=wt,c(vt,s,"GeneratorFunction")),vt.prototype=Object.create(St),vt},f.awrap=function(vt){return{__await:vt}},lt(ft.prototype),c(ft.prototype,r,function(){return this}),f.AsyncIterator=ft,f.async=function(vt,At,re,ve,oe){void 0===oe&&(oe=Promise);var Ie=new ft(v(vt,At,re,ve),oe);return f.isGeneratorFunction(At)?Ie:Ie.next().then(function(Re){return Re.done?Re.value:Ie.next()})},lt(St),c(St,s,"Generator"),c(St,n,function(){return this}),c(St,"toString",function(){return"[object Generator]"}),f.keys=function(vt){var At=[];for(var re in vt)At.push(re);return At.reverse(),function ve(){for(;At.length;){var oe=At.pop();if(oe in vt)return ve.value=oe,ve.done=!1,ve}return ve.done=!0,ve}},f.values=Z,st.prototype={constructor:st,reset:function(vt){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(ot),!vt)for(var At in this)"t"===At.charAt(0)&&g.call(this,At)&&!isNaN(+At.slice(1))&&(this[At]=e)},stop:function(){this.done=!0;var At=this.tryEntries[0].completion;if("throw"===At.type)throw At.arg;return this.rval},dispatchException:function(vt){if(this.done)throw vt;var At=this;function re(Si,Ze){return Ie.type="throw",Ie.arg=vt,At.next=Si,Ze&&(At.method="next",At.arg=e),!!Ze}for(var ve=this.tryEntries.length-1;ve>=0;--ve){var oe=this.tryEntries[ve],Ie=oe.completion;if("root"===oe.tryLoc)return re("end");if(oe.tryLoc<=this.prev){var Re=g.call(oe,"catchLoc"),je=g.call(oe,"finallyLoc");if(Re&&je){if(this.prev<oe.catchLoc)return re(oe.catchLoc,!0);if(this.prev<oe.finallyLoc)return re(oe.finallyLoc)}else if(Re){if(this.prev<oe.catchLoc)return re(oe.catchLoc,!0)}else{if(!je)throw new Error("try statement without catch or finally");if(this.prev<oe.finallyLoc)return re(oe.finallyLoc)}}}},abrupt:function(vt,At){for(var re=this.tryEntries.length-1;re>=0;--re){var ve=this.tryEntries[re];if(ve.tryLoc<=this.prev&&g.call(ve,"finallyLoc")&&this.prev<ve.finallyLoc){var oe=ve;break}}oe&&("break"===vt||"continue"===vt)&&oe.tryLoc<=At&&At<=oe.finallyLoc&&(oe=null);var Ie=oe?oe.completion:{};return Ie.type=vt,Ie.arg=At,oe?(this.method="next",this.next=oe.finallyLoc,bt):this.complete(Ie)},complete:function(vt,At){if("throw"===vt.type)throw vt.arg;return"break"===vt.type||"continue"===vt.type?this.next=vt.arg:"return"===vt.type?(this.rval=this.arg=vt.arg,this.method="return",this.next="end"):"normal"===vt.type&&At&&(this.next=At),bt},finish:function(vt){for(var At=this.tryEntries.length-1;At>=0;--At){var re=this.tryEntries[At];if(re.finallyLoc===vt)return this.complete(re.completion,re.afterLoc),ot(re),bt}},catch:function(vt){for(var At=this.tryEntries.length-1;At>=0;--At){var re=this.tryEntries[At];if(re.tryLoc===vt){var ve=re.completion;if("throw"===ve.type){var oe=ve.arg;ot(re)}return oe}}throw new Error("illegal catch attempt")},delegateYield:function(vt,At,re){return this.delegate={iterator:Z(vt),resultName:At,nextLoc:re},"next"===this.method&&(this.arg=e),bt}},f}(H.exports);try{regeneratorRuntime=W}catch(f){"object"==typeof globalThis?globalThis.regeneratorRuntime=W:Function("r","regeneratorRuntime = r")(W)}},93544:(H,W,f)=>{"use strict";var y=f(4320),g=f(4640),e=f(59009),t=y("%TypeError%"),n=y("%WeakMap%",!0),r=y("%Map%",!0),s=g("WeakMap.prototype.get",!0),c=g("WeakMap.prototype.set",!0),v=g("WeakMap.prototype.has",!0),D=g("Map.prototype.get",!0),P=g("Map.prototype.set",!0),G=g("Map.prototype.has",!0),it=function(gt,wt){for(var Kt,Bt=gt;null!==(Kt=Bt.next);Bt=Kt)if(Kt.key===wt)return Bt.next=Kt.next,Kt.next=gt.next,gt.next=Kt,Kt};H.exports=function(){var wt,Bt,Kt,It={assert:function(St){if(!It.has(St))throw new t("Side channel does not contain "+e(St))},get:function(St){if(n&&St&&("object"==typeof St||"function"==typeof St)){if(wt)return s(wt,St)}else if(r){if(Bt)return D(Bt,St)}else if(Kt)return function(gt,wt){var Bt=it(gt,wt);return Bt&&Bt.value}(Kt,St)},has:function(St){if(n&&St&&("object"==typeof St||"function"==typeof St)){if(wt)return v(wt,St)}else if(r){if(Bt)return G(Bt,St)}else if(Kt)return function(gt,wt){return!!it(gt,wt)}(Kt,St);return!1},set:function(St,lt){n&&St&&("object"==typeof St||"function"==typeof St)?(wt||(wt=new n),c(wt,St,lt)):r?(Bt||(Bt=new r),P(Bt,St,lt)):(Kt||(Kt={key:{},next:null}),function(gt,wt,Bt){var Kt=it(gt,wt);Kt?Kt.value=Bt:gt.next={key:wt,next:gt.next,value:Bt}}(Kt,St,lt))}};return It}},47511:(H,W,f)=>{"use strict";f.r(W),f.d(W,{default:()=>Ps,helpers:()=>Ns});var y={};f.r(y),f.d(y,{JsonPatchError:()=>Eo,_areEquals:()=>wl,applyOperation:()=>Ua,applyPatch:()=>aa,applyReducer:()=>iu,deepClone:()=>Zu,getValueByPointer:()=>mc,validate:()=>Uo,validator:()=>Sl});var g={};f.r(g),f.d(g,{compare:()=>Hl,generate:()=>tl,observe:()=>ec,unobserve:()=>Bl});var e={};f.r(e),f.d(e,{cookie:()=>qt,header:()=>Ht,path:()=>K,query:()=>pt});var t=f(49719),n=f(42475),r=f(25551),s=f(73507),c=f(41586),v=f(86657),D=f(40107),P=f(31082);function G(S,B,Y){return B in S?P(S,B,{value:Y,enumerable:!0,configurable:!0,writable:!0}):S[B]=Y,S}function it(S,B){var Y=t(S);if(n){var rt=n(S);B&&(rt=r(rt).call(rt,function(_t){return s(S,_t).enumerable})),Y.push.apply(Y,rt)}return Y}function q(S){for(var B=1;B<arguments.length;B++){var rt,Y=null!=arguments[B]?arguments[B]:{};if(B%2)c(rt=it(Object(Y),!0)).call(rt,function(Xt){G(S,Xt,Y[Xt])});else if(v)D(S,v(Y));else{var _t;c(_t=it(Object(Y))).call(_t,function(Xt){P(S,Xt,s(Y,Xt))})}}return S}var bt=f(41246),Ft=f.n(bt),gt=f(15157),wt=f.n(gt),Bt=f(5128),Kt=f(84215),It=f(17830),St=f(6275),lt=f(28355),ft=f(16051);function ht(S,B){(null==B||B>S.length)&&(B=S.length);for(var Y=0,rt=new Array(B);Y<B;Y++)rt[Y]=S[Y];return rt}function Gt(S,B){var Y;if(S){if("string"==typeof S)return ht(S,B);var rt=lt(Y=Object.prototype.toString.call(S)).call(Y,8,-1);if("Object"===rt&&S.constructor&&(rt=S.constructor.name),"Map"===rt||"Set"===rt)return ft(S);if("Arguments"===rt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt))return ht(S,B)}}function ut(S,B){var Y=void 0!==Kt&&It(S)||S["@@iterator"];if(!Y){if(St(S)||(Y=Gt(S))||B&&S&&"number"==typeof S.length){Y&&(S=Y);var rt=0,_t=function(){};return{s:_t,n:function(){return rt>=S.length?{done:!0}:{done:!1,value:S[rt++]}},e:function(ke){throw ke},f:_t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var he,Xt=!0,Jt=!1;return{s:function(){Y=Y.call(S)},n:function(){var ke=Y.next();return Xt=ke.done,ke},e:function(ke){Jt=!0,he=ke},f:function(){try{!Xt&&null!=Y.return&&Y.return()}finally{if(Jt)throw he}}}}var ot=f(36496);function st(S){return(st="function"==typeof Kt&&"symbol"==typeof ot?function(Y){return typeof Y}:function(Y){return Y&&"function"==typeof Kt&&Y.constructor===Kt&&Y!==Kt.prototype?"symbol":typeof Y})(S)}function At(S,B){return function(S){if(St(S))return S}(S)||function(S,B){var Y=null==S?null:void 0!==Kt&&It(S)||S["@@iterator"];if(null!=Y){var Jt,he,rt=[],_t=!0,Xt=!1;try{for(Y=Y.call(S);!(_t=(Jt=Y.next()).done)&&(rt.push(Jt.value),!B||rt.length!==B);_t=!0);}catch(De){Xt=!0,he=De}finally{try{!_t&&null!=Y.return&&Y.return()}finally{if(Xt)throw he}}return rt}}(S,B)||Gt(S,B)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var re=f(75534);function ve(S,B,Y,rt,_t,Xt,Jt){try{var he=S[Xt](Jt),De=he.value}catch(ke){return void Y(ke)}he.done?B(De):re.resolve(De).then(rt,_t)}function oe(S){return function(){var B=this,Y=arguments;return new re(function(rt,_t){var Xt=S.apply(B,Y);function Jt(De){ve(Xt,rt,_t,Jt,he,"next",De)}function he(De){ve(Xt,rt,_t,Jt,he,"throw",De)}Jt(void 0)})}}var Ie=f(22043),Re=f.n(Ie),je=f(17423),Si=f.n(je),Ze=f(58201),we=f.n(Ze),ci=f(6089),Wt=f.n(ci),Ae=f(99182),Qt=f.n(Ae),ee=f(32633),Mt=f.n(ee),Yt=f(17878),ye=f.n(Yt),ui=f(44559),Te=f.n(ui),ce=f(2165),te=f.n(ce),Me=f(37647),ue=f.n(Me),be=(f(11966),f(84268)),Dt=f.n(be);function zt(S){return null==S}var Ce={isNothing:zt,isObject:function(S){return"object"==typeof S&&null!==S},toArray:function(S){return Array.isArray(S)?S:zt(S)?[]:[S]},repeat:function(S,B){var rt,Y="";for(rt=0;rt<B;rt+=1)Y+=S;return Y},isNegativeZero:function(S){return 0===S&&Number.NEGATIVE_INFINITY===1/S},extend:function(S,B){var Y,rt,_t,Xt;if(B)for(Y=0,rt=(Xt=Object.keys(B)).length;Y<rt;Y+=1)S[_t=Xt[Y]]=B[_t];return S}};function Qe(S,B){var Y="",rt=S.reason||"(unknown reason)";return S.mark?(S.mark.name&&(Y+='in "'+S.mark.name+'" '),Y+="("+(S.mark.line+1)+":"+(S.mark.column+1)+")",!B&&S.mark.snippet&&(Y+="\n\n"+S.mark.snippet),rt+" "+Y):rt}function Ei(S,B){Error.call(this),this.name="YAMLException",this.reason=S,this.mark=B,this.message=Qe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(Ei.prototype=Object.create(Error.prototype)).constructor=Ei,Ei.prototype.toString=function(B){return this.name+": "+Qe(this,B)};var Pi=Ei;function ti(S,B,Y,rt,_t){var Xt="",Jt="",he=Math.floor(_t/2)-1;return rt-B>he&&(B=rt-he+(Xt=" ... ").length),Y-rt>he&&(Y=rt+he-(Jt=" ...").length),{str:Xt+S.slice(B,Y).replace(/\t/g,"\u2192")+Jt,pos:rt-B+Xt.length}}function ge(S,B){return Ce.repeat(" ",B-S.length)+S}var Nt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],pe=["scalar","sequence","mapping"],Ki=function(S,B){if(B=B||{},Object.keys(B).forEach(function(Y){if(-1===Nt.indexOf(Y))throw new Pi('Unknown option "'+Y+'" is met in definition of "'+S+'" YAML type.')}),this.options=B,this.tag=S,this.kind=B.kind||null,this.resolve=B.resolve||function(){return!0},this.construct=B.construct||function(Y){return Y},this.instanceOf=B.instanceOf||null,this.predicate=B.predicate||null,this.represent=B.represent||null,this.representName=B.representName||null,this.defaultStyle=B.defaultStyle||null,this.multi=B.multi||!1,this.styleAliases=function(S){var B={};return null!==S&&Object.keys(S).forEach(function(Y){S[Y].forEach(function(rt){B[String(rt)]=Y})}),B}(B.styleAliases||null),-1===pe.indexOf(this.kind))throw new Pi('Unknown kind "'+this.kind+'" is specified for "'+S+'" YAML type.')};function Sn(S,B){var Y=[];return S[B].forEach(function(rt){var _t=Y.length;Y.forEach(function(Xt,Jt){Xt.tag===rt.tag&&Xt.kind===rt.kind&&Xt.multi===rt.multi&&(_t=Jt)}),Y[_t]=rt}),Y}function pi(S){return this.extend(S)}pi.prototype.extend=function(B){var Y=[],rt=[];if(B instanceof Ki)rt.push(B);else if(Array.isArray(B))rt=rt.concat(B);else{if(!B||!Array.isArray(B.implicit)&&!Array.isArray(B.explicit))throw new Pi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");B.implicit&&(Y=Y.concat(B.implicit)),B.explicit&&(rt=rt.concat(B.explicit))}Y.forEach(function(Xt){if(!(Xt instanceof Ki))throw new Pi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(Xt.loadKind&&"scalar"!==Xt.loadKind)throw new Pi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(Xt.multi)throw new Pi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),rt.forEach(function(Xt){if(!(Xt instanceof Ki))throw new Pi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var _t=Object.create(pi.prototype);return _t.implicit=(this.implicit||[]).concat(Y),_t.explicit=(this.explicit||[]).concat(rt),_t.compiledImplicit=Sn(_t,"implicit"),_t.compiledExplicit=Sn(_t,"explicit"),_t.compiledTypeMap=function(){var B,Y,S={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function rt(_t){_t.multi?(S.multi[_t.kind].push(_t),S.multi.fallback.push(_t)):S[_t.kind][_t.tag]=S.fallback[_t.tag]=_t}for(B=0,Y=arguments.length;B<Y;B+=1)arguments[B].forEach(rt);return S}(_t.compiledImplicit,_t.compiledExplicit),_t};var Ke=pi,Pe=new Ki("tag:yaml.org,2002:str",{kind:"scalar",construct:function(S){return null!==S?S:""}}),di=new Ki("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(S){return null!==S?S:[]}}),Oi=new Ki("tag:yaml.org,2002:map",{kind:"mapping",construct:function(S){return null!==S?S:{}}}),dn=new Ke({explicit:[Pe,di,Oi]}),io=new Ki("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(S){if(null===S)return!0;var B=S.length;return 1===B&&"~"===S||4===B&&("null"===S||"Null"===S||"NULL"===S)},construct:function(){return null},predicate:function(S){return null===S},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),pr=new Ki("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(S){if(null===S)return!1;var B=S.length;return 4===B&&("true"===S||"True"===S||"TRUE"===S)||5===B&&("false"===S||"False"===S||"FALSE"===S)},construct:function(S){return"true"===S||"True"===S||"TRUE"===S},predicate:function(S){return"[object Boolean]"===Object.prototype.toString.call(S)},represent:{lowercase:function(S){return S?"true":"false"},uppercase:function(S){return S?"TRUE":"FALSE"},camelcase:function(S){return S?"True":"False"}},defaultStyle:"lowercase"});function ss(S){return 48<=S&&S<=57||65<=S&&S<=70||97<=S&&S<=102}function Zn(S){return 48<=S&&S<=55}function Di(S){return 48<=S&&S<=57}var ar=new Ki("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(S){if(null===S)return!1;var _t,B=S.length,Y=0,rt=!1;if(!B)return!1;if(("-"===(_t=S[Y])||"+"===_t)&&(_t=S[++Y]),"0"===_t){if(Y+1===B)return!0;if("b"===(_t=S[++Y])){for(Y++;Y<B;Y++)if("_"!==(_t=S[Y])){if("0"!==_t&&"1"!==_t)return!1;rt=!0}return rt&&"_"!==_t}if("x"===_t){for(Y++;Y<B;Y++)if("_"!==(_t=S[Y])){if(!ss(S.charCodeAt(Y)))return!1;rt=!0}return rt&&"_"!==_t}if("o"===_t){for(Y++;Y<B;Y++)if("_"!==(_t=S[Y])){if(!Zn(S.charCodeAt(Y)))return!1;rt=!0}return rt&&"_"!==_t}}if("_"===_t)return!1;for(;Y<B;Y++)if("_"!==(_t=S[Y])){if(!Di(S.charCodeAt(Y)))return!1;rt=!0}return!(!rt||"_"===_t)},construct:function(S){var rt,B=S,Y=1;if(-1!==B.indexOf("_")&&(B=B.replace(/_/g,"")),("-"===(rt=B[0])||"+"===rt)&&("-"===rt&&(Y=-1),rt=(B=B.slice(1))[0]),"0"===B)return 0;if("0"===rt){if("b"===B[1])return Y*parseInt(B.slice(2),2);if("x"===B[1])return Y*parseInt(B.slice(2),16);if("o"===B[1])return Y*parseInt(B.slice(2),8)}return Y*parseInt(B,10)},predicate:function(S){return"[object Number]"===Object.prototype.toString.call(S)&&S%1==0&&!Ce.isNegativeZero(S)},represent:{binary:function(S){return S>=0?"0b"+S.toString(2):"-0b"+S.toString(2).slice(1)},octal:function(S){return S>=0?"0o"+S.toString(8):"-0o"+S.toString(8).slice(1)},decimal:function(S){return S.toString(10)},hexadecimal:function(S){return S>=0?"0x"+S.toString(16).toUpperCase():"-0x"+S.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Sr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),Ui=/^[-+]?[0-9]+e/,de=new Ki("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(S){return!(null===S||!Sr.test(S)||"_"===S[S.length-1])},construct:function(S){var B,Y;return Y="-"===(B=S.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(B[0])>=0&&(B=B.slice(1)),".inf"===B?1===Y?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===B?NaN:Y*parseFloat(B,10)},predicate:function(S){return"[object Number]"===Object.prototype.toString.call(S)&&(S%1!=0||Ce.isNegativeZero(S))},represent:function(S,B){var Y;if(isNaN(S))switch(B){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===S)switch(B){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===S)switch(B){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ce.isNegativeZero(S))return"-0.0";return Y=S.toString(10),Ui.test(Y)?Y.replace("e",".e"):Y},defaultStyle:"lowercase"}),Fe=dn.extend({implicit:[io,pr,ar,de]}),Ai=Fe,ji=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Xi=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),Tn=new Ki("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(S){return null!==S&&(null!==ji.exec(S)||null!==Xi.exec(S))},construct:function(S){var B,Y,rt,_t,Xt,Jt,he,gi,De=0,ke=null;if(null===(B=ji.exec(S))&&(B=Xi.exec(S)),null===B)throw new Error("Date resolve error");if(Y=+B[1],rt=+B[2]-1,_t=+B[3],!B[4])return new Date(Date.UTC(Y,rt,_t));if(Xt=+B[4],Jt=+B[5],he=+B[6],B[7]){for(De=B[7].slice(0,3);De.length<3;)De+="0";De=+De}return B[9]&&(ke=6e4*(60*+B[10]+ +(B[11]||0)),"-"===B[9]&&(ke=-ke)),gi=new Date(Date.UTC(Y,rt,_t,Xt,Jt,he,De)),ke&&gi.setTime(gi.getTime()-ke),gi},instanceOf:Date,represent:function(S){return S.toISOString()}}),no=new Ki("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(S){return"<<"===S||null===S}}),ro="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",ho=new Ki("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(S){if(null===S)return!1;var B,Y,rt=0,_t=S.length,Xt=ro;for(Y=0;Y<_t;Y++)if(!((B=Xt.indexOf(S.charAt(Y)))>64)){if(B<0)return!1;rt+=6}return rt%8==0},construct:function(S){var B,Y,rt=S.replace(/[\r\n=]/g,""),_t=rt.length,Xt=ro,Jt=0,he=[];for(B=0;B<_t;B++)B%4==0&&B&&(he.push(Jt>>16&255),he.push(Jt>>8&255),he.push(255&Jt)),Jt=Jt<<6|Xt.indexOf(rt.charAt(B));return 0==(Y=_t%4*6)?(he.push(Jt>>16&255),he.push(Jt>>8&255),he.push(255&Jt)):18===Y?(he.push(Jt>>10&255),he.push(Jt>>2&255)):12===Y&&he.push(Jt>>4&255),new Uint8Array(he)},predicate:function(S){return"[object Uint8Array]"===Object.prototype.toString.call(S)},represent:function(S){var rt,_t,B="",Y=0,Xt=S.length,Jt=ro;for(rt=0;rt<Xt;rt++)rt%3==0&&rt&&(B+=Jt[Y>>18&63],B+=Jt[Y>>12&63],B+=Jt[Y>>6&63],B+=Jt[63&Y]),Y=(Y<<8)+S[rt];return 0==(_t=Xt%3)?(B+=Jt[Y>>18&63],B+=Jt[Y>>12&63],B+=Jt[Y>>6&63],B+=Jt[63&Y]):2===_t?(B+=Jt[Y>>10&63],B+=Jt[Y>>4&63],B+=Jt[Y<<2&63],B+=Jt[64]):1===_t&&(B+=Jt[Y>>2&63],B+=Jt[Y<<4&63],B+=Jt[64],B+=Jt[64]),B}}),Go=Object.prototype.hasOwnProperty,sl=Object.prototype.toString,Zs=new Ki("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(S){if(null===S)return!0;var Y,rt,_t,Xt,Jt,B=[],he=S;for(Y=0,rt=he.length;Y<rt;Y+=1){if(Jt=!1,"[object Object]"!==sl.call(_t=he[Y]))return!1;for(Xt in _t)if(Go.call(_t,Xt)){if(Jt)return!1;Jt=!0}if(!Jt)return!1;if(-1!==B.indexOf(Xt))return!1;B.push(Xt)}return!0},construct:function(S){return null!==S?S:[]}}),Cr=Object.prototype.toString,Ma=new Ki("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(S){if(null===S)return!0;var B,Y,rt,_t,Xt,Jt=S;for(Xt=new Array(Jt.length),B=0,Y=Jt.length;B<Y;B+=1){if("[object Object]"!==Cr.call(rt=Jt[B])||1!==(_t=Object.keys(rt)).length)return!1;Xt[B]=[_t[0],rt[_t[0]]]}return!0},construct:function(S){if(null===S)return[];var B,Y,rt,_t,Xt,Jt=S;for(Xt=new Array(Jt.length),B=0,Y=Jt.length;B<Y;B+=1)rt=Jt[B],_t=Object.keys(rt),Xt[B]=[_t[0],rt[_t[0]]];return Xt}}),qs=Object.prototype.hasOwnProperty,ha=new Ki("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(S){if(null===S)return!0;var B,Y=S;for(B in Y)if(qs.call(Y,B)&&null!==Y[B])return!1;return!0},construct:function(S){return null!==S?S:{}}}),Aa=Ai.extend({implicit:[Tn,no],explicit:[ho,Zs,Ma,ha]}),ta=Object.prototype.hasOwnProperty,_r=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ls=/[\x85\u2028\u2029]/,Ta=/[,\[\]\{\}]/,Po=/^(?:!|!!|![a-z\-]+!)$/i,Vs=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Xr(S){return Object.prototype.toString.call(S)}function Oo(S){return 10===S||13===S}function _s(S){return 9===S||32===S}function Qr(S){return 9===S||32===S||10===S||13===S}function Gs(S){return 44===S||91===S||93===S||123===S||125===S}function Ar(S){var B;return 48<=S&&S<=57?S-48:97<=(B=32|S)&&B<=102?B-97+10:-1}function ea(S){return 120===S?2:117===S?4:85===S?8:0}function Hr(S){return 48<=S&&S<=57?S-48:-1}function vs(S){return 48===S?"\0":97===S?"\x07":98===S?"\b":116===S||9===S?"\t":110===S?"\n":118===S?"\v":102===S?"\f":114===S?"\r":101===S?"\x1b":32===S?" ":34===S?'"':47===S?"/":92===S?"\\":78===S?"\x85":95===S?"\xa0":76===S?"\u2028":80===S?"\u2029":""}function Na(S){return S<=65535?String.fromCharCode(S):String.fromCharCode(55296+(S-65536>>10),56320+(S-65536&1023))}for(var cs=new Array(256),Ao=new Array(256),us=0;us<256;us++)cs[us]=vs(us)?1:0,Ao[us]=vs(us);function ll(S,B){this.input=S,this.filename=B.filename||null,this.schema=B.schema||Aa,this.onWarning=B.onWarning||null,this.legacy=B.legacy||!1,this.json=B.json||!1,this.listener=B.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=S.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Or(S,B){var Y={name:S.filename,buffer:S.input.slice(0,-1),position:S.position,line:S.line,column:S.position-S.lineStart};return Y.snippet=function(S,B){if(B=Object.create(B||null),!S.buffer)return null;B.maxLength||(B.maxLength=79),"number"!=typeof B.indent&&(B.indent=1),"number"!=typeof B.linesBefore&&(B.linesBefore=3),"number"!=typeof B.linesAfter&&(B.linesAfter=2);for(var Xt,Y=/\r?\n|\r|\0/g,rt=[0],_t=[],Jt=-1;Xt=Y.exec(S.buffer);)_t.push(Xt.index),rt.push(Xt.index+Xt[0].length),S.position<=Xt.index&&Jt<0&&(Jt=rt.length-2);Jt<0&&(Jt=rt.length-1);var De,ke,he="",ri=Math.min(S.line+B.linesAfter,_t.length).toString().length,ai=B.maxLength-(B.indent+ri+3);for(De=1;De<=B.linesBefore&&!(Jt-De<0);De++)ke=ti(S.buffer,rt[Jt-De],_t[Jt-De],S.position-(rt[Jt]-rt[Jt-De]),ai),he=Ce.repeat(" ",B.indent)+ge((S.line-De+1).toString(),ri)+" | "+ke.str+"\n"+he;for(ke=ti(S.buffer,rt[Jt],_t[Jt],S.position,ai),he+=Ce.repeat(" ",B.indent)+ge((S.line+1).toString(),ri)+" | "+ke.str+"\n",he+=Ce.repeat("-",B.indent+ri+3+ke.pos)+"^\n",De=1;De<=B.linesAfter&&!(Jt+De>=_t.length);De++)ke=ti(S.buffer,rt[Jt+De],_t[Jt+De],S.position-(rt[Jt]-rt[Jt+De]),ai),he+=Ce.repeat(" ",B.indent)+ge((S.line+De+1).toString(),ri)+" | "+ke.str+"\n";return he.replace(/\n$/,"")}(Y),new Pi(B,Y)}function xn(S,B){throw Or(S,B)}function ia(S,B){S.onWarning&&S.onWarning.call(null,Or(S,B))}var Lt={YAML:function(B,Y,rt){var _t,Xt,Jt;null!==B.version&&xn(B,"duplication of %YAML directive"),1!==rt.length&&xn(B,"YAML directive accepts exactly one argument"),null===(_t=/^([0-9]+)\.([0-9]+)$/.exec(rt[0]))&&xn(B,"ill-formed argument of the YAML directive"),Xt=parseInt(_t[1],10),Jt=parseInt(_t[2],10),1!==Xt&&xn(B,"unacceptable YAML version of the document"),B.version=rt[0],B.checkLineBreaks=Jt<2,1!==Jt&&2!==Jt&&ia(B,"unsupported YAML version of the document")},TAG:function(B,Y,rt){var _t,Xt;2!==rt.length&&xn(B,"TAG directive accepts exactly two arguments"),Xt=rt[1],Po.test(_t=rt[0])||xn(B,"ill-formed tag handle (first argument) of the TAG directive"),ta.call(B.tagMap,_t)&&xn(B,'there is a previously declared suffix for "'+_t+'" tag handle'),Vs.test(Xt)||xn(B,"ill-formed tag prefix (second argument) of the TAG directive");try{Xt=decodeURIComponent(Xt)}catch(Jt){xn(B,"tag prefix is malformed: "+Xt)}B.tagMap[_t]=Xt}};function Q(S,B,Y,rt){var _t,Xt,Jt,he;if(B<Y){if(he=S.input.slice(B,Y),rt)for(_t=0,Xt=he.length;_t<Xt;_t+=1)9===(Jt=he.charCodeAt(_t))||32<=Jt&&Jt<=1114111||xn(S,"expected valid JSON character");else _r.test(he)&&xn(S,"the stream contains non-printable characters");S.result+=he}}function V(S,B,Y,rt){var _t,Xt,Jt,he;for(Ce.isObject(Y)||xn(S,"cannot merge mappings; the provided source object is unacceptable"),Jt=0,he=(_t=Object.keys(Y)).length;Jt<he;Jt+=1)ta.call(B,Xt=_t[Jt])||(B[Xt]=Y[Xt],rt[Xt]=!0)}function j(S,B,Y,rt,_t,Xt,Jt,he,De){var ke,ri;if(Array.isArray(_t))for(ke=0,ri=(_t=Array.prototype.slice.call(_t)).length;ke<ri;ke+=1)Array.isArray(_t[ke])&&xn(S,"nested arrays are not supported inside keys"),"object"==typeof _t&&"[object Object]"===Xr(_t[ke])&&(_t[ke]="[object Object]");if("object"==typeof _t&&"[object Object]"===Xr(_t)&&(_t="[object Object]"),_t=String(_t),null===B&&(B={}),"tag:yaml.org,2002:merge"===rt)if(Array.isArray(Xt))for(ke=0,ri=Xt.length;ke<ri;ke+=1)V(S,B,Xt[ke],Y);else V(S,B,Xt,Y);else!S.json&&!ta.call(Y,_t)&&ta.call(B,_t)&&(S.line=Jt||S.line,S.lineStart=he||S.lineStart,S.position=De||S.position,xn(S,"duplicated mapping key")),"__proto__"===_t?Object.defineProperty(B,_t,{configurable:!0,enumerable:!0,writable:!0,value:Xt}):B[_t]=Xt,delete Y[_t];return B}function xt(S){var B;10===(B=S.input.charCodeAt(S.position))?S.position++:13===B?(S.position++,10===S.input.charCodeAt(S.position)&&S.position++):xn(S,"a line break is expected"),S.line+=1,S.lineStart=S.position,S.firstTabInLine=-1}function Be(S,B,Y){for(var rt=0,_t=S.input.charCodeAt(S.position);0!==_t;){for(;_s(_t);)9===_t&&-1===S.firstTabInLine&&(S.firstTabInLine=S.position),_t=S.input.charCodeAt(++S.position);if(B&&35===_t)do{_t=S.input.charCodeAt(++S.position)}while(10!==_t&&13!==_t&&0!==_t);if(!Oo(_t))break;for(xt(S),_t=S.input.charCodeAt(S.position),rt++,S.lineIndent=0;32===_t;)S.lineIndent++,_t=S.input.charCodeAt(++S.position)}return-1!==Y&&0!==rt&&S.lineIndent<Y&&ia(S,"deficient indentation"),rt}function Ti(S){var Y,B=S.position;return!(45!==(Y=S.input.charCodeAt(B))&&46!==Y||Y!==S.input.charCodeAt(B+1)||Y!==S.input.charCodeAt(B+2)||(B+=3,Y=S.input.charCodeAt(B),0!==Y&&!Qr(Y)))}function an(S,B){1===B?S.result+=" ":B>1&&(S.result+=Ce.repeat("\n",B-1))}function rr(S,B){var Y,De,rt=S.tag,_t=S.anchor,Xt=[],he=!1;if(-1!==S.firstTabInLine)return!1;for(null!==S.anchor&&(S.anchorMap[S.anchor]=Xt),De=S.input.charCodeAt(S.position);0!==De&&(-1!==S.firstTabInLine&&(S.position=S.firstTabInLine,xn(S,"tab characters must not be used in indentation")),45===De&&Qr(S.input.charCodeAt(S.position+1)));)if(he=!0,S.position++,Be(S,!0,-1)&&S.lineIndent<=B)Xt.push(null),De=S.input.charCodeAt(S.position);else if(Y=S.line,zo(S,B,3,!1,!0),Xt.push(S.result),Be(S,!0,-1),De=S.input.charCodeAt(S.position),(S.line===Y||S.lineIndent>B)&&0!==De)xn(S,"bad indentation of a sequence entry");else if(S.lineIndent<B)break;return!!he&&(S.tag=rt,S.anchor=_t,S.kind="sequence",S.result=Xt,!0)}function Gn(S){var B,_t,Xt,Jt,Y=!1,rt=!1;if(33!==(Jt=S.input.charCodeAt(S.position)))return!1;if(null!==S.tag&&xn(S,"duplication of a tag property"),60===(Jt=S.input.charCodeAt(++S.position))?(Y=!0,Jt=S.input.charCodeAt(++S.position)):33===Jt?(rt=!0,_t="!!",Jt=S.input.charCodeAt(++S.position)):_t="!",B=S.position,Y){do{Jt=S.input.charCodeAt(++S.position)}while(0!==Jt&&62!==Jt);S.position<S.length?(Xt=S.input.slice(B,S.position),Jt=S.input.charCodeAt(++S.position)):xn(S,"unexpected end of the stream within a verbatim tag")}else{for(;0!==Jt&&!Qr(Jt);)33===Jt&&(rt?xn(S,"tag suffix cannot contain exclamation marks"):(_t=S.input.slice(B-1,S.position+1),Po.test(_t)||xn(S,"named tag handle cannot contain such characters"),rt=!0,B=S.position+1)),Jt=S.input.charCodeAt(++S.position);Xt=S.input.slice(B,S.position),Ta.test(Xt)&&xn(S,"tag suffix cannot contain flow indicator characters")}Xt&&!Vs.test(Xt)&&xn(S,"tag name cannot contain such characters: "+Xt);try{Xt=decodeURIComponent(Xt)}catch(he){xn(S,"tag name is malformed: "+Xt)}return Y?S.tag=Xt:ta.call(S.tagMap,_t)?S.tag=S.tagMap[_t]+Xt:"!"===_t?S.tag="!"+Xt:"!!"===_t?S.tag="tag:yaml.org,2002:"+Xt:xn(S,'undeclared tag handle "'+_t+'"'),!0}function Bo(S){var B,Y;if(38!==(Y=S.input.charCodeAt(S.position)))return!1;for(null!==S.anchor&&xn(S,"duplication of an anchor property"),Y=S.input.charCodeAt(++S.position),B=S.position;0!==Y&&!Qr(Y)&&!Gs(Y);)Y=S.input.charCodeAt(++S.position);return S.position===B&&xn(S,"name of an anchor node must contain at least one character"),S.anchor=S.input.slice(B,S.position),!0}function zo(S,B,Y,rt,_t){var Xt,Jt,he,ai,gi,wi,Wi,qi,ln,De=1,ke=!1,ri=!1;if(null!==S.listener&&S.listener("open",S),S.tag=null,S.anchor=null,S.kind=null,S.result=null,Xt=Jt=he=4===Y||3===Y,rt&&Be(S,!0,-1)&&(ke=!0,S.lineIndent>B?De=1:S.lineIndent===B?De=0:S.lineIndent<B&&(De=-1)),1===De)for(;Gn(S)||Bo(S);)Be(S,!0,-1)?(ke=!0,he=Xt,S.lineIndent>B?De=1:S.lineIndent===B?De=0:S.lineIndent<B&&(De=-1)):he=!1;if(he&&(he=ke||_t),(1===De||4===Y)&&(qi=1===Y||2===Y?B:B+1,ln=S.position-S.lineStart,1===De?he&&(rr(S,ln)||function(S,B,Y){var rt,_t,Xt,Jt,he,De,tn,ke=S.tag,ri=S.anchor,ai={},gi=Object.create(null),wi=null,Wi=null,qi=null,ln=!1,In=!1;if(-1!==S.firstTabInLine)return!1;for(null!==S.anchor&&(S.anchorMap[S.anchor]=ai),tn=S.input.charCodeAt(S.position);0!==tn;){if(!ln&&-1!==S.firstTabInLine&&(S.position=S.firstTabInLine,xn(S,"tab characters must not be used in indentation")),rt=S.input.charCodeAt(S.position+1),Xt=S.line,63!==tn&&58!==tn||!Qr(rt)){if(Jt=S.line,he=S.lineStart,De=S.position,!zo(S,Y,2,!1,!0))break;if(S.line===Xt){for(tn=S.input.charCodeAt(S.position);_s(tn);)tn=S.input.charCodeAt(++S.position);if(58===tn)Qr(tn=S.input.charCodeAt(++S.position))||xn(S,"a whitespace character is expected after the key-value separator within a block mapping"),ln&&(j(S,ai,gi,wi,Wi,null,Jt,he,De),wi=Wi=qi=null),In=!0,ln=!1,_t=!1,wi=S.tag,Wi=S.result;else{if(!In)return S.tag=ke,S.anchor=ri,!0;xn(S,"can not read an implicit mapping pair; a colon is missed")}}else{if(!In)return S.tag=ke,S.anchor=ri,!0;xn(S,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===tn?(ln&&(j(S,ai,gi,wi,Wi,null,Jt,he,De),wi=Wi=qi=null),In=!0,ln=!0,_t=!0):ln?(ln=!1,_t=!0):xn(S,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),S.position+=1,tn=rt;if((S.line===Xt||S.lineIndent>B)&&(ln&&(Jt=S.line,he=S.lineStart,De=S.position),zo(S,B,4,!0,_t)&&(ln?Wi=S.result:qi=S.result),ln||(j(S,ai,gi,wi,Wi,qi,Jt,he,De),wi=Wi=qi=null),Be(S,!0,-1),tn=S.input.charCodeAt(S.position)),(S.line===Xt||S.lineIndent>B)&&0!==tn)xn(S,"bad indentation of a mapping entry");else if(S.lineIndent<B)break}return ln&&j(S,ai,gi,wi,Wi,null,Jt,he,De),In&&(S.tag=ke,S.anchor=ri,S.kind="mapping",S.result=ai),In}(S,ln,qi))||function(S,B){var rt,_t,Xt,he,ri,ai,gi,wi,qi,ln,In,tn,Y=!0,Jt=S.tag,De=S.anchor,Wi=Object.create(null);if(91===(tn=S.input.charCodeAt(S.position)))ri=93,wi=!1,he=[];else{if(123!==tn)return!1;ri=125,wi=!0,he={}}for(null!==S.anchor&&(S.anchorMap[S.anchor]=he),tn=S.input.charCodeAt(++S.position);0!==tn;){if(Be(S,!0,B),(tn=S.input.charCodeAt(S.position))===ri)return S.position++,S.tag=Jt,S.anchor=De,S.kind=wi?"mapping":"sequence",S.result=he,!0;Y?44===tn&&xn(S,"expected the node content, but found ','"):xn(S,"missed comma between flow collection entries"),In=null,ai=gi=!1,63===tn&&Qr(S.input.charCodeAt(S.position+1))&&(ai=gi=!0,S.position++,Be(S,!0,B)),rt=S.line,_t=S.lineStart,Xt=S.position,zo(S,B,1,!1,!0),ln=S.tag,qi=S.result,Be(S,!0,B),tn=S.input.charCodeAt(S.position),(gi||S.line===rt)&&58===tn&&(ai=!0,tn=S.input.charCodeAt(++S.position),Be(S,!0,B),zo(S,B,1,!1,!0),In=S.result),wi?j(S,he,Wi,ln,qi,In,rt,_t,Xt):he.push(ai?j(S,null,Wi,ln,qi,In,rt,_t,Xt):qi),Be(S,!0,B),44===(tn=S.input.charCodeAt(S.position))?(Y=!0,tn=S.input.charCodeAt(++S.position)):Y=!1}xn(S,"unexpected end of the stream within a flow collection")}(S,qi)?ri=!0:(Jt&&function(S,B){var Y,rt,ri,ai,_t=1,Xt=!1,Jt=!1,he=B,De=0,ke=!1;if(124===(ai=S.input.charCodeAt(S.position)))rt=!1;else{if(62!==ai)return!1;rt=!0}for(S.kind="scalar",S.result="";0!==ai;)if(43===(ai=S.input.charCodeAt(++S.position))||45===ai)1===_t?_t=43===ai?3:2:xn(S,"repeat of a chomping mode identifier");else{if(!((ri=Hr(ai))>=0))break;0===ri?xn(S,"bad explicit indentation width of a block scalar; it cannot be less than one"):Jt?xn(S,"repeat of an indentation width identifier"):(he=B+ri-1,Jt=!0)}if(_s(ai)){do{ai=S.input.charCodeAt(++S.position)}while(_s(ai));if(35===ai)do{ai=S.input.charCodeAt(++S.position)}while(!Oo(ai)&&0!==ai)}for(;0!==ai;){for(xt(S),S.lineIndent=0,ai=S.input.charCodeAt(S.position);(!Jt||S.lineIndent<he)&&32===ai;)S.lineIndent++,ai=S.input.charCodeAt(++S.position);if(!Jt&&S.lineIndent>he&&(he=S.lineIndent),Oo(ai))De++;else{if(S.lineIndent<he){3===_t?S.result+=Ce.repeat("\n",Xt?1+De:De):1===_t&&Xt&&(S.result+="\n");break}for(rt?_s(ai)?(ke=!0,S.result+=Ce.repeat("\n",Xt?1+De:De)):ke?(ke=!1,S.result+=Ce.repeat("\n",De+1)):0===De?Xt&&(S.result+=" "):S.result+=Ce.repeat("\n",De):S.result+=Ce.repeat("\n",Xt?1+De:De),Xt=!0,Jt=!0,De=0,Y=S.position;!Oo(ai)&&0!==ai;)ai=S.input.charCodeAt(++S.position);Q(S,Y,S.position,!1)}}return!0}(S,qi)||function(S,B){var Y,rt,_t;if(39!==(Y=S.input.charCodeAt(S.position)))return!1;for(S.kind="scalar",S.result="",S.position++,rt=_t=S.position;0!==(Y=S.input.charCodeAt(S.position));)if(39===Y){if(Q(S,rt,S.position,!0),39!==(Y=S.input.charCodeAt(++S.position)))return!0;rt=S.position,S.position++,_t=S.position}else Oo(Y)?(Q(S,rt,_t,!0),an(S,Be(S,!1,B)),rt=_t=S.position):S.position===S.lineStart&&Ti(S)?xn(S,"unexpected end of the document within a single quoted scalar"):(S.position++,_t=S.position);xn(S,"unexpected end of the stream within a single quoted scalar")}(S,qi)||function(S,B){var Y,rt,_t,Xt,Jt,he;if(34!==(he=S.input.charCodeAt(S.position)))return!1;for(S.kind="scalar",S.result="",S.position++,Y=rt=S.position;0!==(he=S.input.charCodeAt(S.position));){if(34===he)return Q(S,Y,S.position,!0),S.position++,!0;if(92===he){if(Q(S,Y,S.position,!0),Oo(he=S.input.charCodeAt(++S.position)))Be(S,!1,B);else if(he<256&&cs[he])S.result+=Ao[he],S.position++;else if((Jt=ea(he))>0){for(_t=Jt,Xt=0;_t>0;_t--)(Jt=Ar(he=S.input.charCodeAt(++S.position)))>=0?Xt=(Xt<<4)+Jt:xn(S,"expected hexadecimal character");S.result+=Na(Xt),S.position++}else xn(S,"unknown escape sequence");Y=rt=S.position}else Oo(he)?(Q(S,Y,rt,!0),an(S,Be(S,!1,B)),Y=rt=S.position):S.position===S.lineStart&&Ti(S)?xn(S,"unexpected end of the document within a double quoted scalar"):(S.position++,rt=S.position)}xn(S,"unexpected end of the stream within a double quoted scalar")}(S,qi)?ri=!0:function(S){var B,Y,rt;if(42!==(rt=S.input.charCodeAt(S.position)))return!1;for(rt=S.input.charCodeAt(++S.position),B=S.position;0!==rt&&!Qr(rt)&&!Gs(rt);)rt=S.input.charCodeAt(++S.position);return S.position===B&&xn(S,"name of an alias node must contain at least one character"),Y=S.input.slice(B,S.position),ta.call(S.anchorMap,Y)||xn(S,'unidentified alias "'+Y+'"'),S.result=S.anchorMap[Y],Be(S,!0,-1),!0}(S)?(ri=!0,(null!==S.tag||null!==S.anchor)&&xn(S,"alias node should not have any properties")):function(S,B,Y){var _t,Xt,Jt,he,De,ke,ri,wi,ai=S.kind,gi=S.result;if(Qr(wi=S.input.charCodeAt(S.position))||Gs(wi)||35===wi||38===wi||42===wi||33===wi||124===wi||62===wi||39===wi||34===wi||37===wi||64===wi||96===wi||(63===wi||45===wi)&&(Qr(_t=S.input.charCodeAt(S.position+1))||Y&&Gs(_t)))return!1;for(S.kind="scalar",S.result="",Xt=Jt=S.position,he=!1;0!==wi;){if(58===wi){if(Qr(_t=S.input.charCodeAt(S.position+1))||Y&&Gs(_t))break}else if(35===wi){if(Qr(S.input.charCodeAt(S.position-1)))break}else{if(S.position===S.lineStart&&Ti(S)||Y&&Gs(wi))break;if(Oo(wi)){if(De=S.line,ke=S.lineStart,ri=S.lineIndent,Be(S,!1,-1),S.lineIndent>=B){he=!0,wi=S.input.charCodeAt(S.position);continue}S.position=Jt,S.line=De,S.lineStart=ke,S.lineIndent=ri;break}}he&&(Q(S,Xt,Jt,!1),an(S,S.line-De),Xt=Jt=S.position,he=!1),_s(wi)||(Jt=S.position+1),wi=S.input.charCodeAt(++S.position)}return Q(S,Xt,Jt,!1),!!S.result||(S.kind=ai,S.result=gi,!1)}(S,qi,1===Y)&&(ri=!0,null===S.tag&&(S.tag="?")),null!==S.anchor&&(S.anchorMap[S.anchor]=S.result)):0===De&&(ri=he&&rr(S,ln))),null===S.tag)null!==S.anchor&&(S.anchorMap[S.anchor]=S.result);else if("?"===S.tag){for(null!==S.result&&"scalar"!==S.kind&&xn(S,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+S.kind+'"'),ai=0,gi=S.implicitTypes.length;ai<gi;ai+=1)if((Wi=S.implicitTypes[ai]).resolve(S.result)){S.result=Wi.construct(S.result),S.tag=Wi.tag,null!==S.anchor&&(S.anchorMap[S.anchor]=S.result);break}}else if("!"!==S.tag){if(ta.call(S.typeMap[S.kind||"fallback"],S.tag))Wi=S.typeMap[S.kind||"fallback"][S.tag];else for(Wi=null,ai=0,gi=(wi=S.typeMap.multi[S.kind||"fallback"]).length;ai<gi;ai+=1)if(S.tag.slice(0,wi[ai].tag.length)===wi[ai].tag){Wi=wi[ai];break}Wi||xn(S,"unknown tag !<"+S.tag+">"),null!==S.result&&Wi.kind!==S.kind&&xn(S,"unacceptable node kind for !<"+S.tag+'> tag; it should be "'+Wi.kind+'", not "'+S.kind+'"'),Wi.resolve(S.result,S.tag)?(S.result=Wi.construct(S.result,S.tag),null!==S.anchor&&(S.anchorMap[S.anchor]=S.result)):xn(S,"cannot resolve a node with !<"+S.tag+"> explicit tag")}return null!==S.listener&&S.listener("close",S),null!==S.tag||null!==S.anchor||ri}function Ja(S){var Y,rt,_t,Jt,B=S.position,Xt=!1;for(S.version=null,S.checkLineBreaks=S.legacy,S.tagMap=Object.create(null),S.anchorMap=Object.create(null);0!==(Jt=S.input.charCodeAt(S.position))&&(Be(S,!0,-1),Jt=S.input.charCodeAt(S.position),!(S.lineIndent>0||37!==Jt));){for(Xt=!0,Jt=S.input.charCodeAt(++S.position),Y=S.position;0!==Jt&&!Qr(Jt);)Jt=S.input.charCodeAt(++S.position);for(_t=[],(rt=S.input.slice(Y,S.position)).length<1&&xn(S,"directive name must not be less than one character in length");0!==Jt;){for(;_s(Jt);)Jt=S.input.charCodeAt(++S.position);if(35===Jt){do{Jt=S.input.charCodeAt(++S.position)}while(0!==Jt&&!Oo(Jt));break}if(Oo(Jt))break;for(Y=S.position;0!==Jt&&!Qr(Jt);)Jt=S.input.charCodeAt(++S.position);_t.push(S.input.slice(Y,S.position))}0!==Jt&&xt(S),ta.call(Lt,rt)?Lt[rt](S,rt,_t):ia(S,'unknown document directive "'+rt+'"')}Be(S,!0,-1),0===S.lineIndent&&45===S.input.charCodeAt(S.position)&&45===S.input.charCodeAt(S.position+1)&&45===S.input.charCodeAt(S.position+2)?(S.position+=3,Be(S,!0,-1)):Xt&&xn(S,"directives end mark is expected"),zo(S,S.lineIndent-1,4,!1,!0),Be(S,!0,-1),S.checkLineBreaks&&ls.test(S.input.slice(B,S.position))&&ia(S,"non-ASCII line breaks are interpreted as content"),S.documents.push(S.result),S.position===S.lineStart&&Ti(S)?46===S.input.charCodeAt(S.position)&&(S.position+=3,Be(S,!0,-1)):S.position<S.length-1&&xn(S,"end of the stream or a document separator is expected")}function Cs(S,B){B=B||{},0!==(S=String(S)).length&&(10!==S.charCodeAt(S.length-1)&&13!==S.charCodeAt(S.length-1)&&(S+="\n"),65279===S.charCodeAt(0)&&(S=S.slice(1)));var Y=new ll(S,B),rt=S.indexOf("\0");for(-1!==rt&&(Y.position=rt,xn(Y,"null byte is not allowed in input")),Y.input+="\0";32===Y.input.charCodeAt(Y.position);)Y.lineIndent+=1,Y.position+=1;for(;Y.position<Y.length-1;)Ja(Y);return Y.documents}var ae={loadAll:function(S,B,Y){null!==B&&"object"==typeof B&&void 0===Y&&(Y=B,B=null);var rt=Cs(S,Y);if("function"!=typeof B)return rt;for(var _t=0,Xt=rt.length;_t<Xt;_t+=1)B(rt[_t])},load:function(S,B){var Y=Cs(S,B);if(0!==Y.length){if(1===Y.length)return Y[0];throw new Pi("expected a single document in the stream, but found more")}}},z=Object.prototype.toString,J=Object.prototype.hasOwnProperty,oo={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Ds=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Za=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Dn(S){var B,Y,rt;if(B=S.toString(16).toUpperCase(),S<=255)Y="x",rt=2;else if(S<=65535)Y="u",rt=4;else{if(!(S<=4294967295))throw new Pi("code point within a string may not be greater than 0xFFFFFFFF");Y="U",rt=8}return"\\"+Y+Ce.repeat("0",rt-B.length)+B}function ur(S){this.schema=S.schema||Aa,this.indent=Math.max(1,S.indent||2),this.noArrayIndent=S.noArrayIndent||!1,this.skipInvalid=S.skipInvalid||!1,this.flowLevel=Ce.isNothing(S.flowLevel)?-1:S.flowLevel,this.styleMap=function(S,B){var Y,rt,_t,Xt,Jt,he,De;if(null===B)return{};for(Y={},_t=0,Xt=(rt=Object.keys(B)).length;_t<Xt;_t+=1)Jt=rt[_t],he=String(B[Jt]),"!!"===Jt.slice(0,2)&&(Jt="tag:yaml.org,2002:"+Jt.slice(2)),(De=S.compiledTypeMap.fallback[Jt])&&J.call(De.styleAliases,he)&&(he=De.styleAliases[he]),Y[Jt]=he;return Y}(this.schema,S.styles||null),this.sortKeys=S.sortKeys||!1,this.lineWidth=S.lineWidth||80,this.noRefs=S.noRefs||!1,this.noCompatMode=S.noCompatMode||!1,this.condenseFlow=S.condenseFlow||!1,this.quotingType='"'===S.quotingType?2:1,this.forceQuotes=S.forceQuotes||!1,this.replacer="function"==typeof S.replacer?S.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function fr(S,B){for(var Jt,Y=Ce.repeat(" ",B),rt=0,_t=-1,Xt="",he=S.length;rt<he;)-1===(_t=S.indexOf("\n",rt))?(Jt=S.slice(rt),rt=he):(Jt=S.slice(rt,_t+1),rt=_t+1),Jt.length&&"\n"!==Jt&&(Xt+=Y),Xt+=Jt;return Xt}function Qo(S,B){return"\n"+Ce.repeat(" ",S.indent*B)}function ra(S){return 32===S||9===S}function qr(S){return 32<=S&&S<=126||161<=S&&S<=55295&&8232!==S&&8233!==S||57344<=S&&S<=65533&&65279!==S||65536<=S&&S<=1114111}function Do(S){return qr(S)&&65279!==S&&13!==S&&10!==S}function hs(S,B,Y){var rt=Do(S),_t=rt&&!ra(S);return(Y?rt:rt&&44!==S&&91!==S&&93!==S&&123!==S&&125!==S)&&35!==S&&!(58===B&&!_t)||Do(B)&&!ra(B)&&35===S||58===B&&_t}function jo(S,B){var rt,Y=S.charCodeAt(B);return Y>=55296&&Y<=56319&&B+1<S.length&&(rt=S.charCodeAt(B+1))>=56320&&rt<=57343?1024*(Y-55296)+rt-56320+65536:Y}function js(S){return/^\n* /.test(S)}function fa(S,B,Y,rt,_t){S.dump=function(){if(0===B.length)return 2===S.quotingType?'""':"''";if(!S.noCompatMode&&(-1!==Ds.indexOf(B)||Za.test(B)))return 2===S.quotingType?'"'+B+'"':"'"+B+"'";var Xt=S.indent*Math.max(1,Y),Jt=-1===S.lineWidth?-1:Math.max(Math.min(S.lineWidth,40),S.lineWidth-Xt);switch(function(S,B,Y,rt,_t,Xt,Jt,he){var De,ke=0,ri=null,ai=!1,gi=!1,wi=-1!==rt,Wi=-1,qi=function(S){return qr(S)&&65279!==S&&!ra(S)&&45!==S&&63!==S&&58!==S&&44!==S&&91!==S&&93!==S&&123!==S&&125!==S&&35!==S&&38!==S&&42!==S&&33!==S&&124!==S&&61!==S&&62!==S&&39!==S&&34!==S&&37!==S&&64!==S&&96!==S}(jo(S,0))&&function(S){return!ra(S)&&58!==S}(jo(S,S.length-1));if(B||Jt)for(De=0;De<S.length;ke>=65536?De+=2:De++){if(!qr(ke=jo(S,De)))return 5;qi=qi&&hs(ke,ri,he),ri=ke}else{for(De=0;De<S.length;ke>=65536?De+=2:De++){if(10===(ke=jo(S,De)))ai=!0,wi&&(gi=gi||De-Wi-1>rt&&" "!==S[Wi+1],Wi=De);else if(!qr(ke))return 5;qi=qi&&hs(ke,ri,he),ri=ke}gi=gi||wi&&De-Wi-1>rt&&" "!==S[Wi+1]}return ai||gi?Y>9&&js(S)?5:Jt?2===Xt?5:2:gi?4:3:!qi||Jt||_t(S)?2===Xt?5:2:1}(B,rt||S.flowLevel>-1&&Y>=S.flowLevel,S.indent,Jt,function(ke){return function(S,B){var Y,rt;for(Y=0,rt=S.implicitTypes.length;Y<rt;Y+=1)if(S.implicitTypes[Y].resolve(B))return!0;return!1}(S,ke)},S.quotingType,S.forceQuotes&&!rt,_t)){case 1:return B;case 2:return"'"+B.replace(/'/g,"''")+"'";case 3:return"|"+Yl(B,S.indent)+qa(fr(B,Xt));case 4:return">"+Yl(B,S.indent)+qa(fr(function(S,B){for(var Xt,Jt,Y=/(\n+)([^\n]*)/g,rt=(ke=void 0,ke=S.indexOf("\n"),Y.lastIndex=ke=-1!==ke?ke:S.length,Ll(S.slice(0,ke),B)),_t="\n"===S[0]||" "===S[0];Jt=Y.exec(S);){var De=Jt[2];Xt=" "===De[0],rt+=Jt[1]+(_t||Xt||""===De?"":"\n")+Ll(De,B),_t=Xt}var ke;return rt}(B,Jt),Xt));case 5:return'"'+function(S){for(var rt,B="",Y=0,_t=0;_t<S.length;Y>=65536?_t+=2:_t++)Y=jo(S,_t),!(rt=oo[Y])&&qr(Y)?(B+=S[_t],Y>=65536&&(B+=S[_t+1])):B+=rt||Dn(Y);return B}(B)+'"';default:throw new Pi("impossible error: invalid scalar style")}}()}function Yl(S,B){var Y=js(S)?String(B):"",rt="\n"===S[S.length-1];return Y+(!rt||"\n"!==S[S.length-2]&&"\n"!==S?rt?"":"-":"+")+"\n"}function qa(S){return"\n"===S[S.length-1]?S.slice(0,-1):S}function Ll(S,B){if(""===S||" "===S[0])return S;for(var rt,Xt,Y=/ [^ ]/g,_t=0,Jt=0,he=0,De="";rt=Y.exec(S);)(he=rt.index)-_t>B&&(De+="\n"+S.slice(_t,Xt=Jt>_t?Jt:he),_t=Xt+1),Jt=he;return De+="\n",(De+=S.length-_t>B&&Jt>_t?S.slice(_t,Jt)+"\n"+S.slice(Jt+1):S.slice(_t)).slice(1)}function ds(S,B,Y){var rt,_t,Xt,Jt,he,De;for(Xt=0,Jt=(_t=Y?S.explicitTypes:S.implicitTypes).length;Xt<Jt;Xt+=1)if(((he=_t[Xt]).instanceOf||he.predicate)&&(!he.instanceOf||"object"==typeof B&&B instanceof he.instanceOf)&&(!he.predicate||he.predicate(B))){if(S.tag=Y?he.multi&&he.representName?he.representName(B):he.tag:"?",he.represent){if(De=S.styleMap[he.tag]||he.defaultStyle,"[object Function]"===z.call(he.represent))rt=he.represent(B,De);else{if(!J.call(he.represent,De))throw new Pi("!<"+he.tag+'> tag resolver accepts not "'+De+'" style');rt=he.represent[De](B,De)}S.dump=rt}return!0}return!1}function Ys(S,B,Y,rt,_t,Xt,Jt){S.tag=null,S.dump=Y,ds(S,Y,!1)||ds(S,Y,!0);var ke,he=z.call(S.dump),De=rt;rt&&(rt=S.flowLevel<0||S.flowLevel>B);var ai,gi,ri="[object Object]"===he||"[object Array]"===he;if(ri&&(gi=-1!==(ai=S.duplicates.indexOf(Y))),(null!==S.tag&&"?"!==S.tag||gi||2!==S.indent&&B>0)&&(_t=!1),gi&&S.usedDuplicates[ai])S.dump="*ref_"+ai;else{if(ri&&gi&&!S.usedDuplicates[ai]&&(S.usedDuplicates[ai]=!0),"[object Object]"===he)rt&&0!==Object.keys(S.dump).length?(function(S,B,Y,rt){var he,De,ke,ri,ai,gi,_t="",Xt=S.tag,Jt=Object.keys(Y);if(!0===S.sortKeys)Jt.sort();else if("function"==typeof S.sortKeys)Jt.sort(S.sortKeys);else if(S.sortKeys)throw new Pi("sortKeys must be a boolean or a function");for(he=0,De=Jt.length;he<De;he+=1)gi="",(!rt||""!==_t)&&(gi+=Qo(S,B)),ri=Y[ke=Jt[he]],S.replacer&&(ri=S.replacer.call(Y,ke,ri)),Ys(S,B+1,ke,!0,!0,!0)&&((ai=null!==S.tag&&"?"!==S.tag||S.dump&&S.dump.length>1024)&&(S.dump&&10===S.dump.charCodeAt(0)?gi+="?":gi+="? "),gi+=S.dump,ai&&(gi+=Qo(S,B)),Ys(S,B+1,ri,!0,ai)&&(S.dump&&10===S.dump.charCodeAt(0)?gi+=":":gi+=": ",_t+=gi+=S.dump));S.tag=Xt,S.dump=_t||"{}"}(S,B,S.dump,_t),gi&&(S.dump="&ref_"+ai+S.dump)):(function(S,B,Y){var Jt,he,De,ke,ri,rt="",_t=S.tag,Xt=Object.keys(Y);for(Jt=0,he=Xt.length;Jt<he;Jt+=1)ri="",""!==rt&&(ri+=", "),S.condenseFlow&&(ri+='"'),ke=Y[De=Xt[Jt]],S.replacer&&(ke=S.replacer.call(Y,De,ke)),Ys(S,B,De,!1,!1)&&(S.dump.length>1024&&(ri+="? "),ri+=S.dump+(S.condenseFlow?'"':"")+":"+(S.condenseFlow?"":" "),Ys(S,B,ke,!1,!1)&&(rt+=ri+=S.dump));S.tag=_t,S.dump="{"+rt+"}"}(S,B,S.dump),gi&&(S.dump="&ref_"+ai+" "+S.dump));else if("[object Array]"===he)rt&&0!==S.dump.length?(function(S,B,Y,rt){var Jt,he,De,_t="",Xt=S.tag;for(Jt=0,he=Y.length;Jt<he;Jt+=1)De=Y[Jt],S.replacer&&(De=S.replacer.call(Y,String(Jt),De)),(Ys(S,B+1,De,!0,!0,!1,!0)||void 0===De&&Ys(S,B+1,null,!0,!0,!1,!0))&&((!rt||""!==_t)&&(_t+=Qo(S,B)),S.dump&&10===S.dump.charCodeAt(0)?_t+="-":_t+="- ",_t+=S.dump);S.tag=Xt,S.dump=_t||"[]"}(S,S.noArrayIndent&&!Jt&&B>0?B-1:B,S.dump,_t),gi&&(S.dump="&ref_"+ai+S.dump)):(function(S,B,Y){var Xt,Jt,he,rt="",_t=S.tag;for(Xt=0,Jt=Y.length;Xt<Jt;Xt+=1)he=Y[Xt],S.replacer&&(he=S.replacer.call(Y,String(Xt),he)),(Ys(S,B,he,!1,!1)||void 0===he&&Ys(S,B,null,!1,!1))&&(""!==rt&&(rt+=","+(S.condenseFlow?"":" ")),rt+=S.dump);S.tag=_t,S.dump="["+rt+"]"}(S,B,S.dump),gi&&(S.dump="&ref_"+ai+" "+S.dump));else{if("[object String]"!==he){if("[object Undefined]"===he)return!1;if(S.skipInvalid)return!1;throw new Pi("unacceptable kind of an object to dump "+he)}"?"!==S.tag&&fa(S,S.dump,B,Xt,De)}null!==S.tag&&"?"!==S.tag&&(ke=encodeURI("!"===S.tag[0]?S.tag.slice(1):S.tag).replace(/!/g,"%21"),ke="!"===S.tag[0]?"!"+ke:"tag:yaml.org,2002:"===ke.slice(0,18)?"!!"+ke.slice(18):"!<"+ke+">",S.dump=ke+" "+S.dump)}return!0}function Fa(S,B){var _t,Xt,Y=[],rt=[];for(oa(S,Y,rt),_t=0,Xt=rt.length;_t<Xt;_t+=1)B.duplicates.push(Y[rt[_t]]);B.usedDuplicates=new Array(Xt)}function oa(S,B,Y){var rt,_t,Xt;if(null!==S&&"object"==typeof S)if(-1!==(_t=B.indexOf(S)))-1===Y.indexOf(_t)&&Y.push(_t);else if(B.push(S),Array.isArray(S))for(_t=0,Xt=S.length;_t<Xt;_t+=1)oa(S[_t],B,Y);else for(_t=0,Xt=(rt=Object.keys(S)).length;_t<Xt;_t+=1)oa(S[rt[_t]],B,Y)}function uc(S,B){return function(){throw new Error("Function yaml."+S+" is removed in js-yaml 4. Use yaml."+B+" instead, which is now safe by default.")}}const so={Type:Ki,Schema:Ke,FAILSAFE_SCHEMA:dn,JSON_SCHEMA:Fe,CORE_SCHEMA:Ai,DEFAULT_SCHEMA:Aa,load:ae.load,loadAll:ae.loadAll,dump:function(S,B){var Y=new ur(B=B||{});Y.noRefs||Fa(S,Y);var rt=S;return Y.replacer&&(rt=Y.replacer.call({"":rt},"",rt)),Ys(Y,0,rt,!0,!0)?Y.dump+"\n":""},YAMLException:Pi,types:{binary:ho,float:de,map:Oi,null:io,pairs:Ma,set:ha,timestamp:Tn,bool:pr,int:ar,merge:no,omap:Zs,seq:di,str:Pe},safeLoad:uc("safeLoad","load"),safeLoadAll:uc("safeLoadAll","loadAll"),safeDump:uc("safeDump","dump")},cl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,{FormData:Xs,Blob:Ca,File:As}=cl;function ga(S){return function(S){if(St(S))return ht(S)}(S)||function(S){if(void 0!==Kt&&null!=It(S)||null!=S["@@iterator"])return ft(S)}(S)||Gt(S)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var hc=f(36028),ma=f.n(hc),Jl=function(B){return":/?#[]@!$&'()*+,;=".indexOf(B)>-1},Os=function(B){return/^[a-z0-9\-._~]+$/i.test(B)};function bo(S){var B,Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},rt=Y.escape,_t=arguments.length>2?arguments[2]:void 0;return"number"==typeof S&&(S=S.toString()),"string"==typeof S&&S.length&&rt?_t?JSON.parse(S):Mt()(B=ga(S)).call(B,function(Xt){var Jt,he;if(Os(Xt)||Jl(Xt)&&"unsafe"===rt)return Xt;var De=new TextEncoder;return Mt()(Jt=Mt()(he=Wt()(De.encode(Xt))).call(he,function(ri){var ai;return ma()(ai="0".concat(ri.toString(16).toUpperCase())).call(ai,-2)})).call(Jt,function(ri){return"%".concat(ri)}).join("")}).join(""):S}function ao(S){var B=S.value;return Array.isArray(B)?function(S){var B=S.key,Y=S.value,rt=S.style,_t=S.explode,Xt=S.escape,Jt=function(ai){return bo(ai,{escape:Xt})};if("simple"===rt)return Mt()(Y).call(Y,function(ri){return Jt(ri)}).join(",");if("label"===rt)return".".concat(Mt()(Y).call(Y,function(ri){return Jt(ri)}).join("."));if("matrix"===rt)return Mt()(Y).call(Y,function(ri){return Jt(ri)}).reduce(function(ri,ai){var gi,wi,Wi;return!ri||_t?Te()(wi=Te()(Wi="".concat(ri||"",";")).call(Wi,B,"=")).call(wi,ai):Te()(gi="".concat(ri,",")).call(gi,ai)},"");if("form"===rt){var he=_t?"&".concat(B,"="):",";return Mt()(Y).call(Y,function(ri){return Jt(ri)}).join(he)}if("spaceDelimited"===rt){var De=_t?"".concat(B,"="):"";return Mt()(Y).call(Y,function(ri){return Jt(ri)}).join(" ".concat(De))}if("pipeDelimited"===rt){var ke=_t?"".concat(B,"="):"";return Mt()(Y).call(Y,function(ri){return Jt(ri)}).join("|".concat(ke))}}(S):"object"===st(B)?function(S){var B=S.key,Y=S.value,rt=S.style,_t=S.explode,Xt=S.escape,Jt=function(ke){return bo(ke,{escape:Xt})},he=ye()(Y);return"simple"===rt?he.reduce(function(De,ke){var ri,ai,gi,wi=Jt(Y[ke]),Wi=_t?"=":",",qi=De?"".concat(De,","):"";return Te()(ri=Te()(ai=Te()(gi="".concat(qi)).call(gi,ke)).call(ai,Wi)).call(ri,wi)},""):"label"===rt?he.reduce(function(De,ke){var ri,ai,gi,wi=Jt(Y[ke]),Wi=_t?"=":".",qi=De?"".concat(De,"."):".";return Te()(ri=Te()(ai=Te()(gi="".concat(qi)).call(gi,ke)).call(ai,Wi)).call(ri,wi)},""):"matrix"===rt&&_t?he.reduce(function(De,ke){var ri,ai,gi=Jt(Y[ke]),wi=De?"".concat(De,";"):";";return Te()(ri=Te()(ai="".concat(wi)).call(ai,ke,"=")).call(ri,gi)},""):"matrix"===rt?he.reduce(function(De,ke){var ri,ai,gi=Jt(Y[ke]),wi=De?"".concat(De,","):";".concat(B,"=");return Te()(ri=Te()(ai="".concat(wi)).call(ai,ke,",")).call(ri,gi)},""):"form"===rt?he.reduce(function(De,ke){var ri,ai,gi,wi,Wi=Jt(Y[ke]),qi=De?Te()(ri="".concat(De)).call(ri,_t?"&":","):"",ln=_t?"=":",";return Te()(ai=Te()(gi=Te()(wi="".concat(qi)).call(wi,ke)).call(gi,ln)).call(ai,Wi)},""):void 0}(S):function(S){var Jt,B=S.key,Y=S.value,rt=S.style,_t=S.escape,Xt=function(De){return bo(De,{escape:_t})};return"simple"===rt?Xt(Y):"label"===rt?".".concat(Xt(Y)):"matrix"===rt?Te()(Jt=";".concat(B,"=")).call(Jt,Xt(Y)):"form"===rt||"deepObject"===rt?Xt(Y):void 0}(S)}const Ju=function(B,Y){Y.body=B};var Oc={serializeRes:Ou,mergeInQueryOrForm:_a};function Mu(S){return xc.apply(this,arguments)}function xc(){return xc=oe(Re().mark(function S(B){var Y,_t,Xt,Jt,he=arguments;return Re().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(Y=he.length>1&&void 0!==he[1]?he[1]:{},"object"===st(B)&&(B=(Y=B).url),Y.headers=Y.headers||{},Oc.mergeInQueryOrForm(Y),Y.headers&&ye()(Y.headers).forEach(function(ri){var ai=Y.headers[ri];"string"==typeof ai&&(Y.headers[ri]=ai.replace(/\n+/g," "))}),!Y.requestInterceptor){ke.next=12;break}return ke.next=8,Y.requestInterceptor(Y);case 8:if(ke.t0=ke.sent,ke.t0){ke.next=11;break}ke.t0=Y;case 11:Y=ke.t0;case 12:return/multipart\/form-data/i.test(Y.headers["content-type"]||Y.headers["Content-Type"])&&Y.body instanceof Xs&&(delete Y.headers["content-type"],delete Y.headers["Content-Type"]),ke.prev=14,ke.next=17,(Y.userFetch||fetch)(Y.url,Y);case 17:return _t=ke.sent,ke.next=20,Oc.serializeRes(_t,B,Y);case 20:if(_t=ke.sent,!Y.responseInterceptor){ke.next=28;break}return ke.next=24,Y.responseInterceptor(_t);case 24:if(ke.t1=ke.sent,ke.t1){ke.next=27;break}ke.t1=_t;case 27:_t=ke.t1;case 28:ke.next=39;break;case 30:if(ke.prev=30,ke.t2=ke.catch(14),_t){ke.next=34;break}throw ke.t2;case 34:throw(Xt=new Error(_t.statusText||"response status is ".concat(_t.status))).status=_t.status,Xt.statusCode=_t.status,Xt.responseError=ke.t2,Xt;case 39:if(_t.ok){ke.next=45;break}throw(Jt=new Error(_t.statusText||"response status is ".concat(_t.status))).status=_t.status,Jt.statusCode=_t.status,Jt.response=_t,Jt;case 45:return ke.abrupt("return",_t);case 46:case"end":return ke.stop()}},S,null,[[14,30]])})),xc.apply(this,arguments)}var $u=function(){var B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(json|xml|yaml|text)\b/.test(B)};function Au(S,B){return B&&(0===B.indexOf("application/json")||B.indexOf("+json")>0)?JSON.parse(S):so.load(S)}function Ou(S,B){var Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},rt=Y.loadSpec,_t=void 0!==rt&&rt,Xt={ok:S.ok,url:S.url||B,status:S.status,statusText:S.statusText,headers:xu(S.headers)},Jt=Xt.headers["content-type"],he=_t||$u(Jt),De=he?S.text:S.blob||S.buffer;return De.call(S).then(function(ke){if(Xt.text=ke,Xt.data=ke,he)try{var ri=Au(ke,Jt);Xt.body=ri,Xt.obj=ri}catch(ai){Xt.parseError=ai}return Xt})}function $l(S){return Si()(S).call(S,", ")?S.split(", "):S}function xu(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"!=typeof we()(S)?{}:Wt()(we()(S).call(S)).reduce(function(B,Y){var rt=At(Y,2);return B[rt[0]]=$l(rt[1]),B},{})}function qo(S,B){return!B&&"undefined"!=typeof navigator&&(B=navigator),B&&"ReactNative"===B.product?!(!S||"object"!==st(S)||"string"!=typeof S.uri):!!(void 0!==As&&S instanceof As||void 0!==Ca&&S instanceof Ca||ArrayBuffer.isView(S))||null!==S&&"object"===st(S)&&"function"==typeof S.pipe}function kc(S,B){return Array.isArray(S)&&S.some(function(Y){return qo(Y,B)})}var Sa={form:",",spaceDelimited:"%20",pipeDelimited:"|"},$c={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Zl(S,B){var Y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],rt=B.collectionFormat,_t=B.allowEmptyValue,Xt=B.serializationOption,Jt=B.encoding,he="object"!==st(B)||Array.isArray(B)?B:B.value,De=Y?function(Wi){return Wi.toString()}:function(Wi){return encodeURIComponent(Wi)},ke=De(S);if(void 0===he&&_t)return[[ke,""]];if(qo(he)||kc(he))return[[ke,he]];if(Xt)return fo(S,he,Y,Xt);if(Jt){if([st(Jt.style),st(Jt.explode),st(Jt.allowReserved)].some(function(Wi){return"undefined"!==Wi})){var ri=Jt.style,ai=Jt.explode,gi=Jt.allowReserved;return fo(S,he,Y,{style:ri,explode:ai,allowReserved:gi})}if(Jt.contentType){if("application/json"===Jt.contentType){var wi="string"==typeof he?he:Qt()(he);return[[ke,De(wi)]]}return[[ke,De(he.toString())]]}return"object"!==st(he)?[[ke,De(he)]]:Array.isArray(he)&&he.every(function(Wi){return"object"!==st(Wi)})?[[ke,Mt()(he).call(he,De).join(",")]]:[[ke,De(Qt()(he))]]}return"object"!==st(he)?[[ke,De(he)]]:Array.isArray(he)?"multi"===rt?[[ke,Mt()(he).call(he,De)]]:[[ke,Mt()(he).call(he,De).join($c[rt||"csv"])]]:[[ke,""]]}function fo(S,B,Y,rt){var _t,ri,ai,Xt=rt.style||"form",Jt=void 0===rt.explode?"form"===Xt:rt.explode,he=!Y&&(rt&&rt.allowReserved?"unsafe":"reserved"),De=function(wi){return bo(wi,{escape:he})},ke=Y?function(gi){return gi}:function(gi){return bo(gi,{escape:he})};return"object"!==st(B)?[[ke(S),De(B)]]:Array.isArray(B)?Jt?[[ke(S),Mt()(B).call(B,De)]]:[[ke(S),Mt()(B).call(B,De).join(Sa[Xt])]]:"deepObject"===Xt?Mt()(ri=ye()(B)).call(ri,function(gi){var wi;return[ke(Te()(wi="".concat(S,"[")).call(wi,gi,"]")),De(B[gi])]}):Jt?Mt()(ai=ye()(B)).call(ai,function(gi){return[ke(gi),De(B[gi])]}):[[ke(S),Mt()(_t=ye()(B)).call(_t,function(gi){var wi;return[Te()(wi="".concat(ke(gi),",")).call(wi,De(B[gi]))]}).join(",")]]}function wa(S){return te()(S).reduce(function(B,Y){var he,rt=At(Y,2),Jt=ut(Zl(rt[0],rt[1],!0));try{for(Jt.s();!(he=Jt.n()).done;){var De=At(he.value,2),ke=De[0],ri=De[1];if(Array.isArray(ri)){var gi,ai=ut(ri);try{for(ai.s();!(gi=ai.n()).done;){var wi=gi.value;if(ArrayBuffer.isView(wi)){var Wi=new Ca([wi]);B.append(ke,Wi)}else B.append(ke,wi)}}catch(ln){ai.e(ln)}finally{ai.f()}}else if(ArrayBuffer.isView(ri)){var qi=new Ca([ri]);B.append(ke,qi)}else B.append(ke,ri)}}catch(ln){Jt.e(ln)}finally{Jt.f()}return B},new Xs)}function xa(S){var B=ye()(S).reduce(function(Y,rt){var Xt,_t=ut(Zl(rt,S[rt]));try{for(_t.s();!(Xt=_t.n()).done;){var Jt=At(Xt.value,2);Y[Jt[0]]=Jt[1]}}catch(ke){_t.e(ke)}finally{_t.f()}return Y},{});return Dt().stringify(B,{encode:!1,indices:!1})||""}function _a(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},B=S.url,Y=void 0===B?"":B,rt=S.query,_t=S.form,Xt=function(){for(var tn=arguments.length,Pr=new Array(tn),Fr=0;Fr<tn;Fr++)Pr[Fr]=arguments[Fr];var uo=ue()(Pr).call(Pr,function(Jr){return Jr}).join("&");return uo?"?".concat(uo):""};if(_t){var Jt=ye()(_t).some(function(In){var tn=_t[In].value;return qo(tn)||kc(tn)}),he=S.headers["content-type"]||S.headers["Content-Type"];if(Jt||/multipart\/form-data/i.test(he)){var De=wa(S.form);Ju(De,S)}else S.body=xa(_t);delete S.form}if(rt){var ke=Y.split("?"),ri=At(ke,2),ai=ri[0],gi=ri[1],wi="";if(gi){var Wi=Dt().parse(gi),qi=ye()(rt);qi.forEach(function(In){return delete Wi[In]}),wi=Dt().stringify(Wi,{encode:!0})}var ln=Xt(wi,xa(rt));S.url=ai+ln,delete S.query}return S}function Qc(S,B){if(!(S instanceof B))throw new TypeError("Cannot call a class as a function")}function ka(S,B){for(var Y=0;Y<B.length;Y++){var rt=B[Y];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),P(S,rt.key,rt)}}function Lr(S,B,Y){return B&&ka(S.prototype,B),Y&&ka(S,Y),S}var S,Ha=f(20265),dc=f.n(Ha),Pl=f(2204),Yo=f.n(Pl),qc=f(35644),pc=f.n(qc),gu=(S=function(B,Y){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rt,_t){rt.__proto__=_t}||function(rt,_t){for(var Xt in _t)_t.hasOwnProperty(Xt)&&(rt[Xt]=_t[Xt])})(B,Y)},function(B,Y){function rt(){this.constructor=B}S(B,Y),B.prototype=null===Y?Object.create(Y):(rt.prototype=Y.prototype,new rt)}),ul=Object.prototype.hasOwnProperty;function Cl(S,B){return ul.call(S,B)}function tu(S){if(Array.isArray(S)){for(var Y=new Array(S.length),B=0;B<Y.length;B++)Y[B]=""+B;return Y}if(Object.keys)return Object.keys(S);for(var rt in Y=[],S)Cl(S,rt)&&Y.push(rt);return Y}function xs(S){switch(typeof S){case"object":return JSON.parse(JSON.stringify(S));case"undefined":return null;default:return S}}function hl(S){for(var rt,B=0,Y=S.length;B<Y;){if(!((rt=S.charCodeAt(B))>=48&&rt<=57))return!1;B++}return!0}function Er(S){return-1===S.indexOf("/")&&-1===S.indexOf("~")?S:S.replace(/~/g,"~0").replace(/\//g,"~1")}function eu(S){return S.replace(/~1/g,"/").replace(/~0/g,"~")}function Ra(S){if(void 0===S)return!0;if(S)if(Array.isArray(S)){for(var B=0,Y=S.length;B<Y;B++)if(Ra(S[B]))return!0}else if("object"==typeof S){var rt=tu(S),_t=rt.length;for(B=0;B<_t;B++)if(Ra(S[rt[B]]))return!0}return!1}function ql(S,B){var Y=[S];for(var rt in B){var _t="object"==typeof B[rt]?JSON.stringify(B[rt],null,2):B[rt];void 0!==_t&&Y.push(rt+": "+_t)}return Y.join("\n")}var mu=function(S){function B(Y,rt,_t,Xt,Jt){var he=this.constructor,De=S.call(this,ql(Y,{name:rt,index:_t,operation:Xt,tree:Jt}))||this;return De.name=rt,De.index=_t,De.operation=Xt,De.tree=Jt,Object.setPrototypeOf(De,he.prototype),De.message=ql(Y,{name:rt,index:_t,operation:Xt,tree:Jt}),De}return gu(B,S),B}(Error),Eo=mu,Zu=xs,gc={add:function(S,B,Y){return S[B]=this.value,{newDocument:Y}},remove:function(S,B,Y){var rt=S[B];return delete S[B],{newDocument:Y,removed:rt}},replace:function(S,B,Y){var rt=S[B];return S[B]=this.value,{newDocument:Y,removed:rt}},move:function(S,B,Y){var rt=mc(Y,this.path);rt&&(rt=xs(rt));var _t=Ua(Y,{op:"remove",path:this.from}).removed;return Ua(Y,{op:"add",path:this.path,value:_t}),{newDocument:Y,removed:rt}},copy:function(S,B,Y){var rt=mc(Y,this.from);return Ua(Y,{op:"add",path:this.path,value:xs(rt)}),{newDocument:Y}},test:function(S,B,Y){return{newDocument:Y,test:wl(S[B],this.value)}},_get:function(S,B,Y){return this.value=S[B],{newDocument:Y}}},_u={add:function(S,B,Y){return hl(B)?S.splice(B,0,this.value):S[B]=this.value,{newDocument:Y,index:B}},remove:function(S,B,Y){return{newDocument:Y,removed:S.splice(B,1)[0]}},replace:function(S,B,Y){var rt=S[B];return S[B]=this.value,{newDocument:Y,removed:rt}},move:gc.move,copy:gc.copy,test:gc.test,_get:gc._get};function mc(S,B){if(""==B)return S;var Y={op:"_get",path:B};return Ua(S,Y),Y.value}function Ua(S,B,Y,rt,_t,Xt){if(void 0===Y&&(Y=!1),void 0===rt&&(rt=!0),void 0===_t&&(_t=!0),void 0===Xt&&(Xt=0),Y&&("function"==typeof Y?Y(B,0,S,B.path):Sl(B,0)),""===B.path){var Jt={newDocument:S};if("add"===B.op)return Jt.newDocument=B.value,Jt;if("replace"===B.op)return Jt.newDocument=B.value,Jt.removed=S,Jt;if("move"===B.op||"copy"===B.op)return Jt.newDocument=mc(S,B.from),"move"===B.op&&(Jt.removed=S),Jt;if("test"===B.op){if(Jt.test=wl(S,B.value),!1===Jt.test)throw new Eo("Test operation failed","TEST_OPERATION_FAILED",Xt,B,S);return Jt.newDocument=S,Jt}if("remove"===B.op)return Jt.removed=S,Jt.newDocument=null,Jt;if("_get"===B.op)return B.value=S,Jt;if(Y)throw new Eo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",Xt,B,S);return Jt}rt||(S=xs(S));var De=(B.path||"").split("/"),ke=S,ri=1,ai=De.length,gi=void 0,wi=void 0,Wi=void 0;for(Wi="function"==typeof Y?Y:Sl;;){if((wi=De[ri])&&-1!=wi.indexOf("~")&&(wi=eu(wi)),_t&&"__proto__"==wi)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(Y&&void 0===gi&&(void 0===ke[wi]?gi=De.slice(0,ri).join("/"):ri==ai-1&&(gi=B.path),void 0!==gi&&Wi(B,0,S,gi)),ri++,Array.isArray(ke)){if("-"===wi)wi=ke.length;else{if(Y&&!hl(wi))throw new Eo("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",Xt,B,S);hl(wi)&&(wi=~~wi)}if(ri>=ai){if(Y&&"add"===B.op&&wi>ke.length)throw new Eo("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",Xt,B,S);if(!1===(Jt=_u[B.op].call(B,ke,wi,S)).test)throw new Eo("Test operation failed","TEST_OPERATION_FAILED",Xt,B,S);return Jt}}else if(ri>=ai){if(!1===(Jt=gc[B.op].call(B,ke,wi,S)).test)throw new Eo("Test operation failed","TEST_OPERATION_FAILED",Xt,B,S);return Jt}if(ke=ke[wi],Y&&ri<ai&&(!ke||"object"!=typeof ke))throw new Eo("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",Xt,B,S)}}function aa(S,B,Y,rt,_t){if(void 0===rt&&(rt=!0),void 0===_t&&(_t=!0),Y&&!Array.isArray(B))throw new Eo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");rt||(S=xs(S));for(var Xt=new Array(B.length),Jt=0,he=B.length;Jt<he;Jt++)Xt[Jt]=Ua(S,B[Jt],Y,!0,_t,Jt),S=Xt[Jt].newDocument;return Xt.newDocument=S,Xt}function iu(S,B,Y){var rt=Ua(S,B);if(!1===rt.test)throw new Eo("Test operation failed","TEST_OPERATION_FAILED",Y,B,S);return rt.newDocument}function Sl(S,B,Y,rt){if("object"!=typeof S||null===S||Array.isArray(S))throw new Eo("Operation is not an object","OPERATION_NOT_AN_OBJECT",B,S,Y);if(!gc[S.op])throw new Eo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",B,S,Y);if("string"!=typeof S.path)throw new Eo("Operation `path` property is not a string","OPERATION_PATH_INVALID",B,S,Y);if(0!==S.path.indexOf("/")&&S.path.length>0)throw new Eo('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",B,S,Y);if(("move"===S.op||"copy"===S.op)&&"string"!=typeof S.from)throw new Eo("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",B,S,Y);if(("add"===S.op||"replace"===S.op||"test"===S.op)&&void 0===S.value)throw new Eo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",B,S,Y);if(("add"===S.op||"replace"===S.op||"test"===S.op)&&Ra(S.value))throw new Eo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",B,S,Y);if(Y)if("add"==S.op){var _t=S.path.split("/").length,Xt=rt.split("/").length;if(_t!==Xt+1&&_t!==Xt)throw new Eo("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",B,S,Y)}else if("replace"===S.op||"remove"===S.op||"_get"===S.op){if(S.path!==rt)throw new Eo("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",B,S,Y)}else if("move"===S.op||"copy"===S.op){var he=Uo([{op:"_get",path:S.from,value:void 0}],Y);if(he&&"OPERATION_PATH_UNRESOLVABLE"===he.name)throw new Eo("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",B,S,Y)}}function Uo(S,B,Y){try{if(!Array.isArray(S))throw new Eo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(B)aa(xs(B),xs(S),Y||!0);else{Y=Y||Sl;for(var rt=0;rt<S.length;rt++)Y(S[rt],rt,B,void 0)}}catch(_t){if(_t instanceof Eo)return _t;throw _t}}function wl(S,B){if(S===B)return!0;if(S&&B&&"object"==typeof S&&"object"==typeof B){var _t,Xt,Jt,Y=Array.isArray(S),rt=Array.isArray(B);if(Y&&rt){if((Xt=S.length)!=B.length)return!1;for(_t=Xt;0!=_t--;)if(!wl(S[_t],B[_t]))return!1;return!0}if(Y!=rt)return!1;var he=Object.keys(S);if((Xt=he.length)!==Object.keys(B).length)return!1;for(_t=Xt;0!=_t--;)if(!B.hasOwnProperty(he[_t]))return!1;for(_t=Xt;0!=_t--;)if(!wl(S[Jt=he[_t]],B[Jt]))return!1;return!0}return S!=S&&B!=B}var Fl=new WeakMap,tc=function(B){this.observers=new Map,this.obj=B},dl=function(B,Y){this.callback=B,this.observer=Y};function Bl(S,B){B.unobserve()}function ec(S,B){var rt,_t=function(S){return Fl.get(S)}(S);if(_t){var Xt=function(S,B){return S.observers.get(B)}(_t,B);rt=Xt&&Xt.observer}else _t=new tc(S),Fl.set(S,_t);if(rt)return rt;if(rt={},_t.value=xs(S),B){rt.callback=B,rt.next=null;var Jt=function(){tl(rt)},he=function(){clearTimeout(rt.next),rt.next=setTimeout(Jt)};"undefined"!=typeof window&&(window.addEventListener("mouseup",he),window.addEventListener("keyup",he),window.addEventListener("mousedown",he),window.addEventListener("keydown",he),window.addEventListener("change",he))}return rt.patches=[],rt.object=S,rt.unobserve=function(){tl(rt),clearTimeout(rt.next),function(S,B){S.observers.delete(B.callback)}(_t,rt),"undefined"!=typeof window&&(window.removeEventListener("mouseup",he),window.removeEventListener("keyup",he),window.removeEventListener("mousedown",he),window.removeEventListener("keydown",he),window.removeEventListener("change",he))},_t.observers.set(B,new dl(B,rt)),rt}function tl(S,B){void 0===B&&(B=!1);var Y=Fl.get(S.object);Va(Y.value,S.object,S.patches,"",B),S.patches.length&&aa(Y.value,S.patches);var rt=S.patches;return rt.length>0&&(S.patches=[],S.callback&&S.callback(rt)),rt}function Va(S,B,Y,rt,_t){if(B!==S){"function"==typeof B.toJSON&&(B=B.toJSON());for(var Xt=tu(B),Jt=tu(S),De=!1,ke=Jt.length-1;ke>=0;ke--){var ai=S[ri=Jt[ke]];if(!Cl(B,ri)||void 0===B[ri]&&void 0!==ai&&!1===Array.isArray(B))Array.isArray(S)===Array.isArray(B)?(_t&&Y.push({op:"test",path:rt+"/"+Er(ri),value:xs(ai)}),Y.push({op:"remove",path:rt+"/"+Er(ri)}),De=!0):(_t&&Y.push({op:"test",path:rt,value:S}),Y.push({op:"replace",path:rt,value:B}));else{var gi=B[ri];"object"==typeof ai&&null!=ai&&"object"==typeof gi&&null!=gi&&Array.isArray(ai)===Array.isArray(gi)?Va(ai,gi,Y,rt+"/"+Er(ri),_t):ai!==gi&&(_t&&Y.push({op:"test",path:rt+"/"+Er(ri),value:xs(ai)}),Y.push({op:"replace",path:rt+"/"+Er(ri),value:xs(gi)}))}}if(De||Xt.length!=Jt.length)for(ke=0;ke<Xt.length;ke++){var ri;!Cl(S,ri=Xt[ke])&&void 0!==B[ri]&&Y.push({op:"add",path:rt+"/"+Er(ri),value:xs(B[ri])})}}}function Hl(S,B,Y){void 0===Y&&(Y=!1);var rt=[];return Va(S,B,rt,"",Y),rt}Object.assign({},y,g,{JsonPatchError:mu,deepClone:xs,escapePathComponent:Er,unescapePathComponent:eu});var vc=f(25320),Lc=f.n(vc),Ga=f(77282),Nc=f.n(Ga);const lo={add:function(S,B){return{op:"add",path:S,value:B}},replace:nu,remove:function(S){return{op:"remove",path:S}},merge:function(S,B){return{type:"mutation",op:"merge",path:S,value:B}},mergeDeep:function(S,B){return{type:"mutation",op:"mergeDeep",path:S,value:B}},context:function(S,B){return{type:"context",path:S,value:B}},getIn:function(S,B){return B.reduce(function(Y,rt){return void 0!==rt&&Y?Y[rt]:Y},S)},applyPatch:function(S,B,Y){if(Y=Y||{},"merge"===(B=q(q({},B),{},{path:B.path&&ic(B.path)})).op){var rt=Ve(S,B.path);Ft()(rt,B.value),aa(S,[nu(B.path,rt)])}else if("mergeDeep"===B.op){var _t=Ve(S,B.path);for(var Xt in B.value){var Jt=B.value[Xt],he=Array.isArray(Jt);if(he){var De=_t[Xt]||[];_t[Xt]=Te()(De).call(De,Jt)}else if(ca(Jt)&&!he){var ke=q({},_t[Xt]);for(var ri in Jt){if(Object.prototype.hasOwnProperty.call(ke,ri)){ke=Lc()(Nc()(ke),Jt);break}Ft()(ke,G({},ri,Jt[ri]))}_t[Xt]=ke}else _t[Xt]=Jt}}else if("add"===B.op&&""===B.path&&ca(B.value)){aa(S,ye()(B.value).reduce(function(ln,In){return ln.push({op:"add",path:"/".concat(ic(In)),value:B.value[In]}),ln},[]))}else if("replace"===B.op&&""===B.path){var wi=B.value;Y.allowMetaPatches&&B.meta&&Ot(B)&&(Array.isArray(B.value)||ca(B.value))&&(wi=q(q({},wi),B.meta)),S=wi}else if(aa(S,[B]),Y.allowMetaPatches&&B.meta&&Ot(B)&&(Array.isArray(B.value)||ca(B.value))){var qi=q(q({},Ve(S,B.path)),B.meta);aa(S,[nu(B.path,qi)])}return S},parentPathMatch:function(S,B){if(!Array.isArray(B))return!1;for(var Y=0,rt=B.length;Y<rt;Y+=1)if(B[Y]!==S[Y])return!1;return!0},flatten:Wa,fullyNormalizeArray:function(S){return Dl(Wa(fl(S)))},normalizeArray:fl,isPromise:function(S){return ca(S)&&nc(S.then)},forEachNew:function(S,B){try{return Rl(S,el,B)}catch(Y){return Y}},forEachNewPrimitive:function(S,B){try{return Rl(S,pl,B)}catch(Y){return Y}},isJsonPatch:ps,isContextPatch:function(S){return Oe(S)&&"context"===S.type},isPatch:Oe,isMutation:Tt,isAdditiveMutation:Ot,isGenerator:function(S){return"[object GeneratorFunction]"===Object.prototype.toString.call(S)},isFunction:nc,isObject:ca,isError:function(S){return S instanceof Error}};function ic(S){return Array.isArray(S)?S.length<1?"":"/".concat(Mt()(S).call(S,function(B){return(B+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")):S}function nu(S,B,Y){return{op:"replace",path:S,value:B,meta:Y}}function Rl(S,B,Y){var rt;return Dl(Wa(Mt()(rt=ue()(S).call(S,Ot)).call(rt,function(he){return B(he.value,Y,he.path)})||[]))}function pl(S,B,Y){return Y=Y||[],Array.isArray(S)?Mt()(S).call(S,function(_t,Xt){return pl(_t,B,Te()(Y).call(Y,Xt))}):ca(S)?Mt()(rt=ye()(S)).call(rt,function(_t){return pl(S[_t],B,Te()(Y).call(Y,_t))}):B(S,Y[Y.length-1],Y);var rt}function el(S,B,Y){var rt=[];if((Y=Y||[]).length>0){var _t=B(S,Y[Y.length-1],Y);_t&&(rt=Te()(rt).call(rt,_t))}if(Array.isArray(S)){var Xt=Mt()(S).call(S,function(De,ke){return el(De,B,Te()(Y).call(Y,ke))});Xt&&(rt=Te()(rt).call(rt,Xt))}else if(ca(S)){var Jt,he=Mt()(Jt=ye()(S)).call(Jt,function(De){return el(S[De],B,Te()(Y).call(Y,De))});he&&(rt=Te()(rt).call(rt,he))}return Wa(rt)}function fl(S){return Array.isArray(S)?S:[S]}function Wa(S){var B;return Te()(B=[]).apply(B,ga(Mt()(S).call(S,function(Y){return Array.isArray(Y)?Wa(Y):Y})))}function Dl(S){return ue()(S).call(S,function(B){return void 0!==B})}function ca(S){return S&&"object"===st(S)}function nc(S){return S&&"function"==typeof S}function ps(S){if(Oe(S)){var B=S.op;return"add"===B||"remove"===B||"replace"===B}return!1}function Tt(S){return ps(S)||Oe(S)&&"mutation"===S.type}function Ot(S){return Tt(S)&&("add"===S.op||"replace"===S.op||"merge"===S.op||"mergeDeep"===S.op)}function Oe(S){return S&&"object"===st(S)}function Ve(S,B){try{return mc(S,B)}catch(Y){return console.error(Y),{}}}var fi=f(3933),Je=f.n(fi),oi=f(26360),Li=f.n(oi);function Ni(S,B){function Y(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var rt=arguments.length,_t=new Array(rt),Xt=0;Xt<rt;Xt++)_t[Xt]=arguments[Xt];this.message=_t[0],B&&B.apply(this,_t)}return(Y.prototype=new Error).name=S,Y.prototype.constructor=Y,Y}var Gi=f(57051),Wn=f.n(Gi),kn=["properties"],er=["properties"],ts=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],So=["schema/example","items/example"];function Dr(S){var B=S[S.length-1],Y=S[S.length-2],rt=S.join("/");return kn.indexOf(B)>-1&&-1===er.indexOf(Y)||ts.indexOf(rt)>-1||So.some(function(_t){return rt.indexOf(_t)>-1})}function Lo(S,B){var Y,_t=At(S.split("#"),2),Jt=_t[1],he=Bt.resolve(_t[0]||"",B||"");return Jt?Te()(Y="".concat(he,"#")).call(Y,Jt):he}var co="application/json, application/yaml",Es=new RegExp("^([a-z]+://|//)","i"),es=Ni("JSONRefError",function(B,Y,rt){this.originalError=rt,Ft()(this,Y||{})}),ks={},za=new(Je()),bu=[function(S){return"paths"===S[0]&&"responses"===S[3]&&"examples"===S[5]},function(S){return"paths"===S[0]&&"responses"===S[3]&&"content"===S[5]&&"example"===S[7]},function(S){return"paths"===S[0]&&"responses"===S[3]&&"content"===S[5]&&"examples"===S[7]&&"value"===S[9]},function(S){return"paths"===S[0]&&"requestBody"===S[3]&&"content"===S[4]&&"example"===S[6]},function(S){return"paths"===S[0]&&"requestBody"===S[3]&&"content"===S[4]&&"examples"===S[6]&&"value"===S[8]},function(S){return"paths"===S[0]&&"parameters"===S[2]&&"example"===S[4]},function(S){return"paths"===S[0]&&"parameters"===S[3]&&"example"===S[5]},function(S){return"paths"===S[0]&&"parameters"===S[2]&&"examples"===S[4]&&"value"===S[6]},function(S){return"paths"===S[0]&&"parameters"===S[3]&&"examples"===S[5]&&"value"===S[7]},function(S){return"paths"===S[0]&&"parameters"===S[2]&&"content"===S[4]&&"example"===S[6]},function(S){return"paths"===S[0]&&"parameters"===S[2]&&"content"===S[4]&&"examples"===S[6]&&"value"===S[8]},function(S){return"paths"===S[0]&&"parameters"===S[3]&&"content"===S[4]&&"example"===S[7]},function(S){return"paths"===S[0]&&"parameters"===S[3]&&"content"===S[5]&&"examples"===S[7]&&"value"===S[9]}],Pu={key:"$ref",plugin:function(B,Y,rt,_t){var Xt=_t.getInstance(),Jt=ma()(rt).call(rt,0,-1);if(!Dr(Jt)&&!function(B){return bu.some(function(Y){return Y(B)})}(Jt)){var De=_t.getContext(rt).baseDoc;if("string"!=typeof B)return new es("$ref: must be a string (JSON-Ref)",{$ref:B,baseDoc:De,fullPath:rt});var gi,wi,Wi,ke=Rh(B),ri=ke[0],ai=ke[1]||"";try{gi=De||ri?yc(ri,De):null}catch(tn){return va(tn,{pointer:ai,$ref:B,basePath:gi,fullPath:rt})}if(function(S,B,Y,rt){var _t,Xt,Jt=za.get(rt);Jt||za.set(rt,Jt={});var he=function(S){return 0===S.length?"":"/".concat(Mt()(S).call(S,Hc).join("/"))}(Y),De=Te()(_t="".concat(B||"<specmap-base>","#")).call(_t,S),ke=he.replace(/allOf\/\d+\/?/g,"");if(B===rt.contextTree.get([]).baseDoc&&is(ke,S))return!0;var ai="",gi=Y.some(function(wi){var Wi;return ai=Te()(Wi="".concat(ai,"/")).call(Wi,Hc(wi)),Jt[ai]&&Jt[ai].some(function(qi){return is(qi,De)||is(De,qi)})});if(gi)return!0;Jt[ke]=Te()(Xt=Jt[ke]||[]).call(Xt,De)}(ai,gi,Jt,_t)&&!Xt.useCircularStructures){var qi=Lo(B,gi);return B===qi?null:lo.replace(rt,qi)}if(null==gi?(Wi=Ec(ai),void 0===(wi=_t.get(Wi))&&(wi=new es("Could not resolve reference: ".concat(B),{pointer:ai,$ref:B,baseDoc:De,fullPath:rt}))):wi=null!=(wi=Fu(gi,ai)).__value?wi.__value:wi.catch(function(tn){throw va(tn,{pointer:ai,$ref:B,baseDoc:De,fullPath:rt})}),wi instanceof Error)return[lo.remove(rt),wi];var ln=Lo(B,gi),In=lo.replace(Jt,wi,{$$ref:ln});if(gi&&gi!==De)return[In,lo.context(Jt,{baseDoc:gi})];try{if(!function(S,B){var Y=[S];return B.path.reduce(function(_t,Xt){return Y.push(_t[Xt]),_t[Xt]},S),function rt(_t){return lo.isObject(_t)&&(Y.indexOf(_t)>=0||ye()(_t).some(function(Xt){return rt(_t[Xt])}))}(B.value)}(_t.state,In)||Xt.useCircularStructures)return In}catch(tn){return null}}}},yu=Ft()(Pu,{docCache:ks,absoluteify:yc,clearCache:function(S){void 0!==S?delete ks[S]:ye()(ks).forEach(function(B){delete ks[B]})},JSONRefError:es,wrapError:va,getDoc:eh,split:Rh,extractFromDoc:Fu,fetchJSON:function(S){return fetch(S,{headers:{Accept:co},loadSpec:!0}).then(function(B){return B.text()}).then(function(B){return so.load(B)})},extract:ih,jsonPointerToArray:Ec,unescapeJsonPointerToken:su});const th=yu;function yc(S,B){if(!Es.test(S)){var Y;if(!B)throw new es(Te()(Y="Tried to resolve a relative URL, without having a basePath. path: '".concat(S,"' basePath: '")).call(Y,B,"'"));return Bt.resolve(B,S)}return S}function va(S,B){var Y,rt;return Y=S&&S.response&&S.response.body?Te()(rt="".concat(S.response.body.code," ")).call(rt,S.response.body.message):S.message,new es("Could not resolve reference: ".concat(Y),B,S)}function Rh(S){return(S+"").split("#")}function Fu(S,B){var Y=ks[S];if(Y&&!lo.isPromise(Y))try{var rt=ih(B,Y);return Ft()(Yo().resolve(rt),{__value:rt})}catch(_t){return Yo().reject(_t)}return eh(S).then(function(_t){return ih(B,_t)})}function eh(S){var B=ks[S];return B?lo.isPromise(B)?B:Yo().resolve(B):(ks[S]=yu.fetchJSON(S).then(function(Y){return ks[S]=Y,Y}),ks[S])}function ih(S,B){var Y=Ec(S);if(Y.length<1)return B;var rt=lo.getIn(B,Y);if(void 0===rt)throw new es("Could not resolve pointer: ".concat(S," does not exist in document"),{pointer:S});return rt}function Ec(S){var B;if("string"!=typeof S)throw new TypeError("Expected a string, got a ".concat(st(S)));return"/"===S[0]&&(S=S.substr(1)),""===S?[]:Mt()(B=S.split("/")).call(B,su)}function su(S){return"string"!=typeof S?S:new(Li())("=".concat(S.replace(/~1/g,"/").replace(/~0/g,"~"))).get("")}function Hc(S){var B,Y=new(Li())([["",S.replace(/~/g,"~0").replace(/\//g,"~1")]]);return ma()(B=Y.toString()).call(B,1)}function is(S,B){if(function(B){return!B||"/"===B||"#"===B}(B))return!0;var Y=S.charAt(B.length),rt=ma()(B).call(B,-1);return 0===S.indexOf(B)&&(!Y||"/"===Y||"#"===Y)&&"#"!==rt}var Tc=f(18421),nh=f.n(Tc);const mh={key:"allOf",plugin:function(B,Y,rt,_t,Xt){if(!Xt.meta||!Xt.meta.$$ref){var Jt=ma()(rt).call(rt,0,-1);if(!Dr(Jt)){if(!Array.isArray(B)){var he=new TypeError("allOf must be an array");return he.fullPath=rt,he}var De=!1,ke=Xt.value;if(Jt.forEach(function(gi){!ke||(ke=ke[gi])}),ke=q({},ke),!nh()(ke)){delete ke.allOf;var ai,ri=[];return ri.push(_t.replace(Jt,{})),B.forEach(function(gi,wi){if(!_t.isObject(gi)){if(De)return null;De=!0;var Wi=new TypeError("Elements in allOf must be objects");return Wi.fullPath=rt,ri.push(Wi)}ri.push(_t.mergeDeep(Jt,gi));var ln=function(S,B){var Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},rt=Y.specmap,_t=Y.getBaseUrlForNodePath,Xt=void 0===_t?function(ke){var ri;return rt.getContext(Te()(ri=[]).call(ri,ga(B),ga(ke))).baseDoc}:_t,Jt=Y.targetKeys,he=void 0===Jt?["$ref","$$ref"]:Jt,De=[];return Wn()(S).forEach(function(){if(Si()(he).call(he,this.key)&&"string"==typeof this.node){var ri=this.path,ai=Te()(B).call(B,this.path),gi=Lo(this.node,Xt(ri));De.push(rt.replace(ai,gi))}}),De}(gi,ma()(rt).call(rt,0,-1),{getBaseUrlForNodePath:function(tn){var Pr;return _t.getContext(Te()(Pr=[]).call(Pr,ga(rt),[wi],ga(tn))).baseDoc},specmap:_t});ri.push.apply(ri,ga(ln))}),ri.push(_t.mergeDeep(Jt,ke)),ke.$$ref||ri.push(_t.remove(Te()(ai=[]).call(ai,Jt,"$$ref"))),ri}}}}},Dh={key:"parameters",plugin:function(B,Y,rt,_t){if(Array.isArray(B)&&B.length){var Xt=Ft()([],B),Jt=ma()(rt).call(rt,0,-1),he=q({},lo.getIn(_t.spec,Jt));return B.forEach(function(De,ke){try{Xt[ke].default=_t.parameterMacro(he,De)}catch(ai){var ri=new Error(ai);return ri.fullPath=rt,ri}}),lo.replace(rt,Xt)}return lo.replace(rt,B)}},Ih={key:"properties",plugin:function(B,Y,rt,_t){var Xt=q({},B);for(var Jt in B)try{Xt[Jt].default=_t.modelPropertyMacro(Xt[Jt])}catch(ke){var he=new Error(ke);return he.fullPath=rt,he}return lo.replace(rt,Xt)}};var Mh=function(){function S(B){Qc(this,S),this.root=rh(B||{})}return Lr(S,[{key:"set",value:function(Y,rt){var _t=this.getParent(Y,!0);if(_t){var Xt=Y[Y.length-1],Jt=_t.children;Jt[Xt]?Hu(Jt[Xt],rt,_t):Jt[Xt]=rh(rt,_t)}else Hu(this.root,rt,null)}},{key:"get",value:function(Y){if((Y=Y||[]).length<1)return this.root.value;for(var _t,Xt,rt=this.root,Jt=0;Jt<Y.length&&(_t=rt.children)[Xt=Y[Jt]];Jt+=1)rt=_t[Xt];return rt&&rt.protoValue}},{key:"getParent",value:function(Y,rt){return!Y||Y.length<1?null:Y.length<2?this.root:ma()(Y).call(Y,0,-1).reduce(function(_t,Xt){if(!_t)return _t;var Jt=_t.children;return!Jt[Xt]&&rt&&(Jt[Xt]=rh(null,_t)),Jt[Xt]},this.root)}}]),S}();function rh(S,B){return Hu({children:{}},S,B)}function Hu(S,B,Y){return S.value=B||{},S.protoValue=Y?q(q({},Y.protoValue),S.value):S.value,ye()(S.children).forEach(function(rt){var _t=S.children[rt];S.children[rt]=Hu(_t,_t.value,S)}),S}var au=function(){},Da=function(){function S(B){var rt,_t,Y=this;Qc(this,S),Ft()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new Mh,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:Ft()(Object.create(this),lo,{getInstance:function(){return Y}}),allowMetaPatches:!1},B),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=ue()(rt=Mt()(_t=this.plugins).call(_t,this.wrapPlugin.bind(this))).call(rt,lo.isFunction),this.patches.push(lo.add([],this.spec)),this.patches.push(lo.context([],this.context)),this.updatePatches(this.patches)}return Lr(S,[{key:"debug",value:function(Y){if(this.debugLevel===Y){for(var rt,_t=arguments.length,Xt=new Array(_t>1?_t-1:0),Jt=1;Jt<_t;Jt++)Xt[Jt-1]=arguments[Jt];(rt=console).log.apply(rt,Xt)}}},{key:"verbose",value:function(Y){if("verbose"===this.debugLevel){for(var rt,_t,Xt=arguments.length,Jt=new Array(Xt>1?Xt-1:0),he=1;he<Xt;he++)Jt[he-1]=arguments[he];(rt=console).log.apply(rt,Te()(_t=["[".concat(Y,"]   ")]).call(_t,Jt))}}},{key:"wrapPlugin",value:function(Y,rt){var Jt,De,ke,_t=this.pathDiscriminator,Xt=null;return Y[this.pluginProp]?(Xt=Y,Jt=Y[this.pluginProp]):lo.isFunction(Y)?Jt=Y:lo.isObject(Y)&&(De=Y,ke=function(ai,gi){return!Array.isArray(ai)||ai.every(function(wi,Wi){return wi===gi[Wi]})},Jt=Re().mark(function ri(ai,gi){var wi,Wi,qi,ln,In,tn;return Re().wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:tn=function(Jr,Co,La){var le,Fs,Ks,Br,Js,Ia,Dc,Il,hu,yh,Vh,Ml,id;return Re().wrap(function(ol){for(;;)switch(ol.prev=ol.next){case 0:if(lo.isObject(Jr)){ol.next=6;break}if(De.key!==Co[Co.length-1]){ol.next=4;break}return ol.next=4,De.plugin(Jr,De.key,Co,gi);case 4:ol.next=30;break;case 6:Fs=Co[le=Co.length-1],Ks=Co.indexOf("properties"),Br="properties"===Fs&&le===Ks,Js=gi.allowMetaPatches&&Wi[Jr.$$ref],Ia=0,Dc=ye()(Jr);case 12:if(!(Ia<Dc.length)){ol.next=30;break}if(hu=Jr[Il=Dc[Ia]],yh=Te()(Co).call(Co,Il),Vh=lo.isObject(hu),Ml=Jr.$$ref,Js){ol.next=22;break}if(!Vh){ol.next=22;break}return gi.allowMetaPatches&&Ml&&(Wi[Ml]=!0),ol.delegateYield(tn(hu,yh,La),"t0",22);case 22:if(Br||Il!==De.key){ol.next=27;break}if(id=ke(_t,Co),_t&&!id){ol.next=27;break}return ol.next=27,De.plugin(hu,Il,yh,gi,La);case 27:Ia++,ol.next=12;break;case 30:case"end":return ol.stop()}},wi)},wi=Re().mark(tn),Wi={},qi=ut(ue()(ai).call(ai,lo.isAdditiveMutation)),Fr.prev=4,qi.s();case 6:if((ln=qi.n()).done){Fr.next=11;break}return Fr.delegateYield(tn((In=ln.value).value,In.path,In),"t0",9);case 9:Fr.next=6;break;case 11:Fr.next=16;break;case 13:Fr.prev=13,Fr.t1=Fr.catch(4),qi.e(Fr.t1);case 16:return Fr.prev=16,qi.f(),Fr.finish(16);case 19:case"end":return Fr.stop()}},ri,null,[[4,13,16,19]])})),Ft()(Jt.bind(Xt),{pluginName:Y.name||rt,isGenerator:lo.isGenerator(Jt)})}},{key:"nextPlugin",value:function(){var Y,rt=this;return dc()(Y=this.wrappedPlugins).call(Y,function(_t){return rt.getMutationsForPlugin(_t).length>0})}},{key:"nextPromisedPatch",value:function(){var Y;if(this.promisedPatches.length>0)return Yo().race(Mt()(Y=this.promisedPatches).call(Y,function(rt){return rt.value}))}},{key:"getPluginHistory",value:function(Y){var rt=this.constructor.getPluginName(Y);return this.pluginHistory[rt]||[]}},{key:"getPluginRunCount",value:function(Y){return this.getPluginHistory(Y).length}},{key:"getPluginHistoryTip",value:function(Y){var rt=this.getPluginHistory(Y);return rt&&rt[rt.length-1]||{}}},{key:"getPluginMutationIndex",value:function(Y){var rt=this.getPluginHistoryTip(Y).mutationIndex;return"number"!=typeof rt?-1:rt}},{key:"updatePluginHistory",value:function(Y,rt){var _t=this.constructor.getPluginName(Y);this.pluginHistory[_t]=this.pluginHistory[_t]||[],this.pluginHistory[_t].push(rt)}},{key:"updatePatches",value:function(Y){var rt=this;lo.normalizeArray(Y).forEach(function(_t){if(_t instanceof Error)rt.errors.push(_t);else try{if(!lo.isObject(_t))return void rt.debug("updatePatches","Got a non-object patch",_t);if(rt.showDebug&&rt.allPatches.push(_t),lo.isPromise(_t.value))return rt.promisedPatches.push(_t),void rt.promisedPatchThen(_t);if(lo.isContextPatch(_t))return void rt.setContext(_t.path,_t.value);if(lo.isMutation(_t))return void rt.updateMutations(_t)}catch(Xt){console.error(Xt),rt.errors.push(Xt)}})}},{key:"updateMutations",value:function(Y){"object"===st(Y.value)&&!Array.isArray(Y.value)&&this.allowMetaPatches&&(Y.value=q({},Y.value));var rt=lo.applyPatch(this.state,Y,{allowMetaPatches:this.allowMetaPatches});rt&&(this.mutations.push(Y),this.state=rt)}},{key:"removePromisedPatch",value:function(Y){var rt,_t=this.promisedPatches.indexOf(Y);_t<0?this.debug("Tried to remove a promisedPatch that isn't there!"):pc()(rt=this.promisedPatches).call(rt,_t,1)}},{key:"promisedPatchThen",value:function(Y){var rt=this;return Y.value=Y.value.then(function(_t){var Xt=q(q({},Y),{},{value:_t});rt.removePromisedPatch(Y),rt.updatePatches(Xt)}).catch(function(_t){rt.removePromisedPatch(Y),rt.updatePatches(_t)}),Y.value}},{key:"getMutations",value:function(Y,rt){var _t;return Y=Y||0,"number"!=typeof rt&&(rt=this.mutations.length),ma()(_t=this.mutations).call(_t,Y,rt)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(Y){var rt=this.getPluginMutationIndex(Y);return this.getMutations(rt+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(Y){return lo.getIn(this.state,Y)}},{key:"_getContext",value:function(Y){return this.contextTree.get(Y)}},{key:"setContext",value:function(Y,rt){return this.contextTree.set(Y,rt)}},{key:"_hasRun",value:function(Y){return this.getPluginRunCount(this.getCurrentPlugin())>(Y||0)}},{key:"dispatch",value:function(){var he,Y=this,rt=this,_t=this.nextPlugin();if(!_t){var Xt=this.nextPromisedPatch();if(Xt)return Xt.then(function(){return Y.dispatch()}).catch(function(){return Y.dispatch()});var Jt={spec:this.state,errors:this.errors};return this.showDebug&&(Jt.patches=this.allPatches),Yo().resolve(Jt)}if(rt.pluginCount=rt.pluginCount||{},rt.pluginCount[_t]=(rt.pluginCount[_t]||0)+1,rt.pluginCount[_t]>100)return Yo().resolve({spec:rt.state,errors:Te()(he=rt.errors).call(he,new Error("We've reached a hard limit of ".concat(100," plugin runs")))});if(_t!==this.currentPlugin&&this.promisedPatches.length){var De,ke=Mt()(De=this.promisedPatches).call(De,function(gi){return gi.value});return Yo().all(Mt()(ke).call(ke,function(gi){return gi.then(au,au)})).then(function(){return Y.dispatch()})}return function(){rt.currentPlugin=_t;var gi=rt.getCurrentMutations(),wi=rt.mutations.length-1;try{if(_t.isGenerator){var qi,Wi=ut(_t(gi,rt.getLib()));try{for(Wi.s();!(qi=Wi.n()).done;)ai(qi.value)}catch(tn){Wi.e(tn)}finally{Wi.f()}}else ai(_t(gi,rt.getLib()))}catch(tn){console.error(tn),ai([Ft()(Object.create(tn),{plugin:_t})])}finally{rt.updatePluginHistory(_t,{mutationIndex:wi})}return rt.dispatch()}();function ai(gi){gi&&(gi=lo.fullyNormalizeArray(gi),rt.updatePatches(gi,_t))}}}],[{key:"getPluginName",value:function(Y){return Y.pluginName}},{key:"getPatchesOfType",value:function(Y,rt){return ue()(Y).call(Y,rt)}}]),S}(),Wl={refs:th,allOf:mh,parameters:Dh,properties:Ih},vh=f(75388),ua=f.n(vh),zl=function(B){return String.prototype.toLowerCase.call(B)},Uu=function(B){return B.replace(/[^\w]/gi,"_")};function Vu(S){var B=S.openapi;return!!B&&wt()(B).call(B,"3")}function Gu(S,B){var Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},_t=rt.v2OperationIdCompatibilityMode;if(!S||"object"!==st(S))return null;var Xt=(S.operationId||"").replace(/\s/g,"");return Xt.length?Uu(S.operationId):Ah(B,Y,{v2OperationIdCompatibilityMode:_t})}function Ah(S,B){var Y,rt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_t=rt.v2OperationIdCompatibilityMode;if(_t){var Xt,Jt,he=Te()(Xt="".concat(B.toLowerCase(),"_")).call(Xt,S).replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return(he=he||Te()(Jt="".concat(S.substring(1),"_")).call(Jt,B)).replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return Te()(Y="".concat(zl(B))).call(Y,Uu(S))}function Io(S,B){var Y;return Te()(Y="".concat(zl(B),"-")).call(Y,S)}function Sc(S,B,Y){if(!S||"object"!==st(S)||!S.paths||"object"!==st(S.paths))return null;var rt=S.paths;for(var _t in rt)for(var Xt in rt[_t])if("PARAMETERS"!==Xt.toUpperCase()){var Jt=rt[_t][Xt];if(Jt&&"object"===st(Jt)){var he={spec:S,pathName:_t,method:Xt.toUpperCase(),operation:Jt},De=B(he);if(Y&&De)return he}}}function nl(S){var B=S.spec,Y=B.paths,rt={};if(!Y||B.$$normalized)return S;for(var _t in Y){var Xt=Y[_t];if(ua()(Xt)){var Jt=Xt.parameters,he=function(ai){var gi=Xt[ai];if(!ua()(gi))return"continue";var wi=Gu(gi,_t,ai);if(wi){rt[wi]?rt[wi].push(gi):rt[wi]=[gi];var Wi=rt[wi];if(Wi.length>1)Wi.forEach(function(Fs,Ks){var Br;Fs.__originalOperationId=Fs.__originalOperationId||Fs.operationId,Fs.operationId=Te()(Br="".concat(wi)).call(Br,Ks+1)});else if(void 0!==gi.operationId){var qi=Wi[0];qi.__originalOperationId=qi.__originalOperationId||gi.operationId,qi.operationId=wi}}if("parameters"!==ai){var ln=[],In={};for(var tn in B)("produces"===tn||"consumes"===tn||"security"===tn)&&(In[tn]=B[tn],ln.push(In));if(Jt&&(In.parameters=Jt,ln.push(In)),ln.length){var Fr,Pr=ut(ln);try{for(Pr.s();!(Fr=Pr.n()).done;){var uo=Fr.value;for(var Jr in uo)if(gi[Jr]){if("parameters"===Jr){var La,Co=ut(uo[Jr]);try{var le=function(){var Ks=La.value;gi[Jr].some(function(Js){return Js.name&&Js.name===Ks.name||Js.$ref&&Js.$ref===Ks.$ref||Js.$$ref&&Js.$$ref===Ks.$$ref||Js===Ks})||gi[Jr].push(Ks)};for(Co.s();!(La=Co.n()).done;)le()}catch(Fs){Co.e(Fs)}finally{Co.f()}}}else gi[Jr]=uo[Jr]}}catch(Fs){Pr.e(Fs)}finally{Pr.f()}}}};for(var De in Xt)he(De)}}return B.$$normalized=!0,S}function cu(S){var B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Y=B.requestInterceptor,rt=B.responseInterceptor,_t=S.withCredentials?"include":"same-origin";return function(Xt){return S({url:Xt,loadSpec:!0,requestInterceptor:Y,responseInterceptor:rt,headers:{Accept:co},credentials:_t}).then(function(Jt){return Jt.body})}}function zu(S){var Y=S.spec,_t=S.mode,Xt=S.allowMetaPatches,Jt=void 0===Xt||Xt,he=S.pathDiscriminator,De=S.modelPropertyMacro,ke=S.parameterMacro,ri=S.requestInterceptor,ai=S.responseInterceptor,gi=S.skipNormalization,wi=S.useCircularStructures,Wi=S.http,qi=S.baseDoc;return qi=qi||S.url,Wi=S.fetch||Wi||Mu,Y?ln(Y):cu(Wi,{requestInterceptor:ri,responseInterceptor:ai})(qi).then(ln);function ln(In){qi&&(Wl.refs.docCache[qi]=In),Wl.refs.fetchJSON=cu(Wi,{requestInterceptor:ri,responseInterceptor:ai});var tn=[Wl.refs];return"function"==typeof ke&&tn.push(Wl.parameters),"function"==typeof De&&tn.push(Wl.properties),"strict"!==_t&&tn.push(Wl.allOf),function(S){return new Da(S).dispatch()}({spec:In,context:{baseDoc:qi},plugins:tn,allowMetaPatches:Jt,pathDiscriminator:he,parameterMacro:ke,modelPropertyMacro:De,useCircularStructures:wi}).then(gi?function(){var Pr=oe(Re().mark(function Fr(uo){return Re().wrap(function(Co){for(;;)switch(Co.prev=Co.next){case 0:return Co.abrupt("return",uo);case 1:case"end":return Co.stop()}},Fr)}));return function(Fr){return Pr.apply(this,arguments)}}():nl)}}var xh=f(60778),Tu=f.n(xh);function ju(){return ju=oe(Re().mark(function S(B,Y){var rt,_t,ai,gi,wi,Wi,qi=arguments;return Re().wrap(function(In){for(;;)switch(In.prev=In.next){case 0:return _t=(rt=qi.length>2&&void 0!==qi[2]?qi[2]:{}).returnEntireTree,ai={pathDiscriminator:Y,baseDoc:rt.baseDoc,requestInterceptor:rt.requestInterceptor,responseInterceptor:rt.responseInterceptor,parameterMacro:rt.parameterMacro,modelPropertyMacro:rt.modelPropertyMacro,useCircularStructures:rt.useCircularStructures},gi=nl({spec:B}),wi=gi.spec,In.next=6,zu(q(q({},ai),{},{spec:wi,allowMetaPatches:!0,skipNormalization:!0}));case 6:return Wi=In.sent,!_t&&Array.isArray(Y)&&Y.length&&(Wi.spec=Tu()(Wi.spec,Y)||null),In.abrupt("return",Wi);case 9:case"end":return In.stop()}},S)})),ju.apply(this,arguments)}var kh=function(){return null},wc_mapTagOperations=function(S){var B=S.spec,Y=S.cb,rt=void 0===Y?kh:Y,_t=S.defaultTag,Xt=void 0===_t?"default":_t,Jt=S.v2OperationIdCompatibilityMode,he={},De={};return Sc(B,function(ke){var ri=ke.pathName,ai=ke.method,gi=ke.operation,wi=gi.tags?function(B){return Array.isArray(B)?B:[B]}(gi.tags):[Xt];wi.forEach(function(Wi){if("string"==typeof Wi){De[Wi]=De[Wi]||{};var tn,qi=De[Wi],ln=Gu(gi,ri,ai,{v2OperationIdCompatibilityMode:Jt}),In=rt({spec:B,pathName:ri,method:ai,operation:gi,operationId:ln});if(he[ln])he[ln]+=1,qi[Te()(tn="".concat(ln)).call(tn,he[ln])]=In;else if(void 0!==qi[ln]){var Pr,Fr,uo=he[ln]||1;he[ln]=uo+1,qi[Te()(Pr="".concat(ln)).call(Pr,he[ln])]=In;var Jr=qi[ln];delete qi[ln],qi[Te()(Fr="".concat(ln)).call(Fr,uo)]=Jr}else qi[ln]=In}})}),De},wc_makeExecute=function(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(B){var Y=B.pathName,rt=B.method,_t=B.operationId;return function(Xt){var Jt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},he=S.requestInterceptor,De=S.responseInterceptor,ke=S.userFetch;return S.execute(q({spec:S.spec,requestInterceptor:he,responseInterceptor:De,userFetch:ke,pathName:Y,method:rt,parameters:Xt,operationId:_t},Jt))}}},Wc=f(83091);var fs=f(12507),Cu=f.n(fs),zc=f(76216);const Lh={body:function(S){S.req.body=S.value},header:function(S){var B=S.req,Y=S.parameter,rt=S.value;B.headers=B.headers||{},void 0!==rt&&(B.headers[Y.name]=rt)},query:function(S){var B=S.req,Y=S.value,rt=S.parameter;if(B.query=B.query||{},!1===Y&&"boolean"===rt.type&&(Y="false"),0===Y&&["number","integer"].indexOf(rt.type)>-1&&(Y="0"),Y)B.query[rt.name]={collectionFormat:rt.collectionFormat,value:Y};else if(rt.allowEmptyValue&&void 0!==Y){var _t=rt.name;B.query[_t]=B.query[_t]||{},B.query[_t].allowEmptyValue=!0}},path:function(S){var B=S.req,Y=S.value;B.url=B.url.split("{".concat(S.parameter.name,"}")).join(encodeURIComponent(Y))},formData:function(S){var B=S.req,Y=S.value,rt=S.parameter;(Y||rt.allowEmptyValue)&&(B.form=B.form||{},B.form[rt.name]={value:Y,allowEmptyValue:rt.allowEmptyValue,collectionFormat:rt.collectionFormat})}};function L(S,B){return Si()(B).call(B,"application/json")?"string"==typeof S?S:Qt()(S):S.toString()}function K(S){var B=S.req,Y=S.value,rt=S.parameter,_t=rt.name,Xt=rt.style,Jt=rt.explode,he=rt.content;if(he){var De=ye()(he)[0];B.url=B.url.split("{".concat(_t,"}")).join(bo(L(Y,De),{escape:!0}))}else{var ke=ao({key:rt.name,value:Y,style:Xt||"simple",explode:Jt||!1,escape:!0});B.url=B.url.split("{".concat(_t,"}")).join(ke)}}function pt(S){var B=S.req,Y=S.value,rt=S.parameter;if(B.query=B.query||{},rt.content){var _t=ye()(rt.content)[0];B.query[rt.name]=L(Y,_t)}else if(!1===Y&&(Y="false"),0===Y&&(Y="0"),Y)B.query[rt.name]={value:Y,serializationOption:{style:rt.style,explode:rt.explode,allowReserved:rt.allowReserved}};else if(rt.allowEmptyValue&&void 0!==Y){var De=rt.name;B.query[De]=B.query[De]||{},B.query[De].allowEmptyValue=!0}}var Rt=["accept","authorization","content-type"];function Ht(S){var B=S.req,Y=S.parameter,rt=S.value;if(B.headers=B.headers||{},!(Rt.indexOf(Y.name.toLowerCase())>-1)){if(Y.content){var _t=ye()(Y.content)[0];return void(B.headers[Y.name]=L(rt,_t))}void 0!==rt&&(B.headers[Y.name]=ao({key:Y.name,value:rt,style:Y.style||"simple",explode:void 0!==Y.explode&&Y.explode,escape:!1}))}}function qt(S){var B=S.req,Y=S.parameter,rt=S.value;B.headers=B.headers||{};var _t=st(rt);if(Y.content){var Xt,Jt=ye()(Y.content)[0];B.headers.Cookie=Te()(Xt="".concat(Y.name,"=")).call(Xt,L(rt,Jt))}else if("undefined"!==_t){var he="object"===_t&&!Array.isArray(rt)&&Y.explode?"":"".concat(Y.name,"=");B.headers.Cookie=he+ao({key:Y.name,value:rt,escape:!1,style:Y.style||"form",explode:void 0!==Y.explode&&Y.explode})}}var xe=f(26692),We=f.n(xe);var Qi=["http","fetch","spec","operationId","pathName","method","parameters","securities"],hn=function(B){return Array.isArray(B)?B:[]},vn=Ni("OperationNotFoundError",function(B,Y,rt){this.originalError=rt,Ft()(this,Y||{})}),Bn={buildRequest:hr};function hr(S){var B,Y,rt=S.spec,_t=S.operationId,Xt=S.responseContentType,Jt=S.scheme,he=S.requestInterceptor,De=S.responseInterceptor,ke=S.contextUrl,ri=S.userFetch,ai=S.server,gi=S.serverVariables,wi=S.http,Wi=S.parameters,qi=S.parameterBuilders,ln=Vu(rt);qi||(qi=ln?e:Lh);var tn={url:"",credentials:wi&&wi.withCredentials?"include":"same-origin",headers:{},cookies:{}};he&&(tn.requestInterceptor=he),De&&(tn.responseInterceptor=De),ri&&(tn.userFetch=ri);var Pr=function(S,B){return S&&S.paths?function(S,B){return Sc(S,B,!0)||null}(S,function(Y){var rt=Y.pathName,_t=Y.method,Xt=Y.operation;if(!Xt||"object"!==st(Xt))return!1;var Jt=Xt.operationId;return[Gu(Xt,rt,_t),Io(rt,_t),Jt].some(function(ke){return ke&&ke===B})}):null}(rt,_t);if(!Pr)throw new vn("Operation ".concat(_t," not found"));var Fr=Pr.operation,uo=void 0===Fr?{}:Fr,Jr=Pr.method,Co=Pr.pathName;if(tn.url+=ns({spec:rt,scheme:Jt,contextUrl:ke,server:ai,serverVariables:gi,pathName:Co,method:Jr}),!_t)return delete tn.cookies,tn;tn.url+=Co,tn.method="".concat(Jr).toUpperCase(),Wi=Wi||{};var La=rt.paths[Co]||{};Xt&&(tn.headers.accept=Xt);var le=function(B){var Y={};B.forEach(function(_t){Y[_t.in]||(Y[_t.in]={}),Y[_t.in][_t.name]=_t});var rt=[];return ye()(Y).forEach(function(_t){ye()(Y[_t]).forEach(function(Xt){rt.push(Y[_t][Xt])})}),rt}(Te()(B=Te()(Y=[]).call(Y,hn(uo.parameters))).call(B,hn(La.parameters)));le.forEach(function(Br){var Ia,Dc,Js=qi[Br.in];if("body"===Br.in&&Br.schema&&Br.schema.properties&&(Ia=Wi),void 0===(Ia=Br&&Br.name&&Wi[Br.name]))Ia=Br&&Br.name&&Wi[Te()(Dc="".concat(Br.in,".")).call(Dc,Br.name)];else if(function(B,Y){return ue()(Y).call(Y,function(rt){return rt.name===B})}(Br.name,le).length>1){var Il;console.warn(Te()(Il="Parameter '".concat(Br.name,"' is ambiguous because the defined spec has more than one parameter with the name: '")).call(Il,Br.name,"' and the passed-in parameter values did not define an 'in' value."))}if(null!==Ia){if(void 0!==Br.default&&void 0===Ia&&(Ia=Br.default),void 0===Ia&&Br.required&&!Br.allowEmptyValue)throw new Error("Required parameter ".concat(Br.name," is not provided"));if(ln&&Br.schema&&"object"===Br.schema.type&&"string"==typeof Ia)try{Ia=JSON.parse(Ia)}catch(hu){throw new Error("Could not parse object parameter value string as JSON")}Js&&Js({req:tn,parameter:Br,value:Ia,operation:uo,spec:rt})}});var Fs=q(q({},S),{},{operation:uo});if((tn=ln?function(S,B){var Y=S.operation,rt=S.requestBody,Jt=S.attachContentTypeForEmptyPayload,he=S.requestContentType;B=function(S){var B=S.request,Y=S.securities,rt=void 0===Y?{}:Y,_t=S.operation,Xt=void 0===_t?{}:_t,Jt=S.spec,he=q({},B),De=rt.authorized,ke=void 0===De?{}:De,ri=Xt.security||Jt.security||[],ai=ke&&!!ye()(ke).length,gi=Tu()(Jt,["components","securitySchemes"])||{};return he.headers=he.headers||{},he.query=he.query||{},ye()(rt).length&&ai&&ri&&(!Array.isArray(Xt.security)||Xt.security.length)?(ri.forEach(function(wi){ye()(wi).forEach(function(Wi){var qi=ke[Wi],ln=gi[Wi];if(qi){var In=qi.value||qi,tn=ln.type;if(qi)if("apiKey"===tn)"query"===ln.in&&(he.query[ln.name]=In),"header"===ln.in&&(he.headers[ln.name]=In),"cookie"===ln.in&&(he.cookies[ln.name]=In);else if("http"===tn){if(/^basic$/i.test(ln.scheme)){var Pr,Fr=In.username||"",uo=In.password||"",Jr=We()(Te()(Pr="".concat(Fr,":")).call(Pr,uo));he.headers.Authorization="Basic ".concat(Jr)}/^bearer$/i.test(ln.scheme)&&(he.headers.Authorization="Bearer ".concat(In))}else if("oauth2"===tn||"openIdConnect"===tn){var Co,La=qi.token||{},Fs=La[ln["x-tokenName"]||"access_token"],Ks=La.token_type;(!Ks||"bearer"===Ks.toLowerCase())&&(Ks="Bearer"),he.headers.Authorization=Te()(Co="".concat(Ks," ")).call(Co,Fs)}}})}),he):B}({request:B,securities:S.securities,operation:Y,spec:S.spec});var De=Y.requestBody||{},ke=ye()(De.content||{}),ri=he&&ke.indexOf(he)>-1;if(rt||Jt){if(he&&ri)B.headers["Content-Type"]=he;else if(!he){var ai=ke[0];ai&&(B.headers["Content-Type"]=ai,he=ai)}}else he&&ri&&(B.headers["Content-Type"]=he);if(!S.responseContentType&&Y.responses){var gi,wi=ue()(gi=te()(Y.responses)).call(gi,function(qi){var ln=At(qi,2),tn=ln[1],Pr=parseInt(ln[0],10);return Pr>=200&&Pr<300&&Cu()(tn.content)}).reduce(function(qi,ln){var tn=At(ln,2)[1];return Te()(qi).call(qi,ye()(tn.content))},[]);wi.length>0&&(B.headers.accept=wi.join(", "))}if(rt)if(he){if(ke.indexOf(he)>-1)if("application/x-www-form-urlencoded"===he||"multipart/form-data"===he)if("object"===st(rt)){var Wi=(De.content[he]||{}).encoding||{};B.form={},ye()(rt).forEach(function(qi){B.form[qi]={value:rt[qi],encoding:Wi[qi]||{}}})}else B.form=rt;else B.body=rt}else B.body=rt;return B}(Fs,tn):function(S,B){var De,ke,Y=S.spec,rt=S.operation,Xt=S.requestContentType,Jt=S.responseContentType,he=S.attachContentTypeForEmptyPayload;if(B=function(S){var B=S.request,Y=S.securities,rt=void 0===Y?{}:Y,_t=S.operation,Xt=void 0===_t?{}:_t,Jt=S.spec,he=q({},B),De=rt.authorized,ke=void 0===De?{}:De,ri=rt.specSecurity,gi=Xt.security||(void 0===ri?[]:ri),wi=ke&&!!ye()(ke).length,Wi=Jt.securityDefinitions;return he.headers=he.headers||{},he.query=he.query||{},ye()(rt).length&&wi&&gi&&(!Array.isArray(Xt.security)||Xt.security.length)?(gi.forEach(function(qi){ye()(qi).forEach(function(ln){var In=ke[ln];if(In){var tn=In.token,Pr=In.value||In,Fr=Wi[ln],uo=Fr.type,Co=tn&&tn[Fr["x-tokenName"]||"access_token"],La=tn&&tn.token_type;if(In)if("apiKey"===uo){var le="query"===Fr.in?"query":"headers";he[le]=he[le]||{},he[le][Fr.name]=Pr}else if("basic"===uo)if(Pr.header)he.headers.authorization=Pr.header;else{var Fs,Ks=Pr.username||"",Br=Pr.password||"";Pr.base64=We()(Te()(Fs="".concat(Ks,":")).call(Fs,Br)),he.headers.authorization="Basic ".concat(Pr.base64)}else if("oauth2"===uo&&Co){var Js;La=La&&"bearer"!==La.toLowerCase()?La:"Bearer",he.headers.authorization=Te()(Js="".concat(La," ")).call(Js,Co)}}})}),he):B}({request:B,securities:S.securities,operation:rt,spec:Y}),B.body||B.form||he)if(Xt)B.headers["Content-Type"]=Xt;else if(Array.isArray(rt.consumes)){var ri=At(rt.consumes,1);B.headers["Content-Type"]=ri[0]}else if(Array.isArray(Y.consumes)){var ai=At(Y.consumes,1);B.headers["Content-Type"]=ai[0]}else rt.parameters&&ue()(De=rt.parameters).call(De,function(ln){return"file"===ln.type}).length?B.headers["Content-Type"]="multipart/form-data":rt.parameters&&ue()(ke=rt.parameters).call(ke,function(ln){return"formData"===ln.in}).length&&(B.headers["Content-Type"]="application/x-www-form-urlencoded");else if(Xt){var gi,wi,Wi=rt.parameters&&ue()(gi=rt.parameters).call(gi,function(ln){return"body"===ln.in}).length>0,qi=rt.parameters&&ue()(wi=rt.parameters).call(wi,function(ln){return"formData"===ln.in}).length>0;(Wi||qi)&&(B.headers["Content-Type"]=Xt)}return!Jt&&Array.isArray(rt.produces)&&rt.produces.length>0&&(B.headers.accept=rt.produces.join(", ")),B}(Fs,tn)).cookies&&ye()(tn.cookies).length){var Ks=ye()(tn.cookies).reduce(function(Br,Js){return Br+(Br?"&":"")+zc.serialize(Js,tn.cookies[Js])},"");tn.headers.Cookie=Ks}return tn.cookies&&delete tn.cookies,_a(tn),tn}var eo=function(B){return B?B.replace(/\W/g,""):null};function ns(S){return Vu(S.spec)?function(S){var B=S.spec,Y=S.pathName,rt=S.method,_t=S.server,Xt=S.contextUrl,Jt=S.serverVariables,he=void 0===Jt?{}:Jt,De=Tu()(B,["paths",Y,(rt||"").toLowerCase(),"servers"])||Tu()(B,["paths",Y,"servers"])||Tu()(B,["servers"]),ke="",ri=null;if(_t&&De&&De.length){var ai=Mt()(De).call(De,function(Wi){return Wi.url});ai.indexOf(_t)>-1&&(ke=_t,ri=De[ai.indexOf(_t)])}if(!ke&&De&&De.length){ke=De[0].url;var gi=At(De,1);ri=gi[0]}if(ke.indexOf("{")>-1){var wi=function(S){for(var rt,B=[],Y=/{([^}]+)}/g;rt=Y.exec(S);)B.push(rt[1]);return B}(ke);wi.forEach(function(Wi){if(ri.variables&&ri.variables[Wi]){var ln=he[Wi]||ri.variables[Wi].default,In=new RegExp("{".concat(Wi,"}"),"g");ke=ke.replace(In,ln)}})}return function(){var he,De,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",Y=Bt.parse(S&&B?Bt.resolve(B,S):S),rt=Bt.parse(B),_t=eo(Y.protocol)||eo(rt.protocol)||"",Xt=Y.host||rt.host,Jt=Y.pathname||"";return"/"===(he=_t&&Xt?Te()(De="".concat(_t,"://")).call(De,Xt+Jt):Jt)[he.length-1]?ma()(he).call(he,0,-1):he}(ke,Xt)}(S):function(S){var ri,ai,B=S.spec,Y=S.scheme,rt=S.contextUrl,Xt=Bt.parse(void 0===rt?"":rt),Jt=Array.isArray(B.schemes)?B.schemes[0]:null,he=Y||Jt||eo(Xt.protocol)||"http",De=B.host||Xt.host||"",ke=B.basePath||"";return"/"===(ri=he&&De?Te()(ai="".concat(he,"://")).call(ai,De+ke):ke)[ri.length-1]?ma()(ri).call(ri,0,-1):ri}(S)}function Ur(S){var B=this,Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof S?Y.url=S:Y=S,!(this instanceof Ur))return new Ur(Y);Ft()(this,Y);var rt=this.resolve().then(function(){return B.disableInterfaces||Ft()(B,Ur.makeApisTagOperation(B)),B});return rt.client=this,rt}Ur.makeHttp=function(S,B,Y){return Y=Y||function(rt){return rt},B=B||function(rt){return rt},function(rt){return"string"==typeof rt&&(rt={url:rt}),Oc.mergeInQueryOrForm(rt),rt=B(rt),Y(S(rt))}}.bind(null,Ur.http=Mu),Ur.resolve=zu,Ur.resolveSubtree=function(S,B){return ju.apply(this,arguments)},Ur.execute=function(S){var B=S.http,Y=S.fetch,rt=S.spec,_t=S.operationId,Xt=S.pathName,Jt=S.method,he=S.parameters,De=S.securities,ke=function(S,B){if(null==S)return{};var rt,_t,Y=function(S,B){if(null==S)return{};var _t,Xt,Y={},rt=t(S);for(Xt=0;Xt<rt.length;Xt++)_t=rt[Xt],!(Wc(B).call(B,_t)>=0)&&(Y[_t]=S[_t]);return Y}(S,B);if(n){var Xt=n(S);for(_t=0;_t<Xt.length;_t++)rt=Xt[_t],!(Wc(B).call(B,rt)>=0)&&(!Object.prototype.propertyIsEnumerable.call(S,rt)||(Y[rt]=S[rt]))}return Y}(S,Qi),ri=B||Y||Mu;Xt&&Jt&&!_t&&(_t=Io(Xt,Jt));var ai=Bn.buildRequest(q({spec:rt,operationId:_t,parameters:he,securities:De,http:ri},ke));return ai.body&&(Cu()(ai.body)||Array.isArray(ai.body))&&(ai.body=Qt()(ai.body)),ri(ai)},Ur.serializeRes=Ou,Ur.serializeHeaders=xu,Ur.clearCache=function(){Wl.refs.clearCache()},Ur.makeApisTagOperation=function(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},B=wc_makeExecute(S);return{apis:wc_mapTagOperations({v2OperationIdCompatibilityMode:S.v2OperationIdCompatibilityMode,spec:S.spec,cb:B})}},Ur.buildRequest=hr,Ur.helpers={opId:Gu},Ur.getBaseUrl=ns,(Ur.prototype={http:Mu,execute:function(B){return this.applyDefaults(),Ur.execute(q({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null},B))},resolve:function(){var B=this,Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ur.resolve(q({spec:this.spec,url:this.url,http:this.http||this.fetch,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null,skipNormalization:this.skipNormalization||!1},Y)).then(function(rt){return B.originalSpec=B.spec,B.spec=rt.spec,B.errors=rt.errors,B})}}).applyDefaults=function(){var B=this.spec,Y=this.url;if(Y&&wt()(Y).call(Y,"http")){var rt=Bt.parse(Y);B.host||(B.host=rt.host),B.schemes||(B.schemes=[rt.protocol.replace(":","")]),B.basePath||(B.basePath="/")}};var Ns=Ur.helpers;const Ps=Ur},84329:H=>{"use strict";var W=String.prototype.replace,f=/%20/g;H.exports={default:"RFC3986",formatters:{RFC1738:function(g){return W.call(g,f,"+")},RFC3986:function(g){return String(g)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},84268:(H,W,f)=>{"use strict";var y=f(3736),g=f(12259),e=f(84329);H.exports={formats:e,parse:g,stringify:y}},12259:(H,W,f)=>{"use strict";var y=f(5924),g=Object.prototype.hasOwnProperty,e=Array.isArray,t={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:y.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},r=function(it,q){return it&&"string"==typeof it&&q.comma&&it.indexOf(",")>-1?it.split(","):it},P=function(q,bt,Ft,gt){if(q){var wt=Ft.allowDots?q.replace(/\.([^.[]+)/g,"[$1]"):q,Kt=/(\[[^[\]]*])/g,It=Ft.depth>0&&/(\[[^[\]]*])/.exec(wt),St=It?wt.slice(0,It.index):wt,lt=[];if(St){if(!Ft.plainObjects&&g.call(Object.prototype,St)&&!Ft.allowPrototypes)return;lt.push(St)}for(var ft=0;Ft.depth>0&&null!==(It=Kt.exec(wt))&&ft<Ft.depth;){if(ft+=1,!Ft.plainObjects&&g.call(Object.prototype,It[1].slice(1,-1))&&!Ft.allowPrototypes)return;lt.push(It[1])}return It&&lt.push("["+wt.slice(It.index)+"]"),function(it,q,bt,Ft){for(var gt=Ft?q:r(q,bt),wt=it.length-1;wt>=0;--wt){var Bt,Kt=it[wt];if("[]"===Kt&&bt.parseArrays)Bt=[].concat(gt);else{Bt=bt.plainObjects?Object.create(null):{};var It="["===Kt.charAt(0)&&"]"===Kt.charAt(Kt.length-1)?Kt.slice(1,-1):Kt,St=parseInt(It,10);bt.parseArrays||""!==It?!isNaN(St)&&Kt!==It&&String(St)===It&&St>=0&&bt.parseArrays&&St<=bt.arrayLimit?(Bt=[])[St]=gt:Bt[It]=gt:Bt={0:gt}}gt=Bt}return gt}(lt,bt,Ft,gt)}};H.exports=function(it,q){var bt=function(q){if(!q)return t;if(null!=q.decoder&&"function"!=typeof q.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==q.charset&&"utf-8"!==q.charset&&"iso-8859-1"!==q.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===q.allowDots?t.allowDots:!!q.allowDots,allowPrototypes:"boolean"==typeof q.allowPrototypes?q.allowPrototypes:t.allowPrototypes,allowSparse:"boolean"==typeof q.allowSparse?q.allowSparse:t.allowSparse,arrayLimit:"number"==typeof q.arrayLimit?q.arrayLimit:t.arrayLimit,charset:void 0===q.charset?t.charset:q.charset,charsetSentinel:"boolean"==typeof q.charsetSentinel?q.charsetSentinel:t.charsetSentinel,comma:"boolean"==typeof q.comma?q.comma:t.comma,decoder:"function"==typeof q.decoder?q.decoder:t.decoder,delimiter:"string"==typeof q.delimiter||y.isRegExp(q.delimiter)?q.delimiter:t.delimiter,depth:"number"==typeof q.depth||!1===q.depth?+q.depth:t.depth,ignoreQueryPrefix:!0===q.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof q.interpretNumericEntities?q.interpretNumericEntities:t.interpretNumericEntities,parameterLimit:"number"==typeof q.parameterLimit?q.parameterLimit:t.parameterLimit,parseArrays:!1!==q.parseArrays,plainObjects:"boolean"==typeof q.plainObjects?q.plainObjects:t.plainObjects,strictNullHandling:"boolean"==typeof q.strictNullHandling?q.strictNullHandling:t.strictNullHandling}}(q);if(""===it||null==it)return bt.plainObjects?Object.create(null):{};for(var Ft="string"==typeof it?function(q,bt){var It,Ft={},Bt=(bt.ignoreQueryPrefix?q.replace(/^\?/,""):q).split(bt.delimiter,bt.parameterLimit===1/0?void 0:bt.parameterLimit),Kt=-1,St=bt.charset;if(bt.charsetSentinel)for(It=0;It<Bt.length;++It)0===Bt[It].indexOf("utf8=")&&("utf8=%E2%9C%93"===Bt[It]?St="utf-8":"utf8=%26%2310003%3B"===Bt[It]&&(St="iso-8859-1"),Kt=It,It=Bt.length);for(It=0;It<Bt.length;++It)if(It!==Kt){var Gt,ut,lt=Bt[It],ft=lt.indexOf("]="),ht=-1===ft?lt.indexOf("="):ft+1;-1===ht?(Gt=bt.decoder(lt,t.decoder,St,"key"),ut=bt.strictNullHandling?null:""):(Gt=bt.decoder(lt.slice(0,ht),t.decoder,St,"key"),ut=y.maybeMap(r(lt.slice(ht+1),bt),function(ot){return bt.decoder(ot,t.decoder,St,"value")})),ut&&bt.interpretNumericEntities&&"iso-8859-1"===St&&(ut=ut.replace(/&#(\d+);/g,function(q,bt){return String.fromCharCode(parseInt(bt,10))})),lt.indexOf("[]=")>-1&&(ut=e(ut)?[ut]:ut),Ft[Gt]=g.call(Ft,Gt)?y.combine(Ft[Gt],ut):ut}return Ft}(it,bt):it,gt=bt.plainObjects?Object.create(null):{},wt=Object.keys(Ft),Bt=0;Bt<wt.length;++Bt){var Kt=wt[Bt],It=P(Kt,Ft[Kt],bt,"string"==typeof it);gt=y.merge(gt,It,bt)}return!0===bt.allowSparse?gt:y.compact(gt)}},3736:(H,W,f)=>{"use strict";var y=f(93544),g=f(5924),e=f(84329),t=Object.prototype.hasOwnProperty,n={brackets:function(wt){return wt+"[]"},comma:"comma",indices:function(wt,Bt){return wt+"["+Bt+"]"},repeat:function(wt){return wt}},r=Array.isArray,s=String.prototype.split,c=Array.prototype.push,v=function(gt,wt){c.apply(gt,r(wt)?wt:[wt])},D=Date.prototype.toISOString,P=e.default,G={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:g.encode,encodeValuesOnly:!1,format:P,formatter:e.formatters[P],indices:!1,serializeDate:function(wt){return D.call(wt)},skipNulls:!1,strictNullHandling:!1},q={},bt=function gt(wt,Bt,Kt,It,St,lt,ft,ht,Gt,ut,ot,st,Z,Zt,vt){for(var At=wt,re=vt,ve=0,oe=!1;void 0!==(re=re.get(q))&&!oe;){var Ie=re.get(wt);if(ve+=1,void 0!==Ie){if(Ie===ve)throw new RangeError("Cyclic object value");oe=!0}void 0===re.get(q)&&(ve=0)}if("function"==typeof ft?At=ft(Bt,At):At instanceof Date?At=ut(At):"comma"===Kt&&r(At)&&(At=g.maybeMap(At,function(ye){return ye instanceof Date?ut(ye):ye})),null===At){if(It)return lt&&!Z?lt(Bt,G.encoder,Zt,"key",ot):Bt;At=""}if(function(wt){return"string"==typeof wt||"number"==typeof wt||"boolean"==typeof wt||"symbol"==typeof wt||"bigint"==typeof wt}(At)||g.isBuffer(At)){if(lt){var Re=Z?Bt:lt(Bt,G.encoder,Zt,"key",ot);if("comma"===Kt&&Z){for(var je=s.call(String(At),","),Si="",Ze=0;Ze<je.length;++Ze)Si+=(0===Ze?"":",")+st(lt(je[Ze],G.encoder,Zt,"value",ot));return[st(Re)+"="+Si]}return[st(Re)+"="+st(lt(At,G.encoder,Zt,"value",ot))]}return[st(Bt)+"="+st(String(At))]}var ci,we=[];if(void 0===At)return we;if("comma"===Kt&&r(At))ci=[{value:At.length>0?At.join(",")||null:void 0}];else if(r(ft))ci=ft;else{var Wt=Object.keys(At);ci=ht?Wt.sort(ht):Wt}for(var Ae=0;Ae<ci.length;++Ae){var Qt=ci[Ae],ee="object"==typeof Qt&&void 0!==Qt.value?Qt.value:At[Qt];if(!St||null!==ee){var Mt=r(At)?"function"==typeof Kt?Kt(Bt,Qt):Bt:Bt+(Gt?"."+Qt:"["+Qt+"]");vt.set(wt,ve);var Yt=y();Yt.set(q,vt),v(we,gt(ee,Mt,Kt,It,St,lt,ft,ht,Gt,ut,ot,st,Z,Zt,Yt))}}return we};H.exports=function(gt,wt){var It,Bt=gt,Kt=function(wt){if(!wt)return G;if(null!=wt.encoder&&"function"!=typeof wt.encoder)throw new TypeError("Encoder has to be a function.");var Bt=wt.charset||G.charset;if(void 0!==wt.charset&&"utf-8"!==wt.charset&&"iso-8859-1"!==wt.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Kt=e.default;if(void 0!==wt.format){if(!t.call(e.formatters,wt.format))throw new TypeError("Unknown format option provided.");Kt=wt.format}var It=e.formatters[Kt],St=G.filter;return("function"==typeof wt.filter||r(wt.filter))&&(St=wt.filter),{addQueryPrefix:"boolean"==typeof wt.addQueryPrefix?wt.addQueryPrefix:G.addQueryPrefix,allowDots:void 0===wt.allowDots?G.allowDots:!!wt.allowDots,charset:Bt,charsetSentinel:"boolean"==typeof wt.charsetSentinel?wt.charsetSentinel:G.charsetSentinel,delimiter:void 0===wt.delimiter?G.delimiter:wt.delimiter,encode:"boolean"==typeof wt.encode?wt.encode:G.encode,encoder:"function"==typeof wt.encoder?wt.encoder:G.encoder,encodeValuesOnly:"boolean"==typeof wt.encodeValuesOnly?wt.encodeValuesOnly:G.encodeValuesOnly,filter:St,format:Kt,formatter:It,serializeDate:"function"==typeof wt.serializeDate?wt.serializeDate:G.serializeDate,skipNulls:"boolean"==typeof wt.skipNulls?wt.skipNulls:G.skipNulls,sort:"function"==typeof wt.sort?wt.sort:null,strictNullHandling:"boolean"==typeof wt.strictNullHandling?wt.strictNullHandling:G.strictNullHandling}}(wt);"function"==typeof Kt.filter?Bt=(0,Kt.filter)("",Bt):r(Kt.filter)&&(It=Kt.filter);var lt=[];if("object"!=typeof Bt||null===Bt)return"";var ht=n[wt&&wt.arrayFormat in n?wt.arrayFormat:wt&&"indices"in wt?wt.indices?"indices":"repeat":"indices"];It||(It=Object.keys(Bt)),Kt.sort&&It.sort(Kt.sort);for(var Gt=y(),ut=0;ut<It.length;++ut){var ot=It[ut];Kt.skipNulls&&null===Bt[ot]||v(lt,bt(Bt[ot],ot,ht,Kt.strictNullHandling,Kt.skipNulls,Kt.encode?Kt.encoder:null,Kt.filter,Kt.sort,Kt.allowDots,Kt.serializeDate,Kt.format,Kt.formatter,Kt.encodeValuesOnly,Kt.charset,Gt))}var st=lt.join(Kt.delimiter),Z=!0===Kt.addQueryPrefix?"?":"";return Kt.charsetSentinel&&(Z+="iso-8859-1"===Kt.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),st.length>0?Z+st:""}},5924:(H,W,f)=>{"use strict";var y=f(84329),g=Object.prototype.hasOwnProperty,e=Array.isArray,t=function(){for(var Ft=[],gt=0;gt<256;++gt)Ft.push("%"+((gt<16?"0":"")+gt.toString(16)).toUpperCase());return Ft}(),r=function(gt,wt){for(var Bt=wt&&wt.plainObjects?Object.create(null):{},Kt=0;Kt<gt.length;++Kt)void 0!==gt[Kt]&&(Bt[Kt]=gt[Kt]);return Bt};H.exports={arrayToObject:r,assign:function(gt,wt){return Object.keys(wt).reduce(function(Bt,Kt){return Bt[Kt]=wt[Kt],Bt},gt)},combine:function(gt,wt){return[].concat(gt,wt)},compact:function(gt){for(var wt=[{obj:{o:gt},prop:"o"}],Bt=[],Kt=0;Kt<wt.length;++Kt)for(var It=wt[Kt],St=It.obj[It.prop],lt=Object.keys(St),ft=0;ft<lt.length;++ft){var ht=lt[ft],Gt=St[ht];"object"==typeof Gt&&null!==Gt&&-1===Bt.indexOf(Gt)&&(wt.push({obj:St,prop:ht}),Bt.push(Gt))}return function(gt){for(;gt.length>1;){var wt=gt.pop(),Bt=wt.obj[wt.prop];if(e(Bt)){for(var Kt=[],It=0;It<Bt.length;++It)void 0!==Bt[It]&&Kt.push(Bt[It]);wt.obj[wt.prop]=Kt}}}(wt),gt},decode:function(Ft,gt,wt){var Bt=Ft.replace(/\+/g," ");if("iso-8859-1"===wt)return Bt.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(Bt)}catch(Kt){return Bt}},encode:function(gt,wt,Bt,Kt,It){if(0===gt.length)return gt;var St=gt;if("symbol"==typeof gt?St=Symbol.prototype.toString.call(gt):"string"!=typeof gt&&(St=String(gt)),"iso-8859-1"===Bt)return escape(St).replace(/%u[0-9a-f]{4}/gi,function(Gt){return"%26%23"+parseInt(Gt.slice(2),16)+"%3B"});for(var lt="",ft=0;ft<St.length;++ft){var ht=St.charCodeAt(ft);45===ht||46===ht||95===ht||126===ht||ht>=48&&ht<=57||ht>=65&&ht<=90||ht>=97&&ht<=122||It===y.RFC1738&&(40===ht||41===ht)?lt+=St.charAt(ft):ht<128?lt+=t[ht]:ht<2048?lt+=t[192|ht>>6]+t[128|63&ht]:ht<55296||ht>=57344?lt+=t[224|ht>>12]+t[128|ht>>6&63]+t[128|63&ht]:(ht=65536+((1023&ht)<<10|1023&St.charCodeAt(ft+=1)),lt+=t[240|ht>>18]+t[128|ht>>12&63]+t[128|ht>>6&63]+t[128|63&ht])}return lt},isBuffer:function(gt){return!(!gt||"object"!=typeof gt||!(gt.constructor&&gt.constructor.isBuffer&&gt.constructor.isBuffer(gt)))},isRegExp:function(gt){return"[object RegExp]"===Object.prototype.toString.call(gt)},maybeMap:function(gt,wt){if(e(gt)){for(var Bt=[],Kt=0;Kt<gt.length;Kt+=1)Bt.push(wt(gt[Kt]));return Bt}return wt(gt)},merge:function Ft(gt,wt,Bt){if(!wt)return gt;if("object"!=typeof wt){if(e(gt))gt.push(wt);else{if(!gt||"object"!=typeof gt)return[gt,wt];(Bt&&(Bt.plainObjects||Bt.allowPrototypes)||!g.call(Object.prototype,wt))&&(gt[wt]=!0)}return gt}if(!gt||"object"!=typeof gt)return[gt].concat(wt);var Kt=gt;return e(gt)&&!e(wt)&&(Kt=r(gt,Bt)),e(gt)&&e(wt)?(wt.forEach(function(It,St){if(g.call(gt,St)){var lt=gt[St];lt&&"object"==typeof lt&&It&&"object"==typeof It?gt[St]=Ft(lt,It,Bt):gt.push(It)}else gt[St]=It}),gt):Object.keys(wt).reduce(function(It,St){var lt=wt[St];return It[St]=g.call(It,St)?Ft(It[St],lt,Bt):lt,It},Kt)}}},57051:H=>{var W=H.exports=function(q){return new f(q)};function f(q){this.value=q}function y(q,bt,Ft){var gt=[],wt=[],Bt=!0;return function Kt(It){var St=Ft?g(It):It,lt={},ft=!0,ht={node:St,node_:It,path:[].concat(gt),parent:wt[wt.length-1],parents:wt,key:gt.slice(-1)[0],isRoot:0===gt.length,level:gt.length,circular:null,update:function(ot,st){ht.isRoot||(ht.parent.node[ht.key]=ot),ht.node=ot,st&&(ft=!1)},delete:function(ot){delete ht.parent.node[ht.key],ot&&(ft=!1)},remove:function(ot){P(ht.parent.node)?ht.parent.node.splice(ht.key,1):delete ht.parent.node[ht.key],ot&&(ft=!1)},keys:null,before:function(ot){lt.before=ot},after:function(ot){lt.after=ot},pre:function(ot){lt.pre=ot},post:function(ot){lt.post=ot},stop:function(){Bt=!1},block:function(){ft=!1}};if(!Bt)return ht;function Gt(){if("object"==typeof ht.node&&null!==ht.node){(!ht.keys||ht.node_!==ht.node)&&(ht.keys=e(ht.node)),ht.isLeaf=0==ht.keys.length;for(var ot=0;ot<wt.length;ot++)if(wt[ot].node_===It){ht.circular=wt[ot];break}}else ht.isLeaf=!0,ht.keys=null;ht.notLeaf=!ht.isLeaf,ht.notRoot=!ht.isRoot}Gt();var ut=bt.call(ht,ht.node);return void 0!==ut&&ht.update&&ht.update(ut),lt.before&&lt.before.call(ht,ht.node),ft&&("object"==typeof ht.node&&null!==ht.node&&!ht.circular&&(wt.push(ht),Gt(),G(ht.keys,function(ot,st){gt.push(ot),lt.pre&&lt.pre.call(ht,ht.node[ot],ot);var Z=Kt(ht.node[ot]);Ft&&it.call(ht.node,ot)&&(ht.node[ot]=Z.node),Z.isLast=st==ht.keys.length-1,Z.isFirst=0==st,lt.post&&lt.post.call(ht,Z),gt.pop()}),wt.pop()),lt.after&&lt.after.call(ht,ht.node)),ht}(q).node}function g(q){if("object"==typeof q&&null!==q){var bt;if(P(q))bt=[];else if(function(q){return"[object Date]"===t(q)}(q))bt=new Date(q.getTime?q.getTime():q);else if(function(q){return"[object RegExp]"===t(q)}(q))bt=new RegExp(q);else if(function(q){return"[object Error]"===t(q)}(q))bt={message:q.message};else if(function(q){return"[object Boolean]"===t(q)}(q))bt=new Boolean(q);else if(function(q){return"[object Number]"===t(q)}(q))bt=new Number(q);else if(function(q){return"[object String]"===t(q)}(q))bt=new String(q);else if(Object.create&&Object.getPrototypeOf)bt=Object.create(Object.getPrototypeOf(q));else if(q.constructor===Object)bt={};else{var gt=function(){};gt.prototype=q.constructor&&q.constructor.prototype||q.__proto__||{},bt=new gt}return G(e(q),function(wt){bt[wt]=q[wt]}),bt}return q}f.prototype.get=function(q){for(var bt=this.value,Ft=0;Ft<q.length;Ft++){var gt=q[Ft];if(!bt||!it.call(bt,gt)){bt=void 0;break}bt=bt[gt]}return bt},f.prototype.has=function(q){for(var bt=this.value,Ft=0;Ft<q.length;Ft++){var gt=q[Ft];if(!bt||!it.call(bt,gt))return!1;bt=bt[gt]}return!0},f.prototype.set=function(q,bt){for(var Ft=this.value,gt=0;gt<q.length-1;gt++){var wt=q[gt];it.call(Ft,wt)||(Ft[wt]={}),Ft=Ft[wt]}return Ft[q[gt]]=bt,bt},f.prototype.map=function(q){return y(this.value,q,!0)},f.prototype.forEach=function(q){return this.value=y(this.value,q,!1),this.value},f.prototype.reduce=function(q,bt){var Ft=1===arguments.length,gt=Ft?this.value:bt;return this.forEach(function(wt){(!this.isRoot||!Ft)&&(gt=q.call(this,gt,wt))}),gt},f.prototype.paths=function(){var q=[];return this.forEach(function(bt){q.push(this.path)}),q},f.prototype.nodes=function(){var q=[];return this.forEach(function(bt){q.push(this.node)}),q},f.prototype.clone=function(){var q=[],bt=[];return function Ft(gt){for(var wt=0;wt<q.length;wt++)if(q[wt]===gt)return bt[wt];if("object"==typeof gt&&null!==gt){var Bt=g(gt);return q.push(gt),bt.push(Bt),G(e(gt),function(Kt){Bt[Kt]=Ft(gt[Kt])}),q.pop(),bt.pop(),Bt}return gt}(this.value)};var e=Object.keys||function(bt){var Ft=[];for(var gt in bt)Ft.push(gt);return Ft};function t(q){return Object.prototype.toString.call(q)}var P=Array.isArray||function(bt){return"[object Array]"===Object.prototype.toString.call(bt)},G=function(q,bt){if(q.forEach)return q.forEach(bt);for(var Ft=0;Ft<q.length;Ft++)bt(q[Ft],Ft,q)};G(e(f.prototype),function(q){W[q]=function(bt){var Ft=[].slice.call(arguments,1),gt=new f(bt);return gt[q].apply(gt,Ft)}});var it=Object.hasOwnProperty||function(q,bt){return bt in q}},46486:function(H,W,f){var y;H=f.nmd(H),function(g){"object"==typeof global&&global;var r,s=2147483647,c=36,Ft=/^xn--/,gt=/[^\x20-\x7E]/,wt=/[\x2E\u3002\uFF0E\uFF61]/g,Bt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},It=Math.floor,St=String.fromCharCode;function ft(oe){throw RangeError(Bt[oe])}function ht(oe,Ie){for(var Re=oe.length,je=[];Re--;)je[Re]=Ie(oe[Re]);return je}function Gt(oe,Ie){var Re=oe.split("@"),je="";return Re.length>1&&(je=Re[0]+"@",oe=Re[1]),je+ht((oe=oe.replace(wt,".")).split("."),Ie).join(".")}function ut(oe){for(var Si,Ze,Ie=[],Re=0,je=oe.length;Re<je;)(Si=oe.charCodeAt(Re++))>=55296&&Si<=56319&&Re<je?56320==(64512&(Ze=oe.charCodeAt(Re++)))?Ie.push(((1023&Si)<<10)+(1023&Ze)+65536):(Ie.push(Si),Re--):Ie.push(Si);return Ie}function ot(oe){return ht(oe,function(Ie){var Re="";return Ie>65535&&(Re+=St((Ie-=65536)>>>10&1023|55296),Ie=56320|1023&Ie),Re+St(Ie)}).join("")}function st(oe){return oe-48<10?oe-22:oe-65<26?oe-65:oe-97<26?oe-97:c}function Z(oe,Ie){return oe+22+75*(oe<26)-((0!=Ie)<<5)}function Zt(oe,Ie,Re){var je=0;for(oe=Re?It(oe/700):oe>>1,oe+=It(oe/Ie);oe>455;je+=c)oe=It(oe/35);return It(je+36*oe/(oe+38))}function vt(oe){var je,ci,Wt,Ae,Qt,ee,Mt,Yt,ye,ui,Ie=[],Re=oe.length,Si=0,Ze=128,we=72;for((ci=oe.lastIndexOf("-"))<0&&(ci=0),Wt=0;Wt<ci;++Wt)oe.charCodeAt(Wt)>=128&&ft("not-basic"),Ie.push(oe.charCodeAt(Wt));for(Ae=ci>0?ci+1:0;Ae<Re;){for(Qt=Si,ee=1,Mt=c;Ae>=Re&&ft("invalid-input"),((Yt=st(oe.charCodeAt(Ae++)))>=c||Yt>It((s-Si)/ee))&&ft("overflow"),Si+=Yt*ee,!(Yt<(ye=Mt<=we?1:Mt>=we+26?26:Mt-we));Mt+=c)ee>It(s/(ui=c-ye))&&ft("overflow"),ee*=ui;we=Zt(Si-Qt,je=Ie.length+1,0==Qt),It(Si/je)>s-Ze&&ft("overflow"),Ze+=It(Si/je),Si%=je,Ie.splice(Si++,0,Ze)}return ot(Ie)}function At(oe){var Ie,Re,je,Si,Ze,we,ci,Wt,Ae,Qt,ee,Yt,ye,ui,Te,Mt=[];for(Yt=(oe=ut(oe)).length,Ie=128,Re=0,Ze=72,we=0;we<Yt;++we)(ee=oe[we])<128&&Mt.push(St(ee));for(je=Si=Mt.length,Si&&Mt.push("-");je<Yt;){for(ci=s,we=0;we<Yt;++we)(ee=oe[we])>=Ie&&ee<ci&&(ci=ee);for(ci-Ie>It((s-Re)/(ye=je+1))&&ft("overflow"),Re+=(ci-Ie)*ye,Ie=ci,we=0;we<Yt;++we)if((ee=oe[we])<Ie&&++Re>s&&ft("overflow"),ee==Ie){for(Wt=Re,Ae=c;!(Wt<(Qt=Ae<=Ze?1:Ae>=Ze+26?26:Ae-Ze));Ae+=c)Mt.push(St(Z(Qt+(Te=Wt-Qt)%(ui=c-Qt),0))),Wt=It(Te/ui);Mt.push(St(Z(Wt,0))),Ze=Zt(Re,ye,je==Si),Re=0,++je}++Re,++Ie}return Mt.join("")}r={version:"1.3.2",ucs2:{decode:ut,encode:ot},decode:vt,encode:At,toASCII:function(oe){return Gt(oe,function(Ie){return gt.test(Ie)?"xn--"+At(Ie):Ie})},toUnicode:function(oe){return Gt(oe,function(Ie){return Ft.test(Ie)?vt(Ie.slice(4).toLowerCase()):Ie})}},void 0!==(y=function(){return r}.call(W,f,W,H))&&(H.exports=y)}()},5128:(H,W,f)=>{"use strict";var y=f(46486),g=f(77107);function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}W.parse=Bt,W.resolve=function(lt,ft){return Bt(lt,!1,!0).resolve(ft)},W.resolveObject=function(lt,ft){return lt?Bt(lt,!1,!0).resolveObject(ft):ft},W.format=function(lt){return g.isString(lt)&&(lt=Bt(lt)),lt instanceof e?lt.format():e.prototype.format.call(lt)},W.Url=e;var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),v=["'"].concat(c),D=["%","/","?",";","#"].concat(v),P=["/","?","#"],it=/^[+a-z0-9A-Z_-]{0,63}$/,q=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,bt={javascript:!0,"javascript:":!0},Ft={javascript:!0,"javascript:":!0},gt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},wt=f(36e3);function Bt(lt,ft,ht){if(lt&&g.isObject(lt)&&lt instanceof e)return lt;var Gt=new e;return Gt.parse(lt,ft,ht),Gt}e.prototype.parse=function(lt,ft,ht){if(!g.isString(lt))throw new TypeError("Parameter 'url' must be a string, not "+typeof lt);var Gt=lt.indexOf("?"),ut=-1!==Gt&&Gt<lt.indexOf("#")?"?":"#",ot=lt.split(ut);ot[0]=ot[0].replace(/\\/g,"/");var Z=lt=ot.join(ut);if(Z=Z.trim(),!ht&&1===lt.split("#").length){var Zt=r.exec(Z);if(Zt)return this.path=Z,this.href=Z,this.pathname=Zt[1],Zt[2]?(this.search=Zt[2],this.query=ft?wt.parse(this.search.substr(1)):this.search.substr(1)):ft&&(this.search="",this.query={}),this}var vt=t.exec(Z);if(vt){var At=(vt=vt[0]).toLowerCase();this.protocol=At,Z=Z.substr(vt.length)}if(ht||vt||Z.match(/^\/\/[^@\/]+@[^@\/]+/)){var re="//"===Z.substr(0,2);re&&(!vt||!Ft[vt])&&(Z=Z.substr(2),this.slashes=!0)}if(!Ft[vt]&&(re||vt&&!gt[vt])){for(var ve=-1,oe=0;oe<P.length;oe++)-1!==(Ie=Z.indexOf(P[oe]))&&(-1===ve||Ie<ve)&&(ve=Ie);var Re,je;for(-1!==(je=-1===ve?Z.lastIndexOf("@"):Z.lastIndexOf("@",ve))&&(Re=Z.slice(0,je),Z=Z.slice(je+1),this.auth=decodeURIComponent(Re)),ve=-1,oe=0;oe<D.length;oe++){var Ie;-1!==(Ie=Z.indexOf(D[oe]))&&(-1===ve||Ie<ve)&&(ve=Ie)}-1===ve&&(ve=Z.length),this.host=Z.slice(0,ve),Z=Z.slice(ve),this.parseHost(),this.hostname=this.hostname||"";var Si="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Si)for(var Ze=this.hostname.split(/\./),we=(oe=0,Ze.length);oe<we;oe++){var ci=Ze[oe];if(ci&&!ci.match(it)){for(var Wt="",Ae=0,Qt=ci.length;Ae<Qt;Ae++)ci.charCodeAt(Ae)>127?Wt+="x":Wt+=ci[Ae];if(!Wt.match(it)){var ee=Ze.slice(0,oe),Mt=Ze.slice(oe+1),Yt=ci.match(q);Yt&&(ee.push(Yt[1]),Mt.unshift(Yt[2])),Mt.length&&(Z="/"+Mt.join(".")+Z),this.hostname=ee.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Si||(this.hostname=y.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Si&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==Z[0]&&(Z="/"+Z))}if(!bt[At])for(oe=0,we=v.length;oe<we;oe++){var Te=v[oe];if(-1!==Z.indexOf(Te)){var ce=encodeURIComponent(Te);ce===Te&&(ce=escape(Te)),Z=Z.split(Te).join(ce)}}var te=Z.indexOf("#");-1!==te&&(this.hash=Z.substr(te),Z=Z.slice(0,te));var Me=Z.indexOf("?");return-1!==Me?(this.search=Z.substr(Me),this.query=Z.substr(Me+1),ft&&(this.query=wt.parse(this.query)),Z=Z.slice(0,Me)):ft&&(this.search="",this.query={}),Z&&(this.pathname=Z),gt[At]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},e.prototype.format=function(){var lt=this.auth||"";lt&&(lt=(lt=encodeURIComponent(lt)).replace(/%3A/i,":"),lt+="@");var ft=this.protocol||"",ht=this.pathname||"",Gt=this.hash||"",ut=!1,ot="";this.host?ut=lt+this.host:this.hostname&&(ut=lt+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(ut+=":"+this.port)),this.query&&g.isObject(this.query)&&Object.keys(this.query).length&&(ot=wt.stringify(this.query));var st=this.search||ot&&"?"+ot||"";return ft&&":"!==ft.substr(-1)&&(ft+=":"),this.slashes||(!ft||gt[ft])&&!1!==ut?(ut="//"+(ut||""),ht&&"/"!==ht.charAt(0)&&(ht="/"+ht)):ut||(ut=""),Gt&&"#"!==Gt.charAt(0)&&(Gt="#"+Gt),st&&"?"!==st.charAt(0)&&(st="?"+st),ft+ut+(ht=ht.replace(/[?#]/g,function(Z){return encodeURIComponent(Z)}))+(st=st.replace("#","%23"))+Gt},e.prototype.resolve=function(lt){return this.resolveObject(Bt(lt,!1,!0)).format()},e.prototype.resolveObject=function(lt){if(g.isString(lt)){var ft=new e;ft.parse(lt,!1,!0),lt=ft}for(var ht=new e,Gt=Object.keys(this),ut=0;ut<Gt.length;ut++){var ot=Gt[ut];ht[ot]=this[ot]}if(ht.hash=lt.hash,""===lt.href)return ht.href=ht.format(),ht;if(lt.slashes&&!lt.protocol){for(var st=Object.keys(lt),Z=0;Z<st.length;Z++){var Zt=st[Z];"protocol"!==Zt&&(ht[Zt]=lt[Zt])}return gt[ht.protocol]&&ht.hostname&&!ht.pathname&&(ht.path=ht.pathname="/"),ht.href=ht.format(),ht}if(lt.protocol&&lt.protocol!==ht.protocol){if(!gt[lt.protocol]){for(var vt=Object.keys(lt),At=0;At<vt.length;At++){var re=vt[At];ht[re]=lt[re]}return ht.href=ht.format(),ht}if(ht.protocol=lt.protocol,lt.host||Ft[lt.protocol])ht.pathname=lt.pathname;else{for(var we=(lt.pathname||"").split("/");we.length&&!(lt.host=we.shift()););lt.host||(lt.host=""),lt.hostname||(lt.hostname=""),""!==we[0]&&we.unshift(""),we.length<2&&we.unshift(""),ht.pathname=we.join("/")}return ht.search=lt.search,ht.query=lt.query,ht.host=lt.host||"",ht.auth=lt.auth,ht.hostname=lt.hostname||lt.host,ht.port=lt.port,(ht.pathname||ht.search)&&(ht.path=(ht.pathname||"")+(ht.search||"")),ht.slashes=ht.slashes||lt.slashes,ht.href=ht.format(),ht}var Ie=ht.pathname&&"/"===ht.pathname.charAt(0),Re=lt.host||lt.pathname&&"/"===lt.pathname.charAt(0),je=Re||Ie||ht.host&&lt.pathname,Si=je,Ze=ht.pathname&&ht.pathname.split("/")||[],ci=(we=lt.pathname&&lt.pathname.split("/")||[],ht.protocol&&!gt[ht.protocol]);if(ci&&(ht.hostname="",ht.port=null,ht.host&&(""===Ze[0]?Ze[0]=ht.host:Ze.unshift(ht.host)),ht.host="",lt.protocol&&(lt.hostname=null,lt.port=null,lt.host&&(""===we[0]?we[0]=lt.host:we.unshift(lt.host)),lt.host=null),je=je&&(""===we[0]||""===Ze[0])),Re)ht.host=lt.host||""===lt.host?lt.host:ht.host,ht.hostname=lt.hostname||""===lt.hostname?lt.hostname:ht.hostname,ht.search=lt.search,ht.query=lt.query,Ze=we;else if(we.length)Ze||(Ze=[]),Ze.pop(),Ze=Ze.concat(we),ht.search=lt.search,ht.query=lt.query;else if(!g.isNullOrUndefined(lt.search))return ci&&(ht.hostname=ht.host=Ze.shift(),(Wt=!!(ht.host&&ht.host.indexOf("@")>0)&&ht.host.split("@"))&&(ht.auth=Wt.shift(),ht.host=ht.hostname=Wt.shift())),ht.search=lt.search,ht.query=lt.query,(!g.isNull(ht.pathname)||!g.isNull(ht.search))&&(ht.path=(ht.pathname?ht.pathname:"")+(ht.search?ht.search:"")),ht.href=ht.format(),ht;if(!Ze.length)return ht.pathname=null,ht.path=ht.search?"/"+ht.search:null,ht.href=ht.format(),ht;for(var Ae=Ze.slice(-1)[0],Qt=(ht.host||lt.host||Ze.length>1)&&("."===Ae||".."===Ae)||""===Ae,ee=0,Mt=Ze.length;Mt>=0;Mt--)"."===(Ae=Ze[Mt])?Ze.splice(Mt,1):".."===Ae?(Ze.splice(Mt,1),ee++):ee&&(Ze.splice(Mt,1),ee--);if(!je&&!Si)for(;ee--;ee)Ze.unshift("..");je&&""!==Ze[0]&&(!Ze[0]||"/"!==Ze[0].charAt(0))&&Ze.unshift(""),Qt&&"/"!==Ze.join("/").substr(-1)&&Ze.push("");var Wt,Yt=""===Ze[0]||Ze[0]&&"/"===Ze[0].charAt(0);return ci&&(ht.hostname=ht.host=Yt?"":Ze.length?Ze.shift():"",(Wt=!!(ht.host&&ht.host.indexOf("@")>0)&&ht.host.split("@"))&&(ht.auth=Wt.shift(),ht.host=ht.hostname=Wt.shift())),(je=je||ht.host&&Ze.length)&&!Yt&&Ze.unshift(""),Ze.length?ht.pathname=Ze.join("/"):(ht.pathname=null,ht.path=null),(!g.isNull(ht.pathname)||!g.isNull(ht.search))&&(ht.path=(ht.pathname?ht.pathname:"")+(ht.search?ht.search:"")),ht.auth=lt.auth||ht.auth,ht.slashes=ht.slashes||lt.slashes,ht.href=ht.format(),ht},e.prototype.parseHost=function(){var lt=this.host,ft=n.exec(lt);ft&&(":"!==(ft=ft[0])&&(this.port=ft.substr(1)),lt=lt.substr(0,lt.length-ft.length)),lt&&(this.hostname=lt)}},77107:H=>{"use strict";H.exports={isString:function(W){return"string"==typeof W},isObject:function(W){return"object"==typeof W&&null!==W},isNull:function(W){return null===W},isNullOrUndefined:function(W){return null==W}}},48926:H=>{function W(y,g,e,t,n,r,s){try{var c=y[r](s),v=c.value}catch(D){return void e(D)}c.done?g(v):Promise.resolve(v).then(t,n)}H.exports=function(y){return function(){var g=this,e=arguments;return new Promise(function(t,n){var r=y.apply(g,e);function s(v){W(r,t,n,s,c,"next",v)}function c(v){W(r,t,n,s,c,"throw",v)}s(void 0)})}},H.exports.default=H.exports,H.exports.__esModule=!0},35987:(H,W,f)=>{"use strict";function c(ut,ot,st,Z){return new(st||(st=Promise))(function(vt,At){function re(Ie){try{oe(Z.next(Ie))}catch(Re){At(Re)}}function ve(Ie){try{oe(Z.throw(Ie))}catch(Re){At(Re)}}function oe(Ie){Ie.done?vt(Ie.value):function(vt){return vt instanceof st?vt:new st(function(At){At(vt)})}(Ie.value).then(re,ve)}oe((Z=Z.apply(ut,ot||[])).next())})}function gt(ut){return this instanceof gt?(this.v=ut,this):new gt(ut)}function wt(ut,ot,st){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Zt,Z=st.apply(ut,ot||[]),vt=[];return Zt={},At("next"),At("throw"),At("return"),Zt[Symbol.asyncIterator]=function(){return this},Zt;function At(je){Z[je]&&(Zt[je]=function(Si){return new Promise(function(Ze,we){vt.push([je,Si,Ze,we])>1||re(je,Si)})})}function re(je,Si){try{!function(je){je.value instanceof gt?Promise.resolve(je.value.v).then(oe,Ie):Re(vt[0][2],je)}(Z[je](Si))}catch(Ze){Re(vt[0][3],Ze)}}function oe(je){re("next",je)}function Ie(je){re("throw",je)}function Re(je,Si){je(Si),vt.shift(),vt.length&&re(vt[0][0],vt[0][1])}}function Kt(ut){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st,ot=ut[Symbol.asyncIterator];return ot?ot.call(ut):(ut=function(ut){var ot="function"==typeof Symbol&&Symbol.iterator,st=ot&&ut[ot],Z=0;if(st)return st.call(ut);if(ut&&"number"==typeof ut.length)return{next:function(){return ut&&Z>=ut.length&&(ut=void 0),{value:ut&&ut[Z++],done:!ut}}};throw new TypeError(ot?"Object is not iterable.":"Symbol.iterator is not defined.")}(ut),st={},Z("next"),Z("throw"),Z("return"),st[Symbol.asyncIterator]=function(){return this},st);function Z(vt){st[vt]=ut[vt]&&function(At){return new Promise(function(re,ve){!function(vt,At,re,ve){Promise.resolve(ve).then(function(oe){vt({value:oe,done:re})},At)}(re,ve,(At=ut[vt](At)).done,At.value)})}}}f.d(W,{mG:()=>c,qq:()=>gt,FC:()=>wt,KL:()=>Kt})},6089:(H,W,f)=>{H.exports=f(82422)},44559:(H,W,f)=>{H.exports=f(8535)},58201:(H,W,f)=>{H.exports=f(29114)},37647:(H,W,f)=>{H.exports=f(30376)},20265:(H,W,f)=>{H.exports=f(9102)},17423:(H,W,f)=>{H.exports=f(40809)},32633:(H,W,f)=>{H.exports=f(40051)},36028:(H,W,f)=>{H.exports=f(42905)},35644:(H,W,f)=>{H.exports=f(77120)},15157:(H,W,f)=>{H.exports=f(47940)},99182:(H,W,f)=>{H.exports=f(15783)},41246:(H,W,f)=>{H.exports=f(68397)},2165:(H,W,f)=>{H.exports=f(64043)},17878:(H,W,f)=>{H.exports=f(69265)},2204:(H,W,f)=>{H.exports=f(64781)},26360:(H,W,f)=>{H.exports=f(99671)},3933:(H,W,f)=>{H.exports=f(80297)},16051:(H,W,f)=>{H.exports=f(13770)},6275:(H,W,f)=>{H.exports=f(66715)},17830:(H,W,f)=>{H.exports=f(46481)},25551:(H,W,f)=>{H.exports=f(81788)},41586:(H,W,f)=>{H.exports=f(38637)},83091:(H,W,f)=>{H.exports=f(48414)},28355:(H,W,f)=>{H.exports=f(30595)},40107:(H,W,f)=>{H.exports=f(83930)},31082:(H,W,f)=>{H.exports=f(41076)},73507:(H,W,f)=>{H.exports=f(27109)},86657:(H,W,f)=>{H.exports=f(35841)},42475:(H,W,f)=>{H.exports=f(5643)},49719:(H,W,f)=>{H.exports=f(50606)},75534:(H,W,f)=>{H.exports=f(98222)},84215:(H,W,f)=>{H.exports=f(16487)},36496:(H,W,f)=>{H.exports=f(9735)},22043:(H,W,f)=>{H.exports=f(26029)},59312:(H,W,f)=>{"use strict";f.r(W),f.d(W,{__extends:()=>g,__assign:()=>e,__rest:()=>t,__decorate:()=>n,__param:()=>r,__metadata:()=>s,__awaiter:()=>c,__generator:()=>v,__createBinding:()=>D,__exportStar:()=>P,__values:()=>G,__read:()=>it,__spread:()=>q,__spreadArrays:()=>bt,__spreadArray:()=>Ft,__await:()=>gt,__asyncGenerator:()=>wt,__asyncDelegator:()=>Bt,__asyncValues:()=>Kt,__makeTemplateObject:()=>It,__importStar:()=>lt,__importDefault:()=>ft,__classPrivateFieldGet:()=>ht,__classPrivateFieldSet:()=>Gt});var y=function(ut,ot){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(st,Z){st.__proto__=Z}||function(st,Z){for(var Zt in Z)Object.prototype.hasOwnProperty.call(Z,Zt)&&(st[Zt]=Z[Zt])})(ut,ot)};function g(ut,ot){if("function"!=typeof ot&&null!==ot)throw new TypeError("Class extends value "+String(ot)+" is not a constructor or null");function st(){this.constructor=ut}y(ut,ot),ut.prototype=null===ot?Object.create(ot):(st.prototype=ot.prototype,new st)}var e=function(){return e=Object.assign||function(ot){for(var st,Z=1,Zt=arguments.length;Z<Zt;Z++)for(var vt in st=arguments[Z])Object.prototype.hasOwnProperty.call(st,vt)&&(ot[vt]=st[vt]);return ot},e.apply(this,arguments)};function t(ut,ot){var st={};for(var Z in ut)Object.prototype.hasOwnProperty.call(ut,Z)&&ot.indexOf(Z)<0&&(st[Z]=ut[Z]);if(null!=ut&&"function"==typeof Object.getOwnPropertySymbols){var Zt=0;for(Z=Object.getOwnPropertySymbols(ut);Zt<Z.length;Zt++)ot.indexOf(Z[Zt])<0&&Object.prototype.propertyIsEnumerable.call(ut,Z[Zt])&&(st[Z[Zt]]=ut[Z[Zt]])}return st}function n(ut,ot,st,Z){var At,Zt=arguments.length,vt=Zt<3?ot:null===Z?Z=Object.getOwnPropertyDescriptor(ot,st):Z;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)vt=Reflect.decorate(ut,ot,st,Z);else for(var re=ut.length-1;re>=0;re--)(At=ut[re])&&(vt=(Zt<3?At(vt):Zt>3?At(ot,st,vt):At(ot,st))||vt);return Zt>3&&vt&&Object.defineProperty(ot,st,vt),vt}function r(ut,ot){return function(st,Z){ot(st,Z,ut)}}function s(ut,ot){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ut,ot)}function c(ut,ot,st,Z){return new(st||(st=Promise))(function(vt,At){function re(Ie){try{oe(Z.next(Ie))}catch(Re){At(Re)}}function ve(Ie){try{oe(Z.throw(Ie))}catch(Re){At(Re)}}function oe(Ie){Ie.done?vt(Ie.value):function(vt){return vt instanceof st?vt:new st(function(At){At(vt)})}(Ie.value).then(re,ve)}oe((Z=Z.apply(ut,ot||[])).next())})}function v(ut,ot){var Z,Zt,vt,At,st={label:0,sent:function(){if(1&vt[0])throw vt[1];return vt[1]},trys:[],ops:[]};return At={next:re(0),throw:re(1),return:re(2)},"function"==typeof Symbol&&(At[Symbol.iterator]=function(){return this}),At;function re(oe){return function(Ie){return function(oe){if(Z)throw new TypeError("Generator is already executing.");for(;st;)try{if(Z=1,Zt&&(vt=2&oe[0]?Zt.return:oe[0]?Zt.throw||((vt=Zt.return)&&vt.call(Zt),0):Zt.next)&&!(vt=vt.call(Zt,oe[1])).done)return vt;switch(Zt=0,vt&&(oe=[2&oe[0],vt.value]),oe[0]){case 0:case 1:vt=oe;break;case 4:return st.label++,{value:oe[1],done:!1};case 5:st.label++,Zt=oe[1],oe=[0];continue;case 7:oe=st.ops.pop(),st.trys.pop();continue;default:if(!(vt=(vt=st.trys).length>0&&vt[vt.length-1])&&(6===oe[0]||2===oe[0])){st=0;continue}if(3===oe[0]&&(!vt||oe[1]>vt[0]&&oe[1]<vt[3])){st.label=oe[1];break}if(6===oe[0]&&st.label<vt[1]){st.label=vt[1],vt=oe;break}if(vt&&st.label<vt[2]){st.label=vt[2],st.ops.push(oe);break}vt[2]&&st.ops.pop(),st.trys.pop();continue}oe=ot.call(ut,st)}catch(Ie){oe=[6,Ie],Zt=0}finally{Z=vt=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ie])}}}var D=Object.create?function(ut,ot,st,Z){void 0===Z&&(Z=st),Object.defineProperty(ut,Z,{enumerable:!0,get:function(){return ot[st]}})}:function(ut,ot,st,Z){void 0===Z&&(Z=st),ut[Z]=ot[st]};function P(ut,ot){for(var st in ut)"default"!==st&&!Object.prototype.hasOwnProperty.call(ot,st)&&D(ot,ut,st)}function G(ut){var ot="function"==typeof Symbol&&Symbol.iterator,st=ot&&ut[ot],Z=0;if(st)return st.call(ut);if(ut&&"number"==typeof ut.length)return{next:function(){return ut&&Z>=ut.length&&(ut=void 0),{value:ut&&ut[Z++],done:!ut}}};throw new TypeError(ot?"Object is not iterable.":"Symbol.iterator is not defined.")}function it(ut,ot){var st="function"==typeof Symbol&&ut[Symbol.iterator];if(!st)return ut;var Zt,At,Z=st.call(ut),vt=[];try{for(;(void 0===ot||ot-- >0)&&!(Zt=Z.next()).done;)vt.push(Zt.value)}catch(re){At={error:re}}finally{try{Zt&&!Zt.done&&(st=Z.return)&&st.call(Z)}finally{if(At)throw At.error}}return vt}function q(){for(var ut=[],ot=0;ot<arguments.length;ot++)ut=ut.concat(it(arguments[ot]));return ut}function bt(){for(var ut=0,ot=0,st=arguments.length;ot<st;ot++)ut+=arguments[ot].length;var Z=Array(ut),Zt=0;for(ot=0;ot<st;ot++)for(var vt=arguments[ot],At=0,re=vt.length;At<re;At++,Zt++)Z[Zt]=vt[At];return Z}function Ft(ut,ot,st){if(st||2===arguments.length)for(var vt,Z=0,Zt=ot.length;Z<Zt;Z++)(vt||!(Z in ot))&&(vt||(vt=Array.prototype.slice.call(ot,0,Z)),vt[Z]=ot[Z]);return ut.concat(vt||ot)}function gt(ut){return this instanceof gt?(this.v=ut,this):new gt(ut)}function wt(ut,ot,st){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Zt,Z=st.apply(ut,ot||[]),vt=[];return Zt={},At("next"),At("throw"),At("return"),Zt[Symbol.asyncIterator]=function(){return this},Zt;function At(je){Z[je]&&(Zt[je]=function(Si){return new Promise(function(Ze,we){vt.push([je,Si,Ze,we])>1||re(je,Si)})})}function re(je,Si){try{!function(je){je.value instanceof gt?Promise.resolve(je.value.v).then(oe,Ie):Re(vt[0][2],je)}(Z[je](Si))}catch(Ze){Re(vt[0][3],Ze)}}function oe(je){re("next",je)}function Ie(je){re("throw",je)}function Re(je,Si){je(Si),vt.shift(),vt.length&&re(vt[0][0],vt[0][1])}}function Bt(ut){var ot,st;return ot={},Z("next"),Z("throw",function(Zt){throw Zt}),Z("return"),ot[Symbol.iterator]=function(){return this},ot;function Z(Zt,vt){ot[Zt]=ut[Zt]?function(At){return(st=!st)?{value:gt(ut[Zt](At)),done:"return"===Zt}:vt?vt(At):At}:vt}}function Kt(ut){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st,ot=ut[Symbol.asyncIterator];return ot?ot.call(ut):(ut=G(ut),st={},Z("next"),Z("throw"),Z("return"),st[Symbol.asyncIterator]=function(){return this},st);function Z(vt){st[vt]=ut[vt]&&function(At){return new Promise(function(re,ve){!function(vt,At,re,ve){Promise.resolve(ve).then(function(oe){vt({value:oe,done:re})},At)}(re,ve,(At=ut[vt](At)).done,At.value)})}}}function It(ut,ot){return Object.defineProperty?Object.defineProperty(ut,"raw",{value:ot}):ut.raw=ot,ut}var St=Object.create?function(ut,ot){Object.defineProperty(ut,"default",{enumerable:!0,value:ot})}:function(ut,ot){ut.default=ot};function lt(ut){if(ut&&ut.__esModule)return ut;var ot={};if(null!=ut)for(var st in ut)"default"!==st&&Object.prototype.hasOwnProperty.call(ut,st)&&D(ot,ut,st);return St(ot,ut),ot}function ft(ut){return ut&&ut.__esModule?ut:{default:ut}}function ht(ut,ot,st,Z){if("a"===st&&!Z)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof ot?ut!==ot||!Z:!ot.has(ut))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===st?Z:"a"===st?Z.call(ut):Z?Z.value:ot.get(ut)}function Gt(ut,ot,st,Z,Zt){if("m"===Z)throw new TypeError("Private method is not writable");if("a"===Z&&!Zt)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof ot?ut!==ot||!Zt:!ot.has(ut))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===Z?Zt.call(ut,st):Zt?Zt.value=st:ot.set(ut,st),st}},96553:()=>{},41777:(H,W,f)=>{"use strict";f.d(W,{l3:()=>e,_j:()=>y,LC:()=>g,ZN:()=>wt,jt:()=>n,pV:()=>it,F4:()=>D,IO:()=>bt,vP:()=>s,SB:()=>v,oB:()=>c,eR:()=>P,X$:()=>t,ZE:()=>Bt,k1:()=>Kt});class y{}class g{}const e="*";function t(It,St){return{type:7,name:It,definitions:St,options:{}}}function n(It,St=null){return{type:4,styles:St,timings:It}}function s(It,St=null){return{type:2,steps:It,options:St}}function c(It){return{type:6,styles:It,offset:null}}function v(It,St,lt){return{type:0,name:It,styles:St,options:lt}}function D(It){return{type:5,steps:It}}function P(It,St,lt=null){return{type:1,expr:It,animation:St,options:lt}}function it(It=null){return{type:9,options:It}}function bt(It,St,lt=null){return{type:11,selector:It,animation:St,options:lt}}function gt(It){Promise.resolve(null).then(It)}class wt{constructor(St=0,lt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=St+lt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(St=>St()),this._onDoneFns=[])}onStart(St){this._onStartFns.push(St)}onDone(St){this._onDoneFns.push(St)}onDestroy(St){this._onDestroyFns.push(St)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){gt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(St=>St()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(St=>St()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(St){this._position=this.totalTime?St*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(St){const lt="start"==St?this._onStartFns:this._onDoneFns;lt.forEach(ft=>ft()),lt.length=0}}class Bt{constructor(St){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=St;let lt=0,ft=0,ht=0;const Gt=this.players.length;0==Gt?gt(()=>this._onFinish()):this.players.forEach(ut=>{ut.onDone(()=>{++lt==Gt&&this._onFinish()}),ut.onDestroy(()=>{++ft==Gt&&this._onDestroy()}),ut.onStart(()=>{++ht==Gt&&this._onStart()})}),this.totalTime=this.players.reduce((ut,ot)=>Math.max(ut,ot.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(St=>St()),this._onDoneFns=[])}init(){this.players.forEach(St=>St.init())}onStart(St){this._onStartFns.push(St)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(St=>St()),this._onStartFns=[])}onDone(St){this._onDoneFns.push(St)}onDestroy(St){this._onDestroyFns.push(St)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(St=>St.play())}pause(){this.players.forEach(St=>St.pause())}restart(){this.players.forEach(St=>St.restart())}finish(){this._onFinish(),this.players.forEach(St=>St.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(St=>St.destroy()),this._onDestroyFns.forEach(St=>St()),this._onDestroyFns=[])}reset(){this.players.forEach(St=>St.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(St){const lt=St*this.totalTime;this.players.forEach(ft=>{const ht=ft.totalTime?Math.min(1,lt/ft.totalTime):1;ft.setPosition(ht)})}getPosition(){const St=this.players.reduce((lt,ft)=>null===lt||ft.totalTime>lt.totalTime?ft:lt,null);return null!=St?St.getPosition():0}beforeDestroy(){this.players.forEach(St=>{St.beforeDestroy&&St.beforeDestroy()})}triggerCallback(St){const lt="start"==St?this._onStartFns:this._onDoneFns;lt.forEach(ft=>ft()),lt.length=0}}const Kt="!"},15664:(H,W,f)=>{"use strict";f.d(W,{rt:()=>ge,s1:()=>At,kH:()=>Ce,Em:()=>re,tE:()=>vi,qV:()=>ye,qm:()=>ti,ic:()=>oe,Kd:()=>li,X6:()=>_e,yG:()=>be});var y=f(69808),g=f(5e3),e=f(77579),t=f(50727),n=f(61135),r=f(39646),s=f(91159),c=f(18505),v=f(78372),D=f(39300),P=f(54004),G=f(95698),it=f(35684),q=f(71884),bt=f(82722),Ft=f(63191),gt=f(70925),wt=f(17144);class vt{constructor(dt){this._items=dt,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new e.x,this._typeaheadSubscription=t.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=Nt=>Nt.disabled,this._pressedLetters=[],this.tabOut=new e.x,this.change=new e.x,dt instanceof g.n_E&&dt.changes.subscribe(Nt=>{if(this._activeItem){const Le=Nt.toArray().indexOf(this._activeItem);Le>-1&&Le!==this._activeItemIndex&&(this._activeItemIndex=Le)}})}skipPredicate(dt){return this._skipPredicateFn=dt,this}withWrap(dt=!0){return this._wrap=dt,this}withVerticalOrientation(dt=!0){return this._vertical=dt,this}withHorizontalOrientation(dt){return this._horizontal=dt,this}withAllowedModifierKeys(dt){return this._allowedModifierKeys=dt,this}withTypeAhead(dt=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,c.b)(Nt=>this._pressedLetters.push(Nt)),(0,v.b)(dt),(0,D.h)(()=>this._pressedLetters.length>0),(0,P.U)(()=>this._pressedLetters.join(""))).subscribe(Nt=>{const pe=this._getItemsArray();for(let Le=1;Le<pe.length+1;Le++){const Vi=(this._activeItemIndex+Le)%pe.length,Ki=pe[Vi];if(!this._skipPredicateFn(Ki)&&0===Ki.getLabel().toUpperCase().trim().indexOf(Nt)){this.setActiveItem(Vi);break}}this._pressedLetters=[]}),this}withHomeAndEnd(dt=!0){return this._homeAndEnd=dt,this}setActiveItem(dt){const Nt=this._activeItem;this.updateActiveItem(dt),this._activeItem!==Nt&&this.change.next(this._activeItemIndex)}onKeydown(dt){const Nt=dt.keyCode,Le=["altKey","ctrlKey","metaKey","shiftKey"].every(Vi=>!dt[Vi]||this._allowedModifierKeys.indexOf(Vi)>-1);switch(Nt){case s.Mf:return void this.tabOut.next();case s.JH:if(this._vertical&&Le){this.setNextItemActive();break}return;case s.LH:if(this._vertical&&Le){this.setPreviousItemActive();break}return;case s.SV:if(this._horizontal&&Le){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case s.oh:if(this._horizontal&&Le){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case s.Sd:if(this._homeAndEnd&&Le){this.setFirstItemActive();break}return;case s.uR:if(this._homeAndEnd&&Le){this.setLastItemActive();break}return;default:return void((Le||(0,s.Vb)(dt,"shiftKey"))&&(dt.key&&1===dt.key.length?this._letterKeyStream.next(dt.key.toLocaleUpperCase()):(Nt>=s.A&&Nt<=s.Z||Nt>=s.xE&&Nt<=s.aO)&&this._letterKeyStream.next(String.fromCharCode(Nt))))}this._pressedLetters=[],dt.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(dt){const Nt=this._getItemsArray(),pe="number"==typeof dt?dt:Nt.indexOf(dt),Le=Nt[pe];this._activeItem=null==Le?null:Le,this._activeItemIndex=pe}_setActiveItemByDelta(dt){this._wrap?this._setActiveInWrapMode(dt):this._setActiveInDefaultMode(dt)}_setActiveInWrapMode(dt){const Nt=this._getItemsArray();for(let pe=1;pe<=Nt.length;pe++){const Le=(this._activeItemIndex+dt*pe+Nt.length)%Nt.length;if(!this._skipPredicateFn(Nt[Le]))return void this.setActiveItem(Le)}}_setActiveInDefaultMode(dt){this._setActiveItemByIndex(this._activeItemIndex+dt,dt)}_setActiveItemByIndex(dt,Nt){const pe=this._getItemsArray();if(pe[dt]){for(;this._skipPredicateFn(pe[dt]);)if(!pe[dt+=Nt])return;this.setActiveItem(dt)}}_getItemsArray(){return this._items instanceof g.n_E?this._items.toArray():this._items}}class At extends vt{setActiveItem(dt){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(dt),this.activeItem&&this.activeItem.setActiveStyles()}}class re extends vt{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(dt){return this._origin=dt,this}setActiveItem(dt){super.setActiveItem(dt),this.activeItem&&this.activeItem.focus(this._origin)}}let oe=(()=>{class Pt{constructor(Nt){this._platform=Nt}isDisabled(Nt){return Nt.hasAttribute("disabled")}isVisible(Nt){return function(Pt){return!!(Pt.offsetWidth||Pt.offsetHeight||"function"==typeof Pt.getClientRects&&Pt.getClientRects().length)}(Nt)&&"visible"===getComputedStyle(Nt).visibility}isTabbable(Nt){if(!this._platform.isBrowser)return!1;const pe=function(Pt){try{return Pt.frameElement}catch(dt){return null}}(function(Pt){return Pt.ownerDocument&&Pt.ownerDocument.defaultView||window}(Nt));if(pe&&(-1===Ae(pe)||!this.isVisible(pe)))return!1;let Le=Nt.nodeName.toLowerCase(),Vi=Ae(Nt);return Nt.hasAttribute("contenteditable")?-1!==Vi:!("iframe"===Le||"object"===Le||this._platform.WEBKIT&&this._platform.IOS&&!function(Pt){let dt=Pt.nodeName.toLowerCase(),Nt="input"===dt&&Pt.type;return"text"===Nt||"password"===Nt||"select"===dt||"textarea"===dt}(Nt))&&("audio"===Le?!!Nt.hasAttribute("controls")&&-1!==Vi:"video"===Le?-1!==Vi&&(null!==Vi||this._platform.FIREFOX||Nt.hasAttribute("controls")):Nt.tabIndex>=0)}isFocusable(Nt,pe){return function(Pt){return!function(Pt){return function(Pt){return"input"==Pt.nodeName.toLowerCase()}(Pt)&&"hidden"==Pt.type}(Pt)&&(function(Pt){let dt=Pt.nodeName.toLowerCase();return"input"===dt||"select"===dt||"button"===dt||"textarea"===dt}(Pt)||function(Pt){return function(Pt){return"a"==Pt.nodeName.toLowerCase()}(Pt)&&Pt.hasAttribute("href")}(Pt)||Pt.hasAttribute("contenteditable")||Wt(Pt))}(Nt)&&!this.isDisabled(Nt)&&((null==pe?void 0:pe.ignoreVisibility)||this.isVisible(Nt))}}return Pt.\u0275fac=function(Nt){return new(Nt||Pt)(g.LFG(gt.t4))},Pt.\u0275prov=g.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();function Wt(Pt){if(!Pt.hasAttribute("tabindex")||void 0===Pt.tabIndex)return!1;let dt=Pt.getAttribute("tabindex");return!(!dt||isNaN(parseInt(dt,10)))}function Ae(Pt){if(!Wt(Pt))return null;const dt=parseInt(Pt.getAttribute("tabindex")||"",10);return isNaN(dt)?-1:dt}class Yt{constructor(dt,Nt,pe,Le,Vi=!1){this._element=dt,this._checker=Nt,this._ngZone=pe,this._document=Le,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Vi||this.attachAnchors()}get enabled(){return this._enabled}set enabled(dt){this._enabled=dt,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(dt,this._startAnchor),this._toggleAnchorTabIndex(dt,this._endAnchor))}destroy(){const dt=this._startAnchor,Nt=this._endAnchor;dt&&(dt.removeEventListener("focus",this.startAnchorListener),dt.remove()),Nt&&(Nt.removeEventListener("focus",this.endAnchorListener),Nt.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(dt){return new Promise(Nt=>{this._executeOnStable(()=>Nt(this.focusInitialElement(dt)))})}focusFirstTabbableElementWhenReady(dt){return new Promise(Nt=>{this._executeOnStable(()=>Nt(this.focusFirstTabbableElement(dt)))})}focusLastTabbableElementWhenReady(dt){return new Promise(Nt=>{this._executeOnStable(()=>Nt(this.focusLastTabbableElement(dt)))})}_getRegionBoundary(dt){const Nt=this._element.querySelectorAll(`[cdk-focus-region-${dt}], [cdkFocusRegion${dt}], [cdk-focus-${dt}]`);return"start"==dt?Nt.length?Nt[0]:this._getFirstTabbableElement(this._element):Nt.length?Nt[Nt.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(dt){const Nt=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(Nt){if(!this._checker.isFocusable(Nt)){const pe=this._getFirstTabbableElement(Nt);return null==pe||pe.focus(dt),!!pe}return Nt.focus(dt),!0}return this.focusFirstTabbableElement(dt)}focusFirstTabbableElement(dt){const Nt=this._getRegionBoundary("start");return Nt&&Nt.focus(dt),!!Nt}focusLastTabbableElement(dt){const Nt=this._getRegionBoundary("end");return Nt&&Nt.focus(dt),!!Nt}hasAttached(){return this._hasAttached}_getFirstTabbableElement(dt){if(this._checker.isFocusable(dt)&&this._checker.isTabbable(dt))return dt;const Nt=dt.children;for(let pe=0;pe<Nt.length;pe++){const Le=Nt[pe].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(Nt[pe]):null;if(Le)return Le}return null}_getLastTabbableElement(dt){if(this._checker.isFocusable(dt)&&this._checker.isTabbable(dt))return dt;const Nt=dt.children;for(let pe=Nt.length-1;pe>=0;pe--){const Le=Nt[pe].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(Nt[pe]):null;if(Le)return Le}return null}_createAnchor(){const dt=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,dt),dt.classList.add("cdk-visually-hidden"),dt.classList.add("cdk-focus-trap-anchor"),dt.setAttribute("aria-hidden","true"),dt}_toggleAnchorTabIndex(dt,Nt){dt?Nt.setAttribute("tabindex","0"):Nt.removeAttribute("tabindex")}toggleAnchors(dt){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(dt,this._startAnchor),this._toggleAnchorTabIndex(dt,this._endAnchor))}_executeOnStable(dt){this._ngZone.isStable?dt():this._ngZone.onStable.pipe((0,G.q)(1)).subscribe(dt)}}let ye=(()=>{class Pt{constructor(Nt,pe,Le){this._checker=Nt,this._ngZone=pe,this._document=Le}create(Nt,pe=!1){return new Yt(Nt,this._checker,this._ngZone,this._document,pe)}}return Pt.\u0275fac=function(Nt){return new(Nt||Pt)(g.LFG(oe),g.LFG(g.R0b),g.LFG(y.K0))},Pt.\u0275prov=g.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();function _e(Pt){return 0===Pt.offsetX&&0===Pt.offsetY}function be(Pt){const dt=Pt.touches&&Pt.touches[0]||Pt.changedTouches&&Pt.changedTouches[0];return!(!dt||-1!==dt.identifier||null!=dt.radiusX&&1!==dt.radiusX||null!=dt.radiusY&&1!==dt.radiusY)}const Dt=new g.OlP("cdk-input-modality-detector-options"),zt={ignoreKeys:[s.zL,s.jx,s.b2,s.MW,s.JU]},Xe=(0,gt.i$)({passive:!0,capture:!0});let Ri=(()=>{class Pt{constructor(Nt,pe,Le,Vi){this._platform=Nt,this._mostRecentTarget=null,this._modality=new n.X(null),this._lastTouchMs=0,this._onKeydown=Ki=>{var Sn,ir;(null===(ir=null===(Sn=this._options)||void 0===Sn?void 0:Sn.ignoreKeys)||void 0===ir?void 0:ir.some(pi=>pi===Ki.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,gt.sA)(Ki))},this._onMousedown=Ki=>{Date.now()-this._lastTouchMs<650||(this._modality.next(_e(Ki)?"keyboard":"mouse"),this._mostRecentTarget=(0,gt.sA)(Ki))},this._onTouchstart=Ki=>{be(Ki)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,gt.sA)(Ki))},this._options=Object.assign(Object.assign({},zt),Vi),this.modalityDetected=this._modality.pipe((0,it.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,q.x)()),Nt.isBrowser&&pe.runOutsideAngular(()=>{Le.addEventListener("keydown",this._onKeydown,Xe),Le.addEventListener("mousedown",this._onMousedown,Xe),Le.addEventListener("touchstart",this._onTouchstart,Xe)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Xe),document.removeEventListener("mousedown",this._onMousedown,Xe),document.removeEventListener("touchstart",this._onTouchstart,Xe))}}return Pt.\u0275fac=function(Nt){return new(Nt||Pt)(g.LFG(gt.t4),g.LFG(g.R0b),g.LFG(y.K0),g.LFG(Dt,8))},Pt.\u0275prov=g.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();const bi=new g.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),on=new g.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let li=(()=>{class Pt{constructor(Nt,pe,Le,Vi){this._ngZone=pe,this._defaultOptions=Vi,this._document=Le,this._liveElement=Nt||this._createLiveElement()}announce(Nt,...pe){const Le=this._defaultOptions;let Vi,Ki;return 1===pe.length&&"number"==typeof pe[0]?Ki=pe[0]:[Vi,Ki]=pe,this.clear(),clearTimeout(this._previousTimeout),Vi||(Vi=Le&&Le.politeness?Le.politeness:"polite"),null==Ki&&Le&&(Ki=Le.duration),this._liveElement.setAttribute("aria-live",Vi),this._ngZone.runOutsideAngular(()=>new Promise(Sn=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=Nt,Sn(),"number"==typeof Ki&&(this._previousTimeout=setTimeout(()=>this.clear(),Ki))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var Nt;clearTimeout(this._previousTimeout),null===(Nt=this._liveElement)||void 0===Nt||Nt.remove(),this._liveElement=null}_createLiveElement(){const Nt="cdk-live-announcer-element",pe=this._document.getElementsByClassName(Nt),Le=this._document.createElement("div");for(let Vi=0;Vi<pe.length;Vi++)pe[Vi].remove();return Le.classList.add(Nt),Le.classList.add("cdk-visually-hidden"),Le.setAttribute("aria-atomic","true"),Le.setAttribute("aria-live","polite"),this._document.body.appendChild(Le),Le}}return Pt.\u0275fac=function(Nt){return new(Nt||Pt)(g.LFG(bi,8),g.LFG(g.R0b),g.LFG(y.K0),g.LFG(on,8))},Pt.\u0275prov=g.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})();const Ii=new g.OlP("cdk-focus-monitor-default-options"),ni=(0,gt.i$)({passive:!0,capture:!0});let vi=(()=>{class Pt{constructor(Nt,pe,Le,Vi,Ki){this._ngZone=Nt,this._platform=pe,this._inputModalityDetector=Le,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new e.x,this._rootNodeFocusAndBlurListener=Sn=>{const ir=(0,gt.sA)(Sn),pi="focus"===Sn.type?this._onFocus:this._onBlur;for(let Ke=ir;Ke;Ke=Ke.parentElement)pi.call(this,Sn,Ke)},this._document=Vi,this._detectionMode=(null==Ki?void 0:Ki.detectionMode)||0}monitor(Nt,pe=!1){const Le=(0,Ft.fI)(Nt);if(!this._platform.isBrowser||1!==Le.nodeType)return(0,r.of)(null);const Vi=(0,gt.kV)(Le)||this._getDocument(),Ki=this._elementInfo.get(Le);if(Ki)return pe&&(Ki.checkChildren=!0),Ki.subject;const Sn={checkChildren:pe,subject:new e.x,rootNode:Vi};return this._elementInfo.set(Le,Sn),this._registerGlobalListeners(Sn),Sn.subject}stopMonitoring(Nt){const pe=(0,Ft.fI)(Nt),Le=this._elementInfo.get(pe);Le&&(Le.subject.complete(),this._setClasses(pe),this._elementInfo.delete(pe),this._removeGlobalListeners(Le))}focusVia(Nt,pe,Le){const Vi=(0,Ft.fI)(Nt);Vi===this._getDocument().activeElement?this._getClosestElementsInfo(Vi).forEach(([Sn,ir])=>this._originChanged(Sn,pe,ir)):(this._setOrigin(pe),"function"==typeof Vi.focus&&Vi.focus(Le))}ngOnDestroy(){this._elementInfo.forEach((Nt,pe)=>this.stopMonitoring(pe))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(Nt){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(Nt)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(Nt){return 1===this._detectionMode||!!(null==Nt?void 0:Nt.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(Nt,pe){Nt.classList.toggle("cdk-focused",!!pe),Nt.classList.toggle("cdk-touch-focused","touch"===pe),Nt.classList.toggle("cdk-keyboard-focused","keyboard"===pe),Nt.classList.toggle("cdk-mouse-focused","mouse"===pe),Nt.classList.toggle("cdk-program-focused","program"===pe)}_setOrigin(Nt,pe=!1){this._ngZone.runOutsideAngular(()=>{this._origin=Nt,this._originFromTouchInteraction="touch"===Nt&&pe,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(Nt,pe){const Le=this._elementInfo.get(pe),Vi=(0,gt.sA)(Nt);!Le||!Le.checkChildren&&pe!==Vi||this._originChanged(pe,this._getFocusOrigin(Vi),Le)}_onBlur(Nt,pe){const Le=this._elementInfo.get(pe);!Le||Le.checkChildren&&Nt.relatedTarget instanceof Node&&pe.contains(Nt.relatedTarget)||(this._setClasses(pe),this._emitOrigin(Le.subject,null))}_emitOrigin(Nt,pe){this._ngZone.run(()=>Nt.next(pe))}_registerGlobalListeners(Nt){if(!this._platform.isBrowser)return;const pe=Nt.rootNode,Le=this._rootNodeFocusListenerCount.get(pe)||0;Le||this._ngZone.runOutsideAngular(()=>{pe.addEventListener("focus",this._rootNodeFocusAndBlurListener,ni),pe.addEventListener("blur",this._rootNodeFocusAndBlurListener,ni)}),this._rootNodeFocusListenerCount.set(pe,Le+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,bt.R)(this._stopInputModalityDetector)).subscribe(Vi=>{this._setOrigin(Vi,!0)}))}_removeGlobalListeners(Nt){const pe=Nt.rootNode;if(this._rootNodeFocusListenerCount.has(pe)){const Le=this._rootNodeFocusListenerCount.get(pe);Le>1?this._rootNodeFocusListenerCount.set(pe,Le-1):(pe.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ni),pe.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ni),this._rootNodeFocusListenerCount.delete(pe))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(Nt,pe,Le){this._setClasses(Nt,pe),this._emitOrigin(Le.subject,pe),this._lastFocusOrigin=pe}_getClosestElementsInfo(Nt){const pe=[];return this._elementInfo.forEach((Le,Vi)=>{(Vi===Nt||Le.checkChildren&&Vi.contains(Nt))&&pe.push([Vi,Le])}),pe}}return Pt.\u0275fac=function(Nt){return new(Nt||Pt)(g.LFG(g.R0b),g.LFG(gt.t4),g.LFG(Ri),g.LFG(y.K0,8),g.LFG(Ii,8))},Pt.\u0275prov=g.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})(),Ce=(()=>{class Pt{constructor(Nt,pe){this._elementRef=Nt,this._focusMonitor=pe,this.cdkFocusChange=new g.vpe}ngAfterViewInit(){const Nt=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(Nt,1===Nt.nodeType&&Nt.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(pe=>this.cdkFocusChange.emit(pe))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return Pt.\u0275fac=function(Nt){return new(Nt||Pt)(g.Y36(g.SBq),g.Y36(vi))},Pt.\u0275dir=g.lG2({type:Pt,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),Pt})();const Qe="cdk-high-contrast-black-on-white",Ei="cdk-high-contrast-white-on-black",Pi="cdk-high-contrast-active";let ti=(()=>{class Pt{constructor(Nt,pe){this._platform=Nt,this._document=pe}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const Nt=this._document.createElement("div");Nt.style.backgroundColor="rgb(1,2,3)",Nt.style.position="absolute",this._document.body.appendChild(Nt);const pe=this._document.defaultView||window,Le=pe&&pe.getComputedStyle?pe.getComputedStyle(Nt):null,Vi=(Le&&Le.backgroundColor||"").replace(/ /g,"");switch(Nt.remove(),Vi){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const Nt=this._document.body.classList;Nt.remove(Pi),Nt.remove(Qe),Nt.remove(Ei),this._hasCheckedHighContrastMode=!0;const pe=this.getHighContrastMode();1===pe?(Nt.add(Pi),Nt.add(Qe)):2===pe&&(Nt.add(Pi),Nt.add(Ei))}}}return Pt.\u0275fac=function(Nt){return new(Nt||Pt)(g.LFG(gt.t4),g.LFG(y.K0))},Pt.\u0275prov=g.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt})(),ge=(()=>{class Pt{constructor(Nt){Nt._applyBodyHighContrastModeCssClasses()}}return Pt.\u0275fac=function(Nt){return new(Nt||Pt)(g.LFG(ti))},Pt.\u0275mod=g.oAB({type:Pt}),Pt.\u0275inj=g.cJS({imports:[[gt.ud,wt.Q8]]}),Pt})()},50226:(H,W,f)=>{"use strict";f.d(W,{vT:()=>v,Is:()=>s});var y=f(5e3),g=f(69808);const e=new y.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,y.f3M)(g.K0)}}),n=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let s=(()=>{class D{constructor(G){if(this.value="ltr",this.change=new y.vpe,G){const q=G.documentElement?G.documentElement.dir:null;this.value=function(D){const P=(null==D?void 0:D.toLowerCase())||"";return"auto"===P&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?n.test(navigator.language)?"rtl":"ltr":"rtl"===P?"rtl":"ltr"}((G.body?G.body.dir:null)||q||"ltr")}}ngOnDestroy(){this.change.complete()}}return D.\u0275fac=function(G){return new(G||D)(y.LFG(e,8))},D.\u0275prov=y.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})(),v=(()=>{class D{}return D.\u0275fac=function(G){return new(G||D)},D.\u0275mod=y.oAB({type:D}),D.\u0275inj=y.cJS({}),D})()},63191:(H,W,f)=>{"use strict";f.d(W,{Eq:()=>n,Ig:()=>g,HM:()=>r,fI:()=>s,su:()=>e,du:()=>c});var y=f(5e3);function g(v){return null!=v&&"false"!=`${v}`}function e(v,D=0){return function(v){return!isNaN(parseFloat(v))&&!isNaN(Number(v))}(v)?Number(v):D}function n(v){return Array.isArray(v)?v:[v]}function r(v){return null==v?"":"string"==typeof v?v:`${v}px`}function s(v){return v instanceof y.SBq?v.nativeElement:v}function c(v,D=/\s+/){const P=[];if(null!=v){const G=Array.isArray(v)?v:`${v}`.split(D);for(const it of G){const q=`${it}`.trim();q&&P.push(q)}}return P}},20449:(H,W,f)=>{"use strict";f.d(W,{Ov:()=>c,A8:()=>D,yy:()=>r,eX:()=>s,k:()=>P,Z9:()=>t});var y=f(77579),g=f(5e3);function t(G){return G&&"function"==typeof G.connect}class r{applyChanges(it,q,bt,Ft,gt){it.forEachOperation((wt,Bt,Kt)=>{let It,St;if(null==wt.previousIndex){const lt=bt(wt,Bt,Kt);It=q.createEmbeddedView(lt.templateRef,lt.context,lt.index),St=1}else null==Kt?(q.remove(Bt),St=3):(It=q.get(Bt),q.move(It,Kt),St=2);gt&&gt({context:null==It?void 0:It.context,operation:St,record:wt})})}detach(){}}class s{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(it,q,bt,Ft,gt){it.forEachOperation((wt,Bt,Kt)=>{let It,St;null==wt.previousIndex?(It=this._insertView(()=>bt(wt,Bt,Kt),Kt,q,Ft(wt)),St=It?1:0):null==Kt?(this._detachAndCacheView(Bt,q),St=3):(It=this._moveView(Bt,Kt,q,Ft(wt)),St=2),gt&&gt({context:null==It?void 0:It.context,operation:St,record:wt})})}detach(){for(const it of this._viewCache)it.destroy();this._viewCache=[]}_insertView(it,q,bt,Ft){const gt=this._insertViewFromCache(q,bt);if(gt)return void(gt.context.$implicit=Ft);const wt=it();return bt.createEmbeddedView(wt.templateRef,wt.context,wt.index)}_detachAndCacheView(it,q){const bt=q.detach(it);this._maybeCacheView(bt,q)}_moveView(it,q,bt,Ft){const gt=bt.get(it);return bt.move(gt,q),gt.context.$implicit=Ft,gt}_maybeCacheView(it,q){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(it);else{const bt=q.indexOf(it);-1===bt?it.destroy():q.remove(bt)}}_insertViewFromCache(it,q){const bt=this._viewCache.pop();return bt&&q.insert(bt,it),bt||null}}class c{constructor(it=!1,q,bt=!0){this._multiple=it,this._emitChanges=bt,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new y.x,q&&q.length&&(it?q.forEach(Ft=>this._markSelected(Ft)):this._markSelected(q[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...it){this._verifyValueAssignment(it),it.forEach(q=>this._markSelected(q)),this._emitChangeEvent()}deselect(...it){this._verifyValueAssignment(it),it.forEach(q=>this._unmarkSelected(q)),this._emitChangeEvent()}toggle(it){this.isSelected(it)?this.deselect(it):this.select(it)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(it){return this._selection.has(it)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(it){this._multiple&&this.selected&&this._selected.sort(it)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(it){this.isSelected(it)||(this._multiple||this._unmarkAll(),this._selection.add(it),this._emitChanges&&this._selectedToEmit.push(it))}_unmarkSelected(it){this.isSelected(it)&&(this._selection.delete(it),this._emitChanges&&this._deselectedToEmit.push(it))}_unmarkAll(){this.isEmpty()||this._selection.forEach(it=>this._unmarkSelected(it))}_verifyValueAssignment(it){}}let D=(()=>{class G{constructor(){this._listeners=[]}notify(q,bt){for(let Ft of this._listeners)Ft(q,bt)}listen(q){return this._listeners.push(q),()=>{this._listeners=this._listeners.filter(bt=>q!==bt)}}ngOnDestroy(){this._listeners=[]}}return G.\u0275fac=function(q){return new(q||G)},G.\u0275prov=g.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"}),G})();const P=new g.OlP("_ViewRepeater")},91159:(H,W,f)=>{"use strict";f.d(W,{A:()=>je,zL:()=>c,ZH:()=>g,jx:()=>s,yY:()=>ft,JH:()=>Kt,uR:()=>bt,K5:()=>n,hY:()=>P,Sd:()=>Ft,oh:()=>gt,b2:()=>Qn,MW:()=>mi,aO:()=>re,VM:()=>q,Ku:()=>it,SV:()=>Bt,JU:()=>r,L_:()=>G,Mf:()=>e,LH:()=>wt,Z:()=>bi,xE:()=>ht,Vb:()=>qn});const g=8,e=9,n=13,r=16,s=17,c=18,P=27,G=32,it=33,q=34,bt=35,Ft=36,gt=37,wt=38,Bt=39,Kt=40,ft=46,ht=48,re=57,je=65,bi=90,mi=91,Qn=224;function qn(Jn,...Tn){return Tn.length?Tn.some(Jo=>Jn[Jo]):Jn.altKey||Jn.shiftKey||Jn.ctrlKey||Jn.metaKey}},95113:(H,W,f)=>{"use strict";f.d(W,{Yg:()=>Kt,u3:()=>St});var y=f(5e3),g=f(63191),e=f(77579),t=f(39841),n=f(97272),r=f(79307),s=f(95698),c=f(35684),v=f(78372),D=f(54004),P=f(68675),G=f(82722),it=f(70925);const bt=new Set;let Ft,gt=(()=>{class lt{constructor(ht){this._platform=ht,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Bt}matchMedia(ht){return(this._platform.WEBKIT||this._platform.BLINK)&&function(lt){if(!bt.has(lt))try{Ft||(Ft=document.createElement("style"),Ft.setAttribute("type","text/css"),document.head.appendChild(Ft)),Ft.sheet&&(Ft.sheet.insertRule(`@media ${lt} {body{ }}`,0),bt.add(lt))}catch(ft){console.error(ft)}}(ht),this._matchMedia(ht)}}return lt.\u0275fac=function(ht){return new(ht||lt)(y.LFG(it.t4))},lt.\u0275prov=y.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})();function Bt(lt){return{matches:"all"===lt||""===lt,media:lt,addListener:()=>{},removeListener:()=>{}}}let Kt=(()=>{class lt{constructor(ht,Gt){this._mediaMatcher=ht,this._zone=Gt,this._queries=new Map,this._destroySubject=new e.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(ht){return It((0,g.Eq)(ht)).some(ut=>this._registerQuery(ut).mql.matches)}observe(ht){const ut=It((0,g.Eq)(ht)).map(st=>this._registerQuery(st).observable);let ot=(0,t.a)(ut);return ot=(0,n.z)(ot.pipe((0,s.q)(1)),ot.pipe((0,c.T)(1),(0,v.b)(0))),ot.pipe((0,D.U)(st=>{const Z={matches:!1,breakpoints:{}};return st.forEach(({matches:Zt,query:vt})=>{Z.matches=Z.matches||Zt,Z.breakpoints[vt]=Zt}),Z}))}_registerQuery(ht){if(this._queries.has(ht))return this._queries.get(ht);const Gt=this._mediaMatcher.matchMedia(ht),ot={observable:new r.y(st=>{const Z=Zt=>this._zone.run(()=>st.next(Zt));return Gt.addListener(Z),()=>{Gt.removeListener(Z)}}).pipe((0,P.O)(Gt),(0,D.U)(({matches:st})=>({query:ht,matches:st})),(0,G.R)(this._destroySubject)),mql:Gt};return this._queries.set(ht,ot),ot}}return lt.\u0275fac=function(ht){return new(ht||lt)(y.LFG(gt),y.LFG(y.R0b))},lt.\u0275prov=y.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})();function It(lt){return lt.map(ft=>ft.split(",")).reduce((ft,ht)=>ft.concat(ht)).map(ft=>ft.trim())}const St={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},17144:(H,W,f)=>{"use strict";f.d(W,{wD:()=>c,Q8:()=>v});var y=f(63191),g=f(5e3),e=f(79307),t=f(77579),n=f(78372);let r=(()=>{class D{create(G){return"undefined"==typeof MutationObserver?null:new MutationObserver(G)}}return D.\u0275fac=function(G){return new(G||D)},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})(),s=(()=>{class D{constructor(G){this._mutationObserverFactory=G,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((G,it)=>this._cleanupObserver(it))}observe(G){const it=(0,y.fI)(G);return new e.y(q=>{const Ft=this._observeElement(it).subscribe(q);return()=>{Ft.unsubscribe(),this._unobserveElement(it)}})}_observeElement(G){if(this._observedElements.has(G))this._observedElements.get(G).count++;else{const it=new t.x,q=this._mutationObserverFactory.create(bt=>it.next(bt));q&&q.observe(G,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(G,{observer:q,stream:it,count:1})}return this._observedElements.get(G).stream}_unobserveElement(G){this._observedElements.has(G)&&(this._observedElements.get(G).count--,this._observedElements.get(G).count||this._cleanupObserver(G))}_cleanupObserver(G){if(this._observedElements.has(G)){const{observer:it,stream:q}=this._observedElements.get(G);it&&it.disconnect(),q.complete(),this._observedElements.delete(G)}}}return D.\u0275fac=function(G){return new(G||D)(g.LFG(r))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})(),c=(()=>{class D{constructor(G,it,q){this._contentObserver=G,this._elementRef=it,this._ngZone=q,this.event=new g.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(G){this._disabled=(0,y.Ig)(G),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(G){this._debounce=(0,y.su)(G),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const G=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?G.pipe((0,n.b)(this.debounce)):G).subscribe(this.event)})}_unsubscribe(){var G;null===(G=this._currentSubscription)||void 0===G||G.unsubscribe()}}return D.\u0275fac=function(G){return new(G||D)(g.Y36(s),g.Y36(g.SBq),g.Y36(g.R0b))},D.\u0275dir=g.lG2({type:D,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),D})(),v=(()=>{class D{}return D.\u0275fac=function(G){return new(G||D)},D.\u0275mod=g.oAB({type:D}),D.\u0275inj=g.cJS({providers:[r]}),D})()},91314:(H,W,f)=>{"use strict";f.d(W,{aV:()=>ci,X_:()=>St,Xj:()=>st,U8:()=>ye});var y=f(30495),g=f(69808),e=f(5e3),t=f(63191),n=f(70925),r=f(50226),s=f(99129),c=f(77579),v=f(50727),D=f(56451),P=f(95698),G=f(82722);const it=(0,n.Mq)();class q{constructor(ce,te){this._viewportRuler=ce,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=te}attach(){}enable(){if(this._canBeEnabled()){const ce=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=ce.style.left||"",this._previousHTMLStyles.top=ce.style.top||"",ce.style.left=(0,t.HM)(-this._previousScrollPosition.left),ce.style.top=(0,t.HM)(-this._previousScrollPosition.top),ce.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const ce=this._document.documentElement,Me=ce.style,ue=this._document.body.style,_e=Me.scrollBehavior||"",be=ue.scrollBehavior||"";this._isEnabled=!1,Me.left=this._previousHTMLStyles.left,Me.top=this._previousHTMLStyles.top,ce.classList.remove("cdk-global-scrollblock"),it&&(Me.scrollBehavior=ue.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),it&&(Me.scrollBehavior=_e,ue.scrollBehavior=be)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const te=this._document.body,Me=this._viewportRuler.getViewportSize();return te.scrollHeight>Me.height||te.scrollWidth>Me.width}}class Ft{constructor(ce,te,Me,ue){this._scrollDispatcher=ce,this._ngZone=te,this._viewportRuler=Me,this._config=ue,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(ce){this._overlayRef=ce}enable(){if(this._scrollSubscription)return;const ce=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=ce.subscribe(()=>{const te=this._viewportRuler.getViewportScrollPosition().top;Math.abs(te-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=ce.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class gt{enable(){}disable(){}attach(){}}function wt(Te,ce){return ce.some(te=>Te.bottom<te.top||Te.top>te.bottom||Te.right<te.left||Te.left>te.right)}function Bt(Te,ce){return ce.some(te=>Te.top<te.top||Te.bottom>te.bottom||Te.left<te.left||Te.right>te.right)}class Kt{constructor(ce,te,Me,ue){this._scrollDispatcher=ce,this._viewportRuler=te,this._ngZone=Me,this._config=ue,this._scrollSubscription=null}attach(ce){this._overlayRef=ce}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const te=this._overlayRef.overlayElement.getBoundingClientRect(),{width:Me,height:ue}=this._viewportRuler.getViewportSize();wt(te,[{width:Me,height:ue,bottom:ue,right:Me,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let It=(()=>{class Te{constructor(te,Me,ue,_e){this._scrollDispatcher=te,this._viewportRuler=Me,this._ngZone=ue,this.noop=()=>new gt,this.close=be=>new Ft(this._scrollDispatcher,this._ngZone,this._viewportRuler,be),this.block=()=>new q(this._viewportRuler,this._document),this.reposition=be=>new Kt(this._scrollDispatcher,this._viewportRuler,this._ngZone,be),this._document=_e}}return Te.\u0275fac=function(te){return new(te||Te)(e.LFG(y.mF),e.LFG(y.rL),e.LFG(e.R0b),e.LFG(g.K0))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})();class St{constructor(ce){if(this.scrollStrategy=new gt,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,ce){const te=Object.keys(ce);for(const Me of te)void 0!==ce[Me]&&(this[Me]=ce[Me])}}}class ht{constructor(ce,te){this.connectionPair=ce,this.scrollableViewProperties=te}}class ot{constructor(ce,te,Me,ue,_e,be,Dt,zt,Ge){this._portalOutlet=ce,this._host=te,this._pane=Me,this._config=ue,this._ngZone=_e,this._keyboardDispatcher=be,this._document=Dt,this._location=zt,this._outsideClickDispatcher=Ge,this._backdropElement=null,this._backdropClick=new c.x,this._attachments=new c.x,this._detachments=new c.x,this._locationChanges=v.w0.EMPTY,this._backdropClickHandler=Xe=>this._backdropClick.next(Xe),this._keydownEvents=new c.x,this._outsidePointerEvents=new c.x,ue.scrollStrategy&&(this._scrollStrategy=ue.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=ue.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(ce){let te=this._portalOutlet.attach(ce);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,P.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),te}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const ce=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),ce}dispose(){var ce;const te=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(ce=this._host)||void 0===ce||ce.remove(),this._previousHostParent=this._pane=this._host=null,te&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(ce){ce!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=ce,this.hasAttached()&&(ce.attach(this),this.updatePosition()))}updateSize(ce){this._config=Object.assign(Object.assign({},this._config),ce),this._updateElementSize()}setDirection(ce){this._config=Object.assign(Object.assign({},this._config),{direction:ce}),this._updateElementDirection()}addPanelClass(ce){this._pane&&this._toggleClasses(this._pane,ce,!0)}removePanelClass(ce){this._pane&&this._toggleClasses(this._pane,ce,!1)}getDirection(){const ce=this._config.direction;return ce?"string"==typeof ce?ce:ce.value:"ltr"}updateScrollStrategy(ce){ce!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=ce,this.hasAttached()&&(ce.attach(this),ce.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const ce=this._pane.style;ce.width=(0,t.HM)(this._config.width),ce.height=(0,t.HM)(this._config.height),ce.minWidth=(0,t.HM)(this._config.minWidth),ce.minHeight=(0,t.HM)(this._config.minHeight),ce.maxWidth=(0,t.HM)(this._config.maxWidth),ce.maxHeight=(0,t.HM)(this._config.maxHeight)}_togglePointerEvents(ce){this._pane.style.pointerEvents=ce?"":"none"}_attachBackdrop(){const ce="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(ce)})}):this._backdropElement.classList.add(ce)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const ce=this._backdropElement;if(!ce)return;let te;const Me=()=>{ce&&(ce.removeEventListener("click",this._backdropClickHandler),ce.removeEventListener("transitionend",Me),this._disposeBackdrop(ce)),this._config.backdropClass&&this._toggleClasses(ce,this._config.backdropClass,!1),clearTimeout(te)};ce.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{ce.addEventListener("transitionend",Me)}),ce.style.pointerEvents="none",te=this._ngZone.runOutsideAngular(()=>setTimeout(Me,500))}_toggleClasses(ce,te,Me){const ue=(0,t.Eq)(te||[]).filter(_e=>!!_e);ue.length&&(Me?ce.classList.add(...ue):ce.classList.remove(...ue))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const ce=this._ngZone.onStable.pipe((0,G.R)((0,D.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),ce.unsubscribe())})})}_disposeScrollStrategy(){const ce=this._scrollStrategy;ce&&(ce.disable(),ce.detach&&ce.detach())}_disposeBackdrop(ce){ce&&(ce.remove(),this._backdropElement===ce&&(this._backdropElement=null))}}let st=(()=>{class Te{constructor(te,Me){this._platform=Me,this._document=te}ngOnDestroy(){var te;null===(te=this._containerElement)||void 0===te||te.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const te="cdk-overlay-container";if(this._platform.isBrowser||(0,n.Oy)()){const ue=this._document.querySelectorAll(`.${te}[platform="server"], .${te}[platform="test"]`);for(let _e=0;_e<ue.length;_e++)ue[_e].remove()}const Me=this._document.createElement("div");Me.classList.add(te),(0,n.Oy)()?Me.setAttribute("platform","test"):this._platform.isBrowser||Me.setAttribute("platform","server"),this._document.body.appendChild(Me),this._containerElement=Me}}return Te.\u0275fac=function(te){return new(te||Te)(e.LFG(g.K0),e.LFG(n.t4))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})();const Z="cdk-overlay-connected-position-bounding-box",Zt=/([A-Za-z%]+)$/;class vt{constructor(ce,te,Me,ue,_e){this._viewportRuler=te,this._document=Me,this._platform=ue,this._overlayContainer=_e,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new c.x,this._resizeSubscription=v.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(ce)}get positions(){return this._preferredPositions}attach(ce){this._validatePositions(),ce.hostElement.classList.add(Z),this._overlayRef=ce,this._boundingBox=ce.hostElement,this._pane=ce.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const ce=this._originRect,te=this._overlayRect,Me=this._viewportRect,ue=[];let _e;for(let be of this._preferredPositions){let Dt=this._getOriginPoint(ce,be),zt=this._getOverlayPoint(Dt,te,be),Ge=this._getOverlayFit(zt,te,Me,be);if(Ge.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(be,Dt);this._canFitWithFlexibleDimensions(Ge,zt,Me)?ue.push({position:be,origin:Dt,overlayRect:te,boundingBoxRect:this._calculateBoundingBoxRect(Dt,be)}):(!_e||_e.overlayFit.visibleArea<Ge.visibleArea)&&(_e={overlayFit:Ge,overlayPoint:zt,originPoint:Dt,position:be,overlayRect:te})}if(ue.length){let be=null,Dt=-1;for(const zt of ue){const Ge=zt.boundingBoxRect.width*zt.boundingBoxRect.height*(zt.position.weight||1);Ge>Dt&&(Dt=Ge,be=zt)}return this._isPushed=!1,void this._applyPosition(be.position,be.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(_e.position,_e.originPoint);this._applyPosition(_e.position,_e.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&At(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Z),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const ce=this._lastPosition||this._preferredPositions[0],te=this._getOriginPoint(this._originRect,ce);this._applyPosition(ce,te)}}withScrollableContainers(ce){return this._scrollables=ce,this}withPositions(ce){return this._preferredPositions=ce,-1===ce.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(ce){return this._viewportMargin=ce,this}withFlexibleDimensions(ce=!0){return this._hasFlexibleDimensions=ce,this}withGrowAfterOpen(ce=!0){return this._growAfterOpen=ce,this}withPush(ce=!0){return this._canPush=ce,this}withLockedPosition(ce=!0){return this._positionLocked=ce,this}setOrigin(ce){return this._origin=ce,this}withDefaultOffsetX(ce){return this._offsetX=ce,this}withDefaultOffsetY(ce){return this._offsetY=ce,this}withTransformOriginOn(ce){return this._transformOriginSelector=ce,this}_getOriginPoint(ce,te){let Me,ue;if("center"==te.originX)Me=ce.left+ce.width/2;else{const _e=this._isRtl()?ce.right:ce.left,be=this._isRtl()?ce.left:ce.right;Me="start"==te.originX?_e:be}return ue="center"==te.originY?ce.top+ce.height/2:"top"==te.originY?ce.top:ce.bottom,{x:Me,y:ue}}_getOverlayPoint(ce,te,Me){let ue,_e;return ue="center"==Me.overlayX?-te.width/2:"start"===Me.overlayX?this._isRtl()?-te.width:0:this._isRtl()?0:-te.width,_e="center"==Me.overlayY?-te.height/2:"top"==Me.overlayY?0:-te.height,{x:ce.x+ue,y:ce.y+_e}}_getOverlayFit(ce,te,Me,ue){const _e=ve(te);let{x:be,y:Dt}=ce,zt=this._getOffset(ue,"x"),Ge=this._getOffset(ue,"y");zt&&(be+=zt),Ge&&(Dt+=Ge);let bi=0-Dt,mi=Dt+_e.height-Me.height,on=this._subtractOverflows(_e.width,0-be,be+_e.width-Me.width),li=this._subtractOverflows(_e.height,bi,mi),Bi=on*li;return{visibleArea:Bi,isCompletelyWithinViewport:_e.width*_e.height===Bi,fitsInViewportVertically:li===_e.height,fitsInViewportHorizontally:on==_e.width}}_canFitWithFlexibleDimensions(ce,te,Me){if(this._hasFlexibleDimensions){const ue=Me.bottom-te.y,_e=Me.right-te.x,be=re(this._overlayRef.getConfig().minHeight),Dt=re(this._overlayRef.getConfig().minWidth),Ge=ce.fitsInViewportHorizontally||null!=Dt&&Dt<=_e;return(ce.fitsInViewportVertically||null!=be&&be<=ue)&&Ge}return!1}_pushOverlayOnScreen(ce,te,Me){if(this._previousPushAmount&&this._positionLocked)return{x:ce.x+this._previousPushAmount.x,y:ce.y+this._previousPushAmount.y};const ue=ve(te),_e=this._viewportRect,be=Math.max(ce.x+ue.width-_e.width,0),Dt=Math.max(ce.y+ue.height-_e.height,0),zt=Math.max(_e.top-Me.top-ce.y,0),Ge=Math.max(_e.left-Me.left-ce.x,0);let Xe=0,Ri=0;return Xe=ue.width<=_e.width?Ge||-be:ce.x<this._viewportMargin?_e.left-Me.left-ce.x:0,Ri=ue.height<=_e.height?zt||-Dt:ce.y<this._viewportMargin?_e.top-Me.top-ce.y:0,this._previousPushAmount={x:Xe,y:Ri},{x:ce.x+Xe,y:ce.y+Ri}}_applyPosition(ce,te){if(this._setTransformOrigin(ce),this._setOverlayElementStyles(te,ce),this._setBoundingBoxStyles(te,ce),ce.panelClass&&this._addPanelClasses(ce.panelClass),this._lastPosition=ce,this._positionChanges.observers.length){const Me=this._getScrollVisibility(),ue=new ht(ce,Me);this._positionChanges.next(ue)}this._isInitialRender=!1}_setTransformOrigin(ce){if(!this._transformOriginSelector)return;const te=this._boundingBox.querySelectorAll(this._transformOriginSelector);let Me,ue=ce.overlayY;Me="center"===ce.overlayX?"center":this._isRtl()?"start"===ce.overlayX?"right":"left":"start"===ce.overlayX?"left":"right";for(let _e=0;_e<te.length;_e++)te[_e].style.transformOrigin=`${Me} ${ue}`}_calculateBoundingBoxRect(ce,te){const Me=this._viewportRect,ue=this._isRtl();let _e,be,Dt,Xe,Ri,bi;if("top"===te.overlayY)be=ce.y,_e=Me.height-be+this._viewportMargin;else if("bottom"===te.overlayY)Dt=Me.height-ce.y+2*this._viewportMargin,_e=Me.height-Dt+this._viewportMargin;else{const mi=Math.min(Me.bottom-ce.y+Me.top,ce.y),on=this._lastBoundingBoxSize.height;_e=2*mi,be=ce.y-mi,_e>on&&!this._isInitialRender&&!this._growAfterOpen&&(be=ce.y-on/2)}if("end"===te.overlayX&&!ue||"start"===te.overlayX&&ue)bi=Me.width-ce.x+this._viewportMargin,Xe=ce.x-this._viewportMargin;else if("start"===te.overlayX&&!ue||"end"===te.overlayX&&ue)Ri=ce.x,Xe=Me.right-ce.x;else{const mi=Math.min(Me.right-ce.x+Me.left,ce.x),on=this._lastBoundingBoxSize.width;Xe=2*mi,Ri=ce.x-mi,Xe>on&&!this._isInitialRender&&!this._growAfterOpen&&(Ri=ce.x-on/2)}return{top:be,left:Ri,bottom:Dt,right:bi,width:Xe,height:_e}}_setBoundingBoxStyles(ce,te){const Me=this._calculateBoundingBoxRect(ce,te);!this._isInitialRender&&!this._growAfterOpen&&(Me.height=Math.min(Me.height,this._lastBoundingBoxSize.height),Me.width=Math.min(Me.width,this._lastBoundingBoxSize.width));const ue={};if(this._hasExactPosition())ue.top=ue.left="0",ue.bottom=ue.right=ue.maxHeight=ue.maxWidth="",ue.width=ue.height="100%";else{const _e=this._overlayRef.getConfig().maxHeight,be=this._overlayRef.getConfig().maxWidth;ue.height=(0,t.HM)(Me.height),ue.top=(0,t.HM)(Me.top),ue.bottom=(0,t.HM)(Me.bottom),ue.width=(0,t.HM)(Me.width),ue.left=(0,t.HM)(Me.left),ue.right=(0,t.HM)(Me.right),ue.alignItems="center"===te.overlayX?"center":"end"===te.overlayX?"flex-end":"flex-start",ue.justifyContent="center"===te.overlayY?"center":"bottom"===te.overlayY?"flex-end":"flex-start",_e&&(ue.maxHeight=(0,t.HM)(_e)),be&&(ue.maxWidth=(0,t.HM)(be))}this._lastBoundingBoxSize=Me,At(this._boundingBox.style,ue)}_resetBoundingBoxStyles(){At(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){At(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(ce,te){const Me={},ue=this._hasExactPosition(),_e=this._hasFlexibleDimensions,be=this._overlayRef.getConfig();if(ue){const Xe=this._viewportRuler.getViewportScrollPosition();At(Me,this._getExactOverlayY(te,ce,Xe)),At(Me,this._getExactOverlayX(te,ce,Xe))}else Me.position="static";let Dt="",zt=this._getOffset(te,"x"),Ge=this._getOffset(te,"y");zt&&(Dt+=`translateX(${zt}px) `),Ge&&(Dt+=`translateY(${Ge}px)`),Me.transform=Dt.trim(),be.maxHeight&&(ue?Me.maxHeight=(0,t.HM)(be.maxHeight):_e&&(Me.maxHeight="")),be.maxWidth&&(ue?Me.maxWidth=(0,t.HM)(be.maxWidth):_e&&(Me.maxWidth="")),At(this._pane.style,Me)}_getExactOverlayY(ce,te,Me){let ue={top:"",bottom:""},_e=this._getOverlayPoint(te,this._overlayRect,ce);this._isPushed&&(_e=this._pushOverlayOnScreen(_e,this._overlayRect,Me));let be=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return _e.y-=be,"bottom"===ce.overlayY?ue.bottom=this._document.documentElement.clientHeight-(_e.y+this._overlayRect.height)+"px":ue.top=(0,t.HM)(_e.y),ue}_getExactOverlayX(ce,te,Me){let be,ue={left:"",right:""},_e=this._getOverlayPoint(te,this._overlayRect,ce);return this._isPushed&&(_e=this._pushOverlayOnScreen(_e,this._overlayRect,Me)),be=this._isRtl()?"end"===ce.overlayX?"left":"right":"end"===ce.overlayX?"right":"left","right"===be?ue.right=this._document.documentElement.clientWidth-(_e.x+this._overlayRect.width)+"px":ue.left=(0,t.HM)(_e.x),ue}_getScrollVisibility(){const ce=this._getOriginRect(),te=this._pane.getBoundingClientRect(),Me=this._scrollables.map(ue=>ue.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Bt(ce,Me),isOriginOutsideView:wt(ce,Me),isOverlayClipped:Bt(te,Me),isOverlayOutsideView:wt(te,Me)}}_subtractOverflows(ce,...te){return te.reduce((Me,ue)=>Me-Math.max(ue,0),ce)}_getNarrowedViewportRect(){const ce=this._document.documentElement.clientWidth,te=this._document.documentElement.clientHeight,Me=this._viewportRuler.getViewportScrollPosition();return{top:Me.top+this._viewportMargin,left:Me.left+this._viewportMargin,right:Me.left+ce-this._viewportMargin,bottom:Me.top+te-this._viewportMargin,width:ce-2*this._viewportMargin,height:te-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(ce,te){return"x"===te?null==ce.offsetX?this._offsetX:ce.offsetX:null==ce.offsetY?this._offsetY:ce.offsetY}_validatePositions(){}_addPanelClasses(ce){this._pane&&(0,t.Eq)(ce).forEach(te=>{""!==te&&-1===this._appliedPanelClasses.indexOf(te)&&(this._appliedPanelClasses.push(te),this._pane.classList.add(te))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(ce=>{this._pane.classList.remove(ce)}),this._appliedPanelClasses=[])}_getOriginRect(){const ce=this._origin;if(ce instanceof e.SBq)return ce.nativeElement.getBoundingClientRect();if(ce instanceof Element)return ce.getBoundingClientRect();const te=ce.width||0,Me=ce.height||0;return{top:ce.y,bottom:ce.y+Me,left:ce.x,right:ce.x+te,height:Me,width:te}}}function At(Te,ce){for(let te in ce)ce.hasOwnProperty(te)&&(Te[te]=ce[te]);return Te}function re(Te){if("number"!=typeof Te&&null!=Te){const[ce,te]=Te.split(Zt);return te&&"px"!==te?null:parseFloat(ce)}return Te||null}function ve(Te){return{top:Math.floor(Te.top),right:Math.floor(Te.right),bottom:Math.floor(Te.bottom),left:Math.floor(Te.left),width:Math.floor(Te.width),height:Math.floor(Te.height)}}const oe="cdk-global-overlay-wrapper";class Ie{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(ce){const te=ce.getConfig();this._overlayRef=ce,this._width&&!te.width&&ce.updateSize({width:this._width}),this._height&&!te.height&&ce.updateSize({height:this._height}),ce.hostElement.classList.add(oe),this._isDisposed=!1}top(ce=""){return this._bottomOffset="",this._topOffset=ce,this._alignItems="flex-start",this}left(ce=""){return this._rightOffset="",this._leftOffset=ce,this._justifyContent="flex-start",this}bottom(ce=""){return this._topOffset="",this._bottomOffset=ce,this._alignItems="flex-end",this}right(ce=""){return this._leftOffset="",this._rightOffset=ce,this._justifyContent="flex-end",this}width(ce=""){return this._overlayRef?this._overlayRef.updateSize({width:ce}):this._width=ce,this}height(ce=""){return this._overlayRef?this._overlayRef.updateSize({height:ce}):this._height=ce,this}centerHorizontally(ce=""){return this.left(ce),this._justifyContent="center",this}centerVertically(ce=""){return this.top(ce),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const ce=this._overlayRef.overlayElement.style,te=this._overlayRef.hostElement.style,Me=this._overlayRef.getConfig(),{width:ue,height:_e,maxWidth:be,maxHeight:Dt}=Me,zt=!("100%"!==ue&&"100vw"!==ue||be&&"100%"!==be&&"100vw"!==be),Ge=!("100%"!==_e&&"100vh"!==_e||Dt&&"100%"!==Dt&&"100vh"!==Dt);ce.position=this._cssPosition,ce.marginLeft=zt?"0":this._leftOffset,ce.marginTop=Ge?"0":this._topOffset,ce.marginBottom=this._bottomOffset,ce.marginRight=this._rightOffset,zt?te.justifyContent="flex-start":"center"===this._justifyContent?te.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?te.justifyContent="flex-end":"flex-end"===this._justifyContent&&(te.justifyContent="flex-start"):te.justifyContent=this._justifyContent,te.alignItems=Ge?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const ce=this._overlayRef.overlayElement.style,te=this._overlayRef.hostElement,Me=te.style;te.classList.remove(oe),Me.justifyContent=Me.alignItems=ce.marginTop=ce.marginBottom=ce.marginLeft=ce.marginRight=ce.position="",this._overlayRef=null,this._isDisposed=!0}}let Re=(()=>{class Te{constructor(te,Me,ue,_e){this._viewportRuler=te,this._document=Me,this._platform=ue,this._overlayContainer=_e}global(){return new Ie}flexibleConnectedTo(te){return new vt(te,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return Te.\u0275fac=function(te){return new(te||Te)(e.LFG(y.rL),e.LFG(g.K0),e.LFG(n.t4),e.LFG(st))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),je=(()=>{class Te{constructor(te){this._attachedOverlays=[],this._document=te}ngOnDestroy(){this.detach()}add(te){this.remove(te),this._attachedOverlays.push(te)}remove(te){const Me=this._attachedOverlays.indexOf(te);Me>-1&&this._attachedOverlays.splice(Me,1),0===this._attachedOverlays.length&&this.detach()}}return Te.\u0275fac=function(te){return new(te||Te)(e.LFG(g.K0))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),Si=(()=>{class Te extends je{constructor(te){super(te),this._keydownListener=Me=>{const ue=this._attachedOverlays;for(let _e=ue.length-1;_e>-1;_e--)if(ue[_e]._keydownEvents.observers.length>0){ue[_e]._keydownEvents.next(Me);break}}}add(te){super.add(te),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return Te.\u0275fac=function(te){return new(te||Te)(e.LFG(g.K0))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),Ze=(()=>{class Te extends je{constructor(te,Me){super(te),this._platform=Me,this._cursorStyleIsSet=!1,this._pointerDownListener=ue=>{this._pointerDownEventTarget=(0,n.sA)(ue)},this._clickListener=ue=>{const _e=(0,n.sA)(ue),be="click"===ue.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:_e;this._pointerDownEventTarget=null;const Dt=this._attachedOverlays.slice();for(let zt=Dt.length-1;zt>-1;zt--){const Ge=Dt[zt];if(!(Ge._outsidePointerEvents.observers.length<1)&&Ge.hasAttached()){if(Ge.overlayElement.contains(_e)||Ge.overlayElement.contains(be))break;Ge._outsidePointerEvents.next(ue)}}}}add(te){if(super.add(te),!this._isAttached){const Me=this._document.body;Me.addEventListener("pointerdown",this._pointerDownListener,!0),Me.addEventListener("click",this._clickListener,!0),Me.addEventListener("auxclick",this._clickListener,!0),Me.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=Me.style.cursor,Me.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const te=this._document.body;te.removeEventListener("pointerdown",this._pointerDownListener,!0),te.removeEventListener("click",this._clickListener,!0),te.removeEventListener("auxclick",this._clickListener,!0),te.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(te.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return Te.\u0275fac=function(te){return new(te||Te)(e.LFG(g.K0),e.LFG(n.t4))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),we=0,ci=(()=>{class Te{constructor(te,Me,ue,_e,be,Dt,zt,Ge,Xe,Ri,bi){this.scrollStrategies=te,this._overlayContainer=Me,this._componentFactoryResolver=ue,this._positionBuilder=_e,this._keyboardDispatcher=be,this._injector=Dt,this._ngZone=zt,this._document=Ge,this._directionality=Xe,this._location=Ri,this._outsideClickDispatcher=bi}create(te){const Me=this._createHostElement(),ue=this._createPaneElement(Me),_e=this._createPortalOutlet(ue),be=new St(te);return be.direction=be.direction||this._directionality.value,new ot(_e,Me,ue,be,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(te){const Me=this._document.createElement("div");return Me.id="cdk-overlay-"+we++,Me.classList.add("cdk-overlay-pane"),te.appendChild(Me),Me}_createHostElement(){const te=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(te),te}_createPortalOutlet(te){return this._appRef||(this._appRef=this._injector.get(e.z2F)),new s.u0(te,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return Te.\u0275fac=function(te){return new(te||Te)(e.LFG(It),e.LFG(st),e.LFG(e._Vd),e.LFG(Re),e.LFG(Si),e.LFG(e.zs3),e.LFG(e.R0b),e.LFG(g.K0),e.LFG(r.Is),e.LFG(g.Ye),e.LFG(Ze))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac}),Te})();const Yt={provide:new e.OlP("cdk-connected-overlay-scroll-strategy"),deps:[ci],useFactory:function(Te){return()=>Te.scrollStrategies.reposition()}};let ye=(()=>{class Te{}return Te.\u0275fac=function(te){return new(te||Te)},Te.\u0275mod=e.oAB({type:Te}),Te.\u0275inj=e.cJS({providers:[ci,Yt],imports:[[r.vT,s.eL,y.Cl],y.Cl]}),Te})()},70925:(H,W,f)=>{"use strict";f.d(W,{t4:()=>t,ud:()=>n,sA:()=>Kt,ht:()=>Bt,kV:()=>wt,Oy:()=>It,_i:()=>bt,qK:()=>c,i$:()=>P,Mq:()=>q});var y=f(5e3),g=f(69808);let e;try{e="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(St){e=!1}let r,t=(()=>{class St{constructor(ft){this._platformId=ft,this.isBrowser=this._platformId?(0,g.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!e)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return St.\u0275fac=function(ft){return new(ft||St)(y.LFG(y.Lbi))},St.\u0275prov=y.Yz7({token:St,factory:St.\u0275fac,providedIn:"root"}),St})(),n=(()=>{class St{}return St.\u0275fac=function(ft){return new(ft||St)},St.\u0275mod=y.oAB({type:St}),St.\u0275inj=y.cJS({}),St})();const s=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function c(){if(r)return r;if("object"!=typeof document||!document)return r=new Set(s),r;let St=document.createElement("input");return r=new Set(s.filter(lt=>(St.setAttribute("type",lt),St.type===lt))),r}let v,G,it,Ft;function P(St){return function(){if(null==v&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>v=!0}))}finally{v=v||!1}return v}()?St:!!St.capture}function q(){if(null==it){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return it=!1,it;if("scrollBehavior"in document.documentElement.style)it=!0;else{const St=Element.prototype.scrollTo;it=!!St&&!/\{\s*\[native code\]\s*\}/.test(St.toString())}}return it}function bt(){if("object"!=typeof document||!document)return 0;if(null==G){const St=document.createElement("div"),lt=St.style;St.dir="rtl",lt.width="1px",lt.overflow="auto",lt.visibility="hidden",lt.pointerEvents="none",lt.position="absolute";const ft=document.createElement("div"),ht=ft.style;ht.width="2px",ht.height="1px",St.appendChild(ft),document.body.appendChild(St),G=0,0===St.scrollLeft&&(St.scrollLeft=1,G=0===St.scrollLeft?1:2),St.remove()}return G}function wt(St){if(function(){if(null==Ft){const St="undefined"!=typeof document?document.head:null;Ft=!(!St||!St.createShadowRoot&&!St.attachShadow)}return Ft}()){const lt=St.getRootNode?St.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&lt instanceof ShadowRoot)return lt}return null}function Bt(){let St="undefined"!=typeof document&&document?document.activeElement:null;for(;St&&St.shadowRoot;){const lt=St.shadowRoot.activeElement;if(lt===St)break;St=lt}return St}function Kt(St){return St.composedPath?St.composedPath()[0]:St.target}function It(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}},99129:(H,W,f)=>{"use strict";f.d(W,{en:()=>it,ig:()=>gt,Pl:()=>Bt,C5:()=>D,u0:()=>bt,eL:()=>It,UE:()=>P});var y=f(5e3),g=f(69808);class v{attach(ft){return this._attachedHost=ft,ft.attach(this)}detach(){let ft=this._attachedHost;null!=ft&&(this._attachedHost=null,ft.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(ft){this._attachedHost=ft}}class D extends v{constructor(ft,ht,Gt,ut){super(),this.component=ft,this.viewContainerRef=ht,this.injector=Gt,this.componentFactoryResolver=ut}}class P extends v{constructor(ft,ht,Gt){super(),this.templateRef=ft,this.viewContainerRef=ht,this.context=Gt}get origin(){return this.templateRef.elementRef}attach(ft,ht=this.context){return this.context=ht,super.attach(ft)}detach(){return this.context=void 0,super.detach()}}class G extends v{constructor(ft){super(),this.element=ft instanceof y.SBq?ft.nativeElement:ft}}class it{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(ft){return ft instanceof D?(this._attachedPortal=ft,this.attachComponentPortal(ft)):ft instanceof P?(this._attachedPortal=ft,this.attachTemplatePortal(ft)):this.attachDomPortal&&ft instanceof G?(this._attachedPortal=ft,this.attachDomPortal(ft)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(ft){this._disposeFn=ft}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class bt extends it{constructor(ft,ht,Gt,ut,ot){super(),this.outletElement=ft,this._componentFactoryResolver=ht,this._appRef=Gt,this._defaultInjector=ut,this.attachDomPortal=st=>{const Z=st.element,Zt=this._document.createComment("dom-portal");Z.parentNode.insertBefore(Zt,Z),this.outletElement.appendChild(Z),this._attachedPortal=st,super.setDisposeFn(()=>{Zt.parentNode&&Zt.parentNode.replaceChild(Z,Zt)})},this._document=ot}attachComponentPortal(ft){const Gt=(ft.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(ft.component);let ut;return ft.viewContainerRef?(ut=ft.viewContainerRef.createComponent(Gt,ft.viewContainerRef.length,ft.injector||ft.viewContainerRef.injector),this.setDisposeFn(()=>ut.destroy())):(ut=Gt.create(ft.injector||this._defaultInjector),this._appRef.attachView(ut.hostView),this.setDisposeFn(()=>{this._appRef.detachView(ut.hostView),ut.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(ut)),this._attachedPortal=ft,ut}attachTemplatePortal(ft){let ht=ft.viewContainerRef,Gt=ht.createEmbeddedView(ft.templateRef,ft.context);return Gt.rootNodes.forEach(ut=>this.outletElement.appendChild(ut)),Gt.detectChanges(),this.setDisposeFn(()=>{let ut=ht.indexOf(Gt);-1!==ut&&ht.remove(ut)}),this._attachedPortal=ft,Gt}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(ft){return ft.hostView.rootNodes[0]}}let gt=(()=>{class lt extends P{constructor(ht,Gt){super(ht,Gt)}}return lt.\u0275fac=function(ht){return new(ht||lt)(y.Y36(y.Rgc),y.Y36(y.s_b))},lt.\u0275dir=y.lG2({type:lt,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[y.qOj]}),lt})(),Bt=(()=>{class lt extends it{constructor(ht,Gt,ut){super(),this._componentFactoryResolver=ht,this._viewContainerRef=Gt,this._isInitialized=!1,this.attached=new y.vpe,this.attachDomPortal=ot=>{const st=ot.element,Z=this._document.createComment("dom-portal");ot.setAttachedHost(this),st.parentNode.insertBefore(Z,st),this._getRootNode().appendChild(st),this._attachedPortal=ot,super.setDisposeFn(()=>{Z.parentNode&&Z.parentNode.replaceChild(st,Z)})},this._document=ut}get portal(){return this._attachedPortal}set portal(ht){this.hasAttached()&&!ht&&!this._isInitialized||(this.hasAttached()&&super.detach(),ht&&super.attach(ht),this._attachedPortal=ht)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(ht){ht.setAttachedHost(this);const Gt=null!=ht.viewContainerRef?ht.viewContainerRef:this._viewContainerRef,ot=(ht.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(ht.component),st=Gt.createComponent(ot,Gt.length,ht.injector||Gt.injector);return Gt!==this._viewContainerRef&&this._getRootNode().appendChild(st.hostView.rootNodes[0]),super.setDisposeFn(()=>st.destroy()),this._attachedPortal=ht,this._attachedRef=st,this.attached.emit(st),st}attachTemplatePortal(ht){ht.setAttachedHost(this);const Gt=this._viewContainerRef.createEmbeddedView(ht.templateRef,ht.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=ht,this._attachedRef=Gt,this.attached.emit(Gt),Gt}_getRootNode(){const ht=this._viewContainerRef.element.nativeElement;return ht.nodeType===ht.ELEMENT_NODE?ht:ht.parentNode}}return lt.\u0275fac=function(ht){return new(ht||lt)(y.Y36(y._Vd),y.Y36(y.s_b),y.Y36(g.K0))},lt.\u0275dir=y.lG2({type:lt,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[y.qOj]}),lt})(),It=(()=>{class lt{}return lt.\u0275fac=function(ht){return new(ht||lt)},lt.\u0275mod=y.oAB({type:lt}),lt.\u0275inj=y.cJS({}),lt})()},30495:(H,W,f)=>{"use strict";f.d(W,{PQ:()=>oe,ZD:()=>Wt,mF:()=>ve,Cl:()=>Ae,rL:()=>Re});var y=f(63191),g=f(5e3),e=f(84408),t=f(50727);const n={schedule(Qt){let ee=requestAnimationFrame,Mt=cancelAnimationFrame;const{delegate:Yt}=n;Yt&&(ee=Yt.requestAnimationFrame,Mt=Yt.cancelAnimationFrame);const ye=ee(ui=>{Mt=void 0,Qt(ui)});return new t.w0(()=>null==Mt?void 0:Mt(ye))},requestAnimationFrame(...Qt){const{delegate:ee}=n;return((null==ee?void 0:ee.requestAnimationFrame)||requestAnimationFrame)(...Qt)},cancelAnimationFrame(...Qt){const{delegate:ee}=n;return((null==ee?void 0:ee.cancelAnimationFrame)||cancelAnimationFrame)(...Qt)},delegate:void 0};var s=f(97565);new class extends s.v{flush(ee){this._active=!0,this._scheduled=void 0;const{actions:Mt}=this;let Yt,ye=-1;ee=ee||Mt.shift();const ui=Mt.length;do{if(Yt=ee.execute(ee.state,ee.delay))break}while(++ye<ui&&(ee=Mt.shift()));if(this._active=!1,Yt){for(;++ye<ui&&(ee=Mt.shift());)ee.unsubscribe();throw Yt}}}(class extends e.o{constructor(ee,Mt){super(ee,Mt),this.scheduler=ee,this.work=Mt}requestAsyncId(ee,Mt,Yt=0){return null!==Yt&&Yt>0?super.requestAsyncId(ee,Mt,Yt):(ee.actions.push(this),ee._scheduled||(ee._scheduled=n.requestAnimationFrame(()=>ee.flush(void 0))))}recycleAsyncId(ee,Mt,Yt=0){if(null!=Yt&&Yt>0||null==Yt&&this.delay>0)return super.recycleAsyncId(ee,Mt,Yt);0===ee.actions.length&&(n.cancelAnimationFrame(Mt),ee._scheduled=void 0)}});var P=f(77579),G=f(39646),it=f(79307),q=f(54968),Ft=(f(53101),f(34986)),gt=f(54482),wt=f(38421),Bt=f(25403),It=f(5963);function St(Qt,ee=Ft.P){return function(Qt){return(0,gt.e)((ee,Mt)=>{let Yt=!1,ye=null,ui=null,Te=!1;const ce=()=>{if(null==ui||ui.unsubscribe(),ui=null,Yt){Yt=!1;const Me=ye;ye=null,Mt.next(Me)}Te&&Mt.complete()},te=()=>{ui=null,Te&&Mt.complete()};ee.subscribe(new Bt.Q(Mt,Me=>{Yt=!0,ye=Me,ui||(0,wt.Xf)(Qt()).subscribe(ui=new Bt.Q(Mt,ce,te))},()=>{Te=!0,(!Yt||!ui||ui.closed)&&Mt.complete()}))})}(()=>(0,It.H)(Qt,ee))}var lt=f(39300),ft=f(82722),ht=f(69808),Gt=f(70925),ut=f(50226);let ve=(()=>{class Qt{constructor(Mt,Yt,ye){this._ngZone=Mt,this._platform=Yt,this._scrolled=new P.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=ye}register(Mt){this.scrollContainers.has(Mt)||this.scrollContainers.set(Mt,Mt.elementScrolled().subscribe(()=>this._scrolled.next(Mt)))}deregister(Mt){const Yt=this.scrollContainers.get(Mt);Yt&&(Yt.unsubscribe(),this.scrollContainers.delete(Mt))}scrolled(Mt=20){return this._platform.isBrowser?new it.y(Yt=>{this._globalSubscription||this._addGlobalListener();const ye=Mt>0?this._scrolled.pipe(St(Mt)).subscribe(Yt):this._scrolled.subscribe(Yt);return this._scrolledCount++,()=>{ye.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,G.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((Mt,Yt)=>this.deregister(Yt)),this._scrolled.complete()}ancestorScrolled(Mt,Yt){const ye=this.getAncestorScrollContainers(Mt);return this.scrolled(Yt).pipe((0,lt.h)(ui=>!ui||ye.indexOf(ui)>-1))}getAncestorScrollContainers(Mt){const Yt=[];return this.scrollContainers.forEach((ye,ui)=>{this._scrollableContainsElement(ui,Mt)&&Yt.push(ui)}),Yt}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(Mt,Yt){let ye=(0,y.fI)(Yt),ui=Mt.getElementRef().nativeElement;do{if(ye==ui)return!0}while(ye=ye.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const Mt=this._getWindow();return(0,q.R)(Mt.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return Qt.\u0275fac=function(Mt){return new(Mt||Qt)(g.LFG(g.R0b),g.LFG(Gt.t4),g.LFG(ht.K0,8))},Qt.\u0275prov=g.Yz7({token:Qt,factory:Qt.\u0275fac,providedIn:"root"}),Qt})(),oe=(()=>{class Qt{constructor(Mt,Yt,ye,ui){this.elementRef=Mt,this.scrollDispatcher=Yt,this.ngZone=ye,this.dir=ui,this._destroyed=new P.x,this._elementScrolled=new it.y(Te=>this.ngZone.runOutsideAngular(()=>(0,q.R)(this.elementRef.nativeElement,"scroll").pipe((0,ft.R)(this._destroyed)).subscribe(Te)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(Mt){const Yt=this.elementRef.nativeElement,ye=this.dir&&"rtl"==this.dir.value;null==Mt.left&&(Mt.left=ye?Mt.end:Mt.start),null==Mt.right&&(Mt.right=ye?Mt.start:Mt.end),null!=Mt.bottom&&(Mt.top=Yt.scrollHeight-Yt.clientHeight-Mt.bottom),ye&&0!=(0,Gt._i)()?(null!=Mt.left&&(Mt.right=Yt.scrollWidth-Yt.clientWidth-Mt.left),2==(0,Gt._i)()?Mt.left=Mt.right:1==(0,Gt._i)()&&(Mt.left=Mt.right?-Mt.right:Mt.right)):null!=Mt.right&&(Mt.left=Yt.scrollWidth-Yt.clientWidth-Mt.right),this._applyScrollToOptions(Mt)}_applyScrollToOptions(Mt){const Yt=this.elementRef.nativeElement;(0,Gt.Mq)()?Yt.scrollTo(Mt):(null!=Mt.top&&(Yt.scrollTop=Mt.top),null!=Mt.left&&(Yt.scrollLeft=Mt.left))}measureScrollOffset(Mt){const Yt="left",ui=this.elementRef.nativeElement;if("top"==Mt)return ui.scrollTop;if("bottom"==Mt)return ui.scrollHeight-ui.clientHeight-ui.scrollTop;const Te=this.dir&&"rtl"==this.dir.value;return"start"==Mt?Mt=Te?"right":Yt:"end"==Mt&&(Mt=Te?Yt:"right"),Te&&2==(0,Gt._i)()?Mt==Yt?ui.scrollWidth-ui.clientWidth-ui.scrollLeft:ui.scrollLeft:Te&&1==(0,Gt._i)()?Mt==Yt?ui.scrollLeft+ui.scrollWidth-ui.clientWidth:-ui.scrollLeft:Mt==Yt?ui.scrollLeft:ui.scrollWidth-ui.clientWidth-ui.scrollLeft}}return Qt.\u0275fac=function(Mt){return new(Mt||Qt)(g.Y36(g.SBq),g.Y36(ve),g.Y36(g.R0b),g.Y36(ut.Is,8))},Qt.\u0275dir=g.lG2({type:Qt,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),Qt})(),Re=(()=>{class Qt{constructor(Mt,Yt,ye){this._platform=Mt,this._change=new P.x,this._changeListener=ui=>{this._change.next(ui)},this._document=ye,Yt.runOutsideAngular(()=>{if(Mt.isBrowser){const ui=this._getWindow();ui.addEventListener("resize",this._changeListener),ui.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const Mt=this._getWindow();Mt.removeEventListener("resize",this._changeListener),Mt.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const Mt={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),Mt}getViewportRect(){const Mt=this.getViewportScrollPosition(),{width:Yt,height:ye}=this.getViewportSize();return{top:Mt.top,left:Mt.left,bottom:Mt.top+ye,right:Mt.left+Yt,height:ye,width:Yt}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const Mt=this._document,Yt=this._getWindow(),ye=Mt.documentElement,ui=ye.getBoundingClientRect();return{top:-ui.top||Mt.body.scrollTop||Yt.scrollY||ye.scrollTop||0,left:-ui.left||Mt.body.scrollLeft||Yt.scrollX||ye.scrollLeft||0}}change(Mt=20){return Mt>0?this._change.pipe(St(Mt)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const Mt=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:Mt.innerWidth,height:Mt.innerHeight}:{width:0,height:0}}}return Qt.\u0275fac=function(Mt){return new(Mt||Qt)(g.LFG(Gt.t4),g.LFG(g.R0b),g.LFG(ht.K0,8))},Qt.\u0275prov=g.Yz7({token:Qt,factory:Qt.\u0275fac,providedIn:"root"}),Qt})(),Wt=(()=>{class Qt{}return Qt.\u0275fac=function(Mt){return new(Mt||Qt)},Qt.\u0275mod=g.oAB({type:Qt}),Qt.\u0275inj=g.cJS({}),Qt})(),Ae=(()=>{class Qt{}return Qt.\u0275fac=function(Mt){return new(Mt||Qt)},Qt.\u0275mod=g.oAB({type:Qt}),Qt.\u0275inj=g.cJS({imports:[[ut.vT,Gt.ud,Wt],ut.vT,Wt]}),Qt})()},69808:(H,W,f)=>{"use strict";f.d(W,{mr:()=>Bt,Ov:()=>Ea,ez:()=>Oo,K0:()=>s,Do:()=>It,V_:()=>D,Ye:()=>St,S$:()=>gt,mk:()=>de,sg:()=>ji,O5:()=>qn,PC:()=>ho,RF:()=>no,n9:()=>ro,b0:()=>Kt,lw:()=>c,EM:()=>Ao,JF:()=>ia,NF:()=>ea,w_:()=>r,bD:()=>_s,q:()=>e,Mx:()=>Nn,HT:()=>n});var y=f(5e3);let g=null;function e(){return g}function n(Lt){g||(g=Lt)}class r{}const s=new y.OlP("DocumentToken");let c=(()=>{class Lt{historyGo(V){throw new Error("Not implemented")}}return Lt.\u0275fac=function(V){return new(V||Lt)},Lt.\u0275prov=y.Yz7({token:Lt,factory:function(){return(0,y.LFG)(P)},providedIn:"platform"}),Lt})();const D=new y.OlP("Location Initialized");let P=(()=>{class Lt extends c{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return e().getBaseHref(this._doc)}onPopState(V){const j=e().getGlobalEventTarget(this._doc,"window");return j.addEventListener("popstate",V,!1),()=>j.removeEventListener("popstate",V)}onHashChange(V){const j=e().getGlobalEventTarget(this._doc,"window");return j.addEventListener("hashchange",V,!1),()=>j.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,j,xt){G()?this._history.pushState(V,j,xt):this.location.hash=xt}replaceState(V,j,xt){G()?this._history.replaceState(V,j,xt):this.location.hash=xt}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return Lt.\u0275fac=function(V){return new(V||Lt)(y.LFG(s))},Lt.\u0275prov=y.Yz7({token:Lt,factory:function(){return new P((0,y.LFG)(s))},providedIn:"platform"}),Lt})();function G(){return!!window.history.pushState}function q(Lt,Q){if(0==Lt.length)return Q;if(0==Q.length)return Lt;let V=0;return Lt.endsWith("/")&&V++,Q.startsWith("/")&&V++,2==V?Lt+Q.substring(1):1==V?Lt+Q:Lt+"/"+Q}function bt(Lt){const Q=Lt.match(/#|\?|$/),V=Q&&Q.index||Lt.length;return Lt.slice(0,V-("/"===Lt[V-1]?1:0))+Lt.slice(V)}function Ft(Lt){return Lt&&"?"!==Lt[0]?"?"+Lt:Lt}let gt=(()=>{class Lt{historyGo(V){throw new Error("Not implemented")}}return Lt.\u0275fac=function(V){return new(V||Lt)},Lt.\u0275prov=y.Yz7({token:Lt,factory:function(){return function(Lt){const Q=(0,y.LFG)(s).location;return new Kt((0,y.LFG)(c),Q&&Q.origin||"")}()},providedIn:"root"}),Lt})();const Bt=new y.OlP("appBaseHref");let Kt=(()=>{class Lt extends gt{constructor(V,j){if(super(),this._platformLocation=V,this._removeListenerFns=[],null==j&&(j=this._platformLocation.getBaseHrefFromDOM()),null==j)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=j}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return q(this._baseHref,V)}path(V=!1){const j=this._platformLocation.pathname+Ft(this._platformLocation.search),xt=this._platformLocation.hash;return xt&&V?`${j}${xt}`:j}pushState(V,j,xt,Be){const Ti=this.prepareExternalUrl(xt+Ft(Be));this._platformLocation.pushState(V,j,Ti)}replaceState(V,j,xt,Be){const Ti=this.prepareExternalUrl(xt+Ft(Be));this._platformLocation.replaceState(V,j,Ti)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var j,xt;null===(xt=(j=this._platformLocation).historyGo)||void 0===xt||xt.call(j,V)}}return Lt.\u0275fac=function(V){return new(V||Lt)(y.LFG(c),y.LFG(Bt,8))},Lt.\u0275prov=y.Yz7({token:Lt,factory:Lt.\u0275fac}),Lt})(),It=(()=>{class Lt extends gt{constructor(V,j){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=j&&(this._baseHref=j)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let j=this._platformLocation.hash;return null==j&&(j="#"),j.length>0?j.substring(1):j}prepareExternalUrl(V){const j=q(this._baseHref,V);return j.length>0?"#"+j:j}pushState(V,j,xt,Be){let Ti=this.prepareExternalUrl(xt+Ft(Be));0==Ti.length&&(Ti=this._platformLocation.pathname),this._platformLocation.pushState(V,j,Ti)}replaceState(V,j,xt,Be){let Ti=this.prepareExternalUrl(xt+Ft(Be));0==Ti.length&&(Ti=this._platformLocation.pathname),this._platformLocation.replaceState(V,j,Ti)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var j,xt;null===(xt=(j=this._platformLocation).historyGo)||void 0===xt||xt.call(j,V)}}return Lt.\u0275fac=function(V){return new(V||Lt)(y.LFG(c),y.LFG(Bt,8))},Lt.\u0275prov=y.Yz7({token:Lt,factory:Lt.\u0275fac}),Lt})(),St=(()=>{class Lt{constructor(V,j){this._subject=new y.vpe,this._urlChangeListeners=[],this._platformStrategy=V;const xt=this._platformStrategy.getBaseHref();this._platformLocation=j,this._baseHref=bt(ht(xt)),this._platformStrategy.onPopState(Be=>{this._subject.emit({url:this.path(!0),pop:!0,state:Be.state,type:Be.type})})}path(V=!1){return this.normalize(this._platformStrategy.path(V))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(V,j=""){return this.path()==this.normalize(V+Ft(j))}normalize(V){return Lt.stripTrailingSlash(function(Lt,Q){return Lt&&Q.startsWith(Lt)?Q.substring(Lt.length):Q}(this._baseHref,ht(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._platformStrategy.prepareExternalUrl(V)}go(V,j="",xt=null){this._platformStrategy.pushState(xt,"",V,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Ft(j)),xt)}replaceState(V,j="",xt=null){this._platformStrategy.replaceState(xt,"",V,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Ft(j)),xt)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(V=0){var j,xt;null===(xt=(j=this._platformStrategy).historyGo)||void 0===xt||xt.call(j,V)}onUrlChange(V){this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(j=>{this._notifyUrlChangeListeners(j.url,j.state)}))}_notifyUrlChangeListeners(V="",j){this._urlChangeListeners.forEach(xt=>xt(V,j))}subscribe(V,j,xt){return this._subject.subscribe({next:V,error:j,complete:xt})}}return Lt.normalizeQueryParams=Ft,Lt.joinWithSlash=q,Lt.stripTrailingSlash=bt,Lt.\u0275fac=function(V){return new(V||Lt)(y.LFG(gt),y.LFG(c))},Lt.\u0275prov=y.Yz7({token:Lt,factory:function(){return new St((0,y.LFG)(gt),(0,y.LFG)(c))},providedIn:"root"}),Lt})();function ht(Lt){return Lt.replace(/\/index.html$/,"")}var ot=(()=>((ot=ot||{})[ot.Zero=0]="Zero",ot[ot.One=1]="One",ot[ot.Two=2]="Two",ot[ot.Few=3]="Few",ot[ot.Many=4]="Many",ot[ot.Other=5]="Other",ot))();const ye=y.kL8;class Yr{}let Ui=(()=>{class Lt extends Yr{constructor(V){super(),this.locale=V}getPluralCategory(V,j){switch(ye(j||this.locale)(V)){case ot.Zero:return"zero";case ot.One:return"one";case ot.Two:return"two";case ot.Few:return"few";case ot.Many:return"many";default:return"other"}}}return Lt.\u0275fac=function(V){return new(V||Lt)(y.LFG(y.soG))},Lt.\u0275prov=y.Yz7({token:Lt,factory:Lt.\u0275fac}),Lt})();function Nn(Lt,Q){Q=encodeURIComponent(Q);for(const V of Lt.split(";")){const j=V.indexOf("="),[xt,Be]=-1==j?[V,""]:[V.slice(0,j),V.slice(j+1)];if(xt.trim()===Q)return decodeURIComponent(Be)}return null}let de=(()=>{class Lt{constructor(V,j,xt,Be){this._iterableDiffers=V,this._keyValueDiffers=j,this._ngEl=xt,this._renderer=Be,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(V){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof V?V.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(V){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof V?V.split(/\s+/):V,this._rawClass&&((0,y.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const V=this._iterableDiffer.diff(this._rawClass);V&&this._applyIterableChanges(V)}else if(this._keyValueDiffer){const V=this._keyValueDiffer.diff(this._rawClass);V&&this._applyKeyValueChanges(V)}}_applyKeyValueChanges(V){V.forEachAddedItem(j=>this._toggleClass(j.key,j.currentValue)),V.forEachChangedItem(j=>this._toggleClass(j.key,j.currentValue)),V.forEachRemovedItem(j=>{j.previousValue&&this._toggleClass(j.key,!1)})}_applyIterableChanges(V){V.forEachAddedItem(j=>{if("string"!=typeof j.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,y.AaK)(j.item)}`);this._toggleClass(j.item,!0)}),V.forEachRemovedItem(j=>this._toggleClass(j.item,!1))}_applyClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(j=>this._toggleClass(j,!0)):Object.keys(V).forEach(j=>this._toggleClass(j,!!V[j])))}_removeClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(j=>this._toggleClass(j,!1)):Object.keys(V).forEach(j=>this._toggleClass(j,!1)))}_toggleClass(V,j){(V=V.trim())&&V.split(/\s+/g).forEach(xt=>{j?this._renderer.addClass(this._ngEl.nativeElement,xt):this._renderer.removeClass(this._ngEl.nativeElement,xt)})}}return Lt.\u0275fac=function(V){return new(V||Lt)(y.Y36(y.ZZ4),y.Y36(y.aQg),y.Y36(y.SBq),y.Y36(y.Qsj))},Lt.\u0275dir=y.lG2({type:Lt,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Lt})();class Ai{constructor(Q,V,j,xt){this.$implicit=Q,this.ngForOf=V,this.index=j,this.count=xt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ji=(()=>{class Lt{constructor(V,j,xt){this._viewContainer=V,this._template=j,this._differs=xt,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const j=this._viewContainer;V.forEachOperation((xt,Be,Ti)=>{if(null==xt.previousIndex)j.createEmbeddedView(this._template,new Ai(xt.item,this._ngForOf,-1,-1),null===Ti?void 0:Ti);else if(null==Ti)j.remove(null===Be?void 0:Be);else if(null!==Be){const an=j.get(Be);j.move(an,Ti),Xi(an,xt)}});for(let xt=0,Be=j.length;xt<Be;xt++){const an=j.get(xt).context;an.index=xt,an.count=Be,an.ngForOf=this._ngForOf}V.forEachIdentityChange(xt=>{Xi(j.get(xt.currentIndex),xt)})}static ngTemplateContextGuard(V,j){return!0}}return Lt.\u0275fac=function(V){return new(V||Lt)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},Lt.\u0275dir=y.lG2({type:Lt,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Lt})();function Xi(Lt,Q){Lt.context.$implicit=Q.item}let qn=(()=>{class Lt{constructor(V,j){this._viewContainer=V,this._context=new Jn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=j}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){Tn("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){Tn("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,j){return!0}}return Lt.\u0275fac=function(V){return new(V||Lt)(y.Y36(y.s_b),y.Y36(y.Rgc))},Lt.\u0275dir=y.lG2({type:Lt,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Lt})();class Jn{constructor(){this.$implicit=null,this.ngIf=null}}function Tn(Lt,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${Lt} must be a TemplateRef, but received '${(0,y.AaK)(Q)}'.`)}class Jo{constructor(Q,V){this._viewContainerRef=Q,this._templateRef=V,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(Q){Q&&!this._created?this.create():!Q&&this._created&&this.destroy()}}let no=(()=>{class Lt{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(V){this._ngSwitch=V,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(V){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(V)}_matchCase(V){const j=V==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||j,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),j}_updateDefaultCases(V){if(this._defaultViews&&V!==this._defaultUsed){this._defaultUsed=V;for(let j=0;j<this._defaultViews.length;j++)this._defaultViews[j].enforceState(V)}}}return Lt.\u0275fac=function(V){return new(V||Lt)},Lt.\u0275dir=y.lG2({type:Lt,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),Lt})(),ro=(()=>{class Lt{constructor(V,j,xt){this.ngSwitch=xt,xt._addCase(),this._view=new Jo(V,j)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return Lt.\u0275fac=function(V){return new(V||Lt)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(no,9))},Lt.\u0275dir=y.lG2({type:Lt,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),Lt})(),ho=(()=>{class Lt{constructor(V,j,xt){this._ngEl=V,this._differs=j,this._renderer=xt,this._ngStyle=null,this._differ=null}set ngStyle(V){this._ngStyle=V,!this._differ&&V&&(this._differ=this._differs.find(V).create())}ngDoCheck(){if(this._differ){const V=this._differ.diff(this._ngStyle);V&&this._applyChanges(V)}}_setStyle(V,j){const[xt,Be]=V.split(".");null!=(j=null!=j&&Be?`${j}${Be}`:j)?this._renderer.setStyle(this._ngEl.nativeElement,xt,j):this._renderer.removeStyle(this._ngEl.nativeElement,xt)}_applyChanges(V){V.forEachRemovedItem(j=>this._setStyle(j.key,null)),V.forEachAddedItem(j=>this._setStyle(j.key,j.currentValue)),V.forEachChangedItem(j=>this._setStyle(j.key,j.currentValue))}}return Lt.\u0275fac=function(V){return new(V||Lt)(y.Y36(y.SBq),y.Y36(y.aQg),y.Y36(y.Qsj))},Lt.\u0275dir=y.lG2({type:Lt,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),Lt})();class ya{createSubscription(Q,V){return Q.subscribe({next:V,error:j=>{throw j}})}dispose(Q){Q.unsubscribe()}onDestroy(Q){Q.unsubscribe()}}class Zs{createSubscription(Q,V){return Q.then(V,j=>{throw j})}dispose(Q){}onDestroy(Q){}}const Cr=new Zs,Qs=new ya;let Ea=(()=>{class Lt{constructor(V){this._ref=V,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(V){return this._obj?V!==this._obj?(this._dispose(),this.transform(V)):this._latestValue:(V&&this._subscribe(V),this._latestValue)}_subscribe(V){this._obj=V,this._strategy=this._selectStrategy(V),this._subscription=this._strategy.createSubscription(V,j=>this._updateLatestValue(V,j))}_selectStrategy(V){if((0,y.QGY)(V))return Cr;if((0,y.F4k)(V))return Qs;throw function(Lt,Q){return Error(`InvalidPipeArgument: '${Q}' for pipe '${(0,y.AaK)(Lt)}'`)}(Lt,V)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(V,j){V===this._obj&&(this._latestValue=j,this._ref.markForCheck())}}return Lt.\u0275fac=function(V){return new(V||Lt)(y.Y36(y.sBO,16))},Lt.\u0275pipe=y.Yjl({name:"async",type:Lt,pure:!1}),Lt})(),Oo=(()=>{class Lt{}return Lt.\u0275fac=function(V){return new(V||Lt)},Lt.\u0275mod=y.oAB({type:Lt}),Lt.\u0275inj=y.cJS({providers:[{provide:Yr,useClass:Ui}]}),Lt})();const _s="browser";function ea(Lt){return Lt===_s}let Ao=(()=>{class Lt{}return Lt.\u0275prov=(0,y.Yz7)({token:Lt,providedIn:"root",factory:()=>new us((0,y.LFG)(s),window)}),Lt})();class us{constructor(Q,V){this.document=Q,this.window=V,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const V=function(Lt,Q){const V=Lt.getElementById(Q)||Lt.getElementsByName(Q)[0];if(V)return V;if("function"==typeof Lt.createTreeWalker&&Lt.body&&(Lt.body.createShadowRoot||Lt.body.attachShadow)){const j=Lt.createTreeWalker(Lt.body,NodeFilter.SHOW_ELEMENT);let xt=j.currentNode;for(;xt;){const Be=xt.shadowRoot;if(Be){const Ti=Be.getElementById(Q)||Be.querySelector(`[name="${Q}"]`);if(Ti)return Ti}xt=j.nextNode()}}return null}(this.document,Q);V&&(this.scrollToElement(V),this.attemptFocus(V))}setHistoryScrollRestoration(Q){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=Q)}}scrollToElement(Q){const V=Q.getBoundingClientRect(),j=V.left+this.window.pageXOffset,xt=V.top+this.window.pageYOffset,Be=this.offset();this.window.scrollTo(j-Be[0],xt-Be[1])}attemptFocus(Q){return Q.focus(),this.document.activeElement===Q}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Q=ll(this.window.history)||ll(Object.getPrototypeOf(this.window.history));return!(!Q||!Q.writable&&!Q.set)}catch(Q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Q){return!1}}}function ll(Lt){return Object.getOwnPropertyDescriptor(Lt,"scrollRestoration")}class ia{}},40520:(H,W,f)=>{"use strict";f.d(W,{eN:()=>vt,JF:()=>Me});var y=f(69808),g=f(5e3),e=f(39646),t=f(79307),n=f(24351),r=f(39300),s=f(54004);class c{}class v{}class D{constructor(Dt){this.normalizedNames=new Map,this.lazyUpdate=null,Dt?this.lazyInit="string"==typeof Dt?()=>{this.headers=new Map,Dt.split("\n").forEach(zt=>{const Ge=zt.indexOf(":");if(Ge>0){const Xe=zt.slice(0,Ge),Ri=Xe.toLowerCase(),bi=zt.slice(Ge+1).trim();this.maybeSetNormalizedName(Xe,Ri),this.headers.has(Ri)?this.headers.get(Ri).push(bi):this.headers.set(Ri,[bi])}})}:()=>{this.headers=new Map,Object.keys(Dt).forEach(zt=>{let Ge=Dt[zt];const Xe=zt.toLowerCase();"string"==typeof Ge&&(Ge=[Ge]),Ge.length>0&&(this.headers.set(Xe,Ge),this.maybeSetNormalizedName(zt,Xe))})}:this.headers=new Map}has(Dt){return this.init(),this.headers.has(Dt.toLowerCase())}get(Dt){this.init();const zt=this.headers.get(Dt.toLowerCase());return zt&&zt.length>0?zt[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Dt){return this.init(),this.headers.get(Dt.toLowerCase())||null}append(Dt,zt){return this.clone({name:Dt,value:zt,op:"a"})}set(Dt,zt){return this.clone({name:Dt,value:zt,op:"s"})}delete(Dt,zt){return this.clone({name:Dt,value:zt,op:"d"})}maybeSetNormalizedName(Dt,zt){this.normalizedNames.has(zt)||this.normalizedNames.set(zt,Dt)}init(){this.lazyInit&&(this.lazyInit instanceof D?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Dt=>this.applyUpdate(Dt)),this.lazyUpdate=null))}copyFrom(Dt){Dt.init(),Array.from(Dt.headers.keys()).forEach(zt=>{this.headers.set(zt,Dt.headers.get(zt)),this.normalizedNames.set(zt,Dt.normalizedNames.get(zt))})}clone(Dt){const zt=new D;return zt.lazyInit=this.lazyInit&&this.lazyInit instanceof D?this.lazyInit:this,zt.lazyUpdate=(this.lazyUpdate||[]).concat([Dt]),zt}applyUpdate(Dt){const zt=Dt.name.toLowerCase();switch(Dt.op){case"a":case"s":let Ge=Dt.value;if("string"==typeof Ge&&(Ge=[Ge]),0===Ge.length)return;this.maybeSetNormalizedName(Dt.name,zt);const Xe=("a"===Dt.op?this.headers.get(zt):void 0)||[];Xe.push(...Ge),this.headers.set(zt,Xe);break;case"d":const Ri=Dt.value;if(Ri){let bi=this.headers.get(zt);if(!bi)return;bi=bi.filter(mi=>-1===Ri.indexOf(mi)),0===bi.length?(this.headers.delete(zt),this.normalizedNames.delete(zt)):this.headers.set(zt,bi)}else this.headers.delete(zt),this.normalizedNames.delete(zt)}}forEach(Dt){this.init(),Array.from(this.normalizedNames.keys()).forEach(zt=>Dt(this.normalizedNames.get(zt),this.headers.get(zt)))}}class P{encodeKey(Dt){return bt(Dt)}encodeValue(Dt){return bt(Dt)}decodeKey(Dt){return decodeURIComponent(Dt)}decodeValue(Dt){return decodeURIComponent(Dt)}}const it=/%(\d[a-f0-9])/gi,q={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function bt(be){return encodeURIComponent(be).replace(it,(Dt,zt)=>{var Ge;return null!==(Ge=q[zt])&&void 0!==Ge?Ge:Dt})}function Ft(be){return`${be}`}class gt{constructor(Dt={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Dt.encoder||new P,Dt.fromString){if(Dt.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(be,Dt){const zt=new Map;return be.length>0&&be.replace(/^\?/,"").split("&").forEach(Xe=>{const Ri=Xe.indexOf("="),[bi,mi]=-1==Ri?[Dt.decodeKey(Xe),""]:[Dt.decodeKey(Xe.slice(0,Ri)),Dt.decodeValue(Xe.slice(Ri+1))],on=zt.get(bi)||[];on.push(mi),zt.set(bi,on)}),zt}(Dt.fromString,this.encoder)}else Dt.fromObject?(this.map=new Map,Object.keys(Dt.fromObject).forEach(zt=>{const Ge=Dt.fromObject[zt];this.map.set(zt,Array.isArray(Ge)?Ge:[Ge])})):this.map=null}has(Dt){return this.init(),this.map.has(Dt)}get(Dt){this.init();const zt=this.map.get(Dt);return zt?zt[0]:null}getAll(Dt){return this.init(),this.map.get(Dt)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Dt,zt){return this.clone({param:Dt,value:zt,op:"a"})}appendAll(Dt){const zt=[];return Object.keys(Dt).forEach(Ge=>{const Xe=Dt[Ge];Array.isArray(Xe)?Xe.forEach(Ri=>{zt.push({param:Ge,value:Ri,op:"a"})}):zt.push({param:Ge,value:Xe,op:"a"})}),this.clone(zt)}set(Dt,zt){return this.clone({param:Dt,value:zt,op:"s"})}delete(Dt,zt){return this.clone({param:Dt,value:zt,op:"d"})}toString(){return this.init(),this.keys().map(Dt=>{const zt=this.encoder.encodeKey(Dt);return this.map.get(Dt).map(Ge=>zt+"="+this.encoder.encodeValue(Ge)).join("&")}).filter(Dt=>""!==Dt).join("&")}clone(Dt){const zt=new gt({encoder:this.encoder});return zt.cloneFrom=this.cloneFrom||this,zt.updates=(this.updates||[]).concat(Dt),zt}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Dt=>this.map.set(Dt,this.cloneFrom.map.get(Dt))),this.updates.forEach(Dt=>{switch(Dt.op){case"a":case"s":const zt=("a"===Dt.op?this.map.get(Dt.param):void 0)||[];zt.push(Ft(Dt.value)),this.map.set(Dt.param,zt);break;case"d":if(void 0===Dt.value){this.map.delete(Dt.param);break}{let Ge=this.map.get(Dt.param)||[];const Xe=Ge.indexOf(Ft(Dt.value));-1!==Xe&&Ge.splice(Xe,1),Ge.length>0?this.map.set(Dt.param,Ge):this.map.delete(Dt.param)}}}),this.cloneFrom=this.updates=null)}}class Bt{constructor(){this.map=new Map}set(Dt,zt){return this.map.set(Dt,zt),this}get(Dt){return this.map.has(Dt)||this.map.set(Dt,Dt.defaultValue()),this.map.get(Dt)}delete(Dt){return this.map.delete(Dt),this}has(Dt){return this.map.has(Dt)}keys(){return this.map.keys()}}function It(be){return"undefined"!=typeof ArrayBuffer&&be instanceof ArrayBuffer}function St(be){return"undefined"!=typeof Blob&&be instanceof Blob}function lt(be){return"undefined"!=typeof FormData&&be instanceof FormData}class ht{constructor(Dt,zt,Ge,Xe){let Ri;if(this.url=zt,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Dt.toUpperCase(),function(be){switch(be){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Xe?(this.body=void 0!==Ge?Ge:null,Ri=Xe):Ri=Ge,Ri&&(this.reportProgress=!!Ri.reportProgress,this.withCredentials=!!Ri.withCredentials,Ri.responseType&&(this.responseType=Ri.responseType),Ri.headers&&(this.headers=Ri.headers),Ri.context&&(this.context=Ri.context),Ri.params&&(this.params=Ri.params)),this.headers||(this.headers=new D),this.context||(this.context=new Bt),this.params){const bi=this.params.toString();if(0===bi.length)this.urlWithParams=zt;else{const mi=zt.indexOf("?");this.urlWithParams=zt+(-1===mi?"?":mi<zt.length-1?"&":"")+bi}}else this.params=new gt,this.urlWithParams=zt}serializeBody(){return null===this.body?null:It(this.body)||St(this.body)||lt(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof gt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||lt(this.body)?null:St(this.body)?this.body.type||null:It(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Dt={}){var zt;const Ge=Dt.method||this.method,Xe=Dt.url||this.url,Ri=Dt.responseType||this.responseType,bi=void 0!==Dt.body?Dt.body:this.body,mi=void 0!==Dt.withCredentials?Dt.withCredentials:this.withCredentials,on=void 0!==Dt.reportProgress?Dt.reportProgress:this.reportProgress;let li=Dt.headers||this.headers,Bi=Dt.params||this.params;const Ii=null!==(zt=Dt.context)&&void 0!==zt?zt:this.context;return void 0!==Dt.setHeaders&&(li=Object.keys(Dt.setHeaders).reduce((ni,vi)=>ni.set(vi,Dt.setHeaders[vi]),li)),Dt.setParams&&(Bi=Object.keys(Dt.setParams).reduce((ni,vi)=>ni.set(vi,Dt.setParams[vi]),Bi)),new ht(Ge,Xe,bi,{params:Bi,headers:li,context:Ii,reportProgress:on,responseType:Ri,withCredentials:mi})}}var Gt=(()=>((Gt=Gt||{})[Gt.Sent=0]="Sent",Gt[Gt.UploadProgress=1]="UploadProgress",Gt[Gt.ResponseHeader=2]="ResponseHeader",Gt[Gt.DownloadProgress=3]="DownloadProgress",Gt[Gt.Response=4]="Response",Gt[Gt.User=5]="User",Gt))();class ut{constructor(Dt,zt=200,Ge="OK"){this.headers=Dt.headers||new D,this.status=void 0!==Dt.status?Dt.status:zt,this.statusText=Dt.statusText||Ge,this.url=Dt.url||null,this.ok=this.status>=200&&this.status<300}}class ot extends ut{constructor(Dt={}){super(Dt),this.type=Gt.ResponseHeader}clone(Dt={}){return new ot({headers:Dt.headers||this.headers,status:void 0!==Dt.status?Dt.status:this.status,statusText:Dt.statusText||this.statusText,url:Dt.url||this.url||void 0})}}class st extends ut{constructor(Dt={}){super(Dt),this.type=Gt.Response,this.body=void 0!==Dt.body?Dt.body:null}clone(Dt={}){return new st({body:void 0!==Dt.body?Dt.body:this.body,headers:Dt.headers||this.headers,status:void 0!==Dt.status?Dt.status:this.status,statusText:Dt.statusText||this.statusText,url:Dt.url||this.url||void 0})}}class Z extends ut{constructor(Dt){super(Dt,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Dt.url||"(unknown url)"}`:`Http failure response for ${Dt.url||"(unknown url)"}: ${Dt.status} ${Dt.statusText}`,this.error=Dt.error||null}}function Zt(be,Dt){return{body:Dt,headers:be.headers,context:be.context,observe:be.observe,params:be.params,reportProgress:be.reportProgress,responseType:be.responseType,withCredentials:be.withCredentials}}let vt=(()=>{class be{constructor(zt){this.handler=zt}request(zt,Ge,Xe={}){let Ri;if(zt instanceof ht)Ri=zt;else{let on,li;on=Xe.headers instanceof D?Xe.headers:new D(Xe.headers),Xe.params&&(li=Xe.params instanceof gt?Xe.params:new gt({fromObject:Xe.params})),Ri=new ht(zt,Ge,void 0!==Xe.body?Xe.body:null,{headers:on,context:Xe.context,params:li,reportProgress:Xe.reportProgress,responseType:Xe.responseType||"json",withCredentials:Xe.withCredentials})}const bi=(0,e.of)(Ri).pipe((0,n.b)(on=>this.handler.handle(on)));if(zt instanceof ht||"events"===Xe.observe)return bi;const mi=bi.pipe((0,r.h)(on=>on instanceof st));switch(Xe.observe||"body"){case"body":switch(Ri.responseType){case"arraybuffer":return mi.pipe((0,s.U)(on=>{if(null!==on.body&&!(on.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return on.body}));case"blob":return mi.pipe((0,s.U)(on=>{if(null!==on.body&&!(on.body instanceof Blob))throw new Error("Response is not a Blob.");return on.body}));case"text":return mi.pipe((0,s.U)(on=>{if(null!==on.body&&"string"!=typeof on.body)throw new Error("Response is not a string.");return on.body}));default:return mi.pipe((0,s.U)(on=>on.body))}case"response":return mi;default:throw new Error(`Unreachable: unhandled observe type ${Xe.observe}}`)}}delete(zt,Ge={}){return this.request("DELETE",zt,Ge)}get(zt,Ge={}){return this.request("GET",zt,Ge)}head(zt,Ge={}){return this.request("HEAD",zt,Ge)}jsonp(zt,Ge){return this.request("JSONP",zt,{params:(new gt).append(Ge,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(zt,Ge={}){return this.request("OPTIONS",zt,Ge)}patch(zt,Ge,Xe={}){return this.request("PATCH",zt,Zt(Xe,Ge))}post(zt,Ge,Xe={}){return this.request("POST",zt,Zt(Xe,Ge))}put(zt,Ge,Xe={}){return this.request("PUT",zt,Zt(Xe,Ge))}}return be.\u0275fac=function(zt){return new(zt||be)(g.LFG(c))},be.\u0275prov=g.Yz7({token:be,factory:be.\u0275fac}),be})();class At{constructor(Dt,zt){this.next=Dt,this.interceptor=zt}handle(Dt){return this.interceptor.intercept(Dt,this.next)}}const re=new g.OlP("HTTP_INTERCEPTORS");let ve=(()=>{class be{intercept(zt,Ge){return Ge.handle(zt)}}return be.\u0275fac=function(zt){return new(zt||be)},be.\u0275prov=g.Yz7({token:be,factory:be.\u0275fac}),be})();const ci=/^\)\]\}',?\n/;let Ae=(()=>{class be{constructor(zt){this.xhrFactory=zt}handle(zt){if("JSONP"===zt.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new t.y(Ge=>{const Xe=this.xhrFactory.build();if(Xe.open(zt.method,zt.urlWithParams),zt.withCredentials&&(Xe.withCredentials=!0),zt.headers.forEach((vi,Ce)=>Xe.setRequestHeader(vi,Ce.join(","))),zt.headers.has("Accept")||Xe.setRequestHeader("Accept","application/json, text/plain, */*"),!zt.headers.has("Content-Type")){const vi=zt.detectContentTypeHeader();null!==vi&&Xe.setRequestHeader("Content-Type",vi)}if(zt.responseType){const vi=zt.responseType.toLowerCase();Xe.responseType="json"!==vi?vi:"text"}const Ri=zt.serializeBody();let bi=null;const mi=()=>{if(null!==bi)return bi;const vi=1223===Xe.status?204:Xe.status,Ce=Xe.statusText||"OK",Qe=new D(Xe.getAllResponseHeaders()),Ei=function(be){return"responseURL"in be&&be.responseURL?be.responseURL:/^X-Request-URL:/m.test(be.getAllResponseHeaders())?be.getResponseHeader("X-Request-URL"):null}(Xe)||zt.url;return bi=new ot({headers:Qe,status:vi,statusText:Ce,url:Ei}),bi},on=()=>{let{headers:vi,status:Ce,statusText:Qe,url:Ei}=mi(),Pi=null;204!==Ce&&(Pi=void 0===Xe.response?Xe.responseText:Xe.response),0===Ce&&(Ce=Pi?200:0);let ti=Ce>=200&&Ce<300;if("json"===zt.responseType&&"string"==typeof Pi){const ge=Pi;Pi=Pi.replace(ci,"");try{Pi=""!==Pi?JSON.parse(Pi):null}catch(Pt){Pi=ge,ti&&(ti=!1,Pi={error:Pt,text:Pi})}}ti?(Ge.next(new st({body:Pi,headers:vi,status:Ce,statusText:Qe,url:Ei||void 0})),Ge.complete()):Ge.error(new Z({error:Pi,headers:vi,status:Ce,statusText:Qe,url:Ei||void 0}))},li=vi=>{const{url:Ce}=mi(),Qe=new Z({error:vi,status:Xe.status||0,statusText:Xe.statusText||"Unknown Error",url:Ce||void 0});Ge.error(Qe)};let Bi=!1;const Ii=vi=>{Bi||(Ge.next(mi()),Bi=!0);let Ce={type:Gt.DownloadProgress,loaded:vi.loaded};vi.lengthComputable&&(Ce.total=vi.total),"text"===zt.responseType&&!!Xe.responseText&&(Ce.partialText=Xe.responseText),Ge.next(Ce)},ni=vi=>{let Ce={type:Gt.UploadProgress,loaded:vi.loaded};vi.lengthComputable&&(Ce.total=vi.total),Ge.next(Ce)};return Xe.addEventListener("load",on),Xe.addEventListener("error",li),Xe.addEventListener("timeout",li),Xe.addEventListener("abort",li),zt.reportProgress&&(Xe.addEventListener("progress",Ii),null!==Ri&&Xe.upload&&Xe.upload.addEventListener("progress",ni)),Xe.send(Ri),Ge.next({type:Gt.Sent}),()=>{Xe.removeEventListener("error",li),Xe.removeEventListener("abort",li),Xe.removeEventListener("load",on),Xe.removeEventListener("timeout",li),zt.reportProgress&&(Xe.removeEventListener("progress",Ii),null!==Ri&&Xe.upload&&Xe.upload.removeEventListener("progress",ni)),Xe.readyState!==Xe.DONE&&Xe.abort()}})}}return be.\u0275fac=function(zt){return new(zt||be)(g.LFG(y.JF))},be.\u0275prov=g.Yz7({token:be,factory:be.\u0275fac}),be})();const Qt=new g.OlP("XSRF_COOKIE_NAME"),ee=new g.OlP("XSRF_HEADER_NAME");class Mt{}let Yt=(()=>{class be{constructor(zt,Ge,Xe){this.doc=zt,this.platform=Ge,this.cookieName=Xe,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const zt=this.doc.cookie||"";return zt!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,y.Mx)(zt,this.cookieName),this.lastCookieString=zt),this.lastToken}}return be.\u0275fac=function(zt){return new(zt||be)(g.LFG(y.K0),g.LFG(g.Lbi),g.LFG(Qt))},be.\u0275prov=g.Yz7({token:be,factory:be.\u0275fac}),be})(),ye=(()=>{class be{constructor(zt,Ge){this.tokenService=zt,this.headerName=Ge}intercept(zt,Ge){const Xe=zt.url.toLowerCase();if("GET"===zt.method||"HEAD"===zt.method||Xe.startsWith("http://")||Xe.startsWith("https://"))return Ge.handle(zt);const Ri=this.tokenService.getToken();return null!==Ri&&!zt.headers.has(this.headerName)&&(zt=zt.clone({headers:zt.headers.set(this.headerName,Ri)})),Ge.handle(zt)}}return be.\u0275fac=function(zt){return new(zt||be)(g.LFG(Mt),g.LFG(ee))},be.\u0275prov=g.Yz7({token:be,factory:be.\u0275fac}),be})(),ui=(()=>{class be{constructor(zt,Ge){this.backend=zt,this.injector=Ge,this.chain=null}handle(zt){if(null===this.chain){const Ge=this.injector.get(re,[]);this.chain=Ge.reduceRight((Xe,Ri)=>new At(Xe,Ri),this.backend)}return this.chain.handle(zt)}}return be.\u0275fac=function(zt){return new(zt||be)(g.LFG(v),g.LFG(g.zs3))},be.\u0275prov=g.Yz7({token:be,factory:be.\u0275fac}),be})(),te=(()=>{class be{static disable(){return{ngModule:be,providers:[{provide:ye,useClass:ve}]}}static withOptions(zt={}){return{ngModule:be,providers:[zt.cookieName?{provide:Qt,useValue:zt.cookieName}:[],zt.headerName?{provide:ee,useValue:zt.headerName}:[]]}}}return be.\u0275fac=function(zt){return new(zt||be)},be.\u0275mod=g.oAB({type:be}),be.\u0275inj=g.cJS({providers:[ye,{provide:re,useExisting:ye,multi:!0},{provide:Mt,useClass:Yt},{provide:Qt,useValue:"XSRF-TOKEN"},{provide:ee,useValue:"X-XSRF-TOKEN"}]}),be})(),Me=(()=>{class be{}return be.\u0275fac=function(zt){return new(zt||be)},be.\u0275mod=g.oAB({type:be}),be.\u0275inj=g.cJS({providers:[vt,{provide:c,useClass:ui},Ae,{provide:v,useExisting:Ae}],imports:[[te.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),be})()},5e3:(H,W,f)=>{"use strict";f.d(W,{deG:()=>Ju,tb:()=>Eb,AFp:()=>vb,ip1:()=>tm,CZH:()=>jd,hGG:()=>iS,z2F:()=>Ap,sBO:()=>OC,Sil:()=>im,_Vd:()=>Cp,EJc:()=>Cb,SBq:()=>Sp,qLn:()=>Gc,vpe:()=>wh,tBr:()=>Bl,XFs:()=>te,OlP:()=>yo,zs3:()=>fu,ZZ4:()=>Sf,aQg:()=>wf,soG:()=>Tf,YKP:()=>Mv,h0i:()=>Gd,PXZ:()=>SC,R0b:()=>Du,FiY:()=>ec,Lbi:()=>yb,g9A:()=>bb,n_E:()=>mf,Qsj:()=>aT,FYo:()=>wv,JOm:()=>Rt,q3G:()=>is,tp0:()=>Va,Rgc:()=>Ip,dDg:()=>Rb,GfV:()=>Rv,s_b:()=>vf,ifc:()=>bi,eFA:()=>Mb,G48:()=>AC,Gpc:()=>P,f3M:()=>Fl,_c5:()=>JC,VLi:()=>yC,c2e:()=>Tb,zSh:()=>hh,wAp:()=>br,vHH:()=>bt,EiD:()=>Hc,mCW:()=>to,qzn:()=>Oe,JVY:()=>fi,pB0:()=>Ni,eBb:()=>oi,L6k:()=>Je,LAX:()=>Li,cg1:()=>xg,kL8:()=>J_,yhl:()=>Ve,dqk:()=>Ii,sIi:()=>ba,CqO:()=>o_,QGY:()=>vg,F4k:()=>r_,RDi:()=>Ao,AaK:()=>c,z3N:()=>se,qOj:()=>Nr,TTD:()=>Po,_Bn:()=>Tv,xp6:()=>ah,uIk:()=>ag,Gre:()=>H_,ekj:()=>wg,Suo:()=>$v,Xpm:()=>pe,lG2:()=>Pe,Yz7:()=>we,cJS:()=>Wt,oAB:()=>ir,Yjl:()=>di,Y36:()=>_p,_UZ:()=>e_,GkF:()=>i_,BQk:()=>_g,ynx:()=>mg,qZA:()=>gg,TgZ:()=>fg,EpF:()=>n_,n5z:()=>Tl,Ikx:()=>Ag,LFG:()=>Uo,$8M:()=>hc,$Z:()=>t_,NdJ:()=>bg,CRH:()=>Zv,kcU:()=>ra,O4$:()=>Qo,oxw:()=>l_,ALo:()=>Vv,lcZ:()=>Gv,Hsn:()=>u_,F$t:()=>c_,Q6J:()=>dg,s9C:()=>Tg,DdM:()=>kv,VKq:()=>Lv,WLB:()=>Nv,iGM:()=>Kv,MAs:()=>Wm,CHM:()=>ae,LSH:()=>Tc,Udp:()=>Sg,WFA:()=>yg,d8E:()=>Og,YNc:()=>Gm,W1O:()=>eb,_uU:()=>x_,Oqu:()=>Dg,hij:()=>cf,AsE:()=>Ig,lnq:()=>Mg,Gf:()=>Jv});var y=f(77579),g=f(50727),e=f(79307),t=f(56451),n=f(13099);function r(h){for(let d in h)if(h[d]===r)return d;throw Error("Could not find renamed property on target object.")}function s(h,d){for(const b in d)d.hasOwnProperty(b)&&!h.hasOwnProperty(b)&&(h[b]=d[b])}function c(h){if("string"==typeof h)return h;if(Array.isArray(h))return"["+h.map(c).join(", ")+"]";if(null==h)return""+h;if(h.overriddenName)return`${h.overriddenName}`;if(h.name)return`${h.name}`;const d=h.toString();if(null==d)return""+d;const b=d.indexOf("\n");return-1===b?d:d.substring(0,b)}function v(h,d){return null==h||""===h?null===d?"":d:null==d||""===d?h:h+" "+d}const D=r({__forward_ref__:r});function P(h){return h.__forward_ref__=P,h.toString=function(){return c(this())},h}function G(h){return it(h)?h():h}function it(h){return"function"==typeof h&&h.hasOwnProperty(D)&&h.__forward_ref__===P}class bt extends Error{constructor(d,b){super(function(h,d){return`${h?`NG0${h}: `:""}${d}`}(d,b)),this.code=d}}function wt(h){return"string"==typeof h?h:null==h?"":String(h)}function Bt(h){return"function"==typeof h?h.name||h.toString():"object"==typeof h&&null!=h&&"function"==typeof h.type?h.type.name||h.type.toString():wt(h)}function lt(h,d){const b=d?` in ${d}`:"";throw new bt("201",`No provider for ${Bt(h)} found${b}`)}function Ie(h,d){null==h&&function(h,d,b,w){throw new Error(`ASSERTION ERROR: ${h}`+(null==w?"":` [Expected=> ${b} ${w} ${d} <=Actual]`))}(d,h,null,"!=")}function we(h){return{token:h.token,providedIn:h.providedIn||null,factory:h.factory,value:void 0}}function Wt(h){return{providers:h.providers||[],imports:h.imports||[]}}function Ae(h){return Qt(h,ye)||Qt(h,Te)}function Qt(h,d){return h.hasOwnProperty(d)?h[d]:null}function Yt(h){return h&&(h.hasOwnProperty(ui)||h.hasOwnProperty(ce))?h[ui]:null}const ye=r({\u0275prov:r}),ui=r({\u0275inj:r}),Te=r({ngInjectableDef:r}),ce=r({ngInjectorDef:r});var te=(()=>((te=te||{})[te.Default=0]="Default",te[te.Host=1]="Host",te[te.Self=2]="Self",te[te.SkipSelf=4]="SkipSelf",te[te.Optional=8]="Optional",te))();let Me;function _e(h){const d=Me;return Me=h,d}function be(h,d,b){const w=Ae(h);return w&&"root"==w.providedIn?void 0===w.value?w.value=w.factory():w.value:b&te.Optional?null:void 0!==d?d:void lt(c(h),"Injector")}function zt(h){return{toString:h}.toString()}var Ge=(()=>((Ge=Ge||{})[Ge.OnPush=0]="OnPush",Ge[Ge.Default=1]="Default",Ge))(),bi=(()=>{return(h=bi||(bi={}))[h.Emulated=0]="Emulated",h[h.None=2]="None",h[h.ShadowDom=3]="ShadowDom",bi;var h})();const mi="undefined"!=typeof globalThis&&globalThis,on="undefined"!=typeof window&&window,li="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ii=mi||"undefined"!=typeof global&&global||on||li,Ce={},Qe=[],Ei=r({\u0275cmp:r}),Pi=r({\u0275dir:r}),ti=r({\u0275pipe:r}),ge=r({\u0275mod:r}),Pt=r({\u0275fac:r}),dt=r({__NG_ELEMENT_ID__:r});let Nt=0;function pe(h){return zt(()=>{const b={},w={type:h.type,providersResolver:null,decls:h.decls,vars:h.vars,factory:null,template:h.template||null,consts:h.consts||null,ngContentSelectors:h.ngContentSelectors,hostBindings:h.hostBindings||null,hostVars:h.hostVars||0,hostAttrs:h.hostAttrs||null,contentQueries:h.contentQueries||null,declaredInputs:b,inputs:null,outputs:null,exportAs:h.exportAs||null,onPush:h.changeDetection===Ge.OnPush,directiveDefs:null,pipeDefs:null,selectors:h.selectors||Qe,viewQuery:h.viewQuery||null,features:h.features||null,data:h.data||{},encapsulation:h.encapsulation||bi.Emulated,id:"c",styles:h.styles||Qe,_:null,setInput:null,schemas:h.schemas||null,tView:null},O=h.directives,F=h.features,$=h.pipes;return w.id+=Nt++,w.inputs=Ke(h.inputs,b),w.outputs=Ke(h.outputs),F&&F.forEach(ct=>ct(w)),w.directiveDefs=O?()=>("function"==typeof O?O():O).map(Vi):null,w.pipeDefs=$?()=>("function"==typeof $?$():$).map(Ki):null,w})}function Vi(h){return Oi(h)||function(h){return h[Pi]||null}(h)}function Ki(h){return function(h){return h[ti]||null}(h)}const Sn={};function ir(h){return zt(()=>{const d={type:h.type,bootstrap:h.bootstrap||Qe,declarations:h.declarations||Qe,imports:h.imports||Qe,exports:h.exports||Qe,transitiveCompileScopes:null,schemas:h.schemas||null,id:h.id||null};return null!=h.id&&(Sn[h.id]=h.type),d})}function Ke(h,d){if(null==h)return Ce;const b={};for(const w in h)if(h.hasOwnProperty(w)){let O=h[w],F=O;Array.isArray(O)&&(F=O[1],O=O[0]),b[O]=w,d&&(d[O]=F)}return b}const Pe=pe;function di(h){return{type:h.type,name:h.name,factory:null,pure:!1!==h.pure,onDestroy:h.type.prototype.ngOnDestroy||null}}function Oi(h){return h[Ei]||null}function nr(h,d){const b=h[ge]||null;if(!b&&!0===d)throw new Error(`Type ${c(h)} does not have '\u0275mod' property.`);return b}function ro(h){return Array.isArray(h)&&"object"==typeof h[1]}function vo(h){return Array.isArray(h)&&!0===h[1]}function Bs(h){return 0!=(8&h.flags)}function Hs(h){return 2==(2&h.flags)}function tr(h){return 1==(1&h.flags)}function ho(h){return null!==h.template}function Go(h){return 0!=(512&h[2])}function ls(h,d){return h.hasOwnProperty(Pt)?h[Pt]:null}class Ta{constructor(d,b,w){this.previousValue=d,this.currentValue=b,this.firstChange=w}isFirstChange(){return this.firstChange}}function Po(){return Vs}function Vs(h){return h.type.prototype.ngOnChanges&&(h.setInput=Oo),Xr}function Xr(){const h=Qr(this),d=null==h?void 0:h.current;if(d){const b=h.previous;if(b===Ce)h.previous=d;else for(let w in d)b[w]=d[w];h.current=null,this.ngOnChanges(d)}}function Oo(h,d,b,w){const O=Qr(h)||function(h,d){return h[_s]=d}(h,{previous:Ce,current:null}),F=O.current||(O.current={}),$=O.previous,ct=this.declaredInputs[b],Ct=$[ct];F[ct]=new Ta(Ct&&Ct.currentValue,d,$===Ce),h[w]=d}Po.ngInherit=!0;const _s="__ngSimpleChanges__";function Qr(h){return h[_s]||null}const vs="http://www.w3.org/2000/svg";let cs;function Ao(h){cs=h}function Or(h){return!!h.listen}const xn={createRenderer:(h,d)=>void 0!==cs?cs:"undefined"!=typeof document?document:void 0};function Lt(h){for(;Array.isArray(h);)h=h[0];return h}function j(h,d){return Lt(d[h])}function xt(h,d){return Lt(d[h.index])}function Ti(h,d){return h.data[d]}function an(h,d){return h[d]}function Vn(h,d){const b=d[h];return ro(b)?b:b[0]}function wr(h){return 4==(4&h[2])}function vr(h){return 128==(128&h[2])}function Gr(h,d){return null==d?null:h[d]}function rr(h){h[18]=0}function Fo(h,d){h[5]+=d;let b=h,w=h[3];for(;null!==w&&(1===d&&1===b[5]||-1===d&&0===b[5]);)w[5]+=d,b=w,w=w[3]}const Gn={lFrame:oo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Cs(){return Gn.bindingsEnabled}function Ji(){return Gn.lFrame.lView}function Rr(){return Gn.lFrame.tView}function ae(h){return Gn.lFrame.contextLView=h,h[8]}function z(){let h=J();for(;null!==h&&64===h.type;)h=h.parent;return h}function J(){return Gn.lFrame.currentTNode}function ie(h,d){const b=Gn.lFrame;b.currentTNode=h,b.isParent=d}function Ee(){return Gn.lFrame.isParent}function Ye(){Gn.lFrame.isParent=!1}function Hi(){return Gn.isInCheckNoChangesMode}function sn(h){Gn.isInCheckNoChangesMode=h}function fn(){const h=Gn.lFrame;let d=h.bindingRootIndex;return-1===d&&(d=h.bindingRootIndex=h.tView.bindingStartIndex),d}function Yn(){return Gn.lFrame.bindingIndex}function Pn(){return Gn.lFrame.bindingIndex++}function Fn(h){const d=Gn.lFrame,b=d.bindingIndex;return d.bindingIndex=d.bindingIndex+h,b}function Kr(h,d){const b=Gn.lFrame;b.bindingIndex=b.bindingRootIndex=h,xo(d)}function xo(h){Gn.lFrame.currentDirectiveIndex=h}function Ws(h){const d=Gn.lFrame.currentDirectiveIndex;return-1===d?null:h[d]}function ws(){return Gn.lFrame.currentQueryIndex}function ko(h){Gn.lFrame.currentQueryIndex=h}function zs(h){const d=h[1];return 2===d.type?d.declTNode:1===d.type?h[6]:null}function Rs(h,d,b){if(b&te.SkipSelf){let O=d,F=h;for(;!(O=O.parent,null!==O||b&te.Host||(O=zs(F),null===O||(F=F[15],10&O.type))););if(null===O)return!1;d=O,h=F}const w=Gn.lFrame=$a();return w.currentTNode=d,w.lView=h,!0}function na(h){const d=$a(),b=h[1];Gn.lFrame=d,d.currentTNode=b.firstChild,d.lView=h,d.tView=b,d.contextLView=h,d.bindingIndex=b.bindingStartIndex,d.inI18n=!1}function $a(){const h=Gn.lFrame,d=null===h?null:h.child;return null===d?oo(h):d}function oo(h){const d={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:h,child:null,inI18n:!1};return null!==h&&(h.child=d),d}function Ds(){const h=Gn.lFrame;return Gn.lFrame=h.parent,h.currentTNode=null,h.lView=null,h}const Za=Ds;function Zo(){const h=Ds();h.isParent=!0,h.tView=null,h.selectedIndex=-1,h.contextLView=null,h.elementDepthCount=0,h.currentDirectiveIndex=-1,h.currentNamespace=null,h.bindingRootIndex=-1,h.bindingIndex=-1,h.currentQueryIndex=0}function bn(){return Gn.lFrame.selectedIndex}function ur(h){Gn.lFrame.selectedIndex=h}function fr(){const h=Gn.lFrame;return Ti(h.tView,h.selectedIndex)}function Qo(){Gn.lFrame.currentNamespace=vs}function ra(){Gn.lFrame.currentNamespace=null}function bs(h,d){for(let b=d.directiveStart,w=d.directiveEnd;b<w;b++){const F=h.data[b].type.prototype,{ngAfterContentInit:$,ngAfterContentChecked:ct,ngAfterViewInit:Ct,ngAfterViewChecked:$t,ngOnDestroy:fe}=F;$&&(h.contentHooks||(h.contentHooks=[])).push(-b,$),ct&&((h.contentHooks||(h.contentHooks=[])).push(b,ct),(h.contentCheckHooks||(h.contentCheckHooks=[])).push(b,ct)),Ct&&(h.viewHooks||(h.viewHooks=[])).push(-b,Ct),$t&&((h.viewHooks||(h.viewHooks=[])).push(b,$t),(h.viewCheckHooks||(h.viewCheckHooks=[])).push(b,$t)),null!=fe&&(h.destroyHooks||(h.destroyHooks=[])).push(b,fe)}}function da(h,d,b){kl(h,d,3,b)}function jo(h,d,b,w){(3&h[2])===b&&kl(h,d,b,w)}function js(h,d){let b=h[2];(3&b)===d&&(b&=2047,b+=1,h[2]=b)}function kl(h,d,b,w){const F=null!=w?w:-1,$=d.length-1;let ct=0;for(let Ct=void 0!==w?65535&h[18]:0;Ct<$;Ct++)if("number"==typeof d[Ct+1]){if(ct=d[Ct],null!=w&&ct>=w)break}else d[Ct]<0&&(h[18]+=65536),(ct<F||-1==F)&&(Qa(h,b,d,Ct),h[18]=(4294901760&h[18])+Ct+2),Ct++}function Qa(h,d,b,w){const O=b[w]<0,F=b[w+1],ct=h[O?-b[w]:b[w]];if(O){if(h[2]>>11<h[18]>>16&&(3&h[2])===d){h[2]+=2048;try{F.call(ct)}finally{}}}else try{F.call(ct)}finally{}}class Ho{constructor(d,b,w){this.factory=d,this.resolving=!1,this.canSeeViewProviders=b,this.injectImpl=w}}function Oa(h,d,b){const w=Or(h);let O=0;for(;O<b.length;){const F=b[O];if("number"==typeof F){if(0!==F)break;O++;const $=b[O++],ct=b[O++],Ct=b[O++];w?h.setAttribute(d,ct,Ct,$):d.setAttributeNS($,ct,Ct)}else{const $=F,ct=b[++O];Nl($)?w&&h.setProperty(d,$,ct):w?h.setAttribute(d,$,ct):d.setAttribute($,ct),O++}}return O}function ac(h){return 3===h||4===h||6===h}function Nl(h){return 64===h.charCodeAt(0)}function lc(h,d){if(null!==d&&0!==d.length)if(null===h||0===h.length)h=d.slice();else{let b=-1;for(let w=0;w<d.length;w++){const O=d[w];"number"==typeof O?b=O:0===b||ds(h,b,O,null,-1===b||2===b?d[++w]:null)}}return h}function ds(h,d,b,w,O){let F=0,$=h.length;if(-1===d)$=-1;else for(;F<h.length;){const ct=h[F++];if("number"==typeof ct){if(ct===d){$=-1;break}if(ct>d){$=F-1;break}}}for(;F<h.length;){const ct=h[F];if("number"==typeof ct)break;if(ct===b){if(null===w)return void(null!==O&&(h[F+1]=O));if(w===h[F+1])return void(h[F+2]=O)}F++,null!==w&&F++,null!==O&&F++}-1!==$&&(h.splice($,0,d),F=$+1),h.splice(F++,0,b),null!==w&&h.splice(F++,0,w),null!==O&&h.splice(F++,0,O)}function Ys(h){return-1!==h}function Fa(h){return 32767&h}function Ba(h,d){let b=function(h){return h>>16}(h),w=d;for(;b>0;)w=w[15],b--;return w}let Xl=!0;function cc(h){const d=Xl;return Xl=h,d}let mt=0;function et(h,d){const b=jt(h,d);if(-1!==b)return b;const w=d[1];w.firstCreatePass&&(h.injectorIndex=d.length,kt(w.data,h),kt(d,null),kt(w.blueprint,null));const O=me(h,d),F=h.injectorIndex;if(Ys(O)){const $=Fa(O),ct=Ba(O,d),Ct=ct[1].data;for(let $t=0;$t<8;$t++)d[F+$t]=ct[$+$t]|Ct[$+$t]}return d[F+8]=O,F}function kt(h,d){h.push(0,0,0,0,0,0,0,0,d)}function jt(h,d){return-1===h.injectorIndex||h.parent&&h.parent.injectorIndex===h.injectorIndex||null===d[h.injectorIndex+8]?-1:h.injectorIndex}function me(h,d){if(h.parent&&-1!==h.parent.injectorIndex)return h.parent.injectorIndex;let b=0,w=null,O=d;for(;null!==O;){const F=O[1],$=F.type;if(w=2===$?F.declTNode:1===$?O[6]:null,null===w)return-1;if(b++,O=O[15],-1!==w.injectorIndex)return w.injectorIndex|b<<16}return-1}function Ue(h,d,b){!function(h,d,b){let w;"string"==typeof b?w=b.charCodeAt(0)||0:b.hasOwnProperty(dt)&&(w=b[dt]),null==w&&(w=b[dt]=mt++);const O=255&w;d.data[h+(O>>5)]|=1<<O}(h,d,b)}function xi(h,d,b){if(b&te.Optional)return h;lt(d,"NodeInjector")}function pn(h,d,b,w){if(b&te.Optional&&void 0===w&&(w=null),0==(b&(te.Self|te.Host))){const O=h[9],F=_e(void 0);try{return O?O.get(d,w,b&te.Optional):be(d,w,b&te.Optional)}finally{_e(F)}}return xi(w,d,b)}function lr(h,d,b,w=te.Default,O){if(null!==h){const F=function(h){if("string"==typeof h)return h.charCodeAt(0)||0;const d=h.hasOwnProperty(dt)?h[dt]:void 0;return"number"==typeof d?d>=0?255&d:kr:d}(b);if("function"==typeof F){if(!Rs(d,h,w))return w&te.Host?xi(O,b,w):pn(d,b,w,O);try{const $=F(w);if(null!=$||w&te.Optional)return $;lt(b)}finally{Za()}}else if("number"==typeof F){let $=null,ct=jt(h,d),Ct=-1,$t=w&te.Host?d[16][6]:null;for((-1===ct||w&te.SkipSelf)&&(Ct=-1===ct?me(h,d):d[ct+8],-1!==Ct&&ys(w,!1)?($=d[1],ct=Fa(Ct),d=Ba(Ct,d)):ct=-1);-1!==ct;){const fe=d[1];if(As(F,ct,fe.data)){const Ne=so(ct,d,b,$,w,$t);if(Ne!==Hn)return Ne}Ct=d[ct+8],-1!==Ct&&ys(w,d[1].data[ct+8]===$t)&&As(F,ct,d)?($=fe,ct=Fa(Ct),d=Ba(Ct,d)):ct=-1}}}return pn(d,b,w,O)}const Hn={};function kr(){return new sa(z(),Ji())}function so(h,d,b,w,O,F){const $=d[1],ct=$.data[h+8],fe=cl(ct,$,b,null==w?Hs(ct)&&Xl:w!=$&&0!=(3&ct.type),O&te.Host&&F===ct);return null!==fe?Xs(d,$,fe,ct):Hn}function cl(h,d,b,w,O){const F=h.providerIndexes,$=d.data,ct=1048575&F,Ct=h.directiveStart,fe=F>>20,si=O?ct+fe:h.directiveEnd;for(let Ci=w?ct:ct+fe;Ci<si;Ci++){const Yi=$[Ci];if(Ci<Ct&&b===Yi||Ci>=Ct&&Yi.type===b)return Ci}if(O){const Ci=$[Ct];if(Ci&&ho(Ci)&&Ci.type===b)return Ct}return null}function Xs(h,d,b,w){let O=h[b];const F=d.data;if(function(h){return h instanceof Ho}(O)){const $=O;$.resolving&&function(h,d){throw new bt("200",`Circular dependency in DI detected for ${h}`)}(Bt(F[b]));const ct=cc($.canSeeViewProviders);$.resolving=!0;const Ct=$.injectImpl?_e($.injectImpl):null;Rs(h,w,te.Default);try{O=h[b]=$.factory(void 0,F,h,w),d.firstCreatePass&&b>=w.directiveStart&&function(h,d,b){const{ngOnChanges:w,ngOnInit:O,ngDoCheck:F}=d.type.prototype;if(w){const $=Vs(d);(b.preOrderHooks||(b.preOrderHooks=[])).push(h,$),(b.preOrderCheckHooks||(b.preOrderCheckHooks=[])).push(h,$)}O&&(b.preOrderHooks||(b.preOrderHooks=[])).push(0-h,O),F&&((b.preOrderHooks||(b.preOrderHooks=[])).push(h,F),(b.preOrderCheckHooks||(b.preOrderCheckHooks=[])).push(h,F))}(b,F[b],d)}finally{null!==Ct&&_e(Ct),cc(ct),$.resolving=!1,Za()}}return O}function As(h,d,b){return!!(b[d+(h>>5)]&1<<h)}function ys(h,d){return!(h&te.Self||h&te.Host&&d)}class sa{constructor(d,b){this._tNode=d,this._lView=b}get(d,b,w){return lr(this._tNode,this._lView,d,w,b)}}function Tl(h){return zt(()=>{const d=h.prototype.constructor,b=d[Pt]||ga(d),w=Object.prototype;let O=Object.getPrototypeOf(h.prototype).constructor;for(;O&&O!==w;){const F=O[Pt]||ga(O);if(F&&F!==b)return F;O=Object.getPrototypeOf(O)}return F=>new F})}function ga(h){return it(h)?()=>{const d=ga(G(h));return d&&d()}:ls(h)}function hc(h){return function(h,d){if("class"===d)return h.classes;if("style"===d)return h.styles;const b=h.attrs;if(b){const w=b.length;let O=0;for(;O<w;){const F=b[O];if(ac(F))break;if(0===F)O+=2;else if("number"==typeof F)for(O++;O<w&&"string"==typeof b[O];)O++;else{if(F===d)return b[O+1];O+=2}}}return null}(z(),h)}const Jl="__parameters__";function zr(h,d,b){return zt(()=>{const w=function(h){return function(...b){if(h){const w=h(...b);for(const O in w)this[O]=w[O]}}}(d);function O(...F){if(this instanceof O)return w.apply(this,F),this;const $=new O(...F);return ct.annotation=$,ct;function ct(Ct,$t,fe){const Ne=Ct.hasOwnProperty(Jl)?Ct[Jl]:Object.defineProperty(Ct,Jl,{value:[]})[Jl];for(;Ne.length<=fe;)Ne.push(null);return(Ne[fe]=Ne[fe]||[]).push($),Ct}}return b&&(O.prototype=Object.create(b.prototype)),O.prototype.ngMetadataName=h,O.annotationCls=O,O})}class yo{constructor(d,b){this._desc=d,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof b?this.__NG_ELEMENT_ID__=b:void 0!==b&&(this.\u0275prov=we({token:this,providedIn:b.providedIn||"root",factory:b.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ju=new yo("AnalyzeForEntryComponents");function fo(h,d){void 0===d&&(d=h);for(let b=0;b<h.length;b++){let w=h[b];Array.isArray(w)?(d===h&&(d=h.slice(0,b)),fo(w,d)):d!==h&&d.push(w)}return d}function wa(h,d){h.forEach(b=>Array.isArray(b)?wa(b,d):d(b))}function xa(h,d,b){d>=h.length?h.push(b):h.splice(d,0,b)}function _a(h,d){return d>=h.length-1?h.pop():h.splice(d,1)[0]}function Zc(h,d){const b=[];for(let w=0;w<h;w++)b.push(d);return b}function Yo(h,d,b){let w=pc(h,d);return w>=0?h[1|w]=b:(w=~w,function(h,d,b,w){let O=h.length;if(O==d)h.push(b,w);else if(1===O)h.push(w,h[0]),h[0]=b;else{for(O--,h.push(h[O-1],h[O]);O>d;)h[O]=h[O-2],O--;h[d]=b,h[d+1]=w}}(h,w,d,b)),w}function qc(h,d){const b=pc(h,d);if(b>=0)return h[1|b]}function pc(h,d){return function(h,d,b){let w=0,O=h.length>>b;for(;O!==w;){const F=w+(O-w>>1),$=h[F<<b];if(d===$)return F<<b;$>d?O=F:w=F+1}return~(O<<b)}(h,d,1)}const ql={},mu="__NG_DI_FLAG__",Eo="ngTempTokenPath",gc=/\n/gm,mc="__source",Ua=r({provide:String,useValue:r});let aa;function iu(h){const d=aa;return aa=h,d}function Sl(h,d=te.Default){if(void 0===aa)throw new Error("inject() must be called from an injection context");return null===aa?be(h,void 0,d):aa.get(h,d&te.Optional?null:void 0,d)}function Uo(h,d=te.Default){return(Me||Sl)(G(h),d)}const Fl=Uo;function tc(h){const d=[];for(let b=0;b<h.length;b++){const w=G(h[b]);if(Array.isArray(w)){if(0===w.length)throw new Error("Arguments array must have arguments.");let O,F=te.Default;for(let $=0;$<w.length;$++){const ct=w[$],Ct=Qu(ct);"number"==typeof Ct?-1===Ct?O=ct.token:F|=Ct:O=ct}d.push(Uo(O,F))}else d.push(Uo(w))}return d}function dl(h,d){return h[mu]=d,h.prototype[mu]=d,h}function Qu(h){return h[mu]}const Bl=dl(zr("Inject",h=>({token:h})),-1),ec=dl(zr("Optional"),8),Va=dl(zr("SkipSelf"),4);let Rl;function el(h){var d;return(null===(d=function(){if(void 0===Rl&&(Rl=null,Ii.trustedTypes))try{Rl=Ii.trustedTypes.createPolicy("angular",{createHTML:h=>h,createScript:h=>h,createScriptURL:h=>h})}catch(h){}return Rl}())||void 0===d?void 0:d.createHTML(h))||h}class nc{constructor(d){this.changingThisBreaksApplicationSecurity=d}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class qu extends nc{getTypeName(){return"HTML"}}class ps extends nc{getTypeName(){return"Style"}}class Bc extends nc{getTypeName(){return"Script"}}class Tt extends nc{getTypeName(){return"URL"}}class Ot extends nc{getTypeName(){return"ResourceURL"}}function se(h){return h instanceof nc?h.changingThisBreaksApplicationSecurity:h}function Oe(h,d){const b=Ve(h);if(null!=b&&b!==d){if("ResourceURL"===b&&"URL"===d)return!0;throw new Error(`Required a safe ${d}, got a ${b} (see https://g.co/ng/security#xss)`)}return b===d}function Ve(h){return h instanceof nc&&h.getTypeName()||null}function fi(h){return new qu(h)}function Je(h){return new ps(h)}function oi(h){return new Bc(h)}function Li(h){return new Tt(h)}function Ni(h){return new Ot(h)}class Wn{constructor(d){this.inertDocumentHelper=d}getInertBodyElement(d){d="<body><remove></remove>"+d;try{const b=(new window.DOMParser).parseFromString(el(d),"text/html").body;return null===b?this.inertDocumentHelper.getInertBodyElement(d):(b.removeChild(b.firstChild),b)}catch(b){return null}}}class kn{constructor(d){if(this.defaultDoc=d,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const b=this.inertDocument.createElement("html");this.inertDocument.appendChild(b);const w=this.inertDocument.createElement("body");b.appendChild(w)}}getInertBodyElement(d){const b=this.inertDocument.createElement("template");if("content"in b)return b.innerHTML=el(d),b;const w=this.inertDocument.createElement("body");return w.innerHTML=el(d),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(w),w}stripCustomNsAttrs(d){const b=d.attributes;for(let O=b.length-1;0<O;O--){const $=b.item(O).name;("xmlns:ns1"===$||0===$.indexOf("ns1:"))&&d.removeAttribute($)}let w=d.firstChild;for(;w;)w.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(w),w=w.nextSibling}}const ts=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Dr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function to(h){return(h=String(h)).match(ts)||h.match(Dr)?h:"unsafe:"+h}function co(h){const d={};for(const b of h.split(","))d[b]=!0;return d}function Es(...h){const d={};for(const b of h)for(const w in b)b.hasOwnProperty(w)&&(d[w]=!0);return d}const es=co("area,br,col,hr,img,wbr"),ks=co("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),za=co("rp,rt"),yu=Es(es,Es(ks,co("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Es(za,co("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Es(za,ks)),th=co("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yc=co("srcset"),Fu=Es(th,yc,co("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),co("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),gl=co("script,style,template");class eh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(d){let b=d.firstChild,w=!0;for(;b;)if(b.nodeType===Node.ELEMENT_NODE?w=this.startElement(b):b.nodeType===Node.TEXT_NODE?this.chars(b.nodeValue):this.sanitizedSomething=!0,w&&b.firstChild)b=b.firstChild;else for(;b;){b.nodeType===Node.ELEMENT_NODE&&this.endElement(b);let O=this.checkClobberedElement(b,b.nextSibling);if(O){b=O;break}b=this.checkClobberedElement(b,b.parentNode)}return this.buf.join("")}startElement(d){const b=d.nodeName.toLowerCase();if(!yu.hasOwnProperty(b))return this.sanitizedSomething=!0,!gl.hasOwnProperty(b);this.buf.push("<"),this.buf.push(b);const w=d.attributes;for(let O=0;O<w.length;O++){const F=w.item(O),$=F.name,ct=$.toLowerCase();if(!Fu.hasOwnProperty(ct)){this.sanitizedSomething=!0;continue}let Ct=F.value;th[ct]&&(Ct=to(Ct)),yc[ct]&&(h=Ct,Ct=(h=String(h)).split(",").map(d=>to(d.trim())).join(", ")),this.buf.push(" ",$,'="',Ec(Ct),'"')}var h;return this.buf.push(">"),!0}endElement(d){const b=d.nodeName.toLowerCase();yu.hasOwnProperty(b)&&!es.hasOwnProperty(b)&&(this.buf.push("</"),this.buf.push(b),this.buf.push(">"))}chars(d){this.buf.push(Ec(d))}checkClobberedElement(d,b){if(b&&(d.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${d.outerHTML}`);return b}}const gh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ih=/([^\#-~ |!])/g;function Ec(h){return h.replace(/&/g,"&amp;").replace(gh,function(d){return"&#"+(1024*(d.charCodeAt(0)-55296)+(d.charCodeAt(1)-56320)+65536)+";"}).replace(ih,function(d){return"&#"+d.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let su;function Hc(h,d){let b=null;try{su=su||function(h){const d=new kn(h);return function(){try{return!!(new window.DOMParser).parseFromString(el(""),"text/html")}catch(h){return!1}}()?new Wn(d):d}(h);let w=d?String(d):"";b=su.getInertBodyElement(w);let O=5,F=w;do{if(0===O)throw new Error("Failed to sanitize html because the input is unstable");O--,w=F,F=b.innerHTML,b=su.getInertBodyElement(w)}while(w!==F);return el((new eh).sanitizeChildren(Uc(b)||b))}finally{if(b){const w=Uc(b)||b;for(;w.firstChild;)w.removeChild(w.firstChild)}}}function Uc(h){return"content"in h&&function(h){return h.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===h.nodeName}(h)?h.content:null}var is=(()=>((is=is||{})[is.NONE=0]="NONE",is[is.HTML=1]="HTML",is[is.STYLE=2]="STYLE",is[is.SCRIPT=3]="SCRIPT",is[is.URL=4]="URL",is[is.RESOURCE_URL=5]="RESOURCE_URL",is))();function Tc(h){const d=function(){const h=Ji();return h&&h[12]}();return d?d.sanitize(is.URL,h)||"":Oe(h,"URL")?se(h):to(wt(h))}const vh="__ngContext__";function ua(h,d){h[vh]=d}function Uu(h){const d=function(h){return h[vh]||null}(h);return d?Array.isArray(d)?d:d.lView:null}function sh(h){return h.ngOriginalError}function kh(h,...d){h.error(...d)}class Gc{constructor(){this._console=console}handleError(d){const b=this._findOriginalError(d),w=(h=d)&&h.ngErrorLogger||kh;var h;w(this._console,"ERROR",d),b&&w(this._console,"ORIGINAL ERROR",b)}_findOriginalError(d){let b=d&&sh(d);for(;b&&sh(b);)b=sh(b);return b||null}}const zc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ii))();function M(h){return h instanceof Function?h():h}var Rt=(()=>((Rt=Rt||{})[Rt.Important=1]="Important",Rt[Rt.DashCase=2]="DashCase",Rt))();function qt(h,d){return undefined(h,d)}function _i(h){const d=h[3];return vo(d)?d[3]:d}function zi(h){return hn(h[13])}function Qi(h){return hn(h[4])}function hn(h){for(;null!==h&&!vo(h);)h=h[4];return h}function un(h,d,b,w,O){if(null!=w){let F,$=!1;vo(w)?F=w:ro(w)&&($=!0,w=w[0]);const ct=Lt(w);0===h&&null!==b?null==O?Jt(d,b,ct):Xt(d,b,ct,O||null,!0):1===h&&null!==b?Xt(d,b,ct,O||null,!0):2===h?function(h,d,b){const w=ke(h,d);w&&function(h,d,b,w){Or(h)?h.removeChild(d,b,w):d.removeChild(b)}(h,w,d,b)}(d,ct,$):3===h&&d.destroyNode(ct),null!=F&&function(h,d,b,w,O){const F=b[7];F!==Lt(b)&&un(d,h,w,F,O);for(let ct=10;ct<b.length;ct++){const Ct=b[ct];Jr(Ct[1],Ct,h,d,w,F)}}(d,h,F,b,O)}}function hr(h,d,b){return Or(h)?h.createElement(d,b):null===b?h.createElement(d):h.createElementNS(b,d)}function Ur(h,d){const b=h[9],w=b.indexOf(d),O=d[3];1024&d[2]&&(d[2]&=-1025,Fo(O,-1)),b.splice(w,1)}function Ns(h,d){if(h.length<=10)return;const b=10+d,w=h[b];if(w){const O=w[17];null!==O&&O!==h&&Ur(O,w),d>0&&(h[b-1][4]=w[4]);const F=_a(h,10+d);!function(h,d){Jr(h,d,d[11],2,null,null),d[0]=null,d[6]=null}(w[1],w);const $=F[19];null!==$&&$.detachView(F[1]),w[3]=null,w[4]=null,w[2]&=-129}return w}function Ps(h,d){if(!(256&d[2])){const b=d[11];Or(b)&&b.destroyNode&&Jr(h,d,b,3,null,null),function(h){let d=h[13];if(!d)return S(h[1],h);for(;d;){let b=null;if(ro(d))b=d[13];else{const w=d[10];w&&(b=w)}if(!b){for(;d&&!d[4]&&d!==h;)ro(d)&&S(d[1],d),d=d[3];null===d&&(d=h),ro(d)&&S(d[1],d),b=d&&d[4]}d=b}}(d)}}function S(h,d){if(!(256&d[2])){d[2]&=-129,d[2]|=256,function(h,d){let b;if(null!=h&&null!=(b=h.destroyHooks))for(let w=0;w<b.length;w+=2){const O=d[b[w]];if(!(O instanceof Ho)){const F=b[w+1];if(Array.isArray(F))for(let $=0;$<F.length;$+=2){const ct=O[F[$]],Ct=F[$+1];try{Ct.call(ct)}finally{}}else try{F.call(O)}finally{}}}}(h,d),function(h,d){const b=h.cleanup,w=d[7];let O=-1;if(null!==b)for(let F=0;F<b.length-1;F+=2)if("string"==typeof b[F]){const $=b[F+1],ct="function"==typeof $?$(d):Lt(d[$]),Ct=w[O=b[F+2]],$t=b[F+3];"boolean"==typeof $t?ct.removeEventListener(b[F],Ct,$t):$t>=0?w[O=$t]():w[O=-$t].unsubscribe(),F+=2}else{const $=w[O=b[F+1]];b[F].call($)}if(null!==w){for(let F=O+1;F<w.length;F++)w[F]();d[7]=null}}(h,d),1===d[1].type&&Or(d[11])&&d[11].destroy();const b=d[17];if(null!==b&&vo(d[3])){b!==d[3]&&Ur(b,d);const w=d[19];null!==w&&w.detachView(h)}}}function rt(h,d,b){return function(h,d,b){let w=d;for(;null!==w&&40&w.type;)w=(d=w).parent;if(null===w)return b[0];if(2&w.flags){const O=h.data[w.directiveStart].encapsulation;if(O===bi.None||O===bi.Emulated)return null}return xt(w,b)}(h,d.parent,b)}function Xt(h,d,b,w,O){Or(h)?h.insertBefore(d,b,w,O):d.insertBefore(b,w,O)}function Jt(h,d,b){Or(h)?h.appendChild(d,b):d.appendChild(b)}function he(h,d,b,w,O){null!==w?Xt(h,d,b,w,O):Jt(h,d,b)}function ke(h,d){return Or(h)?h.parentNode(d):d.parentNode}function ai(h,d,b){return wi(h,d,b)}let wi=function(h,d,b){return 40&h.type?xt(h,b):null};function ln(h,d,b,w){const O=rt(h,w,d),F=d[11],ct=ai(w.parent||d[6],w,d);if(null!=O)if(Array.isArray(b))for(let Ct=0;Ct<b.length;Ct++)he(F,O,b[Ct],ct,!1);else he(F,O,b,ct,!1)}function In(h,d){if(null!==d){const b=d.type;if(3&b)return xt(d,h);if(4&b)return Pr(-1,h[d.index]);if(8&b){const w=d.child;if(null!==w)return In(h,w);{const O=h[d.index];return vo(O)?Pr(-1,O):Lt(O)}}if(32&b)return qt(d,h)()||Lt(h[d.index]);{const w=tn(h,d);return null!==w?Array.isArray(w)?w[0]:In(_i(h[16]),w):In(h,d.next)}}return null}function tn(h,d){return null!==d?h[16][6].projection[d.projection]:null}function Pr(h,d){const b=10+h+1;if(b<d.length){const w=d[b],O=w[1].firstChild;if(null!==O)return In(w,O)}return d[7]}function uo(h,d,b,w,O,F,$){for(;null!=b;){const ct=w[b.index],Ct=b.type;if($&&0===d&&(ct&&ua(Lt(ct),w),b.flags|=4),64!=(64&b.flags))if(8&Ct)uo(h,d,b.child,w,O,F,!1),un(d,h,O,ct,F);else if(32&Ct){const $t=qt(b,w);let fe;for(;fe=$t();)un(d,h,O,fe,F);un(d,h,O,ct,F)}else 16&Ct?La(h,d,w,b,O,F):un(d,h,O,ct,F);b=$?b.projectionNext:b.next}}function Jr(h,d,b,w,O,F){uo(b,w,h.firstChild,d,O,F,!1)}function La(h,d,b,w,O,F){const $=b[16],Ct=$[6].projection[w.projection];if(Array.isArray(Ct))for(let $t=0;$t<Ct.length;$t++)un(d,h,O,Ct[$t],F);else uo(h,d,Ct,$[3],O,F,!0)}function Ks(h,d,b){Or(h)?h.setAttribute(d,"style",b):d.style.cssText=b}function Br(h,d,b){Or(h)?""===b?h.removeAttribute(d,"class"):h.setAttribute(d,"class",b):d.className=b}function Js(h,d,b){let w=h.length;for(;;){const O=h.indexOf(d,b);if(-1===O)return O;if(0===O||h.charCodeAt(O-1)<=32){const F=d.length;if(O+F===w||h.charCodeAt(O+F)<=32)return O}b=O+1}}const Dc="ng-template";function Il(h,d,b){let w=0;for(;w<h.length;){let O=h[w++];if(b&&"class"===O){if(O=h[w],-1!==Js(O.toLowerCase(),d,0))return!0}else if(1===O){for(;w<h.length&&"string"==typeof(O=h[w++]);)if(O.toLowerCase()===d)return!0;return!1}}return!1}function hu(h){return 4===h.type&&h.value!==Dc}function yh(h,d,b){return d===(4!==h.type||b?h.value:Dc)}function Vh(h,d,b){let w=4;const O=h.attrs||[],F=function(h){for(let d=0;d<h.length;d++)if(ac(h[d]))return d;return h.length}(O);let $=!1;for(let ct=0;ct<d.length;ct++){const Ct=d[ct];if("number"!=typeof Ct){if(!$)if(4&w){if(w=2|1&w,""!==Ct&&!yh(h,Ct,b)||""===Ct&&1===d.length){if(Ml(w))return!1;$=!0}}else{const $t=8&w?Ct:d[++ct];if(8&w&&null!==h.attrs){if(!Il(h.attrs,$t,b)){if(Ml(w))return!1;$=!0}continue}const Ne=id(8&w?"class":Ct,O,hu(h),b);if(-1===Ne){if(Ml(w))return!1;$=!0;continue}if(""!==$t){let si;si=Ne>F?"":O[Ne+1].toLowerCase();const Ci=8&w?si:null;if(Ci&&-1!==Js(Ci,$t,0)||2&w&&$t!==si){if(Ml(w))return!1;$=!0}}}}else{if(!$&&!Ml(w)&&!Ml(Ct))return!1;if($&&Ml(Ct))continue;$=!1,w=Ct|1&w}}return Ml(w)||$}function Ml(h){return 0==(1&h)}function id(h,d,b,w){if(null===d)return-1;let O=0;if(w||!b){let F=!1;for(;O<d.length;){const $=d[O];if($===h)return O;if(3===$||6===$)F=!0;else{if(1===$||2===$){let ct=d[++O];for(;"string"==typeof ct;)ct=d[++O];continue}if(4===$)break;if(0===$){O+=4;continue}}O+=F?1:2}return-1}return function(h,d){let b=h.indexOf(4);if(b>-1)for(b++;b<h.length;){const w=h[b];if("number"==typeof w)return-1;if(w===d)return b;b++}return-1}(d,h)}function nd(h,d,b=!1){for(let w=0;w<d.length;w++)if(Vh(h,d[w],b))return!0;return!1}function du(h,d){t:for(let b=0;b<d.length;b++){const w=d[b];if(h.length===w.length){for(let O=0;O<h.length;O++)if(h[O]!==w[O])continue t;return!0}}return!1}function go(h,d){return h?":not("+d.trim()+")":d}function $s(h){let d=h[0],b=1,w=2,O="",F=!1;for(;b<h.length;){let $=h[b];if("string"==typeof $)if(2&w){const ct=h[++b];O+="["+$+(ct.length>0?'="'+ct+'"':"")+"]"}else 8&w?O+="."+$:4&w&&(O+=" "+$);else""!==O&&!Ml($)&&(d+=go(F,O),O=""),w=$,F=F||!Ml(w);b++}return""!==O&&(d+=go(F,O)),d}const Ir={};function ah(h){Yd(Rr(),Ji(),bn()+h,Hi())}function Yd(h,d,b,w){if(!w)if(3==(3&d[2])){const F=h.preOrderCheckHooks;null!==F&&da(d,F,b)}else{const F=h.preOrderHooks;null!==F&&jo(d,F,0,b)}ur(b)}function rd(h,d){return h<<17|d<<2}function Ic(h){return h>>17&32767}function Mc(h){return 2|h}function wu(h){return(131068&h)>>2}function Wh(h,d){return-131069&h|d<<2}function jh(h){return 1|h}function Np(h,d){const b=h.contentQueries;if(null!==b)for(let w=0;w<b.length;w+=2){const O=b[w],F=b[w+1];if(-1!==F){const $=h.data[F];ko(O),$.contentQueries(2,d[F],F)}}}function cd(h,d,b,w,O,F,$,ct,Ct,$t){const fe=d.blueprint.slice();return fe[0]=O,fe[2]=140|w,rr(fe),fe[3]=fe[15]=h,fe[8]=b,fe[10]=$||h&&h[10],fe[11]=ct||h&&h[11],fe[12]=Ct||h&&h[12]||null,fe[9]=$t||h&&h[9]||null,fe[6]=F,fe[16]=2==d.type?h[16]:fe,fe}function Xh(h,d,b,w,O){let F=h.data[d];if(null===F)F=function(h,d,b,w,O){const F=J(),$=Ee(),Ct=h.data[d]=function(h,d,b,w,O,F){return{type:b,index:w,insertBeforeIndex:null,injectorIndex:d?d.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:O,attrs:F,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:d,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,$?F:F&&F.parent,b,d,w,O);return null===h.firstChild&&(h.firstChild=Ct),null!==F&&($?null==F.child&&null!==Ct.parent&&(F.child=Ct):null===F.next&&(F.next=Ct)),Ct}(h,d,b,w,O),Gn.lFrame.inI18n&&(F.flags|=64);else if(64&F.type){F.type=b,F.value=w,F.attrs=O;const $=function(){const h=Gn.lFrame,d=h.currentTNode;return h.isParent?d:d.parent}();F.injectorIndex=null===$?-1:$.injectorIndex}return ie(F,!0),F}function Kh(h,d,b,w){if(0===b)return-1;const O=d.length;for(let F=0;F<b;F++)d.push(w),h.blueprint.push(w),h.data.push(null);return O}function ud(h,d,b){na(d);try{const w=h.viewQuery;null!==w&&hp(1,w,b);const O=h.template;null!==O&&ip(h,d,O,1,b),h.firstCreatePass&&(h.firstCreatePass=!1),h.staticContentQueries&&Np(h,d),h.staticViewQueries&&hp(2,h.viewQuery,b);const F=h.components;null!==F&&function(h,d){for(let b=0;b<d.length;b++)wd(h,d[b])}(d,F)}catch(w){throw h.firstCreatePass&&(h.incompleteFirstPass=!0,h.firstCreatePass=!1),w}finally{d[2]&=-5,Zo()}}function Jh(h,d,b,w){const O=d[2];if(256==(256&O))return;na(d);const F=Hi();try{rr(d),function(h){Gn.lFrame.bindingIndex=h}(h.bindingStartIndex),null!==b&&ip(h,d,b,2,w);const $=3==(3&O);if(!F)if($){const $t=h.preOrderCheckHooks;null!==$t&&da(d,$t,null)}else{const $t=h.preOrderHooks;null!==$t&&jo(d,$t,0,null),js(d,0)}if(function(h){for(let d=zi(h);null!==d;d=Qi(d)){if(!d[2])continue;const b=d[9];for(let w=0;w<b.length;w++){const O=b[w],F=O[3];0==(1024&O[2])&&Fo(F,1),O[2]|=1024}}}(d),function(h){for(let d=zi(h);null!==d;d=Qi(d))for(let b=10;b<d.length;b++){const w=d[b],O=w[1];vr(w)&&Jh(O,w,O.template,w[8])}}(d),null!==h.contentQueries&&Np(h,d),!F)if($){const $t=h.contentCheckHooks;null!==$t&&da(d,$t)}else{const $t=h.contentHooks;null!==$t&&jo(d,$t,1),js(d,1)}!function(h,d){const b=h.hostBindingOpCodes;if(null!==b)try{for(let w=0;w<b.length;w++){const O=b[w];if(O<0)ur(~O);else{const F=O,$=b[++w],ct=b[++w];Kr($,F),ct(2,d[F])}}}finally{ur(-1)}}(h,d);const ct=h.components;null!==ct&&function(h,d){for(let b=0;b<d.length;b++)Yf(h,d[b])}(d,ct);const Ct=h.viewQuery;if(null!==Ct&&hp(2,Ct,w),!F)if($){const $t=h.viewCheckHooks;null!==$t&&da(d,$t)}else{const $t=h.viewHooks;null!==$t&&jo(d,$t,2),js(d,2)}!0===h.firstUpdatePass&&(h.firstUpdatePass=!1),F||(d[2]&=-73),1024&d[2]&&(d[2]&=-1025,Fo(d[3],-1))}finally{Zo()}}function Of(h,d,b,w){const O=d[10],F=!Hi(),$=wr(d);try{F&&!$&&O.begin&&O.begin(),$&&ud(h,d,w),Jh(h,d,b,w)}finally{F&&!$&&O.end&&O.end()}}function ip(h,d,b,w,O){const F=bn(),$=2&w;try{ur(-1),$&&d.length>20&&Yd(h,d,20,Hi()),b(w,O)}finally{ur(F)}}function Pp(h,d,b){if(Bs(d)){const O=d.directiveEnd;for(let F=d.directiveStart;F<O;F++){const $=h.data[F];$.contentQueries&&$.contentQueries(1,b[F],F)}}}function np(h,d,b){!Cs()||(function(h,d,b,w){const O=b.directiveStart,F=b.directiveEnd;h.firstCreatePass||et(b,d),ua(w,d);const $=b.initialInputs;for(let ct=O;ct<F;ct++){const Ct=h.data[ct],$t=ho(Ct);$t&&Gf(d,b,Ct);const fe=Xs(d,h,ct,b);ua(fe,d),null!==$&&Wf(0,ct-O,fe,Ct,0,$),$t&&(Vn(b.index,d)[8]=fe)}}(h,d,b,xt(b,d)),128==(128&b.flags)&&function(h,d,b){const w=b.directiveStart,O=b.directiveEnd,$=b.index,ct=Gn.lFrame.currentDirectiveIndex;try{ur($);for(let Ct=w;Ct<O;Ct++){const $t=h.data[Ct],fe=d[Ct];xo(Ct),(null!==$t.hostBindings||0!==$t.hostVars||null!==$t.hostAttrs)&&Wp($t,fe)}}finally{ur(-1),xo(ct)}}(h,d,b))}function rp(h,d,b=xt){const w=d.localNames;if(null!==w){let O=d.index+1;for(let F=0;F<w.length;F+=2){const $=w[F+1],ct=-1===$?b(d,h):h[$];h[O++]=ct}}}function Bh(h){const d=h.tView;return null===d||d.incompleteFirstPass?h.tView=Td(1,null,h.template,h.decls,h.vars,h.directiveDefs,h.pipeDefs,h.viewQuery,h.schemas,h.consts):d}function Td(h,d,b,w,O,F,$,ct,Ct,$t){const fe=20+w,Ne=fe+O,si=function(h,d){const b=[];for(let w=0;w<d;w++)b.push(w<h?null:Ir);return b}(fe,Ne),Ci="function"==typeof $t?$t():$t;return si[1]={type:h,blueprint:si,template:b,queries:null,viewQuery:ct,declTNode:d,data:si.slice().fill(null,fe),bindingStartIndex:fe,expandoStartIndex:Ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof F?F():F,pipeRegistry:"function"==typeof $?$():$,firstChild:null,schemas:Ct,consts:Ci,incompleteFirstPass:!1}}function Hp(h,d,b,w){const O=hd(d);null===b?O.push(w):(O.push(b),h.firstCreatePass&&$p(h).push(w,O.length-1))}function Up(h,d,b){for(let w in h)if(h.hasOwnProperty(w)){const O=h[w];(b=null===b?{}:b).hasOwnProperty(w)?b[w].push(d,O):b[w]=[d,O]}return b}function jc(h,d,b,w,O,F,$,ct){const Ct=xt(d,b);let fe,$t=d.inputs;!ct&&null!=$t&&(fe=$t[w])?(Qp(h,b,fe,w,O),Hs(d)&&function(h,d){const b=Vn(d,h);16&b[2]||(b[2]|=64)}(b,d.index)):3&d.type&&(w=function(h){return"class"===h?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h}(w),O=null!=$?$(O,d.value||"",w):O,Or(F)?F.setProperty(Ct,w,O):Nl(w)||(Ct.setProperty?Ct.setProperty(w,O):Ct[w]=O))}function op(h,d,b,w){let O=!1;if(Cs()){const F=function(h,d,b){const w=h.directiveRegistry;let O=null;if(w)for(let F=0;F<w.length;F++){const $=w[F];nd(b,$.selectors,!1)&&(O||(O=[]),Ue(et(b,d),h,$.type),ho($)?(jp(h,b),O.unshift($)):O.push($))}return O}(h,d,b),$=null===w?null:{"":-1};if(null!==F){O=!0,Yp(b,h.data.length,F.length);for(let fe=0;fe<F.length;fe++){const Ne=F[fe];Ne.providersResolver&&Ne.providersResolver(Ne)}let ct=!1,Ct=!1,$t=Kh(h,d,F.length,null);for(let fe=0;fe<F.length;fe++){const Ne=F[fe];b.mergedAttrs=lc(b.mergedAttrs,Ne.hostAttrs),Xp(h,b,d,$t,Ne),sp($t,Ne,$),null!==Ne.contentQueries&&(b.flags|=8),(null!==Ne.hostBindings||null!==Ne.hostAttrs||0!==Ne.hostVars)&&(b.flags|=128);const si=Ne.type.prototype;!ct&&(si.ngOnChanges||si.ngOnInit||si.ngDoCheck)&&((h.preOrderHooks||(h.preOrderHooks=[])).push(b.index),ct=!0),!Ct&&(si.ngOnChanges||si.ngDoCheck)&&((h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(b.index),Ct=!0),$t++}!function(h,d){const w=d.directiveEnd,O=h.data,F=d.attrs,$=[];let ct=null,Ct=null;for(let $t=d.directiveStart;$t<w;$t++){const fe=O[$t],Ne=fe.inputs,si=null===F||hu(d)?null:zf(Ne,F);$.push(si),ct=Up(Ne,$t,ct),Ct=Up(fe.outputs,$t,Ct)}null!==ct&&(ct.hasOwnProperty("class")&&(d.flags|=16),ct.hasOwnProperty("style")&&(d.flags|=32)),d.initialInputs=$,d.inputs=ct,d.outputs=Ct}(h,b)}$&&function(h,d,b){if(d){const w=h.localNames=[];for(let O=0;O<d.length;O+=2){const F=b[d[O+1]];if(null==F)throw new bt("301",`Export of name '${d[O+1]}' not found!`);w.push(d[O],F)}}}(b,w,$)}return b.mergedAttrs=lc(b.mergedAttrs,b.attrs),O}function Gp(h,d,b,w,O,F){const $=F.hostBindings;if($){let ct=h.hostBindingOpCodes;null===ct&&(ct=h.hostBindingOpCodes=[]);const Ct=~d.index;(function(h){let d=h.length;for(;d>0;){const b=h[--d];if("number"==typeof b&&b<0)return b}return 0})(ct)!=Ct&&ct.push(Ct),ct.push(w,O,$)}}function Wp(h,d){null!==h.hostBindings&&h.hostBindings(1,d)}function jp(h,d){d.flags|=2,(h.components||(h.components=[])).push(d.index)}function sp(h,d,b){if(b){if(d.exportAs)for(let w=0;w<d.exportAs.length;w++)b[d.exportAs[w]]=h;ho(d)&&(b[""]=h)}}function Yp(h,d,b){h.flags|=1,h.directiveStart=d,h.directiveEnd=d+b,h.providerIndexes=d}function Xp(h,d,b,w,O){h.data[w]=O;const F=O.factory||(O.factory=ls(O.type)),$=new Ho(F,ho(O),null);h.blueprint[w]=$,b[w]=$,Gp(h,d,0,w,Kh(h,b,O.hostVars,Ir),O)}function Gf(h,d,b){const w=xt(d,h),O=Bh(b),F=h[10],$=Rd(h,cd(h,O,null,b.onPush?64:16,w,d,F,F.createRenderer(w,b),null,null));h[d.index]=$}function Xu(h,d,b,w,O,F){const $=xt(h,d);!function(h,d,b,w,O,F,$){if(null==F)Or(h)?h.removeAttribute(d,O,b):d.removeAttribute(O);else{const ct=null==$?wt(F):$(F,w||"",O);Or(h)?h.setAttribute(d,O,ct,b):b?d.setAttributeNS(b,O,ct):d.setAttribute(O,ct)}}(d[11],$,F,h.value,b,w,O)}function Wf(h,d,b,w,O,F){const $=F[d];if(null!==$){const ct=w.setInput;for(let Ct=0;Ct<$.length;){const $t=$[Ct++],fe=$[Ct++],Ne=$[Ct++];null!==ct?w.setInput(b,Ne,$t,fe):b[fe]=Ne}}}function zf(h,d){let b=null,w=0;for(;w<d.length;){const O=d[w];if(0!==O)if(5!==O){if("number"==typeof O)break;h.hasOwnProperty(O)&&(null===b&&(b=[]),b.push(O,h[O],d[w+1])),w+=2}else w+=2;else w+=4}return b}function Kp(h,d,b,w){return new Array(h,!0,!1,d,null,0,w,b,null,null)}function Yf(h,d){const b=Vn(d,h);if(vr(b)){const w=b[1];80&b[2]?Jh(w,b,w.template,b[8]):b[5]>0&&Sd(b)}}function Sd(h){for(let w=zi(h);null!==w;w=Qi(w))for(let O=10;O<w.length;O++){const F=w[O];if(1024&F[2]){const $=F[1];Jh($,F,$.template,F[8])}else F[5]>0&&Sd(F)}const b=h[1].components;if(null!==b)for(let w=0;w<b.length;w++){const O=Vn(b[w],h);vr(O)&&O[5]>0&&Sd(O)}}function wd(h,d){const b=Vn(d,h),w=b[1];(function(h,d){for(let b=d.length;b<h.blueprint.length;b++)d.push(h.blueprint[b])})(w,b),ud(w,b,b[8])}function Rd(h,d){return h[13]?h[14][4]=d:h[13]=d,h[14]=d,d}function lp(h){for(;h;){h[2]|=64;const d=_i(h);if(Go(h)&&!d)return h;h=d}return null}function up(h,d,b){const w=d[10];w.begin&&w.begin();try{Jh(h,d,h.template,b)}catch(O){throw Zp(d,O),O}finally{w.end&&w.end()}}function Jp(h){!function(h){for(let d=0;d<h.components.length;d++){const b=h.components[d],w=Uu(b),O=w[1];Of(O,w,O.template,b)}}(h[8])}function hp(h,d,b){ko(0),d(h,b)}const Zf=(()=>Promise.resolve(null))();function hd(h){return h[7]||(h[7]=[])}function $p(h){return h.cleanup||(h.cleanup=[])}function dp(h,d,b){return(null===h||ho(h))&&(b=function(h){for(;Array.isArray(h);){if("object"==typeof h[1])return h;h=h[0]}return null}(b[d.index])),b[11]}function Zp(h,d){const b=h[9],w=b?b.get(Gc,null):null;w&&w.handleError(d)}function Qp(h,d,b,w,O){for(let F=0;F<b.length;){const $=b[F++],ct=b[F++],Ct=d[$],$t=h.data[$];null!==$t.setInput?$t.setInput(Ct,O,w,ct):Ct[ct]=O}}function uh(h,d,b){const w=j(d,h);!function(h,d,b){Or(h)?h.setValue(d,b):d.textContent=b}(h[11],w,b)}function Dd(h,d,b){let w=b?h.styles:null,O=b?h.classes:null,F=0;if(null!==d)for(let $=0;$<d.length;$++){const ct=d[$];"number"==typeof ct?F=ct:1==F?O=v(O,ct):2==F&&(w=v(w,ct+": "+d[++$]+";"))}b?h.styles=w:h.stylesWithoutHost=w,b?h.classes=O:h.classesWithoutHost=O}const pp=new yo("INJECTOR",-1);class fp{get(d,b=ql){if(b===ql){const w=new Error(`NullInjectorError: No provider for ${c(d)}!`);throw w.name="NullInjectorError",w}return b}}const hh=new yo("Set Injector scope."),dd={},xm={};let gp;function qp(){return void 0===gp&&(gp=new fp),gp}function mp(h,d=null,b=null,w){const O=tf(h,d,b,w);return O._resolveInjectorDefTypes(),O}function tf(h,d=null,b=null,w){return new qf(h,b,d||qp(),w)}class qf{constructor(d,b,w,O=null){this.parent=w,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const F=[];b&&wa(b,ct=>this.processProvider(ct,d,b)),wa([d],ct=>this.processInjectorType(ct,[],F)),this.records.set(pp,Qh(void 0,this));const $=this.records.get(hh);this.scope=null!=$?$.value:null,this.source=O||("object"==typeof d?null:c(d))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(d=>d.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(d,b=ql,w=te.Default){this.assertNotDestroyed();const O=iu(this),F=_e(void 0);try{if(!(w&te.SkipSelf)){let ct=this.records.get(d);if(void 0===ct){const Ct=("function"==typeof(h=d)||"object"==typeof h&&h instanceof yo)&&Ae(d);ct=Ct&&this.injectableDefInScope(Ct)?Qh($h(d),dd):null,this.records.set(d,ct)}if(null!=ct)return this.hydrate(d,ct)}return(w&te.Self?qp():this.parent).get(d,b=w&te.Optional&&b===ql?null:b)}catch($){if("NullInjectorError"===$.name){if(($[Eo]=$[Eo]||[]).unshift(c(d)),O)throw $;return function(h,d,b,w){const O=h[Eo];throw d[mc]&&O.unshift(d[mc]),h.message=function(h,d,b,w=null){h=h&&"\n"===h.charAt(0)&&"\u0275"==h.charAt(1)?h.substr(2):h;let O=c(d);if(Array.isArray(d))O=d.map(c).join(" -> ");else if("object"==typeof d){let F=[];for(let $ in d)if(d.hasOwnProperty($)){let ct=d[$];F.push($+":"+("string"==typeof ct?JSON.stringify(ct):c(ct)))}O=`{${F.join(", ")}}`}return`${b}${w?"("+w+")":""}[${O}]: ${h.replace(gc,"\n  ")}`}("\n"+h.message,O,b,w),h.ngTokenPath=O,h[Eo]=null,h}($,d,"R3InjectorError",this.source)}throw $}finally{_e(F),iu(O)}var h}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(d=>this.get(d))}toString(){const d=[];return this.records.forEach((w,O)=>d.push(c(O))),`R3Injector[${d.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(d,b,w){if(!(d=G(d)))return!1;let O=Yt(d);const F=null==O&&d.ngModule||void 0,$=void 0===F?d:F,ct=-1!==w.indexOf($);if(void 0!==F&&(O=Yt(F)),null==O)return!1;if(null!=O.imports&&!ct){let fe;w.push($);try{wa(O.imports,Ne=>{this.processInjectorType(Ne,b,w)&&(void 0===fe&&(fe=[]),fe.push(Ne))})}finally{}if(void 0!==fe)for(let Ne=0;Ne<fe.length;Ne++){const{ngModule:si,providers:Ci}=fe[Ne];wa(Ci,Yi=>this.processProvider(Yi,si,Ci||Qe))}}this.injectorDefTypes.add($);const Ct=ls($)||(()=>new $);this.records.set($,Qh(Ct,dd));const $t=O.providers;if(null!=$t&&!ct){const fe=d;wa($t,Ne=>this.processProvider(Ne,fe,$t))}return void 0!==F&&void 0!==d.providers}processProvider(d,b,w){let O=qh(d=G(d))?d:G(d&&d.provide);const F=(h=d,nf(h)?Qh(void 0,h.useValue):Qh(Zh(h),dd));var h;if(qh(d)||!0!==d.multi)this.records.get(O);else{let $=this.records.get(O);$||($=Qh(void 0,dd,!0),$.factory=()=>tc($.multi),this.records.set(O,$)),O=d,$.multi.push(d)}this.records.set(O,F)}hydrate(d,b){return b.value===dd&&(b.value=xm,b.value=b.factory()),"object"==typeof b.value&&b.value&&null!==(h=b.value)&&"object"==typeof h&&"function"==typeof h.ngOnDestroy&&this.onDestroy.add(b.value),b.value;var h}injectableDefInScope(d){if(!d.providedIn)return!1;const b=G(d.providedIn);return"string"==typeof b?"any"===b||b===this.scope:this.injectorDefTypes.has(b)}}function $h(h){const d=Ae(h),b=null!==d?d.factory:ls(h);if(null!==b)return b;if(h instanceof yo)throw new Error(`Token ${c(h)} is missing a \u0275prov definition.`);if(h instanceof Function)return function(h){const d=h.length;if(d>0){const w=Zc(d,"?");throw new Error(`Can't resolve all parameters for ${c(h)}: (${w.join(", ")}).`)}const b=function(h){const d=h&&(h[ye]||h[Te]);if(d){const b=function(h){if(h.hasOwnProperty("name"))return h.name;const d=(""+h).match(/^function\s*([^\s(]+)/);return null===d?"":d[1]}(h);return console.warn(`DEPRECATED: DI is instantiating a token "${b}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${b}" class.`),d}return null}(h);return null!==b?()=>b.factory(h):()=>new h}(h);throw new Error("unreachable")}function Zh(h,d,b){let w;if(qh(h)){const O=G(h);return ls(O)||$h(O)}if(nf(h))w=()=>G(h.useValue);else if(function(h){return!(!h||!h.useFactory)}(h))w=()=>h.useFactory(...tc(h.deps||[]));else if(function(h){return!(!h||!h.useExisting)}(h))w=()=>Uo(G(h.useExisting));else{const O=G(h&&(h.useClass||h.provide));if(!function(h){return!!h.deps}(h))return ls(O)||$h(O);w=()=>new O(...tc(h.deps))}return w}function Qh(h,d,b=!1){return{factory:h,value:d,multi:b?[]:void 0}}function nf(h){return null!==h&&"object"==typeof h&&Ua in h}function qh(h){return"function"==typeof h}let fu=(()=>{class h{static create(b,w){var O;if(Array.isArray(b))return mp({name:""},w,b,"");{const F=null!==(O=b.name)&&void 0!==O?O:"";return mp({name:F},b.parent,b.providers,F)}}}return h.THROW_IF_NOT_FOUND=ql,h.NULL=new fp,h.\u0275prov=we({token:h,providedIn:"any",factory:()=>Uo(pp)}),h.__NG_ELEMENT_ID__=-1,h})();function Xn(h,d){bs(Uu(h)[1],z())}function Nr(h){let d=function(h){return Object.getPrototypeOf(h.prototype).constructor}(h.type),b=!0;const w=[h];for(;d;){let O;if(ho(h))O=d.\u0275cmp||d.\u0275dir;else{if(d.\u0275cmp)throw new Error("Directives cannot inherit Components");O=d.\u0275dir}if(O){if(b){w.push(O);const $=h;$.inputs=Cn(h.inputs),$.declaredInputs=Cn(h.declaredInputs),$.outputs=Cn(h.outputs);const ct=O.hostBindings;ct&&os(h,ct);const Ct=O.viewQuery,$t=O.contentQueries;if(Ct&&wn(h,Ct),$t&&mr(h,$t),s(h.inputs,O.inputs),s(h.declaredInputs,O.declaredInputs),s(h.outputs,O.outputs),ho(O)&&O.data.animation){const fe=h.data;fe.animation=(fe.animation||[]).concat(O.data.animation)}}const F=O.features;if(F)for(let $=0;$<F.length;$++){const ct=F[$];ct&&ct.ngInherit&&ct(h),ct===Nr&&(b=!1)}}d=Object.getPrototypeOf(d)}!function(h){let d=0,b=null;for(let w=h.length-1;w>=0;w--){const O=h[w];O.hostVars=d+=O.hostVars,O.hostAttrs=lc(O.hostAttrs,b=lc(b,O.hostAttrs))}}(w)}function Cn(h){return h===Ce?{}:h===Qe?[]:h}function wn(h,d){const b=h.viewQuery;h.viewQuery=b?(w,O)=>{d(w,O),b(w,O)}:d}function mr(h,d){const b=h.contentQueries;h.contentQueries=b?(w,O,F)=>{d(w,O,F),b(w,O,F)}:d}function os(h,d){const b=h.hostBindings;h.hostBindings=b?(w,O)=>{d(w,O),b(w,O)}:d}let rn=null;function Kn(){if(!rn){const h=Ii.Symbol;if(h&&h.iterator)rn=h.iterator;else{const d=Object.getOwnPropertyNames(Map.prototype);for(let b=0;b<d.length;++b){const w=d[b];"entries"!==w&&"size"!==w&&Map.prototype[w]===Map.prototype.entries&&(rn=w)}}}return rn}function ba(h){return!!ed(h)&&(Array.isArray(h)||!(h instanceof Map)&&Kn()in h)}function ed(h){return null!==h&&("function"==typeof h||"object"==typeof h)}function wo(h,d,b){return h[d]=b}function jl(h,d,b){return!Object.is(h[d],b)&&(h[d]=b,!0)}function pd(h,d,b,w){const O=jl(h,d,b);return jl(h,d+1,w)||O}function ag(h,d,b,w){const O=Ji();return jl(O,Pn(),d)&&(Rr(),Xu(fr(),O,h,d,b,w)),ag}function Md(h,d,b,w){return jl(h,Pn(),b)?d+wt(b)+w:Ir}function Od(h,d,b,w,O,F,$,ct){const $t=function(h,d,b,w,O){const F=pd(h,d,b,w);return jl(h,d+2,O)||F}(h,Yn(),b,O,$);return Fn(3),$t?d+wt(b)+w+wt(O)+F+wt($)+ct:Ir}function Gm(h,d,b,w,O,F,$,ct){const Ct=Ji(),$t=Rr(),fe=h+20,Ne=$t.firstCreatePass?function(h,d,b,w,O,F,$,ct,Ct){const $t=d.consts,fe=Xh(d,h,4,$||null,Gr($t,ct));op(d,b,fe,Gr($t,Ct)),bs(d,fe);const Ne=fe.tViews=Td(2,fe,w,O,F,d.directiveRegistry,d.pipeRegistry,null,d.schemas,$t);return null!==d.queries&&(d.queries.template(d,fe),Ne.queries=d.queries.embeddedTView(fe)),fe}(fe,$t,Ct,d,b,w,O,F,$):$t.data[fe];ie(Ne,!1);const si=Ct[11].createComment("");ln($t,Ct,si,Ne),ua(si,Ct),Rd(Ct,Ct[fe]=Kp(si,Ct,si,Ne)),tr(Ne)&&np($t,Ct,Ne),null!=$&&rp(Ct,Ne,ct)}function Wm(h){return an(Gn.lFrame.contextLView,20+h)}function _p(h,d=te.Default){const b=Ji();return null===b?Uo(h,d):lr(z(),b,G(h),d)}function t_(){throw new Error("invalid")}function dg(h,d,b){const w=Ji();return jl(w,Pn(),d)&&jc(Rr(),fr(),w,h,d,w[11],b,!1),dg}function pg(h,d,b,w,O){const $=O?"class":"style";Qp(h,b,d.inputs[$],$,w)}function fg(h,d,b,w){const O=Ji(),F=Rr(),$=20+h,ct=O[11],Ct=O[$]=hr(ct,d,Gn.lFrame.currentNamespace),$t=F.firstCreatePass?function(h,d,b,w,O,F,$){const ct=d.consts,$t=Xh(d,h,2,O,Gr(ct,F));return op(d,b,$t,Gr(ct,$)),null!==$t.attrs&&Dd($t,$t.attrs,!1),null!==$t.mergedAttrs&&Dd($t,$t.mergedAttrs,!0),null!==d.queries&&d.queries.elementStart(d,$t),$t}($,F,O,0,d,b,w):F.data[$];ie($t,!0);const fe=$t.mergedAttrs;null!==fe&&Oa(ct,Ct,fe);const Ne=$t.classes;null!==Ne&&Br(ct,Ct,Ne);const si=$t.styles;null!==si&&Ks(ct,Ct,si),64!=(64&$t.flags)&&ln(F,O,Ct,$t),0===Gn.lFrame.elementDepthCount&&ua(Ct,O),Gn.lFrame.elementDepthCount++,tr($t)&&(np(F,O,$t),Pp(F,$t,O)),null!==w&&rp(O,$t)}function gg(){let h=z();Ee()?Ye():(h=h.parent,ie(h,!1));const d=h;Gn.lFrame.elementDepthCount--;const b=Rr();b.firstCreatePass&&(bs(b,h),Bs(h)&&b.queries.elementEnd(h)),null!=d.classesWithoutHost&&function(h){return 0!=(16&h.flags)}(d)&&pg(b,d,Ji(),d.classesWithoutHost,!0),null!=d.stylesWithoutHost&&function(h){return 0!=(32&h.flags)}(d)&&pg(b,d,Ji(),d.stylesWithoutHost,!1)}function e_(h,d,b,w){fg(h,d,b,w),gg()}function mg(h,d,b){const w=Ji(),O=Rr(),F=h+20,$=O.firstCreatePass?function(h,d,b,w,O){const F=d.consts,$=Gr(F,w),ct=Xh(d,h,8,"ng-container",$);return null!==$&&Dd(ct,$,!0),op(d,b,ct,Gr(F,O)),null!==d.queries&&d.queries.elementStart(d,ct),ct}(F,O,w,d,b):O.data[F];ie($,!0);const ct=w[F]=w[11].createComment("");ln(O,w,ct,$),ua(ct,w),tr($)&&(np(O,w,$),Pp(O,$,w)),null!=b&&rp(w,$)}function _g(){let h=z();const d=Rr();Ee()?Ye():(h=h.parent,ie(h,!1)),d.firstCreatePass&&(bs(d,h),Bs(h)&&d.queries.elementEnd(h))}function i_(h,d,b){mg(h,d,b),_g()}function n_(){return Ji()}function vg(h){return!!h&&"function"==typeof h.then}function r_(h){return!!h&&"function"==typeof h.subscribe}const o_=r_;function bg(h,d,b,w){const O=Ji(),F=Rr(),$=z();return s_(F,O,O[11],$,h,d,!!b,w),bg}function yg(h,d){const b=z(),w=Ji(),O=Rr();return s_(O,w,dp(Ws(O.data),b,w),b,h,d,!1),yg}function s_(h,d,b,w,O,F,$,ct){const Ct=tr(w),fe=h.firstCreatePass&&$p(h),Ne=d[8],si=hd(d);let Ci=!0;if(3&w.type||ct){const Mn=xt(w,d),$n=ct?ct(Mn):Mn,nn=si.length,dr=ct?Ro=>ct(Lt(Ro[w.index])):w.index;if(Or(b)){let Ro=null;if(!ct&&Ct&&(Ro=function(h,d,b,w){const O=h.cleanup;if(null!=O)for(let F=0;F<O.length-1;F+=2){const $=O[F];if($===b&&O[F+1]===w){const ct=d[7],Ct=O[F+2];return ct.length>Ct?ct[Ct]:null}"string"==typeof $&&(F+=2)}return null}(h,d,O,w.index)),null!==Ro)(Ro.__ngLastListenerFn__||Ro).__ngNextListenerFn__=F,Ro.__ngLastListenerFn__=F,Ci=!1;else{F=Eg(w,d,Ne,F,!1);const ms=b.listen($n,O,F);si.push(F,ms),fe&&fe.push(O,dr,nn,nn+1)}}else F=Eg(w,d,Ne,F,!0),$n.addEventListener(O,F,$),si.push(F),fe&&fe.push(O,dr,nn,$)}else F=Eg(w,d,Ne,F,!1);const Yi=w.outputs;let gn;if(Ci&&null!==Yi&&(gn=Yi[O])){const Mn=gn.length;if(Mn)for(let $n=0;$n<Mn;$n+=2){const Iu=d[gn[$n]][gn[$n+1]].subscribe(F),md=si.length;si.push(F,Iu),fe&&fe.push(O,w.index,md,-(md+1))}}}function a_(h,d,b,w){try{return!1!==b(w)}catch(O){return Zp(h,O),!1}}function Eg(h,d,b,w,O){return function F($){if($===Function)return w;const ct=2&h.flags?Vn(h.index,d):d;0==(32&d[2])&&lp(ct);let Ct=a_(d,0,w,$),$t=F.__ngNextListenerFn__;for(;$t;)Ct=a_(d,0,$t,$)&&Ct,$t=$t.__ngNextListenerFn__;return O&&!1===Ct&&($.preventDefault(),$.returnValue=!1),Ct}}function l_(h=1){return function(h){return(Gn.lFrame.contextLView=function(h,d){for(;h>0;)d=d[15],h--;return d}(h,Gn.lFrame.contextLView))[8]}(h)}function by(h,d){let b=null;const w=function(h){const d=h.attrs;if(null!=d){const b=d.indexOf(5);if(0==(1&b))return d[b+1]}return null}(h);for(let O=0;O<d.length;O++){const F=d[O];if("*"!==F){if(null===w?nd(h,F,!0):du(w,F))return O}else b=O}return b}function c_(h){const d=Ji()[16][6];if(!d.projection){const w=d.projection=Zc(h?h.length:1,null),O=w.slice();let F=d.child;for(;null!==F;){const $=h?by(F,h):0;null!==$&&(O[$]?O[$].projectionNext=F:w[$]=F,O[$]=F),F=F.next}}}function u_(h,d=0,b){const w=Ji(),O=Rr(),F=Xh(O,20+h,16,null,b||null);null===F.projection&&(F.projection=d),Ye(),64!=(64&F.flags)&&function(h,d,b){La(d[11],0,d,b,rt(h,b,d),ai(b.parent||d[6],b,d))}(O,w,F)}function Tg(h,d,b){return Cg(h,"",d,"",b),Tg}function Cg(h,d,b,w,O){const F=Ji(),$=Md(F,d,b,w);return $!==Ir&&jc(Rr(),fr(),F,h,$,F[11],O,!1),Cg}function b_(h,d,b,w,O){const F=h[b+1],$=null===d;let ct=w?Ic(F):wu(F),Ct=!1;for(;0!==ct&&(!1===Ct||$);){const fe=h[ct+1];Ty(h[ct],d)&&(Ct=!0,h[ct+1]=w?jh(fe):Mc(fe)),ct=w?Ic(fe):wu(fe)}Ct&&(h[b+1]=w?Mc(F):jh(F))}function Ty(h,d){return null===h||null==d||(Array.isArray(h)?h[1]:h)===d||!(!Array.isArray(h)||"string"!=typeof d)&&pc(h,d)>=0}const Ol={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function y_(h){return h.substring(Ol.key,Ol.keyEnd)}function E_(h,d){const b=Ol.textEnd;return b===d?-1:(d=Ol.keyEnd=function(h,d,b){for(;d<b&&h.charCodeAt(d)>32;)d++;return d}(h,Ol.key=d,b),Bd(h,d,b))}function Bd(h,d,b){for(;d<b&&h.charCodeAt(d)<=32;)d++;return d}function Sg(h,d,b){return dh(h,d,b,!1),Sg}function wg(h,d){return dh(h,d,null,!0),wg}function Sh(h,d){for(let b=function(h){return function(h){Ol.key=0,Ol.keyEnd=0,Ol.value=0,Ol.valueEnd=0,Ol.textEnd=h.length}(h),E_(h,Bd(h,0,Ol.textEnd))}(d);b>=0;b=E_(d,b))Yo(h,y_(d),!0)}function dh(h,d,b,w){const O=Ji(),F=Rr(),$=Fn(2);F.firstUpdatePass&&D_(F,h,$,w),d!==Ir&&jl(O,$,d)&&M_(F,F.data[bn()],O,O[11],h,O[$+1]=function(h,d){return null==h||("string"==typeof d?h+=d:"object"==typeof h&&(h=c(se(h)))),h}(d,b),w,$)}function R_(h,d){return d>=h.expandoStartIndex}function D_(h,d,b,w){const O=h.data;if(null===O[b+1]){const F=O[bn()],$=R_(h,b);O_(F,w)&&null===d&&!$&&(d=!1),d=function(h,d,b,w){const O=Ws(h);let F=w?d.residualClasses:d.residualStyles;if(null===O)0===(w?d.classBindings:d.styleBindings)&&(b=vp(b=Rg(null,h,d,b,w),d.attrs,w),F=null);else{const $=d.directiveStylingLast;if(-1===$||h[$]!==O)if(b=Rg(O,h,d,b,w),null===F){let Ct=function(h,d,b){const w=b?d.classBindings:d.styleBindings;if(0!==wu(w))return h[Ic(w)]}(h,d,w);void 0!==Ct&&Array.isArray(Ct)&&(Ct=Rg(null,h,d,Ct[1],w),Ct=vp(Ct,d.attrs,w),function(h,d,b,w){h[Ic(b?d.classBindings:d.styleBindings)]=w}(h,d,w,Ct))}else F=function(h,d,b){let w;const O=d.directiveEnd;for(let F=1+d.directiveStylingLast;F<O;F++)w=vp(w,h[F].hostAttrs,b);return vp(w,d.attrs,b)}(h,d,w)}return void 0!==F&&(w?d.residualClasses=F:d.residualStyles=F),b}(O,F,d,w),function(h,d,b,w,O,F){let $=F?d.classBindings:d.styleBindings,ct=Ic($),Ct=wu($);h[w]=b;let fe,$t=!1;if(Array.isArray(b)){const Ne=b;fe=Ne[1],(null===fe||pc(Ne,fe)>0)&&($t=!0)}else fe=b;if(O)if(0!==Ct){const si=Ic(h[ct+1]);h[w+1]=rd(si,ct),0!==si&&(h[si+1]=Wh(h[si+1],w)),h[ct+1]=function(h,d){return 131071&h|d<<17}(h[ct+1],w)}else h[w+1]=rd(ct,0),0!==ct&&(h[ct+1]=Wh(h[ct+1],w)),ct=w;else h[w+1]=rd(Ct,0),0===ct?ct=w:h[Ct+1]=Wh(h[Ct+1],w),Ct=w;$t&&(h[w+1]=Mc(h[w+1])),b_(h,fe,w,!0),b_(h,fe,w,!1),function(h,d,b,w,O){const F=O?h.residualClasses:h.residualStyles;null!=F&&"string"==typeof d&&pc(F,d)>=0&&(b[w+1]=jh(b[w+1]))}(d,fe,h,w,F),$=rd(ct,Ct),F?d.classBindings=$:d.styleBindings=$}(O,F,d,b,$,w)}}function Rg(h,d,b,w,O){let F=null;const $=b.directiveEnd;let ct=b.directiveStylingLast;for(-1===ct?ct=b.directiveStart:ct++;ct<$&&(F=d[ct],w=vp(w,F.hostAttrs,O),F!==h);)ct++;return null!==h&&(b.directiveStylingLast=ct),w}function vp(h,d,b){const w=b?1:2;let O=-1;if(null!==d)for(let F=0;F<d.length;F++){const $=d[F];"number"==typeof $?O=$:O===w&&(Array.isArray(h)||(h=void 0===h?[]:["",h]),Yo(h,$,!!b||d[++F]))}return void 0===h?null:h}function M_(h,d,b,w,O,F,$,ct){if(!(3&d.type))return;const Ct=h.data,$t=Ct[ct+1];lf(function(h){return 1==(1&h)}($t)?A_(Ct,d,b,O,wu($t),$):void 0)||(lf(F)||function(h){return 2==(2&h)}($t)&&(F=A_(Ct,null,b,O,ct,$)),function(h,d,b,w,O){const F=Or(h);if(d)O?F?h.addClass(b,w):b.classList.add(w):F?h.removeClass(b,w):b.classList.remove(w);else{let $=-1===w.indexOf("-")?void 0:Rt.DashCase;if(null==O)F?h.removeStyle(b,w,$):b.style.removeProperty(w);else{const ct="string"==typeof O&&O.endsWith("!important");ct&&(O=O.slice(0,-10),$|=Rt.Important),F?h.setStyle(b,w,O,$):b.style.setProperty(w,O,ct?"important":"")}}}(w,$,j(bn(),b),O,F))}function A_(h,d,b,w,O,F){const $=null===d;let ct;for(;O>0;){const Ct=h[O],$t=Array.isArray(Ct),fe=$t?Ct[1]:Ct,Ne=null===fe;let si=b[O+1];si===Ir&&(si=Ne?Qe:void 0);let Ci=Ne?qc(si,w):fe===w?si:void 0;if($t&&!lf(Ci)&&(Ci=qc(Ct,w)),lf(Ci)&&(ct=Ci,$))return ct;const Yi=h[O+1];O=$?Ic(Yi):wu(Yi)}if(null!==d){let Ct=F?d.residualClasses:d.residualStyles;null!=Ct&&(ct=qc(Ct,w))}return ct}function lf(h){return void 0!==h}function O_(h,d){return 0!=(h.flags&(d?16:32))}function x_(h,d=""){const b=Ji(),w=Rr(),O=h+20,F=w.firstCreatePass?Xh(w,O,1,d,null):w.data[O],$=b[O]=function(h,d){return Or(h)?h.createText(d):h.createTextNode(d)}(b[11],d);ln(w,b,$,F),ie(F,!1)}function Dg(h){return cf("",h,""),Dg}function cf(h,d,b){const w=Ji(),O=Md(w,h,d,b);return O!==Ir&&uh(w,bn(),O),cf}function Ig(h,d,b,w,O){const F=Ji(),$=function(h,d,b,w,O,F){const ct=pd(h,Yn(),b,O);return Fn(2),ct?d+wt(b)+w+wt(O)+F:Ir}(F,h,d,b,w,O);return $!==Ir&&uh(F,bn(),$),Ig}function Mg(h,d,b,w,O,F,$){const ct=Ji(),Ct=Od(ct,h,d,b,w,O,F,$);return Ct!==Ir&&uh(ct,bn(),Ct),Mg}function H_(h,d,b){!function(h,d,b,w){const O=Rr(),F=Fn(2);O.firstUpdatePass&&D_(O,null,F,w);const $=Ji();if(b!==Ir&&jl($,F,b)){const ct=O.data[bn()];if(O_(ct,w)&&!R_(O,F)){let Ct=w?ct.classesWithoutHost:ct.stylesWithoutHost;null!==Ct&&(b=v(Ct,b||"")),pg(O,ct,$,b,w)}else!function(h,d,b,w,O,F,$,ct){O===Ir&&(O=Qe);let Ct=0,$t=0,fe=0<O.length?O[0]:null,Ne=0<F.length?F[0]:null;for(;null!==fe||null!==Ne;){const si=Ct<O.length?O[Ct+1]:void 0,Ci=$t<F.length?F[$t+1]:void 0;let gn,Yi=null;fe===Ne?(Ct+=2,$t+=2,si!==Ci&&(Yi=Ne,gn=Ci)):null===Ne||null!==fe&&fe<Ne?(Ct+=2,Yi=fe):($t+=2,Yi=Ne,gn=Ci),null!==Yi&&M_(h,d,b,w,Yi,gn,$,ct),fe=Ct<O.length?O[Ct]:null,Ne=$t<F.length?F[$t]:null}}(O,ct,$,$[11],$[F+1],$[F+1]=function(h,d,b){if(null==b||""===b)return Qe;const w=[],O=se(b);if(Array.isArray(O))for(let F=0;F<O.length;F++)h(w,O[F],!0);else if("object"==typeof O)for(const F in O)O.hasOwnProperty(F)&&h(w,F,O[F]);else"string"==typeof O&&d(w,O);return w}(h,d,b),w,F)}}(Yo,Sh,Md(Ji(),h,d,b),!0)}function Ag(h,d,b){const w=Ji();return jl(w,Pn(),d)&&jc(Rr(),fr(),w,h,d,w[11],b,!0),Ag}function Og(h,d,b){const w=Ji();if(jl(w,Pn(),d)){const F=Rr(),$=fr();jc(F,$,w,h,d,dp(Ws(F.data),$,w),b,!0)}return Og}const fd=void 0;var iE=["en",[["a","p"],["AM","PM"],fd],[["AM","PM"],fd,fd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fd,"{1} 'at' {0}",fd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(h){const b=Math.floor(Math.abs(h)),w=h.toString().replace(/^[^.]*\.?/,"").length;return 1===b&&0===w?1:5}];let Hd={};function xg(h){const d=function(h){return h.toLowerCase().replace(/_/g,"-")}(h);let b=$_(d);if(b)return b;const w=d.split("-")[0];if(b=$_(w),b)return b;if("en"===w)return iE;throw new Error(`Missing locale data for the locale "${h}".`)}function J_(h){return xg(h)[br.PluralCase]}function $_(h){return h in Hd||(Hd[h]=Ii.ng&&Ii.ng.common&&Ii.ng.common.locales&&Ii.ng.common.locales[h]),Hd[h]}var br=(()=>((br=br||{})[br.LocaleId=0]="LocaleId",br[br.DayPeriodsFormat=1]="DayPeriodsFormat",br[br.DayPeriodsStandalone=2]="DayPeriodsStandalone",br[br.DaysFormat=3]="DaysFormat",br[br.DaysStandalone=4]="DaysStandalone",br[br.MonthsFormat=5]="MonthsFormat",br[br.MonthsStandalone=6]="MonthsStandalone",br[br.Eras=7]="Eras",br[br.FirstDayOfWeek=8]="FirstDayOfWeek",br[br.WeekendRange=9]="WeekendRange",br[br.DateFormat=10]="DateFormat",br[br.TimeFormat=11]="TimeFormat",br[br.DateTimeFormat=12]="DateTimeFormat",br[br.NumberSymbols=13]="NumberSymbols",br[br.NumberFormats=14]="NumberFormats",br[br.CurrencyCode=15]="CurrencyCode",br[br.CurrencySymbol=16]="CurrencySymbol",br[br.CurrencyName=17]="CurrencyName",br[br.Currencies=18]="Currencies",br[br.Directionality=19]="Directionality",br[br.PluralCase=20]="PluralCase",br[br.ExtraData=21]="ExtraData",br))();const uf="en-US";let Z_=uf;function Ng(h,d,b,w,O){if(h=G(h),Array.isArray(h))for(let F=0;F<h.length;F++)Ng(h[F],d,b,w,O);else{const F=Rr(),$=Ji();let ct=qh(h)?h:G(h.provide),Ct=Zh(h);const $t=z(),fe=1048575&$t.providerIndexes,Ne=$t.directiveStart,si=$t.providerIndexes>>20;if(qh(h)||!h.multi){const Ci=new Ho(Ct,O,_p),Yi=Fg(ct,d,O?fe:fe+si,Ne);-1===Yi?(Ue(et($t,$),F,ct),Pg(F,h,d.length),d.push(ct),$t.directiveStart++,$t.directiveEnd++,O&&($t.providerIndexes+=1048576),b.push(Ci),$.push(Ci)):(b[Yi]=Ci,$[Yi]=Ci)}else{const Ci=Fg(ct,d,fe+si,Ne),Yi=Fg(ct,d,fe,fe+si),gn=Ci>=0&&b[Ci],Mn=Yi>=0&&b[Yi];if(O&&!Mn||!O&&!gn){Ue(et($t,$),F,ct);const $n=function(h,d,b,w,O){const F=new Ho(h,b,_p);return F.multi=[],F.index=d,F.componentProviders=0,Ev(F,O,w&&!b),F}(O?tT:qE,b.length,O,w,Ct);!O&&Mn&&(b[Yi].providerFactory=$n),Pg(F,h,d.length,0),d.push(ct),$t.directiveStart++,$t.directiveEnd++,O&&($t.providerIndexes+=1048576),b.push($n),$.push($n)}else Pg(F,h,Ci>-1?Ci:Yi,Ev(b[O?Yi:Ci],Ct,!O&&w));!O&&w&&Mn&&b[Yi].componentProviders++}}}function Pg(h,d,b,w){const O=qh(d),F=function(h){return!!h.useClass}(d);if(O||F){const Ct=(F?G(d.useClass):d).prototype.ngOnDestroy;if(Ct){const $t=h.destroyHooks||(h.destroyHooks=[]);if(!O&&d.multi){const fe=$t.indexOf(b);-1===fe?$t.push(b,[w,Ct]):$t[fe+1].push(w,Ct)}else $t.push(b,Ct)}}}function Ev(h,d,b){return b&&h.componentProviders++,h.multi.push(d)-1}function Fg(h,d,b,w){for(let O=b;O<w;O++)if(d[O]===h)return O;return-1}function qE(h,d,b,w){return Bg(this.multi,[])}function tT(h,d,b,w){const O=this.multi;let F;if(this.providerFactory){const $=this.providerFactory.componentProviders,ct=Xs(b,b[1],this.providerFactory.index,w);F=ct.slice(0,$),Bg(O,F);for(let Ct=$;Ct<ct.length;Ct++)F.push(ct[Ct])}else F=[],Bg(O,F);return F}function Bg(h,d){for(let b=0;b<h.length;b++)d.push((0,h[b])());return d}function Tv(h,d=[]){return b=>{b.providersResolver=(w,O)=>function(h,d,b){const w=Rr();if(w.firstCreatePass){const O=ho(h);Ng(b,w.data,w.blueprint,O,!0),Ng(d,w.data,w.blueprint,O,!1)}}(w,O?O(h):h,d)}}class Cv{}class rT{resolveComponentFactory(d){throw function(h){const d=Error(`No component factory found for ${c(h)}. Did you add it to @NgModule.entryComponents?`);return d.ngComponent=h,d}(d)}}let Cp=(()=>{class h{}return h.NULL=new rT,h})();function oT(){return Vd(z(),Ji())}function Vd(h,d){return new Sp(xt(h,d))}let Sp=(()=>{class h{constructor(b){this.nativeElement=b}}return h.__NG_ELEMENT_ID__=oT,h})();function sT(h){return h instanceof Sp?h.nativeElement:h}class wv{}let aT=(()=>{class h{}return h.__NG_ELEMENT_ID__=()=>function(){const h=Ji(),b=Vn(z().index,h);return function(h){return h[11]}(ro(b)?b:h)}(),h})(),uT=(()=>{class h{}return h.\u0275prov=we({token:h,providedIn:"root",factory:()=>null}),h})();class Rv{constructor(d){this.full=d,this.major=d.split(".")[0],this.minor=d.split(".")[1],this.patch=d.split(".").slice(2).join(".")}}const hT=new Rv("13.1.0"),Hg={};function gf(h,d,b,w,O=!1){for(;null!==b;){const F=d[b.index];if(null!==F&&w.push(Lt(F)),vo(F))for(let ct=10;ct<F.length;ct++){const Ct=F[ct],$t=Ct[1].firstChild;null!==$t&&gf(Ct[1],Ct,$t,w)}const $=b.type;if(8&$)gf(h,d,b.child,w);else if(32&$){const ct=qt(b,d);let Ct;for(;Ct=ct();)w.push(Ct)}else if(16&$){const ct=tn(d,b);if(Array.isArray(ct))w.push(...ct);else{const Ct=_i(d[16]);gf(Ct[1],Ct,ct,w,!0)}}b=O?b.projectionNext:b.next}return w}class wp{constructor(d,b){this._lView=d,this._cdRefInjectingView=b,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const d=this._lView,b=d[1];return gf(b,d,b.firstChild,[])}get context(){return this._lView[8]}set context(d){this._lView[8]=d}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const d=this._lView[3];if(vo(d)){const b=d[8],w=b?b.indexOf(this):-1;w>-1&&(Ns(d,w),_a(b,w))}this._attachedToViewContainer=!1}Ps(this._lView[1],this._lView)}onDestroy(d){Hp(this._lView[1],this._lView,null,d)}markForCheck(){lp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){up(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(h,d,b){sn(!0);try{up(h,d,b)}finally{sn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var d;this._appRef=null,Jr(this._lView[1],d=this._lView,d[11],2,null,null)}attachToAppRef(d){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=d}}class dT extends wp{constructor(d){super(d),this._view=d}detectChanges(){Jp(this._view)}checkNoChanges(){!function(h){sn(!0);try{Jp(h)}finally{sn(!1)}}(this._view)}get context(){return null}}class Dv extends Cp{constructor(d){super(),this.ngModule=d}resolveComponentFactory(d){const b=Oi(d);return new Ug(b,this.ngModule)}}function Iv(h){const d=[];for(let b in h)h.hasOwnProperty(b)&&d.push({propName:h[b],templateName:b});return d}const fT=new yo("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>zc});class Ug extends Cv{constructor(d,b){super(),this.componentDef=d,this.ngModule=b,this.componentType=d.type,this.selector=d.selectors.map($s).join(","),this.ngContentSelectors=d.ngContentSelectors?d.ngContentSelectors:[],this.isBoundToModule=!!b}get inputs(){return Iv(this.componentDef.inputs)}get outputs(){return Iv(this.componentDef.outputs)}create(d,b,w,O){const F=(O=O||this.ngModule)?function(h,d){return{get:(b,w,O)=>{const F=h.get(b,Hg,O);return F!==Hg||w===Hg?F:d.get(b,w,O)}}}(d,O.injector):d,$=F.get(wv,xn),ct=F.get(uT,null),Ct=$.createRenderer(null,this.componentDef),$t=this.componentDef.selectors[0][0]||"div",fe=w?function(h,d,b){if(Or(h))return h.selectRootElement(d,b===bi.ShadowDom);let w="string"==typeof d?h.querySelector(d):d;return w.textContent="",w}(Ct,w,this.componentDef.encapsulation):hr($.createRenderer(null,this.componentDef),$t,function(h){const d=h.toLowerCase();return"svg"===d?vs:"math"===d?"http://www.w3.org/1998/MathML/":null}($t)),Ne=this.componentDef.onPush?576:528,si=function(h,d){return{components:[],scheduler:h||zc,clean:Zf,playerHandler:d||null,flags:0}}(),Ci=Td(0,null,null,1,0,null,null,null,null,null),Yi=cd(null,Ci,si,Ne,null,null,$,Ct,ct,F);let gn,Mn;na(Yi);try{const $n=function(h,d,b,w,O,F){const $=b[1];b[20]=h;const Ct=Xh($,20,2,"#host",null),$t=Ct.mergedAttrs=d.hostAttrs;null!==$t&&(Dd(Ct,$t,!0),null!==h&&(Oa(O,h,$t),null!==Ct.classes&&Br(O,h,Ct.classes),null!==Ct.styles&&Ks(O,h,Ct.styles)));const fe=w.createRenderer(h,d),Ne=cd(b,Bh(d),null,d.onPush?64:16,b[20],Ct,w,fe,F||null,null);return $.firstCreatePass&&(Ue(et(Ct,b),$,d.type),jp($,Ct),Yp(Ct,b.length,1)),Rd(b,Ne),b[20]=Ne}(fe,this.componentDef,Yi,$,Ct);if(fe)if(w)Oa(Ct,fe,["ng-version",hT.full]);else{const{attrs:nn,classes:dr}=function(h){const d=[],b=[];let w=1,O=2;for(;w<h.length;){let F=h[w];if("string"==typeof F)2===O?""!==F&&d.push(F,h[++w]):8===O&&b.push(F);else{if(!Ml(O))break;O=F}w++}return{attrs:d,classes:b}}(this.componentDef.selectors[0]);nn&&Oa(Ct,fe,nn),dr&&dr.length>0&&Br(Ct,fe,dr.join(" "))}if(Mn=Ti(Ci,20),void 0!==b){const nn=Mn.projection=[];for(let dr=0;dr<this.ngContentSelectors.length;dr++){const Ro=b[dr];nn.push(null!=Ro?Array.from(Ro):null)}}gn=function(h,d,b,w,O){const F=b[1],$=function(h,d,b){const w=z();h.firstCreatePass&&(b.providersResolver&&b.providersResolver(b),Xp(h,w,d,Kh(h,d,1,null),b));const O=Xs(d,h,w.directiveStart,w);ua(O,d);const F=xt(w,d);return F&&ua(F,d),O}(F,b,d);if(w.components.push($),h[8]=$,O&&O.forEach(Ct=>Ct($,d)),d.contentQueries){const Ct=z();d.contentQueries(1,$,Ct.directiveStart)}const ct=z();return!F.firstCreatePass||null===d.hostBindings&&null===d.hostAttrs||(ur(ct.index),Gp(b[1],ct,0,ct.directiveStart,ct.directiveEnd,d),Wp(d,$)),$}($n,this.componentDef,Yi,si,[Xn]),ud(Ci,Yi,null)}finally{Zo()}return new _T(this.componentType,gn,Vd(Mn,Yi),Yi,Mn)}}class _T extends class{}{constructor(d,b,w,O,F){super(),this.location=w,this._rootLView=O,this._tNode=F,this.instance=b,this.hostView=this.changeDetectorRef=new dT(O),this.componentType=d}get injector(){return new sa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(d){this.hostView.onDestroy(d)}}class Gd{}class Mv{}const Wd=new Map;class xv extends Gd{constructor(d,b){super(),this._parent=b,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Dv(this);const w=nr(d);this._bootstrapComponents=M(w.bootstrap),this._r3Injector=tf(d,b,[{provide:Gd,useValue:this},{provide:Cp,useValue:this.componentFactoryResolver}],c(d)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(d)}get(d,b=fu.THROW_IF_NOT_FOUND,w=te.Default){return d===fu||d===Gd||d===pp?this:this._r3Injector.get(d,b,w)}destroy(){const d=this._r3Injector;!d.destroyed&&d.destroy(),this.destroyCbs.forEach(b=>b()),this.destroyCbs=null}onDestroy(d){this.destroyCbs.push(d)}}class Vg extends Mv{constructor(d){super(),this.moduleType=d,null!==nr(d)&&function(h){const d=new Set;!function b(w){const O=nr(w,!0),F=O.id;null!==F&&(function(h,d,b){if(d&&d!==b)throw new Error(`Duplicate module registered for ${h} - ${c(d)} vs ${c(d.name)}`)}(F,Wd.get(F),w),Wd.set(F,w));const $=M(O.imports);for(const ct of $)d.has(ct)||(d.add(ct),b(ct))}(h)}(d)}create(d){return new xv(this.moduleType,d)}}function kv(h,d,b){const w=fn()+h,O=Ji();return O[w]===Ir?wo(O,w,b?d.call(b):d()):function(h,d){return h[d]}(O,w)}function Lv(h,d,b,w){return Pv(Ji(),fn(),h,d,b,w)}function Nv(h,d,b,w,O){return function(h,d,b,w,O,F,$){const ct=d+b;return pd(h,ct,O,F)?wo(h,ct+2,$?w.call($,O,F):w(O,F)):Rp(h,ct+2)}(Ji(),fn(),h,d,b,w,O)}function Rp(h,d){const b=h[d];return b===Ir?void 0:b}function Pv(h,d,b,w,O,F){const $=d+b;return jl(h,$,O)?wo(h,$+1,F?w.call(F,O):w(O)):Rp(h,$+1)}function Vv(h,d){const b=Rr();let w;const O=h+20;b.firstCreatePass?(w=function(h,d){if(d)for(let b=d.length-1;b>=0;b--){const w=d[b];if(h===w.name)return w}}(d,b.pipeRegistry),b.data[O]=w,w.onDestroy&&(b.destroyHooks||(b.destroyHooks=[])).push(O,w.onDestroy)):w=b.data[O];const F=w.factory||(w.factory=ls(w.type)),$=_e(_p);try{const ct=cc(!1),Ct=F();return cc(ct),function(h,d,b,w){b>=h.data.length&&(h.data[b]=null,h.blueprint[b]=null),d[b]=w}(b,Ji(),O,Ct),Ct}finally{_e($)}}function Gv(h,d,b){const w=h+20,O=Ji(),F=an(O,w);return function(h,d){return h[1].data[d].pure}(O,w)?Pv(O,fn(),d,F.transform,b,F):F.transform(b)}function Gg(h){return d=>{setTimeout(h,void 0,d)}}const wh=class extends y.x{constructor(d=!1){super(),this.__isAsync=d}emit(d){super.next(d)}subscribe(d,b,w){var O,F,$;let ct=d,Ct=b||(()=>null),$t=w;if(d&&"object"==typeof d){const Ne=d;ct=null===(O=Ne.next)||void 0===O?void 0:O.bind(Ne),Ct=null===(F=Ne.error)||void 0===F?void 0:F.bind(Ne),$t=null===($=Ne.complete)||void 0===$?void 0:$.bind(Ne)}this.__isAsync&&(Ct=Gg(Ct),ct&&(ct=Gg(ct)),$t&&($t=Gg($t)));const fe=super.subscribe({next:ct,error:Ct,complete:$t});return d instanceof g.w0&&d.add(fe),fe}};function kT(){return this._results[Kn()]()}class mf{constructor(d=!1){this._emitDistinctChangesOnly=d,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const b=Kn(),w=mf.prototype;w[b]||(w[b]=kT)}get changes(){return this._changes||(this._changes=new wh)}get(d){return this._results[d]}map(d){return this._results.map(d)}filter(d){return this._results.filter(d)}find(d){return this._results.find(d)}reduce(d,b){return this._results.reduce(d,b)}forEach(d){this._results.forEach(d)}some(d){return this._results.some(d)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(d,b){const w=this;w.dirty=!1;const O=fo(d);(this._changesDetected=!function(h,d,b){if(h.length!==d.length)return!1;for(let w=0;w<h.length;w++){let O=h[w],F=d[w];if(b&&(O=b(O),F=b(F)),F!==O)return!1}return!0}(w._results,O,b))&&(w._results=O,w.length=O.length,w.last=O[this.length-1],w.first=O[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ip=(()=>{class h{}return h.__NG_ELEMENT_ID__=PT,h})();const LT=Ip,NT=class extends LT{constructor(d,b,w){super(),this._declarationLView=d,this._declarationTContainer=b,this.elementRef=w}createEmbeddedView(d){const b=this._declarationTContainer.tViews,w=cd(this._declarationLView,b,d,16,null,b.declTNode,null,null,null,null);w[17]=this._declarationLView[this._declarationTContainer.index];const F=this._declarationLView[19];return null!==F&&(w[19]=F.createEmbeddedView(b)),ud(b,w,d),new wp(w)}};function PT(){return _f(z(),Ji())}function _f(h,d){return 4&h.type?new NT(d,h,Vd(h,d)):null}let vf=(()=>{class h{}return h.__NG_ELEMENT_ID__=FT,h})();function FT(){return jv(z(),Ji())}const BT=vf,Wv=class extends BT{constructor(d,b,w){super(),this._lContainer=d,this._hostTNode=b,this._hostLView=w}get element(){return Vd(this._hostTNode,this._hostLView)}get injector(){return new sa(this._hostTNode,this._hostLView)}get parentInjector(){const d=me(this._hostTNode,this._hostLView);if(Ys(d)){const b=Ba(d,this._hostLView),w=Fa(d);return new sa(b[1].data[w+8],b)}return new sa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(d){const b=zv(this._lContainer);return null!==b&&b[d]||null}get length(){return this._lContainer.length-10}createEmbeddedView(d,b,w){const O=d.createEmbeddedView(b||{});return this.insert(O,w),O}createComponent(d,b,w,O,F){const $=d&&!("function"==typeof d);let ct;if($)ct=b;else{const Ne=b||{};ct=Ne.index,w=Ne.injector,O=Ne.projectableNodes,F=Ne.ngModuleRef}const Ct=$?d:new Ug(Oi(d)),$t=w||this.parentInjector;if(!F&&null==Ct.ngModule&&$t){const Ne=$t.get(Gd,null);Ne&&(F=Ne)}const fe=Ct.create($t,O,void 0,F);return this.insert(fe.hostView,ct),fe}insert(d,b){const w=d._lView,O=w[1];if(vo(w[3])){const fe=this.indexOf(d);if(-1!==fe)this.detach(fe);else{const Ne=w[3],si=new Wv(Ne,Ne[6],Ne[3]);si.detach(si.indexOf(d))}}const F=this._adjustIndex(b),$=this._lContainer;!function(h,d,b,w){const O=10+w,F=b.length;w>0&&(b[O-1][4]=d),w<F-10?(d[4]=b[O],xa(b,10+w,d)):(b.push(d),d[4]=null),d[3]=b;const $=d[17];null!==$&&b!==$&&function(h,d){const b=h[9];d[16]!==d[3][3][16]&&(h[2]=!0),null===b?h[9]=[d]:b.push(d)}($,d);const ct=d[19];null!==ct&&ct.insertView(h),d[2]|=128}(O,w,$,F);const ct=Pr(F,$),Ct=w[11],$t=ke(Ct,$[7]);return null!==$t&&function(h,d,b,w,O,F){w[0]=O,w[6]=d,Jr(h,w,b,1,O,F)}(O,$[6],Ct,w,$t,ct),d.attachToViewContainerRef(),xa(Wg($),F,d),d}move(d,b){return this.insert(d,b)}indexOf(d){const b=zv(this._lContainer);return null!==b?b.indexOf(d):-1}remove(d){const b=this._adjustIndex(d,-1),w=Ns(this._lContainer,b);w&&(_a(Wg(this._lContainer),b),Ps(w[1],w))}detach(d){const b=this._adjustIndex(d,-1),w=Ns(this._lContainer,b);return w&&null!=_a(Wg(this._lContainer),b)?new wp(w):null}_adjustIndex(d,b=0){return null==d?this.length+b:d}};function zv(h){return h[8]}function Wg(h){return h[8]||(h[8]=[])}function jv(h,d){let b;const w=d[h.index];if(vo(w))b=w;else{let O;if(8&h.type)O=Lt(w);else{const F=d[11];O=F.createComment("");const $=xt(h,d);Xt(F,ke(F,$),O,function(h,d){return Or(h)?h.nextSibling(d):d.nextSibling}(F,$),!1)}d[h.index]=b=Kp(w,d,O,h),Rd(d,b)}return new Wv(b,h,d)}class zg{constructor(d){this.queryList=d,this.matches=null}clone(){return new zg(this.queryList)}setDirty(){this.queryList.setDirty()}}class jg{constructor(d=[]){this.queries=d}createEmbeddedView(d){const b=d.queries;if(null!==b){const w=null!==d.contentQueries?d.contentQueries[0]:b.length,O=[];for(let F=0;F<w;F++){const $=b.getByIndex(F);O.push(this.queries[$.indexInDeclarationView].clone())}return new jg(O)}return null}insertView(d){this.dirtyQueriesWithMatches(d)}detachView(d){this.dirtyQueriesWithMatches(d)}dirtyQueriesWithMatches(d){for(let b=0;b<this.queries.length;b++)null!==tb(d,b).matches&&this.queries[b].setDirty()}}class Yv{constructor(d,b,w=null){this.predicate=d,this.flags=b,this.read=w}}class Yg{constructor(d=[]){this.queries=d}elementStart(d,b){for(let w=0;w<this.queries.length;w++)this.queries[w].elementStart(d,b)}elementEnd(d){for(let b=0;b<this.queries.length;b++)this.queries[b].elementEnd(d)}embeddedTView(d){let b=null;for(let w=0;w<this.length;w++){const O=null!==b?b.length:0,F=this.getByIndex(w).embeddedTView(d,O);F&&(F.indexInDeclarationView=w,null!==b?b.push(F):b=[F])}return null!==b?new Yg(b):null}template(d,b){for(let w=0;w<this.queries.length;w++)this.queries[w].template(d,b)}getByIndex(d){return this.queries[d]}get length(){return this.queries.length}track(d){this.queries.push(d)}}class Xg{constructor(d,b=-1){this.metadata=d,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=b}elementStart(d,b){this.isApplyingToNode(b)&&this.matchTNode(d,b)}elementEnd(d){this._declarationNodeIndex===d.index&&(this._appliesToNextNode=!1)}template(d,b){this.elementStart(d,b)}embeddedTView(d,b){return this.isApplyingToNode(d)?(this.crossesNgTemplate=!0,this.addMatch(-d.index,b),new Xg(this.metadata)):null}isApplyingToNode(d){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const b=this._declarationNodeIndex;let w=d.parent;for(;null!==w&&8&w.type&&w.index!==b;)w=w.parent;return b===(null!==w?w.index:-1)}return this._appliesToNextNode}matchTNode(d,b){const w=this.metadata.predicate;if(Array.isArray(w))for(let O=0;O<w.length;O++){const F=w[O];this.matchTNodeWithReadOption(d,b,VT(b,F)),this.matchTNodeWithReadOption(d,b,cl(b,d,F,!1,!1))}else w===Ip?4&b.type&&this.matchTNodeWithReadOption(d,b,-1):this.matchTNodeWithReadOption(d,b,cl(b,d,w,!1,!1))}matchTNodeWithReadOption(d,b,w){if(null!==w){const O=this.metadata.read;if(null!==O)if(O===Sp||O===vf||O===Ip&&4&b.type)this.addMatch(b.index,-2);else{const F=cl(b,d,O,!1,!1);null!==F&&this.addMatch(b.index,F)}else this.addMatch(b.index,w)}}addMatch(d,b){null===this.matches?this.matches=[d,b]:this.matches.push(d,b)}}function VT(h,d){const b=h.localNames;if(null!==b)for(let w=0;w<b.length;w+=2)if(b[w]===d)return b[w+1];return null}function WT(h,d,b,w){return-1===b?function(h,d){return 11&h.type?Vd(h,d):4&h.type?_f(h,d):null}(d,h):-2===b?function(h,d,b){return b===Sp?Vd(d,h):b===Ip?_f(d,h):b===vf?jv(d,h):void 0}(h,d,w):Xs(h,h[1],b,d)}function Xv(h,d,b,w){const O=d[19].queries[w];if(null===O.matches){const F=h.data,$=b.matches,ct=[];for(let Ct=0;Ct<$.length;Ct+=2){const $t=$[Ct];ct.push($t<0?null:WT(d,F[$t],$[Ct+1],b.metadata.read))}O.matches=ct}return O.matches}function Kg(h,d,b,w){const O=h.queries.getByIndex(b),F=O.matches;if(null!==F){const $=Xv(h,d,O,b);for(let ct=0;ct<F.length;ct+=2){const Ct=F[ct];if(Ct>0)w.push($[ct/2]);else{const $t=F[ct+1],fe=d[-Ct];for(let Ne=10;Ne<fe.length;Ne++){const si=fe[Ne];si[17]===si[3]&&Kg(si[1],si,$t,w)}if(null!==fe[9]){const Ne=fe[9];for(let si=0;si<Ne.length;si++){const Ci=Ne[si];Kg(Ci[1],Ci,$t,w)}}}}}return w}function Kv(h){const d=Ji(),b=Rr(),w=ws();ko(w+1);const O=tb(b,w);if(h.dirty&&wr(d)===(2==(2&O.metadata.flags))){if(null===O.matches)h.reset([]);else{const F=O.crossesNgTemplate?Kg(b,d,w,[]):Xv(b,d,O,w);h.reset(F,sT),h.notifyOnChanges()}return!0}return!1}function Jv(h,d,b){const w=Rr();w.firstCreatePass&&(qv(w,new Yv(h,d,b),-1),2==(2&d)&&(w.staticViewQueries=!0)),Qv(w,Ji(),d)}function $v(h,d,b,w){const O=Rr();if(O.firstCreatePass){const F=z();qv(O,new Yv(d,b,w),F.index),function(h,d){const b=h.contentQueries||(h.contentQueries=[]);d!==(b.length?b[b.length-1]:-1)&&b.push(h.queries.length-1,d)}(O,h),2==(2&b)&&(O.staticContentQueries=!0)}Qv(O,Ji(),b)}function Zv(){return h=Ji(),d=ws(),h[19].queries[d].queryList;var h,d}function Qv(h,d,b){const w=new mf(4==(4&b));Hp(h,d,w,w.destroy),null===d[19]&&(d[19]=new jg),d[19].queries.push(new zg(w))}function qv(h,d,b){null===h.queries&&(h.queries=new Yg),h.queries.track(new Xg(d,b))}function tb(h,d){return h.queries.getByIndex(d)}function eb(h,d){return _f(h,d)}function Ef(...h){}const tm=new yo("Application Initializer");let jd=(()=>{class h{constructor(b){this.appInits=b,this.resolve=Ef,this.reject=Ef,this.initialized=!1,this.done=!1,this.donePromise=new Promise((w,O)=>{this.resolve=w,this.reject=O})}runInitializers(){if(this.initialized)return;const b=[],w=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let O=0;O<this.appInits.length;O++){const F=this.appInits[O]();if(vg(F))b.push(F);else if(o_(F)){const $=new Promise((ct,Ct)=>{F.subscribe({complete:ct,error:Ct})});b.push($)}}Promise.all(b).then(()=>{w()}).catch(O=>{this.reject(O)}),0===b.length&&w(),this.initialized=!0}}return h.\u0275fac=function(b){return new(b||h)(Uo(tm,8))},h.\u0275prov=we({token:h,factory:h.\u0275fac}),h})();const vb=new yo("AppId"),uC={provide:vb,useFactory:function(){return`${em()}${em()}${em()}`},deps:[]};function em(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bb=new yo("Platform Initializer"),yb=new yo("Platform ID"),Eb=new yo("appBootstrapListener");let Tb=(()=>{class h{log(b){console.log(b)}warn(b){console.warn(b)}}return h.\u0275fac=function(b){return new(b||h)},h.\u0275prov=we({token:h,factory:h.\u0275fac}),h})();const Tf=new yo("LocaleId"),Cb=new yo("DefaultCurrencyCode");class hC{constructor(d,b){this.ngModuleFactory=d,this.componentFactories=b}}let im=(()=>{class h{compileModuleSync(b){return new Vg(b)}compileModuleAsync(b){return Promise.resolve(this.compileModuleSync(b))}compileModuleAndAllComponentsSync(b){const w=this.compileModuleSync(b),F=M(nr(b).declarations).reduce(($,ct)=>{const Ct=Oi(ct);return Ct&&$.push(new Ug(Ct)),$},[]);return new hC(w,F)}compileModuleAndAllComponentsAsync(b){return Promise.resolve(this.compileModuleAndAllComponentsSync(b))}clearCache(){}clearCacheFor(b){}getModuleId(b){}}return h.\u0275fac=function(b){return new(b||h)},h.\u0275prov=we({token:h,factory:h.\u0275fac}),h})();const pC=(()=>Promise.resolve(0))();function nm(h){"undefined"==typeof Zone?pC.then(()=>{h&&h.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",h)}class Du{constructor({enableLongStackTrace:d=!1,shouldCoalesceEventChangeDetection:b=!1,shouldCoalesceRunChangeDetection:w=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wh(!1),this.onMicrotaskEmpty=new wh(!1),this.onStable=new wh(!1),this.onError=new wh(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const O=this;O._nesting=0,O._outer=O._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(O._inner=O._inner.fork(new Zone.TaskTrackingZoneSpec)),d&&Zone.longStackTraceZoneSpec&&(O._inner=O._inner.fork(Zone.longStackTraceZoneSpec)),O.shouldCoalesceEventChangeDetection=!w&&b,O.shouldCoalesceRunChangeDetection=w,O.lastRequestAnimationFrameId=-1,O.nativeRequestAnimationFrame=function(){let h=Ii.requestAnimationFrame,d=Ii.cancelAnimationFrame;if("undefined"!=typeof Zone&&h&&d){const b=h[Zone.__symbol__("OriginalDelegate")];b&&(h=b);const w=d[Zone.__symbol__("OriginalDelegate")];w&&(d=w)}return{nativeRequestAnimationFrame:h,nativeCancelAnimationFrame:d}}().nativeRequestAnimationFrame,function(h){const d=()=>{!function(h){h.isCheckStableRunning||-1!==h.lastRequestAnimationFrameId||(h.lastRequestAnimationFrameId=h.nativeRequestAnimationFrame.call(Ii,()=>{h.fakeTopEventTask||(h.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{h.lastRequestAnimationFrameId=-1,om(h),h.isCheckStableRunning=!0,rm(h),h.isCheckStableRunning=!1},void 0,()=>{},()=>{})),h.fakeTopEventTask.invoke()}),om(h))}(h)};h._inner=h._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(b,w,O,F,$,ct)=>{try{return Sb(h),b.invokeTask(O,F,$,ct)}finally{(h.shouldCoalesceEventChangeDetection&&"eventTask"===F.type||h.shouldCoalesceRunChangeDetection)&&d(),wb(h)}},onInvoke:(b,w,O,F,$,ct,Ct)=>{try{return Sb(h),b.invoke(O,F,$,ct,Ct)}finally{h.shouldCoalesceRunChangeDetection&&d(),wb(h)}},onHasTask:(b,w,O,F)=>{b.hasTask(O,F),w===O&&("microTask"==F.change?(h._hasPendingMicrotasks=F.microTask,om(h),rm(h)):"macroTask"==F.change&&(h.hasPendingMacrotasks=F.macroTask))},onHandleError:(b,w,O,F)=>(b.handleError(O,F),h.runOutsideAngular(()=>h.onError.emit(F)),!1)})}(O)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Du.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Du.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(d,b,w){return this._inner.run(d,b,w)}runTask(d,b,w,O){const F=this._inner,$=F.scheduleEventTask("NgZoneEvent: "+O,d,gC,Ef,Ef);try{return F.runTask($,b,w)}finally{F.cancelTask($)}}runGuarded(d,b,w){return this._inner.runGuarded(d,b,w)}runOutsideAngular(d){return this._outer.run(d)}}const gC={};function rm(h){if(0==h._nesting&&!h.hasPendingMicrotasks&&!h.isStable)try{h._nesting++,h.onMicrotaskEmpty.emit(null)}finally{if(h._nesting--,!h.hasPendingMicrotasks)try{h.runOutsideAngular(()=>h.onStable.emit(null))}finally{h.isStable=!0}}}function om(h){h.hasPendingMicrotasks=!!(h._hasPendingMicrotasks||(h.shouldCoalesceEventChangeDetection||h.shouldCoalesceRunChangeDetection)&&-1!==h.lastRequestAnimationFrameId)}function Sb(h){h._nesting++,h.isStable&&(h.isStable=!1,h.onUnstable.emit(null))}function wb(h){h._nesting--,rm(h)}class vC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wh,this.onMicrotaskEmpty=new wh,this.onStable=new wh,this.onError=new wh}run(d,b,w){return d.apply(b,w)}runGuarded(d,b,w){return d.apply(b,w)}runOutsideAngular(d){return d()}runTask(d,b,w,O){return d.apply(b,w)}}let Rb=(()=>{class h{constructor(b){this._ngZone=b,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),b.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Du.assertNotInAngularZone(),nm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())nm(()=>{for(;0!==this._callbacks.length;){let b=this._callbacks.pop();clearTimeout(b.timeoutId),b.doneCb(this._didWork)}this._didWork=!1});else{let b=this.getPendingTasks();this._callbacks=this._callbacks.filter(w=>!w.updateCb||!w.updateCb(b)||(clearTimeout(w.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(b=>({source:b.source,creationLocation:b.creationLocation,data:b.data})):[]}addCallback(b,w,O){let F=-1;w&&w>0&&(F=setTimeout(()=>{this._callbacks=this._callbacks.filter($=>$.timeoutId!==F),b(this._didWork,this.getPendingTasks())},w)),this._callbacks.push({doneCb:b,timeoutId:F,updateCb:O})}whenStable(b,w,O){if(O&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(b,w,O),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(b,w,O){return[]}}return h.\u0275fac=function(b){return new(b||h)(Uo(Du))},h.\u0275prov=we({token:h,factory:h.\u0275fac}),h})(),Db=(()=>{class h{constructor(){this._applications=new Map,sm.addToWindow(this)}registerApplication(b,w){this._applications.set(b,w)}unregisterApplication(b){this._applications.delete(b)}unregisterAllApplications(){this._applications.clear()}getTestability(b){return this._applications.get(b)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(b,w=!0){return sm.findTestabilityInTree(this,b,w)}}return h.\u0275fac=function(b){return new(b||h)},h.\u0275prov=we({token:h,factory:h.\u0275fac}),h})();class bC{addToWindow(d){}findTestabilityInTree(d,b,w){return null}}function yC(h){sm=h}let fh,sm=new bC;const Ib=new yo("AllowMultipleToken");class SC{constructor(d,b){this.name=d,this.token=b}}function Mb(h,d,b=[]){const w=`Platform: ${d}`,O=new yo(w);return(F=[])=>{let $=Ab();if(!$||$.injector.get(Ib,!1))if(h)h(b.concat(F).concat({provide:O,useValue:!0}));else{const ct=b.concat(F).concat({provide:O,useValue:!0},{provide:hh,useValue:"platform"});!function(h){if(fh&&!fh.destroyed&&!fh.injector.get(Ib,!1))throw new bt("400","");fh=h.get(Ob);const d=h.get(bb,null);d&&d.forEach(b=>b())}(fu.create({providers:ct,name:w}))}return function(h){const d=Ab();if(!d)throw new bt("401","");return d}()}}function Ab(){return fh&&!fh.destroyed?fh:null}let Ob=(()=>{class h{constructor(b){this._injector=b,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(b,w){const ct=function(h,d){let b;return b="noop"===h?new vC:("zone.js"===h?void 0:h)||new Du({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==d?void 0:d.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==d?void 0:d.ngZoneRunCoalescing)}),b}(w?w.ngZone:void 0,{ngZoneEventCoalescing:w&&w.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:w&&w.ngZoneRunCoalescing||!1}),Ct=[{provide:Du,useValue:ct}];return ct.run(()=>{const $t=fu.create({providers:Ct,parent:this.injector,name:b.moduleType.name}),fe=b.create($t),Ne=fe.injector.get(Gc,null);if(!Ne)throw new bt("402","");return ct.runOutsideAngular(()=>{const si=ct.onError.subscribe({next:Ci=>{Ne.handleError(Ci)}});fe.onDestroy(()=>{am(this._modules,fe),si.unsubscribe()})}),function(h,d,b){try{const w=b();return vg(w)?w.catch(O=>{throw d.runOutsideAngular(()=>h.handleError(O)),O}):w}catch(w){throw d.runOutsideAngular(()=>h.handleError(w)),w}}(Ne,ct,()=>{const si=fe.injector.get(jd);return si.runInitializers(),si.donePromise.then(()=>(function(h){Ie(h,"Expected localeId to be defined"),"string"==typeof h&&(Z_=h.toLowerCase().replace(/_/g,"-"))}(fe.injector.get(Tf,uf)||uf),this._moduleDoBootstrap(fe),fe))})})}bootstrapModule(b,w=[]){const O=xb({},w);return function(h,d,b){const w=new Vg(b);return Promise.resolve(w)}(0,0,b).then(F=>this.bootstrapModuleFactory(F,O))}_moduleDoBootstrap(b){const w=b.injector.get(Ap);if(b._bootstrapComponents.length>0)b._bootstrapComponents.forEach(O=>w.bootstrap(O));else{if(!b.instance.ngDoBootstrap)throw new bt("403","");b.instance.ngDoBootstrap(w)}this._modules.push(b)}onDestroy(b){this._destroyListeners.push(b)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new bt("404","");this._modules.slice().forEach(b=>b.destroy()),this._destroyListeners.forEach(b=>b()),this._destroyed=!0}get destroyed(){return this._destroyed}}return h.\u0275fac=function(b){return new(b||h)(Uo(fu))},h.\u0275prov=we({token:h,factory:h.\u0275fac}),h})();function xb(h,d){return Array.isArray(d)?d.reduce(xb,h):Object.assign(Object.assign({},h),d)}let Ap=(()=>{class h{constructor(b,w,O,F,$){this._zone=b,this._injector=w,this._exceptionHandler=O,this._componentFactoryResolver=F,this._initStatus=$,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const ct=new e.y($t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{$t.next(this._stable),$t.complete()})}),Ct=new e.y($t=>{let fe;this._zone.runOutsideAngular(()=>{fe=this._zone.onStable.subscribe(()=>{Du.assertNotInAngularZone(),nm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,$t.next(!0))})})});const Ne=this._zone.onUnstable.subscribe(()=>{Du.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{$t.next(!1)}))});return()=>{fe.unsubscribe(),Ne.unsubscribe()}});this.isStable=(0,t.T)(ct,Ct.pipe((0,n.B)()))}bootstrap(b,w){if(!this._initStatus.done)throw new bt("405","");let O;O=b instanceof Cv?b:this._componentFactoryResolver.resolveComponentFactory(b),this.componentTypes.push(O.componentType);const F=function(h){return h.isBoundToModule}(O)?void 0:this._injector.get(Gd),ct=O.create(fu.NULL,[],w||O.selector,F),Ct=ct.location.nativeElement,$t=ct.injector.get(Rb,null),fe=$t&&ct.injector.get(Db);return $t&&fe&&fe.registerApplication(Ct,$t),ct.onDestroy(()=>{this.detachView(ct.hostView),am(this.components,ct),fe&&fe.unregisterApplication(Ct)}),this._loadComponent(ct),ct}tick(){if(this._runningTick)throw new bt("101","");try{this._runningTick=!0;for(let b of this._views)b.detectChanges()}catch(b){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(b))}finally{this._runningTick=!1}}attachView(b){const w=b;this._views.push(w),w.attachToAppRef(this)}detachView(b){const w=b;am(this._views,w),w.detachFromAppRef()}_loadComponent(b){this.attachView(b.hostView),this.tick(),this.components.push(b),this._injector.get(Eb,[]).concat(this._bootstrapListeners).forEach(O=>O(b))}ngOnDestroy(){this._views.slice().forEach(b=>b.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return h.\u0275fac=function(b){return new(b||h)(Uo(Du),Uo(fu),Uo(Gc),Uo(Cp),Uo(jd))},h.\u0275prov=we({token:h,factory:h.\u0275fac}),h})();function am(h,d){const b=h.indexOf(d);b>-1&&h.splice(b,1)}let Lb=!0;function AC(){Lb=!1}let OC=(()=>{class h{}return h.__NG_ELEMENT_ID__=xC,h})();function xC(h){return function(h,d,b){if(Hs(h)&&!b){const w=Vn(h.index,d);return new wp(w,w)}return 47&h.type?new wp(d[16],d):null}(z(),Ji(),16==(16&h))}class Vb{constructor(){}supports(d){return ba(d)}create(d){return new HC(d)}}const BC=(h,d)=>d;class HC{constructor(d){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=d||BC}forEachItem(d){let b;for(b=this._itHead;null!==b;b=b._next)d(b)}forEachOperation(d){let b=this._itHead,w=this._removalsHead,O=0,F=null;for(;b||w;){const $=!w||b&&b.currentIndex<Wb(w,O,F)?b:w,ct=Wb($,O,F),Ct=$.currentIndex;if($===w)O--,w=w._nextRemoved;else if(b=b._next,null==$.previousIndex)O++;else{F||(F=[]);const $t=ct-O,fe=Ct-O;if($t!=fe){for(let si=0;si<$t;si++){const Ci=si<F.length?F[si]:F[si]=0,Yi=Ci+si;fe<=Yi&&Yi<$t&&(F[si]=Ci+1)}F[$.previousIndex]=fe-$t}}ct!==Ct&&d($,ct,Ct)}}forEachPreviousItem(d){let b;for(b=this._previousItHead;null!==b;b=b._nextPrevious)d(b)}forEachAddedItem(d){let b;for(b=this._additionsHead;null!==b;b=b._nextAdded)d(b)}forEachMovedItem(d){let b;for(b=this._movesHead;null!==b;b=b._nextMoved)d(b)}forEachRemovedItem(d){let b;for(b=this._removalsHead;null!==b;b=b._nextRemoved)d(b)}forEachIdentityChange(d){let b;for(b=this._identityChangesHead;null!==b;b=b._nextIdentityChange)d(b)}diff(d){if(null==d&&(d=[]),!ba(d))throw new Error(`Error trying to diff '${c(d)}'. Only arrays and iterables are allowed`);return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let O,F,$,b=this._itHead,w=!1;if(Array.isArray(d)){this.length=d.length;for(let ct=0;ct<this.length;ct++)F=d[ct],$=this._trackByFn(ct,F),null!==b&&Object.is(b.trackById,$)?(w&&(b=this._verifyReinsertion(b,F,$,ct)),Object.is(b.item,F)||this._addIdentityChange(b,F)):(b=this._mismatch(b,F,$,ct),w=!0),b=b._next}else O=0,function(h,d){if(Array.isArray(h))for(let b=0;b<h.length;b++)d(h[b]);else{const b=h[Kn()]();let w;for(;!(w=b.next()).done;)d(w.value)}}(d,ct=>{$=this._trackByFn(O,ct),null!==b&&Object.is(b.trackById,$)?(w&&(b=this._verifyReinsertion(b,ct,$,O)),Object.is(b.item,ct)||this._addIdentityChange(b,ct)):(b=this._mismatch(b,ct,$,O),w=!0),b=b._next,O++}),this.length=O;return this._truncate(b),this.collection=d,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let d;for(d=this._previousItHead=this._itHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._additionsHead;null!==d;d=d._nextAdded)d.previousIndex=d.currentIndex;for(this._additionsHead=this._additionsTail=null,d=this._movesHead;null!==d;d=d._nextMoved)d.previousIndex=d.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(d,b,w,O){let F;return null===d?F=this._itTail:(F=d._prev,this._remove(d)),null!==(d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(w,null))?(Object.is(d.item,b)||this._addIdentityChange(d,b),this._reinsertAfter(d,F,O)):null!==(d=null===this._linkedRecords?null:this._linkedRecords.get(w,O))?(Object.is(d.item,b)||this._addIdentityChange(d,b),this._moveAfter(d,F,O)):d=this._addAfter(new UC(b,w),F,O),d}_verifyReinsertion(d,b,w,O){let F=null===this._unlinkedRecords?null:this._unlinkedRecords.get(w,null);return null!==F?d=this._reinsertAfter(F,d._prev,O):d.currentIndex!=O&&(d.currentIndex=O,this._addToMoves(d,O)),d}_truncate(d){for(;null!==d;){const b=d._next;this._addToRemovals(this._unlink(d)),d=b}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(d,b,w){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(d);const O=d._prevRemoved,F=d._nextRemoved;return null===O?this._removalsHead=F:O._nextRemoved=F,null===F?this._removalsTail=O:F._prevRemoved=O,this._insertAfter(d,b,w),this._addToMoves(d,w),d}_moveAfter(d,b,w){return this._unlink(d),this._insertAfter(d,b,w),this._addToMoves(d,w),d}_addAfter(d,b,w){return this._insertAfter(d,b,w),this._additionsTail=null===this._additionsTail?this._additionsHead=d:this._additionsTail._nextAdded=d,d}_insertAfter(d,b,w){const O=null===b?this._itHead:b._next;return d._next=O,d._prev=b,null===O?this._itTail=d:O._prev=d,null===b?this._itHead=d:b._next=d,null===this._linkedRecords&&(this._linkedRecords=new Gb),this._linkedRecords.put(d),d.currentIndex=w,d}_remove(d){return this._addToRemovals(this._unlink(d))}_unlink(d){null!==this._linkedRecords&&this._linkedRecords.remove(d);const b=d._prev,w=d._next;return null===b?this._itHead=w:b._next=w,null===w?this._itTail=b:w._prev=b,d}_addToMoves(d,b){return d.previousIndex===b||(this._movesTail=null===this._movesTail?this._movesHead=d:this._movesTail._nextMoved=d),d}_addToRemovals(d){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gb),this._unlinkedRecords.put(d),d.currentIndex=null,d._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=d,d._prevRemoved=null):(d._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=d),d}_addIdentityChange(d,b){return d.item=b,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=d:this._identityChangesTail._nextIdentityChange=d,d}}class UC{constructor(d,b){this.item=d,this.trackById=b,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VC{constructor(){this._head=null,this._tail=null}add(d){null===this._head?(this._head=this._tail=d,d._nextDup=null,d._prevDup=null):(this._tail._nextDup=d,d._prevDup=this._tail,d._nextDup=null,this._tail=d)}get(d,b){let w;for(w=this._head;null!==w;w=w._nextDup)if((null===b||b<=w.currentIndex)&&Object.is(w.trackById,d))return w;return null}remove(d){const b=d._prevDup,w=d._nextDup;return null===b?this._head=w:b._nextDup=w,null===w?this._tail=b:w._prevDup=b,null===this._head}}class Gb{constructor(){this.map=new Map}put(d){const b=d.trackById;let w=this.map.get(b);w||(w=new VC,this.map.set(b,w)),w.add(d)}get(d,b){const O=this.map.get(d);return O?O.get(d,b):null}remove(d){const b=d.trackById;return this.map.get(b).remove(d)&&this.map.delete(b),d}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Wb(h,d,b){const w=h.previousIndex;if(null===w)return w;let O=0;return b&&w<b.length&&(O=b[w]),w+d+O}class zb{constructor(){}supports(d){return d instanceof Map||ed(d)}create(){return new GC}}class GC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(d){let b;for(b=this._mapHead;null!==b;b=b._next)d(b)}forEachPreviousItem(d){let b;for(b=this._previousMapHead;null!==b;b=b._nextPrevious)d(b)}forEachChangedItem(d){let b;for(b=this._changesHead;null!==b;b=b._nextChanged)d(b)}forEachAddedItem(d){let b;for(b=this._additionsHead;null!==b;b=b._nextAdded)d(b)}forEachRemovedItem(d){let b;for(b=this._removalsHead;null!==b;b=b._nextRemoved)d(b)}diff(d){if(d){if(!(d instanceof Map||ed(d)))throw new Error(`Error trying to diff '${c(d)}'. Only maps and objects are allowed`)}else d=new Map;return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let b=this._mapHead;if(this._appendAfter=null,this._forEach(d,(w,O)=>{if(b&&b.key===O)this._maybeAddToChanges(b,w),this._appendAfter=b,b=b._next;else{const F=this._getOrCreateRecordForKey(O,w);b=this._insertBeforeOrAppend(b,F)}}),b){b._prev&&(b._prev._next=null),this._removalsHead=b;for(let w=b;null!==w;w=w._nextRemoved)w===this._mapHead&&(this._mapHead=null),this._records.delete(w.key),w._nextRemoved=w._next,w.previousValue=w.currentValue,w.currentValue=null,w._prev=null,w._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(d,b){if(d){const w=d._prev;return b._next=d,b._prev=w,d._prev=b,w&&(w._next=b),d===this._mapHead&&(this._mapHead=b),this._appendAfter=d,d}return this._appendAfter?(this._appendAfter._next=b,b._prev=this._appendAfter):this._mapHead=b,this._appendAfter=b,null}_getOrCreateRecordForKey(d,b){if(this._records.has(d)){const O=this._records.get(d);this._maybeAddToChanges(O,b);const F=O._prev,$=O._next;return F&&(F._next=$),$&&($._prev=F),O._next=null,O._prev=null,O}const w=new WC(d);return this._records.set(d,w),w.currentValue=b,this._addToAdditions(w),w}_reset(){if(this.isDirty){let d;for(this._previousMapHead=this._mapHead,d=this._previousMapHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._changesHead;null!==d;d=d._nextChanged)d.previousValue=d.currentValue;for(d=this._additionsHead;null!=d;d=d._nextAdded)d.previousValue=d.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(d,b){Object.is(b,d.currentValue)||(d.previousValue=d.currentValue,d.currentValue=b,this._addToChanges(d))}_addToAdditions(d){null===this._additionsHead?this._additionsHead=this._additionsTail=d:(this._additionsTail._nextAdded=d,this._additionsTail=d)}_addToChanges(d){null===this._changesHead?this._changesHead=this._changesTail=d:(this._changesTail._nextChanged=d,this._changesTail=d)}_forEach(d,b){d instanceof Map?d.forEach(b):Object.keys(d).forEach(w=>b(d[w],w))}}class WC{constructor(d){this.key=d,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function jb(){return new Sf([new Vb])}let Sf=(()=>{class h{constructor(b){this.factories=b}static create(b,w){if(null!=w){const O=w.factories.slice();b=b.concat(O)}return new h(b)}static extend(b){return{provide:h,useFactory:w=>h.create(b,w||jb()),deps:[[h,new Va,new ec]]}}find(b){const w=this.factories.find(O=>O.supports(b));if(null!=w)return w;throw new Error(`Cannot find a differ supporting object '${b}' of type '${function(h){return h.name||typeof h}(b)}'`)}}return h.\u0275prov=we({token:h,providedIn:"root",factory:jb}),h})();function Yb(){return new wf([new zb])}let wf=(()=>{class h{constructor(b){this.factories=b}static create(b,w){if(w){const O=w.factories.slice();b=b.concat(O)}return new h(b)}static extend(b){return{provide:h,useFactory:w=>h.create(b,w||Yb()),deps:[[h,new Va,new ec]]}}find(b){const w=this.factories.find(O=>O.supports(b));if(w)return w;throw new Error(`Cannot find a differ supporting object '${b}'`)}}return h.\u0275prov=we({token:h,providedIn:"root",factory:Yb}),h})();const jC=[new zb],XC=new Sf([new Vb]),KC=new wf(jC),JC=Mb(null,"core",[{provide:yb,useValue:"unknown"},{provide:Ob,deps:[fu]},{provide:Db,deps:[]},{provide:Tb,deps:[]}]),tS=[{provide:Ap,useClass:Ap,deps:[Du,fu,Gc,Cp,jd]},{provide:fT,deps:[Du],useFactory:function(h){let d=[];return h.onStable.subscribe(()=>{for(;d.length;)d.pop()()}),function(b){d.push(b)}}},{provide:jd,useClass:jd,deps:[[new ec,tm]]},{provide:im,useClass:im,deps:[]},uC,{provide:Sf,useFactory:function(){return XC},deps:[]},{provide:wf,useFactory:function(){return KC},deps:[]},{provide:Tf,useFactory:function(h){return h||"undefined"!=typeof $localize&&$localize.locale||uf},deps:[[new Bl(Tf),new ec,new Va]]},{provide:Cb,useValue:"USD"}];let iS=(()=>{class h{constructor(b){}}return h.\u0275fac=function(b){return new(b||h)(Uo(Ap))},h.\u0275mod=ir({type:h}),h.\u0275inj=Wt({providers:tS}),h})()},93075:(H,W,f)=>{"use strict";f.d(W,{Zs:()=>Xr,Fj:()=>q,NI:()=>jr,oH:()=>Bs,sg:()=>tr,u5:()=>ll,Cf:()=>gt,JU:()=>c,a5:()=>Mt,JJ:()=>ce,JL:()=>te,F:()=>An,On:()=>de,UX:()=>Or,kI:()=>Kt,_Y:()=>Fe});var y=f(5e3),g=f(69808),e=f(32076),t=f(4128),n=f(54004);let r=(()=>{class Q{constructor(j,xt){this._renderer=j,this._elementRef=xt,this.onChange=Be=>{},this.onTouched=()=>{}}setProperty(j,xt){this._renderer.setProperty(this._elementRef.nativeElement,j,xt)}registerOnTouched(j){this.onTouched=j}registerOnChange(j){this.onChange=j}setDisabledState(j){this.setProperty("disabled",j)}}return Q.\u0275fac=function(j){return new(j||Q)(y.Y36(y.Qsj),y.Y36(y.SBq))},Q.\u0275dir=y.lG2({type:Q}),Q})(),s=(()=>{class Q extends r{}return Q.\u0275fac=function(){let V;return function(xt){return(V||(V=y.n5z(Q)))(xt||Q)}}(),Q.\u0275dir=y.lG2({type:Q,features:[y.qOj]}),Q})();const c=new y.OlP("NgValueAccessor"),P={provide:c,useExisting:(0,y.Gpc)(()=>q),multi:!0},it=new y.OlP("CompositionEventMode");let q=(()=>{class Q extends r{constructor(j,xt,Be){super(j,xt),this._compositionMode=Be,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const Q=(0,g.q)()?(0,g.q)().getUserAgent():"";return/android (\d+)/.test(Q.toLowerCase())}())}writeValue(j){this.setProperty("value",null==j?"":j)}_handleInput(j){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(j)}_compositionStart(){this._composing=!0}_compositionEnd(j){this._composing=!1,this._compositionMode&&this.onChange(j)}}return Q.\u0275fac=function(j){return new(j||Q)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(it,8))},Q.\u0275dir=y.lG2({type:Q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(j,xt){1&j&&y.NdJ("input",function(Ti){return xt._handleInput(Ti.target.value)})("blur",function(){return xt.onTouched()})("compositionstart",function(){return xt._compositionStart()})("compositionend",function(Ti){return xt._compositionEnd(Ti.target.value)})},features:[y._Bn([P]),y.qOj]}),Q})();function bt(Q){return null==Q||0===Q.length}function Ft(Q){return null!=Q&&"number"==typeof Q.length}const gt=new y.OlP("NgValidators"),wt=new y.OlP("NgAsyncValidators"),Bt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Kt{static min(V){return Q=V,V=>{if(bt(V.value)||bt(Q))return null;const j=parseFloat(V.value);return!isNaN(j)&&j<Q?{min:{min:Q,actual:V.value}}:null};var Q}static max(V){return Q=V,V=>{if(bt(V.value)||bt(Q))return null;const j=parseFloat(V.value);return!isNaN(j)&&j>Q?{max:{max:Q,actual:V.value}}:null};var Q}static required(V){return lt(V)}static requiredTrue(V){return ft(V)}static email(V){return bt((Q=V).value)||Bt.test(Q.value)?null:{email:!0};var Q}static minLength(V){return Q=V,V=>bt(V.value)||!Ft(V.value)?null:V.value.length<Q?{minlength:{requiredLength:Q,actualLength:V.value.length}}:null;var Q}static maxLength(V){return Q=V,V=>Ft(V.value)&&V.value.length>Q?{maxlength:{requiredLength:Q,actualLength:V.value.length}}:null;var Q}static pattern(V){return function(Q){if(!Q)return st;let V,j;return"string"==typeof Q?(j="","^"!==Q.charAt(0)&&(j+="^"),j+=Q,"$"!==Q.charAt(Q.length-1)&&(j+="$"),V=new RegExp(j)):(j=Q.toString(),V=Q),xt=>{if(bt(xt.value))return null;const Be=xt.value;return V.test(Be)?null:{pattern:{requiredPattern:j,actualValue:Be}}}}(V)}static nullValidator(V){return null}static compose(V){return oe(V)}static composeAsync(V){return Re(V)}}function lt(Q){return bt(Q.value)?{required:!0}:null}function ft(Q){return!0===Q.value?null:{required:!0}}function st(Q){return null}function Z(Q){return null!=Q}function Zt(Q){const V=(0,y.QGY)(Q)?(0,e.D)(Q):Q;return(0,y.CqO)(V),V}function vt(Q){let V={};return Q.forEach(j=>{V=null!=j?Object.assign(Object.assign({},V),j):V}),0===Object.keys(V).length?null:V}function At(Q,V){return V.map(j=>j(Q))}function ve(Q){return Q.map(V=>function(Q){return!Q.validate}(V)?V:j=>V.validate(j))}function oe(Q){if(!Q)return null;const V=Q.filter(Z);return 0==V.length?null:function(j){return vt(At(j,V))}}function Ie(Q){return null!=Q?oe(ve(Q)):null}function Re(Q){if(!Q)return null;const V=Q.filter(Z);return 0==V.length?null:function(j){const xt=At(j,V).map(Zt);return(0,t.D)(xt).pipe((0,n.U)(vt))}}function je(Q){return null!=Q?Re(ve(Q)):null}function Si(Q,V){return null===Q?[V]:Array.isArray(Q)?[...Q,V]:[Q,V]}function Ze(Q){return Q._rawValidators}function we(Q){return Q._rawAsyncValidators}function ci(Q){return Q?Array.isArray(Q)?Q:[Q]:[]}function Wt(Q,V){return Array.isArray(Q)?Q.includes(V):Q===V}function Ae(Q,V){const j=ci(V);return ci(Q).forEach(Be=>{Wt(j,Be)||j.push(Be)}),j}function Qt(Q,V){return ci(V).filter(j=>!Wt(Q,j))}class ee{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=Ie(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=je(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V){this.control&&this.control.reset(V)}hasError(V,j){return!!this.control&&this.control.hasError(V,j)}getError(V,j){return this.control?this.control.getError(V,j):null}}class Mt extends ee{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Yt extends ee{get formDirective(){return null}get path(){return null}}class ye{constructor(V){this._cd=V}is(V){var j,xt,Be;return"submitted"===V?!!(null===(j=this._cd)||void 0===j?void 0:j.submitted):!!(null===(Be=null===(xt=this._cd)||void 0===xt?void 0:xt.control)||void 0===Be?void 0:Be[V])}}let ce=(()=>{class Q extends ye{constructor(j){super(j)}}return Q.\u0275fac=function(j){return new(j||Q)(y.Y36(Mt,2))},Q.\u0275dir=y.lG2({type:Q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(j,xt){2&j&&y.ekj("ng-untouched",xt.is("untouched"))("ng-touched",xt.is("touched"))("ng-pristine",xt.is("pristine"))("ng-dirty",xt.is("dirty"))("ng-valid",xt.is("valid"))("ng-invalid",xt.is("invalid"))("ng-pending",xt.is("pending"))},features:[y.qOj]}),Q})(),te=(()=>{class Q extends ye{constructor(j){super(j)}}return Q.\u0275fac=function(j){return new(j||Q)(y.Y36(Yt,10))},Q.\u0275dir=y.lG2({type:Q,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(j,xt){2&j&&y.ekj("ng-untouched",xt.is("untouched"))("ng-touched",xt.is("touched"))("ng-pristine",xt.is("pristine"))("ng-dirty",xt.is("dirty"))("ng-valid",xt.is("valid"))("ng-invalid",xt.is("invalid"))("ng-pending",xt.is("pending"))("ng-submitted",xt.is("submitted"))},features:[y.qOj]}),Q})();function Bi(Q,V){Ce(Q,V),V.valueAccessor.writeValue(Q.value),function(Q,V){V.valueAccessor.registerOnChange(j=>{Q._pendingValue=j,Q._pendingChange=!0,Q._pendingDirty=!0,"change"===Q.updateOn&&ti(Q,V)})}(Q,V),function(Q,V){const j=(xt,Be)=>{V.valueAccessor.writeValue(xt),Be&&V.viewToModelUpdate(xt)};Q.registerOnChange(j),V._registerOnDestroy(()=>{Q._unregisterOnChange(j)})}(Q,V),function(Q,V){V.valueAccessor.registerOnTouched(()=>{Q._pendingTouched=!0,"blur"===Q.updateOn&&Q._pendingChange&&ti(Q,V),"submit"!==Q.updateOn&&Q.markAsTouched()})}(Q,V),function(Q,V){if(V.valueAccessor.setDisabledState){const j=xt=>{V.valueAccessor.setDisabledState(xt)};Q.registerOnDisabledChange(j),V._registerOnDestroy(()=>{Q._unregisterOnDisabledChange(j)})}}(Q,V)}function Ii(Q,V,j=!0){const xt=()=>{};V.valueAccessor&&(V.valueAccessor.registerOnChange(xt),V.valueAccessor.registerOnTouched(xt)),Qe(Q,V),Q&&(V._invokeOnDestroyCallbacks(),Q._registerOnCollectionChange(()=>{}))}function ni(Q,V){Q.forEach(j=>{j.registerOnValidatorChange&&j.registerOnValidatorChange(V)})}function Ce(Q,V){const j=Ze(Q);null!==V.validator?Q.setValidators(Si(j,V.validator)):"function"==typeof j&&Q.setValidators([j]);const xt=we(Q);null!==V.asyncValidator?Q.setAsyncValidators(Si(xt,V.asyncValidator)):"function"==typeof xt&&Q.setAsyncValidators([xt]);const Be=()=>Q.updateValueAndValidity();ni(V._rawValidators,Be),ni(V._rawAsyncValidators,Be)}function Qe(Q,V){let j=!1;if(null!==Q){if(null!==V.validator){const Be=Ze(Q);if(Array.isArray(Be)&&Be.length>0){const Ti=Be.filter(an=>an!==V.validator);Ti.length!==Be.length&&(j=!0,Q.setValidators(Ti))}}if(null!==V.asyncValidator){const Be=we(Q);if(Array.isArray(Be)&&Be.length>0){const Ti=Be.filter(an=>an!==V.asyncValidator);Ti.length!==Be.length&&(j=!0,Q.setAsyncValidators(Ti))}}}const xt=()=>{};return ni(V._rawValidators,xt),ni(V._rawAsyncValidators,xt),j}function ti(Q,V){Q._pendingDirty&&Q.markAsDirty(),Q.setValue(Q._pendingValue,{emitModelToViewChange:!1}),V.viewToModelUpdate(Q._pendingValue),Q._pendingChange=!1}function Pt(Q,V){Ce(Q,V)}function Le(Q,V){if(!Q.hasOwnProperty("model"))return!1;const j=Q.model;return!!j.isFirstChange()||!Object.is(V,j.currentValue)}function Ki(Q,V){Q._syncPendingControls(),V.forEach(j=>{const xt=j.control;"submit"===xt.updateOn&&xt._pendingChange&&(j.viewToModelUpdate(xt._pendingValue),xt._pendingChange=!1)})}function Sn(Q,V){if(!V)return null;let j,xt,Be;return Array.isArray(V),V.forEach(Ti=>{Ti.constructor===q?j=Ti:function(Q){return Object.getPrototypeOf(Q.constructor)===s}(Ti)?xt=Ti:Be=Ti}),Be||xt||j||null}function ir(Q,V){const j=Q.indexOf(V);j>-1&&Q.splice(j,1)}const Ke="VALID",Pe="INVALID",di="PENDING",Oi="DISABLED";function Rn(Q){return(_o(Q)?Q.validators:Q)||null}function nr(Q){return Array.isArray(Q)?Ie(Q):Q||null}function xr(Q,V){return(_o(V)?V.asyncValidators:Q)||null}function io(Q){return Array.isArray(Q)?je(Q):Q||null}function _o(Q){return null!=Q&&!Array.isArray(Q)&&"object"==typeof Q}class Ko{constructor(V,j){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=V,this._rawAsyncValidators=j,this._composedValidatorFn=nr(this._rawValidators),this._composedAsyncValidatorFn=io(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(V){this._rawValidators=this._composedValidatorFn=V}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(V){this._rawAsyncValidators=this._composedAsyncValidatorFn=V}get parent(){return this._parent}get valid(){return this.status===Ke}get invalid(){return this.status===Pe}get pending(){return this.status==di}get disabled(){return this.status===Oi}get enabled(){return this.status!==Oi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(V){this._rawValidators=V,this._composedValidatorFn=nr(V)}setAsyncValidators(V){this._rawAsyncValidators=V,this._composedAsyncValidatorFn=io(V)}addValidators(V){this.setValidators(Ae(V,this._rawValidators))}addAsyncValidators(V){this.setAsyncValidators(Ae(V,this._rawAsyncValidators))}removeValidators(V){this.setValidators(Qt(V,this._rawValidators))}removeAsyncValidators(V){this.setAsyncValidators(Qt(V,this._rawAsyncValidators))}hasValidator(V){return Wt(this._rawValidators,V)}hasAsyncValidator(V){return Wt(this._rawAsyncValidators,V)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(V={}){this.touched=!0,this._parent&&!V.onlySelf&&this._parent.markAsTouched(V)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(V=>V.markAllAsTouched())}markAsUntouched(V={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(j=>{j.markAsUntouched({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}markAsDirty(V={}){this.pristine=!1,this._parent&&!V.onlySelf&&this._parent.markAsDirty(V)}markAsPristine(V={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(j=>{j.markAsPristine({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}markAsPending(V={}){this.status=di,!1!==V.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!V.onlySelf&&this._parent.markAsPending(V)}disable(V={}){const j=this._parentMarkedDirty(V.onlySelf);this.status=Oi,this.errors=null,this._forEachChild(xt=>{xt.disable(Object.assign(Object.assign({},V),{onlySelf:!0}))}),this._updateValue(),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},V),{skipPristineCheck:j})),this._onDisabledChange.forEach(xt=>xt(!0))}enable(V={}){const j=this._parentMarkedDirty(V.onlySelf);this.status=Ke,this._forEachChild(xt=>{xt.enable(Object.assign(Object.assign({},V),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},V),{skipPristineCheck:j})),this._onDisabledChange.forEach(xt=>xt(!1))}_updateAncestors(V){this._parent&&!V.onlySelf&&(this._parent.updateValueAndValidity(V),V.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(V){this._parent=V}updateValueAndValidity(V={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ke||this.status===di)&&this._runAsyncValidator(V.emitEvent)),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!V.onlySelf&&this._parent.updateValueAndValidity(V)}_updateTreeValidity(V={emitEvent:!0}){this._forEachChild(j=>j._updateTreeValidity(V)),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Oi:Ke}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(V){if(this.asyncValidator){this.status=di,this._hasOwnPendingAsyncValidator=!0;const j=Zt(this.asyncValidator(this));this._asyncValidationSubscription=j.subscribe(xt=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(xt,{emitEvent:V})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(V,j={}){this.errors=V,this._updateControlsErrors(!1!==j.emitEvent)}get(V){return function(Q,V,j){if(null==V||(Array.isArray(V)||(V=V.split(".")),Array.isArray(V)&&0===V.length))return null;let xt=Q;return V.forEach(Be=>{xt=xt instanceof pr?xt.controls.hasOwnProperty(Be)?xt.controls[Be]:null:xt instanceof ss&&xt.at(Be)||null}),xt}(this,V)}getError(V,j){const xt=j?this.get(j):this;return xt&&xt.errors?xt.errors[V]:null}hasError(V,j){return!!this.getError(V,j)}get root(){let V=this;for(;V._parent;)V=V._parent;return V}_updateControlsErrors(V){this.status=this._calculateStatus(),V&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(V)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?Oi:this.errors?Pe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(di)?di:this._anyControlsHaveStatus(Pe)?Pe:Ke}_anyControlsHaveStatus(V){return this._anyControls(j=>j.status===V)}_anyControlsDirty(){return this._anyControls(V=>V.dirty)}_anyControlsTouched(){return this._anyControls(V=>V.touched)}_updatePristine(V={}){this.pristine=!this._anyControlsDirty(),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}_updateTouched(V={}){this.touched=this._anyControlsTouched(),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}_isBoxedValue(V){return"object"==typeof V&&null!==V&&2===Object.keys(V).length&&"value"in V&&"disabled"in V}_registerOnCollectionChange(V){this._onCollectionChange=V}_setUpdateStrategy(V){_o(V)&&null!=V.updateOn&&(this._updateOn=V.updateOn)}_parentMarkedDirty(V){return!V&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class jr extends Ko{constructor(V=null,j,xt){super(Rn(j),xr(xt,j)),this._onChange=[],this._applyFormState(V),this._setUpdateStrategy(j),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(V,j={}){this.value=this._pendingValue=V,this._onChange.length&&!1!==j.emitModelToViewChange&&this._onChange.forEach(xt=>xt(this.value,!1!==j.emitViewToModelChange)),this.updateValueAndValidity(j)}patchValue(V,j={}){this.setValue(V,j)}reset(V=null,j={}){this._applyFormState(V),this.markAsPristine(j),this.markAsUntouched(j),this.setValue(this.value,j),this._pendingChange=!1}_updateValue(){}_anyControls(V){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(V){this._onChange.push(V)}_unregisterOnChange(V){ir(this._onChange,V)}registerOnDisabledChange(V){this._onDisabledChange.push(V)}_unregisterOnDisabledChange(V){ir(this._onDisabledChange,V)}_forEachChild(V){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(V){this._isBoxedValue(V)?(this.value=this._pendingValue=V.value,V.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=V}}class pr extends Ko{constructor(V,j,xt){super(Rn(j),xr(xt,j)),this.controls=V,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(V,j){return this.controls[V]?this.controls[V]:(this.controls[V]=j,j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange),j)}addControl(V,j,xt={}){this.registerControl(V,j),this.updateValueAndValidity({emitEvent:xt.emitEvent}),this._onCollectionChange()}removeControl(V,j={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}setControl(V,j,xt={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],j&&this.registerControl(V,j),this.updateValueAndValidity({emitEvent:xt.emitEvent}),this._onCollectionChange()}contains(V){return this.controls.hasOwnProperty(V)&&this.controls[V].enabled}setValue(V,j={}){this._checkAllValuesPresent(V),Object.keys(V).forEach(xt=>{this._throwIfControlMissing(xt),this.controls[xt].setValue(V[xt],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(V,j={}){null!=V&&(Object.keys(V).forEach(xt=>{this.controls[xt]&&this.controls[xt].patchValue(V[xt],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(V={},j={}){this._forEachChild((xt,Be)=>{xt.reset(V[Be],{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this._reduceChildren({},(V,j,xt)=>(V[xt]=j instanceof jr?j.value:j.getRawValue(),V))}_syncPendingControls(){let V=this._reduceChildren(!1,(j,xt)=>!!xt._syncPendingControls()||j);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_throwIfControlMissing(V){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[V])throw new Error(`Cannot find form control with name: ${V}.`)}_forEachChild(V){Object.keys(this.controls).forEach(j=>{const xt=this.controls[j];xt&&V(xt,j)})}_setUpControls(){this._forEachChild(V=>{V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(V){for(const j of Object.keys(this.controls)){const xt=this.controls[j];if(this.contains(j)&&V(xt))return!0}return!1}_reduceValue(){return this._reduceChildren({},(V,j,xt)=>((j.enabled||this.disabled)&&(V[xt]=j.value),V))}_reduceChildren(V,j){let xt=V;return this._forEachChild((Be,Ti)=>{xt=j(xt,Be,Ti)}),xt}_allControlsDisabled(){for(const V of Object.keys(this.controls))if(this.controls[V].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(V){this._forEachChild((j,xt)=>{if(void 0===V[xt])throw new Error(`Must supply a value for form control with name: '${xt}'.`)})}}class ss extends Ko{constructor(V,j,xt){super(Rn(j),xr(xt,j)),this.controls=V,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(V){return this.controls[V]}push(V,j={}){this.controls.push(V),this._registerControl(V),this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}insert(V,j,xt={}){this.controls.splice(V,0,j),this._registerControl(j),this.updateValueAndValidity({emitEvent:xt.emitEvent})}removeAt(V,j={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),this.controls.splice(V,1),this.updateValueAndValidity({emitEvent:j.emitEvent})}setControl(V,j,xt={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),this.controls.splice(V,1),j&&(this.controls.splice(V,0,j),this._registerControl(j)),this.updateValueAndValidity({emitEvent:xt.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(V,j={}){this._checkAllValuesPresent(V),V.forEach((xt,Be)=>{this._throwIfControlMissing(Be),this.at(Be).setValue(xt,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(V,j={}){null!=V&&(V.forEach((xt,Be)=>{this.at(Be)&&this.at(Be).patchValue(xt,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(V=[],j={}){this._forEachChild((xt,Be)=>{xt.reset(V[Be],{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this.controls.map(V=>V instanceof jr?V.value:V.getRawValue())}clear(V={}){this.controls.length<1||(this._forEachChild(j=>j._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:V.emitEvent}))}_syncPendingControls(){let V=this.controls.reduce((j,xt)=>!!xt._syncPendingControls()||j,!1);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_throwIfControlMissing(V){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(V))throw new Error(`Cannot find form control at index ${V}`)}_forEachChild(V){this.controls.forEach((j,xt)=>{V(j,xt)})}_updateValue(){this.value=this.controls.filter(V=>V.enabled||this.disabled).map(V=>V.value)}_anyControls(V){return this.controls.some(j=>j.enabled&&V(j))}_setUpControls(){this._forEachChild(V=>this._registerControl(V))}_checkAllValuesPresent(V){this._forEachChild((j,xt)=>{if(void 0===V[xt])throw new Error(`Must supply a value for form control at index: ${xt}.`)})}_allControlsDisabled(){for(const V of this.controls)if(V.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(V){V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)}}const Zn={provide:Yt,useExisting:(0,y.Gpc)(()=>An)},Di=(()=>Promise.resolve(null))();let An=(()=>{class Q extends Yt{constructor(j,xt){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new y.vpe,this.form=new pr({},Ie(j),je(xt))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(j){Di.then(()=>{const xt=this._findContainer(j.path);j.control=xt.registerControl(j.name,j.control),Bi(j.control,j),j.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(j)})}getControl(j){return this.form.get(j.path)}removeControl(j){Di.then(()=>{const xt=this._findContainer(j.path);xt&&xt.removeControl(j.name),ir(this._directives,j)})}addFormGroup(j){Di.then(()=>{const xt=this._findContainer(j.path),Be=new pr({});Pt(Be,j),xt.registerControl(j.name,Be),Be.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(j){Di.then(()=>{const xt=this._findContainer(j.path);xt&&xt.removeControl(j.name)})}getFormGroup(j){return this.form.get(j.path)}updateModel(j,xt){Di.then(()=>{this.form.get(j.path).setValue(xt)})}setValue(j){this.control.setValue(j)}onSubmit(j){return this.submitted=!0,Ki(this.form,this._directives),this.ngSubmit.emit(j),!1}onReset(){this.resetForm()}resetForm(j){this.form.reset(j),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(j){return j.pop(),j.length?this.form.get(j):this.form}}return Q.\u0275fac=function(j){return new(j||Q)(y.Y36(gt,10),y.Y36(wt,10))},Q.\u0275dir=y.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(j,xt){1&j&&y.NdJ("submit",function(Ti){return xt.onSubmit(Ti)})("reset",function(){return xt.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([Zn]),y.qOj]}),Q})();const On={provide:Mt,useExisting:(0,y.Gpc)(()=>de)},Nn=(()=>Promise.resolve(null))();let de=(()=>{class Q extends Mt{constructor(j,xt,Be,Ti){super(),this.control=new jr,this._registered=!1,this.update=new y.vpe,this._parent=j,this._setValidators(xt),this._setAsyncValidators(Be),this.valueAccessor=Sn(0,Ti)}ngOnChanges(j){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in j&&this._updateDisabled(j),Le(j,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(Q,V){return[...V.path,Q]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Bi(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(j){Nn.then(()=>{this.control.setValue(j,{emitViewToModelChange:!1})})}_updateDisabled(j){const xt=j.isDisabled.currentValue,Be=""===xt||xt&&"false"!==xt;Nn.then(()=>{Be&&!this.control.disabled?this.control.disable():!Be&&this.control.disabled&&this.control.enable()})}}return Q.\u0275fac=function(j){return new(j||Q)(y.Y36(Yt,9),y.Y36(gt,10),y.Y36(wt,10),y.Y36(c,10))},Q.\u0275dir=y.lG2({type:Q,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[y._Bn([On]),y.qOj,y.TTD]}),Q})(),Fe=(()=>{class Q{}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275dir=y.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Q})(),qn=(()=>{class Q{}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275mod=y.oAB({type:Q}),Q.\u0275inj=y.cJS({}),Q})();const ro=new y.OlP("NgModelWithFormControlWarning"),vo={provide:Mt,useExisting:(0,y.Gpc)(()=>Bs)};let Bs=(()=>{class Q extends Mt{constructor(j,xt,Be,Ti){super(),this._ngModelWarningConfig=Ti,this.update=new y.vpe,this._ngModelWarningSent=!1,this._setValidators(j),this._setAsyncValidators(xt),this.valueAccessor=Sn(0,Be)}set isDisabled(j){}ngOnChanges(j){if(this._isControlChanged(j)){const xt=j.form.previousValue;xt&&Ii(xt,this,!1),Bi(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}Le(j,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Ii(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}_isControlChanged(j){return j.hasOwnProperty("form")}}return Q._ngModelWarningSentOnce=!1,Q.\u0275fac=function(j){return new(j||Q)(y.Y36(gt,10),y.Y36(wt,10),y.Y36(c,10),y.Y36(ro,8))},Q.\u0275dir=y.lG2({type:Q,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[y._Bn([vo]),y.qOj,y.TTD]}),Q})();const Hs={provide:Yt,useExisting:(0,y.Gpc)(()=>tr)};let tr=(()=>{class Q extends Yt{constructor(j,xt){super(),this.validators=j,this.asyncValidators=xt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(j),this._setAsyncValidators(xt)}ngOnChanges(j){this._checkFormPresent(),j.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(j){const xt=this.form.get(j.path);return Bi(xt,j),xt.updateValueAndValidity({emitEvent:!1}),this.directives.push(j),xt}getControl(j){return this.form.get(j.path)}removeControl(j){Ii(j.control||null,j,!1),ir(this.directives,j)}addFormGroup(j){this._setUpFormContainer(j)}removeFormGroup(j){this._cleanUpFormContainer(j)}getFormGroup(j){return this.form.get(j.path)}addFormArray(j){this._setUpFormContainer(j)}removeFormArray(j){this._cleanUpFormContainer(j)}getFormArray(j){return this.form.get(j.path)}updateModel(j,xt){this.form.get(j.path).setValue(xt)}onSubmit(j){return this.submitted=!0,Ki(this.form,this.directives),this.ngSubmit.emit(j),!1}onReset(){this.resetForm()}resetForm(j){this.form.reset(j),this.submitted=!1}_updateDomValue(){this.directives.forEach(j=>{const xt=j.control,Be=this.form.get(j.path);xt!==Be&&(Ii(xt||null,j),Be instanceof jr&&(Bi(Be,j),j.control=Be))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(j){const xt=this.form.get(j.path);Pt(xt,j),xt.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(j){if(this.form){const xt=this.form.get(j.path);xt&&function(Q,V){return Qe(Q,V)}(xt,j)&&xt.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ce(this.form,this),this._oldForm&&Qe(this._oldForm,this)}_checkFormPresent(){}}return Q.\u0275fac=function(j){return new(j||Q)(y.Y36(gt,10),y.Y36(wt,10))},Q.\u0275dir=y.lG2({type:Q,selectors:[["","formGroup",""]],hostBindings:function(j,xt){1&j&&y.NdJ("submit",function(Ti){return xt.onSubmit(Ti)})("reset",function(){return xt.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([Hs]),y.qOj,y.TTD]}),Q})();const Ta={provide:gt,useExisting:(0,y.Gpc)(()=>Vs),multi:!0},Po={provide:gt,useExisting:(0,y.Gpc)(()=>Xr),multi:!0};let Vs=(()=>{class Q{constructor(){this._required=!1}get required(){return this._required}set required(j){this._required=null!=j&&!1!==j&&"false"!=`${j}`,this._onChange&&this._onChange()}validate(j){return this.required?lt(j):null}registerOnValidatorChange(j){this._onChange=j}}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275dir=y.lG2({type:Q,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(j,xt){2&j&&y.uIk("required",xt.required?"":null)},inputs:{required:"required"},features:[y._Bn([Ta])]}),Q})(),Xr=(()=>{class Q extends Vs{validate(j){return this.required?ft(j):null}}return Q.\u0275fac=function(){let V;return function(xt){return(V||(V=y.n5z(Q)))(xt||Q)}}(),Q.\u0275dir=y.lG2({type:Q,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(j,xt){2&j&&y.uIk("required",xt.required?"":null)},features:[y._Bn([Po]),y.qOj]}),Q})(),us=(()=>{class Q{}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275mod=y.oAB({type:Q}),Q.\u0275inj=y.cJS({imports:[[qn]]}),Q})(),ll=(()=>{class Q{}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275mod=y.oAB({type:Q}),Q.\u0275inj=y.cJS({imports:[us]}),Q})(),Or=(()=>{class Q{static withConfig(j){return{ngModule:Q,providers:[{provide:ro,useValue:j.warnOnNgModelWithFormControl}]}}}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275mod=y.oAB({type:Q}),Q.\u0275inj=y.cJS({imports:[us]}),Q})()},91079:(H,W,f)=>{"use strict";f.d(W,{XC:()=>ve,Bb:()=>Ae,ZL:()=>we});var y=f(15664),g=f(63191),e=f(5e3),t=f(90508),n=f(50727),r=f(77579),s=f(49770),c=f(56451),v=f(39646),D=f(54968),P=f(70925),G=f(69808),it=f(91314),q=f(30495),bt=f(91159),Ft=f(99129),gt=f(93075),wt=f(67322),Bt=f(95698),Kt=f(63900),It=f(39300),St=f(54004),lt=f(18505),ft=f(91005),ht=f(50226);const Gt=["panel"];function ut(Qt,ee){if(1&Qt&&(e.TgZ(0,"div",0,1),e.Hsn(2),e.qZA()),2&Qt){const Mt=ee.id,Yt=e.oxw();e.Q6J("id",Yt.id)("ngClass",Yt._classList),e.uIk("aria-label",Yt.ariaLabel||null)("aria-labelledby",Yt._getPanelAriaLabelledby(Mt))}}const ot=["*"];let st=0;class Z{constructor(ee,Mt){this.source=ee,this.option=Mt}}const Zt=(0,t.Kr)(class{}),vt=new e.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1}}});let re=(()=>{class Qt extends Zt{constructor(Mt,Yt,ye,ui){super(),this._changeDetectorRef=Mt,this._elementRef=Yt,this._activeOptionChanges=n.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new e.vpe,this.opened=new e.vpe,this.closed=new e.vpe,this.optionActivated=new e.vpe,this._classList={},this.id="mat-autocomplete-"+st++,this.inertGroups=(null==ui?void 0:ui.SAFARI)||!1,this._autoActiveFirstOption=!!ye.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(Mt){this._autoActiveFirstOption=(0,g.Ig)(Mt)}set classList(Mt){this._classList=Mt&&Mt.length?(0,g.du)(Mt).reduce((Yt,ye)=>(Yt[ye]=!0,Yt),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new y.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(Mt=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[Mt]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(Mt){this.panel&&(this.panel.nativeElement.scrollTop=Mt)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(Mt){const Yt=new Z(this,Mt);this.optionSelected.emit(Yt)}_getPanelAriaLabelledby(Mt){return this.ariaLabel?null:this.ariaLabelledby?(Mt?Mt+" ":"")+this.ariaLabelledby:Mt}_setVisibilityClasses(Mt){Mt[this._visibleClass]=this.showPanel,Mt[this._hiddenClass]=!this.showPanel}}return Qt.\u0275fac=function(Mt){return new(Mt||Qt)(e.Y36(e.sBO),e.Y36(e.SBq),e.Y36(vt),e.Y36(P.t4))},Qt.\u0275dir=e.lG2({type:Qt,viewQuery:function(Mt,Yt){if(1&Mt&&(e.Gf(e.Rgc,7),e.Gf(Gt,5)),2&Mt){let ye;e.iGM(ye=e.CRH())&&(Yt.template=ye.first),e.iGM(ye=e.CRH())&&(Yt.panel=ye.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[e.qOj]}),Qt})(),ve=(()=>{class Qt extends re{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return Qt.\u0275fac=function(){let ee;return function(Yt){return(ee||(ee=e.n5z(Qt)))(Yt||Qt)}}(),Qt.\u0275cmp=e.Xpm({type:Qt,selectors:[["mat-autocomplete"]],contentQueries:function(Mt,Yt,ye){if(1&Mt&&(e.Suo(ye,t.K7,5),e.Suo(ye,t.ey,5)),2&Mt){let ui;e.iGM(ui=e.CRH())&&(Yt.optionGroups=ui),e.iGM(ui=e.CRH())&&(Yt.options=ui)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[e._Bn([{provide:t.HF,useExisting:Qt}]),e.qOj],ngContentSelectors:ot,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(Mt,Yt){1&Mt&&(e.F$t(),e.YNc(0,ut,3,4,"ng-template"))},directives:[G.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n"],encapsulation:2,changeDetection:0}),Qt})();const oe=new e.OlP("mat-autocomplete-scroll-strategy"),Re={provide:oe,deps:[it.aV],useFactory:function(Qt){return()=>Qt.scrollStrategies.reposition()}},je={provide:gt.JU,useExisting:(0,e.Gpc)(()=>we),multi:!0};let Ze=(()=>{class Qt{constructor(Mt,Yt,ye,ui,Te,ce,te,Me,ue,_e,be){this._element=Mt,this._overlay=Yt,this._viewContainerRef=ye,this._zone=ui,this._changeDetectorRef=Te,this._dir=te,this._formField=Me,this._document=ue,this._viewportRuler=_e,this._defaults=be,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=n.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new r.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,s.P)(()=>this.autocomplete&&this.autocomplete.options?(0,c.T)(...this.autocomplete.options.map(Dt=>Dt.onSelectionChange)):this._zone.onStable.pipe((0,Bt.q)(1),(0,Kt.w)(()=>this.optionSelections))),this._scrollStrategy=ce}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(Mt){this._autocompleteDisabled=(0,g.Ig)(Mt)}ngAfterViewInit(){const Mt=this._getWindow();void 0!==Mt&&this._zone.runOutsideAngular(()=>Mt.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(Mt){Mt.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const Mt=this._getWindow();void 0!==Mt&&Mt.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,c.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,It.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,It.h)(()=>this._overlayAttached)):(0,v.of)()).pipe((0,St.U)(Mt=>Mt instanceof t.rN?Mt:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,c.T)((0,D.R)(this._document,"click"),(0,D.R)(this._document,"auxclick"),(0,D.R)(this._document,"touchend")).pipe((0,It.h)(Mt=>{const Yt=(0,P.sA)(Mt),ye=this._formField?this._formField._elementRef.nativeElement:null,ui=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&Yt!==this._element.nativeElement&&(!ye||!ye.contains(Yt))&&(!ui||!ui.contains(Yt))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(Yt)}))}writeValue(Mt){Promise.resolve(null).then(()=>this._setTriggerValue(Mt))}registerOnChange(Mt){this._onChange=Mt}registerOnTouched(Mt){this._onTouched=Mt}setDisabledState(Mt){this._element.nativeElement.disabled=Mt}_handleKeydown(Mt){const Yt=Mt.keyCode;if(Yt===bt.hY&&!(0,bt.Vb)(Mt)&&Mt.preventDefault(),this.activeOption&&Yt===bt.K5&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),Mt.preventDefault();else if(this.autocomplete){const ye=this.autocomplete._keyManager.activeItem,ui=Yt===bt.LH||Yt===bt.JH;this.panelOpen||Yt===bt.Mf?this.autocomplete._keyManager.onKeydown(Mt):ui&&this._canOpen()&&this.openPanel(),(ui||this.autocomplete._keyManager.activeItem!==ye)&&this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}_handleInput(Mt){let Yt=Mt.target,ye=Yt.value;"number"===Yt.type&&(ye=""==ye?null:parseFloat(ye)),this._previousValue!==ye&&(this._previousValue=ye,this._onChange(ye),this._canOpen()&&this._document.activeElement===Mt.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_floatLabel(Mt=!1){this._formField&&"auto"===this._formField.floatLabel&&(Mt?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const Mt=this._zone.onStable.pipe((0,Bt.q)(1)),Yt=this.autocomplete.options.changes.pipe((0,lt.b)(()=>this._positionStrategy.reapplyLastPosition()),(0,ft.g)(0));return(0,c.T)(Mt,Yt).pipe((0,Kt.w)(()=>{const ye=this.panelOpen;return this._resetActiveItem(),this.autocomplete._setVisibility(),this.panelOpen&&(this._overlayRef.updatePosition(),ye!==this.panelOpen&&this.autocomplete.opened.emit()),this.panelClosingActions}),(0,Bt.q)(1)).subscribe(ye=>this._setValueAndClose(ye))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(Mt){const Yt=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(Mt):Mt,ye=null!=Yt?Yt:"";this._formField?this._formField._control.value=ye:this._element.nativeElement.value=ye,this._previousValue=ye}_setValueAndClose(Mt){Mt&&Mt.source&&(this._clearPreviousSelectedOption(Mt.source),this._setTriggerValue(Mt.source.value),this._onChange(Mt.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(Mt.source)),this.closePanel()}_clearPreviousSelectedOption(Mt){this.autocomplete.options.forEach(Yt=>{Yt!==Mt&&Yt.selected&&Yt.deselect()})}_attachOverlay(){var Mt;let Yt=this._overlayRef;Yt?(this._positionStrategy.setOrigin(this._getConnectedElement()),Yt.updateSize({width:this._getPanelWidth()})):(this._portal=new Ft.UE(this.autocomplete.template,this._viewContainerRef,{id:null===(Mt=this._formField)||void 0===Mt?void 0:Mt.getLabelId()}),Yt=this._overlay.create(this._getOverlayConfig()),this._overlayRef=Yt,Yt.keydownEvents().subscribe(ui=>{(ui.keyCode===bt.hY&&!(0,bt.Vb)(ui)||ui.keyCode===bt.LH&&(0,bt.Vb)(ui,"altKey"))&&(this._closeKeyEventStream.next(),this._resetActiveItem(),ui.stopPropagation(),ui.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&Yt&&Yt.updateSize({width:this._getPanelWidth()})})),Yt&&!Yt.hasAttached()&&(Yt.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const ye=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&ye!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){var Mt;return new it.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(Mt=this._defaults)||void 0===Mt?void 0:Mt.overlayPanelClass})}_getOverlayPosition(){const Mt=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(Mt),this._positionStrategy=Mt,Mt}_setStrategyPositions(Mt){const Yt=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],ye=this._aboveClass,ui=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:ye},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:ye}];let Te;Te="above"===this.position?ui:"below"===this.position?Yt:[...Yt,...ui],Mt.withPositions(Te)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const Mt=this.autocomplete;Mt.autoActiveFirstOption?Mt._keyManager.setFirstItemActive():Mt._keyManager.setActiveItem(-1)}_canOpen(){const Mt=this._element.nativeElement;return!Mt.readOnly&&!Mt.disabled&&!this._autocompleteDisabled}_getWindow(){var Mt;return(null===(Mt=this._document)||void 0===Mt?void 0:Mt.defaultView)||window}_scrollToOption(Mt){const Yt=this.autocomplete,ye=(0,t.CB)(Mt,Yt.options,Yt.optionGroups);if(0===Mt&&1===ye)Yt._setScrollTop(0);else if(Yt.panel){const ui=Yt.options.toArray()[Mt];if(ui){const Te=ui._getHostElement(),ce=(0,t.jH)(Te.offsetTop,Te.offsetHeight,Yt._getScrollTop(),Yt.panel.nativeElement.offsetHeight);Yt._setScrollTop(ce)}}}}return Qt.\u0275fac=function(Mt){return new(Mt||Qt)(e.Y36(e.SBq),e.Y36(it.aV),e.Y36(e.s_b),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(oe),e.Y36(ht.Is,8),e.Y36(wt.G_,9),e.Y36(G.K0,8),e.Y36(q.rL),e.Y36(vt,8))},Qt.\u0275dir=e.lG2({type:Qt,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[e.TTD]}),Qt})(),we=(()=>{class Qt extends Ze{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return Qt.\u0275fac=function(){let ee;return function(Yt){return(ee||(ee=e.n5z(Qt)))(Yt||Qt)}}(),Qt.\u0275dir=e.lG2({type:Qt,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(Mt,Yt){1&Mt&&e.NdJ("focusin",function(){return Yt._handleFocus()})("blur",function(){return Yt._onTouched()})("input",function(ui){return Yt._handleInput(ui)})("keydown",function(ui){return Yt._handleKeydown(ui)}),2&Mt&&e.uIk("autocomplete",Yt.autocompleteAttribute)("role",Yt.autocompleteDisabled?null:"combobox")("aria-autocomplete",Yt.autocompleteDisabled?null:"list")("aria-activedescendant",Yt.panelOpen&&Yt.activeOption?Yt.activeOption.id:null)("aria-expanded",Yt.autocompleteDisabled?null:Yt.panelOpen.toString())("aria-owns",Yt.autocompleteDisabled||!Yt.panelOpen||null==Yt.autocomplete?null:Yt.autocomplete.id)("aria-haspopup",!Yt.autocompleteDisabled)},exportAs:["matAutocompleteTrigger"],features:[e._Bn([je]),e.qOj]}),Qt})(),Ae=(()=>{class Qt{}return Qt.\u0275fac=function(Mt){return new(Mt||Qt)},Qt.\u0275mod=e.oAB({type:Qt}),Qt.\u0275inj=e.cJS({providers:[Re],imports:[[it.U8,t.Ng,t.BQ,G.ez],q.ZD,t.Ng,t.BQ]}),Qt})()},47423:(H,W,f)=>{"use strict";f.d(W,{zs:()=>G,lW:()=>P,ot:()=>it});var y=f(5e3),g=f(90508),e=f(76360),t=f(15664);const n=["mat-button",""],r=["*"],v=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],D=(0,g.pj)((0,g.Id)((0,g.Kr)(class{constructor(q){this._elementRef=q}})));let P=(()=>{class q extends D{constructor(Ft,gt,wt){super(Ft),this._focusMonitor=gt,this._animationMode=wt,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Bt of v)this._hasHostAttributes(Bt)&&this._getHostElement().classList.add(Bt);Ft.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Ft,gt){Ft?this._focusMonitor.focusVia(this._getHostElement(),Ft,gt):this._getHostElement().focus(gt)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...Ft){return Ft.some(gt=>this._getHostElement().hasAttribute(gt))}}return q.\u0275fac=function(Ft){return new(Ft||q)(y.Y36(y.SBq),y.Y36(t.tE),y.Y36(e.Qb,8))},q.\u0275cmp=y.Xpm({type:q,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(Ft,gt){if(1&Ft&&y.Gf(g.wG,5),2&Ft){let wt;y.iGM(wt=y.CRH())&&(gt.ripple=wt.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(Ft,gt){2&Ft&&(y.uIk("disabled",gt.disabled||null),y.ekj("_mat-animation-noopable","NoopAnimations"===gt._animationMode)("mat-button-disabled",gt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[y.qOj],attrs:n,ngContentSelectors:r,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Ft,gt){1&Ft&&(y.F$t(),y.TgZ(0,"span",0),y.Hsn(1),y.qZA(),y._UZ(2,"span",1),y._UZ(3,"span",2)),2&Ft&&(y.xp6(2),y.ekj("mat-button-ripple-round",gt.isRoundButton||gt.isIconButton),y.Q6J("matRippleDisabled",gt._isRippleDisabled())("matRippleCentered",gt.isIconButton)("matRippleTrigger",gt._getHostElement()))},directives:[g.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),q})(),G=(()=>{class q extends P{constructor(Ft,gt,wt){super(gt,Ft,wt)}_haltDisabledEvents(Ft){this.disabled&&(Ft.preventDefault(),Ft.stopImmediatePropagation())}}return q.\u0275fac=function(Ft){return new(Ft||q)(y.Y36(t.tE),y.Y36(y.SBq),y.Y36(e.Qb,8))},q.\u0275cmp=y.Xpm({type:q,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(Ft,gt){1&Ft&&y.NdJ("click",function(Bt){return gt._haltDisabledEvents(Bt)}),2&Ft&&(y.uIk("tabindex",gt.disabled?-1:gt.tabIndex||0)("disabled",gt.disabled||null)("aria-disabled",gt.disabled.toString()),y.ekj("_mat-animation-noopable","NoopAnimations"===gt._animationMode)("mat-button-disabled",gt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[y.qOj],attrs:n,ngContentSelectors:r,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Ft,gt){1&Ft&&(y.F$t(),y.TgZ(0,"span",0),y.Hsn(1),y.qZA(),y._UZ(2,"span",1),y._UZ(3,"span",2)),2&Ft&&(y.xp6(2),y.ekj("mat-button-ripple-round",gt.isRoundButton||gt.isIconButton),y.Q6J("matRippleDisabled",gt._isRippleDisabled())("matRippleCentered",gt.isIconButton)("matRippleTrigger",gt._getHostElement()))},directives:[g.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),q})(),it=(()=>{class q{}return q.\u0275fac=function(Ft){return new(Ft||q)},q.\u0275mod=y.oAB({type:q}),q.\u0275inj=y.cJS({imports:[[g.si,g.BQ],g.BQ]}),q})()},90508:(H,W,f)=>{"use strict";f.d(W,{yN:()=>wt,mZ:()=>Bt,_A:()=>ve,rD:()=>Wt,sG:()=>oe,K7:()=>li,HF:()=>Ri,Y2:()=>be,BQ:()=>lt,X2:()=>Ae,uc:()=>Mt,XK:()=>we,ey:()=>Ce,Ng:()=>Pi,rN:()=>ni,nP:()=>Ge,us:()=>Xe,wG:()=>Dt,si:()=>zt,IR:()=>Me,CB:()=>Qe,jH:()=>Ei,pj:()=>ot,Kr:()=>st,Id:()=>ut,FD:()=>Zt,sb:()=>Z,E0:()=>Qt});var y=f(5e3),g=f(50226),t=f(69808),n=f(70925),r=f(15664),s=f(63191),c=f(77579),v=f(68675),D=f(76360),P=f(91159);function q(ti,ge){if(1&ti&&y._UZ(0,"mat-pseudo-checkbox",4),2&ti){const Pt=y.oxw();y.Q6J("state",Pt.selected?"checked":"unchecked")("disabled",Pt.disabled)}}function bt(ti,ge){if(1&ti&&(y.TgZ(0,"span",5),y._uU(1),y.qZA()),2&ti){const Pt=y.oxw();y.xp6(1),y.hij("(",Pt.group.label,")")}}const Ft=["*"];let wt=(()=>{class ti{}return ti.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",ti.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",ti.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",ti.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",ti})(),Bt=(()=>{class ti{}return ti.COMPLEX="375ms",ti.ENTERING="225ms",ti.EXITING="195ms",ti})();const St=new y.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let lt=(()=>{class ti{constructor(Pt,dt,Nt){this._sanityChecks=dt,this._document=Nt,this._hasDoneGlobalChecks=!1,Pt._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(Pt){return!(0,n.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[Pt])}}return ti.\u0275fac=function(Pt){return new(Pt||ti)(y.LFG(r.qm),y.LFG(St,8),y.LFG(t.K0))},ti.\u0275mod=y.oAB({type:ti}),ti.\u0275inj=y.cJS({imports:[[g.vT],g.vT]}),ti})();function ut(ti){return class extends ti{constructor(...ge){super(...ge),this._disabled=!1}get disabled(){return this._disabled}set disabled(ge){this._disabled=(0,s.Ig)(ge)}}}function ot(ti,ge){return class extends ti{constructor(...Pt){super(...Pt),this.defaultColor=ge,this.color=ge}get color(){return this._color}set color(Pt){const dt=Pt||this.defaultColor;dt!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),dt&&this._elementRef.nativeElement.classList.add(`mat-${dt}`),this._color=dt)}}}function st(ti){return class extends ti{constructor(...ge){super(...ge),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(ge){this._disableRipple=(0,s.Ig)(ge)}}}function Z(ti,ge=0){return class extends ti{constructor(...Pt){super(...Pt),this._tabIndex=ge,this.defaultTabIndex=ge}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(Pt){this._tabIndex=null!=Pt?(0,s.su)(Pt):this.defaultTabIndex}}}function Zt(ti){return class extends ti{constructor(...ge){super(...ge),this.stateChanges=new c.x,this.errorState=!1}updateErrorState(){const ge=this.errorState,pe=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);pe!==ge&&(this.errorState=pe,this.stateChanges.next())}}}const At=new y.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return(0,y.f3M)(y.soG)}});class ve{constructor(){this._localeChanges=new c.x,this.localeChanges=this._localeChanges}getValidDateOrNull(ge){return this.isDateInstance(ge)&&this.isValid(ge)?ge:null}deserialize(ge){return null==ge||this.isDateInstance(ge)&&this.isValid(ge)?ge:this.invalid()}setLocale(ge){this.locale=ge,this._localeChanges.next()}compareDate(ge,Pt){return this.getYear(ge)-this.getYear(Pt)||this.getMonth(ge)-this.getMonth(Pt)||this.getDate(ge)-this.getDate(Pt)}sameDate(ge,Pt){if(ge&&Pt){let dt=this.isValid(ge),Nt=this.isValid(Pt);return dt&&Nt?!this.compareDate(ge,Pt):dt==Nt}return ge==Pt}clampDate(ge,Pt,dt){return Pt&&this.compareDate(ge,Pt)<0?Pt:dt&&this.compareDate(ge,dt)>0?dt:ge}}const oe=new y.OlP("mat-date-formats"),Ie=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Re(ti,ge){const Pt=Array(ti);for(let dt=0;dt<ti;dt++)Pt[dt]=ge(dt);return Pt}let je=(()=>{class ti extends ve{constructor(Pt,dt){super(),this.useUtcForDisplay=!1,super.setLocale(Pt)}getYear(Pt){return Pt.getFullYear()}getMonth(Pt){return Pt.getMonth()}getDate(Pt){return Pt.getDate()}getDayOfWeek(Pt){return Pt.getDay()}getMonthNames(Pt){const dt=new Intl.DateTimeFormat(this.locale,{month:Pt,timeZone:"utc"});return Re(12,Nt=>this._format(dt,new Date(2017,Nt,1)))}getDateNames(){const Pt=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Re(31,dt=>this._format(Pt,new Date(2017,0,dt+1)))}getDayOfWeekNames(Pt){const dt=new Intl.DateTimeFormat(this.locale,{weekday:Pt,timeZone:"utc"});return Re(7,Nt=>this._format(dt,new Date(2017,0,Nt+1)))}getYearName(Pt){const dt=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(dt,Pt)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(Pt){return this.getDate(this._createDateWithOverflow(this.getYear(Pt),this.getMonth(Pt)+1,0))}clone(Pt){return new Date(Pt.getTime())}createDate(Pt,dt,Nt){let pe=this._createDateWithOverflow(Pt,dt,Nt);return pe.getMonth(),pe}today(){return new Date}parse(Pt){return"number"==typeof Pt?new Date(Pt):Pt?new Date(Date.parse(Pt)):null}format(Pt,dt){if(!this.isValid(Pt))throw Error("NativeDateAdapter: Cannot format invalid date.");const Nt=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},dt),{timeZone:"utc"}));return this._format(Nt,Pt)}addCalendarYears(Pt,dt){return this.addCalendarMonths(Pt,12*dt)}addCalendarMonths(Pt,dt){let Nt=this._createDateWithOverflow(this.getYear(Pt),this.getMonth(Pt)+dt,this.getDate(Pt));return this.getMonth(Nt)!=((this.getMonth(Pt)+dt)%12+12)%12&&(Nt=this._createDateWithOverflow(this.getYear(Nt),this.getMonth(Nt),0)),Nt}addCalendarDays(Pt,dt){return this._createDateWithOverflow(this.getYear(Pt),this.getMonth(Pt),this.getDate(Pt)+dt)}toIso8601(Pt){return[Pt.getUTCFullYear(),this._2digit(Pt.getUTCMonth()+1),this._2digit(Pt.getUTCDate())].join("-")}deserialize(Pt){if("string"==typeof Pt){if(!Pt)return null;if(Ie.test(Pt)){let dt=new Date(Pt);if(this.isValid(dt))return dt}}return super.deserialize(Pt)}isDateInstance(Pt){return Pt instanceof Date}isValid(Pt){return!isNaN(Pt.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(Pt,dt,Nt){const pe=new Date;return pe.setFullYear(Pt,dt,Nt),pe.setHours(0,0,0,0),pe}_2digit(Pt){return("00"+Pt).slice(-2)}_format(Pt,dt){const Nt=new Date;return Nt.setUTCFullYear(dt.getFullYear(),dt.getMonth(),dt.getDate()),Nt.setUTCHours(dt.getHours(),dt.getMinutes(),dt.getSeconds(),dt.getMilliseconds()),Pt.format(Nt)}}return ti.\u0275fac=function(Pt){return new(Pt||ti)(y.LFG(At,8),y.LFG(n.t4))},ti.\u0275prov=y.Yz7({token:ti,factory:ti.\u0275fac}),ti})();const Si={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let Ze=(()=>{class ti{}return ti.\u0275fac=function(Pt){return new(Pt||ti)},ti.\u0275mod=y.oAB({type:ti}),ti.\u0275inj=y.cJS({providers:[{provide:ve,useClass:je}],imports:[[n.ud]]}),ti})(),we=(()=>{class ti{}return ti.\u0275fac=function(Pt){return new(Pt||ti)},ti.\u0275mod=y.oAB({type:ti}),ti.\u0275inj=y.cJS({providers:[{provide:oe,useValue:Si}],imports:[[Ze]]}),ti})(),Wt=(()=>{class ti{isErrorState(Pt,dt){return!!(Pt&&Pt.invalid&&(Pt.touched||dt&&dt.submitted))}}return ti.\u0275fac=function(Pt){return new(Pt||ti)},ti.\u0275prov=y.Yz7({token:ti,factory:ti.\u0275fac,providedIn:"root"}),ti})(),Ae=(()=>{class ti{}return ti.\u0275fac=function(Pt){return new(Pt||ti)},ti.\u0275dir=y.lG2({type:ti,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),ti})();function Qt(ti,ge,Pt="mat"){ti.changes.pipe((0,v.O)(ti)).subscribe(({length:dt})=>{ee(ge,`${Pt}-2-line`,!1),ee(ge,`${Pt}-3-line`,!1),ee(ge,`${Pt}-multi-line`,!1),2===dt||3===dt?ee(ge,`${Pt}-${dt}-line`,!0):dt>3&&ee(ge,`${Pt}-multi-line`,!0)})}function ee(ti,ge,Pt){ti.nativeElement.classList.toggle(ge,Pt)}let Mt=(()=>{class ti{}return ti.\u0275fac=function(Pt){return new(Pt||ti)},ti.\u0275mod=y.oAB({type:ti}),ti.\u0275inj=y.cJS({imports:[[lt],lt]}),ti})();class Yt{constructor(ge,Pt,dt){this._renderer=ge,this.element=Pt,this.config=dt,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ye={enterDuration:225,exitDuration:150},Te=(0,n.i$)({passive:!0}),ce=["mousedown","touchstart"],te=["mouseup","mouseleave","touchend","touchcancel"];class Me{constructor(ge,Pt,dt,Nt){this._target=ge,this._ngZone=Pt,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,Nt.isBrowser&&(this._containerElement=(0,s.fI)(dt))}fadeInRipple(ge,Pt,dt={}){const Nt=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),pe=Object.assign(Object.assign({},ye),dt.animation);dt.centered&&(ge=Nt.left+Nt.width/2,Pt=Nt.top+Nt.height/2);const Le=dt.radius||function(ti,ge,Pt){const dt=Math.max(Math.abs(ti-Pt.left),Math.abs(ti-Pt.right)),Nt=Math.max(Math.abs(ge-Pt.top),Math.abs(ge-Pt.bottom));return Math.sqrt(dt*dt+Nt*Nt)}(ge,Pt,Nt),Vi=ge-Nt.left,Ki=Pt-Nt.top,Sn=pe.enterDuration,ir=document.createElement("div");ir.classList.add("mat-ripple-element"),ir.style.left=Vi-Le+"px",ir.style.top=Ki-Le+"px",ir.style.height=2*Le+"px",ir.style.width=2*Le+"px",null!=dt.color&&(ir.style.backgroundColor=dt.color),ir.style.transitionDuration=`${Sn}ms`,this._containerElement.appendChild(ir),window.getComputedStyle(ir).getPropertyValue("opacity"),ir.style.transform="scale(1)";const pi=new Yt(this,ir,dt);return pi.state=0,this._activeRipples.add(pi),dt.persistent||(this._mostRecentTransientRipple=pi),this._runTimeoutOutsideZone(()=>{const Ke=pi===this._mostRecentTransientRipple;pi.state=1,!dt.persistent&&(!Ke||!this._isPointerDown)&&pi.fadeOut()},Sn),pi}fadeOutRipple(ge){const Pt=this._activeRipples.delete(ge);if(ge===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!Pt)return;const dt=ge.element,Nt=Object.assign(Object.assign({},ye),ge.config.animation);dt.style.transitionDuration=`${Nt.exitDuration}ms`,dt.style.opacity="0",ge.state=2,this._runTimeoutOutsideZone(()=>{ge.state=3,dt.remove()},Nt.exitDuration)}fadeOutAll(){this._activeRipples.forEach(ge=>ge.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(ge=>{ge.config.persistent||ge.fadeOut()})}setupTriggerEvents(ge){const Pt=(0,s.fI)(ge);!Pt||Pt===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=Pt,this._registerEvents(ce))}handleEvent(ge){"mousedown"===ge.type?this._onMousedown(ge):"touchstart"===ge.type?this._onTouchStart(ge):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(te),this._pointerUpEventsRegistered=!0)}_onMousedown(ge){const Pt=(0,r.X6)(ge),dt=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!Pt&&!dt&&(this._isPointerDown=!0,this.fadeInRipple(ge.clientX,ge.clientY,this._target.rippleConfig))}_onTouchStart(ge){if(!this._target.rippleDisabled&&!(0,r.yG)(ge)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const Pt=ge.changedTouches;for(let dt=0;dt<Pt.length;dt++)this.fadeInRipple(Pt[dt].clientX,Pt[dt].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(ge=>{!ge.config.persistent&&(1===ge.state||ge.config.terminateOnPointerUp&&0===ge.state)&&ge.fadeOut()}))}_runTimeoutOutsideZone(ge,Pt=0){this._ngZone.runOutsideAngular(()=>setTimeout(ge,Pt))}_registerEvents(ge){this._ngZone.runOutsideAngular(()=>{ge.forEach(Pt=>{this._triggerElement.addEventListener(Pt,this,Te)})})}_removeTriggerEvents(){this._triggerElement&&(ce.forEach(ge=>{this._triggerElement.removeEventListener(ge,this,Te)}),this._pointerUpEventsRegistered&&te.forEach(ge=>{this._triggerElement.removeEventListener(ge,this,Te)}))}}const be=new y.OlP("mat-ripple-global-options");let Dt=(()=>{class ti{constructor(Pt,dt,Nt,pe,Le){this._elementRef=Pt,this._animationMode=Le,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=pe||{},this._rippleRenderer=new Me(this,dt,Pt,Nt)}get disabled(){return this._disabled}set disabled(Pt){Pt&&this.fadeOutAllNonPersistent(),this._disabled=Pt,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(Pt){this._trigger=Pt,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(Pt,dt=0,Nt){return"number"==typeof Pt?this._rippleRenderer.fadeInRipple(Pt,dt,Object.assign(Object.assign({},this.rippleConfig),Nt)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),Pt))}}return ti.\u0275fac=function(Pt){return new(Pt||ti)(y.Y36(y.SBq),y.Y36(y.R0b),y.Y36(n.t4),y.Y36(be,8),y.Y36(D.Qb,8))},ti.\u0275dir=y.lG2({type:ti,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(Pt,dt){2&Pt&&y.ekj("mat-ripple-unbounded",dt.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),ti})(),zt=(()=>{class ti{}return ti.\u0275fac=function(Pt){return new(Pt||ti)},ti.\u0275mod=y.oAB({type:ti}),ti.\u0275inj=y.cJS({imports:[[lt,n.ud],lt]}),ti})(),Ge=(()=>{class ti{constructor(Pt){this._animationMode=Pt,this.state="unchecked",this.disabled=!1}}return ti.\u0275fac=function(Pt){return new(Pt||ti)(y.Y36(D.Qb,8))},ti.\u0275cmp=y.Xpm({type:ti,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(Pt,dt){2&Pt&&y.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===dt.state)("mat-pseudo-checkbox-checked","checked"===dt.state)("mat-pseudo-checkbox-disabled",dt.disabled)("_mat-animation-noopable","NoopAnimations"===dt._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(Pt,dt){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),ti})(),Xe=(()=>{class ti{}return ti.\u0275fac=function(Pt){return new(Pt||ti)},ti.\u0275mod=y.oAB({type:ti}),ti.\u0275inj=y.cJS({imports:[[lt]]}),ti})();const Ri=new y.OlP("MAT_OPTION_PARENT_COMPONENT"),li=new y.OlP("MatOptgroup");let Ii=0;class ni{constructor(ge,Pt=!1){this.source=ge,this.isUserInput=Pt}}let vi=(()=>{class ti{constructor(Pt,dt,Nt,pe){this._element=Pt,this._changeDetectorRef=dt,this._parent=Nt,this.group=pe,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Ii++,this.onSelectionChange=new y.vpe,this._stateChanges=new c.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(Pt){this._disabled=(0,s.Ig)(Pt)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(Pt,dt){const Nt=this._getHostElement();"function"==typeof Nt.focus&&Nt.focus(dt)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(Pt){(Pt.keyCode===P.K5||Pt.keyCode===P.L_)&&!(0,P.Vb)(Pt)&&(this._selectViaInteraction(),Pt.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const Pt=this.viewValue;Pt!==this._mostRecentViewValue&&(this._mostRecentViewValue=Pt,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(Pt=!1){this.onSelectionChange.emit(new ni(this,Pt))}}return ti.\u0275fac=function(Pt){y.$Z()},ti.\u0275dir=y.lG2({type:ti,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),ti})(),Ce=(()=>{class ti extends vi{constructor(Pt,dt,Nt,pe){super(Pt,dt,Nt,pe)}}return ti.\u0275fac=function(Pt){return new(Pt||ti)(y.Y36(y.SBq),y.Y36(y.sBO),y.Y36(Ri,8),y.Y36(li,8))},ti.\u0275cmp=y.Xpm({type:ti,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(Pt,dt){1&Pt&&y.NdJ("click",function(){return dt._selectViaInteraction()})("keydown",function(pe){return dt._handleKeydown(pe)}),2&Pt&&(y.Ikx("id",dt.id),y.uIk("tabindex",dt._getTabIndex())("aria-selected",dt._getAriaSelected())("aria-disabled",dt.disabled.toString()),y.ekj("mat-selected",dt.selected)("mat-option-multiple",dt.multiple)("mat-active",dt.active)("mat-option-disabled",dt.disabled))},exportAs:["matOption"],features:[y.qOj],ngContentSelectors:Ft,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(Pt,dt){1&Pt&&(y.F$t(),y.YNc(0,q,1,2,"mat-pseudo-checkbox",0),y.TgZ(1,"span",1),y.Hsn(2),y.qZA(),y.YNc(3,bt,2,1,"span",2),y._UZ(4,"div",3)),2&Pt&&(y.Q6J("ngIf",dt.multiple),y.xp6(3),y.Q6J("ngIf",dt.group&&dt.group._inert),y.xp6(1),y.Q6J("matRippleTrigger",dt._getHostElement())("matRippleDisabled",dt.disabled||dt.disableRipple))},directives:[t.O5,Dt,Ge],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),ti})();function Qe(ti,ge,Pt){if(Pt.length){let dt=ge.toArray(),Nt=Pt.toArray(),pe=0;for(let Le=0;Le<ti+1;Le++)dt[Le].group&&dt[Le].group===Nt[pe]&&pe++;return pe}return 0}function Ei(ti,ge,Pt,dt){return ti<Pt?ti:ti+ge>Pt+dt?Math.max(0,ti-dt+ge):Pt}let Pi=(()=>{class ti{}return ti.\u0275fac=function(Pt){return new(Pt||ti)},ti.\u0275mod=y.oAB({type:ti}),ti.\u0275inj=y.cJS({imports:[[zt,t.ez,lt,Xe]]}),ti})()},48966:(H,W,f)=>{"use strict";f.d(W,{uw:()=>ve,Is:()=>ci,so:()=>Gt});var y=f(91314),g=f(99129),e=f(5e3),t=f(90508),n=f(50226),r=f(77579),s=f(49770),c=f(50727),v=f(39646),D=f(39300),P=f(95698),G=f(68675),it=f(70925),q=f(69808),bt=f(41777),Ft=f(15664),gt=f(91159),wt=f(76360);function Bt(Wt,Ae){}class Kt{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const It={dialogContainer:(0,bt.X$)("dialogContainer",[(0,bt.SB)("void, exit",(0,bt.oB)({opacity:0,transform:"scale(0.7)"})),(0,bt.SB)("enter",(0,bt.oB)({transform:"none"})),(0,bt.eR)("* => enter",(0,bt.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,bt.oB)({transform:"none",opacity:1}))),(0,bt.eR)("* => void, * => exit",(0,bt.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,bt.oB)({opacity:0})))])};let lt=(()=>{class Wt extends g.en{constructor(Qt,ee,Mt,Yt,ye,ui,Te,ce){super(),this._elementRef=Qt,this._focusTrapFactory=ee,this._changeDetectorRef=Mt,this._config=ye,this._interactivityChecker=ui,this._ngZone=Te,this._focusMonitor=ce,this._animationStateChanged=new e.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=te=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(te)),this._ariaLabelledBy=ye.ariaLabelledBy||null,this._document=Yt}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(Qt){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(Qt)}attachTemplatePortal(Qt){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(Qt)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(Qt,ee){this._interactivityChecker.isFocusable(Qt)||(Qt.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{Qt.addEventListener("blur",()=>Qt.removeAttribute("tabindex")),Qt.addEventListener("mousedown",()=>Qt.removeAttribute("tabindex"))})),Qt.focus(ee)}_focusByCssSelector(Qt,ee){let Mt=this._elementRef.nativeElement.querySelector(Qt);Mt&&this._forceFocus(Mt,ee)}_trapFocus(){const Qt=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||Qt.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(ee=>{ee||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const Qt=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&Qt&&"function"==typeof Qt.focus){const ee=(0,it.ht)(),Mt=this._elementRef.nativeElement;(!ee||ee===this._document.body||ee===Mt||Mt.contains(ee))&&(this._focusMonitor?(this._focusMonitor.focusVia(Qt,this._closeInteractionType),this._closeInteractionType=null):Qt.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,it.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const Qt=this._elementRef.nativeElement,ee=(0,it.ht)();return Qt===ee||Qt.contains(ee)}}return Wt.\u0275fac=function(Qt){return new(Qt||Wt)(e.Y36(e.SBq),e.Y36(Ft.qV),e.Y36(e.sBO),e.Y36(q.K0,8),e.Y36(Kt),e.Y36(Ft.ic),e.Y36(e.R0b),e.Y36(Ft.tE))},Wt.\u0275dir=e.lG2({type:Wt,viewQuery:function(Qt,ee){if(1&Qt&&e.Gf(g.Pl,7),2&Qt){let Mt;e.iGM(Mt=e.CRH())&&(ee._portalOutlet=Mt.first)}},features:[e.qOj]}),Wt})(),ft=(()=>{class Wt extends lt{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:Qt,totalTime:ee}){"enter"===Qt?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:ee})):"exit"===Qt&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:ee}))}_onAnimationStart({toState:Qt,totalTime:ee}){"enter"===Qt?this._animationStateChanged.next({state:"opening",totalTime:ee}):("exit"===Qt||"void"===Qt)&&this._animationStateChanged.next({state:"closing",totalTime:ee})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return Wt.\u0275fac=function(){let Ae;return function(ee){return(Ae||(Ae=e.n5z(Wt)))(ee||Wt)}}(),Wt.\u0275cmp=e.Xpm({type:Wt,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(Qt,ee){1&Qt&&e.WFA("@dialogContainer.start",function(Yt){return ee._onAnimationStart(Yt)})("@dialogContainer.done",function(Yt){return ee._onAnimationDone(Yt)}),2&Qt&&(e.Ikx("id",ee._id),e.uIk("role",ee._config.role)("aria-labelledby",ee._config.ariaLabel?null:ee._ariaLabelledBy)("aria-label",ee._config.ariaLabel)("aria-describedby",ee._config.ariaDescribedBy||null),e.d8E("@dialogContainer",ee._state))},features:[e.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(Qt,ee){1&Qt&&e.YNc(0,Bt,0,0,"ng-template",0)},directives:[g.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[It.dialogContainer]}}),Wt})(),ht=0;class Gt{constructor(Ae,Qt,ee="mat-dialog-"+ht++){this._overlayRef=Ae,this._containerInstance=Qt,this.id=ee,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new r.x,this._afterClosed=new r.x,this._beforeClosed=new r.x,this._state=0,Qt._id=ee,Qt._animationStateChanged.pipe((0,D.h)(Mt=>"opened"===Mt.state),(0,P.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),Qt._animationStateChanged.pipe((0,D.h)(Mt=>"closed"===Mt.state),(0,P.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),Ae.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),Ae.keydownEvents().pipe((0,D.h)(Mt=>Mt.keyCode===gt.hY&&!this.disableClose&&!(0,gt.Vb)(Mt))).subscribe(Mt=>{Mt.preventDefault(),ut(this,"keyboard")}),Ae.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():ut(this,"mouse")})}close(Ae){this._result=Ae,this._containerInstance._animationStateChanged.pipe((0,D.h)(Qt=>"closing"===Qt.state),(0,P.q)(1)).subscribe(Qt=>{this._beforeClosed.next(Ae),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),Qt.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(Ae){let Qt=this._getPositionStrategy();return Ae&&(Ae.left||Ae.right)?Ae.left?Qt.left(Ae.left):Qt.right(Ae.right):Qt.centerHorizontally(),Ae&&(Ae.top||Ae.bottom)?Ae.top?Qt.top(Ae.top):Qt.bottom(Ae.bottom):Qt.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(Ae="",Qt=""){return this._overlayRef.updateSize({width:Ae,height:Qt}),this._overlayRef.updatePosition(),this}addPanelClass(Ae){return this._overlayRef.addPanelClass(Ae),this}removePanelClass(Ae){return this._overlayRef.removePanelClass(Ae),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function ut(Wt,Ae,Qt){return void 0!==Wt._containerInstance&&(Wt._containerInstance._closeInteractionType=Ae),Wt.close(Qt)}const ot=new e.OlP("MatDialogData"),st=new e.OlP("mat-dialog-default-options"),Z=new e.OlP("mat-dialog-scroll-strategy"),At={provide:Z,deps:[y.aV],useFactory:function(Wt){return()=>Wt.scrollStrategies.block()}};let re=(()=>{class Wt{constructor(Qt,ee,Mt,Yt,ye,ui,Te,ce,te,Me){this._overlay=Qt,this._injector=ee,this._defaultOptions=Mt,this._parentDialog=Yt,this._overlayContainer=ye,this._dialogRefConstructor=Te,this._dialogContainerType=ce,this._dialogDataToken=te,this._animationMode=Me,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new r.x,this._afterOpenedAtThisLevel=new r.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=(0,s.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,G.O)(void 0))),this._scrollStrategy=ui}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const Qt=this._parentDialog;return Qt?Qt._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(Qt,ee){if(ee=function(Wt,Ae){return Object.assign(Object.assign({},Ae),Wt)}(ee,this._defaultOptions||new Kt),ee.id&&this.getDialogById(ee.id),this._dialogAnimatingOpen)return this._lastDialogRef;const Mt=this._createOverlay(ee),Yt=this._attachDialogContainer(Mt,ee);if("NoopAnimations"!==this._animationMode){const ui=Yt._animationStateChanged.subscribe(Te=>{"opening"===Te.state&&(this._dialogAnimatingOpen=!0),"opened"===Te.state&&(this._dialogAnimatingOpen=!1,ui.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new c.w0),this._animationStateSubscriptions.add(ui)}const ye=this._attachDialogContent(Qt,Yt,Mt,ee);return this._lastDialogRef=ye,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(ye),ye.afterClosed().subscribe(()=>this._removeOpenDialog(ye)),this.afterOpened.next(ye),Yt._initializeWithAttachedContent(),ye}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(Qt){return this.openDialogs.find(ee=>ee.id===Qt)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(Qt){const ee=this._getOverlayConfig(Qt);return this._overlay.create(ee)}_getOverlayConfig(Qt){const ee=new y.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:Qt.scrollStrategy||this._scrollStrategy(),panelClass:Qt.panelClass,hasBackdrop:Qt.hasBackdrop,direction:Qt.direction,minWidth:Qt.minWidth,minHeight:Qt.minHeight,maxWidth:Qt.maxWidth,maxHeight:Qt.maxHeight,disposeOnNavigation:Qt.closeOnNavigation});return Qt.backdropClass&&(ee.backdropClass=Qt.backdropClass),ee}_attachDialogContainer(Qt,ee){const Yt=e.zs3.create({parent:ee&&ee.viewContainerRef&&ee.viewContainerRef.injector||this._injector,providers:[{provide:Kt,useValue:ee}]}),ye=new g.C5(this._dialogContainerType,ee.viewContainerRef,Yt,ee.componentFactoryResolver);return Qt.attach(ye).instance}_attachDialogContent(Qt,ee,Mt,Yt){const ye=new this._dialogRefConstructor(Mt,ee,Yt.id);if(Qt instanceof e.Rgc)ee.attachTemplatePortal(new g.UE(Qt,null,{$implicit:Yt.data,dialogRef:ye}));else{const ui=this._createInjector(Yt,ye,ee),Te=ee.attachComponentPortal(new g.C5(Qt,Yt.viewContainerRef,ui));ye.componentInstance=Te.instance}return ye.updateSize(Yt.width,Yt.height).updatePosition(Yt.position),ye}_createInjector(Qt,ee,Mt){const Yt=Qt&&Qt.viewContainerRef&&Qt.viewContainerRef.injector,ye=[{provide:this._dialogContainerType,useValue:Mt},{provide:this._dialogDataToken,useValue:Qt.data},{provide:this._dialogRefConstructor,useValue:ee}];return Qt.direction&&(!Yt||!Yt.get(n.Is,null,e.XFs.Optional))&&ye.push({provide:n.Is,useValue:{value:Qt.direction,change:(0,v.of)()}}),e.zs3.create({parent:Yt||this._injector,providers:ye})}_removeOpenDialog(Qt){const ee=this.openDialogs.indexOf(Qt);ee>-1&&(this.openDialogs.splice(ee,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((Mt,Yt)=>{Mt?Yt.setAttribute("aria-hidden",Mt):Yt.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const Qt=this._overlayContainer.getContainerElement();if(Qt.parentElement){const ee=Qt.parentElement.children;for(let Mt=ee.length-1;Mt>-1;Mt--){let Yt=ee[Mt];Yt!==Qt&&"SCRIPT"!==Yt.nodeName&&"STYLE"!==Yt.nodeName&&!Yt.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(Yt,Yt.getAttribute("aria-hidden")),Yt.setAttribute("aria-hidden","true"))}}}_closeDialogs(Qt){let ee=Qt.length;for(;ee--;)Qt[ee].close()}}return Wt.\u0275fac=function(Qt){e.$Z()},Wt.\u0275dir=e.lG2({type:Wt}),Wt})(),ve=(()=>{class Wt extends re{constructor(Qt,ee,Mt,Yt,ye,ui,Te,ce){super(Qt,ee,Yt,ui,Te,ye,Gt,ft,ot,ce)}}return Wt.\u0275fac=function(Qt){return new(Qt||Wt)(e.LFG(y.aV),e.LFG(e.zs3),e.LFG(q.Ye,8),e.LFG(st,8),e.LFG(Z),e.LFG(Wt,12),e.LFG(y.Xj),e.LFG(wt.Qb,8))},Wt.\u0275prov=e.Yz7({token:Wt,factory:Wt.\u0275fac}),Wt})(),ci=(()=>{class Wt{}return Wt.\u0275fac=function(Qt){return new(Qt||Wt)},Wt.\u0275mod=e.oAB({type:Wt}),Wt.\u0275inj=e.cJS({providers:[ve,At],imports:[[y.U8,g.eL,t.BQ],t.BQ]}),Wt})()},4834:(H,W,f)=>{"use strict";f.d(W,{d:()=>t,t:()=>n});var y=f(5e3),g=f(63191),e=f(90508);let t=(()=>{class r{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(c){this._vertical=(0,g.Ig)(c)}get inset(){return this._inset}set inset(c){this._inset=(0,g.Ig)(c)}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275cmp=y.Xpm({type:r,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(c,v){2&c&&(y.uIk("aria-orientation",v.vertical?"vertical":"horizontal"),y.ekj("mat-divider-vertical",v.vertical)("mat-divider-horizontal",!v.vertical)("mat-divider-inset",v.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(c,v){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),r})(),n=(()=>{class r{}return r.\u0275fac=function(c){return new(c||r)},r.\u0275mod=y.oAB({type:r}),r.\u0275inj=y.cJS({imports:[[e.BQ],e.BQ]}),r})()},81125:(H,W,f)=>{"use strict";f.d(W,{pp:()=>Ae,To:()=>Qt,ib:()=>Re,u4:()=>ci,yz:()=>we,yK:()=>Wt});var y=f(5e3),g=f(63191),e=f(77579),t=f(50727),n=f(20449);let r=0;const s=new y.OlP("CdkAccordion");let c=(()=>{class ee{constructor(){this._stateChanges=new e.x,this._openCloseAllActions=new e.x,this.id="cdk-accordion-"+r++,this._multi=!1}get multi(){return this._multi}set multi(Yt){this._multi=(0,g.Ig)(Yt)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(Yt){this._stateChanges.next(Yt)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return ee.\u0275fac=function(Yt){return new(Yt||ee)},ee.\u0275dir=y.lG2({type:ee,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[y._Bn([{provide:s,useExisting:ee}]),y.TTD]}),ee})(),v=0,D=(()=>{class ee{constructor(Yt,ye,ui){this.accordion=Yt,this._changeDetectorRef=ye,this._expansionDispatcher=ui,this._openCloseAllSubscription=t.w0.EMPTY,this.closed=new y.vpe,this.opened=new y.vpe,this.destroyed=new y.vpe,this.expandedChange=new y.vpe,this.id="cdk-accordion-child-"+v++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=ui.listen((Te,ce)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===ce&&this.id!==Te&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(Yt){Yt=(0,g.Ig)(Yt),this._expanded!==Yt&&(this._expanded=Yt,this.expandedChange.emit(Yt),Yt?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(Yt){this._disabled=(0,g.Ig)(Yt)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(Yt=>{this.disabled||(this.expanded=Yt)})}}return ee.\u0275fac=function(Yt){return new(Yt||ee)(y.Y36(s,12),y.Y36(y.sBO),y.Y36(n.A8))},ee.\u0275dir=y.lG2({type:ee,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[y._Bn([{provide:s,useValue:void 0}])]}),ee})(),P=(()=>{class ee{}return ee.\u0275fac=function(Yt){return new(Yt||ee)},ee.\u0275mod=y.oAB({type:ee}),ee.\u0275inj=y.cJS({}),ee})();var G=f(99129),it=f(69808),q=f(90508),bt=f(15664),Ft=f(71884),gt=f(68675),wt=f(39300),Bt=f(95698),Kt=f(91159),It=f(76360),St=f(60515),lt=f(56451),ft=f(41777);const ht=["body"];function Gt(ee,Mt){}const ut=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],ot=["mat-expansion-panel-header","*","mat-action-row"];function st(ee,Mt){if(1&ee&&y._UZ(0,"span",2),2&ee){const Yt=y.oxw();y.Q6J("@indicatorRotate",Yt._getExpandedState())}}const Z=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Zt=["mat-panel-title","mat-panel-description","*"],vt=new y.OlP("MAT_ACCORDION"),At="225ms cubic-bezier(0.4,0.0,0.2,1)",re={indicatorRotate:(0,ft.X$)("indicatorRotate",[(0,ft.SB)("collapsed, void",(0,ft.oB)({transform:"rotate(0deg)"})),(0,ft.SB)("expanded",(0,ft.oB)({transform:"rotate(180deg)"})),(0,ft.eR)("expanded <=> collapsed, void => collapsed",(0,ft.jt)(At))]),bodyExpansion:(0,ft.X$)("bodyExpansion",[(0,ft.SB)("collapsed, void",(0,ft.oB)({height:"0px",visibility:"hidden"})),(0,ft.SB)("expanded",(0,ft.oB)({height:"*",visibility:"visible"})),(0,ft.eR)("expanded <=> collapsed, void => collapsed",(0,ft.jt)(At))])};let ve=(()=>{class ee{constructor(Yt){this._template=Yt}}return ee.\u0275fac=function(Yt){return new(Yt||ee)(y.Y36(y.Rgc))},ee.\u0275dir=y.lG2({type:ee,selectors:[["ng-template","matExpansionPanelContent",""]]}),ee})(),oe=0;const Ie=new y.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let Re=(()=>{class ee extends D{constructor(Yt,ye,ui,Te,ce,te,Me){super(Yt,ye,ui),this._viewContainerRef=Te,this._animationMode=te,this._hideToggle=!1,this.afterExpand=new y.vpe,this.afterCollapse=new y.vpe,this._inputChanges=new e.x,this._headerId="mat-expansion-panel-header-"+oe++,this._bodyAnimationDone=new e.x,this.accordion=Yt,this._document=ce,this._bodyAnimationDone.pipe((0,Ft.x)((ue,_e)=>ue.fromState===_e.fromState&&ue.toState===_e.toState)).subscribe(ue=>{"void"!==ue.fromState&&("expanded"===ue.toState?this.afterExpand.emit():"collapsed"===ue.toState&&this.afterCollapse.emit())}),Me&&(this.hideToggle=Me.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(Yt){this._hideToggle=(0,g.Ig)(Yt)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(Yt){this._togglePosition=Yt}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe((0,gt.O)(null),(0,wt.h)(()=>this.expanded&&!this._portal),(0,Bt.q)(1)).subscribe(()=>{this._portal=new G.UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(Yt){this._inputChanges.next(Yt)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const Yt=this._document.activeElement,ye=this._body.nativeElement;return Yt===ye||ye.contains(Yt)}return!1}}return ee.\u0275fac=function(Yt){return new(Yt||ee)(y.Y36(vt,12),y.Y36(y.sBO),y.Y36(n.A8),y.Y36(y.s_b),y.Y36(it.K0),y.Y36(It.Qb,8),y.Y36(Ie,8))},ee.\u0275cmp=y.Xpm({type:ee,selectors:[["mat-expansion-panel"]],contentQueries:function(Yt,ye,ui){if(1&Yt&&y.Suo(ui,ve,5),2&Yt){let Te;y.iGM(Te=y.CRH())&&(ye._lazyContent=Te.first)}},viewQuery:function(Yt,ye){if(1&Yt&&y.Gf(ht,5),2&Yt){let ui;y.iGM(ui=y.CRH())&&(ye._body=ui.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(Yt,ye){2&Yt&&y.ekj("mat-expanded",ye.expanded)("_mat-animation-noopable","NoopAnimations"===ye._animationMode)("mat-expansion-panel-spacing",ye._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[y._Bn([{provide:vt,useValue:void 0}]),y.qOj,y.TTD],ngContentSelectors:ot,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(Yt,ye){1&Yt&&(y.F$t(ut),y.Hsn(0),y.TgZ(1,"div",0,1),y.NdJ("@bodyExpansion.done",function(Te){return ye._bodyAnimationDone.next(Te)}),y.TgZ(3,"div",2),y.Hsn(4,1),y.YNc(5,Gt,0,0,"ng-template",3),y.qZA(),y.Hsn(6,2),y.qZA()),2&Yt&&(y.xp6(1),y.Q6J("@bodyExpansion",ye._getExpandedState())("id",ye.id),y.uIk("aria-labelledby",ye._headerId),y.xp6(4),y.Q6J("cdkPortalOutlet",ye._portal))},directives:[G.Pl],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[re.bodyExpansion]},changeDetection:0}),ee})();class Si{}const Ze=(0,q.sb)(Si);let we=(()=>{class ee extends Ze{constructor(Yt,ye,ui,Te,ce,te,Me){super(),this.panel=Yt,this._element=ye,this._focusMonitor=ui,this._changeDetectorRef=Te,this._animationMode=te,this._parentChangeSubscription=t.w0.EMPTY;const ue=Yt.accordion?Yt.accordion._stateChanges.pipe((0,wt.h)(_e=>!(!_e.hideToggle&&!_e.togglePosition))):St.E;this.tabIndex=parseInt(Me||"")||0,this._parentChangeSubscription=(0,lt.T)(Yt.opened,Yt.closed,ue,Yt._inputChanges.pipe((0,wt.h)(_e=>!!(_e.hideToggle||_e.disabled||_e.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),Yt.closed.pipe((0,wt.h)(()=>Yt._containsFocus())).subscribe(()=>ui.focusVia(ye,"program")),ce&&(this.expandedHeight=ce.expandedHeight,this.collapsedHeight=ce.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const Yt=this._isExpanded();return Yt&&this.expandedHeight?this.expandedHeight:!Yt&&this.collapsedHeight?this.collapsedHeight:null}_keydown(Yt){switch(Yt.keyCode){case Kt.L_:case Kt.K5:(0,Kt.Vb)(Yt)||(Yt.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(Yt))}}focus(Yt,ye){Yt?this._focusMonitor.focusVia(this._element,Yt,ye):this._element.nativeElement.focus(ye)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(Yt=>{Yt&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return ee.\u0275fac=function(Yt){return new(Yt||ee)(y.Y36(Re,1),y.Y36(y.SBq),y.Y36(bt.tE),y.Y36(y.sBO),y.Y36(Ie,8),y.Y36(It.Qb,8),y.$8M("tabindex"))},ee.\u0275cmp=y.Xpm({type:ee,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(Yt,ye){1&Yt&&y.NdJ("click",function(){return ye._toggle()})("keydown",function(Te){return ye._keydown(Te)}),2&Yt&&(y.uIk("id",ye.panel._headerId)("tabindex",ye.tabIndex)("aria-controls",ye._getPanelId())("aria-expanded",ye._isExpanded())("aria-disabled",ye.panel.disabled),y.Udp("height",ye._getHeaderHeight()),y.ekj("mat-expanded",ye._isExpanded())("mat-expansion-toggle-indicator-after","after"===ye._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===ye._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===ye._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[y.qOj],ngContentSelectors:Zt,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(Yt,ye){1&Yt&&(y.F$t(Z),y.TgZ(0,"span",0),y.Hsn(1),y.Hsn(2,1),y.Hsn(3,2),y.qZA(),y.YNc(4,st,1,1,"span",1)),2&Yt&&(y.xp6(4),y.Q6J("ngIf",ye._showToggle()))},directives:[it.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[re.indicatorRotate]},changeDetection:0}),ee})(),ci=(()=>{class ee{}return ee.\u0275fac=function(Yt){return new(Yt||ee)},ee.\u0275dir=y.lG2({type:ee,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),ee})(),Wt=(()=>{class ee{}return ee.\u0275fac=function(Yt){return new(Yt||ee)},ee.\u0275dir=y.lG2({type:ee,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),ee})(),Ae=(()=>{class ee extends c{constructor(){super(...arguments),this._ownHeaders=new y.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(Yt){this._hideToggle=(0,g.Ig)(Yt)}ngAfterContentInit(){this._headers.changes.pipe((0,gt.O)(this._headers)).subscribe(Yt=>{this._ownHeaders.reset(Yt.filter(ye=>ye.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new bt.Em(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(Yt){this._keyManager.onKeydown(Yt)}_handleHeaderFocus(Yt){this._keyManager.updateActiveItem(Yt)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return ee.\u0275fac=function(){let Mt;return function(ye){return(Mt||(Mt=y.n5z(ee)))(ye||ee)}}(),ee.\u0275dir=y.lG2({type:ee,selectors:[["mat-accordion"]],contentQueries:function(Yt,ye,ui){if(1&Yt&&y.Suo(ui,we,5),2&Yt){let Te;y.iGM(Te=y.CRH())&&(ye._headers=Te)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(Yt,ye){2&Yt&&y.ekj("mat-accordion-multi",ye.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[y._Bn([{provide:vt,useExisting:ee}]),y.qOj]}),ee})(),Qt=(()=>{class ee{}return ee.\u0275fac=function(Yt){return new(Yt||ee)},ee.\u0275mod=y.oAB({type:ee}),ee.\u0275inj=y.cJS({imports:[[it.ez,q.BQ,P,G.eL]]}),ee})()},67322:(H,W,f)=>{"use strict";f.d(W,{G_:()=>te,KE:()=>Me,Eo:()=>oe,lN:()=>ue,hX:()=>ci});var y=f(17144),g=f(69808),e=f(5e3),t=f(90508),n=f(63191),r=f(77579),s=f(56451),c=f(54968),v=f(68675),D=f(82722),P=f(95698),G=f(41777),it=f(76360),q=f(50226),bt=f(70925);const Ft=["connectionContainer"],gt=["inputContainer"],wt=["label"];function Bt(_e,be){1&_e&&(e.ynx(0),e.TgZ(1,"div",14),e._UZ(2,"div",15),e._UZ(3,"div",16),e._UZ(4,"div",17),e.qZA(),e.TgZ(5,"div",18),e._UZ(6,"div",15),e._UZ(7,"div",16),e._UZ(8,"div",17),e.qZA(),e.BQk())}function Kt(_e,be){if(1&_e){const Dt=e.EpF();e.TgZ(0,"div",19),e.NdJ("cdkObserveContent",function(){return e.CHM(Dt),e.oxw().updateOutlineGap()}),e.Hsn(1,1),e.qZA()}if(2&_e){const Dt=e.oxw();e.Q6J("cdkObserveContentDisabled","outline"!=Dt.appearance)}}function It(_e,be){if(1&_e&&(e.ynx(0),e.Hsn(1,2),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.BQk()),2&_e){const Dt=e.oxw(2);e.xp6(3),e.Oqu(Dt._control.placeholder)}}function St(_e,be){1&_e&&e.Hsn(0,3,["*ngSwitchCase","true"])}function lt(_e,be){1&_e&&(e.TgZ(0,"span",23),e._uU(1," *"),e.qZA())}function ft(_e,be){if(1&_e){const Dt=e.EpF();e.TgZ(0,"label",20,21),e.NdJ("cdkObserveContent",function(){return e.CHM(Dt),e.oxw().updateOutlineGap()}),e.YNc(2,It,4,1,"ng-container",12),e.YNc(3,St,1,0,"ng-content",12),e.YNc(4,lt,2,0,"span",22),e.qZA()}if(2&_e){const Dt=e.oxw();e.ekj("mat-empty",Dt._control.empty&&!Dt._shouldAlwaysFloat())("mat-form-field-empty",Dt._control.empty&&!Dt._shouldAlwaysFloat())("mat-accent","accent"==Dt.color)("mat-warn","warn"==Dt.color),e.Q6J("cdkObserveContentDisabled","outline"!=Dt.appearance)("id",Dt._labelId)("ngSwitch",Dt._hasLabel()),e.uIk("for",Dt._control.id)("aria-owns",Dt._control.id),e.xp6(2),e.Q6J("ngSwitchCase",!1),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(1),e.Q6J("ngIf",!Dt.hideRequiredMarker&&Dt._control.required&&!Dt._control.disabled)}}function ht(_e,be){1&_e&&(e.TgZ(0,"div",24),e.Hsn(1,4),e.qZA())}function Gt(_e,be){if(1&_e&&(e.TgZ(0,"div",25),e._UZ(1,"span",26),e.qZA()),2&_e){const Dt=e.oxw();e.xp6(1),e.ekj("mat-accent","accent"==Dt.color)("mat-warn","warn"==Dt.color)}}function ut(_e,be){if(1&_e&&(e.TgZ(0,"div"),e.Hsn(1,5),e.qZA()),2&_e){const Dt=e.oxw();e.Q6J("@transitionMessages",Dt._subscriptAnimationState)}}function ot(_e,be){if(1&_e&&(e.TgZ(0,"div",30),e._uU(1),e.qZA()),2&_e){const Dt=e.oxw(2);e.Q6J("id",Dt._hintLabelId),e.xp6(1),e.Oqu(Dt.hintLabel)}}function st(_e,be){if(1&_e&&(e.TgZ(0,"div",27),e.YNc(1,ot,2,2,"div",28),e.Hsn(2,6),e._UZ(3,"div",29),e.Hsn(4,7),e.qZA()),2&_e){const Dt=e.oxw();e.Q6J("@transitionMessages",Dt._subscriptAnimationState),e.xp6(1),e.Q6J("ngIf",Dt.hintLabel)}}const Z=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Zt=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],At=new e.OlP("MatError"),ve={transitionMessages:(0,G.X$)("transitionMessages",[(0,G.SB)("enter",(0,G.oB)({opacity:1,transform:"translateY(0%)"})),(0,G.eR)("void => enter",[(0,G.oB)({opacity:0,transform:"translateY(-5px)"}),(0,G.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let oe=(()=>{class _e{}return _e.\u0275fac=function(Dt){return new(Dt||_e)},_e.\u0275dir=e.lG2({type:_e}),_e})();const Ze=new e.OlP("MatHint");let ci=(()=>{class _e{}return _e.\u0275fac=function(Dt){return new(Dt||_e)},_e.\u0275dir=e.lG2({type:_e,selectors:[["mat-label"]]}),_e})(),Wt=(()=>{class _e{}return _e.\u0275fac=function(Dt){return new(Dt||_e)},_e.\u0275dir=e.lG2({type:_e,selectors:[["mat-placeholder"]]}),_e})();const Ae=new e.OlP("MatPrefix"),ee=new e.OlP("MatSuffix");let Yt=0;const Te=(0,t.pj)(class{constructor(_e){this._elementRef=_e}},"primary"),ce=new e.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),te=new e.OlP("MatFormField");let Me=(()=>{class _e extends Te{constructor(Dt,zt,Ge,Xe,Ri,bi,mi){super(Dt),this._changeDetectorRef=zt,this._dir=Ge,this._defaults=Xe,this._platform=Ri,this._ngZone=bi,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new r.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Yt++,this._labelId="mat-form-field-label-"+Yt++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==mi,this.appearance=Xe&&Xe.appearance?Xe.appearance:"legacy",this._hideRequiredMarker=!(!Xe||null==Xe.hideRequiredMarker)&&Xe.hideRequiredMarker}get appearance(){return this._appearance}set appearance(Dt){const zt=this._appearance;this._appearance=Dt||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&zt!==Dt&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(Dt){this._hideRequiredMarker=(0,n.Ig)(Dt)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(Dt){this._hintLabel=Dt,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(Dt){Dt!==this._floatLabel&&(this._floatLabel=Dt||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(Dt){this._explicitFormFieldControl=Dt}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const Dt=this._control;Dt.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${Dt.controlType}`),Dt.stateChanges.pipe((0,v.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),Dt.ngControl&&Dt.ngControl.valueChanges&&Dt.ngControl.valueChanges.pipe((0,D.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,D.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,s.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,v.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,v.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,D.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(Dt){const zt=this._control?this._control.ngControl:null;return zt&&zt[Dt]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,c.R)(this._label.nativeElement,"transitionend").pipe((0,P.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let Dt=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&Dt.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const zt=this._hintChildren?this._hintChildren.find(Xe=>"start"===Xe.align):null,Ge=this._hintChildren?this._hintChildren.find(Xe=>"end"===Xe.align):null;zt?Dt.push(zt.id):this._hintLabel&&Dt.push(this._hintLabelId),Ge&&Dt.push(Ge.id)}else this._errorChildren&&Dt.push(...this._errorChildren.map(zt=>zt.id));this._control.setDescribedByIds(Dt)}}_validateControlChild(){}updateOutlineGap(){const Dt=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&Dt&&Dt.children.length&&Dt.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let zt=0,Ge=0;const Xe=this._connectionContainerRef.nativeElement,Ri=Xe.querySelectorAll(".mat-form-field-outline-start"),bi=Xe.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const mi=Xe.getBoundingClientRect();if(0===mi.width&&0===mi.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const on=this._getStartEnd(mi),li=Dt.children,Bi=this._getStartEnd(li[0].getBoundingClientRect());let Ii=0;for(let ni=0;ni<li.length;ni++)Ii+=li[ni].offsetWidth;zt=Math.abs(Bi-on)-5,Ge=Ii>0?.75*Ii+10:0}for(let mi=0;mi<Ri.length;mi++)Ri[mi].style.width=`${zt}px`;for(let mi=0;mi<bi.length;mi++)bi[mi].style.width=`${Ge}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(Dt){return this._dir&&"rtl"===this._dir.value?Dt.right:Dt.left}_isAttachedToDOM(){const Dt=this._elementRef.nativeElement;if(Dt.getRootNode){const zt=Dt.getRootNode();return zt&&zt!==Dt}return document.documentElement.contains(Dt)}}return _e.\u0275fac=function(Dt){return new(Dt||_e)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(q.Is,8),e.Y36(ce,8),e.Y36(bt.t4),e.Y36(e.R0b),e.Y36(it.Qb,8))},_e.\u0275cmp=e.Xpm({type:_e,selectors:[["mat-form-field"]],contentQueries:function(Dt,zt,Ge){if(1&Dt&&(e.Suo(Ge,oe,5),e.Suo(Ge,oe,7),e.Suo(Ge,ci,5),e.Suo(Ge,ci,7),e.Suo(Ge,Wt,5),e.Suo(Ge,At,5),e.Suo(Ge,Ze,5),e.Suo(Ge,Ae,5),e.Suo(Ge,ee,5)),2&Dt){let Xe;e.iGM(Xe=e.CRH())&&(zt._controlNonStatic=Xe.first),e.iGM(Xe=e.CRH())&&(zt._controlStatic=Xe.first),e.iGM(Xe=e.CRH())&&(zt._labelChildNonStatic=Xe.first),e.iGM(Xe=e.CRH())&&(zt._labelChildStatic=Xe.first),e.iGM(Xe=e.CRH())&&(zt._placeholderChild=Xe.first),e.iGM(Xe=e.CRH())&&(zt._errorChildren=Xe),e.iGM(Xe=e.CRH())&&(zt._hintChildren=Xe),e.iGM(Xe=e.CRH())&&(zt._prefixChildren=Xe),e.iGM(Xe=e.CRH())&&(zt._suffixChildren=Xe)}},viewQuery:function(Dt,zt){if(1&Dt&&(e.Gf(Ft,7),e.Gf(gt,5),e.Gf(wt,5)),2&Dt){let Ge;e.iGM(Ge=e.CRH())&&(zt._connectionContainerRef=Ge.first),e.iGM(Ge=e.CRH())&&(zt._inputContainerRef=Ge.first),e.iGM(Ge=e.CRH())&&(zt._label=Ge.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(Dt,zt){2&Dt&&e.ekj("mat-form-field-appearance-standard","standard"==zt.appearance)("mat-form-field-appearance-fill","fill"==zt.appearance)("mat-form-field-appearance-outline","outline"==zt.appearance)("mat-form-field-appearance-legacy","legacy"==zt.appearance)("mat-form-field-invalid",zt._control.errorState)("mat-form-field-can-float",zt._canLabelFloat())("mat-form-field-should-float",zt._shouldLabelFloat())("mat-form-field-has-label",zt._hasFloatingLabel())("mat-form-field-hide-placeholder",zt._hideControlPlaceholder())("mat-form-field-disabled",zt._control.disabled)("mat-form-field-autofilled",zt._control.autofilled)("mat-focused",zt._control.focused)("ng-untouched",zt._shouldForward("untouched"))("ng-touched",zt._shouldForward("touched"))("ng-pristine",zt._shouldForward("pristine"))("ng-dirty",zt._shouldForward("dirty"))("ng-valid",zt._shouldForward("valid"))("ng-invalid",zt._shouldForward("invalid"))("ng-pending",zt._shouldForward("pending"))("_mat-animation-noopable",!zt._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[e._Bn([{provide:te,useExisting:_e}]),e.qOj],ngContentSelectors:Zt,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(Dt,zt){1&Dt&&(e.F$t(Z),e.TgZ(0,"div",0),e.TgZ(1,"div",1,2),e.NdJ("click",function(Xe){return zt._control.onContainerClick&&zt._control.onContainerClick(Xe)}),e.YNc(3,Bt,9,0,"ng-container",3),e.YNc(4,Kt,2,1,"div",4),e.TgZ(5,"div",5,6),e.Hsn(7),e.TgZ(8,"span",7),e.YNc(9,ft,5,16,"label",8),e.qZA(),e.qZA(),e.YNc(10,ht,2,0,"div",9),e.qZA(),e.YNc(11,Gt,2,4,"div",10),e.TgZ(12,"div",11),e.YNc(13,ut,2,1,"div",12),e.YNc(14,st,5,2,"div",13),e.qZA(),e.qZA()),2&Dt&&(e.xp6(3),e.Q6J("ngIf","outline"==zt.appearance),e.xp6(1),e.Q6J("ngIf",zt._prefixChildren.length),e.xp6(5),e.Q6J("ngIf",zt._hasFloatingLabel()),e.xp6(1),e.Q6J("ngIf",zt._suffixChildren.length),e.xp6(1),e.Q6J("ngIf","outline"!=zt.appearance),e.xp6(1),e.Q6J("ngSwitch",zt._getDisplayedMessages()),e.xp6(1),e.Q6J("ngSwitchCase","error"),e.xp6(1),e.Q6J("ngSwitchCase","hint"))},directives:[g.O5,g.RF,g.n9,y.wD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[ve.transitionMessages]},changeDetection:0}),_e})(),ue=(()=>{class _e{}return _e.\u0275fac=function(Dt){return new(Dt||_e)},_e.\u0275mod=e.oAB({type:_e}),_e.\u0275inj=e.cJS({imports:[[g.ez,t.BQ,y.Q8],t.BQ]}),_e})()},43954:(H,W,f)=>{"use strict";f.d(W,{Il:()=>ht,N6:()=>Gt,DX:()=>G,jo:()=>bt,$H:()=>it});var y=f(5e3),g=f(90508),e=f(63191),t=f(50226);const n=["*"],r=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],s=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"];class v{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const st=Math.max(...this.tracker);return st>1?this.rowCount+st-1:this.rowCount}update(st,Z){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(st),this.tracker.fill(0,0,this.tracker.length),this.positions=Z.map(Zt=>this._trackTile(Zt))}_trackTile(st){const Z=this._findMatchingGap(st.colspan);return this._markTilePosition(Z,st),this.columnIndex=Z+st.colspan,new D(this.rowIndex,Z)}_findMatchingGap(st){let Z=-1,Zt=-1;do{this.columnIndex+st>this.tracker.length?(this._nextRow(),Z=this.tracker.indexOf(0,this.columnIndex),Zt=this._findGapEndIndex(Z)):(Z=this.tracker.indexOf(0,this.columnIndex),-1!=Z?(Zt=this._findGapEndIndex(Z),this.columnIndex=Z+1):(this._nextRow(),Z=this.tracker.indexOf(0,this.columnIndex),Zt=this._findGapEndIndex(Z)))}while(Zt-Z<st||0==Zt);return Math.max(Z,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let st=0;st<this.tracker.length;st++)this.tracker[st]=Math.max(0,this.tracker[st]-1)}_findGapEndIndex(st){for(let Z=st+1;Z<this.tracker.length;Z++)if(0!=this.tracker[Z])return Z;return this.tracker.length}_markTilePosition(st,Z){for(let Zt=0;Zt<Z.colspan;Zt++)this.tracker[st+Zt]=Z.rowspan}}class D{constructor(st,Z){this.row=st,this.col=Z}}const P=new y.OlP("MAT_GRID_LIST");let G=(()=>{class ot{constructor(Z,Zt){this._element=Z,this._gridList=Zt,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(Z){this._rowspan=Math.round((0,e.su)(Z))}get colspan(){return this._colspan}set colspan(Z){this._colspan=Math.round((0,e.su)(Z))}_setStyle(Z,Zt){this._element.nativeElement.style[Z]=Zt}}return ot.\u0275fac=function(Z){return new(Z||ot)(y.Y36(y.SBq),y.Y36(P,8))},ot.\u0275cmp=y.Xpm({type:ot,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(Z,Zt){2&Z&&y.uIk("rowspan",Zt.rowspan)("colspan",Zt.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(Z,Zt){1&Z&&(y.F$t(),y.TgZ(0,"div",0),y.Hsn(1),y.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),ot})(),it=(()=>{class ot{constructor(Z){this._element=Z}ngAfterContentInit(){(0,g.E0)(this._lines,this._element)}}return ot.\u0275fac=function(Z){return new(Z||ot)(y.Y36(y.SBq))},ot.\u0275cmp=y.Xpm({type:ot,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(Z,Zt,vt){if(1&Z&&y.Suo(vt,g.X2,5),2&Z){let At;y.iGM(At=y.CRH())&&(Zt._lines=At)}},ngContentSelectors:s,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(Z,Zt){1&Z&&(y.F$t(r),y.Hsn(0),y.TgZ(1,"div",0),y.Hsn(2,1),y.qZA(),y.Hsn(3,2))},encapsulation:2,changeDetection:0}),ot})(),bt=(()=>{class ot{}return ot.\u0275fac=function(Z){return new(Z||ot)},ot.\u0275dir=y.lG2({type:ot,selectors:[["mat-grid-tile-header"]],hostAttrs:[1,"mat-grid-tile-header"]}),ot})();const gt=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class wt{constructor(){this._rows=0,this._rowspan=0}init(st,Z,Zt,vt){this._gutterSize=lt(st),this._rows=Z.rowCount,this._rowspan=Z.rowspan,this._cols=Zt,this._direction=vt}getBaseTileSize(st,Z){return`(${st}% - (${this._gutterSize} * ${Z}))`}getTilePosition(st,Z){return 0===Z?"0":St(`(${st} + ${this._gutterSize}) * ${Z}`)}getTileSize(st,Z){return`(${st} * ${Z}) + (${Z-1} * ${this._gutterSize})`}setStyle(st,Z,Zt){let vt=100/this._cols,At=(this._cols-1)/this._cols;this.setColStyles(st,Zt,vt,At),this.setRowStyles(st,Z,vt,At)}setColStyles(st,Z,Zt,vt){let At=this.getBaseTileSize(Zt,vt);st._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(At,Z)),st._setStyle("width",St(this.getTileSize(At,st.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(st){return`${this._rowspan} * ${this.getTileSize(st,1)}`}getComputedHeight(){return null}}class Bt extends wt{constructor(st){super(),this.fixedRowHeight=st}init(st,Z,Zt,vt){super.init(st,Z,Zt,vt),this.fixedRowHeight=lt(this.fixedRowHeight),gt.test(this.fixedRowHeight)}setRowStyles(st,Z){st._setStyle("top",this.getTilePosition(this.fixedRowHeight,Z)),st._setStyle("height",St(this.getTileSize(this.fixedRowHeight,st.rowspan)))}getComputedHeight(){return["height",St(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(st){st._setListStyle(["height",null]),st._tiles&&st._tiles.forEach(Z=>{Z._setStyle("top",null),Z._setStyle("height",null)})}}class Kt extends wt{constructor(st){super(),this._parseRatio(st)}setRowStyles(st,Z,Zt,vt){this.baseTileHeight=this.getBaseTileSize(Zt/this.rowHeightRatio,vt),st._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,Z)),st._setStyle("paddingTop",St(this.getTileSize(this.baseTileHeight,st.rowspan)))}getComputedHeight(){return["paddingBottom",St(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(st){st._setListStyle(["paddingBottom",null]),st._tiles.forEach(Z=>{Z._setStyle("marginTop",null),Z._setStyle("paddingTop",null)})}_parseRatio(st){const Z=st.split(":");this.rowHeightRatio=parseFloat(Z[0])/parseFloat(Z[1])}}class It extends wt{setRowStyles(st,Z){let At=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);st._setStyle("top",this.getTilePosition(At,Z)),st._setStyle("height",St(this.getTileSize(At,st.rowspan)))}reset(st){st._tiles&&st._tiles.forEach(Z=>{Z._setStyle("top",null),Z._setStyle("height",null)})}}function St(ot){return`calc(${ot})`}function lt(ot){return ot.match(/([A-Za-z%]+)$/)?ot:`${ot}px`}let ht=(()=>{class ot{constructor(Z,Zt){this._element=Z,this._dir=Zt,this._gutter="1px"}get cols(){return this._cols}set cols(Z){this._cols=Math.max(1,Math.round((0,e.su)(Z)))}get gutterSize(){return this._gutter}set gutterSize(Z){this._gutter=`${null==Z?"":Z}`}get rowHeight(){return this._rowHeight}set rowHeight(Z){const Zt=`${null==Z?"":Z}`;Zt!==this._rowHeight&&(this._rowHeight=Zt,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(Z){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===Z?new It:Z&&Z.indexOf(":")>-1?new Kt(Z):new Bt(Z)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new v);const Z=this._tileCoordinator,Zt=this._tiles.filter(At=>!At._gridList||At._gridList===this),vt=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,Zt),this._tileStyler.init(this.gutterSize,Z,this.cols,vt),Zt.forEach((At,re)=>{const ve=Z.positions[re];this._tileStyler.setStyle(At,ve.row,ve.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(Z){Z&&(this._element.nativeElement.style[Z[0]]=Z[1])}}return ot.\u0275fac=function(Z){return new(Z||ot)(y.Y36(y.SBq),y.Y36(t.Is,8))},ot.\u0275cmp=y.Xpm({type:ot,selectors:[["mat-grid-list"]],contentQueries:function(Z,Zt,vt){if(1&Z&&y.Suo(vt,G,5),2&Z){let At;y.iGM(At=y.CRH())&&(Zt._tiles=At)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(Z,Zt){2&Z&&y.uIk("cols",Zt.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[y._Bn([{provide:P,useExisting:ot}])],ngContentSelectors:n,decls:2,vars:0,template:function(Z,Zt){1&Z&&(y.F$t(),y.TgZ(0,"div"),y.Hsn(1),y.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),ot})(),Gt=(()=>{class ot{}return ot.\u0275fac=function(Z){return new(Z||ot)},ot.\u0275mod=y.oAB({type:ot}),ot.\u0275inj=y.cJS({imports:[[g.uc,g.BQ],g.uc,g.BQ]}),ot})()},63874:(H,W,f)=>{"use strict";f.d(W,{Hw:()=>Si,Ps:()=>Ze});var y=f(5e3),g=f(90508),e=f(63191),t=f(69808),n=f(79307),r=f(30576),c=f(39646),v=f(4128),D=f(50727),P=f(18505),G=f(54004),it=f(70262),q=f(28746),bt=f(13099),Ft=f(95698),gt=f(40520),wt=f(22313);const Bt=["*"];let Kt;function St(we){var ci;return(null===(ci=function(){if(void 0===Kt&&(Kt=null,"undefined"!=typeof window)){const we=window;void 0!==we.trustedTypes&&(Kt=we.trustedTypes.createPolicy("angular#components",{createHTML:ci=>ci}))}return Kt}())||void 0===ci?void 0:ci.createHTML(we))||we}function lt(we){return Error(`Unable to find icon with the name "${we}"`)}function ht(we){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${we}".`)}function Gt(we){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${we}".`)}class ut{constructor(ci,Wt,Ae){this.url=ci,this.svgText=Wt,this.options=Ae}}let ot=(()=>{class we{constructor(Wt,Ae,Qt,ee){this._httpClient=Wt,this._sanitizer=Ae,this._errorHandler=ee,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=Qt}addSvgIcon(Wt,Ae,Qt){return this.addSvgIconInNamespace("",Wt,Ae,Qt)}addSvgIconLiteral(Wt,Ae,Qt){return this.addSvgIconLiteralInNamespace("",Wt,Ae,Qt)}addSvgIconInNamespace(Wt,Ae,Qt,ee){return this._addSvgIconConfig(Wt,Ae,new ut(Qt,null,ee))}addSvgIconResolver(Wt){return this._resolvers.push(Wt),this}addSvgIconLiteralInNamespace(Wt,Ae,Qt,ee){const Mt=this._sanitizer.sanitize(y.q3G.HTML,Qt);if(!Mt)throw Gt(Qt);const Yt=St(Mt);return this._addSvgIconConfig(Wt,Ae,new ut("",Yt,ee))}addSvgIconSet(Wt,Ae){return this.addSvgIconSetInNamespace("",Wt,Ae)}addSvgIconSetLiteral(Wt,Ae){return this.addSvgIconSetLiteralInNamespace("",Wt,Ae)}addSvgIconSetInNamespace(Wt,Ae,Qt){return this._addSvgIconSetConfig(Wt,new ut(Ae,null,Qt))}addSvgIconSetLiteralInNamespace(Wt,Ae,Qt){const ee=this._sanitizer.sanitize(y.q3G.HTML,Ae);if(!ee)throw Gt(Ae);const Mt=St(ee);return this._addSvgIconSetConfig(Wt,new ut("",Mt,Qt))}registerFontClassAlias(Wt,Ae=Wt){return this._fontCssClassesByAlias.set(Wt,Ae),this}classNameForFontAlias(Wt){return this._fontCssClassesByAlias.get(Wt)||Wt}setDefaultFontSetClass(Wt){return this._defaultFontSetClass=Wt,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(Wt){const Ae=this._sanitizer.sanitize(y.q3G.RESOURCE_URL,Wt);if(!Ae)throw ht(Wt);const Qt=this._cachedIconsByUrl.get(Ae);return Qt?(0,c.of)(Zt(Qt)):this._loadSvgIconFromConfig(new ut(Wt,null)).pipe((0,P.b)(ee=>this._cachedIconsByUrl.set(Ae,ee)),(0,G.U)(ee=>Zt(ee)))}getNamedSvgIcon(Wt,Ae=""){const Qt=vt(Ae,Wt);let ee=this._svgIconConfigs.get(Qt);if(ee)return this._getSvgFromConfig(ee);if(ee=this._getIconConfigFromResolvers(Ae,Wt),ee)return this._svgIconConfigs.set(Qt,ee),this._getSvgFromConfig(ee);const Mt=this._iconSetConfigs.get(Ae);return Mt?this._getSvgFromIconSetConfigs(Wt,Mt):function(we,ci){const Wt=(0,r.m)(we)?we:()=>we,Ae=Qt=>Qt.error(Wt());return new n.y(Ae)}(lt(Qt))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(Wt){return Wt.svgText?(0,c.of)(Zt(this._svgElementFromConfig(Wt))):this._loadSvgIconFromConfig(Wt).pipe((0,G.U)(Ae=>Zt(Ae)))}_getSvgFromIconSetConfigs(Wt,Ae){const Qt=this._extractIconWithNameFromAnySet(Wt,Ae);if(Qt)return(0,c.of)(Qt);const ee=Ae.filter(Mt=>!Mt.svgText).map(Mt=>this._loadSvgIconSetFromConfig(Mt).pipe((0,it.K)(Yt=>{const ui=`Loading icon set URL: ${this._sanitizer.sanitize(y.q3G.RESOURCE_URL,Mt.url)} failed: ${Yt.message}`;return this._errorHandler.handleError(new Error(ui)),(0,c.of)(null)})));return(0,v.D)(ee).pipe((0,G.U)(()=>{const Mt=this._extractIconWithNameFromAnySet(Wt,Ae);if(!Mt)throw lt(Wt);return Mt}))}_extractIconWithNameFromAnySet(Wt,Ae){for(let Qt=Ae.length-1;Qt>=0;Qt--){const ee=Ae[Qt];if(ee.svgText&&ee.svgText.toString().indexOf(Wt)>-1){const Mt=this._svgElementFromConfig(ee),Yt=this._extractSvgIconFromSet(Mt,Wt,ee.options);if(Yt)return Yt}}return null}_loadSvgIconFromConfig(Wt){return this._fetchIcon(Wt).pipe((0,P.b)(Ae=>Wt.svgText=Ae),(0,G.U)(()=>this._svgElementFromConfig(Wt)))}_loadSvgIconSetFromConfig(Wt){return Wt.svgText?(0,c.of)(null):this._fetchIcon(Wt).pipe((0,P.b)(Ae=>Wt.svgText=Ae))}_extractSvgIconFromSet(Wt,Ae,Qt){const ee=Wt.querySelector(`[id="${Ae}"]`);if(!ee)return null;const Mt=ee.cloneNode(!0);if(Mt.removeAttribute("id"),"svg"===Mt.nodeName.toLowerCase())return this._setSvgAttributes(Mt,Qt);if("symbol"===Mt.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(Mt),Qt);const Yt=this._svgElementFromString(St("<svg></svg>"));return Yt.appendChild(Mt),this._setSvgAttributes(Yt,Qt)}_svgElementFromString(Wt){const Ae=this._document.createElement("DIV");Ae.innerHTML=Wt;const Qt=Ae.querySelector("svg");if(!Qt)throw Error("<svg> tag not found");return Qt}_toSvgElement(Wt){const Ae=this._svgElementFromString(St("<svg></svg>")),Qt=Wt.attributes;for(let ee=0;ee<Qt.length;ee++){const{name:Mt,value:Yt}=Qt[ee];"id"!==Mt&&Ae.setAttribute(Mt,Yt)}for(let ee=0;ee<Wt.childNodes.length;ee++)Wt.childNodes[ee].nodeType===this._document.ELEMENT_NODE&&Ae.appendChild(Wt.childNodes[ee].cloneNode(!0));return Ae}_setSvgAttributes(Wt,Ae){return Wt.setAttribute("fit",""),Wt.setAttribute("height","100%"),Wt.setAttribute("width","100%"),Wt.setAttribute("preserveAspectRatio","xMidYMid meet"),Wt.setAttribute("focusable","false"),Ae&&Ae.viewBox&&Wt.setAttribute("viewBox",Ae.viewBox),Wt}_fetchIcon(Wt){var Ae;const{url:Qt,options:ee}=Wt,Mt=null!==(Ae=null==ee?void 0:ee.withCredentials)&&void 0!==Ae&&Ae;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==Qt)throw Error(`Cannot fetch icon from URL "${Qt}".`);const Yt=this._sanitizer.sanitize(y.q3G.RESOURCE_URL,Qt);if(!Yt)throw ht(Qt);const ye=this._inProgressUrlFetches.get(Yt);if(ye)return ye;const ui=this._httpClient.get(Yt,{responseType:"text",withCredentials:Mt}).pipe((0,G.U)(Te=>St(Te)),(0,q.x)(()=>this._inProgressUrlFetches.delete(Yt)),(0,bt.B)());return this._inProgressUrlFetches.set(Yt,ui),ui}_addSvgIconConfig(Wt,Ae,Qt){return this._svgIconConfigs.set(vt(Wt,Ae),Qt),this}_addSvgIconSetConfig(Wt,Ae){const Qt=this._iconSetConfigs.get(Wt);return Qt?Qt.push(Ae):this._iconSetConfigs.set(Wt,[Ae]),this}_svgElementFromConfig(Wt){if(!Wt.svgElement){const Ae=this._svgElementFromString(Wt.svgText);this._setSvgAttributes(Ae,Wt.options),Wt.svgElement=Ae}return Wt.svgElement}_getIconConfigFromResolvers(Wt,Ae){for(let Qt=0;Qt<this._resolvers.length;Qt++){const ee=this._resolvers[Qt](Ae,Wt);if(ee)return At(ee)?new ut(ee.url,null,ee.options):new ut(ee,null)}}}return we.\u0275fac=function(Wt){return new(Wt||we)(y.LFG(gt.eN,8),y.LFG(wt.H7),y.LFG(t.K0,8),y.LFG(y.qLn))},we.\u0275prov=y.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();function Zt(we){return we.cloneNode(!0)}function vt(we,ci){return we+":"+ci}function At(we){return!(!we.url||!we.options)}const re=(0,g.pj)(class{constructor(we){this._elementRef=we}}),ve=new y.OlP("mat-icon-location",{providedIn:"root",factory:function(){const we=(0,y.f3M)(t.K0),ci=we?we.location:null;return{getPathname:()=>ci?ci.pathname+ci.search:""}}}),Ie=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Re=Ie.map(we=>`[${we}]`).join(", "),je=/^url\(['"]?#(.*?)['"]?\)$/;let Si=(()=>{class we extends re{constructor(Wt,Ae,Qt,ee,Mt){super(Wt),this._iconRegistry=Ae,this._location=ee,this._errorHandler=Mt,this._inline=!1,this._currentIconFetch=D.w0.EMPTY,Qt||Wt.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(Wt){this._inline=(0,e.Ig)(Wt)}get svgIcon(){return this._svgIcon}set svgIcon(Wt){Wt!==this._svgIcon&&(Wt?this._updateSvgIcon(Wt):this._svgIcon&&this._clearSvgElement(),this._svgIcon=Wt)}get fontSet(){return this._fontSet}set fontSet(Wt){const Ae=this._cleanupFontValue(Wt);Ae!==this._fontSet&&(this._fontSet=Ae,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(Wt){const Ae=this._cleanupFontValue(Wt);Ae!==this._fontIcon&&(this._fontIcon=Ae,this._updateFontIconClasses())}_splitIconName(Wt){if(!Wt)return["",""];const Ae=Wt.split(":");switch(Ae.length){case 1:return["",Ae[0]];case 2:return Ae;default:throw Error(`Invalid icon name: "${Wt}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const Wt=this._elementsWithExternalReferences;if(Wt&&Wt.size){const Ae=this._location.getPathname();Ae!==this._previousPath&&(this._previousPath=Ae,this._prependPathToReferences(Ae))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(Wt){this._clearSvgElement();const Ae=Wt.querySelectorAll("style");for(let ee=0;ee<Ae.length;ee++)Ae[ee].textContent+=" ";const Qt=this._location.getPathname();this._previousPath=Qt,this._cacheChildrenWithExternalReferences(Wt),this._prependPathToReferences(Qt),this._elementRef.nativeElement.appendChild(Wt)}_clearSvgElement(){const Wt=this._elementRef.nativeElement;let Ae=Wt.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Ae--;){const Qt=Wt.childNodes[Ae];(1!==Qt.nodeType||"svg"===Qt.nodeName.toLowerCase())&&Qt.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const Wt=this._elementRef.nativeElement,Ae=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();Ae!=this._previousFontSetClass&&(this._previousFontSetClass&&Wt.classList.remove(this._previousFontSetClass),Ae&&Wt.classList.add(Ae),this._previousFontSetClass=Ae),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&Wt.classList.remove(this._previousFontIconClass),this.fontIcon&&Wt.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(Wt){return"string"==typeof Wt?Wt.trim().split(" ")[0]:Wt}_prependPathToReferences(Wt){const Ae=this._elementsWithExternalReferences;Ae&&Ae.forEach((Qt,ee)=>{Qt.forEach(Mt=>{ee.setAttribute(Mt.name,`url('${Wt}#${Mt.value}')`)})})}_cacheChildrenWithExternalReferences(Wt){const Ae=Wt.querySelectorAll(Re),Qt=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let ee=0;ee<Ae.length;ee++)Ie.forEach(Mt=>{const Yt=Ae[ee],ye=Yt.getAttribute(Mt),ui=ye?ye.match(je):null;if(ui){let Te=Qt.get(Yt);Te||(Te=[],Qt.set(Yt,Te)),Te.push({name:Mt,value:ui[1]})}})}_updateSvgIcon(Wt){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),Wt){const[Ae,Qt]=this._splitIconName(Wt);Ae&&(this._svgNamespace=Ae),Qt&&(this._svgName=Qt),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(Qt,Ae).pipe((0,Ft.q)(1)).subscribe(ee=>this._setSvgElement(ee),ee=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Ae}:${Qt}! ${ee.message}`))})}}}return we.\u0275fac=function(Wt){return new(Wt||we)(y.Y36(y.SBq),y.Y36(ot),y.$8M("aria-hidden"),y.Y36(ve),y.Y36(y.qLn))},we.\u0275cmp=y.Xpm({type:we,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(Wt,Ae){2&Wt&&(y.uIk("data-mat-icon-type",Ae._usingFontIcon()?"font":"svg")("data-mat-icon-name",Ae._svgName||Ae.fontIcon)("data-mat-icon-namespace",Ae._svgNamespace||Ae.fontSet),y.ekj("mat-icon-inline",Ae.inline)("mat-icon-no-color","primary"!==Ae.color&&"accent"!==Ae.color&&"warn"!==Ae.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[y.qOj],ngContentSelectors:Bt,decls:1,vars:0,template:function(Wt,Ae){1&Wt&&(y.F$t(),y.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),we})(),Ze=(()=>{class we{}return we.\u0275fac=function(Wt){return new(Wt||we)},we.\u0275mod=y.oAB({type:we}),we.\u0275inj=y.cJS({imports:[[g.BQ],g.BQ]}),we})()},77531:(H,W,f)=>{"use strict";f.d(W,{Jk:()=>bt,Nt:()=>Bt,c:()=>Kt});var y=f(63191),g=f(70925),e=f(5e3),t=f(93075),n=f(90508),r=f(67322),s=f(77579),c=f(60515);const v=(0,g.i$)({passive:!0});let D=(()=>{class It{constructor(lt,ft){this._platform=lt,this._ngZone=ft,this._monitoredElements=new Map}monitor(lt){if(!this._platform.isBrowser)return c.E;const ft=(0,y.fI)(lt),ht=this._monitoredElements.get(ft);if(ht)return ht.subject;const Gt=new s.x,ut="cdk-text-field-autofilled",ot=st=>{"cdk-text-field-autofill-start"!==st.animationName||ft.classList.contains(ut)?"cdk-text-field-autofill-end"===st.animationName&&ft.classList.contains(ut)&&(ft.classList.remove(ut),this._ngZone.run(()=>Gt.next({target:st.target,isAutofilled:!1}))):(ft.classList.add(ut),this._ngZone.run(()=>Gt.next({target:st.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{ft.addEventListener("animationstart",ot,v),ft.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(ft,{subject:Gt,unlisten:()=>{ft.removeEventListener("animationstart",ot,v)}}),Gt}stopMonitoring(lt){const ft=(0,y.fI)(lt),ht=this._monitoredElements.get(ft);ht&&(ht.unlisten(),ht.subject.complete(),ft.classList.remove("cdk-text-field-autofill-monitored"),ft.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(ft))}ngOnDestroy(){this._monitoredElements.forEach((lt,ft)=>this.stopMonitoring(ft))}}return It.\u0275fac=function(lt){return new(lt||It)(e.LFG(g.t4),e.LFG(e.R0b))},It.\u0275prov=e.Yz7({token:It,factory:It.\u0275fac,providedIn:"root"}),It})(),it=(()=>{class It{}return It.\u0275fac=function(lt){return new(lt||It)},It.\u0275mod=e.oAB({type:It}),It.\u0275inj=e.cJS({imports:[[g.ud]]}),It})();const bt=new e.OlP("MAT_INPUT_VALUE_ACCESSOR"),Ft=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let gt=0;const wt=(0,n.FD)(class{constructor(It,St,lt,ft){this._defaultErrorStateMatcher=It,this._parentForm=St,this._parentFormGroup=lt,this.ngControl=ft}});let Bt=(()=>{class It extends wt{constructor(lt,ft,ht,Gt,ut,ot,st,Z,Zt,vt){super(ot,Gt,ut,ht),this._elementRef=lt,this._platform=ft,this._autofillMonitor=Z,this._formField=vt,this._uid="mat-input-"+gt++,this.focused=!1,this.stateChanges=new s.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ve=>(0,g.qK)().has(ve));const At=this._elementRef.nativeElement,re=At.nodeName.toLowerCase();this._inputValueAccessor=st||At,this._previousNativeValue=this.value,this.id=this.id,ft.IOS&&Zt.runOutsideAngular(()=>{lt.nativeElement.addEventListener("keyup",ve=>{const oe=ve.target;!oe.value&&0===oe.selectionStart&&0===oe.selectionEnd&&(oe.setSelectionRange(1,1),oe.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===re,this._isTextarea="textarea"===re,this._isInFormField=!!vt,this._isNativeSelect&&(this.controlType=At.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(lt){this._disabled=(0,y.Ig)(lt),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(lt){this._id=lt||this._uid}get required(){var lt,ft,ht,Gt;return null!==(Gt=null!==(lt=this._required)&&void 0!==lt?lt:null===(ht=null===(ft=this.ngControl)||void 0===ft?void 0:ft.control)||void 0===ht?void 0:ht.hasValidator(t.kI.required))&&void 0!==Gt&&Gt}set required(lt){this._required=(0,y.Ig)(lt)}get type(){return this._type}set type(lt){this._type=lt||"text",this._validateType(),!this._isTextarea&&(0,g.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(lt){lt!==this.value&&(this._inputValueAccessor.value=lt,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(lt){this._readonly=(0,y.Ig)(lt)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(lt=>{this.autofilled=lt.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(lt){this._elementRef.nativeElement.focus(lt)}_focusChanged(lt){lt!==this.focused&&(this.focused=lt,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var lt,ft;const ht=(null===(ft=null===(lt=this._formField)||void 0===lt?void 0:lt._hideControlPlaceholder)||void 0===ft?void 0:ft.call(lt))?null:this.placeholder;if(ht!==this._previousPlaceholder){const Gt=this._elementRef.nativeElement;this._previousPlaceholder=ht,ht?Gt.setAttribute("placeholder",ht):Gt.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const lt=this._elementRef.nativeElement.value;this._previousNativeValue!==lt&&(this._previousNativeValue=lt,this.stateChanges.next())}_validateType(){Ft.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let lt=this._elementRef.nativeElement.validity;return lt&&lt.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const lt=this._elementRef.nativeElement,ft=lt.options[0];return this.focused||lt.multiple||!this.empty||!!(lt.selectedIndex>-1&&ft&&ft.label)}return this.focused||!this.empty}setDescribedByIds(lt){lt.length?this._elementRef.nativeElement.setAttribute("aria-describedby",lt.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const lt=this._elementRef.nativeElement;return this._isNativeSelect&&(lt.multiple||lt.size>1)}}return It.\u0275fac=function(lt){return new(lt||It)(e.Y36(e.SBq),e.Y36(g.t4),e.Y36(t.a5,10),e.Y36(t.F,8),e.Y36(t.sg,8),e.Y36(n.rD),e.Y36(bt,10),e.Y36(D),e.Y36(e.R0b),e.Y36(r.G_,8))},It.\u0275dir=e.lG2({type:It,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(lt,ft){1&lt&&e.NdJ("focus",function(){return ft._focusChanged(!0)})("blur",function(){return ft._focusChanged(!1)})("input",function(){return ft._onInput()}),2&lt&&(e.Ikx("disabled",ft.disabled)("required",ft.required),e.uIk("id",ft.id)("data-placeholder",ft.placeholder)("readonly",ft.readonly&&!ft._isNativeSelect||null)("aria-invalid",ft.empty&&ft.required?null:ft.errorState)("aria-required",ft.required),e.ekj("mat-input-server",ft._isServer)("mat-native-select-inline",ft._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[e._Bn([{provide:r.Eo,useExisting:It}]),e.qOj,e.TTD]}),It})(),Kt=(()=>{class It{}return It.\u0275fac=function(lt){return new(lt||It)},It.\u0275mod=e.oAB({type:It}),It.\u0275inj=e.cJS({providers:[n.rD],imports:[[it,r.lN,n.BQ],it,r.lN]}),It})()},92181:(H,W,f)=>{"use strict";f.d(W,{VK:()=>Ae,Tx:()=>ce,p6:()=>Te});var y=f(15664),g=f(63191),e=f(91159),t=f(5e3),n=f(77579),r=f(50727),s=f(56451),c=f(39646),v=f(53101),D=f(68675),P=f(63900),G=f(95698),it=f(39300),q=f(82722),bt=f(91005),Ft=f(41777),gt=f(99129),wt=f(69808),Bt=f(90508),Kt=f(91314),It=f(70925),St=f(50226),lt=f(30495);const ft=["mat-menu-item",""];function ht(te,Me){1&te&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"polygon",3),t.qZA())}const Gt=["*"];function ut(te,Me){if(1&te){const ue=t.EpF();t.TgZ(0,"div",0),t.NdJ("keydown",function(be){return t.CHM(ue),t.oxw()._handleKeydown(be)})("click",function(){return t.CHM(ue),t.oxw().closed.emit("click")})("@transformMenu.start",function(be){return t.CHM(ue),t.oxw()._onAnimationStart(be)})("@transformMenu.done",function(be){return t.CHM(ue),t.oxw()._onAnimationDone(be)}),t.TgZ(1,"div",1),t.Hsn(2),t.qZA(),t.qZA()}if(2&te){const ue=t.oxw();t.Q6J("id",ue.panelId)("ngClass",ue._classList)("@transformMenu",ue._panelAnimationState),t.uIk("aria-label",ue.ariaLabel||null)("aria-labelledby",ue.ariaLabelledby||null)("aria-describedby",ue.ariaDescribedby||null)}}const ot={transformMenu:(0,Ft.X$)("transformMenu",[(0,Ft.SB)("void",(0,Ft.oB)({opacity:0,transform:"scale(0.8)"})),(0,Ft.eR)("void => enter",(0,Ft.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,Ft.oB)({opacity:1,transform:"scale(1)"}))),(0,Ft.eR)("* => void",(0,Ft.jt)("100ms 25ms linear",(0,Ft.oB)({opacity:0})))]),fadeInItems:(0,Ft.X$)("fadeInItems",[(0,Ft.SB)("showing",(0,Ft.oB)({opacity:1})),(0,Ft.eR)("void => *",[(0,Ft.oB)({opacity:0}),(0,Ft.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Zt=new t.OlP("MatMenuContent"),Re=new t.OlP("MAT_MENU_PANEL"),je=(0,Bt.Kr)((0,Bt.Id)(class{}));let Si=(()=>{class te extends je{constructor(ue,_e,be,Dt,zt){super(),this._elementRef=ue,this._focusMonitor=be,this._parentMenu=Dt,this._changeDetectorRef=zt,this.role="menuitem",this._hovered=new n.x,this._focused=new n.x,this._highlighted=!1,this._triggersSubmenu=!1,Dt&&Dt.addItem&&Dt.addItem(this)}focus(ue,_e){this._focusMonitor&&ue?this._focusMonitor.focusVia(this._getHostElement(),ue,_e):this._getHostElement().focus(_e),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(ue){this.disabled&&(ue.preventDefault(),ue.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var ue;const _e=this._elementRef.nativeElement.cloneNode(!0),be=_e.querySelectorAll("mat-icon, .material-icons");for(let Dt=0;Dt<be.length;Dt++)be[Dt].remove();return(null===(ue=_e.textContent)||void 0===ue?void 0:ue.trim())||""}_setHighlighted(ue){var _e;this._highlighted=ue,null===(_e=this._changeDetectorRef)||void 0===_e||_e.markForCheck()}}return te.\u0275fac=function(ue){return new(ue||te)(t.Y36(t.SBq),t.Y36(wt.K0),t.Y36(y.tE),t.Y36(Re,8),t.Y36(t.sBO))},te.\u0275cmp=t.Xpm({type:te,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(ue,_e){1&ue&&t.NdJ("click",function(Dt){return _e._checkDisabled(Dt)})("mouseenter",function(){return _e._handleMouseEnter()}),2&ue&&(t.uIk("role",_e.role)("tabindex",_e._getTabIndex())("aria-disabled",_e.disabled.toString())("disabled",_e.disabled||null),t.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",_e._highlighted)("mat-menu-item-submenu-trigger",_e._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[t.qOj],attrs:ft,ngContentSelectors:Gt,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(ue,_e){1&ue&&(t.F$t(),t.Hsn(0),t._UZ(1,"div",0),t.YNc(2,ht,2,0,"svg",1)),2&ue&&(t.xp6(1),t.Q6J("matRippleDisabled",_e.disableRipple||_e.disabled)("matRippleTrigger",_e._getHostElement()),t.xp6(1),t.Q6J("ngIf",_e._triggersSubmenu))},directives:[Bt.wG,wt.O5],encapsulation:2,changeDetection:0}),te})();const Ze=new t.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let ci=0,Wt=(()=>{class te{constructor(ue,_e,be){this._elementRef=ue,this._ngZone=_e,this._defaultOptions=be,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new t.n_E,this._tabSubscription=r.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new n.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new t.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+ci++}get xPosition(){return this._xPosition}set xPosition(ue){this._xPosition=ue,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(ue){this._yPosition=ue,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(ue){this._overlapTrigger=(0,g.Ig)(ue)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(ue){this._hasBackdrop=(0,g.Ig)(ue)}set panelClass(ue){const _e=this._previousPanelClass;_e&&_e.length&&_e.split(" ").forEach(be=>{this._classList[be]=!1}),this._previousPanelClass=ue,ue&&ue.length&&(ue.split(" ").forEach(be=>{this._classList[be]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(ue){this.panelClass=ue}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new y.Em(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,D.O)(this._directDescendantItems),(0,P.w)(ue=>(0,s.T)(...ue.map(_e=>_e._focused)))).subscribe(ue=>this._keyManager.updateActiveItem(ue))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe((0,D.O)(this._directDescendantItems),(0,P.w)(_e=>(0,s.T)(..._e.map(be=>be._hovered))))}addItem(ue){}removeItem(ue){}_handleKeydown(ue){const _e=ue.keyCode,be=this._keyManager;switch(_e){case e.hY:(0,e.Vb)(ue)||(ue.preventDefault(),this.closed.emit("keydown"));break;case e.oh:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case e.SV:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(_e===e.LH||_e===e.JH)&&be.setFocusOrigin("keyboard"),be.onKeydown(ue)}}focusFirstItem(ue="program"){this.lazyContent?this._ngZone.onStable.pipe((0,G.q)(1)).subscribe(()=>this._focusFirstItem(ue)):this._focusFirstItem(ue)}_focusFirstItem(ue){const _e=this._keyManager;if(_e.setFocusOrigin(ue).setFirstItemActive(),!_e.activeItem&&this._directDescendantItems.length){let be=this._directDescendantItems.first._getHostElement().parentElement;for(;be;){if("menu"===be.getAttribute("role")){be.focus();break}be=be.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(ue){const _e=Math.min(this._baseElevation+ue,24),be=`${this._elevationPrefix}${_e}`,Dt=Object.keys(this._classList).find(zt=>zt.startsWith(this._elevationPrefix));(!Dt||Dt===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[be]=!0,this._previousElevation=be)}setPositionClasses(ue=this.xPosition,_e=this.yPosition){const be=this._classList;be["mat-menu-before"]="before"===ue,be["mat-menu-after"]="after"===ue,be["mat-menu-above"]="above"===_e,be["mat-menu-below"]="below"===_e}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(ue){this._animationDone.next(ue),this._isAnimating=!1}_onAnimationStart(ue){this._isAnimating=!0,"enter"===ue.toState&&0===this._keyManager.activeItemIndex&&(ue.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,D.O)(this._allItems)).subscribe(ue=>{this._directDescendantItems.reset(ue.filter(_e=>_e._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return te.\u0275fac=function(ue){return new(ue||te)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(Ze))},te.\u0275dir=t.lG2({type:te,contentQueries:function(ue,_e,be){if(1&ue&&(t.Suo(be,Zt,5),t.Suo(be,Si,5),t.Suo(be,Si,4)),2&ue){let Dt;t.iGM(Dt=t.CRH())&&(_e.lazyContent=Dt.first),t.iGM(Dt=t.CRH())&&(_e._allItems=Dt),t.iGM(Dt=t.CRH())&&(_e.items=Dt)}},viewQuery:function(ue,_e){if(1&ue&&t.Gf(t.Rgc,5),2&ue){let be;t.iGM(be=t.CRH())&&(_e.templateRef=be.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),te})(),Ae=(()=>{class te extends Wt{constructor(ue,_e,be){super(ue,_e,be),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return te.\u0275fac=function(ue){return new(ue||te)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(Ze))},te.\u0275cmp=t.Xpm({type:te,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(ue,_e){2&ue&&t.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[t._Bn([{provide:Re,useExisting:te}]),t.qOj],ngContentSelectors:Gt,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(ue,_e){1&ue&&(t.F$t(),t.YNc(0,ut,3,6,"ng-template"))},directives:[wt.mk],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[ot.transformMenu,ot.fadeInItems]},changeDetection:0}),te})();const Qt=new t.OlP("mat-menu-scroll-strategy"),Mt={provide:Qt,deps:[Kt.aV],useFactory:function(te){return()=>te.scrollStrategies.reposition()}},ye=(0,It.i$)({passive:!0});let ui=(()=>{class te{constructor(ue,_e,be,Dt,zt,Ge,Xe,Ri){this._overlay=ue,this._element=_e,this._viewContainerRef=be,this._menuItemInstance=Ge,this._dir=Xe,this._focusMonitor=Ri,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=r.w0.EMPTY,this._hoverSubscription=r.w0.EMPTY,this._menuCloseSubscription=r.w0.EMPTY,this._handleTouchStart=bi=>{(0,y.yG)(bi)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new t.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new t.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=Dt,this._parentMaterialMenu=zt instanceof Wt?zt:void 0,_e.nativeElement.addEventListener("touchstart",this._handleTouchStart,ye),Ge&&(Ge._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(ue){this.menu=ue}get menu(){return this._menu}set menu(ue){ue!==this._menu&&(this._menu=ue,this._menuCloseSubscription.unsubscribe(),ue&&(this._menuCloseSubscription=ue.close.subscribe(_e=>{this._destroyMenu(_e),("click"===_e||"tab"===_e)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(_e)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,ye),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const ue=this._createOverlay(),_e=ue.getConfig();this._setPosition(_e.positionStrategy),_e.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,ue.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Wt&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(ue,_e){this._focusMonitor&&ue?this._focusMonitor.focusVia(this._element,ue,_e):this._element.nativeElement.focus(_e)}updatePosition(){var ue;null===(ue=this._overlayRef)||void 0===ue||ue.updatePosition()}_destroyMenu(ue){if(!this._overlayRef||!this.menuOpen)return;const _e=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===ue||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,_e instanceof Wt?(_e._resetAnimation(),_e.lazyContent?_e._animationDone.pipe((0,it.h)(be=>"void"===be.toState),(0,G.q)(1),(0,q.R)(_e.lazyContent._attached)).subscribe({next:()=>_e.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),_e.lazyContent&&_e.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let ue=0,_e=this.menu.parentMenu;for(;_e;)ue++,_e=_e.parentMenu;this.menu.setElevation(ue)}}_setIsMenuOpen(ue){this._menuOpen=ue,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(ue)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const ue=this._getOverlayConfig();this._subscribeToPositions(ue.positionStrategy),this._overlayRef=this._overlay.create(ue),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new Kt.X_({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(ue){this.menu.setPositionClasses&&ue.positionChanges.subscribe(_e=>{this.menu.setPositionClasses("start"===_e.connectionPair.overlayX?"after":"before","top"===_e.connectionPair.overlayY?"below":"above")})}_setPosition(ue){let[_e,be]="before"===this.menu.xPosition?["end","start"]:["start","end"],[Dt,zt]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[Ge,Xe]=[Dt,zt],[Ri,bi]=[_e,be],mi=0;this.triggersSubmenu()?(bi=_e="before"===this.menu.xPosition?"start":"end",be=Ri="end"===_e?"start":"end",mi="bottom"===Dt?8:-8):this.menu.overlapTrigger||(Ge="top"===Dt?"bottom":"top",Xe="top"===zt?"bottom":"top"),ue.withPositions([{originX:_e,originY:Ge,overlayX:Ri,overlayY:Dt,offsetY:mi},{originX:be,originY:Ge,overlayX:bi,overlayY:Dt,offsetY:mi},{originX:_e,originY:Xe,overlayX:Ri,overlayY:zt,offsetY:-mi},{originX:be,originY:Xe,overlayX:bi,overlayY:zt,offsetY:-mi}])}_menuClosingActions(){const ue=this._overlayRef.backdropClick(),_e=this._overlayRef.detachments(),be=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,c.of)(),Dt=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,it.h)(zt=>zt!==this._menuItemInstance),(0,it.h)(()=>this._menuOpen)):(0,c.of)();return(0,s.T)(ue,be,Dt,_e)}_handleMousedown(ue){(0,y.X6)(ue)||(this._openedBy=0===ue.button?"mouse":void 0,this.triggersSubmenu()&&ue.preventDefault())}_handleKeydown(ue){const _e=ue.keyCode;(_e===e.K5||_e===e.L_)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(_e===e.SV&&"ltr"===this.dir||_e===e.oh&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(ue){this.triggersSubmenu()?(ue.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,it.h)(ue=>ue===this._menuItemInstance&&!ue.disabled),(0,bt.g)(0,v.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Wt&&this.menu._isAnimating?this.menu._animationDone.pipe((0,G.q)(1),(0,bt.g)(0,v.E),(0,q.R)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new gt.UE(this.menu.templateRef,this._viewContainerRef)),this._portal}}return te.\u0275fac=function(ue){return new(ue||te)(t.Y36(Kt.aV),t.Y36(t.SBq),t.Y36(t.s_b),t.Y36(Qt),t.Y36(Re,8),t.Y36(Si,10),t.Y36(St.Is,8),t.Y36(y.tE))},te.\u0275dir=t.lG2({type:te,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(ue,_e){1&ue&&t.NdJ("click",function(Dt){return _e._handleClick(Dt)})("mousedown",function(Dt){return _e._handleMousedown(Dt)})("keydown",function(Dt){return _e._handleKeydown(Dt)}),2&ue&&t.uIk("aria-expanded",_e.menuOpen||null)("aria-controls",_e.menuOpen?_e.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),te})(),Te=(()=>{class te extends ui{}return te.\u0275fac=function(){let Me;return function(_e){return(Me||(Me=t.n5z(te)))(_e||te)}}(),te.\u0275dir=t.lG2({type:te,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[t.qOj]}),te})(),ce=(()=>{class te{}return te.\u0275fac=function(ue){return new(ue||te)},te.\u0275mod=t.oAB({type:te}),te.\u0275inj=t.cJS({providers:[Mt],imports:[[wt.ez,Bt.BQ,Bt.si,Kt.U8],lt.ZD,Bt.BQ]}),te})()},20773:(H,W,f)=>{"use strict";f.d(W,{Cq:()=>Kt,$g:()=>Bt});var y=f(5e3),g=f(69808),e=f(90508),t=f(63191),n=f(70925),r=f(76360);function s(It,St){if(1&It&&(y.O4$(),y._UZ(0,"circle",3)),2&It){const lt=y.oxw();y.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+lt._spinnerAnimationLabel)("stroke-dashoffset",lt._getStrokeDashOffset(),"px")("stroke-dasharray",lt._getStrokeCircumference(),"px")("stroke-width",lt._getCircleStrokeWidth(),"%"),y.uIk("r",lt._getCircleRadius())}}function c(It,St){if(1&It&&(y.O4$(),y._UZ(0,"circle",3)),2&It){const lt=y.oxw();y.Udp("stroke-dashoffset",lt._getStrokeDashOffset(),"px")("stroke-dasharray",lt._getStrokeCircumference(),"px")("stroke-width",lt._getCircleStrokeWidth(),"%"),y.uIk("r",lt._getCircleRadius())}}function v(It,St){if(1&It&&(y.O4$(),y._UZ(0,"circle",3)),2&It){const lt=y.oxw();y.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+lt._spinnerAnimationLabel)("stroke-dashoffset",lt._getStrokeDashOffset(),"px")("stroke-dasharray",lt._getStrokeCircumference(),"px")("stroke-width",lt._getCircleStrokeWidth(),"%"),y.uIk("r",lt._getCircleRadius())}}function D(It,St){if(1&It&&(y.O4$(),y._UZ(0,"circle",3)),2&It){const lt=y.oxw();y.Udp("stroke-dashoffset",lt._getStrokeDashOffset(),"px")("stroke-dasharray",lt._getStrokeCircumference(),"px")("stroke-width",lt._getCircleStrokeWidth(),"%"),y.uIk("r",lt._getCircleRadius())}}const q=(0,e.pj)(class{constructor(It){this._elementRef=It}},"primary"),bt=new y.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class wt extends q{constructor(St,lt,ft,ht,Gt){super(St),this._document=ft,this._diameter=100,this._value=0,this.mode="determinate";const ut=wt._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),ut.has(ft.head)||ut.set(ft.head,new Set([100])),this._noopAnimations="NoopAnimations"===ht&&!!Gt&&!Gt._forceAnimations,Gt&&(Gt.diameter&&(this.diameter=Gt.diameter),Gt.strokeWidth&&(this.strokeWidth=Gt.strokeWidth))}get diameter(){return this._diameter}set diameter(St){this._diameter=(0,t.su)(St),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(St){this._strokeWidth=(0,t.su)(St)}get value(){return"determinate"===this.mode?this._value:0}set value(St){this._value=Math.max(0,Math.min(100,(0,t.su)(St)))}ngOnInit(){const St=this._elementRef.nativeElement;this._styleRoot=(0,n.kV)(St)||this._document.head,this._attachStyleNode(),St.classList.add("mat-progress-spinner-indeterminate-animation")}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const St=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${St} ${St}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const St=this._styleRoot,lt=this._diameter,ft=wt._diameters;let ht=ft.get(St);if(!ht||!ht.has(lt)){const Gt=this._document.createElement("style");Gt.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),Gt.textContent=this._getAnimationText(),St.appendChild(Gt),ht||(ht=new Set,ft.set(St,ht)),ht.add(lt)}}_getAnimationText(){const St=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*St).replace(/END_VALUE/g,""+.2*St).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}wt._diameters=new WeakMap,wt.\u0275fac=function(St){return new(St||wt)(y.Y36(y.SBq),y.Y36(n.t4),y.Y36(g.K0,8),y.Y36(r.Qb,8),y.Y36(bt))},wt.\u0275cmp=y.Xpm({type:wt,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(St,lt){2&St&&(y.uIk("aria-valuemin","determinate"===lt.mode?0:null)("aria-valuemax","determinate"===lt.mode?100:null)("aria-valuenow","determinate"===lt.mode?lt.value:null)("mode",lt.mode),y.Udp("width",lt.diameter,"px")("height",lt.diameter,"px"),y.ekj("_mat-animation-noopable",lt._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[y.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(St,lt){1&St&&(y.O4$(),y.TgZ(0,"svg",0),y.YNc(1,s,1,9,"circle",1),y.YNc(2,c,1,7,"circle",2),y.qZA()),2&St&&(y.Udp("width",lt.diameter,"px")("height",lt.diameter,"px"),y.Q6J("ngSwitch","indeterminate"===lt.mode),y.uIk("viewBox",lt._getViewBox()),y.xp6(1),y.Q6J("ngSwitchCase",!0),y.xp6(1),y.Q6J("ngSwitchCase",!1))},directives:[g.RF,g.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let Bt=(()=>{class It extends wt{constructor(lt,ft,ht,Gt,ut){super(lt,ft,ht,Gt,ut),this.mode="indeterminate"}}return It.\u0275fac=function(lt){return new(lt||It)(y.Y36(y.SBq),y.Y36(n.t4),y.Y36(g.K0,8),y.Y36(r.Qb,8),y.Y36(bt))},It.\u0275cmp=y.Xpm({type:It,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(lt,ft){2&lt&&(y.Udp("width",ft.diameter,"px")("height",ft.diameter,"px"),y.ekj("_mat-animation-noopable",ft._noopAnimations))},inputs:{color:"color"},features:[y.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(lt,ft){1&lt&&(y.O4$(),y.TgZ(0,"svg",0),y.YNc(1,v,1,9,"circle",1),y.YNc(2,D,1,7,"circle",2),y.qZA()),2&lt&&(y.Udp("width",ft.diameter,"px")("height",ft.diameter,"px"),y.Q6J("ngSwitch","indeterminate"===ft.mode),y.uIk("viewBox",ft._getViewBox()),y.xp6(1),y.Q6J("ngSwitchCase",!0),y.xp6(1),y.Q6J("ngSwitchCase",!1))},directives:[g.RF,g.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0}),It})(),Kt=(()=>{class It{}return It.\u0275fac=function(lt){return new(lt||It)},It.\u0275mod=y.oAB({type:It}),It.\u0275inj=y.cJS({imports:[[e.BQ,g.ez],e.BQ]}),It})()},57261:(H,W,f)=>{"use strict";f.d(W,{ux:()=>Gt,ZX:()=>lt});var y=f(91314),g=f(99129),e=f(69808),t=f(5e3),n=f(90508),r=f(47423),s=f(77579),c=f(95698),v=f(82722),D=f(41777),P=f(70925),G=f(95113),it=f(15664);function q(ut,ot){if(1&ut){const st=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"button",2),t.NdJ("click",function(){return t.CHM(st),t.oxw().action()}),t._uU(2),t.qZA(),t.qZA()}if(2&ut){const st=t.oxw();t.xp6(2),t.Oqu(st.data.action)}}function bt(ut,ot){}const Ft=new t.OlP("MatSnackBarData");class gt{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const wt=Math.pow(2,31)-1;class Bt{constructor(ot,st){this._overlayRef=st,this._afterDismissed=new s.x,this._afterOpened=new s.x,this._onAction=new s.x,this._dismissedByAction=!1,this.containerInstance=ot,this.onAction().subscribe(()=>this.dismiss()),ot._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(ot){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(ot,wt))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let Kt=(()=>{class ut{constructor(st,Z){this.snackBarRef=st,this.data=Z}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return ut.\u0275fac=function(st){return new(st||ut)(t.Y36(Bt),t.Y36(Ft))},ut.\u0275cmp=t.Xpm({type:ut,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(st,Z){1&st&&(t.TgZ(0,"span"),t._uU(1),t.qZA(),t.YNc(2,q,3,1,"div",0)),2&st&&(t.xp6(1),t.Oqu(Z.data.message),t.xp6(1),t.Q6J("ngIf",Z.hasAction))},directives:[e.O5,r.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),ut})();const It={snackBarState:(0,D.X$)("state",[(0,D.SB)("void, hidden",(0,D.oB)({transform:"scale(0.8)",opacity:0})),(0,D.SB)("visible",(0,D.oB)({transform:"scale(1)",opacity:1})),(0,D.eR)("* => visible",(0,D.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,D.eR)("* => void, * => hidden",(0,D.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,D.oB)({opacity:0})))])};let St=(()=>{class ut extends g.en{constructor(st,Z,Zt,vt,At){super(),this._ngZone=st,this._elementRef=Z,this._changeDetectorRef=Zt,this._platform=vt,this.snackBarConfig=At,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new s.x,this._onExit=new s.x,this._onEnter=new s.x,this._animationState="void",this.attachDomPortal=re=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(re)),this._live="assertive"!==At.politeness||At.announcementMessage?"off"===At.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(st){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(st)}attachTemplatePortal(st){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(st)}onAnimationEnd(st){const{fromState:Z,toState:Zt}=st;if(("void"===Zt&&"void"!==Z||"hidden"===Zt)&&this._completeExit(),"visible"===Zt){const vt=this._onEnter;this._ngZone.run(()=>{vt.next(),vt.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,c.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const st=this._elementRef.nativeElement,Z=this.snackBarConfig.panelClass;Z&&(Array.isArray(Z)?Z.forEach(Zt=>st.classList.add(Zt)):st.classList.add(Z)),"center"===this.snackBarConfig.horizontalPosition&&st.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&st.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const st=this._elementRef.nativeElement.querySelector("[aria-hidden]"),Z=this._elementRef.nativeElement.querySelector("[aria-live]");if(st&&Z){let Zt=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&st.contains(document.activeElement)&&(Zt=document.activeElement),st.removeAttribute("aria-hidden"),Z.appendChild(st),null==Zt||Zt.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return ut.\u0275fac=function(st){return new(st||ut)(t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(P.t4),t.Y36(gt))},ut.\u0275cmp=t.Xpm({type:ut,selectors:[["snack-bar-container"]],viewQuery:function(st,Z){if(1&st&&t.Gf(g.Pl,7),2&st){let Zt;t.iGM(Zt=t.CRH())&&(Z._portalOutlet=Zt.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(st,Z){1&st&&t.WFA("@state.done",function(vt){return Z.onAnimationEnd(vt)}),2&st&&t.d8E("@state",Z._animationState)},features:[t.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(st,Z){1&st&&(t.TgZ(0,"div",0),t.YNc(1,bt,0,0,"ng-template",1),t.qZA(),t._UZ(2,"div")),2&st&&(t.xp6(2),t.uIk("aria-live",Z._live)("role",Z._role))},directives:[g.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[It.snackBarState]}}),ut})(),lt=(()=>{class ut{}return ut.\u0275fac=function(st){return new(st||ut)},ut.\u0275mod=t.oAB({type:ut}),ut.\u0275inj=t.cJS({imports:[[y.U8,g.eL,e.ez,r.ot,n.BQ],n.BQ]}),ut})();const ft=new t.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new gt}});let Gt=(()=>{class ut{constructor(st,Z,Zt,vt,At,re){this._overlay=st,this._live=Z,this._injector=Zt,this._breakpointObserver=vt,this._parentSnackBar=At,this._defaultConfig=re,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Kt,this.snackBarContainerComponent=St,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const st=this._parentSnackBar;return st?st._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(st){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=st:this._snackBarRefAtThisLevel=st}openFromComponent(st,Z){return this._attach(st,Z)}openFromTemplate(st,Z){return this._attach(st,Z)}open(st,Z="",Zt){const vt=Object.assign(Object.assign({},this._defaultConfig),Zt);return vt.data={message:st,action:Z},vt.announcementMessage===st&&(vt.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,vt)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(st,Z){const vt=t.zs3.create({parent:Z&&Z.viewContainerRef&&Z.viewContainerRef.injector||this._injector,providers:[{provide:gt,useValue:Z}]}),At=new g.C5(this.snackBarContainerComponent,Z.viewContainerRef,vt),re=st.attach(At);return re.instance.snackBarConfig=Z,re.instance}_attach(st,Z){const Zt=Object.assign(Object.assign(Object.assign({},new gt),this._defaultConfig),Z),vt=this._createOverlay(Zt),At=this._attachSnackBarContainer(vt,Zt),re=new Bt(At,vt);if(st instanceof t.Rgc){const ve=new g.UE(st,null,{$implicit:Zt.data,snackBarRef:re});re.instance=At.attachTemplatePortal(ve)}else{const ve=this._createInjector(Zt,re),oe=new g.C5(st,void 0,ve),Ie=At.attachComponentPortal(oe);re.instance=Ie.instance}return this._breakpointObserver.observe(G.u3.HandsetPortrait).pipe((0,v.R)(vt.detachments())).subscribe(ve=>{vt.overlayElement.classList.toggle(this.handsetCssClass,ve.matches)}),Zt.announcementMessage&&At._onAnnounce.subscribe(()=>{this._live.announce(Zt.announcementMessage,Zt.politeness)}),this._animateSnackBar(re,Zt),this._openedSnackBarRef=re,this._openedSnackBarRef}_animateSnackBar(st,Z){st.afterDismissed().subscribe(()=>{this._openedSnackBarRef==st&&(this._openedSnackBarRef=null),Z.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{st.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):st.containerInstance.enter(),Z.duration&&Z.duration>0&&st.afterOpened().subscribe(()=>st._dismissAfter(Z.duration))}_createOverlay(st){const Z=new y.X_;Z.direction=st.direction;let Zt=this._overlay.position().global();const vt="rtl"===st.direction,At="left"===st.horizontalPosition||"start"===st.horizontalPosition&&!vt||"end"===st.horizontalPosition&&vt,re=!At&&"center"!==st.horizontalPosition;return At?Zt.left("0"):re?Zt.right("0"):Zt.centerHorizontally(),"top"===st.verticalPosition?Zt.top("0"):Zt.bottom("0"),Z.positionStrategy=Zt,this._overlay.create(Z)}_createInjector(st,Z){return t.zs3.create({parent:st&&st.viewContainerRef&&st.viewContainerRef.injector||this._injector,providers:[{provide:Bt,useValue:Z},{provide:Ft,useValue:st.data}]})}}return ut.\u0275fac=function(st){return new(st||ut)(t.LFG(y.aV),t.LFG(it.Kd),t.LFG(t.zs3),t.LFG(G.Yg),t.LFG(ut,12),t.LFG(ft))},ut.\u0275prov=t.Yz7({token:ut,factory:ut.\u0275fac,providedIn:lt}),ut})()},53251:(H,W,f)=>{"use strict";f.d(W,{uX:()=>ui,SP:()=>ni,uD:()=>Mt,Nh:()=>ti});var y=f(15664),g=f(17144),e=f(99129),t=f(69808),n=f(5e3),r=f(90508),s=f(76360),c=f(77579),v=f(50727),D=f(54968),P=f(39646),G=f(56451),it=f(5963),q=f(41777),bt=f(68675),Ft=f(71884),gt=f(82722),wt=f(50226),Bt=f(63191),Kt=f(91159),It=f(70925),St=f(30495);function lt(ge,Pt){1&ge&&n.Hsn(0)}const ft=["*"];function ht(ge,Pt){}const Gt=function(ge){return{animationDuration:ge}},ut=function(ge,Pt){return{value:ge,params:Pt}},ot=["tabListContainer"],st=["tabList"],Z=["tabListInner"],Zt=["nextPaginator"],vt=["previousPaginator"],At=["tabBodyWrapper"],re=["tabHeader"];function ve(ge,Pt){}function oe(ge,Pt){if(1&ge&&n.YNc(0,ve,0,0,"ng-template",9),2&ge){const dt=n.oxw().$implicit;n.Q6J("cdkPortalOutlet",dt.templateLabel)}}function Ie(ge,Pt){if(1&ge&&n._uU(0),2&ge){const dt=n.oxw().$implicit;n.Oqu(dt.textLabel)}}function Re(ge,Pt){if(1&ge){const dt=n.EpF();n.TgZ(0,"div",6),n.NdJ("click",function(){const pe=n.CHM(dt),Le=pe.$implicit,Vi=pe.index,Ki=n.oxw(),Sn=n.MAs(1);return Ki._handleClick(Le,Sn,Vi)})("cdkFocusChange",function(pe){const Vi=n.CHM(dt).index;return n.oxw()._tabFocusChanged(pe,Vi)}),n.TgZ(1,"div",7),n.YNc(2,oe,1,1,"ng-template",8),n.YNc(3,Ie,1,1,"ng-template",8),n.qZA(),n.qZA()}if(2&ge){const dt=Pt.$implicit,Nt=Pt.index,pe=n.oxw();n.ekj("mat-tab-label-active",pe.selectedIndex==Nt),n.Q6J("id",pe._getTabLabelId(Nt))("disabled",dt.disabled)("matRippleDisabled",dt.disabled||pe.disableRipple),n.uIk("tabIndex",pe._getTabIndex(dt,Nt))("aria-posinset",Nt+1)("aria-setsize",pe._tabs.length)("aria-controls",pe._getTabContentId(Nt))("aria-selected",pe.selectedIndex==Nt)("aria-label",dt.ariaLabel||null)("aria-labelledby",!dt.ariaLabel&&dt.ariaLabelledby?dt.ariaLabelledby:null),n.xp6(2),n.Q6J("ngIf",dt.templateLabel),n.xp6(1),n.Q6J("ngIf",!dt.templateLabel)}}function je(ge,Pt){if(1&ge){const dt=n.EpF();n.TgZ(0,"mat-tab-body",10),n.NdJ("_onCentered",function(){return n.CHM(dt),n.oxw()._removeTabBodyWrapperHeight()})("_onCentering",function(pe){return n.CHM(dt),n.oxw()._setTabBodyWrapperHeight(pe)}),n.qZA()}if(2&ge){const dt=Pt.$implicit,Nt=Pt.index,pe=n.oxw();n.ekj("mat-tab-body-active",pe.selectedIndex===Nt),n.Q6J("id",pe._getTabContentId(Nt))("content",dt.content)("position",dt.position)("origin",dt.origin)("animationDuration",pe.animationDuration),n.uIk("tabindex",null!=pe.contentTabIndex&&pe.selectedIndex===Nt?pe.contentTabIndex:null)("aria-labelledby",pe._getTabLabelId(Nt))}}const Ze=new n.OlP("MatInkBarPositioner",{providedIn:"root",factory:function(){return Pt=>({left:Pt?(Pt.offsetLeft||0)+"px":"0",width:Pt?(Pt.offsetWidth||0)+"px":"0"})}});let ci=(()=>{class ge{constructor(dt,Nt,pe,Le){this._elementRef=dt,this._ngZone=Nt,this._inkBarPositioner=pe,this._animationMode=Le}alignToElement(dt){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(dt))}):this._setStyles(dt)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(dt){const Nt=this._inkBarPositioner(dt),pe=this._elementRef.nativeElement;pe.style.left=Nt.left,pe.style.width=Nt.width}}return ge.\u0275fac=function(dt){return new(dt||ge)(n.Y36(n.SBq),n.Y36(n.R0b),n.Y36(Ze),n.Y36(s.Qb,8))},ge.\u0275dir=n.lG2({type:ge,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(dt,Nt){2&dt&&n.ekj("_mat-animation-noopable","NoopAnimations"===Nt._animationMode)}}),ge})();const Wt=new n.OlP("MatTabContent"),Qt=new n.OlP("MatTabLabel"),ee=new n.OlP("MAT_TAB");let Mt=(()=>{class ge extends e.ig{constructor(dt,Nt,pe){super(dt,Nt),this._closestTab=pe}}return ge.\u0275fac=function(dt){return new(dt||ge)(n.Y36(n.Rgc),n.Y36(n.s_b),n.Y36(ee,8))},ge.\u0275dir=n.lG2({type:ge,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[n._Bn([{provide:Qt,useExisting:ge}]),n.qOj]}),ge})();const Yt=(0,r.Id)(class{}),ye=new n.OlP("MAT_TAB_GROUP");let ui=(()=>{class ge extends Yt{constructor(dt,Nt){super(),this._viewContainerRef=dt,this._closestTabGroup=Nt,this.textLabel="",this._contentPortal=null,this._stateChanges=new c.x,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(dt){this._setTemplateLabelInput(dt)}get content(){return this._contentPortal}ngOnChanges(dt){(dt.hasOwnProperty("textLabel")||dt.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new e.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(dt){dt&&dt._closestTab===this&&(this._templateLabel=dt)}}return ge.\u0275fac=function(dt){return new(dt||ge)(n.Y36(n.s_b),n.Y36(ye,8))},ge.\u0275cmp=n.Xpm({type:ge,selectors:[["mat-tab"]],contentQueries:function(dt,Nt,pe){if(1&dt&&(n.Suo(pe,Qt,5),n.Suo(pe,Wt,7,n.Rgc)),2&dt){let Le;n.iGM(Le=n.CRH())&&(Nt.templateLabel=Le.first),n.iGM(Le=n.CRH())&&(Nt._explicitContent=Le.first)}},viewQuery:function(dt,Nt){if(1&dt&&n.Gf(n.Rgc,7),2&dt){let pe;n.iGM(pe=n.CRH())&&(Nt._implicitContent=pe.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[n._Bn([{provide:ee,useExisting:ge}]),n.qOj,n.TTD],ngContentSelectors:ft,decls:1,vars:0,template:function(dt,Nt){1&dt&&(n.F$t(),n.YNc(0,lt,1,0,"ng-template"))},encapsulation:2}),ge})();const Te={translateTab:(0,q.X$)("translateTab",[(0,q.SB)("center, void, left-origin-center, right-origin-center",(0,q.oB)({transform:"none"})),(0,q.SB)("left",(0,q.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),(0,q.SB)("right",(0,q.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),(0,q.eR)("* => left, * => right, left => center, right => center",(0,q.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,q.eR)("void => left-origin-center",[(0,q.oB)({transform:"translate3d(-100%, 0, 0)"}),(0,q.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,q.eR)("void => right-origin-center",[(0,q.oB)({transform:"translate3d(100%, 0, 0)"}),(0,q.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let ce=(()=>{class ge extends e.Pl{constructor(dt,Nt,pe,Le){super(dt,Nt,Le),this._host=pe,this._centeringSub=v.w0.EMPTY,this._leavingSub=v.w0.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,bt.O)(this._host._isCenterPosition(this._host._position))).subscribe(dt=>{dt&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return ge.\u0275fac=function(dt){return new(dt||ge)(n.Y36(n._Vd),n.Y36(n.s_b),n.Y36((0,n.Gpc)(()=>Me)),n.Y36(t.K0))},ge.\u0275dir=n.lG2({type:ge,selectors:[["","matTabBodyHost",""]],features:[n.qOj]}),ge})(),te=(()=>{class ge{constructor(dt,Nt,pe){this._elementRef=dt,this._dir=Nt,this._dirChangeSubscription=v.w0.EMPTY,this._translateTabComplete=new c.x,this._onCentering=new n.vpe,this._beforeCentering=new n.vpe,this._afterLeavingCenter=new n.vpe,this._onCentered=new n.vpe(!0),this.animationDuration="500ms",Nt&&(this._dirChangeSubscription=Nt.change.subscribe(Le=>{this._computePositionAnimationState(Le),pe.markForCheck()})),this._translateTabComplete.pipe((0,Ft.x)((Le,Vi)=>Le.fromState===Vi.fromState&&Le.toState===Vi.toState)).subscribe(Le=>{this._isCenterPosition(Le.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(Le.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(dt){this._positionIndex=dt,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(dt){const Nt=this._isCenterPosition(dt.toState);this._beforeCentering.emit(Nt),Nt&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(dt){return"center"==dt||"left-origin-center"==dt||"right-origin-center"==dt}_computePositionAnimationState(dt=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==dt?"left":"right":this._positionIndex>0?"ltr"==dt?"right":"left":"center"}_computePositionFromOrigin(dt){const Nt=this._getLayoutDirection();return"ltr"==Nt&&dt<=0||"rtl"==Nt&&dt>0?"left-origin-center":"right-origin-center"}}return ge.\u0275fac=function(dt){return new(dt||ge)(n.Y36(n.SBq),n.Y36(wt.Is,8),n.Y36(n.sBO))},ge.\u0275dir=n.lG2({type:ge,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),ge})(),Me=(()=>{class ge extends te{constructor(dt,Nt,pe){super(dt,Nt,pe)}}return ge.\u0275fac=function(dt){return new(dt||ge)(n.Y36(n.SBq),n.Y36(wt.Is,8),n.Y36(n.sBO))},ge.\u0275cmp=n.Xpm({type:ge,selectors:[["mat-tab-body"]],viewQuery:function(dt,Nt){if(1&dt&&n.Gf(e.Pl,5),2&dt){let pe;n.iGM(pe=n.CRH())&&(Nt._portalHost=pe.first)}},hostAttrs:[1,"mat-tab-body"],features:[n.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(dt,Nt){1&dt&&(n.TgZ(0,"div",0,1),n.NdJ("@translateTab.start",function(Le){return Nt._onTranslateTabStarted(Le)})("@translateTab.done",function(Le){return Nt._translateTabComplete.next(Le)}),n.YNc(2,ht,0,0,"ng-template",2),n.qZA()),2&dt&&n.Q6J("@translateTab",n.WLB(3,ut,Nt._position,n.VKq(1,Gt,Nt.animationDuration)))},directives:[ce],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[Te.translateTab]}}),ge})();const ue=new n.OlP("MAT_TABS_CONFIG"),_e=(0,r.Id)(class{});let be=(()=>{class ge extends _e{constructor(dt){super(),this.elementRef=dt}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return ge.\u0275fac=function(dt){return new(dt||ge)(n.Y36(n.SBq))},ge.\u0275dir=n.lG2({type:ge,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(dt,Nt){2&dt&&(n.uIk("aria-disabled",!!Nt.disabled),n.ekj("mat-tab-disabled",Nt.disabled))},inputs:{disabled:"disabled"},features:[n.qOj]}),ge})();const Dt=(0,It.i$)({passive:!0});let Ri=(()=>{class ge{constructor(dt,Nt,pe,Le,Vi,Ki,Sn){this._elementRef=dt,this._changeDetectorRef=Nt,this._viewportRuler=pe,this._dir=Le,this._ngZone=Vi,this._platform=Ki,this._animationMode=Sn,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new c.x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new c.x,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new n.vpe,this.indexFocused=new n.vpe,Vi.runOutsideAngular(()=>{(0,D.R)(dt.nativeElement,"mouseleave").pipe((0,gt.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(dt){dt=(0,Bt.su)(dt),this._selectedIndex!=dt&&(this._selectedIndexChanged=!0,this._selectedIndex=dt,this._keyManager&&this._keyManager.updateActiveItem(dt))}ngAfterViewInit(){(0,D.R)(this._previousPaginator.nativeElement,"touchstart",Dt).pipe((0,gt.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,D.R)(this._nextPaginator.nativeElement,"touchstart",Dt).pipe((0,gt.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const dt=this._dir?this._dir.change:(0,P.of)("ltr"),Nt=this._viewportRuler.change(150),pe=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new y.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(pe):pe(),(0,G.T)(dt,Nt,this._items.changes).pipe((0,gt.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>Promise.resolve().then(pe)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe((0,gt.R)(this._destroyed)).subscribe(Le=>{this.indexFocused.emit(Le),this._setTabFocus(Le)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(dt){if(!(0,Kt.Vb)(dt))switch(dt.keyCode){case Kt.K5:case Kt.L_:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(dt));break;default:this._keyManager.onKeydown(dt)}}_onContentChanges(){const dt=this._elementRef.nativeElement.textContent;dt!==this._currentTextContent&&(this._currentTextContent=dt||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(dt){!this._isValidIndex(dt)||this.focusIndex===dt||!this._keyManager||this._keyManager.setActiveItem(dt)}_isValidIndex(dt){if(!this._items)return!0;const Nt=this._items?this._items.toArray()[dt]:null;return!!Nt&&!Nt.disabled}_setTabFocus(dt){if(this._showPaginationControls&&this._scrollToLabel(dt),this._items&&this._items.length){this._items.toArray()[dt].focus();const Nt=this._tabListContainer.nativeElement;Nt.scrollLeft="ltr"==this._getLayoutDirection()?0:Nt.scrollWidth-Nt.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const dt=this.scrollDistance,Nt="ltr"===this._getLayoutDirection()?-dt:dt;this._tabList.nativeElement.style.transform=`translateX(${Math.round(Nt)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(dt){this._scrollTo(dt)}_scrollHeader(dt){return this._scrollTo(this._scrollDistance+("before"==dt?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(dt){this._stopInterval(),this._scrollHeader(dt)}_scrollToLabel(dt){if(this.disablePagination)return;const Nt=this._items?this._items.toArray()[dt]:null;if(!Nt)return;const pe=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:Le,offsetWidth:Vi}=Nt.elementRef.nativeElement;let Ki,Sn;"ltr"==this._getLayoutDirection()?(Ki=Le,Sn=Ki+Vi):(Sn=this._tabListInner.nativeElement.offsetWidth-Le,Ki=Sn-Vi);const ir=this.scrollDistance,pi=this.scrollDistance+pe;Ki<ir?this.scrollDistance-=ir-Ki+60:Sn>pi&&(this.scrollDistance+=Sn-pi+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const dt=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;dt||(this.scrollDistance=0),dt!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=dt}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const dt=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,Nt=dt?dt.elementRef.nativeElement:null;Nt?this._inkBar.alignToElement(Nt):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(dt,Nt){Nt&&null!=Nt.button&&0!==Nt.button||(this._stopInterval(),(0,it.H)(650,100).pipe((0,gt.R)((0,G.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:pe,distance:Le}=this._scrollHeader(dt);(0===Le||Le>=pe)&&this._stopInterval()}))}_scrollTo(dt){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const Nt=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(Nt,dt)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:Nt,distance:this._scrollDistance}}}return ge.\u0275fac=function(dt){return new(dt||ge)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(St.rL),n.Y36(wt.Is,8),n.Y36(n.R0b),n.Y36(It.t4),n.Y36(s.Qb,8))},ge.\u0275dir=n.lG2({type:ge,inputs:{disablePagination:"disablePagination"}}),ge})(),bi=(()=>{class ge extends Ri{constructor(dt,Nt,pe,Le,Vi,Ki,Sn){super(dt,Nt,pe,Le,Vi,Ki,Sn),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(dt){this._disableRipple=(0,Bt.Ig)(dt)}_itemSelected(dt){dt.preventDefault()}}return ge.\u0275fac=function(dt){return new(dt||ge)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(St.rL),n.Y36(wt.Is,8),n.Y36(n.R0b),n.Y36(It.t4),n.Y36(s.Qb,8))},ge.\u0275dir=n.lG2({type:ge,inputs:{disableRipple:"disableRipple"},features:[n.qOj]}),ge})(),mi=(()=>{class ge extends bi{constructor(dt,Nt,pe,Le,Vi,Ki,Sn){super(dt,Nt,pe,Le,Vi,Ki,Sn)}}return ge.\u0275fac=function(dt){return new(dt||ge)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(St.rL),n.Y36(wt.Is,8),n.Y36(n.R0b),n.Y36(It.t4),n.Y36(s.Qb,8))},ge.\u0275cmp=n.Xpm({type:ge,selectors:[["mat-tab-header"]],contentQueries:function(dt,Nt,pe){if(1&dt&&n.Suo(pe,be,4),2&dt){let Le;n.iGM(Le=n.CRH())&&(Nt._items=Le)}},viewQuery:function(dt,Nt){if(1&dt&&(n.Gf(ci,7),n.Gf(ot,7),n.Gf(st,7),n.Gf(Z,7),n.Gf(Zt,5),n.Gf(vt,5)),2&dt){let pe;n.iGM(pe=n.CRH())&&(Nt._inkBar=pe.first),n.iGM(pe=n.CRH())&&(Nt._tabListContainer=pe.first),n.iGM(pe=n.CRH())&&(Nt._tabList=pe.first),n.iGM(pe=n.CRH())&&(Nt._tabListInner=pe.first),n.iGM(pe=n.CRH())&&(Nt._nextPaginator=pe.first),n.iGM(pe=n.CRH())&&(Nt._previousPaginator=pe.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(dt,Nt){2&dt&&n.ekj("mat-tab-header-pagination-controls-enabled",Nt._showPaginationControls)("mat-tab-header-rtl","rtl"==Nt._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[n.qOj],ngContentSelectors:ft,decls:14,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(dt,Nt){1&dt&&(n.F$t(),n.TgZ(0,"div",0,1),n.NdJ("click",function(){return Nt._handlePaginatorClick("before")})("mousedown",function(Le){return Nt._handlePaginatorPress("before",Le)})("touchend",function(){return Nt._stopInterval()}),n._UZ(2,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.NdJ("keydown",function(Le){return Nt._handleKeydown(Le)}),n.TgZ(5,"div",5,6),n.NdJ("cdkObserveContent",function(){return Nt._onContentChanges()}),n.TgZ(7,"div",7,8),n.Hsn(9),n.qZA(),n._UZ(10,"mat-ink-bar"),n.qZA(),n.qZA(),n.TgZ(11,"div",9,10),n.NdJ("mousedown",function(Le){return Nt._handlePaginatorPress("after",Le)})("click",function(){return Nt._handlePaginatorClick("after")})("touchend",function(){return Nt._stopInterval()}),n._UZ(13,"div",2),n.qZA()),2&dt&&(n.ekj("mat-tab-header-pagination-disabled",Nt._disableScrollBefore),n.Q6J("matRippleDisabled",Nt._disableScrollBefore||Nt.disableRipple),n.xp6(5),n.ekj("_mat-animation-noopable","NoopAnimations"===Nt._animationMode),n.xp6(6),n.ekj("mat-tab-header-pagination-disabled",Nt._disableScrollAfter),n.Q6J("matRippleDisabled",Nt._disableScrollAfter||Nt.disableRipple))},directives:[r.wG,g.wD,ci],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n'],encapsulation:2}),ge})(),on=0;class li{}const Bi=(0,r.pj)((0,r.Kr)(class{constructor(ge){this._elementRef=ge}}),"primary");let Ii=(()=>{class ge extends Bi{constructor(dt,Nt,pe,Le){var Vi;super(dt),this._changeDetectorRef=Nt,this._animationMode=Le,this._tabs=new n.n_E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=v.w0.EMPTY,this._tabLabelSubscription=v.w0.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new n.vpe,this.focusChange=new n.vpe,this.animationDone=new n.vpe,this.selectedTabChange=new n.vpe(!0),this._groupId=on++,this.animationDuration=pe&&pe.animationDuration?pe.animationDuration:"500ms",this.disablePagination=!(!pe||null==pe.disablePagination)&&pe.disablePagination,this.dynamicHeight=!(!pe||null==pe.dynamicHeight)&&pe.dynamicHeight,this.contentTabIndex=null!==(Vi=null==pe?void 0:pe.contentTabIndex)&&void 0!==Vi?Vi:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(dt){this._dynamicHeight=(0,Bt.Ig)(dt)}get selectedIndex(){return this._selectedIndex}set selectedIndex(dt){this._indexToSelect=(0,Bt.su)(dt,null)}get animationDuration(){return this._animationDuration}set animationDuration(dt){this._animationDuration=/^\d+$/.test(dt)?dt+"ms":dt}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(dt){this._contentTabIndex=(0,Bt.su)(dt,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(dt){const Nt=this._elementRef.nativeElement;Nt.classList.remove(`mat-background-${this.backgroundColor}`),dt&&Nt.classList.add(`mat-background-${dt}`),this._backgroundColor=dt}ngAfterContentChecked(){const dt=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=dt){const Nt=null==this._selectedIndex;if(!Nt){this.selectedTabChange.emit(this._createChangeEvent(dt));const pe=this._tabBodyWrapper.nativeElement;pe.style.minHeight=pe.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((pe,Le)=>pe.isActive=Le===dt),Nt||(this.selectedIndexChange.emit(dt),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((Nt,pe)=>{Nt.position=pe-dt,null!=this._selectedIndex&&0==Nt.position&&!Nt.origin&&(Nt.origin=dt-this._selectedIndex)}),this._selectedIndex!==dt&&(this._selectedIndex=dt,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const Nt=this._tabs.toArray();for(let pe=0;pe<Nt.length;pe++)if(Nt[pe].isActive){this._indexToSelect=this._selectedIndex=pe;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,bt.O)(this._allTabs)).subscribe(dt=>{this._tabs.reset(dt.filter(Nt=>Nt._closestTabGroup===this||!Nt._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}focusTab(dt){const Nt=this._tabHeader;Nt&&(Nt.focusIndex=dt)}_focusChanged(dt){this.focusChange.emit(this._createChangeEvent(dt))}_createChangeEvent(dt){const Nt=new li;return Nt.index=dt,this._tabs&&this._tabs.length&&(Nt.tab=this._tabs.toArray()[dt]),Nt}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,G.T)(...this._tabs.map(dt=>dt._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(dt){return Math.min(this._tabs.length-1,Math.max(dt||0,0))}_getTabLabelId(dt){return`mat-tab-label-${this._groupId}-${dt}`}_getTabContentId(dt){return`mat-tab-content-${this._groupId}-${dt}`}_setTabBodyWrapperHeight(dt){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const Nt=this._tabBodyWrapper.nativeElement;Nt.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(Nt.style.height=dt+"px")}_removeTabBodyWrapperHeight(){const dt=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=dt.clientHeight,dt.style.height="",this.animationDone.emit()}_handleClick(dt,Nt,pe){dt.disabled||(this.selectedIndex=Nt.focusIndex=pe)}_getTabIndex(dt,Nt){return dt.disabled?null:this.selectedIndex===Nt?0:-1}_tabFocusChanged(dt,Nt){dt&&"mouse"!==dt&&"touch"!==dt&&(this._tabHeader.focusIndex=Nt)}}return ge.\u0275fac=function(dt){return new(dt||ge)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(ue,8),n.Y36(s.Qb,8))},ge.\u0275dir=n.lG2({type:ge,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[n.qOj]}),ge})(),ni=(()=>{class ge extends Ii{constructor(dt,Nt,pe,Le){super(dt,Nt,pe,Le)}}return ge.\u0275fac=function(dt){return new(dt||ge)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(ue,8),n.Y36(s.Qb,8))},ge.\u0275cmp=n.Xpm({type:ge,selectors:[["mat-tab-group"]],contentQueries:function(dt,Nt,pe){if(1&dt&&n.Suo(pe,ui,5),2&dt){let Le;n.iGM(Le=n.CRH())&&(Nt._allTabs=Le)}},viewQuery:function(dt,Nt){if(1&dt&&(n.Gf(At,5),n.Gf(re,5)),2&dt){let pe;n.iGM(pe=n.CRH())&&(Nt._tabBodyWrapper=pe.first),n.iGM(pe=n.CRH())&&(Nt._tabHeader=pe.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(dt,Nt){2&dt&&n.ekj("mat-tab-group-dynamic-height",Nt.dynamicHeight)("mat-tab-group-inverted-header","below"===Nt.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[n._Bn([{provide:ye,useExisting:ge}]),n.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(dt,Nt){1&dt&&(n.TgZ(0,"mat-tab-header",0,1),n.NdJ("indexFocused",function(Le){return Nt._focusChanged(Le)})("selectFocusedIndex",function(Le){return Nt.selectedIndex=Le}),n.YNc(2,Re,4,14,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.YNc(5,je,1,9,"mat-tab-body",5),n.qZA()),2&dt&&(n.Q6J("selectedIndex",Nt.selectedIndex||0)("disableRipple",Nt.disableRipple)("disablePagination",Nt.disablePagination),n.xp6(2),n.Q6J("ngForOf",Nt._tabs),n.xp6(1),n.ekj("_mat-animation-noopable","NoopAnimations"===Nt._animationMode),n.xp6(2),n.Q6J("ngForOf",Nt._tabs))},directives:[mi,t.sg,be,r.wG,y.kH,t.O5,e.Pl,Me],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),ge})(),ti=(()=>{class ge{}return ge.\u0275fac=function(dt){return new(dt||ge)},ge.\u0275mod=n.oAB({type:ge}),ge.\u0275inj=n.cJS({imports:[[t.ez,r.BQ,e.eL,r.si,g.Q8,y.rt],r.BQ]}),ge})()},76360:(H,W,f)=>{"use strict";f.d(W,{Qb:()=>Ja,PW:()=>Ji});var y=f(5e3),g=f(22313),e=f(41777);function t(){return"undefined"!=typeof window&&void 0!==window.document}function n(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function r(ae){switch(ae.length){case 0:return new e.ZN;case 1:return ae[0];default:return new e.ZE(ae)}}function s(ae,z,J,Et,ie={},Ee={}){const Ye=[],$e=[];let yi=-1,Hi=null;if(Et.forEach(sn=>{const fn=sn.offset,Yn=fn==yi,cr=Yn&&Hi||{};Object.keys(sn).forEach(Pn=>{let Fn=Pn,or=sn[Pn];if("offset"!==Pn)switch(Fn=z.normalizePropertyName(Fn,Ye),or){case e.k1:or=ie[Pn];break;case e.l3:or=Ee[Pn];break;default:or=z.normalizeStyleValue(Pn,Fn,or,Ye)}cr[Fn]=or}),Yn||$e.push(cr),Hi=cr,yi=fn}),Ye.length){const sn="\n - ";throw new Error(`Unable to animate due to the following errors:${sn}${Ye.join(sn)}`)}return $e}function c(ae,z,J,Et){switch(z){case"start":ae.onStart(()=>Et(J&&v(J,"start",ae)));break;case"done":ae.onDone(()=>Et(J&&v(J,"done",ae)));break;case"destroy":ae.onDestroy(()=>Et(J&&v(J,"destroy",ae)))}}function v(ae,z,J){const Et=J.totalTime,Ee=D(ae.element,ae.triggerName,ae.fromState,ae.toState,z||ae.phaseName,null==Et?ae.totalTime:Et,!!J.disabled),Ye=ae._data;return null!=Ye&&(Ee._data=Ye),Ee}function D(ae,z,J,Et,ie="",Ee=0,Ye){return{element:ae,triggerName:z,fromState:J,toState:Et,phaseName:ie,totalTime:Ee,disabled:!!Ye}}function P(ae,z,J){let Et;return ae instanceof Map?(Et=ae.get(z),Et||ae.set(z,Et=J)):(Et=ae[z],Et||(Et=ae[z]=J)),Et}function G(ae){const z=ae.indexOf(":");return[ae.substring(1,z),ae.substr(z+1)]}let it=(ae,z)=>!1,q=(ae,z,J)=>[];(n()||"undefined"!=typeof Element)&&(it=t()?(ae,z)=>{for(;z&&z!==document.documentElement;){if(z===ae)return!0;z=z.parentNode||z.host}return!1}:(ae,z)=>ae.contains(z),q=(ae,z,J)=>{let Et=[];if(J){const ie=ae.querySelectorAll(z);for(let Ee=0;Ee<ie.length;Ee++)Et.push(ie[Ee])}else{const ie=ae.querySelector(z);ie&&Et.push(ie)}return Et});let gt=null,wt=!1;function Bt(ae){gt||(gt=("undefined"!=typeof document?document.body:null)||{},wt=!!gt.style&&"WebkitAppearance"in gt.style);let z=!0;return gt.style&&!function(ae){return"ebkit"==ae.substring(1,6)}(ae)&&(z=ae in gt.style,!z&&wt&&(z="Webkit"+ae.charAt(0).toUpperCase()+ae.substr(1)in gt.style)),z}const It=it,St=q;function lt(ae){const z={};return Object.keys(ae).forEach(J=>{const Et=J.replace(/([a-z])([A-Z])/g,"$1-$2");z[Et]=ae[J]}),z}let ft=(()=>{class ae{validateStyleProperty(J){return Bt(J)}matchesElement(J,Et){return!1}containsElement(J,Et){return It(J,Et)}query(J,Et,ie){return St(J,Et,ie)}computeStyle(J,Et,ie){return ie||""}animate(J,Et,ie,Ee,Ye,$e=[],yi){return new e.ZN(ie,Ee)}}return ae.\u0275fac=function(J){return new(J||ae)},ae.\u0275prov=y.Yz7({token:ae,factory:ae.\u0275fac}),ae})(),ht=(()=>{class ae{}return ae.NOOP=new ft,ae})();const st="ng-enter",Z="ng-leave",At="ng-trigger",re=".ng-trigger",ve="ng-animating",oe=".ng-animating";function Ie(ae){if("number"==typeof ae)return ae;const z=ae.match(/^(-?[\.\d]+)(m?s)/);return!z||z.length<2?0:Re(parseFloat(z[1]),z[2])}function Re(ae,z){return"s"===z?1e3*ae:ae}function je(ae,z,J){return ae.hasOwnProperty("duration")?ae:function(ae,z,J){let ie,Ee=0,Ye="";if("string"==typeof ae){const $e=ae.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===$e)return z.push(`The provided timing value "${ae}" is invalid.`),{duration:0,delay:0,easing:""};ie=Re(parseFloat($e[1]),$e[2]);const yi=$e[3];null!=yi&&(Ee=Re(parseFloat(yi),$e[4]));const Hi=$e[5];Hi&&(Ye=Hi)}else ie=ae;if(!J){let $e=!1,yi=z.length;ie<0&&(z.push("Duration values below 0 are not allowed for this animation step."),$e=!0),Ee<0&&(z.push("Delay values below 0 are not allowed for this animation step."),$e=!0),$e&&z.splice(yi,0,`The provided timing value "${ae}" is invalid.`)}return{duration:ie,delay:Ee,easing:Ye}}(ae,z,J)}function Ze(ae,z={}){return Object.keys(ae).forEach(J=>{z[J]=ae[J]}),z}function ci(ae,z,J={}){if(z)for(let Et in ae)J[Et]=ae[Et];else Ze(ae,J);return J}function Wt(ae,z,J){return J?z+":"+J+";":""}function Ae(ae){let z="";for(let J=0;J<ae.style.length;J++){const Et=ae.style.item(J);z+=Wt(0,Et,ae.style.getPropertyValue(Et))}for(const J in ae.style)ae.style.hasOwnProperty(J)&&!J.startsWith("_")&&(z+=Wt(0,ue(J),ae.style[J]));ae.setAttribute("style",z)}function Qt(ae,z,J){ae.style&&(Object.keys(z).forEach(Et=>{const ie=Me(Et);J&&!J.hasOwnProperty(Et)&&(J[Et]=ae.style[ie]),ae.style[ie]=z[Et]}),n()&&Ae(ae))}function ee(ae,z){ae.style&&(Object.keys(z).forEach(J=>{const Et=Me(J);ae.style[Et]=""}),n()&&Ae(ae))}function Mt(ae){return Array.isArray(ae)?1==ae.length?ae[0]:(0,e.vP)(ae):ae}const ye=new RegExp("{{\\s*(.+?)\\s*}}","g");function ui(ae){let z=[];if("string"==typeof ae){let J;for(;J=ye.exec(ae);)z.push(J[1]);ye.lastIndex=0}return z}function Te(ae,z,J){const Et=ae.toString(),ie=Et.replace(ye,(Ee,Ye)=>{let $e=z[Ye];return z.hasOwnProperty(Ye)||(J.push(`Please provide a value for the animation param ${Ye}`),$e=""),$e.toString()});return ie==Et?ae:ie}function ce(ae){const z=[];let J=ae.next();for(;!J.done;)z.push(J.value),J=ae.next();return z}const te=/-+([a-z0-9])/g;function Me(ae){return ae.replace(te,(...z)=>z[1].toUpperCase())}function ue(ae){return ae.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function _e(ae,z){return 0===ae||0===z}function be(ae,z,J){const Et=Object.keys(J);if(Et.length&&z.length){let Ee=z[0],Ye=[];if(Et.forEach($e=>{Ee.hasOwnProperty($e)||Ye.push($e),Ee[$e]=J[$e]}),Ye.length)for(var ie=1;ie<z.length;ie++){let $e=z[ie];Ye.forEach(function(yi){$e[yi]=zt(ae,yi)})}}return z}function Dt(ae,z,J){switch(z.type){case 7:return ae.visitTrigger(z,J);case 0:return ae.visitState(z,J);case 1:return ae.visitTransition(z,J);case 2:return ae.visitSequence(z,J);case 3:return ae.visitGroup(z,J);case 4:return ae.visitAnimate(z,J);case 5:return ae.visitKeyframes(z,J);case 6:return ae.visitStyle(z,J);case 8:return ae.visitReference(z,J);case 9:return ae.visitAnimateChild(z,J);case 10:return ae.visitAnimateRef(z,J);case 11:return ae.visitQuery(z,J);case 12:return ae.visitStagger(z,J);default:throw new Error(`Unable to resolve animation metadata node #${z.type}`)}}function zt(ae,z){return window.getComputedStyle(ae)[z]}function Xe(ae,z){const J=[];return"string"==typeof ae?ae.split(/\s*,\s*/).forEach(Et=>function(ae,z,J){if(":"==ae[0]){const yi=function(ae,z){switch(ae){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(J,Et)=>parseFloat(Et)>parseFloat(J);case":decrement":return(J,Et)=>parseFloat(Et)<parseFloat(J);default:return z.push(`The transition alias value "${ae}" is not supported`),"* => *"}}(ae,J);if("function"==typeof yi)return void z.push(yi);ae=yi}const Et=ae.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==Et||Et.length<4)return J.push(`The provided transition expression "${ae}" is not supported`),z;const ie=Et[1],Ee=Et[2],Ye=Et[3];z.push(li(ie,Ye));"<"==Ee[0]&&!("*"==ie&&"*"==Ye)&&z.push(li(Ye,ie))}(Et,J,z)):J.push(ae),J}const mi=new Set(["true","1"]),on=new Set(["false","0"]);function li(ae,z){const J=mi.has(ae)||on.has(ae),Et=mi.has(z)||on.has(z);return(ie,Ee)=>{let Ye="*"==ae||ae==ie,$e="*"==z||z==Ee;return!Ye&&J&&"boolean"==typeof ie&&(Ye=ie?mi.has(ae):on.has(ae)),!$e&&Et&&"boolean"==typeof Ee&&($e=Ee?mi.has(z):on.has(z)),Ye&&$e}}const Ii=new RegExp("s*:selfs*,?","g");function ni(ae,z,J){return new Ce(ae).build(z,J)}class Ce{constructor(z){this._driver=z}build(z,J){const Et=new Pi(J);return this._resetContextStyleTimingState(Et),Dt(this,Mt(z),Et)}_resetContextStyleTimingState(z){z.currentQuerySelector="",z.collectedStyles={},z.collectedStyles[""]={},z.currentTime=0}visitTrigger(z,J){let Et=J.queryCount=0,ie=J.depCount=0;const Ee=[],Ye=[];return"@"==z.name.charAt(0)&&J.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),z.definitions.forEach($e=>{if(this._resetContextStyleTimingState(J),0==$e.type){const yi=$e,Hi=yi.name;Hi.toString().split(/\s*,\s*/).forEach(sn=>{yi.name=sn,Ee.push(this.visitState(yi,J))}),yi.name=Hi}else if(1==$e.type){const yi=this.visitTransition($e,J);Et+=yi.queryCount,ie+=yi.depCount,Ye.push(yi)}else J.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:z.name,states:Ee,transitions:Ye,queryCount:Et,depCount:ie,options:null}}visitState(z,J){const Et=this.visitStyle(z.styles,J),ie=z.options&&z.options.params||null;if(Et.containsDynamicStyles){const Ee=new Set,Ye=ie||{};if(Et.styles.forEach($e=>{if(ge($e)){const yi=$e;Object.keys(yi).forEach(Hi=>{ui(yi[Hi]).forEach(sn=>{Ye.hasOwnProperty(sn)||Ee.add(sn)})})}}),Ee.size){const $e=ce(Ee.values());J.errors.push(`state("${z.name}", ...) must define default values for all the following style substitutions: ${$e.join(", ")}`)}}return{type:0,name:z.name,style:Et,options:ie?{params:ie}:null}}visitTransition(z,J){J.queryCount=0,J.depCount=0;const Et=Dt(this,Mt(z.animation),J);return{type:1,matchers:Xe(z.expr,J.errors),animation:Et,queryCount:J.queryCount,depCount:J.depCount,options:dt(z.options)}}visitSequence(z,J){return{type:2,steps:z.steps.map(Et=>Dt(this,Et,J)),options:dt(z.options)}}visitGroup(z,J){const Et=J.currentTime;let ie=0;const Ee=z.steps.map(Ye=>{J.currentTime=Et;const $e=Dt(this,Ye,J);return ie=Math.max(ie,J.currentTime),$e});return J.currentTime=ie,{type:3,steps:Ee,options:dt(z.options)}}visitAnimate(z,J){const Et=function(ae,z){let J=null;if(ae.hasOwnProperty("duration"))J=ae;else if("number"==typeof ae)return Nt(je(ae,z).duration,0,"");const Et=ae;if(Et.split(/\s+/).some(Ee=>"{"==Ee.charAt(0)&&"{"==Ee.charAt(1))){const Ee=Nt(0,0,"");return Ee.dynamic=!0,Ee.strValue=Et,Ee}return J=J||je(Et,z),Nt(J.duration,J.delay,J.easing)}(z.timings,J.errors);J.currentAnimateTimings=Et;let ie,Ee=z.styles?z.styles:(0,e.oB)({});if(5==Ee.type)ie=this.visitKeyframes(Ee,J);else{let Ye=z.styles,$e=!1;if(!Ye){$e=!0;const Hi={};Et.easing&&(Hi.easing=Et.easing),Ye=(0,e.oB)(Hi)}J.currentTime+=Et.duration+Et.delay;const yi=this.visitStyle(Ye,J);yi.isEmptyStep=$e,ie=yi}return J.currentAnimateTimings=null,{type:4,timings:Et,style:ie,options:null}}visitStyle(z,J){const Et=this._makeStyleAst(z,J);return this._validateStyleAst(Et,J),Et}_makeStyleAst(z,J){const Et=[];Array.isArray(z.styles)?z.styles.forEach(Ye=>{"string"==typeof Ye?Ye==e.l3?Et.push(Ye):J.errors.push(`The provided style string value ${Ye} is not allowed.`):Et.push(Ye)}):Et.push(z.styles);let ie=!1,Ee=null;return Et.forEach(Ye=>{if(ge(Ye)){const $e=Ye,yi=$e.easing;if(yi&&(Ee=yi,delete $e.easing),!ie)for(let Hi in $e)if($e[Hi].toString().indexOf("{{")>=0){ie=!0;break}}}),{type:6,styles:Et,easing:Ee,offset:z.offset,containsDynamicStyles:ie,options:null}}_validateStyleAst(z,J){const Et=J.currentAnimateTimings;let ie=J.currentTime,Ee=J.currentTime;Et&&Ee>0&&(Ee-=Et.duration+Et.delay),z.styles.forEach(Ye=>{"string"!=typeof Ye&&Object.keys(Ye).forEach($e=>{if(!this._driver.validateStyleProperty($e))return void J.errors.push(`The provided animation property "${$e}" is not a supported CSS property for animations`);const yi=J.collectedStyles[J.currentQuerySelector],Hi=yi[$e];let sn=!0;Hi&&(Ee!=ie&&Ee>=Hi.startTime&&ie<=Hi.endTime&&(J.errors.push(`The CSS property "${$e}" that exists between the times of "${Hi.startTime}ms" and "${Hi.endTime}ms" is also being animated in a parallel animation between the times of "${Ee}ms" and "${ie}ms"`),sn=!1),Ee=Hi.startTime),sn&&(yi[$e]={startTime:Ee,endTime:ie}),J.options&&function(ae,z,J){const Et=z.params||{},ie=ui(ae);ie.length&&ie.forEach(Ee=>{Et.hasOwnProperty(Ee)||J.push(`Unable to resolve the local animation param ${Ee} in the given list of values`)})}(Ye[$e],J.options,J.errors)})})}visitKeyframes(z,J){const Et={type:5,styles:[],options:null};if(!J.currentAnimateTimings)return J.errors.push("keyframes() must be placed inside of a call to animate()"),Et;let Ee=0;const Ye=[];let $e=!1,yi=!1,Hi=0;const sn=z.steps.map(Wr=>{const Kr=this._makeStyleAst(Wr,J);let $o=null!=Kr.offset?Kr.offset:function(ae){if("string"==typeof ae)return null;let z=null;if(Array.isArray(ae))ae.forEach(J=>{if(ge(J)&&J.hasOwnProperty("offset")){const Et=J;z=parseFloat(Et.offset),delete Et.offset}});else if(ge(ae)&&ae.hasOwnProperty("offset")){const J=ae;z=parseFloat(J.offset),delete J.offset}return z}(Kr.styles),xo=0;return null!=$o&&(Ee++,xo=Kr.offset=$o),yi=yi||xo<0||xo>1,$e=$e||xo<Hi,Hi=xo,Ye.push(xo),Kr});yi&&J.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),$e&&J.errors.push("Please ensure that all keyframe offsets are in order");const fn=z.steps.length;let Yn=0;Ee>0&&Ee<fn?J.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==Ee&&(Yn=1/(fn-1));const cr=fn-1,Pn=J.currentTime,Fn=J.currentAnimateTimings,or=Fn.duration;return sn.forEach((Wr,Kr)=>{const $o=Yn>0?Kr==cr?1:Yn*Kr:Ye[Kr],xo=$o*or;J.currentTime=Pn+Fn.delay+xo,Fn.duration=xo,this._validateStyleAst(Wr,J),Wr.offset=$o,Et.styles.push(Wr)}),Et}visitReference(z,J){return{type:8,animation:Dt(this,Mt(z.animation),J),options:dt(z.options)}}visitAnimateChild(z,J){return J.depCount++,{type:9,options:dt(z.options)}}visitAnimateRef(z,J){return{type:10,animation:this.visitReference(z.animation,J),options:dt(z.options)}}visitQuery(z,J){const Et=J.currentQuerySelector,ie=z.options||{};J.queryCount++,J.currentQuery=z;const[Ee,Ye]=function(ae){const z=!!ae.split(/\s*,\s*/).find(J=>":self"==J);return z&&(ae=ae.replace(Ii,"")),ae=ae.replace(/@\*/g,re).replace(/@\w+/g,J=>re+"-"+J.substr(1)).replace(/:animating/g,oe),[ae,z]}(z.selector);J.currentQuerySelector=Et.length?Et+" "+Ee:Ee,P(J.collectedStyles,J.currentQuerySelector,{});const $e=Dt(this,Mt(z.animation),J);return J.currentQuery=null,J.currentQuerySelector=Et,{type:11,selector:Ee,limit:ie.limit||0,optional:!!ie.optional,includeSelf:Ye,animation:$e,originalSelector:z.selector,options:dt(z.options)}}visitStagger(z,J){J.currentQuery||J.errors.push("stagger() can only be used inside of query()");const Et="full"===z.timings?{duration:0,delay:0,easing:"full"}:je(z.timings,J.errors,!0);return{type:12,animation:Dt(this,Mt(z.animation),J),timings:Et,options:null}}}class Pi{constructor(z){this.errors=z,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function ge(ae){return!Array.isArray(ae)&&"object"==typeof ae}function dt(ae){return ae?(ae=Ze(ae)).params&&(ae.params=function(ae){return ae?Ze(ae):null}(ae.params)):ae={},ae}function Nt(ae,z,J){return{duration:ae,delay:z,easing:J}}function pe(ae,z,J,Et,ie,Ee,Ye=null,$e=!1){return{type:1,element:ae,keyframes:z,preStyleProps:J,postStyleProps:Et,duration:ie,delay:Ee,totalTime:ie+Ee,easing:Ye,subTimeline:$e}}class Le{constructor(){this._map=new Map}consume(z){let J=this._map.get(z);return J?this._map.delete(z):J=[],J}append(z,J){let Et=this._map.get(z);Et||this._map.set(z,Et=[]),Et.push(...J)}has(z){return this._map.has(z)}clear(){this._map.clear()}}const Sn=new RegExp(":enter","g"),pi=new RegExp(":leave","g");function Ke(ae,z,J,Et,ie,Ee={},Ye={},$e,yi,Hi=[]){return(new Pe).buildKeyframes(ae,z,J,Et,ie,Ee,Ye,$e,yi,Hi)}class Pe{buildKeyframes(z,J,Et,ie,Ee,Ye,$e,yi,Hi,sn=[]){Hi=Hi||new Le;const fn=new Oi(z,J,Hi,ie,Ee,sn,[]);fn.options=yi,fn.currentTimeline.setStyles([Ye],null,fn.errors,yi),Dt(this,Et,fn);const Yn=fn.timelines.filter(cr=>cr.containsAnimation());if(Yn.length&&Object.keys($e).length){const cr=Yn[Yn.length-1];cr.allowOnlyTimelineStyles()||cr.setStyles([$e],null,fn.errors,yi)}return Yn.length?Yn.map(cr=>cr.buildKeyframes()):[pe(J,[],[],[],0,0,"",!1)]}visitTrigger(z,J){}visitState(z,J){}visitTransition(z,J){}visitAnimateChild(z,J){const Et=J.subInstructions.consume(J.element);if(Et){const ie=J.createSubContext(z.options),Ee=J.currentTimeline.currentTime,Ye=this._visitSubInstructions(Et,ie,ie.options);Ee!=Ye&&J.transformIntoNewTimeline(Ye)}J.previousNode=z}visitAnimateRef(z,J){const Et=J.createSubContext(z.options);Et.transformIntoNewTimeline(),this.visitReference(z.animation,Et),J.transformIntoNewTimeline(Et.currentTimeline.currentTime),J.previousNode=z}_visitSubInstructions(z,J,Et){let Ee=J.currentTimeline.currentTime;const Ye=null!=Et.duration?Ie(Et.duration):null,$e=null!=Et.delay?Ie(Et.delay):null;return 0!==Ye&&z.forEach(yi=>{const Hi=J.appendInstructionToTimeline(yi,Ye,$e);Ee=Math.max(Ee,Hi.duration+Hi.delay)}),Ee}visitReference(z,J){J.updateOptions(z.options,!0),Dt(this,z.animation,J),J.previousNode=z}visitSequence(z,J){const Et=J.subContextCount;let ie=J;const Ee=z.options;if(Ee&&(Ee.params||Ee.delay)&&(ie=J.createSubContext(Ee),ie.transformIntoNewTimeline(),null!=Ee.delay)){6==ie.previousNode.type&&(ie.currentTimeline.snapshotCurrentStyles(),ie.previousNode=di);const Ye=Ie(Ee.delay);ie.delayNextStep(Ye)}z.steps.length&&(z.steps.forEach(Ye=>Dt(this,Ye,ie)),ie.currentTimeline.applyStylesToKeyframe(),ie.subContextCount>Et&&ie.transformIntoNewTimeline()),J.previousNode=z}visitGroup(z,J){const Et=[];let ie=J.currentTimeline.currentTime;const Ee=z.options&&z.options.delay?Ie(z.options.delay):0;z.steps.forEach(Ye=>{const $e=J.createSubContext(z.options);Ee&&$e.delayNextStep(Ee),Dt(this,Ye,$e),ie=Math.max(ie,$e.currentTimeline.currentTime),Et.push($e.currentTimeline)}),Et.forEach(Ye=>J.currentTimeline.mergeTimelineCollectedStyles(Ye)),J.transformIntoNewTimeline(ie),J.previousNode=z}_visitTiming(z,J){if(z.dynamic){const Et=z.strValue;return je(J.params?Te(Et,J.params,J.errors):Et,J.errors)}return{duration:z.duration,delay:z.delay,easing:z.easing}}visitAnimate(z,J){const Et=J.currentAnimateTimings=this._visitTiming(z.timings,J),ie=J.currentTimeline;Et.delay&&(J.incrementTime(Et.delay),ie.snapshotCurrentStyles());const Ee=z.style;5==Ee.type?this.visitKeyframes(Ee,J):(J.incrementTime(Et.duration),this.visitStyle(Ee,J),ie.applyStylesToKeyframe()),J.currentAnimateTimings=null,J.previousNode=z}visitStyle(z,J){const Et=J.currentTimeline,ie=J.currentAnimateTimings;!ie&&Et.getCurrentStyleProperties().length&&Et.forwardFrame();const Ee=ie&&ie.easing||z.easing;z.isEmptyStep?Et.applyEmptyStep(Ee):Et.setStyles(z.styles,Ee,J.errors,J.options),J.previousNode=z}visitKeyframes(z,J){const Et=J.currentAnimateTimings,ie=J.currentTimeline.duration,Ee=Et.duration,$e=J.createSubContext().currentTimeline;$e.easing=Et.easing,z.styles.forEach(yi=>{$e.forwardTime((yi.offset||0)*Ee),$e.setStyles(yi.styles,yi.easing,J.errors,J.options),$e.applyStylesToKeyframe()}),J.currentTimeline.mergeTimelineCollectedStyles($e),J.transformIntoNewTimeline(ie+Ee),J.previousNode=z}visitQuery(z,J){const Et=J.currentTimeline.currentTime,ie=z.options||{},Ee=ie.delay?Ie(ie.delay):0;Ee&&(6===J.previousNode.type||0==Et&&J.currentTimeline.getCurrentStyleProperties().length)&&(J.currentTimeline.snapshotCurrentStyles(),J.previousNode=di);let Ye=Et;const $e=J.invokeQuery(z.selector,z.originalSelector,z.limit,z.includeSelf,!!ie.optional,J.errors);J.currentQueryTotal=$e.length;let yi=null;$e.forEach((Hi,sn)=>{J.currentQueryIndex=sn;const fn=J.createSubContext(z.options,Hi);Ee&&fn.delayNextStep(Ee),Hi===J.element&&(yi=fn.currentTimeline),Dt(this,z.animation,fn),fn.currentTimeline.applyStylesToKeyframe(),Ye=Math.max(Ye,fn.currentTimeline.currentTime)}),J.currentQueryIndex=0,J.currentQueryTotal=0,J.transformIntoNewTimeline(Ye),yi&&(J.currentTimeline.mergeTimelineCollectedStyles(yi),J.currentTimeline.snapshotCurrentStyles()),J.previousNode=z}visitStagger(z,J){const Et=J.parentContext,ie=J.currentTimeline,Ee=z.timings,Ye=Math.abs(Ee.duration),$e=Ye*(J.currentQueryTotal-1);let yi=Ye*J.currentQueryIndex;switch(Ee.duration<0?"reverse":Ee.easing){case"reverse":yi=$e-yi;break;case"full":yi=Et.currentStaggerTime}const sn=J.currentTimeline;yi&&sn.delayNextStep(yi);const fn=sn.currentTime;Dt(this,z.animation,J),J.previousNode=z,Et.currentStaggerTime=ie.currentTime-fn+(ie.startTime-Et.currentTimeline.startTime)}}const di={};class Oi{constructor(z,J,Et,ie,Ee,Ye,$e,yi){this._driver=z,this.element=J,this.subInstructions=Et,this._enterClassName=ie,this._leaveClassName=Ee,this.errors=Ye,this.timelines=$e,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=di,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=yi||new dn(this._driver,J,0),$e.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(z,J){if(!z)return;const Et=z;let ie=this.options;null!=Et.duration&&(ie.duration=Ie(Et.duration)),null!=Et.delay&&(ie.delay=Ie(Et.delay));const Ee=Et.params;if(Ee){let Ye=ie.params;Ye||(Ye=this.options.params={}),Object.keys(Ee).forEach($e=>{(!J||!Ye.hasOwnProperty($e))&&(Ye[$e]=Te(Ee[$e],Ye,this.errors))})}}_copyOptions(){const z={};if(this.options){const J=this.options.params;if(J){const Et=z.params={};Object.keys(J).forEach(ie=>{Et[ie]=J[ie]})}}return z}createSubContext(z=null,J,Et){const ie=J||this.element,Ee=new Oi(this._driver,ie,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(ie,Et||0));return Ee.previousNode=this.previousNode,Ee.currentAnimateTimings=this.currentAnimateTimings,Ee.options=this._copyOptions(),Ee.updateOptions(z),Ee.currentQueryIndex=this.currentQueryIndex,Ee.currentQueryTotal=this.currentQueryTotal,Ee.parentContext=this,this.subContextCount++,Ee}transformIntoNewTimeline(z){return this.previousNode=di,this.currentTimeline=this.currentTimeline.fork(this.element,z),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(z,J,Et){const ie={duration:null!=J?J:z.duration,delay:this.currentTimeline.currentTime+(null!=Et?Et:0)+z.delay,easing:""},Ee=new Rn(this._driver,z.element,z.keyframes,z.preStyleProps,z.postStyleProps,ie,z.stretchStartingKeyframe);return this.timelines.push(Ee),ie}incrementTime(z){this.currentTimeline.forwardTime(this.currentTimeline.duration+z)}delayNextStep(z){z>0&&this.currentTimeline.delayNextStep(z)}invokeQuery(z,J,Et,ie,Ee,Ye){let $e=[];if(ie&&$e.push(this.element),z.length>0){z=(z=z.replace(Sn,"."+this._enterClassName)).replace(pi,"."+this._leaveClassName);let Hi=this._driver.query(this.element,z,1!=Et);0!==Et&&(Hi=Et<0?Hi.slice(Hi.length+Et,Hi.length):Hi.slice(0,Et)),$e.push(...Hi)}return!Ee&&0==$e.length&&Ye.push(`\`query("${J}")\` returned zero elements. (Use \`query("${J}", { optional: true })\` if you wish to allow this.)`),$e}}class dn{constructor(z,J,Et,ie){this._driver=z,this.element=J,this.startTime=Et,this._elementTimelineStylesLookup=ie,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(J),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(J,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(z){const J=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||J?(this.forwardTime(this.currentTime+z),J&&this.snapshotCurrentStyles()):this.startTime+=z}fork(z,J){return this.applyStylesToKeyframe(),new dn(this._driver,z,J||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(z){this.applyStylesToKeyframe(),this.duration=z,this._loadKeyframe()}_updateStyle(z,J){this._localTimelineStyles[z]=J,this._globalTimelineStyles[z]=J,this._styleSummary[z]={time:this.currentTime,value:J}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(z){z&&(this._previousKeyframe.easing=z),Object.keys(this._globalTimelineStyles).forEach(J=>{this._backFill[J]=this._globalTimelineStyles[J]||e.l3,this._currentKeyframe[J]=e.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(z,J,Et,ie){J&&(this._previousKeyframe.easing=J);const Ee=ie&&ie.params||{},Ye=function(ae,z){const J={};let Et;return ae.forEach(ie=>{"*"===ie?(Et=Et||Object.keys(z),Et.forEach(Ee=>{J[Ee]=e.l3})):ci(ie,!1,J)}),J}(z,this._globalTimelineStyles);Object.keys(Ye).forEach($e=>{const yi=Te(Ye[$e],Ee,Et);this._pendingStyles[$e]=yi,this._localTimelineStyles.hasOwnProperty($e)||(this._backFill[$e]=this._globalTimelineStyles.hasOwnProperty($e)?this._globalTimelineStyles[$e]:e.l3),this._updateStyle($e,yi)})}applyStylesToKeyframe(){const z=this._pendingStyles,J=Object.keys(z);0!=J.length&&(this._pendingStyles={},J.forEach(Et=>{this._currentKeyframe[Et]=z[Et]}),Object.keys(this._localTimelineStyles).forEach(Et=>{this._currentKeyframe.hasOwnProperty(Et)||(this._currentKeyframe[Et]=this._localTimelineStyles[Et])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(z=>{const J=this._localTimelineStyles[z];this._pendingStyles[z]=J,this._updateStyle(z,J)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const z=[];for(let J in this._currentKeyframe)z.push(J);return z}mergeTimelineCollectedStyles(z){Object.keys(z._styleSummary).forEach(J=>{const Et=this._styleSummary[J],ie=z._styleSummary[J];(!Et||ie.time>Et.time)&&this._updateStyle(J,ie.value)})}buildKeyframes(){this.applyStylesToKeyframe();const z=new Set,J=new Set,Et=1===this._keyframes.size&&0===this.duration;let ie=[];this._keyframes.forEach(($e,yi)=>{const Hi=ci($e,!0);Object.keys(Hi).forEach(sn=>{const fn=Hi[sn];fn==e.k1?z.add(sn):fn==e.l3&&J.add(sn)}),Et||(Hi.offset=yi/this.duration),ie.push(Hi)});const Ee=z.size?ce(z.values()):[],Ye=J.size?ce(J.values()):[];if(Et){const $e=ie[0],yi=Ze($e);$e.offset=0,yi.offset=1,ie=[$e,yi]}return pe(this.element,ie,Ee,Ye,this.duration,this.startTime,this.easing,!1)}}class Rn extends dn{constructor(z,J,Et,ie,Ee,Ye,$e=!1){super(z,J,Ye.delay),this.keyframes=Et,this.preStyleProps=ie,this.postStyleProps=Ee,this._stretchStartingKeyframe=$e,this.timings={duration:Ye.duration,delay:Ye.delay,easing:Ye.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let z=this.keyframes,{delay:J,duration:Et,easing:ie}=this.timings;if(this._stretchStartingKeyframe&&J){const Ee=[],Ye=Et+J,$e=J/Ye,yi=ci(z[0],!1);yi.offset=0,Ee.push(yi);const Hi=ci(z[0],!1);Hi.offset=nr($e),Ee.push(Hi);const sn=z.length-1;for(let fn=1;fn<=sn;fn++){let Yn=ci(z[fn],!1);Yn.offset=nr((J+Yn.offset*Et)/Ye),Ee.push(Yn)}Et=Ye,J=0,ie="",z=Ee}return pe(this.element,z,this.preStyleProps,this.postStyleProps,Et,J,ie,!0)}}function nr(ae,z=3){const J=Math.pow(10,z-1);return Math.round(ae*J)/J}class _o{}class jr extends _o{normalizePropertyName(z,J){return Me(z)}normalizeStyleValue(z,J,Et,ie){let Ee="";const Ye=Et.toString().trim();if(pr[J]&&0!==Et&&"0"!==Et)if("number"==typeof Et)Ee="px";else{const $e=Et.match(/^[+-]?[\d\.]+([a-z]*)$/);$e&&0==$e[1].length&&ie.push(`Please provide a CSS unit value for ${z}:${Et}`)}return Ye+Ee}}const pr=(()=>function(ae){const z={};return ae.forEach(J=>z[J]=!0),z}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Zn(ae,z,J,Et,ie,Ee,Ye,$e,yi,Hi,sn,fn,Yn){return{type:0,element:ae,triggerName:z,isRemovalTransition:ie,fromState:J,fromStyles:Ee,toState:Et,toStyles:Ye,timelines:$e,queriedElements:yi,preStyleProps:Hi,postStyleProps:sn,totalTime:fn,errors:Yn}}const Di={};class An{constructor(z,J,Et){this._triggerName=z,this.ast=J,this._stateStyles=Et}match(z,J,Et,ie){return function(ae,z,J,Et,ie){return ae.some(Ee=>Ee(z,J,Et,ie))}(this.ast.matchers,z,J,Et,ie)}buildStyles(z,J,Et){const ie=this._stateStyles["*"],Ee=this._stateStyles[z],Ye=ie?ie.buildStyles(J,Et):{};return Ee?Ee.buildStyles(J,Et):Ye}build(z,J,Et,ie,Ee,Ye,$e,yi,Hi,sn){const fn=[],Yn=this.ast.options&&this.ast.options.params||Di,Pn=this.buildStyles(Et,$e&&$e.params||Di,fn),Fn=yi&&yi.params||Di,or=this.buildStyles(ie,Fn,fn),Wr=new Set,Kr=new Map,$o=new Map,xo="void"===ie,Ws={params:Object.assign(Object.assign({},Yn),Fn)},ws=sn?[]:Ke(z,J,this.ast.animation,Ee,Ye,Pn,or,Ws,Hi,fn);let ko=0;if(ws.forEach(Rs=>{ko=Math.max(Rs.duration+Rs.delay,ko)}),fn.length)return Zn(J,this._triggerName,Et,ie,xo,Pn,or,[],[],Kr,$o,ko,fn);ws.forEach(Rs=>{const na=Rs.element,$a=P(Kr,na,{});Rs.preStyleProps.forEach(Ds=>$a[Ds]=!0);const oo=P($o,na,{});Rs.postStyleProps.forEach(Ds=>oo[Ds]=!0),na!==J&&Wr.add(na)});const zs=ce(Wr.values());return Zn(J,this._triggerName,Et,ie,xo,Pn,or,ws,zs,Kr,$o,ko)}}class Mr{constructor(z,J,Et){this.styles=z,this.defaultParams=J,this.normalizer=Et}buildStyles(z,J){const Et={},ie=Ze(this.defaultParams);return Object.keys(z).forEach(Ee=>{const Ye=z[Ee];null!=Ye&&(ie[Ee]=Ye)}),this.styles.styles.forEach(Ee=>{if("string"!=typeof Ee){const Ye=Ee;Object.keys(Ye).forEach($e=>{let yi=Ye[$e];yi.length>1&&(yi=Te(yi,ie,J));const Hi=this.normalizer.normalizePropertyName($e,J);yi=this.normalizer.normalizeStyleValue($e,Hi,yi,J),Et[Hi]=yi})}}),Et}}class Sr{constructor(z,J,Et){this.name=z,this.ast=J,this._normalizer=Et,this.transitionFactories=[],this.states={},J.states.forEach(ie=>{this.states[ie.name]=new Mr(ie.style,ie.options&&ie.options.params||{},Et)}),Tr(this.states,"true","1"),Tr(this.states,"false","0"),J.transitions.forEach(ie=>{this.transitionFactories.push(new An(z,ie,this.states))}),this.fallbackTransition=function(ae,z,J){return new An(ae,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ye,$e)=>!0],options:null,queryCount:0,depCount:0},z)}(z,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(z,J,Et,ie){return this.transitionFactories.find(Ye=>Ye.match(z,J,Et,ie))||null}matchStyles(z,J,Et){return this.fallbackTransition.buildStyles(z,J,Et)}}function Tr(ae,z,J){ae.hasOwnProperty(z)?ae.hasOwnProperty(J)||(ae[J]=ae[z]):ae.hasOwnProperty(J)&&(ae[z]=ae[J])}const Ui=new Le;class On{constructor(z,J,Et){this.bodyNode=z,this._driver=J,this._normalizer=Et,this._animations={},this._playersById={},this.players=[]}register(z,J){const Et=[],ie=ni(this._driver,J,Et);if(Et.length)throw new Error(`Unable to build the animation due to the following errors: ${Et.join("\n")}`);this._animations[z]=ie}_buildPlayer(z,J,Et){const ie=z.element,Ee=s(0,this._normalizer,0,z.keyframes,J,Et);return this._driver.animate(ie,Ee,z.duration,z.delay,z.easing,[],!0)}create(z,J,Et={}){const ie=[],Ee=this._animations[z];let Ye;const $e=new Map;if(Ee?(Ye=Ke(this._driver,J,Ee,st,Z,{},{},Et,Ui,ie),Ye.forEach(sn=>{const fn=P($e,sn.element,{});sn.postStyleProps.forEach(Yn=>fn[Yn]=null)})):(ie.push("The requested animation doesn't exist or has already been destroyed"),Ye=[]),ie.length)throw new Error(`Unable to create the animation due to the following errors: ${ie.join("\n")}`);$e.forEach((sn,fn)=>{Object.keys(sn).forEach(Yn=>{sn[Yn]=this._driver.computeStyle(fn,Yn,e.l3)})});const Hi=r(Ye.map(sn=>{const fn=$e.get(sn.element);return this._buildPlayer(sn,{},fn)}));return this._playersById[z]=Hi,Hi.onDestroy(()=>this.destroy(z)),this.players.push(Hi),Hi}destroy(z){const J=this._getPlayer(z);J.destroy(),delete this._playersById[z];const Et=this.players.indexOf(J);Et>=0&&this.players.splice(Et,1)}_getPlayer(z){const J=this._playersById[z];if(!J)throw new Error(`Unable to find the timeline player referenced by ${z}`);return J}listen(z,J,Et,ie){const Ee=D(J,"","","");return c(this._getPlayer(z),Et,Ee,ie),()=>{}}command(z,J,Et,ie){if("register"==Et)return void this.register(z,ie[0]);if("create"==Et)return void this.create(z,J,ie[0]||{});const Ee=this._getPlayer(z);switch(Et){case"play":Ee.play();break;case"pause":Ee.pause();break;case"reset":Ee.reset();break;case"restart":Ee.restart();break;case"finish":Ee.finish();break;case"init":Ee.init();break;case"setPosition":Ee.setPosition(parseFloat(ie[0]));break;case"destroy":this.destroy(z)}}}const Nn="ng-animate-queued",Fe="ng-animate-disabled",Qn=[],qn={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Jn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Tn="__ng_removed";class Jo{constructor(z,J=""){this.namespaceId=J;const Et=z&&z.hasOwnProperty("value");if(this.value=null!=(ae=Et?z.value:z)?ae:null,Et){const Ee=Ze(z);delete Ee.value,this.options=Ee}else this.options={};var ae;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(z){const J=z.params;if(J){const Et=this.options.params;Object.keys(J).forEach(ie=>{null==Et[ie]&&(Et[ie]=J[ie])})}}}const no="void",ro=new Jo(no);class vo{constructor(z,J,Et){this.id=z,this.hostElement=J,this._engine=Et,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+z,Cr(J,this._hostClassName)}listen(z,J,Et,ie){if(!this._triggers.hasOwnProperty(J))throw new Error(`Unable to listen on the animation trigger event "${Et}" because the animation trigger "${J}" doesn't exist!`);if(null==Et||0==Et.length)throw new Error(`Unable to listen on the animation trigger "${J}" because the provided event is undefined!`);if("start"!=(ae=Et)&&"done"!=ae)throw new Error(`The provided animation trigger event "${Et}" for the animation trigger "${J}" is not supported!`);var ae;const Ee=P(this._elementListeners,z,[]),Ye={name:J,phase:Et,callback:ie};Ee.push(Ye);const $e=P(this._engine.statesByElement,z,{});return $e.hasOwnProperty(J)||(Cr(z,At),Cr(z,At+"-"+J),$e[J]=ro),()=>{this._engine.afterFlush(()=>{const yi=Ee.indexOf(Ye);yi>=0&&Ee.splice(yi,1),this._triggers[J]||delete $e[J]})}}register(z,J){return!this._triggers[z]&&(this._triggers[z]=J,!0)}_getTrigger(z){const J=this._triggers[z];if(!J)throw new Error(`The provided animation trigger "${z}" has not been registered!`);return J}trigger(z,J,Et,ie=!0){const Ee=this._getTrigger(J),Ye=new Hs(this.id,J,z);let $e=this._engine.statesByElement.get(z);$e||(Cr(z,At),Cr(z,At+"-"+J),this._engine.statesByElement.set(z,$e={}));let yi=$e[J];const Hi=new Jo(Et,this.id);if(!(Et&&Et.hasOwnProperty("value"))&&yi&&Hi.absorbOptions(yi.options),$e[J]=Hi,yi||(yi=ro),Hi.value!==no&&yi.value===Hi.value){if(!function(ae,z){const J=Object.keys(ae),Et=Object.keys(z);if(J.length!=Et.length)return!1;for(let ie=0;ie<J.length;ie++){const Ee=J[ie];if(!z.hasOwnProperty(Ee)||ae[Ee]!==z[Ee])return!1}return!0}(yi.params,Hi.params)){const Fn=[],or=Ee.matchStyles(yi.value,yi.params,Fn),Wr=Ee.matchStyles(Hi.value,Hi.params,Fn);Fn.length?this._engine.reportError(Fn):this._engine.afterFlush(()=>{ee(z,or),Qt(z,Wr)})}return}const Yn=P(this._engine.playersByElement,z,[]);Yn.forEach(Fn=>{Fn.namespaceId==this.id&&Fn.triggerName==J&&Fn.queued&&Fn.destroy()});let cr=Ee.matchTransition(yi.value,Hi.value,z,Hi.params),Pn=!1;if(!cr){if(!ie)return;cr=Ee.fallbackTransition,Pn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:z,triggerName:J,transition:cr,fromState:yi,toState:Hi,player:Ye,isFallbackTransition:Pn}),Pn||(Cr(z,Nn),Ye.onStart(()=>{Qs(z,Nn)})),Ye.onDone(()=>{let Fn=this.players.indexOf(Ye);Fn>=0&&this.players.splice(Fn,1);const or=this._engine.playersByElement.get(z);if(or){let Wr=or.indexOf(Ye);Wr>=0&&or.splice(Wr,1)}}),this.players.push(Ye),Yn.push(Ye),Ye}deregister(z){delete this._triggers[z],this._engine.statesByElement.forEach((J,Et)=>{delete J[z]}),this._elementListeners.forEach((J,Et)=>{this._elementListeners.set(Et,J.filter(ie=>ie.name!=z))})}clearElementCache(z){this._engine.statesByElement.delete(z),this._elementListeners.delete(z);const J=this._engine.playersByElement.get(z);J&&(J.forEach(Et=>Et.destroy()),this._engine.playersByElement.delete(z))}_signalRemovalForInnerTriggers(z,J){const Et=this._engine.driver.query(z,re,!0);Et.forEach(ie=>{if(ie[Tn])return;const Ee=this._engine.fetchNamespacesByElement(ie);Ee.size?Ee.forEach(Ye=>Ye.triggerLeaveAnimation(ie,J,!1,!0)):this.clearElementCache(ie)}),this._engine.afterFlushAnimationsDone(()=>Et.forEach(ie=>this.clearElementCache(ie)))}triggerLeaveAnimation(z,J,Et,ie){const Ee=this._engine.statesByElement.get(z);if(Ee){const Ye=[];if(Object.keys(Ee).forEach($e=>{if(this._triggers[$e]){const yi=this.trigger(z,$e,no,ie);yi&&Ye.push(yi)}}),Ye.length)return this._engine.markElementAsRemoved(this.id,z,!0,J),Et&&r(Ye).onDone(()=>this._engine.processLeaveNode(z)),!0}return!1}prepareLeaveAnimationListeners(z){const J=this._elementListeners.get(z),Et=this._engine.statesByElement.get(z);if(J&&Et){const ie=new Set;J.forEach(Ee=>{const Ye=Ee.name;if(ie.has(Ye))return;ie.add(Ye);const yi=this._triggers[Ye].fallbackTransition,Hi=Et[Ye]||ro,sn=new Jo(no),fn=new Hs(this.id,Ye,z);this._engine.totalQueuedPlayers++,this._queue.push({element:z,triggerName:Ye,transition:yi,fromState:Hi,toState:sn,player:fn,isFallbackTransition:!0})})}}removeNode(z,J){const Et=this._engine;if(z.childElementCount&&this._signalRemovalForInnerTriggers(z,J),this.triggerLeaveAnimation(z,J,!0))return;let ie=!1;if(Et.totalAnimations){const Ee=Et.players.length?Et.playersByQueriedElement.get(z):[];if(Ee&&Ee.length)ie=!0;else{let Ye=z;for(;Ye=Ye.parentNode;)if(Et.statesByElement.get(Ye)){ie=!0;break}}}if(this.prepareLeaveAnimationListeners(z),ie)Et.markElementAsRemoved(this.id,z,!1,J);else{const Ee=z[Tn];(!Ee||Ee===qn)&&(Et.afterFlush(()=>this.clearElementCache(z)),Et.destroyInnerAnimations(z),Et._onRemovalComplete(z,J))}}insertNode(z,J){Cr(z,this._hostClassName)}drainQueuedTransitions(z){const J=[];return this._queue.forEach(Et=>{const ie=Et.player;if(ie.destroyed)return;const Ee=Et.element,Ye=this._elementListeners.get(Ee);Ye&&Ye.forEach($e=>{if($e.name==Et.triggerName){const yi=D(Ee,Et.triggerName,Et.fromState.value,Et.toState.value);yi._data=z,c(Et.player,$e.phase,yi,$e.callback)}}),ie.markedForDestroy?this._engine.afterFlush(()=>{ie.destroy()}):J.push(Et)}),this._queue=[],J.sort((Et,ie)=>{const Ee=Et.transition.ast.depCount,Ye=ie.transition.ast.depCount;return 0==Ee||0==Ye?Ee-Ye:this._engine.driver.containsElement(Et.element,ie.element)?1:-1})}destroy(z){this.players.forEach(J=>J.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,z)}elementContainsData(z){let J=!1;return this._elementListeners.has(z)&&(J=!0),J=!!this._queue.find(Et=>Et.element===z)||J,J}}class Bs{constructor(z,J,Et){this.bodyNode=z,this.driver=J,this._normalizer=Et,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(ie,Ee)=>{}}_onRemovalComplete(z,J){this.onRemovalComplete(z,J)}get queuedPlayers(){const z=[];return this._namespaceList.forEach(J=>{J.players.forEach(Et=>{Et.queued&&z.push(Et)})}),z}createNamespace(z,J){const Et=new vo(z,J,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,J)?this._balanceNamespaceList(Et,J):(this.newHostElements.set(J,Et),this.collectEnterElement(J)),this._namespaceLookup[z]=Et}_balanceNamespaceList(z,J){const Et=this._namespaceList.length-1;if(Et>=0){let ie=!1;for(let Ee=Et;Ee>=0;Ee--)if(this.driver.containsElement(this._namespaceList[Ee].hostElement,J)){this._namespaceList.splice(Ee+1,0,z),ie=!0;break}ie||this._namespaceList.splice(0,0,z)}else this._namespaceList.push(z);return this.namespacesByHostElement.set(J,z),z}register(z,J){let Et=this._namespaceLookup[z];return Et||(Et=this.createNamespace(z,J)),Et}registerTrigger(z,J,Et){let ie=this._namespaceLookup[z];ie&&ie.register(J,Et)&&this.totalAnimations++}destroy(z,J){if(!z)return;const Et=this._fetchNamespace(z);this.afterFlush(()=>{this.namespacesByHostElement.delete(Et.hostElement),delete this._namespaceLookup[z];const ie=this._namespaceList.indexOf(Et);ie>=0&&this._namespaceList.splice(ie,1)}),this.afterFlushAnimationsDone(()=>Et.destroy(J))}_fetchNamespace(z){return this._namespaceLookup[z]}fetchNamespacesByElement(z){const J=new Set,Et=this.statesByElement.get(z);if(Et){const ie=Object.keys(Et);for(let Ee=0;Ee<ie.length;Ee++){const Ye=Et[ie[Ee]].namespaceId;if(Ye){const $e=this._fetchNamespace(Ye);$e&&J.add($e)}}}return J}trigger(z,J,Et,ie){if(Go(J)){const Ee=this._fetchNamespace(z);if(Ee)return Ee.trigger(J,Et,ie),!0}return!1}insertNode(z,J,Et,ie){if(!Go(J))return;const Ee=J[Tn];if(Ee&&Ee.setForRemoval){Ee.setForRemoval=!1,Ee.setForMove=!0;const Ye=this.collectedLeaveElements.indexOf(J);Ye>=0&&this.collectedLeaveElements.splice(Ye,1)}if(z){const Ye=this._fetchNamespace(z);Ye&&Ye.insertNode(J,Et)}ie&&this.collectEnterElement(J)}collectEnterElement(z){this.collectedEnterElements.push(z)}markElementAsDisabled(z,J){J?this.disabledNodes.has(z)||(this.disabledNodes.add(z),Cr(z,Fe)):this.disabledNodes.has(z)&&(this.disabledNodes.delete(z),Qs(z,Fe))}removeNode(z,J,Et,ie){if(Go(J)){const Ee=z?this._fetchNamespace(z):null;if(Ee?Ee.removeNode(J,ie):this.markElementAsRemoved(z,J,!1,ie),Et){const Ye=this.namespacesByHostElement.get(J);Ye&&Ye.id!==z&&Ye.removeNode(J,ie)}}else this._onRemovalComplete(J,ie)}markElementAsRemoved(z,J,Et,ie){this.collectedLeaveElements.push(J),J[Tn]={namespaceId:z,setForRemoval:ie,hasAnimation:Et,removedBeforeQueried:!1}}listen(z,J,Et,ie,Ee){return Go(J)?this._fetchNamespace(z).listen(J,Et,ie,Ee):()=>{}}_buildInstruction(z,J,Et,ie,Ee){return z.transition.build(this.driver,z.element,z.fromState.value,z.toState.value,Et,ie,z.fromState.options,z.toState.options,J,Ee)}destroyInnerAnimations(z){let J=this.driver.query(z,re,!0);J.forEach(Et=>this.destroyActiveAnimationsForElement(Et)),0!=this.playersByQueriedElement.size&&(J=this.driver.query(z,oe,!0),J.forEach(Et=>this.finishActiveQueriedAnimationOnElement(Et)))}destroyActiveAnimationsForElement(z){const J=this.playersByElement.get(z);J&&J.forEach(Et=>{Et.queued?Et.markedForDestroy=!0:Et.destroy()})}finishActiveQueriedAnimationOnElement(z){const J=this.playersByQueriedElement.get(z);J&&J.forEach(Et=>Et.finish())}whenRenderingDone(){return new Promise(z=>{if(this.players.length)return r(this.players).onDone(()=>z());z()})}processLeaveNode(z){var J;const Et=z[Tn];if(Et&&Et.setForRemoval){if(z[Tn]=qn,Et.namespaceId){this.destroyInnerAnimations(z);const ie=this._fetchNamespace(Et.namespaceId);ie&&ie.clearElementCache(z)}this._onRemovalComplete(z,Et.setForRemoval)}(null===(J=z.classList)||void 0===J?void 0:J.contains(Fe))&&this.markElementAsDisabled(z,!1),this.driver.query(z,".ng-animate-disabled",!0).forEach(ie=>{this.markElementAsDisabled(ie,!1)})}flush(z=-1){let J=[];if(this.newHostElements.size&&(this.newHostElements.forEach((Et,ie)=>this._balanceNamespaceList(Et,ie)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let Et=0;Et<this.collectedEnterElements.length;Et++)Cr(this.collectedEnterElements[Et],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const Et=[];try{J=this._flushAnimations(Et,z)}finally{for(let ie=0;ie<Et.length;ie++)Et[ie]()}}else for(let Et=0;Et<this.collectedLeaveElements.length;Et++)this.processLeaveNode(this.collectedLeaveElements[Et]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(Et=>Et()),this._flushFns=[],this._whenQuietFns.length){const Et=this._whenQuietFns;this._whenQuietFns=[],J.length?r(J).onDone(()=>{Et.forEach(ie=>ie())}):Et.forEach(ie=>ie())}}reportError(z){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${z.join("\n")}`)}_flushAnimations(z,J){const Et=new Le,ie=[],Ee=new Map,Ye=[],$e=new Map,yi=new Map,Hi=new Map,sn=new Set;this.disabledNodes.forEach(Dn=>{sn.add(Dn);const jn=this.driver.query(Dn,".ng-animate-queued",!0);for(let bn=0;bn<jn.length;bn++)sn.add(jn[bn])});const fn=this.bodyNode,Yn=Array.from(this.statesByElement.keys()),cr=Zs(Yn,this.collectedEnterElements),Pn=new Map;let Fn=0;cr.forEach((Dn,jn)=>{const bn=st+Fn++;Pn.set(jn,bn),Dn.forEach(ur=>Cr(ur,bn))});const or=[],Wr=new Set,Kr=new Set;for(let Dn=0;Dn<this.collectedLeaveElements.length;Dn++){const jn=this.collectedLeaveElements[Dn],bn=jn[Tn];bn&&bn.setForRemoval&&(or.push(jn),Wr.add(jn),bn.hasAnimation?this.driver.query(jn,".ng-star-inserted",!0).forEach(ur=>Wr.add(ur)):Kr.add(jn))}const $o=new Map,xo=Zs(Yn,Array.from(Wr));xo.forEach((Dn,jn)=>{const bn=Z+Fn++;$o.set(jn,bn),Dn.forEach(ur=>Cr(ur,bn))}),z.push(()=>{cr.forEach((Dn,jn)=>{const bn=Pn.get(jn);Dn.forEach(ur=>Qs(ur,bn))}),xo.forEach((Dn,jn)=>{const bn=$o.get(jn);Dn.forEach(ur=>Qs(ur,bn))}),or.forEach(Dn=>{this.processLeaveNode(Dn)})});const Ws=[],ws=[];for(let Dn=this._namespaceList.length-1;Dn>=0;Dn--)this._namespaceList[Dn].drainQueuedTransitions(J).forEach(bn=>{const ur=bn.player,fr=bn.element;if(Ws.push(ur),this.collectedEnterElements.length){const hs=fr[Tn];if(hs&&hs.setForMove)return void ur.destroy()}const Qo=!fn||!this.driver.containsElement(fn,fr),Is=$o.get(fr),ra=Pn.get(fr),qr=this._buildInstruction(bn,Et,ra,Is,Qo);if(qr.errors&&qr.errors.length)ws.push(qr);else{if(Qo)return ur.onStart(()=>ee(fr,qr.fromStyles)),ur.onDestroy(()=>Qt(fr,qr.toStyles)),void ie.push(ur);if(bn.isFallbackTransition)return ur.onStart(()=>ee(fr,qr.fromStyles)),ur.onDestroy(()=>Qt(fr,qr.toStyles)),void ie.push(ur);qr.timelines.forEach(hs=>hs.stretchStartingKeyframe=!0),Et.append(fr,qr.timelines),Ye.push({instruction:qr,player:ur,element:fr}),qr.queriedElements.forEach(hs=>P($e,hs,[]).push(ur)),qr.preStyleProps.forEach((hs,bs)=>{const da=Object.keys(hs);if(da.length){let jo=yi.get(bs);jo||yi.set(bs,jo=new Set),da.forEach(js=>jo.add(js))}}),qr.postStyleProps.forEach((hs,bs)=>{const da=Object.keys(hs);let jo=Hi.get(bs);jo||Hi.set(bs,jo=new Set),da.forEach(js=>jo.add(js))})}});if(ws.length){const Dn=[];ws.forEach(jn=>{Dn.push(`@${jn.triggerName} has failed due to:\n`),jn.errors.forEach(bn=>Dn.push(`- ${bn}\n`))}),Ws.forEach(jn=>jn.destroy()),this.reportError(Dn)}const ko=new Map,zs=new Map;Ye.forEach(Dn=>{const jn=Dn.element;Et.has(jn)&&(zs.set(jn,jn),this._beforeAnimationBuild(Dn.player.namespaceId,Dn.instruction,ko))}),ie.forEach(Dn=>{const jn=Dn.element;this._getPreviousPlayers(jn,!1,Dn.namespaceId,Dn.triggerName,null).forEach(ur=>{P(ko,jn,[]).push(ur),ur.destroy()})});const Rs=or.filter(Dn=>vl(Dn,yi,Hi)),na=new Map;ya(na,this.driver,Kr,Hi,e.l3).forEach(Dn=>{vl(Dn,yi,Hi)&&Rs.push(Dn)});const oo=new Map;cr.forEach((Dn,jn)=>{ya(oo,this.driver,new Set(Dn),yi,e.k1)}),Rs.forEach(Dn=>{const jn=na.get(Dn),bn=oo.get(Dn);na.set(Dn,Object.assign(Object.assign({},jn),bn))});const Ds=[],Za=[],Zo={};Ye.forEach(Dn=>{const{element:jn,player:bn,instruction:ur}=Dn;if(Et.has(jn)){if(sn.has(jn))return bn.onDestroy(()=>Qt(jn,ur.toStyles)),bn.disabled=!0,bn.overrideTotalTime(ur.totalTime),void ie.push(bn);let fr=Zo;if(zs.size>1){let Is=jn;const ra=[];for(;Is=Is.parentNode;){const qr=zs.get(Is);if(qr){fr=qr;break}ra.push(Is)}ra.forEach(qr=>zs.set(qr,fr))}const Qo=this._buildAnimation(bn.namespaceId,ur,ko,Ee,oo,na);if(bn.setRealPlayer(Qo),fr===Zo)Ds.push(bn);else{const Is=this.playersByElement.get(fr);Is&&Is.length&&(bn.parentPlayer=r(Is)),ie.push(bn)}}else ee(jn,ur.fromStyles),bn.onDestroy(()=>Qt(jn,ur.toStyles)),Za.push(bn),sn.has(jn)&&ie.push(bn)}),Za.forEach(Dn=>{const jn=Ee.get(Dn.element);if(jn&&jn.length){const bn=r(jn);Dn.setRealPlayer(bn)}}),ie.forEach(Dn=>{Dn.parentPlayer?Dn.syncPlayerEvents(Dn.parentPlayer):Dn.destroy()});for(let Dn=0;Dn<or.length;Dn++){const jn=or[Dn],bn=jn[Tn];if(Qs(jn,Z),bn&&bn.hasAnimation)continue;let ur=[];if($e.size){let Qo=$e.get(jn);Qo&&Qo.length&&ur.push(...Qo);let Is=this.driver.query(jn,oe,!0);for(let ra=0;ra<Is.length;ra++){let qr=$e.get(Is[ra]);qr&&qr.length&&ur.push(...qr)}}const fr=ur.filter(Qo=>!Qo.destroyed);fr.length?Ea(this,jn,fr):this.processLeaveNode(jn)}return or.length=0,Ds.forEach(Dn=>{this.players.push(Dn),Dn.onDone(()=>{Dn.destroy();const jn=this.players.indexOf(Dn);this.players.splice(jn,1)}),Dn.play()}),Ds}elementContainsData(z,J){let Et=!1;const ie=J[Tn];return ie&&ie.setForRemoval&&(Et=!0),this.playersByElement.has(J)&&(Et=!0),this.playersByQueriedElement.has(J)&&(Et=!0),this.statesByElement.has(J)&&(Et=!0),this._fetchNamespace(z).elementContainsData(J)||Et}afterFlush(z){this._flushFns.push(z)}afterFlushAnimationsDone(z){this._whenQuietFns.push(z)}_getPreviousPlayers(z,J,Et,ie,Ee){let Ye=[];if(J){const $e=this.playersByQueriedElement.get(z);$e&&(Ye=$e)}else{const $e=this.playersByElement.get(z);if($e){const yi=!Ee||Ee==no;$e.forEach(Hi=>{Hi.queued||!yi&&Hi.triggerName!=ie||Ye.push(Hi)})}}return(Et||ie)&&(Ye=Ye.filter($e=>!(Et&&Et!=$e.namespaceId||ie&&ie!=$e.triggerName))),Ye}_beforeAnimationBuild(z,J,Et){const Ee=J.element,Ye=J.isRemovalTransition?void 0:z,$e=J.isRemovalTransition?void 0:J.triggerName;for(const yi of J.timelines){const Hi=yi.element,sn=Hi!==Ee,fn=P(Et,Hi,[]);this._getPreviousPlayers(Hi,sn,Ye,$e,J.toState).forEach(cr=>{const Pn=cr.getRealPlayer();Pn.beforeDestroy&&Pn.beforeDestroy(),cr.destroy(),fn.push(cr)})}ee(Ee,J.fromStyles)}_buildAnimation(z,J,Et,ie,Ee,Ye){const $e=J.triggerName,yi=J.element,Hi=[],sn=new Set,fn=new Set,Yn=J.timelines.map(Pn=>{const Fn=Pn.element;sn.add(Fn);const or=Fn[Tn];if(or&&or.removedBeforeQueried)return new e.ZN(Pn.duration,Pn.delay);const Wr=Fn!==yi,Kr=function(ae){const z=[];return qs(ae,z),z}((Et.get(Fn)||Qn).map(ko=>ko.getRealPlayer())).filter(ko=>!!ko.element&&ko.element===Fn),$o=Ee.get(Fn),xo=Ye.get(Fn),Ws=s(0,this._normalizer,0,Pn.keyframes,$o,xo),ws=this._buildPlayer(Pn,Ws,Kr);if(Pn.subTimeline&&ie&&fn.add(Fn),Wr){const ko=new Hs(z,$e,Fn);ko.setRealPlayer(ws),Hi.push(ko)}return ws});Hi.forEach(Pn=>{P(this.playersByQueriedElement,Pn.element,[]).push(Pn),Pn.onDone(()=>function(ae,z,J){let Et;if(ae instanceof Map){if(Et=ae.get(z),Et){if(Et.length){const ie=Et.indexOf(J);Et.splice(ie,1)}0==Et.length&&ae.delete(z)}}else if(Et=ae[z],Et){if(Et.length){const ie=Et.indexOf(J);Et.splice(ie,1)}0==Et.length&&delete ae[z]}return Et}(this.playersByQueriedElement,Pn.element,Pn))}),sn.forEach(Pn=>Cr(Pn,ve));const cr=r(Yn);return cr.onDestroy(()=>{sn.forEach(Pn=>Qs(Pn,ve)),Qt(yi,J.toStyles)}),fn.forEach(Pn=>{P(ie,Pn,[]).push(cr)}),cr}_buildPlayer(z,J,Et){return J.length>0?this.driver.animate(z.element,J,z.duration,z.delay,z.easing,Et):new e.ZN(z.duration,z.delay)}}class Hs{constructor(z,J,Et){this.namespaceId=z,this.triggerName=J,this.element=Et,this._player=new e.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(z){this._containsRealPlayer||(this._player=z,Object.keys(this._queuedCallbacks).forEach(J=>{this._queuedCallbacks[J].forEach(Et=>c(z,J,void 0,Et))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(z.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(z){this.totalTime=z}syncPlayerEvents(z){const J=this._player;J.triggerCallback&&z.onStart(()=>J.triggerCallback("start")),z.onDone(()=>this.finish()),z.onDestroy(()=>this.destroy())}_queueEvent(z,J){P(this._queuedCallbacks,z,[]).push(J)}onDone(z){this.queued&&this._queueEvent("done",z),this._player.onDone(z)}onStart(z){this.queued&&this._queueEvent("start",z),this._player.onStart(z)}onDestroy(z){this.queued&&this._queueEvent("destroy",z),this._player.onDestroy(z)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(z){this.queued||this._player.setPosition(z)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(z){const J=this._player;J.triggerCallback&&J.triggerCallback(z)}}function Go(ae){return ae&&1===ae.nodeType}function po(ae,z){const J=ae.style.display;return ae.style.display=null!=z?z:"none",J}function ya(ae,z,J,Et,ie){const Ee=[];J.forEach(yi=>Ee.push(po(yi)));const Ye=[];Et.forEach((yi,Hi)=>{const sn={};yi.forEach(fn=>{const Yn=sn[fn]=z.computeStyle(Hi,fn,ie);(!Yn||0==Yn.length)&&(Hi[Tn]=Jn,Ye.push(Hi))}),ae.set(Hi,sn)});let $e=0;return J.forEach(yi=>po(yi,Ee[$e++])),Ye}function Zs(ae,z){const J=new Map;if(ae.forEach($e=>J.set($e,[])),0==z.length)return J;const ie=new Set(z),Ee=new Map;function Ye($e){if(!$e)return 1;let yi=Ee.get($e);if(yi)return yi;const Hi=$e.parentNode;return yi=J.has(Hi)?Hi:ie.has(Hi)?1:Ye(Hi),Ee.set($e,yi),yi}return z.forEach($e=>{const yi=Ye($e);1!==yi&&J.get(yi).push($e)}),J}function Cr(ae,z){var J;null===(J=ae.classList)||void 0===J||J.add(z)}function Qs(ae,z){var J;null===(J=ae.classList)||void 0===J||J.remove(z)}function Ea(ae,z,J){r(J).onDone(()=>ae.processLeaveNode(z))}function qs(ae,z){for(let J=0;J<ae.length;J++){const Et=ae[J];Et instanceof e.ZE?qs(Et.players,z):z.push(Et)}}function vl(ae,z,J){const Et=J.get(ae);if(!Et)return!1;let ie=z.get(ae);return ie?Et.forEach(Ee=>ie.add(Ee)):z.set(ae,Et),J.delete(ae),!0}class ha{constructor(z,J,Et){this.bodyNode=z,this._driver=J,this._normalizer=Et,this._triggerCache={},this.onRemovalComplete=(ie,Ee)=>{},this._transitionEngine=new Bs(z,J,Et),this._timelineEngine=new On(z,J,Et),this._transitionEngine.onRemovalComplete=(ie,Ee)=>this.onRemovalComplete(ie,Ee)}registerTrigger(z,J,Et,ie,Ee){const Ye=z+"-"+ie;let $e=this._triggerCache[Ye];if(!$e){const yi=[],Hi=ni(this._driver,Ee,yi);if(yi.length)throw new Error(`The animation trigger "${ie}" has failed to build due to the following errors:\n - ${yi.join("\n - ")}`);$e=function(ae,z,J){return new Sr(ae,z,J)}(ie,Hi,this._normalizer),this._triggerCache[Ye]=$e}this._transitionEngine.registerTrigger(J,ie,$e)}register(z,J){this._transitionEngine.register(z,J)}destroy(z,J){this._transitionEngine.destroy(z,J)}onInsert(z,J,Et,ie){this._transitionEngine.insertNode(z,J,Et,ie)}onRemove(z,J,Et,ie){this._transitionEngine.removeNode(z,J,ie||!1,Et)}disableAnimations(z,J){this._transitionEngine.markElementAsDisabled(z,J)}process(z,J,Et,ie){if("@"==Et.charAt(0)){const[Ee,Ye]=G(Et);this._timelineEngine.command(Ee,J,Ye,ie)}else this._transitionEngine.trigger(z,J,Et,ie)}listen(z,J,Et,ie,Ee){if("@"==Et.charAt(0)){const[Ye,$e]=G(Et);return this._timelineEngine.listen(Ye,J,$e,Ee)}return this._transitionEngine.listen(z,J,Et,ie,Ee)}flush(z=-1){this._transitionEngine.flush(z)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Aa(ae,z){let J=null,Et=null;return Array.isArray(z)&&z.length?(J=as(z[0]),z.length>1&&(Et=as(z[z.length-1]))):z&&(J=as(z)),J||Et?new ta(ae,J,Et):null}let ta=(()=>{class ae{constructor(J,Et,ie){this._element=J,this._startStyles=Et,this._endStyles=ie,this._state=0;let Ee=ae.initialStylesByElement.get(J);Ee||ae.initialStylesByElement.set(J,Ee={}),this._initialStyles=Ee}start(){this._state<1&&(this._startStyles&&Qt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Qt(this._element,this._initialStyles),this._endStyles&&(Qt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ae.initialStylesByElement.delete(this._element),this._startStyles&&(ee(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ee(this._element,this._endStyles),this._endStyles=null),Qt(this._element,this._initialStyles),this._state=3)}}return ae.initialStylesByElement=new WeakMap,ae})();function as(ae){let z=null;const J=Object.keys(ae);for(let Et=0;Et<J.length;Et++){const ie=J[Et];xl(ie)&&(z=z||{},z[ie]=ae[ie])}return z}function xl(ae){return"display"===ae||"position"===ae}const Us="animation",Wo="animationend";class Mo{constructor(z,J,Et,ie,Ee,Ye,$e){this._element=z,this._name=J,this._duration=Et,this._delay=ie,this._easing=Ee,this._fillMode=Ye,this._onDoneFn=$e,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=yi=>this._handleCallback(yi)}apply(){(function(ae,z){const J=_s(ae,"").trim();let Et=0;J.length&&(function(ae,z){let J=0;for(let Et=0;Et<ae.length;Et++)","===ae.charAt(Et)&&J++;return J}(J)+1,z=`${J}, ${z}`),Oo(ae,"",z)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Xr(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){_r(this._element,this._name,"paused")}resume(){_r(this._element,this._name,"running")}setPosition(z){const J=Po(this._element,this._name);this._position=z*this._duration,Oo(this._element,"Delay",`-${this._position}ms`,J)}getPosition(){return this._position}_handleCallback(z){const J=z._ngTestManualTimestamp||Date.now(),Et=1e3*parseFloat(z.elapsedTime.toFixed(3));z.animationName==this._name&&Math.max(J-this._startTime,0)>=this._delay&&Et>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Xr(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(ae,z){const Et=_s(ae,"").split(","),ie=Vs(Et,z);ie>=0&&(Et.splice(ie,1),Oo(ae,"",Et.join(",")))}(this._element,this._name))}}function _r(ae,z,J){Oo(ae,"PlayState",J,Po(ae,z))}function Po(ae,z){const J=_s(ae,"");return J.indexOf(",")>0?Vs(J.split(","),z):Vs([J],z)}function Vs(ae,z){for(let J=0;J<ae.length;J++)if(ae[J].indexOf(z)>=0)return J;return-1}function Xr(ae,z,J){J?ae.removeEventListener(Wo,z):ae.addEventListener(Wo,z)}function Oo(ae,z,J,Et){const ie=Us+z;if(null!=Et){const Ee=ae.style[ie];if(Ee.length){const Ye=Ee.split(",");Ye[Et]=J,J=Ye.join(",")}}ae.style[ie]=J}function _s(ae,z){return ae.style[Us+z]||""}class ea{constructor(z,J,Et,ie,Ee,Ye,$e,yi){this.element=z,this.keyframes=J,this.animationName=Et,this._duration=ie,this._delay=Ee,this._finalStyles=$e,this._specialStyles=yi,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Ye||"linear",this.totalTime=ie+Ee,this._buildStyler()}onStart(z){this._onStartFns.push(z)}onDone(z){this._onDoneFns.push(z)}onDestroy(z){this._onDestroyFns.push(z)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(z=>z()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(z=>z()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(z=>z()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(z){this._styler.setPosition(z)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Mo(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(z){const J="start"==z?this._onStartFns:this._onDoneFns;J.forEach(Et=>Et()),J.length=0}beforeDestroy(){this.init();const z={};if(this.hasStarted()){const J=this._state>=3;Object.keys(this._finalStyles).forEach(Et=>{"offset"!=Et&&(z[Et]=J?this._finalStyles[Et]:zt(this.element,Et))})}this.currentSnapshot=z}}class Hr extends e.ZN{constructor(z,J){super(),this.element=z,this._startingStyles={},this.__initialized=!1,this._styles=lt(J)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(z=>{this._startingStyles[z]=this.element.style[z]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(z=>this.element.style.setProperty(z,this._styles[z])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(z=>{const J=this._startingStyles[z];J?this.element.style.setProperty(z,J):this.element.style.removeProperty(z)}),this._startingStyles=null,super.destroy())}}class cs{constructor(){this._count=0}validateStyleProperty(z){return Bt(z)}matchesElement(z,J){return!1}containsElement(z,J){return It(z,J)}query(z,J,Et){return St(z,J,Et)}computeStyle(z,J,Et){return window.getComputedStyle(z)[J]}buildKeyframeElement(z,J,Et){Et=Et.map($e=>lt($e));let ie=`@keyframes ${J} {\n`,Ee="";Et.forEach($e=>{Ee=" ";const yi=parseFloat($e.offset);ie+=`${Ee}${100*yi}% {\n`,Ee+=" ",Object.keys($e).forEach(Hi=>{const sn=$e[Hi];switch(Hi){case"offset":return;case"easing":return void(sn&&(ie+=`${Ee}animation-timing-function: ${sn};\n`));default:return void(ie+=`${Ee}${Hi}: ${sn};\n`)}}),ie+=`${Ee}}\n`}),ie+="}\n";const Ye=document.createElement("style");return Ye.textContent=ie,Ye}animate(z,J,Et,ie,Ee,Ye=[],$e){const yi=Ye.filter(or=>or instanceof ea),Hi={};_e(Et,ie)&&yi.forEach(or=>{let Wr=or.currentSnapshot;Object.keys(Wr).forEach(Kr=>Hi[Kr]=Wr[Kr])});const sn=function(ae){let z={};return ae&&(Array.isArray(ae)?ae:[ae]).forEach(Et=>{Object.keys(Et).forEach(ie=>{"offset"==ie||"easing"==ie||(z[ie]=Et[ie])})}),z}(J=be(z,J,Hi));if(0==Et)return new Hr(z,sn);const fn="gen_css_kf_"+this._count++,Yn=this.buildKeyframeElement(z,fn,J);(function(ae){var z;const J=null===(z=ae.getRootNode)||void 0===z?void 0:z.call(ae);return"undefined"!=typeof ShadowRoot&&J instanceof ShadowRoot?J:document.head})(z).appendChild(Yn);const Pn=Aa(z,J),Fn=new ea(z,J,fn,Et,ie,Ee,sn,Pn);return Fn.onDestroy(()=>{var ae;(ae=Yn).parentNode.removeChild(ae)}),Fn}}class ia{constructor(z,J,Et,ie){this.element=z,this.keyframes=J,this.options=Et,this._specialStyles=ie,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=Et.duration,this._delay=Et.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(z=>z()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const z=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,z,this.options),this._finalKeyframe=z.length?z[z.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(z,J,Et){return z.animate(J,Et)}onStart(z){this._onStartFns.push(z)}onDone(z){this._onDoneFns.push(z)}onDestroy(z){this._onDestroyFns.push(z)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(z=>z()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(z=>z()),this._onDestroyFns=[])}setPosition(z){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=z*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const z={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(J=>{"offset"!=J&&(z[J]=this._finished?this._finalKeyframe[J]:zt(this.element,J))}),this.currentSnapshot=z}triggerCallback(z){const J="start"==z?this._onStartFns:this._onDoneFns;J.forEach(Et=>Et()),J.length=0}}class Lt{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(V().toString()),this._cssKeyframesDriver=new cs}validateStyleProperty(z){return Bt(z)}matchesElement(z,J){return!1}containsElement(z,J){return It(z,J)}query(z,J,Et){return St(z,J,Et)}computeStyle(z,J,Et){return window.getComputedStyle(z)[J]}overrideWebAnimationsSupport(z){this._isNativeImpl=z}animate(z,J,Et,ie,Ee,Ye=[],$e){if(!$e&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(z,J,Et,ie,Ee,Ye);const sn={duration:Et,delay:ie,fill:0==ie?"both":"forwards"};Ee&&(sn.easing=Ee);const fn={},Yn=Ye.filter(Pn=>Pn instanceof ia);_e(Et,ie)&&Yn.forEach(Pn=>{let Fn=Pn.currentSnapshot;Object.keys(Fn).forEach(or=>fn[or]=Fn[or])});const cr=Aa(z,J=be(z,J=J.map(Pn=>ci(Pn,!1)),fn));return new ia(z,J,sn,cr)}}function V(){return t()&&Element.prototype.animate||{}}var j=f(69808);let xt=(()=>{class ae extends e._j{constructor(J,Et){super(),this._nextAnimationId=0,this._renderer=J.createRenderer(Et.body,{id:"0",encapsulation:y.ifc.None,styles:[],data:{animation:[]}})}build(J){const Et=this._nextAnimationId.toString();this._nextAnimationId++;const ie=Array.isArray(J)?(0,e.vP)(J):J;return an(this._renderer,null,Et,"register",[ie]),new Be(Et,this._renderer)}}return ae.\u0275fac=function(J){return new(J||ae)(y.LFG(y.FYo),y.LFG(j.K0))},ae.\u0275prov=y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();class Be extends e.LC{constructor(z,J){super(),this._id=z,this._renderer=J}create(z,J){return new Ti(this._id,z,J||{},this._renderer)}}class Ti{constructor(z,J,Et,ie){this.id=z,this.element=J,this._renderer=ie,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",Et)}_listen(z,J){return this._renderer.listen(this.element,`@@${this.id}:${z}`,J)}_command(z,...J){return an(this._renderer,this.element,this.id,z,J)}onDone(z){this._listen("done",z)}onStart(z){this._listen("start",z)}onDestroy(z){this._listen("destroy",z)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(z){this._command("setPosition",z)}getPosition(){var z,J;return null!==(J=null===(z=this._renderer.engine.players[+this.id])||void 0===z?void 0:z.getPosition())&&void 0!==J?J:0}}function an(ae,z,J,Et,ie){return ae.setProperty(z,`@@${J}:${Et}`,ie)}const wr="@.disabled";let vr=(()=>{class ae{constructor(J,Et,ie){this.delegate=J,this.engine=Et,this._zone=ie,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),Et.onRemovalComplete=(Ee,Ye)=>{const $e=null==Ye?void 0:Ye.parentNode(Ee);$e&&Ye.removeChild($e,Ee)}}createRenderer(J,Et){const Ee=this.delegate.createRenderer(J,Et);if(!(J&&Et&&Et.data&&Et.data.animation)){let sn=this._rendererCache.get(Ee);return sn||(sn=new yr("",Ee,this.engine),this._rendererCache.set(Ee,sn)),sn}const Ye=Et.id,$e=Et.id+"-"+this._currentId;this._currentId++,this.engine.register($e,J);const yi=sn=>{Array.isArray(sn)?sn.forEach(yi):this.engine.registerTrigger(Ye,$e,J,sn.name,sn)};return Et.data.animation.forEach(yi),new Gr(this,$e,Ee,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(J,Et,ie){J>=0&&J<this._microtaskId?this._zone.run(()=>Et(ie)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Ee=>{const[Ye,$e]=Ee;Ye($e)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([Et,ie]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return ae.\u0275fac=function(J){return new(J||ae)(y.LFG(y.FYo),y.LFG(ha),y.LFG(y.R0b))},ae.\u0275prov=y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();class yr{constructor(z,J,Et){this.namespaceId=z,this.delegate=J,this.engine=Et,this.destroyNode=this.delegate.destroyNode?ie=>J.destroyNode(ie):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(z,J){return this.delegate.createElement(z,J)}createComment(z){return this.delegate.createComment(z)}createText(z){return this.delegate.createText(z)}appendChild(z,J){this.delegate.appendChild(z,J),this.engine.onInsert(this.namespaceId,J,z,!1)}insertBefore(z,J,Et,ie=!0){this.delegate.insertBefore(z,J,Et),this.engine.onInsert(this.namespaceId,J,z,ie)}removeChild(z,J,Et){this.engine.onRemove(this.namespaceId,J,this.delegate,Et)}selectRootElement(z,J){return this.delegate.selectRootElement(z,J)}parentNode(z){return this.delegate.parentNode(z)}nextSibling(z){return this.delegate.nextSibling(z)}setAttribute(z,J,Et,ie){this.delegate.setAttribute(z,J,Et,ie)}removeAttribute(z,J,Et){this.delegate.removeAttribute(z,J,Et)}addClass(z,J){this.delegate.addClass(z,J)}removeClass(z,J){this.delegate.removeClass(z,J)}setStyle(z,J,Et,ie){this.delegate.setStyle(z,J,Et,ie)}removeStyle(z,J,Et){this.delegate.removeStyle(z,J,Et)}setProperty(z,J,Et){"@"==J.charAt(0)&&J==wr?this.disableAnimations(z,!!Et):this.delegate.setProperty(z,J,Et)}setValue(z,J){this.delegate.setValue(z,J)}listen(z,J,Et){return this.delegate.listen(z,J,Et)}disableAnimations(z,J){this.engine.disableAnimations(z,J)}}class Gr extends yr{constructor(z,J,Et,ie){super(J,Et,ie),this.factory=z,this.namespaceId=J}setProperty(z,J,Et){"@"==J.charAt(0)?"."==J.charAt(1)&&J==wr?this.disableAnimations(z,Et=void 0===Et||!!Et):this.engine.process(this.namespaceId,z,J.substr(1),Et):this.delegate.setProperty(z,J,Et)}listen(z,J,Et){if("@"==J.charAt(0)){const ie=function(ae){switch(ae){case"body":return document.body;case"document":return document;case"window":return window;default:return ae}}(z);let Ee=J.substr(1),Ye="";return"@"!=Ee.charAt(0)&&([Ee,Ye]=function(ae){const z=ae.indexOf(".");return[ae.substring(0,z),ae.substr(z+1)]}(Ee)),this.engine.listen(this.namespaceId,ie,Ee,Ye,$e=>{this.factory.scheduleListenerCallback($e._data||-1,Et,$e)})}return this.delegate.listen(z,J,Et)}}let Gn=(()=>{class ae extends ha{constructor(J,Et,ie){super(J.body,Et,ie)}ngOnDestroy(){this.flush()}}return ae.\u0275fac=function(J){return new(J||ae)(y.LFG(j.K0),y.LFG(ht),y.LFG(_o))},ae.\u0275prov=y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const Ja=new y.OlP("AnimationModuleType"),Cs=[{provide:e._j,useClass:xt},{provide:_o,useFactory:function(){return new jr}},{provide:ha,useClass:Gn},{provide:y.FYo,useFactory:function(ae,z,J){return new vr(ae,z,J)},deps:[g.se,ha,y.R0b]}],Ss=[{provide:ht,useFactory:function(){return"function"==typeof V()?new Lt:new cs}},{provide:Ja,useValue:"BrowserAnimations"},...Cs],bl=[{provide:ht,useClass:ft},{provide:Ja,useValue:"NoopAnimations"},...Cs];let Ji=(()=>{class ae{static withConfig(J){return{ngModule:ae,providers:J.disableAnimations?bl:Ss}}}return ae.\u0275fac=function(J){return new(J||ae)},ae.\u0275mod=y.oAB({type:ae}),ae.\u0275inj=y.cJS({providers:Ss,imports:[g.b2]}),ae})()},22313:(H,W,f)=>{"use strict";f.d(W,{b2:()=>ui,H7:()=>Vi,Dx:()=>ue,q6:()=>Yt,se:()=>Zt});var y=f(69808),g=f(5e3);class e extends y.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class t extends e{static makeCurrent(){(0,y.HT)(new t)}onAndCancel(Ke,Pe,di){return Ke.addEventListener(Pe,di,!1),()=>{Ke.removeEventListener(Pe,di,!1)}}dispatchEvent(Ke,Pe){Ke.dispatchEvent(Pe)}remove(Ke){Ke.parentNode&&Ke.parentNode.removeChild(Ke)}createElement(Ke,Pe){return(Pe=Pe||this.getDefaultDocument()).createElement(Ke)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ke){return Ke.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ke){return Ke instanceof DocumentFragment}getGlobalEventTarget(Ke,Pe){return"window"===Pe?window:"document"===Pe?Ke:"body"===Pe?Ke.body:null}getBaseHref(Ke){const Pe=(n=n||document.querySelector("base"),n?n.getAttribute("href"):null);return null==Pe?null:function(pi){s=s||document.createElement("a"),s.setAttribute("href",pi);const Ke=s.pathname;return"/"===Ke.charAt(0)?Ke:`/${Ke}`}(Pe)}resetBaseElement(){n=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ke){return(0,y.Mx)(document.cookie,Ke)}}let s,n=null;const v=new g.OlP("TRANSITION_ID"),P=[{provide:g.ip1,useFactory:function(pi,Ke,Pe){return()=>{Pe.get(g.CZH).donePromise.then(()=>{const di=(0,y.q)(),Oi=Ke.querySelectorAll(`style[ng-transition="${pi}"]`);for(let dn=0;dn<Oi.length;dn++)di.remove(Oi[dn])})}},deps:[v,y.K0,g.zs3],multi:!0}];class G{static init(){(0,g.VLi)(new G)}addToWindow(Ke){g.dqk.getAngularTestability=(di,Oi=!0)=>{const dn=Ke.findTestabilityInTree(di,Oi);if(null==dn)throw new Error("Could not find testability for element.");return dn},g.dqk.getAllAngularTestabilities=()=>Ke.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>Ke.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(di=>{const Oi=g.dqk.getAllAngularTestabilities();let dn=Oi.length,Rn=!1;const nr=function(xr){Rn=Rn||xr,dn--,0==dn&&di(Rn)};Oi.forEach(function(xr){xr.whenStable(nr)})})}findTestabilityInTree(Ke,Pe,di){if(null==Pe)return null;const Oi=Ke.getTestability(Pe);return null!=Oi?Oi:di?(0,y.q)().isShadowRoot(Pe)?this.findTestabilityInTree(Ke,Pe.host,!0):this.findTestabilityInTree(Ke,Pe.parentElement,!0):null}}let it=(()=>{class pi{build(){return new XMLHttpRequest}}return pi.\u0275fac=function(Pe){return new(Pe||pi)},pi.\u0275prov=g.Yz7({token:pi,factory:pi.\u0275fac}),pi})();const q=new g.OlP("EventManagerPlugins");let bt=(()=>{class pi{constructor(Pe,di){this._zone=di,this._eventNameToPlugin=new Map,Pe.forEach(Oi=>Oi.manager=this),this._plugins=Pe.slice().reverse()}addEventListener(Pe,di,Oi){return this._findPluginFor(di).addEventListener(Pe,di,Oi)}addGlobalEventListener(Pe,di,Oi){return this._findPluginFor(di).addGlobalEventListener(Pe,di,Oi)}getZone(){return this._zone}_findPluginFor(Pe){const di=this._eventNameToPlugin.get(Pe);if(di)return di;const Oi=this._plugins;for(let dn=0;dn<Oi.length;dn++){const Rn=Oi[dn];if(Rn.supports(Pe))return this._eventNameToPlugin.set(Pe,Rn),Rn}throw new Error(`No event manager plugin found for event ${Pe}`)}}return pi.\u0275fac=function(Pe){return new(Pe||pi)(g.LFG(q),g.LFG(g.R0b))},pi.\u0275prov=g.Yz7({token:pi,factory:pi.\u0275fac}),pi})();class Ft{constructor(Ke){this._doc=Ke}addGlobalEventListener(Ke,Pe,di){const Oi=(0,y.q)().getGlobalEventTarget(this._doc,Ke);if(!Oi)throw new Error(`Unsupported event target ${Oi} for event ${Pe}`);return this.addEventListener(Oi,Pe,di)}}let gt=(()=>{class pi{constructor(){this._stylesSet=new Set}addStyles(Pe){const di=new Set;Pe.forEach(Oi=>{this._stylesSet.has(Oi)||(this._stylesSet.add(Oi),di.add(Oi))}),this.onStylesAdded(di)}onStylesAdded(Pe){}getAllStyles(){return Array.from(this._stylesSet)}}return pi.\u0275fac=function(Pe){return new(Pe||pi)},pi.\u0275prov=g.Yz7({token:pi,factory:pi.\u0275fac}),pi})(),wt=(()=>{class pi extends gt{constructor(Pe){super(),this._doc=Pe,this._hostNodes=new Map,this._hostNodes.set(Pe.head,[])}_addStylesToHost(Pe,di,Oi){Pe.forEach(dn=>{const Rn=this._doc.createElement("style");Rn.textContent=dn,Oi.push(di.appendChild(Rn))})}addHost(Pe){const di=[];this._addStylesToHost(this._stylesSet,Pe,di),this._hostNodes.set(Pe,di)}removeHost(Pe){const di=this._hostNodes.get(Pe);di&&di.forEach(Bt),this._hostNodes.delete(Pe)}onStylesAdded(Pe){this._hostNodes.forEach((di,Oi)=>{this._addStylesToHost(Pe,Oi,di)})}ngOnDestroy(){this._hostNodes.forEach(Pe=>Pe.forEach(Bt))}}return pi.\u0275fac=function(Pe){return new(Pe||pi)(g.LFG(y.K0))},pi.\u0275prov=g.Yz7({token:pi,factory:pi.\u0275fac}),pi})();function Bt(pi){(0,y.q)().remove(pi)}const Kt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},It=/%COMP%/g;function ot(pi,Ke,Pe){for(let di=0;di<Ke.length;di++){let Oi=Ke[di];Array.isArray(Oi)?ot(pi,Oi,Pe):(Oi=Oi.replace(It,pi),Pe.push(Oi))}return Pe}function st(pi){return Ke=>{if("__ngUnwrap__"===Ke)return pi;!1===pi(Ke)&&(Ke.preventDefault(),Ke.returnValue=!1)}}let Zt=(()=>{class pi{constructor(Pe,di,Oi){this.eventManager=Pe,this.sharedStylesHost=di,this.appId=Oi,this.rendererByCompId=new Map,this.defaultRenderer=new vt(Pe)}createRenderer(Pe,di){if(!Pe||!di)return this.defaultRenderer;switch(di.encapsulation){case g.ifc.Emulated:{let Oi=this.rendererByCompId.get(di.id);return Oi||(Oi=new ve(this.eventManager,this.sharedStylesHost,di,this.appId),this.rendererByCompId.set(di.id,Oi)),Oi.applyToHost(Pe),Oi}case 1:case g.ifc.ShadowDom:return new oe(this.eventManager,this.sharedStylesHost,Pe,di);default:if(!this.rendererByCompId.has(di.id)){const Oi=ot(di.id,di.styles,[]);this.sharedStylesHost.addStyles(Oi),this.rendererByCompId.set(di.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return pi.\u0275fac=function(Pe){return new(Pe||pi)(g.LFG(bt),g.LFG(wt),g.LFG(g.AFp))},pi.\u0275prov=g.Yz7({token:pi,factory:pi.\u0275fac}),pi})();class vt{constructor(Ke){this.eventManager=Ke,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ke,Pe){return Pe?document.createElementNS(Kt[Pe]||Pe,Ke):document.createElement(Ke)}createComment(Ke){return document.createComment(Ke)}createText(Ke){return document.createTextNode(Ke)}appendChild(Ke,Pe){Ke.appendChild(Pe)}insertBefore(Ke,Pe,di){Ke&&Ke.insertBefore(Pe,di)}removeChild(Ke,Pe){Ke&&Ke.removeChild(Pe)}selectRootElement(Ke,Pe){let di="string"==typeof Ke?document.querySelector(Ke):Ke;if(!di)throw new Error(`The selector "${Ke}" did not match any elements`);return Pe||(di.textContent=""),di}parentNode(Ke){return Ke.parentNode}nextSibling(Ke){return Ke.nextSibling}setAttribute(Ke,Pe,di,Oi){if(Oi){Pe=Oi+":"+Pe;const dn=Kt[Oi];dn?Ke.setAttributeNS(dn,Pe,di):Ke.setAttribute(Pe,di)}else Ke.setAttribute(Pe,di)}removeAttribute(Ke,Pe,di){if(di){const Oi=Kt[di];Oi?Ke.removeAttributeNS(Oi,Pe):Ke.removeAttribute(`${di}:${Pe}`)}else Ke.removeAttribute(Pe)}addClass(Ke,Pe){Ke.classList.add(Pe)}removeClass(Ke,Pe){Ke.classList.remove(Pe)}setStyle(Ke,Pe,di,Oi){Oi&(g.JOm.DashCase|g.JOm.Important)?Ke.style.setProperty(Pe,di,Oi&g.JOm.Important?"important":""):Ke.style[Pe]=di}removeStyle(Ke,Pe,di){di&g.JOm.DashCase?Ke.style.removeProperty(Pe):Ke.style[Pe]=""}setProperty(Ke,Pe,di){Ke[Pe]=di}setValue(Ke,Pe){Ke.nodeValue=Pe}listen(Ke,Pe,di){return"string"==typeof Ke?this.eventManager.addGlobalEventListener(Ke,Pe,st(di)):this.eventManager.addEventListener(Ke,Pe,st(di))}}class ve extends vt{constructor(Ke,Pe,di,Oi){super(Ke),this.component=di;const dn=ot(Oi+"-"+di.id,di.styles,[]);Pe.addStyles(dn),this.contentAttr="_ngcontent-%COMP%".replace(It,Oi+"-"+di.id),this.hostAttr="_nghost-%COMP%".replace(It,Oi+"-"+di.id)}applyToHost(Ke){super.setAttribute(Ke,this.hostAttr,"")}createElement(Ke,Pe){const di=super.createElement(Ke,Pe);return super.setAttribute(di,this.contentAttr,""),di}}class oe extends vt{constructor(Ke,Pe,di,Oi){super(Ke),this.sharedStylesHost=Pe,this.hostEl=di,this.shadowRoot=di.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const dn=ot(Oi.id,Oi.styles,[]);for(let Rn=0;Rn<dn.length;Rn++){const nr=document.createElement("style");nr.textContent=dn[Rn],this.shadowRoot.appendChild(nr)}}nodeOrShadowRoot(Ke){return Ke===this.hostEl?this.shadowRoot:Ke}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Ke,Pe){return super.appendChild(this.nodeOrShadowRoot(Ke),Pe)}insertBefore(Ke,Pe,di){return super.insertBefore(this.nodeOrShadowRoot(Ke),Pe,di)}removeChild(Ke,Pe){return super.removeChild(this.nodeOrShadowRoot(Ke),Pe)}parentNode(Ke){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ke)))}}let Ie=(()=>{class pi extends Ft{constructor(Pe){super(Pe)}supports(Pe){return!0}addEventListener(Pe,di,Oi){return Pe.addEventListener(di,Oi,!1),()=>this.removeEventListener(Pe,di,Oi)}removeEventListener(Pe,di,Oi){return Pe.removeEventListener(di,Oi)}}return pi.\u0275fac=function(Pe){return new(Pe||pi)(g.LFG(y.K0))},pi.\u0275prov=g.Yz7({token:pi,factory:pi.\u0275fac}),pi})();const Re=["alt","control","meta","shift"],Si={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ze={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},we={alt:pi=>pi.altKey,control:pi=>pi.ctrlKey,meta:pi=>pi.metaKey,shift:pi=>pi.shiftKey};let ci=(()=>{class pi extends Ft{constructor(Pe){super(Pe)}supports(Pe){return null!=pi.parseEventName(Pe)}addEventListener(Pe,di,Oi){const dn=pi.parseEventName(di),Rn=pi.eventCallback(dn.fullKey,Oi,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,y.q)().onAndCancel(Pe,dn.domEventName,Rn))}static parseEventName(Pe){const di=Pe.toLowerCase().split("."),Oi=di.shift();if(0===di.length||"keydown"!==Oi&&"keyup"!==Oi)return null;const dn=pi._normalizeKey(di.pop());let Rn="";if(Re.forEach(xr=>{const io=di.indexOf(xr);io>-1&&(di.splice(io,1),Rn+=xr+".")}),Rn+=dn,0!=di.length||0===dn.length)return null;const nr={};return nr.domEventName=Oi,nr.fullKey=Rn,nr}static getEventFullKey(Pe){let di="",Oi=function(pi){let Ke=pi.key;if(null==Ke){if(Ke=pi.keyIdentifier,null==Ke)return"Unidentified";Ke.startsWith("U+")&&(Ke=String.fromCharCode(parseInt(Ke.substring(2),16)),3===pi.location&&Ze.hasOwnProperty(Ke)&&(Ke=Ze[Ke]))}return Si[Ke]||Ke}(Pe);return Oi=Oi.toLowerCase()," "===Oi?Oi="space":"."===Oi&&(Oi="dot"),Re.forEach(dn=>{dn!=Oi&&we[dn](Pe)&&(di+=dn+".")}),di+=Oi,di}static eventCallback(Pe,di,Oi){return dn=>{pi.getEventFullKey(dn)===Pe&&Oi.runGuarded(()=>di(dn))}}static _normalizeKey(Pe){return"esc"===Pe?"escape":Pe}}return pi.\u0275fac=function(Pe){return new(Pe||pi)(g.LFG(y.K0))},pi.\u0275prov=g.Yz7({token:pi,factory:pi.\u0275fac}),pi})();const Yt=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:y.bD},{provide:g.g9A,useValue:function(){t.makeCurrent(),G.init()},multi:!0},{provide:y.K0,useFactory:function(){return(0,g.RDi)(document),document},deps:[]}]),ye=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function(){return new g.qLn},deps:[]},{provide:q,useClass:Ie,multi:!0,deps:[y.K0,g.R0b,g.Lbi]},{provide:q,useClass:ci,multi:!0,deps:[y.K0]},{provide:Zt,useClass:Zt,deps:[bt,wt,g.AFp]},{provide:g.FYo,useExisting:Zt},{provide:gt,useExisting:wt},{provide:wt,useClass:wt,deps:[y.K0]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:bt,useClass:bt,deps:[q,g.R0b]},{provide:y.JF,useClass:it,deps:[]}];let ui=(()=>{class pi{constructor(Pe){if(Pe)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Pe){return{ngModule:pi,providers:[{provide:g.AFp,useValue:Pe.appId},{provide:v,useExisting:g.AFp},P]}}}return pi.\u0275fac=function(Pe){return new(Pe||pi)(g.LFG(pi,12))},pi.\u0275mod=g.oAB({type:pi}),pi.\u0275inj=g.cJS({providers:ye,imports:[y.ez,g.hGG]}),pi})(),ue=(()=>{class pi{constructor(Pe){this._doc=Pe}getTitle(){return this._doc.title}setTitle(Pe){this._doc.title=Pe||""}}return pi.\u0275fac=function(Pe){return new(Pe||pi)(g.LFG(y.K0))},pi.\u0275prov=g.Yz7({token:pi,factory:function(Pe){let di=null;return di=Pe?new Pe:new ue((0,g.LFG)(y.K0)),di},providedIn:"root"}),pi})();"undefined"!=typeof window&&window;let Vi=(()=>{class pi{}return pi.\u0275fac=function(Pe){return new(Pe||pi)},pi.\u0275prov=g.Yz7({token:pi,factory:function(Pe){let di=null;return di=Pe?new(Pe||pi):g.LFG(Sn),di},providedIn:"root"}),pi})(),Sn=(()=>{class pi extends Vi{constructor(Pe){super(),this._doc=Pe}sanitize(Pe,di){if(null==di)return null;switch(Pe){case g.q3G.NONE:return di;case g.q3G.HTML:return(0,g.qzn)(di,"HTML")?(0,g.z3N)(di):(0,g.EiD)(this._doc,String(di)).toString();case g.q3G.STYLE:return(0,g.qzn)(di,"Style")?(0,g.z3N)(di):di;case g.q3G.SCRIPT:if((0,g.qzn)(di,"Script"))return(0,g.z3N)(di);throw new Error("unsafe value used in a script context");case g.q3G.URL:return(0,g.yhl)(di),(0,g.qzn)(di,"URL")?(0,g.z3N)(di):(0,g.mCW)(String(di));case g.q3G.RESOURCE_URL:if((0,g.qzn)(di,"ResourceURL"))return(0,g.z3N)(di);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Pe} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Pe){return(0,g.JVY)(Pe)}bypassSecurityTrustStyle(Pe){return(0,g.L6k)(Pe)}bypassSecurityTrustScript(Pe){return(0,g.eBb)(Pe)}bypassSecurityTrustUrl(Pe){return(0,g.LAX)(Pe)}bypassSecurityTrustResourceUrl(Pe){return(0,g.pB0)(Pe)}}return pi.\u0275fac=function(Pe){return new(Pe||pi)(g.LFG(y.K0))},pi.\u0275prov=g.Yz7({token:pi,factory:function(Pe){let di=null;return di=Pe?new Pe:function(pi){return new Sn(pi.get(y.K0))}(g.LFG(g.zs3)),di},providedIn:"root"}),pi})()},91083:(H,W,f)=>{"use strict";f.d(W,{gz:()=>Ai,yS:()=>jo,Bz:()=>Oa,lC:()=>Gs});var y=f(5e3);const e=(0,f(83888).d)(mt=>function(){mt(this),this.name="EmptyError",this.message="no elements in sequence"});var t=f(79307),n=f(50727),r=f(54482),s=f(25403);function c(){return(0,r.e)((mt,at)=>{let et=null;mt._refCount++;const kt=new s.Q(at,void 0,void 0,void 0,()=>{if(!mt||mt._refCount<=0||0<--mt._refCount)return void(et=null);const jt=mt._connection,me=et;et=null,jt&&(!me||jt===me)&&jt.unsubscribe(),at.unsubscribe()});mt.subscribe(kt),kt.closed||(et=mt.connect())})}class v extends t.y{constructor(at,et){super(),this.source=at,this.subjectFactory=et,this._subject=null,this._refCount=0,this._connection=null,(0,r.A)(at)&&(this.lift=at.lift)}_subscribe(at){return this.getSubject().subscribe(at)}getSubject(){const at=this._subject;return(!at||at.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:at}=this;this._subject=this._connection=null,null==at||at.unsubscribe()}connect(){let at=this._connection;if(!at){at=this._connection=new n.w0;const et=this.getSubject();at.add(this.source.subscribe(new s.Q(et,void 0,()=>{this._teardown(),et.complete()},kt=>{this._teardown(),et.error(kt)},()=>this._teardown()))),at.closed&&(this._connection=null,at=n.w0.EMPTY)}return at}refCount(){return c()(this)}}var D=f(32076),P=f(39646),G=f(61135),it=f(39841),q=f(97272),bt=f(49770),Ft=f(60515),gt=f(77579);function wt(mt,at,et,kt,jt){return(me,Ue)=>{let ei=et,xi=at,pn=0;me.subscribe(new s.Q(Ue,lr=>{const Hn=pn++;xi=ei?mt(xi,lr,Hn):(ei=!0,lr),kt&&Ue.next(xi)},jt&&(()=>{ei&&Ue.next(xi),Ue.complete()})))}}function Bt(mt,at){return(0,r.e)(wt(mt,at,arguments.length>=2,!0))}var Kt=f(39300);function It(mt){return mt<=0?()=>Ft.E:(0,r.e)((at,et)=>{let kt=[];at.subscribe(new s.Q(et,jt=>{kt.push(jt),mt<kt.length&&kt.shift()},()=>{for(const jt of kt)et.next(jt);et.complete()},void 0,()=>{kt=null}))})}function St(mt=lt){return(0,r.e)((at,et)=>{let kt=!1;at.subscribe(new s.Q(et,jt=>{kt=!0,et.next(jt)},()=>kt?et.complete():et.error(mt())))})}function lt(){return new e}function ft(mt){return(0,r.e)((at,et)=>{let kt=!1;at.subscribe(new s.Q(et,jt=>{kt=!0,et.next(jt)},()=>{kt||et.next(mt),et.complete()}))})}var ht=f(44671),ut=f(95698);function ot(mt,at){const et=arguments.length>=2;return kt=>kt.pipe(mt?(0,Kt.h)((jt,me)=>mt(jt,me,kt)):ht.y,(0,ut.q)(1),et?ft(at):St(()=>new e))}var st=f(54004),Z=f(63900),Zt=f(68675),vt=f(70262),At=f(24351),re=f(95577),ve=f(18505),oe=f(28746),Ie=f(8189),Re=f(69808);class je{constructor(at,et){this.id=at,this.url=et}}class Si extends je{constructor(at,et,kt="imperative",jt=null){super(at,et),this.navigationTrigger=kt,this.restoredState=jt}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ze extends je{constructor(at,et,kt){super(at,et),this.urlAfterRedirects=kt}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class we extends je{constructor(at,et,kt){super(at,et),this.reason=kt}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ci extends je{constructor(at,et,kt){super(at,et),this.error=kt}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Wt extends je{constructor(at,et,kt,jt){super(at,et),this.urlAfterRedirects=kt,this.state=jt}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ae extends je{constructor(at,et,kt,jt){super(at,et),this.urlAfterRedirects=kt,this.state=jt}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qt extends je{constructor(at,et,kt,jt,me){super(at,et),this.urlAfterRedirects=kt,this.state=jt,this.shouldActivate=me}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ee extends je{constructor(at,et,kt,jt){super(at,et),this.urlAfterRedirects=kt,this.state=jt}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mt extends je{constructor(at,et,kt,jt){super(at,et),this.urlAfterRedirects=kt,this.state=jt}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yt{constructor(at){this.route=at}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ye{constructor(at){this.route=at}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ui{constructor(at){this.snapshot=at}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Te{constructor(at){this.snapshot=at}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ce{constructor(at){this.snapshot=at}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class te{constructor(at){this.snapshot=at}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Me{constructor(at,et,kt){this.routerEvent=at,this.position=et,this.anchor=kt}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ue="primary";class _e{constructor(at){this.params=at||{}}has(at){return Object.prototype.hasOwnProperty.call(this.params,at)}get(at){if(this.has(at)){const et=this.params[at];return Array.isArray(et)?et[0]:et}return null}getAll(at){if(this.has(at)){const et=this.params[at];return Array.isArray(et)?et:[et]}return[]}get keys(){return Object.keys(this.params)}}function be(mt){return new _e(mt)}const Dt="ngNavigationCancelingError";function zt(mt){const at=Error("NavigationCancelingError: "+mt);return at[Dt]=!0,at}function Xe(mt,at,et){const kt=et.path.split("/");if(kt.length>mt.length||"full"===et.pathMatch&&(at.hasChildren()||kt.length<mt.length))return null;const jt={};for(let me=0;me<kt.length;me++){const Ue=kt[me],ei=mt[me];if(Ue.startsWith(":"))jt[Ue.substring(1)]=ei;else if(Ue!==ei.path)return null}return{consumed:mt.slice(0,kt.length),posParams:jt}}function bi(mt,at){const et=mt?Object.keys(mt):void 0,kt=at?Object.keys(at):void 0;if(!et||!kt||et.length!=kt.length)return!1;let jt;for(let me=0;me<et.length;me++)if(jt=et[me],!mi(mt[jt],at[jt]))return!1;return!0}function mi(mt,at){if(Array.isArray(mt)&&Array.isArray(at)){if(mt.length!==at.length)return!1;const et=[...mt].sort(),kt=[...at].sort();return et.every((jt,me)=>kt[me]===jt)}return mt===at}function on(mt){return Array.prototype.concat.apply([],mt)}function li(mt){return mt.length>0?mt[mt.length-1]:null}function Ii(mt,at){for(const et in mt)mt.hasOwnProperty(et)&&at(mt[et],et)}function ni(mt){return(0,y.CqO)(mt)?mt:(0,y.QGY)(mt)?(0,D.D)(Promise.resolve(mt)):(0,P.of)(mt)}const Ce={exact:function ti(mt,at,et){if(!Sn(mt.segments,at.segments)||!Nt(mt.segments,at.segments,et)||mt.numberOfChildren!==at.numberOfChildren)return!1;for(const kt in at.children)if(!mt.children[kt]||!ti(mt.children[kt],at.children[kt],et))return!1;return!0},subset:Pt},Qe={exact:function(mt,at){return bi(mt,at)},subset:function(mt,at){return Object.keys(at).length<=Object.keys(mt).length&&Object.keys(at).every(et=>mi(mt[et],at[et]))},ignored:()=>!0};function Ei(mt,at,et){return Ce[et.paths](mt.root,at.root,et.matrixParams)&&Qe[et.queryParams](mt.queryParams,at.queryParams)&&!("exact"===et.fragment&&mt.fragment!==at.fragment)}function Pt(mt,at,et){return dt(mt,at,at.segments,et)}function dt(mt,at,et,kt){if(mt.segments.length>et.length){const jt=mt.segments.slice(0,et.length);return!(!Sn(jt,et)||at.hasChildren()||!Nt(jt,et,kt))}if(mt.segments.length===et.length){if(!Sn(mt.segments,et)||!Nt(mt.segments,et,kt))return!1;for(const jt in at.children)if(!mt.children[jt]||!Pt(mt.children[jt],at.children[jt],kt))return!1;return!0}{const jt=et.slice(0,mt.segments.length),me=et.slice(mt.segments.length);return!!(Sn(mt.segments,jt)&&Nt(mt.segments,jt,kt)&&mt.children[ue])&&dt(mt.children[ue],at,me,kt)}}function Nt(mt,at,et){return at.every((kt,jt)=>Qe[et](mt[jt].parameters,kt.parameters))}class pe{constructor(at,et,kt){this.root=at,this.queryParams=et,this.fragment=kt}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=be(this.queryParams)),this._queryParamMap}toString(){return Pe.serialize(this)}}class Le{constructor(at,et){this.segments=at,this.children=et,this.parent=null,Ii(et,(kt,jt)=>kt.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return di(this)}}class Vi{constructor(at,et){this.path=at,this.parameters=et}get parameterMap(){return this._parameterMap||(this._parameterMap=be(this.parameters)),this._parameterMap}toString(){return Ko(this)}}function Sn(mt,at){return mt.length===at.length&&mt.every((et,kt)=>et.path===at[kt].path)}class pi{}class Ke{parse(at){const et=new ar(at);return new pe(et.parseRootSegment(),et.parseQueryParams(),et.parseFragment())}serialize(at){const et=`/${Oi(at.root,!0)}`,kt=function(mt){const at=Object.keys(mt).map(et=>{const kt=mt[et];return Array.isArray(kt)?kt.map(jt=>`${Rn(et)}=${Rn(jt)}`).join("&"):`${Rn(et)}=${Rn(kt)}`}).filter(et=>!!et);return at.length?`?${at.join("&")}`:""}(at.queryParams);var mt;return`${et}${kt}${"string"==typeof at.fragment?`#${mt=at.fragment,encodeURI(mt)}`:""}`}}const Pe=new Ke;function di(mt){return mt.segments.map(at=>Ko(at)).join("/")}function Oi(mt,at){if(!mt.hasChildren())return di(mt);if(at){const et=mt.children[ue]?Oi(mt.children[ue],!1):"",kt=[];return Ii(mt.children,(jt,me)=>{me!==ue&&kt.push(`${me}:${Oi(jt,!1)}`)}),kt.length>0?`${et}(${kt.join("//")})`:et}{const et=function(mt,at){let et=[];return Ii(mt.children,(kt,jt)=>{jt===ue&&(et=et.concat(at(kt,jt)))}),Ii(mt.children,(kt,jt)=>{jt!==ue&&(et=et.concat(at(kt,jt)))}),et}(mt,(kt,jt)=>jt===ue?[Oi(mt.children[ue],!1)]:[`${jt}:${Oi(kt,!1)}`]);return 1===Object.keys(mt.children).length&&null!=mt.children[ue]?`${di(mt)}/${et[0]}`:`${di(mt)}/(${et.join("//")})`}}function dn(mt){return encodeURIComponent(mt).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rn(mt){return dn(mt).replace(/%3B/gi,";")}function xr(mt){return dn(mt).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function io(mt){return decodeURIComponent(mt)}function _o(mt){return io(mt.replace(/\+/g,"%20"))}function Ko(mt){return`${xr(mt.path)}${function(mt){return Object.keys(mt).map(at=>`;${xr(at)}=${xr(mt[at])}`).join("")}(mt.parameters)}`}const ss=/^[^\/()?;=#]+/;function Zn(mt){const at=mt.match(ss);return at?at[0]:""}const Di=/^[^=?&#]+/,sr=/^[^&#]+/;class ar{constructor(at){this.url=at,this.remaining=at}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){const at={};if(this.consumeOptional("?"))do{this.parseQueryParam(at)}while(this.consumeOptional("&"));return at}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const at=[];for(this.peekStartsWith("(")||at.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),at.push(this.parseSegment());let et={};this.peekStartsWith("/(")&&(this.capture("/"),et=this.parseParens(!0));let kt={};return this.peekStartsWith("(")&&(kt=this.parseParens(!1)),(at.length>0||Object.keys(et).length>0)&&(kt[ue]=new Le(at,et)),kt}parseSegment(){const at=Zn(this.remaining);if(""===at&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(at),new Vi(io(at),this.parseMatrixParams())}parseMatrixParams(){const at={};for(;this.consumeOptional(";");)this.parseParam(at);return at}parseParam(at){const et=Zn(this.remaining);if(!et)return;this.capture(et);let kt="";if(this.consumeOptional("=")){const jt=Zn(this.remaining);jt&&(kt=jt,this.capture(kt))}at[io(et)]=io(kt)}parseQueryParam(at){const et=function(mt){const at=mt.match(Di);return at?at[0]:""}(this.remaining);if(!et)return;this.capture(et);let kt="";if(this.consumeOptional("=")){const Ue=function(mt){const at=mt.match(sr);return at?at[0]:""}(this.remaining);Ue&&(kt=Ue,this.capture(kt))}const jt=_o(et),me=_o(kt);if(at.hasOwnProperty(jt)){let Ue=at[jt];Array.isArray(Ue)||(Ue=[Ue],at[jt]=Ue),Ue.push(me)}else at[jt]=me}parseParens(at){const et={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const kt=Zn(this.remaining),jt=this.remaining[kt.length];if("/"!==jt&&")"!==jt&&";"!==jt)throw new Error(`Cannot parse url '${this.url}'`);let me;kt.indexOf(":")>-1?(me=kt.substr(0,kt.indexOf(":")),this.capture(me),this.capture(":")):at&&(me=ue);const Ue=this.parseChildren();et[me]=1===Object.keys(Ue).length?Ue[ue]:new Le([],Ue),this.consumeOptional("//")}return et}peekStartsWith(at){return this.remaining.startsWith(at)}consumeOptional(at){return!!this.peekStartsWith(at)&&(this.remaining=this.remaining.substring(at.length),!0)}capture(at){if(!this.consumeOptional(at))throw new Error(`Expected "${at}".`)}}class Sr{constructor(at){this._root=at}get root(){return this._root.value}parent(at){const et=this.pathFromRoot(at);return et.length>1?et[et.length-2]:null}children(at){const et=Yr(at,this._root);return et?et.children.map(kt=>kt.value):[]}firstChild(at){const et=Yr(at,this._root);return et&&et.children.length>0?et.children[0].value:null}siblings(at){const et=Tr(at,this._root);return et.length<2?[]:et[et.length-2].children.map(jt=>jt.value).filter(jt=>jt!==at)}pathFromRoot(at){return Tr(at,this._root).map(et=>et.value)}}function Yr(mt,at){if(mt===at.value)return at;for(const et of at.children){const kt=Yr(mt,et);if(kt)return kt}return null}function Tr(mt,at){if(mt===at.value)return[at];for(const et of at.children){const kt=Tr(mt,et);if(kt.length)return kt.unshift(at),kt}return[]}class Ui{constructor(at,et){this.value=at,this.children=et}toString(){return`TreeNode(${this.value})`}}function On(mt){const at={};return mt&&mt.children.forEach(et=>at[et.value.outlet]=et),at}class Nn extends Sr{constructor(at,et){super(at),this.snapshot=et,Jn(this,at)}toString(){return this.snapshot.toString()}}function de(mt,at){const et=function(mt,at){const Ue=new Qn([],{},{},"",{},ue,at,null,mt.root,-1,{});return new qn("",new Ui(Ue,[]))}(mt,at),kt=new G.X([new Vi("",{})]),jt=new G.X({}),me=new G.X({}),Ue=new G.X({}),ei=new G.X(""),xi=new Ai(kt,jt,Ue,ei,me,ue,at,et.root);return xi.snapshot=et.root,new Nn(new Ui(xi,[]),et)}class Ai{constructor(at,et,kt,jt,me,Ue,ei,xi){this.url=at,this.params=et,this.queryParams=kt,this.fragment=jt,this.data=me,this.outlet=Ue,this.component=ei,this._futureSnapshot=xi}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,st.U)(at=>be(at)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,st.U)(at=>be(at)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ji(mt,at="emptyOnly"){const et=mt.pathFromRoot;let kt=0;if("always"!==at)for(kt=et.length-1;kt>=1;){const jt=et[kt],me=et[kt-1];if(jt.routeConfig&&""===jt.routeConfig.path)kt--;else{if(me.component)break;kt--}}return function(mt){return mt.reduce((at,et)=>({params:Object.assign(Object.assign({},at.params),et.params),data:Object.assign(Object.assign({},at.data),et.data),resolve:Object.assign(Object.assign({},at.resolve),et._resolvedData)}),{params:{},data:{},resolve:{}})}(et.slice(kt))}class Qn{constructor(at,et,kt,jt,me,Ue,ei,xi,pn,lr,Hn){this.url=at,this.params=et,this.queryParams=kt,this.fragment=jt,this.data=me,this.outlet=Ue,this.component=ei,this.routeConfig=xi,this._urlSegment=pn,this._lastPathIndex=lr,this._resolve=Hn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=be(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=be(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(kt=>kt.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qn extends Sr{constructor(at,et){super(et),this.url=at,Jn(this,et)}toString(){return Tn(this._root)}}function Jn(mt,at){at.value._routerState=mt,at.children.forEach(et=>Jn(mt,et))}function Tn(mt){const at=mt.children.length>0?` { ${mt.children.map(Tn).join(", ")} } `:"";return`${mt.value}${at}`}function Jo(mt){if(mt.snapshot){const at=mt.snapshot,et=mt._futureSnapshot;mt.snapshot=et,bi(at.queryParams,et.queryParams)||mt.queryParams.next(et.queryParams),at.fragment!==et.fragment&&mt.fragment.next(et.fragment),bi(at.params,et.params)||mt.params.next(et.params),function(mt,at){if(mt.length!==at.length)return!1;for(let et=0;et<mt.length;++et)if(!bi(mt[et],at[et]))return!1;return!0}(at.url,et.url)||mt.url.next(et.url),bi(at.data,et.data)||mt.data.next(et.data)}else mt.snapshot=mt._futureSnapshot,mt.data.next(mt._futureSnapshot.data)}function no(mt,at){const et=bi(mt.params,at.params)&&function(mt,at){return Sn(mt,at)&&mt.every((et,kt)=>bi(et.parameters,at[kt].parameters))}(mt.url,at.url);return et&&!(!mt.parent!=!at.parent)&&(!mt.parent||no(mt.parent,at.parent))}function vo(mt,at,et){if(et&&mt.shouldReuseRoute(at.value,et.value.snapshot)){const kt=et.value;kt._futureSnapshot=at.value;const jt=function(mt,at,et){return at.children.map(kt=>{for(const jt of et.children)if(mt.shouldReuseRoute(kt.value,jt.value.snapshot))return vo(mt,kt,jt);return vo(mt,kt)})}(mt,at,et);return new Ui(kt,jt)}{if(mt.shouldAttach(at.value)){const me=mt.retrieve(at.value);if(null!==me){const Ue=me.route;return Ue.value._futureSnapshot=at.value,Ue.children=at.children.map(ei=>vo(mt,ei)),Ue}}const kt=function(mt){return new Ai(new G.X(mt.url),new G.X(mt.params),new G.X(mt.queryParams),new G.X(mt.fragment),new G.X(mt.data),mt.outlet,mt.component,mt)}(at.value),jt=at.children.map(me=>vo(mt,me));return new Ui(kt,jt)}}function ho(mt){return"object"==typeof mt&&null!=mt&&!mt.outlets&&!mt.segmentPath}function Go(mt){return"object"==typeof mt&&null!=mt&&mt.outlets}function sl(mt,at,et,kt,jt){let me={};return kt&&Ii(kt,(Ue,ei)=>{me[ei]=Array.isArray(Ue)?Ue.map(xi=>`${xi}`):`${Ue}`}),new pe(et.root===mt?at:po(et.root,mt,at),me,jt)}function po(mt,at,et){const kt={};return Ii(mt.children,(jt,me)=>{kt[me]=jt===at?et:po(jt,at,et)}),new Le(mt.segments,kt)}class ya{constructor(at,et,kt){if(this.isAbsolute=at,this.numberOfDoubleDots=et,this.commands=kt,at&&kt.length>0&&ho(kt[0]))throw new Error("Root segment cannot have matrix parameters");const jt=kt.find(Go);if(jt&&jt!==li(kt))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cr{constructor(at,et,kt){this.segmentGroup=at,this.processChildren=et,this.index=kt}}function qs(mt,at,et){if(mt||(mt=new Le([],{})),0===mt.segments.length&&mt.hasChildren())return Ts(mt,at,et);const kt=function(mt,at,et){let kt=0,jt=at;const me={match:!1,pathIndex:0,commandIndex:0};for(;jt<mt.segments.length;){if(kt>=et.length)return me;const Ue=mt.segments[jt],ei=et[kt];if(Go(ei))break;const xi=`${ei}`,pn=kt<et.length-1?et[kt+1]:null;if(jt>0&&void 0===xi)break;if(xi&&pn&&"object"==typeof pn&&void 0===pn.outlets){if(!as(xi,pn,Ue))return me;kt+=2}else{if(!as(xi,{},Ue))return me;kt++}jt++}return{match:!0,pathIndex:jt,commandIndex:kt}}(mt,at,et),jt=et.slice(kt.commandIndex);if(kt.match&&kt.pathIndex<mt.segments.length){const me=new Le(mt.segments.slice(0,kt.pathIndex),{});return me.children[ue]=new Le(mt.segments.slice(kt.pathIndex),mt.children),Ts(me,0,jt)}return kt.match&&0===jt.length?new Le(mt.segments,{}):kt.match&&!mt.hasChildren()?ha(mt,at,et):kt.match?Ts(mt,0,jt):ha(mt,at,et)}function Ts(mt,at,et){if(0===et.length)return new Le(mt.segments,{});{const kt=function(mt){return Go(mt[0])?mt[0].outlets:{[ue]:mt}}(et),jt={};return Ii(kt,(me,Ue)=>{"string"==typeof me&&(me=[me]),null!==me&&(jt[Ue]=qs(mt.children[Ue],at,me))}),Ii(mt.children,(me,Ue)=>{void 0===kt[Ue]&&(jt[Ue]=me)}),new Le(mt.segments,jt)}}function ha(mt,at,et){const kt=mt.segments.slice(0,at);let jt=0;for(;jt<et.length;){const me=et[jt];if(Go(me)){const xi=Aa(me.outlets);return new Le(kt,xi)}if(0===jt&&ho(et[0])){kt.push(new Vi(mt.segments[at].path,ta(et[0]))),jt++;continue}const Ue=Go(me)?me.outlets[ue]:`${me}`,ei=jt<et.length-1?et[jt+1]:null;Ue&&ei&&ho(ei)?(kt.push(new Vi(Ue,ta(ei))),jt+=2):(kt.push(new Vi(Ue,{})),jt++)}return new Le(kt,{})}function Aa(mt){const at={};return Ii(mt,(et,kt)=>{"string"==typeof et&&(et=[et]),null!==et&&(at[kt]=ha(new Le([],{}),0,et))}),at}function ta(mt){const at={};return Ii(mt,(et,kt)=>at[kt]=`${et}`),at}function as(mt,at,et){return mt==et.path&&bi(at,et.parameters)}class al{constructor(at,et,kt,jt){this.routeReuseStrategy=at,this.futureState=et,this.currState=kt,this.forwardEvent=jt}activate(at){const et=this.futureState._root,kt=this.currState?this.currState._root:null;this.deactivateChildRoutes(et,kt,at),Jo(this.futureState.root),this.activateChildRoutes(et,kt,at)}deactivateChildRoutes(at,et,kt){const jt=On(et);at.children.forEach(me=>{const Ue=me.value.outlet;this.deactivateRoutes(me,jt[Ue],kt),delete jt[Ue]}),Ii(jt,(me,Ue)=>{this.deactivateRouteAndItsChildren(me,kt)})}deactivateRoutes(at,et,kt){const jt=at.value,me=et?et.value:null;if(jt===me)if(jt.component){const Ue=kt.getContext(jt.outlet);Ue&&this.deactivateChildRoutes(at,et,Ue.children)}else this.deactivateChildRoutes(at,et,kt);else me&&this.deactivateRouteAndItsChildren(et,kt)}deactivateRouteAndItsChildren(at,et){at.value.component&&this.routeReuseStrategy.shouldDetach(at.value.snapshot)?this.detachAndStoreRouteSubtree(at,et):this.deactivateRouteAndOutlet(at,et)}detachAndStoreRouteSubtree(at,et){const kt=et.getContext(at.value.outlet),jt=kt&&at.value.component?kt.children:et,me=On(at);for(const Ue of Object.keys(me))this.deactivateRouteAndItsChildren(me[Ue],jt);if(kt&&kt.outlet){const Ue=kt.outlet.detach(),ei=kt.children.onOutletDeactivated();this.routeReuseStrategy.store(at.value.snapshot,{componentRef:Ue,route:at,contexts:ei})}}deactivateRouteAndOutlet(at,et){const kt=et.getContext(at.value.outlet),jt=kt&&at.value.component?kt.children:et,me=On(at);for(const Ue of Object.keys(me))this.deactivateRouteAndItsChildren(me[Ue],jt);kt&&kt.outlet&&(kt.outlet.deactivate(),kt.children.onOutletDeactivated(),kt.attachRef=null,kt.resolver=null,kt.route=null)}activateChildRoutes(at,et,kt){const jt=On(et);at.children.forEach(me=>{this.activateRoutes(me,jt[me.value.outlet],kt),this.forwardEvent(new te(me.value.snapshot))}),at.children.length&&this.forwardEvent(new Te(at.value.snapshot))}activateRoutes(at,et,kt){const jt=at.value,me=et?et.value:null;if(Jo(jt),jt===me)if(jt.component){const Ue=kt.getOrCreateContext(jt.outlet);this.activateChildRoutes(at,et,Ue.children)}else this.activateChildRoutes(at,et,kt);else if(jt.component){const Ue=kt.getOrCreateContext(jt.outlet);if(this.routeReuseStrategy.shouldAttach(jt.snapshot)){const ei=this.routeReuseStrategy.retrieve(jt.snapshot);this.routeReuseStrategy.store(jt.snapshot,null),Ue.children.onOutletReAttached(ei.contexts),Ue.attachRef=ei.componentRef,Ue.route=ei.route.value,Ue.outlet&&Ue.outlet.attach(ei.componentRef,ei.route.value),Jo(ei.route.value),this.activateChildRoutes(at,null,Ue.children)}else{const ei=function(mt){for(let at=mt.parent;at;at=at.parent){const et=at.routeConfig;if(et&&et._loadedConfig)return et._loadedConfig;if(et&&et.component)return null}return null}(jt.snapshot),xi=ei?ei.module.componentFactoryResolver:null;Ue.attachRef=null,Ue.route=jt,Ue.resolver=xi,Ue.outlet&&Ue.outlet.activateWith(jt,xi),this.activateChildRoutes(at,null,Ue.children)}}else this.activateChildRoutes(at,null,kt)}}class Wo{constructor(at,et){this.routes=at,this.module=et}}function No(mt){return"function"==typeof mt}function _r(mt){return mt instanceof pe}const Xr=Symbol("INITIAL_VALUE");function Oo(){return(0,Z.w)(mt=>(0,it.a)(mt.map(at=>at.pipe((0,ut.q)(1),(0,Zt.O)(Xr)))).pipe(Bt((at,et)=>{let kt=!1;return et.reduce((jt,me,Ue)=>jt!==Xr?jt:(me===Xr&&(kt=!0),kt||!1!==me&&Ue!==et.length-1&&!_r(me)?jt:me),at)},Xr),(0,Kt.h)(at=>at!==Xr),(0,st.U)(at=>_r(at)?at:!0===at),(0,ut.q)(1)))}class _s{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Qr,this.attachRef=null}}class Qr{constructor(){this.contexts=new Map}onChildOutletCreated(at,et){const kt=this.getOrCreateContext(at);kt.outlet=et,this.contexts.set(at,kt)}onChildOutletDestroyed(at){const et=this.getContext(at);et&&(et.outlet=null,et.attachRef=null)}onOutletDeactivated(){const at=this.contexts;return this.contexts=new Map,at}onOutletReAttached(at){this.contexts=at}getOrCreateContext(at){let et=this.getContext(at);return et||(et=new _s,this.contexts.set(at,et)),et}getContext(at){return this.contexts.get(at)||null}}let Gs=(()=>{class mt{constructor(et,kt,jt,me,Ue){this.parentContexts=et,this.location=kt,this.resolver=jt,this.changeDetector=Ue,this.activated=null,this._activatedRoute=null,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.name=me||ue,et.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const et=this.parentContexts.getContext(this.name);et&&et.route&&(et.attachRef?this.attach(et.attachRef,et.route):this.activateWith(et.route,et.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const et=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(et.instance),et}attach(et,kt){this.activated=et,this._activatedRoute=kt,this.location.insert(et.hostView),this.attachEvents.emit(et.instance)}deactivate(){if(this.activated){const et=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(et)}}activateWith(et,kt){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=et;const Ue=(kt=kt||this.resolver).resolveComponentFactory(et._futureSnapshot.routeConfig.component),ei=this.parentContexts.getOrCreateContext(this.name).children,xi=new Ar(et,ei,this.location.injector);this.activated=this.location.createComponent(Ue,this.location.length,xi),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return mt.\u0275fac=function(et){return new(et||mt)(y.Y36(Qr),y.Y36(y.s_b),y.Y36(y._Vd),y.$8M("name"),y.Y36(y.sBO))},mt.\u0275dir=y.lG2({type:mt,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),mt})();class Ar{constructor(at,et,kt){this.route=at,this.childContexts=et,this.parent=kt}get(at,et){return at===Ai?this.route:at===Qr?this.childContexts:this.parent.get(at,et)}}let ea=(()=>{class mt{}return mt.\u0275fac=function(et){return new(et||mt)},mt.\u0275cmp=y.Xpm({type:mt,selectors:[["ng-component"]],decls:1,vars:0,template:function(et,kt){1&et&&y._UZ(0,"router-outlet")},directives:[Gs],encapsulation:2}),mt})();function Hr(mt,at=""){for(let et=0;et<mt.length;et++){const kt=mt[et];vs(kt,Na(at,kt))}}function vs(mt,at){mt.children&&Hr(mt.children,at)}function Na(mt,at){return at?mt||at.path?mt&&!at.path?`${mt}/`:!mt&&at.path?at.path:`${mt}/${at.path}`:"":mt}function cs(mt){const at=mt.children&&mt.children.map(cs),et=at?Object.assign(Object.assign({},mt),{children:at}):Object.assign({},mt);return!et.component&&(at||et.loadChildren)&&et.outlet&&et.outlet!==ue&&(et.component=ea),et}function Ao(mt){return mt.outlet||ue}function us(mt,at){const et=mt.filter(kt=>Ao(kt)===at);return et.push(...mt.filter(kt=>Ao(kt)!==at)),et}const ll={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Or(mt,at,et){var kt;if(""===at.path)return"full"===at.pathMatch&&(mt.hasChildren()||et.length>0)?Object.assign({},ll):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const me=(at.matcher||Xe)(et,mt,at);if(!me)return Object.assign({},ll);const Ue={};Ii(me.posParams,(xi,pn)=>{Ue[pn]=xi.path});const ei=me.consumed.length>0?Object.assign(Object.assign({},Ue),me.consumed[me.consumed.length-1].parameters):Ue;return{matched:!0,consumedSegments:me.consumed,lastChild:me.consumed.length,parameters:ei,positionalParamSegments:null!==(kt=me.posParams)&&void 0!==kt?kt:{}}}function xn(mt,at,et,kt,jt="corrected"){if(et.length>0&&function(mt,at,et){return et.some(kt=>j(mt,at,kt)&&Ao(kt)!==ue)}(mt,et,kt)){const Ue=new Le(at,function(mt,at,et,kt){const jt={};jt[ue]=kt,kt._sourceSegment=mt,kt._segmentIndexShift=at.length;for(const me of et)if(""===me.path&&Ao(me)!==ue){const Ue=new Le([],{});Ue._sourceSegment=mt,Ue._segmentIndexShift=at.length,jt[Ao(me)]=Ue}return jt}(mt,at,kt,new Le(et,mt.children)));return Ue._sourceSegment=mt,Ue._segmentIndexShift=at.length,{segmentGroup:Ue,slicedSegments:[]}}if(0===et.length&&function(mt,at,et){return et.some(kt=>j(mt,at,kt))}(mt,et,kt)){const Ue=new Le(mt.segments,function(mt,at,et,kt,jt,me){const Ue={};for(const ei of kt)if(j(mt,et,ei)&&!jt[Ao(ei)]){const xi=new Le([],{});xi._sourceSegment=mt,xi._segmentIndexShift="legacy"===me?mt.segments.length:at.length,Ue[Ao(ei)]=xi}return Object.assign(Object.assign({},jt),Ue)}(mt,at,et,kt,mt.children,jt));return Ue._sourceSegment=mt,Ue._segmentIndexShift=at.length,{segmentGroup:Ue,slicedSegments:et}}const me=new Le(mt.segments,mt.children);return me._sourceSegment=mt,me._segmentIndexShift=at.length,{segmentGroup:me,slicedSegments:et}}function j(mt,at,et){return(!(mt.hasChildren()||at.length>0)||"full"!==et.pathMatch)&&""===et.path}function xt(mt,at,et,kt){return!!(Ao(mt)===kt||kt!==ue&&j(at,et,mt))&&("**"===mt.path||Or(at,mt,et).matched)}function Be(mt,at,et){return 0===at.length&&!mt.children[et]}class Ti{constructor(at){this.segmentGroup=at||null}}class an{constructor(at){this.urlTree=at}}function Vn(mt){return new t.y(at=>at.error(new Ti(mt)))}function wr(mt){return new t.y(at=>at.error(new an(mt)))}function vr(mt){return new t.y(at=>at.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${mt}'`)))}class rr{constructor(at,et,kt,jt,me){this.configLoader=et,this.urlSerializer=kt,this.urlTree=jt,this.config=me,this.allowRedirects=!0,this.ngModule=at.get(y.h0i)}apply(){const at=xn(this.urlTree.root,[],[],this.config).segmentGroup,et=new Le(at.segments,at.children);return this.expandSegmentGroup(this.ngModule,this.config,et,ue).pipe((0,st.U)(me=>this.createUrlTree(Gn(me),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,vt.K)(me=>{if(me instanceof an)return this.allowRedirects=!1,this.match(me.urlTree);throw me instanceof Ti?this.noMatchError(me):me}))}match(at){return this.expandSegmentGroup(this.ngModule,this.config,at.root,ue).pipe((0,st.U)(jt=>this.createUrlTree(Gn(jt),at.queryParams,at.fragment))).pipe((0,vt.K)(jt=>{throw jt instanceof Ti?this.noMatchError(jt):jt}))}noMatchError(at){return new Error(`Cannot match any routes. URL Segment: '${at.segmentGroup}'`)}createUrlTree(at,et,kt){const jt=at.segments.length>0?new Le([],{[ue]:at}):at;return new pe(jt,et,kt)}expandSegmentGroup(at,et,kt,jt){return 0===kt.segments.length&&kt.hasChildren()?this.expandChildren(at,et,kt).pipe((0,st.U)(me=>new Le([],me))):this.expandSegment(at,kt,et,kt.segments,jt,!0)}expandChildren(at,et,kt){const jt=[];for(const me of Object.keys(kt.children))"primary"===me?jt.unshift(me):jt.push(me);return(0,D.D)(jt).pipe((0,At.b)(me=>{const Ue=kt.children[me],ei=us(et,me);return this.expandSegmentGroup(at,ei,Ue,me).pipe((0,st.U)(xi=>({segment:xi,outlet:me})))}),Bt((me,Ue)=>(me[Ue.outlet]=Ue.segment,me),{}),function(mt,at){const et=arguments.length>=2;return kt=>kt.pipe(mt?(0,Kt.h)((jt,me)=>mt(jt,me,kt)):ht.y,It(1),et?ft(at):St(()=>new e))}())}expandSegment(at,et,kt,jt,me,Ue){return(0,D.D)(kt).pipe((0,At.b)(ei=>this.expandSegmentAgainstRoute(at,et,kt,ei,jt,me,Ue).pipe((0,vt.K)(pn=>{if(pn instanceof Ti)return(0,P.of)(null);throw pn}))),ot(ei=>!!ei),(0,vt.K)((ei,xi)=>{if(ei instanceof e||"EmptyError"===ei.name){if(Be(et,jt,me))return(0,P.of)(new Le([],{}));throw new Ti(et)}throw ei}))}expandSegmentAgainstRoute(at,et,kt,jt,me,Ue,ei){return xt(jt,et,me,Ue)?void 0===jt.redirectTo?this.matchSegmentAgainstRoute(at,et,jt,me,Ue):ei&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(at,et,kt,jt,me,Ue):Vn(et):Vn(et)}expandSegmentAgainstRouteUsingRedirect(at,et,kt,jt,me,Ue){return"**"===jt.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(at,kt,jt,Ue):this.expandRegularSegmentAgainstRouteUsingRedirect(at,et,kt,jt,me,Ue)}expandWildCardWithParamsAgainstRouteUsingRedirect(at,et,kt,jt){const me=this.applyRedirectCommands([],kt.redirectTo,{});return kt.redirectTo.startsWith("/")?wr(me):this.lineralizeSegments(kt,me).pipe((0,re.z)(Ue=>{const ei=new Le(Ue,{});return this.expandSegment(at,ei,et,Ue,jt,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(at,et,kt,jt,me,Ue){const{matched:ei,consumedSegments:xi,lastChild:pn,positionalParamSegments:lr}=Or(et,jt,me);if(!ei)return Vn(et);const Hn=this.applyRedirectCommands(xi,jt.redirectTo,lr);return jt.redirectTo.startsWith("/")?wr(Hn):this.lineralizeSegments(jt,Hn).pipe((0,re.z)(kr=>this.expandSegment(at,et,kt,kr.concat(me.slice(pn)),Ue,!1)))}matchSegmentAgainstRoute(at,et,kt,jt,me){if("**"===kt.path)return kt.loadChildren?(kt._loadedConfig?(0,P.of)(kt._loadedConfig):this.configLoader.load(at.injector,kt)).pipe((0,st.U)(kr=>(kt._loadedConfig=kr,new Le(jt,{})))):(0,P.of)(new Le(jt,{}));const{matched:Ue,consumedSegments:ei,lastChild:xi}=Or(et,kt,jt);if(!Ue)return Vn(et);const pn=jt.slice(xi);return this.getChildConfig(at,kt,jt).pipe((0,re.z)(Hn=>{const kr=Hn.module,so=Hn.routes,{segmentGroup:cl,slicedSegments:Xs}=xn(et,ei,pn,so),Ca=new Le(cl.segments,cl.children);if(0===Xs.length&&Ca.hasChildren())return this.expandChildren(kr,so,Ca).pipe((0,st.U)(Tl=>new Le(ei,Tl)));if(0===so.length&&0===Xs.length)return(0,P.of)(new Le(ei,{}));const As=Ao(kt)===me;return this.expandSegment(kr,Ca,so,Xs,As?ue:me,!0).pipe((0,st.U)(sa=>new Le(ei.concat(sa.segments),sa.children)))}))}getChildConfig(at,et,kt){return et.children?(0,P.of)(new Wo(et.children,at)):et.loadChildren?void 0!==et._loadedConfig?(0,P.of)(et._loadedConfig):this.runCanLoadGuards(at.injector,et,kt).pipe((0,re.z)(jt=>{return jt?this.configLoader.load(at.injector,et).pipe((0,st.U)(me=>(et._loadedConfig=me,me))):(mt=et,new t.y(at=>at.error(zt(`Cannot load children because the guard of the route "path: '${mt.path}'" returned false`))));var mt})):(0,P.of)(new Wo([],at))}runCanLoadGuards(at,et,kt){const jt=et.canLoad;if(!jt||0===jt.length)return(0,P.of)(!0);const me=jt.map(Ue=>{const ei=at.get(Ue);let xi;if((mt=ei)&&No(mt.canLoad))xi=ei.canLoad(et,kt);else{if(!No(ei))throw new Error("Invalid CanLoad guard");xi=ei(et,kt)}var mt;return ni(xi)});return(0,P.of)(me).pipe(Oo(),(0,ve.b)(Ue=>{if(!_r(Ue))return;const ei=zt(`Redirecting to "${this.urlSerializer.serialize(Ue)}"`);throw ei.url=Ue,ei}),(0,st.U)(Ue=>!0===Ue))}lineralizeSegments(at,et){let kt=[],jt=et.root;for(;;){if(kt=kt.concat(jt.segments),0===jt.numberOfChildren)return(0,P.of)(kt);if(jt.numberOfChildren>1||!jt.children[ue])return vr(at.redirectTo);jt=jt.children[ue]}}applyRedirectCommands(at,et,kt){return this.applyRedirectCreatreUrlTree(et,this.urlSerializer.parse(et),at,kt)}applyRedirectCreatreUrlTree(at,et,kt,jt){const me=this.createSegmentGroup(at,et.root,kt,jt);return new pe(me,this.createQueryParams(et.queryParams,this.urlTree.queryParams),et.fragment)}createQueryParams(at,et){const kt={};return Ii(at,(jt,me)=>{if("string"==typeof jt&&jt.startsWith(":")){const ei=jt.substring(1);kt[me]=et[ei]}else kt[me]=jt}),kt}createSegmentGroup(at,et,kt,jt){const me=this.createSegments(at,et.segments,kt,jt);let Ue={};return Ii(et.children,(ei,xi)=>{Ue[xi]=this.createSegmentGroup(at,ei,kt,jt)}),new Le(me,Ue)}createSegments(at,et,kt,jt){return et.map(me=>me.path.startsWith(":")?this.findPosParam(at,me,jt):this.findOrReturn(me,kt))}findPosParam(at,et,kt){const jt=kt[et.path.substring(1)];if(!jt)throw new Error(`Cannot redirect to '${at}'. Cannot find '${et.path}'.`);return jt}findOrReturn(at,et){let kt=0;for(const jt of et){if(jt.path===at.path)return et.splice(kt),jt;kt++}return at}}function Gn(mt){const at={};for(const kt of Object.keys(mt.children)){const me=Gn(mt.children[kt]);(me.segments.length>0||me.hasChildren())&&(at[kt]=me)}return function(mt){if(1===mt.numberOfChildren&&mt.children[ue]){const at=mt.children[ue];return new Le(mt.segments.concat(at.segments),at.children)}return mt}(new Le(mt.segments,at))}class Ka{constructor(at){this.path=at,this.route=this.path[this.path.length-1]}}class zo{constructor(at,et){this.component=at,this.route=et}}function Ja(mt,at,et){const kt=mt._root;return Ji(kt,at?at._root:null,et,[kt.value])}function Ss(mt,at,et){const kt=function(mt){if(!mt)return null;for(let at=mt.parent;at;at=at.parent){const et=at.routeConfig;if(et&&et._loadedConfig)return et._loadedConfig}return null}(at);return(kt?kt.module.injector:et).get(mt)}function Ji(mt,at,et,kt,jt={canDeactivateChecks:[],canActivateChecks:[]}){const me=On(at);return mt.children.forEach(Ue=>{(function(mt,at,et,kt,jt={canDeactivateChecks:[],canActivateChecks:[]}){const me=mt.value,Ue=at?at.value:null,ei=et?et.getContext(mt.value.outlet):null;if(Ue&&me.routeConfig===Ue.routeConfig){const xi=function(mt,at,et){if("function"==typeof et)return et(mt,at);switch(et){case"pathParamsChange":return!Sn(mt.url,at.url);case"pathParamsOrQueryParamsChange":return!Sn(mt.url,at.url)||!bi(mt.queryParams,at.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!no(mt,at)||!bi(mt.queryParams,at.queryParams);default:return!no(mt,at)}}(Ue,me,me.routeConfig.runGuardsAndResolvers);xi?jt.canActivateChecks.push(new Ka(kt)):(me.data=Ue.data,me._resolvedData=Ue._resolvedData),Ji(mt,at,me.component?ei?ei.children:null:et,kt,jt),xi&&ei&&ei.outlet&&ei.outlet.isActivated&&jt.canDeactivateChecks.push(new zo(ei.outlet.component,Ue))}else Ue&&z(at,ei,jt),jt.canActivateChecks.push(new Ka(kt)),Ji(mt,null,me.component?ei?ei.children:null:et,kt,jt)})(Ue,me[Ue.value.outlet],et,kt.concat([Ue.value]),jt),delete me[Ue.value.outlet]}),Ii(me,(Ue,ei)=>z(Ue,et.getContext(ei),jt)),jt}function z(mt,at,et){const kt=On(mt),jt=mt.value;Ii(kt,(me,Ue)=>{z(me,jt.component?at?at.children.getContext(Ue):null:at,et)}),et.canDeactivateChecks.push(new zo(jt.component&&at&&at.outlet&&at.outlet.isActivated?at.outlet.component:null,jt))}class sn{}function fn(mt){return new t.y(at=>at.error(mt))}class cr{constructor(at,et,kt,jt,me,Ue){this.rootComponentType=at,this.config=et,this.urlTree=kt,this.url=jt,this.paramsInheritanceStrategy=me,this.relativeLinkResolution=Ue}recognize(){const at=xn(this.urlTree.root,[],[],this.config.filter(Ue=>void 0===Ue.redirectTo),this.relativeLinkResolution).segmentGroup,et=this.processSegmentGroup(this.config,at,ue);if(null===et)return null;const kt=new Qn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ue,this.rootComponentType,null,this.urlTree.root,-1,{}),jt=new Ui(kt,et),me=new qn(this.url,jt);return this.inheritParamsAndData(me._root),me}inheritParamsAndData(at){const et=at.value,kt=ji(et,this.paramsInheritanceStrategy);et.params=Object.freeze(kt.params),et.data=Object.freeze(kt.data),at.children.forEach(jt=>this.inheritParamsAndData(jt))}processSegmentGroup(at,et,kt){return 0===et.segments.length&&et.hasChildren()?this.processChildren(at,et):this.processSegment(at,et,et.segments,kt)}processChildren(at,et){const kt=[];for(const me of Object.keys(et.children)){const Ue=et.children[me],ei=us(at,me),xi=this.processSegmentGroup(ei,Ue,me);if(null===xi)return null;kt.push(...xi)}const jt=Wr(kt);return jt.sort((at,et)=>at.value.outlet===ue?-1:et.value.outlet===ue?1:at.value.outlet.localeCompare(et.value.outlet)),jt}processSegment(at,et,kt,jt){for(const me of at){const Ue=this.processSegmentAgainstRoute(me,et,kt,jt);if(null!==Ue)return Ue}return Be(et,kt,jt)?[]:null}processSegmentAgainstRoute(at,et,kt,jt){if(at.redirectTo||!xt(at,et,kt,jt))return null;let me,Ue=[],ei=[];if("**"===at.path){const so=kt.length>0?li(kt).parameters:{};me=new Qn(kt,so,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ws(at),Ao(at),at.component,at,$o(et),xo(et)+kt.length,ws(at))}else{const so=Or(et,at,kt);if(!so.matched)return null;Ue=so.consumedSegments,ei=kt.slice(so.lastChild),me=new Qn(Ue,so.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ws(at),Ao(at),at.component,at,$o(et),xo(et)+Ue.length,ws(at))}const xi=(mt=at).children?mt.children:mt.loadChildren?mt._loadedConfig.routes:[],{segmentGroup:pn,slicedSegments:lr}=xn(et,Ue,ei,xi.filter(so=>void 0===so.redirectTo),this.relativeLinkResolution);var mt;if(0===lr.length&&pn.hasChildren()){const so=this.processChildren(xi,pn);return null===so?null:[new Ui(me,so)]}if(0===xi.length&&0===lr.length)return[new Ui(me,[])];const Hn=Ao(at)===jt,kr=this.processSegment(xi,pn,lr,Hn?ue:jt);return null===kr?null:[new Ui(me,kr)]}}function or(mt){const at=mt.value.routeConfig;return at&&""===at.path&&void 0===at.redirectTo}function Wr(mt){const at=[],et=new Set;for(const kt of mt){if(!or(kt)){at.push(kt);continue}const jt=at.find(me=>kt.value.routeConfig===me.value.routeConfig);void 0!==jt?(jt.children.push(...kt.children),et.add(jt)):at.push(kt)}for(const kt of et){const jt=Wr(kt.children);at.push(new Ui(kt.value,jt))}return at.filter(kt=>!et.has(kt))}function $o(mt){let at=mt;for(;at._sourceSegment;)at=at._sourceSegment;return at}function xo(mt){let at=mt,et=at._segmentIndexShift?at._segmentIndexShift:0;for(;at._sourceSegment;)at=at._sourceSegment,et+=at._segmentIndexShift?at._segmentIndexShift:0;return et-1}function Ws(mt){return mt.data||{}}function ws(mt){return mt.resolve||{}}function oo(mt){return(0,Z.w)(at=>{const et=mt(at);return et?(0,D.D)(et).pipe((0,st.U)(()=>at)):(0,P.of)(at)})}class Zo extends class{shouldDetach(at){return!1}store(at,et){}shouldAttach(at){return!1}retrieve(at){return null}shouldReuseRoute(at,et){return at.routeConfig===et.routeConfig}}{}const Dn=new y.OlP("ROUTES");class jn{constructor(at,et,kt,jt){this.injector=at,this.compiler=et,this.onLoadStartListener=kt,this.onLoadEndListener=jt}load(at,et){if(et._loader$)return et._loader$;this.onLoadStartListener&&this.onLoadStartListener(et);const jt=this.loadModuleFactory(et.loadChildren).pipe((0,st.U)(me=>{this.onLoadEndListener&&this.onLoadEndListener(et);const Ue=me.create(at);return new Wo(on(Ue.injector.get(Dn,void 0,y.XFs.Self|y.XFs.Optional)).map(cs),Ue)}),(0,vt.K)(me=>{throw et._loader$=void 0,me}));return et._loader$=new v(jt,()=>new gt.x).pipe(c()),et._loader$}loadModuleFactory(at){return ni(at()).pipe((0,re.z)(et=>et instanceof y.YKP?(0,P.of)(et):(0,D.D)(this.compiler.compileModuleAsync(et))))}}class ur{shouldProcessUrl(at){return!0}extract(at){return at}merge(at,et){return at}}function fr(mt){throw mt}function Qo(mt,at,et){return at.parse("/")}function Is(mt,at){return(0,P.of)(null)}const ra={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Do=(()=>{class mt{constructor(et,kt,jt,me,Ue,ei,xi){this.rootComponentType=et,this.urlSerializer=kt,this.rootContexts=jt,this.location=me,this.config=xi,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new gt.x,this.errorHandler=fr,this.malformedUriErrorHandler=Qo,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Is,afterPreactivation:Is},this.urlHandlingStrategy=new ur,this.routeReuseStrategy=new Zo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ue.get(y.h0i),this.console=Ue.get(y.c2e);const Hn=Ue.get(y.R0b);this.isNgZoneEnabled=Hn instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(xi),this.currentUrlTree=new pe(new Le([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new jn(Ue,ei,kr=>this.triggerEvent(new Yt(kr)),kr=>this.triggerEvent(new ye(kr))),this.routerState=de(this.currentUrlTree,this.rootComponentType),this.transitions=new G.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var et;return null===(et=this.location.getState())||void 0===et?void 0:et.\u0275routerPageId}setupNavigations(et){const kt=this.events;return et.pipe((0,Kt.h)(jt=>0!==jt.id),(0,st.U)(jt=>Object.assign(Object.assign({},jt),{extractedUrl:this.urlHandlingStrategy.extract(jt.rawUrl)})),(0,Z.w)(jt=>{let me=!1,Ue=!1;return(0,P.of)(jt).pipe((0,ve.b)(ei=>{this.currentNavigation={id:ei.id,initialUrl:ei.currentRawUrl,extractedUrl:ei.extractedUrl,trigger:ei.source,extras:ei.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Z.w)(ei=>{const xi=this.browserUrlTree.toString(),pn=!this.navigated||ei.extractedUrl.toString()!==xi||xi!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||pn)&&this.urlHandlingStrategy.shouldProcessUrl(ei.rawUrl))return bs(ei.source)&&(this.browserUrlTree=ei.extractedUrl),(0,P.of)(ei).pipe((0,Z.w)(Hn=>{const kr=this.transitions.getValue();return kt.next(new Si(Hn.id,this.serializeUrl(Hn.extractedUrl),Hn.source,Hn.restoredState)),kr!==this.transitions.getValue()?Ft.E:Promise.resolve(Hn)}),function(mt,at,et,kt){return(0,Z.w)(jt=>function(mt,at,et,kt,jt){return new rr(mt,at,et,kt,jt).apply()}(mt,at,et,jt.extractedUrl,kt).pipe((0,st.U)(me=>Object.assign(Object.assign({},jt),{urlAfterRedirects:me}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ve.b)(Hn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Hn.urlAfterRedirects})}),function(mt,at,et,kt,jt){return(0,re.z)(me=>function(mt,at,et,kt,jt="emptyOnly",me="legacy"){try{const Ue=new cr(mt,at,et,kt,jt,me).recognize();return null===Ue?fn(new sn):(0,P.of)(Ue)}catch(Ue){return fn(Ue)}}(mt,at,me.urlAfterRedirects,et(me.urlAfterRedirects),kt,jt).pipe((0,st.U)(Ue=>Object.assign(Object.assign({},me),{targetSnapshot:Ue}))))}(this.rootComponentType,this.config,Hn=>this.serializeUrl(Hn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ve.b)(Hn=>{if("eager"===this.urlUpdateStrategy){if(!Hn.extras.skipLocationChange){const so=this.urlHandlingStrategy.merge(Hn.urlAfterRedirects,Hn.rawUrl);this.setBrowserUrl(so,Hn)}this.browserUrlTree=Hn.urlAfterRedirects}const kr=new Wt(Hn.id,this.serializeUrl(Hn.extractedUrl),this.serializeUrl(Hn.urlAfterRedirects),Hn.targetSnapshot);kt.next(kr)}));if(pn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:kr,extractedUrl:so,source:cl,restoredState:Xs,extras:Ca}=ei,As=new Si(kr,this.serializeUrl(so),cl,Xs);kt.next(As);const ys=de(so,this.rootComponentType).snapshot;return(0,P.of)(Object.assign(Object.assign({},ei),{targetSnapshot:ys,urlAfterRedirects:so,extras:Object.assign(Object.assign({},Ca),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ei.rawUrl,ei.resolve(null),Ft.E}),oo(ei=>{const{targetSnapshot:xi,id:pn,extractedUrl:lr,rawUrl:Hn,extras:{skipLocationChange:kr,replaceUrl:so}}=ei;return this.hooks.beforePreactivation(xi,{navigationId:pn,appliedUrlTree:lr,rawUrlTree:Hn,skipLocationChange:!!kr,replaceUrl:!!so})}),(0,ve.b)(ei=>{const xi=new Ae(ei.id,this.serializeUrl(ei.extractedUrl),this.serializeUrl(ei.urlAfterRedirects),ei.targetSnapshot);this.triggerEvent(xi)}),(0,st.U)(ei=>Object.assign(Object.assign({},ei),{guards:Ja(ei.targetSnapshot,ei.currentSnapshot,this.rootContexts)})),function(mt,at){return(0,re.z)(et=>{const{targetSnapshot:kt,currentSnapshot:jt,guards:{canActivateChecks:me,canDeactivateChecks:Ue}}=et;return 0===Ue.length&&0===me.length?(0,P.of)(Object.assign(Object.assign({},et),{guardsResult:!0})):function(mt,at,et,kt){return(0,D.D)(mt).pipe((0,re.z)(jt=>function(mt,at,et,kt,jt){const me=at&&at.routeConfig?at.routeConfig.canDeactivate:null;if(!me||0===me.length)return(0,P.of)(!0);const Ue=me.map(ei=>{const xi=Ss(ei,at,jt);let pn;if(function(mt){return mt&&No(mt.canDeactivate)}(xi))pn=ni(xi.canDeactivate(mt,at,et,kt));else{if(!No(xi))throw new Error("Invalid CanDeactivate guard");pn=ni(xi(mt,at,et,kt))}return pn.pipe(ot())});return(0,P.of)(Ue).pipe(Oo())}(jt.component,jt.route,et,at,kt)),ot(jt=>!0!==jt,!0))}(Ue,kt,jt,mt).pipe((0,re.z)(ei=>ei&&function(mt){return"boolean"==typeof mt}(ei)?function(mt,at,et,kt){return(0,D.D)(at).pipe((0,At.b)(jt=>(0,q.z)(function(mt,at){return null!==mt&&at&&at(new ui(mt)),(0,P.of)(!0)}(jt.route.parent,kt),function(mt,at){return null!==mt&&at&&at(new ce(mt)),(0,P.of)(!0)}(jt.route,kt),function(mt,at,et){const kt=at[at.length-1],me=at.slice(0,at.length-1).reverse().map(Ue=>function(mt){const at=mt.routeConfig?mt.routeConfig.canActivateChild:null;return at&&0!==at.length?{node:mt,guards:at}:null}(Ue)).filter(Ue=>null!==Ue).map(Ue=>(0,bt.P)(()=>{const ei=Ue.guards.map(xi=>{const pn=Ss(xi,Ue.node,et);let lr;if(function(mt){return mt&&No(mt.canActivateChild)}(pn))lr=ni(pn.canActivateChild(kt,mt));else{if(!No(pn))throw new Error("Invalid CanActivateChild guard");lr=ni(pn(kt,mt))}return lr.pipe(ot())});return(0,P.of)(ei).pipe(Oo())}));return(0,P.of)(me).pipe(Oo())}(mt,jt.path,et),function(mt,at,et){const kt=at.routeConfig?at.routeConfig.canActivate:null;if(!kt||0===kt.length)return(0,P.of)(!0);const jt=kt.map(me=>(0,bt.P)(()=>{const Ue=Ss(me,at,et);let ei;if(function(mt){return mt&&No(mt.canActivate)}(Ue))ei=ni(Ue.canActivate(at,mt));else{if(!No(Ue))throw new Error("Invalid CanActivate guard");ei=ni(Ue(at,mt))}return ei.pipe(ot())}));return(0,P.of)(jt).pipe(Oo())}(mt,jt.route,et))),ot(jt=>!0!==jt,!0))}(kt,me,mt,at):(0,P.of)(ei)),(0,st.U)(ei=>Object.assign(Object.assign({},et),{guardsResult:ei})))})}(this.ngModule.injector,ei=>this.triggerEvent(ei)),(0,ve.b)(ei=>{if(_r(ei.guardsResult)){const pn=zt(`Redirecting to "${this.serializeUrl(ei.guardsResult)}"`);throw pn.url=ei.guardsResult,pn}const xi=new Qt(ei.id,this.serializeUrl(ei.extractedUrl),this.serializeUrl(ei.urlAfterRedirects),ei.targetSnapshot,!!ei.guardsResult);this.triggerEvent(xi)}),(0,Kt.h)(ei=>!!ei.guardsResult||(this.restoreHistory(ei),this.cancelNavigationTransition(ei,""),!1)),oo(ei=>{if(ei.guards.canActivateChecks.length)return(0,P.of)(ei).pipe((0,ve.b)(xi=>{const pn=new ee(xi.id,this.serializeUrl(xi.extractedUrl),this.serializeUrl(xi.urlAfterRedirects),xi.targetSnapshot);this.triggerEvent(pn)}),(0,Z.w)(xi=>{let pn=!1;return(0,P.of)(xi).pipe(function(mt,at){return(0,re.z)(et=>{const{targetSnapshot:kt,guards:{canActivateChecks:jt}}=et;if(!jt.length)return(0,P.of)(et);let me=0;return(0,D.D)(jt).pipe((0,At.b)(Ue=>function(mt,at,et,kt){return function(mt,at,et,kt){const jt=Object.keys(mt);if(0===jt.length)return(0,P.of)({});const me={};return(0,D.D)(jt).pipe((0,re.z)(Ue=>function(mt,at,et,kt){const jt=Ss(mt,at,kt);return ni(jt.resolve?jt.resolve(at,et):jt(at,et))}(mt[Ue],at,et,kt).pipe((0,ve.b)(ei=>{me[Ue]=ei}))),It(1),(0,re.z)(()=>Object.keys(me).length===jt.length?(0,P.of)(me):Ft.E))}(mt._resolve,mt,at,kt).pipe((0,st.U)(me=>(mt._resolvedData=me,mt.data=Object.assign(Object.assign({},mt.data),ji(mt,et).resolve),null)))}(Ue.route,kt,mt,at)),(0,ve.b)(()=>me++),It(1),(0,re.z)(Ue=>me===jt.length?(0,P.of)(et):Ft.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ve.b)({next:()=>pn=!0,complete:()=>{pn||(this.restoreHistory(xi),this.cancelNavigationTransition(xi,"At least one route resolver didn't emit any value."))}}))}),(0,ve.b)(xi=>{const pn=new Mt(xi.id,this.serializeUrl(xi.extractedUrl),this.serializeUrl(xi.urlAfterRedirects),xi.targetSnapshot);this.triggerEvent(pn)}))}),oo(ei=>{const{targetSnapshot:xi,id:pn,extractedUrl:lr,rawUrl:Hn,extras:{skipLocationChange:kr,replaceUrl:so}}=ei;return this.hooks.afterPreactivation(xi,{navigationId:pn,appliedUrlTree:lr,rawUrlTree:Hn,skipLocationChange:!!kr,replaceUrl:!!so})}),(0,st.U)(ei=>{const xi=function(mt,at,et){const kt=vo(mt,at._root,et?et._root:void 0);return new Nn(kt,at)}(this.routeReuseStrategy,ei.targetSnapshot,ei.currentRouterState);return Object.assign(Object.assign({},ei),{targetRouterState:xi})}),(0,ve.b)(ei=>{this.currentUrlTree=ei.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ei.urlAfterRedirects,ei.rawUrl),this.routerState=ei.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ei.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ei),this.browserUrlTree=ei.urlAfterRedirects)}),((mt,at,et)=>(0,st.U)(kt=>(new al(at,kt.targetRouterState,kt.currentRouterState,et).activate(mt),kt)))(this.rootContexts,this.routeReuseStrategy,ei=>this.triggerEvent(ei)),(0,ve.b)({next(){me=!0},complete(){me=!0}}),(0,oe.x)(()=>{var ei;me||Ue||this.cancelNavigationTransition(jt,`Navigation ID ${jt.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ei=this.currentNavigation)||void 0===ei?void 0:ei.id)===jt.id&&(this.currentNavigation=null)}),(0,vt.K)(ei=>{if(Ue=!0,function(mt){return mt&&mt[Dt]}(ei)){const xi=_r(ei.url);xi||(this.navigated=!0,this.restoreHistory(jt,!0));const pn=new we(jt.id,this.serializeUrl(jt.extractedUrl),ei.message);kt.next(pn),xi?setTimeout(()=>{const lr=this.urlHandlingStrategy.merge(ei.url,this.rawUrlTree),Hn={skipLocationChange:jt.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||bs(jt.source)};this.scheduleNavigation(lr,"imperative",null,Hn,{resolve:jt.resolve,reject:jt.reject,promise:jt.promise})},0):jt.resolve(!1)}else{this.restoreHistory(jt,!0);const xi=new ci(jt.id,this.serializeUrl(jt.extractedUrl),ei);kt.next(xi);try{jt.resolve(this.errorHandler(ei))}catch(pn){jt.reject(pn)}}return Ft.E}))}))}resetRootComponentType(et){this.rootComponentType=et,this.routerState.root.component=this.rootComponentType}setTransition(et){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),et))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(et=>{const kt="popstate"===et.type?"popstate":"hashchange";"popstate"===kt&&setTimeout(()=>{var jt;const me={replaceUrl:!0},Ue=(null===(jt=et.state)||void 0===jt?void 0:jt.navigationId)?et.state:null;if(Ue){const xi=Object.assign({},Ue);delete xi.navigationId,delete xi.\u0275routerPageId,0!==Object.keys(xi).length&&(me.state=xi)}const ei=this.parseUrl(et.url);this.scheduleNavigation(ei,kt,Ue,me)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(et){this.events.next(et)}resetConfig(et){Hr(et),this.config=et.map(cs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(et,kt={}){const{relativeTo:jt,queryParams:me,fragment:Ue,queryParamsHandling:ei,preserveFragment:xi}=kt,pn=jt||this.routerState.root,lr=xi?this.currentUrlTree.fragment:Ue;let Hn=null;switch(ei){case"merge":Hn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),me);break;case"preserve":Hn=this.currentUrlTree.queryParams;break;default:Hn=me||null}return null!==Hn&&(Hn=this.removeEmptyProps(Hn)),function(mt,at,et,kt,jt){if(0===et.length)return sl(at.root,at.root,at,kt,jt);const me=function(mt){if("string"==typeof mt[0]&&1===mt.length&&"/"===mt[0])return new ya(!0,0,mt);let at=0,et=!1;const kt=mt.reduce((jt,me,Ue)=>{if("object"==typeof me&&null!=me){if(me.outlets){const ei={};return Ii(me.outlets,(xi,pn)=>{ei[pn]="string"==typeof xi?xi.split("/"):xi}),[...jt,{outlets:ei}]}if(me.segmentPath)return[...jt,me.segmentPath]}return"string"!=typeof me?[...jt,me]:0===Ue?(me.split("/").forEach((ei,xi)=>{0==xi&&"."===ei||(0==xi&&""===ei?et=!0:".."===ei?at++:""!=ei&&jt.push(ei))}),jt):[...jt,me]},[]);return new ya(et,at,kt)}(et);if(me.toRoot())return sl(at.root,new Le([],{}),at,kt,jt);const Ue=function(mt,at,et){if(mt.isAbsolute)return new Cr(at.root,!0,0);if(-1===et.snapshot._lastPathIndex){const me=et.snapshot._urlSegment;return new Cr(me,me===at.root,0)}const kt=ho(mt.commands[0])?0:1;return function(mt,at,et){let kt=mt,jt=at,me=et;for(;me>jt;){if(me-=jt,kt=kt.parent,!kt)throw new Error("Invalid number of '../'");jt=kt.segments.length}return new Cr(kt,!1,jt-me)}(et.snapshot._urlSegment,et.snapshot._lastPathIndex+kt,mt.numberOfDoubleDots)}(me,at,mt),ei=Ue.processChildren?Ts(Ue.segmentGroup,Ue.index,me.commands):qs(Ue.segmentGroup,Ue.index,me.commands);return sl(Ue.segmentGroup,ei,at,kt,jt)}(pn,this.currentUrlTree,et,Hn,null!=lr?lr:null)}navigateByUrl(et,kt={skipLocationChange:!1}){const jt=_r(et)?et:this.parseUrl(et),me=this.urlHandlingStrategy.merge(jt,this.rawUrlTree);return this.scheduleNavigation(me,"imperative",null,kt)}navigate(et,kt={skipLocationChange:!1}){return function(mt){for(let at=0;at<mt.length;at++){const et=mt[at];if(null==et)throw new Error(`The requested path contains ${et} segment at index ${at}`)}}(et),this.navigateByUrl(this.createUrlTree(et,kt),kt)}serializeUrl(et){return this.urlSerializer.serialize(et)}parseUrl(et){let kt;try{kt=this.urlSerializer.parse(et)}catch(jt){kt=this.malformedUriErrorHandler(jt,this.urlSerializer,et)}return kt}isActive(et,kt){let jt;if(jt=!0===kt?Object.assign({},ra):!1===kt?Object.assign({},qr):kt,_r(et))return Ei(this.currentUrlTree,et,jt);const me=this.parseUrl(et);return Ei(this.currentUrlTree,me,jt)}removeEmptyProps(et){return Object.keys(et).reduce((kt,jt)=>{const me=et[jt];return null!=me&&(kt[jt]=me),kt},{})}processNavigations(){this.navigations.subscribe(et=>{this.navigated=!0,this.lastSuccessfulId=et.id,this.currentPageId=et.targetPageId,this.events.next(new Ze(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,et.resolve(!0)},et=>{this.console.warn(`Unhandled Navigation Error: ${et}`)})}scheduleNavigation(et,kt,jt,me,Ue){var ei,xi,pn;if(this.disposed)return Promise.resolve(!1);const lr=this.transitions.value,Hn=bs(kt)&&lr&&!bs(lr.source),kr=lr.rawUrl.toString()===et.toString(),so=lr.id===(null===(ei=this.currentNavigation)||void 0===ei?void 0:ei.id);if(Hn&&kr&&so)return Promise.resolve(!0);let Xs,Ca,As;Ue?(Xs=Ue.resolve,Ca=Ue.reject,As=Ue.promise):As=new Promise((Tl,ga)=>{Xs=Tl,Ca=ga});const ys=++this.navigationId;let sa;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(jt=this.location.getState()),sa=jt&&jt.\u0275routerPageId?jt.\u0275routerPageId:me.replaceUrl||me.skipLocationChange?null!==(xi=this.browserPageId)&&void 0!==xi?xi:0:(null!==(pn=this.browserPageId)&&void 0!==pn?pn:0)+1):sa=0,this.setTransition({id:ys,targetPageId:sa,source:kt,restoredState:jt,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:et,extras:me,resolve:Xs,reject:Ca,promise:As,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),As.catch(Tl=>Promise.reject(Tl))}setBrowserUrl(et,kt){const jt=this.urlSerializer.serialize(et),me=Object.assign(Object.assign({},kt.extras.state),this.generateNgRouterState(kt.id,kt.targetPageId));this.location.isCurrentPathEqualTo(jt)||kt.extras.replaceUrl?this.location.replaceState(jt,"",me):this.location.go(jt,"",me)}restoreHistory(et,kt=!1){var jt,me;if("computed"===this.canceledNavigationResolution){const Ue=this.currentPageId-et.targetPageId;"popstate"!==et.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(jt=this.currentNavigation)||void 0===jt?void 0:jt.finalUrl)||0===Ue?this.currentUrlTree===(null===(me=this.currentNavigation)||void 0===me?void 0:me.finalUrl)&&0===Ue&&(this.resetState(et),this.browserUrlTree=et.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ue)}else"replace"===this.canceledNavigationResolution&&(kt&&this.resetState(et),this.resetUrlToCurrentUrlTree())}resetState(et){this.routerState=et.currentRouterState,this.currentUrlTree=et.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,et.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(et,kt){const jt=new we(et.id,this.serializeUrl(et.extractedUrl),kt);this.triggerEvent(jt),et.resolve(!1)}generateNgRouterState(et,kt){return"computed"===this.canceledNavigationResolution?{navigationId:et,\u0275routerPageId:kt}:{navigationId:et}}}return mt.\u0275fac=function(et){y.$Z()},mt.\u0275prov=y.Yz7({token:mt,factory:mt.\u0275fac}),mt})();function bs(mt){return"imperative"!==mt}let jo=(()=>{class mt{constructor(et,kt,jt){this.router=et,this.route=kt,this.locationStrategy=jt,this.commands=null,this.href=null,this.onChanges=new gt.x,this.subscription=et.events.subscribe(me=>{me instanceof Ze&&this.updateTargetUrlAndHref()})}set routerLink(et){this.commands=null!=et?Array.isArray(et)?et:[et]:null}ngOnChanges(et){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(et,kt,jt,me,Ue){if(0!==et||kt||jt||me||Ue||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ei={skipLocationChange:js(this.skipLocationChange),replaceUrl:js(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ei),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:js(this.preserveFragment)})}}return mt.\u0275fac=function(et){return new(et||mt)(y.Y36(Do),y.Y36(Ai),y.Y36(Re.S$))},mt.\u0275dir=y.lG2({type:mt,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(et,kt){1&et&&y.NdJ("click",function(me){return kt.onClick(me.button,me.ctrlKey,me.shiftKey,me.altKey,me.metaKey)}),2&et&&y.uIk("target",kt.target)("href",kt.href,y.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[y.TTD]}),mt})();function js(mt){return""===mt||!!mt}class Ms{}class pa{preload(at,et){return(0,P.of)(null)}}let Pa=(()=>{class mt{constructor(et,kt,jt,me){this.router=et,this.injector=jt,this.preloadingStrategy=me,this.loader=new jn(jt,kt,xi=>et.triggerEvent(new Yt(xi)),xi=>et.triggerEvent(new ye(xi)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Kt.h)(et=>et instanceof Ze),(0,At.b)(()=>this.preload())).subscribe(()=>{})}preload(){const et=this.injector.get(y.h0i);return this.processRoutes(et,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(et,kt){const jt=[];for(const me of kt)if(me.loadChildren&&!me.canLoad&&me._loadedConfig){const Ue=me._loadedConfig;jt.push(this.processRoutes(Ue.module,Ue.routes))}else me.loadChildren&&!me.canLoad?jt.push(this.preloadConfig(et,me)):me.children&&jt.push(this.processRoutes(et,me.children));return(0,D.D)(jt).pipe((0,Ie.J)(),(0,st.U)(me=>{}))}preloadConfig(et,kt){return this.preloadingStrategy.preload(kt,()=>(kt._loadedConfig?(0,P.of)(kt._loadedConfig):this.loader.load(et.injector,kt)).pipe((0,re.z)(me=>(kt._loadedConfig=me,this.processRoutes(me.module,me.routes)))))}}return mt.\u0275fac=function(et){return new(et||mt)(y.LFG(Do),y.LFG(y.Sil),y.LFG(y.zs3),y.LFG(Ms))},mt.\u0275prov=y.Yz7({token:mt,factory:mt.\u0275fac}),mt})(),fa=(()=>{class mt{constructor(et,kt,jt={}){this.router=et,this.viewportScroller=kt,this.options=jt,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},jt.scrollPositionRestoration=jt.scrollPositionRestoration||"disabled",jt.anchorScrolling=jt.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(et=>{et instanceof Si?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=et.navigationTrigger,this.restoredId=et.restoredState?et.restoredState.navigationId:0):et instanceof Ze&&(this.lastId=et.id,this.scheduleScrollEvent(et,this.router.parseUrl(et.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(et=>{et instanceof Me&&(et.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(et.position):et.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(et.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(et,kt){this.router.triggerEvent(new Me(et,"popstate"===this.lastSource?this.store[this.restoredId]:null,kt))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return mt.\u0275fac=function(et){y.$Z()},mt.\u0275prov=y.Yz7({token:mt,factory:mt.\u0275fac}),mt})();const qa=new y.OlP("ROUTER_CONFIGURATION"),yl=new y.OlP("ROUTER_FORROOT_GUARD"),Ll=[Re.Ye,{provide:pi,useClass:Ke},{provide:Do,useFactory:function(mt,at,et,kt,jt,me,Ue={},ei,xi){const pn=new Do(null,mt,at,et,kt,jt,on(me));return ei&&(pn.urlHandlingStrategy=ei),xi&&(pn.routeReuseStrategy=xi),function(mt,at){mt.errorHandler&&(at.errorHandler=mt.errorHandler),mt.malformedUriErrorHandler&&(at.malformedUriErrorHandler=mt.malformedUriErrorHandler),mt.onSameUrlNavigation&&(at.onSameUrlNavigation=mt.onSameUrlNavigation),mt.paramsInheritanceStrategy&&(at.paramsInheritanceStrategy=mt.paramsInheritanceStrategy),mt.relativeLinkResolution&&(at.relativeLinkResolution=mt.relativeLinkResolution),mt.urlUpdateStrategy&&(at.urlUpdateStrategy=mt.urlUpdateStrategy),mt.canceledNavigationResolution&&(at.canceledNavigationResolution=mt.canceledNavigationResolution)}(Ue,pn),Ue.enableTracing&&pn.events.subscribe(lr=>{var Hn,kr;null===(Hn=console.group)||void 0===Hn||Hn.call(console,`Router Event: ${lr.constructor.name}`),console.log(lr.toString()),console.log(lr),null===(kr=console.groupEnd)||void 0===kr||kr.call(console)}),pn},deps:[pi,Qr,Re.Ye,y.zs3,y.Sil,Dn,qa,[class{},new y.FiY],[class{},new y.FiY]]},Qr,{provide:Ai,useFactory:function(mt){return mt.routerState.root},deps:[Do]},Pa,pa,class{preload(at,et){return et().pipe((0,vt.K)(()=>(0,P.of)(null)))}},{provide:qa,useValue:{enableTracing:!1}}];function El(){return new y.PXZ("Router",Do)}let Oa=(()=>{class mt{constructor(et,kt){}static forRoot(et,kt){return{ngModule:mt,providers:[Ll,ds(et),{provide:yl,useFactory:lc,deps:[[Do,new y.FiY,new y.tp0]]},{provide:qa,useValue:kt||{}},{provide:Re.S$,useFactory:Nl,deps:[Re.lw,[new y.tBr(Re.mr),new y.FiY],qa]},{provide:fa,useFactory:ac,deps:[Do,Re.EM,qa]},{provide:Ms,useExisting:kt&&kt.preloadingStrategy?kt.preloadingStrategy:pa},{provide:y.PXZ,multi:!0,useFactory:El},[Ba,{provide:y.ip1,multi:!0,useFactory:Xl,deps:[Ba]},{provide:uc,useFactory:cc,deps:[Ba]},{provide:y.tb,multi:!0,useExisting:uc}]]}}static forChild(et){return{ngModule:mt,providers:[ds(et)]}}}return mt.\u0275fac=function(et){return new(et||mt)(y.LFG(yl,8),y.LFG(Do,8))},mt.\u0275mod=y.oAB({type:mt}),mt.\u0275inj=y.cJS({}),mt})();function ac(mt,at,et){return et.scrollOffset&&at.setOffset(et.scrollOffset),new fa(mt,at,et)}function Nl(mt,at,et={}){return et.useHash?new Re.Do(mt,at):new Re.b0(mt,at)}function lc(mt){return"guarded"}function ds(mt){return[{provide:y.deG,multi:!0,useValue:mt},{provide:Dn,multi:!0,useValue:mt}]}let Ba=(()=>{class mt{constructor(et){this.injector=et,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new gt.x}appInitializer(){return this.injector.get(Re.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let kt=null;const jt=new Promise(ei=>kt=ei),me=this.injector.get(Do),Ue=this.injector.get(qa);return"disabled"===Ue.initialNavigation?(me.setUpLocationChangeListener(),kt(!0)):"enabled"===Ue.initialNavigation||"enabledBlocking"===Ue.initialNavigation?(me.hooks.afterPreactivation=()=>this.initNavigation?(0,P.of)(null):(this.initNavigation=!0,kt(!0),this.resultOfPreactivationDone),me.initialNavigation()):kt(!0),jt})}bootstrapListener(et){const kt=this.injector.get(qa),jt=this.injector.get(Pa),me=this.injector.get(fa),Ue=this.injector.get(Do),ei=this.injector.get(y.z2F);et===ei.components[0]&&(("enabledNonBlocking"===kt.initialNavigation||void 0===kt.initialNavigation)&&Ue.initialNavigation(),jt.setUpPreloading(),me.init(),Ue.resetRootComponentType(ei.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return mt.\u0275fac=function(et){return new(et||mt)(y.LFG(y.zs3))},mt.\u0275prov=y.Yz7({token:mt,factory:mt.\u0275fac}),mt})();function Xl(mt){return mt.appInitializer.bind(mt)}function cc(mt){return mt.bootstrapListener.bind(mt)}const uc=new y.OlP("Router Initializer")},33:(H,W,f)=>{"use strict";f.d(W,{C:()=>Zt,k:()=>vt});var ut=f(5e3),ot=f(93075);const st=["ref"];function Z(At){return At&&At.replace(/\r\n|\r/g,"\n")}let Zt=(()=>{class At{constructor(ve,oe){this._differs=ve,this._ngZone=oe,this.className="",this.name="codemirror",this.autoFocus=!1,this.preserveScrollPosition=!1,this.cursorActivity=new ut.vpe,this.focusChange=new ut.vpe,this.scroll=new ut.vpe,this.drop=new ut.vpe,this.value="",this.disabled=!1,this.isFocused=!1,this.onChange=Ie=>{},this.onTouched=()=>{}}set options(ve){this._options=ve,!this._differ&&ve&&(this._differ=this._differs.find(ve).create())}get codeMirrorGlobal(){return this._codeMirror||(this._codeMirror="undefined"!=typeof CodeMirror?CodeMirror:Promise.resolve().then(f.t.bind(f,68266,19))),this._codeMirror}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>function(At,re,ve,oe){return new(ve||(ve=Promise))(function(Re,je){function Si(ci){try{we(oe.next(ci))}catch(Wt){je(Wt)}}function Ze(ci){try{we(oe.throw(ci))}catch(Wt){je(Wt)}}function we(ci){ci.done?Re(ci.value):function(Re){return Re instanceof ve?Re:new ve(function(je){je(Re)})}(ci.value).then(Si,Ze)}we((oe=oe.apply(At,re||[])).next())})}(this,void 0,void 0,function*(){const ve=yield this.codeMirrorGlobal;this.codeMirror=((null==ve?void 0:ve.default)?ve.default:ve).fromTextArea(this.ref.nativeElement,this._options),this.codeMirror.on("cursorActivity",Ie=>this._ngZone.run(()=>this.cursorActive(Ie))),this.codeMirror.on("scroll",this.scrollChanged.bind(this)),this.codeMirror.on("blur",()=>this._ngZone.run(()=>this.focusChanged(!1))),this.codeMirror.on("focus",()=>this._ngZone.run(()=>this.focusChanged(!0))),this.codeMirror.on("change",(Ie,Re)=>this._ngZone.run(()=>this.codemirrorValueChanged(Ie,Re))),this.codeMirror.on("drop",(Ie,Re)=>{this._ngZone.run(()=>this.dropFiles(Ie,Re))}),this.codeMirror.setValue(this.value)}))}ngDoCheck(){if(!this._differ)return;const ve=this._differ.diff(this._options);ve&&(ve.forEachChangedItem(oe=>this.setOptionIfChanged(oe.key,oe.currentValue)),ve.forEachAddedItem(oe=>this.setOptionIfChanged(oe.key,oe.currentValue)),ve.forEachRemovedItem(oe=>this.setOptionIfChanged(oe.key,oe.currentValue)))}ngOnDestroy(){this.codeMirror&&this.codeMirror.toTextArea()}codemirrorValueChanged(ve,oe){const Ie=ve.getValue();this.value!==Ie&&(this.value=Ie,this.onChange(this.value))}setOptionIfChanged(ve,oe){!this.codeMirror||this.codeMirror.setOption(ve,oe)}focusChanged(ve){this.onTouched(),this.isFocused=ve,this.focusChange.emit(ve)}scrollChanged(ve){this.scroll.emit(ve.getScrollInfo())}cursorActive(ve){this.cursorActivity.emit(ve)}dropFiles(ve,oe){this.drop.emit([ve,oe])}writeValue(ve){if(null==ve)return;if(!this.codeMirror)return void(this.value=ve);const oe=this.codeMirror.getValue();if(ve!==oe&&Z(oe)!==Z(ve))if(this.value=ve,this.preserveScrollPosition){const Ie=this.codeMirror.getScrollInfo();this.codeMirror.setValue(this.value),this.codeMirror.scrollTo(Ie.left,Ie.top)}else this.codeMirror.setValue(this.value)}registerOnChange(ve){this.onChange=ve}registerOnTouched(ve){this.onTouched=ve}setDisabledState(ve){this.disabled=ve,this.setOptionIfChanged("readOnly",this.disabled)}}return At.\u0275fac=function(ve){return new(ve||At)(ut.Y36(ut.aQg),ut.Y36(ut.R0b))},At.\u0275cmp=ut.Xpm({type:At,selectors:[["ngx-codemirror"]],viewQuery:function(ve,oe){if(1&ve&&ut.Gf(st,5),2&ve){let Ie;ut.iGM(Ie=ut.CRH())&&(oe.ref=Ie.first)}},inputs:{className:"className",name:"name",autoFocus:"autoFocus",options:"options",preserveScrollPosition:"preserveScrollPosition"},outputs:{cursorActivity:"cursorActivity",focusChange:"focusChange",scroll:"scroll",drop:"drop"},features:[ut._Bn([{provide:ot.JU,useExisting:(0,ut.Gpc)(()=>At),multi:!0}])],decls:3,vars:7,consts:[["autocomplete","off",3,"name","autofocus"],["ref",""]],template:function(ve,oe){1&ve&&(ut.TgZ(0,"textarea",0,1),ut._uU(2,"    "),ut.qZA()),2&ve&&(ut.Gre("ngx-codemirror ",oe.className,""),ut.ekj("ngx-codemirror--focused",oe.isFocused),ut.Q6J("name",oe.name)("autofocus",oe.autoFocus))},encapsulation:2,changeDetection:0}),At})(),vt=(()=>{class At{}return At.\u0275fac=function(ve){return new(ve||At)},At.\u0275mod=ut.oAB({type:At}),At.\u0275inj=ut.cJS({}),At})()},15861:(H,W,f)=>{"use strict";function y(e,t,n,r,s,c,v){try{var D=e[c](v),P=D.value}catch(G){return void n(G)}D.done?t(P):Promise.resolve(P).then(r,s)}function g(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var c=e.apply(t,n);function v(P){y(c,r,s,v,D,"next",P)}function D(P){y(c,r,s,v,D,"throw",P)}v(void 0)})}}f.d(W,{Z:()=>g})}},H=>{H(H.s=13155)}]);